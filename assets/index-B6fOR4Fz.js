var dD=Object.defineProperty;var rE=e=>{throw TypeError(e)};var fD=(e,t,r)=>t in e?dD(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var nE=(e,t,r)=>fD(e,typeof t!="symbol"?t+"":t,r),Pw=(e,t,r)=>t.has(e)||rE("Cannot "+r);var Gt=(e,t,r)=>(Pw(e,t,"read from private field"),r?r.call(e):t.get(e)),Hn=(e,t,r)=>t.has(e)?rE("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,r),dn=(e,t,r,i)=>(Pw(e,t,"write to private field"),i?i.call(e,r):t.set(e,r),r),Vo=(e,t,r)=>(Pw(e,t,"access private method"),r);var ry=(e,t,r,i)=>({set _(a){dn(e,t,a,r)},get _(){return Gt(e,t,i)}});function pD(e,t){for(var r=0;r<t.length;r++){const i=t[r];if(typeof i!="string"&&!Array.isArray(i)){for(const a in i)if(a!=="default"&&!(a in e)){const u=Object.getOwnPropertyDescriptor(i,a);u&&Object.defineProperty(e,a,u.get?u:{enumerable:!0,get:()=>i[a]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))i(a);new MutationObserver(a=>{for(const u of a)if(u.type==="childList")for(const h of u.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&i(h)}).observe(document,{childList:!0,subtree:!0});function r(a){const u={};return a.integrity&&(u.integrity=a.integrity),a.referrerPolicy&&(u.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?u.credentials="include":a.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function i(a){if(a.ep)return;a.ep=!0;const u=r(a);fetch(a.href,u)}})();var mD=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function CB(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var jT={exports:{}},O1={},VT={exports:{}},Sn={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var w0=Symbol.for("react.element"),gD=Symbol.for("react.portal"),yD=Symbol.for("react.fragment"),vD=Symbol.for("react.strict_mode"),_D=Symbol.for("react.profiler"),wD=Symbol.for("react.provider"),xD=Symbol.for("react.context"),bD=Symbol.for("react.forward_ref"),BD=Symbol.for("react.suspense"),CD=Symbol.for("react.memo"),SD=Symbol.for("react.lazy"),iE=Symbol.iterator;function ED(e){return e===null||typeof e!="object"?null:(e=iE&&e[iE]||e["@@iterator"],typeof e=="function"?e:null)}var KT={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},GT=Object.assign,$T={};function om(e,t,r){this.props=e,this.context=t,this.refs=$T,this.updater=r||KT}om.prototype.isReactComponent={};om.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};om.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function qT(){}qT.prototype=om.prototype;function SB(e,t,r){this.props=e,this.context=t,this.refs=$T,this.updater=r||KT}var EB=SB.prototype=new qT;EB.constructor=SB;GT(EB,om.prototype);EB.isPureReactComponent=!0;var sE=Array.isArray,ZT=Object.prototype.hasOwnProperty,IB={current:null},WT={key:!0,ref:!0,__self:!0,__source:!0};function XT(e,t,r){var i,a={},u=null,h=null;if(t!=null)for(i in t.ref!==void 0&&(h=t.ref),t.key!==void 0&&(u=""+t.key),t)ZT.call(t,i)&&!WT.hasOwnProperty(i)&&(a[i]=t[i]);var o=arguments.length-2;if(o===1)a.children=r;else if(1<o){for(var g=Array(o),y=0;y<o;y++)g[y]=arguments[y+2];a.children=g}if(e&&e.defaultProps)for(i in o=e.defaultProps,o)a[i]===void 0&&(a[i]=o[i]);return{$$typeof:w0,type:e,key:u,ref:h,props:a,_owner:IB.current}}function ID(e,t){return{$$typeof:w0,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function FB(e){return typeof e=="object"&&e!==null&&e.$$typeof===w0}function FD(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var oE=/\/+/g;function Lw(e,t){return typeof e=="object"&&e!==null&&e.key!=null?FD(""+e.key):t.toString(36)}function cv(e,t,r,i,a){var u=typeof e;(u==="undefined"||u==="boolean")&&(e=null);var h=!1;if(e===null)h=!0;else switch(u){case"string":case"number":h=!0;break;case"object":switch(e.$$typeof){case w0:case gD:h=!0}}if(h)return h=e,a=a(h),e=i===""?"."+Lw(h,0):i,sE(a)?(r="",e!=null&&(r=e.replace(oE,"$&/")+"/"),cv(a,t,r,"",function(y){return y})):a!=null&&(FB(a)&&(a=ID(a,r+(!a.key||h&&h.key===a.key?"":(""+a.key).replace(oE,"$&/")+"/")+e)),t.push(a)),1;if(h=0,i=i===""?".":i+":",sE(e))for(var o=0;o<e.length;o++){u=e[o];var g=i+Lw(u,o);h+=cv(u,t,r,g,a)}else if(g=ED(e),typeof g=="function")for(e=g.call(e),o=0;!(u=e.next()).done;)u=u.value,g=i+Lw(u,o++),h+=cv(u,t,r,g,a);else if(u==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return h}function ny(e,t,r){if(e==null)return e;var i=[],a=0;return cv(e,i,"","",function(u){return t.call(r,u,a++)}),i}function TD(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var ba={current:null},uv={transition:null},PD={ReactCurrentDispatcher:ba,ReactCurrentBatchConfig:uv,ReactCurrentOwner:IB};function YT(){throw Error("act(...) is not supported in production builds of React.")}Sn.Children={map:ny,forEach:function(e,t,r){ny(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return ny(e,function(){t++}),t},toArray:function(e){return ny(e,function(t){return t})||[]},only:function(e){if(!FB(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Sn.Component=om;Sn.Fragment=yD;Sn.Profiler=_D;Sn.PureComponent=SB;Sn.StrictMode=vD;Sn.Suspense=BD;Sn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=PD;Sn.act=YT;Sn.cloneElement=function(e,t,r){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=GT({},e.props),a=e.key,u=e.ref,h=e._owner;if(t!=null){if(t.ref!==void 0&&(u=t.ref,h=IB.current),t.key!==void 0&&(a=""+t.key),e.type&&e.type.defaultProps)var o=e.type.defaultProps;for(g in t)ZT.call(t,g)&&!WT.hasOwnProperty(g)&&(i[g]=t[g]===void 0&&o!==void 0?o[g]:t[g])}var g=arguments.length-2;if(g===1)i.children=r;else if(1<g){o=Array(g);for(var y=0;y<g;y++)o[y]=arguments[y+2];i.children=o}return{$$typeof:w0,type:e.type,key:a,ref:u,props:i,_owner:h}};Sn.createContext=function(e){return e={$$typeof:xD,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:wD,_context:e},e.Consumer=e};Sn.createElement=XT;Sn.createFactory=function(e){var t=XT.bind(null,e);return t.type=e,t};Sn.createRef=function(){return{current:null}};Sn.forwardRef=function(e){return{$$typeof:bD,render:e}};Sn.isValidElement=FB;Sn.lazy=function(e){return{$$typeof:SD,_payload:{_status:-1,_result:e},_init:TD}};Sn.memo=function(e,t){return{$$typeof:CD,type:e,compare:t===void 0?null:t}};Sn.startTransition=function(e){var t=uv.transition;uv.transition={};try{e()}finally{uv.transition=t}};Sn.unstable_act=YT;Sn.useCallback=function(e,t){return ba.current.useCallback(e,t)};Sn.useContext=function(e){return ba.current.useContext(e)};Sn.useDebugValue=function(){};Sn.useDeferredValue=function(e){return ba.current.useDeferredValue(e)};Sn.useEffect=function(e,t){return ba.current.useEffect(e,t)};Sn.useId=function(){return ba.current.useId()};Sn.useImperativeHandle=function(e,t,r){return ba.current.useImperativeHandle(e,t,r)};Sn.useInsertionEffect=function(e,t){return ba.current.useInsertionEffect(e,t)};Sn.useLayoutEffect=function(e,t){return ba.current.useLayoutEffect(e,t)};Sn.useMemo=function(e,t){return ba.current.useMemo(e,t)};Sn.useReducer=function(e,t,r){return ba.current.useReducer(e,t,r)};Sn.useRef=function(e){return ba.current.useRef(e)};Sn.useState=function(e){return ba.current.useState(e)};Sn.useSyncExternalStore=function(e,t,r){return ba.current.useSyncExternalStore(e,t,r)};Sn.useTransition=function(){return ba.current.useTransition()};Sn.version="18.3.1";VT.exports=Sn;var re=VT.exports;const hr=CB(re),TB=pD({__proto__:null,default:hr},[re]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var LD=re,MD=Symbol.for("react.element"),kD=Symbol.for("react.fragment"),UD=Object.prototype.hasOwnProperty,RD=LD.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,ND={key:!0,ref:!0,__self:!0,__source:!0};function JT(e,t,r){var i,a={},u=null,h=null;r!==void 0&&(u=""+r),t.key!==void 0&&(u=""+t.key),t.ref!==void 0&&(h=t.ref);for(i in t)UD.call(t,i)&&!ND.hasOwnProperty(i)&&(a[i]=t[i]);if(e&&e.defaultProps)for(i in t=e.defaultProps,t)a[i]===void 0&&(a[i]=t[i]);return{$$typeof:MD,type:e,key:u,ref:h,props:a,_owner:RD.current}}O1.Fragment=kD;O1.jsx=JT;O1.jsxs=JT;jT.exports=O1;var X=jT.exports,e3={exports:{}},Fl={},t3={exports:{}},r3={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(Le,He){var it=Le.length;Le.push(He);e:for(;0<it;){var Lt=it-1>>>1,ie=Le[Lt];if(0<a(ie,He))Le[Lt]=He,Le[it]=ie,it=Lt;else break e}}function r(Le){return Le.length===0?null:Le[0]}function i(Le){if(Le.length===0)return null;var He=Le[0],it=Le.pop();if(it!==He){Le[0]=it;e:for(var Lt=0,ie=Le.length,Ce=ie>>>1;Lt<Ce;){var Pe=2*(Lt+1)-1,$e=Le[Pe],nt=Pe+1,Xe=Le[nt];if(0>a($e,it))nt<ie&&0>a(Xe,$e)?(Le[Lt]=Xe,Le[nt]=it,Lt=nt):(Le[Lt]=$e,Le[Pe]=it,Lt=Pe);else if(nt<ie&&0>a(Xe,it))Le[Lt]=Xe,Le[nt]=it,Lt=nt;else break e}}return He}function a(Le,He){var it=Le.sortIndex-He.sortIndex;return it!==0?it:Le.id-He.id}if(typeof performance=="object"&&typeof performance.now=="function"){var u=performance;e.unstable_now=function(){return u.now()}}else{var h=Date,o=h.now();e.unstable_now=function(){return h.now()-o}}var g=[],y=[],C=1,I=null,F=3,b=!1,N=!1,U=!1,H=typeof setTimeout=="function"?setTimeout:null,k=typeof clearTimeout=="function"?clearTimeout:null,R=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function V(Le){for(var He=r(y);He!==null;){if(He.callback===null)i(y);else if(He.startTime<=Le)i(y),He.sortIndex=He.expirationTime,t(g,He);else break;He=r(y)}}function W(Le){if(U=!1,V(Le),!N)if(r(g)!==null)N=!0,Ze(se);else{var He=r(y);He!==null&&At(W,He.startTime-Le)}}function se(Le,He){N=!1,U&&(U=!1,k(ae),ae=-1),b=!0;var it=F;try{for(V(He),I=r(g);I!==null&&(!(I.expirationTime>He)||Le&&!te());){var Lt=I.callback;if(typeof Lt=="function"){I.callback=null,F=I.priorityLevel;var ie=Lt(I.expirationTime<=He);He=e.unstable_now(),typeof ie=="function"?I.callback=ie:I===r(g)&&i(g),V(He)}else i(g);I=r(g)}if(I!==null)var Ce=!0;else{var Pe=r(y);Pe!==null&&At(W,Pe.startTime-He),Ce=!1}return Ce}finally{I=null,F=it,b=!1}}var fe=!1,ue=null,ae=-1,Be=5,Ue=-1;function te(){return!(e.unstable_now()-Ue<Be)}function de(){if(ue!==null){var Le=e.unstable_now();Ue=Le;var He=!0;try{He=ue(!0,Le)}finally{He?Te():(fe=!1,ue=null)}}else fe=!1}var Te;if(typeof R=="function")Te=function(){R(de)};else if(typeof MessageChannel<"u"){var we=new MessageChannel,st=we.port2;we.port1.onmessage=de,Te=function(){st.postMessage(null)}}else Te=function(){H(de,0)};function Ze(Le){ue=Le,fe||(fe=!0,Te())}function At(Le,He){ae=H(function(){Le(e.unstable_now())},He)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(Le){Le.callback=null},e.unstable_continueExecution=function(){N||b||(N=!0,Ze(se))},e.unstable_forceFrameRate=function(Le){0>Le||125<Le?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Be=0<Le?Math.floor(1e3/Le):5},e.unstable_getCurrentPriorityLevel=function(){return F},e.unstable_getFirstCallbackNode=function(){return r(g)},e.unstable_next=function(Le){switch(F){case 1:case 2:case 3:var He=3;break;default:He=F}var it=F;F=He;try{return Le()}finally{F=it}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(Le,He){switch(Le){case 1:case 2:case 3:case 4:case 5:break;default:Le=3}var it=F;F=Le;try{return He()}finally{F=it}},e.unstable_scheduleCallback=function(Le,He,it){var Lt=e.unstable_now();switch(typeof it=="object"&&it!==null?(it=it.delay,it=typeof it=="number"&&0<it?Lt+it:Lt):it=Lt,Le){case 1:var ie=-1;break;case 2:ie=250;break;case 5:ie=1073741823;break;case 4:ie=1e4;break;default:ie=5e3}return ie=it+ie,Le={id:C++,callback:He,priorityLevel:Le,startTime:it,expirationTime:ie,sortIndex:-1},it>Lt?(Le.sortIndex=it,t(y,Le),r(g)===null&&Le===r(y)&&(U?(k(ae),ae=-1):U=!0,At(W,it-Lt))):(Le.sortIndex=ie,t(g,Le),N||b||(N=!0,Ze(se))),Le},e.unstable_shouldYield=te,e.unstable_wrapCallback=function(Le){var He=F;return function(){var it=F;F=He;try{return Le.apply(this,arguments)}finally{F=it}}}})(r3);t3.exports=r3;var DD=t3.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var QD=re,Il=DD;function or(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var n3=new Set,Rg={};function ff(e,t){Gp(e,t),Gp(e+"Capture",t)}function Gp(e,t){for(Rg[e]=t,e=0;e<t.length;e++)n3.add(t[e])}var Lu=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),hb=Object.prototype.hasOwnProperty,OD=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,aE={},lE={};function zD(e){return hb.call(lE,e)?!0:hb.call(aE,e)?!1:OD.test(e)?lE[e]=!0:(aE[e]=!0,!1)}function HD(e,t,r,i){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return i?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function jD(e,t,r,i){if(t===null||typeof t>"u"||HD(e,t,r,i))return!0;if(i)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Ba(e,t,r,i,a,u,h){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=i,this.attributeNamespace=a,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=u,this.removeEmptyString=h}var Eo={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Eo[e]=new Ba(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Eo[t]=new Ba(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Eo[e]=new Ba(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Eo[e]=new Ba(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Eo[e]=new Ba(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Eo[e]=new Ba(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Eo[e]=new Ba(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Eo[e]=new Ba(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Eo[e]=new Ba(e,5,!1,e.toLowerCase(),null,!1,!1)});var PB=/[\-:]([a-z])/g;function LB(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(PB,LB);Eo[t]=new Ba(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(PB,LB);Eo[t]=new Ba(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(PB,LB);Eo[t]=new Ba(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Eo[e]=new Ba(e,1,!1,e.toLowerCase(),null,!1,!1)});Eo.xlinkHref=new Ba("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Eo[e]=new Ba(e,1,!1,e.toLowerCase(),null,!0,!0)});function MB(e,t,r,i){var a=Eo.hasOwnProperty(t)?Eo[t]:null;(a!==null?a.type!==0:i||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(jD(t,r,a,i)&&(r=null),i||a===null?zD(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):a.mustUseProperty?e[a.propertyName]=r===null?a.type===3?!1:"":r:(t=a.attributeName,i=a.attributeNamespace,r===null?e.removeAttribute(t):(a=a.type,r=a===3||a===4&&r===!0?"":""+r,i?e.setAttributeNS(i,t,r):e.setAttribute(t,r))))}var Qu=QD.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,iy=Symbol.for("react.element"),sp=Symbol.for("react.portal"),op=Symbol.for("react.fragment"),kB=Symbol.for("react.strict_mode"),db=Symbol.for("react.profiler"),i3=Symbol.for("react.provider"),s3=Symbol.for("react.context"),UB=Symbol.for("react.forward_ref"),fb=Symbol.for("react.suspense"),pb=Symbol.for("react.suspense_list"),RB=Symbol.for("react.memo"),vh=Symbol.for("react.lazy"),o3=Symbol.for("react.offscreen"),AE=Symbol.iterator;function Dm(e){return e===null||typeof e!="object"?null:(e=AE&&e[AE]||e["@@iterator"],typeof e=="function"?e:null)}var Ji=Object.assign,Mw;function tg(e){if(Mw===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);Mw=t&&t[1]||""}return`
`+Mw+e}var kw=!1;function Uw(e,t){if(!e||kw)return"";kw=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(y){var i=y}Reflect.construct(e,[],t)}else{try{t.call()}catch(y){i=y}e.call(t.prototype)}else{try{throw Error()}catch(y){i=y}e()}}catch(y){if(y&&i&&typeof y.stack=="string"){for(var a=y.stack.split(`
`),u=i.stack.split(`
`),h=a.length-1,o=u.length-1;1<=h&&0<=o&&a[h]!==u[o];)o--;for(;1<=h&&0<=o;h--,o--)if(a[h]!==u[o]){if(h!==1||o!==1)do if(h--,o--,0>o||a[h]!==u[o]){var g=`
`+a[h].replace(" at new "," at ");return e.displayName&&g.includes("<anonymous>")&&(g=g.replace("<anonymous>",e.displayName)),g}while(1<=h&&0<=o);break}}}finally{kw=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?tg(e):""}function VD(e){switch(e.tag){case 5:return tg(e.type);case 16:return tg("Lazy");case 13:return tg("Suspense");case 19:return tg("SuspenseList");case 0:case 2:case 15:return e=Uw(e.type,!1),e;case 11:return e=Uw(e.type.render,!1),e;case 1:return e=Uw(e.type,!0),e;default:return""}}function mb(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case op:return"Fragment";case sp:return"Portal";case db:return"Profiler";case kB:return"StrictMode";case fb:return"Suspense";case pb:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case s3:return(e.displayName||"Context")+".Consumer";case i3:return(e._context.displayName||"Context")+".Provider";case UB:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case RB:return t=e.displayName||null,t!==null?t:mb(e.type)||"Memo";case vh:t=e._payload,e=e._init;try{return mb(e(t))}catch{}}return null}function KD(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return mb(t);case 8:return t===kB?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function ed(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function a3(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function GD(e){var t=a3(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),i=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var a=r.get,u=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return a.call(this)},set:function(h){i=""+h,u.call(this,h)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return i},setValue:function(h){i=""+h},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function sy(e){e._valueTracker||(e._valueTracker=GD(e))}function l3(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),i="";return e&&(i=a3(e)?e.checked?"true":"false":e.value),e=i,e!==r?(t.setValue(e),!0):!1}function Dv(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function gb(e,t){var r=t.checked;return Ji({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function cE(e,t){var r=t.defaultValue==null?"":t.defaultValue,i=t.checked!=null?t.checked:t.defaultChecked;r=ed(t.value!=null?t.value:r),e._wrapperState={initialChecked:i,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function A3(e,t){t=t.checked,t!=null&&MB(e,"checked",t,!1)}function yb(e,t){A3(e,t);var r=ed(t.value),i=t.type;if(r!=null)i==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(i==="submit"||i==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?vb(e,t.type,r):t.hasOwnProperty("defaultValue")&&vb(e,t.type,ed(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function uE(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var i=t.type;if(!(i!=="submit"&&i!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function vb(e,t,r){(t!=="number"||Dv(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var rg=Array.isArray;function _p(e,t,r,i){if(e=e.options,t){t={};for(var a=0;a<r.length;a++)t["$"+r[a]]=!0;for(r=0;r<e.length;r++)a=t.hasOwnProperty("$"+e[r].value),e[r].selected!==a&&(e[r].selected=a),a&&i&&(e[r].defaultSelected=!0)}else{for(r=""+ed(r),t=null,a=0;a<e.length;a++){if(e[a].value===r){e[a].selected=!0,i&&(e[a].defaultSelected=!0);return}t!==null||e[a].disabled||(t=e[a])}t!==null&&(t.selected=!0)}}function _b(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(or(91));return Ji({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function hE(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(or(92));if(rg(r)){if(1<r.length)throw Error(or(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:ed(r)}}function c3(e,t){var r=ed(t.value),i=ed(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),i!=null&&(e.defaultValue=""+i)}function dE(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function u3(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function wb(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?u3(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var oy,h3=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,i,a){MSApp.execUnsafeLocalFunction(function(){return e(t,r,i,a)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(oy=oy||document.createElement("div"),oy.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=oy.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Ng(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var pg={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},$D=["Webkit","ms","Moz","O"];Object.keys(pg).forEach(function(e){$D.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),pg[t]=pg[e]})});function d3(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||pg.hasOwnProperty(e)&&pg[e]?(""+t).trim():t+"px"}function f3(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var i=r.indexOf("--")===0,a=d3(r,t[r],i);r==="float"&&(r="cssFloat"),i?e.setProperty(r,a):e[r]=a}}var qD=Ji({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function xb(e,t){if(t){if(qD[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(or(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(or(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(or(61))}if(t.style!=null&&typeof t.style!="object")throw Error(or(62))}}function bb(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Bb=null;function NB(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Cb=null,wp=null,xp=null;function fE(e){if(e=B0(e)){if(typeof Cb!="function")throw Error(or(280));var t=e.stateNode;t&&(t=K1(t),Cb(e.stateNode,e.type,t))}}function p3(e){wp?xp?xp.push(e):xp=[e]:wp=e}function m3(){if(wp){var e=wp,t=xp;if(xp=wp=null,fE(e),t)for(e=0;e<t.length;e++)fE(t[e])}}function g3(e,t){return e(t)}function y3(){}var Rw=!1;function v3(e,t,r){if(Rw)return e(t,r);Rw=!0;try{return g3(e,t,r)}finally{Rw=!1,(wp!==null||xp!==null)&&(y3(),m3())}}function Dg(e,t){var r=e.stateNode;if(r===null)return null;var i=K1(r);if(i===null)return null;r=i[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(e=e.type,i=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!i;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(or(231,t,typeof r));return r}var Sb=!1;if(Lu)try{var Qm={};Object.defineProperty(Qm,"passive",{get:function(){Sb=!0}}),window.addEventListener("test",Qm,Qm),window.removeEventListener("test",Qm,Qm)}catch{Sb=!1}function ZD(e,t,r,i,a,u,h,o,g){var y=Array.prototype.slice.call(arguments,3);try{t.apply(r,y)}catch(C){this.onError(C)}}var mg=!1,Qv=null,Ov=!1,Eb=null,WD={onError:function(e){mg=!0,Qv=e}};function XD(e,t,r,i,a,u,h,o,g){mg=!1,Qv=null,ZD.apply(WD,arguments)}function YD(e,t,r,i,a,u,h,o,g){if(XD.apply(this,arguments),mg){if(mg){var y=Qv;mg=!1,Qv=null}else throw Error(or(198));Ov||(Ov=!0,Eb=y)}}function pf(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function _3(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function pE(e){if(pf(e)!==e)throw Error(or(188))}function JD(e){var t=e.alternate;if(!t){if(t=pf(e),t===null)throw Error(or(188));return t!==e?null:e}for(var r=e,i=t;;){var a=r.return;if(a===null)break;var u=a.alternate;if(u===null){if(i=a.return,i!==null){r=i;continue}break}if(a.child===u.child){for(u=a.child;u;){if(u===r)return pE(a),e;if(u===i)return pE(a),t;u=u.sibling}throw Error(or(188))}if(r.return!==i.return)r=a,i=u;else{for(var h=!1,o=a.child;o;){if(o===r){h=!0,r=a,i=u;break}if(o===i){h=!0,i=a,r=u;break}o=o.sibling}if(!h){for(o=u.child;o;){if(o===r){h=!0,r=u,i=a;break}if(o===i){h=!0,i=u,r=a;break}o=o.sibling}if(!h)throw Error(or(189))}}if(r.alternate!==i)throw Error(or(190))}if(r.tag!==3)throw Error(or(188));return r.stateNode.current===r?e:t}function w3(e){return e=JD(e),e!==null?x3(e):null}function x3(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=x3(e);if(t!==null)return t;e=e.sibling}return null}var b3=Il.unstable_scheduleCallback,mE=Il.unstable_cancelCallback,eQ=Il.unstable_shouldYield,tQ=Il.unstable_requestPaint,_s=Il.unstable_now,rQ=Il.unstable_getCurrentPriorityLevel,DB=Il.unstable_ImmediatePriority,B3=Il.unstable_UserBlockingPriority,zv=Il.unstable_NormalPriority,nQ=Il.unstable_LowPriority,C3=Il.unstable_IdlePriority,z1=null,Mc=null;function iQ(e){if(Mc&&typeof Mc.onCommitFiberRoot=="function")try{Mc.onCommitFiberRoot(z1,e,void 0,(e.current.flags&128)===128)}catch{}}var jA=Math.clz32?Math.clz32:aQ,sQ=Math.log,oQ=Math.LN2;function aQ(e){return e>>>=0,e===0?32:31-(sQ(e)/oQ|0)|0}var ay=64,ly=4194304;function ng(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Hv(e,t){var r=e.pendingLanes;if(r===0)return 0;var i=0,a=e.suspendedLanes,u=e.pingedLanes,h=r&268435455;if(h!==0){var o=h&~a;o!==0?i=ng(o):(u&=h,u!==0&&(i=ng(u)))}else h=r&~a,h!==0?i=ng(h):u!==0&&(i=ng(u));if(i===0)return 0;if(t!==0&&t!==i&&!(t&a)&&(a=i&-i,u=t&-t,a>=u||a===16&&(u&4194240)!==0))return t;if(i&4&&(i|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=i;0<t;)r=31-jA(t),a=1<<r,i|=e[r],t&=~a;return i}function lQ(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function AQ(e,t){for(var r=e.suspendedLanes,i=e.pingedLanes,a=e.expirationTimes,u=e.pendingLanes;0<u;){var h=31-jA(u),o=1<<h,g=a[h];g===-1?(!(o&r)||o&i)&&(a[h]=lQ(o,t)):g<=t&&(e.expiredLanes|=o),u&=~o}}function Ib(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function S3(){var e=ay;return ay<<=1,!(ay&4194240)&&(ay=64),e}function Nw(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function x0(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-jA(t),e[t]=r}function cQ(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var i=e.eventTimes;for(e=e.expirationTimes;0<r;){var a=31-jA(r),u=1<<a;t[a]=0,i[a]=-1,e[a]=-1,r&=~u}}function QB(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var i=31-jA(r),a=1<<i;a&t|e[i]&t&&(e[i]|=t),r&=~a}}var ti=0;function E3(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var I3,OB,F3,T3,P3,Fb=!1,Ay=[],Dh=null,Qh=null,Oh=null,Qg=new Map,Og=new Map,xh=[],uQ="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function gE(e,t){switch(e){case"focusin":case"focusout":Dh=null;break;case"dragenter":case"dragleave":Qh=null;break;case"mouseover":case"mouseout":Oh=null;break;case"pointerover":case"pointerout":Qg.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Og.delete(t.pointerId)}}function Om(e,t,r,i,a,u){return e===null||e.nativeEvent!==u?(e={blockedOn:t,domEventName:r,eventSystemFlags:i,nativeEvent:u,targetContainers:[a]},t!==null&&(t=B0(t),t!==null&&OB(t)),e):(e.eventSystemFlags|=i,t=e.targetContainers,a!==null&&t.indexOf(a)===-1&&t.push(a),e)}function hQ(e,t,r,i,a){switch(t){case"focusin":return Dh=Om(Dh,e,t,r,i,a),!0;case"dragenter":return Qh=Om(Qh,e,t,r,i,a),!0;case"mouseover":return Oh=Om(Oh,e,t,r,i,a),!0;case"pointerover":var u=a.pointerId;return Qg.set(u,Om(Qg.get(u)||null,e,t,r,i,a)),!0;case"gotpointercapture":return u=a.pointerId,Og.set(u,Om(Og.get(u)||null,e,t,r,i,a)),!0}return!1}function L3(e){var t=Rd(e.target);if(t!==null){var r=pf(t);if(r!==null){if(t=r.tag,t===13){if(t=_3(r),t!==null){e.blockedOn=t,P3(e.priority,function(){F3(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function hv(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=Tb(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var i=new r.constructor(r.type,r);Bb=i,r.target.dispatchEvent(i),Bb=null}else return t=B0(r),t!==null&&OB(t),e.blockedOn=r,!1;t.shift()}return!0}function yE(e,t,r){hv(e)&&r.delete(t)}function dQ(){Fb=!1,Dh!==null&&hv(Dh)&&(Dh=null),Qh!==null&&hv(Qh)&&(Qh=null),Oh!==null&&hv(Oh)&&(Oh=null),Qg.forEach(yE),Og.forEach(yE)}function zm(e,t){e.blockedOn===t&&(e.blockedOn=null,Fb||(Fb=!0,Il.unstable_scheduleCallback(Il.unstable_NormalPriority,dQ)))}function zg(e){function t(a){return zm(a,e)}if(0<Ay.length){zm(Ay[0],e);for(var r=1;r<Ay.length;r++){var i=Ay[r];i.blockedOn===e&&(i.blockedOn=null)}}for(Dh!==null&&zm(Dh,e),Qh!==null&&zm(Qh,e),Oh!==null&&zm(Oh,e),Qg.forEach(t),Og.forEach(t),r=0;r<xh.length;r++)i=xh[r],i.blockedOn===e&&(i.blockedOn=null);for(;0<xh.length&&(r=xh[0],r.blockedOn===null);)L3(r),r.blockedOn===null&&xh.shift()}var bp=Qu.ReactCurrentBatchConfig,jv=!0;function fQ(e,t,r,i){var a=ti,u=bp.transition;bp.transition=null;try{ti=1,zB(e,t,r,i)}finally{ti=a,bp.transition=u}}function pQ(e,t,r,i){var a=ti,u=bp.transition;bp.transition=null;try{ti=4,zB(e,t,r,i)}finally{ti=a,bp.transition=u}}function zB(e,t,r,i){if(jv){var a=Tb(e,t,r,i);if(a===null)$w(e,t,i,Vv,r),gE(e,i);else if(hQ(a,e,t,r,i))i.stopPropagation();else if(gE(e,i),t&4&&-1<uQ.indexOf(e)){for(;a!==null;){var u=B0(a);if(u!==null&&I3(u),u=Tb(e,t,r,i),u===null&&$w(e,t,i,Vv,r),u===a)break;a=u}a!==null&&i.stopPropagation()}else $w(e,t,i,null,r)}}var Vv=null;function Tb(e,t,r,i){if(Vv=null,e=NB(i),e=Rd(e),e!==null)if(t=pf(e),t===null)e=null;else if(r=t.tag,r===13){if(e=_3(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Vv=e,null}function M3(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(rQ()){case DB:return 1;case B3:return 4;case zv:case nQ:return 16;case C3:return 536870912;default:return 16}default:return 16}}var Th=null,HB=null,dv=null;function k3(){if(dv)return dv;var e,t=HB,r=t.length,i,a="value"in Th?Th.value:Th.textContent,u=a.length;for(e=0;e<r&&t[e]===a[e];e++);var h=r-e;for(i=1;i<=h&&t[r-i]===a[u-i];i++);return dv=a.slice(e,1<i?1-i:void 0)}function fv(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function cy(){return!0}function vE(){return!1}function Tl(e){function t(r,i,a,u,h){this._reactName=r,this._targetInst=a,this.type=i,this.nativeEvent=u,this.target=h,this.currentTarget=null;for(var o in e)e.hasOwnProperty(o)&&(r=e[o],this[o]=r?r(u):u[o]);return this.isDefaultPrevented=(u.defaultPrevented!=null?u.defaultPrevented:u.returnValue===!1)?cy:vE,this.isPropagationStopped=vE,this}return Ji(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=cy)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=cy)},persist:function(){},isPersistent:cy}),t}var am={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},jB=Tl(am),b0=Ji({},am,{view:0,detail:0}),mQ=Tl(b0),Dw,Qw,Hm,H1=Ji({},b0,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:VB,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Hm&&(Hm&&e.type==="mousemove"?(Dw=e.screenX-Hm.screenX,Qw=e.screenY-Hm.screenY):Qw=Dw=0,Hm=e),Dw)},movementY:function(e){return"movementY"in e?e.movementY:Qw}}),_E=Tl(H1),gQ=Ji({},H1,{dataTransfer:0}),yQ=Tl(gQ),vQ=Ji({},b0,{relatedTarget:0}),Ow=Tl(vQ),_Q=Ji({},am,{animationName:0,elapsedTime:0,pseudoElement:0}),wQ=Tl(_Q),xQ=Ji({},am,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),bQ=Tl(xQ),BQ=Ji({},am,{data:0}),wE=Tl(BQ),CQ={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},SQ={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},EQ={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function IQ(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=EQ[e])?!!t[e]:!1}function VB(){return IQ}var FQ=Ji({},b0,{key:function(e){if(e.key){var t=CQ[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=fv(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?SQ[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:VB,charCode:function(e){return e.type==="keypress"?fv(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?fv(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),TQ=Tl(FQ),PQ=Ji({},H1,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),xE=Tl(PQ),LQ=Ji({},b0,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:VB}),MQ=Tl(LQ),kQ=Ji({},am,{propertyName:0,elapsedTime:0,pseudoElement:0}),UQ=Tl(kQ),RQ=Ji({},H1,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),NQ=Tl(RQ),DQ=[9,13,27,32],KB=Lu&&"CompositionEvent"in window,gg=null;Lu&&"documentMode"in document&&(gg=document.documentMode);var QQ=Lu&&"TextEvent"in window&&!gg,U3=Lu&&(!KB||gg&&8<gg&&11>=gg),bE=" ",BE=!1;function R3(e,t){switch(e){case"keyup":return DQ.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function N3(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var ap=!1;function OQ(e,t){switch(e){case"compositionend":return N3(t);case"keypress":return t.which!==32?null:(BE=!0,bE);case"textInput":return e=t.data,e===bE&&BE?null:e;default:return null}}function zQ(e,t){if(ap)return e==="compositionend"||!KB&&R3(e,t)?(e=k3(),dv=HB=Th=null,ap=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return U3&&t.locale!=="ko"?null:t.data;default:return null}}var HQ={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function CE(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!HQ[e.type]:t==="textarea"}function D3(e,t,r,i){p3(i),t=Kv(t,"onChange"),0<t.length&&(r=new jB("onChange","change",null,r,i),e.push({event:r,listeners:t}))}var yg=null,Hg=null;function jQ(e){Z3(e,0)}function j1(e){var t=cp(e);if(l3(t))return e}function VQ(e,t){if(e==="change")return t}var Q3=!1;if(Lu){var zw;if(Lu){var Hw="oninput"in document;if(!Hw){var SE=document.createElement("div");SE.setAttribute("oninput","return;"),Hw=typeof SE.oninput=="function"}zw=Hw}else zw=!1;Q3=zw&&(!document.documentMode||9<document.documentMode)}function EE(){yg&&(yg.detachEvent("onpropertychange",O3),Hg=yg=null)}function O3(e){if(e.propertyName==="value"&&j1(Hg)){var t=[];D3(t,Hg,e,NB(e)),v3(jQ,t)}}function KQ(e,t,r){e==="focusin"?(EE(),yg=t,Hg=r,yg.attachEvent("onpropertychange",O3)):e==="focusout"&&EE()}function GQ(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return j1(Hg)}function $Q(e,t){if(e==="click")return j1(t)}function qQ(e,t){if(e==="input"||e==="change")return j1(t)}function ZQ(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var KA=typeof Object.is=="function"?Object.is:ZQ;function jg(e,t){if(KA(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),i=Object.keys(t);if(r.length!==i.length)return!1;for(i=0;i<r.length;i++){var a=r[i];if(!hb.call(t,a)||!KA(e[a],t[a]))return!1}return!0}function IE(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function FE(e,t){var r=IE(e);e=0;for(var i;r;){if(r.nodeType===3){if(i=e+r.textContent.length,e<=t&&i>=t)return{node:r,offset:t-e};e=i}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=IE(r)}}function z3(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?z3(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function H3(){for(var e=window,t=Dv();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=Dv(e.document)}return t}function GB(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function WQ(e){var t=H3(),r=e.focusedElem,i=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&z3(r.ownerDocument.documentElement,r)){if(i!==null&&GB(r)){if(t=i.start,e=i.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var a=r.textContent.length,u=Math.min(i.start,a);i=i.end===void 0?u:Math.min(i.end,a),!e.extend&&u>i&&(a=i,i=u,u=a),a=FE(r,u);var h=FE(r,i);a&&h&&(e.rangeCount!==1||e.anchorNode!==a.node||e.anchorOffset!==a.offset||e.focusNode!==h.node||e.focusOffset!==h.offset)&&(t=t.createRange(),t.setStart(a.node,a.offset),e.removeAllRanges(),u>i?(e.addRange(t),e.extend(h.node,h.offset)):(t.setEnd(h.node,h.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var XQ=Lu&&"documentMode"in document&&11>=document.documentMode,lp=null,Pb=null,vg=null,Lb=!1;function TE(e,t,r){var i=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;Lb||lp==null||lp!==Dv(i)||(i=lp,"selectionStart"in i&&GB(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),vg&&jg(vg,i)||(vg=i,i=Kv(Pb,"onSelect"),0<i.length&&(t=new jB("onSelect","select",null,t,r),e.push({event:t,listeners:i}),t.target=lp)))}function uy(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var Ap={animationend:uy("Animation","AnimationEnd"),animationiteration:uy("Animation","AnimationIteration"),animationstart:uy("Animation","AnimationStart"),transitionend:uy("Transition","TransitionEnd")},jw={},j3={};Lu&&(j3=document.createElement("div").style,"AnimationEvent"in window||(delete Ap.animationend.animation,delete Ap.animationiteration.animation,delete Ap.animationstart.animation),"TransitionEvent"in window||delete Ap.transitionend.transition);function V1(e){if(jw[e])return jw[e];if(!Ap[e])return e;var t=Ap[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in j3)return jw[e]=t[r];return e}var V3=V1("animationend"),K3=V1("animationiteration"),G3=V1("animationstart"),$3=V1("transitionend"),q3=new Map,PE="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ad(e,t){q3.set(e,t),ff(t,[e])}for(var Vw=0;Vw<PE.length;Vw++){var Kw=PE[Vw],YQ=Kw.toLowerCase(),JQ=Kw[0].toUpperCase()+Kw.slice(1);ad(YQ,"on"+JQ)}ad(V3,"onAnimationEnd");ad(K3,"onAnimationIteration");ad(G3,"onAnimationStart");ad("dblclick","onDoubleClick");ad("focusin","onFocus");ad("focusout","onBlur");ad($3,"onTransitionEnd");Gp("onMouseEnter",["mouseout","mouseover"]);Gp("onMouseLeave",["mouseout","mouseover"]);Gp("onPointerEnter",["pointerout","pointerover"]);Gp("onPointerLeave",["pointerout","pointerover"]);ff("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));ff("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));ff("onBeforeInput",["compositionend","keypress","textInput","paste"]);ff("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));ff("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));ff("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ig="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),e8=new Set("cancel close invalid load scroll toggle".split(" ").concat(ig));function LE(e,t,r){var i=e.type||"unknown-event";e.currentTarget=r,YD(i,t,void 0,e),e.currentTarget=null}function Z3(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var i=e[r],a=i.event;i=i.listeners;e:{var u=void 0;if(t)for(var h=i.length-1;0<=h;h--){var o=i[h],g=o.instance,y=o.currentTarget;if(o=o.listener,g!==u&&a.isPropagationStopped())break e;LE(a,o,y),u=g}else for(h=0;h<i.length;h++){if(o=i[h],g=o.instance,y=o.currentTarget,o=o.listener,g!==u&&a.isPropagationStopped())break e;LE(a,o,y),u=g}}}if(Ov)throw e=Eb,Ov=!1,Eb=null,e}function Li(e,t){var r=t[Nb];r===void 0&&(r=t[Nb]=new Set);var i=e+"__bubble";r.has(i)||(W3(t,e,2,!1),r.add(i))}function Gw(e,t,r){var i=0;t&&(i|=4),W3(r,e,i,t)}var hy="_reactListening"+Math.random().toString(36).slice(2);function Vg(e){if(!e[hy]){e[hy]=!0,n3.forEach(function(r){r!=="selectionchange"&&(e8.has(r)||Gw(r,!1,e),Gw(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[hy]||(t[hy]=!0,Gw("selectionchange",!1,t))}}function W3(e,t,r,i){switch(M3(t)){case 1:var a=fQ;break;case 4:a=pQ;break;default:a=zB}r=a.bind(null,t,r,e),a=void 0,!Sb||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(a=!0),i?a!==void 0?e.addEventListener(t,r,{capture:!0,passive:a}):e.addEventListener(t,r,!0):a!==void 0?e.addEventListener(t,r,{passive:a}):e.addEventListener(t,r,!1)}function $w(e,t,r,i,a){var u=i;if(!(t&1)&&!(t&2)&&i!==null)e:for(;;){if(i===null)return;var h=i.tag;if(h===3||h===4){var o=i.stateNode.containerInfo;if(o===a||o.nodeType===8&&o.parentNode===a)break;if(h===4)for(h=i.return;h!==null;){var g=h.tag;if((g===3||g===4)&&(g=h.stateNode.containerInfo,g===a||g.nodeType===8&&g.parentNode===a))return;h=h.return}for(;o!==null;){if(h=Rd(o),h===null)return;if(g=h.tag,g===5||g===6){i=u=h;continue e}o=o.parentNode}}i=i.return}v3(function(){var y=u,C=NB(r),I=[];e:{var F=q3.get(e);if(F!==void 0){var b=jB,N=e;switch(e){case"keypress":if(fv(r)===0)break e;case"keydown":case"keyup":b=TQ;break;case"focusin":N="focus",b=Ow;break;case"focusout":N="blur",b=Ow;break;case"beforeblur":case"afterblur":b=Ow;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":b=_E;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":b=yQ;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":b=MQ;break;case V3:case K3:case G3:b=wQ;break;case $3:b=UQ;break;case"scroll":b=mQ;break;case"wheel":b=NQ;break;case"copy":case"cut":case"paste":b=bQ;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":b=xE}var U=(t&4)!==0,H=!U&&e==="scroll",k=U?F!==null?F+"Capture":null:F;U=[];for(var R=y,V;R!==null;){V=R;var W=V.stateNode;if(V.tag===5&&W!==null&&(V=W,k!==null&&(W=Dg(R,k),W!=null&&U.push(Kg(R,W,V)))),H)break;R=R.return}0<U.length&&(F=new b(F,N,null,r,C),I.push({event:F,listeners:U}))}}if(!(t&7)){e:{if(F=e==="mouseover"||e==="pointerover",b=e==="mouseout"||e==="pointerout",F&&r!==Bb&&(N=r.relatedTarget||r.fromElement)&&(Rd(N)||N[Mu]))break e;if((b||F)&&(F=C.window===C?C:(F=C.ownerDocument)?F.defaultView||F.parentWindow:window,b?(N=r.relatedTarget||r.toElement,b=y,N=N?Rd(N):null,N!==null&&(H=pf(N),N!==H||N.tag!==5&&N.tag!==6)&&(N=null)):(b=null,N=y),b!==N)){if(U=_E,W="onMouseLeave",k="onMouseEnter",R="mouse",(e==="pointerout"||e==="pointerover")&&(U=xE,W="onPointerLeave",k="onPointerEnter",R="pointer"),H=b==null?F:cp(b),V=N==null?F:cp(N),F=new U(W,R+"leave",b,r,C),F.target=H,F.relatedTarget=V,W=null,Rd(C)===y&&(U=new U(k,R+"enter",N,r,C),U.target=V,U.relatedTarget=H,W=U),H=W,b&&N)t:{for(U=b,k=N,R=0,V=U;V;V=Of(V))R++;for(V=0,W=k;W;W=Of(W))V++;for(;0<R-V;)U=Of(U),R--;for(;0<V-R;)k=Of(k),V--;for(;R--;){if(U===k||k!==null&&U===k.alternate)break t;U=Of(U),k=Of(k)}U=null}else U=null;b!==null&&ME(I,F,b,U,!1),N!==null&&H!==null&&ME(I,H,N,U,!0)}}e:{if(F=y?cp(y):window,b=F.nodeName&&F.nodeName.toLowerCase(),b==="select"||b==="input"&&F.type==="file")var se=VQ;else if(CE(F))if(Q3)se=qQ;else{se=GQ;var fe=KQ}else(b=F.nodeName)&&b.toLowerCase()==="input"&&(F.type==="checkbox"||F.type==="radio")&&(se=$Q);if(se&&(se=se(e,y))){D3(I,se,r,C);break e}fe&&fe(e,F,y),e==="focusout"&&(fe=F._wrapperState)&&fe.controlled&&F.type==="number"&&vb(F,"number",F.value)}switch(fe=y?cp(y):window,e){case"focusin":(CE(fe)||fe.contentEditable==="true")&&(lp=fe,Pb=y,vg=null);break;case"focusout":vg=Pb=lp=null;break;case"mousedown":Lb=!0;break;case"contextmenu":case"mouseup":case"dragend":Lb=!1,TE(I,r,C);break;case"selectionchange":if(XQ)break;case"keydown":case"keyup":TE(I,r,C)}var ue;if(KB)e:{switch(e){case"compositionstart":var ae="onCompositionStart";break e;case"compositionend":ae="onCompositionEnd";break e;case"compositionupdate":ae="onCompositionUpdate";break e}ae=void 0}else ap?R3(e,r)&&(ae="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(ae="onCompositionStart");ae&&(U3&&r.locale!=="ko"&&(ap||ae!=="onCompositionStart"?ae==="onCompositionEnd"&&ap&&(ue=k3()):(Th=C,HB="value"in Th?Th.value:Th.textContent,ap=!0)),fe=Kv(y,ae),0<fe.length&&(ae=new wE(ae,e,null,r,C),I.push({event:ae,listeners:fe}),ue?ae.data=ue:(ue=N3(r),ue!==null&&(ae.data=ue)))),(ue=QQ?OQ(e,r):zQ(e,r))&&(y=Kv(y,"onBeforeInput"),0<y.length&&(C=new wE("onBeforeInput","beforeinput",null,r,C),I.push({event:C,listeners:y}),C.data=ue))}Z3(I,t)})}function Kg(e,t,r){return{instance:e,listener:t,currentTarget:r}}function Kv(e,t){for(var r=t+"Capture",i=[];e!==null;){var a=e,u=a.stateNode;a.tag===5&&u!==null&&(a=u,u=Dg(e,r),u!=null&&i.unshift(Kg(e,u,a)),u=Dg(e,t),u!=null&&i.push(Kg(e,u,a))),e=e.return}return i}function Of(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function ME(e,t,r,i,a){for(var u=t._reactName,h=[];r!==null&&r!==i;){var o=r,g=o.alternate,y=o.stateNode;if(g!==null&&g===i)break;o.tag===5&&y!==null&&(o=y,a?(g=Dg(r,u),g!=null&&h.unshift(Kg(r,g,o))):a||(g=Dg(r,u),g!=null&&h.push(Kg(r,g,o)))),r=r.return}h.length!==0&&e.push({event:t,listeners:h})}var t8=/\r\n?/g,r8=/\u0000|\uFFFD/g;function kE(e){return(typeof e=="string"?e:""+e).replace(t8,`
`).replace(r8,"")}function dy(e,t,r){if(t=kE(t),kE(e)!==t&&r)throw Error(or(425))}function Gv(){}var Mb=null,kb=null;function Ub(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Rb=typeof setTimeout=="function"?setTimeout:void 0,n8=typeof clearTimeout=="function"?clearTimeout:void 0,UE=typeof Promise=="function"?Promise:void 0,i8=typeof queueMicrotask=="function"?queueMicrotask:typeof UE<"u"?function(e){return UE.resolve(null).then(e).catch(s8)}:Rb;function s8(e){setTimeout(function(){throw e})}function qw(e,t){var r=t,i=0;do{var a=r.nextSibling;if(e.removeChild(r),a&&a.nodeType===8)if(r=a.data,r==="/$"){if(i===0){e.removeChild(a),zg(t);return}i--}else r!=="$"&&r!=="$?"&&r!=="$!"||i++;r=a}while(r);zg(t)}function zh(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function RE(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var lm=Math.random().toString(36).slice(2),Ic="__reactFiber$"+lm,Gg="__reactProps$"+lm,Mu="__reactContainer$"+lm,Nb="__reactEvents$"+lm,o8="__reactListeners$"+lm,a8="__reactHandles$"+lm;function Rd(e){var t=e[Ic];if(t)return t;for(var r=e.parentNode;r;){if(t=r[Mu]||r[Ic]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=RE(e);e!==null;){if(r=e[Ic])return r;e=RE(e)}return t}e=r,r=e.parentNode}return null}function B0(e){return e=e[Ic]||e[Mu],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function cp(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(or(33))}function K1(e){return e[Gg]||null}var Db=[],up=-1;function ld(e){return{current:e}}function ki(e){0>up||(e.current=Db[up],Db[up]=null,up--)}function Si(e,t){up++,Db[up]=e.current,e.current=t}var td={},na=ld(td),qa=ld(!1),rf=td;function $p(e,t){var r=e.type.contextTypes;if(!r)return td;var i=e.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===t)return i.__reactInternalMemoizedMaskedChildContext;var a={},u;for(u in r)a[u]=t[u];return i&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function Za(e){return e=e.childContextTypes,e!=null}function $v(){ki(qa),ki(na)}function NE(e,t,r){if(na.current!==td)throw Error(or(168));Si(na,t),Si(qa,r)}function X3(e,t,r){var i=e.stateNode;if(t=t.childContextTypes,typeof i.getChildContext!="function")return r;i=i.getChildContext();for(var a in i)if(!(a in t))throw Error(or(108,KD(e)||"Unknown",a));return Ji({},r,i)}function qv(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||td,rf=na.current,Si(na,e),Si(qa,qa.current),!0}function DE(e,t,r){var i=e.stateNode;if(!i)throw Error(or(169));r?(e=X3(e,t,rf),i.__reactInternalMemoizedMergedChildContext=e,ki(qa),ki(na),Si(na,e)):ki(qa),Si(qa,r)}var Bu=null,G1=!1,Zw=!1;function Y3(e){Bu===null?Bu=[e]:Bu.push(e)}function l8(e){G1=!0,Y3(e)}function Ad(){if(!Zw&&Bu!==null){Zw=!0;var e=0,t=ti;try{var r=Bu;for(ti=1;e<r.length;e++){var i=r[e];do i=i(!0);while(i!==null)}Bu=null,G1=!1}catch(a){throw Bu!==null&&(Bu=Bu.slice(e+1)),b3(DB,Ad),a}finally{ti=t,Zw=!1}}return null}var hp=[],dp=0,Zv=null,Wv=0,Gl=[],$l=0,nf=null,Iu=1,Fu="";function Pd(e,t){hp[dp++]=Wv,hp[dp++]=Zv,Zv=e,Wv=t}function J3(e,t,r){Gl[$l++]=Iu,Gl[$l++]=Fu,Gl[$l++]=nf,nf=e;var i=Iu;e=Fu;var a=32-jA(i)-1;i&=~(1<<a),r+=1;var u=32-jA(t)+a;if(30<u){var h=a-a%5;u=(i&(1<<h)-1).toString(32),i>>=h,a-=h,Iu=1<<32-jA(t)+a|r<<a|i,Fu=u+e}else Iu=1<<u|r<<a|i,Fu=e}function $B(e){e.return!==null&&(Pd(e,1),J3(e,1,0))}function qB(e){for(;e===Zv;)Zv=hp[--dp],hp[dp]=null,Wv=hp[--dp],hp[dp]=null;for(;e===nf;)nf=Gl[--$l],Gl[$l]=null,Fu=Gl[--$l],Gl[$l]=null,Iu=Gl[--$l],Gl[$l]=null}var Sl=null,bl=null,Oi=!1,zA=null;function eP(e,t){var r=Wl(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function QE(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Sl=e,bl=zh(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Sl=e,bl=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=nf!==null?{id:Iu,overflow:Fu}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=Wl(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,Sl=e,bl=null,!0):!1;default:return!1}}function Qb(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Ob(e){if(Oi){var t=bl;if(t){var r=t;if(!QE(e,t)){if(Qb(e))throw Error(or(418));t=zh(r.nextSibling);var i=Sl;t&&QE(e,t)?eP(i,r):(e.flags=e.flags&-4097|2,Oi=!1,Sl=e)}}else{if(Qb(e))throw Error(or(418));e.flags=e.flags&-4097|2,Oi=!1,Sl=e}}}function OE(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Sl=e}function fy(e){if(e!==Sl)return!1;if(!Oi)return OE(e),Oi=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Ub(e.type,e.memoizedProps)),t&&(t=bl)){if(Qb(e))throw tP(),Error(or(418));for(;t;)eP(e,t),t=zh(t.nextSibling)}if(OE(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(or(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){bl=zh(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}bl=null}}else bl=Sl?zh(e.stateNode.nextSibling):null;return!0}function tP(){for(var e=bl;e;)e=zh(e.nextSibling)}function qp(){bl=Sl=null,Oi=!1}function ZB(e){zA===null?zA=[e]:zA.push(e)}var A8=Qu.ReactCurrentBatchConfig;function jm(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(or(309));var i=r.stateNode}if(!i)throw Error(or(147,e));var a=i,u=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===u?t.ref:(t=function(h){var o=a.refs;h===null?delete o[u]:o[u]=h},t._stringRef=u,t)}if(typeof e!="string")throw Error(or(284));if(!r._owner)throw Error(or(290,e))}return e}function py(e,t){throw e=Object.prototype.toString.call(t),Error(or(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function zE(e){var t=e._init;return t(e._payload)}function rP(e){function t(k,R){if(e){var V=k.deletions;V===null?(k.deletions=[R],k.flags|=16):V.push(R)}}function r(k,R){if(!e)return null;for(;R!==null;)t(k,R),R=R.sibling;return null}function i(k,R){for(k=new Map;R!==null;)R.key!==null?k.set(R.key,R):k.set(R.index,R),R=R.sibling;return k}function a(k,R){return k=Kh(k,R),k.index=0,k.sibling=null,k}function u(k,R,V){return k.index=V,e?(V=k.alternate,V!==null?(V=V.index,V<R?(k.flags|=2,R):V):(k.flags|=2,R)):(k.flags|=1048576,R)}function h(k){return e&&k.alternate===null&&(k.flags|=2),k}function o(k,R,V,W){return R===null||R.tag!==6?(R=rx(V,k.mode,W),R.return=k,R):(R=a(R,V),R.return=k,R)}function g(k,R,V,W){var se=V.type;return se===op?C(k,R,V.props.children,W,V.key):R!==null&&(R.elementType===se||typeof se=="object"&&se!==null&&se.$$typeof===vh&&zE(se)===R.type)?(W=a(R,V.props),W.ref=jm(k,R,V),W.return=k,W):(W=wv(V.type,V.key,V.props,null,k.mode,W),W.ref=jm(k,R,V),W.return=k,W)}function y(k,R,V,W){return R===null||R.tag!==4||R.stateNode.containerInfo!==V.containerInfo||R.stateNode.implementation!==V.implementation?(R=nx(V,k.mode,W),R.return=k,R):(R=a(R,V.children||[]),R.return=k,R)}function C(k,R,V,W,se){return R===null||R.tag!==7?(R=Xd(V,k.mode,W,se),R.return=k,R):(R=a(R,V),R.return=k,R)}function I(k,R,V){if(typeof R=="string"&&R!==""||typeof R=="number")return R=rx(""+R,k.mode,V),R.return=k,R;if(typeof R=="object"&&R!==null){switch(R.$$typeof){case iy:return V=wv(R.type,R.key,R.props,null,k.mode,V),V.ref=jm(k,null,R),V.return=k,V;case sp:return R=nx(R,k.mode,V),R.return=k,R;case vh:var W=R._init;return I(k,W(R._payload),V)}if(rg(R)||Dm(R))return R=Xd(R,k.mode,V,null),R.return=k,R;py(k,R)}return null}function F(k,R,V,W){var se=R!==null?R.key:null;if(typeof V=="string"&&V!==""||typeof V=="number")return se!==null?null:o(k,R,""+V,W);if(typeof V=="object"&&V!==null){switch(V.$$typeof){case iy:return V.key===se?g(k,R,V,W):null;case sp:return V.key===se?y(k,R,V,W):null;case vh:return se=V._init,F(k,R,se(V._payload),W)}if(rg(V)||Dm(V))return se!==null?null:C(k,R,V,W,null);py(k,V)}return null}function b(k,R,V,W,se){if(typeof W=="string"&&W!==""||typeof W=="number")return k=k.get(V)||null,o(R,k,""+W,se);if(typeof W=="object"&&W!==null){switch(W.$$typeof){case iy:return k=k.get(W.key===null?V:W.key)||null,g(R,k,W,se);case sp:return k=k.get(W.key===null?V:W.key)||null,y(R,k,W,se);case vh:var fe=W._init;return b(k,R,V,fe(W._payload),se)}if(rg(W)||Dm(W))return k=k.get(V)||null,C(R,k,W,se,null);py(R,W)}return null}function N(k,R,V,W){for(var se=null,fe=null,ue=R,ae=R=0,Be=null;ue!==null&&ae<V.length;ae++){ue.index>ae?(Be=ue,ue=null):Be=ue.sibling;var Ue=F(k,ue,V[ae],W);if(Ue===null){ue===null&&(ue=Be);break}e&&ue&&Ue.alternate===null&&t(k,ue),R=u(Ue,R,ae),fe===null?se=Ue:fe.sibling=Ue,fe=Ue,ue=Be}if(ae===V.length)return r(k,ue),Oi&&Pd(k,ae),se;if(ue===null){for(;ae<V.length;ae++)ue=I(k,V[ae],W),ue!==null&&(R=u(ue,R,ae),fe===null?se=ue:fe.sibling=ue,fe=ue);return Oi&&Pd(k,ae),se}for(ue=i(k,ue);ae<V.length;ae++)Be=b(ue,k,ae,V[ae],W),Be!==null&&(e&&Be.alternate!==null&&ue.delete(Be.key===null?ae:Be.key),R=u(Be,R,ae),fe===null?se=Be:fe.sibling=Be,fe=Be);return e&&ue.forEach(function(te){return t(k,te)}),Oi&&Pd(k,ae),se}function U(k,R,V,W){var se=Dm(V);if(typeof se!="function")throw Error(or(150));if(V=se.call(V),V==null)throw Error(or(151));for(var fe=se=null,ue=R,ae=R=0,Be=null,Ue=V.next();ue!==null&&!Ue.done;ae++,Ue=V.next()){ue.index>ae?(Be=ue,ue=null):Be=ue.sibling;var te=F(k,ue,Ue.value,W);if(te===null){ue===null&&(ue=Be);break}e&&ue&&te.alternate===null&&t(k,ue),R=u(te,R,ae),fe===null?se=te:fe.sibling=te,fe=te,ue=Be}if(Ue.done)return r(k,ue),Oi&&Pd(k,ae),se;if(ue===null){for(;!Ue.done;ae++,Ue=V.next())Ue=I(k,Ue.value,W),Ue!==null&&(R=u(Ue,R,ae),fe===null?se=Ue:fe.sibling=Ue,fe=Ue);return Oi&&Pd(k,ae),se}for(ue=i(k,ue);!Ue.done;ae++,Ue=V.next())Ue=b(ue,k,ae,Ue.value,W),Ue!==null&&(e&&Ue.alternate!==null&&ue.delete(Ue.key===null?ae:Ue.key),R=u(Ue,R,ae),fe===null?se=Ue:fe.sibling=Ue,fe=Ue);return e&&ue.forEach(function(de){return t(k,de)}),Oi&&Pd(k,ae),se}function H(k,R,V,W){if(typeof V=="object"&&V!==null&&V.type===op&&V.key===null&&(V=V.props.children),typeof V=="object"&&V!==null){switch(V.$$typeof){case iy:e:{for(var se=V.key,fe=R;fe!==null;){if(fe.key===se){if(se=V.type,se===op){if(fe.tag===7){r(k,fe.sibling),R=a(fe,V.props.children),R.return=k,k=R;break e}}else if(fe.elementType===se||typeof se=="object"&&se!==null&&se.$$typeof===vh&&zE(se)===fe.type){r(k,fe.sibling),R=a(fe,V.props),R.ref=jm(k,fe,V),R.return=k,k=R;break e}r(k,fe);break}else t(k,fe);fe=fe.sibling}V.type===op?(R=Xd(V.props.children,k.mode,W,V.key),R.return=k,k=R):(W=wv(V.type,V.key,V.props,null,k.mode,W),W.ref=jm(k,R,V),W.return=k,k=W)}return h(k);case sp:e:{for(fe=V.key;R!==null;){if(R.key===fe)if(R.tag===4&&R.stateNode.containerInfo===V.containerInfo&&R.stateNode.implementation===V.implementation){r(k,R.sibling),R=a(R,V.children||[]),R.return=k,k=R;break e}else{r(k,R);break}else t(k,R);R=R.sibling}R=nx(V,k.mode,W),R.return=k,k=R}return h(k);case vh:return fe=V._init,H(k,R,fe(V._payload),W)}if(rg(V))return N(k,R,V,W);if(Dm(V))return U(k,R,V,W);py(k,V)}return typeof V=="string"&&V!==""||typeof V=="number"?(V=""+V,R!==null&&R.tag===6?(r(k,R.sibling),R=a(R,V),R.return=k,k=R):(r(k,R),R=rx(V,k.mode,W),R.return=k,k=R),h(k)):r(k,R)}return H}var Zp=rP(!0),nP=rP(!1),Xv=ld(null),Yv=null,fp=null,WB=null;function XB(){WB=fp=Yv=null}function YB(e){var t=Xv.current;ki(Xv),e._currentValue=t}function zb(e,t,r){for(;e!==null;){var i=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,i!==null&&(i.childLanes|=t)):i!==null&&(i.childLanes&t)!==t&&(i.childLanes|=t),e===r)break;e=e.return}}function Bp(e,t){Yv=e,WB=fp=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Ka=!0),e.firstContext=null)}function eA(e){var t=e._currentValue;if(WB!==e)if(e={context:e,memoizedValue:t,next:null},fp===null){if(Yv===null)throw Error(or(308));fp=e,Yv.dependencies={lanes:0,firstContext:e}}else fp=fp.next=e;return t}var Nd=null;function JB(e){Nd===null?Nd=[e]:Nd.push(e)}function iP(e,t,r,i){var a=t.interleaved;return a===null?(r.next=r,JB(t)):(r.next=a.next,a.next=r),t.interleaved=r,ku(e,i)}function ku(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var _h=!1;function e5(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function sP(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Tu(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Hh(e,t,r){var i=e.updateQueue;if(i===null)return null;if(i=i.shared,Dn&2){var a=i.pending;return a===null?t.next=t:(t.next=a.next,a.next=t),i.pending=t,ku(e,r)}return a=i.interleaved,a===null?(t.next=t,JB(i)):(t.next=a.next,a.next=t),i.interleaved=t,ku(e,r)}function pv(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var i=t.lanes;i&=e.pendingLanes,r|=i,t.lanes=r,QB(e,r)}}function HE(e,t){var r=e.updateQueue,i=e.alternate;if(i!==null&&(i=i.updateQueue,r===i)){var a=null,u=null;if(r=r.firstBaseUpdate,r!==null){do{var h={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};u===null?a=u=h:u=u.next=h,r=r.next}while(r!==null);u===null?a=u=t:u=u.next=t}else a=u=t;r={baseState:i.baseState,firstBaseUpdate:a,lastBaseUpdate:u,shared:i.shared,effects:i.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function Jv(e,t,r,i){var a=e.updateQueue;_h=!1;var u=a.firstBaseUpdate,h=a.lastBaseUpdate,o=a.shared.pending;if(o!==null){a.shared.pending=null;var g=o,y=g.next;g.next=null,h===null?u=y:h.next=y,h=g;var C=e.alternate;C!==null&&(C=C.updateQueue,o=C.lastBaseUpdate,o!==h&&(o===null?C.firstBaseUpdate=y:o.next=y,C.lastBaseUpdate=g))}if(u!==null){var I=a.baseState;h=0,C=y=g=null,o=u;do{var F=o.lane,b=o.eventTime;if((i&F)===F){C!==null&&(C=C.next={eventTime:b,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var N=e,U=o;switch(F=t,b=r,U.tag){case 1:if(N=U.payload,typeof N=="function"){I=N.call(b,I,F);break e}I=N;break e;case 3:N.flags=N.flags&-65537|128;case 0:if(N=U.payload,F=typeof N=="function"?N.call(b,I,F):N,F==null)break e;I=Ji({},I,F);break e;case 2:_h=!0}}o.callback!==null&&o.lane!==0&&(e.flags|=64,F=a.effects,F===null?a.effects=[o]:F.push(o))}else b={eventTime:b,lane:F,tag:o.tag,payload:o.payload,callback:o.callback,next:null},C===null?(y=C=b,g=I):C=C.next=b,h|=F;if(o=o.next,o===null){if(o=a.shared.pending,o===null)break;F=o,o=F.next,F.next=null,a.lastBaseUpdate=F,a.shared.pending=null}}while(!0);if(C===null&&(g=I),a.baseState=g,a.firstBaseUpdate=y,a.lastBaseUpdate=C,t=a.shared.interleaved,t!==null){a=t;do h|=a.lane,a=a.next;while(a!==t)}else u===null&&(a.shared.lanes=0);of|=h,e.lanes=h,e.memoizedState=I}}function jE(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var i=e[t],a=i.callback;if(a!==null){if(i.callback=null,i=r,typeof a!="function")throw Error(or(191,a));a.call(i)}}}var C0={},kc=ld(C0),$g=ld(C0),qg=ld(C0);function Dd(e){if(e===C0)throw Error(or(174));return e}function t5(e,t){switch(Si(qg,t),Si($g,e),Si(kc,C0),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:wb(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=wb(t,e)}ki(kc),Si(kc,t)}function Wp(){ki(kc),ki($g),ki(qg)}function oP(e){Dd(qg.current);var t=Dd(kc.current),r=wb(t,e.type);t!==r&&(Si($g,e),Si(kc,r))}function r5(e){$g.current===e&&(ki(kc),ki($g))}var Xi=ld(0);function e1(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Ww=[];function n5(){for(var e=0;e<Ww.length;e++)Ww[e]._workInProgressVersionPrimary=null;Ww.length=0}var mv=Qu.ReactCurrentDispatcher,Xw=Qu.ReactCurrentBatchConfig,sf=0,Yi=null,qs=null,co=null,t1=!1,_g=!1,Zg=0,c8=0;function Ko(){throw Error(or(321))}function i5(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!KA(e[r],t[r]))return!1;return!0}function s5(e,t,r,i,a,u){if(sf=u,Yi=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,mv.current=e===null||e.memoizedState===null?f8:p8,e=r(i,a),_g){u=0;do{if(_g=!1,Zg=0,25<=u)throw Error(or(301));u+=1,co=qs=null,t.updateQueue=null,mv.current=m8,e=r(i,a)}while(_g)}if(mv.current=r1,t=qs!==null&&qs.next!==null,sf=0,co=qs=Yi=null,t1=!1,t)throw Error(or(300));return e}function o5(){var e=Zg!==0;return Zg=0,e}function Bc(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return co===null?Yi.memoizedState=co=e:co=co.next=e,co}function tA(){if(qs===null){var e=Yi.alternate;e=e!==null?e.memoizedState:null}else e=qs.next;var t=co===null?Yi.memoizedState:co.next;if(t!==null)co=t,qs=e;else{if(e===null)throw Error(or(310));qs=e,e={memoizedState:qs.memoizedState,baseState:qs.baseState,baseQueue:qs.baseQueue,queue:qs.queue,next:null},co===null?Yi.memoizedState=co=e:co=co.next=e}return co}function Wg(e,t){return typeof t=="function"?t(e):t}function Yw(e){var t=tA(),r=t.queue;if(r===null)throw Error(or(311));r.lastRenderedReducer=e;var i=qs,a=i.baseQueue,u=r.pending;if(u!==null){if(a!==null){var h=a.next;a.next=u.next,u.next=h}i.baseQueue=a=u,r.pending=null}if(a!==null){u=a.next,i=i.baseState;var o=h=null,g=null,y=u;do{var C=y.lane;if((sf&C)===C)g!==null&&(g=g.next={lane:0,action:y.action,hasEagerState:y.hasEagerState,eagerState:y.eagerState,next:null}),i=y.hasEagerState?y.eagerState:e(i,y.action);else{var I={lane:C,action:y.action,hasEagerState:y.hasEagerState,eagerState:y.eagerState,next:null};g===null?(o=g=I,h=i):g=g.next=I,Yi.lanes|=C,of|=C}y=y.next}while(y!==null&&y!==u);g===null?h=i:g.next=o,KA(i,t.memoizedState)||(Ka=!0),t.memoizedState=i,t.baseState=h,t.baseQueue=g,r.lastRenderedState=i}if(e=r.interleaved,e!==null){a=e;do u=a.lane,Yi.lanes|=u,of|=u,a=a.next;while(a!==e)}else a===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function Jw(e){var t=tA(),r=t.queue;if(r===null)throw Error(or(311));r.lastRenderedReducer=e;var i=r.dispatch,a=r.pending,u=t.memoizedState;if(a!==null){r.pending=null;var h=a=a.next;do u=e(u,h.action),h=h.next;while(h!==a);KA(u,t.memoizedState)||(Ka=!0),t.memoizedState=u,t.baseQueue===null&&(t.baseState=u),r.lastRenderedState=u}return[u,i]}function aP(){}function lP(e,t){var r=Yi,i=tA(),a=t(),u=!KA(i.memoizedState,a);if(u&&(i.memoizedState=a,Ka=!0),i=i.queue,a5(uP.bind(null,r,i,e),[e]),i.getSnapshot!==t||u||co!==null&&co.memoizedState.tag&1){if(r.flags|=2048,Xg(9,cP.bind(null,r,i,a,t),void 0,null),ho===null)throw Error(or(349));sf&30||AP(r,t,a)}return a}function AP(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=Yi.updateQueue,t===null?(t={lastEffect:null,stores:null},Yi.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function cP(e,t,r,i){t.value=r,t.getSnapshot=i,hP(t)&&dP(e)}function uP(e,t,r){return r(function(){hP(t)&&dP(e)})}function hP(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!KA(e,r)}catch{return!0}}function dP(e){var t=ku(e,1);t!==null&&VA(t,e,1,-1)}function VE(e){var t=Bc();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Wg,lastRenderedState:e},t.queue=e,e=e.dispatch=d8.bind(null,Yi,e),[t.memoizedState,e]}function Xg(e,t,r,i){return e={tag:e,create:t,destroy:r,deps:i,next:null},t=Yi.updateQueue,t===null?(t={lastEffect:null,stores:null},Yi.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(i=r.next,r.next=e,e.next=i,t.lastEffect=e)),e}function fP(){return tA().memoizedState}function gv(e,t,r,i){var a=Bc();Yi.flags|=e,a.memoizedState=Xg(1|t,r,void 0,i===void 0?null:i)}function $1(e,t,r,i){var a=tA();i=i===void 0?null:i;var u=void 0;if(qs!==null){var h=qs.memoizedState;if(u=h.destroy,i!==null&&i5(i,h.deps)){a.memoizedState=Xg(t,r,u,i);return}}Yi.flags|=e,a.memoizedState=Xg(1|t,r,u,i)}function KE(e,t){return gv(8390656,8,e,t)}function a5(e,t){return $1(2048,8,e,t)}function pP(e,t){return $1(4,2,e,t)}function mP(e,t){return $1(4,4,e,t)}function gP(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function yP(e,t,r){return r=r!=null?r.concat([e]):null,$1(4,4,gP.bind(null,t,e),r)}function l5(){}function vP(e,t){var r=tA();t=t===void 0?null:t;var i=r.memoizedState;return i!==null&&t!==null&&i5(t,i[1])?i[0]:(r.memoizedState=[e,t],e)}function _P(e,t){var r=tA();t=t===void 0?null:t;var i=r.memoizedState;return i!==null&&t!==null&&i5(t,i[1])?i[0]:(e=e(),r.memoizedState=[e,t],e)}function wP(e,t,r){return sf&21?(KA(r,t)||(r=S3(),Yi.lanes|=r,of|=r,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Ka=!0),e.memoizedState=r)}function u8(e,t){var r=ti;ti=r!==0&&4>r?r:4,e(!0);var i=Xw.transition;Xw.transition={};try{e(!1),t()}finally{ti=r,Xw.transition=i}}function xP(){return tA().memoizedState}function h8(e,t,r){var i=Vh(e);if(r={lane:i,action:r,hasEagerState:!1,eagerState:null,next:null},bP(e))BP(t,r);else if(r=iP(e,t,r,i),r!==null){var a=xa();VA(r,e,i,a),CP(r,t,i)}}function d8(e,t,r){var i=Vh(e),a={lane:i,action:r,hasEagerState:!1,eagerState:null,next:null};if(bP(e))BP(t,a);else{var u=e.alternate;if(e.lanes===0&&(u===null||u.lanes===0)&&(u=t.lastRenderedReducer,u!==null))try{var h=t.lastRenderedState,o=u(h,r);if(a.hasEagerState=!0,a.eagerState=o,KA(o,h)){var g=t.interleaved;g===null?(a.next=a,JB(t)):(a.next=g.next,g.next=a),t.interleaved=a;return}}catch{}finally{}r=iP(e,t,a,i),r!==null&&(a=xa(),VA(r,e,i,a),CP(r,t,i))}}function bP(e){var t=e.alternate;return e===Yi||t!==null&&t===Yi}function BP(e,t){_g=t1=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function CP(e,t,r){if(r&4194240){var i=t.lanes;i&=e.pendingLanes,r|=i,t.lanes=r,QB(e,r)}}var r1={readContext:eA,useCallback:Ko,useContext:Ko,useEffect:Ko,useImperativeHandle:Ko,useInsertionEffect:Ko,useLayoutEffect:Ko,useMemo:Ko,useReducer:Ko,useRef:Ko,useState:Ko,useDebugValue:Ko,useDeferredValue:Ko,useTransition:Ko,useMutableSource:Ko,useSyncExternalStore:Ko,useId:Ko,unstable_isNewReconciler:!1},f8={readContext:eA,useCallback:function(e,t){return Bc().memoizedState=[e,t===void 0?null:t],e},useContext:eA,useEffect:KE,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,gv(4194308,4,gP.bind(null,t,e),r)},useLayoutEffect:function(e,t){return gv(4194308,4,e,t)},useInsertionEffect:function(e,t){return gv(4,2,e,t)},useMemo:function(e,t){var r=Bc();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var i=Bc();return t=r!==void 0?r(t):t,i.memoizedState=i.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},i.queue=e,e=e.dispatch=h8.bind(null,Yi,e),[i.memoizedState,e]},useRef:function(e){var t=Bc();return e={current:e},t.memoizedState=e},useState:VE,useDebugValue:l5,useDeferredValue:function(e){return Bc().memoizedState=e},useTransition:function(){var e=VE(!1),t=e[0];return e=u8.bind(null,e[1]),Bc().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var i=Yi,a=Bc();if(Oi){if(r===void 0)throw Error(or(407));r=r()}else{if(r=t(),ho===null)throw Error(or(349));sf&30||AP(i,t,r)}a.memoizedState=r;var u={value:r,getSnapshot:t};return a.queue=u,KE(uP.bind(null,i,u,e),[e]),i.flags|=2048,Xg(9,cP.bind(null,i,u,r,t),void 0,null),r},useId:function(){var e=Bc(),t=ho.identifierPrefix;if(Oi){var r=Fu,i=Iu;r=(i&~(1<<32-jA(i)-1)).toString(32)+r,t=":"+t+"R"+r,r=Zg++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=c8++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},p8={readContext:eA,useCallback:vP,useContext:eA,useEffect:a5,useImperativeHandle:yP,useInsertionEffect:pP,useLayoutEffect:mP,useMemo:_P,useReducer:Yw,useRef:fP,useState:function(){return Yw(Wg)},useDebugValue:l5,useDeferredValue:function(e){var t=tA();return wP(t,qs.memoizedState,e)},useTransition:function(){var e=Yw(Wg)[0],t=tA().memoizedState;return[e,t]},useMutableSource:aP,useSyncExternalStore:lP,useId:xP,unstable_isNewReconciler:!1},m8={readContext:eA,useCallback:vP,useContext:eA,useEffect:a5,useImperativeHandle:yP,useInsertionEffect:pP,useLayoutEffect:mP,useMemo:_P,useReducer:Jw,useRef:fP,useState:function(){return Jw(Wg)},useDebugValue:l5,useDeferredValue:function(e){var t=tA();return qs===null?t.memoizedState=e:wP(t,qs.memoizedState,e)},useTransition:function(){var e=Jw(Wg)[0],t=tA().memoizedState;return[e,t]},useMutableSource:aP,useSyncExternalStore:lP,useId:xP,unstable_isNewReconciler:!1};function UA(e,t){if(e&&e.defaultProps){t=Ji({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}function Hb(e,t,r,i){t=e.memoizedState,r=r(i,t),r=r==null?t:Ji({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var q1={isMounted:function(e){return(e=e._reactInternals)?pf(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var i=xa(),a=Vh(e),u=Tu(i,a);u.payload=t,r!=null&&(u.callback=r),t=Hh(e,u,a),t!==null&&(VA(t,e,a,i),pv(t,e,a))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var i=xa(),a=Vh(e),u=Tu(i,a);u.tag=1,u.payload=t,r!=null&&(u.callback=r),t=Hh(e,u,a),t!==null&&(VA(t,e,a,i),pv(t,e,a))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=xa(),i=Vh(e),a=Tu(r,i);a.tag=2,t!=null&&(a.callback=t),t=Hh(e,a,i),t!==null&&(VA(t,e,i,r),pv(t,e,i))}};function GE(e,t,r,i,a,u,h){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(i,u,h):t.prototype&&t.prototype.isPureReactComponent?!jg(r,i)||!jg(a,u):!0}function SP(e,t,r){var i=!1,a=td,u=t.contextType;return typeof u=="object"&&u!==null?u=eA(u):(a=Za(t)?rf:na.current,i=t.contextTypes,u=(i=i!=null)?$p(e,a):td),t=new t(r,u),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=q1,e.stateNode=t,t._reactInternals=e,i&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=a,e.__reactInternalMemoizedMaskedChildContext=u),t}function $E(e,t,r,i){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,i),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,i),t.state!==e&&q1.enqueueReplaceState(t,t.state,null)}function jb(e,t,r,i){var a=e.stateNode;a.props=r,a.state=e.memoizedState,a.refs={},e5(e);var u=t.contextType;typeof u=="object"&&u!==null?a.context=eA(u):(u=Za(t)?rf:na.current,a.context=$p(e,u)),a.state=e.memoizedState,u=t.getDerivedStateFromProps,typeof u=="function"&&(Hb(e,t,u,r),a.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof a.getSnapshotBeforeUpdate=="function"||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(t=a.state,typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount(),t!==a.state&&q1.enqueueReplaceState(a,a.state,null),Jv(e,r,a,i),a.state=e.memoizedState),typeof a.componentDidMount=="function"&&(e.flags|=4194308)}function Xp(e,t){try{var r="",i=t;do r+=VD(i),i=i.return;while(i);var a=r}catch(u){a=`
Error generating stack: `+u.message+`
`+u.stack}return{value:e,source:t,stack:a,digest:null}}function ex(e,t,r){return{value:e,source:null,stack:r??null,digest:t??null}}function Vb(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var g8=typeof WeakMap=="function"?WeakMap:Map;function EP(e,t,r){r=Tu(-1,r),r.tag=3,r.payload={element:null};var i=t.value;return r.callback=function(){i1||(i1=!0,e2=i),Vb(e,t)},r}function IP(e,t,r){r=Tu(-1,r),r.tag=3;var i=e.type.getDerivedStateFromError;if(typeof i=="function"){var a=t.value;r.payload=function(){return i(a)},r.callback=function(){Vb(e,t)}}var u=e.stateNode;return u!==null&&typeof u.componentDidCatch=="function"&&(r.callback=function(){Vb(e,t),typeof i!="function"&&(jh===null?jh=new Set([this]):jh.add(this));var h=t.stack;this.componentDidCatch(t.value,{componentStack:h!==null?h:""})}),r}function qE(e,t,r){var i=e.pingCache;if(i===null){i=e.pingCache=new g8;var a=new Set;i.set(t,a)}else a=i.get(t),a===void 0&&(a=new Set,i.set(t,a));a.has(r)||(a.add(r),e=P8.bind(null,e,t,r),t.then(e,e))}function ZE(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function WE(e,t,r,i,a){return e.mode&1?(e.flags|=65536,e.lanes=a,e):(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=Tu(-1,1),t.tag=2,Hh(r,t,1))),r.lanes|=1),e)}var y8=Qu.ReactCurrentOwner,Ka=!1;function va(e,t,r,i){t.child=e===null?nP(t,null,r,i):Zp(t,e.child,r,i)}function XE(e,t,r,i,a){r=r.render;var u=t.ref;return Bp(t,a),i=s5(e,t,r,i,u,a),r=o5(),e!==null&&!Ka?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,Uu(e,t,a)):(Oi&&r&&$B(t),t.flags|=1,va(e,t,i,a),t.child)}function YE(e,t,r,i,a){if(e===null){var u=r.type;return typeof u=="function"&&!m5(u)&&u.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=u,FP(e,t,u,i,a)):(e=wv(r.type,null,i,t,t.mode,a),e.ref=t.ref,e.return=t,t.child=e)}if(u=e.child,!(e.lanes&a)){var h=u.memoizedProps;if(r=r.compare,r=r!==null?r:jg,r(h,i)&&e.ref===t.ref)return Uu(e,t,a)}return t.flags|=1,e=Kh(u,i),e.ref=t.ref,e.return=t,t.child=e}function FP(e,t,r,i,a){if(e!==null){var u=e.memoizedProps;if(jg(u,i)&&e.ref===t.ref)if(Ka=!1,t.pendingProps=i=u,(e.lanes&a)!==0)e.flags&131072&&(Ka=!0);else return t.lanes=e.lanes,Uu(e,t,a)}return Kb(e,t,r,i,a)}function TP(e,t,r){var i=t.pendingProps,a=i.children,u=e!==null?e.memoizedState:null;if(i.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Si(mp,wl),wl|=r;else{if(!(r&1073741824))return e=u!==null?u.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Si(mp,wl),wl|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=u!==null?u.baseLanes:r,Si(mp,wl),wl|=i}else u!==null?(i=u.baseLanes|r,t.memoizedState=null):i=r,Si(mp,wl),wl|=i;return va(e,t,a,r),t.child}function PP(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function Kb(e,t,r,i,a){var u=Za(r)?rf:na.current;return u=$p(t,u),Bp(t,a),r=s5(e,t,r,i,u,a),i=o5(),e!==null&&!Ka?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,Uu(e,t,a)):(Oi&&i&&$B(t),t.flags|=1,va(e,t,r,a),t.child)}function JE(e,t,r,i,a){if(Za(r)){var u=!0;qv(t)}else u=!1;if(Bp(t,a),t.stateNode===null)yv(e,t),SP(t,r,i),jb(t,r,i,a),i=!0;else if(e===null){var h=t.stateNode,o=t.memoizedProps;h.props=o;var g=h.context,y=r.contextType;typeof y=="object"&&y!==null?y=eA(y):(y=Za(r)?rf:na.current,y=$p(t,y));var C=r.getDerivedStateFromProps,I=typeof C=="function"||typeof h.getSnapshotBeforeUpdate=="function";I||typeof h.UNSAFE_componentWillReceiveProps!="function"&&typeof h.componentWillReceiveProps!="function"||(o!==i||g!==y)&&$E(t,h,i,y),_h=!1;var F=t.memoizedState;h.state=F,Jv(t,i,h,a),g=t.memoizedState,o!==i||F!==g||qa.current||_h?(typeof C=="function"&&(Hb(t,r,C,i),g=t.memoizedState),(o=_h||GE(t,r,o,i,F,g,y))?(I||typeof h.UNSAFE_componentWillMount!="function"&&typeof h.componentWillMount!="function"||(typeof h.componentWillMount=="function"&&h.componentWillMount(),typeof h.UNSAFE_componentWillMount=="function"&&h.UNSAFE_componentWillMount()),typeof h.componentDidMount=="function"&&(t.flags|=4194308)):(typeof h.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=i,t.memoizedState=g),h.props=i,h.state=g,h.context=y,i=o):(typeof h.componentDidMount=="function"&&(t.flags|=4194308),i=!1)}else{h=t.stateNode,sP(e,t),o=t.memoizedProps,y=t.type===t.elementType?o:UA(t.type,o),h.props=y,I=t.pendingProps,F=h.context,g=r.contextType,typeof g=="object"&&g!==null?g=eA(g):(g=Za(r)?rf:na.current,g=$p(t,g));var b=r.getDerivedStateFromProps;(C=typeof b=="function"||typeof h.getSnapshotBeforeUpdate=="function")||typeof h.UNSAFE_componentWillReceiveProps!="function"&&typeof h.componentWillReceiveProps!="function"||(o!==I||F!==g)&&$E(t,h,i,g),_h=!1,F=t.memoizedState,h.state=F,Jv(t,i,h,a);var N=t.memoizedState;o!==I||F!==N||qa.current||_h?(typeof b=="function"&&(Hb(t,r,b,i),N=t.memoizedState),(y=_h||GE(t,r,y,i,F,N,g)||!1)?(C||typeof h.UNSAFE_componentWillUpdate!="function"&&typeof h.componentWillUpdate!="function"||(typeof h.componentWillUpdate=="function"&&h.componentWillUpdate(i,N,g),typeof h.UNSAFE_componentWillUpdate=="function"&&h.UNSAFE_componentWillUpdate(i,N,g)),typeof h.componentDidUpdate=="function"&&(t.flags|=4),typeof h.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof h.componentDidUpdate!="function"||o===e.memoizedProps&&F===e.memoizedState||(t.flags|=4),typeof h.getSnapshotBeforeUpdate!="function"||o===e.memoizedProps&&F===e.memoizedState||(t.flags|=1024),t.memoizedProps=i,t.memoizedState=N),h.props=i,h.state=N,h.context=g,i=y):(typeof h.componentDidUpdate!="function"||o===e.memoizedProps&&F===e.memoizedState||(t.flags|=4),typeof h.getSnapshotBeforeUpdate!="function"||o===e.memoizedProps&&F===e.memoizedState||(t.flags|=1024),i=!1)}return Gb(e,t,r,i,u,a)}function Gb(e,t,r,i,a,u){PP(e,t);var h=(t.flags&128)!==0;if(!i&&!h)return a&&DE(t,r,!1),Uu(e,t,u);i=t.stateNode,y8.current=t;var o=h&&typeof r.getDerivedStateFromError!="function"?null:i.render();return t.flags|=1,e!==null&&h?(t.child=Zp(t,e.child,null,u),t.child=Zp(t,null,o,u)):va(e,t,o,u),t.memoizedState=i.state,a&&DE(t,r,!0),t.child}function LP(e){var t=e.stateNode;t.pendingContext?NE(e,t.pendingContext,t.pendingContext!==t.context):t.context&&NE(e,t.context,!1),t5(e,t.containerInfo)}function e4(e,t,r,i,a){return qp(),ZB(a),t.flags|=256,va(e,t,r,i),t.child}var $b={dehydrated:null,treeContext:null,retryLane:0};function qb(e){return{baseLanes:e,cachePool:null,transitions:null}}function MP(e,t,r){var i=t.pendingProps,a=Xi.current,u=!1,h=(t.flags&128)!==0,o;if((o=h)||(o=e!==null&&e.memoizedState===null?!1:(a&2)!==0),o?(u=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(a|=1),Si(Xi,a&1),e===null)return Ob(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(h=i.children,e=i.fallback,u?(i=t.mode,u=t.child,h={mode:"hidden",children:h},!(i&1)&&u!==null?(u.childLanes=0,u.pendingProps=h):u=X1(h,i,0,null),e=Xd(e,i,r,null),u.return=t,e.return=t,u.sibling=e,t.child=u,t.child.memoizedState=qb(r),t.memoizedState=$b,e):A5(t,h));if(a=e.memoizedState,a!==null&&(o=a.dehydrated,o!==null))return v8(e,t,h,i,o,a,r);if(u){u=i.fallback,h=t.mode,a=e.child,o=a.sibling;var g={mode:"hidden",children:i.children};return!(h&1)&&t.child!==a?(i=t.child,i.childLanes=0,i.pendingProps=g,t.deletions=null):(i=Kh(a,g),i.subtreeFlags=a.subtreeFlags&14680064),o!==null?u=Kh(o,u):(u=Xd(u,h,r,null),u.flags|=2),u.return=t,i.return=t,i.sibling=u,t.child=i,i=u,u=t.child,h=e.child.memoizedState,h=h===null?qb(r):{baseLanes:h.baseLanes|r,cachePool:null,transitions:h.transitions},u.memoizedState=h,u.childLanes=e.childLanes&~r,t.memoizedState=$b,i}return u=e.child,e=u.sibling,i=Kh(u,{mode:"visible",children:i.children}),!(t.mode&1)&&(i.lanes=r),i.return=t,i.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=i,t.memoizedState=null,i}function A5(e,t){return t=X1({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function my(e,t,r,i){return i!==null&&ZB(i),Zp(t,e.child,null,r),e=A5(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function v8(e,t,r,i,a,u,h){if(r)return t.flags&256?(t.flags&=-257,i=ex(Error(or(422))),my(e,t,h,i)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(u=i.fallback,a=t.mode,i=X1({mode:"visible",children:i.children},a,0,null),u=Xd(u,a,h,null),u.flags|=2,i.return=t,u.return=t,i.sibling=u,t.child=i,t.mode&1&&Zp(t,e.child,null,h),t.child.memoizedState=qb(h),t.memoizedState=$b,u);if(!(t.mode&1))return my(e,t,h,null);if(a.data==="$!"){if(i=a.nextSibling&&a.nextSibling.dataset,i)var o=i.dgst;return i=o,u=Error(or(419)),i=ex(u,i,void 0),my(e,t,h,i)}if(o=(h&e.childLanes)!==0,Ka||o){if(i=ho,i!==null){switch(h&-h){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}a=a&(i.suspendedLanes|h)?0:a,a!==0&&a!==u.retryLane&&(u.retryLane=a,ku(e,a),VA(i,e,a,-1))}return p5(),i=ex(Error(or(421))),my(e,t,h,i)}return a.data==="$?"?(t.flags|=128,t.child=e.child,t=L8.bind(null,e),a._reactRetry=t,null):(e=u.treeContext,bl=zh(a.nextSibling),Sl=t,Oi=!0,zA=null,e!==null&&(Gl[$l++]=Iu,Gl[$l++]=Fu,Gl[$l++]=nf,Iu=e.id,Fu=e.overflow,nf=t),t=A5(t,i.children),t.flags|=4096,t)}function t4(e,t,r){e.lanes|=t;var i=e.alternate;i!==null&&(i.lanes|=t),zb(e.return,t,r)}function tx(e,t,r,i,a){var u=e.memoizedState;u===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:i,tail:r,tailMode:a}:(u.isBackwards=t,u.rendering=null,u.renderingStartTime=0,u.last=i,u.tail=r,u.tailMode=a)}function kP(e,t,r){var i=t.pendingProps,a=i.revealOrder,u=i.tail;if(va(e,t,i.children,r),i=Xi.current,i&2)i=i&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&t4(e,r,t);else if(e.tag===19)t4(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}i&=1}if(Si(Xi,i),!(t.mode&1))t.memoizedState=null;else switch(a){case"forwards":for(r=t.child,a=null;r!==null;)e=r.alternate,e!==null&&e1(e)===null&&(a=r),r=r.sibling;r=a,r===null?(a=t.child,t.child=null):(a=r.sibling,r.sibling=null),tx(t,!1,a,r,u);break;case"backwards":for(r=null,a=t.child,t.child=null;a!==null;){if(e=a.alternate,e!==null&&e1(e)===null){t.child=a;break}e=a.sibling,a.sibling=r,r=a,a=e}tx(t,!0,r,null,u);break;case"together":tx(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function yv(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Uu(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),of|=t.lanes,!(r&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(or(153));if(t.child!==null){for(e=t.child,r=Kh(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=Kh(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function _8(e,t,r){switch(t.tag){case 3:LP(t),qp();break;case 5:oP(t);break;case 1:Za(t.type)&&qv(t);break;case 4:t5(t,t.stateNode.containerInfo);break;case 10:var i=t.type._context,a=t.memoizedProps.value;Si(Xv,i._currentValue),i._currentValue=a;break;case 13:if(i=t.memoizedState,i!==null)return i.dehydrated!==null?(Si(Xi,Xi.current&1),t.flags|=128,null):r&t.child.childLanes?MP(e,t,r):(Si(Xi,Xi.current&1),e=Uu(e,t,r),e!==null?e.sibling:null);Si(Xi,Xi.current&1);break;case 19:if(i=(r&t.childLanes)!==0,e.flags&128){if(i)return kP(e,t,r);t.flags|=128}if(a=t.memoizedState,a!==null&&(a.rendering=null,a.tail=null,a.lastEffect=null),Si(Xi,Xi.current),i)break;return null;case 22:case 23:return t.lanes=0,TP(e,t,r)}return Uu(e,t,r)}var UP,Zb,RP,NP;UP=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};Zb=function(){};RP=function(e,t,r,i){var a=e.memoizedProps;if(a!==i){e=t.stateNode,Dd(kc.current);var u=null;switch(r){case"input":a=gb(e,a),i=gb(e,i),u=[];break;case"select":a=Ji({},a,{value:void 0}),i=Ji({},i,{value:void 0}),u=[];break;case"textarea":a=_b(e,a),i=_b(e,i),u=[];break;default:typeof a.onClick!="function"&&typeof i.onClick=="function"&&(e.onclick=Gv)}xb(r,i);var h;r=null;for(y in a)if(!i.hasOwnProperty(y)&&a.hasOwnProperty(y)&&a[y]!=null)if(y==="style"){var o=a[y];for(h in o)o.hasOwnProperty(h)&&(r||(r={}),r[h]="")}else y!=="dangerouslySetInnerHTML"&&y!=="children"&&y!=="suppressContentEditableWarning"&&y!=="suppressHydrationWarning"&&y!=="autoFocus"&&(Rg.hasOwnProperty(y)?u||(u=[]):(u=u||[]).push(y,null));for(y in i){var g=i[y];if(o=a!=null?a[y]:void 0,i.hasOwnProperty(y)&&g!==o&&(g!=null||o!=null))if(y==="style")if(o){for(h in o)!o.hasOwnProperty(h)||g&&g.hasOwnProperty(h)||(r||(r={}),r[h]="");for(h in g)g.hasOwnProperty(h)&&o[h]!==g[h]&&(r||(r={}),r[h]=g[h])}else r||(u||(u=[]),u.push(y,r)),r=g;else y==="dangerouslySetInnerHTML"?(g=g?g.__html:void 0,o=o?o.__html:void 0,g!=null&&o!==g&&(u=u||[]).push(y,g)):y==="children"?typeof g!="string"&&typeof g!="number"||(u=u||[]).push(y,""+g):y!=="suppressContentEditableWarning"&&y!=="suppressHydrationWarning"&&(Rg.hasOwnProperty(y)?(g!=null&&y==="onScroll"&&Li("scroll",e),u||o===g||(u=[])):(u=u||[]).push(y,g))}r&&(u=u||[]).push("style",r);var y=u;(t.updateQueue=y)&&(t.flags|=4)}};NP=function(e,t,r,i){r!==i&&(t.flags|=4)};function Vm(e,t){if(!Oi)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var i=null;r!==null;)r.alternate!==null&&(i=r),r=r.sibling;i===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:i.sibling=null}}function Go(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,i=0;if(t)for(var a=e.child;a!==null;)r|=a.lanes|a.childLanes,i|=a.subtreeFlags&14680064,i|=a.flags&14680064,a.return=e,a=a.sibling;else for(a=e.child;a!==null;)r|=a.lanes|a.childLanes,i|=a.subtreeFlags,i|=a.flags,a.return=e,a=a.sibling;return e.subtreeFlags|=i,e.childLanes=r,t}function w8(e,t,r){var i=t.pendingProps;switch(qB(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Go(t),null;case 1:return Za(t.type)&&$v(),Go(t),null;case 3:return i=t.stateNode,Wp(),ki(qa),ki(na),n5(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(e===null||e.child===null)&&(fy(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,zA!==null&&(n2(zA),zA=null))),Zb(e,t),Go(t),null;case 5:r5(t);var a=Dd(qg.current);if(r=t.type,e!==null&&t.stateNode!=null)RP(e,t,r,i,a),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!i){if(t.stateNode===null)throw Error(or(166));return Go(t),null}if(e=Dd(kc.current),fy(t)){i=t.stateNode,r=t.type;var u=t.memoizedProps;switch(i[Ic]=t,i[Gg]=u,e=(t.mode&1)!==0,r){case"dialog":Li("cancel",i),Li("close",i);break;case"iframe":case"object":case"embed":Li("load",i);break;case"video":case"audio":for(a=0;a<ig.length;a++)Li(ig[a],i);break;case"source":Li("error",i);break;case"img":case"image":case"link":Li("error",i),Li("load",i);break;case"details":Li("toggle",i);break;case"input":cE(i,u),Li("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!u.multiple},Li("invalid",i);break;case"textarea":hE(i,u),Li("invalid",i)}xb(r,u),a=null;for(var h in u)if(u.hasOwnProperty(h)){var o=u[h];h==="children"?typeof o=="string"?i.textContent!==o&&(u.suppressHydrationWarning!==!0&&dy(i.textContent,o,e),a=["children",o]):typeof o=="number"&&i.textContent!==""+o&&(u.suppressHydrationWarning!==!0&&dy(i.textContent,o,e),a=["children",""+o]):Rg.hasOwnProperty(h)&&o!=null&&h==="onScroll"&&Li("scroll",i)}switch(r){case"input":sy(i),uE(i,u,!0);break;case"textarea":sy(i),dE(i);break;case"select":case"option":break;default:typeof u.onClick=="function"&&(i.onclick=Gv)}i=a,t.updateQueue=i,i!==null&&(t.flags|=4)}else{h=a.nodeType===9?a:a.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=u3(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=h.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof i.is=="string"?e=h.createElement(r,{is:i.is}):(e=h.createElement(r),r==="select"&&(h=e,i.multiple?h.multiple=!0:i.size&&(h.size=i.size))):e=h.createElementNS(e,r),e[Ic]=t,e[Gg]=i,UP(e,t,!1,!1),t.stateNode=e;e:{switch(h=bb(r,i),r){case"dialog":Li("cancel",e),Li("close",e),a=i;break;case"iframe":case"object":case"embed":Li("load",e),a=i;break;case"video":case"audio":for(a=0;a<ig.length;a++)Li(ig[a],e);a=i;break;case"source":Li("error",e),a=i;break;case"img":case"image":case"link":Li("error",e),Li("load",e),a=i;break;case"details":Li("toggle",e),a=i;break;case"input":cE(e,i),a=gb(e,i),Li("invalid",e);break;case"option":a=i;break;case"select":e._wrapperState={wasMultiple:!!i.multiple},a=Ji({},i,{value:void 0}),Li("invalid",e);break;case"textarea":hE(e,i),a=_b(e,i),Li("invalid",e);break;default:a=i}xb(r,a),o=a;for(u in o)if(o.hasOwnProperty(u)){var g=o[u];u==="style"?f3(e,g):u==="dangerouslySetInnerHTML"?(g=g?g.__html:void 0,g!=null&&h3(e,g)):u==="children"?typeof g=="string"?(r!=="textarea"||g!=="")&&Ng(e,g):typeof g=="number"&&Ng(e,""+g):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Rg.hasOwnProperty(u)?g!=null&&u==="onScroll"&&Li("scroll",e):g!=null&&MB(e,u,g,h))}switch(r){case"input":sy(e),uE(e,i,!1);break;case"textarea":sy(e),dE(e);break;case"option":i.value!=null&&e.setAttribute("value",""+ed(i.value));break;case"select":e.multiple=!!i.multiple,u=i.value,u!=null?_p(e,!!i.multiple,u,!1):i.defaultValue!=null&&_p(e,!!i.multiple,i.defaultValue,!0);break;default:typeof a.onClick=="function"&&(e.onclick=Gv)}switch(r){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Go(t),null;case 6:if(e&&t.stateNode!=null)NP(e,t,e.memoizedProps,i);else{if(typeof i!="string"&&t.stateNode===null)throw Error(or(166));if(r=Dd(qg.current),Dd(kc.current),fy(t)){if(i=t.stateNode,r=t.memoizedProps,i[Ic]=t,(u=i.nodeValue!==r)&&(e=Sl,e!==null))switch(e.tag){case 3:dy(i.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&dy(i.nodeValue,r,(e.mode&1)!==0)}u&&(t.flags|=4)}else i=(r.nodeType===9?r:r.ownerDocument).createTextNode(i),i[Ic]=t,t.stateNode=i}return Go(t),null;case 13:if(ki(Xi),i=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Oi&&bl!==null&&t.mode&1&&!(t.flags&128))tP(),qp(),t.flags|=98560,u=!1;else if(u=fy(t),i!==null&&i.dehydrated!==null){if(e===null){if(!u)throw Error(or(318));if(u=t.memoizedState,u=u!==null?u.dehydrated:null,!u)throw Error(or(317));u[Ic]=t}else qp(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Go(t),u=!1}else zA!==null&&(n2(zA),zA=null),u=!0;if(!u)return t.flags&65536?t:null}return t.flags&128?(t.lanes=r,t):(i=i!==null,i!==(e!==null&&e.memoizedState!==null)&&i&&(t.child.flags|=8192,t.mode&1&&(e===null||Xi.current&1?Ws===0&&(Ws=3):p5())),t.updateQueue!==null&&(t.flags|=4),Go(t),null);case 4:return Wp(),Zb(e,t),e===null&&Vg(t.stateNode.containerInfo),Go(t),null;case 10:return YB(t.type._context),Go(t),null;case 17:return Za(t.type)&&$v(),Go(t),null;case 19:if(ki(Xi),u=t.memoizedState,u===null)return Go(t),null;if(i=(t.flags&128)!==0,h=u.rendering,h===null)if(i)Vm(u,!1);else{if(Ws!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(h=e1(e),h!==null){for(t.flags|=128,Vm(u,!1),i=h.updateQueue,i!==null&&(t.updateQueue=i,t.flags|=4),t.subtreeFlags=0,i=r,r=t.child;r!==null;)u=r,e=i,u.flags&=14680066,h=u.alternate,h===null?(u.childLanes=0,u.lanes=e,u.child=null,u.subtreeFlags=0,u.memoizedProps=null,u.memoizedState=null,u.updateQueue=null,u.dependencies=null,u.stateNode=null):(u.childLanes=h.childLanes,u.lanes=h.lanes,u.child=h.child,u.subtreeFlags=0,u.deletions=null,u.memoizedProps=h.memoizedProps,u.memoizedState=h.memoizedState,u.updateQueue=h.updateQueue,u.type=h.type,e=h.dependencies,u.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return Si(Xi,Xi.current&1|2),t.child}e=e.sibling}u.tail!==null&&_s()>Yp&&(t.flags|=128,i=!0,Vm(u,!1),t.lanes=4194304)}else{if(!i)if(e=e1(h),e!==null){if(t.flags|=128,i=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),Vm(u,!0),u.tail===null&&u.tailMode==="hidden"&&!h.alternate&&!Oi)return Go(t),null}else 2*_s()-u.renderingStartTime>Yp&&r!==1073741824&&(t.flags|=128,i=!0,Vm(u,!1),t.lanes=4194304);u.isBackwards?(h.sibling=t.child,t.child=h):(r=u.last,r!==null?r.sibling=h:t.child=h,u.last=h)}return u.tail!==null?(t=u.tail,u.rendering=t,u.tail=t.sibling,u.renderingStartTime=_s(),t.sibling=null,r=Xi.current,Si(Xi,i?r&1|2:r&1),t):(Go(t),null);case 22:case 23:return f5(),i=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==i&&(t.flags|=8192),i&&t.mode&1?wl&1073741824&&(Go(t),t.subtreeFlags&6&&(t.flags|=8192)):Go(t),null;case 24:return null;case 25:return null}throw Error(or(156,t.tag))}function x8(e,t){switch(qB(t),t.tag){case 1:return Za(t.type)&&$v(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Wp(),ki(qa),ki(na),n5(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return r5(t),null;case 13:if(ki(Xi),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(or(340));qp()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return ki(Xi),null;case 4:return Wp(),null;case 10:return YB(t.type._context),null;case 22:case 23:return f5(),null;case 24:return null;default:return null}}var gy=!1,ea=!1,b8=typeof WeakSet=="function"?WeakSet:Set,Fr=null;function pp(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(i){As(e,t,i)}else r.current=null}function Wb(e,t,r){try{r()}catch(i){As(e,t,i)}}var r4=!1;function B8(e,t){if(Mb=jv,e=H3(),GB(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var i=r.getSelection&&r.getSelection();if(i&&i.rangeCount!==0){r=i.anchorNode;var a=i.anchorOffset,u=i.focusNode;i=i.focusOffset;try{r.nodeType,u.nodeType}catch{r=null;break e}var h=0,o=-1,g=-1,y=0,C=0,I=e,F=null;t:for(;;){for(var b;I!==r||a!==0&&I.nodeType!==3||(o=h+a),I!==u||i!==0&&I.nodeType!==3||(g=h+i),I.nodeType===3&&(h+=I.nodeValue.length),(b=I.firstChild)!==null;)F=I,I=b;for(;;){if(I===e)break t;if(F===r&&++y===a&&(o=h),F===u&&++C===i&&(g=h),(b=I.nextSibling)!==null)break;I=F,F=I.parentNode}I=b}r=o===-1||g===-1?null:{start:o,end:g}}else r=null}r=r||{start:0,end:0}}else r=null;for(kb={focusedElem:e,selectionRange:r},jv=!1,Fr=t;Fr!==null;)if(t=Fr,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,Fr=e;else for(;Fr!==null;){t=Fr;try{var N=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(N!==null){var U=N.memoizedProps,H=N.memoizedState,k=t.stateNode,R=k.getSnapshotBeforeUpdate(t.elementType===t.type?U:UA(t.type,U),H);k.__reactInternalSnapshotBeforeUpdate=R}break;case 3:var V=t.stateNode.containerInfo;V.nodeType===1?V.textContent="":V.nodeType===9&&V.documentElement&&V.removeChild(V.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(or(163))}}catch(W){As(t,t.return,W)}if(e=t.sibling,e!==null){e.return=t.return,Fr=e;break}Fr=t.return}return N=r4,r4=!1,N}function wg(e,t,r){var i=t.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var a=i=i.next;do{if((a.tag&e)===e){var u=a.destroy;a.destroy=void 0,u!==void 0&&Wb(t,r,u)}a=a.next}while(a!==i)}}function Z1(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var i=r.create;r.destroy=i()}r=r.next}while(r!==t)}}function Xb(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function DP(e){var t=e.alternate;t!==null&&(e.alternate=null,DP(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Ic],delete t[Gg],delete t[Nb],delete t[o8],delete t[a8])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function QP(e){return e.tag===5||e.tag===3||e.tag===4}function n4(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||QP(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Yb(e,t,r){var i=e.tag;if(i===5||i===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=Gv));else if(i!==4&&(e=e.child,e!==null))for(Yb(e,t,r),e=e.sibling;e!==null;)Yb(e,t,r),e=e.sibling}function Jb(e,t,r){var i=e.tag;if(i===5||i===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(i!==4&&(e=e.child,e!==null))for(Jb(e,t,r),e=e.sibling;e!==null;)Jb(e,t,r),e=e.sibling}var xo=null,OA=!1;function Ah(e,t,r){for(r=r.child;r!==null;)OP(e,t,r),r=r.sibling}function OP(e,t,r){if(Mc&&typeof Mc.onCommitFiberUnmount=="function")try{Mc.onCommitFiberUnmount(z1,r)}catch{}switch(r.tag){case 5:ea||pp(r,t);case 6:var i=xo,a=OA;xo=null,Ah(e,t,r),xo=i,OA=a,xo!==null&&(OA?(e=xo,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):xo.removeChild(r.stateNode));break;case 18:xo!==null&&(OA?(e=xo,r=r.stateNode,e.nodeType===8?qw(e.parentNode,r):e.nodeType===1&&qw(e,r),zg(e)):qw(xo,r.stateNode));break;case 4:i=xo,a=OA,xo=r.stateNode.containerInfo,OA=!0,Ah(e,t,r),xo=i,OA=a;break;case 0:case 11:case 14:case 15:if(!ea&&(i=r.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){a=i=i.next;do{var u=a,h=u.destroy;u=u.tag,h!==void 0&&(u&2||u&4)&&Wb(r,t,h),a=a.next}while(a!==i)}Ah(e,t,r);break;case 1:if(!ea&&(pp(r,t),i=r.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=r.memoizedProps,i.state=r.memoizedState,i.componentWillUnmount()}catch(o){As(r,t,o)}Ah(e,t,r);break;case 21:Ah(e,t,r);break;case 22:r.mode&1?(ea=(i=ea)||r.memoizedState!==null,Ah(e,t,r),ea=i):Ah(e,t,r);break;default:Ah(e,t,r)}}function i4(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new b8),t.forEach(function(i){var a=M8.bind(null,e,i);r.has(i)||(r.add(i),i.then(a,a))})}}function FA(e,t){var r=t.deletions;if(r!==null)for(var i=0;i<r.length;i++){var a=r[i];try{var u=e,h=t,o=h;e:for(;o!==null;){switch(o.tag){case 5:xo=o.stateNode,OA=!1;break e;case 3:xo=o.stateNode.containerInfo,OA=!0;break e;case 4:xo=o.stateNode.containerInfo,OA=!0;break e}o=o.return}if(xo===null)throw Error(or(160));OP(u,h,a),xo=null,OA=!1;var g=a.alternate;g!==null&&(g.return=null),a.return=null}catch(y){As(a,t,y)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)zP(t,e),t=t.sibling}function zP(e,t){var r=e.alternate,i=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(FA(t,e),_c(e),i&4){try{wg(3,e,e.return),Z1(3,e)}catch(U){As(e,e.return,U)}try{wg(5,e,e.return)}catch(U){As(e,e.return,U)}}break;case 1:FA(t,e),_c(e),i&512&&r!==null&&pp(r,r.return);break;case 5:if(FA(t,e),_c(e),i&512&&r!==null&&pp(r,r.return),e.flags&32){var a=e.stateNode;try{Ng(a,"")}catch(U){As(e,e.return,U)}}if(i&4&&(a=e.stateNode,a!=null)){var u=e.memoizedProps,h=r!==null?r.memoizedProps:u,o=e.type,g=e.updateQueue;if(e.updateQueue=null,g!==null)try{o==="input"&&u.type==="radio"&&u.name!=null&&A3(a,u),bb(o,h);var y=bb(o,u);for(h=0;h<g.length;h+=2){var C=g[h],I=g[h+1];C==="style"?f3(a,I):C==="dangerouslySetInnerHTML"?h3(a,I):C==="children"?Ng(a,I):MB(a,C,I,y)}switch(o){case"input":yb(a,u);break;case"textarea":c3(a,u);break;case"select":var F=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!u.multiple;var b=u.value;b!=null?_p(a,!!u.multiple,b,!1):F!==!!u.multiple&&(u.defaultValue!=null?_p(a,!!u.multiple,u.defaultValue,!0):_p(a,!!u.multiple,u.multiple?[]:"",!1))}a[Gg]=u}catch(U){As(e,e.return,U)}}break;case 6:if(FA(t,e),_c(e),i&4){if(e.stateNode===null)throw Error(or(162));a=e.stateNode,u=e.memoizedProps;try{a.nodeValue=u}catch(U){As(e,e.return,U)}}break;case 3:if(FA(t,e),_c(e),i&4&&r!==null&&r.memoizedState.isDehydrated)try{zg(t.containerInfo)}catch(U){As(e,e.return,U)}break;case 4:FA(t,e),_c(e);break;case 13:FA(t,e),_c(e),a=e.child,a.flags&8192&&(u=a.memoizedState!==null,a.stateNode.isHidden=u,!u||a.alternate!==null&&a.alternate.memoizedState!==null||(h5=_s())),i&4&&i4(e);break;case 22:if(C=r!==null&&r.memoizedState!==null,e.mode&1?(ea=(y=ea)||C,FA(t,e),ea=y):FA(t,e),_c(e),i&8192){if(y=e.memoizedState!==null,(e.stateNode.isHidden=y)&&!C&&e.mode&1)for(Fr=e,C=e.child;C!==null;){for(I=Fr=C;Fr!==null;){switch(F=Fr,b=F.child,F.tag){case 0:case 11:case 14:case 15:wg(4,F,F.return);break;case 1:pp(F,F.return);var N=F.stateNode;if(typeof N.componentWillUnmount=="function"){i=F,r=F.return;try{t=i,N.props=t.memoizedProps,N.state=t.memoizedState,N.componentWillUnmount()}catch(U){As(i,r,U)}}break;case 5:pp(F,F.return);break;case 22:if(F.memoizedState!==null){o4(I);continue}}b!==null?(b.return=F,Fr=b):o4(I)}C=C.sibling}e:for(C=null,I=e;;){if(I.tag===5){if(C===null){C=I;try{a=I.stateNode,y?(u=a.style,typeof u.setProperty=="function"?u.setProperty("display","none","important"):u.display="none"):(o=I.stateNode,g=I.memoizedProps.style,h=g!=null&&g.hasOwnProperty("display")?g.display:null,o.style.display=d3("display",h))}catch(U){As(e,e.return,U)}}}else if(I.tag===6){if(C===null)try{I.stateNode.nodeValue=y?"":I.memoizedProps}catch(U){As(e,e.return,U)}}else if((I.tag!==22&&I.tag!==23||I.memoizedState===null||I===e)&&I.child!==null){I.child.return=I,I=I.child;continue}if(I===e)break e;for(;I.sibling===null;){if(I.return===null||I.return===e)break e;C===I&&(C=null),I=I.return}C===I&&(C=null),I.sibling.return=I.return,I=I.sibling}}break;case 19:FA(t,e),_c(e),i&4&&i4(e);break;case 21:break;default:FA(t,e),_c(e)}}function _c(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if(QP(r)){var i=r;break e}r=r.return}throw Error(or(160))}switch(i.tag){case 5:var a=i.stateNode;i.flags&32&&(Ng(a,""),i.flags&=-33);var u=n4(e);Jb(e,u,a);break;case 3:case 4:var h=i.stateNode.containerInfo,o=n4(e);Yb(e,o,h);break;default:throw Error(or(161))}}catch(g){As(e,e.return,g)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function C8(e,t,r){Fr=e,HP(e)}function HP(e,t,r){for(var i=(e.mode&1)!==0;Fr!==null;){var a=Fr,u=a.child;if(a.tag===22&&i){var h=a.memoizedState!==null||gy;if(!h){var o=a.alternate,g=o!==null&&o.memoizedState!==null||ea;o=gy;var y=ea;if(gy=h,(ea=g)&&!y)for(Fr=a;Fr!==null;)h=Fr,g=h.child,h.tag===22&&h.memoizedState!==null?a4(a):g!==null?(g.return=h,Fr=g):a4(a);for(;u!==null;)Fr=u,HP(u),u=u.sibling;Fr=a,gy=o,ea=y}s4(e)}else a.subtreeFlags&8772&&u!==null?(u.return=a,Fr=u):s4(e)}}function s4(e){for(;Fr!==null;){var t=Fr;if(t.flags&8772){var r=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:ea||Z1(5,t);break;case 1:var i=t.stateNode;if(t.flags&4&&!ea)if(r===null)i.componentDidMount();else{var a=t.elementType===t.type?r.memoizedProps:UA(t.type,r.memoizedProps);i.componentDidUpdate(a,r.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var u=t.updateQueue;u!==null&&jE(t,u,i);break;case 3:var h=t.updateQueue;if(h!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}jE(t,h,r)}break;case 5:var o=t.stateNode;if(r===null&&t.flags&4){r=o;var g=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":g.autoFocus&&r.focus();break;case"img":g.src&&(r.src=g.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var y=t.alternate;if(y!==null){var C=y.memoizedState;if(C!==null){var I=C.dehydrated;I!==null&&zg(I)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(or(163))}ea||t.flags&512&&Xb(t)}catch(F){As(t,t.return,F)}}if(t===e){Fr=null;break}if(r=t.sibling,r!==null){r.return=t.return,Fr=r;break}Fr=t.return}}function o4(e){for(;Fr!==null;){var t=Fr;if(t===e){Fr=null;break}var r=t.sibling;if(r!==null){r.return=t.return,Fr=r;break}Fr=t.return}}function a4(e){for(;Fr!==null;){var t=Fr;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{Z1(4,t)}catch(g){As(t,r,g)}break;case 1:var i=t.stateNode;if(typeof i.componentDidMount=="function"){var a=t.return;try{i.componentDidMount()}catch(g){As(t,a,g)}}var u=t.return;try{Xb(t)}catch(g){As(t,u,g)}break;case 5:var h=t.return;try{Xb(t)}catch(g){As(t,h,g)}}}catch(g){As(t,t.return,g)}if(t===e){Fr=null;break}var o=t.sibling;if(o!==null){o.return=t.return,Fr=o;break}Fr=t.return}}var S8=Math.ceil,n1=Qu.ReactCurrentDispatcher,c5=Qu.ReactCurrentOwner,Jl=Qu.ReactCurrentBatchConfig,Dn=0,ho=null,Ms=null,So=0,wl=0,mp=ld(0),Ws=0,Yg=null,of=0,W1=0,u5=0,xg=null,Va=null,h5=0,Yp=1/0,bu=null,i1=!1,e2=null,jh=null,yy=!1,Ph=null,s1=0,bg=0,t2=null,vv=-1,_v=0;function xa(){return Dn&6?_s():vv!==-1?vv:vv=_s()}function Vh(e){return e.mode&1?Dn&2&&So!==0?So&-So:A8.transition!==null?(_v===0&&(_v=S3()),_v):(e=ti,e!==0||(e=window.event,e=e===void 0?16:M3(e.type)),e):1}function VA(e,t,r,i){if(50<bg)throw bg=0,t2=null,Error(or(185));x0(e,r,i),(!(Dn&2)||e!==ho)&&(e===ho&&(!(Dn&2)&&(W1|=r),Ws===4&&bh(e,So)),Wa(e,i),r===1&&Dn===0&&!(t.mode&1)&&(Yp=_s()+500,G1&&Ad()))}function Wa(e,t){var r=e.callbackNode;AQ(e,t);var i=Hv(e,e===ho?So:0);if(i===0)r!==null&&mE(r),e.callbackNode=null,e.callbackPriority=0;else if(t=i&-i,e.callbackPriority!==t){if(r!=null&&mE(r),t===1)e.tag===0?l8(l4.bind(null,e)):Y3(l4.bind(null,e)),i8(function(){!(Dn&6)&&Ad()}),r=null;else{switch(E3(i)){case 1:r=DB;break;case 4:r=B3;break;case 16:r=zv;break;case 536870912:r=C3;break;default:r=zv}r=WP(r,jP.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function jP(e,t){if(vv=-1,_v=0,Dn&6)throw Error(or(327));var r=e.callbackNode;if(Cp()&&e.callbackNode!==r)return null;var i=Hv(e,e===ho?So:0);if(i===0)return null;if(i&30||i&e.expiredLanes||t)t=o1(e,i);else{t=i;var a=Dn;Dn|=2;var u=KP();(ho!==e||So!==t)&&(bu=null,Yp=_s()+500,Wd(e,t));do try{F8();break}catch(o){VP(e,o)}while(!0);XB(),n1.current=u,Dn=a,Ms!==null?t=0:(ho=null,So=0,t=Ws)}if(t!==0){if(t===2&&(a=Ib(e),a!==0&&(i=a,t=r2(e,a))),t===1)throw r=Yg,Wd(e,0),bh(e,i),Wa(e,_s()),r;if(t===6)bh(e,i);else{if(a=e.current.alternate,!(i&30)&&!E8(a)&&(t=o1(e,i),t===2&&(u=Ib(e),u!==0&&(i=u,t=r2(e,u))),t===1))throw r=Yg,Wd(e,0),bh(e,i),Wa(e,_s()),r;switch(e.finishedWork=a,e.finishedLanes=i,t){case 0:case 1:throw Error(or(345));case 2:Ld(e,Va,bu);break;case 3:if(bh(e,i),(i&130023424)===i&&(t=h5+500-_s(),10<t)){if(Hv(e,0)!==0)break;if(a=e.suspendedLanes,(a&i)!==i){xa(),e.pingedLanes|=e.suspendedLanes&a;break}e.timeoutHandle=Rb(Ld.bind(null,e,Va,bu),t);break}Ld(e,Va,bu);break;case 4:if(bh(e,i),(i&4194240)===i)break;for(t=e.eventTimes,a=-1;0<i;){var h=31-jA(i);u=1<<h,h=t[h],h>a&&(a=h),i&=~u}if(i=a,i=_s()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*S8(i/1960))-i,10<i){e.timeoutHandle=Rb(Ld.bind(null,e,Va,bu),i);break}Ld(e,Va,bu);break;case 5:Ld(e,Va,bu);break;default:throw Error(or(329))}}}return Wa(e,_s()),e.callbackNode===r?jP.bind(null,e):null}function r2(e,t){var r=xg;return e.current.memoizedState.isDehydrated&&(Wd(e,t).flags|=256),e=o1(e,t),e!==2&&(t=Va,Va=r,t!==null&&n2(t)),e}function n2(e){Va===null?Va=e:Va.push.apply(Va,e)}function E8(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var i=0;i<r.length;i++){var a=r[i],u=a.getSnapshot;a=a.value;try{if(!KA(u(),a))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function bh(e,t){for(t&=~u5,t&=~W1,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-jA(t),i=1<<r;e[r]=-1,t&=~i}}function l4(e){if(Dn&6)throw Error(or(327));Cp();var t=Hv(e,0);if(!(t&1))return Wa(e,_s()),null;var r=o1(e,t);if(e.tag!==0&&r===2){var i=Ib(e);i!==0&&(t=i,r=r2(e,i))}if(r===1)throw r=Yg,Wd(e,0),bh(e,t),Wa(e,_s()),r;if(r===6)throw Error(or(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Ld(e,Va,bu),Wa(e,_s()),null}function d5(e,t){var r=Dn;Dn|=1;try{return e(t)}finally{Dn=r,Dn===0&&(Yp=_s()+500,G1&&Ad())}}function af(e){Ph!==null&&Ph.tag===0&&!(Dn&6)&&Cp();var t=Dn;Dn|=1;var r=Jl.transition,i=ti;try{if(Jl.transition=null,ti=1,e)return e()}finally{ti=i,Jl.transition=r,Dn=t,!(Dn&6)&&Ad()}}function f5(){wl=mp.current,ki(mp)}function Wd(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,n8(r)),Ms!==null)for(r=Ms.return;r!==null;){var i=r;switch(qB(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&$v();break;case 3:Wp(),ki(qa),ki(na),n5();break;case 5:r5(i);break;case 4:Wp();break;case 13:ki(Xi);break;case 19:ki(Xi);break;case 10:YB(i.type._context);break;case 22:case 23:f5()}r=r.return}if(ho=e,Ms=e=Kh(e.current,null),So=wl=t,Ws=0,Yg=null,u5=W1=of=0,Va=xg=null,Nd!==null){for(t=0;t<Nd.length;t++)if(r=Nd[t],i=r.interleaved,i!==null){r.interleaved=null;var a=i.next,u=r.pending;if(u!==null){var h=u.next;u.next=a,i.next=h}r.pending=i}Nd=null}return e}function VP(e,t){do{var r=Ms;try{if(XB(),mv.current=r1,t1){for(var i=Yi.memoizedState;i!==null;){var a=i.queue;a!==null&&(a.pending=null),i=i.next}t1=!1}if(sf=0,co=qs=Yi=null,_g=!1,Zg=0,c5.current=null,r===null||r.return===null){Ws=1,Yg=t,Ms=null;break}e:{var u=e,h=r.return,o=r,g=t;if(t=So,o.flags|=32768,g!==null&&typeof g=="object"&&typeof g.then=="function"){var y=g,C=o,I=C.tag;if(!(C.mode&1)&&(I===0||I===11||I===15)){var F=C.alternate;F?(C.updateQueue=F.updateQueue,C.memoizedState=F.memoizedState,C.lanes=F.lanes):(C.updateQueue=null,C.memoizedState=null)}var b=ZE(h);if(b!==null){b.flags&=-257,WE(b,h,o,u,t),b.mode&1&&qE(u,y,t),t=b,g=y;var N=t.updateQueue;if(N===null){var U=new Set;U.add(g),t.updateQueue=U}else N.add(g);break e}else{if(!(t&1)){qE(u,y,t),p5();break e}g=Error(or(426))}}else if(Oi&&o.mode&1){var H=ZE(h);if(H!==null){!(H.flags&65536)&&(H.flags|=256),WE(H,h,o,u,t),ZB(Xp(g,o));break e}}u=g=Xp(g,o),Ws!==4&&(Ws=2),xg===null?xg=[u]:xg.push(u),u=h;do{switch(u.tag){case 3:u.flags|=65536,t&=-t,u.lanes|=t;var k=EP(u,g,t);HE(u,k);break e;case 1:o=g;var R=u.type,V=u.stateNode;if(!(u.flags&128)&&(typeof R.getDerivedStateFromError=="function"||V!==null&&typeof V.componentDidCatch=="function"&&(jh===null||!jh.has(V)))){u.flags|=65536,t&=-t,u.lanes|=t;var W=IP(u,o,t);HE(u,W);break e}}u=u.return}while(u!==null)}$P(r)}catch(se){t=se,Ms===r&&r!==null&&(Ms=r=r.return);continue}break}while(!0)}function KP(){var e=n1.current;return n1.current=r1,e===null?r1:e}function p5(){(Ws===0||Ws===3||Ws===2)&&(Ws=4),ho===null||!(of&268435455)&&!(W1&268435455)||bh(ho,So)}function o1(e,t){var r=Dn;Dn|=2;var i=KP();(ho!==e||So!==t)&&(bu=null,Wd(e,t));do try{I8();break}catch(a){VP(e,a)}while(!0);if(XB(),Dn=r,n1.current=i,Ms!==null)throw Error(or(261));return ho=null,So=0,Ws}function I8(){for(;Ms!==null;)GP(Ms)}function F8(){for(;Ms!==null&&!eQ();)GP(Ms)}function GP(e){var t=ZP(e.alternate,e,wl);e.memoizedProps=e.pendingProps,t===null?$P(e):Ms=t,c5.current=null}function $P(e){var t=e;do{var r=t.alternate;if(e=t.return,t.flags&32768){if(r=x8(r,t),r!==null){r.flags&=32767,Ms=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Ws=6,Ms=null;return}}else if(r=w8(r,t,wl),r!==null){Ms=r;return}if(t=t.sibling,t!==null){Ms=t;return}Ms=t=e}while(t!==null);Ws===0&&(Ws=5)}function Ld(e,t,r){var i=ti,a=Jl.transition;try{Jl.transition=null,ti=1,T8(e,t,r,i)}finally{Jl.transition=a,ti=i}return null}function T8(e,t,r,i){do Cp();while(Ph!==null);if(Dn&6)throw Error(or(327));r=e.finishedWork;var a=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(or(177));e.callbackNode=null,e.callbackPriority=0;var u=r.lanes|r.childLanes;if(cQ(e,u),e===ho&&(Ms=ho=null,So=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||yy||(yy=!0,WP(zv,function(){return Cp(),null})),u=(r.flags&15990)!==0,r.subtreeFlags&15990||u){u=Jl.transition,Jl.transition=null;var h=ti;ti=1;var o=Dn;Dn|=4,c5.current=null,B8(e,r),zP(r,e),WQ(kb),jv=!!Mb,kb=Mb=null,e.current=r,C8(r),tQ(),Dn=o,ti=h,Jl.transition=u}else e.current=r;if(yy&&(yy=!1,Ph=e,s1=a),u=e.pendingLanes,u===0&&(jh=null),iQ(r.stateNode),Wa(e,_s()),t!==null)for(i=e.onRecoverableError,r=0;r<t.length;r++)a=t[r],i(a.value,{componentStack:a.stack,digest:a.digest});if(i1)throw i1=!1,e=e2,e2=null,e;return s1&1&&e.tag!==0&&Cp(),u=e.pendingLanes,u&1?e===t2?bg++:(bg=0,t2=e):bg=0,Ad(),null}function Cp(){if(Ph!==null){var e=E3(s1),t=Jl.transition,r=ti;try{if(Jl.transition=null,ti=16>e?16:e,Ph===null)var i=!1;else{if(e=Ph,Ph=null,s1=0,Dn&6)throw Error(or(331));var a=Dn;for(Dn|=4,Fr=e.current;Fr!==null;){var u=Fr,h=u.child;if(Fr.flags&16){var o=u.deletions;if(o!==null){for(var g=0;g<o.length;g++){var y=o[g];for(Fr=y;Fr!==null;){var C=Fr;switch(C.tag){case 0:case 11:case 15:wg(8,C,u)}var I=C.child;if(I!==null)I.return=C,Fr=I;else for(;Fr!==null;){C=Fr;var F=C.sibling,b=C.return;if(DP(C),C===y){Fr=null;break}if(F!==null){F.return=b,Fr=F;break}Fr=b}}}var N=u.alternate;if(N!==null){var U=N.child;if(U!==null){N.child=null;do{var H=U.sibling;U.sibling=null,U=H}while(U!==null)}}Fr=u}}if(u.subtreeFlags&2064&&h!==null)h.return=u,Fr=h;else e:for(;Fr!==null;){if(u=Fr,u.flags&2048)switch(u.tag){case 0:case 11:case 15:wg(9,u,u.return)}var k=u.sibling;if(k!==null){k.return=u.return,Fr=k;break e}Fr=u.return}}var R=e.current;for(Fr=R;Fr!==null;){h=Fr;var V=h.child;if(h.subtreeFlags&2064&&V!==null)V.return=h,Fr=V;else e:for(h=R;Fr!==null;){if(o=Fr,o.flags&2048)try{switch(o.tag){case 0:case 11:case 15:Z1(9,o)}}catch(se){As(o,o.return,se)}if(o===h){Fr=null;break e}var W=o.sibling;if(W!==null){W.return=o.return,Fr=W;break e}Fr=o.return}}if(Dn=a,Ad(),Mc&&typeof Mc.onPostCommitFiberRoot=="function")try{Mc.onPostCommitFiberRoot(z1,e)}catch{}i=!0}return i}finally{ti=r,Jl.transition=t}}return!1}function A4(e,t,r){t=Xp(r,t),t=EP(e,t,1),e=Hh(e,t,1),t=xa(),e!==null&&(x0(e,1,t),Wa(e,t))}function As(e,t,r){if(e.tag===3)A4(e,e,r);else for(;t!==null;){if(t.tag===3){A4(t,e,r);break}else if(t.tag===1){var i=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(jh===null||!jh.has(i))){e=Xp(r,e),e=IP(t,e,1),t=Hh(t,e,1),e=xa(),t!==null&&(x0(t,1,e),Wa(t,e));break}}t=t.return}}function P8(e,t,r){var i=e.pingCache;i!==null&&i.delete(t),t=xa(),e.pingedLanes|=e.suspendedLanes&r,ho===e&&(So&r)===r&&(Ws===4||Ws===3&&(So&130023424)===So&&500>_s()-h5?Wd(e,0):u5|=r),Wa(e,t)}function qP(e,t){t===0&&(e.mode&1?(t=ly,ly<<=1,!(ly&130023424)&&(ly=4194304)):t=1);var r=xa();e=ku(e,t),e!==null&&(x0(e,t,r),Wa(e,r))}function L8(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),qP(e,r)}function M8(e,t){var r=0;switch(e.tag){case 13:var i=e.stateNode,a=e.memoizedState;a!==null&&(r=a.retryLane);break;case 19:i=e.stateNode;break;default:throw Error(or(314))}i!==null&&i.delete(t),qP(e,r)}var ZP;ZP=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||qa.current)Ka=!0;else{if(!(e.lanes&r)&&!(t.flags&128))return Ka=!1,_8(e,t,r);Ka=!!(e.flags&131072)}else Ka=!1,Oi&&t.flags&1048576&&J3(t,Wv,t.index);switch(t.lanes=0,t.tag){case 2:var i=t.type;yv(e,t),e=t.pendingProps;var a=$p(t,na.current);Bp(t,r),a=s5(null,t,i,e,a,r);var u=o5();return t.flags|=1,typeof a=="object"&&a!==null&&typeof a.render=="function"&&a.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Za(i)?(u=!0,qv(t)):u=!1,t.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,e5(t),a.updater=q1,t.stateNode=a,a._reactInternals=t,jb(t,i,e,r),t=Gb(null,t,i,!0,u,r)):(t.tag=0,Oi&&u&&$B(t),va(null,t,a,r),t=t.child),t;case 16:i=t.elementType;e:{switch(yv(e,t),e=t.pendingProps,a=i._init,i=a(i._payload),t.type=i,a=t.tag=U8(i),e=UA(i,e),a){case 0:t=Kb(null,t,i,e,r);break e;case 1:t=JE(null,t,i,e,r);break e;case 11:t=XE(null,t,i,e,r);break e;case 14:t=YE(null,t,i,UA(i.type,e),r);break e}throw Error(or(306,i,""))}return t;case 0:return i=t.type,a=t.pendingProps,a=t.elementType===i?a:UA(i,a),Kb(e,t,i,a,r);case 1:return i=t.type,a=t.pendingProps,a=t.elementType===i?a:UA(i,a),JE(e,t,i,a,r);case 3:e:{if(LP(t),e===null)throw Error(or(387));i=t.pendingProps,u=t.memoizedState,a=u.element,sP(e,t),Jv(t,i,null,r);var h=t.memoizedState;if(i=h.element,u.isDehydrated)if(u={element:i,isDehydrated:!1,cache:h.cache,pendingSuspenseBoundaries:h.pendingSuspenseBoundaries,transitions:h.transitions},t.updateQueue.baseState=u,t.memoizedState=u,t.flags&256){a=Xp(Error(or(423)),t),t=e4(e,t,i,r,a);break e}else if(i!==a){a=Xp(Error(or(424)),t),t=e4(e,t,i,r,a);break e}else for(bl=zh(t.stateNode.containerInfo.firstChild),Sl=t,Oi=!0,zA=null,r=nP(t,null,i,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(qp(),i===a){t=Uu(e,t,r);break e}va(e,t,i,r)}t=t.child}return t;case 5:return oP(t),e===null&&Ob(t),i=t.type,a=t.pendingProps,u=e!==null?e.memoizedProps:null,h=a.children,Ub(i,a)?h=null:u!==null&&Ub(i,u)&&(t.flags|=32),PP(e,t),va(e,t,h,r),t.child;case 6:return e===null&&Ob(t),null;case 13:return MP(e,t,r);case 4:return t5(t,t.stateNode.containerInfo),i=t.pendingProps,e===null?t.child=Zp(t,null,i,r):va(e,t,i,r),t.child;case 11:return i=t.type,a=t.pendingProps,a=t.elementType===i?a:UA(i,a),XE(e,t,i,a,r);case 7:return va(e,t,t.pendingProps,r),t.child;case 8:return va(e,t,t.pendingProps.children,r),t.child;case 12:return va(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(i=t.type._context,a=t.pendingProps,u=t.memoizedProps,h=a.value,Si(Xv,i._currentValue),i._currentValue=h,u!==null)if(KA(u.value,h)){if(u.children===a.children&&!qa.current){t=Uu(e,t,r);break e}}else for(u=t.child,u!==null&&(u.return=t);u!==null;){var o=u.dependencies;if(o!==null){h=u.child;for(var g=o.firstContext;g!==null;){if(g.context===i){if(u.tag===1){g=Tu(-1,r&-r),g.tag=2;var y=u.updateQueue;if(y!==null){y=y.shared;var C=y.pending;C===null?g.next=g:(g.next=C.next,C.next=g),y.pending=g}}u.lanes|=r,g=u.alternate,g!==null&&(g.lanes|=r),zb(u.return,r,t),o.lanes|=r;break}g=g.next}}else if(u.tag===10)h=u.type===t.type?null:u.child;else if(u.tag===18){if(h=u.return,h===null)throw Error(or(341));h.lanes|=r,o=h.alternate,o!==null&&(o.lanes|=r),zb(h,r,t),h=u.sibling}else h=u.child;if(h!==null)h.return=u;else for(h=u;h!==null;){if(h===t){h=null;break}if(u=h.sibling,u!==null){u.return=h.return,h=u;break}h=h.return}u=h}va(e,t,a.children,r),t=t.child}return t;case 9:return a=t.type,i=t.pendingProps.children,Bp(t,r),a=eA(a),i=i(a),t.flags|=1,va(e,t,i,r),t.child;case 14:return i=t.type,a=UA(i,t.pendingProps),a=UA(i.type,a),YE(e,t,i,a,r);case 15:return FP(e,t,t.type,t.pendingProps,r);case 17:return i=t.type,a=t.pendingProps,a=t.elementType===i?a:UA(i,a),yv(e,t),t.tag=1,Za(i)?(e=!0,qv(t)):e=!1,Bp(t,r),SP(t,i,a),jb(t,i,a,r),Gb(null,t,i,!0,e,r);case 19:return kP(e,t,r);case 22:return TP(e,t,r)}throw Error(or(156,t.tag))};function WP(e,t){return b3(e,t)}function k8(e,t,r,i){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Wl(e,t,r,i){return new k8(e,t,r,i)}function m5(e){return e=e.prototype,!(!e||!e.isReactComponent)}function U8(e){if(typeof e=="function")return m5(e)?1:0;if(e!=null){if(e=e.$$typeof,e===UB)return 11;if(e===RB)return 14}return 2}function Kh(e,t){var r=e.alternate;return r===null?(r=Wl(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function wv(e,t,r,i,a,u){var h=2;if(i=e,typeof e=="function")m5(e)&&(h=1);else if(typeof e=="string")h=5;else e:switch(e){case op:return Xd(r.children,a,u,t);case kB:h=8,a|=8;break;case db:return e=Wl(12,r,t,a|2),e.elementType=db,e.lanes=u,e;case fb:return e=Wl(13,r,t,a),e.elementType=fb,e.lanes=u,e;case pb:return e=Wl(19,r,t,a),e.elementType=pb,e.lanes=u,e;case o3:return X1(r,a,u,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case i3:h=10;break e;case s3:h=9;break e;case UB:h=11;break e;case RB:h=14;break e;case vh:h=16,i=null;break e}throw Error(or(130,e==null?e:typeof e,""))}return t=Wl(h,r,t,a),t.elementType=e,t.type=i,t.lanes=u,t}function Xd(e,t,r,i){return e=Wl(7,e,i,t),e.lanes=r,e}function X1(e,t,r,i){return e=Wl(22,e,i,t),e.elementType=o3,e.lanes=r,e.stateNode={isHidden:!1},e}function rx(e,t,r){return e=Wl(6,e,null,t),e.lanes=r,e}function nx(e,t,r){return t=Wl(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function R8(e,t,r,i,a){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Nw(0),this.expirationTimes=Nw(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Nw(0),this.identifierPrefix=i,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function g5(e,t,r,i,a,u,h,o,g){return e=new R8(e,t,r,o,g),t===1?(t=1,u===!0&&(t|=8)):t=0,u=Wl(3,null,null,t),e.current=u,u.stateNode=e,u.memoizedState={element:i,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},e5(u),e}function N8(e,t,r){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:sp,key:i==null?null:""+i,children:e,containerInfo:t,implementation:r}}function XP(e){if(!e)return td;e=e._reactInternals;e:{if(pf(e)!==e||e.tag!==1)throw Error(or(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Za(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(or(171))}if(e.tag===1){var r=e.type;if(Za(r))return X3(e,r,t)}return t}function YP(e,t,r,i,a,u,h,o,g){return e=g5(r,i,!0,e,a,u,h,o,g),e.context=XP(null),r=e.current,i=xa(),a=Vh(r),u=Tu(i,a),u.callback=t??null,Hh(r,u,a),e.current.lanes=a,x0(e,a,i),Wa(e,i),e}function Y1(e,t,r,i){var a=t.current,u=xa(),h=Vh(a);return r=XP(r),t.context===null?t.context=r:t.pendingContext=r,t=Tu(u,h),t.payload={element:e},i=i===void 0?null:i,i!==null&&(t.callback=i),e=Hh(a,t,h),e!==null&&(VA(e,a,h,u),pv(e,a,h)),h}function a1(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function c4(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function y5(e,t){c4(e,t),(e=e.alternate)&&c4(e,t)}function D8(){return null}var JP=typeof reportError=="function"?reportError:function(e){console.error(e)};function v5(e){this._internalRoot=e}J1.prototype.render=v5.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(or(409));Y1(e,t,null,null)};J1.prototype.unmount=v5.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;af(function(){Y1(null,e,null,null)}),t[Mu]=null}};function J1(e){this._internalRoot=e}J1.prototype.unstable_scheduleHydration=function(e){if(e){var t=T3();e={blockedOn:null,target:e,priority:t};for(var r=0;r<xh.length&&t!==0&&t<xh[r].priority;r++);xh.splice(r,0,e),r===0&&L3(e)}};function _5(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function e_(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function u4(){}function Q8(e,t,r,i,a){if(a){if(typeof i=="function"){var u=i;i=function(){var y=a1(h);u.call(y)}}var h=YP(t,i,e,0,null,!1,!1,"",u4);return e._reactRootContainer=h,e[Mu]=h.current,Vg(e.nodeType===8?e.parentNode:e),af(),h}for(;a=e.lastChild;)e.removeChild(a);if(typeof i=="function"){var o=i;i=function(){var y=a1(g);o.call(y)}}var g=g5(e,0,!1,null,null,!1,!1,"",u4);return e._reactRootContainer=g,e[Mu]=g.current,Vg(e.nodeType===8?e.parentNode:e),af(function(){Y1(t,g,r,i)}),g}function t_(e,t,r,i,a){var u=r._reactRootContainer;if(u){var h=u;if(typeof a=="function"){var o=a;a=function(){var g=a1(h);o.call(g)}}Y1(t,h,e,a)}else h=Q8(r,t,e,a,i);return a1(h)}I3=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=ng(t.pendingLanes);r!==0&&(QB(t,r|1),Wa(t,_s()),!(Dn&6)&&(Yp=_s()+500,Ad()))}break;case 13:af(function(){var i=ku(e,1);if(i!==null){var a=xa();VA(i,e,1,a)}}),y5(e,1)}};OB=function(e){if(e.tag===13){var t=ku(e,134217728);if(t!==null){var r=xa();VA(t,e,134217728,r)}y5(e,134217728)}};F3=function(e){if(e.tag===13){var t=Vh(e),r=ku(e,t);if(r!==null){var i=xa();VA(r,e,t,i)}y5(e,t)}};T3=function(){return ti};P3=function(e,t){var r=ti;try{return ti=e,t()}finally{ti=r}};Cb=function(e,t,r){switch(t){case"input":if(yb(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var i=r[t];if(i!==e&&i.form===e.form){var a=K1(i);if(!a)throw Error(or(90));l3(i),yb(i,a)}}}break;case"textarea":c3(e,r);break;case"select":t=r.value,t!=null&&_p(e,!!r.multiple,t,!1)}};g3=d5;y3=af;var O8={usingClientEntryPoint:!1,Events:[B0,cp,K1,p3,m3,d5]},Km={findFiberByHostInstance:Rd,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},z8={bundleType:Km.bundleType,version:Km.version,rendererPackageName:Km.rendererPackageName,rendererConfig:Km.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Qu.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=w3(e),e===null?null:e.stateNode},findFiberByHostInstance:Km.findFiberByHostInstance||D8,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var vy=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!vy.isDisabled&&vy.supportsFiber)try{z1=vy.inject(z8),Mc=vy}catch{}}Fl.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=O8;Fl.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!_5(t))throw Error(or(200));return N8(e,t,null,r)};Fl.createRoot=function(e,t){if(!_5(e))throw Error(or(299));var r=!1,i="",a=JP;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(i=t.identifierPrefix),t.onRecoverableError!==void 0&&(a=t.onRecoverableError)),t=g5(e,1,!1,null,null,r,!1,i,a),e[Mu]=t.current,Vg(e.nodeType===8?e.parentNode:e),new v5(t)};Fl.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(or(188)):(e=Object.keys(e).join(","),Error(or(268,e)));return e=w3(t),e=e===null?null:e.stateNode,e};Fl.flushSync=function(e){return af(e)};Fl.hydrate=function(e,t,r){if(!e_(t))throw Error(or(200));return t_(null,e,t,!0,r)};Fl.hydrateRoot=function(e,t,r){if(!_5(e))throw Error(or(405));var i=r!=null&&r.hydratedSources||null,a=!1,u="",h=JP;if(r!=null&&(r.unstable_strictMode===!0&&(a=!0),r.identifierPrefix!==void 0&&(u=r.identifierPrefix),r.onRecoverableError!==void 0&&(h=r.onRecoverableError)),t=YP(t,null,e,1,r??null,a,!1,u,h),e[Mu]=t.current,Vg(e),i)for(e=0;e<i.length;e++)r=i[e],a=r._getVersion,a=a(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,a]:t.mutableSourceEagerHydrationData.push(r,a);return new J1(t)};Fl.render=function(e,t,r){if(!e_(t))throw Error(or(200));return t_(null,e,t,!1,r)};Fl.unmountComponentAtNode=function(e){if(!e_(e))throw Error(or(40));return e._reactRootContainer?(af(function(){t_(null,null,e,!1,function(){e._reactRootContainer=null,e[Mu]=null})}),!0):!1};Fl.unstable_batchedUpdates=d5;Fl.unstable_renderSubtreeIntoContainer=function(e,t,r,i){if(!e_(r))throw Error(or(200));if(e==null||e._reactInternals===void 0)throw Error(or(38));return t_(e,t,r,!1,i)};Fl.version="18.3.1-next-f1338f8080-20240426";function eL(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(eL)}catch(e){console.error(e)}}eL(),e3.exports=Fl;var mf=e3.exports;const tL=CB(mf);var rL,h4=mf;rL=h4.createRoot,h4.hydrateRoot;const H8=1,j8=1e6;let ix=0;function V8(){return ix=(ix+1)%Number.MAX_SAFE_INTEGER,ix.toString()}const sx=new Map,d4=e=>{if(sx.has(e))return;const t=setTimeout(()=>{sx.delete(e),Bg({type:"REMOVE_TOAST",toastId:e})},j8);sx.set(e,t)},K8=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,H8)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(r=>r.id===t.toast.id?{...r,...t.toast}:r)};case"DISMISS_TOAST":{const{toastId:r}=t;return r?d4(r):e.toasts.forEach(i=>{d4(i.id)}),{...e,toasts:e.toasts.map(i=>i.id===r||r===void 0?{...i,open:!1}:i)}}case"REMOVE_TOAST":return t.toastId===void 0?{...e,toasts:[]}:{...e,toasts:e.toasts.filter(r=>r.id!==t.toastId)}}},xv=[];let bv={toasts:[]};function Bg(e){bv=K8(bv,e),xv.forEach(t=>{t(bv)})}function G8({...e}){const t=V8(),r=a=>Bg({type:"UPDATE_TOAST",toast:{...a,id:t}}),i=()=>Bg({type:"DISMISS_TOAST",toastId:t});return Bg({type:"ADD_TOAST",toast:{...e,id:t,open:!0,onOpenChange:a=>{a||i()}}}),{id:t,dismiss:i,update:r}}function $8(){const[e,t]=re.useState(bv);return re.useEffect(()=>(xv.push(t),()=>{const r=xv.indexOf(t);r>-1&&xv.splice(r,1)}),[e]),{...e,toast:G8,dismiss:r=>Bg({type:"DISMISS_TOAST",toastId:r})}}function on(e,t,{checkForDefaultPrevented:r=!0}={}){return function(a){if(e==null||e(a),r===!1||!a.defaultPrevented)return t==null?void 0:t(a)}}function f4(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function nL(...e){return t=>{let r=!1;const i=e.map(a=>{const u=f4(a,t);return!r&&typeof u=="function"&&(r=!0),u});if(r)return()=>{for(let a=0;a<i.length;a++){const u=i[a];typeof u=="function"?u():f4(e[a],null)}}}}function ci(...e){return re.useCallback(nL(...e),e)}function Ou(e,t=[]){let r=[];function i(u,h){const o=re.createContext(h),g=r.length;r=[...r,h];const y=I=>{var k;const{scope:F,children:b,...N}=I,U=((k=F==null?void 0:F[e])==null?void 0:k[g])||o,H=re.useMemo(()=>N,Object.values(N));return X.jsx(U.Provider,{value:H,children:b})};y.displayName=u+"Provider";function C(I,F){var U;const b=((U=F==null?void 0:F[e])==null?void 0:U[g])||o,N=re.useContext(b);if(N)return N;if(h!==void 0)return h;throw new Error(`\`${I}\` must be used within \`${u}\``)}return[y,C]}const a=()=>{const u=r.map(h=>re.createContext(h));return function(o){const g=(o==null?void 0:o[e])||u;return re.useMemo(()=>({[`__scope${e}`]:{...o,[e]:g}}),[o,g])}};return a.scopeName=e,[i,q8(a,...t)]}function q8(...e){const t=e[0];if(e.length===1)return t;const r=()=>{const i=e.map(a=>({useScope:a(),scopeName:a.scopeName}));return function(u){const h=i.reduce((o,{useScope:g,scopeName:y})=>{const I=g(u)[`__scope${y}`];return{...o,...I}},{});return re.useMemo(()=>({[`__scope${t.scopeName}`]:h}),[h])}};return r.scopeName=t.scopeName,r}function Jg(e){const t=W8(e),r=re.forwardRef((i,a)=>{const{children:u,...h}=i,o=re.Children.toArray(u),g=o.find(Y8);if(g){const y=g.props.children,C=o.map(I=>I===g?re.Children.count(y)>1?re.Children.only(null):re.isValidElement(y)?y.props.children:null:I);return X.jsx(t,{...h,ref:a,children:re.isValidElement(y)?re.cloneElement(y,void 0,C):null})}return X.jsx(t,{...h,ref:a,children:u})});return r.displayName=`${e}.Slot`,r}var Z8=Jg("Slot");function W8(e){const t=re.forwardRef((r,i)=>{const{children:a,...u}=r;if(re.isValidElement(a)){const h=eO(a),o=J8(u,a.props);return a.type!==re.Fragment&&(o.ref=i?nL(i,h):h),re.cloneElement(a,o)}return re.Children.count(a)>1?re.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var iL=Symbol("radix.slottable");function X8(e){const t=({children:r})=>X.jsx(X.Fragment,{children:r});return t.displayName=`${e}.Slottable`,t.__radixId=iL,t}function Y8(e){return re.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===iL}function J8(e,t){const r={...t};for(const i in t){const a=e[i],u=t[i];/^on[A-Z]/.test(i)?a&&u?r[i]=(...o)=>{const g=u(...o);return a(...o),g}:a&&(r[i]=a):i==="style"?r[i]={...a,...u}:i==="className"&&(r[i]=[a,u].filter(Boolean).join(" "))}return{...e,...r}}function eO(e){var i,a;let t=(i=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:i.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(t=(a=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:a.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}function w5(e){const t=e+"CollectionProvider",[r,i]=Ou(t),[a,u]=r(t,{collectionRef:{current:null},itemMap:new Map}),h=U=>{const{scope:H,children:k}=U,R=hr.useRef(null),V=hr.useRef(new Map).current;return X.jsx(a,{scope:H,itemMap:V,collectionRef:R,children:k})};h.displayName=t;const o=e+"CollectionSlot",g=Jg(o),y=hr.forwardRef((U,H)=>{const{scope:k,children:R}=U,V=u(o,k),W=ci(H,V.collectionRef);return X.jsx(g,{ref:W,children:R})});y.displayName=o;const C=e+"CollectionItemSlot",I="data-radix-collection-item",F=Jg(C),b=hr.forwardRef((U,H)=>{const{scope:k,children:R,...V}=U,W=hr.useRef(null),se=ci(H,W),fe=u(C,k);return hr.useEffect(()=>(fe.itemMap.set(W,{ref:W,...V}),()=>void fe.itemMap.delete(W))),X.jsx(F,{[I]:"",ref:se,children:R})});b.displayName=C;function N(U){const H=u(e+"CollectionConsumer",U);return hr.useCallback(()=>{const R=H.collectionRef.current;if(!R)return[];const V=Array.from(R.querySelectorAll(`[${I}]`));return Array.from(H.itemMap.values()).sort((fe,ue)=>V.indexOf(fe.ref.current)-V.indexOf(ue.ref.current))},[H.collectionRef,H.itemMap])}return[{Provider:h,Slot:y,ItemSlot:b},N,i]}var tO=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],bn=tO.reduce((e,t)=>{const r=Jg(`Primitive.${t}`),i=re.forwardRef((a,u)=>{const{asChild:h,...o}=a,g=h?r:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),X.jsx(g,{...o,ref:u})});return i.displayName=`Primitive.${t}`,{...e,[t]:i}},{});function sL(e,t){e&&mf.flushSync(()=>e.dispatchEvent(t))}function rA(e){const t=re.useRef(e);return re.useEffect(()=>{t.current=e}),re.useMemo(()=>(...r)=>{var i;return(i=t.current)==null?void 0:i.call(t,...r)},[])}function rO(e,t=globalThis==null?void 0:globalThis.document){const r=rA(e);re.useEffect(()=>{const i=a=>{a.key==="Escape"&&r(a)};return t.addEventListener("keydown",i,{capture:!0}),()=>t.removeEventListener("keydown",i,{capture:!0})},[r,t])}var nO="DismissableLayer",i2="dismissableLayer.update",iO="dismissableLayer.pointerDownOutside",sO="dismissableLayer.focusOutside",p4,oL=re.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),r_=re.forwardRef((e,t)=>{const{disableOutsidePointerEvents:r=!1,onEscapeKeyDown:i,onPointerDownOutside:a,onFocusOutside:u,onInteractOutside:h,onDismiss:o,...g}=e,y=re.useContext(oL),[C,I]=re.useState(null),F=(C==null?void 0:C.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,b]=re.useState({}),N=ci(t,ue=>I(ue)),U=Array.from(y.layers),[H]=[...y.layersWithOutsidePointerEventsDisabled].slice(-1),k=U.indexOf(H),R=C?U.indexOf(C):-1,V=y.layersWithOutsidePointerEventsDisabled.size>0,W=R>=k,se=aO(ue=>{const ae=ue.target,Be=[...y.branches].some(Ue=>Ue.contains(ae));!W||Be||(a==null||a(ue),h==null||h(ue),ue.defaultPrevented||o==null||o())},F),fe=lO(ue=>{const ae=ue.target;[...y.branches].some(Ue=>Ue.contains(ae))||(u==null||u(ue),h==null||h(ue),ue.defaultPrevented||o==null||o())},F);return rO(ue=>{R===y.layers.size-1&&(i==null||i(ue),!ue.defaultPrevented&&o&&(ue.preventDefault(),o()))},F),re.useEffect(()=>{if(C)return r&&(y.layersWithOutsidePointerEventsDisabled.size===0&&(p4=F.body.style.pointerEvents,F.body.style.pointerEvents="none"),y.layersWithOutsidePointerEventsDisabled.add(C)),y.layers.add(C),m4(),()=>{r&&y.layersWithOutsidePointerEventsDisabled.size===1&&(F.body.style.pointerEvents=p4)}},[C,F,r,y]),re.useEffect(()=>()=>{C&&(y.layers.delete(C),y.layersWithOutsidePointerEventsDisabled.delete(C),m4())},[C,y]),re.useEffect(()=>{const ue=()=>b({});return document.addEventListener(i2,ue),()=>document.removeEventListener(i2,ue)},[]),X.jsx(bn.div,{...g,ref:N,style:{pointerEvents:V?W?"auto":"none":void 0,...e.style},onFocusCapture:on(e.onFocusCapture,fe.onFocusCapture),onBlurCapture:on(e.onBlurCapture,fe.onBlurCapture),onPointerDownCapture:on(e.onPointerDownCapture,se.onPointerDownCapture)})});r_.displayName=nO;var oO="DismissableLayerBranch",aL=re.forwardRef((e,t)=>{const r=re.useContext(oL),i=re.useRef(null),a=ci(t,i);return re.useEffect(()=>{const u=i.current;if(u)return r.branches.add(u),()=>{r.branches.delete(u)}},[r.branches]),X.jsx(bn.div,{...e,ref:a})});aL.displayName=oO;function aO(e,t=globalThis==null?void 0:globalThis.document){const r=rA(e),i=re.useRef(!1),a=re.useRef(()=>{});return re.useEffect(()=>{const u=o=>{if(o.target&&!i.current){let g=function(){lL(iO,r,y,{discrete:!0})};const y={originalEvent:o};o.pointerType==="touch"?(t.removeEventListener("click",a.current),a.current=g,t.addEventListener("click",a.current,{once:!0})):g()}else t.removeEventListener("click",a.current);i.current=!1},h=window.setTimeout(()=>{t.addEventListener("pointerdown",u)},0);return()=>{window.clearTimeout(h),t.removeEventListener("pointerdown",u),t.removeEventListener("click",a.current)}},[t,r]),{onPointerDownCapture:()=>i.current=!0}}function lO(e,t=globalThis==null?void 0:globalThis.document){const r=rA(e),i=re.useRef(!1);return re.useEffect(()=>{const a=u=>{u.target&&!i.current&&lL(sO,r,{originalEvent:u},{discrete:!1})};return t.addEventListener("focusin",a),()=>t.removeEventListener("focusin",a)},[t,r]),{onFocusCapture:()=>i.current=!0,onBlurCapture:()=>i.current=!1}}function m4(){const e=new CustomEvent(i2);document.dispatchEvent(e)}function lL(e,t,r,{discrete:i}){const a=r.originalEvent.target,u=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:r});t&&a.addEventListener(e,t,{once:!0}),i?sL(a,u):a.dispatchEvent(u)}var AO=r_,cO=aL,Io=globalThis!=null&&globalThis.document?re.useLayoutEffect:()=>{},uO="Portal",x5=re.forwardRef((e,t)=>{var o;const{container:r,...i}=e,[a,u]=re.useState(!1);Io(()=>u(!0),[]);const h=r||a&&((o=globalThis==null?void 0:globalThis.document)==null?void 0:o.body);return h?tL.createPortal(X.jsx(bn.div,{...i,ref:t}),h):null});x5.displayName=uO;function hO(e,t){return re.useReducer((r,i)=>t[r][i]??r,e)}var S0=e=>{const{present:t,children:r}=e,i=dO(t),a=typeof r=="function"?r({present:i.isPresent}):re.Children.only(r),u=ci(i.ref,fO(a));return typeof r=="function"||i.isPresent?re.cloneElement(a,{ref:u}):null};S0.displayName="Presence";function dO(e){const[t,r]=re.useState(),i=re.useRef(null),a=re.useRef(e),u=re.useRef("none"),h=e?"mounted":"unmounted",[o,g]=hO(h,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return re.useEffect(()=>{const y=_y(i.current);u.current=o==="mounted"?y:"none"},[o]),Io(()=>{const y=i.current,C=a.current;if(C!==e){const F=u.current,b=_y(y);e?g("MOUNT"):b==="none"||(y==null?void 0:y.display)==="none"?g("UNMOUNT"):g(C&&F!==b?"ANIMATION_OUT":"UNMOUNT"),a.current=e}},[e,g]),Io(()=>{if(t){let y;const C=t.ownerDocument.defaultView??window,I=b=>{const U=_y(i.current).includes(b.animationName);if(b.target===t&&U&&(g("ANIMATION_END"),!a.current)){const H=t.style.animationFillMode;t.style.animationFillMode="forwards",y=C.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=H)})}},F=b=>{b.target===t&&(u.current=_y(i.current))};return t.addEventListener("animationstart",F),t.addEventListener("animationcancel",I),t.addEventListener("animationend",I),()=>{C.clearTimeout(y),t.removeEventListener("animationstart",F),t.removeEventListener("animationcancel",I),t.removeEventListener("animationend",I)}}else g("ANIMATION_END")},[t,g]),{isPresent:["mounted","unmountSuspended"].includes(o),ref:re.useCallback(y=>{i.current=y?getComputedStyle(y):null,r(y)},[])}}function _y(e){return(e==null?void 0:e.animationName)||"none"}function fO(e){var i,a;let t=(i=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:i.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(t=(a=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:a.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}var pO=TB[" useInsertionEffect ".trim().toString()]||Io;function Jp({prop:e,defaultProp:t,onChange:r=()=>{},caller:i}){const[a,u,h]=mO({defaultProp:t,onChange:r}),o=e!==void 0,g=o?e:a;{const C=re.useRef(e!==void 0);re.useEffect(()=>{const I=C.current;I!==o&&console.warn(`${i} is changing from ${I?"controlled":"uncontrolled"} to ${o?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),C.current=o},[o,i])}const y=re.useCallback(C=>{var I;if(o){const F=gO(C)?C(e):C;F!==e&&((I=h.current)==null||I.call(h,F))}else u(C)},[o,e,u,h]);return[g,y]}function mO({defaultProp:e,onChange:t}){const[r,i]=re.useState(e),a=re.useRef(r),u=re.useRef(t);return pO(()=>{u.current=t},[t]),re.useEffect(()=>{var h;a.current!==r&&((h=u.current)==null||h.call(u,r),a.current=r)},[r,a]),[r,i,u]}function gO(e){return typeof e=="function"}var AL=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),yO="VisuallyHidden",n_=re.forwardRef((e,t)=>X.jsx(bn.span,{...e,ref:t,style:{...AL,...e.style}}));n_.displayName=yO;var vO=n_,b5="ToastProvider",[B5,_O,wO]=w5("Toast"),[cL,fre]=Ou("Toast",[wO]),[xO,i_]=cL(b5),uL=e=>{const{__scopeToast:t,label:r="Notification",duration:i=5e3,swipeDirection:a="right",swipeThreshold:u=50,children:h}=e,[o,g]=re.useState(null),[y,C]=re.useState(0),I=re.useRef(!1),F=re.useRef(!1);return r.trim()||console.error(`Invalid prop \`label\` supplied to \`${b5}\`. Expected non-empty \`string\`.`),X.jsx(B5.Provider,{scope:t,children:X.jsx(xO,{scope:t,label:r,duration:i,swipeDirection:a,swipeThreshold:u,toastCount:y,viewport:o,onViewportChange:g,onToastAdd:re.useCallback(()=>C(b=>b+1),[]),onToastRemove:re.useCallback(()=>C(b=>b-1),[]),isFocusedToastEscapeKeyDownRef:I,isClosePausedRef:F,children:h})})};uL.displayName=b5;var hL="ToastViewport",bO=["F8"],s2="toast.viewportPause",o2="toast.viewportResume",dL=re.forwardRef((e,t)=>{const{__scopeToast:r,hotkey:i=bO,label:a="Notifications ({hotkey})",...u}=e,h=i_(hL,r),o=_O(r),g=re.useRef(null),y=re.useRef(null),C=re.useRef(null),I=re.useRef(null),F=ci(t,I,h.onViewportChange),b=i.join("+").replace(/Key/g,"").replace(/Digit/g,""),N=h.toastCount>0;re.useEffect(()=>{const H=k=>{var V;i.length!==0&&i.every(W=>k[W]||k.code===W)&&((V=I.current)==null||V.focus())};return document.addEventListener("keydown",H),()=>document.removeEventListener("keydown",H)},[i]),re.useEffect(()=>{const H=g.current,k=I.current;if(N&&H&&k){const R=()=>{if(!h.isClosePausedRef.current){const fe=new CustomEvent(s2);k.dispatchEvent(fe),h.isClosePausedRef.current=!0}},V=()=>{if(h.isClosePausedRef.current){const fe=new CustomEvent(o2);k.dispatchEvent(fe),h.isClosePausedRef.current=!1}},W=fe=>{!H.contains(fe.relatedTarget)&&V()},se=()=>{H.contains(document.activeElement)||V()};return H.addEventListener("focusin",R),H.addEventListener("focusout",W),H.addEventListener("pointermove",R),H.addEventListener("pointerleave",se),window.addEventListener("blur",R),window.addEventListener("focus",V),()=>{H.removeEventListener("focusin",R),H.removeEventListener("focusout",W),H.removeEventListener("pointermove",R),H.removeEventListener("pointerleave",se),window.removeEventListener("blur",R),window.removeEventListener("focus",V)}}},[N,h.isClosePausedRef]);const U=re.useCallback(({tabbingDirection:H})=>{const R=o().map(V=>{const W=V.ref.current,se=[W,...RO(W)];return H==="forwards"?se:se.reverse()});return(H==="forwards"?R.reverse():R).flat()},[o]);return re.useEffect(()=>{const H=I.current;if(H){const k=R=>{var se,fe,ue;const V=R.altKey||R.ctrlKey||R.metaKey;if(R.key==="Tab"&&!V){const ae=document.activeElement,Be=R.shiftKey;if(R.target===H&&Be){(se=y.current)==null||se.focus();return}const de=U({tabbingDirection:Be?"backwards":"forwards"}),Te=de.findIndex(we=>we===ae);ox(de.slice(Te+1))?R.preventDefault():Be?(fe=y.current)==null||fe.focus():(ue=C.current)==null||ue.focus()}};return H.addEventListener("keydown",k),()=>H.removeEventListener("keydown",k)}},[o,U]),X.jsxs(cO,{ref:g,role:"region","aria-label":a.replace("{hotkey}",b),tabIndex:-1,style:{pointerEvents:N?void 0:"none"},children:[N&&X.jsx(a2,{ref:y,onFocusFromOutsideViewport:()=>{const H=U({tabbingDirection:"forwards"});ox(H)}}),X.jsx(B5.Slot,{scope:r,children:X.jsx(bn.ol,{tabIndex:-1,...u,ref:F})}),N&&X.jsx(a2,{ref:C,onFocusFromOutsideViewport:()=>{const H=U({tabbingDirection:"backwards"});ox(H)}})]})});dL.displayName=hL;var fL="ToastFocusProxy",a2=re.forwardRef((e,t)=>{const{__scopeToast:r,onFocusFromOutsideViewport:i,...a}=e,u=i_(fL,r);return X.jsx(n_,{"aria-hidden":!0,tabIndex:0,...a,ref:t,style:{position:"fixed"},onFocus:h=>{var y;const o=h.relatedTarget;!((y=u.viewport)!=null&&y.contains(o))&&i()}})});a2.displayName=fL;var E0="Toast",BO="toast.swipeStart",CO="toast.swipeMove",SO="toast.swipeCancel",EO="toast.swipeEnd",pL=re.forwardRef((e,t)=>{const{forceMount:r,open:i,defaultOpen:a,onOpenChange:u,...h}=e,[o,g]=Jp({prop:i,defaultProp:a??!0,onChange:u,caller:E0});return X.jsx(S0,{present:r||o,children:X.jsx(TO,{open:o,...h,ref:t,onClose:()=>g(!1),onPause:rA(e.onPause),onResume:rA(e.onResume),onSwipeStart:on(e.onSwipeStart,y=>{y.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:on(e.onSwipeMove,y=>{const{x:C,y:I}=y.detail.delta;y.currentTarget.setAttribute("data-swipe","move"),y.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${C}px`),y.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${I}px`)}),onSwipeCancel:on(e.onSwipeCancel,y=>{y.currentTarget.setAttribute("data-swipe","cancel"),y.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),y.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),y.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),y.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:on(e.onSwipeEnd,y=>{const{x:C,y:I}=y.detail.delta;y.currentTarget.setAttribute("data-swipe","end"),y.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),y.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),y.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${C}px`),y.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${I}px`),g(!1)})})})});pL.displayName=E0;var[IO,FO]=cL(E0,{onClose(){}}),TO=re.forwardRef((e,t)=>{const{__scopeToast:r,type:i="foreground",duration:a,open:u,onClose:h,onEscapeKeyDown:o,onPause:g,onResume:y,onSwipeStart:C,onSwipeMove:I,onSwipeCancel:F,onSwipeEnd:b,...N}=e,U=i_(E0,r),[H,k]=re.useState(null),R=ci(t,we=>k(we)),V=re.useRef(null),W=re.useRef(null),se=a||U.duration,fe=re.useRef(0),ue=re.useRef(se),ae=re.useRef(0),{onToastAdd:Be,onToastRemove:Ue}=U,te=rA(()=>{var st;(H==null?void 0:H.contains(document.activeElement))&&((st=U.viewport)==null||st.focus()),h()}),de=re.useCallback(we=>{!we||we===1/0||(window.clearTimeout(ae.current),fe.current=new Date().getTime(),ae.current=window.setTimeout(te,we))},[te]);re.useEffect(()=>{const we=U.viewport;if(we){const st=()=>{de(ue.current),y==null||y()},Ze=()=>{const At=new Date().getTime()-fe.current;ue.current=ue.current-At,window.clearTimeout(ae.current),g==null||g()};return we.addEventListener(s2,Ze),we.addEventListener(o2,st),()=>{we.removeEventListener(s2,Ze),we.removeEventListener(o2,st)}}},[U.viewport,se,g,y,de]),re.useEffect(()=>{u&&!U.isClosePausedRef.current&&de(se)},[u,se,U.isClosePausedRef,de]),re.useEffect(()=>(Be(),()=>Ue()),[Be,Ue]);const Te=re.useMemo(()=>H?xL(H):null,[H]);return U.viewport?X.jsxs(X.Fragment,{children:[Te&&X.jsx(PO,{__scopeToast:r,role:"status","aria-live":i==="foreground"?"assertive":"polite","aria-atomic":!0,children:Te}),X.jsx(IO,{scope:r,onClose:te,children:mf.createPortal(X.jsx(B5.ItemSlot,{scope:r,children:X.jsx(AO,{asChild:!0,onEscapeKeyDown:on(o,()=>{U.isFocusedToastEscapeKeyDownRef.current||te(),U.isFocusedToastEscapeKeyDownRef.current=!1}),children:X.jsx(bn.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":u?"open":"closed","data-swipe-direction":U.swipeDirection,...N,ref:R,style:{userSelect:"none",touchAction:"none",...e.style},onKeyDown:on(e.onKeyDown,we=>{we.key==="Escape"&&(o==null||o(we.nativeEvent),we.nativeEvent.defaultPrevented||(U.isFocusedToastEscapeKeyDownRef.current=!0,te()))}),onPointerDown:on(e.onPointerDown,we=>{we.button===0&&(V.current={x:we.clientX,y:we.clientY})}),onPointerMove:on(e.onPointerMove,we=>{if(!V.current)return;const st=we.clientX-V.current.x,Ze=we.clientY-V.current.y,At=!!W.current,Le=["left","right"].includes(U.swipeDirection),He=["left","up"].includes(U.swipeDirection)?Math.min:Math.max,it=Le?He(0,st):0,Lt=Le?0:He(0,Ze),ie=we.pointerType==="touch"?10:2,Ce={x:it,y:Lt},Pe={originalEvent:we,delta:Ce};At?(W.current=Ce,wy(CO,I,Pe,{discrete:!1})):g4(Ce,U.swipeDirection,ie)?(W.current=Ce,wy(BO,C,Pe,{discrete:!1}),we.target.setPointerCapture(we.pointerId)):(Math.abs(st)>ie||Math.abs(Ze)>ie)&&(V.current=null)}),onPointerUp:on(e.onPointerUp,we=>{const st=W.current,Ze=we.target;if(Ze.hasPointerCapture(we.pointerId)&&Ze.releasePointerCapture(we.pointerId),W.current=null,V.current=null,st){const At=we.currentTarget,Le={originalEvent:we,delta:st};g4(st,U.swipeDirection,U.swipeThreshold)?wy(EO,b,Le,{discrete:!0}):wy(SO,F,Le,{discrete:!0}),At.addEventListener("click",He=>He.preventDefault(),{once:!0})}})})})}),U.viewport)})]}):null}),PO=e=>{const{__scopeToast:t,children:r,...i}=e,a=i_(E0,t),[u,h]=re.useState(!1),[o,g]=re.useState(!1);return kO(()=>h(!0)),re.useEffect(()=>{const y=window.setTimeout(()=>g(!0),1e3);return()=>window.clearTimeout(y)},[]),o?null:X.jsx(x5,{asChild:!0,children:X.jsx(n_,{...i,children:u&&X.jsxs(X.Fragment,{children:[a.label," ",r]})})})},LO="ToastTitle",mL=re.forwardRef((e,t)=>{const{__scopeToast:r,...i}=e;return X.jsx(bn.div,{...i,ref:t})});mL.displayName=LO;var MO="ToastDescription",gL=re.forwardRef((e,t)=>{const{__scopeToast:r,...i}=e;return X.jsx(bn.div,{...i,ref:t})});gL.displayName=MO;var yL="ToastAction",vL=re.forwardRef((e,t)=>{const{altText:r,...i}=e;return r.trim()?X.jsx(wL,{altText:r,asChild:!0,children:X.jsx(C5,{...i,ref:t})}):(console.error(`Invalid prop \`altText\` supplied to \`${yL}\`. Expected non-empty \`string\`.`),null)});vL.displayName=yL;var _L="ToastClose",C5=re.forwardRef((e,t)=>{const{__scopeToast:r,...i}=e,a=FO(_L,r);return X.jsx(wL,{asChild:!0,children:X.jsx(bn.button,{type:"button",...i,ref:t,onClick:on(e.onClick,a.onClose)})})});C5.displayName=_L;var wL=re.forwardRef((e,t)=>{const{__scopeToast:r,altText:i,...a}=e;return X.jsx(bn.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":i||void 0,...a,ref:t})});function xL(e){const t=[];return Array.from(e.childNodes).forEach(i=>{if(i.nodeType===i.TEXT_NODE&&i.textContent&&t.push(i.textContent),UO(i)){const a=i.ariaHidden||i.hidden||i.style.display==="none",u=i.dataset.radixToastAnnounceExclude==="";if(!a)if(u){const h=i.dataset.radixToastAnnounceAlt;h&&t.push(h)}else t.push(...xL(i))}}),t}function wy(e,t,r,{discrete:i}){const a=r.originalEvent.currentTarget,u=new CustomEvent(e,{bubbles:!0,cancelable:!0,detail:r});t&&a.addEventListener(e,t,{once:!0}),i?sL(a,u):a.dispatchEvent(u)}var g4=(e,t,r=0)=>{const i=Math.abs(e.x),a=Math.abs(e.y),u=i>a;return t==="left"||t==="right"?u&&i>r:!u&&a>r};function kO(e=()=>{}){const t=rA(e);Io(()=>{let r=0,i=0;return r=window.requestAnimationFrame(()=>i=window.requestAnimationFrame(t)),()=>{window.cancelAnimationFrame(r),window.cancelAnimationFrame(i)}},[t])}function UO(e){return e.nodeType===e.ELEMENT_NODE}function RO(e){const t=[],r=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:i=>{const a=i.tagName==="INPUT"&&i.type==="hidden";return i.disabled||i.hidden||a?NodeFilter.FILTER_SKIP:i.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)t.push(r.currentNode);return t}function ox(e){const t=document.activeElement;return e.some(r=>r===t?!0:(r.focus(),document.activeElement!==t))}var NO=uL,bL=dL,BL=pL,CL=mL,SL=gL,EL=vL,IL=C5;function FL(e){var t,r,i="";if(typeof e=="string"||typeof e=="number")i+=e;else if(typeof e=="object")if(Array.isArray(e)){var a=e.length;for(t=0;t<a;t++)e[t]&&(r=FL(e[t]))&&(i&&(i+=" "),i+=r)}else for(r in e)e[r]&&(i&&(i+=" "),i+=r);return i}function TL(){for(var e,t,r=0,i="",a=arguments.length;r<a;r++)(e=arguments[r])&&(t=FL(e))&&(i&&(i+=" "),i+=t);return i}const y4=e=>typeof e=="boolean"?`${e}`:e===0?"0":e,v4=TL,s_=(e,t)=>r=>{var i;if((t==null?void 0:t.variants)==null)return v4(e,r==null?void 0:r.class,r==null?void 0:r.className);const{variants:a,defaultVariants:u}=t,h=Object.keys(a).map(y=>{const C=r==null?void 0:r[y],I=u==null?void 0:u[y];if(C===null)return null;const F=y4(C)||y4(I);return a[y][F]}),o=r&&Object.entries(r).reduce((y,C)=>{let[I,F]=C;return F===void 0||(y[I]=F),y},{}),g=t==null||(i=t.compoundVariants)===null||i===void 0?void 0:i.reduce((y,C)=>{let{class:I,className:F,...b}=C;return Object.entries(b).every(N=>{let[U,H]=N;return Array.isArray(H)?H.includes({...u,...o}[U]):{...u,...o}[U]===H})?[...y,I,F]:y},[]);return v4(e,h,g,r==null?void 0:r.class,r==null?void 0:r.className)};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DO=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),PL=(...e)=>e.filter((t,r,i)=>!!t&&t.trim()!==""&&i.indexOf(t)===r).join(" ").trim();/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var QO={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OO=re.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:r=2,absoluteStrokeWidth:i,className:a="",children:u,iconNode:h,...o},g)=>re.createElement("svg",{ref:g,...QO,width:t,height:t,stroke:e,strokeWidth:i?Number(r)*24/Number(t):r,className:PL("lucide",a),...o},[...h.map(([y,C])=>re.createElement(y,C)),...Array.isArray(u)?u:[u]]));/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ks=(e,t)=>{const r=re.forwardRef(({className:i,...a},u)=>re.createElement(OO,{ref:u,iconNode:t,className:PL(`lucide-${DO(e)}`,i),...a}));return r.displayName=`${e}`,r};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zO=ks("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HO=ks("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jO=ks("ChartColumn",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LL=ks("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ML=ks("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VO=ks("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KO=ks("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GO=ks("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $O=ks("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kL=ks("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qO=ks("FileImage",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["circle",{cx:"10",cy:"12",r:"2",key:"737tya"}],["path",{d:"m20 17-1.296-1.296a2.41 2.41 0 0 0-3.408 0L9 22",key:"wt3hpn"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZO=ks("Github",[["path",{d:"M15 22v-4a4.8 4.8 0 0 0-1-3.5c3 0 6-2 6-5.5.08-1.25-.27-2.48-1-3.5.28-1.15.28-2.35 0-3.5 0 0-1 0-3 1.5-2.64-.5-5.36-.5-8 0C6 2 5 2 5 2c-.3 1.15-.3 2.35 0 3.5A5.403 5.403 0 0 0 4 9c0 3.5 3 5.5 6 5.5-.39.49-.68 1.05-.85 1.65-.17.6-.22 1.23-.15 1.85v4",key:"tonef"}],["path",{d:"M9 18c-4.51 2-5-2-7-2",key:"9comsn"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l2=ks("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WO=ks("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XO=ks("Map",[["path",{d:"M14.106 5.553a2 2 0 0 0 1.788 0l3.659-1.83A1 1 0 0 1 21 4.619v12.764a1 1 0 0 1-.553.894l-4.553 2.277a2 2 0 0 1-1.788 0l-4.212-2.106a2 2 0 0 0-1.788 0l-3.659 1.83A1 1 0 0 1 3 19.381V6.618a1 1 0 0 1 .553-.894l4.553-2.277a2 2 0 0 1 1.788 0z",key:"169xi5"}],["path",{d:"M15 5.764v15",key:"1pn4in"}],["path",{d:"M9 3.236v15",key:"1uimfh"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UL=ks("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YO=ks("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _4=ks("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w4=ks("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o_=ks("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),S5="-",JO=e=>{const t=tz(e),{conflictingClassGroups:r,conflictingClassGroupModifiers:i}=e;return{getClassGroupId:h=>{const o=h.split(S5);return o[0]===""&&o.length!==1&&o.shift(),RL(o,t)||ez(h)},getConflictingClassGroupIds:(h,o)=>{const g=r[h]||[];return o&&i[h]?[...g,...i[h]]:g}}},RL=(e,t)=>{var h;if(e.length===0)return t.classGroupId;const r=e[0],i=t.nextPart.get(r),a=i?RL(e.slice(1),i):void 0;if(a)return a;if(t.validators.length===0)return;const u=e.join(S5);return(h=t.validators.find(({validator:o})=>o(u)))==null?void 0:h.classGroupId},x4=/^\[(.+)\]$/,ez=e=>{if(x4.test(e)){const t=x4.exec(e)[1],r=t==null?void 0:t.substring(0,t.indexOf(":"));if(r)return"arbitrary.."+r}},tz=e=>{const{theme:t,prefix:r}=e,i={nextPart:new Map,validators:[]};return nz(Object.entries(e.classGroups),r).forEach(([u,h])=>{A2(h,i,u,t)}),i},A2=(e,t,r,i)=>{e.forEach(a=>{if(typeof a=="string"){const u=a===""?t:b4(t,a);u.classGroupId=r;return}if(typeof a=="function"){if(rz(a)){A2(a(i),t,r,i);return}t.validators.push({validator:a,classGroupId:r});return}Object.entries(a).forEach(([u,h])=>{A2(h,b4(t,u),r,i)})})},b4=(e,t)=>{let r=e;return t.split(S5).forEach(i=>{r.nextPart.has(i)||r.nextPart.set(i,{nextPart:new Map,validators:[]}),r=r.nextPart.get(i)}),r},rz=e=>e.isThemeGetter,nz=(e,t)=>t?e.map(([r,i])=>{const a=i.map(u=>typeof u=="string"?t+u:typeof u=="object"?Object.fromEntries(Object.entries(u).map(([h,o])=>[t+h,o])):u);return[r,a]}):e,iz=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,r=new Map,i=new Map;const a=(u,h)=>{r.set(u,h),t++,t>e&&(t=0,i=r,r=new Map)};return{get(u){let h=r.get(u);if(h!==void 0)return h;if((h=i.get(u))!==void 0)return a(u,h),h},set(u,h){r.has(u)?r.set(u,h):a(u,h)}}},NL="!",sz=e=>{const{separator:t,experimentalParseClassName:r}=e,i=t.length===1,a=t[0],u=t.length,h=o=>{const g=[];let y=0,C=0,I;for(let H=0;H<o.length;H++){let k=o[H];if(y===0){if(k===a&&(i||o.slice(H,H+u)===t)){g.push(o.slice(C,H)),C=H+u;continue}if(k==="/"){I=H;continue}}k==="["?y++:k==="]"&&y--}const F=g.length===0?o:o.substring(C),b=F.startsWith(NL),N=b?F.substring(1):F,U=I&&I>C?I-C:void 0;return{modifiers:g,hasImportantModifier:b,baseClassName:N,maybePostfixModifierPosition:U}};return r?o=>r({className:o,parseClassName:h}):h},oz=e=>{if(e.length<=1)return e;const t=[];let r=[];return e.forEach(i=>{i[0]==="["?(t.push(...r.sort(),i),r=[]):r.push(i)}),t.push(...r.sort()),t},az=e=>({cache:iz(e.cacheSize),parseClassName:sz(e),...JO(e)}),lz=/\s+/,Az=(e,t)=>{const{parseClassName:r,getClassGroupId:i,getConflictingClassGroupIds:a}=t,u=[],h=e.trim().split(lz);let o="";for(let g=h.length-1;g>=0;g-=1){const y=h[g],{modifiers:C,hasImportantModifier:I,baseClassName:F,maybePostfixModifierPosition:b}=r(y);let N=!!b,U=i(N?F.substring(0,b):F);if(!U){if(!N){o=y+(o.length>0?" "+o:o);continue}if(U=i(F),!U){o=y+(o.length>0?" "+o:o);continue}N=!1}const H=oz(C).join(":"),k=I?H+NL:H,R=k+U;if(u.includes(R))continue;u.push(R);const V=a(U,N);for(let W=0;W<V.length;++W){const se=V[W];u.push(k+se)}o=y+(o.length>0?" "+o:o)}return o};function cz(){let e=0,t,r,i="";for(;e<arguments.length;)(t=arguments[e++])&&(r=DL(t))&&(i&&(i+=" "),i+=r);return i}const DL=e=>{if(typeof e=="string")return e;let t,r="";for(let i=0;i<e.length;i++)e[i]&&(t=DL(e[i]))&&(r&&(r+=" "),r+=t);return r};function uz(e,...t){let r,i,a,u=h;function h(g){const y=t.reduce((C,I)=>I(C),e());return r=az(y),i=r.cache.get,a=r.cache.set,u=o,o(g)}function o(g){const y=i(g);if(y)return y;const C=Az(g,r);return a(g,C),C}return function(){return u(cz.apply(null,arguments))}}const Pi=e=>{const t=r=>r[e]||[];return t.isThemeGetter=!0,t},QL=/^\[(?:([a-z-]+):)?(.+)\]$/i,hz=/^\d+\/\d+$/,dz=new Set(["px","full","screen"]),fz=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,pz=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,mz=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,gz=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,yz=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,gu=e=>Sp(e)||dz.has(e)||hz.test(e),ch=e=>Am(e,"length",Sz),Sp=e=>!!e&&!Number.isNaN(Number(e)),ax=e=>Am(e,"number",Sp),Gm=e=>!!e&&Number.isInteger(Number(e)),vz=e=>e.endsWith("%")&&Sp(e.slice(0,-1)),yn=e=>QL.test(e),uh=e=>fz.test(e),_z=new Set(["length","size","percentage"]),wz=e=>Am(e,_z,OL),xz=e=>Am(e,"position",OL),bz=new Set(["image","url"]),Bz=e=>Am(e,bz,Iz),Cz=e=>Am(e,"",Ez),$m=()=>!0,Am=(e,t,r)=>{const i=QL.exec(e);return i?i[1]?typeof t=="string"?i[1]===t:t.has(i[1]):r(i[2]):!1},Sz=e=>pz.test(e)&&!mz.test(e),OL=()=>!1,Ez=e=>gz.test(e),Iz=e=>yz.test(e),Fz=()=>{const e=Pi("colors"),t=Pi("spacing"),r=Pi("blur"),i=Pi("brightness"),a=Pi("borderColor"),u=Pi("borderRadius"),h=Pi("borderSpacing"),o=Pi("borderWidth"),g=Pi("contrast"),y=Pi("grayscale"),C=Pi("hueRotate"),I=Pi("invert"),F=Pi("gap"),b=Pi("gradientColorStops"),N=Pi("gradientColorStopPositions"),U=Pi("inset"),H=Pi("margin"),k=Pi("opacity"),R=Pi("padding"),V=Pi("saturate"),W=Pi("scale"),se=Pi("sepia"),fe=Pi("skew"),ue=Pi("space"),ae=Pi("translate"),Be=()=>["auto","contain","none"],Ue=()=>["auto","hidden","clip","visible","scroll"],te=()=>["auto",yn,t],de=()=>[yn,t],Te=()=>["",gu,ch],we=()=>["auto",Sp,yn],st=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],Ze=()=>["solid","dashed","dotted","double","none"],At=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],Le=()=>["start","end","center","between","around","evenly","stretch"],He=()=>["","0",yn],it=()=>["auto","avoid","all","avoid-page","page","left","right","column"],Lt=()=>[Sp,yn];return{cacheSize:500,separator:":",theme:{colors:[$m],spacing:[gu,ch],blur:["none","",uh,yn],brightness:Lt(),borderColor:[e],borderRadius:["none","","full",uh,yn],borderSpacing:de(),borderWidth:Te(),contrast:Lt(),grayscale:He(),hueRotate:Lt(),invert:He(),gap:de(),gradientColorStops:[e],gradientColorStopPositions:[vz,ch],inset:te(),margin:te(),opacity:Lt(),padding:de(),saturate:Lt(),scale:Lt(),sepia:He(),skew:Lt(),space:de(),translate:de()},classGroups:{aspect:[{aspect:["auto","square","video",yn]}],container:["container"],columns:[{columns:[uh]}],"break-after":[{"break-after":it()}],"break-before":[{"break-before":it()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...st(),yn]}],overflow:[{overflow:Ue()}],"overflow-x":[{"overflow-x":Ue()}],"overflow-y":[{"overflow-y":Ue()}],overscroll:[{overscroll:Be()}],"overscroll-x":[{"overscroll-x":Be()}],"overscroll-y":[{"overscroll-y":Be()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[U]}],"inset-x":[{"inset-x":[U]}],"inset-y":[{"inset-y":[U]}],start:[{start:[U]}],end:[{end:[U]}],top:[{top:[U]}],right:[{right:[U]}],bottom:[{bottom:[U]}],left:[{left:[U]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",Gm,yn]}],basis:[{basis:te()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",yn]}],grow:[{grow:He()}],shrink:[{shrink:He()}],order:[{order:["first","last","none",Gm,yn]}],"grid-cols":[{"grid-cols":[$m]}],"col-start-end":[{col:["auto",{span:["full",Gm,yn]},yn]}],"col-start":[{"col-start":we()}],"col-end":[{"col-end":we()}],"grid-rows":[{"grid-rows":[$m]}],"row-start-end":[{row:["auto",{span:[Gm,yn]},yn]}],"row-start":[{"row-start":we()}],"row-end":[{"row-end":we()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",yn]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",yn]}],gap:[{gap:[F]}],"gap-x":[{"gap-x":[F]}],"gap-y":[{"gap-y":[F]}],"justify-content":[{justify:["normal",...Le()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...Le(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...Le(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[R]}],px:[{px:[R]}],py:[{py:[R]}],ps:[{ps:[R]}],pe:[{pe:[R]}],pt:[{pt:[R]}],pr:[{pr:[R]}],pb:[{pb:[R]}],pl:[{pl:[R]}],m:[{m:[H]}],mx:[{mx:[H]}],my:[{my:[H]}],ms:[{ms:[H]}],me:[{me:[H]}],mt:[{mt:[H]}],mr:[{mr:[H]}],mb:[{mb:[H]}],ml:[{ml:[H]}],"space-x":[{"space-x":[ue]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[ue]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",yn,t]}],"min-w":[{"min-w":[yn,t,"min","max","fit"]}],"max-w":[{"max-w":[yn,t,"none","full","min","max","fit","prose",{screen:[uh]},uh]}],h:[{h:[yn,t,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[yn,t,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[yn,t,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[yn,t,"auto","min","max","fit"]}],"font-size":[{text:["base",uh,ch]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",ax]}],"font-family":[{font:[$m]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",yn]}],"line-clamp":[{"line-clamp":["none",Sp,ax]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",gu,yn]}],"list-image":[{"list-image":["none",yn]}],"list-style-type":[{list:["none","disc","decimal",yn]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[e]}],"placeholder-opacity":[{"placeholder-opacity":[k]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[e]}],"text-opacity":[{"text-opacity":[k]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...Ze(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",gu,ch]}],"underline-offset":[{"underline-offset":["auto",gu,yn]}],"text-decoration-color":[{decoration:[e]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:de()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",yn]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",yn]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[k]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...st(),xz]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",wz]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},Bz]}],"bg-color":[{bg:[e]}],"gradient-from-pos":[{from:[N]}],"gradient-via-pos":[{via:[N]}],"gradient-to-pos":[{to:[N]}],"gradient-from":[{from:[b]}],"gradient-via":[{via:[b]}],"gradient-to":[{to:[b]}],rounded:[{rounded:[u]}],"rounded-s":[{"rounded-s":[u]}],"rounded-e":[{"rounded-e":[u]}],"rounded-t":[{"rounded-t":[u]}],"rounded-r":[{"rounded-r":[u]}],"rounded-b":[{"rounded-b":[u]}],"rounded-l":[{"rounded-l":[u]}],"rounded-ss":[{"rounded-ss":[u]}],"rounded-se":[{"rounded-se":[u]}],"rounded-ee":[{"rounded-ee":[u]}],"rounded-es":[{"rounded-es":[u]}],"rounded-tl":[{"rounded-tl":[u]}],"rounded-tr":[{"rounded-tr":[u]}],"rounded-br":[{"rounded-br":[u]}],"rounded-bl":[{"rounded-bl":[u]}],"border-w":[{border:[o]}],"border-w-x":[{"border-x":[o]}],"border-w-y":[{"border-y":[o]}],"border-w-s":[{"border-s":[o]}],"border-w-e":[{"border-e":[o]}],"border-w-t":[{"border-t":[o]}],"border-w-r":[{"border-r":[o]}],"border-w-b":[{"border-b":[o]}],"border-w-l":[{"border-l":[o]}],"border-opacity":[{"border-opacity":[k]}],"border-style":[{border:[...Ze(),"hidden"]}],"divide-x":[{"divide-x":[o]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[o]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[k]}],"divide-style":[{divide:Ze()}],"border-color":[{border:[a]}],"border-color-x":[{"border-x":[a]}],"border-color-y":[{"border-y":[a]}],"border-color-s":[{"border-s":[a]}],"border-color-e":[{"border-e":[a]}],"border-color-t":[{"border-t":[a]}],"border-color-r":[{"border-r":[a]}],"border-color-b":[{"border-b":[a]}],"border-color-l":[{"border-l":[a]}],"divide-color":[{divide:[a]}],"outline-style":[{outline:["",...Ze()]}],"outline-offset":[{"outline-offset":[gu,yn]}],"outline-w":[{outline:[gu,ch]}],"outline-color":[{outline:[e]}],"ring-w":[{ring:Te()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[e]}],"ring-opacity":[{"ring-opacity":[k]}],"ring-offset-w":[{"ring-offset":[gu,ch]}],"ring-offset-color":[{"ring-offset":[e]}],shadow:[{shadow:["","inner","none",uh,Cz]}],"shadow-color":[{shadow:[$m]}],opacity:[{opacity:[k]}],"mix-blend":[{"mix-blend":[...At(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":At()}],filter:[{filter:["","none"]}],blur:[{blur:[r]}],brightness:[{brightness:[i]}],contrast:[{contrast:[g]}],"drop-shadow":[{"drop-shadow":["","none",uh,yn]}],grayscale:[{grayscale:[y]}],"hue-rotate":[{"hue-rotate":[C]}],invert:[{invert:[I]}],saturate:[{saturate:[V]}],sepia:[{sepia:[se]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[r]}],"backdrop-brightness":[{"backdrop-brightness":[i]}],"backdrop-contrast":[{"backdrop-contrast":[g]}],"backdrop-grayscale":[{"backdrop-grayscale":[y]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[C]}],"backdrop-invert":[{"backdrop-invert":[I]}],"backdrop-opacity":[{"backdrop-opacity":[k]}],"backdrop-saturate":[{"backdrop-saturate":[V]}],"backdrop-sepia":[{"backdrop-sepia":[se]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[h]}],"border-spacing-x":[{"border-spacing-x":[h]}],"border-spacing-y":[{"border-spacing-y":[h]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",yn]}],duration:[{duration:Lt()}],ease:[{ease:["linear","in","out","in-out",yn]}],delay:[{delay:Lt()}],animate:[{animate:["none","spin","ping","pulse","bounce",yn]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[W]}],"scale-x":[{"scale-x":[W]}],"scale-y":[{"scale-y":[W]}],rotate:[{rotate:[Gm,yn]}],"translate-x":[{"translate-x":[ae]}],"translate-y":[{"translate-y":[ae]}],"skew-x":[{"skew-x":[fe]}],"skew-y":[{"skew-y":[fe]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",yn]}],accent:[{accent:["auto",e]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",yn]}],"caret-color":[{caret:[e]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":de()}],"scroll-mx":[{"scroll-mx":de()}],"scroll-my":[{"scroll-my":de()}],"scroll-ms":[{"scroll-ms":de()}],"scroll-me":[{"scroll-me":de()}],"scroll-mt":[{"scroll-mt":de()}],"scroll-mr":[{"scroll-mr":de()}],"scroll-mb":[{"scroll-mb":de()}],"scroll-ml":[{"scroll-ml":de()}],"scroll-p":[{"scroll-p":de()}],"scroll-px":[{"scroll-px":de()}],"scroll-py":[{"scroll-py":de()}],"scroll-ps":[{"scroll-ps":de()}],"scroll-pe":[{"scroll-pe":de()}],"scroll-pt":[{"scroll-pt":de()}],"scroll-pr":[{"scroll-pr":de()}],"scroll-pb":[{"scroll-pb":de()}],"scroll-pl":[{"scroll-pl":de()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",yn]}],fill:[{fill:[e,"none"]}],"stroke-w":[{stroke:[gu,ch,ax]}],stroke:[{stroke:[e,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},Tz=uz(Fz);function Qn(...e){return Tz(TL(e))}const Pz=NO,zL=re.forwardRef(({className:e,...t},r)=>X.jsx(bL,{ref:r,className:Qn("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",e),...t}));zL.displayName=bL.displayName;const Lz=s_("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),HL=re.forwardRef(({className:e,variant:t,...r},i)=>X.jsx(BL,{ref:i,className:Qn(Lz({variant:t}),e),...r}));HL.displayName=BL.displayName;const Mz=re.forwardRef(({className:e,...t},r)=>X.jsx(EL,{ref:r,className:Qn("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",e),...t}));Mz.displayName=EL.displayName;const jL=re.forwardRef(({className:e,...t},r)=>X.jsx(IL,{ref:r,className:Qn("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",e),"toast-close":"",...t,children:X.jsx(o_,{className:"h-4 w-4"})}));jL.displayName=IL.displayName;const VL=re.forwardRef(({className:e,...t},r)=>X.jsx(CL,{ref:r,className:Qn("text-sm font-semibold",e),...t}));VL.displayName=CL.displayName;const KL=re.forwardRef(({className:e,...t},r)=>X.jsx(SL,{ref:r,className:Qn("text-sm opacity-90",e),...t}));KL.displayName=SL.displayName;function kz(){const{toasts:e}=$8();return X.jsxs(Pz,{children:[e.map(function({id:t,title:r,description:i,action:a,...u}){return X.jsxs(HL,{...u,children:[X.jsxs("div",{className:"grid gap-1",children:[r&&X.jsx(VL,{children:r}),i&&X.jsx(KL,{children:i})]}),a,X.jsx(jL,{})]},t)}),X.jsx(zL,{})]})}var B4=["light","dark"],Uz="(prefers-color-scheme: dark)",Rz=re.createContext(void 0),Nz={setTheme:e=>{},themes:[]},Dz=()=>{var e;return(e=re.useContext(Rz))!=null?e:Nz};re.memo(({forcedTheme:e,storageKey:t,attribute:r,enableSystem:i,enableColorScheme:a,defaultTheme:u,value:h,attrs:o,nonce:g})=>{let y=u==="system",C=r==="class"?`var d=document.documentElement,c=d.classList;${`c.remove(${o.map(N=>`'${N}'`).join(",")})`};`:`var d=document.documentElement,n='${r}',s='setAttribute';`,I=a?B4.includes(u)&&u?`if(e==='light'||e==='dark'||!e)d.style.colorScheme=e||'${u}'`:"if(e==='light'||e==='dark')d.style.colorScheme=e":"",F=(N,U=!1,H=!0)=>{let k=h?h[N]:N,R=U?N+"|| ''":`'${k}'`,V="";return a&&H&&!U&&B4.includes(N)&&(V+=`d.style.colorScheme = '${N}';`),r==="class"?U||k?V+=`c.add(${R})`:V+="null":k&&(V+=`d[s](n,${R})`),V},b=e?`!function(){${C}${F(e)}}()`:i?`!function(){try{${C}var e=localStorage.getItem('${t}');if('system'===e||(!e&&${y})){var t='${Uz}',m=window.matchMedia(t);if(m.media!==t||m.matches){${F("dark")}}else{${F("light")}}}else if(e){${h?`var x=${JSON.stringify(h)};`:""}${F(h?"x[e]":"e",!0)}}${y?"":"else{"+F(u,!1,!1)+"}"}${I}}catch(e){}}()`:`!function(){try{${C}var e=localStorage.getItem('${t}');if(e){${h?`var x=${JSON.stringify(h)};`:""}${F(h?"x[e]":"e",!0)}}else{${F(u,!1,!1)};}${I}}catch(t){}}();`;return re.createElement("script",{nonce:g,dangerouslySetInnerHTML:{__html:b}})});var Qz=e=>{switch(e){case"success":return Hz;case"info":return Vz;case"warning":return jz;case"error":return Kz;default:return null}},Oz=Array(12).fill(0),zz=({visible:e,className:t})=>hr.createElement("div",{className:["sonner-loading-wrapper",t].filter(Boolean).join(" "),"data-visible":e},hr.createElement("div",{className:"sonner-spinner"},Oz.map((r,i)=>hr.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${i}`})))),Hz=hr.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},hr.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),jz=hr.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},hr.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),Vz=hr.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},hr.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),Kz=hr.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},hr.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),Gz=hr.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},hr.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),hr.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),$z=()=>{let[e,t]=hr.useState(document.hidden);return hr.useEffect(()=>{let r=()=>{t(document.hidden)};return document.addEventListener("visibilitychange",r),()=>window.removeEventListener("visibilitychange",r)},[]),e},c2=1,qz=class{constructor(){this.subscribe=t=>(this.subscribers.push(t),()=>{let r=this.subscribers.indexOf(t);this.subscribers.splice(r,1)}),this.publish=t=>{this.subscribers.forEach(r=>r(t))},this.addToast=t=>{this.publish(t),this.toasts=[...this.toasts,t]},this.create=t=>{var r;let{message:i,...a}=t,u=typeof(t==null?void 0:t.id)=="number"||((r=t.id)==null?void 0:r.length)>0?t.id:c2++,h=this.toasts.find(g=>g.id===u),o=t.dismissible===void 0?!0:t.dismissible;return this.dismissedToasts.has(u)&&this.dismissedToasts.delete(u),h?this.toasts=this.toasts.map(g=>g.id===u?(this.publish({...g,...t,id:u,title:i}),{...g,...t,id:u,dismissible:o,title:i}):g):this.addToast({title:i,...a,dismissible:o,id:u}),u},this.dismiss=t=>(this.dismissedToasts.add(t),t||this.toasts.forEach(r=>{this.subscribers.forEach(i=>i({id:r.id,dismiss:!0}))}),this.subscribers.forEach(r=>r({id:t,dismiss:!0})),t),this.message=(t,r)=>this.create({...r,message:t}),this.error=(t,r)=>this.create({...r,message:t,type:"error"}),this.success=(t,r)=>this.create({...r,type:"success",message:t}),this.info=(t,r)=>this.create({...r,type:"info",message:t}),this.warning=(t,r)=>this.create({...r,type:"warning",message:t}),this.loading=(t,r)=>this.create({...r,type:"loading",message:t}),this.promise=(t,r)=>{if(!r)return;let i;r.loading!==void 0&&(i=this.create({...r,promise:t,type:"loading",message:r.loading,description:typeof r.description!="function"?r.description:void 0}));let a=t instanceof Promise?t:t(),u=i!==void 0,h,o=a.then(async y=>{if(h=["resolve",y],hr.isValidElement(y))u=!1,this.create({id:i,type:"default",message:y});else if(Wz(y)&&!y.ok){u=!1;let C=typeof r.error=="function"?await r.error(`HTTP error! status: ${y.status}`):r.error,I=typeof r.description=="function"?await r.description(`HTTP error! status: ${y.status}`):r.description;this.create({id:i,type:"error",message:C,description:I})}else if(r.success!==void 0){u=!1;let C=typeof r.success=="function"?await r.success(y):r.success,I=typeof r.description=="function"?await r.description(y):r.description;this.create({id:i,type:"success",message:C,description:I})}}).catch(async y=>{if(h=["reject",y],r.error!==void 0){u=!1;let C=typeof r.error=="function"?await r.error(y):r.error,I=typeof r.description=="function"?await r.description(y):r.description;this.create({id:i,type:"error",message:C,description:I})}}).finally(()=>{var y;u&&(this.dismiss(i),i=void 0),(y=r.finally)==null||y.call(r)}),g=()=>new Promise((y,C)=>o.then(()=>h[0]==="reject"?C(h[1]):y(h[1])).catch(C));return typeof i!="string"&&typeof i!="number"?{unwrap:g}:Object.assign(i,{unwrap:g})},this.custom=(t,r)=>{let i=(r==null?void 0:r.id)||c2++;return this.create({jsx:t(i),id:i,...r}),i},this.getActiveToasts=()=>this.toasts.filter(t=>!this.dismissedToasts.has(t.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}},Ha=new qz,Zz=(e,t)=>{let r=(t==null?void 0:t.id)||c2++;return Ha.addToast({title:e,...t,id:r}),r},Wz=e=>e&&typeof e=="object"&&"ok"in e&&typeof e.ok=="boolean"&&"status"in e&&typeof e.status=="number",Xz=Zz,Yz=()=>Ha.toasts,Jz=()=>Ha.getActiveToasts();Object.assign(Xz,{success:Ha.success,info:Ha.info,warning:Ha.warning,error:Ha.error,custom:Ha.custom,message:Ha.message,promise:Ha.promise,dismiss:Ha.dismiss,loading:Ha.loading},{getHistory:Yz,getToasts:Jz});function eH(e,{insertAt:t}={}){if(typeof document>"u")return;let r=document.head||document.getElementsByTagName("head")[0],i=document.createElement("style");i.type="text/css",t==="top"&&r.firstChild?r.insertBefore(i,r.firstChild):r.appendChild(i),i.styleSheet?i.styleSheet.cssText=e:i.appendChild(document.createTextNode(e))}eH(`:where(html[dir="ltr"]),:where([data-sonner-toaster][dir="ltr"]){--toast-icon-margin-start: -3px;--toast-icon-margin-end: 4px;--toast-svg-margin-start: -1px;--toast-svg-margin-end: 0px;--toast-button-margin-start: auto;--toast-button-margin-end: 0;--toast-close-button-start: 0;--toast-close-button-end: unset;--toast-close-button-transform: translate(-35%, -35%)}:where(html[dir="rtl"]),:where([data-sonner-toaster][dir="rtl"]){--toast-icon-margin-start: 4px;--toast-icon-margin-end: -3px;--toast-svg-margin-start: 0px;--toast-svg-margin-end: -1px;--toast-button-margin-start: 0;--toast-button-margin-end: auto;--toast-close-button-start: unset;--toast-close-button-end: 0;--toast-close-button-transform: translate(35%, -35%)}:where([data-sonner-toaster]){position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1: hsl(0, 0%, 99%);--gray2: hsl(0, 0%, 97.3%);--gray3: hsl(0, 0%, 95.1%);--gray4: hsl(0, 0%, 93%);--gray5: hsl(0, 0%, 90.9%);--gray6: hsl(0, 0%, 88.7%);--gray7: hsl(0, 0%, 85.8%);--gray8: hsl(0, 0%, 78%);--gray9: hsl(0, 0%, 56.1%);--gray10: hsl(0, 0%, 52.3%);--gray11: hsl(0, 0%, 43.5%);--gray12: hsl(0, 0%, 9%);--border-radius: 8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:none;z-index:999999999;transition:transform .4s ease}:where([data-sonner-toaster][data-lifted="true"]){transform:translateY(-10px)}@media (hover: none) and (pointer: coarse){:where([data-sonner-toaster][data-lifted="true"]){transform:none}}:where([data-sonner-toaster][data-x-position="right"]){right:var(--offset-right)}:where([data-sonner-toaster][data-x-position="left"]){left:var(--offset-left)}:where([data-sonner-toaster][data-x-position="center"]){left:50%;transform:translate(-50%)}:where([data-sonner-toaster][data-y-position="top"]){top:var(--offset-top)}:where([data-sonner-toaster][data-y-position="bottom"]){bottom:var(--offset-bottom)}:where([data-sonner-toast]){--y: translateY(100%);--lift-amount: calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);filter:blur(0);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:none;overflow-wrap:anywhere}:where([data-sonner-toast][data-styled="true"]){padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px #0000001a;width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}:where([data-sonner-toast]:focus-visible){box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast][data-y-position="top"]){top:0;--y: translateY(-100%);--lift: 1;--lift-amount: calc(1 * var(--gap))}:where([data-sonner-toast][data-y-position="bottom"]){bottom:0;--y: translateY(100%);--lift: -1;--lift-amount: calc(var(--lift) * var(--gap))}:where([data-sonner-toast]) :where([data-description]){font-weight:400;line-height:1.4;color:inherit}:where([data-sonner-toast]) :where([data-title]){font-weight:500;line-height:1.5;color:inherit}:where([data-sonner-toast]) :where([data-icon]){display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}:where([data-sonner-toast][data-promise="true"]) :where([data-icon])>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}:where([data-sonner-toast]) :where([data-icon])>*{flex-shrink:0}:where([data-sonner-toast]) :where([data-icon]) svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}:where([data-sonner-toast]) :where([data-content]){display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;cursor:pointer;outline:none;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}:where([data-sonner-toast]) :where([data-button]):focus-visible{box-shadow:0 0 0 2px #0006}:where([data-sonner-toast]) :where([data-button]):first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}:where([data-sonner-toast]) :where([data-cancel]){color:var(--normal-text);background:rgba(0,0,0,.08)}:where([data-sonner-toast][data-theme="dark"]) :where([data-cancel]){background:rgba(255,255,255,.3)}:where([data-sonner-toast]) :where([data-close-button]){position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast] [data-close-button]{background:var(--gray1)}:where([data-sonner-toast]) :where([data-close-button]):focus-visible{box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast]) :where([data-disabled="true"]){cursor:not-allowed}:where([data-sonner-toast]):hover :where([data-close-button]):hover{background:var(--gray2);border-color:var(--gray5)}:where([data-sonner-toast][data-swiping="true"]):before{content:"";position:absolute;left:-50%;right:-50%;height:100%;z-index:-1}:where([data-sonner-toast][data-y-position="top"][data-swiping="true"]):before{bottom:50%;transform:scaleY(3) translateY(50%)}:where([data-sonner-toast][data-y-position="bottom"][data-swiping="true"]):before{top:50%;transform:scaleY(3) translateY(-50%)}:where([data-sonner-toast][data-swiping="false"][data-removed="true"]):before{content:"";position:absolute;inset:0;transform:scaleY(2)}:where([data-sonner-toast]):after{content:"";position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}:where([data-sonner-toast][data-mounted="true"]){--y: translateY(0);opacity:1}:where([data-sonner-toast][data-expanded="false"][data-front="false"]){--scale: var(--toasts-before) * .05 + 1;--y: translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}:where([data-sonner-toast])>*{transition:opacity .4s}:where([data-sonner-toast][data-expanded="false"][data-front="false"][data-styled="true"])>*{opacity:0}:where([data-sonner-toast][data-visible="false"]){opacity:0;pointer-events:none}:where([data-sonner-toast][data-mounted="true"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}:where([data-sonner-toast][data-removed="true"][data-front="true"][data-swipe-out="false"]){--y: translateY(calc(var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="false"]){--y: translateY(40%);opacity:0;transition:transform .5s,opacity .2s}:where([data-sonner-toast][data-removed="true"][data-front="false"]):before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y, 0px)) translate(var(--swipe-amount-x, 0px));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width: 600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-theme=light]{--normal-bg: #fff;--normal-border: var(--gray4);--normal-text: var(--gray12);--success-bg: hsl(143, 85%, 96%);--success-border: hsl(145, 92%, 91%);--success-text: hsl(140, 100%, 27%);--info-bg: hsl(208, 100%, 97%);--info-border: hsl(221, 91%, 91%);--info-text: hsl(210, 92%, 45%);--warning-bg: hsl(49, 100%, 97%);--warning-border: hsl(49, 91%, 91%);--warning-text: hsl(31, 92%, 45%);--error-bg: hsl(359, 100%, 97%);--error-border: hsl(359, 100%, 94%);--error-text: hsl(360, 100%, 45%)}[data-sonner-toaster][data-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg: #fff;--normal-border: var(--gray3);--normal-text: var(--gray12)}[data-sonner-toaster][data-theme=dark]{--normal-bg: #000;--normal-bg-hover: hsl(0, 0%, 12%);--normal-border: hsl(0, 0%, 20%);--normal-border-hover: hsl(0, 0%, 25%);--normal-text: var(--gray1);--success-bg: hsl(150, 100%, 6%);--success-border: hsl(147, 100%, 12%);--success-text: hsl(150, 86%, 65%);--info-bg: hsl(215, 100%, 6%);--info-border: hsl(223, 100%, 12%);--info-text: hsl(216, 87%, 65%);--warning-bg: hsl(64, 100%, 6%);--warning-border: hsl(60, 100%, 12%);--warning-text: hsl(46, 87%, 65%);--error-bg: hsl(358, 76%, 10%);--error-border: hsl(357, 89%, 16%);--error-text: hsl(358, 100%, 81%)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success],[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info],[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning],[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error],[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size: 16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:nth-child(1){animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}to{opacity:.15}}@media (prefers-reduced-motion){[data-sonner-toast],[data-sonner-toast]>*,.sonner-loading-bar{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}
`);function xy(e){return e.label!==void 0}var tH=3,rH="32px",nH="16px",C4=4e3,iH=356,sH=14,oH=20,aH=200;function TA(...e){return e.filter(Boolean).join(" ")}function lH(e){let[t,r]=e.split("-"),i=[];return t&&i.push(t),r&&i.push(r),i}var AH=e=>{var t,r,i,a,u,h,o,g,y,C,I;let{invert:F,toast:b,unstyled:N,interacting:U,setHeights:H,visibleToasts:k,heights:R,index:V,toasts:W,expanded:se,removeToast:fe,defaultRichColors:ue,closeButton:ae,style:Be,cancelButtonStyle:Ue,actionButtonStyle:te,className:de="",descriptionClassName:Te="",duration:we,position:st,gap:Ze,loadingIcon:At,expandByDefault:Le,classNames:He,icons:it,closeButtonAriaLabel:Lt="Close toast",pauseWhenPageIsHidden:ie}=e,[Ce,Pe]=hr.useState(null),[$e,nt]=hr.useState(null),[Xe,pt]=hr.useState(!1),[dt,Rt]=hr.useState(!1),[Mt,$t]=hr.useState(!1),[jt,vr]=hr.useState(!1),[Ft,Ge]=hr.useState(!1),[Cr,pr]=hr.useState(0),[Kt,ar]=hr.useState(0),lr=hr.useRef(b.duration||we||C4),cr=hr.useRef(null),br=hr.useRef(null),Dr=V===0,Kr=V+1<=k,Lr=b.type,Hr=b.dismissible!==!1,un=b.className||"",zr=b.descriptionClassName||"",Yr=hr.useMemo(()=>R.findIndex(Me=>Me.toastId===b.id)||0,[R,b.id]),ur=hr.useMemo(()=>{var Me;return(Me=b.closeButton)!=null?Me:ae},[b.closeButton,ae]),ct=hr.useMemo(()=>b.duration||we||C4,[b.duration,we]),Ae=hr.useRef(0),me=hr.useRef(0),_e=hr.useRef(0),Ne=hr.useRef(null),[et,tt]=st.split("-"),yt=hr.useMemo(()=>R.reduce((Me,Nt,nr)=>nr>=Yr?Me:Me+Nt.height,0),[R,Yr]),rt=$z(),It=b.invert||F,Ct=Lr==="loading";me.current=hr.useMemo(()=>Yr*Ze+yt,[Yr,yt]),hr.useEffect(()=>{lr.current=ct},[ct]),hr.useEffect(()=>{pt(!0)},[]),hr.useEffect(()=>{let Me=br.current;if(Me){let Nt=Me.getBoundingClientRect().height;return ar(Nt),H(nr=>[{toastId:b.id,height:Nt,position:b.position},...nr]),()=>H(nr=>nr.filter(tr=>tr.toastId!==b.id))}},[H,b.id]),hr.useLayoutEffect(()=>{if(!Xe)return;let Me=br.current,Nt=Me.style.height;Me.style.height="auto";let nr=Me.getBoundingClientRect().height;Me.style.height=Nt,ar(nr),H(tr=>tr.find(Ar=>Ar.toastId===b.id)?tr.map(Ar=>Ar.toastId===b.id?{...Ar,height:nr}:Ar):[{toastId:b.id,height:nr,position:b.position},...tr])},[Xe,b.title,b.description,H,b.id]);let lt=hr.useCallback(()=>{Rt(!0),pr(me.current),H(Me=>Me.filter(Nt=>Nt.toastId!==b.id)),setTimeout(()=>{fe(b)},aH)},[b,fe,H,me]);hr.useEffect(()=>{if(b.promise&&Lr==="loading"||b.duration===1/0||b.type==="loading")return;let Me;return se||U||ie&&rt?(()=>{if(_e.current<Ae.current){let Nt=new Date().getTime()-Ae.current;lr.current=lr.current-Nt}_e.current=new Date().getTime()})():lr.current!==1/0&&(Ae.current=new Date().getTime(),Me=setTimeout(()=>{var Nt;(Nt=b.onAutoClose)==null||Nt.call(b,b),lt()},lr.current)),()=>clearTimeout(Me)},[se,U,b,Lr,ie,rt,lt]),hr.useEffect(()=>{b.delete&&lt()},[lt,b.delete]);function mt(){var Me,Nt,nr;return it!=null&&it.loading?hr.createElement("div",{className:TA(He==null?void 0:He.loader,(Me=b==null?void 0:b.classNames)==null?void 0:Me.loader,"sonner-loader"),"data-visible":Lr==="loading"},it.loading):At?hr.createElement("div",{className:TA(He==null?void 0:He.loader,(Nt=b==null?void 0:b.classNames)==null?void 0:Nt.loader,"sonner-loader"),"data-visible":Lr==="loading"},At):hr.createElement(zz,{className:TA(He==null?void 0:He.loader,(nr=b==null?void 0:b.classNames)==null?void 0:nr.loader),visible:Lr==="loading"})}return hr.createElement("li",{tabIndex:0,ref:br,className:TA(de,un,He==null?void 0:He.toast,(t=b==null?void 0:b.classNames)==null?void 0:t.toast,He==null?void 0:He.default,He==null?void 0:He[Lr],(r=b==null?void 0:b.classNames)==null?void 0:r[Lr]),"data-sonner-toast":"","data-rich-colors":(i=b.richColors)!=null?i:ue,"data-styled":!(b.jsx||b.unstyled||N),"data-mounted":Xe,"data-promise":!!b.promise,"data-swiped":Ft,"data-removed":dt,"data-visible":Kr,"data-y-position":et,"data-x-position":tt,"data-index":V,"data-front":Dr,"data-swiping":Mt,"data-dismissible":Hr,"data-type":Lr,"data-invert":It,"data-swipe-out":jt,"data-swipe-direction":$e,"data-expanded":!!(se||Le&&Xe),style:{"--index":V,"--toasts-before":V,"--z-index":W.length-V,"--offset":`${dt?Cr:me.current}px`,"--initial-height":Le?"auto":`${Kt}px`,...Be,...b.style},onDragEnd:()=>{$t(!1),Pe(null),Ne.current=null},onPointerDown:Me=>{Ct||!Hr||(cr.current=new Date,pr(me.current),Me.target.setPointerCapture(Me.pointerId),Me.target.tagName!=="BUTTON"&&($t(!0),Ne.current={x:Me.clientX,y:Me.clientY}))},onPointerUp:()=>{var Me,Nt,nr,tr;if(jt||!Hr)return;Ne.current=null;let Ar=Number(((Me=br.current)==null?void 0:Me.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),qt=Number(((Nt=br.current)==null?void 0:Nt.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),Jr=new Date().getTime()-((nr=cr.current)==null?void 0:nr.getTime()),jr=Ce==="x"?Ar:qt,Nr=Math.abs(jr)/Jr;if(Math.abs(jr)>=oH||Nr>.11){pr(me.current),(tr=b.onDismiss)==null||tr.call(b,b),nt(Ce==="x"?Ar>0?"right":"left":qt>0?"down":"up"),lt(),vr(!0),Ge(!1);return}$t(!1),Pe(null)},onPointerMove:Me=>{var Nt,nr,tr,Ar;if(!Ne.current||!Hr||((Nt=window.getSelection())==null?void 0:Nt.toString().length)>0)return;let qt=Me.clientY-Ne.current.y,Jr=Me.clientX-Ne.current.x,jr=(nr=e.swipeDirections)!=null?nr:lH(st);!Ce&&(Math.abs(Jr)>1||Math.abs(qt)>1)&&Pe(Math.abs(Jr)>Math.abs(qt)?"x":"y");let Nr={x:0,y:0};Ce==="y"?(jr.includes("top")||jr.includes("bottom"))&&(jr.includes("top")&&qt<0||jr.includes("bottom")&&qt>0)&&(Nr.y=qt):Ce==="x"&&(jr.includes("left")||jr.includes("right"))&&(jr.includes("left")&&Jr<0||jr.includes("right")&&Jr>0)&&(Nr.x=Jr),(Math.abs(Nr.x)>0||Math.abs(Nr.y)>0)&&Ge(!0),(tr=br.current)==null||tr.style.setProperty("--swipe-amount-x",`${Nr.x}px`),(Ar=br.current)==null||Ar.style.setProperty("--swipe-amount-y",`${Nr.y}px`)}},ur&&!b.jsx?hr.createElement("button",{"aria-label":Lt,"data-disabled":Ct,"data-close-button":!0,onClick:Ct||!Hr?()=>{}:()=>{var Me;lt(),(Me=b.onDismiss)==null||Me.call(b,b)},className:TA(He==null?void 0:He.closeButton,(a=b==null?void 0:b.classNames)==null?void 0:a.closeButton)},(u=it==null?void 0:it.close)!=null?u:Gz):null,b.jsx||re.isValidElement(b.title)?b.jsx?b.jsx:typeof b.title=="function"?b.title():b.title:hr.createElement(hr.Fragment,null,Lr||b.icon||b.promise?hr.createElement("div",{"data-icon":"",className:TA(He==null?void 0:He.icon,(h=b==null?void 0:b.classNames)==null?void 0:h.icon)},b.promise||b.type==="loading"&&!b.icon?b.icon||mt():null,b.type!=="loading"?b.icon||(it==null?void 0:it[Lr])||Qz(Lr):null):null,hr.createElement("div",{"data-content":"",className:TA(He==null?void 0:He.content,(o=b==null?void 0:b.classNames)==null?void 0:o.content)},hr.createElement("div",{"data-title":"",className:TA(He==null?void 0:He.title,(g=b==null?void 0:b.classNames)==null?void 0:g.title)},typeof b.title=="function"?b.title():b.title),b.description?hr.createElement("div",{"data-description":"",className:TA(Te,zr,He==null?void 0:He.description,(y=b==null?void 0:b.classNames)==null?void 0:y.description)},typeof b.description=="function"?b.description():b.description):null),re.isValidElement(b.cancel)?b.cancel:b.cancel&&xy(b.cancel)?hr.createElement("button",{"data-button":!0,"data-cancel":!0,style:b.cancelButtonStyle||Ue,onClick:Me=>{var Nt,nr;xy(b.cancel)&&Hr&&((nr=(Nt=b.cancel).onClick)==null||nr.call(Nt,Me),lt())},className:TA(He==null?void 0:He.cancelButton,(C=b==null?void 0:b.classNames)==null?void 0:C.cancelButton)},b.cancel.label):null,re.isValidElement(b.action)?b.action:b.action&&xy(b.action)?hr.createElement("button",{"data-button":!0,"data-action":!0,style:b.actionButtonStyle||te,onClick:Me=>{var Nt,nr;xy(b.action)&&((nr=(Nt=b.action).onClick)==null||nr.call(Nt,Me),!Me.defaultPrevented&&lt())},className:TA(He==null?void 0:He.actionButton,(I=b==null?void 0:b.classNames)==null?void 0:I.actionButton)},b.action.label):null))};function S4(){if(typeof window>"u"||typeof document>"u")return"ltr";let e=document.documentElement.getAttribute("dir");return e==="auto"||!e?window.getComputedStyle(document.documentElement).direction:e}function cH(e,t){let r={};return[e,t].forEach((i,a)=>{let u=a===1,h=u?"--mobile-offset":"--offset",o=u?nH:rH;function g(y){["top","right","bottom","left"].forEach(C=>{r[`${h}-${C}`]=typeof y=="number"?`${y}px`:y})}typeof i=="number"||typeof i=="string"?g(i):typeof i=="object"?["top","right","bottom","left"].forEach(y=>{i[y]===void 0?r[`${h}-${y}`]=o:r[`${h}-${y}`]=typeof i[y]=="number"?`${i[y]}px`:i[y]}):g(o)}),r}var uH=re.forwardRef(function(e,t){let{invert:r,position:i="bottom-right",hotkey:a=["altKey","KeyT"],expand:u,closeButton:h,className:o,offset:g,mobileOffset:y,theme:C="light",richColors:I,duration:F,style:b,visibleToasts:N=tH,toastOptions:U,dir:H=S4(),gap:k=sH,loadingIcon:R,icons:V,containerAriaLabel:W="Notifications",pauseWhenPageIsHidden:se}=e,[fe,ue]=hr.useState([]),ae=hr.useMemo(()=>Array.from(new Set([i].concat(fe.filter(ie=>ie.position).map(ie=>ie.position)))),[fe,i]),[Be,Ue]=hr.useState([]),[te,de]=hr.useState(!1),[Te,we]=hr.useState(!1),[st,Ze]=hr.useState(C!=="system"?C:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),At=hr.useRef(null),Le=a.join("+").replace(/Key/g,"").replace(/Digit/g,""),He=hr.useRef(null),it=hr.useRef(!1),Lt=hr.useCallback(ie=>{ue(Ce=>{var Pe;return(Pe=Ce.find($e=>$e.id===ie.id))!=null&&Pe.delete||Ha.dismiss(ie.id),Ce.filter(({id:$e})=>$e!==ie.id)})},[]);return hr.useEffect(()=>Ha.subscribe(ie=>{if(ie.dismiss){ue(Ce=>Ce.map(Pe=>Pe.id===ie.id?{...Pe,delete:!0}:Pe));return}setTimeout(()=>{tL.flushSync(()=>{ue(Ce=>{let Pe=Ce.findIndex($e=>$e.id===ie.id);return Pe!==-1?[...Ce.slice(0,Pe),{...Ce[Pe],...ie},...Ce.slice(Pe+1)]:[ie,...Ce]})})})}),[]),hr.useEffect(()=>{if(C!=="system"){Ze(C);return}if(C==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?Ze("dark"):Ze("light")),typeof window>"u")return;let ie=window.matchMedia("(prefers-color-scheme: dark)");try{ie.addEventListener("change",({matches:Ce})=>{Ze(Ce?"dark":"light")})}catch{ie.addListener(({matches:Pe})=>{try{Ze(Pe?"dark":"light")}catch($e){console.error($e)}})}},[C]),hr.useEffect(()=>{fe.length<=1&&de(!1)},[fe]),hr.useEffect(()=>{let ie=Ce=>{var Pe,$e;a.every(nt=>Ce[nt]||Ce.code===nt)&&(de(!0),(Pe=At.current)==null||Pe.focus()),Ce.code==="Escape"&&(document.activeElement===At.current||($e=At.current)!=null&&$e.contains(document.activeElement))&&de(!1)};return document.addEventListener("keydown",ie),()=>document.removeEventListener("keydown",ie)},[a]),hr.useEffect(()=>{if(At.current)return()=>{He.current&&(He.current.focus({preventScroll:!0}),He.current=null,it.current=!1)}},[At.current]),hr.createElement("section",{ref:t,"aria-label":`${W} ${Le}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},ae.map((ie,Ce)=>{var Pe;let[$e,nt]=ie.split("-");return fe.length?hr.createElement("ol",{key:ie,dir:H==="auto"?S4():H,tabIndex:-1,ref:At,className:o,"data-sonner-toaster":!0,"data-theme":st,"data-y-position":$e,"data-lifted":te&&fe.length>1&&!u,"data-x-position":nt,style:{"--front-toast-height":`${((Pe=Be[0])==null?void 0:Pe.height)||0}px`,"--width":`${iH}px`,"--gap":`${k}px`,...b,...cH(g,y)},onBlur:Xe=>{it.current&&!Xe.currentTarget.contains(Xe.relatedTarget)&&(it.current=!1,He.current&&(He.current.focus({preventScroll:!0}),He.current=null))},onFocus:Xe=>{Xe.target instanceof HTMLElement&&Xe.target.dataset.dismissible==="false"||it.current||(it.current=!0,He.current=Xe.relatedTarget)},onMouseEnter:()=>de(!0),onMouseMove:()=>de(!0),onMouseLeave:()=>{Te||de(!1)},onDragEnd:()=>de(!1),onPointerDown:Xe=>{Xe.target instanceof HTMLElement&&Xe.target.dataset.dismissible==="false"||we(!0)},onPointerUp:()=>we(!1)},fe.filter(Xe=>!Xe.position&&Ce===0||Xe.position===ie).map((Xe,pt)=>{var dt,Rt;return hr.createElement(AH,{key:Xe.id,icons:V,index:pt,toast:Xe,defaultRichColors:I,duration:(dt=U==null?void 0:U.duration)!=null?dt:F,className:U==null?void 0:U.className,descriptionClassName:U==null?void 0:U.descriptionClassName,invert:r,visibleToasts:N,closeButton:(Rt=U==null?void 0:U.closeButton)!=null?Rt:h,interacting:Te,position:ie,style:U==null?void 0:U.style,unstyled:U==null?void 0:U.unstyled,classNames:U==null?void 0:U.classNames,cancelButtonStyle:U==null?void 0:U.cancelButtonStyle,actionButtonStyle:U==null?void 0:U.actionButtonStyle,removeToast:Lt,toasts:fe.filter(Mt=>Mt.position==Xe.position),heights:Be.filter(Mt=>Mt.position==Xe.position),setHeights:Ue,expandByDefault:u,gap:k,loadingIcon:R,expanded:te,pauseWhenPageIsHidden:se,swipeDirections:e.swipeDirections})})):null}))});const hH=({...e})=>{const{theme:t="system"}=Dz();return X.jsx(uH,{theme:t,className:"toaster group",toastOptions:{classNames:{toast:"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg",description:"group-[.toast]:text-muted-foreground",actionButton:"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground",cancelButton:"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground"}},...e})};var dH=TB[" useId ".trim().toString()]||(()=>{}),fH=0;function a_(e){const[t,r]=re.useState(dH());return Io(()=>{r(i=>i??String(fH++))},[e]),t?`radix-${t}`:""}const pH=["top","right","bottom","left"],rd=Math.min,xl=Math.max,l1=Math.round,by=Math.floor,Uc=e=>({x:e,y:e}),mH={left:"right",right:"left",bottom:"top",top:"bottom"},gH={start:"end",end:"start"};function u2(e,t,r){return xl(e,rd(t,r))}function Ru(e,t){return typeof e=="function"?e(t):e}function Nu(e){return e.split("-")[0]}function cm(e){return e.split("-")[1]}function E5(e){return e==="x"?"y":"x"}function I5(e){return e==="y"?"height":"width"}const yH=new Set(["top","bottom"]);function Pc(e){return yH.has(Nu(e))?"y":"x"}function F5(e){return E5(Pc(e))}function vH(e,t,r){r===void 0&&(r=!1);const i=cm(e),a=F5(e),u=I5(a);let h=a==="x"?i===(r?"end":"start")?"right":"left":i==="start"?"bottom":"top";return t.reference[u]>t.floating[u]&&(h=A1(h)),[h,A1(h)]}function _H(e){const t=A1(e);return[h2(e),t,h2(t)]}function h2(e){return e.replace(/start|end/g,t=>gH[t])}const E4=["left","right"],I4=["right","left"],wH=["top","bottom"],xH=["bottom","top"];function bH(e,t,r){switch(e){case"top":case"bottom":return r?t?I4:E4:t?E4:I4;case"left":case"right":return t?wH:xH;default:return[]}}function BH(e,t,r,i){const a=cm(e);let u=bH(Nu(e),r==="start",i);return a&&(u=u.map(h=>h+"-"+a),t&&(u=u.concat(u.map(h2)))),u}function A1(e){return e.replace(/left|right|bottom|top/g,t=>mH[t])}function CH(e){return{top:0,right:0,bottom:0,left:0,...e}}function GL(e){return typeof e!="number"?CH(e):{top:e,right:e,bottom:e,left:e}}function c1(e){const{x:t,y:r,width:i,height:a}=e;return{width:i,height:a,top:r,left:t,right:t+i,bottom:r+a,x:t,y:r}}function F4(e,t,r){let{reference:i,floating:a}=e;const u=Pc(t),h=F5(t),o=I5(h),g=Nu(t),y=u==="y",C=i.x+i.width/2-a.width/2,I=i.y+i.height/2-a.height/2,F=i[o]/2-a[o]/2;let b;switch(g){case"top":b={x:C,y:i.y-a.height};break;case"bottom":b={x:C,y:i.y+i.height};break;case"right":b={x:i.x+i.width,y:I};break;case"left":b={x:i.x-a.width,y:I};break;default:b={x:i.x,y:i.y}}switch(cm(t)){case"start":b[h]-=F*(r&&y?-1:1);break;case"end":b[h]+=F*(r&&y?-1:1);break}return b}const SH=async(e,t,r)=>{const{placement:i="bottom",strategy:a="absolute",middleware:u=[],platform:h}=r,o=u.filter(Boolean),g=await(h.isRTL==null?void 0:h.isRTL(t));let y=await h.getElementRects({reference:e,floating:t,strategy:a}),{x:C,y:I}=F4(y,i,g),F=i,b={},N=0;for(let U=0;U<o.length;U++){const{name:H,fn:k}=o[U],{x:R,y:V,data:W,reset:se}=await k({x:C,y:I,initialPlacement:i,placement:F,strategy:a,middlewareData:b,rects:y,platform:h,elements:{reference:e,floating:t}});C=R??C,I=V??I,b={...b,[H]:{...b[H],...W}},se&&N<=50&&(N++,typeof se=="object"&&(se.placement&&(F=se.placement),se.rects&&(y=se.rects===!0?await h.getElementRects({reference:e,floating:t,strategy:a}):se.rects),{x:C,y:I}=F4(y,F,g)),U=-1)}return{x:C,y:I,placement:F,strategy:a,middlewareData:b}};async function e0(e,t){var r;t===void 0&&(t={});const{x:i,y:a,platform:u,rects:h,elements:o,strategy:g}=e,{boundary:y="clippingAncestors",rootBoundary:C="viewport",elementContext:I="floating",altBoundary:F=!1,padding:b=0}=Ru(t,e),N=GL(b),H=o[F?I==="floating"?"reference":"floating":I],k=c1(await u.getClippingRect({element:(r=await(u.isElement==null?void 0:u.isElement(H)))==null||r?H:H.contextElement||await(u.getDocumentElement==null?void 0:u.getDocumentElement(o.floating)),boundary:y,rootBoundary:C,strategy:g})),R=I==="floating"?{x:i,y:a,width:h.floating.width,height:h.floating.height}:h.reference,V=await(u.getOffsetParent==null?void 0:u.getOffsetParent(o.floating)),W=await(u.isElement==null?void 0:u.isElement(V))?await(u.getScale==null?void 0:u.getScale(V))||{x:1,y:1}:{x:1,y:1},se=c1(u.convertOffsetParentRelativeRectToViewportRelativeRect?await u.convertOffsetParentRelativeRectToViewportRelativeRect({elements:o,rect:R,offsetParent:V,strategy:g}):R);return{top:(k.top-se.top+N.top)/W.y,bottom:(se.bottom-k.bottom+N.bottom)/W.y,left:(k.left-se.left+N.left)/W.x,right:(se.right-k.right+N.right)/W.x}}const EH=e=>({name:"arrow",options:e,async fn(t){const{x:r,y:i,placement:a,rects:u,platform:h,elements:o,middlewareData:g}=t,{element:y,padding:C=0}=Ru(e,t)||{};if(y==null)return{};const I=GL(C),F={x:r,y:i},b=F5(a),N=I5(b),U=await h.getDimensions(y),H=b==="y",k=H?"top":"left",R=H?"bottom":"right",V=H?"clientHeight":"clientWidth",W=u.reference[N]+u.reference[b]-F[b]-u.floating[N],se=F[b]-u.reference[b],fe=await(h.getOffsetParent==null?void 0:h.getOffsetParent(y));let ue=fe?fe[V]:0;(!ue||!await(h.isElement==null?void 0:h.isElement(fe)))&&(ue=o.floating[V]||u.floating[N]);const ae=W/2-se/2,Be=ue/2-U[N]/2-1,Ue=rd(I[k],Be),te=rd(I[R],Be),de=Ue,Te=ue-U[N]-te,we=ue/2-U[N]/2+ae,st=u2(de,we,Te),Ze=!g.arrow&&cm(a)!=null&&we!==st&&u.reference[N]/2-(we<de?Ue:te)-U[N]/2<0,At=Ze?we<de?we-de:we-Te:0;return{[b]:F[b]+At,data:{[b]:st,centerOffset:we-st-At,...Ze&&{alignmentOffset:At}},reset:Ze}}}),IH=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var r,i;const{placement:a,middlewareData:u,rects:h,initialPlacement:o,platform:g,elements:y}=t,{mainAxis:C=!0,crossAxis:I=!0,fallbackPlacements:F,fallbackStrategy:b="bestFit",fallbackAxisSideDirection:N="none",flipAlignment:U=!0,...H}=Ru(e,t);if((r=u.arrow)!=null&&r.alignmentOffset)return{};const k=Nu(a),R=Pc(o),V=Nu(o)===o,W=await(g.isRTL==null?void 0:g.isRTL(y.floating)),se=F||(V||!U?[A1(o)]:_H(o)),fe=N!=="none";!F&&fe&&se.push(...BH(o,U,N,W));const ue=[o,...se],ae=await e0(t,H),Be=[];let Ue=((i=u.flip)==null?void 0:i.overflows)||[];if(C&&Be.push(ae[k]),I){const we=vH(a,h,W);Be.push(ae[we[0]],ae[we[1]])}if(Ue=[...Ue,{placement:a,overflows:Be}],!Be.every(we=>we<=0)){var te,de;const we=(((te=u.flip)==null?void 0:te.index)||0)+1,st=ue[we];if(st&&(!(I==="alignment"?R!==Pc(st):!1)||Ue.every(Le=>Le.overflows[0]>0&&Pc(Le.placement)===R)))return{data:{index:we,overflows:Ue},reset:{placement:st}};let Ze=(de=Ue.filter(At=>At.overflows[0]<=0).sort((At,Le)=>At.overflows[1]-Le.overflows[1])[0])==null?void 0:de.placement;if(!Ze)switch(b){case"bestFit":{var Te;const At=(Te=Ue.filter(Le=>{if(fe){const He=Pc(Le.placement);return He===R||He==="y"}return!0}).map(Le=>[Le.placement,Le.overflows.filter(He=>He>0).reduce((He,it)=>He+it,0)]).sort((Le,He)=>Le[1]-He[1])[0])==null?void 0:Te[0];At&&(Ze=At);break}case"initialPlacement":Ze=o;break}if(a!==Ze)return{reset:{placement:Ze}}}return{}}}};function T4(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function P4(e){return pH.some(t=>e[t]>=0)}const FH=function(e){return e===void 0&&(e={}),{name:"hide",options:e,async fn(t){const{rects:r}=t,{strategy:i="referenceHidden",...a}=Ru(e,t);switch(i){case"referenceHidden":{const u=await e0(t,{...a,elementContext:"reference"}),h=T4(u,r.reference);return{data:{referenceHiddenOffsets:h,referenceHidden:P4(h)}}}case"escaped":{const u=await e0(t,{...a,altBoundary:!0}),h=T4(u,r.floating);return{data:{escapedOffsets:h,escaped:P4(h)}}}default:return{}}}}},$L=new Set(["left","top"]);async function TH(e,t){const{placement:r,platform:i,elements:a}=e,u=await(i.isRTL==null?void 0:i.isRTL(a.floating)),h=Nu(r),o=cm(r),g=Pc(r)==="y",y=$L.has(h)?-1:1,C=u&&g?-1:1,I=Ru(t,e);let{mainAxis:F,crossAxis:b,alignmentAxis:N}=typeof I=="number"?{mainAxis:I,crossAxis:0,alignmentAxis:null}:{mainAxis:I.mainAxis||0,crossAxis:I.crossAxis||0,alignmentAxis:I.alignmentAxis};return o&&typeof N=="number"&&(b=o==="end"?N*-1:N),g?{x:b*C,y:F*y}:{x:F*y,y:b*C}}const PH=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var r,i;const{x:a,y:u,placement:h,middlewareData:o}=t,g=await TH(t,e);return h===((r=o.offset)==null?void 0:r.placement)&&(i=o.arrow)!=null&&i.alignmentOffset?{}:{x:a+g.x,y:u+g.y,data:{...g,placement:h}}}}},LH=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:r,y:i,placement:a}=t,{mainAxis:u=!0,crossAxis:h=!1,limiter:o={fn:H=>{let{x:k,y:R}=H;return{x:k,y:R}}},...g}=Ru(e,t),y={x:r,y:i},C=await e0(t,g),I=Pc(Nu(a)),F=E5(I);let b=y[F],N=y[I];if(u){const H=F==="y"?"top":"left",k=F==="y"?"bottom":"right",R=b+C[H],V=b-C[k];b=u2(R,b,V)}if(h){const H=I==="y"?"top":"left",k=I==="y"?"bottom":"right",R=N+C[H],V=N-C[k];N=u2(R,N,V)}const U=o.fn({...t,[F]:b,[I]:N});return{...U,data:{x:U.x-r,y:U.y-i,enabled:{[F]:u,[I]:h}}}}}},MH=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:r,y:i,placement:a,rects:u,middlewareData:h}=t,{offset:o=0,mainAxis:g=!0,crossAxis:y=!0}=Ru(e,t),C={x:r,y:i},I=Pc(a),F=E5(I);let b=C[F],N=C[I];const U=Ru(o,t),H=typeof U=="number"?{mainAxis:U,crossAxis:0}:{mainAxis:0,crossAxis:0,...U};if(g){const V=F==="y"?"height":"width",W=u.reference[F]-u.floating[V]+H.mainAxis,se=u.reference[F]+u.reference[V]-H.mainAxis;b<W?b=W:b>se&&(b=se)}if(y){var k,R;const V=F==="y"?"width":"height",W=$L.has(Nu(a)),se=u.reference[I]-u.floating[V]+(W&&((k=h.offset)==null?void 0:k[I])||0)+(W?0:H.crossAxis),fe=u.reference[I]+u.reference[V]+(W?0:((R=h.offset)==null?void 0:R[I])||0)-(W?H.crossAxis:0);N<se?N=se:N>fe&&(N=fe)}return{[F]:b,[I]:N}}}},kH=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){var r,i;const{placement:a,rects:u,platform:h,elements:o}=t,{apply:g=()=>{},...y}=Ru(e,t),C=await e0(t,y),I=Nu(a),F=cm(a),b=Pc(a)==="y",{width:N,height:U}=u.floating;let H,k;I==="top"||I==="bottom"?(H=I,k=F===(await(h.isRTL==null?void 0:h.isRTL(o.floating))?"start":"end")?"left":"right"):(k=I,H=F==="end"?"top":"bottom");const R=U-C.top-C.bottom,V=N-C.left-C.right,W=rd(U-C[H],R),se=rd(N-C[k],V),fe=!t.middlewareData.shift;let ue=W,ae=se;if((r=t.middlewareData.shift)!=null&&r.enabled.x&&(ae=V),(i=t.middlewareData.shift)!=null&&i.enabled.y&&(ue=R),fe&&!F){const Ue=xl(C.left,0),te=xl(C.right,0),de=xl(C.top,0),Te=xl(C.bottom,0);b?ae=N-2*(Ue!==0||te!==0?Ue+te:xl(C.left,C.right)):ue=U-2*(de!==0||Te!==0?de+Te:xl(C.top,C.bottom))}await g({...t,availableWidth:ae,availableHeight:ue});const Be=await h.getDimensions(o.floating);return N!==Be.width||U!==Be.height?{reset:{rects:!0}}:{}}}};function l_(){return typeof window<"u"}function um(e){return qL(e)?(e.nodeName||"").toLowerCase():"#document"}function El(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function zc(e){var t;return(t=(qL(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function qL(e){return l_()?e instanceof Node||e instanceof El(e).Node:!1}function GA(e){return l_()?e instanceof Element||e instanceof El(e).Element:!1}function Oc(e){return l_()?e instanceof HTMLElement||e instanceof El(e).HTMLElement:!1}function L4(e){return!l_()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof El(e).ShadowRoot}const UH=new Set(["inline","contents"]);function I0(e){const{overflow:t,overflowX:r,overflowY:i,display:a}=$A(e);return/auto|scroll|overlay|hidden|clip/.test(t+i+r)&&!UH.has(a)}const RH=new Set(["table","td","th"]);function NH(e){return RH.has(um(e))}const DH=[":popover-open",":modal"];function A_(e){return DH.some(t=>{try{return e.matches(t)}catch{return!1}})}const QH=["transform","translate","scale","rotate","perspective"],OH=["transform","translate","scale","rotate","perspective","filter"],zH=["paint","layout","strict","content"];function T5(e){const t=P5(),r=GA(e)?$A(e):e;return QH.some(i=>r[i]?r[i]!=="none":!1)||(r.containerType?r.containerType!=="normal":!1)||!t&&(r.backdropFilter?r.backdropFilter!=="none":!1)||!t&&(r.filter?r.filter!=="none":!1)||OH.some(i=>(r.willChange||"").includes(i))||zH.some(i=>(r.contain||"").includes(i))}function HH(e){let t=nd(e);for(;Oc(t)&&!em(t);){if(T5(t))return t;if(A_(t))return null;t=nd(t)}return null}function P5(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const jH=new Set(["html","body","#document"]);function em(e){return jH.has(um(e))}function $A(e){return El(e).getComputedStyle(e)}function c_(e){return GA(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function nd(e){if(um(e)==="html")return e;const t=e.assignedSlot||e.parentNode||L4(e)&&e.host||zc(e);return L4(t)?t.host:t}function ZL(e){const t=nd(e);return em(t)?e.ownerDocument?e.ownerDocument.body:e.body:Oc(t)&&I0(t)?t:ZL(t)}function t0(e,t,r){var i;t===void 0&&(t=[]),r===void 0&&(r=!0);const a=ZL(e),u=a===((i=e.ownerDocument)==null?void 0:i.body),h=El(a);if(u){const o=d2(h);return t.concat(h,h.visualViewport||[],I0(a)?a:[],o&&r?t0(o):[])}return t.concat(a,t0(a,[],r))}function d2(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function WL(e){const t=$A(e);let r=parseFloat(t.width)||0,i=parseFloat(t.height)||0;const a=Oc(e),u=a?e.offsetWidth:r,h=a?e.offsetHeight:i,o=l1(r)!==u||l1(i)!==h;return o&&(r=u,i=h),{width:r,height:i,$:o}}function L5(e){return GA(e)?e:e.contextElement}function Ep(e){const t=L5(e);if(!Oc(t))return Uc(1);const r=t.getBoundingClientRect(),{width:i,height:a,$:u}=WL(t);let h=(u?l1(r.width):r.width)/i,o=(u?l1(r.height):r.height)/a;return(!h||!Number.isFinite(h))&&(h=1),(!o||!Number.isFinite(o))&&(o=1),{x:h,y:o}}const VH=Uc(0);function XL(e){const t=El(e);return!P5()||!t.visualViewport?VH:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function KH(e,t,r){return t===void 0&&(t=!1),!r||t&&r!==El(e)?!1:t}function lf(e,t,r,i){t===void 0&&(t=!1),r===void 0&&(r=!1);const a=e.getBoundingClientRect(),u=L5(e);let h=Uc(1);t&&(i?GA(i)&&(h=Ep(i)):h=Ep(e));const o=KH(u,r,i)?XL(u):Uc(0);let g=(a.left+o.x)/h.x,y=(a.top+o.y)/h.y,C=a.width/h.x,I=a.height/h.y;if(u){const F=El(u),b=i&&GA(i)?El(i):i;let N=F,U=d2(N);for(;U&&i&&b!==N;){const H=Ep(U),k=U.getBoundingClientRect(),R=$A(U),V=k.left+(U.clientLeft+parseFloat(R.paddingLeft))*H.x,W=k.top+(U.clientTop+parseFloat(R.paddingTop))*H.y;g*=H.x,y*=H.y,C*=H.x,I*=H.y,g+=V,y+=W,N=El(U),U=d2(N)}}return c1({width:C,height:I,x:g,y})}function M5(e,t){const r=c_(e).scrollLeft;return t?t.left+r:lf(zc(e)).left+r}function YL(e,t,r){r===void 0&&(r=!1);const i=e.getBoundingClientRect(),a=i.left+t.scrollLeft-(r?0:M5(e,i)),u=i.top+t.scrollTop;return{x:a,y:u}}function GH(e){let{elements:t,rect:r,offsetParent:i,strategy:a}=e;const u=a==="fixed",h=zc(i),o=t?A_(t.floating):!1;if(i===h||o&&u)return r;let g={scrollLeft:0,scrollTop:0},y=Uc(1);const C=Uc(0),I=Oc(i);if((I||!I&&!u)&&((um(i)!=="body"||I0(h))&&(g=c_(i)),Oc(i))){const b=lf(i);y=Ep(i),C.x=b.x+i.clientLeft,C.y=b.y+i.clientTop}const F=h&&!I&&!u?YL(h,g,!0):Uc(0);return{width:r.width*y.x,height:r.height*y.y,x:r.x*y.x-g.scrollLeft*y.x+C.x+F.x,y:r.y*y.y-g.scrollTop*y.y+C.y+F.y}}function $H(e){return Array.from(e.getClientRects())}function qH(e){const t=zc(e),r=c_(e),i=e.ownerDocument.body,a=xl(t.scrollWidth,t.clientWidth,i.scrollWidth,i.clientWidth),u=xl(t.scrollHeight,t.clientHeight,i.scrollHeight,i.clientHeight);let h=-r.scrollLeft+M5(e);const o=-r.scrollTop;return $A(i).direction==="rtl"&&(h+=xl(t.clientWidth,i.clientWidth)-a),{width:a,height:u,x:h,y:o}}function ZH(e,t){const r=El(e),i=zc(e),a=r.visualViewport;let u=i.clientWidth,h=i.clientHeight,o=0,g=0;if(a){u=a.width,h=a.height;const y=P5();(!y||y&&t==="fixed")&&(o=a.offsetLeft,g=a.offsetTop)}return{width:u,height:h,x:o,y:g}}const WH=new Set(["absolute","fixed"]);function XH(e,t){const r=lf(e,!0,t==="fixed"),i=r.top+e.clientTop,a=r.left+e.clientLeft,u=Oc(e)?Ep(e):Uc(1),h=e.clientWidth*u.x,o=e.clientHeight*u.y,g=a*u.x,y=i*u.y;return{width:h,height:o,x:g,y}}function M4(e,t,r){let i;if(t==="viewport")i=ZH(e,r);else if(t==="document")i=qH(zc(e));else if(GA(t))i=XH(t,r);else{const a=XL(e);i={x:t.x-a.x,y:t.y-a.y,width:t.width,height:t.height}}return c1(i)}function JL(e,t){const r=nd(e);return r===t||!GA(r)||em(r)?!1:$A(r).position==="fixed"||JL(r,t)}function YH(e,t){const r=t.get(e);if(r)return r;let i=t0(e,[],!1).filter(o=>GA(o)&&um(o)!=="body"),a=null;const u=$A(e).position==="fixed";let h=u?nd(e):e;for(;GA(h)&&!em(h);){const o=$A(h),g=T5(h);!g&&o.position==="fixed"&&(a=null),(u?!g&&!a:!g&&o.position==="static"&&!!a&&WH.has(a.position)||I0(h)&&!g&&JL(e,h))?i=i.filter(C=>C!==h):a=o,h=nd(h)}return t.set(e,i),i}function JH(e){let{element:t,boundary:r,rootBoundary:i,strategy:a}=e;const h=[...r==="clippingAncestors"?A_(t)?[]:YH(t,this._c):[].concat(r),i],o=h[0],g=h.reduce((y,C)=>{const I=M4(t,C,a);return y.top=xl(I.top,y.top),y.right=rd(I.right,y.right),y.bottom=rd(I.bottom,y.bottom),y.left=xl(I.left,y.left),y},M4(t,o,a));return{width:g.right-g.left,height:g.bottom-g.top,x:g.left,y:g.top}}function e7(e){const{width:t,height:r}=WL(e);return{width:t,height:r}}function t7(e,t,r){const i=Oc(t),a=zc(t),u=r==="fixed",h=lf(e,!0,u,t);let o={scrollLeft:0,scrollTop:0};const g=Uc(0);function y(){g.x=M5(a)}if(i||!i&&!u)if((um(t)!=="body"||I0(a))&&(o=c_(t)),i){const b=lf(t,!0,u,t);g.x=b.x+t.clientLeft,g.y=b.y+t.clientTop}else a&&y();u&&!i&&a&&y();const C=a&&!i&&!u?YL(a,o):Uc(0),I=h.left+o.scrollLeft-g.x-C.x,F=h.top+o.scrollTop-g.y-C.y;return{x:I,y:F,width:h.width,height:h.height}}function lx(e){return $A(e).position==="static"}function k4(e,t){if(!Oc(e)||$A(e).position==="fixed")return null;if(t)return t(e);let r=e.offsetParent;return zc(e)===r&&(r=r.ownerDocument.body),r}function eM(e,t){const r=El(e);if(A_(e))return r;if(!Oc(e)){let a=nd(e);for(;a&&!em(a);){if(GA(a)&&!lx(a))return a;a=nd(a)}return r}let i=k4(e,t);for(;i&&NH(i)&&lx(i);)i=k4(i,t);return i&&em(i)&&lx(i)&&!T5(i)?r:i||HH(e)||r}const r7=async function(e){const t=this.getOffsetParent||eM,r=this.getDimensions,i=await r(e.floating);return{reference:t7(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:i.width,height:i.height}}};function n7(e){return $A(e).direction==="rtl"}const i7={convertOffsetParentRelativeRectToViewportRelativeRect:GH,getDocumentElement:zc,getClippingRect:JH,getOffsetParent:eM,getElementRects:r7,getClientRects:$H,getDimensions:e7,getScale:Ep,isElement:GA,isRTL:n7};function tM(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function s7(e,t){let r=null,i;const a=zc(e);function u(){var o;clearTimeout(i),(o=r)==null||o.disconnect(),r=null}function h(o,g){o===void 0&&(o=!1),g===void 0&&(g=1),u();const y=e.getBoundingClientRect(),{left:C,top:I,width:F,height:b}=y;if(o||t(),!F||!b)return;const N=by(I),U=by(a.clientWidth-(C+F)),H=by(a.clientHeight-(I+b)),k=by(C),V={rootMargin:-N+"px "+-U+"px "+-H+"px "+-k+"px",threshold:xl(0,rd(1,g))||1};let W=!0;function se(fe){const ue=fe[0].intersectionRatio;if(ue!==g){if(!W)return h();ue?h(!1,ue):i=setTimeout(()=>{h(!1,1e-7)},1e3)}ue===1&&!tM(y,e.getBoundingClientRect())&&h(),W=!1}try{r=new IntersectionObserver(se,{...V,root:a.ownerDocument})}catch{r=new IntersectionObserver(se,V)}r.observe(e)}return h(!0),u}function o7(e,t,r,i){i===void 0&&(i={});const{ancestorScroll:a=!0,ancestorResize:u=!0,elementResize:h=typeof ResizeObserver=="function",layoutShift:o=typeof IntersectionObserver=="function",animationFrame:g=!1}=i,y=L5(e),C=a||u?[...y?t0(y):[],...t0(t)]:[];C.forEach(k=>{a&&k.addEventListener("scroll",r,{passive:!0}),u&&k.addEventListener("resize",r)});const I=y&&o?s7(y,r):null;let F=-1,b=null;h&&(b=new ResizeObserver(k=>{let[R]=k;R&&R.target===y&&b&&(b.unobserve(t),cancelAnimationFrame(F),F=requestAnimationFrame(()=>{var V;(V=b)==null||V.observe(t)})),r()}),y&&!g&&b.observe(y),b.observe(t));let N,U=g?lf(e):null;g&&H();function H(){const k=lf(e);U&&!tM(U,k)&&r(),U=k,N=requestAnimationFrame(H)}return r(),()=>{var k;C.forEach(R=>{a&&R.removeEventListener("scroll",r),u&&R.removeEventListener("resize",r)}),I==null||I(),(k=b)==null||k.disconnect(),b=null,g&&cancelAnimationFrame(N)}}const a7=PH,l7=LH,A7=IH,c7=kH,u7=FH,U4=EH,h7=MH,d7=(e,t,r)=>{const i=new Map,a={platform:i7,...r},u={...a.platform,_c:i};return SH(e,t,{...a,platform:u})};var f7=typeof document<"u",p7=function(){},Bv=f7?re.useLayoutEffect:p7;function u1(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let r,i,a;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(r=e.length,r!==t.length)return!1;for(i=r;i--!==0;)if(!u1(e[i],t[i]))return!1;return!0}if(a=Object.keys(e),r=a.length,r!==Object.keys(t).length)return!1;for(i=r;i--!==0;)if(!{}.hasOwnProperty.call(t,a[i]))return!1;for(i=r;i--!==0;){const u=a[i];if(!(u==="_owner"&&e.$$typeof)&&!u1(e[u],t[u]))return!1}return!0}return e!==e&&t!==t}function rM(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function R4(e,t){const r=rM(e);return Math.round(t*r)/r}function Ax(e){const t=re.useRef(e);return Bv(()=>{t.current=e}),t}function m7(e){e===void 0&&(e={});const{placement:t="bottom",strategy:r="absolute",middleware:i=[],platform:a,elements:{reference:u,floating:h}={},transform:o=!0,whileElementsMounted:g,open:y}=e,[C,I]=re.useState({x:0,y:0,strategy:r,placement:t,middlewareData:{},isPositioned:!1}),[F,b]=re.useState(i);u1(F,i)||b(i);const[N,U]=re.useState(null),[H,k]=re.useState(null),R=re.useCallback(Le=>{Le!==fe.current&&(fe.current=Le,U(Le))},[]),V=re.useCallback(Le=>{Le!==ue.current&&(ue.current=Le,k(Le))},[]),W=u||N,se=h||H,fe=re.useRef(null),ue=re.useRef(null),ae=re.useRef(C),Be=g!=null,Ue=Ax(g),te=Ax(a),de=Ax(y),Te=re.useCallback(()=>{if(!fe.current||!ue.current)return;const Le={placement:t,strategy:r,middleware:F};te.current&&(Le.platform=te.current),d7(fe.current,ue.current,Le).then(He=>{const it={...He,isPositioned:de.current!==!1};we.current&&!u1(ae.current,it)&&(ae.current=it,mf.flushSync(()=>{I(it)}))})},[F,t,r,te,de]);Bv(()=>{y===!1&&ae.current.isPositioned&&(ae.current.isPositioned=!1,I(Le=>({...Le,isPositioned:!1})))},[y]);const we=re.useRef(!1);Bv(()=>(we.current=!0,()=>{we.current=!1}),[]),Bv(()=>{if(W&&(fe.current=W),se&&(ue.current=se),W&&se){if(Ue.current)return Ue.current(W,se,Te);Te()}},[W,se,Te,Ue,Be]);const st=re.useMemo(()=>({reference:fe,floating:ue,setReference:R,setFloating:V}),[R,V]),Ze=re.useMemo(()=>({reference:W,floating:se}),[W,se]),At=re.useMemo(()=>{const Le={position:r,left:0,top:0};if(!Ze.floating)return Le;const He=R4(Ze.floating,C.x),it=R4(Ze.floating,C.y);return o?{...Le,transform:"translate("+He+"px, "+it+"px)",...rM(Ze.floating)>=1.5&&{willChange:"transform"}}:{position:r,left:He,top:it}},[r,o,Ze.floating,C.x,C.y]);return re.useMemo(()=>({...C,update:Te,refs:st,elements:Ze,floatingStyles:At}),[C,Te,st,Ze,At])}const g7=e=>{function t(r){return{}.hasOwnProperty.call(r,"current")}return{name:"arrow",options:e,fn(r){const{element:i,padding:a}=typeof e=="function"?e(r):e;return i&&t(i)?i.current!=null?U4({element:i.current,padding:a}).fn(r):{}:i?U4({element:i,padding:a}).fn(r):{}}}},y7=(e,t)=>({...a7(e),options:[e,t]}),v7=(e,t)=>({...l7(e),options:[e,t]}),_7=(e,t)=>({...h7(e),options:[e,t]}),w7=(e,t)=>({...A7(e),options:[e,t]}),x7=(e,t)=>({...c7(e),options:[e,t]}),b7=(e,t)=>({...u7(e),options:[e,t]}),B7=(e,t)=>({...g7(e),options:[e,t]});var C7="Arrow",nM=re.forwardRef((e,t)=>{const{children:r,width:i=10,height:a=5,...u}=e;return X.jsx(bn.svg,{...u,ref:t,width:i,height:a,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:e.asChild?r:X.jsx("polygon",{points:"0,0 30,0 15,10"})})});nM.displayName=C7;var S7=nM;function k5(e){const[t,r]=re.useState(void 0);return Io(()=>{if(e){r({width:e.offsetWidth,height:e.offsetHeight});const i=new ResizeObserver(a=>{if(!Array.isArray(a)||!a.length)return;const u=a[0];let h,o;if("borderBoxSize"in u){const g=u.borderBoxSize,y=Array.isArray(g)?g[0]:g;h=y.inlineSize,o=y.blockSize}else h=e.offsetWidth,o=e.offsetHeight;r({width:h,height:o})});return i.observe(e,{box:"border-box"}),()=>i.unobserve(e)}else r(void 0)},[e]),t}var U5="Popper",[iM,u_]=Ou(U5),[E7,sM]=iM(U5),oM=e=>{const{__scopePopper:t,children:r}=e,[i,a]=re.useState(null);return X.jsx(E7,{scope:t,anchor:i,onAnchorChange:a,children:r})};oM.displayName=U5;var aM="PopperAnchor",lM=re.forwardRef((e,t)=>{const{__scopePopper:r,virtualRef:i,...a}=e,u=sM(aM,r),h=re.useRef(null),o=ci(t,h);return re.useEffect(()=>{u.onAnchorChange((i==null?void 0:i.current)||h.current)}),i?null:X.jsx(bn.div,{...a,ref:o})});lM.displayName=aM;var R5="PopperContent",[I7,F7]=iM(R5),AM=re.forwardRef((e,t)=>{var Xe,pt,dt,Rt,Mt,$t;const{__scopePopper:r,side:i="bottom",sideOffset:a=0,align:u="center",alignOffset:h=0,arrowPadding:o=0,avoidCollisions:g=!0,collisionBoundary:y=[],collisionPadding:C=0,sticky:I="partial",hideWhenDetached:F=!1,updatePositionStrategy:b="optimized",onPlaced:N,...U}=e,H=sM(R5,r),[k,R]=re.useState(null),V=ci(t,jt=>R(jt)),[W,se]=re.useState(null),fe=k5(W),ue=(fe==null?void 0:fe.width)??0,ae=(fe==null?void 0:fe.height)??0,Be=i+(u!=="center"?"-"+u:""),Ue=typeof C=="number"?C:{top:0,right:0,bottom:0,left:0,...C},te=Array.isArray(y)?y:[y],de=te.length>0,Te={padding:Ue,boundary:te.filter(P7),altBoundary:de},{refs:we,floatingStyles:st,placement:Ze,isPositioned:At,middlewareData:Le}=m7({strategy:"fixed",placement:Be,whileElementsMounted:(...jt)=>o7(...jt,{animationFrame:b==="always"}),elements:{reference:H.anchor},middleware:[y7({mainAxis:a+ae,alignmentAxis:h}),g&&v7({mainAxis:!0,crossAxis:!1,limiter:I==="partial"?_7():void 0,...Te}),g&&w7({...Te}),x7({...Te,apply:({elements:jt,rects:vr,availableWidth:Ft,availableHeight:Ge})=>{const{width:Cr,height:pr}=vr.reference,Kt=jt.floating.style;Kt.setProperty("--radix-popper-available-width",`${Ft}px`),Kt.setProperty("--radix-popper-available-height",`${Ge}px`),Kt.setProperty("--radix-popper-anchor-width",`${Cr}px`),Kt.setProperty("--radix-popper-anchor-height",`${pr}px`)}}),W&&B7({element:W,padding:o}),L7({arrowWidth:ue,arrowHeight:ae}),F&&b7({strategy:"referenceHidden",...Te})]}),[He,it]=hM(Ze),Lt=rA(N);Io(()=>{At&&(Lt==null||Lt())},[At,Lt]);const ie=(Xe=Le.arrow)==null?void 0:Xe.x,Ce=(pt=Le.arrow)==null?void 0:pt.y,Pe=((dt=Le.arrow)==null?void 0:dt.centerOffset)!==0,[$e,nt]=re.useState();return Io(()=>{k&&nt(window.getComputedStyle(k).zIndex)},[k]),X.jsx("div",{ref:we.setFloating,"data-radix-popper-content-wrapper":"",style:{...st,transform:At?st.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:$e,"--radix-popper-transform-origin":[(Rt=Le.transformOrigin)==null?void 0:Rt.x,(Mt=Le.transformOrigin)==null?void 0:Mt.y].join(" "),...(($t=Le.hide)==null?void 0:$t.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:e.dir,children:X.jsx(I7,{scope:r,placedSide:He,onArrowChange:se,arrowX:ie,arrowY:Ce,shouldHideArrow:Pe,children:X.jsx(bn.div,{"data-side":He,"data-align":it,...U,ref:V,style:{...U.style,animation:At?void 0:"none"}})})})});AM.displayName=R5;var cM="PopperArrow",T7={top:"bottom",right:"left",bottom:"top",left:"right"},uM=re.forwardRef(function(t,r){const{__scopePopper:i,...a}=t,u=F7(cM,i),h=T7[u.placedSide];return X.jsx("span",{ref:u.onArrowChange,style:{position:"absolute",left:u.arrowX,top:u.arrowY,[h]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[u.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[u.placedSide],visibility:u.shouldHideArrow?"hidden":void 0},children:X.jsx(S7,{...a,ref:r,style:{...a.style,display:"block"}})})});uM.displayName=cM;function P7(e){return e!==null}var L7=e=>({name:"transformOrigin",options:e,fn(t){var H,k,R;const{placement:r,rects:i,middlewareData:a}=t,h=((H=a.arrow)==null?void 0:H.centerOffset)!==0,o=h?0:e.arrowWidth,g=h?0:e.arrowHeight,[y,C]=hM(r),I={start:"0%",center:"50%",end:"100%"}[C],F=(((k=a.arrow)==null?void 0:k.x)??0)+o/2,b=(((R=a.arrow)==null?void 0:R.y)??0)+g/2;let N="",U="";return y==="bottom"?(N=h?I:`${F}px`,U=`${-g}px`):y==="top"?(N=h?I:`${F}px`,U=`${i.floating.height+g}px`):y==="right"?(N=`${-g}px`,U=h?I:`${b}px`):y==="left"&&(N=`${i.floating.width+g}px`,U=h?I:`${b}px`),{data:{x:N,y:U}}}});function hM(e){const[t,r="center"]=e.split("-");return[t,r]}var M7=oM,dM=lM,fM=AM,pM=uM,[h_,mre]=Ou("Tooltip",[u_]),N5=u_(),mM="TooltipProvider",k7=700,N4="tooltip.open",[U7,gM]=h_(mM),yM=e=>{const{__scopeTooltip:t,delayDuration:r=k7,skipDelayDuration:i=300,disableHoverableContent:a=!1,children:u}=e,h=re.useRef(!0),o=re.useRef(!1),g=re.useRef(0);return re.useEffect(()=>{const y=g.current;return()=>window.clearTimeout(y)},[]),X.jsx(U7,{scope:t,isOpenDelayedRef:h,delayDuration:r,onOpen:re.useCallback(()=>{window.clearTimeout(g.current),h.current=!1},[]),onClose:re.useCallback(()=>{window.clearTimeout(g.current),g.current=window.setTimeout(()=>h.current=!0,i)},[i]),isPointerInTransitRef:o,onPointerInTransitChange:re.useCallback(y=>{o.current=y},[]),disableHoverableContent:a,children:u})};yM.displayName=mM;var vM="Tooltip",[gre,d_]=h_(vM),f2="TooltipTrigger",R7=re.forwardRef((e,t)=>{const{__scopeTooltip:r,...i}=e,a=d_(f2,r),u=gM(f2,r),h=N5(r),o=re.useRef(null),g=ci(t,o,a.onTriggerChange),y=re.useRef(!1),C=re.useRef(!1),I=re.useCallback(()=>y.current=!1,[]);return re.useEffect(()=>()=>document.removeEventListener("pointerup",I),[I]),X.jsx(dM,{asChild:!0,...h,children:X.jsx(bn.button,{"aria-describedby":a.open?a.contentId:void 0,"data-state":a.stateAttribute,...i,ref:g,onPointerMove:on(e.onPointerMove,F=>{F.pointerType!=="touch"&&!C.current&&!u.isPointerInTransitRef.current&&(a.onTriggerEnter(),C.current=!0)}),onPointerLeave:on(e.onPointerLeave,()=>{a.onTriggerLeave(),C.current=!1}),onPointerDown:on(e.onPointerDown,()=>{a.open&&a.onClose(),y.current=!0,document.addEventListener("pointerup",I,{once:!0})}),onFocus:on(e.onFocus,()=>{y.current||a.onOpen()}),onBlur:on(e.onBlur,a.onClose),onClick:on(e.onClick,a.onClose)})})});R7.displayName=f2;var N7="TooltipPortal",[yre,D7]=h_(N7,{forceMount:void 0}),tm="TooltipContent",_M=re.forwardRef((e,t)=>{const r=D7(tm,e.__scopeTooltip),{forceMount:i=r.forceMount,side:a="top",...u}=e,h=d_(tm,e.__scopeTooltip);return X.jsx(S0,{present:i||h.open,children:h.disableHoverableContent?X.jsx(wM,{side:a,...u,ref:t}):X.jsx(Q7,{side:a,...u,ref:t})})}),Q7=re.forwardRef((e,t)=>{const r=d_(tm,e.__scopeTooltip),i=gM(tm,e.__scopeTooltip),a=re.useRef(null),u=ci(t,a),[h,o]=re.useState(null),{trigger:g,onClose:y}=r,C=a.current,{onPointerInTransitChange:I}=i,F=re.useCallback(()=>{o(null),I(!1)},[I]),b=re.useCallback((N,U)=>{const H=N.currentTarget,k={x:N.clientX,y:N.clientY},R=V7(k,H.getBoundingClientRect()),V=K7(k,R),W=G7(U.getBoundingClientRect()),se=q7([...V,...W]);o(se),I(!0)},[I]);return re.useEffect(()=>()=>F(),[F]),re.useEffect(()=>{if(g&&C){const N=H=>b(H,C),U=H=>b(H,g);return g.addEventListener("pointerleave",N),C.addEventListener("pointerleave",U),()=>{g.removeEventListener("pointerleave",N),C.removeEventListener("pointerleave",U)}}},[g,C,b,F]),re.useEffect(()=>{if(h){const N=U=>{const H=U.target,k={x:U.clientX,y:U.clientY},R=(g==null?void 0:g.contains(H))||(C==null?void 0:C.contains(H)),V=!$7(k,h);R?F():V&&(F(),y())};return document.addEventListener("pointermove",N),()=>document.removeEventListener("pointermove",N)}},[g,C,h,y,F]),X.jsx(wM,{...e,ref:u})}),[O7,z7]=h_(vM,{isInside:!1}),H7=X8("TooltipContent"),wM=re.forwardRef((e,t)=>{const{__scopeTooltip:r,children:i,"aria-label":a,onEscapeKeyDown:u,onPointerDownOutside:h,...o}=e,g=d_(tm,r),y=N5(r),{onClose:C}=g;return re.useEffect(()=>(document.addEventListener(N4,C),()=>document.removeEventListener(N4,C)),[C]),re.useEffect(()=>{if(g.trigger){const I=F=>{const b=F.target;b!=null&&b.contains(g.trigger)&&C()};return window.addEventListener("scroll",I,{capture:!0}),()=>window.removeEventListener("scroll",I,{capture:!0})}},[g.trigger,C]),X.jsx(r_,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:u,onPointerDownOutside:h,onFocusOutside:I=>I.preventDefault(),onDismiss:C,children:X.jsxs(fM,{"data-state":g.stateAttribute,...y,...o,ref:t,style:{...o.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[X.jsx(H7,{children:i}),X.jsx(O7,{scope:r,isInside:!0,children:X.jsx(vO,{id:g.contentId,role:"tooltip",children:a||i})})]})})});_M.displayName=tm;var xM="TooltipArrow",j7=re.forwardRef((e,t)=>{const{__scopeTooltip:r,...i}=e,a=N5(r);return z7(xM,r).isInside?null:X.jsx(pM,{...a,...i,ref:t})});j7.displayName=xM;function V7(e,t){const r=Math.abs(t.top-e.y),i=Math.abs(t.bottom-e.y),a=Math.abs(t.right-e.x),u=Math.abs(t.left-e.x);switch(Math.min(r,i,a,u)){case u:return"left";case a:return"right";case r:return"top";case i:return"bottom";default:throw new Error("unreachable")}}function K7(e,t,r=5){const i=[];switch(t){case"top":i.push({x:e.x-r,y:e.y+r},{x:e.x+r,y:e.y+r});break;case"bottom":i.push({x:e.x-r,y:e.y-r},{x:e.x+r,y:e.y-r});break;case"left":i.push({x:e.x+r,y:e.y-r},{x:e.x+r,y:e.y+r});break;case"right":i.push({x:e.x-r,y:e.y-r},{x:e.x-r,y:e.y+r});break}return i}function G7(e){const{top:t,right:r,bottom:i,left:a}=e;return[{x:a,y:t},{x:r,y:t},{x:r,y:i},{x:a,y:i}]}function $7(e,t){const{x:r,y:i}=e;let a=!1;for(let u=0,h=t.length-1;u<t.length;h=u++){const o=t[u],g=t[h],y=o.x,C=o.y,I=g.x,F=g.y;C>i!=F>i&&r<(I-y)*(i-C)/(F-C)+y&&(a=!a)}return a}function q7(e){const t=e.slice();return t.sort((r,i)=>r.x<i.x?-1:r.x>i.x?1:r.y<i.y?-1:r.y>i.y?1:0),Z7(t)}function Z7(e){if(e.length<=1)return e.slice();const t=[];for(let i=0;i<e.length;i++){const a=e[i];for(;t.length>=2;){const u=t[t.length-1],h=t[t.length-2];if((u.x-h.x)*(a.y-h.y)>=(u.y-h.y)*(a.x-h.x))t.pop();else break}t.push(a)}t.pop();const r=[];for(let i=e.length-1;i>=0;i--){const a=e[i];for(;r.length>=2;){const u=r[r.length-1],h=r[r.length-2];if((u.x-h.x)*(a.y-h.y)>=(u.y-h.y)*(a.x-h.x))r.pop();else break}r.push(a)}return r.pop(),t.length===1&&r.length===1&&t[0].x===r[0].x&&t[0].y===r[0].y?t:t.concat(r)}var W7=yM,bM=_M;const X7=W7,Y7=re.forwardRef(({className:e,sideOffset:t=4,...r},i)=>X.jsx(bM,{ref:i,sideOffset:t,className:Qn("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...r}));Y7.displayName=bM.displayName;var f_=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},p_=typeof window>"u"||"Deno"in globalThis;function RA(){}function J7(e,t){return typeof e=="function"?e(t):e}function ej(e){return typeof e=="number"&&e>=0&&e!==1/0}function tj(e,t){return Math.max(e+(t||0)-Date.now(),0)}function p2(e,t){return typeof e=="function"?e(t):e}function rj(e,t){return typeof e=="function"?e(t):e}function D4(e,t){const{type:r="all",exact:i,fetchStatus:a,predicate:u,queryKey:h,stale:o}=e;if(h){if(i){if(t.queryHash!==D5(h,t.options))return!1}else if(!n0(t.queryKey,h))return!1}if(r!=="all"){const g=t.isActive();if(r==="active"&&!g||r==="inactive"&&g)return!1}return!(typeof o=="boolean"&&t.isStale()!==o||a&&a!==t.state.fetchStatus||u&&!u(t))}function Q4(e,t){const{exact:r,status:i,predicate:a,mutationKey:u}=e;if(u){if(!t.options.mutationKey)return!1;if(r){if(r0(t.options.mutationKey)!==r0(u))return!1}else if(!n0(t.options.mutationKey,u))return!1}return!(i&&t.state.status!==i||a&&!a(t))}function D5(e,t){return((t==null?void 0:t.queryKeyHashFn)||r0)(e)}function r0(e){return JSON.stringify(e,(t,r)=>m2(r)?Object.keys(r).sort().reduce((i,a)=>(i[a]=r[a],i),{}):r)}function n0(e,t){return e===t?!0:typeof e!=typeof t?!1:e&&t&&typeof e=="object"&&typeof t=="object"?Object.keys(t).every(r=>n0(e[r],t[r])):!1}function BM(e,t){if(e===t)return e;const r=O4(e)&&O4(t);if(r||m2(e)&&m2(t)){const i=r?e:Object.keys(e),a=i.length,u=r?t:Object.keys(t),h=u.length,o=r?[]:{},g=new Set(i);let y=0;for(let C=0;C<h;C++){const I=r?C:u[C];(!r&&g.has(I)||r)&&e[I]===void 0&&t[I]===void 0?(o[I]=void 0,y++):(o[I]=BM(e[I],t[I]),o[I]===e[I]&&e[I]!==void 0&&y++)}return a===h&&y===a?e:o}return t}function O4(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function m2(e){if(!z4(e))return!1;const t=e.constructor;if(t===void 0)return!0;const r=t.prototype;return!(!z4(r)||!r.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(e)!==Object.prototype)}function z4(e){return Object.prototype.toString.call(e)==="[object Object]"}function nj(e){return new Promise(t=>{setTimeout(t,e)})}function ij(e,t,r){return typeof r.structuralSharing=="function"?r.structuralSharing(e,t):r.structuralSharing!==!1?BM(e,t):t}function sj(e,t,r=0){const i=[...e,t];return r&&i.length>r?i.slice(1):i}function oj(e,t,r=0){const i=[t,...e];return r&&i.length>r?i.slice(0,-1):i}var Q5=Symbol();function CM(e,t){return!e.queryFn&&(t!=null&&t.initialPromise)?()=>t.initialPromise:!e.queryFn||e.queryFn===Q5?()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`)):e.queryFn}var Vd,Ch,Dp,UT,aj=(UT=class extends f_{constructor(){super();Hn(this,Vd);Hn(this,Ch);Hn(this,Dp);dn(this,Dp,t=>{if(!p_&&window.addEventListener){const r=()=>t();return window.addEventListener("visibilitychange",r,!1),()=>{window.removeEventListener("visibilitychange",r)}}})}onSubscribe(){Gt(this,Ch)||this.setEventListener(Gt(this,Dp))}onUnsubscribe(){var t;this.hasListeners()||((t=Gt(this,Ch))==null||t.call(this),dn(this,Ch,void 0))}setEventListener(t){var r;dn(this,Dp,t),(r=Gt(this,Ch))==null||r.call(this),dn(this,Ch,t(i=>{typeof i=="boolean"?this.setFocused(i):this.onFocus()}))}setFocused(t){Gt(this,Vd)!==t&&(dn(this,Vd,t),this.onFocus())}onFocus(){const t=this.isFocused();this.listeners.forEach(r=>{r(t)})}isFocused(){var t;return typeof Gt(this,Vd)=="boolean"?Gt(this,Vd):((t=globalThis.document)==null?void 0:t.visibilityState)!=="hidden"}},Vd=new WeakMap,Ch=new WeakMap,Dp=new WeakMap,UT),SM=new aj,Qp,Sh,Op,RT,lj=(RT=class extends f_{constructor(){super();Hn(this,Qp,!0);Hn(this,Sh);Hn(this,Op);dn(this,Op,t=>{if(!p_&&window.addEventListener){const r=()=>t(!0),i=()=>t(!1);return window.addEventListener("online",r,!1),window.addEventListener("offline",i,!1),()=>{window.removeEventListener("online",r),window.removeEventListener("offline",i)}}})}onSubscribe(){Gt(this,Sh)||this.setEventListener(Gt(this,Op))}onUnsubscribe(){var t;this.hasListeners()||((t=Gt(this,Sh))==null||t.call(this),dn(this,Sh,void 0))}setEventListener(t){var r;dn(this,Op,t),(r=Gt(this,Sh))==null||r.call(this),dn(this,Sh,t(this.setOnline.bind(this)))}setOnline(t){Gt(this,Qp)!==t&&(dn(this,Qp,t),this.listeners.forEach(i=>{i(t)}))}isOnline(){return Gt(this,Qp)}},Qp=new WeakMap,Sh=new WeakMap,Op=new WeakMap,RT),h1=new lj;function Aj(){let e,t;const r=new Promise((a,u)=>{e=a,t=u});r.status="pending",r.catch(()=>{});function i(a){Object.assign(r,a),delete r.resolve,delete r.reject}return r.resolve=a=>{i({status:"fulfilled",value:a}),e(a)},r.reject=a=>{i({status:"rejected",reason:a}),t(a)},r}function cj(e){return Math.min(1e3*2**e,3e4)}function EM(e){return(e??"online")==="online"?h1.isOnline():!0}var IM=class extends Error{constructor(e){super("CancelledError"),this.revert=e==null?void 0:e.revert,this.silent=e==null?void 0:e.silent}};function cx(e){return e instanceof IM}function FM(e){let t=!1,r=0,i=!1,a;const u=Aj(),h=U=>{var H;i||(F(new IM(U)),(H=e.abort)==null||H.call(e))},o=()=>{t=!0},g=()=>{t=!1},y=()=>SM.isFocused()&&(e.networkMode==="always"||h1.isOnline())&&e.canRun(),C=()=>EM(e.networkMode)&&e.canRun(),I=U=>{var H;i||(i=!0,(H=e.onSuccess)==null||H.call(e,U),a==null||a(),u.resolve(U))},F=U=>{var H;i||(i=!0,(H=e.onError)==null||H.call(e,U),a==null||a(),u.reject(U))},b=()=>new Promise(U=>{var H;a=k=>{(i||y())&&U(k)},(H=e.onPause)==null||H.call(e)}).then(()=>{var U;a=void 0,i||(U=e.onContinue)==null||U.call(e)}),N=()=>{if(i)return;let U;const H=r===0?e.initialPromise:void 0;try{U=H??e.fn()}catch(k){U=Promise.reject(k)}Promise.resolve(U).then(I).catch(k=>{var fe;if(i)return;const R=e.retry??(p_?0:3),V=e.retryDelay??cj,W=typeof V=="function"?V(r,k):V,se=R===!0||typeof R=="number"&&r<R||typeof R=="function"&&R(r,k);if(t||!se){F(k);return}r++,(fe=e.onFail)==null||fe.call(e,r,k),nj(W).then(()=>y()?void 0:b()).then(()=>{t?F(k):N()})})};return{promise:u,cancel:h,continue:()=>(a==null||a(),u),cancelRetry:o,continueRetry:g,canStart:C,start:()=>(C()?N():b().then(N),u)}}var uj=e=>setTimeout(e,0);function hj(){let e=[],t=0,r=o=>{o()},i=o=>{o()},a=uj;const u=o=>{t?e.push(o):a(()=>{r(o)})},h=()=>{const o=e;e=[],o.length&&a(()=>{i(()=>{o.forEach(g=>{r(g)})})})};return{batch:o=>{let g;t++;try{g=o()}finally{t--,t||h()}return g},batchCalls:o=>(...g)=>{u(()=>{o(...g)})},schedule:u,setNotifyFunction:o=>{r=o},setBatchNotifyFunction:o=>{i=o},setScheduler:o=>{a=o}}}var _a=hj(),Kd,NT,TM=(NT=class{constructor(){Hn(this,Kd)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),ej(this.gcTime)&&dn(this,Kd,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(p_?1/0:5*60*1e3))}clearGcTimeout(){Gt(this,Kd)&&(clearTimeout(Gt(this,Kd)),dn(this,Kd,void 0))}},Kd=new WeakMap,NT),zp,Gd,Kl,$d,Xo,v0,qd,DA,xu,DT,dj=(DT=class extends TM{constructor(t){super();Hn(this,DA);Hn(this,zp);Hn(this,Gd);Hn(this,Kl);Hn(this,$d);Hn(this,Xo);Hn(this,v0);Hn(this,qd);dn(this,qd,!1),dn(this,v0,t.defaultOptions),this.setOptions(t.options),this.observers=[],dn(this,$d,t.client),dn(this,Kl,Gt(this,$d).getQueryCache()),this.queryKey=t.queryKey,this.queryHash=t.queryHash,dn(this,zp,pj(this.options)),this.state=t.state??Gt(this,zp),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var t;return(t=Gt(this,Xo))==null?void 0:t.promise}setOptions(t){this.options={...Gt(this,v0),...t},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&Gt(this,Kl).remove(this)}setData(t,r){const i=ij(this.state.data,t,this.options);return Vo(this,DA,xu).call(this,{data:i,type:"success",dataUpdatedAt:r==null?void 0:r.updatedAt,manual:r==null?void 0:r.manual}),i}setState(t,r){Vo(this,DA,xu).call(this,{type:"setState",state:t,setStateOptions:r})}cancel(t){var i,a;const r=(i=Gt(this,Xo))==null?void 0:i.promise;return(a=Gt(this,Xo))==null||a.cancel(t),r?r.then(RA).catch(RA):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(Gt(this,zp))}isActive(){return this.observers.some(t=>rj(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===Q5||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(t=>p2(t.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(t=0){return this.state.data===void 0?!0:t==="static"?!1:this.state.isInvalidated?!0:!tj(this.state.dataUpdatedAt,t)}onFocus(){var r;const t=this.observers.find(i=>i.shouldFetchOnWindowFocus());t==null||t.refetch({cancelRefetch:!1}),(r=Gt(this,Xo))==null||r.continue()}onOnline(){var r;const t=this.observers.find(i=>i.shouldFetchOnReconnect());t==null||t.refetch({cancelRefetch:!1}),(r=Gt(this,Xo))==null||r.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),Gt(this,Kl).notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(r=>r!==t),this.observers.length||(Gt(this,Xo)&&(Gt(this,qd)?Gt(this,Xo).cancel({revert:!0}):Gt(this,Xo).cancelRetry()),this.scheduleGc()),Gt(this,Kl).notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||Vo(this,DA,xu).call(this,{type:"invalidate"})}fetch(t,r){var y,C,I;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(r!=null&&r.cancelRefetch))this.cancel({silent:!0});else if(Gt(this,Xo))return Gt(this,Xo).continueRetry(),Gt(this,Xo).promise}if(t&&this.setOptions(t),!this.options.queryFn){const F=this.observers.find(b=>b.options.queryFn);F&&this.setOptions(F.options)}const i=new AbortController,a=F=>{Object.defineProperty(F,"signal",{enumerable:!0,get:()=>(dn(this,qd,!0),i.signal)})},u=()=>{const F=CM(this.options,r),N=(()=>{const U={client:Gt(this,$d),queryKey:this.queryKey,meta:this.meta};return a(U),U})();return dn(this,qd,!1),this.options.persister?this.options.persister(F,N,this):F(N)},o=(()=>{const F={fetchOptions:r,options:this.options,queryKey:this.queryKey,client:Gt(this,$d),state:this.state,fetchFn:u};return a(F),F})();(y=this.options.behavior)==null||y.onFetch(o,this),dn(this,Gd,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((C=o.fetchOptions)==null?void 0:C.meta))&&Vo(this,DA,xu).call(this,{type:"fetch",meta:(I=o.fetchOptions)==null?void 0:I.meta});const g=F=>{var b,N,U,H;cx(F)&&F.silent||Vo(this,DA,xu).call(this,{type:"error",error:F}),cx(F)||((N=(b=Gt(this,Kl).config).onError)==null||N.call(b,F,this),(H=(U=Gt(this,Kl).config).onSettled)==null||H.call(U,this.state.data,F,this)),this.scheduleGc()};return dn(this,Xo,FM({initialPromise:r==null?void 0:r.initialPromise,fn:o.fetchFn,abort:i.abort.bind(i),onSuccess:F=>{var b,N,U,H;if(F===void 0){g(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(F)}catch(k){g(k);return}(N=(b=Gt(this,Kl).config).onSuccess)==null||N.call(b,F,this),(H=(U=Gt(this,Kl).config).onSettled)==null||H.call(U,F,this.state.error,this),this.scheduleGc()},onError:g,onFail:(F,b)=>{Vo(this,DA,xu).call(this,{type:"failed",failureCount:F,error:b})},onPause:()=>{Vo(this,DA,xu).call(this,{type:"pause"})},onContinue:()=>{Vo(this,DA,xu).call(this,{type:"continue"})},retry:o.options.retry,retryDelay:o.options.retryDelay,networkMode:o.options.networkMode,canRun:()=>!0})),Gt(this,Xo).start()}},zp=new WeakMap,Gd=new WeakMap,Kl=new WeakMap,$d=new WeakMap,Xo=new WeakMap,v0=new WeakMap,qd=new WeakMap,DA=new WeakSet,xu=function(t){const r=i=>{switch(t.type){case"failed":return{...i,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...i,fetchStatus:"paused"};case"continue":return{...i,fetchStatus:"fetching"};case"fetch":return{...i,...fj(i.data,this.options),fetchMeta:t.meta??null};case"success":return dn(this,Gd,void 0),{...i,data:t.data,dataUpdateCount:i.dataUpdateCount+1,dataUpdatedAt:t.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const a=t.error;return cx(a)&&a.revert&&Gt(this,Gd)?{...Gt(this,Gd),fetchStatus:"idle"}:{...i,error:a,errorUpdateCount:i.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:i.fetchFailureCount+1,fetchFailureReason:a,fetchStatus:"idle",status:"error"};case"invalidate":return{...i,isInvalidated:!0};case"setState":return{...i,...t.state}}};this.state=r(this.state),_a.batch(()=>{this.observers.forEach(i=>{i.onQueryUpdate()}),Gt(this,Kl).notify({query:this,type:"updated",action:t})})},DT);function fj(e,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:EM(t.networkMode)?"fetching":"paused",...e===void 0&&{error:null,status:"pending"}}}function pj(e){const t=typeof e.initialData=="function"?e.initialData():e.initialData,r=t!==void 0,i=r?typeof e.initialDataUpdatedAt=="function"?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:r?i??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:r?"success":"pending",fetchStatus:"idle"}}var Cc,QT,mj=(QT=class extends f_{constructor(t={}){super();Hn(this,Cc);this.config=t,dn(this,Cc,new Map)}build(t,r,i){const a=r.queryKey,u=r.queryHash??D5(a,r);let h=this.get(u);return h||(h=new dj({client:t,queryKey:a,queryHash:u,options:t.defaultQueryOptions(r),state:i,defaultOptions:t.getQueryDefaults(a)}),this.add(h)),h}add(t){Gt(this,Cc).has(t.queryHash)||(Gt(this,Cc).set(t.queryHash,t),this.notify({type:"added",query:t}))}remove(t){const r=Gt(this,Cc).get(t.queryHash);r&&(t.destroy(),r===t&&Gt(this,Cc).delete(t.queryHash),this.notify({type:"removed",query:t}))}clear(){_a.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}get(t){return Gt(this,Cc).get(t)}getAll(){return[...Gt(this,Cc).values()]}find(t){const r={exact:!0,...t};return this.getAll().find(i=>D4(r,i))}findAll(t={}){const r=this.getAll();return Object.keys(t).length>0?r.filter(i=>D4(t,i)):r}notify(t){_a.batch(()=>{this.listeners.forEach(r=>{r(t)})})}onFocus(){_a.batch(()=>{this.getAll().forEach(t=>{t.onFocus()})})}onOnline(){_a.batch(()=>{this.getAll().forEach(t=>{t.onOnline()})})}},Cc=new WeakMap,QT),Sc,ga,Zd,Ec,fh,OT,gj=(OT=class extends TM{constructor(t){super();Hn(this,Ec);Hn(this,Sc);Hn(this,ga);Hn(this,Zd);this.mutationId=t.mutationId,dn(this,ga,t.mutationCache),dn(this,Sc,[]),this.state=t.state||yj(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){Gt(this,Sc).includes(t)||(Gt(this,Sc).push(t),this.clearGcTimeout(),Gt(this,ga).notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){dn(this,Sc,Gt(this,Sc).filter(r=>r!==t)),this.scheduleGc(),Gt(this,ga).notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){Gt(this,Sc).length||(this.state.status==="pending"?this.scheduleGc():Gt(this,ga).remove(this))}continue(){var t;return((t=Gt(this,Zd))==null?void 0:t.continue())??this.execute(this.state.variables)}async execute(t){var u,h,o,g,y,C,I,F,b,N,U,H,k,R,V,W,se,fe,ue,ae;const r=()=>{Vo(this,Ec,fh).call(this,{type:"continue"})};dn(this,Zd,FM({fn:()=>this.options.mutationFn?this.options.mutationFn(t):Promise.reject(new Error("No mutationFn found")),onFail:(Be,Ue)=>{Vo(this,Ec,fh).call(this,{type:"failed",failureCount:Be,error:Ue})},onPause:()=>{Vo(this,Ec,fh).call(this,{type:"pause"})},onContinue:r,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>Gt(this,ga).canRun(this)}));const i=this.state.status==="pending",a=!Gt(this,Zd).canStart();try{if(i)r();else{Vo(this,Ec,fh).call(this,{type:"pending",variables:t,isPaused:a}),await((h=(u=Gt(this,ga).config).onMutate)==null?void 0:h.call(u,t,this));const Ue=await((g=(o=this.options).onMutate)==null?void 0:g.call(o,t));Ue!==this.state.context&&Vo(this,Ec,fh).call(this,{type:"pending",context:Ue,variables:t,isPaused:a})}const Be=await Gt(this,Zd).start();return await((C=(y=Gt(this,ga).config).onSuccess)==null?void 0:C.call(y,Be,t,this.state.context,this)),await((F=(I=this.options).onSuccess)==null?void 0:F.call(I,Be,t,this.state.context)),await((N=(b=Gt(this,ga).config).onSettled)==null?void 0:N.call(b,Be,null,this.state.variables,this.state.context,this)),await((H=(U=this.options).onSettled)==null?void 0:H.call(U,Be,null,t,this.state.context)),Vo(this,Ec,fh).call(this,{type:"success",data:Be}),Be}catch(Be){try{throw await((R=(k=Gt(this,ga).config).onError)==null?void 0:R.call(k,Be,t,this.state.context,this)),await((W=(V=this.options).onError)==null?void 0:W.call(V,Be,t,this.state.context)),await((fe=(se=Gt(this,ga).config).onSettled)==null?void 0:fe.call(se,void 0,Be,this.state.variables,this.state.context,this)),await((ae=(ue=this.options).onSettled)==null?void 0:ae.call(ue,void 0,Be,t,this.state.context)),Be}finally{Vo(this,Ec,fh).call(this,{type:"error",error:Be})}}finally{Gt(this,ga).runNext(this)}}},Sc=new WeakMap,ga=new WeakMap,Zd=new WeakMap,Ec=new WeakSet,fh=function(t){const r=i=>{switch(t.type){case"failed":return{...i,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...i,isPaused:!0};case"continue":return{...i,isPaused:!1};case"pending":return{...i,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...i,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...i,data:void 0,error:t.error,failureCount:i.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}};this.state=r(this.state),_a.batch(()=>{Gt(this,Sc).forEach(i=>{i.onMutationUpdate(t)}),Gt(this,ga).notify({mutation:this,type:"updated",action:t})})},OT);function yj(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var Eu,QA,_0,zT,vj=(zT=class extends f_{constructor(t={}){super();Hn(this,Eu);Hn(this,QA);Hn(this,_0);this.config=t,dn(this,Eu,new Set),dn(this,QA,new Map),dn(this,_0,0)}build(t,r,i){const a=new gj({mutationCache:this,mutationId:++ry(this,_0)._,options:t.defaultMutationOptions(r),state:i});return this.add(a),a}add(t){Gt(this,Eu).add(t);const r=By(t);if(typeof r=="string"){const i=Gt(this,QA).get(r);i?i.push(t):Gt(this,QA).set(r,[t])}this.notify({type:"added",mutation:t})}remove(t){if(Gt(this,Eu).delete(t)){const r=By(t);if(typeof r=="string"){const i=Gt(this,QA).get(r);if(i)if(i.length>1){const a=i.indexOf(t);a!==-1&&i.splice(a,1)}else i[0]===t&&Gt(this,QA).delete(r)}}this.notify({type:"removed",mutation:t})}canRun(t){const r=By(t);if(typeof r=="string"){const i=Gt(this,QA).get(r),a=i==null?void 0:i.find(u=>u.state.status==="pending");return!a||a===t}else return!0}runNext(t){var i;const r=By(t);if(typeof r=="string"){const a=(i=Gt(this,QA).get(r))==null?void 0:i.find(u=>u!==t&&u.state.isPaused);return(a==null?void 0:a.continue())??Promise.resolve()}else return Promise.resolve()}clear(){_a.batch(()=>{Gt(this,Eu).forEach(t=>{this.notify({type:"removed",mutation:t})}),Gt(this,Eu).clear(),Gt(this,QA).clear()})}getAll(){return Array.from(Gt(this,Eu))}find(t){const r={exact:!0,...t};return this.getAll().find(i=>Q4(r,i))}findAll(t={}){return this.getAll().filter(r=>Q4(t,r))}notify(t){_a.batch(()=>{this.listeners.forEach(r=>{r(t)})})}resumePausedMutations(){const t=this.getAll().filter(r=>r.state.isPaused);return _a.batch(()=>Promise.all(t.map(r=>r.continue().catch(RA))))}},Eu=new WeakMap,QA=new WeakMap,_0=new WeakMap,zT);function By(e){var t;return(t=e.options.scope)==null?void 0:t.id}function H4(e){return{onFetch:(t,r)=>{var C,I,F,b,N;const i=t.options,a=(F=(I=(C=t.fetchOptions)==null?void 0:C.meta)==null?void 0:I.fetchMore)==null?void 0:F.direction,u=((b=t.state.data)==null?void 0:b.pages)||[],h=((N=t.state.data)==null?void 0:N.pageParams)||[];let o={pages:[],pageParams:[]},g=0;const y=async()=>{let U=!1;const H=V=>{Object.defineProperty(V,"signal",{enumerable:!0,get:()=>(t.signal.aborted?U=!0:t.signal.addEventListener("abort",()=>{U=!0}),t.signal)})},k=CM(t.options,t.fetchOptions),R=async(V,W,se)=>{if(U)return Promise.reject();if(W==null&&V.pages.length)return Promise.resolve(V);const ue=(()=>{const te={client:t.client,queryKey:t.queryKey,pageParam:W,direction:se?"backward":"forward",meta:t.options.meta};return H(te),te})(),ae=await k(ue),{maxPages:Be}=t.options,Ue=se?oj:sj;return{pages:Ue(V.pages,ae,Be),pageParams:Ue(V.pageParams,W,Be)}};if(a&&u.length){const V=a==="backward",W=V?_j:j4,se={pages:u,pageParams:h},fe=W(i,se);o=await R(se,fe,V)}else{const V=e??u.length;do{const W=g===0?h[0]??i.initialPageParam:j4(i,o);if(g>0&&W==null)break;o=await R(o,W),g++}while(g<V)}return o};t.options.persister?t.fetchFn=()=>{var U,H;return(H=(U=t.options).persister)==null?void 0:H.call(U,y,{client:t.client,queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},r)}:t.fetchFn=y}}}function j4(e,{pages:t,pageParams:r}){const i=t.length-1;return t.length>0?e.getNextPageParam(t[i],t,r[i],r):void 0}function _j(e,{pages:t,pageParams:r}){var i;return t.length>0?(i=e.getPreviousPageParam)==null?void 0:i.call(e,t[0],t,r[0],r):void 0}var as,Eh,Ih,Hp,jp,Fh,Vp,Kp,HT,wj=(HT=class{constructor(e={}){Hn(this,as);Hn(this,Eh);Hn(this,Ih);Hn(this,Hp);Hn(this,jp);Hn(this,Fh);Hn(this,Vp);Hn(this,Kp);dn(this,as,e.queryCache||new mj),dn(this,Eh,e.mutationCache||new vj),dn(this,Ih,e.defaultOptions||{}),dn(this,Hp,new Map),dn(this,jp,new Map),dn(this,Fh,0)}mount(){ry(this,Fh)._++,Gt(this,Fh)===1&&(dn(this,Vp,SM.subscribe(async e=>{e&&(await this.resumePausedMutations(),Gt(this,as).onFocus())})),dn(this,Kp,h1.subscribe(async e=>{e&&(await this.resumePausedMutations(),Gt(this,as).onOnline())})))}unmount(){var e,t;ry(this,Fh)._--,Gt(this,Fh)===0&&((e=Gt(this,Vp))==null||e.call(this),dn(this,Vp,void 0),(t=Gt(this,Kp))==null||t.call(this),dn(this,Kp,void 0))}isFetching(e){return Gt(this,as).findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return Gt(this,Eh).findAll({...e,status:"pending"}).length}getQueryData(e){var r;const t=this.defaultQueryOptions({queryKey:e});return(r=Gt(this,as).get(t.queryHash))==null?void 0:r.state.data}ensureQueryData(e){const t=this.defaultQueryOptions(e),r=Gt(this,as).build(this,t),i=r.state.data;return i===void 0?this.fetchQuery(e):(e.revalidateIfStale&&r.isStaleByTime(p2(t.staleTime,r))&&this.prefetchQuery(t),Promise.resolve(i))}getQueriesData(e){return Gt(this,as).findAll(e).map(({queryKey:t,state:r})=>{const i=r.data;return[t,i]})}setQueryData(e,t,r){const i=this.defaultQueryOptions({queryKey:e}),a=Gt(this,as).get(i.queryHash),u=a==null?void 0:a.state.data,h=J7(t,u);if(h!==void 0)return Gt(this,as).build(this,i).setData(h,{...r,manual:!0})}setQueriesData(e,t,r){return _a.batch(()=>Gt(this,as).findAll(e).map(({queryKey:i})=>[i,this.setQueryData(i,t,r)]))}getQueryState(e){var r;const t=this.defaultQueryOptions({queryKey:e});return(r=Gt(this,as).get(t.queryHash))==null?void 0:r.state}removeQueries(e){const t=Gt(this,as);_a.batch(()=>{t.findAll(e).forEach(r=>{t.remove(r)})})}resetQueries(e,t){const r=Gt(this,as);return _a.batch(()=>(r.findAll(e).forEach(i=>{i.reset()}),this.refetchQueries({type:"active",...e},t)))}cancelQueries(e,t={}){const r={revert:!0,...t},i=_a.batch(()=>Gt(this,as).findAll(e).map(a=>a.cancel(r)));return Promise.all(i).then(RA).catch(RA)}invalidateQueries(e,t={}){return _a.batch(()=>(Gt(this,as).findAll(e).forEach(r=>{r.invalidate()}),(e==null?void 0:e.refetchType)==="none"?Promise.resolve():this.refetchQueries({...e,type:(e==null?void 0:e.refetchType)??(e==null?void 0:e.type)??"active"},t)))}refetchQueries(e,t={}){const r={...t,cancelRefetch:t.cancelRefetch??!0},i=_a.batch(()=>Gt(this,as).findAll(e).filter(a=>!a.isDisabled()&&!a.isStatic()).map(a=>{let u=a.fetch(void 0,r);return r.throwOnError||(u=u.catch(RA)),a.state.fetchStatus==="paused"?Promise.resolve():u}));return Promise.all(i).then(RA)}fetchQuery(e){const t=this.defaultQueryOptions(e);t.retry===void 0&&(t.retry=!1);const r=Gt(this,as).build(this,t);return r.isStaleByTime(p2(t.staleTime,r))?r.fetch(t):Promise.resolve(r.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(RA).catch(RA)}fetchInfiniteQuery(e){return e.behavior=H4(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(RA).catch(RA)}ensureInfiniteQueryData(e){return e.behavior=H4(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return h1.isOnline()?Gt(this,Eh).resumePausedMutations():Promise.resolve()}getQueryCache(){return Gt(this,as)}getMutationCache(){return Gt(this,Eh)}getDefaultOptions(){return Gt(this,Ih)}setDefaultOptions(e){dn(this,Ih,e)}setQueryDefaults(e,t){Gt(this,Hp).set(r0(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){const t=[...Gt(this,Hp).values()],r={};return t.forEach(i=>{n0(e,i.queryKey)&&Object.assign(r,i.defaultOptions)}),r}setMutationDefaults(e,t){Gt(this,jp).set(r0(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){const t=[...Gt(this,jp).values()],r={};return t.forEach(i=>{n0(e,i.mutationKey)&&Object.assign(r,i.defaultOptions)}),r}defaultQueryOptions(e){if(e._defaulted)return e;const t={...Gt(this,Ih).queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return t.queryHash||(t.queryHash=D5(t.queryKey,t)),t.refetchOnReconnect===void 0&&(t.refetchOnReconnect=t.networkMode!=="always"),t.throwOnError===void 0&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.queryFn===Q5&&(t.enabled=!1),t}defaultMutationOptions(e){return e!=null&&e._defaulted?e:{...Gt(this,Ih).mutations,...(e==null?void 0:e.mutationKey)&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){Gt(this,as).clear(),Gt(this,Eh).clear()}},as=new WeakMap,Eh=new WeakMap,Ih=new WeakMap,Hp=new WeakMap,jp=new WeakMap,Fh=new WeakMap,Vp=new WeakMap,Kp=new WeakMap,HT),xj=re.createContext(void 0),bj=({client:e,children:t})=>(re.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]),X.jsx(xj.Provider,{value:e,children:t}));/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function d1(){return d1=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},d1.apply(this,arguments)}var Lh;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(Lh||(Lh={}));const V4="popstate";function Bj(e){e===void 0&&(e={});function t(i,a){let{pathname:u,search:h,hash:o}=i.location;return g2("",{pathname:u,search:h,hash:o},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function r(i,a){return typeof a=="string"?a:LM(a)}return Sj(t,r,null,e)}function Xa(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function PM(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function Cj(){return Math.random().toString(36).substr(2,8)}function K4(e,t){return{usr:e.state,key:e.key,idx:t}}function g2(e,t,r,i){return r===void 0&&(r=null),d1({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?m_(t):t,{state:r,key:t&&t.key||i||Cj()})}function LM(e){let{pathname:t="/",search:r="",hash:i=""}=e;return r&&r!=="?"&&(t+=r.charAt(0)==="?"?r:"?"+r),i&&i!=="#"&&(t+=i.charAt(0)==="#"?i:"#"+i),t}function m_(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substr(r),e=e.substr(0,r));let i=e.indexOf("?");i>=0&&(t.search=e.substr(i),e=e.substr(0,i)),e&&(t.pathname=e)}return t}function Sj(e,t,r,i){i===void 0&&(i={});let{window:a=document.defaultView,v5Compat:u=!1}=i,h=a.history,o=Lh.Pop,g=null,y=C();y==null&&(y=0,h.replaceState(d1({},h.state,{idx:y}),""));function C(){return(h.state||{idx:null}).idx}function I(){o=Lh.Pop;let H=C(),k=H==null?null:H-y;y=H,g&&g({action:o,location:U.location,delta:k})}function F(H,k){o=Lh.Push;let R=g2(U.location,H,k);y=C()+1;let V=K4(R,y),W=U.createHref(R);try{h.pushState(V,"",W)}catch(se){if(se instanceof DOMException&&se.name==="DataCloneError")throw se;a.location.assign(W)}u&&g&&g({action:o,location:U.location,delta:1})}function b(H,k){o=Lh.Replace;let R=g2(U.location,H,k);y=C();let V=K4(R,y),W=U.createHref(R);h.replaceState(V,"",W),u&&g&&g({action:o,location:U.location,delta:0})}function N(H){let k=a.location.origin!=="null"?a.location.origin:a.location.href,R=typeof H=="string"?H:LM(H);return R=R.replace(/ $/,"%20"),Xa(k,"No window.location.(origin|href) available to create URL for href: "+R),new URL(R,k)}let U={get action(){return o},get location(){return e(a,h)},listen(H){if(g)throw new Error("A history only accepts one active listener");return a.addEventListener(V4,I),g=H,()=>{a.removeEventListener(V4,I),g=null}},createHref(H){return t(a,H)},createURL:N,encodeLocation(H){let k=N(H);return{pathname:k.pathname,search:k.search,hash:k.hash}},push:F,replace:b,go(H){return h.go(H)}};return U}var G4;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(G4||(G4={}));function Ej(e,t,r){return r===void 0&&(r="/"),Ij(e,t,r)}function Ij(e,t,r,i){let a=typeof t=="string"?m_(t):t,u=UM(a.pathname||"/",r);if(u==null)return null;let h=MM(e);Fj(h);let o=null;for(let g=0;o==null&&g<h.length;++g){let y=zj(u);o=Dj(h[g],y)}return o}function MM(e,t,r,i){t===void 0&&(t=[]),r===void 0&&(r=[]),i===void 0&&(i="");let a=(u,h,o)=>{let g={relativePath:o===void 0?u.path||"":o,caseSensitive:u.caseSensitive===!0,childrenIndex:h,route:u};g.relativePath.startsWith("/")&&(Xa(g.relativePath.startsWith(i),'Absolute route path "'+g.relativePath+'" nested under path '+('"'+i+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),g.relativePath=g.relativePath.slice(i.length));let y=Ip([i,g.relativePath]),C=r.concat(g);u.children&&u.children.length>0&&(Xa(u.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+y+'".')),MM(u.children,t,C,y)),!(u.path==null&&!u.index)&&t.push({path:y,score:Rj(y,u.index),routesMeta:C})};return e.forEach((u,h)=>{var o;if(u.path===""||!((o=u.path)!=null&&o.includes("?")))a(u,h);else for(let g of kM(u.path))a(u,h,g)}),t}function kM(e){let t=e.split("/");if(t.length===0)return[];let[r,...i]=t,a=r.endsWith("?"),u=r.replace(/\?$/,"");if(i.length===0)return a?[u,""]:[u];let h=kM(i.join("/")),o=[];return o.push(...h.map(g=>g===""?u:[u,g].join("/"))),a&&o.push(...h),o.map(g=>e.startsWith("/")&&g===""?"/":g)}function Fj(e){e.sort((t,r)=>t.score!==r.score?r.score-t.score:Nj(t.routesMeta.map(i=>i.childrenIndex),r.routesMeta.map(i=>i.childrenIndex)))}const Tj=/^:[\w-]+$/,Pj=3,Lj=2,Mj=1,kj=10,Uj=-2,$4=e=>e==="*";function Rj(e,t){let r=e.split("/"),i=r.length;return r.some($4)&&(i+=Uj),t&&(i+=Lj),r.filter(a=>!$4(a)).reduce((a,u)=>a+(Tj.test(u)?Pj:u===""?Mj:kj),i)}function Nj(e,t){return e.length===t.length&&e.slice(0,-1).every((i,a)=>i===t[a])?e[e.length-1]-t[t.length-1]:0}function Dj(e,t,r){let{routesMeta:i}=e,a={},u="/",h=[];for(let o=0;o<i.length;++o){let g=i[o],y=o===i.length-1,C=u==="/"?t:t.slice(u.length)||"/",I=Qj({path:g.relativePath,caseSensitive:g.caseSensitive,end:y},C),F=g.route;if(!I)return null;Object.assign(a,I.params),h.push({params:a,pathname:Ip([u,I.pathname]),pathnameBase:Hj(Ip([u,I.pathnameBase])),route:F}),I.pathnameBase!=="/"&&(u=Ip([u,I.pathnameBase]))}return h}function Qj(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[r,i]=Oj(e.path,e.caseSensitive,e.end),a=t.match(r);if(!a)return null;let u=a[0],h=u.replace(/(.)\/+$/,"$1"),o=a.slice(1);return{params:i.reduce((y,C,I)=>{let{paramName:F,isOptional:b}=C;if(F==="*"){let U=o[I]||"";h=u.slice(0,u.length-U.length).replace(/(.)\/+$/,"$1")}const N=o[I];return b&&!N?y[F]=void 0:y[F]=(N||"").replace(/%2F/g,"/"),y},{}),pathname:u,pathnameBase:h,pattern:e}}function Oj(e,t,r){t===void 0&&(t=!1),r===void 0&&(r=!0),PM(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let i=[],a="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(h,o,g)=>(i.push({paramName:o,isOptional:g!=null}),g?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(i.push({paramName:"*"}),a+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?a+="\\/*$":e!==""&&e!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,t?void 0:"i"),i]}function zj(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return PM(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function UM(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,i=e.charAt(r);return i&&i!=="/"?null:e.slice(r)||"/"}const Ip=e=>e.join("/").replace(/\/\/+/g,"/"),Hj=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/");function jj(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const RM=["post","put","patch","delete"];new Set(RM);const Vj=["get",...RM];new Set(Vj);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function f1(){return f1=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},f1.apply(this,arguments)}const Kj=re.createContext(null),Gj=re.createContext(null),NM=re.createContext(null),g_=re.createContext(null),y_=re.createContext({outlet:null,matches:[],isDataRoute:!1}),DM=re.createContext(null);function O5(){return re.useContext(g_)!=null}function QM(){return O5()||Xa(!1),re.useContext(g_).location}function $j(e,t){return qj(e,t)}function qj(e,t,r,i){O5()||Xa(!1);let{navigator:a}=re.useContext(NM),{matches:u}=re.useContext(y_),h=u[u.length-1],o=h?h.params:{};h&&h.pathname;let g=h?h.pathnameBase:"/";h&&h.route;let y=QM(),C;if(t){var I;let H=typeof t=="string"?m_(t):t;g==="/"||(I=H.pathname)!=null&&I.startsWith(g)||Xa(!1),C=H}else C=y;let F=C.pathname||"/",b=F;if(g!=="/"){let H=g.replace(/^\//,"").split("/");b="/"+F.replace(/^\//,"").split("/").slice(H.length).join("/")}let N=Ej(e,{pathname:b}),U=Jj(N&&N.map(H=>Object.assign({},H,{params:Object.assign({},o,H.params),pathname:Ip([g,a.encodeLocation?a.encodeLocation(H.pathname).pathname:H.pathname]),pathnameBase:H.pathnameBase==="/"?g:Ip([g,a.encodeLocation?a.encodeLocation(H.pathnameBase).pathname:H.pathnameBase])})),u,r,i);return t&&U?re.createElement(g_.Provider,{value:{location:f1({pathname:"/",search:"",hash:"",state:null,key:"default"},C),navigationType:Lh.Pop}},U):U}function Zj(){let e=n9(),t=jj(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,a={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return re.createElement(re.Fragment,null,re.createElement("h2",null,"Unexpected Application Error!"),re.createElement("h3",{style:{fontStyle:"italic"}},t),r?re.createElement("pre",{style:a},r):null,null)}const Wj=re.createElement(Zj,null);class Xj extends re.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,r){return r.location!==t.location||r.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:r.error,location:r.location,revalidation:t.revalidation||r.revalidation}}componentDidCatch(t,r){console.error("React Router caught the following error during render",t,r)}render(){return this.state.error!==void 0?re.createElement(y_.Provider,{value:this.props.routeContext},re.createElement(DM.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function Yj(e){let{routeContext:t,match:r,children:i}=e,a=re.useContext(Kj);return a&&a.static&&a.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=r.route.id),re.createElement(y_.Provider,{value:t},i)}function Jj(e,t,r,i){var a;if(t===void 0&&(t=[]),r===void 0&&(r=null),i===void 0&&(i=null),e==null){var u;if(!r)return null;if(r.errors)e=r.matches;else if((u=i)!=null&&u.v7_partialHydration&&t.length===0&&!r.initialized&&r.matches.length>0)e=r.matches;else return null}let h=e,o=(a=r)==null?void 0:a.errors;if(o!=null){let C=h.findIndex(I=>I.route.id&&(o==null?void 0:o[I.route.id])!==void 0);C>=0||Xa(!1),h=h.slice(0,Math.min(h.length,C+1))}let g=!1,y=-1;if(r&&i&&i.v7_partialHydration)for(let C=0;C<h.length;C++){let I=h[C];if((I.route.HydrateFallback||I.route.hydrateFallbackElement)&&(y=C),I.route.id){let{loaderData:F,errors:b}=r,N=I.route.loader&&F[I.route.id]===void 0&&(!b||b[I.route.id]===void 0);if(I.route.lazy||N){g=!0,y>=0?h=h.slice(0,y+1):h=[h[0]];break}}}return h.reduceRight((C,I,F)=>{let b,N=!1,U=null,H=null;r&&(b=o&&I.route.id?o[I.route.id]:void 0,U=I.route.errorElement||Wj,g&&(y<0&&F===0?(i9("route-fallback"),N=!0,H=null):y===F&&(N=!0,H=I.route.hydrateFallbackElement||null)));let k=t.concat(h.slice(0,F+1)),R=()=>{let V;return b?V=U:N?V=H:I.route.Component?V=re.createElement(I.route.Component,null):I.route.element?V=I.route.element:V=C,re.createElement(Yj,{match:I,routeContext:{outlet:C,matches:k,isDataRoute:r!=null},children:V})};return r&&(I.route.ErrorBoundary||I.route.errorElement||F===0)?re.createElement(Xj,{location:r.location,revalidation:r.revalidation,component:U,error:b,children:R(),routeContext:{outlet:null,matches:k,isDataRoute:!0}}):R()},null)}var OM=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(OM||{});function e9(e){let t=re.useContext(Gj);return t||Xa(!1),t}function t9(e){let t=re.useContext(y_);return t||Xa(!1),t}function r9(e){let t=t9(),r=t.matches[t.matches.length-1];return r.route.id||Xa(!1),r.route.id}function n9(){var e;let t=re.useContext(DM),r=e9(OM.UseRouteError),i=r9();return t!==void 0?t:(e=r.errors)==null?void 0:e[i]}const q4={};function i9(e,t,r){q4[e]||(q4[e]=!0)}function s9(e,t){e==null||e.v7_startTransition,e==null||e.v7_relativeSplatPath}function y2(e){Xa(!1)}function o9(e){let{basename:t="/",children:r=null,location:i,navigationType:a=Lh.Pop,navigator:u,static:h=!1,future:o}=e;O5()&&Xa(!1);let g=t.replace(/^\/*/,"/"),y=re.useMemo(()=>({basename:g,navigator:u,static:h,future:f1({v7_relativeSplatPath:!1},o)}),[g,o,u,h]);typeof i=="string"&&(i=m_(i));let{pathname:C="/",search:I="",hash:F="",state:b=null,key:N="default"}=i,U=re.useMemo(()=>{let H=UM(C,g);return H==null?null:{location:{pathname:H,search:I,hash:F,state:b,key:N},navigationType:a}},[g,C,I,F,b,N,a]);return U==null?null:re.createElement(NM.Provider,{value:y},re.createElement(g_.Provider,{children:r,value:U}))}function a9(e){let{children:t,location:r}=e;return $j(v2(t),r)}new Promise(()=>{});function v2(e,t){t===void 0&&(t=[]);let r=[];return re.Children.forEach(e,(i,a)=>{if(!re.isValidElement(i))return;let u=[...t,a];if(i.type===re.Fragment){r.push.apply(r,v2(i.props.children,u));return}i.type!==y2&&Xa(!1),!i.props.index||!i.props.children||Xa(!1);let h={id:i.props.id||u.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,loader:i.props.loader,action:i.props.action,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(h.children=v2(i.props.children,u)),r.push(h)}),r}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const l9="6";try{window.__reactRouterVersion=l9}catch{}const A9="startTransition",Z4=TB[A9];function c9(e){let{basename:t,children:r,future:i,window:a}=e,u=re.useRef();u.current==null&&(u.current=Bj({window:a,v5Compat:!0}));let h=u.current,[o,g]=re.useState({action:h.action,location:h.location}),{v7_startTransition:y}=i||{},C=re.useCallback(I=>{y&&Z4?Z4(()=>g(I)):g(I)},[g,y]);return re.useLayoutEffect(()=>h.listen(C),[h,C]),re.useEffect(()=>s9(i),[i]),re.createElement(o9,{basename:t,children:r,location:o.location,navigationType:o.action,navigator:h,future:i})}var W4;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(W4||(W4={}));var X4;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(X4||(X4={}));function u9(e){return new Worker("/Domapus/assets/data-processor-BdWHk4Wc.js",{name:e==null?void 0:e.name})}function h9(){const e=re.useRef(null),[t,r]=re.useState(!0),[i,a]=re.useState({phase:"Initializing..."}),u=re.useRef(new Map);return re.useEffect(()=>{const o=new u9;return e.current=o,o.onmessage=g=>{const{id:y,type:C,data:I,error:F}=g.data;switch(C){case"PROGRESS":a(I);break;case"ERROR":{r(!1);const b=u.current.get(y);b&&(b.reject(new Error(F)),u.current.delete(y));break}default:{r(!1);const b=u.current.get(y);b&&(b.resolve(I),u.current.delete(y));break}}},o.onerror=g=>{console.error("An unhandled error occurred in the data worker:",g),r(!1),u.current.forEach(y=>y.reject(g)),u.current.clear()},()=>{o.terminate()}},[]),{processData:re.useCallback(o=>{const g=e.current;return g?new Promise((y,C)=>{r(!0),a({phase:"Starting..."});const I=`${Date.now()}-${Math.random()}`;u.current.set(I,{resolve:y,reject:C}),g.postMessage({id:I,...o})}):Promise.reject(new Error("Worker is not available."))},[]),isLoading:t,progress:i}}/*! pako 2.1.0 https://github.com/nodeca/pako @license (MIT AND Zlib) */const d9=4,Y4=0,J4=1,f9=2;function hm(e){let t=e.length;for(;--t>=0;)e[t]=0}const p9=0,zM=1,m9=2,g9=3,y9=258,z5=29,F0=256,i0=F0+1+z5,Fp=30,H5=19,HM=2*i0+1,Qd=15,ux=16,v9=7,j5=256,jM=16,VM=17,KM=18,_2=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),Cv=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),_9=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),GM=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),w9=512,Cu=new Array((i0+2)*2);hm(Cu);const Cg=new Array(Fp*2);hm(Cg);const s0=new Array(w9);hm(s0);const o0=new Array(y9-g9+1);hm(o0);const V5=new Array(z5);hm(V5);const p1=new Array(Fp);hm(p1);function hx(e,t,r,i,a){this.static_tree=e,this.extra_bits=t,this.extra_base=r,this.elems=i,this.max_length=a,this.has_stree=e&&e.length}let $M,qM,ZM;function dx(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}const WM=e=>e<256?s0[e]:s0[256+(e>>>7)],a0=(e,t)=>{e.pending_buf[e.pending++]=t&255,e.pending_buf[e.pending++]=t>>>8&255},Ga=(e,t,r)=>{e.bi_valid>ux-r?(e.bi_buf|=t<<e.bi_valid&65535,a0(e,e.bi_buf),e.bi_buf=t>>ux-e.bi_valid,e.bi_valid+=r-ux):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=r)},Fc=(e,t,r)=>{Ga(e,r[t*2],r[t*2+1])},XM=(e,t)=>{let r=0;do r|=e&1,e>>>=1,r<<=1;while(--t>0);return r>>>1},x9=e=>{e.bi_valid===16?(a0(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):e.bi_valid>=8&&(e.pending_buf[e.pending++]=e.bi_buf&255,e.bi_buf>>=8,e.bi_valid-=8)},b9=(e,t)=>{const r=t.dyn_tree,i=t.max_code,a=t.stat_desc.static_tree,u=t.stat_desc.has_stree,h=t.stat_desc.extra_bits,o=t.stat_desc.extra_base,g=t.stat_desc.max_length;let y,C,I,F,b,N,U=0;for(F=0;F<=Qd;F++)e.bl_count[F]=0;for(r[e.heap[e.heap_max]*2+1]=0,y=e.heap_max+1;y<HM;y++)C=e.heap[y],F=r[r[C*2+1]*2+1]+1,F>g&&(F=g,U++),r[C*2+1]=F,!(C>i)&&(e.bl_count[F]++,b=0,C>=o&&(b=h[C-o]),N=r[C*2],e.opt_len+=N*(F+b),u&&(e.static_len+=N*(a[C*2+1]+b)));if(U!==0){do{for(F=g-1;e.bl_count[F]===0;)F--;e.bl_count[F]--,e.bl_count[F+1]+=2,e.bl_count[g]--,U-=2}while(U>0);for(F=g;F!==0;F--)for(C=e.bl_count[F];C!==0;)I=e.heap[--y],!(I>i)&&(r[I*2+1]!==F&&(e.opt_len+=(F-r[I*2+1])*r[I*2],r[I*2+1]=F),C--)}},YM=(e,t,r)=>{const i=new Array(Qd+1);let a=0,u,h;for(u=1;u<=Qd;u++)a=a+r[u-1]<<1,i[u]=a;for(h=0;h<=t;h++){let o=e[h*2+1];o!==0&&(e[h*2]=XM(i[o]++,o))}},B9=()=>{let e,t,r,i,a;const u=new Array(Qd+1);for(r=0,i=0;i<z5-1;i++)for(V5[i]=r,e=0;e<1<<_2[i];e++)o0[r++]=i;for(o0[r-1]=i,a=0,i=0;i<16;i++)for(p1[i]=a,e=0;e<1<<Cv[i];e++)s0[a++]=i;for(a>>=7;i<Fp;i++)for(p1[i]=a<<7,e=0;e<1<<Cv[i]-7;e++)s0[256+a++]=i;for(t=0;t<=Qd;t++)u[t]=0;for(e=0;e<=143;)Cu[e*2+1]=8,e++,u[8]++;for(;e<=255;)Cu[e*2+1]=9,e++,u[9]++;for(;e<=279;)Cu[e*2+1]=7,e++,u[7]++;for(;e<=287;)Cu[e*2+1]=8,e++,u[8]++;for(YM(Cu,i0+1,u),e=0;e<Fp;e++)Cg[e*2+1]=5,Cg[e*2]=XM(e,5);$M=new hx(Cu,_2,F0+1,i0,Qd),qM=new hx(Cg,Cv,0,Fp,Qd),ZM=new hx(new Array(0),_9,0,H5,v9)},JM=e=>{let t;for(t=0;t<i0;t++)e.dyn_ltree[t*2]=0;for(t=0;t<Fp;t++)e.dyn_dtree[t*2]=0;for(t=0;t<H5;t++)e.bl_tree[t*2]=0;e.dyn_ltree[j5*2]=1,e.opt_len=e.static_len=0,e.sym_next=e.matches=0},ek=e=>{e.bi_valid>8?a0(e,e.bi_buf):e.bi_valid>0&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0},eI=(e,t,r,i)=>{const a=t*2,u=r*2;return e[a]<e[u]||e[a]===e[u]&&i[t]<=i[r]},fx=(e,t,r)=>{const i=e.heap[r];let a=r<<1;for(;a<=e.heap_len&&(a<e.heap_len&&eI(t,e.heap[a+1],e.heap[a],e.depth)&&a++,!eI(t,i,e.heap[a],e.depth));)e.heap[r]=e.heap[a],r=a,a<<=1;e.heap[r]=i},tI=(e,t,r)=>{let i,a,u=0,h,o;if(e.sym_next!==0)do i=e.pending_buf[e.sym_buf+u++]&255,i+=(e.pending_buf[e.sym_buf+u++]&255)<<8,a=e.pending_buf[e.sym_buf+u++],i===0?Fc(e,a,t):(h=o0[a],Fc(e,h+F0+1,t),o=_2[h],o!==0&&(a-=V5[h],Ga(e,a,o)),i--,h=WM(i),Fc(e,h,r),o=Cv[h],o!==0&&(i-=p1[h],Ga(e,i,o)));while(u<e.sym_next);Fc(e,j5,t)},w2=(e,t)=>{const r=t.dyn_tree,i=t.stat_desc.static_tree,a=t.stat_desc.has_stree,u=t.stat_desc.elems;let h,o,g=-1,y;for(e.heap_len=0,e.heap_max=HM,h=0;h<u;h++)r[h*2]!==0?(e.heap[++e.heap_len]=g=h,e.depth[h]=0):r[h*2+1]=0;for(;e.heap_len<2;)y=e.heap[++e.heap_len]=g<2?++g:0,r[y*2]=1,e.depth[y]=0,e.opt_len--,a&&(e.static_len-=i[y*2+1]);for(t.max_code=g,h=e.heap_len>>1;h>=1;h--)fx(e,r,h);y=u;do h=e.heap[1],e.heap[1]=e.heap[e.heap_len--],fx(e,r,1),o=e.heap[1],e.heap[--e.heap_max]=h,e.heap[--e.heap_max]=o,r[y*2]=r[h*2]+r[o*2],e.depth[y]=(e.depth[h]>=e.depth[o]?e.depth[h]:e.depth[o])+1,r[h*2+1]=r[o*2+1]=y,e.heap[1]=y++,fx(e,r,1);while(e.heap_len>=2);e.heap[--e.heap_max]=e.heap[1],b9(e,t),YM(r,g,e.bl_count)},rI=(e,t,r)=>{let i,a=-1,u,h=t[0*2+1],o=0,g=7,y=4;for(h===0&&(g=138,y=3),t[(r+1)*2+1]=65535,i=0;i<=r;i++)u=h,h=t[(i+1)*2+1],!(++o<g&&u===h)&&(o<y?e.bl_tree[u*2]+=o:u!==0?(u!==a&&e.bl_tree[u*2]++,e.bl_tree[jM*2]++):o<=10?e.bl_tree[VM*2]++:e.bl_tree[KM*2]++,o=0,a=u,h===0?(g=138,y=3):u===h?(g=6,y=3):(g=7,y=4))},nI=(e,t,r)=>{let i,a=-1,u,h=t[0*2+1],o=0,g=7,y=4;for(h===0&&(g=138,y=3),i=0;i<=r;i++)if(u=h,h=t[(i+1)*2+1],!(++o<g&&u===h)){if(o<y)do Fc(e,u,e.bl_tree);while(--o!==0);else u!==0?(u!==a&&(Fc(e,u,e.bl_tree),o--),Fc(e,jM,e.bl_tree),Ga(e,o-3,2)):o<=10?(Fc(e,VM,e.bl_tree),Ga(e,o-3,3)):(Fc(e,KM,e.bl_tree),Ga(e,o-11,7));o=0,a=u,h===0?(g=138,y=3):u===h?(g=6,y=3):(g=7,y=4)}},C9=e=>{let t;for(rI(e,e.dyn_ltree,e.l_desc.max_code),rI(e,e.dyn_dtree,e.d_desc.max_code),w2(e,e.bl_desc),t=H5-1;t>=3&&e.bl_tree[GM[t]*2+1]===0;t--);return e.opt_len+=3*(t+1)+5+5+4,t},S9=(e,t,r,i)=>{let a;for(Ga(e,t-257,5),Ga(e,r-1,5),Ga(e,i-4,4),a=0;a<i;a++)Ga(e,e.bl_tree[GM[a]*2+1],3);nI(e,e.dyn_ltree,t-1),nI(e,e.dyn_dtree,r-1)},E9=e=>{let t=4093624447,r;for(r=0;r<=31;r++,t>>>=1)if(t&1&&e.dyn_ltree[r*2]!==0)return Y4;if(e.dyn_ltree[9*2]!==0||e.dyn_ltree[10*2]!==0||e.dyn_ltree[13*2]!==0)return J4;for(r=32;r<F0;r++)if(e.dyn_ltree[r*2]!==0)return J4;return Y4};let iI=!1;const I9=e=>{iI||(B9(),iI=!0),e.l_desc=new dx(e.dyn_ltree,$M),e.d_desc=new dx(e.dyn_dtree,qM),e.bl_desc=new dx(e.bl_tree,ZM),e.bi_buf=0,e.bi_valid=0,JM(e)},tk=(e,t,r,i)=>{Ga(e,(p9<<1)+(i?1:0),3),ek(e),a0(e,r),a0(e,~r),r&&e.pending_buf.set(e.window.subarray(t,t+r),e.pending),e.pending+=r},F9=e=>{Ga(e,zM<<1,3),Fc(e,j5,Cu),x9(e)},T9=(e,t,r,i)=>{let a,u,h=0;e.level>0?(e.strm.data_type===f9&&(e.strm.data_type=E9(e)),w2(e,e.l_desc),w2(e,e.d_desc),h=C9(e),a=e.opt_len+3+7>>>3,u=e.static_len+3+7>>>3,u<=a&&(a=u)):a=u=r+5,r+4<=a&&t!==-1?tk(e,t,r,i):e.strategy===d9||u===a?(Ga(e,(zM<<1)+(i?1:0),3),tI(e,Cu,Cg)):(Ga(e,(m9<<1)+(i?1:0),3),S9(e,e.l_desc.max_code+1,e.d_desc.max_code+1,h+1),tI(e,e.dyn_ltree,e.dyn_dtree)),JM(e),i&&ek(e)},P9=(e,t,r)=>(e.pending_buf[e.sym_buf+e.sym_next++]=t,e.pending_buf[e.sym_buf+e.sym_next++]=t>>8,e.pending_buf[e.sym_buf+e.sym_next++]=r,t===0?e.dyn_ltree[r*2]++:(e.matches++,t--,e.dyn_ltree[(o0[r]+F0+1)*2]++,e.dyn_dtree[WM(t)*2]++),e.sym_next===e.sym_end);var L9=I9,M9=tk,k9=T9,U9=P9,R9=F9,N9={_tr_init:L9,_tr_stored_block:M9,_tr_flush_block:k9,_tr_tally:U9,_tr_align:R9};const D9=(e,t,r,i)=>{let a=e&65535|0,u=e>>>16&65535|0,h=0;for(;r!==0;){h=r>2e3?2e3:r,r-=h;do a=a+t[i++]|0,u=u+a|0;while(--h);a%=65521,u%=65521}return a|u<<16|0};var l0=D9;const Q9=()=>{let e,t=[];for(var r=0;r<256;r++){e=r;for(var i=0;i<8;i++)e=e&1?3988292384^e>>>1:e>>>1;t[r]=e}return t},O9=new Uint32Array(Q9()),z9=(e,t,r,i)=>{const a=O9,u=i+r;e^=-1;for(let h=i;h<u;h++)e=e>>>8^a[(e^t[h])&255];return e^-1};var Ao=z9,Af={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},T0={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8};const{_tr_init:H9,_tr_stored_block:x2,_tr_flush_block:j9,_tr_tally:Gh,_tr_align:V9}=N9,{Z_NO_FLUSH:$h,Z_PARTIAL_FLUSH:K9,Z_FULL_FLUSH:G9,Z_FINISH:Zl,Z_BLOCK:sI,Z_OK:bo,Z_STREAM_END:oI,Z_STREAM_ERROR:Rc,Z_DATA_ERROR:$9,Z_BUF_ERROR:px,Z_DEFAULT_COMPRESSION:q9,Z_FILTERED:Z9,Z_HUFFMAN_ONLY:Cy,Z_RLE:W9,Z_FIXED:X9,Z_DEFAULT_STRATEGY:Y9,Z_UNKNOWN:J9,Z_DEFLATED:v_}=T0,eV=9,tV=15,rV=8,nV=29,iV=256,b2=iV+1+nV,sV=30,oV=19,aV=2*b2+1,lV=15,Pn=3,Mh=258,Nc=Mh+Pn+1,AV=32,rm=42,K5=57,B2=69,C2=73,S2=91,E2=103,Od=113,sg=666,wa=1,dm=2,cf=3,fm=4,cV=3,zd=(e,t)=>(e.msg=Af[t],t),aI=e=>e*2-(e>4?9:0),Bh=e=>{let t=e.length;for(;--t>=0;)e[t]=0},uV=e=>{let t,r,i,a=e.w_size;t=e.hash_size,i=t;do r=e.head[--i],e.head[i]=r>=a?r-a:0;while(--t);t=a,i=t;do r=e.prev[--i],e.prev[i]=r>=a?r-a:0;while(--t)};let hV=(e,t,r)=>(t<<e.hash_shift^r)&e.hash_mask,qh=hV;const _l=e=>{const t=e.state;let r=t.pending;r>e.avail_out&&(r=e.avail_out),r!==0&&(e.output.set(t.pending_buf.subarray(t.pending_out,t.pending_out+r),e.next_out),e.next_out+=r,t.pending_out+=r,e.total_out+=r,e.avail_out-=r,t.pending-=r,t.pending===0&&(t.pending_out=0))},Bl=(e,t)=>{j9(e,e.block_start>=0?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,_l(e.strm)},Gn=(e,t)=>{e.pending_buf[e.pending++]=t},qm=(e,t)=>{e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=t&255},I2=(e,t,r,i)=>{let a=e.avail_in;return a>i&&(a=i),a===0?0:(e.avail_in-=a,t.set(e.input.subarray(e.next_in,e.next_in+a),r),e.state.wrap===1?e.adler=l0(e.adler,t,a,r):e.state.wrap===2&&(e.adler=Ao(e.adler,t,a,r)),e.next_in+=a,e.total_in+=a,a)},rk=(e,t)=>{let r=e.max_chain_length,i=e.strstart,a,u,h=e.prev_length,o=e.nice_match;const g=e.strstart>e.w_size-Nc?e.strstart-(e.w_size-Nc):0,y=e.window,C=e.w_mask,I=e.prev,F=e.strstart+Mh;let b=y[i+h-1],N=y[i+h];e.prev_length>=e.good_match&&(r>>=2),o>e.lookahead&&(o=e.lookahead);do if(a=t,!(y[a+h]!==N||y[a+h-1]!==b||y[a]!==y[i]||y[++a]!==y[i+1])){i+=2,a++;do;while(y[++i]===y[++a]&&y[++i]===y[++a]&&y[++i]===y[++a]&&y[++i]===y[++a]&&y[++i]===y[++a]&&y[++i]===y[++a]&&y[++i]===y[++a]&&y[++i]===y[++a]&&i<F);if(u=Mh-(F-i),i=F-Mh,u>h){if(e.match_start=t,h=u,u>=o)break;b=y[i+h-1],N=y[i+h]}}while((t=I[t&C])>g&&--r!==0);return h<=e.lookahead?h:e.lookahead},nm=e=>{const t=e.w_size;let r,i,a;do{if(i=e.window_size-e.lookahead-e.strstart,e.strstart>=t+(t-Nc)&&(e.window.set(e.window.subarray(t,t+t-i),0),e.match_start-=t,e.strstart-=t,e.block_start-=t,e.insert>e.strstart&&(e.insert=e.strstart),uV(e),i+=t),e.strm.avail_in===0)break;if(r=I2(e.strm,e.window,e.strstart+e.lookahead,i),e.lookahead+=r,e.lookahead+e.insert>=Pn)for(a=e.strstart-e.insert,e.ins_h=e.window[a],e.ins_h=qh(e,e.ins_h,e.window[a+1]);e.insert&&(e.ins_h=qh(e,e.ins_h,e.window[a+Pn-1]),e.prev[a&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=a,a++,e.insert--,!(e.lookahead+e.insert<Pn)););}while(e.lookahead<Nc&&e.strm.avail_in!==0)},nk=(e,t)=>{let r=e.pending_buf_size-5>e.w_size?e.w_size:e.pending_buf_size-5,i,a,u,h=0,o=e.strm.avail_in;do{if(i=65535,u=e.bi_valid+42>>3,e.strm.avail_out<u||(u=e.strm.avail_out-u,a=e.strstart-e.block_start,i>a+e.strm.avail_in&&(i=a+e.strm.avail_in),i>u&&(i=u),i<r&&(i===0&&t!==Zl||t===$h||i!==a+e.strm.avail_in)))break;h=t===Zl&&i===a+e.strm.avail_in?1:0,x2(e,0,0,h),e.pending_buf[e.pending-4]=i,e.pending_buf[e.pending-3]=i>>8,e.pending_buf[e.pending-2]=~i,e.pending_buf[e.pending-1]=~i>>8,_l(e.strm),a&&(a>i&&(a=i),e.strm.output.set(e.window.subarray(e.block_start,e.block_start+a),e.strm.next_out),e.strm.next_out+=a,e.strm.avail_out-=a,e.strm.total_out+=a,e.block_start+=a,i-=a),i&&(I2(e.strm,e.strm.output,e.strm.next_out,i),e.strm.next_out+=i,e.strm.avail_out-=i,e.strm.total_out+=i)}while(h===0);return o-=e.strm.avail_in,o&&(o>=e.w_size?(e.matches=2,e.window.set(e.strm.input.subarray(e.strm.next_in-e.w_size,e.strm.next_in),0),e.strstart=e.w_size,e.insert=e.strstart):(e.window_size-e.strstart<=o&&(e.strstart-=e.w_size,e.window.set(e.window.subarray(e.w_size,e.w_size+e.strstart),0),e.matches<2&&e.matches++,e.insert>e.strstart&&(e.insert=e.strstart)),e.window.set(e.strm.input.subarray(e.strm.next_in-o,e.strm.next_in),e.strstart),e.strstart+=o,e.insert+=o>e.w_size-e.insert?e.w_size-e.insert:o),e.block_start=e.strstart),e.high_water<e.strstart&&(e.high_water=e.strstart),h?fm:t!==$h&&t!==Zl&&e.strm.avail_in===0&&e.strstart===e.block_start?dm:(u=e.window_size-e.strstart,e.strm.avail_in>u&&e.block_start>=e.w_size&&(e.block_start-=e.w_size,e.strstart-=e.w_size,e.window.set(e.window.subarray(e.w_size,e.w_size+e.strstart),0),e.matches<2&&e.matches++,u+=e.w_size,e.insert>e.strstart&&(e.insert=e.strstart)),u>e.strm.avail_in&&(u=e.strm.avail_in),u&&(I2(e.strm,e.window,e.strstart,u),e.strstart+=u,e.insert+=u>e.w_size-e.insert?e.w_size-e.insert:u),e.high_water<e.strstart&&(e.high_water=e.strstart),u=e.bi_valid+42>>3,u=e.pending_buf_size-u>65535?65535:e.pending_buf_size-u,r=u>e.w_size?e.w_size:u,a=e.strstart-e.block_start,(a>=r||(a||t===Zl)&&t!==$h&&e.strm.avail_in===0&&a<=u)&&(i=a>u?u:a,h=t===Zl&&e.strm.avail_in===0&&i===a?1:0,x2(e,e.block_start,i,h),e.block_start+=i,_l(e.strm)),h?cf:wa)},mx=(e,t)=>{let r,i;for(;;){if(e.lookahead<Nc){if(nm(e),e.lookahead<Nc&&t===$h)return wa;if(e.lookahead===0)break}if(r=0,e.lookahead>=Pn&&(e.ins_h=qh(e,e.ins_h,e.window[e.strstart+Pn-1]),r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),r!==0&&e.strstart-r<=e.w_size-Nc&&(e.match_length=rk(e,r)),e.match_length>=Pn)if(i=Gh(e,e.strstart-e.match_start,e.match_length-Pn),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=Pn){e.match_length--;do e.strstart++,e.ins_h=qh(e,e.ins_h,e.window[e.strstart+Pn-1]),r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart;while(--e.match_length!==0);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=qh(e,e.ins_h,e.window[e.strstart+1]);else i=Gh(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(i&&(Bl(e,!1),e.strm.avail_out===0))return wa}return e.insert=e.strstart<Pn-1?e.strstart:Pn-1,t===Zl?(Bl(e,!0),e.strm.avail_out===0?cf:fm):e.sym_next&&(Bl(e,!1),e.strm.avail_out===0)?wa:dm},zf=(e,t)=>{let r,i,a;for(;;){if(e.lookahead<Nc){if(nm(e),e.lookahead<Nc&&t===$h)return wa;if(e.lookahead===0)break}if(r=0,e.lookahead>=Pn&&(e.ins_h=qh(e,e.ins_h,e.window[e.strstart+Pn-1]),r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=Pn-1,r!==0&&e.prev_length<e.max_lazy_match&&e.strstart-r<=e.w_size-Nc&&(e.match_length=rk(e,r),e.match_length<=5&&(e.strategy===Z9||e.match_length===Pn&&e.strstart-e.match_start>4096)&&(e.match_length=Pn-1)),e.prev_length>=Pn&&e.match_length<=e.prev_length){a=e.strstart+e.lookahead-Pn,i=Gh(e,e.strstart-1-e.prev_match,e.prev_length-Pn),e.lookahead-=e.prev_length-1,e.prev_length-=2;do++e.strstart<=a&&(e.ins_h=qh(e,e.ins_h,e.window[e.strstart+Pn-1]),r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart);while(--e.prev_length!==0);if(e.match_available=0,e.match_length=Pn-1,e.strstart++,i&&(Bl(e,!1),e.strm.avail_out===0))return wa}else if(e.match_available){if(i=Gh(e,0,e.window[e.strstart-1]),i&&Bl(e,!1),e.strstart++,e.lookahead--,e.strm.avail_out===0)return wa}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(i=Gh(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<Pn-1?e.strstart:Pn-1,t===Zl?(Bl(e,!0),e.strm.avail_out===0?cf:fm):e.sym_next&&(Bl(e,!1),e.strm.avail_out===0)?wa:dm},dV=(e,t)=>{let r,i,a,u;const h=e.window;for(;;){if(e.lookahead<=Mh){if(nm(e),e.lookahead<=Mh&&t===$h)return wa;if(e.lookahead===0)break}if(e.match_length=0,e.lookahead>=Pn&&e.strstart>0&&(a=e.strstart-1,i=h[a],i===h[++a]&&i===h[++a]&&i===h[++a])){u=e.strstart+Mh;do;while(i===h[++a]&&i===h[++a]&&i===h[++a]&&i===h[++a]&&i===h[++a]&&i===h[++a]&&i===h[++a]&&i===h[++a]&&a<u);e.match_length=Mh-(u-a),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=Pn?(r=Gh(e,1,e.match_length-Pn),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(r=Gh(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),r&&(Bl(e,!1),e.strm.avail_out===0))return wa}return e.insert=0,t===Zl?(Bl(e,!0),e.strm.avail_out===0?cf:fm):e.sym_next&&(Bl(e,!1),e.strm.avail_out===0)?wa:dm},fV=(e,t)=>{let r;for(;;){if(e.lookahead===0&&(nm(e),e.lookahead===0)){if(t===$h)return wa;break}if(e.match_length=0,r=Gh(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,r&&(Bl(e,!1),e.strm.avail_out===0))return wa}return e.insert=0,t===Zl?(Bl(e,!0),e.strm.avail_out===0?cf:fm):e.sym_next&&(Bl(e,!1),e.strm.avail_out===0)?wa:dm};function wc(e,t,r,i,a){this.good_length=e,this.max_lazy=t,this.nice_length=r,this.max_chain=i,this.func=a}const og=[new wc(0,0,0,0,nk),new wc(4,4,8,4,mx),new wc(4,5,16,8,mx),new wc(4,6,32,32,mx),new wc(4,4,16,16,zf),new wc(8,16,32,32,zf),new wc(8,16,128,128,zf),new wc(8,32,128,256,zf),new wc(32,128,258,1024,zf),new wc(32,258,258,4096,zf)],pV=e=>{e.window_size=2*e.w_size,Bh(e.head),e.max_lazy_match=og[e.level].max_lazy,e.good_match=og[e.level].good_length,e.nice_match=og[e.level].nice_length,e.max_chain_length=og[e.level].max_chain,e.strstart=0,e.block_start=0,e.lookahead=0,e.insert=0,e.match_length=e.prev_length=Pn-1,e.match_available=0,e.ins_h=0};function mV(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=v_,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(aV*2),this.dyn_dtree=new Uint16Array((2*sV+1)*2),this.bl_tree=new Uint16Array((2*oV+1)*2),Bh(this.dyn_ltree),Bh(this.dyn_dtree),Bh(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(lV+1),this.heap=new Uint16Array(2*b2+1),Bh(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(2*b2+1),Bh(this.depth),this.sym_buf=0,this.lit_bufsize=0,this.sym_next=0,this.sym_end=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}const P0=e=>{if(!e)return 1;const t=e.state;return!t||t.strm!==e||t.status!==rm&&t.status!==K5&&t.status!==B2&&t.status!==C2&&t.status!==S2&&t.status!==E2&&t.status!==Od&&t.status!==sg?1:0},ik=e=>{if(P0(e))return zd(e,Rc);e.total_in=e.total_out=0,e.data_type=J9;const t=e.state;return t.pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=t.wrap===2?K5:t.wrap?rm:Od,e.adler=t.wrap===2?0:1,t.last_flush=-2,H9(t),bo},sk=e=>{const t=ik(e);return t===bo&&pV(e.state),t},gV=(e,t)=>P0(e)||e.state.wrap!==2?Rc:(e.state.gzhead=t,bo),ok=(e,t,r,i,a,u)=>{if(!e)return Rc;let h=1;if(t===q9&&(t=6),i<0?(h=0,i=-i):i>15&&(h=2,i-=16),a<1||a>eV||r!==v_||i<8||i>15||t<0||t>9||u<0||u>X9||i===8&&h!==1)return zd(e,Rc);i===8&&(i=9);const o=new mV;return e.state=o,o.strm=e,o.status=rm,o.wrap=h,o.gzhead=null,o.w_bits=i,o.w_size=1<<o.w_bits,o.w_mask=o.w_size-1,o.hash_bits=a+7,o.hash_size=1<<o.hash_bits,o.hash_mask=o.hash_size-1,o.hash_shift=~~((o.hash_bits+Pn-1)/Pn),o.window=new Uint8Array(o.w_size*2),o.head=new Uint16Array(o.hash_size),o.prev=new Uint16Array(o.w_size),o.lit_bufsize=1<<a+6,o.pending_buf_size=o.lit_bufsize*4,o.pending_buf=new Uint8Array(o.pending_buf_size),o.sym_buf=o.lit_bufsize,o.sym_end=(o.lit_bufsize-1)*3,o.level=t,o.strategy=u,o.method=r,sk(e)},yV=(e,t)=>ok(e,t,v_,tV,rV,Y9),vV=(e,t)=>{if(P0(e)||t>sI||t<0)return e?zd(e,Rc):Rc;const r=e.state;if(!e.output||e.avail_in!==0&&!e.input||r.status===sg&&t!==Zl)return zd(e,e.avail_out===0?px:Rc);const i=r.last_flush;if(r.last_flush=t,r.pending!==0){if(_l(e),e.avail_out===0)return r.last_flush=-1,bo}else if(e.avail_in===0&&aI(t)<=aI(i)&&t!==Zl)return zd(e,px);if(r.status===sg&&e.avail_in!==0)return zd(e,px);if(r.status===rm&&r.wrap===0&&(r.status=Od),r.status===rm){let a=v_+(r.w_bits-8<<4)<<8,u=-1;if(r.strategy>=Cy||r.level<2?u=0:r.level<6?u=1:r.level===6?u=2:u=3,a|=u<<6,r.strstart!==0&&(a|=AV),a+=31-a%31,qm(r,a),r.strstart!==0&&(qm(r,e.adler>>>16),qm(r,e.adler&65535)),e.adler=1,r.status=Od,_l(e),r.pending!==0)return r.last_flush=-1,bo}if(r.status===K5){if(e.adler=0,Gn(r,31),Gn(r,139),Gn(r,8),r.gzhead)Gn(r,(r.gzhead.text?1:0)+(r.gzhead.hcrc?2:0)+(r.gzhead.extra?4:0)+(r.gzhead.name?8:0)+(r.gzhead.comment?16:0)),Gn(r,r.gzhead.time&255),Gn(r,r.gzhead.time>>8&255),Gn(r,r.gzhead.time>>16&255),Gn(r,r.gzhead.time>>24&255),Gn(r,r.level===9?2:r.strategy>=Cy||r.level<2?4:0),Gn(r,r.gzhead.os&255),r.gzhead.extra&&r.gzhead.extra.length&&(Gn(r,r.gzhead.extra.length&255),Gn(r,r.gzhead.extra.length>>8&255)),r.gzhead.hcrc&&(e.adler=Ao(e.adler,r.pending_buf,r.pending,0)),r.gzindex=0,r.status=B2;else if(Gn(r,0),Gn(r,0),Gn(r,0),Gn(r,0),Gn(r,0),Gn(r,r.level===9?2:r.strategy>=Cy||r.level<2?4:0),Gn(r,cV),r.status=Od,_l(e),r.pending!==0)return r.last_flush=-1,bo}if(r.status===B2){if(r.gzhead.extra){let a=r.pending,u=(r.gzhead.extra.length&65535)-r.gzindex;for(;r.pending+u>r.pending_buf_size;){let o=r.pending_buf_size-r.pending;if(r.pending_buf.set(r.gzhead.extra.subarray(r.gzindex,r.gzindex+o),r.pending),r.pending=r.pending_buf_size,r.gzhead.hcrc&&r.pending>a&&(e.adler=Ao(e.adler,r.pending_buf,r.pending-a,a)),r.gzindex+=o,_l(e),r.pending!==0)return r.last_flush=-1,bo;a=0,u-=o}let h=new Uint8Array(r.gzhead.extra);r.pending_buf.set(h.subarray(r.gzindex,r.gzindex+u),r.pending),r.pending+=u,r.gzhead.hcrc&&r.pending>a&&(e.adler=Ao(e.adler,r.pending_buf,r.pending-a,a)),r.gzindex=0}r.status=C2}if(r.status===C2){if(r.gzhead.name){let a=r.pending,u;do{if(r.pending===r.pending_buf_size){if(r.gzhead.hcrc&&r.pending>a&&(e.adler=Ao(e.adler,r.pending_buf,r.pending-a,a)),_l(e),r.pending!==0)return r.last_flush=-1,bo;a=0}r.gzindex<r.gzhead.name.length?u=r.gzhead.name.charCodeAt(r.gzindex++)&255:u=0,Gn(r,u)}while(u!==0);r.gzhead.hcrc&&r.pending>a&&(e.adler=Ao(e.adler,r.pending_buf,r.pending-a,a)),r.gzindex=0}r.status=S2}if(r.status===S2){if(r.gzhead.comment){let a=r.pending,u;do{if(r.pending===r.pending_buf_size){if(r.gzhead.hcrc&&r.pending>a&&(e.adler=Ao(e.adler,r.pending_buf,r.pending-a,a)),_l(e),r.pending!==0)return r.last_flush=-1,bo;a=0}r.gzindex<r.gzhead.comment.length?u=r.gzhead.comment.charCodeAt(r.gzindex++)&255:u=0,Gn(r,u)}while(u!==0);r.gzhead.hcrc&&r.pending>a&&(e.adler=Ao(e.adler,r.pending_buf,r.pending-a,a))}r.status=E2}if(r.status===E2){if(r.gzhead.hcrc){if(r.pending+2>r.pending_buf_size&&(_l(e),r.pending!==0))return r.last_flush=-1,bo;Gn(r,e.adler&255),Gn(r,e.adler>>8&255),e.adler=0}if(r.status=Od,_l(e),r.pending!==0)return r.last_flush=-1,bo}if(e.avail_in!==0||r.lookahead!==0||t!==$h&&r.status!==sg){let a=r.level===0?nk(r,t):r.strategy===Cy?fV(r,t):r.strategy===W9?dV(r,t):og[r.level].func(r,t);if((a===cf||a===fm)&&(r.status=sg),a===wa||a===cf)return e.avail_out===0&&(r.last_flush=-1),bo;if(a===dm&&(t===K9?V9(r):t!==sI&&(x2(r,0,0,!1),t===G9&&(Bh(r.head),r.lookahead===0&&(r.strstart=0,r.block_start=0,r.insert=0))),_l(e),e.avail_out===0))return r.last_flush=-1,bo}return t!==Zl?bo:r.wrap<=0?oI:(r.wrap===2?(Gn(r,e.adler&255),Gn(r,e.adler>>8&255),Gn(r,e.adler>>16&255),Gn(r,e.adler>>24&255),Gn(r,e.total_in&255),Gn(r,e.total_in>>8&255),Gn(r,e.total_in>>16&255),Gn(r,e.total_in>>24&255)):(qm(r,e.adler>>>16),qm(r,e.adler&65535)),_l(e),r.wrap>0&&(r.wrap=-r.wrap),r.pending!==0?bo:oI)},_V=e=>{if(P0(e))return Rc;const t=e.state.status;return e.state=null,t===Od?zd(e,$9):bo},wV=(e,t)=>{let r=t.length;if(P0(e))return Rc;const i=e.state,a=i.wrap;if(a===2||a===1&&i.status!==rm||i.lookahead)return Rc;if(a===1&&(e.adler=l0(e.adler,t,r,0)),i.wrap=0,r>=i.w_size){a===0&&(Bh(i.head),i.strstart=0,i.block_start=0,i.insert=0);let g=new Uint8Array(i.w_size);g.set(t.subarray(r-i.w_size,r),0),t=g,r=i.w_size}const u=e.avail_in,h=e.next_in,o=e.input;for(e.avail_in=r,e.next_in=0,e.input=t,nm(i);i.lookahead>=Pn;){let g=i.strstart,y=i.lookahead-(Pn-1);do i.ins_h=qh(i,i.ins_h,i.window[g+Pn-1]),i.prev[g&i.w_mask]=i.head[i.ins_h],i.head[i.ins_h]=g,g++;while(--y);i.strstart=g,i.lookahead=Pn-1,nm(i)}return i.strstart+=i.lookahead,i.block_start=i.strstart,i.insert=i.lookahead,i.lookahead=0,i.match_length=i.prev_length=Pn-1,i.match_available=0,e.next_in=h,e.input=o,e.avail_in=u,i.wrap=a,bo};var xV=yV,bV=ok,BV=sk,CV=ik,SV=gV,EV=vV,IV=_V,FV=wV,TV="pako deflate (from Nodeca project)",Sg={deflateInit:xV,deflateInit2:bV,deflateReset:BV,deflateResetKeep:CV,deflateSetHeader:SV,deflate:EV,deflateEnd:IV,deflateSetDictionary:FV,deflateInfo:TV};const PV=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var LV=function(e){const t=Array.prototype.slice.call(arguments,1);for(;t.length;){const r=t.shift();if(r){if(typeof r!="object")throw new TypeError(r+"must be non-object");for(const i in r)PV(r,i)&&(e[i]=r[i])}}return e},MV=e=>{let t=0;for(let i=0,a=e.length;i<a;i++)t+=e[i].length;const r=new Uint8Array(t);for(let i=0,a=0,u=e.length;i<u;i++){let h=e[i];r.set(h,a),a+=h.length}return r},__={assign:LV,flattenChunks:MV};let ak=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{ak=!1}const A0=new Uint8Array(256);for(let e=0;e<256;e++)A0[e]=e>=252?6:e>=248?5:e>=240?4:e>=224?3:e>=192?2:1;A0[254]=A0[254]=1;var kV=e=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(e);let t,r,i,a,u,h=e.length,o=0;for(a=0;a<h;a++)r=e.charCodeAt(a),(r&64512)===55296&&a+1<h&&(i=e.charCodeAt(a+1),(i&64512)===56320&&(r=65536+(r-55296<<10)+(i-56320),a++)),o+=r<128?1:r<2048?2:r<65536?3:4;for(t=new Uint8Array(o),u=0,a=0;u<o;a++)r=e.charCodeAt(a),(r&64512)===55296&&a+1<h&&(i=e.charCodeAt(a+1),(i&64512)===56320&&(r=65536+(r-55296<<10)+(i-56320),a++)),r<128?t[u++]=r:r<2048?(t[u++]=192|r>>>6,t[u++]=128|r&63):r<65536?(t[u++]=224|r>>>12,t[u++]=128|r>>>6&63,t[u++]=128|r&63):(t[u++]=240|r>>>18,t[u++]=128|r>>>12&63,t[u++]=128|r>>>6&63,t[u++]=128|r&63);return t};const UV=(e,t)=>{if(t<65534&&e.subarray&&ak)return String.fromCharCode.apply(null,e.length===t?e:e.subarray(0,t));let r="";for(let i=0;i<t;i++)r+=String.fromCharCode(e[i]);return r};var RV=(e,t)=>{const r=t||e.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(e.subarray(0,t));let i,a;const u=new Array(r*2);for(a=0,i=0;i<r;){let h=e[i++];if(h<128){u[a++]=h;continue}let o=A0[h];if(o>4){u[a++]=65533,i+=o-1;continue}for(h&=o===2?31:o===3?15:7;o>1&&i<r;)h=h<<6|e[i++]&63,o--;if(o>1){u[a++]=65533;continue}h<65536?u[a++]=h:(h-=65536,u[a++]=55296|h>>10&1023,u[a++]=56320|h&1023)}return UV(u,a)},NV=(e,t)=>{t=t||e.length,t>e.length&&(t=e.length);let r=t-1;for(;r>=0&&(e[r]&192)===128;)r--;return r<0||r===0?t:r+A0[e[r]]>t?r:t},c0={string2buf:kV,buf2string:RV,utf8border:NV};function DV(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var lk=DV;const Ak=Object.prototype.toString,{Z_NO_FLUSH:QV,Z_SYNC_FLUSH:OV,Z_FULL_FLUSH:zV,Z_FINISH:HV,Z_OK:m1,Z_STREAM_END:jV,Z_DEFAULT_COMPRESSION:VV,Z_DEFAULT_STRATEGY:KV,Z_DEFLATED:GV}=T0;function L0(e){this.options=__.assign({level:VV,method:GV,chunkSize:16384,windowBits:15,memLevel:8,strategy:KV},e||{});let t=this.options;t.raw&&t.windowBits>0?t.windowBits=-t.windowBits:t.gzip&&t.windowBits>0&&t.windowBits<16&&(t.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new lk,this.strm.avail_out=0;let r=Sg.deflateInit2(this.strm,t.level,t.method,t.windowBits,t.memLevel,t.strategy);if(r!==m1)throw new Error(Af[r]);if(t.header&&Sg.deflateSetHeader(this.strm,t.header),t.dictionary){let i;if(typeof t.dictionary=="string"?i=c0.string2buf(t.dictionary):Ak.call(t.dictionary)==="[object ArrayBuffer]"?i=new Uint8Array(t.dictionary):i=t.dictionary,r=Sg.deflateSetDictionary(this.strm,i),r!==m1)throw new Error(Af[r]);this._dict_set=!0}}L0.prototype.push=function(e,t){const r=this.strm,i=this.options.chunkSize;let a,u;if(this.ended)return!1;for(t===~~t?u=t:u=t===!0?HV:QV,typeof e=="string"?r.input=c0.string2buf(e):Ak.call(e)==="[object ArrayBuffer]"?r.input=new Uint8Array(e):r.input=e,r.next_in=0,r.avail_in=r.input.length;;){if(r.avail_out===0&&(r.output=new Uint8Array(i),r.next_out=0,r.avail_out=i),(u===OV||u===zV)&&r.avail_out<=6){this.onData(r.output.subarray(0,r.next_out)),r.avail_out=0;continue}if(a=Sg.deflate(r,u),a===jV)return r.next_out>0&&this.onData(r.output.subarray(0,r.next_out)),a=Sg.deflateEnd(this.strm),this.onEnd(a),this.ended=!0,a===m1;if(r.avail_out===0){this.onData(r.output);continue}if(u>0&&r.next_out>0){this.onData(r.output.subarray(0,r.next_out)),r.avail_out=0;continue}if(r.avail_in===0)break}return!0};L0.prototype.onData=function(e){this.chunks.push(e)};L0.prototype.onEnd=function(e){e===m1&&(this.result=__.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};function G5(e,t){const r=new L0(t);if(r.push(e,!0),r.err)throw r.msg||Af[r.err];return r.result}function $V(e,t){return t=t||{},t.raw=!0,G5(e,t)}function qV(e,t){return t=t||{},t.gzip=!0,G5(e,t)}var ZV=L0,WV=G5,XV=$V,YV=qV,JV={Deflate:ZV,deflate:WV,deflateRaw:XV,gzip:YV};const Sy=16209,eK=16191;var tK=function(t,r){let i,a,u,h,o,g,y,C,I,F,b,N,U,H,k,R,V,W,se,fe,ue,ae,Be,Ue;const te=t.state;i=t.next_in,Be=t.input,a=i+(t.avail_in-5),u=t.next_out,Ue=t.output,h=u-(r-t.avail_out),o=u+(t.avail_out-257),g=te.dmax,y=te.wsize,C=te.whave,I=te.wnext,F=te.window,b=te.hold,N=te.bits,U=te.lencode,H=te.distcode,k=(1<<te.lenbits)-1,R=(1<<te.distbits)-1;e:do{N<15&&(b+=Be[i++]<<N,N+=8,b+=Be[i++]<<N,N+=8),V=U[b&k];t:for(;;){if(W=V>>>24,b>>>=W,N-=W,W=V>>>16&255,W===0)Ue[u++]=V&65535;else if(W&16){se=V&65535,W&=15,W&&(N<W&&(b+=Be[i++]<<N,N+=8),se+=b&(1<<W)-1,b>>>=W,N-=W),N<15&&(b+=Be[i++]<<N,N+=8,b+=Be[i++]<<N,N+=8),V=H[b&R];r:for(;;){if(W=V>>>24,b>>>=W,N-=W,W=V>>>16&255,W&16){if(fe=V&65535,W&=15,N<W&&(b+=Be[i++]<<N,N+=8,N<W&&(b+=Be[i++]<<N,N+=8)),fe+=b&(1<<W)-1,fe>g){t.msg="invalid distance too far back",te.mode=Sy;break e}if(b>>>=W,N-=W,W=u-h,fe>W){if(W=fe-W,W>C&&te.sane){t.msg="invalid distance too far back",te.mode=Sy;break e}if(ue=0,ae=F,I===0){if(ue+=y-W,W<se){se-=W;do Ue[u++]=F[ue++];while(--W);ue=u-fe,ae=Ue}}else if(I<W){if(ue+=y+I-W,W-=I,W<se){se-=W;do Ue[u++]=F[ue++];while(--W);if(ue=0,I<se){W=I,se-=W;do Ue[u++]=F[ue++];while(--W);ue=u-fe,ae=Ue}}}else if(ue+=I-W,W<se){se-=W;do Ue[u++]=F[ue++];while(--W);ue=u-fe,ae=Ue}for(;se>2;)Ue[u++]=ae[ue++],Ue[u++]=ae[ue++],Ue[u++]=ae[ue++],se-=3;se&&(Ue[u++]=ae[ue++],se>1&&(Ue[u++]=ae[ue++]))}else{ue=u-fe;do Ue[u++]=Ue[ue++],Ue[u++]=Ue[ue++],Ue[u++]=Ue[ue++],se-=3;while(se>2);se&&(Ue[u++]=Ue[ue++],se>1&&(Ue[u++]=Ue[ue++]))}}else if(W&64){t.msg="invalid distance code",te.mode=Sy;break e}else{V=H[(V&65535)+(b&(1<<W)-1)];continue r}break}}else if(W&64)if(W&32){te.mode=eK;break e}else{t.msg="invalid literal/length code",te.mode=Sy;break e}else{V=U[(V&65535)+(b&(1<<W)-1)];continue t}break}}while(i<a&&u<o);se=N>>3,i-=se,N-=se<<3,b&=(1<<N)-1,t.next_in=i,t.next_out=u,t.avail_in=i<a?5+(a-i):5-(i-a),t.avail_out=u<o?257+(o-u):257-(u-o),te.hold=b,te.bits=N};const Hf=15,lI=852,AI=592,cI=0,gx=1,uI=2,rK=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),nK=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),iK=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),sK=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),oK=(e,t,r,i,a,u,h,o)=>{const g=o.bits;let y=0,C=0,I=0,F=0,b=0,N=0,U=0,H=0,k=0,R=0,V,W,se,fe,ue,ae=null,Be;const Ue=new Uint16Array(Hf+1),te=new Uint16Array(Hf+1);let de=null,Te,we,st;for(y=0;y<=Hf;y++)Ue[y]=0;for(C=0;C<i;C++)Ue[t[r+C]]++;for(b=g,F=Hf;F>=1&&Ue[F]===0;F--);if(b>F&&(b=F),F===0)return a[u++]=1<<24|64<<16|0,a[u++]=1<<24|64<<16|0,o.bits=1,0;for(I=1;I<F&&Ue[I]===0;I++);for(b<I&&(b=I),H=1,y=1;y<=Hf;y++)if(H<<=1,H-=Ue[y],H<0)return-1;if(H>0&&(e===cI||F!==1))return-1;for(te[1]=0,y=1;y<Hf;y++)te[y+1]=te[y]+Ue[y];for(C=0;C<i;C++)t[r+C]!==0&&(h[te[t[r+C]]++]=C);if(e===cI?(ae=de=h,Be=20):e===gx?(ae=rK,de=nK,Be=257):(ae=iK,de=sK,Be=0),R=0,C=0,y=I,ue=u,N=b,U=0,se=-1,k=1<<b,fe=k-1,e===gx&&k>lI||e===uI&&k>AI)return 1;for(;;){Te=y-U,h[C]+1<Be?(we=0,st=h[C]):h[C]>=Be?(we=de[h[C]-Be],st=ae[h[C]-Be]):(we=96,st=0),V=1<<y-U,W=1<<N,I=W;do W-=V,a[ue+(R>>U)+W]=Te<<24|we<<16|st|0;while(W!==0);for(V=1<<y-1;R&V;)V>>=1;if(V!==0?(R&=V-1,R+=V):R=0,C++,--Ue[y]===0){if(y===F)break;y=t[r+h[C]]}if(y>b&&(R&fe)!==se){for(U===0&&(U=b),ue+=I,N=y-U,H=1<<N;N+U<F&&(H-=Ue[N+U],!(H<=0));)N++,H<<=1;if(k+=1<<N,e===gx&&k>lI||e===uI&&k>AI)return 1;se=R&fe,a[se]=b<<24|N<<16|ue-u|0}}return R!==0&&(a[ue+R]=y-U<<24|64<<16|0),o.bits=b,0};var Eg=oK;const aK=0,ck=1,uk=2,{Z_FINISH:hI,Z_BLOCK:lK,Z_TREES:Ey,Z_OK:uf,Z_STREAM_END:AK,Z_NEED_DICT:cK,Z_STREAM_ERROR:nA,Z_DATA_ERROR:hk,Z_MEM_ERROR:dk,Z_BUF_ERROR:uK,Z_DEFLATED:dI}=T0,w_=16180,fI=16181,pI=16182,mI=16183,gI=16184,yI=16185,vI=16186,_I=16187,wI=16188,xI=16189,g1=16190,yu=16191,yx=16192,bI=16193,vx=16194,BI=16195,CI=16196,SI=16197,EI=16198,Iy=16199,Fy=16200,II=16201,FI=16202,TI=16203,PI=16204,LI=16205,_x=16206,MI=16207,kI=16208,Di=16209,fk=16210,pk=16211,hK=852,dK=592,fK=15,pK=fK,UI=e=>(e>>>24&255)+(e>>>8&65280)+((e&65280)<<8)+((e&255)<<24);function mK(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const gf=e=>{if(!e)return 1;const t=e.state;return!t||t.strm!==e||t.mode<w_||t.mode>pk?1:0},mk=e=>{if(gf(e))return nA;const t=e.state;return e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=t.wrap&1),t.mode=w_,t.last=0,t.havedict=0,t.flags=-1,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new Int32Array(hK),t.distcode=t.distdyn=new Int32Array(dK),t.sane=1,t.back=-1,uf},gk=e=>{if(gf(e))return nA;const t=e.state;return t.wsize=0,t.whave=0,t.wnext=0,mk(e)},yk=(e,t)=>{let r;if(gf(e))return nA;const i=e.state;return t<0?(r=0,t=-t):(r=(t>>4)+5,t<48&&(t&=15)),t&&(t<8||t>15)?nA:(i.window!==null&&i.wbits!==t&&(i.window=null),i.wrap=r,i.wbits=t,gk(e))},vk=(e,t)=>{if(!e)return nA;const r=new mK;e.state=r,r.strm=e,r.window=null,r.mode=w_;const i=yk(e,t);return i!==uf&&(e.state=null),i},gK=e=>vk(e,pK);let RI=!0,wx,xx;const yK=e=>{if(RI){wx=new Int32Array(512),xx=new Int32Array(32);let t=0;for(;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(Eg(ck,e.lens,0,288,wx,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;Eg(uk,e.lens,0,32,xx,0,e.work,{bits:5}),RI=!1}e.lencode=wx,e.lenbits=9,e.distcode=xx,e.distbits=5},_k=(e,t,r,i)=>{let a;const u=e.state;return u.window===null&&(u.wsize=1<<u.wbits,u.wnext=0,u.whave=0,u.window=new Uint8Array(u.wsize)),i>=u.wsize?(u.window.set(t.subarray(r-u.wsize,r),0),u.wnext=0,u.whave=u.wsize):(a=u.wsize-u.wnext,a>i&&(a=i),u.window.set(t.subarray(r-i,r-i+a),u.wnext),i-=a,i?(u.window.set(t.subarray(r-i,r),0),u.wnext=i,u.whave=u.wsize):(u.wnext+=a,u.wnext===u.wsize&&(u.wnext=0),u.whave<u.wsize&&(u.whave+=a))),0},vK=(e,t)=>{let r,i,a,u,h,o,g,y,C,I,F,b,N,U,H=0,k,R,V,W,se,fe,ue,ae;const Be=new Uint8Array(4);let Ue,te;const de=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(gf(e)||!e.output||!e.input&&e.avail_in!==0)return nA;r=e.state,r.mode===yu&&(r.mode=yx),h=e.next_out,a=e.output,g=e.avail_out,u=e.next_in,i=e.input,o=e.avail_in,y=r.hold,C=r.bits,I=o,F=g,ae=uf;e:for(;;)switch(r.mode){case w_:if(r.wrap===0){r.mode=yx;break}for(;C<16;){if(o===0)break e;o--,y+=i[u++]<<C,C+=8}if(r.wrap&2&&y===35615){r.wbits===0&&(r.wbits=15),r.check=0,Be[0]=y&255,Be[1]=y>>>8&255,r.check=Ao(r.check,Be,2,0),y=0,C=0,r.mode=fI;break}if(r.head&&(r.head.done=!1),!(r.wrap&1)||(((y&255)<<8)+(y>>8))%31){e.msg="incorrect header check",r.mode=Di;break}if((y&15)!==dI){e.msg="unknown compression method",r.mode=Di;break}if(y>>>=4,C-=4,ue=(y&15)+8,r.wbits===0&&(r.wbits=ue),ue>15||ue>r.wbits){e.msg="invalid window size",r.mode=Di;break}r.dmax=1<<r.wbits,r.flags=0,e.adler=r.check=1,r.mode=y&512?xI:yu,y=0,C=0;break;case fI:for(;C<16;){if(o===0)break e;o--,y+=i[u++]<<C,C+=8}if(r.flags=y,(r.flags&255)!==dI){e.msg="unknown compression method",r.mode=Di;break}if(r.flags&57344){e.msg="unknown header flags set",r.mode=Di;break}r.head&&(r.head.text=y>>8&1),r.flags&512&&r.wrap&4&&(Be[0]=y&255,Be[1]=y>>>8&255,r.check=Ao(r.check,Be,2,0)),y=0,C=0,r.mode=pI;case pI:for(;C<32;){if(o===0)break e;o--,y+=i[u++]<<C,C+=8}r.head&&(r.head.time=y),r.flags&512&&r.wrap&4&&(Be[0]=y&255,Be[1]=y>>>8&255,Be[2]=y>>>16&255,Be[3]=y>>>24&255,r.check=Ao(r.check,Be,4,0)),y=0,C=0,r.mode=mI;case mI:for(;C<16;){if(o===0)break e;o--,y+=i[u++]<<C,C+=8}r.head&&(r.head.xflags=y&255,r.head.os=y>>8),r.flags&512&&r.wrap&4&&(Be[0]=y&255,Be[1]=y>>>8&255,r.check=Ao(r.check,Be,2,0)),y=0,C=0,r.mode=gI;case gI:if(r.flags&1024){for(;C<16;){if(o===0)break e;o--,y+=i[u++]<<C,C+=8}r.length=y,r.head&&(r.head.extra_len=y),r.flags&512&&r.wrap&4&&(Be[0]=y&255,Be[1]=y>>>8&255,r.check=Ao(r.check,Be,2,0)),y=0,C=0}else r.head&&(r.head.extra=null);r.mode=yI;case yI:if(r.flags&1024&&(b=r.length,b>o&&(b=o),b&&(r.head&&(ue=r.head.extra_len-r.length,r.head.extra||(r.head.extra=new Uint8Array(r.head.extra_len)),r.head.extra.set(i.subarray(u,u+b),ue)),r.flags&512&&r.wrap&4&&(r.check=Ao(r.check,i,b,u)),o-=b,u+=b,r.length-=b),r.length))break e;r.length=0,r.mode=vI;case vI:if(r.flags&2048){if(o===0)break e;b=0;do ue=i[u+b++],r.head&&ue&&r.length<65536&&(r.head.name+=String.fromCharCode(ue));while(ue&&b<o);if(r.flags&512&&r.wrap&4&&(r.check=Ao(r.check,i,b,u)),o-=b,u+=b,ue)break e}else r.head&&(r.head.name=null);r.length=0,r.mode=_I;case _I:if(r.flags&4096){if(o===0)break e;b=0;do ue=i[u+b++],r.head&&ue&&r.length<65536&&(r.head.comment+=String.fromCharCode(ue));while(ue&&b<o);if(r.flags&512&&r.wrap&4&&(r.check=Ao(r.check,i,b,u)),o-=b,u+=b,ue)break e}else r.head&&(r.head.comment=null);r.mode=wI;case wI:if(r.flags&512){for(;C<16;){if(o===0)break e;o--,y+=i[u++]<<C,C+=8}if(r.wrap&4&&y!==(r.check&65535)){e.msg="header crc mismatch",r.mode=Di;break}y=0,C=0}r.head&&(r.head.hcrc=r.flags>>9&1,r.head.done=!0),e.adler=r.check=0,r.mode=yu;break;case xI:for(;C<32;){if(o===0)break e;o--,y+=i[u++]<<C,C+=8}e.adler=r.check=UI(y),y=0,C=0,r.mode=g1;case g1:if(r.havedict===0)return e.next_out=h,e.avail_out=g,e.next_in=u,e.avail_in=o,r.hold=y,r.bits=C,cK;e.adler=r.check=1,r.mode=yu;case yu:if(t===lK||t===Ey)break e;case yx:if(r.last){y>>>=C&7,C-=C&7,r.mode=_x;break}for(;C<3;){if(o===0)break e;o--,y+=i[u++]<<C,C+=8}switch(r.last=y&1,y>>>=1,C-=1,y&3){case 0:r.mode=bI;break;case 1:if(yK(r),r.mode=Iy,t===Ey){y>>>=2,C-=2;break e}break;case 2:r.mode=CI;break;case 3:e.msg="invalid block type",r.mode=Di}y>>>=2,C-=2;break;case bI:for(y>>>=C&7,C-=C&7;C<32;){if(o===0)break e;o--,y+=i[u++]<<C,C+=8}if((y&65535)!==(y>>>16^65535)){e.msg="invalid stored block lengths",r.mode=Di;break}if(r.length=y&65535,y=0,C=0,r.mode=vx,t===Ey)break e;case vx:r.mode=BI;case BI:if(b=r.length,b){if(b>o&&(b=o),b>g&&(b=g),b===0)break e;a.set(i.subarray(u,u+b),h),o-=b,u+=b,g-=b,h+=b,r.length-=b;break}r.mode=yu;break;case CI:for(;C<14;){if(o===0)break e;o--,y+=i[u++]<<C,C+=8}if(r.nlen=(y&31)+257,y>>>=5,C-=5,r.ndist=(y&31)+1,y>>>=5,C-=5,r.ncode=(y&15)+4,y>>>=4,C-=4,r.nlen>286||r.ndist>30){e.msg="too many length or distance symbols",r.mode=Di;break}r.have=0,r.mode=SI;case SI:for(;r.have<r.ncode;){for(;C<3;){if(o===0)break e;o--,y+=i[u++]<<C,C+=8}r.lens[de[r.have++]]=y&7,y>>>=3,C-=3}for(;r.have<19;)r.lens[de[r.have++]]=0;if(r.lencode=r.lendyn,r.lenbits=7,Ue={bits:r.lenbits},ae=Eg(aK,r.lens,0,19,r.lencode,0,r.work,Ue),r.lenbits=Ue.bits,ae){e.msg="invalid code lengths set",r.mode=Di;break}r.have=0,r.mode=EI;case EI:for(;r.have<r.nlen+r.ndist;){for(;H=r.lencode[y&(1<<r.lenbits)-1],k=H>>>24,R=H>>>16&255,V=H&65535,!(k<=C);){if(o===0)break e;o--,y+=i[u++]<<C,C+=8}if(V<16)y>>>=k,C-=k,r.lens[r.have++]=V;else{if(V===16){for(te=k+2;C<te;){if(o===0)break e;o--,y+=i[u++]<<C,C+=8}if(y>>>=k,C-=k,r.have===0){e.msg="invalid bit length repeat",r.mode=Di;break}ue=r.lens[r.have-1],b=3+(y&3),y>>>=2,C-=2}else if(V===17){for(te=k+3;C<te;){if(o===0)break e;o--,y+=i[u++]<<C,C+=8}y>>>=k,C-=k,ue=0,b=3+(y&7),y>>>=3,C-=3}else{for(te=k+7;C<te;){if(o===0)break e;o--,y+=i[u++]<<C,C+=8}y>>>=k,C-=k,ue=0,b=11+(y&127),y>>>=7,C-=7}if(r.have+b>r.nlen+r.ndist){e.msg="invalid bit length repeat",r.mode=Di;break}for(;b--;)r.lens[r.have++]=ue}}if(r.mode===Di)break;if(r.lens[256]===0){e.msg="invalid code -- missing end-of-block",r.mode=Di;break}if(r.lenbits=9,Ue={bits:r.lenbits},ae=Eg(ck,r.lens,0,r.nlen,r.lencode,0,r.work,Ue),r.lenbits=Ue.bits,ae){e.msg="invalid literal/lengths set",r.mode=Di;break}if(r.distbits=6,r.distcode=r.distdyn,Ue={bits:r.distbits},ae=Eg(uk,r.lens,r.nlen,r.ndist,r.distcode,0,r.work,Ue),r.distbits=Ue.bits,ae){e.msg="invalid distances set",r.mode=Di;break}if(r.mode=Iy,t===Ey)break e;case Iy:r.mode=Fy;case Fy:if(o>=6&&g>=258){e.next_out=h,e.avail_out=g,e.next_in=u,e.avail_in=o,r.hold=y,r.bits=C,tK(e,F),h=e.next_out,a=e.output,g=e.avail_out,u=e.next_in,i=e.input,o=e.avail_in,y=r.hold,C=r.bits,r.mode===yu&&(r.back=-1);break}for(r.back=0;H=r.lencode[y&(1<<r.lenbits)-1],k=H>>>24,R=H>>>16&255,V=H&65535,!(k<=C);){if(o===0)break e;o--,y+=i[u++]<<C,C+=8}if(R&&!(R&240)){for(W=k,se=R,fe=V;H=r.lencode[fe+((y&(1<<W+se)-1)>>W)],k=H>>>24,R=H>>>16&255,V=H&65535,!(W+k<=C);){if(o===0)break e;o--,y+=i[u++]<<C,C+=8}y>>>=W,C-=W,r.back+=W}if(y>>>=k,C-=k,r.back+=k,r.length=V,R===0){r.mode=LI;break}if(R&32){r.back=-1,r.mode=yu;break}if(R&64){e.msg="invalid literal/length code",r.mode=Di;break}r.extra=R&15,r.mode=II;case II:if(r.extra){for(te=r.extra;C<te;){if(o===0)break e;o--,y+=i[u++]<<C,C+=8}r.length+=y&(1<<r.extra)-1,y>>>=r.extra,C-=r.extra,r.back+=r.extra}r.was=r.length,r.mode=FI;case FI:for(;H=r.distcode[y&(1<<r.distbits)-1],k=H>>>24,R=H>>>16&255,V=H&65535,!(k<=C);){if(o===0)break e;o--,y+=i[u++]<<C,C+=8}if(!(R&240)){for(W=k,se=R,fe=V;H=r.distcode[fe+((y&(1<<W+se)-1)>>W)],k=H>>>24,R=H>>>16&255,V=H&65535,!(W+k<=C);){if(o===0)break e;o--,y+=i[u++]<<C,C+=8}y>>>=W,C-=W,r.back+=W}if(y>>>=k,C-=k,r.back+=k,R&64){e.msg="invalid distance code",r.mode=Di;break}r.offset=V,r.extra=R&15,r.mode=TI;case TI:if(r.extra){for(te=r.extra;C<te;){if(o===0)break e;o--,y+=i[u++]<<C,C+=8}r.offset+=y&(1<<r.extra)-1,y>>>=r.extra,C-=r.extra,r.back+=r.extra}if(r.offset>r.dmax){e.msg="invalid distance too far back",r.mode=Di;break}r.mode=PI;case PI:if(g===0)break e;if(b=F-g,r.offset>b){if(b=r.offset-b,b>r.whave&&r.sane){e.msg="invalid distance too far back",r.mode=Di;break}b>r.wnext?(b-=r.wnext,N=r.wsize-b):N=r.wnext-b,b>r.length&&(b=r.length),U=r.window}else U=a,N=h-r.offset,b=r.length;b>g&&(b=g),g-=b,r.length-=b;do a[h++]=U[N++];while(--b);r.length===0&&(r.mode=Fy);break;case LI:if(g===0)break e;a[h++]=r.length,g--,r.mode=Fy;break;case _x:if(r.wrap){for(;C<32;){if(o===0)break e;o--,y|=i[u++]<<C,C+=8}if(F-=g,e.total_out+=F,r.total+=F,r.wrap&4&&F&&(e.adler=r.check=r.flags?Ao(r.check,a,F,h-F):l0(r.check,a,F,h-F)),F=g,r.wrap&4&&(r.flags?y:UI(y))!==r.check){e.msg="incorrect data check",r.mode=Di;break}y=0,C=0}r.mode=MI;case MI:if(r.wrap&&r.flags){for(;C<32;){if(o===0)break e;o--,y+=i[u++]<<C,C+=8}if(r.wrap&4&&y!==(r.total&4294967295)){e.msg="incorrect length check",r.mode=Di;break}y=0,C=0}r.mode=kI;case kI:ae=AK;break e;case Di:ae=hk;break e;case fk:return dk;case pk:default:return nA}return e.next_out=h,e.avail_out=g,e.next_in=u,e.avail_in=o,r.hold=y,r.bits=C,(r.wsize||F!==e.avail_out&&r.mode<Di&&(r.mode<_x||t!==hI))&&_k(e,e.output,e.next_out,F-e.avail_out),I-=e.avail_in,F-=e.avail_out,e.total_in+=I,e.total_out+=F,r.total+=F,r.wrap&4&&F&&(e.adler=r.check=r.flags?Ao(r.check,a,F,e.next_out-F):l0(r.check,a,F,e.next_out-F)),e.data_type=r.bits+(r.last?64:0)+(r.mode===yu?128:0)+(r.mode===Iy||r.mode===vx?256:0),(I===0&&F===0||t===hI)&&ae===uf&&(ae=uK),ae},_K=e=>{if(gf(e))return nA;let t=e.state;return t.window&&(t.window=null),e.state=null,uf},wK=(e,t)=>{if(gf(e))return nA;const r=e.state;return r.wrap&2?(r.head=t,t.done=!1,uf):nA},xK=(e,t)=>{const r=t.length;let i,a,u;return gf(e)||(i=e.state,i.wrap!==0&&i.mode!==g1)?nA:i.mode===g1&&(a=1,a=l0(a,t,r,0),a!==i.check)?hk:(u=_k(e,t,r,r),u?(i.mode=fk,dk):(i.havedict=1,uf))};var bK=gk,BK=yk,CK=mk,SK=gK,EK=vk,IK=vK,FK=_K,TK=wK,PK=xK,LK="pako inflate (from Nodeca project)",Su={inflateReset:bK,inflateReset2:BK,inflateResetKeep:CK,inflateInit:SK,inflateInit2:EK,inflate:IK,inflateEnd:FK,inflateGetHeader:TK,inflateSetDictionary:PK,inflateInfo:LK};function MK(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var kK=MK;const wk=Object.prototype.toString,{Z_NO_FLUSH:UK,Z_FINISH:RK,Z_OK:u0,Z_STREAM_END:bx,Z_NEED_DICT:Bx,Z_STREAM_ERROR:NK,Z_DATA_ERROR:NI,Z_MEM_ERROR:DK}=T0;function M0(e){this.options=__.assign({chunkSize:1024*64,windowBits:15,to:""},e||{});const t=this.options;t.raw&&t.windowBits>=0&&t.windowBits<16&&(t.windowBits=-t.windowBits,t.windowBits===0&&(t.windowBits=-15)),t.windowBits>=0&&t.windowBits<16&&!(e&&e.windowBits)&&(t.windowBits+=32),t.windowBits>15&&t.windowBits<48&&(t.windowBits&15||(t.windowBits|=15)),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new lk,this.strm.avail_out=0;let r=Su.inflateInit2(this.strm,t.windowBits);if(r!==u0)throw new Error(Af[r]);if(this.header=new kK,Su.inflateGetHeader(this.strm,this.header),t.dictionary&&(typeof t.dictionary=="string"?t.dictionary=c0.string2buf(t.dictionary):wk.call(t.dictionary)==="[object ArrayBuffer]"&&(t.dictionary=new Uint8Array(t.dictionary)),t.raw&&(r=Su.inflateSetDictionary(this.strm,t.dictionary),r!==u0)))throw new Error(Af[r])}M0.prototype.push=function(e,t){const r=this.strm,i=this.options.chunkSize,a=this.options.dictionary;let u,h,o;if(this.ended)return!1;for(t===~~t?h=t:h=t===!0?RK:UK,wk.call(e)==="[object ArrayBuffer]"?r.input=new Uint8Array(e):r.input=e,r.next_in=0,r.avail_in=r.input.length;;){for(r.avail_out===0&&(r.output=new Uint8Array(i),r.next_out=0,r.avail_out=i),u=Su.inflate(r,h),u===Bx&&a&&(u=Su.inflateSetDictionary(r,a),u===u0?u=Su.inflate(r,h):u===NI&&(u=Bx));r.avail_in>0&&u===bx&&r.state.wrap>0&&e[r.next_in]!==0;)Su.inflateReset(r),u=Su.inflate(r,h);switch(u){case NK:case NI:case Bx:case DK:return this.onEnd(u),this.ended=!0,!1}if(o=r.avail_out,r.next_out&&(r.avail_out===0||u===bx))if(this.options.to==="string"){let g=c0.utf8border(r.output,r.next_out),y=r.next_out-g,C=c0.buf2string(r.output,g);r.next_out=y,r.avail_out=i-y,y&&r.output.set(r.output.subarray(g,g+y),0),this.onData(C)}else this.onData(r.output.length===r.next_out?r.output:r.output.subarray(0,r.next_out));if(!(u===u0&&o===0)){if(u===bx)return u=Su.inflateEnd(this.strm),this.onEnd(u),this.ended=!0,!0;if(r.avail_in===0)break}}return!0};M0.prototype.onData=function(e){this.chunks.push(e)};M0.prototype.onEnd=function(e){e===u0&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=__.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};function $5(e,t){const r=new M0(t);if(r.push(e),r.err)throw r.msg||Af[r.err];return r.result}function QK(e,t){return t=t||{},t.raw=!0,$5(e,t)}var OK=M0,zK=$5,HK=QK,jK=$5,VK={Inflate:OK,inflate:zK,inflateRaw:HK,ungzip:jK};const{Deflate:KK,deflate:GK,deflateRaw:$K,gzip:qK}=JV,{Inflate:ZK,inflate:WK,inflateRaw:XK,ungzip:YK}=VK;var JK=KK,eG=GK,tG=$K,rG=qK,nG=ZK,iG=WK,sG=XK,oG=YK,aG=T0,lG={Deflate:JK,deflate:eG,deflateRaw:tG,gzip:rG,Inflate:nG,inflate:iG,inflateRaw:sG,ungzip:oG,constants:aG};const AG=s_("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),ra=re.forwardRef(({className:e,variant:t,size:r,asChild:i=!1,...a},u)=>{const h=i?Z8:"button";return X.jsx(h,{className:Qn(AG({variant:t,size:r,className:e})),ref:u,...a})});ra.displayName="Button";const Zh=re.forwardRef(({className:e,...t},r)=>X.jsx("div",{ref:r,className:Qn("rounded-lg border bg-card text-card-foreground shadow-sm",e),...t}));Zh.displayName="Card";const Ig=re.forwardRef(({className:e,...t},r)=>X.jsx("div",{ref:r,className:Qn("flex flex-col space-y-1.5 p-6",e),...t}));Ig.displayName="CardHeader";const Fg=re.forwardRef(({className:e,...t},r)=>X.jsx("h3",{ref:r,className:Qn("text-2xl font-semibold leading-none tracking-tight",e),...t}));Fg.displayName="CardTitle";const cG=re.forwardRef(({className:e,...t},r)=>X.jsx("p",{ref:r,className:Qn("text-sm text-muted-foreground",e),...t}));cG.displayName="CardDescription";const Wh=re.forwardRef(({className:e,...t},r)=>X.jsx("div",{ref:r,className:Qn("p-6 pt-0",e),...t}));Wh.displayName="CardContent";const uG=re.forwardRef(({className:e,...t},r)=>X.jsx("div",{ref:r,className:Qn("flex items-center p-6 pt-0",e),...t}));uG.displayName="CardFooter";var hG=re.createContext(void 0);function q5(e){const t=re.useContext(hG);return e||t||"ltr"}var Cx="rovingFocusGroup.onEntryFocus",dG={bubbles:!1,cancelable:!0},k0="RovingFocusGroup",[F2,xk,fG]=w5(k0),[pG,bk]=Ou(k0,[fG]),[mG,gG]=pG(k0),Bk=re.forwardRef((e,t)=>X.jsx(F2.Provider,{scope:e.__scopeRovingFocusGroup,children:X.jsx(F2.Slot,{scope:e.__scopeRovingFocusGroup,children:X.jsx(yG,{...e,ref:t})})}));Bk.displayName=k0;var yG=re.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:r,orientation:i,loop:a=!1,dir:u,currentTabStopId:h,defaultCurrentTabStopId:o,onCurrentTabStopIdChange:g,onEntryFocus:y,preventScrollOnEntryFocus:C=!1,...I}=e,F=re.useRef(null),b=ci(t,F),N=q5(u),[U,H]=Jp({prop:h,defaultProp:o??null,onChange:g,caller:k0}),[k,R]=re.useState(!1),V=rA(y),W=xk(r),se=re.useRef(!1),[fe,ue]=re.useState(0);return re.useEffect(()=>{const ae=F.current;if(ae)return ae.addEventListener(Cx,V),()=>ae.removeEventListener(Cx,V)},[V]),X.jsx(mG,{scope:r,orientation:i,dir:N,loop:a,currentTabStopId:U,onItemFocus:re.useCallback(ae=>H(ae),[H]),onItemShiftTab:re.useCallback(()=>R(!0),[]),onFocusableItemAdd:re.useCallback(()=>ue(ae=>ae+1),[]),onFocusableItemRemove:re.useCallback(()=>ue(ae=>ae-1),[]),children:X.jsx(bn.div,{tabIndex:k||fe===0?-1:0,"data-orientation":i,...I,ref:b,style:{outline:"none",...e.style},onMouseDown:on(e.onMouseDown,()=>{se.current=!0}),onFocus:on(e.onFocus,ae=>{const Be=!se.current;if(ae.target===ae.currentTarget&&Be&&!k){const Ue=new CustomEvent(Cx,dG);if(ae.currentTarget.dispatchEvent(Ue),!Ue.defaultPrevented){const te=W().filter(Ze=>Ze.focusable),de=te.find(Ze=>Ze.active),Te=te.find(Ze=>Ze.id===U),st=[de,Te,...te].filter(Boolean).map(Ze=>Ze.ref.current);Ek(st,C)}}se.current=!1}),onBlur:on(e.onBlur,()=>R(!1))})})}),Ck="RovingFocusGroupItem",Sk=re.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:r,focusable:i=!0,active:a=!1,tabStopId:u,children:h,...o}=e,g=a_(),y=u||g,C=gG(Ck,r),I=C.currentTabStopId===y,F=xk(r),{onFocusableItemAdd:b,onFocusableItemRemove:N,currentTabStopId:U}=C;return re.useEffect(()=>{if(i)return b(),()=>N()},[i,b,N]),X.jsx(F2.ItemSlot,{scope:r,id:y,focusable:i,active:a,children:X.jsx(bn.span,{tabIndex:I?0:-1,"data-orientation":C.orientation,...o,ref:t,onMouseDown:on(e.onMouseDown,H=>{i?C.onItemFocus(y):H.preventDefault()}),onFocus:on(e.onFocus,()=>C.onItemFocus(y)),onKeyDown:on(e.onKeyDown,H=>{if(H.key==="Tab"&&H.shiftKey){C.onItemShiftTab();return}if(H.target!==H.currentTarget)return;const k=wG(H,C.orientation,C.dir);if(k!==void 0){if(H.metaKey||H.ctrlKey||H.altKey||H.shiftKey)return;H.preventDefault();let V=F().filter(W=>W.focusable).map(W=>W.ref.current);if(k==="last")V.reverse();else if(k==="prev"||k==="next"){k==="prev"&&V.reverse();const W=V.indexOf(H.currentTarget);V=C.loop?xG(V,W+1):V.slice(W+1)}setTimeout(()=>Ek(V))}}),children:typeof h=="function"?h({isCurrentTabStop:I,hasTabStop:U!=null}):h})})});Sk.displayName=Ck;var vG={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function _G(e,t){return t!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function wG(e,t,r){const i=_G(e.key,r);if(!(t==="vertical"&&["ArrowLeft","ArrowRight"].includes(i))&&!(t==="horizontal"&&["ArrowUp","ArrowDown"].includes(i)))return vG[i]}function Ek(e,t=!1){const r=document.activeElement;for(const i of e)if(i===r||(i.focus({preventScroll:t}),document.activeElement!==r))return}function xG(e,t){return e.map((r,i)=>e[(t+i)%e.length])}var bG=Bk,BG=Sk;function Z5(e){const t=re.useRef({value:e,previous:e});return re.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}var W5="Radio",[CG,Ik]=Ou(W5),[SG,EG]=CG(W5),Fk=re.forwardRef((e,t)=>{const{__scopeRadio:r,name:i,checked:a=!1,required:u,disabled:h,value:o="on",onCheck:g,form:y,...C}=e,[I,F]=re.useState(null),b=ci(t,H=>F(H)),N=re.useRef(!1),U=I?y||!!I.closest("form"):!0;return X.jsxs(SG,{scope:r,checked:a,disabled:h,children:[X.jsx(bn.button,{type:"button",role:"radio","aria-checked":a,"data-state":Mk(a),"data-disabled":h?"":void 0,disabled:h,value:o,...C,ref:b,onClick:on(e.onClick,H=>{a||g==null||g(),U&&(N.current=H.isPropagationStopped(),N.current||H.stopPropagation())})}),U&&X.jsx(Lk,{control:I,bubbles:!N.current,name:i,value:o,checked:a,required:u,disabled:h,form:y,style:{transform:"translateX(-100%)"}})]})});Fk.displayName=W5;var Tk="RadioIndicator",Pk=re.forwardRef((e,t)=>{const{__scopeRadio:r,forceMount:i,...a}=e,u=EG(Tk,r);return X.jsx(S0,{present:i||u.checked,children:X.jsx(bn.span,{"data-state":Mk(u.checked),"data-disabled":u.disabled?"":void 0,...a,ref:t})})});Pk.displayName=Tk;var IG="RadioBubbleInput",Lk=re.forwardRef(({__scopeRadio:e,control:t,checked:r,bubbles:i=!0,...a},u)=>{const h=re.useRef(null),o=ci(h,u),g=Z5(r),y=k5(t);return re.useEffect(()=>{const C=h.current;if(!C)return;const I=window.HTMLInputElement.prototype,b=Object.getOwnPropertyDescriptor(I,"checked").set;if(g!==r&&b){const N=new Event("click",{bubbles:i});b.call(C,r),C.dispatchEvent(N)}},[g,r,i]),X.jsx(bn.input,{type:"radio","aria-hidden":!0,defaultChecked:r,...a,tabIndex:-1,ref:o,style:{...a.style,...y,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});Lk.displayName=IG;function Mk(e){return e?"checked":"unchecked"}var FG=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],x_="RadioGroup",[TG,vre]=Ou(x_,[bk,Ik]),kk=bk(),Uk=Ik(),[PG,LG]=TG(x_),Rk=re.forwardRef((e,t)=>{const{__scopeRadioGroup:r,name:i,defaultValue:a,value:u,required:h=!1,disabled:o=!1,orientation:g,dir:y,loop:C=!0,onValueChange:I,...F}=e,b=kk(r),N=q5(y),[U,H]=Jp({prop:u,defaultProp:a??null,onChange:I,caller:x_});return X.jsx(PG,{scope:r,name:i,required:h,disabled:o,value:U,onValueChange:H,children:X.jsx(bG,{asChild:!0,...b,orientation:g,dir:N,loop:C,children:X.jsx(bn.div,{role:"radiogroup","aria-required":h,"aria-orientation":g,"data-disabled":o?"":void 0,dir:N,...F,ref:t})})})});Rk.displayName=x_;var Nk="RadioGroupItem",Dk=re.forwardRef((e,t)=>{const{__scopeRadioGroup:r,disabled:i,...a}=e,u=LG(Nk,r),h=u.disabled||i,o=kk(r),g=Uk(r),y=re.useRef(null),C=ci(t,y),I=u.value===a.value,F=re.useRef(!1);return re.useEffect(()=>{const b=U=>{FG.includes(U.key)&&(F.current=!0)},N=()=>F.current=!1;return document.addEventListener("keydown",b),document.addEventListener("keyup",N),()=>{document.removeEventListener("keydown",b),document.removeEventListener("keyup",N)}},[]),X.jsx(BG,{asChild:!0,...o,focusable:!h,active:I,children:X.jsx(Fk,{disabled:h,required:u.required,checked:I,...g,...a,name:u.name,ref:C,onCheck:()=>u.onValueChange(a.value),onKeyDown:on(b=>{b.key==="Enter"&&b.preventDefault()}),onFocus:on(a.onFocus,()=>{var b;F.current&&((b=y.current)==null||b.click())})})})});Dk.displayName=Nk;var MG="RadioGroupIndicator",Qk=re.forwardRef((e,t)=>{const{__scopeRadioGroup:r,...i}=e,a=Uk(r);return X.jsx(Pk,{...a,...i,ref:t})});Qk.displayName=MG;var Ok=Rk,zk=Dk,kG=Qk;const T2=re.forwardRef(({className:e,...t},r)=>X.jsx(Ok,{className:Qn("grid gap-2",e),...t,ref:r}));T2.displayName=Ok.displayName;const ep=re.forwardRef(({className:e,...t},r)=>X.jsx(zk,{ref:r,className:Qn("aspect-square h-4 w-4 rounded-full border border-primary text-primary ring-offset-background focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),...t,children:X.jsx(kG,{className:"flex items-center justify-center",children:X.jsx($O,{className:"h-2.5 w-2.5 fill-current text-current"})})}));ep.displayName=zk.displayName;var UG="Label",Hk=re.forwardRef((e,t)=>X.jsx(bn.label,{...e,ref:t,onMouseDown:r=>{var a;r.target.closest("button, input, select, textarea")||((a=e.onMouseDown)==null||a.call(e,r),!r.defaultPrevented&&r.detail>1&&r.preventDefault())}}));Hk.displayName=UG;var jk=Hk;const RG=s_("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),ph=re.forwardRef(({className:e,...t},r)=>X.jsx(jk,{ref:r,className:Qn(RG(),e),...t}));ph.displayName=jk.displayName;function DI(e,[t,r]){return Math.min(r,Math.max(t,e))}var Sx=0;function NG(){re.useEffect(()=>{const e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??QI()),document.body.insertAdjacentElement("beforeend",e[1]??QI()),Sx++,()=>{Sx===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(t=>t.remove()),Sx--}},[])}function QI(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var Ex="focusScope.autoFocusOnMount",Ix="focusScope.autoFocusOnUnmount",OI={bubbles:!1,cancelable:!0},DG="FocusScope",Vk=re.forwardRef((e,t)=>{const{loop:r=!1,trapped:i=!1,onMountAutoFocus:a,onUnmountAutoFocus:u,...h}=e,[o,g]=re.useState(null),y=rA(a),C=rA(u),I=re.useRef(null),F=ci(t,U=>g(U)),b=re.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;re.useEffect(()=>{if(i){let U=function(V){if(b.paused||!o)return;const W=V.target;o.contains(W)?I.current=W:mh(I.current,{select:!0})},H=function(V){if(b.paused||!o)return;const W=V.relatedTarget;W!==null&&(o.contains(W)||mh(I.current,{select:!0}))},k=function(V){if(document.activeElement===document.body)for(const se of V)se.removedNodes.length>0&&mh(o)};document.addEventListener("focusin",U),document.addEventListener("focusout",H);const R=new MutationObserver(k);return o&&R.observe(o,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",U),document.removeEventListener("focusout",H),R.disconnect()}}},[i,o,b.paused]),re.useEffect(()=>{if(o){HI.add(b);const U=document.activeElement;if(!o.contains(U)){const k=new CustomEvent(Ex,OI);o.addEventListener(Ex,y),o.dispatchEvent(k),k.defaultPrevented||(QG(VG(Kk(o)),{select:!0}),document.activeElement===U&&mh(o))}return()=>{o.removeEventListener(Ex,y),setTimeout(()=>{const k=new CustomEvent(Ix,OI);o.addEventListener(Ix,C),o.dispatchEvent(k),k.defaultPrevented||mh(U??document.body,{select:!0}),o.removeEventListener(Ix,C),HI.remove(b)},0)}}},[o,y,C,b]);const N=re.useCallback(U=>{if(!r&&!i||b.paused)return;const H=U.key==="Tab"&&!U.altKey&&!U.ctrlKey&&!U.metaKey,k=document.activeElement;if(H&&k){const R=U.currentTarget,[V,W]=OG(R);V&&W?!U.shiftKey&&k===W?(U.preventDefault(),r&&mh(V,{select:!0})):U.shiftKey&&k===V&&(U.preventDefault(),r&&mh(W,{select:!0})):k===R&&U.preventDefault()}},[r,i,b.paused]);return X.jsx(bn.div,{tabIndex:-1,...h,ref:F,onKeyDown:N})});Vk.displayName=DG;function QG(e,{select:t=!1}={}){const r=document.activeElement;for(const i of e)if(mh(i,{select:t}),document.activeElement!==r)return}function OG(e){const t=Kk(e),r=zI(t,e),i=zI(t.reverse(),e);return[r,i]}function Kk(e){const t=[],r=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:i=>{const a=i.tagName==="INPUT"&&i.type==="hidden";return i.disabled||i.hidden||a?NodeFilter.FILTER_SKIP:i.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)t.push(r.currentNode);return t}function zI(e,t){for(const r of e)if(!zG(r,{upTo:t}))return r}function zG(e,{upTo:t}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t!==void 0&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function HG(e){return e instanceof HTMLInputElement&&"select"in e}function mh(e,{select:t=!1}={}){if(e&&e.focus){const r=document.activeElement;e.focus({preventScroll:!0}),e!==r&&HG(e)&&t&&e.select()}}var HI=jG();function jG(){let e=[];return{add(t){const r=e[0];t!==r&&(r==null||r.pause()),e=jI(e,t),e.unshift(t)},remove(t){var r;e=jI(e,t),(r=e[0])==null||r.resume()}}}function jI(e,t){const r=[...e],i=r.indexOf(t);return i!==-1&&r.splice(i,1),r}function VG(e){return e.filter(t=>t.tagName!=="A")}var KG=function(e){if(typeof document>"u")return null;var t=Array.isArray(e)?e[0]:e;return t.ownerDocument.body},jf=new WeakMap,Ty=new WeakMap,Py={},Fx=0,Gk=function(e){return e&&(e.host||Gk(e.parentNode))},GG=function(e,t){return t.map(function(r){if(e.contains(r))return r;var i=Gk(r);return i&&e.contains(i)?i:(console.error("aria-hidden",r,"in not contained inside",e,". Doing nothing"),null)}).filter(function(r){return!!r})},$G=function(e,t,r,i){var a=GG(t,Array.isArray(e)?e:[e]);Py[r]||(Py[r]=new WeakMap);var u=Py[r],h=[],o=new Set,g=new Set(a),y=function(I){!I||o.has(I)||(o.add(I),y(I.parentNode))};a.forEach(y);var C=function(I){!I||g.has(I)||Array.prototype.forEach.call(I.children,function(F){if(o.has(F))C(F);else try{var b=F.getAttribute(i),N=b!==null&&b!=="false",U=(jf.get(F)||0)+1,H=(u.get(F)||0)+1;jf.set(F,U),u.set(F,H),h.push(F),U===1&&N&&Ty.set(F,!0),H===1&&F.setAttribute(r,"true"),N||F.setAttribute(i,"true")}catch(k){console.error("aria-hidden: cannot operate on ",F,k)}})};return C(t),o.clear(),Fx++,function(){h.forEach(function(I){var F=jf.get(I)-1,b=u.get(I)-1;jf.set(I,F),u.set(I,b),F||(Ty.has(I)||I.removeAttribute(i),Ty.delete(I)),b||I.removeAttribute(r)}),Fx--,Fx||(jf=new WeakMap,jf=new WeakMap,Ty=new WeakMap,Py={})}},qG=function(e,t,r){r===void 0&&(r="data-aria-hidden");var i=Array.from(Array.isArray(e)?e:[e]),a=KG(e);return a?(i.push.apply(i,Array.from(a.querySelectorAll("[aria-live], script"))),$G(i,a,r,"aria-hidden")):function(){return null}},Tc=function(){return Tc=Object.assign||function(t){for(var r,i=1,a=arguments.length;i<a;i++){r=arguments[i];for(var u in r)Object.prototype.hasOwnProperty.call(r,u)&&(t[u]=r[u])}return t},Tc.apply(this,arguments)};function $k(e,t){var r={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(r[i]=e[i]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,i=Object.getOwnPropertySymbols(e);a<i.length;a++)t.indexOf(i[a])<0&&Object.prototype.propertyIsEnumerable.call(e,i[a])&&(r[i[a]]=e[i[a]]);return r}function ZG(e,t,r){if(r||arguments.length===2)for(var i=0,a=t.length,u;i<a;i++)(u||!(i in t))&&(u||(u=Array.prototype.slice.call(t,0,i)),u[i]=t[i]);return e.concat(u||Array.prototype.slice.call(t))}var Sv="right-scroll-bar-position",Ev="width-before-scroll-bar",WG="with-scroll-bars-hidden",XG="--removed-body-scroll-bar-size";function Tx(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}function YG(e,t){var r=re.useState(function(){return{value:e,callback:t,facade:{get current(){return r.value},set current(i){var a=r.value;a!==i&&(r.value=i,r.callback(i,a))}}}})[0];return r.callback=t,r.facade}var JG=typeof window<"u"?re.useLayoutEffect:re.useEffect,VI=new WeakMap;function e$(e,t){var r=YG(null,function(i){return e.forEach(function(a){return Tx(a,i)})});return JG(function(){var i=VI.get(r);if(i){var a=new Set(i),u=new Set(e),h=r.current;a.forEach(function(o){u.has(o)||Tx(o,null)}),u.forEach(function(o){a.has(o)||Tx(o,h)})}VI.set(r,e)},[e]),r}function t$(e){return e}function r$(e,t){t===void 0&&(t=t$);var r=[],i=!1,a={read:function(){if(i)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return r.length?r[r.length-1]:e},useMedium:function(u){var h=t(u,i);return r.push(h),function(){r=r.filter(function(o){return o!==h})}},assignSyncMedium:function(u){for(i=!0;r.length;){var h=r;r=[],h.forEach(u)}r={push:function(o){return u(o)},filter:function(){return r}}},assignMedium:function(u){i=!0;var h=[];if(r.length){var o=r;r=[],o.forEach(u),h=r}var g=function(){var C=h;h=[],C.forEach(u)},y=function(){return Promise.resolve().then(g)};y(),r={push:function(C){h.push(C),y()},filter:function(C){return h=h.filter(C),r}}}};return a}function n$(e){e===void 0&&(e={});var t=r$(null);return t.options=Tc({async:!0,ssr:!1},e),t}var qk=function(e){var t=e.sideCar,r=$k(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var i=t.read();if(!i)throw new Error("Sidecar medium not found");return re.createElement(i,Tc({},r))};qk.isSideCarExport=!0;function i$(e,t){return e.useMedium(t),qk}var Zk=n$(),Px=function(){},b_=re.forwardRef(function(e,t){var r=re.useRef(null),i=re.useState({onScrollCapture:Px,onWheelCapture:Px,onTouchMoveCapture:Px}),a=i[0],u=i[1],h=e.forwardProps,o=e.children,g=e.className,y=e.removeScrollBar,C=e.enabled,I=e.shards,F=e.sideCar,b=e.noRelative,N=e.noIsolation,U=e.inert,H=e.allowPinchZoom,k=e.as,R=k===void 0?"div":k,V=e.gapMode,W=$k(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),se=F,fe=e$([r,t]),ue=Tc(Tc({},W),a);return re.createElement(re.Fragment,null,C&&re.createElement(se,{sideCar:Zk,removeScrollBar:y,shards:I,noRelative:b,noIsolation:N,inert:U,setCallbacks:u,allowPinchZoom:!!H,lockRef:r,gapMode:V}),h?re.cloneElement(re.Children.only(o),Tc(Tc({},ue),{ref:fe})):re.createElement(R,Tc({},ue,{className:g,ref:fe}),o))});b_.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};b_.classNames={fullWidth:Ev,zeroRight:Sv};var s$=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function o$(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=s$();return t&&e.setAttribute("nonce",t),e}function a$(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function l$(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var A$=function(){var e=0,t=null;return{add:function(r){e==0&&(t=o$())&&(a$(t,r),l$(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},c$=function(){var e=A$();return function(t,r){re.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&r])}},Wk=function(){var e=c$(),t=function(r){var i=r.styles,a=r.dynamic;return e(i,a),null};return t},u$={left:0,top:0,right:0,gap:0},Lx=function(e){return parseInt(e||"",10)||0},h$=function(e){var t=window.getComputedStyle(document.body),r=t[e==="padding"?"paddingLeft":"marginLeft"],i=t[e==="padding"?"paddingTop":"marginTop"],a=t[e==="padding"?"paddingRight":"marginRight"];return[Lx(r),Lx(i),Lx(a)]},d$=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return u$;var t=h$(e),r=document.documentElement.clientWidth,i=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,i-r+t[2]-t[0])}},f$=Wk(),Tp="data-scroll-locked",p$=function(e,t,r,i){var a=e.left,u=e.top,h=e.right,o=e.gap;return r===void 0&&(r="margin"),`
  .`.concat(WG,` {
   overflow: hidden `).concat(i,`;
   padding-right: `).concat(o,"px ").concat(i,`;
  }
  body[`).concat(Tp,`] {
    overflow: hidden `).concat(i,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(i,";"),r==="margin"&&`
    padding-left: `.concat(a,`px;
    padding-top: `).concat(u,`px;
    padding-right: `).concat(h,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(o,"px ").concat(i,`;
    `),r==="padding"&&"padding-right: ".concat(o,"px ").concat(i,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(Sv,` {
    right: `).concat(o,"px ").concat(i,`;
  }
  
  .`).concat(Ev,` {
    margin-right: `).concat(o,"px ").concat(i,`;
  }
  
  .`).concat(Sv," .").concat(Sv,` {
    right: 0 `).concat(i,`;
  }
  
  .`).concat(Ev," .").concat(Ev,` {
    margin-right: 0 `).concat(i,`;
  }
  
  body[`).concat(Tp,`] {
    `).concat(XG,": ").concat(o,`px;
  }
`)},KI=function(){var e=parseInt(document.body.getAttribute(Tp)||"0",10);return isFinite(e)?e:0},m$=function(){re.useEffect(function(){return document.body.setAttribute(Tp,(KI()+1).toString()),function(){var e=KI()-1;e<=0?document.body.removeAttribute(Tp):document.body.setAttribute(Tp,e.toString())}},[])},g$=function(e){var t=e.noRelative,r=e.noImportant,i=e.gapMode,a=i===void 0?"margin":i;m$();var u=re.useMemo(function(){return d$(a)},[a]);return re.createElement(f$,{styles:p$(u,!t,a,r?"":"!important")})},P2=!1;if(typeof window<"u")try{var Ly=Object.defineProperty({},"passive",{get:function(){return P2=!0,!0}});window.addEventListener("test",Ly,Ly),window.removeEventListener("test",Ly,Ly)}catch{P2=!1}var Vf=P2?{passive:!1}:!1,y$=function(e){return e.tagName==="TEXTAREA"},Xk=function(e,t){if(!(e instanceof Element))return!1;var r=window.getComputedStyle(e);return r[t]!=="hidden"&&!(r.overflowY===r.overflowX&&!y$(e)&&r[t]==="visible")},v$=function(e){return Xk(e,"overflowY")},_$=function(e){return Xk(e,"overflowX")},GI=function(e,t){var r=t.ownerDocument,i=t;do{typeof ShadowRoot<"u"&&i instanceof ShadowRoot&&(i=i.host);var a=Yk(e,i);if(a){var u=Jk(e,i),h=u[1],o=u[2];if(h>o)return!0}i=i.parentNode}while(i&&i!==r.body);return!1},w$=function(e){var t=e.scrollTop,r=e.scrollHeight,i=e.clientHeight;return[t,r,i]},x$=function(e){var t=e.scrollLeft,r=e.scrollWidth,i=e.clientWidth;return[t,r,i]},Yk=function(e,t){return e==="v"?v$(t):_$(t)},Jk=function(e,t){return e==="v"?w$(t):x$(t)},b$=function(e,t){return e==="h"&&t==="rtl"?-1:1},B$=function(e,t,r,i,a){var u=b$(e,window.getComputedStyle(t).direction),h=u*i,o=r.target,g=t.contains(o),y=!1,C=h>0,I=0,F=0;do{if(!o)break;var b=Jk(e,o),N=b[0],U=b[1],H=b[2],k=U-H-u*N;(N||k)&&Yk(e,o)&&(I+=k,F+=N);var R=o.parentNode;o=R&&R.nodeType===Node.DOCUMENT_FRAGMENT_NODE?R.host:R}while(!g&&o!==document.body||g&&(t.contains(o)||t===o));return(C&&Math.abs(I)<1||!C&&Math.abs(F)<1)&&(y=!0),y},My=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},$I=function(e){return[e.deltaX,e.deltaY]},qI=function(e){return e&&"current"in e?e.current:e},C$=function(e,t){return e[0]===t[0]&&e[1]===t[1]},S$=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},E$=0,Kf=[];function I$(e){var t=re.useRef([]),r=re.useRef([0,0]),i=re.useRef(),a=re.useState(E$++)[0],u=re.useState(Wk)[0],h=re.useRef(e);re.useEffect(function(){h.current=e},[e]),re.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(a));var U=ZG([e.lockRef.current],(e.shards||[]).map(qI),!0).filter(Boolean);return U.forEach(function(H){return H.classList.add("allow-interactivity-".concat(a))}),function(){document.body.classList.remove("block-interactivity-".concat(a)),U.forEach(function(H){return H.classList.remove("allow-interactivity-".concat(a))})}}},[e.inert,e.lockRef.current,e.shards]);var o=re.useCallback(function(U,H){if("touches"in U&&U.touches.length===2||U.type==="wheel"&&U.ctrlKey)return!h.current.allowPinchZoom;var k=My(U),R=r.current,V="deltaX"in U?U.deltaX:R[0]-k[0],W="deltaY"in U?U.deltaY:R[1]-k[1],se,fe=U.target,ue=Math.abs(V)>Math.abs(W)?"h":"v";if("touches"in U&&ue==="h"&&fe.type==="range")return!1;var ae=GI(ue,fe);if(!ae)return!0;if(ae?se=ue:(se=ue==="v"?"h":"v",ae=GI(ue,fe)),!ae)return!1;if(!i.current&&"changedTouches"in U&&(V||W)&&(i.current=se),!se)return!0;var Be=i.current||se;return B$(Be,H,U,Be==="h"?V:W)},[]),g=re.useCallback(function(U){var H=U;if(!(!Kf.length||Kf[Kf.length-1]!==u)){var k="deltaY"in H?$I(H):My(H),R=t.current.filter(function(se){return se.name===H.type&&(se.target===H.target||H.target===se.shadowParent)&&C$(se.delta,k)})[0];if(R&&R.should){H.cancelable&&H.preventDefault();return}if(!R){var V=(h.current.shards||[]).map(qI).filter(Boolean).filter(function(se){return se.contains(H.target)}),W=V.length>0?o(H,V[0]):!h.current.noIsolation;W&&H.cancelable&&H.preventDefault()}}},[]),y=re.useCallback(function(U,H,k,R){var V={name:U,delta:H,target:k,should:R,shadowParent:F$(k)};t.current.push(V),setTimeout(function(){t.current=t.current.filter(function(W){return W!==V})},1)},[]),C=re.useCallback(function(U){r.current=My(U),i.current=void 0},[]),I=re.useCallback(function(U){y(U.type,$I(U),U.target,o(U,e.lockRef.current))},[]),F=re.useCallback(function(U){y(U.type,My(U),U.target,o(U,e.lockRef.current))},[]);re.useEffect(function(){return Kf.push(u),e.setCallbacks({onScrollCapture:I,onWheelCapture:I,onTouchMoveCapture:F}),document.addEventListener("wheel",g,Vf),document.addEventListener("touchmove",g,Vf),document.addEventListener("touchstart",C,Vf),function(){Kf=Kf.filter(function(U){return U!==u}),document.removeEventListener("wheel",g,Vf),document.removeEventListener("touchmove",g,Vf),document.removeEventListener("touchstart",C,Vf)}},[]);var b=e.removeScrollBar,N=e.inert;return re.createElement(re.Fragment,null,N?re.createElement(u,{styles:S$(a)}):null,b?re.createElement(g$,{noRelative:e.noRelative,gapMode:e.gapMode}):null)}function F$(e){for(var t=null;e!==null;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const T$=i$(Zk,I$);var eU=re.forwardRef(function(e,t){return re.createElement(b_,Tc({},e,{ref:t,sideCar:T$}))});eU.classNames=b_.classNames;var P$=[" ","Enter","ArrowUp","ArrowDown"],L$=[" ","Enter"],hf="Select",[B_,C_,M$]=w5(hf),[pm,_re]=Ou(hf,[M$,u_]),S_=u_(),[k$,cd]=pm(hf),[U$,R$]=pm(hf),tU=e=>{const{__scopeSelect:t,children:r,open:i,defaultOpen:a,onOpenChange:u,value:h,defaultValue:o,onValueChange:g,dir:y,name:C,autoComplete:I,disabled:F,required:b,form:N}=e,U=S_(t),[H,k]=re.useState(null),[R,V]=re.useState(null),[W,se]=re.useState(!1),fe=q5(y),[ue,ae]=Jp({prop:i,defaultProp:a??!1,onChange:u,caller:hf}),[Be,Ue]=Jp({prop:h,defaultProp:o,onChange:g,caller:hf}),te=re.useRef(null),de=H?N||!!H.closest("form"):!0,[Te,we]=re.useState(new Set),st=Array.from(Te).map(Ze=>Ze.props.value).join(";");return X.jsx(M7,{...U,children:X.jsxs(k$,{required:b,scope:t,trigger:H,onTriggerChange:k,valueNode:R,onValueNodeChange:V,valueNodeHasChildren:W,onValueNodeHasChildrenChange:se,contentId:a_(),value:Be,onValueChange:Ue,open:ue,onOpenChange:ae,dir:fe,triggerPointerDownPosRef:te,disabled:F,children:[X.jsx(B_.Provider,{scope:t,children:X.jsx(U$,{scope:e.__scopeSelect,onNativeOptionAdd:re.useCallback(Ze=>{we(At=>new Set(At).add(Ze))},[]),onNativeOptionRemove:re.useCallback(Ze=>{we(At=>{const Le=new Set(At);return Le.delete(Ze),Le})},[]),children:r})}),de?X.jsxs(CU,{"aria-hidden":!0,required:b,tabIndex:-1,name:C,autoComplete:I,value:Be,onChange:Ze=>Ue(Ze.target.value),disabled:F,form:N,children:[Be===void 0?X.jsx("option",{value:""}):null,Array.from(Te)]},st):null]})})};tU.displayName=hf;var rU="SelectTrigger",nU=re.forwardRef((e,t)=>{const{__scopeSelect:r,disabled:i=!1,...a}=e,u=S_(r),h=cd(rU,r),o=h.disabled||i,g=ci(t,h.onTriggerChange),y=C_(r),C=re.useRef("touch"),[I,F,b]=EU(U=>{const H=y().filter(V=>!V.disabled),k=H.find(V=>V.value===h.value),R=IU(H,U,k);R!==void 0&&h.onValueChange(R.value)}),N=U=>{o||(h.onOpenChange(!0),b()),U&&(h.triggerPointerDownPosRef.current={x:Math.round(U.pageX),y:Math.round(U.pageY)})};return X.jsx(dM,{asChild:!0,...u,children:X.jsx(bn.button,{type:"button",role:"combobox","aria-controls":h.contentId,"aria-expanded":h.open,"aria-required":h.required,"aria-autocomplete":"none",dir:h.dir,"data-state":h.open?"open":"closed",disabled:o,"data-disabled":o?"":void 0,"data-placeholder":SU(h.value)?"":void 0,...a,ref:g,onClick:on(a.onClick,U=>{U.currentTarget.focus(),C.current!=="mouse"&&N(U)}),onPointerDown:on(a.onPointerDown,U=>{C.current=U.pointerType;const H=U.target;H.hasPointerCapture(U.pointerId)&&H.releasePointerCapture(U.pointerId),U.button===0&&U.ctrlKey===!1&&U.pointerType==="mouse"&&(N(U),U.preventDefault())}),onKeyDown:on(a.onKeyDown,U=>{const H=I.current!=="";!(U.ctrlKey||U.altKey||U.metaKey)&&U.key.length===1&&F(U.key),!(H&&U.key===" ")&&P$.includes(U.key)&&(N(),U.preventDefault())})})})});nU.displayName=rU;var iU="SelectValue",sU=re.forwardRef((e,t)=>{const{__scopeSelect:r,className:i,style:a,children:u,placeholder:h="",...o}=e,g=cd(iU,r),{onValueNodeHasChildrenChange:y}=g,C=u!==void 0,I=ci(t,g.onValueNodeChange);return Io(()=>{y(C)},[y,C]),X.jsx(bn.span,{...o,ref:I,style:{pointerEvents:"none"},children:SU(g.value)?X.jsx(X.Fragment,{children:h}):u})});sU.displayName=iU;var N$="SelectIcon",oU=re.forwardRef((e,t)=>{const{__scopeSelect:r,children:i,...a}=e;return X.jsx(bn.span,{"aria-hidden":!0,...a,ref:t,children:i||"▼"})});oU.displayName=N$;var D$="SelectPortal",aU=e=>X.jsx(x5,{asChild:!0,...e});aU.displayName=D$;var df="SelectContent",lU=re.forwardRef((e,t)=>{const r=cd(df,e.__scopeSelect),[i,a]=re.useState();if(Io(()=>{a(new DocumentFragment)},[]),!r.open){const u=i;return u?mf.createPortal(X.jsx(AU,{scope:e.__scopeSelect,children:X.jsx(B_.Slot,{scope:e.__scopeSelect,children:X.jsx("div",{children:e.children})})}),u):null}return X.jsx(cU,{...e,ref:t})});lU.displayName=df;var kA=10,[AU,ud]=pm(df),Q$="SelectContentImpl",O$=Jg("SelectContent.RemoveScroll"),cU=re.forwardRef((e,t)=>{const{__scopeSelect:r,position:i="item-aligned",onCloseAutoFocus:a,onEscapeKeyDown:u,onPointerDownOutside:h,side:o,sideOffset:g,align:y,alignOffset:C,arrowPadding:I,collisionBoundary:F,collisionPadding:b,sticky:N,hideWhenDetached:U,avoidCollisions:H,...k}=e,R=cd(df,r),[V,W]=re.useState(null),[se,fe]=re.useState(null),ue=ci(t,Xe=>W(Xe)),[ae,Be]=re.useState(null),[Ue,te]=re.useState(null),de=C_(r),[Te,we]=re.useState(!1),st=re.useRef(!1);re.useEffect(()=>{if(V)return qG(V)},[V]),NG();const Ze=re.useCallback(Xe=>{const[pt,...dt]=de().map($t=>$t.ref.current),[Rt]=dt.slice(-1),Mt=document.activeElement;for(const $t of Xe)if($t===Mt||($t==null||$t.scrollIntoView({block:"nearest"}),$t===pt&&se&&(se.scrollTop=0),$t===Rt&&se&&(se.scrollTop=se.scrollHeight),$t==null||$t.focus(),document.activeElement!==Mt))return},[de,se]),At=re.useCallback(()=>Ze([ae,V]),[Ze,ae,V]);re.useEffect(()=>{Te&&At()},[Te,At]);const{onOpenChange:Le,triggerPointerDownPosRef:He}=R;re.useEffect(()=>{if(V){let Xe={x:0,y:0};const pt=Rt=>{var Mt,$t;Xe={x:Math.abs(Math.round(Rt.pageX)-(((Mt=He.current)==null?void 0:Mt.x)??0)),y:Math.abs(Math.round(Rt.pageY)-((($t=He.current)==null?void 0:$t.y)??0))}},dt=Rt=>{Xe.x<=10&&Xe.y<=10?Rt.preventDefault():V.contains(Rt.target)||Le(!1),document.removeEventListener("pointermove",pt),He.current=null};return He.current!==null&&(document.addEventListener("pointermove",pt),document.addEventListener("pointerup",dt,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",pt),document.removeEventListener("pointerup",dt,{capture:!0})}}},[V,Le,He]),re.useEffect(()=>{const Xe=()=>Le(!1);return window.addEventListener("blur",Xe),window.addEventListener("resize",Xe),()=>{window.removeEventListener("blur",Xe),window.removeEventListener("resize",Xe)}},[Le]);const[it,Lt]=EU(Xe=>{const pt=de().filter(Mt=>!Mt.disabled),dt=pt.find(Mt=>Mt.ref.current===document.activeElement),Rt=IU(pt,Xe,dt);Rt&&setTimeout(()=>Rt.ref.current.focus())}),ie=re.useCallback((Xe,pt,dt)=>{const Rt=!st.current&&!dt;(R.value!==void 0&&R.value===pt||Rt)&&(Be(Xe),Rt&&(st.current=!0))},[R.value]),Ce=re.useCallback(()=>V==null?void 0:V.focus(),[V]),Pe=re.useCallback((Xe,pt,dt)=>{const Rt=!st.current&&!dt;(R.value!==void 0&&R.value===pt||Rt)&&te(Xe)},[R.value]),$e=i==="popper"?L2:uU,nt=$e===L2?{side:o,sideOffset:g,align:y,alignOffset:C,arrowPadding:I,collisionBoundary:F,collisionPadding:b,sticky:N,hideWhenDetached:U,avoidCollisions:H}:{};return X.jsx(AU,{scope:r,content:V,viewport:se,onViewportChange:fe,itemRefCallback:ie,selectedItem:ae,onItemLeave:Ce,itemTextRefCallback:Pe,focusSelectedItem:At,selectedItemText:Ue,position:i,isPositioned:Te,searchRef:it,children:X.jsx(eU,{as:O$,allowPinchZoom:!0,children:X.jsx(Vk,{asChild:!0,trapped:R.open,onMountAutoFocus:Xe=>{Xe.preventDefault()},onUnmountAutoFocus:on(a,Xe=>{var pt;(pt=R.trigger)==null||pt.focus({preventScroll:!0}),Xe.preventDefault()}),children:X.jsx(r_,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:u,onPointerDownOutside:h,onFocusOutside:Xe=>Xe.preventDefault(),onDismiss:()=>R.onOpenChange(!1),children:X.jsx($e,{role:"listbox",id:R.contentId,"data-state":R.open?"open":"closed",dir:R.dir,onContextMenu:Xe=>Xe.preventDefault(),...k,...nt,onPlaced:()=>we(!0),ref:ue,style:{display:"flex",flexDirection:"column",outline:"none",...k.style},onKeyDown:on(k.onKeyDown,Xe=>{const pt=Xe.ctrlKey||Xe.altKey||Xe.metaKey;if(Xe.key==="Tab"&&Xe.preventDefault(),!pt&&Xe.key.length===1&&Lt(Xe.key),["ArrowUp","ArrowDown","Home","End"].includes(Xe.key)){let Rt=de().filter(Mt=>!Mt.disabled).map(Mt=>Mt.ref.current);if(["ArrowUp","End"].includes(Xe.key)&&(Rt=Rt.slice().reverse()),["ArrowUp","ArrowDown"].includes(Xe.key)){const Mt=Xe.target,$t=Rt.indexOf(Mt);Rt=Rt.slice($t+1)}setTimeout(()=>Ze(Rt)),Xe.preventDefault()}})})})})})})});cU.displayName=Q$;var z$="SelectItemAlignedPosition",uU=re.forwardRef((e,t)=>{const{__scopeSelect:r,onPlaced:i,...a}=e,u=cd(df,r),h=ud(df,r),[o,g]=re.useState(null),[y,C]=re.useState(null),I=ci(t,ue=>C(ue)),F=C_(r),b=re.useRef(!1),N=re.useRef(!0),{viewport:U,selectedItem:H,selectedItemText:k,focusSelectedItem:R}=h,V=re.useCallback(()=>{if(u.trigger&&u.valueNode&&o&&y&&U&&H&&k){const ue=u.trigger.getBoundingClientRect(),ae=y.getBoundingClientRect(),Be=u.valueNode.getBoundingClientRect(),Ue=k.getBoundingClientRect();if(u.dir!=="rtl"){const Mt=Ue.left-ae.left,$t=Be.left-Mt,jt=ue.left-$t,vr=ue.width+jt,Ft=Math.max(vr,ae.width),Ge=window.innerWidth-kA,Cr=DI($t,[kA,Math.max(kA,Ge-Ft)]);o.style.minWidth=vr+"px",o.style.left=Cr+"px"}else{const Mt=ae.right-Ue.right,$t=window.innerWidth-Be.right-Mt,jt=window.innerWidth-ue.right-$t,vr=ue.width+jt,Ft=Math.max(vr,ae.width),Ge=window.innerWidth-kA,Cr=DI($t,[kA,Math.max(kA,Ge-Ft)]);o.style.minWidth=vr+"px",o.style.right=Cr+"px"}const te=F(),de=window.innerHeight-kA*2,Te=U.scrollHeight,we=window.getComputedStyle(y),st=parseInt(we.borderTopWidth,10),Ze=parseInt(we.paddingTop,10),At=parseInt(we.borderBottomWidth,10),Le=parseInt(we.paddingBottom,10),He=st+Ze+Te+Le+At,it=Math.min(H.offsetHeight*5,He),Lt=window.getComputedStyle(U),ie=parseInt(Lt.paddingTop,10),Ce=parseInt(Lt.paddingBottom,10),Pe=ue.top+ue.height/2-kA,$e=de-Pe,nt=H.offsetHeight/2,Xe=H.offsetTop+nt,pt=st+Ze+Xe,dt=He-pt;if(pt<=Pe){const Mt=te.length>0&&H===te[te.length-1].ref.current;o.style.bottom="0px";const $t=y.clientHeight-U.offsetTop-U.offsetHeight,jt=Math.max($e,nt+(Mt?Ce:0)+$t+At),vr=pt+jt;o.style.height=vr+"px"}else{const Mt=te.length>0&&H===te[0].ref.current;o.style.top="0px";const jt=Math.max(Pe,st+U.offsetTop+(Mt?ie:0)+nt)+dt;o.style.height=jt+"px",U.scrollTop=pt-Pe+U.offsetTop}o.style.margin=`${kA}px 0`,o.style.minHeight=it+"px",o.style.maxHeight=de+"px",i==null||i(),requestAnimationFrame(()=>b.current=!0)}},[F,u.trigger,u.valueNode,o,y,U,H,k,u.dir,i]);Io(()=>V(),[V]);const[W,se]=re.useState();Io(()=>{y&&se(window.getComputedStyle(y).zIndex)},[y]);const fe=re.useCallback(ue=>{ue&&N.current===!0&&(V(),R==null||R(),N.current=!1)},[V,R]);return X.jsx(j$,{scope:r,contentWrapper:o,shouldExpandOnScrollRef:b,onScrollButtonChange:fe,children:X.jsx("div",{ref:g,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:W},children:X.jsx(bn.div,{...a,ref:I,style:{boxSizing:"border-box",maxHeight:"100%",...a.style}})})})});uU.displayName=z$;var H$="SelectPopperPosition",L2=re.forwardRef((e,t)=>{const{__scopeSelect:r,align:i="start",collisionPadding:a=kA,...u}=e,h=S_(r);return X.jsx(fM,{...h,...u,ref:t,align:i,collisionPadding:a,style:{boxSizing:"border-box",...u.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});L2.displayName=H$;var[j$,X5]=pm(df,{}),M2="SelectViewport",hU=re.forwardRef((e,t)=>{const{__scopeSelect:r,nonce:i,...a}=e,u=ud(M2,r),h=X5(M2,r),o=ci(t,u.onViewportChange),g=re.useRef(0);return X.jsxs(X.Fragment,{children:[X.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:i}),X.jsx(B_.Slot,{scope:r,children:X.jsx(bn.div,{"data-radix-select-viewport":"",role:"presentation",...a,ref:o,style:{position:"relative",flex:1,overflow:"hidden auto",...a.style},onScroll:on(a.onScroll,y=>{const C=y.currentTarget,{contentWrapper:I,shouldExpandOnScrollRef:F}=h;if(F!=null&&F.current&&I){const b=Math.abs(g.current-C.scrollTop);if(b>0){const N=window.innerHeight-kA*2,U=parseFloat(I.style.minHeight),H=parseFloat(I.style.height),k=Math.max(U,H);if(k<N){const R=k+b,V=Math.min(N,R),W=R-V;I.style.height=V+"px",I.style.bottom==="0px"&&(C.scrollTop=W>0?W:0,I.style.justifyContent="flex-end")}}}g.current=C.scrollTop})})})]})});hU.displayName=M2;var dU="SelectGroup",[V$,K$]=pm(dU),G$=re.forwardRef((e,t)=>{const{__scopeSelect:r,...i}=e,a=a_();return X.jsx(V$,{scope:r,id:a,children:X.jsx(bn.div,{role:"group","aria-labelledby":a,...i,ref:t})})});G$.displayName=dU;var fU="SelectLabel",pU=re.forwardRef((e,t)=>{const{__scopeSelect:r,...i}=e,a=K$(fU,r);return X.jsx(bn.div,{id:a.id,...i,ref:t})});pU.displayName=fU;var y1="SelectItem",[$$,mU]=pm(y1),gU=re.forwardRef((e,t)=>{const{__scopeSelect:r,value:i,disabled:a=!1,textValue:u,...h}=e,o=cd(y1,r),g=ud(y1,r),y=o.value===i,[C,I]=re.useState(u??""),[F,b]=re.useState(!1),N=ci(t,R=>{var V;return(V=g.itemRefCallback)==null?void 0:V.call(g,R,i,a)}),U=a_(),H=re.useRef("touch"),k=()=>{a||(o.onValueChange(i),o.onOpenChange(!1))};if(i==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return X.jsx($$,{scope:r,value:i,disabled:a,textId:U,isSelected:y,onItemTextChange:re.useCallback(R=>{I(V=>V||((R==null?void 0:R.textContent)??"").trim())},[]),children:X.jsx(B_.ItemSlot,{scope:r,value:i,disabled:a,textValue:C,children:X.jsx(bn.div,{role:"option","aria-labelledby":U,"data-highlighted":F?"":void 0,"aria-selected":y&&F,"data-state":y?"checked":"unchecked","aria-disabled":a||void 0,"data-disabled":a?"":void 0,tabIndex:a?void 0:-1,...h,ref:N,onFocus:on(h.onFocus,()=>b(!0)),onBlur:on(h.onBlur,()=>b(!1)),onClick:on(h.onClick,()=>{H.current!=="mouse"&&k()}),onPointerUp:on(h.onPointerUp,()=>{H.current==="mouse"&&k()}),onPointerDown:on(h.onPointerDown,R=>{H.current=R.pointerType}),onPointerMove:on(h.onPointerMove,R=>{var V;H.current=R.pointerType,a?(V=g.onItemLeave)==null||V.call(g):H.current==="mouse"&&R.currentTarget.focus({preventScroll:!0})}),onPointerLeave:on(h.onPointerLeave,R=>{var V;R.currentTarget===document.activeElement&&((V=g.onItemLeave)==null||V.call(g))}),onKeyDown:on(h.onKeyDown,R=>{var W;((W=g.searchRef)==null?void 0:W.current)!==""&&R.key===" "||(L$.includes(R.key)&&k(),R.key===" "&&R.preventDefault())})})})})});gU.displayName=y1;var ag="SelectItemText",yU=re.forwardRef((e,t)=>{const{__scopeSelect:r,className:i,style:a,...u}=e,h=cd(ag,r),o=ud(ag,r),g=mU(ag,r),y=R$(ag,r),[C,I]=re.useState(null),F=ci(t,k=>I(k),g.onItemTextChange,k=>{var R;return(R=o.itemTextRefCallback)==null?void 0:R.call(o,k,g.value,g.disabled)}),b=C==null?void 0:C.textContent,N=re.useMemo(()=>X.jsx("option",{value:g.value,disabled:g.disabled,children:b},g.value),[g.disabled,g.value,b]),{onNativeOptionAdd:U,onNativeOptionRemove:H}=y;return Io(()=>(U(N),()=>H(N)),[U,H,N]),X.jsxs(X.Fragment,{children:[X.jsx(bn.span,{id:g.textId,...u,ref:F}),g.isSelected&&h.valueNode&&!h.valueNodeHasChildren?mf.createPortal(u.children,h.valueNode):null]})});yU.displayName=ag;var vU="SelectItemIndicator",_U=re.forwardRef((e,t)=>{const{__scopeSelect:r,...i}=e;return mU(vU,r).isSelected?X.jsx(bn.span,{"aria-hidden":!0,...i,ref:t}):null});_U.displayName=vU;var k2="SelectScrollUpButton",wU=re.forwardRef((e,t)=>{const r=ud(k2,e.__scopeSelect),i=X5(k2,e.__scopeSelect),[a,u]=re.useState(!1),h=ci(t,i.onScrollButtonChange);return Io(()=>{if(r.viewport&&r.isPositioned){let o=function(){const y=g.scrollTop>0;u(y)};const g=r.viewport;return o(),g.addEventListener("scroll",o),()=>g.removeEventListener("scroll",o)}},[r.viewport,r.isPositioned]),a?X.jsx(bU,{...e,ref:h,onAutoScroll:()=>{const{viewport:o,selectedItem:g}=r;o&&g&&(o.scrollTop=o.scrollTop-g.offsetHeight)}}):null});wU.displayName=k2;var U2="SelectScrollDownButton",xU=re.forwardRef((e,t)=>{const r=ud(U2,e.__scopeSelect),i=X5(U2,e.__scopeSelect),[a,u]=re.useState(!1),h=ci(t,i.onScrollButtonChange);return Io(()=>{if(r.viewport&&r.isPositioned){let o=function(){const y=g.scrollHeight-g.clientHeight,C=Math.ceil(g.scrollTop)<y;u(C)};const g=r.viewport;return o(),g.addEventListener("scroll",o),()=>g.removeEventListener("scroll",o)}},[r.viewport,r.isPositioned]),a?X.jsx(bU,{...e,ref:h,onAutoScroll:()=>{const{viewport:o,selectedItem:g}=r;o&&g&&(o.scrollTop=o.scrollTop+g.offsetHeight)}}):null});xU.displayName=U2;var bU=re.forwardRef((e,t)=>{const{__scopeSelect:r,onAutoScroll:i,...a}=e,u=ud("SelectScrollButton",r),h=re.useRef(null),o=C_(r),g=re.useCallback(()=>{h.current!==null&&(window.clearInterval(h.current),h.current=null)},[]);return re.useEffect(()=>()=>g(),[g]),Io(()=>{var C;const y=o().find(I=>I.ref.current===document.activeElement);(C=y==null?void 0:y.ref.current)==null||C.scrollIntoView({block:"nearest"})},[o]),X.jsx(bn.div,{"aria-hidden":!0,...a,ref:t,style:{flexShrink:0,...a.style},onPointerDown:on(a.onPointerDown,()=>{h.current===null&&(h.current=window.setInterval(i,50))}),onPointerMove:on(a.onPointerMove,()=>{var y;(y=u.onItemLeave)==null||y.call(u),h.current===null&&(h.current=window.setInterval(i,50))}),onPointerLeave:on(a.onPointerLeave,()=>{g()})})}),q$="SelectSeparator",BU=re.forwardRef((e,t)=>{const{__scopeSelect:r,...i}=e;return X.jsx(bn.div,{"aria-hidden":!0,...i,ref:t})});BU.displayName=q$;var R2="SelectArrow",Z$=re.forwardRef((e,t)=>{const{__scopeSelect:r,...i}=e,a=S_(r),u=cd(R2,r),h=ud(R2,r);return u.open&&h.position==="popper"?X.jsx(pM,{...a,...i,ref:t}):null});Z$.displayName=R2;var W$="SelectBubbleInput",CU=re.forwardRef(({__scopeSelect:e,value:t,...r},i)=>{const a=re.useRef(null),u=ci(i,a),h=Z5(t);return re.useEffect(()=>{const o=a.current;if(!o)return;const g=window.HTMLSelectElement.prototype,C=Object.getOwnPropertyDescriptor(g,"value").set;if(h!==t&&C){const I=new Event("change",{bubbles:!0});C.call(o,t),o.dispatchEvent(I)}},[h,t]),X.jsx(bn.select,{...r,style:{...AL,...r.style},ref:u,defaultValue:t})});CU.displayName=W$;function SU(e){return e===""||e===void 0}function EU(e){const t=rA(e),r=re.useRef(""),i=re.useRef(0),a=re.useCallback(h=>{const o=r.current+h;t(o),function g(y){r.current=y,window.clearTimeout(i.current),y!==""&&(i.current=window.setTimeout(()=>g(""),1e3))}(o)},[t]),u=re.useCallback(()=>{r.current="",window.clearTimeout(i.current)},[]);return re.useEffect(()=>()=>window.clearTimeout(i.current),[]),[r,a,u]}function IU(e,t,r){const a=t.length>1&&Array.from(t).every(y=>y===t[0])?t[0]:t,u=r?e.indexOf(r):-1;let h=X$(e,Math.max(u,0));a.length===1&&(h=h.filter(y=>y!==r));const g=h.find(y=>y.textValue.toLowerCase().startsWith(a.toLowerCase()));return g!==r?g:void 0}function X$(e,t){return e.map((r,i)=>e[(t+i)%e.length])}var Y$=tU,FU=nU,J$=sU,eq=oU,tq=aU,TU=lU,rq=hU,PU=pU,LU=gU,nq=yU,iq=_U,MU=wU,kU=xU,UU=BU;const N2=Y$,D2=J$,v1=re.forwardRef(({className:e,children:t,...r},i)=>X.jsxs(FU,{ref:i,className:Qn("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",e),...r,children:[t,X.jsx(eq,{asChild:!0,children:X.jsx(ML,{className:"h-4 w-4 opacity-50"})})]}));v1.displayName=FU.displayName;const RU=re.forwardRef(({className:e,...t},r)=>X.jsx(MU,{ref:r,className:Qn("flex cursor-default items-center justify-center py-1",e),...t,children:X.jsx(GO,{className:"h-4 w-4"})}));RU.displayName=MU.displayName;const NU=re.forwardRef(({className:e,...t},r)=>X.jsx(kU,{ref:r,className:Qn("flex cursor-default items-center justify-center py-1",e),...t,children:X.jsx(ML,{className:"h-4 w-4"})}));NU.displayName=kU.displayName;const _1=re.forwardRef(({className:e,children:t,position:r="popper",...i},a)=>X.jsx(tq,{children:X.jsxs(TU,{ref:a,className:Qn("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",r==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:r,...i,children:[X.jsx(RU,{}),X.jsx(rq,{className:Qn("p-1",r==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:t}),X.jsx(NU,{})]})}));_1.displayName=TU.displayName;const sq=re.forwardRef(({className:e,...t},r)=>X.jsx(PU,{ref:r,className:Qn("py-1.5 pl-8 pr-2 text-sm font-semibold",e),...t}));sq.displayName=PU.displayName;const w1=re.forwardRef(({className:e,children:t,...r},i)=>X.jsxs(LU,{ref:i,className:Qn("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...r,children:[X.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:X.jsx(iq,{children:X.jsx(LL,{className:"h-4 w-4"})})}),X.jsx(nq,{children:t})]}));w1.displayName=LU.displayName;const oq=re.forwardRef(({className:e,...t},r)=>X.jsx(UU,{ref:r,className:Qn("-mx-1 my-1 h-px bg-muted",e),...t}));oq.displayName=UU.displayName;var E_="Checkbox",[aq,wre]=Ou(E_),[lq,Y5]=aq(E_);function Aq(e){const{__scopeCheckbox:t,checked:r,children:i,defaultChecked:a,disabled:u,form:h,name:o,onCheckedChange:g,required:y,value:C="on",internal_do_not_use_render:I}=e,[F,b]=Jp({prop:r,defaultProp:a??!1,onChange:g,caller:E_}),[N,U]=re.useState(null),[H,k]=re.useState(null),R=re.useRef(!1),V=N?!!h||!!N.closest("form"):!0,W={checked:F,disabled:u,setChecked:b,control:N,setControl:U,name:o,form:h,value:C,hasConsumerStoppedPropagationRef:R,required:y,defaultChecked:Xh(a)?!1:a,isFormControl:V,bubbleInput:H,setBubbleInput:k};return X.jsx(lq,{scope:t,...W,children:cq(I)?I(W):i})}var DU="CheckboxTrigger",QU=re.forwardRef(({__scopeCheckbox:e,onKeyDown:t,onClick:r,...i},a)=>{const{control:u,value:h,disabled:o,checked:g,required:y,setControl:C,setChecked:I,hasConsumerStoppedPropagationRef:F,isFormControl:b,bubbleInput:N}=Y5(DU,e),U=ci(a,C),H=re.useRef(g);return re.useEffect(()=>{const k=u==null?void 0:u.form;if(k){const R=()=>I(H.current);return k.addEventListener("reset",R),()=>k.removeEventListener("reset",R)}},[u,I]),X.jsx(bn.button,{type:"button",role:"checkbox","aria-checked":Xh(g)?"mixed":g,"aria-required":y,"data-state":VU(g),"data-disabled":o?"":void 0,disabled:o,value:h,...i,ref:U,onKeyDown:on(t,k=>{k.key==="Enter"&&k.preventDefault()}),onClick:on(r,k=>{I(R=>Xh(R)?!0:!R),N&&b&&(F.current=k.isPropagationStopped(),F.current||k.stopPropagation())})})});QU.displayName=DU;var J5=re.forwardRef((e,t)=>{const{__scopeCheckbox:r,name:i,checked:a,defaultChecked:u,required:h,disabled:o,value:g,onCheckedChange:y,form:C,...I}=e;return X.jsx(Aq,{__scopeCheckbox:r,checked:a,defaultChecked:u,disabled:o,required:h,onCheckedChange:y,name:i,form:C,value:g,internal_do_not_use_render:({isFormControl:F})=>X.jsxs(X.Fragment,{children:[X.jsx(QU,{...I,ref:t,__scopeCheckbox:r}),F&&X.jsx(jU,{__scopeCheckbox:r})]})})});J5.displayName=E_;var OU="CheckboxIndicator",zU=re.forwardRef((e,t)=>{const{__scopeCheckbox:r,forceMount:i,...a}=e,u=Y5(OU,r);return X.jsx(S0,{present:i||Xh(u.checked)||u.checked===!0,children:X.jsx(bn.span,{"data-state":VU(u.checked),"data-disabled":u.disabled?"":void 0,...a,ref:t,style:{pointerEvents:"none",...e.style}})})});zU.displayName=OU;var HU="CheckboxBubbleInput",jU=re.forwardRef(({__scopeCheckbox:e,...t},r)=>{const{control:i,hasConsumerStoppedPropagationRef:a,checked:u,defaultChecked:h,required:o,disabled:g,name:y,value:C,form:I,bubbleInput:F,setBubbleInput:b}=Y5(HU,e),N=ci(r,b),U=Z5(u),H=k5(i);re.useEffect(()=>{const R=F;if(!R)return;const V=window.HTMLInputElement.prototype,se=Object.getOwnPropertyDescriptor(V,"checked").set,fe=!a.current;if(U!==u&&se){const ue=new Event("click",{bubbles:fe});R.indeterminate=Xh(u),se.call(R,Xh(u)?!1:u),R.dispatchEvent(ue)}},[F,U,u,a]);const k=re.useRef(Xh(u)?!1:u);return X.jsx(bn.input,{type:"checkbox","aria-hidden":!0,defaultChecked:h??k.current,required:o,disabled:g,name:y,value:C,form:I,...t,tabIndex:-1,ref:N,style:{...t.style,...H,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});jU.displayName=HU;function cq(e){return typeof e=="function"}function Xh(e){return e==="indeterminate"}function VU(e){return Xh(e)?"indeterminate":e?"checked":"unchecked"}const Q2=re.forwardRef(({className:e,...t},r)=>X.jsx(J5,{ref:r,className:Qn("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",e),...t,children:X.jsx(zU,{className:Qn("flex items-center justify-center text-current"),children:X.jsx(LL,{className:"h-4 w-4"})})}));Q2.displayName=J5.displayName;var uq="Separator",ZI="horizontal",hq=["horizontal","vertical"],KU=re.forwardRef((e,t)=>{const{decorative:r,orientation:i=ZI,...a}=e,u=dq(i)?i:ZI,o=r?{role:"none"}:{"aria-orientation":u==="vertical"?u:void 0,role:"separator"};return X.jsx(bn.div,{"data-orientation":u,...o,...a,ref:t})});KU.displayName=uq;function dq(e){return hq.includes(e)}var GU=KU;const $U=re.forwardRef(({className:e,orientation:t="horizontal",decorative:r=!0,...i},a)=>X.jsx(GU,{ref:a,decorative:r,orientation:t,className:Qn("shrink-0 bg-border",t==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",e),...i}));$U.displayName=GU.displayName;function fq({allZipData:e,isExporting:t,onExport:r,onCancel:i}){const[a,u]=re.useState("national"),[h,o]=re.useState(""),[g,y]=re.useState(""),[C,I]=re.useState("png"),[F,b]=re.useState(!0),[N,U]=re.useState(!0),{availableStates:H,availableMetros:k}=re.useMemo(()=>{if(Object.keys(e).length===0)return{availableStates:[],availableMetros:[]};const fe=new Set,ue=new Set;for(const ae of Object.values(e))ae.state&&fe.add(ae.state),ae.parent_metro&&ue.add(ae.parent_metro);return{availableStates:Array.from(fe).sort(),availableMetros:Array.from(ue).sort()}},[e]),R=()=>{r({regionScope:a,selectedState:h,selectedMetro:g,fileFormat:C,includeLegend:F,includeTitle:N})},V=()=>!!(t||a==="state"&&!h||a==="metro"&&!g),W=fe=>u(fe),se=fe=>I(fe);return X.jsx("div",{className:"absolute top-0 left-0 w-80 bg-background border-r h-full overflow-y-auto z-20 shadow-xl",children:X.jsxs("div",{className:"p-6 space-y-6",children:[X.jsxs("div",{className:"flex items-center gap-3",children:[X.jsx("div",{className:"p-2 bg-primary/10 rounded-lg",children:X.jsx(YO,{className:"h-5 w-5 text-primary"})}),X.jsxs("div",{children:[X.jsx("h2",{className:"text-lg font-semibold",children:"Export Map"}),X.jsx("p",{className:"text-sm text-muted-foreground",children:"Configure your export settings"})]})]}),X.jsxs(Zh,{children:[X.jsx(Ig,{children:X.jsxs(Fg,{className:"text-sm flex items-center gap-2",children:[X.jsx(XO,{className:"h-4 w-4"}),"Region Scope"]})}),X.jsxs(Wh,{className:"space-y-4",children:[X.jsxs(T2,{value:a,onValueChange:W,children:[X.jsxs("div",{className:"flex items-center space-x-2",children:[X.jsx(ep,{value:"national",id:"r-national"}),X.jsx(ph,{htmlFor:"r-national",children:"National"})]}),X.jsxs("div",{className:"flex items-center space-x-2",children:[X.jsx(ep,{value:"state",id:"r-state"}),X.jsx(ph,{htmlFor:"r-state",children:"State"})]}),X.jsxs("div",{className:"flex items-center space-x-2",children:[X.jsx(ep,{value:"metro",id:"r-metro"}),X.jsx(ph,{htmlFor:"r-metro",children:"Metro Area"})]})]}),a==="state"&&X.jsxs(N2,{value:h,onValueChange:o,children:[X.jsx(v1,{children:X.jsx(D2,{placeholder:"Select a state"})}),X.jsx(_1,{children:H.map(fe=>X.jsx(w1,{value:fe,children:fe},fe))})]}),a==="metro"&&X.jsxs(N2,{value:g,onValueChange:y,children:[X.jsx(v1,{children:X.jsx(D2,{placeholder:"Select a metro area"})}),X.jsx(_1,{children:k.map(fe=>X.jsx(w1,{value:fe,children:fe},fe))})]})]})]}),X.jsxs(Zh,{children:[X.jsx(Ig,{children:X.jsxs(Fg,{className:"text-sm flex items-center gap-2",children:[X.jsx(qO,{className:"h-4 w-4"}),"File Format"]})}),X.jsx(Wh,{children:X.jsxs(T2,{value:C,onValueChange:se,children:[X.jsxs("div",{className:"flex items-center space-x-2",children:[X.jsx(ep,{value:"png",id:"r-png"}),X.jsx(ph,{htmlFor:"r-png",children:"PNG (Image)"})]}),X.jsxs("div",{className:"flex items-center space-x-2",children:[X.jsx(ep,{value:"pdf",id:"r-pdf"}),X.jsx(ph,{htmlFor:"r-pdf",children:"PDF (Document)"})]})]})})]}),X.jsxs(Zh,{children:[X.jsx(Ig,{children:X.jsx(Fg,{className:"text-sm",children:"Customization"})}),X.jsxs(Wh,{className:"space-y-2",children:[X.jsxs("div",{className:"flex items-center space-x-2",children:[X.jsx(Q2,{id:"c-title",checked:N,onCheckedChange:fe=>U(fe===!0)}),X.jsx(ph,{htmlFor:"c-title",children:"Include Title"})]}),X.jsxs("div",{className:"flex items-center space-x-2",children:[X.jsx(Q2,{id:"c-legend",checked:F,onCheckedChange:fe=>b(fe===!0)}),X.jsx(ph,{htmlFor:"c-legend",children:"Include Legend"})]})]})]}),X.jsx($U,{}),X.jsxs("div",{className:"space-y-3",children:[X.jsx(ra,{onClick:R,disabled:V(),className:"w-full",size:"lg",children:t?"Processing...":X.jsxs(X.Fragment,{children:[X.jsx(kL,{className:"h-4 w-4 mr-2"}),"Export ",C.toUpperCase()]})}),X.jsx(ra,{onClick:i,variant:"outline",className:"w-full",disabled:t,children:"Cancel"})]})]})})}var qU={exports:{}};/**
 * MapLibre GL JS
 * @license 3-Clause BSD. Full text of license: https://github.com/maplibre/maplibre-gl-js/blob/v5.6.1/LICENSE.txt
 */(function(e,t){(function(r,i){e.exports=i()})(mD,function(){var r={},i={};function a(h,o,g){if(i[h]=g,h==="index"){var y="var sharedModule = {}; ("+i.shared+")(sharedModule); ("+i.worker+")(sharedModule);",C={};return i.shared(C),i.index(r,C),typeof window<"u"&&r.setWorkerUrl(window.URL.createObjectURL(new Blob([y],{type:"text/javascript"}))),r}}a("shared",["exports"],function(h){function o(c,s,A,d){return new(A||(A=Promise))(function(m,w){function x(Q){try{L(d.next(Q))}catch(j){w(j)}}function E(Q){try{L(d.throw(Q))}catch(j){w(j)}}function L(Q){var j;Q.done?m(Q.value):(j=Q.value,j instanceof A?j:new A(function(G){G(j)})).then(x,E)}L((d=d.apply(c,s||[])).next())})}function g(c){return c&&c.__esModule&&Object.prototype.hasOwnProperty.call(c,"default")?c.default:c}var y,C;function I(){if(C)return y;function c(s,A){this.x=s,this.y=A}return C=1,y=c,c.prototype={clone:function(){return new c(this.x,this.y)},add:function(s){return this.clone()._add(s)},sub:function(s){return this.clone()._sub(s)},multByPoint:function(s){return this.clone()._multByPoint(s)},divByPoint:function(s){return this.clone()._divByPoint(s)},mult:function(s){return this.clone()._mult(s)},div:function(s){return this.clone()._div(s)},rotate:function(s){return this.clone()._rotate(s)},rotateAround:function(s,A){return this.clone()._rotateAround(s,A)},matMult:function(s){return this.clone()._matMult(s)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(s){return this.x===s.x&&this.y===s.y},dist:function(s){return Math.sqrt(this.distSqr(s))},distSqr:function(s){var A=s.x-this.x,d=s.y-this.y;return A*A+d*d},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(s){return Math.atan2(this.y-s.y,this.x-s.x)},angleWith:function(s){return this.angleWithSep(s.x,s.y)},angleWithSep:function(s,A){return Math.atan2(this.x*A-this.y*s,this.x*s+this.y*A)},_matMult:function(s){var A=s[2]*this.x+s[3]*this.y;return this.x=s[0]*this.x+s[1]*this.y,this.y=A,this},_add:function(s){return this.x+=s.x,this.y+=s.y,this},_sub:function(s){return this.x-=s.x,this.y-=s.y,this},_mult:function(s){return this.x*=s,this.y*=s,this},_div:function(s){return this.x/=s,this.y/=s,this},_multByPoint:function(s){return this.x*=s.x,this.y*=s.y,this},_divByPoint:function(s){return this.x/=s.x,this.y/=s.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var s=this.y;return this.y=this.x,this.x=-s,this},_rotate:function(s){var A=Math.cos(s),d=Math.sin(s),m=d*this.x+A*this.y;return this.x=A*this.x-d*this.y,this.y=m,this},_rotateAround:function(s,A){var d=Math.cos(s),m=Math.sin(s),w=A.y+m*(this.x-A.x)+d*(this.y-A.y);return this.x=A.x+d*(this.x-A.x)-m*(this.y-A.y),this.y=w,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},c.convert=function(s){return s instanceof c?s:Array.isArray(s)?new c(s[0],s[1]):s},y}typeof SuppressedError=="function"&&SuppressedError;var F,b,N=g(I()),U=function(){if(b)return F;function c(s,A,d,m){this.cx=3*s,this.bx=3*(d-s)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*A,this.by=3*(m-A)-this.cy,this.ay=1-this.cy-this.by,this.p1x=s,this.p1y=A,this.p2x=d,this.p2y=m}return b=1,F=c,c.prototype={sampleCurveX:function(s){return((this.ax*s+this.bx)*s+this.cx)*s},sampleCurveY:function(s){return((this.ay*s+this.by)*s+this.cy)*s},sampleCurveDerivativeX:function(s){return(3*this.ax*s+2*this.bx)*s+this.cx},solveCurveX:function(s,A){if(A===void 0&&(A=1e-6),s<0)return 0;if(s>1)return 1;for(var d=s,m=0;m<8;m++){var w=this.sampleCurveX(d)-s;if(Math.abs(w)<A)return d;var x=this.sampleCurveDerivativeX(d);if(Math.abs(x)<1e-6)break;d-=w/x}var E=0,L=1;for(d=s,m=0;m<20&&(w=this.sampleCurveX(d),!(Math.abs(w-s)<A));m++)s>w?E=d:L=d,d=.5*(L-E)+E;return d},solve:function(s,A){return this.sampleCurveY(this.solveCurveX(s,A))}},F}(),H=g(U);let k,R;function V(){return k==null&&(k=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")&&typeof createImageBitmap=="function"),k}function W(){if(R==null&&(R=!1,V())){const s=new OffscreenCanvas(5,5).getContext("2d",{willReadFrequently:!0});if(s){for(let d=0;d<5*5;d++){const m=4*d;s.fillStyle=`rgb(${m},${m+1},${m+2})`,s.fillRect(d%5,Math.floor(d/5),1,1)}const A=s.getImageData(0,0,5,5).data;for(let d=0;d<5*5*4;d++)if(d%4!=3&&A[d]!==d){R=!0;break}}}return R||!1}var se=1e-6,fe=typeof Float32Array<"u"?Float32Array:Array;function ue(){var c=new fe(9);return fe!=Float32Array&&(c[1]=0,c[2]=0,c[3]=0,c[5]=0,c[6]=0,c[7]=0),c[0]=1,c[4]=1,c[8]=1,c}function ae(c){return c[0]=1,c[1]=0,c[2]=0,c[3]=0,c[4]=0,c[5]=1,c[6]=0,c[7]=0,c[8]=0,c[9]=0,c[10]=1,c[11]=0,c[12]=0,c[13]=0,c[14]=0,c[15]=1,c}function Be(){var c=new fe(3);return fe!=Float32Array&&(c[0]=0,c[1]=0,c[2]=0),c}function Ue(c){return Math.hypot(c[0],c[1],c[2])}function te(c,s,A){var d=new fe(3);return d[0]=c,d[1]=s,d[2]=A,d}function de(c,s,A){return c[0]=s[0]+A[0],c[1]=s[1]+A[1],c[2]=s[2]+A[2],c}function Te(c,s,A){return c[0]=s[0]*A,c[1]=s[1]*A,c[2]=s[2]*A,c}function we(c,s,A){var d=s[0],m=s[1],w=s[2],x=A[0],E=A[1],L=A[2];return c[0]=m*L-w*E,c[1]=w*x-d*L,c[2]=d*E-m*x,c}Math.hypot||(Math.hypot=function(){for(var c=0,s=arguments.length;s--;)c+=arguments[s]*arguments[s];return Math.sqrt(c)});var st,Ze=Ue;function At(c,s,A){var d=s[0],m=s[1],w=s[2],x=s[3];return c[0]=A[0]*d+A[4]*m+A[8]*w+A[12]*x,c[1]=A[1]*d+A[5]*m+A[9]*w+A[13]*x,c[2]=A[2]*d+A[6]*m+A[10]*w+A[14]*x,c[3]=A[3]*d+A[7]*m+A[11]*w+A[15]*x,c}function Le(){var c=new fe(4);return fe!=Float32Array&&(c[0]=0,c[1]=0,c[2]=0),c[3]=1,c}function He(c,s,A,d){var m=.5*Math.PI/180;s*=m,A*=m,d*=m;var w=Math.sin(s),x=Math.cos(s),E=Math.sin(A),L=Math.cos(A),Q=Math.sin(d),j=Math.cos(d);return c[0]=w*L*j-x*E*Q,c[1]=x*E*j+w*L*Q,c[2]=x*L*Q-w*E*j,c[3]=x*L*j+w*E*Q,c}function it(){var c=new fe(2);return fe!=Float32Array&&(c[0]=0,c[1]=0),c}function Lt(c,s){var A=new fe(2);return A[0]=c,A[1]=s,A}Be(),st=new fe(4),fe!=Float32Array&&(st[0]=0,st[1]=0,st[2]=0,st[3]=0),Be(),te(1,0,0),te(0,1,0),Le(),Le(),ue(),it();const ie=8192;function Ce(c,s,A){return s*(ie/(c.tileSize*Math.pow(2,A-c.tileID.overscaledZ)))}function Pe(c,s){return(c%s+s)%s}function $e(c,s,A){return c*(1-A)+s*A}function nt(c){if(c<=0)return 0;if(c>=1)return 1;const s=c*c,A=s*c;return 4*(c<.5?A:3*(c-s)+A-.75)}function Xe(c,s,A,d){const m=new H(c,s,A,d);return w=>m.solve(w)}const pt=Xe(.25,.1,.25,1);function dt(c,s,A){return Math.min(A,Math.max(s,c))}function Rt(c,s,A){const d=A-s,m=((c-s)%d+d)%d+s;return m===s?A:m}function Mt(c,...s){for(const A of s)for(const d in A)c[d]=A[d];return c}let $t=1;function jt(c,s,A){const d={};for(const m in c)d[m]=s.call(this,c[m],m,c);return d}function vr(c,s,A){const d={};for(const m in c)s.call(this,c[m],m,c)&&(d[m]=c[m]);return d}function Ft(c){return Array.isArray(c)?c.map(Ft):typeof c=="object"&&c?jt(c,Ft):c}const Ge={};function Cr(c){Ge[c]||(typeof console<"u"&&console.warn(c),Ge[c]=!0)}function pr(c,s,A){return(A.y-c.y)*(s.x-c.x)>(s.y-c.y)*(A.x-c.x)}function Kt(c){return typeof WorkerGlobalScope<"u"&&c!==void 0&&c instanceof WorkerGlobalScope}let ar=null;function lr(c){return typeof ImageBitmap<"u"&&c instanceof ImageBitmap}const cr="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";function br(c,s,A,d,m){return o(this,void 0,void 0,function*(){if(typeof VideoFrame>"u")throw new Error("VideoFrame not supported");const w=new VideoFrame(c,{timestamp:0});try{const x=w==null?void 0:w.format;if(!x||!x.startsWith("BGR")&&!x.startsWith("RGB"))throw new Error(`Unrecognized format ${x}`);const E=x.startsWith("BGR"),L=new Uint8ClampedArray(d*m*4);if(yield w.copyTo(L,function(Q,j,G,J,ne){const oe=4*Math.max(-j,0),pe=(Math.max(0,G)-G)*J*4+oe,Se=4*J,Re=Math.max(0,j),ot=Math.max(0,G);return{rect:{x:Re,y:ot,width:Math.min(Q.width,j+J)-Re,height:Math.min(Q.height,G+ne)-ot},layout:[{offset:pe,stride:Se}]}}(c,s,A,d,m)),E)for(let Q=0;Q<L.length;Q+=4){const j=L[Q];L[Q]=L[Q+2],L[Q+2]=j}return L}finally{w.close()}})}let Dr,Kr;function Lr(c,s,A,d){return c.addEventListener(s,A,d),{unsubscribe:()=>{c.removeEventListener(s,A,d)}}}function Hr(c){return c*Math.PI/180}function un(c){return c/Math.PI*180}const zr={touchstart:!0,touchmove:!0,touchmoveWindow:!0,touchend:!0,touchcancel:!0},Yr={dblclick:!0,click:!0,mouseover:!0,mouseout:!0,mousedown:!0,mousemove:!0,mousemoveWindow:!0,mouseup:!0,mouseupWindow:!0,contextmenu:!0,wheel:!0},ur="AbortError";function ct(){return new Error(ur)}const Ae={MAX_PARALLEL_IMAGE_REQUESTS:16,MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:8,MAX_TILE_CACHE_ZOOM_LEVELS:5,REGISTERED_PROTOCOLS:{},WORKER_URL:""};function me(c){return Ae.REGISTERED_PROTOCOLS[c.substring(0,c.indexOf("://"))]}const _e="global-dispatcher";class Ne extends Error{constructor(s,A,d,m){super(`AJAXError: ${A} (${s}): ${d}`),this.status=s,this.statusText=A,this.url=d,this.body=m}}const et=()=>Kt(self)?self.worker&&self.worker.referrer:(window.location.protocol==="blob:"?window.parent:window).location.href,tt=function(c,s){if(/:\/\//.test(c.url)&&!/^https?:|^file:/.test(c.url)){const d=me(c.url);if(d)return d(c,s);if(Kt(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:c,targetMapId:_e},s)}if(!(/^file:/.test(A=c.url)||/^file:/.test(et())&&!/^\w+:/.test(A))){if(fetch&&Request&&AbortController&&Object.prototype.hasOwnProperty.call(Request.prototype,"signal"))return function(d,m){return o(this,void 0,void 0,function*(){const w=new Request(d.url,{method:d.method||"GET",body:d.body,credentials:d.credentials,headers:d.headers,cache:d.cache,referrer:et(),signal:m.signal});let x,E;d.type!=="json"||w.headers.has("Accept")||w.headers.set("Accept","application/json");try{x=yield fetch(w)}catch(Q){throw new Ne(0,Q.message,d.url,new Blob)}if(!x.ok){const Q=yield x.blob();throw new Ne(x.status,x.statusText,d.url,Q)}E=d.type==="arrayBuffer"||d.type==="image"?x.arrayBuffer():d.type==="json"?x.json():x.text();const L=yield E;if(m.signal.aborted)throw ct();return{data:L,cacheControl:x.headers.get("Cache-Control"),expires:x.headers.get("Expires")}})}(c,s);if(Kt(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:c,mustQueue:!0,targetMapId:_e},s)}var A;return function(d,m){return new Promise((w,x)=>{var E;const L=new XMLHttpRequest;L.open(d.method||"GET",d.url,!0),d.type!=="arrayBuffer"&&d.type!=="image"||(L.responseType="arraybuffer");for(const Q in d.headers)L.setRequestHeader(Q,d.headers[Q]);d.type==="json"&&(L.responseType="text",!((E=d.headers)===null||E===void 0)&&E.Accept||L.setRequestHeader("Accept","application/json")),L.withCredentials=d.credentials==="include",L.onerror=()=>{x(new Error(L.statusText))},L.onload=()=>{if(!m.signal.aborted)if((L.status>=200&&L.status<300||L.status===0)&&L.response!==null){let Q=L.response;if(d.type==="json")try{Q=JSON.parse(L.response)}catch(j){return void x(j)}w({data:Q,cacheControl:L.getResponseHeader("Cache-Control"),expires:L.getResponseHeader("Expires")})}else{const Q=new Blob([L.response],{type:L.getResponseHeader("Content-Type")});x(new Ne(L.status,L.statusText,d.url,Q))}},m.signal.addEventListener("abort",()=>{L.abort(),x(ct())}),L.send(d.body)})}(c,s)};function yt(c){if(!c||c.indexOf("://")<=0||c.indexOf("data:image/")===0||c.indexOf("blob:")===0)return!0;const s=new URL(c),A=window.location;return s.protocol===A.protocol&&s.host===A.host}function rt(c,s,A){A[c]&&A[c].indexOf(s)!==-1||(A[c]=A[c]||[],A[c].push(s))}function It(c,s,A){if(A&&A[c]){const d=A[c].indexOf(s);d!==-1&&A[c].splice(d,1)}}class Ct{constructor(s,A={}){Mt(this,A),this.type=s}}class lt extends Ct{constructor(s,A={}){super("error",Mt({error:s},A))}}class mt{on(s,A){return this._listeners=this._listeners||{},rt(s,A,this._listeners),{unsubscribe:()=>{this.off(s,A)}}}off(s,A){return It(s,A,this._listeners),It(s,A,this._oneTimeListeners),this}once(s,A){return A?(this._oneTimeListeners=this._oneTimeListeners||{},rt(s,A,this._oneTimeListeners),this):new Promise(d=>this.once(s,d))}fire(s,A){typeof s=="string"&&(s=new Ct(s,A||{}));const d=s.type;if(this.listens(d)){s.target=this;const m=this._listeners&&this._listeners[d]?this._listeners[d].slice():[];for(const E of m)E.call(this,s);const w=this._oneTimeListeners&&this._oneTimeListeners[d]?this._oneTimeListeners[d].slice():[];for(const E of w)It(d,E,this._oneTimeListeners),E.call(this,s);const x=this._eventedParent;x&&(Mt(s,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),x.fire(s))}else s instanceof lt&&console.error(s.error);return this}listens(s){return this._listeners&&this._listeners[s]&&this._listeners[s].length>0||this._oneTimeListeners&&this._oneTimeListeners[s]&&this._oneTimeListeners[s].length>0||this._eventedParent&&this._eventedParent.listens(s)}setEventedParent(s,A){return this._eventedParent=s,this._eventedParentData=A,this}}var Me={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},centerAltitude:{type:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},roll:{type:"number",default:0,units:"degrees"},state:{type:"state",default:{}},light:{type:"light"},sky:{type:"sky"},projection:{type:"projection"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"sprite"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{},custom:{}},default:"mapbox"},redFactor:{type:"number",default:1},blueFactor:{type:"number",default:1},greenFactor:{type:"number",default:1},baseShift:{type:"number",default:0},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{required:!0,type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},"color-relief":{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_color-relief","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-variable-anchor-offset":{type:"variableAnchorOffsetCollection",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_color-relief":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},sky:{"sky-color":{type:"color","property-type":"data-constant",default:"#88C6FC",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-ground-blend":{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-fog-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"sky-horizon-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"atmosphere-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1}},projection:{type:{type:"projectionDefinition",default:"mercator","property-type":"data-constant",transition:!1,expression:{interpolated:!0,parameters:["zoom"]}}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_color-relief","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"numberArray",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-altitude":{type:"numberArray",default:45,minimum:0,maximum:90,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"colorArray",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"colorArray",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-method":{type:"enum",values:{standard:{},basic:{},combined:{},igor:{},multidirectional:{}},default:"standard",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},"paint_color-relief":{"color-relief-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"color-relief-color":{type:"color",transition:!1,expression:{interpolated:!0,parameters:["elevation"]},"property-type":"color-ramp"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};const Nt=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function nr(c,s){const A={};for(const d in c)d!=="ref"&&(A[d]=c[d]);return Nt.forEach(d=>{d in s&&(A[d]=s[d])}),A}function tr(c,s){if(Array.isArray(c)){if(!Array.isArray(s)||c.length!==s.length)return!1;for(let A=0;A<c.length;A++)if(!tr(c[A],s[A]))return!1;return!0}if(typeof c=="object"&&c!==null&&s!==null){if(typeof s!="object"||Object.keys(c).length!==Object.keys(s).length)return!1;for(const A in c)if(!tr(c[A],s[A]))return!1;return!0}return c===s}function Ar(c,s){c.push(s)}function qt(c,s,A){Ar(A,{command:"addSource",args:[c,s[c]]})}function Jr(c,s,A){Ar(s,{command:"removeSource",args:[c]}),A[c]=!0}function jr(c,s,A,d){Jr(c,A,d),qt(c,s,A)}function Nr(c,s,A){let d;for(d in c[A])if(Object.prototype.hasOwnProperty.call(c[A],d)&&d!=="data"&&!tr(c[A][d],s[A][d]))return!1;for(d in s[A])if(Object.prototype.hasOwnProperty.call(s[A],d)&&d!=="data"&&!tr(c[A][d],s[A][d]))return!1;return!0}function _r(c,s,A,d,m,w){c=c||{},s=s||{};for(const x in c)Object.prototype.hasOwnProperty.call(c,x)&&(tr(c[x],s[x])||A.push({command:w,args:[d,x,s[x],m]}));for(const x in s)Object.prototype.hasOwnProperty.call(s,x)&&!Object.prototype.hasOwnProperty.call(c,x)&&(tr(c[x],s[x])||A.push({command:w,args:[d,x,s[x],m]}))}function Ur(c){return c.id}function Ln(c,s){return c[s.id]=s,c}class Yt{constructor(s,A,d,m){this.message=(s?`${s}: `:"")+d,m&&(this.identifier=m),A!=null&&A.__line__&&(this.line=A.__line__)}}function Xn(c,...s){for(const A of s)for(const d in A)c[d]=A[d];return c}class Bn extends Error{constructor(s,A){super(A),this.message=A,this.key=s}}class es{constructor(s,A=[]){this.parent=s,this.bindings={};for(const[d,m]of A)this.bindings[d]=m}concat(s){return new es(this,s)}get(s){if(this.bindings[s])return this.bindings[s];if(this.parent)return this.parent.get(s);throw new Error(`${s} not found in scope.`)}has(s){return!!this.bindings[s]||!!this.parent&&this.parent.has(s)}}const cs={kind:"null"},Jt={kind:"number"},Qr={kind:"string"},Vr={kind:"boolean"},zi={kind:"color"},Ja={kind:"projectionDefinition"},Us={kind:"object"},$r={kind:"value"},Xs={kind:"collator"},Ca={kind:"formatted"},ui={kind:"padding"},iA={kind:"colorArray"},Sa={kind:"numberArray"},Fo={kind:"resolvedImage"},sA={kind:"variableAnchorOffsetCollection"};function us(c,s){return{kind:"array",itemType:c,N:s}}function $n(c){if(c.kind==="array"){const s=$n(c.itemType);return typeof c.N=="number"?`array<${s}, ${c.N}>`:c.itemType.kind==="value"?"array":`array<${s}>`}return c.kind}const Kc=[cs,Jt,Qr,Vr,zi,Ja,Ca,Us,us($r),ui,Sa,iA,Fo,sA];function oA(c,s){if(s.kind==="error")return null;if(c.kind==="array"){if(s.kind==="array"&&(s.N===0&&s.itemType.kind==="value"||!oA(c.itemType,s.itemType))&&(typeof c.N!="number"||c.N===s.N))return null}else{if(c.kind===s.kind)return null;if(c.kind==="value"){for(const A of Kc)if(!oA(A,s))return null}}return`Expected ${$n(c)} but found ${$n(s)} instead.`}function el(c,s){return s.some(A=>A.kind===c.kind)}function tl(c,s){return s.some(A=>A==="null"?c===null:A==="array"?Array.isArray(c):A==="object"?c&&!Array.isArray(c)&&typeof c=="object":A===typeof c)}function On(c,s){return c.kind==="array"&&s.kind==="array"?c.itemType.kind===s.itemType.kind&&typeof c.N=="number":c.kind===s.kind}const Gc=.96422,$c=.82521,qc=4/29,Ea=6/29,zu=3*Ea*Ea,To=Ea*Ea*Ea,Ia=Math.PI/180,Ys=180/Math.PI;function XA(c){return(c%=360)<0&&(c+=360),c}function rl([c,s,A,d]){let m,w;const x=YA((.2225045*(c=Zc(c))+.7168786*(s=Zc(s))+.0606169*(A=Zc(A)))/1);c===s&&s===A?m=w=x:(m=YA((.4360747*c+.3850649*s+.1430804*A)/Gc),w=YA((.0139322*c+.0971045*s+.7141733*A)/$c));const E=116*x-16;return[E<0?0:E,500*(m-x),200*(x-w),d]}function Zc(c){return c<=.04045?c/12.92:Math.pow((c+.055)/1.055,2.4)}function YA(c){return c>To?Math.pow(c,1/3):c/zu+qc}function Hu([c,s,A,d]){let m=(c+16)/116,w=isNaN(s)?m:m+s/500,x=isNaN(A)?m:m-A/200;return m=1*JA(m),w=Gc*JA(w),x=$c*JA(x),[aA(3.1338561*w-1.6168667*m-.4906146*x),aA(-.9787684*w+1.9161415*m+.033454*x),aA(.0719453*w-.2289914*m+1.4052427*x),d]}function aA(c){return(c=c<=.00304?12.92*c:1.055*Math.pow(c,1/2.4)-.055)<0?0:c>1?1:c}function JA(c){return c>Ea?c*c*c:zu*(c-qc)}const Js=Object.hasOwn||function(c,s){return Object.prototype.hasOwnProperty.call(c,s)};function an(c,s){return Js(c,s)?c[s]:void 0}function ia(c){return parseInt(c.padEnd(2,c),16)/255}function sa(c,s){return Rs(s?c/100:c,0,1)}function Rs(c,s,A){return Math.min(Math.max(s,c),A)}function Pl(c){return!c.some(Number.isNaN)}const Ll={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};function Ns(c,s,A){return c+A*(s-c)}function ri(c,s,A){return c.map((d,m)=>Ns(d,s[m],A))}class ln{constructor(s,A,d,m=1,w=!0){this.r=s,this.g=A,this.b=d,this.a=m,w||(this.r*=m,this.g*=m,this.b*=m,m||this.overwriteGetter("rgb",[s,A,d,m]))}static parse(s){if(s instanceof ln)return s;if(typeof s!="string")return;const A=function(d){if((d=d.toLowerCase().trim())==="transparent")return[0,0,0,0];const m=an(Ll,d);if(m){const[x,E,L]=m;return[x/255,E/255,L/255,1]}if(d.startsWith("#")&&/^#(?:[0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/.test(d)){const x=d.length<6?1:2;let E=1;return[ia(d.slice(E,E+=x)),ia(d.slice(E,E+=x)),ia(d.slice(E,E+=x)),ia(d.slice(E,E+x)||"ff")]}if(d.startsWith("rgb")){const x=d.match(/^rgba?\(\s*([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(x){const[E,L,Q,j,G,J,ne,oe,pe,Se,Re,ot]=x,Ke=[j||" ",ne||" ",Se].join("");if(Ke==="  "||Ke==="  /"||Ke===",,"||Ke===",,,"){const ee=[Q,J,pe].join(""),be=ee==="%%%"?100:ee===""?255:0;if(be){const qe=[Rs(+L/be,0,1),Rs(+G/be,0,1),Rs(+oe/be,0,1),Re?sa(+Re,ot):1];if(Pl(qe))return qe}}return}}const w=d.match(/^hsla?\(\s*([\de.+-]+)(?:deg)?(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(w){const[x,E,L,Q,j,G,J,ne,oe]=w,pe=[L||" ",j||" ",J].join("");if(pe==="  "||pe==="  /"||pe===",,"||pe===",,,"){const Se=[+E,Rs(+Q,0,100),Rs(+G,0,100),ne?sa(+ne,oe):1];if(Pl(Se))return function([Re,ot,Ke,ee]){function be(qe){const bt=(qe+Re/30)%12,Ht=ot*Math.min(Ke,1-Ke);return Ke-Ht*Math.max(-1,Math.min(bt-3,9-bt,1))}return Re=XA(Re),ot/=100,Ke/=100,[be(0),be(8),be(4),ee]}(Se)}}}(s);return A?new ln(...A,!1):void 0}get rgb(){const{r:s,g:A,b:d,a:m}=this,w=m||1/0;return this.overwriteGetter("rgb",[s/w,A/w,d/w,m])}get hcl(){return this.overwriteGetter("hcl",function(s){const[A,d,m,w]=rl(s),x=Math.sqrt(d*d+m*m);return[Math.round(1e4*x)?XA(Math.atan2(m,d)*Ys):NaN,x,A,w]}(this.rgb))}get lab(){return this.overwriteGetter("lab",rl(this.rgb))}overwriteGetter(s,A){return Object.defineProperty(this,s,{value:A}),A}toString(){const[s,A,d,m]=this.rgb;return`rgba(${[s,A,d].map(w=>Math.round(255*w)).join(",")},${m})`}static interpolate(s,A,d,m="rgb"){switch(m){case"rgb":{const[w,x,E,L]=ri(s.rgb,A.rgb,d);return new ln(w,x,E,L,!1)}case"hcl":{const[w,x,E,L]=s.hcl,[Q,j,G,J]=A.hcl;let ne,oe;if(isNaN(w)||isNaN(Q))isNaN(w)?isNaN(Q)?ne=NaN:(ne=Q,E!==1&&E!==0||(oe=j)):(ne=w,G!==1&&G!==0||(oe=x));else{let Ke=Q-w;Q>w&&Ke>180?Ke-=360:Q<w&&w-Q>180&&(Ke+=360),ne=w+d*Ke}const[pe,Se,Re,ot]=function([Ke,ee,be,qe]){return Ke=isNaN(Ke)?0:Ke*Ia,Hu([be,Math.cos(Ke)*ee,Math.sin(Ke)*ee,qe])}([ne,oe??Ns(x,j,d),Ns(E,G,d),Ns(L,J,d)]);return new ln(pe,Se,Re,ot,!1)}case"lab":{const[w,x,E,L]=Hu(ri(s.lab,A.lab,d));return new ln(w,x,E,L,!1)}}}}ln.black=new ln(0,0,0,1),ln.white=new ln(1,1,1,1),ln.transparent=new ln(0,0,0,0),ln.red=new ln(1,0,0,1);class Ml{constructor(s,A,d){this.sensitivity=s?A?"variant":"case":A?"accent":"base",this.locale=d,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(s,A){return this.collator.compare(s,A)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}const qr=["bottom","center","top"];class Wc{constructor(s,A,d,m,w,x){this.text=s,this.image=A,this.scale=d,this.fontStack=m,this.textColor=w,this.verticalAlign=x}}class ts{constructor(s){this.sections=s}static fromString(s){return new ts([new Wc(s,null,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some(s=>s.text.length!==0||s.image&&s.image.name.length!==0)}static factory(s){return s instanceof ts?s:ts.fromString(s)}toString(){return this.sections.length===0?"":this.sections.map(s=>s.text).join("")}}class Un{constructor(s){this.values=s.slice()}static parse(s){if(s instanceof Un)return s;if(typeof s=="number")return new Un([s,s,s,s]);if(Array.isArray(s)&&!(s.length<1||s.length>4)){for(const A of s)if(typeof A!="number")return;switch(s.length){case 1:s=[s[0],s[0],s[0],s[0]];break;case 2:s=[s[0],s[1],s[0],s[1]];break;case 3:s=[s[0],s[1],s[2],s[1]]}return new Un(s)}}toString(){return JSON.stringify(this.values)}static interpolate(s,A,d){return new Un(ri(s.values,A.values,d))}}class Hi{constructor(s){this.values=s.slice()}static parse(s){if(s instanceof Hi)return s;if(typeof s=="number")return new Hi([s]);if(Array.isArray(s)){for(const A of s)if(typeof A!="number")return;return new Hi(s)}}toString(){return JSON.stringify(this.values)}static interpolate(s,A,d){return new Hi(ri(s.values,A.values,d))}}class Ei{constructor(s){this.values=s.slice()}static parse(s){if(s instanceof Ei)return s;if(typeof s=="string"){const d=ln.parse(s);return d?new Ei([d]):void 0}if(!Array.isArray(s))return;const A=[];for(const d of s){if(typeof d!="string")return;const m=ln.parse(d);if(!m)return;A.push(m)}return new Ei(A)}toString(){return JSON.stringify(this.values)}static interpolate(s,A,d,m="rgb"){const w=[];if(s.values.length!=A.values.length)throw new Error(`colorArray: Arrays have mismatched length (${s.values.length} vs. ${A.values.length}), cannot interpolate.`);for(let x=0;x<s.values.length;x++)w.push(ln.interpolate(s.values[x],A.values[x],d,m));return new Ei(w)}}class Rn extends Error{constructor(s){super(s),this.name="RuntimeError"}toJSON(){return this.message}}const kl=new Set(["center","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"]);class An{constructor(s){this.values=s.slice()}static parse(s){if(s instanceof An)return s;if(Array.isArray(s)&&!(s.length<1)&&s.length%2==0){for(let A=0;A<s.length;A+=2){const d=s[A],m=s[A+1];if(typeof d!="string"||!kl.has(d)||!Array.isArray(m)||m.length!==2||typeof m[0]!="number"||typeof m[1]!="number")return}return new An(s)}}toString(){return JSON.stringify(this.values)}static interpolate(s,A,d){const m=s.values,w=A.values;if(m.length!==w.length)throw new Rn(`Cannot interpolate values of different length. from: ${s.toString()}, to: ${A.toString()}`);const x=[];for(let E=0;E<m.length;E+=2){if(m[E]!==w[E])throw new Rn(`Cannot interpolate values containing mismatched anchors. from[${E}]: ${m[E]}, to[${E}]: ${w[E]}`);x.push(m[E]);const[L,Q]=m[E+1],[j,G]=w[E+1];x.push([Ns(L,j,d),Ns(Q,G,d)])}return new An(x)}}class Bs{constructor(s){this.name=s.name,this.available=s.available}toString(){return this.name}static fromString(s){return s?new Bs({name:s,available:!1}):null}}class Gr{constructor(s,A,d){this.from=s,this.to=A,this.transition=d}static interpolate(s,A,d){return new Gr(s,A,d)}static parse(s){return s instanceof Gr?s:Array.isArray(s)&&s.length===3&&typeof s[0]=="string"&&typeof s[1]=="string"&&typeof s[2]=="number"?new Gr(s[0],s[1],s[2]):typeof s=="object"&&typeof s.from=="string"&&typeof s.to=="string"&&typeof s.transition=="number"?new Gr(s.from,s.to,s.transition):typeof s=="string"?new Gr(s,s,1):void 0}}function Zr(c,s,A,d){return typeof c=="number"&&c>=0&&c<=255&&typeof s=="number"&&s>=0&&s<=255&&typeof A=="number"&&A>=0&&A<=255?d===void 0||typeof d=="number"&&d>=0&&d<=1?null:`Invalid rgba value [${[c,s,A,d].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof d=="number"?[c,s,A,d]:[c,s,A]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function fo(c){if(c===null||typeof c=="string"||typeof c=="boolean"||typeof c=="number"||c instanceof Gr||c instanceof ln||c instanceof Ml||c instanceof ts||c instanceof Un||c instanceof Hi||c instanceof Ei||c instanceof An||c instanceof Bs)return!0;if(Array.isArray(c)){for(const s of c)if(!fo(s))return!1;return!0}if(typeof c=="object"){for(const s in c)if(!fo(c[s]))return!1;return!0}return!1}function Tr(c){if(c===null)return cs;if(typeof c=="string")return Qr;if(typeof c=="boolean")return Vr;if(typeof c=="number")return Jt;if(c instanceof ln)return zi;if(c instanceof Gr)return Ja;if(c instanceof Ml)return Xs;if(c instanceof ts)return Ca;if(c instanceof Un)return ui;if(c instanceof Hi)return Sa;if(c instanceof Ei)return iA;if(c instanceof An)return sA;if(c instanceof Bs)return Fo;if(Array.isArray(c)){const s=c.length;let A;for(const d of c){const m=Tr(d);if(A){if(A===m)continue;A=$r;break}A=m}return us(A||$r,s)}return Us}function nl(c){const s=typeof c;return c===null?"":s==="string"||s==="number"||s==="boolean"?String(c):c instanceof ln||c instanceof Gr||c instanceof ts||c instanceof Un||c instanceof Hi||c instanceof Ei||c instanceof An||c instanceof Bs?c.toString():JSON.stringify(c)}class Ii{constructor(s,A){this.type=s,this.value=A}static parse(s,A){if(s.length!==2)return A.error(`'literal' expression requires exactly one argument, but found ${s.length-1} instead.`);if(!fo(s[1]))return A.error("invalid value");const d=s[1];let m=Tr(d);const w=A.expectedType;return m.kind!=="array"||m.N!==0||!w||w.kind!=="array"||typeof w.N=="number"&&w.N!==0||(m=w),new Ii(m,d)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}}const Fa={string:Qr,number:Jt,boolean:Vr,object:Us};class ji{constructor(s,A){this.type=s,this.args=A}static parse(s,A){if(s.length<2)return A.error("Expected at least one argument.");let d,m=1;const w=s[0];if(w==="array"){let E,L;if(s.length>2){const Q=s[1];if(typeof Q!="string"||!(Q in Fa)||Q==="object")return A.error('The item type argument of "array" must be one of string, number, boolean',1);E=Fa[Q],m++}else E=$r;if(s.length>3){if(s[2]!==null&&(typeof s[2]!="number"||s[2]<0||s[2]!==Math.floor(s[2])))return A.error('The length argument to "array" must be a positive integer literal',2);L=s[2],m++}d=us(E,L)}else{if(!Fa[w])throw new Error(`Types doesn't contain name = ${w}`);d=Fa[w]}const x=[];for(;m<s.length;m++){const E=A.parse(s[m],m,$r);if(!E)return null;x.push(E)}return new ji(d,x)}evaluate(s){for(let A=0;A<this.args.length;A++){const d=this.args[A].evaluate(s);if(!oA(this.type,Tr(d)))return d;if(A===this.args.length-1)throw new Rn(`Expected value to be of type ${$n(this.type)}, but found ${$n(Tr(d))} instead.`)}throw new Error}eachChild(s){this.args.forEach(s)}outputDefined(){return this.args.every(s=>s.outputDefined())}}const ec={"to-boolean":Vr,"to-color":zi,"to-number":Jt,"to-string":Qr};class po{constructor(s,A){this.type=s,this.args=A}static parse(s,A){if(s.length<2)return A.error("Expected at least one argument.");const d=s[0];if(!ec[d])throw new Error(`Can't parse ${d} as it is not part of the known types`);if((d==="to-boolean"||d==="to-string")&&s.length!==2)return A.error("Expected one argument.");const m=ec[d],w=[];for(let x=1;x<s.length;x++){const E=A.parse(s[x],x,$r);if(!E)return null;w.push(E)}return new po(m,w)}evaluate(s){switch(this.type.kind){case"boolean":return!!this.args[0].evaluate(s);case"color":{let A,d;for(const m of this.args){if(A=m.evaluate(s),d=null,A instanceof ln)return A;if(typeof A=="string"){const w=s.parseColor(A);if(w)return w}else if(Array.isArray(A)&&(d=A.length<3||A.length>4?`Invalid rgba value ${JSON.stringify(A)}: expected an array containing either three or four numeric values.`:Zr(A[0],A[1],A[2],A[3]),!d))return new ln(A[0]/255,A[1]/255,A[2]/255,A[3])}throw new Rn(d||`Could not parse color from value '${typeof A=="string"?A:JSON.stringify(A)}'`)}case"padding":{let A;for(const d of this.args){A=d.evaluate(s);const m=Un.parse(A);if(m)return m}throw new Rn(`Could not parse padding from value '${typeof A=="string"?A:JSON.stringify(A)}'`)}case"numberArray":{let A;for(const d of this.args){A=d.evaluate(s);const m=Hi.parse(A);if(m)return m}throw new Rn(`Could not parse numberArray from value '${typeof A=="string"?A:JSON.stringify(A)}'`)}case"colorArray":{let A;for(const d of this.args){A=d.evaluate(s);const m=Ei.parse(A);if(m)return m}throw new Rn(`Could not parse colorArray from value '${typeof A=="string"?A:JSON.stringify(A)}'`)}case"variableAnchorOffsetCollection":{let A;for(const d of this.args){A=d.evaluate(s);const m=An.parse(A);if(m)return m}throw new Rn(`Could not parse variableAnchorOffsetCollection from value '${typeof A=="string"?A:JSON.stringify(A)}'`)}case"number":{let A=null;for(const d of this.args){if(A=d.evaluate(s),A===null)return 0;const m=Number(A);if(!isNaN(m))return m}throw new Rn(`Could not convert ${JSON.stringify(A)} to number.`)}case"formatted":return ts.fromString(nl(this.args[0].evaluate(s)));case"resolvedImage":return Bs.fromString(nl(this.args[0].evaluate(s)));case"projectionDefinition":return this.args[0].evaluate(s);default:return nl(this.args[0].evaluate(s))}}eachChild(s){this.args.forEach(s)}outputDefined(){return this.args.every(s=>s.outputDefined())}}const Xc=["Unknown","Point","LineString","Polygon"];class Yc{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache=new Map,this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?Xc[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(s){let A=this._parseColorCache.get(s);return A||(A=ln.parse(s),this._parseColorCache.set(s,A)),A}}class eo{constructor(s,A,d=[],m,w=new es,x=[]){this.registry=s,this.path=d,this.key=d.map(E=>`[${E}]`).join(""),this.scope=w,this.errors=x,this.expectedType=m,this._isConstant=A}parse(s,A,d,m,w={}){return A?this.concat(A,d,m)._parse(s,w):this._parse(s,w)}_parse(s,A){function d(m,w,x){return x==="assert"?new ji(w,[m]):x==="coerce"?new po(w,[m]):m}if(s!==null&&typeof s!="string"&&typeof s!="boolean"&&typeof s!="number"||(s=["literal",s]),Array.isArray(s)){if(s.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const m=s[0];if(typeof m!="string")return this.error(`Expression name must be a string, but found ${typeof m} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const w=this.registry[m];if(w){let x=w.parse(s,this);if(!x)return null;if(this.expectedType){const E=this.expectedType,L=x.type;if(E.kind!=="string"&&E.kind!=="number"&&E.kind!=="boolean"&&E.kind!=="object"&&E.kind!=="array"||L.kind!=="value"){if(E.kind==="projectionDefinition"&&["string","array"].includes(L.kind)||["color","formatted","resolvedImage"].includes(E.kind)&&["value","string"].includes(L.kind)||["padding","numberArray"].includes(E.kind)&&["value","number","array"].includes(L.kind)||E.kind==="colorArray"&&["value","string","array"].includes(L.kind)||E.kind==="variableAnchorOffsetCollection"&&["value","array"].includes(L.kind))x=d(x,E,A.typeAnnotation||"coerce");else if(this.checkSubtype(E,L))return null}else x=d(x,E,A.typeAnnotation||"assert")}if(!(x instanceof Ii)&&x.type.kind!=="resolvedImage"&&this._isConstant(x)){const E=new Yc;try{x=new Ii(x.type,x.evaluate(E))}catch(L){return this.error(L.message),null}}return x}return this.error(`Unknown expression "${m}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(s===void 0?"'undefined' value invalid. Use null instead.":typeof s=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof s} instead.`)}concat(s,A,d){const m=typeof s=="number"?this.path.concat(s):this.path,w=d?this.scope.concat(d):this.scope;return new eo(this.registry,this._isConstant,m,A||null,w,this.errors)}error(s,...A){const d=`${this.key}${A.map(m=>`[${m}]`).join("")}`;this.errors.push(new Bn(d,s))}checkSubtype(s,A){const d=oA(s,A);return d&&this.error(d),d}}class mo{constructor(s,A){this.type=A.type,this.bindings=[].concat(s),this.result=A}evaluate(s){return this.result.evaluate(s)}eachChild(s){for(const A of this.bindings)s(A[1]);s(this.result)}static parse(s,A){if(s.length<4)return A.error(`Expected at least 3 arguments, but found ${s.length-1} instead.`);const d=[];for(let w=1;w<s.length-1;w+=2){const x=s[w];if(typeof x!="string")return A.error(`Expected string, but found ${typeof x} instead.`,w);if(/[^a-zA-Z0-9_]/.test(x))return A.error("Variable names must contain only alphanumeric characters or '_'.",w);const E=A.parse(s[w+1],w+1);if(!E)return null;d.push([x,E])}const m=A.parse(s[s.length-1],s.length-1,A.expectedType,d);return m?new mo(d,m):null}outputDefined(){return this.result.outputDefined()}}class go{constructor(s,A){this.type=A.type,this.name=s,this.boundExpression=A}static parse(s,A){if(s.length!==2||typeof s[1]!="string")return A.error("'var' expression requires exactly one string literal argument.");const d=s[1];return A.scope.has(d)?new go(d,A.scope.get(d)):A.error(`Unknown variable "${d}". Make sure "${d}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(s){return this.boundExpression.evaluate(s)}eachChild(){}outputDefined(){return!1}}class Yn{constructor(s,A,d){this.type=s,this.index=A,this.input=d}static parse(s,A){if(s.length!==3)return A.error(`Expected 2 arguments, but found ${s.length-1} instead.`);const d=A.parse(s[1],1,Jt),m=A.parse(s[2],2,us(A.expectedType||$r));return d&&m?new Yn(m.type.itemType,d,m):null}evaluate(s){const A=this.index.evaluate(s),d=this.input.evaluate(s);if(A<0)throw new Rn(`Array index out of bounds: ${A} < 0.`);if(A>=d.length)throw new Rn(`Array index out of bounds: ${A} > ${d.length-1}.`);if(A!==Math.floor(A))throw new Rn(`Array index must be an integer, but found ${A} instead.`);return d[A]}eachChild(s){s(this.index),s(this.input)}outputDefined(){return!1}}class Cs{constructor(s,A){this.type=Vr,this.needle=s,this.haystack=A}static parse(s,A){if(s.length!==3)return A.error(`Expected 2 arguments, but found ${s.length-1} instead.`);const d=A.parse(s[1],1,$r),m=A.parse(s[2],2,$r);return d&&m?el(d.type,[Vr,Qr,Jt,cs,$r])?new Cs(d,m):A.error(`Expected first argument to be of type boolean, string, number or null, but found ${$n(d.type)} instead`):null}evaluate(s){const A=this.needle.evaluate(s),d=this.haystack.evaluate(s);if(!d)return!1;if(!tl(A,["boolean","string","number","null"]))throw new Rn(`Expected first argument to be of type boolean, string, number or null, but found ${$n(Tr(A))} instead.`);if(!tl(d,["string","array"]))throw new Rn(`Expected second argument to be of type array or string, but found ${$n(Tr(d))} instead.`);return d.indexOf(A)>=0}eachChild(s){s(this.needle),s(this.haystack)}outputDefined(){return!0}}class il{constructor(s,A,d){this.type=Jt,this.needle=s,this.haystack=A,this.fromIndex=d}static parse(s,A){if(s.length<=2||s.length>=5)return A.error(`Expected 3 or 4 arguments, but found ${s.length-1} instead.`);const d=A.parse(s[1],1,$r),m=A.parse(s[2],2,$r);if(!d||!m)return null;if(!el(d.type,[Vr,Qr,Jt,cs,$r]))return A.error(`Expected first argument to be of type boolean, string, number or null, but found ${$n(d.type)} instead`);if(s.length===4){const w=A.parse(s[3],3,Jt);return w?new il(d,m,w):null}return new il(d,m)}evaluate(s){const A=this.needle.evaluate(s),d=this.haystack.evaluate(s);if(!tl(A,["boolean","string","number","null"]))throw new Rn(`Expected first argument to be of type boolean, string, number or null, but found ${$n(Tr(A))} instead.`);let m;if(this.fromIndex&&(m=this.fromIndex.evaluate(s)),tl(d,["string"])){const w=d.indexOf(A,m);return w===-1?-1:[...d.slice(0,w)].length}if(tl(d,["array"]))return d.indexOf(A,m);throw new Rn(`Expected second argument to be of type array or string, but found ${$n(Tr(d))} instead.`)}eachChild(s){s(this.needle),s(this.haystack),this.fromIndex&&s(this.fromIndex)}outputDefined(){return!1}}class Po{constructor(s,A,d,m,w,x){this.inputType=s,this.type=A,this.input=d,this.cases=m,this.outputs=w,this.otherwise=x}static parse(s,A){if(s.length<5)return A.error(`Expected at least 4 arguments, but found only ${s.length-1}.`);if(s.length%2!=1)return A.error("Expected an even number of arguments.");let d,m;A.expectedType&&A.expectedType.kind!=="value"&&(m=A.expectedType);const w={},x=[];for(let Q=2;Q<s.length-1;Q+=2){let j=s[Q];const G=s[Q+1];Array.isArray(j)||(j=[j]);const J=A.concat(Q);if(j.length===0)return J.error("Expected at least one branch label.");for(const oe of j){if(typeof oe!="number"&&typeof oe!="string")return J.error("Branch labels must be numbers or strings.");if(typeof oe=="number"&&Math.abs(oe)>Number.MAX_SAFE_INTEGER)return J.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof oe=="number"&&Math.floor(oe)!==oe)return J.error("Numeric branch labels must be integer values.");if(d){if(J.checkSubtype(d,Tr(oe)))return null}else d=Tr(oe);if(w[String(oe)]!==void 0)return J.error("Branch labels must be unique.");w[String(oe)]=x.length}const ne=A.parse(G,Q,m);if(!ne)return null;m=m||ne.type,x.push(ne)}const E=A.parse(s[1],1,$r);if(!E)return null;const L=A.parse(s[s.length-1],s.length-1,m);return L?E.type.kind!=="value"&&A.concat(1).checkSubtype(d,E.type)?null:new Po(d,m,E,w,x,L):null}evaluate(s){const A=this.input.evaluate(s);return(Tr(A)===this.inputType&&this.outputs[this.cases[A]]||this.otherwise).evaluate(s)}eachChild(s){s(this.input),this.outputs.forEach(s),s(this.otherwise)}outputDefined(){return this.outputs.every(s=>s.outputDefined())&&this.otherwise.outputDefined()}}class vi{constructor(s,A,d){this.type=s,this.branches=A,this.otherwise=d}static parse(s,A){if(s.length<4)return A.error(`Expected at least 3 arguments, but found only ${s.length-1}.`);if(s.length%2!=0)return A.error("Expected an odd number of arguments.");let d;A.expectedType&&A.expectedType.kind!=="value"&&(d=A.expectedType);const m=[];for(let x=1;x<s.length-1;x+=2){const E=A.parse(s[x],x,Vr);if(!E)return null;const L=A.parse(s[x+1],x+1,d);if(!L)return null;m.push([E,L]),d=d||L.type}const w=A.parse(s[s.length-1],s.length-1,d);if(!w)return null;if(!d)throw new Error("Can't infer output type");return new vi(d,m,w)}evaluate(s){for(const[A,d]of this.branches)if(A.evaluate(s))return d.evaluate(s);return this.otherwise.evaluate(s)}eachChild(s){for(const[A,d]of this.branches)s(A),s(d);s(this.otherwise)}outputDefined(){return this.branches.every(([s,A])=>A.outputDefined())&&this.otherwise.outputDefined()}}class Ta{constructor(s,A,d,m){this.type=s,this.input=A,this.beginIndex=d,this.endIndex=m}static parse(s,A){if(s.length<=2||s.length>=5)return A.error(`Expected 3 or 4 arguments, but found ${s.length-1} instead.`);const d=A.parse(s[1],1,$r),m=A.parse(s[2],2,Jt);if(!d||!m)return null;if(!el(d.type,[us($r),Qr,$r]))return A.error(`Expected first argument to be of type array or string, but found ${$n(d.type)} instead`);if(s.length===4){const w=A.parse(s[3],3,Jt);return w?new Ta(d.type,d,m,w):null}return new Ta(d.type,d,m)}evaluate(s){const A=this.input.evaluate(s),d=this.beginIndex.evaluate(s);let m;if(this.endIndex&&(m=this.endIndex.evaluate(s)),tl(A,["string"]))return[...A].slice(d,m).join("");if(tl(A,["array"]))return A.slice(d,m);throw new Rn(`Expected first argument to be of type array or string, but found ${$n(Tr(A))} instead.`)}eachChild(s){s(this.input),s(this.beginIndex),this.endIndex&&s(this.endIndex)}outputDefined(){return!1}}function Ul(c,s){const A=c.length-1;let d,m,w=0,x=A,E=0;for(;w<=x;)if(E=Math.floor((w+x)/2),d=c[E],m=c[E+1],d<=s){if(E===A||s<m)return E;w=E+1}else{if(!(d>s))throw new Rn("Input is not a number.");x=E-1}return 0}class Pa{constructor(s,A,d){this.type=s,this.input=A,this.labels=[],this.outputs=[];for(const[m,w]of d)this.labels.push(m),this.outputs.push(w)}static parse(s,A){if(s.length-1<4)return A.error(`Expected at least 4 arguments, but found only ${s.length-1}.`);if((s.length-1)%2!=0)return A.error("Expected an even number of arguments.");const d=A.parse(s[1],1,Jt);if(!d)return null;const m=[];let w=null;A.expectedType&&A.expectedType.kind!=="value"&&(w=A.expectedType);for(let x=1;x<s.length;x+=2){const E=x===1?-1/0:s[x],L=s[x+1],Q=x,j=x+1;if(typeof E!="number")return A.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',Q);if(m.length&&m[m.length-1][0]>=E)return A.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',Q);const G=A.parse(L,j,w);if(!G)return null;w=w||G.type,m.push([E,G])}return new Pa(w,d,m)}evaluate(s){const A=this.labels,d=this.outputs;if(A.length===1)return d[0].evaluate(s);const m=this.input.evaluate(s);if(m<=A[0])return d[0].evaluate(s);const w=A.length;return m>=A[w-1]?d[w-1].evaluate(s):d[Ul(A,m)].evaluate(s)}eachChild(s){s(this.input);for(const A of this.outputs)s(A)}outputDefined(){return this.outputs.every(s=>s.outputDefined())}}function Jc(c){return c&&c.__esModule&&Object.prototype.hasOwnProperty.call(c,"default")?c.default:c}var oa,La,lA=function(){if(La)return oa;function c(s,A,d,m){this.cx=3*s,this.bx=3*(d-s)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*A,this.by=3*(m-A)-this.cy,this.ay=1-this.cy-this.by,this.p1x=s,this.p1y=A,this.p2x=d,this.p2y=m}return La=1,oa=c,c.prototype={sampleCurveX:function(s){return((this.ax*s+this.bx)*s+this.cx)*s},sampleCurveY:function(s){return((this.ay*s+this.by)*s+this.cy)*s},sampleCurveDerivativeX:function(s){return(3*this.ax*s+2*this.bx)*s+this.cx},solveCurveX:function(s,A){if(A===void 0&&(A=1e-6),s<0)return 0;if(s>1)return 1;for(var d=s,m=0;m<8;m++){var w=this.sampleCurveX(d)-s;if(Math.abs(w)<A)return d;var x=this.sampleCurveDerivativeX(d);if(Math.abs(x)<1e-6)break;d-=w/x}var E=0,L=1;for(d=s,m=0;m<20&&(w=this.sampleCurveX(d),!(Math.abs(w-s)<A));m++)s>w?E=d:L=d,d=.5*(L-E)+E;return d},solve:function(s,A){return this.sampleCurveY(this.solveCurveX(s,A))}},oa}(),eu=Jc(lA);class rs{constructor(s,A,d,m,w){this.type=s,this.operator=A,this.interpolation=d,this.input=m,this.labels=[],this.outputs=[];for(const[x,E]of w)this.labels.push(x),this.outputs.push(E)}static interpolationFactor(s,A,d,m){let w=0;if(s.name==="exponential")w=Rl(A,s.base,d,m);else if(s.name==="linear")w=Rl(A,1,d,m);else if(s.name==="cubic-bezier"){const x=s.controlPoints;w=new eu(x[0],x[1],x[2],x[3]).solve(Rl(A,1,d,m))}return w}static parse(s,A){let[d,m,w,...x]=s;if(!Array.isArray(m)||m.length===0)return A.error("Expected an interpolation type expression.",1);if(m[0]==="linear")m={name:"linear"};else if(m[0]==="exponential"){const Q=m[1];if(typeof Q!="number")return A.error("Exponential interpolation requires a numeric base.",1,1);m={name:"exponential",base:Q}}else{if(m[0]!=="cubic-bezier")return A.error(`Unknown interpolation type ${String(m[0])}`,1,0);{const Q=m.slice(1);if(Q.length!==4||Q.some(j=>typeof j!="number"||j<0||j>1))return A.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);m={name:"cubic-bezier",controlPoints:Q}}}if(s.length-1<4)return A.error(`Expected at least 4 arguments, but found only ${s.length-1}.`);if((s.length-1)%2!=0)return A.error("Expected an even number of arguments.");if(w=A.parse(w,2,Jt),!w)return null;const E=[];let L=null;d!=="interpolate-hcl"&&d!=="interpolate-lab"||A.expectedType==iA?A.expectedType&&A.expectedType.kind!=="value"&&(L=A.expectedType):L=zi;for(let Q=0;Q<x.length;Q+=2){const j=x[Q],G=x[Q+1],J=Q+3,ne=Q+4;if(typeof j!="number")return A.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',J);if(E.length&&E[E.length-1][0]>=j)return A.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',J);const oe=A.parse(G,ne,L);if(!oe)return null;L=L||oe.type,E.push([j,oe])}return On(L,Jt)||On(L,Ja)||On(L,zi)||On(L,ui)||On(L,Sa)||On(L,iA)||On(L,sA)||On(L,us(Jt))?new rs(L,d,m,w,E):A.error(`Type ${$n(L)} is not interpolatable.`)}evaluate(s){const A=this.labels,d=this.outputs;if(A.length===1)return d[0].evaluate(s);const m=this.input.evaluate(s);if(m<=A[0])return d[0].evaluate(s);const w=A.length;if(m>=A[w-1])return d[w-1].evaluate(s);const x=Ul(A,m),E=rs.interpolationFactor(this.interpolation,m,A[x],A[x+1]),L=d[x].evaluate(s),Q=d[x+1].evaluate(s);switch(this.operator){case"interpolate":switch(this.type.kind){case"number":return Ns(L,Q,E);case"color":return ln.interpolate(L,Q,E);case"padding":return Un.interpolate(L,Q,E);case"colorArray":return Ei.interpolate(L,Q,E);case"numberArray":return Hi.interpolate(L,Q,E);case"variableAnchorOffsetCollection":return An.interpolate(L,Q,E);case"array":return ri(L,Q,E);case"projectionDefinition":return Gr.interpolate(L,Q,E)}case"interpolate-hcl":switch(this.type.kind){case"color":return ln.interpolate(L,Q,E,"hcl");case"colorArray":return Ei.interpolate(L,Q,E,"hcl")}case"interpolate-lab":switch(this.type.kind){case"color":return ln.interpolate(L,Q,E,"lab");case"colorArray":return Ei.interpolate(L,Q,E,"lab")}}}eachChild(s){s(this.input);for(const A of this.outputs)s(A)}outputDefined(){return this.outputs.every(s=>s.outputDefined())}}function Rl(c,s,A,d){const m=d-A,w=c-A;return m===0?0:s===1?w/m:(Math.pow(s,w)-1)/(Math.pow(s,m)-1)}const ns={color:ln.interpolate,number:Ns,padding:Un.interpolate,numberArray:Hi.interpolate,colorArray:Ei.interpolate,variableAnchorOffsetCollection:An.interpolate,array:ri};class Ui{constructor(s,A){this.type=s,this.args=A}static parse(s,A){if(s.length<2)return A.error("Expected at least one argument.");let d=null;const m=A.expectedType;m&&m.kind!=="value"&&(d=m);const w=[];for(const E of s.slice(1)){const L=A.parse(E,1+w.length,d,void 0,{typeAnnotation:"omit"});if(!L)return null;d=d||L.type,w.push(L)}if(!d)throw new Error("No output type");const x=m&&w.some(E=>oA(m,E.type));return new Ui(x?$r:d,w)}evaluate(s){let A,d=null,m=0;for(const w of this.args)if(m++,d=w.evaluate(s),d&&d instanceof Bs&&!d.available&&(A||(A=d.name),d=null,m===this.args.length&&(d=A)),d!==null)break;return d}eachChild(s){this.args.forEach(s)}outputDefined(){return this.args.every(s=>s.outputDefined())}}function AA(c,s){return c==="=="||c==="!="?s.kind==="boolean"||s.kind==="string"||s.kind==="number"||s.kind==="null"||s.kind==="value":s.kind==="string"||s.kind==="number"||s.kind==="value"}function Lo(c,s,A,d){return d.compare(s,A)===0}function Ma(c,s,A){const d=c!=="=="&&c!=="!=";return class ZU{constructor(w,x,E){this.type=Vr,this.lhs=w,this.rhs=x,this.collator=E,this.hasUntypedArgument=w.type.kind==="value"||x.type.kind==="value"}static parse(w,x){if(w.length!==3&&w.length!==4)return x.error("Expected two or three arguments.");const E=w[0];let L=x.parse(w[1],1,$r);if(!L)return null;if(!AA(E,L.type))return x.concat(1).error(`"${E}" comparisons are not supported for type '${$n(L.type)}'.`);let Q=x.parse(w[2],2,$r);if(!Q)return null;if(!AA(E,Q.type))return x.concat(2).error(`"${E}" comparisons are not supported for type '${$n(Q.type)}'.`);if(L.type.kind!==Q.type.kind&&L.type.kind!=="value"&&Q.type.kind!=="value")return x.error(`Cannot compare types '${$n(L.type)}' and '${$n(Q.type)}'.`);d&&(L.type.kind==="value"&&Q.type.kind!=="value"?L=new ji(Q.type,[L]):L.type.kind!=="value"&&Q.type.kind==="value"&&(Q=new ji(L.type,[Q])));let j=null;if(w.length===4){if(L.type.kind!=="string"&&Q.type.kind!=="string"&&L.type.kind!=="value"&&Q.type.kind!=="value")return x.error("Cannot use collator to compare non-string types.");if(j=x.parse(w[3],3,Xs),!j)return null}return new ZU(L,Q,j)}evaluate(w){const x=this.lhs.evaluate(w),E=this.rhs.evaluate(w);if(d&&this.hasUntypedArgument){const L=Tr(x),Q=Tr(E);if(L.kind!==Q.kind||L.kind!=="string"&&L.kind!=="number")throw new Rn(`Expected arguments for "${c}" to be (string, string) or (number, number), but found (${L.kind}, ${Q.kind}) instead.`)}if(this.collator&&!d&&this.hasUntypedArgument){const L=Tr(x),Q=Tr(E);if(L.kind!=="string"||Q.kind!=="string")return s(w,x,E)}return this.collator?A(w,x,E,this.collator.evaluate(w)):s(w,x,E)}eachChild(w){w(this.lhs),w(this.rhs),this.collator&&w(this.collator)}outputDefined(){return!0}}}const D=Ma("==",function(c,s,A){return s===A},Lo),ce=Ma("!=",function(c,s,A){return s!==A},function(c,s,A,d){return!Lo(0,s,A,d)}),je=Ma("<",function(c,s,A){return s<A},function(c,s,A,d){return d.compare(s,A)<0}),at=Ma(">",function(c,s,A){return s>A},function(c,s,A,d){return d.compare(s,A)>0}),vt=Ma("<=",function(c,s,A){return s<=A},function(c,s,A,d){return d.compare(s,A)<=0}),Ut=Ma(">=",function(c,s,A){return s>=A},function(c,s,A,d){return d.compare(s,A)>=0});class Wt{constructor(s,A,d){this.type=Xs,this.locale=d,this.caseSensitive=s,this.diacriticSensitive=A}static parse(s,A){if(s.length!==2)return A.error("Expected one argument.");const d=s[1];if(typeof d!="object"||Array.isArray(d))return A.error("Collator options argument must be an object.");const m=A.parse(d["case-sensitive"]!==void 0&&d["case-sensitive"],1,Vr);if(!m)return null;const w=A.parse(d["diacritic-sensitive"]!==void 0&&d["diacritic-sensitive"],1,Vr);if(!w)return null;let x=null;return d.locale&&(x=A.parse(d.locale,1,Qr),!x)?null:new Wt(m,w,x)}evaluate(s){return new Ml(this.caseSensitive.evaluate(s),this.diacriticSensitive.evaluate(s),this.locale?this.locale.evaluate(s):null)}eachChild(s){s(this.caseSensitive),s(this.diacriticSensitive),this.locale&&s(this.locale)}outputDefined(){return!1}}class gr{constructor(s,A,d,m,w){this.type=Qr,this.number=s,this.locale=A,this.currency=d,this.minFractionDigits=m,this.maxFractionDigits=w}static parse(s,A){if(s.length!==3)return A.error("Expected two arguments.");const d=A.parse(s[1],1,Jt);if(!d)return null;const m=s[2];if(typeof m!="object"||Array.isArray(m))return A.error("NumberFormat options argument must be an object.");let w=null;if(m.locale&&(w=A.parse(m.locale,1,Qr),!w))return null;let x=null;if(m.currency&&(x=A.parse(m.currency,1,Qr),!x))return null;let E=null;if(m["min-fraction-digits"]&&(E=A.parse(m["min-fraction-digits"],1,Jt),!E))return null;let L=null;return m["max-fraction-digits"]&&(L=A.parse(m["max-fraction-digits"],1,Jt),!L)?null:new gr(d,w,x,E,L)}evaluate(s){return new Intl.NumberFormat(this.locale?this.locale.evaluate(s):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(s):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(s):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(s):void 0}).format(this.number.evaluate(s))}eachChild(s){s(this.number),this.locale&&s(this.locale),this.currency&&s(this.currency),this.minFractionDigits&&s(this.minFractionDigits),this.maxFractionDigits&&s(this.maxFractionDigits)}outputDefined(){return!1}}class Mr{constructor(s){this.type=Ca,this.sections=s}static parse(s,A){if(s.length<2)return A.error("Expected at least one argument.");const d=s[1];if(!Array.isArray(d)&&typeof d=="object")return A.error("First argument must be an image or text section.");const m=[];let w=!1;for(let x=1;x<=s.length-1;++x){const E=s[x];if(w&&typeof E=="object"&&!Array.isArray(E)){w=!1;let L=null;if(E["font-scale"]&&(L=A.parse(E["font-scale"],1,Jt),!L))return null;let Q=null;if(E["text-font"]&&(Q=A.parse(E["text-font"],1,us(Qr)),!Q))return null;let j=null;if(E["text-color"]&&(j=A.parse(E["text-color"],1,zi),!j))return null;let G=null;if(E["vertical-align"]){if(typeof E["vertical-align"]=="string"&&!qr.includes(E["vertical-align"]))return A.error(`'vertical-align' must be one of: 'bottom', 'center', 'top' but found '${E["vertical-align"]}' instead.`);if(G=A.parse(E["vertical-align"],1,Qr),!G)return null}const J=m[m.length-1];J.scale=L,J.font=Q,J.textColor=j,J.verticalAlign=G}else{const L=A.parse(s[x],1,$r);if(!L)return null;const Q=L.type.kind;if(Q!=="string"&&Q!=="value"&&Q!=="null"&&Q!=="resolvedImage")return A.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");w=!0,m.push({content:L,scale:null,font:null,textColor:null,verticalAlign:null})}}return new Mr(m)}evaluate(s){return new ts(this.sections.map(A=>{const d=A.content.evaluate(s);return Tr(d)===Fo?new Wc("",d,null,null,null,A.verticalAlign?A.verticalAlign.evaluate(s):null):new Wc(nl(d),null,A.scale?A.scale.evaluate(s):null,A.font?A.font.evaluate(s).join(","):null,A.textColor?A.textColor.evaluate(s):null,A.verticalAlign?A.verticalAlign.evaluate(s):null)}))}eachChild(s){for(const A of this.sections)s(A.content),A.scale&&s(A.scale),A.font&&s(A.font),A.textColor&&s(A.textColor),A.verticalAlign&&s(A.verticalAlign)}outputDefined(){return!1}}class en{constructor(s){this.type=Fo,this.input=s}static parse(s,A){if(s.length!==2)return A.error("Expected two arguments.");const d=A.parse(s[1],1,Qr);return d?new en(d):A.error("No image name provided.")}evaluate(s){const A=this.input.evaluate(s),d=Bs.fromString(A);return d&&s.availableImages&&(d.available=s.availableImages.indexOf(A)>-1),d}eachChild(s){s(this.input)}outputDefined(){return!1}}class Wr{constructor(s){this.type=Jt,this.input=s}static parse(s,A){if(s.length!==2)return A.error(`Expected 1 argument, but found ${s.length-1} instead.`);const d=A.parse(s[1],1);return d?d.type.kind!=="array"&&d.type.kind!=="string"&&d.type.kind!=="value"?A.error(`Expected argument of type string or array, but found ${$n(d.type)} instead.`):new Wr(d):null}evaluate(s){const A=this.input.evaluate(s);if(typeof A=="string")return[...A].length;if(Array.isArray(A))return A.length;throw new Rn(`Expected value to be of type string or array, but found ${$n(Tr(A))} instead.`)}eachChild(s){s(this.input)}outputDefined(){return!1}}const nn=8192;function hi(c,s){const A=(180+c[0])/360,d=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+c[1]*Math.PI/360)))/360,m=Math.pow(2,s.z);return[Math.round(A*m*nn),Math.round(d*m*nn)]}function ni(c,s){const A=Math.pow(2,s.z);return[(m=(c[0]/nn+s.x)/A,360*m-180),(d=(c[1]/nn+s.y)/A,360/Math.PI*Math.atan(Math.exp((180-360*d)*Math.PI/180))-90)];var d,m}function ii(c,s){c[0]=Math.min(c[0],s[0]),c[1]=Math.min(c[1],s[1]),c[2]=Math.max(c[2],s[0]),c[3]=Math.max(c[3],s[1])}function Ri(c,s){return!(c[0]<=s[0]||c[2]>=s[2]||c[1]<=s[1]||c[3]>=s[3])}function Vi(c,s,A){const d=c[0]-s[0],m=c[1]-s[1],w=c[0]-A[0],x=c[1]-A[1];return d*x-w*m==0&&d*w<=0&&m*x<=0}function Ds(c,s,A,d){return(m=[d[0]-A[0],d[1]-A[1]])[0]*(w=[s[0]-c[0],s[1]-c[1]])[1]-m[1]*w[0]!=0&&!(!sl(c,s,A,d)||!sl(A,d,c,s));var m,w}function to(c,s,A){for(const d of A)for(let m=0;m<d.length-1;++m)if(Ds(c,s,d[m],d[m+1]))return!0;return!1}function Qs(c,s,A=!1){let d=!1;for(const E of s)for(let L=0;L<E.length-1;L++){if(Vi(c,E[L],E[L+1]))return A;(w=E[L])[1]>(m=c)[1]!=(x=E[L+1])[1]>m[1]&&m[0]<(x[0]-w[0])*(m[1]-w[1])/(x[1]-w[1])+w[0]&&(d=!d)}var m,w,x;return d}function ju(c,s){for(const A of s)if(Qs(c,A))return!0;return!1}function tc(c,s){for(const A of c)if(!Qs(A,s))return!1;for(let A=0;A<c.length-1;++A)if(to(c[A],c[A+1],s))return!1;return!0}function tu(c,s){for(const A of s)if(tc(c,A))return!0;return!1}function sl(c,s,A,d){const m=d[0]-A[0],w=d[1]-A[1],x=(c[0]-A[0])*w-m*(c[1]-A[1]),E=(s[0]-A[0])*w-m*(s[1]-A[1]);return x>0&&E<0||x<0&&E>0}function cA(c,s,A){const d=[];for(let m=0;m<c.length;m++){const w=[];for(let x=0;x<c[m].length;x++){const E=hi(c[m][x],A);ii(s,E),w.push(E)}d.push(w)}return d}function rc(c,s,A){const d=[];for(let m=0;m<c.length;m++){const w=cA(c[m],s,A);d.push(w)}return d}function uA(c,s,A,d){if(c[0]<A[0]||c[0]>A[2]){const m=.5*d;let w=c[0]-A[0]>m?-d:A[0]-c[0]>m?d:0;w===0&&(w=c[0]-A[2]>m?-d:A[2]-c[0]>m?d:0),c[0]+=w}ii(s,c)}function Ki(c,s,A,d){const m=Math.pow(2,d.z)*nn,w=[d.x*nn,d.y*nn],x=[];for(const E of c)for(const L of E){const Q=[L.x+w[0],L.y+w[1]];uA(Q,s,A,m),x.push(Q)}return x}function Nl(c,s,A,d){const m=Math.pow(2,d.z)*nn,w=[d.x*nn,d.y*nn],x=[];for(const L of c){const Q=[];for(const j of L){const G=[j.x+w[0],j.y+w[1]];ii(s,G),Q.push(G)}x.push(Q)}if(s[2]-s[0]<=m/2){(E=s)[0]=E[1]=1/0,E[2]=E[3]=-1/0;for(const L of x)for(const Q of L)uA(Q,s,A,m)}var E;return x}class Mo{constructor(s,A){this.type=Vr,this.geojson=s,this.geometries=A}static parse(s,A){if(s.length!==2)return A.error(`'within' expression requires exactly one argument, but found ${s.length-1} instead.`);if(fo(s[1])){const d=s[1];if(d.type==="FeatureCollection"){const m=[];for(const w of d.features){const{type:x,coordinates:E}=w.geometry;x==="Polygon"&&m.push(E),x==="MultiPolygon"&&m.push(...E)}if(m.length)return new Mo(d,{type:"MultiPolygon",coordinates:m})}else if(d.type==="Feature"){const m=d.geometry.type;if(m==="Polygon"||m==="MultiPolygon")return new Mo(d,d.geometry)}else if(d.type==="Polygon"||d.type==="MultiPolygon")return new Mo(d,d)}return A.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(s){if(s.geometry()!=null&&s.canonicalID()!=null){if(s.geometryType()==="Point")return function(A,d){const m=[1/0,1/0,-1/0,-1/0],w=[1/0,1/0,-1/0,-1/0],x=A.canonicalID();if(d.type==="Polygon"){const E=cA(d.coordinates,w,x),L=Ki(A.geometry(),m,w,x);if(!Ri(m,w))return!1;for(const Q of L)if(!Qs(Q,E))return!1}if(d.type==="MultiPolygon"){const E=rc(d.coordinates,w,x),L=Ki(A.geometry(),m,w,x);if(!Ri(m,w))return!1;for(const Q of L)if(!ju(Q,E))return!1}return!0}(s,this.geometries);if(s.geometryType()==="LineString")return function(A,d){const m=[1/0,1/0,-1/0,-1/0],w=[1/0,1/0,-1/0,-1/0],x=A.canonicalID();if(d.type==="Polygon"){const E=cA(d.coordinates,w,x),L=Nl(A.geometry(),m,w,x);if(!Ri(m,w))return!1;for(const Q of L)if(!tc(Q,E))return!1}if(d.type==="MultiPolygon"){const E=rc(d.coordinates,w,x),L=Nl(A.geometry(),m,w,x);if(!Ri(m,w))return!1;for(const Q of L)if(!tu(Q,E))return!1}return!0}(s,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}}let hA=class{constructor(c=[],s=(A,d)=>A<d?-1:A>d?1:0){if(this.data=c,this.length=this.data.length,this.compare=s,this.length>0)for(let A=(this.length>>1)-1;A>=0;A--)this._down(A)}push(c){this.data.push(c),this._up(this.length++)}pop(){if(this.length===0)return;const c=this.data[0],s=this.data.pop();return--this.length>0&&(this.data[0]=s,this._down(0)),c}peek(){return this.data[0]}_up(c){const{data:s,compare:A}=this,d=s[c];for(;c>0;){const m=c-1>>1,w=s[m];if(A(d,w)>=0)break;s[c]=w,c=m}s[c]=d}_down(c){const{data:s,compare:A}=this,d=this.length>>1,m=s[c];for(;c<d;){let w=1+(c<<1);const x=w+1;if(x<this.length&&A(s[x],s[w])<0&&(w=x),A(s[w],m)>=0)break;s[c]=s[w],c=w}s[c]=m}};function dA(c,s,A=0,d=c.length-1,m=hd){for(;d>A;){if(d-A>600){const L=d-A+1,Q=s-A+1,j=Math.log(L),G=.5*Math.exp(2*j/3),J=.5*Math.sqrt(j*G*(L-G)/L)*(Q-L/2<0?-1:1);dA(c,s,Math.max(A,Math.floor(s-Q*G/L+J)),Math.min(d,Math.floor(s+(L-Q)*G/L+J)),m)}const w=c[s];let x=A,E=d;for(Gi(c,A,s),m(c[d],w)>0&&Gi(c,A,d);x<E;){for(Gi(c,x,E),x++,E--;m(c[x],w)<0;)x++;for(;m(c[E],w)>0;)E--}m(c[A],w)===0?Gi(c,A,E):(E++,Gi(c,E,d)),E<=s&&(A=E+1),s<=E&&(d=E-1)}}function Gi(c,s,A){const d=c[s];c[s]=c[A],c[A]=d}function hd(c,s){return c<s?-1:c>s?1:0}function Dl(c,s){if(c.length<=1)return[c];const A=[];let d,m;for(const w of c){const x=yo(w);x!==0&&(w.area=Math.abs(x),m===void 0&&(m=x<0),m===x<0?(d&&A.push(d),d=[w]):d.push(w))}if(d&&A.push(d),s>1)for(let w=0;w<A.length;w++)A[w].length<=s||(dA(A[w],s,1,A[w].length-1,Vu),A[w]=A[w].slice(0,s));return A}function Vu(c,s){return s.area-c.area}function yo(c){let s=0;for(let A,d,m=0,w=c.length,x=w-1;m<w;x=m++)A=c[m],d=c[x],s+=(d.x-A.x)*(A.y+d.y);return s}const fA=1/298.257223563,ru=fA*(2-fA),nu=Math.PI/180;class ka{constructor(s){const A=6378.137*nu*1e3,d=Math.cos(s*nu),m=1/(1-ru*(1-d*d)),w=Math.sqrt(m);this.kx=A*w*d,this.ky=A*w*m*(1-ru)}distance(s,A){const d=this.wrap(s[0]-A[0])*this.kx,m=(s[1]-A[1])*this.ky;return Math.sqrt(d*d+m*m)}pointOnLine(s,A){let d,m,w,x,E=1/0;for(let L=0;L<s.length-1;L++){let Q=s[L][0],j=s[L][1],G=this.wrap(s[L+1][0]-Q)*this.kx,J=(s[L+1][1]-j)*this.ky,ne=0;G===0&&J===0||(ne=(this.wrap(A[0]-Q)*this.kx*G+(A[1]-j)*this.ky*J)/(G*G+J*J),ne>1?(Q=s[L+1][0],j=s[L+1][1]):ne>0&&(Q+=G/this.kx*ne,j+=J/this.ky*ne)),G=this.wrap(A[0]-Q)*this.kx,J=(A[1]-j)*this.ky;const oe=G*G+J*J;oe<E&&(E=oe,d=Q,m=j,w=L,x=ne)}return{point:[d,m],index:w,t:Math.max(0,Math.min(1,x))}}wrap(s){for(;s<-180;)s+=360;for(;s>180;)s-=360;return s}}function hn(c,s){return s[0]-c[0]}function hs(c){return c[1]-c[0]+1}function di(c,s){return c[1]>=c[0]&&c[1]<s}function Ua(c,s){if(c[0]>c[1])return[null,null];const A=hs(c);if(s){if(A===2)return[c,null];const m=Math.floor(A/2);return[[c[0],c[0]+m],[c[0]+m,c[1]]]}if(A===1)return[c,null];const d=Math.floor(A/2)-1;return[[c[0],c[0]+d],[c[0]+d+1,c[1]]]}function aa(c,s){if(!di(s,c.length))return[1/0,1/0,-1/0,-1/0];const A=[1/0,1/0,-1/0,-1/0];for(let d=s[0];d<=s[1];++d)ii(A,c[d]);return A}function la(c){const s=[1/0,1/0,-1/0,-1/0];for(const A of c)for(const d of A)ii(s,d);return s}function pA(c){return c[0]!==-1/0&&c[1]!==-1/0&&c[2]!==1/0&&c[3]!==1/0}function Aa(c,s,A){if(!pA(c)||!pA(s))return NaN;let d=0,m=0;return c[2]<s[0]&&(d=s[0]-c[2]),c[0]>s[2]&&(d=c[0]-s[2]),c[1]>s[3]&&(m=c[1]-s[3]),c[3]<s[1]&&(m=s[1]-c[3]),A.distance([0,0],[d,m])}function jn(c,s,A){const d=A.pointOnLine(s,c);return A.distance(c,d.point)}function mA(c,s,A,d,m){const w=Math.min(jn(c,[A,d],m),jn(s,[A,d],m)),x=Math.min(jn(A,[c,s],m),jn(d,[c,s],m));return Math.min(w,x)}function Os(c,s,A,d,m){if(!di(s,c.length)||!di(d,A.length))return 1/0;let w=1/0;for(let x=s[0];x<s[1];++x){const E=c[x],L=c[x+1];for(let Q=d[0];Q<d[1];++Q){const j=A[Q],G=A[Q+1];if(Ds(E,L,j,G))return 0;w=Math.min(w,mA(E,L,j,G,m))}}return w}function ko(c,s,A,d,m){if(!di(s,c.length)||!di(d,A.length))return NaN;let w=1/0;for(let x=s[0];x<=s[1];++x)for(let E=d[0];E<=d[1];++E)if(w=Math.min(w,m.distance(c[x],A[E])),w===0)return w;return w}function nc(c,s,A){if(Qs(c,s,!0))return 0;let d=1/0;for(const m of s){const w=m[0],x=m[m.length-1];if(w!==x&&(d=Math.min(d,jn(c,[x,w],A)),d===0))return d;const E=A.pointOnLine(m,c);if(d=Math.min(d,A.distance(c,E.point)),d===0)return d}return d}function Ku(c,s,A,d){if(!di(s,c.length))return NaN;for(let w=s[0];w<=s[1];++w)if(Qs(c[w],A,!0))return 0;let m=1/0;for(let w=s[0];w<s[1];++w){const x=c[w],E=c[w+1];for(const L of A)for(let Q=0,j=L.length,G=j-1;Q<j;G=Q++){const J=L[G],ne=L[Q];if(Ds(x,E,J,ne))return 0;m=Math.min(m,mA(x,E,J,ne,d))}}return m}function ic(c,s){for(const A of c)for(const d of A)if(Qs(d,s,!0))return!0;return!1}function gA(c,s,A,d=1/0){const m=la(c),w=la(s);if(d!==1/0&&Aa(m,w,A)>=d)return d;if(Ri(m,w)){if(ic(c,s))return 0}else if(ic(s,c))return 0;let x=1/0;for(const E of c)for(let L=0,Q=E.length,j=Q-1;L<Q;j=L++){const G=E[j],J=E[L];for(const ne of s)for(let oe=0,pe=ne.length,Se=pe-1;oe<pe;Se=oe++){const Re=ne[Se],ot=ne[oe];if(Ds(G,J,Re,ot))return 0;x=Math.min(x,mA(G,J,Re,ot,A))}}return x}function Ql(c,s,A,d,m,w){if(!w)return;const x=Aa(aa(d,w),m,A);x<s&&c.push([x,w,[0,0]])}function ca(c,s,A,d,m,w,x){if(!w||!x)return;const E=Aa(aa(d,w),aa(m,x),A);E<s&&c.push([E,w,x])}function Ra(c,s,A,d,m=1/0){let w=Math.min(d.distance(c[0],A[0][0]),m);if(w===0)return w;const x=new hA([[0,[0,c.length-1],[0,0]]],hn),E=la(A);for(;x.length>0;){const L=x.pop();if(L[0]>=w)continue;const Q=L[1],j=s?50:100;if(hs(Q)<=j){if(!di(Q,c.length))return NaN;if(s){const G=Ku(c,Q,A,d);if(isNaN(G)||G===0)return G;w=Math.min(w,G)}else for(let G=Q[0];G<=Q[1];++G){const J=nc(c[G],A,d);if(w=Math.min(w,J),w===0)return 0}}else{const G=Ua(Q,s);Ql(x,w,d,c,E,G[0]),Ql(x,w,d,c,E,G[1])}}return w}function ol(c,s,A,d,m,w=1/0){let x=Math.min(w,m.distance(c[0],A[0]));if(x===0)return x;const E=new hA([[0,[0,c.length-1],[0,A.length-1]]],hn);for(;E.length>0;){const L=E.pop();if(L[0]>=x)continue;const Q=L[1],j=L[2],G=s?50:100,J=d?50:100;if(hs(Q)<=G&&hs(j)<=J){if(!di(Q,c.length)&&di(j,A.length))return NaN;let ne;if(s&&d)ne=Os(c,Q,A,j,m),x=Math.min(x,ne);else if(s&&!d){const oe=c.slice(Q[0],Q[1]+1);for(let pe=j[0];pe<=j[1];++pe)if(ne=jn(A[pe],oe,m),x=Math.min(x,ne),x===0)return x}else if(!s&&d){const oe=A.slice(j[0],j[1]+1);for(let pe=Q[0];pe<=Q[1];++pe)if(ne=jn(c[pe],oe,m),x=Math.min(x,ne),x===0)return x}else ne=ko(c,Q,A,j,m),x=Math.min(x,ne)}else{const ne=Ua(Q,s),oe=Ua(j,d);ca(E,x,m,c,A,ne[0],oe[0]),ca(E,x,m,c,A,ne[0],oe[1]),ca(E,x,m,c,A,ne[1],oe[0]),ca(E,x,m,c,A,ne[1],oe[1])}}return x}function al(c){return c.type==="MultiPolygon"?c.coordinates.map(s=>({type:"Polygon",coordinates:s})):c.type==="MultiLineString"?c.coordinates.map(s=>({type:"LineString",coordinates:s})):c.type==="MultiPoint"?c.coordinates.map(s=>({type:"Point",coordinates:s})):[c]}class ro{constructor(s,A){this.type=Jt,this.geojson=s,this.geometries=A}static parse(s,A){if(s.length!==2)return A.error(`'distance' expression requires exactly one argument, but found ${s.length-1} instead.`);if(fo(s[1])){const d=s[1];if(d.type==="FeatureCollection")return new ro(d,d.features.map(m=>al(m.geometry)).flat());if(d.type==="Feature")return new ro(d,al(d.geometry));if("type"in d&&"coordinates"in d)return new ro(d,al(d))}return A.error("'distance' expression requires valid geojson object that contains polygon geometry type.")}evaluate(s){if(s.geometry()!=null&&s.canonicalID()!=null){if(s.geometryType()==="Point")return function(A,d){const m=A.geometry(),w=m.flat().map(L=>ni([L.x,L.y],A.canonical));if(m.length===0)return NaN;const x=new ka(w[0][1]);let E=1/0;for(const L of d){switch(L.type){case"Point":E=Math.min(E,ol(w,!1,[L.coordinates],!1,x,E));break;case"LineString":E=Math.min(E,ol(w,!1,L.coordinates,!0,x,E));break;case"Polygon":E=Math.min(E,Ra(w,!1,L.coordinates,x,E))}if(E===0)return E}return E}(s,this.geometries);if(s.geometryType()==="LineString")return function(A,d){const m=A.geometry(),w=m.flat().map(L=>ni([L.x,L.y],A.canonical));if(m.length===0)return NaN;const x=new ka(w[0][1]);let E=1/0;for(const L of d){switch(L.type){case"Point":E=Math.min(E,ol(w,!0,[L.coordinates],!1,x,E));break;case"LineString":E=Math.min(E,ol(w,!0,L.coordinates,!0,x,E));break;case"Polygon":E=Math.min(E,Ra(w,!0,L.coordinates,x,E))}if(E===0)return E}return E}(s,this.geometries);if(s.geometryType()==="Polygon")return function(A,d){const m=A.geometry();if(m.length===0||m[0].length===0)return NaN;const w=Dl(m,0).map(L=>L.map(Q=>Q.map(j=>ni([j.x,j.y],A.canonical)))),x=new ka(w[0][0][0][1]);let E=1/0;for(const L of d)for(const Q of w){switch(L.type){case"Point":E=Math.min(E,Ra([L.coordinates],!1,Q,x,E));break;case"LineString":E=Math.min(E,Ra(L.coordinates,!0,Q,x,E));break;case"Polygon":E=Math.min(E,gA(Q,L.coordinates,x,E))}if(E===0)return E}return E}(s,this.geometries)}return NaN}eachChild(){}outputDefined(){return!0}}class ll{constructor(s){this.type=$r,this.key=s}static parse(s,A){if(s.length!==2)return A.error(`Expected 1 argument, but found ${s.length-1} instead.`);const d=s[1];return d==null?A.error("Global state property must be defined."):typeof d!="string"?A.error(`Global state property must be string, but found ${typeof s[1]} instead.`):new ll(d)}evaluate(s){var A;const d=(A=s.globals)===null||A===void 0?void 0:A.globalState;return d&&Object.keys(d).length!==0?an(d,this.key):null}eachChild(){}outputDefined(){return!1}}const ds={"==":D,"!=":ce,">":at,"<":je,">=":Ut,"<=":vt,array:ji,at:Yn,boolean:ji,case:vi,coalesce:Ui,collator:Wt,format:Mr,image:en,in:Cs,"index-of":il,interpolate:rs,"interpolate-hcl":rs,"interpolate-lab":rs,length:Wr,let:mo,literal:Ii,match:Po,number:ji,"number-format":gr,object:ji,slice:Ta,step:Pa,string:ji,"to-boolean":po,"to-color":po,"to-number":po,"to-string":po,var:go,within:Mo,distance:ro,"global-state":ll};class fi{constructor(s,A,d,m){this.name=s,this.type=A,this._evaluate=d,this.args=m}evaluate(s){return this._evaluate(s,this.args)}eachChild(s){this.args.forEach(s)}outputDefined(){return!1}static parse(s,A){const d=s[0],m=fi.definitions[d];if(!m)return A.error(`Unknown expression "${d}". If you wanted a literal array, use ["literal", [...]].`,0);const w=Array.isArray(m)?m[0]:m.type,x=Array.isArray(m)?[[m[1],m[2]]]:m.overloads,E=x.filter(([Q])=>!Array.isArray(Q)||Q.length===s.length-1);let L=null;for(const[Q,j]of E){L=new eo(A.registry,Uo,A.path,null,A.scope);const G=[];let J=!1;for(let ne=1;ne<s.length;ne++){const oe=s[ne],pe=Array.isArray(Q)?Q[ne-1]:Q.type,Se=L.parse(oe,1+G.length,pe);if(!Se){J=!0;break}G.push(Se)}if(!J)if(Array.isArray(Q)&&Q.length!==G.length)L.error(`Expected ${Q.length} arguments, but found ${G.length} instead.`);else{for(let ne=0;ne<G.length;ne++){const oe=Array.isArray(Q)?Q[ne]:Q.type,pe=G[ne];L.concat(ne+1).checkSubtype(oe,pe.type)}if(L.errors.length===0)return new fi(d,w,j,G)}}if(E.length===1)A.errors.push(...L.errors);else{const Q=(E.length?E:x).map(([G])=>{return J=G,Array.isArray(J)?`(${J.map($n).join(", ")})`:`(${$n(J.type)}...)`;var J}).join(" | "),j=[];for(let G=1;G<s.length;G++){const J=A.parse(s[G],1+j.length);if(!J)return null;j.push($n(J.type))}A.error(`Expected arguments of type ${Q}, but found (${j.join(", ")}) instead.`)}return null}static register(s,A){fi.definitions=A;for(const d in A)s[d]=fi}}function Vn(c,[s,A,d,m]){s=s.evaluate(c),A=A.evaluate(c),d=d.evaluate(c);const w=m?m.evaluate(c):1,x=Zr(s,A,d,w);if(x)throw new Rn(x);return new ln(s/255,A/255,d/255,w,!1)}function Kn(c,s){return c in s}function pi(c,s){const A=s[c];return A===void 0?null:A}function Jn(c){return{type:c}}function Uo(c){if(c instanceof go)return Uo(c.boundExpression);if(c instanceof fi&&c.name==="error"||c instanceof Wt||c instanceof Mo||c instanceof ro||c instanceof ll)return!1;const s=c instanceof po||c instanceof ji;let A=!0;return c.eachChild(d=>{A=s?A&&Uo(d):A&&d instanceof Ii}),!!A&&Ol(c)&&Al(c,["zoom","heatmap-density","elevation","line-progress","accumulated","is-supported-script"])}function Ol(c){if(c instanceof fi&&(c.name==="get"&&c.args.length===1||c.name==="feature-state"||c.name==="has"&&c.args.length===1||c.name==="properties"||c.name==="geometry-type"||c.name==="id"||/^filter-/.test(c.name))||c instanceof Mo||c instanceof ro)return!1;let s=!0;return c.eachChild(A=>{s&&!Ol(A)&&(s=!1)}),s}function Na(c){if(c instanceof fi&&c.name==="feature-state")return!1;let s=!0;return c.eachChild(A=>{s&&!Na(A)&&(s=!1)}),s}function Al(c,s){if(c instanceof fi&&s.indexOf(c.name)>=0)return!1;let A=!0;return c.eachChild(d=>{A&&!Al(d,s)&&(A=!1)}),A}function Gu(c){return{result:"success",value:c}}function cl(c){return{result:"error",value:c}}function is(c){return c["property-type"]==="data-driven"||c["property-type"]==="cross-faded-data-driven"}function no(c){return!!c.expression&&c.expression.parameters.indexOf("zoom")>-1}function sc(c){return!!c.expression&&c.expression.interpolated}function sn(c){return c instanceof Number?"number":c instanceof String?"string":c instanceof Boolean?"boolean":Array.isArray(c)?"array":c===null?"null":typeof c}function zl(c){return typeof c=="object"&&c!==null&&!Array.isArray(c)&&Tr(c)===Us}function iu(c){return c}function su(c,s){const A=c.stops&&typeof c.stops[0][0]=="object",d=A||!(A||c.property!==void 0),m=c.type||(sc(s)?"exponential":"interval"),w=function(j){switch(j.type){case"color":return ln.parse;case"padding":return Un.parse;case"numberArray":return Hi.parse;case"colorArray":return Ei.parse;default:return null}}(s);if(w&&((c=Xn({},c)).stops&&(c.stops=c.stops.map(j=>[j[0],w(j[1])])),c.default=w(c.default?c.default:s.default)),c.colorSpace&&(x=c.colorSpace)!=="rgb"&&x!=="hcl"&&x!=="lab")throw new Error(`Unknown color space: "${c.colorSpace}"`);var x;const E=function(j){switch(j){case"exponential":return $u;case"interval":return dd;case"categorical":return vf;case"identity":return ou;default:throw new Error(`Unknown function type "${j}"`)}}(m);let L,Q;if(m==="categorical"){L=Object.create(null);for(const j of c.stops)L[j[0]]=j[1];Q=typeof c.stops[0][0]}if(A){const j={},G=[];for(let oe=0;oe<c.stops.length;oe++){const pe=c.stops[oe],Se=pe[0].zoom;j[Se]===void 0&&(j[Se]={zoom:Se,type:c.type,property:c.property,default:c.default,stops:[]},G.push(Se)),j[Se].stops.push([pe[0].value,pe[1]])}const J=[];for(const oe of G)J.push([j[oe].zoom,su(j[oe],s)]);const ne={name:"linear"};return{kind:"composite",interpolationType:ne,interpolationFactor:rs.interpolationFactor.bind(void 0,ne),zoomStops:J.map(oe=>oe[0]),evaluate:({zoom:oe},pe)=>$u({stops:J,base:c.base},s,oe).evaluate(oe,pe)}}if(d){const j=m==="exponential"?{name:"exponential",base:c.base!==void 0?c.base:1}:null;return{kind:"camera",interpolationType:j,interpolationFactor:rs.interpolationFactor.bind(void 0,j),zoomStops:c.stops.map(G=>G[0]),evaluate:({zoom:G})=>E(c,s,G,L,Q)}}return{kind:"source",evaluate(j,G){const J=G&&G.properties?G.properties[c.property]:void 0;return J===void 0?yA(c.default,s.default):E(c,s,J,L,Q)}}}function yA(c,s,A){return c!==void 0?c:s!==void 0?s:A!==void 0?A:void 0}function vf(c,s,A,d,m){return yA(typeof A===m?d[A]:void 0,c.default,s.default)}function dd(c,s,A){if(sn(A)!=="number")return yA(c.default,s.default);const d=c.stops.length;if(d===1||A<=c.stops[0][0])return c.stops[0][1];if(A>=c.stops[d-1][0])return c.stops[d-1][1];const m=Ul(c.stops.map(w=>w[0]),A);return c.stops[m][1]}function $u(c,s,A){const d=c.base!==void 0?c.base:1;if(sn(A)!=="number")return yA(c.default,s.default);const m=c.stops.length;if(m===1||A<=c.stops[0][0])return c.stops[0][1];if(A>=c.stops[m-1][0])return c.stops[m-1][1];const w=Ul(c.stops.map(j=>j[0]),A),x=function(j,G,J,ne){const oe=ne-J,pe=j-J;return oe===0?0:G===1?pe/oe:(Math.pow(G,pe)-1)/(Math.pow(G,oe)-1)}(A,d,c.stops[w][0],c.stops[w+1][0]),E=c.stops[w][1],L=c.stops[w+1][1],Q=ns[s.type]||iu;return typeof E.evaluate=="function"?{evaluate(...j){const G=E.evaluate.apply(void 0,j),J=L.evaluate.apply(void 0,j);if(G!==void 0&&J!==void 0)return Q(G,J,x,c.colorSpace)}}:Q(E,L,x,c.colorSpace)}function ou(c,s,A){switch(s.type){case"color":A=ln.parse(A);break;case"formatted":A=ts.fromString(A.toString());break;case"resolvedImage":A=Bs.fromString(A.toString());break;case"padding":A=Un.parse(A);break;case"colorArray":A=Ei.parse(A);break;case"numberArray":A=Hi.parse(A);break;default:sn(A)===s.type||s.type==="enum"&&s.values[A]||(A=void 0)}return yA(A,c.default,s.default)}fi.register(ds,{error:[{kind:"error"},[Qr],(c,[s])=>{throw new Rn(s.evaluate(c))}],typeof:[Qr,[$r],(c,[s])=>$n(Tr(s.evaluate(c)))],"to-rgba":[us(Jt,4),[zi],(c,[s])=>{const[A,d,m,w]=s.evaluate(c).rgb;return[255*A,255*d,255*m,w]}],rgb:[zi,[Jt,Jt,Jt],Vn],rgba:[zi,[Jt,Jt,Jt,Jt],Vn],has:{type:Vr,overloads:[[[Qr],(c,[s])=>Kn(s.evaluate(c),c.properties())],[[Qr,Us],(c,[s,A])=>Kn(s.evaluate(c),A.evaluate(c))]]},get:{type:$r,overloads:[[[Qr],(c,[s])=>pi(s.evaluate(c),c.properties())],[[Qr,Us],(c,[s,A])=>pi(s.evaluate(c),A.evaluate(c))]]},"feature-state":[$r,[Qr],(c,[s])=>pi(s.evaluate(c),c.featureState||{})],properties:[Us,[],c=>c.properties()],"geometry-type":[Qr,[],c=>c.geometryType()],id:[$r,[],c=>c.id()],zoom:[Jt,[],c=>c.globals.zoom],"heatmap-density":[Jt,[],c=>c.globals.heatmapDensity||0],elevation:[Jt,[],c=>c.globals.elevation||0],"line-progress":[Jt,[],c=>c.globals.lineProgress||0],accumulated:[$r,[],c=>c.globals.accumulated===void 0?null:c.globals.accumulated],"+":[Jt,Jn(Jt),(c,s)=>{let A=0;for(const d of s)A+=d.evaluate(c);return A}],"*":[Jt,Jn(Jt),(c,s)=>{let A=1;for(const d of s)A*=d.evaluate(c);return A}],"-":{type:Jt,overloads:[[[Jt,Jt],(c,[s,A])=>s.evaluate(c)-A.evaluate(c)],[[Jt],(c,[s])=>-s.evaluate(c)]]},"/":[Jt,[Jt,Jt],(c,[s,A])=>s.evaluate(c)/A.evaluate(c)],"%":[Jt,[Jt,Jt],(c,[s,A])=>s.evaluate(c)%A.evaluate(c)],ln2:[Jt,[],()=>Math.LN2],pi:[Jt,[],()=>Math.PI],e:[Jt,[],()=>Math.E],"^":[Jt,[Jt,Jt],(c,[s,A])=>Math.pow(s.evaluate(c),A.evaluate(c))],sqrt:[Jt,[Jt],(c,[s])=>Math.sqrt(s.evaluate(c))],log10:[Jt,[Jt],(c,[s])=>Math.log(s.evaluate(c))/Math.LN10],ln:[Jt,[Jt],(c,[s])=>Math.log(s.evaluate(c))],log2:[Jt,[Jt],(c,[s])=>Math.log(s.evaluate(c))/Math.LN2],sin:[Jt,[Jt],(c,[s])=>Math.sin(s.evaluate(c))],cos:[Jt,[Jt],(c,[s])=>Math.cos(s.evaluate(c))],tan:[Jt,[Jt],(c,[s])=>Math.tan(s.evaluate(c))],asin:[Jt,[Jt],(c,[s])=>Math.asin(s.evaluate(c))],acos:[Jt,[Jt],(c,[s])=>Math.acos(s.evaluate(c))],atan:[Jt,[Jt],(c,[s])=>Math.atan(s.evaluate(c))],min:[Jt,Jn(Jt),(c,s)=>Math.min(...s.map(A=>A.evaluate(c)))],max:[Jt,Jn(Jt),(c,s)=>Math.max(...s.map(A=>A.evaluate(c)))],abs:[Jt,[Jt],(c,[s])=>Math.abs(s.evaluate(c))],round:[Jt,[Jt],(c,[s])=>{const A=s.evaluate(c);return A<0?-Math.round(-A):Math.round(A)}],floor:[Jt,[Jt],(c,[s])=>Math.floor(s.evaluate(c))],ceil:[Jt,[Jt],(c,[s])=>Math.ceil(s.evaluate(c))],"filter-==":[Vr,[Qr,$r],(c,[s,A])=>c.properties()[s.value]===A.value],"filter-id-==":[Vr,[$r],(c,[s])=>c.id()===s.value],"filter-type-==":[Vr,[Qr],(c,[s])=>c.geometryType()===s.value],"filter-<":[Vr,[Qr,$r],(c,[s,A])=>{const d=c.properties()[s.value],m=A.value;return typeof d==typeof m&&d<m}],"filter-id-<":[Vr,[$r],(c,[s])=>{const A=c.id(),d=s.value;return typeof A==typeof d&&A<d}],"filter->":[Vr,[Qr,$r],(c,[s,A])=>{const d=c.properties()[s.value],m=A.value;return typeof d==typeof m&&d>m}],"filter-id->":[Vr,[$r],(c,[s])=>{const A=c.id(),d=s.value;return typeof A==typeof d&&A>d}],"filter-<=":[Vr,[Qr,$r],(c,[s,A])=>{const d=c.properties()[s.value],m=A.value;return typeof d==typeof m&&d<=m}],"filter-id-<=":[Vr,[$r],(c,[s])=>{const A=c.id(),d=s.value;return typeof A==typeof d&&A<=d}],"filter->=":[Vr,[Qr,$r],(c,[s,A])=>{const d=c.properties()[s.value],m=A.value;return typeof d==typeof m&&d>=m}],"filter-id->=":[Vr,[$r],(c,[s])=>{const A=c.id(),d=s.value;return typeof A==typeof d&&A>=d}],"filter-has":[Vr,[$r],(c,[s])=>s.value in c.properties()],"filter-has-id":[Vr,[],c=>c.id()!==null&&c.id()!==void 0],"filter-type-in":[Vr,[us(Qr)],(c,[s])=>s.value.indexOf(c.geometryType())>=0],"filter-id-in":[Vr,[us($r)],(c,[s])=>s.value.indexOf(c.id())>=0],"filter-in-small":[Vr,[Qr,us($r)],(c,[s,A])=>A.value.indexOf(c.properties()[s.value])>=0],"filter-in-large":[Vr,[Qr,us($r)],(c,[s,A])=>function(d,m,w,x){for(;w<=x;){const E=w+x>>1;if(m[E]===d)return!0;m[E]>d?x=E-1:w=E+1}return!1}(c.properties()[s.value],A.value,0,A.value.length-1)],all:{type:Vr,overloads:[[[Vr,Vr],(c,[s,A])=>s.evaluate(c)&&A.evaluate(c)],[Jn(Vr),(c,s)=>{for(const A of s)if(!A.evaluate(c))return!1;return!0}]]},any:{type:Vr,overloads:[[[Vr,Vr],(c,[s,A])=>s.evaluate(c)||A.evaluate(c)],[Jn(Vr),(c,s)=>{for(const A of s)if(A.evaluate(c))return!0;return!1}]]},"!":[Vr,[Vr],(c,[s])=>!s.evaluate(c)],"is-supported-script":[Vr,[Qr],(c,[s])=>{const A=c.globals&&c.globals.isSupportedScript;return!A||A(s.evaluate(c))}],upcase:[Qr,[Qr],(c,[s])=>s.evaluate(c).toUpperCase()],downcase:[Qr,[Qr],(c,[s])=>s.evaluate(c).toLowerCase()],concat:[Qr,Jn($r),(c,s)=>s.map(A=>nl(A.evaluate(c))).join("")],"resolved-locale":[Qr,[Xs],(c,[s])=>s.evaluate(c).resolvedLocale()]});class oc{constructor(s,A){this.expression=s,this._warningHistory={},this._evaluator=new Yc,this._defaultValue=A?function(d){if(d.type==="color"&&zl(d.default))return new ln(0,0,0,0);switch(d.type){case"color":return ln.parse(d.default)||null;case"padding":return Un.parse(d.default)||null;case"numberArray":return Hi.parse(d.default)||null;case"colorArray":return Ei.parse(d.default)||null;case"variableAnchorOffsetCollection":return An.parse(d.default)||null;case"projectionDefinition":return Gr.parse(d.default)||null;default:return d.default===void 0?null:d.default}}(A):null,this._enumValues=A&&A.type==="enum"?A.values:null}evaluateWithoutErrorHandling(s,A,d,m,w,x){return this._evaluator.globals=s,this._evaluator.feature=A,this._evaluator.featureState=d,this._evaluator.canonical=m,this._evaluator.availableImages=w||null,this._evaluator.formattedSection=x,this.expression.evaluate(this._evaluator)}evaluate(s,A,d,m,w,x){this._evaluator.globals=s,this._evaluator.feature=A||null,this._evaluator.featureState=d||null,this._evaluator.canonical=m,this._evaluator.availableImages=w||null,this._evaluator.formattedSection=x||null;try{const E=this.expression.evaluate(this._evaluator);if(E==null||typeof E=="number"&&E!=E)return this._defaultValue;if(this._enumValues&&!(E in this._enumValues))throw new Rn(`Expected value to be one of ${Object.keys(this._enumValues).map(L=>JSON.stringify(L)).join(", ")}, but found ${JSON.stringify(E)} instead.`);return E}catch(E){return this._warningHistory[E.message]||(this._warningHistory[E.message]=!0,typeof console<"u"&&console.warn(E.message)),this._defaultValue}}}function qu(c){return Array.isArray(c)&&c.length>0&&typeof c[0]=="string"&&c[0]in ds}function Zu(c,s){const A=new eo(ds,Uo,[],s?function(m){const w={color:zi,string:Qr,number:Jt,enum:Qr,boolean:Vr,formatted:Ca,padding:ui,numberArray:Sa,colorArray:iA,projectionDefinition:Ja,resolvedImage:Fo,variableAnchorOffsetCollection:sA};return m.type==="array"?us(w[m.value]||$r,m.length):w[m.type]}(s):void 0),d=A.parse(c,void 0,void 0,void 0,s&&s.type==="string"?{typeAnnotation:"coerce"}:void 0);return d?Gu(new oc(d,s)):cl(A.errors)}class ac{constructor(s,A){this.kind=s,this._styleExpression=A,this.isStateDependent=s!=="constant"&&!Na(A.expression),this.globalStateRefs=Ac(A.expression)}evaluateWithoutErrorHandling(s,A,d,m,w,x){return this._styleExpression.evaluateWithoutErrorHandling(s,A,d,m,w,x)}evaluate(s,A,d,m,w,x){return this._styleExpression.evaluate(s,A,d,m,w,x)}}class Wu{constructor(s,A,d,m){this.kind=s,this.zoomStops=d,this._styleExpression=A,this.isStateDependent=s!=="camera"&&!Na(A.expression),this.globalStateRefs=Ac(A.expression),this.interpolationType=m}evaluateWithoutErrorHandling(s,A,d,m,w,x){return this._styleExpression.evaluateWithoutErrorHandling(s,A,d,m,w,x)}evaluate(s,A,d,m,w,x){return this._styleExpression.evaluate(s,A,d,m,w,x)}interpolationFactor(s,A,d){return this.interpolationType?rs.interpolationFactor(this.interpolationType,s,A,d):0}}function fd(c,s){const A=Zu(c,s);if(A.result==="error")return A;const d=A.value.expression,m=Ol(d);if(!m&&!is(s))return cl([new Bn("","data expressions not supported")]);const w=Al(d,["zoom"]);if(!w&&!no(s))return cl([new Bn("","zoom expressions not supported")]);const x=lc(d);return x||w?x instanceof Bn?cl([x]):x instanceof rs&&!sc(s)?cl([new Bn("",'"interpolate" expressions cannot be used with this property')]):Gu(x?new Wu(m?"camera":"composite",A.value,x.labels,x instanceof rs?x.interpolation:void 0):new ac(m?"constant":"source",A.value)):cl([new Bn("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class au{constructor(s,A){this._parameters=s,this._specification=A,Xn(this,su(this._parameters,this._specification))}static deserialize(s){return new au(s._parameters,s._specification)}static serialize(s){return{_parameters:s._parameters,_specification:s._specification}}}function lc(c){let s=null;if(c instanceof mo)s=lc(c.result);else if(c instanceof Ui){for(const A of c.args)if(s=lc(A),s)break}else(c instanceof Pa||c instanceof rs)&&c.input instanceof fi&&c.input.name==="zoom"&&(s=c);return s instanceof Bn||c.eachChild(A=>{const d=lc(A);d instanceof Bn?s=d:!s&&d?s=new Bn("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):s&&d&&s!==d&&(s=new Bn("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),s}function Ac(c,s=new Set){return c instanceof ll&&s.add(c.key),c.eachChild(A=>{Ac(A,s)}),s}function vA(c){if(c===!0||c===!1)return!0;if(!Array.isArray(c)||c.length===0)return!1;switch(c[0]){case"has":return c.length>=2&&c[1]!=="$id"&&c[1]!=="$type";case"in":return c.length>=3&&(typeof c[1]!="string"||Array.isArray(c[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return c.length!==3||Array.isArray(c[1])||Array.isArray(c[2]);case"any":case"all":for(const s of c.slice(1))if(!vA(s)&&typeof s!="boolean")return!1;return!0;default:return!0}}const lu={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function Ro(c){if(c==null)return{filter:()=>!0,needGeometry:!1,getGlobalStateRefs:()=>new Set};vA(c)||(c=Au(c));const s=Zu(c,lu);if(s.result==="error")throw new Error(s.value.map(A=>`${A.key}: ${A.message}`).join(", "));return{filter:(A,d,m)=>s.value.evaluate(A,d,{},m),needGeometry:_f(c),getGlobalStateRefs:()=>Ac(s.value.expression)}}function gm(c,s){return c<s?-1:c>s?1:0}function _f(c){if(!Array.isArray(c))return!1;if(c[0]==="within"||c[0]==="distance")return!0;for(let s=1;s<c.length;s++)if(_f(c[s]))return!0;return!1}function Au(c){if(!c)return!0;const s=c[0];return c.length<=1?s!=="any":s==="=="?pd(c[1],c[2],"=="):s==="!="?cu(pd(c[1],c[2],"==")):s==="<"||s===">"||s==="<="||s===">="?pd(c[1],c[2],s):s==="any"?(A=c.slice(1),["any"].concat(A.map(Au))):s==="all"?["all"].concat(c.slice(1).map(Au)):s==="none"?["all"].concat(c.slice(1).map(Au).map(cu)):s==="in"?wf(c[1],c.slice(2)):s==="!in"?cu(wf(c[1],c.slice(2))):s==="has"?xf(c[1]):s!=="!has"||cu(xf(c[1]));var A}function pd(c,s,A){switch(c){case"$type":return[`filter-type-${A}`,s];case"$id":return[`filter-id-${A}`,s];default:return[`filter-${A}`,c,s]}}function wf(c,s){if(s.length===0)return!1;switch(c){case"$type":return["filter-type-in",["literal",s]];case"$id":return["filter-id-in",["literal",s]];default:return s.length>200&&!s.some(A=>typeof A!=typeof s[0])?["filter-in-large",c,["literal",s.sort(gm)]]:["filter-in-small",c,["literal",s]]}}function xf(c){switch(c){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",c]}}function cu(c){return["!",c]}function ua(c){const s=typeof c;if(s==="number"||s==="boolean"||s==="string"||c==null)return JSON.stringify(c);if(Array.isArray(c)){let m="[";for(const w of c)m+=`${ua(w)},`;return`${m}]`}const A=Object.keys(c).sort();let d="{";for(let m=0;m<A.length;m++)d+=`${JSON.stringify(A[m])}:${ua(c[A[m]])},`;return`${d}}`}function io(c){let s="";for(const A of Nt)s+=`/${ua(c[A])}`;return s}function Da(c){const s=c.value;return s?[new Yt(c.key,s,"constants have been deprecated as of v8")]:[]}function mi(c){return c instanceof Number||c instanceof String||c instanceof Boolean?c.valueOf():c}function ul(c){if(Array.isArray(c))return c.map(ul);if(c instanceof Object&&!(c instanceof Number||c instanceof String||c instanceof Boolean)){const s={};for(const A in c)s[A]=ul(c[A]);return s}return mi(c)}function $i(c){const s=c.key,A=c.value,d=c.valueSpec||{},m=c.objectElementValidators||{},w=c.style,x=c.styleSpec,E=c.validateSpec;let L=[];const Q=sn(A);if(Q!=="object")return[new Yt(s,A,`object expected, ${Q} found`)];for(const j in A){const G=j.split(".")[0],J=an(d,G)||d["*"];let ne;if(an(m,G))ne=m[G];else if(an(d,G))ne=E;else if(m["*"])ne=m["*"];else{if(!d["*"]){L.push(new Yt(s,A[j],`unknown property "${j}"`));continue}ne=E}L=L.concat(ne({key:(s&&`${s}.`)+j,value:A[j],valueSpec:J,style:w,styleSpec:x,object:A,objectKey:j,validateSpec:E},A))}for(const j in d)m[j]||d[j].required&&d[j].default===void 0&&A[j]===void 0&&L.push(new Yt(s,A,`missing required property "${j}"`));return L}function zs(c){const s=c.value,A=c.valueSpec,d=c.style,m=c.styleSpec,w=c.key,x=c.arrayElementValidator||c.validateSpec;if(sn(s)!=="array")return[new Yt(w,s,`array expected, ${sn(s)} found`)];if(A.length&&s.length!==A.length)return[new Yt(w,s,`array length ${A.length} expected, length ${s.length} found`)];if(A["min-length"]&&s.length<A["min-length"])return[new Yt(w,s,`array length at least ${A["min-length"]} expected, length ${s.length} found`)];let E={type:A.value,values:A.values};m.$version<7&&(E.function=A.function),sn(A.value)==="object"&&(E=A.value);let L=[];for(let Q=0;Q<s.length;Q++)L=L.concat(x({array:s,arrayIndex:Q,value:s[Q],valueSpec:E,validateSpec:c.validateSpec,style:d,styleSpec:m,key:`${w}[${Q}]`}));return L}function uu(c){const s=c.key,A=c.value,d=c.valueSpec;let m=sn(A);return m==="number"&&A!=A&&(m="NaN"),m!=="number"?[new Yt(s,A,`number expected, ${m} found`)]:"minimum"in d&&A<d.minimum?[new Yt(s,A,`${A} is less than the minimum value ${d.minimum}`)]:"maximum"in d&&A>d.maximum?[new Yt(s,A,`${A} is greater than the maximum value ${d.maximum}`)]:[]}function cc(c){const s=c.valueSpec,A=mi(c.value.type);let d,m,w,x={};const E=A!=="categorical"&&c.value.property===void 0,L=!E,Q=sn(c.value.stops)==="array"&&sn(c.value.stops[0])==="array"&&sn(c.value.stops[0][0])==="object",j=$i({key:c.key,value:c.value,valueSpec:c.styleSpec.function,validateSpec:c.validateSpec,style:c.style,styleSpec:c.styleSpec,objectElementValidators:{stops:function(ne){if(A==="identity")return[new Yt(ne.key,ne.value,'identity function may not have a "stops" property')];let oe=[];const pe=ne.value;return oe=oe.concat(zs({key:ne.key,value:pe,valueSpec:ne.valueSpec,validateSpec:ne.validateSpec,style:ne.style,styleSpec:ne.styleSpec,arrayElementValidator:G})),sn(pe)==="array"&&pe.length===0&&oe.push(new Yt(ne.key,pe,"array must have at least one stop")),oe},default:function(ne){return ne.validateSpec({key:ne.key,value:ne.value,valueSpec:s,validateSpec:ne.validateSpec,style:ne.style,styleSpec:ne.styleSpec})}}});return A==="identity"&&E&&j.push(new Yt(c.key,c.value,'missing required property "property"')),A==="identity"||c.value.stops||j.push(new Yt(c.key,c.value,'missing required property "stops"')),A==="exponential"&&c.valueSpec.expression&&!sc(c.valueSpec)&&j.push(new Yt(c.key,c.value,"exponential functions not supported")),c.styleSpec.$version>=8&&(L&&!is(c.valueSpec)?j.push(new Yt(c.key,c.value,"property functions not supported")):E&&!no(c.valueSpec)&&j.push(new Yt(c.key,c.value,"zoom functions not supported"))),A!=="categorical"&&!Q||c.value.property!==void 0||j.push(new Yt(c.key,c.value,'"property" property is required')),j;function G(ne){let oe=[];const pe=ne.value,Se=ne.key;if(sn(pe)!=="array")return[new Yt(Se,pe,`array expected, ${sn(pe)} found`)];if(pe.length!==2)return[new Yt(Se,pe,`array length 2 expected, length ${pe.length} found`)];if(Q){if(sn(pe[0])!=="object")return[new Yt(Se,pe,`object expected, ${sn(pe[0])} found`)];if(pe[0].zoom===void 0)return[new Yt(Se,pe,"object stop key must have zoom")];if(pe[0].value===void 0)return[new Yt(Se,pe,"object stop key must have value")];if(w&&w>mi(pe[0].zoom))return[new Yt(Se,pe[0].zoom,"stop zoom values must appear in ascending order")];mi(pe[0].zoom)!==w&&(w=mi(pe[0].zoom),m=void 0,x={}),oe=oe.concat($i({key:`${Se}[0]`,value:pe[0],valueSpec:{zoom:{}},validateSpec:ne.validateSpec,style:ne.style,styleSpec:ne.styleSpec,objectElementValidators:{zoom:uu,value:J}}))}else oe=oe.concat(J({key:`${Se}[0]`,value:pe[0],validateSpec:ne.validateSpec,style:ne.style,styleSpec:ne.styleSpec},pe));return qu(ul(pe[1]))?oe.concat([new Yt(`${Se}[1]`,pe[1],"expressions are not allowed in function stops.")]):oe.concat(ne.validateSpec({key:`${Se}[1]`,value:pe[1],valueSpec:s,validateSpec:ne.validateSpec,style:ne.style,styleSpec:ne.styleSpec}))}function J(ne,oe){const pe=sn(ne.value),Se=mi(ne.value),Re=ne.value!==null?ne.value:oe;if(d){if(pe!==d)return[new Yt(ne.key,Re,`${pe} stop domain type must match previous stop domain type ${d}`)]}else d=pe;if(pe!=="number"&&pe!=="string"&&pe!=="boolean")return[new Yt(ne.key,Re,"stop domain value must be a number, string, or boolean")];if(pe!=="number"&&A!=="categorical"){let ot=`number expected, ${pe} found`;return is(s)&&A===void 0&&(ot+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new Yt(ne.key,Re,ot)]}return A!=="categorical"||pe!=="number"||isFinite(Se)&&Math.floor(Se)===Se?A!=="categorical"&&pe==="number"&&m!==void 0&&Se<m?[new Yt(ne.key,Re,"stop domain values must appear in ascending order")]:(m=Se,A==="categorical"&&Se in x?[new Yt(ne.key,Re,"stop domain values must be unique")]:(x[Se]=!0,[])):[new Yt(ne.key,Re,`integer expected, found ${Se}`)]}}function _A(c){const s=(c.expressionContext==="property"?fd:Zu)(ul(c.value),c.valueSpec);if(s.result==="error")return s.value.map(d=>new Yt(`${c.key}${d.key}`,c.value,d.message));const A=s.value.expression||s.value._styleExpression.expression;if(c.expressionContext==="property"&&c.propertyKey==="text-font"&&!A.outputDefined())return[new Yt(c.key,c.value,`Invalid data expression for "${c.propertyKey}". Output values must be contained as literals within the expression.`)];if(c.expressionContext==="property"&&c.propertyType==="layout"&&!Na(A))return[new Yt(c.key,c.value,'"feature-state" data expressions are not supported with layout properties.')];if(c.expressionContext==="filter"&&!Na(A))return[new Yt(c.key,c.value,'"feature-state" data expressions are not supported with filters.')];if(c.expressionContext&&c.expressionContext.indexOf("cluster")===0){if(!Al(A,["zoom","feature-state"]))return[new Yt(c.key,c.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(c.expressionContext==="cluster-initial"&&!Ol(A))return[new Yt(c.key,c.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function Xu(c){const s=c.key,A=c.value,d=sn(A);return d!=="string"?[new Yt(s,A,`color expected, ${d} found`)]:ln.parse(String(A))?[]:[new Yt(s,A,`color expected, "${A}" found`)]}function uc(c){const s=c.key,A=c.value,d=c.valueSpec,m=[];return Array.isArray(d.values)?d.values.indexOf(mi(A))===-1&&m.push(new Yt(s,A,`expected one of [${d.values.join(", ")}], ${JSON.stringify(A)} found`)):Object.keys(d.values).indexOf(mi(A))===-1&&m.push(new Yt(s,A,`expected one of [${Object.keys(d.values).join(", ")}], ${JSON.stringify(A)} found`)),m}function Yu(c){return vA(ul(c.value))?_A(Xn({},c,{expressionContext:"filter",valueSpec:{value:"boolean"}})):bf(c)}function bf(c){const s=c.value,A=c.key;if(sn(s)!=="array")return[new Yt(A,s,`array expected, ${sn(s)} found`)];const d=c.styleSpec;let m,w=[];if(s.length<1)return[new Yt(A,s,"filter array must have at least 1 element")];switch(w=w.concat(uc({key:`${A}[0]`,value:s[0],valueSpec:d.filter_operator,style:c.style,styleSpec:c.styleSpec})),mi(s[0])){case"<":case"<=":case">":case">=":s.length>=2&&mi(s[1])==="$type"&&w.push(new Yt(A,s,`"$type" cannot be use with operator "${s[0]}"`));case"==":case"!=":s.length!==3&&w.push(new Yt(A,s,`filter array for operator "${s[0]}" must have 3 elements`));case"in":case"!in":s.length>=2&&(m=sn(s[1]),m!=="string"&&w.push(new Yt(`${A}[1]`,s[1],`string expected, ${m} found`)));for(let x=2;x<s.length;x++)m=sn(s[x]),mi(s[1])==="$type"?w=w.concat(uc({key:`${A}[${x}]`,value:s[x],valueSpec:d.geometry_type,style:c.style,styleSpec:c.styleSpec})):m!=="string"&&m!=="number"&&m!=="boolean"&&w.push(new Yt(`${A}[${x}]`,s[x],`string, number, or boolean expected, ${m} found`));break;case"any":case"all":case"none":for(let x=1;x<s.length;x++)w=w.concat(bf({key:`${A}[${x}]`,value:s[x],style:c.style,styleSpec:c.styleSpec}));break;case"has":case"!has":m=sn(s[1]),s.length!==2?w.push(new Yt(A,s,`filter array for "${s[0]}" operator must have 2 elements`)):m!=="string"&&w.push(new Yt(`${A}[1]`,s[1],`string expected, ${m} found`))}return w}function hu(c,s){const A=c.key,d=c.validateSpec,m=c.style,w=c.styleSpec,x=c.value,E=c.objectKey,L=w[`${s}_${c.layerType}`];if(!L)return[];const Q=E.match(/^(.*)-transition$/);if(s==="paint"&&Q&&L[Q[1]]&&L[Q[1]].transition)return d({key:A,value:x,valueSpec:w.transition,style:m,styleSpec:w});const j=c.valueSpec||L[E];if(!j)return[new Yt(A,x,`unknown property "${E}"`)];let G;if(sn(x)==="string"&&is(j)&&!j.tokens&&(G=/^{([^}]+)}$/.exec(x)))return[new Yt(A,x,`"${E}" does not support interpolation syntax
Use an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(G[1])} }\`.`)];const J=[];return c.layerType==="symbol"&&(E==="text-field"&&m&&!m.glyphs&&J.push(new Yt(A,x,'use of "text-field" requires a style "glyphs" property')),E==="text-font"&&zl(ul(x))&&mi(x.type)==="identity"&&J.push(new Yt(A,x,'"text-font" does not support identity functions'))),J.concat(d({key:c.key,value:x,valueSpec:j,style:m,styleSpec:w,expressionContext:"property",propertyType:s,propertyKey:E}))}function hl(c){return hu(c,"paint")}function Qa(c){return hu(c,"layout")}function Ss(c){let s=[];const A=c.value,d=c.key,m=c.style,w=c.styleSpec;if(sn(A)!=="object")return[new Yt(d,A,`object expected, ${sn(A)} found`)];A.type||A.ref||s.push(new Yt(d,A,'either "type" or "ref" is required'));let x=mi(A.type);const E=mi(A.ref);if(A.id){const L=mi(A.id);for(let Q=0;Q<c.arrayIndex;Q++){const j=m.layers[Q];mi(j.id)===L&&s.push(new Yt(d,A.id,`duplicate layer id "${A.id}", previously used at line ${j.id.__line__}`))}}if("ref"in A){let L;["type","source","source-layer","filter","layout"].forEach(Q=>{Q in A&&s.push(new Yt(d,A[Q],`"${Q}" is prohibited for ref layers`))}),m.layers.forEach(Q=>{mi(Q.id)===E&&(L=Q)}),L?L.ref?s.push(new Yt(d,A.ref,"ref cannot reference another ref layer")):x=mi(L.type):s.push(new Yt(d,A.ref,`ref layer "${E}" not found`))}else if(x!=="background")if(A.source){const L=m.sources&&m.sources[A.source],Q=L&&mi(L.type);L?Q==="vector"&&x==="raster"?s.push(new Yt(d,A.source,`layer "${A.id}" requires a raster source`)):Q!=="raster-dem"&&x==="hillshade"||Q!=="raster-dem"&&x==="color-relief"?s.push(new Yt(d,A.source,`layer "${A.id}" requires a raster-dem source`)):Q==="raster"&&x!=="raster"?s.push(new Yt(d,A.source,`layer "${A.id}" requires a vector source`)):Q!=="vector"||A["source-layer"]?Q==="raster-dem"&&x!=="hillshade"&&x!=="color-relief"?s.push(new Yt(d,A.source,"raster-dem source can only be used with layer type 'hillshade' or 'color-relief'.")):x!=="line"||!A.paint||!A.paint["line-gradient"]||Q==="geojson"&&L.lineMetrics||s.push(new Yt(d,A,`layer "${A.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):s.push(new Yt(d,A,`layer "${A.id}" must specify a "source-layer"`)):s.push(new Yt(d,A.source,`source "${A.source}" not found`))}else s.push(new Yt(d,A,'missing required property "source"'));return s=s.concat($i({key:d,value:A,valueSpec:w.layer,style:c.style,styleSpec:c.styleSpec,validateSpec:c.validateSpec,objectElementValidators:{"*":()=>[],type:()=>c.validateSpec({key:`${d}.type`,value:A.type,valueSpec:w.layer.type,style:c.style,styleSpec:c.styleSpec,validateSpec:c.validateSpec,object:A,objectKey:"type"}),filter:Yu,layout:L=>$i({layer:A,key:L.key,value:L.value,style:L.style,styleSpec:L.styleSpec,validateSpec:L.validateSpec,objectElementValidators:{"*":Q=>Qa(Xn({layerType:x},Q))}}),paint:L=>$i({layer:A,key:L.key,value:L.value,style:L.style,styleSpec:L.styleSpec,validateSpec:L.validateSpec,objectElementValidators:{"*":Q=>hl(Xn({layerType:x},Q))}})}})),s}function ha(c){const s=c.value,A=c.key,d=sn(s);return d!=="string"?[new Yt(A,s,`string expected, ${d} found`)]:[]}const Ju={promoteId:function({key:c,value:s}){if(sn(s)==="string")return ha({key:c,value:s});{const A=[];for(const d in s)A.push(...ha({key:`${c}.${d}`,value:s[d]}));return A}}};function Bf(c){const s=c.value,A=c.key,d=c.styleSpec,m=c.style,w=c.validateSpec;if(!s.type)return[new Yt(A,s,'"type" is required')];const x=mi(s.type);let E;switch(x){case"vector":case"raster":return E=$i({key:A,value:s,valueSpec:d[`source_${x.replace("-","_")}`],style:c.style,styleSpec:d,objectElementValidators:Ju,validateSpec:w}),E;case"raster-dem":return E=function(L){var Q;const j=(Q=L.sourceName)!==null&&Q!==void 0?Q:"",G=L.value,J=L.styleSpec,ne=J.source_raster_dem,oe=L.style;let pe=[];const Se=sn(G);if(G===void 0)return pe;if(Se!=="object")return pe.push(new Yt("source_raster_dem",G,`object expected, ${Se} found`)),pe;const Re=mi(G.encoding)==="custom",ot=["redFactor","greenFactor","blueFactor","baseShift"],Ke=L.value.encoding?`"${L.value.encoding}"`:"Default";for(const ee in G)!Re&&ot.includes(ee)?pe.push(new Yt(ee,G[ee],`In "${j}": "${ee}" is only valid when "encoding" is set to "custom". ${Ke} encoding found`)):ne[ee]?pe=pe.concat(L.validateSpec({key:ee,value:G[ee],valueSpec:ne[ee],validateSpec:L.validateSpec,style:oe,styleSpec:J})):pe.push(new Yt(ee,G[ee],`unknown property "${ee}"`));return pe}({sourceName:A,value:s,style:c.style,styleSpec:d,validateSpec:w}),E;case"geojson":if(E=$i({key:A,value:s,valueSpec:d.source_geojson,style:m,styleSpec:d,validateSpec:w,objectElementValidators:Ju}),s.cluster)for(const L in s.clusterProperties){const[Q,j]=s.clusterProperties[L],G=typeof Q=="string"?[Q,["accumulated"],["get",L]]:Q;E.push(..._A({key:`${A}.${L}.map`,value:j,expressionContext:"cluster-map"})),E.push(..._A({key:`${A}.${L}.reduce`,value:G,expressionContext:"cluster-reduce"}))}return E;case"video":return $i({key:A,value:s,valueSpec:d.source_video,style:m,validateSpec:w,styleSpec:d});case"image":return $i({key:A,value:s,valueSpec:d.source_image,style:m,validateSpec:w,styleSpec:d});case"canvas":return[new Yt(A,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return uc({key:`${A}.type`,value:s.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]}})}}function Cf(c){const s=c.value,A=c.styleSpec,d=A.light,m=c.style;let w=[];const x=sn(s);if(s===void 0)return w;if(x!=="object")return w=w.concat([new Yt("light",s,`object expected, ${x} found`)]),w;for(const E in s){const L=E.match(/^(.*)-transition$/);w=w.concat(L&&d[L[1]]&&d[L[1]].transition?c.validateSpec({key:E,value:s[E],valueSpec:A.transition,validateSpec:c.validateSpec,style:m,styleSpec:A}):d[E]?c.validateSpec({key:E,value:s[E],valueSpec:d[E],validateSpec:c.validateSpec,style:m,styleSpec:A}):[new Yt(E,s[E],`unknown property "${E}"`)])}return w}function hc(c){const s=c.value,A=c.styleSpec,d=A.sky,m=c.style,w=sn(s);if(s===void 0)return[];if(w!=="object")return[new Yt("sky",s,`object expected, ${w} found`)];let x=[];for(const E in s)x=x.concat(d[E]?c.validateSpec({key:E,value:s[E],valueSpec:d[E],style:m,styleSpec:A}):[new Yt(E,s[E],`unknown property "${E}"`)]);return x}function md(c){const s=c.value,A=c.styleSpec,d=A.terrain,m=c.style;let w=[];const x=sn(s);if(s===void 0)return w;if(x!=="object")return w=w.concat([new Yt("terrain",s,`object expected, ${x} found`)]),w;for(const E in s)w=w.concat(d[E]?c.validateSpec({key:E,value:s[E],valueSpec:d[E],validateSpec:c.validateSpec,style:m,styleSpec:A}):[new Yt(E,s[E],`unknown property "${E}"`)]);return w}function eh(c){let s=[];const A=c.value,d=c.key;if(Array.isArray(A)){const m=[],w=[];for(const x in A)A[x].id&&m.includes(A[x].id)&&s.push(new Yt(d,A,`all the sprites' ids must be unique, but ${A[x].id} is duplicated`)),m.push(A[x].id),A[x].url&&w.includes(A[x].url)&&s.push(new Yt(d,A,`all the sprites' URLs must be unique, but ${A[x].url} is duplicated`)),w.push(A[x].url),s=s.concat($i({key:`${d}[${x}]`,value:A[x],valueSpec:{id:{type:"string",required:!0},url:{type:"string",required:!0}},validateSpec:c.validateSpec}));return s}return ha({key:d,value:A})}function Sf(c){return s=c.value,s&&s.constructor===Object?[]:[new Yt(c.key,c.value,`object expected, ${sn(c.value)} found`)];var s}const du={"*":()=>[],array:zs,boolean:function(c){const s=c.value,A=c.key,d=sn(s);return d!=="boolean"?[new Yt(A,s,`boolean expected, ${d} found`)]:[]},number:uu,color:Xu,constants:Da,enum:uc,filter:Yu,function:cc,layer:Ss,object:$i,source:Bf,light:Cf,sky:hc,terrain:md,projection:function(c){const s=c.value,A=c.styleSpec,d=A.projection,m=c.style,w=sn(s);if(s===void 0)return[];if(w!=="object")return[new Yt("projection",s,`object expected, ${w} found`)];let x=[];for(const E in s)x=x.concat(d[E]?c.validateSpec({key:E,value:s[E],valueSpec:d[E],style:m,styleSpec:A}):[new Yt(E,s[E],`unknown property "${E}"`)]);return x},projectionDefinition:function(c){const s=c.key;let A=c.value;A=A instanceof String?A.valueOf():A;const d=sn(A);return d!=="array"||function(m){return Array.isArray(m)&&m.length===3&&typeof m[0]=="string"&&typeof m[1]=="string"&&typeof m[2]=="number"}(A)||function(m){return!!["interpolate","step","literal"].includes(m[0])}(A)?["array","string"].includes(d)?[]:[new Yt(s,A,`projection expected, invalid type "${d}" found`)]:[new Yt(s,A,`projection expected, invalid array ${JSON.stringify(A)} found`)]},string:ha,formatted:function(c){return ha(c).length===0?[]:_A(c)},resolvedImage:function(c){return ha(c).length===0?[]:_A(c)},padding:function(c){const s=c.key,A=c.value;if(sn(A)==="array"){if(A.length<1||A.length>4)return[new Yt(s,A,`padding requires 1 to 4 values; ${A.length} values found`)];const d={type:"number"};let m=[];for(let w=0;w<A.length;w++)m=m.concat(c.validateSpec({key:`${s}[${w}]`,value:A[w],validateSpec:c.validateSpec,valueSpec:d}));return m}return uu({key:s,value:A,valueSpec:{}})},numberArray:function(c){const s=c.key,A=c.value;if(sn(A)==="array"){const d={type:"number"};if(A.length<1)return[new Yt(s,A,"array length at least 1 expected, length 0 found")];let m=[];for(let w=0;w<A.length;w++)m=m.concat(c.validateSpec({key:`${s}[${w}]`,value:A[w],validateSpec:c.validateSpec,valueSpec:d}));return m}return uu({key:s,value:A,valueSpec:{}})},colorArray:function(c){const s=c.key,A=c.value;if(sn(A)==="array"){if(A.length<1)return[new Yt(s,A,"array length at least 1 expected, length 0 found")];let d=[];for(let m=0;m<A.length;m++)d=d.concat(Xu({key:`${s}[${m}]`,value:A[m]}));return d}return Xu({key:s,value:A})},variableAnchorOffsetCollection:function(c){const s=c.key,A=c.value,d=sn(A),m=c.styleSpec;if(d!=="array"||A.length<1||A.length%2!=0)return[new Yt(s,A,"variableAnchorOffsetCollection requires a non-empty array of even length")];let w=[];for(let x=0;x<A.length;x+=2)w=w.concat(uc({key:`${s}[${x}]`,value:A[x],valueSpec:m.layout_symbol["text-anchor"]})),w=w.concat(zs({key:`${s}[${x+1}]`,value:A[x+1],valueSpec:{length:2,value:"number"},validateSpec:c.validateSpec,style:c.style,styleSpec:m}));return w},sprite:eh,state:Sf};function wA(c){const s=c.value,A=c.valueSpec,d=c.styleSpec;return c.validateSpec=wA,A.expression&&zl(mi(s))?cc(c):A.expression&&qu(ul(s))?_A(c):A.type&&du[A.type]?du[A.type](c):$i(Xn({},c,{valueSpec:A.type?d[A.type]:A}))}function dc(c){const s=c.value,A=c.key,d=ha(c);return d.length||(s.indexOf("{fontstack}")===-1&&d.push(new Yt(A,s,'"glyphs" url must include a "{fontstack}" token')),s.indexOf("{range}")===-1&&d.push(new Yt(A,s,'"glyphs" url must include a "{range}" token'))),d}function No(c,s=Me){let A=[];return A=A.concat(wA({key:"",value:c,valueSpec:s.$root,styleSpec:s,style:c,validateSpec:wA,objectElementValidators:{glyphs:dc,"*":()=>[]}})),c.constants&&(A=A.concat(Da({key:"constants",value:c.constants}))),B(A)}function Do(c){return function(s){return c({...s,validateSpec:wA})}}function B(c){return[].concat(c).sort((s,A)=>s.line-A.line)}function T(c){return function(...s){return B(c.apply(this,s))}}No.source=T(Do(Bf)),No.sprite=T(Do(eh)),No.glyphs=T(Do(dc)),No.light=T(Do(Cf)),No.sky=T(Do(hc)),No.terrain=T(Do(md)),No.state=T(Do(Sf)),No.layer=T(Do(Ss)),No.filter=T(Do(Yu)),No.paintProperty=T(Do(hl)),No.layoutProperty=T(Do(Qa));const O=No,q=O.light,le=O.sky,ge=O.paintProperty,ye=O.layoutProperty;function ve(c,s){let A=!1;if(s&&s.length)for(const d of s)c.fire(new lt(new Error(d.message))),A=!0;return A}class xe{constructor(s,A,d){const m=this.cells=[];if(s instanceof ArrayBuffer){this.arrayBuffer=s;const x=new Int32Array(this.arrayBuffer);s=x[0],this.d=(A=x[1])+2*(d=x[2]);for(let L=0;L<this.d*this.d;L++){const Q=x[3+L],j=x[3+L+1];m.push(Q===j?null:x.subarray(Q,j))}const E=x[3+m.length+1];this.keys=x.subarray(x[3+m.length],E),this.bboxes=x.subarray(E),this.insert=this._insertReadonly}else{this.d=A+2*d;for(let x=0;x<this.d*this.d;x++)m.push([]);this.keys=[],this.bboxes=[]}this.n=A,this.extent=s,this.padding=d,this.scale=A/s,this.uid=0;const w=d/A*s;this.min=-w,this.max=s+w}insert(s,A,d,m,w){this._forEachCell(A,d,m,w,this._insertCell,this.uid++,void 0,void 0),this.keys.push(s),this.bboxes.push(A),this.bboxes.push(d),this.bboxes.push(m),this.bboxes.push(w)}_insertReadonly(){throw new Error("Cannot insert into a GridIndex created from an ArrayBuffer.")}_insertCell(s,A,d,m,w,x){this.cells[w].push(x)}query(s,A,d,m,w){const x=this.min,E=this.max;if(s<=x&&A<=x&&E<=d&&E<=m&&!w)return Array.prototype.slice.call(this.keys);{const L=[];return this._forEachCell(s,A,d,m,this._queryCell,L,{},w),L}}_queryCell(s,A,d,m,w,x,E,L){const Q=this.cells[w];if(Q!==null){const j=this.keys,G=this.bboxes;for(let J=0;J<Q.length;J++){const ne=Q[J];if(E[ne]===void 0){const oe=4*ne;(L?L(G[oe+0],G[oe+1],G[oe+2],G[oe+3]):s<=G[oe+2]&&A<=G[oe+3]&&d>=G[oe+0]&&m>=G[oe+1])?(E[ne]=!0,x.push(j[ne])):E[ne]=!1}}}}_forEachCell(s,A,d,m,w,x,E,L){const Q=this._convertToCellCoord(s),j=this._convertToCellCoord(A),G=this._convertToCellCoord(d),J=this._convertToCellCoord(m);for(let ne=Q;ne<=G;ne++)for(let oe=j;oe<=J;oe++){const pe=this.d*oe+ne;if((!L||L(this._convertFromCellCoord(ne),this._convertFromCellCoord(oe),this._convertFromCellCoord(ne+1),this._convertFromCellCoord(oe+1)))&&w.call(this,s,A,d,m,pe,x,E,L))return}}_convertFromCellCoord(s){return(s-this.padding)/this.scale}_convertToCellCoord(s){return Math.max(0,Math.min(this.d-1,Math.floor(s*this.scale)+this.padding))}toArrayBuffer(){if(this.arrayBuffer)return this.arrayBuffer;const s=this.cells,A=3+this.cells.length+1+1;let d=0;for(let x=0;x<this.cells.length;x++)d+=this.cells[x].length;const m=new Int32Array(A+d+this.keys.length+this.bboxes.length);m[0]=this.extent,m[1]=this.n,m[2]=this.padding;let w=A;for(let x=0;x<s.length;x++){const E=s[x];m[3+x]=w,m.set(E,w),w+=E.length}return m[3+s.length]=w,m.set(this.keys,w),w+=this.keys.length,m[3+s.length+1]=w,m.set(this.bboxes,w),w+=this.bboxes.length,m.buffer}static serialize(s,A){const d=s.toArrayBuffer();return A&&A.push(d),{buffer:d}}static deserialize(s){return new xe(s.buffer)}}const ke={};function Qe(c,s,A={}){if(ke[c])throw new Error(`${c} is already registered.`);Object.defineProperty(s,"_classRegistryKey",{value:c,writeable:!1}),ke[c]={klass:s,omit:A.omit||[],shallow:A.shallow||[]}}Qe("Object",Object),Qe("Set",Set),Qe("TransferableGridIndex",xe),Qe("Color",ln),Qe("Error",Error),Qe("AJAXError",Ne),Qe("ResolvedImage",Bs),Qe("StylePropertyFunction",au),Qe("StyleExpression",oc,{omit:["_evaluator"]}),Qe("ZoomDependentExpression",Wu),Qe("ZoomConstantExpression",ac),Qe("CompoundExpression",fi,{omit:["_evaluate"]});for(const c in ds)ds[c]._classRegistryKey||Qe(`Expression_${c}`,ds[c]);function Bt(c){return c&&typeof ArrayBuffer<"u"&&(c instanceof ArrayBuffer||c.constructor&&c.constructor.name==="ArrayBuffer")}function wt(c){return c.$name||c.constructor._classRegistryKey}function ft(c){return!function(s){if(s===null||typeof s!="object")return!1;const A=wt(s);return!(!A||A==="Object")}(c)&&(c==null||typeof c=="boolean"||typeof c=="number"||typeof c=="string"||c instanceof Boolean||c instanceof Number||c instanceof String||c instanceof Date||c instanceof RegExp||c instanceof Blob||c instanceof Error||Bt(c)||lr(c)||ArrayBuffer.isView(c)||c instanceof ImageData)}function Ot(c,s){if(ft(c))return(Bt(c)||lr(c))&&s&&s.push(c),ArrayBuffer.isView(c)&&s&&s.push(c.buffer),c instanceof ImageData&&s&&s.push(c.data.buffer),c;if(Array.isArray(c)){const w=[];for(const x of c)w.push(Ot(x,s));return w}if(typeof c!="object")throw new Error("can't serialize object of type "+typeof c);const A=wt(c);if(!A)throw new Error(`can't serialize object of unregistered class ${c.constructor.name}`);if(!ke[A])throw new Error(`${A} is not registered.`);const{klass:d}=ke[A],m=d.serialize?d.serialize(c,s):{};if(d.serialize){if(s&&m===s[s.length-1])throw new Error("statically serialized object won't survive transfer of $name property")}else{for(const w in c){if(!c.hasOwnProperty(w)||ke[A].omit.indexOf(w)>=0)continue;const x=c[w];m[w]=ke[A].shallow.indexOf(w)>=0?x:Ot(x,s)}c instanceof Error&&(m.message=c.message)}if(m.$name)throw new Error("$name property is reserved for worker serialization logic.");return A!=="Object"&&(m.$name=A),m}function Pt(c){if(ft(c))return c;if(Array.isArray(c))return c.map(Pt);if(typeof c!="object")throw new Error("can't deserialize object of type "+typeof c);const s=wt(c)||"Object";if(!ke[s])throw new Error(`can't deserialize unregistered class ${s}`);const{klass:A}=ke[s];if(!A)throw new Error(`can't deserialize unregistered class ${s}`);if(A.deserialize)return A.deserialize(c);const d=Object.create(A.prototype);for(const m of Object.keys(c)){if(m==="$name")continue;const w=c[m];d[m]=ke[s].shallow.indexOf(m)>=0?w:Pt(w)}return d}class ut{constructor(){this.first=!0}update(s,A){const d=Math.floor(s);return this.first?(this.first=!1,this.lastIntegerZoom=d,this.lastIntegerZoomTime=0,this.lastZoom=s,this.lastFloorZoom=d,!0):(this.lastFloorZoom>d?(this.lastIntegerZoom=d+1,this.lastIntegerZoomTime=A):this.lastFloorZoom<d&&(this.lastIntegerZoom=d,this.lastIntegerZoomTime=A),s!==this.lastZoom&&(this.lastZoom=s,this.lastFloorZoom=d,!0))}}const Ye={"Latin-1 Supplement":c=>c>=128&&c<=255,"Hangul Jamo":c=>c>=4352&&c<=4607,Khmer:c=>c>=6016&&c<=6143,"General Punctuation":c=>c>=8192&&c<=8303,"Letterlike Symbols":c=>c>=8448&&c<=8527,"Number Forms":c=>c>=8528&&c<=8591,"Miscellaneous Technical":c=>c>=8960&&c<=9215,"Control Pictures":c=>c>=9216&&c<=9279,"Optical Character Recognition":c=>c>=9280&&c<=9311,"Enclosed Alphanumerics":c=>c>=9312&&c<=9471,"Geometric Shapes":c=>c>=9632&&c<=9727,"Miscellaneous Symbols":c=>c>=9728&&c<=9983,"Miscellaneous Symbols and Arrows":c=>c>=11008&&c<=11263,"Ideographic Description Characters":c=>c>=12272&&c<=12287,"CJK Symbols and Punctuation":c=>c>=12288&&c<=12351,Hiragana:c=>c>=12352&&c<=12447,Katakana:c=>c>=12448&&c<=12543,Kanbun:c=>c>=12688&&c<=12703,"CJK Strokes":c=>c>=12736&&c<=12783,"Enclosed CJK Letters and Months":c=>c>=12800&&c<=13055,"CJK Compatibility":c=>c>=13056&&c<=13311,"Yijing Hexagram Symbols":c=>c>=19904&&c<=19967,"CJK Unified Ideographs":c=>c>=19968&&c<=40959,"Hangul Syllables":c=>c>=44032&&c<=55215,"Private Use Area":c=>c>=57344&&c<=63743,"Vertical Forms":c=>c>=65040&&c<=65055,"CJK Compatibility Forms":c=>c>=65072&&c<=65103,"Small Form Variants":c=>c>=65104&&c<=65135,"Halfwidth and Fullwidth Forms":c=>c>=65280&&c<=65519};function Dt(c){for(const s of c)if(fr(s.charCodeAt(0)))return!0;return!1}function Zt(c){for(const s of c)if(!dr(s.charCodeAt(0)))return!1;return!0}function zt(c){const s=c.map(A=>{try{return new RegExp(`\\p{sc=${A}}`,"u").source}catch{return null}}).filter(A=>A);return new RegExp(s.join("|"),"u")}const xr=zt(["Arab","Dupl","Mong","Ougr","Syrc"]);function dr(c){return!xr.test(String.fromCodePoint(c))}const Or=zt(["Bopo","Hani","Hira","Kana","Kits","Nshu","Tang","Yiii"]);function fr(c){return!(c!==746&&c!==747&&(c<4352||!(Ye["CJK Compatibility Forms"](c)&&!(c>=65097&&c<=65103)||Ye["CJK Compatibility"](c)||Ye["CJK Strokes"](c)||!(!Ye["CJK Symbols and Punctuation"](c)||c>=12296&&c<=12305||c>=12308&&c<=12319||c===12336)||Ye["Enclosed CJK Letters and Months"](c)||Ye["Ideographic Description Characters"](c)||Ye.Kanbun(c)||Ye.Katakana(c)&&c!==12540||!(!Ye["Halfwidth and Fullwidth Forms"](c)||c===65288||c===65289||c===65293||c>=65306&&c<=65310||c===65339||c===65341||c===65343||c>=65371&&c<=65503||c===65507||c>=65512&&c<=65519)||!(!Ye["Small Form Variants"](c)||c>=65112&&c<=65118||c>=65123&&c<=65126)||Ye["Vertical Forms"](c)||Ye["Yijing Hexagram Symbols"](c)||new RegExp("\\p{sc=Cans}","u").test(String.fromCodePoint(c))||new RegExp("\\p{sc=Hang}","u").test(String.fromCodePoint(c))||Or.test(String.fromCodePoint(c)))))}function Cn(c){return!(fr(c)||function(s){return!!(Ye["Latin-1 Supplement"](s)&&(s===167||s===169||s===174||s===177||s===188||s===189||s===190||s===215||s===247)||Ye["General Punctuation"](s)&&(s===8214||s===8224||s===8225||s===8240||s===8241||s===8251||s===8252||s===8258||s===8263||s===8264||s===8265||s===8273)||Ye["Letterlike Symbols"](s)||Ye["Number Forms"](s)||Ye["Miscellaneous Technical"](s)&&(s>=8960&&s<=8967||s>=8972&&s<=8991||s>=8996&&s<=9e3||s===9003||s>=9085&&s<=9114||s>=9150&&s<=9165||s===9167||s>=9169&&s<=9179||s>=9186&&s<=9215)||Ye["Control Pictures"](s)&&s!==9251||Ye["Optical Character Recognition"](s)||Ye["Enclosed Alphanumerics"](s)||Ye["Geometric Shapes"](s)||Ye["Miscellaneous Symbols"](s)&&!(s>=9754&&s<=9759)||Ye["Miscellaneous Symbols and Arrows"](s)&&(s>=11026&&s<=11055||s>=11088&&s<=11097||s>=11192&&s<=11243)||Ye["CJK Symbols and Punctuation"](s)||Ye.Katakana(s)||Ye["Private Use Area"](s)||Ye["CJK Compatibility Forms"](s)||Ye["Small Form Variants"](s)||Ye["Halfwidth and Fullwidth Forms"](s)||s===8734||s===8756||s===8757||s>=9984&&s<=10087||s>=10102&&s<=10131||s===65532||s===65533)}(c))}const Mn=zt(["Adlm","Arab","Armi","Avst","Chrs","Cprt","Egyp","Elym","Gara","Hatr","Hebr","Hung","Khar","Lydi","Mand","Mani","Mend","Merc","Mero","Narb","Nbat","Nkoo","Orkh","Palm","Phli","Phlp","Phnx","Prti","Rohg","Samr","Sarb","Sogo","Syrc","Thaa","Todr","Yezi"]);function pn(c){return Mn.test(String.fromCodePoint(c))}function vn(c,s){return!(!s&&pn(c)||c>=2304&&c<=3583||c>=3840&&c<=4255||Ye.Khmer(c))}function Nn(c){for(const s of c)if(pn(s.charCodeAt(0)))return!0;return!1}const wn=new class{constructor(){this.TIMEOUT=5e3,this.applyArabicShaping=null,this.processBidirectionalText=null,this.processStyledBidirectionalText=null,this.pluginStatus="unavailable",this.pluginURL=null,this.loadScriptResolve=()=>{}}setState(c){this.pluginStatus=c.pluginStatus,this.pluginURL=c.pluginURL}getState(){return{pluginStatus:this.pluginStatus,pluginURL:this.pluginURL}}setMethods(c){if(wn.isParsed())throw new Error("RTL text plugin already registered.");this.applyArabicShaping=c.applyArabicShaping,this.processBidirectionalText=c.processBidirectionalText,this.processStyledBidirectionalText=c.processStyledBidirectionalText,this.loadScriptResolve()}isParsed(){return this.applyArabicShaping!=null&&this.processBidirectionalText!=null&&this.processStyledBidirectionalText!=null}getRTLTextPluginStatus(){return this.pluginStatus}syncState(c,s){return o(this,void 0,void 0,function*(){if(this.isParsed())return this.getState();if(c.pluginStatus!=="loading")return this.setState(c),c;const A=c.pluginURL,d=new Promise(w=>{this.loadScriptResolve=w});s(A);const m=new Promise(w=>setTimeout(()=>w(),this.TIMEOUT));if(yield Promise.race([d,m]),this.isParsed()){const w={pluginStatus:"loaded",pluginURL:A};return this.setState(w),w}throw this.setState({pluginStatus:"error",pluginURL:""}),new Error(`RTL Text Plugin failed to import scripts from ${A}`)})}};class Er{constructor(s,A){this.zoom=s,A?(this.now=A.now||0,this.fadeDuration=A.fadeDuration||0,this.zoomHistory=A.zoomHistory||new ut,this.transition=A.transition||{},this.globalState=A.globalState||{}):(this.now=0,this.fadeDuration=0,this.zoomHistory=new ut,this.transition={},this.globalState={})}isSupportedScript(s){return function(A,d){for(const m of A)if(!vn(m.charCodeAt(0),d))return!1;return!0}(s,wn.getRTLTextPluginStatus()==="loaded")}crossFadingFactor(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){const s=this.zoom,A=s-Math.floor(s),d=this.crossFadingFactor();return s>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:A+(1-A)*d}:{fromScale:.5,toScale:1,t:1-(1-d)*A}}}class si{constructor(s,A){this.property=s,this.value=A,this.expression=function(d,m){if(zl(d))return new au(d,m);if(qu(d)){const w=fd(d,m);if(w.result==="error")throw new Error(w.value.map(x=>`${x.key}: ${x.message}`).join(", "));return w.value}{let w=d;return m.type==="color"&&typeof d=="string"?w=ln.parse(d):m.type!=="padding"||typeof d!="number"&&!Array.isArray(d)?m.type!=="numberArray"||typeof d!="number"&&!Array.isArray(d)?m.type!=="colorArray"||typeof d!="string"&&!Array.isArray(d)?m.type==="variableAnchorOffsetCollection"&&Array.isArray(d)?w=An.parse(d):m.type==="projectionDefinition"&&typeof d=="string"&&(w=Gr.parse(d)):w=Ei.parse(d):w=Hi.parse(d):w=Un.parse(d),{globalStateRefs:new Set,kind:"constant",evaluate:()=>w}}}(A===void 0?s.specification.default:A,s.specification)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}getGlobalStateRefs(){return this.expression.globalStateRefs||new Set}possiblyEvaluate(s,A,d){return this.property.possiblyEvaluate(this,s,A,d)}}class fs{constructor(s){this.property=s,this.value=new si(s,void 0)}transitioned(s,A){return new Hs(this.property,this.value,A,Mt({},s.transition,this.transition),s.now)}untransitioned(){return new Hs(this.property,this.value,null,{},0)}}class _i{constructor(s){this._properties=s,this._values=Object.create(s.defaultTransitionablePropertyValues)}getValue(s){return Ft(this._values[s].value.value)}setValue(s,A){Object.prototype.hasOwnProperty.call(this._values,s)||(this._values[s]=new fs(this._values[s].property)),this._values[s].value=new si(this._values[s].property,A===null?void 0:Ft(A))}getTransition(s){return Ft(this._values[s].transition)}setTransition(s,A){Object.prototype.hasOwnProperty.call(this._values,s)||(this._values[s]=new fs(this._values[s].property)),this._values[s].transition=Ft(A)||void 0}serialize(){const s={};for(const A of Object.keys(this._values)){const d=this.getValue(A);d!==void 0&&(s[A]=d);const m=this.getTransition(A);m!==void 0&&(s[`${A}-transition`]=m)}return s}transitioned(s,A){const d=new kn(this._properties);for(const m of Object.keys(this._values))d._values[m]=this._values[m].transitioned(s,A._values[m]);return d}untransitioned(){const s=new kn(this._properties);for(const A of Object.keys(this._values))s._values[A]=this._values[A].untransitioned();return s}}class Hs{constructor(s,A,d,m,w){this.property=s,this.value=A,this.begin=w+m.delay||0,this.end=this.begin+m.duration||0,s.specification.transition&&(m.delay||m.duration)&&(this.prior=d)}possiblyEvaluate(s,A,d){const m=s.now||0,w=this.value.possiblyEvaluate(s,A,d),x=this.prior;if(x){if(m>this.end)return this.prior=null,w;if(this.value.isDataDriven())return this.prior=null,w;if(m<this.begin)return x.possiblyEvaluate(s,A,d);{const E=(m-this.begin)/(this.end-this.begin);return this.property.interpolate(x.possiblyEvaluate(s,A,d),w,nt(E))}}return w}}class kn{constructor(s){this._properties=s,this._values=Object.create(s.defaultTransitioningPropertyValues)}possiblyEvaluate(s,A,d){const m=new Fi(this._properties);for(const w of Object.keys(this._values))m._values[w]=this._values[w].possiblyEvaluate(s,A,d);return m}hasTransition(){for(const s of Object.keys(this._values))if(this._values[s].prior)return!0;return!1}}class vo{constructor(s){this._properties=s,this._values=Object.create(s.defaultPropertyValues)}hasValue(s){return this._values[s].value!==void 0}getValue(s){return Ft(this._values[s].value)}setValue(s,A){this._values[s]=new si(this._values[s].property,A===null?void 0:Ft(A))}serialize(){const s={};for(const A of Object.keys(this._values)){const d=this.getValue(A);d!==void 0&&(s[A]=d)}return s}possiblyEvaluate(s,A,d){const m=new Fi(this._properties);for(const w of Object.keys(this._values))m._values[w]=this._values[w].possiblyEvaluate(s,A,d);return m}}class wi{constructor(s,A,d){this.property=s,this.value=A,this.parameters=d}isConstant(){return this.value.kind==="constant"}constantOr(s){return this.value.kind==="constant"?this.value.value:s}evaluate(s,A,d,m){return this.property.evaluate(this.value,this.parameters,s,A,d,m)}}class Fi{constructor(s){this._properties=s,this._values=Object.create(s.defaultPossiblyEvaluatedValues)}get(s){return this._values[s]}}class sr{constructor(s){this.specification=s}possiblyEvaluate(s,A){if(s.isDataDriven())throw new Error("Value should not be data driven");return s.expression.evaluate(A)}interpolate(s,A,d){const m=ns[this.specification.type];return m?m(s,A,d):s}}class wr{constructor(s,A){this.specification=s,this.overrides=A}possiblyEvaluate(s,A,d,m){return new wi(this,s.expression.kind==="constant"||s.expression.kind==="camera"?{kind:"constant",value:s.expression.evaluate(A,null,{},d,m)}:s.expression,A)}interpolate(s,A,d){if(s.value.kind!=="constant"||A.value.kind!=="constant")return s;if(s.value.value===void 0||A.value.value===void 0)return new wi(this,{kind:"constant",value:void 0},s.parameters);const m=ns[this.specification.type];if(m){const w=m(s.value.value,A.value.value,d);return new wi(this,{kind:"constant",value:w},s.parameters)}return s}evaluate(s,A,d,m,w,x){return s.kind==="constant"?s.value:s.evaluate(A,d,m,w,x)}}class js extends wr{possiblyEvaluate(s,A,d,m){if(s.value===void 0)return new wi(this,{kind:"constant",value:void 0},A);if(s.expression.kind==="constant"){const w=s.expression.evaluate(A,null,{},d,m),x=s.property.specification.type==="resolvedImage"&&typeof w!="string"?w.name:w,E=this._calculate(x,x,x,A);return new wi(this,{kind:"constant",value:E},A)}if(s.expression.kind==="camera"){const w=this._calculate(s.expression.evaluate({zoom:A.zoom-1}),s.expression.evaluate({zoom:A.zoom}),s.expression.evaluate({zoom:A.zoom+1}),A);return new wi(this,{kind:"constant",value:w},A)}return new wi(this,s.expression,A)}evaluate(s,A,d,m,w,x){if(s.kind==="source"){const E=s.evaluate(A,d,m,w,x);return this._calculate(E,E,E,A)}return s.kind==="composite"?this._calculate(s.evaluate({zoom:Math.floor(A.zoom)-1},d,m),s.evaluate({zoom:Math.floor(A.zoom)},d,m),s.evaluate({zoom:Math.floor(A.zoom)+1},d,m),A):s.value}_calculate(s,A,d,m){return m.zoom>m.zoomHistory.lastIntegerZoom?{from:s,to:A}:{from:d,to:A}}interpolate(s){return s}}class Qo{constructor(s){this.specification=s}possiblyEvaluate(s,A,d,m){if(s.value!==void 0){if(s.expression.kind==="constant"){const w=s.expression.evaluate(A,null,{},d,m);return this._calculate(w,w,w,A)}return this._calculate(s.expression.evaluate(new Er(Math.floor(A.zoom-1),A)),s.expression.evaluate(new Er(Math.floor(A.zoom),A)),s.expression.evaluate(new Er(Math.floor(A.zoom+1),A)),A)}}_calculate(s,A,d,m){return m.zoom>m.zoomHistory.lastIntegerZoom?{from:s,to:A}:{from:d,to:A}}interpolate(s){return s}}class xi{constructor(s){this.specification=s}possiblyEvaluate(s,A,d,m){return!!s.expression.evaluate(A,null,{},d,m)}interpolate(){return!1}}class gi{constructor(s){this.properties=s,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(const A in s){const d=s[A];d.specification.overridable&&this.overridableProperties.push(A);const m=this.defaultPropertyValues[A]=new si(d,void 0),w=this.defaultTransitionablePropertyValues[A]=new fs(d);this.defaultTransitioningPropertyValues[A]=w.untransitioned(),this.defaultPossiblyEvaluatedValues[A]=m.possiblyEvaluate({})}}}Qe("DataDrivenProperty",wr),Qe("DataConstantProperty",sr),Qe("CrossFadedDataDrivenProperty",js),Qe("CrossFadedProperty",Qo),Qe("ColorRampProperty",xi);const Hl="-transition";class bi extends mt{constructor(s,A){if(super(),this.id=s.id,this.type=s.type,this._featureFilter={filter:()=>!0,needGeometry:!1,getGlobalStateRefs:()=>new Set},s.type!=="custom"&&(this.metadata=s.metadata,this.minzoom=s.minzoom,this.maxzoom=s.maxzoom,s.type!=="background"&&(this.source=s.source,this.sourceLayer=s["source-layer"],this.filter=s.filter,this._featureFilter=Ro(s.filter)),A.layout&&(this._unevaluatedLayout=new vo(A.layout)),A.paint)){this._transitionablePaint=new _i(A.paint);for(const d in s.paint)this.setPaintProperty(d,s.paint[d],{validate:!1});for(const d in s.layout)this.setLayoutProperty(d,s.layout[d],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new Fi(A.paint)}}setFilter(s){this.filter=s,this._featureFilter=Ro(s)}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(s){return s==="visibility"?this.visibility:this._unevaluatedLayout.getValue(s)}getLayoutAffectingGlobalStateRefs(){const s=new Set;if(this._unevaluatedLayout)for(const A in this._unevaluatedLayout._values){const d=this._unevaluatedLayout._values[A];for(const m of d.getGlobalStateRefs())s.add(m)}for(const A of this._featureFilter.getGlobalStateRefs())s.add(A);return s}setLayoutProperty(s,A,d={}){A!=null&&this._validate(ye,`layers.${this.id}.layout.${s}`,s,A,d)||(s!=="visibility"?this._unevaluatedLayout.setValue(s,A):this.visibility=A)}getPaintProperty(s){return s.endsWith(Hl)?this._transitionablePaint.getTransition(s.slice(0,-11)):this._transitionablePaint.getValue(s)}setPaintProperty(s,A,d={}){if(A!=null&&this._validate(ge,`layers.${this.id}.paint.${s}`,s,A,d))return!1;if(s.endsWith(Hl))return this._transitionablePaint.setTransition(s.slice(0,-11),A||void 0),!1;{const m=this._transitionablePaint._values[s],w=m.property.specification["property-type"]==="cross-faded-data-driven",x=m.value.isDataDriven(),E=m.value;this._transitionablePaint.setValue(s,A),this._handleSpecialPaintPropertyUpdate(s);const L=this._transitionablePaint._values[s].value;return L.isDataDriven()||x||w||this._handleOverridablePaintPropertyUpdate(s,E,L)}}_handleSpecialPaintPropertyUpdate(s){}_handleOverridablePaintPropertyUpdate(s,A,d){return!1}isHidden(s){return!!(this.minzoom&&s<this.minzoom)||!!(this.maxzoom&&s>=this.maxzoom)||this.visibility==="none"}updateTransitions(s){this._transitioningPaint=this._transitionablePaint.transitioned(s,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(s,A){s.getCrossfadeParameters&&(this._crossfadeParameters=s.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(s,void 0,A)),this.paint=this._transitioningPaint.possiblyEvaluate(s,void 0,A)}serialize(){const s={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(s.layout=s.layout||{},s.layout.visibility=this.visibility),vr(s,(A,d)=>!(A===void 0||d==="layout"&&!Object.keys(A).length||d==="paint"&&!Object.keys(A).length))}_validate(s,A,d,m,w={}){return(!w||w.validate!==!1)&&ve(this,s.call(O,{key:A,layerType:this.type,objectKey:d,value:m,styleSpec:Me,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const s in this.paint._values){const A=this.paint.get(s);if(A instanceof wi&&is(A.property.specification)&&(A.value.kind==="source"||A.value.kind==="composite")&&A.value.isStateDependent)return!0}return!1}}const dl={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class zn{constructor(s,A){this._structArray=s,this._pos1=A*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class qn{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(s,A){return s._trim(),A&&(s.isTransferred=!0,A.push(s.arrayBuffer)),{length:s.length,arrayBuffer:s.arrayBuffer}}static deserialize(s){const A=Object.create(this.prototype);return A.arrayBuffer=s.arrayBuffer,A.length=s.length,A.capacity=s.arrayBuffer.byteLength/A.bytesPerElement,A._refreshViews(),A}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(s){this.reserve(s),this.length=s}reserve(s){if(s>this.capacity){this.capacity=Math.max(s,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const A=this.uint8;this._refreshViews(),A&&this.uint8.set(A)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}}function oi(c,s=1){let A=0,d=0;return{members:c.map(m=>{const w=dl[m.type].BYTES_PER_ELEMENT,x=A=gd(A,Math.max(s,w)),E=m.components||1;return d=Math.max(d,w),A+=w*E,{name:m.name,type:m.type,components:E,offset:x}}),size:gd(A,Math.max(d,s)),alignment:s}}function gd(c,s){return Math.ceil(c/s)*s}class da extends qn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(s,A){const d=this.length;return this.resize(d+1),this.emplace(d,s,A)}emplace(s,A,d){const m=2*s;return this.int16[m+0]=A,this.int16[m+1]=d,s}}da.prototype.bytesPerElement=4,Qe("StructArrayLayout2i4",da);class Oo extends qn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(s,A,d){const m=this.length;return this.resize(m+1),this.emplace(m,s,A,d)}emplace(s,A,d,m){const w=3*s;return this.int16[w+0]=A,this.int16[w+1]=d,this.int16[w+2]=m,s}}Oo.prototype.bytesPerElement=6,Qe("StructArrayLayout3i6",Oo);class fc extends qn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(s,A,d,m){const w=this.length;return this.resize(w+1),this.emplace(w,s,A,d,m)}emplace(s,A,d,m,w){const x=4*s;return this.int16[x+0]=A,this.int16[x+1]=d,this.int16[x+2]=m,this.int16[x+3]=w,s}}fc.prototype.bytesPerElement=8,Qe("StructArrayLayout4i8",fc);class so extends qn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(s,A,d,m,w,x){const E=this.length;return this.resize(E+1),this.emplace(E,s,A,d,m,w,x)}emplace(s,A,d,m,w,x,E){const L=6*s;return this.int16[L+0]=A,this.int16[L+1]=d,this.int16[L+2]=m,this.int16[L+3]=w,this.int16[L+4]=x,this.int16[L+5]=E,s}}so.prototype.bytesPerElement=12,Qe("StructArrayLayout2i4i12",so);class zo extends qn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(s,A,d,m,w,x){const E=this.length;return this.resize(E+1),this.emplace(E,s,A,d,m,w,x)}emplace(s,A,d,m,w,x,E){const L=4*s,Q=8*s;return this.int16[L+0]=A,this.int16[L+1]=d,this.uint8[Q+4]=m,this.uint8[Q+5]=w,this.uint8[Q+6]=x,this.uint8[Q+7]=E,s}}zo.prototype.bytesPerElement=8,Qe("StructArrayLayout2i4ub8",zo);class Oa extends qn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(s,A){const d=this.length;return this.resize(d+1),this.emplace(d,s,A)}emplace(s,A,d){const m=2*s;return this.float32[m+0]=A,this.float32[m+1]=d,s}}Oa.prototype.bytesPerElement=8,Qe("StructArrayLayout2f8",Oa);class th extends qn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(s,A,d,m,w,x,E,L,Q,j){const G=this.length;return this.resize(G+1),this.emplace(G,s,A,d,m,w,x,E,L,Q,j)}emplace(s,A,d,m,w,x,E,L,Q,j,G){const J=10*s;return this.uint16[J+0]=A,this.uint16[J+1]=d,this.uint16[J+2]=m,this.uint16[J+3]=w,this.uint16[J+4]=x,this.uint16[J+5]=E,this.uint16[J+6]=L,this.uint16[J+7]=Q,this.uint16[J+8]=j,this.uint16[J+9]=G,s}}th.prototype.bytesPerElement=20,Qe("StructArrayLayout10ui20",th);class xA extends qn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(s,A,d,m,w,x,E,L,Q,j,G,J){const ne=this.length;return this.resize(ne+1),this.emplace(ne,s,A,d,m,w,x,E,L,Q,j,G,J)}emplace(s,A,d,m,w,x,E,L,Q,j,G,J,ne){const oe=12*s;return this.int16[oe+0]=A,this.int16[oe+1]=d,this.int16[oe+2]=m,this.int16[oe+3]=w,this.uint16[oe+4]=x,this.uint16[oe+5]=E,this.uint16[oe+6]=L,this.uint16[oe+7]=Q,this.int16[oe+8]=j,this.int16[oe+9]=G,this.int16[oe+10]=J,this.int16[oe+11]=ne,s}}xA.prototype.bytesPerElement=24,Qe("StructArrayLayout4i4ui4i24",xA);class rh extends qn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(s,A,d){const m=this.length;return this.resize(m+1),this.emplace(m,s,A,d)}emplace(s,A,d,m){const w=3*s;return this.float32[w+0]=A,this.float32[w+1]=d,this.float32[w+2]=m,s}}rh.prototype.bytesPerElement=12,Qe("StructArrayLayout3f12",rh);class v extends qn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(s){const A=this.length;return this.resize(A+1),this.emplace(A,s)}emplace(s,A){return this.uint32[1*s+0]=A,s}}v.prototype.bytesPerElement=4,Qe("StructArrayLayout1ul4",v);class n extends qn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(s,A,d,m,w,x,E,L,Q){const j=this.length;return this.resize(j+1),this.emplace(j,s,A,d,m,w,x,E,L,Q)}emplace(s,A,d,m,w,x,E,L,Q,j){const G=10*s,J=5*s;return this.int16[G+0]=A,this.int16[G+1]=d,this.int16[G+2]=m,this.int16[G+3]=w,this.int16[G+4]=x,this.int16[G+5]=E,this.uint32[J+3]=L,this.uint16[G+8]=Q,this.uint16[G+9]=j,s}}n.prototype.bytesPerElement=20,Qe("StructArrayLayout6i1ul2ui20",n);class l extends qn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(s,A,d,m,w,x){const E=this.length;return this.resize(E+1),this.emplace(E,s,A,d,m,w,x)}emplace(s,A,d,m,w,x,E){const L=6*s;return this.int16[L+0]=A,this.int16[L+1]=d,this.int16[L+2]=m,this.int16[L+3]=w,this.int16[L+4]=x,this.int16[L+5]=E,s}}l.prototype.bytesPerElement=12,Qe("StructArrayLayout2i2i2i12",l);class f extends qn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(s,A,d,m,w){const x=this.length;return this.resize(x+1),this.emplace(x,s,A,d,m,w)}emplace(s,A,d,m,w,x){const E=4*s,L=8*s;return this.float32[E+0]=A,this.float32[E+1]=d,this.float32[E+2]=m,this.int16[L+6]=w,this.int16[L+7]=x,s}}f.prototype.bytesPerElement=16,Qe("StructArrayLayout2f1f2i16",f);class p extends qn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(s,A,d,m,w,x){const E=this.length;return this.resize(E+1),this.emplace(E,s,A,d,m,w,x)}emplace(s,A,d,m,w,x,E){const L=16*s,Q=4*s,j=8*s;return this.uint8[L+0]=A,this.uint8[L+1]=d,this.float32[Q+1]=m,this.float32[Q+2]=w,this.int16[j+6]=x,this.int16[j+7]=E,s}}p.prototype.bytesPerElement=16,Qe("StructArrayLayout2ub2f2i16",p);class _ extends qn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(s,A,d){const m=this.length;return this.resize(m+1),this.emplace(m,s,A,d)}emplace(s,A,d,m){const w=3*s;return this.uint16[w+0]=A,this.uint16[w+1]=d,this.uint16[w+2]=m,s}}_.prototype.bytesPerElement=6,Qe("StructArrayLayout3ui6",_);class S extends qn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(s,A,d,m,w,x,E,L,Q,j,G,J,ne,oe,pe,Se,Re){const ot=this.length;return this.resize(ot+1),this.emplace(ot,s,A,d,m,w,x,E,L,Q,j,G,J,ne,oe,pe,Se,Re)}emplace(s,A,d,m,w,x,E,L,Q,j,G,J,ne,oe,pe,Se,Re,ot){const Ke=24*s,ee=12*s,be=48*s;return this.int16[Ke+0]=A,this.int16[Ke+1]=d,this.uint16[Ke+2]=m,this.uint16[Ke+3]=w,this.uint32[ee+2]=x,this.uint32[ee+3]=E,this.uint32[ee+4]=L,this.uint16[Ke+10]=Q,this.uint16[Ke+11]=j,this.uint16[Ke+12]=G,this.float32[ee+7]=J,this.float32[ee+8]=ne,this.uint8[be+36]=oe,this.uint8[be+37]=pe,this.uint8[be+38]=Se,this.uint32[ee+10]=Re,this.int16[Ke+22]=ot,s}}S.prototype.bytesPerElement=48,Qe("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",S);class P extends qn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(s,A,d,m,w,x,E,L,Q,j,G,J,ne,oe,pe,Se,Re,ot,Ke,ee,be,qe,bt,Ht,Et,Tt,Xt,Vt){const er=this.length;return this.resize(er+1),this.emplace(er,s,A,d,m,w,x,E,L,Q,j,G,J,ne,oe,pe,Se,Re,ot,Ke,ee,be,qe,bt,Ht,Et,Tt,Xt,Vt)}emplace(s,A,d,m,w,x,E,L,Q,j,G,J,ne,oe,pe,Se,Re,ot,Ke,ee,be,qe,bt,Ht,Et,Tt,Xt,Vt,er){const kt=32*s,yr=16*s;return this.int16[kt+0]=A,this.int16[kt+1]=d,this.int16[kt+2]=m,this.int16[kt+3]=w,this.int16[kt+4]=x,this.int16[kt+5]=E,this.int16[kt+6]=L,this.int16[kt+7]=Q,this.uint16[kt+8]=j,this.uint16[kt+9]=G,this.uint16[kt+10]=J,this.uint16[kt+11]=ne,this.uint16[kt+12]=oe,this.uint16[kt+13]=pe,this.uint16[kt+14]=Se,this.uint16[kt+15]=Re,this.uint16[kt+16]=ot,this.uint16[kt+17]=Ke,this.uint16[kt+18]=ee,this.uint16[kt+19]=be,this.uint16[kt+20]=qe,this.uint16[kt+21]=bt,this.uint16[kt+22]=Ht,this.uint32[yr+12]=Et,this.float32[yr+13]=Tt,this.float32[yr+14]=Xt,this.uint16[kt+30]=Vt,this.uint16[kt+31]=er,s}}P.prototype.bytesPerElement=64,Qe("StructArrayLayout8i15ui1ul2f2ui64",P);class M extends qn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(s){const A=this.length;return this.resize(A+1),this.emplace(A,s)}emplace(s,A){return this.float32[1*s+0]=A,s}}M.prototype.bytesPerElement=4,Qe("StructArrayLayout1f4",M);class z extends qn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(s,A,d){const m=this.length;return this.resize(m+1),this.emplace(m,s,A,d)}emplace(s,A,d,m){const w=3*s;return this.uint16[6*s+0]=A,this.float32[w+1]=d,this.float32[w+2]=m,s}}z.prototype.bytesPerElement=12,Qe("StructArrayLayout1ui2f12",z);class K extends qn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(s,A,d){const m=this.length;return this.resize(m+1),this.emplace(m,s,A,d)}emplace(s,A,d,m){const w=4*s;return this.uint32[2*s+0]=A,this.uint16[w+2]=d,this.uint16[w+3]=m,s}}K.prototype.bytesPerElement=8,Qe("StructArrayLayout1ul2ui8",K);class Z extends qn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(s,A){const d=this.length;return this.resize(d+1),this.emplace(d,s,A)}emplace(s,A,d){const m=2*s;return this.uint16[m+0]=A,this.uint16[m+1]=d,s}}Z.prototype.bytesPerElement=4,Qe("StructArrayLayout2ui4",Z);class $ extends qn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(s){const A=this.length;return this.resize(A+1),this.emplace(A,s)}emplace(s,A){return this.uint16[1*s+0]=A,s}}$.prototype.bytesPerElement=2,Qe("StructArrayLayout1ui2",$);class Y extends qn{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(s,A,d,m){const w=this.length;return this.resize(w+1),this.emplace(w,s,A,d,m)}emplace(s,A,d,m,w){const x=4*s;return this.float32[x+0]=A,this.float32[x+1]=d,this.float32[x+2]=m,this.float32[x+3]=w,s}}Y.prototype.bytesPerElement=16,Qe("StructArrayLayout4f16",Y);class he extends zn{get anchorPointX(){return this._structArray.int16[this._pos2+0]}get anchorPointY(){return this._structArray.int16[this._pos2+1]}get x1(){return this._structArray.int16[this._pos2+2]}get y1(){return this._structArray.int16[this._pos2+3]}get x2(){return this._structArray.int16[this._pos2+4]}get y2(){return this._structArray.int16[this._pos2+5]}get featureIndex(){return this._structArray.uint32[this._pos4+3]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+8]}get bucketIndex(){return this._structArray.uint16[this._pos2+9]}get anchorPoint(){return new N(this.anchorPointX,this.anchorPointY)}}he.prototype.size=20;class Ie extends n{get(s){return new he(this,s)}}Qe("CollisionBoxArray",Ie);class Ee extends zn{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+2]}get numGlyphs(){return this._structArray.uint16[this._pos2+3]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+2]}get lineStartIndex(){return this._structArray.uint32[this._pos4+3]}get lineLength(){return this._structArray.uint32[this._pos4+4]}get segment(){return this._structArray.uint16[this._pos2+10]}get lowerSize(){return this._structArray.uint16[this._pos2+11]}get upperSize(){return this._structArray.uint16[this._pos2+12]}get lineOffsetX(){return this._structArray.float32[this._pos4+7]}get lineOffsetY(){return this._structArray.float32[this._pos4+8]}get writingMode(){return this._structArray.uint8[this._pos1+36]}get placedOrientation(){return this._structArray.uint8[this._pos1+37]}set placedOrientation(s){this._structArray.uint8[this._pos1+37]=s}get hidden(){return this._structArray.uint8[this._pos1+38]}set hidden(s){this._structArray.uint8[this._pos1+38]=s}get crossTileID(){return this._structArray.uint32[this._pos4+10]}set crossTileID(s){this._structArray.uint32[this._pos4+10]=s}get associatedIconIndex(){return this._structArray.int16[this._pos2+22]}}Ee.prototype.size=48;class Fe extends S{get(s){return new Ee(this,s)}}Qe("PlacedSymbolArray",Fe);class De extends zn{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+2]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+3]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+4]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+5]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+6]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+7]}get key(){return this._structArray.uint16[this._pos2+8]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+9]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+10]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+11]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+12]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+13]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+14]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get featureIndex(){return this._structArray.uint16[this._pos2+17]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+18]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+19]}get numIconVertices(){return this._structArray.uint16[this._pos2+20]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+21]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+22]}get crossTileID(){return this._structArray.uint32[this._pos4+12]}set crossTileID(s){this._structArray.uint32[this._pos4+12]=s}get textBoxScale(){return this._structArray.float32[this._pos4+13]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+14]}get textAnchorOffsetStartIndex(){return this._structArray.uint16[this._pos2+30]}get textAnchorOffsetEndIndex(){return this._structArray.uint16[this._pos2+31]}}De.prototype.size=64;class Ve extends P{get(s){return new De(this,s)}}Qe("SymbolInstanceArray",Ve);class Oe extends M{getoffsetX(s){return this.float32[1*s+0]}}Qe("GlyphOffsetArray",Oe);class We extends Oo{getx(s){return this.int16[3*s+0]}gety(s){return this.int16[3*s+1]}gettileUnitDistanceFromAnchor(s){return this.int16[3*s+2]}}Qe("SymbolLineVertexArray",We);class Je extends zn{get textAnchor(){return this._structArray.uint16[this._pos2+0]}get textOffset0(){return this._structArray.float32[this._pos4+1]}get textOffset1(){return this._structArray.float32[this._pos4+2]}}Je.prototype.size=12;class ze extends z{get(s){return new Je(this,s)}}Qe("TextAnchorOffsetArray",ze);class ht extends zn{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}}ht.prototype.size=8;class St extends K{get(s){return new ht(this,s)}}Qe("FeatureIndexArray",St);class gt extends da{}class _t extends da{}class xt extends da{}class ir extends so{}class rr extends zo{}class Qt extends Oa{}class mr extends th{}class rn extends xA{}class mn extends rh{}class Zn extends v{}class En extends l{}class In extends p{}class xn extends _{}class _n extends Z{}const Tn=oi([{name:"a_pos",components:2,type:"Int16"}],4),{members:qi}=Tn;class fn{constructor(s=[]){this._forceNewSegmentOnNextPrepare=!1,this.segments=s}prepareSegment(s,A,d,m){const w=this.segments[this.segments.length-1];return s>fn.MAX_VERTEX_ARRAY_LENGTH&&Cr(`Max vertices per segment is ${fn.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${s}. Consider using the \`fillLargeMeshArrays\` function if you require meshes with more than ${fn.MAX_VERTEX_ARRAY_LENGTH} vertices.`),this._forceNewSegmentOnNextPrepare||!w||w.vertexLength+s>fn.MAX_VERTEX_ARRAY_LENGTH||w.sortKey!==m?this.createNewSegment(A,d,m):w}createNewSegment(s,A,d){const m={vertexOffset:s.length,primitiveOffset:A.length,vertexLength:0,primitiveLength:0,vaos:{}};return d!==void 0&&(m.sortKey=d),this._forceNewSegmentOnNextPrepare=!1,this.segments.push(m),m}getOrCreateLatestSegment(s,A,d){return this.prepareSegment(0,s,A,d)}forceNewSegmentOnNextPrepare(){this._forceNewSegmentOnNextPrepare=!0}get(){return this.segments}destroy(){for(const s of this.segments)for(const A in s.vaos)s.vaos[A].destroy()}static simpleSegment(s,A,d,m){return new fn([{vertexOffset:s,primitiveOffset:A,vertexLength:d,primitiveLength:m,vaos:{},sortKey:0}])}}function ss(c,s){return 256*(c=dt(Math.floor(c),0,255))+dt(Math.floor(s),0,255)}fn.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,Qe("SegmentVector",fn);const Zi=oi([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]);var za,pc,mc,jl={exports:{}},yd={exports:{}},vd={exports:{}},nh=function(){if(mc)return jl.exports;mc=1;var c=(za||(za=1,yd.exports=function(A,d){var m,w,x,E,L,Q,j,G;for(w=A.length-(m=3&A.length),x=d,L=3432918353,Q=461845907,G=0;G<w;)j=255&A.charCodeAt(G)|(255&A.charCodeAt(++G))<<8|(255&A.charCodeAt(++G))<<16|(255&A.charCodeAt(++G))<<24,++G,x=27492+(65535&(E=5*(65535&(x=(x^=j=(65535&(j=(j=(65535&j)*L+(((j>>>16)*L&65535)<<16)&4294967295)<<15|j>>>17))*Q+(((j>>>16)*Q&65535)<<16)&4294967295)<<13|x>>>19))+((5*(x>>>16)&65535)<<16)&4294967295))+((58964+(E>>>16)&65535)<<16);switch(j=0,m){case 3:j^=(255&A.charCodeAt(G+2))<<16;case 2:j^=(255&A.charCodeAt(G+1))<<8;case 1:x^=j=(65535&(j=(j=(65535&(j^=255&A.charCodeAt(G)))*L+(((j>>>16)*L&65535)<<16)&4294967295)<<15|j>>>17))*Q+(((j>>>16)*Q&65535)<<16)&4294967295}return x^=A.length,x=2246822507*(65535&(x^=x>>>16))+((2246822507*(x>>>16)&65535)<<16)&4294967295,x=3266489909*(65535&(x^=x>>>13))+((3266489909*(x>>>16)&65535)<<16)&4294967295,(x^=x>>>16)>>>0}),yd.exports),s=(pc||(pc=1,vd.exports=function(A,d){for(var m,w=A.length,x=d^w,E=0;w>=4;)m=1540483477*(65535&(m=255&A.charCodeAt(E)|(255&A.charCodeAt(++E))<<8|(255&A.charCodeAt(++E))<<16|(255&A.charCodeAt(++E))<<24))+((1540483477*(m>>>16)&65535)<<16),x=1540483477*(65535&x)+((1540483477*(x>>>16)&65535)<<16)^(m=1540483477*(65535&(m^=m>>>24))+((1540483477*(m>>>16)&65535)<<16)),w-=4,++E;switch(w){case 3:x^=(255&A.charCodeAt(E+2))<<16;case 2:x^=(255&A.charCodeAt(E+1))<<8;case 1:x=1540483477*(65535&(x^=255&A.charCodeAt(E)))+((1540483477*(x>>>16)&65535)<<16)}return x=1540483477*(65535&(x^=x>>>13))+((1540483477*(x>>>16)&65535)<<16),(x^=x>>>15)>>>0}),vd.exports);return jl.exports=c,jl.exports.murmur3=c,jl.exports.murmur2=s,jl.exports}(),Ho=g(nh);class fl{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(s,A,d,m){this.ids.push(gc(s)),this.positions.push(A,d,m)}getPositions(s){if(!this.indexed)throw new Error("Trying to get index, but feature positions are not indexed");const A=gc(s);let d=0,m=this.ids.length-1;for(;d<m;){const x=d+m>>1;this.ids[x]>=A?m=x:d=x+1}const w=[];for(;this.ids[d]===A;)w.push({index:this.positions[3*d],start:this.positions[3*d+1],end:this.positions[3*d+2]}),d++;return w}static serialize(s,A){const d=new Float64Array(s.ids),m=new Uint32Array(s.positions);return fu(d,m,0,d.length-1),A&&A.push(d.buffer,m.buffer),{ids:d,positions:m}}static deserialize(s){const A=new fl;return A.ids=s.ids,A.positions=s.positions,A.indexed=!0,A}}function gc(c){const s=+c;return!isNaN(s)&&s<=Number.MAX_SAFE_INTEGER?s:Ho(String(c))}function fu(c,s,A,d){for(;A<d;){const m=c[A+d>>1];let w=A-1,x=d+1;for(;;){do w++;while(c[w]<m);do x--;while(c[x]>m);if(w>=x)break;Ni(c,w,x),Ni(s,3*w,3*x),Ni(s,3*w+1,3*x+1),Ni(s,3*w+2,3*x+2)}x-A<d-x?(fu(c,s,A,x),A=x+1):(fu(c,s,x+1,d),d=x)}}function Ni(c,s,A){const d=c[s];c[s]=c[A],c[A]=d}Qe("FeaturePositionMap",fl);class ai{constructor(s,A){this.gl=s.gl,this.location=A}}class _o extends ai{constructor(s,A){super(s,A),this.current=0}set(s){this.current!==s&&(this.current=s,this.gl.uniform1f(this.location,s))}}class ps extends ai{constructor(s,A){super(s,A),this.current=[0,0,0,0]}set(s){s[0]===this.current[0]&&s[1]===this.current[1]&&s[2]===this.current[2]&&s[3]===this.current[3]||(this.current=s,this.gl.uniform4f(this.location,s[0],s[1],s[2],s[3]))}}class D0 extends ai{constructor(s,A){super(s,A),this.current=ln.transparent}set(s){s.r===this.current.r&&s.g===this.current.g&&s.b===this.current.b&&s.a===this.current.a||(this.current=s,this.gl.uniform4f(this.location,s.r,s.g,s.b,s.a))}}const z_=new Float32Array(16);function ym(c){return[ss(255*c.r,255*c.g),ss(255*c.b,255*c.a)]}class _d{constructor(s,A,d){this.value=s,this.uniformNames=A.map(m=>`u_${m}`),this.type=d}setUniform(s,A,d){s.set(d.constantOr(this.value))}getBinding(s,A,d){return this.type==="color"?new D0(s,A):new _o(s,A)}}class ih{constructor(s,A){this.uniformNames=A.map(d=>`u_${d}`),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(s,A){this.pixelRatioFrom=A.pixelRatio,this.pixelRatioTo=s.pixelRatio,this.patternFrom=A.tlbr,this.patternTo=s.tlbr}setUniform(s,A,d,m){const w=m==="u_pattern_to"?this.patternTo:m==="u_pattern_from"?this.patternFrom:m==="u_pixel_ratio_to"?this.pixelRatioTo:m==="u_pixel_ratio_from"?this.pixelRatioFrom:null;w&&s.set(w)}getBinding(s,A,d){return d.substr(0,9)==="u_pattern"?new ps(s,A):new _o(s,A)}}class bA{constructor(s,A,d,m){this.expression=s,this.type=d,this.maxValue=0,this.paintVertexAttributes=A.map(w=>({name:`a_${w}`,type:"Float32",components:d==="color"?2:1,offset:0})),this.paintVertexArray=new m}populatePaintArray(s,A,d,m,w){const x=this.paintVertexArray.length,E=this.expression.evaluate(new Er(0),A,{},m,[],w);this.paintVertexArray.resize(s),this._setPaintValue(x,s,E)}updatePaintArray(s,A,d,m){const w=this.expression.evaluate({zoom:0},d,m);this._setPaintValue(s,A,w)}_setPaintValue(s,A,d){if(this.type==="color"){const m=ym(d);for(let w=s;w<A;w++)this.paintVertexArray.emplace(w,m[0],m[1])}else{for(let m=s;m<A;m++)this.paintVertexArray.emplace(m,d);this.maxValue=Math.max(this.maxValue,Math.abs(d))}}upload(s){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=s.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class Vs{constructor(s,A,d,m,w,x){this.expression=s,this.uniformNames=A.map(E=>`u_${E}_t`),this.type=d,this.useIntegerZoom=m,this.zoom=w,this.maxValue=0,this.paintVertexAttributes=A.map(E=>({name:`a_${E}`,type:"Float32",components:d==="color"?4:2,offset:0})),this.paintVertexArray=new x}populatePaintArray(s,A,d,m,w){const x=this.expression.evaluate(new Er(this.zoom),A,{},m,[],w),E=this.expression.evaluate(new Er(this.zoom+1),A,{},m,[],w),L=this.paintVertexArray.length;this.paintVertexArray.resize(s),this._setPaintValue(L,s,x,E)}updatePaintArray(s,A,d,m){const w=this.expression.evaluate({zoom:this.zoom},d,m),x=this.expression.evaluate({zoom:this.zoom+1},d,m);this._setPaintValue(s,A,w,x)}_setPaintValue(s,A,d,m){if(this.type==="color"){const w=ym(d),x=ym(m);for(let E=s;E<A;E++)this.paintVertexArray.emplace(E,w[0],w[1],x[0],x[1])}else{for(let w=s;w<A;w++)this.paintVertexArray.emplace(w,d,m);this.maxValue=Math.max(this.maxValue,Math.abs(d),Math.abs(m))}}upload(s){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=s.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(s,A){const d=this.useIntegerZoom?Math.floor(A.zoom):A.zoom,m=dt(this.expression.interpolationFactor(d,this.zoom,this.zoom+1),0,1);s.set(m)}getBinding(s,A,d){return new _o(s,A)}}class BA{constructor(s,A,d,m,w,x){this.expression=s,this.type=A,this.useIntegerZoom=d,this.zoom=m,this.layerId=x,this.zoomInPaintVertexArray=new w,this.zoomOutPaintVertexArray=new w}populatePaintArray(s,A,d){const m=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(s),this.zoomOutPaintVertexArray.resize(s),this._setPaintValues(m,s,A.patterns&&A.patterns[this.layerId],d)}updatePaintArray(s,A,d,m,w){this._setPaintValues(s,A,d.patterns&&d.patterns[this.layerId],w)}_setPaintValues(s,A,d,m){if(!m||!d)return;const{min:w,mid:x,max:E}=d,L=m[w],Q=m[x],j=m[E];if(L&&Q&&j)for(let G=s;G<A;G++)this.zoomInPaintVertexArray.emplace(G,Q.tl[0],Q.tl[1],Q.br[0],Q.br[1],L.tl[0],L.tl[1],L.br[0],L.br[1],Q.pixelRatio,L.pixelRatio),this.zoomOutPaintVertexArray.emplace(G,Q.tl[0],Q.tl[1],Q.br[0],Q.br[1],j.tl[0],j.tl[1],j.br[0],j.br[1],Q.pixelRatio,j.pixelRatio)}upload(s){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=s.createVertexBuffer(this.zoomInPaintVertexArray,Zi.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=s.createVertexBuffer(this.zoomOutPaintVertexArray,Zi.members,this.expression.isStateDependent))}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class vm{constructor(s,A,d){this.binders={},this._buffers=[];const m=[];for(const w in s.paint._values){if(!d(w))continue;const x=s.paint.get(w);if(!(x instanceof wi&&is(x.property.specification)))continue;const E=_m(w,s.type),L=x.value,Q=x.property.specification.type,j=x.property.useIntegerZoom,G=x.property.specification["property-type"],J=G==="cross-faded"||G==="cross-faded-data-driven";if(L.kind==="constant")this.binders[w]=J?new ih(L.value,E):new _d(L.value,E,Q),m.push(`/u_${w}`);else if(L.kind==="source"||J){const ne=wm(w,Q,"source");this.binders[w]=J?new BA(L,Q,j,A,ne,s.id):new bA(L,E,Q,ne),m.push(`/a_${w}`)}else{const ne=wm(w,Q,"composite");this.binders[w]=new Vs(L,E,Q,j,A,ne),m.push(`/z_${w}`)}}this.cacheKey=m.sort().join("")}getMaxValue(s){const A=this.binders[s];return A instanceof bA||A instanceof Vs?A.maxValue:0}populatePaintArrays(s,A,d,m,w){for(const x in this.binders){const E=this.binders[x];(E instanceof bA||E instanceof Vs||E instanceof BA)&&E.populatePaintArray(s,A,d,m,w)}}setConstantPatternPositions(s,A){for(const d in this.binders){const m=this.binders[d];m instanceof ih&&m.setConstantPatternPositions(s,A)}}updatePaintArrays(s,A,d,m,w){let x=!1;for(const E in s){const L=A.getPositions(E);for(const Q of L){const j=d.feature(Q.index);for(const G in this.binders){const J=this.binders[G];if((J instanceof bA||J instanceof Vs||J instanceof BA)&&J.expression.isStateDependent===!0){const ne=m.paint.get(G);J.expression=ne.value,J.updatePaintArray(Q.start,Q.end,j,s[E],w),x=!0}}}}return x}defines(){const s=[];for(const A in this.binders){const d=this.binders[A];(d instanceof _d||d instanceof ih)&&s.push(...d.uniformNames.map(m=>`#define HAS_UNIFORM_${m}`))}return s}getBinderAttributes(){const s=[];for(const A in this.binders){const d=this.binders[A];if(d instanceof bA||d instanceof Vs)for(let m=0;m<d.paintVertexAttributes.length;m++)s.push(d.paintVertexAttributes[m].name);else if(d instanceof BA)for(let m=0;m<Zi.members.length;m++)s.push(Zi.members[m].name)}return s}getBinderUniforms(){const s=[];for(const A in this.binders){const d=this.binders[A];if(d instanceof _d||d instanceof ih||d instanceof Vs)for(const m of d.uniformNames)s.push(m)}return s}getPaintVertexBuffers(){return this._buffers}getUniforms(s,A){const d=[];for(const m in this.binders){const w=this.binders[m];if(w instanceof _d||w instanceof ih||w instanceof Vs){for(const x of w.uniformNames)if(A[x]){const E=w.getBinding(s,A[x],x);d.push({name:x,property:m,binding:E})}}}return d}setUniforms(s,A,d,m){for(const{name:w,property:x,binding:E}of A)this.binders[x].setUniform(E,m,d.get(x),w)}updatePaintBuffers(s){this._buffers=[];for(const A in this.binders){const d=this.binders[A];if(s&&d instanceof BA){const m=s.fromScale===2?d.zoomInPaintVertexBuffer:d.zoomOutPaintVertexBuffer;m&&this._buffers.push(m)}else(d instanceof bA||d instanceof Vs)&&d.paintVertexBuffer&&this._buffers.push(d.paintVertexBuffer)}}upload(s){for(const A in this.binders){const d=this.binders[A];(d instanceof bA||d instanceof Vs||d instanceof BA)&&d.upload(s)}this.updatePaintBuffers()}destroy(){for(const s in this.binders){const A=this.binders[s];(A instanceof bA||A instanceof Vs||A instanceof BA)&&A.destroy()}}}class yc{constructor(s,A,d=()=>!0){this.programConfigurations={};for(const m of s)this.programConfigurations[m.id]=new vm(m,A,d);this.needsUpload=!1,this._featureMap=new fl,this._bufferOffset=0}populatePaintArrays(s,A,d,m,w,x){for(const E in this.programConfigurations)this.programConfigurations[E].populatePaintArrays(s,A,m,w,x);A.id!==void 0&&this._featureMap.add(A.id,d,this._bufferOffset,s),this._bufferOffset=s,this.needsUpload=!0}updatePaintArrays(s,A,d,m){for(const w of d)this.needsUpload=this.programConfigurations[w.id].updatePaintArrays(s,this._featureMap,A,w,m)||this.needsUpload}get(s){return this.programConfigurations[s]}upload(s){if(this.needsUpload){for(const A in this.programConfigurations)this.programConfigurations[A].upload(s);this.needsUpload=!1}}destroy(){for(const s in this.programConfigurations)this.programConfigurations[s].destroy()}}function _m(c,s){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[c]||[c.replace(`${s}-`,"").replace(/-/g,"_")]}function wm(c,s,A){const d={color:{source:Oa,composite:Y},number:{source:M,composite:Oa}},m=function(w){return{"line-pattern":{source:mr,composite:mr},"fill-pattern":{source:mr,composite:mr},"fill-extrusion-pattern":{source:mr,composite:mr}}[w]}(c);return m&&m[A]||d[s][A]}Qe("ConstantBinder",_d),Qe("CrossFadedConstantBinder",ih),Qe("SourceExpressionBinder",bA),Qe("CrossFadedCompositeBinder",BA),Qe("CompositeExpressionBinder",Vs),Qe("ProgramConfiguration",vm,{omit:["_buffers"]}),Qe("ProgramConfigurationSet",yc);const wd=Math.pow(2,14)-1,mC=-wd-1;function xd(c){const s=ie/c.extent,A=c.loadGeometry();for(let d=0;d<A.length;d++){const m=A[d];for(let w=0;w<m.length;w++){const x=m[w],E=Math.round(x.x*s),L=Math.round(x.y*s);x.x=dt(E,mC,wd),x.y=dt(L,mC,wd),(E<x.x||E>x.x+1||L<x.y||L>x.y+1)&&Cr("Geometry exceeds allowed extent, reduce your vector tile buffer size")}}return A}function bd(c,s){return{type:c.type,id:c.id,properties:c.properties,geometry:s?xd(c):[]}}const gC=-32768;function IR(c,s,A,d,m){c.emplaceBack(gC+8*s+d,gC+8*A+m)}class H_{constructor(s){this.zoom=s.zoom,this.globalState=s.globalState,this.overscaling=s.overscaling,this.layers=s.layers,this.layerIds=this.layers.map(A=>A.id),this.index=s.index,this.hasPattern=!1,this.layoutVertexArray=new _t,this.indexArray=new xn,this.segments=new fn,this.programConfigurations=new yc(s.layers,s.zoom),this.stateDependentLayerIds=this.layers.filter(A=>A.isStateDependent()).map(A=>A.id)}populate(s,A,d){const m=this.layers[0],w=[];let x=null,E=!1,L=m.type==="heatmap";if(m.type==="circle"){const j=m;x=j.layout.get("circle-sort-key"),E=!x.isConstant(),L=L||j.paint.get("circle-pitch-alignment")==="map"}const Q=L?A.subdivisionGranularity.circle:1;for(const{feature:j,id:G,index:J,sourceLayerIndex:ne}of s){const oe=this.layers[0]._featureFilter.needGeometry,pe=bd(j,oe);if(!this.layers[0]._featureFilter.filter(new Er(this.zoom,{globalState:this.globalState}),pe,d))continue;const Se=E?x.evaluate(pe,{},d):void 0,Re={id:G,properties:j.properties,type:j.type,sourceLayerIndex:ne,index:J,geometry:oe?pe.geometry:xd(j),patterns:{},sortKey:Se};w.push(Re)}E&&w.sort((j,G)=>j.sortKey-G.sortKey);for(const j of w){const{geometry:G,index:J,sourceLayerIndex:ne}=j,oe=s[J].feature;this.addFeature(j,G,J,d,Q),A.featureIndex.insert(oe,G,J,ne,this.index)}}update(s,A,d){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(s,A,this.stateDependentLayers,d)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(s){this.uploaded||(this.layoutVertexBuffer=s.createVertexBuffer(this.layoutVertexArray,qi),this.indexBuffer=s.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(s),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(s,A,d,m,w=1){let x;switch(w){case 1:x=[0,7];break;case 3:x=[0,2,5,7];break;case 5:x=[0,1,3,4,6,7];break;case 7:x=[0,1,2,3,4,5,6,7];break;default:throw new Error(`Invalid circle bucket granularity: ${w}; valid values are 1, 3, 5, 7.`)}const E=x.length;for(const L of A)for(const Q of L){const j=Q.x,G=Q.y;if(j<0||j>=ie||G<0||G>=ie)continue;const J=this.segments.prepareSegment(E*E,this.layoutVertexArray,this.indexArray,s.sortKey),ne=J.vertexLength;for(let oe=0;oe<E;oe++)for(let pe=0;pe<E;pe++)IR(this.layoutVertexArray,j,G,x[pe],x[oe]);for(let oe=0;oe<E-1;oe++)for(let pe=0;pe<E-1;pe++){const Se=ne+oe*E+pe,Re=ne+(oe+1)*E+pe;this.indexArray.emplaceBack(Se,Re+1,Se+1),this.indexArray.emplaceBack(Se,Re,Re+1)}J.vertexLength+=E*E,J.primitiveLength+=(E-1)*(E-1)*2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,s,d,{},m)}}function yC(c,s){for(let A=0;A<c.length;A++)if(Ef(s,c[A]))return!0;for(let A=0;A<s.length;A++)if(Ef(c,s[A]))return!0;return!!j_(c,s)}function FR(c,s,A){return!!Ef(c,s)||!!V_(s,c,A)}function vC(c,s){if(c.length===1)return wC(s,c[0]);for(let A=0;A<s.length;A++){const d=s[A];for(let m=0;m<d.length;m++)if(Ef(c,d[m]))return!0}for(let A=0;A<c.length;A++)if(wC(s,c[A]))return!0;for(let A=0;A<s.length;A++)if(j_(c,s[A]))return!0;return!1}function TR(c,s,A){if(c.length>1){if(j_(c,s))return!0;for(let d=0;d<s.length;d++)if(V_(s[d],c,A))return!0}for(let d=0;d<c.length;d++)if(V_(c[d],s,A))return!0;return!1}function j_(c,s){if(c.length===0||s.length===0)return!1;for(let A=0;A<c.length-1;A++){const d=c[A],m=c[A+1];for(let w=0;w<s.length-1;w++)if(PR(d,m,s[w],s[w+1]))return!0}return!1}function PR(c,s,A,d){return pr(c,A,d)!==pr(s,A,d)&&pr(c,s,A)!==pr(c,s,d)}function V_(c,s,A){const d=A*A;if(s.length===1)return c.distSqr(s[0])<d;for(let m=1;m<s.length;m++)if(_C(c,s[m-1],s[m])<d)return!0;return!1}function _C(c,s,A){const d=s.distSqr(A);if(d===0)return c.distSqr(s);const m=((c.x-s.x)*(A.x-s.x)+(c.y-s.y)*(A.y-s.y))/d;return c.distSqr(m<0?s:m>1?A:A.sub(s)._mult(m)._add(s))}function wC(c,s){let A,d,m,w=!1;for(let x=0;x<c.length;x++){A=c[x];for(let E=0,L=A.length-1;E<A.length;L=E++)d=A[E],m=A[L],d.y>s.y!=m.y>s.y&&s.x<(m.x-d.x)*(s.y-d.y)/(m.y-d.y)+d.x&&(w=!w)}return w}function Ef(c,s){let A=!1;for(let d=0,m=c.length-1;d<c.length;m=d++){const w=c[d],x=c[m];w.y>s.y!=x.y>s.y&&s.x<(x.x-w.x)*(s.y-w.y)/(x.y-w.y)+w.x&&(A=!A)}return A}function LR(c,s,A){const d=A[0],m=A[2];if(c.x<d.x&&s.x<d.x||c.x>m.x&&s.x>m.x||c.y<d.y&&s.y<d.y||c.y>m.y&&s.y>m.y)return!1;const w=pr(c,s,A[0]);return w!==pr(c,s,A[1])||w!==pr(c,s,A[2])||w!==pr(c,s,A[3])}function xm(c,s,A){const d=s.paint.get(c).value;return d.kind==="constant"?d.value:A.programConfigurations.get(s.id).getMaxValue(c)}function Q0(c){return Math.sqrt(c[0]*c[0]+c[1]*c[1])}function O0(c,s,A,d,m){if(!s[0]&&!s[1])return c;const w=N.convert(s)._mult(m);A==="viewport"&&w._rotate(-d);const x=[];for(let E=0;E<c.length;E++)x.push(c[E].sub(w));return x}let xC,bC;Qe("CircleBucket",H_,{omit:["layers"]});var MR={get paint(){return bC=bC||new gi({"circle-radius":new wr(Me.paint_circle["circle-radius"]),"circle-color":new wr(Me.paint_circle["circle-color"]),"circle-blur":new wr(Me.paint_circle["circle-blur"]),"circle-opacity":new wr(Me.paint_circle["circle-opacity"]),"circle-translate":new sr(Me.paint_circle["circle-translate"]),"circle-translate-anchor":new sr(Me.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new sr(Me.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new sr(Me.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new wr(Me.paint_circle["circle-stroke-width"]),"circle-stroke-color":new wr(Me.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new wr(Me.paint_circle["circle-stroke-opacity"])})},get layout(){return xC=xC||new gi({"circle-sort-key":new wr(Me.layout_circle["circle-sort-key"])})}};class kR extends bi{constructor(s){super(s,MR)}createBucket(s){return new H_(s)}queryRadius(s){const A=s;return xm("circle-radius",this,A)+xm("circle-stroke-width",this,A)+Q0(this.paint.get("circle-translate"))}queryIntersectsFeature({queryGeometry:s,feature:A,featureState:d,geometry:m,transform:w,pixelsToTileUnits:x,unwrappedTileID:E,getElevation:L}){const Q=O0(s,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),-w.bearingInRadians,x),j=this.paint.get("circle-radius").evaluate(A,d)+this.paint.get("circle-stroke-width").evaluate(A,d),G=this.paint.get("circle-pitch-alignment")==="map",J=G?Q:function(oe,pe,Se,Re){return oe.map(ot=>BC(ot,pe,Se,Re))}(Q,w,E,L),ne=G?j*x:j;for(const oe of m)for(const pe of oe){const Se=G?pe:BC(pe,w,E,L);let Re=ne;const ot=w.projectTileCoordinates(pe.x,pe.y,E,L).signedDistanceFromCamera;if(this.paint.get("circle-pitch-scale")==="viewport"&&this.paint.get("circle-pitch-alignment")==="map"?Re*=ot/w.cameraToCenterDistance:this.paint.get("circle-pitch-scale")==="map"&&this.paint.get("circle-pitch-alignment")==="viewport"&&(Re*=w.cameraToCenterDistance/ot),FR(J,Se,Re))return!0}return!1}}function BC(c,s,A,d){const m=s.projectTileCoordinates(c.x,c.y,A,d).point;return new N((.5*m.x+.5)*s.width,(.5*-m.y+.5)*s.height)}class CC extends H_{}let SC;Qe("HeatmapBucket",CC,{omit:["layers"]});var UR={get paint(){return SC=SC||new gi({"heatmap-radius":new wr(Me.paint_heatmap["heatmap-radius"]),"heatmap-weight":new wr(Me.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new sr(Me.paint_heatmap["heatmap-intensity"]),"heatmap-color":new xi(Me.paint_heatmap["heatmap-color"]),"heatmap-opacity":new sr(Me.paint_heatmap["heatmap-opacity"])})}};function K_(c,{width:s,height:A},d,m){if(m){if(m instanceof Uint8ClampedArray)m=new Uint8Array(m.buffer);else if(m.length!==s*A*d)throw new RangeError(`mismatched image size. expected: ${m.length} but got: ${s*A*d}`)}else m=new Uint8Array(s*A*d);return c.width=s,c.height=A,c.data=m,c}function EC(c,{width:s,height:A},d){if(s===c.width&&A===c.height)return;const m=K_({},{width:s,height:A},d);G_(c,m,{x:0,y:0},{x:0,y:0},{width:Math.min(c.width,s),height:Math.min(c.height,A)},d),c.width=s,c.height=A,c.data=m.data}function G_(c,s,A,d,m,w){if(m.width===0||m.height===0)return s;if(m.width>c.width||m.height>c.height||A.x>c.width-m.width||A.y>c.height-m.height)throw new RangeError("out of range source coordinates for image copy");if(m.width>s.width||m.height>s.height||d.x>s.width-m.width||d.y>s.height-m.height)throw new RangeError("out of range destination coordinates for image copy");const x=c.data,E=s.data;if(x===E)throw new Error("srcData equals dstData, so image is already copied");for(let L=0;L<m.height;L++){const Q=((A.y+L)*c.width+A.x)*w,j=((d.y+L)*s.width+d.x)*w;for(let G=0;G<m.width*w;G++)E[j+G]=x[Q+G]}return s}class bm{constructor(s,A){K_(this,s,1,A)}resize(s){EC(this,s,1)}clone(){return new bm({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(s,A,d,m,w){G_(s,A,d,m,w,1)}}class fa{constructor(s,A){K_(this,s,4,A)}resize(s){EC(this,s,4)}replace(s,A){A?this.data.set(s):this.data=s instanceof Uint8ClampedArray?new Uint8Array(s.buffer):s}clone(){return new fa({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(s,A,d,m,w){G_(s,A,d,m,w,4)}setPixel(s,A,d){const m=4*(s*this.width+A);this.data[m+0]=Math.round(255*d.r/d.a),this.data[m+1]=Math.round(255*d.g/d.a),this.data[m+2]=Math.round(255*d.b/d.a),this.data[m+3]=Math.round(255*d.a)}}function IC(c){const s={},A=c.resolution||256,d=c.clips?c.clips.length:1,m=c.image||new fa({width:A,height:d});if(Math.log(A)/Math.LN2%1!=0)throw new Error(`width is not a power of 2 - ${A}`);const w=(x,E,L)=>{s[c.evaluationKey]=L;const Q=c.expression.evaluate(s);m.setPixel(x/4/A,E/4,Q)};if(c.clips)for(let x=0,E=0;x<d;++x,E+=4*A)for(let L=0,Q=0;L<A;L++,Q+=4){const j=L/(A-1),{start:G,end:J}=c.clips[x];w(E,Q,G*(1-j)+J*j)}else for(let x=0,E=0;x<A;x++,E+=4)w(0,E,x/(A-1));return m}Qe("AlphaImage",bm),Qe("RGBAImage",fa);const $_="big-fb";class RR extends bi{createBucket(s){return new CC(s)}constructor(s){super(s,UR),this.heatmapFbos=new Map,this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(s){s==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=IC({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbos.has($_)&&this.heatmapFbos.delete($_)}queryRadius(){return 0}queryIntersectsFeature(){return!1}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}}let FC;var NR={get paint(){return FC=FC||new gi({"hillshade-illumination-direction":new sr(Me.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-altitude":new sr(Me.paint_hillshade["hillshade-illumination-altitude"]),"hillshade-illumination-anchor":new sr(Me.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new sr(Me.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new sr(Me.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new sr(Me.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new sr(Me.paint_hillshade["hillshade-accent-color"]),"hillshade-method":new sr(Me.paint_hillshade["hillshade-method"])})}};class DR extends bi{constructor(s){super(s,NR),this.recalculate({zoom:0,zoomHistory:{}},void 0)}getIlluminationProperties(){let s=this.paint.get("hillshade-illumination-direction").values,A=this.paint.get("hillshade-illumination-altitude").values,d=this.paint.get("hillshade-highlight-color").values,m=this.paint.get("hillshade-shadow-color").values;const w=Math.max(s.length,A.length,d.length,m.length);s=s.concat(Array(w-s.length).fill(s.at(-1))),A=A.concat(Array(w-A.length).fill(A.at(-1))),d=d.concat(Array(w-d.length).fill(d.at(-1))),m=m.concat(Array(w-m.length).fill(m.at(-1)));const x=A.map(Hr);return{directionRadians:s.map(Hr),altitudeRadians:x,shadowColor:m,highlightColor:d}}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}}let TC;var QR={get paint(){return TC=TC||new gi({"color-relief-opacity":new sr(Me["paint_color-relief"]["color-relief-opacity"]),"color-relief-color":new xi(Me["paint_color-relief"]["color-relief-color"])})}};class q_{constructor(s,A,d,m){this.context=s,this.format=d,this.texture=s.gl.createTexture(),this.update(A,m)}update(s,A,d){const{width:m,height:w}=s,x=!(this.size&&this.size[0]===m&&this.size[1]===w||d),{context:E}=this,{gl:L}=E;if(this.useMipmap=!!(A&&A.useMipmap),L.bindTexture(L.TEXTURE_2D,this.texture),E.pixelStoreUnpackFlipY.set(!1),E.pixelStoreUnpack.set(1),E.pixelStoreUnpackPremultiplyAlpha.set(this.format===L.RGBA&&(!A||A.premultiply!==!1)),x)this.size=[m,w],s instanceof HTMLImageElement||s instanceof HTMLCanvasElement||s instanceof HTMLVideoElement||s instanceof ImageData||lr(s)?L.texImage2D(L.TEXTURE_2D,0,this.format,this.format,L.UNSIGNED_BYTE,s):L.texImage2D(L.TEXTURE_2D,0,this.format,m,w,0,this.format,L.UNSIGNED_BYTE,s.data);else{const{x:Q,y:j}=d||{x:0,y:0};s instanceof HTMLImageElement||s instanceof HTMLCanvasElement||s instanceof HTMLVideoElement||s instanceof ImageData||lr(s)?L.texSubImage2D(L.TEXTURE_2D,0,Q,j,L.RGBA,L.UNSIGNED_BYTE,s):L.texSubImage2D(L.TEXTURE_2D,0,Q,j,m,w,L.RGBA,L.UNSIGNED_BYTE,s.data)}this.useMipmap&&this.isSizePowerOfTwo()&&L.generateMipmap(L.TEXTURE_2D),E.pixelStoreUnpackFlipY.setDefault(),E.pixelStoreUnpack.setDefault(),E.pixelStoreUnpackPremultiplyAlpha.setDefault()}bind(s,A,d){const{context:m}=this,{gl:w}=m;w.bindTexture(w.TEXTURE_2D,this.texture),d!==w.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(d=w.LINEAR),s!==this.filter&&(w.texParameteri(w.TEXTURE_2D,w.TEXTURE_MAG_FILTER,s),w.texParameteri(w.TEXTURE_2D,w.TEXTURE_MIN_FILTER,d||s),this.filter=s),A!==this.wrap&&(w.texParameteri(w.TEXTURE_2D,w.TEXTURE_WRAP_S,A),w.texParameteri(w.TEXTURE_2D,w.TEXTURE_WRAP_T,A),this.wrap=A)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:s}=this.context;s.deleteTexture(this.texture),this.texture=null}}class PC{constructor(s,A,d,m=1,w=1,x=1,E=0){if(this.uid=s,A.height!==A.width)throw new RangeError("DEM tiles must be square");if(d&&!["mapbox","terrarium","custom"].includes(d))return void Cr(`"${d}" is not a valid encoding type. Valid types include "mapbox", "terrarium" and "custom".`);this.stride=A.height;const L=this.dim=A.height-2;switch(this.data=new Uint32Array(A.data.buffer),d){case"terrarium":this.redFactor=256,this.greenFactor=1,this.blueFactor=1/256,this.baseShift=32768;break;case"custom":this.redFactor=m,this.greenFactor=w,this.blueFactor=x,this.baseShift=E;break;default:this.redFactor=6553.6,this.greenFactor=25.6,this.blueFactor=.1,this.baseShift=1e4}for(let Q=0;Q<L;Q++)this.data[this._idx(-1,Q)]=this.data[this._idx(0,Q)],this.data[this._idx(L,Q)]=this.data[this._idx(L-1,Q)],this.data[this._idx(Q,-1)]=this.data[this._idx(Q,0)],this.data[this._idx(Q,L)]=this.data[this._idx(Q,L-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(L,-1)]=this.data[this._idx(L-1,0)],this.data[this._idx(-1,L)]=this.data[this._idx(0,L-1)],this.data[this._idx(L,L)]=this.data[this._idx(L-1,L-1)],this.min=Number.MAX_SAFE_INTEGER,this.max=Number.MIN_SAFE_INTEGER;for(let Q=0;Q<L;Q++)for(let j=0;j<L;j++){const G=this.get(Q,j);G>this.max&&(this.max=G),G<this.min&&(this.min=G)}}get(s,A){const d=new Uint8Array(this.data.buffer),m=4*this._idx(s,A);return this.unpack(d[m],d[m+1],d[m+2])}getUnpackVector(){return[this.redFactor,this.greenFactor,this.blueFactor,this.baseShift]}_idx(s,A){if(s<-1||s>=this.dim+1||A<-1||A>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(A+1)*this.stride+(s+1)}unpack(s,A,d){return s*this.redFactor+A*this.greenFactor+d*this.blueFactor-this.baseShift}pack(s){return LC(s,this.getUnpackVector())}getPixels(){return new fa({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}backfillBorder(s,A,d){if(this.dim!==s.dim)throw new Error("dem dimension mismatch");let m=A*this.dim,w=A*this.dim+this.dim,x=d*this.dim,E=d*this.dim+this.dim;switch(A){case-1:m=w-1;break;case 1:w=m+1}switch(d){case-1:x=E-1;break;case 1:E=x+1}const L=-A*this.dim,Q=-d*this.dim;for(let j=x;j<E;j++)for(let G=m;G<w;G++)this.data[this._idx(G,j)]=s.data[this._idx(G+L,j+Q)]}}function LC(c,s){const A=s[0],d=s[1],m=s[2],w=s[3],x=Math.min(A,d,m),E=Math.round((c+w)/x);return{r:Math.floor(E*x/A)%256,g:Math.floor(E*x/d)%256,b:Math.floor(E*x/m)%256}}Qe("DEMData",PC);class OR extends bi{constructor(s){super(s,QR)}_createColorRamp(s){const A={elevationStops:[],colorStops:[]},d=this._transitionablePaint._values["color-relief-color"].value.expression;if(d instanceof ac&&d._styleExpression.expression instanceof rs){this.colorRampExpression=d;const x=d._styleExpression.expression;A.elevationStops=x.labels,A.colorStops=[];for(const E of A.elevationStops)A.colorStops.push(x.evaluate({globals:{elevation:E}}))}if(A.elevationStops.length<1&&(A.elevationStops=[0],A.colorStops=[ln.transparent]),A.elevationStops.length<2&&(A.elevationStops.push(A.elevationStops[0]+1),A.colorStops.push(A.colorStops[0])),A.elevationStops.length<=s)return A;const m={elevationStops:[],colorStops:[]},w=(A.elevationStops.length-1)/(s-1);for(let x=0;x<A.elevationStops.length-.5;x+=w)m.elevationStops.push(A.elevationStops[Math.round(x)]),m.colorStops.push(A.colorStops[Math.round(x)]);return Cr(`Too many colors in specification of ${this.id} color-relief layer, may not render properly.`),m}_colorRampChanged(){return this.colorRampExpression!=this._transitionablePaint._values["color-relief-color"].value.expression}getColorRampTextures(s,A,d){if(this.colorRampTextures&&!this._colorRampChanged())return this.colorRampTextures;const m=this._createColorRamp(A),w=new fa({width:m.colorStops.length,height:1}),x=new fa({width:m.colorStops.length,height:1});for(let E=0;E<m.elevationStops.length;E++){const L=LC(m.elevationStops[E],d);x.setPixel(0,E,new ln(L.r/255,L.g/255,L.b/255,1)),w.setPixel(0,E,m.colorStops[E])}return this.colorRampTextures={elevationTexture:new q_(s,x,s.gl.RGBA),colorTexture:new q_(s,w,s.gl.RGBA)},this.colorRampTextures}hasOffscreenPass(){return this.visibility!=="none"&&!!this.colorRampTextures}}const zR=oi([{name:"a_pos",components:2,type:"Int16"}],4),{members:HR}=zR;function Z_(c,s,A){const d=A.patternDependencies;let m=!1;for(const w of s){const x=w.paint.get(`${c}-pattern`);x.isConstant()||(m=!0);const E=x.constantOr(null);E&&(m=!0,d[E.to]=!0,d[E.from]=!0)}return m}function W_(c,s,A,d,m){const w=m.patternDependencies;for(const x of s){const E=x.paint.get(`${c}-pattern`).value;if(E.kind!=="constant"){let L=E.evaluate({zoom:d-1},A,{},m.availableImages),Q=E.evaluate({zoom:d},A,{},m.availableImages),j=E.evaluate({zoom:d+1},A,{},m.availableImages);L=L&&L.name?L.name:L,Q=Q&&Q.name?Q.name:Q,j=j&&j.name?j.name:j,w[L]=!0,w[Q]=!0,w[j]=!0,A.patterns[x.id]={min:L,mid:Q,max:j}}}return A}function MC(c,s,A,d,m){let w;if(m===function(x,E,L,Q){let j=0;for(let G=E,J=L-Q;G<L;G+=Q)j+=(x[J]-x[G])*(x[G+1]+x[J+1]),J=G;return j}(c,s,A,d)>0)for(let x=s;x<A;x+=d)w=NC(x/d|0,c[x],c[x+1],w);else for(let x=A-d;x>=s;x-=d)w=NC(x/d|0,c[x],c[x+1],w);return w&&If(w,w.next)&&(Em(w),w=w.next),w}function Bd(c,s){if(!c)return c;s||(s=c);let A,d=c;do if(A=!1,d.steiner||!If(d,d.next)&&Wi(d.prev,d,d.next)!==0)d=d.next;else{if(Em(d),d=s=d.prev,d===d.next)break;A=!0}while(A||d!==s);return s}function Bm(c,s,A,d,m,w,x){if(!c)return;!x&&w&&function(L,Q,j,G){let J=L;do J.z===0&&(J.z=X_(J.x,J.y,Q,j,G)),J.prevZ=J.prev,J.nextZ=J.next,J=J.next;while(J!==L);J.prevZ.nextZ=null,J.prevZ=null,function(ne){let oe,pe=1;do{let Se,Re=ne;ne=null;let ot=null;for(oe=0;Re;){oe++;let Ke=Re,ee=0;for(let qe=0;qe<pe&&(ee++,Ke=Ke.nextZ,Ke);qe++);let be=pe;for(;ee>0||be>0&&Ke;)ee!==0&&(be===0||!Ke||Re.z<=Ke.z)?(Se=Re,Re=Re.nextZ,ee--):(Se=Ke,Ke=Ke.nextZ,be--),ot?ot.nextZ=Se:ne=Se,Se.prevZ=ot,ot=Se;Re=Ke}ot.nextZ=null,pe*=2}while(oe>1)}(J)}(c,d,m,w);let E=c;for(;c.prev!==c.next;){const L=c.prev,Q=c.next;if(w?VR(c,d,m,w):jR(c))s.push(L.i,c.i,Q.i),Em(c),c=Q.next,E=Q.next;else if((c=Q)===E){x?x===1?Bm(c=KR(Bd(c),s),s,A,d,m,w,2):x===2&&GR(c,s,A,d,m,w):Bm(Bd(c),s,A,d,m,w,1);break}}}function jR(c){const s=c.prev,A=c,d=c.next;if(Wi(s,A,d)>=0)return!1;const m=s.x,w=A.x,x=d.x,E=s.y,L=A.y,Q=d.y,j=Math.min(m,w,x),G=Math.min(E,L,Q),J=Math.max(m,w,x),ne=Math.max(E,L,Q);let oe=d.next;for(;oe!==s;){if(oe.x>=j&&oe.x<=J&&oe.y>=G&&oe.y<=ne&&Cm(m,E,w,L,x,Q,oe.x,oe.y)&&Wi(oe.prev,oe,oe.next)>=0)return!1;oe=oe.next}return!0}function VR(c,s,A,d){const m=c.prev,w=c,x=c.next;if(Wi(m,w,x)>=0)return!1;const E=m.x,L=w.x,Q=x.x,j=m.y,G=w.y,J=x.y,ne=Math.min(E,L,Q),oe=Math.min(j,G,J),pe=Math.max(E,L,Q),Se=Math.max(j,G,J),Re=X_(ne,oe,s,A,d),ot=X_(pe,Se,s,A,d);let Ke=c.prevZ,ee=c.nextZ;for(;Ke&&Ke.z>=Re&&ee&&ee.z<=ot;){if(Ke.x>=ne&&Ke.x<=pe&&Ke.y>=oe&&Ke.y<=Se&&Ke!==m&&Ke!==x&&Cm(E,j,L,G,Q,J,Ke.x,Ke.y)&&Wi(Ke.prev,Ke,Ke.next)>=0||(Ke=Ke.prevZ,ee.x>=ne&&ee.x<=pe&&ee.y>=oe&&ee.y<=Se&&ee!==m&&ee!==x&&Cm(E,j,L,G,Q,J,ee.x,ee.y)&&Wi(ee.prev,ee,ee.next)>=0))return!1;ee=ee.nextZ}for(;Ke&&Ke.z>=Re;){if(Ke.x>=ne&&Ke.x<=pe&&Ke.y>=oe&&Ke.y<=Se&&Ke!==m&&Ke!==x&&Cm(E,j,L,G,Q,J,Ke.x,Ke.y)&&Wi(Ke.prev,Ke,Ke.next)>=0)return!1;Ke=Ke.prevZ}for(;ee&&ee.z<=ot;){if(ee.x>=ne&&ee.x<=pe&&ee.y>=oe&&ee.y<=Se&&ee!==m&&ee!==x&&Cm(E,j,L,G,Q,J,ee.x,ee.y)&&Wi(ee.prev,ee,ee.next)>=0)return!1;ee=ee.nextZ}return!0}function KR(c,s){let A=c;do{const d=A.prev,m=A.next.next;!If(d,m)&&UC(d,A,A.next,m)&&Sm(d,m)&&Sm(m,d)&&(s.push(d.i,A.i,m.i),Em(A),Em(A.next),A=c=m),A=A.next}while(A!==c);return Bd(A)}function GR(c,s,A,d,m,w){let x=c;do{let E=x.next.next;for(;E!==x.prev;){if(x.i!==E.i&&XR(x,E)){let L=RC(x,E);return x=Bd(x,x.next),L=Bd(L,L.next),Bm(x,s,A,d,m,w,0),void Bm(L,s,A,d,m,w,0)}E=E.next}x=x.next}while(x!==c)}function $R(c,s){let A=c.x-s.x;return A===0&&(A=c.y-s.y,A===0)&&(A=(c.next.y-c.y)/(c.next.x-c.x)-(s.next.y-s.y)/(s.next.x-s.x)),A}function qR(c,s){const A=function(m,w){let x=w;const E=m.x,L=m.y;let Q,j=-1/0;if(If(m,x))return x;do{if(If(m,x.next))return x.next;if(L<=x.y&&L>=x.next.y&&x.next.y!==x.y){const pe=x.x+(L-x.y)*(x.next.x-x.x)/(x.next.y-x.y);if(pe<=E&&pe>j&&(j=pe,Q=x.x<x.next.x?x:x.next,pe===E))return Q}x=x.next}while(x!==w);if(!Q)return null;const G=Q,J=Q.x,ne=Q.y;let oe=1/0;x=Q;do{if(E>=x.x&&x.x>=J&&E!==x.x&&kC(L<ne?E:j,L,J,ne,L<ne?j:E,L,x.x,x.y)){const pe=Math.abs(L-x.y)/(E-x.x);Sm(x,m)&&(pe<oe||pe===oe&&(x.x>Q.x||x.x===Q.x&&ZR(Q,x)))&&(Q=x,oe=pe)}x=x.next}while(x!==G);return Q}(c,s);if(!A)return s;const d=RC(A,c);return Bd(d,d.next),Bd(A,A.next)}function ZR(c,s){return Wi(c.prev,c,s.prev)<0&&Wi(s.next,c,c.next)<0}function X_(c,s,A,d,m){return(c=1431655765&((c=858993459&((c=252645135&((c=16711935&((c=(c-A)*m|0)|c<<8))|c<<4))|c<<2))|c<<1))|(s=1431655765&((s=858993459&((s=252645135&((s=16711935&((s=(s-d)*m|0)|s<<8))|s<<4))|s<<2))|s<<1))<<1}function WR(c){let s=c,A=c;do(s.x<A.x||s.x===A.x&&s.y<A.y)&&(A=s),s=s.next;while(s!==c);return A}function kC(c,s,A,d,m,w,x,E){return(m-x)*(s-E)>=(c-x)*(w-E)&&(c-x)*(d-E)>=(A-x)*(s-E)&&(A-x)*(w-E)>=(m-x)*(d-E)}function Cm(c,s,A,d,m,w,x,E){return!(c===x&&s===E)&&kC(c,s,A,d,m,w,x,E)}function XR(c,s){return c.next.i!==s.i&&c.prev.i!==s.i&&!function(A,d){let m=A;do{if(m.i!==A.i&&m.next.i!==A.i&&m.i!==d.i&&m.next.i!==d.i&&UC(m,m.next,A,d))return!0;m=m.next}while(m!==A);return!1}(c,s)&&(Sm(c,s)&&Sm(s,c)&&function(A,d){let m=A,w=!1;const x=(A.x+d.x)/2,E=(A.y+d.y)/2;do m.y>E!=m.next.y>E&&m.next.y!==m.y&&x<(m.next.x-m.x)*(E-m.y)/(m.next.y-m.y)+m.x&&(w=!w),m=m.next;while(m!==A);return w}(c,s)&&(Wi(c.prev,c,s.prev)||Wi(c,s.prev,s))||If(c,s)&&Wi(c.prev,c,c.next)>0&&Wi(s.prev,s,s.next)>0)}function Wi(c,s,A){return(s.y-c.y)*(A.x-s.x)-(s.x-c.x)*(A.y-s.y)}function If(c,s){return c.x===s.x&&c.y===s.y}function UC(c,s,A,d){const m=H0(Wi(c,s,A)),w=H0(Wi(c,s,d)),x=H0(Wi(A,d,c)),E=H0(Wi(A,d,s));return m!==w&&x!==E||!(m!==0||!z0(c,A,s))||!(w!==0||!z0(c,d,s))||!(x!==0||!z0(A,c,d))||!(E!==0||!z0(A,s,d))}function z0(c,s,A){return s.x<=Math.max(c.x,A.x)&&s.x>=Math.min(c.x,A.x)&&s.y<=Math.max(c.y,A.y)&&s.y>=Math.min(c.y,A.y)}function H0(c){return c>0?1:c<0?-1:0}function Sm(c,s){return Wi(c.prev,c,c.next)<0?Wi(c,s,c.next)>=0&&Wi(c,c.prev,s)>=0:Wi(c,s,c.prev)<0||Wi(c,c.next,s)<0}function RC(c,s){const A=Y_(c.i,c.x,c.y),d=Y_(s.i,s.x,s.y),m=c.next,w=s.prev;return c.next=s,s.prev=c,A.next=m,m.prev=A,d.next=A,A.prev=d,w.next=d,d.prev=w,d}function NC(c,s,A,d){const m=Y_(c,s,A);return d?(m.next=d.next,m.prev=d,d.next.prev=m,d.next=m):(m.prev=m,m.next=m),m}function Em(c){c.next.prev=c.prev,c.prev.next=c.next,c.prevZ&&(c.prevZ.nextZ=c.nextZ),c.nextZ&&(c.nextZ.prevZ=c.prevZ)}function Y_(c,s,A){return{i:c,x:s,y:A,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}class Ff{constructor(s,A){if(A>s)throw new Error("Min granularity must not be greater than base granularity.");this._baseZoomGranularity=s,this._minGranularity=A}getGranularityForZoomLevel(s){return Math.max(Math.floor(this._baseZoomGranularity/(1<<s)),this._minGranularity,1)}}class j0{constructor(s){this.fill=s.fill,this.line=s.line,this.tile=s.tile,this.stencil=s.stencil,this.circle=s.circle}}j0.noSubdivision=new j0({fill:new Ff(0,0),line:new Ff(0,0),tile:new Ff(0,0),stencil:new Ff(0,0),circle:1}),Qe("SubdivisionGranularityExpression",Ff),Qe("SubdivisionGranularitySetting",j0);const Tf=-32768,Im=32767;class YR{constructor(s,A){this._vertexBuffer=[],this._vertexDictionary=new Map,this._used=!1,this._granularity=s,this._granularityCellSize=ie/s,this._canonical=A}_getKey(s,A){return(s+=32768)<<16|A+32768}_vertexToIndex(s,A){if(s<-32768||A<-32768||s>32767||A>32767)throw new Error("Vertex coordinates are out of signed 16 bit integer range.");const d=0|Math.round(s),m=0|Math.round(A),w=this._getKey(d,m);if(this._vertexDictionary.has(w))return this._vertexDictionary.get(w);const x=this._vertexBuffer.length/2;return this._vertexDictionary.set(w,x),this._vertexBuffer.push(d,m),x}_subdivideTrianglesScanline(s){if(this._granularity<2)return function(m,w){const x=[];for(let E=0;E<w.length;E+=3){const L=w[E],Q=w[E+1],j=w[E+2],G=m[2*L],J=m[2*L+1];(m[2*Q]-G)*(m[2*j+1]-J)-(m[2*Q+1]-J)*(m[2*j]-G)>0?(x.push(L),x.push(j),x.push(Q)):(x.push(L),x.push(Q),x.push(j))}return x}(this._vertexBuffer,s);const A=[],d=s.length;for(let m=0;m<d;m+=3){const w=[s[m+0],s[m+1],s[m+2]],x=[this._vertexBuffer[2*s[m+0]+0],this._vertexBuffer[2*s[m+0]+1],this._vertexBuffer[2*s[m+1]+0],this._vertexBuffer[2*s[m+1]+1],this._vertexBuffer[2*s[m+2]+0],this._vertexBuffer[2*s[m+2]+1]];let E=1/0,L=1/0,Q=-1/0,j=-1/0;for(let pe=0;pe<3;pe++){const Se=x[2*pe],Re=x[2*pe+1];E=Math.min(E,Se),Q=Math.max(Q,Se),L=Math.min(L,Re),j=Math.max(j,Re)}if(E===Q||L===j)continue;const G=Math.floor(E/this._granularityCellSize),J=Math.ceil(Q/this._granularityCellSize),ne=Math.floor(L/this._granularityCellSize),oe=Math.ceil(j/this._granularityCellSize);if(G!==J||ne!==oe)for(let pe=ne;pe<oe;pe++){const Se=this._scanlineGenerateVertexRingForCellRow(pe,x,w);JR(this._vertexBuffer,Se,A)}else A.push(...w)}return A}_scanlineGenerateVertexRingForCellRow(s,A,d){const m=s*this._granularityCellSize,w=m+this._granularityCellSize,x=[];for(let E=0;E<3;E++){const L=A[2*E],Q=A[2*E+1],j=A[2*(E+1)%6],G=A[(2*(E+1)+1)%6],J=A[2*(E+2)%6],ne=A[(2*(E+2)+1)%6],oe=j-L,pe=G-Q,Se=oe===0,Re=pe===0,ot=(m-Q)/pe,Ke=(w-Q)/pe,ee=Math.min(ot,Ke),be=Math.max(ot,Ke);if(!Re&&(ee>=1||be<=0)||Re&&(Q<m||Q>w)){G>=m&&G<=w&&x.push(d[(E+1)%3]);continue}!Re&&ee>0&&x.push(this._vertexToIndex(L+oe*ee,Q+pe*ee));const qe=L+oe*Math.max(ee,0),bt=L+oe*Math.min(be,1);Se||this._generateIntraEdgeVertices(x,L,Q,j,G,qe,bt),!Re&&be<1&&x.push(this._vertexToIndex(L+oe*be,Q+pe*be)),(Re||G>=m&&G<=w)&&x.push(d[(E+1)%3]),!Re&&(G<=m||G>=w)&&this._generateInterEdgeVertices(x,L,Q,j,G,J,ne,bt,m,w)}return x}_generateIntraEdgeVertices(s,A,d,m,w,x,E){const L=m-A,Q=w-d,j=Q===0,G=j?Math.min(A,m):Math.min(x,E),J=j?Math.max(A,m):Math.max(x,E),ne=Math.floor(G/this._granularityCellSize)+1,oe=Math.ceil(J/this._granularityCellSize)-1;if(j?A<m:x<E)for(let pe=ne;pe<=oe;pe++){const Se=pe*this._granularityCellSize;s.push(this._vertexToIndex(Se,d+Q*(Se-A)/L))}else for(let pe=oe;pe>=ne;pe--){const Se=pe*this._granularityCellSize;s.push(this._vertexToIndex(Se,d+Q*(Se-A)/L))}}_generateInterEdgeVertices(s,A,d,m,w,x,E,L,Q,j){const G=w-d,J=x-m,ne=E-w,oe=(Q-w)/ne,pe=(j-w)/ne,Se=Math.min(oe,pe),Re=Math.max(oe,pe),ot=m+J*Se;let Ke=Math.floor(Math.min(ot,L)/this._granularityCellSize)+1,ee=Math.ceil(Math.max(ot,L)/this._granularityCellSize)-1,be=L<ot;const qe=ne===0;if(qe&&(E===Q||E===j))return;if(qe||Se>=1||Re<=0){const Ht=d-E,Et=x+(A-x)*Math.min((Q-E)/Ht,(j-E)/Ht);Ke=Math.floor(Math.min(Et,L)/this._granularityCellSize)+1,ee=Math.ceil(Math.max(Et,L)/this._granularityCellSize)-1,be=L<Et}const bt=G>0?j:Q;if(be)for(let Ht=Ke;Ht<=ee;Ht++)s.push(this._vertexToIndex(Ht*this._granularityCellSize,bt));else for(let Ht=ee;Ht>=Ke;Ht--)s.push(this._vertexToIndex(Ht*this._granularityCellSize,bt))}_generateOutline(s){const A=[];for(const d of s){const m=Cd(d,this._granularity,!0),w=this._pointArrayToIndices(m),x=[];for(let E=1;E<w.length;E++)x.push(w[E-1]),x.push(w[E]);A.push(x)}return A}_handlePoles(s){let A=!1,d=!1;this._canonical&&(this._canonical.y===0&&(A=!0),this._canonical.y===(1<<this._canonical.z)-1&&(d=!0)),(A||d)&&this._fillPoles(s,A,d)}_ensureNoPoleVertices(){const s=this._vertexBuffer;for(let A=0;A<s.length;A+=2){const d=s[A+1];d===Tf&&(s[A+1]=-32767),d===Im&&(s[A+1]=32766)}}_generatePoleQuad(s,A,d,m,w,x){m>w!=(x===Tf)?(s.push(A),s.push(d),s.push(this._vertexToIndex(m,x)),s.push(d),s.push(this._vertexToIndex(w,x)),s.push(this._vertexToIndex(m,x))):(s.push(d),s.push(A),s.push(this._vertexToIndex(m,x)),s.push(this._vertexToIndex(w,x)),s.push(d),s.push(this._vertexToIndex(m,x)))}_fillPoles(s,A,d){const m=this._vertexBuffer,w=ie,x=s.length;for(let E=2;E<x;E+=3){const L=s[E-2],Q=s[E-1],j=s[E],G=m[2*L],J=m[2*L+1],ne=m[2*Q],oe=m[2*Q+1],pe=m[2*j],Se=m[2*j+1];A&&(J===0&&oe===0&&this._generatePoleQuad(s,L,Q,G,ne,Tf),oe===0&&Se===0&&this._generatePoleQuad(s,Q,j,ne,pe,Tf),Se===0&&J===0&&this._generatePoleQuad(s,j,L,pe,G,Tf)),d&&(J===w&&oe===w&&this._generatePoleQuad(s,L,Q,G,ne,Im),oe===w&&Se===w&&this._generatePoleQuad(s,Q,j,ne,pe,Im),Se===w&&J===w&&this._generatePoleQuad(s,j,L,pe,G,Im))}}_initializeVertices(s){for(let A=0;A<s.length;A+=2)this._vertexToIndex(s[A],s[A+1])}subdividePolygonInternal(s,A){if(this._used)throw new Error("Subdivision: multiple use not allowed.");this._used=!0;const{flattened:d,holeIndices:m}=function(E){const L=[],Q=[];for(const j of E)if(j.length!==0){j!==E[0]&&L.push(Q.length/2);for(let G=0;G<j.length;G++)Q.push(j[G].x),Q.push(j[G].y)}return{flattened:Q,holeIndices:L}}(s);let w;this._initializeVertices(d);try{const E=function(Q,j,G=2){const J=j&&j.length,ne=J?j[0]*G:Q.length;let oe=MC(Q,0,ne,G,!0);const pe=[];if(!oe||oe.next===oe.prev)return pe;let Se,Re,ot;if(J&&(oe=function(Ke,ee,be,qe){const bt=[];for(let Ht=0,Et=ee.length;Ht<Et;Ht++){const Tt=MC(Ke,ee[Ht]*qe,Ht<Et-1?ee[Ht+1]*qe:Ke.length,qe,!1);Tt===Tt.next&&(Tt.steiner=!0),bt.push(WR(Tt))}bt.sort($R);for(let Ht=0;Ht<bt.length;Ht++)be=qR(bt[Ht],be);return be}(Q,j,oe,G)),Q.length>80*G){Se=1/0,Re=1/0;let Ke=-1/0,ee=-1/0;for(let be=G;be<ne;be+=G){const qe=Q[be],bt=Q[be+1];qe<Se&&(Se=qe),bt<Re&&(Re=bt),qe>Ke&&(Ke=qe),bt>ee&&(ee=bt)}ot=Math.max(Ke-Se,ee-Re),ot=ot!==0?32767/ot:0}return Bm(oe,pe,G,Se,Re,ot,0),pe}(d,m),L=this._convertIndices(d,E);w=this._subdivideTrianglesScanline(L)}catch(E){console.error(E)}let x=[];return A&&(x=this._generateOutline(s)),this._ensureNoPoleVertices(),this._handlePoles(w),{verticesFlattened:this._vertexBuffer,indicesTriangles:w,indicesLineList:x}}_convertIndices(s,A){const d=[];for(let m=0;m<A.length;m++)d.push(this._vertexToIndex(s[2*A[m]],s[2*A[m]+1]));return d}_pointArrayToIndices(s){const A=[];for(let d=0;d<s.length;d++){const m=s[d];A.push(this._vertexToIndex(m.x,m.y))}return A}}function DC(c,s,A,d=!0){return new YR(A,s).subdividePolygonInternal(c,d)}function Cd(c,s,A=!1){if(!c||c.length<1)return[];if(c.length<2)return[];const d=c[0],m=c[c.length-1],w=A&&(d.x!==m.x||d.y!==m.y);if(s<2)return w?[...c,c[0]]:[...c];const x=Math.floor(ie/s),E=[];E.push(new N(c[0].x,c[0].y));const L=c.length,Q=w?L:L-1;for(let j=0;j<Q;j++){const G=c[j],J=j<L-1?c[j+1]:c[0],ne=G.x,oe=G.y,pe=J.x,Se=J.y,Re=ne!==pe,ot=oe!==Se;if(!Re&&!ot)continue;const Ke=pe-ne,ee=Se-oe,be=Math.abs(Ke),qe=Math.abs(ee);let bt=ne,Ht=oe;for(;;){const Tt=Ke>0?(Math.floor(bt/x)+1)*x:(Math.ceil(bt/x)-1)*x,Xt=ee>0?(Math.floor(Ht/x)+1)*x:(Math.ceil(Ht/x)-1)*x,Vt=Math.abs(bt-Tt),er=Math.abs(Ht-Xt),kt=Math.abs(bt-pe),yr=Math.abs(Ht-Se),Rr=Re?Vt/be:Number.POSITIVE_INFINITY,kr=ot?er/qe:Number.POSITIVE_INFINITY;if((kt<=Vt||!Re)&&(yr<=er||!ot))break;if(Rr<kr&&Re||!ot){bt=Tt,Ht+=ee*Rr;const Sr=new N(bt,Math.round(Ht));E[E.length-1].x===Sr.x&&E[E.length-1].y===Sr.y||E.push(Sr)}else{bt+=Ke*kr,Ht=Xt;const Sr=new N(Math.round(bt),Ht);E[E.length-1].x===Sr.x&&E[E.length-1].y===Sr.y||E.push(Sr)}}const Et=new N(pe,Se);E[E.length-1].x===Et.x&&E[E.length-1].y===Et.y||E.push(Et)}return E}function JR(c,s,A){if(s.length===0)throw new Error("Subdivision vertex ring is empty.");let d=0,m=c[2*s[0]];for(let L=1;L<s.length;L++){const Q=c[2*s[L]];Q<m&&(m=Q,d=L)}const w=s.length;let x=d,E=(x+1)%w;for(;;){const L=x-1>=0?x-1:w-1,Q=(E+1)%w,j=c[2*s[L]],G=c[2*s[Q]],J=c[2*s[x]],ne=c[2*s[x]+1],oe=c[2*s[E]+1];let pe=!1;if(j<G)pe=!0;else if(j>G)pe=!1;else{const Se=oe-ne,Re=-(c[2*s[E]]-J),ot=ne<oe?1:-1;((j-J)*Se+(c[2*s[L]+1]-ne)*Re)*ot>((G-J)*Se+(c[2*s[Q]+1]-ne)*Re)*ot&&(pe=!0)}if(pe){const Se=s[L],Re=s[x],ot=s[E];Se!==Re&&Se!==ot&&Re!==ot&&A.push(ot,Re,Se),x--,x<0&&(x=w-1)}else{const Se=s[Q],Re=s[x],ot=s[E];Se!==Re&&Se!==ot&&Re!==ot&&A.push(ot,Re,Se),E++,E>=w&&(E=0)}if(L===Q)break}}function QC(c,s,A,d,m,w,x,E,L){const Q=m.length/2,j=x&&E&&L;if(Q<fn.MAX_VERTEX_ARRAY_LENGTH){const G=s.prepareSegment(Q,A,d),J=G.vertexLength;for(let pe=0;pe<w.length;pe+=3)d.emplaceBack(J+w[pe],J+w[pe+1],J+w[pe+2]);let ne,oe;G.vertexLength+=Q,G.primitiveLength+=w.length/3,j&&(oe=x.prepareSegment(Q,A,E),ne=oe.vertexLength,oe.vertexLength+=Q);for(let pe=0;pe<m.length;pe+=2)c(m[pe],m[pe+1]);if(j)for(let pe=0;pe<L.length;pe++){const Se=L[pe];for(let Re=1;Re<Se.length;Re+=2)E.emplaceBack(ne+Se[Re-1],ne+Se[Re]);oe.primitiveLength+=Se.length/2}}else(function(G,J,ne,oe,pe,Se){const Re=[];for(let qe=0;qe<oe.length/2;qe++)Re.push(-1);const ot={count:0};let Ke=0,ee=G.getOrCreateLatestSegment(J,ne),be=ee.vertexLength;for(let qe=2;qe<pe.length;qe+=3){const bt=pe[qe-2],Ht=pe[qe-1],Et=pe[qe];let Tt=Re[bt]<Ke,Xt=Re[Ht]<Ke,Vt=Re[Et]<Ke;ee.vertexLength+((Tt?1:0)+(Xt?1:0)+(Vt?1:0))>fn.MAX_VERTEX_ARRAY_LENGTH&&(ee=G.createNewSegment(J,ne),Ke=ot.count,Tt=!0,Xt=!0,Vt=!0,be=0);const er=Fm(Re,oe,Se,ot,bt,Tt,ee),kt=Fm(Re,oe,Se,ot,Ht,Xt,ee),yr=Fm(Re,oe,Se,ot,Et,Vt,ee);ne.emplaceBack(be+er-Ke,be+kt-Ke,be+yr-Ke),ee.primitiveLength++}})(s,A,d,m,w,c),j&&function(G,J,ne,oe,pe,Se){const Re=[];for(let qe=0;qe<oe.length/2;qe++)Re.push(-1);const ot={count:0};let Ke=0,ee=G.getOrCreateLatestSegment(J,ne),be=ee.vertexLength;for(let qe=0;qe<pe.length;qe++){const bt=pe[qe];for(let Ht=1;Ht<pe[qe].length;Ht+=2){const Et=bt[Ht-1],Tt=bt[Ht];let Xt=Re[Et]<Ke,Vt=Re[Tt]<Ke;ee.vertexLength+((Xt?1:0)+(Vt?1:0))>fn.MAX_VERTEX_ARRAY_LENGTH&&(ee=G.createNewSegment(J,ne),Ke=ot.count,Xt=!0,Vt=!0,be=0);const er=Fm(Re,oe,Se,ot,Et,Xt,ee),kt=Fm(Re,oe,Se,ot,Tt,Vt,ee);ne.emplaceBack(be+er-Ke,be+kt-Ke),ee.primitiveLength++}}}(x,A,E,m,L,c),s.forceNewSegmentOnNextPrepare(),x==null||x.forceNewSegmentOnNextPrepare()}function Fm(c,s,A,d,m,w,x){if(w){const E=d.count;return A(s[2*m],s[2*m+1]),c[m]=d.count,d.count++,x.vertexLength++,E}return c[m]}class J_{constructor(s){this.zoom=s.zoom,this.globalState=s.globalState,this.overscaling=s.overscaling,this.layers=s.layers,this.layerIds=this.layers.map(A=>A.id),this.index=s.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new xt,this.indexArray=new xn,this.indexArray2=new _n,this.programConfigurations=new yc(s.layers,s.zoom),this.segments=new fn,this.segments2=new fn,this.stateDependentLayerIds=this.layers.filter(A=>A.isStateDependent()).map(A=>A.id)}populate(s,A,d){this.hasPattern=Z_("fill",this.layers,A);const m=this.layers[0].layout.get("fill-sort-key"),w=!m.isConstant(),x=[];for(const{feature:E,id:L,index:Q,sourceLayerIndex:j}of s){const G=this.layers[0]._featureFilter.needGeometry,J=bd(E,G);if(!this.layers[0]._featureFilter.filter(new Er(this.zoom,{globalState:this.globalState}),J,d))continue;const ne=w?m.evaluate(J,{},d,A.availableImages):void 0,oe={id:L,properties:E.properties,type:E.type,sourceLayerIndex:j,index:Q,geometry:G?J.geometry:xd(E),patterns:{},sortKey:ne};x.push(oe)}w&&x.sort((E,L)=>E.sortKey-L.sortKey);for(const E of x){const{geometry:L,index:Q,sourceLayerIndex:j}=E;if(this.hasPattern){const G=W_("fill",this.layers,E,this.zoom,A);this.patternFeatures.push(G)}else this.addFeature(E,L,Q,d,{},A.subdivisionGranularity);A.featureIndex.insert(s[Q].feature,L,Q,j,this.index)}}update(s,A,d){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(s,A,this.stateDependentLayers,d)}addFeatures(s,A,d){for(const m of this.patternFeatures)this.addFeature(m,m.geometry,m.index,A,d,s.subdivisionGranularity)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(s){this.uploaded||(this.layoutVertexBuffer=s.createVertexBuffer(this.layoutVertexArray,HR),this.indexBuffer=s.createIndexBuffer(this.indexArray),this.indexBuffer2=s.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(s),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(s,A,d,m,w,x){for(const E of Dl(A,500)){const L=DC(E,m,x.fill.getGranularityForZoomLevel(m.z)),Q=this.layoutVertexArray;QC((j,G)=>{Q.emplaceBack(j,G)},this.segments,this.layoutVertexArray,this.indexArray,L.verticesFlattened,L.indicesTriangles,this.segments2,this.indexArray2,L.indicesLineList)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,s,d,w,m)}}let OC,zC;Qe("FillBucket",J_,{omit:["layers","patternFeatures"]});var eN={get paint(){return zC=zC||new gi({"fill-antialias":new sr(Me.paint_fill["fill-antialias"]),"fill-opacity":new wr(Me.paint_fill["fill-opacity"]),"fill-color":new wr(Me.paint_fill["fill-color"]),"fill-outline-color":new wr(Me.paint_fill["fill-outline-color"]),"fill-translate":new sr(Me.paint_fill["fill-translate"]),"fill-translate-anchor":new sr(Me.paint_fill["fill-translate-anchor"]),"fill-pattern":new js(Me.paint_fill["fill-pattern"])})},get layout(){return OC=OC||new gi({"fill-sort-key":new wr(Me.layout_fill["fill-sort-key"])})}};class tN extends bi{constructor(s){super(s,eN)}recalculate(s,A){super.recalculate(s,A);const d=this.paint._values["fill-outline-color"];d.value.kind==="constant"&&d.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(s){return new J_(s)}queryRadius(){return Q0(this.paint.get("fill-translate"))}queryIntersectsFeature({queryGeometry:s,geometry:A,transform:d,pixelsToTileUnits:m}){return vC(O0(s,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),-d.bearingInRadians,m),A)}isTileClipped(){return!0}}const rN=oi([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),nN=oi([{name:"a_centroid",components:2,type:"Int16"}],4),{members:iN}=rN;var ew,HC,tw,jC,rw,VC,KC,V0={};function GC(){if(HC)return ew;HC=1;var c=I();function s(m,w,x,E,L){this.properties={},this.extent=x,this.type=0,this._pbf=m,this._geometry=-1,this._keys=E,this._values=L,m.readFields(A,this,w)}function A(m,w,x){m==1?w.id=x.readVarint():m==2?function(E,L){for(var Q=E.readVarint()+E.pos;E.pos<Q;){var j=L._keys[E.readVarint()],G=L._values[E.readVarint()];L.properties[j]=G}}(x,w):m==3?w.type=x.readVarint():m==4&&(w._geometry=x.pos)}function d(m){for(var w,x,E=0,L=0,Q=m.length,j=Q-1;L<Q;j=L++)E+=((x=m[j]).x-(w=m[L]).x)*(w.y+x.y);return E}return ew=s,s.types=["Unknown","Point","LineString","Polygon"],s.prototype.loadGeometry=function(){var m=this._pbf;m.pos=this._geometry;for(var w,x=m.readVarint()+m.pos,E=1,L=0,Q=0,j=0,G=[];m.pos<x;){if(L<=0){var J=m.readVarint();E=7&J,L=J>>3}if(L--,E===1||E===2)Q+=m.readSVarint(),j+=m.readSVarint(),E===1&&(w&&G.push(w),w=[]),w.push(new c(Q,j));else{if(E!==7)throw new Error("unknown command "+E);w&&w.push(w[0].clone())}}return w&&G.push(w),G},s.prototype.bbox=function(){var m=this._pbf;m.pos=this._geometry;for(var w=m.readVarint()+m.pos,x=1,E=0,L=0,Q=0,j=1/0,G=-1/0,J=1/0,ne=-1/0;m.pos<w;){if(E<=0){var oe=m.readVarint();x=7&oe,E=oe>>3}if(E--,x===1||x===2)(L+=m.readSVarint())<j&&(j=L),L>G&&(G=L),(Q+=m.readSVarint())<J&&(J=Q),Q>ne&&(ne=Q);else if(x!==7)throw new Error("unknown command "+x)}return[j,J,G,ne]},s.prototype.toGeoJSON=function(m,w,x){var E,L,Q=this.extent*Math.pow(2,x),j=this.extent*m,G=this.extent*w,J=this.loadGeometry(),ne=s.types[this.type];function oe(Re){for(var ot=0;ot<Re.length;ot++){var Ke=Re[ot];Re[ot]=[360*(Ke.x+j)/Q-180,360/Math.PI*Math.atan(Math.exp((180-360*(Ke.y+G)/Q)*Math.PI/180))-90]}}switch(this.type){case 1:var pe=[];for(E=0;E<J.length;E++)pe[E]=J[E][0];oe(J=pe);break;case 2:for(E=0;E<J.length;E++)oe(J[E]);break;case 3:for(J=function(Re){var ot=Re.length;if(ot<=1)return[Re];for(var Ke,ee,be=[],qe=0;qe<ot;qe++){var bt=d(Re[qe]);bt!==0&&(ee===void 0&&(ee=bt<0),ee===bt<0?(Ke&&be.push(Ke),Ke=[Re[qe]]):Ke.push(Re[qe]))}return Ke&&be.push(Ke),be}(J),E=0;E<J.length;E++)for(L=0;L<J[E].length;L++)oe(J[E][L])}J.length===1?J=J[0]:ne="Multi"+ne;var Se={type:"Feature",geometry:{type:ne,coordinates:J},properties:this.properties};return"id"in this&&(Se.id=this.id),Se},ew}function $C(){if(jC)return tw;jC=1;var c=GC();function s(d,m){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=d,this._keys=[],this._values=[],this._features=[],d.readFields(A,this,m),this.length=this._features.length}function A(d,m,w){d===15?m.version=w.readVarint():d===1?m.name=w.readString():d===5?m.extent=w.readVarint():d===2?m._features.push(w.pos):d===3?m._keys.push(w.readString()):d===4&&m._values.push(function(x){for(var E=null,L=x.readVarint()+x.pos;x.pos<L;){var Q=x.readVarint()>>3;E=Q===1?x.readString():Q===2?x.readFloat():Q===3?x.readDouble():Q===4?x.readVarint64():Q===5?x.readVarint():Q===6?x.readSVarint():Q===7?x.readBoolean():null}return E}(w))}return tw=s,s.prototype.feature=function(d){if(d<0||d>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[d];var m=this._pbf.readVarint()+this._pbf.pos;return new c(this._pbf,m,this.extent,this._keys,this._values)},tw}function qC(){return KC||(KC=1,V0.VectorTile=function(){if(VC)return rw;VC=1;var c=$C();function s(A,d,m){if(A===3){var w=new c(m,m.readVarint()+m.pos);w.length&&(d[w.name]=w)}}return rw=function(A,d){this.layers=A.readFields(s,{},d)},rw}(),V0.VectorTileFeature=GC(),V0.VectorTileLayer=$C()),V0}var Tm=g(qC());const sN=Tm.VectorTileFeature.types,nw=Math.pow(2,13);function Pm(c,s,A,d,m,w,x,E){c.emplaceBack(s,A,2*Math.floor(d*nw)+x,m*nw*2,w*nw*2,Math.round(E))}class iw{constructor(s){this.zoom=s.zoom,this.globalState=s.globalState,this.overscaling=s.overscaling,this.layers=s.layers,this.layerIds=this.layers.map(A=>A.id),this.index=s.index,this.hasPattern=!1,this.layoutVertexArray=new ir,this.centroidVertexArray=new gt,this.indexArray=new xn,this.programConfigurations=new yc(s.layers,s.zoom),this.segments=new fn,this.stateDependentLayerIds=this.layers.filter(A=>A.isStateDependent()).map(A=>A.id)}populate(s,A,d){this.features=[],this.hasPattern=Z_("fill-extrusion",this.layers,A);for(const{feature:m,id:w,index:x,sourceLayerIndex:E}of s){const L=this.layers[0]._featureFilter.needGeometry,Q=bd(m,L);if(!this.layers[0]._featureFilter.filter(new Er(this.zoom,{globalState:this.globalState}),Q,d))continue;const j={id:w,sourceLayerIndex:E,index:x,geometry:L?Q.geometry:xd(m),properties:m.properties,type:m.type,patterns:{}};this.hasPattern?this.features.push(W_("fill-extrusion",this.layers,j,this.zoom,A)):this.addFeature(j,j.geometry,x,d,{},A.subdivisionGranularity),A.featureIndex.insert(m,j.geometry,x,E,this.index,!0)}}addFeatures(s,A,d){for(const m of this.features){const{geometry:w}=m;this.addFeature(m,w,m.index,A,d,s.subdivisionGranularity)}}update(s,A,d){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(s,A,this.stateDependentLayers,d)}isEmpty(){return this.layoutVertexArray.length===0&&this.centroidVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(s){this.uploaded||(this.layoutVertexBuffer=s.createVertexBuffer(this.layoutVertexArray,iN),this.centroidVertexBuffer=s.createVertexBuffer(this.centroidVertexArray,nN.members,!0),this.indexBuffer=s.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(s),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.centroidVertexBuffer.destroy())}addFeature(s,A,d,m,w,x){for(const E of Dl(A,500)){const L={x:0,y:0,sampleCount:0},Q=this.layoutVertexArray.length;this.processPolygon(L,m,s,E,x);const j=this.layoutVertexArray.length-Q,G=Math.floor(L.x/L.sampleCount),J=Math.floor(L.y/L.sampleCount);for(let ne=0;ne<j;ne++)this.centroidVertexArray.emplaceBack(G,J)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,s,d,w,m)}processPolygon(s,A,d,m,w){if(m.length<1||ZC(m[0]))return;for(const G of m)G.length!==0&&oN(s,G);const x={segment:this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray)},E=w.fill.getGranularityForZoomLevel(A.z),L=sN[d.type]==="Polygon";for(const G of m){if(G.length===0||ZC(G))continue;const J=Cd(G,E,L);this._generateSideFaces(J,x)}if(!L)return;const Q=DC(m,A,E,!1),j=this.layoutVertexArray;QC((G,J)=>{Pm(j,G,J,0,0,1,1,0)},this.segments,this.layoutVertexArray,this.indexArray,Q.verticesFlattened,Q.indicesTriangles)}_generateSideFaces(s,A){let d=0;for(let m=1;m<s.length;m++){const w=s[m],x=s[m-1];if(aN(w,x))continue;A.segment.vertexLength+4>fn.MAX_VERTEX_ARRAY_LENGTH&&(A.segment=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));const E=w.sub(x)._perp()._unit(),L=x.dist(w);d+L>32768&&(d=0),Pm(this.layoutVertexArray,w.x,w.y,E.x,E.y,0,0,d),Pm(this.layoutVertexArray,w.x,w.y,E.x,E.y,0,1,d),d+=L,Pm(this.layoutVertexArray,x.x,x.y,E.x,E.y,0,0,d),Pm(this.layoutVertexArray,x.x,x.y,E.x,E.y,0,1,d);const Q=A.segment.vertexLength;this.indexArray.emplaceBack(Q,Q+2,Q+1),this.indexArray.emplaceBack(Q+1,Q+2,Q+3),A.segment.vertexLength+=4,A.segment.primitiveLength+=2}}}function oN(c,s){for(let A=0;A<s.length;A++){const d=s[A];A===s.length-1&&s[0].x===d.x&&s[0].y===d.y||(c.x+=d.x,c.y+=d.y,c.sampleCount++)}}function aN(c,s){return c.x===s.x&&(c.x<0||c.x>ie)||c.y===s.y&&(c.y<0||c.y>ie)}function ZC(c){return c.every(s=>s.x<0)||c.every(s=>s.x>ie)||c.every(s=>s.y<0)||c.every(s=>s.y>ie)}let WC;Qe("FillExtrusionBucket",iw,{omit:["layers","features"]});var lN={get paint(){return WC=WC||new gi({"fill-extrusion-opacity":new sr(Me["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new wr(Me["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new sr(Me["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new sr(Me["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new js(Me["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new wr(Me["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new wr(Me["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new sr(Me["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})}};class AN extends bi{constructor(s){super(s,lN)}createBucket(s){return new iw(s)}queryRadius(){return Q0(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}queryIntersectsFeature({queryGeometry:s,feature:A,featureState:d,geometry:m,transform:w,pixelsToTileUnits:x,pixelPosMatrix:E}){const L=O0(s,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),-w.bearingInRadians,x),Q=this.paint.get("fill-extrusion-height").evaluate(A,d),j=this.paint.get("fill-extrusion-base").evaluate(A,d),G=function(ne,oe){const pe=[];for(const Se of ne){const Re=[Se.x,Se.y,0,1];At(Re,Re,oe),pe.push(new N(Re[0]/Re[3],Re[1]/Re[3]))}return pe}(L,E),J=function(ne,oe,pe,Se){const Re=[],ot=[],Ke=Se[8]*oe,ee=Se[9]*oe,be=Se[10]*oe,qe=Se[11]*oe,bt=Se[8]*pe,Ht=Se[9]*pe,Et=Se[10]*pe,Tt=Se[11]*pe;for(const Xt of ne){const Vt=[],er=[];for(const kt of Xt){const yr=kt.x,Rr=kt.y,kr=Se[0]*yr+Se[4]*Rr+Se[12],Sr=Se[1]*yr+Se[5]*Rr+Se[13],gn=Se[2]*yr+Se[6]*Rr+Se[14],Ti=Se[3]*yr+Se[7]*Rr+Se[15],ms=gn+be,ao=Ti+qe,ml=kr+bt,pa=Sr+Ht,Ks=gn+Et,Bi=Ti+Tt,Is=new N((kr+Ke)/ao,(Sr+ee)/ao);Is.z=ms/ao,Vt.push(Is);const Gs=new N(ml/Bi,pa/Bi);Gs.z=Ks/Bi,er.push(Gs)}Re.push(Vt),ot.push(er)}return[Re,ot]}(m,j,Q,E);return function(ne,oe,pe){let Se=1/0;vC(pe,oe)&&(Se=XC(pe,oe[0]));for(let Re=0;Re<oe.length;Re++){const ot=oe[Re],Ke=ne[Re];for(let ee=0;ee<ot.length-1;ee++){const be=ot[ee],qe=[be,ot[ee+1],Ke[ee+1],Ke[ee],be];yC(pe,qe)&&(Se=Math.min(Se,XC(pe,qe)))}}return Se!==1/0&&Se}(J[0],J[1],G)}}function Lm(c,s){return c.x*s.x+c.y*s.y}function XC(c,s){if(c.length===1){let A=0;const d=s[A++];let m;for(;!m||d.equals(m);)if(m=s[A++],!m)return 1/0;for(;A<s.length;A++){const w=s[A],x=c[0],E=m.sub(d),L=w.sub(d),Q=x.sub(d),j=Lm(E,E),G=Lm(E,L),J=Lm(L,L),ne=Lm(Q,E),oe=Lm(Q,L),pe=j*J-G*G,Se=(J*ne-G*oe)/pe,Re=(j*oe-G*ne)/pe,ot=d.z*(1-Se-Re)+m.z*Se+w.z*Re;if(isFinite(ot))return ot}return 1/0}{let A=1/0;for(const d of s)A=Math.min(A,d.z);return A}}const cN=oi([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),{members:uN}=cN,hN=oi([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]),{members:dN}=hN,fN=Tm.VectorTileFeature.types,pN=Math.cos(Math.PI/180*37.5),YC=Math.pow(2,14)/.5;class sw{constructor(s){this.zoom=s.zoom,this.globalState=s.globalState,this.overscaling=s.overscaling,this.layers=s.layers,this.layerIds=this.layers.map(A=>A.id),this.index=s.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(A=>{this.gradients[A.id]={}}),this.layoutVertexArray=new rr,this.layoutVertexArray2=new Qt,this.indexArray=new xn,this.programConfigurations=new yc(s.layers,s.zoom),this.segments=new fn,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(A=>A.isStateDependent()).map(A=>A.id)}populate(s,A,d){this.hasPattern=Z_("line",this.layers,A);const m=this.layers[0].layout.get("line-sort-key"),w=!m.isConstant(),x=[];for(const{feature:E,id:L,index:Q,sourceLayerIndex:j}of s){const G=this.layers[0]._featureFilter.needGeometry,J=bd(E,G);if(!this.layers[0]._featureFilter.filter(new Er(this.zoom,{globalState:this.globalState}),J,d))continue;const ne=w?m.evaluate(J,{},d):void 0,oe={id:L,properties:E.properties,type:E.type,sourceLayerIndex:j,index:Q,geometry:G?J.geometry:xd(E),patterns:{},sortKey:ne};x.push(oe)}w&&x.sort((E,L)=>E.sortKey-L.sortKey);for(const E of x){const{geometry:L,index:Q,sourceLayerIndex:j}=E;if(this.hasPattern){const G=W_("line",this.layers,E,this.zoom,A);this.patternFeatures.push(G)}else this.addFeature(E,L,Q,d,{},A.subdivisionGranularity);A.featureIndex.insert(s[Q].feature,L,Q,j,this.index)}}update(s,A,d){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(s,A,this.stateDependentLayers,d)}addFeatures(s,A,d){for(const m of this.patternFeatures)this.addFeature(m,m.geometry,m.index,A,d,s.subdivisionGranularity)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(s){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=s.createVertexBuffer(this.layoutVertexArray2,dN)),this.layoutVertexBuffer=s.createVertexBuffer(this.layoutVertexArray,uN),this.indexBuffer=s.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(s),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(s){if(s.properties&&Object.prototype.hasOwnProperty.call(s.properties,"mapbox_clip_start")&&Object.prototype.hasOwnProperty.call(s.properties,"mapbox_clip_end"))return{start:+s.properties.mapbox_clip_start,end:+s.properties.mapbox_clip_end}}addFeature(s,A,d,m,w,x){const E=this.layers[0].layout,L=E.get("line-join").evaluate(s,{}),Q=E.get("line-cap"),j=E.get("line-miter-limit"),G=E.get("line-round-limit");this.lineClips=this.lineFeatureClips(s);for(const J of A)this.addLine(J,s,L,Q,j,G,m,x);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,s,d,w,m)}addLine(s,A,d,m,w,x,E,L){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,s=Cd(s,E?L.line.getGranularityForZoomLevel(E.z):1),this.lineClips){this.lineClipsArray.push(this.lineClips);for(let Ke=0;Ke<s.length-1;Ke++)this.totalDistance+=s[Ke].dist(s[Ke+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const Q=fN[A.type]==="Polygon";let j=s.length;for(;j>=2&&s[j-1].equals(s[j-2]);)j--;let G=0;for(;G<j-1&&s[G].equals(s[G+1]);)G++;if(j<(Q?3:2))return;d==="bevel"&&(w=1.05);const J=this.overscaling<=16?122880/(512*this.overscaling):0,ne=this.segments.prepareSegment(10*j,this.layoutVertexArray,this.indexArray);let oe,pe,Se,Re,ot;this.e1=this.e2=-1,Q&&(oe=s[j-2],ot=s[G].sub(oe)._unit()._perp());for(let Ke=G;Ke<j;Ke++){if(Se=Ke===j-1?Q?s[G+1]:void 0:s[Ke+1],Se&&s[Ke].equals(Se))continue;ot&&(Re=ot),oe&&(pe=oe),oe=s[Ke],ot=Se?Se.sub(oe)._unit()._perp():Re,Re=Re||ot;let ee=Re.add(ot);ee.x===0&&ee.y===0||ee._unit();const be=Re.x*ot.x+Re.y*ot.y,qe=ee.x*ot.x+ee.y*ot.y,bt=qe!==0?1/qe:1/0,Ht=2*Math.sqrt(2-2*qe),Et=qe<pN&&pe&&Se,Tt=Re.x*ot.y-Re.y*ot.x>0;if(Et&&Ke>G){const er=oe.dist(pe);if(er>2*J){const kt=oe.sub(oe.sub(pe)._mult(J/er)._round());this.updateDistance(pe,kt),this.addCurrentVertex(kt,Re,0,0,ne),pe=kt}}const Xt=pe&&Se;let Vt=Xt?d:Q?"butt":m;if(Xt&&Vt==="round"&&(bt<x?Vt="miter":bt<=2&&(Vt="fakeround")),Vt==="miter"&&bt>w&&(Vt="bevel"),Vt==="bevel"&&(bt>2&&(Vt="flipbevel"),bt<w&&(Vt="miter")),pe&&this.updateDistance(pe,oe),Vt==="miter")ee._mult(bt),this.addCurrentVertex(oe,ee,0,0,ne);else if(Vt==="flipbevel"){if(bt>100)ee=ot.mult(-1);else{const er=bt*Re.add(ot).mag()/Re.sub(ot).mag();ee._perp()._mult(er*(Tt?-1:1))}this.addCurrentVertex(oe,ee,0,0,ne),this.addCurrentVertex(oe,ee.mult(-1),0,0,ne)}else if(Vt==="bevel"||Vt==="fakeround"){const er=-Math.sqrt(bt*bt-1),kt=Tt?er:0,yr=Tt?0:er;if(pe&&this.addCurrentVertex(oe,Re,kt,yr,ne),Vt==="fakeround"){const Rr=Math.round(180*Ht/Math.PI/20);for(let kr=1;kr<Rr;kr++){let Sr=kr/Rr;if(Sr!==.5){const Ti=Sr-.5;Sr+=Sr*Ti*(Sr-1)*((1.0904+be*(be*(3.55645-1.43519*be)-3.2452))*Ti*Ti+(.848013+be*(.215638*be-1.06021)))}const gn=ot.sub(Re)._mult(Sr)._add(Re)._unit()._mult(Tt?-1:1);this.addHalfVertex(oe,gn.x,gn.y,!1,Tt,0,ne)}}Se&&this.addCurrentVertex(oe,ot,-kt,-yr,ne)}else if(Vt==="butt")this.addCurrentVertex(oe,ee,0,0,ne);else if(Vt==="square"){const er=pe?1:-1;this.addCurrentVertex(oe,ee,er,er,ne)}else Vt==="round"&&(pe&&(this.addCurrentVertex(oe,Re,0,0,ne),this.addCurrentVertex(oe,Re,1,1,ne,!0)),Se&&(this.addCurrentVertex(oe,ot,-1,-1,ne,!0),this.addCurrentVertex(oe,ot,0,0,ne)));if(Et&&Ke<j-1){const er=oe.dist(Se);if(er>2*J){const kt=oe.add(Se.sub(oe)._mult(J/er)._round());this.updateDistance(oe,kt),this.addCurrentVertex(kt,ot,0,0,ne),oe=kt}}}}addCurrentVertex(s,A,d,m,w,x=!1){const E=A.y*m-A.x,L=-A.y-A.x*m;this.addHalfVertex(s,A.x+A.y*d,A.y-A.x*d,x,!1,d,w),this.addHalfVertex(s,E,L,x,!0,-m,w),this.distance>YC/2&&this.totalDistance===0&&(this.distance=0,this.updateScaledDistance(),this.addCurrentVertex(s,A,d,m,w,x))}addHalfVertex({x:s,y:A},d,m,w,x,E,L){const Q=.5*(this.lineClips?this.scaledDistance*(YC-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((s<<1)+(w?1:0),(A<<1)+(x?1:0),Math.round(63*d)+128,Math.round(63*m)+128,1+(E===0?0:E<0?-1:1)|(63&Q)<<2,Q>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);const j=L.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,j,this.e2),L.primitiveLength++),x?this.e2=j:this.e1=j}updateScaledDistance(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance}updateDistance(s,A){this.distance+=s.dist(A),this.updateScaledDistance()}}let JC,eS;Qe("LineBucket",sw,{omit:["layers","patternFeatures"]});var tS={get paint(){return eS=eS||new gi({"line-opacity":new wr(Me.paint_line["line-opacity"]),"line-color":new wr(Me.paint_line["line-color"]),"line-translate":new sr(Me.paint_line["line-translate"]),"line-translate-anchor":new sr(Me.paint_line["line-translate-anchor"]),"line-width":new wr(Me.paint_line["line-width"]),"line-gap-width":new wr(Me.paint_line["line-gap-width"]),"line-offset":new wr(Me.paint_line["line-offset"]),"line-blur":new wr(Me.paint_line["line-blur"]),"line-dasharray":new Qo(Me.paint_line["line-dasharray"]),"line-pattern":new js(Me.paint_line["line-pattern"]),"line-gradient":new xi(Me.paint_line["line-gradient"])})},get layout(){return JC=JC||new gi({"line-cap":new sr(Me.layout_line["line-cap"]),"line-join":new wr(Me.layout_line["line-join"]),"line-miter-limit":new sr(Me.layout_line["line-miter-limit"]),"line-round-limit":new sr(Me.layout_line["line-round-limit"]),"line-sort-key":new wr(Me.layout_line["line-sort-key"])})}};class mN extends wr{possiblyEvaluate(s,A){return A=new Er(Math.floor(A.zoom),{now:A.now,fadeDuration:A.fadeDuration,zoomHistory:A.zoomHistory,transition:A.transition}),super.possiblyEvaluate(s,A)}evaluate(s,A,d,m){return A=Mt({},A,{zoom:Math.floor(A.zoom)}),super.evaluate(s,A,d,m)}}let K0;class gN extends bi{constructor(s){super(s,tS),this.gradientVersion=0,K0||(K0=new mN(tS.paint.properties["line-width"].specification),K0.useIntegerZoom=!0)}_handleSpecialPaintPropertyUpdate(s){if(s==="line-gradient"){const A=this.gradientExpression();this.stepInterpolant=!!function(d){return d._styleExpression!==void 0}(A)&&A._styleExpression.expression instanceof Pa,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(s,A){super.recalculate(s,A),this.paint._values["line-floorwidth"]=K0.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,s)}createBucket(s){return new sw(s)}queryRadius(s){const A=s,d=rS(xm("line-width",this,A),xm("line-gap-width",this,A)),m=xm("line-offset",this,A);return d/2+Math.abs(m)+Q0(this.paint.get("line-translate"))}queryIntersectsFeature({queryGeometry:s,feature:A,featureState:d,geometry:m,transform:w,pixelsToTileUnits:x}){const E=O0(s,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),-w.bearingInRadians,x),L=x/2*rS(this.paint.get("line-width").evaluate(A,d),this.paint.get("line-gap-width").evaluate(A,d)),Q=this.paint.get("line-offset").evaluate(A,d);return Q&&(m=function(j,G){const J=[];for(let ne=0;ne<j.length;ne++){const oe=j[ne],pe=[];for(let Se=0;Se<oe.length;Se++){const Re=oe[Se-1],ot=oe[Se],Ke=oe[Se+1],ee=Se===0?new N(0,0):ot.sub(Re)._unit()._perp(),be=Se===oe.length-1?new N(0,0):Ke.sub(ot)._unit()._perp(),qe=ee._add(be)._unit(),bt=qe.x*be.x+qe.y*be.y;bt!==0&&qe._mult(1/bt),pe.push(qe._mult(G)._add(ot))}J.push(pe)}return J}(m,Q*x)),function(j,G,J){for(let ne=0;ne<G.length;ne++){const oe=G[ne];if(j.length>=3){for(let pe=0;pe<oe.length;pe++)if(Ef(j,oe[pe]))return!0}if(TR(j,oe,J))return!0}return!1}(E,m,L)}isTileClipped(){return!0}}function rS(c,s){return s>0?s+2*c:c}const yN=oi([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),vN=oi([{name:"a_projected_pos",components:3,type:"Float32"}],4);oi([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const _N=oi([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"},{name:"a_box_real",components:2,type:"Int16"}]);oi([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const nS=oi([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),wN=oi([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function xN(c,s,A){return c.sections.forEach(d=>{d.text=function(m,w,x){const E=w.layout.get("text-transform").evaluate(x,{});return E==="uppercase"?m=m.toLocaleUpperCase():E==="lowercase"&&(m=m.toLocaleLowerCase()),wn.applyArabicShaping&&(m=wn.applyArabicShaping(m)),m}(d.text,s,A)}),c}oi([{name:"triangle",components:3,type:"Uint16"}]),oi([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),oi([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",name:"collisionCircleDiameter"},{type:"Uint16",name:"textAnchorOffsetStartIndex"},{type:"Uint16",name:"textAnchorOffsetEndIndex"}]),oi([{type:"Float32",name:"offsetX"}]),oi([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]),oi([{type:"Uint16",name:"textAnchor"},{type:"Float32",components:2,name:"textOffset"}]);const Mm={"!":"︕","#":"＃",$:"＄","%":"％","&":"＆","(":"︵",")":"︶","*":"＊","+":"＋",",":"︐","-":"︲",".":"・","/":"／",":":"︓",";":"︔","<":"︿","=":"＝",">":"﹀","?":"︖","@":"＠","[":"﹇","\\":"＼","]":"﹈","^":"＾",_:"︳","`":"｀","{":"︷","|":"―","}":"︸","~":"～","¢":"￠","£":"￡","¥":"￥","¦":"￤","¬":"￢","¯":"￣","–":"︲","—":"︱","‘":"﹃","’":"﹄","“":"﹁","”":"﹂","…":"︙","‧":"・","₩":"￦","、":"︑","。":"︒","〈":"︿","〉":"﹀","《":"︽","》":"︾","「":"﹁","」":"﹂","『":"﹃","』":"﹄","【":"︻","】":"︼","〔":"︹","〕":"︺","〖":"︗","〗":"︘","！":"︕","（":"︵","）":"︶","，":"︐","－":"︲","．":"・","：":"︓","；":"︔","＜":"︿","＞":"﹀","？":"︖","［":"﹇","］":"﹈","＿":"︳","｛":"︷","｜":"―","｝":"︸","｟":"︵","｠":"︶","｡":"︒","｢":"﹁","｣":"﹂"};var iS,ow,sS,Es=24,aw={};function bN(){return iS||(iS=1,aw.read=function(c,s,A,d,m){var w,x,E=8*m-d-1,L=(1<<E)-1,Q=L>>1,j=-7,G=A?m-1:0,J=A?-1:1,ne=c[s+G];for(G+=J,w=ne&(1<<-j)-1,ne>>=-j,j+=E;j>0;w=256*w+c[s+G],G+=J,j-=8);for(x=w&(1<<-j)-1,w>>=-j,j+=d;j>0;x=256*x+c[s+G],G+=J,j-=8);if(w===0)w=1-Q;else{if(w===L)return x?NaN:1/0*(ne?-1:1);x+=Math.pow(2,d),w-=Q}return(ne?-1:1)*x*Math.pow(2,w-d)},aw.write=function(c,s,A,d,m,w){var x,E,L,Q=8*w-m-1,j=(1<<Q)-1,G=j>>1,J=m===23?Math.pow(2,-24)-Math.pow(2,-77):0,ne=d?0:w-1,oe=d?1:-1,pe=s<0||s===0&&1/s<0?1:0;for(s=Math.abs(s),isNaN(s)||s===1/0?(E=isNaN(s)?1:0,x=j):(x=Math.floor(Math.log(s)/Math.LN2),s*(L=Math.pow(2,-x))<1&&(x--,L*=2),(s+=x+G>=1?J/L:J*Math.pow(2,1-G))*L>=2&&(x++,L/=2),x+G>=j?(E=0,x=j):x+G>=1?(E=(s*L-1)*Math.pow(2,m),x+=G):(E=s*Math.pow(2,G-1)*Math.pow(2,m),x=0));m>=8;c[A+ne]=255&E,ne+=oe,E/=256,m-=8);for(x=x<<m|E,Q+=m;Q>0;c[A+ne]=255&x,ne+=oe,x/=256,Q-=8);c[A+ne-oe]|=128*pe}),aw}function oS(){if(sS)return ow;sS=1,ow=s;var c=bN();function s(ee){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(ee)?ee:new Uint8Array(ee||0),this.pos=0,this.type=0,this.length=this.buf.length}s.Varint=0,s.Fixed64=1,s.Bytes=2,s.Fixed32=5;var A=4294967296,d=1/A,m=typeof TextDecoder>"u"?null:new TextDecoder("utf-8");function w(ee){return ee.type===s.Bytes?ee.readVarint()+ee.pos:ee.pos+1}function x(ee,be,qe){return qe?4294967296*be+(ee>>>0):4294967296*(be>>>0)+(ee>>>0)}function E(ee,be,qe){var bt=be<=16383?1:be<=2097151?2:be<=268435455?3:Math.floor(Math.log(be)/(7*Math.LN2));qe.realloc(bt);for(var Ht=qe.pos-1;Ht>=ee;Ht--)qe.buf[Ht+bt]=qe.buf[Ht]}function L(ee,be){for(var qe=0;qe<ee.length;qe++)be.writeVarint(ee[qe])}function Q(ee,be){for(var qe=0;qe<ee.length;qe++)be.writeSVarint(ee[qe])}function j(ee,be){for(var qe=0;qe<ee.length;qe++)be.writeFloat(ee[qe])}function G(ee,be){for(var qe=0;qe<ee.length;qe++)be.writeDouble(ee[qe])}function J(ee,be){for(var qe=0;qe<ee.length;qe++)be.writeBoolean(ee[qe])}function ne(ee,be){for(var qe=0;qe<ee.length;qe++)be.writeFixed32(ee[qe])}function oe(ee,be){for(var qe=0;qe<ee.length;qe++)be.writeSFixed32(ee[qe])}function pe(ee,be){for(var qe=0;qe<ee.length;qe++)be.writeFixed64(ee[qe])}function Se(ee,be){for(var qe=0;qe<ee.length;qe++)be.writeSFixed64(ee[qe])}function Re(ee,be){return(ee[be]|ee[be+1]<<8|ee[be+2]<<16)+16777216*ee[be+3]}function ot(ee,be,qe){ee[qe]=be,ee[qe+1]=be>>>8,ee[qe+2]=be>>>16,ee[qe+3]=be>>>24}function Ke(ee,be){return(ee[be]|ee[be+1]<<8|ee[be+2]<<16)+(ee[be+3]<<24)}return s.prototype={destroy:function(){this.buf=null},readFields:function(ee,be,qe){for(qe=qe||this.length;this.pos<qe;){var bt=this.readVarint(),Ht=bt>>3,Et=this.pos;this.type=7&bt,ee(Ht,be,this),this.pos===Et&&this.skip(bt)}return be},readMessage:function(ee,be){return this.readFields(ee,be,this.readVarint()+this.pos)},readFixed32:function(){var ee=Re(this.buf,this.pos);return this.pos+=4,ee},readSFixed32:function(){var ee=Ke(this.buf,this.pos);return this.pos+=4,ee},readFixed64:function(){var ee=Re(this.buf,this.pos)+Re(this.buf,this.pos+4)*A;return this.pos+=8,ee},readSFixed64:function(){var ee=Re(this.buf,this.pos)+Ke(this.buf,this.pos+4)*A;return this.pos+=8,ee},readFloat:function(){var ee=c.read(this.buf,this.pos,!0,23,4);return this.pos+=4,ee},readDouble:function(){var ee=c.read(this.buf,this.pos,!0,52,8);return this.pos+=8,ee},readVarint:function(ee){var be,qe,bt=this.buf;return be=127&(qe=bt[this.pos++]),qe<128?be:(be|=(127&(qe=bt[this.pos++]))<<7,qe<128?be:(be|=(127&(qe=bt[this.pos++]))<<14,qe<128?be:(be|=(127&(qe=bt[this.pos++]))<<21,qe<128?be:function(Ht,Et,Tt){var Xt,Vt,er=Tt.buf;if(Xt=(112&(Vt=er[Tt.pos++]))>>4,Vt<128||(Xt|=(127&(Vt=er[Tt.pos++]))<<3,Vt<128)||(Xt|=(127&(Vt=er[Tt.pos++]))<<10,Vt<128)||(Xt|=(127&(Vt=er[Tt.pos++]))<<17,Vt<128)||(Xt|=(127&(Vt=er[Tt.pos++]))<<24,Vt<128)||(Xt|=(1&(Vt=er[Tt.pos++]))<<31,Vt<128))return x(Ht,Xt,Et);throw new Error("Expected varint not more than 10 bytes")}(be|=(15&(qe=bt[this.pos]))<<28,ee,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var ee=this.readVarint();return ee%2==1?(ee+1)/-2:ee/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var ee=this.readVarint()+this.pos,be=this.pos;return this.pos=ee,ee-be>=12&&m?function(qe,bt,Ht){return m.decode(qe.subarray(bt,Ht))}(this.buf,be,ee):function(qe,bt,Ht){for(var Et="",Tt=bt;Tt<Ht;){var Xt,Vt,er,kt=qe[Tt],yr=null,Rr=kt>239?4:kt>223?3:kt>191?2:1;if(Tt+Rr>Ht)break;Rr===1?kt<128&&(yr=kt):Rr===2?(192&(Xt=qe[Tt+1]))==128&&(yr=(31&kt)<<6|63&Xt)<=127&&(yr=null):Rr===3?(Vt=qe[Tt+2],(192&(Xt=qe[Tt+1]))==128&&(192&Vt)==128&&((yr=(15&kt)<<12|(63&Xt)<<6|63&Vt)<=2047||yr>=55296&&yr<=57343)&&(yr=null)):Rr===4&&(Vt=qe[Tt+2],er=qe[Tt+3],(192&(Xt=qe[Tt+1]))==128&&(192&Vt)==128&&(192&er)==128&&((yr=(15&kt)<<18|(63&Xt)<<12|(63&Vt)<<6|63&er)<=65535||yr>=1114112)&&(yr=null)),yr===null?(yr=65533,Rr=1):yr>65535&&(yr-=65536,Et+=String.fromCharCode(yr>>>10&1023|55296),yr=56320|1023&yr),Et+=String.fromCharCode(yr),Tt+=Rr}return Et}(this.buf,be,ee)},readBytes:function(){var ee=this.readVarint()+this.pos,be=this.buf.subarray(this.pos,ee);return this.pos=ee,be},readPackedVarint:function(ee,be){if(this.type!==s.Bytes)return ee.push(this.readVarint(be));var qe=w(this);for(ee=ee||[];this.pos<qe;)ee.push(this.readVarint(be));return ee},readPackedSVarint:function(ee){if(this.type!==s.Bytes)return ee.push(this.readSVarint());var be=w(this);for(ee=ee||[];this.pos<be;)ee.push(this.readSVarint());return ee},readPackedBoolean:function(ee){if(this.type!==s.Bytes)return ee.push(this.readBoolean());var be=w(this);for(ee=ee||[];this.pos<be;)ee.push(this.readBoolean());return ee},readPackedFloat:function(ee){if(this.type!==s.Bytes)return ee.push(this.readFloat());var be=w(this);for(ee=ee||[];this.pos<be;)ee.push(this.readFloat());return ee},readPackedDouble:function(ee){if(this.type!==s.Bytes)return ee.push(this.readDouble());var be=w(this);for(ee=ee||[];this.pos<be;)ee.push(this.readDouble());return ee},readPackedFixed32:function(ee){if(this.type!==s.Bytes)return ee.push(this.readFixed32());var be=w(this);for(ee=ee||[];this.pos<be;)ee.push(this.readFixed32());return ee},readPackedSFixed32:function(ee){if(this.type!==s.Bytes)return ee.push(this.readSFixed32());var be=w(this);for(ee=ee||[];this.pos<be;)ee.push(this.readSFixed32());return ee},readPackedFixed64:function(ee){if(this.type!==s.Bytes)return ee.push(this.readFixed64());var be=w(this);for(ee=ee||[];this.pos<be;)ee.push(this.readFixed64());return ee},readPackedSFixed64:function(ee){if(this.type!==s.Bytes)return ee.push(this.readSFixed64());var be=w(this);for(ee=ee||[];this.pos<be;)ee.push(this.readSFixed64());return ee},skip:function(ee){var be=7&ee;if(be===s.Varint)for(;this.buf[this.pos++]>127;);else if(be===s.Bytes)this.pos=this.readVarint()+this.pos;else if(be===s.Fixed32)this.pos+=4;else{if(be!==s.Fixed64)throw new Error("Unimplemented type: "+be);this.pos+=8}},writeTag:function(ee,be){this.writeVarint(ee<<3|be)},realloc:function(ee){for(var be=this.length||16;be<this.pos+ee;)be*=2;if(be!==this.length){var qe=new Uint8Array(be);qe.set(this.buf),this.buf=qe,this.length=be}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(ee){this.realloc(4),ot(this.buf,ee,this.pos),this.pos+=4},writeSFixed32:function(ee){this.realloc(4),ot(this.buf,ee,this.pos),this.pos+=4},writeFixed64:function(ee){this.realloc(8),ot(this.buf,-1&ee,this.pos),ot(this.buf,Math.floor(ee*d),this.pos+4),this.pos+=8},writeSFixed64:function(ee){this.realloc(8),ot(this.buf,-1&ee,this.pos),ot(this.buf,Math.floor(ee*d),this.pos+4),this.pos+=8},writeVarint:function(ee){(ee=+ee||0)>268435455||ee<0?function(be,qe){var bt,Ht;if(be>=0?(bt=be%4294967296|0,Ht=be/4294967296|0):(Ht=~(-be/4294967296),4294967295^(bt=~(-be%4294967296))?bt=bt+1|0:(bt=0,Ht=Ht+1|0)),be>=18446744073709552e3||be<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");qe.realloc(10),function(Et,Tt,Xt){Xt.buf[Xt.pos++]=127&Et|128,Et>>>=7,Xt.buf[Xt.pos++]=127&Et|128,Et>>>=7,Xt.buf[Xt.pos++]=127&Et|128,Et>>>=7,Xt.buf[Xt.pos++]=127&Et|128,Xt.buf[Xt.pos]=127&(Et>>>=7)}(bt,0,qe),function(Et,Tt){var Xt=(7&Et)<<4;Tt.buf[Tt.pos++]|=Xt|((Et>>>=3)?128:0),Et&&(Tt.buf[Tt.pos++]=127&Et|((Et>>>=7)?128:0),Et&&(Tt.buf[Tt.pos++]=127&Et|((Et>>>=7)?128:0),Et&&(Tt.buf[Tt.pos++]=127&Et|((Et>>>=7)?128:0),Et&&(Tt.buf[Tt.pos++]=127&Et|((Et>>>=7)?128:0),Et&&(Tt.buf[Tt.pos++]=127&Et)))))}(Ht,qe)}(ee,this):(this.realloc(4),this.buf[this.pos++]=127&ee|(ee>127?128:0),ee<=127||(this.buf[this.pos++]=127&(ee>>>=7)|(ee>127?128:0),ee<=127||(this.buf[this.pos++]=127&(ee>>>=7)|(ee>127?128:0),ee<=127||(this.buf[this.pos++]=ee>>>7&127))))},writeSVarint:function(ee){this.writeVarint(ee<0?2*-ee-1:2*ee)},writeBoolean:function(ee){this.writeVarint(!!ee)},writeString:function(ee){ee=String(ee),this.realloc(4*ee.length),this.pos++;var be=this.pos;this.pos=function(bt,Ht,Et){for(var Tt,Xt,Vt=0;Vt<Ht.length;Vt++){if((Tt=Ht.charCodeAt(Vt))>55295&&Tt<57344){if(!Xt){Tt>56319||Vt+1===Ht.length?(bt[Et++]=239,bt[Et++]=191,bt[Et++]=189):Xt=Tt;continue}if(Tt<56320){bt[Et++]=239,bt[Et++]=191,bt[Et++]=189,Xt=Tt;continue}Tt=Xt-55296<<10|Tt-56320|65536,Xt=null}else Xt&&(bt[Et++]=239,bt[Et++]=191,bt[Et++]=189,Xt=null);Tt<128?bt[Et++]=Tt:(Tt<2048?bt[Et++]=Tt>>6|192:(Tt<65536?bt[Et++]=Tt>>12|224:(bt[Et++]=Tt>>18|240,bt[Et++]=Tt>>12&63|128),bt[Et++]=Tt>>6&63|128),bt[Et++]=63&Tt|128)}return Et}(this.buf,ee,this.pos);var qe=this.pos-be;qe>=128&&E(be,qe,this),this.pos=be-1,this.writeVarint(qe),this.pos+=qe},writeFloat:function(ee){this.realloc(4),c.write(this.buf,ee,this.pos,!0,23,4),this.pos+=4},writeDouble:function(ee){this.realloc(8),c.write(this.buf,ee,this.pos,!0,52,8),this.pos+=8},writeBytes:function(ee){var be=ee.length;this.writeVarint(be),this.realloc(be);for(var qe=0;qe<be;qe++)this.buf[this.pos++]=ee[qe]},writeRawMessage:function(ee,be){this.pos++;var qe=this.pos;ee(be,this);var bt=this.pos-qe;bt>=128&&E(qe,bt,this),this.pos=qe-1,this.writeVarint(bt),this.pos+=bt},writeMessage:function(ee,be,qe){this.writeTag(ee,s.Bytes),this.writeRawMessage(be,qe)},writePackedVarint:function(ee,be){be.length&&this.writeMessage(ee,L,be)},writePackedSVarint:function(ee,be){be.length&&this.writeMessage(ee,Q,be)},writePackedBoolean:function(ee,be){be.length&&this.writeMessage(ee,J,be)},writePackedFloat:function(ee,be){be.length&&this.writeMessage(ee,j,be)},writePackedDouble:function(ee,be){be.length&&this.writeMessage(ee,G,be)},writePackedFixed32:function(ee,be){be.length&&this.writeMessage(ee,ne,be)},writePackedSFixed32:function(ee,be){be.length&&this.writeMessage(ee,oe,be)},writePackedFixed64:function(ee,be){be.length&&this.writeMessage(ee,pe,be)},writePackedSFixed64:function(ee,be){be.length&&this.writeMessage(ee,Se,be)},writeBytesField:function(ee,be){this.writeTag(ee,s.Bytes),this.writeBytes(be)},writeFixed32Field:function(ee,be){this.writeTag(ee,s.Fixed32),this.writeFixed32(be)},writeSFixed32Field:function(ee,be){this.writeTag(ee,s.Fixed32),this.writeSFixed32(be)},writeFixed64Field:function(ee,be){this.writeTag(ee,s.Fixed64),this.writeFixed64(be)},writeSFixed64Field:function(ee,be){this.writeTag(ee,s.Fixed64),this.writeSFixed64(be)},writeVarintField:function(ee,be){this.writeTag(ee,s.Varint),this.writeVarint(be)},writeSVarintField:function(ee,be){this.writeTag(ee,s.Varint),this.writeSVarint(be)},writeStringField:function(ee,be){this.writeTag(ee,s.Bytes),this.writeString(be)},writeFloatField:function(ee,be){this.writeTag(ee,s.Fixed32),this.writeFloat(be)},writeDoubleField:function(ee,be){this.writeTag(ee,s.Fixed64),this.writeDouble(be)},writeBooleanField:function(ee,be){this.writeVarintField(ee,!!be)}},ow}var sh,lw=g(oS());function BN(c,s,A){c===1&&A.readMessage(CN,s)}function CN(c,s,A){if(c===3){const{id:d,bitmap:m,width:w,height:x,left:E,top:L,advance:Q}=A.readMessage(SN,{});s.push({id:d,bitmap:new bm({width:w+6,height:x+6},m),metrics:{width:w,height:x,left:E,top:L,advance:Q}})}}function SN(c,s,A){c===1?s.id=A.readVarint():c===2?s.bitmap=A.readBytes():c===3?s.width=A.readVarint():c===4?s.height=A.readVarint():c===5?s.left=A.readSVarint():c===6?s.top=A.readSVarint():c===7&&(s.advance=A.readVarint())}function aS(c){let s=0,A=0;for(const x of c)s+=x.w*x.h,A=Math.max(A,x.w);c.sort((x,E)=>E.h-x.h);const d=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(s/.95)),A),h:1/0}];let m=0,w=0;for(const x of c)for(let E=d.length-1;E>=0;E--){const L=d[E];if(!(x.w>L.w||x.h>L.h)){if(x.x=L.x,x.y=L.y,w=Math.max(w,x.y+x.h),m=Math.max(m,x.x+x.w),x.w===L.w&&x.h===L.h){const Q=d.pop();E<d.length&&(d[E]=Q)}else x.h===L.h?(L.x+=x.w,L.w-=x.w):x.w===L.w?(L.y+=x.h,L.h-=x.h):(d.push({x:L.x+x.w,y:L.y,w:L.w-x.w,h:x.h}),L.y+=x.h,L.h-=x.h);break}}return{w:m,h:w,fill:s/(m*w)||0}}class Aw{constructor(s,{pixelRatio:A,version:d,stretchX:m,stretchY:w,content:x,textFitWidth:E,textFitHeight:L}){this.paddedRect=s,this.pixelRatio=A,this.stretchX=m,this.stretchY=w,this.content=x,this.version=d,this.textFitWidth=E,this.textFitHeight=L}get tl(){return[this.paddedRect.x+1,this.paddedRect.y+1]}get br(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]}get tlbr(){return this.tl.concat(this.br)}get displaySize(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]}}class lS{constructor(s,A){const d={},m={};this.haveRenderCallbacks=[];const w=[];this.addImages(s,d,w),this.addImages(A,m,w);const{w:x,h:E}=aS(w),L=new fa({width:x||1,height:E||1});for(const Q in s){const j=s[Q],G=d[Q].paddedRect;fa.copy(j.data,L,{x:0,y:0},{x:G.x+1,y:G.y+1},j.data)}for(const Q in A){const j=A[Q],G=m[Q].paddedRect,J=G.x+1,ne=G.y+1,oe=j.data.width,pe=j.data.height;fa.copy(j.data,L,{x:0,y:0},{x:J,y:ne},j.data),fa.copy(j.data,L,{x:0,y:pe-1},{x:J,y:ne-1},{width:oe,height:1}),fa.copy(j.data,L,{x:0,y:0},{x:J,y:ne+pe},{width:oe,height:1}),fa.copy(j.data,L,{x:oe-1,y:0},{x:J-1,y:ne},{width:1,height:pe}),fa.copy(j.data,L,{x:0,y:0},{x:J+oe,y:ne},{width:1,height:pe})}this.image=L,this.iconPositions=d,this.patternPositions=m}addImages(s,A,d){for(const m in s){const w=s[m],x={x:0,y:0,w:w.data.width+2,h:w.data.height+2};d.push(x),A[m]=new Aw(x,w),w.hasRenderCallback&&this.haveRenderCallbacks.push(m)}}patchUpdatedImages(s,A){s.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const d in s.updatedImages)this.patchUpdatedImage(this.iconPositions[d],s.getImage(d),A),this.patchUpdatedImage(this.patternPositions[d],s.getImage(d),A)}patchUpdatedImage(s,A,d){if(!s||!A||s.version===A.version)return;s.version=A.version;const[m,w]=s.tl;d.update(A.data,void 0,{x:m,y:w})}}Qe("ImagePosition",Aw),Qe("ImageAtlas",lS),h.an=void 0,(sh=h.an||(h.an={}))[sh.none=0]="none",sh[sh.horizontal=1]="horizontal",sh[sh.vertical=2]="vertical",sh[sh.horizontalOnly=3]="horizontalOnly";class km{constructor(){this.scale=1,this.fontStack="",this.imageName=null,this.verticalAlign="bottom"}static forText(s,A,d){const m=new km;return m.scale=s||1,m.fontStack=A,m.verticalAlign=d||"bottom",m}static forImage(s,A){const d=new km;return d.imageName=s,d.verticalAlign=A||"bottom",d}}class Pf{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(s,A){const d=new Pf;for(let m=0;m<s.sections.length;m++){const w=s.sections[m];w.image?d.addImageSection(w):d.addTextSection(w,A)}return d}length(){return this.text.length}getSection(s){return this.sections[this.sectionIndex[s]]}getSectionIndex(s){return this.sectionIndex[s]}getCharCode(s){return this.text.charCodeAt(s)}verticalizePunctuation(){this.text=function(s){let A="";for(let d=0;d<s.length;d++){const m=s.charCodeAt(d+1)||null,w=s.charCodeAt(d-1)||null;A+=m&&Cn(m)&&!Mm[s[d+1]]||w&&Cn(w)&&!Mm[s[d-1]]||!Mm[s[d]]?s[d]:Mm[s[d]]}return A}(this.text)}trim(){let s=0;for(let d=0;d<this.text.length&&$0[this.text.charCodeAt(d)];d++)s++;let A=this.text.length;for(let d=this.text.length-1;d>=0&&d>=s&&$0[this.text.charCodeAt(d)];d--)A--;this.text=this.text.substring(s,A),this.sectionIndex=this.sectionIndex.slice(s,A)}substring(s,A){const d=new Pf;return d.text=this.text.substring(s,A),d.sectionIndex=this.sectionIndex.slice(s,A),d.sections=this.sections,d}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((s,A)=>Math.max(s,this.sections[A].scale),0)}getMaxImageSize(s){let A=0,d=0;for(let m=0;m<this.length();m++){const w=this.getSection(m);if(w.imageName){const x=s[w.imageName];if(!x)continue;const E=x.displaySize;A=Math.max(A,E[0]),d=Math.max(d,E[1])}}return{maxImageWidth:A,maxImageHeight:d}}addTextSection(s,A){this.text+=s.text,this.sections.push(km.forText(s.scale,s.fontStack||A,s.verticalAlign));const d=this.sections.length-1;for(let m=0;m<s.text.length;++m)this.sectionIndex.push(d)}addImageSection(s){const A=s.image?s.image.name:"";if(A.length===0)return void Cr("Can't add FormattedSection with an empty image.");const d=this.getNextImageSectionCharCode();d?(this.text+=String.fromCharCode(d),this.sections.push(km.forImage(A,s.verticalAlign)),this.sectionIndex.push(this.sections.length-1)):Cr("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function G0(c,s,A,d,m,w,x,E,L,Q,j,G,J,ne,oe){const pe=Pf.fromFeature(c,m);let Se;G===h.an.vertical&&pe.verticalizePunctuation();const{processBidirectionalText:Re,processStyledBidirectionalText:ot}=wn;if(Re&&pe.sections.length===1){Se=[];const be=Re(pe.toString(),cw(pe,Q,w,s,d,ne));for(const qe of be){const bt=new Pf;bt.text=qe,bt.sections=pe.sections;for(let Ht=0;Ht<qe.length;Ht++)bt.sectionIndex.push(0);Se.push(bt)}}else if(ot){Se=[];const be=ot(pe.text,pe.sectionIndex,cw(pe,Q,w,s,d,ne));for(const qe of be){const bt=new Pf;bt.text=qe[0],bt.sectionIndex=qe[1],bt.sections=pe.sections,Se.push(bt)}}else Se=function(be,qe){const bt=[],Ht=be.text;let Et=0;for(const Tt of qe)bt.push(be.substring(Et,Tt)),Et=Tt;return Et<Ht.length&&bt.push(be.substring(Et,Ht.length)),bt}(pe,cw(pe,Q,w,s,d,ne));const Ke=[],ee={positionedLines:Ke,text:pe.toString(),top:j[1],bottom:j[1],left:j[0],right:j[0],writingMode:G,iconsInText:!1,verticalizable:!1};return function(be,qe,bt,Ht,Et,Tt,Xt,Vt,er,kt,yr,Rr){let kr=0,Sr=0,gn=0,Ti=0;const ms=Vt==="right"?1:Vt==="left"?0:.5,ao=Es/Rr;let ml=0;for(const Bi of Et){Bi.trim();const Is=Bi.getMaxScale(),Gs={positionedGlyphs:[],lineOffset:0};be.positionedLines[ml]=Gs;const $s=Gs.positionedGlyphs;let jo=0;if(!Bi.length()){Sr+=Tt,++ml;continue}const gl=TN(Ht,Bi,ao);for(let ma=0;ma<Bi.length();ma++){const gs=Bi.getSection(ma),Ts=Bi.getSectionIndex(ma),Ps=Bi.getCharCode(ma),os=PN(er,yr,Ps);let li;if(gs.imageName){if(be.iconsInText=!0,gs.scale=gs.scale*ao,li=MN(gs,os,Is,gl,Ht),!li)continue;jo=Math.max(jo,li.imageOffset)}else if(li=LN(gs,Ps,os,gl,qe,bt),!li)continue;const{rect:CA,metrics:Uf,baselineOffset:SA}=li;$s.push({glyph:Ps,imageName:gs.imageName,x:kr,y:Sr+SA+-17,vertical:os,scale:gs.scale,fontStack:gs.fontStack,sectionIndex:Ts,metrics:Uf,rect:CA}),os?(be.verticalizable=!0,kr+=(gs.imageName?Uf.advance:Es)*gs.scale+kt):kr+=Uf.advance*gs.scale+kt}$s.length!==0&&(gn=Math.max(kr-kt,gn),kN($s,0,$s.length-1,ms)),kr=0,Gs.lineOffset=Math.max(jo,(Is-1)*Es);const Fs=Tt*Is+jo;Sr+=Fs,Ti=Math.max(Fs,Ti),++ml}const{horizontalAlign:pa,verticalAlign:Ks}=uw(Xt);(function(Bi,Is,Gs,$s,jo,gl,Fs,ma,gs){const Ts=(Is-Gs)*jo;let Ps=0;Ps=gl!==Fs?-ma*$s- -17:-$s*gs*Fs+.5*Fs;for(const os of Bi)for(const li of os.positionedGlyphs)li.x+=Ts,li.y+=Ps})(be.positionedLines,ms,pa,Ks,gn,Ti,Tt,Sr,Et.length),be.top+=-Ks*Sr,be.bottom=be.top+Sr,be.left+=-pa*gn,be.right=be.left+gn}(ee,s,A,d,Se,x,E,L,G,Q,J,oe),!function(be){for(const qe of be)if(qe.positionedGlyphs.length!==0)return!1;return!0}(Ke)&&ee}const $0={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},EN={10:!0,32:!0,38:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0},IN={40:!0};function AS(c,s,A,d,m,w){if(s.imageName){const x=d[s.imageName];return x?x.displaySize[0]*s.scale*Es/w+m:0}{const x=A[s.fontStack],E=x&&x[c];return E?E.metrics.advance*s.scale+m:0}}function cS(c,s,A,d){const m=Math.pow(c-s,2);return d?c<s?m/2:2*m:m+Math.abs(A)*A}function FN(c,s,A){let d=0;return c===10&&(d-=1e4),A&&(d+=150),c!==40&&c!==65288||(d+=50),s!==41&&s!==65289||(d+=50),d}function uS(c,s,A,d,m,w){let x=null,E=cS(s,A,m,w);for(const L of d){const Q=cS(s-L.x,A,m,w)+L.badness;Q<=E&&(x=L,E=Q)}return{index:c,x:s,priorBreak:x,badness:E}}function hS(c){return c?hS(c.priorBreak).concat(c.index):[]}function cw(c,s,A,d,m,w){if(!c)return[];const x=[],E=function(G,J,ne,oe,pe,Se){let Re=0;for(let ot=0;ot<G.length();ot++){const Ke=G.getSection(ot);Re+=AS(G.getCharCode(ot),Ke,oe,pe,J,Se)}return Re/Math.max(1,Math.ceil(Re/ne))}(c,s,A,d,m,w),L=c.text.indexOf("​")>=0;let Q=0;for(let G=0;G<c.length();G++){const J=c.getSection(G),ne=c.getCharCode(G);if($0[ne]||(Q+=AS(ne,J,d,m,s,w)),G<c.length()-1){const oe=!((j=ne)<11904)&&(!!Ye["CJK Compatibility Forms"](j)||!!Ye["CJK Compatibility"](j)||!!Ye["CJK Strokes"](j)||!!Ye["CJK Symbols and Punctuation"](j)||!!Ye["Enclosed CJK Letters and Months"](j)||!!Ye["Halfwidth and Fullwidth Forms"](j)||!!Ye["Ideographic Description Characters"](j)||!!Ye["Vertical Forms"](j)||Or.test(String.fromCodePoint(j)));(EN[ne]||oe||J.imageName||G!==c.length()-2&&IN[c.getCharCode(G+1)])&&x.push(uS(G+1,Q,E,x,FN(ne,c.getCharCode(G+1),oe&&L),!1))}}var j;return hS(uS(c.length(),Q,E,x,0,!0))}function uw(c){let s=.5,A=.5;switch(c){case"right":case"top-right":case"bottom-right":s=1;break;case"left":case"top-left":case"bottom-left":s=0}switch(c){case"bottom":case"bottom-right":case"bottom-left":A=1;break;case"top":case"top-right":case"top-left":A=0}return{horizontalAlign:s,verticalAlign:A}}function TN(c,s,A){const d=s.getMaxScale()*Es,{maxImageWidth:m,maxImageHeight:w}=s.getMaxImageSize(c),x=Math.max(d,w*A);return{verticalLineContentWidth:Math.max(d,m*A),horizontalLineContentHeight:x}}function dS(c){switch(c){case"top":return 0;case"center":return .5;default:return 1}}function PN(c,s,A){return!(c===h.an.horizontal||!s&&!fr(A)||s&&($0[A]||(d=A,new RegExp("\\p{sc=Arab}","u").test(String.fromCodePoint(d)))));var d}function LN(c,s,A,d,m,w){const x=w[c.fontStack],E=function(Q,j,G,J){if(Q&&Q.rect)return Q;const ne=j[G.fontStack],oe=ne&&ne[J];return oe?{rect:null,metrics:oe.metrics}:null}(x&&x[s],m,c,s);if(E===null)return null;let L;if(A)L=d.verticalLineContentWidth-c.scale*Es;else{const Q=dS(c.verticalAlign);L=(d.horizontalLineContentHeight-c.scale*Es)*Q}return{rect:E.rect,metrics:E.metrics,baselineOffset:L}}function MN(c,s,A,d,m){const w=m[c.imageName];if(!w)return null;const x=w.paddedRect,E=w.displaySize,L={width:E[0],height:E[1],left:1,top:-3,advance:s?E[1]:E[0]};let Q;if(s)Q=d.verticalLineContentWidth-E[1]*c.scale;else{const j=dS(c.verticalAlign);Q=(d.horizontalLineContentHeight-E[1]*c.scale)*j}return{rect:x,metrics:L,baselineOffset:Q,imageOffset:(s?E[0]:E[1])*c.scale-Es*A}}function kN(c,s,A,d){if(d===0)return;const m=c[A],w=(c[A].x+m.metrics.advance*m.scale)*d;for(let x=s;x<=A;x++)c[x].x-=w}function UN(c,s,A){const{horizontalAlign:d,verticalAlign:m}=uw(A),w=s[0]-c.displaySize[0]*d,x=s[1]-c.displaySize[1]*m;return{image:c,top:x,bottom:x+c.displaySize[1],left:w,right:w+c.displaySize[0]}}function fS(c){var s,A;let d=c.left,m=c.top,w=c.right-d,x=c.bottom-m;const E=(s=c.image.textFitWidth)!==null&&s!==void 0?s:"stretchOrShrink",L=(A=c.image.textFitHeight)!==null&&A!==void 0?A:"stretchOrShrink",Q=(c.image.content[2]-c.image.content[0])/(c.image.content[3]-c.image.content[1]);if(L==="proportional"){if(E==="stretchOnly"&&w/x<Q||E==="proportional"){const j=Math.ceil(x*Q);d*=j/w,w=j}}else if(E==="proportional"&&L==="stretchOnly"&&Q!==0&&w/x>Q){const j=Math.ceil(w/Q);m*=j/x,x=j}return{x1:d,y1:m,x2:d+w,y2:m+x}}function pS(c,s,A,d,m,w){const x=c.image;let E;if(x.content){const Se=x.content,Re=x.pixelRatio||1;E=[Se[0]/Re,Se[1]/Re,x.displaySize[0]-Se[2]/Re,x.displaySize[1]-Se[3]/Re]}const L=s.left*w,Q=s.right*w;let j,G,J,ne;A==="width"||A==="both"?(ne=m[0]+L-d[3],G=m[0]+Q+d[1]):(ne=m[0]+(L+Q-x.displaySize[0])/2,G=ne+x.displaySize[0]);const oe=s.top*w,pe=s.bottom*w;return A==="height"||A==="both"?(j=m[1]+oe-d[0],J=m[1]+pe+d[2]):(j=m[1]+(oe+pe-x.displaySize[1])/2,J=j+x.displaySize[1]),{image:x,top:j,right:G,bottom:J,left:ne,collisionPadding:E}}const pu=128,oh=32640;function mS(c,s){const{expression:A}=s;if(A.kind==="constant")return{kind:"constant",layoutSize:A.evaluate(new Er(c+1))};if(A.kind==="source")return{kind:"source"};{const{zoomStops:d,interpolationType:m}=A;let w=0;for(;w<d.length&&d[w]<=c;)w++;w=Math.max(0,w-1);let x=w;for(;x<d.length&&d[x]<c+1;)x++;x=Math.min(d.length-1,x);const E=d[w],L=d[x];return A.kind==="composite"?{kind:"composite",minZoom:E,maxZoom:L,interpolationType:m}:{kind:"camera",minZoom:E,maxZoom:L,minSize:A.evaluate(new Er(E)),maxSize:A.evaluate(new Er(L)),interpolationType:m}}}function hw(c,s,A){let d="never";const m=c.get(s);return m?d=m:c.get(A)&&(d="always"),d}const RN=Tm.VectorTileFeature.types,NN=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function q0(c,s,A,d,m,w,x,E,L,Q,j,G,J){const ne=E?Math.min(oh,Math.round(E[0])):0,oe=E?Math.min(oh,Math.round(E[1])):0;c.emplaceBack(s,A,Math.round(32*d),Math.round(32*m),w,x,(ne<<1)+(L?1:0),oe,16*Q,16*j,256*G,256*J)}function dw(c,s,A){c.emplaceBack(s.x,s.y,A),c.emplaceBack(s.x,s.y,A),c.emplaceBack(s.x,s.y,A),c.emplaceBack(s.x,s.y,A)}function DN(c){for(const s of c.sections)if(Nn(s.text))return!0;return!1}class fw{constructor(s){this.layoutVertexArray=new rn,this.indexArray=new xn,this.programConfigurations=s,this.segments=new fn,this.dynamicLayoutVertexArray=new mn,this.opacityVertexArray=new Zn,this.hasVisibleVertices=!1,this.placedSymbolArray=new Fe}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0}upload(s,A,d,m){this.isEmpty()||(d&&(this.layoutVertexBuffer=s.createVertexBuffer(this.layoutVertexArray,yN.members),this.indexBuffer=s.createIndexBuffer(this.indexArray,A),this.dynamicLayoutVertexBuffer=s.createVertexBuffer(this.dynamicLayoutVertexArray,vN.members,!0),this.opacityVertexBuffer=s.createVertexBuffer(this.opacityVertexArray,NN,!0),this.opacityVertexBuffer.itemSize=1),(d||m)&&this.programConfigurations.upload(s))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}Qe("SymbolBuffers",fw);class pw{constructor(s,A,d){this.layoutVertexArray=new s,this.layoutAttributes=A,this.indexArray=new d,this.segments=new fn,this.collisionVertexArray=new In}upload(s){this.layoutVertexBuffer=s.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=s.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=s.createVertexBuffer(this.collisionVertexArray,_N.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())}}Qe("CollisionBuffers",pw);class Lf{constructor(s){this.collisionBoxArray=s.collisionBoxArray,this.zoom=s.zoom,this.globalState=s.globalState,this.overscaling=s.overscaling,this.layers=s.layers,this.layerIds=this.layers.map(x=>x.id),this.index=s.index,this.pixelRatio=s.pixelRatio,this.sourceLayerIndex=s.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[];const A=this.layers[0]._unevaluatedLayout._values;this.textSizeData=mS(this.zoom,A["text-size"]),this.iconSizeData=mS(this.zoom,A["icon-size"]);const d=this.layers[0].layout,m=d.get("symbol-sort-key"),w=d.get("symbol-z-order");this.canOverlap=hw(d,"text-overlap","text-allow-overlap")!=="never"||hw(d,"icon-overlap","icon-allow-overlap")!=="never"||d.get("text-ignore-placement")||d.get("icon-ignore-placement"),this.sortFeaturesByKey=w!=="viewport-y"&&!m.isConstant(),this.sortFeaturesByY=(w==="viewport-y"||w==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,d.get("symbol-placement")==="point"&&(this.writingModes=d.get("text-writing-mode").map(x=>h.an[x])),this.stateDependentLayerIds=this.layers.filter(x=>x.isStateDependent()).map(x=>x.id),this.sourceID=s.sourceID}createArrays(){this.text=new fw(new yc(this.layers,this.zoom,s=>/^text/.test(s))),this.icon=new fw(new yc(this.layers,this.zoom,s=>/^icon/.test(s))),this.glyphOffsetArray=new Oe,this.lineVertexArray=new We,this.symbolInstances=new Ve,this.textAnchorOffsets=new ze}calculateGlyphDependencies(s,A,d,m,w){for(let x=0;x<s.length;x++)if(A[s.charCodeAt(x)]=!0,(d||m)&&w){const E=Mm[s.charAt(x)];E&&(A[E.charCodeAt(0)]=!0)}}populate(s,A,d){const m=this.layers[0],w=m.layout,x=w.get("text-font"),E=w.get("text-field"),L=w.get("icon-image"),Q=(E.value.kind!=="constant"||E.value.value instanceof ts&&!E.value.value.isEmpty()||E.value.value.toString().length>0)&&(x.value.kind!=="constant"||x.value.value.length>0),j=L.value.kind!=="constant"||!!L.value.value||Object.keys(L.parameters).length>0,G=w.get("symbol-sort-key");if(this.features=[],!Q&&!j)return;const J=A.iconDependencies,ne=A.glyphDependencies,oe=A.availableImages,pe=new Er(this.zoom,{globalState:this.globalState});for(const{feature:Se,id:Re,index:ot,sourceLayerIndex:Ke}of s){const ee=m._featureFilter.needGeometry,be=bd(Se,ee);if(!m._featureFilter.filter(pe,be,d))continue;let qe,bt;if(ee||(be.geometry=xd(Se)),Q){const Et=m.getValueAndResolveTokens("text-field",be,d,oe),Tt=ts.factory(Et),Xt=this.hasRTLText=this.hasRTLText||DN(Tt);(!Xt||wn.getRTLTextPluginStatus()==="unavailable"||Xt&&wn.isParsed())&&(qe=xN(Tt,m,be))}if(j){const Et=m.getValueAndResolveTokens("icon-image",be,d,oe);bt=Et instanceof Bs?Et:Bs.fromString(Et)}if(!qe&&!bt)continue;const Ht=this.sortFeaturesByKey?G.evaluate(be,{},d):void 0;if(this.features.push({id:Re,text:qe,icon:bt,index:ot,sourceLayerIndex:Ke,geometry:be.geometry,properties:Se.properties,type:RN[Se.type],sortKey:Ht}),bt&&(J[bt.name]=!0),qe){const Et=x.evaluate(be,{},d).join(","),Tt=w.get("text-rotation-alignment")!=="viewport"&&w.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(h.an.vertical)>=0;for(const Xt of qe.sections)if(Xt.image)J[Xt.image.name]=!0;else{const Vt=Dt(qe.toString()),er=Xt.fontStack||Et,kt=ne[er]=ne[er]||{};this.calculateGlyphDependencies(Xt.text,kt,Tt,this.allowVerticalPlacement,Vt)}}}w.get("symbol-placement")==="line"&&(this.features=function(Se){const Re={},ot={},Ke=[];let ee=0;function be(Et){Ke.push(Se[Et]),ee++}function qe(Et,Tt,Xt){const Vt=ot[Et];return delete ot[Et],ot[Tt]=Vt,Ke[Vt].geometry[0].pop(),Ke[Vt].geometry[0]=Ke[Vt].geometry[0].concat(Xt[0]),Vt}function bt(Et,Tt,Xt){const Vt=Re[Tt];return delete Re[Tt],Re[Et]=Vt,Ke[Vt].geometry[0].shift(),Ke[Vt].geometry[0]=Xt[0].concat(Ke[Vt].geometry[0]),Vt}function Ht(Et,Tt,Xt){const Vt=Xt?Tt[0][Tt[0].length-1]:Tt[0][0];return`${Et}:${Vt.x}:${Vt.y}`}for(let Et=0;Et<Se.length;Et++){const Tt=Se[Et],Xt=Tt.geometry,Vt=Tt.text?Tt.text.toString():null;if(!Vt){be(Et);continue}const er=Ht(Vt,Xt),kt=Ht(Vt,Xt,!0);if(er in ot&&kt in Re&&ot[er]!==Re[kt]){const yr=bt(er,kt,Xt),Rr=qe(er,kt,Ke[yr].geometry);delete Re[er],delete ot[kt],ot[Ht(Vt,Ke[Rr].geometry,!0)]=Rr,Ke[yr].geometry=null}else er in ot?qe(er,kt,Xt):kt in Re?bt(er,kt,Xt):(be(Et),Re[er]=ee-1,ot[kt]=ee-1)}return Ke.filter(Et=>Et.geometry)}(this.features)),this.sortFeaturesByKey&&this.features.sort((Se,Re)=>Se.sortKey-Re.sortKey)}update(s,A,d){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(s,A,this.layers,d),this.icon.programConfigurations.updatePaintArrays(s,A,this.layers,d))}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(s){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(s),this.iconCollisionBox.upload(s)),this.text.upload(s,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(s,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(s,A){const d=this.lineVertexArray.length;if(s.segment!==void 0){let m=s.dist(A[s.segment+1]),w=s.dist(A[s.segment]);const x={};for(let E=s.segment+1;E<A.length;E++)x[E]={x:A[E].x,y:A[E].y,tileUnitDistanceFromAnchor:m},E<A.length-1&&(m+=A[E+1].dist(A[E]));for(let E=s.segment||0;E>=0;E--)x[E]={x:A[E].x,y:A[E].y,tileUnitDistanceFromAnchor:w},E>0&&(w+=A[E-1].dist(A[E]));for(let E=0;E<A.length;E++){const L=x[E];this.lineVertexArray.emplaceBack(L.x,L.y,L.tileUnitDistanceFromAnchor)}}return{lineStartIndex:d,lineLength:this.lineVertexArray.length-d}}addSymbols(s,A,d,m,w,x,E,L,Q,j,G,J){const ne=s.indexArray,oe=s.layoutVertexArray,pe=s.segments.prepareSegment(4*A.length,oe,ne,this.canOverlap?x.sortKey:void 0),Se=this.glyphOffsetArray.length,Re=pe.vertexLength,ot=this.allowVerticalPlacement&&E===h.an.vertical?Math.PI/2:0,Ke=x.text&&x.text.sections;for(let ee=0;ee<A.length;ee++){const{tl:be,tr:qe,bl:bt,br:Ht,tex:Et,pixelOffsetTL:Tt,pixelOffsetBR:Xt,minFontScaleX:Vt,minFontScaleY:er,glyphOffset:kt,isSDF:yr,sectionIndex:Rr}=A[ee],kr=pe.vertexLength,Sr=kt[1];q0(oe,L.x,L.y,be.x,Sr+be.y,Et.x,Et.y,d,yr,Tt.x,Tt.y,Vt,er),q0(oe,L.x,L.y,qe.x,Sr+qe.y,Et.x+Et.w,Et.y,d,yr,Xt.x,Tt.y,Vt,er),q0(oe,L.x,L.y,bt.x,Sr+bt.y,Et.x,Et.y+Et.h,d,yr,Tt.x,Xt.y,Vt,er),q0(oe,L.x,L.y,Ht.x,Sr+Ht.y,Et.x+Et.w,Et.y+Et.h,d,yr,Xt.x,Xt.y,Vt,er),dw(s.dynamicLayoutVertexArray,L,ot),ne.emplaceBack(kr,kr+2,kr+1),ne.emplaceBack(kr+1,kr+2,kr+3),pe.vertexLength+=4,pe.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(kt[0]),ee!==A.length-1&&Rr===A[ee+1].sectionIndex||s.programConfigurations.populatePaintArrays(oe.length,x,x.index,{},J,Ke&&Ke[Rr])}s.placedSymbolArray.emplaceBack(L.x,L.y,Se,this.glyphOffsetArray.length-Se,Re,Q,j,L.segment,d?d[0]:0,d?d[1]:0,m[0],m[1],E,0,!1,0,G)}_addCollisionDebugVertex(s,A,d,m,w,x){return A.emplaceBack(0,0),s.emplaceBack(d.x,d.y,m,w,Math.round(x.x),Math.round(x.y))}addCollisionDebugVertices(s,A,d,m,w,x,E){const L=w.segments.prepareSegment(4,w.layoutVertexArray,w.indexArray),Q=L.vertexLength,j=w.layoutVertexArray,G=w.collisionVertexArray,J=E.anchorX,ne=E.anchorY;this._addCollisionDebugVertex(j,G,x,J,ne,new N(s,A)),this._addCollisionDebugVertex(j,G,x,J,ne,new N(d,A)),this._addCollisionDebugVertex(j,G,x,J,ne,new N(d,m)),this._addCollisionDebugVertex(j,G,x,J,ne,new N(s,m)),L.vertexLength+=4;const oe=w.indexArray;oe.emplaceBack(Q,Q+1),oe.emplaceBack(Q+1,Q+2),oe.emplaceBack(Q+2,Q+3),oe.emplaceBack(Q+3,Q),L.primitiveLength+=4}addDebugCollisionBoxes(s,A,d,m){for(let w=s;w<A;w++){const x=this.collisionBoxArray.get(w);this.addCollisionDebugVertices(x.x1,x.y1,x.x2,x.y2,m?this.textCollisionBox:this.iconCollisionBox,x.anchorPoint,d)}}generateCollisionDebugBuffers(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new pw(En,nS.members,_n),this.iconCollisionBox=new pw(En,nS.members,_n);for(let s=0;s<this.symbolInstances.length;s++){const A=this.symbolInstances.get(s);this.addDebugCollisionBoxes(A.textBoxStartIndex,A.textBoxEndIndex,A,!0),this.addDebugCollisionBoxes(A.verticalTextBoxStartIndex,A.verticalTextBoxEndIndex,A,!0),this.addDebugCollisionBoxes(A.iconBoxStartIndex,A.iconBoxEndIndex,A,!1),this.addDebugCollisionBoxes(A.verticalIconBoxStartIndex,A.verticalIconBoxEndIndex,A,!1)}}_deserializeCollisionBoxesForSymbol(s,A,d,m,w,x,E,L,Q){const j={};for(let G=A;G<d;G++){const J=s.get(G);j.textBox={x1:J.x1,y1:J.y1,x2:J.x2,y2:J.y2,anchorPointX:J.anchorPointX,anchorPointY:J.anchorPointY},j.textFeatureIndex=J.featureIndex;break}for(let G=m;G<w;G++){const J=s.get(G);j.verticalTextBox={x1:J.x1,y1:J.y1,x2:J.x2,y2:J.y2,anchorPointX:J.anchorPointX,anchorPointY:J.anchorPointY},j.verticalTextFeatureIndex=J.featureIndex;break}for(let G=x;G<E;G++){const J=s.get(G);j.iconBox={x1:J.x1,y1:J.y1,x2:J.x2,y2:J.y2,anchorPointX:J.anchorPointX,anchorPointY:J.anchorPointY},j.iconFeatureIndex=J.featureIndex;break}for(let G=L;G<Q;G++){const J=s.get(G);j.verticalIconBox={x1:J.x1,y1:J.y1,x2:J.x2,y2:J.y2,anchorPointX:J.anchorPointX,anchorPointY:J.anchorPointY},j.verticalIconFeatureIndex=J.featureIndex;break}return j}deserializeCollisionBoxes(s){this.collisionArrays=[];for(let A=0;A<this.symbolInstances.length;A++){const d=this.symbolInstances.get(A);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(s,d.textBoxStartIndex,d.textBoxEndIndex,d.verticalTextBoxStartIndex,d.verticalTextBoxEndIndex,d.iconBoxStartIndex,d.iconBoxEndIndex,d.verticalIconBoxStartIndex,d.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(s,A){const d=s.placedSymbolArray.get(A),m=d.vertexStartIndex+4*d.numGlyphs;for(let w=d.vertexStartIndex;w<m;w+=4)s.indexArray.emplaceBack(w,w+2,w+1),s.indexArray.emplaceBack(w+1,w+2,w+3)}getSortedSymbolIndexes(s){if(this.sortedAngle===s&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;const A=Math.sin(s),d=Math.cos(s),m=[],w=[],x=[];for(let E=0;E<this.symbolInstances.length;++E){x.push(E);const L=this.symbolInstances.get(E);m.push(0|Math.round(A*L.anchorX+d*L.anchorY)),w.push(L.featureIndex)}return x.sort((E,L)=>m[E]-m[L]||w[L]-w[E]),x}addToSortKeyRanges(s,A){const d=this.sortKeyRanges[this.sortKeyRanges.length-1];d&&d.sortKey===A?d.symbolInstanceEnd=s+1:this.sortKeyRanges.push({sortKey:A,symbolInstanceStart:s,symbolInstanceEnd:s+1})}sortFeatures(s){if(this.sortFeaturesByY&&this.sortedAngle!==s&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(s),this.sortedAngle=s,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const A of this.symbolInstanceIndexes){const d=this.symbolInstances.get(A);this.featureSortOrder.push(d.featureIndex),[d.rightJustifiedTextSymbolIndex,d.centerJustifiedTextSymbolIndex,d.leftJustifiedTextSymbolIndex].forEach((m,w,x)=>{m>=0&&x.indexOf(m)===w&&this.addIndicesForPlacedSymbol(this.text,m)}),d.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,d.verticalPlacedTextSymbolIndex),d.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,d.placedIconSymbolIndex),d.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,d.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}let gS,yS;Qe("SymbolBucket",Lf,{omit:["layers","collisionBoxArray","features","compareText"]}),Lf.MAX_GLYPHS=65535,Lf.addDynamicAttributes=dw;var mw={get paint(){return yS=yS||new gi({"icon-opacity":new wr(Me.paint_symbol["icon-opacity"]),"icon-color":new wr(Me.paint_symbol["icon-color"]),"icon-halo-color":new wr(Me.paint_symbol["icon-halo-color"]),"icon-halo-width":new wr(Me.paint_symbol["icon-halo-width"]),"icon-halo-blur":new wr(Me.paint_symbol["icon-halo-blur"]),"icon-translate":new sr(Me.paint_symbol["icon-translate"]),"icon-translate-anchor":new sr(Me.paint_symbol["icon-translate-anchor"]),"text-opacity":new wr(Me.paint_symbol["text-opacity"]),"text-color":new wr(Me.paint_symbol["text-color"],{runtimeType:zi,getOverride:c=>c.textColor,hasOverride:c=>!!c.textColor}),"text-halo-color":new wr(Me.paint_symbol["text-halo-color"]),"text-halo-width":new wr(Me.paint_symbol["text-halo-width"]),"text-halo-blur":new wr(Me.paint_symbol["text-halo-blur"]),"text-translate":new sr(Me.paint_symbol["text-translate"]),"text-translate-anchor":new sr(Me.paint_symbol["text-translate-anchor"])})},get layout(){return gS=gS||new gi({"symbol-placement":new sr(Me.layout_symbol["symbol-placement"]),"symbol-spacing":new sr(Me.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new sr(Me.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new wr(Me.layout_symbol["symbol-sort-key"]),"symbol-z-order":new sr(Me.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new sr(Me.layout_symbol["icon-allow-overlap"]),"icon-overlap":new sr(Me.layout_symbol["icon-overlap"]),"icon-ignore-placement":new sr(Me.layout_symbol["icon-ignore-placement"]),"icon-optional":new sr(Me.layout_symbol["icon-optional"]),"icon-rotation-alignment":new sr(Me.layout_symbol["icon-rotation-alignment"]),"icon-size":new wr(Me.layout_symbol["icon-size"]),"icon-text-fit":new sr(Me.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new sr(Me.layout_symbol["icon-text-fit-padding"]),"icon-image":new wr(Me.layout_symbol["icon-image"]),"icon-rotate":new wr(Me.layout_symbol["icon-rotate"]),"icon-padding":new wr(Me.layout_symbol["icon-padding"]),"icon-keep-upright":new sr(Me.layout_symbol["icon-keep-upright"]),"icon-offset":new wr(Me.layout_symbol["icon-offset"]),"icon-anchor":new wr(Me.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new sr(Me.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new sr(Me.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new sr(Me.layout_symbol["text-rotation-alignment"]),"text-field":new wr(Me.layout_symbol["text-field"]),"text-font":new wr(Me.layout_symbol["text-font"]),"text-size":new wr(Me.layout_symbol["text-size"]),"text-max-width":new wr(Me.layout_symbol["text-max-width"]),"text-line-height":new sr(Me.layout_symbol["text-line-height"]),"text-letter-spacing":new wr(Me.layout_symbol["text-letter-spacing"]),"text-justify":new wr(Me.layout_symbol["text-justify"]),"text-radial-offset":new wr(Me.layout_symbol["text-radial-offset"]),"text-variable-anchor":new sr(Me.layout_symbol["text-variable-anchor"]),"text-variable-anchor-offset":new wr(Me.layout_symbol["text-variable-anchor-offset"]),"text-anchor":new wr(Me.layout_symbol["text-anchor"]),"text-max-angle":new sr(Me.layout_symbol["text-max-angle"]),"text-writing-mode":new sr(Me.layout_symbol["text-writing-mode"]),"text-rotate":new wr(Me.layout_symbol["text-rotate"]),"text-padding":new sr(Me.layout_symbol["text-padding"]),"text-keep-upright":new sr(Me.layout_symbol["text-keep-upright"]),"text-transform":new wr(Me.layout_symbol["text-transform"]),"text-offset":new wr(Me.layout_symbol["text-offset"]),"text-allow-overlap":new sr(Me.layout_symbol["text-allow-overlap"]),"text-overlap":new sr(Me.layout_symbol["text-overlap"]),"text-ignore-placement":new sr(Me.layout_symbol["text-ignore-placement"]),"text-optional":new sr(Me.layout_symbol["text-optional"])})}};class vS{constructor(s){if(s.property.overrides===void 0)throw new Error("overrides must be provided to instantiate FormatSectionOverride class");this.type=s.property.overrides?s.property.overrides.runtimeType:cs,this.defaultValue=s}evaluate(s){if(s.formattedSection){const A=this.defaultValue.property.overrides;if(A&&A.hasOverride(s.formattedSection))return A.getOverride(s.formattedSection)}return s.feature&&s.featureState?this.defaultValue.evaluate(s.feature,s.featureState):this.defaultValue.property.specification.default}eachChild(s){this.defaultValue.isConstant()||s(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}Qe("FormatSectionOverride",vS,{omit:["defaultValue"]});class Z0 extends bi{constructor(s){super(s,mw)}recalculate(s,A){if(super.recalculate(s,A),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")==="map"?"map":"viewport"),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){const d=this.layout.get("text-writing-mode");if(d){const m=[];for(const w of d)m.indexOf(w)<0&&m.push(w);this.layout._values["text-writing-mode"]=m}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()}getValueAndResolveTokens(s,A,d,m){const w=this.layout.get(s).evaluate(A,{},d,m),x=this._unevaluatedLayout._values[s];return x.isDataDriven()||qu(x.value)||!w?w:function(E,L){return L.replace(/{([^{}]+)}/g,(Q,j)=>E&&j in E?String(E[j]):"")}(A.properties,w)}createBucket(s){return new Lf(s)}queryRadius(){return 0}queryIntersectsFeature(){throw new Error("Should take a different path in FeatureIndex")}_setPaintOverrides(){for(const s of mw.paint.overridableProperties){if(!Z0.hasPaintOverride(this.layout,s))continue;const A=this.paint.get(s),d=new vS(A),m=new oc(d,A.property.specification);let w=null;w=A.value.kind==="constant"||A.value.kind==="source"?new ac("source",m):new Wu("composite",m,A.value.zoomStops),this.paint._values[s]=new wi(A.property,w,A.parameters)}}_handleOverridablePaintPropertyUpdate(s,A,d){return!(!this.layout||A.isDataDriven()||d.isDataDriven())&&Z0.hasPaintOverride(this.layout,s)}static hasPaintOverride(s,A){const d=s.get("text-field"),m=mw.paint.properties[A];let w=!1;const x=E=>{for(const L of E)if(m.overrides&&m.overrides.hasOverride(L))return void(w=!0)};if(d.value.kind==="constant"&&d.value.value instanceof ts)x(d.value.value.sections);else if(d.value.kind==="source"){const E=Q=>{w||(Q instanceof Ii&&Tr(Q.value)===Ca?x(Q.value.sections):Q instanceof Mr?x(Q.sections):Q.eachChild(E))},L=d.value;L._styleExpression&&E(L._styleExpression.expression)}return w}}let _S;var QN={get paint(){return _S=_S||new gi({"background-color":new sr(Me.paint_background["background-color"]),"background-pattern":new Qo(Me.paint_background["background-pattern"]),"background-opacity":new sr(Me.paint_background["background-opacity"])})}};class ON extends bi{constructor(s){super(s,QN)}}let wS;var zN={get paint(){return wS=wS||new gi({"raster-opacity":new sr(Me.paint_raster["raster-opacity"]),"raster-hue-rotate":new sr(Me.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new sr(Me.paint_raster["raster-brightness-min"]),"raster-brightness-max":new sr(Me.paint_raster["raster-brightness-max"]),"raster-saturation":new sr(Me.paint_raster["raster-saturation"]),"raster-contrast":new sr(Me.paint_raster["raster-contrast"]),"raster-resampling":new sr(Me.paint_raster["raster-resampling"]),"raster-fade-duration":new sr(Me.paint_raster["raster-fade-duration"])})}};class HN extends bi{constructor(s){super(s,zN)}}class jN extends bi{constructor(s){super(s,{}),this.onAdd=A=>{this.implementation.onAdd&&this.implementation.onAdd(A,A.painter.context.gl)},this.onRemove=A=>{this.implementation.onRemove&&this.implementation.onRemove(A,A.painter.context.gl)},this.implementation=s}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){throw new Error("Custom layers cannot be serialized")}}class VN{constructor(s){this._methodToThrottle=s,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._methodToThrottle()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._methodToThrottle()},0))}remove(){delete this._channel,this._methodToThrottle=()=>{}}}const KN={once:!0},gw=63710088e-1;class ah{constructor(s,A){if(isNaN(s)||isNaN(A))throw new Error(`Invalid LngLat object: (${s}, ${A})`);if(this.lng=+s,this.lat=+A,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new ah(Rt(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(s){const A=Math.PI/180,d=this.lat*A,m=s.lat*A,w=Math.sin(d)*Math.sin(m)+Math.cos(d)*Math.cos(m)*Math.cos((s.lng-this.lng)*A);return gw*Math.acos(Math.min(w,1))}static convert(s){if(s instanceof ah)return s;if(Array.isArray(s)&&(s.length===2||s.length===3))return new ah(Number(s[0]),Number(s[1]));if(!Array.isArray(s)&&typeof s=="object"&&s!==null)return new ah(Number("lng"in s?s.lng:s.lon),Number(s.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}const xS=2*Math.PI*gw;function bS(c){return xS*Math.cos(c*Math.PI/180)}function BS(c){return(180+c)/360}function CS(c){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+c*Math.PI/360)))/360}function SS(c,s){return c/bS(s)}function yw(c){return 360/Math.PI*Math.atan(Math.exp((180-360*c)*Math.PI/180))-90}function ES(c,s){return c*bS(yw(s))}class Um{constructor(s,A,d=0){this.x=+s,this.y=+A,this.z=+d}static fromLngLat(s,A=0){const d=ah.convert(s);return new Um(BS(d.lng),CS(d.lat),SS(A,d.lat))}toLngLat(){return new ah(360*this.x-180,yw(this.y))}toAltitude(){return ES(this.z,this.y)}meterInMercatorCoordinateUnits(){return 1/xS*(s=yw(this.y),1/Math.cos(s*Math.PI/180));var s}}function IS(c,s,A){var d=2*Math.PI*6378137/256/Math.pow(2,A);return[c*d-2*Math.PI*6378137/2,s*d-2*Math.PI*6378137/2]}class vw{constructor(s,A,d){if(!function(m,w,x){return!(m<0||m>25||x<0||x>=Math.pow(2,m)||w<0||w>=Math.pow(2,m))}(s,A,d))throw new Error(`x=${A}, y=${d}, z=${s} outside of bounds. 0<=x<${Math.pow(2,s)}, 0<=y<${Math.pow(2,s)} 0<=z<=25 `);this.z=s,this.x=A,this.y=d,this.key=Mf(0,s,s,A,d)}equals(s){return this.z===s.z&&this.x===s.x&&this.y===s.y}url(s,A,d){const m=(x=this.y,E=this.z,L=IS(256*(w=this.x),256*(x=Math.pow(2,E)-x-1),E),Q=IS(256*(w+1),256*(x+1),E),L[0]+","+L[1]+","+Q[0]+","+Q[1]);var w,x,E,L,Q;const j=function(G,J,ne){let oe,pe="";for(let Se=G;Se>0;Se--)oe=1<<Se-1,pe+=(J&oe?1:0)+(ne&oe?2:0);return pe}(this.z,this.x,this.y);return s[(this.x+this.y)%s.length].replace(/{prefix}/g,(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(d==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace(/{ratio}/g,A>1?"@2x":"").replace(/{quadkey}/g,j).replace(/{bbox-epsg-3857}/g,m)}isChildOf(s){const A=this.z-s.z;return A>0&&s.x===this.x>>A&&s.y===this.y>>A}getTilePoint(s){const A=Math.pow(2,this.z);return new N((s.x*A-this.x)*ie,(s.y*A-this.y)*ie)}toString(){return`${this.z}/${this.x}/${this.y}`}}class FS{constructor(s,A){this.wrap=s,this.canonical=A,this.key=Mf(s,A.z,A.z,A.x,A.y)}}class pl{constructor(s,A,d,m,w){if(this.terrainRttPosMatrix32f=null,s<d)throw new Error(`overscaledZ should be >= z; overscaledZ = ${s}; z = ${d}`);this.overscaledZ=s,this.wrap=A,this.canonical=new vw(d,+m,+w),this.key=Mf(A,s,d,m,w)}clone(){return new pl(this.overscaledZ,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)}equals(s){return this.overscaledZ===s.overscaledZ&&this.wrap===s.wrap&&this.canonical.equals(s.canonical)}scaledTo(s){if(s>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${s}; overscaledZ = ${this.overscaledZ}`);const A=this.canonical.z-s;return s>this.canonical.z?new pl(s,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new pl(s,this.wrap,s,this.canonical.x>>A,this.canonical.y>>A)}calculateScaledKey(s,A){if(s>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${s}; overscaledZ = ${this.overscaledZ}`);const d=this.canonical.z-s;return s>this.canonical.z?Mf(this.wrap*+A,s,this.canonical.z,this.canonical.x,this.canonical.y):Mf(this.wrap*+A,s,s,this.canonical.x>>d,this.canonical.y>>d)}isChildOf(s){if(s.wrap!==this.wrap)return!1;const A=this.canonical.z-s.canonical.z;return s.overscaledZ===0||s.overscaledZ<this.overscaledZ&&s.canonical.x===this.canonical.x>>A&&s.canonical.y===this.canonical.y>>A}children(s){if(this.overscaledZ>=s)return[new pl(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const A=this.canonical.z+1,d=2*this.canonical.x,m=2*this.canonical.y;return[new pl(A,this.wrap,A,d,m),new pl(A,this.wrap,A,d+1,m),new pl(A,this.wrap,A,d,m+1),new pl(A,this.wrap,A,d+1,m+1)]}isLessThan(s){return this.wrap<s.wrap||!(this.wrap>s.wrap)&&(this.overscaledZ<s.overscaledZ||!(this.overscaledZ>s.overscaledZ)&&(this.canonical.x<s.canonical.x||!(this.canonical.x>s.canonical.x)&&this.canonical.y<s.canonical.y))}wrapped(){return new pl(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(s){return new pl(this.overscaledZ,s,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new FS(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}getTilePoint(s){return this.canonical.getTilePoint(new Um(s.x-this.wrap,s.y))}}function Mf(c,s,A,d,m){(c*=2)<0&&(c=-1*c-1);const w=1<<A;return(w*w*c+w*m+d).toString(36)+A.toString(36)+s.toString(36)}Qe("CanonicalTileID",vw),Qe("OverscaledTileID",pl,{omit:["terrainRttPosMatrix32f"]});class Sd{constructor(){this.minX=1/0,this.maxX=-1/0,this.minY=1/0,this.maxY=-1/0}extend(s){return this.minX=Math.min(this.minX,s.x),this.minY=Math.min(this.minY,s.y),this.maxX=Math.max(this.maxX,s.x),this.maxY=Math.max(this.maxY,s.y),this}expandBy(s){return this.minX-=s,this.minY-=s,this.maxX+=s,this.maxY+=s,(this.minX>this.maxX||this.minY>this.maxY)&&(this.minX=1/0,this.maxX=-1/0,this.minY=1/0,this.maxY=-1/0),this}shrinkBy(s){return this.expandBy(-s)}map(s){const A=new Sd;return A.extend(s(new N(this.minX,this.minY))),A.extend(s(new N(this.maxX,this.minY))),A.extend(s(new N(this.minX,this.maxY))),A.extend(s(new N(this.maxX,this.maxY))),A}static fromPoints(s){const A=new Sd;for(const d of s)A.extend(d);return A}contains(s){return s.x>=this.minX&&s.x<=this.maxX&&s.y>=this.minY&&s.y<=this.maxY}empty(){return this.minX>this.maxX}width(){return this.maxX-this.minX}height(){return this.maxY-this.minY}covers(s){return!this.empty()&&!s.empty()&&s.minX>=this.minX&&s.maxX<=this.maxX&&s.minY>=this.minY&&s.maxY<=this.maxY}intersects(s){return!this.empty()&&!s.empty()&&s.minX<=this.maxX&&s.maxX>=this.minX&&s.minY<=this.maxY&&s.maxY>=this.minY}}class TS{constructor(s){this._stringToNumber={},this._numberToString=[];for(let A=0;A<s.length;A++){const d=s[A];this._stringToNumber[d]=A,this._numberToString[A]=d}}encode(s){return this._stringToNumber[s]}decode(s){if(s>=this._numberToString.length)throw new Error(`Out of bounds. Index requested n=${s} can't be >= this._numberToString.length ${this._numberToString.length}`);return this._numberToString[s]}}class PS{constructor(s,A,d,m,w){this.type="Feature",this._vectorTileFeature=s,s._z=A,s._x=d,s._y=m,this.properties=s.properties,this.id=w}get geometry(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry}set geometry(s){this._geometry=s}toJSON(){const s={geometry:this.geometry};for(const A in this)A!=="_geometry"&&A!=="_vectorTileFeature"&&(s[A]=this[A]);return s}}class LS{constructor(s,A){this.tileID=s,this.x=s.canonical.x,this.y=s.canonical.y,this.z=s.canonical.z,this.grid=new xe(ie,16,0),this.grid3D=new xe(ie,16,0),this.featureIndexArray=new St,this.promoteId=A}insert(s,A,d,m,w,x){const E=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(d,m,w);const L=x?this.grid3D:this.grid;for(let Q=0;Q<A.length;Q++){const j=A[Q],G=[1/0,1/0,-1/0,-1/0];for(let J=0;J<j.length;J++){const ne=j[J];G[0]=Math.min(G[0],ne.x),G[1]=Math.min(G[1],ne.y),G[2]=Math.max(G[2],ne.x),G[3]=Math.max(G[3],ne.y)}G[0]<ie&&G[1]<ie&&G[2]>=0&&G[3]>=0&&L.insert(E,G[0],G[1],G[2],G[3])}}loadVTLayers(){return this.vtLayers||(this.vtLayers=new Tm.VectorTile(new lw(this.rawTileData)).layers,this.sourceLayerCoder=new TS(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers}query(s,A,d,m){this.loadVTLayers();const w=s.params,x=ie/s.tileSize/s.scale,E=Ro(w.filter),L=s.queryGeometry,Q=s.queryPadding*x,j=Sd.fromPoints(L),G=this.grid.query(j.minX-Q,j.minY-Q,j.maxX+Q,j.maxY+Q),J=Sd.fromPoints(s.cameraQueryGeometry).expandBy(Q),ne=this.grid3D.query(J.minX,J.minY,J.maxX,J.maxY,(Se,Re,ot,Ke)=>function(ee,be,qe,bt,Ht){for(const Tt of ee)if(be<=Tt.x&&qe<=Tt.y&&bt>=Tt.x&&Ht>=Tt.y)return!0;const Et=[new N(be,qe),new N(be,Ht),new N(bt,Ht),new N(bt,qe)];if(ee.length>2){for(const Tt of Et)if(Ef(ee,Tt))return!0}for(let Tt=0;Tt<ee.length-1;Tt++)if(LR(ee[Tt],ee[Tt+1],Et))return!0;return!1}(s.cameraQueryGeometry,Se-Q,Re-Q,ot+Q,Ke+Q));for(const Se of ne)G.push(Se);G.sort(GN);const oe={};let pe;for(let Se=0;Se<G.length;Se++){const Re=G[Se];if(Re===pe)continue;pe=Re;const ot=this.featureIndexArray.get(Re);let Ke=null;this.loadMatchingFeature(oe,ot.bucketIndex,ot.sourceLayerIndex,ot.featureIndex,E,w.layers,w.availableImages,A,d,m,(ee,be,qe)=>(Ke||(Ke=xd(ee)),be.queryIntersectsFeature({queryGeometry:L,feature:ee,featureState:qe,geometry:Ke,zoom:this.z,transform:s.transform,pixelsToTileUnits:x,pixelPosMatrix:s.pixelPosMatrix,unwrappedTileID:this.tileID.toUnwrapped(),getElevation:s.getElevation})))}return oe}loadMatchingFeature(s,A,d,m,w,x,E,L,Q,j,G){const J=this.bucketLayerIDs[A];if(x&&!J.some(Se=>x.has(Se)))return;const ne=this.sourceLayerCoder.decode(d),oe=this.vtLayers[ne].feature(m);if(w.needGeometry){const Se=bd(oe,!0);if(!w.filter(new Er(this.tileID.overscaledZ),Se,this.tileID.canonical))return}else if(!w.filter(new Er(this.tileID.overscaledZ),oe))return;const pe=this.getId(oe,ne);for(let Se=0;Se<J.length;Se++){const Re=J[Se];if(x&&!x.has(Re))continue;const ot=L[Re];if(!ot)continue;let Ke={};pe&&j&&(Ke=j.getState(ot.sourceLayer||"_geojsonTileLayer",pe));const ee=Mt({},Q[Re]);ee.paint=MS(ee.paint,ot.paint,oe,Ke,E),ee.layout=MS(ee.layout,ot.layout,oe,Ke,E);const be=!G||G(oe,ot,Ke);if(!be)continue;const qe=new PS(oe,this.z,this.x,this.y,pe);qe.layer=ee;let bt=s[Re];bt===void 0&&(bt=s[Re]=[]),bt.push({featureIndex:m,feature:qe,intersectionZ:be})}}lookupSymbolFeatures(s,A,d,m,w,x,E,L){const Q={};this.loadVTLayers();const j=Ro(w);for(const G of s)this.loadMatchingFeature(Q,d,m,G,j,x,E,L,A);return Q}hasLayer(s){for(const A of this.bucketLayerIDs)for(const d of A)if(s===d)return!0;return!1}getId(s,A){var d;let m=s.id;return this.promoteId&&(m=s.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[A]],typeof m=="boolean"&&(m=Number(m)),m===void 0&&(!((d=s.properties)===null||d===void 0)&&d.cluster)&&this.promoteId&&(m=Number(s.properties.cluster_id))),m}}function MS(c,s,A,d,m){return jt(c,(w,x)=>{const E=s instanceof Fi?s.get(x):null;return E&&E.evaluate?E.evaluate(A,d,m):E})}function GN(c,s){return s-c}function kS(c,s,A,d,m){const w=[];for(let x=0;x<c.length;x++){const E=c[x];let L;for(let Q=0;Q<E.length-1;Q++){let j=E[Q],G=E[Q+1];j.x<s&&G.x<s||(j.x<s?j=new N(s,j.y+(s-j.x)/(G.x-j.x)*(G.y-j.y))._round():G.x<s&&(G=new N(s,j.y+(s-j.x)/(G.x-j.x)*(G.y-j.y))._round()),j.y<A&&G.y<A||(j.y<A?j=new N(j.x+(A-j.y)/(G.y-j.y)*(G.x-j.x),A)._round():G.y<A&&(G=new N(j.x+(A-j.y)/(G.y-j.y)*(G.x-j.x),A)._round()),j.x>=d&&G.x>=d||(j.x>=d?j=new N(d,j.y+(d-j.x)/(G.x-j.x)*(G.y-j.y))._round():G.x>=d&&(G=new N(d,j.y+(d-j.x)/(G.x-j.x)*(G.y-j.y))._round()),j.y>=m&&G.y>=m||(j.y>=m?j=new N(j.x+(m-j.y)/(G.y-j.y)*(G.x-j.x),m)._round():G.y>=m&&(G=new N(j.x+(m-j.y)/(G.y-j.y)*(G.x-j.x),m)._round()),L&&j.equals(L[L.length-1])||(L=[j],w.push(L)),L.push(G)))))}}return w}Qe("FeatureIndex",LS,{omit:["rawTileData","sourceLayerCoder"]});class lh extends N{constructor(s,A,d,m){super(s,A),this.angle=d,m!==void 0&&(this.segment=m)}clone(){return new lh(this.x,this.y,this.angle,this.segment)}}function US(c,s,A,d,m){if(s.segment===void 0||A===0)return!0;let w=s,x=s.segment+1,E=0;for(;E>-A/2;){if(x--,x<0)return!1;E-=c[x].dist(w),w=c[x]}E+=c[x].dist(c[x+1]),x++;const L=[];let Q=0;for(;E<A/2;){const j=c[x],G=c[x+1];if(!G)return!1;let J=c[x-1].angleTo(j)-j.angleTo(G);for(J=Math.abs((J+3*Math.PI)%(2*Math.PI)-Math.PI),L.push({distance:E,angleDelta:J}),Q+=J;E-L[0].distance>d;)Q-=L.shift().angleDelta;if(Q>m)return!1;x++,E+=j.dist(G)}return!0}function RS(c){let s=0;for(let A=0;A<c.length-1;A++)s+=c[A].dist(c[A+1]);return s}function NS(c,s,A){return c?.6*s*A:0}function DS(c,s){return Math.max(c?c.right-c.left:0,s?s.right-s.left:0)}function $N(c,s,A,d,m,w){const x=NS(A,m,w),E=DS(A,d)*w;let L=0;const Q=RS(c)/2;for(let j=0;j<c.length-1;j++){const G=c[j],J=c[j+1],ne=G.dist(J);if(L+ne>Q){const oe=(Q-L)/ne,pe=ns.number(G.x,J.x,oe),Se=ns.number(G.y,J.y,oe),Re=new lh(pe,Se,J.angleTo(G),j);return Re._round(),!x||US(c,Re,E,x,s)?Re:void 0}L+=ne}}function qN(c,s,A,d,m,w,x,E,L){const Q=NS(d,w,x),j=DS(d,m),G=j*x,J=c[0].x===0||c[0].x===L||c[0].y===0||c[0].y===L;return s-G<s/4&&(s=G+s/4),QS(c,J?s/2*E%s:(j/2+2*w)*x*E%s,s,Q,A,G,J,!1,L)}function QS(c,s,A,d,m,w,x,E,L){const Q=w/2,j=RS(c);let G=0,J=s-A,ne=[];for(let oe=0;oe<c.length-1;oe++){const pe=c[oe],Se=c[oe+1],Re=pe.dist(Se),ot=Se.angleTo(pe);for(;J+A<G+Re;){J+=A;const Ke=(J-G)/Re,ee=ns.number(pe.x,Se.x,Ke),be=ns.number(pe.y,Se.y,Ke);if(ee>=0&&ee<L&&be>=0&&be<L&&J-Q>=0&&J+Q<=j){const qe=new lh(ee,be,ot,oe);qe._round(),d&&!US(c,qe,w,d,m)||ne.push(qe)}}G+=Re}return E||ne.length||x||(ne=QS(c,G/2,A,d,m,w,x,!0,L)),ne}function OS(c,s,A,d){const m=[],w=c.image,x=w.pixelRatio,E=w.paddedRect.w-2,L=w.paddedRect.h-2;let Q={x1:c.left,y1:c.top,x2:c.right,y2:c.bottom};const j=w.stretchX||[[0,E]],G=w.stretchY||[[0,L]],J=(kt,yr)=>kt+yr[1]-yr[0],ne=j.reduce(J,0),oe=G.reduce(J,0),pe=E-ne,Se=L-oe;let Re=0,ot=ne,Ke=0,ee=oe,be=0,qe=pe,bt=0,Ht=Se;if(w.content&&d){const kt=w.content,yr=kt[2]-kt[0],Rr=kt[3]-kt[1];(w.textFitWidth||w.textFitHeight)&&(Q=fS(c)),Re=W0(j,0,kt[0]),Ke=W0(G,0,kt[1]),ot=W0(j,kt[0],kt[2]),ee=W0(G,kt[1],kt[3]),be=kt[0]-Re,bt=kt[1]-Ke,qe=yr-ot,Ht=Rr-ee}const Et=Q.x1,Tt=Q.y1,Xt=Q.x2-Et,Vt=Q.y2-Tt,er=(kt,yr,Rr,kr)=>{const Sr=X0(kt.stretch-Re,ot,Xt,Et),gn=Y0(kt.fixed-be,qe,kt.stretch,ne),Ti=X0(yr.stretch-Ke,ee,Vt,Tt),ms=Y0(yr.fixed-bt,Ht,yr.stretch,oe),ao=X0(Rr.stretch-Re,ot,Xt,Et),ml=Y0(Rr.fixed-be,qe,Rr.stretch,ne),pa=X0(kr.stretch-Ke,ee,Vt,Tt),Ks=Y0(kr.fixed-bt,Ht,kr.stretch,oe),Bi=new N(Sr,Ti),Is=new N(ao,Ti),Gs=new N(ao,pa),$s=new N(Sr,pa),jo=new N(gn/x,ms/x),gl=new N(ml/x,Ks/x),Fs=s*Math.PI/180;if(Fs){const Ts=Math.sin(Fs),Ps=Math.cos(Fs),os=[Ps,-Ts,Ts,Ps];Bi._matMult(os),Is._matMult(os),$s._matMult(os),Gs._matMult(os)}const ma=kt.stretch+kt.fixed,gs=yr.stretch+yr.fixed;return{tl:Bi,tr:Is,bl:$s,br:Gs,tex:{x:w.paddedRect.x+1+ma,y:w.paddedRect.y+1+gs,w:Rr.stretch+Rr.fixed-ma,h:kr.stretch+kr.fixed-gs},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:jo,pixelOffsetBR:gl,minFontScaleX:qe/x/Xt,minFontScaleY:Ht/x/Vt,isSDF:A}};if(d&&(w.stretchX||w.stretchY)){const kt=zS(j,pe,ne),yr=zS(G,Se,oe);for(let Rr=0;Rr<kt.length-1;Rr++){const kr=kt[Rr],Sr=kt[Rr+1];for(let gn=0;gn<yr.length-1;gn++)m.push(er(kr,yr[gn],Sr,yr[gn+1]))}}else m.push(er({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:E+1},{fixed:0,stretch:L+1}));return m}function W0(c,s,A){let d=0;for(const m of c)d+=Math.max(s,Math.min(A,m[1]))-Math.max(s,Math.min(A,m[0]));return d}function zS(c,s,A){const d=[{fixed:-1,stretch:0}];for(const[m,w]of c){const x=d[d.length-1];d.push({fixed:m-x.stretch,stretch:x.stretch}),d.push({fixed:m-x.stretch,stretch:x.stretch+(w-m)})}return d.push({fixed:s+1,stretch:A}),d}function X0(c,s,A,d){return c/s*A+d}function Y0(c,s,A,d){return c-s*A/d}Qe("Anchor",lh);class J0{constructor(s,A,d,m,w,x,E,L,Q,j){var G;if(this.boxStartIndex=s.length,Q){let J=x.top,ne=x.bottom;const oe=x.collisionPadding;oe&&(J-=oe[1],ne+=oe[3]);let pe=ne-J;pe>0&&(pe=Math.max(10,pe),this.circleDiameter=pe)}else{const J=!((G=x.image)===null||G===void 0)&&G.content&&(x.image.textFitWidth||x.image.textFitHeight)?fS(x):{x1:x.left,y1:x.top,x2:x.right,y2:x.bottom};J.y1=J.y1*E-L[0],J.y2=J.y2*E+L[2],J.x1=J.x1*E-L[3],J.x2=J.x2*E+L[1];const ne=x.collisionPadding;if(ne&&(J.x1-=ne[0]*E,J.y1-=ne[1]*E,J.x2+=ne[2]*E,J.y2+=ne[3]*E),j){const oe=new N(J.x1,J.y1),pe=new N(J.x2,J.y1),Se=new N(J.x1,J.y2),Re=new N(J.x2,J.y2),ot=j*Math.PI/180;oe._rotate(ot),pe._rotate(ot),Se._rotate(ot),Re._rotate(ot),J.x1=Math.min(oe.x,pe.x,Se.x,Re.x),J.x2=Math.max(oe.x,pe.x,Se.x,Re.x),J.y1=Math.min(oe.y,pe.y,Se.y,Re.y),J.y2=Math.max(oe.y,pe.y,Se.y,Re.y)}s.emplaceBack(A.x,A.y,J.x1,J.y1,J.x2,J.y2,d,m,w)}this.boxEndIndex=s.length}}class ZN{constructor(s=[],A=(d,m)=>d<m?-1:d>m?1:0){if(this.data=s,this.length=this.data.length,this.compare=A,this.length>0)for(let d=(this.length>>1)-1;d>=0;d--)this._down(d)}push(s){this.data.push(s),this._up(this.length++)}pop(){if(this.length===0)return;const s=this.data[0],A=this.data.pop();return--this.length>0&&(this.data[0]=A,this._down(0)),s}peek(){return this.data[0]}_up(s){const{data:A,compare:d}=this,m=A[s];for(;s>0;){const w=s-1>>1,x=A[w];if(d(m,x)>=0)break;A[s]=x,s=w}A[s]=m}_down(s){const{data:A,compare:d}=this,m=this.length>>1,w=A[s];for(;s<m;){let x=1+(s<<1);const E=x+1;if(E<this.length&&d(A[E],A[x])<0&&(x=E),d(A[x],w)>=0)break;A[s]=A[x],s=x}A[s]=w}}function WN(c,s=1,A=!1){const d=Sd.fromPoints(c[0]),m=Math.min(d.width(),d.height());let w=m/2;const x=new ZN([],XN),{minX:E,minY:L,maxX:Q,maxY:j}=d;if(m===0)return new N(E,L);for(let ne=E;ne<Q;ne+=m)for(let oe=L;oe<j;oe+=m)x.push(new kf(ne+w,oe+w,w,c));let G=function(ne){let oe=0,pe=0,Se=0;const Re=ne[0];for(let ot=0,Ke=Re.length,ee=Ke-1;ot<Ke;ee=ot++){const be=Re[ot],qe=Re[ee],bt=be.x*qe.y-qe.x*be.y;pe+=(be.x+qe.x)*bt,Se+=(be.y+qe.y)*bt,oe+=3*bt}return new kf(pe/oe,Se/oe,0,ne)}(c),J=x.length;for(;x.length;){const ne=x.pop();(ne.d>G.d||!G.d)&&(G=ne,A&&console.log("found best %d after %d probes",Math.round(1e4*ne.d)/1e4,J)),ne.max-G.d<=s||(w=ne.h/2,x.push(new kf(ne.p.x-w,ne.p.y-w,w,c)),x.push(new kf(ne.p.x+w,ne.p.y-w,w,c)),x.push(new kf(ne.p.x-w,ne.p.y+w,w,c)),x.push(new kf(ne.p.x+w,ne.p.y+w,w,c)),J+=4)}return A&&(console.log(`num probes: ${J}`),console.log(`best distance: ${G.d}`)),G.p}function XN(c,s){return s.max-c.max}function kf(c,s,A,d){this.p=new N(c,s),this.h=A,this.d=function(m,w){let x=!1,E=1/0;for(let L=0;L<w.length;L++){const Q=w[L];for(let j=0,G=Q.length,J=G-1;j<G;J=j++){const ne=Q[j],oe=Q[J];ne.y>m.y!=oe.y>m.y&&m.x<(oe.x-ne.x)*(m.y-ne.y)/(oe.y-ne.y)+ne.x&&(x=!x),E=Math.min(E,_C(m,ne,oe))}}return(x?1:-1)*Math.sqrt(E)}(this.p,d),this.max=this.d+this.h*Math.SQRT2}var oo;h.aD=void 0,(oo=h.aD||(h.aD={}))[oo.center=1]="center",oo[oo.left=2]="left",oo[oo.right=3]="right",oo[oo.top=4]="top",oo[oo.bottom=5]="bottom",oo[oo["top-left"]=6]="top-left",oo[oo["top-right"]=7]="top-right",oo[oo["bottom-left"]=8]="bottom-left",oo[oo["bottom-right"]=9]="bottom-right";const _w=Number.POSITIVE_INFINITY;function HS(c,s){return s[1]!==_w?function(A,d,m){let w=0,x=0;switch(d=Math.abs(d),m=Math.abs(m),A){case"top-right":case"top-left":case"top":x=m-7;break;case"bottom-right":case"bottom-left":case"bottom":x=7-m}switch(A){case"top-right":case"bottom-right":case"right":w=-d;break;case"top-left":case"bottom-left":case"left":w=d}return[w,x]}(c,s[0],s[1]):function(A,d){let m=0,w=0;d<0&&(d=0);const x=d/Math.SQRT2;switch(A){case"top-right":case"top-left":w=x-7;break;case"bottom-right":case"bottom-left":w=7-x;break;case"bottom":w=7-d;break;case"top":w=d-7}switch(A){case"top-right":case"bottom-right":m=-x;break;case"top-left":case"bottom-left":m=x;break;case"left":m=d;break;case"right":m=-d}return[m,w]}(c,s[0])}function jS(c,s,A){var d;const m=c.layout,w=(d=m.get("text-variable-anchor-offset"))===null||d===void 0?void 0:d.evaluate(s,{},A);if(w){const E=w.values,L=[];for(let Q=0;Q<E.length;Q+=2){const j=L[Q]=E[Q],G=E[Q+1].map(J=>J*Es);j.startsWith("top")?G[1]-=7:j.startsWith("bottom")&&(G[1]+=7),L[Q+1]=G}return new An(L)}const x=m.get("text-variable-anchor");if(x){let E;E=c._unevaluatedLayout.getValue("text-radial-offset")!==void 0?[m.get("text-radial-offset").evaluate(s,{},A)*Es,_w]:m.get("text-offset").evaluate(s,{},A).map(Q=>Q*Es);const L=[];for(const Q of x)L.push(Q,HS(Q,E));return new An(L)}return null}function ww(c){switch(c){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function YN(c,s,A,d,m,w,x,E,L,Q,j,G){let J=w.textMaxSize.evaluate(s,{});J===void 0&&(J=x);const ne=c.layers[0].layout,oe=ne.get("icon-offset").evaluate(s,{},j),pe=KS(A.horizontal),Se=x/24,Re=c.tilePixelRatio*Se,ot=c.tilePixelRatio*J/24,Ke=c.tilePixelRatio*E,ee=c.tilePixelRatio*ne.get("symbol-spacing"),be=ne.get("text-padding")*c.tilePixelRatio,qe=function(Rr,kr,Sr,gn=1){const Ti=Rr.get("icon-padding").evaluate(kr,{},Sr),ms=Ti&&Ti.values;return[ms[0]*gn,ms[1]*gn,ms[2]*gn,ms[3]*gn]}(ne,s,j,c.tilePixelRatio),bt=ne.get("text-max-angle")/180*Math.PI,Ht=ne.get("text-rotation-alignment")!=="viewport"&&ne.get("symbol-placement")!=="point",Et=ne.get("icon-rotation-alignment")==="map"&&ne.get("symbol-placement")!=="point",Tt=ne.get("symbol-placement"),Xt=ee/2,Vt=ne.get("icon-text-fit");let er;d&&Vt!=="none"&&(c.allowVerticalPlacement&&A.vertical&&(er=pS(d,A.vertical,Vt,ne.get("icon-text-fit-padding"),oe,Se)),pe&&(d=pS(d,pe,Vt,ne.get("icon-text-fit-padding"),oe,Se)));const kt=j?G.line.getGranularityForZoomLevel(j.z):1,yr=(Rr,kr)=>{kr.x<0||kr.x>=ie||kr.y<0||kr.y>=ie||function(Sr,gn,Ti,ms,ao,ml,pa,Ks,Bi,Is,Gs,$s,jo,gl,Fs,ma,gs,Ts,Ps,os,li,CA,Uf,SA,tD){const Rf=Sr.addToLineVertexArray(gn,Ti);let Ed,Nf,Df,Qf,ZS=0,WS=0,XS=0,YS=0,Fw=-1,Tw=-1;const mu={};let JS=Ho("");if(Sr.allowVerticalPlacement&&ms.vertical){const wo=Ks.layout.get("text-rotate").evaluate(li,{},SA)+90;Df=new J0(Bi,gn,Is,Gs,$s,ms.vertical,jo,gl,Fs,wo),pa&&(Qf=new J0(Bi,gn,Is,Gs,$s,pa,gs,Ts,Fs,wo))}if(ao){const wo=Ks.layout.get("icon-rotate").evaluate(li,{}),yl=Ks.layout.get("icon-text-fit")!=="none",Id=OS(ao,wo,Uf,yl),IA=pa?OS(pa,wo,Uf,yl):void 0;Nf=new J0(Bi,gn,Is,Gs,$s,ao,gs,Ts,!1,wo),ZS=4*Id.length;const Fd=Sr.iconSizeData;let vc=null;Fd.kind==="source"?(vc=[pu*Ks.layout.get("icon-size").evaluate(li,{})],vc[0]>oh&&Cr(`${Sr.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)):Fd.kind==="composite"&&(vc=[pu*CA.compositeIconSizes[0].evaluate(li,{},SA),pu*CA.compositeIconSizes[1].evaluate(li,{},SA)],(vc[0]>oh||vc[1]>oh)&&Cr(`${Sr.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)),Sr.addSymbols(Sr.icon,Id,vc,os,Ps,li,h.an.none,gn,Rf.lineStartIndex,Rf.lineLength,-1,SA),Fw=Sr.icon.placedSymbolArray.length-1,IA&&(WS=4*IA.length,Sr.addSymbols(Sr.icon,IA,vc,os,Ps,li,h.an.vertical,gn,Rf.lineStartIndex,Rf.lineLength,-1,SA),Tw=Sr.icon.placedSymbolArray.length-1)}const eE=Object.keys(ms.horizontal);for(const wo of eE){const yl=ms.horizontal[wo];if(!Ed){JS=Ho(yl.text);const IA=Ks.layout.get("text-rotate").evaluate(li,{},SA);Ed=new J0(Bi,gn,Is,Gs,$s,yl,jo,gl,Fs,IA)}const Id=yl.positionedLines.length===1;if(XS+=VS(Sr,gn,yl,ml,Ks,Fs,li,ma,Rf,ms.vertical?h.an.horizontal:h.an.horizontalOnly,Id?eE:[wo],mu,Fw,CA,SA),Id)break}ms.vertical&&(YS+=VS(Sr,gn,ms.vertical,ml,Ks,Fs,li,ma,Rf,h.an.vertical,["vertical"],mu,Tw,CA,SA));const rD=Ed?Ed.boxStartIndex:Sr.collisionBoxArray.length,nD=Ed?Ed.boxEndIndex:Sr.collisionBoxArray.length,iD=Df?Df.boxStartIndex:Sr.collisionBoxArray.length,sD=Df?Df.boxEndIndex:Sr.collisionBoxArray.length,oD=Nf?Nf.boxStartIndex:Sr.collisionBoxArray.length,aD=Nf?Nf.boxEndIndex:Sr.collisionBoxArray.length,lD=Qf?Qf.boxStartIndex:Sr.collisionBoxArray.length,AD=Qf?Qf.boxEndIndex:Sr.collisionBoxArray.length;let EA=-1;const ty=(wo,yl)=>wo&&wo.circleDiameter?Math.max(wo.circleDiameter,yl):yl;EA=ty(Ed,EA),EA=ty(Df,EA),EA=ty(Nf,EA),EA=ty(Qf,EA);const tE=EA>-1?1:0;tE&&(EA*=tD/Es),Sr.glyphOffsetArray.length>=Lf.MAX_GLYPHS&&Cr("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),li.sortKey!==void 0&&Sr.addToSortKeyRanges(Sr.symbolInstances.length,li.sortKey);const cD=jS(Ks,li,SA),[uD,hD]=function(wo,yl){const Id=wo.length,IA=yl==null?void 0:yl.values;if((IA==null?void 0:IA.length)>0)for(let Fd=0;Fd<IA.length;Fd+=2){const vc=IA[Fd+1];wo.emplaceBack(h.aD[IA[Fd]],vc[0],vc[1])}return[Id,wo.length]}(Sr.textAnchorOffsets,cD);Sr.symbolInstances.emplaceBack(gn.x,gn.y,mu.right>=0?mu.right:-1,mu.center>=0?mu.center:-1,mu.left>=0?mu.left:-1,mu.vertical||-1,Fw,Tw,JS,rD,nD,iD,sD,oD,aD,lD,AD,Is,XS,YS,ZS,WS,tE,0,jo,EA,uD,hD)}(c,kr,Rr,A,d,m,er,c.layers[0],c.collisionBoxArray,s.index,s.sourceLayerIndex,c.index,Re,[be,be,be,be],Ht,L,Ke,qe,Et,oe,s,w,Q,j,x)};if(Tt==="line")for(const Rr of kS(s.geometry,0,0,ie,ie)){const kr=Cd(Rr,kt),Sr=qN(kr,ee,bt,A.vertical||pe,d,24,ot,c.overscaling,ie);for(const gn of Sr)pe&&JN(c,pe.text,Xt,gn)||yr(kr,gn)}else if(Tt==="line-center"){for(const Rr of s.geometry)if(Rr.length>1){const kr=Cd(Rr,kt),Sr=$N(kr,bt,A.vertical||pe,d,24,ot);Sr&&yr(kr,Sr)}}else if(s.type==="Polygon")for(const Rr of Dl(s.geometry,0)){const kr=WN(Rr,16);yr(Cd(Rr[0],kt,!0),new lh(kr.x,kr.y,0))}else if(s.type==="LineString")for(const Rr of s.geometry){const kr=Cd(Rr,kt);yr(kr,new lh(kr[0].x,kr[0].y,0))}else if(s.type==="Point")for(const Rr of s.geometry)for(const kr of Rr)yr([kr],new lh(kr.x,kr.y,0))}function VS(c,s,A,d,m,w,x,E,L,Q,j,G,J,ne,oe){const pe=function(ot,Ke,ee,be,qe,bt,Ht,Et){const Tt=be.layout.get("text-rotate").evaluate(bt,{})*Math.PI/180,Xt=[];for(const Vt of Ke.positionedLines)for(const er of Vt.positionedGlyphs){if(!er.rect)continue;const kt=er.rect||{};let yr=4,Rr=!0,kr=1,Sr=0;const gn=(qe||Et)&&er.vertical,Ti=er.metrics.advance*er.scale/2;if(Et&&Ke.verticalizable&&(Sr=Vt.lineOffset/2-(er.imageName?-(Es-er.metrics.width*er.scale)/2:(er.scale-1)*Es)),er.imageName){const Ts=Ht[er.imageName];Rr=Ts.sdf,kr=Ts.pixelRatio,yr=1/kr}const ms=qe?[er.x+Ti,er.y]:[0,0];let ao=qe?[0,0]:[er.x+Ti+ee[0],er.y+ee[1]-Sr],ml=[0,0];gn&&(ml=ao,ao=[0,0]);const pa=er.metrics.isDoubleResolution?2:1,Ks=(er.metrics.left-yr)*er.scale-Ti+ao[0],Bi=(-er.metrics.top-yr)*er.scale+ao[1],Is=Ks+kt.w/pa*er.scale/kr,Gs=Bi+kt.h/pa*er.scale/kr,$s=new N(Ks,Bi),jo=new N(Is,Bi),gl=new N(Ks,Gs),Fs=new N(Is,Gs);if(gn){const Ts=new N(-Ti,Ti- -17),Ps=-Math.PI/2,os=12-Ti,li=new N(22-os,-(er.imageName?os:0)),CA=new N(...ml);$s._rotateAround(Ps,Ts)._add(li)._add(CA),jo._rotateAround(Ps,Ts)._add(li)._add(CA),gl._rotateAround(Ps,Ts)._add(li)._add(CA),Fs._rotateAround(Ps,Ts)._add(li)._add(CA)}if(Tt){const Ts=Math.sin(Tt),Ps=Math.cos(Tt),os=[Ps,-Ts,Ts,Ps];$s._matMult(os),jo._matMult(os),gl._matMult(os),Fs._matMult(os)}const ma=new N(0,0),gs=new N(0,0);Xt.push({tl:$s,tr:jo,bl:gl,br:Fs,tex:kt,writingMode:Ke.writingMode,glyphOffset:ms,sectionIndex:er.sectionIndex,isSDF:Rr,pixelOffsetTL:ma,pixelOffsetBR:gs,minFontScaleX:0,minFontScaleY:0})}return Xt}(0,A,E,m,w,x,d,c.allowVerticalPlacement),Se=c.textSizeData;let Re=null;Se.kind==="source"?(Re=[pu*m.layout.get("text-size").evaluate(x,{})],Re[0]>oh&&Cr(`${c.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)):Se.kind==="composite"&&(Re=[pu*ne.compositeTextSizes[0].evaluate(x,{},oe),pu*ne.compositeTextSizes[1].evaluate(x,{},oe)],(Re[0]>oh||Re[1]>oh)&&Cr(`${c.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)),c.addSymbols(c.text,pe,Re,E,w,x,Q,s,L.lineStartIndex,L.lineLength,J,oe);for(const ot of j)G[ot]=c.text.placedSymbolArray.length-1;return 4*pe.length}function KS(c){for(const s in c)return c[s];return null}function JN(c,s,A,d){const m=c.compareText;if(s in m){const w=m[s];for(let x=w.length-1;x>=0;x--)if(d.dist(w[x])<A)return!0}else m[s]=[];return m[s].push(d),!1}const GS=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class xw{static from(s){if(!(s instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[A,d]=new Uint8Array(s,0,2);if(A!==219)throw new Error("Data does not appear to be in a KDBush format.");const m=d>>4;if(m!==1)throw new Error(`Got v${m} data when expected v1.`);const w=GS[15&d];if(!w)throw new Error("Unrecognized array type.");const[x]=new Uint16Array(s,2,1),[E]=new Uint32Array(s,4,1);return new xw(E,x,w,s)}constructor(s,A=64,d=Float64Array,m){if(isNaN(s)||s<0)throw new Error(`Unpexpected numItems value: ${s}.`);this.numItems=+s,this.nodeSize=Math.min(Math.max(+A,2),65535),this.ArrayType=d,this.IndexArrayType=s<65536?Uint16Array:Uint32Array;const w=GS.indexOf(this.ArrayType),x=2*s*this.ArrayType.BYTES_PER_ELEMENT,E=s*this.IndexArrayType.BYTES_PER_ELEMENT,L=(8-E%8)%8;if(w<0)throw new Error(`Unexpected typed array class: ${d}.`);m&&m instanceof ArrayBuffer?(this.data=m,this.ids=new this.IndexArrayType(this.data,8,s),this.coords=new this.ArrayType(this.data,8+E+L,2*s),this._pos=2*s,this._finished=!0):(this.data=new ArrayBuffer(8+x+E+L),this.ids=new this.IndexArrayType(this.data,8,s),this.coords=new this.ArrayType(this.data,8+E+L,2*s),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+w]),new Uint16Array(this.data,2,1)[0]=A,new Uint32Array(this.data,4,1)[0]=s)}add(s,A){const d=this._pos>>1;return this.ids[d]=d,this.coords[this._pos++]=s,this.coords[this._pos++]=A,d}finish(){const s=this._pos>>1;if(s!==this.numItems)throw new Error(`Added ${s} items when expected ${this.numItems}.`);return bw(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(s,A,d,m){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:w,coords:x,nodeSize:E}=this,L=[0,w.length-1,0],Q=[];for(;L.length;){const j=L.pop()||0,G=L.pop()||0,J=L.pop()||0;if(G-J<=E){for(let Se=J;Se<=G;Se++){const Re=x[2*Se],ot=x[2*Se+1];Re>=s&&Re<=d&&ot>=A&&ot<=m&&Q.push(w[Se])}continue}const ne=J+G>>1,oe=x[2*ne],pe=x[2*ne+1];oe>=s&&oe<=d&&pe>=A&&pe<=m&&Q.push(w[ne]),(j===0?s<=oe:A<=pe)&&(L.push(J),L.push(ne-1),L.push(1-j)),(j===0?d>=oe:m>=pe)&&(L.push(ne+1),L.push(G),L.push(1-j))}return Q}within(s,A,d){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:m,coords:w,nodeSize:x}=this,E=[0,m.length-1,0],L=[],Q=d*d;for(;E.length;){const j=E.pop()||0,G=E.pop()||0,J=E.pop()||0;if(G-J<=x){for(let Se=J;Se<=G;Se++)qS(w[2*Se],w[2*Se+1],s,A)<=Q&&L.push(m[Se]);continue}const ne=J+G>>1,oe=w[2*ne],pe=w[2*ne+1];qS(oe,pe,s,A)<=Q&&L.push(m[ne]),(j===0?s-d<=oe:A-d<=pe)&&(E.push(J),E.push(ne-1),E.push(1-j)),(j===0?s+d>=oe:A+d>=pe)&&(E.push(ne+1),E.push(G),E.push(1-j))}return L}}function bw(c,s,A,d,m,w){if(m-d<=A)return;const x=d+m>>1;$S(c,s,x,d,m,w),bw(c,s,A,d,x-1,1-w),bw(c,s,A,x+1,m,1-w)}function $S(c,s,A,d,m,w){for(;m>d;){if(m-d>600){const Q=m-d+1,j=A-d+1,G=Math.log(Q),J=.5*Math.exp(2*G/3),ne=.5*Math.sqrt(G*J*(Q-J)/Q)*(j-Q/2<0?-1:1);$S(c,s,A,Math.max(d,Math.floor(A-j*J/Q+ne)),Math.min(m,Math.floor(A+(Q-j)*J/Q+ne)),w)}const x=s[2*A+w];let E=d,L=m;for(Rm(c,s,d,A),s[2*m+w]>x&&Rm(c,s,d,m);E<L;){for(Rm(c,s,E,L),E++,L--;s[2*E+w]<x;)E++;for(;s[2*L+w]>x;)L--}s[2*d+w]===x?Rm(c,s,d,L):(L++,Rm(c,s,L,m)),L<=A&&(d=L+1),A<=L&&(m=L-1)}}function Rm(c,s,A,d){Bw(c,A,d),Bw(s,2*A,2*d),Bw(s,2*A+1,2*d+1)}function Bw(c,s,A){const d=c[s];c[s]=c[A],c[A]=d}function qS(c,s,A,d){const m=c-A,w=s-d;return m*m+w*w}var Cw;h.cw=void 0,(Cw=h.cw||(h.cw={})).create="create",Cw.load="load",Cw.fullLoad="fullLoad";let ey=null,Nm=[];const Sw=1e3/60,Ew="loadTime",Iw="fullLoadTime",eD={mark(c){performance.mark(c)},frame(c){const s=c;ey!=null&&Nm.push(s-ey),ey=s},clearMetrics(){ey=null,Nm=[],performance.clearMeasures(Ew),performance.clearMeasures(Iw);for(const c in h.cw)performance.clearMarks(h.cw[c])},getPerformanceMetrics(){performance.measure(Ew,h.cw.create,h.cw.load),performance.measure(Iw,h.cw.create,h.cw.fullLoad);const c=performance.getEntriesByName(Ew)[0].duration,s=performance.getEntriesByName(Iw)[0].duration,A=Nm.length,d=1/(Nm.reduce((w,x)=>w+x,0)/A/1e3),m=Nm.filter(w=>w>Sw).reduce((w,x)=>w+(x-Sw)/Sw,0);return{loadTime:c,fullLoadTime:s,fps:d,percentDroppedFrames:m/(A+m)*100,totalFrames:A}}};h.$=ie,h.A=fe,h.B=function([c,s,A]){return s+=90,s*=Math.PI/180,A*=Math.PI/180,{x:c*Math.cos(s)*Math.sin(A),y:c*Math.sin(s)*Math.sin(A),z:c*Math.cos(A)}},h.C=ns,h.D=sr,h.E=mt,h.F=Er,h.G=le,h.H=function(c){if(ar==null){const s=c.navigator?c.navigator.userAgent:null;ar=!!c.safari||!(!s||!(/\b(iPad|iPhone|iPod)\b/.test(s)||s.match("Safari")&&!s.match("Chrome")))}return ar},h.I=Aw,h.J=class{constructor(c,s){this.target=c,this.mapId=s,this.resolveRejects={},this.tasks={},this.taskQueue=[],this.abortControllers={},this.messageHandlers={},this.invoker=new VN(()=>this.process()),this.subscription=Lr(this.target,"message",A=>this.receive(A),!1),this.globalScope=Kt(self)?c:window}registerMessageHandler(c,s){this.messageHandlers[c]=s}sendAsync(c,s){return new Promise((A,d)=>{const m=Math.round(1e18*Math.random()).toString(36).substring(0,10),w=s?Lr(s.signal,"abort",()=>{w==null||w.unsubscribe(),delete this.resolveRejects[m];const L={id:m,type:"<cancel>",origin:location.origin,targetMapId:c.targetMapId,sourceMapId:this.mapId};this.target.postMessage(L)},KN):null;this.resolveRejects[m]={resolve:L=>{w==null||w.unsubscribe(),A(L)},reject:L=>{w==null||w.unsubscribe(),d(L)}};const x=[],E=Object.assign(Object.assign({},c),{id:m,sourceMapId:this.mapId,origin:location.origin,data:Ot(c.data,x)});this.target.postMessage(E,{transfer:x})})}receive(c){const s=c.data,A=s.id;if(!(s.origin!=="file://"&&location.origin!=="file://"&&s.origin!=="resource://android"&&location.origin!=="resource://android"&&s.origin!==location.origin||s.targetMapId&&this.mapId!==s.targetMapId)){if(s.type==="<cancel>"){delete this.tasks[A];const d=this.abortControllers[A];return delete this.abortControllers[A],void(d&&d.abort())}if(Kt(self)||s.mustQueue)return this.tasks[A]=s,this.taskQueue.push(A),void this.invoker.trigger();this.processTask(A,s)}}process(){if(this.taskQueue.length===0)return;const c=this.taskQueue.shift(),s=this.tasks[c];delete this.tasks[c],this.taskQueue.length>0&&this.invoker.trigger(),s&&this.processTask(c,s)}processTask(c,s){return o(this,void 0,void 0,function*(){if(s.type==="<response>"){const m=this.resolveRejects[c];return delete this.resolveRejects[c],m?void(s.error?m.reject(Pt(s.error)):m.resolve(Pt(s.data))):void 0}if(!this.messageHandlers[s.type])return void this.completeTask(c,new Error(`Could not find a registered handler for ${s.type}, map ID: ${this.mapId}, available handlers: ${Object.keys(this.messageHandlers).join(", ")}`));const A=Pt(s.data),d=new AbortController;this.abortControllers[c]=d;try{const m=yield this.messageHandlers[s.type](s.sourceMapId,A,d);this.completeTask(c,null,m)}catch(m){this.completeTask(c,m)}})}completeTask(c,s,A){const d=[];delete this.abortControllers[c];const m={id:c,type:"<response>",sourceMapId:this.mapId,origin:location.origin,error:s?Ot(s):null,data:Ot(A,d)};this.target.postMessage(m,{transfer:d})}remove(){this.invoker.remove(),this.subscription.unsubscribe()}},h.K=_e,h.L=function(){var c=new fe(16);return fe!=Float32Array&&(c[1]=0,c[2]=0,c[3]=0,c[4]=0,c[6]=0,c[7]=0,c[8]=0,c[9]=0,c[11]=0,c[12]=0,c[13]=0,c[14]=0),c[0]=1,c[5]=1,c[10]=1,c[15]=1,c},h.M=function(c,s,A){var d,m,w,x,E,L,Q,j,G,J,ne,oe,pe=A[0],Se=A[1],Re=A[2];return s===c?(c[12]=s[0]*pe+s[4]*Se+s[8]*Re+s[12],c[13]=s[1]*pe+s[5]*Se+s[9]*Re+s[13],c[14]=s[2]*pe+s[6]*Se+s[10]*Re+s[14],c[15]=s[3]*pe+s[7]*Se+s[11]*Re+s[15]):(m=s[1],w=s[2],x=s[3],E=s[4],L=s[5],Q=s[6],j=s[7],G=s[8],J=s[9],ne=s[10],oe=s[11],c[0]=d=s[0],c[1]=m,c[2]=w,c[3]=x,c[4]=E,c[5]=L,c[6]=Q,c[7]=j,c[8]=G,c[9]=J,c[10]=ne,c[11]=oe,c[12]=d*pe+E*Se+G*Re+s[12],c[13]=m*pe+L*Se+J*Re+s[13],c[14]=w*pe+Q*Se+ne*Re+s[14],c[15]=x*pe+j*Se+oe*Re+s[15]),c},h.N=function(c,s,A){var d=A[0],m=A[1],w=A[2];return c[0]=s[0]*d,c[1]=s[1]*d,c[2]=s[2]*d,c[3]=s[3]*d,c[4]=s[4]*m,c[5]=s[5]*m,c[6]=s[6]*m,c[7]=s[7]*m,c[8]=s[8]*w,c[9]=s[9]*w,c[10]=s[10]*w,c[11]=s[11]*w,c[12]=s[12],c[13]=s[13],c[14]=s[14],c[15]=s[15],c},h.O=function(c,s,A){var d=s[0],m=s[1],w=s[2],x=s[3],E=s[4],L=s[5],Q=s[6],j=s[7],G=s[8],J=s[9],ne=s[10],oe=s[11],pe=s[12],Se=s[13],Re=s[14],ot=s[15],Ke=A[0],ee=A[1],be=A[2],qe=A[3];return c[0]=Ke*d+ee*E+be*G+qe*pe,c[1]=Ke*m+ee*L+be*J+qe*Se,c[2]=Ke*w+ee*Q+be*ne+qe*Re,c[3]=Ke*x+ee*j+be*oe+qe*ot,c[4]=(Ke=A[4])*d+(ee=A[5])*E+(be=A[6])*G+(qe=A[7])*pe,c[5]=Ke*m+ee*L+be*J+qe*Se,c[6]=Ke*w+ee*Q+be*ne+qe*Re,c[7]=Ke*x+ee*j+be*oe+qe*ot,c[8]=(Ke=A[8])*d+(ee=A[9])*E+(be=A[10])*G+(qe=A[11])*pe,c[9]=Ke*m+ee*L+be*J+qe*Se,c[10]=Ke*w+ee*Q+be*ne+qe*Re,c[11]=Ke*x+ee*j+be*oe+qe*ot,c[12]=(Ke=A[12])*d+(ee=A[13])*E+(be=A[14])*G+(qe=A[15])*pe,c[13]=Ke*m+ee*L+be*J+qe*Se,c[14]=Ke*w+ee*Q+be*ne+qe*Re,c[15]=Ke*x+ee*j+be*oe+qe*ot,c},h.P=N,h.Q=function(c,s){const A={};for(let d=0;d<s.length;d++){const m=s[d];m in c&&(A[m]=c[m])}return A},h.R=fa,h.S=ah,h.T=q_,h.U=CS,h.V=BS,h.W=V,h.X=W,h.Y=br,h.Z=pl,h._=o,h.a=Ae,h.a$=function(c,s,A){return c[0]=s[0]*A,c[1]=s[1]*A,c[2]=s[2]*A,c[3]=s[3]*A,c},h.a0=Um,h.a1=Sd,h.a2=25,h.a3=vw,h.a4=c=>{const s=window.document.createElement("video");return s.muted=!0,new Promise(A=>{s.onloadstart=()=>{A(s)};for(const d of c){const m=window.document.createElement("source");yt(d)||(s.crossOrigin="Anonymous"),m.src=d,s.appendChild(m)}})},h.a5=Yt,h.a6=function(){return $t++},h.a7=Ie,h.a8=Lf,h.a9=Ro,h.aA=Es,h.aB=Ce,h.aC=function(c,s,A,d,m=!1){if(!A[0]&&!A[1])return[0,0];const w=m?d==="map"?-c.bearingInRadians:0:d==="viewport"?c.bearingInRadians:0;if(w){const x=Math.sin(w),E=Math.cos(w);A=[A[0]*E-A[1]*x,A[0]*x+A[1]*E]}return[m?A[0]:Ce(s,A[0],c.zoom),m?A[1]:Ce(s,A[1],c.zoom)]},h.aE=hw,h.aF=ww,h.aG=uw,h.aH=xw,h.aI=oi,h.aJ=j0,h.aK=gt,h.aL=fn,h.aM=xn,h.aN=Rt,h.aO=un,h.aP=ES,h.aQ=Te,h.aR=de,h.aS=function(c){var s=new fe(3);return s[0]=c[0],s[1]=c[1],s[2]=c[2],s},h.aT=function(c,s,A){return c[0]=s[0]-A[0],c[1]=s[1]-A[1],c[2]=s[2]-A[2],c},h.aU=function(c,s){var A=s[0],d=s[1],m=s[2],w=A*A+d*d+m*m;return w>0&&(w=1/Math.sqrt(w)),c[0]=s[0]*w,c[1]=s[1]*w,c[2]=s[2]*w,c},h.aV=we,h.aW=function(c,s){return c[0]*s[0]+c[1]*s[1]+c[2]*s[2]},h.aX=function(c,s,A){return c[0]=s[0]*A[0],c[1]=s[1]*A[1],c[2]=s[2]*A[2],c[3]=s[3]*A[3],c},h.aY=Ue,h.aZ=function(c,s,A){const d=s[0]*A[0]+s[1]*A[1]+s[2]*A[2];return d===0?null:(-(c[0]*A[0]+c[1]*A[1]+c[2]*A[2])-A[3])/d},h.a_=Ze,h.aa=bd,h.ab=PS,h.ac=function(c){const s={};if(c.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(A,d,m,w)=>{const x=m||w;return s[d]=!x||x.toLowerCase(),""}),s["max-age"]){const A=parseInt(s["max-age"],10);isNaN(A)?delete s["max-age"]:s["max-age"]=A}return s},h.ad=Hr,h.ae=function(c){return Math.pow(2,c)},h.af=ae,h.ag=dt,h.ah=85.051129,h.ai=SS,h.aj=function(c){return Math.log(c)/Math.LN2},h.ak=function(c){var s=c[0],A=c[1];return s*s+A*A},h.al=function(c,s){const A=[];for(const d in c)d in s||A.push(d);return A},h.am=function(c,s){let A=0,d=0;if(c.kind==="constant")d=c.layoutSize;else if(c.kind!=="source"){const{interpolationType:m,minZoom:w,maxZoom:x}=c,E=m?dt(rs.interpolationFactor(m,s,w,x),0,1):0;c.kind==="camera"?d=ns.number(c.minSize,c.maxSize,E):A=E}return{uSizeT:A,uSize:d}},h.ao=function(c,{uSize:s,uSizeT:A},{lowerSize:d,upperSize:m}){return c.kind==="source"?d/pu:c.kind==="composite"?ns.number(d/pu,m/pu,A):s},h.ap=function(c,s){var A=s[0],d=s[1],m=s[2],w=s[3],x=s[4],E=s[5],L=s[6],Q=s[7],j=s[8],G=s[9],J=s[10],ne=s[11],oe=s[12],pe=s[13],Se=s[14],Re=s[15],ot=A*E-d*x,Ke=A*L-m*x,ee=A*Q-w*x,be=d*L-m*E,qe=d*Q-w*E,bt=m*Q-w*L,Ht=j*pe-G*oe,Et=j*Se-J*oe,Tt=j*Re-ne*oe,Xt=G*Se-J*pe,Vt=G*Re-ne*pe,er=J*Re-ne*Se,kt=ot*er-Ke*Vt+ee*Xt+be*Tt-qe*Et+bt*Ht;return kt?(c[0]=(E*er-L*Vt+Q*Xt)*(kt=1/kt),c[1]=(m*Vt-d*er-w*Xt)*kt,c[2]=(pe*bt-Se*qe+Re*be)*kt,c[3]=(J*qe-G*bt-ne*be)*kt,c[4]=(L*Tt-x*er-Q*Et)*kt,c[5]=(A*er-m*Tt+w*Et)*kt,c[6]=(Se*ee-oe*bt-Re*Ke)*kt,c[7]=(j*bt-J*ee+ne*Ke)*kt,c[8]=(x*Vt-E*Tt+Q*Ht)*kt,c[9]=(d*Tt-A*Vt-w*Ht)*kt,c[10]=(oe*qe-pe*ee+Re*ot)*kt,c[11]=(G*ee-j*qe-ne*ot)*kt,c[12]=(E*Et-x*Xt-L*Ht)*kt,c[13]=(A*Xt-d*Et+m*Ht)*kt,c[14]=(pe*Ke-oe*be-Se*ot)*kt,c[15]=(j*be-G*Ke+J*ot)*kt,c):null},h.aq=it,h.ar=function(c){return Math.hypot(c[0],c[1])},h.as=function(c){return c[0]=0,c[1]=0,c},h.at=function(c,s,A){return c[0]=s[0]*A,c[1]=s[1]*A,c},h.au=dw,h.av=At,h.aw=function(c,s,A,d){const m=s.y-c.y,w=s.x-c.x,x=d.y-A.y,E=d.x-A.x,L=x*w-E*m;if(L===0)return null;const Q=(E*(c.y-A.y)-x*(c.x-A.x))/L;return new N(c.x+Q*w,c.y+Q*m)},h.ax=kS,h.ay=yC,h.az=function(c){let s=1/0,A=1/0,d=-1/0,m=-1/0;for(const w of c)s=Math.min(s,w.x),A=Math.min(A,w.y),d=Math.max(d,w.x),m=Math.max(m,w.y);return[s,A,d,m]},h.b=lr,h.b$=wN,h.b0=function(c,s){return c[0]*s[0]+c[1]*s[1]+c[2]*s[2]+c[3]},h.b1=FS,h.b2=Mf,h.b3=function(c,s,A,d,m){var w,x=1/Math.tan(s/2);return c[0]=x/A,c[1]=0,c[2]=0,c[3]=0,c[4]=0,c[5]=x,c[6]=0,c[7]=0,c[8]=0,c[9]=0,c[11]=-1,c[12]=0,c[13]=0,c[15]=0,m!=null&&m!==1/0?(c[10]=(m+d)*(w=1/(d-m)),c[14]=2*m*d*w):(c[10]=-1,c[14]=-2*d),c},h.b4=function(c){var s=new fe(16);return s[0]=c[0],s[1]=c[1],s[2]=c[2],s[3]=c[3],s[4]=c[4],s[5]=c[5],s[6]=c[6],s[7]=c[7],s[8]=c[8],s[9]=c[9],s[10]=c[10],s[11]=c[11],s[12]=c[12],s[13]=c[13],s[14]=c[14],s[15]=c[15],s},h.b5=function(c,s,A){var d=Math.sin(A),m=Math.cos(A),w=s[0],x=s[1],E=s[2],L=s[3],Q=s[4],j=s[5],G=s[6],J=s[7];return s!==c&&(c[8]=s[8],c[9]=s[9],c[10]=s[10],c[11]=s[11],c[12]=s[12],c[13]=s[13],c[14]=s[14],c[15]=s[15]),c[0]=w*m+Q*d,c[1]=x*m+j*d,c[2]=E*m+G*d,c[3]=L*m+J*d,c[4]=Q*m-w*d,c[5]=j*m-x*d,c[6]=G*m-E*d,c[7]=J*m-L*d,c},h.b6=function(c,s,A){var d=Math.sin(A),m=Math.cos(A),w=s[4],x=s[5],E=s[6],L=s[7],Q=s[8],j=s[9],G=s[10],J=s[11];return s!==c&&(c[0]=s[0],c[1]=s[1],c[2]=s[2],c[3]=s[3],c[12]=s[12],c[13]=s[13],c[14]=s[14],c[15]=s[15]),c[4]=w*m+Q*d,c[5]=x*m+j*d,c[6]=E*m+G*d,c[7]=L*m+J*d,c[8]=Q*m-w*d,c[9]=j*m-x*d,c[10]=G*m-E*d,c[11]=J*m-L*d,c},h.b7=function(){const c=new Float32Array(16);return ae(c),c},h.b8=function(){const c=new Float64Array(16);return ae(c),c},h.b9=function(){return new Float64Array(16)},h.bA=function(c){return c[0]=0,c[1]=0,c[2]=0,c},h.bB=function(c,s,A,d){const m=Math.sqrt(c*c+s*s),w=Math.sqrt(A*A+d*d);c/=m,s/=m,A/=w,d/=w;const x=Math.acos(c*A+s*d);return-s*A+c*d>0?x:-x},h.bC=function(c,s){const A=Pe(c,2*Math.PI),d=Pe(s,2*Math.PI);return Math.min(Math.abs(A-d),Math.abs(A-d+2*Math.PI),Math.abs(A-d-2*Math.PI))},h.bD=function(){const c={},s=Me.$version;for(const A in Me.$root){const d=Me.$root[A];if(d.required){let m=null;m=A==="version"?s:d.type==="array"?[]:{},m!=null&&(c[A]=m)}}return c},h.bE=ut,h.bF=et,h.bG=function c(s,A){if(Array.isArray(s)){if(!Array.isArray(A)||s.length!==A.length)return!1;for(let d=0;d<s.length;d++)if(!c(s[d],A[d]))return!1;return!0}if(typeof s=="object"&&s!==null&&A!==null){if(typeof A!="object"||Object.keys(s).length!==Object.keys(A).length)return!1;for(const d in s)if(!c(s[d],A[d]))return!1;return!0}return s===A},h.bH=function(c){c=c.slice();const s=Object.create(null);for(let A=0;A<c.length;A++)s[c[A].id]=c[A];for(let A=0;A<c.length;A++)"ref"in c[A]&&(c[A]=nr(c[A],s[c[A].ref]));return c},h.bI=function(c){if(c.type==="custom")return new jN(c);switch(c.type){case"background":return new ON(c);case"circle":return new kR(c);case"color-relief":return new OR(c);case"fill":return new tN(c);case"fill-extrusion":return new AN(c);case"heatmap":return new RR(c);case"hillshade":return new DR(c);case"line":return new gN(c);case"raster":return new HN(c);case"symbol":return new Z0(c)}},h.bJ=Ft,h.bK=function(c,s){if(!c)return[{command:"setStyle",args:[s]}];let A=[];try{if(!tr(c.version,s.version))return[{command:"setStyle",args:[s]}];tr(c.center,s.center)||A.push({command:"setCenter",args:[s.center]}),tr(c.state,s.state)||A.push({command:"setGlobalState",args:[s.state]}),tr(c.centerAltitude,s.centerAltitude)||A.push({command:"setCenterAltitude",args:[s.centerAltitude]}),tr(c.zoom,s.zoom)||A.push({command:"setZoom",args:[s.zoom]}),tr(c.bearing,s.bearing)||A.push({command:"setBearing",args:[s.bearing]}),tr(c.pitch,s.pitch)||A.push({command:"setPitch",args:[s.pitch]}),tr(c.roll,s.roll)||A.push({command:"setRoll",args:[s.roll]}),tr(c.sprite,s.sprite)||A.push({command:"setSprite",args:[s.sprite]}),tr(c.glyphs,s.glyphs)||A.push({command:"setGlyphs",args:[s.glyphs]}),tr(c.transition,s.transition)||A.push({command:"setTransition",args:[s.transition]}),tr(c.light,s.light)||A.push({command:"setLight",args:[s.light]}),tr(c.terrain,s.terrain)||A.push({command:"setTerrain",args:[s.terrain]}),tr(c.sky,s.sky)||A.push({command:"setSky",args:[s.sky]}),tr(c.projection,s.projection)||A.push({command:"setProjection",args:[s.projection]});const d={},m=[];(function(x,E,L,Q){let j;for(j in E=E||{},x=x||{})Object.prototype.hasOwnProperty.call(x,j)&&(Object.prototype.hasOwnProperty.call(E,j)||Jr(j,L,Q));for(j in E)Object.prototype.hasOwnProperty.call(E,j)&&(Object.prototype.hasOwnProperty.call(x,j)?tr(x[j],E[j])||(x[j].type==="geojson"&&E[j].type==="geojson"&&Nr(x,E,j)?Ar(L,{command:"setGeoJSONSourceData",args:[j,E[j].data]}):jr(j,E,L,Q)):qt(j,E,L))})(c.sources,s.sources,m,d);const w=[];c.layers&&c.layers.forEach(x=>{"source"in x&&d[x.source]?A.push({command:"removeLayer",args:[x.id]}):w.push(x)}),A=A.concat(m),function(x,E,L){E=E||[];const Q=(x=x||[]).map(Ur),j=E.map(Ur),G=x.reduce(Ln,{}),J=E.reduce(Ln,{}),ne=Q.slice(),oe=Object.create(null);let pe,Se,Re,ot,Ke;for(let ee=0,be=0;ee<Q.length;ee++)pe=Q[ee],Object.prototype.hasOwnProperty.call(J,pe)?be++:(Ar(L,{command:"removeLayer",args:[pe]}),ne.splice(ne.indexOf(pe,be),1));for(let ee=0,be=0;ee<j.length;ee++)pe=j[j.length-1-ee],ne[ne.length-1-ee]!==pe&&(Object.prototype.hasOwnProperty.call(G,pe)?(Ar(L,{command:"removeLayer",args:[pe]}),ne.splice(ne.lastIndexOf(pe,ne.length-be),1)):be++,ot=ne[ne.length-ee],Ar(L,{command:"addLayer",args:[J[pe],ot]}),ne.splice(ne.length-ee,0,pe),oe[pe]=!0);for(let ee=0;ee<j.length;ee++)if(pe=j[ee],Se=G[pe],Re=J[pe],!oe[pe]&&!tr(Se,Re))if(tr(Se.source,Re.source)&&tr(Se["source-layer"],Re["source-layer"])&&tr(Se.type,Re.type)){for(Ke in _r(Se.layout,Re.layout,L,pe,null,"setLayoutProperty"),_r(Se.paint,Re.paint,L,pe,null,"setPaintProperty"),tr(Se.filter,Re.filter)||Ar(L,{command:"setFilter",args:[pe,Re.filter]}),tr(Se.minzoom,Re.minzoom)&&tr(Se.maxzoom,Re.maxzoom)||Ar(L,{command:"setLayerZoomRange",args:[pe,Re.minzoom,Re.maxzoom]}),Se)Object.prototype.hasOwnProperty.call(Se,Ke)&&Ke!=="layout"&&Ke!=="paint"&&Ke!=="filter"&&Ke!=="metadata"&&Ke!=="minzoom"&&Ke!=="maxzoom"&&(Ke.indexOf("paint.")===0?_r(Se[Ke],Re[Ke],L,pe,Ke.slice(6),"setPaintProperty"):tr(Se[Ke],Re[Ke])||Ar(L,{command:"setLayerProperty",args:[pe,Ke,Re[Ke]]}));for(Ke in Re)Object.prototype.hasOwnProperty.call(Re,Ke)&&!Object.prototype.hasOwnProperty.call(Se,Ke)&&Ke!=="layout"&&Ke!=="paint"&&Ke!=="filter"&&Ke!=="metadata"&&Ke!=="minzoom"&&Ke!=="maxzoom"&&(Ke.indexOf("paint.")===0?_r(Se[Ke],Re[Ke],L,pe,Ke.slice(6),"setPaintProperty"):tr(Se[Ke],Re[Ke])||Ar(L,{command:"setLayerProperty",args:[pe,Ke,Re[Ke]]}))}else Ar(L,{command:"removeLayer",args:[pe]}),ot=ne[ne.lastIndexOf(pe)+1],Ar(L,{command:"addLayer",args:[Re,ot]})}(w,s.layers,A)}catch(d){console.warn("Unable to compute style diff:",d),A=[{command:"setStyle",args:[s]}]}return A},h.bL=function(c){const s=[],A=c.id;return A===void 0&&s.push({message:`layers.${A}: missing required property "id"`}),c.render===void 0&&s.push({message:`layers.${A}: missing required method "render"`}),c.renderingMode&&c.renderingMode!=="2d"&&c.renderingMode!=="3d"&&s.push({message:`layers.${A}: property "renderingMode" must be either "2d" or "3d"`}),s},h.bM=jt,h.bN=vr,h.bO=class extends ai{constructor(c,s){super(c,s),this.current=0}set(c){this.current!==c&&(this.current=c,this.gl.uniform1i(this.location,c))}},h.bP=D0,h.bQ=class extends ai{constructor(c,s){super(c,s),this.current=z_}set(c){if(c[12]!==this.current[12]||c[0]!==this.current[0])return this.current=c,void this.gl.uniformMatrix4fv(this.location,!1,c);for(let s=1;s<16;s++)if(c[s]!==this.current[s]){this.current=c,this.gl.uniformMatrix4fv(this.location,!1,c);break}}},h.bR=ps,h.bS=class extends ai{constructor(c,s){super(c,s),this.current=[0,0,0]}set(c){c[0]===this.current[0]&&c[1]===this.current[1]&&c[2]===this.current[2]||(this.current=c,this.gl.uniform3f(this.location,c[0],c[1],c[2]))}},h.bT=class extends ai{constructor(c,s){super(c,s),this.current=[0,0]}set(c){c[0]===this.current[0]&&c[1]===this.current[1]||(this.current=c,this.gl.uniform2f(this.location,c[0],c[1]))}},h.bU=ue,h.bV=function(c,s){var A=Math.sin(s),d=Math.cos(s);return c[0]=d,c[1]=A,c[2]=0,c[3]=-A,c[4]=d,c[5]=0,c[6]=0,c[7]=0,c[8]=1,c},h.bW=function(c,s,A){var d=s[0],m=s[1],w=s[2];return c[0]=d*A[0]+m*A[3]+w*A[6],c[1]=d*A[1]+m*A[4]+w*A[7],c[2]=d*A[2]+m*A[5]+w*A[8],c},h.bX=function(c,s,A,d,m,w,x){var E=1/(s-A),L=1/(d-m),Q=1/(w-x);return c[0]=-2*E,c[1]=0,c[2]=0,c[3]=0,c[4]=0,c[5]=-2*L,c[6]=0,c[7]=0,c[8]=0,c[9]=0,c[10]=2*Q,c[11]=0,c[12]=(s+A)*E,c[13]=(m+d)*L,c[14]=(x+w)*Q,c[15]=1,c},h.bY=class extends ai{constructor(c,s){super(c,s),this.current=new Array}set(c){if(c!=this.current){this.current=c;const s=new Float32Array(4*c.length);for(let A=0;A<c.length;A++)s[4*A]=c[A].r,s[4*A+1]=c[A].g,s[4*A+2]=c[A].b,s[4*A+3]=c[A].a;this.gl.uniform4fv(this.location,s)}}},h.bZ=class extends ai{constructor(c,s){super(c,s),this.current=new Array}set(c){if(c!=this.current){this.current=c;const s=new Float32Array(c);this.gl.uniform1fv(this.location,s)}}},h.b_=class extends f{},h.ba=function(c,s,A){const d=new Float64Array(4);return He(d,c,s-90,A),d},h.bb=function(c,s,A,d){var m,w,x,E,L,Q=s[0],j=s[1],G=s[2],J=s[3],ne=A[0],oe=A[1],pe=A[2],Se=A[3];return(w=Q*ne+j*oe+G*pe+J*Se)<0&&(w=-w,ne=-ne,oe=-oe,pe=-pe,Se=-Se),1-w>se?(m=Math.acos(w),x=Math.sin(m),E=Math.sin((1-d)*m)/x,L=Math.sin(d*m)/x):(E=1-d,L=d),c[0]=E*Q+L*ne,c[1]=E*j+L*oe,c[2]=E*G+L*pe,c[3]=E*J+L*Se,c},h.bc=function(c){const s=new Float64Array(9);var A,d,m,w,x,E,L,Q,j,G,J,ne,oe,pe,Se,Re,ot,Ke;G=(m=(d=c)[0])*(L=m+m),J=(w=d[1])*L,oe=(x=d[2])*L,pe=x*(Q=w+w),Re=(E=d[3])*L,ot=E*Q,Ke=E*(j=x+x),(A=s)[0]=1-(ne=w*Q)-(Se=x*j),A[3]=J-Ke,A[6]=oe+ot,A[1]=J+Ke,A[4]=1-G-Se,A[7]=pe-Re,A[2]=oe-ot,A[5]=pe+Re,A[8]=1-G-ne;const ee=un(-Math.asin(dt(s[2],-1,1)));let be,qe;return Math.hypot(s[5],s[8])<.001?(be=0,qe=-un(Math.atan2(s[3],s[4]))):(be=un(s[5]===0&&s[8]===0?0:Math.atan2(s[5],s[8])),qe=un(s[1]===0&&s[0]===0?0:Math.atan2(s[1],s[0]))),{roll:be,pitch:ee+90,bearing:qe}},h.bd=function(c,s){return c.roll==s.roll&&c.pitch==s.pitch&&c.bearing==s.bearing},h.be=ln,h.bf=_o,h.bg=Tf,h.bh=Im,h.bi=Ff,h.bj=$e,h.bk=nt,h.bl=Gr,h.bm=function(c,s,A,d,m){return $e(d,m,dt((c-s)/(A-s),0,1))},h.bn=Pe,h.bo=function(){return new Float64Array(3)},h.bp=function(c,s,A,d){return c[0]=s[0]+A[0]*d,c[1]=s[1]+A[1]*d,c[2]=s[2]+A[2]*d,c},h.bq=He,h.br=function(c,s,A){var d=A[0],m=A[1],w=A[2],x=s[0],E=s[1],L=s[2],Q=m*L-w*E,j=w*x-d*L,G=d*E-m*x,J=m*G-w*j,ne=w*Q-d*G,oe=d*j-m*Q,pe=2*A[3];return j*=pe,G*=pe,ne*=2,oe*=2,c[0]=x+(Q*=pe)+(J*=2),c[1]=E+j+ne,c[2]=L+G+oe,c},h.bs=function(c,s,A){const d=(m=[c[0],c[1],c[2],s[0],s[1],s[2],A[0],A[1],A[2]])[0]*((j=m[8])*(x=m[4])-(E=m[5])*(Q=m[7]))+m[1]*(-j*(w=m[3])+E*(L=m[6]))+m[2]*(Q*w-x*L);var m,w,x,E,L,Q,j;if(d===0)return null;const G=we([],[s[0],s[1],s[2]],[A[0],A[1],A[2]]),J=we([],[A[0],A[1],A[2]],[c[0],c[1],c[2]]),ne=we([],[c[0],c[1],c[2]],[s[0],s[1],s[2]]),oe=Te([],G,-c[3]);return de(oe,oe,Te([],J,-s[3])),de(oe,oe,Te([],ne,-A[3])),Te(oe,oe,1/d),oe},h.bt=gw,h.bu=function(){return new Float64Array(4)},h.bv=function(c,s,A,d){var m=[],w=[];return m[0]=s[0]-A[0],m[1]=s[1]-A[1],m[2]=s[2]-A[2],w[0]=m[0]*Math.cos(d)-m[1]*Math.sin(d),w[1]=m[0]*Math.sin(d)+m[1]*Math.cos(d),w[2]=m[2],c[0]=w[0]+A[0],c[1]=w[1]+A[1],c[2]=w[2]+A[2],c},h.bw=function(c,s,A,d){var m=[],w=[];return m[0]=s[0]-A[0],m[1]=s[1]-A[1],m[2]=s[2]-A[2],w[0]=m[0],w[1]=m[1]*Math.cos(d)-m[2]*Math.sin(d),w[2]=m[1]*Math.sin(d)+m[2]*Math.cos(d),c[0]=w[0]+A[0],c[1]=w[1]+A[1],c[2]=w[2]+A[2],c},h.bx=function(c,s,A,d){var m=[],w=[];return m[0]=s[0]-A[0],m[1]=s[1]-A[1],m[2]=s[2]-A[2],w[0]=m[2]*Math.sin(d)+m[0]*Math.cos(d),w[1]=m[1],w[2]=m[2]*Math.cos(d)-m[0]*Math.sin(d),c[0]=w[0]+A[0],c[1]=w[1]+A[1],c[2]=w[2]+A[2],c},h.by=function(c,s,A){var d=Math.sin(A),m=Math.cos(A),w=s[0],x=s[1],E=s[2],L=s[3],Q=s[8],j=s[9],G=s[10],J=s[11];return s!==c&&(c[4]=s[4],c[5]=s[5],c[6]=s[6],c[7]=s[7],c[12]=s[12],c[13]=s[13],c[14]=s[14],c[15]=s[15]),c[0]=w*m-Q*d,c[1]=x*m-j*d,c[2]=E*m-G*d,c[3]=L*m-J*d,c[8]=w*d+Q*m,c[9]=x*d+j*m,c[10]=E*d+G*m,c[11]=L*d+J*m,c},h.bz=function(c,s){const A=Pe(c,360),d=Pe(s,360),m=d-A,w=d>A?m-360:m+360;return Math.abs(m)<Math.abs(w)?m:w},h.c=ct,h.c0=class extends _{},h.c1=$_,h.c2=function(c){return c<=1?1:Math.pow(2,Math.ceil(Math.log(c)/Math.LN2))},h.c3=IC,h.c4=function(c,s,A){var d=s[0],m=s[1],w=s[2],x=A[3]*d+A[7]*m+A[11]*w+A[15];return c[0]=(A[0]*d+A[4]*m+A[8]*w+A[12])/(x=x||1),c[1]=(A[1]*d+A[5]*m+A[9]*w+A[13])/x,c[2]=(A[2]*d+A[6]*m+A[10]*w+A[14])/x,c},h.c5=class extends fc{},h.c6=class extends ${},h.c7=function(c,s){return c[0]===s[0]&&c[1]===s[1]&&c[2]===s[2]&&c[3]===s[3]&&c[4]===s[4]&&c[5]===s[5]&&c[6]===s[6]&&c[7]===s[7]&&c[8]===s[8]&&c[9]===s[9]&&c[10]===s[10]&&c[11]===s[11]&&c[12]===s[12]&&c[13]===s[13]&&c[14]===s[14]&&c[15]===s[15]},h.c8=function(c,s){var A=c[0],d=c[1],m=c[2],w=c[3],x=c[4],E=c[5],L=c[6],Q=c[7],j=c[8],G=c[9],J=c[10],ne=c[11],oe=c[12],pe=c[13],Se=c[14],Re=c[15],ot=s[0],Ke=s[1],ee=s[2],be=s[3],qe=s[4],bt=s[5],Ht=s[6],Et=s[7],Tt=s[8],Xt=s[9],Vt=s[10],er=s[11],kt=s[12],yr=s[13],Rr=s[14],kr=s[15];return Math.abs(A-ot)<=se*Math.max(1,Math.abs(A),Math.abs(ot))&&Math.abs(d-Ke)<=se*Math.max(1,Math.abs(d),Math.abs(Ke))&&Math.abs(m-ee)<=se*Math.max(1,Math.abs(m),Math.abs(ee))&&Math.abs(w-be)<=se*Math.max(1,Math.abs(w),Math.abs(be))&&Math.abs(x-qe)<=se*Math.max(1,Math.abs(x),Math.abs(qe))&&Math.abs(E-bt)<=se*Math.max(1,Math.abs(E),Math.abs(bt))&&Math.abs(L-Ht)<=se*Math.max(1,Math.abs(L),Math.abs(Ht))&&Math.abs(Q-Et)<=se*Math.max(1,Math.abs(Q),Math.abs(Et))&&Math.abs(j-Tt)<=se*Math.max(1,Math.abs(j),Math.abs(Tt))&&Math.abs(G-Xt)<=se*Math.max(1,Math.abs(G),Math.abs(Xt))&&Math.abs(J-Vt)<=se*Math.max(1,Math.abs(J),Math.abs(Vt))&&Math.abs(ne-er)<=se*Math.max(1,Math.abs(ne),Math.abs(er))&&Math.abs(oe-kt)<=se*Math.max(1,Math.abs(oe),Math.abs(kt))&&Math.abs(pe-yr)<=se*Math.max(1,Math.abs(pe),Math.abs(yr))&&Math.abs(Se-Rr)<=se*Math.max(1,Math.abs(Se),Math.abs(Rr))&&Math.abs(Re-kr)<=se*Math.max(1,Math.abs(Re),Math.abs(kr))},h.c9=function(c,s){return c[0]=s[0],c[1]=s[1],c[2]=s[2],c[3]=s[3],c[4]=s[4],c[5]=s[5],c[6]=s[6],c[7]=s[7],c[8]=s[8],c[9]=s[9],c[10]=s[10],c[11]=s[11],c[12]=s[12],c[13]=s[13],c[14]=s[14],c[15]=s[15],c},h.cA=function(c){delete Ae.REGISTERED_PROTOCOLS[c]},h.cB=function(c,s){const A={};for(let m=0;m<c.length;m++){const w=s&&s[c[m].id]||io(c[m]);s&&(s[c[m].id]=w);let x=A[w];x||(x=A[w]=[]),x.push(c[m])}const d=[];for(const m in A)d.push(A[m]);return d},h.cC=Qe,h.cD=TS,h.cE=LS,h.cF=lS,h.cG=function(c){c.bucket.createArrays(),c.bucket.tilePixelRatio=ie/(512*c.bucket.overscaling),c.bucket.compareText={},c.bucket.iconsNeedLinear=!1;const s=c.bucket.layers[0],A=s.layout,d=s._unevaluatedLayout._values,m={layoutIconSize:d["icon-size"].possiblyEvaluate(new Er(c.bucket.zoom+1),c.canonical),layoutTextSize:d["text-size"].possiblyEvaluate(new Er(c.bucket.zoom+1),c.canonical),textMaxSize:d["text-size"].possiblyEvaluate(new Er(18))};if(c.bucket.textSizeData.kind==="composite"){const{minZoom:Q,maxZoom:j}=c.bucket.textSizeData;m.compositeTextSizes=[d["text-size"].possiblyEvaluate(new Er(Q),c.canonical),d["text-size"].possiblyEvaluate(new Er(j),c.canonical)]}if(c.bucket.iconSizeData.kind==="composite"){const{minZoom:Q,maxZoom:j}=c.bucket.iconSizeData;m.compositeIconSizes=[d["icon-size"].possiblyEvaluate(new Er(Q),c.canonical),d["icon-size"].possiblyEvaluate(new Er(j),c.canonical)]}const w=A.get("text-line-height")*Es,x=A.get("text-rotation-alignment")!=="viewport"&&A.get("symbol-placement")!=="point",E=A.get("text-keep-upright"),L=A.get("text-size");for(const Q of c.bucket.features){const j=A.get("text-font").evaluate(Q,{},c.canonical).join(","),G=L.evaluate(Q,{},c.canonical),J=m.layoutTextSize.evaluate(Q,{},c.canonical),ne=m.layoutIconSize.evaluate(Q,{},c.canonical),oe={horizontal:{},vertical:void 0},pe=Q.text;let Se,Re=[0,0];if(pe){const ee=pe.toString(),be=A.get("text-letter-spacing").evaluate(Q,{},c.canonical)*Es,qe=Zt(ee)?be:0,bt=A.get("text-anchor").evaluate(Q,{},c.canonical),Ht=jS(s,Q,c.canonical);if(!Ht){const Vt=A.get("text-radial-offset").evaluate(Q,{},c.canonical);Re=Vt?HS(bt,[Vt*Es,_w]):A.get("text-offset").evaluate(Q,{},c.canonical).map(er=>er*Es)}let Et=x?"center":A.get("text-justify").evaluate(Q,{},c.canonical);const Tt=A.get("symbol-placement")==="point"?A.get("text-max-width").evaluate(Q,{},c.canonical)*Es:1/0,Xt=()=>{c.bucket.allowVerticalPlacement&&Dt(ee)&&(oe.vertical=G0(pe,c.glyphMap,c.glyphPositions,c.imagePositions,j,Tt,w,bt,"left",qe,Re,h.an.vertical,!0,J,G))};if(!x&&Ht){const Vt=new Set;if(Et==="auto")for(let kt=0;kt<Ht.values.length;kt+=2)Vt.add(ww(Ht.values[kt]));else Vt.add(Et);let er=!1;for(const kt of Vt)if(!oe.horizontal[kt])if(er)oe.horizontal[kt]=oe.horizontal[0];else{const yr=G0(pe,c.glyphMap,c.glyphPositions,c.imagePositions,j,Tt,w,"center",kt,qe,Re,h.an.horizontal,!1,J,G);yr&&(oe.horizontal[kt]=yr,er=yr.positionedLines.length===1)}Xt()}else{Et==="auto"&&(Et=ww(bt));const Vt=G0(pe,c.glyphMap,c.glyphPositions,c.imagePositions,j,Tt,w,bt,Et,qe,Re,h.an.horizontal,!1,J,G);Vt&&(oe.horizontal[Et]=Vt),Xt(),Dt(ee)&&x&&E&&(oe.vertical=G0(pe,c.glyphMap,c.glyphPositions,c.imagePositions,j,Tt,w,bt,Et,qe,Re,h.an.vertical,!1,J,G))}}let ot=!1;if(Q.icon&&Q.icon.name){const ee=c.imageMap[Q.icon.name];ee&&(Se=UN(c.imagePositions[Q.icon.name],A.get("icon-offset").evaluate(Q,{},c.canonical),A.get("icon-anchor").evaluate(Q,{},c.canonical)),ot=!!ee.sdf,c.bucket.sdfIcons===void 0?c.bucket.sdfIcons=ot:c.bucket.sdfIcons!==ot&&Cr("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(ee.pixelRatio!==c.bucket.pixelRatio||A.get("icon-rotate").constantOr(1)!==0)&&(c.bucket.iconsNeedLinear=!0))}const Ke=KS(oe.horizontal)||oe.vertical;c.bucket.iconsInText=!!Ke&&Ke.iconsInText,(Ke||Se)&&YN(c.bucket,Q,oe,Se,c.imageMap,m,J,ne,Re,ot,c.canonical,c.subdivisionGranularity)}c.showCollisionBoxes&&c.bucket.generateCollisionDebugBuffers()},h.cH=sw,h.cI=J_,h.cJ=iw,h.cK=Tm,h.cL=lw,h.cM=class{constructor(c){this._marks={start:[c.url,"start"].join("#"),end:[c.url,"end"].join("#"),measure:c.url.toString()},performance.mark(this._marks.start)}finish(){performance.mark(this._marks.end);let c=performance.getEntriesByName(this._marks.measure);return c.length===0&&(performance.measure(this._marks.measure,this._marks.start,this._marks.end),c=performance.getEntriesByName(this._marks.measure),performance.clearMarks(this._marks.start),performance.clearMarks(this._marks.end),performance.clearMeasures(this._marks.measure)),c}},h.cN=function(c,s,A,d,m){return o(this,void 0,void 0,function*(){if(W())try{return yield br(c,s,A,d,m)}catch{}return function(w,x,E,L,Q){const j=w.width,G=w.height;Dr&&Kr||(Dr=new OffscreenCanvas(j,G),Kr=Dr.getContext("2d",{willReadFrequently:!0})),Dr.width=j,Dr.height=G,Kr.drawImage(w,0,0,j,G);const J=Kr.getImageData(x,E,L,Q);return Kr.clearRect(0,0,j,G),J.data}(c,s,A,d,m)})},h.cO=PC,h.cP=g,h.cQ=I,h.cR=qC,h.cS=oS,h.cT=Zu,h.cU=wn,h.ca=c=>c.type==="symbol",h.cb=c=>c.type==="circle",h.cc=c=>c.type==="heatmap",h.cd=c=>c.type==="line",h.ce=c=>c.type==="fill",h.cf=c=>c.type==="fill-extrusion",h.cg=c=>c.type==="hillshade",h.ch=c=>c.type==="color-relief",h.ci=c=>c.type==="raster",h.cj=c=>c.type==="background",h.ck=c=>c.type==="custom",h.cl=Xe,h.cm=function(c,s,A){const d=Lt(s.x-A.x,s.y-A.y),m=Lt(c.x-A.x,c.y-A.y);var w,x;return un(Math.atan2(d[0]*m[1]-d[1]*m[0],(w=d)[0]*(x=m)[0]+w[1]*x[1]))},h.cn=pt,h.co=function(c,s){return Yr[s]&&(c instanceof MouseEvent||c instanceof WheelEvent)},h.cp=function(c,s){return zr[s]&&"touches"in c},h.cq=function(c){return zr[c]||Yr[c]},h.cr=function(c,s,A){var d=s[0],m=s[1];return c[0]=A[0]*d+A[4]*m+A[12],c[1]=A[1]*d+A[5]*m+A[13],c},h.cs=function(c,s){const{x:A,y:d}=Um.fromLngLat(s);return!(c<0||c>25||d<0||d>=1||A<0||A>=1)},h.ct=function(c,s){return c[0]=s[0],c[1]=0,c[2]=0,c[3]=0,c[4]=0,c[5]=s[1],c[6]=0,c[7]=0,c[8]=0,c[9]=0,c[10]=s[2],c[11]=0,c[12]=0,c[13]=0,c[14]=0,c[15]=1,c},h.cu=class extends Oo{},h.cv=eD,h.cx=function(c){return c.message===ur},h.cy=Ne,h.cz=function(c,s){Ae.REGISTERED_PROTOCOLS[c]=s},h.d=yt,h.e=Mt,h.f=c=>o(void 0,void 0,void 0,function*(){if(c.byteLength===0)return createImageBitmap(new ImageData(1,1));const s=new Blob([new Uint8Array(c)],{type:"image/png"});try{return createImageBitmap(s)}catch(A){throw new Error(`Could not load image because of ${A.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`)}}),h.g=me,h.h=c=>new Promise((s,A)=>{const d=new Image;d.onload=()=>{s(d),URL.revokeObjectURL(d.src),d.onload=null,window.requestAnimationFrame(()=>{d.src=cr})},d.onerror=()=>A(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const m=new Blob([new Uint8Array(c)],{type:"image/png"});d.src=c.byteLength?URL.createObjectURL(m):cr}),h.i=Kt,h.j=(c,s)=>tt(Mt(c,{type:"json"}),s),h.k=lt,h.l=Ct,h.m=tt,h.n=(c,s)=>tt(Mt(c,{type:"arrayBuffer"}),s),h.o=function(c){return new lw(c).readFields(BN,[])},h.p=aS,h.q=bm,h.r=gi,h.s=Lr,h.t=_i,h.u=Ye,h.v=Me,h.w=Cr,h.x=q,h.y=ve,h.z=O}),a("worker",["./shared"],function(h){class o{constructor(Ae){this.keyCache={},Ae&&this.replace(Ae)}replace(Ae){this._layerConfigs={},this._layers={},this.update(Ae,[])}update(Ae,me){for(const Ne of Ae){this._layerConfigs[Ne.id]=Ne;const et=this._layers[Ne.id]=h.bI(Ne);et._featureFilter=h.a9(et.filter),this.keyCache[Ne.id]&&delete this.keyCache[Ne.id]}for(const Ne of me)delete this.keyCache[Ne],delete this._layerConfigs[Ne],delete this._layers[Ne];this.familiesBySource={};const _e=h.cB(Object.values(this._layerConfigs),this.keyCache);for(const Ne of _e){const et=Ne.map(lt=>this._layers[lt.id]),tt=et[0];if(tt.visibility==="none")continue;const yt=tt.source||"";let rt=this.familiesBySource[yt];rt||(rt=this.familiesBySource[yt]={});const It=tt.sourceLayer||"_geojsonTileLayer";let Ct=rt[It];Ct||(Ct=rt[It]=[]),Ct.push(et)}}}class g{constructor(Ae){const me={},_e=[];for(const yt in Ae){const rt=Ae[yt],It=me[yt]={};for(const Ct in rt){const lt=rt[+Ct];if(!lt||lt.bitmap.width===0||lt.bitmap.height===0)continue;const mt={x:0,y:0,w:lt.bitmap.width+2,h:lt.bitmap.height+2};_e.push(mt),It[Ct]={rect:mt,metrics:lt.metrics}}}const{w:Ne,h:et}=h.p(_e),tt=new h.q({width:Ne||1,height:et||1});for(const yt in Ae){const rt=Ae[yt];for(const It in rt){const Ct=rt[+It];if(!Ct||Ct.bitmap.width===0||Ct.bitmap.height===0)continue;const lt=me[yt][It].rect;h.q.copy(Ct.bitmap,tt,{x:0,y:0},{x:lt.x+1,y:lt.y+1},Ct.bitmap)}}this.image=tt,this.positions=me}}h.cC("GlyphAtlas",g);class y{constructor(Ae){this.tileID=new h.Z(Ae.tileID.overscaledZ,Ae.tileID.wrap,Ae.tileID.canonical.z,Ae.tileID.canonical.x,Ae.tileID.canonical.y),this.uid=Ae.uid,this.zoom=Ae.zoom,this.pixelRatio=Ae.pixelRatio,this.tileSize=Ae.tileSize,this.source=Ae.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=Ae.showCollisionBoxes,this.collectResourceTiming=!!Ae.collectResourceTiming,this.returnDependencies=!!Ae.returnDependencies,this.promoteId=Ae.promoteId,this.inFlightDependencies=[],this.globalState=Ae.globalState}parse(Ae,me,_e,Ne,et){return h._(this,void 0,void 0,function*(){this.status="parsing",this.data=Ae,this.collisionBoxArray=new h.a7;const tt=new h.cD(Object.keys(Ae.layers).sort()),yt=new h.cE(this.tileID,this.promoteId);yt.bucketLayerIDs=[];const rt={},It={featureIndex:yt,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:_e,subdivisionGranularity:et},Ct=me.familiesBySource[this.source];for(const _r in Ct){const Ur=Ae.layers[_r];if(!Ur)continue;Ur.version===1&&h.w(`Vector tile source "${this.source}" layer "${_r}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const Ln=tt.encode(_r),Yt=[];for(let Xn=0;Xn<Ur.length;Xn++){const Bn=Ur.feature(Xn),es=yt.getId(Bn,_r);Yt.push({feature:Bn,id:es,index:Xn,sourceLayerIndex:Ln})}for(const Xn of Ct[_r]){const Bn=Xn[0];Bn.source!==this.source&&h.w(`layer.source = ${Bn.source} does not equal this.source = ${this.source}`),Bn.minzoom&&this.zoom<Math.floor(Bn.minzoom)||Bn.maxzoom&&this.zoom>=Bn.maxzoom||Bn.visibility!=="none"&&(C(Xn,this.zoom,_e),(rt[Bn.id]=Bn.createBucket({index:yt.bucketLayerIDs.length,layers:Xn,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:Ln,sourceID:this.source,globalState:this.globalState})).populate(Yt,It,this.tileID.canonical),yt.bucketLayerIDs.push(Xn.map(es=>es.id)))}}const lt=h.bM(It.glyphDependencies,_r=>Object.keys(_r).map(Number));this.inFlightDependencies.forEach(_r=>_r==null?void 0:_r.abort()),this.inFlightDependencies=[];let mt=Promise.resolve({});if(Object.keys(lt).length){const _r=new AbortController;this.inFlightDependencies.push(_r),mt=Ne.sendAsync({type:"GG",data:{stacks:lt,source:this.source,tileID:this.tileID,type:"glyphs"}},_r)}const Me=Object.keys(It.iconDependencies);let Nt=Promise.resolve({});if(Me.length){const _r=new AbortController;this.inFlightDependencies.push(_r),Nt=Ne.sendAsync({type:"GI",data:{icons:Me,source:this.source,tileID:this.tileID,type:"icons"}},_r)}const nr=Object.keys(It.patternDependencies);let tr=Promise.resolve({});if(nr.length){const _r=new AbortController;this.inFlightDependencies.push(_r),tr=Ne.sendAsync({type:"GI",data:{icons:nr,source:this.source,tileID:this.tileID,type:"patterns"}},_r)}const[Ar,qt,Jr]=yield Promise.all([mt,Nt,tr]),jr=new g(Ar),Nr=new h.cF(qt,Jr);for(const _r in rt){const Ur=rt[_r];Ur instanceof h.a8?(C(Ur.layers,this.zoom,_e),h.cG({bucket:Ur,glyphMap:Ar,glyphPositions:jr.positions,imageMap:qt,imagePositions:Nr.iconPositions,showCollisionBoxes:this.showCollisionBoxes,canonical:this.tileID.canonical,subdivisionGranularity:It.subdivisionGranularity})):Ur.hasPattern&&(Ur instanceof h.cH||Ur instanceof h.cI||Ur instanceof h.cJ)&&(C(Ur.layers,this.zoom,_e),Ur.addFeatures(It,this.tileID.canonical,Nr.patternPositions))}return this.status="done",{buckets:Object.values(rt).filter(_r=>!_r.isEmpty()),featureIndex:yt,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:jr.image,imageAtlas:Nr,glyphMap:this.returnDependencies?Ar:null,iconMap:this.returnDependencies?qt:null,glyphPositions:this.returnDependencies?jr.positions:null}})}}function C(ct,Ae,me){const _e=new h.F(Ae);for(const Ne of ct)Ne.recalculate(_e,me)}class I{constructor(Ae,me,_e){this.actor=Ae,this.layerIndex=me,this.availableImages=_e,this.fetching={},this.loading={},this.loaded={}}loadVectorTile(Ae,me){return h._(this,void 0,void 0,function*(){const _e=yield h.n(Ae.request,me);try{return{vectorTile:new h.cK.VectorTile(new h.cL(_e.data)),rawData:_e.data,cacheControl:_e.cacheControl,expires:_e.expires}}catch(Ne){const et=new Uint8Array(_e.data);let tt=`Unable to parse the tile at ${Ae.request.url}, `;throw tt+=et[0]===31&&et[1]===139?"please make sure the data is not gzipped and that you have configured the relevant header in the server":`got error: ${Ne.message}`,new Error(tt)}})}loadTile(Ae){return h._(this,void 0,void 0,function*(){const me=Ae.uid,_e=!!(Ae&&Ae.request&&Ae.request.collectResourceTiming)&&new h.cM(Ae.request),Ne=new y(Ae);this.loading[me]=Ne;const et=new AbortController;Ne.abort=et;try{const tt=yield this.loadVectorTile(Ae,et);if(delete this.loading[me],!tt)return null;const yt=tt.rawData,rt={};tt.expires&&(rt.expires=tt.expires),tt.cacheControl&&(rt.cacheControl=tt.cacheControl);const It={};if(_e){const lt=_e.finish();lt&&(It.resourceTiming=JSON.parse(JSON.stringify(lt)))}Ne.vectorTile=tt.vectorTile;const Ct=Ne.parse(tt.vectorTile,this.layerIndex,this.availableImages,this.actor,Ae.subdivisionGranularity);this.loaded[me]=Ne,this.fetching[me]={rawTileData:yt,cacheControl:rt,resourceTiming:It};try{const lt=yield Ct;return h.e({rawTileData:yt.slice(0)},lt,rt,It)}finally{delete this.fetching[me]}}catch(tt){throw delete this.loading[me],Ne.status="done",this.loaded[me]=Ne,tt}})}reloadTile(Ae){return h._(this,void 0,void 0,function*(){const me=Ae.uid;if(!this.loaded||!this.loaded[me])throw new Error("Should not be trying to reload a tile that was never loaded or has been removed");const _e=this.loaded[me];if(_e.showCollisionBoxes=Ae.showCollisionBoxes,_e.globalState=Ae.globalState,_e.status==="parsing"){const Ne=yield _e.parse(_e.vectorTile,this.layerIndex,this.availableImages,this.actor,Ae.subdivisionGranularity);let et;if(this.fetching[me]){const{rawTileData:tt,cacheControl:yt,resourceTiming:rt}=this.fetching[me];delete this.fetching[me],et=h.e({rawTileData:tt.slice(0)},Ne,yt,rt)}else et=Ne;return et}if(_e.status==="done"&&_e.vectorTile)return _e.parse(_e.vectorTile,this.layerIndex,this.availableImages,this.actor,Ae.subdivisionGranularity)})}abortTile(Ae){return h._(this,void 0,void 0,function*(){const me=this.loading,_e=Ae.uid;me&&me[_e]&&me[_e].abort&&(me[_e].abort.abort(),delete me[_e])})}removeTile(Ae){return h._(this,void 0,void 0,function*(){this.loaded&&this.loaded[Ae.uid]&&delete this.loaded[Ae.uid]})}}class F{constructor(){this.loaded={}}loadTile(Ae){return h._(this,void 0,void 0,function*(){const{uid:me,encoding:_e,rawImageData:Ne,redFactor:et,greenFactor:tt,blueFactor:yt,baseShift:rt}=Ae,It=Ne.width+2,Ct=Ne.height+2,lt=h.b(Ne)?new h.R({width:It,height:Ct},yield h.cN(Ne,-1,-1,It,Ct)):Ne,mt=new h.cO(me,lt,_e,et,tt,yt,rt);return this.loaded=this.loaded||{},this.loaded[me]=mt,mt})}removeTile(Ae){const me=this.loaded,_e=Ae.uid;me&&me[_e]&&delete me[_e]}}var b,N,U=function(){if(N)return b;function ct(me,_e){if(me.length!==0){Ae(me[0],_e);for(var Ne=1;Ne<me.length;Ne++)Ae(me[Ne],!_e)}}function Ae(me,_e){for(var Ne=0,et=0,tt=0,yt=me.length,rt=yt-1;tt<yt;rt=tt++){var It=(me[tt][0]-me[rt][0])*(me[rt][1]+me[tt][1]),Ct=Ne+It;et+=Math.abs(Ne)>=Math.abs(It)?Ne-Ct+It:It-Ct+Ne,Ne=Ct}Ne+et>=0!=!!_e&&me.reverse()}return N=1,b=function me(_e,Ne){var et,tt=_e&&_e.type;if(tt==="FeatureCollection")for(et=0;et<_e.features.length;et++)me(_e.features[et],Ne);else if(tt==="GeometryCollection")for(et=0;et<_e.geometries.length;et++)me(_e.geometries[et],Ne);else if(tt==="Feature")me(_e.geometry,Ne);else if(tt==="Polygon")ct(_e.coordinates,Ne);else if(tt==="MultiPolygon")for(et=0;et<_e.coordinates.length;et++)ct(_e.coordinates[et],Ne);return _e}}(),H=h.cP(U);const k=h.cK.VectorTileFeature.prototype.toGeoJSON;class R{constructor(Ae){this._feature=Ae,this.extent=h.$,this.type=Ae.type,this.properties=Ae.tags,"id"in Ae&&!isNaN(Ae.id)&&(this.id=parseInt(Ae.id,10))}loadGeometry(){if(this._feature.type===1){const Ae=[];for(const me of this._feature.geometry)Ae.push([new h.P(me[0],me[1])]);return Ae}{const Ae=[];for(const me of this._feature.geometry){const _e=[];for(const Ne of me)_e.push(new h.P(Ne[0],Ne[1]));Ae.push(_e)}return Ae}}toGeoJSON(Ae,me,_e){return k.call(this,Ae,me,_e)}}class V{constructor(Ae){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=h.$,this.length=Ae.length,this._features=Ae}feature(Ae){return new R(this._features[Ae])}}var W,se,fe,ue={exports:{}},ae=function(){if(fe)return ue.exports;fe=1;var ct=h.cS(),Ae=function(){if(se)return W;se=1;var Ct=h.cQ(),lt=h.cR().VectorTileFeature;function mt(Nt,nr){this.options=nr||{},this.features=Nt,this.length=Nt.length}function Me(Nt,nr){this.id=typeof Nt.id=="number"?Nt.id:void 0,this.type=Nt.type,this.rawGeometry=Nt.type===1?[Nt.geometry]:Nt.geometry,this.properties=Nt.tags,this.extent=nr||4096}return W=mt,mt.prototype.feature=function(Nt){return new Me(this.features[Nt],this.options.extent)},Me.prototype.loadGeometry=function(){var Nt=this.rawGeometry;this.geometry=[];for(var nr=0;nr<Nt.length;nr++){for(var tr=Nt[nr],Ar=[],qt=0;qt<tr.length;qt++)Ar.push(new Ct(tr[qt][0],tr[qt][1]));this.geometry.push(Ar)}return this.geometry},Me.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var Nt=this.geometry,nr=1/0,tr=-1/0,Ar=1/0,qt=-1/0,Jr=0;Jr<Nt.length;Jr++)for(var jr=Nt[Jr],Nr=0;Nr<jr.length;Nr++){var _r=jr[Nr];nr=Math.min(nr,_r.x),tr=Math.max(tr,_r.x),Ar=Math.min(Ar,_r.y),qt=Math.max(qt,_r.y)}return[nr,Ar,tr,qt]},Me.prototype.toGeoJSON=lt.prototype.toGeoJSON,W}();function me(Ct){var lt=new ct;return function(mt,Me){for(var Nt in mt.layers)Me.writeMessage(3,_e,mt.layers[Nt])}(Ct,lt),lt.finish()}function _e(Ct,lt){var mt;lt.writeVarintField(15,Ct.version||1),lt.writeStringField(1,Ct.name||""),lt.writeVarintField(5,Ct.extent||4096);var Me={keys:[],values:[],keycache:{},valuecache:{}};for(mt=0;mt<Ct.length;mt++)Me.feature=Ct.feature(mt),lt.writeMessage(2,Ne,Me);var Nt=Me.keys;for(mt=0;mt<Nt.length;mt++)lt.writeStringField(3,Nt[mt]);var nr=Me.values;for(mt=0;mt<nr.length;mt++)lt.writeMessage(4,It,nr[mt])}function Ne(Ct,lt){var mt=Ct.feature;mt.id!==void 0&&lt.writeVarintField(1,mt.id),lt.writeMessage(2,et,Ct),lt.writeVarintField(3,mt.type),lt.writeMessage(4,rt,mt)}function et(Ct,lt){var mt=Ct.feature,Me=Ct.keys,Nt=Ct.values,nr=Ct.keycache,tr=Ct.valuecache;for(var Ar in mt.properties){var qt=mt.properties[Ar],Jr=nr[Ar];if(qt!==null){Jr===void 0&&(Me.push(Ar),nr[Ar]=Jr=Me.length-1),lt.writeVarint(Jr);var jr=typeof qt;jr!=="string"&&jr!=="boolean"&&jr!=="number"&&(qt=JSON.stringify(qt));var Nr=jr+":"+qt,_r=tr[Nr];_r===void 0&&(Nt.push(qt),tr[Nr]=_r=Nt.length-1),lt.writeVarint(_r)}}}function tt(Ct,lt){return(lt<<3)+(7&Ct)}function yt(Ct){return Ct<<1^Ct>>31}function rt(Ct,lt){for(var mt=Ct.loadGeometry(),Me=Ct.type,Nt=0,nr=0,tr=mt.length,Ar=0;Ar<tr;Ar++){var qt=mt[Ar],Jr=1;Me===1&&(Jr=qt.length),lt.writeVarint(tt(1,Jr));for(var jr=Me===3?qt.length-1:qt.length,Nr=0;Nr<jr;Nr++){Nr===1&&Me!==1&&lt.writeVarint(tt(2,jr-1));var _r=qt[Nr].x-Nt,Ur=qt[Nr].y-nr;lt.writeVarint(yt(_r)),lt.writeVarint(yt(Ur)),Nt+=_r,nr+=Ur}Me===3&&lt.writeVarint(tt(7,1))}}function It(Ct,lt){var mt=typeof Ct;mt==="string"?lt.writeStringField(1,Ct):mt==="boolean"?lt.writeBooleanField(7,Ct):mt==="number"&&(Ct%1!=0?lt.writeDoubleField(3,Ct):Ct<0?lt.writeSVarintField(6,Ct):lt.writeVarintField(5,Ct))}return ue.exports=me,ue.exports.fromVectorTileJs=me,ue.exports.fromGeojsonVt=function(Ct,lt){lt=lt||{};var mt={};for(var Me in Ct)mt[Me]=new Ae(Ct[Me].features,lt),mt[Me].name=Me,mt[Me].version=lt.version,mt[Me].extent=lt.extent;return me({layers:mt})},ue.exports.GeoJSONWrapper=Ae,ue.exports}(),Be=h.cP(ae);const Ue={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:ct=>ct},te=Math.fround||(de=new Float32Array(1),ct=>(de[0]=+ct,de[0]));var de;class Te{constructor(Ae){this.options=Object.assign(Object.create(Ue),Ae),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(Ae){const{log:me,minZoom:_e,maxZoom:Ne}=this.options;me&&console.time("total time");const et=`prepare ${Ae.length} points`;me&&console.time(et),this.points=Ae;const tt=[];for(let rt=0;rt<Ae.length;rt++){const It=Ae[rt];if(!It.geometry)continue;const[Ct,lt]=It.geometry.coordinates,mt=te(Ze(Ct)),Me=te(At(lt));tt.push(mt,Me,1/0,rt,-1,1),this.options.reduce&&tt.push(0)}let yt=this.trees[Ne+1]=this._createTree(tt);me&&console.timeEnd(et);for(let rt=Ne;rt>=_e;rt--){const It=+Date.now();yt=this.trees[rt]=this._createTree(this._cluster(yt,rt)),me&&console.log("z%d: %d clusters in %dms",rt,yt.numItems,+Date.now()-It)}return me&&console.timeEnd("total time"),this}getClusters(Ae,me){let _e=((Ae[0]+180)%360+360)%360-180;const Ne=Math.max(-90,Math.min(90,Ae[1]));let et=Ae[2]===180?180:((Ae[2]+180)%360+360)%360-180;const tt=Math.max(-90,Math.min(90,Ae[3]));if(Ae[2]-Ae[0]>=360)_e=-180,et=180;else if(_e>et){const lt=this.getClusters([_e,Ne,180,tt],me),mt=this.getClusters([-180,Ne,et,tt],me);return lt.concat(mt)}const yt=this.trees[this._limitZoom(me)],rt=yt.range(Ze(_e),At(tt),Ze(et),At(Ne)),It=yt.data,Ct=[];for(const lt of rt){const mt=this.stride*lt;Ct.push(It[mt+5]>1?we(It,mt,this.clusterProps):this.points[It[mt+3]])}return Ct}getChildren(Ae){const me=this._getOriginId(Ae),_e=this._getOriginZoom(Ae),Ne="No cluster with the specified id.",et=this.trees[_e];if(!et)throw new Error(Ne);const tt=et.data;if(me*this.stride>=tt.length)throw new Error(Ne);const yt=this.options.radius/(this.options.extent*Math.pow(2,_e-1)),rt=et.within(tt[me*this.stride],tt[me*this.stride+1],yt),It=[];for(const Ct of rt){const lt=Ct*this.stride;tt[lt+4]===Ae&&It.push(tt[lt+5]>1?we(tt,lt,this.clusterProps):this.points[tt[lt+3]])}if(It.length===0)throw new Error(Ne);return It}getLeaves(Ae,me,_e){const Ne=[];return this._appendLeaves(Ne,Ae,me=me||10,_e=_e||0,0),Ne}getTile(Ae,me,_e){const Ne=this.trees[this._limitZoom(Ae)],et=Math.pow(2,Ae),{extent:tt,radius:yt}=this.options,rt=yt/tt,It=(_e-rt)/et,Ct=(_e+1+rt)/et,lt={features:[]};return this._addTileFeatures(Ne.range((me-rt)/et,It,(me+1+rt)/et,Ct),Ne.data,me,_e,et,lt),me===0&&this._addTileFeatures(Ne.range(1-rt/et,It,1,Ct),Ne.data,et,_e,et,lt),me===et-1&&this._addTileFeatures(Ne.range(0,It,rt/et,Ct),Ne.data,-1,_e,et,lt),lt.features.length?lt:null}getClusterExpansionZoom(Ae){let me=this._getOriginZoom(Ae)-1;for(;me<=this.options.maxZoom;){const _e=this.getChildren(Ae);if(me++,_e.length!==1)break;Ae=_e[0].properties.cluster_id}return me}_appendLeaves(Ae,me,_e,Ne,et){const tt=this.getChildren(me);for(const yt of tt){const rt=yt.properties;if(rt&&rt.cluster?et+rt.point_count<=Ne?et+=rt.point_count:et=this._appendLeaves(Ae,rt.cluster_id,_e,Ne,et):et<Ne?et++:Ae.push(yt),Ae.length===_e)break}return et}_createTree(Ae){const me=new h.aH(Ae.length/this.stride|0,this.options.nodeSize,Float32Array);for(let _e=0;_e<Ae.length;_e+=this.stride)me.add(Ae[_e],Ae[_e+1]);return me.finish(),me.data=Ae,me}_addTileFeatures(Ae,me,_e,Ne,et,tt){for(const yt of Ae){const rt=yt*this.stride,It=me[rt+5]>1;let Ct,lt,mt;if(It)Ct=st(me,rt,this.clusterProps),lt=me[rt],mt=me[rt+1];else{const nr=this.points[me[rt+3]];Ct=nr.properties;const[tr,Ar]=nr.geometry.coordinates;lt=Ze(tr),mt=At(Ar)}const Me={type:1,geometry:[[Math.round(this.options.extent*(lt*et-_e)),Math.round(this.options.extent*(mt*et-Ne))]],tags:Ct};let Nt;Nt=It||this.options.generateId?me[rt+3]:this.points[me[rt+3]].id,Nt!==void 0&&(Me.id=Nt),tt.features.push(Me)}}_limitZoom(Ae){return Math.max(this.options.minZoom,Math.min(Math.floor(+Ae),this.options.maxZoom+1))}_cluster(Ae,me){const{radius:_e,extent:Ne,reduce:et,minPoints:tt}=this.options,yt=_e/(Ne*Math.pow(2,me)),rt=Ae.data,It=[],Ct=this.stride;for(let lt=0;lt<rt.length;lt+=Ct){if(rt[lt+2]<=me)continue;rt[lt+2]=me;const mt=rt[lt],Me=rt[lt+1],Nt=Ae.within(rt[lt],rt[lt+1],yt),nr=rt[lt+5];let tr=nr;for(const Ar of Nt){const qt=Ar*Ct;rt[qt+2]>me&&(tr+=rt[qt+5])}if(tr>nr&&tr>=tt){let Ar,qt=mt*nr,Jr=Me*nr,jr=-1;const Nr=(lt/Ct<<5)+(me+1)+this.points.length;for(const _r of Nt){const Ur=_r*Ct;if(rt[Ur+2]<=me)continue;rt[Ur+2]=me;const Ln=rt[Ur+5];qt+=rt[Ur]*Ln,Jr+=rt[Ur+1]*Ln,rt[Ur+4]=Nr,et&&(Ar||(Ar=this._map(rt,lt,!0),jr=this.clusterProps.length,this.clusterProps.push(Ar)),et(Ar,this._map(rt,Ur)))}rt[lt+4]=Nr,It.push(qt/tr,Jr/tr,1/0,Nr,-1,tr),et&&It.push(jr)}else{for(let Ar=0;Ar<Ct;Ar++)It.push(rt[lt+Ar]);if(tr>1)for(const Ar of Nt){const qt=Ar*Ct;if(!(rt[qt+2]<=me)){rt[qt+2]=me;for(let Jr=0;Jr<Ct;Jr++)It.push(rt[qt+Jr])}}}}return It}_getOriginId(Ae){return Ae-this.points.length>>5}_getOriginZoom(Ae){return(Ae-this.points.length)%32}_map(Ae,me,_e){if(Ae[me+5]>1){const tt=this.clusterProps[Ae[me+6]];return _e?Object.assign({},tt):tt}const Ne=this.points[Ae[me+3]].properties,et=this.options.map(Ne);return _e&&et===Ne?Object.assign({},et):et}}function we(ct,Ae,me){return{type:"Feature",id:ct[Ae+3],properties:st(ct,Ae,me),geometry:{type:"Point",coordinates:[(_e=ct[Ae],360*(_e-.5)),Le(ct[Ae+1])]}};var _e}function st(ct,Ae,me){const _e=ct[Ae+5],Ne=_e>=1e4?`${Math.round(_e/1e3)}k`:_e>=1e3?Math.round(_e/100)/10+"k":_e,et=ct[Ae+6],tt=et===-1?{}:Object.assign({},me[et]);return Object.assign(tt,{cluster:!0,cluster_id:ct[Ae+3],point_count:_e,point_count_abbreviated:Ne})}function Ze(ct){return ct/360+.5}function At(ct){const Ae=Math.sin(ct*Math.PI/180),me=.5-.25*Math.log((1+Ae)/(1-Ae))/Math.PI;return me<0?0:me>1?1:me}function Le(ct){const Ae=(180-360*ct)*Math.PI/180;return 360*Math.atan(Math.exp(Ae))/Math.PI-90}function He(ct,Ae,me,_e){let Ne=_e;const et=Ae+(me-Ae>>1);let tt,yt=me-Ae;const rt=ct[Ae],It=ct[Ae+1],Ct=ct[me],lt=ct[me+1];for(let mt=Ae+3;mt<me;mt+=3){const Me=it(ct[mt],ct[mt+1],rt,It,Ct,lt);if(Me>Ne)tt=mt,Ne=Me;else if(Me===Ne){const Nt=Math.abs(mt-et);Nt<yt&&(tt=mt,yt=Nt)}}Ne>_e&&(tt-Ae>3&&He(ct,Ae,tt,_e),ct[tt+2]=Ne,me-tt>3&&He(ct,tt,me,_e))}function it(ct,Ae,me,_e,Ne,et){let tt=Ne-me,yt=et-_e;if(tt!==0||yt!==0){const rt=((ct-me)*tt+(Ae-_e)*yt)/(tt*tt+yt*yt);rt>1?(me=Ne,_e=et):rt>0&&(me+=tt*rt,_e+=yt*rt)}return tt=ct-me,yt=Ae-_e,tt*tt+yt*yt}function Lt(ct,Ae,me,_e){const Ne={id:ct??null,type:Ae,geometry:me,tags:_e,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};if(Ae==="Point"||Ae==="MultiPoint"||Ae==="LineString")ie(Ne,me);else if(Ae==="Polygon")ie(Ne,me[0]);else if(Ae==="MultiLineString")for(const et of me)ie(Ne,et);else if(Ae==="MultiPolygon")for(const et of me)ie(Ne,et[0]);return Ne}function ie(ct,Ae){for(let me=0;me<Ae.length;me+=3)ct.minX=Math.min(ct.minX,Ae[me]),ct.minY=Math.min(ct.minY,Ae[me+1]),ct.maxX=Math.max(ct.maxX,Ae[me]),ct.maxY=Math.max(ct.maxY,Ae[me+1])}function Ce(ct,Ae,me,_e){if(!Ae.geometry)return;const Ne=Ae.geometry.coordinates;if(Ne&&Ne.length===0)return;const et=Ae.geometry.type,tt=Math.pow(me.tolerance/((1<<me.maxZoom)*me.extent),2);let yt=[],rt=Ae.id;if(me.promoteId?rt=Ae.properties[me.promoteId]:me.generateId&&(rt=_e||0),et==="Point")Pe(Ne,yt);else if(et==="MultiPoint")for(const It of Ne)Pe(It,yt);else if(et==="LineString")$e(Ne,yt,tt,!1);else if(et==="MultiLineString"){if(me.lineMetrics){for(const It of Ne)yt=[],$e(It,yt,tt,!1),ct.push(Lt(rt,"LineString",yt,Ae.properties));return}nt(Ne,yt,tt,!1)}else if(et==="Polygon")nt(Ne,yt,tt,!0);else{if(et!=="MultiPolygon"){if(et==="GeometryCollection"){for(const It of Ae.geometry.geometries)Ce(ct,{id:rt,geometry:It,properties:Ae.properties},me,_e);return}throw new Error("Input data is not a valid GeoJSON object.")}for(const It of Ne){const Ct=[];nt(It,Ct,tt,!0),yt.push(Ct)}}ct.push(Lt(rt,et,yt,Ae.properties))}function Pe(ct,Ae){Ae.push(Xe(ct[0]),pt(ct[1]),0)}function $e(ct,Ae,me,_e){let Ne,et,tt=0;for(let rt=0;rt<ct.length;rt++){const It=Xe(ct[rt][0]),Ct=pt(ct[rt][1]);Ae.push(It,Ct,0),rt>0&&(tt+=_e?(Ne*Ct-It*et)/2:Math.sqrt(Math.pow(It-Ne,2)+Math.pow(Ct-et,2))),Ne=It,et=Ct}const yt=Ae.length-3;Ae[2]=1,He(Ae,0,yt,me),Ae[yt+2]=1,Ae.size=Math.abs(tt),Ae.start=0,Ae.end=Ae.size}function nt(ct,Ae,me,_e){for(let Ne=0;Ne<ct.length;Ne++){const et=[];$e(ct[Ne],et,me,_e),Ae.push(et)}}function Xe(ct){return ct/360+.5}function pt(ct){const Ae=Math.sin(ct*Math.PI/180),me=.5-.25*Math.log((1+Ae)/(1-Ae))/Math.PI;return me<0?0:me>1?1:me}function dt(ct,Ae,me,_e,Ne,et,tt,yt){if(_e/=Ae,et>=(me/=Ae)&&tt<_e)return ct;if(tt<me||et>=_e)return null;const rt=[];for(const It of ct){const Ct=It.geometry;let lt=It.type;const mt=Ne===0?It.minX:It.minY,Me=Ne===0?It.maxX:It.maxY;if(mt>=me&&Me<_e){rt.push(It);continue}if(Me<me||mt>=_e)continue;let Nt=[];if(lt==="Point"||lt==="MultiPoint")Rt(Ct,Nt,me,_e,Ne);else if(lt==="LineString")Mt(Ct,Nt,me,_e,Ne,!1,yt.lineMetrics);else if(lt==="MultiLineString")jt(Ct,Nt,me,_e,Ne,!1);else if(lt==="Polygon")jt(Ct,Nt,me,_e,Ne,!0);else if(lt==="MultiPolygon")for(const nr of Ct){const tr=[];jt(nr,tr,me,_e,Ne,!0),tr.length&&Nt.push(tr)}if(Nt.length){if(yt.lineMetrics&&lt==="LineString"){for(const nr of Nt)rt.push(Lt(It.id,lt,nr,It.tags));continue}lt!=="LineString"&&lt!=="MultiLineString"||(Nt.length===1?(lt="LineString",Nt=Nt[0]):lt="MultiLineString"),lt!=="Point"&&lt!=="MultiPoint"||(lt=Nt.length===3?"Point":"MultiPoint"),rt.push(Lt(It.id,lt,Nt,It.tags))}}return rt.length?rt:null}function Rt(ct,Ae,me,_e,Ne){for(let et=0;et<ct.length;et+=3){const tt=ct[et+Ne];tt>=me&&tt<=_e&&vr(Ae,ct[et],ct[et+1],ct[et+2])}}function Mt(ct,Ae,me,_e,Ne,et,tt){let yt=$t(ct);const rt=Ne===0?Ft:Ge;let It,Ct,lt=ct.start;for(let tr=0;tr<ct.length-3;tr+=3){const Ar=ct[tr],qt=ct[tr+1],Jr=ct[tr+2],jr=ct[tr+3],Nr=ct[tr+4],_r=Ne===0?Ar:qt,Ur=Ne===0?jr:Nr;let Ln=!1;tt&&(It=Math.sqrt(Math.pow(Ar-jr,2)+Math.pow(qt-Nr,2))),_r<me?Ur>me&&(Ct=rt(yt,Ar,qt,jr,Nr,me),tt&&(yt.start=lt+It*Ct)):_r>_e?Ur<_e&&(Ct=rt(yt,Ar,qt,jr,Nr,_e),tt&&(yt.start=lt+It*Ct)):vr(yt,Ar,qt,Jr),Ur<me&&_r>=me&&(Ct=rt(yt,Ar,qt,jr,Nr,me),Ln=!0),Ur>_e&&_r<=_e&&(Ct=rt(yt,Ar,qt,jr,Nr,_e),Ln=!0),!et&&Ln&&(tt&&(yt.end=lt+It*Ct),Ae.push(yt),yt=$t(ct)),tt&&(lt+=It)}let mt=ct.length-3;const Me=ct[mt],Nt=ct[mt+1],nr=Ne===0?Me:Nt;nr>=me&&nr<=_e&&vr(yt,Me,Nt,ct[mt+2]),mt=yt.length-3,et&&mt>=3&&(yt[mt]!==yt[0]||yt[mt+1]!==yt[1])&&vr(yt,yt[0],yt[1],yt[2]),yt.length&&Ae.push(yt)}function $t(ct){const Ae=[];return Ae.size=ct.size,Ae.start=ct.start,Ae.end=ct.end,Ae}function jt(ct,Ae,me,_e,Ne,et){for(const tt of ct)Mt(tt,Ae,me,_e,Ne,et,!1)}function vr(ct,Ae,me,_e){ct.push(Ae,me,_e)}function Ft(ct,Ae,me,_e,Ne,et){const tt=(et-Ae)/(_e-Ae);return vr(ct,et,me+(Ne-me)*tt,1),tt}function Ge(ct,Ae,me,_e,Ne,et){const tt=(et-me)/(Ne-me);return vr(ct,Ae+(_e-Ae)*tt,et,1),tt}function Cr(ct,Ae){const me=[];for(let _e=0;_e<ct.length;_e++){const Ne=ct[_e],et=Ne.type;let tt;if(et==="Point"||et==="MultiPoint"||et==="LineString")tt=pr(Ne.geometry,Ae);else if(et==="MultiLineString"||et==="Polygon"){tt=[];for(const yt of Ne.geometry)tt.push(pr(yt,Ae))}else if(et==="MultiPolygon"){tt=[];for(const yt of Ne.geometry){const rt=[];for(const It of yt)rt.push(pr(It,Ae));tt.push(rt)}}me.push(Lt(Ne.id,et,tt,Ne.tags))}return me}function pr(ct,Ae){const me=[];me.size=ct.size,ct.start!==void 0&&(me.start=ct.start,me.end=ct.end);for(let _e=0;_e<ct.length;_e+=3)me.push(ct[_e]+Ae,ct[_e+1],ct[_e+2]);return me}function Kt(ct,Ae){if(ct.transformed)return ct;const me=1<<ct.z,_e=ct.x,Ne=ct.y;for(const et of ct.features){const tt=et.geometry,yt=et.type;if(et.geometry=[],yt===1)for(let rt=0;rt<tt.length;rt+=2)et.geometry.push(ar(tt[rt],tt[rt+1],Ae,me,_e,Ne));else for(let rt=0;rt<tt.length;rt++){const It=[];for(let Ct=0;Ct<tt[rt].length;Ct+=2)It.push(ar(tt[rt][Ct],tt[rt][Ct+1],Ae,me,_e,Ne));et.geometry.push(It)}}return ct.transformed=!0,ct}function ar(ct,Ae,me,_e,Ne,et){return[Math.round(me*(ct*_e-Ne)),Math.round(me*(Ae*_e-et))]}function lr(ct,Ae,me,_e,Ne){const et=Ae===Ne.maxZoom?0:Ne.tolerance/((1<<Ae)*Ne.extent),tt={features:[],numPoints:0,numSimplified:0,numFeatures:ct.length,source:null,x:me,y:_e,z:Ae,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0};for(const yt of ct)cr(tt,yt,et,Ne);return tt}function cr(ct,Ae,me,_e){const Ne=Ae.geometry,et=Ae.type,tt=[];if(ct.minX=Math.min(ct.minX,Ae.minX),ct.minY=Math.min(ct.minY,Ae.minY),ct.maxX=Math.max(ct.maxX,Ae.maxX),ct.maxY=Math.max(ct.maxY,Ae.maxY),et==="Point"||et==="MultiPoint")for(let yt=0;yt<Ne.length;yt+=3)tt.push(Ne[yt],Ne[yt+1]),ct.numPoints++,ct.numSimplified++;else if(et==="LineString")br(tt,Ne,ct,me,!1,!1);else if(et==="MultiLineString"||et==="Polygon")for(let yt=0;yt<Ne.length;yt++)br(tt,Ne[yt],ct,me,et==="Polygon",yt===0);else if(et==="MultiPolygon")for(let yt=0;yt<Ne.length;yt++){const rt=Ne[yt];for(let It=0;It<rt.length;It++)br(tt,rt[It],ct,me,!0,It===0)}if(tt.length){let yt=Ae.tags||null;if(et==="LineString"&&_e.lineMetrics){yt={};for(const It in Ae.tags)yt[It]=Ae.tags[It];yt.mapbox_clip_start=Ne.start/Ne.size,yt.mapbox_clip_end=Ne.end/Ne.size}const rt={geometry:tt,type:et==="Polygon"||et==="MultiPolygon"?3:et==="LineString"||et==="MultiLineString"?2:1,tags:yt};Ae.id!==null&&(rt.id=Ae.id),ct.features.push(rt)}}function br(ct,Ae,me,_e,Ne,et){const tt=_e*_e;if(_e>0&&Ae.size<(Ne?tt:_e))return void(me.numPoints+=Ae.length/3);const yt=[];for(let rt=0;rt<Ae.length;rt+=3)(_e===0||Ae[rt+2]>tt)&&(me.numSimplified++,yt.push(Ae[rt],Ae[rt+1])),me.numPoints++;Ne&&function(rt,It){let Ct=0;for(let lt=0,mt=rt.length,Me=mt-2;lt<mt;Me=lt,lt+=2)Ct+=(rt[lt]-rt[Me])*(rt[lt+1]+rt[Me+1]);if(Ct>0===It)for(let lt=0,mt=rt.length;lt<mt/2;lt+=2){const Me=rt[lt],Nt=rt[lt+1];rt[lt]=rt[mt-2-lt],rt[lt+1]=rt[mt-1-lt],rt[mt-2-lt]=Me,rt[mt-1-lt]=Nt}}(yt,et),ct.push(yt)}const Dr={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0};class Kr{constructor(Ae,me){const _e=(me=this.options=function(et,tt){for(const yt in tt)et[yt]=tt[yt];return et}(Object.create(Dr),me)).debug;if(_e&&console.time("preprocess data"),me.maxZoom<0||me.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(me.promoteId&&me.generateId)throw new Error("promoteId and generateId cannot be used together.");let Ne=function(et,tt){const yt=[];if(et.type==="FeatureCollection")for(let rt=0;rt<et.features.length;rt++)Ce(yt,et.features[rt],tt,rt);else Ce(yt,et.type==="Feature"?et:{geometry:et},tt);return yt}(Ae,me);this.tiles={},this.tileCoords=[],_e&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",me.indexMaxZoom,me.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),Ne=function(et,tt){const yt=tt.buffer/tt.extent;let rt=et;const It=dt(et,1,-1-yt,yt,0,-1,2,tt),Ct=dt(et,1,1-yt,2+yt,0,-1,2,tt);return(It||Ct)&&(rt=dt(et,1,-yt,1+yt,0,-1,2,tt)||[],It&&(rt=Cr(It,1).concat(rt)),Ct&&(rt=rt.concat(Cr(Ct,-1)))),rt}(Ne,me),Ne.length&&this.splitTile(Ne,0,0,0),_e&&(Ne.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}splitTile(Ae,me,_e,Ne,et,tt,yt){const rt=[Ae,me,_e,Ne],It=this.options,Ct=It.debug;for(;rt.length;){Ne=rt.pop(),_e=rt.pop(),me=rt.pop(),Ae=rt.pop();const lt=1<<me,mt=Lr(me,_e,Ne);let Me=this.tiles[mt];if(!Me&&(Ct>1&&console.time("creation"),Me=this.tiles[mt]=lr(Ae,me,_e,Ne,It),this.tileCoords.push({z:me,x:_e,y:Ne}),Ct)){Ct>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",me,_e,Ne,Me.numFeatures,Me.numPoints,Me.numSimplified),console.timeEnd("creation"));const Ln=`z${me}`;this.stats[Ln]=(this.stats[Ln]||0)+1,this.total++}if(Me.source=Ae,et==null){if(me===It.indexMaxZoom||Me.numPoints<=It.indexMaxPoints)continue}else{if(me===It.maxZoom||me===et)continue;if(et!=null){const Ln=et-me;if(_e!==tt>>Ln||Ne!==yt>>Ln)continue}}if(Me.source=null,Ae.length===0)continue;Ct>1&&console.time("clipping");const Nt=.5*It.buffer/It.extent,nr=.5-Nt,tr=.5+Nt,Ar=1+Nt;let qt=null,Jr=null,jr=null,Nr=null,_r=dt(Ae,lt,_e-Nt,_e+tr,0,Me.minX,Me.maxX,It),Ur=dt(Ae,lt,_e+nr,_e+Ar,0,Me.minX,Me.maxX,It);Ae=null,_r&&(qt=dt(_r,lt,Ne-Nt,Ne+tr,1,Me.minY,Me.maxY,It),Jr=dt(_r,lt,Ne+nr,Ne+Ar,1,Me.minY,Me.maxY,It),_r=null),Ur&&(jr=dt(Ur,lt,Ne-Nt,Ne+tr,1,Me.minY,Me.maxY,It),Nr=dt(Ur,lt,Ne+nr,Ne+Ar,1,Me.minY,Me.maxY,It),Ur=null),Ct>1&&console.timeEnd("clipping"),rt.push(qt||[],me+1,2*_e,2*Ne),rt.push(Jr||[],me+1,2*_e,2*Ne+1),rt.push(jr||[],me+1,2*_e+1,2*Ne),rt.push(Nr||[],me+1,2*_e+1,2*Ne+1)}}getTile(Ae,me,_e){Ae=+Ae,me=+me,_e=+_e;const Ne=this.options,{extent:et,debug:tt}=Ne;if(Ae<0||Ae>24)return null;const yt=1<<Ae,rt=Lr(Ae,me=me+yt&yt-1,_e);if(this.tiles[rt])return Kt(this.tiles[rt],et);tt>1&&console.log("drilling down to z%d-%d-%d",Ae,me,_e);let It,Ct=Ae,lt=me,mt=_e;for(;!It&&Ct>0;)Ct--,lt>>=1,mt>>=1,It=this.tiles[Lr(Ct,lt,mt)];return It&&It.source?(tt>1&&(console.log("found parent tile z%d-%d-%d",Ct,lt,mt),console.time("drilling down")),this.splitTile(It.source,Ct,lt,mt,Ae,me,_e),tt>1&&console.timeEnd("drilling down"),this.tiles[rt]?Kt(this.tiles[rt],et):null):null}}function Lr(ct,Ae,me){return 32*((1<<ct)*me+Ae)+ct}function Hr(ct,Ae){return Ae?ct.properties[Ae]:ct.id}function un(ct,Ae){if(ct==null)return!0;if(ct.type==="Feature")return Hr(ct,Ae)!=null;if(ct.type==="FeatureCollection"){const me=new Set;for(const _e of ct.features){const Ne=Hr(_e,Ae);if(Ne==null||me.has(Ne))return!1;me.add(Ne)}return!0}return!1}function zr(ct,Ae){const me=new Map;if(ct!=null)if(ct.type==="Feature")me.set(Hr(ct,Ae),ct);else for(const _e of ct.features)me.set(Hr(_e,Ae),_e);return me}class Yr extends I{constructor(){super(...arguments),this._dataUpdateable=new Map}loadVectorTile(Ae,me){return h._(this,void 0,void 0,function*(){const _e=Ae.tileID.canonical;if(!this._geoJSONIndex)throw new Error("Unable to parse the data into a cluster or geojson");const Ne=this._geoJSONIndex.getTile(_e.z,_e.x,_e.y);if(!Ne)return null;const et=new V(Ne.features);let tt=Be(et);return tt.byteOffset===0&&tt.byteLength===tt.buffer.byteLength||(tt=new Uint8Array(tt)),{vectorTile:et,rawData:tt.buffer}})}loadData(Ae){return h._(this,void 0,void 0,function*(){var me;(me=this._pendingRequest)===null||me===void 0||me.abort();const _e=!!(Ae&&Ae.request&&Ae.request.collectResourceTiming)&&new h.cM(Ae.request);this._pendingRequest=new AbortController;try{this._pendingData=this.loadAndProcessGeoJSON(Ae,this._pendingRequest),this._geoJSONIndex=Ae.cluster?new Te(function({superclusterOptions:tt,clusterProperties:yt}){if(!yt||!tt)return tt;const rt={},It={},Ct={accumulated:null,zoom:0},lt={properties:null},mt=Object.keys(yt);for(const Me of mt){const[Nt,nr]=yt[Me],tr=h.cT(nr),Ar=h.cT(typeof Nt=="string"?[Nt,["accumulated"],["get",Me]]:Nt);rt[Me]=tr.value,It[Me]=Ar.value}return tt.map=Me=>{lt.properties=Me;const Nt={};for(const nr of mt)Nt[nr]=rt[nr].evaluate(Ct,lt);return Nt},tt.reduce=(Me,Nt)=>{lt.properties=Nt;for(const nr of mt)Ct.accumulated=Me[nr],Me[nr]=It[nr].evaluate(Ct,lt)},tt}(Ae)).load((yield this._pendingData).features):(Ne=yield this._pendingData,new Kr(Ne,Ae.geojsonVtOptions)),this.loaded={};const et={};if(_e){const tt=_e.finish();tt&&(et.resourceTiming={},et.resourceTiming[Ae.source]=JSON.parse(JSON.stringify(tt)))}return et}catch(et){if(delete this._pendingRequest,h.cx(et))return{abandoned:!0};throw et}var Ne})}getData(){return h._(this,void 0,void 0,function*(){return this._pendingData})}reloadTile(Ae){const me=this.loaded;return me&&me[Ae.uid]?super.reloadTile(Ae):this.loadTile(Ae)}loadAndProcessGeoJSON(Ae,me){return h._(this,void 0,void 0,function*(){let _e=yield this.loadGeoJSON(Ae,me);if(delete this._pendingRequest,typeof _e!="object")throw new Error(`Input data given to '${Ae.source}' is not a valid GeoJSON object.`);if(H(_e,!0),Ae.filter){const Ne=h.cT(Ae.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(Ne.result==="error")throw new Error(Ne.value.map(tt=>`${tt.key}: ${tt.message}`).join(", "));_e={type:"FeatureCollection",features:_e.features.filter(tt=>Ne.value.evaluate({zoom:0},tt))}}return _e})}loadGeoJSON(Ae,me){return h._(this,void 0,void 0,function*(){const{promoteId:_e}=Ae;if(Ae.request){const Ne=yield h.j(Ae.request,me);return this._dataUpdateable=un(Ne.data,_e)?zr(Ne.data,_e):void 0,Ne.data}if(typeof Ae.data=="string")try{const Ne=JSON.parse(Ae.data);return this._dataUpdateable=un(Ne,_e)?zr(Ne,_e):void 0,Ne}catch{throw new Error(`Input data given to '${Ae.source}' is not a valid GeoJSON object.`)}if(!Ae.dataDiff)throw new Error(`Input data given to '${Ae.source}' is not a valid GeoJSON object.`);if(!this._dataUpdateable)throw new Error(`Cannot update existing geojson data in ${Ae.source}`);return function(Ne,et,tt){var yt,rt,It,Ct;if(et.removeAll&&Ne.clear(),et.remove)for(const lt of et.remove)Ne.delete(lt);if(et.add)for(const lt of et.add){const mt=Hr(lt,tt);mt!=null&&Ne.set(mt,lt)}if(et.update)for(const lt of et.update){let mt=Ne.get(lt.id);if(mt==null)continue;const Me=!lt.removeAllProperties&&(((yt=lt.removeProperties)===null||yt===void 0?void 0:yt.length)>0||((rt=lt.addOrUpdateProperties)===null||rt===void 0?void 0:rt.length)>0);if((lt.newGeometry||lt.removeAllProperties||Me)&&(mt=Object.assign({},mt),Ne.set(lt.id,mt),Me&&(mt.properties=Object.assign({},mt.properties))),lt.newGeometry&&(mt.geometry=lt.newGeometry),lt.removeAllProperties)mt.properties={};else if(((It=lt.removeProperties)===null||It===void 0?void 0:It.length)>0)for(const Nt of lt.removeProperties)Object.prototype.hasOwnProperty.call(mt.properties,Nt)&&delete mt.properties[Nt];if(((Ct=lt.addOrUpdateProperties)===null||Ct===void 0?void 0:Ct.length)>0)for(const{key:Nt,value:nr}of lt.addOrUpdateProperties)mt.properties[Nt]=nr}}(this._dataUpdateable,Ae.dataDiff,_e),{type:"FeatureCollection",features:Array.from(this._dataUpdateable.values())}})}removeSource(Ae){return h._(this,void 0,void 0,function*(){this._pendingRequest&&this._pendingRequest.abort()})}getClusterExpansionZoom(Ae){return this._geoJSONIndex.getClusterExpansionZoom(Ae.clusterId)}getClusterChildren(Ae){return this._geoJSONIndex.getChildren(Ae.clusterId)}getClusterLeaves(Ae){return this._geoJSONIndex.getLeaves(Ae.clusterId,Ae.limit,Ae.offset)}}class ur{constructor(Ae){this.self=Ae,this.actor=new h.J(Ae),this.layerIndexes={},this.availableImages={},this.workerSources={},this.demWorkerSources={},this.externalWorkerSourceTypes={},this.self.registerWorkerSource=(me,_e)=>{if(this.externalWorkerSourceTypes[me])throw new Error(`Worker source with name "${me}" already registered.`);this.externalWorkerSourceTypes[me]=_e},this.self.addProtocol=h.cz,this.self.removeProtocol=h.cA,this.self.registerRTLTextPlugin=me=>{h.cU.setMethods(me)},this.actor.registerMessageHandler("LDT",(me,_e)=>this._getDEMWorkerSource(me,_e.source).loadTile(_e)),this.actor.registerMessageHandler("RDT",(me,_e)=>h._(this,void 0,void 0,function*(){this._getDEMWorkerSource(me,_e.source).removeTile(_e)})),this.actor.registerMessageHandler("GCEZ",(me,_e)=>h._(this,void 0,void 0,function*(){return this._getWorkerSource(me,_e.type,_e.source).getClusterExpansionZoom(_e)})),this.actor.registerMessageHandler("GCC",(me,_e)=>h._(this,void 0,void 0,function*(){return this._getWorkerSource(me,_e.type,_e.source).getClusterChildren(_e)})),this.actor.registerMessageHandler("GCL",(me,_e)=>h._(this,void 0,void 0,function*(){return this._getWorkerSource(me,_e.type,_e.source).getClusterLeaves(_e)})),this.actor.registerMessageHandler("LD",(me,_e)=>this._getWorkerSource(me,_e.type,_e.source).loadData(_e)),this.actor.registerMessageHandler("GD",(me,_e)=>this._getWorkerSource(me,_e.type,_e.source).getData()),this.actor.registerMessageHandler("LT",(me,_e)=>this._getWorkerSource(me,_e.type,_e.source).loadTile(_e)),this.actor.registerMessageHandler("RT",(me,_e)=>this._getWorkerSource(me,_e.type,_e.source).reloadTile(_e)),this.actor.registerMessageHandler("AT",(me,_e)=>this._getWorkerSource(me,_e.type,_e.source).abortTile(_e)),this.actor.registerMessageHandler("RMT",(me,_e)=>this._getWorkerSource(me,_e.type,_e.source).removeTile(_e)),this.actor.registerMessageHandler("RS",(me,_e)=>h._(this,void 0,void 0,function*(){if(!this.workerSources[me]||!this.workerSources[me][_e.type]||!this.workerSources[me][_e.type][_e.source])return;const Ne=this.workerSources[me][_e.type][_e.source];delete this.workerSources[me][_e.type][_e.source],Ne.removeSource!==void 0&&Ne.removeSource(_e)})),this.actor.registerMessageHandler("RM",me=>h._(this,void 0,void 0,function*(){delete this.layerIndexes[me],delete this.availableImages[me],delete this.workerSources[me],delete this.demWorkerSources[me]})),this.actor.registerMessageHandler("SR",(me,_e)=>h._(this,void 0,void 0,function*(){this.referrer=_e})),this.actor.registerMessageHandler("SRPS",(me,_e)=>this._syncRTLPluginState(me,_e)),this.actor.registerMessageHandler("IS",(me,_e)=>h._(this,void 0,void 0,function*(){this.self.importScripts(_e)})),this.actor.registerMessageHandler("SI",(me,_e)=>this._setImages(me,_e)),this.actor.registerMessageHandler("UL",(me,_e)=>h._(this,void 0,void 0,function*(){this._getLayerIndex(me).update(_e.layers,_e.removedIds)})),this.actor.registerMessageHandler("SL",(me,_e)=>h._(this,void 0,void 0,function*(){this._getLayerIndex(me).replace(_e)}))}_setImages(Ae,me){return h._(this,void 0,void 0,function*(){this.availableImages[Ae]=me;for(const _e in this.workerSources[Ae]){const Ne=this.workerSources[Ae][_e];for(const et in Ne)Ne[et].availableImages=me}})}_syncRTLPluginState(Ae,me){return h._(this,void 0,void 0,function*(){return yield h.cU.syncState(me,this.self.importScripts)})}_getAvailableImages(Ae){let me=this.availableImages[Ae];return me||(me=[]),me}_getLayerIndex(Ae){let me=this.layerIndexes[Ae];return me||(me=this.layerIndexes[Ae]=new o),me}_getWorkerSource(Ae,me,_e){if(this.workerSources[Ae]||(this.workerSources[Ae]={}),this.workerSources[Ae][me]||(this.workerSources[Ae][me]={}),!this.workerSources[Ae][me][_e]){const Ne={sendAsync:(et,tt)=>(et.targetMapId=Ae,this.actor.sendAsync(et,tt))};switch(me){case"vector":this.workerSources[Ae][me][_e]=new I(Ne,this._getLayerIndex(Ae),this._getAvailableImages(Ae));break;case"geojson":this.workerSources[Ae][me][_e]=new Yr(Ne,this._getLayerIndex(Ae),this._getAvailableImages(Ae));break;default:this.workerSources[Ae][me][_e]=new this.externalWorkerSourceTypes[me](Ne,this._getLayerIndex(Ae),this._getAvailableImages(Ae))}}return this.workerSources[Ae][me][_e]}_getDEMWorkerSource(Ae,me){return this.demWorkerSources[Ae]||(this.demWorkerSources[Ae]={}),this.demWorkerSources[Ae][me]||(this.demWorkerSources[Ae][me]=new F),this.demWorkerSources[Ae][me]}}return h.i(self)&&(self.worker=new ur(self)),ur}),a("index",["exports","./shared"],function(h,o){var g="5.6.1";function y(){var v=new o.A(4);return o.A!=Float32Array&&(v[1]=0,v[2]=0),v[0]=1,v[3]=1,v}let C,I;const F={now:typeof performance<"u"&&performance&&performance.now?performance.now.bind(performance):Date.now.bind(Date),frame(v,n,l){const f=requestAnimationFrame(_=>{p(),n(_)}),{unsubscribe:p}=o.s(v.signal,"abort",()=>{p(),cancelAnimationFrame(f),l(o.c())},!1)},frameAsync(v){return new Promise((n,l)=>{this.frame(v,n,l)})},getImageData(v,n=0){return this.getImageCanvasContext(v).getImageData(-n,-n,v.width+2*n,v.height+2*n)},getImageCanvasContext(v){const n=window.document.createElement("canvas"),l=n.getContext("2d",{willReadFrequently:!0});if(!l)throw new Error("failed to create canvas 2d context");return n.width=v.width,n.height=v.height,l.drawImage(v,0,0,v.width,v.height),l},resolveURL:v=>(C||(C=document.createElement("a")),C.href=v,C.href),hardwareConcurrency:typeof navigator<"u"&&navigator.hardwareConcurrency||4,get prefersReducedMotion(){return!!matchMedia&&(I==null&&(I=matchMedia("(prefers-reduced-motion: reduce)")),I.matches)}};class b{static testProp(n){if(!b.docStyle)return n[0];for(let l=0;l<n.length;l++)if(n[l]in b.docStyle)return n[l];return n[0]}static create(n,l,f){const p=window.document.createElement(n);return l!==void 0&&(p.className=l),f&&f.appendChild(p),p}static createNS(n,l){return window.document.createElementNS(n,l)}static disableDrag(){b.docStyle&&b.selectProp&&(b.userSelect=b.docStyle[b.selectProp],b.docStyle[b.selectProp]="none")}static enableDrag(){b.docStyle&&b.selectProp&&(b.docStyle[b.selectProp]=b.userSelect)}static setTransform(n,l){n.style[b.transformProp]=l}static addEventListener(n,l,f,p={}){n.addEventListener(l,f,"passive"in p?p:p.capture)}static removeEventListener(n,l,f,p={}){n.removeEventListener(l,f,"passive"in p?p:p.capture)}static suppressClickInternal(n){n.preventDefault(),n.stopPropagation(),window.removeEventListener("click",b.suppressClickInternal,!0)}static suppressClick(){window.addEventListener("click",b.suppressClickInternal,!0),window.setTimeout(()=>{window.removeEventListener("click",b.suppressClickInternal,!0)},0)}static getScale(n){const l=n.getBoundingClientRect();return{x:l.width/n.offsetWidth||1,y:l.height/n.offsetHeight||1,boundingClientRect:l}}static getPoint(n,l,f){const p=l.boundingClientRect;return new o.P((f.clientX-p.left)/l.x-n.clientLeft,(f.clientY-p.top)/l.y-n.clientTop)}static mousePos(n,l){const f=b.getScale(n);return b.getPoint(n,f,l)}static touchPos(n,l){const f=[],p=b.getScale(n);for(let _=0;_<l.length;_++)f.push(b.getPoint(n,p,l[_]));return f}static mouseButton(n){return n.button}static remove(n){n.parentNode&&n.parentNode.removeChild(n)}static sanitize(n){const l=new DOMParser().parseFromString(n,"text/html").body||document.createElement("body"),f=l.querySelectorAll("script");for(const p of f)p.remove();return b.clean(l),l.innerHTML}static isPossiblyDangerous(n,l){const f=l.replace(/\s+/g,"").toLowerCase();return!(!["src","href","xlink:href"].includes(n)||!f.includes("javascript:")&&!f.includes("data:"))||!!n.startsWith("on")||void 0}static clean(n){const l=n.children;for(const f of l)b.removeAttributes(f),b.clean(f)}static removeAttributes(n){for(const{name:l,value:f}of n.attributes)b.isPossiblyDangerous(l,f)&&n.removeAttribute(l)}}b.docStyle=typeof window<"u"&&window.document&&window.document.documentElement.style,b.selectProp=b.testProp(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),b.transformProp=b.testProp(["transform","WebkitTransform"]);const N={supported:!1,testSupport:function(v){!k&&H&&(R?V(v):U=v)}};let U,H,k=!1,R=!1;function V(v){const n=v.createTexture();v.bindTexture(v.TEXTURE_2D,n);try{if(v.texImage2D(v.TEXTURE_2D,0,v.RGBA,v.RGBA,v.UNSIGNED_BYTE,H),v.isContextLost())return;N.supported=!0}catch{}v.deleteTexture(n),k=!0}var W;typeof document<"u"&&(H=document.createElement("img"),H.onload=()=>{U&&V(U),U=null,R=!0},H.onerror=()=>{k=!0,U=null},H.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA="),function(v){let n,l,f,p;v.resetRequestQueue=()=>{n=[],l=0,f=0,p={}},v.addThrottleControl=M=>{const z=f++;return p[z]=M,z},v.removeThrottleControl=M=>{delete p[M],S()},v.getImage=(M,z,K=!0)=>new Promise((Z,$)=>{N.supported&&(M.headers||(M.headers={}),M.headers.accept="image/webp,*/*"),o.e(M,{type:"image"}),n.push({abortController:z,requestParameters:M,supportImageRefresh:K,state:"queued",onError:Y=>{$(Y)},onSuccess:Y=>{Z(Y)}}),S()});const _=M=>o._(this,void 0,void 0,function*(){M.state="running";const{requestParameters:z,supportImageRefresh:K,onError:Z,onSuccess:$,abortController:Y}=M,he=K===!1&&!o.i(self)&&!o.g(z.url)&&(!z.headers||Object.keys(z.headers).reduce((Fe,De)=>Fe&&De==="accept",!0));l++;const Ie=he?P(z,Y):o.m(z,Y);try{const Fe=yield Ie;delete M.abortController,M.state="completed",Fe.data instanceof HTMLImageElement||o.b(Fe.data)?$(Fe):Fe.data&&$({data:yield(Ee=Fe.data,typeof createImageBitmap=="function"?o.f(Ee):o.h(Ee)),cacheControl:Fe.cacheControl,expires:Fe.expires})}catch(Fe){delete M.abortController,Z(Fe)}finally{l--,S()}var Ee}),S=()=>{const M=(()=>{for(const z of Object.keys(p))if(p[z]())return!0;return!1})()?o.a.MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:o.a.MAX_PARALLEL_IMAGE_REQUESTS;for(let z=l;z<M&&n.length>0;z++){const K=n.shift();K.abortController.signal.aborted?z--:_(K)}},P=(M,z)=>new Promise((K,Z)=>{const $=new Image,Y=M.url,he=M.credentials;he&&he==="include"?$.crossOrigin="use-credentials":(he&&he==="same-origin"||!o.d(Y))&&($.crossOrigin="anonymous"),z.signal.addEventListener("abort",()=>{$.src="",Z(o.c())}),$.fetchPriority="high",$.onload=()=>{$.onerror=$.onload=null,K({data:$})},$.onerror=()=>{$.onerror=$.onload=null,z.signal.aborted||Z(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))},$.src=Y})}(W||(W={})),W.resetRequestQueue();class se{constructor(n){this._transformRequestFn=n}transformRequest(n,l){return this._transformRequestFn&&this._transformRequestFn(n,l)||{url:n}}setTransformRequest(n){this._transformRequestFn=n}}function fe(v){const n=[];if(typeof v=="string")n.push({id:"default",url:v});else if(v&&v.length>0){const l=[];for(const{id:f,url:p}of v){const _=`${f}${p}`;l.indexOf(_)===-1&&(l.push(_),n.push({id:f,url:p}))}}return n}function ue(v,n,l){try{const f=new URL(v);return f.pathname+=`${n}${l}`,f.toString()}catch{throw new Error(`Invalid sprite URL "${v}", must be absolute. Modify style specification directly or use TransformStyleFunction to correct the issue dynamically`)}}function ae(v){const{userImage:n}=v;return!!(n&&n.render&&n.render())&&(v.data.replace(new Uint8Array(n.data.buffer)),!0)}class Be extends o.E{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new o.R({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(n){if(this.loaded!==n&&(this.loaded=n,n)){for(const{ids:l,promiseResolve:f}of this.requestors)f(this._getImagesForIds(l));this.requestors=[]}}getImage(n){const l=this.images[n];if(l&&!l.data&&l.spriteData){const f=l.spriteData;l.data=new o.R({width:f.width,height:f.height},f.context.getImageData(f.x,f.y,f.width,f.height).data),l.spriteData=null}return l}addImage(n,l){if(this.images[n])throw new Error(`Image id ${n} already exist, use updateImage instead`);this._validate(n,l)&&(this.images[n]=l)}_validate(n,l){let f=!0;const p=l.data||l.spriteData;return this._validateStretch(l.stretchX,p&&p.width)||(this.fire(new o.k(new Error(`Image "${n}" has invalid "stretchX" value`))),f=!1),this._validateStretch(l.stretchY,p&&p.height)||(this.fire(new o.k(new Error(`Image "${n}" has invalid "stretchY" value`))),f=!1),this._validateContent(l.content,l)||(this.fire(new o.k(new Error(`Image "${n}" has invalid "content" value`))),f=!1),f}_validateStretch(n,l){if(!n)return!0;let f=0;for(const p of n){if(p[0]<f||p[1]<p[0]||l<p[1])return!1;f=p[1]}return!0}_validateContent(n,l){if(!n)return!0;if(n.length!==4)return!1;const f=l.spriteData,p=f&&f.width||l.data.width,_=f&&f.height||l.data.height;return!(n[0]<0||p<n[0]||n[1]<0||_<n[1]||n[2]<0||p<n[2]||n[3]<0||_<n[3]||n[2]<n[0]||n[3]<n[1])}updateImage(n,l,f=!0){const p=this.getImage(n);if(f&&(p.data.width!==l.data.width||p.data.height!==l.data.height))throw new Error(`size mismatch between old image (${p.data.width}x${p.data.height}) and new image (${l.data.width}x${l.data.height}).`);l.version=p.version+1,this.images[n]=l,this.updatedImages[n]=!0}removeImage(n){const l=this.images[n];delete this.images[n],delete this.patterns[n],l.userImage&&l.userImage.onRemove&&l.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(n){return new Promise((l,f)=>{let p=!0;if(!this.isLoaded())for(const _ of n)this.images[_]||(p=!1);this.isLoaded()||p?l(this._getImagesForIds(n)):this.requestors.push({ids:n,promiseResolve:l})})}_getImagesForIds(n){const l={};for(const f of n){let p=this.getImage(f);p||(this.fire(new o.l("styleimagemissing",{id:f})),p=this.getImage(f)),p?l[f]={data:p.data.clone(),pixelRatio:p.pixelRatio,sdf:p.sdf,version:p.version,stretchX:p.stretchX,stretchY:p.stretchY,content:p.content,textFitWidth:p.textFitWidth,textFitHeight:p.textFitHeight,hasRenderCallback:!!(p.userImage&&p.userImage.render)}:o.w(`Image "${f}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}return l}getPixelSize(){const{width:n,height:l}=this.atlasImage;return{width:n,height:l}}getPattern(n){const l=this.patterns[n],f=this.getImage(n);if(!f)return null;if(l&&l.position.version===f.version)return l.position;if(l)l.position.version=f.version;else{const p={w:f.data.width+2,h:f.data.height+2,x:0,y:0},_=new o.I(p,f);this.patterns[n]={bin:p,position:_}}return this._updatePatternAtlas(),this.patterns[n].position}bind(n){const l=n.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new o.T(n,this.atlasImage,l.RGBA),this.atlasTexture.bind(l.LINEAR,l.CLAMP_TO_EDGE)}_updatePatternAtlas(){const n=[];for(const _ in this.patterns)n.push(this.patterns[_].bin);const{w:l,h:f}=o.p(n),p=this.atlasImage;p.resize({width:l||1,height:f||1});for(const _ in this.patterns){const{bin:S}=this.patterns[_],P=S.x+1,M=S.y+1,z=this.getImage(_).data,K=z.width,Z=z.height;o.R.copy(z,p,{x:0,y:0},{x:P,y:M},{width:K,height:Z}),o.R.copy(z,p,{x:0,y:Z-1},{x:P,y:M-1},{width:K,height:1}),o.R.copy(z,p,{x:0,y:0},{x:P,y:M+Z},{width:K,height:1}),o.R.copy(z,p,{x:K-1,y:0},{x:P-1,y:M},{width:1,height:Z}),o.R.copy(z,p,{x:0,y:0},{x:P+K,y:M},{width:1,height:Z})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(n){for(const l of n){if(this.callbackDispatchedThisFrame[l])continue;this.callbackDispatchedThisFrame[l]=!0;const f=this.getImage(l);f||o.w(`Image with ID: "${l}" was not found`),ae(f)&&this.updateImage(l,f)}}}const Ue=1e20;function te(v,n,l,f,p,_,S,P,M){for(let z=n;z<n+f;z++)de(v,l*_+z,_,p,S,P,M);for(let z=l;z<l+p;z++)de(v,z*_+n,1,f,S,P,M)}function de(v,n,l,f,p,_,S){_[0]=0,S[0]=-Ue,S[1]=Ue,p[0]=v[n];for(let P=1,M=0,z=0;P<f;P++){p[P]=v[n+P*l];const K=P*P;do{const Z=_[M];z=(p[P]-p[Z]+K-Z*Z)/(P-Z)/2}while(z<=S[M]&&--M>-1);M++,_[M]=P,S[M]=z,S[M+1]=Ue}for(let P=0,M=0;P<f;P++){for(;S[M+1]<P;)M++;const z=_[M],K=P-z;v[n+P*l]=p[z]+K*K}}class Te{constructor(n,l){this.requestManager=n,this.localIdeographFontFamily=l,this.entries={}}setURL(n){this.url=n}getGlyphs(n){return o._(this,void 0,void 0,function*(){const l=[];for(const _ in n)for(const S of n[_])l.push(this._getAndCacheGlyphsPromise(_,S));const f=yield Promise.all(l),p={};for(const{stack:_,id:S,glyph:P}of f)p[_]||(p[_]={}),p[_][S]=P&&{id:P.id,bitmap:P.bitmap.clone(),metrics:P.metrics};return p})}_getAndCacheGlyphsPromise(n,l){return o._(this,void 0,void 0,function*(){let f=this.entries[n];f||(f=this.entries[n]={glyphs:{},requests:{},ranges:{}});let p=f.glyphs[l];if(p!==void 0)return{stack:n,id:l,glyph:p};if(p=this._tinySDF(f,n,l),p)return f.glyphs[l]=p,{stack:n,id:l,glyph:p};const _=Math.floor(l/256);if(256*_>65535)throw new Error("glyphs > 65535 not supported");if(f.ranges[_])return{stack:n,id:l,glyph:p};if(!this.url)throw new Error("glyphsUrl is not set");if(!f.requests[_]){const P=Te.loadGlyphRange(n,_,this.url,this.requestManager);f.requests[_]=P}const S=yield f.requests[_];for(const P in S)this._doesCharSupportLocalGlyph(+P)||(f.glyphs[+P]=S[+P]);return f.ranges[_]=!0,{stack:n,id:l,glyph:S[l]||null}})}_doesCharSupportLocalGlyph(n){return!!this.localIdeographFontFamily&&(new RegExp("\\p{Ideo}|\\p{sc=Hang}|\\p{sc=Hira}|\\p{sc=Kana}","u").test(String.fromCodePoint(n))||o.u["CJK Unified Ideographs"](n)||o.u["Hangul Syllables"](n)||o.u.Hiragana(n)||o.u.Katakana(n)||o.u["CJK Symbols and Punctuation"](n)||o.u["Halfwidth and Fullwidth Forms"](n))}_tinySDF(n,l,f){const p=this.localIdeographFontFamily;if(!p||!this._doesCharSupportLocalGlyph(f))return;let _=n.tinySDF;if(!_){let P="400";/bold/i.test(l)?P="900":/medium/i.test(l)?P="500":/light/i.test(l)&&(P="200"),_=n.tinySDF=new Te.TinySDF({fontSize:48,buffer:6,radius:16,cutoff:.25,fontFamily:p,fontWeight:P})}const S=_.draw(String.fromCharCode(f));return{id:f,bitmap:new o.q({width:S.width||60,height:S.height||60},S.data),metrics:{width:S.glyphWidth/2||24,height:S.glyphHeight/2||24,left:S.glyphLeft/2+.5||0,top:S.glyphTop/2-27.5||-8,advance:S.glyphAdvance/2||24,isDoubleResolution:!0}}}}Te.loadGlyphRange=function(v,n,l,f){return o._(this,void 0,void 0,function*(){const p=256*n,_=p+255,S=f.transformRequest(l.replace("{fontstack}",v).replace("{range}",`${p}-${_}`),"Glyphs"),P=yield o.n(S,new AbortController);if(!P||!P.data)throw new Error(`Could not load glyph range. range: ${n}, ${p}-${_}`);const M={};for(const z of o.o(P.data))M[z.id]=z;return M})},Te.TinySDF=class{constructor({fontSize:v=24,buffer:n=3,radius:l=8,cutoff:f=.25,fontFamily:p="sans-serif",fontWeight:_="normal",fontStyle:S="normal"}={}){this.buffer=n,this.cutoff=f,this.radius=l;const P=this.size=v+4*n,M=this._createCanvas(P),z=this.ctx=M.getContext("2d",{willReadFrequently:!0});z.font=`${S} ${_} ${v}px ${p}`,z.textBaseline="alphabetic",z.textAlign="left",z.fillStyle="black",this.gridOuter=new Float64Array(P*P),this.gridInner=new Float64Array(P*P),this.f=new Float64Array(P),this.z=new Float64Array(P+1),this.v=new Uint16Array(P)}_createCanvas(v){const n=document.createElement("canvas");return n.width=n.height=v,n}draw(v){const{width:n,actualBoundingBoxAscent:l,actualBoundingBoxDescent:f,actualBoundingBoxLeft:p,actualBoundingBoxRight:_}=this.ctx.measureText(v),S=Math.ceil(l),P=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(_-p))),M=Math.min(this.size-this.buffer,S+Math.ceil(f)),z=P+2*this.buffer,K=M+2*this.buffer,Z=Math.max(z*K,0),$=new Uint8ClampedArray(Z),Y={data:$,width:z,height:K,glyphWidth:P,glyphHeight:M,glyphTop:S,glyphLeft:0,glyphAdvance:n};if(P===0||M===0)return Y;const{ctx:he,buffer:Ie,gridInner:Ee,gridOuter:Fe}=this;he.clearRect(Ie,Ie,P,M),he.fillText(v,Ie,Ie+S);const De=he.getImageData(Ie,Ie,P,M);Fe.fill(Ue,0,Z),Ee.fill(0,0,Z);for(let Ve=0;Ve<M;Ve++)for(let Oe=0;Oe<P;Oe++){const We=De.data[4*(Ve*P+Oe)+3]/255;if(We===0)continue;const Je=(Ve+Ie)*z+Oe+Ie;if(We===1)Fe[Je]=0,Ee[Je]=Ue;else{const ze=.5-We;Fe[Je]=ze>0?ze*ze:0,Ee[Je]=ze<0?ze*ze:0}}te(Fe,0,0,z,K,z,this.f,this.v,this.z),te(Ee,Ie,Ie,P,M,z,this.f,this.v,this.z);for(let Ve=0;Ve<Z;Ve++){const Oe=Math.sqrt(Fe[Ve])-Math.sqrt(Ee[Ve]);$[Ve]=Math.round(255-255*(Oe/this.radius+this.cutoff))}return Y}};class we{constructor(){this.specification=o.v.light.position}possiblyEvaluate(n,l){return o.B(n.expression.evaluate(l))}interpolate(n,l,f){return{x:o.C.number(n.x,l.x,f),y:o.C.number(n.y,l.y,f),z:o.C.number(n.z,l.z,f)}}}let st;class Ze extends o.E{constructor(n){super(),st=st||new o.r({anchor:new o.D(o.v.light.anchor),position:new we,color:new o.D(o.v.light.color),intensity:new o.D(o.v.light.intensity)}),this._transitionable=new o.t(st),this.setLight(n),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(n,l={}){if(!this._validate(o.x,n,l))for(const f in n){const p=n[f];f.endsWith("-transition")?this._transitionable.setTransition(f.slice(0,-11),p):this._transitionable.setValue(f,p)}}updateTransitions(n){this._transitioning=this._transitionable.transitioned(n,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(n){this.properties=this._transitioning.possiblyEvaluate(n)}_validate(n,l,f){return(!f||f.validate!==!1)&&o.y(this,n.call(o.z,{value:l,style:{glyphs:!0,sprite:!0},styleSpec:o.v}))}}const At=new o.r({"sky-color":new o.D(o.v.sky["sky-color"]),"horizon-color":new o.D(o.v.sky["horizon-color"]),"fog-color":new o.D(o.v.sky["fog-color"]),"fog-ground-blend":new o.D(o.v.sky["fog-ground-blend"]),"horizon-fog-blend":new o.D(o.v.sky["horizon-fog-blend"]),"sky-horizon-blend":new o.D(o.v.sky["sky-horizon-blend"]),"atmosphere-blend":new o.D(o.v.sky["atmosphere-blend"])});class Le extends o.E{constructor(n){super(),this._transitionable=new o.t(At),this.setSky(n),this._transitioning=this._transitionable.untransitioned(),this.recalculate(new o.F(0))}setSky(n,l={}){if(!this._validate(o.G,n,l)){n||(n={"sky-color":"transparent","horizon-color":"transparent","fog-color":"transparent","fog-ground-blend":1,"atmosphere-blend":0});for(const f in n){const p=n[f];f.endsWith("-transition")?this._transitionable.setTransition(f.slice(0,-11),p):this._transitionable.setValue(f,p)}}}getSky(){return this._transitionable.serialize()}updateTransitions(n){this._transitioning=this._transitionable.transitioned(n,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(n){this.properties=this._transitioning.possiblyEvaluate(n)}_validate(n,l,f={}){return(f==null?void 0:f.validate)!==!1&&o.y(this,n.call(o.z,o.e({value:l,style:{glyphs:!0,sprite:!0},styleSpec:o.v})))}calculateFogBlendOpacity(n){return n<60?0:n<70?(n-60)/10:1}}class He{constructor(n,l){this.width=n,this.height=l,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}}getDash(n,l){const f=n.join(",")+String(l);return this.dashEntry[f]||(this.dashEntry[f]=this.addDash(n,l)),this.dashEntry[f]}getDashRanges(n,l,f){const p=[];let _=n.length%2==1?-n[n.length-1]*f:0,S=n[0]*f,P=!0;p.push({left:_,right:S,isDash:P,zeroLength:n[0]===0});let M=n[0];for(let z=1;z<n.length;z++){P=!P;const K=n[z];_=M*f,M+=K,S=M*f,p.push({left:_,right:S,isDash:P,zeroLength:K===0})}return p}addRoundDash(n,l,f){const p=l/2;for(let _=-f;_<=f;_++){const S=this.width*(this.nextRow+f+_);let P=0,M=n[P];for(let z=0;z<this.width;z++){z/M.right>1&&(M=n[++P]);const K=Math.abs(z-M.left),Z=Math.abs(z-M.right),$=Math.min(K,Z);let Y;const he=_/f*(p+1);if(M.isDash){const Ie=p-Math.abs(he);Y=Math.sqrt($*$+Ie*Ie)}else Y=p-Math.sqrt($*$+he*he);this.data[S+z]=Math.max(0,Math.min(255,Y+128))}}}addRegularDash(n){for(let P=n.length-1;P>=0;--P){const M=n[P],z=n[P+1];M.zeroLength?n.splice(P,1):z&&z.isDash===M.isDash&&(z.left=M.left,n.splice(P,1))}const l=n[0],f=n[n.length-1];l.isDash===f.isDash&&(l.left=f.left-this.width,f.right=l.right+this.width);const p=this.width*this.nextRow;let _=0,S=n[_];for(let P=0;P<this.width;P++){P/S.right>1&&(S=n[++_]);const M=Math.abs(P-S.left),z=Math.abs(P-S.right),K=Math.min(M,z);this.data[p+P]=Math.max(0,Math.min(255,(S.isDash?K:-K)+128))}}addDash(n,l){const f=l?7:0,p=2*f+1;if(this.nextRow+p>this.height)return o.w("LineAtlas out of space"),null;let _=0;for(let P=0;P<n.length;P++)_+=n[P];if(_!==0){const P=this.width/_,M=this.getDashRanges(n,this.width,P);l?this.addRoundDash(M,P,f):this.addRegularDash(M)}const S={y:(this.nextRow+f+.5)/this.height,height:2*f/this.height,width:_};return this.nextRow+=p,this.dirty=!0,S}bind(n){const l=n.gl;this.texture?(l.bindTexture(l.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,l.texSubImage2D(l.TEXTURE_2D,0,0,0,this.width,this.height,l.ALPHA,l.UNSIGNED_BYTE,this.data))):(this.texture=l.createTexture(),l.bindTexture(l.TEXTURE_2D,this.texture),l.texParameteri(l.TEXTURE_2D,l.TEXTURE_WRAP_S,l.REPEAT),l.texParameteri(l.TEXTURE_2D,l.TEXTURE_WRAP_T,l.REPEAT),l.texParameteri(l.TEXTURE_2D,l.TEXTURE_MIN_FILTER,l.LINEAR),l.texParameteri(l.TEXTURE_2D,l.TEXTURE_MAG_FILTER,l.LINEAR),l.texImage2D(l.TEXTURE_2D,0,l.ALPHA,this.width,this.height,0,l.ALPHA,l.UNSIGNED_BYTE,this.data))}}const it="maplibre_preloaded_worker_pool";class Lt{constructor(){this.active={}}acquire(n){if(!this.workers)for(this.workers=[];this.workers.length<Lt.workerCount;)this.workers.push(new Worker(o.a.WORKER_URL));return this.active[n]=!0,this.workers.slice()}release(n){delete this.active[n],this.numActive()===0&&(this.workers.forEach(l=>{l.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[it]}numActive(){return Object.keys(this.active).length}}const ie=Math.floor(F.hardwareConcurrency/2);let Ce,Pe;function $e(){return Ce||(Ce=new Lt),Ce}Lt.workerCount=o.H(globalThis)?Math.max(Math.min(ie,3),1):1;class nt{constructor(n,l){this.workerPool=n,this.actors=[],this.currentActor=0,this.id=l;const f=this.workerPool.acquire(l);for(let p=0;p<f.length;p++){const _=new o.J(f[p],l);_.name=`Worker ${p}`,this.actors.push(_)}if(!this.actors.length)throw new Error("No actors found")}broadcast(n,l){const f=[];for(const p of this.actors)f.push(p.sendAsync({type:n,data:l}));return Promise.all(f)}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(n=!0){this.actors.forEach(l=>{l.remove()}),this.actors=[],n&&this.workerPool.release(this.id)}registerMessageHandler(n,l){for(const f of this.actors)f.registerMessageHandler(n,l)}}function Xe(){return Pe||(Pe=new nt($e(),o.K),Pe.registerMessageHandler("GR",(v,n,l)=>o.m(n,l))),Pe}function pt(v,n){const l=o.L();return o.M(l,l,[1,1,0]),o.N(l,l,[.5*v.width,.5*v.height,1]),v.calculatePosMatrix?o.O(l,l,v.calculatePosMatrix(n.toUnwrapped())):l}function dt(v,n,l,f,p,_,S){var P;const M=function($,Y,he){if($)for(const Ie of $){const Ee=Y[Ie];if(Ee&&Ee.source===he&&Ee.type==="fill-extrusion")return!0}else for(const Ie in Y){const Ee=Y[Ie];if(Ee.source===he&&Ee.type==="fill-extrusion")return!0}return!1}((P=p==null?void 0:p.layers)!==null&&P!==void 0?P:null,n,v.id),z=_.maxPitchScaleFactor(),K=v.tilesIn(f,z,M);K.sort(Rt);const Z=[];for(const $ of K)Z.push({wrappedTileID:$.tileID.wrapped().key,queryResults:$.tile.queryRenderedFeatures(n,l,v._state,$.queryGeometry,$.cameraQueryGeometry,$.scale,p,_,z,pt(v.transform,$.tileID),S?(Y,he)=>S($.tileID,Y,he):void 0)});return function($,Y){for(const he in $)for(const Ie of $[he])Mt(Ie,Y);return $}(function($){const Y={},he={};for(const Ie of $){const Ee=Ie.queryResults,Fe=Ie.wrappedTileID,De=he[Fe]=he[Fe]||{};for(const Ve in Ee){const Oe=Ee[Ve],We=De[Ve]=De[Ve]||{},Je=Y[Ve]=Y[Ve]||[];for(const ze of Oe)We[ze.featureIndex]||(We[ze.featureIndex]=!0,Je.push(ze))}}return Y}(Z),v)}function Rt(v,n){const l=v.tileID,f=n.tileID;return l.overscaledZ-f.overscaledZ||l.canonical.y-f.canonical.y||l.wrap-f.wrap||l.canonical.x-f.canonical.x}function Mt(v,n){const l=v.feature,f=n.getFeatureState(l.layer["source-layer"],l.id);l.source=l.layer.source,l.layer["source-layer"]&&(l.sourceLayer=l.layer["source-layer"]),l.state=f}function $t(v,n,l){return o._(this,void 0,void 0,function*(){let f=v;if(v.url?f=(yield o.j(n.transformRequest(v.url,"Source"),l)).data:yield F.frameAsync(l),!f)return null;const p=o.Q(o.e(f,v),["tiles","minzoom","maxzoom","attribution","bounds","scheme","tileSize","encoding"]);return"vector_layers"in f&&f.vector_layers&&(p.vectorLayerIds=f.vector_layers.map(_=>_.id)),p})}class jt{constructor(n,l){n&&(l?this.setSouthWest(n).setNorthEast(l):Array.isArray(n)&&(n.length===4?this.setSouthWest([n[0],n[1]]).setNorthEast([n[2],n[3]]):this.setSouthWest(n[0]).setNorthEast(n[1])))}setNorthEast(n){return this._ne=n instanceof o.S?new o.S(n.lng,n.lat):o.S.convert(n),this}setSouthWest(n){return this._sw=n instanceof o.S?new o.S(n.lng,n.lat):o.S.convert(n),this}extend(n){const l=this._sw,f=this._ne;let p,_;if(n instanceof o.S)p=n,_=n;else{if(!(n instanceof jt))return Array.isArray(n)?n.length===4||n.every(Array.isArray)?this.extend(jt.convert(n)):this.extend(o.S.convert(n)):n&&("lng"in n||"lon"in n)&&"lat"in n?this.extend(o.S.convert(n)):this;if(p=n._sw,_=n._ne,!p||!_)return this}return l||f?(l.lng=Math.min(p.lng,l.lng),l.lat=Math.min(p.lat,l.lat),f.lng=Math.max(_.lng,f.lng),f.lat=Math.max(_.lat,f.lat)):(this._sw=new o.S(p.lng,p.lat),this._ne=new o.S(_.lng,_.lat)),this}getCenter(){return new o.S((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new o.S(this.getWest(),this.getNorth())}getSouthEast(){return new o.S(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(n){const{lng:l,lat:f}=o.S.convert(n);let p=this._sw.lng<=l&&l<=this._ne.lng;return this._sw.lng>this._ne.lng&&(p=this._sw.lng>=l&&l>=this._ne.lng),this._sw.lat<=f&&f<=this._ne.lat&&p}static convert(n){return n instanceof jt?n:n&&new jt(n)}static fromLngLat(n,l=0){const f=360*l/40075017,p=f/Math.cos(Math.PI/180*n.lat);return new jt(new o.S(n.lng-p,n.lat-f),new o.S(n.lng+p,n.lat+f))}adjustAntiMeridian(){const n=new o.S(this._sw.lng,this._sw.lat),l=new o.S(this._ne.lng,this._ne.lat);return new jt(n,n.lng>l.lng?new o.S(l.lng+360,l.lat):l)}}class vr{constructor(n,l,f){this.bounds=jt.convert(this.validateBounds(n)),this.minzoom=l||0,this.maxzoom=f||24}validateBounds(n){return Array.isArray(n)&&n.length===4?[Math.max(-180,n[0]),Math.max(-90,n[1]),Math.min(180,n[2]),Math.min(90,n[3])]:[-180,-90,180,90]}contains(n){const l=Math.pow(2,n.z),f=Math.floor(o.V(this.bounds.getWest())*l),p=Math.floor(o.U(this.bounds.getNorth())*l),_=Math.ceil(o.V(this.bounds.getEast())*l),S=Math.ceil(o.U(this.bounds.getSouth())*l);return n.x>=f&&n.x<_&&n.y>=p&&n.y<S}}class Ft extends o.E{constructor(n,l,f,p){if(super(),this.id=n,this.dispatcher=f,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,o.e(this,o.Q(l,["url","scheme","tileSize","promoteId"])),this._options=o.e({type:"vector"},l),this._collectResourceTiming=l.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(p)}load(){return o._(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new o.l("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{const n=yield $t(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,this.map.style.sourceCaches[this.id].clearTiles(),n&&(o.e(this,n),n.bounds&&(this.tileBounds=new vr(n.bounds,this.minzoom,this.maxzoom)),this.fire(new o.l("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new o.l("data",{dataType:"source",sourceDataType:"content"})))}catch(n){this._tileJSONRequest=null,this.fire(new o.k(n))}})}loaded(){return this._loaded}hasTile(n){return!this.tileBounds||this.tileBounds.contains(n.canonical)}onAdd(n){this.map=n,this.load()}setSourceProperty(n){this._tileJSONRequest&&this._tileJSONRequest.abort(),n(),this.load()}setTiles(n){return this.setSourceProperty(()=>{this._options.tiles=n}),this}setUrl(n){return this.setSourceProperty(()=>{this.url=n,this._options.url=n}),this}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}serialize(){return o.e({},this._options)}loadTile(n){return o._(this,void 0,void 0,function*(){const l=n.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),f={request:this.map._requestManager.transformRequest(l,"Tile"),uid:n.uid,tileID:n.tileID,zoom:n.tileID.overscaledZ,tileSize:this.tileSize*n.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,subdivisionGranularity:this.map.style.projection.subdivisionGranularity,globalState:this.map.getGlobalState()};f.request.collectResourceTiming=this._collectResourceTiming;let p="RT";if(n.actor&&n.state!=="expired"){if(n.state==="loading")return new Promise((_,S)=>{n.reloadPromise={resolve:_,reject:S}})}else n.actor=this.dispatcher.getActor(),p="LT";n.abortController=new AbortController;try{const _=yield n.actor.sendAsync({type:p,data:f},n.abortController);if(delete n.abortController,n.aborted)return;this._afterTileLoadWorkerResponse(n,_)}catch(_){if(delete n.abortController,n.aborted)return;if(_&&_.status!==404)throw _;this._afterTileLoadWorkerResponse(n,null)}})}_afterTileLoadWorkerResponse(n,l){if(l&&l.resourceTiming&&(n.resourceTiming=l.resourceTiming),l&&this.map._refreshExpiredTiles&&n.setExpiryData(l),n.loadVectorData(l,this.map.painter),n.reloadPromise){const f=n.reloadPromise;n.reloadPromise=null,this.loadTile(n).then(f.resolve).catch(f.reject)}}abortTile(n){return o._(this,void 0,void 0,function*(){n.abortController&&(n.abortController.abort(),delete n.abortController),n.actor&&(yield n.actor.sendAsync({type:"AT",data:{uid:n.uid,type:this.type,source:this.id}}))})}unloadTile(n){return o._(this,void 0,void 0,function*(){n.unloadVectorData(),n.actor&&(yield n.actor.sendAsync({type:"RMT",data:{uid:n.uid,type:this.type,source:this.id}}))})}hasTransition(){return!1}}class Ge extends o.E{constructor(n,l,f,p){super(),this.id=n,this.dispatcher=f,this.setEventedParent(p),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=o.e({type:"raster"},l),o.e(this,o.Q(l,["url","scheme","tileSize"]))}load(){return o._(this,arguments,void 0,function*(n=!1){this._loaded=!1,this.fire(new o.l("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{const l=yield $t(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,l&&(o.e(this,l),l.bounds&&(this.tileBounds=new vr(l.bounds,this.minzoom,this.maxzoom)),this.fire(new o.l("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new o.l("data",{dataType:"source",sourceDataType:"content",sourceDataChanged:n})))}catch(l){this._tileJSONRequest=null,this.fire(new o.k(l))}})}loaded(){return this._loaded}onAdd(n){this.map=n,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}setSourceProperty(n){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null),n(),this.load(!0)}setTiles(n){return this.setSourceProperty(()=>{this._options.tiles=n}),this}setUrl(n){return this.setSourceProperty(()=>{this.url=n,this._options.url=n}),this}serialize(){return o.e({},this._options)}hasTile(n){return!this.tileBounds||this.tileBounds.contains(n.canonical)}loadTile(n){return o._(this,void 0,void 0,function*(){const l=n.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);n.abortController=new AbortController;try{const f=yield W.getImage(this.map._requestManager.transformRequest(l,"Tile"),n.abortController,this.map._refreshExpiredTiles);if(delete n.abortController,n.aborted)return void(n.state="unloaded");if(f&&f.data){this.map._refreshExpiredTiles&&(f.cacheControl||f.expires)&&n.setExpiryData({cacheControl:f.cacheControl,expires:f.expires});const p=this.map.painter.context,_=p.gl,S=f.data;n.texture=this.map.painter.getTileTexture(S.width),n.texture?n.texture.update(S,{useMipmap:!0}):(n.texture=new o.T(p,S,_.RGBA,{useMipmap:!0}),n.texture.bind(_.LINEAR,_.CLAMP_TO_EDGE,_.LINEAR_MIPMAP_NEAREST)),n.state="loaded"}}catch(f){if(delete n.abortController,n.aborted)n.state="unloaded";else if(f)throw n.state="errored",f}})}abortTile(n){return o._(this,void 0,void 0,function*(){n.abortController&&(n.abortController.abort(),delete n.abortController)})}unloadTile(n){return o._(this,void 0,void 0,function*(){n.texture&&this.map.painter.saveTileTexture(n.texture)})}hasTransition(){return!1}}class Cr extends Ge{constructor(n,l,f,p){super(n,l,f,p),this.type="raster-dem",this.maxzoom=22,this._options=o.e({type:"raster-dem"},l),this.encoding=l.encoding||"mapbox",this.redFactor=l.redFactor,this.greenFactor=l.greenFactor,this.blueFactor=l.blueFactor,this.baseShift=l.baseShift}loadTile(n){return o._(this,void 0,void 0,function*(){const l=n.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),f=this.map._requestManager.transformRequest(l,"Tile");n.neighboringTiles=this._getNeighboringTiles(n.tileID),n.abortController=new AbortController;try{const p=yield W.getImage(f,n.abortController,this.map._refreshExpiredTiles);if(delete n.abortController,n.aborted)return void(n.state="unloaded");if(p&&p.data){const _=p.data;this.map._refreshExpiredTiles&&(p.cacheControl||p.expires)&&n.setExpiryData({cacheControl:p.cacheControl,expires:p.expires});const S=o.b(_)&&o.W()?_:yield this.readImageNow(_),P={type:this.type,uid:n.uid,source:this.id,rawImageData:S,encoding:this.encoding,redFactor:this.redFactor,greenFactor:this.greenFactor,blueFactor:this.blueFactor,baseShift:this.baseShift};if(!n.actor||n.state==="expired"){n.actor=this.dispatcher.getActor();const M=yield n.actor.sendAsync({type:"LDT",data:P});n.dem=M,n.needsHillshadePrepare=!0,n.needsTerrainPrepare=!0,n.state="loaded"}}}catch(p){if(delete n.abortController,n.aborted)n.state="unloaded";else if(p)throw n.state="errored",p}})}readImageNow(n){return o._(this,void 0,void 0,function*(){if(typeof VideoFrame<"u"&&o.X()){const l=n.width+2,f=n.height+2;try{return new o.R({width:l,height:f},yield o.Y(n,-1,-1,l,f))}catch{}}return F.getImageData(n,1)})}_getNeighboringTiles(n){const l=n.canonical,f=Math.pow(2,l.z),p=(l.x-1+f)%f,_=l.x===0?n.wrap-1:n.wrap,S=(l.x+1+f)%f,P=l.x+1===f?n.wrap+1:n.wrap,M={};return M[new o.Z(n.overscaledZ,_,l.z,p,l.y).key]={backfilled:!1},M[new o.Z(n.overscaledZ,P,l.z,S,l.y).key]={backfilled:!1},l.y>0&&(M[new o.Z(n.overscaledZ,_,l.z,p,l.y-1).key]={backfilled:!1},M[new o.Z(n.overscaledZ,n.wrap,l.z,l.x,l.y-1).key]={backfilled:!1},M[new o.Z(n.overscaledZ,P,l.z,S,l.y-1).key]={backfilled:!1}),l.y+1<f&&(M[new o.Z(n.overscaledZ,_,l.z,p,l.y+1).key]={backfilled:!1},M[new o.Z(n.overscaledZ,n.wrap,l.z,l.x,l.y+1).key]={backfilled:!1},M[new o.Z(n.overscaledZ,P,l.z,S,l.y+1).key]={backfilled:!1}),M}unloadTile(n){return o._(this,void 0,void 0,function*(){n.demTexture&&this.map.painter.saveTileTexture(n.demTexture),n.fbo&&(n.fbo.destroy(),delete n.fbo),n.dem&&delete n.dem,delete n.neighboringTiles,n.state="unloaded",n.actor&&(yield n.actor.sendAsync({type:"RDT",data:{type:this.type,uid:n.uid,source:this.id}}))})}}class pr extends o.E{constructor(n,l,f,p){super(),this.id=n,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._pendingLoads=0,this.actor=f.getActor(),this.setEventedParent(p),this._data=l.data,this._options=o.e({},l),this._collectResourceTiming=l.collectResourceTiming,l.maxzoom!==void 0&&(this.maxzoom=l.maxzoom),l.type&&(this.type=l.type),l.attribution&&(this.attribution=l.attribution),this.promoteId=l.promoteId,l.clusterMaxZoom!==void 0&&this.maxzoom<=l.clusterMaxZoom&&o.w(`The maxzoom value "${this.maxzoom}" is expected to be greater than the clusterMaxZoom value "${l.clusterMaxZoom}".`),this.workerOptions=o.e({source:this.id,cluster:l.cluster||!1,geojsonVtOptions:{buffer:this._pixelsToTileUnits(l.buffer!==void 0?l.buffer:128),tolerance:this._pixelsToTileUnits(l.tolerance!==void 0?l.tolerance:.375),extent:o.$,maxZoom:this.maxzoom,lineMetrics:l.lineMetrics||!1,generateId:l.generateId||!1},superclusterOptions:{maxZoom:this._getClusterMaxZoom(l.clusterMaxZoom),minPoints:Math.max(2,l.clusterMinPoints||2),extent:o.$,radius:this._pixelsToTileUnits(l.clusterRadius||50),log:!1,generateId:l.generateId||!1},clusterProperties:l.clusterProperties,filter:l.filter},l.workerOptions),typeof this.promoteId=="string"&&(this.workerOptions.promoteId=this.promoteId)}_pixelsToTileUnits(n){return n*(o.$/this.tileSize)}_getClusterMaxZoom(n){const l=n?Math.round(n):this.maxzoom-1;return Number.isInteger(n)||n===void 0||o.w(`Integer expected for option 'clusterMaxZoom': provided value "${n}" rounded to "${l}"`),l}load(){return o._(this,void 0,void 0,function*(){yield this._updateWorkerData()})}onAdd(n){this.map=n,this.load()}setData(n){return this._data=n,this._updateWorkerData(),this}updateData(n){return this._updateWorkerData(n),this}getData(){return o._(this,void 0,void 0,function*(){const n=o.e({type:this.type},this.workerOptions);return this.actor.sendAsync({type:"GD",data:n})})}getCoordinatesFromGeometry(n){return n.type==="GeometryCollection"?n.geometries.map(l=>l.coordinates).flat(1/0):n.coordinates.flat(1/0)}getBounds(){return o._(this,void 0,void 0,function*(){const n=new jt,l=yield this.getData();let f;switch(l.type){case"FeatureCollection":f=l.features.map(p=>this.getCoordinatesFromGeometry(p.geometry)).flat(1/0);break;case"Feature":f=this.getCoordinatesFromGeometry(l.geometry);break;default:f=this.getCoordinatesFromGeometry(l)}if(f.length==0)return n;for(let p=0;p<f.length-1;p+=2)n.extend([f[p],f[p+1]]);return n})}setClusterOptions(n){return this.workerOptions.cluster=n.cluster,n&&(n.clusterRadius!==void 0&&(this.workerOptions.superclusterOptions.radius=this._pixelsToTileUnits(n.clusterRadius)),n.clusterMaxZoom!==void 0&&(this.workerOptions.superclusterOptions.maxZoom=this._getClusterMaxZoom(n.clusterMaxZoom))),this._updateWorkerData(),this}getClusterExpansionZoom(n){return this.actor.sendAsync({type:"GCEZ",data:{type:this.type,clusterId:n,source:this.id}})}getClusterChildren(n){return this.actor.sendAsync({type:"GCC",data:{type:this.type,clusterId:n,source:this.id}})}getClusterLeaves(n,l,f){return this.actor.sendAsync({type:"GCL",data:{type:this.type,source:this.id,clusterId:n,limit:l,offset:f}})}_updateWorkerData(n){return o._(this,void 0,void 0,function*(){const l=o.e({type:this.type},this.workerOptions);n?l.dataDiff=n:typeof this._data=="string"?(l.request=this.map._requestManager.transformRequest(F.resolveURL(this._data),"Source"),l.request.collectResourceTiming=this._collectResourceTiming):l.data=JSON.stringify(this._data),this._pendingLoads++,this.fire(new o.l("dataloading",{dataType:"source"}));try{const f=yield this.actor.sendAsync({type:"LD",data:l});if(this._pendingLoads--,this._removed||f.abandoned)return void this.fire(new o.l("dataabort",{dataType:"source"}));let p=null;f.resourceTiming&&f.resourceTiming[this.id]&&(p=f.resourceTiming[this.id].slice(0));const _={dataType:"source"};this._collectResourceTiming&&p&&p.length>0&&o.e(_,{resourceTiming:p}),this.fire(new o.l("data",Object.assign(Object.assign({},_),{sourceDataType:"metadata"}))),this.fire(new o.l("data",Object.assign(Object.assign({},_),{sourceDataType:"content"})))}catch(f){if(this._pendingLoads--,this._removed)return void this.fire(new o.l("dataabort",{dataType:"source"}));this.fire(new o.k(f))}})}loaded(){return this._pendingLoads===0}loadTile(n){return o._(this,void 0,void 0,function*(){const l=n.actor?"RT":"LT";n.actor=this.actor;const f={type:this.type,uid:n.uid,tileID:n.tileID,zoom:n.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,subdivisionGranularity:this.map.style.projection.subdivisionGranularity,globalState:this.map.getGlobalState()};n.abortController=new AbortController;const p=yield this.actor.sendAsync({type:l,data:f},n.abortController);delete n.abortController,n.unloadVectorData(),n.aborted||n.loadVectorData(p,this.map.painter,l==="RT")})}abortTile(n){return o._(this,void 0,void 0,function*(){n.abortController&&(n.abortController.abort(),delete n.abortController),n.aborted=!0})}unloadTile(n){return o._(this,void 0,void 0,function*(){n.unloadVectorData(),yield this.actor.sendAsync({type:"RMT",data:{uid:n.uid,type:this.type,source:this.id}})})}onRemove(){this._removed=!0,this.actor.sendAsync({type:"RS",data:{type:this.type,source:this.id}})}serialize(){return o.e({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}}class Kt extends o.E{constructor(n,l,f,p){super(),this.flippedWindingOrder=!1,this.id=n,this.dispatcher=f,this.coordinates=l.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(p),this.options=l}load(n){return o._(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new o.l("dataloading",{dataType:"source"})),this.url=this.options.url,this._request=new AbortController;try{const l=yield W.getImage(this.map._requestManager.transformRequest(this.url,"Image"),this._request);this._request=null,this._loaded=!0,l&&l.data&&(this.image=l.data,n&&(this.coordinates=n),this._finishLoading())}catch(l){this._request=null,this._loaded=!0,this.fire(new o.k(l))}})}loaded(){return this._loaded}updateImage(n){return n.url?(this._request&&(this._request.abort(),this._request=null),this.options.url=n.url,this.load(n.coordinates).finally(()=>{this.texture=null}),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new o.l("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(n){this.map=n,this.load()}onRemove(){this._request&&(this._request.abort(),this._request=null)}setCoordinates(n){this.coordinates=n;const l=n.map(o.a0.fromLngLat);var f;return this.tileID=function(p){const _=o.a1.fromPoints(p),S=_.width(),P=_.height(),M=Math.max(S,P),z=Math.max(0,Math.floor(-Math.log(M)/Math.LN2)),K=Math.pow(2,z);return new o.a3(z,Math.floor((_.minX+_.maxX)/2*K),Math.floor((_.minY+_.maxY)/2*K))}(l),this.terrainTileRanges=this._getOverlappingTileRanges(l),this.minzoom=this.maxzoom=this.tileID.z,this.tileCoords=l.map(p=>this.tileID.getTilePoint(p)._round()),this.flippedWindingOrder=((f=this.tileCoords)[1].x-f[0].x)*(f[2].y-f[0].y)-(f[1].y-f[0].y)*(f[2].x-f[0].x)<0,this.fire(new o.l("data",{dataType:"source",sourceDataType:"content"})),this}prepare(){if(Object.keys(this.tiles).length===0||!this.image)return;const n=this.map.painter.context,l=n.gl;this.texture||(this.texture=new o.T(n,this.image,l.RGBA),this.texture.bind(l.LINEAR,l.CLAMP_TO_EDGE));let f=!1;for(const p in this.tiles){const _=this.tiles[p];_.state!=="loaded"&&(_.state="loaded",_.texture=this.texture,f=!0)}f&&this.fire(new o.l("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}loadTile(n){return o._(this,void 0,void 0,function*(){this.tileID&&this.tileID.equals(n.tileID.canonical)?(this.tiles[String(n.tileID.wrap)]=n,n.buckets={}):n.state="errored"})}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}_getOverlappingTileRanges(n){const{minX:l,minY:f,maxX:p,maxY:_}=o.a1.fromPoints(n),S={};for(let P=0;P<=o.a2;P++){const M=Math.pow(2,P),z=Math.floor(l*M),K=Math.floor(f*M),Z=Math.floor(p*M),$=Math.floor(_*M);S[P]={minTileX:z,minTileY:K,maxTileX:Z,maxTileY:$}}return S}}class ar extends Kt{constructor(n,l,f,p){super(n,l,f,p),this.roundZoom=!0,this.type="video",this.options=l}load(){return o._(this,void 0,void 0,function*(){this._loaded=!1;const n=this.options;this.urls=[];for(const l of n.urls)this.urls.push(this.map._requestManager.transformRequest(l,"Source").url);try{const l=yield o.a4(this.urls);if(this._loaded=!0,!l)return;this.video=l,this.video.loop=!0,this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading()}catch(l){this.fire(new o.k(l))}})}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(n){if(this.video){const l=this.video.seekable;n<l.start(0)||n>l.end(0)?this.fire(new o.k(new o.a5(`sources.${this.id}`,null,`Playback for this video can be set only between the ${l.start(0)} and ${l.end(0)}-second mark.`))):this.video.currentTime=n}}getVideo(){return this.video}onAdd(n){this.map||(this.map=n,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;const n=this.map.painter.context,l=n.gl;this.texture?this.video.paused||(this.texture.bind(l.LINEAR,l.CLAMP_TO_EDGE),l.texSubImage2D(l.TEXTURE_2D,0,0,0,l.RGBA,l.UNSIGNED_BYTE,this.video)):(this.texture=new o.T(n,this.video,l.RGBA),this.texture.bind(l.LINEAR,l.CLAMP_TO_EDGE));let f=!1;for(const p in this.tiles){const _=this.tiles[p];_.state!=="loaded"&&(_.state="loaded",_.texture=this.texture,f=!0)}f&&this.fire(new o.l("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}}class lr extends Kt{constructor(n,l,f,p){super(n,l,f,p),l.coordinates?Array.isArray(l.coordinates)&&l.coordinates.length===4&&!l.coordinates.some(_=>!Array.isArray(_)||_.length!==2||_.some(S=>typeof S!="number"))||this.fire(new o.k(new o.a5(`sources.${n}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new o.k(new o.a5(`sources.${n}`,null,'missing required property "coordinates"'))),l.animate&&typeof l.animate!="boolean"&&this.fire(new o.k(new o.a5(`sources.${n}`,null,'optional "animate" property must be a boolean value'))),l.canvas?typeof l.canvas=="string"||l.canvas instanceof HTMLCanvasElement||this.fire(new o.k(new o.a5(`sources.${n}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new o.k(new o.a5(`sources.${n}`,null,'missing required property "canvas"'))),this.options=l,this.animate=l.animate===void 0||l.animate}load(){return o._(this,void 0,void 0,function*(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new o.k(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())})}getCanvas(){return this.canvas}onAdd(n){this.map=n,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let n=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,n=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,n=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;const l=this.map.painter.context,f=l.gl;this.texture?(n||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new o.T(l,this.canvas,f.RGBA,{premultiply:!0});let p=!1;for(const _ in this.tiles){const S=this.tiles[_];S.state!=="loaded"&&(S.state="loaded",S.texture=this.texture,p=!0)}p&&this.fire(new o.l("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const n of[this.canvas.width,this.canvas.height])if(isNaN(n)||n<=0)return!0;return!1}}const cr={},br=v=>{switch(v){case"geojson":return pr;case"image":return Kt;case"raster":return Ge;case"raster-dem":return Cr;case"vector":return Ft;case"video":return ar;case"canvas":return lr}return cr[v]},Dr="RTLPluginLoaded";class Kr extends o.E{constructor(){super(...arguments),this.status="unavailable",this.url=null,this.dispatcher=Xe()}_syncState(n){return this.status=n,this.dispatcher.broadcast("SRPS",{pluginStatus:n,pluginURL:this.url}).catch(l=>{throw this.status="error",l})}getRTLTextPluginStatus(){return this.status}clearRTLTextPlugin(){this.status="unavailable",this.url=null}setRTLTextPlugin(n){return o._(this,arguments,void 0,function*(l,f=!1){if(this.url)throw new Error("setRTLTextPlugin cannot be called multiple times.");if(this.url=F.resolveURL(l),!this.url)throw new Error(`requested url ${l} is invalid`);if(this.status==="unavailable"){if(!f)return this._requestImport();this.status="deferred",this._syncState(this.status)}else if(this.status==="requested")return this._requestImport()})}_requestImport(){return o._(this,void 0,void 0,function*(){yield this._syncState("loading"),this.status="loaded",this.fire(new o.l(Dr))})}lazyLoad(){this.status==="unavailable"?this.status="requested":this.status==="deferred"&&this._requestImport()}}let Lr=null;function Hr(){return Lr||(Lr=new Kr),Lr}class un{constructor(n,l){this.timeAdded=0,this.fadeEndTime=0,this.tileID=n,this.uid=o.a6(),this.uses=0,this.tileSize=l,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.rtt=[],this.rttCoords={},this.expiredRequestCount=0,this.state="loading"}registerFadeDuration(n){const l=n+this.timeAdded;l<this.fadeEndTime||(this.fadeEndTime=l)}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}clearTextures(n){this.demTexture&&n.saveTileTexture(this.demTexture),this.demTexture=null}loadVectorData(n,l,f){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",n){n.featureIndex&&(this.latestFeatureIndex=n.featureIndex,n.rawTileData?(this.latestRawTileData=n.rawTileData,this.latestFeatureIndex.rawTileData=n.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=n.collisionBoxArray,this.buckets=function(p,_){const S={};if(!_)return S;for(const P of p){const M=P.layerIds.map(z=>_.getLayer(z)).filter(Boolean);if(M.length!==0){P.layers=M,P.stateDependentLayerIds&&(P.stateDependentLayers=P.stateDependentLayerIds.map(z=>M.filter(K=>K.id===z)[0]));for(const z of M)S[z.id]=P}}return S}(n.buckets,l==null?void 0:l.style),this.hasSymbolBuckets=!1;for(const p in this.buckets){const _=this.buckets[p];if(_ instanceof o.a8){if(this.hasSymbolBuckets=!0,!f)break;_.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const p in this.buckets){const _=this.buckets[p];if(_ instanceof o.a8&&_.hasRTLText){this.hasRTLText=!0,Hr().lazyLoad();break}}this.queryPadding=0;for(const p in this.buckets){const _=this.buckets[p];this.queryPadding=Math.max(this.queryPadding,l.style.getLayer(p).queryRadius(_))}n.imageAtlas&&(this.imageAtlas=n.imageAtlas),n.glyphAtlasImage&&(this.glyphAtlasImage=n.glyphAtlasImage)}else this.collisionBoxArray=new o.a7}unloadVectorData(){for(const n in this.buckets)this.buckets[n].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"}getBucket(n){return this.buckets[n.id]}upload(n){for(const f in this.buckets){const p=this.buckets[f];p.uploadPending()&&p.upload(n)}const l=n.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new o.T(n,this.imageAtlas.image,l.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new o.T(n,this.glyphAtlasImage,l.ALPHA),this.glyphAtlasImage=null)}prepare(n){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(n,this.imageAtlasTexture)}queryRenderedFeatures(n,l,f,p,_,S,P,M,z,K,Z){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:p,cameraQueryGeometry:_,scale:S,tileSize:this.tileSize,pixelPosMatrix:K,transform:M,params:P,queryPadding:this.queryPadding*z,getElevation:Z},n,l,f):{}}querySourceFeatures(n,l){const f=this.latestFeatureIndex;if(!f||!f.rawTileData)return;const p=f.loadVTLayers(),_=l&&l.sourceLayer?l.sourceLayer:"",S=p._geojsonTileLayer||p[_];if(!S)return;const P=o.a9(l&&l.filter),{z:M,x:z,y:K}=this.tileID.canonical,Z={z:M,x:z,y:K};for(let $=0;$<S.length;$++){const Y=S.feature($);if(P.needGeometry){const Ee=o.aa(Y,!0);if(!P.filter(new o.F(this.tileID.overscaledZ),Ee,this.tileID.canonical))continue}else if(!P.filter(new o.F(this.tileID.overscaledZ),Y))continue;const he=f.getId(Y,_),Ie=new o.ab(Y,M,z,K,he);Ie.tile=Z,n.push(Ie)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(n){const l=this.expirationTime;if(n.cacheControl){const f=o.ac(n.cacheControl);f["max-age"]&&(this.expirationTime=Date.now()+1e3*f["max-age"])}else n.expires&&(this.expirationTime=new Date(n.expires).getTime());if(this.expirationTime){const f=Date.now();let p=!1;if(this.expirationTime>f)p=!1;else if(l)if(this.expirationTime<l)p=!0;else{const _=this.expirationTime-l;_?this.expirationTime=f+Math.max(_,3e4):p=!0}else p=!0;p?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(n,l){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(n).length===0)return;const f=this.latestFeatureIndex.loadVTLayers();for(const p in this.buckets){if(!l.style.hasLayer(p))continue;const _=this.buckets[p],S=_.layers[0].sourceLayer||"_geojsonTileLayer",P=f[S],M=n[S];if(!P||!M||Object.keys(M).length===0)continue;_.update(M,P,this.imageAtlas&&this.imageAtlas.patternPositions||{});const z=l&&l.style&&l.style.getLayer(p);z&&(this.queryPadding=Math.max(this.queryPadding,z.queryRadius(_)))}}holdingForFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<F.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(n){this.symbolFadeHoldUntil=F.now()+n}setDependencies(n,l){const f={};for(const p of l)f[p]=!0;this.dependencies[n]=f}hasDependency(n,l){for(const f of n){const p=this.dependencies[f];if(p){for(const _ of l)if(p[_])return!0}}return!1}}class zr{constructor(n,l){this.max=n,this.onRemove=l,this.reset()}reset(){for(const n in this.data)for(const l of this.data[n])l.timeout&&clearTimeout(l.timeout),this.onRemove(l.value);return this.data={},this.order=[],this}add(n,l,f){const p=n.wrapped().key;this.data[p]===void 0&&(this.data[p]=[]);const _={value:l,timeout:void 0};if(f!==void 0&&(_.timeout=setTimeout(()=>{this.remove(n,_)},f)),this.data[p].push(_),this.order.push(p),this.order.length>this.max){const S=this._getAndRemoveByKey(this.order[0]);S&&this.onRemove(S)}return this}has(n){return n.wrapped().key in this.data}getAndRemove(n){return this.has(n)?this._getAndRemoveByKey(n.wrapped().key):null}_getAndRemoveByKey(n){const l=this.data[n].shift();return l.timeout&&clearTimeout(l.timeout),this.data[n].length===0&&delete this.data[n],this.order.splice(this.order.indexOf(n),1),l.value}getByKey(n){const l=this.data[n];return l?l[0].value:null}get(n){return this.has(n)?this.data[n.wrapped().key][0].value:null}remove(n,l){if(!this.has(n))return this;const f=n.wrapped().key,p=l===void 0?0:this.data[f].indexOf(l),_=this.data[f][p];return this.data[f].splice(p,1),_.timeout&&clearTimeout(_.timeout),this.data[f].length===0&&delete this.data[f],this.onRemove(_.value),this.order.splice(this.order.indexOf(f),1),this}setMaxSize(n){for(this.max=n;this.order.length>this.max;){const l=this._getAndRemoveByKey(this.order[0]);l&&this.onRemove(l)}return this}filter(n){const l=[];for(const f in this.data)for(const p of this.data[f])n(p.value)||l.push(p);for(const f of l)this.remove(f.value.tileID,f)}}class Yr{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(n,l,f){const p=String(l);if(this.stateChanges[n]=this.stateChanges[n]||{},this.stateChanges[n][p]=this.stateChanges[n][p]||{},o.e(this.stateChanges[n][p],f),this.deletedStates[n]===null){this.deletedStates[n]={};for(const _ in this.state[n])_!==p&&(this.deletedStates[n][_]=null)}else if(this.deletedStates[n]&&this.deletedStates[n][p]===null){this.deletedStates[n][p]={};for(const _ in this.state[n][p])f[_]||(this.deletedStates[n][p][_]=null)}else for(const _ in f)this.deletedStates[n]&&this.deletedStates[n][p]&&this.deletedStates[n][p][_]===null&&delete this.deletedStates[n][p][_]}removeFeatureState(n,l,f){if(this.deletedStates[n]===null)return;const p=String(l);if(this.deletedStates[n]=this.deletedStates[n]||{},f&&l!==void 0)this.deletedStates[n][p]!==null&&(this.deletedStates[n][p]=this.deletedStates[n][p]||{},this.deletedStates[n][p][f]=null);else if(l!==void 0)if(this.stateChanges[n]&&this.stateChanges[n][p])for(f in this.deletedStates[n][p]={},this.stateChanges[n][p])this.deletedStates[n][p][f]=null;else this.deletedStates[n][p]=null;else this.deletedStates[n]=null}getState(n,l){const f=String(l),p=o.e({},(this.state[n]||{})[f],(this.stateChanges[n]||{})[f]);if(this.deletedStates[n]===null)return{};if(this.deletedStates[n]){const _=this.deletedStates[n][l];if(_===null)return{};for(const S in _)delete p[S]}return p}initializeTileState(n,l){n.setFeatureState(this.state,l)}coalesceChanges(n,l){const f={};for(const p in this.stateChanges){this.state[p]=this.state[p]||{};const _={};for(const S in this.stateChanges[p])this.state[p][S]||(this.state[p][S]={}),o.e(this.state[p][S],this.stateChanges[p][S]),_[S]=this.state[p][S];f[p]=_}for(const p in this.deletedStates){this.state[p]=this.state[p]||{};const _={};if(this.deletedStates[p]===null)for(const S in this.state[p])_[S]={},this.state[p][S]={};else for(const S in this.deletedStates[p]){if(this.deletedStates[p][S]===null)this.state[p][S]={};else for(const P of Object.keys(this.deletedStates[p][S]))delete this.state[p][S][P];_[S]=this.state[p][S]}f[p]=f[p]||{},o.e(f[p],_)}if(this.stateChanges={},this.deletedStates={},Object.keys(f).length!==0)for(const p in n)n[p].setFeatureState(f,l)}}const ur=89.25;function ct(v,n){const l=o.ag(n.lat,-o.ah,o.ah);return new o.P(o.V(n.lng)*v,o.U(l)*v)}function Ae(v,n){return new o.a0(n.x/v,n.y/v).toLngLat()}function me(v){return v.cameraToCenterDistance*Math.min(.85*Math.tan(o.ad(90-v.pitch)),Math.tan(o.ad(ur-v.pitch)))}function _e(v,n){const l=v.canonical,f=n/o.ae(l.z),p=l.x+Math.pow(2,l.z)*v.wrap,_=o.af(new Float64Array(16));return o.M(_,_,[p*f,l.y*f,0]),o.N(_,_,[f/o.$,f/o.$,1]),_}function Ne(v,n,l,f,p){const _=o.a0.fromLngLat(v,n),S=p*o.ai(1,v.lat),P=S*Math.cos(o.ad(l)),M=Math.sqrt(S*S-P*P),z=M*Math.sin(o.ad(-f)),K=M*Math.cos(o.ad(-f));return new o.a0(_.x+z,_.y+K,_.z+P)}function et(v,n,l){const f=n.intersectsFrustum(v);if(!l||f===0)return f;const p=n.intersectsPlane(l);return p===0?0:f===2&&p===2?2:1}function tt(v,n,l){let f=0;const p=(l-n)/10;for(let _=0;_<10;_++)f+=p*Math.pow(Math.cos(n+(_+.5)/10*(l-n)),v);return f}function yt(v,n){return function(l,f,p,_,S){const P=2*((v-1)/o.aj(Math.cos(o.ad(ur-S))/Math.cos(o.ad(ur)))-1),M=Math.acos(p/_),z=2*tt(P-1,0,o.ad(S/2)),K=Math.min(o.ad(ur),M+o.ad(S/2)),Z=tt(P-1,Math.min(K,M-o.ad(S/2)),K),$=Math.atan(f/p),Y=Math.hypot(f,p);let he=l;return he+=o.aj(_/Y/Math.max(.5,Math.cos(o.ad(S/2)))),he+=P*o.aj(Math.cos($))/2,he-=o.aj(Math.max(1,Z/z/n))/2,he}}const rt=yt(9.314,3);function It(v,n){const l=(n.roundZoom?Math.round:Math.floor)(v.zoom+o.aj(v.tileSize/n.tileSize));return Math.max(0,l)}function Ct(v,n){const l=v.getCameraFrustum(),f=v.getClippingPlane(),p=v.screenPointToMercatorCoordinate(v.getCameraPoint()),_=o.a0.fromLngLat(v.center,v.elevation);p.z=_.z+Math.cos(v.pitchInRadians)*v.cameraToCenterDistance/v.worldSize;const S=v.getCoveringTilesDetailsProvider(),P=S.allowVariableZoom(v,n),M=It(v,n),z=n.minzoom||0,K=n.maxzoom!==void 0?n.maxzoom:v.maxZoom,Z=Math.min(Math.max(0,M),K),$=Math.pow(2,Z),Y=[$*p.x,$*p.y,0],he=[$*_.x,$*_.y,0],Ie=Math.hypot(_.x-p.x,_.y-p.y),Ee=Math.abs(_.z-p.z),Fe=Math.hypot(Ie,Ee),De=We=>({zoom:0,x:0,y:0,wrap:We,fullyVisible:!1}),Ve=[],Oe=[];if(v.renderWorldCopies&&S.allowWorldCopies())for(let We=1;We<=3;We++)Ve.push(De(-We)),Ve.push(De(We));for(Ve.push(De(0));Ve.length>0;){const We=Ve.pop(),Je=We.x,ze=We.y;let ht=We.fullyVisible;const St={x:Je,y:ze,z:We.zoom},gt=S.getTileBoundingVolume(St,We.wrap,v.elevation,n);if(!ht){const rr=et(l,gt,f);if(rr===0)continue;ht=rr===2}const _t=S.distanceToTile2d(p.x,p.y,St,gt);let xt=M;P&&(xt=(n.calculateTileZoom||rt)(v.zoom+o.aj(v.tileSize/n.tileSize),_t,Ee,Fe,v.fov)),xt=(n.roundZoom?Math.round:Math.floor)(xt),xt=Math.max(0,xt);const ir=Math.min(xt,K);if(We.wrap=S.getWrap(_,St,We.wrap),We.zoom>=ir){if(We.zoom<z)continue;const rr=Z-We.zoom,Qt=Y[0]-.5-(Je<<rr),mr=Y[1]-.5-(ze<<rr),rn=n.reparseOverscaled?Math.max(We.zoom,xt):We.zoom;Oe.push({tileID:new o.Z(We.zoom===K?rn:We.zoom,We.wrap,We.zoom,Je,ze),distanceSq:o.ak([he[0]-.5-Je,he[1]-.5-ze]),tileDistanceToCamera:Math.sqrt(Qt*Qt+mr*mr)})}else for(let rr=0;rr<4;rr++)Ve.push({zoom:We.zoom+1,x:(Je<<1)+rr%2,y:(ze<<1)+(rr>>1),wrap:We.wrap,fullyVisible:ht})}return Oe.sort((We,Je)=>We.distanceSq-Je.distanceSq).map(We=>We.tileID)}const lt=o.a1.fromPoints([new o.P(0,0),new o.P(o.$,o.$)]);class mt extends o.E{constructor(n,l,f){super(),this.id=n,this.dispatcher=f,this.on("data",p=>this._dataHandler(p)),this.on("dataloading",()=>{this._sourceErrored=!1}),this.on("error",()=>{this._sourceErrored=this._source.loaded()}),this._source=((p,_,S,P)=>{const M=new(br(_.type))(p,_,S,P);if(M.id!==p)throw new Error(`Expected Source id to be ${p} instead of ${M.id}`);return M})(n,l,f,this),this._tiles={},this._cache=new zr(0,p=>this._unloadTile(p)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._maxTileCacheZoomLevels=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new Yr,this._didEmitContent=!1,this._updated=!1}onAdd(n){this.map=n,this._maxTileCacheSize=n?n._maxTileCacheSize:null,this._maxTileCacheZoomLevels=n?n._maxTileCacheZoomLevels:null,this._source&&this._source.onAdd&&this._source.onAdd(n)}onRemove(n){this.clearTiles(),this._source&&this._source.onRemove&&this._source.onRemove(n)}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;if(!(this.used===void 0&&this.usedForTerrain===void 0||this.used||this.usedForTerrain))return!0;if(!this._updated)return!1;for(const n in this._tiles){const l=this._tiles[n];if(l.state!=="loaded"&&l.state!=="errored")return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const n=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,n&&this.reload(),this.transform&&this.update(this.transform,this.terrain)}_loadTile(n,l,f){return o._(this,void 0,void 0,function*(){try{yield this._source.loadTile(n),this._tileLoaded(n,l,f)}catch(p){n.state="errored",p.status!==404?this._source.fire(new o.k(p,{tile:n})):this.update(this.transform,this.terrain)}})}_unloadTile(n){this._source.unloadTile&&this._source.unloadTile(n)}_abortTile(n){this._source.abortTile&&this._source.abortTile(n),this._source.fire(new o.l("dataabort",{tile:n,coord:n.tileID,dataType:"source"}))}serialize(){return this._source.serialize()}prepare(n){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const l in this._tiles){const f=this._tiles[l];f.upload(n),f.prepare(this.map.style.imageManager)}}getIds(){return Object.values(this._tiles).map(n=>n.tileID).sort(Me).map(n=>n.key)}getRenderableIds(n){const l=[];for(const f in this._tiles)this._isIdRenderable(f,n)&&l.push(this._tiles[f]);return n?l.sort((f,p)=>{const _=f.tileID,S=p.tileID,P=new o.P(_.canonical.x,_.canonical.y)._rotate(-this.transform.bearingInRadians),M=new o.P(S.canonical.x,S.canonical.y)._rotate(-this.transform.bearingInRadians);return _.overscaledZ-S.overscaledZ||M.y-P.y||M.x-P.x}).map(f=>f.tileID.key):l.map(f=>f.tileID).sort(Me).map(f=>f.key)}hasRenderableParent(n){const l=this.findLoadedParent(n,0);return!!l&&this._isIdRenderable(l.tileID.key)}_isIdRenderable(n,l){return this._tiles[n]&&this._tiles[n].hasData()&&!this._coveredTiles[n]&&(l||!this._tiles[n].holdingForFade())}reload(n){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const l in this._tiles)n?this._reloadTile(l,"expired"):this._tiles[l].state!=="errored"&&this._reloadTile(l,"reloading")}}_reloadTile(n,l){return o._(this,void 0,void 0,function*(){const f=this._tiles[n];f&&(f.state!=="loading"&&(f.state=l),yield this._loadTile(f,n,l))})}_tileLoaded(n,l,f){n.timeAdded=F.now(),f==="expired"&&(n.refreshedUponExpiration=!0),this._setTileReloadTimer(l,n),this.getSource().type==="raster-dem"&&n.dem&&this._backfillDEM(n),this._state.initializeTileState(n,this.map?this.map.painter:null),n.aborted||this._source.fire(new o.l("data",{dataType:"source",tile:n,coord:n.tileID}))}_backfillDEM(n){const l=this.getRenderableIds();for(let p=0;p<l.length;p++){const _=l[p];if(n.neighboringTiles&&n.neighboringTiles[_]){const S=this.getTileByID(_);f(n,S),f(S,n)}}function f(p,_){p.needsHillshadePrepare=!0,p.needsTerrainPrepare=!0;let S=_.tileID.canonical.x-p.tileID.canonical.x;const P=_.tileID.canonical.y-p.tileID.canonical.y,M=Math.pow(2,p.tileID.canonical.z),z=_.tileID.key;S===0&&P===0||Math.abs(P)>1||(Math.abs(S)>1&&(Math.abs(S+M)===1?S+=M:Math.abs(S-M)===1&&(S-=M)),_.dem&&p.dem&&(p.dem.backfillBorder(_.dem,S,P),p.neighboringTiles&&p.neighboringTiles[z]&&(p.neighboringTiles[z].backfilled=!0)))}}getTile(n){return this.getTileByID(n.key)}getTileByID(n){return this._tiles[n]}_retainLoadedChildren(n,l,f,p){for(const _ in this._tiles){let S=this._tiles[_];if(p[_]||!S.hasData()||S.tileID.overscaledZ<=l||S.tileID.overscaledZ>f)continue;let P=S.tileID;for(;S&&S.tileID.overscaledZ>l+1;){const z=S.tileID.scaledTo(S.tileID.overscaledZ-1);S=this._tiles[z.key],S&&S.hasData()&&(P=z)}let M=P;for(;M.overscaledZ>l;)if(M=M.scaledTo(M.overscaledZ-1),n[M.key]||n[M.canonical.key]){p[P.key]=P;break}}}findLoadedParent(n,l){if(n.key in this._loadedParentTiles){const f=this._loadedParentTiles[n.key];return f&&f.tileID.overscaledZ>=l?f:null}for(let f=n.overscaledZ-1;f>=l;f--){const p=n.scaledTo(f),_=this._getLoadedTile(p);if(_)return _}}findLoadedSibling(n){return this._getLoadedTile(n)}_getLoadedTile(n){const l=this._tiles[n.key];return l&&l.hasData()?l:this._cache.getByKey(n.wrapped().key)}updateCacheSize(n){const l=Math.ceil(n.width/this._source.tileSize)+1,f=Math.ceil(n.height/this._source.tileSize)+1,p=Math.floor(l*f*(this._maxTileCacheZoomLevels===null?o.a.MAX_TILE_CACHE_ZOOM_LEVELS:this._maxTileCacheZoomLevels)),_=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,p):p;this._cache.setMaxSize(_)}handleWrapJump(n){const l=Math.round((n-(this._prevLng===void 0?n:this._prevLng))/360);if(this._prevLng=n,l){const f={};for(const p in this._tiles){const _=this._tiles[p];_.tileID=_.tileID.unwrapTo(_.tileID.wrap+l),f[_.tileID.key]=_}this._tiles=f;for(const p in this._timers)clearTimeout(this._timers[p]),delete this._timers[p];for(const p in this._tiles)this._setTileReloadTimer(p,this._tiles[p])}}_updateCoveredAndRetainedTiles(n,l,f,p,_,S){const P={},M={},z=Object.keys(n),K=F.now();for(const Z of z){const $=n[Z],Y=this._tiles[Z];if(!Y||Y.fadeEndTime!==0&&Y.fadeEndTime<=K)continue;const he=this.findLoadedParent($,l),Ie=this.findLoadedSibling($),Ee=he||Ie||null;Ee&&(this._addTile(Ee.tileID),P[Ee.tileID.key]=Ee.tileID),M[Z]=$}this._retainLoadedChildren(M,p,f,n);for(const Z in P)n[Z]||(this._coveredTiles[Z]=!0,n[Z]=P[Z]);if(S){const Z={},$={};for(const Y of _)this._tiles[Y.key].hasData()?Z[Y.key]=Y:$[Y.key]=Y;for(const Y in $){const he=$[Y].children(this._source.maxzoom);this._tiles[he[0].key]&&this._tiles[he[1].key]&&this._tiles[he[2].key]&&this._tiles[he[3].key]&&(Z[he[0].key]=n[he[0].key]=he[0],Z[he[1].key]=n[he[1].key]=he[1],Z[he[2].key]=n[he[2].key]=he[2],Z[he[3].key]=n[he[3].key]=he[3],delete $[Y])}for(const Y in $){const he=$[Y],Ie=this.findLoadedParent(he,this._source.minzoom),Ee=this.findLoadedSibling(he),Fe=Ie||Ee||null;if(Fe){Z[Fe.tileID.key]=n[Fe.tileID.key]=Fe.tileID;for(const De in Z)Z[De].isChildOf(Fe.tileID)&&delete Z[De]}}for(const Y in this._tiles)Z[Y]||(this._coveredTiles[Y]=!0)}}update(n,l){if(!this._sourceLoaded||this._paused)return;let f;this.transform=n,this.terrain=l,this.updateCacheSize(n),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?f=n.getVisibleUnwrappedCoordinates(this._source.tileID).map(K=>new o.Z(K.canonical.z,K.wrap,K.canonical.z,K.canonical.x,K.canonical.y)):(f=Ct(n,{tileSize:this.usedForTerrain?this.tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:!this.usedForTerrain&&this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled,terrain:l,calculateTileZoom:this._source.calculateTileZoom}),this._source.hasTile&&(f=f.filter(K=>this._source.hasTile(K)))):f=[];const p=It(n,this._source),_=Math.max(p-mt.maxOverzooming,this._source.minzoom),S=Math.max(p+mt.maxUnderzooming,this._source.minzoom);if(this.usedForTerrain){const K={};for(const Z of f)if(Z.canonical.z>this._source.minzoom){const $=Z.scaledTo(Z.canonical.z-1);K[$.key]=$;const Y=Z.scaledTo(Math.max(this._source.minzoom,Math.min(Z.canonical.z,5)));K[Y.key]=Y}f=f.concat(Object.values(K))}const P=f.length===0&&!this._updated&&this._didEmitContent;this._updated=!0,P&&this.fire(new o.l("data",{sourceDataType:"idle",dataType:"source",sourceId:this.id}));const M=this._updateRetainedTiles(f,p);Nt(this._source.type)&&this._updateCoveredAndRetainedTiles(M,_,S,p,f,l);for(const K in M)this._tiles[K].clearFadeHold();const z=o.al(this._tiles,M);for(const K of z){const Z=this._tiles[K];Z.hasSymbolBuckets&&!Z.holdingForFade()?Z.setHoldDuration(this.map._fadeDuration):Z.hasSymbolBuckets&&!Z.symbolFadeFinished()||this._removeTile(K)}this._updateLoadedParentTileCache(),this._updateLoadedSiblingTileCache()}releaseSymbolFadeTiles(){for(const n in this._tiles)this._tiles[n].holdingForFade()&&this._removeTile(n)}_updateRetainedTiles(n,l){var f;const p={},_={},S=Math.max(l-mt.maxOverzooming,this._source.minzoom),P=Math.max(l+mt.maxUnderzooming,this._source.minzoom),M={};for(const z of n){const K=this._addTile(z);p[z.key]=z,K.hasData()||l<this._source.maxzoom&&(M[z.key]=z)}this._retainLoadedChildren(M,l,P,p);for(const z of n){let K=this._tiles[z.key];if(K.hasData())continue;if(l+1>this._source.maxzoom){const $=z.children(this._source.maxzoom)[0],Y=this.getTile($);if(Y&&Y.hasData()){p[$.key]=$;continue}}else{const $=z.children(this._source.maxzoom);if(p[$[0].key]&&p[$[1].key]&&p[$[2].key]&&p[$[3].key])continue}let Z=K.wasRequested();for(let $=z.overscaledZ-1;$>=S;--$){const Y=z.scaledTo($);if(_[Y.key])break;if(_[Y.key]=!0,K=this.getTile(Y),!K&&Z&&(K=this._addTile(Y)),K){const he=K.hasData();if((he||!(!((f=this.map)===null||f===void 0)&&f.cancelPendingTileRequestsWhileZooming)||Z)&&(p[Y.key]=Y),Z=K.wasRequested(),he)break}}}return p}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const n in this._tiles){const l=[];let f,p=this._tiles[n].tileID;for(;p.overscaledZ>0;){if(p.key in this._loadedParentTiles){f=this._loadedParentTiles[p.key];break}l.push(p.key);const _=p.scaledTo(p.overscaledZ-1);if(f=this._getLoadedTile(_),f)break;p=_}for(const _ of l)this._loadedParentTiles[_]=f}}_updateLoadedSiblingTileCache(){this._loadedSiblingTiles={};for(const n in this._tiles){const l=this._tiles[n].tileID,f=this._getLoadedTile(l);this._loadedSiblingTiles[l.key]=f}}_addTile(n){let l=this._tiles[n.key];if(l)return l;l=this._cache.getAndRemove(n),l&&(this._setTileReloadTimer(n.key,l),l.tileID=n,this._state.initializeTileState(l,this.map?this.map.painter:null),this._cacheTimers[n.key]&&(clearTimeout(this._cacheTimers[n.key]),delete this._cacheTimers[n.key],this._setTileReloadTimer(n.key,l)));const f=l;return l||(l=new un(n,this._source.tileSize*n.overscaleFactor()),this._loadTile(l,n.key,l.state)),l.uses++,this._tiles[n.key]=l,f||this._source.fire(new o.l("dataloading",{tile:l,coord:l.tileID,dataType:"source"})),l}_setTileReloadTimer(n,l){n in this._timers&&(clearTimeout(this._timers[n]),delete this._timers[n]);const f=l.getExpiryTimeout();f&&(this._timers[n]=setTimeout(()=>{this._reloadTile(n,"expired"),delete this._timers[n]},f))}refreshTiles(n){for(const l in this._tiles)(this._isIdRenderable(l)||this._tiles[l].state=="errored")&&n.some(f=>f.equals(this._tiles[l].tileID.canonical))&&this._reloadTile(l,"expired")}_removeTile(n){const l=this._tiles[n];l&&(l.uses--,delete this._tiles[n],this._timers[n]&&(clearTimeout(this._timers[n]),delete this._timers[n]),l.uses>0||(l.hasData()&&l.state!=="reloading"?this._cache.add(l.tileID,l,l.getExpiryTimeout()):(l.aborted=!0,this._abortTile(l),this._unloadTile(l))))}_dataHandler(n){const l=n.sourceDataType;n.dataType==="source"&&l==="metadata"&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&n.dataType==="source"&&l==="content"&&(this.reload(n.sourceDataChanged),this.transform&&this.update(this.transform,this.terrain),this._didEmitContent=!0)}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const n in this._tiles)this._removeTile(n);this._cache.reset()}tilesIn(n,l,f){const p=[],_=this.transform;if(!_)return p;const S=_.getCoveringTilesDetailsProvider().allowWorldCopies(),P=f?_.getCameraQueryGeometry(n):n,M=Y=>_.screenPointToMercatorCoordinate(Y,this.terrain),z=this.transformBbox(n,M,!S),K=this.transformBbox(P,M,!S),Z=this.getIds(),$=o.a1.fromPoints(K);for(let Y=0;Y<Z.length;Y++){const he=this._tiles[Z[Y]];if(he.holdingForFade())continue;const Ie=S?[he.tileID]:[he.tileID.unwrapTo(-1),he.tileID.unwrapTo(0)],Ee=Math.pow(2,_.zoom-he.tileID.overscaledZ),Fe=l*he.queryPadding*o.$/he.tileSize/Ee;for(const De of Ie){const Ve=$.map(Oe=>De.getTilePoint(new o.a0(Oe.x,Oe.y)));if(Ve.expandBy(Fe),Ve.intersects(lt)){const Oe=z.map(Je=>De.getTilePoint(Je)),We=K.map(Je=>De.getTilePoint(Je));p.push({tile:he,tileID:S?De:De.unwrapTo(0),queryGeometry:Oe,cameraQueryGeometry:We,scale:Ee})}}}return p}transformBbox(n,l,f){let p=n.map(l);if(f){const _=o.a1.fromPoints(n);_.shrinkBy(.001*Math.min(_.width(),_.height()));const S=_.map(l);o.a1.fromPoints(p).covers(S)||(p=p.map(P=>P.x>.5?new o.a0(P.x-1,P.y,P.z):P))}return p}getVisibleCoordinates(n){const l=this.getRenderableIds(n).map(f=>this._tiles[f].tileID);return this.transform&&this.transform.populateCache(l),l}hasTransition(){if(this._source.hasTransition())return!0;if(Nt(this._source.type)){const n=F.now();for(const l in this._tiles)if(this._tiles[l].fadeEndTime>=n)return!0}return!1}setFeatureState(n,l,f){this._state.updateState(n=n||"_geojsonTileLayer",l,f)}removeFeatureState(n,l,f){this._state.removeFeatureState(n=n||"_geojsonTileLayer",l,f)}getFeatureState(n,l){return this._state.getState(n=n||"_geojsonTileLayer",l)}setDependencies(n,l,f){const p=this._tiles[n];p&&p.setDependencies(l,f)}reloadTilesForDependencies(n,l){for(const f in this._tiles)this._tiles[f].hasDependency(n,l)&&this._reloadTile(f,"reloading");this._cache.filter(f=>!f.hasDependency(n,l))}}function Me(v,n){const l=Math.abs(2*v.wrap)-+(v.wrap<0),f=Math.abs(2*n.wrap)-+(n.wrap<0);return v.overscaledZ-n.overscaledZ||f-l||n.canonical.y-v.canonical.y||n.canonical.x-v.canonical.x}function Nt(v){return v==="raster"||v==="image"||v==="video"}mt.maxOverzooming=10,mt.maxUnderzooming=3;class nr{constructor(n,l){this.reset(n,l)}reset(n,l){this.points=n||[],this._distances=[0];for(let f=1;f<this.points.length;f++)this._distances[f]=this._distances[f-1]+this.points[f].dist(this.points[f-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(l||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(n){if(this.points.length===1)return this.points[0];n=o.ag(n,0,1);let l=1,f=this._distances[l];const p=n*this.paddedLength+this.padding;for(;f<p&&l<this._distances.length;)f=this._distances[++l];const _=l-1,S=this._distances[_],P=f-S,M=P>0?(p-S)/P:0;return this.points[_].mult(1-M).add(this.points[l].mult(M))}}function tr(v,n){let l=!0;return v==="always"||v!=="never"&&n!=="never"||(l=!1),l}class Ar{constructor(n,l,f){const p=this.boxCells=[],_=this.circleCells=[];this.xCellCount=Math.ceil(n/f),this.yCellCount=Math.ceil(l/f);for(let S=0;S<this.xCellCount*this.yCellCount;S++)p.push([]),_.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=n,this.height=l,this.xScale=this.xCellCount/n,this.yScale=this.yCellCount/l,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(n,l,f,p,_){this._forEachCell(l,f,p,_,this._insertBoxCell,this.boxUid++),this.boxKeys.push(n),this.bboxes.push(l),this.bboxes.push(f),this.bboxes.push(p),this.bboxes.push(_)}insertCircle(n,l,f,p){this._forEachCell(l-p,f-p,l+p,f+p,this._insertCircleCell,this.circleUid++),this.circleKeys.push(n),this.circles.push(l),this.circles.push(f),this.circles.push(p)}_insertBoxCell(n,l,f,p,_,S){this.boxCells[_].push(S)}_insertCircleCell(n,l,f,p,_,S){this.circleCells[_].push(S)}_query(n,l,f,p,_,S,P){if(f<0||n>this.width||p<0||l>this.height)return[];const M=[];if(n<=0&&l<=0&&this.width<=f&&this.height<=p){if(_)return[{key:null,x1:n,y1:l,x2:f,y2:p}];for(let z=0;z<this.boxKeys.length;z++)M.push({key:this.boxKeys[z],x1:this.bboxes[4*z],y1:this.bboxes[4*z+1],x2:this.bboxes[4*z+2],y2:this.bboxes[4*z+3]});for(let z=0;z<this.circleKeys.length;z++){const K=this.circles[3*z],Z=this.circles[3*z+1],$=this.circles[3*z+2];M.push({key:this.circleKeys[z],x1:K-$,y1:Z-$,x2:K+$,y2:Z+$})}}else this._forEachCell(n,l,f,p,this._queryCell,M,{hitTest:_,overlapMode:S,seenUids:{box:{},circle:{}}},P);return M}query(n,l,f,p){return this._query(n,l,f,p,!1,null)}hitTest(n,l,f,p,_,S){return this._query(n,l,f,p,!0,_,S).length>0}hitTestCircle(n,l,f,p,_){const S=n-f,P=n+f,M=l-f,z=l+f;if(P<0||S>this.width||z<0||M>this.height)return!1;const K=[];return this._forEachCell(S,M,P,z,this._queryCellCircle,K,{hitTest:!0,overlapMode:p,circle:{x:n,y:l,radius:f},seenUids:{box:{},circle:{}}},_),K.length>0}_queryCell(n,l,f,p,_,S,P,M){const{seenUids:z,hitTest:K,overlapMode:Z}=P,$=this.boxCells[_];if($!==null){const he=this.bboxes;for(const Ie of $)if(!z.box[Ie]){z.box[Ie]=!0;const Ee=4*Ie,Fe=this.boxKeys[Ie];if(n<=he[Ee+2]&&l<=he[Ee+3]&&f>=he[Ee+0]&&p>=he[Ee+1]&&(!M||M(Fe))&&(!K||!tr(Z,Fe.overlapMode))&&(S.push({key:Fe,x1:he[Ee],y1:he[Ee+1],x2:he[Ee+2],y2:he[Ee+3]}),K))return!0}}const Y=this.circleCells[_];if(Y!==null){const he=this.circles;for(const Ie of Y)if(!z.circle[Ie]){z.circle[Ie]=!0;const Ee=3*Ie,Fe=this.circleKeys[Ie];if(this._circleAndRectCollide(he[Ee],he[Ee+1],he[Ee+2],n,l,f,p)&&(!M||M(Fe))&&(!K||!tr(Z,Fe.overlapMode))){const De=he[Ee],Ve=he[Ee+1],Oe=he[Ee+2];if(S.push({key:Fe,x1:De-Oe,y1:Ve-Oe,x2:De+Oe,y2:Ve+Oe}),K)return!0}}}return!1}_queryCellCircle(n,l,f,p,_,S,P,M){const{circle:z,seenUids:K,overlapMode:Z}=P,$=this.boxCells[_];if($!==null){const he=this.bboxes;for(const Ie of $)if(!K.box[Ie]){K.box[Ie]=!0;const Ee=4*Ie,Fe=this.boxKeys[Ie];if(this._circleAndRectCollide(z.x,z.y,z.radius,he[Ee+0],he[Ee+1],he[Ee+2],he[Ee+3])&&(!M||M(Fe))&&!tr(Z,Fe.overlapMode))return S.push(!0),!0}}const Y=this.circleCells[_];if(Y!==null){const he=this.circles;for(const Ie of Y)if(!K.circle[Ie]){K.circle[Ie]=!0;const Ee=3*Ie,Fe=this.circleKeys[Ie];if(this._circlesCollide(he[Ee],he[Ee+1],he[Ee+2],z.x,z.y,z.radius)&&(!M||M(Fe))&&!tr(Z,Fe.overlapMode))return S.push(!0),!0}}}_forEachCell(n,l,f,p,_,S,P,M){const z=this._convertToXCellCoord(n),K=this._convertToYCellCoord(l),Z=this._convertToXCellCoord(f),$=this._convertToYCellCoord(p);for(let Y=z;Y<=Z;Y++)for(let he=K;he<=$;he++)if(_.call(this,n,l,f,p,this.xCellCount*he+Y,S,P,M))return}_convertToXCellCoord(n){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(n*this.xScale)))}_convertToYCellCoord(n){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(n*this.yScale)))}_circlesCollide(n,l,f,p,_,S){const P=p-n,M=_-l,z=f+S;return z*z>P*P+M*M}_circleAndRectCollide(n,l,f,p,_,S,P){const M=(S-p)/2,z=Math.abs(n-(p+M));if(z>M+f)return!1;const K=(P-_)/2,Z=Math.abs(l-(_+K));if(Z>K+f)return!1;if(z<=M||Z<=K)return!0;const $=z-M,Y=Z-K;return $*$+Y*Y<=f*f}}function qt(v,n,l){const f=o.L();if(!v){const{vecSouth:Z,vecEast:$}=jr(n),Y=y();Y[0]=$[0],Y[1]=$[1],Y[2]=Z[0],Y[3]=Z[1],p=Y,(K=(S=(_=Y)[0])*(z=_[3])-(M=_[2])*(P=_[1]))&&(p[0]=z*(K=1/K),p[1]=-P*K,p[2]=-M*K,p[3]=S*K),f[0]=Y[0],f[1]=Y[1],f[4]=Y[2],f[5]=Y[3]}var p,_,S,P,M,z,K;return o.N(f,f,[1/l,1/l,1]),f}function Jr(v,n,l,f){if(v){const p=o.L();if(!n){const{vecSouth:_,vecEast:S}=jr(l);p[0]=S[0],p[1]=S[1],p[4]=_[0],p[5]=_[1]}return o.N(p,p,[f,f,1]),p}return l.pixelsToClipSpaceMatrix}function jr(v){const n=Math.cos(v.rollInRadians),l=Math.sin(v.rollInRadians),f=Math.cos(v.pitchInRadians),p=Math.cos(v.bearingInRadians),_=Math.sin(v.bearingInRadians),S=o.aq();S[0]=-p*f*l-_*n,S[1]=-_*f*l+p*n;const P=o.ar(S);P<1e-9?o.as(S):o.at(S,S,1/P);const M=o.aq();M[0]=p*f*n-_*l,M[1]=_*f*n+p*l;const z=o.ar(M);return z<1e-9?o.as(M):o.at(M,M,1/z),{vecEast:M,vecSouth:S}}function Nr(v,n,l,f){let p;f?(p=[v,n,f(v,n),1],o.av(p,p,l)):(p=[v,n,0,1],Ca(p,p,l));const _=p[3];return{point:new o.P(p[0]/_,p[1]/_),signedDistanceFromCamera:_,isOccluded:!1}}function _r(v,n){return .5+v/n*.5}function Ur(v,n){return v.x>=-n[0]&&v.x<=n[0]&&v.y>=-n[1]&&v.y<=n[1]}function Ln(v,n,l,f,p,_,S,P,M,z,K,Z,$){const Y=l?v.textSizeData:v.iconSizeData,he=o.am(Y,n.transform.zoom),Ie=[256/n.width*2+1,256/n.height*2+1],Ee=l?v.text.dynamicLayoutVertexArray:v.icon.dynamicLayoutVertexArray;Ee.clear();const Fe=v.lineVertexArray,De=l?v.text.placedSymbolArray:v.icon.placedSymbolArray,Ve=n.transform.width/n.transform.height;let Oe=!1;for(let We=0;We<De.length;We++){const Je=De.get(We);if(Je.hidden||Je.writingMode===o.an.vertical&&!Oe){Xs(Je.numGlyphs,Ee);continue}Oe=!1;const ze=new o.P(Je.anchorX,Je.anchorY),ht={getElevation:$,pitchedLabelPlaneMatrix:f,lineVertexArray:Fe,pitchWithMap:_,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},transform:n.transform,tileAnchorPoint:ze,unwrappedTileID:M,width:z,height:K,translation:Z},St=Vr(Je.anchorX,Je.anchorY,ht);if(!Ur(St.point,Ie)){Xs(Je.numGlyphs,Ee);continue}const gt=_r(n.transform.cameraToCenterDistance,St.signedDistanceFromCamera),_t=o.ao(Y,he,Je),xt=_?_t*n.transform.getPitchedTextCorrection(Je.anchorX,Je.anchorY,M)/gt:_t*gt,ir=Bn({projectionContext:ht,pitchedLabelPlaneMatrixInverse:p,symbol:Je,fontSize:xt,flip:!1,keepUpright:S,glyphOffsetArray:v.glyphOffsetArray,dynamicLayoutVertexArray:Ee,aspectRatio:Ve,rotateToLine:P});Oe=ir.useVertical,(ir.notEnoughRoom||Oe||ir.needsFlipping&&Bn({projectionContext:ht,pitchedLabelPlaneMatrixInverse:p,symbol:Je,fontSize:xt,flip:!0,keepUpright:S,glyphOffsetArray:v.glyphOffsetArray,dynamicLayoutVertexArray:Ee,aspectRatio:Ve,rotateToLine:P}).notEnoughRoom)&&Xs(Je.numGlyphs,Ee)}l?v.text.dynamicLayoutVertexBuffer.updateData(Ee):v.icon.dynamicLayoutVertexBuffer.updateData(Ee)}function Yt(v,n,l,f,p,_,S,P){const M=_.glyphStartIndex+_.numGlyphs,z=_.lineStartIndex,K=_.lineStartIndex+_.lineLength,Z=n.getoffsetX(_.glyphStartIndex),$=n.getoffsetX(M-1),Y=Us(v*Z,l,f,p,_.segment,z,K,P,S);if(!Y)return null;const he=Us(v*$,l,f,p,_.segment,z,K,P,S);return he?P.projectionCache.anyProjectionOccluded?null:{first:Y,last:he}:null}function Xn(v,n,l,f){return v===o.an.horizontal&&Math.abs(l.y-n.y)>Math.abs(l.x-n.x)*f?{useVertical:!0}:(v===o.an.vertical?n.y<l.y:n.x>l.x)?{needsFlipping:!0}:null}function Bn(v){const{projectionContext:n,pitchedLabelPlaneMatrixInverse:l,symbol:f,fontSize:p,flip:_,keepUpright:S,glyphOffsetArray:P,dynamicLayoutVertexArray:M,aspectRatio:z,rotateToLine:K}=v,Z=p/24,$=f.lineOffsetX*Z,Y=f.lineOffsetY*Z;let he;if(f.numGlyphs>1){const Ie=f.glyphStartIndex+f.numGlyphs,Ee=f.lineStartIndex,Fe=f.lineStartIndex+f.lineLength,De=Yt(Z,P,$,Y,_,f,K,n);if(!De)return{notEnoughRoom:!0};const Ve=Qr(De.first.point.x,De.first.point.y,n,l),Oe=Qr(De.last.point.x,De.last.point.y,n,l);if(S&&!_){const We=Xn(f.writingMode,Ve,Oe,z);if(We)return We}he=[De.first];for(let We=f.glyphStartIndex+1;We<Ie-1;We++){const Je=Us(Z*P.getoffsetX(We),$,Y,_,f.segment,Ee,Fe,n,K);if(!Je)return{notEnoughRoom:!0};he.push(Je)}he.push(De.last)}else{if(S&&!_){const Ee=Jt(n.tileAnchorPoint.x,n.tileAnchorPoint.y,n).point,Fe=f.lineStartIndex+f.segment+1,De=new o.P(n.lineVertexArray.getx(Fe),n.lineVertexArray.gety(Fe)),Ve=Jt(De.x,De.y,n),Oe=Ve.signedDistanceFromCamera>0?Ve.point:es(n.tileAnchorPoint,De,Ee,1,n),We=Qr(Ee.x,Ee.y,n,l),Je=Qr(Oe.x,Oe.y,n,l),ze=Xn(f.writingMode,We,Je,z);if(ze)return ze}const Ie=Us(Z*P.getoffsetX(f.glyphStartIndex),$,Y,_,f.segment,f.lineStartIndex,f.lineStartIndex+f.lineLength,n,K);if(!Ie||n.projectionCache.anyProjectionOccluded)return{notEnoughRoom:!0};he=[Ie]}for(const Ie of he)o.au(M,Ie.point,Ie.angle);return{}}function es(v,n,l,f,p){const _=v.add(v.sub(n)._unit()),S=Jt(_.x,_.y,p).point,P=l.sub(S);return l.add(P._mult(f/P.mag()))}function cs(v,n,l){const f=n.projectionCache;if(f.projections[v])return f.projections[v];const p=new o.P(n.lineVertexArray.getx(v),n.lineVertexArray.gety(v)),_=Jt(p.x,p.y,n);if(_.signedDistanceFromCamera>0)return f.projections[v]=_.point,f.anyProjectionOccluded=f.anyProjectionOccluded||_.isOccluded,_.point;const S=v-l.direction;return es(l.distanceFromAnchor===0?n.tileAnchorPoint:new o.P(n.lineVertexArray.getx(S),n.lineVertexArray.gety(S)),p,l.previousVertex,l.absOffsetX-l.distanceFromAnchor+1,n)}function Jt(v,n,l){const f=v+l.translation[0],p=n+l.translation[1];let _;return l.pitchWithMap?(_=Nr(f,p,l.pitchedLabelPlaneMatrix,l.getElevation),_.isOccluded=!1):(_=l.transform.projectTileCoordinates(f,p,l.unwrappedTileID,l.getElevation),_.point.x=(.5*_.point.x+.5)*l.width,_.point.y=(.5*-_.point.y+.5)*l.height),_}function Qr(v,n,l,f){if(l.pitchWithMap){const p=[v,n,0,1];return o.av(p,p,f),l.transform.projectTileCoordinates(p[0]/p[3],p[1]/p[3],l.unwrappedTileID,l.getElevation).point}return{x:v/l.width*2-1,y:1-n/l.height*2}}function Vr(v,n,l){return l.transform.projectTileCoordinates(v,n,l.unwrappedTileID,l.getElevation)}function zi(v,n,l){return v._unit()._perp()._mult(n*l)}function Ja(v,n,l,f,p,_,S,P,M){if(P.projectionCache.offsets[v])return P.projectionCache.offsets[v];const z=l.add(n);if(v+M.direction<f||v+M.direction>=p)return P.projectionCache.offsets[v]=z,z;const K=cs(v+M.direction,P,M),Z=zi(K.sub(l),S,M.direction),$=l.add(Z),Y=K.add(Z);return P.projectionCache.offsets[v]=o.aw(_,z,$,Y)||z,P.projectionCache.offsets[v]}function Us(v,n,l,f,p,_,S,P,M){const z=f?v-n:v+n;let K=z>0?1:-1,Z=0;f&&(K*=-1,Z=Math.PI),K<0&&(Z+=Math.PI);let $,Y=K>0?_+p:_+p+1;P.projectionCache.cachedAnchorPoint?$=P.projectionCache.cachedAnchorPoint:($=Jt(P.tileAnchorPoint.x,P.tileAnchorPoint.y,P).point,P.projectionCache.cachedAnchorPoint=$);let he,Ie,Ee=$,Fe=$,De=0,Ve=0;const Oe=Math.abs(z),We=[];let Je;for(;De+Ve<=Oe;){if(Y+=K,Y<_||Y>=S)return null;De+=Ve,Fe=Ee,Ie=he;const St={absOffsetX:Oe,direction:K,distanceFromAnchor:De,previousVertex:Fe};if(Ee=cs(Y,P,St),l===0)We.push(Fe),Je=Ee.sub(Fe);else{let gt;const _t=Ee.sub(Fe);gt=_t.mag()===0?zi(cs(Y+K,P,St).sub(Ee),l,K):zi(_t,l,K),Ie||(Ie=Fe.add(gt)),he=Ja(Y,gt,Ee,_,S,Ie,l,P,St),We.push(Ie),Je=he.sub(Ie)}Ve=Je.mag()}const ze=Je._mult((Oe-De)/Ve)._add(Ie||Fe),ht=Z+Math.atan2(Ee.y-Fe.y,Ee.x-Fe.x);return We.push(ze),{point:ze,angle:M?ht:0,path:We}}const $r=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function Xs(v,n){for(let l=0;l<v;l++){const f=n.length;n.resize(f+4),n.float32.set($r,3*f)}}function Ca(v,n,l){const f=n[0],p=n[1];return v[0]=l[0]*f+l[4]*p+l[12],v[1]=l[1]*f+l[5]*p+l[13],v[3]=l[3]*f+l[7]*p+l[15],v}const ui=100;class iA{constructor(n,l=new Ar(n.width+200,n.height+200,25),f=new Ar(n.width+200,n.height+200,25)){this.transform=n,this.grid=l,this.ignoredGrid=f,this.pitchFactor=Math.cos(n.pitch*Math.PI/180)*n.cameraToCenterDistance,this.screenRightBoundary=n.width+ui,this.screenBottomBoundary=n.height+ui,this.gridRightBoundary=n.width+200,this.gridBottomBoundary=n.height+200,this.perspectiveRatioCutoff=.6}placeCollisionBox(n,l,f,p,_,S,P,M,z,K,Z,$){const Y=this.projectAndGetPerspectiveRatio(n.anchorPointX+M[0],n.anchorPointY+M[1],_,K,$),he=f*Y.perspectiveRatio;let Ie;if(S||P)Ie=this._projectCollisionBox(n,he,p,_,S,P,M,Y,K,Z,$);else{const Je=Y.x+(Z?Z.x*he:0),ze=Y.y+(Z?Z.y*he:0);Ie={allPointsOccluded:!1,box:[Je+n.x1*he,ze+n.y1*he,Je+n.x2*he,ze+n.y2*he]}}const[Ee,Fe,De,Ve]=Ie.box,Oe=S?Ie.allPointsOccluded:Y.isOccluded;let We=Oe;return We||(We=Y.perspectiveRatio<this.perspectiveRatioCutoff),We||(We=!this.isInsideGrid(Ee,Fe,De,Ve)),We||l!=="always"&&this.grid.hitTest(Ee,Fe,De,Ve,l,z)?{box:[Ee,Fe,De,Ve],placeable:!1,offscreen:!1,occluded:Oe}:{box:[Ee,Fe,De,Ve],placeable:!0,offscreen:this.isOffscreen(Ee,Fe,De,Ve),occluded:Oe}}placeCollisionCircles(n,l,f,p,_,S,P,M,z,K,Z,$,Y,he){const Ie=[],Ee=new o.P(l.anchorX,l.anchorY),Fe=this.getPerspectiveRatio(Ee.x,Ee.y,S,he),De=(z?_*this.transform.getPitchedTextCorrection(l.anchorX,l.anchorY,S)/Fe:_*Fe)/o.aA,Ve={getElevation:he,pitchedLabelPlaneMatrix:P,lineVertexArray:f,pitchWithMap:z,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},transform:this.transform,tileAnchorPoint:Ee,unwrappedTileID:S,width:this.transform.width,height:this.transform.height,translation:Y},Oe=Yt(De,p,l.lineOffsetX*De,l.lineOffsetY*De,!1,l,!1,Ve);let We=!1,Je=!1,ze=!0;if(Oe){const ht=.5*Z*Fe+$,St=new o.P(-100,-100),gt=new o.P(this.screenRightBoundary,this.screenBottomBoundary),_t=new nr,xt=Oe.first,ir=Oe.last;let rr=[];for(let rn=xt.path.length-1;rn>=1;rn--)rr.push(xt.path[rn]);for(let rn=1;rn<ir.path.length;rn++)rr.push(ir.path[rn]);const Qt=2.5*ht;if(z){const rn=this.projectPathToScreenSpace(rr,Ve);rr=rn.some(mn=>mn.signedDistanceFromCamera<=0)?[]:rn.map(mn=>mn.point)}let mr=[];if(rr.length>0){const rn=rr[0].clone(),mn=rr[0].clone();for(let Zn=1;Zn<rr.length;Zn++)rn.x=Math.min(rn.x,rr[Zn].x),rn.y=Math.min(rn.y,rr[Zn].y),mn.x=Math.max(mn.x,rr[Zn].x),mn.y=Math.max(mn.y,rr[Zn].y);mr=rn.x>=St.x&&mn.x<=gt.x&&rn.y>=St.y&&mn.y<=gt.y?[rr]:mn.x<St.x||rn.x>gt.x||mn.y<St.y||rn.y>gt.y?[]:o.ax([rr],St.x,St.y,gt.x,gt.y)}for(const rn of mr){_t.reset(rn,.25*ht);let mn=0;mn=_t.length<=.5*ht?1:Math.ceil(_t.paddedLength/Qt)+1;for(let Zn=0;Zn<mn;Zn++){const En=Zn/Math.max(mn-1,1),In=_t.lerp(En),xn=In.x+ui,_n=In.y+ui;Ie.push(xn,_n,ht,0);const Tn=xn-ht,qi=_n-ht,fn=xn+ht,ss=_n+ht;if(ze=ze&&this.isOffscreen(Tn,qi,fn,ss),Je=Je||this.isInsideGrid(Tn,qi,fn,ss),n!=="always"&&this.grid.hitTestCircle(xn,_n,ht,n,K)&&(We=!0,!M))return{circles:[],offscreen:!1,collisionDetected:We}}}}return{circles:!M&&We||!Je||Fe<this.perspectiveRatioCutoff?[]:Ie,offscreen:ze,collisionDetected:We}}projectPathToScreenSpace(n,l){const f=function(p,_){const S=o.L();return o.ap(S,_.pitchedLabelPlaneMatrix),p.map(P=>{const M=Nr(P.x,P.y,S,_.getElevation),z=_.transform.projectTileCoordinates(M.point.x,M.point.y,_.unwrappedTileID,_.getElevation);return z.point.x=(.5*z.point.x+.5)*_.width,z.point.y=(.5*-z.point.y+.5)*_.height,z})}(n,l);return function(p){let _=0,S=0,P=0,M=0;for(let z=0;z<p.length;z++)p[z].isOccluded?(P=z+1,M=0):(M++,M>S&&(S=M,_=P));return p.slice(_,_+S)}(f)}queryRenderedSymbols(n){if(n.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};const l=[],f=new o.a1;for(const Z of n){const $=new o.P(Z.x+ui,Z.y+ui);f.extend($),l.push($)}const{minX:p,minY:_,maxX:S,maxY:P}=f,M=this.grid.query(p,_,S,P).concat(this.ignoredGrid.query(p,_,S,P)),z={},K={};for(const Z of M){const $=Z.key;if(z[$.bucketInstanceId]===void 0&&(z[$.bucketInstanceId]={}),z[$.bucketInstanceId][$.featureIndex])continue;const Y=[new o.P(Z.x1,Z.y1),new o.P(Z.x2,Z.y1),new o.P(Z.x2,Z.y2),new o.P(Z.x1,Z.y2)];o.ay(l,Y)&&(z[$.bucketInstanceId][$.featureIndex]=!0,K[$.bucketInstanceId]===void 0&&(K[$.bucketInstanceId]=[]),K[$.bucketInstanceId].push($.featureIndex))}return K}insertCollisionBox(n,l,f,p,_,S){(f?this.ignoredGrid:this.grid).insert({bucketInstanceId:p,featureIndex:_,collisionGroupID:S,overlapMode:l},n[0],n[1],n[2],n[3])}insertCollisionCircles(n,l,f,p,_,S){const P=f?this.ignoredGrid:this.grid,M={bucketInstanceId:p,featureIndex:_,collisionGroupID:S,overlapMode:l};for(let z=0;z<n.length;z+=4)P.insertCircle(M,n[z],n[z+1],n[z+2])}projectAndGetPerspectiveRatio(n,l,f,p,_){if(_){let S;p?(S=[n,l,p(n,l),1],o.av(S,S,_)):(S=[n,l,0,1],Ca(S,S,_));const P=S[3];return{x:(S[0]/P+1)/2*this.transform.width+ui,y:(-S[1]/P+1)/2*this.transform.height+ui,perspectiveRatio:.5+this.transform.cameraToCenterDistance/P*.5,isOccluded:!1,signedDistanceFromCamera:P}}{const S=this.transform.projectTileCoordinates(n,l,f,p);return{x:(S.point.x+1)/2*this.transform.width+ui,y:(1-S.point.y)/2*this.transform.height+ui,perspectiveRatio:.5+this.transform.cameraToCenterDistance/S.signedDistanceFromCamera*.5,isOccluded:S.isOccluded,signedDistanceFromCamera:S.signedDistanceFromCamera}}}getPerspectiveRatio(n,l,f,p){const _=this.transform.projectTileCoordinates(n,l,f,p);return .5+this.transform.cameraToCenterDistance/_.signedDistanceFromCamera*.5}isOffscreen(n,l,f,p){return f<ui||n>=this.screenRightBoundary||p<ui||l>this.screenBottomBoundary}isInsideGrid(n,l,f,p){return f>=0&&n<this.gridRightBoundary&&p>=0&&l<this.gridBottomBoundary}getViewportMatrix(){const n=o.af([]);return o.M(n,n,[-100,-100,0]),n}_projectCollisionBox(n,l,f,p,_,S,P,M,z,K,Z){let $=1,Y=0,he=0,Ie=1;const Ee=n.anchorPointX+P[0],Fe=n.anchorPointY+P[1];if(S&&!_){const rr=this.projectAndGetPerspectiveRatio(Ee+1,Fe,p,z,Z),Qt=rr.x-M.x,mr=Math.atan((rr.y-M.y)/Qt)+(Qt<0?Math.PI:0),rn=Math.sin(mr),mn=Math.cos(mr);$=mn,Y=rn,he=-rn,Ie=mn}else if(!S&&_){const rr=jr(this.transform);$=rr.vecEast[0],Y=rr.vecEast[1],he=rr.vecSouth[0],Ie=rr.vecSouth[1]}let De=M.x,Ve=M.y,Oe=l;_&&(De=Ee,Ve=Fe,Oe=Math.pow(2,-(this.transform.zoom-f.overscaledZ)),Oe*=this.transform.getPitchedTextCorrection(Ee,Fe,p),K||(Oe*=o.ag(.5+M.signedDistanceFromCamera/this.transform.cameraToCenterDistance*.5,0,4))),K&&(De+=$*K.x*Oe+he*K.y*Oe,Ve+=Y*K.x*Oe+Ie*K.y*Oe);const We=n.x1*Oe,Je=n.x2*Oe,ze=(We+Je)/2,ht=n.y1*Oe,St=n.y2*Oe,gt=(ht+St)/2,_t=[{offsetX:We,offsetY:ht},{offsetX:ze,offsetY:ht},{offsetX:Je,offsetY:ht},{offsetX:Je,offsetY:gt},{offsetX:Je,offsetY:St},{offsetX:ze,offsetY:St},{offsetX:We,offsetY:St},{offsetX:We,offsetY:gt}];let xt=[];for(const{offsetX:rr,offsetY:Qt}of _t)xt.push(new o.P(De+$*rr+he*Qt,Ve+Y*rr+Ie*Qt));let ir=!1;if(_){const rr=xt.map(Qt=>this.projectAndGetPerspectiveRatio(Qt.x,Qt.y,p,z,Z));ir=rr.some(Qt=>!Qt.isOccluded),xt=rr.map(Qt=>new o.P(Qt.x,Qt.y))}else ir=!0;return{box:o.az(xt),allPointsOccluded:!ir}}}class Sa{constructor(n,l,f,p){this.opacity=n?Math.max(0,Math.min(1,n.opacity+(n.placed?l:-l))):p&&f?1:0,this.placed=f}isHidden(){return this.opacity===0&&!this.placed}}class Fo{constructor(n,l,f,p,_){this.text=new Sa(n?n.text:null,l,f,_),this.icon=new Sa(n?n.icon:null,l,p,_)}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class sA{constructor(n,l,f){this.text=n,this.icon=l,this.skipFade=f}}class us{constructor(n,l,f,p,_){this.bucketInstanceId=n,this.featureIndex=l,this.sourceLayerIndex=f,this.bucketIndex=p,this.tileID=_}}class $n{constructor(n){this.crossSourceCollisions=n,this.maxGroupID=0,this.collisionGroups={}}get(n){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[n]){const l=++this.maxGroupID;this.collisionGroups[n]={ID:l,predicate:f=>f.collisionGroupID===l}}return this.collisionGroups[n]}}function Kc(v,n,l,f,p){const{horizontalAlign:_,verticalAlign:S}=o.aG(v);return new o.P(-(_-.5)*n+f[0]*p,-(S-.5)*l+f[1]*p)}class oA{constructor(n,l,f,p,_){this.transform=n.clone(),this.terrain=l,this.collisionIndex=new iA(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=f,this.retainedQueryData={},this.collisionGroups=new $n(p),this.collisionCircleArrays={},this.collisionBoxArrays=new Map,this.prevPlacement=_,_&&(_.prevPlacement=void 0),this.placedOrientations={}}_getTerrainElevationFunc(n){const l=this.terrain;return l?(f,p)=>l.getElevation(n,f,p):null}getBucketParts(n,l,f,p){const _=f.getBucket(l),S=f.latestFeatureIndex;if(!_||!S||l.id!==_.layerIds[0])return;const P=f.collisionBoxArray,M=_.layers[0].layout,z=_.layers[0].paint,K=Math.pow(2,this.transform.zoom-f.tileID.overscaledZ),Z=f.tileSize/o.$,$=f.tileID.toUnwrapped(),Y=M.get("text-rotation-alignment")==="map",he=o.aB(f,1,this.transform.zoom),Ie=o.aC(this.collisionIndex.transform,f,z.get("text-translate"),z.get("text-translate-anchor")),Ee=o.aC(this.collisionIndex.transform,f,z.get("icon-translate"),z.get("icon-translate-anchor")),Fe=qt(Y,this.transform,he);this.retainedQueryData[_.bucketInstanceId]=new us(_.bucketInstanceId,S,_.sourceLayerIndex,_.index,f.tileID);const De={bucket:_,layout:M,translationText:Ie,translationIcon:Ee,unwrappedTileID:$,pitchedLabelPlaneMatrix:Fe,scale:K,textPixelRatio:Z,holdingForFade:f.holdingForFade(),collisionBoxArray:P,partiallyEvaluatedTextSize:o.am(_.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(_.sourceID)};if(p)for(const Ve of _.sortKeyRanges){const{sortKey:Oe,symbolInstanceStart:We,symbolInstanceEnd:Je}=Ve;n.push({sortKey:Oe,symbolInstanceStart:We,symbolInstanceEnd:Je,parameters:De})}else n.push({symbolInstanceStart:0,symbolInstanceEnd:_.symbolInstances.length,parameters:De})}attemptAnchorPlacement(n,l,f,p,_,S,P,M,z,K,Z,$,Y,he,Ie,Ee,Fe,De,Ve,Oe){const We=o.aD[n.textAnchor],Je=[n.textOffset0,n.textOffset1],ze=Kc(We,f,p,Je,_),ht=this.collisionIndex.placeCollisionBox(l,$,M,z,K,P,S,Ee,Z.predicate,Ve,ze,Oe);if((!De||this.collisionIndex.placeCollisionBox(De,$,M,z,K,P,S,Fe,Z.predicate,Ve,ze,Oe).placeable)&&ht.placeable){let St;if(this.prevPlacement&&this.prevPlacement.variableOffsets[Y.crossTileID]&&this.prevPlacement.placements[Y.crossTileID]&&this.prevPlacement.placements[Y.crossTileID].text&&(St=this.prevPlacement.variableOffsets[Y.crossTileID].anchor),Y.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");return this.variableOffsets[Y.crossTileID]={textOffset:Je,width:f,height:p,anchor:We,textBoxScale:_,prevAnchor:St},this.markUsedJustification(he,We,Y,Ie),he.allowVerticalPlacement&&(this.markUsedOrientation(he,Ie,Y),this.placedOrientations[Y.crossTileID]=Ie),{shift:ze,placedGlyphBoxes:ht}}}placeLayerBucketPart(n,l,f){const{bucket:p,layout:_,translationText:S,translationIcon:P,unwrappedTileID:M,pitchedLabelPlaneMatrix:z,textPixelRatio:K,holdingForFade:Z,collisionBoxArray:$,partiallyEvaluatedTextSize:Y,collisionGroup:he}=n.parameters,Ie=_.get("text-optional"),Ee=_.get("icon-optional"),Fe=o.aE(_,"text-overlap","text-allow-overlap"),De=Fe==="always",Ve=o.aE(_,"icon-overlap","icon-allow-overlap"),Oe=Ve==="always",We=_.get("text-rotation-alignment")==="map",Je=_.get("text-pitch-alignment")==="map",ze=_.get("icon-text-fit")!=="none",ht=_.get("symbol-z-order")==="viewport-y",St=De&&(Oe||!p.hasIconData()||Ee),gt=Oe&&(De||!p.hasTextData()||Ie);!p.collisionArrays&&$&&p.deserializeCollisionBoxes($);const _t=this.retainedQueryData[p.bucketInstanceId].tileID,xt=this._getTerrainElevationFunc(_t),ir=this.transform.getFastPathSimpleProjectionMatrix(_t),rr=(Qt,mr,rn)=>{var mn,Zn;if(l[Qt.crossTileID])return;if(Z)return void(this.placements[Qt.crossTileID]=new sA(!1,!1,!1));let En=!1,In=!1,xn=!0,_n=null,Tn={box:null,placeable:!1,offscreen:null,occluded:!1},qi={placeable:!1},fn=null,ss=null,Zi=null,za=0,pc=0,mc=0;mr.textFeatureIndex?za=mr.textFeatureIndex:Qt.useRuntimeCollisionCircles&&(za=Qt.featureIndex),mr.verticalTextFeatureIndex&&(pc=mr.verticalTextFeatureIndex);const jl=mr.textBox;if(jl){const Ho=Ni=>{let ai=o.an.horizontal;if(p.allowVerticalPlacement&&!Ni&&this.prevPlacement){const _o=this.prevPlacement.placedOrientations[Qt.crossTileID];_o&&(this.placedOrientations[Qt.crossTileID]=_o,ai=_o,this.markUsedOrientation(p,ai,Qt))}return ai},fl=(Ni,ai)=>{if(p.allowVerticalPlacement&&Qt.numVerticalGlyphVertices>0&&mr.verticalTextBox){for(const _o of p.writingModes)if(_o===o.an.vertical?(Tn=ai(),qi=Tn):Tn=Ni(),Tn&&Tn.placeable)break}else Tn=Ni()},gc=Qt.textAnchorOffsetStartIndex,fu=Qt.textAnchorOffsetEndIndex;if(fu===gc){const Ni=(ai,_o)=>{const ps=this.collisionIndex.placeCollisionBox(ai,Fe,K,_t,M,Je,We,S,he.predicate,xt,void 0,ir);return ps&&ps.placeable&&(this.markUsedOrientation(p,_o,Qt),this.placedOrientations[Qt.crossTileID]=_o),ps};fl(()=>Ni(jl,o.an.horizontal),()=>{const ai=mr.verticalTextBox;return p.allowVerticalPlacement&&Qt.numVerticalGlyphVertices>0&&ai?Ni(ai,o.an.vertical):{box:null,offscreen:null}}),Ho(Tn&&Tn.placeable)}else{let Ni=o.aD[(Zn=(mn=this.prevPlacement)===null||mn===void 0?void 0:mn.variableOffsets[Qt.crossTileID])===null||Zn===void 0?void 0:Zn.anchor];const ai=(ps,D0,z_)=>{const ym=ps.x2-ps.x1,_d=ps.y2-ps.y1,ih=Qt.textBoxScale,bA=ze&&Ve==="never"?D0:null;let Vs=null,BA=Fe==="never"?1:2,vm="never";Ni&&BA++;for(let yc=0;yc<BA;yc++){for(let _m=gc;_m<fu;_m++){const wm=p.textAnchorOffsets.get(_m);if(Ni&&wm.textAnchor!==Ni)continue;const wd=this.attemptAnchorPlacement(wm,ps,ym,_d,ih,We,Je,K,_t,M,he,vm,Qt,p,z_,S,P,bA,xt);if(wd&&(Vs=wd.placedGlyphBoxes,Vs&&Vs.placeable))return En=!0,_n=wd.shift,Vs}Ni?Ni=null:vm=Fe}return f&&!Vs&&(Vs={box:this.collisionIndex.placeCollisionBox(jl,"always",K,_t,M,Je,We,S,he.predicate,xt,void 0,ir).box,offscreen:!1,placeable:!1,occluded:!1}),Vs};fl(()=>ai(jl,mr.iconBox,o.an.horizontal),()=>{const ps=mr.verticalTextBox;return p.allowVerticalPlacement&&(!Tn||!Tn.placeable)&&Qt.numVerticalGlyphVertices>0&&ps?ai(ps,mr.verticalIconBox,o.an.vertical):{box:null,occluded:!0,offscreen:null}}),Tn&&(En=Tn.placeable,xn=Tn.offscreen);const _o=Ho(Tn&&Tn.placeable);if(!En&&this.prevPlacement){const ps=this.prevPlacement.variableOffsets[Qt.crossTileID];ps&&(this.variableOffsets[Qt.crossTileID]=ps,this.markUsedJustification(p,ps.anchor,Qt,_o))}}}if(fn=Tn,En=fn&&fn.placeable,xn=fn&&fn.offscreen,Qt.useRuntimeCollisionCircles){const Ho=p.text.placedSymbolArray.get(Qt.centerJustifiedTextSymbolIndex),fl=o.ao(p.textSizeData,Y,Ho),gc=_.get("text-padding");ss=this.collisionIndex.placeCollisionCircles(Fe,Ho,p.lineVertexArray,p.glyphOffsetArray,fl,M,z,f,Je,he.predicate,Qt.collisionCircleDiameter,gc,S,xt),ss.circles.length&&ss.collisionDetected&&!f&&o.w("Collisions detected, but collision boxes are not shown"),En=De||ss.circles.length>0&&!ss.collisionDetected,xn=xn&&ss.offscreen}if(mr.iconFeatureIndex&&(mc=mr.iconFeatureIndex),mr.iconBox){const Ho=fl=>this.collisionIndex.placeCollisionBox(fl,Ve,K,_t,M,Je,We,P,he.predicate,xt,ze&&_n?_n:void 0,ir);qi&&qi.placeable&&mr.verticalIconBox?(Zi=Ho(mr.verticalIconBox),In=Zi.placeable):(Zi=Ho(mr.iconBox),In=Zi.placeable),xn=xn&&Zi.offscreen}const yd=Ie||Qt.numHorizontalGlyphVertices===0&&Qt.numVerticalGlyphVertices===0,vd=Ee||Qt.numIconVertices===0;yd||vd?vd?yd||(In=In&&En):En=In&&En:In=En=In&&En;const nh=In&&Zi.placeable;if(En&&fn.placeable&&this.collisionIndex.insertCollisionBox(fn.box,Fe,_.get("text-ignore-placement"),p.bucketInstanceId,qi&&qi.placeable&&pc?pc:za,he.ID),nh&&this.collisionIndex.insertCollisionBox(Zi.box,Ve,_.get("icon-ignore-placement"),p.bucketInstanceId,mc,he.ID),ss&&En&&this.collisionIndex.insertCollisionCircles(ss.circles,Fe,_.get("text-ignore-placement"),p.bucketInstanceId,za,he.ID),f&&this.storeCollisionData(p.bucketInstanceId,rn,mr,fn,Zi,ss),Qt.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");if(p.bucketInstanceId===0)throw new Error("bucket.bucketInstanceId can't be 0");this.placements[Qt.crossTileID]=new sA((En||St)&&!(fn!=null&&fn.occluded),(In||gt)&&!(Zi!=null&&Zi.occluded),xn||p.justReloaded),l[Qt.crossTileID]=!0};if(ht){if(n.symbolInstanceStart!==0)throw new Error("bucket.bucketInstanceId should be 0");const Qt=p.getSortedSymbolIndexes(-this.transform.bearingInRadians);for(let mr=Qt.length-1;mr>=0;--mr){const rn=Qt[mr];rr(p.symbolInstances.get(rn),p.collisionArrays[rn],rn)}}else for(let Qt=n.symbolInstanceStart;Qt<n.symbolInstanceEnd;Qt++)rr(p.symbolInstances.get(Qt),p.collisionArrays[Qt],Qt);p.justReloaded=!1}storeCollisionData(n,l,f,p,_,S){if(f.textBox||f.iconBox){let P,M;this.collisionBoxArrays.has(n)?P=this.collisionBoxArrays.get(n):(P=new Map,this.collisionBoxArrays.set(n,P)),P.has(l)?M=P.get(l):(M={text:null,icon:null},P.set(l,M)),f.textBox&&(M.text=p.box),f.iconBox&&(M.icon=_.box)}if(S){let P=this.collisionCircleArrays[n];P===void 0&&(P=this.collisionCircleArrays[n]=[]);for(let M=0;M<S.circles.length;M+=4)P.push(S.circles[M+0]-ui),P.push(S.circles[M+1]-ui),P.push(S.circles[M+2]),P.push(S.collisionDetected?1:0)}}markUsedJustification(n,l,f,p){let _;_=p===o.an.vertical?f.verticalPlacedTextSymbolIndex:{left:f.leftJustifiedTextSymbolIndex,center:f.centerJustifiedTextSymbolIndex,right:f.rightJustifiedTextSymbolIndex}[o.aF(l)];const S=[f.leftJustifiedTextSymbolIndex,f.centerJustifiedTextSymbolIndex,f.rightJustifiedTextSymbolIndex,f.verticalPlacedTextSymbolIndex];for(const P of S)P>=0&&(n.text.placedSymbolArray.get(P).crossTileID=_>=0&&P!==_?0:f.crossTileID)}markUsedOrientation(n,l,f){const p=l===o.an.horizontal||l===o.an.horizontalOnly?l:0,_=l===o.an.vertical?l:0,S=[f.leftJustifiedTextSymbolIndex,f.centerJustifiedTextSymbolIndex,f.rightJustifiedTextSymbolIndex];for(const P of S)n.text.placedSymbolArray.get(P).placedOrientation=p;f.verticalPlacedTextSymbolIndex&&(n.text.placedSymbolArray.get(f.verticalPlacedTextSymbolIndex).placedOrientation=_)}commit(n){this.commitTime=n,this.zoomAtLastRecencyCheck=this.transform.zoom;const l=this.prevPlacement;let f=!1;this.prevZoomAdjustment=l?l.zoomAdjustment(this.transform.zoom):0;const p=l?l.symbolFadeChange(n):1,_=l?l.opacities:{},S=l?l.variableOffsets:{},P=l?l.placedOrientations:{};for(const M in this.placements){const z=this.placements[M],K=_[M];K?(this.opacities[M]=new Fo(K,p,z.text,z.icon),f=f||z.text!==K.text.placed||z.icon!==K.icon.placed):(this.opacities[M]=new Fo(null,p,z.text,z.icon,z.skipFade),f=f||z.text||z.icon)}for(const M in _){const z=_[M];if(!this.opacities[M]){const K=new Fo(z,p,!1,!1);K.isHidden()||(this.opacities[M]=K,f=f||z.text.placed||z.icon.placed)}}for(const M in S)this.variableOffsets[M]||!this.opacities[M]||this.opacities[M].isHidden()||(this.variableOffsets[M]=S[M]);for(const M in P)this.placedOrientations[M]||!this.opacities[M]||this.opacities[M].isHidden()||(this.placedOrientations[M]=P[M]);if(l&&l.lastPlacementChangeTime===void 0)throw new Error("Last placement time for previous placement is not defined");f?this.lastPlacementChangeTime=n:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=l?l.lastPlacementChangeTime:n)}updateLayerOpacities(n,l){const f={};for(const p of l){const _=p.getBucket(n);_&&p.latestFeatureIndex&&n.id===_.layerIds[0]&&this.updateBucketOpacities(_,p.tileID,f,p.collisionBoxArray)}}updateBucketOpacities(n,l,f,p){n.hasTextData()&&(n.text.opacityVertexArray.clear(),n.text.hasVisibleVertices=!1),n.hasIconData()&&(n.icon.opacityVertexArray.clear(),n.icon.hasVisibleVertices=!1),n.hasIconCollisionBoxData()&&n.iconCollisionBox.collisionVertexArray.clear(),n.hasTextCollisionBoxData()&&n.textCollisionBox.collisionVertexArray.clear();const _=n.layers[0],S=_.layout,P=new Fo(null,0,!1,!1,!0),M=S.get("text-allow-overlap"),z=S.get("icon-allow-overlap"),K=_._unevaluatedLayout.hasValue("text-variable-anchor")||_._unevaluatedLayout.hasValue("text-variable-anchor-offset"),Z=S.get("text-rotation-alignment")==="map",$=S.get("text-pitch-alignment")==="map",Y=S.get("icon-text-fit")!=="none",he=new Fo(null,0,M&&(z||!n.hasIconData()||S.get("icon-optional")),z&&(M||!n.hasTextData()||S.get("text-optional")),!0);!n.collisionArrays&&p&&(n.hasIconCollisionBoxData()||n.hasTextCollisionBoxData())&&n.deserializeCollisionBoxes(p);const Ie=(Fe,De,Ve)=>{for(let Oe=0;Oe<De/4;Oe++)Fe.opacityVertexArray.emplaceBack(Ve);Fe.hasVisibleVertices=Fe.hasVisibleVertices||Ve!==Ia},Ee=this.collisionBoxArrays.get(n.bucketInstanceId);for(let Fe=0;Fe<n.symbolInstances.length;Fe++){const De=n.symbolInstances.get(Fe),{numHorizontalGlyphVertices:Ve,numVerticalGlyphVertices:Oe,crossTileID:We}=De;let Je=this.opacities[We];f[We]?Je=P:Je||(Je=he,this.opacities[We]=Je),f[We]=!0;const ze=De.numIconVertices>0,ht=this.placedOrientations[De.crossTileID],St=ht===o.an.vertical,gt=ht===o.an.horizontal||ht===o.an.horizontalOnly;if(Ve>0||Oe>0){const xt=To(Je.text);Ie(n.text,Ve,St?Ia:xt),Ie(n.text,Oe,gt?Ia:xt);const ir=Je.text.isHidden();[De.rightJustifiedTextSymbolIndex,De.centerJustifiedTextSymbolIndex,De.leftJustifiedTextSymbolIndex].forEach(mr=>{mr>=0&&(n.text.placedSymbolArray.get(mr).hidden=ir||St?1:0)}),De.verticalPlacedTextSymbolIndex>=0&&(n.text.placedSymbolArray.get(De.verticalPlacedTextSymbolIndex).hidden=ir||gt?1:0);const rr=this.variableOffsets[De.crossTileID];rr&&this.markUsedJustification(n,rr.anchor,De,ht);const Qt=this.placedOrientations[De.crossTileID];Qt&&(this.markUsedJustification(n,"left",De,Qt),this.markUsedOrientation(n,Qt,De))}if(ze){const xt=To(Je.icon),ir=!(Y&&De.verticalPlacedIconSymbolIndex&&St);De.placedIconSymbolIndex>=0&&(Ie(n.icon,De.numIconVertices,ir?xt:Ia),n.icon.placedSymbolArray.get(De.placedIconSymbolIndex).hidden=Je.icon.isHidden()),De.verticalPlacedIconSymbolIndex>=0&&(Ie(n.icon,De.numVerticalIconVertices,ir?Ia:xt),n.icon.placedSymbolArray.get(De.verticalPlacedIconSymbolIndex).hidden=Je.icon.isHidden())}const _t=Ee&&Ee.has(Fe)?Ee.get(Fe):{text:null,icon:null};if(n.hasIconCollisionBoxData()||n.hasTextCollisionBoxData()){const xt=n.collisionArrays[Fe];if(xt){let ir=new o.P(0,0);if(xt.textBox||xt.verticalTextBox){let rr=!0;if(K){const Qt=this.variableOffsets[We];Qt?(ir=Kc(Qt.anchor,Qt.width,Qt.height,Qt.textOffset,Qt.textBoxScale),Z&&ir._rotate($?-this.transform.bearingInRadians:this.transform.bearingInRadians)):rr=!1}if(xt.textBox||xt.verticalTextBox){let Qt;xt.textBox&&(Qt=St),xt.verticalTextBox&&(Qt=gt),el(n.textCollisionBox.collisionVertexArray,Je.text.placed,!rr||Qt,_t.text,ir.x,ir.y)}}if(xt.iconBox||xt.verticalIconBox){const rr=!!(!gt&&xt.verticalIconBox);let Qt;xt.iconBox&&(Qt=rr),xt.verticalIconBox&&(Qt=!rr),el(n.iconCollisionBox.collisionVertexArray,Je.icon.placed,Qt,_t.icon,Y?ir.x:0,Y?ir.y:0)}}}}if(n.sortFeatures(-this.transform.bearingInRadians),this.retainedQueryData[n.bucketInstanceId]&&(this.retainedQueryData[n.bucketInstanceId].featureSortOrder=n.featureSortOrder),n.hasTextData()&&n.text.opacityVertexBuffer&&n.text.opacityVertexBuffer.updateData(n.text.opacityVertexArray),n.hasIconData()&&n.icon.opacityVertexBuffer&&n.icon.opacityVertexBuffer.updateData(n.icon.opacityVertexArray),n.hasIconCollisionBoxData()&&n.iconCollisionBox.collisionVertexBuffer&&n.iconCollisionBox.collisionVertexBuffer.updateData(n.iconCollisionBox.collisionVertexArray),n.hasTextCollisionBoxData()&&n.textCollisionBox.collisionVertexBuffer&&n.textCollisionBox.collisionVertexBuffer.updateData(n.textCollisionBox.collisionVertexArray),n.text.opacityVertexArray.length!==n.text.layoutVertexArray.length/4)throw new Error(`bucket.text.opacityVertexArray.length (= ${n.text.opacityVertexArray.length}) !== bucket.text.layoutVertexArray.length (= ${n.text.layoutVertexArray.length}) / 4`);if(n.icon.opacityVertexArray.length!==n.icon.layoutVertexArray.length/4)throw new Error(`bucket.icon.opacityVertexArray.length (= ${n.icon.opacityVertexArray.length}) !== bucket.icon.layoutVertexArray.length (= ${n.icon.layoutVertexArray.length}) / 4`);n.bucketInstanceId in this.collisionCircleArrays&&(n.collisionCircleArray=this.collisionCircleArrays[n.bucketInstanceId],delete this.collisionCircleArrays[n.bucketInstanceId])}symbolFadeChange(n){return this.fadeDuration===0?1:(n-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(n){return Math.max(0,(this.transform.zoom-n)/1.5)}hasTransitions(n){return this.stale||n-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(n,l){const f=this.zoomAtLastRecencyCheck===l?1-this.zoomAdjustment(l):1;return this.zoomAtLastRecencyCheck=l,this.commitTime+this.fadeDuration*f>n}setStale(){this.stale=!0}}function el(v,n,l,f,p,_){f&&f.length!==0||(f=[0,0,0,0]);const S=f[0]-ui,P=f[1]-ui,M=f[2]-ui,z=f[3]-ui;v.emplaceBack(n?1:0,l?1:0,p||0,_||0,S,P),v.emplaceBack(n?1:0,l?1:0,p||0,_||0,M,P),v.emplaceBack(n?1:0,l?1:0,p||0,_||0,M,z),v.emplaceBack(n?1:0,l?1:0,p||0,_||0,S,z)}const tl=Math.pow(2,25),On=Math.pow(2,24),Gc=Math.pow(2,17),$c=Math.pow(2,16),qc=Math.pow(2,9),Ea=Math.pow(2,8),zu=Math.pow(2,1);function To(v){if(v.opacity===0&&!v.placed)return 0;if(v.opacity===1&&v.placed)return 4294967295;const n=v.placed?1:0,l=Math.floor(127*v.opacity);return l*tl+n*On+l*Gc+n*$c+l*qc+n*Ea+l*zu+n}const Ia=0;class Ys{constructor(n){this._sortAcrossTiles=n.layout.get("symbol-z-order")!=="viewport-y"&&!n.layout.get("symbol-sort-key").isConstant(),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(n,l,f,p,_){const S=this._bucketParts;for(;this._currentTileIndex<n.length;)if(l.getBucketParts(S,p,n[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,_())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,S.sort((P,M)=>P.sortKey-M.sortKey));this._currentPartIndex<S.length;)if(l.placeLayerBucketPart(S[this._currentPartIndex],this._seenCrossTileIDs,f),this._currentPartIndex++,_())return!0;return!1}}class XA{constructor(n,l,f,p,_,S,P,M){this.placement=new oA(n,l,S,P,M),this._currentPlacementIndex=f.length-1,this._forceFullPlacement=p,this._showCollisionBoxes=_,this._done=!1}isDone(){return this._done}continuePlacement(n,l,f){const p=F.now(),_=()=>!this._forceFullPlacement&&F.now()-p>2;for(;this._currentPlacementIndex>=0;){const S=l[n[this._currentPlacementIndex]],P=this.placement.collisionIndex.transform.zoom;if(S.type==="symbol"&&(!S.minzoom||S.minzoom<=P)&&(!S.maxzoom||S.maxzoom>P)){if(this._inProgressLayer||(this._inProgressLayer=new Ys(S)),this._inProgressLayer.continuePlacement(f[S.source],this.placement,this._showCollisionBoxes,S,_))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(n){return this.placement.commit(n),this.placement}}const rl=512/o.$/2;class Zc{constructor(n,l,f){this.tileID=n,this.bucketInstanceId=f,this._symbolsByKey={};const p=new Map;for(let _=0;_<l.length;_++){const S=l.get(_),P=S.key,M=p.get(P);M?M.push(S):p.set(P,[S])}for(const[_,S]of p){const P={positions:S.map(M=>({x:Math.floor(M.anchorX*rl),y:Math.floor(M.anchorY*rl)})),crossTileIDs:S.map(M=>M.crossTileID)};if(P.positions.length>128){const M=new o.aH(P.positions.length,16,Uint16Array);for(const{x:z,y:K}of P.positions)M.add(z,K);M.finish(),delete P.positions,P.index=M}this._symbolsByKey[_]=P}}getScaledCoordinates(n,l){const{x:f,y:p,z:_}=this.tileID.canonical,{x:S,y:P,z:M}=l.canonical,z=rl/Math.pow(2,M-_),K=(P*o.$+n.anchorY)*z,Z=p*o.$*rl;return{x:Math.floor((S*o.$+n.anchorX)*z-f*o.$*rl),y:Math.floor(K-Z)}}findMatches(n,l,f){const p=this.tileID.canonical.z<l.canonical.z?1:Math.pow(2,this.tileID.canonical.z-l.canonical.z);for(let _=0;_<n.length;_++){const S=n.get(_);if(S.crossTileID)continue;const P=this._symbolsByKey[S.key];if(!P)continue;const M=this.getScaledCoordinates(S,l);if(P.index){const z=P.index.range(M.x-p,M.y-p,M.x+p,M.y+p).sort();for(const K of z){const Z=P.crossTileIDs[K];if(!f[Z]){f[Z]=!0,S.crossTileID=Z;break}}}else if(P.positions)for(let z=0;z<P.positions.length;z++){const K=P.positions[z],Z=P.crossTileIDs[z];if(Math.abs(K.x-M.x)<=p&&Math.abs(K.y-M.y)<=p&&!f[Z]){f[Z]=!0,S.crossTileID=Z;break}}}}getCrossTileIDsLists(){return Object.values(this._symbolsByKey).map(({crossTileIDs:n})=>n)}}class YA{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class Hu{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(n){const l=Math.round((n-this.lng)/360);if(l!==0)for(const f in this.indexes){const p=this.indexes[f],_={};for(const S in p){const P=p[S];P.tileID=P.tileID.unwrapTo(P.tileID.wrap+l),_[P.tileID.key]=P}this.indexes[f]=_}this.lng=n}addBucket(n,l,f){if(this.indexes[n.overscaledZ]&&this.indexes[n.overscaledZ][n.key]){if(this.indexes[n.overscaledZ][n.key].bucketInstanceId===l.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(n.overscaledZ,this.indexes[n.overscaledZ][n.key])}for(let _=0;_<l.symbolInstances.length;_++)l.symbolInstances.get(_).crossTileID=0;this.usedCrossTileIDs[n.overscaledZ]||(this.usedCrossTileIDs[n.overscaledZ]={});const p=this.usedCrossTileIDs[n.overscaledZ];for(const _ in this.indexes){const S=this.indexes[_];if(Number(_)>n.overscaledZ)for(const P in S){const M=S[P];M.tileID.isChildOf(n)&&M.findMatches(l.symbolInstances,n,p)}else{const P=S[n.scaledTo(Number(_)).key];P&&P.findMatches(l.symbolInstances,n,p)}}for(let _=0;_<l.symbolInstances.length;_++){const S=l.symbolInstances.get(_);S.crossTileID||(S.crossTileID=f.generate(),p[S.crossTileID]=!0)}return this.indexes[n.overscaledZ]===void 0&&(this.indexes[n.overscaledZ]={}),this.indexes[n.overscaledZ][n.key]=new Zc(n,l.symbolInstances,l.bucketInstanceId),!0}removeBucketCrossTileIDs(n,l){for(const f of l.getCrossTileIDsLists())for(const p of f)delete this.usedCrossTileIDs[n][p]}removeStaleBuckets(n){let l=!1;for(const f in this.indexes){const p=this.indexes[f];for(const _ in p)n[p[_].bucketInstanceId]||(this.removeBucketCrossTileIDs(f,p[_]),delete p[_],l=!0)}return l}}class aA{constructor(){this.layerIndexes={},this.crossTileIDs=new YA,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(n,l,f){let p=this.layerIndexes[n.id];p===void 0&&(p=this.layerIndexes[n.id]=new Hu);let _=!1;const S={};p.handleWrapJump(f);for(const P of l){const M=P.getBucket(n);M&&n.id===M.layerIds[0]&&(M.bucketInstanceId||(M.bucketInstanceId=++this.maxBucketInstanceId),p.addBucket(P.tileID,M,this.crossTileIDs)&&(_=!0),S[M.bucketInstanceId]=!0)}return p.removeStaleBuckets(S)&&(_=!0),_}pruneUnusedLayers(n){const l={};n.forEach(f=>{l[f]=!0});for(const f in this.layerIndexes)l[f]||delete this.layerIndexes[f]}}var JA="void main() {fragColor=vec4(1.0);}";const Js={prelude:an(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
out highp vec4 fragColor;`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}mat3 rotationMatrixFromAxisAngle(vec3 u,float angle) {float c=cos(angle);float s=sin(angle);float c2=1.0-c;return mat3(u.x*u.x*c2+      c,u.x*u.y*c2-u.z*s,u.x*u.z*c2+u.y*s,u.y*u.x*c2+u.z*s,u.y*u.y*c2+    c,u.y*u.z*c2-u.x*s,u.z*u.x*c2-u.y*s,u.z*u.y*c2+u.x*s,u.z*u.z*c2+    c
);}
#ifdef TERRAIN3D
uniform sampler2D u_terrain;uniform float u_terrain_dim;uniform mat4 u_terrain_matrix;uniform vec4 u_terrain_unpack;uniform float u_terrain_exaggeration;uniform highp sampler2D u_depth;
#endif
const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitShifts=vec4(1.)/bitSh;highp float unpack(highp vec4 color) {return dot(color,bitShifts);}highp float depthOpacity(vec3 frag) {
#ifdef TERRAIN3D
highp float d=unpack(texture(u_depth,frag.xy*0.5+0.5))+0.0001-frag.z;return 1.0-max(0.0,min(1.0,-d*500.0));
#else
return 1.0;
#endif
}float calculate_visibility(vec4 pos) {
#ifdef TERRAIN3D
vec3 frag=pos.xyz/pos.w;highp float d=depthOpacity(frag);if (d > 0.95) return 1.0;return (d+depthOpacity(frag+vec3(0.0,0.01,0.0)))/2.0;
#else
return 1.0;
#endif
}float ele(vec2 pos) {
#ifdef TERRAIN3D
vec4 rgb=(texture(u_terrain,pos)*255.0)*u_terrain_unpack;return rgb.r+rgb.g+rgb.b-u_terrain_unpack.a;
#else
return 0.0;
#endif
}float get_elevation(vec2 pos) {
#ifdef TERRAIN3D
#ifdef GLOBE
if ((pos.y <-32767.5) || (pos.y > 32766.5)) {return 0.0;}
#endif
vec2 coord=(u_terrain_matrix*vec4(pos,0.0,1.0)).xy*u_terrain_dim+1.0;vec2 f=fract(coord);vec2 c=(floor(coord)+0.5)/(u_terrain_dim+2.0);float d=1.0/(u_terrain_dim+2.0);float tl=ele(c);float tr=ele(c+vec2(d,0.0));float bl=ele(c+vec2(0.0,d));float br=ele(c+vec2(d,d));float elevation=mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);return elevation*u_terrain_exaggeration;
#else
return 0.0;
#endif
}const float PI=3.141592653589793;uniform mat4 u_projection_matrix;`),projectionMercator:an("","float projectLineThickness(float tileY) {return 1.0;}float projectCircleRadius(float tileY) {return 1.0;}vec4 projectTile(vec2 p) {vec4 result=u_projection_matrix*vec4(p,0.0,1.0);return result;}vec4 projectTile(vec2 p,vec2 rawPos) {vec4 result=u_projection_matrix*vec4(p,0.0,1.0);if (rawPos.y <-32767.5 || rawPos.y > 32766.5) {result.z=-10000000.0;}return result;}vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_projection_matrix*vec4(posInTile,elevation,1.0);}vec4 projectTileFor3D(vec2 posInTile,float elevation) {return projectTileWithElevation(posInTile,elevation);}"),projectionGlobe:an("",`#define GLOBE_RADIUS 6371008.8
uniform highp vec4 u_projection_tile_mercator_coords;uniform highp vec4 u_projection_clipping_plane;uniform highp float u_projection_transition;uniform mat4 u_projection_fallback_matrix;vec3 globeRotateVector(vec3 vec,vec2 angles) {vec3 axisRight=vec3(vec.z,0.0,-vec.x);vec3 axisUp=cross(axisRight,vec);axisRight=normalize(axisRight);axisUp=normalize(axisUp);vec2 t=tan(angles);return normalize(vec+axisRight*t.x+axisUp*t.y);}mat3 globeGetRotationMatrix(vec3 spherePos) {vec3 axisRight=vec3(spherePos.z,0.0,-spherePos.x);vec3 axisDown=cross(axisRight,spherePos);axisRight=normalize(axisRight);axisDown=normalize(axisDown);return mat3(axisRight,axisDown,spherePos
);}float circumferenceRatioAtTileY(float tileY) {float mercator_pos_y=u_projection_tile_mercator_coords.y+u_projection_tile_mercator_coords.w*tileY;float spherical_y=2.0*atan(exp(PI-(mercator_pos_y*PI*2.0)))-PI*0.5;return cos(spherical_y);}float projectLineThickness(float tileY) {float thickness=1.0/circumferenceRatioAtTileY(tileY); 
if (u_projection_transition < 0.999) {return mix(1.0,thickness,u_projection_transition);} else {return thickness;}}vec3 projectToSphere(vec2 translatedPos,vec2 rawPos) {vec2 mercator_pos=u_projection_tile_mercator_coords.xy+u_projection_tile_mercator_coords.zw*translatedPos;vec2 spherical;spherical.x=mercator_pos.x*PI*2.0+PI;spherical.y=2.0*atan(exp(PI-(mercator_pos.y*PI*2.0)))-PI*0.5;float len=cos(spherical.y);vec3 pos=vec3(sin(spherical.x)*len,sin(spherical.y),cos(spherical.x)*len
);if (rawPos.y <-32767.5) {pos=vec3(0.0,1.0,0.0);}if (rawPos.y > 32766.5) {pos=vec3(0.0,-1.0,0.0);}return pos;}vec3 projectToSphere(vec2 posInTile) {return projectToSphere(posInTile,vec2(0.0,0.0));}float globeComputeClippingZ(vec3 spherePos) {return (1.0-(dot(spherePos,u_projection_clipping_plane.xyz)+u_projection_clipping_plane.w));}vec4 interpolateProjection(vec2 posInTile,vec3 spherePos,float elevation) {vec3 elevatedPos=spherePos*(1.0+elevation/GLOBE_RADIUS);vec4 globePosition=u_projection_matrix*vec4(elevatedPos,1.0);globePosition.z=globeComputeClippingZ(elevatedPos)*globePosition.w;if (u_projection_transition > 0.999) {return globePosition;}vec4 flatPosition=u_projection_fallback_matrix*vec4(posInTile,elevation,1.0);const float z_globeness_threshold=0.2;vec4 result=globePosition;result.z=mix(0.0,globePosition.z,clamp((u_projection_transition-z_globeness_threshold)/(1.0-z_globeness_threshold),0.0,1.0));result.xyw=mix(flatPosition.xyw,globePosition.xyw,u_projection_transition);if ((posInTile.y <-32767.5) || (posInTile.y > 32766.5)) {result=globePosition;const float poles_hidden_anim_percentage=0.02;result.z=mix(globePosition.z,100.0,pow(max((1.0-u_projection_transition)/poles_hidden_anim_percentage,0.0),8.0));}return result;}vec4 interpolateProjectionFor3D(vec2 posInTile,vec3 spherePos,float elevation) {vec3 elevatedPos=spherePos*(1.0+elevation/GLOBE_RADIUS);vec4 globePosition=u_projection_matrix*vec4(elevatedPos,1.0);if (u_projection_transition > 0.999) {return globePosition;}vec4 fallbackPosition=u_projection_fallback_matrix*vec4(posInTile,elevation,1.0);return mix(fallbackPosition,globePosition,u_projection_transition);}vec4 projectTile(vec2 posInTile) {return interpolateProjection(posInTile,projectToSphere(posInTile),0.0);}vec4 projectTile(vec2 posInTile,vec2 rawPos) {return interpolateProjection(posInTile,projectToSphere(posInTile,rawPos),0.0);}vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return interpolateProjection(posInTile,projectToSphere(posInTile),elevation);}vec4 projectTileFor3D(vec2 posInTile,float elevation) {vec3 spherePos=projectToSphere(posInTile,posInTile);return interpolateProjectionFor3D(posInTile,spherePos,elevation);}`),background:an(`uniform vec4 u_color;uniform float u_opacity;void main() {fragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"in vec2 a_pos;void main() {gl_Position=projectTile(a_pos);}"),backgroundPattern:an(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;in vec2 v_pos_a;in vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);fragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;in vec2 a_pos;out vec2 v_pos_a;out vec2 v_pos_b;void main() {gl_Position=projectTile(a_pos);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),circle:an(`in vec3 v_data;in float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);float antialiased_blur=v_data.z;float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));fragColor=v_visibility*opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);const float epsilon=0.5/255.0;if (fragColor.r < epsilon && fragColor.g < epsilon && fragColor.b < epsilon && fragColor.a < epsilon) {discard;}
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform highp float u_globe_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;uniform vec2 u_translate;in vec2 a_pos;out vec3 v_data;out float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 pos_raw=a_pos+32768.0;vec2 extrude=vec2(mod(pos_raw,8.0)/7.0*2.0-1.0);vec2 circle_center=floor(pos_raw/8.0)+u_translate;float ele=get_elevation(circle_center);v_visibility=calculate_visibility(projectTileWithElevation(circle_center,ele));if (u_pitch_with_map) {
#ifdef GLOBE
vec3 center_vector=projectToSphere(circle_center);
#endif
float angle_scale=u_globe_extrude_scale;vec2 corner_position=circle_center;if (u_scale_with_map) {angle_scale*=(radius+stroke_width);corner_position+=extrude*u_extrude_scale*(radius+stroke_width);} else {
#ifdef GLOBE
vec4 projected_center=interpolateProjection(circle_center,center_vector,ele);
#else
vec4 projected_center=projectTileWithElevation(circle_center,ele);
#endif
corner_position+=extrude*u_extrude_scale*(radius+stroke_width)*(projected_center.w/u_camera_to_center_distance);angle_scale*=(radius+stroke_width)*(projected_center.w/u_camera_to_center_distance);}
#ifdef GLOBE
vec2 angles=extrude*angle_scale;vec3 corner_vector=globeRotateVector(center_vector,angles);gl_Position=interpolateProjection(corner_position,corner_vector,ele);
#else
gl_Position=projectTileWithElevation(corner_position,ele);
#endif
} else {gl_Position=projectTileWithElevation(circle_center,ele);if (gl_Position.z/gl_Position.w > 1.0) {gl_Position.xy=vec2(10000.0);}if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}float antialiasblur=-max(1.0/u_device_pixel_ratio/(radius+stroke_width),blur);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),clippingMask:an(JA,"in vec2 a_pos;void main() {gl_Position=projectTile(a_pos);}"),heatmap:an(`uniform highp float u_intensity;in vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);fragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;uniform highp float u_globe_extrude_scale;in vec2 a_pos;out vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 pos_raw=a_pos+32768.0;vec2 unscaled_extrude=vec2(mod(pos_raw,8.0)/7.0*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec2 circle_center=floor(pos_raw/8.0);
#ifdef GLOBE
vec2 angles=v_extrude*radius*u_globe_extrude_scale;vec3 center_vector=projectToSphere(circle_center);vec3 corner_vector=globeRotateVector(center_vector,angles);gl_Position=interpolateProjection(circle_center+extrude,corner_vector,0.0);
#else
gl_Position=projectTileFor3D(circle_center+extrude,get_elevation(circle_center));
#endif
}`),heatmapTexture:an(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;in vec2 v_pos;void main() {float t=texture(u_image,v_pos).r;vec4 color=texture(u_color_ramp,vec2(t,0.5));fragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),collisionBox:an("in float v_placed;in float v_notUsed;void main() {float alpha=0.5;fragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {fragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {fragColor*=.1;}}","in vec2 a_anchor_pos;in vec2 a_placed;in vec2 a_box_real;uniform vec2 u_pixel_extrude_scale;out float v_placed;out float v_notUsed;void main() {gl_Position=projectTileWithElevation(a_anchor_pos,get_elevation(a_anchor_pos));gl_Position.xy=((a_box_real+0.5)*u_pixel_extrude_scale*2.0-1.0)*vec2(1.0,-1.0)*gl_Position.w;if (gl_Position.z/gl_Position.w < 1.1) {gl_Position.z=0.5;}v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:an("in float v_radius;in vec2 v_extrude;in float v_collision;void main() {float alpha=0.5;float stroke_radius=0.9;float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);fragColor=color*alpha*opacity_t;}","in vec2 a_pos;in float a_radius;in vec2 a_flags;uniform vec2 u_viewport_size;out float v_radius;out vec2 v_extrude;out float v_collision;void main() {float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_collision=collision;gl_Position=vec4((a_pos/u_viewport_size*2.0-1.0)*vec2(1.0,-1.0),0.0,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),colorRelief:an(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;uniform vec4 u_unpack;uniform sampler2D u_elevation_stops;uniform sampler2D u_color_stops;uniform int u_color_ramp_size;uniform float u_opacity;in vec2 v_pos;float getElevation(vec2 coord) {vec4 data=texture(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack);}float getElevationStop(int stop) {float x=(float(stop)+0.5)/float(u_color_ramp_size);vec4 data=texture(u_elevation_stops,vec2(x,0))*255.0;data.a=-1.0;return dot(data,u_unpack);}void main() {float el=getElevation(v_pos);int r=(u_color_ramp_size-1);int l=0;float el_l=getElevationStop(l);float el_r=getElevationStop(r);while(r-l > 1){int m=(r+l)/2;float el_m=getElevationStop(m);if(el < el_m){r=m;el_r=el_m;}else
{l=m;el_l=el_m;}}float x=(float(l)+(el-el_l)/(el_r-el_l)+0.5)/float(u_color_ramp_size);fragColor=u_opacity*texture(u_color_stops,vec2(x,0));
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform vec2 u_dimension;in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=projectTile(a_pos,a_pos);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_pos/8192.0)*scale+epsilon;if (a_pos.y <-32767.5) {v_pos.y=0.0;}if (a_pos.y > 32766.5) {v_pos.y=1.0;}}"),debug:an("uniform highp vec4 u_color;uniform sampler2D u_overlay;in vec2 v_uv;void main() {vec4 overlay_color=texture(u_overlay,v_uv);fragColor=mix(u_color,overlay_color,overlay_color.a);}","in vec2 a_pos;out vec2 v_uv;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=projectTileWithElevation(a_pos*u_overlay_scale,get_elevation(a_pos));}"),depth:an(JA,`in vec2 a_pos;void main() {
#ifdef GLOBE
gl_Position=projectTileFor3D(a_pos,0.0);
#else
gl_Position=u_projection_matrix*vec4(a_pos,0.0,1.0);
#endif
}`),fill:an(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
fragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_fill_translate;in vec2 a_pos;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=projectTile(a_pos+u_fill_translate,a_pos);}`),fillOutline:an(`in vec2 v_pos;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);fragColor=outline_color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_world;uniform vec2 u_fill_translate;in vec2 a_pos;out vec2 v_pos;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=projectTile(a_pos+u_fill_translate,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
}`),fillOutlinePattern:an(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;in vec2 v_pos_a;in vec2 v_pos_b;in vec2 v_pos;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);fragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;uniform vec2 u_fill_translate;in vec2 a_pos;out vec2 v_pos_a;out vec2 v_pos_b;out vec2 v_pos;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=projectTile(a_pos+u_fill_translate,a_pos);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
}`),fillPattern:an(`#ifdef GL_ES
precision highp float;
#endif
uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;in vec2 v_pos_a;in vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);fragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;uniform vec2 u_fill_translate;in vec2 a_pos;out vec2 v_pos_a;out vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=projectTile(a_pos+u_fill_translate,a_pos);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),fillExtrusion:an(`in vec4 v_color;void main() {fragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp vec3 u_lightpos_globe;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec2 u_fill_translate;in vec2 a_pos;in vec4 a_normal_ed;
#ifdef TERRAIN3D
in vec2 a_centroid;
#endif
out vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float elevation=t > 0.0 ? height : base;vec2 posInTile=a_pos+u_fill_translate;
#ifdef GLOBE
vec3 spherePos=projectToSphere(posInTile,a_pos);gl_Position=interpolateProjectionFor3D(posInTile,spherePos,elevation);
#else
gl_Position=u_projection_matrix*vec4(posInTile,elevation,1.0);
#endif
float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;vec3 normalForLighting=normal/16384.0;float directional=clamp(dot(normalForLighting,u_lightpos),0.0,1.0);
#ifdef GLOBE
mat3 rotMatrix=globeGetRotationMatrix(spherePos);normalForLighting=rotMatrix*normalForLighting;directional=mix(directional,clamp(dot(normalForLighting,u_lightpos_globe),0.0,1.0),u_projection_transition);
#endif
directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),fillExtrusionPattern:an(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;in vec2 v_pos_a;in vec2 v_pos_b;in vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);fragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec2 u_fill_translate;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp vec3 u_lightpos_globe;uniform lowp float u_lightintensity;in vec2 a_pos;in vec4 a_normal_ed;
#ifdef TERRAIN3D
in vec2 a_centroid;
#endif
#ifdef GLOBE
out vec3 v_sphere_pos;
#endif
out vec2 v_pos_a;out vec2 v_pos_b;out vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float elevation=t > 0.0 ? height : base;vec2 posInTile=a_pos+u_fill_translate;
#ifdef GLOBE
vec3 spherePos=projectToSphere(posInTile,a_pos);vec3 elevatedPos=spherePos*(1.0+elevation/GLOBE_RADIUS);v_sphere_pos=elevatedPos;gl_Position=interpolateProjectionFor3D(posInTile,spherePos,elevation);
#else
gl_Position=u_projection_matrix*vec4(posInTile,elevation,1.0);
#endif
vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,elevation*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),hillshadePrepare:an(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;in vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack);}void main() {vec2 epsilon=1.0/u_dimension;float tileSize=u_dimension.x-2.0;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))*tileSize/pow(2.0,exaggeration+(28.2562-u_zoom));fragColor=clamp(vec4(deriv.x/8.0+0.5,deriv.y/8.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;in vec2 a_pos;in vec2 a_texture_pos;out vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:an(`uniform sampler2D u_image;in vec2 v_pos;uniform vec2 u_latrange;uniform float u_exaggeration;uniform vec4 u_accent;uniform int u_method;uniform float u_altitudes[NUM_ILLUMINATION_SOURCES];uniform float u_azimuths[NUM_ILLUMINATION_SOURCES];uniform vec4 u_shadows[NUM_ILLUMINATION_SOURCES];uniform vec4 u_highlights[NUM_ILLUMINATION_SOURCES];
#define PI 3.141592653589793
#define STANDARD 0
#define COMBINED 1
#define IGOR 2
#define MULTIDIRECTIONAL 3
#define BASIC 4
float get_aspect(vec2 deriv){return deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);}void igor_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;float aspect=get_aspect(deriv);float azimuth=u_azimuths[0]+PI;float slope_stength=atan(length(deriv))*2.0/PI;float aspect_strength=1.0-abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);float shadow_strength=slope_stength*aspect_strength;float highlight_strength=slope_stength*(1.0-aspect_strength);fragColor=u_shadows[0]*shadow_strength+u_highlights[0]*highlight_strength;}void standard_hillshade(vec2 deriv){float azimuth=u_azimuths[0]+PI;float slope=atan(0.625*length(deriv));float aspect=get_aspect(deriv);float intensity=u_exaggeration;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadows[0],u_highlights[0],shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);fragColor=accent_color*(1.0-shade_color.a)+shade_color;}void basic_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;float azimuth=u_azimuths[0]+PI;float cos_az=cos(azimuth);float sin_az=sin(azimuth);float cos_alt=cos(u_altitudes[0]);float sin_alt=sin(u_altitudes[0]);float cang=(sin_alt-(deriv.y*cos_az*cos_alt-deriv.x*sin_az*cos_alt))/sqrt(1.0+dot(deriv,deriv));float shade=clamp(cang,0.0,1.0);if(shade > 0.5){fragColor=u_highlights[0]*(2.0*shade-1.0);}else
{fragColor=u_shadows[0]*(1.0-2.0*shade);}}void multidirectional_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;fragColor=vec4(0,0,0,0);for(int i=0; i < NUM_ILLUMINATION_SOURCES; i++){float cos_alt=cos(u_altitudes[i]);float sin_alt=sin(u_altitudes[i]);float cos_az=-cos(u_azimuths[i]);float sin_az=-sin(u_azimuths[i]);float cang=(sin_alt-(deriv.y*cos_az*cos_alt-deriv.x*sin_az*cos_alt))/sqrt(1.0+dot(deriv,deriv));float shade=clamp(cang,0.0,1.0);if(shade > 0.5){fragColor+=u_highlights[i]*(2.0*shade-1.0)/float(NUM_ILLUMINATION_SOURCES);}else
{fragColor+=u_shadows[i]*(1.0-2.0*shade)/float(NUM_ILLUMINATION_SOURCES);}}}void combined_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;float azimuth=u_azimuths[0]+PI;float cos_az=cos(azimuth);float sin_az=sin(azimuth);float cos_alt=cos(u_altitudes[0]);float sin_alt=sin(u_altitudes[0]);float cang=acos((sin_alt-(deriv.y*cos_az*cos_alt-deriv.x*sin_az*cos_alt))/sqrt(1.0+dot(deriv,deriv)));cang=clamp(cang,0.0,PI/2.0);float shade=cang*atan(length(deriv))*4.0/PI/PI;float highlight=(PI/2.0-cang)*atan(length(deriv))*4.0/PI/PI;fragColor=u_shadows[0]*shade+u_highlights[0]*highlight;}void main() {vec4 pixel=texture(u_image,v_pos);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));vec2 deriv=((pixel.rg*8.0)-4.0)/scaleFactor;if (u_method==BASIC) {basic_hillshade(deriv);} else if (u_method==COMBINED) {combined_hillshade(deriv);} else if (u_method==IGOR) {igor_hillshade(deriv);} else if (u_method==MULTIDIRECTIONAL) {multidirectional_hillshade(deriv);} else if (u_method==STANDARD) {standard_hillshade(deriv);} else {standard_hillshade(deriv);}
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=projectTile(a_pos,a_pos);v_pos=a_pos/8192.0;if (a_pos.y <-32767.5) {v_pos.y=0.0;}if (a_pos.y > 32766.5) {v_pos.y=1.0;}}"),line:an(`uniform lowp float u_device_pixel_ratio;in vec2 v_width2;in vec2 v_normal;in float v_gamma_scale;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);fragColor=color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
in vec2 a_pos_normal;in vec4 a_data;uniform vec2 u_translation;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;out vec2 v_normal;out vec2 v_width2;out float v_gamma_scale;out highp float v_linesofar;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),lineGradient:an(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;in vec2 v_width2;in vec2 v_normal;in float v_gamma_scale;in highp vec2 v_uv;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture(u_image,v_uv);fragColor=color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
in vec2 a_pos_normal;in vec4 a_data;in float a_uv_x;in float a_split_index;uniform vec2 u_translation;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;out vec2 v_normal;out vec2 v_width2;out float v_gamma_scale;out highp vec2 v_uv;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),linePattern:an(`#ifdef GL_ES
precision highp float;
#endif
uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;in vec2 v_normal;in vec2 v_width2;in float v_linesofar;in float v_gamma_scale;in float v_width;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture(u_image,pos_a),texture(u_image,pos_b),u_fade);fragColor=color*alpha*opacity;
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
in vec2 a_pos_normal;in vec4 a_data;uniform vec2 u_translation;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;out vec2 v_normal;out vec2 v_width2;out float v_linesofar;out float v_gamma_scale;out float v_width;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),lineSDF:an(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;in vec2 v_normal;in vec2 v_width2;in vec2 v_tex_a;in vec2 v_tex_b;in float v_gamma_scale;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture(u_image,v_tex_a).a;float sdfdist_b=texture(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);fragColor=color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
in vec2 a_pos_normal;in vec4 a_data;uniform vec2 u_translation;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;out vec2 v_normal;out vec2 v_width2;out vec2 v_tex_a;out vec2 v_tex_b;out float v_gamma_scale;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`),raster:an(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;in vec2 v_pos0;in vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture(u_image0,v_pos0);vec4 color1=texture(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);fragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;uniform vec4 u_coords_top;uniform vec4 u_coords_bottom;in vec2 a_pos;out vec2 v_pos0;out vec2 v_pos1;void main() {vec2 fractionalPos=a_pos/8192.0;vec2 position=mix(mix(u_coords_top.xy,u_coords_top.zw,fractionalPos.x),mix(u_coords_bottom.xy,u_coords_bottom.zw,fractionalPos.x),fractionalPos.y);gl_Position=projectTile(position,position);v_pos0=((fractionalPos-0.5)/u_buffer_scale)+0.5;
#ifdef GLOBE
if (a_pos.y <-32767.5) {v_pos0.y=0.0;}if (a_pos.y > 32766.5) {v_pos0.y=1.0;}
#endif
v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}`),symbolIcon:an(`uniform sampler2D u_texture;in vec2 v_tex;in float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;fragColor=texture(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`in vec4 a_pos_offset;in vec4 a_data;in vec4 a_pixeloffset;in vec3 a_projected_pos;in float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;out vec2 v_tex;out float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;
#ifdef GLOBE
if(u_pitch_with_map) {float anchor_pos_tile_y=(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w,z,1.0)).y;projectionScaling=mix(projectionScaling,1.0/circumferenceRatioAtTileY(anchor_pos_tile_y)*u_pitched_scale,u_projection_transition);}
#endif
vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}gl_Position=finalPos;v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float visibility=calculate_visibility(projectedPoint);v_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));}`),symbolSDF:an(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;in vec2 v_data0;in vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float inner_edge=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);inner_edge=inner_edge+gamma*gamma_scale;}lowp float dist=texture(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(inner_edge-gamma_scaled,inner_edge+gamma_scaled,dist);if (u_is_halo) {lowp float halo_edge=(6.0-halo_width/fontScale)/SDF_PX;alpha=min(smoothstep(halo_edge-gamma_scaled,halo_edge+gamma_scaled,dist),1.0-alpha);}fragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`in vec4 a_pos_offset;in vec4 a_data;in vec4 a_pixeloffset;in vec3 a_projected_pos;in float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_translation;uniform float u_pitched_scale;out vec2 v_data0;out vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;
#ifdef GLOBE
if(u_pitch_with_map) {float anchor_pos_tile_y=(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w,z,1.0)).y;projectionScaling=mix(projectionScaling,1.0/circumferenceRatioAtTileY(anchor_pos_tile_y)*u_pitched_scale,u_projection_transition);}
#endif
vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),symbolTextAndIcon:an(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;in vec4 v_data0;in vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;fragColor=texture(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);fragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`in vec4 a_pos_offset;in vec4 a_data;in vec3 a_projected_pos;in float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;out vec4 v_data0;out vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;
#ifdef GLOBE
if(u_pitch_with_map && !u_is_along_line) {float anchor_pos_tile_y=(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w,z,1.0)).y;projectionScaling=mix(projectionScaling,1.0/circumferenceRatioAtTileY(anchor_pos_tile_y)*u_pitched_scale,u_projection_transition);}
#endif
vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`),terrain:an("uniform sampler2D u_texture;uniform vec4 u_fog_color;uniform vec4 u_horizon_color;uniform float u_fog_ground_blend;uniform float u_fog_ground_blend_opacity;uniform float u_horizon_fog_blend;uniform bool u_is_globe_mode;in vec2 v_texture_pos;in float v_fog_depth;const float gamma=2.2;vec4 gammaToLinear(vec4 color) {return pow(color,vec4(gamma));}vec4 linearToGamma(vec4 color) {return pow(color,vec4(1.0/gamma));}void main() {vec4 surface_color=texture(u_texture,vec2(v_texture_pos.x,1.0-v_texture_pos.y));if (!u_is_globe_mode && v_fog_depth > u_fog_ground_blend) {vec4 surface_color_linear=gammaToLinear(surface_color);float blend_color=smoothstep(0.0,1.0,max((v_fog_depth-u_horizon_fog_blend)/(1.0-u_horizon_fog_blend),0.0));vec4 fog_horizon_color_linear=mix(gammaToLinear(u_fog_color),gammaToLinear(u_horizon_color),blend_color);float factor_fog=max(v_fog_depth-u_fog_ground_blend,0.0)/(1.0-u_fog_ground_blend);fragColor=linearToGamma(mix(surface_color_linear,fog_horizon_color_linear,pow(factor_fog,2.0)*u_fog_ground_blend_opacity));} else {fragColor=surface_color;}}","in vec3 a_pos3d;uniform mat4 u_fog_matrix;uniform float u_ele_delta;out vec2 v_texture_pos;out float v_fog_depth;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/8192.0;gl_Position=projectTileFor3D(a_pos3d.xy,get_elevation(a_pos3d.xy)-ele_delta);vec4 pos=u_fog_matrix*vec4(a_pos3d.xy,ele,1.0);v_fog_depth=pos.z/pos.w*0.5+0.5;}"),terrainDepth:an("in float v_depth;const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitMsk=vec4(0.,vec3(1./256.0));highp vec4 pack(highp float value) {highp vec4 comp=fract(value*bitSh);comp-=comp.xxyz*bitMsk;return comp;}void main() {fragColor=pack(v_depth);}","in vec3 a_pos3d;uniform float u_ele_delta;out float v_depth;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;gl_Position=projectTileFor3D(a_pos3d.xy,ele-ele_delta);v_depth=gl_Position.z/gl_Position.w;}"),terrainCoords:an("precision mediump float;uniform sampler2D u_texture;uniform float u_terrain_coords_id;in vec2 v_texture_pos;void main() {vec4 rgba=texture(u_texture,v_texture_pos);fragColor=vec4(rgba.r,rgba.g,rgba.b,u_terrain_coords_id);}","in vec3 a_pos3d;uniform float u_ele_delta;out vec2 v_texture_pos;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/8192.0;gl_Position=projectTileFor3D(a_pos3d.xy,ele-ele_delta);}"),projectionErrorMeasurement:an("in vec4 v_output_error_encoded;void main() {fragColor=v_output_error_encoded;}","in vec2 a_pos;uniform highp float u_input;uniform highp float u_output_expected;out vec4 v_output_error_encoded;void main() {float real_output=2.0*atan(exp(PI-(u_input*PI*2.0)))-PI*0.5;float error=real_output-u_output_expected;float abs_error=abs(error)*128.0;v_output_error_encoded.x=min(floor(abs_error*256.0),255.0)/255.0;abs_error-=v_output_error_encoded.x;v_output_error_encoded.y=min(floor(abs_error*65536.0),255.0)/255.0;abs_error-=v_output_error_encoded.x/255.0;v_output_error_encoded.z=min(floor(abs_error*16777216.0),255.0)/255.0;v_output_error_encoded.w=error >=0.0 ? 1.0 : 0.0;gl_Position=vec4(a_pos,0.0,1.0);}"),atmosphere:an(`in vec3 view_direction;uniform vec3 u_sun_pos;uniform vec3 u_globe_position;uniform float u_globe_radius;uniform float u_atmosphere_blend;/**Shader use from https:*Made some change to adapt to MapLibre Globe geometry*/const float PI=3.141592653589793;const int iSteps=5;const int jSteps=3;/*radius of the planet*/const float EARTH_RADIUS=6371e3;/*radius of the atmosphere*/const float ATMOS_RADIUS=6471e3;vec2 rsi(vec3 r0,vec3 rd,float sr) {float a=dot(rd,rd);float b=2.0*dot(rd,r0);float c=dot(r0,r0)-(sr*sr);float d=(b*b)-4.0*a*c;if (d < 0.0) return vec2(1e5,-1e5);return vec2((-b-sqrt(d))/(2.0*a),(-b+sqrt(d))/(2.0*a));}vec4 atmosphere(vec3 r,vec3 r0,vec3 pSun,float iSun,float rPlanet,float rAtmos,vec3 kRlh,float kMie,float shRlh,float shMie,float g) {pSun=normalize(pSun);r=normalize(r);vec2 p=rsi(r0,r,rAtmos);if (p.x > p.y) {return vec4(0.0,0.0,0.0,1.0);}if (p.x < 0.0) {p.x=0.0;}vec3 pos=r0+r*p.x;vec2 p2=rsi(r0,r,rPlanet);if (p2.x <=p2.y && p2.x > 0.0) {p.y=min(p.y,p2.x);}float iStepSize=(p.y-p.x)/float(iSteps);float iTime=p.x+iStepSize*0.5;vec3 totalRlh=vec3(0,0,0);vec3 totalMie=vec3(0,0,0);float iOdRlh=0.0;float iOdMie=0.0;float mu=dot(r,pSun);float mumu=mu*mu;float gg=g*g;float pRlh=3.0/(16.0*PI)*(1.0+mumu);float pMie=3.0/(8.0*PI)*((1.0-gg)*(mumu+1.0))/(pow(1.0+gg-2.0*mu*g,1.5)*(2.0+gg));for (int i=0; i < iSteps; i++) {vec3 iPos=r0+r*iTime;float iHeight=length(iPos)-rPlanet;float odStepRlh=exp(-iHeight/shRlh)*iStepSize;float odStepMie=exp(-iHeight/shMie)*iStepSize;iOdRlh+=odStepRlh;iOdMie+=odStepMie;float jStepSize=rsi(iPos,pSun,rAtmos).y/float(jSteps);float jTime=jStepSize*0.5;float jOdRlh=0.0;float jOdMie=0.0;for (int j=0; j < jSteps; j++) {vec3 jPos=iPos+pSun*jTime;float jHeight=length(jPos)-rPlanet;jOdRlh+=exp(-jHeight/shRlh)*jStepSize;jOdMie+=exp(-jHeight/shMie)*jStepSize;jTime+=jStepSize;}vec3 attn=exp(-(kMie*(iOdMie+jOdMie)+kRlh*(iOdRlh+jOdRlh)));totalRlh+=odStepRlh*attn;totalMie+=odStepMie*attn;iTime+=iStepSize;}float opacity=exp(-(length(kRlh)*length(totalRlh)+kMie*length(totalMie)));vec3 color=iSun*(pRlh*kRlh*totalRlh+pMie*kMie*totalMie);return vec4(color,opacity);}void main() {vec3 scale_camera_pos=-u_globe_position*EARTH_RADIUS/u_globe_radius;vec4 color=atmosphere(normalize(view_direction),scale_camera_pos,u_sun_pos,22.0,EARTH_RADIUS,ATMOS_RADIUS,vec3(5.5e-6,13.0e-6,22.4e-6),21e-6,8e3,1.2e3,0.758
);color.rgb=1.0-exp(-1.0*color.rgb);color=pow(color,vec4(1.0/2.2));fragColor=vec4(color.rgb,1.0-color.a)*u_atmosphere_blend;}`,"in vec2 a_pos;uniform mat4 u_inv_proj_matrix;out vec3 view_direction;void main() {view_direction=(u_inv_proj_matrix*vec4(a_pos,0.0,1.0)).xyz;gl_Position=vec4(a_pos,0.0,1.0);}"),sky:an("uniform vec4 u_sky_color;uniform vec4 u_horizon_color;uniform vec2 u_horizon;uniform vec2 u_horizon_normal;uniform float u_sky_horizon_blend;uniform float u_sky_blend;void main() {float x=gl_FragCoord.x;float y=gl_FragCoord.y;float blend=(y-u_horizon.y)*u_horizon_normal.y+(x-u_horizon.x)*u_horizon_normal.x;if (blend > 0.0) {if (blend < u_sky_horizon_blend) {fragColor=mix(u_sky_color,u_horizon_color,pow(1.0-blend/u_sky_horizon_blend,2.0));} else {fragColor=u_sky_color;}}fragColor=mix(fragColor,vec4(vec3(0.0),0.0),u_sky_blend);}","in vec2 a_pos;void main() {gl_Position=vec4(a_pos,1.0,1.0);}")};function an(v,n){const l=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,f=n.match(/in ([\w]+) ([\w]+)/g),p=v.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),_=n.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),S=_?_.concat(p):p,P={};return{fragmentSource:v=v.replace(l,(M,z,K,Z,$)=>(P[$]=!0,z==="define"?`
#ifndef HAS_UNIFORM_u_${$}
in ${K} ${Z} ${$};
#else
uniform ${K} ${Z} u_${$};
#endif
`:`
#ifdef HAS_UNIFORM_u_${$}
    ${K} ${Z} ${$} = u_${$};
#endif
`)),vertexSource:n=n.replace(l,(M,z,K,Z,$)=>{const Y=Z==="float"?"vec2":"vec4",he=$.match(/color/)?"color":Y;return P[$]?z==="define"?`
#ifndef HAS_UNIFORM_u_${$}
uniform lowp float u_${$}_t;
in ${K} ${Y} a_${$};
out ${K} ${Z} ${$};
#else
uniform ${K} ${Z} u_${$};
#endif
`:he==="vec4"?`
#ifndef HAS_UNIFORM_u_${$}
    ${$} = a_${$};
#else
    ${K} ${Z} ${$} = u_${$};
#endif
`:`
#ifndef HAS_UNIFORM_u_${$}
    ${$} = unpack_mix_${he}(a_${$}, u_${$}_t);
#else
    ${K} ${Z} ${$} = u_${$};
#endif
`:z==="define"?`
#ifndef HAS_UNIFORM_u_${$}
uniform lowp float u_${$}_t;
in ${K} ${Y} a_${$};
#else
uniform ${K} ${Z} u_${$};
#endif
`:he==="vec4"?`
#ifndef HAS_UNIFORM_u_${$}
    ${K} ${Z} ${$} = a_${$};
#else
    ${K} ${Z} ${$} = u_${$};
#endif
`:`
#ifndef HAS_UNIFORM_u_${$}
    ${K} ${Z} ${$} = unpack_mix_${he}(a_${$}, u_${$}_t);
#else
    ${K} ${Z} ${$} = u_${$};
#endif
`}),staticAttributes:f,staticUniforms:S}}class ia{constructor(n,l,f){this.vertexBuffer=n,this.indexBuffer=l,this.segments=f}destroy(){this.vertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.vertexBuffer=null,this.indexBuffer=null,this.segments=null}}var sa=o.aI([{name:"a_pos",type:"Int16",components:2}]);const Rs="#define PROJECTION_MERCATOR",Pl="mercator";class Ll{constructor(){this._cachedMesh=null}get name(){return"mercator"}get useSubdivision(){return!1}get shaderVariantName(){return Pl}get shaderDefine(){return Rs}get shaderPreludeCode(){return Js.projectionMercator}get vertexShaderPreludeCode(){return Js.projectionMercator.vertexSource}get subdivisionGranularity(){return o.aJ.noSubdivision}get useGlobeControls(){return!1}get transitionState(){return 0}get latitudeErrorCorrectionRadians(){return 0}destroy(){}updateGPUdependent(n){}getMeshFromTileID(n,l,f,p,_){if(this._cachedMesh)return this._cachedMesh;const S=new o.aK;S.emplaceBack(0,0),S.emplaceBack(o.$,0),S.emplaceBack(0,o.$),S.emplaceBack(o.$,o.$);const P=n.createVertexBuffer(S,sa.members),M=o.aL.simpleSegment(0,0,4,2),z=new o.aM;z.emplaceBack(1,0,2),z.emplaceBack(1,2,3);const K=n.createIndexBuffer(z);return this._cachedMesh=new ia(P,K,M),this._cachedMesh}recalculate(){}hasTransition(){return!1}setErrorQueryLatitudeDegrees(n){}}class Ns{constructor(n=0,l=0,f=0,p=0){if(isNaN(n)||n<0||isNaN(l)||l<0||isNaN(f)||f<0||isNaN(p)||p<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=n,this.bottom=l,this.left=f,this.right=p}interpolate(n,l,f){return l.top!=null&&n.top!=null&&(this.top=o.C.number(n.top,l.top,f)),l.bottom!=null&&n.bottom!=null&&(this.bottom=o.C.number(n.bottom,l.bottom,f)),l.left!=null&&n.left!=null&&(this.left=o.C.number(n.left,l.left,f)),l.right!=null&&n.right!=null&&(this.right=o.C.number(n.right,l.right,f)),this}getCenter(n,l){const f=o.ag((this.left+n-this.right)/2,0,n),p=o.ag((this.top+l-this.bottom)/2,0,l);return new o.P(f,p)}equals(n){return this.top===n.top&&this.bottom===n.bottom&&this.left===n.left&&this.right===n.right}clone(){return new Ns(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}function ri(v,n){if(!v.renderWorldCopies||v.lngRange)return;const l=n.lng-v.center.lng;n.lng+=l>180?-360:l<-180?360:0}function ln(v){return Math.max(0,Math.floor(v))}class Ml{constructor(n,l,f,p,_,S){this._callbacks=n,this._tileSize=512,this._renderWorldCopies=S===void 0||!!S,this._minZoom=l||0,this._maxZoom=f||22,this._minPitch=p??0,this._maxPitch=_??60,this.setMaxBounds(),this._width=0,this._height=0,this._center=new o.S(0,0),this._elevation=0,this._zoom=0,this._tileZoom=ln(this._zoom),this._scale=o.ae(this._zoom),this._bearingInRadians=0,this._fovInRadians=.6435011087932844,this._pitchInRadians=0,this._rollInRadians=0,this._unmodified=!0,this._edgeInsets=new Ns,this._minElevationForCurrentTile=0,this._autoCalculateNearFarZ=!0}apply(n,l,f){this._latRange=n.latRange,this._lngRange=n.lngRange,this._width=n.width,this._height=n.height,this._center=n.center,this._elevation=n.elevation,this._minElevationForCurrentTile=n.minElevationForCurrentTile,this._zoom=n.zoom,this._tileZoom=ln(this._zoom),this._scale=o.ae(this._zoom),this._bearingInRadians=n.bearingInRadians,this._fovInRadians=n.fovInRadians,this._pitchInRadians=n.pitchInRadians,this._rollInRadians=n.rollInRadians,this._unmodified=n.unmodified,this._edgeInsets=new Ns(n.padding.top,n.padding.bottom,n.padding.left,n.padding.right),this._minZoom=n.minZoom,this._maxZoom=n.maxZoom,this._minPitch=n.minPitch,this._maxPitch=n.maxPitch,this._renderWorldCopies=n.renderWorldCopies,this._cameraToCenterDistance=n.cameraToCenterDistance,this._nearZ=n.nearZ,this._farZ=n.farZ,this._autoCalculateNearFarZ=!f&&n.autoCalculateNearFarZ,l&&this._constrain(),this._calcMatrices()}get pixelsToClipSpaceMatrix(){return this._pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._clipSpaceToPixelsMatrix}get minElevationForCurrentTile(){return this._minElevationForCurrentTile}setMinElevationForCurrentTile(n){this._minElevationForCurrentTile=n}get tileSize(){return this._tileSize}get tileZoom(){return this._tileZoom}get scale(){return this._scale}get width(){return this._width}get height(){return this._height}get bearingInRadians(){return this._bearingInRadians}get lngRange(){return this._lngRange}get latRange(){return this._latRange}get pixelsToGLUnits(){return this._pixelsToGLUnits}get minZoom(){return this._minZoom}setMinZoom(n){this._minZoom!==n&&(this._minZoom=n,this.setZoom(this.getConstrained(this._center,this.zoom).zoom))}get maxZoom(){return this._maxZoom}setMaxZoom(n){this._maxZoom!==n&&(this._maxZoom=n,this.setZoom(this.getConstrained(this._center,this.zoom).zoom))}get minPitch(){return this._minPitch}setMinPitch(n){this._minPitch!==n&&(this._minPitch=n,this.setPitch(Math.max(this.pitch,n)))}get maxPitch(){return this._maxPitch}setMaxPitch(n){this._maxPitch!==n&&(this._maxPitch=n,this.setPitch(Math.min(this.pitch,n)))}get renderWorldCopies(){return this._renderWorldCopies}setRenderWorldCopies(n){n===void 0?n=!0:n===null&&(n=!1),this._renderWorldCopies=n}get worldSize(){return this._tileSize*this._scale}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new o.P(this._width,this._height)}get bearing(){return this._bearingInRadians/Math.PI*180}setBearing(n){const l=o.aN(n,-180,180)*Math.PI/180;var f,p,_,S,P,M,z,K,Z;this._bearingInRadians!==l&&(this._unmodified=!1,this._bearingInRadians=l,this._calcMatrices(),this._rotationMatrix=y(),f=this._rotationMatrix,_=-this._bearingInRadians,S=(p=this._rotationMatrix)[0],P=p[1],M=p[2],z=p[3],K=Math.sin(_),Z=Math.cos(_),f[0]=S*Z+M*K,f[1]=P*Z+z*K,f[2]=S*-K+M*Z,f[3]=P*-K+z*Z)}get rotationMatrix(){return this._rotationMatrix}get pitchInRadians(){return this._pitchInRadians}get pitch(){return this._pitchInRadians/Math.PI*180}setPitch(n){const l=o.ag(n,this.minPitch,this.maxPitch)/180*Math.PI;this._pitchInRadians!==l&&(this._unmodified=!1,this._pitchInRadians=l,this._calcMatrices())}get rollInRadians(){return this._rollInRadians}get roll(){return this._rollInRadians/Math.PI*180}setRoll(n){const l=n/180*Math.PI;this._rollInRadians!==l&&(this._unmodified=!1,this._rollInRadians=l,this._calcMatrices())}get fovInRadians(){return this._fovInRadians}get fov(){return o.aO(this._fovInRadians)}setFov(n){n=o.ag(n,.1,150),this.fov!==n&&(this._unmodified=!1,this._fovInRadians=o.ad(n),this._calcMatrices())}get zoom(){return this._zoom}setZoom(n){const l=this.getConstrained(this._center,n).zoom;this._zoom!==l&&(this._unmodified=!1,this._zoom=l,this._tileZoom=Math.max(0,Math.floor(l)),this._scale=o.ae(l),this._constrain(),this._calcMatrices())}get center(){return this._center}setCenter(n){n.lat===this._center.lat&&n.lng===this._center.lng||(this._unmodified=!1,this._center=n,this._constrain(),this._calcMatrices())}get elevation(){return this._elevation}setElevation(n){n!==this._elevation&&(this._elevation=n,this._constrain(),this._calcMatrices())}get padding(){return this._edgeInsets.toJSON()}setPadding(n){this._edgeInsets.equals(n)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,n,1),this._calcMatrices())}get centerPoint(){return this._edgeInsets.getCenter(this._width,this._height)}get pixelsPerMeter(){return this._pixelPerMeter}get unmodified(){return this._unmodified}get cameraToCenterDistance(){return this._cameraToCenterDistance}get nearZ(){return this._nearZ}get farZ(){return this._farZ}get autoCalculateNearFarZ(){return this._autoCalculateNearFarZ}overrideNearFarZ(n,l){this._autoCalculateNearFarZ=!1,this._nearZ=n,this._farZ=l,this._calcMatrices()}clearNearFarZOverride(){this._autoCalculateNearFarZ=!0,this._calcMatrices()}isPaddingEqual(n){return this._edgeInsets.equals(n)}interpolatePadding(n,l,f){this._unmodified=!1,this._edgeInsets.interpolate(n,l,f),this._constrain(),this._calcMatrices()}resize(n,l,f=!0){this._width=n,this._height=l,f&&this._constrain(),this._calcMatrices()}getMaxBounds(){return this._latRange&&this._latRange.length===2&&this._lngRange&&this._lngRange.length===2?new jt([this._lngRange[0],this._latRange[0]],[this._lngRange[1],this._latRange[1]]):null}setMaxBounds(n){n?(this._lngRange=[n.getWest(),n.getEast()],this._latRange=[n.getSouth(),n.getNorth()],this._constrain()):(this._lngRange=null,this._latRange=[-o.ah,o.ah])}getConstrained(n,l){return this._callbacks.getConstrained(n,l)}getCameraQueryGeometry(n,l){if(l.length===1)return[l[0],n];{const{minX:f,minY:p,maxX:_,maxY:S}=o.a1.fromPoints(l).extend(n);return[new o.P(f,p),new o.P(_,p),new o.P(_,S),new o.P(f,S),new o.P(f,p)]}}_constrain(){if(!this.center||!this._width||!this._height||this._constraining)return;this._constraining=!0;const n=this._unmodified,{center:l,zoom:f}=this.getConstrained(this.center,this.zoom);this.setCenter(l),this.setZoom(f),this._unmodified=n,this._constraining=!1}_calcMatrices(){if(this._width&&this._height){this._pixelsToGLUnits=[2/this._width,-2/this._height];let n=o.af(new Float64Array(16));o.N(n,n,[this._width/2,-this._height/2,1]),o.M(n,n,[1,-1,0]),this._clipSpaceToPixelsMatrix=n,n=o.af(new Float64Array(16)),o.N(n,n,[1,-1,1]),o.M(n,n,[-1,-1,0]),o.N(n,n,[2/this._width,2/this._height,1]),this._pixelsToClipSpaceMatrix=n,this._cameraToCenterDistance=.5/Math.tan(this.fovInRadians/2)*this._height}this._callbacks.calcMatrices()}calculateCenterFromCameraLngLatAlt(n,l,f,p){const _=f!==void 0?f:this.bearing,S=p=p!==void 0?p:this.pitch,P=o.a0.fromLngLat(n,l),M=-Math.cos(o.ad(S)),z=Math.sin(o.ad(S)),K=z*Math.sin(o.ad(_)),Z=-z*Math.cos(o.ad(_));let $=this.elevation;const Y=l-$;let he;M*Y>=0||Math.abs(M)<.1?(he=1e4,$=l+he*M):he=-Y/M;let Ie,Ee,Fe=o.aP(1,P.y),De=0;do{if(De+=1,De>10)break;Ee=he/Fe,Ie=new o.a0(P.x+K*Ee,P.y+Z*Ee),Fe=1/Ie.meterInMercatorCoordinateUnits()}while(Math.abs(he-Ee*Fe)>1e-12);return{center:Ie.toLngLat(),elevation:$,zoom:o.aj(this.height/2/Math.tan(this.fovInRadians/2)/Ee/this.tileSize)}}recalculateZoomAndCenter(n){if(this.elevation-n==0)return;const l=o.ai(1,this.center.lat)*this.worldSize,f=this.cameraToCenterDistance/l,p=o.a0.fromLngLat(this.center,this.elevation),_=Ne(this.center,this.elevation,this.pitch,this.bearing,f);this._elevation=n;const S=this.calculateCenterFromCameraLngLatAlt(_.toLngLat(),o.aP(_.z,p.y),this.bearing,this.pitch);this._elevation=S.elevation,this._center=S.center,this.setZoom(S.zoom)}getCameraPoint(){const n=Math.tan(this.pitchInRadians)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new o.P(n*Math.sin(this.rollInRadians),n*Math.cos(this.rollInRadians)))}getCameraAltitude(){return Math.cos(this.pitchInRadians)*this._cameraToCenterDistance/this._pixelPerMeter+this.elevation}getCameraLngLat(){const n=o.ai(1,this.center.lat)*this.worldSize;return Ne(this.center,this.elevation,this.pitch,this.bearing,this.cameraToCenterDistance/n).toLngLat()}getMercatorTileCoordinates(n){if(!n)return[0,0,1,1];const l=n.canonical.z>=0?1<<n.canonical.z:Math.pow(2,n.canonical.z);return[n.canonical.x/l,n.canonical.y/l,1/l/o.$,1/l/o.$]}}class qr{constructor(n,l){this.min=n,this.max=l,this.center=o.aQ([],o.aR([],this.min,this.max),.5)}quadrant(n){const l=[n%2==0,n<2],f=o.aS(this.min),p=o.aS(this.max);for(let _=0;_<l.length;_++)f[_]=l[_]?this.min[_]:this.center[_],p[_]=l[_]?this.center[_]:this.max[_];return p[2]=this.max[2],new qr(f,p)}distanceX(n){return Math.max(Math.min(this.max[0],n[0]),this.min[0])-n[0]}distanceY(n){return Math.max(Math.min(this.max[1],n[1]),this.min[1])-n[1]}intersectsFrustum(n){let l=!0;for(let f=0;f<n.planes.length;f++){const p=this.intersectsPlane(n.planes[f]);if(p===0)return 0;p===1&&(l=!1)}return l?2:n.aabb.min[0]>this.max[0]||n.aabb.min[1]>this.max[1]||n.aabb.min[2]>this.max[2]||n.aabb.max[0]<this.min[0]||n.aabb.max[1]<this.min[1]||n.aabb.max[2]<this.min[2]?0:1}intersectsPlane(n){let l=n[3],f=n[3];for(let p=0;p<3;p++)n[p]>0?(l+=n[p]*this.min[p],f+=n[p]*this.max[p]):(f+=n[p]*this.min[p],l+=n[p]*this.max[p]);return l>=0?2:f<0?0:1}}class Wc{distanceToTile2d(n,l,f,p){const _=p.distanceX([n,l]),S=p.distanceY([n,l]);return Math.hypot(_,S)}getWrap(n,l,f){return f}getTileBoundingVolume(n,l,f,p){var _,S;let P=f,M=f;if(p!=null&&p.terrain){const K=new o.Z(n.z,l,n.z,n.x,n.y),Z=p.terrain.getMinMaxElevation(K);P=(_=Z.minElevation)!==null&&_!==void 0?_:f,M=(S=Z.maxElevation)!==null&&S!==void 0?S:f}const z=1<<n.z;return new qr([l+n.x/z,n.y/z,P],[l+(n.x+1)/z,(n.y+1)/z,M])}allowVariableZoom(n,l){const f=n.fov*(Math.abs(Math.cos(n.rollInRadians))*n.height+Math.abs(Math.sin(n.rollInRadians))*n.width)/n.height,p=o.ag(78.5-f/2,0,60);return!!l.terrain||n.pitch>p}allowWorldCopies(){return!0}prepareNextFrame(){}}class ts{constructor(n,l,f){this.points=n,this.planes=l,this.aabb=f}static fromInvProjectionMatrix(n,l=1,f=0,p,_){const S=_?[[6,5,4],[0,1,2],[0,3,7],[2,1,5],[3,2,6],[0,4,5]]:[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]],P=Math.pow(2,f),M=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map($=>function(Y,he,Ie,Ee){const Fe=o.av([],Y,he),De=1/Fe[3]/Ie*Ee;return o.aX(Fe,Fe,[De,De,1/Fe[3],De])}($,n,l,P));p&&function($,Y,he,Ie){const Ee=Ie?4:0,Fe=Ie?0:4;let De=0;const Ve=[],Oe=[];for(let ze=0;ze<4;ze++){const ht=o.aT([],$[ze+Fe],$[ze+Ee]),St=o.aY(ht);o.aQ(ht,ht,1/St),Ve.push(St),Oe.push(ht)}for(let ze=0;ze<4;ze++){const ht=o.aZ($[ze+Ee],Oe[ze],he);De=ht!==null&&ht>=0?Math.max(De,ht):Math.max(De,Ve[ze])}const We=function(ze,ht){const St=o.aT([],ze[ht[0]],ze[ht[1]]),gt=o.aT([],ze[ht[2]],ze[ht[1]]),_t=[0,0,0,0];return o.aU(_t,o.aV([],St,gt)),_t[3]=-o.aW(_t,ze[ht[0]]),_t}($,Y),Je=function(ze,ht){const St=o.a_(ze),gt=o.a$([],ze,1/St),_t=o.aT([],ht,o.aQ([],gt,o.aW(ht,gt))),xt=o.a_(_t);if(xt>0){const ir=Math.sqrt(1-gt[3]*gt[3]),rr=o.aQ([],gt,-gt[3]),Qt=o.aR([],rr,o.aQ([],_t,ir/xt));return o.b0(ht,Qt)}return null}(he,We);if(Je!==null){const ze=Je/o.aW(Oe[0],We);De=Math.min(De,ze)}for(let ze=0;ze<4;ze++){const ht=Math.min(De,Ve[ze]);$[ze+Fe]=[$[ze+Ee][0]+Oe[ze][0]*ht,$[ze+Ee][1]+Oe[ze][1]*ht,$[ze+Ee][2]+Oe[ze][2]*ht,1]}}(M,S[0],p,_);const z=S.map($=>{const Y=o.aT([],M[$[0]],M[$[1]]),he=o.aT([],M[$[2]],M[$[1]]),Ie=o.aU([],o.aV([],Y,he)),Ee=-o.aW(Ie,M[$[1]]);return Ie.concat(Ee)}),K=[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY],Z=[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY];for(const $ of M)for(let Y=0;Y<3;Y++)K[Y]=Math.min(K[Y],$[Y]),Z[Y]=Math.max(Z[Y],$[Y]);return new ts(M,z,new qr(K,Z))}}class Un{get pixelsToClipSpaceMatrix(){return this._helper.pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._helper.clipSpaceToPixelsMatrix}get pixelsToGLUnits(){return this._helper.pixelsToGLUnits}get centerOffset(){return this._helper.centerOffset}get size(){return this._helper.size}get rotationMatrix(){return this._helper.rotationMatrix}get centerPoint(){return this._helper.centerPoint}get pixelsPerMeter(){return this._helper.pixelsPerMeter}setMinZoom(n){this._helper.setMinZoom(n)}setMaxZoom(n){this._helper.setMaxZoom(n)}setMinPitch(n){this._helper.setMinPitch(n)}setMaxPitch(n){this._helper.setMaxPitch(n)}setRenderWorldCopies(n){this._helper.setRenderWorldCopies(n)}setBearing(n){this._helper.setBearing(n)}setPitch(n){this._helper.setPitch(n)}setRoll(n){this._helper.setRoll(n)}setFov(n){this._helper.setFov(n)}setZoom(n){this._helper.setZoom(n)}setCenter(n){this._helper.setCenter(n)}setElevation(n){this._helper.setElevation(n)}setMinElevationForCurrentTile(n){this._helper.setMinElevationForCurrentTile(n)}setPadding(n){this._helper.setPadding(n)}interpolatePadding(n,l,f){return this._helper.interpolatePadding(n,l,f)}isPaddingEqual(n){return this._helper.isPaddingEqual(n)}resize(n,l,f=!0){this._helper.resize(n,l,f)}getMaxBounds(){return this._helper.getMaxBounds()}setMaxBounds(n){this._helper.setMaxBounds(n)}overrideNearFarZ(n,l){this._helper.overrideNearFarZ(n,l)}clearNearFarZOverride(){this._helper.clearNearFarZOverride()}getCameraQueryGeometry(n){return this._helper.getCameraQueryGeometry(this.getCameraPoint(),n)}get tileSize(){return this._helper.tileSize}get tileZoom(){return this._helper.tileZoom}get scale(){return this._helper.scale}get worldSize(){return this._helper.worldSize}get width(){return this._helper.width}get height(){return this._helper.height}get lngRange(){return this._helper.lngRange}get latRange(){return this._helper.latRange}get minZoom(){return this._helper.minZoom}get maxZoom(){return this._helper.maxZoom}get zoom(){return this._helper.zoom}get center(){return this._helper.center}get minPitch(){return this._helper.minPitch}get maxPitch(){return this._helper.maxPitch}get pitch(){return this._helper.pitch}get pitchInRadians(){return this._helper.pitchInRadians}get roll(){return this._helper.roll}get rollInRadians(){return this._helper.rollInRadians}get bearing(){return this._helper.bearing}get bearingInRadians(){return this._helper.bearingInRadians}get fov(){return this._helper.fov}get fovInRadians(){return this._helper.fovInRadians}get elevation(){return this._helper.elevation}get minElevationForCurrentTile(){return this._helper.minElevationForCurrentTile}get padding(){return this._helper.padding}get unmodified(){return this._helper.unmodified}get renderWorldCopies(){return this._helper.renderWorldCopies}get cameraToCenterDistance(){return this._helper.cameraToCenterDistance}get nearZ(){return this._helper.nearZ}get farZ(){return this._helper.farZ}get autoCalculateNearFarZ(){return this._helper.autoCalculateNearFarZ}setTransitionState(n,l){}constructor(n,l,f,p,_){this._posMatrixCache=new Map,this._alignedPosMatrixCache=new Map,this._fogMatrixCacheF32=new Map,this._helper=new Ml({calcMatrices:()=>{this._calcMatrices()},getConstrained:(S,P)=>this.getConstrained(S,P)},n,l,f,p,_),this._coveringTilesDetailsProvider=new Wc}clone(){const n=new Un;return n.apply(this),n}apply(n,l,f){this._helper.apply(n,l,f)}get cameraPosition(){return this._cameraPosition}get projectionMatrix(){return this._projectionMatrix}get modelViewProjectionMatrix(){return this._viewProjMatrix}get inverseProjectionMatrix(){return this._invProjMatrix}get mercatorMatrix(){return this._mercatorMatrix}getVisibleUnwrappedCoordinates(n){const l=[new o.b1(0,n)];if(this._helper._renderWorldCopies){const f=this.screenPointToMercatorCoordinate(new o.P(0,0)),p=this.screenPointToMercatorCoordinate(new o.P(this._helper._width,0)),_=this.screenPointToMercatorCoordinate(new o.P(this._helper._width,this._helper._height)),S=this.screenPointToMercatorCoordinate(new o.P(0,this._helper._height)),P=Math.floor(Math.min(f.x,p.x,_.x,S.x)),M=Math.floor(Math.max(f.x,p.x,_.x,S.x)),z=1;for(let K=P-z;K<=M+z;K++)K!==0&&l.push(new o.b1(K,n))}return l}getCameraFrustum(){return ts.fromInvProjectionMatrix(this._invViewProjMatrix,this.worldSize)}getClippingPlane(){return null}getCoveringTilesDetailsProvider(){return this._coveringTilesDetailsProvider}recalculateZoomAndCenter(n){const l=this.screenPointToLocation(this.centerPoint,n),f=n?n.getElevationForLngLatZoom(l,this._helper._tileZoom):0;this._helper.recalculateZoomAndCenter(f)}setLocationAtPoint(n,l){const f=o.ai(this.elevation,this.center.lat),p=this.screenPointToMercatorCoordinateAtZ(l,f),_=this.screenPointToMercatorCoordinateAtZ(this.centerPoint,f),S=o.a0.fromLngLat(n),P=new o.a0(S.x-(p.x-_.x),S.y-(p.y-_.y));this.setCenter(P==null?void 0:P.toLngLat()),this._helper._renderWorldCopies&&this.setCenter(this.center.wrap())}locationToScreenPoint(n,l){return l?this.coordinatePoint(o.a0.fromLngLat(n),l.getElevationForLngLatZoom(n,this._helper._tileZoom),this._pixelMatrix3D):this.coordinatePoint(o.a0.fromLngLat(n))}screenPointToLocation(n,l){var f;return(f=this.screenPointToMercatorCoordinate(n,l))===null||f===void 0?void 0:f.toLngLat()}screenPointToMercatorCoordinate(n,l){if(l){const f=l.pointCoordinate(n);if(f!=null)return f}return this.screenPointToMercatorCoordinateAtZ(n)}screenPointToMercatorCoordinateAtZ(n,l){const f=l||0,p=[n.x,n.y,0,1],_=[n.x,n.y,1,1];o.av(p,p,this._pixelMatrixInverse),o.av(_,_,this._pixelMatrixInverse);const S=p[3],P=_[3],M=p[1]/S,z=_[1]/P,K=p[2]/S,Z=_[2]/P,$=K===Z?0:(f-K)/(Z-K);return new o.a0(o.C.number(p[0]/S,_[0]/P,$)/this.worldSize,o.C.number(M,z,$)/this.worldSize,f)}coordinatePoint(n,l=0,f=this._pixelMatrix){const p=[n.x*this.worldSize,n.y*this.worldSize,l,1];return o.av(p,p,f),new o.P(p[0]/p[3],p[1]/p[3])}getBounds(){const n=Math.max(0,this._helper._height/2-me(this));return new jt().extend(this.screenPointToLocation(new o.P(0,n))).extend(this.screenPointToLocation(new o.P(this._helper._width,n))).extend(this.screenPointToLocation(new o.P(this._helper._width,this._helper._height))).extend(this.screenPointToLocation(new o.P(0,this._helper._height)))}isPointOnMapSurface(n,l){return l?l.pointCoordinate(n)!=null:n.y>this.height/2-me(this)}calculatePosMatrix(n,l=!1,f){var p;const _=(p=n.key)!==null&&p!==void 0?p:o.b2(n.wrap,n.canonical.z,n.canonical.z,n.canonical.x,n.canonical.y),S=l?this._alignedPosMatrixCache:this._posMatrixCache;if(S.has(_)){const z=S.get(_);return f?z.f32:z.f64}const P=_e(n,this.worldSize);o.O(P,l?this._alignedProjMatrix:this._viewProjMatrix,P);const M={f64:P,f32:new Float32Array(P)};return S.set(_,M),f?M.f32:M.f64}calculateFogMatrix(n){const l=n.key,f=this._fogMatrixCacheF32;if(f.has(l))return f.get(l);const p=_e(n,this.worldSize);return o.O(p,this._fogMatrix,p),f.set(l,new Float32Array(p)),f.get(l)}getConstrained(n,l){l=o.ag(+l,this.minZoom,this.maxZoom);const f={center:new o.S(n.lng,n.lat),zoom:l};let p=this._helper._lngRange;if(!this._helper._renderWorldCopies&&p===null){const Ve=179.9999999999;p=[-Ve,Ve]}const _=this.tileSize*o.ae(f.zoom);let S=0,P=_,M=0,z=_,K=0,Z=0;const{x:$,y:Y}=this.size;if(this._helper._latRange){const Ve=this._helper._latRange;S=o.U(Ve[1])*_,P=o.U(Ve[0])*_,P-S<Y&&(K=Y/(P-S))}p&&(M=o.aN(o.V(p[0])*_,0,_),z=o.aN(o.V(p[1])*_,0,_),z<M&&(z+=_),z-M<$&&(Z=$/(z-M)));const{x:he,y:Ie}=ct(_,n);let Ee,Fe;const De=Math.max(Z||0,K||0);if(De){const Ve=new o.P(Z?(z+M)/2:he,K?(P+S)/2:Ie);return f.center=Ae(_,Ve).wrap(),f.zoom+=o.aj(De),f}if(this._helper._latRange){const Ve=Y/2;Ie-Ve<S&&(Fe=S+Ve),Ie+Ve>P&&(Fe=P-Ve)}if(p){const Ve=(M+z)/2;let Oe=he;this._helper._renderWorldCopies&&(Oe=o.aN(he,Ve-_/2,Ve+_/2));const We=$/2;Oe-We<M&&(Ee=M+We),Oe+We>z&&(Ee=z-We)}if(Ee!==void 0||Fe!==void 0){const Ve=new o.P(Ee??he,Fe??Ie);f.center=Ae(_,Ve).wrap()}return f}calculateCenterFromCameraLngLatAlt(n,l,f,p){return this._helper.calculateCenterFromCameraLngLatAlt(n,l,f,p)}_calculateNearFarZIfNeeded(n,l,f){if(!this._helper.autoCalculateNearFarZ)return;const p=Math.min(this.elevation,this.minElevationForCurrentTile,this.getCameraAltitude()-100),_=n-p*this._helper._pixelPerMeter/Math.cos(l),S=p<0?_:n,P=Math.PI/2+this.pitchInRadians,M=o.ad(this.fov)*(Math.abs(Math.cos(o.ad(this.roll)))*this.height+Math.abs(Math.sin(o.ad(this.roll)))*this.width)/this.height*(.5+f.y/this.height),z=Math.sin(M)*S/Math.sin(o.ag(Math.PI-P-M,.01,Math.PI-.01)),K=me(this),Z=Math.atan(K/this._helper.cameraToCenterDistance),$=o.ad(.75),Y=Z>$?2*Z*(.5+f.y/(2*K)):$,he=Math.sin(Y)*S/Math.sin(o.ag(Math.PI-P-Y,.01,Math.PI-.01)),Ie=Math.min(z,he);this._helper._farZ=1.01*(Math.cos(Math.PI/2-l)*Ie+S),this._helper._nearZ=this._helper._height/50}_calcMatrices(){if(!this._helper._height)return;const n=this.centerOffset,l=ct(this.worldSize,this.center),f=l.x,p=l.y;this._helper._pixelPerMeter=o.ai(1,this.center.lat)*this.worldSize;const _=o.ad(Math.min(this.pitch,ur)),S=Math.max(this._helper.cameraToCenterDistance/2,this._helper.cameraToCenterDistance+this._helper._elevation*this._helper._pixelPerMeter/Math.cos(_));let P;this._calculateNearFarZIfNeeded(S,_,n),P=new Float64Array(16),o.b3(P,this.fovInRadians,this._helper._width/this._helper._height,this._helper._nearZ,this._helper._farZ),this._invProjMatrix=new Float64Array(16),o.ap(this._invProjMatrix,P),P[8]=2*-n.x/this._helper._width,P[9]=2*n.y/this._helper._height,this._projectionMatrix=o.b4(P),o.N(P,P,[1,-1,1]),o.M(P,P,[0,0,-this._helper.cameraToCenterDistance]),o.b5(P,P,-this.rollInRadians),o.b6(P,P,this.pitchInRadians),o.b5(P,P,-this.bearingInRadians),o.M(P,P,[-f,-p,0]),this._mercatorMatrix=o.N([],P,[this.worldSize,this.worldSize,this.worldSize]),o.N(P,P,[1,1,this._helper._pixelPerMeter]),this._pixelMatrix=o.O(new Float64Array(16),this.clipSpaceToPixelsMatrix,P),o.M(P,P,[0,0,-this.elevation]),this._viewProjMatrix=P,this._invViewProjMatrix=o.ap([],P);const M=[0,0,-1,1];o.av(M,M,this._invViewProjMatrix),this._cameraPosition=[M[0]/M[3],M[1]/M[3],M[2]/M[3]],this._fogMatrix=new Float64Array(16),o.b3(this._fogMatrix,this.fovInRadians,this.width/this.height,S,this._helper._farZ),this._fogMatrix[8]=2*-n.x/this.width,this._fogMatrix[9]=2*n.y/this.height,o.N(this._fogMatrix,this._fogMatrix,[1,-1,1]),o.M(this._fogMatrix,this._fogMatrix,[0,0,-this.cameraToCenterDistance]),o.b5(this._fogMatrix,this._fogMatrix,-this.rollInRadians),o.b6(this._fogMatrix,this._fogMatrix,this.pitchInRadians),o.b5(this._fogMatrix,this._fogMatrix,-this.bearingInRadians),o.M(this._fogMatrix,this._fogMatrix,[-f,-p,0]),o.N(this._fogMatrix,this._fogMatrix,[1,1,this._helper._pixelPerMeter]),o.M(this._fogMatrix,this._fogMatrix,[0,0,-this.elevation]),this._pixelMatrix3D=o.O(new Float64Array(16),this.clipSpaceToPixelsMatrix,P);const z=this._helper._width%2/2,K=this._helper._height%2/2,Z=Math.cos(this.bearingInRadians),$=Math.sin(-this.bearingInRadians),Y=f-Math.round(f)+Z*z+$*K,he=p-Math.round(p)+Z*K+$*z,Ie=new Float64Array(P);if(o.M(Ie,Ie,[Y>.5?Y-1:Y,he>.5?he-1:he,0]),this._alignedProjMatrix=Ie,P=o.ap(new Float64Array(16),this._pixelMatrix),!P)throw new Error("failed to invert matrix");this._pixelMatrixInverse=P,this._clearMatrixCaches()}_clearMatrixCaches(){this._posMatrixCache.clear(),this._alignedPosMatrixCache.clear(),this._fogMatrixCacheF32.clear()}maxPitchScaleFactor(){if(!this._pixelMatrixInverse)return 1;const n=this.screenPointToMercatorCoordinate(new o.P(0,0)),l=[n.x*this.worldSize,n.y*this.worldSize,0,1];return o.av(l,l,this._pixelMatrix)[3]/this._helper.cameraToCenterDistance}getCameraPoint(){return this._helper.getCameraPoint()}getCameraAltitude(){return this._helper.getCameraAltitude()}getCameraLngLat(){const n=o.ai(1,this.center.lat)*this.worldSize;return Ne(this.center,this.elevation,this.pitch,this.bearing,this._helper.cameraToCenterDistance/n).toLngLat()}lngLatToCameraDepth(n,l){const f=o.a0.fromLngLat(n),p=[f.x*this.worldSize,f.y*this.worldSize,l,1];return o.av(p,p,this._viewProjMatrix),p[2]/p[3]}getProjectionData(n){const{overscaledTileID:l,aligned:f,applyTerrainMatrix:p}=n,_=this._helper.getMercatorTileCoordinates(l),S=l?this.calculatePosMatrix(l,f,!0):null;let P;return P=l&&l.terrainRttPosMatrix32f&&p?l.terrainRttPosMatrix32f:S||o.b7(),{mainMatrix:P,tileMercatorCoords:_,clippingPlane:[0,0,0,0],projectionTransition:0,fallbackMatrix:P}}isLocationOccluded(n){return!1}getPixelScale(){return 1}getCircleRadiusCorrection(){return 1}getPitchedTextCorrection(n,l,f){return 1}transformLightDirection(n){return o.aS(n)}getRayDirectionFromPixel(n){throw new Error("Not implemented.")}projectTileCoordinates(n,l,f,p){const _=this.calculatePosMatrix(f);let S;p?(S=[n,l,p(n,l),1],o.av(S,S,_)):(S=[n,l,0,1],Ca(S,S,_));const P=S[3];return{point:new o.P(S[0]/P,S[1]/P),signedDistanceFromCamera:P,isOccluded:!1}}populateCache(n){for(const l of n)this.calculatePosMatrix(l)}getMatrixForModel(n,l){const f=o.a0.fromLngLat(n,l),p=f.meterInMercatorCoordinateUnits(),_=o.b8();return o.M(_,_,[f.x,f.y,f.z]),o.b5(_,_,Math.PI),o.b6(_,_,Math.PI/2),o.N(_,_,[-p,p,p]),_}getProjectionDataForCustomLayer(n=!0){const l=new o.Z(0,0,0,0,0),f=this.getProjectionData({overscaledTileID:l,applyGlobeMatrix:n}),p=_e(l,this.worldSize);o.O(p,this._viewProjMatrix,p),f.tileMercatorCoords=[0,0,1,1];const _=[o.$,o.$,this.worldSize/this._helper.pixelsPerMeter],S=o.b9();return o.N(S,p,_),f.fallbackMatrix=S,f.mainMatrix=S,f}getFastPathSimpleProjectionMatrix(n){return this.calculatePosMatrix(n)}}function Hi(){o.w("Map cannot fit within canvas with the given bounds, padding, and/or offset.")}function Ei(v){if(v.useSlerp)if(v.k<1){const n=o.ba(v.startEulerAngles.roll,v.startEulerAngles.pitch,v.startEulerAngles.bearing),l=o.ba(v.endEulerAngles.roll,v.endEulerAngles.pitch,v.endEulerAngles.bearing),f=new Float64Array(4);o.bb(f,n,l,v.k);const p=o.bc(f);v.tr.setRoll(p.roll),v.tr.setPitch(p.pitch),v.tr.setBearing(p.bearing)}else v.tr.setRoll(v.endEulerAngles.roll),v.tr.setPitch(v.endEulerAngles.pitch),v.tr.setBearing(v.endEulerAngles.bearing);else v.tr.setRoll(o.C.number(v.startEulerAngles.roll,v.endEulerAngles.roll,v.k)),v.tr.setPitch(o.C.number(v.startEulerAngles.pitch,v.endEulerAngles.pitch,v.k)),v.tr.setBearing(o.C.number(v.startEulerAngles.bearing,v.endEulerAngles.bearing,v.k))}function Rn(v,n,l,f,p){const _=p.padding,S=ct(p.worldSize,l.getNorthWest()),P=ct(p.worldSize,l.getNorthEast()),M=ct(p.worldSize,l.getSouthEast()),z=ct(p.worldSize,l.getSouthWest()),K=o.ad(-f),Z=S.rotate(K),$=P.rotate(K),Y=M.rotate(K),he=z.rotate(K),Ie=new o.P(Math.max(Z.x,$.x,he.x,Y.x),Math.max(Z.y,$.y,he.y,Y.y)),Ee=new o.P(Math.min(Z.x,$.x,he.x,Y.x),Math.min(Z.y,$.y,he.y,Y.y)),Fe=Ie.sub(Ee),De=(p.width-(_.left+_.right+n.left+n.right))/Fe.x,Ve=(p.height-(_.top+_.bottom+n.top+n.bottom))/Fe.y;if(Ve<0||De<0)return void Hi();const Oe=Math.min(o.aj(p.scale*Math.min(De,Ve)),v.maxZoom),We=o.P.convert(v.offset),Je=new o.P((n.left-n.right)/2,(n.top-n.bottom)/2).rotate(o.ad(f)),ze=We.add(Je).mult(p.scale/o.ae(Oe));return{center:Ae(p.worldSize,S.add(M).div(2).sub(ze)),zoom:Oe,bearing:f}}class kl{get useGlobeControls(){return!1}handlePanInertia(n,l){return{easingOffset:n,easingCenter:l.center}}handleMapControlsRollPitchBearingZoom(n,l){n.bearingDelta&&l.setBearing(l.bearing+n.bearingDelta),n.pitchDelta&&l.setPitch(l.pitch+n.pitchDelta),n.rollDelta&&l.setRoll(l.roll+n.rollDelta),n.zoomDelta&&l.setZoom(l.zoom+n.zoomDelta)}handleMapControlsPan(n,l,f){n.around.distSqr(l.centerPoint)<.01||l.setLocationAtPoint(f,n.around)}cameraForBoxAndBearing(n,l,f,p,_){return Rn(n,l,f,p,_)}handleJumpToCenterZoom(n,l){n.zoom!==(l.zoom!==void 0?+l.zoom:n.zoom)&&n.setZoom(+l.zoom),l.center!==void 0&&n.setCenter(o.S.convert(l.center))}handleEaseTo(n,l){const f=n.zoom,p=n.padding,_={roll:n.roll,pitch:n.pitch,bearing:n.bearing},S={roll:l.roll===void 0?n.roll:l.roll,pitch:l.pitch===void 0?n.pitch:l.pitch,bearing:l.bearing===void 0?n.bearing:l.bearing},P=l.zoom!==void 0,M=!n.isPaddingEqual(l.padding);let z=!1;const K=P?+l.zoom:n.zoom;let Z=n.centerPoint.add(l.offsetAsPoint);const $=n.screenPointToLocation(Z),{center:Y,zoom:he}=n.getConstrained(o.S.convert(l.center||$),K??f);ri(n,Y);const Ie=ct(n.worldSize,$),Ee=ct(n.worldSize,Y).sub(Ie),Fe=o.ae(he-f);return z=he!==f,{easeFunc:De=>{if(z&&n.setZoom(o.C.number(f,he,De)),o.bd(_,S)||Ei({startEulerAngles:_,endEulerAngles:S,tr:n,k:De,useSlerp:_.roll!=S.roll}),M&&(n.interpolatePadding(p,l.padding,De),Z=n.centerPoint.add(l.offsetAsPoint)),l.around)n.setLocationAtPoint(l.around,l.aroundPoint);else{const Ve=o.ae(n.zoom-f),Oe=he>f?Math.min(2,Fe):Math.max(.5,Fe),We=Math.pow(Oe,1-De),Je=Ae(n.worldSize,Ie.add(Ee.mult(De*We)).mult(Ve));n.setLocationAtPoint(n.renderWorldCopies?Je.wrap():Je,Z)}},isZooming:z,elevationCenter:Y}}handleFlyTo(n,l){const f=l.zoom!==void 0,p=n.zoom,_=n.getConstrained(o.S.convert(l.center||l.locationAtOffset),f?+l.zoom:p),S=_.center,P=_.zoom;ri(n,S);const M=ct(n.worldSize,l.locationAtOffset),z=ct(n.worldSize,S).sub(M),K=z.mag(),Z=o.ae(P-p);let $;if(l.minZoom!==void 0){const Y=Math.min(+l.minZoom,p,P),he=n.getConstrained(S,Y).zoom;$=o.ae(he-p)}return{easeFunc:(Y,he,Ie,Ee)=>{n.setZoom(Y===1?P:p+o.aj(he));const Fe=Y===1?S:Ae(n.worldSize,M.add(z.mult(Ie)).mult(he));n.setLocationAtPoint(n.renderWorldCopies?Fe.wrap():Fe,Ee)},scaleOfZoom:Z,targetCenter:S,scaleOfMinZoom:$,pixelPathLength:K}}}class An{constructor(n,l,f){this.blendFunction=n,this.blendColor=l,this.mask=f}}An.Replace=[1,0],An.disabled=new An(An.Replace,o.be.transparent,[!1,!1,!1,!1]),An.unblended=new An(An.Replace,o.be.transparent,[!0,!0,!0,!0]),An.alphaBlended=new An([1,771],o.be.transparent,[!0,!0,!0,!0]);const Bs=2305;class Gr{constructor(n,l,f){this.enable=n,this.mode=l,this.frontFace=f}}Gr.disabled=new Gr(!1,1029,Bs),Gr.backCCW=new Gr(!0,1029,Bs),Gr.frontCCW=new Gr(!0,1028,Bs);class Zr{constructor(n,l,f){this.func=n,this.mask=l,this.range=f}}Zr.ReadOnly=!1,Zr.ReadWrite=!0,Zr.disabled=new Zr(519,Zr.ReadOnly,[0,1]);const fo=7680;class Tr{constructor(n,l,f,p,_,S){this.test=n,this.ref=l,this.mask=f,this.fail=p,this.depthFail=_,this.pass=S}}Tr.disabled=new Tr({func:519,mask:0},0,0,fo,fo,fo);const nl=new WeakMap;function Ii(v){var n;if(nl.has(v))return nl.get(v);{const l=(n=v.getParameter(v.VERSION))===null||n===void 0?void 0:n.startsWith("WebGL 2.0");return nl.set(v,l),l}}class Fa{get awaitingQuery(){return!!this._readbackQueue}constructor(n){this._readbackWaitFrames=4,this._measureWaitFrames=6,this._texWidth=1,this._texHeight=1,this._measuredError=0,this._updateCount=0,this._lastReadbackFrame=-1e3,this._readbackQueue=null,this._cachedRenderContext=n;const l=n.context,f=l.gl;this._texFormat=f.RGBA,this._texType=f.UNSIGNED_BYTE;const p=new o.aK;p.emplaceBack(-1,-1),p.emplaceBack(2,-1),p.emplaceBack(-1,2);const _=new o.aM;_.emplaceBack(0,1,2),this._fullscreenTriangle=new ia(l.createVertexBuffer(p,sa.members),l.createIndexBuffer(_),o.aL.simpleSegment(0,0,p.length,_.length)),this._resultBuffer=new Uint8Array(4),l.activeTexture.set(f.TEXTURE1);const S=f.createTexture();f.bindTexture(f.TEXTURE_2D,S),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_WRAP_S,f.CLAMP_TO_EDGE),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_WRAP_T,f.CLAMP_TO_EDGE),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MIN_FILTER,f.NEAREST),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MAG_FILTER,f.NEAREST),f.texImage2D(f.TEXTURE_2D,0,this._texFormat,this._texWidth,this._texHeight,0,this._texFormat,this._texType,null),this._fbo=l.createFramebuffer(this._texWidth,this._texHeight,!1,!1),this._fbo.colorAttachment.set(S),Ii(f)&&(this._pbo=f.createBuffer(),f.bindBuffer(f.PIXEL_PACK_BUFFER,this._pbo),f.bufferData(f.PIXEL_PACK_BUFFER,4,f.STREAM_READ),f.bindBuffer(f.PIXEL_PACK_BUFFER,null))}destroy(){const n=this._cachedRenderContext.context.gl;this._fullscreenTriangle.destroy(),this._fbo.destroy(),n.deleteBuffer(this._pbo),this._fullscreenTriangle=null,this._fbo=null,this._pbo=null,this._resultBuffer=null}updateErrorLoop(n,l){const f=this._updateCount;return this._readbackQueue?f>=this._readbackQueue.frameNumberIssued+this._readbackWaitFrames&&this._tryReadback():f>=this._lastReadbackFrame+this._measureWaitFrames&&this._renderErrorTexture(n,l),this._updateCount++,this._measuredError}_bindFramebuffer(){const n=this._cachedRenderContext.context,l=n.gl;n.activeTexture.set(l.TEXTURE1),l.bindTexture(l.TEXTURE_2D,this._fbo.colorAttachment.get()),n.bindFramebuffer.set(this._fbo.framebuffer)}_renderErrorTexture(n,l){const f=this._cachedRenderContext.context,p=f.gl;if(this._bindFramebuffer(),f.viewport.set([0,0,this._texWidth,this._texHeight]),f.clear({color:o.be.transparent}),this._cachedRenderContext.useProgram("projectionErrorMeasurement").draw(f,p.TRIANGLES,Zr.disabled,Tr.disabled,An.unblended,Gr.disabled,((_,S)=>({u_input:_,u_output_expected:S}))(n,l),null,null,"$clipping",this._fullscreenTriangle.vertexBuffer,this._fullscreenTriangle.indexBuffer,this._fullscreenTriangle.segments),this._pbo&&Ii(p)){p.bindBuffer(p.PIXEL_PACK_BUFFER,this._pbo),p.readBuffer(p.COLOR_ATTACHMENT0),p.readPixels(0,0,this._texWidth,this._texHeight,this._texFormat,this._texType,0),p.bindBuffer(p.PIXEL_PACK_BUFFER,null);const _=p.fenceSync(p.SYNC_GPU_COMMANDS_COMPLETE,0);p.flush(),this._readbackQueue={frameNumberIssued:this._updateCount,sync:_}}else this._readbackQueue={frameNumberIssued:this._updateCount,sync:null}}_tryReadback(){const n=this._cachedRenderContext.context.gl;if(this._pbo&&this._readbackQueue&&Ii(n)){const l=n.clientWaitSync(this._readbackQueue.sync,0,0);if(l===n.WAIT_FAILED)return o.w("WebGL2 clientWaitSync failed."),this._readbackQueue=null,void(this._lastReadbackFrame=this._updateCount);if(l===n.TIMEOUT_EXPIRED)return;n.bindBuffer(n.PIXEL_PACK_BUFFER,this._pbo),n.getBufferSubData(n.PIXEL_PACK_BUFFER,0,this._resultBuffer,0,4),n.bindBuffer(n.PIXEL_PACK_BUFFER,null)}else this._bindFramebuffer(),n.readPixels(0,0,this._texWidth,this._texHeight,this._texFormat,this._texType,this._resultBuffer);this._readbackQueue=null,this._measuredError=Fa._parseRGBA8float(this._resultBuffer),this._lastReadbackFrame=this._updateCount}static _parseRGBA8float(n){let l=0;return l+=n[0]/256,l+=n[1]/65536,l+=n[2]/16777216,n[3]<127&&(l=-l),l/128}}const ji=o.$/128;function ec(v,n){const l=v.granularity!==void 0?Math.max(v.granularity,1):1,f=l+(v.generateBorders?2:0),p=l+(v.extendToNorthPole||v.generateBorders?1:0)+(v.extendToSouthPole||v.generateBorders?1:0),_=f+1,S=p+1,P=v.generateBorders?-1:0,M=v.generateBorders||v.extendToNorthPole?-1:0,z=l+(v.generateBorders?1:0),K=l+(v.generateBorders||v.extendToSouthPole?1:0),Z=_*S,$=f*p*6,Y=_*S>65536;if(Y&&n==="16bit")throw new Error("Granularity is too large and meshes would not fit inside 16 bit vertex indices.");const he=Y||n==="32bit",Ie=new Int16Array(2*Z);let Ee=0;for(let Ve=M;Ve<=K;Ve++)for(let Oe=P;Oe<=z;Oe++){let We=Oe/l*o.$;Oe===-1&&(We=-ji),Oe===l+1&&(We=o.$+ji);let Je=Ve/l*o.$;Ve===-1&&(Je=v.extendToNorthPole?o.bg:-ji),Ve===l+1&&(Je=v.extendToSouthPole?o.bh:o.$+ji),Ie[Ee++]=We,Ie[Ee++]=Je}const Fe=he?new Uint32Array($):new Uint16Array($);let De=0;for(let Ve=0;Ve<p;Ve++)for(let Oe=0;Oe<f;Oe++){const We=Oe+1+Ve*_,Je=Oe+(Ve+1)*_,ze=Oe+1+(Ve+1)*_;Fe[De++]=Oe+Ve*_,Fe[De++]=Je,Fe[De++]=We,Fe[De++]=We,Fe[De++]=Je,Fe[De++]=ze}return{vertices:Ie.buffer.slice(0),indices:Fe.buffer.slice(0),uses32bitIndices:he}}const po=new o.aJ({fill:new o.bi(128,2),line:new o.bi(512,0),tile:new o.bi(128,32),stencil:new o.bi(128,1),circle:3});class Xc{constructor(){this._tileMeshCache={},this._errorCorrectionUsable=0,this._errorMeasurementLastValue=0,this._errorCorrectionPreviousValue=0,this._errorMeasurementLastChangeTime=-1e3}get name(){return"vertical-perspective"}get transitionState(){return 1}get useSubdivision(){return!0}get shaderVariantName(){return"globe"}get shaderDefine(){return"#define GLOBE"}get shaderPreludeCode(){return Js.projectionGlobe}get vertexShaderPreludeCode(){return Js.projectionMercator.vertexSource}get subdivisionGranularity(){return po}get useGlobeControls(){return!0}get latitudeErrorCorrectionRadians(){return this._errorCorrectionUsable}destroy(){this._errorMeasurement&&this._errorMeasurement.destroy()}updateGPUdependent(n){this._errorMeasurement||(this._errorMeasurement=new Fa(n));const l=o.U(this._errorQueryLatitudeDegrees),f=2*Math.atan(Math.exp(Math.PI-l*Math.PI*2))-.5*Math.PI,p=this._errorMeasurement.updateErrorLoop(l,f),_=F.now();p!==this._errorMeasurementLastValue&&(this._errorCorrectionPreviousValue=this._errorCorrectionUsable,this._errorMeasurementLastValue=p,this._errorMeasurementLastChangeTime=_);const S=Math.min(Math.max((_-this._errorMeasurementLastChangeTime)/1e3/.5,0),1);this._errorCorrectionUsable=o.bj(this._errorCorrectionPreviousValue,-this._errorMeasurementLastValue,o.bk(S))}_getMeshKey(n){return`${n.granularity.toString(36)}_${n.generateBorders?"b":""}${n.extendToNorthPole?"n":""}${n.extendToSouthPole?"s":""}`}getMeshFromTileID(n,l,f,p,_){const S=(_==="stencil"?po.stencil:po.tile).getGranularityForZoomLevel(l.z);return this._getMesh(n,{granularity:S,generateBorders:f,extendToNorthPole:l.y===0&&p,extendToSouthPole:l.y===(1<<l.z)-1&&p})}_getMesh(n,l){const f=this._getMeshKey(l);if(f in this._tileMeshCache)return this._tileMeshCache[f];const p=function(_,S){const P=ec(S,"16bit"),M=o.aK.deserialize({arrayBuffer:P.vertices,length:P.vertices.byteLength/2/2}),z=o.aM.deserialize({arrayBuffer:P.indices,length:P.indices.byteLength/2/3});return new ia(_.createVertexBuffer(M,sa.members),_.createIndexBuffer(z),o.aL.simpleSegment(0,0,M.length,z.length))}(n,l);return this._tileMeshCache[f]=p,p}recalculate(n){}hasTransition(){const n=F.now();let l=!1;return l=l||(n-this._errorMeasurementLastChangeTime)/1e3<.7,l=l||this._errorMeasurement&&this._errorMeasurement.awaitingQuery,l}setErrorQueryLatitudeDegrees(n){this._errorQueryLatitudeDegrees=n}}const Yc=new o.r({type:new o.D(o.v.projection.type)});class eo extends o.E{constructor(n){super(),this._transitionable=new o.t(Yc),this.setProjection(n),this._transitioning=this._transitionable.untransitioned(),this.recalculate(new o.F(0)),this._mercatorProjection=new Ll,this._verticalPerspectiveProjection=new Xc}get transitionState(){const n=this.properties.get("type");if(typeof n=="string"&&n==="mercator")return 0;if(typeof n=="string"&&n==="vertical-perspective")return 1;if(n instanceof o.bl){if(n.from==="vertical-perspective"&&n.to==="mercator")return 1-n.transition;if(n.from==="mercator"&&n.to==="vertical-perspective")return n.transition}return 1}get useGlobeRendering(){return this.transitionState>0}get latitudeErrorCorrectionRadians(){return this._verticalPerspectiveProjection.latitudeErrorCorrectionRadians}get currentProjection(){return this.useGlobeRendering?this._verticalPerspectiveProjection:this._mercatorProjection}get name(){return"globe"}get useSubdivision(){return this.currentProjection.useSubdivision}get shaderVariantName(){return this.currentProjection.shaderVariantName}get shaderDefine(){return this.currentProjection.shaderDefine}get shaderPreludeCode(){return this.currentProjection.shaderPreludeCode}get vertexShaderPreludeCode(){return this.currentProjection.vertexShaderPreludeCode}get subdivisionGranularity(){return this.currentProjection.subdivisionGranularity}get useGlobeControls(){return this.transitionState>0}destroy(){this._mercatorProjection.destroy(),this._verticalPerspectiveProjection.destroy()}updateGPUdependent(n){this._mercatorProjection.updateGPUdependent(n),this._verticalPerspectiveProjection.updateGPUdependent(n)}getMeshFromTileID(n,l,f,p,_){return this.currentProjection.getMeshFromTileID(n,l,f,p,_)}setProjection(n){this._transitionable.setValue("type",(n==null?void 0:n.type)||"mercator")}updateTransitions(n){this._transitioning=this._transitionable.transitioned(n,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()||this.currentProjection.hasTransition()}recalculate(n){this.properties=this._transitioning.possiblyEvaluate(n)}setErrorQueryLatitudeDegrees(n){this._verticalPerspectiveProjection.setErrorQueryLatitudeDegrees(n),this._mercatorProjection.setErrorQueryLatitudeDegrees(n)}}function mo(v){const n=Cs(v.worldSize,v.center.lat);return 2*Math.PI*n}function go(v,n,l,f,p){const _=1/(1<<p),S=n/o.$*_+f*_,P=o.bn((v/o.$*_+l*_)*Math.PI*2+Math.PI,2*Math.PI),M=2*Math.atan(Math.exp(Math.PI-S*Math.PI*2))-.5*Math.PI,z=Math.cos(M),K=new Float64Array(3);return K[0]=Math.sin(P)*z,K[1]=Math.sin(M),K[2]=Math.cos(P)*z,K}function Yn(v){return function(n,l){const f=Math.cos(l),p=new Float64Array(3);return p[0]=Math.sin(n)*f,p[1]=Math.sin(l),p[2]=Math.cos(n)*f,p}(v.lng*Math.PI/180,v.lat*Math.PI/180)}function Cs(v,n){return v/(2*Math.PI)/Math.cos(n*Math.PI/180)}function il(v){const n=Math.asin(v[1])/Math.PI*180,l=Math.sqrt(v[0]*v[0]+v[2]*v[2]);if(l>1e-6){const f=v[0]/l,p=Math.acos(v[2]/l),_=(f>0?p:-p)/Math.PI*180;return new o.S(o.aN(_,-180,180),n)}return new o.S(0,n)}function Po(v){return Math.cos(v*Math.PI/180)}function vi(v,n){const l=Po(v),f=Po(n);return o.aj(f/l)}function Ta(v,n){const l=v.rotate(n.bearingInRadians),f=n.zoom+vi(n.center.lat,0),p=o.bj(1/Po(n.center.lat),1/Po(Math.min(Math.abs(n.center.lat),60)),o.bm(f,7,3,0,1)),_=360/mo({worldSize:n.worldSize,center:{lat:n.center.lat}});return new o.S(n.center.lng-l.x*_*p,o.ag(n.center.lat+l.y*_,-o.ah,o.ah))}function Ul(v){const n=.5*v,l=Math.sin(n),f=Math.cos(n);return Math.log(l+f)-Math.log(f-l)}function Pa(v,n,l,f){const p=v.lat+l*f;if(Math.abs(l)>1){const _=(Math.sign(v.lat+l)!==Math.sign(v.lat)?-Math.abs(v.lat):Math.abs(v.lat))*Math.PI/180,S=Math.abs(v.lat+l)*Math.PI/180,P=Ul(_+f*(S-_)),M=Ul(_),z=Ul(S);return new o.S(v.lng+n*((P-M)/(z-M)),p)}return new o.S(v.lng+n*f,p)}class Jc{constructor(n){this._cachePrevious=new Map,this._cache=new Map,this._hadAnyChanges=!1,this._boundingVolumeFactory=n}swapBuffers(){if(!this._hadAnyChanges)return;const n=this._cachePrevious;this._cachePrevious=this._cache,this._cache=n,this._cache.clear(),this._hadAnyChanges=!1}getTileBoundingVolume(n,l,f,p){const _=`${n.z}_${n.x}_${n.y}_${p!=null&&p.terrain?"t":""}`,S=this._cache.get(_);if(S)return S;const P=this._cachePrevious.get(_);if(P)return this._cache.set(_,P),P;const M=this._boundingVolumeFactory(n,l,f,p);return this._cache.set(_,M),this._hadAnyChanges=!0,M}}class oa{constructor(n,l,f,p){this.min=f,this.max=p,this.points=n,this.planes=l}static fromAabb(n,l){const f=[];for(let p=0;p<8;p++)f.push([1&~p?n[0]:l[0],(p>>1&1)==1?l[1]:n[1],(p>>2&1)==1?l[2]:n[2]]);return new oa(f,[[-1,0,0,l[0]],[1,0,0,-n[0]],[0,-1,0,l[1]],[0,1,0,-n[1]],[0,0,-1,l[2]],[0,0,1,-n[2]]],n,l)}static fromCenterSizeAngles(n,l,f){const p=o.bq([],f[0],f[1],f[2]),_=o.br([],[l[0],0,0],p),S=o.br([],[0,l[1],0],p),P=o.br([],[0,0,l[2]],p),M=[...n],z=[...n];for(let Z=0;Z<8;Z++)for(let $=0;$<3;$++){const Y=n[$]+_[$]*(1&~Z?-1:1)+S[$]*((Z>>1&1)==1?1:-1)+P[$]*((Z>>2&1)==1?1:-1);M[$]=Math.min(M[$],Y),z[$]=Math.max(z[$],Y)}const K=[];for(let Z=0;Z<8;Z++){const $=[...n];o.aR($,$,o.aQ([],_,1&~Z?-1:1)),o.aR($,$,o.aQ([],S,(Z>>1&1)==1?1:-1)),o.aR($,$,o.aQ([],P,(Z>>2&1)==1?1:-1)),K.push($)}return new oa(K,[[..._,-o.aW(_,K[0])],[...S,-o.aW(S,K[0])],[...P,-o.aW(P,K[0])],[-_[0],-_[1],-_[2],-o.aW(_,K[7])],[-S[0],-S[1],-S[2],-o.aW(S,K[7])],[-P[0],-P[1],-P[2],-o.aW(P,K[7])]],M,z)}intersectsFrustum(n){let l=!0;const f=this.points.length,p=this.planes.length,_=n.planes.length,S=n.points.length;for(let P=0;P<_;P++){const M=n.planes[P];let z=0;for(let K=0;K<f;K++){const Z=this.points[K];M[0]*Z[0]+M[1]*Z[1]+M[2]*Z[2]+M[3]>=0&&z++}if(z===0)return 0;z<f&&(l=!1)}if(l)return 2;for(let P=0;P<p;P++){const M=this.planes[P];let z=0;for(let K=0;K<S;K++){const Z=n.points[K];M[0]*Z[0]+M[1]*Z[1]+M[2]*Z[2]+M[3]>=0&&z++}if(z===0)return 0}return 1}intersectsPlane(n){const l=this.points.length;let f=0;for(let p=0;p<l;p++){const _=this.points[p];n[0]*_[0]+n[1]*_[1]+n[2]*_[2]+n[3]>=0&&f++}return f===l?2:f===0?0:1}}function La(v,n,l){const f=v-n;return f<0?-f:Math.max(0,f-l)}function lA(v,n,l,f,p){const _=v-l;let S;return S=_<0?Math.min(-_,1+_-p):_>1?Math.min(Math.max(_-p,0),1-_):0,Math.max(S,La(n,f,p))}class eu{constructor(){this._boundingVolumeCache=new Jc(this._computeTileBoundingVolume)}prepareNextFrame(){this._boundingVolumeCache.swapBuffers()}distanceToTile2d(n,l,f,p){const _=1<<f.z,S=1/_,P=f.x/_,M=f.y/_;let z=2;return z=Math.min(z,lA(n,l,P,M,S)),z=Math.min(z,lA(n,l,P+.5,-M-S,S)),z=Math.min(z,lA(n,l,P+.5,2-M-S,S)),z}getWrap(n,l,f){const p=1<<l.z,_=1/p,S=l.x/p,P=La(n.x,S,_),M=La(n.x,S-1,_),z=La(n.x,S+1,_),K=Math.min(P,M,z);return K===z?1:K===M?-1:0}allowVariableZoom(n,l){return It(n,l)>4}allowWorldCopies(){return!1}getTileBoundingVolume(n,l,f,p){return this._boundingVolumeCache.getTileBoundingVolume(n,l,f,p)}_computeTileBoundingVolume(n,l,f,p){var _,S;let P=f,M=f;if(p!=null&&p.terrain){const z=new o.Z(n.z,l,n.z,n.x,n.y),K=p.terrain.getMinMaxElevation(z);P=(_=K.minElevation)!==null&&_!==void 0?_:f,M=(S=K.maxElevation)!==null&&S!==void 0?S:f}if(P/=o.bt,M/=o.bt,P+=1,M+=1,n.z<=0)return oa.fromAabb([-M,-M,-M],[M,M,M]);if(n.z===1)return oa.fromAabb([n.x===0?-M:0,n.y===0?0:-M,-M],[n.x===0?0:M,n.y===0?M:0,M]);{const z=[go(0,0,n.x,n.y,n.z),go(o.$,0,n.x,n.y,n.z),go(o.$,o.$,n.x,n.y,n.z),go(0,o.$,n.x,n.y,n.z)],K=[];for(const _t of z)K.push(o.aQ([],_t,M));if(M!==P)for(const _t of z)K.push(o.aQ([],_t,P));n.y===0&&K.push([0,1,0]),n.y===(1<<n.z)-1&&K.push([0,-1,0]);const Z=[1,1,1],$=[-1,-1,-1];for(const _t of K)for(let xt=0;xt<3;xt++)Z[xt]=Math.min(Z[xt],_t[xt]),$[xt]=Math.max($[xt],_t[xt]);const Y=go(o.$/2,o.$/2,n.x,n.y,n.z),he=o.aV([],[0,1,0],Y);o.aU(he,he);const Ie=o.aV([],Y,he);o.aU(Ie,Ie);const Ee=o.aV([],z[2],z[1]);o.aU(Ee,Ee);const Fe=o.aV([],z[0],z[3]);o.aU(Fe,Fe),K.push(o.aQ([],Y,M)),n.y>=(1<<n.z)/2&&K.push(o.aQ([],go(o.$/2,0,n.x,n.y,n.z),M)),n.y<(1<<n.z)/2&&K.push(o.aQ([],go(o.$/2,o.$,n.x,n.y,n.z),M));const De=rs(Y,K),Ve=rs(Ie,K),Oe=[-Y[0],-Y[1],-Y[2],De.max],We=[Y[0],Y[1],Y[2],-De.min],Je=[-Ie[0],-Ie[1],-Ie[2],Ve.max],ze=[Ie[0],Ie[1],Ie[2],-Ve.min],ht=[...Ee,0],St=[...Fe,0],gt=[];return n.y===0?gt.push(o.bs(St,ht,Oe),o.bs(St,ht,We)):gt.push(o.bs(Je,ht,Oe),o.bs(Je,ht,We),o.bs(Je,St,Oe),o.bs(Je,St,We)),n.y===(1<<n.z)-1?gt.push(o.bs(St,ht,Oe),o.bs(St,ht,We)):gt.push(o.bs(ze,ht,Oe),o.bs(ze,ht,We),o.bs(ze,St,Oe),o.bs(ze,St,We)),new oa(gt,[Oe,We,Je,ze,ht,St],Z,$)}}}function rs(v,n){let l=1/0,f=-1/0;for(const p of n){const _=o.aW(v,p);l=Math.min(l,_),f=Math.max(f,_)}return{min:l,max:f}}class Rl{get pixelsToClipSpaceMatrix(){return this._helper.pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._helper.clipSpaceToPixelsMatrix}get pixelsToGLUnits(){return this._helper.pixelsToGLUnits}get centerOffset(){return this._helper.centerOffset}get size(){return this._helper.size}get rotationMatrix(){return this._helper.rotationMatrix}get centerPoint(){return this._helper.centerPoint}get pixelsPerMeter(){return this._helper.pixelsPerMeter}setMinZoom(n){this._helper.setMinZoom(n)}setMaxZoom(n){this._helper.setMaxZoom(n)}setMinPitch(n){this._helper.setMinPitch(n)}setMaxPitch(n){this._helper.setMaxPitch(n)}setRenderWorldCopies(n){this._helper.setRenderWorldCopies(n)}setBearing(n){this._helper.setBearing(n)}setPitch(n){this._helper.setPitch(n)}setRoll(n){this._helper.setRoll(n)}setFov(n){this._helper.setFov(n)}setZoom(n){this._helper.setZoom(n)}setCenter(n){this._helper.setCenter(n)}setElevation(n){this._helper.setElevation(n)}setMinElevationForCurrentTile(n){this._helper.setMinElevationForCurrentTile(n)}setPadding(n){this._helper.setPadding(n)}interpolatePadding(n,l,f){return this._helper.interpolatePadding(n,l,f)}isPaddingEqual(n){return this._helper.isPaddingEqual(n)}resize(n,l){this._helper.resize(n,l)}getMaxBounds(){return this._helper.getMaxBounds()}setMaxBounds(n){this._helper.setMaxBounds(n)}overrideNearFarZ(n,l){this._helper.overrideNearFarZ(n,l)}clearNearFarZOverride(){this._helper.clearNearFarZOverride()}getCameraQueryGeometry(n){return this._helper.getCameraQueryGeometry(this.getCameraPoint(),n)}get tileSize(){return this._helper.tileSize}get tileZoom(){return this._helper.tileZoom}get scale(){return this._helper.scale}get worldSize(){return this._helper.worldSize}get width(){return this._helper.width}get height(){return this._helper.height}get lngRange(){return this._helper.lngRange}get latRange(){return this._helper.latRange}get minZoom(){return this._helper.minZoom}get maxZoom(){return this._helper.maxZoom}get zoom(){return this._helper.zoom}get center(){return this._helper.center}get minPitch(){return this._helper.minPitch}get maxPitch(){return this._helper.maxPitch}get pitch(){return this._helper.pitch}get pitchInRadians(){return this._helper.pitchInRadians}get roll(){return this._helper.roll}get rollInRadians(){return this._helper.rollInRadians}get bearing(){return this._helper.bearing}get bearingInRadians(){return this._helper.bearingInRadians}get fov(){return this._helper.fov}get fovInRadians(){return this._helper.fovInRadians}get elevation(){return this._helper.elevation}get minElevationForCurrentTile(){return this._helper.minElevationForCurrentTile}get padding(){return this._helper.padding}get unmodified(){return this._helper.unmodified}get renderWorldCopies(){return this._helper.renderWorldCopies}get nearZ(){return this._helper.nearZ}get farZ(){return this._helper.farZ}get autoCalculateNearFarZ(){return this._helper.autoCalculateNearFarZ}setTransitionState(n){}constructor(){this._cachedClippingPlane=o.bu(),this._projectionMatrix=o.b8(),this._globeViewProjMatrix32f=o.b7(),this._globeViewProjMatrixNoCorrection=o.b8(),this._globeViewProjMatrixNoCorrectionInverted=o.b8(),this._globeProjMatrixInverted=o.b8(),this._cameraPosition=o.bo(),this._globeLatitudeErrorCorrectionRadians=0,this._helper=new Ml({calcMatrices:()=>{this._calcMatrices()},getConstrained:(n,l)=>this.getConstrained(n,l)}),this._coveringTilesDetailsProvider=new eu}clone(){const n=new Rl;return n.apply(this),n}apply(n,l){this._globeLatitudeErrorCorrectionRadians=l||0,this._helper.apply(n)}get projectionMatrix(){return this._projectionMatrix}get modelViewProjectionMatrix(){return this._globeViewProjMatrixNoCorrection}get inverseProjectionMatrix(){return this._globeProjMatrixInverted}get cameraPosition(){const n=o.bo();return n[0]=this._cameraPosition[0],n[1]=this._cameraPosition[1],n[2]=this._cameraPosition[2],n}get cameraToCenterDistance(){return this._helper.cameraToCenterDistance}getProjectionData(n){const{overscaledTileID:l,applyGlobeMatrix:f}=n,p=this._helper.getMercatorTileCoordinates(l);return{mainMatrix:this._globeViewProjMatrix32f,tileMercatorCoords:p,clippingPlane:this._cachedClippingPlane,projectionTransition:f?1:0,fallbackMatrix:this._globeViewProjMatrix32f}}_computeClippingPlane(n){const l=this.pitchInRadians,f=this.cameraToCenterDistance/n,p=Math.sin(l)*f,_=Math.cos(l)*f+1,S=1/Math.sqrt(p*p+_*_)*1;let P=-p,M=_;const z=Math.sqrt(P*P+M*M);P/=z,M/=z;const K=[0,P,M];o.bv(K,K,[0,0,0],-this.bearingInRadians),o.bw(K,K,[0,0,0],-1*this.center.lat*Math.PI/180),o.bx(K,K,[0,0,0],this.center.lng*Math.PI/180);const Z=1/o.aY(K);return o.aQ(K,K,Z),[...K,-S*Z]}isLocationOccluded(n){return!this.isSurfacePointVisible(Yn(n))}transformLightDirection(n){const l=this._helper._center.lng*Math.PI/180,f=this._helper._center.lat*Math.PI/180,p=Math.cos(f),_=[Math.sin(l)*p,Math.sin(f),Math.cos(l)*p],S=[_[2],0,-_[0]],P=[0,0,0];o.aV(P,S,_),o.aU(S,S),o.aU(P,P);const M=[0,0,0];return o.aU(M,[S[0]*n[0]+P[0]*n[1]+_[0]*n[2],S[1]*n[0]+P[1]*n[1]+_[1]*n[2],S[2]*n[0]+P[2]*n[1]+_[2]*n[2]]),M}getPixelScale(){return 1/Math.cos(this._helper._center.lat*Math.PI/180)}getCircleRadiusCorrection(){return Math.cos(this._helper._center.lat*Math.PI/180)}getPitchedTextCorrection(n,l,f){const p=function(P,M,z){const K=1/(1<<z.z);return new o.a0(P/o.$*K+z.x*K,M/o.$*K+z.y*K)}(n,l,f.canonical),_=(S=p.y,[o.bn(p.x*Math.PI*2+Math.PI,2*Math.PI),2*Math.atan(Math.exp(Math.PI-S*Math.PI*2))-.5*Math.PI]);var S;return this.getCircleRadiusCorrection()/Math.cos(_[1])}projectTileCoordinates(n,l,f,p){const _=f.canonical,S=go(n,l,_.x,_.y,_.z),P=1+(p?p(n,l):0)/o.bt,M=[S[0]*P,S[1]*P,S[2]*P,1];o.av(M,M,this._globeViewProjMatrixNoCorrection);const z=this._cachedClippingPlane,K=z[0]*S[0]+z[1]*S[1]+z[2]*S[2]+z[3]<0;return{point:new o.P(M[0]/M[3],M[1]/M[3]),signedDistanceFromCamera:M[3],isOccluded:K}}_calcMatrices(){if(!this._helper._width||!this._helper._height)return;const n=Cs(this.worldSize,this.center.lat),l=o.b9(),f=o.b9();this._helper.autoCalculateNearFarZ&&(this._helper._nearZ=.5,this._helper._farZ=this.cameraToCenterDistance+2*n),o.b3(l,this.fovInRadians,this.width/this.height,this._helper._nearZ,this._helper._farZ);const p=this.centerOffset;l[8]=2*-p.x/this._helper._width,l[9]=2*p.y/this._helper._height,this._projectionMatrix=o.b4(l),this._globeProjMatrixInverted=o.b9(),o.ap(this._globeProjMatrixInverted,l),o.M(l,l,[0,0,-this.cameraToCenterDistance]),o.b5(l,l,this.rollInRadians),o.b6(l,l,-this.pitchInRadians),o.b5(l,l,this.bearingInRadians),o.M(l,l,[0,0,-n]);const _=o.bo();_[0]=n,_[1]=n,_[2]=n,o.b6(f,l,this.center.lat*Math.PI/180),o.by(f,f,-this.center.lng*Math.PI/180),o.N(f,f,_),this._globeViewProjMatrixNoCorrection=f,o.b6(l,l,this.center.lat*Math.PI/180-this._globeLatitudeErrorCorrectionRadians),o.by(l,l,-this.center.lng*Math.PI/180),o.N(l,l,_),this._globeViewProjMatrix32f=new Float32Array(l),this._globeViewProjMatrixNoCorrectionInverted=o.b9(),o.ap(this._globeViewProjMatrixNoCorrectionInverted,f);const S=o.bo();this._cameraPosition=o.bo(),this._cameraPosition[2]=this.cameraToCenterDistance/n,o.bv(this._cameraPosition,this._cameraPosition,S,-this.rollInRadians),o.bw(this._cameraPosition,this._cameraPosition,S,this.pitchInRadians),o.bv(this._cameraPosition,this._cameraPosition,S,-this.bearingInRadians),o.aR(this._cameraPosition,this._cameraPosition,[0,0,1]),o.bw(this._cameraPosition,this._cameraPosition,S,-this.center.lat*Math.PI/180),o.bx(this._cameraPosition,this._cameraPosition,S,this.center.lng*Math.PI/180),this._cachedClippingPlane=this._computeClippingPlane(n);const P=o.b4(this._globeViewProjMatrixNoCorrectionInverted);o.N(P,P,[1,1,-1]),this._cachedFrustum=ts.fromInvProjectionMatrix(P,1,0,this._cachedClippingPlane,!0)}calculateFogMatrix(n){o.w("calculateFogMatrix is not supported on globe projection.");const l=o.b9();return o.af(l),l}getVisibleUnwrappedCoordinates(n){return[new o.b1(0,n)]}getCameraFrustum(){return this._cachedFrustum}getClippingPlane(){return this._cachedClippingPlane}getCoveringTilesDetailsProvider(){return this._coveringTilesDetailsProvider}recalculateZoomAndCenter(n){n&&o.w("terrain is not fully supported on vertical perspective projection."),this._helper.recalculateZoomAndCenter(0)}maxPitchScaleFactor(){return 1}getCameraPoint(){return this._helper.getCameraPoint()}getCameraAltitude(){return this._helper.getCameraAltitude()}getCameraLngLat(){return this._helper.getCameraLngLat()}lngLatToCameraDepth(n,l){if(!this._globeViewProjMatrixNoCorrection)return 1;const f=Yn(n);o.aQ(f,f,1+l/o.bt);const p=o.bu();return o.av(p,[f[0],f[1],f[2],1],this._globeViewProjMatrixNoCorrection),p[2]/p[3]}populateCache(n){}getBounds(){const n=.5*this.width,l=.5*this.height,f=[new o.P(0,0),new o.P(n,0),new o.P(this.width,0),new o.P(this.width,l),new o.P(this.width,this.height),new o.P(n,this.height),new o.P(0,this.height),new o.P(0,l)],p=[];for(const Z of f)p.push(this.unprojectScreenPoint(Z));let _=0,S=0,P=0,M=0;const z=this.center;for(const Z of p){const $=o.bz(z.lng,Z.lng),Y=o.bz(z.lat,Z.lat);$<S&&(S=$),$>_&&(_=$),Y<M&&(M=Y),Y>P&&(P=Y)}const K=[z.lng+S,z.lat+M,z.lng+_,z.lat+P];return this.isSurfacePointOnScreen([0,1,0])&&(K[3]=90,K[0]=-180,K[2]=180),this.isSurfacePointOnScreen([0,-1,0])&&(K[1]=-90,K[0]=-180,K[2]=180),new jt(K)}getConstrained(n,l){const f=o.ag(n.lat,-o.ah,o.ah),p=o.ag(+l,this.minZoom+vi(0,f),this.maxZoom);return{center:new o.S(n.lng,f),zoom:p}}calculateCenterFromCameraLngLatAlt(n,l,f,p){return this._helper.calculateCenterFromCameraLngLatAlt(n,l,f,p)}setLocationAtPoint(n,l){const f=Yn(this.unprojectScreenPoint(l)),p=Yn(n),_=o.bo();o.bA(_);const S=o.bo();o.bx(S,f,_,-this.center.lng*Math.PI/180),o.bw(S,S,_,this.center.lat*Math.PI/180);const P=p[0]*p[0]+p[2]*p[2],M=S[0]*S[0];if(P<M)return;const z=Math.sqrt(P-M),K=-z,Z=o.bB(p[0],p[2],S[0],z),$=o.bB(p[0],p[2],S[0],K),Y=o.bo();o.bx(Y,p,_,-Z);const he=o.bB(Y[1],Y[2],S[1],S[2]),Ie=o.bo();o.bx(Ie,p,_,-$);const Ee=o.bB(Ie[1],Ie[2],S[1],S[2]),Fe=.5*Math.PI,De=he>=-Fe&&he<=Fe,Ve=Ee>=-Fe&&Ee<=Fe;let Oe,We;if(De&&Ve){const St=this.center.lng*Math.PI/180,gt=this.center.lat*Math.PI/180;o.bC(Z,St)+o.bC(he,gt)<o.bC($,St)+o.bC(Ee,gt)?(Oe=Z,We=he):(Oe=$,We=Ee)}else if(De)Oe=Z,We=he;else{if(!Ve)return;Oe=$,We=Ee}const Je=Oe/Math.PI*180,ze=We/Math.PI*180,ht=this.center.lat;this.setCenter(new o.S(Je,o.ag(ze,-90,90))),this.setZoom(this.zoom+vi(ht,this.center.lat))}locationToScreenPoint(n,l){const f=Yn(n);if(l){const p=l.getElevationForLngLatZoom(n,this._helper._tileZoom);o.aQ(f,f,1+p/o.bt)}return this._projectSurfacePointToScreen(f)}_projectSurfacePointToScreen(n){const l=o.bu();return o.av(l,[...n,1],this._globeViewProjMatrixNoCorrection),l[0]/=l[3],l[1]/=l[3],new o.P((.5*l[0]+.5)*this.width,(.5*-l[1]+.5)*this.height)}screenPointToMercatorCoordinate(n,l){if(l){const f=l.pointCoordinate(n);if(f)return f}return o.a0.fromLngLat(this.unprojectScreenPoint(n))}screenPointToLocation(n,l){var f;return(f=this.screenPointToMercatorCoordinate(n,l))===null||f===void 0?void 0:f.toLngLat()}isPointOnMapSurface(n,l){const f=this._cameraPosition,p=this.getRayDirectionFromPixel(n);return!!this.rayPlanetIntersection(f,p)}getRayDirectionFromPixel(n){const l=o.bu();l[0]=n.x/this.width*2-1,l[1]=-1*(n.y/this.height*2-1),l[2]=1,l[3]=1,o.av(l,l,this._globeViewProjMatrixNoCorrectionInverted),l[0]/=l[3],l[1]/=l[3],l[2]/=l[3];const f=o.bo();f[0]=l[0]-this._cameraPosition[0],f[1]=l[1]-this._cameraPosition[1],f[2]=l[2]-this._cameraPosition[2];const p=o.bo();return o.aU(p,f),p}isSurfacePointVisible(n){const l=this._cachedClippingPlane;return l[0]*n[0]+l[1]*n[1]+l[2]*n[2]+l[3]>=0}isSurfacePointOnScreen(n){if(!this.isSurfacePointVisible(n))return!1;const l=o.bu();return o.av(l,[...n,1],this._globeViewProjMatrixNoCorrection),l[0]/=l[3],l[1]/=l[3],l[2]/=l[3],l[0]>-1&&l[0]<1&&l[1]>-1&&l[1]<1&&l[2]>-1&&l[2]<1}rayPlanetIntersection(n,l){const f=o.aW(n,l),p=o.bo(),_=o.bo();o.aQ(_,l,f),o.aT(p,n,_);const S=1-o.aW(p,p);if(S<0)return null;const P=o.aW(n,n)-1,M=-f+(f<0?1:-1)*Math.sqrt(S),z=P/M,K=M;return{tMin:Math.min(z,K),tMax:Math.max(z,K)}}unprojectScreenPoint(n){const l=this._cameraPosition,f=this.getRayDirectionFromPixel(n),p=this.rayPlanetIntersection(l,f);if(p){const K=o.bo();o.aR(K,l,[f[0]*p.tMin,f[1]*p.tMin,f[2]*p.tMin]);const Z=o.bo();return o.aU(Z,K),il(Z)}const _=this._cachedClippingPlane,S=_[0]*f[0]+_[1]*f[1]+_[2]*f[2],P=-o.b0(_,l)/S,M=o.bo();if(P>0)o.aR(M,l,[f[0]*P,f[1]*P,f[2]*P]);else{const K=o.bo();o.aR(K,l,[2*f[0],2*f[1],2*f[2]]);const Z=o.b0(this._cachedClippingPlane,K);o.aT(M,K,[this._cachedClippingPlane[0]*Z,this._cachedClippingPlane[1]*Z,this._cachedClippingPlane[2]*Z])}const z=function(K){const Z=o.bo();return Z[0]=K[0]*-K[3],Z[1]=K[1]*-K[3],Z[2]=K[2]*-K[3],{center:Z,radius:Math.sqrt(1-K[3]*K[3])}}(_);return il(function(K,Z,$){const Y=o.bo();o.aT(Y,$,K);const he=o.bo();return o.bp(he,K,Y,Z/o.a_(Y)),he}(z.center,z.radius,M))}getMatrixForModel(n,l){const f=o.S.convert(n),p=1/o.bt,_=o.b8();return o.by(_,_,f.lng/180*Math.PI),o.b6(_,_,-f.lat/180*Math.PI),o.M(_,_,[0,0,1+l/o.bt]),o.b6(_,_,.5*Math.PI),o.N(_,_,[p,p,p]),_}getProjectionDataForCustomLayer(n=!0){const l=this.getProjectionData({overscaledTileID:new o.Z(0,0,0,0,0),applyGlobeMatrix:n});return l.tileMercatorCoords=[0,0,1,1],l}getFastPathSimpleProjectionMatrix(n){}}class ns{get pixelsToClipSpaceMatrix(){return this._helper.pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._helper.clipSpaceToPixelsMatrix}get pixelsToGLUnits(){return this._helper.pixelsToGLUnits}get centerOffset(){return this._helper.centerOffset}get size(){return this._helper.size}get rotationMatrix(){return this._helper.rotationMatrix}get centerPoint(){return this._helper.centerPoint}get pixelsPerMeter(){return this._helper.pixelsPerMeter}setMinZoom(n){this._helper.setMinZoom(n)}setMaxZoom(n){this._helper.setMaxZoom(n)}setMinPitch(n){this._helper.setMinPitch(n)}setMaxPitch(n){this._helper.setMaxPitch(n)}setRenderWorldCopies(n){this._helper.setRenderWorldCopies(n)}setBearing(n){this._helper.setBearing(n)}setPitch(n){this._helper.setPitch(n)}setRoll(n){this._helper.setRoll(n)}setFov(n){this._helper.setFov(n)}setZoom(n){this._helper.setZoom(n)}setCenter(n){this._helper.setCenter(n)}setElevation(n){this._helper.setElevation(n)}setMinElevationForCurrentTile(n){this._helper.setMinElevationForCurrentTile(n)}setPadding(n){this._helper.setPadding(n)}interpolatePadding(n,l,f){return this._helper.interpolatePadding(n,l,f)}isPaddingEqual(n){return this._helper.isPaddingEqual(n)}resize(n,l,f=!0){this._helper.resize(n,l,f)}getMaxBounds(){return this._helper.getMaxBounds()}setMaxBounds(n){this._helper.setMaxBounds(n)}overrideNearFarZ(n,l){this._helper.overrideNearFarZ(n,l)}clearNearFarZOverride(){this._helper.clearNearFarZOverride()}getCameraQueryGeometry(n){return this._helper.getCameraQueryGeometry(this.getCameraPoint(),n)}get tileSize(){return this._helper.tileSize}get tileZoom(){return this._helper.tileZoom}get scale(){return this._helper.scale}get worldSize(){return this._helper.worldSize}get width(){return this._helper.width}get height(){return this._helper.height}get lngRange(){return this._helper.lngRange}get latRange(){return this._helper.latRange}get minZoom(){return this._helper.minZoom}get maxZoom(){return this._helper.maxZoom}get zoom(){return this._helper.zoom}get center(){return this._helper.center}get minPitch(){return this._helper.minPitch}get maxPitch(){return this._helper.maxPitch}get pitch(){return this._helper.pitch}get pitchInRadians(){return this._helper.pitchInRadians}get roll(){return this._helper.roll}get rollInRadians(){return this._helper.rollInRadians}get bearing(){return this._helper.bearing}get bearingInRadians(){return this._helper.bearingInRadians}get fov(){return this._helper.fov}get fovInRadians(){return this._helper.fovInRadians}get elevation(){return this._helper.elevation}get minElevationForCurrentTile(){return this._helper.minElevationForCurrentTile}get padding(){return this._helper.padding}get unmodified(){return this._helper.unmodified}get renderWorldCopies(){return this._helper.renderWorldCopies}get cameraToCenterDistance(){return this._helper.cameraToCenterDistance}get nearZ(){return this._helper.nearZ}get farZ(){return this._helper.farZ}get autoCalculateNearFarZ(){return this._helper.autoCalculateNearFarZ}get isGlobeRendering(){return this._globeness>0}setTransitionState(n,l){this._globeness=n,this._globeLatitudeErrorCorrectionRadians=l,this._calcMatrices(),this._verticalPerspectiveTransform.getCoveringTilesDetailsProvider().prepareNextFrame(),this._mercatorTransform.getCoveringTilesDetailsProvider().prepareNextFrame()}get currentTransform(){return this.isGlobeRendering?this._verticalPerspectiveTransform:this._mercatorTransform}constructor(){this._globeLatitudeErrorCorrectionRadians=0,this._globeness=1,this._helper=new Ml({calcMatrices:()=>{this._calcMatrices()},getConstrained:(n,l)=>this.getConstrained(n,l)}),this._globeness=1,this._mercatorTransform=new Un,this._verticalPerspectiveTransform=new Rl}clone(){const n=new ns;return n._globeness=this._globeness,n._globeLatitudeErrorCorrectionRadians=this._globeLatitudeErrorCorrectionRadians,n.apply(this),n}apply(n){this._helper.apply(n),this._mercatorTransform.apply(this),this._verticalPerspectiveTransform.apply(this,this._globeLatitudeErrorCorrectionRadians)}get projectionMatrix(){return this.currentTransform.projectionMatrix}get modelViewProjectionMatrix(){return this.currentTransform.modelViewProjectionMatrix}get inverseProjectionMatrix(){return this.currentTransform.inverseProjectionMatrix}get cameraPosition(){return this.currentTransform.cameraPosition}getProjectionData(n){const l=this._mercatorTransform.getProjectionData(n),f=this._verticalPerspectiveTransform.getProjectionData(n);return{mainMatrix:this.isGlobeRendering?f.mainMatrix:l.mainMatrix,clippingPlane:f.clippingPlane,tileMercatorCoords:f.tileMercatorCoords,projectionTransition:n.applyGlobeMatrix?this._globeness:0,fallbackMatrix:l.fallbackMatrix}}isLocationOccluded(n){return this.currentTransform.isLocationOccluded(n)}transformLightDirection(n){return this.currentTransform.transformLightDirection(n)}getPixelScale(){return o.bj(this._mercatorTransform.getPixelScale(),this._verticalPerspectiveTransform.getPixelScale(),this._globeness)}getCircleRadiusCorrection(){return o.bj(this._mercatorTransform.getCircleRadiusCorrection(),this._verticalPerspectiveTransform.getCircleRadiusCorrection(),this._globeness)}getPitchedTextCorrection(n,l,f){const p=this._mercatorTransform.getPitchedTextCorrection(n,l,f),_=this._verticalPerspectiveTransform.getPitchedTextCorrection(n,l,f);return o.bj(p,_,this._globeness)}projectTileCoordinates(n,l,f,p){return this.currentTransform.projectTileCoordinates(n,l,f,p)}_calcMatrices(){this._helper._width&&this._helper._height&&(this._verticalPerspectiveTransform.apply(this,this._globeLatitudeErrorCorrectionRadians),this._helper._nearZ=this._verticalPerspectiveTransform.nearZ,this._helper._farZ=this._verticalPerspectiveTransform.farZ,this._mercatorTransform.apply(this,!0,this.isGlobeRendering),this._helper._nearZ=this._mercatorTransform.nearZ,this._helper._farZ=this._mercatorTransform.farZ)}calculateFogMatrix(n){return this.currentTransform.calculateFogMatrix(n)}getVisibleUnwrappedCoordinates(n){return this.currentTransform.getVisibleUnwrappedCoordinates(n)}getCameraFrustum(){return this.currentTransform.getCameraFrustum()}getClippingPlane(){return this.currentTransform.getClippingPlane()}getCoveringTilesDetailsProvider(){return this.currentTransform.getCoveringTilesDetailsProvider()}recalculateZoomAndCenter(n){this._mercatorTransform.recalculateZoomAndCenter(n),this._verticalPerspectiveTransform.recalculateZoomAndCenter(n)}maxPitchScaleFactor(){return this._mercatorTransform.maxPitchScaleFactor()}getCameraPoint(){return this._helper.getCameraPoint()}getCameraAltitude(){return this._helper.getCameraAltitude()}getCameraLngLat(){return this._helper.getCameraLngLat()}lngLatToCameraDepth(n,l){return this.currentTransform.lngLatToCameraDepth(n,l)}populateCache(n){this._mercatorTransform.populateCache(n),this._verticalPerspectiveTransform.populateCache(n)}getBounds(){return this.currentTransform.getBounds()}getConstrained(n,l){return this.currentTransform.getConstrained(n,l)}calculateCenterFromCameraLngLatAlt(n,l,f,p){return this._helper.calculateCenterFromCameraLngLatAlt(n,l,f,p)}setLocationAtPoint(n,l){if(!this.isGlobeRendering)return this._mercatorTransform.setLocationAtPoint(n,l),void this.apply(this._mercatorTransform);this._verticalPerspectiveTransform.setLocationAtPoint(n,l),this.apply(this._verticalPerspectiveTransform)}locationToScreenPoint(n,l){return this.currentTransform.locationToScreenPoint(n,l)}screenPointToMercatorCoordinate(n,l){return this.currentTransform.screenPointToMercatorCoordinate(n,l)}screenPointToLocation(n,l){return this.currentTransform.screenPointToLocation(n,l)}isPointOnMapSurface(n,l){return this.currentTransform.isPointOnMapSurface(n,l)}getRayDirectionFromPixel(n){return this._verticalPerspectiveTransform.getRayDirectionFromPixel(n)}getMatrixForModel(n,l){return this.currentTransform.getMatrixForModel(n,l)}getProjectionDataForCustomLayer(n=!0){const l=this._mercatorTransform.getProjectionDataForCustomLayer(n);if(!this.isGlobeRendering)return l;const f=this._verticalPerspectiveTransform.getProjectionDataForCustomLayer(n);return f.fallbackMatrix=l.mainMatrix,f}getFastPathSimpleProjectionMatrix(n){return this.currentTransform.getFastPathSimpleProjectionMatrix(n)}}class Ui{get useGlobeControls(){return!0}handlePanInertia(n,l){const f=Ta(n,l);return Math.abs(f.lng-l.center.lng)>180&&(f.lng=l.center.lng+179.5*Math.sign(f.lng-l.center.lng)),{easingCenter:f,easingOffset:new o.P(0,0)}}handleMapControlsRollPitchBearingZoom(n,l){const f=n.around,p=l.screenPointToLocation(f);n.bearingDelta&&l.setBearing(l.bearing+n.bearingDelta),n.pitchDelta&&l.setPitch(l.pitch+n.pitchDelta),n.rollDelta&&l.setRoll(l.roll+n.rollDelta);const _=l.zoom;n.zoomDelta&&l.setZoom(l.zoom+n.zoomDelta);const S=l.zoom-_;if(S===0)return;const P=o.bz(l.center.lng,p.lng),M=P/(Math.abs(P/180)+1),z=o.bz(l.center.lat,p.lat),K=l.getRayDirectionFromPixel(f),Z=l.cameraPosition,$=-1*o.aW(Z,K),Y=o.bo();o.aR(Y,Z,[K[0]*$,K[1]*$,K[2]*$]);const he=o.aY(Y)-1,Ie=Math.exp(.5*-Math.max(he-.3,0)),Ee=Cs(l.worldSize,l.center.lat)/Math.min(l.width,l.height),Fe=o.bm(Ee,.9,.5,1,.25),De=(1-o.ae(-S))*Math.min(Ie,Fe),Ve=l.center.lat,Oe=l.zoom,We=new o.S(l.center.lng+M*De,o.ag(l.center.lat+z*De,-o.ah,o.ah));l.setLocationAtPoint(p,f);const Je=l.center,ze=o.bm(Math.abs(P),45,85,0,1),ht=o.bm(Ee,.75,.35,0,1),St=Math.pow(Math.max(ze,ht),.25),gt=o.bz(Je.lng,We.lng),_t=o.bz(Je.lat,We.lat);l.setCenter(new o.S(Je.lng+gt*St,Je.lat+_t*St).wrap()),l.setZoom(Oe+vi(Ve,l.center.lat))}handleMapControlsPan(n,l,f){if(!n.panDelta)return;const p=l.center.lat,_=l.zoom;l.setCenter(Ta(n.panDelta,l).wrap()),l.setZoom(_+vi(p,l.center.lat))}cameraForBoxAndBearing(n,l,f,p,_){const S=Rn(n,l,f,p,_),P=l.left/_.width*2-1,M=(_.width-l.right)/_.width*2-1,z=l.top/_.height*-2+1,K=(_.height-l.bottom)/_.height*-2+1,Z=o.bz(f.getWest(),f.getEast())<0,$=Z?f.getEast():f.getWest(),Y=Z?f.getWest():f.getEast(),he=Math.max(f.getNorth(),f.getSouth()),Ie=Math.min(f.getNorth(),f.getSouth()),Ee=$+.5*o.bz($,Y),Fe=he+.5*o.bz(he,Ie),De=_.clone();De.setCenter(S.center),De.setBearing(S.bearing),De.setPitch(0),De.setRoll(0),De.setZoom(S.zoom);const Ve=De.modelViewProjectionMatrix,Oe=[Yn(f.getNorthWest()),Yn(f.getNorthEast()),Yn(f.getSouthWest()),Yn(f.getSouthEast()),Yn(new o.S(Y,Fe)),Yn(new o.S($,Fe)),Yn(new o.S(Ee,he)),Yn(new o.S(Ee,Ie))],We=Yn(S.center);let Je=Number.POSITIVE_INFINITY;for(const ze of Oe)P<0&&(Je=Ui.getLesserNonNegativeNonNull(Je,Ui.solveVectorScale(ze,We,Ve,"x",P))),M>0&&(Je=Ui.getLesserNonNegativeNonNull(Je,Ui.solveVectorScale(ze,We,Ve,"x",M))),z>0&&(Je=Ui.getLesserNonNegativeNonNull(Je,Ui.solveVectorScale(ze,We,Ve,"y",z))),K<0&&(Je=Ui.getLesserNonNegativeNonNull(Je,Ui.solveVectorScale(ze,We,Ve,"y",K)));if(Number.isFinite(Je)&&Je!==0)return S.zoom=De.zoom+o.aj(Je),S;Hi()}handleJumpToCenterZoom(n,l){const f=n.center.lat,p=n.getConstrained(l.center?o.S.convert(l.center):n.center,n.zoom).center;n.setCenter(p.wrap());const _=l.zoom!==void 0?+l.zoom:n.zoom+vi(f,p.lat);n.zoom!==_&&n.setZoom(_)}handleEaseTo(n,l){const f=n.zoom,p=n.center,_=n.padding,S={roll:n.roll,pitch:n.pitch,bearing:n.bearing},P={roll:l.roll===void 0?n.roll:l.roll,pitch:l.pitch===void 0?n.pitch:l.pitch,bearing:l.bearing===void 0?n.bearing:l.bearing},M=l.zoom!==void 0,z=!n.isPaddingEqual(l.padding);let K=!1;const Z=l.center?o.S.convert(l.center):p,$=n.getConstrained(Z,f).center;ri(n,$);const Y=n.clone();Y.setCenter($),Y.setZoom(M?+l.zoom:f+vi(p.lat,Z.lat)),Y.setBearing(l.bearing);const he=new o.P(o.ag(n.centerPoint.x+l.offsetAsPoint.x,0,n.width),o.ag(n.centerPoint.y+l.offsetAsPoint.y,0,n.height));Y.setLocationAtPoint($,he);const Ie=(l.offset&&l.offsetAsPoint.mag())>0?Y.center:$,Ee=M?+l.zoom:f+vi(p.lat,Ie.lat),Fe=f+vi(p.lat,0),De=Ee+vi(Ie.lat,0),Ve=o.bz(p.lng,Ie.lng),Oe=o.bz(p.lat,Ie.lat),We=o.ae(De-Fe);return K=Ee!==f,{easeFunc:Je=>{if(o.bd(S,P)||Ei({startEulerAngles:S,endEulerAngles:P,tr:n,k:Je,useSlerp:S.roll!=P.roll}),z&&n.interpolatePadding(_,l.padding,Je),l.around)o.w("Easing around a point is not supported under globe projection."),n.setLocationAtPoint(l.around,l.aroundPoint);else{const ze=De>Fe?Math.min(2,We):Math.max(.5,We),ht=Math.pow(ze,1-Je),St=Pa(p,Ve,Oe,Je*ht);n.setCenter(St.wrap())}if(K){const ze=o.C.number(Fe,De,Je)+vi(0,n.center.lat);n.setZoom(ze)}},isZooming:K,elevationCenter:Ie}}handleFlyTo(n,l){const f=l.zoom!==void 0,p=n.center,_=n.zoom,S=n.padding,P=!n.isPaddingEqual(l.padding),M=n.getConstrained(o.S.convert(l.center||l.locationAtOffset),_).center,z=f?+l.zoom:n.zoom+vi(n.center.lat,M.lat),K=n.clone();K.setCenter(M),K.setZoom(z),K.setBearing(l.bearing);const Z=new o.P(o.ag(n.centerPoint.x+l.offsetAsPoint.x,0,n.width),o.ag(n.centerPoint.y+l.offsetAsPoint.y,0,n.height));K.setLocationAtPoint(M,Z);const $=K.center;ri(n,$);const Y=function(Oe,We,Je){const ze=Yn(We),ht=Yn(Je),St=o.aW(ze,ht),gt=Math.acos(St),_t=mo(Oe);return gt/(2*Math.PI)*_t}(n,p,$),he=_+vi(p.lat,0),Ie=z+vi($.lat,0),Ee=o.ae(Ie-he);let Fe;if(typeof l.minZoom=="number"){const Oe=+l.minZoom+vi($.lat,0),We=Math.min(Oe,he,Ie)+vi(0,$.lat),Je=n.getConstrained($,We).zoom+vi($.lat,0);Fe=o.ae(Je-he)}const De=o.bz(p.lng,$.lng),Ve=o.bz(p.lat,$.lat);return{easeFunc:(Oe,We,Je,ze)=>{const ht=Pa(p,De,Ve,Je);P&&n.interpolatePadding(S,l.padding,Oe);const St=Oe===1?$:ht;n.setCenter(St.wrap());const gt=he+o.aj(We);n.setZoom(Oe===1?z:gt+vi(0,St.lat))},scaleOfZoom:Ee,targetCenter:$,scaleOfMinZoom:Fe,pixelPathLength:Y}}static solveVectorScale(n,l,f,p,_){const S=p==="x"?[f[0],f[4],f[8],f[12]]:[f[1],f[5],f[9],f[13]],P=[f[3],f[7],f[11],f[15]],M=n[0]*S[0]+n[1]*S[1]+n[2]*S[2],z=n[0]*P[0]+n[1]*P[1]+n[2]*P[2],K=l[0]*S[0]+l[1]*S[1]+l[2]*S[2],Z=l[0]*P[0]+l[1]*P[1]+l[2]*P[2];return K+_*z===M+_*Z||P[3]*(M-K)+S[3]*(Z-z)+M*Z==K*z?null:(K+S[3]-_*Z-_*P[3])/(K-M-_*Z+_*z)}static getLesserNonNegativeNonNull(n,l){return l!==null&&l>=0&&l<n?l:n}}class AA{constructor(n){this._globe=n,this._mercatorCameraHelper=new kl,this._verticalPerspectiveCameraHelper=new Ui}get useGlobeControls(){return this._globe.useGlobeRendering}get currentHelper(){return this.useGlobeControls?this._verticalPerspectiveCameraHelper:this._mercatorCameraHelper}handlePanInertia(n,l){return this.currentHelper.handlePanInertia(n,l)}handleMapControlsRollPitchBearingZoom(n,l){return this.currentHelper.handleMapControlsRollPitchBearingZoom(n,l)}handleMapControlsPan(n,l,f){this.currentHelper.handleMapControlsPan(n,l,f)}cameraForBoxAndBearing(n,l,f,p,_){return this.currentHelper.cameraForBoxAndBearing(n,l,f,p,_)}handleJumpToCenterZoom(n,l){this.currentHelper.handleJumpToCenterZoom(n,l)}handleEaseTo(n,l){return this.currentHelper.handleEaseTo(n,l)}handleFlyTo(n,l){return this.currentHelper.handleFlyTo(n,l)}}const Lo=(v,n)=>o.y(v,n&&n.filter(l=>l.identifier!=="source.canvas")),Ma=o.bD();class D extends o.E{constructor(n,l={}){super(),this._rtlPluginLoaded=()=>{for(const f in this.sourceCaches){const p=this.sourceCaches[f].getSource().type;p!=="vector"&&p!=="geojson"||this.sourceCaches[f].reload()}},this.map=n,this.dispatcher=new nt($e(),n._getMapId()),this.dispatcher.registerMessageHandler("GG",(f,p)=>this.getGlyphs(f,p)),this.dispatcher.registerMessageHandler("GI",(f,p)=>this.getImages(f,p)),this.imageManager=new Be,this.imageManager.setEventedParent(this),this.glyphManager=new Te(n._requestManager,l.localIdeographFontFamily),this.lineAtlas=new He(256,512),this.crossTileSymbolIndex=new aA,this._spritesImagesIds={},this._layers={},this._order=[],this.sourceCaches={},this.zoomHistory=new o.bE,this._loaded=!1,this._availableImages=[],this._globalState={},this._resetUpdates(),this.dispatcher.broadcast("SR",o.bF()),Hr().on(Dr,this._rtlPluginLoaded),this.on("data",f=>{if(f.dataType!=="source"||f.sourceDataType!=="metadata")return;const p=this.sourceCaches[f.sourceId];if(!p)return;const _=p.getSource();if(_&&_.vectorLayerIds)for(const S in this._layers){const P=this._layers[S];P.source===_.id&&this._validateLayer(P)}})}setGlobalStateProperty(n,l){var f,p,_;this._checkLoaded();const S=l===null?(_=(p=(f=this.stylesheet.state)===null||f===void 0?void 0:f[n])===null||p===void 0?void 0:p.default)!==null&&_!==void 0?_:null:l;if(o.bG(S,this._globalState[n]))return this;this._globalState[n]=S;const P=this._findGlobalStateAffectedSources([n]);for(const M in this.sourceCaches)P.has(M)&&(this._reloadSource(M),this._changed=!0)}getGlobalState(){return this._globalState}setGlobalState(n){this._checkLoaded();const l=[];for(const p in n)!o.bG(this._globalState[p],n[p].default)&&(l.push(p),this._globalState[p]=n[p].default);const f=this._findGlobalStateAffectedSources(l);for(const p in this.sourceCaches)f.has(p)&&(this._reloadSource(p),this._changed=!0)}_findGlobalStateAffectedSources(n){if(n.length===0)return new Set;const l=new Set;for(const f in this._layers){const p=this._layers[f],_=p.getLayoutAffectingGlobalStateRefs();for(const S of n)_.has(S)&&l.add(p.source)}return l}loadURL(n,l={},f){this.fire(new o.l("dataloading",{dataType:"style"})),l.validate=typeof l.validate!="boolean"||l.validate;const p=this.map._requestManager.transformRequest(n,"Style");this._loadStyleRequest=new AbortController;const _=this._loadStyleRequest;o.j(p,this._loadStyleRequest).then(S=>{this._loadStyleRequest=null,this._load(S.data,l,f)}).catch(S=>{this._loadStyleRequest=null,S&&!_.signal.aborted&&this.fire(new o.k(S))})}loadJSON(n,l={},f){this.fire(new o.l("dataloading",{dataType:"style"})),this._frameRequest=new AbortController,F.frameAsync(this._frameRequest).then(()=>{this._frameRequest=null,l.validate=l.validate!==!1,this._load(n,l,f)}).catch(()=>{})}loadEmpty(){this.fire(new o.l("dataloading",{dataType:"style"})),this._load(Ma,{validate:!1})}_load(n,l,f){var p,_,S;const P=l.transformStyle?l.transformStyle(f,n):n;if(!l.validate||!Lo(this,o.z(P))){this._loaded=!0,this.stylesheet=P;for(const M in P.sources)this.addSource(M,P.sources[M],{validate:!1});P.sprite?this._loadSprite(P.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(P.glyphs),this._createLayers(),this.light=new Ze(this.stylesheet.light),this._setProjectionInternal(((p=this.stylesheet.projection)===null||p===void 0?void 0:p.type)||"mercator"),this.sky=new Le(this.stylesheet.sky),this.map.setTerrain((_=this.stylesheet.terrain)!==null&&_!==void 0?_:null),this.setGlobalState((S=this.stylesheet.state)!==null&&S!==void 0?S:null),this.fire(new o.l("data",{dataType:"style"})),this.fire(new o.l("style.load"))}}_createLayers(){const n=o.bH(this.stylesheet.layers);this.dispatcher.broadcast("SL",n),this._order=n.map(l=>l.id),this._layers={},this._serializedLayers=null;for(const l of n){const f=o.bI(l);f.setEventedParent(this,{layer:{id:l.id}}),this._layers[l.id]=f}}_loadSprite(n,l=!1,f=void 0){let p;this.imageManager.setLoaded(!1),this._spriteRequest=new AbortController,function(_,S,P,M){return o._(this,void 0,void 0,function*(){const z=fe(_),K=P>1?"@2x":"",Z={},$={};for(const{id:Y,url:he}of z){const Ie=S.transformRequest(ue(he,K,".json"),"SpriteJSON");Z[Y]=o.j(Ie,M);const Ee=S.transformRequest(ue(he,K,".png"),"SpriteImage");$[Y]=W.getImage(Ee,M)}return yield Promise.all([...Object.values(Z),...Object.values($)]),function(Y,he){return o._(this,void 0,void 0,function*(){const Ie={};for(const Ee in Y){Ie[Ee]={};const Fe=F.getImageCanvasContext((yield he[Ee]).data),De=(yield Y[Ee]).data;for(const Ve in De){const{width:Oe,height:We,x:Je,y:ze,sdf:ht,pixelRatio:St,stretchX:gt,stretchY:_t,content:xt,textFitWidth:ir,textFitHeight:rr}=De[Ve];Ie[Ee][Ve]={data:null,pixelRatio:St,sdf:ht,stretchX:gt,stretchY:_t,content:xt,textFitWidth:ir,textFitHeight:rr,spriteData:{width:Oe,height:We,x:Je,y:ze,context:Fe}}}}return Ie})}(Z,$)})}(n,this.map._requestManager,this.map.getPixelRatio(),this._spriteRequest).then(_=>{if(this._spriteRequest=null,_)for(const S in _){this._spritesImagesIds[S]=[];const P=this._spritesImagesIds[S]?this._spritesImagesIds[S].filter(M=>!(M in _)):[];for(const M of P)this.imageManager.removeImage(M),this._changedImages[M]=!0;for(const M in _[S]){const z=S==="default"?M:`${S}:${M}`;this._spritesImagesIds[S].push(z),z in this.imageManager.images?this.imageManager.updateImage(z,_[S][M],!1):this.imageManager.addImage(z,_[S][M]),l&&(this._changedImages[z]=!0)}}}).catch(_=>{this._spriteRequest=null,p=_,this.fire(new o.k(p))}).finally(()=>{this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),l&&(this._changed=!0),this.dispatcher.broadcast("SI",this._availableImages),this.fire(new o.l("data",{dataType:"style"})),f&&f(p)})}_unloadSprite(){for(const n of Object.values(this._spritesImagesIds).flat())this.imageManager.removeImage(n),this._changedImages[n]=!0;this._spritesImagesIds={},this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new o.l("data",{dataType:"style"}))}_validateLayer(n){const l=this.sourceCaches[n.source];if(!l)return;const f=n.sourceLayer;if(!f)return;const p=l.getSource();(p.type==="geojson"||p.vectorLayerIds&&p.vectorLayerIds.indexOf(f)===-1)&&this.fire(new o.k(new Error(`Source layer "${f}" does not exist on source "${p.id}" as specified by style layer "${n.id}".`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(const n in this.sourceCaches)if(!this.sourceCaches[n].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeByIds(n,l=!1){const f=this._serializedAllLayers();if(!n||n.length===0)return Object.values(l?o.bJ(f):f);const p=[];for(const _ of n)if(f[_]){const S=l?o.bJ(f[_]):f[_];p.push(S)}return p}_serializedAllLayers(){let n=this._serializedLayers;if(n)return n;n=this._serializedLayers={};const l=Object.keys(this._layers);for(const f of l){const p=this._layers[f];p.type!=="custom"&&(n[f]=p.serialize())}return n}hasTransitions(){var n,l,f;if(!((n=this.light)===null||n===void 0)&&n.hasTransition()||!((l=this.sky)===null||l===void 0)&&l.hasTransition()||!((f=this.projection)===null||f===void 0)&&f.hasTransition())return!0;for(const p in this.sourceCaches)if(this.sourceCaches[p].hasTransition())return!0;for(const p in this._layers)if(this._layers[p].hasTransition())return!0;return!1}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading.")}update(n){if(!this._loaded)return;const l=this._changed;if(l){const p=Object.keys(this._updatedLayers),_=Object.keys(this._removedLayers);(p.length||_.length)&&this._updateWorkerLayers(p,_);for(const S in this._updatedSources){const P=this._updatedSources[S];if(P==="reload")this._reloadSource(S);else{if(P!=="clear")throw new Error(`Invalid action ${P}`);this._clearSource(S)}}this._updateTilesForChangedImages(),this._updateTilesForChangedGlyphs();for(const S in this._updatedPaintProps)this._layers[S].updateTransitions(n);this.light.updateTransitions(n),this.sky.updateTransitions(n),this._resetUpdates()}const f={};for(const p in this.sourceCaches){const _=this.sourceCaches[p];f[p]=_.used,_.used=!1}for(const p of this._order){const _=this._layers[p];_.recalculate(n,this._availableImages),!_.isHidden(n.zoom)&&_.source&&(this.sourceCaches[_.source].used=!0)}for(const p in f){const _=this.sourceCaches[p];!!f[p]!=!!_.used&&_.fire(new o.l("data",{sourceDataType:"visibility",dataType:"source",sourceId:p}))}this.light.recalculate(n),this.sky.recalculate(n),this.projection.recalculate(n),this.z=n.zoom,l&&this.fire(new o.l("data",{dataType:"style"}))}_updateTilesForChangedImages(){const n=Object.keys(this._changedImages);if(n.length){for(const l in this.sourceCaches)this.sourceCaches[l].reloadTilesForDependencies(["icons","patterns"],n);this._changedImages={}}}_updateTilesForChangedGlyphs(){if(this._glyphsDidChange){for(const n in this.sourceCaches)this.sourceCaches[n].reloadTilesForDependencies(["glyphs"],[""]);this._glyphsDidChange=!1}}_updateWorkerLayers(n,l){this.dispatcher.broadcast("UL",{layers:this._serializeByIds(n,!1),removedIds:l})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={},this._glyphsDidChange=!1}setState(n,l={}){var f;this._checkLoaded();const p=this.serialize();if(n=l.transformStyle?l.transformStyle(p,n):n,((f=l.validate)===null||f===void 0||f)&&Lo(this,o.z(n)))return!1;(n=o.bJ(n)).layers=o.bH(n.layers);const _=o.bK(p,n),S=this._getOperationsToPerform(_);if(S.unimplemented.length>0)throw new Error(`Unimplemented: ${S.unimplemented.join(", ")}.`);if(S.operations.length===0)return!1;for(const P of S.operations)P();return this.stylesheet=n,this._serializedLayers=null,!0}_getOperationsToPerform(n){const l=[],f=[];for(const p of n)switch(p.command){case"setCenter":case"setZoom":case"setBearing":case"setPitch":case"setRoll":continue;case"addLayer":l.push(()=>this.addLayer.apply(this,p.args));break;case"removeLayer":l.push(()=>this.removeLayer.apply(this,p.args));break;case"setPaintProperty":l.push(()=>this.setPaintProperty.apply(this,p.args));break;case"setLayoutProperty":l.push(()=>this.setLayoutProperty.apply(this,p.args));break;case"setFilter":l.push(()=>this.setFilter.apply(this,p.args));break;case"addSource":l.push(()=>this.addSource.apply(this,p.args));break;case"removeSource":l.push(()=>this.removeSource.apply(this,p.args));break;case"setLayerZoomRange":l.push(()=>this.setLayerZoomRange.apply(this,p.args));break;case"setLight":l.push(()=>this.setLight.apply(this,p.args));break;case"setGeoJSONSourceData":l.push(()=>this.setGeoJSONSourceData.apply(this,p.args));break;case"setGlyphs":l.push(()=>this.setGlyphs.apply(this,p.args));break;case"setSprite":l.push(()=>this.setSprite.apply(this,p.args));break;case"setTerrain":l.push(()=>this.map.setTerrain.apply(this,p.args));break;case"setSky":l.push(()=>this.setSky.apply(this,p.args));break;case"setProjection":this.setProjection.apply(this,p.args);break;case"setGlobalState":l.push(()=>this.setGlobalState.apply(this,p.args));break;case"setTransition":l.push(()=>{});break;default:f.push(p.command)}return{operations:l,unimplemented:f}}addImage(n,l){if(this.getImage(n))return this.fire(new o.k(new Error(`An image named "${n}" already exists.`)));this.imageManager.addImage(n,l),this._afterImageUpdated(n)}updateImage(n,l){this.imageManager.updateImage(n,l)}getImage(n){return this.imageManager.getImage(n)}removeImage(n){if(!this.getImage(n))return this.fire(new o.k(new Error(`An image named "${n}" does not exist.`)));this.imageManager.removeImage(n),this._afterImageUpdated(n)}_afterImageUpdated(n){this._availableImages=this.imageManager.listImages(),this._changedImages[n]=!0,this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new o.l("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this.imageManager.listImages()}addSource(n,l,f={}){if(this._checkLoaded(),this.sourceCaches[n]!==void 0)throw new Error(`Source "${n}" already exists.`);if(!l.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(l).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(l.type)>=0&&this._validate(o.z.source,`sources.${n}`,l,null,f))return;this.map&&this.map._collectResourceTiming&&(l.collectResourceTiming=!0);const p=this.sourceCaches[n]=new mt(n,l,this.dispatcher);p.style=this,p.setEventedParent(this,()=>({isSourceLoaded:p.loaded(),source:p.serialize(),sourceId:n})),p.onAdd(this.map),this._changed=!0}removeSource(n){if(this._checkLoaded(),this.sourceCaches[n]===void 0)throw new Error("There is no source with this ID");for(const f in this._layers)if(this._layers[f].source===n)return this.fire(new o.k(new Error(`Source "${n}" cannot be removed while layer "${f}" is using it.`)));const l=this.sourceCaches[n];delete this.sourceCaches[n],delete this._updatedSources[n],l.fire(new o.l("data",{sourceDataType:"metadata",dataType:"source",sourceId:n})),l.setEventedParent(null),l.onRemove(this.map),this._changed=!0}setGeoJSONSourceData(n,l){if(this._checkLoaded(),this.sourceCaches[n]===void 0)throw new Error(`There is no source with this ID=${n}`);const f=this.sourceCaches[n].getSource();if(f.type!=="geojson")throw new Error(`geojsonSource.type is ${f.type}, which is !== 'geojson`);f.setData(l),this._changed=!0}getSource(n){return this.sourceCaches[n]&&this.sourceCaches[n].getSource()}addLayer(n,l,f={}){this._checkLoaded();const p=n.id;if(this.getLayer(p))return void this.fire(new o.k(new Error(`Layer "${p}" already exists on this map.`)));let _;if(n.type==="custom"){if(Lo(this,o.bL(n)))return;_=o.bI(n)}else{if("source"in n&&typeof n.source=="object"&&(this.addSource(p,n.source),n=o.bJ(n),n=o.e(n,{source:p})),this._validate(o.z.layer,`layers.${p}`,n,{arrayIndex:-1},f))return;_=o.bI(n),this._validateLayer(_),_.setEventedParent(this,{layer:{id:p}})}const S=l?this._order.indexOf(l):this._order.length;if(l&&S===-1)this.fire(new o.k(new Error(`Cannot add layer "${p}" before non-existing layer "${l}".`)));else{if(this._order.splice(S,0,p),this._layerOrderChanged=!0,this._layers[p]=_,this._removedLayers[p]&&_.source&&_.type!=="custom"){const P=this._removedLayers[p];delete this._removedLayers[p],P.type!==_.type?this._updatedSources[_.source]="clear":(this._updatedSources[_.source]="reload",this.sourceCaches[_.source].pause())}this._updateLayer(_),_.onAdd&&_.onAdd(this.map)}}moveLayer(n,l){if(this._checkLoaded(),this._changed=!0,!this._layers[n])return void this.fire(new o.k(new Error(`The layer '${n}' does not exist in the map's style and cannot be moved.`)));if(n===l)return;const f=this._order.indexOf(n);this._order.splice(f,1);const p=l?this._order.indexOf(l):this._order.length;l&&p===-1?this.fire(new o.k(new Error(`Cannot move layer "${n}" before non-existing layer "${l}".`))):(this._order.splice(p,0,n),this._layerOrderChanged=!0)}removeLayer(n){this._checkLoaded();const l=this._layers[n];if(!l)return void this.fire(new o.k(new Error(`Cannot remove non-existing layer "${n}".`)));l.setEventedParent(null);const f=this._order.indexOf(n);this._order.splice(f,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[n]=l,delete this._layers[n],this._serializedLayers&&delete this._serializedLayers[n],delete this._updatedLayers[n],delete this._updatedPaintProps[n],l.onRemove&&l.onRemove(this.map)}getLayer(n){return this._layers[n]}getLayersOrder(){return[...this._order]}hasLayer(n){return n in this._layers}setLayerZoomRange(n,l,f){this._checkLoaded();const p=this.getLayer(n);p?p.minzoom===l&&p.maxzoom===f||(l!=null&&(p.minzoom=l),f!=null&&(p.maxzoom=f),this._updateLayer(p)):this.fire(new o.k(new Error(`Cannot set the zoom range of non-existing layer "${n}".`)))}setFilter(n,l,f={}){this._checkLoaded();const p=this.getLayer(n);if(p){if(!o.bG(p.filter,l))return l==null?(p.setFilter(void 0),void this._updateLayer(p)):void(this._validate(o.z.filter,`layers.${p.id}.filter`,l,null,f)||(p.setFilter(o.bJ(l)),this._updateLayer(p)))}else this.fire(new o.k(new Error(`Cannot filter non-existing layer "${n}".`)))}getFilter(n){return o.bJ(this.getLayer(n).filter)}setLayoutProperty(n,l,f,p={}){this._checkLoaded();const _=this.getLayer(n);_?o.bG(_.getLayoutProperty(l),f)||(_.setLayoutProperty(l,f,p),this._updateLayer(_)):this.fire(new o.k(new Error(`Cannot style non-existing layer "${n}".`)))}getLayoutProperty(n,l){const f=this.getLayer(n);if(f)return f.getLayoutProperty(l);this.fire(new o.k(new Error(`Cannot get style of non-existing layer "${n}".`)))}setPaintProperty(n,l,f,p={}){this._checkLoaded();const _=this.getLayer(n);_?o.bG(_.getPaintProperty(l),f)||(_.setPaintProperty(l,f,p)&&this._updateLayer(_),this._changed=!0,this._updatedPaintProps[n]=!0,this._serializedLayers=null):this.fire(new o.k(new Error(`Cannot style non-existing layer "${n}".`)))}getPaintProperty(n,l){return this.getLayer(n).getPaintProperty(l)}setFeatureState(n,l){this._checkLoaded();const f=n.source,p=n.sourceLayer,_=this.sourceCaches[f];if(_===void 0)return void this.fire(new o.k(new Error(`The source '${f}' does not exist in the map's style.`)));const S=_.getSource().type;S==="geojson"&&p?this.fire(new o.k(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):S!=="vector"||p?(n.id===void 0&&this.fire(new o.k(new Error("The feature id parameter must be provided."))),_.setFeatureState(p,n.id,l)):this.fire(new o.k(new Error("The sourceLayer parameter must be provided for vector source types.")))}removeFeatureState(n,l){this._checkLoaded();const f=n.source,p=this.sourceCaches[f];if(p===void 0)return void this.fire(new o.k(new Error(`The source '${f}' does not exist in the map's style.`)));const _=p.getSource().type,S=_==="vector"?n.sourceLayer:void 0;_!=="vector"||S?l&&typeof n.id!="string"&&typeof n.id!="number"?this.fire(new o.k(new Error("A feature id is required to remove its specific state property."))):p.removeFeatureState(S,n.id,l):this.fire(new o.k(new Error("The sourceLayer parameter must be provided for vector source types.")))}getFeatureState(n){this._checkLoaded();const l=n.source,f=n.sourceLayer,p=this.sourceCaches[l];if(p!==void 0)return p.getSource().type!=="vector"||f?(n.id===void 0&&this.fire(new o.k(new Error("The feature id parameter must be provided."))),p.getFeatureState(f,n.id)):void this.fire(new o.k(new Error("The sourceLayer parameter must be provided for vector source types.")));this.fire(new o.k(new Error(`The source '${l}' does not exist in the map's style.`)))}getTransition(){return o.e({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){if(!this._loaded)return;const n=o.bM(this.sourceCaches,_=>_.serialize()),l=this._serializeByIds(this._order,!0),f=this.map.getTerrain()||void 0,p=this.stylesheet;return o.bN({version:p.version,name:p.name,metadata:p.metadata,light:p.light,sky:p.sky,center:p.center,zoom:p.zoom,bearing:p.bearing,pitch:p.pitch,sprite:p.sprite,glyphs:p.glyphs,transition:p.transition,projection:p.projection,sources:n,layers:l,terrain:f},_=>_!==void 0)}_updateLayer(n){this._updatedLayers[n.id]=!0,n.source&&!this._updatedSources[n.source]&&this.sourceCaches[n.source].getSource().type!=="raster"&&(this._updatedSources[n.source]="reload",this.sourceCaches[n.source].pause()),this._serializedLayers=null,this._changed=!0}_flattenAndSortRenderedFeatures(n){const l=S=>this._layers[S].type==="fill-extrusion",f={},p=[];for(let S=this._order.length-1;S>=0;S--){const P=this._order[S];if(l(P)){f[P]=S;for(const M of n){const z=M[P];if(z)for(const K of z)p.push(K)}}}p.sort((S,P)=>P.intersectionZ-S.intersectionZ);const _=[];for(let S=this._order.length-1;S>=0;S--){const P=this._order[S];if(l(P))for(let M=p.length-1;M>=0;M--){const z=p[M].feature;if(f[z.layer.id]<S)break;_.push(z),p.pop()}else for(const M of n){const z=M[P];if(z)for(const K of z)_.push(K.feature)}}return _}queryRenderedFeatures(n,l,f){l&&l.filter&&this._validate(o.z.filter,"queryRenderedFeatures.filter",l.filter,null,l);const p={};if(l&&l.layers){if(!(Array.isArray(l.layers)||l.layers instanceof Set))return this.fire(new o.k(new Error("parameters.layers must be an Array or a Set of strings"))),[];for(const z of l.layers){const K=this._layers[z];if(!K)return this.fire(new o.k(new Error(`The layer '${z}' does not exist in the map's style and cannot be queried for features.`))),[];p[K.source]=!0}}const _=[];l.availableImages=this._availableImages;const S=this._serializedAllLayers(),P=l.layers instanceof Set?l.layers:Array.isArray(l.layers)?new Set(l.layers):null,M=Object.assign(Object.assign({},l),{layers:P});for(const z in this.sourceCaches)l.layers&&!p[z]||_.push(dt(this.sourceCaches[z],this._layers,S,n,M,f,this.map.terrain?(K,Z,$)=>this.map.terrain.getElevation(K,Z,$):void 0));return this.placement&&_.push(function(z,K,Z,$,Y,he,Ie){const Ee={},Fe=he.queryRenderedSymbols($),De=[];for(const Ve of Object.keys(Fe).map(Number))De.push(Ie[Ve]);De.sort(Rt);for(const Ve of De){const Oe=Ve.featureIndex.lookupSymbolFeatures(Fe[Ve.bucketInstanceId],K,Ve.bucketIndex,Ve.sourceLayerIndex,Y.filter,Y.layers,Y.availableImages,z);for(const We in Oe){const Je=Ee[We]=Ee[We]||[],ze=Oe[We];ze.sort((ht,St)=>{const gt=Ve.featureSortOrder;if(gt){const _t=gt.indexOf(ht.featureIndex);return gt.indexOf(St.featureIndex)-_t}return St.featureIndex-ht.featureIndex});for(const ht of ze)Je.push(ht)}}return function(Ve,Oe,We){for(const Je in Ve)for(const ze of Ve[Je])Mt(ze,We[Oe[Je].source]);return Ve}(Ee,z,Z)}(this._layers,S,this.sourceCaches,n,M,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(_)}querySourceFeatures(n,l){l&&l.filter&&this._validate(o.z.filter,"querySourceFeatures.filter",l.filter,null,l);const f=this.sourceCaches[n];return f?function(p,_){const S=p.getRenderableIds().map(z=>p.getTileByID(z)),P=[],M={};for(let z=0;z<S.length;z++){const K=S[z],Z=K.tileID.canonical.key;M[Z]||(M[Z]=!0,K.querySourceFeatures(P,_))}return P}(f,l):[]}getLight(){return this.light.getLight()}setLight(n,l={}){this._checkLoaded();const f=this.light.getLight();let p=!1;for(const S in n)if(!o.bG(n[S],f[S])){p=!0;break}if(!p)return;const _={now:F.now(),transition:o.e({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(n,l),this.light.updateTransitions(_)}getProjection(){var n;return(n=this.stylesheet)===null||n===void 0?void 0:n.projection}setProjection(n){if(this._checkLoaded(),this.projection){if(this.projection.name===n.type)return;this.projection.destroy(),delete this.projection}this.stylesheet.projection=n,this._setProjectionInternal(n.type)}getSky(){var n;return(n=this.stylesheet)===null||n===void 0?void 0:n.sky}setSky(n,l={}){this._checkLoaded();const f=this.getSky();let p=!1;if(!n&&!f)return;if(n&&!f)p=!0;else if(!n&&f)p=!0;else for(const S in n)if(!o.bG(n[S],f[S])){p=!0;break}if(!p)return;const _={now:F.now(),transition:o.e({duration:300,delay:0},this.stylesheet.transition)};this.stylesheet.sky=n,this.sky.setSky(n,l),this.sky.updateTransitions(_)}_setProjectionInternal(n){const l=function(f){if(Array.isArray(f)){const p=new eo({type:f});return{projection:p,transform:new ns,cameraHelper:new AA(p)}}switch(f){case"mercator":return{projection:new Ll,transform:new Un,cameraHelper:new kl};case"globe":{const p=new eo({type:["interpolate",["linear"],["zoom"],11,"vertical-perspective",12,"mercator"]});return{projection:p,transform:new ns,cameraHelper:new AA(p)}}case"vertical-perspective":return{projection:new Xc,transform:new Rl,cameraHelper:new Ui};default:return o.w(`Unknown projection name: ${f}. Falling back to mercator projection.`),{projection:new Ll,transform:new Un,cameraHelper:new kl}}}(n);this.projection=l.projection,this.map.migrateProjection(l.transform,l.cameraHelper);for(const f in this.sourceCaches)this.sourceCaches[f].reload()}_validate(n,l,f,p,_={}){return(!_||_.validate!==!1)&&Lo(this,n.call(o.z,o.e({key:l,style:this.serialize(),value:f,styleSpec:o.v},p)))}_remove(n=!0){this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._loadStyleRequest&&(this._loadStyleRequest.abort(),this._loadStyleRequest=null),this._spriteRequest&&(this._spriteRequest.abort(),this._spriteRequest=null),Hr().off(Dr,this._rtlPluginLoaded);for(const l in this._layers)this._layers[l].setEventedParent(null);for(const l in this.sourceCaches){const f=this.sourceCaches[l];f.setEventedParent(null),f.onRemove(this.map)}this.imageManager.setEventedParent(null),this.setEventedParent(null),n&&this.dispatcher.broadcast("RM",void 0),this.dispatcher.remove(n)}_clearSource(n){this.sourceCaches[n].clearTiles()}_reloadSource(n){this.sourceCaches[n].resume(),this.sourceCaches[n].reload()}_updateSources(n){for(const l in this.sourceCaches)this.sourceCaches[l].update(n,this.map.terrain)}_generateCollisionBoxes(){for(const n in this.sourceCaches)this._reloadSource(n)}_updatePlacement(n,l,f,p,_=!1){let S=!1,P=!1;const M={};for(const z of this._order){const K=this._layers[z];if(K.type!=="symbol")continue;if(!M[K.source]){const $=this.sourceCaches[K.source];M[K.source]=$.getRenderableIds(!0).map(Y=>$.getTileByID(Y)).sort((Y,he)=>he.tileID.overscaledZ-Y.tileID.overscaledZ||(Y.tileID.isLessThan(he.tileID)?-1:1))}const Z=this.crossTileSymbolIndex.addLayer(K,M[K.source],n.center.lng);S=S||Z}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((_=_||this._layerOrderChanged||f===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(F.now(),n.zoom))&&(this.pauseablePlacement=new XA(n,this.map.terrain,this._order,_,l,f,p,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,M),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(F.now()),P=!0),S&&this.pauseablePlacement.placement.setStale()),P||S)for(const z of this._order){const K=this._layers[z];K.type==="symbol"&&this.placement.updateLayerOpacities(K,M[K.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(F.now())}_releaseSymbolFadeTiles(){for(const n in this.sourceCaches)this.sourceCaches[n].releaseSymbolFadeTiles()}getImages(n,l){return o._(this,void 0,void 0,function*(){const f=yield this.imageManager.getImages(l.icons);this._updateTilesForChangedImages();const p=this.sourceCaches[l.source];return p&&p.setDependencies(l.tileID.key,l.type,l.icons),f})}getGlyphs(n,l){return o._(this,void 0,void 0,function*(){const f=yield this.glyphManager.getGlyphs(l.stacks),p=this.sourceCaches[l.source];return p&&p.setDependencies(l.tileID.key,l.type,[""]),f})}getGlyphsUrl(){return this.stylesheet.glyphs||null}setGlyphs(n,l={}){this._checkLoaded(),n&&this._validate(o.z.glyphs,"glyphs",n,null,l)||(this._glyphsDidChange=!0,this.stylesheet.glyphs=n,this.glyphManager.entries={},this.glyphManager.setURL(n))}addSprite(n,l,f={},p){this._checkLoaded();const _=[{id:n,url:l}],S=[...fe(this.stylesheet.sprite),..._];this._validate(o.z.sprite,"sprite",S,null,f)||(this.stylesheet.sprite=S,this._loadSprite(_,!0,p))}removeSprite(n){this._checkLoaded();const l=fe(this.stylesheet.sprite);if(l.find(f=>f.id===n)){if(this._spritesImagesIds[n])for(const f of this._spritesImagesIds[n])this.imageManager.removeImage(f),this._changedImages[f]=!0;l.splice(l.findIndex(f=>f.id===n),1),this.stylesheet.sprite=l.length>0?l:void 0,delete this._spritesImagesIds[n],this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new o.l("data",{dataType:"style"}))}else this.fire(new o.k(new Error(`Sprite "${n}" doesn't exists on this map.`)))}getSprite(){return fe(this.stylesheet.sprite)}setSprite(n,l={},f){this._checkLoaded(),n&&this._validate(o.z.sprite,"sprite",n,null,l)||(this.stylesheet.sprite=n,n?this._loadSprite(n,!0,f):(this._unloadSprite(),f&&f(null)))}}var ce=o.aI([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);class je{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}bind(n,l,f,p,_,S,P,M,z){this.context=n;let K=this.boundPaintVertexBuffers.length!==p.length;for(let Z=0;!K&&Z<p.length;Z++)this.boundPaintVertexBuffers[Z]!==p[Z]&&(K=!0);!this.vao||this.boundProgram!==l||this.boundLayoutVertexBuffer!==f||K||this.boundIndexBuffer!==_||this.boundVertexOffset!==S||this.boundDynamicVertexBuffer!==P||this.boundDynamicVertexBuffer2!==M||this.boundDynamicVertexBuffer3!==z?this.freshBind(l,f,p,_,S,P,M,z):(n.bindVertexArray.set(this.vao),P&&P.bind(),_&&_.dynamicDraw&&_.bind(),M&&M.bind(),z&&z.bind())}freshBind(n,l,f,p,_,S,P,M){const z=n.numAttributes,K=this.context,Z=K.gl;this.vao&&this.destroy(),this.vao=K.createVertexArray(),K.bindVertexArray.set(this.vao),this.boundProgram=n,this.boundLayoutVertexBuffer=l,this.boundPaintVertexBuffers=f,this.boundIndexBuffer=p,this.boundVertexOffset=_,this.boundDynamicVertexBuffer=S,this.boundDynamicVertexBuffer2=P,this.boundDynamicVertexBuffer3=M,l.enableAttributes(Z,n);for(const $ of f)$.enableAttributes(Z,n);S&&S.enableAttributes(Z,n),P&&P.enableAttributes(Z,n),M&&M.enableAttributes(Z,n),l.bind(),l.setVertexAttribPointers(Z,n,_);for(const $ of f)$.bind(),$.setVertexAttribPointers(Z,n,_);S&&(S.bind(),S.setVertexAttribPointers(Z,n,_)),p&&p.bind(),P&&(P.bind(),P.setVertexAttribPointers(Z,n,_)),M&&(M.bind(),M.setVertexAttribPointers(Z,n,_)),K.currentNumAttributes=z}destroy(){this.vao&&(this.context.deleteVertexArray(this.vao),this.vao=null)}}const at=(v,n,l,f,p)=>({u_texture:0,u_ele_delta:v,u_fog_matrix:n,u_fog_color:l?l.properties.get("fog-color"):o.be.white,u_fog_ground_blend:l?l.properties.get("fog-ground-blend"):1,u_fog_ground_blend_opacity:p?0:l?l.calculateFogBlendOpacity(f):0,u_horizon_color:l?l.properties.get("horizon-color"):o.be.white,u_horizon_fog_blend:l?l.properties.get("horizon-fog-blend"):1,u_is_globe_mode:p?1:0}),vt={mainMatrix:"u_projection_matrix",tileMercatorCoords:"u_projection_tile_mercator_coords",clippingPlane:"u_projection_clipping_plane",projectionTransition:"u_projection_transition",fallbackMatrix:"u_projection_fallback_matrix"};function Ut(v){const n=[];for(let l=0;l<v.length;l++){if(v[l]===null)continue;const f=v[l].split(" ");n.push(f.pop())}return n}class Wt{constructor(n,l,f,p,_,S,P,M,z=[]){const K=n.gl;this.program=K.createProgram();const Z=Ut(l.staticAttributes),$=f?f.getBinderAttributes():[],Y=Z.concat($),he=Js.prelude.staticUniforms?Ut(Js.prelude.staticUniforms):[],Ie=P.staticUniforms?Ut(P.staticUniforms):[],Ee=l.staticUniforms?Ut(l.staticUniforms):[],Fe=f?f.getBinderUniforms():[],De=he.concat(Ie).concat(Ee).concat(Fe),Ve=[];for(const gt of De)Ve.indexOf(gt)<0&&Ve.push(gt);const Oe=f?f.defines():[];Ii(K)&&Oe.unshift("#version 300 es"),_&&Oe.push("#define OVERDRAW_INSPECTOR;"),S&&Oe.push("#define TERRAIN3D;"),M&&Oe.push(M),z&&Oe.push(...z);let We=Oe.concat(Js.prelude.fragmentSource,P.fragmentSource,l.fragmentSource).join(`
`),Je=Oe.concat(Js.prelude.vertexSource,P.vertexSource,l.vertexSource).join(`
`);Ii(K)||(We=function(gt){return gt.replace(/\bin\s/g,"varying ").replace("out highp vec4 fragColor;","").replace(/fragColor/g,"gl_FragColor").replace(/texture\(/g,"texture2D(")}(We),Je=function(gt){return gt.replace(/\bin\s/g,"attribute ").replace(/\bout\s/g,"varying ").replace(/texture\(/g,"texture2D(")}(Je));const ze=K.createShader(K.FRAGMENT_SHADER);if(K.isContextLost())return void(this.failedToCreate=!0);if(K.shaderSource(ze,We),K.compileShader(ze),!K.getShaderParameter(ze,K.COMPILE_STATUS))throw new Error(`Could not compile fragment shader: ${K.getShaderInfoLog(ze)}`);K.attachShader(this.program,ze);const ht=K.createShader(K.VERTEX_SHADER);if(K.isContextLost())return void(this.failedToCreate=!0);if(K.shaderSource(ht,Je),K.compileShader(ht),!K.getShaderParameter(ht,K.COMPILE_STATUS))throw new Error(`Could not compile vertex shader: ${K.getShaderInfoLog(ht)}`);K.attachShader(this.program,ht),this.attributes={};const St={};this.numAttributes=Y.length;for(let gt=0;gt<this.numAttributes;gt++)Y[gt]&&(K.bindAttribLocation(this.program,gt,Y[gt]),this.attributes[Y[gt]]=gt);if(K.linkProgram(this.program),!K.getProgramParameter(this.program,K.LINK_STATUS))throw new Error(`Program failed to link: ${K.getProgramInfoLog(this.program)}`);K.deleteShader(ht),K.deleteShader(ze);for(let gt=0;gt<Ve.length;gt++){const _t=Ve[gt];if(_t&&!St[_t]){const xt=K.getUniformLocation(this.program,_t);xt&&(St[_t]=xt)}}this.fixedUniforms=p(n,St),this.terrainUniforms=((gt,_t)=>({u_depth:new o.bO(gt,_t.u_depth),u_terrain:new o.bO(gt,_t.u_terrain),u_terrain_dim:new o.bf(gt,_t.u_terrain_dim),u_terrain_matrix:new o.bQ(gt,_t.u_terrain_matrix),u_terrain_unpack:new o.bR(gt,_t.u_terrain_unpack),u_terrain_exaggeration:new o.bf(gt,_t.u_terrain_exaggeration)}))(n,St),this.projectionUniforms=((gt,_t)=>({u_projection_matrix:new o.bQ(gt,_t.u_projection_matrix),u_projection_tile_mercator_coords:new o.bR(gt,_t.u_projection_tile_mercator_coords),u_projection_clipping_plane:new o.bR(gt,_t.u_projection_clipping_plane),u_projection_transition:new o.bf(gt,_t.u_projection_transition),u_projection_fallback_matrix:new o.bQ(gt,_t.u_projection_fallback_matrix)}))(n,St),this.binderUniforms=f?f.getUniforms(n,St):[]}draw(n,l,f,p,_,S,P,M,z,K,Z,$,Y,he,Ie,Ee,Fe,De,Ve){const Oe=n.gl;if(this.failedToCreate)return;if(n.program.set(this.program),n.setDepthMode(f),n.setStencilMode(p),n.setColorMode(_),n.setCullFace(S),M){n.activeTexture.set(Oe.TEXTURE2),Oe.bindTexture(Oe.TEXTURE_2D,M.depthTexture),n.activeTexture.set(Oe.TEXTURE3),Oe.bindTexture(Oe.TEXTURE_2D,M.texture);for(const Je in this.terrainUniforms)this.terrainUniforms[Je].set(M[Je])}if(z)for(const Je in z)this.projectionUniforms[vt[Je]].set(z[Je]);if(P)for(const Je in this.fixedUniforms)this.fixedUniforms[Je].set(P[Je]);Ee&&Ee.setUniforms(n,this.binderUniforms,he,{zoom:Ie});let We=0;switch(l){case Oe.LINES:We=2;break;case Oe.TRIANGLES:We=3;break;case Oe.LINE_STRIP:We=1}for(const Je of Y.get()){const ze=Je.vaos||(Je.vaos={});(ze[K]||(ze[K]=new je)).bind(n,this,Z,Ee?Ee.getPaintVertexBuffers():[],$,Je.vertexOffset,Fe,De,Ve),Oe.drawElements(l,Je.primitiveLength*We,Oe.UNSIGNED_SHORT,Je.primitiveOffset*We*2)}}}function gr(v,n,l){const f=1/o.aB(l,1,n.transform.tileZoom),p=Math.pow(2,l.tileID.overscaledZ),_=l.tileSize*Math.pow(2,n.transform.tileZoom)/p,S=_*(l.tileID.canonical.x+l.tileID.wrap*p),P=_*l.tileID.canonical.y;return{u_image:0,u_texsize:l.imageAtlasTexture.size,u_scale:[f,v.fromScale,v.toScale],u_fade:v.t,u_pixel_coord_upper:[S>>16,P>>16],u_pixel_coord_lower:[65535&S,65535&P]}}const Mr=(v,n,l,f)=>{const p=v.style.light,_=p.properties.get("position"),S=[_.x,_.y,_.z],P=o.bU();p.properties.get("anchor")==="viewport"&&o.bV(P,v.transform.bearingInRadians),o.bW(S,S,P);const M=v.transform.transformLightDirection(S),z=p.properties.get("color");return{u_lightpos:S,u_lightpos_globe:M,u_lightintensity:p.properties.get("intensity"),u_lightcolor:[z.r,z.g,z.b],u_vertical_gradient:+n,u_opacity:l,u_fill_translate:f}},en=(v,n,l,f,p,_,S)=>o.e(Mr(v,n,l,f),gr(_,v,S),{u_height_factor:-Math.pow(2,p.overscaledZ)/S.tileSize/8}),Wr=(v,n,l,f)=>o.e(gr(n,v,l),{u_fill_translate:f}),nn=(v,n)=>({u_world:v,u_fill_translate:n}),hi=(v,n,l,f,p)=>o.e(Wr(v,n,l,p),{u_world:f}),ni=(v,n,l,f,p)=>{const _=v.transform;let S,P,M=0;if(l.paint.get("circle-pitch-alignment")==="map"){const z=o.aB(n,1,_.zoom);S=!0,P=[z,z],M=z/(o.$*Math.pow(2,n.tileID.overscaledZ))*2*Math.PI*p}else S=!1,P=_.pixelsToGLUnits;return{u_camera_to_center_distance:_.cameraToCenterDistance,u_scale_with_map:+(l.paint.get("circle-pitch-scale")==="map"),u_pitch_with_map:+S,u_device_pixel_ratio:v.pixelRatio,u_extrude_scale:P,u_globe_extrude_scale:M,u_translate:f}},ii=v=>({u_pixel_extrude_scale:[1/v.width,1/v.height]}),Ri=v=>({u_viewport_size:[v.width,v.height]}),Vi=(v,n=1)=>({u_color:v,u_overlay:0,u_overlay_scale:n}),Ds=(v,n,l,f)=>{const p=o.aB(v,1,n)/(o.$*Math.pow(2,v.tileID.overscaledZ))*2*Math.PI*f;return{u_extrude_scale:o.aB(v,1,n),u_intensity:l,u_globe_extrude_scale:p}},to=(v,n,l,f)=>{const p=o.L();o.bX(p,0,v.width,v.height,0,0,1);const _=v.context.gl;return{u_matrix:p,u_world:[_.drawingBufferWidth,_.drawingBufferHeight],u_image:l,u_color_ramp:f,u_opacity:n.paint.get("heatmap-opacity")}},Qs=(v,n,l)=>{const f=l.paint.get("hillshade-accent-color");let p;switch(l.paint.get("hillshade-method")){case"basic":p=4;break;case"combined":p=1;break;case"igor":p=2;break;case"multidirectional":p=3;break;default:p=0}const _=l.getIlluminationProperties();for(let S=0;S<_.directionRadians.length;S++)l.paint.get("hillshade-illumination-anchor")==="viewport"&&(_.directionRadians[S]+=v.transform.bearingInRadians);return{u_image:0,u_latrange:tc(0,n.tileID),u_exaggeration:l.paint.get("hillshade-exaggeration"),u_altitudes:_.altitudeRadians,u_azimuths:_.directionRadians,u_accent:f,u_method:p,u_highlights:_.highlightColor,u_shadows:_.shadowColor}},ju=(v,n)=>{const l=n.stride,f=o.L();return o.bX(f,0,o.$,-o.$,0,0,1),o.M(f,f,[0,-o.$,0]),{u_matrix:f,u_image:1,u_dimension:[l,l],u_zoom:v.overscaledZ,u_unpack:n.getUnpackVector()}};function tc(v,n){const l=Math.pow(2,n.canonical.z),f=n.canonical.y;return[new o.a0(0,f/l).toLngLat().lat,new o.a0(0,(f+1)/l).toLngLat().lat]}const tu=(v,n,l=0)=>({u_image:0,u_unpack:n.getUnpackVector(),u_dimension:[n.stride,n.stride],u_elevation_stops:1,u_color_stops:4,u_color_ramp_size:l,u_opacity:v.paint.get("color-relief-opacity")}),sl=(v,n,l,f)=>{const p=v.transform;return{u_translation:Nl(v,n,l),u_ratio:f/o.aB(n,1,p.zoom),u_device_pixel_ratio:v.pixelRatio,u_units_to_pixels:[1/p.pixelsToGLUnits[0],1/p.pixelsToGLUnits[1]]}},cA=(v,n,l,f,p)=>o.e(sl(v,n,l,f),{u_image:0,u_image_height:p}),rc=(v,n,l,f,p)=>{const _=v.transform,S=Ki(n,_);return{u_translation:Nl(v,n,l),u_texsize:n.imageAtlasTexture.size,u_ratio:f/o.aB(n,1,_.zoom),u_device_pixel_ratio:v.pixelRatio,u_image:0,u_scale:[S,p.fromScale,p.toScale],u_fade:p.t,u_units_to_pixels:[1/_.pixelsToGLUnits[0],1/_.pixelsToGLUnits[1]]}},uA=(v,n,l,f,p,_)=>{const S=v.lineAtlas,P=Ki(n,v.transform),M=l.layout.get("line-cap")==="round",z=S.getDash(p.from,M),K=S.getDash(p.to,M),Z=z.width*_.fromScale,$=K.width*_.toScale;return o.e(sl(v,n,l,f),{u_patternscale_a:[P/Z,-z.height/2],u_patternscale_b:[P/$,-K.height/2],u_sdfgamma:S.width/(256*Math.min(Z,$)*v.pixelRatio)/2,u_image:0,u_tex_y_a:z.y,u_tex_y_b:K.y,u_mix:_.t})};function Ki(v,n){return 1/o.aB(v,1,n.tileZoom)}function Nl(v,n,l){return o.aC(v.transform,n,l.paint.get("line-translate"),l.paint.get("line-translate-anchor"))}const Mo=(v,n,l,f,p)=>{return{u_tl_parent:v,u_scale_parent:n,u_buffer_scale:1,u_fade_t:l.mix,u_opacity:l.opacity*f.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:f.paint.get("raster-brightness-min"),u_brightness_high:f.paint.get("raster-brightness-max"),u_saturation_factor:(S=f.paint.get("raster-saturation"),S>0?1-1/(1.001-S):-S),u_contrast_factor:(_=f.paint.get("raster-contrast"),_>0?1/(1-_):1+_),u_spin_weights:hA(f.paint.get("raster-hue-rotate")),u_coords_top:[p[0].x,p[0].y,p[1].x,p[1].y],u_coords_bottom:[p[3].x,p[3].y,p[2].x,p[2].y]};var _,S};function hA(v){v*=Math.PI/180;const n=Math.sin(v),l=Math.cos(v);return[(2*l+1)/3,(-Math.sqrt(3)*n-l+1)/3,(Math.sqrt(3)*n-l+1)/3]}const dA=(v,n,l,f,p,_,S,P,M,z,K,Z,$)=>{const Y=S.transform;return{u_is_size_zoom_constant:+(v==="constant"||v==="source"),u_is_size_feature_constant:+(v==="constant"||v==="camera"),u_size_t:n?n.uSizeT:0,u_size:n?n.uSize:0,u_camera_to_center_distance:Y.cameraToCenterDistance,u_pitch:Y.pitch/360*2*Math.PI,u_rotate_symbol:+l,u_aspect_ratio:Y.width/Y.height,u_fade_change:S.options.fadeDuration?S.symbolFadeChange:1,u_label_plane_matrix:P,u_coord_matrix:M,u_is_text:+K,u_pitch_with_map:+f,u_is_along_line:p,u_is_variable_anchor:_,u_texsize:Z,u_texture:0,u_translation:z,u_pitched_scale:$}},Gi=(v,n,l,f,p,_,S,P,M,z,K,Z,$,Y)=>{const he=S.transform;return o.e(dA(v,n,l,f,p,_,S,P,M,z,K,Z,Y),{u_gamma_scale:f?Math.cos(he.pitch*Math.PI/180)*he.cameraToCenterDistance:1,u_device_pixel_ratio:S.pixelRatio,u_is_halo:1})},hd=(v,n,l,f,p,_,S,P,M,z,K,Z,$)=>o.e(Gi(v,n,l,f,p,_,S,P,M,z,!0,K,0,$),{u_texsize_icon:Z,u_texture_icon:1}),Dl=(v,n)=>({u_opacity:v,u_color:n}),Vu=(v,n,l,f,p)=>o.e(function(_,S,P,M){const z=P.imageManager.getPattern(_.from.toString()),K=P.imageManager.getPattern(_.to.toString()),{width:Z,height:$}=P.imageManager.getPixelSize(),Y=Math.pow(2,M.tileID.overscaledZ),he=M.tileSize*Math.pow(2,P.transform.tileZoom)/Y,Ie=he*(M.tileID.canonical.x+M.tileID.wrap*Y),Ee=he*M.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:z.tl,u_pattern_br_a:z.br,u_pattern_tl_b:K.tl,u_pattern_br_b:K.br,u_texsize:[Z,$],u_mix:S.t,u_pattern_size_a:z.displaySize,u_pattern_size_b:K.displaySize,u_scale_a:S.fromScale,u_scale_b:S.toScale,u_tile_units_to_pixels:1/o.aB(M,1,P.transform.tileZoom),u_pixel_coord_upper:[Ie>>16,Ee>>16],u_pixel_coord_lower:[65535&Ie,65535&Ee]}}(l,p,n,f),{u_opacity:v}),yo=(v,n)=>{},fA={fillExtrusion:(v,n)=>({u_lightpos:new o.bS(v,n.u_lightpos),u_lightpos_globe:new o.bS(v,n.u_lightpos_globe),u_lightintensity:new o.bf(v,n.u_lightintensity),u_lightcolor:new o.bS(v,n.u_lightcolor),u_vertical_gradient:new o.bf(v,n.u_vertical_gradient),u_opacity:new o.bf(v,n.u_opacity),u_fill_translate:new o.bT(v,n.u_fill_translate)}),fillExtrusionPattern:(v,n)=>({u_lightpos:new o.bS(v,n.u_lightpos),u_lightpos_globe:new o.bS(v,n.u_lightpos_globe),u_lightintensity:new o.bf(v,n.u_lightintensity),u_lightcolor:new o.bS(v,n.u_lightcolor),u_vertical_gradient:new o.bf(v,n.u_vertical_gradient),u_height_factor:new o.bf(v,n.u_height_factor),u_opacity:new o.bf(v,n.u_opacity),u_fill_translate:new o.bT(v,n.u_fill_translate),u_image:new o.bO(v,n.u_image),u_texsize:new o.bT(v,n.u_texsize),u_pixel_coord_upper:new o.bT(v,n.u_pixel_coord_upper),u_pixel_coord_lower:new o.bT(v,n.u_pixel_coord_lower),u_scale:new o.bS(v,n.u_scale),u_fade:new o.bf(v,n.u_fade)}),fill:(v,n)=>({u_fill_translate:new o.bT(v,n.u_fill_translate)}),fillPattern:(v,n)=>({u_image:new o.bO(v,n.u_image),u_texsize:new o.bT(v,n.u_texsize),u_pixel_coord_upper:new o.bT(v,n.u_pixel_coord_upper),u_pixel_coord_lower:new o.bT(v,n.u_pixel_coord_lower),u_scale:new o.bS(v,n.u_scale),u_fade:new o.bf(v,n.u_fade),u_fill_translate:new o.bT(v,n.u_fill_translate)}),fillOutline:(v,n)=>({u_world:new o.bT(v,n.u_world),u_fill_translate:new o.bT(v,n.u_fill_translate)}),fillOutlinePattern:(v,n)=>({u_world:new o.bT(v,n.u_world),u_image:new o.bO(v,n.u_image),u_texsize:new o.bT(v,n.u_texsize),u_pixel_coord_upper:new o.bT(v,n.u_pixel_coord_upper),u_pixel_coord_lower:new o.bT(v,n.u_pixel_coord_lower),u_scale:new o.bS(v,n.u_scale),u_fade:new o.bf(v,n.u_fade),u_fill_translate:new o.bT(v,n.u_fill_translate)}),circle:(v,n)=>({u_camera_to_center_distance:new o.bf(v,n.u_camera_to_center_distance),u_scale_with_map:new o.bO(v,n.u_scale_with_map),u_pitch_with_map:new o.bO(v,n.u_pitch_with_map),u_extrude_scale:new o.bT(v,n.u_extrude_scale),u_device_pixel_ratio:new o.bf(v,n.u_device_pixel_ratio),u_globe_extrude_scale:new o.bf(v,n.u_globe_extrude_scale),u_translate:new o.bT(v,n.u_translate)}),collisionBox:(v,n)=>({u_pixel_extrude_scale:new o.bT(v,n.u_pixel_extrude_scale)}),collisionCircle:(v,n)=>({u_viewport_size:new o.bT(v,n.u_viewport_size)}),debug:(v,n)=>({u_color:new o.bP(v,n.u_color),u_overlay:new o.bO(v,n.u_overlay),u_overlay_scale:new o.bf(v,n.u_overlay_scale)}),depth:yo,clippingMask:yo,heatmap:(v,n)=>({u_extrude_scale:new o.bf(v,n.u_extrude_scale),u_intensity:new o.bf(v,n.u_intensity),u_globe_extrude_scale:new o.bf(v,n.u_globe_extrude_scale)}),heatmapTexture:(v,n)=>({u_matrix:new o.bQ(v,n.u_matrix),u_world:new o.bT(v,n.u_world),u_image:new o.bO(v,n.u_image),u_color_ramp:new o.bO(v,n.u_color_ramp),u_opacity:new o.bf(v,n.u_opacity)}),hillshade:(v,n)=>({u_image:new o.bO(v,n.u_image),u_latrange:new o.bT(v,n.u_latrange),u_exaggeration:new o.bf(v,n.u_exaggeration),u_altitudes:new o.bZ(v,n.u_altitudes),u_azimuths:new o.bZ(v,n.u_azimuths),u_accent:new o.bP(v,n.u_accent),u_method:new o.bO(v,n.u_method),u_shadows:new o.bY(v,n.u_shadows),u_highlights:new o.bY(v,n.u_highlights)}),hillshadePrepare:(v,n)=>({u_matrix:new o.bQ(v,n.u_matrix),u_image:new o.bO(v,n.u_image),u_dimension:new o.bT(v,n.u_dimension),u_zoom:new o.bf(v,n.u_zoom),u_unpack:new o.bR(v,n.u_unpack)}),colorRelief:(v,n)=>({u_image:new o.bO(v,n.u_image),u_unpack:new o.bR(v,n.u_unpack),u_dimension:new o.bT(v,n.u_dimension),u_elevation_stops:new o.bO(v,n.u_elevation_stops),u_color_stops:new o.bO(v,n.u_color_stops),u_color_ramp_size:new o.bO(v,n.u_color_ramp_size),u_opacity:new o.bf(v,n.u_opacity)}),line:(v,n)=>({u_translation:new o.bT(v,n.u_translation),u_ratio:new o.bf(v,n.u_ratio),u_device_pixel_ratio:new o.bf(v,n.u_device_pixel_ratio),u_units_to_pixels:new o.bT(v,n.u_units_to_pixels)}),lineGradient:(v,n)=>({u_translation:new o.bT(v,n.u_translation),u_ratio:new o.bf(v,n.u_ratio),u_device_pixel_ratio:new o.bf(v,n.u_device_pixel_ratio),u_units_to_pixels:new o.bT(v,n.u_units_to_pixels),u_image:new o.bO(v,n.u_image),u_image_height:new o.bf(v,n.u_image_height)}),linePattern:(v,n)=>({u_translation:new o.bT(v,n.u_translation),u_texsize:new o.bT(v,n.u_texsize),u_ratio:new o.bf(v,n.u_ratio),u_device_pixel_ratio:new o.bf(v,n.u_device_pixel_ratio),u_image:new o.bO(v,n.u_image),u_units_to_pixels:new o.bT(v,n.u_units_to_pixels),u_scale:new o.bS(v,n.u_scale),u_fade:new o.bf(v,n.u_fade)}),lineSDF:(v,n)=>({u_translation:new o.bT(v,n.u_translation),u_ratio:new o.bf(v,n.u_ratio),u_device_pixel_ratio:new o.bf(v,n.u_device_pixel_ratio),u_units_to_pixels:new o.bT(v,n.u_units_to_pixels),u_patternscale_a:new o.bT(v,n.u_patternscale_a),u_patternscale_b:new o.bT(v,n.u_patternscale_b),u_sdfgamma:new o.bf(v,n.u_sdfgamma),u_image:new o.bO(v,n.u_image),u_tex_y_a:new o.bf(v,n.u_tex_y_a),u_tex_y_b:new o.bf(v,n.u_tex_y_b),u_mix:new o.bf(v,n.u_mix)}),raster:(v,n)=>({u_tl_parent:new o.bT(v,n.u_tl_parent),u_scale_parent:new o.bf(v,n.u_scale_parent),u_buffer_scale:new o.bf(v,n.u_buffer_scale),u_fade_t:new o.bf(v,n.u_fade_t),u_opacity:new o.bf(v,n.u_opacity),u_image0:new o.bO(v,n.u_image0),u_image1:new o.bO(v,n.u_image1),u_brightness_low:new o.bf(v,n.u_brightness_low),u_brightness_high:new o.bf(v,n.u_brightness_high),u_saturation_factor:new o.bf(v,n.u_saturation_factor),u_contrast_factor:new o.bf(v,n.u_contrast_factor),u_spin_weights:new o.bS(v,n.u_spin_weights),u_coords_top:new o.bR(v,n.u_coords_top),u_coords_bottom:new o.bR(v,n.u_coords_bottom)}),symbolIcon:(v,n)=>({u_is_size_zoom_constant:new o.bO(v,n.u_is_size_zoom_constant),u_is_size_feature_constant:new o.bO(v,n.u_is_size_feature_constant),u_size_t:new o.bf(v,n.u_size_t),u_size:new o.bf(v,n.u_size),u_camera_to_center_distance:new o.bf(v,n.u_camera_to_center_distance),u_pitch:new o.bf(v,n.u_pitch),u_rotate_symbol:new o.bO(v,n.u_rotate_symbol),u_aspect_ratio:new o.bf(v,n.u_aspect_ratio),u_fade_change:new o.bf(v,n.u_fade_change),u_label_plane_matrix:new o.bQ(v,n.u_label_plane_matrix),u_coord_matrix:new o.bQ(v,n.u_coord_matrix),u_is_text:new o.bO(v,n.u_is_text),u_pitch_with_map:new o.bO(v,n.u_pitch_with_map),u_is_along_line:new o.bO(v,n.u_is_along_line),u_is_variable_anchor:new o.bO(v,n.u_is_variable_anchor),u_texsize:new o.bT(v,n.u_texsize),u_texture:new o.bO(v,n.u_texture),u_translation:new o.bT(v,n.u_translation),u_pitched_scale:new o.bf(v,n.u_pitched_scale)}),symbolSDF:(v,n)=>({u_is_size_zoom_constant:new o.bO(v,n.u_is_size_zoom_constant),u_is_size_feature_constant:new o.bO(v,n.u_is_size_feature_constant),u_size_t:new o.bf(v,n.u_size_t),u_size:new o.bf(v,n.u_size),u_camera_to_center_distance:new o.bf(v,n.u_camera_to_center_distance),u_pitch:new o.bf(v,n.u_pitch),u_rotate_symbol:new o.bO(v,n.u_rotate_symbol),u_aspect_ratio:new o.bf(v,n.u_aspect_ratio),u_fade_change:new o.bf(v,n.u_fade_change),u_label_plane_matrix:new o.bQ(v,n.u_label_plane_matrix),u_coord_matrix:new o.bQ(v,n.u_coord_matrix),u_is_text:new o.bO(v,n.u_is_text),u_pitch_with_map:new o.bO(v,n.u_pitch_with_map),u_is_along_line:new o.bO(v,n.u_is_along_line),u_is_variable_anchor:new o.bO(v,n.u_is_variable_anchor),u_texsize:new o.bT(v,n.u_texsize),u_texture:new o.bO(v,n.u_texture),u_gamma_scale:new o.bf(v,n.u_gamma_scale),u_device_pixel_ratio:new o.bf(v,n.u_device_pixel_ratio),u_is_halo:new o.bO(v,n.u_is_halo),u_translation:new o.bT(v,n.u_translation),u_pitched_scale:new o.bf(v,n.u_pitched_scale)}),symbolTextAndIcon:(v,n)=>({u_is_size_zoom_constant:new o.bO(v,n.u_is_size_zoom_constant),u_is_size_feature_constant:new o.bO(v,n.u_is_size_feature_constant),u_size_t:new o.bf(v,n.u_size_t),u_size:new o.bf(v,n.u_size),u_camera_to_center_distance:new o.bf(v,n.u_camera_to_center_distance),u_pitch:new o.bf(v,n.u_pitch),u_rotate_symbol:new o.bO(v,n.u_rotate_symbol),u_aspect_ratio:new o.bf(v,n.u_aspect_ratio),u_fade_change:new o.bf(v,n.u_fade_change),u_label_plane_matrix:new o.bQ(v,n.u_label_plane_matrix),u_coord_matrix:new o.bQ(v,n.u_coord_matrix),u_is_text:new o.bO(v,n.u_is_text),u_pitch_with_map:new o.bO(v,n.u_pitch_with_map),u_is_along_line:new o.bO(v,n.u_is_along_line),u_is_variable_anchor:new o.bO(v,n.u_is_variable_anchor),u_texsize:new o.bT(v,n.u_texsize),u_texsize_icon:new o.bT(v,n.u_texsize_icon),u_texture:new o.bO(v,n.u_texture),u_texture_icon:new o.bO(v,n.u_texture_icon),u_gamma_scale:new o.bf(v,n.u_gamma_scale),u_device_pixel_ratio:new o.bf(v,n.u_device_pixel_ratio),u_is_halo:new o.bO(v,n.u_is_halo),u_translation:new o.bT(v,n.u_translation),u_pitched_scale:new o.bf(v,n.u_pitched_scale)}),background:(v,n)=>({u_opacity:new o.bf(v,n.u_opacity),u_color:new o.bP(v,n.u_color)}),backgroundPattern:(v,n)=>({u_opacity:new o.bf(v,n.u_opacity),u_image:new o.bO(v,n.u_image),u_pattern_tl_a:new o.bT(v,n.u_pattern_tl_a),u_pattern_br_a:new o.bT(v,n.u_pattern_br_a),u_pattern_tl_b:new o.bT(v,n.u_pattern_tl_b),u_pattern_br_b:new o.bT(v,n.u_pattern_br_b),u_texsize:new o.bT(v,n.u_texsize),u_mix:new o.bf(v,n.u_mix),u_pattern_size_a:new o.bT(v,n.u_pattern_size_a),u_pattern_size_b:new o.bT(v,n.u_pattern_size_b),u_scale_a:new o.bf(v,n.u_scale_a),u_scale_b:new o.bf(v,n.u_scale_b),u_pixel_coord_upper:new o.bT(v,n.u_pixel_coord_upper),u_pixel_coord_lower:new o.bT(v,n.u_pixel_coord_lower),u_tile_units_to_pixels:new o.bf(v,n.u_tile_units_to_pixels)}),terrain:(v,n)=>({u_texture:new o.bO(v,n.u_texture),u_ele_delta:new o.bf(v,n.u_ele_delta),u_fog_matrix:new o.bQ(v,n.u_fog_matrix),u_fog_color:new o.bP(v,n.u_fog_color),u_fog_ground_blend:new o.bf(v,n.u_fog_ground_blend),u_fog_ground_blend_opacity:new o.bf(v,n.u_fog_ground_blend_opacity),u_horizon_color:new o.bP(v,n.u_horizon_color),u_horizon_fog_blend:new o.bf(v,n.u_horizon_fog_blend),u_is_globe_mode:new o.bf(v,n.u_is_globe_mode)}),terrainDepth:(v,n)=>({u_ele_delta:new o.bf(v,n.u_ele_delta)}),terrainCoords:(v,n)=>({u_texture:new o.bO(v,n.u_texture),u_terrain_coords_id:new o.bf(v,n.u_terrain_coords_id),u_ele_delta:new o.bf(v,n.u_ele_delta)}),projectionErrorMeasurement:(v,n)=>({u_input:new o.bf(v,n.u_input),u_output_expected:new o.bf(v,n.u_output_expected)}),atmosphere:(v,n)=>({u_sun_pos:new o.bS(v,n.u_sun_pos),u_atmosphere_blend:new o.bf(v,n.u_atmosphere_blend),u_globe_position:new o.bS(v,n.u_globe_position),u_globe_radius:new o.bf(v,n.u_globe_radius),u_inv_proj_matrix:new o.bQ(v,n.u_inv_proj_matrix)}),sky:(v,n)=>({u_sky_color:new o.bP(v,n.u_sky_color),u_horizon_color:new o.bP(v,n.u_horizon_color),u_horizon:new o.bT(v,n.u_horizon),u_horizon_normal:new o.bT(v,n.u_horizon_normal),u_sky_horizon_blend:new o.bf(v,n.u_sky_horizon_blend),u_sky_blend:new o.bf(v,n.u_sky_blend)})};class ru{constructor(n,l,f){this.context=n;const p=n.gl;this.buffer=p.createBuffer(),this.dynamicDraw=!!f,this.context.unbindVAO(),n.bindElementBuffer.set(this.buffer),p.bufferData(p.ELEMENT_ARRAY_BUFFER,l.arrayBuffer,this.dynamicDraw?p.DYNAMIC_DRAW:p.STATIC_DRAW),this.dynamicDraw||delete l.arrayBuffer}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(n){const l=this.context.gl;if(!this.dynamicDraw)throw new Error("Attempted to update data while not in dynamic mode.");this.context.unbindVAO(),this.bind(),l.bufferSubData(l.ELEMENT_ARRAY_BUFFER,0,n.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const nu={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class ka{constructor(n,l,f,p){this.length=l.length,this.attributes=f,this.itemSize=l.bytesPerElement,this.dynamicDraw=p,this.context=n;const _=n.gl;this.buffer=_.createBuffer(),n.bindVertexBuffer.set(this.buffer),_.bufferData(_.ARRAY_BUFFER,l.arrayBuffer,this.dynamicDraw?_.DYNAMIC_DRAW:_.STATIC_DRAW),this.dynamicDraw||delete l.arrayBuffer}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(n){if(n.length!==this.length)throw new Error(`Length of new data is ${n.length}, which doesn't match current length of ${this.length}`);const l=this.context.gl;this.bind(),l.bufferSubData(l.ARRAY_BUFFER,0,n.arrayBuffer)}enableAttributes(n,l){for(let f=0;f<this.attributes.length;f++){const p=l.attributes[this.attributes[f].name];p!==void 0&&n.enableVertexAttribArray(p)}}setVertexAttribPointers(n,l,f){for(let p=0;p<this.attributes.length;p++){const _=this.attributes[p],S=l.attributes[_.name];S!==void 0&&n.vertexAttribPointer(S,_.components,n[nu[_.type]],!1,this.itemSize,_.offset+this.itemSize*(f||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}class hn{constructor(n){this.gl=n.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(n){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class hs extends hn{getDefault(){return o.be.transparent}set(n){const l=this.current;(n.r!==l.r||n.g!==l.g||n.b!==l.b||n.a!==l.a||this.dirty)&&(this.gl.clearColor(n.r,n.g,n.b,n.a),this.current=n,this.dirty=!1)}}class di extends hn{getDefault(){return 1}set(n){(n!==this.current||this.dirty)&&(this.gl.clearDepth(n),this.current=n,this.dirty=!1)}}class Ua extends hn{getDefault(){return 0}set(n){(n!==this.current||this.dirty)&&(this.gl.clearStencil(n),this.current=n,this.dirty=!1)}}class aa extends hn{getDefault(){return[!0,!0,!0,!0]}set(n){const l=this.current;(n[0]!==l[0]||n[1]!==l[1]||n[2]!==l[2]||n[3]!==l[3]||this.dirty)&&(this.gl.colorMask(n[0],n[1],n[2],n[3]),this.current=n,this.dirty=!1)}}class la extends hn{getDefault(){return!0}set(n){(n!==this.current||this.dirty)&&(this.gl.depthMask(n),this.current=n,this.dirty=!1)}}class pA extends hn{getDefault(){return 255}set(n){(n!==this.current||this.dirty)&&(this.gl.stencilMask(n),this.current=n,this.dirty=!1)}}class Aa extends hn{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(n){const l=this.current;(n.func!==l.func||n.ref!==l.ref||n.mask!==l.mask||this.dirty)&&(this.gl.stencilFunc(n.func,n.ref,n.mask),this.current=n,this.dirty=!1)}}class jn extends hn{getDefault(){const n=this.gl;return[n.KEEP,n.KEEP,n.KEEP]}set(n){const l=this.current;(n[0]!==l[0]||n[1]!==l[1]||n[2]!==l[2]||this.dirty)&&(this.gl.stencilOp(n[0],n[1],n[2]),this.current=n,this.dirty=!1)}}class mA extends hn{getDefault(){return!1}set(n){if(n===this.current&&!this.dirty)return;const l=this.gl;n?l.enable(l.STENCIL_TEST):l.disable(l.STENCIL_TEST),this.current=n,this.dirty=!1}}class Os extends hn{getDefault(){return[0,1]}set(n){const l=this.current;(n[0]!==l[0]||n[1]!==l[1]||this.dirty)&&(this.gl.depthRange(n[0],n[1]),this.current=n,this.dirty=!1)}}class ko extends hn{getDefault(){return!1}set(n){if(n===this.current&&!this.dirty)return;const l=this.gl;n?l.enable(l.DEPTH_TEST):l.disable(l.DEPTH_TEST),this.current=n,this.dirty=!1}}class nc extends hn{getDefault(){return this.gl.LESS}set(n){(n!==this.current||this.dirty)&&(this.gl.depthFunc(n),this.current=n,this.dirty=!1)}}class Ku extends hn{getDefault(){return!1}set(n){if(n===this.current&&!this.dirty)return;const l=this.gl;n?l.enable(l.BLEND):l.disable(l.BLEND),this.current=n,this.dirty=!1}}class ic extends hn{getDefault(){const n=this.gl;return[n.ONE,n.ZERO]}set(n){const l=this.current;(n[0]!==l[0]||n[1]!==l[1]||this.dirty)&&(this.gl.blendFunc(n[0],n[1]),this.current=n,this.dirty=!1)}}class gA extends hn{getDefault(){return o.be.transparent}set(n){const l=this.current;(n.r!==l.r||n.g!==l.g||n.b!==l.b||n.a!==l.a||this.dirty)&&(this.gl.blendColor(n.r,n.g,n.b,n.a),this.current=n,this.dirty=!1)}}class Ql extends hn{getDefault(){return this.gl.FUNC_ADD}set(n){(n!==this.current||this.dirty)&&(this.gl.blendEquation(n),this.current=n,this.dirty=!1)}}class ca extends hn{getDefault(){return!1}set(n){if(n===this.current&&!this.dirty)return;const l=this.gl;n?l.enable(l.CULL_FACE):l.disable(l.CULL_FACE),this.current=n,this.dirty=!1}}class Ra extends hn{getDefault(){return this.gl.BACK}set(n){(n!==this.current||this.dirty)&&(this.gl.cullFace(n),this.current=n,this.dirty=!1)}}class ol extends hn{getDefault(){return this.gl.CCW}set(n){(n!==this.current||this.dirty)&&(this.gl.frontFace(n),this.current=n,this.dirty=!1)}}class al extends hn{getDefault(){return null}set(n){(n!==this.current||this.dirty)&&(this.gl.useProgram(n),this.current=n,this.dirty=!1)}}class ro extends hn{getDefault(){return this.gl.TEXTURE0}set(n){(n!==this.current||this.dirty)&&(this.gl.activeTexture(n),this.current=n,this.dirty=!1)}}class ll extends hn{getDefault(){const n=this.gl;return[0,0,n.drawingBufferWidth,n.drawingBufferHeight]}set(n){const l=this.current;(n[0]!==l[0]||n[1]!==l[1]||n[2]!==l[2]||n[3]!==l[3]||this.dirty)&&(this.gl.viewport(n[0],n[1],n[2],n[3]),this.current=n,this.dirty=!1)}}class ds extends hn{getDefault(){return null}set(n){if(n===this.current&&!this.dirty)return;const l=this.gl;l.bindFramebuffer(l.FRAMEBUFFER,n),this.current=n,this.dirty=!1}}class fi extends hn{getDefault(){return null}set(n){if(n===this.current&&!this.dirty)return;const l=this.gl;l.bindRenderbuffer(l.RENDERBUFFER,n),this.current=n,this.dirty=!1}}class Vn extends hn{getDefault(){return null}set(n){if(n===this.current&&!this.dirty)return;const l=this.gl;l.bindTexture(l.TEXTURE_2D,n),this.current=n,this.dirty=!1}}class Kn extends hn{getDefault(){return null}set(n){if(n===this.current&&!this.dirty)return;const l=this.gl;l.bindBuffer(l.ARRAY_BUFFER,n),this.current=n,this.dirty=!1}}class pi extends hn{getDefault(){return null}set(n){const l=this.gl;l.bindBuffer(l.ELEMENT_ARRAY_BUFFER,n),this.current=n,this.dirty=!1}}class Jn extends hn{getDefault(){return null}set(n){var l;if(n===this.current&&!this.dirty)return;const f=this.gl;Ii(f)?f.bindVertexArray(n):(l=f.getExtension("OES_vertex_array_object"))===null||l===void 0||l.bindVertexArrayOES(n),this.current=n,this.dirty=!1}}class Uo extends hn{getDefault(){return 4}set(n){if(n===this.current&&!this.dirty)return;const l=this.gl;l.pixelStorei(l.UNPACK_ALIGNMENT,n),this.current=n,this.dirty=!1}}class Ol extends hn{getDefault(){return!1}set(n){if(n===this.current&&!this.dirty)return;const l=this.gl;l.pixelStorei(l.UNPACK_PREMULTIPLY_ALPHA_WEBGL,n),this.current=n,this.dirty=!1}}class Na extends hn{getDefault(){return!1}set(n){if(n===this.current&&!this.dirty)return;const l=this.gl;l.pixelStorei(l.UNPACK_FLIP_Y_WEBGL,n),this.current=n,this.dirty=!1}}class Al extends hn{constructor(n,l){super(n),this.context=n,this.parent=l}getDefault(){return null}}class Gu extends Al{setDirty(){this.dirty=!0}set(n){if(n===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const l=this.gl;l.framebufferTexture2D(l.FRAMEBUFFER,l.COLOR_ATTACHMENT0,l.TEXTURE_2D,n,0),this.current=n,this.dirty=!1}}class cl extends Al{set(n){if(n===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const l=this.gl;l.framebufferRenderbuffer(l.FRAMEBUFFER,l.DEPTH_ATTACHMENT,l.RENDERBUFFER,n),this.current=n,this.dirty=!1}}class is extends Al{set(n){if(n===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const l=this.gl;l.framebufferRenderbuffer(l.FRAMEBUFFER,l.DEPTH_STENCIL_ATTACHMENT,l.RENDERBUFFER,n),this.current=n,this.dirty=!1}}const no="Framebuffer is not complete";class sc{constructor(n,l,f,p,_){this.context=n,this.width=l,this.height=f;const S=n.gl,P=this.framebuffer=S.createFramebuffer();if(this.colorAttachment=new Gu(n,P),p)this.depthAttachment=_?new is(n,P):new cl(n,P);else if(_)throw new Error("Stencil cannot be set without depth");if(S.checkFramebufferStatus(S.FRAMEBUFFER)!==S.FRAMEBUFFER_COMPLETE)throw new Error(no)}destroy(){const n=this.context.gl,l=this.colorAttachment.get();if(l&&n.deleteTexture(l),this.depthAttachment){const f=this.depthAttachment.get();f&&n.deleteRenderbuffer(f)}n.deleteFramebuffer(this.framebuffer)}}class sn{constructor(n){var l,f;if(this.gl=n,this.clearColor=new hs(this),this.clearDepth=new di(this),this.clearStencil=new Ua(this),this.colorMask=new aa(this),this.depthMask=new la(this),this.stencilMask=new pA(this),this.stencilFunc=new Aa(this),this.stencilOp=new jn(this),this.stencilTest=new mA(this),this.depthRange=new Os(this),this.depthTest=new ko(this),this.depthFunc=new nc(this),this.blend=new Ku(this),this.blendFunc=new ic(this),this.blendColor=new gA(this),this.blendEquation=new Ql(this),this.cullFace=new ca(this),this.cullFaceSide=new Ra(this),this.frontFace=new ol(this),this.program=new al(this),this.activeTexture=new ro(this),this.viewport=new ll(this),this.bindFramebuffer=new ds(this),this.bindRenderbuffer=new fi(this),this.bindTexture=new Vn(this),this.bindVertexBuffer=new Kn(this),this.bindElementBuffer=new pi(this),this.bindVertexArray=new Jn(this),this.pixelStoreUnpack=new Uo(this),this.pixelStoreUnpackPremultiplyAlpha=new Ol(this),this.pixelStoreUnpackFlipY=new Na(this),this.extTextureFilterAnisotropic=n.getExtension("EXT_texture_filter_anisotropic")||n.getExtension("MOZ_EXT_texture_filter_anisotropic")||n.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=n.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.maxTextureSize=n.getParameter(n.MAX_TEXTURE_SIZE),Ii(n)){this.HALF_FLOAT=n.HALF_FLOAT;const p=n.getExtension("EXT_color_buffer_half_float");this.RGBA16F=(l=n.RGBA16F)!==null&&l!==void 0?l:p==null?void 0:p.RGBA16F_EXT,this.RGB16F=(f=n.RGB16F)!==null&&f!==void 0?f:p==null?void 0:p.RGB16F_EXT,n.getExtension("EXT_color_buffer_float")}else{n.getExtension("EXT_color_buffer_half_float"),n.getExtension("OES_texture_half_float_linear");const p=n.getExtension("OES_texture_half_float");this.HALF_FLOAT=p==null?void 0:p.HALF_FLOAT_OES}}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.bindVertexArray.dirty=!0,this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(n,l){return new ru(this,n,l)}createVertexBuffer(n,l,f){return new ka(this,n,l,f)}createRenderbuffer(n,l,f){const p=this.gl,_=p.createRenderbuffer();return this.bindRenderbuffer.set(_),p.renderbufferStorage(p.RENDERBUFFER,n,l,f),this.bindRenderbuffer.set(null),_}createFramebuffer(n,l,f,p){return new sc(this,n,l,f,p)}clear({color:n,depth:l,stencil:f}){const p=this.gl;let _=0;n&&(_|=p.COLOR_BUFFER_BIT,this.clearColor.set(n),this.colorMask.set([!0,!0,!0,!0])),l!==void 0&&(_|=p.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(l),this.depthMask.set(!0)),f!==void 0&&(_|=p.STENCIL_BUFFER_BIT,this.clearStencil.set(f),this.stencilMask.set(255)),p.clear(_)}setCullFace(n){n.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(n.mode),this.frontFace.set(n.frontFace))}setDepthMode(n){n.func!==this.gl.ALWAYS||n.mask?(this.depthTest.set(!0),this.depthFunc.set(n.func),this.depthMask.set(n.mask),this.depthRange.set(n.range)):this.depthTest.set(!1)}setStencilMode(n){n.test.func!==this.gl.ALWAYS||n.mask?(this.stencilTest.set(!0),this.stencilMask.set(n.mask),this.stencilOp.set([n.fail,n.depthFail,n.pass]),this.stencilFunc.set({func:n.test.func,ref:n.ref,mask:n.test.mask})):this.stencilTest.set(!1)}setColorMode(n){o.bG(n.blendFunction,An.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(n.blendFunction),this.blendColor.set(n.blendColor)),this.colorMask.set(n.mask)}createVertexArray(){var n;return Ii(this.gl)?this.gl.createVertexArray():(n=this.gl.getExtension("OES_vertex_array_object"))===null||n===void 0?void 0:n.createVertexArrayOES()}deleteVertexArray(n){var l;return Ii(this.gl)?this.gl.deleteVertexArray(n):(l=this.gl.getExtension("OES_vertex_array_object"))===null||l===void 0?void 0:l.deleteVertexArrayOES(n)}unbindVAO(){this.bindVertexArray.set(null)}}let zl;function iu(v,n,l,f,p){const _=v.context,S=v.transform,P=_.gl,M=v.useProgram("collisionBox"),z=[];let K=0,Z=0;for(let Fe=0;Fe<f.length;Fe++){const De=f[Fe],Ve=n.getTile(De).getBucket(l);if(!Ve)continue;const Oe=p?Ve.textCollisionBox:Ve.iconCollisionBox,We=Ve.collisionCircleArray;We.length>0&&(z.push({circleArray:We,circleOffset:Z,coord:De}),K+=We.length/4,Z=K),Oe&&M.draw(_,P.LINES,Zr.disabled,Tr.disabled,v.colorModeForRenderPass(),Gr.disabled,ii(v.transform),v.style.map.terrain&&v.style.map.terrain.getTerrainData(De),S.getProjectionData({overscaledTileID:De,applyGlobeMatrix:!0,applyTerrainMatrix:!0}),l.id,Oe.layoutVertexBuffer,Oe.indexBuffer,Oe.segments,null,v.transform.zoom,null,null,Oe.collisionVertexBuffer)}if(!p||!z.length)return;const $=v.useProgram("collisionCircle"),Y=new o.b_;Y.resize(4*K),Y._trim();let he=0;for(const Fe of z)for(let De=0;De<Fe.circleArray.length/4;De++){const Ve=4*De,Oe=Fe.circleArray[Ve+0],We=Fe.circleArray[Ve+1],Je=Fe.circleArray[Ve+2],ze=Fe.circleArray[Ve+3];Y.emplace(he++,Oe,We,Je,ze,0),Y.emplace(he++,Oe,We,Je,ze,1),Y.emplace(he++,Oe,We,Je,ze,2),Y.emplace(he++,Oe,We,Je,ze,3)}(!zl||zl.length<2*K)&&(zl=function(Fe){const De=2*Fe,Ve=new o.c0;Ve.resize(De),Ve._trim();for(let Oe=0;Oe<De;Oe++){const We=6*Oe;Ve.uint16[We+0]=4*Oe+0,Ve.uint16[We+1]=4*Oe+1,Ve.uint16[We+2]=4*Oe+2,Ve.uint16[We+3]=4*Oe+2,Ve.uint16[We+4]=4*Oe+3,Ve.uint16[We+5]=4*Oe+0}return Ve}(K));const Ie=_.createIndexBuffer(zl,!0),Ee=_.createVertexBuffer(Y,o.b$.members,!0);for(const Fe of z){const De=Ri(v.transform);$.draw(_,P.TRIANGLES,Zr.disabled,Tr.disabled,v.colorModeForRenderPass(),Gr.disabled,De,v.style.map.terrain&&v.style.map.terrain.getTerrainData(Fe.coord),null,l.id,Ee,Ie,o.aL.simpleSegment(0,2*Fe.circleOffset,Fe.circleArray.length,Fe.circleArray.length/2),null,v.transform.zoom,null,null,null)}Ee.destroy(),Ie.destroy()}const su=o.af(new Float32Array(16));function yA(v,n,l,f,p,_){const{horizontalAlign:S,verticalAlign:P}=o.aG(v);return new o.P((-(S-.5)*n/p+f[0])*_,(-(P-.5)*l/p+f[1])*_)}function vf(v,n,l,f,p,_){const S=n.tileAnchorPoint.add(new o.P(n.translation[0],n.translation[1]));if(n.pitchWithMap){let P=f.mult(_);l||(P=P.rotate(-p));const M=S.add(P);return Nr(M.x,M.y,n.pitchedLabelPlaneMatrix,n.getElevation).point}if(l){const P=Jt(n.tileAnchorPoint.x+1,n.tileAnchorPoint.y,n).point.sub(v),M=Math.atan(P.y/P.x)+(P.x<0?Math.PI:0);return v.add(f.rotate(M))}return v.add(f)}function dd(v,n,l,f,p,_,S,P,M,z,K,Z){const $=v.text.placedSymbolArray,Y=v.text.dynamicLayoutVertexArray,he=v.icon.dynamicLayoutVertexArray,Ie={};Y.clear();for(let Ee=0;Ee<$.length;Ee++){const Fe=$.get(Ee),De=Fe.hidden||!Fe.crossTileID||v.allowVerticalPlacement&&!Fe.placedOrientation?null:f[Fe.crossTileID];if(De){const Ve=new o.P(Fe.anchorX,Fe.anchorY),Oe={getElevation:Z,width:p.width,height:p.height,pitchedLabelPlaneMatrix:_,pitchWithMap:l,transform:p,tileAnchorPoint:Ve,translation:z,unwrappedTileID:K},We=l?Vr(Ve.x,Ve.y,Oe):Jt(Ve.x,Ve.y,Oe),Je=_r(p.cameraToCenterDistance,We.signedDistanceFromCamera);let ze=o.ao(v.textSizeData,P,Fe)*Je/o.aA;l&&(ze*=v.tilePixelRatio/S);const{width:ht,height:St,anchor:gt,textOffset:_t,textBoxScale:xt}=De,ir=yA(gt,ht,St,_t,xt,ze),rr=p.getPitchedTextCorrection(Ve.x+z[0],Ve.y+z[1],K),Qt=vf(We.point,Oe,n,ir,-p.bearingInRadians,rr),mr=v.allowVerticalPlacement&&Fe.placedOrientation===o.an.vertical?Math.PI/2:0;for(let rn=0;rn<Fe.numGlyphs;rn++)o.au(Y,Qt,mr);M&&Fe.associatedIconIndex>=0&&(Ie[Fe.associatedIconIndex]={shiftedAnchor:Qt,angle:mr})}else Xs(Fe.numGlyphs,Y)}if(M){he.clear();const Ee=v.icon.placedSymbolArray;for(let Fe=0;Fe<Ee.length;Fe++){const De=Ee.get(Fe);if(De.hidden)Xs(De.numGlyphs,he);else{const Ve=Ie[Fe];if(Ve)for(let Oe=0;Oe<De.numGlyphs;Oe++)o.au(he,Ve.shiftedAnchor,Ve.angle);else Xs(De.numGlyphs,he)}}v.icon.dynamicLayoutVertexBuffer.updateData(he)}v.text.dynamicLayoutVertexBuffer.updateData(Y)}function $u(v,n,l){return l.iconsInText&&n?"symbolTextAndIcon":v?"symbolSDF":"symbolIcon"}function ou(v,n,l,f,p,_,S,P,M,z,K,Z,$){const Y=v.context,he=Y.gl,Ie=v.transform,Ee=P==="map",Fe=M==="map",De=P!=="viewport"&&l.layout.get("symbol-placement")!=="point",Ve=Ee&&!Fe&&!De,Oe=!l.layout.get("symbol-sort-key").isConstant();let We=!1;const Je=v.getDepthModeForSublayer(0,Zr.ReadOnly),ze=l._unevaluatedLayout.hasValue("text-variable-anchor")||l._unevaluatedLayout.hasValue("text-variable-anchor-offset"),ht=[],St=Ie.getCircleRadiusCorrection();for(const gt of f){const _t=n.getTile(gt),xt=_t.getBucket(l);if(!xt)continue;const ir=p?xt.text:xt.icon;if(!ir||!ir.segments.get().length||!ir.hasVisibleVertices)continue;const rr=ir.programConfigurations.get(l.id),Qt=p||xt.sdfIcons,mr=p?xt.textSizeData:xt.iconSizeData,rn=Fe||Ie.pitch!==0,mn=v.useProgram($u(Qt,p,xt),rr),Zn=o.am(mr,Ie.zoom),En=v.style.map.terrain&&v.style.map.terrain.getTerrainData(gt);let In,xn,_n,Tn,qi=[0,0],fn=null;if(p)xn=_t.glyphAtlasTexture,_n=he.LINEAR,In=_t.glyphAtlasTexture.size,xt.iconsInText&&(qi=_t.imageAtlasTexture.size,fn=_t.imageAtlasTexture,Tn=rn||v.options.rotating||v.options.zooming||mr.kind==="composite"||mr.kind==="camera"?he.LINEAR:he.NEAREST);else{const Ni=l.layout.get("icon-size").constantOr(0)!==1||xt.iconsNeedLinear;xn=_t.imageAtlasTexture,_n=Qt||v.options.rotating||v.options.zooming||Ni||rn?he.LINEAR:he.NEAREST,In=_t.imageAtlasTexture.size}const ss=o.aB(_t,1,v.transform.zoom),Zi=qt(Ee,v.transform,ss),za=o.L();o.ap(za,Zi);const pc=Jr(Fe,Ee,v.transform,ss),mc=o.aC(Ie,_t,_,S),jl=Ie.getProjectionData({overscaledTileID:gt,applyGlobeMatrix:!$,applyTerrainMatrix:!0}),yd=ze&&xt.hasTextData(),vd=l.layout.get("icon-text-fit")!=="none"&&yd&&xt.hasIconData();if(De){const Ni=v.style.map.terrain?(_o,ps)=>v.style.map.terrain.getElevation(gt,_o,ps):null,ai=l.layout.get("text-rotation-alignment")==="map";Ln(xt,v,p,Zi,za,Fe,z,ai,gt.toUnwrapped(),Ie.width,Ie.height,mc,Ni)}const nh=p&&ze||vd,Ho=De||nh?su:Fe?Zi:v.transform.clipSpaceToPixelsMatrix,fl=Qt&&l.paint.get(p?"text-halo-width":"icon-halo-width").constantOr(1)!==0;let gc;gc=Qt?xt.iconsInText?hd(mr.kind,Zn,Ve,Fe,De,nh,v,Ho,pc,mc,In,qi,St):Gi(mr.kind,Zn,Ve,Fe,De,nh,v,Ho,pc,mc,p,In,0,St):dA(mr.kind,Zn,Ve,Fe,De,nh,v,Ho,pc,mc,p,In,St);const fu={program:mn,buffers:ir,uniformValues:gc,projectionData:jl,atlasTexture:xn,atlasTextureIcon:fn,atlasInterpolation:_n,atlasInterpolationIcon:Tn,isSDF:Qt,hasHalo:fl};if(Oe&&xt.canOverlap){We=!0;const Ni=ir.segments.get();for(const ai of Ni)ht.push({segments:new o.aL([ai]),sortKey:ai.sortKey,state:fu,terrainData:En})}else ht.push({segments:ir.segments,sortKey:0,state:fu,terrainData:En})}We&&ht.sort((gt,_t)=>gt.sortKey-_t.sortKey);for(const gt of ht){const _t=gt.state;if(Y.activeTexture.set(he.TEXTURE0),_t.atlasTexture.bind(_t.atlasInterpolation,he.CLAMP_TO_EDGE),_t.atlasTextureIcon&&(Y.activeTexture.set(he.TEXTURE1),_t.atlasTextureIcon&&_t.atlasTextureIcon.bind(_t.atlasInterpolationIcon,he.CLAMP_TO_EDGE)),_t.isSDF){const xt=_t.uniformValues;_t.hasHalo&&(xt.u_is_halo=1,oc(_t.buffers,gt.segments,l,v,_t.program,Je,K,Z,xt,_t.projectionData,gt.terrainData)),xt.u_is_halo=0}oc(_t.buffers,gt.segments,l,v,_t.program,Je,K,Z,_t.uniformValues,_t.projectionData,gt.terrainData)}}function oc(v,n,l,f,p,_,S,P,M,z,K){const Z=f.context;p.draw(Z,Z.gl.TRIANGLES,_,S,P,Gr.backCCW,M,K,z,l.id,v.layoutVertexBuffer,v.indexBuffer,n,l.paint,f.transform.zoom,v.programConfigurations.get(l.id),v.dynamicLayoutVertexBuffer,v.opacityVertexBuffer)}function qu(v,n,l,f,p){const _=v.context,S=_.gl,P=Tr.disabled,M=new An([S.ONE,S.ONE],o.be.transparent,[!0,!0,!0,!0]),z=n.getBucket(l);if(!z)return;const K=f.key;let Z=l.heatmapFbos.get(K);Z||(Z=ac(_,n.tileSize,n.tileSize),l.heatmapFbos.set(K,Z)),_.bindFramebuffer.set(Z.framebuffer),_.viewport.set([0,0,n.tileSize,n.tileSize]),_.clear({color:o.be.transparent});const $=z.programConfigurations.get(l.id),Y=v.useProgram("heatmap",$,!p),he=v.transform.getProjectionData({overscaledTileID:n.tileID,applyGlobeMatrix:!0,applyTerrainMatrix:!0}),Ie=v.style.map.terrain.getTerrainData(f);Y.draw(_,S.TRIANGLES,Zr.disabled,P,M,Gr.disabled,Ds(n,v.transform.zoom,l.paint.get("heatmap-intensity"),1),Ie,he,l.id,z.layoutVertexBuffer,z.indexBuffer,z.segments,l.paint,v.transform.zoom,$)}function Zu(v,n,l,f,p){const _=v.context,S=_.gl,P=v.transform;_.setColorMode(v.colorModeForRenderPass());const M=Wu(_,n),z=l.key,K=n.heatmapFbos.get(z);if(!K)return;_.activeTexture.set(S.TEXTURE0),S.bindTexture(S.TEXTURE_2D,K.colorAttachment.get()),_.activeTexture.set(S.TEXTURE1),M.bind(S.LINEAR,S.CLAMP_TO_EDGE);const Z=P.getProjectionData({overscaledTileID:l,applyTerrainMatrix:p,applyGlobeMatrix:!f});v.useProgram("heatmapTexture").draw(_,S.TRIANGLES,Zr.disabled,Tr.disabled,v.colorModeForRenderPass(),Gr.disabled,to(v,n,0,1),null,Z,n.id,v.rasterBoundsBuffer,v.quadTriangleIndexBuffer,v.rasterBoundsSegments,n.paint,P.zoom),K.destroy(),n.heatmapFbos.delete(z)}function ac(v,n,l){var f,p;const _=v.gl,S=_.createTexture();_.bindTexture(_.TEXTURE_2D,S),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_WRAP_S,_.CLAMP_TO_EDGE),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_WRAP_T,_.CLAMP_TO_EDGE),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_MIN_FILTER,_.LINEAR),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_MAG_FILTER,_.LINEAR);const P=(f=v.HALF_FLOAT)!==null&&f!==void 0?f:_.UNSIGNED_BYTE,M=(p=v.RGBA16F)!==null&&p!==void 0?p:_.RGBA;_.texImage2D(_.TEXTURE_2D,0,M,n,l,0,_.RGBA,P,null);const z=v.createFramebuffer(n,l,!1,!1);return z.colorAttachment.set(S),z}function Wu(v,n){return n.colorRampTexture||(n.colorRampTexture=new o.T(v,n.colorRamp,v.gl.RGBA)),n.colorRampTexture}function fd(v,n,l,f,p){if(!l||!f||!f.imageAtlas)return;const _=f.imageAtlas.patternPositions;let S=_[l.to.toString()],P=_[l.from.toString()];if(!S&&P&&(S=P),!P&&S&&(P=S),!S||!P){const M=p.getPaintProperty(n);S=_[M],P=_[M]}S&&P&&v.setConstantPatternPositions(S,P)}function au(v,n,l,f,p,_,S,P){const M=v.context.gl,z="fill-pattern",K=l.paint.get(z),Z=K&&K.constantOr(1),$=l.getCrossfadeParameters();let Y,he,Ie,Ee,Fe;const De=v.transform,Ve=l.paint.get("fill-translate"),Oe=l.paint.get("fill-translate-anchor");S?(he=Z&&!l.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",Y=M.LINES):(he=Z?"fillPattern":"fill",Y=M.TRIANGLES);const We=K.constantOr(null);for(const Je of f){const ze=n.getTile(Je);if(Z&&!ze.patternsLoaded())continue;const ht=ze.getBucket(l);if(!ht)continue;const St=ht.programConfigurations.get(l.id),gt=v.useProgram(he,St),_t=v.style.map.terrain&&v.style.map.terrain.getTerrainData(Je);Z&&(v.context.activeTexture.set(M.TEXTURE0),ze.imageAtlasTexture.bind(M.LINEAR,M.CLAMP_TO_EDGE),St.updatePaintBuffers($)),fd(St,z,We,ze,l);const xt=De.getProjectionData({overscaledTileID:Je,applyGlobeMatrix:!P,applyTerrainMatrix:!0}),ir=o.aC(De,ze,Ve,Oe);if(S){Ee=ht.indexBuffer2,Fe=ht.segments2;const Qt=[M.drawingBufferWidth,M.drawingBufferHeight];Ie=he==="fillOutlinePattern"&&Z?hi(v,$,ze,Qt,ir):nn(Qt,ir)}else Ee=ht.indexBuffer,Fe=ht.segments,Ie=Z?Wr(v,$,ze,ir):{u_fill_translate:ir};const rr=v.stencilModeForClipping(Je);gt.draw(v.context,Y,p,rr,_,Gr.backCCW,Ie,_t,xt,l.id,ht.layoutVertexBuffer,Ee,Fe,l.paint,v.transform.zoom,St)}}function lc(v,n,l,f,p,_,S,P){const M=v.context,z=M.gl,K="fill-extrusion-pattern",Z=l.paint.get(K),$=Z.constantOr(1),Y=l.getCrossfadeParameters(),he=l.paint.get("fill-extrusion-opacity"),Ie=Z.constantOr(null),Ee=v.transform;for(const Fe of f){const De=n.getTile(Fe),Ve=De.getBucket(l);if(!Ve)continue;const Oe=v.style.map.terrain&&v.style.map.terrain.getTerrainData(Fe),We=Ve.programConfigurations.get(l.id),Je=v.useProgram($?"fillExtrusionPattern":"fillExtrusion",We);$&&(v.context.activeTexture.set(z.TEXTURE0),De.imageAtlasTexture.bind(z.LINEAR,z.CLAMP_TO_EDGE),We.updatePaintBuffers(Y));const ze=Ee.getProjectionData({overscaledTileID:Fe,applyGlobeMatrix:!P,applyTerrainMatrix:!0});fd(We,K,Ie,De,l);const ht=o.aC(Ee,De,l.paint.get("fill-extrusion-translate"),l.paint.get("fill-extrusion-translate-anchor")),St=l.paint.get("fill-extrusion-vertical-gradient"),gt=$?en(v,St,he,ht,Fe,Y,De):Mr(v,St,he,ht);Je.draw(M,M.gl.TRIANGLES,p,_,S,Gr.backCCW,gt,Oe,ze,l.id,Ve.layoutVertexBuffer,Ve.indexBuffer,Ve.segments,l.paint,v.transform.zoom,We,v.style.map.terrain&&Ve.centroidVertexBuffer)}}function Ac(v,n,l,f,p,_,S,P,M){var z;const K=v.style.projection,Z=v.context,$=v.transform,Y=Z.gl,he=[`#define NUM_ILLUMINATION_SOURCES ${l.paint.get("hillshade-highlight-color").values.length}`],Ie=v.useProgram("hillshade",null,!1,he),Ee=!v.options.moving;for(const Fe of f){const De=n.getTile(Fe),Ve=De.fbo;if(!Ve)continue;const Oe=K.getMeshFromTileID(Z,Fe.canonical,P,!0,"raster"),We=(z=v.style.map.terrain)===null||z===void 0?void 0:z.getTerrainData(Fe);Z.activeTexture.set(Y.TEXTURE0),Y.bindTexture(Y.TEXTURE_2D,Ve.colorAttachment.get());const Je=$.getProjectionData({overscaledTileID:Fe,aligned:Ee,applyGlobeMatrix:!M,applyTerrainMatrix:!0});Ie.draw(Z,Y.TRIANGLES,_,p[Fe.overscaledZ],S,Gr.backCCW,Qs(v,De,l),We,Je,l.id,Oe.vertexBuffer,Oe.indexBuffer,Oe.segments)}}function vA(v,n,l,f,p,_,S,P,M){var z;const K=v.style.projection,Z=v.context,$=v.transform,Y=Z.gl,he=v.useProgram("colorRelief"),Ie=!v.options.moving;let Ee=!0,Fe=0;for(const De of f){const Ve=n.getTile(De),Oe=Ve.dem;if(Ee){const gt=Y.getParameter(Y.MAX_TEXTURE_SIZE),{elevationTexture:_t,colorTexture:xt}=l.getColorRampTextures(Z,gt,Oe.getUnpackVector());Z.activeTexture.set(Y.TEXTURE1),_t.bind(Y.NEAREST,Y.CLAMP_TO_EDGE),Z.activeTexture.set(Y.TEXTURE4),xt.bind(Y.LINEAR,Y.CLAMP_TO_EDGE),Ee=!1,Fe=_t.size[0]}if(!Oe||!Oe.data)continue;const We=Oe.stride,Je=Oe.getPixels();if(Z.activeTexture.set(Y.TEXTURE0),Z.pixelStoreUnpackPremultiplyAlpha.set(!1),Ve.demTexture=Ve.demTexture||v.getTileTexture(We),Ve.demTexture){const gt=Ve.demTexture;gt.update(Je,{premultiply:!1}),gt.bind(Y.LINEAR,Y.CLAMP_TO_EDGE)}else Ve.demTexture=new o.T(Z,Je,Y.RGBA,{premultiply:!1}),Ve.demTexture.bind(Y.LINEAR,Y.CLAMP_TO_EDGE);const ze=K.getMeshFromTileID(Z,De.canonical,P,!0,"raster"),ht=(z=v.style.map.terrain)===null||z===void 0?void 0:z.getTerrainData(De),St=$.getProjectionData({overscaledTileID:De,aligned:Ie,applyGlobeMatrix:!M,applyTerrainMatrix:!0});he.draw(Z,Y.TRIANGLES,_,p[De.overscaledZ],S,Gr.backCCW,tu(l,Ve.dem,Fe),ht,St,l.id,ze.vertexBuffer,ze.indexBuffer,ze.segments)}}const lu=[new o.P(0,0),new o.P(o.$,0),new o.P(o.$,o.$),new o.P(0,o.$)];function Ro(v,n,l,f,p,_,S,P,M=!1,z=!1){const K=f[f.length-1].overscaledZ,Z=v.context,$=Z.gl,Y=v.useProgram("raster"),he=v.transform,Ie=v.style.projection,Ee=v.colorModeForRenderPass(),Fe=!v.options.moving;for(const De of f){const Ve=v.getDepthModeForSublayer(De.overscaledZ-K,l.paint.get("raster-opacity")===1?Zr.ReadWrite:Zr.ReadOnly,$.LESS),Oe=n.getTile(De);Oe.registerFadeDuration(l.paint.get("raster-fade-duration"));const We=n.findLoadedParent(De,0),Je=n.findLoadedSibling(De),ze=gm(Oe,We||Je||null,n,l,v.transform,v.style.map.terrain);let ht,St;const gt=l.paint.get("raster-resampling")==="nearest"?$.NEAREST:$.LINEAR;Z.activeTexture.set($.TEXTURE0),Oe.texture.bind(gt,$.CLAMP_TO_EDGE,$.LINEAR_MIPMAP_NEAREST),Z.activeTexture.set($.TEXTURE1),We?(We.texture.bind(gt,$.CLAMP_TO_EDGE,$.LINEAR_MIPMAP_NEAREST),ht=Math.pow(2,We.tileID.overscaledZ-Oe.tileID.overscaledZ),St=[Oe.tileID.canonical.x*ht%1,Oe.tileID.canonical.y*ht%1]):Oe.texture.bind(gt,$.CLAMP_TO_EDGE,$.LINEAR_MIPMAP_NEAREST),Oe.texture.useMipmap&&Z.extTextureFilterAnisotropic&&v.transform.pitch>20&&$.texParameterf($.TEXTURE_2D,Z.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,Z.extTextureFilterAnisotropicMax);const _t=v.style.map.terrain&&v.style.map.terrain.getTerrainData(De),xt=he.getProjectionData({overscaledTileID:De,aligned:Fe,applyGlobeMatrix:!z,applyTerrainMatrix:!0}),ir=Mo(St||[0,0],ht||1,ze,l,P),rr=Ie.getMeshFromTileID(Z,De.canonical,_,S,"raster");Y.draw(Z,$.TRIANGLES,Ve,p?p[De.overscaledZ]:Tr.disabled,Ee,M?Gr.frontCCW:Gr.backCCW,ir,_t,xt,l.id,rr.vertexBuffer,rr.indexBuffer,rr.segments)}}function gm(v,n,l,f,p,_){const S=f.paint.get("raster-fade-duration");if(!_&&S>0){const P=F.now(),M=(P-v.timeAdded)/S,z=n?(P-n.timeAdded)/S:-1,K=l.getSource(),Z=It(p,{tileSize:K.tileSize,roundZoom:K.roundZoom}),$=!n||Math.abs(n.tileID.overscaledZ-Z)>Math.abs(v.tileID.overscaledZ-Z),Y=$&&v.refreshedUponExpiration?1:o.ag($?M:1-z,0,1);return v.refreshedUponExpiration&&M>=1&&(v.refreshedUponExpiration=!1),n?{opacity:1,mix:1-Y}:{opacity:Y,mix:0}}return{opacity:1,mix:0}}const _f=new o.be(1,0,0,1),Au=new o.be(0,1,0,1),pd=new o.be(0,0,1,1),wf=new o.be(1,0,1,1),xf=new o.be(0,1,1,1);function cu(v,n,l,f){io(v,0,n+l/2,v.transform.width,l,f)}function ua(v,n,l,f){io(v,n-l/2,0,l,v.transform.height,f)}function io(v,n,l,f,p,_){const S=v.context,P=S.gl;P.enable(P.SCISSOR_TEST),P.scissor(n*v.pixelRatio,l*v.pixelRatio,f*v.pixelRatio,p*v.pixelRatio),S.clear({color:_}),P.disable(P.SCISSOR_TEST)}function Da(v,n,l){const f=v.context,p=f.gl,_=v.useProgram("debug"),S=Zr.disabled,P=Tr.disabled,M=v.colorModeForRenderPass(),z="$debug",K=v.style.map.terrain&&v.style.map.terrain.getTerrainData(l);f.activeTexture.set(p.TEXTURE0);const Z=n.getTileByID(l.key).latestRawTileData,$=Math.floor((Z&&Z.byteLength||0)/1024),Y=n.getTile(l).tileSize,he=512/Math.min(Y,512)*(l.overscaledZ/v.transform.zoom)*.5;let Ie=l.canonical.toString();l.overscaledZ!==l.canonical.z&&(Ie+=` => ${l.overscaledZ}`),function(Fe,De){Fe.initDebugOverlayCanvas();const Ve=Fe.debugOverlayCanvas,Oe=Fe.context.gl,We=Fe.debugOverlayCanvas.getContext("2d");We.clearRect(0,0,Ve.width,Ve.height),We.shadowColor="white",We.shadowBlur=2,We.lineWidth=1.5,We.strokeStyle="white",We.textBaseline="top",We.font="bold 36px Open Sans, sans-serif",We.fillText(De,5,5),We.strokeText(De,5,5),Fe.debugOverlayTexture.update(Ve),Fe.debugOverlayTexture.bind(Oe.LINEAR,Oe.CLAMP_TO_EDGE)}(v,`${Ie} ${$}kB`);const Ee=v.transform.getProjectionData({overscaledTileID:l,applyGlobeMatrix:!0,applyTerrainMatrix:!0});_.draw(f,p.TRIANGLES,S,P,An.alphaBlended,Gr.disabled,Vi(o.be.transparent,he),null,Ee,z,v.debugBuffer,v.quadTriangleIndexBuffer,v.debugSegments),_.draw(f,p.LINE_STRIP,S,P,M,Gr.disabled,Vi(o.be.red),K,Ee,z,v.debugBuffer,v.tileBorderIndexBuffer,v.debugSegments)}function mi(v,n,l,f){const{isRenderingGlobe:p}=f,_=v.context,S=_.gl,P=v.transform,M=v.colorModeForRenderPass(),z=v.getDepthModeFor3D(),K=v.useProgram("terrain");_.bindFramebuffer.set(null),_.viewport.set([0,0,v.width,v.height]);for(const Z of l){const $=n.getTerrainMesh(Z.tileID),Y=v.renderToTexture.getTexture(Z),he=n.getTerrainData(Z.tileID);_.activeTexture.set(S.TEXTURE0),S.bindTexture(S.TEXTURE_2D,Y.texture);const Ie=n.getMeshFrameDelta(P.zoom),Ee=P.calculateFogMatrix(Z.tileID.toUnwrapped()),Fe=at(Ie,Ee,v.style.sky,P.pitch,p),De=P.getProjectionData({overscaledTileID:Z.tileID,applyTerrainMatrix:!1,applyGlobeMatrix:!0});K.draw(_,S.TRIANGLES,z,Tr.disabled,M,Gr.backCCW,Fe,he,De,"terrain",$.vertexBuffer,$.indexBuffer,$.segments)}}function ul(v,n){if(!n.mesh){const l=new o.aK;l.emplaceBack(-1,-1),l.emplaceBack(1,-1),l.emplaceBack(1,1),l.emplaceBack(-1,1);const f=new o.aM;f.emplaceBack(0,1,2),f.emplaceBack(0,2,3),n.mesh=new ia(v.createVertexBuffer(l,sa.members),v.createIndexBuffer(f),o.aL.simpleSegment(0,0,l.length,f.length))}return n.mesh}class $i{constructor(n,l){this.context=new sn(n),this.transform=l,this._tileTextures={},this.terrainFacilitator={dirty:!0,matrix:o.af(new Float64Array(16)),renderTime:0},this.setup(),this.numSublayers=mt.maxUnderzooming+mt.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new aA}resize(n,l,f){if(this.width=Math.floor(n*f),this.height=Math.floor(l*f),this.pixelRatio=f,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const p of this.style._order)this.style._layers[p].resize()}setup(){const n=this.context,l=new o.aK;l.emplaceBack(0,0),l.emplaceBack(o.$,0),l.emplaceBack(0,o.$),l.emplaceBack(o.$,o.$),this.tileExtentBuffer=n.createVertexBuffer(l,sa.members),this.tileExtentSegments=o.aL.simpleSegment(0,0,4,2);const f=new o.aK;f.emplaceBack(0,0),f.emplaceBack(o.$,0),f.emplaceBack(0,o.$),f.emplaceBack(o.$,o.$),this.debugBuffer=n.createVertexBuffer(f,sa.members),this.debugSegments=o.aL.simpleSegment(0,0,4,5);const p=new o.c5;p.emplaceBack(0,0,0,0),p.emplaceBack(o.$,0,o.$,0),p.emplaceBack(0,o.$,0,o.$),p.emplaceBack(o.$,o.$,o.$,o.$),this.rasterBoundsBuffer=n.createVertexBuffer(p,ce.members),this.rasterBoundsSegments=o.aL.simpleSegment(0,0,4,2);const _=new o.aK;_.emplaceBack(0,0),_.emplaceBack(o.$,0),_.emplaceBack(0,o.$),_.emplaceBack(o.$,o.$),this.rasterBoundsBufferPosOnly=n.createVertexBuffer(_,sa.members),this.rasterBoundsSegmentsPosOnly=o.aL.simpleSegment(0,0,4,5);const S=new o.aK;S.emplaceBack(0,0),S.emplaceBack(1,0),S.emplaceBack(0,1),S.emplaceBack(1,1),this.viewportBuffer=n.createVertexBuffer(S,sa.members),this.viewportSegments=o.aL.simpleSegment(0,0,4,2);const P=new o.c6;P.emplaceBack(0),P.emplaceBack(1),P.emplaceBack(3),P.emplaceBack(2),P.emplaceBack(0),this.tileBorderIndexBuffer=n.createIndexBuffer(P);const M=new o.aM;M.emplaceBack(1,0,2),M.emplaceBack(1,2,3),this.quadTriangleIndexBuffer=n.createIndexBuffer(M);const z=this.context.gl;this.stencilClearMode=new Tr({func:z.ALWAYS,mask:0},0,255,z.ZERO,z.ZERO,z.ZERO),this.tileExtentMesh=new ia(this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}clearStencil(){const n=this.context,l=n.gl;this.nextStencilID=1,this.currentStencilSource=void 0;const f=o.L();o.bX(f,0,this.width,this.height,0,0,1),o.N(f,f,[l.drawingBufferWidth,l.drawingBufferHeight,0]);const p={mainMatrix:f,tileMercatorCoords:[0,0,1,1],clippingPlane:[0,0,0,0],projectionTransition:0,fallbackMatrix:f};this.useProgram("clippingMask",null,!0).draw(n,l.TRIANGLES,Zr.disabled,this.stencilClearMode,An.disabled,Gr.disabled,null,null,p,"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}_renderTileClippingMasks(n,l,f){if(this.currentStencilSource===n.source||!n.isTileClipped()||!l||!l.length)return;this.currentStencilSource=n.source,this.nextStencilID+l.length>256&&this.clearStencil();const p=this.context;p.setColorMode(An.disabled),p.setDepthMode(Zr.disabled);const _={};for(const S of l)_[S.key]=this.nextStencilID++;this._renderTileMasks(_,l,f,!0),this._renderTileMasks(_,l,f,!1),this._tileClippingMaskIDs=_}_renderTileMasks(n,l,f,p){const _=this.context,S=_.gl,P=this.style.projection,M=this.transform,z=this.useProgram("clippingMask");for(const K of l){const Z=n[K.key],$=this.style.map.terrain&&this.style.map.terrain.getTerrainData(K),Y=P.getMeshFromTileID(this.context,K.canonical,p,!0,"stencil"),he=M.getProjectionData({overscaledTileID:K,applyGlobeMatrix:!f,applyTerrainMatrix:!0});z.draw(_,S.TRIANGLES,Zr.disabled,new Tr({func:S.ALWAYS,mask:0},Z,255,S.KEEP,S.KEEP,S.REPLACE),An.disabled,f?Gr.disabled:Gr.backCCW,null,$,he,"$clipping",Y.vertexBuffer,Y.indexBuffer,Y.segments)}}_renderTilesDepthBuffer(){const n=this.context,l=n.gl,f=this.style.projection,p=this.transform,_=this.useProgram("depth"),S=this.getDepthModeFor3D(),P=Ct(p,{tileSize:p.tileSize});for(const M of P){const z=this.style.map.terrain&&this.style.map.terrain.getTerrainData(M),K=f.getMeshFromTileID(this.context,M.canonical,!0,!0,"raster"),Z=p.getProjectionData({overscaledTileID:M,applyGlobeMatrix:!0,applyTerrainMatrix:!0});_.draw(n,l.TRIANGLES,S,Tr.disabled,An.disabled,Gr.backCCW,null,z,Z,"$clipping",K.vertexBuffer,K.indexBuffer,K.segments)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const n=this.nextStencilID++,l=this.context.gl;return new Tr({func:l.NOTEQUAL,mask:255},n,255,l.KEEP,l.KEEP,l.REPLACE)}stencilModeForClipping(n){const l=this.context.gl;return new Tr({func:l.EQUAL,mask:255},this._tileClippingMaskIDs[n.key],0,l.KEEP,l.KEEP,l.REPLACE)}getStencilConfigForOverlapAndUpdateStencilID(n){const l=this.context.gl,f=n.sort((S,P)=>P.overscaledZ-S.overscaledZ),p=f[f.length-1].overscaledZ,_=f[0].overscaledZ-p+1;if(_>1){this.currentStencilSource=void 0,this.nextStencilID+_>256&&this.clearStencil();const S={};for(let P=0;P<_;P++)S[P+p]=new Tr({func:l.GEQUAL,mask:255},P+this.nextStencilID,255,l.KEEP,l.KEEP,l.REPLACE);return this.nextStencilID+=_,[S,f]}return[{[p]:Tr.disabled},f]}stencilConfigForOverlapTwoPass(n){const l=this.context.gl,f=n.sort((S,P)=>P.overscaledZ-S.overscaledZ),p=f[f.length-1].overscaledZ,_=f[0].overscaledZ-p+1;if(this.clearStencil(),_>1){const S={},P={};for(let M=0;M<_;M++)S[M+p]=new Tr({func:l.GREATER,mask:255},_+1+M,255,l.KEEP,l.KEEP,l.REPLACE),P[M+p]=new Tr({func:l.GREATER,mask:255},1+M,255,l.KEEP,l.KEEP,l.REPLACE);return this.nextStencilID=2*_+1,[S,P,f]}return this.nextStencilID=3,[{[p]:new Tr({func:l.GREATER,mask:255},2,255,l.KEEP,l.KEEP,l.REPLACE)},{[p]:new Tr({func:l.GREATER,mask:255},1,255,l.KEEP,l.KEEP,l.REPLACE)},f]}colorModeForRenderPass(){const n=this.context.gl;return this._showOverdrawInspector?new An([n.CONSTANT_COLOR,n.ONE],new o.be(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?An.unblended:An.alphaBlended}getDepthModeForSublayer(n,l,f){if(!this.opaquePassEnabledForLayer())return Zr.disabled;const p=1-((1+this.currentLayer)*this.numSublayers+n)*this.depthEpsilon;return new Zr(f||this.context.gl.LEQUAL,l,[p,p])}getDepthModeFor3D(){return new Zr(this.context.gl.LEQUAL,Zr.ReadWrite,this.depthRangeFor3D)}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(n,l){var f,p;this.style=n,this.options=l,this.lineAtlas=n.lineAtlas,this.imageManager=n.imageManager,this.glyphManager=n.glyphManager,this.symbolFadeChange=n.placement.symbolFadeChange(F.now()),this.imageManager.beginFrame();const _=this.style._order,S=this.style.sourceCaches,P={},M={},z={},K={isRenderingToTexture:!1,isRenderingGlobe:((f=n.projection)===null||f===void 0?void 0:f.transitionState)>0};for(const $ in S){const Y=S[$];Y.used&&Y.prepare(this.context),P[$]=Y.getVisibleCoordinates(!1),M[$]=P[$].slice().reverse(),z[$]=Y.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let $=0;$<_.length;$++)if(this.style._layers[_[$]].is3D()){this.opaquePassCutoff=$;break}this.maybeDrawDepthAndCoords(!1),this.renderToTexture&&(this.renderToTexture.prepareForRender(this.style,this.transform.zoom),this.opaquePassCutoff=0),this.renderPass="offscreen";for(const $ of _){const Y=this.style._layers[$];if(!Y.hasOffscreenPass()||Y.isHidden(this.transform.zoom))continue;const he=M[Y.source];(Y.type==="custom"||he.length)&&this.renderLayer(this,S[Y.source],Y,he,K)}if((p=this.style.projection)===null||p===void 0||p.updateGPUdependent({context:this.context,useProgram:$=>this.useProgram($)}),this.context.viewport.set([0,0,this.width,this.height]),this.context.bindFramebuffer.set(null),this.context.clear({color:l.showOverdrawInspector?o.be.black:o.be.transparent,depth:1}),this.clearStencil(),this.style.sky&&function($,Y){const he=$.context,Ie=he.gl,Ee=((Je,ze,ht)=>{const St=Math.cos(ze.rollInRadians),gt=Math.sin(ze.rollInRadians),_t=me(ze),xt=ze.getProjectionData({overscaledTileID:null,applyGlobeMatrix:!0,applyTerrainMatrix:!0}).projectionTransition;return{u_sky_color:Je.properties.get("sky-color"),u_horizon_color:Je.properties.get("horizon-color"),u_horizon:[(ze.width/2-_t*gt)*ht,(ze.height/2+_t*St)*ht],u_horizon_normal:[-gt,St],u_sky_horizon_blend:Je.properties.get("sky-horizon-blend")*ze.height/2*ht,u_sky_blend:xt}})(Y,$.style.map.transform,$.pixelRatio),Fe=new Zr(Ie.LEQUAL,Zr.ReadWrite,[0,1]),De=Tr.disabled,Ve=$.colorModeForRenderPass(),Oe=$.useProgram("sky"),We=ul(he,Y);Oe.draw(he,Ie.TRIANGLES,Fe,De,Ve,Gr.disabled,Ee,null,void 0,"sky",We.vertexBuffer,We.indexBuffer,We.segments)}(this,this.style.sky),this._showOverdrawInspector=l.showOverdrawInspector,this.depthRangeFor3D=[0,1-(n._order.length+2)*this.numSublayers*this.depthEpsilon],!this.renderToTexture)for(this.renderPass="opaque",this.currentLayer=_.length-1;this.currentLayer>=0;this.currentLayer--){const $=this.style._layers[_[this.currentLayer]],Y=S[$.source],he=P[$.source];this._renderTileClippingMasks($,he,!1),this.renderLayer(this,Y,$,he,K)}this.renderPass="translucent";let Z=!1;for(this.currentLayer=0;this.currentLayer<_.length;this.currentLayer++){const $=this.style._layers[_[this.currentLayer]],Y=S[$.source];if(this.renderToTexture&&this.renderToTexture.renderLayer($,K))continue;this.opaquePassEnabledForLayer()||Z||(Z=!0,K.isRenderingGlobe&&!this.style.map.terrain&&this._renderTilesDepthBuffer());const he=($.type==="symbol"?z:M)[$.source];this._renderTileClippingMasks($,P[$.source],!!this.renderToTexture),this.renderLayer(this,Y,$,he,K)}if(K.isRenderingGlobe&&function($,Y,he){const Ie=$.context,Ee=Ie.gl,Fe=$.useProgram("atmosphere"),De=new Zr(Ee.LEQUAL,Zr.ReadOnly,[0,1]),Ve=$.transform,Oe=function(xt,ir){const rr=xt.properties.get("position"),Qt=[-rr.x,-rr.y,-rr.z],mr=o.af(new Float64Array(16));return xt.properties.get("anchor")==="map"&&(o.b5(mr,mr,ir.rollInRadians),o.b6(mr,mr,-ir.pitchInRadians),o.b5(mr,mr,ir.bearingInRadians),o.b6(mr,mr,ir.center.lat*Math.PI/180),o.by(mr,mr,-ir.center.lng*Math.PI/180)),o.c4(Qt,Qt,mr),Qt}(he,$.transform),We=Ve.getProjectionData({overscaledTileID:null,applyGlobeMatrix:!0,applyTerrainMatrix:!0}),Je=Y.properties.get("atmosphere-blend")*We.projectionTransition;if(Je===0)return;const ze=Cs(Ve.worldSize,Ve.center.lat),ht=Ve.inverseProjectionMatrix,St=new Float64Array(4);St[3]=1,o.av(St,St,Ve.modelViewProjectionMatrix),St[0]/=St[3],St[1]/=St[3],St[2]/=St[3],St[3]=1,o.av(St,St,ht),St[0]/=St[3],St[1]/=St[3],St[2]/=St[3],St[3]=1;const gt=((xt,ir,rr,Qt,mr)=>({u_sun_pos:xt,u_atmosphere_blend:ir,u_globe_position:rr,u_globe_radius:Qt,u_inv_proj_matrix:mr}))(Oe,Je,[St[0],St[1],St[2]],ze,ht),_t=ul(Ie,Y);Fe.draw(Ie,Ee.TRIANGLES,De,Tr.disabled,An.alphaBlended,Gr.disabled,gt,null,null,"atmosphere",_t.vertexBuffer,_t.indexBuffer,_t.segments)}(this,this.style.sky,this.style.light),this.options.showTileBoundaries){const $=function(Y,he){let Ie=null;const Ee=Object.values(Y._layers).flatMap(Oe=>Oe.source&&!Oe.isHidden(he)?[Y.sourceCaches[Oe.source]]:[]),Fe=Ee.filter(Oe=>Oe.getSource().type==="vector"),De=Ee.filter(Oe=>Oe.getSource().type!=="vector"),Ve=Oe=>{(!Ie||Ie.getSource().maxzoom<Oe.getSource().maxzoom)&&(Ie=Oe)};return Fe.forEach(Oe=>Ve(Oe)),Ie||De.forEach(Oe=>Ve(Oe)),Ie}(this.style,this.transform.zoom);$&&function(Y,he,Ie){for(let Ee=0;Ee<Ie.length;Ee++)Da(Y,he,Ie[Ee])}(this,$,$.getVisibleCoordinates())}this.options.showPadding&&function($){const Y=$.transform.padding;cu($,$.transform.height-(Y.top||0),3,_f),cu($,Y.bottom||0,3,Au),ua($,Y.left||0,3,pd),ua($,$.transform.width-(Y.right||0),3,wf);const he=$.transform.centerPoint;(function(Ie,Ee,Fe,De){io(Ie,Ee-1,Fe-10,2,20,De),io(Ie,Ee-10,Fe-1,20,2,De)})($,he.x,$.transform.height-he.y,xf)}(this),this.context.setDefault()}maybeDrawDepthAndCoords(n){if(!this.style||!this.style.map||!this.style.map.terrain)return;const l=this.terrainFacilitator.matrix,f=this.transform.modelViewProjectionMatrix;let p=this.terrainFacilitator.dirty;p||(p=n?!o.c7(l,f):!o.c8(l,f)),p||(p=this.style.map.terrain.sourceCache.anyTilesAfterTime(this.terrainFacilitator.renderTime)),p&&(o.c9(l,f),this.terrainFacilitator.renderTime=Date.now(),this.terrainFacilitator.dirty=!1,function(_,S){const P=_.context,M=P.gl,z=_.transform,K=An.unblended,Z=new Zr(M.LEQUAL,Zr.ReadWrite,[0,1]),$=S.sourceCache.getRenderableTiles(),Y=_.useProgram("terrainDepth");P.bindFramebuffer.set(S.getFramebuffer("depth").framebuffer),P.viewport.set([0,0,_.width/devicePixelRatio,_.height/devicePixelRatio]),P.clear({color:o.be.transparent,depth:1});for(const he of $){const Ie=S.getTerrainMesh(he.tileID),Ee=S.getTerrainData(he.tileID),Fe=z.getProjectionData({overscaledTileID:he.tileID,applyTerrainMatrix:!1,applyGlobeMatrix:!0}),De={u_ele_delta:S.getMeshFrameDelta(z.zoom)};Y.draw(P,M.TRIANGLES,Z,Tr.disabled,K,Gr.backCCW,De,Ee,Fe,"terrain",Ie.vertexBuffer,Ie.indexBuffer,Ie.segments)}P.bindFramebuffer.set(null),P.viewport.set([0,0,_.width,_.height])}(this,this.style.map.terrain),function(_,S){const P=_.context,M=P.gl,z=_.transform,K=An.unblended,Z=new Zr(M.LEQUAL,Zr.ReadWrite,[0,1]),$=S.getCoordsTexture(),Y=S.sourceCache.getRenderableTiles(),he=_.useProgram("terrainCoords");P.bindFramebuffer.set(S.getFramebuffer("coords").framebuffer),P.viewport.set([0,0,_.width/devicePixelRatio,_.height/devicePixelRatio]),P.clear({color:o.be.transparent,depth:1}),S.coordsIndex=[];for(const Ie of Y){const Ee=S.getTerrainMesh(Ie.tileID),Fe=S.getTerrainData(Ie.tileID);P.activeTexture.set(M.TEXTURE0),M.bindTexture(M.TEXTURE_2D,$.texture);const De={u_terrain_coords_id:(255-S.coordsIndex.length)/255,u_texture:0,u_ele_delta:S.getMeshFrameDelta(z.zoom)},Ve=z.getProjectionData({overscaledTileID:Ie.tileID,applyTerrainMatrix:!1,applyGlobeMatrix:!0});he.draw(P,M.TRIANGLES,Z,Tr.disabled,K,Gr.backCCW,De,Fe,Ve,"terrain",Ee.vertexBuffer,Ee.indexBuffer,Ee.segments),S.coordsIndex.push(Ie.tileID.key)}P.bindFramebuffer.set(null),P.viewport.set([0,0,_.width,_.height])}(this,this.style.map.terrain))}renderLayer(n,l,f,p,_){f.isHidden(this.transform.zoom)||(f.type==="background"||f.type==="custom"||(p||[]).length)&&(this.id=f.id,o.ca(f)?function(S,P,M,z,K,Z){if(S.renderPass!=="translucent")return;const{isRenderingToTexture:$}=Z,Y=Tr.disabled,he=S.colorModeForRenderPass();(M._unevaluatedLayout.hasValue("text-variable-anchor")||M._unevaluatedLayout.hasValue("text-variable-anchor-offset"))&&function(Ie,Ee,Fe,De,Ve,Oe,We,Je,ze){const ht=Ee.transform,St=Ee.style.map.terrain,gt=Ve==="map",_t=Oe==="map";for(const xt of Ie){const ir=De.getTile(xt),rr=ir.getBucket(Fe);if(!rr||!rr.text||!rr.text.segments.get().length)continue;const Qt=o.am(rr.textSizeData,ht.zoom),mr=o.aB(ir,1,Ee.transform.zoom),rn=qt(gt,Ee.transform,mr),mn=Fe.layout.get("icon-text-fit")!=="none"&&rr.hasIconData();if(Qt){const Zn=Math.pow(2,ht.zoom-ir.tileID.overscaledZ),En=St?(In,xn)=>St.getElevation(xt,In,xn):null;dd(rr,gt,_t,ze,ht,rn,Zn,Qt,mn,o.aC(ht,ir,We,Je),xt.toUnwrapped(),En)}}}(z,S,M,P,M.layout.get("text-rotation-alignment"),M.layout.get("text-pitch-alignment"),M.paint.get("text-translate"),M.paint.get("text-translate-anchor"),K),M.paint.get("icon-opacity").constantOr(1)!==0&&ou(S,P,M,z,!1,M.paint.get("icon-translate"),M.paint.get("icon-translate-anchor"),M.layout.get("icon-rotation-alignment"),M.layout.get("icon-pitch-alignment"),M.layout.get("icon-keep-upright"),Y,he,$),M.paint.get("text-opacity").constantOr(1)!==0&&ou(S,P,M,z,!0,M.paint.get("text-translate"),M.paint.get("text-translate-anchor"),M.layout.get("text-rotation-alignment"),M.layout.get("text-pitch-alignment"),M.layout.get("text-keep-upright"),Y,he,$),P.map.showCollisionBoxes&&(iu(S,P,M,z,!0),iu(S,P,M,z,!1))}(n,l,f,p,this.style.placement.variableOffsets,_):o.cb(f)?function(S,P,M,z,K){if(S.renderPass!=="translucent")return;const{isRenderingToTexture:Z}=K,$=M.paint.get("circle-opacity"),Y=M.paint.get("circle-stroke-width"),he=M.paint.get("circle-stroke-opacity"),Ie=!M.layout.get("circle-sort-key").isConstant();if($.constantOr(1)===0&&(Y.constantOr(1)===0||he.constantOr(1)===0))return;const Ee=S.context,Fe=Ee.gl,De=S.transform,Ve=S.getDepthModeForSublayer(0,Zr.ReadOnly),Oe=Tr.disabled,We=S.colorModeForRenderPass(),Je=[],ze=De.getCircleRadiusCorrection();for(let ht=0;ht<z.length;ht++){const St=z[ht],gt=P.getTile(St),_t=gt.getBucket(M);if(!_t)continue;const xt=M.paint.get("circle-translate"),ir=M.paint.get("circle-translate-anchor"),rr=o.aC(De,gt,xt,ir),Qt=_t.programConfigurations.get(M.id),mr=S.useProgram("circle",Qt),rn=_t.layoutVertexBuffer,mn=_t.indexBuffer,Zn=S.style.map.terrain&&S.style.map.terrain.getTerrainData(St),En={programConfiguration:Qt,program:mr,layoutVertexBuffer:rn,indexBuffer:mn,uniformValues:ni(S,gt,M,rr,ze),terrainData:Zn,projectionData:De.getProjectionData({overscaledTileID:St,applyGlobeMatrix:!Z,applyTerrainMatrix:!0})};if(Ie){const In=_t.segments.get();for(const xn of In)Je.push({segments:new o.aL([xn]),sortKey:xn.sortKey,state:En})}else Je.push({segments:_t.segments,sortKey:0,state:En})}Ie&&Je.sort((ht,St)=>ht.sortKey-St.sortKey);for(const ht of Je){const{programConfiguration:St,program:gt,layoutVertexBuffer:_t,indexBuffer:xt,uniformValues:ir,terrainData:rr,projectionData:Qt}=ht.state;gt.draw(Ee,Fe.TRIANGLES,Ve,Oe,We,Gr.backCCW,ir,rr,Qt,M.id,_t,xt,ht.segments,M.paint,S.transform.zoom,St)}}(n,l,f,p,_):o.cc(f)?function(S,P,M,z,K){if(M.paint.get("heatmap-opacity")===0)return;const Z=S.context,{isRenderingToTexture:$,isRenderingGlobe:Y}=K;if(S.style.map.terrain){for(const he of z){const Ie=P.getTile(he);P.hasRenderableParent(he)||(S.renderPass==="offscreen"?qu(S,Ie,M,he,Y):S.renderPass==="translucent"&&Zu(S,M,he,$,Y))}Z.viewport.set([0,0,S.width,S.height])}else S.renderPass==="offscreen"?function(he,Ie,Ee,Fe){const De=he.context,Ve=De.gl,Oe=he.transform,We=Tr.disabled,Je=new An([Ve.ONE,Ve.ONE],o.be.transparent,[!0,!0,!0,!0]);(function(ze,ht,St){const gt=ze.gl;ze.activeTexture.set(gt.TEXTURE1),ze.viewport.set([0,0,ht.width/4,ht.height/4]);let _t=St.heatmapFbos.get(o.c1);_t?(gt.bindTexture(gt.TEXTURE_2D,_t.colorAttachment.get()),ze.bindFramebuffer.set(_t.framebuffer)):(_t=ac(ze,ht.width/4,ht.height/4),St.heatmapFbos.set(o.c1,_t))})(De,he,Ee),De.clear({color:o.be.transparent});for(let ze=0;ze<Fe.length;ze++){const ht=Fe[ze];if(Ie.hasRenderableParent(ht))continue;const St=Ie.getTile(ht),gt=St.getBucket(Ee);if(!gt)continue;const _t=gt.programConfigurations.get(Ee.id),xt=he.useProgram("heatmap",_t),ir=Oe.getProjectionData({overscaledTileID:ht,applyGlobeMatrix:!0,applyTerrainMatrix:!1}),rr=Oe.getCircleRadiusCorrection();xt.draw(De,Ve.TRIANGLES,Zr.disabled,We,Je,Gr.backCCW,Ds(St,Oe.zoom,Ee.paint.get("heatmap-intensity"),rr),null,ir,Ee.id,gt.layoutVertexBuffer,gt.indexBuffer,gt.segments,Ee.paint,Oe.zoom,_t)}De.viewport.set([0,0,he.width,he.height])}(S,P,M,z):S.renderPass==="translucent"&&function(he,Ie){const Ee=he.context,Fe=Ee.gl;Ee.setColorMode(he.colorModeForRenderPass());const De=Ie.heatmapFbos.get(o.c1);De&&(Ee.activeTexture.set(Fe.TEXTURE0),Fe.bindTexture(Fe.TEXTURE_2D,De.colorAttachment.get()),Ee.activeTexture.set(Fe.TEXTURE1),Wu(Ee,Ie).bind(Fe.LINEAR,Fe.CLAMP_TO_EDGE),he.useProgram("heatmapTexture").draw(Ee,Fe.TRIANGLES,Zr.disabled,Tr.disabled,he.colorModeForRenderPass(),Gr.disabled,to(he,Ie,0,1),null,null,Ie.id,he.viewportBuffer,he.quadTriangleIndexBuffer,he.viewportSegments,Ie.paint,he.transform.zoom))}(S,M)}(n,l,f,p,_):o.cd(f)?function(S,P,M,z,K){if(S.renderPass!=="translucent")return;const{isRenderingToTexture:Z}=K,$=M.paint.get("line-opacity"),Y=M.paint.get("line-width");if($.constantOr(1)===0||Y.constantOr(1)===0)return;const he=S.getDepthModeForSublayer(0,Zr.ReadOnly),Ie=S.colorModeForRenderPass(),Ee=M.paint.get("line-dasharray"),Fe=M.paint.get("line-pattern"),De=Fe.constantOr(1),Ve=M.paint.get("line-gradient"),Oe=M.getCrossfadeParameters(),We=De?"linePattern":Ee?"lineSDF":Ve?"lineGradient":"line",Je=S.context,ze=Je.gl,ht=S.transform;let St=!0;for(const gt of z){const _t=P.getTile(gt);if(De&&!_t.patternsLoaded())continue;const xt=_t.getBucket(M);if(!xt)continue;const ir=xt.programConfigurations.get(M.id),rr=S.context.program.get(),Qt=S.useProgram(We,ir),mr=St||Qt.program!==rr,rn=S.style.map.terrain&&S.style.map.terrain.getTerrainData(gt),mn=Fe.constantOr(null);if(mn&&_t.imageAtlas){const _n=_t.imageAtlas,Tn=_n.patternPositions[mn.to.toString()],qi=_n.patternPositions[mn.from.toString()];Tn&&qi&&ir.setConstantPatternPositions(Tn,qi)}const Zn=ht.getProjectionData({overscaledTileID:gt,applyGlobeMatrix:!Z,applyTerrainMatrix:!0}),En=ht.getPixelScale(),In=De?rc(S,_t,M,En,Oe):Ee?uA(S,_t,M,En,Ee,Oe):Ve?cA(S,_t,M,En,xt.lineClipsArray.length):sl(S,_t,M,En);if(De)Je.activeTexture.set(ze.TEXTURE0),_t.imageAtlasTexture.bind(ze.LINEAR,ze.CLAMP_TO_EDGE),ir.updatePaintBuffers(Oe);else if(Ee&&(mr||S.lineAtlas.dirty))Je.activeTexture.set(ze.TEXTURE0),S.lineAtlas.bind(Je);else if(Ve){const _n=xt.gradients[M.id];let Tn=_n.texture;if(M.gradientVersion!==_n.version){let qi=256;if(M.stepInterpolant){const fn=P.getSource().maxzoom,ss=gt.canonical.z===fn?Math.ceil(1<<S.transform.maxZoom-gt.canonical.z):1;qi=o.ag(o.c2(xt.maxLineLength/o.$*1024*ss),256,Je.maxTextureSize)}_n.gradient=o.c3({expression:M.gradientExpression(),evaluationKey:"lineProgress",resolution:qi,image:_n.gradient||void 0,clips:xt.lineClipsArray}),_n.texture?_n.texture.update(_n.gradient):_n.texture=new o.T(Je,_n.gradient,ze.RGBA),_n.version=M.gradientVersion,Tn=_n.texture}Je.activeTexture.set(ze.TEXTURE0),Tn.bind(M.stepInterpolant?ze.NEAREST:ze.LINEAR,ze.CLAMP_TO_EDGE)}const xn=S.stencilModeForClipping(gt);Qt.draw(Je,ze.TRIANGLES,he,xn,Ie,Gr.disabled,In,rn,Zn,M.id,xt.layoutVertexBuffer,xt.indexBuffer,xt.segments,M.paint,S.transform.zoom,ir,xt.layoutVertexBuffer2),St=!1}}(n,l,f,p,_):o.ce(f)?function(S,P,M,z,K){const Z=M.paint.get("fill-color"),$=M.paint.get("fill-opacity");if($.constantOr(1)===0)return;const{isRenderingToTexture:Y}=K,he=S.colorModeForRenderPass(),Ie=M.paint.get("fill-pattern"),Ee=S.opaquePassEnabledForLayer()&&!Ie.constantOr(1)&&Z.constantOr(o.be.transparent).a===1&&$.constantOr(0)===1?"opaque":"translucent";if(S.renderPass===Ee){const Fe=S.getDepthModeForSublayer(1,S.renderPass==="opaque"?Zr.ReadWrite:Zr.ReadOnly);au(S,P,M,z,Fe,he,!1,Y)}if(S.renderPass==="translucent"&&M.paint.get("fill-antialias")){const Fe=S.getDepthModeForSublayer(M.getPaintProperty("fill-outline-color")?2:0,Zr.ReadOnly);au(S,P,M,z,Fe,he,!0,Y)}}(n,l,f,p,_):o.cf(f)?function(S,P,M,z,K){const Z=M.paint.get("fill-extrusion-opacity");if(Z===0)return;const{isRenderingToTexture:$}=K;if(S.renderPass==="translucent"){const Y=new Zr(S.context.gl.LEQUAL,Zr.ReadWrite,S.depthRangeFor3D);if(Z!==1||M.paint.get("fill-extrusion-pattern").constantOr(1))lc(S,P,M,z,Y,Tr.disabled,An.disabled,$),lc(S,P,M,z,Y,S.stencilModeFor3D(),S.colorModeForRenderPass(),$);else{const he=S.colorModeForRenderPass();lc(S,P,M,z,Y,Tr.disabled,he,$)}}}(n,l,f,p,_):o.cg(f)?function(S,P,M,z,K){if(S.renderPass!=="offscreen"&&S.renderPass!=="translucent")return;const{isRenderingToTexture:Z}=K,$=S.context,Y=S.style.projection.useSubdivision,he=S.getDepthModeForSublayer(0,Zr.ReadOnly),Ie=S.colorModeForRenderPass();if(S.renderPass==="offscreen")(function(Ee,Fe,De,Ve,Oe,We,Je){const ze=Ee.context,ht=ze.gl;for(const St of De){const gt=Fe.getTile(St),_t=gt.dem;if(!_t||!_t.data||!gt.needsHillshadePrepare)continue;const xt=_t.dim,ir=_t.stride,rr=_t.getPixels();if(ze.activeTexture.set(ht.TEXTURE1),ze.pixelStoreUnpackPremultiplyAlpha.set(!1),gt.demTexture=gt.demTexture||Ee.getTileTexture(ir),gt.demTexture){const mr=gt.demTexture;mr.update(rr,{premultiply:!1}),mr.bind(ht.NEAREST,ht.CLAMP_TO_EDGE)}else gt.demTexture=new o.T(ze,rr,ht.RGBA,{premultiply:!1}),gt.demTexture.bind(ht.NEAREST,ht.CLAMP_TO_EDGE);ze.activeTexture.set(ht.TEXTURE0);let Qt=gt.fbo;if(!Qt){const mr=new o.T(ze,{width:xt,height:xt,data:null},ht.RGBA);mr.bind(ht.LINEAR,ht.CLAMP_TO_EDGE),Qt=gt.fbo=ze.createFramebuffer(xt,xt,!0,!1),Qt.colorAttachment.set(mr.texture)}ze.bindFramebuffer.set(Qt.framebuffer),ze.viewport.set([0,0,xt,xt]),Ee.useProgram("hillshadePrepare").draw(ze,ht.TRIANGLES,Oe,We,Je,Gr.disabled,ju(gt.tileID,_t),null,null,Ve.id,Ee.rasterBoundsBuffer,Ee.quadTriangleIndexBuffer,Ee.rasterBoundsSegments),gt.needsHillshadePrepare=!1}})(S,P,z,M,he,Tr.disabled,Ie),$.viewport.set([0,0,S.width,S.height]);else if(S.renderPass==="translucent")if(Y){const[Ee,Fe,De]=S.stencilConfigForOverlapTwoPass(z);Ac(S,P,M,De,Ee,he,Ie,!1,Z),Ac(S,P,M,De,Fe,he,Ie,!0,Z)}else{const[Ee,Fe]=S.getStencilConfigForOverlapAndUpdateStencilID(z);Ac(S,P,M,Fe,Ee,he,Ie,!1,Z)}}(n,l,f,p,_):o.ch(f)?function(S,P,M,z,K){if(S.renderPass!=="translucent"||!z.length)return;const{isRenderingToTexture:Z}=K,$=S.style.projection.useSubdivision,Y=S.getDepthModeForSublayer(0,Zr.ReadOnly),he=S.colorModeForRenderPass();if($){const[Ie,Ee,Fe]=S.stencilConfigForOverlapTwoPass(z);vA(S,P,M,Fe,Ie,Y,he,!1,Z),vA(S,P,M,Fe,Ee,Y,he,!0,Z)}else{const[Ie,Ee]=S.getStencilConfigForOverlapAndUpdateStencilID(z);vA(S,P,M,Ee,Ie,Y,he,!1,Z)}}(n,l,f,p,_):o.ci(f)?function(S,P,M,z,K){if(S.renderPass!=="translucent"||M.paint.get("raster-opacity")===0||!z.length)return;const{isRenderingToTexture:Z}=K,$=P.getSource(),Y=S.style.projection.useSubdivision;if($ instanceof Kt)Ro(S,P,M,z,null,!1,!1,$.tileCoords,$.flippedWindingOrder,Z);else if(Y){const[he,Ie,Ee]=S.stencilConfigForOverlapTwoPass(z);Ro(S,P,M,Ee,he,!1,!0,lu,!1,Z),Ro(S,P,M,Ee,Ie,!0,!0,lu,!1,Z)}else{const[he,Ie]=S.getStencilConfigForOverlapAndUpdateStencilID(z);Ro(S,P,M,Ie,he,!1,!0,lu,!1,Z)}}(n,l,f,p,_):o.cj(f)?function(S,P,M,z,K){const Z=M.paint.get("background-color"),$=M.paint.get("background-opacity");if($===0)return;const{isRenderingToTexture:Y}=K,he=S.context,Ie=he.gl,Ee=S.style.projection,Fe=S.transform,De=Fe.tileSize,Ve=M.paint.get("background-pattern");if(S.isPatternMissing(Ve))return;const Oe=!Ve&&Z.a===1&&$===1&&S.opaquePassEnabledForLayer()?"opaque":"translucent";if(S.renderPass!==Oe)return;const We=Tr.disabled,Je=S.getDepthModeForSublayer(0,Oe==="opaque"?Zr.ReadWrite:Zr.ReadOnly),ze=S.colorModeForRenderPass(),ht=S.useProgram(Ve?"backgroundPattern":"background"),St=z||Ct(Fe,{tileSize:De,terrain:S.style.map.terrain});Ve&&(he.activeTexture.set(Ie.TEXTURE0),S.imageManager.bind(S.context));const gt=M.getCrossfadeParameters();for(const _t of St){const xt=Fe.getProjectionData({overscaledTileID:_t,applyGlobeMatrix:!Y,applyTerrainMatrix:!0}),ir=Ve?Vu($,S,Ve,{tileID:_t,tileSize:De},gt):Dl($,Z),rr=S.style.map.terrain&&S.style.map.terrain.getTerrainData(_t),Qt=Ee.getMeshFromTileID(he,_t.canonical,!1,!0,"raster");ht.draw(he,Ie.TRIANGLES,Je,We,ze,Gr.backCCW,ir,rr,xt,M.id,Qt.vertexBuffer,Qt.indexBuffer,Qt.segments)}}(n,0,f,p,_):o.ck(f)&&function(S,P,M,z){const{isRenderingGlobe:K}=z,Z=S.context,$=M.implementation,Y=S.style.projection,he=S.transform,Ie=he.getProjectionDataForCustomLayer(K),Ee={farZ:he.farZ,nearZ:he.nearZ,fov:he.fov*Math.PI/180,modelViewProjectionMatrix:he.modelViewProjectionMatrix,projectionMatrix:he.projectionMatrix,shaderData:{variantName:Y.shaderVariantName,vertexShaderPrelude:`const float PI = 3.141592653589793;
uniform mat4 u_projection_matrix;
${Y.shaderPreludeCode.vertexSource}`,define:Y.shaderDefine},defaultProjectionData:Ie},Fe=$.renderingMode?$.renderingMode:"2d";if(S.renderPass==="offscreen"){const De=$.prerender;De&&(S.setCustomLayerDefaults(),Z.setColorMode(S.colorModeForRenderPass()),De.call($,Z.gl,Ee),Z.setDirty(),S.setBaseState())}else if(S.renderPass==="translucent"){S.setCustomLayerDefaults(),Z.setColorMode(S.colorModeForRenderPass()),Z.setStencilMode(Tr.disabled);const De=Fe==="3d"?S.getDepthModeFor3D():S.getDepthModeForSublayer(0,Zr.ReadOnly);Z.setDepthMode(De),$.render(Z.gl,Ee),Z.setDirty(),S.setBaseState(),Z.bindFramebuffer.set(null)}}(n,0,f,_))}saveTileTexture(n){const l=this._tileTextures[n.size[0]];l?l.push(n):this._tileTextures[n.size[0]]=[n]}getTileTexture(n){const l=this._tileTextures[n];return l&&l.length>0?l.pop():null}isPatternMissing(n){if(!n)return!1;if(!n.from||!n.to)return!0;const l=this.imageManager.getPattern(n.from.toString()),f=this.imageManager.getPattern(n.to.toString());return!l||!f}useProgram(n,l,f=!1,p=[]){this.cache=this.cache||{};const _=!!this.style.map.terrain,S=this.style.projection,P=f?Js.projectionMercator:S.shaderPreludeCode,M=f?Rs:S.shaderDefine,z=n+(l?l.cacheKey:"")+`/${f?Pl:S.shaderVariantName}`+(this._showOverdrawInspector?"/overdraw":"")+(_?"/terrain":"")+(p?`/${p.join("/")}`:"");return this.cache[z]||(this.cache[z]=new Wt(this.context,Js[n],l,fA[n],this._showOverdrawInspector,_,P,M,p)),this.cache[z]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const n=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(n.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new o.T(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this.debugOverlayTexture&&this.debugOverlayTexture.destroy()}overLimit(){const{drawingBufferWidth:n,drawingBufferHeight:l}=this.context.gl;return this.width!==n||this.height!==l}}function zs(v,n){let l,f=!1,p=null,_=null;const S=()=>{p=null,f&&(v.apply(_,l),p=setTimeout(S,n),f=!1)};return(...P)=>(f=!0,_=this,l=P,p||S(),p)}class uu{constructor(n){this._getCurrentHash=()=>{const l=window.location.hash.replace("#","");if(this._hashName){let f;return l.split("&").map(p=>p.split("=")).forEach(p=>{p[0]===this._hashName&&(f=p)}),(f&&f[1]||"").split("/")}return l.split("/")},this._onHashChange=()=>{const l=this._getCurrentHash();if(!this._isValidHash(l))return!1;const f=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(l[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+l[2],+l[1]],zoom:+l[0],bearing:f,pitch:+(l[4]||0)}),!0},this._updateHashUnthrottled=()=>{const l=window.location.href.replace(/(#.*)?$/,this.getHashString());window.history.replaceState(window.history.state,null,l)},this._removeHash=()=>{const l=this._getCurrentHash();if(l.length===0)return;const f=l.join("/");let p=f;p.split("&").length>0&&(p=p.split("&")[0]),this._hashName&&(p=`${this._hashName}=${f}`);let _=window.location.hash.replace(p,"");_.startsWith("#&")?_=_.slice(0,1)+_.slice(2):_==="#"&&(_="");let S=window.location.href.replace(/(#.+)?$/,_);S=S.replace("&&","&"),window.history.replaceState(window.history.state,null,S)},this._updateHash=zs(this._updateHashUnthrottled,300),this._hashName=n&&encodeURIComponent(n)}addTo(n){return this._map=n,addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this}remove(){return removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),this._removeHash(),delete this._map,this}getHashString(n){const l=this._map.getCenter(),f=Math.round(100*this._map.getZoom())/100,p=Math.ceil((f*Math.LN2+Math.log(512/360/.5))/Math.LN10),_=Math.pow(10,p),S=Math.round(l.lng*_)/_,P=Math.round(l.lat*_)/_,M=this._map.getBearing(),z=this._map.getPitch();let K="";if(K+=n?`/${S}/${P}/${f}`:`${f}/${P}/${S}`,(M||z)&&(K+="/"+Math.round(10*M)/10),z&&(K+=`/${Math.round(z)}`),this._hashName){const Z=this._hashName;let $=!1;const Y=window.location.hash.slice(1).split("&").map(he=>{const Ie=he.split("=")[0];return Ie===Z?($=!0,`${Ie}=${K}`):he}).filter(he=>he);return $||Y.push(`${Z}=${K}`),`#${Y.join("&")}`}return`#${K}`}_isValidHash(n){if(n.length<3||n.some(isNaN))return!1;try{new o.S(+n[2],+n[1])}catch{return!1}const l=+n[0],f=+(n[3]||0),p=+(n[4]||0);return l>=this._map.getMinZoom()&&l<=this._map.getMaxZoom()&&f>=-180&&f<=180&&p>=this._map.getMinPitch()&&p<=this._map.getMaxPitch()}}const cc={linearity:.3,easing:o.cl(0,0,.3,1)},_A=o.e({deceleration:2500,maxSpeed:1400},cc),Xu=o.e({deceleration:20,maxSpeed:1400},cc),uc=o.e({deceleration:1e3,maxSpeed:360},cc),Yu=o.e({deceleration:1e3,maxSpeed:90},cc),bf=o.e({deceleration:1e3,maxSpeed:360},cc);class hu{constructor(n){this._map=n,this.clear()}clear(){this._inertiaBuffer=[]}record(n){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:F.now(),settings:n})}_drainInertiaBuffer(){const n=this._inertiaBuffer,l=F.now();for(;n.length>0&&l-n[0].time>160;)n.shift()}_onMoveEnd(n){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;const l={zoom:0,bearing:0,pitch:0,roll:0,pan:new o.P(0,0),pinchAround:void 0,around:void 0};for(const{settings:_}of this._inertiaBuffer)l.zoom+=_.zoomDelta||0,l.bearing+=_.bearingDelta||0,l.pitch+=_.pitchDelta||0,l.roll+=_.rollDelta||0,_.panDelta&&l.pan._add(_.panDelta),_.around&&(l.around=_.around),_.pinchAround&&(l.pinchAround=_.pinchAround);const f=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,p={};if(l.pan.mag()){const _=Qa(l.pan.mag(),f,o.e({},_A,n||{})),S=l.pan.mult(_.amount/l.pan.mag()),P=this._map.cameraHelper.handlePanInertia(S,this._map.transform);p.center=P.easingCenter,p.offset=P.easingOffset,hl(p,_)}if(l.zoom){const _=Qa(l.zoom,f,Xu);p.zoom=this._map.transform.zoom+_.amount,hl(p,_)}if(l.bearing){const _=Qa(l.bearing,f,uc);p.bearing=this._map.transform.bearing+o.ag(_.amount,-179,179),hl(p,_)}if(l.pitch){const _=Qa(l.pitch,f,Yu);p.pitch=this._map.transform.pitch+_.amount,hl(p,_)}if(l.roll){const _=Qa(l.roll,f,bf);p.roll=this._map.transform.roll+o.ag(_.amount,-179,179),hl(p,_)}if(p.zoom||p.bearing){const _=l.pinchAround===void 0?l.around:l.pinchAround;p.around=_?this._map.unproject(_):this._map.getCenter()}return this.clear(),o.e(p,{noMoveStart:!0})}}function hl(v,n){(!v.duration||v.duration<n.duration)&&(v.duration=n.duration,v.easing=n.easing)}function Qa(v,n,l){const{maxSpeed:f,linearity:p,deceleration:_}=l,S=o.ag(v*p/(n/1e3),-f,f),P=Math.abs(S)/(_*p);return{easing:l.easing,duration:1e3*P,amount:S*(P/2)}}class Ss extends o.l{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(n,l,f,p={}){f=f instanceof MouseEvent?f:new MouseEvent(n,f);const _=b.mousePos(l.getCanvas(),f),S=l.unproject(_);super(n,o.e({point:_,lngLat:S,originalEvent:f},p)),this._defaultPrevented=!1,this.target=l}}class ha extends o.l{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(n,l,f){const p=n==="touchend"?f.changedTouches:f.touches,_=b.touchPos(l.getCanvasContainer(),p),S=_.map(M=>l.unproject(M)),P=_.reduce((M,z,K,Z)=>M.add(z.div(Z.length)),new o.P(0,0));super(n,{points:_,point:P,lngLats:S,lngLat:l.unproject(P),originalEvent:f}),this._defaultPrevented=!1}}class Ju extends o.l{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(n,l,f){super(n,{originalEvent:f}),this._defaultPrevented=!1}}class Bf{constructor(n,l){this._map=n,this._clickTolerance=l.clickTolerance}reset(){delete this._mousedownPos}wheel(n){return this._firePreventable(new Ju(n.type,this._map,n))}mousedown(n,l){return this._mousedownPos=l,this._firePreventable(new Ss(n.type,this._map,n))}mouseup(n){this._map.fire(new Ss(n.type,this._map,n))}click(n,l){this._mousedownPos&&this._mousedownPos.dist(l)>=this._clickTolerance||this._map.fire(new Ss(n.type,this._map,n))}dblclick(n){return this._firePreventable(new Ss(n.type,this._map,n))}mouseover(n){this._map.fire(new Ss(n.type,this._map,n))}mouseout(n){this._map.fire(new Ss(n.type,this._map,n))}touchstart(n){return this._firePreventable(new ha(n.type,this._map,n))}touchmove(n){this._map.fire(new ha(n.type,this._map,n))}touchend(n){this._map.fire(new ha(n.type,this._map,n))}touchcancel(n){this._map.fire(new ha(n.type,this._map,n))}_firePreventable(n){if(this._map.fire(n),n.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Cf{constructor(n){this._map=n}reset(){this._delayContextMenu=!1,this._ignoreContextMenu=!0,delete this._contextMenuEvent}mousemove(n){this._map.fire(new Ss(n.type,this._map,n))}mousedown(){this._delayContextMenu=!0,this._ignoreContextMenu=!1}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new Ss("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(n){this._delayContextMenu?this._contextMenuEvent=n:this._ignoreContextMenu||this._map.fire(new Ss(n.type,this._map,n)),this._map.listens("contextmenu")&&n.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class hc{constructor(n){this._map=n}get transform(){return this._map._requestedCameraState||this._map.transform}get center(){return{lng:this.transform.center.lng,lat:this.transform.center.lat}}get zoom(){return this.transform.zoom}get pitch(){return this.transform.pitch}get bearing(){return this.transform.bearing}unproject(n){return this.transform.screenPointToLocation(o.P.convert(n),this._map.terrain)}}class md{constructor(n,l){this._map=n,this._tr=new hc(n),this._el=n.getCanvasContainer(),this._container=n.getContainer(),this._clickTolerance=l.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(n,l){this.isEnabled()&&n.shiftKey&&n.button===0&&(b.disableDrag(),this._startPos=this._lastPos=l,this._active=!0)}mousemoveWindow(n,l){if(!this._active)return;const f=l;if(this._lastPos.equals(f)||!this._box&&f.dist(this._startPos)<this._clickTolerance)return;const p=this._startPos;this._lastPos=f,this._box||(this._box=b.create("div","maplibregl-boxzoom",this._container),this._container.classList.add("maplibregl-crosshair"),this._fireEvent("boxzoomstart",n));const _=Math.min(p.x,f.x),S=Math.max(p.x,f.x),P=Math.min(p.y,f.y),M=Math.max(p.y,f.y);b.setTransform(this._box,`translate(${_}px,${P}px)`),this._box.style.width=S-_+"px",this._box.style.height=M-P+"px"}mouseupWindow(n,l){if(!this._active||n.button!==0)return;const f=this._startPos,p=l;if(this.reset(),b.suppressClick(),f.x!==p.x||f.y!==p.y)return this._map.fire(new o.l("boxzoomend",{originalEvent:n})),{cameraAnimation:_=>_.fitScreenCoordinates(f,p,this._tr.bearing,{linear:!0})};this._fireEvent("boxzoomcancel",n)}keydown(n){this._active&&n.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",n))}reset(){this._active=!1,this._container.classList.remove("maplibregl-crosshair"),this._box&&(b.remove(this._box),this._box=null),b.enableDrag(),delete this._startPos,delete this._lastPos}_fireEvent(n,l){return this._map.fire(new o.l(n,{originalEvent:l}))}}function eh(v,n){if(v.length!==n.length)throw new Error(`The number of touches and points are not equal - touches ${v.length}, points ${n.length}`);const l={};for(let f=0;f<v.length;f++)l[v[f].identifier]=n[f];return l}class Sf{constructor(n){this.reset(),this.numTouches=n.numTouches}reset(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}touchstart(n,l,f){(this.centroid||f.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=n.timeStamp),f.length===this.numTouches&&(this.centroid=function(p){const _=new o.P(0,0);for(const S of p)_._add(S);return _.div(p.length)}(l),this.touches=eh(f,l)))}touchmove(n,l,f){if(this.aborted||!this.centroid)return;const p=eh(f,l);for(const _ in this.touches){const S=p[_];(!S||S.dist(this.touches[_])>30)&&(this.aborted=!0)}}touchend(n,l,f){if((!this.centroid||n.timeStamp-this.startTime>500)&&(this.aborted=!0),f.length===0){const p=!this.aborted&&this.centroid;if(this.reset(),p)return p}}}class du{constructor(n){this.singleTap=new Sf(n),this.numTaps=n.numTaps,this.reset()}reset(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}touchstart(n,l,f){this.singleTap.touchstart(n,l,f)}touchmove(n,l,f){this.singleTap.touchmove(n,l,f)}touchend(n,l,f){const p=this.singleTap.touchend(n,l,f);if(p){const _=n.timeStamp-this.lastTime<500,S=!this.lastTap||this.lastTap.dist(p)<30;if(_&&S||this.reset(),this.count++,this.lastTime=n.timeStamp,this.lastTap=p,this.count===this.numTaps)return this.reset(),p}}}class wA{constructor(n){this._tr=new hc(n),this._zoomIn=new du({numTouches:1,numTaps:2}),this._zoomOut=new du({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(n,l,f){this._zoomIn.touchstart(n,l,f),this._zoomOut.touchstart(n,l,f)}touchmove(n,l,f){this._zoomIn.touchmove(n,l,f),this._zoomOut.touchmove(n,l,f)}touchend(n,l,f){const p=this._zoomIn.touchend(n,l,f),_=this._zoomOut.touchend(n,l,f),S=this._tr;return p?(this._active=!0,n.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:P=>P.easeTo({duration:300,zoom:S.zoom+1,around:S.unproject(p)},{originalEvent:n})}):_?(this._active=!0,n.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:P=>P.easeTo({duration:300,zoom:S.zoom-1,around:S.unproject(_)},{originalEvent:n})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class dc{constructor(n){this._enabled=!!n.enable,this._moveStateManager=n.moveStateManager,this._clickTolerance=n.clickTolerance||1,this._moveFunction=n.move,this._activateOnStart=!!n.activateOnStart,n.assignEvents(this),this.reset()}reset(n){this._active=!1,this._moved=!1,delete this._lastPoint,this._moveStateManager.endMove(n)}_move(...n){const l=this._moveFunction(...n);if(l.bearingDelta||l.pitchDelta||l.rollDelta||l.around||l.panDelta)return this._active=!0,l}dragStart(n,l){this.isEnabled()&&!this._lastPoint&&this._moveStateManager.isValidStartEvent(n)&&(this._moveStateManager.startMove(n),this._lastPoint=Array.isArray(l)?l[0]:l,this._activateOnStart&&this._lastPoint&&(this._active=!0))}dragMove(n,l){if(!this.isEnabled())return;const f=this._lastPoint;if(!f)return;if(n.preventDefault(),!this._moveStateManager.isValidMoveEvent(n))return void this.reset(n);const p=Array.isArray(l)?l[0]:l;return!this._moved&&p.dist(f)<this._clickTolerance?void 0:(this._moved=!0,this._lastPoint=p,this._move(f,p))}dragEnd(n){this.isEnabled()&&this._lastPoint&&this._moveStateManager.isValidEndEvent(n)&&(this._moved&&b.suppressClick(),this.reset(n))}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}getClickTolerance(){return this._clickTolerance}}const No=0,Do=2,B={[No]:1,[Do]:2};class T{constructor(n){this._correctEvent=n.checkCorrectEvent}startMove(n){const l=b.mouseButton(n);this._eventButton=l}endMove(n){delete this._eventButton}isValidStartEvent(n){return this._correctEvent(n)}isValidMoveEvent(n){return!function(l,f){const p=B[f];return l.buttons===void 0||(l.buttons&p)!==p}(n,this._eventButton)}isValidEndEvent(n){return b.mouseButton(n)===this._eventButton}}class O{constructor(){this._firstTouch=void 0}_isOneFingerTouch(n){return n.targetTouches.length===1}_isSameTouchEvent(n){return n.targetTouches[0].identifier===this._firstTouch}startMove(n){this._firstTouch=n.targetTouches[0].identifier}endMove(n){delete this._firstTouch}isValidStartEvent(n){return this._isOneFingerTouch(n)}isValidMoveEvent(n){return this._isOneFingerTouch(n)&&this._isSameTouchEvent(n)}isValidEndEvent(n){return this._isOneFingerTouch(n)&&this._isSameTouchEvent(n)}}class q{constructor(n=new T({checkCorrectEvent:()=>!0}),l=new O){this.mouseMoveStateManager=n,this.oneFingerTouchMoveStateManager=l}_executeRelevantHandler(n,l,f){return n instanceof MouseEvent?l(n):typeof TouchEvent<"u"&&n instanceof TouchEvent?f(n):void 0}startMove(n){this._executeRelevantHandler(n,l=>this.mouseMoveStateManager.startMove(l),l=>this.oneFingerTouchMoveStateManager.startMove(l))}endMove(n){this._executeRelevantHandler(n,l=>this.mouseMoveStateManager.endMove(l),l=>this.oneFingerTouchMoveStateManager.endMove(l))}isValidStartEvent(n){return this._executeRelevantHandler(n,l=>this.mouseMoveStateManager.isValidStartEvent(l),l=>this.oneFingerTouchMoveStateManager.isValidStartEvent(l))}isValidMoveEvent(n){return this._executeRelevantHandler(n,l=>this.mouseMoveStateManager.isValidMoveEvent(l),l=>this.oneFingerTouchMoveStateManager.isValidMoveEvent(l))}isValidEndEvent(n){return this._executeRelevantHandler(n,l=>this.mouseMoveStateManager.isValidEndEvent(l),l=>this.oneFingerTouchMoveStateManager.isValidEndEvent(l))}}const le=v=>{v.mousedown=v.dragStart,v.mousemoveWindow=v.dragMove,v.mouseup=v.dragEnd,v.contextmenu=n=>{n.preventDefault()}};class ge{constructor(n,l){this._clickTolerance=n.clickTolerance||1,this._map=l,this.reset()}reset(){this._active=!1,this._touches={},this._sum=new o.P(0,0)}_shouldBePrevented(n){return n<(this._map.cooperativeGestures.isEnabled()?2:1)}touchstart(n,l,f){return this._calculateTransform(n,l,f)}touchmove(n,l,f){if(this._active){if(!this._shouldBePrevented(f.length))return n.preventDefault(),this._calculateTransform(n,l,f);this._map.cooperativeGestures.notifyGestureBlocked("touch_pan",n)}}touchend(n,l,f){this._calculateTransform(n,l,f),this._active&&this._shouldBePrevented(f.length)&&this.reset()}touchcancel(){this.reset()}_calculateTransform(n,l,f){f.length>0&&(this._active=!0);const p=eh(f,l),_=new o.P(0,0),S=new o.P(0,0);let P=0;for(const z in p){const K=p[z],Z=this._touches[z];Z&&(_._add(K),S._add(K.sub(Z)),P++,p[z]=K)}if(this._touches=p,this._shouldBePrevented(P)||!S.mag())return;const M=S.div(P);return this._sum._add(M),this._sum.mag()<this._clickTolerance?void 0:{around:_.div(P),panDelta:M}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class ye{constructor(){this.reset()}reset(){this._active=!1,delete this._firstTwoTouches}touchstart(n,l,f){this._firstTwoTouches||f.length<2||(this._firstTwoTouches=[f[0].identifier,f[1].identifier],this._start([l[0],l[1]]))}touchmove(n,l,f){if(!this._firstTwoTouches)return;n.preventDefault();const[p,_]=this._firstTwoTouches,S=ve(f,l,p),P=ve(f,l,_);if(!S||!P)return;const M=this._aroundCenter?null:S.add(P).div(2);return this._move([S,P],M,n)}touchend(n,l,f){if(!this._firstTwoTouches)return;const[p,_]=this._firstTwoTouches,S=ve(f,l,p),P=ve(f,l,_);S&&P||(this._active&&b.suppressClick(),this.reset())}touchcancel(){this.reset()}enable(n){this._enabled=!0,this._aroundCenter=!!n&&n.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return!!this._enabled}isActive(){return!!this._active}}function ve(v,n,l){for(let f=0;f<v.length;f++)if(v[f].identifier===l)return n[f]}function xe(v,n){return Math.log(v/n)/Math.LN2}class ke extends ye{reset(){super.reset(),delete this._distance,delete this._startDistance}_start(n){this._startDistance=this._distance=n[0].dist(n[1])}_move(n,l){const f=this._distance;if(this._distance=n[0].dist(n[1]),this._active||!(Math.abs(xe(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:xe(this._distance,f),pinchAround:l}}}function Qe(v,n){return 180*v.angleWith(n)/Math.PI}class Bt extends ye{reset(){super.reset(),delete this._minDiameter,delete this._startVector,delete this._vector}_start(n){this._startVector=this._vector=n[0].sub(n[1]),this._minDiameter=n[0].dist(n[1])}_move(n,l,f){const p=this._vector;if(this._vector=n[0].sub(n[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:Qe(this._vector,p),pinchAround:l}}_isBelowThreshold(n){this._minDiameter=Math.min(this._minDiameter,n.mag());const l=25/(Math.PI*this._minDiameter)*360,f=Qe(n,this._startVector);return Math.abs(f)<l}}function wt(v){return Math.abs(v.y)>Math.abs(v.x)}class ft extends ye{constructor(n){super(),this._currentTouchCount=0,this._map=n}reset(){super.reset(),this._valid=void 0,delete this._firstMove,delete this._lastPoints}touchstart(n,l,f){super.touchstart(n,l,f),this._currentTouchCount=f.length}_start(n){this._lastPoints=n,wt(n[0].sub(n[1]))&&(this._valid=!1)}_move(n,l,f){if(this._map.cooperativeGestures.isEnabled()&&this._currentTouchCount<3)return;const p=n[0].sub(this._lastPoints[0]),_=n[1].sub(this._lastPoints[1]);return this._valid=this.gestureBeginsVertically(p,_,f.timeStamp),this._valid?(this._lastPoints=n,this._active=!0,{pitchDelta:(p.y+_.y)/2*-.5}):void 0}gestureBeginsVertically(n,l,f){if(this._valid!==void 0)return this._valid;const p=n.mag()>=2,_=l.mag()>=2;if(!p&&!_)return;if(!p||!_)return this._firstMove===void 0&&(this._firstMove=f),f-this._firstMove<100&&void 0;const S=n.y>0==l.y>0;return wt(n)&&wt(l)&&S}}const Ot={panStep:100,bearingStep:15,pitchStep:10};class Pt{constructor(n){this._tr=new hc(n);const l=Ot;this._panStep=l.panStep,this._bearingStep=l.bearingStep,this._pitchStep=l.pitchStep,this._rotationDisabled=!1}reset(){this._active=!1}keydown(n){if(n.altKey||n.ctrlKey||n.metaKey)return;let l=0,f=0,p=0,_=0,S=0;switch(n.keyCode){case 61:case 107:case 171:case 187:l=1;break;case 189:case 109:case 173:l=-1;break;case 37:n.shiftKey?f=-1:(n.preventDefault(),_=-1);break;case 39:n.shiftKey?f=1:(n.preventDefault(),_=1);break;case 38:n.shiftKey?p=1:(n.preventDefault(),S=-1);break;case 40:n.shiftKey?p=-1:(n.preventDefault(),S=1);break;default:return}return this._rotationDisabled&&(f=0,p=0),{cameraAnimation:P=>{const M=this._tr;P.easeTo({duration:300,easeId:"keyboardHandler",easing:ut,zoom:l?Math.round(M.zoom)+l*(n.shiftKey?2:1):M.zoom,bearing:M.bearing+f*this._bearingStep,pitch:M.pitch+p*this._pitchStep,offset:[-_*this._panStep,-S*this._panStep],center:M.center},{originalEvent:n})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function ut(v){return v*(2-v)}const Ye=4.000244140625,Dt=1/450;class Zt{constructor(n,l){this._onTimeout=f=>{this._type="wheel",this._delta-=this._lastValue,this._active||this._start(f)},this._map=n,this._tr=new hc(n),this._triggerRenderFrame=l,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=Dt}setZoomRate(n){this._defaultZoomRate=n}setWheelZoomRate(n){this._wheelZoomRate=n}isEnabled(){return!!this._enabled}isActive(){return!!this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(n){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!n&&n.around==="center")}disable(){this.isEnabled()&&(this._enabled=!1)}_shouldBePrevented(n){return!!this._map.cooperativeGestures.isEnabled()&&!(n.ctrlKey||this._map.cooperativeGestures.isBypassed(n))}wheel(n){if(!this.isEnabled())return;if(this._shouldBePrevented(n))return void this._map.cooperativeGestures.notifyGestureBlocked("wheel_zoom",n);let l=n.deltaMode===WheelEvent.DOM_DELTA_LINE?40*n.deltaY:n.deltaY;const f=F.now(),p=f-(this._lastWheelEventTime||0);this._lastWheelEventTime=f,l!==0&&l%Ye==0?this._type="wheel":l!==0&&Math.abs(l)<4?this._type="trackpad":p>400?(this._type=null,this._lastValue=l,this._timeout=setTimeout(this._onTimeout,40,n)):this._type||(this._type=Math.abs(p*l)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,l+=this._lastValue)),n.shiftKey&&l&&(l/=4),this._type&&(this._lastWheelEvent=n,this._delta-=l,this._active||this._start(n)),n.preventDefault()}_start(n){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const l=b.mousePos(this._map.getCanvas(),n),f=this._tr;this._aroundPoint=this._aroundCenter?f.transform.locationToScreenPoint(o.S.convert(f.center)):l,this._frameId||(this._frameId=!0,this._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const n=this._tr.transform;if(typeof this._lastExpectedZoom=="number"){const P=n.zoom-this._lastExpectedZoom;typeof this._startZoom=="number"&&(this._startZoom+=P),typeof this._targetZoom=="number"&&(this._targetZoom+=P)}if(this._delta!==0){const P=this._type==="wheel"&&Math.abs(this._delta)>Ye?this._wheelZoomRate:this._defaultZoomRate;let M=2/(1+Math.exp(-Math.abs(this._delta*P)));this._delta<0&&M!==0&&(M=1/M);const z=typeof this._targetZoom!="number"?n.scale:o.ae(this._targetZoom);this._targetZoom=n.getConstrained(n.getCameraLngLat(),o.aj(z*M)).zoom,this._type==="wheel"&&(this._startZoom=n.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}const l=typeof this._targetZoom!="number"?n.zoom:this._targetZoom,f=this._startZoom,p=this._easing;let _,S=!1;if(this._type==="wheel"&&f&&p){const P=F.now()-this._lastWheelEventTime,M=Math.min((P+5)/200,1),z=p(M);_=o.C.number(f,l,z),M<1?this._frameId||(this._frameId=!0):S=!0}else _=l,S=!0;return this._active=!0,S&&(this._active=!1,this._finishTimeout=setTimeout(()=>{this._zooming=!1,this._triggerRenderFrame(),delete this._targetZoom,delete this._lastExpectedZoom,delete this._finishTimeout},200)),this._lastExpectedZoom=_,{noInertia:!0,needsRenderFrame:!S,zoomDelta:_-n.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}_smoothOutEasing(n){let l=o.cn;if(this._prevEase){const f=this._prevEase,p=(F.now()-f.start)/f.duration,_=f.easing(p+.01)-f.easing(p),S=.27/Math.sqrt(_*_+1e-4)*.01,P=Math.sqrt(.0729-S*S);l=o.cl(S,P,.25,1)}return this._prevEase={start:F.now(),duration:n,easing:l},l}reset(){this._active=!1,this._zooming=!1,delete this._targetZoom,delete this._lastExpectedZoom,this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout)}}class zt{constructor(n,l){this._clickZoom=n,this._tapZoom=l}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class xr{constructor(n){this._tr=new hc(n),this.reset()}reset(){this._active=!1}dblclick(n,l){return n.preventDefault(),{cameraAnimation:f=>{f.easeTo({duration:300,zoom:this._tr.zoom+(n.shiftKey?-1:1),around:this._tr.unproject(l)},{originalEvent:n})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class dr{constructor(){this._tap=new du({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,delete this._tapPoint,this._tap.reset()}touchstart(n,l,f){if(!this._swipePoint)if(this._tapTime){const p=l[0],_=n.timeStamp-this._tapTime<500,S=this._tapPoint.dist(p)<30;_&&S?f.length>0&&(this._swipePoint=p,this._swipeTouch=f[0].identifier):this.reset()}else this._tap.touchstart(n,l,f)}touchmove(n,l,f){if(this._tapTime){if(this._swipePoint){if(f[0].identifier!==this._swipeTouch)return;const p=l[0],_=p.y-this._swipePoint.y;return this._swipePoint=p,n.preventDefault(),this._active=!0,{zoomDelta:_/128}}}else this._tap.touchmove(n,l,f)}touchend(n,l,f){if(this._tapTime)this._swipePoint&&f.length===0&&this.reset();else{const p=this._tap.touchend(n,l,f);p&&(this._tapTime=n.timeStamp,this._tapPoint=p)}}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Or{constructor(n,l,f){this._el=n,this._mousePan=l,this._touchPan=f}enable(n){this._inertiaOptions=n||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("maplibregl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("maplibregl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class fr{constructor(n,l,f,p){this._pitchWithRotate=n.pitchWithRotate,this._rollEnabled=n.rollEnabled,this._mouseRotate=l,this._mousePitch=f,this._mouseRoll=p}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable(),this._rollEnabled&&this._mouseRoll.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable(),this._mouseRoll.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())&&(!this._rollEnabled||this._mouseRoll.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()||this._mouseRoll.isActive()}}class Cn{constructor(n,l,f,p){this._el=n,this._touchZoom=l,this._touchRotate=f,this._tapDragZoom=p,this._rotationDisabled=!1,this._enabled=!0}enable(n){this._touchZoom.enable(n),this._rotationDisabled||this._touchRotate.enable(n),this._tapDragZoom.enable(),this._el.classList.add("maplibregl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("maplibregl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}class Mn{constructor(n,l){this._bypassKey=navigator.userAgent.indexOf("Mac")!==-1?"metaKey":"ctrlKey",this._map=n,this._options=l,this._enabled=!1}isActive(){return!1}reset(){}_setupUI(){if(this._container)return;const n=this._map.getCanvasContainer();n.classList.add("maplibregl-cooperative-gestures"),this._container=b.create("div","maplibregl-cooperative-gesture-screen",n);let l=this._map._getUIString("CooperativeGesturesHandler.WindowsHelpText");this._bypassKey==="metaKey"&&(l=this._map._getUIString("CooperativeGesturesHandler.MacHelpText"));const f=this._map._getUIString("CooperativeGesturesHandler.MobileHelpText"),p=document.createElement("div");p.className="maplibregl-desktop-message",p.textContent=l,this._container.appendChild(p);const _=document.createElement("div");_.className="maplibregl-mobile-message",_.textContent=f,this._container.appendChild(_),this._container.setAttribute("aria-hidden","true")}_destroyUI(){this._container&&(b.remove(this._container),this._map.getCanvasContainer().classList.remove("maplibregl-cooperative-gestures")),delete this._container}enable(){this._setupUI(),this._enabled=!0}disable(){this._enabled=!1,this._destroyUI()}isEnabled(){return this._enabled}isBypassed(n){return n[this._bypassKey]}notifyGestureBlocked(n,l){this._enabled&&(this._map.fire(new o.l("cooperativegestureprevented",{gestureType:n,originalEvent:l})),this._container.classList.add("maplibregl-show"),setTimeout(()=>{this._container.classList.remove("maplibregl-show")},100))}}const pn=v=>v.zoom||v.drag||v.roll||v.pitch||v.rotate;class vn extends o.l{}function Nn(v){return v.panDelta&&v.panDelta.mag()||v.zoomDelta||v.bearingDelta||v.pitchDelta||v.rollDelta}class wn{constructor(n,l){this.handleWindowEvent=p=>{this.handleEvent(p,`${p.type}Window`)},this.handleEvent=(p,_)=>{if(p.type==="blur")return void this.stop(!0);this._updatingCamera=!0;const S=p.type==="renderFrame"?void 0:p,P={needsRenderFrame:!1},M={},z={};for(const{handlerName:$,handler:Y,allowed:he}of this._handlers){if(!Y.isEnabled())continue;let Ie;if(this._blockedByActive(z,he,$))Y.reset();else if(Y[_||p.type]){if(o.co(p,_||p.type)){const Ee=b.mousePos(this._map.getCanvas(),p);Ie=Y[_||p.type](p,Ee)}else if(o.cp(p,_||p.type)){const Ee=this._getMapTouches(p.touches),Fe=b.touchPos(this._map.getCanvas(),Ee);Ie=Y[_||p.type](p,Fe,Ee)}else o.cq(_||p.type)||(Ie=Y[_||p.type](p));this.mergeHandlerResult(P,M,Ie,$,S),Ie&&Ie.needsRenderFrame&&this._triggerRenderFrame()}(Ie||Y.isActive())&&(z[$]=Y)}const K={};for(const $ in this._previousActiveHandlers)z[$]||(K[$]=S);this._previousActiveHandlers=z,(Object.keys(K).length||Nn(P))&&(this._changes.push([P,M,K]),this._triggerRenderFrame()),(Object.keys(z).length||Nn(P))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:Z}=P;Z&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],Z(this._map))},this._map=n,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new hu(n),this._bearingSnap=l.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(l);const f=this._el;this._listeners=[[f,"touchstart",{passive:!0}],[f,"touchmove",{passive:!1}],[f,"touchend",void 0],[f,"touchcancel",void 0],[f,"mousedown",void 0],[f,"mousemove",void 0],[f,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[f,"mouseover",void 0],[f,"mouseout",void 0],[f,"dblclick",void 0],[f,"click",void 0],[f,"keydown",{capture:!1}],[f,"keyup",void 0],[f,"wheel",{passive:!1}],[f,"contextmenu",void 0],[window,"blur",void 0]];for(const[p,_,S]of this._listeners)b.addEventListener(p,_,p===document?this.handleWindowEvent:this.handleEvent,S)}destroy(){for(const[n,l,f]of this._listeners)b.removeEventListener(n,l,n===document?this.handleWindowEvent:this.handleEvent,f)}_addDefaultHandlers(n){const l=this._map,f=l.getCanvasContainer();this._add("mapEvent",new Bf(l,n));const p=l.boxZoom=new md(l,n);this._add("boxZoom",p),n.interactive&&n.boxZoom&&p.enable();const _=l.cooperativeGestures=new Mn(l,n.cooperativeGestures);this._add("cooperativeGestures",_),n.cooperativeGestures&&_.enable();const S=new wA(l),P=new xr(l);l.doubleClickZoom=new zt(P,S),this._add("tapZoom",S),this._add("clickZoom",P),n.interactive&&n.doubleClickZoom&&l.doubleClickZoom.enable();const M=new dr;this._add("tapDragZoom",M);const z=l.touchPitch=new ft(l);this._add("touchPitch",z),n.interactive&&n.touchPitch&&l.touchPitch.enable(n.touchPitch);const K=()=>l.project(l.getCenter()),Z=function({enable:Oe,clickTolerance:We,aroundCenter:Je=!0,minPixelCenterThreshold:ze=100,rotateDegreesPerPixelMoved:ht=.8},St){const gt=new T({checkCorrectEvent:_t=>b.mouseButton(_t)===0&&_t.ctrlKey||b.mouseButton(_t)===2&&!_t.ctrlKey});return new dc({clickTolerance:We,move:(_t,xt)=>{const ir=St();if(Je&&Math.abs(ir.y-_t.y)>ze)return{bearingDelta:o.cm(new o.P(_t.x,xt.y),xt,ir)};let rr=(xt.x-_t.x)*ht;return Je&&xt.y<ir.y&&(rr=-rr),{bearingDelta:rr}},moveStateManager:gt,enable:Oe,assignEvents:le})}(n,K),$=function({enable:Oe,clickTolerance:We,pitchDegreesPerPixelMoved:Je=-.5}){const ze=new T({checkCorrectEvent:ht=>b.mouseButton(ht)===0&&ht.ctrlKey||b.mouseButton(ht)===2});return new dc({clickTolerance:We,move:(ht,St)=>({pitchDelta:(St.y-ht.y)*Je}),moveStateManager:ze,enable:Oe,assignEvents:le})}(n),Y=function({enable:Oe,clickTolerance:We,rollDegreesPerPixelMoved:Je=.3},ze){const ht=new T({checkCorrectEvent:St=>b.mouseButton(St)===2&&St.ctrlKey});return new dc({clickTolerance:We,move:(St,gt)=>{const _t=ze();let xt=(gt.x-St.x)*Je;return gt.y<_t.y&&(xt=-xt),{rollDelta:xt}},moveStateManager:ht,enable:Oe,assignEvents:le})}(n,K);l.dragRotate=new fr(n,Z,$,Y),this._add("mouseRotate",Z,["mousePitch"]),this._add("mousePitch",$,["mouseRotate","mouseRoll"]),this._add("mouseRoll",Y,["mousePitch"]),n.interactive&&n.dragRotate&&l.dragRotate.enable();const he=function({enable:Oe,clickTolerance:We}){const Je=new T({checkCorrectEvent:ze=>b.mouseButton(ze)===0&&!ze.ctrlKey});return new dc({clickTolerance:We,move:(ze,ht)=>({around:ht,panDelta:ht.sub(ze)}),activateOnStart:!0,moveStateManager:Je,enable:Oe,assignEvents:le})}(n),Ie=new ge(n,l);l.dragPan=new Or(f,he,Ie),this._add("mousePan",he),this._add("touchPan",Ie,["touchZoom","touchRotate"]),n.interactive&&n.dragPan&&l.dragPan.enable(n.dragPan);const Ee=new Bt,Fe=new ke;l.touchZoomRotate=new Cn(f,Fe,Ee,M),this._add("touchRotate",Ee,["touchPan","touchZoom"]),this._add("touchZoom",Fe,["touchPan","touchRotate"]),n.interactive&&n.touchZoomRotate&&l.touchZoomRotate.enable(n.touchZoomRotate);const De=l.scrollZoom=new Zt(l,()=>this._triggerRenderFrame());this._add("scrollZoom",De,["mousePan"]),n.interactive&&n.scrollZoom&&l.scrollZoom.enable(n.scrollZoom);const Ve=l.keyboard=new Pt(l);this._add("keyboard",Ve),n.interactive&&n.keyboard&&l.keyboard.enable(),this._add("blockableMapEvent",new Cf(l))}_add(n,l,f){this._handlers.push({handlerName:n,handler:l,allowed:f}),this._handlersById[n]=l}stop(n){if(!this._updatingCamera){for(const{handler:l}of this._handlers)l.reset();this._inertia.clear(),this._fireEvents({},{},n),this._changes=[]}}isActive(){for(const{handler:n}of this._handlers)if(n.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!pn(this._eventsInProgress)||this.isZooming()}_blockedByActive(n,l,f){for(const p in n)if(p!==f&&(!l||l.indexOf(p)<0))return!0;return!1}_getMapTouches(n){const l=[];for(const f of n)this._el.contains(f.target)&&l.push(f);return l}mergeHandlerResult(n,l,f,p,_){if(!f)return;o.e(n,f);const S={handlerName:p,originalEvent:f.originalEvent||_};f.zoomDelta!==void 0&&(l.zoom=S),f.panDelta!==void 0&&(l.drag=S),f.rollDelta!==void 0&&(l.roll=S),f.pitchDelta!==void 0&&(l.pitch=S),f.bearingDelta!==void 0&&(l.rotate=S)}_applyChanges(){const n={},l={},f={};for(const[p,_,S]of this._changes)p.panDelta&&(n.panDelta=(n.panDelta||new o.P(0,0))._add(p.panDelta)),p.zoomDelta&&(n.zoomDelta=(n.zoomDelta||0)+p.zoomDelta),p.bearingDelta&&(n.bearingDelta=(n.bearingDelta||0)+p.bearingDelta),p.pitchDelta&&(n.pitchDelta=(n.pitchDelta||0)+p.pitchDelta),p.rollDelta&&(n.rollDelta=(n.rollDelta||0)+p.rollDelta),p.around!==void 0&&(n.around=p.around),p.pinchAround!==void 0&&(n.pinchAround=p.pinchAround),p.noInertia&&(n.noInertia=p.noInertia),o.e(l,_),o.e(f,S);this._updateMapTransform(n,l,f),this._changes=[]}_updateMapTransform(n,l,f){const p=this._map,_=p._getTransformForUpdate(),S=p.terrain;if(!(Nn(n)||S&&this._terrainMovement))return this._fireEvents(l,f,!0);p._stop(!0);let{panDelta:P,zoomDelta:M,bearingDelta:z,pitchDelta:K,rollDelta:Z,around:$,pinchAround:Y}=n;Y!==void 0&&($=Y),$=$||p.transform.centerPoint,S&&!_.isPointOnMapSurface($)&&($=_.centerPoint);const he={panDelta:P,zoomDelta:M,rollDelta:Z,pitchDelta:K,bearingDelta:z,around:$};this._map.cameraHelper.useGlobeControls&&!_.isPointOnMapSurface($)&&($=_.centerPoint);const Ie=$.distSqr(_.centerPoint)<.01?_.center:_.screenPointToLocation(P?$.sub(P):$);S?(this._map.cameraHelper.handleMapControlsRollPitchBearingZoom(he,_),this._terrainMovement||!l.drag&&!l.zoom?l.drag&&this._terrainMovement?_.setCenter(_.screenPointToLocation(_.centerPoint.sub(P))):this._map.cameraHelper.handleMapControlsPan(he,_,Ie):(this._terrainMovement=!0,this._map._elevationFreeze=!0,this._map.cameraHelper.handleMapControlsPan(he,_,Ie))):(this._map.cameraHelper.handleMapControlsRollPitchBearingZoom(he,_),this._map.cameraHelper.handleMapControlsPan(he,_,Ie)),p._applyUpdatedTransform(_),this._map._update(),n.noInertia||this._inertia.record(n),this._fireEvents(l,f,!0)}_fireEvents(n,l,f){const p=pn(this._eventsInProgress),_=pn(n),S={};for(const Z in n){const{originalEvent:$}=n[Z];this._eventsInProgress[Z]||(S[`${Z}start`]=$),this._eventsInProgress[Z]=n[Z]}!p&&_&&this._fireEvent("movestart",_.originalEvent);for(const Z in S)this._fireEvent(Z,S[Z]);_&&this._fireEvent("move",_.originalEvent);for(const Z in n){const{originalEvent:$}=n[Z];this._fireEvent(Z,$)}const P={};let M;for(const Z in this._eventsInProgress){const{handlerName:$,originalEvent:Y}=this._eventsInProgress[Z];this._handlersById[$].isActive()||(delete this._eventsInProgress[Z],M=l[$]||Y,P[`${Z}end`]=M)}for(const Z in P)this._fireEvent(Z,P[Z]);const z=pn(this._eventsInProgress),K=(p||_)&&!z;if(K&&this._terrainMovement){this._map._elevationFreeze=!1,this._terrainMovement=!1;const Z=this._map._getTransformForUpdate();this._map.getCenterClampedToGround()&&Z.recalculateZoomAndCenter(this._map.terrain),this._map._applyUpdatedTransform(Z)}if(f&&K){this._updatingCamera=!0;const Z=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),$=Y=>Y!==0&&-this._bearingSnap<Y&&Y<this._bearingSnap;!Z||!Z.essential&&F.prefersReducedMotion?(this._map.fire(new o.l("moveend",{originalEvent:M})),$(this._map.getBearing())&&this._map.resetNorth()):($(Z.bearing||this._map.getBearing())&&(Z.bearing=0),Z.freezeElevation=!0,this._map.easeTo(Z,{originalEvent:M})),this._updatingCamera=!1}}_fireEvent(n,l){this._map.fire(new o.l(n,l?{originalEvent:l}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(n=>{delete this._frameId,this.handleEvent(new vn("renderFrame",{timeStamp:n})),this._applyChanges()})}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}class Er extends o.E{constructor(n,l,f){super(),this._renderFrameCallback=()=>{const p=Math.min((F.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(p)),p<1&&this._easeFrameId?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},this._moving=!1,this._zooming=!1,this.transform=n,this._bearingSnap=f.bearingSnap,this.cameraHelper=l,this.on("moveend",()=>{delete this._requestedCameraState})}migrateProjection(n,l){n.apply(this.transform),this.transform=n,this.cameraHelper=l}getCenter(){return new o.S(this.transform.center.lng,this.transform.center.lat)}setCenter(n,l){return this.jumpTo({center:n},l)}getCenterElevation(){return this.transform.elevation}setCenterElevation(n,l){return this.jumpTo({elevation:n},l),this}getCenterClampedToGround(){return this._centerClampedToGround}setCenterClampedToGround(n){this._centerClampedToGround=n}panBy(n,l,f){return n=o.P.convert(n).mult(-1),this.panTo(this.transform.center,o.e({offset:n},l),f)}panTo(n,l,f){return this.easeTo(o.e({center:n},l),f)}getZoom(){return this.transform.zoom}setZoom(n,l){return this.jumpTo({zoom:n},l),this}zoomTo(n,l,f){return this.easeTo(o.e({zoom:n},l),f)}zoomIn(n,l){return this.zoomTo(this.getZoom()+1,n,l),this}zoomOut(n,l){return this.zoomTo(this.getZoom()-1,n,l),this}getVerticalFieldOfView(){return this.transform.fov}setVerticalFieldOfView(n,l){return n!=this.transform.fov&&(this.transform.setFov(n),this.fire(new o.l("movestart",l)).fire(new o.l("move",l)).fire(new o.l("moveend",l))),this}getBearing(){return this.transform.bearing}setBearing(n,l){return this.jumpTo({bearing:n},l),this}getPadding(){return this.transform.padding}setPadding(n,l){return this.jumpTo({padding:n},l),this}rotateTo(n,l,f){return this.easeTo(o.e({bearing:n},l),f)}resetNorth(n,l){return this.rotateTo(0,o.e({duration:1e3},n),l),this}resetNorthPitch(n,l){return this.easeTo(o.e({bearing:0,pitch:0,roll:0,duration:1e3},n),l),this}snapToNorth(n,l){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(n,l):this}getPitch(){return this.transform.pitch}setPitch(n,l){return this.jumpTo({pitch:n},l),this}getRoll(){return this.transform.roll}setRoll(n,l){return this.jumpTo({roll:n},l),this}cameraForBounds(n,l){n=jt.convert(n).adjustAntiMeridian();const f=l&&l.bearing||0;return this._cameraForBoxAndBearing(n.getNorthWest(),n.getSouthEast(),f,l)}_cameraForBoxAndBearing(n,l,f,p){const _={top:0,bottom:0,right:0,left:0};if(typeof(p=o.e({padding:_,offset:[0,0],maxZoom:this.transform.maxZoom},p)).padding=="number"){const z=p.padding;p.padding={top:z,bottom:z,right:z,left:z}}const S=o.e(_,p.padding);p.padding=S;const P=this.transform,M=new jt(n,l);return this.cameraHelper.cameraForBoxAndBearing(p,S,M,f,P)}fitBounds(n,l,f){return this._fitInternal(this.cameraForBounds(n,l),l,f)}fitScreenCoordinates(n,l,f,p,_){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.screenPointToLocation(o.P.convert(n)),this.transform.screenPointToLocation(o.P.convert(l)),f,p),p,_)}_fitInternal(n,l,f){return n?(delete(l=o.e(n,l)).padding,l.linear?this.easeTo(l,f):this.flyTo(l,f)):this}jumpTo(n,l){this.stop();const f=this._getTransformForUpdate();let p=!1,_=!1,S=!1;const P=f.zoom;this.cameraHelper.handleJumpToCenterZoom(f,n);const M=f.zoom!==P;return"elevation"in n&&f.elevation!==+n.elevation&&f.setElevation(+n.elevation),"bearing"in n&&f.bearing!==+n.bearing&&(p=!0,f.setBearing(+n.bearing)),"pitch"in n&&f.pitch!==+n.pitch&&(_=!0,f.setPitch(+n.pitch)),"roll"in n&&f.roll!==+n.roll&&(S=!0,f.setRoll(+n.roll)),n.padding==null||f.isPaddingEqual(n.padding)||f.setPadding(n.padding),this._applyUpdatedTransform(f),this.fire(new o.l("movestart",l)).fire(new o.l("move",l)),M&&this.fire(new o.l("zoomstart",l)).fire(new o.l("zoom",l)).fire(new o.l("zoomend",l)),p&&this.fire(new o.l("rotatestart",l)).fire(new o.l("rotate",l)).fire(new o.l("rotateend",l)),_&&this.fire(new o.l("pitchstart",l)).fire(new o.l("pitch",l)).fire(new o.l("pitchend",l)),S&&this.fire(new o.l("rollstart",l)).fire(new o.l("roll",l)).fire(new o.l("rollend",l)),this.fire(new o.l("moveend",l))}calculateCameraOptionsFromTo(n,l,f,p=0){const _=o.a0.fromLngLat(n,l),S=o.a0.fromLngLat(f,p),P=S.x-_.x,M=S.y-_.y,z=S.z-_.z,K=Math.hypot(P,M,z);if(K===0)throw new Error("Can't calculate camera options with same From and To");const Z=Math.hypot(P,M),$=o.aj(this.transform.cameraToCenterDistance/K/this.transform.tileSize),Y=180*Math.atan2(P,-M)/Math.PI;let he=180*Math.acos(Z/K)/Math.PI;return he=z<0?90-he:90+he,{center:S.toLngLat(),elevation:p,zoom:$,pitch:he,bearing:Y}}calculateCameraOptionsFromCameraLngLatAltRotation(n,l,f,p,_){const S=this.transform.calculateCenterFromCameraLngLatAlt(n,l,f,p);return{center:S.center,elevation:S.elevation,zoom:S.zoom,bearing:f,pitch:p,roll:_}}easeTo(n,l){this._stop(!1,n.easeId),((n=o.e({offset:[0,0],duration:500,easing:o.cn},n)).animate===!1||!n.essential&&F.prefersReducedMotion)&&(n.duration=0);const f=this._getTransformForUpdate(),p=this.getBearing(),_=f.pitch,S=f.roll,P="bearing"in n?this._normalizeBearing(n.bearing,p):p,M="pitch"in n?+n.pitch:_,z="roll"in n?this._normalizeBearing(n.roll,S):S,K="padding"in n?n.padding:f.padding,Z=o.P.convert(n.offset);let $,Y;n.around&&($=o.S.convert(n.around),Y=f.locationToScreenPoint($));const he={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching,rolling:this._rolling},Ie=this.cameraHelper.handleEaseTo(f,{bearing:P,pitch:M,roll:z,padding:K,around:$,aroundPoint:Y,offsetAsPoint:Z,offset:n.offset,zoom:n.zoom,center:n.center});return this._rotating=this._rotating||p!==P,this._pitching=this._pitching||M!==_,this._rolling=this._rolling||z!==S,this._padding=!f.isPaddingEqual(K),this._zooming=this._zooming||Ie.isZooming,this._easeId=n.easeId,this._prepareEase(l,n.noMoveStart,he),this.terrain&&this._prepareElevation(Ie.elevationCenter),this._ease(Ee=>{Ie.easeFunc(Ee),this.terrain&&!n.freezeElevation&&this._updateElevation(Ee),this._applyUpdatedTransform(f),this._fireMoveEvents(l)},Ee=>{this.terrain&&n.freezeElevation&&this._finalizeElevation(),this._afterEase(l,Ee)},n),this}_prepareEase(n,l,f={}){this._moving=!0,l||f.moving||this.fire(new o.l("movestart",n)),this._zooming&&!f.zooming&&this.fire(new o.l("zoomstart",n)),this._rotating&&!f.rotating&&this.fire(new o.l("rotatestart",n)),this._pitching&&!f.pitching&&this.fire(new o.l("pitchstart",n)),this._rolling&&!f.rolling&&this.fire(new o.l("rollstart",n))}_prepareElevation(n){this._elevationCenter=n,this._elevationStart=this.transform.elevation,this._elevationTarget=this.terrain.getElevationForLngLatZoom(n,this.transform.tileZoom),this._elevationFreeze=!0}_updateElevation(n){this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom));const l=this.terrain.getElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);if(n<1&&l!==this._elevationTarget){const f=this._elevationTarget-this._elevationStart;this._elevationStart+=n*(f-(l-(f*n+this._elevationStart))/(1-n)),this._elevationTarget=l}this.transform.setElevation(o.C.number(this._elevationStart,this._elevationTarget,n))}_finalizeElevation(){this._elevationFreeze=!1,this.getCenterClampedToGround()&&this.transform.recalculateZoomAndCenter(this.terrain)}_getTransformForUpdate(){return this.transformCameraUpdate||this.terrain?(this._requestedCameraState||(this._requestedCameraState=this.transform.clone()),this._requestedCameraState):this.transform}_elevateCameraIfInsideTerrain(n){if(!this.terrain&&n.elevation>=0&&n.pitch<=90)return{};const l=n.getCameraLngLat(),f=n.getCameraAltitude(),p=this.terrain?this.terrain.getElevationForLngLatZoom(l,n.zoom):0;if(f<p){const _=this.calculateCameraOptionsFromTo(l,p,n.center,n.elevation);return{pitch:_.pitch,zoom:_.zoom}}return{}}_applyUpdatedTransform(n){const l=[];if(l.push(p=>this._elevateCameraIfInsideTerrain(p)),this.transformCameraUpdate&&l.push(p=>this.transformCameraUpdate(p)),!l.length)return;const f=n.clone();for(const p of l){const _=f.clone(),{center:S,zoom:P,roll:M,pitch:z,bearing:K,elevation:Z}=p(_);S&&_.setCenter(S),Z!==void 0&&_.setElevation(Z),P!==void 0&&_.setZoom(P),M!==void 0&&_.setRoll(M),z!==void 0&&_.setPitch(z),K!==void 0&&_.setBearing(K),f.apply(_)}this.transform.apply(f)}_fireMoveEvents(n){this.fire(new o.l("move",n)),this._zooming&&this.fire(new o.l("zoom",n)),this._rotating&&this.fire(new o.l("rotate",n)),this._pitching&&this.fire(new o.l("pitch",n)),this._rolling&&this.fire(new o.l("roll",n))}_afterEase(n,l){if(this._easeId&&l&&this._easeId===l)return;delete this._easeId;const f=this._zooming,p=this._rotating,_=this._pitching,S=this._rolling;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._rolling=!1,this._padding=!1,f&&this.fire(new o.l("zoomend",n)),p&&this.fire(new o.l("rotateend",n)),_&&this.fire(new o.l("pitchend",n)),S&&this.fire(new o.l("rollend",n)),this.fire(new o.l("moveend",n))}flyTo(n,l){if(!n.essential&&F.prefersReducedMotion){const xt=o.Q(n,["center","zoom","bearing","pitch","roll","elevation"]);return this.jumpTo(xt,l)}this.stop(),n=o.e({offset:[0,0],speed:1.2,curve:1.42,easing:o.cn},n);const f=this._getTransformForUpdate(),p=f.bearing,_=f.pitch,S=f.roll,P=f.padding,M="bearing"in n?this._normalizeBearing(n.bearing,p):p,z="pitch"in n?+n.pitch:_,K="roll"in n?this._normalizeBearing(n.roll,S):S,Z="padding"in n?n.padding:f.padding,$=o.P.convert(n.offset);let Y=f.centerPoint.add($);const he=f.screenPointToLocation(Y),Ie=this.cameraHelper.handleFlyTo(f,{bearing:M,pitch:z,roll:K,padding:Z,locationAtOffset:he,offsetAsPoint:$,center:n.center,minZoom:n.minZoom,zoom:n.zoom});let Ee=n.curve;const Fe=Math.max(f.width,f.height),De=Fe/Ie.scaleOfZoom,Ve=Ie.pixelPathLength;typeof Ie.scaleOfMinZoom=="number"&&(Ee=Math.sqrt(Fe/Ie.scaleOfMinZoom/Ve*2));const Oe=Ee*Ee;function We(xt){const ir=(De*De-Fe*Fe+(xt?-1:1)*Oe*Oe*Ve*Ve)/(2*(xt?De:Fe)*Oe*Ve);return Math.log(Math.sqrt(ir*ir+1)-ir)}function Je(xt){return(Math.exp(xt)-Math.exp(-xt))/2}function ze(xt){return(Math.exp(xt)+Math.exp(-xt))/2}const ht=We(!1);let St=function(xt){return ze(ht)/ze(ht+Ee*xt)},gt=function(xt){return Fe*((ze(ht)*(Je(ir=ht+Ee*xt)/ze(ir))-Je(ht))/Oe)/Ve;var ir},_t=(We(!0)-ht)/Ee;if(Math.abs(Ve)<2e-6||!isFinite(_t)){if(Math.abs(Fe-De)<1e-6)return this.easeTo(n,l);const xt=De<Fe?-1:1;_t=Math.abs(Math.log(De/Fe))/Ee,gt=()=>0,St=ir=>Math.exp(xt*Ee*ir)}return n.duration="duration"in n?+n.duration:1e3*_t/("screenSpeed"in n?+n.screenSpeed/Ee:+n.speed),n.maxDuration&&n.duration>n.maxDuration&&(n.duration=0),this._zooming=!0,this._rotating=p!==M,this._pitching=z!==_,this._rolling=K!==S,this._padding=!f.isPaddingEqual(Z),this._prepareEase(l,!1),this.terrain&&this._prepareElevation(Ie.targetCenter),this._ease(xt=>{const ir=xt*_t,rr=1/St(ir),Qt=gt(ir);this._rotating&&f.setBearing(o.C.number(p,M,xt)),this._pitching&&f.setPitch(o.C.number(_,z,xt)),this._rolling&&f.setRoll(o.C.number(S,K,xt)),this._padding&&(f.interpolatePadding(P,Z,xt),Y=f.centerPoint.add($)),Ie.easeFunc(xt,rr,Qt,Y),this.terrain&&!n.freezeElevation&&this._updateElevation(xt),this._applyUpdatedTransform(f),this._fireMoveEvents(l)},()=>{this.terrain&&n.freezeElevation&&this._finalizeElevation(),this._afterEase(l)},n),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(n,l){var f;if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){const p=this._onEaseEnd;delete this._onEaseEnd,p.call(this,l)}return n||(f=this.handlers)===null||f===void 0||f.stop(!1),this}_ease(n,l,f){f.animate===!1||f.duration===0?(n(1),l()):(this._easeStart=F.now(),this._easeOptions=f,this._onEaseFrame=n,this._onEaseEnd=l,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_normalizeBearing(n,l){n=o.aN(n,-180,180);const f=Math.abs(n-l);return Math.abs(n-360-l)<f&&(n-=360),Math.abs(n+360-l)<f&&(n+=360),n}queryTerrainElevation(n){return this.terrain?this.terrain.getElevationForLngLatZoom(o.S.convert(n),this.transform.tileZoom):null}}const si={compact:!0,customAttribution:'<a href="https://maplibre.org/" target="_blank">MapLibre</a>'};class fs{constructor(n=si){this._toggleAttribution=()=>{this._container.classList.contains("maplibregl-compact")&&(this._container.classList.contains("maplibregl-compact-show")?(this._container.setAttribute("open",""),this._container.classList.remove("maplibregl-compact-show")):(this._container.classList.add("maplibregl-compact-show"),this._container.removeAttribute("open")))},this._updateData=l=>{!l||l.sourceDataType!=="metadata"&&l.sourceDataType!=="visibility"&&l.dataType!=="style"&&l.type!=="terrain"||this._updateAttributions()},this._updateCompact=()=>{this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact===!1?this._container.setAttribute("open",""):this._container.classList.contains("maplibregl-compact")||this._container.classList.contains("maplibregl-attrib-empty")||(this._container.setAttribute("open",""),this._container.classList.add("maplibregl-compact","maplibregl-compact-show")):(this._container.setAttribute("open",""),this._container.classList.contains("maplibregl-compact")&&this._container.classList.remove("maplibregl-compact","maplibregl-compact-show"))},this._updateCompactMinimize=()=>{this._container.classList.contains("maplibregl-compact")&&this._container.classList.contains("maplibregl-compact-show")&&this._container.classList.remove("maplibregl-compact-show")},this.options=n}getDefaultPosition(){return"bottom-right"}onAdd(n){return this._map=n,this._compact=this.options.compact,this._container=b.create("details","maplibregl-ctrl maplibregl-ctrl-attrib"),this._compactButton=b.create("summary","maplibregl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=b.create("div","maplibregl-ctrl-attrib-inner",this._container),this._updateAttributions(),this._updateCompact(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("terrain",this._updateData),this._map.on("resize",this._updateCompact),this._map.on("drag",this._updateCompactMinimize),this._container}onRemove(){b.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("terrain",this._updateData),this._map.off("resize",this._updateCompact),this._map.off("drag",this._updateCompactMinimize),this._map=void 0,this._compact=void 0,this._attribHTML=void 0}_setElementTitle(n,l){const f=this._map._getUIString(`AttributionControl.${l}`);n.title=f,n.setAttribute("aria-label",f)}_updateAttributions(){if(!this._map.style)return;let n=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?n=n.concat(this.options.customAttribution.map(p=>typeof p!="string"?"":p)):typeof this.options.customAttribution=="string"&&n.push(this.options.customAttribution)),this._map.style.stylesheet){const p=this._map.style.stylesheet;this.styleOwner=p.owner,this.styleId=p.id}const l=this._map.style.sourceCaches;for(const p in l){const _=l[p];if(_.used||_.usedForTerrain){const S=_.getSource();S.attribution&&n.indexOf(S.attribution)<0&&n.push(S.attribution)}}n=n.filter(p=>String(p).trim()),n.sort((p,_)=>p.length-_.length),n=n.filter((p,_)=>{for(let S=_+1;S<n.length;S++)if(n[S].indexOf(p)>=0)return!1;return!0});const f=n.join(" | ");f!==this._attribHTML&&(this._attribHTML=f,n.length?(this._innerContainer.innerHTML=b.sanitize(f),this._container.classList.remove("maplibregl-attrib-empty")):this._container.classList.add("maplibregl-attrib-empty"),this._updateCompact(),this._editLink=null)}}class _i{constructor(n={}){this._updateCompact=()=>{const l=this._container.children;if(l.length){const f=l[0];this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact!==!1&&f.classList.add("maplibregl-compact"):f.classList.remove("maplibregl-compact")}},this.options=n}getDefaultPosition(){return"bottom-left"}onAdd(n){this._map=n,this._compact=this.options&&this.options.compact,this._container=b.create("div","maplibregl-ctrl");const l=b.create("a","maplibregl-ctrl-logo");return l.target="_blank",l.rel="noopener nofollow",l.href="https://maplibre.org/",l.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),l.setAttribute("rel","noopener nofollow"),this._container.appendChild(l),this._container.style.display="block",this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){b.remove(this._container),this._map.off("resize",this._updateCompact),this._map=void 0,this._compact=void 0}}class Hs{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(n){const l=++this._id;return this._queue.push({callback:n,id:l,cancelled:!1}),l}remove(n){const l=this._currentlyRunning,f=l?this._queue.concat(l):this._queue;for(const p of f)if(p.id===n)return void(p.cancelled=!0)}run(n=0){if(this._currentlyRunning)throw new Error("Attempting to run(), but is already running.");const l=this._currentlyRunning=this._queue;this._queue=[];for(const f of l)if(!f.cancelled&&(f.callback(n),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}var kn=o.aI([{name:"a_pos3d",type:"Int16",components:3}]);class vo extends o.E{constructor(n){super(),this._lastTilesetChange=F.now(),this.sourceCache=n,this._tiles={},this._renderableTilesKeys=[],this._sourceTileCache={},this.minzoom=0,this.maxzoom=22,this.deltaZoom=1,this.tileSize=n._source.tileSize*2**this.deltaZoom,n.usedForTerrain=!0,n.tileSize=this.tileSize}destruct(){this.sourceCache.usedForTerrain=!1,this.sourceCache.tileSize=null}update(n,l){this.sourceCache.update(n,l),this._renderableTilesKeys=[];const f={};for(const p of Ct(n,{tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,reparseOverscaled:!1,terrain:l,calculateTileZoom:this.sourceCache._source.calculateTileZoom}))f[p.key]=!0,this._renderableTilesKeys.push(p.key),this._tiles[p.key]||(p.terrainRttPosMatrix32f=new Float64Array(16),o.bX(p.terrainRttPosMatrix32f,0,o.$,o.$,0,0,1),this._tiles[p.key]=new un(p,this.tileSize),this._lastTilesetChange=F.now());for(const p in this._tiles)f[p]||delete this._tiles[p]}freeRtt(n){for(const l in this._tiles){const f=this._tiles[l];(!n||f.tileID.equals(n)||f.tileID.isChildOf(n)||n.isChildOf(f.tileID))&&(f.rtt=[])}}getRenderableTiles(){return this._renderableTilesKeys.map(n=>this.getTileByID(n))}getTileByID(n){return this._tiles[n]}getTerrainCoords(n,l){return l?this._getTerrainCoordsForTileRanges(n,l):this._getTerrainCoordsForRegularTile(n)}_getTerrainCoordsForRegularTile(n){const l={};for(const f of this._renderableTilesKeys){const p=this._tiles[f].tileID,_=n.clone(),S=o.b9();if(p.canonical.equals(n.canonical))o.bX(S,0,o.$,o.$,0,0,1);else if(p.canonical.isChildOf(n.canonical)){const P=p.canonical.z-n.canonical.z,M=p.canonical.x-(p.canonical.x>>P<<P),z=p.canonical.y-(p.canonical.y>>P<<P),K=o.$>>P;o.bX(S,0,K,K,0,0,1),o.M(S,S,[-M*K,-z*K,0])}else{if(!n.canonical.isChildOf(p.canonical))continue;{const P=n.canonical.z-p.canonical.z,M=n.canonical.x-(n.canonical.x>>P<<P),z=n.canonical.y-(n.canonical.y>>P<<P),K=o.$>>P;o.bX(S,0,o.$,o.$,0,0,1),o.M(S,S,[M*K,z*K,0]),o.N(S,S,[1/2**P,1/2**P,0])}}_.terrainRttPosMatrix32f=new Float32Array(S),l[f]=_}return l}_getTerrainCoordsForTileRanges(n,l){const f={};for(const p of this._renderableTilesKeys){const _=this._tiles[p].tileID;if(!this._isWithinTileRanges(_,l))continue;const S=n.clone(),P=o.b9();if(_.canonical.z===n.canonical.z){const M=n.canonical.x-_.canonical.x,z=n.canonical.y-_.canonical.y;o.bX(P,0,o.$,o.$,0,0,1),o.M(P,P,[M*o.$,z*o.$,0])}else if(_.canonical.z>n.canonical.z){const M=_.canonical.z-n.canonical.z,z=_.canonical.x-(_.canonical.x>>M<<M),K=_.canonical.y-(_.canonical.y>>M<<M),Z=n.canonical.x-(_.canonical.x>>M),$=n.canonical.y-(_.canonical.y>>M),Y=o.$>>M;o.bX(P,0,Y,Y,0,0,1),o.M(P,P,[-z*Y+Z*o.$,-K*Y+$*o.$,0])}else{const M=n.canonical.z-_.canonical.z,z=n.canonical.x-(n.canonical.x>>M<<M),K=n.canonical.y-(n.canonical.y>>M<<M),Z=(n.canonical.x>>M)-_.canonical.x,$=(n.canonical.y>>M)-_.canonical.y,Y=o.$<<M;o.bX(P,0,Y,Y,0,0,1),o.M(P,P,[z*o.$+Z*Y,K*o.$+$*Y,0])}S.terrainRttPosMatrix32f=new Float32Array(P),f[p]=S}return f}getSourceTile(n,l){const f=this.sourceCache._source;let p=n.overscaledZ-this.deltaZoom;if(p>f.maxzoom&&(p=f.maxzoom),p<f.minzoom)return null;this._sourceTileCache[n.key]||(this._sourceTileCache[n.key]=n.scaledTo(p).key);let _=this.sourceCache.getTileByID(this._sourceTileCache[n.key]);if((!_||!_.dem)&&l)for(;p>=f.minzoom&&(!_||!_.dem);)_=this.sourceCache.getTileByID(n.scaledTo(p--).key);return _}anyTilesAfterTime(n=Date.now()){return this._lastTilesetChange>=n}_isWithinTileRanges(n,l){return l[n.canonical.z]&&n.canonical.x>=l[n.canonical.z].minTileX&&n.canonical.x<=l[n.canonical.z].maxTileX&&n.canonical.y>=l[n.canonical.z].minTileY&&n.canonical.y<=l[n.canonical.z].maxTileY}}class wi{constructor(n,l,f){this._meshCache={},this.painter=n,this.sourceCache=new vo(l),this.options=f,this.exaggeration=typeof f.exaggeration=="number"?f.exaggeration:1,this.qualityFactor=2,this.meshSize=128,this._demMatrixCache={},this.coordsIndex=[],this._coordsTextureSize=1024}getDEMElevation(n,l,f,p=o.$){var _;if(!(l>=0&&l<p&&f>=0&&f<p))return 0;const S=this.getTerrainData(n),P=(_=S.tile)===null||_===void 0?void 0:_.dem;if(!P)return 0;const M=o.cr([],[l/p*o.$,f/p*o.$],S.u_terrain_matrix),z=[M[0]*P.dim,M[1]*P.dim],K=Math.floor(z[0]),Z=Math.floor(z[1]),$=z[0]-K,Y=z[1]-Z;return P.get(K,Z)*(1-$)*(1-Y)+P.get(K+1,Z)*$*(1-Y)+P.get(K,Z+1)*(1-$)*Y+P.get(K+1,Z+1)*$*Y}getElevationForLngLatZoom(n,l){if(!o.cs(l,n.wrap()))return 0;const{tileID:f,mercatorX:p,mercatorY:_}=this._getOverscaledTileIDFromLngLatZoom(n,l);return this.getElevation(f,p%o.$,_%o.$,o.$)}getElevation(n,l,f,p=o.$){return this.getDEMElevation(n,l,f,p)*this.exaggeration}getTerrainData(n){if(!this._emptyDemTexture){const p=this.painter.context,_=new o.R({width:1,height:1},new Uint8Array(4));this._emptyDepthTexture=new o.T(p,_,p.gl.RGBA,{premultiply:!1}),this._emptyDemUnpack=[0,0,0,0],this._emptyDemTexture=new o.T(p,new o.R({width:1,height:1}),p.gl.RGBA,{premultiply:!1}),this._emptyDemTexture.bind(p.gl.NEAREST,p.gl.CLAMP_TO_EDGE),this._emptyDemMatrix=o.af([])}const l=this.sourceCache.getSourceTile(n,!0);if(l&&l.dem&&(!l.demTexture||l.needsTerrainPrepare)){const p=this.painter.context;l.demTexture=this.painter.getTileTexture(l.dem.stride),l.demTexture?l.demTexture.update(l.dem.getPixels(),{premultiply:!1}):l.demTexture=new o.T(p,l.dem.getPixels(),p.gl.RGBA,{premultiply:!1}),l.demTexture.bind(p.gl.NEAREST,p.gl.CLAMP_TO_EDGE),l.needsTerrainPrepare=!1}const f=l&&l+l.tileID.key+n.key;if(f&&!this._demMatrixCache[f]){const p=this.sourceCache.sourceCache._source.maxzoom;let _=n.canonical.z-l.tileID.canonical.z;n.overscaledZ>n.canonical.z&&(n.canonical.z>=p?_=n.canonical.z-p:o.w("cannot calculate elevation if elevation maxzoom > source.maxzoom"));const S=n.canonical.x-(n.canonical.x>>_<<_),P=n.canonical.y-(n.canonical.y>>_<<_),M=o.ct(new Float64Array(16),[1/(o.$<<_),1/(o.$<<_),0]);o.M(M,M,[S*o.$,P*o.$,0]),this._demMatrixCache[n.key]={matrix:M,coord:n}}return{u_depth:2,u_terrain:3,u_terrain_dim:l&&l.dem&&l.dem.dim||1,u_terrain_matrix:f?this._demMatrixCache[n.key].matrix:this._emptyDemMatrix,u_terrain_unpack:l&&l.dem&&l.dem.getUnpackVector()||this._emptyDemUnpack,u_terrain_exaggeration:this.exaggeration,texture:(l&&l.demTexture||this._emptyDemTexture).texture,depthTexture:(this._fboDepthTexture||this._emptyDepthTexture).texture,tile:l}}getFramebuffer(n){const l=this.painter,f=l.width/devicePixelRatio,p=l.height/devicePixelRatio;return!this._fbo||this._fbo.width===f&&this._fbo.height===p||(this._fbo.destroy(),this._fboCoordsTexture.destroy(),this._fboDepthTexture.destroy(),delete this._fbo,delete this._fboDepthTexture,delete this._fboCoordsTexture),this._fboCoordsTexture||(this._fboCoordsTexture=new o.T(l.context,{width:f,height:p,data:null},l.context.gl.RGBA,{premultiply:!1}),this._fboCoordsTexture.bind(l.context.gl.NEAREST,l.context.gl.CLAMP_TO_EDGE)),this._fboDepthTexture||(this._fboDepthTexture=new o.T(l.context,{width:f,height:p,data:null},l.context.gl.RGBA,{premultiply:!1}),this._fboDepthTexture.bind(l.context.gl.NEAREST,l.context.gl.CLAMP_TO_EDGE)),this._fbo||(this._fbo=l.context.createFramebuffer(f,p,!0,!1),this._fbo.depthAttachment.set(l.context.createRenderbuffer(l.context.gl.DEPTH_COMPONENT16,f,p))),this._fbo.colorAttachment.set(n==="coords"?this._fboCoordsTexture.texture:this._fboDepthTexture.texture),this._fbo}getCoordsTexture(){const n=this.painter.context;if(this._coordsTexture)return this._coordsTexture;const l=new Uint8Array(this._coordsTextureSize*this._coordsTextureSize*4);for(let _=0,S=0;_<this._coordsTextureSize;_++)for(let P=0;P<this._coordsTextureSize;P++,S+=4)l[S+0]=255&P,l[S+1]=255&_,l[S+2]=P>>8<<4|_>>8,l[S+3]=0;const f=new o.R({width:this._coordsTextureSize,height:this._coordsTextureSize},new Uint8Array(l.buffer)),p=new o.T(n,f,n.gl.RGBA,{premultiply:!1});return p.bind(n.gl.NEAREST,n.gl.CLAMP_TO_EDGE),this._coordsTexture=p,p}pointCoordinate(n){this.painter.maybeDrawDepthAndCoords(!0);const l=new Uint8Array(4),f=this.painter.context,p=f.gl,_=Math.round(n.x*this.painter.pixelRatio/devicePixelRatio),S=Math.round(n.y*this.painter.pixelRatio/devicePixelRatio),P=Math.round(this.painter.height/devicePixelRatio);f.bindFramebuffer.set(this.getFramebuffer("coords").framebuffer),p.readPixels(_,P-S-1,1,1,p.RGBA,p.UNSIGNED_BYTE,l),f.bindFramebuffer.set(null);const M=l[0]+(l[2]>>4<<8),z=l[1]+((15&l[2])<<8),K=this.coordsIndex[255-l[3]],Z=K&&this.sourceCache.getTileByID(K);if(!Z)return null;const $=this._coordsTextureSize,Y=(1<<Z.tileID.canonical.z)*$;return new o.a0((Z.tileID.canonical.x*$+M)/Y+Z.tileID.wrap,(Z.tileID.canonical.y*$+z)/Y,this.getElevation(Z.tileID,M,z,$))}depthAtPoint(n){const l=new Uint8Array(4),f=this.painter.context,p=f.gl;return f.bindFramebuffer.set(this.getFramebuffer("depth").framebuffer),p.readPixels(n.x,this.painter.height/devicePixelRatio-n.y-1,1,1,p.RGBA,p.UNSIGNED_BYTE,l),f.bindFramebuffer.set(null),(l[0]/16777216+l[1]/65536+l[2]/256+l[3])/256}getTerrainMesh(n){var l;const f=((l=this.painter.style.projection)===null||l===void 0?void 0:l.transitionState)>0,p=f&&n.canonical.y===0,_=f&&n.canonical.y===(1<<n.canonical.z)-1,S=`m_${p?"n":""}_${_?"s":""}`;if(this._meshCache[S])return this._meshCache[S];const P=this.painter.context,M=new o.cu,z=new o.aM,K=this.meshSize,Z=o.$/K,$=K*K;for(let ze=0;ze<=K;ze++)for(let ht=0;ht<=K;ht++)M.emplaceBack(ht*Z,ze*Z,0);for(let ze=0;ze<$;ze+=K+1)for(let ht=0;ht<K;ht++)z.emplaceBack(ht+ze,K+ht+ze+1,K+ht+ze+2),z.emplaceBack(ht+ze,K+ht+ze+2,ht+ze+1);const Y=M.length,he=Y+(K+1),Ie=(K+1)*K,Ee=p?o.bg:0,Fe=p?0:1,De=_?o.bh:o.$,Ve=_?0:1;for(let ze=0;ze<=K;ze++)M.emplaceBack(ze*Z,Ee,Fe);for(let ze=0;ze<=K;ze++)M.emplaceBack(ze*Z,De,Ve);for(let ze=0;ze<K;ze++)z.emplaceBack(Ie+ze,he+ze,he+ze+1),z.emplaceBack(Ie+ze,he+ze+1,Ie+ze+1),z.emplaceBack(0+ze,Y+ze+1,Y+ze),z.emplaceBack(0+ze,0+ze+1,Y+ze+1);const Oe=M.length,We=Oe+2*(K+1);for(const ze of[0,1])for(let ht=0;ht<=K;ht++)for(const St of[0,1])M.emplaceBack(ze*o.$,ht*Z,St);for(let ze=0;ze<2*K;ze+=2)z.emplaceBack(Oe+ze,Oe+ze+1,Oe+ze+3),z.emplaceBack(Oe+ze,Oe+ze+3,Oe+ze+2),z.emplaceBack(We+ze,We+ze+3,We+ze+1),z.emplaceBack(We+ze,We+ze+2,We+ze+3);const Je=new ia(P.createVertexBuffer(M,kn.members),P.createIndexBuffer(z),o.aL.simpleSegment(0,0,M.length,z.length));return this._meshCache[S]=Je,Je}getMeshFrameDelta(n){return 2*Math.PI*o.bt/Math.pow(2,Math.max(n,0))/5}getMinTileElevationForLngLatZoom(n,l){var f;const{tileID:p}=this._getOverscaledTileIDFromLngLatZoom(n,l);return(f=this.getMinMaxElevation(p).minElevation)!==null&&f!==void 0?f:0}getMinMaxElevation(n){const l=this.getTerrainData(n).tile,f={minElevation:null,maxElevation:null};return l&&l.dem&&(f.minElevation=l.dem.min*this.exaggeration,f.maxElevation=l.dem.max*this.exaggeration),f}_getOverscaledTileIDFromLngLatZoom(n,l){const f=o.a0.fromLngLat(n.wrap()),p=(1<<l)*o.$,_=f.x*p,S=f.y*p,P=Math.floor(_/o.$),M=Math.floor(S/o.$);return{tileID:new o.Z(l,0,l,P,M),mercatorX:_,mercatorY:S}}}class Fi{constructor(n,l,f){this._context=n,this._size=l,this._tileSize=f,this._objects=[],this._recentlyUsed=[],this._stamp=0}destruct(){for(const n of this._objects)n.texture.destroy(),n.fbo.destroy()}_createObject(n){const l=this._context.createFramebuffer(this._tileSize,this._tileSize,!0,!0),f=new o.T(this._context,{width:this._tileSize,height:this._tileSize,data:null},this._context.gl.RGBA);return f.bind(this._context.gl.LINEAR,this._context.gl.CLAMP_TO_EDGE),this._context.extTextureFilterAnisotropic&&this._context.gl.texParameterf(this._context.gl.TEXTURE_2D,this._context.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,this._context.extTextureFilterAnisotropicMax),l.depthAttachment.set(this._context.createRenderbuffer(this._context.gl.DEPTH_STENCIL,this._tileSize,this._tileSize)),l.colorAttachment.set(f.texture),{id:n,fbo:l,texture:f,stamp:-1,inUse:!1}}getObjectForId(n){return this._objects[n]}useObject(n){n.inUse=!0,this._recentlyUsed=this._recentlyUsed.filter(l=>n.id!==l),this._recentlyUsed.push(n.id)}stampObject(n){n.stamp=++this._stamp}getOrCreateFreeObject(){for(const l of this._recentlyUsed)if(!this._objects[l].inUse)return this._objects[l];if(this._objects.length>=this._size)throw new Error("No free RenderPool available, call freeAllObjects() required!");const n=this._createObject(this._objects.length);return this._objects.push(n),n}freeObject(n){n.inUse=!1}freeAllObjects(){for(const n of this._objects)this.freeObject(n)}isFull(){return!(this._objects.length<this._size)&&this._objects.some(n=>!n.inUse)===!1}}const sr={background:!0,fill:!0,line:!0,raster:!0,hillshade:!0,"color-relief":!0};class wr{constructor(n,l){this.painter=n,this.terrain=l,this.pool=new Fi(n.context,30,l.sourceCache.tileSize*l.qualityFactor)}destruct(){this.pool.destruct()}getTexture(n){return this.pool.getObjectForId(n.rtt[this._stacks.length-1].id).texture}prepareForRender(n,l){this._stacks=[],this._prevType=null,this._rttTiles=[],this._renderableTiles=this.terrain.sourceCache.getRenderableTiles(),this._renderableLayerIds=n._order.filter(f=>!n._layers[f].isHidden(l)),this._coordsAscending={};for(const f in n.sourceCaches){this._coordsAscending[f]={};const p=n.sourceCaches[f].getVisibleCoordinates(),_=n.sourceCaches[f].getSource(),S=_ instanceof Kt?_.terrainTileRanges:null;for(const P of p){const M=this.terrain.sourceCache.getTerrainCoords(P,S);for(const z in M)this._coordsAscending[f][z]||(this._coordsAscending[f][z]=[]),this._coordsAscending[f][z].push(M[z])}}this._coordsAscendingStr={};for(const f of n._order){const p=n._layers[f],_=p.source;if(sr[p.type]&&!this._coordsAscendingStr[_]){this._coordsAscendingStr[_]={};for(const S in this._coordsAscending[_])this._coordsAscendingStr[_][S]=this._coordsAscending[_][S].map(P=>P.key).sort().join()}}for(const f of this._renderableTiles)for(const p in this._coordsAscendingStr){const _=this._coordsAscendingStr[p][f.tileID.key];_&&_!==f.rttCoords[p]&&(f.rtt=[])}}renderLayer(n,l){if(n.isHidden(this.painter.transform.zoom))return!1;const f=Object.assign(Object.assign({},l),{isRenderingToTexture:!0}),p=n.type,_=this.painter,S=this._renderableLayerIds[this._renderableLayerIds.length-1]===n.id;if(sr[p]&&(this._prevType&&sr[this._prevType]||this._stacks.push([]),this._prevType=p,this._stacks[this._stacks.length-1].push(n.id),!S))return!0;if(sr[this._prevType]||sr[p]&&S){this._prevType=p;const P=this._stacks.length-1,M=this._stacks[P]||[];for(const z of this._renderableTiles){if(this.pool.isFull()&&(mi(this.painter,this.terrain,this._rttTiles,f),this._rttTiles=[],this.pool.freeAllObjects()),this._rttTiles.push(z),z.rtt[P]){const Z=this.pool.getObjectForId(z.rtt[P].id);if(Z.stamp===z.rtt[P].stamp){this.pool.useObject(Z);continue}}const K=this.pool.getOrCreateFreeObject();this.pool.useObject(K),this.pool.stampObject(K),z.rtt[P]={id:K.id,stamp:K.stamp},_.context.bindFramebuffer.set(K.fbo.framebuffer),_.context.clear({color:o.be.transparent,stencil:0}),_.currentStencilSource=void 0;for(let Z=0;Z<M.length;Z++){const $=_.style._layers[M[Z]],Y=$.source?this._coordsAscending[$.source][z.tileID.key]:[z.tileID];_.context.viewport.set([0,0,K.fbo.width,K.fbo.height]),_._renderTileClippingMasks($,Y,!0),_.renderLayer(_,_.style.sourceCaches[$.source],$,Y,f),$.source&&(z.rttCoords[$.source]=this._coordsAscendingStr[$.source][z.tileID.key])}}return mi(this.painter,this.terrain,this._rttTiles,f),this._rttTiles=[],this.pool.freeAllObjects(),sr[p]}return!1}}const js={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"MapLibre logo","Map.Title":"Map","Marker.Title":"Map marker","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","Popup.Close":"Close popup","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm","GlobeControl.Enable":"Enable globe","GlobeControl.Disable":"Disable globe","TerrainControl.Enable":"Enable terrain","TerrainControl.Disable":"Disable terrain","CooperativeGesturesHandler.WindowsHelpText":"Use Ctrl + scroll to zoom the map","CooperativeGesturesHandler.MacHelpText":"Use ⌘ + scroll to zoom the map","CooperativeGesturesHandler.MobileHelpText":"Use two fingers to move the map"},Qo=g,xi={hash:!1,interactive:!0,bearingSnap:7,attributionControl:si,maplibreLogo:!1,refreshExpiredTiles:!0,canvasContextAttributes:{antialias:!1,preserveDrawingBuffer:!1,powerPreference:"high-performance",failIfMajorPerformanceCaveat:!1,desynchronized:!1,contextType:void 0},scrollZoom:!0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:!1,trackResize:!0,center:[0,0],elevation:0,zoom:0,bearing:0,pitch:0,roll:0,renderWorldCopies:!0,maxTileCacheSize:null,maxTileCacheZoomLevels:o.a.MAX_TILE_CACHE_ZOOM_LEVELS,transformRequest:null,transformCameraUpdate:null,fadeDuration:300,crossSourceCollisions:!0,clickTolerance:3,localIdeographFontFamily:"sans-serif",pitchWithRotate:!0,rollEnabled:!1,validateStyle:!0,maxCanvasSize:[4096,4096],cancelPendingTileRequestsWhileZooming:!0,centerClampedToGround:!0},gi={showCompass:!0,showZoom:!0,visualizePitch:!1,visualizeRoll:!0};class Hl{constructor(n,l,f=!1){this.mousedown=_=>{this.startMove(_,b.mousePos(this.element,_)),b.addEventListener(window,"mousemove",this.mousemove),b.addEventListener(window,"mouseup",this.mouseup)},this.mousemove=_=>{this.move(_,b.mousePos(this.element,_))},this.mouseup=_=>{this._rotatePitchHanlder.dragEnd(_),this.offTemp()},this.touchstart=_=>{_.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=b.touchPos(this.element,_.targetTouches)[0],this.startMove(_,this._startPos),b.addEventListener(window,"touchmove",this.touchmove,{passive:!1}),b.addEventListener(window,"touchend",this.touchend))},this.touchmove=_=>{_.targetTouches.length!==1?this.reset():(this._lastPos=b.touchPos(this.element,_.targetTouches)[0],this.move(_,this._lastPos))},this.touchend=_=>{_.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),delete this._startPos,delete this._lastPos,this.offTemp()},this.reset=()=>{this._rotatePitchHanlder.reset(),delete this._startPos,delete this._lastPos,this.offTemp()},this._clickTolerance=10,this.element=l;const p=new q;this._rotatePitchHanlder=new dc({clickTolerance:3,move:(_,S)=>{const P=l.getBoundingClientRect(),M=new o.P((P.bottom-P.top)/2,(P.right-P.left)/2);return{bearingDelta:o.cm(new o.P(_.x,S.y),S,M),pitchDelta:f?-.5*(S.y-_.y):void 0}},moveStateManager:p,enable:!0,assignEvents:()=>{}}),this.map=n,b.addEventListener(l,"mousedown",this.mousedown),b.addEventListener(l,"touchstart",this.touchstart,{passive:!1}),b.addEventListener(l,"touchcancel",this.reset)}startMove(n,l){this._rotatePitchHanlder.dragStart(n,l),b.disableDrag()}move(n,l){const f=this.map,{bearingDelta:p,pitchDelta:_}=this._rotatePitchHanlder.dragMove(n,l)||{};p&&f.setBearing(f.getBearing()+p),_&&f.setPitch(f.getPitch()+_)}off(){const n=this.element;b.removeEventListener(n,"mousedown",this.mousedown),b.removeEventListener(n,"touchstart",this.touchstart,{passive:!1}),b.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),b.removeEventListener(window,"touchend",this.touchend),b.removeEventListener(n,"touchcancel",this.reset),this.offTemp()}offTemp(){b.enableDrag(),b.removeEventListener(window,"mousemove",this.mousemove),b.removeEventListener(window,"mouseup",this.mouseup),b.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),b.removeEventListener(window,"touchend",this.touchend)}}let bi;function dl(v,n,l,f=!1){if(f||!l.getCoveringTilesDetailsProvider().allowWorldCopies())return v==null?void 0:v.wrap();const p=new o.S(v.lng,v.lat);if(v=new o.S(v.lng,v.lat),n){const _=new o.S(v.lng-360,v.lat),S=new o.S(v.lng+360,v.lat),P=l.locationToScreenPoint(v).distSqr(n);l.locationToScreenPoint(_).distSqr(n)<P?v=_:l.locationToScreenPoint(S).distSqr(n)<P&&(v=S)}for(;Math.abs(v.lng-l.center.lng)>180;){const _=l.locationToScreenPoint(v);if(_.x>=0&&_.y>=0&&_.x<=l.width&&_.y<=l.height)break;v.lng>l.center.lng?v.lng-=360:v.lng+=360}return v.lng!==p.lng&&l.isPointOnMapSurface(l.locationToScreenPoint(v))?v:p}const zn={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function qn(v,n,l){const f=v.classList;for(const p in zn)f.remove(`maplibregl-${l}-anchor-${p}`);f.add(`maplibregl-${l}-anchor-${n}`)}class oi extends o.E{constructor(n){if(super(),this._onKeyPress=l=>{const f=l.code,p=l.charCode||l.keyCode;f!=="Space"&&f!=="Enter"&&p!==32&&p!==13||this.togglePopup()},this._onMapClick=l=>{const f=l.originalEvent.target,p=this._element;this._popup&&(f===p||p.contains(f))&&this.togglePopup()},this._update=l=>{if(!this._map)return;const f=this._map.loaded()&&!this._map.isMoving();((l==null?void 0:l.type)==="terrain"||(l==null?void 0:l.type)==="render"&&!f)&&this._map.once("render",this._update),this._lngLat=dl(this._lngLat,this._flatPos,this._map.transform),this._flatPos=this._pos=this._map.project(this._lngLat)._add(this._offset),this._map.terrain&&(this._flatPos=this._map.transform.locationToScreenPoint(this._lngLat)._add(this._offset));let p="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?p=`rotateZ(${this._rotation}deg)`:this._rotationAlignment==="map"&&(p=`rotateZ(${this._rotation-this._map.getBearing()}deg)`);let _="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?_="rotateX(0deg)":this._pitchAlignment==="map"&&(_=`rotateX(${this._map.getPitch()}deg)`),this._subpixelPositioning||l&&l.type!=="moveend"||(this._pos=this._pos.round()),b.setTransform(this._element,`${zn[this._anchor]} translate(${this._pos.x}px, ${this._pos.y}px) ${_} ${p}`),F.frameAsync(new AbortController).then(()=>{this._updateOpacity(l&&l.type==="moveend")}).catch(()=>{})},this._onMove=l=>{if(!this._isDragging){const f=this._clickTolerance||this._map._clickTolerance;this._isDragging=l.point.dist(this._pointerdownPos)>=f}this._isDragging&&(this._pos=l.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new o.l("dragstart"))),this.fire(new o.l("drag")))},this._onUp=()=>{this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new o.l("dragend")),this._state="inactive"},this._addDragHandler=l=>{this._element.contains(l.originalEvent.target)&&(l.preventDefault(),this._positionDelta=l.point.sub(this._pos).add(this._offset),this._pointerdownPos=l.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},this._anchor=n&&n.anchor||"center",this._color=n&&n.color||"#3FB1CE",this._scale=n&&n.scale||1,this._draggable=n&&n.draggable||!1,this._clickTolerance=n&&n.clickTolerance||0,this._subpixelPositioning=n&&n.subpixelPositioning||!1,this._isDragging=!1,this._state="inactive",this._rotation=n&&n.rotation||0,this._rotationAlignment=n&&n.rotationAlignment||"auto",this._pitchAlignment=n&&n.pitchAlignment&&n.pitchAlignment!=="auto"?n.pitchAlignment:this._rotationAlignment,this.setOpacity(n==null?void 0:n.opacity,n==null?void 0:n.opacityWhenCovered),n&&n.element)this._element=n.element,this._offset=o.P.convert(n&&n.offset||[0,0]);else{this._defaultMarker=!0,this._element=b.create("div");const l=b.createNS("http://www.w3.org/2000/svg","svg"),f=41,p=27;l.setAttributeNS(null,"display","block"),l.setAttributeNS(null,"height",`${f}px`),l.setAttributeNS(null,"width",`${p}px`),l.setAttributeNS(null,"viewBox",`0 0 ${p} ${f}`);const _=b.createNS("http://www.w3.org/2000/svg","g");_.setAttributeNS(null,"stroke","none"),_.setAttributeNS(null,"stroke-width","1"),_.setAttributeNS(null,"fill","none"),_.setAttributeNS(null,"fill-rule","evenodd");const S=b.createNS("http://www.w3.org/2000/svg","g");S.setAttributeNS(null,"fill-rule","nonzero");const P=b.createNS("http://www.w3.org/2000/svg","g");P.setAttributeNS(null,"transform","translate(3.0, 29.0)"),P.setAttributeNS(null,"fill","#000000");const M=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];for(const Fe of M){const De=b.createNS("http://www.w3.org/2000/svg","ellipse");De.setAttributeNS(null,"opacity","0.04"),De.setAttributeNS(null,"cx","10.5"),De.setAttributeNS(null,"cy","5.80029008"),De.setAttributeNS(null,"rx",Fe.rx),De.setAttributeNS(null,"ry",Fe.ry),P.appendChild(De)}const z=b.createNS("http://www.w3.org/2000/svg","g");z.setAttributeNS(null,"fill",this._color);const K=b.createNS("http://www.w3.org/2000/svg","path");K.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),z.appendChild(K);const Z=b.createNS("http://www.w3.org/2000/svg","g");Z.setAttributeNS(null,"opacity","0.25"),Z.setAttributeNS(null,"fill","#000000");const $=b.createNS("http://www.w3.org/2000/svg","path");$.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),Z.appendChild($);const Y=b.createNS("http://www.w3.org/2000/svg","g");Y.setAttributeNS(null,"transform","translate(6.0, 7.0)"),Y.setAttributeNS(null,"fill","#FFFFFF");const he=b.createNS("http://www.w3.org/2000/svg","g");he.setAttributeNS(null,"transform","translate(8.0, 8.0)");const Ie=b.createNS("http://www.w3.org/2000/svg","circle");Ie.setAttributeNS(null,"fill","#000000"),Ie.setAttributeNS(null,"opacity","0.25"),Ie.setAttributeNS(null,"cx","5.5"),Ie.setAttributeNS(null,"cy","5.5"),Ie.setAttributeNS(null,"r","5.4999962");const Ee=b.createNS("http://www.w3.org/2000/svg","circle");Ee.setAttributeNS(null,"fill","#FFFFFF"),Ee.setAttributeNS(null,"cx","5.5"),Ee.setAttributeNS(null,"cy","5.5"),Ee.setAttributeNS(null,"r","5.4999962"),he.appendChild(Ie),he.appendChild(Ee),S.appendChild(P),S.appendChild(z),S.appendChild(Z),S.appendChild(Y),S.appendChild(he),l.appendChild(S),l.setAttributeNS(null,"height",f*this._scale+"px"),l.setAttributeNS(null,"width",p*this._scale+"px"),this._element.appendChild(l),this._offset=o.P.convert(n&&n.offset||[0,-14])}if(this._element.classList.add("maplibregl-marker"),this._element.addEventListener("dragstart",l=>{l.preventDefault()}),this._element.addEventListener("mousedown",l=>{l.preventDefault()}),qn(this._element,this._anchor,"marker"),n&&n.className)for(const l of n.className.split(" "))this._element.classList.add(l);this._popup=null}addTo(n){return this.remove(),this._map=n,this._element.hasAttribute("aria-label")||this._element.setAttribute("aria-label",n._getUIString("Marker.Title")),n.getCanvasContainer().appendChild(this._element),n.on("move",this._update),n.on("moveend",this._update),n.on("terrain",this._update),n.on("projectiontransition",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this}remove(){return this._opacityTimeout&&(clearTimeout(this._opacityTimeout),delete this._opacityTimeout),this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("terrain",this._update),this._map.off("projectiontransition",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),b.remove(this._element),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(n){return this._lngLat=o.S.convert(n),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this}getElement(){return this._element}setPopup(n){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),n){if(!("offset"in n.options)){const p=Math.abs(13.5)/Math.SQRT2;n.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[p,-1*(38.1-13.5+p)],"bottom-right":[-p,-1*(38.1-13.5+p)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=n,this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this}setSubpixelPositioning(n){return this._subpixelPositioning=n,this}getPopup(){return this._popup}togglePopup(){const n=this._popup;return this._element.style.opacity===this._opacityWhenCovered?this:n?(n.isOpen()?n.remove():(n.setLngLat(this._lngLat),n.addTo(this._map)),this):this}_updateOpacity(n=!1){var l,f;const p=(l=this._map)===null||l===void 0?void 0:l.terrain,_=this._map.transform.isLocationOccluded(this._lngLat);if(!p||_){const Y=_?this._opacityWhenCovered:this._opacity;return void(this._element.style.opacity!==Y&&(this._element.style.opacity=Y))}if(n)this._opacityTimeout=null;else{if(this._opacityTimeout)return;this._opacityTimeout=setTimeout(()=>{this._opacityTimeout=null},100)}const S=this._map,P=S.terrain.depthAtPoint(this._pos),M=S.terrain.getElevationForLngLatZoom(this._lngLat,S.transform.tileZoom);if(S.transform.lngLatToCameraDepth(this._lngLat,M)-P<.006)return void(this._element.style.opacity=this._opacity);const z=-this._offset.y/S.transform.pixelsPerMeter,K=Math.sin(S.getPitch()*Math.PI/180)*z,Z=S.terrain.depthAtPoint(new o.P(this._pos.x,this._pos.y-this._offset.y)),$=S.transform.lngLatToCameraDepth(this._lngLat,M+K)-Z>.006;!((f=this._popup)===null||f===void 0)&&f.isOpen()&&$&&this._popup.remove(),this._element.style.opacity=$?this._opacityWhenCovered:this._opacity}getOffset(){return this._offset}setOffset(n){return this._offset=o.P.convert(n),this._update(),this}addClassName(n){this._element.classList.add(n)}removeClassName(n){this._element.classList.remove(n)}toggleClassName(n){return this._element.classList.toggle(n)}setDraggable(n){return this._draggable=!!n,this._map&&(n?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(n){return this._rotation=n||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(n){return this._rotationAlignment=n||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment}setPitchAlignment(n){return this._pitchAlignment=n&&n!=="auto"?n:this._rotationAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment}setOpacity(n,l){return(this._opacity===void 0||n===void 0&&l===void 0)&&(this._opacity="1",this._opacityWhenCovered="0.2"),n!==void 0&&(this._opacity=n),l!==void 0&&(this._opacityWhenCovered=l),this._map&&this._updateOpacity(!0),this}}const gd={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0};let da=0,Oo=!1;const fc={maxWidth:100,unit:"metric"};function so(v,n,l){const f=l&&l.maxWidth||100,p=v._container.clientHeight/2,_=v._container.clientWidth/2,S=v.unproject([_-f/2,p]),P=v.unproject([_+f/2,p]),M=Math.round(v.project(P).x-v.project(S).x),z=Math.min(f,M,v._container.clientWidth),K=S.distanceTo(P);if(l&&l.unit==="imperial"){const Z=3.2808*K;Z>5280?zo(n,z,Z/5280,v._getUIString("ScaleControl.Miles")):zo(n,z,Z,v._getUIString("ScaleControl.Feet"))}else l&&l.unit==="nautical"?zo(n,z,K/1852,v._getUIString("ScaleControl.NauticalMiles")):K>=1e3?zo(n,z,K/1e3,v._getUIString("ScaleControl.Kilometers")):zo(n,z,K,v._getUIString("ScaleControl.Meters"))}function zo(v,n,l,f){const p=function(_){const S=Math.pow(10,`${Math.floor(_)}`.length-1);let P=_/S;return P=P>=10?10:P>=5?5:P>=3?3:P>=2?2:P>=1?1:function(M){const z=Math.pow(10,Math.ceil(-Math.log(M)/Math.LN10));return Math.round(M*z)/z}(P),S*P}(l);v.style.width=n*(p/l)+"px",v.innerHTML=`${p}&nbsp;${f}`}const Oa={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px",subpixelPositioning:!1,locationOccludedOpacity:void 0},th=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function xA(v){if(v){if(typeof v=="number"){const n=Math.round(Math.abs(v)/Math.SQRT2);return{center:new o.P(0,0),top:new o.P(0,v),"top-left":new o.P(n,n),"top-right":new o.P(-n,n),bottom:new o.P(0,-v),"bottom-left":new o.P(n,-n),"bottom-right":new o.P(-n,-n),left:new o.P(v,0),right:new o.P(-v,0)}}if(v instanceof o.P||Array.isArray(v)){const n=o.P.convert(v);return{center:n,top:n,"top-left":n,"top-right":n,bottom:n,"bottom-left":n,"bottom-right":n,left:n,right:n}}return{center:o.P.convert(v.center||[0,0]),top:o.P.convert(v.top||[0,0]),"top-left":o.P.convert(v["top-left"]||[0,0]),"top-right":o.P.convert(v["top-right"]||[0,0]),bottom:o.P.convert(v.bottom||[0,0]),"bottom-left":o.P.convert(v["bottom-left"]||[0,0]),"bottom-right":o.P.convert(v["bottom-right"]||[0,0]),left:o.P.convert(v.left||[0,0]),right:o.P.convert(v.right||[0,0])}}return xA(new o.P(0,0))}const rh=g;h.AJAXError=o.cy,h.Event=o.l,h.Evented=o.E,h.LngLat=o.S,h.MercatorCoordinate=o.a0,h.Point=o.P,h.addProtocol=o.cz,h.config=o.a,h.removeProtocol=o.cA,h.AttributionControl=fs,h.BoxZoomHandler=md,h.CanvasSource=lr,h.CooperativeGesturesHandler=Mn,h.DoubleClickZoomHandler=zt,h.DragPanHandler=Or,h.DragRotateHandler=fr,h.EdgeInsets=Ns,h.FullscreenControl=class extends o.E{constructor(v={}){super(),this._onFullscreenChange=()=>{var n;let l=window.document.fullscreenElement||window.document.mozFullScreenElement||window.document.webkitFullscreenElement||window.document.msFullscreenElement;for(;!((n=l==null?void 0:l.shadowRoot)===null||n===void 0)&&n.fullscreenElement;)l=l.shadowRoot.fullscreenElement;l===this._container!==this._fullscreen&&this._handleFullscreenChange()},this._onClickFullscreen=()=>{this._isFullscreen()?this._exitFullscreen():this._requestFullscreen()},this._fullscreen=!1,v&&v.container&&(v.container instanceof HTMLElement?this._container=v.container:o.w("Full screen control 'container' must be a DOM element.")),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in document&&(this._fullscreenchange="MSFullscreenChange")}onAdd(v){return this._map=v,this._container||(this._container=this._map.getContainer()),this._controlContainer=b.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),this._controlContainer}onRemove(){b.remove(this._controlContainer),this._map=null,window.document.removeEventListener(this._fullscreenchange,this._onFullscreenChange)}_setupUI(){const v=this._fullscreenButton=b.create("button","maplibregl-ctrl-fullscreen",this._controlContainer);b.create("span","maplibregl-ctrl-icon",v).setAttribute("aria-hidden","true"),v.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),window.document.addEventListener(this._fullscreenchange,this._onFullscreenChange)}_updateTitle(){const v=this._getTitle();this._fullscreenButton.setAttribute("aria-label",v),this._fullscreenButton.title=v}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_handleFullscreenChange(){this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("maplibregl-ctrl-shrink"),this._fullscreenButton.classList.toggle("maplibregl-ctrl-fullscreen"),this._updateTitle(),this._fullscreen?(this.fire(new o.l("fullscreenstart")),this._prevCooperativeGesturesEnabled=this._map.cooperativeGestures.isEnabled(),this._map.cooperativeGestures.disable()):(this.fire(new o.l("fullscreenend")),this._prevCooperativeGesturesEnabled&&this._map.cooperativeGestures.enable())}_exitFullscreen(){window.document.exitFullscreen?window.document.exitFullscreen():window.document.mozCancelFullScreen?window.document.mozCancelFullScreen():window.document.msExitFullscreen?window.document.msExitFullscreen():window.document.webkitCancelFullScreen?window.document.webkitCancelFullScreen():this._togglePseudoFullScreen()}_requestFullscreen(){this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen?this._container.webkitRequestFullscreen():this._togglePseudoFullScreen()}_togglePseudoFullScreen(){this._container.classList.toggle("maplibregl-pseudo-fullscreen"),this._handleFullscreenChange(),this._map.resize()}},h.GeoJSONSource=pr,h.GeolocateControl=class extends o.E{constructor(v){super(),this._onSuccess=n=>{if(this._map){if(this._isOutOfMapMaxBounds(n))return this._setErrorState(),this.fire(new o.l("outofmaxbounds",n)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=n,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background");break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(n),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(n),this.options.showUserLocation&&this._dotElement.classList.remove("maplibregl-user-location-dot-stale"),this.fire(new o.l("geolocate",n)),this._finish()}},this._updateCamera=n=>{const l=new o.S(n.coords.longitude,n.coords.latitude),f=n.coords.accuracy,p=this._map.getBearing(),_=o.e({bearing:p},this.options.fitBoundsOptions),S=jt.fromLngLat(l,f);this._map.fitBounds(S,_,{geolocateSource:!0})},this._updateMarker=n=>{if(n){const l=new o.S(n.coords.longitude,n.coords.latitude);this._accuracyCircleMarker.setLngLat(l).addTo(this._map),this._userLocationDotMarker.setLngLat(l).addTo(this._map),this._accuracy=n.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},this._onZoom=()=>{this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},this._onError=n=>{if(this._map){if(n.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const l=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=l,this._geolocateButton.setAttribute("aria-label",l),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(n.code===3&&Oo)return;this.options.trackUserLocation&&this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("maplibregl-user-location-dot-stale"),this.fire(new o.l("error",n)),this._finish()}},this._finish=()=>{this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},this._setupUI=()=>{this._map&&(this._container.addEventListener("contextmenu",n=>n.preventDefault()),this._geolocateButton=b.create("button","maplibregl-ctrl-geolocate",this._container),b.create("span","maplibregl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",this._geolocateButton.disabled=!0)},this._finishSetupUI=n=>{if(this._map){if(n===!1){o.w("Geolocation support is not available so the GeolocateControl will be disabled.");const l=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=l,this._geolocateButton.setAttribute("aria-label",l)}else{const l=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.disabled=!1,this._geolocateButton.title=l,this._geolocateButton.setAttribute("aria-label",l)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=b.create("div","maplibregl-user-location-dot"),this._userLocationDotMarker=new oi({element:this._dotElement}),this._circleElement=b.create("div","maplibregl-user-location-accuracy-circle"),this._accuracyCircleMarker=new oi({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",()=>this.trigger()),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",l=>{l.geolocateSource||this._watchState!=="ACTIVE_LOCK"||l.originalEvent&&l.originalEvent.type==="resize"||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this.fire(new o.l("trackuserlocationend")),this.fire(new o.l("userlocationlostfocus")))})}},this.options=o.e({},gd,v)}onAdd(v){return this._map=v,this._container=b.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),function(){return o._(this,arguments,void 0,function*(n=!1){if(bi!==void 0&&!n)return bi;if(window.navigator.permissions===void 0)return bi=!!window.navigator.geolocation,bi;try{bi=(yield window.navigator.permissions.query({name:"geolocation"})).state!=="denied"}catch{bi=!!window.navigator.geolocation}return bi})}().then(n=>this._finishSetupUI(n)),this._container}onRemove(){this._geolocationWatchID!==void 0&&(window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),b.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,da=0,Oo=!1}_isOutOfMapMaxBounds(v){const n=this._map.getMaxBounds(),l=v.coords;return n&&(l.longitude<n.getWest()||l.longitude>n.getEast()||l.latitude<n.getSouth()||l.latitude>n.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"ACTIVE_ERROR":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}}_updateCircleRadius(){const v=this._map.getBounds(),n=v.getSouthEast(),l=v.getNorthEast(),f=n.distanceTo(l),p=Math.ceil(this._accuracy/(f/this._map._container.clientHeight)*2);this._circleElement.style.width=`${p}px`,this._circleElement.style.height=`${p}px`}trigger(){if(!this._setup)return o.w("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new o.l("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":da--,Oo=!1,this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this.fire(new o.l("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new o.l("trackuserlocationstart")),this.fire(new o.l("userlocationfocus"));break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"OFF":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let v;this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),da++,da>1?(v={maximumAge:6e5,timeout:0},Oo=!0):(v=this.options.positionOptions,Oo=!1),this._geolocationWatchID=window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,v)}}else window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_clearWatch(){window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},h.GlobeControl=class{constructor(){this._toggleProjection=()=>{var v;const n=(v=this._map.getProjection())===null||v===void 0?void 0:v.type;this._map.setProjection(n!=="mercator"&&n?{type:"mercator"}:{type:"globe"}),this._updateGlobeIcon()},this._updateGlobeIcon=()=>{var v;this._globeButton.classList.remove("maplibregl-ctrl-globe"),this._globeButton.classList.remove("maplibregl-ctrl-globe-enabled"),((v=this._map.getProjection())===null||v===void 0?void 0:v.type)==="globe"?(this._globeButton.classList.add("maplibregl-ctrl-globe-enabled"),this._globeButton.title=this._map._getUIString("GlobeControl.Disable")):(this._globeButton.classList.add("maplibregl-ctrl-globe"),this._globeButton.title=this._map._getUIString("GlobeControl.Enable"))}}onAdd(v){return this._map=v,this._container=b.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._globeButton=b.create("button","maplibregl-ctrl-globe",this._container),b.create("span","maplibregl-ctrl-icon",this._globeButton).setAttribute("aria-hidden","true"),this._globeButton.type="button",this._globeButton.addEventListener("click",this._toggleProjection),this._updateGlobeIcon(),this._map.on("styledata",this._updateGlobeIcon),this._container}onRemove(){b.remove(this._container),this._map.off("styledata",this._updateGlobeIcon),this._globeButton.removeEventListener("click",this._toggleProjection),this._map=void 0}},h.Hash=uu,h.ImageSource=Kt,h.KeyboardHandler=Pt,h.LngLatBounds=jt,h.LogoControl=_i,h.Map=class extends Er{constructor(v){var n,l;o.cv.mark(o.cw.create);const f=Object.assign(Object.assign(Object.assign({},xi),v),{canvasContextAttributes:Object.assign(Object.assign({},xi.canvasContextAttributes),v.canvasContextAttributes)});if(f.minZoom!=null&&f.maxZoom!=null&&f.minZoom>f.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(f.minPitch!=null&&f.maxPitch!=null&&f.minPitch>f.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(f.minPitch!=null&&f.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(f.maxPitch!=null&&f.maxPitch>180)throw new Error("maxPitch must be less than or equal to 180");const p=new Un,_=new kl;if(f.minZoom!==void 0&&p.setMinZoom(f.minZoom),f.maxZoom!==void 0&&p.setMaxZoom(f.maxZoom),f.minPitch!==void 0&&p.setMinPitch(f.minPitch),f.maxPitch!==void 0&&p.setMaxPitch(f.maxPitch),f.renderWorldCopies!==void 0&&p.setRenderWorldCopies(f.renderWorldCopies),super(p,_,{bearingSnap:f.bearingSnap}),this._idleTriggered=!1,this._crossFadingFactor=1,this._renderTaskQueue=new Hs,this._controls=[],this._mapId=o.a6(),this._contextLost=P=>{P.preventDefault(),this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this.fire(new o.l("webglcontextlost",{originalEvent:P}))},this._contextRestored=P=>{this._setupPainter(),this.resize(),this._update(),this.fire(new o.l("webglcontextrestored",{originalEvent:P}))},this._onMapScroll=P=>{if(P.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},this._onWindowOnline=()=>{this._update()},this._interactive=f.interactive,this._maxTileCacheSize=f.maxTileCacheSize,this._maxTileCacheZoomLevels=f.maxTileCacheZoomLevels,this._canvasContextAttributes=Object.assign({},f.canvasContextAttributes),this._trackResize=f.trackResize===!0,this._bearingSnap=f.bearingSnap,this._centerClampedToGround=f.centerClampedToGround,this._refreshExpiredTiles=f.refreshExpiredTiles===!0,this._fadeDuration=f.fadeDuration,this._crossSourceCollisions=f.crossSourceCollisions===!0,this._collectResourceTiming=f.collectResourceTiming===!0,this._locale=Object.assign(Object.assign({},js),f.locale),this._clickTolerance=f.clickTolerance,this._overridePixelRatio=f.pixelRatio,this._maxCanvasSize=f.maxCanvasSize,this.transformCameraUpdate=f.transformCameraUpdate,this.cancelPendingTileRequestsWhileZooming=f.cancelPendingTileRequestsWhileZooming===!0,this._imageQueueHandle=W.addThrottleControl(()=>this.isMoving()),this._requestManager=new se(f.transformRequest),typeof f.container=="string"){if(this._container=document.getElementById(f.container),!this._container)throw new Error(`Container '${f.container}' not found.`)}else{if(!(f.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=f.container}if(f.maxBounds&&this.setMaxBounds(f.maxBounds),this._setupContainer(),this._setupPainter(),this.on("move",()=>this._update(!1)),this.on("moveend",()=>this._update(!1)),this.on("zoom",()=>this._update(!0)),this.on("terrain",()=>{this.painter.terrainFacilitator.dirty=!0,this._update(!0)}),this.once("idle",()=>{this._idleTriggered=!0}),typeof window<"u"){addEventListener("online",this._onWindowOnline,!1);let P=!1;const M=zs(z=>{this._trackResize&&!this._removed&&(this.resize(z),this.redraw())},50);this._resizeObserver=new ResizeObserver(z=>{P?M(z):P=!0}),this._resizeObserver.observe(this._container)}this.handlers=new wn(this,f),this._hash=f.hash&&new uu(typeof f.hash=="string"&&f.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:f.center,elevation:f.elevation,zoom:f.zoom,bearing:f.bearing,pitch:f.pitch,roll:f.roll}),f.bounds&&(this.resize(),this.fitBounds(f.bounds,o.e({},f.fitBoundsOptions,{duration:0}))));const S=typeof f.style=="string"||((l=(n=f.style)===null||n===void 0?void 0:n.projection)===null||l===void 0?void 0:l.type)!=="globe";this.resize(null,S),this._localIdeographFontFamily=f.localIdeographFontFamily,this._validateStyle=f.validateStyle,f.style&&this.setStyle(f.style,{localIdeographFontFamily:f.localIdeographFontFamily}),f.attributionControl&&this.addControl(new fs(typeof f.attributionControl=="boolean"?void 0:f.attributionControl)),f.maplibreLogo&&this.addControl(new _i,f.logoPosition),this.on("style.load",()=>{if(S||this._resizeTransform(),this.transform.unmodified){const P=o.Q(this.style.stylesheet,["center","zoom","bearing","pitch","roll"]);this.jumpTo(P)}}),this.on("data",P=>{this._update(P.dataType==="style"),this.fire(new o.l(`${P.dataType}data`,P))}),this.on("dataloading",P=>{this.fire(new o.l(`${P.dataType}dataloading`,P))}),this.on("dataabort",P=>{this.fire(new o.l("sourcedataabort",P))})}_getMapId(){return this._mapId}setGlobalStateProperty(v,n){return this.style.setGlobalStateProperty(v,n),this._update(!0)}getGlobalState(){return this.style.getGlobalState()}addControl(v,n){if(n===void 0&&(n=v.getDefaultPosition?v.getDefaultPosition():"top-right"),!v||!v.onAdd)return this.fire(new o.k(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const l=v.onAdd(this);this._controls.push(v);const f=this._controlPositions[n];return n.indexOf("bottom")!==-1?f.insertBefore(l,f.firstChild):f.appendChild(l),this}removeControl(v){if(!v||!v.onRemove)return this.fire(new o.k(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const n=this._controls.indexOf(v);return n>-1&&this._controls.splice(n,1),v.onRemove(this),this}hasControl(v){return this._controls.indexOf(v)>-1}calculateCameraOptionsFromTo(v,n,l,f){return f==null&&this.terrain&&(f=this.terrain.getElevationForLngLatZoom(l,this.transform.tileZoom)),super.calculateCameraOptionsFromTo(v,n,l,f)}resize(v,n=!0){const[l,f]=this._containerDimensions(),p=this._getClampedPixelRatio(l,f);if(this._resizeCanvas(l,f,p),this.painter.resize(l,f,p),this.painter.overLimit()){const S=this.painter.context.gl;this._maxCanvasSize=[S.drawingBufferWidth,S.drawingBufferHeight];const P=this._getClampedPixelRatio(l,f);this._resizeCanvas(l,f,P),this.painter.resize(l,f,P)}this._resizeTransform(n);const _=!this._moving;return _&&(this.stop(),this.fire(new o.l("movestart",v)).fire(new o.l("move",v))),this.fire(new o.l("resize",v)),_&&this.fire(new o.l("moveend",v)),this}_resizeTransform(v=!0){var n;const[l,f]=this._containerDimensions();this.transform.resize(l,f,v),(n=this._requestedCameraState)===null||n===void 0||n.resize(l,f,v)}_getClampedPixelRatio(v,n){const{0:l,1:f}=this._maxCanvasSize,p=this.getPixelRatio(),_=v*p,S=n*p;return Math.min(_>l?l/_:1,S>f?f/S:1)*p}getPixelRatio(){var v;return(v=this._overridePixelRatio)!==null&&v!==void 0?v:devicePixelRatio}setPixelRatio(v){this._overridePixelRatio=v,this.resize()}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()}setMaxBounds(v){return this.transform.setMaxBounds(jt.convert(v)),this._update()}setMinZoom(v){if((v=v??-2)>=-2&&v<=this.transform.maxZoom)return this.transform.setMinZoom(v),this._update(),this.getZoom()<v&&this.setZoom(v),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(v){if((v=v??22)>=this.transform.minZoom)return this.transform.setMaxZoom(v),this._update(),this.getZoom()>v&&this.setZoom(v),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(v){if((v=v??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(v>=0&&v<=this.transform.maxPitch)return this.transform.setMinPitch(v),this._update(),this.getPitch()<v&&this.setPitch(v),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(v){if((v=v??60)>180)throw new Error("maxPitch must be less than or equal to 180");if(v>=this.transform.minPitch)return this.transform.setMaxPitch(v),this._update(),this.getPitch()>v&&this.setPitch(v),this;throw new Error("maxPitch must be greater than the current minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(v){return this.transform.setRenderWorldCopies(v),this._update()}project(v){return this.transform.locationToScreenPoint(o.S.convert(v),this.style&&this.terrain)}unproject(v){return this.transform.screenPointToLocation(o.P.convert(v),this.terrain)}isMoving(){var v;return this._moving||((v=this.handlers)===null||v===void 0?void 0:v.isMoving())}isZooming(){var v;return this._zooming||((v=this.handlers)===null||v===void 0?void 0:v.isZooming())}isRotating(){var v;return this._rotating||((v=this.handlers)===null||v===void 0?void 0:v.isRotating())}_createDelegatedListener(v,n,l){if(v==="mouseenter"||v==="mouseover"){let f=!1;return{layers:n,listener:l,delegates:{mousemove:_=>{const S=n.filter(M=>this.getLayer(M)),P=S.length!==0?this.queryRenderedFeatures(_.point,{layers:S}):[];P.length?f||(f=!0,l.call(this,new Ss(v,this,_.originalEvent,{features:P}))):f=!1},mouseout:()=>{f=!1}}}}if(v==="mouseleave"||v==="mouseout"){let f=!1;return{layers:n,listener:l,delegates:{mousemove:S=>{const P=n.filter(M=>this.getLayer(M));(P.length!==0?this.queryRenderedFeatures(S.point,{layers:P}):[]).length?f=!0:f&&(f=!1,l.call(this,new Ss(v,this,S.originalEvent)))},mouseout:S=>{f&&(f=!1,l.call(this,new Ss(v,this,S.originalEvent)))}}}}{const f=p=>{const _=n.filter(P=>this.getLayer(P)),S=_.length!==0?this.queryRenderedFeatures(p.point,{layers:_}):[];S.length&&(p.features=S,l.call(this,p),delete p.features)};return{layers:n,listener:l,delegates:{[v]:f}}}}_saveDelegatedListener(v,n){this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[v]=this._delegatedListeners[v]||[],this._delegatedListeners[v].push(n)}_removeDelegatedListener(v,n,l){if(!this._delegatedListeners||!this._delegatedListeners[v])return;const f=this._delegatedListeners[v];for(let p=0;p<f.length;p++){const _=f[p];if(_.listener===l&&_.layers.length===n.length&&_.layers.every(S=>n.includes(S))){for(const S in _.delegates)this.off(S,_.delegates[S]);return void f.splice(p,1)}}}on(v,n,l){if(l===void 0)return super.on(v,n);const f=typeof n=="string"?[n]:n,p=this._createDelegatedListener(v,f,l);this._saveDelegatedListener(v,p);for(const _ in p.delegates)this.on(_,p.delegates[_]);return{unsubscribe:()=>{this._removeDelegatedListener(v,f,l)}}}once(v,n,l){if(l===void 0)return super.once(v,n);const f=typeof n=="string"?[n]:n,p=this._createDelegatedListener(v,f,l);for(const _ in p.delegates){const S=p.delegates[_];p.delegates[_]=(...P)=>{this._removeDelegatedListener(v,f,l),S(...P)}}this._saveDelegatedListener(v,p);for(const _ in p.delegates)this.once(_,p.delegates[_]);return this}off(v,n,l){return l===void 0?super.off(v,n):(this._removeDelegatedListener(v,typeof n=="string"?[n]:n,l),this)}queryRenderedFeatures(v,n){if(!this.style)return[];let l;const f=v instanceof o.P||Array.isArray(v),p=f?v:[[0,0],[this.transform.width,this.transform.height]];if(n=n||(f?{}:v)||{},p instanceof o.P||typeof p[0]=="number")l=[o.P.convert(p)];else{const _=o.P.convert(p[0]),S=o.P.convert(p[1]);l=[_,new o.P(S.x,_.y),S,new o.P(_.x,S.y),_]}return this.style.queryRenderedFeatures(l,n,this.transform)}querySourceFeatures(v,n){return this.style.querySourceFeatures(v,n)}setStyle(v,n){return(n=o.e({},{localIdeographFontFamily:this._localIdeographFontFamily,validate:this._validateStyle},n)).diff!==!1&&n.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&v?(this._diffStyle(v,n),this):(this._localIdeographFontFamily=n.localIdeographFontFamily,this._updateStyle(v,n))}setTransformRequest(v){return this._requestManager.setTransformRequest(v),this}_getUIString(v){const n=this._locale[v];if(n==null)throw new Error(`Missing UI string '${v}'`);return n}_updateStyle(v,n){var l,f;if(n.transformStyle&&this.style&&!this.style._loaded)return void this.style.once("style.load",()=>this._updateStyle(v,n));const p=this.style&&n.transformStyle?this.style.serialize():void 0;return this.style&&(this.style.setEventedParent(null),this.style._remove(!v)),v?(this.style=new D(this,n||{}),this.style.setEventedParent(this,{style:this.style}),typeof v=="string"?this.style.loadURL(v,n,p):this.style.loadJSON(v,n,p),this):((f=(l=this.style)===null||l===void 0?void 0:l.projection)===null||f===void 0||f.destroy(),delete this.style,this)}_lazyInitEmptyStyle(){this.style||(this.style=new D(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(v,n){if(typeof v=="string"){const l=this._requestManager.transformRequest(v,"Style");o.j(l,new AbortController).then(f=>{this._updateDiff(f.data,n)}).catch(f=>{f&&this.fire(new o.k(f))})}else typeof v=="object"&&this._updateDiff(v,n)}_updateDiff(v,n){try{this.style.setState(v,n)&&this._update(!0)}catch(l){o.w(`Unable to perform style diff: ${l.message||l.error||l}.  Rebuilding the style from scratch.`),this._updateStyle(v,n)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():o.w("There is no style added to the map.")}addSource(v,n){return this._lazyInitEmptyStyle(),this.style.addSource(v,n),this._update(!0)}isSourceLoaded(v){const n=this.style&&this.style.sourceCaches[v];if(n!==void 0)return n.loaded();this.fire(new o.k(new Error(`There is no source with ID '${v}'`)))}setTerrain(v){if(this.style._checkLoaded(),this._terrainDataCallback&&this.style.off("data",this._terrainDataCallback),v){const n=this.style.sourceCaches[v.source];if(!n)throw new Error(`cannot load terrain, because there exists no source with ID: ${v.source}`);this.terrain===null&&n.reload();for(const l in this.style._layers){const f=this.style._layers[l];f.type==="hillshade"&&f.source===v.source&&o.w("You are using the same source for a hillshade layer and for 3D terrain. Please consider using two separate sources to improve rendering quality."),f.type==="color-relief"&&f.source===v.source&&o.w("You are using the same source for a color-relief layer and for 3D terrain. Please consider using two separate sources to improve rendering quality.")}this.terrain=new wi(this.painter,n,v),this.painter.renderToTexture=new wr(this.painter,this.terrain),this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this.transform.setElevation(this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this._terrainDataCallback=l=>{var f;l.dataType==="style"?this.terrain.sourceCache.freeRtt():l.dataType==="source"&&l.tile&&(l.sourceId!==v.source||this._elevationFreeze||(this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this._centerClampedToGround&&this.transform.setElevation(this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))),((f=l.source)===null||f===void 0?void 0:f.type)==="image"?this.terrain.sourceCache.freeRtt():this.terrain.sourceCache.freeRtt(l.tile.tileID))},this.style.on("data",this._terrainDataCallback)}else this.terrain&&this.terrain.sourceCache.destruct(),this.terrain=null,this.painter.renderToTexture&&this.painter.renderToTexture.destruct(),this.painter.renderToTexture=null,this.transform.setMinElevationForCurrentTile(0),this._centerClampedToGround&&this.transform.setElevation(0);return this.fire(new o.l("terrain",{terrain:v})),this}getTerrain(){var v,n;return(n=(v=this.terrain)===null||v===void 0?void 0:v.options)!==null&&n!==void 0?n:null}areTilesLoaded(){const v=this.style&&this.style.sourceCaches;for(const n in v){const l=v[n]._tiles;for(const f in l){const p=l[f];if(p.state!=="loaded"&&p.state!=="errored")return!1}}return!0}removeSource(v){return this.style.removeSource(v),this._update(!0)}getSource(v){return this.style.getSource(v)}setSourceTileLodParams(v,n,l){if(l){const f=this.getSource(l);if(!f)throw new Error(`There is no source with ID "${l}", cannot set LOD parameters`);f.calculateTileZoom=yt(Math.max(1,v),Math.max(1,n))}else for(const f in this.style.sourceCaches)this.style.sourceCaches[f].getSource().calculateTileZoom=yt(Math.max(1,v),Math.max(1,n));return this._update(!0),this}refreshTiles(v,n){const l=this.style.sourceCaches[v];if(!l)throw new Error(`There is no source cache with ID "${v}", cannot refresh tile`);n===void 0?l.reload(!0):l.refreshTiles(n.map(f=>new o.a3(f.z,f.x,f.y)))}addImage(v,n,l={}){const{pixelRatio:f=1,sdf:p=!1,stretchX:_,stretchY:S,content:P,textFitWidth:M,textFitHeight:z}=l;if(this._lazyInitEmptyStyle(),!(n instanceof HTMLImageElement||o.b(n))){if(n.width===void 0||n.height===void 0)return this.fire(new o.k(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));{const{width:K,height:Z,data:$}=n,Y=n;return this.style.addImage(v,{data:new o.R({width:K,height:Z},new Uint8Array($)),pixelRatio:f,stretchX:_,stretchY:S,content:P,textFitWidth:M,textFitHeight:z,sdf:p,version:0,userImage:Y}),Y.onAdd&&Y.onAdd(this,v),this}}{const{width:K,height:Z,data:$}=F.getImageData(n);this.style.addImage(v,{data:new o.R({width:K,height:Z},$),pixelRatio:f,stretchX:_,stretchY:S,content:P,textFitWidth:M,textFitHeight:z,sdf:p,version:0})}}updateImage(v,n){const l=this.style.getImage(v);if(!l)return this.fire(new o.k(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const f=n instanceof HTMLImageElement||o.b(n)?F.getImageData(n):n,{width:p,height:_,data:S}=f;if(p===void 0||_===void 0)return this.fire(new o.k(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(p!==l.data.width||_!==l.data.height)return this.fire(new o.k(new Error("The width and height of the updated image must be that same as the previous version of the image")));const P=!(n instanceof HTMLImageElement||o.b(n));return l.data.replace(S,P),this.style.updateImage(v,l),this}getImage(v){return this.style.getImage(v)}hasImage(v){return v?!!this.style.getImage(v):(this.fire(new o.k(new Error("Missing required image id"))),!1)}removeImage(v){this.style.removeImage(v)}loadImage(v){return W.getImage(this._requestManager.transformRequest(v,"Image"),new AbortController)}listImages(){return this.style.listImages()}addLayer(v,n){return this._lazyInitEmptyStyle(),this.style.addLayer(v,n),this._update(!0)}moveLayer(v,n){return this.style.moveLayer(v,n),this._update(!0)}removeLayer(v){return this.style.removeLayer(v),this._update(!0)}getLayer(v){return this.style.getLayer(v)}getLayersOrder(){return this.style.getLayersOrder()}setLayerZoomRange(v,n,l){return this.style.setLayerZoomRange(v,n,l),this._update(!0)}setFilter(v,n,l={}){return this.style.setFilter(v,n,l),this._update(!0)}getFilter(v){return this.style.getFilter(v)}setPaintProperty(v,n,l,f={}){return this.style.setPaintProperty(v,n,l,f),this._update(!0)}getPaintProperty(v,n){return this.style.getPaintProperty(v,n)}setLayoutProperty(v,n,l,f={}){return this.style.setLayoutProperty(v,n,l,f),this._update(!0)}getLayoutProperty(v,n){return this.style.getLayoutProperty(v,n)}setGlyphs(v,n={}){return this._lazyInitEmptyStyle(),this.style.setGlyphs(v,n),this._update(!0)}getGlyphs(){return this.style.getGlyphsUrl()}addSprite(v,n,l={}){return this._lazyInitEmptyStyle(),this.style.addSprite(v,n,l,f=>{f||this._update(!0)}),this}removeSprite(v){return this._lazyInitEmptyStyle(),this.style.removeSprite(v),this._update(!0)}getSprite(){return this.style.getSprite()}setSprite(v,n={}){return this._lazyInitEmptyStyle(),this.style.setSprite(v,n,l=>{l||this._update(!0)}),this}setLight(v,n={}){return this._lazyInitEmptyStyle(),this.style.setLight(v,n),this._update(!0)}getLight(){return this.style.getLight()}setSky(v,n={}){return this._lazyInitEmptyStyle(),this.style.setSky(v,n),this._update(!0)}getSky(){return this.style.getSky()}setFeatureState(v,n){return this.style.setFeatureState(v,n),this._update()}removeFeatureState(v,n){return this.style.removeFeatureState(v,n),this._update()}getFeatureState(v){return this.style.getFeatureState(v)}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}_containerDimensions(){let v=0,n=0;return this._container&&(v=this._container.clientWidth||400,n=this._container.clientHeight||300),[v,n]}_setupContainer(){const v=this._container;v.classList.add("maplibregl-map");const n=this._canvasContainer=b.create("div","maplibregl-canvas-container",v);this._interactive&&n.classList.add("maplibregl-interactive"),this._canvas=b.create("canvas","maplibregl-canvas",n),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex",this._interactive?"0":"-1"),this._canvas.setAttribute("aria-label",this._getUIString("Map.Title")),this._canvas.setAttribute("role","region");const l=this._containerDimensions(),f=this._getClampedPixelRatio(l[0],l[1]);this._resizeCanvas(l[0],l[1],f);const p=this._controlContainer=b.create("div","maplibregl-control-container",v),_=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(S=>{_[S]=b.create("div",`maplibregl-ctrl-${S} `,p)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas(v,n,l){this._canvas.width=Math.floor(l*v),this._canvas.height=Math.floor(l*n),this._canvas.style.width=`${v}px`,this._canvas.style.height=`${n}px`}_setupPainter(){const v=Object.assign(Object.assign({},this._canvasContextAttributes),{alpha:!0,depth:!0,stencil:!0,premultipliedAlpha:!0});let n=null;this._canvas.addEventListener("webglcontextcreationerror",f=>{n={requestedAttributes:v},f&&(n.statusMessage=f.statusMessage,n.type=f.type)},{once:!0});let l=null;if(l=this._canvasContextAttributes.contextType?this._canvas.getContext(this._canvasContextAttributes.contextType,v):this._canvas.getContext("webgl2",v)||this._canvas.getContext("webgl",v),!l){const f="Failed to initialize WebGL";throw n?(n.message=f,new Error(JSON.stringify(n))):new Error(f)}this.painter=new $i(l,this.transform),N.testSupport(l)}migrateProjection(v,n){super.migrateProjection(v,n),this.painter.transform=v,this.fire(new o.l("projectiontransition",{newProjection:this.style.projection.name}))}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(v){return this.style&&this.style._loaded?(this._styleDirty=this._styleDirty||v,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(v){return this._update(),this._renderTaskQueue.add(v)}_cancelRenderFrame(v){this._renderTaskQueue.remove(v)}_render(v){var n,l,f,p,_;const S=this._idleTriggered?this._fadeDuration:0,P=((n=this.style.projection)===null||n===void 0?void 0:n.transitionState)>0;if(this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(v),this._removed)return;let M=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;const Z=this.transform.zoom,$=F.now();this.style.zoomHistory.update(Z,$);const Y=new o.F(Z,{now:$,fadeDuration:S,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition(),globalState:this.style.getGlobalState()}),he=Y.crossFadingFactor();he===1&&he===this._crossFadingFactor||(M=!0,this._crossFadingFactor=he),this.style.update(Y)}const z=((l=this.style.projection)===null||l===void 0?void 0:l.transitionState)>0!==P;(f=this.style.projection)===null||f===void 0||f.setErrorQueryLatitudeDegrees(this.transform.center.lat),this.transform.setTransitionState((p=this.style.projection)===null||p===void 0?void 0:p.transitionState,(_=this.style.projection)===null||_===void 0?void 0:_.latitudeErrorCorrectionRadians),this.style&&(this._sourcesDirty||z)&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this.terrain?(this.terrain.sourceCache.update(this.transform,this.terrain),this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),!this._elevationFreeze&&this._centerClampedToGround&&this.transform.setElevation(this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))):(this.transform.setMinElevationForCurrentTile(0),this._centerClampedToGround&&this.transform.setElevation(0)),this._placementDirty=this.style&&this.style._updatePlacement(this.transform,this.showCollisionBoxes,S,this._crossSourceCollisions,z),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:S,showPadding:this.showPadding}),this.fire(new o.l("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,o.cv.mark(o.cw.load),this.fire(new o.l("load"))),this.style&&(this.style.hasTransitions()||M)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles();const K=this._sourcesDirty||this._styleDirty||this._placementDirty;return K||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new o.l("idle")),!this._loaded||this._fullyLoaded||K||(this._fullyLoaded=!0,o.cv.mark(o.cw.fullLoad)),this}redraw(){return this.style&&(this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._render(0)),this}remove(){var v;this._hash&&this._hash.remove();for(const l of this._controls)l.onRemove(this);this._controls=[],this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),typeof window<"u"&&removeEventListener("online",this._onWindowOnline,!1),W.removeThrottleControl(this._imageQueueHandle),(v=this._resizeObserver)===null||v===void 0||v.disconnect();const n=this.painter.context.gl.getExtension("WEBGL_lose_context");n!=null&&n.loseContext&&n.loseContext(),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),b.remove(this._canvasContainer),b.remove(this._controlContainer),this._container.removeEventListener("scroll",this._onMapScroll,!1),this._container.classList.remove("maplibregl-map"),o.cv.clearMetrics(),this._removed=!0,this.fire(new o.l("remove"))}triggerRepaint(){this.style&&!this._frameRequest&&(this._frameRequest=new AbortController,F.frame(this._frameRequest,v=>{o.cv.frame(v),this._frameRequest=null;try{this._render(v)}catch(n){if(!o.cx(n)&&!function(l){return l.message===no}(n))throw n}},()=>{}))}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(v){this._showTileBoundaries!==v&&(this._showTileBoundaries=v,this._update())}get showPadding(){return!!this._showPadding}set showPadding(v){this._showPadding!==v&&(this._showPadding=v,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(v){this._showCollisionBoxes!==v&&(this._showCollisionBoxes=v,v?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(v){this._showOverdrawInspector!==v&&(this._showOverdrawInspector=v,this._update())}get repaint(){return!!this._repaint}set repaint(v){this._repaint!==v&&(this._repaint=v,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(v){this._vertices=v,this._update()}get version(){return Qo}getCameraTargetElevation(){return this.transform.elevation}getProjection(){return this.style.getProjection()}setProjection(v){return this._lazyInitEmptyStyle(),this.style.setProjection(v),this._update(!0)}},h.MapMouseEvent=Ss,h.MapTouchEvent=ha,h.MapWheelEvent=Ju,h.Marker=oi,h.NavigationControl=class{constructor(v){this._updateZoomButtons=()=>{const n=this._map.getZoom(),l=n===this._map.getMaxZoom(),f=n===this._map.getMinZoom();this._zoomInButton.disabled=l,this._zoomOutButton.disabled=f,this._zoomInButton.setAttribute("aria-disabled",l.toString()),this._zoomOutButton.setAttribute("aria-disabled",f.toString())},this._rotateCompassArrow=()=>{this._compassIcon.style.transform=this.options.visualizePitch&&this.options.visualizeRoll?`scale(${1/Math.pow(Math.cos(this._map.transform.pitchInRadians),.5)}) rotateZ(${-this._map.transform.roll}deg) rotateX(${this._map.transform.pitch}deg) rotateZ(${-this._map.transform.bearing}deg)`:this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(this._map.transform.pitchInRadians),.5)}) rotateX(${this._map.transform.pitch}deg) rotateZ(${-this._map.transform.bearing}deg)`:this.options.visualizeRoll?`rotate(${-this._map.transform.bearing-this._map.transform.roll}deg)`:`rotate(${-this._map.transform.bearing}deg)`},this._setButtonTitle=(n,l)=>{const f=this._map._getUIString(`NavigationControl.${l}`);n.title=f,n.setAttribute("aria-label",f)},this.options=o.e({},gi,v),this._container=b.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._container.addEventListener("contextmenu",n=>n.preventDefault()),this.options.showZoom&&(this._zoomInButton=this._createButton("maplibregl-ctrl-zoom-in",n=>this._map.zoomIn({},{originalEvent:n})),b.create("span","maplibregl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("maplibregl-ctrl-zoom-out",n=>this._map.zoomOut({},{originalEvent:n})),b.create("span","maplibregl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(this._compass=this._createButton("maplibregl-ctrl-compass",n=>{this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:n}):this._map.resetNorth({},{originalEvent:n})}),this._compassIcon=b.create("span","maplibregl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}onAdd(v){return this._map=v,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this.options.visualizeRoll&&this._map.on("roll",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new Hl(this._map,this._compass,this.options.visualizePitch)),this._container}onRemove(){b.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this.options.visualizeRoll&&this._map.off("roll",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map}_createButton(v,n){const l=b.create("button",v,this._container);return l.type="button",l.addEventListener("click",n),l}},h.Popup=class extends o.E{constructor(v){super(),this._updateOpacity=()=>{this.options.locationOccludedOpacity!==void 0&&(this._container.style.opacity=this._map.transform.isLocationOccluded(this.getLngLat())?`${this.options.locationOccludedOpacity}`:"")},this.remove=()=>(this._content&&b.remove(this._content),this._container&&(b.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),this._map._canvasContainer.classList.remove("maplibregl-track-pointer"),delete this._map,this.fire(new o.l("close"))),this),this._onMouseUp=n=>{this._update(n.point)},this._onMouseMove=n=>{this._update(n.point)},this._onDrag=n=>{this._update(n.point)},this._update=n=>{if(!this._map||!this._lngLat&&!this._trackPointer||!this._content)return;if(!this._container){if(this._container=b.create("div","maplibregl-popup",this._map.getContainer()),this._tip=b.create("div","maplibregl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className)for(const S of this.options.className.split(" "))this._container.classList.add(S);this._closeButton&&this._closeButton.setAttribute("aria-label",this._map._getUIString("Popup.Close")),this._trackPointer&&this._container.classList.add("maplibregl-popup-track-pointer")}if(this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._lngLat=dl(this._lngLat,this._flatPos,this._map.transform,this._trackPointer),this._trackPointer&&!n)return;const l=this._flatPos=this._pos=this._trackPointer&&n?n:this._map.project(this._lngLat);this._map.terrain&&(this._flatPos=this._trackPointer&&n?n:this._map.transform.locationToScreenPoint(this._lngLat));let f=this.options.anchor;const p=xA(this.options.offset);if(!f){const S=this._container.offsetWidth,P=this._container.offsetHeight;let M;M=l.y+p.bottom.y<P?["top"]:l.y>this._map.transform.height-P?["bottom"]:[],l.x<S/2?M.push("left"):l.x>this._map.transform.width-S/2&&M.push("right"),f=M.length===0?"bottom":M.join("-")}let _=l.add(p[f]);this.options.subpixelPositioning||(_=_.round()),b.setTransform(this._container,`${zn[f]} translate(${_.x}px,${_.y}px)`),qn(this._container,f,"popup"),this._updateOpacity()},this._onClose=()=>{this.remove()},this.options=o.e(Object.create(Oa),v)}addTo(v){return this._map&&this.remove(),this._map=v,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")):this._map.on("move",this._update),this.fire(new o.l("open")),this}isOpen(){return!!this._map}getLngLat(){return this._lngLat}setLngLat(v){return this._lngLat=o.S.convert(v),this._pos=null,this._flatPos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.remove("maplibregl-track-pointer")),this}trackPointer(){return this._trackPointer=!0,this._pos=null,this._flatPos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")),this}getElement(){return this._container}setText(v){return this.setDOMContent(document.createTextNode(v))}setHTML(v){const n=document.createDocumentFragment(),l=document.createElement("body");let f;for(l.innerHTML=v;f=l.firstChild,f;)n.appendChild(f);return this.setDOMContent(n)}getMaxWidth(){var v;return(v=this._container)===null||v===void 0?void 0:v.style.maxWidth}setMaxWidth(v){return this.options.maxWidth=v,this._update(),this}setDOMContent(v){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=b.create("div","maplibregl-popup-content",this._container);return this._content.appendChild(v),this._createCloseButton(),this._update(),this._focusFirstElement(),this}addClassName(v){return this._container&&this._container.classList.add(v),this}removeClassName(v){return this._container&&this._container.classList.remove(v),this}setOffset(v){return this.options.offset=v,this._update(),this}toggleClassName(v){if(this._container)return this._container.classList.toggle(v)}setSubpixelPositioning(v){this.options.subpixelPositioning=v}_createCloseButton(){this.options.closeButton&&(this._closeButton=b.create("button","maplibregl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const v=this._container.querySelector(th);v&&v.focus()}},h.RasterDEMTileSource=Cr,h.RasterTileSource=Ge,h.ScaleControl=class{constructor(v){this._onMove=()=>{so(this._map,this._container,this.options)},this.setUnit=n=>{this.options.unit=n,so(this._map,this._container,this.options)},this.options=Object.assign(Object.assign({},fc),v)}getDefaultPosition(){return"bottom-left"}onAdd(v){return this._map=v,this._container=b.create("div","maplibregl-ctrl maplibregl-ctrl-scale",v.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}onRemove(){b.remove(this._container),this._map.off("move",this._onMove),this._map=void 0}},h.ScrollZoomHandler=Zt,h.Style=D,h.TerrainControl=class{constructor(v){this._toggleTerrain=()=>{this._map.getTerrain()?this._map.setTerrain(null):this._map.setTerrain(this.options),this._updateTerrainIcon()},this._updateTerrainIcon=()=>{this._terrainButton.classList.remove("maplibregl-ctrl-terrain"),this._terrainButton.classList.remove("maplibregl-ctrl-terrain-enabled"),this._map.terrain?(this._terrainButton.classList.add("maplibregl-ctrl-terrain-enabled"),this._terrainButton.title=this._map._getUIString("TerrainControl.Disable")):(this._terrainButton.classList.add("maplibregl-ctrl-terrain"),this._terrainButton.title=this._map._getUIString("TerrainControl.Enable"))},this.options=v}onAdd(v){return this._map=v,this._container=b.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._terrainButton=b.create("button","maplibregl-ctrl-terrain",this._container),b.create("span","maplibregl-ctrl-icon",this._terrainButton).setAttribute("aria-hidden","true"),this._terrainButton.type="button",this._terrainButton.addEventListener("click",this._toggleTerrain),this._updateTerrainIcon(),this._map.on("terrain",this._updateTerrainIcon),this._container}onRemove(){b.remove(this._container),this._map.off("terrain",this._updateTerrainIcon),this._map=void 0}},h.TwoFingersTouchPitchHandler=ft,h.TwoFingersTouchRotateHandler=Bt,h.TwoFingersTouchZoomHandler=ke,h.TwoFingersTouchZoomRotateHandler=Cn,h.VectorTileSource=Ft,h.VideoSource=ar,h.addSourceType=(v,n)=>o._(void 0,void 0,void 0,function*(){if(br(v))throw new Error(`A source type called "${v}" already exists.`);((l,f)=>{cr[l]=f})(v,n)}),h.clearPrewarmedResources=function(){const v=Ce;v&&(v.isPreloaded()&&v.numActive()===1?(v.release(it),Ce=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},h.createTileMesh=ec,h.getMaxParallelImageRequests=function(){return o.a.MAX_PARALLEL_IMAGE_REQUESTS},h.getRTLTextPluginStatus=function(){return Hr().getRTLTextPluginStatus()},h.getVersion=function(){return rh},h.getWorkerCount=function(){return Lt.workerCount},h.getWorkerUrl=function(){return o.a.WORKER_URL},h.importScriptInWorkers=function(v){return Xe().broadcast("IS",v)},h.prewarm=function(){$e().acquire(it)},h.setMaxParallelImageRequests=function(v){o.a.MAX_PARALLEL_IMAGE_REQUESTS=v},h.setRTLTextPlugin=function(v,n){return Hr().setRTLTextPlugin(v,n)},h.setWorkerCount=function(v){Lt.workerCount=v},h.setWorkerUrl=function(v){o.a.WORKER_URL=v}});var u=r;return u})})(qU);var pq=qU.exports;const Pp=CB(pq);function Iv(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function mq(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function WU(e){let t,r,i;e.length!==2?(t=Iv,r=(o,g)=>Iv(e(o),g),i=(o,g)=>e(o)-g):(t=e===Iv||e===mq?e:gq,r=e,i=e);function a(o,g,y=0,C=o.length){if(y<C){if(t(g,g)!==0)return C;do{const I=y+C>>>1;r(o[I],g)<0?y=I+1:C=I}while(y<C)}return y}function u(o,g,y=0,C=o.length){if(y<C){if(t(g,g)!==0)return C;do{const I=y+C>>>1;r(o[I],g)<=0?y=I+1:C=I}while(y<C)}return y}function h(o,g,y=0,C=o.length){const I=a(o,g,y,C-1);return I>y&&i(o[I-1],g)>-i(o[I],g)?I-1:I}return{left:a,center:h,right:u}}function gq(){return 0}function yq(e){return e===null?NaN:+e}const vq=WU(Iv),_q=vq.right;WU(yq).center;const wq=Math.sqrt(50),xq=Math.sqrt(10),bq=Math.sqrt(2);function x1(e,t,r){const i=(t-e)/Math.max(0,r),a=Math.floor(Math.log10(i)),u=i/Math.pow(10,a),h=u>=wq?10:u>=xq?5:u>=bq?2:1;let o,g,y;return a<0?(y=Math.pow(10,-a)/h,o=Math.round(e*y),g=Math.round(t*y),o/y<e&&++o,g/y>t&&--g,y=-y):(y=Math.pow(10,a)*h,o=Math.round(e/y),g=Math.round(t/y),o*y<e&&++o,g*y>t&&--g),g<o&&.5<=r&&r<2?x1(e,t,r*2):[o,g,y]}function Bq(e,t,r){if(t=+t,e=+e,r=+r,!(r>0))return[];if(e===t)return[e];const i=t<e,[a,u,h]=i?x1(t,e,r):x1(e,t,r);if(!(u>=a))return[];const o=u-a+1,g=new Array(o);if(i)if(h<0)for(let y=0;y<o;++y)g[y]=(u-y)/-h;else for(let y=0;y<o;++y)g[y]=(u-y)*h;else if(h<0)for(let y=0;y<o;++y)g[y]=(a+y)/-h;else for(let y=0;y<o;++y)g[y]=(a+y)*h;return g}function O2(e,t,r){return t=+t,e=+e,r=+r,x1(e,t,r)[2]}function Cq(e,t,r){t=+t,e=+e,r=+r;const i=t<e,a=i?O2(t,e,r):O2(e,t,r);return(i?-1:1)*(a<0?1/-a:a)}function Sq(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function eC(e,t,r){e.prototype=t.prototype=r,r.constructor=e}function XU(e,t){var r=Object.create(e.prototype);for(var i in t)r[i]=t[i];return r}function U0(){}var h0=.7,b1=1/h0,Lp="\\s*([+-]?\\d+)\\s*",d0="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Dc="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Eq=/^#([0-9a-f]{3,8})$/,Iq=new RegExp(`^rgb\\(${Lp},${Lp},${Lp}\\)$`),Fq=new RegExp(`^rgb\\(${Dc},${Dc},${Dc}\\)$`),Tq=new RegExp(`^rgba\\(${Lp},${Lp},${Lp},${d0}\\)$`),Pq=new RegExp(`^rgba\\(${Dc},${Dc},${Dc},${d0}\\)$`),Lq=new RegExp(`^hsl\\(${d0},${Dc},${Dc}\\)$`),Mq=new RegExp(`^hsla\\(${d0},${Dc},${Dc},${d0}\\)$`),WI={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};eC(U0,f0,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:XI,formatHex:XI,formatHex8:kq,formatHsl:Uq,formatRgb:YI,toString:YI});function XI(){return this.rgb().formatHex()}function kq(){return this.rgb().formatHex8()}function Uq(){return YU(this).formatHsl()}function YI(){return this.rgb().formatRgb()}function f0(e){var t,r;return e=(e+"").trim().toLowerCase(),(t=Eq.exec(e))?(r=t[1].length,t=parseInt(t[1],16),r===6?JI(t):r===3?new $a(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):r===8?ky(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):r===4?ky(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=Iq.exec(e))?new $a(t[1],t[2],t[3],1):(t=Fq.exec(e))?new $a(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=Tq.exec(e))?ky(t[1],t[2],t[3],t[4]):(t=Pq.exec(e))?ky(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=Lq.exec(e))?rF(t[1],t[2]/100,t[3]/100,1):(t=Mq.exec(e))?rF(t[1],t[2]/100,t[3]/100,t[4]):WI.hasOwnProperty(e)?JI(WI[e]):e==="transparent"?new $a(NaN,NaN,NaN,0):null}function JI(e){return new $a(e>>16&255,e>>8&255,e&255,1)}function ky(e,t,r,i){return i<=0&&(e=t=r=NaN),new $a(e,t,r,i)}function Rq(e){return e instanceof U0||(e=f0(e)),e?(e=e.rgb(),new $a(e.r,e.g,e.b,e.opacity)):new $a}function z2(e,t,r,i){return arguments.length===1?Rq(e):new $a(e,t,r,i??1)}function $a(e,t,r,i){this.r=+e,this.g=+t,this.b=+r,this.opacity=+i}eC($a,z2,XU(U0,{brighter(e){return e=e==null?b1:Math.pow(b1,e),new $a(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?h0:Math.pow(h0,e),new $a(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new $a(Yd(this.r),Yd(this.g),Yd(this.b),B1(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:eF,formatHex:eF,formatHex8:Nq,formatRgb:tF,toString:tF}));function eF(){return`#${Hd(this.r)}${Hd(this.g)}${Hd(this.b)}`}function Nq(){return`#${Hd(this.r)}${Hd(this.g)}${Hd(this.b)}${Hd((isNaN(this.opacity)?1:this.opacity)*255)}`}function tF(){const e=B1(this.opacity);return`${e===1?"rgb(":"rgba("}${Yd(this.r)}, ${Yd(this.g)}, ${Yd(this.b)}${e===1?")":`, ${e})`}`}function B1(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Yd(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Hd(e){return e=Yd(e),(e<16?"0":"")+e.toString(16)}function rF(e,t,r,i){return i<=0?e=t=r=NaN:r<=0||r>=1?e=t=NaN:t<=0&&(e=NaN),new HA(e,t,r,i)}function YU(e){if(e instanceof HA)return new HA(e.h,e.s,e.l,e.opacity);if(e instanceof U0||(e=f0(e)),!e)return new HA;if(e instanceof HA)return e;e=e.rgb();var t=e.r/255,r=e.g/255,i=e.b/255,a=Math.min(t,r,i),u=Math.max(t,r,i),h=NaN,o=u-a,g=(u+a)/2;return o?(t===u?h=(r-i)/o+(r<i)*6:r===u?h=(i-t)/o+2:h=(t-r)/o+4,o/=g<.5?u+a:2-u-a,h*=60):o=g>0&&g<1?0:h,new HA(h,o,g,e.opacity)}function Dq(e,t,r,i){return arguments.length===1?YU(e):new HA(e,t,r,i??1)}function HA(e,t,r,i){this.h=+e,this.s=+t,this.l=+r,this.opacity=+i}eC(HA,Dq,XU(U0,{brighter(e){return e=e==null?b1:Math.pow(b1,e),new HA(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?h0:Math.pow(h0,e),new HA(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,r=this.l,i=r+(r<.5?r:1-r)*t,a=2*r-i;return new $a(Mx(e>=240?e-240:e+120,a,i),Mx(e,a,i),Mx(e<120?e+240:e-120,a,i),this.opacity)},clamp(){return new HA(nF(this.h),Uy(this.s),Uy(this.l),B1(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=B1(this.opacity);return`${e===1?"hsl(":"hsla("}${nF(this.h)}, ${Uy(this.s)*100}%, ${Uy(this.l)*100}%${e===1?")":`, ${e})`}`}}));function nF(e){return e=(e||0)%360,e<0?e+360:e}function Uy(e){return Math.max(0,Math.min(1,e||0))}function Mx(e,t,r){return(e<60?t+(r-t)*e/60:e<180?r:e<240?t+(r-t)*(240-e)/60:t)*255}const tC=e=>()=>e;function Qq(e,t){return function(r){return e+r*t}}function Oq(e,t,r){return e=Math.pow(e,r),t=Math.pow(t,r)-e,r=1/r,function(i){return Math.pow(e+i*t,r)}}function zq(e){return(e=+e)==1?JU:function(t,r){return r-t?Oq(t,r,e):tC(isNaN(t)?r:t)}}function JU(e,t){var r=t-e;return r?Qq(e,r):tC(isNaN(e)?t:e)}const iF=function e(t){var r=zq(t);function i(a,u){var h=r((a=z2(a)).r,(u=z2(u)).r),o=r(a.g,u.g),g=r(a.b,u.b),y=JU(a.opacity,u.opacity);return function(C){return a.r=h(C),a.g=o(C),a.b=g(C),a.opacity=y(C),a+""}}return i.gamma=e,i}(1);function Hq(e,t){t||(t=[]);var r=e?Math.min(t.length,e.length):0,i=t.slice(),a;return function(u){for(a=0;a<r;++a)i[a]=e[a]*(1-u)+t[a]*u;return i}}function jq(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function Vq(e,t){var r=t?t.length:0,i=e?Math.min(r,e.length):0,a=new Array(i),u=new Array(r),h;for(h=0;h<i;++h)a[h]=rC(e[h],t[h]);for(;h<r;++h)u[h]=t[h];return function(o){for(h=0;h<i;++h)u[h]=a[h](o);return u}}function Kq(e,t){var r=new Date;return e=+e,t=+t,function(i){return r.setTime(e*(1-i)+t*i),r}}function C1(e,t){return e=+e,t=+t,function(r){return e*(1-r)+t*r}}function Gq(e,t){var r={},i={},a;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(a in t)a in e?r[a]=rC(e[a],t[a]):i[a]=t[a];return function(u){for(a in r)i[a]=r[a](u);return i}}var H2=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,kx=new RegExp(H2.source,"g");function $q(e){return function(){return e}}function qq(e){return function(t){return e(t)+""}}function Zq(e,t){var r=H2.lastIndex=kx.lastIndex=0,i,a,u,h=-1,o=[],g=[];for(e=e+"",t=t+"";(i=H2.exec(e))&&(a=kx.exec(t));)(u=a.index)>r&&(u=t.slice(r,u),o[h]?o[h]+=u:o[++h]=u),(i=i[0])===(a=a[0])?o[h]?o[h]+=a:o[++h]=a:(o[++h]=null,g.push({i:h,x:C1(i,a)})),r=kx.lastIndex;return r<t.length&&(u=t.slice(r),o[h]?o[h]+=u:o[++h]=u),o.length<2?g[0]?qq(g[0].x):$q(t):(t=g.length,function(y){for(var C=0,I;C<t;++C)o[(I=g[C]).i]=I.x(y);return o.join("")})}function rC(e,t){var r=typeof t,i;return t==null||r==="boolean"?tC(t):(r==="number"?C1:r==="string"?(i=f0(t))?(t=i,iF):Zq:t instanceof f0?iF:t instanceof Date?Kq:jq(t)?Hq:Array.isArray(t)?Vq:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?Gq:C1)(e,t)}function Wq(e,t){return e=+e,t=+t,function(r){return Math.round(e*(1-r)+t*r)}}function Xq(e){return function(){return e}}function Yq(e){return+e}var sF=[0,1];function gp(e){return e}function j2(e,t){return(t-=e=+e)?function(r){return(r-e)/t}:Xq(isNaN(t)?NaN:.5)}function Jq(e,t){var r;return e>t&&(r=e,e=t,t=r),function(i){return Math.max(e,Math.min(t,i))}}function eZ(e,t,r){var i=e[0],a=e[1],u=t[0],h=t[1];return a<i?(i=j2(a,i),u=r(h,u)):(i=j2(i,a),u=r(u,h)),function(o){return u(i(o))}}function tZ(e,t,r){var i=Math.min(e.length,t.length)-1,a=new Array(i),u=new Array(i),h=-1;for(e[i]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++h<i;)a[h]=j2(e[h],e[h+1]),u[h]=r(t[h],t[h+1]);return function(o){var g=_q(e,o,1,i)-1;return u[g](a[g](o))}}function rZ(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function nZ(){var e=sF,t=sF,r=rC,i,a,u,h=gp,o,g,y;function C(){var F=Math.min(e.length,t.length);return h!==gp&&(h=Jq(e[0],e[F-1])),o=F>2?tZ:eZ,g=y=null,I}function I(F){return F==null||isNaN(F=+F)?u:(g||(g=o(e.map(i),t,r)))(i(h(F)))}return I.invert=function(F){return h(a((y||(y=o(t,e.map(i),C1)))(F)))},I.domain=function(F){return arguments.length?(e=Array.from(F,Yq),C()):e.slice()},I.range=function(F){return arguments.length?(t=Array.from(F),C()):t.slice()},I.rangeRound=function(F){return t=Array.from(F),r=Wq,C()},I.clamp=function(F){return arguments.length?(h=F?!0:gp,C()):h!==gp},I.interpolate=function(F){return arguments.length?(r=F,C()):r},I.unknown=function(F){return arguments.length?(u=F,I):u},function(F,b){return i=F,a=b,C()}}function iZ(){return nZ()(gp,gp)}function sZ(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function S1(e,t){if((r=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var r,i=e.slice(0,r);return[i.length>1?i[0]+i.slice(2):i,+e.slice(r+1)]}function im(e){return e=S1(Math.abs(e)),e?e[1]:NaN}function oZ(e,t){return function(r,i){for(var a=r.length,u=[],h=0,o=e[0],g=0;a>0&&o>0&&(g+o+1>i&&(o=Math.max(1,i-g)),u.push(r.substring(a-=o,a+o)),!((g+=o+1)>i));)o=e[h=(h+1)%e.length];return u.reverse().join(t)}}function aZ(e){return function(t){return t.replace(/[0-9]/g,function(r){return e[+r]})}}var lZ=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function E1(e){if(!(t=lZ.exec(e)))throw new Error("invalid format: "+e);var t;return new nC({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}E1.prototype=nC.prototype;function nC(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}nC.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function AZ(e){e:for(var t=e.length,r=1,i=-1,a;r<t;++r)switch(e[r]){case".":i=a=r;break;case"0":i===0&&(i=r),a=r;break;default:if(!+e[r])break e;i>0&&(i=0);break}return i>0?e.slice(0,i)+e.slice(a+1):e}var e6;function cZ(e,t){var r=S1(e,t);if(!r)return e+"";var i=r[0],a=r[1],u=a-(e6=Math.max(-8,Math.min(8,Math.floor(a/3)))*3)+1,h=i.length;return u===h?i:u>h?i+new Array(u-h+1).join("0"):u>0?i.slice(0,u)+"."+i.slice(u):"0."+new Array(1-u).join("0")+S1(e,Math.max(0,t+u-1))[0]}function oF(e,t){var r=S1(e,t);if(!r)return e+"";var i=r[0],a=r[1];return a<0?"0."+new Array(-a).join("0")+i:i.length>a+1?i.slice(0,a+1)+"."+i.slice(a+1):i+new Array(a-i.length+2).join("0")}const aF={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:sZ,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>oF(e*100,t),r:oF,s:cZ,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function lF(e){return e}var AF=Array.prototype.map,cF=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function uZ(e){var t=e.grouping===void 0||e.thousands===void 0?lF:oZ(AF.call(e.grouping,Number),e.thousands+""),r=e.currency===void 0?"":e.currency[0]+"",i=e.currency===void 0?"":e.currency[1]+"",a=e.decimal===void 0?".":e.decimal+"",u=e.numerals===void 0?lF:aZ(AF.call(e.numerals,String)),h=e.percent===void 0?"%":e.percent+"",o=e.minus===void 0?"−":e.minus+"",g=e.nan===void 0?"NaN":e.nan+"";function y(I){I=E1(I);var F=I.fill,b=I.align,N=I.sign,U=I.symbol,H=I.zero,k=I.width,R=I.comma,V=I.precision,W=I.trim,se=I.type;se==="n"?(R=!0,se="g"):aF[se]||(V===void 0&&(V=12),W=!0,se="g"),(H||F==="0"&&b==="=")&&(H=!0,F="0",b="=");var fe=U==="$"?r:U==="#"&&/[boxX]/.test(se)?"0"+se.toLowerCase():"",ue=U==="$"?i:/[%p]/.test(se)?h:"",ae=aF[se],Be=/[defgprs%]/.test(se);V=V===void 0?6:/[gprs]/.test(se)?Math.max(1,Math.min(21,V)):Math.max(0,Math.min(20,V));function Ue(te){var de=fe,Te=ue,we,st,Ze;if(se==="c")Te=ae(te)+Te,te="";else{te=+te;var At=te<0||1/te<0;if(te=isNaN(te)?g:ae(Math.abs(te),V),W&&(te=AZ(te)),At&&+te==0&&N!=="+"&&(At=!1),de=(At?N==="("?N:o:N==="-"||N==="("?"":N)+de,Te=(se==="s"?cF[8+e6/3]:"")+Te+(At&&N==="("?")":""),Be){for(we=-1,st=te.length;++we<st;)if(Ze=te.charCodeAt(we),48>Ze||Ze>57){Te=(Ze===46?a+te.slice(we+1):te.slice(we))+Te,te=te.slice(0,we);break}}}R&&!H&&(te=t(te,1/0));var Le=de.length+te.length+Te.length,He=Le<k?new Array(k-Le+1).join(F):"";switch(R&&H&&(te=t(He+te,He.length?k-Te.length:1/0),He=""),b){case"<":te=de+te+Te+He;break;case"=":te=de+He+te+Te;break;case"^":te=He.slice(0,Le=He.length>>1)+de+te+Te+He.slice(Le);break;default:te=He+de+te+Te;break}return u(te)}return Ue.toString=function(){return I+""},Ue}function C(I,F){var b=y((I=E1(I),I.type="f",I)),N=Math.max(-8,Math.min(8,Math.floor(im(F)/3)))*3,U=Math.pow(10,-N),H=cF[8+N/3];return function(k){return b(U*k)+H}}return{format:y,formatPrefix:C}}var Ry,t6,r6;hZ({thousands:",",grouping:[3],currency:["$",""]});function hZ(e){return Ry=uZ(e),t6=Ry.format,r6=Ry.formatPrefix,Ry}function dZ(e){return Math.max(0,-im(Math.abs(e)))}function fZ(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(im(t)/3)))*3-im(Math.abs(e)))}function pZ(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,im(t)-im(e))+1}function mZ(e,t,r,i){var a=Cq(e,t,r),u;switch(i=E1(i??",f"),i.type){case"s":{var h=Math.max(Math.abs(e),Math.abs(t));return i.precision==null&&!isNaN(u=fZ(a,h))&&(i.precision=u),r6(i,h)}case"":case"e":case"g":case"p":case"r":{i.precision==null&&!isNaN(u=pZ(a,Math.max(Math.abs(e),Math.abs(t))))&&(i.precision=u-(i.type==="e"));break}case"f":case"%":{i.precision==null&&!isNaN(u=dZ(a))&&(i.precision=u-(i.type==="%")*2);break}}return t6(i)}function gZ(e){var t=e.domain;return e.ticks=function(r){var i=t();return Bq(i[0],i[i.length-1],r??10)},e.tickFormat=function(r,i){var a=t();return mZ(a[0],a[a.length-1],r??10,i)},e.nice=function(r){r==null&&(r=10);var i=t(),a=0,u=i.length-1,h=i[a],o=i[u],g,y,C=10;for(o<h&&(y=h,h=o,o=y,y=a,a=u,u=y);C-- >0;){if(y=O2(h,o,r),y===g)return i[a]=h,i[u]=o,t(i);if(y>0)h=Math.floor(h/y)*y,o=Math.ceil(o/y)*y;else if(y<0)h=Math.ceil(h*y)/y,o=Math.floor(o*y)/y;else break;g=y}return e},e}function iC(){var e=iZ();return e.copy=function(){return rZ(e,iC())},Sq.apply(e,arguments),gZ(e)}function yZ({filteredData:e,geoJSON:t,selectedMetric:r,regionScope:i,onRenderComplete:a}){const u=re.useRef(null),h=re.useRef(null),o=re.useRef(null),g=re.useRef({}).current,y=re.useMemo(()=>{const b=e.map(N=>N[r]).filter(N=>typeof N=="number"&&N>0).sort((N,U)=>N-U);return b.length<2?null:iC().domain([b[0],b[b.length-1]]).range(["#FFF9B0","#E84C61","#2E0B59"])},[e,r]),{continental:C,alaska:I,hawaii:F}=re.useMemo(()=>{if(i!=="national"||!t)return{continental:t,alaska:null,hawaii:null};const b=[],N=[],U=[],H=new Set(e.filter(R=>R.state==="Alaska").map(R=>R.zipCode)),k=new Set(e.filter(R=>R.state==="Hawaii").map(R=>R.zipCode));return t.features.forEach(R=>{const V=R.properties.zipCode;H.has(V)?N.push(R):k.has(V)?U.push(R):b.push(R)}),{continental:{type:"FeatureCollection",features:b},alaska:{type:"FeatureCollection",features:N},hawaii:{type:"FeatureCollection",features:U}}},[t,i,e]);return re.useEffect(()=>{const b=[{key:"main",ref:u,center:[-98.5,39.8],zoom:3.5,data:C},...i==="national"?[{key:"alaska",ref:h,center:[-152,64],zoom:2.5,data:I},{key:"hawaii",ref:o,center:[-157,21],zoom:5,data:F}]:[]];let N=b.length,U=0;const H=()=>{U++,U===N&&a&&a()};return b.forEach(({key:k,ref:R,center:V,zoom:W,data:se})=>{if(!R.current||g[k])return;const fe=new Pp.Map({container:R.current,style:{version:8,sources:{},layers:[{id:"background",type:"background",paint:{"background-color":"#ffffff"}}]},center:V,zoom:W,interactive:!1,attributionControl:!1});g[k]=fe,fe.on("load",()=>{if(!se||!y||se.features.length===0){H();return}const ue={...se,features:se.features.map(ae=>{const Be=e.find(te=>te.zipCode===ae.properties.zipCode),Ue=Be?Be[r]:0;return{...ae,properties:{...ae.properties,metricValue:Ue}}})};if(fe.addSource(k,{type:"geojson",data:ue}),fe.addLayer({id:`${k}-fill`,type:"fill",source:k,paint:{"fill-color":["case",["!",["has","metricValue"]],"#ccc",["interpolate",["linear"],["get","metricValue"],...y.domain().flatMap(ae=>[ae,y(ae)])]],"fill-opacity":.8}}),k==="main"&&(i==="state"||i==="metro")){const ae=new Pp.LngLatBounds;se.features.forEach(Be=>{var Ue,te;((Ue=Be.geometry)==null?void 0:Ue.type)==="Polygon"&&Be.geometry.coordinates[0].forEach(de=>ae.extend(de)),((te=Be.geometry)==null?void 0:te.type)==="MultiPolygon"&&Be.geometry.coordinates.forEach(de=>de[0].forEach(Te=>ae.extend(Te)))}),ae.isEmpty()||fe.fitBounds(ae,{padding:40,duration:0})}fe.once("idle",H)})}),()=>{Object.values(g).forEach(k=>k==null?void 0:k.remove())}},[C,I,F,y,a,i,r,e]),X.jsxs("div",{className:"relative w-full h-full",children:[X.jsx("div",{ref:u,className:"w-full h-full"}),i==="national"&&X.jsxs(X.Fragment,{children:[X.jsx("div",{className:"absolute bottom-4 left-4 w-40 h-32 border border-gray-300 rounded bg-white",children:X.jsx("div",{ref:h,className:"w-full h-full"})}),X.jsx("div",{className:"absolute bottom-4 left-48 w-32 h-24 border border-gray-300 rounded bg-white",children:X.jsx("div",{ref:o,className:"w-full h-full"})})]})]})}function Fv(e,t){if(!e||!e.zipCode)return'<div class="p-2">No data available</div>';const i={"median-sale-price":{key:"median_sale_price",label:"Median Sale Price",format:"currency"},"median-list-price":{key:"median_list_price",label:"Median List Price",format:"currency"},"median-dom":{key:"median_dom",label:"Median Days on Market",format:"number"},inventory:{key:"inventory",label:"Inventory",format:"number"},"new-listings":{key:"new_listings",label:"New Listings",format:"number"},"homes-sold":{key:"homes_sold",label:"Homes Sold",format:"number"},"sale-to-list-ratio":{key:"avg_sale_to_list_ratio",label:"Sale-to-List Ratio",format:"ratio"},"homes-sold-above-list":{key:"sold_above_list",label:"% Sold Above List",format:"percent"},"off-market-2-weeks":{key:"off_market_in_two_weeks",label:"% Off Market in 2 Weeks",format:"percent"}}[t],a=i?e[i.key]:null;let u="N/A";if(typeof a=="number"&&isFinite(a))switch(i.format){case"currency":u=`$${a.toLocaleString()}`;break;case"percent":u=`${a.toFixed(1)}%`;break;case"ratio":u=`${(a*100).toFixed(1)}%`;break;case"number":u=a.toLocaleString();break}return`
    <div class="p-2 bg-white rounded shadow-lg border text-black font-sans">
      <div class="font-bold text-base">${e.zipCode}</div>
      <div class="text-sm text-gray-600">${e.city||"Unknown City"}, ${e.state}</div>
      <div class="text-sm mt-2">
        <span class="font-semibold">${(i==null?void 0:i.label)||t}:</span>
        <span class="font-normal"> ${u}</span>
      </div>
    </div>
  `}function vZ({filteredZipData:e,selectedMetric:t,exportOptions:r,className:i=""}){const a=re.useMemo(()=>{if(e.length===0)return{minDisplay:"N/A",maxDisplay:"N/A",quintileDisplays:[],zipCount:0};const y=e.map(N=>N[t]).filter(N=>typeof N=="number"&&N>0).sort((N,U)=>N-U);if(y.length===0)return{minDisplay:"N/A",maxDisplay:"N/A",quintileDisplays:[],zipCount:e.length};const C=e.find(N=>N[t]===y[0]),I=e.find(N=>N[t]===y[y.length-1]),F=[];for(let N=0;N<=4;N++){const U=Math.floor((y.length-1)*(N/4)),H=y[U],k=e.find(R=>R[t]===H);if(k){const R=Fv(k,t);F.push(R.replace(/<[^>]*>?/gm,""))}else F.push("N/A")}const b=N=>N.replace(/<[^>]*>?/gm,"");return{minDisplay:C?b(Fv(C,t)):"N/A",maxDisplay:I?b(Fv(I,t)):"N/A",quintileDisplays:F,zipCount:e.length}},[e,t]),{minDisplay:u,maxDisplay:h,quintileDisplays:o,zipCount:g}=a;return X.jsxs("div",{className:`bg-white border border-gray-300 rounded p-4 inline-block ${i}`,children:[X.jsx("h3",{className:"text-sm font-semibold mb-3 text-gray-900",children:"Legend"}),X.jsxs("div",{className:"mb-3",children:[X.jsx("div",{className:"h-4 rounded-lg",style:{background:"linear-gradient(to right, #FFF9B0, #FFA873, #E84C61, #922C7E, #2E0B59)"}}),X.jsxs("div",{className:"flex justify-between text-xs text-gray-600 mt-1",children:[X.jsx("span",{children:u}),X.jsx("span",{children:h})]})]}),X.jsx("div",{className:"grid grid-cols-5 gap-2 mb-3",children:o.map((y,C)=>{const I=["#FFF9B0","#FFA873","#E84C61","#922C7E","#2E0B59"];return X.jsxs("div",{className:"text-center",children:[X.jsx("div",{className:"w-4 h-4 rounded mx-auto mb-1",style:{backgroundColor:I[C]}}),X.jsx("span",{className:"text-[10px] text-gray-600 leading-tight block",children:y})]},C)})}),X.jsxs("div",{className:"text-xs text-gray-500 text-center pt-2 border-t border-gray-200",children:[g.toLocaleString()," ZIP codes"]})]})}function _Z({className:e,showText:t=!0,size:r="md"}){const i={sm:"w-6 h-6",md:"w-8 h-8",lg:"w-12 h-12"},a={sm:"text-sm",md:"text-base",lg:"text-xl"};return X.jsxs("div",{className:Qn("flex items-center space-x-2",e),children:[X.jsx("div",{className:Qn("relative",i[r]),children:X.jsxs("svg",{viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:"w-full h-full",children:[X.jsx("path",{d:"M4 6h24c1.1 0 2 .9 2 2v16c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V8c0-1.1.9-2 2-2z",stroke:"currentColor",strokeWidth:"2",fill:"none"}),X.jsx("path",{d:"M12 10l4-3 4 3v8h-2v-4h-4v4h-2v-8z",fill:"currentColor"}),X.jsx("path",{d:"M8 12h16M8 16h16M8 20h16M12 8v16M20 8v16",stroke:"currentColor",strokeWidth:"0.5",opacity:"0.3"}),X.jsx("circle",{cx:"10",cy:"14",r:"1",fill:"currentColor",opacity:"0.6"}),X.jsx("circle",{cx:"14",cy:"18",r:"1",fill:"currentColor",opacity:"0.6"}),X.jsx("circle",{cx:"22",cy:"12",r:"1",fill:"currentColor",opacity:"0.6"}),X.jsx("circle",{cx:"24",cy:"20",r:"1",fill:"currentColor",opacity:"0.6"})]})}),t&&X.jsx("span",{className:Qn("font-bold text-gray-800",a[r]),children:"Domapus"})]})}/*!
 * html2canvas 1.4.1 <https://html2canvas.hertzen.com>
 * Copyright (c) 2022 Niklas von Hertzen <https://hertzen.com>
 * Released under MIT License
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var V2=function(e,t){return V2=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(r[a]=i[a])},V2(e,t)};function qA(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");V2(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var K2=function(){return K2=Object.assign||function(t){for(var r,i=1,a=arguments.length;i<a;i++){r=arguments[i];for(var u in r)Object.prototype.hasOwnProperty.call(r,u)&&(t[u]=r[u])}return t},K2.apply(this,arguments)};function ya(e,t,r,i){function a(u){return u instanceof r?u:new r(function(h){h(u)})}return new(r||(r=Promise))(function(u,h){function o(C){try{y(i.next(C))}catch(I){h(I)}}function g(C){try{y(i.throw(C))}catch(I){h(I)}}function y(C){C.done?u(C.value):a(C.value).then(o,g)}y((i=i.apply(e,[])).next())})}function Yo(e,t){var r={label:0,sent:function(){if(u[0]&1)throw u[1];return u[1]},trys:[],ops:[]},i,a,u,h;return h={next:o(0),throw:o(1),return:o(2)},typeof Symbol=="function"&&(h[Symbol.iterator]=function(){return this}),h;function o(y){return function(C){return g([y,C])}}function g(y){if(i)throw new TypeError("Generator is already executing.");for(;r;)try{if(i=1,a&&(u=y[0]&2?a.return:y[0]?a.throw||((u=a.return)&&u.call(a),0):a.next)&&!(u=u.call(a,y[1])).done)return u;switch(a=0,u&&(y=[y[0]&2,u.value]),y[0]){case 0:case 1:u=y;break;case 4:return r.label++,{value:y[1],done:!1};case 5:r.label++,a=y[1],y=[0];continue;case 7:y=r.ops.pop(),r.trys.pop();continue;default:if(u=r.trys,!(u=u.length>0&&u[u.length-1])&&(y[0]===6||y[0]===2)){r=0;continue}if(y[0]===3&&(!u||y[1]>u[0]&&y[1]<u[3])){r.label=y[1];break}if(y[0]===6&&r.label<u[1]){r.label=u[1],u=y;break}if(u&&r.label<u[2]){r.label=u[2],r.ops.push(y);break}u[2]&&r.ops.pop(),r.trys.pop();continue}y=t.call(e,r)}catch(C){y=[6,C],a=0}finally{i=u=0}if(y[0]&5)throw y[1];return{value:y[0]?y[1]:void 0,done:!0}}}function Ny(e,t,r){if(arguments.length===2)for(var i=0,a=t.length,u;i<a;i++)(u||!(i in t))&&(u||(u=Array.prototype.slice.call(t,0,i)),u[i]=t[i]);return e.concat(u||t)}var Du=function(){function e(t,r,i,a){this.left=t,this.top=r,this.width=i,this.height=a}return e.prototype.add=function(t,r,i,a){return new e(this.left+t,this.top+r,this.width+i,this.height+a)},e.fromClientRect=function(t,r){return new e(r.left+t.windowBounds.left,r.top+t.windowBounds.top,r.width,r.height)},e.fromDOMRectList=function(t,r){var i=Array.from(r).find(function(a){return a.width!==0});return i?new e(i.left+t.windowBounds.left,i.top+t.windowBounds.top,i.width,i.height):e.EMPTY},e.EMPTY=new e(0,0,0,0),e}(),I_=function(e,t){return Du.fromClientRect(e,t.getBoundingClientRect())},wZ=function(e){var t=e.body,r=e.documentElement;if(!t||!r)throw new Error("Unable to get document size");var i=Math.max(Math.max(t.scrollWidth,r.scrollWidth),Math.max(t.offsetWidth,r.offsetWidth),Math.max(t.clientWidth,r.clientWidth)),a=Math.max(Math.max(t.scrollHeight,r.scrollHeight),Math.max(t.offsetHeight,r.offsetHeight),Math.max(t.clientHeight,r.clientHeight));return new Du(0,0,i,a)},F_=function(e){for(var t=[],r=0,i=e.length;r<i;){var a=e.charCodeAt(r++);if(a>=55296&&a<=56319&&r<i){var u=e.charCodeAt(r++);(u&64512)===56320?t.push(((a&1023)<<10)+(u&1023)+65536):(t.push(a),r--)}else t.push(a)}return t},vs=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(String.fromCodePoint)return String.fromCodePoint.apply(String,e);var r=e.length;if(!r)return"";for(var i=[],a=-1,u="";++a<r;){var h=e[a];h<=65535?i.push(h):(h-=65536,i.push((h>>10)+55296,h%1024+56320)),(a+1===r||i.length>16384)&&(u+=String.fromCharCode.apply(String,i),i.length=0)}return u},uF="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",xZ=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var Dy=0;Dy<uF.length;Dy++)xZ[uF.charCodeAt(Dy)]=Dy;var hF="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",lg=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var Qy=0;Qy<hF.length;Qy++)lg[hF.charCodeAt(Qy)]=Qy;var bZ=function(e){var t=e.length*.75,r=e.length,i,a=0,u,h,o,g;e[e.length-1]==="="&&(t--,e[e.length-2]==="="&&t--);var y=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(t):new Array(t),C=Array.isArray(y)?y:new Uint8Array(y);for(i=0;i<r;i+=4)u=lg[e.charCodeAt(i)],h=lg[e.charCodeAt(i+1)],o=lg[e.charCodeAt(i+2)],g=lg[e.charCodeAt(i+3)],C[a++]=u<<2|h>>4,C[a++]=(h&15)<<4|o>>2,C[a++]=(o&3)<<6|g&63;return y},BZ=function(e){for(var t=e.length,r=[],i=0;i<t;i+=2)r.push(e[i+1]<<8|e[i]);return r},CZ=function(e){for(var t=e.length,r=[],i=0;i<t;i+=4)r.push(e[i+3]<<24|e[i+2]<<16|e[i+1]<<8|e[i]);return r},Jd=5,sC=11,Ux=2,SZ=sC-Jd,n6=65536>>Jd,EZ=1<<Jd,Rx=EZ-1,IZ=1024>>Jd,FZ=n6+IZ,TZ=FZ,PZ=32,LZ=TZ+PZ,MZ=65536>>sC,kZ=1<<SZ,UZ=kZ-1,dF=function(e,t,r){return e.slice?e.slice(t,r):new Uint16Array(Array.prototype.slice.call(e,t,r))},RZ=function(e,t,r){return e.slice?e.slice(t,r):new Uint32Array(Array.prototype.slice.call(e,t,r))},NZ=function(e,t){var r=bZ(e),i=Array.isArray(r)?CZ(r):new Uint32Array(r),a=Array.isArray(r)?BZ(r):new Uint16Array(r),u=24,h=dF(a,u/2,i[4]/2),o=i[5]===2?dF(a,(u+i[4])/2):RZ(i,Math.ceil((u+i[4])/4));return new DZ(i[0],i[1],i[2],i[3],h,o)},DZ=function(){function e(t,r,i,a,u,h){this.initialValue=t,this.errorValue=r,this.highStart=i,this.highValueIndex=a,this.index=u,this.data=h}return e.prototype.get=function(t){var r;if(t>=0){if(t<55296||t>56319&&t<=65535)return r=this.index[t>>Jd],r=(r<<Ux)+(t&Rx),this.data[r];if(t<=65535)return r=this.index[n6+(t-55296>>Jd)],r=(r<<Ux)+(t&Rx),this.data[r];if(t<this.highStart)return r=LZ-MZ+(t>>sC),r=this.index[r],r+=t>>Jd&UZ,r=this.index[r],r=(r<<Ux)+(t&Rx),this.data[r];if(t<=1114111)return this.data[this.highValueIndex]}return this.errorValue},e}(),fF="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",QZ=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var Oy=0;Oy<fF.length;Oy++)QZ[fF.charCodeAt(Oy)]=Oy;var OZ="KwAAAAAAAAAACA4AUD0AADAgAAACAAAAAAAIABAAGABAAEgAUABYAGAAaABgAGgAYgBqAF8AZwBgAGgAcQB5AHUAfQCFAI0AlQCdAKIAqgCyALoAYABoAGAAaABgAGgAwgDKAGAAaADGAM4A0wDbAOEA6QDxAPkAAQEJAQ8BFwF1AH0AHAEkASwBNAE6AUIBQQFJAVEBWQFhAWgBcAF4ATAAgAGGAY4BlQGXAZ8BpwGvAbUBvQHFAc0B0wHbAeMB6wHxAfkBAQIJAvEBEQIZAiECKQIxAjgCQAJGAk4CVgJeAmQCbAJ0AnwCgQKJApECmQKgAqgCsAK4ArwCxAIwAMwC0wLbAjAA4wLrAvMC+AIAAwcDDwMwABcDHQMlAy0DNQN1AD0DQQNJA0kDSQNRA1EDVwNZA1kDdQB1AGEDdQBpA20DdQN1AHsDdQCBA4kDkQN1AHUAmQOhA3UAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AKYDrgN1AHUAtgO+A8YDzgPWAxcD3gPjA+sD8wN1AHUA+wMDBAkEdQANBBUEHQQlBCoEFwMyBDgEYABABBcDSARQBFgEYARoBDAAcAQzAXgEgASIBJAEdQCXBHUAnwSnBK4EtgS6BMIEyAR1AHUAdQB1AHUAdQCVANAEYABgAGAAYABgAGAAYABgANgEYADcBOQEYADsBPQE/AQEBQwFFAUcBSQFLAU0BWQEPAVEBUsFUwVbBWAAYgVgAGoFcgV6BYIFigWRBWAAmQWfBaYFYABgAGAAYABgAKoFYACxBbAFuQW6BcEFwQXHBcEFwQXPBdMF2wXjBeoF8gX6BQIGCgYSBhoGIgYqBjIGOgZgAD4GRgZMBmAAUwZaBmAAYABgAGAAYABgAGAAYABgAGAAYABgAGIGYABpBnAGYABgAGAAYABgAGAAYABgAGAAYAB4Bn8GhQZgAGAAYAB1AHcDFQSLBmAAYABgAJMGdQA9A3UAmwajBqsGqwaVALMGuwbDBjAAywbSBtIG1QbSBtIG0gbSBtIG0gbdBuMG6wbzBvsGAwcLBxMHAwcbByMHJwcsBywHMQcsB9IGOAdAB0gHTgfSBkgHVgfSBtIG0gbSBtIG0gbSBtIG0gbSBiwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdgAGAALAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdbB2MHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB2kH0gZwB64EdQB1AHUAdQB1AHUAdQB1AHUHfQdgAIUHjQd1AHUAlQedB2AAYAClB6sHYACzB7YHvgfGB3UAzgfWBzMB3gfmB1EB7gf1B/0HlQENAQUIDQh1ABUIHQglCBcDLQg1CD0IRQhNCEEDUwh1AHUAdQBbCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIcAh3CHoIMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIgggwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAALAcsBywHLAcsBywHLAcsBywHLAcsB4oILAcsB44I0gaWCJ4Ipgh1AHUAqgiyCHUAdQB1AHUAdQB1AHUAdQB1AHUAtwh8AXUAvwh1AMUIyQjRCNkI4AjoCHUAdQB1AO4I9gj+CAYJDgkTCS0HGwkjCYIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiAAIAAAAFAAYABgAGIAXwBgAHEAdQBFAJUAogCyAKAAYABgAEIA4ABGANMA4QDxAMEBDwE1AFwBLAE6AQEBUQF4QkhCmEKoQrhCgAHIQsAB0MLAAcABwAHAAeDC6ABoAHDCwMMAAcABwAHAAdDDGMMAAcAB6MM4wwjDWMNow3jDaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAEjDqABWw6bDqABpg6gAaABoAHcDvwOPA+gAaABfA/8DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DpcPAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcAB9cPKwkyCToJMAB1AHUAdQBCCUoJTQl1AFUJXAljCWcJawkwADAAMAAwAHMJdQB2CX4JdQCECYoJjgmWCXUAngkwAGAAYABxAHUApgn3A64JtAl1ALkJdQDACTAAMAAwADAAdQB1AHUAdQB1AHUAdQB1AHUAowYNBMUIMAAwADAAMADICcsJ0wnZCRUE4QkwAOkJ8An4CTAAMAB1AAAKvwh1AAgKDwoXCh8KdQAwACcKLgp1ADYKqAmICT4KRgowADAAdQB1AE4KMAB1AFYKdQBeCnUAZQowADAAMAAwADAAMAAwADAAMAAVBHUAbQowADAAdQC5CXUKMAAwAHwBxAijBogEMgF9CoQKiASMCpQKmgqIBKIKqgquCogEDQG2Cr4KxgrLCjAAMADTCtsKCgHjCusK8Qr5CgELMAAwADAAMAB1AIsECQsRC3UANAEZCzAAMAAwADAAMAB1ACELKQswAHUANAExCzkLdQBBC0kLMABRC1kLMAAwADAAMAAwADAAdQBhCzAAMAAwAGAAYABpC3ELdwt/CzAAMACHC4sLkwubC58Lpwt1AK4Ltgt1APsDMAAwADAAMAAwADAAMAAwAL4LwwvLC9IL1wvdCzAAMADlC+kL8Qv5C/8LSQswADAAMAAwADAAMAAwADAAMAAHDDAAMAAwADAAMAAODBYMHgx1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1ACYMMAAwADAAdQB1AHUALgx1AHUAdQB1AHUAdQA2DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AD4MdQBGDHUAdQB1AHUAdQB1AEkMdQB1AHUAdQB1AFAMMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQBYDHUAdQB1AF8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUA+wMVBGcMMAAwAHwBbwx1AHcMfwyHDI8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAYABgAJcMMAAwADAAdQB1AJ8MlQClDDAAMACtDCwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB7UMLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AA0EMAC9DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAsBywHLAcsBywHLAcsBywHLQcwAMEMyAwsBywHLAcsBywHLAcsBywHLAcsBywHzAwwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1ANQM2QzhDDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMABgAGAAYABgAGAAYABgAOkMYADxDGAA+AwADQYNYABhCWAAYAAODTAAMAAwADAAFg1gAGAAHg37AzAAMAAwADAAYABgACYNYAAsDTQNPA1gAEMNPg1LDWAAYABgAGAAYABgAGAAYABgAGAAUg1aDYsGVglhDV0NcQBnDW0NdQ15DWAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAlQCBDZUAiA2PDZcNMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAnw2nDTAAMAAwADAAMAAwAHUArw23DTAAMAAwADAAMAAwADAAMAAwADAAMAB1AL8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQDHDTAAYABgAM8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA1w11ANwNMAAwAD0B5A0wADAAMAAwADAAMADsDfQN/A0EDgwOFA4wABsOMAAwADAAMAAwADAAMAAwANIG0gbSBtIG0gbSBtIG0gYjDigOwQUuDsEFMw7SBjoO0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGQg5KDlIOVg7SBtIGXg5lDm0OdQ7SBtIGfQ6EDooOjQ6UDtIGmg6hDtIG0gaoDqwO0ga0DrwO0gZgAGAAYADEDmAAYAAkBtIGzA5gANIOYADaDokO0gbSBt8O5w7SBu8O0gb1DvwO0gZgAGAAxA7SBtIG0gbSBtIGYABgAGAAYAAED2AAsAUMD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHJA8sBywHLAcsBywHLAccDywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywPLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAc0D9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHPA/SBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gYUD0QPlQCVAJUAMAAwADAAMACVAJUAlQCVAJUAlQCVAEwPMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA//8EAAQABAAEAAQABAAEAAQABAANAAMAAQABAAIABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQACgATABcAHgAbABoAHgAXABYAEgAeABsAGAAPABgAHABLAEsASwBLAEsASwBLAEsASwBLABgAGAAeAB4AHgATAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABYAGwASAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWAA0AEQAeAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAFAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJABYAGgAbABsAGwAeAB0AHQAeAE8AFwAeAA0AHgAeABoAGwBPAE8ADgBQAB0AHQAdAE8ATwAXAE8ATwBPABYAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAFAATwBAAE8ATwBPAEAATwBQAFAATwBQAB4AHgAeAB4AHgAeAB0AHQAdAB0AHgAdAB4ADgBQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgBQAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAkACQAJAAkACQAJAAkABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAFAAHgAeAB4AKwArAFAAUABQAFAAGABQACsAKwArACsAHgAeAFAAHgBQAFAAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUAAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAYAA0AKwArAB4AHgAbACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAB4ABAAEAB4ABAAEABMABAArACsAKwArACsAKwArACsAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAKwArACsAKwBWAFYAVgBWAB4AHgArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AGgAaABoAGAAYAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQAEwAEACsAEwATAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABLAEsASwBLAEsASwBLAEsASwBLABoAGQAZAB4AUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABMAUAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABABQAFAABAAEAB4ABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUAAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAFAABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQAUABQAB4AHgAYABMAUAArACsABAAbABsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAFAABAAEAAQABAAEAFAABAAEAAQAUAAEAAQABAAEAAQAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArACsAHgArAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAUAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEAA0ADQBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUAArACsAKwBQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABABQACsAKwArACsAKwArACsAKwAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUAAaABoAUABQAFAAUABQAEwAHgAbAFAAHgAEACsAKwAEAAQABAArAFAAUABQAFAAUABQACsAKwArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQACsAUABQACsAKwAEACsABAAEAAQABAAEACsAKwArACsABAAEACsAKwAEAAQABAArACsAKwAEACsAKwArACsAKwArACsAUABQAFAAUAArAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLAAQABABQAFAAUAAEAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAArACsAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AGwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAKwArACsAKwArAAQABAAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAAQAUAArAFAAUABQAFAAUABQACsAKwArAFAAUABQACsAUABQAFAAUAArACsAKwBQAFAAKwBQACsAUABQACsAKwArAFAAUAArACsAKwBQAFAAUAArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArAAQABAAEAAQABAArACsAKwAEAAQABAArAAQABAAEAAQAKwArAFAAKwArACsAKwArACsABAArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAHgAeAB4AHgAeAB4AGwAeACsAKwArACsAKwAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAUABQAFAAKwArACsAKwArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwAOAFAAUABQAFAAUABQAFAAHgBQAAQABAAEAA4AUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAKwArAAQAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAKwArACsAKwArACsAUAArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAFAABAAEAAQABAAEAAQABAArAAQABAAEACsABAAEAAQABABQAB4AKwArACsAKwBQAFAAUAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQABoAUABQAFAAUABQAFAAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQACsAUAArACsAUABQAFAAUABQAFAAUAArACsAKwAEACsAKwArACsABAAEAAQABAAEAAQAKwAEACsABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArAAQABAAeACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAXAAqACoAKgAqACoAKgAqACsAKwArACsAGwBcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAeAEsASwBLAEsASwBLAEsASwBLAEsADQANACsAKwArACsAKwBcAFwAKwBcACsAXABcAFwAXABcACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAXAArAFwAXABcAFwAXABcAFwAXABcAFwAKgBcAFwAKgAqACoAKgAqACoAKgAqACoAXAArACsAXABcAFwAXABcACsAXAArACoAKgAqACoAKgAqACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwBcAFwAXABcAFAADgAOAA4ADgAeAA4ADgAJAA4ADgANAAkAEwATABMAEwATAAkAHgATAB4AHgAeAAQABAAeAB4AHgAeAB4AHgBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQAFAADQAEAB4ABAAeAAQAFgARABYAEQAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAAQABAAEAAQADQAEAAQAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAA0ADQAeAB4AHgAeAB4AHgAEAB4AHgAeAB4AHgAeACsAHgAeAA4ADgANAA4AHgAeAB4AHgAeAAkACQArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgBcAEsASwBLAEsASwBLAEsASwBLAEsADQANAB4AHgAeAB4AXABcAFwAXABcAFwAKgAqACoAKgBcAFwAXABcACoAKgAqAFwAKgAqACoAXABcACoAKgAqACoAKgAqACoAXABcAFwAKgAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqAFwAKgBLAEsASwBLAEsASwBLAEsASwBLACoAKgAqACoAKgAqAFAAUABQAFAAUABQACsAUAArACsAKwArACsAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAKwBQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsABAAEAAQAHgANAB4AHgAeAB4AHgAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUAArACsADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWABEAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQANAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAANAA0AKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUAArAAQABAArACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqAA0ADQAVAFwADQAeAA0AGwBcACoAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwAeAB4AEwATAA0ADQAOAB4AEwATAB4ABAAEAAQACQArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAHgArACsAKwATABMASwBLAEsASwBLAEsASwBLAEsASwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAXABcAFwAXABcACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAXAArACsAKwAqACoAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsAHgAeAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKwAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKwArAAQASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACoAKgAqACoAKgAqACoAXAAqACoAKgAqACoAKgArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABABQAFAAUABQAFAAUABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwANAA0AHgANAA0ADQANAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwAeAB4AHgAeAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArAA0ADQANAA0ADQBLAEsASwBLAEsASwBLAEsASwBLACsAKwArAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUAAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAAQAUABQAFAAUABQAFAABABQAFAABAAEAAQAUAArACsAKwArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQACsAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAFAAUABQACsAHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQACsAKwAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQACsAHgAeAB4AHgAeAB4AHgAOAB4AKwANAA0ADQANAA0ADQANAAkADQANAA0ACAAEAAsABAAEAA0ACQANAA0ADAAdAB0AHgAXABcAFgAXABcAFwAWABcAHQAdAB4AHgAUABQAFAANAAEAAQAEAAQABAAEAAQACQAaABoAGgAaABoAGgAaABoAHgAXABcAHQAVABUAHgAeAB4AHgAeAB4AGAAWABEAFQAVABUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ADQAeAA0ADQANAA0AHgANAA0ADQAHAB4AHgAeAB4AKwAEAAQABAAEAAQABAAEAAQABAAEAFAAUAArACsATwBQAFAAUABQAFAAHgAeAB4AFgARAE8AUABPAE8ATwBPAFAAUABQAFAAUAAeAB4AHgAWABEAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArABsAGwAbABsAGwAbABsAGgAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGgAbABsAGwAbABoAGwAbABoAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAHgAeAFAAGgAeAB0AHgBQAB4AGgAeAB4AHgAeAB4AHgAeAB4AHgBPAB4AUAAbAB4AHgBQAFAAUABQAFAAHgAeAB4AHQAdAB4AUAAeAFAAHgBQAB4AUABPAFAAUAAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgBQAFAAUABQAE8ATwBQAFAAUABQAFAATwBQAFAATwBQAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAUABQAFAATwBPAE8ATwBPAE8ATwBPAE8ATwBQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABPAB4AHgArACsAKwArAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHQAdAB4AHgAeAB0AHQAeAB4AHQAeAB4AHgAdAB4AHQAbABsAHgAdAB4AHgAeAB4AHQAeAB4AHQAdAB0AHQAeAB4AHQAeAB0AHgAdAB0AHQAdAB0AHQAeAB0AHgAeAB4AHgAeAB0AHQAdAB0AHgAeAB4AHgAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHgAeAB0AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAeAB0AHQAdAB0AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAdAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAWABEAHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAWABEAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AHQAdAB0AHgAeAB0AHgAeAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlAB4AHQAdAB4AHgAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AJQAlAB0AHQAlAB4AJQAlACUAIAAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAdAB0AHQAeAB0AJQAdAB0AHgAdAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAdAB0AHQAdACUAHgAlACUAJQAdACUAJQAdAB0AHQAlACUAHQAdACUAHQAdACUAJQAlAB4AHQAeAB4AHgAeAB0AHQAlAB0AHQAdAB0AHQAdACUAJQAlACUAJQAdACUAJQAgACUAHQAdACUAJQAlACUAJQAlACUAJQAeAB4AHgAlACUAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AFwAXABcAFwAXABcAHgATABMAJQAeAB4AHgAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARABYAEQAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAEAAQABAAeAB4AKwArACsAKwArABMADQANAA0AUAATAA0AUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUAANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAA0ADQANAA0ADQANAA0ADQAeAA0AFgANAB4AHgAXABcAHgAeABcAFwAWABEAFgARABYAEQAWABEADQANAA0ADQATAFAADQANAB4ADQANAB4AHgAeAB4AHgAMAAwADQANAA0AHgANAA0AFgANAA0ADQANAA0ADQANAA0AHgANAB4ADQANAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArAA0AEQARACUAJQBHAFcAVwAWABEAFgARABYAEQAWABEAFgARACUAJQAWABEAFgARABYAEQAWABEAFQAWABEAEQAlAFcAVwBXAFcAVwBXAFcAVwBXAAQABAAEAAQABAAEACUAVwBXAFcAVwA2ACUAJQBXAFcAVwBHAEcAJQAlACUAKwBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBRAFcAUQBXAFEAVwBXAFcAVwBXAFcAUQBXAFcAVwBXAFcAVwBRAFEAKwArAAQABAAVABUARwBHAFcAFQBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBRAFcAVwBXAFcAVwBXAFEAUQBXAFcAVwBXABUAUQBHAEcAVwArACsAKwArACsAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwAlACUAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACsAKwArACsAKwArACsAKwArACsAKwArAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBPAE8ATwBPAE8ATwBPAE8AJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADQATAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABLAEsASwBLAEsASwBLAEsASwBLAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAABAAEAAQABAAeAAQABAAEAAQABAAEAAQABAAEAAQAHgBQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAeAA0ADQANAA0ADQArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAAQAUABQAFAABABQAFAAUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAeAB4AHgAeAAQAKwArACsAUABQAFAAUABQAFAAHgAeABoAHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADgAOABMAEwArACsAKwArACsAKwArACsABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwANAA0ASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUAAeAB4AHgBQAA4AUABQAAQAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArAB4AWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYACsAKwArAAQAHgAeAB4AHgAeAB4ADQANAA0AHgAeAB4AHgArAFAASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArAB4AHgBcAFwAXABcAFwAKgBcAFwAXABcAFwAXABcAFwAXABcAEsASwBLAEsASwBLAEsASwBLAEsAXABcAFwAXABcACsAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAFAAUABQAAQAUABQAFAAUABQAFAAUABQAAQABAArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAHgANAA0ADQBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAXAAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAKgAqACoAXABcACoAKgBcAFwAXABcAFwAKgAqAFwAKgBcACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcACoAKgBQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAA0ADQBQAFAAUAAEAAQAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQADQAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAVABVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBUAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVACsAKwArACsAKwArACsAKwArACsAKwArAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAKwArACsAKwBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAKwArACsAKwAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAKwArACsAKwArAFYABABWAFYAVgBWAFYAVgBWAFYAVgBWAB4AVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgArAFYAVgBWAFYAVgArAFYAKwBWAFYAKwBWAFYAKwBWAFYAVgBWAFYAVgBWAFYAVgBWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAEQAWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAaAB4AKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAGAARABEAGAAYABMAEwAWABEAFAArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACUAJQAlACUAJQAWABEAFgARABYAEQAWABEAFgARABYAEQAlACUAFgARACUAJQAlACUAJQAlACUAEQAlABEAKwAVABUAEwATACUAFgARABYAEQAWABEAJQAlACUAJQAlACUAJQAlACsAJQAbABoAJQArACsAKwArAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAcAKwATACUAJQAbABoAJQAlABYAEQAlACUAEQAlABEAJQBXAFcAVwBXAFcAVwBXAFcAVwBXABUAFQAlACUAJQATACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXABYAJQARACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAWACUAEQAlABYAEQARABYAEQARABUAVwBRAFEAUQBRAFEAUQBRAFEAUQBRAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcARwArACsAVwBXAFcAVwBXAFcAKwArAFcAVwBXAFcAVwBXACsAKwBXAFcAVwBXAFcAVwArACsAVwBXAFcAKwArACsAGgAbACUAJQAlABsAGwArAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAAQAB0AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsADQANAA0AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAA0AUABQAFAAUAArACsAKwArAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwArAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwBQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAUABQAFAAUABQAAQABAAEACsABAAEACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAKwBQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAA0ADQANAA0ADQANAA0ADQAeACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAArACsAKwArAFAAUABQAFAAUAANAA0ADQANAA0ADQAUACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsADQANAA0ADQANAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArAAQABAANACsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAB4AHgAeAB4AHgArACsAKwArACsAKwAEAAQABAAEAAQABAAEAA0ADQAeAB4AHgAeAB4AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsASwBLAEsASwBLAEsASwBLAEsASwANAA0ADQANAFAABAAEAFAAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAeAA4AUAArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAADQANAB4ADQAEAAQABAAEAB4ABAAEAEsASwBLAEsASwBLAEsASwBLAEsAUAAOAFAADQANAA0AKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAANAA0AHgANAA0AHgAEACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAA0AKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsABAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsABAAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAUAArACsAKwArACsAKwAEACsAKwArACsAKwBQAFAAUABQAFAABAAEACsAKwAEAAQABAAEAAQABAAEACsAKwArAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAAQABABQAFAAUABQAA0ADQANAA0AHgBLAEsASwBLAEsASwBLAEsASwBLAA0ADQArAB4ABABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUAAeAFAAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABAAEAAQADgANAA0AEwATAB4AHgAeAA0ADQANAA0ADQANAA0ADQANAA0ADQANAA0ADQANAFAAUABQAFAABAAEACsAKwAEAA0ADQAeAFAAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKwArACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBcAFwADQANAA0AKgBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAKwArAFAAKwArAFAAUABQAFAAUABQAFAAUAArAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQAKwAEAAQAKwArAAQABAAEAAQAUAAEAFAABAAEAA0ADQANACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABABQAA4AUAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAFAABAAEAAQABAAOAB4ADQANAA0ADQAOAB4ABAArACsAKwArACsAKwArACsAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAA0ADQANAFAADgAOAA4ADQANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAAQABAAEAFAADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAOABMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAArACsAKwAEACsABAAEACsABAAEAAQABAAEAAQABABQAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAaABoAGgAaAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABIAEgAQwBDAEMAUABQAFAAUABDAFAAUABQAEgAQwBIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABDAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAJAAkACQAJAAkACQAJABYAEQArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwANAA0AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAANACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAA0ADQANAB4AHgAeAB4AHgAeAFAAUABQAFAADQAeACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAA0AHgAeACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAARwBHABUARwAJACsAKwArACsAKwArACsAKwArACsAKwAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUQBRAFEAKwArACsAKwArACsAKwArACsAKwArACsAKwBRAFEAUQBRACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAHgAEAAQADQAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQABAAEAAQABAAeAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQAHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAKwArAFAAKwArAFAAUAArACsAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUAArAFAAUABQAFAAUABQAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAHgAeAFAAUABQAFAAUAArAFAAKwArACsAUABQAFAAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeACsAKwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4ABAAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAHgAeAA0ADQANAA0AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArAAQABAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwBQAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArABsAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAB4AHgAeAB4ABAAEAAQABAAEAAQABABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArABYAFgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAGgBQAFAAUAAaAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUAArACsAKwArACsAKwBQACsAKwArACsAUAArAFAAKwBQACsAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUAArAFAAKwBQACsAUAArAFAAUAArAFAAKwArAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAKwBQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8AJQAlACUAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB4AHgAeACUAJQAlAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAlACUAJQAlACUAHgAlACUAJQAlACUAIAAgACAAJQAlACAAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACEAIQAhACEAIQAlACUAIAAgACUAJQAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAIAAlACUAJQAlACAAIAAgACUAIAAgACAAJQAlACUAJQAlACUAJQAgACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAlAB4AJQAeACUAJQAlACUAJQAgACUAJQAlACUAHgAlAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACAAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABcAFwAXABUAFQAVAB4AHgAeAB4AJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAgACUAJQAgACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAIAAgACUAJQAgACAAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACAAIAAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACAAIAAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAA==",pF=50,zZ=1,i6=2,s6=3,HZ=4,jZ=5,mF=7,o6=8,gF=9,kh=10,G2=11,yF=12,$2=13,VZ=14,Ag=15,q2=16,zy=17,Zm=18,KZ=19,vF=20,Z2=21,Wm=22,Nx=23,Gf=24,vl=25,cg=26,ug=27,$f=28,GZ=29,kd=30,$Z=31,Hy=32,jy=33,W2=34,X2=35,Y2=36,p0=37,J2=38,Tv=39,Pv=40,Dx=41,a6=42,qZ=43,ZZ=[9001,65288],l6="!",Fn="×",Vy="÷",eB=NZ(OZ),vu=[kd,Y2],tB=[zZ,i6,s6,jZ],A6=[kh,o6],_F=[ug,cg],WZ=tB.concat(A6),wF=[J2,Tv,Pv,W2,X2],XZ=[Ag,$2],YZ=function(e,t){t===void 0&&(t="strict");var r=[],i=[],a=[];return e.forEach(function(u,h){var o=eB.get(u);if(o>pF?(a.push(!0),o-=pF):a.push(!1),["normal","auto","loose"].indexOf(t)!==-1&&[8208,8211,12316,12448].indexOf(u)!==-1)return i.push(h),r.push(q2);if(o===HZ||o===G2){if(h===0)return i.push(h),r.push(kd);var g=r[h-1];return WZ.indexOf(g)===-1?(i.push(i[h-1]),r.push(g)):(i.push(h),r.push(kd))}if(i.push(h),o===$Z)return r.push(t==="strict"?Z2:p0);if(o===a6||o===GZ)return r.push(kd);if(o===qZ)return u>=131072&&u<=196605||u>=196608&&u<=262141?r.push(p0):r.push(kd);r.push(o)}),[i,r,a]},Qx=function(e,t,r,i){var a=i[r];if(Array.isArray(e)?e.indexOf(a)!==-1:e===a)for(var u=r;u<=i.length;){u++;var h=i[u];if(h===t)return!0;if(h!==kh)break}if(a===kh)for(var u=r;u>0;){u--;var o=i[u];if(Array.isArray(e)?e.indexOf(o)!==-1:e===o)for(var g=r;g<=i.length;){g++;var h=i[g];if(h===t)return!0;if(h!==kh)break}if(o!==kh)break}return!1},xF=function(e,t){for(var r=e;r>=0;){var i=t[r];if(i===kh)r--;else return i}return 0},JZ=function(e,t,r,i,a){if(r[i]===0)return Fn;var u=i-1;if(Array.isArray(a)&&a[u]===!0)return Fn;var h=u-1,o=u+1,g=t[u],y=h>=0?t[h]:0,C=t[o];if(g===i6&&C===s6)return Fn;if(tB.indexOf(g)!==-1)return l6;if(tB.indexOf(C)!==-1||A6.indexOf(C)!==-1)return Fn;if(xF(u,t)===o6)return Vy;if(eB.get(e[u])===G2||(g===Hy||g===jy)&&eB.get(e[o])===G2||g===mF||C===mF||g===gF||[kh,$2,Ag].indexOf(g)===-1&&C===gF||[zy,Zm,KZ,Gf,$f].indexOf(C)!==-1||xF(u,t)===Wm||Qx(Nx,Wm,u,t)||Qx([zy,Zm],Z2,u,t)||Qx(yF,yF,u,t))return Fn;if(g===kh)return Vy;if(g===Nx||C===Nx)return Fn;if(C===q2||g===q2)return Vy;if([$2,Ag,Z2].indexOf(C)!==-1||g===VZ||y===Y2&&XZ.indexOf(g)!==-1||g===$f&&C===Y2||C===vF||vu.indexOf(C)!==-1&&g===vl||vu.indexOf(g)!==-1&&C===vl||g===ug&&[p0,Hy,jy].indexOf(C)!==-1||[p0,Hy,jy].indexOf(g)!==-1&&C===cg||vu.indexOf(g)!==-1&&_F.indexOf(C)!==-1||_F.indexOf(g)!==-1&&vu.indexOf(C)!==-1||[ug,cg].indexOf(g)!==-1&&(C===vl||[Wm,Ag].indexOf(C)!==-1&&t[o+1]===vl)||[Wm,Ag].indexOf(g)!==-1&&C===vl||g===vl&&[vl,$f,Gf].indexOf(C)!==-1)return Fn;if([vl,$f,Gf,zy,Zm].indexOf(C)!==-1)for(var I=u;I>=0;){var F=t[I];if(F===vl)return Fn;if([$f,Gf].indexOf(F)!==-1)I--;else break}if([ug,cg].indexOf(C)!==-1)for(var I=[zy,Zm].indexOf(g)!==-1?h:u;I>=0;){var F=t[I];if(F===vl)return Fn;if([$f,Gf].indexOf(F)!==-1)I--;else break}if(J2===g&&[J2,Tv,W2,X2].indexOf(C)!==-1||[Tv,W2].indexOf(g)!==-1&&[Tv,Pv].indexOf(C)!==-1||[Pv,X2].indexOf(g)!==-1&&C===Pv||wF.indexOf(g)!==-1&&[vF,cg].indexOf(C)!==-1||wF.indexOf(C)!==-1&&g===ug||vu.indexOf(g)!==-1&&vu.indexOf(C)!==-1||g===Gf&&vu.indexOf(C)!==-1||vu.concat(vl).indexOf(g)!==-1&&C===Wm&&ZZ.indexOf(e[o])===-1||vu.concat(vl).indexOf(C)!==-1&&g===Zm)return Fn;if(g===Dx&&C===Dx){for(var b=r[u],N=1;b>0&&(b--,t[b]===Dx);)N++;if(N%2!==0)return Fn}return g===Hy&&C===jy?Fn:Vy},eW=function(e,t){t||(t={lineBreak:"normal",wordBreak:"normal"});var r=YZ(e,t.lineBreak),i=r[0],a=r[1],u=r[2];(t.wordBreak==="break-all"||t.wordBreak==="break-word")&&(a=a.map(function(o){return[vl,kd,a6].indexOf(o)!==-1?p0:o}));var h=t.wordBreak==="keep-all"?u.map(function(o,g){return o&&e[g]>=19968&&e[g]<=40959}):void 0;return[i,a,h]},tW=function(){function e(t,r,i,a){this.codePoints=t,this.required=r===l6,this.start=i,this.end=a}return e.prototype.slice=function(){return vs.apply(void 0,this.codePoints.slice(this.start,this.end))},e}(),rW=function(e,t){var r=F_(e),i=eW(r,t),a=i[0],u=i[1],h=i[2],o=r.length,g=0,y=0;return{next:function(){if(y>=o)return{done:!0,value:null};for(var C=Fn;y<o&&(C=JZ(r,u,a,++y,h))===Fn;);if(C!==Fn||y===o){var I=new tW(r,C,g,y);return g=y,{value:I,done:!1}}return{done:!0,value:null}}}},nW=1,iW=2,R0=4,bF=8,I1=10,BF=47,Tg=92,sW=9,oW=32,Ky=34,Xm=61,aW=35,lW=36,AW=37,Gy=39,$y=40,Ym=41,cW=95,ja=45,uW=33,hW=60,dW=62,fW=64,pW=91,mW=93,gW=61,yW=123,qy=63,vW=125,CF=124,_W=126,wW=128,SF=65533,Ox=42,jd=43,xW=44,bW=58,BW=59,m0=46,CW=0,SW=8,EW=11,IW=14,FW=31,TW=127,xc=-1,c6=48,u6=97,h6=101,PW=102,LW=117,MW=122,d6=65,f6=69,p6=70,kW=85,UW=90,Jo=function(e){return e>=c6&&e<=57},RW=function(e){return e>=55296&&e<=57343},qf=function(e){return Jo(e)||e>=d6&&e<=p6||e>=u6&&e<=PW},NW=function(e){return e>=u6&&e<=MW},DW=function(e){return e>=d6&&e<=UW},QW=function(e){return NW(e)||DW(e)},OW=function(e){return e>=wW},Zy=function(e){return e===I1||e===sW||e===oW},F1=function(e){return QW(e)||OW(e)||e===cW},EF=function(e){return F1(e)||Jo(e)||e===ja},zW=function(e){return e>=CW&&e<=SW||e===EW||e>=IW&&e<=FW||e===TW},wh=function(e,t){return e!==Tg?!1:t!==I1},Wy=function(e,t,r){return e===ja?F1(t)||wh(t,r):F1(e)?!0:!!(e===Tg&&wh(e,t))},zx=function(e,t,r){return e===jd||e===ja?Jo(t)?!0:t===m0&&Jo(r):Jo(e===m0?t:e)},HW=function(e){var t=0,r=1;(e[t]===jd||e[t]===ja)&&(e[t]===ja&&(r=-1),t++);for(var i=[];Jo(e[t]);)i.push(e[t++]);var a=i.length?parseInt(vs.apply(void 0,i),10):0;e[t]===m0&&t++;for(var u=[];Jo(e[t]);)u.push(e[t++]);var h=u.length,o=h?parseInt(vs.apply(void 0,u),10):0;(e[t]===f6||e[t]===h6)&&t++;var g=1;(e[t]===jd||e[t]===ja)&&(e[t]===ja&&(g=-1),t++);for(var y=[];Jo(e[t]);)y.push(e[t++]);var C=y.length?parseInt(vs.apply(void 0,y),10):0;return r*(a+o*Math.pow(10,-h))*Math.pow(10,g*C)},jW={type:2},VW={type:3},KW={type:4},GW={type:13},$W={type:8},qW={type:21},ZW={type:9},WW={type:10},XW={type:11},YW={type:12},JW={type:14},Xy={type:23},eX={type:1},tX={type:25},rX={type:24},nX={type:26},iX={type:27},sX={type:28},oX={type:29},aX={type:31},rB={type:32},m6=function(){function e(){this._value=[]}return e.prototype.write=function(t){this._value=this._value.concat(F_(t))},e.prototype.read=function(){for(var t=[],r=this.consumeToken();r!==rB;)t.push(r),r=this.consumeToken();return t},e.prototype.consumeToken=function(){var t=this.consumeCodePoint();switch(t){case Ky:return this.consumeStringToken(Ky);case aW:var r=this.peekCodePoint(0),i=this.peekCodePoint(1),a=this.peekCodePoint(2);if(EF(r)||wh(i,a)){var u=Wy(r,i,a)?iW:nW,h=this.consumeName();return{type:5,value:h,flags:u}}break;case lW:if(this.peekCodePoint(0)===Xm)return this.consumeCodePoint(),GW;break;case Gy:return this.consumeStringToken(Gy);case $y:return jW;case Ym:return VW;case Ox:if(this.peekCodePoint(0)===Xm)return this.consumeCodePoint(),JW;break;case jd:if(zx(t,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(t),this.consumeNumericToken();break;case xW:return KW;case ja:var o=t,g=this.peekCodePoint(0),y=this.peekCodePoint(1);if(zx(o,g,y))return this.reconsumeCodePoint(t),this.consumeNumericToken();if(Wy(o,g,y))return this.reconsumeCodePoint(t),this.consumeIdentLikeToken();if(g===ja&&y===dW)return this.consumeCodePoint(),this.consumeCodePoint(),rX;break;case m0:if(zx(t,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(t),this.consumeNumericToken();break;case BF:if(this.peekCodePoint(0)===Ox)for(this.consumeCodePoint();;){var C=this.consumeCodePoint();if(C===Ox&&(C=this.consumeCodePoint(),C===BF))return this.consumeToken();if(C===xc)return this.consumeToken()}break;case bW:return nX;case BW:return iX;case hW:if(this.peekCodePoint(0)===uW&&this.peekCodePoint(1)===ja&&this.peekCodePoint(2)===ja)return this.consumeCodePoint(),this.consumeCodePoint(),tX;break;case fW:var I=this.peekCodePoint(0),F=this.peekCodePoint(1),b=this.peekCodePoint(2);if(Wy(I,F,b)){var h=this.consumeName();return{type:7,value:h}}break;case pW:return sX;case Tg:if(wh(t,this.peekCodePoint(0)))return this.reconsumeCodePoint(t),this.consumeIdentLikeToken();break;case mW:return oX;case gW:if(this.peekCodePoint(0)===Xm)return this.consumeCodePoint(),$W;break;case yW:return XW;case vW:return YW;case LW:case kW:var N=this.peekCodePoint(0),U=this.peekCodePoint(1);return N===jd&&(qf(U)||U===qy)&&(this.consumeCodePoint(),this.consumeUnicodeRangeToken()),this.reconsumeCodePoint(t),this.consumeIdentLikeToken();case CF:if(this.peekCodePoint(0)===Xm)return this.consumeCodePoint(),ZW;if(this.peekCodePoint(0)===CF)return this.consumeCodePoint(),qW;break;case _W:if(this.peekCodePoint(0)===Xm)return this.consumeCodePoint(),WW;break;case xc:return rB}return Zy(t)?(this.consumeWhiteSpace(),aX):Jo(t)?(this.reconsumeCodePoint(t),this.consumeNumericToken()):F1(t)?(this.reconsumeCodePoint(t),this.consumeIdentLikeToken()):{type:6,value:vs(t)}},e.prototype.consumeCodePoint=function(){var t=this._value.shift();return typeof t>"u"?-1:t},e.prototype.reconsumeCodePoint=function(t){this._value.unshift(t)},e.prototype.peekCodePoint=function(t){return t>=this._value.length?-1:this._value[t]},e.prototype.consumeUnicodeRangeToken=function(){for(var t=[],r=this.consumeCodePoint();qf(r)&&t.length<6;)t.push(r),r=this.consumeCodePoint();for(var i=!1;r===qy&&t.length<6;)t.push(r),r=this.consumeCodePoint(),i=!0;if(i){var a=parseInt(vs.apply(void 0,t.map(function(g){return g===qy?c6:g})),16),u=parseInt(vs.apply(void 0,t.map(function(g){return g===qy?p6:g})),16);return{type:30,start:a,end:u}}var h=parseInt(vs.apply(void 0,t),16);if(this.peekCodePoint(0)===ja&&qf(this.peekCodePoint(1))){this.consumeCodePoint(),r=this.consumeCodePoint();for(var o=[];qf(r)&&o.length<6;)o.push(r),r=this.consumeCodePoint();var u=parseInt(vs.apply(void 0,o),16);return{type:30,start:h,end:u}}else return{type:30,start:h,end:h}},e.prototype.consumeIdentLikeToken=function(){var t=this.consumeName();return t.toLowerCase()==="url"&&this.peekCodePoint(0)===$y?(this.consumeCodePoint(),this.consumeUrlToken()):this.peekCodePoint(0)===$y?(this.consumeCodePoint(),{type:19,value:t}):{type:20,value:t}},e.prototype.consumeUrlToken=function(){var t=[];if(this.consumeWhiteSpace(),this.peekCodePoint(0)===xc)return{type:22,value:""};var r=this.peekCodePoint(0);if(r===Gy||r===Ky){var i=this.consumeStringToken(this.consumeCodePoint());return i.type===0&&(this.consumeWhiteSpace(),this.peekCodePoint(0)===xc||this.peekCodePoint(0)===Ym)?(this.consumeCodePoint(),{type:22,value:i.value}):(this.consumeBadUrlRemnants(),Xy)}for(;;){var a=this.consumeCodePoint();if(a===xc||a===Ym)return{type:22,value:vs.apply(void 0,t)};if(Zy(a))return this.consumeWhiteSpace(),this.peekCodePoint(0)===xc||this.peekCodePoint(0)===Ym?(this.consumeCodePoint(),{type:22,value:vs.apply(void 0,t)}):(this.consumeBadUrlRemnants(),Xy);if(a===Ky||a===Gy||a===$y||zW(a))return this.consumeBadUrlRemnants(),Xy;if(a===Tg)if(wh(a,this.peekCodePoint(0)))t.push(this.consumeEscapedCodePoint());else return this.consumeBadUrlRemnants(),Xy;else t.push(a)}},e.prototype.consumeWhiteSpace=function(){for(;Zy(this.peekCodePoint(0));)this.consumeCodePoint()},e.prototype.consumeBadUrlRemnants=function(){for(;;){var t=this.consumeCodePoint();if(t===Ym||t===xc)return;wh(t,this.peekCodePoint(0))&&this.consumeEscapedCodePoint()}},e.prototype.consumeStringSlice=function(t){for(var r=5e4,i="";t>0;){var a=Math.min(r,t);i+=vs.apply(void 0,this._value.splice(0,a)),t-=a}return this._value.shift(),i},e.prototype.consumeStringToken=function(t){var r="",i=0;do{var a=this._value[i];if(a===xc||a===void 0||a===t)return r+=this.consumeStringSlice(i),{type:0,value:r};if(a===I1)return this._value.splice(0,i),eX;if(a===Tg){var u=this._value[i+1];u!==xc&&u!==void 0&&(u===I1?(r+=this.consumeStringSlice(i),i=-1,this._value.shift()):wh(a,u)&&(r+=this.consumeStringSlice(i),r+=vs(this.consumeEscapedCodePoint()),i=-1))}i++}while(!0)},e.prototype.consumeNumber=function(){var t=[],r=R0,i=this.peekCodePoint(0);for((i===jd||i===ja)&&t.push(this.consumeCodePoint());Jo(this.peekCodePoint(0));)t.push(this.consumeCodePoint());i=this.peekCodePoint(0);var a=this.peekCodePoint(1);if(i===m0&&Jo(a))for(t.push(this.consumeCodePoint(),this.consumeCodePoint()),r=bF;Jo(this.peekCodePoint(0));)t.push(this.consumeCodePoint());i=this.peekCodePoint(0),a=this.peekCodePoint(1);var u=this.peekCodePoint(2);if((i===f6||i===h6)&&((a===jd||a===ja)&&Jo(u)||Jo(a)))for(t.push(this.consumeCodePoint(),this.consumeCodePoint()),r=bF;Jo(this.peekCodePoint(0));)t.push(this.consumeCodePoint());return[HW(t),r]},e.prototype.consumeNumericToken=function(){var t=this.consumeNumber(),r=t[0],i=t[1],a=this.peekCodePoint(0),u=this.peekCodePoint(1),h=this.peekCodePoint(2);if(Wy(a,u,h)){var o=this.consumeName();return{type:15,number:r,flags:i,unit:o}}return a===AW?(this.consumeCodePoint(),{type:16,number:r,flags:i}):{type:17,number:r,flags:i}},e.prototype.consumeEscapedCodePoint=function(){var t=this.consumeCodePoint();if(qf(t)){for(var r=vs(t);qf(this.peekCodePoint(0))&&r.length<6;)r+=vs(this.consumeCodePoint());Zy(this.peekCodePoint(0))&&this.consumeCodePoint();var i=parseInt(r,16);return i===0||RW(i)||i>1114111?SF:i}return t===xc?SF:t},e.prototype.consumeName=function(){for(var t="";;){var r=this.consumeCodePoint();if(EF(r))t+=vs(r);else if(wh(r,this.peekCodePoint(0)))t+=vs(this.consumeEscapedCodePoint());else return this.reconsumeCodePoint(r),t}},e}(),g6=function(){function e(t){this._tokens=t}return e.create=function(t){var r=new m6;return r.write(t),new e(r.read())},e.parseValue=function(t){return e.create(t).parseComponentValue()},e.parseValues=function(t){return e.create(t).parseComponentValues()},e.prototype.parseComponentValue=function(){for(var t=this.consumeToken();t.type===31;)t=this.consumeToken();if(t.type===32)throw new SyntaxError("Error parsing CSS component value, unexpected EOF");this.reconsumeToken(t);var r=this.consumeComponentValue();do t=this.consumeToken();while(t.type===31);if(t.type===32)return r;throw new SyntaxError("Error parsing CSS component value, multiple values found when expecting only one")},e.prototype.parseComponentValues=function(){for(var t=[];;){var r=this.consumeComponentValue();if(r.type===32)return t;t.push(r),t.push()}},e.prototype.consumeComponentValue=function(){var t=this.consumeToken();switch(t.type){case 11:case 28:case 2:return this.consumeSimpleBlock(t.type);case 19:return this.consumeFunction(t)}return t},e.prototype.consumeSimpleBlock=function(t){for(var r={type:t,values:[]},i=this.consumeToken();;){if(i.type===32||AX(i,t))return r;this.reconsumeToken(i),r.values.push(this.consumeComponentValue()),i=this.consumeToken()}},e.prototype.consumeFunction=function(t){for(var r={name:t.value,values:[],type:18};;){var i=this.consumeToken();if(i.type===32||i.type===3)return r;this.reconsumeToken(i),r.values.push(this.consumeComponentValue())}},e.prototype.consumeToken=function(){var t=this._tokens.shift();return typeof t>"u"?rB:t},e.prototype.reconsumeToken=function(t){this._tokens.unshift(t)},e}(),N0=function(e){return e.type===15},mm=function(e){return e.type===17},Ai=function(e){return e.type===20},lX=function(e){return e.type===0},nB=function(e,t){return Ai(e)&&e.value===t},y6=function(e){return e.type!==31},sm=function(e){return e.type!==31&&e.type!==4},Hc=function(e){var t=[],r=[];return e.forEach(function(i){if(i.type===4){if(r.length===0)throw new Error("Error parsing function args, zero tokens for arg");t.push(r),r=[];return}i.type!==31&&r.push(i)}),r.length&&t.push(r),t},AX=function(e,t){return t===11&&e.type===12||t===28&&e.type===29?!0:t===2&&e.type===3},id=function(e){return e.type===17||e.type===15},Ls=function(e){return e.type===16||id(e)},v6=function(e){return e.length>1?[e[0],e[1]]:[e[0]]},Co={type:17,number:0,flags:R0},oC={type:16,number:50,flags:R0},Uh={type:16,number:100,flags:R0},hg=function(e,t,r){var i=e[0],a=e[1];return[Ci(i,t),Ci(typeof a<"u"?a:i,r)]},Ci=function(e,t){if(e.type===16)return e.number/100*t;if(N0(e))switch(e.unit){case"rem":case"em":return 16*e.number;case"px":default:return e.number}return e.number},_6="deg",w6="grad",x6="rad",b6="turn",T_={name:"angle",parse:function(e,t){if(t.type===15)switch(t.unit){case _6:return Math.PI*t.number/180;case w6:return Math.PI/200*t.number;case x6:return t.number;case b6:return Math.PI*2*t.number}throw new Error("Unsupported angle type")}},B6=function(e){return e.type===15&&(e.unit===_6||e.unit===w6||e.unit===x6||e.unit===b6)},C6=function(e){var t=e.filter(Ai).map(function(r){return r.value}).join(" ");switch(t){case"to bottom right":case"to right bottom":case"left top":case"top left":return[Co,Co];case"to top":case"bottom":return Xl(0);case"to bottom left":case"to left bottom":case"right top":case"top right":return[Co,Uh];case"to right":case"left":return Xl(90);case"to top left":case"to left top":case"right bottom":case"bottom right":return[Uh,Uh];case"to bottom":case"top":return Xl(180);case"to top right":case"to right top":case"left bottom":case"bottom left":return[Uh,Co];case"to left":case"right":return Xl(270)}return 0},Xl=function(e){return Math.PI*e/180},Yh={name:"color",parse:function(e,t){if(t.type===18){var r=cX[t.name];if(typeof r>"u")throw new Error('Attempting to parse an unsupported color function "'+t.name+'"');return r(e,t.values)}if(t.type===5){if(t.value.length===3){var i=t.value.substring(0,1),a=t.value.substring(1,2),u=t.value.substring(2,3);return Rh(parseInt(i+i,16),parseInt(a+a,16),parseInt(u+u,16),1)}if(t.value.length===4){var i=t.value.substring(0,1),a=t.value.substring(1,2),u=t.value.substring(2,3),h=t.value.substring(3,4);return Rh(parseInt(i+i,16),parseInt(a+a,16),parseInt(u+u,16),parseInt(h+h,16)/255)}if(t.value.length===6){var i=t.value.substring(0,2),a=t.value.substring(2,4),u=t.value.substring(4,6);return Rh(parseInt(i,16),parseInt(a,16),parseInt(u,16),1)}if(t.value.length===8){var i=t.value.substring(0,2),a=t.value.substring(2,4),u=t.value.substring(4,6),h=t.value.substring(6,8);return Rh(parseInt(i,16),parseInt(a,16),parseInt(u,16),parseInt(h,16)/255)}}if(t.type===20){var o=Pu[t.value.toUpperCase()];if(typeof o<"u")return o}return Pu.TRANSPARENT}},Jh=function(e){return(255&e)===0},lo=function(e){var t=255&e,r=255&e>>8,i=255&e>>16,a=255&e>>24;return t<255?"rgba("+a+","+i+","+r+","+t/255+")":"rgb("+a+","+i+","+r+")"},Rh=function(e,t,r,i){return(e<<24|t<<16|r<<8|Math.round(i*255)<<0)>>>0},IF=function(e,t){if(e.type===17)return e.number;if(e.type===16){var r=t===3?1:255;return t===3?e.number/100*r:Math.round(e.number/100*r)}return 0},FF=function(e,t){var r=t.filter(sm);if(r.length===3){var i=r.map(IF),a=i[0],u=i[1],h=i[2];return Rh(a,u,h,1)}if(r.length===4){var o=r.map(IF),a=o[0],u=o[1],h=o[2],g=o[3];return Rh(a,u,h,g)}return 0};function Hx(e,t,r){return r<0&&(r+=1),r>=1&&(r-=1),r<1/6?(t-e)*r*6+e:r<1/2?t:r<2/3?(t-e)*6*(2/3-r)+e:e}var TF=function(e,t){var r=t.filter(sm),i=r[0],a=r[1],u=r[2],h=r[3],o=(i.type===17?Xl(i.number):T_.parse(e,i))/(Math.PI*2),g=Ls(a)?a.number/100:0,y=Ls(u)?u.number/100:0,C=typeof h<"u"&&Ls(h)?Ci(h,1):1;if(g===0)return Rh(y*255,y*255,y*255,1);var I=y<=.5?y*(g+1):y+g-y*g,F=y*2-I,b=Hx(F,I,o+1/3),N=Hx(F,I,o),U=Hx(F,I,o-1/3);return Rh(b*255,N*255,U*255,C)},cX={hsl:TF,hsla:TF,rgb:FF,rgba:FF},Pg=function(e,t){return Yh.parse(e,g6.create(t).parseComponentValue())},Pu={ALICEBLUE:4042850303,ANTIQUEWHITE:4209760255,AQUA:16777215,AQUAMARINE:2147472639,AZURE:4043309055,BEIGE:4126530815,BISQUE:4293182719,BLACK:255,BLANCHEDALMOND:4293643775,BLUE:65535,BLUEVIOLET:2318131967,BROWN:2771004159,BURLYWOOD:3736635391,CADETBLUE:1604231423,CHARTREUSE:2147418367,CHOCOLATE:3530104575,CORAL:4286533887,CORNFLOWERBLUE:1687547391,CORNSILK:4294499583,CRIMSON:3692313855,CYAN:16777215,DARKBLUE:35839,DARKCYAN:9145343,DARKGOLDENROD:3095837695,DARKGRAY:2846468607,DARKGREEN:6553855,DARKGREY:2846468607,DARKKHAKI:3182914559,DARKMAGENTA:2332068863,DARKOLIVEGREEN:1433087999,DARKORANGE:4287365375,DARKORCHID:2570243327,DARKRED:2332033279,DARKSALMON:3918953215,DARKSEAGREEN:2411499519,DARKSLATEBLUE:1211993087,DARKSLATEGRAY:793726975,DARKSLATEGREY:793726975,DARKTURQUOISE:13554175,DARKVIOLET:2483082239,DEEPPINK:4279538687,DEEPSKYBLUE:12582911,DIMGRAY:1768516095,DIMGREY:1768516095,DODGERBLUE:512819199,FIREBRICK:2988581631,FLORALWHITE:4294635775,FORESTGREEN:579543807,FUCHSIA:4278255615,GAINSBORO:3705462015,GHOSTWHITE:4177068031,GOLD:4292280575,GOLDENROD:3668254975,GRAY:2155905279,GREEN:8388863,GREENYELLOW:2919182335,GREY:2155905279,HONEYDEW:4043305215,HOTPINK:4285117695,INDIANRED:3445382399,INDIGO:1258324735,IVORY:4294963455,KHAKI:4041641215,LAVENDER:3873897215,LAVENDERBLUSH:4293981695,LAWNGREEN:2096890111,LEMONCHIFFON:4294626815,LIGHTBLUE:2916673279,LIGHTCORAL:4034953471,LIGHTCYAN:3774873599,LIGHTGOLDENRODYELLOW:4210742015,LIGHTGRAY:3553874943,LIGHTGREEN:2431553791,LIGHTGREY:3553874943,LIGHTPINK:4290167295,LIGHTSALMON:4288707327,LIGHTSEAGREEN:548580095,LIGHTSKYBLUE:2278488831,LIGHTSLATEGRAY:2005441023,LIGHTSLATEGREY:2005441023,LIGHTSTEELBLUE:2965692159,LIGHTYELLOW:4294959359,LIME:16711935,LIMEGREEN:852308735,LINEN:4210091775,MAGENTA:4278255615,MAROON:2147483903,MEDIUMAQUAMARINE:1724754687,MEDIUMBLUE:52735,MEDIUMORCHID:3126187007,MEDIUMPURPLE:2473647103,MEDIUMSEAGREEN:1018393087,MEDIUMSLATEBLUE:2070474495,MEDIUMSPRINGGREEN:16423679,MEDIUMTURQUOISE:1221709055,MEDIUMVIOLETRED:3340076543,MIDNIGHTBLUE:421097727,MINTCREAM:4127193855,MISTYROSE:4293190143,MOCCASIN:4293178879,NAVAJOWHITE:4292783615,NAVY:33023,OLDLACE:4260751103,OLIVE:2155872511,OLIVEDRAB:1804477439,ORANGE:4289003775,ORANGERED:4282712319,ORCHID:3664828159,PALEGOLDENROD:4008225535,PALEGREEN:2566625535,PALETURQUOISE:2951671551,PALEVIOLETRED:3681588223,PAPAYAWHIP:4293907967,PEACHPUFF:4292524543,PERU:3448061951,PINK:4290825215,PLUM:3718307327,POWDERBLUE:2967529215,PURPLE:2147516671,REBECCAPURPLE:1714657791,RED:4278190335,ROSYBROWN:3163525119,ROYALBLUE:1097458175,SADDLEBROWN:2336560127,SALMON:4202722047,SANDYBROWN:4104413439,SEAGREEN:780883967,SEASHELL:4294307583,SIENNA:2689740287,SILVER:3233857791,SKYBLUE:2278484991,SLATEBLUE:1784335871,SLATEGRAY:1887473919,SLATEGREY:1887473919,SNOW:4294638335,SPRINGGREEN:16744447,STEELBLUE:1182971135,TAN:3535047935,TEAL:8421631,THISTLE:3636451583,TOMATO:4284696575,TRANSPARENT:0,TURQUOISE:1088475391,VIOLET:4001558271,WHEAT:4125012991,WHITE:4294967295,WHITESMOKE:4126537215,YELLOW:4294902015,YELLOWGREEN:2597139199},uX={name:"background-clip",initialValue:"border-box",prefix:!1,type:1,parse:function(e,t){return t.map(function(r){if(Ai(r))switch(r.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},hX={name:"background-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},P_=function(e,t){var r=Yh.parse(e,t[0]),i=t[1];return i&&Ls(i)?{color:r,stop:i}:{color:r,stop:null}},PF=function(e,t){var r=e[0],i=e[e.length-1];r.stop===null&&(r.stop=Co),i.stop===null&&(i.stop=Uh);for(var a=[],u=0,h=0;h<e.length;h++){var o=e[h].stop;if(o!==null){var g=Ci(o,t);g>u?a.push(g):a.push(u),u=g}else a.push(null)}for(var y=null,h=0;h<a.length;h++){var C=a[h];if(C===null)y===null&&(y=h);else if(y!==null){for(var I=h-y,F=a[y-1],b=(C-F)/(I+1),N=1;N<=I;N++)a[y+N-1]=b*N;y=null}}return e.map(function(U,H){var k=U.color;return{color:k,stop:Math.max(Math.min(1,a[H]/t),0)}})},dX=function(e,t,r){var i=t/2,a=r/2,u=Ci(e[0],t)-i,h=a-Ci(e[1],r);return(Math.atan2(h,u)+Math.PI*2)%(Math.PI*2)},fX=function(e,t,r){var i=typeof e=="number"?e:dX(e,t,r),a=Math.abs(t*Math.sin(i))+Math.abs(r*Math.cos(i)),u=t/2,h=r/2,o=a/2,g=Math.sin(i-Math.PI/2)*o,y=Math.cos(i-Math.PI/2)*o;return[a,u-y,u+y,h-g,h+g]},MA=function(e,t){return Math.sqrt(e*e+t*t)},LF=function(e,t,r,i,a){var u=[[0,0],[0,t],[e,0],[e,t]];return u.reduce(function(h,o){var g=o[0],y=o[1],C=MA(r-g,i-y);return(a?C<h.optimumDistance:C>h.optimumDistance)?{optimumCorner:o,optimumDistance:C}:h},{optimumDistance:a?1/0:-1/0,optimumCorner:null}).optimumCorner},pX=function(e,t,r,i,a){var u=0,h=0;switch(e.size){case 0:e.shape===0?u=h=Math.min(Math.abs(t),Math.abs(t-i),Math.abs(r),Math.abs(r-a)):e.shape===1&&(u=Math.min(Math.abs(t),Math.abs(t-i)),h=Math.min(Math.abs(r),Math.abs(r-a)));break;case 2:if(e.shape===0)u=h=Math.min(MA(t,r),MA(t,r-a),MA(t-i,r),MA(t-i,r-a));else if(e.shape===1){var o=Math.min(Math.abs(r),Math.abs(r-a))/Math.min(Math.abs(t),Math.abs(t-i)),g=LF(i,a,t,r,!0),y=g[0],C=g[1];u=MA(y-t,(C-r)/o),h=o*u}break;case 1:e.shape===0?u=h=Math.max(Math.abs(t),Math.abs(t-i),Math.abs(r),Math.abs(r-a)):e.shape===1&&(u=Math.max(Math.abs(t),Math.abs(t-i)),h=Math.max(Math.abs(r),Math.abs(r-a)));break;case 3:if(e.shape===0)u=h=Math.max(MA(t,r),MA(t,r-a),MA(t-i,r),MA(t-i,r-a));else if(e.shape===1){var o=Math.max(Math.abs(r),Math.abs(r-a))/Math.max(Math.abs(t),Math.abs(t-i)),I=LF(i,a,t,r,!1),y=I[0],C=I[1];u=MA(y-t,(C-r)/o),h=o*u}break}return Array.isArray(e.size)&&(u=Ci(e.size[0],i),h=e.size.length===2?Ci(e.size[1],a):u),[u,h]},mX=function(e,t){var r=Xl(180),i=[];return Hc(t).forEach(function(a,u){if(u===0){var h=a[0];if(h.type===20&&h.value==="to"){r=C6(a);return}else if(B6(h)){r=T_.parse(e,h);return}}var o=P_(e,a);i.push(o)}),{angle:r,stops:i,type:1}},Yy=function(e,t){var r=Xl(180),i=[];return Hc(t).forEach(function(a,u){if(u===0){var h=a[0];if(h.type===20&&["top","left","right","bottom"].indexOf(h.value)!==-1){r=C6(a);return}else if(B6(h)){r=(T_.parse(e,h)+Xl(270))%Xl(360);return}}var o=P_(e,a);i.push(o)}),{angle:r,stops:i,type:1}},gX=function(e,t){var r=Xl(180),i=[],a=1,u=0,h=3,o=[];return Hc(t).forEach(function(g,y){var C=g[0];if(y===0){if(Ai(C)&&C.value==="linear"){a=1;return}else if(Ai(C)&&C.value==="radial"){a=2;return}}if(C.type===18){if(C.name==="from"){var I=Yh.parse(e,C.values[0]);i.push({stop:Co,color:I})}else if(C.name==="to"){var I=Yh.parse(e,C.values[0]);i.push({stop:Uh,color:I})}else if(C.name==="color-stop"){var F=C.values.filter(sm);if(F.length===2){var I=Yh.parse(e,F[1]),b=F[0];mm(b)&&i.push({stop:{type:16,number:b.number*100,flags:b.flags},color:I})}}}}),a===1?{angle:(r+Xl(180))%Xl(360),stops:i,type:a}:{size:h,shape:u,stops:i,position:o,type:a}},S6="closest-side",E6="farthest-side",I6="closest-corner",F6="farthest-corner",T6="circle",P6="ellipse",L6="cover",M6="contain",yX=function(e,t){var r=0,i=3,a=[],u=[];return Hc(t).forEach(function(h,o){var g=!0;if(o===0){var y=!1;g=h.reduce(function(I,F){if(y)if(Ai(F))switch(F.value){case"center":return u.push(oC),I;case"top":case"left":return u.push(Co),I;case"right":case"bottom":return u.push(Uh),I}else(Ls(F)||id(F))&&u.push(F);else if(Ai(F))switch(F.value){case T6:return r=0,!1;case P6:return r=1,!1;case"at":return y=!0,!1;case S6:return i=0,!1;case L6:case E6:return i=1,!1;case M6:case I6:return i=2,!1;case F6:return i=3,!1}else if(id(F)||Ls(F))return Array.isArray(i)||(i=[]),i.push(F),!1;return I},g)}if(g){var C=P_(e,h);a.push(C)}}),{size:i,shape:r,stops:a,position:u,type:2}},Jy=function(e,t){var r=0,i=3,a=[],u=[];return Hc(t).forEach(function(h,o){var g=!0;if(o===0?g=h.reduce(function(C,I){if(Ai(I))switch(I.value){case"center":return u.push(oC),!1;case"top":case"left":return u.push(Co),!1;case"right":case"bottom":return u.push(Uh),!1}else if(Ls(I)||id(I))return u.push(I),!1;return C},g):o===1&&(g=h.reduce(function(C,I){if(Ai(I))switch(I.value){case T6:return r=0,!1;case P6:return r=1,!1;case M6:case S6:return i=0,!1;case E6:return i=1,!1;case I6:return i=2,!1;case L6:case F6:return i=3,!1}else if(id(I)||Ls(I))return Array.isArray(i)||(i=[]),i.push(I),!1;return C},g)),g){var y=P_(e,h);a.push(y)}}),{size:i,shape:r,stops:a,position:u,type:2}},vX=function(e){return e.type===1},_X=function(e){return e.type===2},aC={name:"image",parse:function(e,t){if(t.type===22){var r={url:t.value,type:0};return e.cache.addImage(t.value),r}if(t.type===18){var i=k6[t.name];if(typeof i>"u")throw new Error('Attempting to parse an unsupported image function "'+t.name+'"');return i(e,t.values)}throw new Error("Unsupported image type "+t.type)}};function wX(e){return!(e.type===20&&e.value==="none")&&(e.type!==18||!!k6[e.name])}var k6={"linear-gradient":mX,"-moz-linear-gradient":Yy,"-ms-linear-gradient":Yy,"-o-linear-gradient":Yy,"-webkit-linear-gradient":Yy,"radial-gradient":yX,"-moz-radial-gradient":Jy,"-ms-radial-gradient":Jy,"-o-radial-gradient":Jy,"-webkit-radial-gradient":Jy,"-webkit-gradient":gX},xX={name:"background-image",initialValue:"none",type:1,prefix:!1,parse:function(e,t){if(t.length===0)return[];var r=t[0];return r.type===20&&r.value==="none"?[]:t.filter(function(i){return sm(i)&&wX(i)}).map(function(i){return aC.parse(e,i)})}},bX={name:"background-origin",initialValue:"border-box",prefix:!1,type:1,parse:function(e,t){return t.map(function(r){if(Ai(r))switch(r.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},BX={name:"background-position",initialValue:"0% 0%",type:1,prefix:!1,parse:function(e,t){return Hc(t).map(function(r){return r.filter(Ls)}).map(v6)}},CX={name:"background-repeat",initialValue:"repeat",prefix:!1,type:1,parse:function(e,t){return Hc(t).map(function(r){return r.filter(Ai).map(function(i){return i.value}).join(" ")}).map(SX)}},SX=function(e){switch(e){case"no-repeat":return 1;case"repeat-x":case"repeat no-repeat":return 2;case"repeat-y":case"no-repeat repeat":return 3;case"repeat":default:return 0}},Mp;(function(e){e.AUTO="auto",e.CONTAIN="contain",e.COVER="cover"})(Mp||(Mp={}));var EX={name:"background-size",initialValue:"0",prefix:!1,type:1,parse:function(e,t){return Hc(t).map(function(r){return r.filter(IX)})}},IX=function(e){return Ai(e)||Ls(e)},L_=function(e){return{name:"border-"+e+"-color",initialValue:"transparent",prefix:!1,type:3,format:"color"}},FX=L_("top"),TX=L_("right"),PX=L_("bottom"),LX=L_("left"),M_=function(e){return{name:"border-radius-"+e,initialValue:"0 0",prefix:!1,type:1,parse:function(t,r){return v6(r.filter(Ls))}}},MX=M_("top-left"),kX=M_("top-right"),UX=M_("bottom-right"),RX=M_("bottom-left"),k_=function(e){return{name:"border-"+e+"-style",initialValue:"solid",prefix:!1,type:2,parse:function(t,r){switch(r){case"none":return 0;case"dashed":return 2;case"dotted":return 3;case"double":return 4}return 1}}},NX=k_("top"),DX=k_("right"),QX=k_("bottom"),OX=k_("left"),U_=function(e){return{name:"border-"+e+"-width",initialValue:"0",type:0,prefix:!1,parse:function(t,r){return N0(r)?r.number:0}}},zX=U_("top"),HX=U_("right"),jX=U_("bottom"),VX=U_("left"),KX={name:"color",initialValue:"transparent",prefix:!1,type:3,format:"color"},GX={name:"direction",initialValue:"ltr",prefix:!1,type:2,parse:function(e,t){switch(t){case"rtl":return 1;case"ltr":default:return 0}}},$X={name:"display",initialValue:"inline-block",prefix:!1,type:1,parse:function(e,t){return t.filter(Ai).reduce(function(r,i){return r|qX(i.value)},0)}},qX=function(e){switch(e){case"block":case"-webkit-box":return 2;case"inline":return 4;case"run-in":return 8;case"flow":return 16;case"flow-root":return 32;case"table":return 64;case"flex":case"-webkit-flex":return 128;case"grid":case"-ms-grid":return 256;case"ruby":return 512;case"subgrid":return 1024;case"list-item":return 2048;case"table-row-group":return 4096;case"table-header-group":return 8192;case"table-footer-group":return 16384;case"table-row":return 32768;case"table-cell":return 65536;case"table-column-group":return 131072;case"table-column":return 262144;case"table-caption":return 524288;case"ruby-base":return 1048576;case"ruby-text":return 2097152;case"ruby-base-container":return 4194304;case"ruby-text-container":return 8388608;case"contents":return 16777216;case"inline-block":return 33554432;case"inline-list-item":return 67108864;case"inline-table":return 134217728;case"inline-flex":return 268435456;case"inline-grid":return 536870912}return 0},ZX={name:"float",initialValue:"none",prefix:!1,type:2,parse:function(e,t){switch(t){case"left":return 1;case"right":return 2;case"inline-start":return 3;case"inline-end":return 4}return 0}},WX={name:"letter-spacing",initialValue:"0",prefix:!1,type:0,parse:function(e,t){return t.type===20&&t.value==="normal"?0:t.type===17||t.type===15?t.number:0}},T1;(function(e){e.NORMAL="normal",e.STRICT="strict"})(T1||(T1={}));var XX={name:"line-break",initialValue:"normal",prefix:!1,type:2,parse:function(e,t){switch(t){case"strict":return T1.STRICT;case"normal":default:return T1.NORMAL}}},YX={name:"line-height",initialValue:"normal",prefix:!1,type:4},MF=function(e,t){return Ai(e)&&e.value==="normal"?1.2*t:e.type===17?t*e.number:Ls(e)?Ci(e,t):t},JX={name:"list-style-image",initialValue:"none",type:0,prefix:!1,parse:function(e,t){return t.type===20&&t.value==="none"?null:aC.parse(e,t)}},eY={name:"list-style-position",initialValue:"outside",prefix:!1,type:2,parse:function(e,t){switch(t){case"inside":return 0;case"outside":default:return 1}}},iB={name:"list-style-type",initialValue:"none",prefix:!1,type:2,parse:function(e,t){switch(t){case"disc":return 0;case"circle":return 1;case"square":return 2;case"decimal":return 3;case"cjk-decimal":return 4;case"decimal-leading-zero":return 5;case"lower-roman":return 6;case"upper-roman":return 7;case"lower-greek":return 8;case"lower-alpha":return 9;case"upper-alpha":return 10;case"arabic-indic":return 11;case"armenian":return 12;case"bengali":return 13;case"cambodian":return 14;case"cjk-earthly-branch":return 15;case"cjk-heavenly-stem":return 16;case"cjk-ideographic":return 17;case"devanagari":return 18;case"ethiopic-numeric":return 19;case"georgian":return 20;case"gujarati":return 21;case"gurmukhi":return 22;case"hebrew":return 22;case"hiragana":return 23;case"hiragana-iroha":return 24;case"japanese-formal":return 25;case"japanese-informal":return 26;case"kannada":return 27;case"katakana":return 28;case"katakana-iroha":return 29;case"khmer":return 30;case"korean-hangul-formal":return 31;case"korean-hanja-formal":return 32;case"korean-hanja-informal":return 33;case"lao":return 34;case"lower-armenian":return 35;case"malayalam":return 36;case"mongolian":return 37;case"myanmar":return 38;case"oriya":return 39;case"persian":return 40;case"simp-chinese-formal":return 41;case"simp-chinese-informal":return 42;case"tamil":return 43;case"telugu":return 44;case"thai":return 45;case"tibetan":return 46;case"trad-chinese-formal":return 47;case"trad-chinese-informal":return 48;case"upper-armenian":return 49;case"disclosure-open":return 50;case"disclosure-closed":return 51;case"none":default:return-1}}},R_=function(e){return{name:"margin-"+e,initialValue:"0",prefix:!1,type:4}},tY=R_("top"),rY=R_("right"),nY=R_("bottom"),iY=R_("left"),sY={name:"overflow",initialValue:"visible",prefix:!1,type:1,parse:function(e,t){return t.filter(Ai).map(function(r){switch(r.value){case"hidden":return 1;case"scroll":return 2;case"clip":return 3;case"auto":return 4;case"visible":default:return 0}})}},oY={name:"overflow-wrap",initialValue:"normal",prefix:!1,type:2,parse:function(e,t){switch(t){case"break-word":return"break-word";case"normal":default:return"normal"}}},N_=function(e){return{name:"padding-"+e,initialValue:"0",prefix:!1,type:3,format:"length-percentage"}},aY=N_("top"),lY=N_("right"),AY=N_("bottom"),cY=N_("left"),uY={name:"text-align",initialValue:"left",prefix:!1,type:2,parse:function(e,t){switch(t){case"right":return 2;case"center":case"justify":return 1;case"left":default:return 0}}},hY={name:"position",initialValue:"static",prefix:!1,type:2,parse:function(e,t){switch(t){case"relative":return 1;case"absolute":return 2;case"fixed":return 3;case"sticky":return 4}return 0}},dY={name:"text-shadow",initialValue:"none",type:1,prefix:!1,parse:function(e,t){return t.length===1&&nB(t[0],"none")?[]:Hc(t).map(function(r){for(var i={color:Pu.TRANSPARENT,offsetX:Co,offsetY:Co,blur:Co},a=0,u=0;u<r.length;u++){var h=r[u];id(h)?(a===0?i.offsetX=h:a===1?i.offsetY=h:i.blur=h,a++):i.color=Yh.parse(e,h)}return i})}},fY={name:"text-transform",initialValue:"none",prefix:!1,type:2,parse:function(e,t){switch(t){case"uppercase":return 2;case"lowercase":return 1;case"capitalize":return 3}return 0}},pY={name:"transform",initialValue:"none",prefix:!0,type:0,parse:function(e,t){if(t.type===20&&t.value==="none")return null;if(t.type===18){var r=yY[t.name];if(typeof r>"u")throw new Error('Attempting to parse an unsupported transform function "'+t.name+'"');return r(t.values)}return null}},mY=function(e){var t=e.filter(function(r){return r.type===17}).map(function(r){return r.number});return t.length===6?t:null},gY=function(e){var t=e.filter(function(g){return g.type===17}).map(function(g){return g.number}),r=t[0],i=t[1];t[2],t[3];var a=t[4],u=t[5];t[6],t[7],t[8],t[9],t[10],t[11];var h=t[12],o=t[13];return t[14],t[15],t.length===16?[r,i,a,u,h,o]:null},yY={matrix:mY,matrix3d:gY},kF={type:16,number:50,flags:R0},vY=[kF,kF],_Y={name:"transform-origin",initialValue:"50% 50%",prefix:!0,type:1,parse:function(e,t){var r=t.filter(Ls);return r.length!==2?vY:[r[0],r[1]]}},wY={name:"visible",initialValue:"none",prefix:!1,type:2,parse:function(e,t){switch(t){case"hidden":return 1;case"collapse":return 2;case"visible":default:return 0}}},Lg;(function(e){e.NORMAL="normal",e.BREAK_ALL="break-all",e.KEEP_ALL="keep-all"})(Lg||(Lg={}));var xY={name:"word-break",initialValue:"normal",prefix:!1,type:2,parse:function(e,t){switch(t){case"break-all":return Lg.BREAK_ALL;case"keep-all":return Lg.KEEP_ALL;case"normal":default:return Lg.NORMAL}}},bY={name:"z-index",initialValue:"auto",prefix:!1,type:0,parse:function(e,t){if(t.type===20)return{auto:!0,order:0};if(mm(t))return{auto:!1,order:t.number};throw new Error("Invalid z-index number parsed")}},U6={name:"time",parse:function(e,t){if(t.type===15)switch(t.unit.toLowerCase()){case"s":return 1e3*t.number;case"ms":return t.number}throw new Error("Unsupported time type")}},BY={name:"opacity",initialValue:"1",type:0,prefix:!1,parse:function(e,t){return mm(t)?t.number:1}},CY={name:"text-decoration-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},SY={name:"text-decoration-line",initialValue:"none",prefix:!1,type:1,parse:function(e,t){return t.filter(Ai).map(function(r){switch(r.value){case"underline":return 1;case"overline":return 2;case"line-through":return 3;case"none":return 4}return 0}).filter(function(r){return r!==0})}},EY={name:"font-family",initialValue:"",prefix:!1,type:1,parse:function(e,t){var r=[],i=[];return t.forEach(function(a){switch(a.type){case 20:case 0:r.push(a.value);break;case 17:r.push(a.number.toString());break;case 4:i.push(r.join(" ")),r.length=0;break}}),r.length&&i.push(r.join(" ")),i.map(function(a){return a.indexOf(" ")===-1?a:"'"+a+"'"})}},IY={name:"font-size",initialValue:"0",prefix:!1,type:3,format:"length"},FY={name:"font-weight",initialValue:"normal",type:0,prefix:!1,parse:function(e,t){if(mm(t))return t.number;if(Ai(t))switch(t.value){case"bold":return 700;case"normal":default:return 400}return 400}},TY={name:"font-variant",initialValue:"none",type:1,prefix:!1,parse:function(e,t){return t.filter(Ai).map(function(r){return r.value})}},PY={name:"font-style",initialValue:"normal",prefix:!1,type:2,parse:function(e,t){switch(t){case"oblique":return"oblique";case"italic":return"italic";case"normal":default:return"normal"}}},Zs=function(e,t){return(e&t)!==0},LY={name:"content",initialValue:"none",type:1,prefix:!1,parse:function(e,t){if(t.length===0)return[];var r=t[0];return r.type===20&&r.value==="none"?[]:t}},MY={name:"counter-increment",initialValue:"none",prefix:!0,type:1,parse:function(e,t){if(t.length===0)return null;var r=t[0];if(r.type===20&&r.value==="none")return null;for(var i=[],a=t.filter(y6),u=0;u<a.length;u++){var h=a[u],o=a[u+1];if(h.type===20){var g=o&&mm(o)?o.number:1;i.push({counter:h.value,increment:g})}}return i}},kY={name:"counter-reset",initialValue:"none",prefix:!0,type:1,parse:function(e,t){if(t.length===0)return[];for(var r=[],i=t.filter(y6),a=0;a<i.length;a++){var u=i[a],h=i[a+1];if(Ai(u)&&u.value!=="none"){var o=h&&mm(h)?h.number:0;r.push({counter:u.value,reset:o})}}return r}},UY={name:"duration",initialValue:"0s",prefix:!1,type:1,parse:function(e,t){return t.filter(N0).map(function(r){return U6.parse(e,r)})}},RY={name:"quotes",initialValue:"none",prefix:!0,type:1,parse:function(e,t){if(t.length===0)return null;var r=t[0];if(r.type===20&&r.value==="none")return null;var i=[],a=t.filter(lX);if(a.length%2!==0)return null;for(var u=0;u<a.length;u+=2){var h=a[u].value,o=a[u+1].value;i.push({open:h,close:o})}return i}},UF=function(e,t,r){if(!e)return"";var i=e[Math.min(t,e.length-1)];return i?r?i.open:i.close:""},NY={name:"box-shadow",initialValue:"none",type:1,prefix:!1,parse:function(e,t){return t.length===1&&nB(t[0],"none")?[]:Hc(t).map(function(r){for(var i={color:255,offsetX:Co,offsetY:Co,blur:Co,spread:Co,inset:!1},a=0,u=0;u<r.length;u++){var h=r[u];nB(h,"inset")?i.inset=!0:id(h)?(a===0?i.offsetX=h:a===1?i.offsetY=h:a===2?i.blur=h:i.spread=h,a++):i.color=Yh.parse(e,h)}return i})}},DY={name:"paint-order",initialValue:"normal",prefix:!1,type:1,parse:function(e,t){var r=[0,1,2],i=[];return t.filter(Ai).forEach(function(a){switch(a.value){case"stroke":i.push(1);break;case"fill":i.push(0);break;case"markers":i.push(2);break}}),r.forEach(function(a){i.indexOf(a)===-1&&i.push(a)}),i}},QY={name:"-webkit-text-stroke-color",initialValue:"currentcolor",prefix:!1,type:3,format:"color"},OY={name:"-webkit-text-stroke-width",initialValue:"0",type:0,prefix:!1,parse:function(e,t){return N0(t)?t.number:0}},zY=function(){function e(t,r){var i,a;this.animationDuration=Ir(t,UY,r.animationDuration),this.backgroundClip=Ir(t,uX,r.backgroundClip),this.backgroundColor=Ir(t,hX,r.backgroundColor),this.backgroundImage=Ir(t,xX,r.backgroundImage),this.backgroundOrigin=Ir(t,bX,r.backgroundOrigin),this.backgroundPosition=Ir(t,BX,r.backgroundPosition),this.backgroundRepeat=Ir(t,CX,r.backgroundRepeat),this.backgroundSize=Ir(t,EX,r.backgroundSize),this.borderTopColor=Ir(t,FX,r.borderTopColor),this.borderRightColor=Ir(t,TX,r.borderRightColor),this.borderBottomColor=Ir(t,PX,r.borderBottomColor),this.borderLeftColor=Ir(t,LX,r.borderLeftColor),this.borderTopLeftRadius=Ir(t,MX,r.borderTopLeftRadius),this.borderTopRightRadius=Ir(t,kX,r.borderTopRightRadius),this.borderBottomRightRadius=Ir(t,UX,r.borderBottomRightRadius),this.borderBottomLeftRadius=Ir(t,RX,r.borderBottomLeftRadius),this.borderTopStyle=Ir(t,NX,r.borderTopStyle),this.borderRightStyle=Ir(t,DX,r.borderRightStyle),this.borderBottomStyle=Ir(t,QX,r.borderBottomStyle),this.borderLeftStyle=Ir(t,OX,r.borderLeftStyle),this.borderTopWidth=Ir(t,zX,r.borderTopWidth),this.borderRightWidth=Ir(t,HX,r.borderRightWidth),this.borderBottomWidth=Ir(t,jX,r.borderBottomWidth),this.borderLeftWidth=Ir(t,VX,r.borderLeftWidth),this.boxShadow=Ir(t,NY,r.boxShadow),this.color=Ir(t,KX,r.color),this.direction=Ir(t,GX,r.direction),this.display=Ir(t,$X,r.display),this.float=Ir(t,ZX,r.cssFloat),this.fontFamily=Ir(t,EY,r.fontFamily),this.fontSize=Ir(t,IY,r.fontSize),this.fontStyle=Ir(t,PY,r.fontStyle),this.fontVariant=Ir(t,TY,r.fontVariant),this.fontWeight=Ir(t,FY,r.fontWeight),this.letterSpacing=Ir(t,WX,r.letterSpacing),this.lineBreak=Ir(t,XX,r.lineBreak),this.lineHeight=Ir(t,YX,r.lineHeight),this.listStyleImage=Ir(t,JX,r.listStyleImage),this.listStylePosition=Ir(t,eY,r.listStylePosition),this.listStyleType=Ir(t,iB,r.listStyleType),this.marginTop=Ir(t,tY,r.marginTop),this.marginRight=Ir(t,rY,r.marginRight),this.marginBottom=Ir(t,nY,r.marginBottom),this.marginLeft=Ir(t,iY,r.marginLeft),this.opacity=Ir(t,BY,r.opacity);var u=Ir(t,sY,r.overflow);this.overflowX=u[0],this.overflowY=u[u.length>1?1:0],this.overflowWrap=Ir(t,oY,r.overflowWrap),this.paddingTop=Ir(t,aY,r.paddingTop),this.paddingRight=Ir(t,lY,r.paddingRight),this.paddingBottom=Ir(t,AY,r.paddingBottom),this.paddingLeft=Ir(t,cY,r.paddingLeft),this.paintOrder=Ir(t,DY,r.paintOrder),this.position=Ir(t,hY,r.position),this.textAlign=Ir(t,uY,r.textAlign),this.textDecorationColor=Ir(t,CY,(i=r.textDecorationColor)!==null&&i!==void 0?i:r.color),this.textDecorationLine=Ir(t,SY,(a=r.textDecorationLine)!==null&&a!==void 0?a:r.textDecoration),this.textShadow=Ir(t,dY,r.textShadow),this.textTransform=Ir(t,fY,r.textTransform),this.transform=Ir(t,pY,r.transform),this.transformOrigin=Ir(t,_Y,r.transformOrigin),this.visibility=Ir(t,wY,r.visibility),this.webkitTextStrokeColor=Ir(t,QY,r.webkitTextStrokeColor),this.webkitTextStrokeWidth=Ir(t,OY,r.webkitTextStrokeWidth),this.wordBreak=Ir(t,xY,r.wordBreak),this.zIndex=Ir(t,bY,r.zIndex)}return e.prototype.isVisible=function(){return this.display>0&&this.opacity>0&&this.visibility===0},e.prototype.isTransparent=function(){return Jh(this.backgroundColor)},e.prototype.isTransformed=function(){return this.transform!==null},e.prototype.isPositioned=function(){return this.position!==0},e.prototype.isPositionedWithZIndex=function(){return this.isPositioned()&&!this.zIndex.auto},e.prototype.isFloating=function(){return this.float!==0},e.prototype.isInlineLevel=function(){return Zs(this.display,4)||Zs(this.display,33554432)||Zs(this.display,268435456)||Zs(this.display,536870912)||Zs(this.display,67108864)||Zs(this.display,134217728)},e}(),HY=function(){function e(t,r){this.content=Ir(t,LY,r.content),this.quotes=Ir(t,RY,r.quotes)}return e}(),RF=function(){function e(t,r){this.counterIncrement=Ir(t,MY,r.counterIncrement),this.counterReset=Ir(t,kY,r.counterReset)}return e}(),Ir=function(e,t,r){var i=new m6,a=r!==null&&typeof r<"u"?r.toString():t.initialValue;i.write(a);var u=new g6(i.read());switch(t.type){case 2:var h=u.parseComponentValue();return t.parse(e,Ai(h)?h.value:t.initialValue);case 0:return t.parse(e,u.parseComponentValue());case 1:return t.parse(e,u.parseComponentValues());case 4:return u.parseComponentValue();case 3:switch(t.format){case"angle":return T_.parse(e,u.parseComponentValue());case"color":return Yh.parse(e,u.parseComponentValue());case"image":return aC.parse(e,u.parseComponentValue());case"length":var o=u.parseComponentValue();return id(o)?o:Co;case"length-percentage":var g=u.parseComponentValue();return Ls(g)?g:Co;case"time":return U6.parse(e,u.parseComponentValue())}break}},jY="data-html2canvas-debug",VY=function(e){var t=e.getAttribute(jY);switch(t){case"all":return 1;case"clone":return 2;case"parse":return 3;case"render":return 4;default:return 0}},sB=function(e,t){var r=VY(e);return r===1||t===r},jc=function(){function e(t,r){if(this.context=t,this.textNodes=[],this.elements=[],this.flags=0,sB(r,3))debugger;this.styles=new zY(t,window.getComputedStyle(r,null)),lB(r)&&(this.styles.animationDuration.some(function(i){return i>0})&&(r.style.animationDuration="0s"),this.styles.transform!==null&&(r.style.transform="none")),this.bounds=I_(this.context,r),sB(r,4)&&(this.flags|=16)}return e}(),KY="AAAAAAAAAAAAEA4AGBkAAFAaAAACAAAAAAAIABAAGAAwADgACAAQAAgAEAAIABAACAAQAAgAEAAIABAACAAQAAgAEAAIABAAQABIAEQATAAIABAACAAQAAgAEAAIABAAVABcAAgAEAAIABAACAAQAGAAaABwAHgAgACIAI4AlgAIABAAmwCjAKgAsAC2AL4AvQDFAMoA0gBPAVYBWgEIAAgACACMANoAYgFkAWwBdAF8AX0BhQGNAZUBlgGeAaMBlQGWAasBswF8AbsBwwF0AcsBYwHTAQgA2wG/AOMBdAF8AekB8QF0AfkB+wHiAHQBfAEIAAMC5gQIAAsCEgIIAAgAFgIeAggAIgIpAggAMQI5AkACygEIAAgASAJQAlgCYAIIAAgACAAKBQoFCgUTBRMFGQUrBSsFCAAIAAgACAAIAAgACAAIAAgACABdAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABoAmgCrwGvAQgAbgJ2AggAHgEIAAgACADnAXsCCAAIAAgAgwIIAAgACAAIAAgACACKAggAkQKZAggAPADJAAgAoQKkAqwCsgK6AsICCADJAggA0AIIAAgACAAIANYC3gIIAAgACAAIAAgACABAAOYCCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAkASoB+QIEAAgACAA8AEMCCABCBQgACABJBVAFCAAIAAgACAAIAAgACAAIAAgACABTBVoFCAAIAFoFCABfBWUFCAAIAAgACAAIAAgAbQUIAAgACAAIAAgACABzBXsFfQWFBYoFigWKBZEFigWKBYoFmAWfBaYFrgWxBbkFCAAIAAgACAAIAAgACAAIAAgACAAIAMEFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAMgFCADQBQgACAAIAAgACAAIAAgACAAIAAgACAAIAO4CCAAIAAgAiQAIAAgACABAAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAD0AggACAD8AggACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIANYFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAMDvwAIAAgAJAIIAAgACAAIAAgACAAIAAgACwMTAwgACAB9BOsEGwMjAwgAKwMyAwsFYgE3A/MEPwMIAEUDTQNRAwgAWQOsAGEDCAAIAAgACAAIAAgACABpAzQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFIQUoBSwFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABtAwgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABMAEwACAAIAAgACAAIABgACAAIAAgACAC/AAgACAAyAQgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACAAIAAwAAgACAAIAAgACAAIAAgACAAIAAAARABIAAgACAAIABQASAAIAAgAIABwAEAAjgCIABsAqAC2AL0AigDQAtwC+IJIQqVAZUBWQqVAZUBlQGVAZUBlQGrC5UBlQGVAZUBlQGVAZUBlQGVAXsKlQGVAbAK6wsrDGUMpQzlDJUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAfAKAAuZA64AtwCJALoC6ADwAAgAuACgA/oEpgO6AqsD+AAIAAgAswMIAAgACAAIAIkAuwP5AfsBwwPLAwgACAAIAAgACADRA9kDCAAIAOED6QMIAAgACAAIAAgACADuA/YDCAAIAP4DyQAIAAgABgQIAAgAXQAOBAgACAAIAAgACAAIABMECAAIAAgACAAIAAgACAD8AAQBCAAIAAgAGgQiBCoECAExBAgAEAEIAAgACAAIAAgACAAIAAgACAAIAAgACAA4BAgACABABEYECAAIAAgATAQYAQgAVAQIAAgACAAIAAgACAAIAAgACAAIAFoECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAOQEIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAB+BAcACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAEABhgSMBAgACAAIAAgAlAQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAwAEAAQABAADAAMAAwADAAQABAAEAAQABAAEAAQABHATAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAdQMIAAgACAAIAAgACAAIAMkACAAIAAgAfQMIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACFA4kDCAAIAAgACAAIAOcBCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAIcDCAAIAAgACAAIAAgACAAIAAgACAAIAJEDCAAIAAgACADFAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABgBAgAZgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAbAQCBXIECAAIAHkECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABAAJwEQACjBKoEsgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAC6BMIECAAIAAgACAAIAAgACABmBAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAxwQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAGYECAAIAAgAzgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBd0FXwUIAOIF6gXxBYoF3gT5BQAGCAaKBYoFigWKBYoFigWKBYoFigWKBYoFigXWBIoFigWKBYoFigWKBYoFigWKBYsFEAaKBYoFigWKBYoFigWKBRQGCACKBYoFigWKBQgACAAIANEECAAIABgGigUgBggAJgYIAC4GMwaKBYoF0wQ3Bj4GigWKBYoFigWKBYoFigWKBYoFigWKBYoFigUIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWLBf///////wQABAAEAAQABAAEAAQABAAEAAQAAwAEAAQAAgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAQADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUAAAAFAAUAAAAFAAUAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAQAAAAUABQAFAAUABQAFAAAAAAAFAAUAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAFAAUAAQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAAABwAHAAcAAAAHAAcABwAFAAEAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAcABwAFAAUAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAQABAAAAAAAAAAAAAAAFAAUABQAFAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAHAAcAAAAHAAcAAAAAAAUABQAHAAUAAQAHAAEABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwABAAUABQAFAAUAAAAAAAAAAAAAAAEAAQABAAEAAQABAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABQANAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAABQAHAAUABQAFAAAAAAAAAAcABQAFAAUABQAFAAQABAAEAAQABAAEAAQABAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUAAAAFAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAUAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAcABwAFAAcABwAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUABwAHAAUABQAFAAUAAAAAAAcABwAAAAAABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAAAAAAAAAAABQAFAAAAAAAFAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAFAAUABQAFAAUAAAAFAAUABwAAAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABwAFAAUABQAFAAAAAAAHAAcAAAAAAAcABwAFAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAAAAAAAAAHAAcABwAAAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAUABQAFAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAHAAcABQAHAAcAAAAFAAcABwAAAAcABwAFAAUAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAFAAcABwAFAAUABQAAAAUAAAAHAAcABwAHAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAHAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUAAAAFAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAUAAAAFAAUAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABwAFAAUABQAFAAUABQAAAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABQAFAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAFAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAHAAUABQAFAAUABQAFAAUABwAHAAcABwAHAAcABwAHAAUABwAHAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABwAHAAcABwAFAAUABwAHAAcAAAAAAAAAAAAHAAcABQAHAAcABwAHAAcABwAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAUABQAFAAUABQAFAAUAAAAFAAAABQAAAAAABQAFAAUABQAFAAUABQAFAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAUABQAFAAUABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABwAFAAcABwAHAAcABwAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAUABQAFAAUABwAHAAUABQAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABQAFAAcABwAHAAUABwAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAcABQAFAAUABQAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAAAAAABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAAAAAAAAAFAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAUABQAHAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAFAAUABQAFAAcABwAFAAUABwAHAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAcABwAFAAUABwAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABQAAAAAABQAFAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAcABwAAAAAAAAAAAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAcABwAFAAcABwAAAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAFAAUABQAAAAUABQAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABwAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAHAAcABQAHAAUABQAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAAABwAHAAAAAAAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAFAAUABwAFAAcABwAFAAcABQAFAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAAAAAABwAHAAcABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAFAAcABwAFAAUABQAFAAUABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAUABQAFAAcABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABQAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAAAAAAFAAUABwAHAAcABwAFAAAAAAAAAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAHAAUABQAFAAUABQAFAAUABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAABQAAAAUABQAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAHAAcAAAAFAAUAAAAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABQAFAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAABQAFAAUABQAFAAUABQAAAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAFAAUABQAFAAUADgAOAA4ADgAOAA4ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAMAAwADAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkAAAAAAAAAAAAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAAAAAAAAAAAAsADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwACwAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAADgAOAA4AAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAAAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4AAAAOAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAAAAAAAAAAAA4AAAAOAAAAAAAAAAAADgAOAA4AAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAA=",NF="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",dg=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var ev=0;ev<NF.length;ev++)dg[NF.charCodeAt(ev)]=ev;var GY=function(e){var t=e.length*.75,r=e.length,i,a=0,u,h,o,g;e[e.length-1]==="="&&(t--,e[e.length-2]==="="&&t--);var y=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(t):new Array(t),C=Array.isArray(y)?y:new Uint8Array(y);for(i=0;i<r;i+=4)u=dg[e.charCodeAt(i)],h=dg[e.charCodeAt(i+1)],o=dg[e.charCodeAt(i+2)],g=dg[e.charCodeAt(i+3)],C[a++]=u<<2|h>>4,C[a++]=(h&15)<<4|o>>2,C[a++]=(o&3)<<6|g&63;return y},$Y=function(e){for(var t=e.length,r=[],i=0;i<t;i+=2)r.push(e[i+1]<<8|e[i]);return r},qY=function(e){for(var t=e.length,r=[],i=0;i<t;i+=4)r.push(e[i+3]<<24|e[i+2]<<16|e[i+1]<<8|e[i]);return r},ef=5,lC=11,jx=2,ZY=lC-ef,R6=65536>>ef,WY=1<<ef,Vx=WY-1,XY=1024>>ef,YY=R6+XY,JY=YY,eJ=32,tJ=JY+eJ,rJ=65536>>lC,nJ=1<<ZY,iJ=nJ-1,DF=function(e,t,r){return e.slice?e.slice(t,r):new Uint16Array(Array.prototype.slice.call(e,t,r))},sJ=function(e,t,r){return e.slice?e.slice(t,r):new Uint32Array(Array.prototype.slice.call(e,t,r))},oJ=function(e,t){var r=GY(e),i=Array.isArray(r)?qY(r):new Uint32Array(r),a=Array.isArray(r)?$Y(r):new Uint16Array(r),u=24,h=DF(a,u/2,i[4]/2),o=i[5]===2?DF(a,(u+i[4])/2):sJ(i,Math.ceil((u+i[4])/4));return new aJ(i[0],i[1],i[2],i[3],h,o)},aJ=function(){function e(t,r,i,a,u,h){this.initialValue=t,this.errorValue=r,this.highStart=i,this.highValueIndex=a,this.index=u,this.data=h}return e.prototype.get=function(t){var r;if(t>=0){if(t<55296||t>56319&&t<=65535)return r=this.index[t>>ef],r=(r<<jx)+(t&Vx),this.data[r];if(t<=65535)return r=this.index[R6+(t-55296>>ef)],r=(r<<jx)+(t&Vx),this.data[r];if(t<this.highStart)return r=tJ-rJ+(t>>lC),r=this.index[r],r+=t>>ef&iJ,r=this.index[r],r=(r<<jx)+(t&Vx),this.data[r];if(t<=1114111)return this.data[this.highValueIndex]}return this.errorValue},e}(),QF="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",lJ=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var tv=0;tv<QF.length;tv++)lJ[QF.charCodeAt(tv)]=tv;var AJ=1,Kx=2,Gx=3,OF=4,zF=5,cJ=7,HF=8,$x=9,qx=10,jF=11,VF=12,KF=13,GF=14,Zx=15,uJ=function(e){for(var t=[],r=0,i=e.length;r<i;){var a=e.charCodeAt(r++);if(a>=55296&&a<=56319&&r<i){var u=e.charCodeAt(r++);(u&64512)===56320?t.push(((a&1023)<<10)+(u&1023)+65536):(t.push(a),r--)}else t.push(a)}return t},hJ=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(String.fromCodePoint)return String.fromCodePoint.apply(String,e);var r=e.length;if(!r)return"";for(var i=[],a=-1,u="";++a<r;){var h=e[a];h<=65535?i.push(h):(h-=65536,i.push((h>>10)+55296,h%1024+56320)),(a+1===r||i.length>16384)&&(u+=String.fromCharCode.apply(String,i),i.length=0)}return u},dJ=oJ(KY),Vl="×",Wx="÷",fJ=function(e){return dJ.get(e)},pJ=function(e,t,r){var i=r-2,a=t[i],u=t[r-1],h=t[r];if(u===Kx&&h===Gx)return Vl;if(u===Kx||u===Gx||u===OF||h===Kx||h===Gx||h===OF)return Wx;if(u===HF&&[HF,$x,jF,VF].indexOf(h)!==-1||(u===jF||u===$x)&&(h===$x||h===qx)||(u===VF||u===qx)&&h===qx||h===KF||h===zF||h===cJ||u===AJ)return Vl;if(u===KF&&h===GF){for(;a===zF;)a=t[--i];if(a===GF)return Vl}if(u===Zx&&h===Zx){for(var o=0;a===Zx;)o++,a=t[--i];if(o%2===0)return Vl}return Wx},mJ=function(e){var t=uJ(e),r=t.length,i=0,a=0,u=t.map(fJ);return{next:function(){if(i>=r)return{done:!0,value:null};for(var h=Vl;i<r&&(h=pJ(t,u,++i))===Vl;);if(h!==Vl||i===r){var o=hJ.apply(null,t.slice(a,i));return a=i,{value:o,done:!1}}return{done:!0,value:null}}}},gJ=function(e){for(var t=mJ(e),r=[],i;!(i=t.next()).done;)i.value&&r.push(i.value.slice());return r},yJ=function(e){var t=123;if(e.createRange){var r=e.createRange();if(r.getBoundingClientRect){var i=e.createElement("boundtest");i.style.height=t+"px",i.style.display="block",e.body.appendChild(i),r.selectNode(i);var a=r.getBoundingClientRect(),u=Math.round(a.height);if(e.body.removeChild(i),u===t)return!0}}return!1},vJ=function(e){var t=e.createElement("boundtest");t.style.width="50px",t.style.display="block",t.style.fontSize="12px",t.style.letterSpacing="0px",t.style.wordSpacing="0px",e.body.appendChild(t);var r=e.createRange();t.innerHTML=typeof"".repeat=="function"?"&#128104;".repeat(10):"";var i=t.firstChild,a=F_(i.data).map(function(g){return vs(g)}),u=0,h={},o=a.every(function(g,y){r.setStart(i,u),r.setEnd(i,u+g.length);var C=r.getBoundingClientRect();u+=g.length;var I=C.x>h.x||C.y>h.y;return h=C,y===0?!0:I});return e.body.removeChild(t),o},_J=function(){return typeof new Image().crossOrigin<"u"},wJ=function(){return typeof new XMLHttpRequest().responseType=="string"},xJ=function(e){var t=new Image,r=e.createElement("canvas"),i=r.getContext("2d");if(!i)return!1;t.src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'></svg>";try{i.drawImage(t,0,0),r.toDataURL()}catch{return!1}return!0},$F=function(e){return e[0]===0&&e[1]===255&&e[2]===0&&e[3]===255},bJ=function(e){var t=e.createElement("canvas"),r=100;t.width=r,t.height=r;var i=t.getContext("2d");if(!i)return Promise.reject(!1);i.fillStyle="rgb(0, 255, 0)",i.fillRect(0,0,r,r);var a=new Image,u=t.toDataURL();a.src=u;var h=oB(r,r,0,0,a);return i.fillStyle="red",i.fillRect(0,0,r,r),qF(h).then(function(o){i.drawImage(o,0,0);var g=i.getImageData(0,0,r,r).data;i.fillStyle="red",i.fillRect(0,0,r,r);var y=e.createElement("div");return y.style.backgroundImage="url("+u+")",y.style.height=r+"px",$F(g)?qF(oB(r,r,0,0,y)):Promise.reject(!1)}).then(function(o){return i.drawImage(o,0,0),$F(i.getImageData(0,0,r,r).data)}).catch(function(){return!1})},oB=function(e,t,r,i,a){var u="http://www.w3.org/2000/svg",h=document.createElementNS(u,"svg"),o=document.createElementNS(u,"foreignObject");return h.setAttributeNS(null,"width",e.toString()),h.setAttributeNS(null,"height",t.toString()),o.setAttributeNS(null,"width","100%"),o.setAttributeNS(null,"height","100%"),o.setAttributeNS(null,"x",r.toString()),o.setAttributeNS(null,"y",i.toString()),o.setAttributeNS(null,"externalResourcesRequired","true"),h.appendChild(o),o.appendChild(a),h},qF=function(e){return new Promise(function(t,r){var i=new Image;i.onload=function(){return t(i)},i.onerror=r,i.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(e))})},Bo={get SUPPORT_RANGE_BOUNDS(){var e=yJ(document);return Object.defineProperty(Bo,"SUPPORT_RANGE_BOUNDS",{value:e}),e},get SUPPORT_WORD_BREAKING(){var e=Bo.SUPPORT_RANGE_BOUNDS&&vJ(document);return Object.defineProperty(Bo,"SUPPORT_WORD_BREAKING",{value:e}),e},get SUPPORT_SVG_DRAWING(){var e=xJ(document);return Object.defineProperty(Bo,"SUPPORT_SVG_DRAWING",{value:e}),e},get SUPPORT_FOREIGNOBJECT_DRAWING(){var e=typeof Array.from=="function"&&typeof window.fetch=="function"?bJ(document):Promise.resolve(!1);return Object.defineProperty(Bo,"SUPPORT_FOREIGNOBJECT_DRAWING",{value:e}),e},get SUPPORT_CORS_IMAGES(){var e=_J();return Object.defineProperty(Bo,"SUPPORT_CORS_IMAGES",{value:e}),e},get SUPPORT_RESPONSE_TYPE(){var e=wJ();return Object.defineProperty(Bo,"SUPPORT_RESPONSE_TYPE",{value:e}),e},get SUPPORT_CORS_XHR(){var e="withCredentials"in new XMLHttpRequest;return Object.defineProperty(Bo,"SUPPORT_CORS_XHR",{value:e}),e},get SUPPORT_NATIVE_TEXT_SEGMENTATION(){var e=!!(typeof Intl<"u"&&Intl.Segmenter);return Object.defineProperty(Bo,"SUPPORT_NATIVE_TEXT_SEGMENTATION",{value:e}),e}},Mg=function(){function e(t,r){this.text=t,this.bounds=r}return e}(),BJ=function(e,t,r,i){var a=EJ(t,r),u=[],h=0;return a.forEach(function(o){if(r.textDecorationLine.length||o.trim().length>0)if(Bo.SUPPORT_RANGE_BOUNDS){var g=ZF(i,h,o.length).getClientRects();if(g.length>1){var y=AC(o),C=0;y.forEach(function(F){u.push(new Mg(F,Du.fromDOMRectList(e,ZF(i,C+h,F.length).getClientRects()))),C+=F.length})}else u.push(new Mg(o,Du.fromDOMRectList(e,g)))}else{var I=i.splitText(o.length);u.push(new Mg(o,CJ(e,i))),i=I}else Bo.SUPPORT_RANGE_BOUNDS||(i=i.splitText(o.length));h+=o.length}),u},CJ=function(e,t){var r=t.ownerDocument;if(r){var i=r.createElement("html2canvaswrapper");i.appendChild(t.cloneNode(!0));var a=t.parentNode;if(a){a.replaceChild(i,t);var u=I_(e,i);return i.firstChild&&a.replaceChild(i.firstChild,i),u}}return Du.EMPTY},ZF=function(e,t,r){var i=e.ownerDocument;if(!i)throw new Error("Node has no owner document");var a=i.createRange();return a.setStart(e,t),a.setEnd(e,t+r),a},AC=function(e){if(Bo.SUPPORT_NATIVE_TEXT_SEGMENTATION){var t=new Intl.Segmenter(void 0,{granularity:"grapheme"});return Array.from(t.segment(e)).map(function(r){return r.segment})}return gJ(e)},SJ=function(e,t){if(Bo.SUPPORT_NATIVE_TEXT_SEGMENTATION){var r=new Intl.Segmenter(void 0,{granularity:"word"});return Array.from(r.segment(e)).map(function(i){return i.segment})}return FJ(e,t)},EJ=function(e,t){return t.letterSpacing!==0?AC(e):SJ(e,t)},IJ=[32,160,4961,65792,65793,4153,4241],FJ=function(e,t){for(var r=rW(e,{lineBreak:t.lineBreak,wordBreak:t.overflowWrap==="break-word"?"break-word":t.wordBreak}),i=[],a,u=function(){if(a.value){var h=a.value.slice(),o=F_(h),g="";o.forEach(function(y){IJ.indexOf(y)===-1?g+=vs(y):(g.length&&i.push(g),i.push(vs(y)),g="")}),g.length&&i.push(g)}};!(a=r.next()).done;)u();return i},TJ=function(){function e(t,r,i){this.text=PJ(r.data,i.textTransform),this.textBounds=BJ(t,this.text,i,r)}return e}(),PJ=function(e,t){switch(t){case 1:return e.toLowerCase();case 3:return e.replace(LJ,MJ);case 2:return e.toUpperCase();default:return e}},LJ=/(^|\s|:|-|\(|\))([a-z])/g,MJ=function(e,t,r){return e.length>0?t+r.toUpperCase():e},N6=function(e){qA(t,e);function t(r,i){var a=e.call(this,r,i)||this;return a.src=i.currentSrc||i.src,a.intrinsicWidth=i.naturalWidth,a.intrinsicHeight=i.naturalHeight,a.context.cache.addImage(a.src),a}return t}(jc),D6=function(e){qA(t,e);function t(r,i){var a=e.call(this,r,i)||this;return a.canvas=i,a.intrinsicWidth=i.width,a.intrinsicHeight=i.height,a}return t}(jc),Q6=function(e){qA(t,e);function t(r,i){var a=e.call(this,r,i)||this,u=new XMLSerializer,h=I_(r,i);return i.setAttribute("width",h.width+"px"),i.setAttribute("height",h.height+"px"),a.svg="data:image/svg+xml,"+encodeURIComponent(u.serializeToString(i)),a.intrinsicWidth=i.width.baseVal.value,a.intrinsicHeight=i.height.baseVal.value,a.context.cache.addImage(a.svg),a}return t}(jc),O6=function(e){qA(t,e);function t(r,i){var a=e.call(this,r,i)||this;return a.value=i.value,a}return t}(jc),aB=function(e){qA(t,e);function t(r,i){var a=e.call(this,r,i)||this;return a.start=i.start,a.reversed=typeof i.reversed=="boolean"&&i.reversed===!0,a}return t}(jc),kJ=[{type:15,flags:0,unit:"px",number:3}],UJ=[{type:16,flags:0,number:50}],RJ=function(e){return e.width>e.height?new Du(e.left+(e.width-e.height)/2,e.top,e.height,e.height):e.width<e.height?new Du(e.left,e.top+(e.height-e.width)/2,e.width,e.width):e},NJ=function(e){var t=e.type===DJ?new Array(e.value.length+1).join("•"):e.value;return t.length===0?e.placeholder||"":t},P1="checkbox",L1="radio",DJ="password",WF=707406591,cC=function(e){qA(t,e);function t(r,i){var a=e.call(this,r,i)||this;switch(a.type=i.type.toLowerCase(),a.checked=i.checked,a.value=NJ(i),(a.type===P1||a.type===L1)&&(a.styles.backgroundColor=3739148031,a.styles.borderTopColor=a.styles.borderRightColor=a.styles.borderBottomColor=a.styles.borderLeftColor=2779096575,a.styles.borderTopWidth=a.styles.borderRightWidth=a.styles.borderBottomWidth=a.styles.borderLeftWidth=1,a.styles.borderTopStyle=a.styles.borderRightStyle=a.styles.borderBottomStyle=a.styles.borderLeftStyle=1,a.styles.backgroundClip=[0],a.styles.backgroundOrigin=[0],a.bounds=RJ(a.bounds)),a.type){case P1:a.styles.borderTopRightRadius=a.styles.borderTopLeftRadius=a.styles.borderBottomRightRadius=a.styles.borderBottomLeftRadius=kJ;break;case L1:a.styles.borderTopRightRadius=a.styles.borderTopLeftRadius=a.styles.borderBottomRightRadius=a.styles.borderBottomLeftRadius=UJ;break}return a}return t}(jc),z6=function(e){qA(t,e);function t(r,i){var a=e.call(this,r,i)||this,u=i.options[i.selectedIndex||0];return a.value=u&&u.text||"",a}return t}(jc),H6=function(e){qA(t,e);function t(r,i){var a=e.call(this,r,i)||this;return a.value=i.value,a}return t}(jc),j6=function(e){qA(t,e);function t(r,i){var a=e.call(this,r,i)||this;a.src=i.src,a.width=parseInt(i.width,10)||0,a.height=parseInt(i.height,10)||0,a.backgroundColor=a.styles.backgroundColor;try{if(i.contentWindow&&i.contentWindow.document&&i.contentWindow.document.documentElement){a.tree=K6(r,i.contentWindow.document.documentElement);var u=i.contentWindow.document.documentElement?Pg(r,getComputedStyle(i.contentWindow.document.documentElement).backgroundColor):Pu.TRANSPARENT,h=i.contentWindow.document.body?Pg(r,getComputedStyle(i.contentWindow.document.body).backgroundColor):Pu.TRANSPARENT;a.backgroundColor=Jh(u)?Jh(h)?a.styles.backgroundColor:h:u}}catch{}return a}return t}(jc),QJ=["OL","UL","MENU"],Lv=function(e,t,r,i){for(var a=t.firstChild,u=void 0;a;a=u)if(u=a.nextSibling,G6(a)&&a.data.trim().length>0)r.textNodes.push(new TJ(e,a,r.styles));else if(yp(a))if(W6(a)&&a.assignedNodes)a.assignedNodes().forEach(function(o){return Lv(e,o,r,i)});else{var h=V6(e,a);h.styles.isVisible()&&(OJ(a,h,i)?h.flags|=4:zJ(h.styles)&&(h.flags|=2),QJ.indexOf(a.tagName)!==-1&&(h.flags|=8),r.elements.push(h),a.slot,a.shadowRoot?Lv(e,a.shadowRoot,h,i):!M1(a)&&!$6(a)&&!k1(a)&&Lv(e,a,h,i))}},V6=function(e,t){return AB(t)?new N6(e,t):q6(t)?new D6(e,t):$6(t)?new Q6(e,t):HJ(t)?new O6(e,t):jJ(t)?new aB(e,t):VJ(t)?new cC(e,t):k1(t)?new z6(e,t):M1(t)?new H6(e,t):Z6(t)?new j6(e,t):new jc(e,t)},K6=function(e,t){var r=V6(e,t);return r.flags|=4,Lv(e,t,r,r),r},OJ=function(e,t,r){return t.styles.isPositionedWithZIndex()||t.styles.opacity<1||t.styles.isTransformed()||uC(e)&&r.styles.isTransparent()},zJ=function(e){return e.isPositioned()||e.isFloating()},G6=function(e){return e.nodeType===Node.TEXT_NODE},yp=function(e){return e.nodeType===Node.ELEMENT_NODE},lB=function(e){return yp(e)&&typeof e.style<"u"&&!Mv(e)},Mv=function(e){return typeof e.className=="object"},HJ=function(e){return e.tagName==="LI"},jJ=function(e){return e.tagName==="OL"},VJ=function(e){return e.tagName==="INPUT"},KJ=function(e){return e.tagName==="HTML"},$6=function(e){return e.tagName==="svg"},uC=function(e){return e.tagName==="BODY"},q6=function(e){return e.tagName==="CANVAS"},XF=function(e){return e.tagName==="VIDEO"},AB=function(e){return e.tagName==="IMG"},Z6=function(e){return e.tagName==="IFRAME"},YF=function(e){return e.tagName==="STYLE"},GJ=function(e){return e.tagName==="SCRIPT"},M1=function(e){return e.tagName==="TEXTAREA"},k1=function(e){return e.tagName==="SELECT"},W6=function(e){return e.tagName==="SLOT"},JF=function(e){return e.tagName.indexOf("-")>0},$J=function(){function e(){this.counters={}}return e.prototype.getCounterValue=function(t){var r=this.counters[t];return r&&r.length?r[r.length-1]:1},e.prototype.getCounterValues=function(t){var r=this.counters[t];return r||[]},e.prototype.pop=function(t){var r=this;t.forEach(function(i){return r.counters[i].pop()})},e.prototype.parse=function(t){var r=this,i=t.counterIncrement,a=t.counterReset,u=!0;i!==null&&i.forEach(function(o){var g=r.counters[o.counter];g&&o.increment!==0&&(u=!1,g.length||g.push(1),g[Math.max(0,g.length-1)]+=o.increment)});var h=[];return u&&a.forEach(function(o){var g=r.counters[o.counter];h.push(o.counter),g||(g=r.counters[o.counter]=[]),g.push(o.reset)}),h},e}(),eT={integers:[1e3,900,500,400,100,90,50,40,10,9,5,4,1],values:["M","CM","D","CD","C","XC","L","XL","X","IX","V","IV","I"]},tT={integers:[9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["Ք","Փ","Ւ","Ց","Ր","Տ","Վ","Ս","Ռ","Ջ","Պ","Չ","Ո","Շ","Ն","Յ","Մ","Ճ","Ղ","Ձ","Հ","Կ","Ծ","Խ","Լ","Ի","Ժ","Թ","Ը","Է","Զ","Ե","Դ","Գ","Բ","Ա"]},qJ={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,400,300,200,100,90,80,70,60,50,40,30,20,19,18,17,16,15,10,9,8,7,6,5,4,3,2,1],values:["י׳","ט׳","ח׳","ז׳","ו׳","ה׳","ד׳","ג׳","ב׳","א׳","ת","ש","ר","ק","צ","פ","ע","ס","נ","מ","ל","כ","יט","יח","יז","טז","טו","י","ט","ח","ז","ו","ה","ד","ג","ב","א"]},ZJ={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["ჵ","ჰ","ჯ","ჴ","ხ","ჭ","წ","ძ","ც","ჩ","შ","ყ","ღ","ქ","ფ","ჳ","ტ","ს","რ","ჟ","პ","ო","ჲ","ნ","მ","ლ","კ","ი","თ","ჱ","ზ","ვ","ე","დ","გ","ბ","ა"]},Zf=function(e,t,r,i,a,u){return e<t||e>r?g0(e,a,u.length>0):i.integers.reduce(function(h,o,g){for(;e>=o;)e-=o,h+=i.values[g];return h},"")+u},X6=function(e,t,r,i){var a="";do r||e--,a=i(e)+a,e/=t;while(e*t>=t);return a},ys=function(e,t,r,i,a){var u=r-t+1;return(e<0?"-":"")+(X6(Math.abs(e),u,i,function(h){return vs(Math.floor(h%u)+t)})+a)},Td=function(e,t,r){r===void 0&&(r=". ");var i=t.length;return X6(Math.abs(e),i,!1,function(a){return t[Math.floor(a%i)]})+r},tp=1,gh=2,yh=4,fg=8,_u=function(e,t,r,i,a,u){if(e<-9999||e>9999)return g0(e,4,a.length>0);var h=Math.abs(e),o=a;if(h===0)return t[0]+o;for(var g=0;h>0&&g<=4;g++){var y=h%10;y===0&&Zs(u,tp)&&o!==""?o=t[y]+o:y>1||y===1&&g===0||y===1&&g===1&&Zs(u,gh)||y===1&&g===1&&Zs(u,yh)&&e>100||y===1&&g>1&&Zs(u,fg)?o=t[y]+(g>0?r[g-1]:"")+o:y===1&&g>0&&(o=r[g-1]+o),h=Math.floor(h/10)}return(e<0?i:"")+o},rT="十百千萬",nT="拾佰仟萬",iT="マイナス",Xx="마이너스",g0=function(e,t,r){var i=r?". ":"",a=r?"、":"",u=r?", ":"",h=r?" ":"";switch(t){case 0:return"•"+h;case 1:return"◦"+h;case 2:return"◾"+h;case 5:var o=ys(e,48,57,!0,i);return o.length<4?"0"+o:o;case 4:return Td(e,"〇一二三四五六七八九",a);case 6:return Zf(e,1,3999,eT,3,i).toLowerCase();case 7:return Zf(e,1,3999,eT,3,i);case 8:return ys(e,945,969,!1,i);case 9:return ys(e,97,122,!1,i);case 10:return ys(e,65,90,!1,i);case 11:return ys(e,1632,1641,!0,i);case 12:case 49:return Zf(e,1,9999,tT,3,i);case 35:return Zf(e,1,9999,tT,3,i).toLowerCase();case 13:return ys(e,2534,2543,!0,i);case 14:case 30:return ys(e,6112,6121,!0,i);case 15:return Td(e,"子丑寅卯辰巳午未申酉戌亥",a);case 16:return Td(e,"甲乙丙丁戊己庚辛壬癸",a);case 17:case 48:return _u(e,"零一二三四五六七八九",rT,"負",a,gh|yh|fg);case 47:return _u(e,"零壹貳參肆伍陸柒捌玖",nT,"負",a,tp|gh|yh|fg);case 42:return _u(e,"零一二三四五六七八九",rT,"负",a,gh|yh|fg);case 41:return _u(e,"零壹贰叁肆伍陆柒捌玖",nT,"负",a,tp|gh|yh|fg);case 26:return _u(e,"〇一二三四五六七八九","十百千万",iT,a,0);case 25:return _u(e,"零壱弐参四伍六七八九","拾百千万",iT,a,tp|gh|yh);case 31:return _u(e,"영일이삼사오육칠팔구","십백천만",Xx,u,tp|gh|yh);case 33:return _u(e,"零一二三四五六七八九","十百千萬",Xx,u,0);case 32:return _u(e,"零壹貳參四五六七八九","拾百千",Xx,u,tp|gh|yh);case 18:return ys(e,2406,2415,!0,i);case 20:return Zf(e,1,19999,ZJ,3,i);case 21:return ys(e,2790,2799,!0,i);case 22:return ys(e,2662,2671,!0,i);case 22:return Zf(e,1,10999,qJ,3,i);case 23:return Td(e,"あいうえおかきくけこさしすせそたちつてとなにぬねのはひふへほまみむめもやゆよらりるれろわゐゑをん");case 24:return Td(e,"いろはにほへとちりぬるをわかよたれそつねならむうゐのおくやまけふこえてあさきゆめみしゑひもせす");case 27:return ys(e,3302,3311,!0,i);case 28:return Td(e,"アイウエオカキクケコサシスセソタチツテトナニヌネノハヒフヘホマミムメモヤユヨラリルレロワヰヱヲン",a);case 29:return Td(e,"イロハニホヘトチリヌルヲワカヨタレソツネナラムウヰノオクヤマケフコエテアサキユメミシヱヒモセス",a);case 34:return ys(e,3792,3801,!0,i);case 37:return ys(e,6160,6169,!0,i);case 38:return ys(e,4160,4169,!0,i);case 39:return ys(e,2918,2927,!0,i);case 40:return ys(e,1776,1785,!0,i);case 43:return ys(e,3046,3055,!0,i);case 44:return ys(e,3174,3183,!0,i);case 45:return ys(e,3664,3673,!0,i);case 46:return ys(e,3872,3881,!0,i);case 3:default:return ys(e,48,57,!0,i)}},Y6="data-html2canvas-ignore",sT=function(){function e(t,r,i){if(this.context=t,this.options=i,this.scrolledElements=[],this.referenceElement=r,this.counters=new $J,this.quoteDepth=0,!r.ownerDocument)throw new Error("Cloned element does not have an owner document");this.documentElement=this.cloneNode(r.ownerDocument.documentElement,!1)}return e.prototype.toIFrame=function(t,r){var i=this,a=WJ(t,r);if(!a.contentWindow)return Promise.reject("Unable to find iframe window");var u=t.defaultView.pageXOffset,h=t.defaultView.pageYOffset,o=a.contentWindow,g=o.document,y=JJ(a).then(function(){return ya(i,void 0,void 0,function(){var C,I;return Yo(this,function(F){switch(F.label){case 0:return this.scrolledElements.forEach(nee),o&&(o.scrollTo(r.left,r.top),/(iPad|iPhone|iPod)/g.test(navigator.userAgent)&&(o.scrollY!==r.top||o.scrollX!==r.left)&&(this.context.logger.warn("Unable to restore scroll position for cloned document"),this.context.windowBounds=this.context.windowBounds.add(o.scrollX-r.left,o.scrollY-r.top,0,0))),C=this.options.onclone,I=this.clonedReferenceElement,typeof I>"u"?[2,Promise.reject("Error finding the "+this.referenceElement.nodeName+" in the cloned document")]:g.fonts&&g.fonts.ready?[4,g.fonts.ready]:[3,2];case 1:F.sent(),F.label=2;case 2:return/(AppleWebKit)/g.test(navigator.userAgent)?[4,YJ(g)]:[3,4];case 3:F.sent(),F.label=4;case 4:return typeof C=="function"?[2,Promise.resolve().then(function(){return C(g,I)}).then(function(){return a})]:[2,a]}})})});return g.open(),g.write(tee(document.doctype)+"<html></html>"),ree(this.referenceElement.ownerDocument,u,h),g.replaceChild(g.adoptNode(this.documentElement),g.documentElement),g.close(),y},e.prototype.createElementClone=function(t){if(sB(t,2))debugger;if(q6(t))return this.createCanvasClone(t);if(XF(t))return this.createVideoClone(t);if(YF(t))return this.createStyleClone(t);var r=t.cloneNode(!1);return AB(r)&&(AB(t)&&t.currentSrc&&t.currentSrc!==t.src&&(r.src=t.currentSrc,r.srcset=""),r.loading==="lazy"&&(r.loading="eager")),JF(r)?this.createCustomElementClone(r):r},e.prototype.createCustomElementClone=function(t){var r=document.createElement("html2canvascustomelement");return Yx(t.style,r),r},e.prototype.createStyleClone=function(t){try{var r=t.sheet;if(r&&r.cssRules){var i=[].slice.call(r.cssRules,0).reduce(function(u,h){return h&&typeof h.cssText=="string"?u+h.cssText:u},""),a=t.cloneNode(!1);return a.textContent=i,a}}catch(u){if(this.context.logger.error("Unable to access cssRules property",u),u.name!=="SecurityError")throw u}return t.cloneNode(!1)},e.prototype.createCanvasClone=function(t){var r;if(this.options.inlineImages&&t.ownerDocument){var i=t.ownerDocument.createElement("img");try{return i.src=t.toDataURL(),i}catch{this.context.logger.info("Unable to inline canvas contents, canvas is tainted",t)}}var a=t.cloneNode(!1);try{a.width=t.width,a.height=t.height;var u=t.getContext("2d"),h=a.getContext("2d");if(h)if(!this.options.allowTaint&&u)h.putImageData(u.getImageData(0,0,t.width,t.height),0,0);else{var o=(r=t.getContext("webgl2"))!==null&&r!==void 0?r:t.getContext("webgl");if(o){var g=o.getContextAttributes();(g==null?void 0:g.preserveDrawingBuffer)===!1&&this.context.logger.warn("Unable to clone WebGL context as it has preserveDrawingBuffer=false",t)}h.drawImage(t,0,0)}return a}catch{this.context.logger.info("Unable to clone canvas as it is tainted",t)}return a},e.prototype.createVideoClone=function(t){var r=t.ownerDocument.createElement("canvas");r.width=t.offsetWidth,r.height=t.offsetHeight;var i=r.getContext("2d");try{return i&&(i.drawImage(t,0,0,r.width,r.height),this.options.allowTaint||i.getImageData(0,0,r.width,r.height)),r}catch{this.context.logger.info("Unable to clone video as it is tainted",t)}var a=t.ownerDocument.createElement("canvas");return a.width=t.offsetWidth,a.height=t.offsetHeight,a},e.prototype.appendChildNode=function(t,r,i){(!yp(r)||!GJ(r)&&!r.hasAttribute(Y6)&&(typeof this.options.ignoreElements!="function"||!this.options.ignoreElements(r)))&&(!this.options.copyStyles||!yp(r)||!YF(r))&&t.appendChild(this.cloneNode(r,i))},e.prototype.cloneChildNodes=function(t,r,i){for(var a=this,u=t.shadowRoot?t.shadowRoot.firstChild:t.firstChild;u;u=u.nextSibling)if(yp(u)&&W6(u)&&typeof u.assignedNodes=="function"){var h=u.assignedNodes();h.length&&h.forEach(function(o){return a.appendChildNode(r,o,i)})}else this.appendChildNode(r,u,i)},e.prototype.cloneNode=function(t,r){if(G6(t))return document.createTextNode(t.data);if(!t.ownerDocument)return t.cloneNode(!1);var i=t.ownerDocument.defaultView;if(i&&yp(t)&&(lB(t)||Mv(t))){var a=this.createElementClone(t);a.style.transitionProperty="none";var u=i.getComputedStyle(t),h=i.getComputedStyle(t,":before"),o=i.getComputedStyle(t,":after");this.referenceElement===t&&lB(a)&&(this.clonedReferenceElement=a),uC(a)&&oee(a);var g=this.counters.parse(new RF(this.context,u)),y=this.resolvePseudoContent(t,a,h,kg.BEFORE);JF(t)&&(r=!0),XF(t)||this.cloneChildNodes(t,a,r),y&&a.insertBefore(y,a.firstChild);var C=this.resolvePseudoContent(t,a,o,kg.AFTER);return C&&a.appendChild(C),this.counters.pop(g),(u&&(this.options.copyStyles||Mv(t))&&!Z6(t)||r)&&Yx(u,a),(t.scrollTop!==0||t.scrollLeft!==0)&&this.scrolledElements.push([a,t.scrollLeft,t.scrollTop]),(M1(t)||k1(t))&&(M1(a)||k1(a))&&(a.value=t.value),a}return t.cloneNode(!1)},e.prototype.resolvePseudoContent=function(t,r,i,a){var u=this;if(i){var h=i.content,o=r.ownerDocument;if(!(!o||!h||h==="none"||h==="-moz-alt-content"||i.display==="none")){this.counters.parse(new RF(this.context,i));var g=new HY(this.context,i),y=o.createElement("html2canvaspseudoelement");Yx(i,y),g.content.forEach(function(I){if(I.type===0)y.appendChild(o.createTextNode(I.value));else if(I.type===22){var F=o.createElement("img");F.src=I.value,F.style.opacity="1",y.appendChild(F)}else if(I.type===18){if(I.name==="attr"){var b=I.values.filter(Ai);b.length&&y.appendChild(o.createTextNode(t.getAttribute(b[0].value)||""))}else if(I.name==="counter"){var N=I.values.filter(sm),U=N[0],H=N[1];if(U&&Ai(U)){var k=u.counters.getCounterValue(U.value),R=H&&Ai(H)?iB.parse(u.context,H.value):3;y.appendChild(o.createTextNode(g0(k,R,!1)))}}else if(I.name==="counters"){var V=I.values.filter(sm),U=V[0],W=V[1],H=V[2];if(U&&Ai(U)){var se=u.counters.getCounterValues(U.value),fe=H&&Ai(H)?iB.parse(u.context,H.value):3,ue=W&&W.type===0?W.value:"",ae=se.map(function(te){return g0(te,fe,!1)}).join(ue);y.appendChild(o.createTextNode(ae))}}}else if(I.type===20)switch(I.value){case"open-quote":y.appendChild(o.createTextNode(UF(g.quotes,u.quoteDepth++,!0)));break;case"close-quote":y.appendChild(o.createTextNode(UF(g.quotes,--u.quoteDepth,!1)));break;default:y.appendChild(o.createTextNode(I.value))}}),y.className=cB+" "+uB;var C=a===kg.BEFORE?" "+cB:" "+uB;return Mv(r)?r.className.baseValue+=C:r.className+=C,y}}},e.destroy=function(t){return t.parentNode?(t.parentNode.removeChild(t),!0):!1},e}(),kg;(function(e){e[e.BEFORE=0]="BEFORE",e[e.AFTER=1]="AFTER"})(kg||(kg={}));var WJ=function(e,t){var r=e.createElement("iframe");return r.className="html2canvas-container",r.style.visibility="hidden",r.style.position="fixed",r.style.left="-10000px",r.style.top="0px",r.style.border="0",r.width=t.width.toString(),r.height=t.height.toString(),r.scrolling="no",r.setAttribute(Y6,"true"),e.body.appendChild(r),r},XJ=function(e){return new Promise(function(t){if(e.complete){t();return}if(!e.src){t();return}e.onload=t,e.onerror=t})},YJ=function(e){return Promise.all([].slice.call(e.images,0).map(XJ))},JJ=function(e){return new Promise(function(t,r){var i=e.contentWindow;if(!i)return r("No window assigned for iframe");var a=i.document;i.onload=e.onload=function(){i.onload=e.onload=null;var u=setInterval(function(){a.body.childNodes.length>0&&a.readyState==="complete"&&(clearInterval(u),t(e))},50)}})},eee=["all","d","content"],Yx=function(e,t){for(var r=e.length-1;r>=0;r--){var i=e.item(r);eee.indexOf(i)===-1&&t.style.setProperty(i,e.getPropertyValue(i))}return t},tee=function(e){var t="";return e&&(t+="<!DOCTYPE ",e.name&&(t+=e.name),e.internalSubset&&(t+=e.internalSubset),e.publicId&&(t+='"'+e.publicId+'"'),e.systemId&&(t+='"'+e.systemId+'"'),t+=">"),t},ree=function(e,t,r){e&&e.defaultView&&(t!==e.defaultView.pageXOffset||r!==e.defaultView.pageYOffset)&&e.defaultView.scrollTo(t,r)},nee=function(e){var t=e[0],r=e[1],i=e[2];t.scrollLeft=r,t.scrollTop=i},iee=":before",see=":after",cB="___html2canvas___pseudoelement_before",uB="___html2canvas___pseudoelement_after",oT=`{
    content: "" !important;
    display: none !important;
}`,oee=function(e){aee(e,"."+cB+iee+oT+`
         .`+uB+see+oT)},aee=function(e,t){var r=e.ownerDocument;if(r){var i=r.createElement("style");i.textContent=t,e.appendChild(i)}},J6=function(){function e(){}return e.getOrigin=function(t){var r=e._link;return r?(r.href=t,r.href=r.href,r.protocol+r.hostname+r.port):"about:blank"},e.isSameOrigin=function(t){return e.getOrigin(t)===e._origin},e.setContext=function(t){e._link=t.document.createElement("a"),e._origin=e.getOrigin(t.location.href)},e._origin="about:blank",e}(),lee=function(){function e(t,r){this.context=t,this._options=r,this._cache={}}return e.prototype.addImage=function(t){var r=Promise.resolve();return this.has(t)||(eb(t)||hee(t))&&(this._cache[t]=this.loadImage(t)).catch(function(){}),r},e.prototype.match=function(t){return this._cache[t]},e.prototype.loadImage=function(t){return ya(this,void 0,void 0,function(){var r,i,a,u,h=this;return Yo(this,function(o){switch(o.label){case 0:return r=J6.isSameOrigin(t),i=!Jx(t)&&this._options.useCORS===!0&&Bo.SUPPORT_CORS_IMAGES&&!r,a=!Jx(t)&&!r&&!eb(t)&&typeof this._options.proxy=="string"&&Bo.SUPPORT_CORS_XHR&&!i,!r&&this._options.allowTaint===!1&&!Jx(t)&&!eb(t)&&!a&&!i?[2]:(u=t,a?[4,this.proxy(u)]:[3,2]);case 1:u=o.sent(),o.label=2;case 2:return this.context.logger.debug("Added image "+t.substring(0,256)),[4,new Promise(function(g,y){var C=new Image;C.onload=function(){return g(C)},C.onerror=y,(dee(u)||i)&&(C.crossOrigin="anonymous"),C.src=u,C.complete===!0&&setTimeout(function(){return g(C)},500),h._options.imageTimeout>0&&setTimeout(function(){return y("Timed out ("+h._options.imageTimeout+"ms) loading image")},h._options.imageTimeout)})];case 3:return[2,o.sent()]}})})},e.prototype.has=function(t){return typeof this._cache[t]<"u"},e.prototype.keys=function(){return Promise.resolve(Object.keys(this._cache))},e.prototype.proxy=function(t){var r=this,i=this._options.proxy;if(!i)throw new Error("No proxy defined");var a=t.substring(0,256);return new Promise(function(u,h){var o=Bo.SUPPORT_RESPONSE_TYPE?"blob":"text",g=new XMLHttpRequest;g.onload=function(){if(g.status===200)if(o==="text")u(g.response);else{var I=new FileReader;I.addEventListener("load",function(){return u(I.result)},!1),I.addEventListener("error",function(F){return h(F)},!1),I.readAsDataURL(g.response)}else h("Failed to proxy resource "+a+" with status code "+g.status)},g.onerror=h;var y=i.indexOf("?")>-1?"&":"?";if(g.open("GET",""+i+y+"url="+encodeURIComponent(t)+"&responseType="+o),o!=="text"&&g instanceof XMLHttpRequest&&(g.responseType=o),r._options.imageTimeout){var C=r._options.imageTimeout;g.timeout=C,g.ontimeout=function(){return h("Timed out ("+C+"ms) proxying "+a)}}g.send()})},e}(),Aee=/^data:image\/svg\+xml/i,cee=/^data:image\/.*;base64,/i,uee=/^data:image\/.*/i,hee=function(e){return Bo.SUPPORT_SVG_DRAWING||!fee(e)},Jx=function(e){return uee.test(e)},dee=function(e){return cee.test(e)},eb=function(e){return e.substr(0,4)==="blob"},fee=function(e){return e.substr(-3).toLowerCase()==="svg"||Aee.test(e)},Br=function(){function e(t,r){this.type=0,this.x=t,this.y=r}return e.prototype.add=function(t,r){return new e(this.x+t,this.y+r)},e}(),Wf=function(e,t,r){return new Br(e.x+(t.x-e.x)*r,e.y+(t.y-e.y)*r)},rv=function(){function e(t,r,i,a){this.type=1,this.start=t,this.startControl=r,this.endControl=i,this.end=a}return e.prototype.subdivide=function(t,r){var i=Wf(this.start,this.startControl,t),a=Wf(this.startControl,this.endControl,t),u=Wf(this.endControl,this.end,t),h=Wf(i,a,t),o=Wf(a,u,t),g=Wf(h,o,t);return r?new e(this.start,i,h,g):new e(g,o,u,this.end)},e.prototype.add=function(t,r){return new e(this.start.add(t,r),this.startControl.add(t,r),this.endControl.add(t,r),this.end.add(t,r))},e.prototype.reverse=function(){return new e(this.end,this.endControl,this.startControl,this.start)},e}(),ql=function(e){return e.type===1},pee=function(){function e(t){var r=t.styles,i=t.bounds,a=hg(r.borderTopLeftRadius,i.width,i.height),u=a[0],h=a[1],o=hg(r.borderTopRightRadius,i.width,i.height),g=o[0],y=o[1],C=hg(r.borderBottomRightRadius,i.width,i.height),I=C[0],F=C[1],b=hg(r.borderBottomLeftRadius,i.width,i.height),N=b[0],U=b[1],H=[];H.push((u+g)/i.width),H.push((N+I)/i.width),H.push((h+U)/i.height),H.push((y+F)/i.height);var k=Math.max.apply(Math,H);k>1&&(u/=k,h/=k,g/=k,y/=k,I/=k,F/=k,N/=k,U/=k);var R=i.width-g,V=i.height-F,W=i.width-I,se=i.height-U,fe=r.borderTopWidth,ue=r.borderRightWidth,ae=r.borderBottomWidth,Be=r.borderLeftWidth,Ue=Ci(r.paddingTop,t.bounds.width),te=Ci(r.paddingRight,t.bounds.width),de=Ci(r.paddingBottom,t.bounds.width),Te=Ci(r.paddingLeft,t.bounds.width);this.topLeftBorderDoubleOuterBox=u>0||h>0?Qi(i.left+Be/3,i.top+fe/3,u-Be/3,h-fe/3,Wn.TOP_LEFT):new Br(i.left+Be/3,i.top+fe/3),this.topRightBorderDoubleOuterBox=u>0||h>0?Qi(i.left+R,i.top+fe/3,g-ue/3,y-fe/3,Wn.TOP_RIGHT):new Br(i.left+i.width-ue/3,i.top+fe/3),this.bottomRightBorderDoubleOuterBox=I>0||F>0?Qi(i.left+W,i.top+V,I-ue/3,F-ae/3,Wn.BOTTOM_RIGHT):new Br(i.left+i.width-ue/3,i.top+i.height-ae/3),this.bottomLeftBorderDoubleOuterBox=N>0||U>0?Qi(i.left+Be/3,i.top+se,N-Be/3,U-ae/3,Wn.BOTTOM_LEFT):new Br(i.left+Be/3,i.top+i.height-ae/3),this.topLeftBorderDoubleInnerBox=u>0||h>0?Qi(i.left+Be*2/3,i.top+fe*2/3,u-Be*2/3,h-fe*2/3,Wn.TOP_LEFT):new Br(i.left+Be*2/3,i.top+fe*2/3),this.topRightBorderDoubleInnerBox=u>0||h>0?Qi(i.left+R,i.top+fe*2/3,g-ue*2/3,y-fe*2/3,Wn.TOP_RIGHT):new Br(i.left+i.width-ue*2/3,i.top+fe*2/3),this.bottomRightBorderDoubleInnerBox=I>0||F>0?Qi(i.left+W,i.top+V,I-ue*2/3,F-ae*2/3,Wn.BOTTOM_RIGHT):new Br(i.left+i.width-ue*2/3,i.top+i.height-ae*2/3),this.bottomLeftBorderDoubleInnerBox=N>0||U>0?Qi(i.left+Be*2/3,i.top+se,N-Be*2/3,U-ae*2/3,Wn.BOTTOM_LEFT):new Br(i.left+Be*2/3,i.top+i.height-ae*2/3),this.topLeftBorderStroke=u>0||h>0?Qi(i.left+Be/2,i.top+fe/2,u-Be/2,h-fe/2,Wn.TOP_LEFT):new Br(i.left+Be/2,i.top+fe/2),this.topRightBorderStroke=u>0||h>0?Qi(i.left+R,i.top+fe/2,g-ue/2,y-fe/2,Wn.TOP_RIGHT):new Br(i.left+i.width-ue/2,i.top+fe/2),this.bottomRightBorderStroke=I>0||F>0?Qi(i.left+W,i.top+V,I-ue/2,F-ae/2,Wn.BOTTOM_RIGHT):new Br(i.left+i.width-ue/2,i.top+i.height-ae/2),this.bottomLeftBorderStroke=N>0||U>0?Qi(i.left+Be/2,i.top+se,N-Be/2,U-ae/2,Wn.BOTTOM_LEFT):new Br(i.left+Be/2,i.top+i.height-ae/2),this.topLeftBorderBox=u>0||h>0?Qi(i.left,i.top,u,h,Wn.TOP_LEFT):new Br(i.left,i.top),this.topRightBorderBox=g>0||y>0?Qi(i.left+R,i.top,g,y,Wn.TOP_RIGHT):new Br(i.left+i.width,i.top),this.bottomRightBorderBox=I>0||F>0?Qi(i.left+W,i.top+V,I,F,Wn.BOTTOM_RIGHT):new Br(i.left+i.width,i.top+i.height),this.bottomLeftBorderBox=N>0||U>0?Qi(i.left,i.top+se,N,U,Wn.BOTTOM_LEFT):new Br(i.left,i.top+i.height),this.topLeftPaddingBox=u>0||h>0?Qi(i.left+Be,i.top+fe,Math.max(0,u-Be),Math.max(0,h-fe),Wn.TOP_LEFT):new Br(i.left+Be,i.top+fe),this.topRightPaddingBox=g>0||y>0?Qi(i.left+Math.min(R,i.width-ue),i.top+fe,R>i.width+ue?0:Math.max(0,g-ue),Math.max(0,y-fe),Wn.TOP_RIGHT):new Br(i.left+i.width-ue,i.top+fe),this.bottomRightPaddingBox=I>0||F>0?Qi(i.left+Math.min(W,i.width-Be),i.top+Math.min(V,i.height-ae),Math.max(0,I-ue),Math.max(0,F-ae),Wn.BOTTOM_RIGHT):new Br(i.left+i.width-ue,i.top+i.height-ae),this.bottomLeftPaddingBox=N>0||U>0?Qi(i.left+Be,i.top+Math.min(se,i.height-ae),Math.max(0,N-Be),Math.max(0,U-ae),Wn.BOTTOM_LEFT):new Br(i.left+Be,i.top+i.height-ae),this.topLeftContentBox=u>0||h>0?Qi(i.left+Be+Te,i.top+fe+Ue,Math.max(0,u-(Be+Te)),Math.max(0,h-(fe+Ue)),Wn.TOP_LEFT):new Br(i.left+Be+Te,i.top+fe+Ue),this.topRightContentBox=g>0||y>0?Qi(i.left+Math.min(R,i.width+Be+Te),i.top+fe+Ue,R>i.width+Be+Te?0:g-Be+Te,y-(fe+Ue),Wn.TOP_RIGHT):new Br(i.left+i.width-(ue+te),i.top+fe+Ue),this.bottomRightContentBox=I>0||F>0?Qi(i.left+Math.min(W,i.width-(Be+Te)),i.top+Math.min(V,i.height+fe+Ue),Math.max(0,I-(ue+te)),F-(ae+de),Wn.BOTTOM_RIGHT):new Br(i.left+i.width-(ue+te),i.top+i.height-(ae+de)),this.bottomLeftContentBox=N>0||U>0?Qi(i.left+Be+Te,i.top+se,Math.max(0,N-(Be+Te)),U-(ae+de),Wn.BOTTOM_LEFT):new Br(i.left+Be+Te,i.top+i.height-(ae+de))}return e}(),Wn;(function(e){e[e.TOP_LEFT=0]="TOP_LEFT",e[e.TOP_RIGHT=1]="TOP_RIGHT",e[e.BOTTOM_RIGHT=2]="BOTTOM_RIGHT",e[e.BOTTOM_LEFT=3]="BOTTOM_LEFT"})(Wn||(Wn={}));var Qi=function(e,t,r,i,a){var u=4*((Math.sqrt(2)-1)/3),h=r*u,o=i*u,g=e+r,y=t+i;switch(a){case Wn.TOP_LEFT:return new rv(new Br(e,y),new Br(e,y-o),new Br(g-h,t),new Br(g,t));case Wn.TOP_RIGHT:return new rv(new Br(e,t),new Br(e+h,t),new Br(g,y-o),new Br(g,y));case Wn.BOTTOM_RIGHT:return new rv(new Br(g,t),new Br(g,t+o),new Br(e+h,y),new Br(e,y));case Wn.BOTTOM_LEFT:default:return new rv(new Br(g,y),new Br(g-h,y),new Br(e,t+o),new Br(e,t))}},U1=function(e){return[e.topLeftBorderBox,e.topRightBorderBox,e.bottomRightBorderBox,e.bottomLeftBorderBox]},mee=function(e){return[e.topLeftContentBox,e.topRightContentBox,e.bottomRightContentBox,e.bottomLeftContentBox]},R1=function(e){return[e.topLeftPaddingBox,e.topRightPaddingBox,e.bottomRightPaddingBox,e.bottomLeftPaddingBox]},gee=function(){function e(t,r,i){this.offsetX=t,this.offsetY=r,this.matrix=i,this.type=0,this.target=6}return e}(),nv=function(){function e(t,r){this.path=t,this.target=r,this.type=1}return e}(),yee=function(){function e(t){this.opacity=t,this.type=2,this.target=6}return e}(),vee=function(e){return e.type===0},eR=function(e){return e.type===1},_ee=function(e){return e.type===2},aT=function(e,t){return e.length===t.length?e.some(function(r,i){return r===t[i]}):!1},wee=function(e,t,r,i,a){return e.map(function(u,h){switch(h){case 0:return u.add(t,r);case 1:return u.add(t+i,r);case 2:return u.add(t+i,r+a);case 3:return u.add(t,r+a)}return u})},tR=function(){function e(t){this.element=t,this.inlineLevel=[],this.nonInlineLevel=[],this.negativeZIndex=[],this.zeroOrAutoZIndexOrTransformedOrOpacity=[],this.positiveZIndex=[],this.nonPositionedFloats=[],this.nonPositionedInlineLevel=[]}return e}(),rR=function(){function e(t,r){if(this.container=t,this.parent=r,this.effects=[],this.curves=new pee(this.container),this.container.styles.opacity<1&&this.effects.push(new yee(this.container.styles.opacity)),this.container.styles.transform!==null){var i=this.container.bounds.left+this.container.styles.transformOrigin[0].number,a=this.container.bounds.top+this.container.styles.transformOrigin[1].number,u=this.container.styles.transform;this.effects.push(new gee(i,a,u))}if(this.container.styles.overflowX!==0){var h=U1(this.curves),o=R1(this.curves);aT(h,o)?this.effects.push(new nv(h,6)):(this.effects.push(new nv(h,2)),this.effects.push(new nv(o,4)))}}return e.prototype.getEffects=function(t){for(var r=[2,3].indexOf(this.container.styles.position)===-1,i=this.parent,a=this.effects.slice(0);i;){var u=i.effects.filter(function(g){return!eR(g)});if(r||i.container.styles.position!==0||!i.parent){if(a.unshift.apply(a,u),r=[2,3].indexOf(i.container.styles.position)===-1,i.container.styles.overflowX!==0){var h=U1(i.curves),o=R1(i.curves);aT(h,o)||a.unshift(new nv(o,6))}}else a.unshift.apply(a,u);i=i.parent}return a.filter(function(g){return Zs(g.target,t)})},e}(),hB=function(e,t,r,i){e.container.elements.forEach(function(a){var u=Zs(a.flags,4),h=Zs(a.flags,2),o=new rR(a,e);Zs(a.styles.display,2048)&&i.push(o);var g=Zs(a.flags,8)?[]:i;if(u||h){var y=u||a.styles.isPositioned()?r:t,C=new tR(o);if(a.styles.isPositioned()||a.styles.opacity<1||a.styles.isTransformed()){var I=a.styles.zIndex.order;if(I<0){var F=0;y.negativeZIndex.some(function(N,U){return I>N.element.container.styles.zIndex.order?(F=U,!1):F>0}),y.negativeZIndex.splice(F,0,C)}else if(I>0){var b=0;y.positiveZIndex.some(function(N,U){return I>=N.element.container.styles.zIndex.order?(b=U+1,!1):b>0}),y.positiveZIndex.splice(b,0,C)}else y.zeroOrAutoZIndexOrTransformedOrOpacity.push(C)}else a.styles.isFloating()?y.nonPositionedFloats.push(C):y.nonPositionedInlineLevel.push(C);hB(o,C,u?C:r,g)}else a.styles.isInlineLevel()?t.inlineLevel.push(o):t.nonInlineLevel.push(o),hB(o,t,r,g);Zs(a.flags,8)&&nR(a,g)})},nR=function(e,t){for(var r=e instanceof aB?e.start:1,i=e instanceof aB?e.reversed:!1,a=0;a<t.length;a++){var u=t[a];u.container instanceof O6&&typeof u.container.value=="number"&&u.container.value!==0&&(r=u.container.value),u.listValue=g0(r,u.container.styles.listStyleType,!0),r+=i?-1:1}},xee=function(e){var t=new rR(e,null),r=new tR(t),i=[];return hB(t,r,r,i),nR(t.container,i),r},lT=function(e,t){switch(t){case 0:return Yl(e.topLeftBorderBox,e.topLeftPaddingBox,e.topRightBorderBox,e.topRightPaddingBox);case 1:return Yl(e.topRightBorderBox,e.topRightPaddingBox,e.bottomRightBorderBox,e.bottomRightPaddingBox);case 2:return Yl(e.bottomRightBorderBox,e.bottomRightPaddingBox,e.bottomLeftBorderBox,e.bottomLeftPaddingBox);case 3:default:return Yl(e.bottomLeftBorderBox,e.bottomLeftPaddingBox,e.topLeftBorderBox,e.topLeftPaddingBox)}},bee=function(e,t){switch(t){case 0:return Yl(e.topLeftBorderBox,e.topLeftBorderDoubleOuterBox,e.topRightBorderBox,e.topRightBorderDoubleOuterBox);case 1:return Yl(e.topRightBorderBox,e.topRightBorderDoubleOuterBox,e.bottomRightBorderBox,e.bottomRightBorderDoubleOuterBox);case 2:return Yl(e.bottomRightBorderBox,e.bottomRightBorderDoubleOuterBox,e.bottomLeftBorderBox,e.bottomLeftBorderDoubleOuterBox);case 3:default:return Yl(e.bottomLeftBorderBox,e.bottomLeftBorderDoubleOuterBox,e.topLeftBorderBox,e.topLeftBorderDoubleOuterBox)}},Bee=function(e,t){switch(t){case 0:return Yl(e.topLeftBorderDoubleInnerBox,e.topLeftPaddingBox,e.topRightBorderDoubleInnerBox,e.topRightPaddingBox);case 1:return Yl(e.topRightBorderDoubleInnerBox,e.topRightPaddingBox,e.bottomRightBorderDoubleInnerBox,e.bottomRightPaddingBox);case 2:return Yl(e.bottomRightBorderDoubleInnerBox,e.bottomRightPaddingBox,e.bottomLeftBorderDoubleInnerBox,e.bottomLeftPaddingBox);case 3:default:return Yl(e.bottomLeftBorderDoubleInnerBox,e.bottomLeftPaddingBox,e.topLeftBorderDoubleInnerBox,e.topLeftPaddingBox)}},Cee=function(e,t){switch(t){case 0:return iv(e.topLeftBorderStroke,e.topRightBorderStroke);case 1:return iv(e.topRightBorderStroke,e.bottomRightBorderStroke);case 2:return iv(e.bottomRightBorderStroke,e.bottomLeftBorderStroke);case 3:default:return iv(e.bottomLeftBorderStroke,e.topLeftBorderStroke)}},iv=function(e,t){var r=[];return ql(e)?r.push(e.subdivide(.5,!1)):r.push(e),ql(t)?r.push(t.subdivide(.5,!0)):r.push(t),r},Yl=function(e,t,r,i){var a=[];return ql(e)?a.push(e.subdivide(.5,!1)):a.push(e),ql(r)?a.push(r.subdivide(.5,!0)):a.push(r),ql(i)?a.push(i.subdivide(.5,!0).reverse()):a.push(i),ql(t)?a.push(t.subdivide(.5,!1).reverse()):a.push(t),a},iR=function(e){var t=e.bounds,r=e.styles;return t.add(r.borderLeftWidth,r.borderTopWidth,-(r.borderRightWidth+r.borderLeftWidth),-(r.borderTopWidth+r.borderBottomWidth))},N1=function(e){var t=e.styles,r=e.bounds,i=Ci(t.paddingLeft,r.width),a=Ci(t.paddingRight,r.width),u=Ci(t.paddingTop,r.width),h=Ci(t.paddingBottom,r.width);return r.add(i+t.borderLeftWidth,u+t.borderTopWidth,-(t.borderRightWidth+t.borderLeftWidth+i+a),-(t.borderTopWidth+t.borderBottomWidth+u+h))},See=function(e,t){return e===0?t.bounds:e===2?N1(t):iR(t)},Eee=function(e,t){return e===0?t.bounds:e===2?N1(t):iR(t)},tb=function(e,t,r){var i=See(rp(e.styles.backgroundOrigin,t),e),a=Eee(rp(e.styles.backgroundClip,t),e),u=Iee(rp(e.styles.backgroundSize,t),r,i),h=u[0],o=u[1],g=hg(rp(e.styles.backgroundPosition,t),i.width-h,i.height-o),y=Fee(rp(e.styles.backgroundRepeat,t),g,u,i,a),C=Math.round(i.left+g[0]),I=Math.round(i.top+g[1]);return[y,C,I,h,o]},Xf=function(e){return Ai(e)&&e.value===Mp.AUTO},sv=function(e){return typeof e=="number"},Iee=function(e,t,r){var i=t[0],a=t[1],u=t[2],h=e[0],o=e[1];if(!h)return[0,0];if(Ls(h)&&o&&Ls(o))return[Ci(h,r.width),Ci(o,r.height)];var g=sv(u);if(Ai(h)&&(h.value===Mp.CONTAIN||h.value===Mp.COVER)){if(sv(u)){var y=r.width/r.height;return y<u!=(h.value===Mp.COVER)?[r.width,r.width/u]:[r.height*u,r.height]}return[r.width,r.height]}var C=sv(i),I=sv(a),F=C||I;if(Xf(h)&&(!o||Xf(o))){if(C&&I)return[i,a];if(!g&&!F)return[r.width,r.height];if(F&&g){var b=C?i:a*u,N=I?a:i/u;return[b,N]}var U=C?i:r.width,H=I?a:r.height;return[U,H]}if(g){var k=0,R=0;return Ls(h)?k=Ci(h,r.width):Ls(o)&&(R=Ci(o,r.height)),Xf(h)?k=R*u:(!o||Xf(o))&&(R=k/u),[k,R]}var V=null,W=null;if(Ls(h)?V=Ci(h,r.width):o&&Ls(o)&&(W=Ci(o,r.height)),V!==null&&(!o||Xf(o))&&(W=C&&I?V/i*a:r.height),W!==null&&Xf(h)&&(V=C&&I?W/a*i:r.width),V!==null&&W!==null)return[V,W];throw new Error("Unable to calculate background-size for element")},rp=function(e,t){var r=e[t];return typeof r>"u"?e[0]:r},Fee=function(e,t,r,i,a){var u=t[0],h=t[1],o=r[0],g=r[1];switch(e){case 2:return[new Br(Math.round(i.left),Math.round(i.top+h)),new Br(Math.round(i.left+i.width),Math.round(i.top+h)),new Br(Math.round(i.left+i.width),Math.round(g+i.top+h)),new Br(Math.round(i.left),Math.round(g+i.top+h))];case 3:return[new Br(Math.round(i.left+u),Math.round(i.top)),new Br(Math.round(i.left+u+o),Math.round(i.top)),new Br(Math.round(i.left+u+o),Math.round(i.height+i.top)),new Br(Math.round(i.left+u),Math.round(i.height+i.top))];case 1:return[new Br(Math.round(i.left+u),Math.round(i.top+h)),new Br(Math.round(i.left+u+o),Math.round(i.top+h)),new Br(Math.round(i.left+u+o),Math.round(i.top+h+g)),new Br(Math.round(i.left+u),Math.round(i.top+h+g))];default:return[new Br(Math.round(a.left),Math.round(a.top)),new Br(Math.round(a.left+a.width),Math.round(a.top)),new Br(Math.round(a.left+a.width),Math.round(a.height+a.top)),new Br(Math.round(a.left),Math.round(a.height+a.top))]}},Tee="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",AT="Hidden Text",Pee=function(){function e(t){this._data={},this._document=t}return e.prototype.parseMetrics=function(t,r){var i=this._document.createElement("div"),a=this._document.createElement("img"),u=this._document.createElement("span"),h=this._document.body;i.style.visibility="hidden",i.style.fontFamily=t,i.style.fontSize=r,i.style.margin="0",i.style.padding="0",i.style.whiteSpace="nowrap",h.appendChild(i),a.src=Tee,a.width=1,a.height=1,a.style.margin="0",a.style.padding="0",a.style.verticalAlign="baseline",u.style.fontFamily=t,u.style.fontSize=r,u.style.margin="0",u.style.padding="0",u.appendChild(this._document.createTextNode(AT)),i.appendChild(u),i.appendChild(a);var o=a.offsetTop-u.offsetTop+2;i.removeChild(u),i.appendChild(this._document.createTextNode(AT)),i.style.lineHeight="normal",a.style.verticalAlign="super";var g=a.offsetTop-i.offsetTop+2;return h.removeChild(i),{baseline:o,middle:g}},e.prototype.getMetrics=function(t,r){var i=t+" "+r;return typeof this._data[i]>"u"&&(this._data[i]=this.parseMetrics(t,r)),this._data[i]},e}(),sR=function(){function e(t,r){this.context=t,this.options=r}return e}(),Lee=1e4,Mee=function(e){qA(t,e);function t(r,i){var a=e.call(this,r,i)||this;return a._activeEffects=[],a.canvas=i.canvas?i.canvas:document.createElement("canvas"),a.ctx=a.canvas.getContext("2d"),i.canvas||(a.canvas.width=Math.floor(i.width*i.scale),a.canvas.height=Math.floor(i.height*i.scale),a.canvas.style.width=i.width+"px",a.canvas.style.height=i.height+"px"),a.fontMetrics=new Pee(document),a.ctx.scale(a.options.scale,a.options.scale),a.ctx.translate(-i.x,-i.y),a.ctx.textBaseline="bottom",a._activeEffects=[],a.context.logger.debug("Canvas renderer initialized ("+i.width+"x"+i.height+") with scale "+i.scale),a}return t.prototype.applyEffects=function(r){for(var i=this;this._activeEffects.length;)this.popEffect();r.forEach(function(a){return i.applyEffect(a)})},t.prototype.applyEffect=function(r){this.ctx.save(),_ee(r)&&(this.ctx.globalAlpha=r.opacity),vee(r)&&(this.ctx.translate(r.offsetX,r.offsetY),this.ctx.transform(r.matrix[0],r.matrix[1],r.matrix[2],r.matrix[3],r.matrix[4],r.matrix[5]),this.ctx.translate(-r.offsetX,-r.offsetY)),eR(r)&&(this.path(r.path),this.ctx.clip()),this._activeEffects.push(r)},t.prototype.popEffect=function(){this._activeEffects.pop(),this.ctx.restore()},t.prototype.renderStack=function(r){return ya(this,void 0,void 0,function(){var i;return Yo(this,function(a){switch(a.label){case 0:return i=r.element.container.styles,i.isVisible()?[4,this.renderStackContent(r)]:[3,2];case 1:a.sent(),a.label=2;case 2:return[2]}})})},t.prototype.renderNode=function(r){return ya(this,void 0,void 0,function(){return Yo(this,function(i){switch(i.label){case 0:if(Zs(r.container.flags,16))debugger;return r.container.styles.isVisible()?[4,this.renderNodeBackgroundAndBorders(r)]:[3,3];case 1:return i.sent(),[4,this.renderNodeContent(r)];case 2:i.sent(),i.label=3;case 3:return[2]}})})},t.prototype.renderTextWithLetterSpacing=function(r,i,a){var u=this;if(i===0)this.ctx.fillText(r.text,r.bounds.left,r.bounds.top+a);else{var h=AC(r.text);h.reduce(function(o,g){return u.ctx.fillText(g,o,r.bounds.top+a),o+u.ctx.measureText(g).width},r.bounds.left)}},t.prototype.createFontStyle=function(r){var i=r.fontVariant.filter(function(h){return h==="normal"||h==="small-caps"}).join(""),a=Dee(r.fontFamily).join(", "),u=N0(r.fontSize)?""+r.fontSize.number+r.fontSize.unit:r.fontSize.number+"px";return[[r.fontStyle,i,r.fontWeight,u,a].join(" "),a,u]},t.prototype.renderTextNode=function(r,i){return ya(this,void 0,void 0,function(){var a,u,h,o,g,y,C,I,F=this;return Yo(this,function(b){return a=this.createFontStyle(i),u=a[0],h=a[1],o=a[2],this.ctx.font=u,this.ctx.direction=i.direction===1?"rtl":"ltr",this.ctx.textAlign="left",this.ctx.textBaseline="alphabetic",g=this.fontMetrics.getMetrics(h,o),y=g.baseline,C=g.middle,I=i.paintOrder,r.textBounds.forEach(function(N){I.forEach(function(U){switch(U){case 0:F.ctx.fillStyle=lo(i.color),F.renderTextWithLetterSpacing(N,i.letterSpacing,y);var H=i.textShadow;H.length&&N.text.trim().length&&(H.slice(0).reverse().forEach(function(k){F.ctx.shadowColor=lo(k.color),F.ctx.shadowOffsetX=k.offsetX.number*F.options.scale,F.ctx.shadowOffsetY=k.offsetY.number*F.options.scale,F.ctx.shadowBlur=k.blur.number,F.renderTextWithLetterSpacing(N,i.letterSpacing,y)}),F.ctx.shadowColor="",F.ctx.shadowOffsetX=0,F.ctx.shadowOffsetY=0,F.ctx.shadowBlur=0),i.textDecorationLine.length&&(F.ctx.fillStyle=lo(i.textDecorationColor||i.color),i.textDecorationLine.forEach(function(k){switch(k){case 1:F.ctx.fillRect(N.bounds.left,Math.round(N.bounds.top+y),N.bounds.width,1);break;case 2:F.ctx.fillRect(N.bounds.left,Math.round(N.bounds.top),N.bounds.width,1);break;case 3:F.ctx.fillRect(N.bounds.left,Math.ceil(N.bounds.top+C),N.bounds.width,1);break}}));break;case 1:i.webkitTextStrokeWidth&&N.text.trim().length&&(F.ctx.strokeStyle=lo(i.webkitTextStrokeColor),F.ctx.lineWidth=i.webkitTextStrokeWidth,F.ctx.lineJoin=window.chrome?"miter":"round",F.ctx.strokeText(N.text,N.bounds.left,N.bounds.top+y)),F.ctx.strokeStyle="",F.ctx.lineWidth=0,F.ctx.lineJoin="miter";break}})}),[2]})})},t.prototype.renderReplacedElement=function(r,i,a){if(a&&r.intrinsicWidth>0&&r.intrinsicHeight>0){var u=N1(r),h=R1(i);this.path(h),this.ctx.save(),this.ctx.clip(),this.ctx.drawImage(a,0,0,r.intrinsicWidth,r.intrinsicHeight,u.left,u.top,u.width,u.height),this.ctx.restore()}},t.prototype.renderNodeContent=function(r){return ya(this,void 0,void 0,function(){var i,a,u,h,o,g,R,R,y,C,I,F,W,b,N,se,U,H,k,R,V,W,se;return Yo(this,function(fe){switch(fe.label){case 0:this.applyEffects(r.getEffects(4)),i=r.container,a=r.curves,u=i.styles,h=0,o=i.textNodes,fe.label=1;case 1:return h<o.length?(g=o[h],[4,this.renderTextNode(g,u)]):[3,4];case 2:fe.sent(),fe.label=3;case 3:return h++,[3,1];case 4:if(!(i instanceof N6))return[3,8];fe.label=5;case 5:return fe.trys.push([5,7,,8]),[4,this.context.cache.match(i.src)];case 6:return R=fe.sent(),this.renderReplacedElement(i,a,R),[3,8];case 7:return fe.sent(),this.context.logger.error("Error loading image "+i.src),[3,8];case 8:if(i instanceof D6&&this.renderReplacedElement(i,a,i.canvas),!(i instanceof Q6))return[3,12];fe.label=9;case 9:return fe.trys.push([9,11,,12]),[4,this.context.cache.match(i.svg)];case 10:return R=fe.sent(),this.renderReplacedElement(i,a,R),[3,12];case 11:return fe.sent(),this.context.logger.error("Error loading svg "+i.svg.substring(0,255)),[3,12];case 12:return i instanceof j6&&i.tree?(y=new t(this.context,{scale:this.options.scale,backgroundColor:i.backgroundColor,x:0,y:0,width:i.width,height:i.height}),[4,y.render(i.tree)]):[3,14];case 13:C=fe.sent(),i.width&&i.height&&this.ctx.drawImage(C,0,0,i.width,i.height,i.bounds.left,i.bounds.top,i.bounds.width,i.bounds.height),fe.label=14;case 14:if(i instanceof cC&&(I=Math.min(i.bounds.width,i.bounds.height),i.type===P1?i.checked&&(this.ctx.save(),this.path([new Br(i.bounds.left+I*.39363,i.bounds.top+I*.79),new Br(i.bounds.left+I*.16,i.bounds.top+I*.5549),new Br(i.bounds.left+I*.27347,i.bounds.top+I*.44071),new Br(i.bounds.left+I*.39694,i.bounds.top+I*.5649),new Br(i.bounds.left+I*.72983,i.bounds.top+I*.23),new Br(i.bounds.left+I*.84,i.bounds.top+I*.34085),new Br(i.bounds.left+I*.39363,i.bounds.top+I*.79)]),this.ctx.fillStyle=lo(WF),this.ctx.fill(),this.ctx.restore()):i.type===L1&&i.checked&&(this.ctx.save(),this.ctx.beginPath(),this.ctx.arc(i.bounds.left+I/2,i.bounds.top+I/2,I/4,0,Math.PI*2,!0),this.ctx.fillStyle=lo(WF),this.ctx.fill(),this.ctx.restore())),kee(i)&&i.value.length){switch(F=this.createFontStyle(u),W=F[0],b=F[1],N=this.fontMetrics.getMetrics(W,b).baseline,this.ctx.font=W,this.ctx.fillStyle=lo(u.color),this.ctx.textBaseline="alphabetic",this.ctx.textAlign=Ree(i.styles.textAlign),se=N1(i),U=0,i.styles.textAlign){case 1:U+=se.width/2;break;case 2:U+=se.width;break}H=se.add(U,0,0,-se.height/2+1),this.ctx.save(),this.path([new Br(se.left,se.top),new Br(se.left+se.width,se.top),new Br(se.left+se.width,se.top+se.height),new Br(se.left,se.top+se.height)]),this.ctx.clip(),this.renderTextWithLetterSpacing(new Mg(i.value,H),u.letterSpacing,N),this.ctx.restore(),this.ctx.textBaseline="alphabetic",this.ctx.textAlign="left"}if(!Zs(i.styles.display,2048))return[3,20];if(i.styles.listStyleImage===null)return[3,19];if(k=i.styles.listStyleImage,k.type!==0)return[3,18];R=void 0,V=k.url,fe.label=15;case 15:return fe.trys.push([15,17,,18]),[4,this.context.cache.match(V)];case 16:return R=fe.sent(),this.ctx.drawImage(R,i.bounds.left-(R.width+10),i.bounds.top),[3,18];case 17:return fe.sent(),this.context.logger.error("Error loading list-style-image "+V),[3,18];case 18:return[3,20];case 19:r.listValue&&i.styles.listStyleType!==-1&&(W=this.createFontStyle(u)[0],this.ctx.font=W,this.ctx.fillStyle=lo(u.color),this.ctx.textBaseline="middle",this.ctx.textAlign="right",se=new Du(i.bounds.left,i.bounds.top+Ci(i.styles.paddingTop,i.bounds.width),i.bounds.width,MF(u.lineHeight,u.fontSize.number)/2+1),this.renderTextWithLetterSpacing(new Mg(r.listValue,se),u.letterSpacing,MF(u.lineHeight,u.fontSize.number)/2+2),this.ctx.textBaseline="bottom",this.ctx.textAlign="left"),fe.label=20;case 20:return[2]}})})},t.prototype.renderStackContent=function(r){return ya(this,void 0,void 0,function(){var i,a,k,u,h,k,o,g,k,y,C,k,I,F,k,b,N,k,U,H,k;return Yo(this,function(R){switch(R.label){case 0:if(Zs(r.element.container.flags,16))debugger;return[4,this.renderNodeBackgroundAndBorders(r.element)];case 1:R.sent(),i=0,a=r.negativeZIndex,R.label=2;case 2:return i<a.length?(k=a[i],[4,this.renderStack(k)]):[3,5];case 3:R.sent(),R.label=4;case 4:return i++,[3,2];case 5:return[4,this.renderNodeContent(r.element)];case 6:R.sent(),u=0,h=r.nonInlineLevel,R.label=7;case 7:return u<h.length?(k=h[u],[4,this.renderNode(k)]):[3,10];case 8:R.sent(),R.label=9;case 9:return u++,[3,7];case 10:o=0,g=r.nonPositionedFloats,R.label=11;case 11:return o<g.length?(k=g[o],[4,this.renderStack(k)]):[3,14];case 12:R.sent(),R.label=13;case 13:return o++,[3,11];case 14:y=0,C=r.nonPositionedInlineLevel,R.label=15;case 15:return y<C.length?(k=C[y],[4,this.renderStack(k)]):[3,18];case 16:R.sent(),R.label=17;case 17:return y++,[3,15];case 18:I=0,F=r.inlineLevel,R.label=19;case 19:return I<F.length?(k=F[I],[4,this.renderNode(k)]):[3,22];case 20:R.sent(),R.label=21;case 21:return I++,[3,19];case 22:b=0,N=r.zeroOrAutoZIndexOrTransformedOrOpacity,R.label=23;case 23:return b<N.length?(k=N[b],[4,this.renderStack(k)]):[3,26];case 24:R.sent(),R.label=25;case 25:return b++,[3,23];case 26:U=0,H=r.positiveZIndex,R.label=27;case 27:return U<H.length?(k=H[U],[4,this.renderStack(k)]):[3,30];case 28:R.sent(),R.label=29;case 29:return U++,[3,27];case 30:return[2]}})})},t.prototype.mask=function(r){this.ctx.beginPath(),this.ctx.moveTo(0,0),this.ctx.lineTo(this.canvas.width,0),this.ctx.lineTo(this.canvas.width,this.canvas.height),this.ctx.lineTo(0,this.canvas.height),this.ctx.lineTo(0,0),this.formatPath(r.slice(0).reverse()),this.ctx.closePath()},t.prototype.path=function(r){this.ctx.beginPath(),this.formatPath(r),this.ctx.closePath()},t.prototype.formatPath=function(r){var i=this;r.forEach(function(a,u){var h=ql(a)?a.start:a;u===0?i.ctx.moveTo(h.x,h.y):i.ctx.lineTo(h.x,h.y),ql(a)&&i.ctx.bezierCurveTo(a.startControl.x,a.startControl.y,a.endControl.x,a.endControl.y,a.end.x,a.end.y)})},t.prototype.renderRepeat=function(r,i,a,u){this.path(r),this.ctx.fillStyle=i,this.ctx.translate(a,u),this.ctx.fill(),this.ctx.translate(-a,-u)},t.prototype.resizeImage=function(r,i,a){var u;if(r.width===i&&r.height===a)return r;var h=(u=this.canvas.ownerDocument)!==null&&u!==void 0?u:document,o=h.createElement("canvas");o.width=Math.max(1,i),o.height=Math.max(1,a);var g=o.getContext("2d");return g.drawImage(r,0,0,r.width,r.height,0,0,i,a),o},t.prototype.renderBackgroundImage=function(r){return ya(this,void 0,void 0,function(){var i,a,u,h,o,g;return Yo(this,function(y){switch(y.label){case 0:i=r.styles.backgroundImage.length-1,a=function(C){var I,F,b,Ue,Ze,At,Te,we,ae,N,Ue,Ze,At,Te,we,U,H,k,R,V,W,se,fe,ue,ae,Be,Ue,te,de,Te,we,st,Ze,At,Le,He,it,Lt,ie,Ce,Pe,$e;return Yo(this,function(nt){switch(nt.label){case 0:if(C.type!==0)return[3,5];I=void 0,F=C.url,nt.label=1;case 1:return nt.trys.push([1,3,,4]),[4,u.context.cache.match(F)];case 2:return I=nt.sent(),[3,4];case 3:return nt.sent(),u.context.logger.error("Error loading background-image "+F),[3,4];case 4:return I&&(b=tb(r,i,[I.width,I.height,I.width/I.height]),Ue=b[0],Ze=b[1],At=b[2],Te=b[3],we=b[4],ae=u.ctx.createPattern(u.resizeImage(I,Te,we),"repeat"),u.renderRepeat(Ue,ae,Ze,At)),[3,6];case 5:vX(C)?(N=tb(r,i,[null,null,null]),Ue=N[0],Ze=N[1],At=N[2],Te=N[3],we=N[4],U=fX(C.angle,Te,we),H=U[0],k=U[1],R=U[2],V=U[3],W=U[4],se=document.createElement("canvas"),se.width=Te,se.height=we,fe=se.getContext("2d"),ue=fe.createLinearGradient(k,V,R,W),PF(C.stops,H).forEach(function(Xe){return ue.addColorStop(Xe.stop,lo(Xe.color))}),fe.fillStyle=ue,fe.fillRect(0,0,Te,we),Te>0&&we>0&&(ae=u.ctx.createPattern(se,"repeat"),u.renderRepeat(Ue,ae,Ze,At))):_X(C)&&(Be=tb(r,i,[null,null,null]),Ue=Be[0],te=Be[1],de=Be[2],Te=Be[3],we=Be[4],st=C.position.length===0?[oC]:C.position,Ze=Ci(st[0],Te),At=Ci(st[st.length-1],we),Le=pX(C,Ze,At,Te,we),He=Le[0],it=Le[1],He>0&&it>0&&(Lt=u.ctx.createRadialGradient(te+Ze,de+At,0,te+Ze,de+At,He),PF(C.stops,He*2).forEach(function(Xe){return Lt.addColorStop(Xe.stop,lo(Xe.color))}),u.path(Ue),u.ctx.fillStyle=Lt,He!==it?(ie=r.bounds.left+.5*r.bounds.width,Ce=r.bounds.top+.5*r.bounds.height,Pe=it/He,$e=1/Pe,u.ctx.save(),u.ctx.translate(ie,Ce),u.ctx.transform(1,0,0,Pe,0,0),u.ctx.translate(-ie,-Ce),u.ctx.fillRect(te,$e*(de-Ce)+Ce,Te,we*$e),u.ctx.restore()):u.ctx.fill())),nt.label=6;case 6:return i--,[2]}})},u=this,h=0,o=r.styles.backgroundImage.slice(0).reverse(),y.label=1;case 1:return h<o.length?(g=o[h],[5,a(g)]):[3,4];case 2:y.sent(),y.label=3;case 3:return h++,[3,1];case 4:return[2]}})})},t.prototype.renderSolidBorder=function(r,i,a){return ya(this,void 0,void 0,function(){return Yo(this,function(u){return this.path(lT(a,i)),this.ctx.fillStyle=lo(r),this.ctx.fill(),[2]})})},t.prototype.renderDoubleBorder=function(r,i,a,u){return ya(this,void 0,void 0,function(){var h,o;return Yo(this,function(g){switch(g.label){case 0:return i<3?[4,this.renderSolidBorder(r,a,u)]:[3,2];case 1:return g.sent(),[2];case 2:return h=bee(u,a),this.path(h),this.ctx.fillStyle=lo(r),this.ctx.fill(),o=Bee(u,a),this.path(o),this.ctx.fill(),[2]}})})},t.prototype.renderNodeBackgroundAndBorders=function(r){return ya(this,void 0,void 0,function(){var i,a,u,h,o,g,y,C,I=this;return Yo(this,function(F){switch(F.label){case 0:return this.applyEffects(r.getEffects(2)),i=r.container.styles,a=!Jh(i.backgroundColor)||i.backgroundImage.length,u=[{style:i.borderTopStyle,color:i.borderTopColor,width:i.borderTopWidth},{style:i.borderRightStyle,color:i.borderRightColor,width:i.borderRightWidth},{style:i.borderBottomStyle,color:i.borderBottomColor,width:i.borderBottomWidth},{style:i.borderLeftStyle,color:i.borderLeftColor,width:i.borderLeftWidth}],h=Uee(rp(i.backgroundClip,0),r.curves),a||i.boxShadow.length?(this.ctx.save(),this.path(h),this.ctx.clip(),Jh(i.backgroundColor)||(this.ctx.fillStyle=lo(i.backgroundColor),this.ctx.fill()),[4,this.renderBackgroundImage(r.container)]):[3,2];case 1:F.sent(),this.ctx.restore(),i.boxShadow.slice(0).reverse().forEach(function(b){I.ctx.save();var N=U1(r.curves),U=b.inset?0:Lee,H=wee(N,-U+(b.inset?1:-1)*b.spread.number,(b.inset?1:-1)*b.spread.number,b.spread.number*(b.inset?-2:2),b.spread.number*(b.inset?-2:2));b.inset?(I.path(N),I.ctx.clip(),I.mask(H)):(I.mask(N),I.ctx.clip(),I.path(H)),I.ctx.shadowOffsetX=b.offsetX.number+U,I.ctx.shadowOffsetY=b.offsetY.number,I.ctx.shadowColor=lo(b.color),I.ctx.shadowBlur=b.blur.number,I.ctx.fillStyle=b.inset?lo(b.color):"rgba(0,0,0,1)",I.ctx.fill(),I.ctx.restore()}),F.label=2;case 2:o=0,g=0,y=u,F.label=3;case 3:return g<y.length?(C=y[g],C.style!==0&&!Jh(C.color)&&C.width>0?C.style!==2?[3,5]:[4,this.renderDashedDottedBorder(C.color,C.width,o,r.curves,2)]:[3,11]):[3,13];case 4:return F.sent(),[3,11];case 5:return C.style!==3?[3,7]:[4,this.renderDashedDottedBorder(C.color,C.width,o,r.curves,3)];case 6:return F.sent(),[3,11];case 7:return C.style!==4?[3,9]:[4,this.renderDoubleBorder(C.color,C.width,o,r.curves)];case 8:return F.sent(),[3,11];case 9:return[4,this.renderSolidBorder(C.color,o,r.curves)];case 10:F.sent(),F.label=11;case 11:o++,F.label=12;case 12:return g++,[3,3];case 13:return[2]}})})},t.prototype.renderDashedDottedBorder=function(r,i,a,u,h){return ya(this,void 0,void 0,function(){var o,g,y,C,I,F,b,N,U,H,k,R,V,W,se,fe,se,fe;return Yo(this,function(ue){return this.ctx.save(),o=Cee(u,a),g=lT(u,a),h===2&&(this.path(g),this.ctx.clip()),ql(g[0])?(y=g[0].start.x,C=g[0].start.y):(y=g[0].x,C=g[0].y),ql(g[1])?(I=g[1].end.x,F=g[1].end.y):(I=g[1].x,F=g[1].y),a===0||a===2?b=Math.abs(y-I):b=Math.abs(C-F),this.ctx.beginPath(),h===3?this.formatPath(o):this.formatPath(g.slice(0,2)),N=i<3?i*3:i*2,U=i<3?i*2:i,h===3&&(N=i,U=i),H=!0,b<=N*2?H=!1:b<=N*2+U?(k=b/(2*N+U),N*=k,U*=k):(R=Math.floor((b+U)/(N+U)),V=(b-R*N)/(R-1),W=(b-(R+1)*N)/R,U=W<=0||Math.abs(U-V)<Math.abs(U-W)?V:W),H&&(h===3?this.ctx.setLineDash([0,N+U]):this.ctx.setLineDash([N,U])),h===3?(this.ctx.lineCap="round",this.ctx.lineWidth=i):this.ctx.lineWidth=i*2+1.1,this.ctx.strokeStyle=lo(r),this.ctx.stroke(),this.ctx.setLineDash([]),h===2&&(ql(g[0])&&(se=g[3],fe=g[0],this.ctx.beginPath(),this.formatPath([new Br(se.end.x,se.end.y),new Br(fe.start.x,fe.start.y)]),this.ctx.stroke()),ql(g[1])&&(se=g[1],fe=g[2],this.ctx.beginPath(),this.formatPath([new Br(se.end.x,se.end.y),new Br(fe.start.x,fe.start.y)]),this.ctx.stroke())),this.ctx.restore(),[2]})})},t.prototype.render=function(r){return ya(this,void 0,void 0,function(){var i;return Yo(this,function(a){switch(a.label){case 0:return this.options.backgroundColor&&(this.ctx.fillStyle=lo(this.options.backgroundColor),this.ctx.fillRect(this.options.x,this.options.y,this.options.width,this.options.height)),i=xee(r),[4,this.renderStack(i)];case 1:return a.sent(),this.applyEffects([]),[2,this.canvas]}})})},t}(sR),kee=function(e){return e instanceof H6||e instanceof z6?!0:e instanceof cC&&e.type!==L1&&e.type!==P1},Uee=function(e,t){switch(e){case 0:return U1(t);case 2:return mee(t);case 1:default:return R1(t)}},Ree=function(e){switch(e){case 1:return"center";case 2:return"right";case 0:default:return"left"}},Nee=["-apple-system","system-ui"],Dee=function(e){return/iPhone OS 15_(0|1)/.test(window.navigator.userAgent)?e.filter(function(t){return Nee.indexOf(t)===-1}):e},Qee=function(e){qA(t,e);function t(r,i){var a=e.call(this,r,i)||this;return a.canvas=i.canvas?i.canvas:document.createElement("canvas"),a.ctx=a.canvas.getContext("2d"),a.options=i,a.canvas.width=Math.floor(i.width*i.scale),a.canvas.height=Math.floor(i.height*i.scale),a.canvas.style.width=i.width+"px",a.canvas.style.height=i.height+"px",a.ctx.scale(a.options.scale,a.options.scale),a.ctx.translate(-i.x,-i.y),a.context.logger.debug("EXPERIMENTAL ForeignObject renderer initialized ("+i.width+"x"+i.height+" at "+i.x+","+i.y+") with scale "+i.scale),a}return t.prototype.render=function(r){return ya(this,void 0,void 0,function(){var i,a;return Yo(this,function(u){switch(u.label){case 0:return i=oB(this.options.width*this.options.scale,this.options.height*this.options.scale,this.options.scale,this.options.scale,r),[4,Oee(i)];case 1:return a=u.sent(),this.options.backgroundColor&&(this.ctx.fillStyle=lo(this.options.backgroundColor),this.ctx.fillRect(0,0,this.options.width*this.options.scale,this.options.height*this.options.scale)),this.ctx.drawImage(a,-this.options.x*this.options.scale,-this.options.y*this.options.scale),[2,this.canvas]}})})},t}(sR),Oee=function(e){return new Promise(function(t,r){var i=new Image;i.onload=function(){t(i)},i.onerror=r,i.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(e))})},zee=function(){function e(t){var r=t.id,i=t.enabled;this.id=r,this.enabled=i,this.start=Date.now()}return e.prototype.debug=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];this.enabled&&(typeof window<"u"&&window.console&&typeof console.debug=="function"?console.debug.apply(console,Ny([this.id,this.getTime()+"ms"],t)):this.info.apply(this,t))},e.prototype.getTime=function(){return Date.now()-this.start},e.prototype.info=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];this.enabled&&typeof window<"u"&&window.console&&typeof console.info=="function"&&console.info.apply(console,Ny([this.id,this.getTime()+"ms"],t))},e.prototype.warn=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];this.enabled&&(typeof window<"u"&&window.console&&typeof console.warn=="function"?console.warn.apply(console,Ny([this.id,this.getTime()+"ms"],t)):this.info.apply(this,t))},e.prototype.error=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];this.enabled&&(typeof window<"u"&&window.console&&typeof console.error=="function"?console.error.apply(console,Ny([this.id,this.getTime()+"ms"],t)):this.info.apply(this,t))},e.instances={},e}(),Hee=function(){function e(t,r){var i;this.windowBounds=r,this.instanceName="#"+e.instanceCount++,this.logger=new zee({id:this.instanceName,enabled:t.logging}),this.cache=(i=t.cache)!==null&&i!==void 0?i:new lee(this,t)}return e.instanceCount=1,e}(),oR=function(e,t){return t===void 0&&(t={}),jee(e,t)};typeof window<"u"&&J6.setContext(window);var jee=function(e,t){return ya(void 0,void 0,void 0,function(){var r,i,a,u,h,o,g,y,C,I,F,b,N,U,H,k,R,V,W,se,ue,fe,ue,ae,Be,Ue,te,de,Te,we,st,Ze,At,Le,He,it,Lt,ie,Ce,Pe;return Yo(this,function($e){switch($e.label){case 0:if(!e||typeof e!="object")return[2,Promise.reject("Invalid element provided as first argument")];if(r=e.ownerDocument,!r)throw new Error("Element is not attached to a Document");if(i=r.defaultView,!i)throw new Error("Document is not attached to a Window");return a={allowTaint:(ae=t.allowTaint)!==null&&ae!==void 0?ae:!1,imageTimeout:(Be=t.imageTimeout)!==null&&Be!==void 0?Be:15e3,proxy:t.proxy,useCORS:(Ue=t.useCORS)!==null&&Ue!==void 0?Ue:!1},u=K2({logging:(te=t.logging)!==null&&te!==void 0?te:!0,cache:t.cache},a),h={windowWidth:(de=t.windowWidth)!==null&&de!==void 0?de:i.innerWidth,windowHeight:(Te=t.windowHeight)!==null&&Te!==void 0?Te:i.innerHeight,scrollX:(we=t.scrollX)!==null&&we!==void 0?we:i.pageXOffset,scrollY:(st=t.scrollY)!==null&&st!==void 0?st:i.pageYOffset},o=new Du(h.scrollX,h.scrollY,h.windowWidth,h.windowHeight),g=new Hee(u,o),y=(Ze=t.foreignObjectRendering)!==null&&Ze!==void 0?Ze:!1,C={allowTaint:(At=t.allowTaint)!==null&&At!==void 0?At:!1,onclone:t.onclone,ignoreElements:t.ignoreElements,inlineImages:y,copyStyles:y},g.logger.debug("Starting document clone with size "+o.width+"x"+o.height+" scrolled to "+-o.left+","+-o.top),I=new sT(g,e,C),F=I.clonedReferenceElement,F?[4,I.toIFrame(r,o)]:[2,Promise.reject("Unable to find element in cloned iframe")];case 1:return b=$e.sent(),N=uC(F)||KJ(F)?wZ(F.ownerDocument):I_(g,F),U=N.width,H=N.height,k=N.left,R=N.top,V=Vee(g,F,t.backgroundColor),W={canvas:t.canvas,backgroundColor:V,scale:(He=(Le=t.scale)!==null&&Le!==void 0?Le:i.devicePixelRatio)!==null&&He!==void 0?He:1,x:((it=t.x)!==null&&it!==void 0?it:0)+k,y:((Lt=t.y)!==null&&Lt!==void 0?Lt:0)+R,width:(ie=t.width)!==null&&ie!==void 0?ie:Math.ceil(U),height:(Ce=t.height)!==null&&Ce!==void 0?Ce:Math.ceil(H)},y?(g.logger.debug("Document cloned, using foreign object rendering"),ue=new Qee(g,W),[4,ue.render(F)]):[3,3];case 2:return se=$e.sent(),[3,5];case 3:return g.logger.debug("Document cloned, element located at "+k+","+R+" with size "+U+"x"+H+" using computed rendering"),g.logger.debug("Starting DOM parsing"),fe=K6(g,F),V===fe.styles.backgroundColor&&(fe.styles.backgroundColor=Pu.TRANSPARENT),g.logger.debug("Starting renderer for element at "+W.x+","+W.y+" with size "+W.width+"x"+W.height),ue=new Mee(g,W),[4,ue.render(fe)];case 4:se=$e.sent(),$e.label=5;case 5:return(!((Pe=t.removeContainer)!==null&&Pe!==void 0)||Pe)&&(sT.destroy(b)||g.logger.error("Cannot detach cloned iframe as it is not in the DOM anymore")),g.logger.debug("Finished rendering"),[2,se]}})})},Vee=function(e,t,r){var i=t.ownerDocument,a=i.documentElement?Pg(e,getComputedStyle(i.documentElement).backgroundColor):Pu.TRANSPARENT,u=i.body?Pg(e,getComputedStyle(i.body).backgroundColor):Pu.TRANSPARENT,h=typeof r=="string"?Pg(e,r):r===null?Pu.TRANSPARENT:4294967295;return t===i.documentElement?Jh(a)?Jh(u)?h:u:a:h};const Kee=Object.freeze(Object.defineProperty({__proto__:null,default:oR},Symbol.toStringTag,{value:"Module"})),Gee="modulepreload",$ee=function(e){return"/Domapus/"+e},cT={},dB=function(t,r,i){let a=Promise.resolve();if(r&&r.length>0){document.getElementsByTagName("link");const h=document.querySelector("meta[property=csp-nonce]"),o=(h==null?void 0:h.nonce)||(h==null?void 0:h.getAttribute("nonce"));a=Promise.allSettled(r.map(g=>{if(g=$ee(g),g in cT)return;cT[g]=!0;const y=g.endsWith(".css"),C=y?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${g}"]${C}`))return;const I=document.createElement("link");if(I.rel=y?"stylesheet":Gee,y||(I.as="script"),I.crossOrigin="",I.href=g,o&&I.setAttribute("nonce",o),document.head.appendChild(I),y)return new Promise((F,b)=>{I.addEventListener("load",F),I.addEventListener("error",()=>b(new Error(`Unable to preload CSS for ${g}`)))})}))}function u(h){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=h,window.dispatchEvent(o),!o.defaultPrevented)throw h}return a.then(h=>{for(const o of h||[])o.status==="rejected"&&u(o.reason);return t().catch(u)})};function ei(e){"@babel/helpers - typeof";return ei=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ei(e)}var ta=Uint8Array,Cl=Uint16Array,hC=Int32Array,D_=new ta([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),Q_=new ta([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),fB=new ta([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),aR=function(e,t){for(var r=new Cl(31),i=0;i<31;++i)r[i]=t+=1<<e[i-1];for(var a=new hC(r[30]),i=1;i<30;++i)for(var u=r[i];u<r[i+1];++u)a[u]=u-r[i]<<5|i;return{b:r,r:a}},lR=aR(D_,2),AR=lR.b,pB=lR.r;AR[28]=258,pB[258]=28;var cR=aR(Q_,0),qee=cR.b,uT=cR.r,mB=new Cl(32768);for(var Mi=0;Mi<32768;++Mi){var hh=(Mi&43690)>>1|(Mi&21845)<<1;hh=(hh&52428)>>2|(hh&13107)<<2,hh=(hh&61680)>>4|(hh&3855)<<4,mB[Mi]=((hh&65280)>>8|(hh&255)<<8)>>1}var Qc=function(e,t,r){for(var i=e.length,a=0,u=new Cl(t);a<i;++a)e[a]&&++u[e[a]-1];var h=new Cl(t);for(a=1;a<t;++a)h[a]=h[a-1]+u[a-1]<<1;var o;if(r){o=new Cl(1<<t);var g=15-t;for(a=0;a<i;++a)if(e[a])for(var y=a<<4|e[a],C=t-e[a],I=h[e[a]-1]++<<C,F=I|(1<<C)-1;I<=F;++I)o[mB[I]>>g]=y}else for(o=new Cl(i),a=0;a<i;++a)e[a]&&(o[a]=mB[h[e[a]-1]++]>>15-e[a]);return o},sd=new ta(288);for(var Mi=0;Mi<144;++Mi)sd[Mi]=8;for(var Mi=144;Mi<256;++Mi)sd[Mi]=9;for(var Mi=256;Mi<280;++Mi)sd[Mi]=7;for(var Mi=280;Mi<288;++Mi)sd[Mi]=8;var y0=new ta(32);for(var Mi=0;Mi<32;++Mi)y0[Mi]=5;var Zee=Qc(sd,9,0),Wee=Qc(sd,9,1),Xee=Qc(y0,5,0),Yee=Qc(y0,5,1),rb=function(e){for(var t=e[0],r=1;r<e.length;++r)e[r]>t&&(t=e[r]);return t},PA=function(e,t,r){var i=t/8|0;return(e[i]|e[i+1]<<8)>>(t&7)&r},nb=function(e,t){var r=t/8|0;return(e[r]|e[r+1]<<8|e[r+2]<<16)>>(t&7)},dC=function(e){return(e+7)/8|0},uR=function(e,t,r){return(r==null||r>e.length)&&(r=e.length),new ta(e.subarray(t,r))},Jee=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],NA=function(e,t,r){var i=new Error(t||Jee[e]);if(i.code=e,Error.captureStackTrace&&Error.captureStackTrace(i,NA),!r)throw i;return i},ete=function(e,t,r,i){var a=e.length,u=0;if(!a||t.f&&!t.l)return r||new ta(0);var h=!r,o=h||t.i!=2,g=t.i;h&&(r=new ta(a*3));var y=function(Mt){var $t=r.length;if(Mt>$t){var jt=new ta(Math.max($t*2,Mt));jt.set(r),r=jt}},C=t.f||0,I=t.p||0,F=t.b||0,b=t.l,N=t.d,U=t.m,H=t.n,k=a*8;do{if(!b){C=PA(e,I,1);var R=PA(e,I+1,3);if(I+=3,R)if(R==1)b=Wee,N=Yee,U=9,H=5;else if(R==2){var fe=PA(e,I,31)+257,ue=PA(e,I+10,15)+4,ae=fe+PA(e,I+5,31)+1;I+=14;for(var Be=new ta(ae),Ue=new ta(19),te=0;te<ue;++te)Ue[fB[te]]=PA(e,I+te*3,7);I+=ue*3;for(var de=rb(Ue),Te=(1<<de)-1,we=Qc(Ue,de,1),te=0;te<ae;){var st=we[PA(e,I,Te)];I+=st&15;var V=st>>4;if(V<16)Be[te++]=V;else{var Ze=0,At=0;for(V==16?(At=3+PA(e,I,3),I+=2,Ze=Be[te-1]):V==17?(At=3+PA(e,I,7),I+=3):V==18&&(At=11+PA(e,I,127),I+=7);At--;)Be[te++]=Ze}}var Le=Be.subarray(0,fe),He=Be.subarray(fe);U=rb(Le),H=rb(He),b=Qc(Le,U,1),N=Qc(He,H,1)}else NA(1);else{var V=dC(I)+4,W=e[V-4]|e[V-3]<<8,se=V+W;if(se>a){g&&NA(0);break}o&&y(F+W),r.set(e.subarray(V,se),F),t.b=F+=W,t.p=I=se*8,t.f=C;continue}if(I>k){g&&NA(0);break}}o&&y(F+131072);for(var it=(1<<U)-1,Lt=(1<<H)-1,ie=I;;ie=I){var Ze=b[nb(e,I)&it],Ce=Ze>>4;if(I+=Ze&15,I>k){g&&NA(0);break}if(Ze||NA(2),Ce<256)r[F++]=Ce;else if(Ce==256){ie=I,b=null;break}else{var Pe=Ce-254;if(Ce>264){var te=Ce-257,$e=D_[te];Pe=PA(e,I,(1<<$e)-1)+AR[te],I+=$e}var nt=N[nb(e,I)&Lt],Xe=nt>>4;nt||NA(3),I+=nt&15;var He=qee[Xe];if(Xe>3){var $e=Q_[Xe];He+=nb(e,I)&(1<<$e)-1,I+=$e}if(I>k){g&&NA(0);break}o&&y(F+131072);var pt=F+Pe;if(F<He){var dt=u-He,Rt=Math.min(He,pt);for(dt+F<0&&NA(3);F<Rt;++F)r[F]=i[dt+F]}for(;F<pt;++F)r[F]=r[F-He]}}t.l=b,t.p=ie,t.b=F,t.f=C,b&&(C=1,t.m=U,t.d=N,t.n=H)}while(!C);return F!=r.length&&h?uR(r,0,F):r.subarray(0,F)},wu=function(e,t,r){r<<=t&7;var i=t/8|0;e[i]|=r,e[i+1]|=r>>8},Jm=function(e,t,r){r<<=t&7;var i=t/8|0;e[i]|=r,e[i+1]|=r>>8,e[i+2]|=r>>16},ib=function(e,t){for(var r=[],i=0;i<e.length;++i)e[i]&&r.push({s:i,f:e[i]});var a=r.length,u=r.slice();if(!a)return{t:dR,l:0};if(a==1){var h=new ta(r[0].s+1);return h[r[0].s]=1,{t:h,l:1}}r.sort(function(se,fe){return se.f-fe.f}),r.push({s:-1,f:25001});var o=r[0],g=r[1],y=0,C=1,I=2;for(r[0]={s:-1,f:o.f+g.f,l:o,r:g};C!=a-1;)o=r[r[y].f<r[I].f?y++:I++],g=r[y!=C&&r[y].f<r[I].f?y++:I++],r[C++]={s:-1,f:o.f+g.f,l:o,r:g};for(var F=u[0].s,i=1;i<a;++i)u[i].s>F&&(F=u[i].s);var b=new Cl(F+1),N=gB(r[C-1],b,0);if(N>t){var i=0,U=0,H=N-t,k=1<<H;for(u.sort(function(fe,ue){return b[ue.s]-b[fe.s]||fe.f-ue.f});i<a;++i){var R=u[i].s;if(b[R]>t)U+=k-(1<<N-b[R]),b[R]=t;else break}for(U>>=H;U>0;){var V=u[i].s;b[V]<t?U-=1<<t-b[V]++-1:++i}for(;i>=0&&U;--i){var W=u[i].s;b[W]==t&&(--b[W],++U)}N=t}return{t:new ta(b),l:N}},gB=function(e,t,r){return e.s==-1?Math.max(gB(e.l,t,r+1),gB(e.r,t,r+1)):t[e.s]=r},hT=function(e){for(var t=e.length;t&&!e[--t];);for(var r=new Cl(++t),i=0,a=e[0],u=1,h=function(g){r[i++]=g},o=1;o<=t;++o)if(e[o]==a&&o!=t)++u;else{if(!a&&u>2){for(;u>138;u-=138)h(32754);u>2&&(h(u>10?u-11<<5|28690:u-3<<5|12305),u=0)}else if(u>3){for(h(a),--u;u>6;u-=6)h(8304);u>2&&(h(u-3<<5|8208),u=0)}for(;u--;)h(a);u=1,a=e[o]}return{c:r.subarray(0,i),n:t}},eg=function(e,t){for(var r=0,i=0;i<t.length;++i)r+=e[i]*t[i];return r},hR=function(e,t,r){var i=r.length,a=dC(t+2);e[a]=i&255,e[a+1]=i>>8,e[a+2]=e[a]^255,e[a+3]=e[a+1]^255;for(var u=0;u<i;++u)e[a+u+4]=r[u];return(a+4+i)*8},dT=function(e,t,r,i,a,u,h,o,g,y,C){wu(t,C++,r),++a[256];for(var I=ib(a,15),F=I.t,b=I.l,N=ib(u,15),U=N.t,H=N.l,k=hT(F),R=k.c,V=k.n,W=hT(U),se=W.c,fe=W.n,ue=new Cl(19),ae=0;ae<R.length;++ae)++ue[R[ae]&31];for(var ae=0;ae<se.length;++ae)++ue[se[ae]&31];for(var Be=ib(ue,7),Ue=Be.t,te=Be.l,de=19;de>4&&!Ue[fB[de-1]];--de);var Te=y+5<<3,we=eg(a,sd)+eg(u,y0)+h,st=eg(a,F)+eg(u,U)+h+14+3*de+eg(ue,Ue)+2*ue[16]+3*ue[17]+7*ue[18];if(g>=0&&Te<=we&&Te<=st)return hR(t,C,e.subarray(g,g+y));var Ze,At,Le,He;if(wu(t,C,1+(st<we)),C+=2,st<we){Ze=Qc(F,b,0),At=F,Le=Qc(U,H,0),He=U;var it=Qc(Ue,te,0);wu(t,C,V-257),wu(t,C+5,fe-1),wu(t,C+10,de-4),C+=14;for(var ae=0;ae<de;++ae)wu(t,C+3*ae,Ue[fB[ae]]);C+=3*de;for(var Lt=[R,se],ie=0;ie<2;++ie)for(var Ce=Lt[ie],ae=0;ae<Ce.length;++ae){var Pe=Ce[ae]&31;wu(t,C,it[Pe]),C+=Ue[Pe],Pe>15&&(wu(t,C,Ce[ae]>>5&127),C+=Ce[ae]>>12)}}else Ze=Zee,At=sd,Le=Xee,He=y0;for(var ae=0;ae<o;++ae){var $e=i[ae];if($e>255){var Pe=$e>>18&31;Jm(t,C,Ze[Pe+257]),C+=At[Pe+257],Pe>7&&(wu(t,C,$e>>23&31),C+=D_[Pe]);var nt=$e&31;Jm(t,C,Le[nt]),C+=He[nt],nt>3&&(Jm(t,C,$e>>5&8191),C+=Q_[nt])}else Jm(t,C,Ze[$e]),C+=At[$e]}return Jm(t,C,Ze[256]),C+At[256]},tte=new hC([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),dR=new ta(0),rte=function(e,t,r,i,a,u){var h=u.z||e.length,o=new ta(i+h+5*(1+Math.ceil(h/7e3))+a),g=o.subarray(i,o.length-a),y=u.l,C=(u.r||0)&7;if(t){C&&(g[0]=u.r>>3);for(var I=tte[t-1],F=I>>13,b=I&8191,N=(1<<r)-1,U=u.p||new Cl(32768),H=u.h||new Cl(N+1),k=Math.ceil(r/3),R=2*k,V=function(vr){return(e[vr]^e[vr+1]<<k^e[vr+2]<<R)&N},W=new hC(25e3),se=new Cl(288),fe=new Cl(32),ue=0,ae=0,Be=u.i||0,Ue=0,te=u.w||0,de=0;Be+2<h;++Be){var Te=V(Be),we=Be&32767,st=H[Te];if(U[we]=st,H[Te]=we,te<=Be){var Ze=h-Be;if((ue>7e3||Ue>24576)&&(Ze>423||!y)){C=dT(e,g,0,W,se,fe,ae,Ue,de,Be-de,C),Ue=ue=ae=0,de=Be;for(var At=0;At<286;++At)se[At]=0;for(var At=0;At<30;++At)fe[At]=0}var Le=2,He=0,it=b,Lt=we-st&32767;if(Ze>2&&Te==V(Be-Lt))for(var ie=Math.min(F,Ze)-1,Ce=Math.min(32767,Be),Pe=Math.min(258,Ze);Lt<=Ce&&--it&&we!=st;){if(e[Be+Le]==e[Be+Le-Lt]){for(var $e=0;$e<Pe&&e[Be+$e]==e[Be+$e-Lt];++$e);if($e>Le){if(Le=$e,He=Lt,$e>ie)break;for(var nt=Math.min(Lt,$e-2),Xe=0,At=0;At<nt;++At){var pt=Be-Lt+At&32767,dt=U[pt],Rt=pt-dt&32767;Rt>Xe&&(Xe=Rt,st=pt)}}}we=st,st=U[we],Lt+=we-st&32767}if(He){W[Ue++]=268435456|pB[Le]<<18|uT[He];var Mt=pB[Le]&31,$t=uT[He]&31;ae+=D_[Mt]+Q_[$t],++se[257+Mt],++fe[$t],te=Be+Le,++ue}else W[Ue++]=e[Be],++se[e[Be]]}}for(Be=Math.max(Be,te);Be<h;++Be)W[Ue++]=e[Be],++se[e[Be]];C=dT(e,g,y,W,se,fe,ae,Ue,de,Be-de,C),y||(u.r=C&7|g[C/8|0]<<3,C-=7,u.h=H,u.p=U,u.i=Be,u.w=te)}else{for(var Be=u.w||0;Be<h+y;Be+=65535){var jt=Be+65535;jt>=h&&(g[C/8|0]=y,jt=h),C=hR(g,C+1,e.subarray(Be,jt))}u.i=h}return uR(o,0,i+dC(C)+a)},fR=function(){var e=1,t=0;return{p:function(r){for(var i=e,a=t,u=r.length|0,h=0;h!=u;){for(var o=Math.min(h+2655,u);h<o;++h)a+=i+=r[h];i=(i&65535)+15*(i>>16),a=(a&65535)+15*(a>>16)}e=i,t=a},d:function(){return e%=65521,t%=65521,(e&255)<<24|(e&65280)<<8|(t&255)<<8|t>>8}}},nte=function(e,t,r,i,a){if(!a&&(a={l:1},t.dictionary)){var u=t.dictionary.subarray(-32768),h=new ta(u.length+e.length);h.set(u),h.set(e,u.length),e=h,a.w=u.length}return rte(e,t.level==null?6:t.level,t.mem==null?a.l?Math.ceil(Math.max(8,Math.min(13,Math.log(e.length)))*1.5):20:12+t.mem,r,i,a)},pR=function(e,t,r){for(;r;++t)e[t]=r,r>>>=8},ite=function(e,t){var r=t.level,i=r==0?0:r<6?1:r==9?3:2;if(e[0]=120,e[1]=i<<6|(t.dictionary&&32),e[1]|=31-(e[0]<<8|e[1])%31,t.dictionary){var a=fR();a.p(t.dictionary),pR(e,2,a.d())}},ste=function(e,t){return((e[0]&15)!=8||e[0]>>4>7||(e[0]<<8|e[1])%31)&&NA(6,"invalid zlib data"),(e[1]>>5&1)==1&&NA(6,"invalid zlib data: "+(e[1]&32?"need":"unexpected")+" dictionary"),(e[1]>>3&4)+2};function yB(e,t){t||(t={});var r=fR();r.p(e);var i=nte(e,t,t.dictionary?6:2,4);return ite(i,t),pR(i,i.length-4,r.d()),i}function ote(e,t){return ete(e.subarray(ste(e),-4),{i:2},t,t)}var ate=typeof TextDecoder<"u"&&new TextDecoder,lte=0;try{ate.decode(dR,{stream:!0}),lte=1}catch{}var tn=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();function sb(){tn.console&&typeof tn.console.log=="function"&&tn.console.log.apply(tn.console,arguments)}var yi={log:sb,warn:function(e){tn.console&&(typeof tn.console.warn=="function"?tn.console.warn.apply(tn.console,arguments):sb.call(null,arguments))},error:function(e){tn.console&&(typeof tn.console.error=="function"?tn.console.error.apply(tn.console,arguments):sb(e))}};function ob(e,t,r){var i=new XMLHttpRequest;i.open("GET",e),i.responseType="blob",i.onload=function(){Md(i.response,t,r)},i.onerror=function(){yi.error("could not download file")},i.send()}function fT(e){var t=new XMLHttpRequest;t.open("HEAD",e,!1);try{t.send()}catch{}return t.status>=200&&t.status<=299}function ov(e){try{e.dispatchEvent(new MouseEvent("click"))}catch{var t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(t)}}var Ug,vB,Md=tn.saveAs||((typeof window>"u"?"undefined":ei(window))!=="object"||window!==tn?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(e,t,r){var i=tn.URL||tn.webkitURL,a=document.createElement("a");t=t||e.name||"download",a.download=t,a.rel="noopener",typeof e=="string"?(a.href=e,a.origin!==location.origin?fT(a.href)?ob(e,t,r):ov(a,a.target="_blank"):ov(a)):(a.href=i.createObjectURL(e),setTimeout(function(){i.revokeObjectURL(a.href)},4e4),setTimeout(function(){ov(a)},0))}:"msSaveOrOpenBlob"in navigator?function(e,t,r){if(t=t||e.name||"download",typeof e=="string")if(fT(e))ob(e,t,r);else{var i=document.createElement("a");i.href=e,i.target="_blank",setTimeout(function(){ov(i)})}else navigator.msSaveOrOpenBlob(function(a,u){return u===void 0?u={autoBom:!1}:ei(u)!=="object"&&(yi.warn("Deprecated: Expected third argument to be a object"),u={autoBom:!u}),u.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(a.type)?new Blob(["\uFEFF",a],{type:a.type}):a}(e,r),t)}:function(e,t,r,i){if((i=i||open("","_blank"))&&(i.document.title=i.document.body.innerText="downloading..."),typeof e=="string")return ob(e,t,r);var a=e.type==="application/octet-stream",u=/constructor/i.test(tn.HTMLElement)||tn.safari,h=/CriOS\/[\d]+/.test(navigator.userAgent);if((h||a&&u)&&(typeof FileReader>"u"?"undefined":ei(FileReader))==="object"){var o=new FileReader;o.onloadend=function(){var C=o.result;C=h?C:C.replace(/^data:[^;]*;/,"data:attachment/file;"),i?i.location.href=C:location=C,i=null},o.readAsDataURL(e)}else{var g=tn.URL||tn.webkitURL,y=g.createObjectURL(e);i?i.location=y:location.href=y,i=null,setTimeout(function(){g.revokeObjectURL(y)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function mR(e){var t;e=e||"",this.ok=!1,e.charAt(0)=="#"&&(e=e.substr(1,6)),e={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[e=(e=e.replace(/ /g,"")).toLowerCase()]||e;for(var r=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(o){return[parseInt(o[1]),parseInt(o[2]),parseInt(o[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(o){return[parseInt(o[1],16),parseInt(o[2],16),parseInt(o[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(o){return[parseInt(o[1]+o[1],16),parseInt(o[2]+o[2],16),parseInt(o[3]+o[3],16)]}}],i=0;i<r.length;i++){var a=r[i].re,u=r[i].process,h=a.exec(e);h&&(t=u(h),this.r=t[0],this.g=t[1],this.b=t[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var o=this.r.toString(16),g=this.g.toString(16),y=this.b.toString(16);return o.length==1&&(o="0"+o),g.length==1&&(g="0"+g),y.length==1&&(y="0"+y),"#"+o+g+y}}/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function ab(e,t){var r=e[0],i=e[1],a=e[2],u=e[3];r=$o(r,i,a,u,t[0],7,-680876936),u=$o(u,r,i,a,t[1],12,-389564586),a=$o(a,u,r,i,t[2],17,606105819),i=$o(i,a,u,r,t[3],22,-1044525330),r=$o(r,i,a,u,t[4],7,-176418897),u=$o(u,r,i,a,t[5],12,1200080426),a=$o(a,u,r,i,t[6],17,-1473231341),i=$o(i,a,u,r,t[7],22,-45705983),r=$o(r,i,a,u,t[8],7,1770035416),u=$o(u,r,i,a,t[9],12,-1958414417),a=$o(a,u,r,i,t[10],17,-42063),i=$o(i,a,u,r,t[11],22,-1990404162),r=$o(r,i,a,u,t[12],7,1804603682),u=$o(u,r,i,a,t[13],12,-40341101),a=$o(a,u,r,i,t[14],17,-1502002290),r=qo(r,i=$o(i,a,u,r,t[15],22,1236535329),a,u,t[1],5,-165796510),u=qo(u,r,i,a,t[6],9,-1069501632),a=qo(a,u,r,i,t[11],14,643717713),i=qo(i,a,u,r,t[0],20,-373897302),r=qo(r,i,a,u,t[5],5,-701558691),u=qo(u,r,i,a,t[10],9,38016083),a=qo(a,u,r,i,t[15],14,-660478335),i=qo(i,a,u,r,t[4],20,-405537848),r=qo(r,i,a,u,t[9],5,568446438),u=qo(u,r,i,a,t[14],9,-1019803690),a=qo(a,u,r,i,t[3],14,-187363961),i=qo(i,a,u,r,t[8],20,1163531501),r=qo(r,i,a,u,t[13],5,-1444681467),u=qo(u,r,i,a,t[2],9,-51403784),a=qo(a,u,r,i,t[7],14,1735328473),r=Zo(r,i=qo(i,a,u,r,t[12],20,-1926607734),a,u,t[5],4,-378558),u=Zo(u,r,i,a,t[8],11,-2022574463),a=Zo(a,u,r,i,t[11],16,1839030562),i=Zo(i,a,u,r,t[14],23,-35309556),r=Zo(r,i,a,u,t[1],4,-1530992060),u=Zo(u,r,i,a,t[4],11,1272893353),a=Zo(a,u,r,i,t[7],16,-155497632),i=Zo(i,a,u,r,t[10],23,-1094730640),r=Zo(r,i,a,u,t[13],4,681279174),u=Zo(u,r,i,a,t[0],11,-358537222),a=Zo(a,u,r,i,t[3],16,-722521979),i=Zo(i,a,u,r,t[6],23,76029189),r=Zo(r,i,a,u,t[9],4,-640364487),u=Zo(u,r,i,a,t[12],11,-421815835),a=Zo(a,u,r,i,t[15],16,530742520),r=Wo(r,i=Zo(i,a,u,r,t[2],23,-995338651),a,u,t[0],6,-198630844),u=Wo(u,r,i,a,t[7],10,1126891415),a=Wo(a,u,r,i,t[14],15,-1416354905),i=Wo(i,a,u,r,t[5],21,-57434055),r=Wo(r,i,a,u,t[12],6,1700485571),u=Wo(u,r,i,a,t[3],10,-1894986606),a=Wo(a,u,r,i,t[10],15,-1051523),i=Wo(i,a,u,r,t[1],21,-2054922799),r=Wo(r,i,a,u,t[8],6,1873313359),u=Wo(u,r,i,a,t[15],10,-30611744),a=Wo(a,u,r,i,t[6],15,-1560198380),i=Wo(i,a,u,r,t[13],21,1309151649),r=Wo(r,i,a,u,t[4],6,-145523070),u=Wo(u,r,i,a,t[11],10,-1120210379),a=Wo(a,u,r,i,t[2],15,718787259),i=Wo(i,a,u,r,t[9],21,-343485551),e[0]=Nh(r,e[0]),e[1]=Nh(i,e[1]),e[2]=Nh(a,e[2]),e[3]=Nh(u,e[3])}function O_(e,t,r,i,a,u){return t=Nh(Nh(t,e),Nh(i,u)),Nh(t<<a|t>>>32-a,r)}function $o(e,t,r,i,a,u,h){return O_(t&r|~t&i,e,t,a,u,h)}function qo(e,t,r,i,a,u,h){return O_(t&i|r&~i,e,t,a,u,h)}function Zo(e,t,r,i,a,u,h){return O_(t^r^i,e,t,a,u,h)}function Wo(e,t,r,i,a,u,h){return O_(r^(t|~i),e,t,a,u,h)}function gR(e){var t,r=e.length,i=[1732584193,-271733879,-1732584194,271733878];for(t=64;t<=e.length;t+=64)ab(i,Ate(e.substring(t-64,t)));e=e.substring(t-64);var a=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;t<e.length;t++)a[t>>2]|=e.charCodeAt(t)<<(t%4<<3);if(a[t>>2]|=128<<(t%4<<3),t>55)for(ab(i,a),t=0;t<16;t++)a[t]=0;return a[14]=8*r,ab(i,a),i}function Ate(e){var t,r=[];for(t=0;t<64;t+=4)r[t>>2]=e.charCodeAt(t)+(e.charCodeAt(t+1)<<8)+(e.charCodeAt(t+2)<<16)+(e.charCodeAt(t+3)<<24);return r}Ug=tn.atob.bind(tn),vB=tn.btoa.bind(tn);var pT="0123456789abcdef".split("");function cte(e){for(var t="",r=0;r<4;r++)t+=pT[e>>8*r+4&15]+pT[e>>8*r&15];return t}function ute(e){return String.fromCharCode((255&e)>>0,(65280&e)>>8,(16711680&e)>>16,(4278190080&e)>>24)}function _B(e){return gR(e).map(ute).join("")}var hte=function(e){for(var t=0;t<e.length;t++)e[t]=cte(e[t]);return e.join("")}(gR("hello"))!="5d41402abc4b2a76b9719d911017c592";function Nh(e,t){if(hte){var r=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(r>>16)<<16|65535&r}return e+t&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function wB(e,t){var r,i,a,u;if(e!==r){for(var h=(a=e,u=1+(256/e.length>>0),new Array(u+1).join(a)),o=[],g=0;g<256;g++)o[g]=g;var y=0;for(g=0;g<256;g++){var C=o[g];y=(y+C+h.charCodeAt(g))%256,o[g]=o[y],o[y]=C}r=e,i=o}else o=i;var I=t.length,F=0,b=0,N="";for(g=0;g<I;g++)b=(b+(C=o[F=(F+1)%256]))%256,o[F]=o[b],o[b]=C,h=o[(o[F]+o[b])%256],N+=String.fromCharCode(t.charCodeAt(g)^h);return N}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var mT={print:4,modify:8,copy:16,"annot-forms":32};function np(e,t,r,i){this.v=1,this.r=2;var a=192;e.forEach(function(o){if(mT.perm!==void 0)throw new Error("Invalid permission: "+o);a+=mT[o]}),this.padding="(¿N^NuAd\0NVÿú\b..\0¶Ðh>/\f©þdSiz";var u=(t+this.padding).substr(0,32),h=(r+this.padding).substr(0,32);this.O=this.processOwnerPassword(u,h),this.P=-(1+(255^a)),this.encryptionKey=_B(u+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(i)).substr(0,5),this.U=wB(this.encryptionKey,this.padding)}function ip(e){if(/[^\u0000-\u00ff]/.test(e))throw new Error("Invalid PDF Name Object: "+e+", Only accept ASCII characters.");for(var t="",r=e.length,i=0;i<r;i++){var a=e.charCodeAt(i);a<33||a===35||a===37||a===40||a===41||a===47||a===60||a===62||a===91||a===93||a===123||a===125||a>126?t+="#"+("0"+a.toString(16)).slice(-2):t+=e[i]}return t}function gT(e){if(ei(e)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var t={};this.subscribe=function(r,i,a){if(a=a||!1,typeof r!="string"||typeof i!="function"||typeof a!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");t.hasOwnProperty(r)||(t[r]={});var u=Math.random().toString(35);return t[r][u]=[i,!!a],u},this.unsubscribe=function(r){for(var i in t)if(t[i][r])return delete t[i][r],Object.keys(t[i]).length===0&&delete t[i],!0;return!1},this.publish=function(r){if(t.hasOwnProperty(r)){var i=Array.prototype.slice.call(arguments,1),a=[];for(var u in t[r]){var h=t[r][u];try{h[0].apply(e,i)}catch(o){tn.console&&yi.error("jsPDF PubSub Error",o.message,o)}h[1]&&a.push(u)}a.length&&a.forEach(this.unsubscribe)}},this.getTopics=function(){return t}}function D1(e){if(!(this instanceof D1))return new D1(e);var t="opacity,stroke-opacity".split(",");for(var r in e)e.hasOwnProperty(r)&&t.indexOf(r)>=0&&(this[r]=e[r]);this.id="",this.objectNumber=-1}function yR(e,t){this.gState=e,this.matrix=t,this.id="",this.objectNumber=-1}function Ud(e,t,r,i,a){if(!(this instanceof Ud))return new Ud(e,t,r,i,a);this.type=e==="axial"?2:3,this.coords=t,this.colors=r,yR.call(this,i,a)}function vp(e,t,r,i,a){if(!(this instanceof vp))return new vp(e,t,r,i,a);this.boundingBox=e,this.xStep=t,this.yStep=r,this.stream="",this.cloneIndex=0,yR.call(this,i,a)}function Xr(e){var t,r=typeof arguments[0]=="string"?arguments[0]:"p",i=arguments[1],a=arguments[2],u=arguments[3],h=[],o=1,g=16,y="S",C=null;ei(e=e||{})==="object"&&(r=e.orientation,i=e.unit||i,a=e.format||a,u=e.compress||e.compressPdf||u,(C=e.encryption||null)!==null&&(C.userPassword=C.userPassword||"",C.ownerPassword=C.ownerPassword||"",C.userPermissions=C.userPermissions||[]),o=typeof e.userUnit=="number"?Math.abs(e.userUnit):1,e.precision!==void 0&&(t=e.precision),e.floatPrecision!==void 0&&(g=e.floatPrecision),y=e.defaultPathOperation||"S"),h=e.filters||(u===!0?["FlateEncode"]:h),i=i||"mm",r=(""+(r||"P")).toLowerCase();var I=e.putOnlyUsedFonts||!1,F={},b={internal:{},__private__:{}};b.__private__.PubSub=gT;var N="1.3",U=b.__private__.getPdfVersion=function(){return N};b.__private__.setPdfVersion=function(D){N=D};var H={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};b.__private__.getPageFormats=function(){return H};var k=b.__private__.getPageFormat=function(D){return H[D]};a=a||"a4";var R={COMPAT:"compat",ADVANCED:"advanced"},V=R.COMPAT;function W(){this.saveGraphicsState(),Ge(new qt(ur,0,0,-ur,0,Lo()*ur).toString()+" cm"),this.setFontSize(this.getFontSize()/ur),y="n",V=R.ADVANCED}function se(){this.restoreGraphicsState(),y="S",V=R.COMPAT}var fe=b.__private__.combineFontStyleAndFontWeight=function(D,ce){if(D=="bold"&&ce=="normal"||D=="bold"&&ce==400||D=="normal"&&ce=="italic"||D=="bold"&&ce=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return ce&&(D=ce==400||ce==="normal"?D==="italic"?"italic":"normal":ce!=700&&ce!=="bold"||D!=="normal"?(ce==700?"bold":ce)+""+D:"bold"),D};b.advancedAPI=function(D){var ce=V===R.COMPAT;return ce&&W.call(this),typeof D!="function"||(D(this),ce&&se.call(this)),this},b.compatAPI=function(D){var ce=V===R.ADVANCED;return ce&&se.call(this),typeof D!="function"||(D(this),ce&&W.call(this)),this},b.isAdvancedAPI=function(){return V===R.ADVANCED};var ue,ae=function(D){if(V!==R.ADVANCED)throw new Error(D+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},Be=b.roundToPrecision=b.__private__.roundToPrecision=function(D,ce){var je=t||ce;if(isNaN(D)||isNaN(je))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return D.toFixed(je).replace(/0+$/,"")};ue=b.hpf=b.__private__.hpf=typeof g=="number"?function(D){if(isNaN(D))throw new Error("Invalid argument passed to jsPDF.hpf");return Be(D,g)}:g==="smart"?function(D){if(isNaN(D))throw new Error("Invalid argument passed to jsPDF.hpf");return Be(D,D>-1&&D<1?16:5)}:function(D){if(isNaN(D))throw new Error("Invalid argument passed to jsPDF.hpf");return Be(D,16)};var Ue=b.f2=b.__private__.f2=function(D){if(isNaN(D))throw new Error("Invalid argument passed to jsPDF.f2");return Be(D,2)},te=b.__private__.f3=function(D){if(isNaN(D))throw new Error("Invalid argument passed to jsPDF.f3");return Be(D,3)},de=b.scale=b.__private__.scale=function(D){if(isNaN(D))throw new Error("Invalid argument passed to jsPDF.scale");return V===R.COMPAT?D*ur:V===R.ADVANCED?D:void 0},Te=function(D){return V===R.COMPAT?Lo()-D:V===R.ADVANCED?D:void 0},we=function(D){return de(Te(D))};b.__private__.setPrecision=b.setPrecision=function(D){typeof parseInt(D,10)=="number"&&(t=parseInt(D,10))};var st,Ze="00000000000000000000000000000000",At=b.__private__.getFileId=function(){return Ze},Le=b.__private__.setFileId=function(D){return Ze=D!==void 0&&/^[a-fA-F0-9]{32}$/.test(D)?D.toUpperCase():Ze.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),C!==null&&(ri=new np(C.userPermissions,C.userPassword,C.ownerPassword,Ze)),Ze};b.setFileId=function(D){return Le(D),this},b.getFileId=function(){return At()};var He=b.__private__.convertDateToPDFDate=function(D){var ce=D.getTimezoneOffset(),je=ce<0?"+":"-",at=Math.floor(Math.abs(ce/60)),vt=Math.abs(ce%60),Ut=[je,Pe(at),"'",Pe(vt),"'"].join("");return["D:",D.getFullYear(),Pe(D.getMonth()+1),Pe(D.getDate()),Pe(D.getHours()),Pe(D.getMinutes()),Pe(D.getSeconds()),Ut].join("")},it=b.__private__.convertPDFDateToDate=function(D){var ce=parseInt(D.substr(2,4),10),je=parseInt(D.substr(6,2),10)-1,at=parseInt(D.substr(8,2),10),vt=parseInt(D.substr(10,2),10),Ut=parseInt(D.substr(12,2),10),Wt=parseInt(D.substr(14,2),10);return new Date(ce,je,at,vt,Ut,Wt,0)},Lt=b.__private__.setCreationDate=function(D){var ce;if(D===void 0&&(D=new Date),D instanceof Date)ce=He(D);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(D))throw new Error("Invalid argument passed to jsPDF.setCreationDate");ce=D}return st=ce},ie=b.__private__.getCreationDate=function(D){var ce=st;return D==="jsDate"&&(ce=it(st)),ce};b.setCreationDate=function(D){return Lt(D),this},b.getCreationDate=function(D){return ie(D)};var Ce,Pe=b.__private__.padd2=function(D){return("0"+parseInt(D)).slice(-2)},$e=b.__private__.padd2Hex=function(D){return("00"+(D=D.toString())).substr(D.length)},nt=0,Xe=[],pt=[],dt=0,Rt=[],Mt=[],$t=!1,jt=pt,vr=function(){nt=0,dt=0,pt=[],Xe=[],Rt=[],Xn=Ur(),Bn=Ur()};b.__private__.setCustomOutputDestination=function(D){$t=!0,jt=D};var Ft=function(D){$t||(jt=D)};b.__private__.resetCustomOutputDestination=function(){$t=!1,jt=pt};var Ge=b.__private__.out=function(D){return D=D.toString(),dt+=D.length+1,jt.push(D),jt},Cr=b.__private__.write=function(D){return Ge(arguments.length===1?D.toString():Array.prototype.join.call(arguments," "))},pr=b.__private__.getArrayBuffer=function(D){for(var ce=D.length,je=new ArrayBuffer(ce),at=new Uint8Array(je);ce--;)at[ce]=D.charCodeAt(ce);return je},Kt=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];b.__private__.getStandardFonts=function(){return Kt};var ar=e.fontSize||16;b.__private__.setFontSize=b.setFontSize=function(D){return ar=V===R.ADVANCED?D/ur:D,this};var lr,cr=b.__private__.getFontSize=b.getFontSize=function(){return V===R.COMPAT?ar:ar*ur},br=e.R2L||!1;b.__private__.setR2L=b.setR2L=function(D){return br=D,this},b.__private__.getR2L=b.getR2L=function(){return br};var Dr,Kr=b.__private__.setZoomMode=function(D){var ce=[void 0,null,"fullwidth","fullheight","fullpage","original"];if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(D))lr=D;else if(isNaN(D)){if(ce.indexOf(D)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+D+'" is not recognized.');lr=D}else lr=parseInt(D,10)};b.__private__.getZoomMode=function(){return lr};var Lr,Hr=b.__private__.setPageMode=function(D){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(D)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+D+'" is not recognized.');Dr=D};b.__private__.getPageMode=function(){return Dr};var un=b.__private__.setLayoutMode=function(D){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(D)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+D+'" is not recognized.');Lr=D};b.__private__.getLayoutMode=function(){return Lr},b.__private__.setDisplayMode=b.setDisplayMode=function(D,ce,je){return Kr(D),un(ce),Hr(je),this};var zr={title:"",subject:"",author:"",keywords:"",creator:""};b.__private__.getDocumentProperty=function(D){if(Object.keys(zr).indexOf(D)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return zr[D]},b.__private__.getDocumentProperties=function(){return zr},b.__private__.setDocumentProperties=b.setProperties=b.setDocumentProperties=function(D){for(var ce in zr)zr.hasOwnProperty(ce)&&D[ce]&&(zr[ce]=D[ce]);return this},b.__private__.setDocumentProperty=function(D,ce){if(Object.keys(zr).indexOf(D)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return zr[D]=ce};var Yr,ur,ct,Ae,me,_e={},Ne={},et=[],tt={},yt={},rt={},It={},Ct=null,lt=0,mt=[],Me=new gT(b),Nt=e.hotfixes||[],nr={},tr={},Ar=[],qt=function D(ce,je,at,vt,Ut,Wt){if(!(this instanceof D))return new D(ce,je,at,vt,Ut,Wt);isNaN(ce)&&(ce=1),isNaN(je)&&(je=0),isNaN(at)&&(at=0),isNaN(vt)&&(vt=1),isNaN(Ut)&&(Ut=0),isNaN(Wt)&&(Wt=0),this._matrix=[ce,je,at,vt,Ut,Wt]};Object.defineProperty(qt.prototype,"sx",{get:function(){return this._matrix[0]},set:function(D){this._matrix[0]=D}}),Object.defineProperty(qt.prototype,"shy",{get:function(){return this._matrix[1]},set:function(D){this._matrix[1]=D}}),Object.defineProperty(qt.prototype,"shx",{get:function(){return this._matrix[2]},set:function(D){this._matrix[2]=D}}),Object.defineProperty(qt.prototype,"sy",{get:function(){return this._matrix[3]},set:function(D){this._matrix[3]=D}}),Object.defineProperty(qt.prototype,"tx",{get:function(){return this._matrix[4]},set:function(D){this._matrix[4]=D}}),Object.defineProperty(qt.prototype,"ty",{get:function(){return this._matrix[5]},set:function(D){this._matrix[5]=D}}),Object.defineProperty(qt.prototype,"a",{get:function(){return this._matrix[0]},set:function(D){this._matrix[0]=D}}),Object.defineProperty(qt.prototype,"b",{get:function(){return this._matrix[1]},set:function(D){this._matrix[1]=D}}),Object.defineProperty(qt.prototype,"c",{get:function(){return this._matrix[2]},set:function(D){this._matrix[2]=D}}),Object.defineProperty(qt.prototype,"d",{get:function(){return this._matrix[3]},set:function(D){this._matrix[3]=D}}),Object.defineProperty(qt.prototype,"e",{get:function(){return this._matrix[4]},set:function(D){this._matrix[4]=D}}),Object.defineProperty(qt.prototype,"f",{get:function(){return this._matrix[5]},set:function(D){this._matrix[5]=D}}),Object.defineProperty(qt.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(qt.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(qt.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(qt.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),qt.prototype.join=function(D){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(ue).join(D)},qt.prototype.multiply=function(D){var ce=D.sx*this.sx+D.shy*this.shx,je=D.sx*this.shy+D.shy*this.sy,at=D.shx*this.sx+D.sy*this.shx,vt=D.shx*this.shy+D.sy*this.sy,Ut=D.tx*this.sx+D.ty*this.shx+this.tx,Wt=D.tx*this.shy+D.ty*this.sy+this.ty;return new qt(ce,je,at,vt,Ut,Wt)},qt.prototype.decompose=function(){var D=this.sx,ce=this.shy,je=this.shx,at=this.sy,vt=this.tx,Ut=this.ty,Wt=Math.sqrt(D*D+ce*ce),gr=(D/=Wt)*je+(ce/=Wt)*at;je-=D*gr,at-=ce*gr;var Mr=Math.sqrt(je*je+at*at);return gr/=Mr,D*(at/=Mr)<ce*(je/=Mr)&&(D=-D,ce=-ce,gr=-gr,Wt=-Wt),{scale:new qt(Wt,0,0,Mr,0,0),translate:new qt(1,0,0,1,vt,Ut),rotate:new qt(D,ce,-ce,D,0,0),skew:new qt(1,0,gr,1,0,0)}},qt.prototype.toString=function(D){return this.join(" ")},qt.prototype.inversed=function(){var D=this.sx,ce=this.shy,je=this.shx,at=this.sy,vt=this.tx,Ut=this.ty,Wt=1/(D*at-ce*je),gr=at*Wt,Mr=-ce*Wt,en=-je*Wt,Wr=D*Wt;return new qt(gr,Mr,en,Wr,-gr*vt-en*Ut,-Mr*vt-Wr*Ut)},qt.prototype.applyToPoint=function(D){var ce=D.x*this.sx+D.y*this.shx+this.tx,je=D.x*this.shy+D.y*this.sy+this.ty;return new La(ce,je)},qt.prototype.applyToRectangle=function(D){var ce=this.applyToPoint(D),je=this.applyToPoint(new La(D.x+D.w,D.y+D.h));return new lA(ce.x,ce.y,je.x-ce.x,je.y-ce.y)},qt.prototype.clone=function(){var D=this.sx,ce=this.shy,je=this.shx,at=this.sy,vt=this.tx,Ut=this.ty;return new qt(D,ce,je,at,vt,Ut)},b.Matrix=qt;var Jr=b.matrixMult=function(D,ce){return ce.multiply(D)},jr=new qt(1,0,0,1,0,0);b.unitMatrix=b.identityMatrix=jr;var Nr=function(D,ce){if(!yt[D]){var je=(ce instanceof Ud?"Sh":"P")+(Object.keys(tt).length+1).toString(10);ce.id=je,yt[D]=je,tt[je]=ce,Me.publish("addPattern",ce)}};b.ShadingPattern=Ud,b.TilingPattern=vp,b.addShadingPattern=function(D,ce){return ae("addShadingPattern()"),Nr(D,ce),this},b.beginTilingPattern=function(D){ae("beginTilingPattern()"),rs(D.boundingBox[0],D.boundingBox[1],D.boundingBox[2]-D.boundingBox[0],D.boundingBox[3]-D.boundingBox[1],D.matrix)},b.endTilingPattern=function(D,ce){ae("endTilingPattern()"),ce.stream=Mt[Ce].join(`
`),Nr(D,ce),Me.publish("endTilingPattern",ce),Ar.pop().restore()};var _r=b.__private__.newObject=function(){var D=Ur();return Ln(D,!0),D},Ur=b.__private__.newObjectDeferred=function(){return nt++,Xe[nt]=function(){return dt},nt},Ln=function(D,ce){return ce=typeof ce=="boolean"&&ce,Xe[D]=dt,ce&&Ge(D+" 0 obj"),D},Yt=b.__private__.newAdditionalObject=function(){var D={objId:Ur(),content:""};return Rt.push(D),D},Xn=Ur(),Bn=Ur(),es=b.__private__.decodeColorString=function(D){var ce=D.split(" ");if(ce.length!==2||ce[1]!=="g"&&ce[1]!=="G")ce.length===5&&(ce[4]==="k"||ce[4]==="K")&&(ce=[(1-ce[0])*(1-ce[3]),(1-ce[1])*(1-ce[3]),(1-ce[2])*(1-ce[3]),"r"]);else{var je=parseFloat(ce[0]);ce=[je,je,je,"r"]}for(var at="#",vt=0;vt<3;vt++)at+=("0"+Math.floor(255*parseFloat(ce[vt])).toString(16)).slice(-2);return at},cs=b.__private__.encodeColorString=function(D){var ce;typeof D=="string"&&(D={ch1:D});var je=D.ch1,at=D.ch2,vt=D.ch3,Ut=D.ch4,Wt=D.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof je=="string"&&je.charAt(0)!=="#"){var gr=new mR(je);if(gr.ok)je=gr.toHex();else if(!/^\d*\.?\d*$/.test(je))throw new Error('Invalid color "'+je+'" passed to jsPDF.encodeColorString.')}if(typeof je=="string"&&/^#[0-9A-Fa-f]{3}$/.test(je)&&(je="#"+je[1]+je[1]+je[2]+je[2]+je[3]+je[3]),typeof je=="string"&&/^#[0-9A-Fa-f]{6}$/.test(je)){var Mr=parseInt(je.substr(1),16);je=Mr>>16&255,at=Mr>>8&255,vt=255&Mr}if(at===void 0||Ut===void 0&&je===at&&at===vt)if(typeof je=="string")ce=je+" "+Wt[0];else switch(D.precision){case 2:ce=Ue(je/255)+" "+Wt[0];break;case 3:default:ce=te(je/255)+" "+Wt[0]}else if(Ut===void 0||ei(Ut)==="object"){if(Ut&&!isNaN(Ut.a)&&Ut.a===0)return ce=["1.","1.","1.",Wt[1]].join(" ");if(typeof je=="string")ce=[je,at,vt,Wt[1]].join(" ");else switch(D.precision){case 2:ce=[Ue(je/255),Ue(at/255),Ue(vt/255),Wt[1]].join(" ");break;default:case 3:ce=[te(je/255),te(at/255),te(vt/255),Wt[1]].join(" ")}}else if(typeof je=="string")ce=[je,at,vt,Ut,Wt[2]].join(" ");else switch(D.precision){case 2:ce=[Ue(je),Ue(at),Ue(vt),Ue(Ut),Wt[2]].join(" ");break;case 3:default:ce=[te(je),te(at),te(vt),te(Ut),Wt[2]].join(" ")}return ce},Jt=b.__private__.getFilters=function(){return h},Qr=b.__private__.putStream=function(D){var ce=(D=D||{}).data||"",je=D.filters||Jt(),at=D.alreadyAppliedFilters||[],vt=D.addLength1||!1,Ut=ce.length,Wt=D.objectId,gr=function(Ri){return Ri};if(C!==null&&Wt===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");C!==null&&(gr=ri.encryptor(Wt,0));var Mr={};je===!0&&(je=["FlateEncode"]);var en=D.additionalKeyValues||[],Wr=(Mr=Xr.API.processDataByFilters!==void 0?Xr.API.processDataByFilters(ce,je):{data:ce,reverseChain:[]}).reverseChain+(Array.isArray(at)?at.join(" "):at.toString());if(Mr.data.length!==0&&(en.push({key:"Length",value:Mr.data.length}),vt===!0&&en.push({key:"Length1",value:Ut})),Wr.length!=0)if(Wr.split("/").length-1==1)en.push({key:"Filter",value:Wr});else{en.push({key:"Filter",value:"["+Wr+"]"});for(var nn=0;nn<en.length;nn+=1)if(en[nn].key==="DecodeParms"){for(var hi=[],ni=0;ni<Mr.reverseChain.split("/").length-1;ni+=1)hi.push("null");hi.push(en[nn].value),en[nn].value="["+hi.join(" ")+"]"}}Ge("<<");for(var ii=0;ii<en.length;ii++)Ge("/"+en[ii].key+" "+en[ii].value);Ge(">>"),Mr.data.length!==0&&(Ge("stream"),Ge(gr(Mr.data)),Ge("endstream"))},Vr=b.__private__.putPage=function(D){var ce=D.number,je=D.data,at=D.objId,vt=D.contentsObjId;Ln(at,!0),Ge("<</Type /Page"),Ge("/Parent "+D.rootDictionaryObjId+" 0 R"),Ge("/Resources "+D.resourceDictionaryObjId+" 0 R"),Ge("/MediaBox ["+parseFloat(ue(D.mediaBox.bottomLeftX))+" "+parseFloat(ue(D.mediaBox.bottomLeftY))+" "+ue(D.mediaBox.topRightX)+" "+ue(D.mediaBox.topRightY)+"]"),D.cropBox!==null&&Ge("/CropBox ["+ue(D.cropBox.bottomLeftX)+" "+ue(D.cropBox.bottomLeftY)+" "+ue(D.cropBox.topRightX)+" "+ue(D.cropBox.topRightY)+"]"),D.bleedBox!==null&&Ge("/BleedBox ["+ue(D.bleedBox.bottomLeftX)+" "+ue(D.bleedBox.bottomLeftY)+" "+ue(D.bleedBox.topRightX)+" "+ue(D.bleedBox.topRightY)+"]"),D.trimBox!==null&&Ge("/TrimBox ["+ue(D.trimBox.bottomLeftX)+" "+ue(D.trimBox.bottomLeftY)+" "+ue(D.trimBox.topRightX)+" "+ue(D.trimBox.topRightY)+"]"),D.artBox!==null&&Ge("/ArtBox ["+ue(D.artBox.bottomLeftX)+" "+ue(D.artBox.bottomLeftY)+" "+ue(D.artBox.topRightX)+" "+ue(D.artBox.topRightY)+"]"),typeof D.userUnit=="number"&&D.userUnit!==1&&Ge("/UserUnit "+D.userUnit),Me.publish("putPage",{objId:at,pageContext:mt[ce],pageNumber:ce,page:je}),Ge("/Contents "+vt+" 0 R"),Ge(">>"),Ge("endobj");var Ut=je.join(`
`);return V===R.ADVANCED&&(Ut+=`
Q`),Ln(vt,!0),Qr({data:Ut,filters:Jt(),objectId:vt}),Ge("endobj"),at},zi=b.__private__.putPages=function(){var D,ce,je=[];for(D=1;D<=lt;D++)mt[D].objId=Ur(),mt[D].contentsObjId=Ur();for(D=1;D<=lt;D++)je.push(Vr({number:D,data:Mt[D],objId:mt[D].objId,contentsObjId:mt[D].contentsObjId,mediaBox:mt[D].mediaBox,cropBox:mt[D].cropBox,bleedBox:mt[D].bleedBox,trimBox:mt[D].trimBox,artBox:mt[D].artBox,userUnit:mt[D].userUnit,rootDictionaryObjId:Xn,resourceDictionaryObjId:Bn}));Ln(Xn,!0),Ge("<</Type /Pages");var at="/Kids [";for(ce=0;ce<lt;ce++)at+=je[ce]+" 0 R ";Ge(at+"]"),Ge("/Count "+lt),Ge(">>"),Ge("endobj"),Me.publish("postPutPages")},Ja=function(D){Me.publish("putFont",{font:D,out:Ge,newObject:_r,putStream:Qr}),D.isAlreadyPutted!==!0&&(D.objectNumber=_r(),Ge("<<"),Ge("/Type /Font"),Ge("/BaseFont /"+ip(D.postScriptName)),Ge("/Subtype /Type1"),typeof D.encoding=="string"&&Ge("/Encoding /"+D.encoding),Ge("/FirstChar 32"),Ge("/LastChar 255"),Ge(">>"),Ge("endobj"))},Us=function(){for(var D in _e)_e.hasOwnProperty(D)&&(I===!1||I===!0&&F.hasOwnProperty(D))&&Ja(_e[D])},$r=function(D){D.objectNumber=_r();var ce=[];ce.push({key:"Type",value:"/XObject"}),ce.push({key:"Subtype",value:"/Form"}),ce.push({key:"BBox",value:"["+[ue(D.x),ue(D.y),ue(D.x+D.width),ue(D.y+D.height)].join(" ")+"]"}),ce.push({key:"Matrix",value:"["+D.matrix.toString()+"]"});var je=D.pages[1].join(`
`);Qr({data:je,additionalKeyValues:ce,objectId:D.objectNumber}),Ge("endobj")},Xs=function(){for(var D in nr)nr.hasOwnProperty(D)&&$r(nr[D])},Ca=function(D,ce){var je,at=[],vt=1/(ce-1);for(je=0;je<1;je+=vt)at.push(je);if(at.push(1),D[0].offset!=0){var Ut={offset:0,color:D[0].color};D.unshift(Ut)}if(D[D.length-1].offset!=1){var Wt={offset:1,color:D[D.length-1].color};D.push(Wt)}for(var gr="",Mr=0,en=0;en<at.length;en++){for(je=at[en];je>D[Mr+1].offset;)Mr++;var Wr=D[Mr].offset,nn=(je-Wr)/(D[Mr+1].offset-Wr),hi=D[Mr].color,ni=D[Mr+1].color;gr+=$e(Math.round((1-nn)*hi[0]+nn*ni[0]).toString(16))+$e(Math.round((1-nn)*hi[1]+nn*ni[1]).toString(16))+$e(Math.round((1-nn)*hi[2]+nn*ni[2]).toString(16))}return gr.trim()},ui=function(D,ce){ce||(ce=21);var je=_r(),at=Ca(D.colors,ce),vt=[];vt.push({key:"FunctionType",value:"0"}),vt.push({key:"Domain",value:"[0.0 1.0]"}),vt.push({key:"Size",value:"["+ce+"]"}),vt.push({key:"BitsPerSample",value:"8"}),vt.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),vt.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Qr({data:at,additionalKeyValues:vt,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:je}),Ge("endobj"),D.objectNumber=_r(),Ge("<< /ShadingType "+D.type),Ge("/ColorSpace /DeviceRGB");var Ut="/Coords ["+ue(parseFloat(D.coords[0]))+" "+ue(parseFloat(D.coords[1]))+" ";D.type===2?Ut+=ue(parseFloat(D.coords[2]))+" "+ue(parseFloat(D.coords[3])):Ut+=ue(parseFloat(D.coords[2]))+" "+ue(parseFloat(D.coords[3]))+" "+ue(parseFloat(D.coords[4]))+" "+ue(parseFloat(D.coords[5])),Ge(Ut+="]"),D.matrix&&Ge("/Matrix ["+D.matrix.toString()+"]"),Ge("/Function "+je+" 0 R"),Ge("/Extend [true true]"),Ge(">>"),Ge("endobj")},iA=function(D,ce){var je=Ur(),at=_r();ce.push({resourcesOid:je,objectOid:at}),D.objectNumber=at;var vt=[];vt.push({key:"Type",value:"/Pattern"}),vt.push({key:"PatternType",value:"1"}),vt.push({key:"PaintType",value:"1"}),vt.push({key:"TilingType",value:"1"}),vt.push({key:"BBox",value:"["+D.boundingBox.map(ue).join(" ")+"]"}),vt.push({key:"XStep",value:ue(D.xStep)}),vt.push({key:"YStep",value:ue(D.yStep)}),vt.push({key:"Resources",value:je+" 0 R"}),D.matrix&&vt.push({key:"Matrix",value:"["+D.matrix.toString()+"]"}),Qr({data:D.stream,additionalKeyValues:vt,objectId:D.objectNumber}),Ge("endobj")},Sa=function(D){var ce;for(ce in tt)tt.hasOwnProperty(ce)&&(tt[ce]instanceof Ud?ui(tt[ce]):tt[ce]instanceof vp&&iA(tt[ce],D))},Fo=function(D){for(var ce in D.objectNumber=_r(),Ge("<<"),D)switch(ce){case"opacity":Ge("/ca "+Ue(D[ce]));break;case"stroke-opacity":Ge("/CA "+Ue(D[ce]))}Ge(">>"),Ge("endobj")},sA=function(){var D;for(D in rt)rt.hasOwnProperty(D)&&Fo(rt[D])},us=function(){for(var D in Ge("/XObject <<"),nr)nr.hasOwnProperty(D)&&nr[D].objectNumber>=0&&Ge("/"+D+" "+nr[D].objectNumber+" 0 R");Me.publish("putXobjectDict"),Ge(">>")},$n=function(){ri.oid=_r(),Ge("<<"),Ge("/Filter /Standard"),Ge("/V "+ri.v),Ge("/R "+ri.r),Ge("/U <"+ri.toHexString(ri.U)+">"),Ge("/O <"+ri.toHexString(ri.O)+">"),Ge("/P "+ri.P),Ge(">>"),Ge("endobj")},Kc=function(){for(var D in Ge("/Font <<"),_e)_e.hasOwnProperty(D)&&(I===!1||I===!0&&F.hasOwnProperty(D))&&Ge("/"+D+" "+_e[D].objectNumber+" 0 R");Ge(">>")},oA=function(){if(Object.keys(tt).length>0){for(var D in Ge("/Shading <<"),tt)tt.hasOwnProperty(D)&&tt[D]instanceof Ud&&tt[D].objectNumber>=0&&Ge("/"+D+" "+tt[D].objectNumber+" 0 R");Me.publish("putShadingPatternDict"),Ge(">>")}},el=function(D){if(Object.keys(tt).length>0){for(var ce in Ge("/Pattern <<"),tt)tt.hasOwnProperty(ce)&&tt[ce]instanceof b.TilingPattern&&tt[ce].objectNumber>=0&&tt[ce].objectNumber<D&&Ge("/"+ce+" "+tt[ce].objectNumber+" 0 R");Me.publish("putTilingPatternDict"),Ge(">>")}},tl=function(){if(Object.keys(rt).length>0){var D;for(D in Ge("/ExtGState <<"),rt)rt.hasOwnProperty(D)&&rt[D].objectNumber>=0&&Ge("/"+D+" "+rt[D].objectNumber+" 0 R");Me.publish("putGStateDict"),Ge(">>")}},On=function(D){Ln(D.resourcesOid,!0),Ge("<<"),Ge("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),Kc(),oA(),el(D.objectOid),tl(),us(),Ge(">>"),Ge("endobj")},Gc=function(){var D=[];Us(),sA(),Xs(),Sa(D),Me.publish("putResources"),D.forEach(On),On({resourcesOid:Bn,objectOid:Number.MAX_SAFE_INTEGER}),Me.publish("postPutResources")},$c=function(){Me.publish("putAdditionalObjects");for(var D=0;D<Rt.length;D++){var ce=Rt[D];Ln(ce.objId,!0),Ge(ce.content),Ge("endobj")}Me.publish("postPutAdditionalObjects")},qc=function(D){Ne[D.fontName]=Ne[D.fontName]||{},Ne[D.fontName][D.fontStyle]=D.id},Ea=function(D,ce,je,at,vt){var Ut={id:"F"+(Object.keys(_e).length+1).toString(10),postScriptName:D,fontName:ce,fontStyle:je,encoding:at,isStandardFont:vt||!1,metadata:{}};return Me.publish("addFont",{font:Ut,instance:this}),_e[Ut.id]=Ut,qc(Ut),Ut.id},zu=function(D){for(var ce=0,je=Kt.length;ce<je;ce++){var at=Ea.call(this,D[ce][0],D[ce][1],D[ce][2],Kt[ce][3],!0);I===!1&&(F[at]=!0);var vt=D[ce][0].split("-");qc({id:at,fontName:vt[0],fontStyle:vt[1]||""})}Me.publish("addFonts",{fonts:_e,dictionary:Ne})},To=function(D){return D.foo=function(){try{return D.apply(this,arguments)}catch(at){var ce=at.stack||"";~ce.indexOf(" at ")&&(ce=ce.split(" at ")[1]);var je="Error in function "+ce.split(`
`)[0].split("<")[0]+": "+at.message;if(!tn.console)throw new Error(je);tn.console.error(je,at),tn.alert&&alert(je)}},D.foo.bar=D,D.foo},Ia=function(D,ce){var je,at,vt,Ut,Wt,gr,Mr,en,Wr;if(vt=(ce=ce||{}).sourceEncoding||"Unicode",Wt=ce.outputEncoding,(ce.autoencode||Wt)&&_e[Yr].metadata&&_e[Yr].metadata[vt]&&_e[Yr].metadata[vt].encoding&&(Ut=_e[Yr].metadata[vt].encoding,!Wt&&_e[Yr].encoding&&(Wt=_e[Yr].encoding),!Wt&&Ut.codePages&&(Wt=Ut.codePages[0]),typeof Wt=="string"&&(Wt=Ut[Wt]),Wt)){for(Mr=!1,gr=[],je=0,at=D.length;je<at;je++)(en=Wt[D.charCodeAt(je)])?gr.push(String.fromCharCode(en)):gr.push(D[je]),gr[je].charCodeAt(0)>>8&&(Mr=!0);D=gr.join("")}for(je=D.length;Mr===void 0&&je!==0;)D.charCodeAt(je-1)>>8&&(Mr=!0),je--;if(!Mr)return D;for(gr=ce.noBOM?[]:[254,255],je=0,at=D.length;je<at;je++){if((Wr=(en=D.charCodeAt(je))>>8)>>8)throw new Error("Character at position "+je+" of string '"+D+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");gr.push(Wr),gr.push(en-(Wr<<8))}return String.fromCharCode.apply(void 0,gr)},Ys=b.__private__.pdfEscape=b.pdfEscape=function(D,ce){return Ia(D,ce).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},XA=b.__private__.beginPage=function(D){Mt[++lt]=[],mt[lt]={objId:0,contentsObjId:0,userUnit:Number(o),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(D[0]),topRightY:Number(D[1])}},YA(lt),Ft(Mt[Ce])},rl=function(D,ce){var je,at,vt;switch(r=ce||r,typeof D=="string"&&(je=k(D.toLowerCase()),Array.isArray(je)&&(at=je[0],vt=je[1])),Array.isArray(D)&&(at=D[0]*ur,vt=D[1]*ur),isNaN(at)&&(at=a[0],vt=a[1]),(at>14400||vt>14400)&&(yi.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),at=Math.min(14400,at),vt=Math.min(14400,vt)),a=[at,vt],r.substr(0,1)){case"l":vt>at&&(a=[vt,at]);break;case"p":at>vt&&(a=[vt,at])}XA(a),ec(Fa),Ge(Cs),Pa!==0&&Ge(Pa+" J"),Jc!==0&&Ge(Jc+" j"),Me.publish("addPage",{pageNumber:lt})},Zc=function(D){D>0&&D<=lt&&(Mt.splice(D,1),mt.splice(D,1),lt--,Ce>lt&&(Ce=lt),this.setPage(Ce))},YA=function(D){D>0&&D<=lt&&(Ce=D)},Hu=b.__private__.getNumberOfPages=b.getNumberOfPages=function(){return Mt.length-1},aA=function(D,ce,je){var at,vt=void 0;return je=je||{},D=D!==void 0?D:_e[Yr].fontName,ce=ce!==void 0?ce:_e[Yr].fontStyle,at=D.toLowerCase(),Ne[at]!==void 0&&Ne[at][ce]!==void 0?vt=Ne[at][ce]:Ne[D]!==void 0&&Ne[D][ce]!==void 0?vt=Ne[D][ce]:je.disableWarning===!1&&yi.warn("Unable to look up font label for font '"+D+"', '"+ce+"'. Refer to getFontList() for available fonts."),vt||je.noFallback||(vt=Ne.times[ce])==null&&(vt=Ne.times.normal),vt},JA=b.__private__.putInfo=function(){var D=_r(),ce=function(at){return at};for(var je in C!==null&&(ce=ri.encryptor(D,0)),Ge("<<"),Ge("/Producer ("+Ys(ce("jsPDF "+Xr.version))+")"),zr)zr.hasOwnProperty(je)&&zr[je]&&Ge("/"+je.substr(0,1).toUpperCase()+je.substr(1)+" ("+Ys(ce(zr[je]))+")");Ge("/CreationDate ("+Ys(ce(st))+")"),Ge(">>"),Ge("endobj")},Js=b.__private__.putCatalog=function(D){var ce=(D=D||{}).rootDictionaryObjId||Xn;switch(_r(),Ge("<<"),Ge("/Type /Catalog"),Ge("/Pages "+ce+" 0 R"),lr||(lr="fullwidth"),lr){case"fullwidth":Ge("/OpenAction [3 0 R /FitH null]");break;case"fullheight":Ge("/OpenAction [3 0 R /FitV null]");break;case"fullpage":Ge("/OpenAction [3 0 R /Fit]");break;case"original":Ge("/OpenAction [3 0 R /XYZ null null 1]");break;default:var je=""+lr;je.substr(je.length-1)==="%"&&(lr=parseInt(lr)/100),typeof lr=="number"&&Ge("/OpenAction [3 0 R /XYZ null null "+Ue(lr)+"]")}switch(Lr||(Lr="continuous"),Lr){case"continuous":Ge("/PageLayout /OneColumn");break;case"single":Ge("/PageLayout /SinglePage");break;case"two":case"twoleft":Ge("/PageLayout /TwoColumnLeft");break;case"tworight":Ge("/PageLayout /TwoColumnRight")}Dr&&Ge("/PageMode /"+Dr),Me.publish("putCatalog"),Ge(">>"),Ge("endobj")},an=b.__private__.putTrailer=function(){Ge("trailer"),Ge("<<"),Ge("/Size "+(nt+1)),Ge("/Root "+nt+" 0 R"),Ge("/Info "+(nt-1)+" 0 R"),C!==null&&Ge("/Encrypt "+ri.oid+" 0 R"),Ge("/ID [ <"+Ze+"> <"+Ze+"> ]"),Ge(">>")},ia=b.__private__.putHeader=function(){Ge("%PDF-"+N),Ge("%ºß¬à")},sa=b.__private__.putXRef=function(){var D="0000000000";Ge("xref"),Ge("0 "+(nt+1)),Ge("0000000000 65535 f ");for(var ce=1;ce<=nt;ce++)typeof Xe[ce]=="function"?Ge((D+Xe[ce]()).slice(-10)+" 00000 n "):Xe[ce]!==void 0?Ge((D+Xe[ce]).slice(-10)+" 00000 n "):Ge("0000000000 00000 n ")},Rs=b.__private__.buildDocument=function(){vr(),Ft(pt),Me.publish("buildDocument"),ia(),zi(),$c(),Gc(),C!==null&&$n(),JA(),Js();var D=dt;return sa(),an(),Ge("startxref"),Ge(""+D),Ge("%%EOF"),Ft(Mt[Ce]),pt.join(`
`)},Pl=b.__private__.getBlob=function(D){return new Blob([pr(D)],{type:"application/pdf"})},Ll=b.output=b.__private__.output=To(function(D,ce){switch(typeof(ce=ce||{})=="string"?ce={filename:ce}:ce.filename=ce.filename||"generated.pdf",D){case void 0:return Rs();case"save":b.save(ce.filename);break;case"arraybuffer":return pr(Rs());case"blob":return Pl(Rs());case"bloburi":case"bloburl":if(tn.URL!==void 0&&typeof tn.URL.createObjectURL=="function")return tn.URL&&tn.URL.createObjectURL(Pl(Rs()))||void 0;yi.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var je="",at=Rs();try{je=vB(at)}catch{je=vB(unescape(encodeURIComponent(at)))}return"data:application/pdf;filename="+ce.filename+";base64,"+je;case"pdfobjectnewwindow":if(Object.prototype.toString.call(tn)==="[object Window]"){var vt="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",Ut=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';ce.pdfObjectUrl&&(vt=ce.pdfObjectUrl,Ut="");var Wt='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+vt+'"'+Ut+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(ce)+");<\/script></body></html>",gr=tn.open();return gr!==null&&gr.document.write(Wt),gr}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(tn)==="[object Window]"){var Mr='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(ce.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+ce.filename+'" width="500px" height="400px" /></body></html>',en=tn.open();if(en!==null){en.document.write(Mr);var Wr=this;en.document.documentElement.querySelector("#pdfViewer").onload=function(){en.document.title=ce.filename,en.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(Wr.output("bloburl"))}}return en}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(tn)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var nn='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",ce)+'"></iframe></body></html>',hi=tn.open();if(hi!==null&&(hi.document.write(nn),hi.document.title=ce.filename),hi||typeof safari>"u")return hi;break;case"datauri":case"dataurl":return tn.document.location.href=this.output("datauristring",ce);default:return null}}),Ns=function(D){return Array.isArray(Nt)===!0&&Nt.indexOf(D)>-1};switch(i){case"pt":ur=1;break;case"mm":ur=72/25.4;break;case"cm":ur=72/2.54;break;case"in":ur=72;break;case"px":ur=Ns("px_scaling")==1?.75:96/72;break;case"pc":case"em":ur=12;break;case"ex":ur=6;break;default:if(typeof i!="number")throw new Error("Invalid unit: "+i);ur=i}var ri=null;Lt(),Le();var ln=function(D){return C!==null?ri.encryptor(D,0):function(ce){return ce}},Ml=b.__private__.getPageInfo=b.getPageInfo=function(D){if(isNaN(D)||D%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:mt[D].objId,pageNumber:D,pageContext:mt[D]}},qr=b.__private__.getPageInfoByObjId=function(D){if(isNaN(D)||D%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var ce in mt)if(mt[ce].objId===D)break;return Ml(ce)},Wc=b.__private__.getCurrentPageInfo=b.getCurrentPageInfo=function(){return{objId:mt[Ce].objId,pageNumber:Ce,pageContext:mt[Ce]}};b.addPage=function(){return rl.apply(this,arguments),this},b.setPage=function(){return YA.apply(this,arguments),Ft.call(this,Mt[Ce]),this},b.insertPage=function(D){return this.addPage(),this.movePage(Ce,D),this},b.movePage=function(D,ce){var je,at;if(D>ce){je=Mt[D],at=mt[D];for(var vt=D;vt>ce;vt--)Mt[vt]=Mt[vt-1],mt[vt]=mt[vt-1];Mt[ce]=je,mt[ce]=at,this.setPage(ce)}else if(D<ce){je=Mt[D],at=mt[D];for(var Ut=D;Ut<ce;Ut++)Mt[Ut]=Mt[Ut+1],mt[Ut]=mt[Ut+1];Mt[ce]=je,mt[ce]=at,this.setPage(ce)}return this},b.deletePage=function(){return Zc.apply(this,arguments),this},b.__private__.text=b.text=function(D,ce,je,at,vt){var Ut,Wt,gr,Mr,en,Wr,nn,hi,ni,ii=(at=at||{}).scope||this;if(typeof D=="number"&&typeof ce=="number"&&(typeof je=="string"||Array.isArray(je))){var Ri=je;je=ce,ce=D,D=Ri}if(arguments[3]instanceof qt?(ae("The transform parameter of text() with a Matrix value"),ni=vt):(gr=arguments[4],Mr=arguments[5],ei(nn=arguments[3])==="object"&&nn!==null||(typeof gr=="string"&&(Mr=gr,gr=null),typeof nn=="string"&&(Mr=nn,nn=null),typeof nn=="number"&&(gr=nn,nn=null),at={flags:nn,angle:gr,align:Mr})),isNaN(ce)||isNaN(je)||D==null)throw new Error("Invalid arguments passed to jsPDF.text");if(D.length===0)return ii;var Vi="",Ds=!1,to=typeof at.lineHeightFactor=="number"?at.lineHeightFactor:Ii,Qs=ii.internal.scaleFactor;function ju(Vn){return Vn=Vn.split("	").join(Array(at.TabLen||9).join(" ")),Ys(Vn,nn)}function tc(Vn){for(var Kn,pi=Vn.concat(),Jn=[],Uo=pi.length;Uo--;)typeof(Kn=pi.shift())=="string"?Jn.push(Kn):Array.isArray(Vn)&&(Kn.length===1||Kn[1]===void 0&&Kn[2]===void 0)?Jn.push(Kn[0]):Jn.push([Kn[0],Kn[1],Kn[2]]);return Jn}function tu(Vn,Kn){var pi;if(typeof Vn=="string")pi=Kn(Vn)[0];else if(Array.isArray(Vn)){for(var Jn,Uo,Ol=Vn.concat(),Na=[],Al=Ol.length;Al--;)typeof(Jn=Ol.shift())=="string"?Na.push(Kn(Jn)[0]):Array.isArray(Jn)&&typeof Jn[0]=="string"&&(Uo=Kn(Jn[0],Jn[1],Jn[2]),Na.push([Uo[0],Uo[1],Uo[2]]));pi=Na}return pi}var sl=!1,cA=!0;if(typeof D=="string")sl=!0;else if(Array.isArray(D)){var rc=D.concat();Wt=[];for(var uA,Ki=rc.length;Ki--;)(typeof(uA=rc.shift())!="string"||Array.isArray(uA)&&typeof uA[0]!="string")&&(cA=!1);sl=cA}if(sl===!1)throw new Error('Type of text must be string or Array. "'+D+'" is not recognized.');typeof D=="string"&&(D=D.match(/[\r?\n]/)?D.split(/\r\n|\r|\n/g):[D]);var Nl=ar/ii.internal.scaleFactor,Mo=Nl*(to-1);switch(at.baseline){case"bottom":je-=Mo;break;case"top":je+=Nl-Mo;break;case"hanging":je+=Nl-2*Mo;break;case"middle":je+=Nl/2-Mo}if((Wr=at.maxWidth||0)>0&&(typeof D=="string"?D=ii.splitTextToSize(D,Wr):Object.prototype.toString.call(D)==="[object Array]"&&(D=D.reduce(function(Vn,Kn){return Vn.concat(ii.splitTextToSize(Kn,Wr))},[]))),Ut={text:D,x:ce,y:je,options:at,mutex:{pdfEscape:Ys,activeFontKey:Yr,fonts:_e,activeFontSize:ar}},Me.publish("preProcessText",Ut),D=Ut.text,gr=(at=Ut.options).angle,!(ni instanceof qt)&&gr&&typeof gr=="number"){gr*=Math.PI/180,at.rotationDirection===0&&(gr=-gr),V===R.ADVANCED&&(gr=-gr);var hA=Math.cos(gr),dA=Math.sin(gr);ni=new qt(hA,dA,-dA,hA,0,0)}else gr&&gr instanceof qt&&(ni=gr);V!==R.ADVANCED||ni||(ni=jr),(en=at.charSpace||Ta)!==void 0&&(Vi+=ue(de(en))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(hi=at.horizontalScale)!==void 0&&(Vi+=ue(100*hi)+` Tz
`),at.lang;var Gi=-1,hd=at.renderingMode!==void 0?at.renderingMode:at.stroke,Dl=ii.internal.getCurrentPageInfo().pageContext;switch(hd){case 0:case!1:case"fill":Gi=0;break;case 1:case!0:case"stroke":Gi=1;break;case 2:case"fillThenStroke":Gi=2;break;case 3:case"invisible":Gi=3;break;case 4:case"fillAndAddForClipping":Gi=4;break;case 5:case"strokeAndAddPathForClipping":Gi=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":Gi=6;break;case 7:case"addToPathForClipping":Gi=7}var Vu=Dl.usedRenderingMode!==void 0?Dl.usedRenderingMode:-1;Gi!==-1?Vi+=Gi+` Tr
`:Vu!==-1&&(Vi+=`0 Tr
`),Gi!==-1&&(Dl.usedRenderingMode=Gi),Mr=at.align||"left";var yo,fA=ar*to,ru=ii.internal.pageSize.getWidth(),nu=_e[Yr];en=at.charSpace||Ta,Wr=at.maxWidth||0,nn=Object.assign({autoencode:!0,noBOM:!0},at.flags);var ka=[],hn=function(Vn){return ii.getStringUnitWidth(Vn,{font:nu,charSpace:en,fontSize:ar,doKerning:!1})*ar/Qs};if(Object.prototype.toString.call(D)==="[object Array]"){var hs;Wt=tc(D),Mr!=="left"&&(yo=Wt.map(hn));var di,Ua=0;if(Mr==="right"){ce-=yo[0],D=[],Ki=Wt.length;for(var aa=0;aa<Ki;aa++)aa===0?(di=eo(ce),hs=mo(je)):(di=de(Ua-yo[aa]),hs=-fA),D.push([Wt[aa],di,hs]),Ua=yo[aa]}else if(Mr==="center"){ce-=yo[0]/2,D=[],Ki=Wt.length;for(var la=0;la<Ki;la++)la===0?(di=eo(ce),hs=mo(je)):(di=de((Ua-yo[la])/2),hs=-fA),D.push([Wt[la],di,hs]),Ua=yo[la]}else if(Mr==="left"){D=[],Ki=Wt.length;for(var pA=0;pA<Ki;pA++)D.push(Wt[pA])}else if(Mr==="justify"&&nu.encoding==="Identity-H"){D=[],Ki=Wt.length,Wr=Wr!==0?Wr:ru;for(var Aa=0,jn=0;jn<Ki;jn++)if(hs=jn===0?mo(je):-fA,di=jn===0?eo(ce):Aa,jn<Ki-1){var mA=de((Wr-yo[jn])/(Wt[jn].split(" ").length-1)),Os=Wt[jn].split(" ");D.push([Os[0]+" ",di,hs]),Aa=0;for(var ko=1;ko<Os.length;ko++){var nc=(hn(Os[ko-1]+" "+Os[ko])-hn(Os[ko]))*Qs+mA;ko==Os.length-1?D.push([Os[ko],nc,0]):D.push([Os[ko]+" ",nc,0]),Aa-=nc}}else D.push([Wt[jn],di,hs]);D.push(["",Aa,0])}else{if(Mr!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(D=[],Ki=Wt.length,Wr=Wr!==0?Wr:ru,jn=0;jn<Ki;jn++)hs=jn===0?mo(je):-fA,di=jn===0?eo(ce):0,jn<Ki-1?ka.push(ue(de((Wr-yo[jn])/(Wt[jn].split(" ").length-1)))):ka.push(0),D.push([Wt[jn],di,hs])}}var Ku=typeof at.R2L=="boolean"?at.R2L:br;Ku===!0&&(D=tu(D,function(Vn,Kn,pi){return[Vn.split("").reverse().join(""),Kn,pi]})),Ut={text:D,x:ce,y:je,options:at,mutex:{pdfEscape:Ys,activeFontKey:Yr,fonts:_e,activeFontSize:ar}},Me.publish("postProcessText",Ut),D=Ut.text,Ds=Ut.mutex.isHex||!1;var ic=_e[Yr].encoding;ic!=="WinAnsiEncoding"&&ic!=="StandardEncoding"||(D=tu(D,function(Vn,Kn,pi){return[ju(Vn),Kn,pi]})),Wt=tc(D),D=[];for(var gA,Ql,ca,Ra=0,ol=1,al=Array.isArray(Wt[0])?ol:Ra,ro="",ll=function(Vn,Kn,pi){var Jn="";return pi instanceof qt?(pi=typeof at.angle=="number"?Jr(pi,new qt(1,0,0,1,Vn,Kn)):Jr(new qt(1,0,0,1,Vn,Kn),pi),V===R.ADVANCED&&(pi=Jr(new qt(1,0,0,-1,0,0),pi)),Jn=pi.join(" ")+` Tm
`):Jn=ue(Vn)+" "+ue(Kn)+` Td
`,Jn},ds=0;ds<Wt.length;ds++){switch(ro="",al){case ol:ca=(Ds?"<":"(")+Wt[ds][0]+(Ds?">":")"),gA=parseFloat(Wt[ds][1]),Ql=parseFloat(Wt[ds][2]);break;case Ra:ca=(Ds?"<":"(")+Wt[ds]+(Ds?">":")"),gA=eo(ce),Ql=mo(je)}ka!==void 0&&ka[ds]!==void 0&&(ro=ka[ds]+` Tw
`),ds===0?D.push(ro+ll(gA,Ql,ni)+ca):al===Ra?D.push(ro+ca):al===ol&&D.push(ro+ll(gA,Ql,ni)+ca)}D=al===Ra?D.join(` Tj
T* `):D.join(` Tj
`),D+=` Tj
`;var fi=`BT
/`;return fi+=Yr+" "+ar+` Tf
`,fi+=ue(ar*to)+` TL
`,fi+=Po+`
`,fi+=Vi,fi+=D,Ge(fi+="ET"),F[Yr]=!0,ii};var ts=b.__private__.clip=b.clip=function(D){return Ge(D==="evenodd"?"W*":"W"),this};b.clipEvenOdd=function(){return ts("evenodd")},b.__private__.discardPath=b.discardPath=function(){return Ge("n"),this};var Un=b.__private__.isValidStyle=function(D){var ce=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(D)!==-1&&(ce=!0),ce};b.__private__.setDefaultPathOperation=b.setDefaultPathOperation=function(D){return Un(D)&&(y=D),this};var Hi=b.__private__.getStyle=b.getStyle=function(D){var ce=y;switch(D){case"D":case"S":ce="S";break;case"F":ce="f";break;case"FD":case"DF":ce="B";break;case"f":case"f*":case"B":case"B*":ce=D}return ce},Ei=b.close=function(){return Ge("h"),this};b.stroke=function(){return Ge("S"),this},b.fill=function(D){return Rn("f",D),this},b.fillEvenOdd=function(D){return Rn("f*",D),this},b.fillStroke=function(D){return Rn("B",D),this},b.fillStrokeEvenOdd=function(D){return Rn("B*",D),this};var Rn=function(D,ce){ei(ce)==="object"?Bs(ce,D):Ge(D)},kl=function(D){D===null||V===R.ADVANCED&&D===void 0||(D=Hi(D),Ge(D))};function An(D,ce,je,at,vt){var Ut=new vp(ce||this.boundingBox,je||this.xStep,at||this.yStep,this.gState,vt||this.matrix);Ut.stream=this.stream;var Wt=D+"$$"+this.cloneIndex+++"$$";return Nr(Wt,Ut),Ut}var Bs=function(D,ce){var je=yt[D.key],at=tt[je];if(at instanceof Ud)Ge("q"),Ge(Gr(ce)),at.gState&&b.setGState(at.gState),Ge(D.matrix.toString()+" cm"),Ge("/"+je+" sh"),Ge("Q");else if(at instanceof vp){var vt=new qt(1,0,0,-1,0,Lo());D.matrix&&(vt=vt.multiply(D.matrix||jr),je=An.call(at,D.key,D.boundingBox,D.xStep,D.yStep,vt).id),Ge("q"),Ge("/Pattern cs"),Ge("/"+je+" scn"),at.gState&&b.setGState(at.gState),Ge(ce),Ge("Q")}},Gr=function(D){switch(D){case"f":case"F":return"W n";case"f*":return"W* n";case"B":return"W S";case"B*":return"W* S";case"S":return"W S";case"n":return"W n"}},Zr=b.moveTo=function(D,ce){return Ge(ue(de(D))+" "+ue(we(ce))+" m"),this},fo=b.lineTo=function(D,ce){return Ge(ue(de(D))+" "+ue(we(ce))+" l"),this},Tr=b.curveTo=function(D,ce,je,at,vt,Ut){return Ge([ue(de(D)),ue(we(ce)),ue(de(je)),ue(we(at)),ue(de(vt)),ue(we(Ut)),"c"].join(" ")),this};b.__private__.line=b.line=function(D,ce,je,at,vt){if(isNaN(D)||isNaN(ce)||isNaN(je)||isNaN(at)||!Un(vt))throw new Error("Invalid arguments passed to jsPDF.line");return V===R.COMPAT?this.lines([[je-D,at-ce]],D,ce,[1,1],vt||"S"):this.lines([[je-D,at-ce]],D,ce,[1,1]).stroke()},b.__private__.lines=b.lines=function(D,ce,je,at,vt,Ut){var Wt,gr,Mr,en,Wr,nn,hi,ni,ii,Ri,Vi,Ds;if(typeof D=="number"&&(Ds=je,je=ce,ce=D,D=Ds),at=at||[1,1],Ut=Ut||!1,isNaN(ce)||isNaN(je)||!Array.isArray(D)||!Array.isArray(at)||!Un(vt)||typeof Ut!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(Zr(ce,je),Wt=at[0],gr=at[1],en=D.length,Ri=ce,Vi=je,Mr=0;Mr<en;Mr++)(Wr=D[Mr]).length===2?(Ri=Wr[0]*Wt+Ri,Vi=Wr[1]*gr+Vi,fo(Ri,Vi)):(nn=Wr[0]*Wt+Ri,hi=Wr[1]*gr+Vi,ni=Wr[2]*Wt+Ri,ii=Wr[3]*gr+Vi,Ri=Wr[4]*Wt+Ri,Vi=Wr[5]*gr+Vi,Tr(nn,hi,ni,ii,Ri,Vi));return Ut&&Ei(),kl(vt),this},b.path=function(D){for(var ce=0;ce<D.length;ce++){var je=D[ce],at=je.c;switch(je.op){case"m":Zr(at[0],at[1]);break;case"l":fo(at[0],at[1]);break;case"c":Tr.apply(this,at);break;case"h":Ei()}}return this},b.__private__.rect=b.rect=function(D,ce,je,at,vt){if(isNaN(D)||isNaN(ce)||isNaN(je)||isNaN(at)||!Un(vt))throw new Error("Invalid arguments passed to jsPDF.rect");return V===R.COMPAT&&(at=-at),Ge([ue(de(D)),ue(we(ce)),ue(de(je)),ue(de(at)),"re"].join(" ")),kl(vt),this},b.__private__.triangle=b.triangle=function(D,ce,je,at,vt,Ut,Wt){if(isNaN(D)||isNaN(ce)||isNaN(je)||isNaN(at)||isNaN(vt)||isNaN(Ut)||!Un(Wt))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[je-D,at-ce],[vt-je,Ut-at],[D-vt,ce-Ut]],D,ce,[1,1],Wt,!0),this},b.__private__.roundedRect=b.roundedRect=function(D,ce,je,at,vt,Ut,Wt){if(isNaN(D)||isNaN(ce)||isNaN(je)||isNaN(at)||isNaN(vt)||isNaN(Ut)||!Un(Wt))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var gr=4/3*(Math.SQRT2-1);return vt=Math.min(vt,.5*je),Ut=Math.min(Ut,.5*at),this.lines([[je-2*vt,0],[vt*gr,0,vt,Ut-Ut*gr,vt,Ut],[0,at-2*Ut],[0,Ut*gr,-vt*gr,Ut,-vt,Ut],[2*vt-je,0],[-vt*gr,0,-vt,-Ut*gr,-vt,-Ut],[0,2*Ut-at],[0,-Ut*gr,vt*gr,-Ut,vt,-Ut]],D+vt,ce,[1,1],Wt,!0),this},b.__private__.ellipse=b.ellipse=function(D,ce,je,at,vt){if(isNaN(D)||isNaN(ce)||isNaN(je)||isNaN(at)||!Un(vt))throw new Error("Invalid arguments passed to jsPDF.ellipse");var Ut=4/3*(Math.SQRT2-1)*je,Wt=4/3*(Math.SQRT2-1)*at;return Zr(D+je,ce),Tr(D+je,ce-Wt,D+Ut,ce-at,D,ce-at),Tr(D-Ut,ce-at,D-je,ce-Wt,D-je,ce),Tr(D-je,ce+Wt,D-Ut,ce+at,D,ce+at),Tr(D+Ut,ce+at,D+je,ce+Wt,D+je,ce),kl(vt),this},b.__private__.circle=b.circle=function(D,ce,je,at){if(isNaN(D)||isNaN(ce)||isNaN(je)||!Un(at))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(D,ce,je,je,at)},b.setFont=function(D,ce,je){return je&&(ce=fe(ce,je)),Yr=aA(D,ce,{disableWarning:!1}),this};var nl=b.__private__.getFont=b.getFont=function(){return _e[aA.apply(b,arguments)]};b.__private__.getFontList=b.getFontList=function(){var D,ce,je={};for(D in Ne)if(Ne.hasOwnProperty(D))for(ce in je[D]=[],Ne[D])Ne[D].hasOwnProperty(ce)&&je[D].push(ce);return je},b.addFont=function(D,ce,je,at,vt){var Ut=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&Ut.indexOf(arguments[3])!==-1?vt=arguments[3]:arguments[3]&&Ut.indexOf(arguments[3])==-1&&(je=fe(je,at)),vt=vt||"Identity-H",Ea.call(this,D,ce,je,vt)};var Ii,Fa=e.lineWidth||.200025,ji=b.__private__.getLineWidth=b.getLineWidth=function(){return Fa},ec=b.__private__.setLineWidth=b.setLineWidth=function(D){return Fa=D,Ge(ue(de(D))+" w"),this};b.__private__.setLineDash=Xr.API.setLineDash=Xr.API.setLineDashPattern=function(D,ce){if(D=D||[],ce=ce||0,isNaN(ce)||!Array.isArray(D))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return D=D.map(function(je){return ue(de(je))}).join(" "),ce=ue(de(ce)),Ge("["+D+"] "+ce+" d"),this};var po=b.__private__.getLineHeight=b.getLineHeight=function(){return ar*Ii};b.__private__.getLineHeight=b.getLineHeight=function(){return ar*Ii};var Xc=b.__private__.setLineHeightFactor=b.setLineHeightFactor=function(D){return typeof(D=D||1.15)=="number"&&(Ii=D),this},Yc=b.__private__.getLineHeightFactor=b.getLineHeightFactor=function(){return Ii};Xc(e.lineHeight);var eo=b.__private__.getHorizontalCoordinate=function(D){return de(D)},mo=b.__private__.getVerticalCoordinate=function(D){return V===R.ADVANCED?D:mt[Ce].mediaBox.topRightY-mt[Ce].mediaBox.bottomLeftY-de(D)},go=b.__private__.getHorizontalCoordinateString=b.getHorizontalCoordinateString=function(D){return ue(eo(D))},Yn=b.__private__.getVerticalCoordinateString=b.getVerticalCoordinateString=function(D){return ue(mo(D))},Cs=e.strokeColor||"0 G";b.__private__.getStrokeColor=b.getDrawColor=function(){return es(Cs)},b.__private__.setStrokeColor=b.setDrawColor=function(D,ce,je,at){return Cs=cs({ch1:D,ch2:ce,ch3:je,ch4:at,pdfColorType:"draw",precision:2}),Ge(Cs),this};var il=e.fillColor||"0 g";b.__private__.getFillColor=b.getFillColor=function(){return es(il)},b.__private__.setFillColor=b.setFillColor=function(D,ce,je,at){return il=cs({ch1:D,ch2:ce,ch3:je,ch4:at,pdfColorType:"fill",precision:2}),Ge(il),this};var Po=e.textColor||"0 g",vi=b.__private__.getTextColor=b.getTextColor=function(){return es(Po)};b.__private__.setTextColor=b.setTextColor=function(D,ce,je,at){return Po=cs({ch1:D,ch2:ce,ch3:je,ch4:at,pdfColorType:"text",precision:3}),this};var Ta=e.charSpace,Ul=b.__private__.getCharSpace=b.getCharSpace=function(){return parseFloat(Ta||0)};b.__private__.setCharSpace=b.setCharSpace=function(D){if(isNaN(D))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return Ta=D,this};var Pa=0;b.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},b.__private__.setLineCap=b.setLineCap=function(D){var ce=b.CapJoinStyles[D];if(ce===void 0)throw new Error("Line cap style of '"+D+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Pa=ce,Ge(ce+" J"),this};var Jc=0;b.__private__.setLineJoin=b.setLineJoin=function(D){var ce=b.CapJoinStyles[D];if(ce===void 0)throw new Error("Line join style of '"+D+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Jc=ce,Ge(ce+" j"),this},b.__private__.setLineMiterLimit=b.__private__.setMiterLimit=b.setLineMiterLimit=b.setMiterLimit=function(D){if(D=D||0,isNaN(D))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return Ge(ue(de(D))+" M"),this},b.GState=D1,b.setGState=function(D){(D=typeof D=="string"?rt[It[D]]:oa(null,D)).equals(Ct)||(Ge("/"+D.id+" gs"),Ct=D)};var oa=function(D,ce){if(!D||!It[D]){var je=!1;for(var at in rt)if(rt.hasOwnProperty(at)&&rt[at].equals(ce)){je=!0;break}if(je)ce=rt[at];else{var vt="GS"+(Object.keys(rt).length+1).toString(10);rt[vt]=ce,ce.id=vt}return D&&(It[D]=ce.id),Me.publish("addGState",ce),ce}};b.addGState=function(D,ce){return oa(D,ce),this},b.saveGraphicsState=function(){return Ge("q"),et.push({key:Yr,size:ar,color:Po}),this},b.restoreGraphicsState=function(){Ge("Q");var D=et.pop();return Yr=D.key,ar=D.size,Po=D.color,Ct=null,this},b.setCurrentTransformationMatrix=function(D){return Ge(D.toString()+" cm"),this},b.comment=function(D){return Ge("#"+D),this};var La=function(D,ce){var je=D||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return je},set:function(Ut){isNaN(Ut)||(je=parseFloat(Ut))}});var at=ce||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return at},set:function(Ut){isNaN(Ut)||(at=parseFloat(Ut))}});var vt="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return vt},set:function(Ut){vt=Ut.toString()}}),this},lA=function(D,ce,je,at){La.call(this,D,ce),this.type="rect";var vt=je||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return vt},set:function(Wt){isNaN(Wt)||(vt=parseFloat(Wt))}});var Ut=at||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return Ut},set:function(Wt){isNaN(Wt)||(Ut=parseFloat(Wt))}}),this},eu=function(){this.page=lt,this.currentPage=Ce,this.pages=Mt.slice(0),this.pagesContext=mt.slice(0),this.x=ct,this.y=Ae,this.matrix=me,this.width=Ui(Ce),this.height=Lo(Ce),this.outputDestination=jt,this.id="",this.objectNumber=-1};eu.prototype.restore=function(){lt=this.page,Ce=this.currentPage,mt=this.pagesContext,Mt=this.pages,ct=this.x,Ae=this.y,me=this.matrix,AA(Ce,this.width),Ma(Ce,this.height),jt=this.outputDestination};var rs=function(D,ce,je,at,vt){Ar.push(new eu),lt=Ce=0,Mt=[],ct=D,Ae=ce,me=vt,XA([je,at])},Rl=function(D){if(tr[D])Ar.pop().restore();else{var ce=new eu,je="Xo"+(Object.keys(nr).length+1).toString(10);ce.id=je,tr[D]=je,nr[je]=ce,Me.publish("addFormObject",ce),Ar.pop().restore()}};for(var ns in b.beginFormObject=function(D,ce,je,at,vt){return rs(D,ce,je,at,vt),this},b.endFormObject=function(D){return Rl(D),this},b.doFormObject=function(D,ce){var je=nr[tr[D]];return Ge("q"),Ge(ce.toString()+" cm"),Ge("/"+je.id+" Do"),Ge("Q"),this},b.getFormObject=function(D){var ce=nr[tr[D]];return{x:ce.x,y:ce.y,width:ce.width,height:ce.height,matrix:ce.matrix}},b.save=function(D,ce){return D=D||"generated.pdf",(ce=ce||{}).returnPromise=ce.returnPromise||!1,ce.returnPromise===!1?(Md(Pl(Rs()),D),typeof Md.unload=="function"&&tn.setTimeout&&setTimeout(Md.unload,911),this):new Promise(function(je,at){try{var vt=Md(Pl(Rs()),D);typeof Md.unload=="function"&&tn.setTimeout&&setTimeout(Md.unload,911),je(vt)}catch(Ut){at(Ut.message)}})},Xr.API)Xr.API.hasOwnProperty(ns)&&(ns==="events"&&Xr.API.events.length?function(D,ce){var je,at,vt;for(vt=ce.length-1;vt!==-1;vt--)je=ce[vt][0],at=ce[vt][1],D.subscribe.apply(D,[je].concat(typeof at=="function"?[at]:at))}(Me,Xr.API.events):b[ns]=Xr.API[ns]);var Ui=b.getPageWidth=function(D){return(mt[D=D||Ce].mediaBox.topRightX-mt[D].mediaBox.bottomLeftX)/ur},AA=b.setPageWidth=function(D,ce){mt[D].mediaBox.topRightX=ce*ur+mt[D].mediaBox.bottomLeftX},Lo=b.getPageHeight=function(D){return(mt[D=D||Ce].mediaBox.topRightY-mt[D].mediaBox.bottomLeftY)/ur},Ma=b.setPageHeight=function(D,ce){mt[D].mediaBox.topRightY=ce*ur+mt[D].mediaBox.bottomLeftY};return b.internal={pdfEscape:Ys,getStyle:Hi,getFont:nl,getFontSize:cr,getCharSpace:Ul,getTextColor:vi,getLineHeight:po,getLineHeightFactor:Yc,getLineWidth:ji,write:Cr,getHorizontalCoordinate:eo,getVerticalCoordinate:mo,getCoordinateString:go,getVerticalCoordinateString:Yn,collections:{},newObject:_r,newAdditionalObject:Yt,newObjectDeferred:Ur,newObjectDeferredBegin:Ln,getFilters:Jt,putStream:Qr,events:Me,scaleFactor:ur,pageSize:{getWidth:function(){return Ui(Ce)},setWidth:function(D){AA(Ce,D)},getHeight:function(){return Lo(Ce)},setHeight:function(D){Ma(Ce,D)}},encryptionOptions:C,encryption:ri,getEncryptor:ln,output:Ll,getNumberOfPages:Hu,pages:Mt,out:Ge,f2:Ue,f3:te,getPageInfo:Ml,getPageInfoByObjId:qr,getCurrentPageInfo:Wc,getPDFVersion:U,Point:La,Rectangle:lA,Matrix:qt,hasHotfix:Ns},Object.defineProperty(b.internal.pageSize,"width",{get:function(){return Ui(Ce)},set:function(D){AA(Ce,D)},enumerable:!0,configurable:!0}),Object.defineProperty(b.internal.pageSize,"height",{get:function(){return Lo(Ce)},set:function(D){Ma(Ce,D)},enumerable:!0,configurable:!0}),zu.call(b,Kt),Yr="F1",rl(a,r),Me.publish("initialized"),b}np.prototype.lsbFirstWord=function(e){return String.fromCharCode(e>>0&255,e>>8&255,e>>16&255,e>>24&255)},np.prototype.toHexString=function(e){return e.split("").map(function(t){return("0"+(255&t.charCodeAt(0)).toString(16)).slice(-2)}).join("")},np.prototype.hexToBytes=function(e){for(var t=[],r=0;r<e.length;r+=2)t.push(String.fromCharCode(parseInt(e.substr(r,2),16)));return t.join("")},np.prototype.processOwnerPassword=function(e,t){return wB(_B(t).substr(0,5),e)},np.prototype.encryptor=function(e,t){var r=_B(this.encryptionKey+String.fromCharCode(255&e,e>>8&255,e>>16&255,255&t,t>>8&255)).substr(0,10);return function(i){return wB(r,i)}},D1.prototype.equals=function(e){var t,r="id,objectNumber,equals";if(!e||ei(e)!==ei(this))return!1;var i=0;for(t in this)if(!(r.indexOf(t)>=0)){if(this.hasOwnProperty(t)&&!e.hasOwnProperty(t)||this[t]!==e[t])return!1;i++}for(t in e)e.hasOwnProperty(t)&&r.indexOf(t)<0&&i--;return i===0},Xr.API={events:[]},Xr.version="3.0.1";var ls=Xr.API,fC=1,yf=function(e){return e.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Yf=function(e){return e.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},cn=function(e){return e.toFixed(2)},dh=function(e){return e.toFixed(5)};ls.__acroform__={};var Ya=function(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e},yT=function(e){return e*fC},bc=function(e){var t=new _R,r=Pr.internal.getHeight(e)||0,i=Pr.internal.getWidth(e)||0;return t.BBox=[0,0,Number(cn(i)),Number(cn(r))],t},dte=ls.__acroform__.setBit=function(e,t){if(e=e||0,t=t||0,isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return e|=1<<t},fte=ls.__acroform__.clearBit=function(e,t){if(e=e||0,t=t||0,isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return e&=~(1<<t)},pte=ls.__acroform__.getBit=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return e&1<<t?1:0},ws=ls.__acroform__.getBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return pte(e,t-1)},xs=ls.__acroform__.setBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return dte(e,t-1)},bs=ls.__acroform__.clearBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return fte(e,t-1)},mte=ls.__acroform__.calculateCoordinates=function(e,t){var r=t.internal.getHorizontalCoordinate,i=t.internal.getVerticalCoordinate,a=e[0],u=e[1],h=e[2],o=e[3],g={};return g.lowerLeft_X=r(a)||0,g.lowerLeft_Y=i(u+o)||0,g.upperRight_X=r(a+h)||0,g.upperRight_Y=i(u)||0,[Number(cn(g.lowerLeft_X)),Number(cn(g.lowerLeft_Y)),Number(cn(g.upperRight_X)),Number(cn(g.upperRight_Y))]},gte=function(e){if(e.appearanceStreamContent)return e.appearanceStreamContent;if(e.V||e.DV){var t=[],r=e._V||e.DV,i=xB(e,r),a=e.scope.internal.getFont(e.fontName,e.fontStyle).id;t.push("/Tx BMC"),t.push("q"),t.push("BT"),t.push(e.scope.__private__.encodeColorString(e.color)),t.push("/"+a+" "+cn(i.fontSize)+" Tf"),t.push("1 0 0 1 0 0 Tm"),t.push(i.text),t.push("ET"),t.push("Q"),t.push("EMC");var u=bc(e);return u.scope=e.scope,u.stream=t.join(`
`),u}},xB=function(e,t){var r=e.fontSize===0?e.maxFontSize:e.fontSize,i={text:"",fontSize:""},a=(t=(t=t.substr(0,1)=="("?t.substr(1):t).substr(t.length-1)==")"?t.substr(0,t.length-1):t).split(" ");a=e.multiline?a.map(function(te){return te.split(`
`)}):a.map(function(te){return[te]});var u=r,h=Pr.internal.getHeight(e)||0;h=h<0?-h:h;var o=Pr.internal.getWidth(e)||0;o=o<0?-o:o;var g=function(te,de,Te){if(te+1<a.length){var we=de+" "+a[te+1][0];return av(we,e,Te).width<=o-4}return!1};u++;e:for(;u>0;){t="",u--;var y,C,I=av("3",e,u).height,F=e.multiline?h-u:(h-I)/2,b=F+=2,N=0,U=0,H=0;if(u<=0){t=`(...) Tj
`,t+="% Width of Text: "+av(t,e,u=12).width+", FieldWidth:"+o+`
`;break}for(var k="",R=0,V=0;V<a.length;V++)if(a.hasOwnProperty(V)){var W=!1;if(a[V].length!==1&&H!==a[V].length-1){if((I+2)*(R+2)+2>h)continue e;k+=a[V][H],W=!0,U=V,V--}else{k=(k+=a[V][H]+" ").substr(k.length-1)==" "?k.substr(0,k.length-1):k;var se=parseInt(V),fe=g(se,k,u),ue=V>=a.length-1;if(fe&&!ue){k+=" ",H=0;continue}if(fe||ue){if(ue)U=se;else if(e.multiline&&(I+2)*(R+2)+2>h)continue e}else{if(!e.multiline||(I+2)*(R+2)+2>h)continue e;U=se}}for(var ae="",Be=N;Be<=U;Be++){var Ue=a[Be];if(e.multiline){if(Be===U){ae+=Ue[H]+" ",H=(H+1)%Ue.length;continue}if(Be===N){ae+=Ue[Ue.length-1]+" ";continue}}ae+=Ue[0]+" "}switch(ae=ae.substr(ae.length-1)==" "?ae.substr(0,ae.length-1):ae,C=av(ae,e,u).width,e.textAlign){case"right":y=o-C-2;break;case"center":y=(o-C)/2;break;case"left":default:y=2}t+=cn(y)+" "+cn(b)+` Td
`,t+="("+yf(ae)+`) Tj
`,t+=-cn(y)+` 0 Td
`,b=-(u+2),C=0,N=W?U:U+1,R++,k=""}break}return i.text=t,i.fontSize=u,i},av=function(e,t,r){var i=t.scope.internal.getFont(t.fontName,t.fontStyle),a=t.scope.getStringUnitWidth(e,{font:i,fontSize:parseFloat(r),charSpace:0})*parseFloat(r);return{height:t.scope.getStringUnitWidth("3",{font:i,fontSize:parseFloat(r),charSpace:0})*parseFloat(r)*1.5,width:a}},yte={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},vte=function(e,t){var r={type:"reference",object:e};t.internal.getPageInfo(e.page).pageContext.annotations.find(function(i){return i.type===r.type&&i.object===r.object})===void 0&&t.internal.getPageInfo(e.page).pageContext.annotations.push(r)},_te=function(e,t){for(var r in e)if(e.hasOwnProperty(r)){var i=r,a=e[r];t.internal.newObjectDeferredBegin(a.objId,!0),ei(a)==="object"&&typeof a.putStream=="function"&&a.putStream(),delete e[i]}},wte=function(e,t){if(t.scope=e,e.internal!==void 0&&(e.internal.acroformPlugin===void 0||e.internal.acroformPlugin.isInitialized===!1)){if(ZA.FieldNum=0,e.internal.acroformPlugin=JSON.parse(JSON.stringify(yte)),e.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");fC=e.internal.scaleFactor,e.internal.acroformPlugin.acroFormDictionaryRoot=new wR,e.internal.acroformPlugin.acroFormDictionaryRoot.scope=e,e.internal.acroformPlugin.acroFormDictionaryRoot._eventID=e.internal.events.subscribe("postPutResources",function(){(function(r){r.internal.events.unsubscribe(r.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete r.internal.acroformPlugin.acroFormDictionaryRoot._eventID,r.internal.acroformPlugin.printedOut=!0})(e)}),e.internal.events.subscribe("buildDocument",function(){(function(r){r.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var i=r.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var a in i)if(i.hasOwnProperty(a)){var u=i[a];u.objId=void 0,u.hasAnnotation&&vte(u,r)}})(e)}),e.internal.events.subscribe("putCatalog",function(){(function(r){if(r.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");r.internal.write("/AcroForm "+r.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(e)}),e.internal.events.subscribe("postPutPages",function(r){(function(i,a){var u=!i;for(var h in i||(a.internal.newObjectDeferredBegin(a.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),a.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),i=i||a.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(i.hasOwnProperty(h)){var o=i[h],g=[],y=o.Rect;if(o.Rect&&(o.Rect=mte(o.Rect,a)),a.internal.newObjectDeferredBegin(o.objId,!0),o.DA=Pr.createDefaultAppearanceStream(o),ei(o)==="object"&&typeof o.getKeyValueListForStream=="function"&&(g=o.getKeyValueListForStream()),o.Rect=y,o.hasAppearanceStream&&!o.appearanceStreamContent){var C=gte(o);g.push({key:"AP",value:"<</N "+C+">>"}),a.internal.acroformPlugin.xForms.push(C)}if(o.appearanceStreamContent){var I="";for(var F in o.appearanceStreamContent)if(o.appearanceStreamContent.hasOwnProperty(F)){var b=o.appearanceStreamContent[F];if(I+="/"+F+" ",I+="<<",Object.keys(b).length>=1||Array.isArray(b)){for(var h in b)if(b.hasOwnProperty(h)){var N=b[h];typeof N=="function"&&(N=N.call(a,o)),I+="/"+h+" "+N+" ",a.internal.acroformPlugin.xForms.indexOf(N)>=0||a.internal.acroformPlugin.xForms.push(N)}}else typeof(N=b)=="function"&&(N=N.call(a,o)),I+="/"+h+" "+N,a.internal.acroformPlugin.xForms.indexOf(N)>=0||a.internal.acroformPlugin.xForms.push(N);I+=">>"}g.push({key:"AP",value:`<<
`+I+">>"})}a.internal.putStream({additionalKeyValues:g,objectId:o.objId}),a.internal.out("endobj")}u&&_te(a.internal.acroformPlugin.xForms,a)})(r,e)}),e.internal.acroformPlugin.isInitialized=!0}},vR=ls.__acroform__.arrayToPdfArray=function(e,t,r){var i=function(h){return h};if(Array.isArray(e)){for(var a="[",u=0;u<e.length;u++)switch(u!==0&&(a+=" "),ei(e[u])){case"boolean":case"number":case"object":a+=e[u].toString();break;case"string":e[u].substr(0,1)!=="/"?(t!==void 0&&r&&(i=r.internal.getEncryptor(t)),a+="("+yf(i(e[u].toString()))+")"):a+=e[u].toString()}return a+="]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},lb=function(e,t,r){var i=function(a){return a};return t!==void 0&&r&&(i=r.internal.getEncryptor(t)),(e=e||"").toString(),e="("+yf(i(e))+")"},Lc=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(e){this._objId=e}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};Lc.prototype.toString=function(){return this.objId+" 0 R"},Lc.prototype.putStream=function(){var e=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:e,objectId:this.objId}),this.scope.internal.out("endobj")},Lc.prototype.getKeyValueListForStream=function(){var e=[],t=Object.getOwnPropertyNames(this).filter(function(u){return u!="content"&&u!="appearanceStreamContent"&&u!="scope"&&u!="objId"&&u.substring(0,1)!="_"});for(var r in t)if(Object.getOwnPropertyDescriptor(this,t[r]).configurable===!1){var i=t[r],a=this[i];a&&(Array.isArray(a)?e.push({key:i,value:vR(a,this.objId,this.scope)}):a instanceof Lc?(a.scope=this.scope,e.push({key:i,value:a.objId+" 0 R"})):typeof a!="function"&&e.push({key:i,value:a}))}return e};var _R=function(){Lc.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var e,t=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return t},set:function(r){t=r}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(r){e=r.trim()},get:function(){return e||null}})};Ya(_R,Lc);var wR=function(){Lc.call(this);var e,t=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return t.length>0?t:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return t}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(e){var r=function(i){return i};return this.scope&&(r=this.scope.internal.getEncryptor(this.objId)),"("+yf(r(e))+")"}},set:function(r){e=r}})};Ya(wR,Lc);var ZA=function e(){Lc.call(this);var t=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return t},set:function(k){if(isNaN(k))throw new Error('Invalid value "'+k+'" for attribute F supplied.');t=k}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!ws(t,3)},set:function(k){k?this.F=xs(t,3):this.F=bs(t,3)}});var r=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return r},set:function(k){if(isNaN(k))throw new Error('Invalid value "'+k+'" for attribute Ff supplied.');r=k}});var i=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(i.length!==0)return i},set:function(k){i=k!==void 0?k:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!i||isNaN(i[0])?0:i[0]},set:function(k){i[0]=k}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!i||isNaN(i[1])?0:i[1]},set:function(k){i[1]=k}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!i||isNaN(i[2])?0:i[2]},set:function(k){i[2]=k}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!i||isNaN(i[3])?0:i[3]},set:function(k){i[3]=k}});var a="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return a},set:function(k){switch(k){case"/Btn":case"/Tx":case"/Ch":case"/Sig":a=k;break;default:throw new Error('Invalid value "'+k+'" for attribute FT supplied.')}}});var u=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!u||u.length<1){if(this instanceof Q1)return;u="FieldObject"+e.FieldNum++}var k=function(R){return R};return this.scope&&(k=this.scope.internal.getEncryptor(this.objId)),"("+yf(k(u))+")"},set:function(k){u=k.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return u},set:function(k){u=k}});var h="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return h},set:function(k){h=k}});var o="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return o},set:function(k){o=k}});var g=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return g},set:function(k){g=k}});var y=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return y===void 0?50/fC:y},set:function(k){y=k}});var C="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return C},set:function(k){C=k}});var I="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!I||this instanceof Q1||this instanceof tf))return lb(I,this.objId,this.scope)},set:function(k){k=k.toString(),I=k}});var F=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(F)return this instanceof uo?F:lb(F,this.objId,this.scope)},set:function(k){k=k.toString(),F=this instanceof uo?k:k.substr(0,1)==="("?Yf(k.substr(1,k.length-2)):Yf(k)}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof uo?Yf(F.substr(1,F.length-1)):F},set:function(k){k=k.toString(),F=this instanceof uo?"/"+k:k}});var b=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(b)return b},set:function(k){this.V=k}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(b)return this instanceof uo?b:lb(b,this.objId,this.scope)},set:function(k){k=k.toString(),b=this instanceof uo?k:k.substr(0,1)==="("?Yf(k.substr(1,k.length-2)):Yf(k)}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof uo?Yf(b.substr(1,b.length-1)):b},set:function(k){k=k.toString(),b=this instanceof uo?"/"+k:k}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var N,U=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return U},set:function(k){k=!!k,U=k}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(N)return N},set:function(k){N=k}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!ws(this.Ff,1)},set:function(k){k?this.Ff=xs(this.Ff,1):this.Ff=bs(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!ws(this.Ff,2)},set:function(k){k?this.Ff=xs(this.Ff,2):this.Ff=bs(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!ws(this.Ff,3)},set:function(k){k?this.Ff=xs(this.Ff,3):this.Ff=bs(this.Ff,3)}});var H=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(H!==null)return H},set:function(k){if([0,1,2].indexOf(k)===-1)throw new Error('Invalid value "'+k+'" for attribute Q supplied.');H=k}}),Object.defineProperty(this,"textAlign",{get:function(){var k;switch(H){case 0:default:k="left";break;case 1:k="center";break;case 2:k="right"}return k},configurable:!0,enumerable:!0,set:function(k){switch(k){case"right":case 2:H=2;break;case"center":case 1:H=1;break;case"left":case 0:default:H=0}}})};Ya(ZA,Lc);var kp=function(){ZA.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var e=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return e},set:function(r){e=r}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return e},set:function(r){e=r}});var t=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return vR(t,this.objId,this.scope)},set:function(r){var i,a;a=[],typeof(i=r)=="string"&&(a=function(u,h,o){o||(o=1);for(var g,y=[];g=h.exec(u);)y.push(g[o]);return y}(i,/\((.*?)\)/g)),t=a}}),this.getOptions=function(){return t},this.setOptions=function(r){t=r,this.sort&&t.sort()},this.addOption=function(r){r=(r=r||"").toString(),t.push(r),this.sort&&t.sort()},this.removeOption=function(r,i){for(i=i||!1,r=(r=r||"").toString();t.indexOf(r)!==-1&&(t.splice(t.indexOf(r),1),i!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!ws(this.Ff,18)},set:function(r){r?this.Ff=xs(this.Ff,18):this.Ff=bs(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!ws(this.Ff,19)},set:function(r){this.combo===!0&&(r?this.Ff=xs(this.Ff,19):this.Ff=bs(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!ws(this.Ff,20)},set:function(r){r?(this.Ff=xs(this.Ff,20),t.sort()):this.Ff=bs(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!ws(this.Ff,22)},set:function(r){r?this.Ff=xs(this.Ff,22):this.Ff=bs(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!ws(this.Ff,23)},set:function(r){r?this.Ff=xs(this.Ff,23):this.Ff=bs(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!ws(this.Ff,27)},set:function(r){r?this.Ff=xs(this.Ff,27):this.Ff=bs(this.Ff,27)}}),this.hasAppearanceStream=!1};Ya(kp,ZA);var Up=function(){kp.call(this),this.fontName="helvetica",this.combo=!1};Ya(Up,kp);var Rp=function(){Up.call(this),this.combo=!0};Ya(Rp,Up);var kv=function(){Rp.call(this),this.edit=!0};Ya(kv,Rp);var uo=function(){ZA.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!ws(this.Ff,15)},set:function(r){r?this.Ff=xs(this.Ff,15):this.Ff=bs(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!ws(this.Ff,16)},set:function(r){r?this.Ff=xs(this.Ff,16):this.Ff=bs(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!ws(this.Ff,17)},set:function(r){r?this.Ff=xs(this.Ff,17):this.Ff=bs(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!ws(this.Ff,26)},set:function(r){r?this.Ff=xs(this.Ff,26):this.Ff=bs(this.Ff,26)}});var e,t={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var r=function(u){return u};if(this.scope&&(r=this.scope.internal.getEncryptor(this.objId)),Object.keys(t).length!==0){var i,a=[];for(i in a.push("<<"),t)a.push("/"+i+" ("+yf(r(t[i]))+")");return a.push(">>"),a.join(`
`)}},set:function(r){ei(r)==="object"&&(t=r)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return t.CA||""},set:function(r){typeof r=="string"&&(t.CA=r)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return e},set:function(r){e=r}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return e.substr(1,e.length-1)},set:function(r){e="/"+r}})};Ya(uo,ZA);var Uv=function(){uo.call(this),this.pushButton=!0};Ya(Uv,uo);var Np=function(){uo.call(this),this.radio=!0,this.pushButton=!1;var e=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=t!==void 0?t:[]}})};Ya(Np,uo);var Q1=function(){var e,t;ZA.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return e},set:function(a){e=a}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return t},set:function(a){t=a}});var r,i={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var a=function(o){return o};this.scope&&(a=this.scope.internal.getEncryptor(this.objId));var u,h=[];for(u in h.push("<<"),i)h.push("/"+u+" ("+yf(a(i[u]))+")");return h.push(">>"),h.join(`
`)},set:function(a){ei(a)==="object"&&(i=a)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return i.CA||""},set:function(a){typeof a=="string"&&(i.CA=a)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return r},set:function(a){r=a}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return r.substr(1,r.length-1)},set:function(a){r="/"+a}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=Pr.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};Ya(Q1,ZA),Np.prototype.setAppearance=function(e){if(!("createAppearanceStream"in e)||!("getCA"in e))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var t in this.Kids)if(this.Kids.hasOwnProperty(t)){var r=this.Kids[t];r.appearanceStreamContent=e.createAppearanceStream(r.optionName),r.caption=e.getCA()}},Np.prototype.createOption=function(e){var t=new Q1;return t.Parent=this,t.optionName=e,this.Kids.push(t),xte.call(this.scope,t),t};var Rv=function(){uo.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=Pr.CheckBox.createAppearanceStream()};Ya(Rv,uo);var tf=function(){ZA.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!ws(this.Ff,13)},set:function(t){t?this.Ff=xs(this.Ff,13):this.Ff=bs(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!ws(this.Ff,21)},set:function(t){t?this.Ff=xs(this.Ff,21):this.Ff=bs(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!ws(this.Ff,23)},set:function(t){t?this.Ff=xs(this.Ff,23):this.Ff=bs(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!ws(this.Ff,24)},set:function(t){t?this.Ff=xs(this.Ff,24):this.Ff=bs(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!ws(this.Ff,25)},set:function(t){t?this.Ff=xs(this.Ff,25):this.Ff=bs(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!ws(this.Ff,26)},set:function(t){t?this.Ff=xs(this.Ff,26):this.Ff=bs(this.Ff,26)}});var e=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return e},set:function(t){Number.isInteger(t)&&(e=t)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};Ya(tf,ZA);var Nv=function(){tf.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!ws(this.Ff,14)},set:function(e){e?this.Ff=xs(this.Ff,14):this.Ff=bs(this.Ff,14)}}),this.password=!0};Ya(Nv,tf);var Pr={CheckBox:{createAppearanceStream:function(){return{N:{On:Pr.CheckBox.YesNormal},D:{On:Pr.CheckBox.YesPushDown,Off:Pr.CheckBox.OffPushDown}}},YesPushDown:function(e){var t=bc(e);t.scope=e.scope;var r=[],i=e.scope.internal.getFont(e.fontName,e.fontStyle).id,a=e.scope.__private__.encodeColorString(e.color),u=xB(e,e.caption);return r.push("0.749023 g"),r.push("0 0 "+cn(Pr.internal.getWidth(e))+" "+cn(Pr.internal.getHeight(e))+" re"),r.push("f"),r.push("BMC"),r.push("q"),r.push("0 0 1 rg"),r.push("/"+i+" "+cn(u.fontSize)+" Tf "+a),r.push("BT"),r.push(u.text),r.push("ET"),r.push("Q"),r.push("EMC"),t.stream=r.join(`
`),t},YesNormal:function(e){var t=bc(e);t.scope=e.scope;var r=e.scope.internal.getFont(e.fontName,e.fontStyle).id,i=e.scope.__private__.encodeColorString(e.color),a=[],u=Pr.internal.getHeight(e),h=Pr.internal.getWidth(e),o=xB(e,e.caption);return a.push("1 g"),a.push("0 0 "+cn(h)+" "+cn(u)+" re"),a.push("f"),a.push("q"),a.push("0 0 1 rg"),a.push("0 0 "+cn(h-1)+" "+cn(u-1)+" re"),a.push("W"),a.push("n"),a.push("0 g"),a.push("BT"),a.push("/"+r+" "+cn(o.fontSize)+" Tf "+i),a.push(o.text),a.push("ET"),a.push("Q"),t.stream=a.join(`
`),t},OffPushDown:function(e){var t=bc(e);t.scope=e.scope;var r=[];return r.push("0.749023 g"),r.push("0 0 "+cn(Pr.internal.getWidth(e))+" "+cn(Pr.internal.getHeight(e))+" re"),r.push("f"),t.stream=r.join(`
`),t}},RadioButton:{Circle:{createAppearanceStream:function(e){var t={D:{Off:Pr.RadioButton.Circle.OffPushDown},N:{}};return t.N[e]=Pr.RadioButton.Circle.YesNormal,t.D[e]=Pr.RadioButton.Circle.YesPushDown,t},getCA:function(){return"l"},YesNormal:function(e){var t=bc(e);t.scope=e.scope;var r=[],i=Pr.internal.getWidth(e)<=Pr.internal.getHeight(e)?Pr.internal.getWidth(e)/4:Pr.internal.getHeight(e)/4;i=Number((.9*i).toFixed(5));var a=Pr.internal.Bezier_C,u=Number((i*a).toFixed(5));return r.push("q"),r.push("1 0 0 1 "+dh(Pr.internal.getWidth(e)/2)+" "+dh(Pr.internal.getHeight(e)/2)+" cm"),r.push(i+" 0 m"),r.push(i+" "+u+" "+u+" "+i+" 0 "+i+" c"),r.push("-"+u+" "+i+" -"+i+" "+u+" -"+i+" 0 c"),r.push("-"+i+" -"+u+" -"+u+" -"+i+" 0 -"+i+" c"),r.push(u+" -"+i+" "+i+" -"+u+" "+i+" 0 c"),r.push("f"),r.push("Q"),t.stream=r.join(`
`),t},YesPushDown:function(e){var t=bc(e);t.scope=e.scope;var r=[],i=Pr.internal.getWidth(e)<=Pr.internal.getHeight(e)?Pr.internal.getWidth(e)/4:Pr.internal.getHeight(e)/4;i=Number((.9*i).toFixed(5));var a=Number((2*i).toFixed(5)),u=Number((a*Pr.internal.Bezier_C).toFixed(5)),h=Number((i*Pr.internal.Bezier_C).toFixed(5));return r.push("0.749023 g"),r.push("q"),r.push("1 0 0 1 "+dh(Pr.internal.getWidth(e)/2)+" "+dh(Pr.internal.getHeight(e)/2)+" cm"),r.push(a+" 0 m"),r.push(a+" "+u+" "+u+" "+a+" 0 "+a+" c"),r.push("-"+u+" "+a+" -"+a+" "+u+" -"+a+" 0 c"),r.push("-"+a+" -"+u+" -"+u+" -"+a+" 0 -"+a+" c"),r.push(u+" -"+a+" "+a+" -"+u+" "+a+" 0 c"),r.push("f"),r.push("Q"),r.push("0 g"),r.push("q"),r.push("1 0 0 1 "+dh(Pr.internal.getWidth(e)/2)+" "+dh(Pr.internal.getHeight(e)/2)+" cm"),r.push(i+" 0 m"),r.push(i+" "+h+" "+h+" "+i+" 0 "+i+" c"),r.push("-"+h+" "+i+" -"+i+" "+h+" -"+i+" 0 c"),r.push("-"+i+" -"+h+" -"+h+" -"+i+" 0 -"+i+" c"),r.push(h+" -"+i+" "+i+" -"+h+" "+i+" 0 c"),r.push("f"),r.push("Q"),t.stream=r.join(`
`),t},OffPushDown:function(e){var t=bc(e);t.scope=e.scope;var r=[],i=Pr.internal.getWidth(e)<=Pr.internal.getHeight(e)?Pr.internal.getWidth(e)/4:Pr.internal.getHeight(e)/4;i=Number((.9*i).toFixed(5));var a=Number((2*i).toFixed(5)),u=Number((a*Pr.internal.Bezier_C).toFixed(5));return r.push("0.749023 g"),r.push("q"),r.push("1 0 0 1 "+dh(Pr.internal.getWidth(e)/2)+" "+dh(Pr.internal.getHeight(e)/2)+" cm"),r.push(a+" 0 m"),r.push(a+" "+u+" "+u+" "+a+" 0 "+a+" c"),r.push("-"+u+" "+a+" -"+a+" "+u+" -"+a+" 0 c"),r.push("-"+a+" -"+u+" -"+u+" -"+a+" 0 -"+a+" c"),r.push(u+" -"+a+" "+a+" -"+u+" "+a+" 0 c"),r.push("f"),r.push("Q"),t.stream=r.join(`
`),t}},Cross:{createAppearanceStream:function(e){var t={D:{Off:Pr.RadioButton.Cross.OffPushDown},N:{}};return t.N[e]=Pr.RadioButton.Cross.YesNormal,t.D[e]=Pr.RadioButton.Cross.YesPushDown,t},getCA:function(){return"8"},YesNormal:function(e){var t=bc(e);t.scope=e.scope;var r=[],i=Pr.internal.calculateCross(e);return r.push("q"),r.push("1 1 "+cn(Pr.internal.getWidth(e)-2)+" "+cn(Pr.internal.getHeight(e)-2)+" re"),r.push("W"),r.push("n"),r.push(cn(i.x1.x)+" "+cn(i.x1.y)+" m"),r.push(cn(i.x2.x)+" "+cn(i.x2.y)+" l"),r.push(cn(i.x4.x)+" "+cn(i.x4.y)+" m"),r.push(cn(i.x3.x)+" "+cn(i.x3.y)+" l"),r.push("s"),r.push("Q"),t.stream=r.join(`
`),t},YesPushDown:function(e){var t=bc(e);t.scope=e.scope;var r=Pr.internal.calculateCross(e),i=[];return i.push("0.749023 g"),i.push("0 0 "+cn(Pr.internal.getWidth(e))+" "+cn(Pr.internal.getHeight(e))+" re"),i.push("f"),i.push("q"),i.push("1 1 "+cn(Pr.internal.getWidth(e)-2)+" "+cn(Pr.internal.getHeight(e)-2)+" re"),i.push("W"),i.push("n"),i.push(cn(r.x1.x)+" "+cn(r.x1.y)+" m"),i.push(cn(r.x2.x)+" "+cn(r.x2.y)+" l"),i.push(cn(r.x4.x)+" "+cn(r.x4.y)+" m"),i.push(cn(r.x3.x)+" "+cn(r.x3.y)+" l"),i.push("s"),i.push("Q"),t.stream=i.join(`
`),t},OffPushDown:function(e){var t=bc(e);t.scope=e.scope;var r=[];return r.push("0.749023 g"),r.push("0 0 "+cn(Pr.internal.getWidth(e))+" "+cn(Pr.internal.getHeight(e))+" re"),r.push("f"),t.stream=r.join(`
`),t}}},createDefaultAppearanceStream:function(e){var t=e.scope.internal.getFont(e.fontName,e.fontStyle).id,r=e.scope.__private__.encodeColorString(e.color);return"/"+t+" "+e.fontSize+" Tf "+r}};Pr.internal={Bezier_C:.551915024494,calculateCross:function(e){var t=Pr.internal.getWidth(e),r=Pr.internal.getHeight(e),i=Math.min(t,r);return{x1:{x:(t-i)/2,y:(r-i)/2+i},x2:{x:(t-i)/2+i,y:(r-i)/2},x3:{x:(t-i)/2,y:(r-i)/2},x4:{x:(t-i)/2+i,y:(r-i)/2+i}}}},Pr.internal.getWidth=function(e){var t=0;return ei(e)==="object"&&(t=yT(e.Rect[2])),t},Pr.internal.getHeight=function(e){var t=0;return ei(e)==="object"&&(t=yT(e.Rect[3])),t};var xte=ls.addField=function(e){if(wte(this,e),!(e instanceof ZA))throw new Error("Invalid argument passed to jsPDF.addField.");var t;return(t=e).scope.internal.acroformPlugin.printedOut&&(t.scope.internal.acroformPlugin.printedOut=!1,t.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),t.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(t),e.page=e.scope.internal.getCurrentPageInfo().pageNumber,this};ls.AcroFormChoiceField=kp,ls.AcroFormListBox=Up,ls.AcroFormComboBox=Rp,ls.AcroFormEditBox=kv,ls.AcroFormButton=uo,ls.AcroFormPushButton=Uv,ls.AcroFormRadioButton=Np,ls.AcroFormCheckBox=Rv,ls.AcroFormTextField=tf,ls.AcroFormPasswordField=Nv,ls.AcroFormAppearance=Pr,ls.AcroForm={ChoiceField:kp,ListBox:Up,ComboBox:Rp,EditBox:kv,Button:uo,PushButton:Uv,RadioButton:Np,CheckBox:Rv,TextField:tf,PasswordField:Nv,Appearance:Pr},Xr.AcroForm={ChoiceField:kp,ListBox:Up,ComboBox:Rp,EditBox:kv,Button:uo,PushButton:Uv,RadioButton:Np,CheckBox:Rv,TextField:tf,PasswordField:Nv,Appearance:Pr};Xr.AcroForm;function xR(e){return e.reduce(function(t,r,i){return t[r]=i,t},{})}(function(e){e.__addimage__={};var t="UNKNOWN",r={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},i=e.__addimage__.getImageFileTypeByImageData=function(te,de){var Te,we,st,Ze,At,Le=t;if((de=de||t)==="RGBA"||te.data!==void 0&&te.data instanceof Uint8ClampedArray&&"height"in te&&"width"in te)return"RGBA";if(fe(te))for(At in r)for(st=r[At],Te=0;Te<st.length;Te+=1){for(Ze=!0,we=0;we<st[Te].length;we+=1)if(st[Te][we]!==void 0&&st[Te][we]!==te[we]){Ze=!1;break}if(Ze===!0){Le=At;break}}else for(At in r)for(st=r[At],Te=0;Te<st.length;Te+=1){for(Ze=!0,we=0;we<st[Te].length;we+=1)if(st[Te][we]!==void 0&&st[Te][we]!==te.charCodeAt(we)){Ze=!1;break}if(Ze===!0){Le=At;break}}return Le===t&&de!==t&&(Le=de),Le},a=function te(de){for(var Te=this.internal.write,we=this.internal.putStream,st=(0,this.internal.getFilters)();st.indexOf("FlateEncode")!==-1;)st.splice(st.indexOf("FlateEncode"),1);de.objectId=this.internal.newObject();var Ze=[];if(Ze.push({key:"Type",value:"/XObject"}),Ze.push({key:"Subtype",value:"/Image"}),Ze.push({key:"Width",value:de.width}),Ze.push({key:"Height",value:de.height}),de.colorSpace===H.INDEXED?Ze.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(de.palette.length/3-1)+" "+("sMask"in de&&de.sMask!==void 0?de.objectId+2:de.objectId+1)+" 0 R]"}):(Ze.push({key:"ColorSpace",value:"/"+de.colorSpace}),de.colorSpace===H.DEVICE_CMYK&&Ze.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),Ze.push({key:"BitsPerComponent",value:de.bitsPerComponent}),"decodeParameters"in de&&de.decodeParameters!==void 0&&Ze.push({key:"DecodeParms",value:"<<"+de.decodeParameters+">>"}),"transparency"in de&&Array.isArray(de.transparency)){for(var At="",Le=0,He=de.transparency.length;Le<He;Le++)At+=de.transparency[Le]+" "+de.transparency[Le]+" ";Ze.push({key:"Mask",value:"["+At+"]"})}de.sMask!==void 0&&Ze.push({key:"SMask",value:de.objectId+1+" 0 R"});var it=de.filter!==void 0?["/"+de.filter]:void 0;if(we({data:de.data,additionalKeyValues:Ze,alreadyAppliedFilters:it,objectId:de.objectId}),Te("endobj"),"sMask"in de&&de.sMask!==void 0){var Lt="/Predictor "+de.predictor+" /Colors 1 /BitsPerComponent "+de.bitsPerComponent+" /Columns "+de.width,ie={width:de.width,height:de.height,colorSpace:"DeviceGray",bitsPerComponent:de.bitsPerComponent,decodeParameters:Lt,data:de.sMask};"filter"in de&&(ie.filter=de.filter),te.call(this,ie)}if(de.colorSpace===H.INDEXED){var Ce=this.internal.newObject();we({data:ae(new Uint8Array(de.palette)),objectId:Ce}),Te("endobj")}},u=function(){var te=this.internal.collections.addImage_images;for(var de in te)a.call(this,te[de])},h=function(){var te,de=this.internal.collections.addImage_images,Te=this.internal.write;for(var we in de)Te("/I"+(te=de[we]).index,te.objectId,"0","R")},o=function(){this.internal.collections.addImage_images||(this.internal.collections.addImage_images={},this.internal.events.subscribe("putResources",u),this.internal.events.subscribe("putXobjectDict",h))},g=function(){var te=this.internal.collections.addImage_images;return o.call(this),te},y=function(){return Object.keys(this.internal.collections.addImage_images).length},C=function(te){return typeof e["process"+te.toUpperCase()]=="function"},I=function(te){return ei(te)==="object"&&te.nodeType===1},F=function(te,de){if(te.nodeName==="IMG"&&te.hasAttribute("src")){var Te=""+te.getAttribute("src");if(Te.indexOf("data:image/")===0)return Ug(unescape(Te).split("base64,").pop());var we=e.loadFile(Te,!0);if(we!==void 0)return we}if(te.nodeName==="CANVAS"){if(te.width===0||te.height===0)throw new Error("Given canvas must have data. Canvas width: "+te.width+", height: "+te.height);var st;switch(de){case"PNG":st="image/png";break;case"WEBP":st="image/webp";break;case"JPEG":case"JPG":default:st="image/jpeg"}return Ug(te.toDataURL(st,1).split("base64,").pop())}},b=function(te){var de=this.internal.collections.addImage_images;if(de){for(var Te in de)if(te===de[Te].alias)return de[Te]}},N=function(te,de,Te){return te||de||(te=-96,de=-96),te<0&&(te=-1*Te.width*72/te/this.internal.scaleFactor),de<0&&(de=-1*Te.height*72/de/this.internal.scaleFactor),te===0&&(te=de*Te.width/Te.height),de===0&&(de=te*Te.height/Te.width),[te,de]},U=function(te,de,Te,we,st,Ze){var At=N.call(this,Te,we,st),Le=this.internal.getCoordinateString,He=this.internal.getVerticalCoordinateString,it=g.call(this);if(Te=At[0],we=At[1],it[st.index]=st,Ze){Ze*=Math.PI/180;var Lt=Math.cos(Ze),ie=Math.sin(Ze),Ce=function($e){return $e.toFixed(4)},Pe=[Ce(Lt),Ce(ie),Ce(-1*ie),Ce(Lt),0,0,"cm"]}this.internal.write("q"),Ze?(this.internal.write([1,"0","0",1,Le(te),He(de+we),"cm"].join(" ")),this.internal.write(Pe.join(" ")),this.internal.write([Le(Te),"0","0",Le(we),"0","0","cm"].join(" "))):this.internal.write([Le(Te),"0","0",Le(we),Le(te),He(de+we),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+st.index+" Do"),this.internal.write("Q")},H=e.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};e.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var k=e.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},R=e.__addimage__.sHashCode=function(te){var de,Te,we=0;if(typeof te=="string")for(Te=te.length,de=0;de<Te;de++)we=(we<<5)-we+te.charCodeAt(de),we|=0;else if(fe(te))for(Te=te.byteLength/2,de=0;de<Te;de++)we=(we<<5)-we+te[de],we|=0;return we},V=e.__addimage__.validateStringAsBase64=function(te){(te=te||"").toString().trim();var de=!0;return te.length===0&&(de=!1),te.length%4!=0&&(de=!1),/^[A-Za-z0-9+/]+$/.test(te.substr(0,te.length-2))===!1&&(de=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(te.substr(-2))===!1&&(de=!1),de},W=e.__addimage__.extractImageFromDataUrl=function(te){if(te==null||!(te=te.trim()).startsWith("data:"))return null;var de=te.indexOf(",");return de<0?null:te.substring(0,de).trim().endsWith("base64")?te.substring(de+1):null},se=e.__addimage__.supportsArrayBuffer=function(){return typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"};e.__addimage__.isArrayBuffer=function(te){return se()&&te instanceof ArrayBuffer};var fe=e.__addimage__.isArrayBufferView=function(te){return se()&&typeof Uint32Array<"u"&&(te instanceof Int8Array||te instanceof Uint8Array||typeof Uint8ClampedArray<"u"&&te instanceof Uint8ClampedArray||te instanceof Int16Array||te instanceof Uint16Array||te instanceof Int32Array||te instanceof Uint32Array||te instanceof Float32Array||te instanceof Float64Array)},ue=e.__addimage__.binaryStringToUint8Array=function(te){for(var de=te.length,Te=new Uint8Array(de),we=0;we<de;we++)Te[we]=te.charCodeAt(we);return Te},ae=e.__addimage__.arrayBufferToBinaryString=function(te){for(var de="",Te=fe(te)?te:new Uint8Array(te),we=0;we<Te.length;we+=8192)de+=String.fromCharCode.apply(null,Te.subarray(we,we+8192));return de};e.addImage=function(){var te,de,Te,we,st,Ze,At,Le,He;if(typeof arguments[1]=="number"?(de=t,Te=arguments[1],we=arguments[2],st=arguments[3],Ze=arguments[4],At=arguments[5],Le=arguments[6],He=arguments[7]):(de=arguments[1],Te=arguments[2],we=arguments[3],st=arguments[4],Ze=arguments[5],At=arguments[6],Le=arguments[7],He=arguments[8]),ei(te=arguments[0])==="object"&&!I(te)&&"imageData"in te){var it=te;te=it.imageData,de=it.format||de||t,Te=it.x||Te||0,we=it.y||we||0,st=it.w||it.width||st,Ze=it.h||it.height||Ze,At=it.alias||At,Le=it.compression||Le,He=it.rotation||it.angle||He}var Lt=this.internal.getFilters();if(Le===void 0&&Lt.indexOf("FlateEncode")!==-1&&(Le="SLOW"),isNaN(Te)||isNaN(we))throw new Error("Invalid coordinates passed to jsPDF.addImage");o.call(this);var ie=Be.call(this,te,de,At,Le);return U.call(this,Te,we,st,Ze,ie,He),this};var Be=function(te,de,Te,we){var st,Ze,At;if(typeof te=="string"&&i(te)===t){te=unescape(te);var Le=Ue(te,!1);(Le!==""||(Le=e.loadFile(te,!0))!==void 0)&&(te=Le)}if(I(te)&&(te=F(te,de)),de=i(te,de),!C(de))throw new Error("addImage does not support files of type '"+de+"', please ensure that a plugin for '"+de+"' support is added.");if(((At=Te)==null||At.length===0)&&(Te=function(He){return typeof He=="string"||fe(He)?R(He):fe(He.data)?R(He.data):null}(te)),(st=b.call(this,Te))||(se()&&(te instanceof Uint8Array||de==="RGBA"||(Ze=te,te=ue(te))),st=this["process"+de.toUpperCase()](te,y.call(this),Te,function(He){return He&&typeof He=="string"&&(He=He.toUpperCase()),He in e.image_compression?He:k.NONE}(we),Ze)),!st)throw new Error("An unknown error occurred whilst processing the image.");return st},Ue=e.__addimage__.convertBase64ToBinaryString=function(te,de){de=typeof de!="boolean"||de;var Te,we="";if(typeof te=="string"){var st;Te=(st=W(te))!==null&&st!==void 0?st:te;try{we=Ug(Te)}catch(Ze){if(de)throw V(Te)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+Ze.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return we};e.getImageProperties=function(te){var de,Te,we="";if(I(te)&&(te=F(te)),typeof te=="string"&&i(te)===t&&((we=Ue(te,!1))===""&&(we=e.loadFile(te)||""),te=we),Te=i(te),!C(Te))throw new Error("addImage does not support files of type '"+Te+"', please ensure that a plugin for '"+Te+"' support is added.");if(!se()||te instanceof Uint8Array||(te=ue(te)),!(de=this["process"+Te.toUpperCase()](te)))throw new Error("An unknown error occurred whilst processing the image");return de.fileType=Te,de}})(Xr.API),function(e){var t=function(r){if(r!==void 0&&r!="")return!0};Xr.API.events.push(["addPage",function(r){this.internal.getPageInfo(r.pageNumber).pageContext.annotations=[]}]),e.events.push(["putPage",function(r){for(var i,a,u,h=this.internal.getCoordinateString,o=this.internal.getVerticalCoordinateString,g=this.internal.getPageInfoByObjId(r.objId),y=r.pageContext.annotations,C=!1,I=0;I<y.length&&!C;I++)switch((i=y[I]).type){case"link":(t(i.options.url)||t(i.options.pageNumber))&&(C=!0);break;case"reference":case"text":case"freetext":C=!0}if(C!=0){this.internal.write("/Annots [");for(var F=0;F<y.length;F++){i=y[F];var b=this.internal.pdfEscape,N=this.internal.getEncryptor(r.objId);switch(i.type){case"reference":this.internal.write(" "+i.object.objId+" 0 R ");break;case"text":var U=this.internal.newAdditionalObject(),H=this.internal.newAdditionalObject(),k=this.internal.getEncryptor(U.objId),R=i.title||"Note";u="<</Type /Annot /Subtype /Text "+(a="/Rect ["+h(i.bounds.x)+" "+o(i.bounds.y+i.bounds.h)+" "+h(i.bounds.x+i.bounds.w)+" "+o(i.bounds.y)+"] ")+"/Contents ("+b(k(i.contents))+")",u+=" /Popup "+H.objId+" 0 R",u+=" /P "+g.objId+" 0 R",u+=" /T ("+b(k(R))+") >>",U.content=u;var V=U.objId+" 0 R";u="<</Type /Annot /Subtype /Popup "+(a="/Rect ["+h(i.bounds.x+30)+" "+o(i.bounds.y+i.bounds.h)+" "+h(i.bounds.x+i.bounds.w+30)+" "+o(i.bounds.y)+"] ")+" /Parent "+V,i.open&&(u+=" /Open true"),u+=" >>",H.content=u,this.internal.write(U.objId,"0 R",H.objId,"0 R");break;case"freetext":a="/Rect ["+h(i.bounds.x)+" "+o(i.bounds.y)+" "+h(i.bounds.x+i.bounds.w)+" "+o(i.bounds.y+i.bounds.h)+"] ";var W=i.color||"#000000";u="<</Type /Annot /Subtype /FreeText "+a+"/Contents ("+b(N(i.contents))+")",u+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+W+")",u+=" /Border [0 0 0]",u+=" >>",this.internal.write(u);break;case"link":if(i.options.name){var se=this.annotations._nameMap[i.options.name];i.options.pageNumber=se.page,i.options.top=se.y}else i.options.top||(i.options.top=0);if(a="/Rect ["+i.finalBounds.x+" "+i.finalBounds.y+" "+i.finalBounds.w+" "+i.finalBounds.h+"] ",u="",i.options.url)u="<</Type /Annot /Subtype /Link "+a+"/Border [0 0 0] /A <</S /URI /URI ("+b(N(i.options.url))+") >>";else if(i.options.pageNumber)switch(u="<</Type /Annot /Subtype /Link "+a+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(i.options.pageNumber).objId+" 0 R",i.options.magFactor=i.options.magFactor||"XYZ",i.options.magFactor){case"Fit":u+=" /Fit]";break;case"FitH":u+=" /FitH "+i.options.top+"]";break;case"FitV":i.options.left=i.options.left||0,u+=" /FitV "+i.options.left+"]";break;case"XYZ":default:var fe=o(i.options.top);i.options.left=i.options.left||0,i.options.zoom===void 0&&(i.options.zoom=0),u+=" /XYZ "+i.options.left+" "+fe+" "+i.options.zoom+"]"}u!=""&&(u+=" >>",this.internal.write(u))}}this.internal.write("]")}}]),e.createAnnotation=function(r){var i=this.internal.getCurrentPageInfo();switch(r.type){case"link":this.link(r.bounds.x,r.bounds.y,r.bounds.w,r.bounds.h,r);break;case"text":case"freetext":i.pageContext.annotations.push(r)}},e.link=function(r,i,a,u,h){var o=this.internal.getCurrentPageInfo(),g=this.internal.getCoordinateString,y=this.internal.getVerticalCoordinateString;o.pageContext.annotations.push({finalBounds:{x:g(r),y:y(i),w:g(r+a),h:y(i+u)},options:h,type:"link"})},e.textWithLink=function(r,i,a,u){var h,o,g=this.getTextWidth(r),y=this.internal.getLineHeight()/this.internal.scaleFactor;if(u.maxWidth!==void 0){o=u.maxWidth;var C=this.splitTextToSize(r,o).length;h=Math.ceil(y*C)}else o=g,h=y;return this.text(r,i,a,u),a+=.2*y,u.align==="center"&&(i-=g/2),u.align==="right"&&(i-=g),this.link(i,a-y,o,h,u),g},e.getTextWidth=function(r){var i=this.internal.getFontSize();return this.getStringUnitWidth(r)*i/this.internal.scaleFactor}}(Xr.API),function(e){var t={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},r={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},i={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},a=[1570,1571,1573,1575];e.__arabicParser__={};var u=e.__arabicParser__.isInArabicSubstitutionA=function(U){return t[U.charCodeAt(0)]!==void 0},h=e.__arabicParser__.isArabicLetter=function(U){return typeof U=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(U)},o=e.__arabicParser__.isArabicEndLetter=function(U){return h(U)&&u(U)&&t[U.charCodeAt(0)].length<=2},g=e.__arabicParser__.isArabicAlfLetter=function(U){return h(U)&&a.indexOf(U.charCodeAt(0))>=0};e.__arabicParser__.arabicLetterHasIsolatedForm=function(U){return h(U)&&u(U)&&t[U.charCodeAt(0)].length>=1};var y=e.__arabicParser__.arabicLetterHasFinalForm=function(U){return h(U)&&u(U)&&t[U.charCodeAt(0)].length>=2};e.__arabicParser__.arabicLetterHasInitialForm=function(U){return h(U)&&u(U)&&t[U.charCodeAt(0)].length>=3};var C=e.__arabicParser__.arabicLetterHasMedialForm=function(U){return h(U)&&u(U)&&t[U.charCodeAt(0)].length==4},I=e.__arabicParser__.resolveLigatures=function(U){var H=0,k=r,R="",V=0;for(H=0;H<U.length;H+=1)k[U.charCodeAt(H)]!==void 0?(V++,typeof(k=k[U.charCodeAt(H)])=="number"&&(R+=String.fromCharCode(k),k=r,V=0),H===U.length-1&&(k=r,R+=U.charAt(H-(V-1)),H-=V-1,V=0)):(k=r,R+=U.charAt(H-V),H-=V,V=0);return R};e.__arabicParser__.isArabicDiacritic=function(U){return U!==void 0&&i[U.charCodeAt(0)]!==void 0};var F=e.__arabicParser__.getCorrectForm=function(U,H,k){return h(U)?u(U)===!1?-1:!y(U)||!h(H)&&!h(k)||!h(k)&&o(H)||o(U)&&!h(H)||o(U)&&g(H)||o(U)&&o(H)?0:C(U)&&h(H)&&!o(H)&&h(k)&&y(k)?3:o(U)||!h(k)?1:2:-1},b=function(U){var H=0,k=0,R=0,V="",W="",se="",fe=(U=U||"").split("\\s+"),ue=[];for(H=0;H<fe.length;H+=1){for(ue.push(""),k=0;k<fe[H].length;k+=1)V=fe[H][k],W=fe[H][k-1],se=fe[H][k+1],h(V)?(R=F(V,W,se),ue[H]+=R!==-1?String.fromCharCode(t[V.charCodeAt(0)][R]):V):ue[H]+=V;ue[H]=I(ue[H])}return ue.join(" ")},N=e.__arabicParser__.processArabic=e.processArabic=function(){var U,H=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,k=[];if(Array.isArray(H)){var R=0;for(k=[],R=0;R<H.length;R+=1)Array.isArray(H[R])?k.push([b(H[R][0]),H[R][1],H[R][2]]):k.push([b(H[R])]);U=k}else U=b(H);return typeof arguments[0]=="string"?U:(arguments[0].text=U,arguments[0])};e.events.push(["preProcessText",N])}(Xr.API),Xr.API.autoPrint=function(e){var t;switch((e=e||{}).variant=e.variant||"non-conform",e.variant){case"javascript":this.addJS("print({});");break;case"non-conform":default:this.internal.events.subscribe("postPutResources",function(){t=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+t+" 0 R")})}return this},function(e){var t=function(){var r=void 0;Object.defineProperty(this,"pdf",{get:function(){return r},set:function(o){r=o}});var i=150;Object.defineProperty(this,"width",{get:function(){return i},set:function(o){i=isNaN(o)||Number.isInteger(o)===!1||o<0?150:o,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=i+1)}});var a=300;Object.defineProperty(this,"height",{get:function(){return a},set:function(o){a=isNaN(o)||Number.isInteger(o)===!1||o<0?300:o,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=a+1)}});var u=[];Object.defineProperty(this,"childNodes",{get:function(){return u},set:function(o){u=o}});var h={};Object.defineProperty(this,"style",{get:function(){return h},set:function(o){h=o}}),Object.defineProperty(this,"parentNode",{})};t.prototype.getContext=function(r,i){var a;if((r=r||"2d")!=="2d")return null;for(a in i)this.pdf.context2d.hasOwnProperty(a)&&(this.pdf.context2d[a]=i[a]);return this.pdf.context2d._canvas=this,this.pdf.context2d},t.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},e.events.push(["initialized",function(){this.canvas=new t,this.canvas.pdf=this}])}(Xr.API),function(e){var t={left:0,top:0,bottom:0,right:0},r=!1,i=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},t),this.internal.__cell__.margins.width=this.getPageWidth(),a.call(this))},a=function(){this.internal.__cell__.lastCell=new u,this.internal.__cell__.pages=1},u=function(){var g=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return g},set:function(U){g=U}});var y=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return y},set:function(U){y=U}});var C=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return C},set:function(U){C=U}});var I=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return I},set:function(U){I=U}});var F=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return F},set:function(U){F=U}});var b=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return b},set:function(U){b=U}});var N=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return N},set:function(U){N=U}}),this};u.prototype.clone=function(){return new u(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},u.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},e.setHeaderFunction=function(g){return i.call(this),this.internal.__cell__.headerFunction=typeof g=="function"?g:void 0,this},e.getTextDimensions=function(g,y){i.call(this);var C=(y=y||{}).fontSize||this.getFontSize(),I=y.font||this.getFont(),F=y.scaleFactor||this.internal.scaleFactor,b=0,N=0,U=0,H=this;if(!Array.isArray(g)&&typeof g!="string"){if(typeof g!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");g=String(g)}var k=y.maxWidth;k>0?typeof g=="string"?g=this.splitTextToSize(g,k):Object.prototype.toString.call(g)==="[object Array]"&&(g=g.reduce(function(V,W){return V.concat(H.splitTextToSize(W,k))},[])):g=Array.isArray(g)?g:[g];for(var R=0;R<g.length;R++)b<(U=this.getStringUnitWidth(g[R],{font:I})*C)&&(b=U);return b!==0&&(N=g.length),{w:b/=F,h:Math.max((N*C*this.getLineHeightFactor()-C*(this.getLineHeightFactor()-1))/F,0)}},e.cellAddPage=function(){i.call(this),this.addPage();var g=this.internal.__cell__.margins||t;return this.internal.__cell__.lastCell=new u(g.left,g.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var h=e.cell=function(){var g;g=arguments[0]instanceof u?arguments[0]:new u(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),i.call(this);var y=this.internal.__cell__.lastCell,C=this.internal.__cell__.padding,I=this.internal.__cell__.margins||t,F=this.internal.__cell__.tableHeaderRow,b=this.internal.__cell__.printHeaders;return y.lineNumber!==void 0&&(y.lineNumber===g.lineNumber?(g.x=(y.x||0)+(y.width||0),g.y=y.y||0):y.y+y.height+g.height+I.bottom>this.getPageHeight()?(this.cellAddPage(),g.y=I.top,b&&F&&(this.printHeaderRow(g.lineNumber,!0),g.y+=F[0].height)):g.y=y.y+y.height||g.y),g.text[0]!==void 0&&(this.rect(g.x,g.y,g.width,g.height,r===!0?"FD":void 0),g.align==="right"?this.text(g.text,g.x+g.width-C,g.y+C,{align:"right",baseline:"top"}):g.align==="center"?this.text(g.text,g.x+g.width/2,g.y+C,{align:"center",baseline:"top",maxWidth:g.width-C-C}):this.text(g.text,g.x+C,g.y+C,{align:"left",baseline:"top",maxWidth:g.width-C-C})),this.internal.__cell__.lastCell=g,this};e.table=function(g,y,C,I,F){if(i.call(this),!C)throw new Error("No data for PDF table.");var b,N,U,H,k=[],R=[],V=[],W={},se={},fe=[],ue=[],ae=(F=F||{}).autoSize||!1,Be=F.printHeaders!==!1,Ue=F.css&&F.css["font-size"]!==void 0?16*F.css["font-size"]:F.fontSize||12,te=F.margins||Object.assign({width:this.getPageWidth()},t),de=typeof F.padding=="number"?F.padding:3,Te=F.headerBackgroundColor||"#c8c8c8",we=F.headerTextColor||"#000";if(a.call(this),this.internal.__cell__.printHeaders=Be,this.internal.__cell__.margins=te,this.internal.__cell__.table_font_size=Ue,this.internal.__cell__.padding=de,this.internal.__cell__.headerBackgroundColor=Te,this.internal.__cell__.headerTextColor=we,this.setFontSize(Ue),I==null)R=k=Object.keys(C[0]),V=k.map(function(){return"left"});else if(Array.isArray(I)&&ei(I[0])==="object")for(k=I.map(function(it){return it.name}),R=I.map(function(it){return it.prompt||it.name||""}),V=I.map(function(it){return it.align||"left"}),b=0;b<I.length;b+=1)se[I[b].name]=I[b].width*(19.049976/25.4);else Array.isArray(I)&&typeof I[0]=="string"&&(R=k=I,V=k.map(function(){return"left"}));if(ae||Array.isArray(I)&&typeof I[0]=="string")for(b=0;b<k.length;b+=1){for(W[H=k[b]]=C.map(function(it){return it[H]}),this.setFont(void 0,"bold"),fe.push(this.getTextDimensions(R[b],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),N=W[H],this.setFont(void 0,"normal"),U=0;U<N.length;U+=1)fe.push(this.getTextDimensions(N[U],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);se[H]=Math.max.apply(null,fe)+de+de,fe=[]}if(Be){var st={};for(b=0;b<k.length;b+=1)st[k[b]]={},st[k[b]].text=R[b],st[k[b]].align=V[b];var Ze=o.call(this,st,se);ue=k.map(function(it){return new u(g,y,se[it],Ze,st[it].text,void 0,st[it].align)}),this.setTableHeaderRow(ue),this.printHeaderRow(1,!1)}var At=I.reduce(function(it,Lt){return it[Lt.name]=Lt.align,it},{});for(b=0;b<C.length;b+=1){"rowStart"in F&&F.rowStart instanceof Function&&F.rowStart({row:b,data:C[b]},this);var Le=o.call(this,C[b],se);for(U=0;U<k.length;U+=1){var He=C[b][k[U]];"cellStart"in F&&F.cellStart instanceof Function&&F.cellStart({row:b,col:U,data:He},this),h.call(this,new u(g,y,se[k[U]],Le,He,b+2,At[k[U]]))}}return this.internal.__cell__.table_x=g,this.internal.__cell__.table_y=y,this};var o=function(g,y){var C=this.internal.__cell__.padding,I=this.internal.__cell__.table_font_size,F=this.internal.scaleFactor;return Object.keys(g).map(function(b){var N=g[b];return this.splitTextToSize(N.hasOwnProperty("text")?N.text:N,y[b]-C-C)},this).map(function(b){return this.getLineHeightFactor()*b.length*I/F+C+C},this).reduce(function(b,N){return Math.max(b,N)},0)};e.setTableHeaderRow=function(g){i.call(this),this.internal.__cell__.tableHeaderRow=g},e.printHeaderRow=function(g,y){if(i.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var C;if(r=!0,typeof this.internal.__cell__.headerFunction=="function"){var I=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new u(I[0],I[1],I[2],I[3],void 0,-1)}this.setFont(void 0,"bold");for(var F=[],b=0;b<this.internal.__cell__.tableHeaderRow.length;b+=1){C=this.internal.__cell__.tableHeaderRow[b].clone(),y&&(C.y=this.internal.__cell__.margins.top||0,F.push(C)),C.lineNumber=g;var N=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),h.call(this,C),this.setTextColor(N)}F.length>0&&this.setTableHeaderRow(F),this.setFont(void 0,"normal"),r=!1}}(Xr.API);var bR={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},BR=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],bB=xR(BR),CR=[100,200,300,400,500,600,700,800,900],bte=xR(CR);function BB(e){var t=e.family.replace(/"|'/g,"").toLowerCase(),r=function(u){return bR[u=u||"normal"]?u:"normal"}(e.style),i=function(u){if(!u)return 400;if(typeof u=="number")return u>=100&&u<=900&&u%100==0?u:400;if(/^\d00$/.test(u))return parseInt(u);switch(u){case"bold":return 700;case"normal":default:return 400}}(e.weight),a=function(u){return typeof bB[u=u||"normal"]=="number"?u:"normal"}(e.stretch);return{family:t,style:r,weight:i,stretch:a,src:e.src||[],ref:e.ref||{name:t,style:[a,r,i].join(" ")}}}function vT(e,t,r,i){var a;for(a=r;a>=0&&a<t.length;a+=i)if(e[t[a]])return e[t[a]];for(a=r;a>=0&&a<t.length;a-=i)if(e[t[a]])return e[t[a]]}var Bte={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},_T={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function wT(e){return[e.stretch,e.style,e.weight,e.family].join(" ")}function Cte(e,t,r){for(var i=(r=r||{}).defaultFontFamily||"times",a=Object.assign({},Bte,r.genericFontFamilies||{}),u=null,h=null,o=0;o<t.length;++o)if(a[(u=BB(t[o])).family]&&(u.family=a[u.family]),e.hasOwnProperty(u.family)){h=e[u.family];break}if(!(h=h||e[i]))throw new Error("Could not find a font-family for the rule '"+wT(u)+"' and default family '"+i+"'.");if(h=function(g,y){if(y[g])return y[g];var C=bB[g],I=C<=bB.normal?-1:1,F=vT(y,BR,C,I);if(!F)throw new Error("Could not find a matching font-stretch value for "+g);return F}(u.stretch,h),h=function(g,y){if(y[g])return y[g];for(var C=bR[g],I=0;I<C.length;++I)if(y[C[I]])return y[C[I]];throw new Error("Could not find a matching font-style for "+g)}(u.style,h),!(h=function(g,y){if(y[g])return y[g];if(g===400&&y[500])return y[500];if(g===500&&y[400])return y[400];var C=bte[g],I=vT(y,CR,C,g<400?-1:1);if(!I)throw new Error("Could not find a matching font-weight for value "+g);return I}(u.weight,h)))throw new Error("Failed to resolve a font for the rule '"+wT(u)+"'.");return h}function xT(e){return e.trimLeft()}function Ste(e,t){for(var r=0;r<e.length;){if(e.charAt(r)===t)return[e.substring(0,r),e.substring(r+1)];r+=1}return null}function Ete(e){var t=e.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return t===null?null:[t[0],e.substring(t[0].length)]}var lv,bT,BT,Ab=["times"];(function(e){var t,r,i,a,u,h,o,g,y,C=function(ie){return ie=ie||{},this.isStrokeTransparent=ie.isStrokeTransparent||!1,this.strokeOpacity=ie.strokeOpacity||1,this.strokeStyle=ie.strokeStyle||"#000000",this.fillStyle=ie.fillStyle||"#000000",this.isFillTransparent=ie.isFillTransparent||!1,this.fillOpacity=ie.fillOpacity||1,this.font=ie.font||"10px sans-serif",this.textBaseline=ie.textBaseline||"alphabetic",this.textAlign=ie.textAlign||"left",this.lineWidth=ie.lineWidth||1,this.lineJoin=ie.lineJoin||"miter",this.lineCap=ie.lineCap||"butt",this.path=ie.path||[],this.transform=ie.transform!==void 0?ie.transform.clone():new g,this.globalCompositeOperation=ie.globalCompositeOperation||"normal",this.globalAlpha=ie.globalAlpha||1,this.clip_path=ie.clip_path||[],this.currentPoint=ie.currentPoint||new h,this.miterLimit=ie.miterLimit||10,this.lastPoint=ie.lastPoint||new h,this.lineDashOffset=ie.lineDashOffset||0,this.lineDash=ie.lineDash||[],this.margin=ie.margin||[0,0,0,0],this.prevPageLastElemOffset=ie.prevPageLastElemOffset||0,this.ignoreClearRect=typeof ie.ignoreClearRect!="boolean"||ie.ignoreClearRect,this};e.events.push(["initialized",function(){this.context2d=new I(this),t=this.internal.f2,r=this.internal.getCoordinateString,i=this.internal.getVerticalCoordinateString,a=this.internal.getHorizontalCoordinate,u=this.internal.getVerticalCoordinate,h=this.internal.Point,o=this.internal.Rectangle,g=this.internal.Matrix,y=new C}]);var I=function(ie){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var Ce=ie;Object.defineProperty(this,"pdf",{get:function(){return Ce}});var Pe=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return Pe},set:function(Ft){Pe=!!Ft}});var $e=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return $e},set:function(Ft){$e=!!Ft}});var nt=0;Object.defineProperty(this,"posX",{get:function(){return nt},set:function(Ft){isNaN(Ft)||(nt=Ft)}});var Xe=0;Object.defineProperty(this,"posY",{get:function(){return Xe},set:function(Ft){isNaN(Ft)||(Xe=Ft)}}),Object.defineProperty(this,"margin",{get:function(){return y.margin},set:function(Ft){var Ge;typeof Ft=="number"?Ge=[Ft,Ft,Ft,Ft]:((Ge=new Array(4))[0]=Ft[0],Ge[1]=Ft.length>=2?Ft[1]:Ge[0],Ge[2]=Ft.length>=3?Ft[2]:Ge[0],Ge[3]=Ft.length>=4?Ft[3]:Ge[1]),y.margin=Ge}});var pt=!1;Object.defineProperty(this,"autoPaging",{get:function(){return pt},set:function(Ft){pt=Ft}});var dt=0;Object.defineProperty(this,"lastBreak",{get:function(){return dt},set:function(Ft){dt=Ft}});var Rt=[];Object.defineProperty(this,"pageBreaks",{get:function(){return Rt},set:function(Ft){Rt=Ft}}),Object.defineProperty(this,"ctx",{get:function(){return y},set:function(Ft){Ft instanceof C&&(y=Ft)}}),Object.defineProperty(this,"path",{get:function(){return y.path},set:function(Ft){y.path=Ft}});var Mt=[];Object.defineProperty(this,"ctxStack",{get:function(){return Mt},set:function(Ft){Mt=Ft}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(Ft){var Ge;Ge=F(Ft),this.ctx.fillStyle=Ge.style,this.ctx.isFillTransparent=Ge.a===0,this.ctx.fillOpacity=Ge.a,this.pdf.setFillColor(Ge.r,Ge.g,Ge.b,{a:Ge.a}),this.pdf.setTextColor(Ge.r,Ge.g,Ge.b,{a:Ge.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(Ft){var Ge=F(Ft);this.ctx.strokeStyle=Ge.style,this.ctx.isStrokeTransparent=Ge.a===0,this.ctx.strokeOpacity=Ge.a,Ge.a===0?this.pdf.setDrawColor(255,255,255):(Ge.a,this.pdf.setDrawColor(Ge.r,Ge.g,Ge.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(Ft){["butt","round","square"].indexOf(Ft)!==-1&&(this.ctx.lineCap=Ft,this.pdf.setLineCap(Ft))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(Ft){isNaN(Ft)||(this.ctx.lineWidth=Ft,this.pdf.setLineWidth(Ft))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(Ft){["bevel","round","miter"].indexOf(Ft)!==-1&&(this.ctx.lineJoin=Ft,this.pdf.setLineJoin(Ft))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(Ft){isNaN(Ft)||(this.ctx.miterLimit=Ft,this.pdf.setMiterLimit(Ft))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(Ft){this.ctx.textBaseline=Ft}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(Ft){["right","end","center","left","start"].indexOf(Ft)!==-1&&(this.ctx.textAlign=Ft)}});var $t=null;function jt(Ft,Ge){if($t===null){var Cr=function(pr){var Kt=[];return Object.keys(pr).forEach(function(ar){pr[ar].forEach(function(lr){var cr=null;switch(lr){case"bold":cr={family:ar,weight:"bold"};break;case"italic":cr={family:ar,style:"italic"};break;case"bolditalic":cr={family:ar,weight:"bold",style:"italic"};break;case"":case"normal":cr={family:ar}}cr!==null&&(cr.ref={name:ar,style:lr},Kt.push(cr))})}),Kt}(Ft.getFontList());$t=function(pr){for(var Kt={},ar=0;ar<pr.length;++ar){var lr=BB(pr[ar]),cr=lr.family,br=lr.stretch,Dr=lr.style,Kr=lr.weight;Kt[cr]=Kt[cr]||{},Kt[cr][br]=Kt[cr][br]||{},Kt[cr][br][Dr]=Kt[cr][br][Dr]||{},Kt[cr][br][Dr][Kr]=lr}return Kt}(Cr.concat(Ge))}return $t}var vr=null;Object.defineProperty(this,"fontFaces",{get:function(){return vr},set:function(Ft){$t=null,vr=Ft}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(Ft){var Ge;if(this.ctx.font=Ft,(Ge=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(Ft))!==null){var Cr=Ge[1];Ge[2];var pr=Ge[3],Kt=Ge[4];Ge[5];var ar=Ge[6],lr=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(Kt)[2];Kt=Math.floor(lr==="px"?parseFloat(Kt)*this.pdf.internal.scaleFactor:lr==="em"?parseFloat(Kt)*this.pdf.getFontSize():parseFloat(Kt)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(Kt);var cr=function(zr){var Yr,ur,ct=[],Ae=zr.trim();if(Ae==="")return Ab;if(Ae in _T)return[_T[Ae]];for(;Ae!=="";){switch(ur=null,Yr=(Ae=xT(Ae)).charAt(0)){case'"':case"'":ur=Ste(Ae.substring(1),Yr);break;default:ur=Ete(Ae)}if(ur===null||(ct.push(ur[0]),(Ae=xT(ur[1]))!==""&&Ae.charAt(0)!==","))return Ab;Ae=Ae.replace(/^,/,"")}return ct}(ar);if(this.fontFaces){var br=Cte(jt(this.pdf,this.fontFaces),cr.map(function(zr){return{family:zr,stretch:"normal",weight:pr,style:Cr}}));this.pdf.setFont(br.ref.name,br.ref.style)}else{var Dr="";(pr==="bold"||parseInt(pr,10)>=700||Cr==="bold")&&(Dr="bold"),Cr==="italic"&&(Dr+="italic"),Dr.length===0&&(Dr="normal");for(var Kr="",Lr={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},Hr=0;Hr<cr.length;Hr++){if(this.pdf.internal.getFont(cr[Hr],Dr,{noFallback:!0,disableWarning:!0})!==void 0){Kr=cr[Hr];break}if(Dr==="bolditalic"&&this.pdf.internal.getFont(cr[Hr],"bold",{noFallback:!0,disableWarning:!0})!==void 0)Kr=cr[Hr],Dr="bold";else if(this.pdf.internal.getFont(cr[Hr],"normal",{noFallback:!0,disableWarning:!0})!==void 0){Kr=cr[Hr],Dr="normal";break}}if(Kr===""){for(var un=0;un<cr.length;un++)if(Lr[cr[un]]){Kr=Lr[cr[un]];break}}Kr=Kr===""?"Times":Kr,this.pdf.setFont(Kr,Dr)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(Ft){this.ctx.globalCompositeOperation=Ft}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(Ft){this.ctx.globalAlpha=Ft}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(Ft){this.ctx.lineDashOffset=Ft,Lt.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(Ft){this.ctx.lineDash=Ft,Lt.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(Ft){this.ctx.ignoreClearRect=!!Ft}})};I.prototype.setLineDash=function(ie){this.lineDash=ie},I.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},I.prototype.fill=function(){W.call(this,"fill",!1)},I.prototype.stroke=function(){W.call(this,"stroke",!1)},I.prototype.beginPath=function(){this.path=[{type:"begin"}]},I.prototype.moveTo=function(ie,Ce){if(isNaN(ie)||isNaN(Ce))throw yi.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var Pe=this.ctx.transform.applyToPoint(new h(ie,Ce));this.path.push({type:"mt",x:Pe.x,y:Pe.y}),this.ctx.lastPoint=new h(ie,Ce)},I.prototype.closePath=function(){var ie=new h(0,0),Ce=0;for(Ce=this.path.length-1;Ce!==-1;Ce--)if(this.path[Ce].type==="begin"&&ei(this.path[Ce+1])==="object"&&typeof this.path[Ce+1].x=="number"){ie=new h(this.path[Ce+1].x,this.path[Ce+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new h(ie.x,ie.y)},I.prototype.lineTo=function(ie,Ce){if(isNaN(ie)||isNaN(Ce))throw yi.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var Pe=this.ctx.transform.applyToPoint(new h(ie,Ce));this.path.push({type:"lt",x:Pe.x,y:Pe.y}),this.ctx.lastPoint=new h(Pe.x,Pe.y)},I.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),W.call(this,null,!0)},I.prototype.quadraticCurveTo=function(ie,Ce,Pe,$e){if(isNaN(Pe)||isNaN($e)||isNaN(ie)||isNaN(Ce))throw yi.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var nt=this.ctx.transform.applyToPoint(new h(Pe,$e)),Xe=this.ctx.transform.applyToPoint(new h(ie,Ce));this.path.push({type:"qct",x1:Xe.x,y1:Xe.y,x:nt.x,y:nt.y}),this.ctx.lastPoint=new h(nt.x,nt.y)},I.prototype.bezierCurveTo=function(ie,Ce,Pe,$e,nt,Xe){if(isNaN(nt)||isNaN(Xe)||isNaN(ie)||isNaN(Ce)||isNaN(Pe)||isNaN($e))throw yi.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var pt=this.ctx.transform.applyToPoint(new h(nt,Xe)),dt=this.ctx.transform.applyToPoint(new h(ie,Ce)),Rt=this.ctx.transform.applyToPoint(new h(Pe,$e));this.path.push({type:"bct",x1:dt.x,y1:dt.y,x2:Rt.x,y2:Rt.y,x:pt.x,y:pt.y}),this.ctx.lastPoint=new h(pt.x,pt.y)},I.prototype.arc=function(ie,Ce,Pe,$e,nt,Xe){if(isNaN(ie)||isNaN(Ce)||isNaN(Pe)||isNaN($e)||isNaN(nt))throw yi.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(Xe=!!Xe,!this.ctx.transform.isIdentity){var pt=this.ctx.transform.applyToPoint(new h(ie,Ce));ie=pt.x,Ce=pt.y;var dt=this.ctx.transform.applyToPoint(new h(0,Pe)),Rt=this.ctx.transform.applyToPoint(new h(0,0));Pe=Math.sqrt(Math.pow(dt.x-Rt.x,2)+Math.pow(dt.y-Rt.y,2))}Math.abs(nt-$e)>=2*Math.PI&&($e=0,nt=2*Math.PI),this.path.push({type:"arc",x:ie,y:Ce,radius:Pe,startAngle:$e,endAngle:nt,counterclockwise:Xe})},I.prototype.arcTo=function(ie,Ce,Pe,$e,nt){throw new Error("arcTo not implemented.")},I.prototype.rect=function(ie,Ce,Pe,$e){if(isNaN(ie)||isNaN(Ce)||isNaN(Pe)||isNaN($e))throw yi.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(ie,Ce),this.lineTo(ie+Pe,Ce),this.lineTo(ie+Pe,Ce+$e),this.lineTo(ie,Ce+$e),this.lineTo(ie,Ce),this.lineTo(ie+Pe,Ce),this.lineTo(ie,Ce)},I.prototype.fillRect=function(ie,Ce,Pe,$e){if(isNaN(ie)||isNaN(Ce)||isNaN(Pe)||isNaN($e))throw yi.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!b.call(this)){var nt={};this.lineCap!=="butt"&&(nt.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(nt.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(ie,Ce,Pe,$e),this.fill(),nt.hasOwnProperty("lineCap")&&(this.lineCap=nt.lineCap),nt.hasOwnProperty("lineJoin")&&(this.lineJoin=nt.lineJoin)}},I.prototype.strokeRect=function(ie,Ce,Pe,$e){if(isNaN(ie)||isNaN(Ce)||isNaN(Pe)||isNaN($e))throw yi.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");N.call(this)||(this.beginPath(),this.rect(ie,Ce,Pe,$e),this.stroke())},I.prototype.clearRect=function(ie,Ce,Pe,$e){if(isNaN(ie)||isNaN(Ce)||isNaN(Pe)||isNaN($e))throw yi.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(ie,Ce,Pe,$e))},I.prototype.save=function(ie){ie=typeof ie!="boolean"||ie;for(var Ce=this.pdf.internal.getCurrentPageInfo().pageNumber,Pe=0;Pe<this.pdf.internal.getNumberOfPages();Pe++)this.pdf.setPage(Pe+1),this.pdf.internal.out("q");if(this.pdf.setPage(Ce),ie){this.ctx.fontSize=this.pdf.internal.getFontSize();var $e=new C(this.ctx);this.ctxStack.push(this.ctx),this.ctx=$e}},I.prototype.restore=function(ie){ie=typeof ie!="boolean"||ie;for(var Ce=this.pdf.internal.getCurrentPageInfo().pageNumber,Pe=0;Pe<this.pdf.internal.getNumberOfPages();Pe++)this.pdf.setPage(Pe+1),this.pdf.internal.out("Q");this.pdf.setPage(Ce),ie&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},I.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var F=function(ie){var Ce,Pe,$e,nt;if(ie.isCanvasGradient===!0&&(ie=ie.getColor()),!ie)return{r:0,g:0,b:0,a:0,style:ie};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(ie))Ce=0,Pe=0,$e=0,nt=0;else{var Xe=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(ie);if(Xe!==null)Ce=parseInt(Xe[1]),Pe=parseInt(Xe[2]),$e=parseInt(Xe[3]),nt=1;else if((Xe=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(ie))!==null)Ce=parseInt(Xe[1]),Pe=parseInt(Xe[2]),$e=parseInt(Xe[3]),nt=parseFloat(Xe[4]);else{if(nt=1,typeof ie=="string"&&ie.charAt(0)!=="#"){var pt=new mR(ie);ie=pt.ok?pt.toHex():"#000000"}ie.length===4?(Ce=ie.substring(1,2),Ce+=Ce,Pe=ie.substring(2,3),Pe+=Pe,$e=ie.substring(3,4),$e+=$e):(Ce=ie.substring(1,3),Pe=ie.substring(3,5),$e=ie.substring(5,7)),Ce=parseInt(Ce,16),Pe=parseInt(Pe,16),$e=parseInt($e,16)}}return{r:Ce,g:Pe,b:$e,a:nt,style:ie}},b=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},N=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};I.prototype.fillText=function(ie,Ce,Pe,$e){if(isNaN(Ce)||isNaN(Pe)||typeof ie!="string")throw yi.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if($e=isNaN($e)?void 0:$e,!b.call(this)){var nt=Le(this.ctx.transform.rotation),Xe=this.ctx.transform.scaleX;de.call(this,{text:ie,x:Ce,y:Pe,scale:Xe,angle:nt,align:this.textAlign,maxWidth:$e})}},I.prototype.strokeText=function(ie,Ce,Pe,$e){if(isNaN(Ce)||isNaN(Pe)||typeof ie!="string")throw yi.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!N.call(this)){$e=isNaN($e)?void 0:$e;var nt=Le(this.ctx.transform.rotation),Xe=this.ctx.transform.scaleX;de.call(this,{text:ie,x:Ce,y:Pe,scale:Xe,renderingMode:"stroke",angle:nt,align:this.textAlign,maxWidth:$e})}},I.prototype.measureText=function(ie){if(typeof ie!="string")throw yi.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var Ce=this.pdf,Pe=this.pdf.internal.scaleFactor,$e=Ce.internal.getFontSize(),nt=Ce.getStringUnitWidth(ie)*$e/Ce.internal.scaleFactor,Xe=function(pt){var dt=(pt=pt||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return dt}}),this};return new Xe({width:nt*=Math.round(96*Pe/72*1e4)/1e4})},I.prototype.scale=function(ie,Ce){if(isNaN(ie)||isNaN(Ce))throw yi.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var Pe=new g(ie,0,0,Ce,0,0);this.ctx.transform=this.ctx.transform.multiply(Pe)},I.prototype.rotate=function(ie){if(isNaN(ie))throw yi.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var Ce=new g(Math.cos(ie),Math.sin(ie),-Math.sin(ie),Math.cos(ie),0,0);this.ctx.transform=this.ctx.transform.multiply(Ce)},I.prototype.translate=function(ie,Ce){if(isNaN(ie)||isNaN(Ce))throw yi.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var Pe=new g(1,0,0,1,ie,Ce);this.ctx.transform=this.ctx.transform.multiply(Pe)},I.prototype.transform=function(ie,Ce,Pe,$e,nt,Xe){if(isNaN(ie)||isNaN(Ce)||isNaN(Pe)||isNaN($e)||isNaN(nt)||isNaN(Xe))throw yi.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var pt=new g(ie,Ce,Pe,$e,nt,Xe);this.ctx.transform=this.ctx.transform.multiply(pt)},I.prototype.setTransform=function(ie,Ce,Pe,$e,nt,Xe){ie=isNaN(ie)?1:ie,Ce=isNaN(Ce)?0:Ce,Pe=isNaN(Pe)?0:Pe,$e=isNaN($e)?1:$e,nt=isNaN(nt)?0:nt,Xe=isNaN(Xe)?0:Xe,this.ctx.transform=new g(ie,Ce,Pe,$e,nt,Xe)};var U=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};I.prototype.drawImage=function(ie,Ce,Pe,$e,nt,Xe,pt,dt,Rt){var Mt=this.pdf.getImageProperties(ie),$t=1,jt=1,vr=1,Ft=1;$e!==void 0&&dt!==void 0&&(vr=dt/$e,Ft=Rt/nt,$t=Mt.width/$e*dt/$e,jt=Mt.height/nt*Rt/nt),Xe===void 0&&(Xe=Ce,pt=Pe,Ce=0,Pe=0),$e!==void 0&&dt===void 0&&(dt=$e,Rt=nt),$e===void 0&&dt===void 0&&(dt=Mt.width,Rt=Mt.height);for(var Ge,Cr=this.ctx.transform.decompose(),pr=Le(Cr.rotate.shx),Kt=new g,ar=(Kt=(Kt=(Kt=Kt.multiply(Cr.translate)).multiply(Cr.skew)).multiply(Cr.scale)).applyToRectangle(new o(Xe-Ce*vr,pt-Pe*Ft,$e*$t,nt*jt)),lr=H.call(this,ar),cr=[],br=0;br<lr.length;br+=1)cr.indexOf(lr[br])===-1&&cr.push(lr[br]);if(V(cr),this.autoPaging)for(var Dr=cr[0],Kr=cr[cr.length-1],Lr=Dr;Lr<Kr+1;Lr++){this.pdf.setPage(Lr);var Hr=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],un=Lr===1?this.posY+this.margin[0]:this.margin[0],zr=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Yr=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],ur=Lr===1?0:zr+(Lr-2)*Yr;if(this.ctx.clip_path.length!==0){var ct=this.path;Ge=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=R(Ge,this.posX+this.margin[3],-ur+un+this.ctx.prevPageLastElemOffset),se.call(this,"fill",!0),this.path=ct}var Ae=JSON.parse(JSON.stringify(ar));Ae=R([Ae],this.posX+this.margin[3],-ur+un+this.ctx.prevPageLastElemOffset)[0];var me=(Lr>Dr||Lr<Kr)&&U.call(this);me&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Hr,Yr,null).clip().discardPath()),this.pdf.addImage(ie,"JPEG",Ae.x,Ae.y,Ae.w,Ae.h,null,null,pr),me&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(ie,"JPEG",ar.x,ar.y,ar.w,ar.h,null,null,pr)};var H=function(ie,Ce,Pe){var $e=[];Ce=Ce||this.pdf.internal.pageSize.width,Pe=Pe||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var nt=this.posY+this.ctx.prevPageLastElemOffset;switch(ie.type){default:case"mt":case"lt":$e.push(Math.floor((ie.y+nt)/Pe)+1);break;case"arc":$e.push(Math.floor((ie.y+nt-ie.radius)/Pe)+1),$e.push(Math.floor((ie.y+nt+ie.radius)/Pe)+1);break;case"qct":var Xe=He(this.ctx.lastPoint.x,this.ctx.lastPoint.y,ie.x1,ie.y1,ie.x,ie.y);$e.push(Math.floor((Xe.y+nt)/Pe)+1),$e.push(Math.floor((Xe.y+Xe.h+nt)/Pe)+1);break;case"bct":var pt=it(this.ctx.lastPoint.x,this.ctx.lastPoint.y,ie.x1,ie.y1,ie.x2,ie.y2,ie.x,ie.y);$e.push(Math.floor((pt.y+nt)/Pe)+1),$e.push(Math.floor((pt.y+pt.h+nt)/Pe)+1);break;case"rect":$e.push(Math.floor((ie.y+nt)/Pe)+1),$e.push(Math.floor((ie.y+ie.h+nt)/Pe)+1)}for(var dt=0;dt<$e.length;dt+=1)for(;this.pdf.internal.getNumberOfPages()<$e[dt];)k.call(this);return $e},k=function(){var ie=this.fillStyle,Ce=this.strokeStyle,Pe=this.font,$e=this.lineCap,nt=this.lineWidth,Xe=this.lineJoin;this.pdf.addPage(),this.fillStyle=ie,this.strokeStyle=Ce,this.font=Pe,this.lineCap=$e,this.lineWidth=nt,this.lineJoin=Xe},R=function(ie,Ce,Pe){for(var $e=0;$e<ie.length;$e++)switch(ie[$e].type){case"bct":ie[$e].x2+=Ce,ie[$e].y2+=Pe;case"qct":ie[$e].x1+=Ce,ie[$e].y1+=Pe;case"mt":case"lt":case"arc":default:ie[$e].x+=Ce,ie[$e].y+=Pe}return ie},V=function(ie){return ie.sort(function(Ce,Pe){return Ce-Pe})},W=function(ie,Ce){for(var Pe,$e,nt=this.fillStyle,Xe=this.strokeStyle,pt=this.lineCap,dt=this.lineWidth,Rt=Math.abs(dt*this.ctx.transform.scaleX),Mt=this.lineJoin,$t=JSON.parse(JSON.stringify(this.path)),jt=JSON.parse(JSON.stringify(this.path)),vr=[],Ft=0;Ft<jt.length;Ft++)if(jt[Ft].x!==void 0)for(var Ge=H.call(this,jt[Ft]),Cr=0;Cr<Ge.length;Cr+=1)vr.indexOf(Ge[Cr])===-1&&vr.push(Ge[Cr]);for(var pr=0;pr<vr.length;pr++)for(;this.pdf.internal.getNumberOfPages()<vr[pr];)k.call(this);if(V(vr),this.autoPaging)for(var Kt=vr[0],ar=vr[vr.length-1],lr=Kt;lr<ar+1;lr++){this.pdf.setPage(lr),this.fillStyle=nt,this.strokeStyle=Xe,this.lineCap=pt,this.lineWidth=Rt,this.lineJoin=Mt;var cr=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],br=lr===1?this.posY+this.margin[0]:this.margin[0],Dr=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Kr=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Lr=lr===1?0:Dr+(lr-2)*Kr;if(this.ctx.clip_path.length!==0){var Hr=this.path;Pe=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=R(Pe,this.posX+this.margin[3],-Lr+br+this.ctx.prevPageLastElemOffset),se.call(this,ie,!0),this.path=Hr}if($e=JSON.parse(JSON.stringify($t)),this.path=R($e,this.posX+this.margin[3],-Lr+br+this.ctx.prevPageLastElemOffset),Ce===!1||lr===0){var un=(lr>Kt||lr<ar)&&U.call(this);un&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],cr,Kr,null).clip().discardPath()),se.call(this,ie,Ce),un&&this.pdf.restoreGraphicsState()}this.lineWidth=dt}else this.lineWidth=Rt,se.call(this,ie,Ce),this.lineWidth=dt;this.path=$t},se=function(ie,Ce){if((ie!=="stroke"||Ce||!N.call(this))&&(ie==="stroke"||Ce||!b.call(this))){for(var Pe,$e,nt=[],Xe=this.path,pt=0;pt<Xe.length;pt++){var dt=Xe[pt];switch(dt.type){case"begin":nt.push({begin:!0});break;case"close":nt.push({close:!0});break;case"mt":nt.push({start:dt,deltas:[],abs:[]});break;case"lt":var Rt=nt.length;if(Xe[pt-1]&&!isNaN(Xe[pt-1].x)&&(Pe=[dt.x-Xe[pt-1].x,dt.y-Xe[pt-1].y],Rt>0)){for(;Rt>=0;Rt--)if(nt[Rt-1].close!==!0&&nt[Rt-1].begin!==!0){nt[Rt-1].deltas.push(Pe),nt[Rt-1].abs.push(dt);break}}break;case"bct":Pe=[dt.x1-Xe[pt-1].x,dt.y1-Xe[pt-1].y,dt.x2-Xe[pt-1].x,dt.y2-Xe[pt-1].y,dt.x-Xe[pt-1].x,dt.y-Xe[pt-1].y],nt[nt.length-1].deltas.push(Pe);break;case"qct":var Mt=Xe[pt-1].x+2/3*(dt.x1-Xe[pt-1].x),$t=Xe[pt-1].y+2/3*(dt.y1-Xe[pt-1].y),jt=dt.x+2/3*(dt.x1-dt.x),vr=dt.y+2/3*(dt.y1-dt.y),Ft=dt.x,Ge=dt.y;Pe=[Mt-Xe[pt-1].x,$t-Xe[pt-1].y,jt-Xe[pt-1].x,vr-Xe[pt-1].y,Ft-Xe[pt-1].x,Ge-Xe[pt-1].y],nt[nt.length-1].deltas.push(Pe);break;case"arc":nt.push({deltas:[],abs:[],arc:!0}),Array.isArray(nt[nt.length-1].abs)&&nt[nt.length-1].abs.push(dt)}}$e=Ce?null:ie==="stroke"?"stroke":"fill";for(var Cr=!1,pr=0;pr<nt.length;pr++)if(nt[pr].arc)for(var Kt=nt[pr].abs,ar=0;ar<Kt.length;ar++){var lr=Kt[ar];lr.type==="arc"?ae.call(this,lr.x,lr.y,lr.radius,lr.startAngle,lr.endAngle,lr.counterclockwise,void 0,Ce,!Cr):Te.call(this,lr.x,lr.y),Cr=!0}else if(nt[pr].close===!0)this.pdf.internal.out("h"),Cr=!1;else if(nt[pr].begin!==!0){var cr=nt[pr].start.x,br=nt[pr].start.y;we.call(this,nt[pr].deltas,cr,br),Cr=!0}$e&&Be.call(this,$e),Ce&&Ue.call(this)}},fe=function(ie){var Ce=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,Pe=Ce*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return ie-Pe;case"top":return ie+Ce-Pe;case"hanging":return ie+Ce-2*Pe;case"middle":return ie+Ce/2-Pe;case"ideographic":return ie;case"alphabetic":default:return ie}},ue=function(ie){return ie+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};I.prototype.createLinearGradient=function(){var ie=function(){};return ie.colorStops=[],ie.addColorStop=function(Ce,Pe){this.colorStops.push([Ce,Pe])},ie.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},ie.isCanvasGradient=!0,ie},I.prototype.createPattern=function(){return this.createLinearGradient()},I.prototype.createRadialGradient=function(){return this.createLinearGradient()};var ae=function(ie,Ce,Pe,$e,nt,Xe,pt,dt,Rt){for(var Mt=Ze.call(this,Pe,$e,nt,Xe),$t=0;$t<Mt.length;$t++){var jt=Mt[$t];$t===0&&(Rt?te.call(this,jt.x1+ie,jt.y1+Ce):Te.call(this,jt.x1+ie,jt.y1+Ce)),st.call(this,ie,Ce,jt.x2,jt.y2,jt.x3,jt.y3,jt.x4,jt.y4)}dt?Ue.call(this):Be.call(this,pt)},Be=function(ie){switch(ie){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},Ue=function(){this.pdf.clip(),this.pdf.discardPath()},te=function(ie,Ce){this.pdf.internal.out(r(ie)+" "+i(Ce)+" m")},de=function(ie){var Ce;switch(ie.align){case"right":case"end":Ce="right";break;case"center":Ce="center";break;case"left":case"start":default:Ce="left"}var Pe=this.pdf.getTextDimensions(ie.text),$e=fe.call(this,ie.y),nt=ue.call(this,$e)-Pe.h,Xe=this.ctx.transform.applyToPoint(new h(ie.x,$e)),pt=this.ctx.transform.decompose(),dt=new g;dt=(dt=(dt=dt.multiply(pt.translate)).multiply(pt.skew)).multiply(pt.scale);for(var Rt,Mt,$t,jt=this.ctx.transform.applyToRectangle(new o(ie.x,$e,Pe.w,Pe.h)),vr=dt.applyToRectangle(new o(ie.x,nt,Pe.w,Pe.h)),Ft=H.call(this,vr),Ge=[],Cr=0;Cr<Ft.length;Cr+=1)Ge.indexOf(Ft[Cr])===-1&&Ge.push(Ft[Cr]);if(V(Ge),this.autoPaging)for(var pr=Ge[0],Kt=Ge[Ge.length-1],ar=pr;ar<Kt+1;ar++){this.pdf.setPage(ar);var lr=ar===1?this.posY+this.margin[0]:this.margin[0],cr=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],br=this.pdf.internal.pageSize.height-this.margin[2],Dr=br-this.margin[0],Kr=this.pdf.internal.pageSize.width-this.margin[1],Lr=Kr-this.margin[3],Hr=ar===1?0:cr+(ar-2)*Dr;if(this.ctx.clip_path.length!==0){var un=this.path;Rt=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=R(Rt,this.posX+this.margin[3],-1*Hr+lr),se.call(this,"fill",!0),this.path=un}var zr=R([JSON.parse(JSON.stringify(vr))],this.posX+this.margin[3],-Hr+lr+this.ctx.prevPageLastElemOffset)[0];ie.scale>=.01&&(Mt=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Mt*ie.scale),$t=this.lineWidth,this.lineWidth=$t*ie.scale);var Yr=this.autoPaging!=="text";if(Yr||zr.y+zr.h<=br){if(Yr||zr.y>=lr&&zr.x<=Kr){var ur=Yr?ie.text:this.pdf.splitTextToSize(ie.text,ie.maxWidth||Kr-zr.x)[0],ct=R([JSON.parse(JSON.stringify(jt))],this.posX+this.margin[3],-Hr+lr+this.ctx.prevPageLastElemOffset)[0],Ae=Yr&&(ar>pr||ar<Kt)&&U.call(this);Ae&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Lr,Dr,null).clip().discardPath()),this.pdf.text(ur,ct.x,ct.y,{angle:ie.angle,align:Ce,renderingMode:ie.renderingMode}),Ae&&this.pdf.restoreGraphicsState()}}else zr.y<br&&(this.ctx.prevPageLastElemOffset+=br-zr.y);ie.scale>=.01&&(this.pdf.setFontSize(Mt),this.lineWidth=$t)}else ie.scale>=.01&&(Mt=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Mt*ie.scale),$t=this.lineWidth,this.lineWidth=$t*ie.scale),this.pdf.text(ie.text,Xe.x+this.posX,Xe.y+this.posY,{angle:ie.angle,align:Ce,renderingMode:ie.renderingMode,maxWidth:ie.maxWidth}),ie.scale>=.01&&(this.pdf.setFontSize(Mt),this.lineWidth=$t)},Te=function(ie,Ce,Pe,$e){Pe=Pe||0,$e=$e||0,this.pdf.internal.out(r(ie+Pe)+" "+i(Ce+$e)+" l")},we=function(ie,Ce,Pe){return this.pdf.lines(ie,Ce,Pe,null,null)},st=function(ie,Ce,Pe,$e,nt,Xe,pt,dt){this.pdf.internal.out([t(a(Pe+ie)),t(u($e+Ce)),t(a(nt+ie)),t(u(Xe+Ce)),t(a(pt+ie)),t(u(dt+Ce)),"c"].join(" "))},Ze=function(ie,Ce,Pe,$e){for(var nt=2*Math.PI,Xe=Math.PI/2;Ce>Pe;)Ce-=nt;var pt=Math.abs(Pe-Ce);pt<nt&&$e&&(pt=nt-pt);for(var dt=[],Rt=$e?-1:1,Mt=Ce;pt>1e-5;){var $t=Mt+Rt*Math.min(pt,Xe);dt.push(At.call(this,ie,Mt,$t)),pt-=Math.abs($t-Mt),Mt=$t}return dt},At=function(ie,Ce,Pe){var $e=(Pe-Ce)/2,nt=ie*Math.cos($e),Xe=ie*Math.sin($e),pt=nt,dt=-Xe,Rt=pt*pt+dt*dt,Mt=Rt+pt*nt+dt*Xe,$t=4/3*(Math.sqrt(2*Rt*Mt)-Mt)/(pt*Xe-dt*nt),jt=pt-$t*dt,vr=dt+$t*pt,Ft=jt,Ge=-vr,Cr=$e+Ce,pr=Math.cos(Cr),Kt=Math.sin(Cr);return{x1:ie*Math.cos(Ce),y1:ie*Math.sin(Ce),x2:jt*pr-vr*Kt,y2:jt*Kt+vr*pr,x3:Ft*pr-Ge*Kt,y3:Ft*Kt+Ge*pr,x4:ie*Math.cos(Pe),y4:ie*Math.sin(Pe)}},Le=function(ie){return 180*ie/Math.PI},He=function(ie,Ce,Pe,$e,nt,Xe){var pt=ie+.5*(Pe-ie),dt=Ce+.5*($e-Ce),Rt=nt+.5*(Pe-nt),Mt=Xe+.5*($e-Xe),$t=Math.min(ie,nt,pt,Rt),jt=Math.max(ie,nt,pt,Rt),vr=Math.min(Ce,Xe,dt,Mt),Ft=Math.max(Ce,Xe,dt,Mt);return new o($t,vr,jt-$t,Ft-vr)},it=function(ie,Ce,Pe,$e,nt,Xe,pt,dt){var Rt,Mt,$t,jt,vr,Ft,Ge,Cr,pr,Kt,ar,lr,cr,br,Dr=Pe-ie,Kr=$e-Ce,Lr=nt-Pe,Hr=Xe-$e,un=pt-nt,zr=dt-Xe;for(Mt=0;Mt<41;Mt++)pr=(Ge=($t=ie+(Rt=Mt/40)*Dr)+Rt*((vr=Pe+Rt*Lr)-$t))+Rt*(vr+Rt*(nt+Rt*un-vr)-Ge),Kt=(Cr=(jt=Ce+Rt*Kr)+Rt*((Ft=$e+Rt*Hr)-jt))+Rt*(Ft+Rt*(Xe+Rt*zr-Ft)-Cr),Mt==0?(ar=pr,lr=Kt,cr=pr,br=Kt):(ar=Math.min(ar,pr),lr=Math.min(lr,Kt),cr=Math.max(cr,pr),br=Math.max(br,Kt));return new o(Math.round(ar),Math.round(lr),Math.round(cr-ar),Math.round(br-lr))},Lt=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var ie,Ce,Pe=(ie=this.ctx.lineDash,Ce=this.ctx.lineDashOffset,JSON.stringify({lineDash:ie,lineDashOffset:Ce}));this.prevLineDash!==Pe&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=Pe)}}})(Xr.API),function(e){var t=function(u){var h,o,g,y,C,I,F,b,N,U;for(o=[],g=0,y=(u+=h="\0\0\0\0".slice(u.length%4||4)).length;y>g;g+=4)(C=(u.charCodeAt(g)<<24)+(u.charCodeAt(g+1)<<16)+(u.charCodeAt(g+2)<<8)+u.charCodeAt(g+3))!==0?(I=(C=((C=((C=((C=(C-(U=C%85))/85)-(N=C%85))/85)-(b=C%85))/85)-(F=C%85))/85)%85,o.push(I+33,F+33,b+33,N+33,U+33)):o.push(122);return function(H,k){for(var R=k;R>0;R--)H.pop()}(o,h.length),String.fromCharCode.apply(String,o)+"~>"},r=function(u){var h,o,g,y,C,I=String,F="length",b=255,N="charCodeAt",U="slice",H="replace";for(u[U](-2),u=u[U](0,-2)[H](/\s/g,"")[H]("z","!!!!!"),g=[],y=0,C=(u+=h="uuuuu"[U](u[F]%5||5))[F];C>y;y+=5)o=52200625*(u[N](y)-33)+614125*(u[N](y+1)-33)+7225*(u[N](y+2)-33)+85*(u[N](y+3)-33)+(u[N](y+4)-33),g.push(b&o>>24,b&o>>16,b&o>>8,b&o);return function(k,R){for(var V=R;V>0;V--)k.pop()}(g,h[F]),I.fromCharCode.apply(I,g)},i=function(u){var h=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((u=u.replace(/\s/g,"")).indexOf(">")!==-1&&(u=u.substr(0,u.indexOf(">"))),u.length%2&&(u+="0"),h.test(u)===!1)return"";for(var o="",g=0;g<u.length;g+=2)o+=String.fromCharCode("0x"+(u[g]+u[g+1]));return o},a=function(u){for(var h=new Uint8Array(u.length),o=u.length;o--;)h[o]=u.charCodeAt(o);return u=(h=yB(h)).reduce(function(g,y){return g+String.fromCharCode(y)},"")};e.processDataByFilters=function(u,h){var o=0,g=u||"",y=[];for(typeof(h=h||[])=="string"&&(h=[h]),o=0;o<h.length;o+=1)switch(h[o]){case"ASCII85Decode":case"/ASCII85Decode":g=r(g),y.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":g=t(g),y.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":g=i(g),y.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":g=g.split("").map(function(C){return("0"+C.charCodeAt().toString(16)).slice(-2)}).join("")+">",y.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":g=a(g),y.push("/FlateDecode");break;default:throw new Error('The filter: "'+h[o]+'" is not implemented')}return{data:g,reverseChain:y.reverse().join(" ")}}}(Xr.API),function(e){e.loadFile=function(t,r,i){return function(a,u,h){u=u!==!1,h=typeof h=="function"?h:function(){};var o=void 0;try{o=function(g,y,C){var I=new XMLHttpRequest,F=0,b=function(N){var U=N.length,H=[],k=String.fromCharCode;for(F=0;F<U;F+=1)H.push(k(255&N.charCodeAt(F)));return H.join("")};if(I.open("GET",g,!y),I.overrideMimeType("text/plain; charset=x-user-defined"),y===!1&&(I.onload=function(){I.status===200?C(b(this.responseText)):C(void 0)}),I.send(null),y&&I.status===200)return b(I.responseText)}(a,u,h)}catch{}return o}(t,r,i)},e.loadImageFile=e.loadFile}(Xr.API),function(e){function t(){return(tn.html2canvas?Promise.resolve(tn.html2canvas):dB(()=>Promise.resolve().then(()=>Kee),void 0)).catch(function(h){return Promise.reject(new Error("Could not load html2canvas: "+h))}).then(function(h){return h.default?h.default:h})}function r(){return(tn.DOMPurify?Promise.resolve(tn.DOMPurify):dB(()=>import("./purify.es-CQJ0hv7W.js"),[])).catch(function(h){return Promise.reject(new Error("Could not load dompurify: "+h))}).then(function(h){return h.default?h.default:h})}var i=function(h){var o=ei(h);return o==="undefined"?"undefined":o==="string"||h instanceof String?"string":o==="number"||h instanceof Number?"number":o==="function"||h instanceof Function?"function":h&&h.constructor===Array?"array":h&&h.nodeType===1?"element":o==="object"?"object":"unknown"},a=function(h,o){var g=document.createElement(h);for(var y in o.className&&(g.className=o.className),o.innerHTML&&o.dompurify&&(g.innerHTML=o.dompurify.sanitize(o.innerHTML)),o.style)g.style[y]=o.style[y];return g},u=function h(o){var g=Object.assign(h.convert(Promise.resolve()),JSON.parse(JSON.stringify(h.template))),y=h.convert(Promise.resolve(),g);return y=(y=y.setProgress(1,h,1,[h])).set(o)};(u.prototype=Object.create(Promise.prototype)).constructor=u,u.convert=function(h,o){return h.__proto__=o||u.prototype,h},u.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},u.prototype.from=function(h,o){return this.then(function(){switch(o=o||function(g){switch(i(g)){case"string":return"string";case"element":return g.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(h)){case"string":return this.then(r).then(function(g){return this.set({src:a("div",{innerHTML:h,dompurify:g})})});case"element":return this.set({src:h});case"canvas":return this.set({canvas:h});case"img":return this.set({img:h});default:return this.error("Unknown source type.")}})},u.prototype.to=function(h){switch(h){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},u.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var h={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},o=function g(y,C){for(var I=y.nodeType===3?document.createTextNode(y.nodeValue):y.cloneNode(!1),F=y.firstChild;F;F=F.nextSibling)C!==!0&&F.nodeType===1&&F.nodeName==="SCRIPT"||I.appendChild(g(F,C));return y.nodeType===1&&(y.nodeName==="CANVAS"?(I.width=y.width,I.height=y.height,I.getContext("2d").drawImage(y,0,0)):y.nodeName!=="TEXTAREA"&&y.nodeName!=="SELECT"||(I.value=y.value),I.addEventListener("load",function(){I.scrollTop=y.scrollTop,I.scrollLeft=y.scrollLeft},!0)),I}(this.prop.src,this.opt.html2canvas.javascriptEnabled);o.tagName==="BODY"&&(h.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=a("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=a("div",{className:"html2pdf__container",style:h}),this.prop.container.appendChild(o),this.prop.container.firstChild.appendChild(a("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},u.prototype.toCanvas=function(){var h=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(h).then(t).then(function(o){var g=Object.assign({},this.opt.html2canvas);return delete g.onrendered,o(this.prop.container,g)}).then(function(o){(this.opt.html2canvas.onrendered||function(){})(o),this.prop.canvas=o,document.body.removeChild(this.prop.overlay)})},u.prototype.toContext2d=function(){var h=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(h).then(t).then(function(o){var g=this.opt.jsPDF,y=this.opt.fontFaces,C=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,I=Object.assign({async:!0,allowTaint:!0,scale:C,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete I.onrendered,g.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,g.context2d.posX=this.opt.x,g.context2d.posY=this.opt.y,g.context2d.margin=this.opt.margin,g.context2d.fontFaces=y,y)for(var F=0;F<y.length;++F){var b=y[F],N=b.src.find(function(U){return U.format==="truetype"});N&&g.addFont(N.url,b.ref.name,b.ref.style)}return I.windowHeight=I.windowHeight||0,I.windowHeight=I.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):I.windowHeight,g.context2d.save(!0),o(this.prop.container,I)}).then(function(o){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(o),this.prop.canvas=o,document.body.removeChild(this.prop.overlay)})},u.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var h=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=h})},u.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},u.prototype.output=function(h,o,g){return(g=g||"pdf").toLowerCase()==="img"||g.toLowerCase()==="image"?this.outputImg(h,o):this.outputPdf(h,o)},u.prototype.outputPdf=function(h,o){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(h,o)})},u.prototype.outputImg=function(h){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(h){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+h+'" is not supported.'}})},u.prototype.save=function(h){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(h?{filename:h}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},u.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},u.prototype.set=function(h){if(i(h)!=="object")return this;var o=Object.keys(h||{}).map(function(g){if(g in u.template.prop)return function(){this.prop[g]=h[g]};switch(g){case"margin":return this.setMargin.bind(this,h.margin);case"jsPDF":return function(){return this.opt.jsPDF=h.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,h.pageSize);default:return function(){this.opt[g]=h[g]}}},this);return this.then(function(){return this.thenList(o)})},u.prototype.get=function(h,o){return this.then(function(){var g=h in u.template.prop?this.prop[h]:this.opt[h];return o?o(g):g})},u.prototype.setMargin=function(h){return this.then(function(){switch(i(h)){case"number":h=[h,h,h,h];case"array":if(h.length===2&&(h=[h[0],h[1],h[0],h[1]]),h.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=h}).then(this.setPageSize)},u.prototype.setPageSize=function(h){function o(g,y){return Math.floor(g*y/72*96)}return this.then(function(){(h=h||Xr.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(h.inner={width:h.width-this.opt.margin[1]-this.opt.margin[3],height:h.height-this.opt.margin[0]-this.opt.margin[2]},h.inner.px={width:o(h.inner.width,h.k),height:o(h.inner.height,h.k)},h.inner.ratio=h.inner.height/h.inner.width),this.prop.pageSize=h})},u.prototype.setProgress=function(h,o,g,y){return h!=null&&(this.progress.val=h),o!=null&&(this.progress.state=o),g!=null&&(this.progress.n=g),y!=null&&(this.progress.stack=y),this.progress.ratio=this.progress.val/this.progress.state,this},u.prototype.updateProgress=function(h,o,g,y){return this.setProgress(h?this.progress.val+h:null,o||null,g?this.progress.n+g:null,y?this.progress.stack.concat(y):null)},u.prototype.then=function(h,o){var g=this;return this.thenCore(h,o,function(y,C){return g.updateProgress(null,null,1,[y]),Promise.prototype.then.call(this,function(I){return g.updateProgress(null,y),I}).then(y,C).then(function(I){return g.updateProgress(1),I})})},u.prototype.thenCore=function(h,o,g){g=g||Promise.prototype.then,h&&(h=h.bind(this)),o&&(o=o.bind(this));var y=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?this:u.convert(Object.assign({},this),Promise.prototype),C=g.call(y,h,o);return u.convert(C,this.__proto__)},u.prototype.thenExternal=function(h,o){return Promise.prototype.then.call(this,h,o)},u.prototype.thenList=function(h){var o=this;return h.forEach(function(g){o=o.thenCore(g)}),o},u.prototype.catch=function(h){h&&(h=h.bind(this));var o=Promise.prototype.catch.call(this,h);return u.convert(o,this)},u.prototype.catchExternal=function(h){return Promise.prototype.catch.call(this,h)},u.prototype.error=function(h){return this.then(function(){throw new Error(h)})},u.prototype.using=u.prototype.set,u.prototype.saveAs=u.prototype.save,u.prototype.export=u.prototype.output,u.prototype.run=u.prototype.then,Xr.getPageSize=function(h,o,g){if(ei(h)==="object"){var y=h;h=y.orientation,o=y.unit||o,g=y.format||g}o=o||"mm",g=g||"a4",h=(""+(h||"P")).toLowerCase();var C,I=(""+g).toLowerCase(),F={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(o){case"pt":C=1;break;case"mm":C=72/25.4;break;case"cm":C=72/2.54;break;case"in":C=72;break;case"px":C=.75;break;case"pc":case"em":C=12;break;case"ex":C=6;break;default:throw"Invalid unit: "+o}var b,N=0,U=0;if(F.hasOwnProperty(I))N=F[I][1]/C,U=F[I][0]/C;else try{N=g[1],U=g[0]}catch{throw new Error("Invalid format: "+g)}if(h==="p"||h==="portrait")h="p",U>N&&(b=U,U=N,N=b);else{if(h!=="l"&&h!=="landscape")throw"Invalid orientation: "+h;h="l",N>U&&(b=U,U=N,N=b)}return{width:U,height:N,unit:o,k:C,orientation:h}},e.html=function(h,o){(o=o||{}).callback=o.callback||function(){},o.html2canvas=o.html2canvas||{},o.html2canvas.canvas=o.html2canvas.canvas||this.canvas,o.jsPDF=o.jsPDF||this,o.fontFaces=o.fontFaces?o.fontFaces.map(BB):null;var g=new u(o);return o.worker?g:g.from(h).doCallback()}}(Xr.API),Xr.API.addJS=function(e){return BT=e,this.internal.events.subscribe("postPutResources",function(){lv=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(lv+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),bT=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+BT+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){lv!==void 0&&bT!==void 0&&this.internal.out("/Names <</JavaScript "+lv+" 0 R>>")}),this},function(e){var t;e.events.push(["postPutResources",function(){var r=this,i=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var a=r.outline.render().split(/\r\n/),u=0;u<a.length;u++){var h=a[u],o=i.exec(h);if(o!=null){var g=o[1];r.internal.newObjectDeferredBegin(g,!1)}r.internal.write(h)}if(this.outline.createNamedDestinations){var y=this.internal.pages.length,C=[];for(u=0;u<y;u++){var I=r.internal.newObject();C.push(I);var F=r.internal.getPageInfo(u+1);r.internal.write("<< /D["+F.objId+" 0 R /XYZ null null null]>> endobj")}var b=r.internal.newObject();for(r.internal.write("<< /Names [ "),u=0;u<C.length;u++)r.internal.write("(page_"+(u+1)+")"+C[u]+" 0 R");r.internal.write(" ] >>","endobj"),t=r.internal.newObject(),r.internal.write("<< /Dests "+b+" 0 R"),r.internal.write(">>","endobj")}}]),e.events.push(["putCatalog",function(){this.outline.root.children.length>0&&(this.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&this.internal.write("/Names "+t+" 0 R"))}]),e.events.push(["initialized",function(){var r=this;r.outline={createNamedDestinations:!1,root:{children:[]}},r.outline.add=function(i,a,u){var h={title:a,options:u,children:[]};return i==null&&(i=this.root),i.children.push(h),h},r.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=r,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},r.outline.genIds_r=function(i){i.id=r.internal.newObjectDeferred();for(var a=0;a<i.children.length;a++)this.genIds_r(i.children[a])},r.outline.renderRoot=function(i){this.objStart(i),this.line("/Type /Outlines"),i.children.length>0&&(this.line("/First "+this.makeRef(i.children[0])),this.line("/Last "+this.makeRef(i.children[i.children.length-1]))),this.line("/Count "+this.count_r({count:0},i)),this.objEnd()},r.outline.renderItems=function(i){for(var a=this.ctx.pdf.internal.getVerticalCoordinateString,u=0;u<i.children.length;u++){var h=i.children[u];this.objStart(h),this.line("/Title "+this.makeString(h.title)),this.line("/Parent "+this.makeRef(i)),u>0&&this.line("/Prev "+this.makeRef(i.children[u-1])),u<i.children.length-1&&this.line("/Next "+this.makeRef(i.children[u+1])),h.children.length>0&&(this.line("/First "+this.makeRef(h.children[0])),this.line("/Last "+this.makeRef(h.children[h.children.length-1])));var o=this.count=this.count_r({count:0},h);if(o>0&&this.line("/Count "+o),h.options&&h.options.pageNumber){var g=r.internal.getPageInfo(h.options.pageNumber);this.line("/Dest ["+g.objId+" 0 R /XYZ 0 "+a(0)+" 0]")}this.objEnd()}for(var y=0;y<i.children.length;y++)this.renderItems(i.children[y])},r.outline.line=function(i){this.ctx.val+=i+`\r
`},r.outline.makeRef=function(i){return i.id+" 0 R"},r.outline.makeString=function(i){return"("+r.internal.pdfEscape(i)+")"},r.outline.objStart=function(i){this.ctx.val+=`\r
`+i.id+` 0 obj\r
<<\r
`},r.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},r.outline.count_r=function(i,a){for(var u=0;u<a.children.length;u++)i.count++,this.count_r(i,a.children[u]);return i.count}}])}(Xr.API),function(e){var t=[192,193,194,195,196,197,198,199];e.processJPEG=function(r,i,a,u,h,o){var g,y=this.decode.DCT_DECODE,C=null;if(typeof r=="string"||this.__addimage__.isArrayBuffer(r)||this.__addimage__.isArrayBufferView(r)){switch(r=h||r,r=this.__addimage__.isArrayBuffer(r)?new Uint8Array(r):r,(g=function(I){for(var F,b=256*I.charCodeAt(4)+I.charCodeAt(5),N=I.length,U={width:0,height:0,numcomponents:1},H=4;H<N;H+=2){if(H+=b,t.indexOf(I.charCodeAt(H+1))!==-1){F=256*I.charCodeAt(H+5)+I.charCodeAt(H+6),U={width:256*I.charCodeAt(H+7)+I.charCodeAt(H+8),height:F,numcomponents:I.charCodeAt(H+9)};break}b=256*I.charCodeAt(H+2)+I.charCodeAt(H+3)}return U}(r=this.__addimage__.isArrayBufferView(r)?this.__addimage__.arrayBufferToBinaryString(r):r)).numcomponents){case 1:o=this.color_spaces.DEVICE_GRAY;break;case 4:o=this.color_spaces.DEVICE_CMYK;break;case 3:o=this.color_spaces.DEVICE_RGB}C={data:r,width:g.width,height:g.height,colorSpace:o,bitsPerComponent:8,filter:y,index:i,alias:a}}return C}}(Xr.API);var Jf,Av,CT,ST,ET,Ite=function(){var e,t,r;function i(u){var h,o,g,y,C,I,F,b,N,U,H,k,R,V;for(this.data=u,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},I=null;;){switch(h=this.readUInt32(),N=(function(){var W,se;for(se=[],W=0;W<4;++W)se.push(String.fromCharCode(this.data[this.pos++]));return se}).call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(h);break;case"fcTL":I&&this.animation.frames.push(I),this.pos+=4,I={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},C=this.readUInt16(),y=this.readUInt16()||100,I.delay=1e3*C/y,I.disposeOp=this.data[this.pos++],I.blendOp=this.data[this.pos++],I.data=[];break;case"IDAT":case"fdAT":for(N==="fdAT"&&(this.pos+=4,h-=4),u=(I!=null?I.data:void 0)||this.imgData,k=0;0<=h?k<h:k>h;0<=h?++k:--k)u.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(g=this.palette.length/3,this.transparency.indexed=this.read(h),this.transparency.indexed.length>g)throw new Error("More transparent colors than palette size");if((U=g-this.transparency.indexed.length)>0)for(R=0;0<=U?R<U:R>U;0<=U?++R:--R)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(h)[0];break;case 2:this.transparency.rgb=this.read(h)}break;case"tEXt":F=(H=this.read(h)).indexOf(0),b=String.fromCharCode.apply(String,H.slice(0,F)),this.text[b]=String.fromCharCode.apply(String,H.slice(F+1));break;case"IEND":return I&&this.animation.frames.push(I),this.colors=(function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}).call(this),this.hasAlphaChannel=(V=this.colorType)===4||V===6,o=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*o,this.colorSpace=(function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}).call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=h}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}i.prototype.read=function(u){var h,o;for(o=[],h=0;0<=u?h<u:h>u;0<=u?++h:--h)o.push(this.data[this.pos++]);return o},i.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},i.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},i.prototype.decodePixels=function(u){var h=this.pixelBitlength/8,o=new Uint8Array(this.width*this.height*h),g=0,y=this;if(u==null&&(u=this.imgData),u.length===0)return new Uint8Array(0);function C(I,F,b,N){var U,H,k,R,V,W,se,fe,ue,ae,Be,Ue,te,de,Te,we,st,Ze,At,Le,He,it=Math.ceil((y.width-I)/b),Lt=Math.ceil((y.height-F)/N),ie=y.width==it&&y.height==Lt;for(de=h*it,Ue=ie?o:new Uint8Array(de*Lt),W=u.length,te=0,H=0;te<Lt&&g<W;){switch(u[g++]){case 0:for(R=st=0;st<de;R=st+=1)Ue[H++]=u[g++];break;case 1:for(R=Ze=0;Ze<de;R=Ze+=1)U=u[g++],V=R<h?0:Ue[H-h],Ue[H++]=(U+V)%256;break;case 2:for(R=At=0;At<de;R=At+=1)U=u[g++],k=(R-R%h)/h,Te=te&&Ue[(te-1)*de+k*h+R%h],Ue[H++]=(Te+U)%256;break;case 3:for(R=Le=0;Le<de;R=Le+=1)U=u[g++],k=(R-R%h)/h,V=R<h?0:Ue[H-h],Te=te&&Ue[(te-1)*de+k*h+R%h],Ue[H++]=(U+Math.floor((V+Te)/2))%256;break;case 4:for(R=He=0;He<de;R=He+=1)U=u[g++],k=(R-R%h)/h,V=R<h?0:Ue[H-h],te===0?Te=we=0:(Te=Ue[(te-1)*de+k*h+R%h],we=k&&Ue[(te-1)*de+(k-1)*h+R%h]),se=V+Te-we,fe=Math.abs(se-V),ae=Math.abs(se-Te),Be=Math.abs(se-we),ue=fe<=ae&&fe<=Be?V:ae<=Be?Te:we,Ue[H++]=(U+ue)%256;break;default:throw new Error("Invalid filter algorithm: "+u[g-1])}if(!ie){var Ce=((F+te*N)*y.width+I)*h,Pe=te*de;for(R=0;R<it;R+=1){for(var $e=0;$e<h;$e+=1)o[Ce++]=Ue[Pe++];Ce+=(b-1)*h}}te++}}return u=ote(u),y.interlaceMethod==1?(C(0,0,8,8),C(4,0,8,8),C(0,4,4,8),C(2,0,4,4),C(0,2,2,4),C(1,0,2,2),C(0,1,1,2)):C(0,0,1,1),o},i.prototype.decodePalette=function(){var u,h,o,g,y,C,I,F,b;for(o=this.palette,C=this.transparency.indexed||[],y=new Uint8Array((C.length||0)+o.length),g=0,u=0,h=I=0,F=o.length;I<F;h=I+=3)y[g++]=o[h],y[g++]=o[h+1],y[g++]=o[h+2],y[g++]=(b=C[u++])!=null?b:255;return y},i.prototype.copyToImageData=function(u,h){var o,g,y,C,I,F,b,N,U,H,k;if(g=this.colors,U=null,o=this.hasAlphaChannel,this.palette.length&&(U=(k=this._decodedPalette)!=null?k:this._decodedPalette=this.decodePalette(),g=4,o=!0),N=(y=u.data||u).length,I=U||h,C=F=0,g===1)for(;C<N;)b=U?4*h[C/4]:F,H=I[b++],y[C++]=H,y[C++]=H,y[C++]=H,y[C++]=o?I[b++]:255,F=b;else for(;C<N;)b=U?4*h[C/4]:F,y[C++]=I[b++],y[C++]=I[b++],y[C++]=I[b++],y[C++]=o?I[b++]:255,F=b},i.prototype.decode=function(){var u;return u=new Uint8Array(this.width*this.height*4),this.copyToImageData(u,this.decodePixels()),u};var a=function(){if(Object.prototype.toString.call(tn)==="[object Window]"){try{t=tn.document.createElement("canvas"),r=t.getContext("2d")}catch{return!1}return!0}return!1};return a(),e=function(u){var h;if(a()===!0)return r.width=u.width,r.height=u.height,r.clearRect(0,0,u.width,u.height),r.putImageData(u,0,0),(h=new Image).src=t.toDataURL(),h;throw new Error("This method requires a Browser with Canvas-capability.")},i.prototype.decodeFrames=function(u){var h,o,g,y,C,I,F,b;if(this.animation){for(b=[],o=C=0,I=(F=this.animation.frames).length;C<I;o=++C)h=F[o],g=u.createImageData(h.width,h.height),y=this.decodePixels(new Uint8Array(h.data)),this.copyToImageData(g,y),h.imageData=g,b.push(h.image=e(g));return b}},i.prototype.renderFrame=function(u,h){var o,g,y;return o=(g=this.animation.frames)[h],y=g[h-1],h===0&&u.clearRect(0,0,this.width,this.height),(y!=null?y.disposeOp:void 0)===1?u.clearRect(y.xOffset,y.yOffset,y.width,y.height):(y!=null?y.disposeOp:void 0)===2&&u.putImageData(y.imageData,y.xOffset,y.yOffset),o.blendOp===0&&u.clearRect(o.xOffset,o.yOffset,o.width,o.height),u.drawImage(o.image,o.xOffset,o.yOffset)},i.prototype.animate=function(u){var h,o,g,y,C,I,F=this;return o=0,I=this.animation,y=I.numFrames,g=I.frames,C=I.numPlays,(h=function(){var b,N;if(b=o++%y,N=g[b],F.renderFrame(u,b),y>1&&o/y<C)return F.animation._timeout=setTimeout(h,N.delay)})()},i.prototype.stopAnimation=function(){var u;return clearTimeout((u=this.animation)!=null?u._timeout:void 0)},i.prototype.render=function(u){var h,o;return u._png&&u._png.stopAnimation(),u._png=this,u.width=this.width,u.height=this.height,h=u.getContext("2d"),this.animation?(this.decodeFrames(h),this.animate(h)):(o=h.createImageData(this.width,this.height),this.copyToImageData(o,this.decodePixels()),h.putImageData(o,0,0))},i}();/**
 * @license
 *
 * Copyright (c) 2014 James Robb, https://github.com/jamesbrobb
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 * ====================================================================
 *//**
 * @license
 * (c) Dean McNamee <dean@gmail.com>, 2013.
 *
 * https://github.com/deanm/omggif
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to
 * deal in the Software without restriction, including without limitation the
 * rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
 * sell copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
 * IN THE SOFTWARE.
 *
 * omggif is a JavaScript implementation of a GIF 89a encoder and decoder,
 * including animation and compression.  It does not rely on any specific
 * underlying system, so should run in the browser, Node, or Plask.
 */function Fte(e){var t=0;if(e[t++]!==71||e[t++]!==73||e[t++]!==70||e[t++]!==56||(e[t++]+1&253)!=56||e[t++]!==97)throw new Error("Invalid GIF 87a/89a header.");var r=e[t++]|e[t++]<<8,i=e[t++]|e[t++]<<8,a=e[t++],u=a>>7,h=1<<(7&a)+1;e[t++],e[t++];var o=null,g=null;u&&(o=t,g=h,t+=3*h);var y=!0,C=[],I=0,F=null,b=0,N=null;for(this.width=r,this.height=i;y&&t<e.length;)switch(e[t++]){case 33:switch(e[t++]){case 255:if(e[t]!==11||e[t+1]==78&&e[t+2]==69&&e[t+3]==84&&e[t+4]==83&&e[t+5]==67&&e[t+6]==65&&e[t+7]==80&&e[t+8]==69&&e[t+9]==50&&e[t+10]==46&&e[t+11]==48&&e[t+12]==3&&e[t+13]==1&&e[t+16]==0)t+=14,N=e[t++]|e[t++]<<8,t++;else for(t+=12;;){if(!((te=e[t++])>=0))throw Error("Invalid block size");if(te===0)break;t+=te}break;case 249:if(e[t++]!==4||e[t+4]!==0)throw new Error("Invalid graphics extension block.");var U=e[t++];I=e[t++]|e[t++]<<8,F=e[t++],!(1&U)&&(F=null),b=U>>2&7,t++;break;case 254:for(;;){if(!((te=e[t++])>=0))throw Error("Invalid block size");if(te===0)break;t+=te}break;default:throw new Error("Unknown graphic control label: 0x"+e[t-1].toString(16))}break;case 44:var H=e[t++]|e[t++]<<8,k=e[t++]|e[t++]<<8,R=e[t++]|e[t++]<<8,V=e[t++]|e[t++]<<8,W=e[t++],se=W>>6&1,fe=1<<(7&W)+1,ue=o,ae=g,Be=!1;W>>7&&(Be=!0,ue=t,ae=fe,t+=3*fe);var Ue=t;for(t++;;){var te;if(!((te=e[t++])>=0))throw Error("Invalid block size");if(te===0)break;t+=te}C.push({x:H,y:k,width:R,height:V,has_local_palette:Be,palette_offset:ue,palette_size:ae,data_offset:Ue,data_length:t-Ue,transparent_index:F,interlaced:!!se,delay:I,disposal:b});break;case 59:y=!1;break;default:throw new Error("Unknown gif block: 0x"+e[t-1].toString(16))}this.numFrames=function(){return C.length},this.loopCount=function(){return N},this.frameInfo=function(de){if(de<0||de>=C.length)throw new Error("Frame index out of range.");return C[de]},this.decodeAndBlitFrameBGRA=function(de,Te){var we=this.frameInfo(de),st=we.width*we.height,Ze=new Uint8Array(st);IT(e,we.data_offset,Ze,st);var At=we.palette_offset,Le=we.transparent_index;Le===null&&(Le=256);var He=we.width,it=r-He,Lt=He,ie=4*(we.y*r+we.x),Ce=4*((we.y+we.height)*r+we.x),Pe=ie,$e=4*it;we.interlaced===!0&&($e+=4*r*7);for(var nt=8,Xe=0,pt=Ze.length;Xe<pt;++Xe){var dt=Ze[Xe];if(Lt===0&&(Lt=He,(Pe+=$e)>=Ce&&($e=4*it+4*r*(nt-1),Pe=ie+(He+it)*(nt<<1),nt>>=1)),dt===Le)Pe+=4;else{var Rt=e[At+3*dt],Mt=e[At+3*dt+1],$t=e[At+3*dt+2];Te[Pe++]=$t,Te[Pe++]=Mt,Te[Pe++]=Rt,Te[Pe++]=255}--Lt}},this.decodeAndBlitFrameRGBA=function(de,Te){var we=this.frameInfo(de),st=we.width*we.height,Ze=new Uint8Array(st);IT(e,we.data_offset,Ze,st);var At=we.palette_offset,Le=we.transparent_index;Le===null&&(Le=256);var He=we.width,it=r-He,Lt=He,ie=4*(we.y*r+we.x),Ce=4*((we.y+we.height)*r+we.x),Pe=ie,$e=4*it;we.interlaced===!0&&($e+=4*r*7);for(var nt=8,Xe=0,pt=Ze.length;Xe<pt;++Xe){var dt=Ze[Xe];if(Lt===0&&(Lt=He,(Pe+=$e)>=Ce&&($e=4*it+4*r*(nt-1),Pe=ie+(He+it)*(nt<<1),nt>>=1)),dt===Le)Pe+=4;else{var Rt=e[At+3*dt],Mt=e[At+3*dt+1],$t=e[At+3*dt+2];Te[Pe++]=Rt,Te[Pe++]=Mt,Te[Pe++]=$t,Te[Pe++]=255}--Lt}}}function IT(e,t,r,i){for(var a=e[t++],u=1<<a,h=u+1,o=h+1,g=a+1,y=(1<<g)-1,C=0,I=0,F=0,b=e[t++],N=new Int32Array(4096),U=null;;){for(;C<16&&b!==0;)I|=e[t++]<<C,C+=8,b===1?b=e[t++]:--b;if(C<g)break;var H=I&y;if(I>>=g,C-=g,H!==u){if(H===h)break;for(var k=H<o?H:U,R=0,V=k;V>u;)V=N[V]>>8,++R;var W=V;if(F+R+(k!==H?1:0)>i)return void yi.log("Warning, gif stream longer than expected.");r[F++]=W;var se=F+=R;for(k!==H&&(r[F++]=W),V=k;R--;)V=N[V],r[--se]=255&V,V>>=8;U!==null&&o<4096&&(N[o++]=U<<8|W,o>=y+1&&g<12&&(++g,y=y<<1|1)),U=H}else o=h+1,y=(1<<(g=a+1))-1,U=null}return F!==i&&yi.log("Warning, gif stream shorter than expected."),r}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function cb(e){var t,r,i,a,u,h=Math.floor,o=new Array(64),g=new Array(64),y=new Array(64),C=new Array(64),I=new Array(65535),F=new Array(65535),b=new Array(64),N=new Array(64),U=[],H=0,k=7,R=new Array(64),V=new Array(64),W=new Array(64),se=new Array(256),fe=new Array(2048),ue=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],ae=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],Be=[0,1,2,3,4,5,6,7,8,9,10,11],Ue=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],te=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],de=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],Te=[0,1,2,3,4,5,6,7,8,9,10,11],we=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],st=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function Ze(ie,Ce){for(var Pe=0,$e=0,nt=new Array,Xe=1;Xe<=16;Xe++){for(var pt=1;pt<=ie[Xe];pt++)nt[Ce[$e]]=[],nt[Ce[$e]][0]=Pe,nt[Ce[$e]][1]=Xe,$e++,Pe++;Pe*=2}return nt}function At(ie){for(var Ce=ie[0],Pe=ie[1]-1;Pe>=0;)Ce&1<<Pe&&(H|=1<<k),Pe--,--k<0&&(H==255?(Le(255),Le(0)):Le(H),k=7,H=0)}function Le(ie){U.push(ie)}function He(ie){Le(ie>>8&255),Le(255&ie)}function it(ie,Ce,Pe,$e,nt){for(var Xe,pt=nt[0],dt=nt[240],Rt=function(Kt,ar){var lr,cr,br,Dr,Kr,Lr,Hr,un,zr,Yr,ur=0;for(zr=0;zr<8;++zr){lr=Kt[ur],cr=Kt[ur+1],br=Kt[ur+2],Dr=Kt[ur+3],Kr=Kt[ur+4],Lr=Kt[ur+5],Hr=Kt[ur+6];var ct=lr+(un=Kt[ur+7]),Ae=lr-un,me=cr+Hr,_e=cr-Hr,Ne=br+Lr,et=br-Lr,tt=Dr+Kr,yt=Dr-Kr,rt=ct+tt,It=ct-tt,Ct=me+Ne,lt=me-Ne;Kt[ur]=rt+Ct,Kt[ur+4]=rt-Ct;var mt=.707106781*(lt+It);Kt[ur+2]=It+mt,Kt[ur+6]=It-mt;var Me=.382683433*((rt=yt+et)-(lt=_e+Ae)),Nt=.5411961*rt+Me,nr=1.306562965*lt+Me,tr=.707106781*(Ct=et+_e),Ar=Ae+tr,qt=Ae-tr;Kt[ur+5]=qt+Nt,Kt[ur+3]=qt-Nt,Kt[ur+1]=Ar+nr,Kt[ur+7]=Ar-nr,ur+=8}for(ur=0,zr=0;zr<8;++zr){lr=Kt[ur],cr=Kt[ur+8],br=Kt[ur+16],Dr=Kt[ur+24],Kr=Kt[ur+32],Lr=Kt[ur+40],Hr=Kt[ur+48];var Jr=lr+(un=Kt[ur+56]),jr=lr-un,Nr=cr+Hr,_r=cr-Hr,Ur=br+Lr,Ln=br-Lr,Yt=Dr+Kr,Xn=Dr-Kr,Bn=Jr+Yt,es=Jr-Yt,cs=Nr+Ur,Jt=Nr-Ur;Kt[ur]=Bn+cs,Kt[ur+32]=Bn-cs;var Qr=.707106781*(Jt+es);Kt[ur+16]=es+Qr,Kt[ur+48]=es-Qr;var Vr=.382683433*((Bn=Xn+Ln)-(Jt=_r+jr)),zi=.5411961*Bn+Vr,Ja=1.306562965*Jt+Vr,Us=.707106781*(cs=Ln+_r),$r=jr+Us,Xs=jr-Us;Kt[ur+40]=Xs+zi,Kt[ur+24]=Xs-zi,Kt[ur+8]=$r+Ja,Kt[ur+56]=$r-Ja,ur++}for(zr=0;zr<64;++zr)Yr=Kt[zr]*ar[zr],b[zr]=Yr>0?Yr+.5|0:Yr-.5|0;return b}(ie,Ce),Mt=0;Mt<64;++Mt)N[ue[Mt]]=Rt[Mt];var $t=N[0]-Pe;Pe=N[0],$t==0?At($e[0]):(At($e[F[Xe=32767+$t]]),At(I[Xe]));for(var jt=63;jt>0&&N[jt]==0;)jt--;if(jt==0)return At(pt),Pe;for(var vr,Ft=1;Ft<=jt;){for(var Ge=Ft;N[Ft]==0&&Ft<=jt;)++Ft;var Cr=Ft-Ge;if(Cr>=16){vr=Cr>>4;for(var pr=1;pr<=vr;++pr)At(dt);Cr&=15}Xe=32767+N[Ft],At(nt[(Cr<<4)+F[Xe]]),At(I[Xe]),Ft++}return jt!=63&&At(pt),Pe}function Lt(ie){ie=Math.min(Math.max(ie,1),100),u!=ie&&(function(Ce){for(var Pe=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],$e=0;$e<64;$e++){var nt=h((Pe[$e]*Ce+50)/100);nt=Math.min(Math.max(nt,1),255),o[ue[$e]]=nt}for(var Xe=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],pt=0;pt<64;pt++){var dt=h((Xe[pt]*Ce+50)/100);dt=Math.min(Math.max(dt,1),255),g[ue[pt]]=dt}for(var Rt=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],Mt=0,$t=0;$t<8;$t++)for(var jt=0;jt<8;jt++)y[Mt]=1/(o[ue[Mt]]*Rt[$t]*Rt[jt]*8),C[Mt]=1/(g[ue[Mt]]*Rt[$t]*Rt[jt]*8),Mt++}(ie<50?Math.floor(5e3/ie):Math.floor(200-2*ie)),u=ie)}this.encode=function(ie,Ce){Ce&&Lt(Ce),U=new Array,H=0,k=7,He(65496),He(65504),He(16),Le(74),Le(70),Le(73),Le(70),Le(0),Le(1),Le(1),Le(0),He(1),He(1),Le(0),Le(0),function(){He(65499),He(132),Le(0);for(var cr=0;cr<64;cr++)Le(o[cr]);Le(1);for(var br=0;br<64;br++)Le(g[br])}(),function(cr,br){He(65472),He(17),Le(8),He(br),He(cr),Le(3),Le(1),Le(17),Le(0),Le(2),Le(17),Le(1),Le(3),Le(17),Le(1)}(ie.width,ie.height),function(){He(65476),He(418),Le(0);for(var cr=0;cr<16;cr++)Le(ae[cr+1]);for(var br=0;br<=11;br++)Le(Be[br]);Le(16);for(var Dr=0;Dr<16;Dr++)Le(Ue[Dr+1]);for(var Kr=0;Kr<=161;Kr++)Le(te[Kr]);Le(1);for(var Lr=0;Lr<16;Lr++)Le(de[Lr+1]);for(var Hr=0;Hr<=11;Hr++)Le(Te[Hr]);Le(17);for(var un=0;un<16;un++)Le(we[un+1]);for(var zr=0;zr<=161;zr++)Le(st[zr])}(),He(65498),He(12),Le(3),Le(1),Le(0),Le(2),Le(17),Le(3),Le(17),Le(0),Le(63),Le(0);var Pe=0,$e=0,nt=0;H=0,k=7,this.encode.displayName="_encode_";for(var Xe,pt,dt,Rt,Mt,$t,jt,vr,Ft,Ge=ie.data,Cr=ie.width,pr=ie.height,Kt=4*Cr,ar=0;ar<pr;){for(Xe=0;Xe<Kt;){for(Mt=Kt*ar+Xe,jt=-1,vr=0,Ft=0;Ft<64;Ft++)$t=Mt+(vr=Ft>>3)*Kt+(jt=4*(7&Ft)),ar+vr>=pr&&($t-=Kt*(ar+1+vr-pr)),Xe+jt>=Kt&&($t-=Xe+jt-Kt+4),pt=Ge[$t++],dt=Ge[$t++],Rt=Ge[$t++],R[Ft]=(fe[pt]+fe[dt+256>>0]+fe[Rt+512>>0]>>16)-128,V[Ft]=(fe[pt+768>>0]+fe[dt+1024>>0]+fe[Rt+1280>>0]>>16)-128,W[Ft]=(fe[pt+1280>>0]+fe[dt+1536>>0]+fe[Rt+1792>>0]>>16)-128;Pe=it(R,y,Pe,t,i),$e=it(V,C,$e,r,a),nt=it(W,C,nt,r,a),Xe+=32}ar+=8}if(k>=0){var lr=[];lr[1]=k+1,lr[0]=(1<<k+1)-1,At(lr)}return He(65497),new Uint8Array(U)},e=e||50,function(){for(var ie=String.fromCharCode,Ce=0;Ce<256;Ce++)se[Ce]=ie(Ce)}(),t=Ze(ae,Be),r=Ze(de,Te),i=Ze(Ue,te),a=Ze(we,st),function(){for(var ie=1,Ce=2,Pe=1;Pe<=15;Pe++){for(var $e=ie;$e<Ce;$e++)F[32767+$e]=Pe,I[32767+$e]=[],I[32767+$e][1]=Pe,I[32767+$e][0]=$e;for(var nt=-(Ce-1);nt<=-ie;nt++)F[32767+nt]=Pe,I[32767+nt]=[],I[32767+nt][1]=Pe,I[32767+nt][0]=Ce-1+nt;ie<<=1,Ce<<=1}}(),function(){for(var ie=0;ie<256;ie++)fe[ie]=19595*ie,fe[ie+256>>0]=38470*ie,fe[ie+512>>0]=7471*ie+32768,fe[ie+768>>0]=-11059*ie,fe[ie+1024>>0]=-21709*ie,fe[ie+1280>>0]=32768*ie+8421375,fe[ie+1536>>0]=-27439*ie,fe[ie+1792>>0]=-5329*ie}(),Lt(e)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function LA(e,t){if(this.pos=0,this.buffer=e,this.datav=new DataView(e.buffer),this.is_with_alpha=!!t,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function FT(e){function t(ae){if(!ae)throw Error("assert :P")}function r(ae,Be,Ue){for(var te=0;4>te;te++)if(ae[Be+te]!=Ue.charCodeAt(te))return!0;return!1}function i(ae,Be,Ue,te,de){for(var Te=0;Te<de;Te++)ae[Be+Te]=Ue[te+Te]}function a(ae,Be,Ue,te){for(var de=0;de<te;de++)ae[Be+de]=Ue}function u(ae){return new Int32Array(ae)}function h(ae,Be){for(var Ue=[],te=0;te<ae;te++)Ue.push(new Be);return Ue}function o(ae,Be){var Ue=[];return function te(de,Te,we){for(var st=we[Te],Ze=0;Ze<st&&(de.push(we.length>Te+1?[]:new Be),!(we.length<Te+1));Ze++)te(de[Ze],Te+1,we)}(Ue,0,ae),Ue}var g=function(){var ae=this;function Be(B,T){for(var O=1<<T-1>>>0;B&O;)O>>>=1;return O?(B&O-1)+O:B}function Ue(B,T,O,q,le){t(!(q%O));do B[T+(q-=O)]=le;while(0<q)}function te(B,T,O,q,le){if(t(2328>=le),512>=le)var ge=u(512);else if((ge=u(le))==null)return 0;return function(ye,ve,xe,ke,Qe,Bt){var wt,ft,Ot=ve,Pt=1<<xe,ut=u(16),Ye=u(16);for(t(Qe!=0),t(ke!=null),t(ye!=null),t(0<xe),ft=0;ft<Qe;++ft){if(15<ke[ft])return 0;++ut[ke[ft]]}if(ut[0]==Qe)return 0;for(Ye[1]=0,wt=1;15>wt;++wt){if(ut[wt]>1<<wt)return 0;Ye[wt+1]=Ye[wt]+ut[wt]}for(ft=0;ft<Qe;++ft)wt=ke[ft],0<ke[ft]&&(Bt[Ye[wt]++]=ft);if(Ye[15]==1)return(ke=new de).g=0,ke.value=Bt[0],Ue(ye,Ot,1,Pt,ke),Pt;var Dt,Zt=-1,zt=Pt-1,xr=0,dr=1,Or=1,fr=1<<xe;for(ft=0,wt=1,Qe=2;wt<=xe;++wt,Qe<<=1){if(dr+=Or<<=1,0>(Or-=ut[wt]))return 0;for(;0<ut[wt];--ut[wt])(ke=new de).g=wt,ke.value=Bt[ft++],Ue(ye,Ot+xr,Qe,fr,ke),xr=Be(xr,wt)}for(wt=xe+1,Qe=2;15>=wt;++wt,Qe<<=1){if(dr+=Or<<=1,0>(Or-=ut[wt]))return 0;for(;0<ut[wt];--ut[wt]){if(ke=new de,(xr&zt)!=Zt){for(Ot+=fr,Dt=1<<(Zt=wt)-xe;15>Zt&&!(0>=(Dt-=ut[Zt]));)++Zt,Dt<<=1;Pt+=fr=1<<(Dt=Zt-xe),ye[ve+(Zt=xr&zt)].g=Dt+xe,ye[ve+Zt].value=Ot-ve-Zt}ke.g=wt-xe,ke.value=Bt[ft++],Ue(ye,Ot+(xr>>xe),Qe,fr,ke),xr=Be(xr,wt)}}return dr!=2*Ye[15]-1?0:Pt}(B,T,O,q,le,ge)}function de(){this.value=this.g=0}function Te(){this.value=this.g=0}function we(){this.G=h(5,de),this.H=u(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=h(Ki,Te)}function st(B,T,O,q){t(B!=null),t(T!=null),t(2147483648>q),B.Ca=254,B.I=0,B.b=-8,B.Ka=0,B.oa=T,B.pa=O,B.Jd=T,B.Yc=O+q,B.Zc=4<=q?O+q-4+1:O,Xe(B)}function Ze(B,T){for(var O=0;0<T--;)O|=dt(B,128)<<T;return O}function At(B,T){var O=Ze(B,T);return pt(B)?-O:O}function Le(B,T,O,q){var le,ge=0;for(t(B!=null),t(T!=null),t(4294967288>q),B.Sb=q,B.Ra=0,B.u=0,B.h=0,4<q&&(q=4),le=0;le<q;++le)ge+=T[O+le]<<8*le;B.Ra=ge,B.bb=q,B.oa=T,B.pa=O}function He(B){for(;8<=B.u&&B.bb<B.Sb;)B.Ra>>>=8,B.Ra+=B.oa[B.pa+B.bb]<<hA-8>>>0,++B.bb,B.u-=8;Pe(B)&&(B.h=1,B.u=0)}function it(B,T){if(t(0<=T),!B.h&&T<=Mo){var O=Ce(B)&Nl[T];return B.u+=T,He(B),O}return B.h=1,B.u=0}function Lt(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function ie(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function Ce(B){return B.Ra>>>(B.u&hA-1)>>>0}function Pe(B){return t(B.bb<=B.Sb),B.h||B.bb==B.Sb&&B.u>hA}function $e(B,T){B.u=T,B.h=Pe(B)}function nt(B){B.u>=dA&&(t(B.u>=dA),He(B))}function Xe(B){t(B!=null&&B.oa!=null),B.pa<B.Zc?(B.I=(B.oa[B.pa++]|B.I<<8)>>>0,B.b+=8):(t(B!=null&&B.oa!=null),B.pa<B.Yc?(B.b+=8,B.I=B.oa[B.pa++]|B.I<<8):B.Ka?B.b=0:(B.I<<=8,B.b+=8,B.Ka=1))}function pt(B){return Ze(B,1)}function dt(B,T){var O=B.Ca;0>B.b&&Xe(B);var q=B.b,le=O*T>>>8,ge=(B.I>>>q>le)+0;for(ge?(O-=le,B.I-=le+1<<q>>>0):O=le+1,q=O,le=0;256<=q;)le+=8,q>>=8;return q=7^le+Gi[q],B.b-=q,B.Ca=(O<<q)-1,ge}function Rt(B,T,O){B[T+0]=O>>24&255,B[T+1]=O>>16&255,B[T+2]=O>>8&255,B[T+3]=O>>0&255}function Mt(B,T){return B[T+0]<<0|B[T+1]<<8}function $t(B,T){return Mt(B,T)|B[T+2]<<16}function jt(B,T){return Mt(B,T)|Mt(B,T+2)<<16}function vr(B,T){var O=1<<T;return t(B!=null),t(0<T),B.X=u(O),B.X==null?0:(B.Mb=32-T,B.Xa=T,1)}function Ft(B,T){t(B!=null),t(T!=null),t(B.Xa==T.Xa),i(T.X,0,B.X,0,1<<T.Xa)}function Ge(){this.X=[],this.Xa=this.Mb=0}function Cr(B,T,O,q){t(O!=null),t(q!=null);var le=O[0],ge=q[0];return le==0&&(le=(B*ge+T/2)/T),ge==0&&(ge=(T*le+B/2)/B),0>=le||0>=ge?0:(O[0]=le,q[0]=ge,1)}function pr(B,T){return B+(1<<T)-1>>>T}function Kt(B,T){return((4278255360&B)+(4278255360&T)>>>0&4278255360)+((16711935&B)+(16711935&T)>>>0&16711935)>>>0}function ar(B,T){ae[T]=function(O,q,le,ge,ye,ve,xe){var ke;for(ke=0;ke<ye;++ke){var Qe=ae[B](ve[xe+ke-1],le,ge+ke);ve[xe+ke]=Kt(O[q+ke],Qe)}}}function lr(){this.ud=this.hd=this.jd=0}function cr(B,T){return((4278124286&(B^T))>>>1)+(B&T)>>>0}function br(B){return 0<=B&&256>B?B:0>B?0:255<B?255:void 0}function Dr(B,T){return br(B+(B-T+.5>>1))}function Kr(B,T,O){return Math.abs(T-O)-Math.abs(B-O)}function Lr(B,T,O,q,le,ge,ye){for(q=ge[ye-1],O=0;O<le;++O)ge[ye+O]=q=Kt(B[T+O],q)}function Hr(B,T,O,q,le){var ge;for(ge=0;ge<O;++ge){var ye=B[T+ge],ve=ye>>8&255,xe=16711935&(xe=(xe=16711935&ye)+((ve<<16)+ve));q[le+ge]=(4278255360&ye)+xe>>>0}}function un(B,T){T.jd=B>>0&255,T.hd=B>>8&255,T.ud=B>>16&255}function zr(B,T,O,q,le,ge){var ye;for(ye=0;ye<q;++ye){var ve=T[O+ye],xe=ve>>>8,ke=ve,Qe=255&(Qe=(Qe=ve>>>16)+((B.jd<<24>>24)*(xe<<24>>24)>>>5));ke=255&(ke=(ke=ke+((B.hd<<24>>24)*(xe<<24>>24)>>>5))+((B.ud<<24>>24)*(Qe<<24>>24)>>>5)),le[ge+ye]=(4278255360&ve)+(Qe<<16)+ke}}function Yr(B,T,O,q,le){ae[T]=function(ge,ye,ve,xe,ke,Qe,Bt,wt,ft){for(xe=Bt;xe<wt;++xe)for(Bt=0;Bt<ft;++Bt)ke[Qe++]=le(ve[q(ge[ye++])])},ae[B]=function(ge,ye,ve,xe,ke,Qe,Bt){var wt=8>>ge.b,ft=ge.Ea,Ot=ge.K[0],Pt=ge.w;if(8>wt)for(ge=(1<<ge.b)-1,Pt=(1<<wt)-1;ye<ve;++ye){var ut,Ye=0;for(ut=0;ut<ft;++ut)ut&ge||(Ye=q(xe[ke++])),Qe[Bt++]=le(Ot[Ye&Pt]),Ye>>=wt}else ae["VP8LMapColor"+O](xe,ke,Ot,Pt,Qe,Bt,ye,ve,ft)}}function ur(B,T,O,q,le){for(O=T+O;T<O;){var ge=B[T++];q[le++]=ge>>16&255,q[le++]=ge>>8&255,q[le++]=ge>>0&255}}function ct(B,T,O,q,le){for(O=T+O;T<O;){var ge=B[T++];q[le++]=ge>>16&255,q[le++]=ge>>8&255,q[le++]=ge>>0&255,q[le++]=ge>>24&255}}function Ae(B,T,O,q,le){for(O=T+O;T<O;){var ge=(ye=B[T++])>>16&240|ye>>12&15,ye=ye>>0&240|ye>>28&15;q[le++]=ge,q[le++]=ye}}function me(B,T,O,q,le){for(O=T+O;T<O;){var ge=(ye=B[T++])>>16&248|ye>>13&7,ye=ye>>5&224|ye>>3&31;q[le++]=ge,q[le++]=ye}}function _e(B,T,O,q,le){for(O=T+O;T<O;){var ge=B[T++];q[le++]=ge>>0&255,q[le++]=ge>>8&255,q[le++]=ge>>16&255}}function Ne(B,T,O,q,le,ge){if(ge==0)for(O=T+O;T<O;)Rt(q,((ge=B[T++])[0]>>24|ge[1]>>8&65280|ge[2]<<8&16711680|ge[3]<<24)>>>0),le+=32;else i(q,le,B,T,O)}function et(B,T){ae[T][0]=ae[B+"0"],ae[T][1]=ae[B+"1"],ae[T][2]=ae[B+"2"],ae[T][3]=ae[B+"3"],ae[T][4]=ae[B+"4"],ae[T][5]=ae[B+"5"],ae[T][6]=ae[B+"6"],ae[T][7]=ae[B+"7"],ae[T][8]=ae[B+"8"],ae[T][9]=ae[B+"9"],ae[T][10]=ae[B+"10"],ae[T][11]=ae[B+"11"],ae[T][12]=ae[B+"12"],ae[T][13]=ae[B+"13"],ae[T][14]=ae[B+"0"],ae[T][15]=ae[B+"0"]}function tt(B){return B==dd||B==$u||B==ou||B==oc}function yt(){this.eb=[],this.size=this.A=this.fb=0}function rt(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function It(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new yt,this.f.kb=new rt,this.sd=null}function Ct(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function lt(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function mt(B){return alert("todo:WebPSamplerProcessPlane"),B.T}function Me(B,T){var O=B.T,q=T.ba.f.RGBA,le=q.eb,ge=q.fb+B.ka*q.A,ye=zs[T.ba.S],ve=B.y,xe=B.O,ke=B.f,Qe=B.N,Bt=B.ea,wt=B.W,ft=T.cc,Ot=T.dc,Pt=T.Mc,ut=T.Nc,Ye=B.ka,Dt=B.ka+B.T,Zt=B.U,zt=Zt+1>>1;for(Ye==0?ye(ve,xe,null,null,ke,Qe,Bt,wt,ke,Qe,Bt,wt,le,ge,null,null,Zt):(ye(T.ec,T.fc,ve,xe,ft,Ot,Pt,ut,ke,Qe,Bt,wt,le,ge-q.A,le,ge,Zt),++O);Ye+2<Dt;Ye+=2)ft=ke,Ot=Qe,Pt=Bt,ut=wt,Qe+=B.Rc,wt+=B.Rc,ge+=2*q.A,ye(ve,(xe+=2*B.fa)-B.fa,ve,xe,ft,Ot,Pt,ut,ke,Qe,Bt,wt,le,ge-q.A,le,ge,Zt);return xe+=B.fa,B.j+Dt<B.o?(i(T.ec,T.fc,ve,xe,Zt),i(T.cc,T.dc,ke,Qe,zt),i(T.Mc,T.Nc,Bt,wt,zt),O--):1&Dt||ye(ve,xe,null,null,ke,Qe,Bt,wt,ke,Qe,Bt,wt,le,ge+q.A,null,null,Zt),O}function Nt(B,T,O){var q=B.F,le=[B.J];if(q!=null){var ge=B.U,ye=T.ba.S,ve=ye==su||ye==ou;T=T.ba.f.RGBA;var xe=[0],ke=B.ka;xe[0]=B.T,B.Kb&&(ke==0?--xe[0]:(--ke,le[0]-=B.width),B.j+B.ka+B.T==B.o&&(xe[0]=B.o-B.j-ke));var Qe=T.eb;ke=T.fb+ke*T.A,B=Kn(q,le[0],B.width,ge,xe,Qe,ke+(ve?0:3),T.A),t(O==xe),B&&tt(ye)&&fi(Qe,ke,ve,ge,xe,T.A)}return 0}function nr(B){var T=B.ma,O=T.ba.S,q=11>O,le=O==sn||O==iu||O==su||O==yA||O==12||tt(O);if(T.memory=null,T.Ib=null,T.Jb=null,T.Nd=null,!cA(T.Oa,B,le?11:12))return 0;if(le&&tt(O)&&Wt(),B.da)alert("todo:use_scaling");else{if(q){if(T.Ib=mt,B.Kb){if(O=B.U+1>>1,T.memory=u(B.U+2*O),T.memory==null)return 0;T.ec=T.memory,T.fc=0,T.cc=T.ec,T.dc=T.fc+B.U,T.Mc=T.cc,T.Nc=T.dc+O,T.Ib=Me,Wt()}}else alert("todo:EmitYUV");le&&(T.Jb=Nt,q&&vt())}if(q&&!Ju){for(B=0;256>B;++B)Bf[B]=89858*(B-128)+hl>>hu,md[B]=-22014*(B-128)+hl,hc[B]=-45773*(B-128),Cf[B]=113618*(B-128)+hl>>hu;for(B=Qa;B<Ss;++B)T=76283*(B-16)+hl>>hu,eh[B-Qa]=to(T,255),Sf[B-Qa]=to(T+8>>4,15);Ju=1}return 1}function tr(B){var T=B.ma,O=B.U,q=B.T;return t(!(1&B.ka)),0>=O||0>=q?0:(O=T.Ib(B,T),T.Jb!=null&&T.Jb(B,T,O),T.Dc+=O,1)}function Ar(B){B.ma.memory=null}function qt(B,T,O,q){return it(B,8)!=47?0:(T[0]=it(B,14)+1,O[0]=it(B,14)+1,q[0]=it(B,1),it(B,3)!=0?0:!B.h)}function Jr(B,T){if(4>B)return B+1;var O=B-2>>1;return(2+(1&B)<<O)+it(T,O)+1}function jr(B,T){return 120<T?T-120:1<=(O=((O=au[T-1])>>4)*B+(8-(15&O)))?O:1;var O}function Nr(B,T,O){var q=Ce(O),le=B[T+=255&q].g-8;return 0<le&&($e(O,O.u+8),q=Ce(O),T+=B[T].value,T+=q&(1<<le)-1),$e(O,O.u+B[T].g),B[T].value}function _r(B,T,O){return O.g+=B.g,O.value+=B.value<<T>>>0,t(8>=O.g),B.g}function Ur(B,T,O){var q=B.xc;return t((T=q==0?0:B.vc[B.md*(O>>q)+(T>>q)])<B.Wb),B.Ya[T]}function Ln(B,T,O,q){var le=B.ab,ge=B.c*T,ye=B.C;T=ye+T;var ve=O,xe=q;for(q=B.Ta,O=B.Ua;0<le--;){var ke=B.gc[le],Qe=ye,Bt=T,wt=ve,ft=xe,Ot=(xe=q,ve=O,ke.Ea);switch(t(Qe<Bt),t(Bt<=ke.nc),ke.hc){case 2:Vu(wt,ft,(Bt-Qe)*Ot,xe,ve);break;case 0:var Pt=Qe,ut=Bt,Ye=xe,Dt=ve,Zt=(fr=ke).Ea;Pt==0&&(hd(wt,ft,null,null,1,Ye,Dt),Lr(wt,ft+1,0,0,Zt-1,Ye,Dt+1),ft+=Zt,Dt+=Zt,++Pt);for(var zt=1<<fr.b,xr=zt-1,dr=pr(Zt,fr.b),Or=fr.K,fr=fr.w+(Pt>>fr.b)*dr;Pt<ut;){var Cn=Or,Mn=fr,pn=1;for(Dl(wt,ft,Ye,Dt-Zt,1,Ye,Dt);pn<Zt;){var vn=(pn&~xr)+zt;vn>Zt&&(vn=Zt),(0,ka[Cn[Mn++]>>8&15])(wt,ft+ +pn,Ye,Dt+pn-Zt,vn-pn,Ye,Dt+pn),pn=vn}ft+=Zt,Dt+=Zt,++Pt&xr||(fr+=dr)}Bt!=ke.nc&&i(xe,ve-Ot,xe,ve+(Bt-Qe-1)*Ot,Ot);break;case 1:for(Ot=wt,ut=ft,Zt=(wt=ke.Ea)-(Dt=wt&~(Ye=(ft=1<<ke.b)-1)),Pt=pr(wt,ke.b),zt=ke.K,ke=ke.w+(Qe>>ke.b)*Pt;Qe<Bt;){for(xr=zt,dr=ke,Or=new lr,fr=ut+Dt,Cn=ut+wt;ut<fr;)un(xr[dr++],Or),hn(Or,Ot,ut,ft,xe,ve),ut+=ft,ve+=ft;ut<Cn&&(un(xr[dr++],Or),hn(Or,Ot,ut,Zt,xe,ve),ut+=Zt,ve+=Zt),++Qe&Ye||(ke+=Pt)}break;case 3:if(wt==xe&&ft==ve&&0<ke.b){for(ut=xe,wt=Ot=ve+(Bt-Qe)*Ot-(Dt=(Bt-Qe)*pr(ke.Ea,ke.b)),ft=xe,Ye=ve,Pt=[],Dt=(Zt=Dt)-1;0<=Dt;--Dt)Pt[Dt]=ft[Ye+Dt];for(Dt=Zt-1;0<=Dt;--Dt)ut[wt+Dt]=Pt[Dt];yo(ke,Qe,Bt,xe,Ot,xe,ve)}else yo(ke,Qe,Bt,wt,ft,xe,ve)}ve=q,xe=O}xe!=O&&i(q,O,ve,xe,ge)}function Yt(B,T){var O=B.V,q=B.Ba+B.c*B.C,le=T-B.C;if(t(T<=B.l.o),t(16>=le),0<le){var ge=B.l,ye=B.Ta,ve=B.Ua,xe=ge.width;if(Ln(B,le,O,q),le=ve=[ve],t((O=B.C)<(q=T)),t(ge.v<ge.va),q>ge.o&&(q=ge.o),O<ge.j){var ke=ge.j-O;O=ge.j,le[0]+=ke*xe}if(O>=q?O=0:(le[0]+=4*ge.v,ge.ka=O-ge.j,ge.U=ge.va-ge.v,ge.T=q-O,O=1),O){if(ve=ve[0],11>(O=B.ca).S){var Qe=O.f.RGBA,Bt=(q=O.S,le=ge.U,ge=ge.T,ke=Qe.eb,Qe.A),wt=ge;for(Qe=Qe.fb+B.Ma*Qe.A;0<wt--;){var ft=ye,Ot=ve,Pt=le,ut=ke,Ye=Qe;switch(q){case sc:hs(ft,Ot,Pt,ut,Ye);break;case sn:di(ft,Ot,Pt,ut,Ye);break;case dd:di(ft,Ot,Pt,ut,Ye),fi(ut,Ye,0,Pt,1,0);break;case zl:la(ft,Ot,Pt,ut,Ye);break;case iu:Ne(ft,Ot,Pt,ut,Ye,1);break;case $u:Ne(ft,Ot,Pt,ut,Ye,1),fi(ut,Ye,0,Pt,1,0);break;case su:Ne(ft,Ot,Pt,ut,Ye,0);break;case ou:Ne(ft,Ot,Pt,ut,Ye,0),fi(ut,Ye,1,Pt,1,0);break;case yA:Ua(ft,Ot,Pt,ut,Ye);break;case oc:Ua(ft,Ot,Pt,ut,Ye),Vn(ut,Ye,Pt,1,0);break;case vf:aa(ft,Ot,Pt,ut,Ye);break;default:t(0)}ve+=xe,Qe+=Bt}B.Ma+=ge}else alert("todo:EmitRescaledRowsYUVA");t(B.Ma<=O.height)}}B.C=T,t(B.C<=B.i)}function Xn(B){var T;if(0<B.ua)return 0;for(T=0;T<B.Wb;++T){var O=B.Ya[T].G,q=B.Ya[T].H;if(0<O[1][q[1]+0].g||0<O[2][q[2]+0].g||0<O[3][q[3]+0].g)return 0}return 1}function Bn(B,T,O,q,le,ge){if(B.Z!=0){var ye=B.qd,ve=B.rd;for(t($i[B.Z]!=null);T<O;++T)$i[B.Z](ye,ve,q,le,q,le,ge),ye=q,ve=le,le+=ge;B.qd=ye,B.rd=ve}}function es(B,T){var O=B.l.ma,q=O.Z==0||O.Z==1?B.l.j:B.C;if(q=B.C<q?q:B.C,t(T<=B.l.o),T>q){var le=B.l.width,ge=O.ca,ye=O.tb+le*q,ve=B.V,xe=B.Ba+B.c*q,ke=B.gc;t(B.ab==1),t(ke[0].hc==3),ru(ke[0],q,T,ve,xe,ge,ye),Bn(O,q,T,ge,ye,le)}B.C=B.Ma=T}function cs(B,T,O,q,le,ge,ye){var ve=B.$/q,xe=B.$%q,ke=B.m,Qe=B.s,Bt=O+B.$,wt=Bt;le=O+q*le;var ft=O+q*ge,Ot=280+Qe.ua,Pt=B.Pb?ve:16777216,ut=0<Qe.ua?Qe.Wa:null,Ye=Qe.wc,Dt=Bt<ft?Ur(Qe,xe,ve):null;t(B.C<ge),t(ft<=le);var Zt=!1;e:for(;;){for(;Zt||Bt<ft;){var zt=0;if(ve>=Pt){var xr=Bt-O;t((Pt=B).Pb),Pt.wd=Pt.m,Pt.xd=xr,0<Pt.s.ua&&Ft(Pt.s.Wa,Pt.s.vb),Pt=ve+Ac}if(xe&Ye||(Dt=Ur(Qe,xe,ve)),t(Dt!=null),Dt.Qb&&(T[Bt]=Dt.qb,Zt=!0),!Zt)if(nt(ke),Dt.jc){zt=ke,xr=T;var dr=Bt,Or=Dt.pd[Ce(zt)&Ki-1];t(Dt.jc),256>Or.g?($e(zt,zt.u+Or.g),xr[dr]=Or.value,zt=0):($e(zt,zt.u+Or.g-256),t(256<=Or.value),zt=Or.value),zt==0&&(Zt=!0)}else zt=Nr(Dt.G[0],Dt.H[0],ke);if(ke.h)break;if(Zt||256>zt){if(!Zt)if(Dt.nd)T[Bt]=(Dt.qb|zt<<8)>>>0;else{if(nt(ke),Zt=Nr(Dt.G[1],Dt.H[1],ke),nt(ke),xr=Nr(Dt.G[2],Dt.H[2],ke),dr=Nr(Dt.G[3],Dt.H[3],ke),ke.h)break;T[Bt]=(dr<<24|Zt<<16|zt<<8|xr)>>>0}if(Zt=!1,++Bt,++xe>=q&&(xe=0,++ve,ye!=null&&ve<=ge&&!(ve%16)&&ye(B,ve),ut!=null))for(;wt<Bt;)zt=T[wt++],ut.X[(506832829*zt&4294967295)>>>ut.Mb]=zt}else if(280>zt){if(zt=Jr(zt-256,ke),xr=Nr(Dt.G[4],Dt.H[4],ke),nt(ke),xr=jr(q,xr=Jr(xr,ke)),ke.h)break;if(Bt-O<xr||le-Bt<zt)break e;for(dr=0;dr<zt;++dr)T[Bt+dr]=T[Bt+dr-xr];for(Bt+=zt,xe+=zt;xe>=q;)xe-=q,++ve,ye!=null&&ve<=ge&&!(ve%16)&&ye(B,ve);if(t(Bt<=le),xe&Ye&&(Dt=Ur(Qe,xe,ve)),ut!=null)for(;wt<Bt;)zt=T[wt++],ut.X[(506832829*zt&4294967295)>>>ut.Mb]=zt}else{if(!(zt<Ot))break e;for(Zt=zt-280,t(ut!=null);wt<Bt;)zt=T[wt++],ut.X[(506832829*zt&4294967295)>>>ut.Mb]=zt;zt=Bt,t(!(Zt>>>(xr=ut).Xa)),T[zt]=xr.X[Zt],Zt=!0}Zt||t(ke.h==Pe(ke))}if(B.Pb&&ke.h&&Bt<le)t(B.m.h),B.a=5,B.m=B.wd,B.$=B.xd,0<B.s.ua&&Ft(B.s.vb,B.s.Wa);else{if(ke.h)break e;ye!=null&&ye(B,ve>ge?ge:ve),B.a=0,B.$=Bt-O}return 1}return B.a=3,0}function Jt(B){t(B!=null),B.vc=null,B.yc=null,B.Ya=null;var T=B.Wa;T!=null&&(T.X=null),B.vb=null,t(B!=null)}function Qr(){var B=new Rl;return B==null?null:(B.a=0,B.xb=ul,et("Predictor","VP8LPredictors"),et("Predictor","VP8LPredictors_C"),et("PredictorAdd","VP8LPredictorsAdd"),et("PredictorAdd","VP8LPredictorsAdd_C"),Vu=Hr,hn=zr,hs=ur,di=ct,Ua=Ae,aa=me,la=_e,ae.VP8LMapColor32b=fA,ae.VP8LMapColor8b=nu,B)}function Vr(B,T,O,q,le){var ge=1,ye=[B],ve=[T],xe=q.m,ke=q.s,Qe=null,Bt=0;e:for(;;){if(O)for(;ge&&it(xe,1);){var wt=ye,ft=ve,Ot=q,Pt=1,ut=Ot.m,Ye=Ot.gc[Ot.ab],Dt=it(ut,2);if(Ot.Oc&1<<Dt)ge=0;else{switch(Ot.Oc|=1<<Dt,Ye.hc=Dt,Ye.Ea=wt[0],Ye.nc=ft[0],Ye.K=[null],++Ot.ab,t(4>=Ot.ab),Dt){case 0:case 1:Ye.b=it(ut,3)+2,Pt=Vr(pr(Ye.Ea,Ye.b),pr(Ye.nc,Ye.b),0,Ot,Ye.K),Ye.K=Ye.K[0];break;case 3:var Zt,zt=it(ut,8)+1,xr=16<zt?0:4<zt?1:2<zt?2:3;if(wt[0]=pr(Ye.Ea,xr),Ye.b=xr,Zt=Pt=Vr(zt,1,0,Ot,Ye.K)){var dr,Or=zt,fr=Ye,Cn=1<<(8>>fr.b),Mn=u(Cn);if(Mn==null)Zt=0;else{var pn=fr.K[0],vn=fr.w;for(Mn[0]=fr.K[0][0],dr=1;dr<1*Or;++dr)Mn[dr]=Kt(pn[vn+dr],Mn[dr-1]);for(;dr<4*Cn;++dr)Mn[dr]=0;fr.K[0]=null,fr.K[0]=Mn,Zt=1}}Pt=Zt;break;case 2:break;default:t(0)}ge=Pt}}if(ye=ye[0],ve=ve[0],ge&&it(xe,1)&&!(ge=1<=(Bt=it(xe,4))&&11>=Bt)){q.a=3;break e}var Nn;if(Nn=ge)t:{var wn,Er,si,fs=q,_i=ye,Hs=ve,kn=Bt,vo=O,wi=fs.m,Fi=fs.s,sr=[null],wr=1,js=0,Qo=lc[kn];r:for(;;){if(vo&&it(wi,1)){var xi=it(wi,3)+2,gi=pr(_i,xi),Hl=pr(Hs,xi),bi=gi*Hl;if(!Vr(gi,Hl,0,fs,sr))break r;for(sr=sr[0],Fi.xc=xi,wn=0;wn<bi;++wn){var dl=sr[wn]>>8&65535;sr[wn]=dl,dl>=wr&&(wr=dl+1)}}if(wi.h)break r;for(Er=0;5>Er;++Er){var zn=ac[Er];!Er&&0<kn&&(zn+=1<<kn),js<zn&&(js=zn)}var qn=h(wr*Qo,de),oi=wr,gd=h(oi,we);if(gd==null)var da=null;else t(65536>=oi),da=gd;var Oo=u(js);if(da==null||Oo==null||qn==null){fs.a=1;break r}var fc=qn;for(wn=si=0;wn<wr;++wn){var so=da[wn],zo=so.G,Oa=so.H,th=0,xA=1,rh=0;for(Er=0;5>Er;++Er){zn=ac[Er],zo[Er]=fc,Oa[Er]=si,!Er&&0<kn&&(zn+=1<<kn);i:{var v,n=zn,l=fs,f=Oo,p=fc,_=si,S=0,P=l.m,M=it(P,1);if(a(f,0,0,n),M){var z=it(P,1)+1,K=it(P,1),Z=it(P,K==0?1:8);f[Z]=1,z==2&&(f[Z=it(P,8)]=1);var $=1}else{var Y=u(19),he=it(P,4)+4;if(19<he){l.a=3;var Ie=0;break i}for(v=0;v<he;++v)Y[fd[v]]=it(P,3);var Ee=void 0,Fe=void 0,De=l,Ve=Y,Oe=n,We=f,Je=0,ze=De.m,ht=8,St=h(128,de);n:for(;te(St,0,7,Ve,19);){if(it(ze,1)){var gt=2+2*it(ze,3);if((Ee=2+it(ze,gt))>Oe)break n}else Ee=Oe;for(Fe=0;Fe<Oe&&Ee--;){nt(ze);var _t=St[0+(127&Ce(ze))];$e(ze,ze.u+_t.g);var xt=_t.value;if(16>xt)We[Fe++]=xt,xt!=0&&(ht=xt);else{var ir=xt==16,rr=xt-16,Qt=Zu[rr],mr=it(ze,qu[rr])+Qt;if(Fe+mr>Oe)break n;for(var rn=ir?ht:0;0<mr--;)We[Fe++]=rn}}Je=1;break n}Je||(De.a=3),$=Je}($=$&&!P.h)&&(S=te(p,_,8,f,n)),$&&S!=0?Ie=S:(l.a=3,Ie=0)}if(Ie==0)break r;if(xA&&Wu[Er]==1&&(xA=fc[si].g==0),th+=fc[si].g,si+=Ie,3>=Er){var mn,Zn=Oo[0];for(mn=1;mn<zn;++mn)Oo[mn]>Zn&&(Zn=Oo[mn]);rh+=Zn}}if(so.nd=xA,so.Qb=0,xA&&(so.qb=(zo[3][Oa[3]+0].value<<24|zo[1][Oa[1]+0].value<<16|zo[2][Oa[2]+0].value)>>>0,th==0&&256>zo[0][Oa[0]+0].value&&(so.Qb=1,so.qb+=zo[0][Oa[0]+0].value<<8)),so.jc=!so.Qb&&6>rh,so.jc){var En,In=so;for(En=0;En<Ki;++En){var xn=En,_n=In.pd[xn],Tn=In.G[0][In.H[0]+xn];256<=Tn.value?(_n.g=Tn.g+256,_n.value=Tn.value):(_n.g=0,_n.value=0,xn>>=_r(Tn,8,_n),xn>>=_r(In.G[1][In.H[1]+xn],16,_n),xn>>=_r(In.G[2][In.H[2]+xn],0,_n),_r(In.G[3][In.H[3]+xn],24,_n))}}}Fi.vc=sr,Fi.Wb=wr,Fi.Ya=da,Fi.yc=qn,Nn=1;break t}Nn=0}if(!(ge=Nn)){q.a=3;break e}if(0<Bt){if(ke.ua=1<<Bt,!vr(ke.Wa,Bt)){q.a=1,ge=0;break e}}else ke.ua=0;var qi=q,fn=ye,ss=ve,Zi=qi.s,za=Zi.xc;if(qi.c=fn,qi.i=ss,Zi.md=pr(fn,za),Zi.wc=za==0?-1:(1<<za)-1,O){q.xb=mi;break e}if((Qe=u(ye*ve))==null){q.a=1,ge=0;break e}ge=(ge=cs(q,Qe,0,ye,ve,ve,null))&&!xe.h;break e}return ge?(le!=null?le[0]=Qe:(t(Qe==null),t(O)),q.$=0,O||Jt(ke)):Jt(ke),ge}function zi(B,T){var O=B.c*B.i,q=O+T+16*T;return t(B.c<=T),B.V=u(q),B.V==null?(B.Ta=null,B.Ua=0,B.a=1,0):(B.Ta=B.V,B.Ua=B.Ba+O+T,1)}function Ja(B,T){var O=B.C,q=T-O,le=B.V,ge=B.Ba+B.c*O;for(t(T<=B.l.o);0<q;){var ye=16<q?16:q,ve=B.l.ma,xe=B.l.width,ke=xe*ye,Qe=ve.ca,Bt=ve.tb+xe*O,wt=B.Ta,ft=B.Ua;Ln(B,ye,le,ge),pi(wt,ft,Qe,Bt,ke),Bn(ve,O,O+ye,Qe,Bt,xe),q-=ye,le+=ye*B.c,O+=ye}t(O==T),B.C=B.Ma=T}function Us(){this.ub=this.yd=this.td=this.Rb=0}function $r(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function Xs(){this.Fb=this.Bb=this.Cb=0,this.Zb=u(4),this.Lb=u(4)}function Ca(){this.Yb=function(){var B=[];return function T(O,q,le){for(var ge=le[q],ye=0;ye<ge&&(O.push(le.length>q+1?[]:0),!(le.length<q+1));ye++)T(O[ye],q+1,le)}(B,0,[3,11]),B}()}function ui(){this.jb=u(3),this.Wc=o([4,8],Ca),this.Xc=o([4,17],Ca)}function iA(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new u(4),this.od=new u(4)}function Sa(){this.ld=this.La=this.dd=this.tc=0}function Fo(){this.Na=this.la=0}function sA(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function us(){this.ad=u(384),this.Za=0,this.Ob=u(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function $n(){this.uc=this.M=this.Nb=0,this.wa=Array(new Sa),this.Y=0,this.ya=Array(new us),this.aa=0,this.l=new el}function Kc(){this.y=u(16),this.f=u(8),this.ea=u(8)}function oA(){this.cb=this.a=0,this.sc="",this.m=new Lt,this.Od=new Us,this.Kc=new $r,this.ed=new iA,this.Qa=new Xs,this.Ic=this.$c=this.Aa=0,this.D=new $n,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=h(8,Lt),this.ia=0,this.pb=h(4,sA),this.Pa=new ui,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new Kc),this.Hd=0,this.rb=Array(new Fo),this.sb=0,this.wa=Array(new Sa),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new us),this.L=this.aa=0,this.gd=o([4,2],Sa),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function el(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function tl(){var B=new oA;return B!=null&&(B.a=0,B.sc="OK",B.cb=0,B.Xb=0,Ro||(Ro=qc)),B}function On(B,T,O){return B.a==0&&(B.a=T,B.sc=O,B.cb=0),0}function Gc(B,T,O){return 3<=O&&B[T+0]==157&&B[T+1]==1&&B[T+2]==42}function $c(B,T){if(B==null)return 0;if(B.a=0,B.sc="OK",T==null)return On(B,2,"null VP8Io passed to VP8GetHeaders()");var O=T.data,q=T.w,le=T.ha;if(4>le)return On(B,7,"Truncated header.");var ge=O[q+0]|O[q+1]<<8|O[q+2]<<16,ye=B.Od;if(ye.Rb=!(1&ge),ye.td=ge>>1&7,ye.yd=ge>>4&1,ye.ub=ge>>5,3<ye.td)return On(B,3,"Incorrect keyframe parameters.");if(!ye.yd)return On(B,4,"Frame not displayable.");q+=3,le-=3;var ve=B.Kc;if(ye.Rb){if(7>le)return On(B,7,"cannot parse picture header");if(!Gc(O,q,le))return On(B,3,"Bad code word");ve.c=16383&(O[q+4]<<8|O[q+3]),ve.Td=O[q+4]>>6,ve.i=16383&(O[q+6]<<8|O[q+5]),ve.Ud=O[q+6]>>6,q+=7,le-=7,B.za=ve.c+15>>4,B.Ub=ve.i+15>>4,T.width=ve.c,T.height=ve.i,T.Da=0,T.j=0,T.v=0,T.va=T.width,T.o=T.height,T.da=0,T.ib=T.width,T.hb=T.height,T.U=T.width,T.T=T.height,a((ge=B.Pa).jb,0,255,ge.jb.length),t((ge=B.Qa)!=null),ge.Cb=0,ge.Bb=0,ge.Fb=1,a(ge.Zb,0,0,ge.Zb.length),a(ge.Lb,0,0,ge.Lb)}if(ye.ub>le)return On(B,7,"bad partition length");st(ge=B.m,O,q,ye.ub),q+=ye.ub,le-=ye.ub,ye.Rb&&(ve.Ld=pt(ge),ve.Kd=pt(ge)),ve=B.Qa;var xe,ke=B.Pa;if(t(ge!=null),t(ve!=null),ve.Cb=pt(ge),ve.Cb){if(ve.Bb=pt(ge),pt(ge)){for(ve.Fb=pt(ge),xe=0;4>xe;++xe)ve.Zb[xe]=pt(ge)?At(ge,7):0;for(xe=0;4>xe;++xe)ve.Lb[xe]=pt(ge)?At(ge,6):0}if(ve.Bb)for(xe=0;3>xe;++xe)ke.jb[xe]=pt(ge)?Ze(ge,8):255}else ve.Bb=0;if(ge.Ka)return On(B,3,"cannot parse segment header");if((ve=B.ed).zd=pt(ge),ve.Tb=Ze(ge,6),ve.wb=Ze(ge,3),ve.Pc=pt(ge),ve.Pc&&pt(ge)){for(ke=0;4>ke;++ke)pt(ge)&&(ve.vd[ke]=At(ge,6));for(ke=0;4>ke;++ke)pt(ge)&&(ve.od[ke]=At(ge,6))}if(B.L=ve.Tb==0?0:ve.zd?1:2,ge.Ka)return On(B,3,"cannot parse filter header");var Qe=le;if(le=xe=q,q=xe+Qe,ve=Qe,B.Xb=(1<<Ze(B.m,2))-1,Qe<3*(ke=B.Xb))O=7;else{for(xe+=3*ke,ve-=3*ke,Qe=0;Qe<ke;++Qe){var Bt=O[le+0]|O[le+1]<<8|O[le+2]<<16;Bt>ve&&(Bt=ve),st(B.Jc[+Qe],O,xe,Bt),xe+=Bt,ve-=Bt,le+=3}st(B.Jc[+ke],O,xe,ve),O=xe<q?0:5}if(O!=0)return On(B,O,"cannot parse partitions");for(O=Ze(xe=B.m,7),le=pt(xe)?At(xe,4):0,q=pt(xe)?At(xe,4):0,ve=pt(xe)?At(xe,4):0,ke=pt(xe)?At(xe,4):0,xe=pt(xe)?At(xe,4):0,Qe=B.Qa,Bt=0;4>Bt;++Bt){if(Qe.Cb){var wt=Qe.Zb[Bt];Qe.Fb||(wt+=O)}else{if(0<Bt){B.pb[Bt]=B.pb[0];continue}wt=O}var ft=B.pb[Bt];ft.Sc[0]=vA[to(wt+le,127)],ft.Sc[1]=lu[to(wt+0,127)],ft.Eb[0]=2*vA[to(wt+q,127)],ft.Eb[1]=101581*lu[to(wt+ve,127)]>>16,8>ft.Eb[1]&&(ft.Eb[1]=8),ft.Qc[0]=vA[to(wt+ke,117)],ft.Qc[1]=lu[to(wt+xe,127)],ft.lc=wt+xe}if(!ye.Rb)return On(B,4,"Not a key frame.");for(pt(ge),ye=B.Pa,O=0;4>O;++O){for(le=0;8>le;++le)for(q=0;3>q;++q)for(ve=0;11>ve;++ve)ke=dt(ge,xf[O][le][q][ve])?Ze(ge,8):pd[O][le][q][ve],ye.Wc[O][le].Yb[q][ve]=ke;for(le=0;17>le;++le)ye.Xc[O][le]=ye.Wc[O][cu[le]]}return B.kc=pt(ge),B.kc&&(B.Bd=Ze(ge,8)),B.cb=1}function qc(B,T,O,q,le,ge,ye){var ve=T[le].Yb[O];for(O=0;16>le;++le){if(!dt(B,ve[O+0]))return le;for(;!dt(B,ve[O+1]);)if(ve=T[++le].Yb[0],O=0,le==16)return 16;var xe=T[le+1].Yb;if(dt(B,ve[O+2])){var ke=B,Qe=0;if(dt(ke,(wt=ve)[(Bt=O)+3]))if(dt(ke,wt[Bt+6])){for(ve=0,Bt=2*(Qe=dt(ke,wt[Bt+8]))+(wt=dt(ke,wt[Bt+9+Qe])),Qe=0,wt=gm[Bt];wt[ve];++ve)Qe+=Qe+dt(ke,wt[ve]);Qe+=3+(8<<Bt)}else dt(ke,wt[Bt+7])?(Qe=7+2*dt(ke,165),Qe+=dt(ke,145)):Qe=5+dt(ke,159);else Qe=dt(ke,wt[Bt+4])?3+dt(ke,wt[Bt+5]):2;ve=xe[2]}else Qe=1,ve=xe[1];xe=ye+_f[le],0>(ke=B).b&&Xe(ke);var Bt,wt=ke.b,ft=(Bt=ke.Ca>>1)-(ke.I>>wt)>>31;--ke.b,ke.Ca+=ft,ke.Ca|=1,ke.I-=(Bt+1&ft)<<wt,ge[xe]=((Qe^ft)-ft)*q[(0<le)+0]}return 16}function Ea(B){var T=B.rb[B.sb-1];T.la=0,T.Na=0,a(B.zc,0,0,B.zc.length),B.ja=0}function zu(B,T){if(B==null)return 0;if(T==null)return On(B,2,"NULL VP8Io parameter in VP8Decode().");if(!B.cb&&!$c(B,T))return 0;if(t(B.cb),T.ac==null||T.ac(T)){T.ob&&(B.L=0);var O=wA[B.L];if(B.L==2?(B.yb=0,B.zb=0):(B.yb=T.v-O>>4,B.zb=T.j-O>>4,0>B.yb&&(B.yb=0),0>B.zb&&(B.zb=0)),B.Va=T.o+15+O>>4,B.Hb=T.va+15+O>>4,B.Hb>B.za&&(B.Hb=B.za),B.Va>B.Ub&&(B.Va=B.Ub),0<B.L){var q=B.ed;for(O=0;4>O;++O){var le;if(B.Qa.Cb){var ge=B.Qa.Lb[O];B.Qa.Fb||(ge+=q.Tb)}else ge=q.Tb;for(le=0;1>=le;++le){var ye=B.gd[O][le],ve=ge;if(q.Pc&&(ve+=q.vd[0],le&&(ve+=q.od[0])),0<(ve=0>ve?0:63<ve?63:ve)){var xe=ve;0<q.wb&&(xe=4<q.wb?xe>>2:xe>>1)>9-q.wb&&(xe=9-q.wb),1>xe&&(xe=1),ye.dd=xe,ye.tc=2*ve+xe,ye.ld=40<=ve?2:15<=ve?1:0}else ye.tc=0;ye.La=le}}}O=0}else On(B,6,"Frame setup failed"),O=B.a;if(O=O==0){if(O){B.$c=0,0<B.Aa||(B.Ic=No);e:{O=B.Ic,q=4*(xe=B.za);var ke=32*xe,Qe=xe+1,Bt=0<B.L?xe*(0<B.Aa?2:1):0,wt=(B.Aa==2?2:1)*xe;if((ye=q+832+(le=3*(16*O+wA[B.L])/2*ke)+(ge=B.Fa!=null&&0<B.Fa.length?B.Kc.c*B.Kc.i:0))!=ye)O=0;else{if(ye>B.Vb){if(B.Vb=0,B.Ec=u(ye),B.Fc=0,B.Ec==null){O=On(B,1,"no memory during frame initialization.");break e}B.Vb=ye}ye=B.Ec,ve=B.Fc,B.Ac=ye,B.Bc=ve,ve+=q,B.Gd=h(ke,Kc),B.Hd=0,B.rb=h(Qe+1,Fo),B.sb=1,B.wa=Bt?h(Bt,Sa):null,B.Y=0,B.D.Nb=0,B.D.wa=B.wa,B.D.Y=B.Y,0<B.Aa&&(B.D.Y+=xe),t(!0),B.oc=ye,B.pc=ve,ve+=832,B.ya=h(wt,us),B.aa=0,B.D.ya=B.ya,B.D.aa=B.aa,B.Aa==2&&(B.D.aa+=xe),B.R=16*xe,B.B=8*xe,xe=(ke=wA[B.L])*B.R,ke=ke/2*B.B,B.sa=ye,B.ta=ve+xe,B.qa=B.sa,B.ra=B.ta+16*O*B.R+ke,B.Ha=B.qa,B.Ia=B.ra+8*O*B.B+ke,B.$c=0,ve+=le,B.mb=ge?ye:null,B.nb=ge?ve:null,t(ve+ge<=B.Fc+B.Vb),Ea(B),a(B.Ac,B.Bc,0,q),O=1}}if(O){if(T.ka=0,T.y=B.sa,T.O=B.ta,T.f=B.qa,T.N=B.ra,T.ea=B.Ha,T.Vd=B.Ia,T.fa=B.R,T.Rc=B.B,T.F=null,T.J=0,!Al){for(O=-255;255>=O;++O)Jn[255+O]=0>O?-O:O;for(O=-1020;1020>=O;++O)Uo[1020+O]=-128>O?-128:127<O?127:O;for(O=-112;112>=O;++O)Ol[112+O]=-16>O?-16:15<O?15:O;for(O=-255;510>=O;++O)Na[255+O]=0>O?0:255<O?255:O;Al=1}pA=JA,Aa=Zc,mA=YA,Os=Hu,ko=aA,jn=rl,nc=il,Ku=Po,ic=Ul,gA=Pa,Ql=vi,ca=Ta,Ra=Jc,ol=oa,al=Yc,ro=eo,ll=mo,ds=go,io[0]=Un,io[1]=an,io[2]=Wc,io[3]=ts,io[4]=Hi,io[5]=Rn,io[6]=Ei,io[7]=kl,io[8]=Bs,io[9]=An,ua[0]=Ns,ua[1]=sa,ua[2]=Rs,ua[3]=Pl,ua[4]=ri,ua[5]=ln,ua[6]=Ml,Da[0]=Tr,Da[1]=ia,Da[2]=Gr,Da[3]=Zr,Da[4]=Ii,Da[5]=nl,Da[6]=Fa,O=1}else O=0}O&&(O=function(ft,Ot){for(ft.M=0;ft.M<ft.Va;++ft.M){var Pt,ut=ft.Jc[ft.M&ft.Xb],Ye=ft.m,Dt=ft;for(Pt=0;Pt<Dt.za;++Pt){var Zt=Ye,zt=Dt,xr=zt.Ac,dr=zt.Bc+4*Pt,Or=zt.zc,fr=zt.ya[zt.aa+Pt];if(zt.Qa.Bb?fr.$b=dt(Zt,zt.Pa.jb[0])?2+dt(Zt,zt.Pa.jb[2]):dt(Zt,zt.Pa.jb[1]):fr.$b=0,zt.kc&&(fr.Ad=dt(Zt,zt.Bd)),fr.Za=!dt(Zt,145)+0,fr.Za){var Cn=fr.Ob,Mn=0;for(zt=0;4>zt;++zt){var pn,vn=Or[0+zt];for(pn=0;4>pn;++pn){vn=wf[xr[dr+pn]][vn];for(var Nn=Au[dt(Zt,vn[0])];0<Nn;)Nn=Au[2*Nn+dt(Zt,vn[Nn])];vn=-Nn,xr[dr+pn]=vn}i(Cn,Mn,xr,dr,4),Mn+=4,Or[0+zt]=vn}}else vn=dt(Zt,156)?dt(Zt,128)?1:3:dt(Zt,163)?2:0,fr.Ob[0]=vn,a(xr,dr,vn,4),a(Or,0,vn,4);fr.Dd=dt(Zt,142)?dt(Zt,114)?dt(Zt,183)?1:3:2:0}if(Dt.m.Ka)return On(ft,7,"Premature end-of-partition0 encountered.");for(;ft.ja<ft.za;++ft.ja){if(Dt=ut,Zt=(Ye=ft).rb[Ye.sb-1],xr=Ye.rb[Ye.sb+Ye.ja],Pt=Ye.ya[Ye.aa+Ye.ja],dr=Ye.kc?Pt.Ad:0)Zt.la=xr.la=0,Pt.Za||(Zt.Na=xr.Na=0),Pt.Hc=0,Pt.Gc=0,Pt.ia=0;else{var wn,Er;if(Zt=xr,xr=Dt,dr=Ye.Pa.Xc,Or=Ye.ya[Ye.aa+Ye.ja],fr=Ye.pb[Or.$b],zt=Or.ad,Cn=0,Mn=Ye.rb[Ye.sb-1],vn=pn=0,a(zt,Cn,0,384),Or.Za)var si=0,fs=dr[3];else{Nn=u(16);var _i=Zt.Na+Mn.Na;if(_i=Ro(xr,dr[1],_i,fr.Eb,0,Nn,0),Zt.Na=Mn.Na=(0<_i)+0,1<_i)pA(Nn,0,zt,Cn);else{var Hs=Nn[0]+3>>3;for(Nn=0;256>Nn;Nn+=16)zt[Cn+Nn]=Hs}si=1,fs=dr[0]}var kn=15&Zt.la,vo=15&Mn.la;for(Nn=0;4>Nn;++Nn){var wi=1&vo;for(Hs=Er=0;4>Hs;++Hs)kn=kn>>1|(wi=(_i=Ro(xr,fs,_i=wi+(1&kn),fr.Sc,si,zt,Cn))>si)<<7,Er=Er<<2|(3<_i?3:1<_i?2:zt[Cn+0]!=0),Cn+=16;kn>>=4,vo=vo>>1|wi<<7,pn=(pn<<8|Er)>>>0}for(fs=kn,si=vo>>4,wn=0;4>wn;wn+=2){for(Er=0,kn=Zt.la>>4+wn,vo=Mn.la>>4+wn,Nn=0;2>Nn;++Nn){for(wi=1&vo,Hs=0;2>Hs;++Hs)_i=wi+(1&kn),kn=kn>>1|(wi=0<(_i=Ro(xr,dr[2],_i,fr.Qc,0,zt,Cn)))<<3,Er=Er<<2|(3<_i?3:1<_i?2:zt[Cn+0]!=0),Cn+=16;kn>>=2,vo=vo>>1|wi<<5}vn|=Er<<4*wn,fs|=kn<<4<<wn,si|=(240&vo)<<wn}Zt.la=fs,Mn.la=si,Or.Hc=pn,Or.Gc=vn,Or.ia=43690&vn?0:fr.ia,dr=!(pn|vn)}if(0<Ye.L&&(Ye.wa[Ye.Y+Ye.ja]=Ye.gd[Pt.$b][Pt.Za],Ye.wa[Ye.Y+Ye.ja].La|=!dr),Dt.Ka)return On(ft,7,"Premature end-of-file encountered.")}if(Ea(ft),Ye=Ot,Dt=1,Pt=(ut=ft).D,Zt=0<ut.L&&ut.M>=ut.zb&&ut.M<=ut.Va,ut.Aa==0)e:{if(Pt.M=ut.M,Pt.uc=Zt,tu(ut,Pt),Dt=1,Pt=(Er=ut.D).Nb,Zt=(vn=wA[ut.L])*ut.R,xr=vn/2*ut.B,Nn=16*Pt*ut.R,Hs=8*Pt*ut.B,dr=ut.sa,Or=ut.ta-Zt+Nn,fr=ut.qa,zt=ut.ra-xr+Hs,Cn=ut.Ha,Mn=ut.Ia-xr+Hs,vo=(kn=Er.M)==0,pn=kn>=ut.Va-1,ut.Aa==2&&tu(ut,Er),Er.uc)for(wi=(_i=ut).D.M,t(_i.D.uc),Er=_i.yb;Er<_i.Hb;++Er){si=Er,fs=wi;var Fi=(sr=(zn=_i).D).Nb;wn=zn.R;var sr=sr.wa[sr.Y+si],wr=zn.sa,js=zn.ta+16*Fi*wn+16*si,Qo=sr.dd,xi=sr.tc;if(xi!=0)if(t(3<=xi),zn.L==1)0<si&&ro(wr,js,wn,xi+4),sr.La&&ds(wr,js,wn,xi),0<fs&&al(wr,js,wn,xi+4),sr.La&&ll(wr,js,wn,xi);else{var gi=zn.B,Hl=zn.qa,bi=zn.ra+8*Fi*gi+8*si,dl=zn.Ha,zn=zn.Ia+8*Fi*gi+8*si;Fi=sr.ld,0<si&&(Ku(wr,js,wn,xi+4,Qo,Fi),gA(Hl,bi,dl,zn,gi,xi+4,Qo,Fi)),sr.La&&(ca(wr,js,wn,xi,Qo,Fi),ol(Hl,bi,dl,zn,gi,xi,Qo,Fi)),0<fs&&(nc(wr,js,wn,xi+4,Qo,Fi),ic(Hl,bi,dl,zn,gi,xi+4,Qo,Fi)),sr.La&&(Ql(wr,js,wn,xi,Qo,Fi),Ra(Hl,bi,dl,zn,gi,xi,Qo,Fi))}}if(ut.ia&&alert("todo:DitherRow"),Ye.put!=null){if(Er=16*kn,kn=16*(kn+1),vo?(Ye.y=ut.sa,Ye.O=ut.ta+Nn,Ye.f=ut.qa,Ye.N=ut.ra+Hs,Ye.ea=ut.Ha,Ye.W=ut.Ia+Hs):(Er-=vn,Ye.y=dr,Ye.O=Or,Ye.f=fr,Ye.N=zt,Ye.ea=Cn,Ye.W=Mn),pn||(kn-=vn),kn>Ye.o&&(kn=Ye.o),Ye.F=null,Ye.J=null,ut.Fa!=null&&0<ut.Fa.length&&Er<kn&&(Ye.J=Ma(ut,Ye,Er,kn-Er),Ye.F=ut.mb,Ye.F==null&&Ye.F.length==0)){Dt=On(ut,3,"Could not decode alpha data.");break e}Er<Ye.j&&(vn=Ye.j-Er,Er=Ye.j,t(!(1&vn)),Ye.O+=ut.R*vn,Ye.N+=ut.B*(vn>>1),Ye.W+=ut.B*(vn>>1),Ye.F!=null&&(Ye.J+=Ye.width*vn)),Er<kn&&(Ye.O+=Ye.v,Ye.N+=Ye.v>>1,Ye.W+=Ye.v>>1,Ye.F!=null&&(Ye.J+=Ye.v),Ye.ka=Er-Ye.j,Ye.U=Ye.va-Ye.v,Ye.T=kn-Er,Dt=Ye.put(Ye))}Pt+1!=ut.Ic||pn||(i(ut.sa,ut.ta-Zt,dr,Or+16*ut.R,Zt),i(ut.qa,ut.ra-xr,fr,zt+8*ut.B,xr),i(ut.Ha,ut.Ia-xr,Cn,Mn+8*ut.B,xr))}if(!Dt)return On(ft,6,"Output aborted.")}return 1}(B,T)),T.bc!=null&&T.bc(T),O&=1}return O?(B.cb=0,O):0}function To(B,T,O,q,le){le=B[T+O+32*q]+(le>>3),B[T+O+32*q]=-256&le?0>le?0:255:le}function Ia(B,T,O,q,le,ge){To(B,T,0,O,q+le),To(B,T,1,O,q+ge),To(B,T,2,O,q-ge),To(B,T,3,O,q-le)}function Ys(B){return(20091*B>>16)+B}function XA(B,T,O,q){var le,ge=0,ye=u(16);for(le=0;4>le;++le){var ve=B[T+0]+B[T+8],xe=B[T+0]-B[T+8],ke=(35468*B[T+4]>>16)-Ys(B[T+12]),Qe=Ys(B[T+4])+(35468*B[T+12]>>16);ye[ge+0]=ve+Qe,ye[ge+1]=xe+ke,ye[ge+2]=xe-ke,ye[ge+3]=ve-Qe,ge+=4,T++}for(le=ge=0;4>le;++le)ve=(B=ye[ge+0]+4)+ye[ge+8],xe=B-ye[ge+8],ke=(35468*ye[ge+4]>>16)-Ys(ye[ge+12]),To(O,q,0,0,ve+(Qe=Ys(ye[ge+4])+(35468*ye[ge+12]>>16))),To(O,q,1,0,xe+ke),To(O,q,2,0,xe-ke),To(O,q,3,0,ve-Qe),ge++,q+=32}function rl(B,T,O,q){var le=B[T+0]+4,ge=35468*B[T+4]>>16,ye=Ys(B[T+4]),ve=35468*B[T+1]>>16;Ia(O,q,0,le+ye,B=Ys(B[T+1]),ve),Ia(O,q,1,le+ge,B,ve),Ia(O,q,2,le-ge,B,ve),Ia(O,q,3,le-ye,B,ve)}function Zc(B,T,O,q,le){XA(B,T,O,q),le&&XA(B,T+16,O,q+4)}function YA(B,T,O,q){Aa(B,T+0,O,q,1),Aa(B,T+32,O,q+128,1)}function Hu(B,T,O,q){var le;for(B=B[T+0]+4,le=0;4>le;++le)for(T=0;4>T;++T)To(O,q,T,le,B)}function aA(B,T,O,q){B[T+0]&&Os(B,T+0,O,q),B[T+16]&&Os(B,T+16,O,q+4),B[T+32]&&Os(B,T+32,O,q+128),B[T+48]&&Os(B,T+48,O,q+128+4)}function JA(B,T,O,q){var le,ge=u(16);for(le=0;4>le;++le){var ye=B[T+0+le]+B[T+12+le],ve=B[T+4+le]+B[T+8+le],xe=B[T+4+le]-B[T+8+le],ke=B[T+0+le]-B[T+12+le];ge[0+le]=ye+ve,ge[8+le]=ye-ve,ge[4+le]=ke+xe,ge[12+le]=ke-xe}for(le=0;4>le;++le)ye=(B=ge[0+4*le]+3)+ge[3+4*le],ve=ge[1+4*le]+ge[2+4*le],xe=ge[1+4*le]-ge[2+4*le],ke=B-ge[3+4*le],O[q+0]=ye+ve>>3,O[q+16]=ke+xe>>3,O[q+32]=ye-ve>>3,O[q+48]=ke-xe>>3,q+=64}function Js(B,T,O){var q,le=T-32,ge=is,ye=255-B[le-1];for(q=0;q<O;++q){var ve,xe=ge,ke=ye+B[T-1];for(ve=0;ve<O;++ve)B[T+ve]=xe[ke+B[le+ve]];T+=32}}function an(B,T){Js(B,T,4)}function ia(B,T){Js(B,T,8)}function sa(B,T){Js(B,T,16)}function Rs(B,T){var O;for(O=0;16>O;++O)i(B,T+32*O,B,T-32,16)}function Pl(B,T){var O;for(O=16;0<O;--O)a(B,T,B[T-1],16),T+=32}function Ll(B,T,O){var q;for(q=0;16>q;++q)a(T,O+32*q,B,16)}function Ns(B,T){var O,q=16;for(O=0;16>O;++O)q+=B[T-1+32*O]+B[T+O-32];Ll(q>>5,B,T)}function ri(B,T){var O,q=8;for(O=0;16>O;++O)q+=B[T-1+32*O];Ll(q>>4,B,T)}function ln(B,T){var O,q=8;for(O=0;16>O;++O)q+=B[T+O-32];Ll(q>>4,B,T)}function Ml(B,T){Ll(128,B,T)}function qr(B,T,O){return B+2*T+O+2>>2}function Wc(B,T){var O,q=T-32;for(q=new Uint8Array([qr(B[q-1],B[q+0],B[q+1]),qr(B[q+0],B[q+1],B[q+2]),qr(B[q+1],B[q+2],B[q+3]),qr(B[q+2],B[q+3],B[q+4])]),O=0;4>O;++O)i(B,T+32*O,q,0,q.length)}function ts(B,T){var O=B[T-1],q=B[T-1+32],le=B[T-1+64],ge=B[T-1+96];Rt(B,T+0,16843009*qr(B[T-1-32],O,q)),Rt(B,T+32,16843009*qr(O,q,le)),Rt(B,T+64,16843009*qr(q,le,ge)),Rt(B,T+96,16843009*qr(le,ge,ge))}function Un(B,T){var O,q=4;for(O=0;4>O;++O)q+=B[T+O-32]+B[T-1+32*O];for(q>>=3,O=0;4>O;++O)a(B,T+32*O,q,4)}function Hi(B,T){var O=B[T-1+0],q=B[T-1+32],le=B[T-1+64],ge=B[T-1-32],ye=B[T+0-32],ve=B[T+1-32],xe=B[T+2-32],ke=B[T+3-32];B[T+0+96]=qr(q,le,B[T-1+96]),B[T+1+96]=B[T+0+64]=qr(O,q,le),B[T+2+96]=B[T+1+64]=B[T+0+32]=qr(ge,O,q),B[T+3+96]=B[T+2+64]=B[T+1+32]=B[T+0+0]=qr(ye,ge,O),B[T+3+64]=B[T+2+32]=B[T+1+0]=qr(ve,ye,ge),B[T+3+32]=B[T+2+0]=qr(xe,ve,ye),B[T+3+0]=qr(ke,xe,ve)}function Ei(B,T){var O=B[T+1-32],q=B[T+2-32],le=B[T+3-32],ge=B[T+4-32],ye=B[T+5-32],ve=B[T+6-32],xe=B[T+7-32];B[T+0+0]=qr(B[T+0-32],O,q),B[T+1+0]=B[T+0+32]=qr(O,q,le),B[T+2+0]=B[T+1+32]=B[T+0+64]=qr(q,le,ge),B[T+3+0]=B[T+2+32]=B[T+1+64]=B[T+0+96]=qr(le,ge,ye),B[T+3+32]=B[T+2+64]=B[T+1+96]=qr(ge,ye,ve),B[T+3+64]=B[T+2+96]=qr(ye,ve,xe),B[T+3+96]=qr(ve,xe,xe)}function Rn(B,T){var O=B[T-1+0],q=B[T-1+32],le=B[T-1+64],ge=B[T-1-32],ye=B[T+0-32],ve=B[T+1-32],xe=B[T+2-32],ke=B[T+3-32];B[T+0+0]=B[T+1+64]=ge+ye+1>>1,B[T+1+0]=B[T+2+64]=ye+ve+1>>1,B[T+2+0]=B[T+3+64]=ve+xe+1>>1,B[T+3+0]=xe+ke+1>>1,B[T+0+96]=qr(le,q,O),B[T+0+64]=qr(q,O,ge),B[T+0+32]=B[T+1+96]=qr(O,ge,ye),B[T+1+32]=B[T+2+96]=qr(ge,ye,ve),B[T+2+32]=B[T+3+96]=qr(ye,ve,xe),B[T+3+32]=qr(ve,xe,ke)}function kl(B,T){var O=B[T+0-32],q=B[T+1-32],le=B[T+2-32],ge=B[T+3-32],ye=B[T+4-32],ve=B[T+5-32],xe=B[T+6-32],ke=B[T+7-32];B[T+0+0]=O+q+1>>1,B[T+1+0]=B[T+0+64]=q+le+1>>1,B[T+2+0]=B[T+1+64]=le+ge+1>>1,B[T+3+0]=B[T+2+64]=ge+ye+1>>1,B[T+0+32]=qr(O,q,le),B[T+1+32]=B[T+0+96]=qr(q,le,ge),B[T+2+32]=B[T+1+96]=qr(le,ge,ye),B[T+3+32]=B[T+2+96]=qr(ge,ye,ve),B[T+3+64]=qr(ye,ve,xe),B[T+3+96]=qr(ve,xe,ke)}function An(B,T){var O=B[T-1+0],q=B[T-1+32],le=B[T-1+64],ge=B[T-1+96];B[T+0+0]=O+q+1>>1,B[T+2+0]=B[T+0+32]=q+le+1>>1,B[T+2+32]=B[T+0+64]=le+ge+1>>1,B[T+1+0]=qr(O,q,le),B[T+3+0]=B[T+1+32]=qr(q,le,ge),B[T+3+32]=B[T+1+64]=qr(le,ge,ge),B[T+3+64]=B[T+2+64]=B[T+0+96]=B[T+1+96]=B[T+2+96]=B[T+3+96]=ge}function Bs(B,T){var O=B[T-1+0],q=B[T-1+32],le=B[T-1+64],ge=B[T-1+96],ye=B[T-1-32],ve=B[T+0-32],xe=B[T+1-32],ke=B[T+2-32];B[T+0+0]=B[T+2+32]=O+ye+1>>1,B[T+0+32]=B[T+2+64]=q+O+1>>1,B[T+0+64]=B[T+2+96]=le+q+1>>1,B[T+0+96]=ge+le+1>>1,B[T+3+0]=qr(ve,xe,ke),B[T+2+0]=qr(ye,ve,xe),B[T+1+0]=B[T+3+32]=qr(O,ye,ve),B[T+1+32]=B[T+3+64]=qr(q,O,ye),B[T+1+64]=B[T+3+96]=qr(le,q,O),B[T+1+96]=qr(ge,le,q)}function Gr(B,T){var O;for(O=0;8>O;++O)i(B,T+32*O,B,T-32,8)}function Zr(B,T){var O;for(O=0;8>O;++O)a(B,T,B[T-1],8),T+=32}function fo(B,T,O){var q;for(q=0;8>q;++q)a(T,O+32*q,B,8)}function Tr(B,T){var O,q=8;for(O=0;8>O;++O)q+=B[T+O-32]+B[T-1+32*O];fo(q>>4,B,T)}function nl(B,T){var O,q=4;for(O=0;8>O;++O)q+=B[T+O-32];fo(q>>3,B,T)}function Ii(B,T){var O,q=4;for(O=0;8>O;++O)q+=B[T-1+32*O];fo(q>>3,B,T)}function Fa(B,T){fo(128,B,T)}function ji(B,T,O){var q=B[T-O],le=B[T+0],ge=3*(le-q)+Gu[1020+B[T-2*O]-B[T+O]],ye=cl[112+(ge+4>>3)];B[T-O]=is[255+q+cl[112+(ge+3>>3)]],B[T+0]=is[255+le-ye]}function ec(B,T,O,q){var le=B[T+0],ge=B[T+O];return no[255+B[T-2*O]-B[T-O]]>q||no[255+ge-le]>q}function po(B,T,O,q){return 4*no[255+B[T-O]-B[T+0]]+no[255+B[T-2*O]-B[T+O]]<=q}function Xc(B,T,O,q,le){var ge=B[T-3*O],ye=B[T-2*O],ve=B[T-O],xe=B[T+0],ke=B[T+O],Qe=B[T+2*O],Bt=B[T+3*O];return 4*no[255+ve-xe]+no[255+ye-ke]>q?0:no[255+B[T-4*O]-ge]<=le&&no[255+ge-ye]<=le&&no[255+ye-ve]<=le&&no[255+Bt-Qe]<=le&&no[255+Qe-ke]<=le&&no[255+ke-xe]<=le}function Yc(B,T,O,q){var le=2*q+1;for(q=0;16>q;++q)po(B,T+q,O,le)&&ji(B,T+q,O)}function eo(B,T,O,q){var le=2*q+1;for(q=0;16>q;++q)po(B,T+q*O,1,le)&&ji(B,T+q*O,1)}function mo(B,T,O,q){var le;for(le=3;0<le;--le)Yc(B,T+=4*O,O,q)}function go(B,T,O,q){var le;for(le=3;0<le;--le)eo(B,T+=4,O,q)}function Yn(B,T,O,q,le,ge,ye,ve){for(ge=2*ge+1;0<le--;){if(Xc(B,T,O,ge,ye))if(ec(B,T,O,ve))ji(B,T,O);else{var xe=B,ke=T,Qe=O,Bt=xe[ke-2*Qe],wt=xe[ke-Qe],ft=xe[ke+0],Ot=xe[ke+Qe],Pt=xe[ke+2*Qe],ut=27*(Dt=Gu[1020+3*(ft-wt)+Gu[1020+Bt-Ot]])+63>>7,Ye=18*Dt+63>>7,Dt=9*Dt+63>>7;xe[ke-3*Qe]=is[255+xe[ke-3*Qe]+Dt],xe[ke-2*Qe]=is[255+Bt+Ye],xe[ke-Qe]=is[255+wt+ut],xe[ke+0]=is[255+ft-ut],xe[ke+Qe]=is[255+Ot-Ye],xe[ke+2*Qe]=is[255+Pt-Dt]}T+=q}}function Cs(B,T,O,q,le,ge,ye,ve){for(ge=2*ge+1;0<le--;){if(Xc(B,T,O,ge,ye))if(ec(B,T,O,ve))ji(B,T,O);else{var xe=B,ke=T,Qe=O,Bt=xe[ke-Qe],wt=xe[ke+0],ft=xe[ke+Qe],Ot=cl[112+((Pt=3*(wt-Bt))+4>>3)],Pt=cl[112+(Pt+3>>3)],ut=Ot+1>>1;xe[ke-2*Qe]=is[255+xe[ke-2*Qe]+ut],xe[ke-Qe]=is[255+Bt+Pt],xe[ke+0]=is[255+wt-Ot],xe[ke+Qe]=is[255+ft-ut]}T+=q}}function il(B,T,O,q,le,ge){Yn(B,T,O,1,16,q,le,ge)}function Po(B,T,O,q,le,ge){Yn(B,T,1,O,16,q,le,ge)}function vi(B,T,O,q,le,ge){var ye;for(ye=3;0<ye;--ye)Cs(B,T+=4*O,O,1,16,q,le,ge)}function Ta(B,T,O,q,le,ge){var ye;for(ye=3;0<ye;--ye)Cs(B,T+=4,1,O,16,q,le,ge)}function Ul(B,T,O,q,le,ge,ye,ve){Yn(B,T,le,1,8,ge,ye,ve),Yn(O,q,le,1,8,ge,ye,ve)}function Pa(B,T,O,q,le,ge,ye,ve){Yn(B,T,1,le,8,ge,ye,ve),Yn(O,q,1,le,8,ge,ye,ve)}function Jc(B,T,O,q,le,ge,ye,ve){Cs(B,T+4*le,le,1,8,ge,ye,ve),Cs(O,q+4*le,le,1,8,ge,ye,ve)}function oa(B,T,O,q,le,ge,ye,ve){Cs(B,T+4,1,le,8,ge,ye,ve),Cs(O,q+4,1,le,8,ge,ye,ve)}function La(){this.ba=new It,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new lt,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function lA(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function eu(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function rs(){this.ua=0,this.Wa=new Ge,this.vb=new Ge,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new we,this.yc=new de}function Rl(){this.xb=this.a=0,this.l=new el,this.ca=new It,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new ie,this.Pb=0,this.wd=new ie,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new rs,this.ab=0,this.gc=h(4,eu),this.Oc=0}function ns(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new el,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function Ui(B,T,O,q,le,ge,ye){for(B=B==null?0:B[T+0],T=0;T<ye;++T)le[ge+T]=B+O[q+T]&255,B=le[ge+T]}function AA(B,T,O,q,le,ge,ye){var ve;if(B==null)Ui(null,null,O,q,le,ge,ye);else for(ve=0;ve<ye;++ve)le[ge+ve]=B[T+ve]+O[q+ve]&255}function Lo(B,T,O,q,le,ge,ye){if(B==null)Ui(null,null,O,q,le,ge,ye);else{var ve,xe=B[T+0],ke=xe,Qe=xe;for(ve=0;ve<ye;++ve)ke=Qe+(xe=B[T+ve])-ke,Qe=O[q+ve]+(-256&ke?0>ke?0:255:ke)&255,ke=xe,le[ge+ve]=Qe}}function Ma(B,T,O,q){var le=T.width,ge=T.o;if(t(B!=null&&T!=null),0>O||0>=q||O+q>ge)return null;if(!B.Cc){if(B.ga==null){var ye;if(B.ga=new ns,(ye=B.ga==null)||(ye=T.width*T.o,t(B.Gb.length==0),B.Gb=u(ye),B.Uc=0,B.Gb==null?ye=0:(B.mb=B.Gb,B.nb=B.Uc,B.rc=null,ye=1),ye=!ye),!ye){ye=B.ga;var ve=B.Fa,xe=B.P,ke=B.qc,Qe=B.mb,Bt=B.nb,wt=xe+1,ft=ke-1,Ot=ye.l;if(t(ve!=null&&Qe!=null&&T!=null),$i[0]=null,$i[1]=Ui,$i[2]=AA,$i[3]=Lo,ye.ca=Qe,ye.tb=Bt,ye.c=T.width,ye.i=T.height,t(0<ye.c&&0<ye.i),1>=ke)T=0;else if(ye.$a=ve[xe+0]>>0&3,ye.Z=ve[xe+0]>>2&3,ye.Lc=ve[xe+0]>>4&3,xe=ve[xe+0]>>6&3,0>ye.$a||1<ye.$a||4<=ye.Z||1<ye.Lc||xe)T=0;else if(Ot.put=tr,Ot.ac=nr,Ot.bc=Ar,Ot.ma=ye,Ot.width=T.width,Ot.height=T.height,Ot.Da=T.Da,Ot.v=T.v,Ot.va=T.va,Ot.j=T.j,Ot.o=T.o,ye.$a)e:{t(ye.$a==1),T=Qr();t:for(;;){if(T==null){T=0;break e}if(t(ye!=null),ye.mc=T,T.c=ye.c,T.i=ye.i,T.l=ye.l,T.l.ma=ye,T.l.width=ye.c,T.l.height=ye.i,T.a=0,Le(T.m,ve,wt,ft),!Vr(ye.c,ye.i,1,T,null)||(T.ab==1&&T.gc[0].hc==3&&Xn(T.s)?(ye.ic=1,ve=T.c*T.i,T.Ta=null,T.Ua=0,T.V=u(ve),T.Ba=0,T.V==null?(T.a=1,T=0):T=1):(ye.ic=0,T=zi(T,ye.c)),!T))break t;T=1;break e}ye.mc=null,T=0}else T=ft>=ye.c*ye.i;ye=!T}if(ye)return null;B.ga.Lc!=1?B.Ga=0:q=ge-O}t(B.ga!=null),t(O+q<=ge);e:{if(T=(ve=B.ga).c,ge=ve.l.o,ve.$a==0){if(wt=B.rc,ft=B.Vc,Ot=B.Fa,xe=B.P+1+O*T,ke=B.mb,Qe=B.nb+O*T,t(xe<=B.P+B.qc),ve.Z!=0)for(t($i[ve.Z]!=null),ye=0;ye<q;++ye)$i[ve.Z](wt,ft,Ot,xe,ke,Qe,T),wt=ke,ft=Qe,Qe+=T,xe+=T;else for(ye=0;ye<q;++ye)i(ke,Qe,Ot,xe,T),wt=ke,ft=Qe,Qe+=T,xe+=T;B.rc=wt,B.Vc=ft}else{if(t(ve.mc!=null),T=O+q,t((ye=ve.mc)!=null),t(T<=ye.i),ye.C>=T)T=1;else if(ve.ic||vt(),ve.ic){ve=ye.V,wt=ye.Ba,ft=ye.c;var Pt=ye.i,ut=(Ot=1,xe=ye.$/ft,ke=ye.$%ft,Qe=ye.m,Bt=ye.s,ye.$),Ye=ft*Pt,Dt=ft*T,Zt=Bt.wc,zt=ut<Dt?Ur(Bt,ke,xe):null;t(ut<=Ye),t(T<=Pt),t(Xn(Bt));t:for(;;){for(;!Qe.h&&ut<Dt;){if(ke&Zt||(zt=Ur(Bt,ke,xe)),t(zt!=null),nt(Qe),256>(Pt=Nr(zt.G[0],zt.H[0],Qe)))ve[wt+ut]=Pt,++ut,++ke>=ft&&(ke=0,++xe<=T&&!(xe%16)&&es(ye,xe));else{if(!(280>Pt)){Ot=0;break t}Pt=Jr(Pt-256,Qe);var xr,dr=Nr(zt.G[4],zt.H[4],Qe);if(nt(Qe),!(ut>=(dr=jr(ft,dr=Jr(dr,Qe)))&&Ye-ut>=Pt)){Ot=0;break t}for(xr=0;xr<Pt;++xr)ve[wt+ut+xr]=ve[wt+ut+xr-dr];for(ut+=Pt,ke+=Pt;ke>=ft;)ke-=ft,++xe<=T&&!(xe%16)&&es(ye,xe);ut<Dt&&ke&Zt&&(zt=Ur(Bt,ke,xe))}t(Qe.h==Pe(Qe))}es(ye,xe>T?T:xe);break t}!Ot||Qe.h&&ut<Ye?(Ot=0,ye.a=Qe.h?5:3):ye.$=ut,T=Ot}else T=cs(ye,ye.V,ye.Ba,ye.c,ye.i,T,Ja);if(!T){q=0;break e}}O+q>=ge&&(B.Cc=1),q=1}if(!q)return null;if(B.Cc&&((q=B.ga)!=null&&(q.mc=null),B.ga=null,0<B.Ga))return alert("todo:WebPDequantizeLevels"),null}return B.nb+O*le}function D(B,T,O,q,le,ge){for(;0<le--;){var ye,ve=B,xe=T+(O?1:0),ke=B,Qe=T+(O?0:3);for(ye=0;ye<q;++ye){var Bt=ke[Qe+4*ye];Bt!=255&&(Bt*=32897,ve[xe+4*ye+0]=ve[xe+4*ye+0]*Bt>>23,ve[xe+4*ye+1]=ve[xe+4*ye+1]*Bt>>23,ve[xe+4*ye+2]=ve[xe+4*ye+2]*Bt>>23)}T+=ge}}function ce(B,T,O,q,le){for(;0<q--;){var ge;for(ge=0;ge<O;++ge){var ye=B[T+2*ge+0],ve=15&(ke=B[T+2*ge+1]),xe=4369*ve,ke=(240&ke|ke>>4)*xe>>16;B[T+2*ge+0]=(240&ye|ye>>4)*xe>>16&240|(15&ye|ye<<4)*xe>>16>>4&15,B[T+2*ge+1]=240&ke|ve}T+=le}}function je(B,T,O,q,le,ge,ye,ve){var xe,ke,Qe=255;for(ke=0;ke<le;++ke){for(xe=0;xe<q;++xe){var Bt=B[T+xe];ge[ye+4*xe]=Bt,Qe&=Bt}T+=O,ye+=ve}return Qe!=255}function at(B,T,O,q,le){var ge;for(ge=0;ge<le;++ge)O[q+ge]=B[T+ge]>>8}function vt(){fi=D,Vn=ce,Kn=je,pi=at}function Ut(B,T,O){ae[B]=function(q,le,ge,ye,ve,xe,ke,Qe,Bt,wt,ft,Ot,Pt,ut,Ye,Dt,Zt){var zt,xr=Zt-1>>1,dr=ve[xe+0]|ke[Qe+0]<<16,Or=Bt[wt+0]|ft[Ot+0]<<16;t(q!=null);var fr=3*dr+Or+131074>>2;for(T(q[le+0],255&fr,fr>>16,Pt,ut),ge!=null&&(fr=3*Or+dr+131074>>2,T(ge[ye+0],255&fr,fr>>16,Ye,Dt)),zt=1;zt<=xr;++zt){var Cn=ve[xe+zt]|ke[Qe+zt]<<16,Mn=Bt[wt+zt]|ft[Ot+zt]<<16,pn=dr+Cn+Or+Mn+524296,vn=pn+2*(Cn+Or)>>3;fr=vn+dr>>1,dr=(pn=pn+2*(dr+Mn)>>3)+Cn>>1,T(q[le+2*zt-1],255&fr,fr>>16,Pt,ut+(2*zt-1)*O),T(q[le+2*zt-0],255&dr,dr>>16,Pt,ut+(2*zt-0)*O),ge!=null&&(fr=pn+Or>>1,dr=vn+Mn>>1,T(ge[ye+2*zt-1],255&fr,fr>>16,Ye,Dt+(2*zt-1)*O),T(ge[ye+2*zt+0],255&dr,dr>>16,Ye,Dt+(2*zt+0)*O)),dr=Cn,Or=Mn}1&Zt||(fr=3*dr+Or+131074>>2,T(q[le+Zt-1],255&fr,fr>>16,Pt,ut+(Zt-1)*O),ge!=null&&(fr=3*Or+dr+131074>>2,T(ge[ye+Zt-1],255&fr,fr>>16,Ye,Dt+(Zt-1)*O)))}}function Wt(){zs[sc]=uu,zs[sn]=_A,zs[zl]=cc,zs[iu]=Xu,zs[su]=uc,zs[yA]=Yu,zs[vf]=bf,zs[dd]=_A,zs[$u]=Xu,zs[ou]=uc,zs[oc]=Yu}function gr(B){return B&-16384?0>B?0:255:B>>ha}function Mr(B,T){return gr((19077*B>>8)+(26149*T>>8)-14234)}function en(B,T,O){return gr((19077*B>>8)-(6419*T>>8)-(13320*O>>8)+8708)}function Wr(B,T){return gr((19077*B>>8)+(33050*T>>8)-17685)}function nn(B,T,O,q,le){q[le+0]=Mr(B,O),q[le+1]=en(B,T,O),q[le+2]=Wr(B,T)}function hi(B,T,O,q,le){q[le+0]=Wr(B,T),q[le+1]=en(B,T,O),q[le+2]=Mr(B,O)}function ni(B,T,O,q,le){var ge=en(B,T,O);T=ge<<3&224|Wr(B,T)>>3,q[le+0]=248&Mr(B,O)|ge>>5,q[le+1]=T}function ii(B,T,O,q,le){var ge=240&Wr(B,T)|15;q[le+0]=240&Mr(B,O)|en(B,T,O)>>4,q[le+1]=ge}function Ri(B,T,O,q,le){q[le+0]=255,nn(B,T,O,q,le+1)}function Vi(B,T,O,q,le){hi(B,T,O,q,le),q[le+3]=255}function Ds(B,T,O,q,le){nn(B,T,O,q,le),q[le+3]=255}function to(B,T){return 0>B?0:B>T?T:B}function Qs(B,T,O){ae[B]=function(q,le,ge,ye,ve,xe,ke,Qe,Bt){for(var wt=Qe+(-2&Bt)*O;Qe!=wt;)T(q[le+0],ge[ye+0],ve[xe+0],ke,Qe),T(q[le+1],ge[ye+0],ve[xe+0],ke,Qe+O),le+=2,++ye,++xe,Qe+=2*O;1&Bt&&T(q[le+0],ge[ye+0],ve[xe+0],ke,Qe)}}function ju(B,T,O){return O==0?B==0?T==0?6:5:T==0?4:0:O}function tc(B,T,O,q,le){switch(B>>>30){case 3:Aa(T,O,q,le,0);break;case 2:jn(T,O,q,le);break;case 1:Os(T,O,q,le)}}function tu(B,T){var O,q,le=T.M,ge=T.Nb,ye=B.oc,ve=B.pc+40,xe=B.oc,ke=B.pc+584,Qe=B.oc,Bt=B.pc+600;for(O=0;16>O;++O)ye[ve+32*O-1]=129;for(O=0;8>O;++O)xe[ke+32*O-1]=129,Qe[Bt+32*O-1]=129;for(0<le?ye[ve-1-32]=xe[ke-1-32]=Qe[Bt-1-32]=129:(a(ye,ve-32-1,127,21),a(xe,ke-32-1,127,9),a(Qe,Bt-32-1,127,9)),q=0;q<B.za;++q){var wt=T.ya[T.aa+q];if(0<q){for(O=-1;16>O;++O)i(ye,ve+32*O-4,ye,ve+32*O+12,4);for(O=-1;8>O;++O)i(xe,ke+32*O-4,xe,ke+32*O+4,4),i(Qe,Bt+32*O-4,Qe,Bt+32*O+4,4)}var ft=B.Gd,Ot=B.Hd+q,Pt=wt.ad,ut=wt.Hc;if(0<le&&(i(ye,ve-32,ft[Ot].y,0,16),i(xe,ke-32,ft[Ot].f,0,8),i(Qe,Bt-32,ft[Ot].ea,0,8)),wt.Za){var Ye=ye,Dt=ve-32+16;for(0<le&&(q>=B.za-1?a(Ye,Dt,ft[Ot].y[15],4):i(Ye,Dt,ft[Ot+1].y,0,4)),O=0;4>O;O++)Ye[Dt+128+O]=Ye[Dt+256+O]=Ye[Dt+384+O]=Ye[Dt+0+O];for(O=0;16>O;++O,ut<<=2)Ye=ye,Dt=ve+du[O],io[wt.Ob[O]](Ye,Dt),tc(ut,Pt,16*+O,Ye,Dt)}else if(Ye=ju(q,le,wt.Ob[0]),ua[Ye](ye,ve),ut!=0)for(O=0;16>O;++O,ut<<=2)tc(ut,Pt,16*+O,ye,ve+du[O]);for(O=wt.Gc,Ye=ju(q,le,wt.Dd),Da[Ye](xe,ke),Da[Ye](Qe,Bt),ut=Pt,Ye=xe,Dt=ke,255&(wt=O>>0)&&(170&wt?mA(ut,256,Ye,Dt):ko(ut,256,Ye,Dt)),wt=Qe,ut=Bt,255&(O>>=8)&&(170&O?mA(Pt,320,wt,ut):ko(Pt,320,wt,ut)),le<B.Ub-1&&(i(ft[Ot].y,0,ye,ve+480,16),i(ft[Ot].f,0,xe,ke+224,8),i(ft[Ot].ea,0,Qe,Bt+224,8)),O=8*ge*B.B,ft=B.sa,Ot=B.ta+16*q+16*ge*B.R,Pt=B.qa,wt=B.ra+8*q+O,ut=B.Ha,Ye=B.Ia+8*q+O,O=0;16>O;++O)i(ft,Ot+O*B.R,ye,ve+32*O,16);for(O=0;8>O;++O)i(Pt,wt+O*B.B,xe,ke+32*O,8),i(ut,Ye+O*B.B,Qe,Bt+32*O,8)}}function sl(B,T,O,q,le,ge,ye,ve,xe){var ke=[0],Qe=[0],Bt=0,wt=xe!=null?xe.kd:0,ft=xe??new lA;if(B==null||12>O)return 7;ft.data=B,ft.w=T,ft.ha=O,T=[T],O=[O],ft.gb=[ft.gb];e:{var Ot=T,Pt=O,ut=ft.gb;if(t(B!=null),t(Pt!=null),t(ut!=null),ut[0]=0,12<=Pt[0]&&!r(B,Ot[0],"RIFF")){if(r(B,Ot[0]+8,"WEBP")){ut=3;break e}var Ye=jt(B,Ot[0]+4);if(12>Ye||4294967286<Ye){ut=3;break e}if(wt&&Ye>Pt[0]-8){ut=7;break e}ut[0]=Ye,Ot[0]+=12,Pt[0]-=12}ut=0}if(ut!=0)return ut;for(Ye=0<ft.gb[0],O=O[0];;){e:{var Dt=B;Pt=T,ut=O;var Zt=ke,zt=Qe,xr=Ot=[0];if((fr=Bt=[Bt])[0]=0,8>ut[0])ut=7;else{if(!r(Dt,Pt[0],"VP8X")){if(jt(Dt,Pt[0]+4)!=10){ut=3;break e}if(18>ut[0]){ut=7;break e}var dr=jt(Dt,Pt[0]+8),Or=1+$t(Dt,Pt[0]+12);if(2147483648<=Or*(Dt=1+$t(Dt,Pt[0]+15))){ut=3;break e}xr!=null&&(xr[0]=dr),Zt!=null&&(Zt[0]=Or),zt!=null&&(zt[0]=Dt),Pt[0]+=18,ut[0]-=18,fr[0]=1}ut=0}}if(Bt=Bt[0],Ot=Ot[0],ut!=0)return ut;if(Pt=!!(2&Ot),!Ye&&Bt)return 3;if(ge!=null&&(ge[0]=!!(16&Ot)),ye!=null&&(ye[0]=Pt),ve!=null&&(ve[0]=0),ye=ke[0],Ot=Qe[0],Bt&&Pt&&xe==null){ut=0;break}if(4>O){ut=7;break}if(Ye&&Bt||!Ye&&!Bt&&!r(B,T[0],"ALPH")){O=[O],ft.na=[ft.na],ft.P=[ft.P],ft.Sa=[ft.Sa];e:{dr=B,ut=T,Ye=O;var fr=ft.gb;Zt=ft.na,zt=ft.P,xr=ft.Sa,Or=22,t(dr!=null),t(Ye!=null),Dt=ut[0];var Cn=Ye[0];for(t(Zt!=null),t(xr!=null),Zt[0]=null,zt[0]=null,xr[0]=0;;){if(ut[0]=Dt,Ye[0]=Cn,8>Cn){ut=7;break e}var Mn=jt(dr,Dt+4);if(4294967286<Mn){ut=3;break e}var pn=8+Mn+1&-2;if(Or+=pn,0<fr&&Or>fr){ut=3;break e}if(!r(dr,Dt,"VP8 ")||!r(dr,Dt,"VP8L")){ut=0;break e}if(Cn[0]<pn){ut=7;break e}r(dr,Dt,"ALPH")||(Zt[0]=dr,zt[0]=Dt+8,xr[0]=Mn),Dt+=pn,Cn-=pn}}if(O=O[0],ft.na=ft.na[0],ft.P=ft.P[0],ft.Sa=ft.Sa[0],ut!=0)break}O=[O],ft.Ja=[ft.Ja],ft.xa=[ft.xa];e:if(fr=B,ut=T,Ye=O,Zt=ft.gb[0],zt=ft.Ja,xr=ft.xa,dr=ut[0],Dt=!r(fr,dr,"VP8 "),Or=!r(fr,dr,"VP8L"),t(fr!=null),t(Ye!=null),t(zt!=null),t(xr!=null),8>Ye[0])ut=7;else{if(Dt||Or){if(fr=jt(fr,dr+4),12<=Zt&&fr>Zt-12){ut=3;break e}if(wt&&fr>Ye[0]-8){ut=7;break e}zt[0]=fr,ut[0]+=8,Ye[0]-=8,xr[0]=Or}else xr[0]=5<=Ye[0]&&fr[dr+0]==47&&!(fr[dr+4]>>5),zt[0]=Ye[0];ut=0}if(O=O[0],ft.Ja=ft.Ja[0],ft.xa=ft.xa[0],T=T[0],ut!=0)break;if(4294967286<ft.Ja)return 3;if(ve==null||Pt||(ve[0]=ft.xa?2:1),ye=[ye],Ot=[Ot],ft.xa){if(5>O){ut=7;break}ve=ye,wt=Ot,Pt=ge,B==null||5>O?B=0:5<=O&&B[T+0]==47&&!(B[T+4]>>5)?(Ye=[0],fr=[0],Zt=[0],Le(zt=new ie,B,T,O),qt(zt,Ye,fr,Zt)?(ve!=null&&(ve[0]=Ye[0]),wt!=null&&(wt[0]=fr[0]),Pt!=null&&(Pt[0]=Zt[0]),B=1):B=0):B=0}else{if(10>O){ut=7;break}ve=Ot,B==null||10>O||!Gc(B,T+3,O-3)?B=0:(wt=B[T+0]|B[T+1]<<8|B[T+2]<<16,Pt=16383&(B[T+7]<<8|B[T+6]),B=16383&(B[T+9]<<8|B[T+8]),1&wt||3<(wt>>1&7)||!(wt>>4&1)||wt>>5>=ft.Ja||!Pt||!B?B=0:(ye&&(ye[0]=Pt),ve&&(ve[0]=B),B=1))}if(!B||(ye=ye[0],Ot=Ot[0],Bt&&(ke[0]!=ye||Qe[0]!=Ot)))return 3;xe!=null&&(xe[0]=ft,xe.offset=T-xe.w,t(4294967286>T-xe.w),t(xe.offset==xe.ha-O));break}return ut==0||ut==7&&Bt&&xe==null?(ge!=null&&(ge[0]|=ft.na!=null&&0<ft.na.length),q!=null&&(q[0]=ye),le!=null&&(le[0]=Ot),0):ut}function cA(B,T,O){var q=T.width,le=T.height,ge=0,ye=0,ve=q,xe=le;if(T.Da=B!=null&&0<B.Da,T.Da&&(ve=B.cd,xe=B.bd,ge=B.v,ye=B.j,11>O||(ge&=-2,ye&=-2),0>ge||0>ye||0>=ve||0>=xe||ge+ve>q||ye+xe>le))return 0;if(T.v=ge,T.j=ye,T.va=ge+ve,T.o=ye+xe,T.U=ve,T.T=xe,T.da=B!=null&&0<B.da,T.da){if(!Cr(ve,xe,O=[B.ib],ge=[B.hb]))return 0;T.ib=O[0],T.hb=ge[0]}return T.ob=B!=null&&B.ob,T.Kb=B==null||!B.Sd,T.da&&(T.ob=T.ib<3*q/4&&T.hb<3*le/4,T.Kb=0),1}function rc(B){if(B==null)return 2;if(11>B.S){var T=B.f.RGBA;T.fb+=(B.height-1)*T.A,T.A=-T.A}else T=B.f.kb,B=B.height,T.O+=(B-1)*T.fa,T.fa=-T.fa,T.N+=(B-1>>1)*T.Ab,T.Ab=-T.Ab,T.W+=(B-1>>1)*T.Db,T.Db=-T.Db,T.F!=null&&(T.J+=(B-1)*T.lb,T.lb=-T.lb);return 0}function uA(B,T,O,q){if(q==null||0>=B||0>=T)return 2;if(O!=null){if(O.Da){var le=O.cd,ge=O.bd,ye=-2&O.v,ve=-2&O.j;if(0>ye||0>ve||0>=le||0>=ge||ye+le>B||ve+ge>T)return 2;B=le,T=ge}if(O.da){if(!Cr(B,T,le=[O.ib],ge=[O.hb]))return 2;B=le[0],T=ge[0]}}q.width=B,q.height=T;e:{var xe=q.width,ke=q.height;if(B=q.S,0>=xe||0>=ke||!(B>=sc&&13>B))B=2;else{if(0>=q.Rd&&q.sd==null){ye=ge=le=T=0;var Qe=(ve=xe*Do[B])*ke;if(11>B||(ge=(ke+1)/2*(T=(xe+1)/2),B==12&&(ye=(le=xe)*ke)),(ke=u(Qe+2*ge+ye))==null){B=1;break e}q.sd=ke,11>B?((xe=q.f.RGBA).eb=ke,xe.fb=0,xe.A=ve,xe.size=Qe):((xe=q.f.kb).y=ke,xe.O=0,xe.fa=ve,xe.Fd=Qe,xe.f=ke,xe.N=0+Qe,xe.Ab=T,xe.Cd=ge,xe.ea=ke,xe.W=0+Qe+ge,xe.Db=T,xe.Ed=ge,B==12&&(xe.F=ke,xe.J=0+Qe+2*ge),xe.Tc=ye,xe.lb=le)}if(T=1,le=q.S,ge=q.width,ye=q.height,le>=sc&&13>le)if(11>le)B=q.f.RGBA,T&=(ve=Math.abs(B.A))*(ye-1)+ge<=B.size,T&=ve>=ge*Do[le],T&=B.eb!=null;else{B=q.f.kb,ve=(ge+1)/2,Qe=(ye+1)/2,xe=Math.abs(B.fa),ke=Math.abs(B.Ab);var Bt=Math.abs(B.Db),wt=Math.abs(B.lb),ft=wt*(ye-1)+ge;T&=xe*(ye-1)+ge<=B.Fd,T&=ke*(Qe-1)+ve<=B.Cd,T=(T&=Bt*(Qe-1)+ve<=B.Ed)&xe>=ge&ke>=ve&Bt>=ve,T&=B.y!=null,T&=B.f!=null,T&=B.ea!=null,le==12&&(T&=wt>=ge,T&=ft<=B.Tc,T&=B.F!=null)}else T=0;B=T?0:2}}return B!=0||O!=null&&O.fd&&(B=rc(q)),B}var Ki=64,Nl=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],Mo=24,hA=32,dA=8,Gi=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];ar("Predictor0","PredictorAdd0"),ae.Predictor0=function(){return 4278190080},ae.Predictor1=function(B){return B},ae.Predictor2=function(B,T,O){return T[O+0]},ae.Predictor3=function(B,T,O){return T[O+1]},ae.Predictor4=function(B,T,O){return T[O-1]},ae.Predictor5=function(B,T,O){return cr(cr(B,T[O+1]),T[O+0])},ae.Predictor6=function(B,T,O){return cr(B,T[O-1])},ae.Predictor7=function(B,T,O){return cr(B,T[O+0])},ae.Predictor8=function(B,T,O){return cr(T[O-1],T[O+0])},ae.Predictor9=function(B,T,O){return cr(T[O+0],T[O+1])},ae.Predictor10=function(B,T,O){return cr(cr(B,T[O-1]),cr(T[O+0],T[O+1]))},ae.Predictor11=function(B,T,O){var q=T[O+0];return 0>=Kr(q>>24&255,B>>24&255,(T=T[O-1])>>24&255)+Kr(q>>16&255,B>>16&255,T>>16&255)+Kr(q>>8&255,B>>8&255,T>>8&255)+Kr(255&q,255&B,255&T)?q:B},ae.Predictor12=function(B,T,O){var q=T[O+0];return(br((B>>24&255)+(q>>24&255)-((T=T[O-1])>>24&255))<<24|br((B>>16&255)+(q>>16&255)-(T>>16&255))<<16|br((B>>8&255)+(q>>8&255)-(T>>8&255))<<8|br((255&B)+(255&q)-(255&T)))>>>0},ae.Predictor13=function(B,T,O){var q=T[O-1];return(Dr((B=cr(B,T[O+0]))>>24&255,q>>24&255)<<24|Dr(B>>16&255,q>>16&255)<<16|Dr(B>>8&255,q>>8&255)<<8|Dr(B>>0&255,q>>0&255))>>>0};var hd=ae.PredictorAdd0;ae.PredictorAdd1=Lr,ar("Predictor2","PredictorAdd2"),ar("Predictor3","PredictorAdd3"),ar("Predictor4","PredictorAdd4"),ar("Predictor5","PredictorAdd5"),ar("Predictor6","PredictorAdd6"),ar("Predictor7","PredictorAdd7"),ar("Predictor8","PredictorAdd8"),ar("Predictor9","PredictorAdd9"),ar("Predictor10","PredictorAdd10"),ar("Predictor11","PredictorAdd11"),ar("Predictor12","PredictorAdd12"),ar("Predictor13","PredictorAdd13");var Dl=ae.PredictorAdd2;Yr("ColorIndexInverseTransform","MapARGB","32b",function(B){return B>>8&255},function(B){return B}),Yr("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(B){return B},function(B){return B>>8&255});var Vu,yo=ae.ColorIndexInverseTransform,fA=ae.MapARGB,ru=ae.VP8LColorIndexInverseTransformAlpha,nu=ae.MapAlpha,ka=ae.VP8LPredictorsAdd=[];ka.length=16,(ae.VP8LPredictors=[]).length=16,(ae.VP8LPredictorsAdd_C=[]).length=16,(ae.VP8LPredictors_C=[]).length=16;var hn,hs,di,Ua,aa,la,pA,Aa,jn,mA,Os,ko,nc,Ku,ic,gA,Ql,ca,Ra,ol,al,ro,ll,ds,fi,Vn,Kn,pi,Jn=u(511),Uo=u(2041),Ol=u(225),Na=u(767),Al=0,Gu=Uo,cl=Ol,is=Na,no=Jn,sc=0,sn=1,zl=2,iu=3,su=4,yA=5,vf=6,dd=7,$u=8,ou=9,oc=10,qu=[2,3,7],Zu=[3,3,11],ac=[280,256,256,256,40],Wu=[0,1,1,1,0],fd=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],au=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],lc=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],Ac=8,vA=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],lu=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],Ro=null,gm=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],_f=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],Au=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],pd=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],wf=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],xf=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],cu=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],ua=[],io=[],Da=[],mi=1,ul=2,$i=[],zs=[];Ut("UpsampleRgbLinePair",nn,3),Ut("UpsampleBgrLinePair",hi,3),Ut("UpsampleRgbaLinePair",Ds,4),Ut("UpsampleBgraLinePair",Vi,4),Ut("UpsampleArgbLinePair",Ri,4),Ut("UpsampleRgba4444LinePair",ii,2),Ut("UpsampleRgb565LinePair",ni,2);var uu=ae.UpsampleRgbLinePair,cc=ae.UpsampleBgrLinePair,_A=ae.UpsampleRgbaLinePair,Xu=ae.UpsampleBgraLinePair,uc=ae.UpsampleArgbLinePair,Yu=ae.UpsampleRgba4444LinePair,bf=ae.UpsampleRgb565LinePair,hu=16,hl=1<<hu-1,Qa=-227,Ss=482,ha=6,Ju=0,Bf=u(256),Cf=u(256),hc=u(256),md=u(256),eh=u(Ss-Qa),Sf=u(Ss-Qa);Qs("YuvToRgbRow",nn,3),Qs("YuvToBgrRow",hi,3),Qs("YuvToRgbaRow",Ds,4),Qs("YuvToBgraRow",Vi,4),Qs("YuvToArgbRow",Ri,4),Qs("YuvToRgba4444Row",ii,2),Qs("YuvToRgb565Row",ni,2);var du=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],wA=[0,2,8],dc=[8,7,6,4,4,2,2,2,1,1,1,1],No=1;this.WebPDecodeRGBA=function(B,T,O,q,le){var ge=sn,ye=new La,ve=new It;ye.ba=ve,ve.S=ge,ve.width=[ve.width],ve.height=[ve.height];var xe=ve.width,ke=ve.height,Qe=new Ct;if(Qe==null||B==null)var Bt=2;else t(Qe!=null),Bt=sl(B,T,O,Qe.width,Qe.height,Qe.Pd,Qe.Qd,Qe.format,null);if(Bt!=0?xe=0:(xe!=null&&(xe[0]=Qe.width[0]),ke!=null&&(ke[0]=Qe.height[0]),xe=1),xe){ve.width=ve.width[0],ve.height=ve.height[0],q!=null&&(q[0]=ve.width),le!=null&&(le[0]=ve.height);e:{if(q=new el,(le=new lA).data=B,le.w=T,le.ha=O,le.kd=1,T=[0],t(le!=null),((B=sl(le.data,le.w,le.ha,null,null,null,T,null,le))==0||B==7)&&T[0]&&(B=4),(T=B)==0){if(t(ye!=null),q.data=le.data,q.w=le.w+le.offset,q.ha=le.ha-le.offset,q.put=tr,q.ac=nr,q.bc=Ar,q.ma=ye,le.xa){if((B=Qr())==null){ye=1;break e}if(function(wt,ft){var Ot=[0],Pt=[0],ut=[0];t:for(;;){if(wt==null)return 0;if(ft==null)return wt.a=2,0;if(wt.l=ft,wt.a=0,Le(wt.m,ft.data,ft.w,ft.ha),!qt(wt.m,Ot,Pt,ut)){wt.a=3;break t}if(wt.xb=ul,ft.width=Ot[0],ft.height=Pt[0],!Vr(Ot[0],Pt[0],1,wt,null))break t;return 1}return t(wt.a!=0),0}(B,q)){if(q=(T=uA(q.width,q.height,ye.Oa,ye.ba))==0){t:{q=B;r:for(;;){if(q==null){q=0;break t}if(t(q.s.yc!=null),t(q.s.Ya!=null),t(0<q.s.Wb),t((O=q.l)!=null),t((le=O.ma)!=null),q.xb!=0){if(q.ca=le.ba,q.tb=le.tb,t(q.ca!=null),!cA(le.Oa,O,iu)){q.a=2;break r}if(!zi(q,O.width)||O.da)break r;if((O.da||tt(q.ca.S))&&vt(),11>q.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),q.ca.f.kb.F!=null&&vt()),q.Pb&&0<q.s.ua&&q.s.vb.X==null&&!vr(q.s.vb,q.s.Wa.Xa)){q.a=1;break r}q.xb=0}if(!cs(q,q.V,q.Ba,q.c,q.i,O.o,Yt))break r;le.Dc=q.Ma,q=1;break t}t(q.a!=0),q=0}q=!q}q&&(T=B.a)}else T=B.a}else{if((B=new tl)==null){ye=1;break e}if(B.Fa=le.na,B.P=le.P,B.qc=le.Sa,$c(B,q)){if((T=uA(q.width,q.height,ye.Oa,ye.ba))==0){if(B.Aa=0,O=ye.Oa,t((le=B)!=null),O!=null){if(0<(xe=0>(xe=O.Md)?0:100<xe?255:255*xe/100)){for(ke=Qe=0;4>ke;++ke)12>(Bt=le.pb[ke]).lc&&(Bt.ia=xe*dc[0>Bt.lc?0:Bt.lc]>>3),Qe|=Bt.ia;Qe&&(alert("todo:VP8InitRandom"),le.ia=1)}le.Ga=O.Id,100<le.Ga?le.Ga=100:0>le.Ga&&(le.Ga=0)}zu(B,q)||(T=B.a)}}else T=B.a}T==0&&ye.Oa!=null&&ye.Oa.fd&&(T=rc(ye.ba))}ye=T}ge=ye!=0?null:11>ge?ve.f.RGBA.eb:ve.f.kb.y}else ge=null;return ge};var Do=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function y(ae,Be){for(var Ue="",te=0;te<4;te++)Ue+=String.fromCharCode(ae[Be++]);return Ue}function C(ae,Be){return(ae[Be+0]<<0|ae[Be+1]<<8|ae[Be+2]<<16)>>>0}function I(ae,Be){return(ae[Be+0]<<0|ae[Be+1]<<8|ae[Be+2]<<16|ae[Be+3]<<24)>>>0}new g;var F=[0],b=[0],N=[],U=new g,H=e,k=function(ae,Be){var Ue={},te=0,de=!1,Te=0,we=0;if(Ue.frames=[],!function(Ce,Pe,$e,nt){for(var Xe=0;Xe<nt;Xe++)if(Ce[Pe+Xe]!=$e.charCodeAt(Xe))return!0;return!1}(ae,Be,"RIFF",4)){for(I(ae,Be+=4),Be+=8;Be<ae.length;){var st=y(ae,Be),Ze=I(ae,Be+=4);Be+=4;var At=Ze+(1&Ze);switch(st){case"VP8 ":case"VP8L":Ue.frames[te]===void 0&&(Ue.frames[te]={}),(it=Ue.frames[te]).src_off=de?we:Be-8,it.src_size=Te+Ze+8,te++,de&&(de=!1,Te=0,we=0);break;case"VP8X":(it=Ue.header={}).feature_flags=ae[Be];var Le=Be+4;it.canvas_width=1+C(ae,Le),Le+=3,it.canvas_height=1+C(ae,Le),Le+=3;break;case"ALPH":de=!0,Te=At+8,we=Be-8;break;case"ANIM":(it=Ue.header).bgcolor=I(ae,Be),Le=Be+4,it.loop_count=(Lt=ae)[(ie=Le)+0]<<0|Lt[ie+1]<<8,Le+=2;break;case"ANMF":var He,it;(it=Ue.frames[te]={}).offset_x=2*C(ae,Be),Be+=3,it.offset_y=2*C(ae,Be),Be+=3,it.width=1+C(ae,Be),Be+=3,it.height=1+C(ae,Be),Be+=3,it.duration=C(ae,Be),Be+=3,He=ae[Be++],it.dispose=1&He,it.blend=He>>1&1}st!="ANMF"&&(Be+=At)}var Lt,ie;return Ue}}(H,0);k.response=H,k.rgbaoutput=!0,k.dataurl=!1;var R=k.header?k.header:null,V=k.frames?k.frames:null;if(R){R.loop_counter=R.loop_count,F=[R.canvas_height],b=[R.canvas_width];for(var W=0;W<V.length&&V[W].blend!=0;W++);}var se=V[0],fe=U.WebPDecodeRGBA(H,se.src_off,se.src_size,b,F);se.rgba=fe,se.imgwidth=b[0],se.imgheight=F[0];for(var ue=0;ue<b[0]*F[0]*4;ue++)N[ue]=fe[ue];return this.width=b,this.height=F,this.data=N,this}(function(e){var t=function(){return typeof yB=="function"},r=function(F,b,N,U){var H=4,k=h;switch(U){case e.image_compression.FAST:H=1,k=u;break;case e.image_compression.MEDIUM:H=6,k=o;break;case e.image_compression.SLOW:H=9,k=g}F=i(F,b,N,k);var R=yB(F,{level:H});return e.__addimage__.arrayBufferToBinaryString(R)},i=function(F,b,N,U){for(var H,k,R,V=F.length/b,W=new Uint8Array(F.length+V),se=C(),fe=0;fe<V;fe+=1){if(R=fe*b,H=F.subarray(R,R+b),U)W.set(U(H,N,k),R+fe);else{for(var ue,ae=se.length,Be=[];ue<ae;ue+=1)Be[ue]=se[ue](H,N,k);var Ue=I(Be.concat());W.set(Be[Ue],R+fe)}k=H}return W},a=function(F){var b=Array.apply([],F);return b.unshift(0),b},u=function(F,b){var N,U=[],H=F.length;U[0]=1;for(var k=0;k<H;k+=1)N=F[k-b]||0,U[k+1]=F[k]-N+256&255;return U},h=function(F,b,N){var U,H=[],k=F.length;H[0]=2;for(var R=0;R<k;R+=1)U=N&&N[R]||0,H[R+1]=F[R]-U+256&255;return H},o=function(F,b,N){var U,H,k=[],R=F.length;k[0]=3;for(var V=0;V<R;V+=1)U=F[V-b]||0,H=N&&N[V]||0,k[V+1]=F[V]+256-(U+H>>>1)&255;return k},g=function(F,b,N){var U,H,k,R,V=[],W=F.length;V[0]=4;for(var se=0;se<W;se+=1)U=F[se-b]||0,H=N&&N[se]||0,k=N&&N[se-b]||0,R=y(U,H,k),V[se+1]=F[se]-R+256&255;return V},y=function(F,b,N){if(F===b&&b===N)return F;var U=Math.abs(b-N),H=Math.abs(F-N),k=Math.abs(F+b-N-N);return U<=H&&U<=k?F:H<=k?b:N},C=function(){return[a,u,h,o,g]},I=function(F){var b=F.map(function(N){return N.reduce(function(U,H){return U+Math.abs(H)},0)});return b.indexOf(Math.min.apply(null,b))};e.processPNG=function(F,b,N,U){var H,k,R,V,W,se,fe,ue,ae,Be,Ue,te,de,Te,we,st=this.decode.FLATE_DECODE,Ze="";if(this.__addimage__.isArrayBuffer(F)&&(F=new Uint8Array(F)),this.__addimage__.isArrayBufferView(F)){if(F=(R=new Ite(F)).imgData,k=R.bits,H=R.colorSpace,W=R.colors,[4,6].indexOf(R.colorType)!==-1){if(R.bits===8){ae=(ue=R.pixelBitlength==32?new Uint32Array(R.decodePixels().buffer):R.pixelBitlength==16?new Uint16Array(R.decodePixels().buffer):new Uint8Array(R.decodePixels().buffer)).length,Ue=new Uint8Array(ae*R.colors),Be=new Uint8Array(ae);var At,Le=R.pixelBitlength-R.bits;for(Te=0,we=0;Te<ae;Te++){for(de=ue[Te],At=0;At<Le;)Ue[we++]=de>>>At&255,At+=R.bits;Be[Te]=de>>>At&255}}if(R.bits===16){ae=(ue=new Uint32Array(R.decodePixels().buffer)).length,Ue=new Uint8Array(ae*(32/R.pixelBitlength)*R.colors),Be=new Uint8Array(ae*(32/R.pixelBitlength)),te=R.colors>1,Te=0,we=0;for(var He=0;Te<ae;)de=ue[Te++],Ue[we++]=de>>>0&255,te&&(Ue[we++]=de>>>16&255,de=ue[Te++],Ue[we++]=de>>>0&255),Be[He++]=de>>>16&255;k=8}U!==e.image_compression.NONE&&t()?(F=r(Ue,R.width*R.colors,R.colors,U),fe=r(Be,R.width,1,U)):(F=Ue,fe=Be,st=void 0)}if(R.colorType===3&&(H=this.color_spaces.INDEXED,se=R.palette,R.transparency.indexed)){var it=R.transparency.indexed,Lt=0;for(Te=0,ae=it.length;Te<ae;++Te)Lt+=it[Te];if((Lt/=255)===ae-1&&it.indexOf(0)!==-1)V=[it.indexOf(0)];else if(Lt!==ae){for(ue=R.decodePixels(),Be=new Uint8Array(ue.length),Te=0,ae=ue.length;Te<ae;Te++)Be[Te]=it[ue[Te]];fe=r(Be,R.width,1)}}var ie=function(Ce){var Pe;switch(Ce){case e.image_compression.FAST:Pe=11;break;case e.image_compression.MEDIUM:Pe=13;break;case e.image_compression.SLOW:Pe=14;break;default:Pe=12}return Pe}(U);return st===this.decode.FLATE_DECODE&&(Ze="/Predictor "+ie+" "),Ze+="/Colors "+W+" /BitsPerComponent "+k+" /Columns "+R.width,(this.__addimage__.isArrayBuffer(F)||this.__addimage__.isArrayBufferView(F))&&(F=this.__addimage__.arrayBufferToBinaryString(F)),(fe&&this.__addimage__.isArrayBuffer(fe)||this.__addimage__.isArrayBufferView(fe))&&(fe=this.__addimage__.arrayBufferToBinaryString(fe)),{alias:N,data:F,index:b,filter:st,decodeParameters:Ze,transparency:V,palette:se,sMask:fe,predictor:ie,width:R.width,height:R.height,bitsPerComponent:k,colorSpace:H}}}})(Xr.API),function(e){e.processGIF89A=function(t,r,i,a){var u=new Fte(t),h=u.width,o=u.height,g=[];u.decodeAndBlitFrameRGBA(0,g);var y={data:g,width:h,height:o},C=new cb(100).encode(y,100);return e.processJPEG.call(this,C,r,i,a)},e.processGIF87A=e.processGIF89A}(Xr.API),LA.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var e=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(e);for(var t=0;t<e;t++){var r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),u=this.datav.getUint8(this.pos++,!0);this.palette[t]={red:a,green:i,blue:r,quad:u}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},LA.prototype.parseBGR=function(){this.pos=this.offset;try{var e="bit"+this.bitPP,t=this.width*this.height*4;this.data=new Uint8Array(t),this[e]()}catch(r){yi.log("bit decode error:"+r)}},LA.prototype.bit1=function(){var e,t=Math.ceil(this.width/8),r=t%4;for(e=this.height-1;e>=0;e--){for(var i=this.bottom_up?e:this.height-1-e,a=0;a<t;a++)for(var u=this.datav.getUint8(this.pos++,!0),h=i*this.width*4+8*a*4,o=0;o<8&&8*a+o<this.width;o++){var g=this.palette[u>>7-o&1];this.data[h+4*o]=g.blue,this.data[h+4*o+1]=g.green,this.data[h+4*o+2]=g.red,this.data[h+4*o+3]=255}r!==0&&(this.pos+=4-r)}},LA.prototype.bit4=function(){for(var e=Math.ceil(this.width/2),t=e%4,r=this.height-1;r>=0;r--){for(var i=this.bottom_up?r:this.height-1-r,a=0;a<e;a++){var u=this.datav.getUint8(this.pos++,!0),h=i*this.width*4+2*a*4,o=u>>4,g=15&u,y=this.palette[o];if(this.data[h]=y.blue,this.data[h+1]=y.green,this.data[h+2]=y.red,this.data[h+3]=255,2*a+1>=this.width)break;y=this.palette[g],this.data[h+4]=y.blue,this.data[h+4+1]=y.green,this.data[h+4+2]=y.red,this.data[h+4+3]=255}t!==0&&(this.pos+=4-t)}},LA.prototype.bit8=function(){for(var e=this.width%4,t=this.height-1;t>=0;t--){for(var r=this.bottom_up?t:this.height-1-t,i=0;i<this.width;i++){var a=this.datav.getUint8(this.pos++,!0),u=r*this.width*4+4*i;if(a<this.palette.length){var h=this.palette[a];this.data[u]=h.red,this.data[u+1]=h.green,this.data[u+2]=h.blue,this.data[u+3]=255}else this.data[u]=255,this.data[u+1]=255,this.data[u+2]=255,this.data[u+3]=255}e!==0&&(this.pos+=4-e)}},LA.prototype.bit15=function(){for(var e=this.width%3,t=parseInt("11111",2),r=this.height-1;r>=0;r--){for(var i=this.bottom_up?r:this.height-1-r,a=0;a<this.width;a++){var u=this.datav.getUint16(this.pos,!0);this.pos+=2;var h=(u&t)/t*255|0,o=(u>>5&t)/t*255|0,g=(u>>10&t)/t*255|0,y=u>>15?255:0,C=i*this.width*4+4*a;this.data[C]=g,this.data[C+1]=o,this.data[C+2]=h,this.data[C+3]=y}this.pos+=e}},LA.prototype.bit16=function(){for(var e=this.width%3,t=parseInt("11111",2),r=parseInt("111111",2),i=this.height-1;i>=0;i--){for(var a=this.bottom_up?i:this.height-1-i,u=0;u<this.width;u++){var h=this.datav.getUint16(this.pos,!0);this.pos+=2;var o=(h&t)/t*255|0,g=(h>>5&r)/r*255|0,y=(h>>11)/t*255|0,C=a*this.width*4+4*u;this.data[C]=y,this.data[C+1]=g,this.data[C+2]=o,this.data[C+3]=255}this.pos+=e}},LA.prototype.bit24=function(){for(var e=this.height-1;e>=0;e--){for(var t=this.bottom_up?e:this.height-1-e,r=0;r<this.width;r++){var i=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),u=this.datav.getUint8(this.pos++,!0),h=t*this.width*4+4*r;this.data[h]=u,this.data[h+1]=a,this.data[h+2]=i,this.data[h+3]=255}this.pos+=this.width%4}},LA.prototype.bit32=function(){for(var e=this.height-1;e>=0;e--)for(var t=this.bottom_up?e:this.height-1-e,r=0;r<this.width;r++){var i=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),u=this.datav.getUint8(this.pos++,!0),h=this.datav.getUint8(this.pos++,!0),o=t*this.width*4+4*r;this.data[o]=u,this.data[o+1]=a,this.data[o+2]=i,this.data[o+3]=h}},LA.prototype.getData=function(){return this.data},function(e){e.processBMP=function(t,r,i,a){var u=new LA(t,!1),h=u.width,o=u.height,g={data:u.getData(),width:h,height:o},y=new cb(100).encode(g,100);return e.processJPEG.call(this,y,r,i,a)}}(Xr.API),FT.prototype.getData=function(){return this.data},function(e){e.processWEBP=function(t,r,i,a){var u=new FT(t),h=u.width,o=u.height,g={data:u.getData(),width:h,height:o},y=new cb(100).encode(g,100);return e.processJPEG.call(this,y,r,i,a)}}(Xr.API),Xr.API.processRGBA=function(e,t,r){for(var i=e.data,a=i.length,u=new Uint8Array(a/4*3),h=new Uint8Array(a/4),o=0,g=0,y=0;y<a;y+=4){var C=i[y],I=i[y+1],F=i[y+2],b=i[y+3];u[o++]=C,u[o++]=I,u[o++]=F,h[g++]=b}var N=this.__addimage__.arrayBufferToBinaryString(u);return{alpha:this.__addimage__.arrayBufferToBinaryString(h),data:N,index:t,alias:r,colorSpace:"DeviceRGB",bitsPerComponent:8,width:e.width,height:e.height}},Xr.API.setLanguage=function(e){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[e]!==void 0&&(this.internal.languageSettings.languageCode=e,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},Jf=Xr.API,Av=Jf.getCharWidthsArray=function(e,t){var r,i,a=(t=t||{}).font||this.internal.getFont(),u=t.fontSize||this.internal.getFontSize(),h=t.charSpace||this.internal.getCharSpace(),o=t.widths?t.widths:a.metadata.Unicode.widths,g=o.fof?o.fof:1,y=t.kerning?t.kerning:a.metadata.Unicode.kerning,C=y.fof?y.fof:1,I=t.doKerning!==!1,F=0,b=e.length,N=0,U=o[0]||g,H=[];for(r=0;r<b;r++)i=e.charCodeAt(r),typeof a.metadata.widthOfString=="function"?H.push((a.metadata.widthOfGlyph(a.metadata.characterToGlyph(i))+h*(1e3/u)||0)/1e3):(F=I&&ei(y[i])==="object"&&!isNaN(parseInt(y[i][N],10))?y[i][N]/C:0,H.push((o[i]||U)/g+F)),N=i;return H},CT=Jf.getStringUnitWidth=function(e,t){var r=(t=t||{}).fontSize||this.internal.getFontSize(),i=t.font||this.internal.getFont(),a=t.charSpace||this.internal.getCharSpace();return Jf.processArabic&&(e=Jf.processArabic(e)),typeof i.metadata.widthOfString=="function"?i.metadata.widthOfString(e,r,a)/r:Av.apply(this,arguments).reduce(function(u,h){return u+h},0)},ST=function(e,t,r,i){for(var a=[],u=0,h=e.length,o=0;u!==h&&o+t[u]<r;)o+=t[u],u++;a.push(e.slice(0,u));var g=u;for(o=0;u!==h;)o+t[u]>i&&(a.push(e.slice(g,u)),o=0,g=u),o+=t[u],u++;return g!==u&&a.push(e.slice(g,u)),a},ET=function(e,t,r){r||(r={});var i,a,u,h,o,g,y,C=[],I=[C],F=r.textIndent||0,b=0,N=0,U=e.split(" "),H=Av.apply(this,[" ",r])[0];if(g=r.lineIndent===-1?U[0].length+2:r.lineIndent||0){var k=Array(g).join(" "),R=[];U.map(function(W){(W=W.split(/\s*\n/)).length>1?R=R.concat(W.map(function(se,fe){return(fe&&se.length?`
`:"")+se})):R.push(W[0])}),U=R,g=CT.apply(this,[k,r])}for(u=0,h=U.length;u<h;u++){var V=0;if(i=U[u],g&&i[0]==`
`&&(i=i.substr(1),V=1),F+b+(N=(a=Av.apply(this,[i,r])).reduce(function(W,se){return W+se},0))>t||V){if(N>t){for(o=ST.apply(this,[i,a,t-(F+b),t]),C.push(o.shift()),C=[o.pop()];o.length;)I.push([o.shift()]);N=a.slice(i.length-(C[0]?C[0].length:0)).reduce(function(W,se){return W+se},0)}else C=[i];I.push(C),F=N+g,b=H}else C.push(i),F+=b+N,b=H}return y=g?function(W,se){return(se?k:"")+W.join(" ")}:function(W){return W.join(" ")},I.map(y)},Jf.splitTextToSize=function(e,t,r){var i,a=(r=r||{}).fontSize||this.internal.getFontSize(),u=(function(C){if(C.widths&&C.kerning)return{widths:C.widths,kerning:C.kerning};var I=this.internal.getFont(C.fontName,C.fontStyle);return I.metadata.Unicode?{widths:I.metadata.Unicode.widths||{0:1},kerning:I.metadata.Unicode.kerning||{}}:{font:I.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,r);i=Array.isArray(e)?e:String(e).split(/\r?\n/);var h=1*this.internal.scaleFactor*t/a;u.textIndent=r.textIndent?1*r.textIndent*this.internal.scaleFactor/a:0,u.lineIndent=r.lineIndent;var o,g,y=[];for(o=0,g=i.length;o<g;o++)y=y.concat(ET.apply(this,[i[o],h,u]));return y},function(e){e.__fontmetrics__=e.__fontmetrics__||{};for(var t="klmnopqrstuvwxyz",r={},i={},a=0;a<t.length;a++)r[t[a]]="0123456789abcdef"[a],i["0123456789abcdef"[a]]=t[a];var u=function(I){return"0x"+parseInt(I,10).toString(16)},h=e.__fontmetrics__.compress=function(I){var F,b,N,U,H=["{"];for(var k in I){if(F=I[k],isNaN(parseInt(k,10))?b="'"+k+"'":(k=parseInt(k,10),b=(b=u(k).slice(2)).slice(0,-1)+i[b.slice(-1)]),typeof F=="number")F<0?(N=u(F).slice(3),U="-"):(N=u(F).slice(2),U=""),N=U+N.slice(0,-1)+i[N.slice(-1)];else{if(ei(F)!=="object")throw new Error("Don't know what to do with value type "+ei(F)+".");N=h(F)}H.push(b+N)}return H.push("}"),H.join("")},o=e.__fontmetrics__.uncompress=function(I){if(typeof I!="string")throw new Error("Invalid argument passed to uncompress.");for(var F,b,N,U,H={},k=1,R=H,V=[],W="",se="",fe=I.length-1,ue=1;ue<fe;ue+=1)(U=I[ue])=="'"?F?(N=F.join(""),F=void 0):F=[]:F?F.push(U):U=="{"?(V.push([R,N]),R={},N=void 0):U=="}"?((b=V.pop())[0][b[1]]=R,N=void 0,R=b[0]):U=="-"?k=-1:N===void 0?r.hasOwnProperty(U)?(W+=r[U],N=parseInt(W,16)*k,k=1,W=""):W+=U:r.hasOwnProperty(U)?(se+=r[U],R[N]=parseInt(se,16)*k,k=1,N=void 0,se=""):se+=U;return H},g={codePages:["WinAnsiEncoding"],WinAnsiEncoding:o("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},y={Unicode:{Courier:g,"Courier-Bold":g,"Courier-BoldOblique":g,"Courier-Oblique":g,Helvetica:g,"Helvetica-Bold":g,"Helvetica-BoldOblique":g,"Helvetica-Oblique":g,"Times-Roman":g,"Times-Bold":g,"Times-BoldItalic":g,"Times-Italic":g}},C={Unicode:{"Courier-Oblique":o("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":o("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":o("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:o("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":o("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":o("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:o("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:o("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":o("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:o("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":o("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":o("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":o("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":o("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};e.events.push(["addFont",function(I){var F=I.font,b=C.Unicode[F.postScriptName];b&&(F.metadata.Unicode={},F.metadata.Unicode.widths=b.widths,F.metadata.Unicode.kerning=b.kerning);var N=y.Unicode[F.postScriptName];N&&(F.metadata.Unicode.encoding=N,F.encoding=N.codePages[0])}])}(Xr.API),function(e){var t=function(r){for(var i=r.length,a=new Uint8Array(i),u=0;u<i;u++)a[u]=r.charCodeAt(u);return a};e.API.events.push(["addFont",function(r){var i=void 0,a=r.font,u=r.instance;if(!a.isStandardFont){if(u===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+a.postScriptName+"').");if(typeof(i=u.existsFileInVFS(a.postScriptName)===!1?u.loadFile(a.postScriptName):u.getFileFromVFS(a.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+a.postScriptName+"').");(function(h,o){o=/^\x00\x01\x00\x00/.test(o)?t(o):t(Ug(o)),h.metadata=e.API.TTFFont.open(o),h.metadata.Unicode=h.metadata.Unicode||{encoding:{},kerning:{},widths:[]},h.metadata.glyIdsUsed=[0]})(a,i)}}])}(Xr),function(e){function t(){return(tn.canvg?Promise.resolve(tn.canvg):dB(()=>import("./index.es-4kPxjO5j.js"),[])).catch(function(r){return Promise.reject(new Error("Could not load canvg: "+r))}).then(function(r){return r.default?r.default:r})}Xr.API.addSvgAsImage=function(r,i,a,u,h,o,g,y){if(isNaN(i)||isNaN(a))throw yi.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(u)||isNaN(h))throw yi.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var C=document.createElement("canvas");C.width=u,C.height=h;var I=C.getContext("2d");I.fillStyle="#fff",I.fillRect(0,0,C.width,C.height);var F={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},b=this;return t().then(function(N){return N.fromString(I,r,F)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(N){return N.render(F)}).then(function(){b.addImage(C.toDataURL("image/jpeg",1),i,a,u,h,g,y)})}}(),Xr.API.putTotalPages=function(e){var t,r=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(t=new RegExp(e,"g"),r=this.internal.getNumberOfPages()):(t=new RegExp(this.pdfEscape16(e,this.internal.getFont()),"g"),r=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var i=1;i<=this.internal.getNumberOfPages();i++)for(var a=0;a<this.internal.pages[i].length;a++)this.internal.pages[i][a]=this.internal.pages[i][a].replace(t,r);return this},Xr.API.viewerPreferences=function(e,t){var r;e=e||{},t=t||!1;var i,a,u,h={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},o=Object.keys(h),g=[],y=0,C=0,I=0;function F(N,U){var H,k=!1;for(H=0;H<N.length;H+=1)N[H]===U&&(k=!0);return k}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(h)),this.internal.viewerpreferences.isSubscribed=!1),r=this.internal.viewerpreferences.configuration,e==="reset"||t===!0){var b=o.length;for(I=0;I<b;I+=1)r[o[I]].value=r[o[I]].defaultValue,r[o[I]].explicitSet=!1}if(ei(e)==="object"){for(a in e)if(u=e[a],F(o,a)&&u!==void 0){if(r[a].type==="boolean"&&typeof u=="boolean")r[a].value=u;else if(r[a].type==="name"&&F(r[a].valueSet,u))r[a].value=u;else if(r[a].type==="integer"&&Number.isInteger(u))r[a].value=u;else if(r[a].type==="array"){for(y=0;y<u.length;y+=1)if(i=!0,u[y].length===1&&typeof u[y][0]=="number")g.push(String(u[y]-1));else if(u[y].length>1){for(C=0;C<u[y].length;C+=1)typeof u[y][C]!="number"&&(i=!1);i===!0&&g.push([u[y][0]-1,u[y][1]-1].join(" "))}r[a].value="["+g.join(" ")+"]"}else r[a].value=r[a].defaultValue;r[a].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var N,U=[];for(N in r)r[N].explicitSet===!0&&(r[N].type==="name"?U.push("/"+N+" /"+r[N].value):U.push("/"+N+" "+r[N].value));U.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+U.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=r,this},function(e){var t=function(){var i='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',a=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),u=unescape(encodeURIComponent(i)),h=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),o=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),g=unescape(encodeURIComponent("</x:xmpmeta>")),y=u.length+h.length+o.length+a.length+g.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+y+" >>"),this.internal.write("stream"),this.internal.write(a+u+h+o+g),this.internal.write("endstream"),this.internal.write("endobj")},r=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};e.addMetadata=function(i,a){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:i,namespaceuri:a||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",r),this.internal.events.subscribe("postPutResources",t)),this}}(Xr.API),function(e){var t=e.API,r=t.pdfEscape16=function(u,h){for(var o,g=h.metadata.Unicode.widths,y=["","0","00","000","0000"],C=[""],I=0,F=u.length;I<F;++I){if(o=h.metadata.characterToGlyph(u.charCodeAt(I)),h.metadata.glyIdsUsed.push(o),h.metadata.toUnicode[o]=u.charCodeAt(I),g.indexOf(o)==-1&&(g.push(o),g.push([parseInt(h.metadata.widthOfGlyph(o),10)])),o=="0")return C.join("");o=o.toString(16),C.push(y[4-o.length],o)}return C.join("")},i=function(u){var h,o,g,y,C,I,F;for(C=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,g=[],I=0,F=(o=Object.keys(u).sort(function(b,N){return b-N})).length;I<F;I++)h=o[I],g.length>=100&&(C+=`
`+g.length+` beginbfchar
`+g.join(`
`)+`
endbfchar`,g=[]),u[h]!==void 0&&u[h]!==null&&typeof u[h].toString=="function"&&(y=("0000"+u[h].toString(16)).slice(-4),h=("0000"+(+h).toString(16)).slice(-4),g.push("<"+h+"><"+y+">"));return g.length&&(C+=`
`+g.length+` beginbfchar
`+g.join(`
`)+`
endbfchar
`),C+=`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};t.events.push(["putFont",function(u){(function(h){var o=h.font,g=h.out,y=h.newObject,C=h.putStream;if(o.metadata instanceof e.API.TTFFont&&o.encoding==="Identity-H"){for(var I=o.metadata.Unicode.widths,F=o.metadata.subset.encode(o.metadata.glyIdsUsed,1),b="",N=0;N<F.length;N++)b+=String.fromCharCode(F[N]);var U=y();C({data:b,addLength1:!0,objectId:U}),g("endobj");var H=y();C({data:i(o.metadata.toUnicode),addLength1:!0,objectId:H}),g("endobj");var k=y();g("<<"),g("/Type /FontDescriptor"),g("/FontName /"+ip(o.fontName)),g("/FontFile2 "+U+" 0 R"),g("/FontBBox "+e.API.PDFObject.convert(o.metadata.bbox)),g("/Flags "+o.metadata.flags),g("/StemV "+o.metadata.stemV),g("/ItalicAngle "+o.metadata.italicAngle),g("/Ascent "+o.metadata.ascender),g("/Descent "+o.metadata.decender),g("/CapHeight "+o.metadata.capHeight),g(">>"),g("endobj");var R=y();g("<<"),g("/Type /Font"),g("/BaseFont /"+ip(o.fontName)),g("/FontDescriptor "+k+" 0 R"),g("/W "+e.API.PDFObject.convert(I)),g("/CIDToGIDMap /Identity"),g("/DW 1000"),g("/Subtype /CIDFontType2"),g("/CIDSystemInfo"),g("<<"),g("/Supplement 0"),g("/Registry (Adobe)"),g("/Ordering ("+o.encoding+")"),g(">>"),g(">>"),g("endobj"),o.objectNumber=y(),g("<<"),g("/Type /Font"),g("/Subtype /Type0"),g("/ToUnicode "+H+" 0 R"),g("/BaseFont /"+ip(o.fontName)),g("/Encoding /"+o.encoding),g("/DescendantFonts ["+R+" 0 R]"),g(">>"),g("endobj"),o.isAlreadyPutted=!0}})(u)}]),t.events.push(["putFont",function(u){(function(h){var o=h.font,g=h.out,y=h.newObject,C=h.putStream;if(o.metadata instanceof e.API.TTFFont&&o.encoding==="WinAnsiEncoding"){for(var I=o.metadata.rawData,F="",b=0;b<I.length;b++)F+=String.fromCharCode(I[b]);var N=y();C({data:F,addLength1:!0,objectId:N}),g("endobj");var U=y();C({data:i(o.metadata.toUnicode),addLength1:!0,objectId:U}),g("endobj");var H=y();g("<<"),g("/Descent "+o.metadata.decender),g("/CapHeight "+o.metadata.capHeight),g("/StemV "+o.metadata.stemV),g("/Type /FontDescriptor"),g("/FontFile2 "+N+" 0 R"),g("/Flags 96"),g("/FontBBox "+e.API.PDFObject.convert(o.metadata.bbox)),g("/FontName /"+ip(o.fontName)),g("/ItalicAngle "+o.metadata.italicAngle),g("/Ascent "+o.metadata.ascender),g(">>"),g("endobj"),o.objectNumber=y();for(var k=0;k<o.metadata.hmtx.widths.length;k++)o.metadata.hmtx.widths[k]=parseInt(o.metadata.hmtx.widths[k]*(1e3/o.metadata.head.unitsPerEm));g("<</Subtype/TrueType/Type/Font/ToUnicode "+U+" 0 R/BaseFont/"+ip(o.fontName)+"/FontDescriptor "+H+" 0 R/Encoding/"+o.encoding+" /FirstChar 29 /LastChar 255 /Widths "+e.API.PDFObject.convert(o.metadata.hmtx.widths)+">>"),g("endobj"),o.isAlreadyPutted=!0}})(u)}]);var a=function(u){var h,o=u.text||"",g=u.x,y=u.y,C=u.options||{},I=u.mutex||{},F=I.pdfEscape,b=I.activeFontKey,N=I.fonts,U=b,H="",k=0,R="",V=N[U].encoding;if(N[U].encoding!=="Identity-H")return{text:o,x:g,y,options:C,mutex:I};for(R=o,U=b,Array.isArray(o)&&(R=o[0]),k=0;k<R.length;k+=1)N[U].metadata.hasOwnProperty("cmap")&&(h=N[U].metadata.cmap.unicode.codeMap[R[k].charCodeAt(0)]),h||R[k].charCodeAt(0)<256&&N[U].metadata.hasOwnProperty("Unicode")?H+=R[k]:H+="";var W="";return parseInt(U.slice(1))<14||V==="WinAnsiEncoding"?W=F(H,U).split("").map(function(se){return se.charCodeAt(0).toString(16)}).join(""):V==="Identity-H"&&(W=r(H,N[U])),I.isHex=!0,{text:W,x:g,y,options:C,mutex:I}};t.events.push(["postProcessText",function(u){var h=u.text||"",o=[],g={text:h,x:u.x,y:u.y,options:u.options,mutex:u.mutex};if(Array.isArray(h)){var y=0;for(y=0;y<h.length;y+=1)Array.isArray(h[y])&&h[y].length===3?o.push([a(Object.assign({},g,{text:h[y][0]})).text,h[y][1],h[y][2]]):o.push(a(Object.assign({},g,{text:h[y]})).text);u.text=o}else u.text=a(Object.assign({},g,{text:h})).text}])}(Xr),function(e){var t=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};e.existsFileInVFS=function(r){return t.call(this),this.internal.vFS[r]!==void 0},e.addFileToVFS=function(r,i){return t.call(this),this.internal.vFS[r]=i,this},e.getFileFromVFS=function(r){return t.call(this),this.internal.vFS[r]!==void 0?this.internal.vFS[r]:null}}(Xr.API),function(e){e.__bidiEngine__=e.prototype.__bidiEngine__=function(i){var a,u,h,o,g,y,C,I=t,F=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],b=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],N={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},U={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},H=["(",")","(","<",">","<","[","]","[","{","}","{","«","»","«","‹","›","‹","⁅","⁆","⁅","⁽","⁾","⁽","₍","₎","₍","≤","≥","≤","〈","〉","〈","﹙","﹚","﹙","﹛","﹜","﹛","﹝","﹞","﹝","﹤","﹥","﹤"],k=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),R=!1,V=0;this.__bidiEngine__={};var W=function(te){var de=te.charCodeAt(),Te=de>>8,we=U[Te];return we!==void 0?I[256*we+(255&de)]:Te===252||Te===253?"AL":k.test(Te)?"L":Te===8?"R":"N"},se=function(te){for(var de,Te=0;Te<te.length;Te++){if((de=W(te.charAt(Te)))==="L")return!1;if(de==="R")return!0}return!1},fe=function(te,de,Te,we){var st,Ze,At,Le,He=de[we];switch(He){case"L":case"R":R=!1;break;case"N":case"AN":break;case"EN":R&&(He="AN");break;case"AL":R=!0,He="R";break;case"WS":He="N";break;case"CS":we<1||we+1>=de.length||(st=Te[we-1])!=="EN"&&st!=="AN"||(Ze=de[we+1])!=="EN"&&Ze!=="AN"?He="N":R&&(Ze="AN"),He=Ze===st?Ze:"N";break;case"ES":He=(st=we>0?Te[we-1]:"B")==="EN"&&we+1<de.length&&de[we+1]==="EN"?"EN":"N";break;case"ET":if(we>0&&Te[we-1]==="EN"){He="EN";break}if(R){He="N";break}for(At=we+1,Le=de.length;At<Le&&de[At]==="ET";)At++;He=At<Le&&de[At]==="EN"?"EN":"N";break;case"NSM":if(h&&!o){for(Le=de.length,At=we+1;At<Le&&de[At]==="NSM";)At++;if(At<Le){var it=te[we],Lt=it>=1425&&it<=2303||it===64286;if(st=de[At],Lt&&(st==="R"||st==="AL")){He="R";break}}}He=we<1||(st=de[we-1])==="B"?"N":Te[we-1];break;case"B":R=!1,a=!0,He=V;break;case"S":u=!0,He="N";break;case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":R=!1;break;case"BN":He="N"}return He},ue=function(te,de,Te){var we=te.split("");return Te&&ae(we,Te,{hiLevel:V}),we.reverse(),de&&de.reverse(),we.join("")},ae=function(te,de,Te){var we,st,Ze,At,Le,He=-1,it=te.length,Lt=0,ie=[],Ce=V?b:F,Pe=[];for(R=!1,a=!1,u=!1,st=0;st<it;st++)Pe[st]=W(te[st]);for(Ze=0;Ze<it;Ze++){if(Le=Lt,ie[Ze]=fe(te,Pe,ie,Ze),we=240&(Lt=Ce[Le][N[ie[Ze]]]),Lt&=15,de[Ze]=At=Ce[Lt][5],we>0)if(we===16){for(st=He;st<Ze;st++)de[st]=1;He=-1}else He=-1;if(Ce[Lt][6])He===-1&&(He=Ze);else if(He>-1){for(st=He;st<Ze;st++)de[st]=At;He=-1}Pe[Ze]==="B"&&(de[Ze]=0),Te.hiLevel|=At}u&&function($e,nt,Xe){for(var pt=0;pt<Xe;pt++)if($e[pt]==="S"){nt[pt]=V;for(var dt=pt-1;dt>=0&&$e[dt]==="WS";dt--)nt[dt]=V}}(Pe,de,it)},Be=function(te,de,Te,we,st){if(!(st.hiLevel<te)){if(te===1&&V===1&&!a)return de.reverse(),void(Te&&Te.reverse());for(var Ze,At,Le,He,it=de.length,Lt=0;Lt<it;){if(we[Lt]>=te){for(Le=Lt+1;Le<it&&we[Le]>=te;)Le++;for(He=Lt,At=Le-1;He<At;He++,At--)Ze=de[He],de[He]=de[At],de[At]=Ze,Te&&(Ze=Te[He],Te[He]=Te[At],Te[At]=Ze);Lt=Le}Lt++}}},Ue=function(te,de,Te){var we=te.split(""),st={hiLevel:V};return Te||(Te=[]),ae(we,Te,st),function(Ze,At,Le){if(Le.hiLevel!==0&&C)for(var He,it=0;it<Ze.length;it++)At[it]===1&&(He=H.indexOf(Ze[it]))>=0&&(Ze[it]=H[He+1])}(we,Te,st),Be(2,we,de,Te,st),Be(1,we,de,Te,st),we.join("")};return this.__bidiEngine__.doBidiReorder=function(te,de,Te){if(function(st,Ze){if(Ze)for(var At=0;At<st.length;At++)Ze[At]=At;o===void 0&&(o=se(st)),y===void 0&&(y=se(st))}(te,de),h||!g||y)if(h&&g&&o^y)V=o?1:0,te=ue(te,de,Te);else if(!h&&g&&y)V=o?1:0,te=Ue(te,de,Te),te=ue(te,de);else if(!h||o||g||y){if(h&&!g&&o^y)te=ue(te,de),o?(V=0,te=Ue(te,de,Te)):(V=1,te=Ue(te,de,Te),te=ue(te,de));else if(h&&o&&!g&&y)V=1,te=Ue(te,de,Te),te=ue(te,de);else if(!h&&!g&&o^y){var we=C;o?(V=1,te=Ue(te,de,Te),V=0,C=!1,te=Ue(te,de,Te),C=we):(V=0,te=Ue(te,de,Te),te=ue(te,de),V=1,C=!1,te=Ue(te,de,Te),C=we,te=ue(te,de))}}else V=0,te=Ue(te,de,Te);else V=o?1:0,te=Ue(te,de,Te);return te},this.__bidiEngine__.setOptions=function(te){te&&(h=te.isInputVisual,g=te.isOutputVisual,o=te.isInputRtl,y=te.isOutputRtl,C=te.isSymmetricSwapping)},this.__bidiEngine__.setOptions(i),this.__bidiEngine__};var t=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],r=new e.__bidiEngine__({isInputVisual:!0});e.API.events.push(["postProcessText",function(i){var a=i.text;i.x,i.y;var u=i.options||{};i.mutex,u.lang;var h=[];if(u.isInputVisual=typeof u.isInputVisual!="boolean"||u.isInputVisual,r.setOptions(u),Object.prototype.toString.call(a)==="[object Array]"){var o=0;for(h=[],o=0;o<a.length;o+=1)Object.prototype.toString.call(a[o])==="[object Array]"?h.push([r.doBidiReorder(a[o][0]),a[o][1],a[o][2]]):h.push([r.doBidiReorder(a[o])]);i.text=h}else i.text=r.doBidiReorder(a);r.setOptions({isInputVisual:!0})}])}(Xr),Xr.API.TTFFont=function(){function e(t){var r;if(this.rawData=t,r=this.contents=new od(t),this.contents.pos=4,r.readString(4)==="ttcf")throw new Error("TTCF not supported.");r.pos=0,this.parse(),this.subset=new Vte(this),this.registerTTF()}return e.open=function(t){return new e(t)},e.prototype.parse=function(){return this.directory=new Tte(this.contents),this.head=new Lte(this),this.name=new Nte(this),this.cmap=new SR(this),this.toUnicode={},this.hhea=new Mte(this),this.maxp=new Dte(this),this.hmtx=new Qte(this),this.post=new Ute(this),this.os2=new kte(this),this.loca=new jte(this),this.glyf=new Ote(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},e.prototype.registerTTF=function(){var t,r,i,a,u;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var h,o,g,y;for(y=[],h=0,o=(g=this.bbox).length;h<o;h++)t=g[h],y.push(Math.round(t*this.scaleFactor));return y}).call(this),this.stemV=0,this.post.exists?(i=255&(a=this.post.italic_angle),32768&(r=a>>16)&&(r=-(1+(65535^r))),this.italicAngle=+(r+"."+i)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(u=this.familyClass)===1||u===2||u===3||u===4||u===5||u===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},e.prototype.characterToGlyph=function(t){var r;return((r=this.cmap.unicode)!=null?r.codeMap[t]:void 0)||0},e.prototype.widthOfGlyph=function(t){var r;return r=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(t).advance*r},e.prototype.widthOfString=function(t,r,i){var a,u,h,o;for(h=0,u=0,o=(t=""+t).length;0<=o?u<o:u>o;u=0<=o?++u:--u)a=t.charCodeAt(u),h+=this.widthOfGlyph(this.characterToGlyph(a))+i*(1e3/r)||0;return h*(r/1e3)},e.prototype.lineHeight=function(t,r){var i;return r==null&&(r=!1),i=r?this.lineGap:0,(this.ascender+i-this.decender)/1e3*t},e}();var WA,od=function(){function e(t){this.data=t??[],this.pos=0,this.length=this.data.length}return e.prototype.readByte=function(){return this.data[this.pos++]},e.prototype.writeByte=function(t){return this.data[this.pos++]=t},e.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},e.prototype.writeUInt32=function(t){return this.writeByte(t>>>24&255),this.writeByte(t>>16&255),this.writeByte(t>>8&255),this.writeByte(255&t)},e.prototype.readInt32=function(){var t;return(t=this.readUInt32())>=2147483648?t-4294967296:t},e.prototype.writeInt32=function(t){return t<0&&(t+=4294967296),this.writeUInt32(t)},e.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},e.prototype.writeUInt16=function(t){return this.writeByte(t>>8&255),this.writeByte(255&t)},e.prototype.readInt16=function(){var t;return(t=this.readUInt16())>=32768?t-65536:t},e.prototype.writeInt16=function(t){return t<0&&(t+=65536),this.writeUInt16(t)},e.prototype.readString=function(t){var r,i;for(i=[],r=0;0<=t?r<t:r>t;r=0<=t?++r:--r)i[r]=String.fromCharCode(this.readByte());return i.join("")},e.prototype.writeString=function(t){var r,i,a;for(a=[],r=0,i=t.length;0<=i?r<i:r>i;r=0<=i?++r:--r)a.push(this.writeByte(t.charCodeAt(r)));return a},e.prototype.readShort=function(){return this.readInt16()},e.prototype.writeShort=function(t){return this.writeInt16(t)},e.prototype.readLongLong=function(){var t,r,i,a,u,h,o,g;return t=this.readByte(),r=this.readByte(),i=this.readByte(),a=this.readByte(),u=this.readByte(),h=this.readByte(),o=this.readByte(),g=this.readByte(),128&t?-1*(72057594037927940*(255^t)+281474976710656*(255^r)+1099511627776*(255^i)+4294967296*(255^a)+16777216*(255^u)+65536*(255^h)+256*(255^o)+(255^g)+1):72057594037927940*t+281474976710656*r+1099511627776*i+4294967296*a+16777216*u+65536*h+256*o+g},e.prototype.writeLongLong=function(t){var r,i;return r=Math.floor(t/4294967296),i=4294967295&t,this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r),this.writeByte(i>>24&255),this.writeByte(i>>16&255),this.writeByte(i>>8&255),this.writeByte(255&i)},e.prototype.readInt=function(){return this.readInt32()},e.prototype.writeInt=function(t){return this.writeInt32(t)},e.prototype.read=function(t){var r,i;for(r=[],i=0;0<=t?i<t:i>t;i=0<=t?++i:--i)r.push(this.readByte());return r},e.prototype.write=function(t){var r,i,a,u;for(u=[],i=0,a=t.length;i<a;i++)r=t[i],u.push(this.writeByte(r));return u},e}(),Tte=function(){var e;function t(r){var i,a,u;for(this.scalarType=r.readInt(),this.tableCount=r.readShort(),this.searchRange=r.readShort(),this.entrySelector=r.readShort(),this.rangeShift=r.readShort(),this.tables={},a=0,u=this.tableCount;0<=u?a<u:a>u;a=0<=u?++a:--a)i={tag:r.readString(4),checksum:r.readInt(),offset:r.readInt(),length:r.readInt()},this.tables[i.tag]=i}return t.prototype.encode=function(r){var i,a,u,h,o,g,y,C,I,F,b,N,U;for(U in b=Object.keys(r).length,g=Math.log(2),I=16*Math.floor(Math.log(b)/g),h=Math.floor(I/g),C=16*b-I,(a=new od).writeInt(this.scalarType),a.writeShort(b),a.writeShort(I),a.writeShort(h),a.writeShort(C),u=16*b,y=a.pos+u,o=null,N=[],r)for(F=r[U],a.writeString(U),a.writeInt(e(F)),a.writeInt(y),a.writeInt(F.length),N=N.concat(F),U==="head"&&(o=y),y+=F.length;y%4;)N.push(0),y++;return a.write(N),i=2981146554-e(a.data),a.pos=o+8,a.writeUInt32(i),a.data},e=function(r){var i,a,u,h;for(r=ER.call(r);r.length%4;)r.push(0);for(u=new od(r),a=0,i=0,h=r.length;i<h;i=i+=4)a+=u.readUInt32();return 4294967295&a},t}(),Pte={}.hasOwnProperty,Vc=function(e,t){for(var r in t)Pte.call(t,r)&&(e[r]=t[r]);function i(){this.constructor=e}return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e};WA=function(){function e(t){var r;this.file=t,r=this.file.directory.tables[this.tag],this.exists=!!r,r&&(this.offset=r.offset,this.length=r.length,this.parse(this.file.contents))}return e.prototype.parse=function(){},e.prototype.encode=function(){},e.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},e}();var Lte=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return Vc(t,WA),t.prototype.tag="head",t.prototype.parse=function(r){return r.pos=this.offset,this.version=r.readInt(),this.revision=r.readInt(),this.checkSumAdjustment=r.readInt(),this.magicNumber=r.readInt(),this.flags=r.readShort(),this.unitsPerEm=r.readShort(),this.created=r.readLongLong(),this.modified=r.readLongLong(),this.xMin=r.readShort(),this.yMin=r.readShort(),this.xMax=r.readShort(),this.yMax=r.readShort(),this.macStyle=r.readShort(),this.lowestRecPPEM=r.readShort(),this.fontDirectionHint=r.readShort(),this.indexToLocFormat=r.readShort(),this.glyphDataFormat=r.readShort()},t.prototype.encode=function(r){var i;return(i=new od).writeInt(this.version),i.writeInt(this.revision),i.writeInt(this.checkSumAdjustment),i.writeInt(this.magicNumber),i.writeShort(this.flags),i.writeShort(this.unitsPerEm),i.writeLongLong(this.created),i.writeLongLong(this.modified),i.writeShort(this.xMin),i.writeShort(this.yMin),i.writeShort(this.xMax),i.writeShort(this.yMax),i.writeShort(this.macStyle),i.writeShort(this.lowestRecPPEM),i.writeShort(this.fontDirectionHint),i.writeShort(r),i.writeShort(this.glyphDataFormat),i.data},t}(),TT=function(){function e(t,r){var i,a,u,h,o,g,y,C,I,F,b,N,U,H,k,R,V;switch(this.platformID=t.readUInt16(),this.encodingID=t.readShort(),this.offset=r+t.readInt(),I=t.pos,t.pos=this.offset,this.format=t.readUInt16(),this.length=t.readUInt16(),this.language=t.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(g=0;g<256;++g)this.codeMap[g]=t.readByte();break;case 4:for(b=t.readUInt16(),F=b/2,t.pos+=6,u=function(){var W,se;for(se=[],g=W=0;0<=F?W<F:W>F;g=0<=F?++W:--W)se.push(t.readUInt16());return se}(),t.pos+=2,U=function(){var W,se;for(se=[],g=W=0;0<=F?W<F:W>F;g=0<=F?++W:--W)se.push(t.readUInt16());return se}(),y=function(){var W,se;for(se=[],g=W=0;0<=F?W<F:W>F;g=0<=F?++W:--W)se.push(t.readUInt16());return se}(),C=function(){var W,se;for(se=[],g=W=0;0<=F?W<F:W>F;g=0<=F?++W:--W)se.push(t.readUInt16());return se}(),a=(this.length-t.pos+this.offset)/2,o=function(){var W,se;for(se=[],g=W=0;0<=a?W<a:W>a;g=0<=a?++W:--W)se.push(t.readUInt16());return se}(),g=k=0,V=u.length;k<V;g=++k)for(H=u[g],i=R=N=U[g];N<=H?R<=H:R>=H;i=N<=H?++R:--R)C[g]===0?h=i+y[g]:(h=o[C[g]/2+(i-N)-(F-g)]||0)!==0&&(h+=y[g]),this.codeMap[i]=65535&h}t.pos=I}return e.encode=function(t,r){var i,a,u,h,o,g,y,C,I,F,b,N,U,H,k,R,V,W,se,fe,ue,ae,Be,Ue,te,de,Te,we,st,Ze,At,Le,He,it,Lt,ie,Ce,Pe,$e,nt,Xe,pt,dt,Rt,Mt,$t;switch(we=new od,h=Object.keys(t).sort(function(jt,vr){return jt-vr}),r){case"macroman":for(U=0,H=function(){var jt=[];for(N=0;N<256;++N)jt.push(0);return jt}(),R={0:0},u={},st=0,He=h.length;st<He;st++)R[dt=t[a=h[st]]]==null&&(R[dt]=++U),u[a]={old:t[a],new:R[t[a]]},H[a]=R[t[a]];return we.writeUInt16(1),we.writeUInt16(0),we.writeUInt32(12),we.writeUInt16(0),we.writeUInt16(262),we.writeUInt16(0),we.write(H),{charMap:u,subtable:we.data,maxGlyphID:U+1};case"unicode":for(de=[],I=[],V=0,R={},i={},k=y=null,Ze=0,it=h.length;Ze<it;Ze++)R[se=t[a=h[Ze]]]==null&&(R[se]=++V),i[a]={old:se,new:R[se]},o=R[se]-a,k!=null&&o===y||(k&&I.push(k),de.push(a),y=o),k=a;for(k&&I.push(k),I.push(65535),de.push(65535),Ue=2*(Be=de.length),ae=2*Math.pow(Math.log(Be)/Math.LN2,2),F=Math.log(ae/2)/Math.LN2,ue=2*Be-ae,g=[],fe=[],b=[],N=At=0,Lt=de.length;At<Lt;N=++At){if(te=de[N],C=I[N],te===65535){g.push(0),fe.push(0);break}if(te-(Te=i[te].new)>=32768)for(g.push(0),fe.push(2*(b.length+Be-N)),a=Le=te;te<=C?Le<=C:Le>=C;a=te<=C?++Le:--Le)b.push(i[a].new);else g.push(Te-te),fe.push(0)}for(we.writeUInt16(3),we.writeUInt16(1),we.writeUInt32(12),we.writeUInt16(4),we.writeUInt16(16+8*Be+2*b.length),we.writeUInt16(0),we.writeUInt16(Ue),we.writeUInt16(ae),we.writeUInt16(F),we.writeUInt16(ue),Xe=0,ie=I.length;Xe<ie;Xe++)a=I[Xe],we.writeUInt16(a);for(we.writeUInt16(0),pt=0,Ce=de.length;pt<Ce;pt++)a=de[pt],we.writeUInt16(a);for(Rt=0,Pe=g.length;Rt<Pe;Rt++)o=g[Rt],we.writeUInt16(o);for(Mt=0,$e=fe.length;Mt<$e;Mt++)W=fe[Mt],we.writeUInt16(W);for($t=0,nt=b.length;$t<nt;$t++)U=b[$t],we.writeUInt16(U);return{charMap:i,subtable:we.data,maxGlyphID:V+1}}},e}(),SR=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return Vc(t,WA),t.prototype.tag="cmap",t.prototype.parse=function(r){var i,a,u;for(r.pos=this.offset,this.version=r.readUInt16(),u=r.readUInt16(),this.tables=[],this.unicode=null,a=0;0<=u?a<u:a>u;a=0<=u?++a:--a)i=new TT(r,this.offset),this.tables.push(i),i.isUnicode&&this.unicode==null&&(this.unicode=i);return!0},t.encode=function(r,i){var a,u;return i==null&&(i="macroman"),a=TT.encode(r,i),(u=new od).writeUInt16(0),u.writeUInt16(1),a.table=u.data.concat(a.subtable),a},t}(),Mte=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return Vc(t,WA),t.prototype.tag="hhea",t.prototype.parse=function(r){return r.pos=this.offset,this.version=r.readInt(),this.ascender=r.readShort(),this.decender=r.readShort(),this.lineGap=r.readShort(),this.advanceWidthMax=r.readShort(),this.minLeftSideBearing=r.readShort(),this.minRightSideBearing=r.readShort(),this.xMaxExtent=r.readShort(),this.caretSlopeRise=r.readShort(),this.caretSlopeRun=r.readShort(),this.caretOffset=r.readShort(),r.pos+=8,this.metricDataFormat=r.readShort(),this.numberOfMetrics=r.readUInt16()},t}(),kte=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return Vc(t,WA),t.prototype.tag="OS/2",t.prototype.parse=function(r){if(r.pos=this.offset,this.version=r.readUInt16(),this.averageCharWidth=r.readShort(),this.weightClass=r.readUInt16(),this.widthClass=r.readUInt16(),this.type=r.readShort(),this.ySubscriptXSize=r.readShort(),this.ySubscriptYSize=r.readShort(),this.ySubscriptXOffset=r.readShort(),this.ySubscriptYOffset=r.readShort(),this.ySuperscriptXSize=r.readShort(),this.ySuperscriptYSize=r.readShort(),this.ySuperscriptXOffset=r.readShort(),this.ySuperscriptYOffset=r.readShort(),this.yStrikeoutSize=r.readShort(),this.yStrikeoutPosition=r.readShort(),this.familyClass=r.readShort(),this.panose=function(){var i,a;for(a=[],i=0;i<10;++i)a.push(r.readByte());return a}(),this.charRange=function(){var i,a;for(a=[],i=0;i<4;++i)a.push(r.readInt());return a}(),this.vendorID=r.readString(4),this.selection=r.readShort(),this.firstCharIndex=r.readShort(),this.lastCharIndex=r.readShort(),this.version>0&&(this.ascent=r.readShort(),this.descent=r.readShort(),this.lineGap=r.readShort(),this.winAscent=r.readShort(),this.winDescent=r.readShort(),this.codePageRange=function(){var i,a;for(a=[],i=0;i<2;i=++i)a.push(r.readInt());return a}(),this.version>1))return this.xHeight=r.readShort(),this.capHeight=r.readShort(),this.defaultChar=r.readShort(),this.breakChar=r.readShort(),this.maxContext=r.readShort()},t}(),Ute=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return Vc(t,WA),t.prototype.tag="post",t.prototype.parse=function(r){var i,a,u;switch(r.pos=this.offset,this.format=r.readInt(),this.italicAngle=r.readInt(),this.underlinePosition=r.readShort(),this.underlineThickness=r.readShort(),this.isFixedPitch=r.readInt(),this.minMemType42=r.readInt(),this.maxMemType42=r.readInt(),this.minMemType1=r.readInt(),this.maxMemType1=r.readInt(),this.format){case 65536:break;case 131072:var h;for(a=r.readUInt16(),this.glyphNameIndex=[],h=0;0<=a?h<a:h>a;h=0<=a?++h:--h)this.glyphNameIndex.push(r.readUInt16());for(this.names=[],u=[];r.pos<this.offset+this.length;)i=r.readByte(),u.push(this.names.push(r.readString(i)));return u;case 151552:return a=r.readUInt16(),this.offsets=r.read(a);case 196608:break;case 262144:return this.map=(function(){var o,g,y;for(y=[],h=o=0,g=this.file.maxp.numGlyphs;0<=g?o<g:o>g;h=0<=g?++o:--o)y.push(r.readUInt32());return y}).call(this)}},t}(),Rte=function(e,t){this.raw=e,this.length=e.length,this.platformID=t.platformID,this.encodingID=t.encodingID,this.languageID=t.languageID},Nte=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return Vc(t,WA),t.prototype.tag="name",t.prototype.parse=function(r){var i,a,u,h,o,g,y,C,I,F,b;for(r.pos=this.offset,r.readShort(),i=r.readShort(),g=r.readShort(),a=[],h=0;0<=i?h<i:h>i;h=0<=i?++h:--h)a.push({platformID:r.readShort(),encodingID:r.readShort(),languageID:r.readShort(),nameID:r.readShort(),length:r.readShort(),offset:this.offset+g+r.readShort()});for(y={},h=I=0,F=a.length;I<F;h=++I)u=a[h],r.pos=u.offset,C=r.readString(u.length),o=new Rte(C,u),y[b=u.nameID]==null&&(y[b]=[]),y[u.nameID].push(o);this.strings=y,this.copyright=y[0],this.fontFamily=y[1],this.fontSubfamily=y[2],this.uniqueSubfamily=y[3],this.fontName=y[4],this.version=y[5];try{this.postscriptName=y[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=y[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=y[7],this.manufacturer=y[8],this.designer=y[9],this.description=y[10],this.vendorUrl=y[11],this.designerUrl=y[12],this.license=y[13],this.licenseUrl=y[14],this.preferredFamily=y[15],this.preferredSubfamily=y[17],this.compatibleFull=y[18],this.sampleText=y[19]},t}(),Dte=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return Vc(t,WA),t.prototype.tag="maxp",t.prototype.parse=function(r){return r.pos=this.offset,this.version=r.readInt(),this.numGlyphs=r.readUInt16(),this.maxPoints=r.readUInt16(),this.maxContours=r.readUInt16(),this.maxCompositePoints=r.readUInt16(),this.maxComponentContours=r.readUInt16(),this.maxZones=r.readUInt16(),this.maxTwilightPoints=r.readUInt16(),this.maxStorage=r.readUInt16(),this.maxFunctionDefs=r.readUInt16(),this.maxInstructionDefs=r.readUInt16(),this.maxStackElements=r.readUInt16(),this.maxSizeOfInstructions=r.readUInt16(),this.maxComponentElements=r.readUInt16(),this.maxComponentDepth=r.readUInt16()},t}(),Qte=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return Vc(t,WA),t.prototype.tag="hmtx",t.prototype.parse=function(r){var i,a,u,h,o,g,y;for(r.pos=this.offset,this.metrics=[],i=0,g=this.file.hhea.numberOfMetrics;0<=g?i<g:i>g;i=0<=g?++i:--i)this.metrics.push({advance:r.readUInt16(),lsb:r.readInt16()});for(u=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var C,I;for(I=[],i=C=0;0<=u?C<u:C>u;i=0<=u?++C:--C)I.push(r.readInt16());return I}(),this.widths=(function(){var C,I,F,b;for(b=[],C=0,I=(F=this.metrics).length;C<I;C++)h=F[C],b.push(h.advance);return b}).call(this),a=this.widths[this.widths.length-1],y=[],i=o=0;0<=u?o<u:o>u;i=0<=u?++o:--o)y.push(this.widths.push(a));return y},t.prototype.forGlyph=function(r){return r in this.metrics?this.metrics[r]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[r-this.metrics.length]}},t}(),ER=[].slice,Ote=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return Vc(t,WA),t.prototype.tag="glyf",t.prototype.parse=function(){return this.cache={}},t.prototype.glyphFor=function(r){var i,a,u,h,o,g,y,C,I,F;return r in this.cache?this.cache[r]:(h=this.file.loca,i=this.file.contents,a=h.indexOf(r),(u=h.lengthOf(r))===0?this.cache[r]=null:(i.pos=this.offset+a,o=(g=new od(i.read(u))).readShort(),C=g.readShort(),F=g.readShort(),y=g.readShort(),I=g.readShort(),this.cache[r]=o===-1?new Hte(g,C,F,y,I):new zte(g,o,C,F,y,I),this.cache[r]))},t.prototype.encode=function(r,i,a){var u,h,o,g,y;for(o=[],h=[],g=0,y=i.length;g<y;g++)u=r[i[g]],h.push(o.length),u&&(o=o.concat(u.encode(a)));return h.push(o.length),{table:o,offsets:h}},t}(),zte=function(){function e(t,r,i,a,u,h){this.raw=t,this.numberOfContours=r,this.xMin=i,this.yMin=a,this.xMax=u,this.yMax=h,this.compound=!1}return e.prototype.encode=function(){return this.raw.data},e}(),Hte=function(){function e(t,r,i,a,u){var h,o;for(this.raw=t,this.xMin=r,this.yMin=i,this.xMax=a,this.yMax=u,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],h=this.raw;o=h.readShort(),this.glyphOffsets.push(h.pos),this.glyphIDs.push(h.readUInt16()),32&o;)h.pos+=1&o?4:2,128&o?h.pos+=8:64&o?h.pos+=4:8&o&&(h.pos+=2)}return e.prototype.encode=function(){var t,r,i;for(r=new od(ER.call(this.raw.data)),t=0,i=this.glyphIDs.length;t<i;++t)r.pos=this.glyphOffsets[t];return r.data},e}(),jte=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return Vc(t,WA),t.prototype.tag="loca",t.prototype.parse=function(r){var i,a;return r.pos=this.offset,i=this.file.head.indexToLocFormat,this.offsets=i===0?(function(){var u,h;for(h=[],a=0,u=this.length;a<u;a+=2)h.push(2*r.readUInt16());return h}).call(this):(function(){var u,h;for(h=[],a=0,u=this.length;a<u;a+=4)h.push(r.readUInt32());return h}).call(this)},t.prototype.indexOf=function(r){return this.offsets[r]},t.prototype.lengthOf=function(r){return this.offsets[r+1]-this.offsets[r]},t.prototype.encode=function(r,i){for(var a=new Uint32Array(this.offsets.length),u=0,h=0,o=0;o<a.length;++o)if(a[o]=u,h<i.length&&i[h]==o){++h,a[o]=u;var g=this.offsets[o],y=this.offsets[o+1]-g;y>0&&(u+=y)}for(var C=new Array(4*a.length),I=0;I<a.length;++I)C[4*I+3]=255&a[I],C[4*I+2]=(65280&a[I])>>8,C[4*I+1]=(16711680&a[I])>>16,C[4*I]=(4278190080&a[I])>>24;return C},t}(),Vte=function(){function e(t){this.font=t,this.subset={},this.unicodes={},this.next=33}return e.prototype.generateCmap=function(){var t,r,i,a,u;for(r in a=this.font.cmap.tables[0].codeMap,t={},u=this.subset)i=u[r],t[r]=a[i];return t},e.prototype.glyphsFor=function(t){var r,i,a,u,h,o,g;for(a={},h=0,o=t.length;h<o;h++)a[u=t[h]]=this.font.glyf.glyphFor(u);for(u in r=[],a)(i=a[u])!=null&&i.compound&&r.push.apply(r,i.glyphIDs);if(r.length>0)for(u in g=this.glyphsFor(r))i=g[u],a[u]=i;return a},e.prototype.encode=function(t,r){var i,a,u,h,o,g,y,C,I,F,b,N,U,H,k;for(a in i=SR.encode(this.generateCmap(),"unicode"),h=this.glyphsFor(t),b={0:0},k=i.charMap)b[(g=k[a]).old]=g.new;for(N in F=i.maxGlyphID,h)N in b||(b[N]=F++);return C=function(R){var V,W;for(V in W={},R)W[R[V]]=V;return W}(b),I=Object.keys(C).sort(function(R,V){return R-V}),U=function(){var R,V,W;for(W=[],R=0,V=I.length;R<V;R++)o=I[R],W.push(C[o]);return W}(),u=this.font.glyf.encode(h,U,b),y=this.font.loca.encode(u.offsets,U),H={cmap:this.font.cmap.raw(),glyf:u.table,loca:y,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(r)},this.font.os2.exists&&(H["OS/2"]=this.font.os2.raw()),this.font.directory.encode(H)},e}();Xr.API.PDFObject=function(){var e;function t(){}return e=function(r,i){return(Array(i+1).join("0")+r).slice(-i)},t.convert=function(r){var i,a,u,h;if(Array.isArray(r))return"["+function(){var o,g,y;for(y=[],o=0,g=r.length;o<g;o++)i=r[o],y.push(t.convert(i));return y}().join(" ")+"]";if(typeof r=="string")return"/"+r;if(r!=null&&r.isString)return"("+r+")";if(r instanceof Date)return"(D:"+e(r.getUTCFullYear(),4)+e(r.getUTCMonth(),2)+e(r.getUTCDate(),2)+e(r.getUTCHours(),2)+e(r.getUTCMinutes(),2)+e(r.getUTCSeconds(),2)+"Z)";if({}.toString.call(r)==="[object Object]"){for(a in u=["<<"],r)h=r[a],u.push("/"+a+" "+t.convert(h));return u.push(">>"),u.join(`
`)}return""+r},t}();function Kte({filteredData:e,filteredGeoJSON:t,selectedMetric:r,exportOptions:i,onExportComplete:a}){const u=re.useRef(null),h=re.useCallback(async()=>{if(!u.current){console.error("Export failed: Render container not found."),a();return}try{const C=await oR(u.current,{scale:2,useCORS:!0,backgroundColor:"#ffffff"});if(i.fileFormat==="png"){const I=document.createElement("a");I.download=`domapus-map-${r}.png`,I.href=C.toDataURL("image/png"),I.click()}else{const I=C.toDataURL("image/png"),F=new Xr({orientation:"landscape",unit:"px",format:[C.width,C.height]});F.addImage(I,"PNG",0,0,C.width,C.height),F.save(`domapus-map-${r}.pdf`)}}catch(C){console.error("Export failed during screenshot process:",C)}finally{a()}},[i,r]),o=C=>({"median-sale-price":"Median Sale Price","median-list-price":"Median List Price","median-dom":"Median Days on Market",inventory:"Inventory","new-listings":"New Listings","homes-sold":"Homes Sold","sale-to-list-ratio":"Sale to List Ratio","homes-sold-above-list":"Homes Sold Above List","off-market-2-weeks":"Off Market in 2 Weeks"})[C]||C,g=()=>i.regionScope==="state"?i.selectedState||"State":i.regionScope==="metro"?i.selectedMetro||"Metro Area":"United States",y=()=>new Date().toLocaleDateString("en-US",{month:"long",year:"numeric"});return X.jsxs("div",{ref:u,className:"fixed top-0 left-0 w-[1200px] h-[900px] bg-white p-8 flex flex-col font-sans",style:{transform:"translateX(-9999px)"},children:[i.includeTitle&&X.jsxs("header",{className:"text-center mb-4",children:[X.jsxs("h1",{className:"text-3xl font-bold text-gray-900",children:[o(r)," by ZIP Code"]}),X.jsxs("p",{className:"text-lg text-gray-600",children:[g(),", ",y()]})]}),X.jsx("main",{className:"flex-grow border border-gray-200 rounded-lg overflow-hidden bg-gray-50",children:t&&e.length>0?X.jsx(yZ,{filteredData:e,geoJSON:t,selectedMetric:r,regionScope:i.regionScope,onRenderComplete:h}):X.jsx("div",{className:"flex items-center justify-center h-full text-gray-500",children:"Preparing map data..."})}),X.jsxs("footer",{className:"pt-4 flex justify-between items-end",children:[i.includeLegend&&X.jsx(vZ,{filteredZipData:e,selectedMetric:r,exportOptions:i}),X.jsxs("div",{className:"text-right",children:[X.jsx(_Z,{size:"sm",className:"mb-1 justify-end"}),X.jsx("p",{className:"text-xs text-gray-500",children:"Analytics by Domapus"}),X.jsx("p",{className:"text-xs text-gray-400",children:"Data sourced from Redfin"})]})]})]})}function Gte({allZipData:e,fullGeoJSON:t,selectedMetric:r}){const[i,a]=re.useState(!1),[u,h]=re.useState(null),[o,g]=re.useState(!1),{filteredData:y,filteredGeoJSON:C}=re.useMemo(()=>{if(!u||Object.keys(e).length===0||!t)return{filteredData:[],filteredGeoJSON:null};const N=Object.values(e).filter(k=>u.regionScope==="state"&&u.selectedState?k.state===u.selectedState:u.regionScope==="metro"&&u.selectedMetro?k.parent_metro===u.selectedMetro:!0),U=new Set(N.map(k=>k.zipCode)),H=t.features.filter(k=>{var R;return U.has((R=k.properties)==null?void 0:R.zipCode)});return{filteredData:N,filteredGeoJSON:{type:"FeatureCollection",features:H}}},[e,t,u]),I=N=>{h(N),g(!0)},F=()=>{g(!1),a(!1),h(null)},b=()=>{a(!1),g(!1),h(null)};return i?X.jsxs("div",{className:"fixed inset-0 bg-gray-100 z-50 flex",children:[X.jsx(fq,{allZipData:e,isExporting:o,onExport:I,onCancel:b}),X.jsx("div",{className:"flex-1 flex items-center justify-center p-8",children:X.jsxs("div",{className:"bg-white p-8 rounded-lg shadow-lg border text-center space-y-4",children:[X.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto"}),X.jsxs("div",{children:[X.jsx("h3",{className:"font-semibold text-lg",children:"Generating Your Export"}),X.jsx("p",{className:"text-sm text-gray-600",children:"Please keep this window open. Your download will begin shortly."})]})]})}),o&&X.jsx(Kte,{filteredData:y,filteredGeoJSON:C,selectedMetric:r,exportOptions:u,onExportComplete:F})]}):X.jsxs(ra,{variant:"outline",size:"sm",onClick:()=>a(!0),children:[X.jsx(kL,{className:"h-4 w-4 mr-2"}),"Export"]})}const $te={"median-sale-price":"Median Sale Price","median-list-price":"Median List Price","median-dom":"Median Days on Market",inventory:"Inventory","new-listings":"New Listings","homes-sold":"Homes Sold","sale-to-list-ratio":"Sale-to-List Price Ratio","homes-sold-above-list":"% Homes Sold Above List","off-market-2-weeks":"% Off-Market in 2 Weeks"};function PT({selectedMetric:e,onMetricChange:t}){return X.jsxs("div",{className:"bg-dashboard-panel border border-dashboard-border rounded-lg p-3 shadow-sm",children:[X.jsx("label",{className:"block text-sm font-medium text-dashboard-text-secondary mb-2",children:"Visualization Metric"}),X.jsxs(N2,{value:e,onValueChange:t,children:[X.jsx(v1,{className:"w-64","aria-label":"Select visualization metric",children:X.jsx(D2,{placeholder:"Select a metric"})}),X.jsx(_1,{className:"z-[9999]",children:Object.entries($te).map(([r,i])=>X.jsx(w1,{value:r,children:i},r))})]})]})}const pC=re.forwardRef(({className:e,type:t,...r},i)=>X.jsx("input",{type:t,className:Qn("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),ref:i,...r}));pC.displayName="Input";const qte=(e,t)=>{const[r,i]=re.useState(e);return re.useEffect(()=>{const a=setTimeout(()=>{i(e)},t);return()=>{clearTimeout(a)}},[e,t]),r};function LT({onSearch:e}){const[t,r]=re.useState(""),i=qte(t,300);re.useEffect(()=>{i.trim()&&i.length>=3&&e(i.trim())},[i,e]);const a=h=>{const o=h.target.value.replace(/\D/g,"");r(o)},u=h=>{h.preventDefault(),t.trim()&&e(t.trim())};return X.jsxs("form",{onSubmit:u,className:"flex items-center space-x-2",children:[X.jsxs("div",{className:"relative flex-1",children:[X.jsx(UL,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-dashboard-text-secondary"}),X.jsx(pC,{type:"text",pattern:"[0-9]*",inputMode:"numeric",placeholder:"Enter ZIP code...",value:t,onChange:a,className:"pl-10 w-48",maxLength:5,"aria-label":"Search for ZIP code"})]}),X.jsx(ra,{type:"submit",variant:"outline",size:"sm","aria-label":"Search",children:"Search"})]})}function Zte({lastUpdated:e}){const t=r=>{if(!r)return"July 1, 2025";try{return new Date(r).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})}catch{return"July 1, 2025"}};return X.jsxs("div",{className:"flex items-center space-x-2 bg-dashboard-panel border border-dashboard-border rounded-lg px-3 py-2 shadow-sm",children:[X.jsx(HO,{className:"h-4 w-4 text-dashboard-text-secondary"}),X.jsxs("span",{className:"text-sm text-dashboard-text-secondary",children:["Updated: ",t(e||"")]})]})}const ub=768;function Wte(){const[e,t]=re.useState(void 0);return re.useEffect(()=>{const r=window.matchMedia(`(max-width: ${ub-1}px)`),i=()=>{t(window.innerWidth<ub)};return r.addEventListener("change",i),t(window.innerWidth<ub),()=>r.removeEventListener("change",i)},[]),!!e}function Xte({selectedMetric:e,onMetricChange:t,onSearch:r,lastUpdated:i,children:a}){const u=Wte();return X.jsxs("div",{className:"flex items-center justify-between p-2 sm:p-4 bg-dashboard-panel border-b border-dashboard-border",children:[X.jsxs("div",{className:"flex items-center space-x-2 sm:space-x-6",children:[X.jsxs("div",{className:"flex items-center space-x-2 sm:space-x-3 cursor-pointer hover:opacity-80 transition-opacity",onClick:()=>window.location.reload(),title:"Click to reload page",children:[X.jsx("img",{src:"/Domapus/apple-touch-icon.png",alt:"Domapus Logo",className:"h-8 w-8 sm:h-10 sm:w-10"}),X.jsxs("div",{className:"flex flex-col font-logo",children:[X.jsx("h1",{className:"text-lg sm:text-xl font-bold text-dashboard-text-primary leading-tight",children:"Domapus"}),X.jsx("p",{className:"text-xs sm:text-sm text-dashboard-text-secondary leading-tight",children:"U.S. Housing Market Dashboard"})]})]}),!u&&X.jsx(PT,{selectedMetric:e,onMetricChange:t})]}),X.jsxs("div",{className:"flex items-center space-x-2 sm:space-x-4",children:[!u&&X.jsx(LT,{onSearch:r}),!u&&X.jsx(Zte,{lastUpdated:i}),!u&&a,X.jsx(ra,{variant:"outline",size:"sm",asChild:!0,className:"hidden sm:flex",children:X.jsxs("a",{href:"https://github.com/Jasperc2024/Domapus",target:"_blank",rel:"noopener noreferrer",children:[X.jsx(ZO,{className:"h-4 w-4 mr-2"}),X.jsx("span",{children:"GitHub"})]})}),X.jsx(ra,{variant:"default",size:"sm",asChild:!0,className:"hidden sm:flex bg-pink-600 hover:bg-pink-700 text-white",children:X.jsxs("a",{href:"https://buymeacoffee.com/JasperC",target:"_blank",rel:"noopener noreferrer",children:[X.jsx(l2,{className:"h-4 w-4 mr-2"}),X.jsx("span",{children:"Sponsor"})]})})]}),u&&X.jsx("div",{className:"fixed bottom-4 left-4 right-4 z-[1001] bg-dashboard-panel border border-dashboard-border rounded-lg p-3 shadow-lg",children:X.jsxs("div",{className:"space-y-3",children:[X.jsx(PT,{selectedMetric:e,onMetricChange:t}),X.jsx(LT,{onSearch:r})]})})]})}function Yte(e){const t=new Pp.Map({container:e,center:[-98.5795,39.8283],zoom:5,minZoom:3,maxZoom:12,maxBounds:[[-180,-85],[180,85]],attributionControl:!1,style:{version:8,sources:{"carto-light":{type:"raster",tiles:["https://a.basemaps.cartocdn.com/light_nolabels/{z}/{x}/{y}{r}.png","https://b.basemaps.cartocdn.com/light_nolabels/{z}/{x}/{y}{r}.png","https://c.basemaps.cartocdn.com/light_nolabels/{z}/{x}/{y}{r}.png","https://d.basemaps.cartocdn.com/light_nolabels/{z}/{x}/{y}{r}.png"],tileSize:256},"carto-light-labels":{type:"raster",tiles:["https://a.basemaps.cartocdn.com/light_only_labels/{z}/{x}/{y}{r}.png","https://b.basemaps.cartocdn.com/light_only_labels/{z}/{x}/{y}{r}.png","https://c.basemaps.cartocdn.com/light_only_labels/{z}/{x}/{y}{r}.png","https://d.basemaps.cartocdn.com/light_only_labels/{z}/{x}/{y}{r}.png"],tileSize:256}},layers:[{id:"background",type:"background",paint:{"background-color":"#f8f9fa"}},{id:"carto-light-layer",type:"raster",source:"carto-light",minzoom:0,maxzoom:18},{id:"carto-light-labels-layer",type:"raster",source:"carto-light-labels",minzoom:0,maxzoom:18}]}});t.addControl(new Pp.NavigationControl({visualizePitch:!1}),"top-right"),t.addControl(new Pp.AttributionControl({customAttribution:"© <a href='https://carto.com/attributions'>CARTO</a>",compact:!0}),"bottom-left"),t.scrollZoom.setWheelZoomRate(.5);const r=.25;let i=t.getZoom();function a(){const u=t.getZoom();!t.isMoving()&&Math.abs(u-i)>1e-6&&(i=Math.round(u/r)*r,t.zoomTo(i,{duration:0}))}return t.on("moveend",a),t.on("wheel",()=>{clearTimeout(a._t),a._t=setTimeout(a,80)}),t}const Jte=Yte;function ere({selectedMetric:e,onZipSelect:t,searchZip:r,zipData:i,colorScaleDomain:a,isLoading:u,progress:h,processData:o}){const g=re.useRef(null),y=re.useRef(null),[C,I]=re.useState(!1),[F,b]=re.useState(null),N=re.useRef(!1);re.useEffect(()=>{if(y.current||!g.current)return;y.current=Jte(g.current);const k=y.current;k.on("load",()=>I(!0)),k.on("error",V=>{console.error("MapLibre error:",V),b("Map failed to initialize")});const R=new ResizeObserver(()=>{k.resize()});return R.observe(g.current),()=>{R.disconnect(),k.remove(),y.current=null}},[]);const U=re.useMemo(()=>a?iC().domain(a).range(["#FFF9B0","#E84C61","#2E0B59"]):null,[a]);re.useEffect(()=>{const k=y.current;if(!k||!C||!U||Object.keys(i).length===0)return;const R=new AbortController;return(async()=>{try{b(null);const W=await fetch("https://cdn.jsdelivr.net/gh/Jasperc2024/Domapus@main/public/data/us-zip-codes.geojson.gz",{signal:R.signal});if(!W.ok)throw new Error("Failed to fetch GeoJSON");const se=await W.arrayBuffer();if(R.signal.aborted)return;const fe=await o({type:"PROCESS_GEOJSON",data:{geojsonArrayBuffer:se,zipData:i,selectedMetric:e}});if(R.signal.aborted||!k.isStyleLoaded())return;const ue=k.getSource("zip-codes");ue?ue.setData(fe):(k.addSource("zip-codes",{type:"geojson",data:fe}),k.addLayer({id:"zip-codes-fill",type:"fill",source:"zip-codes",paint:{"fill-color":["case",["has","metricValue"],["interpolate",["linear"],["get","metricValue"],...tre(U)],"rgba(200, 200, 200, 0.1)"],"fill-opacity":.75}}),k.addLayer({id:"zip-codes-border",type:"line",source:"zip-codes",paint:{"line-color":"#FFFFFF","line-width":.5,"line-opacity":.5}})),N.current||(H(k),N.current=!0)}catch(W){R.signal.aborted||(console.error("Failed to set up map layers:",W),b("Failed to load map layers"))}})(),()=>R.abort()},[C,U,i,e,o]),re.useEffect(()=>{if(!y.current||!r||!i[r])return;const k=i[r];k.longitude&&k.latitude&&y.current.flyTo({center:[k.longitude,k.latitude],zoom:10})},[r,i]);const H=k=>{let R=null;k.on("mousemove","zip-codes-fill",V=>{var W;if((W=V.features)!=null&&W.length){k.getCanvas().style.cursor="pointer";const{zipCode:se}=V.features[0].properties;if(se&&i[se]){R==null||R.remove();const{lng:fe,lat:ue}=V.lngLat,ae=i[se];R=new Pp.Popup({closeButton:!1,offset:[0,-10],className:"map-tooltip"}).setLngLat([fe,ue]).setHTML(Fv(ae,e)).addTo(k)}}}),k.on("mouseleave","zip-codes-fill",()=>{k.getCanvas().style.cursor="",R==null||R.remove(),R=null}),k.on("click","zip-codes-fill",V=>{var W;if((W=V.features)!=null&&W.length){const{zipCode:se}=V.features[0].properties;se&&i[se]&&t(i[se])}})};return X.jsxs("div",{className:"absolute inset-0 w-full h-full",children:[X.jsx("div",{ref:g,className:"w-full h-full",style:{minHeight:"400px"}}),(u||!C||F)&&X.jsx("div",{className:"absolute inset-0 flex flex-col items-center justify-center bg-white/80 z-10",children:F?X.jsx("div",{className:"text-red-600 font-bold text-lg",children:F}):X.jsxs("div",{className:"text-center space-y-4",children:[X.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto"}),X.jsxs("p",{className:"text-sm font-medium",children:[h.phase,"..."]})]})})]})}function tre(e){if(!e)return[];const[t,r]=e.domain(),i=[];for(let a=0;a<=8;a++){const u=t+(r-t)*(a/8);i.push(u,e(u))}return i}function MT(e,t){return t.includes("price")?`$${(e/1e3).toFixed(0)}k`:t.includes("ratio")||t.includes("above-list")?`${(e*100).toFixed(0)}%`:t.includes("dom")?`${Math.round(e)}`:e.toLocaleString()}function rre({selectedMetric:e,colorScaleDomain:t}){const r=re.useMemo(()=>{if(!t||t[0]===null||t[1]===null)return{min:"N/A",max:"N/A"};const[a,u]=t;return{min:MT(a,e),max:MT(u,e)}},[e,t]),i=a=>({"median-sale-price":"Median Sale Price","median-list-price":"Median List Price","median-dom":"Median Days on Market",inventory:"Current Inventory","homes-sold":"Homes Sold","sale-to-list-ratio":"Sale-to-List Ratio"})[a]||"Metric";return X.jsxs("div",{className:"bg-white/80 backdrop-blur-sm border border-gray-200 rounded-lg p-3 shadow-lg w-full max-w-xs",children:[X.jsx("h3",{className:"text-xs font-semibold mb-2 text-gray-800",children:i(e)}),X.jsx("div",{className:"h-3 rounded",style:{background:"linear-gradient(to right, #FFF9B0, #E84C61, #2E0B59)"}}),X.jsxs("div",{className:"flex justify-between text-[10px] text-gray-600 mt-1 font-medium",children:[X.jsx("span",{children:r.min}),X.jsx("span",{children:r.max})]})]})}function nre({onClose:e}){return re.useEffect(()=>{const t=setTimeout(e,2e4);return()=>clearTimeout(t)},[e]),X.jsx("div",{className:"fixed top-4 left-1/2 transform -translate-x-1/2 z-50 max-w-md w-full mx-4",children:X.jsxs("div",{className:"bg-dashboard-panel border border-dashboard-border rounded-lg shadow-lg p-4",children:[X.jsxs("div",{className:"flex items-start justify-between",children:[X.jsxs("div",{className:"flex items-start space-x-3",children:[X.jsx(l2,{className:"h-5 w-5 text-pink-600 mt-0.5 flex-shrink-0"}),X.jsxs("div",{className:"text-sm text-dashboard-text-primary",children:[X.jsx("p",{className:"font-semibold mb-1",children:"This site is proudly ad-free and built to serve the public."}),X.jsx("p",{className:"text-dashboard-text-secondary",children:"If you find it useful, please consider sponsoring or supporting us to keep the data flowing and the site improving."})]})]}),X.jsx(ra,{variant:"ghost",size:"sm",onClick:e,className:"h-6 w-6 p-0 flex-shrink-0",children:X.jsx(o_,{className:"h-4 w-4"})})]}),X.jsxs("div",{className:"mt-3 flex space-x-2",children:[X.jsx(ra,{size:"sm",asChild:!0,className:"bg-pink-600 hover:bg-pink-700 text-white",children:X.jsxs("a",{href:"https://buymeacoffee.com/jasperc",target:"_blank",rel:"noopener noreferrer",children:[X.jsx(l2,{className:"h-4 w-4 mr-2"}),"Sponsor"]})}),X.jsx(ra,{variant:"outline",size:"sm",onClick:e,children:"Maybe later"})]})]})})}const ire=s_("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function kT({className:e,variant:t,...r}){return X.jsx("div",{className:Qn(ire({variant:t}),e),...r})}function sre({currentZip:e,allZipData:t,onClose:r}){const[i,a]=re.useState(""),[u,h]=re.useState(null),[o,g]=re.useState(""),y=()=>{if(!i.trim())return;g("");const b=t[i.trim()];b?h(b):(g("ZIP code not found in our database."),h(null))},C=(b,N)=>{if(b==null)return"N/A";const U=Number(b);if(isNaN(U))return"N/A";switch(N){case"price":return`$${U.toLocaleString()}`;case"days":return`${U} days`;case"percentage":return`${U.toFixed(1)}%`;case"ratio":return`${(U*100).toFixed(1)}%`;default:return U.toLocaleString()}},I=(b,N)=>{const U=Number(b),H=Number(N);if(isNaN(U)||isNaN(H))return"same";const k=U-H;return Math.abs(k)<.01?"same":k>0?"higher":"lower"},F=[{key:"median_sale_price",label:"Median Sale Price",type:"price"},{key:"median_list_price",label:"Median List Price",type:"price"},{key:"median_dom",label:"Median Days on Market",type:"days"},{key:"inventory",label:"Inventory",type:"number"},{key:"new_listings",label:"New Listings",type:"number"},{key:"homes_sold",label:"Homes Sold",type:"number"},{key:"avg_sale_to_list_ratio",label:"Sale-to-List Ratio",type:"ratio"}];return X.jsxs("div",{className:"space-y-4",children:[X.jsxs("div",{className:"flex items-center justify-between",children:[X.jsx("h3",{className:"text-lg font-semibold text-dashboard-text-primary",children:"Compare ZIP Codes"}),X.jsx(ra,{variant:"ghost",size:"sm",onClick:r,"aria-label":"Close comparison",children:X.jsx(o_,{className:"h-4 w-4"})})]}),X.jsxs("div",{className:"flex space-x-2",children:[X.jsx(pC,{type:"text",pattern:"[0-9]*",inputMode:"numeric",maxLength:5,placeholder:"Enter ZIP code...",value:i,onChange:b=>a(b.target.value.replace(/\D/g,"")),onKeyDown:b=>{b.key==="Enter"&&y()},"aria-label":"ZIP code to compare"}),X.jsx(ra,{onClick:y,size:"sm","aria-label":"Search",children:X.jsx(UL,{className:"h-4 w-4"})})]}),o&&X.jsx("div",{className:"text-sm text-red-500 p-2 rounded bg-red-50",children:o}),u&&X.jsxs("div",{className:"space-y-3 pt-2",children:[X.jsxs("div",{className:"grid grid-cols-3 gap-2 mb-4 text-center",children:[X.jsxs("div",{children:[X.jsx(kT,{variant:"secondary",children:e.zipCode}),X.jsx("div",{className:"text-xs text-muted-foreground mt-1",children:e.city})]}),X.jsx("div",{className:"text-xs text-muted-foreground self-center",children:"vs"}),X.jsxs("div",{children:[X.jsx(kT,{variant:"secondary",children:u.zipCode}),X.jsx("div",{className:"text-xs text-muted-foreground mt-1",children:u.city})]})]}),X.jsx("div",{className:"space-y-2",children:F.map(b=>{const N=e[b.key],U=u[b.key],H=I(N,U),k=!b.key.includes("dom");return X.jsx(Zh,{children:X.jsxs(Wh,{className:"p-3",children:[X.jsx("div",{className:"text-center mb-2 text-xs font-medium text-muted-foreground",children:b.label}),X.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[X.jsx("div",{className:`text-center font-bold text-sm ${H==="higher"?k?"text-green-600":"text-red-600":H==="lower"?k?"text-red-600":"text-green-600":""}`,children:C(N,b.type)}),X.jsx("div",{className:`text-center font-bold text-sm ${H==="lower"?k?"text-green-600":"text-red-600":H==="higher"?k?"text-red-600":"text-green-600":""}`,children:C(U,b.type)})]})]})},b.key)})})]})]})}function ore({isOpen:e,isCollapsed:t,zipData:r,allZipData:i,onClose:a,onToggleCollapse:u}){const[h,o]=re.useState(!1);if(!e||!r)return null;const g=(I,F)=>{if(I==null)return"N/A";const b=Number(I);if(isNaN(b))return"N/A";switch(F){case"price":return`$${b.toLocaleString()}`;case"days":return`${b} days`;case"percentage":return`${b.toFixed(1)}%`;case"ratio":return`${(b*100).toFixed(1)}%`;case"coordinate":return b.toFixed(4);default:return b.toLocaleString()}},y=I=>{if(I==null)return{formatted:"N/A",isPositive:!1,isZero:!0};const F=Number(I);if(isNaN(F))return{formatted:"N/A",isPositive:!1,isZero:!0};const b=F>0,N=F===0;return{formatted:`${b?"+":""}${F.toFixed(1)}%`,isPositive:b,isZero:N}},C=[{key:"median_sale_price",label:"Median Sale Price",type:"price",momKey:"median_sale_price_mom_pct",yoyKey:"median_sale_price_yoy_pct"},{key:"median_list_price",label:"Median List Price",type:"price",momKey:"median_list_price_mom_pct",yoyKey:"median_list_price_yoy_pct"},{key:"median_dom",label:"Median Days on Market",type:"days",momKey:"median_dom_mom_pct",yoyKey:"median_dom_yoy_pct"},{key:"inventory",label:"Inventory",type:"number",momKey:"inventory_mom_pct",yoyKey:"inventory_yoy_pct"},{key:"new_listings",label:"New Listings",type:"number",momKey:"new_listings_mom_pct",yoyKey:"new_listings_yoy_pct"},{key:"homes_sold",label:"Homes Sold",type:"number",momKey:"homes_sold_mom_pct",yoyKey:"homes_sold_yoy_pct"},{key:"avg_sale_to_list_ratio",label:"Sale-to-List Ratio",type:"ratio",momKey:"avg_sale_to_list_ratio_mom_pct",yoyKey:"avg_sale_to_list_ratio_yoy_pct"},{key:"sold_above_list",label:"% Sold Above List",type:"percentage",momKey:"sold_above_list_mom_pct",yoyKey:"sold_above_list_yoy_pct"},{key:"off_market_in_two_weeks",label:"% Off Market in 2 Weeks",type:"percentage",momKey:"off_market_in_two_weeks_mom_pct",yoyKey:"off_market_in_two_weeks_yoy_pct"},{key:"median_ppsf",label:"Median Price per Sq Ft",type:"price",momKey:"median_ppsf_mom_pct",yoyKey:"median_ppsf_yoy_pct"},{key:"pending_sales",label:"Pending Sales",type:"number",momKey:"pending_sales_mom_pct",yoyKey:"pending_sales_yoy_pct"}].map(I=>({...I,value:r[I.key]})).filter(I=>I.value!==null&&I.value!==void 0);return X.jsxs("div",{className:`fixed left-0 top-0 h-full bg-dashboard-panel border-r border-dashboard-border shadow-lg z-40 transition-all duration-300 ${t?"w-16":"w-96"}`,children:[X.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-dashboard-border",children:[!t&&X.jsxs("div",{children:[X.jsx("h2",{className:"text-lg font-semibold",children:r.zipCode}),X.jsx("p",{className:"text-sm text-muted-foreground",children:r.city})]}),X.jsxs("div",{className:"flex items-center space-x-2",children:[X.jsx(ra,{variant:"ghost",size:"sm",onClick:u,"aria-label":t?"Expand sidebar":"Collapse sidebar",children:t?X.jsx(KO,{className:"h-4 w-4"}):X.jsx(VO,{className:"h-4 w-4"})}),!t&&X.jsx(ra,{variant:"ghost",size:"sm",onClick:a,"aria-label":"Close sidebar",children:X.jsx(o_,{className:"h-4 w-4"})})]})]}),!t&&X.jsxs("div",{className:"flex flex-col h-[calc(100vh-73px)]",children:[h?X.jsx("div",{className:"p-4 flex-1 overflow-y-auto",children:X.jsx(sre,{currentZip:r,allZipData:i,onClose:()=>o(!1)})}):X.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-3",children:[X.jsxs(Zh,{children:[X.jsx(Ig,{children:X.jsxs(Fg,{className:"text-sm flex items-center",children:[X.jsx(WO,{className:"h-4 w-4 mr-2"}),"Location Information"]})}),X.jsxs(Wh,{className:"space-y-2 text-sm",children:[X.jsxs("div",{className:"flex justify-between",children:[X.jsx("span",{children:"City:"}),X.jsx("span",{className:"font-medium",children:r.city})]}),X.jsxs("div",{className:"flex justify-between",children:[X.jsx("span",{children:"County:"}),X.jsx("span",{className:"font-medium",children:r.county})]}),X.jsxs("div",{className:"flex justify-between",children:[X.jsx("span",{children:"Metro Area:"}),X.jsx("span",{className:"font-medium",children:r.parent_metro})]})]})]}),X.jsxs("h3",{className:"text-sm font-medium pt-2 flex items-center",children:[X.jsx(zO,{className:"h-4 w-4 mr-2"}),"Market Data"]}),X.jsx("div",{className:"space-y-3",children:C.map((I,F)=>{const b=I.momKey?y(r[I.momKey]):null,N=I.yoyKey?y(r[I.yoyKey]):null;return X.jsx(Zh,{children:X.jsx(Wh,{className:"p-4",children:X.jsxs("div",{className:"space-y-2",children:[X.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:I.label}),X.jsx("p",{className:"text-xl font-bold",children:g(I.value,I.type)}),X.jsxs("div",{className:"flex flex-wrap gap-2 text-xs",children:[b&&!b.isZero&&X.jsxs("span",{className:`flex items-center ${b.isPositive?"text-green-600":"text-red-600"}`,children:[b.isPositive?X.jsx(w4,{className:"h-3 w-3 mr-1"}):X.jsx(_4,{className:"h-3 w-3 mr-1"}),b.formatted," vs last month"]}),N&&!N.isZero&&X.jsxs("span",{className:`flex items-center ${N.isPositive?"text-green-600":"text-red-600"}`,children:[N.isPositive?X.jsx(w4,{className:"h-3 w-3 mr-1"}):X.jsx(_4,{className:"h-3 w-3 mr-1"}),N.formatted," vs last year"]})]})]})})},F)})})]}),X.jsxs("div",{className:"p-4 mt-auto space-y-3 border-t border-dashboard-border bg-dashboard-panel",children:[X.jsxs(ra,{variant:"outline",className:"w-full",onClick:()=>o(!h),children:[X.jsx(jO,{className:"h-4 w-4 mr-2"}),h?"Back to Details":"Compare ZIP Codes"]}),X.jsx(Zh,{children:X.jsx(Wh,{className:"p-3",children:X.jsx("p",{className:"text-xs text-muted-foreground",children:"Data sourced from Redfin Data Center."})})})]})]})]})}function are(){const[e,t]=re.useState("median-sale-price"),[r,i]=re.useState(null),[a,u]=re.useState(""),[h,o]=re.useState({}),[g,y]=re.useState(null),[C,I]=re.useState(null),[F,b]=re.useState(""),[N,U]=re.useState(!1),[H,k]=re.useState(!1),[R,V]=re.useState(!1),{processData:W,isLoading:se,progress:fe}=h9();re.useEffect(()=>{(async()=>{const te=await W({type:"LOAD_AND_PROCESS_DATA",data:{url:"https://cdn.jsdelivr.net/gh/Jasperc2024/Domapus@main/public/data/zip-data.json.gz",selectedMetric:"median_sale_price"}});if(te){o(te.zipData),y(te.bounds);const Ze=Object.values(te.zipData)[0];Ze!=null&&Ze.period_end&&b(Ze.period_end)}const Te=await(await fetch("https://cdn.jsdelivr.net/gh/Jasperc2024/Domapus@main/public/data/us-zip-codes.geojson.gz")).arrayBuffer(),we=lG.ungzip(new Uint8Array(Te),{to:"string"}),st=JSON.parse(we);st.features.forEach(Ze=>{Ze.properties.zipCode=Ze.properties.ZCTA5CE20||Ze.properties.GEOID20}),I(st)})();const Ue=setTimeout(()=>V(!0),3e4);return()=>clearTimeout(Ue)},[W]);const ue=Be=>{i(Be),U(!0)},ae=()=>{k(!H)};return X.jsxs("div",{className:"w-full h-screen bg-dashboard-bg overflow-hidden flex flex-col",children:[R&&X.jsx(nre,{onClose:()=>V(!1)}),X.jsx(Xte,{selectedMetric:e,onMetricChange:t,onSearch:u,lastUpdated:F,children:X.jsx(Gte,{allZipData:h,fullGeoJSON:C,selectedMetric:e})}),X.jsxs("div",{className:"flex flex-1 relative",children:[X.jsx(re.Suspense,{fallback:X.jsx("div",{children:"Loading..."}),children:N&&X.jsx(ore,{isOpen:N,isCollapsed:H,zipData:r,allZipData:h,onClose:()=>U(!1),onToggleCollapse:ae})}),X.jsxs("div",{className:`flex-1 relative transition-all duration-300 ${N?H?"ml-16":"ml-96":"ml-0"}`,children:[X.jsx("div",{className:"absolute inset-0",children:X.jsx(ere,{selectedMetric:e,onZipSelect:ue,searchZip:a,zipData:h,colorScaleDomain:g?[g.min,g.max]:null,isLoading:se||!C,progress:fe,processData:W})}),X.jsx("div",{className:"absolute bottom-4 right-4 w-64 z-[1000] pointer-events-auto",children:X.jsx(rre,{selectedMetric:e,colorScaleDomain:g?[g.min,g.max]:null})})]})]})]})}const lre=()=>X.jsx(are,{}),Are=()=>{const e=QM();return re.useEffect(()=>{console.error("404 Error: User attempted to access non-existent route:",e.pathname)},[e.pathname]),X.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-100",children:X.jsxs("div",{className:"text-center",children:[X.jsx("h1",{className:"text-4xl font-bold mb-4",children:"404"}),X.jsx("p",{className:"text-xl text-gray-600 mb-4",children:"Oops! Page not found"}),X.jsx("a",{href:"/",className:"text-blue-500 hover:text-blue-700 underline",children:"Return to Home"})]})})},cre=new wj,ure=()=>X.jsx(bj,{client:cre,children:X.jsxs(X7,{children:[X.jsx(kz,{}),X.jsx(hH,{}),X.jsx(c9,{basename:"/Domapus",children:X.jsxs(a9,{children:[X.jsx(y2,{path:"/",element:X.jsx(lre,{})}),X.jsx(y2,{path:"*",element:X.jsx(Are,{})})]})})]})});class hre extends hr.Component{constructor(r){super(r);nE(this,"handleTryAgain",()=>{this.setState({hasError:!1})});this.state={hasError:!1}}static getDerivedStateFromError(){return{hasError:!0}}componentDidCatch(r,i){console.error("Error Boundary Caught:",r,i)}render(){return this.state.hasError?X.jsxs("div",{className:"flex flex-col items-center justify-center h-screen bg-gray-100 text-center p-4",children:[X.jsx("h2",{className:"text-2xl font-bold text-red-600 mb-4",children:"Oops! Something went wrong."}),X.jsx("p",{className:"text-gray-700 mb-6",children:"We've logged the issue and will look into it. Please try again."}),X.jsx(ra,{onClick:this.handleTryAgain,children:"Try Again"})]}):this.props.children}}rL(document.getElementById("root")).render(X.jsx(hre,{children:X.jsx(ure,{})}));export{ei as _,mD as c,CB as g};
