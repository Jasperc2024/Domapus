(function(){"use strict";function z(t){let i=t.length;for(;--i>=0;)t[i]=0}const nt=3,at=258,re=29,ot=256+1+re,fe=30,st=512,rt=new Array((ot+2)*2);z(rt);const ft=new Array(fe*2);z(ft);const lt=new Array(st);z(lt);const ct=new Array(at-nt+1);z(ct);const dt=new Array(re);z(dt);const ht=new Array(fe);z(ht);var Y=(t,i,e,s)=>{let l=t&65535|0,n=t>>>16&65535|0,d=0;for(;e!==0;){d=e>2e3?2e3:e,e-=d;do l=l+i[s++]|0,n=n+l|0;while(--d);l%=65521,n%=65521}return l|n<<16|0};const ut=()=>{let t,i=[];for(var e=0;e<256;e++){t=e;for(var s=0;s<8;s++)t=t&1?3988292384^t>>>1:t>>>1;i[e]=t}return i},wt=new Uint32Array(ut());var T=(t,i,e,s)=>{const l=wt,n=s+e;t^=-1;for(let d=s;d<n;d++)t=t>>>8^l[(t^i[d])&255];return t^-1},V={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},le={Z_NO_FLUSH:0,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_DEFLATED:8};const _t=(t,i)=>Object.prototype.hasOwnProperty.call(t,i);var bt=function(t){const i=Array.prototype.slice.call(arguments,1);for(;i.length;){const e=i.shift();if(e){if(typeof e!="object")throw new TypeError(e+"must be non-object");for(const s in e)_t(e,s)&&(t[s]=e[s])}}return t},xt=t=>{let i=0;for(let s=0,l=t.length;s<l;s++)i+=t[s].length;const e=new Uint8Array(i);for(let s=0,l=0,n=t.length;s<n;s++){let d=t[s];e.set(d,l),l+=d.length}return e},ce={assign:bt,flattenChunks:xt};let de=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{de=!1}const L=new Uint8Array(256);for(let t=0;t<256;t++)L[t]=t>=252?6:t>=248?5:t>=240?4:t>=224?3:t>=192?2:1;L[254]=L[254]=1;var gt=t=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(t);let i,e,s,l,n,d=t.length,r=0;for(l=0;l<d;l++)e=t.charCodeAt(l),(e&64512)===55296&&l+1<d&&(s=t.charCodeAt(l+1),(s&64512)===56320&&(e=65536+(e-55296<<10)+(s-56320),l++)),r+=e<128?1:e<2048?2:e<65536?3:4;for(i=new Uint8Array(r),n=0,l=0;n<r;l++)e=t.charCodeAt(l),(e&64512)===55296&&l+1<d&&(s=t.charCodeAt(l+1),(s&64512)===56320&&(e=65536+(e-55296<<10)+(s-56320),l++)),e<128?i[n++]=e:e<2048?(i[n++]=192|e>>>6,i[n++]=128|e&63):e<65536?(i[n++]=224|e>>>12,i[n++]=128|e>>>6&63,i[n++]=128|e&63):(i[n++]=240|e>>>18,i[n++]=128|e>>>12&63,i[n++]=128|e>>>6&63,i[n++]=128|e&63);return i};const kt=(t,i)=>{if(i<65534&&t.subarray&&de)return String.fromCharCode.apply(null,t.length===i?t:t.subarray(0,i));let e="";for(let s=0;s<i;s++)e+=String.fromCharCode(t[s]);return e};var pt=(t,i)=>{const e=i||t.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(t.subarray(0,i));let s,l;const n=new Array(e*2);for(l=0,s=0;s<e;){let d=t[s++];if(d<128){n[l++]=d;continue}let r=L[d];if(r>4){n[l++]=65533,s+=r-1;continue}for(d&=r===2?31:r===3?15:7;r>1&&s<e;)d=d<<6|t[s++]&63,r--;if(r>1){n[l++]=65533;continue}d<65536?n[l++]=d:(d-=65536,n[l++]=55296|d>>10&1023,n[l++]=56320|d&1023)}return kt(n,l)},Et=(t,i)=>{i=i||t.length,i>t.length&&(i=t.length);let e=i-1;for(;e>=0&&(t[e]&192)===128;)e--;return e<0||e===0?i:e+L[t[e]]>i?e:i},Q={string2buf:gt,buf2string:pt,utf8border:Et};function vt(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var yt=vt;const B=16209,St=16191;var Rt=function(i,e){let s,l,n,d,r,g,a,o,y,h,f,_,m,p,u,x,k,c,S,O,w,R,v,b;const E=i.state;s=i.next_in,v=i.input,l=s+(i.avail_in-5),n=i.next_out,b=i.output,d=n-(e-i.avail_out),r=n+(i.avail_out-257),g=E.dmax,a=E.wsize,o=E.whave,y=E.wnext,h=E.window,f=E.hold,_=E.bits,m=E.lencode,p=E.distcode,u=(1<<E.lenbits)-1,x=(1<<E.distbits)-1;e:do{_<15&&(f+=v[s++]<<_,_+=8,f+=v[s++]<<_,_+=8),k=m[f&u];t:for(;;){if(c=k>>>24,f>>>=c,_-=c,c=k>>>16&255,c===0)b[n++]=k&65535;else if(c&16){S=k&65535,c&=15,c&&(_<c&&(f+=v[s++]<<_,_+=8),S+=f&(1<<c)-1,f>>>=c,_-=c),_<15&&(f+=v[s++]<<_,_+=8,f+=v[s++]<<_,_+=8),k=p[f&x];i:for(;;){if(c=k>>>24,f>>>=c,_-=c,c=k>>>16&255,c&16){if(O=k&65535,c&=15,_<c&&(f+=v[s++]<<_,_+=8,_<c&&(f+=v[s++]<<_,_+=8)),O+=f&(1<<c)-1,O>g){i.msg="invalid distance too far back",E.mode=B;break e}if(f>>>=c,_-=c,c=n-d,O>c){if(c=O-c,c>o&&E.sane){i.msg="invalid distance too far back",E.mode=B;break e}if(w=0,R=h,y===0){if(w+=a-c,c<S){S-=c;do b[n++]=h[w++];while(--c);w=n-O,R=b}}else if(y<c){if(w+=a+y-c,c-=y,c<S){S-=c;do b[n++]=h[w++];while(--c);if(w=0,y<S){c=y,S-=c;do b[n++]=h[w++];while(--c);w=n-O,R=b}}}else if(w+=y-c,c<S){S-=c;do b[n++]=h[w++];while(--c);w=n-O,R=b}for(;S>2;)b[n++]=R[w++],b[n++]=R[w++],b[n++]=R[w++],S-=3;S&&(b[n++]=R[w++],S>1&&(b[n++]=R[w++]))}else{w=n-O;do b[n++]=b[w++],b[n++]=b[w++],b[n++]=b[w++],S-=3;while(S>2);S&&(b[n++]=b[w++],S>1&&(b[n++]=b[w++]))}}else if(c&64){i.msg="invalid distance code",E.mode=B;break e}else{k=p[(k&65535)+(f&(1<<c)-1)];continue i}break}}else if(c&64)if(c&32){E.mode=St;break e}else{i.msg="invalid literal/length code",E.mode=B;break e}else{k=m[(k&65535)+(f&(1<<c)-1)];continue t}break}}while(s<l&&n<r);S=_>>3,s-=S,_-=S<<3,f&=(1<<_)-1,i.next_in=s,i.next_out=n,i.avail_in=s<l?5+(l-s):5-(s-l),i.avail_out=n<r?257+(r-n):257-(n-r),E.hold=f,E.bits=_};const U=15,he=852,ue=592,we=0,q=1,_e=2,At=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),mt=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),Ot=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),Dt=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]);var $=(t,i,e,s,l,n,d,r)=>{const g=r.bits;let a=0,o=0,y=0,h=0,f=0,_=0,m=0,p=0,u=0,x=0,k,c,S,O,w,R=null,v;const b=new Uint16Array(U+1),E=new Uint16Array(U+1);let M=null,it,J,X;for(a=0;a<=U;a++)b[a]=0;for(o=0;o<s;o++)b[i[e+o]]++;for(f=g,h=U;h>=1&&b[h]===0;h--);if(f>h&&(f=h),h===0)return l[n++]=1<<24|64<<16|0,l[n++]=1<<24|64<<16|0,r.bits=1,0;for(y=1;y<h&&b[y]===0;y++);for(f<y&&(f=y),p=1,a=1;a<=U;a++)if(p<<=1,p-=b[a],p<0)return-1;if(p>0&&(t===we||h!==1))return-1;for(E[1]=0,a=1;a<U;a++)E[a+1]=E[a]+b[a];for(o=0;o<s;o++)i[e+o]!==0&&(d[E[i[e+o]]++]=o);if(t===we?(R=M=d,v=20):t===q?(R=At,M=mt,v=257):(R=Ot,M=Dt,v=0),x=0,o=0,a=y,w=n,_=f,m=0,S=-1,u=1<<f,O=u-1,t===q&&u>he||t===_e&&u>ue)return 1;for(;;){it=a-m,d[o]+1<v?(J=0,X=d[o]):d[o]>=v?(J=M[d[o]-v],X=R[d[o]-v]):(J=96,X=0),k=1<<a-m,c=1<<_,y=c;do c-=k,l[w+(x>>m)+c]=it<<24|J<<16|X|0;while(c!==0);for(k=1<<a-1;x&k;)k>>=1;if(k!==0?(x&=k-1,x+=k):x=0,o++,--b[a]===0){if(a===h)break;a=i[e+d[o]]}if(a>f&&(x&O)!==S){for(m===0&&(m=f),w+=y,_=a-m,p=1<<_;_+m<h&&(p-=b[_+m],!(p<=0));)_++,p<<=1;if(u+=1<<_,t===q&&u>he||t===_e&&u>ue)return 1;S=x&O,l[S]=f<<24|_<<16|w-n|0}}return x!==0&&(l[w+x]=a-m<<24|64<<16|0),r.bits=f,0};const Tt=0,be=1,xe=2,{Z_FINISH:ge,Z_BLOCK:Ct,Z_TREES:H,Z_OK:N,Z_STREAM_END:It,Z_NEED_DICT:Nt,Z_STREAM_ERROR:D,Z_DATA_ERROR:ke,Z_MEM_ERROR:pe,Z_BUF_ERROR:Zt,Z_DEFLATED:Ee}=le,G=16180,ve=16181,ye=16182,Se=16183,Re=16184,Ae=16185,me=16186,Oe=16187,De=16188,Te=16189,F=16190,C=16191,ee=16192,Ce=16193,te=16194,Ie=16195,Ne=16196,Ze=16197,Me=16198,j=16199,W=16200,ze=16201,Ue=16202,Le=16203,$e=16204,Pe=16205,ie=16206,Be=16207,He=16208,A=16209,Ge=16210,Fe=16211,Mt=852,zt=592,Ut=15,je=t=>(t>>>24&255)+(t>>>8&65280)+((t&65280)<<8)+((t&255)<<24);function Lt(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const Z=t=>{if(!t)return 1;const i=t.state;return!i||i.strm!==t||i.mode<G||i.mode>Fe?1:0},We=t=>{if(Z(t))return D;const i=t.state;return t.total_in=t.total_out=i.total=0,t.msg="",i.wrap&&(t.adler=i.wrap&1),i.mode=G,i.last=0,i.havedict=0,i.flags=-1,i.dmax=32768,i.head=null,i.hold=0,i.bits=0,i.lencode=i.lendyn=new Int32Array(Mt),i.distcode=i.distdyn=new Int32Array(zt),i.sane=1,i.back=-1,N},Ke=t=>{if(Z(t))return D;const i=t.state;return i.wsize=0,i.whave=0,i.wnext=0,We(t)},Je=(t,i)=>{let e;if(Z(t))return D;const s=t.state;return i<0?(e=0,i=-i):(e=(i>>4)+5,i<48&&(i&=15)),i&&(i<8||i>15)?D:(s.window!==null&&s.wbits!==i&&(s.window=null),s.wrap=e,s.wbits=i,Ke(t))},Xe=(t,i)=>{if(!t)return D;const e=new Lt;t.state=e,e.strm=t,e.window=null,e.mode=G;const s=Je(t,i);return s!==N&&(t.state=null),s},$t=t=>Xe(t,Ut);let Ye=!0,ne,ae;const Pt=t=>{if(Ye){ne=new Int32Array(512),ae=new Int32Array(32);let i=0;for(;i<144;)t.lens[i++]=8;for(;i<256;)t.lens[i++]=9;for(;i<280;)t.lens[i++]=7;for(;i<288;)t.lens[i++]=8;for($(be,t.lens,0,288,ne,0,t.work,{bits:9}),i=0;i<32;)t.lens[i++]=5;$(xe,t.lens,0,32,ae,0,t.work,{bits:5}),Ye=!1}t.lencode=ne,t.lenbits=9,t.distcode=ae,t.distbits=5},Ve=(t,i,e,s)=>{let l;const n=t.state;return n.window===null&&(n.wsize=1<<n.wbits,n.wnext=0,n.whave=0,n.window=new Uint8Array(n.wsize)),s>=n.wsize?(n.window.set(i.subarray(e-n.wsize,e),0),n.wnext=0,n.whave=n.wsize):(l=n.wsize-n.wnext,l>s&&(l=s),n.window.set(i.subarray(e-s,e-s+l),n.wnext),s-=l,s?(n.window.set(i.subarray(e-s,e),0),n.wnext=s,n.whave=n.wsize):(n.wnext+=l,n.wnext===n.wsize&&(n.wnext=0),n.whave<n.wsize&&(n.whave+=l))),0},Bt=(t,i)=>{let e,s,l,n,d,r,g,a,o,y,h,f,_,m,p=0,u,x,k,c,S,O,w,R;const v=new Uint8Array(4);let b,E;const M=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(Z(t)||!t.output||!t.input&&t.avail_in!==0)return D;e=t.state,e.mode===C&&(e.mode=ee),d=t.next_out,l=t.output,g=t.avail_out,n=t.next_in,s=t.input,r=t.avail_in,a=e.hold,o=e.bits,y=r,h=g,R=N;e:for(;;)switch(e.mode){case G:if(e.wrap===0){e.mode=ee;break}for(;o<16;){if(r===0)break e;r--,a+=s[n++]<<o,o+=8}if(e.wrap&2&&a===35615){e.wbits===0&&(e.wbits=15),e.check=0,v[0]=a&255,v[1]=a>>>8&255,e.check=T(e.check,v,2,0),a=0,o=0,e.mode=ve;break}if(e.head&&(e.head.done=!1),!(e.wrap&1)||(((a&255)<<8)+(a>>8))%31){t.msg="incorrect header check",e.mode=A;break}if((a&15)!==Ee){t.msg="unknown compression method",e.mode=A;break}if(a>>>=4,o-=4,w=(a&15)+8,e.wbits===0&&(e.wbits=w),w>15||w>e.wbits){t.msg="invalid window size",e.mode=A;break}e.dmax=1<<e.wbits,e.flags=0,t.adler=e.check=1,e.mode=a&512?Te:C,a=0,o=0;break;case ve:for(;o<16;){if(r===0)break e;r--,a+=s[n++]<<o,o+=8}if(e.flags=a,(e.flags&255)!==Ee){t.msg="unknown compression method",e.mode=A;break}if(e.flags&57344){t.msg="unknown header flags set",e.mode=A;break}e.head&&(e.head.text=a>>8&1),e.flags&512&&e.wrap&4&&(v[0]=a&255,v[1]=a>>>8&255,e.check=T(e.check,v,2,0)),a=0,o=0,e.mode=ye;case ye:for(;o<32;){if(r===0)break e;r--,a+=s[n++]<<o,o+=8}e.head&&(e.head.time=a),e.flags&512&&e.wrap&4&&(v[0]=a&255,v[1]=a>>>8&255,v[2]=a>>>16&255,v[3]=a>>>24&255,e.check=T(e.check,v,4,0)),a=0,o=0,e.mode=Se;case Se:for(;o<16;){if(r===0)break e;r--,a+=s[n++]<<o,o+=8}e.head&&(e.head.xflags=a&255,e.head.os=a>>8),e.flags&512&&e.wrap&4&&(v[0]=a&255,v[1]=a>>>8&255,e.check=T(e.check,v,2,0)),a=0,o=0,e.mode=Re;case Re:if(e.flags&1024){for(;o<16;){if(r===0)break e;r--,a+=s[n++]<<o,o+=8}e.length=a,e.head&&(e.head.extra_len=a),e.flags&512&&e.wrap&4&&(v[0]=a&255,v[1]=a>>>8&255,e.check=T(e.check,v,2,0)),a=0,o=0}else e.head&&(e.head.extra=null);e.mode=Ae;case Ae:if(e.flags&1024&&(f=e.length,f>r&&(f=r),f&&(e.head&&(w=e.head.extra_len-e.length,e.head.extra||(e.head.extra=new Uint8Array(e.head.extra_len)),e.head.extra.set(s.subarray(n,n+f),w)),e.flags&512&&e.wrap&4&&(e.check=T(e.check,s,f,n)),r-=f,n+=f,e.length-=f),e.length))break e;e.length=0,e.mode=me;case me:if(e.flags&2048){if(r===0)break e;f=0;do w=s[n+f++],e.head&&w&&e.length<65536&&(e.head.name+=String.fromCharCode(w));while(w&&f<r);if(e.flags&512&&e.wrap&4&&(e.check=T(e.check,s,f,n)),r-=f,n+=f,w)break e}else e.head&&(e.head.name=null);e.length=0,e.mode=Oe;case Oe:if(e.flags&4096){if(r===0)break e;f=0;do w=s[n+f++],e.head&&w&&e.length<65536&&(e.head.comment+=String.fromCharCode(w));while(w&&f<r);if(e.flags&512&&e.wrap&4&&(e.check=T(e.check,s,f,n)),r-=f,n+=f,w)break e}else e.head&&(e.head.comment=null);e.mode=De;case De:if(e.flags&512){for(;o<16;){if(r===0)break e;r--,a+=s[n++]<<o,o+=8}if(e.wrap&4&&a!==(e.check&65535)){t.msg="header crc mismatch",e.mode=A;break}a=0,o=0}e.head&&(e.head.hcrc=e.flags>>9&1,e.head.done=!0),t.adler=e.check=0,e.mode=C;break;case Te:for(;o<32;){if(r===0)break e;r--,a+=s[n++]<<o,o+=8}t.adler=e.check=je(a),a=0,o=0,e.mode=F;case F:if(e.havedict===0)return t.next_out=d,t.avail_out=g,t.next_in=n,t.avail_in=r,e.hold=a,e.bits=o,Nt;t.adler=e.check=1,e.mode=C;case C:if(i===Ct||i===H)break e;case ee:if(e.last){a>>>=o&7,o-=o&7,e.mode=ie;break}for(;o<3;){if(r===0)break e;r--,a+=s[n++]<<o,o+=8}switch(e.last=a&1,a>>>=1,o-=1,a&3){case 0:e.mode=Ce;break;case 1:if(Pt(e),e.mode=j,i===H){a>>>=2,o-=2;break e}break;case 2:e.mode=Ne;break;case 3:t.msg="invalid block type",e.mode=A}a>>>=2,o-=2;break;case Ce:for(a>>>=o&7,o-=o&7;o<32;){if(r===0)break e;r--,a+=s[n++]<<o,o+=8}if((a&65535)!==(a>>>16^65535)){t.msg="invalid stored block lengths",e.mode=A;break}if(e.length=a&65535,a=0,o=0,e.mode=te,i===H)break e;case te:e.mode=Ie;case Ie:if(f=e.length,f){if(f>r&&(f=r),f>g&&(f=g),f===0)break e;l.set(s.subarray(n,n+f),d),r-=f,n+=f,g-=f,d+=f,e.length-=f;break}e.mode=C;break;case Ne:for(;o<14;){if(r===0)break e;r--,a+=s[n++]<<o,o+=8}if(e.nlen=(a&31)+257,a>>>=5,o-=5,e.ndist=(a&31)+1,a>>>=5,o-=5,e.ncode=(a&15)+4,a>>>=4,o-=4,e.nlen>286||e.ndist>30){t.msg="too many length or distance symbols",e.mode=A;break}e.have=0,e.mode=Ze;case Ze:for(;e.have<e.ncode;){for(;o<3;){if(r===0)break e;r--,a+=s[n++]<<o,o+=8}e.lens[M[e.have++]]=a&7,a>>>=3,o-=3}for(;e.have<19;)e.lens[M[e.have++]]=0;if(e.lencode=e.lendyn,e.lenbits=7,b={bits:e.lenbits},R=$(Tt,e.lens,0,19,e.lencode,0,e.work,b),e.lenbits=b.bits,R){t.msg="invalid code lengths set",e.mode=A;break}e.have=0,e.mode=Me;case Me:for(;e.have<e.nlen+e.ndist;){for(;p=e.lencode[a&(1<<e.lenbits)-1],u=p>>>24,x=p>>>16&255,k=p&65535,!(u<=o);){if(r===0)break e;r--,a+=s[n++]<<o,o+=8}if(k<16)a>>>=u,o-=u,e.lens[e.have++]=k;else{if(k===16){for(E=u+2;o<E;){if(r===0)break e;r--,a+=s[n++]<<o,o+=8}if(a>>>=u,o-=u,e.have===0){t.msg="invalid bit length repeat",e.mode=A;break}w=e.lens[e.have-1],f=3+(a&3),a>>>=2,o-=2}else if(k===17){for(E=u+3;o<E;){if(r===0)break e;r--,a+=s[n++]<<o,o+=8}a>>>=u,o-=u,w=0,f=3+(a&7),a>>>=3,o-=3}else{for(E=u+7;o<E;){if(r===0)break e;r--,a+=s[n++]<<o,o+=8}a>>>=u,o-=u,w=0,f=11+(a&127),a>>>=7,o-=7}if(e.have+f>e.nlen+e.ndist){t.msg="invalid bit length repeat",e.mode=A;break}for(;f--;)e.lens[e.have++]=w}}if(e.mode===A)break;if(e.lens[256]===0){t.msg="invalid code -- missing end-of-block",e.mode=A;break}if(e.lenbits=9,b={bits:e.lenbits},R=$(be,e.lens,0,e.nlen,e.lencode,0,e.work,b),e.lenbits=b.bits,R){t.msg="invalid literal/lengths set",e.mode=A;break}if(e.distbits=6,e.distcode=e.distdyn,b={bits:e.distbits},R=$(xe,e.lens,e.nlen,e.ndist,e.distcode,0,e.work,b),e.distbits=b.bits,R){t.msg="invalid distances set",e.mode=A;break}if(e.mode=j,i===H)break e;case j:e.mode=W;case W:if(r>=6&&g>=258){t.next_out=d,t.avail_out=g,t.next_in=n,t.avail_in=r,e.hold=a,e.bits=o,Rt(t,h),d=t.next_out,l=t.output,g=t.avail_out,n=t.next_in,s=t.input,r=t.avail_in,a=e.hold,o=e.bits,e.mode===C&&(e.back=-1);break}for(e.back=0;p=e.lencode[a&(1<<e.lenbits)-1],u=p>>>24,x=p>>>16&255,k=p&65535,!(u<=o);){if(r===0)break e;r--,a+=s[n++]<<o,o+=8}if(x&&!(x&240)){for(c=u,S=x,O=k;p=e.lencode[O+((a&(1<<c+S)-1)>>c)],u=p>>>24,x=p>>>16&255,k=p&65535,!(c+u<=o);){if(r===0)break e;r--,a+=s[n++]<<o,o+=8}a>>>=c,o-=c,e.back+=c}if(a>>>=u,o-=u,e.back+=u,e.length=k,x===0){e.mode=Pe;break}if(x&32){e.back=-1,e.mode=C;break}if(x&64){t.msg="invalid literal/length code",e.mode=A;break}e.extra=x&15,e.mode=ze;case ze:if(e.extra){for(E=e.extra;o<E;){if(r===0)break e;r--,a+=s[n++]<<o,o+=8}e.length+=a&(1<<e.extra)-1,a>>>=e.extra,o-=e.extra,e.back+=e.extra}e.was=e.length,e.mode=Ue;case Ue:for(;p=e.distcode[a&(1<<e.distbits)-1],u=p>>>24,x=p>>>16&255,k=p&65535,!(u<=o);){if(r===0)break e;r--,a+=s[n++]<<o,o+=8}if(!(x&240)){for(c=u,S=x,O=k;p=e.distcode[O+((a&(1<<c+S)-1)>>c)],u=p>>>24,x=p>>>16&255,k=p&65535,!(c+u<=o);){if(r===0)break e;r--,a+=s[n++]<<o,o+=8}a>>>=c,o-=c,e.back+=c}if(a>>>=u,o-=u,e.back+=u,x&64){t.msg="invalid distance code",e.mode=A;break}e.offset=k,e.extra=x&15,e.mode=Le;case Le:if(e.extra){for(E=e.extra;o<E;){if(r===0)break e;r--,a+=s[n++]<<o,o+=8}e.offset+=a&(1<<e.extra)-1,a>>>=e.extra,o-=e.extra,e.back+=e.extra}if(e.offset>e.dmax){t.msg="invalid distance too far back",e.mode=A;break}e.mode=$e;case $e:if(g===0)break e;if(f=h-g,e.offset>f){if(f=e.offset-f,f>e.whave&&e.sane){t.msg="invalid distance too far back",e.mode=A;break}f>e.wnext?(f-=e.wnext,_=e.wsize-f):_=e.wnext-f,f>e.length&&(f=e.length),m=e.window}else m=l,_=d-e.offset,f=e.length;f>g&&(f=g),g-=f,e.length-=f;do l[d++]=m[_++];while(--f);e.length===0&&(e.mode=W);break;case Pe:if(g===0)break e;l[d++]=e.length,g--,e.mode=W;break;case ie:if(e.wrap){for(;o<32;){if(r===0)break e;r--,a|=s[n++]<<o,o+=8}if(h-=g,t.total_out+=h,e.total+=h,e.wrap&4&&h&&(t.adler=e.check=e.flags?T(e.check,l,h,d-h):Y(e.check,l,h,d-h)),h=g,e.wrap&4&&(e.flags?a:je(a))!==e.check){t.msg="incorrect data check",e.mode=A;break}a=0,o=0}e.mode=Be;case Be:if(e.wrap&&e.flags){for(;o<32;){if(r===0)break e;r--,a+=s[n++]<<o,o+=8}if(e.wrap&4&&a!==(e.total&4294967295)){t.msg="incorrect length check",e.mode=A;break}a=0,o=0}e.mode=He;case He:R=It;break e;case A:R=ke;break e;case Ge:return pe;case Fe:default:return D}return t.next_out=d,t.avail_out=g,t.next_in=n,t.avail_in=r,e.hold=a,e.bits=o,(e.wsize||h!==t.avail_out&&e.mode<A&&(e.mode<ie||i!==ge))&&Ve(t,t.output,t.next_out,h-t.avail_out),y-=t.avail_in,h-=t.avail_out,t.total_in+=y,t.total_out+=h,e.total+=h,e.wrap&4&&h&&(t.adler=e.check=e.flags?T(e.check,l,h,t.next_out-h):Y(e.check,l,h,t.next_out-h)),t.data_type=e.bits+(e.last?64:0)+(e.mode===C?128:0)+(e.mode===j||e.mode===te?256:0),(y===0&&h===0||i===ge)&&R===N&&(R=Zt),R},Ht=t=>{if(Z(t))return D;let i=t.state;return i.window&&(i.window=null),t.state=null,N},Gt=(t,i)=>{if(Z(t))return D;const e=t.state;return e.wrap&2?(e.head=i,i.done=!1,N):D},Ft=(t,i)=>{const e=i.length;let s,l,n;return Z(t)||(s=t.state,s.wrap!==0&&s.mode!==F)?D:s.mode===F&&(l=1,l=Y(l,i,e,0),l!==s.check)?ke:(n=Ve(t,i,e,e),n?(s.mode=Ge,pe):(s.havedict=1,N))};var jt=Ke,Wt=Je,Kt=We,Jt=$t,Xt=Xe,Yt=Bt,Vt=Ht,Qt=Gt,qt=Ft,ei="pako inflate (from Nodeca project)",I={inflateReset:jt,inflateReset2:Wt,inflateResetKeep:Kt,inflateInit:Jt,inflateInit2:Xt,inflate:Yt,inflateEnd:Vt,inflateGetHeader:Qt,inflateSetDictionary:qt,inflateInfo:ei};function ti(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var ii=ti;const Qe=Object.prototype.toString,{Z_NO_FLUSH:ni,Z_FINISH:ai,Z_OK:P,Z_STREAM_END:oe,Z_NEED_DICT:se,Z_STREAM_ERROR:oi,Z_DATA_ERROR:qe,Z_MEM_ERROR:si}=le;function K(t){this.options=ce.assign({chunkSize:1024*64,windowBits:15,to:""},t||{});const i=this.options;i.raw&&i.windowBits>=0&&i.windowBits<16&&(i.windowBits=-i.windowBits,i.windowBits===0&&(i.windowBits=-15)),i.windowBits>=0&&i.windowBits<16&&!(t&&t.windowBits)&&(i.windowBits+=32),i.windowBits>15&&i.windowBits<48&&(i.windowBits&15||(i.windowBits|=15)),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new yt,this.strm.avail_out=0;let e=I.inflateInit2(this.strm,i.windowBits);if(e!==P)throw new Error(V[e]);if(this.header=new ii,I.inflateGetHeader(this.strm,this.header),i.dictionary&&(typeof i.dictionary=="string"?i.dictionary=Q.string2buf(i.dictionary):Qe.call(i.dictionary)==="[object ArrayBuffer]"&&(i.dictionary=new Uint8Array(i.dictionary)),i.raw&&(e=I.inflateSetDictionary(this.strm,i.dictionary),e!==P)))throw new Error(V[e])}K.prototype.push=function(t,i){const e=this.strm,s=this.options.chunkSize,l=this.options.dictionary;let n,d,r;if(this.ended)return!1;for(i===~~i?d=i:d=i===!0?ai:ni,Qe.call(t)==="[object ArrayBuffer]"?e.input=new Uint8Array(t):e.input=t,e.next_in=0,e.avail_in=e.input.length;;){for(e.avail_out===0&&(e.output=new Uint8Array(s),e.next_out=0,e.avail_out=s),n=I.inflate(e,d),n===se&&l&&(n=I.inflateSetDictionary(e,l),n===P?n=I.inflate(e,d):n===qe&&(n=se));e.avail_in>0&&n===oe&&e.state.wrap>0&&t[e.next_in]!==0;)I.inflateReset(e),n=I.inflate(e,d);switch(n){case oi:case qe:case se:case si:return this.onEnd(n),this.ended=!0,!1}if(r=e.avail_out,e.next_out&&(e.avail_out===0||n===oe))if(this.options.to==="string"){let g=Q.utf8border(e.output,e.next_out),a=e.next_out-g,o=Q.buf2string(e.output,g);e.next_out=a,e.avail_out=s-a,a&&e.output.set(e.output.subarray(g,g+a),0),this.onData(o)}else this.onData(e.output.length===e.next_out?e.output:e.output.subarray(0,e.next_out));if(!(n===P&&r===0)){if(n===oe)return n=I.inflateEnd(this.strm),this.onEnd(n),this.ended=!0,!0;if(e.avail_in===0)break}}return!0},K.prototype.onData=function(t){this.chunks.push(t)},K.prototype.onEnd=function(t){t===P&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=ce.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg};function ri(t,i){const e=new K(i);if(e.push(t),e.err)throw e.msg||V[e.err];return e.result}var fi=ri,li={inflate:fi};const{inflate:ci}=li;var et=ci;function tt(t,i){if(!t)return 0;const e=t[i];return typeof e=="number"&&isFinite(e)?e:0}self.onmessage=async t=>{var l;const{id:i,type:e,data:s}=t.data;try{switch(e){case"LOAD_AND_PROCESS_DATA":{const{url:n,selectedMetric:d}=s;self.postMessage({type:"PROGRESS",data:{phase:"Fetching market data..."}}),console.log(`🔍 [Worker] Fetching data from: ${n}`);const r=await fetch(n);if(!r.ok)throw new Error(`Fetch failed with status: ${r.status}`);console.log("📦 [Worker] Response headers:",{contentType:r.headers.get("content-type"),contentEncoding:r.headers.get("content-encoding"),contentLength:r.headers.get("content-length")});let g;if((r.headers.get("content-encoding")||"").includes("gzip")){console.log("🗜️ [Worker] Content-Encoding is gzip, checking...");try{g=await r.json(),console.log("📄 [Worker] Parsed as already-decoded JSON")}catch{console.log("🗜️ [Worker] Plain JSON parse failed, trying manual inflate...");const x=await r.arrayBuffer(),k=et(new Uint8Array(x),{to:"string"});g=JSON.parse(k),console.log("🗜️ [Worker] Successfully inflated gzip data")}}else{console.log("📄 [Worker] No gzip encoding header, trying manual inflate first...");try{const u=await r.arrayBuffer(),x=et(new Uint8Array(u),{to:"string"});g=JSON.parse(x),console.log("🗜️ [Worker] Successfully inflated gzip data without header")}catch{console.log("📄 [Worker] Inflate failed, trying plain JSON parse..."),g=await r.json(),console.log("📄 [Worker] Parsed plain JSON successfully")}}const{last_updated_utc:o,zip_codes:y}=g;if(!y)throw new Error("Data file is missing 'zip_codes' key.");self.postMessage({type:"PROGRESS",data:{phase:"Processing ZIP code data..."}});const h={};let f=0;const _=Object.keys(y).length;for(const[u,x]of Object.entries(y))x.zipCode=u,h[u]=x,f++,f%1e3===0&&self.postMessage({type:"PROGRESS",data:{phase:"Processing ZIP code data...",processed:f,total:_}});self.postMessage({type:"PROGRESS",data:{phase:"Calculating metric bounds..."}});const m=[];for(const u of Object.values(h)){const x=tt(u,d);x>0&&m.push(x)}m.sort((u,x)=>u-x);const p={min:m[0]||0,max:m[m.length-1]||0};self.postMessage({type:"DATA_PROCESSED",id:i,data:{zip_codes:h,last_updated_utc:o,bounds:p}});break}case"PROCESS_GEOJSON":{const{geojson:n,zipData:d,selectedMetric:r}=s;if(!n||!Array.isArray(n.features))throw new Error("Invalid GeoJSON data provided to worker.");self.postMessage({type:"PROGRESS",data:{phase:"Processing map shapes..."}});const g=[];let a=0;const o=n.features.length;for(const y of n.features){if(!y.geometry)continue;const h=(l=y.properties)==null?void 0:l.ZCTA5CE20;if(!h||!d[h])continue;const f=tt(d[h],r);y.properties.zipCode=h,y.properties.metricValue=f,g.push(y),a++,a%5e3===0&&self.postMessage({type:"PROGRESS",data:{phase:"Processing map shapes...",processed:a,total:o}})}self.postMessage({type:"GEOJSON_PROCESSED",id:i,data:{type:"FeatureCollection",features:g}});break}default:throw new Error(`Unknown message type: ${e}`)}}catch(n){console.error("❌ [Worker] Error:",n),self.postMessage({type:"ERROR",id:i,error:n instanceof Error?n.message:"Unknown worker error"})}}})();
