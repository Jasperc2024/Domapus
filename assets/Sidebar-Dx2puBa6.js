import{c as _,j as e,a as k,b as Ce,r as c,u as Se,d as De,e as A,f as F,P as S,g as C,h as K,i as Re,k as Pe,R as Ee,l as Me,m as Ie,F as Te,D as Ae,n as $e,X as L,B as j,C as P,o as Oe,p as Fe,q as E,S as U,s as q,t as Y,v as X,w as $,I as Ke,x as Le}from"./index-mrRXY002.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ve=_("ChartColumn",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const We=_("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ze=_("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J=_("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ge=_("Map",[["path",{d:"M14.106 5.553a2 2 0 0 0 1.788 0l3.659-1.83A1 1 0 0 1 21 4.619v12.764a1 1 0 0 1-.553.894l-4.553 2.277a2 2 0 0 1-1.788 0l-4.212-2.106a2 2 0 0 0-1.788 0l-3.659 1.83A1 1 0 0 1 3 19.381V6.618a1 1 0 0 1 .553-.894l4.553-2.277a2 2 0 0 1 1.788 0z",key:"169xi5"}],["path",{d:"M15 5.764v15",key:"1pn4in"}],["path",{d:"M9 3.236v15",key:"1uimfh"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q=_("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z=_("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]),He=Ce("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function O({className:a,variant:o,...t}){return e.jsx("div",{className:k(He({variant:o}),a),...t})}var I="Dialog",[ee,ut]=De(I),[Be,v]=ee(I),te=a=>{const{__scopeDialog:o,children:t,open:i,defaultOpen:l,onOpenChange:n,modal:m=!0}=a,x=c.useRef(null),y=c.useRef(null),[r,s]=Se({prop:i,defaultProp:l??!1,onChange:n,caller:I});return e.jsx(Be,{scope:o,triggerRef:x,contentRef:y,contentId:A(),titleId:A(),descriptionId:A(),open:r,onOpenChange:s,onOpenToggle:c.useCallback(()=>s(h=>!h),[s]),modal:m,children:t})};te.displayName=I;var ae="DialogTrigger",se=c.forwardRef((a,o)=>{const{__scopeDialog:t,...i}=a,l=v(ae,t),n=F(o,l.triggerRef);return e.jsx(S.button,{type:"button","aria-haspopup":"dialog","aria-expanded":l.open,"aria-controls":l.contentId,"data-state":Z(l.open),...i,ref:n,onClick:C(a.onClick,l.onOpenToggle)})});se.displayName=ae;var V="DialogPortal",[Ue,oe]=ee(V,{forceMount:void 0}),ne=a=>{const{__scopeDialog:o,forceMount:t,children:i,container:l}=a,n=v(V,o);return e.jsx(Ue,{scope:o,forceMount:t,children:c.Children.map(i,m=>e.jsx(K,{present:t||n.open,children:e.jsx(Re,{asChild:!0,container:l,children:m})}))})};ne.displayName=V;var M="DialogOverlay",re=c.forwardRef((a,o)=>{const t=oe(M,a.__scopeDialog),{forceMount:i=t.forceMount,...l}=a,n=v(M,a.__scopeDialog);return n.modal?e.jsx(K,{present:i||n.open,children:e.jsx(Ye,{...l,ref:o})}):null});re.displayName=M;var qe=Me("DialogOverlay.RemoveScroll"),Ye=c.forwardRef((a,o)=>{const{__scopeDialog:t,...i}=a,l=v(M,t);return e.jsx(Ee,{as:qe,allowPinchZoom:!0,shards:[l.contentRef],children:e.jsx(S.div,{"data-state":Z(l.open),...i,ref:o,style:{pointerEvents:"auto",...i.style}})})}),N="DialogContent",le=c.forwardRef((a,o)=>{const t=oe(N,a.__scopeDialog),{forceMount:i=t.forceMount,...l}=a,n=v(N,a.__scopeDialog);return e.jsx(K,{present:i||n.open,children:n.modal?e.jsx(Xe,{...l,ref:o}):e.jsx(Je,{...l,ref:o})})});le.displayName=N;var Xe=c.forwardRef((a,o)=>{const t=v(N,a.__scopeDialog),i=c.useRef(null),l=F(o,t.contentRef,i);return c.useEffect(()=>{const n=i.current;if(n)return Pe(n)},[]),e.jsx(ie,{...a,ref:l,trapFocus:t.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:C(a.onCloseAutoFocus,n=>{var m;n.preventDefault(),(m=t.triggerRef.current)==null||m.focus()}),onPointerDownOutside:C(a.onPointerDownOutside,n=>{const m=n.detail.originalEvent,x=m.button===0&&m.ctrlKey===!0;(m.button===2||x)&&n.preventDefault()}),onFocusOutside:C(a.onFocusOutside,n=>n.preventDefault())})}),Je=c.forwardRef((a,o)=>{const t=v(N,a.__scopeDialog),i=c.useRef(!1),l=c.useRef(!1);return e.jsx(ie,{...a,ref:o,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:n=>{var m,x;(m=a.onCloseAutoFocus)==null||m.call(a,n),n.defaultPrevented||(i.current||(x=t.triggerRef.current)==null||x.focus(),n.preventDefault()),i.current=!1,l.current=!1},onInteractOutside:n=>{var y,r;(y=a.onInteractOutside)==null||y.call(a,n),n.defaultPrevented||(i.current=!0,n.detail.originalEvent.type==="pointerdown"&&(l.current=!0));const m=n.target;((r=t.triggerRef.current)==null?void 0:r.contains(m))&&n.preventDefault(),n.detail.originalEvent.type==="focusin"&&l.current&&n.preventDefault()}})}),ie=c.forwardRef((a,o)=>{const{__scopeDialog:t,trapFocus:i,onOpenAutoFocus:l,onCloseAutoFocus:n,...m}=a,x=v(N,t),y=c.useRef(null),r=F(o,y);return Ie(),e.jsxs(e.Fragment,{children:[e.jsx(Te,{asChild:!0,loop:!0,trapped:i,onMountAutoFocus:l,onUnmountAutoFocus:n,children:e.jsx(Ae,{role:"dialog",id:x.contentId,"aria-describedby":x.descriptionId,"aria-labelledby":x.titleId,"data-state":Z(x.open),...m,ref:r,onDismiss:()=>x.onOpenChange(!1)})}),e.jsxs(e.Fragment,{children:[e.jsx(Qe,{titleId:x.titleId}),e.jsx(et,{contentRef:y,descriptionId:x.descriptionId})]})]})}),W="DialogTitle",ce=c.forwardRef((a,o)=>{const{__scopeDialog:t,...i}=a,l=v(W,t);return e.jsx(S.h2,{id:l.titleId,...i,ref:o})});ce.displayName=W;var de="DialogDescription",me=c.forwardRef((a,o)=>{const{__scopeDialog:t,...i}=a,l=v(de,t);return e.jsx(S.p,{id:l.descriptionId,...i,ref:o})});me.displayName=de;var ue="DialogClose",xe=c.forwardRef((a,o)=>{const{__scopeDialog:t,...i}=a,l=v(ue,t);return e.jsx(S.button,{type:"button",...i,ref:o,onClick:C(a.onClick,()=>l.onOpenChange(!1))})});xe.displayName=ue;function Z(a){return a?"open":"closed"}var fe="DialogTitleWarning",[xt,pe]=$e(fe,{contentName:N,titleName:W,docsSlug:"dialog"}),Qe=({titleId:a})=>{const o=pe(fe),t=`\`${o.contentName}\` requires a \`${o.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${o.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${o.docsSlug}`;return c.useEffect(()=>{a&&(document.getElementById(a)||console.error(t))},[t,a]),null},ze="DialogDescriptionWarning",et=({contentRef:a,descriptionId:o})=>{const i=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${pe(ze).contentName}}.`;return c.useEffect(()=>{var n;const l=(n=a.current)==null?void 0:n.getAttribute("aria-describedby");o&&l&&(document.getElementById(o)||console.warn(i))},[i,a,o]),null},tt=te,at=se,st=ne,ye=re,he=le,ge=ce,ve=me,ot=xe;const nt=tt,rt=at,lt=st,be=c.forwardRef(({className:a,...o},t)=>e.jsx(ye,{ref:t,className:k("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",a),...o}));be.displayName=ye.displayName;const je=c.forwardRef(({className:a,children:o,...t},i)=>e.jsxs(lt,{children:[e.jsx(be,{}),e.jsxs(he,{ref:i,className:k("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",a),...t,children:[o,e.jsxs(ot,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[e.jsx(L,{className:"h-4 w-4"}),e.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));je.displayName=he.displayName;const Ne=({className:a,...o})=>e.jsx("div",{className:k("flex flex-col space-y-1.5 text-center sm:text-left",a),...o});Ne.displayName="DialogHeader";const _e=c.forwardRef(({className:a,...o},t)=>e.jsx(ge,{ref:t,className:k("text-lg font-semibold leading-none tracking-tight",a),...o}));_e.displayName=ge.displayName;const it=c.forwardRef(({className:a,...o},t)=>e.jsx(ve,{ref:t,className:k("text-sm text-muted-foreground",a),...o}));it.displayName=ve.displayName;function ct({selectedMetric:a}){const[o,t]=c.useState("national"),[i,l]=c.useState(""),[n,m]=c.useState(!1),x=[{code:"CA",name:"California"},{code:"NY",name:"New York"},{code:"TX",name:"Texas"},{code:"FL",name:"Florida"},{code:"IL",name:"Illinois"},{code:"WA",name:"Washington"}],y=async()=>{m(!0);try{const r=document.createElement("canvas");r.width=1200,r.height=800;const s=r.getContext("2d");if(!s)throw new Error("Cannot get canvas context");s.fillStyle="#f8fafc",s.fillRect(0,0,r.width,r.height),s.fillStyle="#1e293b",s.font="bold 24px Arial",s.textAlign="center";const h=o==="national"?`U.S. Housing Market - ${a}`:`${i} Housing Market - ${a}`;s.fillText(h,r.width/2,40),s.fillStyle="#e2e8f0",s.fillRect(50,70,r.width-300,r.height-200),s.fillStyle="#64748b",s.font="16px Arial",s.textAlign="center",s.fillText("Map Visualization",r.width/2-75,r.height/2),s.fillStyle="#ffffff",s.fillRect(r.width-240,70,190,300),s.strokeStyle="#e2e8f0",s.strokeRect(r.width-240,70,190,300),s.fillStyle="#1e293b",s.font="bold 14px Arial",s.textAlign="left",s.fillText("Legend",r.width-230,95);const u=["Low","Medium-Low","Medium","Medium-High","High"],f=["#dcfce7","#bbf7d0","#fef3c7","#fed7aa","#fecaca"];u.forEach((T,R)=>{const d=120+R*25;s.fillStyle=f[R],s.fillRect(r.width-230,d-10,15,15),s.strokeStyle="#e2e8f0",s.strokeRect(r.width-230,d-10,15,15),s.fillStyle="#1e293b",s.font="12px Arial",s.fillText(T,r.width-210,d+2)}),s.fillStyle="#f1f5f9",s.fillRect(50,r.height-120,r.width-100,70),s.strokeStyle="#e2e8f0",s.strokeRect(50,r.height-120,r.width-100,70),s.fillStyle="#3b82f6",s.fillRect(70,r.height-100,30,30),s.fillStyle="#64748b",s.font="12px Arial",s.textAlign="left",s.fillText("Generated from: domapus.com",110,r.height-85),s.fillText(`Export Date: ${new Date().toLocaleDateString()}`,110,r.height-70),s.font="10px Arial",s.fillText("Data Source: Redfin Market Data",110,r.height-55);const w=document.createElement("a"),D=`housing-market-${o}-${a}-${new Date().toISOString().split("T")[0]}.png`;w.download=D,w.href=r.toDataURL("image/png"),w.click()}catch(r){console.error("Export failed:",r)}finally{m(!1)}};return e.jsxs(nt,{children:[e.jsx(rt,{asChild:!0,children:e.jsxs(j,{variant:"outline",size:"sm","aria-label":"Export map as PNG",children:[e.jsx(J,{className:"h-4 w-4 mr-2","aria-hidden":"true"}),"Export Map"]})}),e.jsxs(je,{className:"sm:max-w-md",children:[e.jsx(Ne,{children:e.jsxs(_e,{className:"flex items-center gap-2",children:[e.jsx(Ge,{className:"h-5 w-5","aria-hidden":"true"}),"Export Map as PNG"]})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs(P,{children:[e.jsx(Oe,{className:"pb-3",children:e.jsx(Fe,{className:"text-sm",children:"Export Type"})}),e.jsxs(E,{className:"space-y-3",children:[e.jsxs(U,{value:o,onValueChange:r=>t(r),children:[e.jsx(q,{"aria-label":"Select export type",children:e.jsx(Y,{})}),e.jsxs(X,{children:[e.jsx($,{value:"national",children:"National Map"}),e.jsx($,{value:"state",children:"State Map"})]})]}),o==="state"&&e.jsxs(U,{value:i,onValueChange:l,children:[e.jsx(q,{"aria-label":"Select state",children:e.jsx(Y,{placeholder:"Select a state"})}),e.jsx(X,{children:x.map(r=>e.jsx($,{value:r.code,children:r.name},r.code))})]})]})]}),e.jsxs("div",{className:"text-sm text-muted-foreground",children:[e.jsx("p",{children:"The exported PNG will include:"}),e.jsxs("ul",{className:"list-disc list-inside mt-1 space-y-1",children:[e.jsx("li",{children:"Map visualization with current metric"}),e.jsx("li",{children:"Legend and color scale"}),e.jsx("li",{children:"Website watermark and timestamp"}),e.jsx("li",{children:"Data source attribution"})]})]}),e.jsx(j,{onClick:y,disabled:n||o==="state"&&!i,className:"w-full","aria-label":n?"Exporting map...":"Export map as PNG",children:n?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-current mr-2"}),"Exporting..."]}):e.jsxs(e.Fragment,{children:[e.jsx(J,{className:"h-4 w-4 mr-2","aria-hidden":"true"}),"Export PNG"]})})]})]})]})}function dt({currentZip:a,onClose:o}){const[t,i]=c.useState(""),[l,n]=c.useState(null),[m,x]=c.useState({}),[y,r]=c.useState({}),[s,h]=c.useState(!1),[u,f]=c.useState("");c.useEffect(()=>{(async()=>{try{const p=await(await fetch("data/zip_data.json")).json();x(p);const we=await(await fetch("data/zip-city-mapping.csv")).text(),G={};we.split(`
`).slice(1).forEach(ke=>{const[H,B]=ke.split(",");H&&B&&(G[H.trim()]=B.trim())}),r(G)}catch(g){console.error("Error loading data:",g)}})()},[]);const w=async()=>{if(t.trim()){h(!0),f("");try{const d=m[t.trim()];if(d){const g={...d,zipCode:t.trim(),city:y[t.trim()]||d.city||"Unknown"};n(g)}else f("ZIP code not found in database"),n(null)}catch{f("Error searching for ZIP code"),n(null)}finally{h(!1)}}},D=(d,g)=>{if(d==null)return"N/A";const p=Number(d);switch(g){case"price":return`$${p.toLocaleString()}`;case"days":return`${p} days`;case"percentage":return p%1===0?`${p.toFixed(0)}%`:`${p.toFixed(1)}%`;case"ratio":const b=p*100;return b%1===0?`${b.toFixed(0)}%`:`${b.toFixed(1)}%`;default:return p%1===0?p.toFixed(0):p.toString()}},T=(d,g)=>{if(!d||!g)return"same";const p=Number(d)-Number(g);return Math.abs(p)<.01?"same":p>0?"higher":"lower"},R=[{key:"median_sale_price",label:"Median Sale Price",type:"price"},{key:"median_list_price",label:"Median List Price",type:"price"},{key:"median_dom",label:"Median Days on Market",type:"days"},{key:"inventory",label:"Inventory",type:"number"},{key:"new_listings",label:"New Listings",type:"number"},{key:"homes_sold",label:"Homes Sold",type:"number"},{key:"avg_sale_to_list_ratio",label:"Sale-to-List Ratio",type:"ratio"},{key:"sold_above_list",label:"% Sold Above List",type:"percentage"},{key:"off_market_in_two_weeks",label:"% Off Market in 2 Weeks",type:"percentage"}];return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-semibold text-dashboard-text-primary",children:"Compare ZIP Codes"}),e.jsx(j,{variant:"ghost",size:"sm",onClick:o,children:e.jsx(L,{className:"h-4 w-4"})})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(Ke,{placeholder:"Enter ZIP code to compare",value:t,onChange:d=>i(d.target.value),onKeyDown:d=>d.key==="Enter"&&w(),"aria-label":"ZIP code to compare"}),e.jsx(j,{onClick:w,disabled:s,size:"sm",children:e.jsx(Le,{className:"h-4 w-4"})})]}),u&&e.jsx("div",{className:"text-sm text-red-500 bg-red-50 p-2 rounded",children:u}),l&&e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"grid grid-cols-3 gap-2 mb-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx(O,{variant:"outline",className:"mb-1",children:a.zipCode}),e.jsx("div",{className:"text-xs text-dashboard-text-secondary",children:a.city})]}),e.jsx("div",{className:"text-center text-xs text-dashboard-text-secondary",children:"vs"}),e.jsxs("div",{className:"text-center",children:[e.jsx(O,{variant:"outline",className:"mb-1",children:l.zipCode}),e.jsx("div",{className:"text-xs text-dashboard-text-secondary",children:l.city})]})]}),e.jsx("div",{className:"space-y-2",children:R.map(d=>{const g=a[d.key],p=l[d.key],b=T(g,p);return e.jsx(P,{className:"border-dashboard-border",children:e.jsxs(E,{className:"p-3",children:[e.jsx("div",{className:"text-center mb-2",children:e.jsx("span",{className:"text-xs text-dashboard-text-secondary font-medium",children:d.label})}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx("div",{className:"text-center",children:e.jsx("div",{className:`font-medium text-sm ${b==="higher"?"text-green-600":b==="lower"?"text-red-600":"text-dashboard-text-primary"}`,children:D(g,d.type)})}),e.jsx("div",{className:"text-center",children:e.jsx("div",{className:`font-medium text-sm ${b==="lower"?"text-green-600":b==="higher"?"text-red-600":"text-dashboard-text-primary"}`,children:D(p,d.type)})})]})]})},d.key)})})]})]})}function ft({isOpen:a,isCollapsed:o,zipData:t,onClose:i,onToggleCollapse:l}){const[n,m]=c.useState(!1);if(!a||!t)return null;const x=(s,h)=>{if(s==null)return"N/A";const u=Number(s);switch(h){case"price":return`$${u.toLocaleString()}`;case"days":return`${u} days`;case"percentage":return u%1===0?`${u.toFixed(0)}%`:`${u.toFixed(1)}%`;case"ratio":const f=u*100;return f%1===0?`${f.toFixed(0)}%`:`${f.toFixed(1)}%`;default:return u%1===0?u.toFixed(0):u.toString()}},y=s=>{if(s==null)return{formatted:"N/A",isPositive:!1,isZero:!0};const h=Number(s),u=h>0,f=h===0;return{formatted:`${u?"+":""}${h.toFixed(1)}%`,isPositive:u,isZero:f}},r=[{key:"median_sale_price",label:"Median Sale Price",type:"price",momKey:"median_sale_price_mom",yoyKey:"median_sale_price_yoy",value:t.median_sale_price||t.medianSalePrice},{key:"median_list_price",label:"Median List Price",type:"price",momKey:"median_list_price_mom",yoyKey:"median_list_price_yoy",value:t.median_list_price||t.medianListPrice},{key:"median_dom",label:"Median Days on Market",type:"days",momKey:"median_dom_mom",yoyKey:"median_dom_yoy",value:t.median_dom||t.medianDOM},{key:"inventory",label:"Inventory",type:"number",momKey:"inventory_mom",yoyKey:"inventory_yoy",value:t.inventory},{key:"new_listings",label:"New Listings",type:"number",momKey:"new_listings_mom",yoyKey:"new_listings_yoy",value:t.new_listings},{key:"homes_sold",label:"Homes Sold",type:"number",momKey:"homes_sold_mom",yoyKey:"homes_sold_yoy",value:t.homes_sold||t.homesSold},{key:"avg_sale_to_list_ratio",label:"Sale-to-List Ratio",type:"ratio",momKey:null,yoyKey:null,value:t.avg_sale_to_list_ratio||t.saleToListRatio},{key:"sold_above_list",label:"% Sold Above List",type:"percentage",momKey:null,yoyKey:null,value:t.sold_above_list||t.homesSoldAboveList},{key:"off_market_in_two_weeks",label:"% Off Market in 2 Weeks",type:"percentage",momKey:null,yoyKey:null,value:t.off_market_in_two_weeks||t.offMarket2Weeks},{key:"median_ppsf",label:"Median Price per Sq Ft",type:"price",momKey:null,yoyKey:null,value:t.median_ppsf},{key:"median_list_ppsf",label:"Median List Price per Sq Ft",type:"price",momKey:null,yoyKey:null,value:t.median_list_ppsf},{key:"pending_sales",label:"Pending Sales",type:"number",momKey:null,yoyKey:null,value:t.pending_sales},{key:"months_of_supply",label:"Months of Supply",type:"number",momKey:null,yoyKey:null,value:t.months_of_supply},{key:"price_drops",label:"Price Drops",type:"number",momKey:null,yoyKey:null,value:t.price_drops}].filter(s=>s.value!==null&&s.value!==void 0);return e.jsxs("div",{className:`fixed left-0 top-0 h-full bg-dashboard-panel border-r border-dashboard-border shadow-lg z-40 transition-all duration-300 ${o?"w-16":"w-96"}`,children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-dashboard-border",children:[!o&&e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold text-dashboard-text-primary",children:"ZIP Code Details"}),e.jsx("p",{className:"text-sm text-dashboard-text-secondary",children:t.zipCode}),t.city&&e.jsx("p",{className:"text-xs text-dashboard-text-secondary",children:t.city})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(j,{variant:"ghost",size:"sm",onClick:l,children:o?e.jsx(Ze,{className:"h-4 w-4"}):e.jsx(We,{className:"h-4 w-4"})}),!o&&e.jsx(j,{variant:"ghost",size:"sm",onClick:i,children:e.jsx(L,{className:"h-4 w-4"})})]})]}),!o&&e.jsxs("div",{className:"flex flex-col h-full",children:[n?e.jsx("div",{className:"p-4 flex-1 overflow-y-auto",children:e.jsx(dt,{currentZip:t,onClose:()=>m(!1)})}):e.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-3",children:[e.jsx("div",{className:"flex items-center space-x-2 mb-4",children:e.jsx(O,{variant:"outline",className:"text-lg px-3 py-1",children:t.zipCode})}),e.jsx("div",{className:"space-y-3",children:r.map((s,h)=>{const u=s.momKey?y(t[s.momKey]):null,f=s.yoyKey?y(t[s.yoyKey]):null;return e.jsx(P,{className:"border-dashboard-border",children:e.jsx(E,{className:"p-4",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-sm text-dashboard-text-secondary font-medium",children:s.label}),e.jsx("p",{className:"text-xl font-bold text-dashboard-text-primary",children:x(s.value,s.type)}),e.jsxs("div",{className:"flex flex-wrap gap-2 text-xs",children:[u&&!u.isZero&&e.jsxs("span",{className:`flex items-center ${u.isPositive?"text-green-600":"text-red-600"}`,children:[u.isPositive?e.jsx(z,{className:"h-3 w-3 mr-1"}):e.jsx(Q,{className:"h-3 w-3 mr-1"}),u.formatted," vs last month"]}),f&&!f.isZero&&e.jsxs("span",{className:`flex items-center ${f.isPositive?"text-green-600":"text-red-600"}`,children:[f.isPositive?e.jsx(z,{className:"h-3 w-3 mr-1"}):e.jsx(Q,{className:"h-3 w-3 mr-1"}),f.formatted," vs last year"]})]})]})})},h)})})]}),e.jsxs("div",{className:"p-4 space-y-3 border-t border-dashboard-border bg-dashboard-panel",children:[e.jsxs(j,{variant:"outline",className:"w-full",onClick:()=>m(!n),children:[e.jsx(Ve,{className:"h-4 w-4 mr-2"}),n?"Back to Details":"Compare ZIP Codes"]}),e.jsx(ct,{selectedMetric:"current-view"}),e.jsx(P,{className:"border-dashboard-border bg-muted/30",children:e.jsx(E,{className:"p-3",children:e.jsx("p",{className:"text-xs text-dashboard-text-secondary",children:"Data sourced from Redfin Data Center. Updated periodically from latest available data."})})})]})]})]})}export{ft as Sidebar};
