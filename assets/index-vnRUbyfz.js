function j4(e,r){for(var i=0;i<r.length;i++){const a=r[i];if(typeof a!="string"&&!Array.isArray(a)){for(const u in a)if(u!=="default"&&!(u in e)){const d=Object.getOwnPropertyDescriptor(a,u);d&&Object.defineProperty(e,u,d.get?d:{enumerable:!0,get:()=>a[u]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const u of document.querySelectorAll('link[rel="modulepreload"]'))a(u);new MutationObserver(u=>{for(const d of u)if(d.type==="childList")for(const m of d.addedNodes)m.tagName==="LINK"&&m.rel==="modulepreload"&&a(m)}).observe(document,{childList:!0,subtree:!0});function i(u){const d={};return u.integrity&&(d.integrity=u.integrity),u.referrerPolicy&&(d.referrerPolicy=u.referrerPolicy),u.crossOrigin==="use-credentials"?d.credentials="include":u.crossOrigin==="anonymous"?d.credentials="omit":d.credentials="same-origin",d}function a(u){if(u.ep)return;u.ep=!0;const d=i(u);fetch(u.href,d)}})();var LV=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function vw(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var jv={exports:{}},im={},Vv={exports:{}},ni={};var Mb;function V4(){if(Mb)return ni;Mb=1;var e=Symbol.for("react.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),u=Symbol.for("react.profiler"),d=Symbol.for("react.provider"),m=Symbol.for("react.context"),o=Symbol.for("react.forward_ref"),w=Symbol.for("react.suspense"),E=Symbol.for("react.memo"),I=Symbol.for("react.lazy"),D=Symbol.iterator;function O(Ce){return Ce===null||typeof Ce!="object"?null:(Ce=D&&Ce[D]||Ce["@@iterator"],typeof Ce=="function"?Ce:null)}var P={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},W=Object.assign,z={};function H(Ce,ie,Ee){this.props=Ce,this.context=ie,this.refs=z,this.updater=Ee||P}H.prototype.isReactComponent={},H.prototype.setState=function(Ce,ie){if(typeof Ce!="object"&&typeof Ce!="function"&&Ce!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,Ce,ie,"setState")},H.prototype.forceUpdate=function(Ce){this.updater.enqueueForceUpdate(this,Ce,"forceUpdate")};function Z(){}Z.prototype=H.prototype;function se(Ce,ie,Ee){this.props=Ce,this.context=ie,this.refs=z,this.updater=Ee||P}var ce=se.prototype=new Z;ce.constructor=se,W(ce,H.prototype),ce.isPureReactComponent=!0;var de=Array.isArray,Pe=Object.prototype.hasOwnProperty,He={current:null},Xe={key:!0,ref:!0,__self:!0,__source:!0};function Qe(Ce,ie,Ee){var Le,Ve={},nt=null,et=null;if(ie!=null)for(Le in ie.ref!==void 0&&(et=ie.ref),ie.key!==void 0&&(nt=""+ie.key),ie)Pe.call(ie,Le)&&!Xe.hasOwnProperty(Le)&&(Ve[Le]=ie[Le]);var _t=arguments.length-2;if(_t===1)Ve.children=Ee;else if(1<_t){for(var St=Array(_t),Tt=0;Tt<_t;Tt++)St[Tt]=arguments[Tt+2];Ve.children=St}if(Ce&&Ce.defaultProps)for(Le in _t=Ce.defaultProps,_t)Ve[Le]===void 0&&(Ve[Le]=_t[Le]);return{$$typeof:e,type:Ce,key:nt,ref:et,props:Ve,_owner:He.current}}function Be(Ce,ie){return{$$typeof:e,type:Ce.type,key:ie,ref:Ce.ref,props:Ce.props,_owner:Ce._owner}}function Je(Ce){return typeof Ce=="object"&&Ce!==null&&Ce.$$typeof===e}function Ae(Ce){var ie={"=":"=0",":":"=2"};return"$"+Ce.replace(/[=:]/g,function(Ee){return ie[Ee]})}var me=/\/+/g;function Te(Ce,ie){return typeof Ce=="object"&&Ce!==null&&Ce.key!=null?Ae(""+Ce.key):ie.toString(36)}function Ie(Ce,ie,Ee,Le,Ve){var nt=typeof Ce;(nt==="undefined"||nt==="boolean")&&(Ce=null);var et=!1;if(Ce===null)et=!0;else switch(nt){case"string":case"number":et=!0;break;case"object":switch(Ce.$$typeof){case e:case r:et=!0}}if(et)return et=Ce,Ve=Ve(et),Ce=Le===""?"."+Te(et,0):Le,de(Ve)?(Ee="",Ce!=null&&(Ee=Ce.replace(me,"$&/")+"/"),Ie(Ve,ie,Ee,"",function(Tt){return Tt})):Ve!=null&&(Je(Ve)&&(Ve=Be(Ve,Ee+(!Ve.key||et&&et.key===Ve.key?"":(""+Ve.key).replace(me,"$&/")+"/")+Ce)),ie.push(Ve)),1;if(et=0,Le=Le===""?".":Le+":",de(Ce))for(var _t=0;_t<Ce.length;_t++){nt=Ce[_t];var St=Le+Te(nt,_t);et+=Ie(nt,ie,Ee,St,Ve)}else if(St=O(Ce),typeof St=="function")for(Ce=St.call(Ce),_t=0;!(nt=Ce.next()).done;)nt=nt.value,St=Le+Te(nt,_t++),et+=Ie(nt,ie,Ee,St,Ve);else if(nt==="object")throw ie=String(Ce),Error("Objects are not valid as a React child (found: "+(ie==="[object Object]"?"object with keys {"+Object.keys(Ce).join(", ")+"}":ie)+"). If you meant to render a collection of children, use an array instead.");return et}function ut(Ce,ie,Ee){if(Ce==null)return Ce;var Le=[],Ve=0;return Ie(Ce,Le,"","",function(nt){return ie.call(Ee,nt,Ve++)}),Le}function it(Ce){if(Ce._status===-1){var ie=Ce._result;ie=ie(),ie.then(function(Ee){(Ce._status===0||Ce._status===-1)&&(Ce._status=1,Ce._result=Ee)},function(Ee){(Ce._status===0||Ce._status===-1)&&(Ce._status=2,Ce._result=Ee)}),Ce._status===-1&&(Ce._status=0,Ce._result=ie)}if(Ce._status===1)return Ce._result.default;throw Ce._result}var ot={current:null},ke={transition:null},Ne={ReactCurrentDispatcher:ot,ReactCurrentBatchConfig:ke,ReactCurrentOwner:He};function yt(){throw Error("act(...) is not supported in production builds of React.")}return ni.Children={map:ut,forEach:function(Ce,ie,Ee){ut(Ce,function(){ie.apply(this,arguments)},Ee)},count:function(Ce){var ie=0;return ut(Ce,function(){ie++}),ie},toArray:function(Ce){return ut(Ce,function(ie){return ie})||[]},only:function(Ce){if(!Je(Ce))throw Error("React.Children.only expected to receive a single React element child.");return Ce}},ni.Component=H,ni.Fragment=i,ni.Profiler=u,ni.PureComponent=se,ni.StrictMode=a,ni.Suspense=w,ni.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Ne,ni.act=yt,ni.cloneElement=function(Ce,ie,Ee){if(Ce==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+Ce+".");var Le=W({},Ce.props),Ve=Ce.key,nt=Ce.ref,et=Ce._owner;if(ie!=null){if(ie.ref!==void 0&&(nt=ie.ref,et=He.current),ie.key!==void 0&&(Ve=""+ie.key),Ce.type&&Ce.type.defaultProps)var _t=Ce.type.defaultProps;for(St in ie)Pe.call(ie,St)&&!Xe.hasOwnProperty(St)&&(Le[St]=ie[St]===void 0&&_t!==void 0?_t[St]:ie[St])}var St=arguments.length-2;if(St===1)Le.children=Ee;else if(1<St){_t=Array(St);for(var Tt=0;Tt<St;Tt++)_t[Tt]=arguments[Tt+2];Le.children=_t}return{$$typeof:e,type:Ce.type,key:Ve,ref:nt,props:Le,_owner:et}},ni.createContext=function(Ce){return Ce={$$typeof:m,_currentValue:Ce,_currentValue2:Ce,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},Ce.Provider={$$typeof:d,_context:Ce},Ce.Consumer=Ce},ni.createElement=Qe,ni.createFactory=function(Ce){var ie=Qe.bind(null,Ce);return ie.type=Ce,ie},ni.createRef=function(){return{current:null}},ni.forwardRef=function(Ce){return{$$typeof:o,render:Ce}},ni.isValidElement=Je,ni.lazy=function(Ce){return{$$typeof:I,_payload:{_status:-1,_result:Ce},_init:it}},ni.memo=function(Ce,ie){return{$$typeof:E,type:Ce,compare:ie===void 0?null:ie}},ni.startTransition=function(Ce){var ie=ke.transition;ke.transition={};try{Ce()}finally{ke.transition=ie}},ni.unstable_act=yt,ni.useCallback=function(Ce,ie){return ot.current.useCallback(Ce,ie)},ni.useContext=function(Ce){return ot.current.useContext(Ce)},ni.useDebugValue=function(){},ni.useDeferredValue=function(Ce){return ot.current.useDeferredValue(Ce)},ni.useEffect=function(Ce,ie){return ot.current.useEffect(Ce,ie)},ni.useId=function(){return ot.current.useId()},ni.useImperativeHandle=function(Ce,ie,Ee){return ot.current.useImperativeHandle(Ce,ie,Ee)},ni.useInsertionEffect=function(Ce,ie){return ot.current.useInsertionEffect(Ce,ie)},ni.useLayoutEffect=function(Ce,ie){return ot.current.useLayoutEffect(Ce,ie)},ni.useMemo=function(Ce,ie){return ot.current.useMemo(Ce,ie)},ni.useReducer=function(Ce,ie,Ee){return ot.current.useReducer(Ce,ie,Ee)},ni.useRef=function(Ce){return ot.current.useRef(Ce)},ni.useState=function(Ce){return ot.current.useState(Ce)},ni.useSyncExternalStore=function(Ce,ie,Ee){return ot.current.useSyncExternalStore(Ce,ie,Ee)},ni.useTransition=function(){return ot.current.useTransition()},ni.version="18.3.1",ni}var kb;function _w(){return kb||(kb=1,Vv.exports=V4()),Vv.exports}var Ub;function G4(){if(Ub)return im;Ub=1;var e=_w(),r=Symbol.for("react.element"),i=Symbol.for("react.fragment"),a=Object.prototype.hasOwnProperty,u=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,d={key:!0,ref:!0,__self:!0,__source:!0};function m(o,w,E){var I,D={},O=null,P=null;E!==void 0&&(O=""+E),w.key!==void 0&&(O=""+w.key),w.ref!==void 0&&(P=w.ref);for(I in w)a.call(w,I)&&!d.hasOwnProperty(I)&&(D[I]=w[I]);if(o&&o.defaultProps)for(I in w=o.defaultProps,w)D[I]===void 0&&(D[I]=w[I]);return{$$typeof:r,type:o,key:O,ref:P,props:D,_owner:u.current}}return im.Fragment=i,im.jsx=m,im.jsxs=m,im}var Db;function K4(){return Db||(Db=1,jv.exports=G4()),jv.exports}var ae=K4(),Qg={},Gv={exports:{}},Yc={},Kv={exports:{}},qv={};var Rb;function q4(){return Rb||(Rb=1,(function(e){function r(ke,Ne){var yt=ke.length;ke.push(Ne);e:for(;0<yt;){var Ce=yt-1>>>1,ie=ke[Ce];if(0<u(ie,Ne))ke[Ce]=Ne,ke[yt]=ie,yt=Ce;else break e}}function i(ke){return ke.length===0?null:ke[0]}function a(ke){if(ke.length===0)return null;var Ne=ke[0],yt=ke.pop();if(yt!==Ne){ke[0]=yt;e:for(var Ce=0,ie=ke.length,Ee=ie>>>1;Ce<Ee;){var Le=2*(Ce+1)-1,Ve=ke[Le],nt=Le+1,et=ke[nt];if(0>u(Ve,yt))nt<ie&&0>u(et,Ve)?(ke[Ce]=et,ke[nt]=yt,Ce=nt):(ke[Ce]=Ve,ke[Le]=yt,Ce=Le);else if(nt<ie&&0>u(et,yt))ke[Ce]=et,ke[nt]=yt,Ce=nt;else break e}}return Ne}function u(ke,Ne){var yt=ke.sortIndex-Ne.sortIndex;return yt!==0?yt:ke.id-Ne.id}if(typeof performance=="object"&&typeof performance.now=="function"){var d=performance;e.unstable_now=function(){return d.now()}}else{var m=Date,o=m.now();e.unstable_now=function(){return m.now()-o}}var w=[],E=[],I=1,D=null,O=3,P=!1,W=!1,z=!1,H=typeof setTimeout=="function"?setTimeout:null,Z=typeof clearTimeout=="function"?clearTimeout:null,se=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function ce(ke){for(var Ne=i(E);Ne!==null;){if(Ne.callback===null)a(E);else if(Ne.startTime<=ke)a(E),Ne.sortIndex=Ne.expirationTime,r(w,Ne);else break;Ne=i(E)}}function de(ke){if(z=!1,ce(ke),!W)if(i(w)!==null)W=!0,it(Pe);else{var Ne=i(E);Ne!==null&&ot(de,Ne.startTime-ke)}}function Pe(ke,Ne){W=!1,z&&(z=!1,Z(Qe),Qe=-1),P=!0;var yt=O;try{for(ce(Ne),D=i(w);D!==null&&(!(D.expirationTime>Ne)||ke&&!Ae());){var Ce=D.callback;if(typeof Ce=="function"){D.callback=null,O=D.priorityLevel;var ie=Ce(D.expirationTime<=Ne);Ne=e.unstable_now(),typeof ie=="function"?D.callback=ie:D===i(w)&&a(w),ce(Ne)}else a(w);D=i(w)}if(D!==null)var Ee=!0;else{var Le=i(E);Le!==null&&ot(de,Le.startTime-Ne),Ee=!1}return Ee}finally{D=null,O=yt,P=!1}}var He=!1,Xe=null,Qe=-1,Be=5,Je=-1;function Ae(){return!(e.unstable_now()-Je<Be)}function me(){if(Xe!==null){var ke=e.unstable_now();Je=ke;var Ne=!0;try{Ne=Xe(!0,ke)}finally{Ne?Te():(He=!1,Xe=null)}}else He=!1}var Te;if(typeof se=="function")Te=function(){se(me)};else if(typeof MessageChannel<"u"){var Ie=new MessageChannel,ut=Ie.port2;Ie.port1.onmessage=me,Te=function(){ut.postMessage(null)}}else Te=function(){H(me,0)};function it(ke){Xe=ke,He||(He=!0,Te())}function ot(ke,Ne){Qe=H(function(){ke(e.unstable_now())},Ne)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(ke){ke.callback=null},e.unstable_continueExecution=function(){W||P||(W=!0,it(Pe))},e.unstable_forceFrameRate=function(ke){0>ke||125<ke?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Be=0<ke?Math.floor(1e3/ke):5},e.unstable_getCurrentPriorityLevel=function(){return O},e.unstable_getFirstCallbackNode=function(){return i(w)},e.unstable_next=function(ke){switch(O){case 1:case 2:case 3:var Ne=3;break;default:Ne=O}var yt=O;O=Ne;try{return ke()}finally{O=yt}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(ke,Ne){switch(ke){case 1:case 2:case 3:case 4:case 5:break;default:ke=3}var yt=O;O=ke;try{return Ne()}finally{O=yt}},e.unstable_scheduleCallback=function(ke,Ne,yt){var Ce=e.unstable_now();switch(typeof yt=="object"&&yt!==null?(yt=yt.delay,yt=typeof yt=="number"&&0<yt?Ce+yt:Ce):yt=Ce,ke){case 1:var ie=-1;break;case 2:ie=250;break;case 5:ie=1073741823;break;case 4:ie=1e4;break;default:ie=5e3}return ie=yt+ie,ke={id:I++,callback:Ne,priorityLevel:ke,startTime:yt,expirationTime:ie,sortIndex:-1},yt>Ce?(ke.sortIndex=yt,r(E,ke),i(w)===null&&ke===i(E)&&(z?(Z(Qe),Qe=-1):z=!0,ot(de,yt-Ce))):(ke.sortIndex=ie,r(w,ke),W||P||(W=!0,it(Pe))),ke},e.unstable_shouldYield=Ae,e.unstable_wrapCallback=function(ke){var Ne=O;return function(){var yt=O;O=Ne;try{return ke.apply(this,arguments)}finally{O=yt}}}})(qv)),qv}var Nb;function $4(){return Nb||(Nb=1,Kv.exports=q4()),Kv.exports}var Qb;function W4(){if(Qb)return Yc;Qb=1;var e=_w(),r=$4();function i(h){for(var g="https://reactjs.org/docs/error-decoder.html?invariant="+h,C=1;C<arguments.length;C++)g+="&args[]="+encodeURIComponent(arguments[C]);return"Minified React error #"+h+"; visit "+g+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var a=new Set,u={};function d(h,g){m(h,g),m(h+"Capture",g)}function m(h,g){for(u[h]=g,h=0;h<g.length;h++)a.add(g[h])}var o=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),w=Object.prototype.hasOwnProperty,E=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,I={},D={};function O(h){return w.call(D,h)?!0:w.call(I,h)?!1:E.test(h)?D[h]=!0:(I[h]=!0,!1)}function P(h,g,C,k){if(C!==null&&C.type===0)return!1;switch(typeof g){case"function":case"symbol":return!0;case"boolean":return k?!1:C!==null?!C.acceptsBooleans:(h=h.toLowerCase().slice(0,5),h!=="data-"&&h!=="aria-");default:return!1}}function W(h,g,C,k){if(g===null||typeof g>"u"||P(h,g,C,k))return!0;if(k)return!1;if(C!==null)switch(C.type){case 3:return!g;case 4:return g===!1;case 5:return isNaN(g);case 6:return isNaN(g)||1>g}return!1}function z(h,g,C,k,G,Y,xe){this.acceptsBooleans=g===2||g===3||g===4,this.attributeName=k,this.attributeNamespace=G,this.mustUseProperty=C,this.propertyName=h,this.type=g,this.sanitizeURL=Y,this.removeEmptyString=xe}var H={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(h){H[h]=new z(h,0,!1,h,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(h){var g=h[0];H[g]=new z(g,1,!1,h[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(h){H[h]=new z(h,2,!1,h.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(h){H[h]=new z(h,2,!1,h,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(h){H[h]=new z(h,3,!1,h.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(h){H[h]=new z(h,3,!0,h,null,!1,!1)}),["capture","download"].forEach(function(h){H[h]=new z(h,4,!1,h,null,!1,!1)}),["cols","rows","size","span"].forEach(function(h){H[h]=new z(h,6,!1,h,null,!1,!1)}),["rowSpan","start"].forEach(function(h){H[h]=new z(h,5,!1,h.toLowerCase(),null,!1,!1)});var Z=/[\-:]([a-z])/g;function se(h){return h[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(h){var g=h.replace(Z,se);H[g]=new z(g,1,!1,h,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(h){var g=h.replace(Z,se);H[g]=new z(g,1,!1,h,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(h){var g=h.replace(Z,se);H[g]=new z(g,1,!1,h,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(h){H[h]=new z(h,1,!1,h.toLowerCase(),null,!1,!1)}),H.xlinkHref=new z("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(h){H[h]=new z(h,1,!1,h.toLowerCase(),null,!0,!0)});function ce(h,g,C,k){var G=H.hasOwnProperty(g)?H[g]:null;(G!==null?G.type!==0:k||!(2<g.length)||g[0]!=="o"&&g[0]!=="O"||g[1]!=="n"&&g[1]!=="N")&&(W(g,C,G,k)&&(C=null),k||G===null?O(g)&&(C===null?h.removeAttribute(g):h.setAttribute(g,""+C)):G.mustUseProperty?h[G.propertyName]=C===null?G.type===3?!1:"":C:(g=G.attributeName,k=G.attributeNamespace,C===null?h.removeAttribute(g):(G=G.type,C=G===3||G===4&&C===!0?"":""+C,k?h.setAttributeNS(k,g,C):h.setAttribute(g,C))))}var de=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Pe=Symbol.for("react.element"),He=Symbol.for("react.portal"),Xe=Symbol.for("react.fragment"),Qe=Symbol.for("react.strict_mode"),Be=Symbol.for("react.profiler"),Je=Symbol.for("react.provider"),Ae=Symbol.for("react.context"),me=Symbol.for("react.forward_ref"),Te=Symbol.for("react.suspense"),Ie=Symbol.for("react.suspense_list"),ut=Symbol.for("react.memo"),it=Symbol.for("react.lazy"),ot=Symbol.for("react.offscreen"),ke=Symbol.iterator;function Ne(h){return h===null||typeof h!="object"?null:(h=ke&&h[ke]||h["@@iterator"],typeof h=="function"?h:null)}var yt=Object.assign,Ce;function ie(h){if(Ce===void 0)try{throw Error()}catch(C){var g=C.stack.trim().match(/\n( *(at )?)/);Ce=g&&g[1]||""}return`
`+Ce+h}var Ee=!1;function Le(h,g){if(!h||Ee)return"";Ee=!0;var C=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(g)if(g=function(){throw Error()},Object.defineProperty(g.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(g,[])}catch(jt){var k=jt}Reflect.construct(h,[],g)}else{try{g.call()}catch(jt){k=jt}h.call(g.prototype)}else{try{throw Error()}catch(jt){k=jt}h()}}catch(jt){if(jt&&k&&typeof jt.stack=="string"){for(var G=jt.stack.split(`
`),Y=k.stack.split(`
`),xe=G.length-1,ht=Y.length-1;1<=xe&&0<=ht&&G[xe]!==Y[ht];)ht--;for(;1<=xe&&0<=ht;xe--,ht--)if(G[xe]!==Y[ht]){if(xe!==1||ht!==1)do if(xe--,ht--,0>ht||G[xe]!==Y[ht]){var xt=`
`+G[xe].replace(" at new "," at ");return h.displayName&&xt.includes("<anonymous>")&&(xt=xt.replace("<anonymous>",h.displayName)),xt}while(1<=xe&&0<=ht);break}}}finally{Ee=!1,Error.prepareStackTrace=C}return(h=h?h.displayName||h.name:"")?ie(h):""}function Ve(h){switch(h.tag){case 5:return ie(h.type);case 16:return ie("Lazy");case 13:return ie("Suspense");case 19:return ie("SuspenseList");case 0:case 2:case 15:return h=Le(h.type,!1),h;case 11:return h=Le(h.type.render,!1),h;case 1:return h=Le(h.type,!0),h;default:return""}}function nt(h){if(h==null)return null;if(typeof h=="function")return h.displayName||h.name||null;if(typeof h=="string")return h;switch(h){case Xe:return"Fragment";case He:return"Portal";case Be:return"Profiler";case Qe:return"StrictMode";case Te:return"Suspense";case Ie:return"SuspenseList"}if(typeof h=="object")switch(h.$$typeof){case Ae:return(h.displayName||"Context")+".Consumer";case Je:return(h._context.displayName||"Context")+".Provider";case me:var g=h.render;return h=h.displayName,h||(h=g.displayName||g.name||"",h=h!==""?"ForwardRef("+h+")":"ForwardRef"),h;case ut:return g=h.displayName||null,g!==null?g:nt(h.type)||"Memo";case it:g=h._payload,h=h._init;try{return nt(h(g))}catch{}}return null}function et(h){var g=h.type;switch(h.tag){case 24:return"Cache";case 9:return(g.displayName||"Context")+".Consumer";case 10:return(g._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return h=g.render,h=h.displayName||h.name||"",g.displayName||(h!==""?"ForwardRef("+h+")":"ForwardRef");case 7:return"Fragment";case 5:return g;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return nt(g);case 8:return g===Qe?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof g=="function")return g.displayName||g.name||null;if(typeof g=="string")return g}return null}function _t(h){switch(typeof h){case"boolean":case"number":case"string":case"undefined":return h;case"object":return h;default:return""}}function St(h){var g=h.type;return(h=h.nodeName)&&h.toLowerCase()==="input"&&(g==="checkbox"||g==="radio")}function Tt(h){var g=St(h)?"checked":"value",C=Object.getOwnPropertyDescriptor(h.constructor.prototype,g),k=""+h[g];if(!h.hasOwnProperty(g)&&typeof C<"u"&&typeof C.get=="function"&&typeof C.set=="function"){var G=C.get,Y=C.set;return Object.defineProperty(h,g,{configurable:!0,get:function(){return G.call(this)},set:function(xe){k=""+xe,Y.call(this,xe)}}),Object.defineProperty(h,g,{enumerable:C.enumerable}),{getValue:function(){return k},setValue:function(xe){k=""+xe},stopTracking:function(){h._valueTracker=null,delete h[g]}}}}function Gt(h){h._valueTracker||(h._valueTracker=Tt(h))}function or(h){if(!h)return!1;var g=h._valueTracker;if(!g)return!0;var C=g.getValue(),k="";return h&&(k=St(h)?h.checked?"true":"false":h.value),h=k,h!==C?(g.setValue(h),!0):!1}function Ar(h){if(h=h||(typeof document<"u"?document:void 0),typeof h>"u")return null;try{return h.activeElement||h.body}catch{return h.body}}function _r(h,g){var C=g.checked;return yt({},g,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:C??h._wrapperState.initialChecked})}function je(h,g){var C=g.defaultValue==null?"":g.defaultValue,k=g.checked!=null?g.checked:g.defaultChecked;C=_t(g.value!=null?g.value:C),h._wrapperState={initialChecked:k,initialValue:C,controlled:g.type==="checkbox"||g.type==="radio"?g.checked!=null:g.value!=null}}function mr(h,g){g=g.checked,g!=null&&ce(h,"checked",g,!1)}function kr(h,g){mr(h,g);var C=_t(g.value),k=g.type;if(C!=null)k==="number"?(C===0&&h.value===""||h.value!=C)&&(h.value=""+C):h.value!==""+C&&(h.value=""+C);else if(k==="submit"||k==="reset"){h.removeAttribute("value");return}g.hasOwnProperty("value")?lr(h,g.type,C):g.hasOwnProperty("defaultValue")&&lr(h,g.type,_t(g.defaultValue)),g.checked==null&&g.defaultChecked!=null&&(h.defaultChecked=!!g.defaultChecked)}function Vr(h,g,C){if(g.hasOwnProperty("value")||g.hasOwnProperty("defaultValue")){var k=g.type;if(!(k!=="submit"&&k!=="reset"||g.value!==void 0&&g.value!==null))return;g=""+h._wrapperState.initialValue,C||g===h.value||(h.value=g),h.defaultValue=g}C=h.name,C!==""&&(h.name=""),h.defaultChecked=!!h._wrapperState.initialChecked,C!==""&&(h.name=C)}function lr(h,g,C){(g!=="number"||Ar(h.ownerDocument)!==h)&&(C==null?h.defaultValue=""+h._wrapperState.initialValue:h.defaultValue!==""+C&&(h.defaultValue=""+C))}var Gr=Array.isArray;function Er(h,g,C,k){if(h=h.options,g){g={};for(var G=0;G<C.length;G++)g["$"+C[G]]=!0;for(C=0;C<h.length;C++)G=g.hasOwnProperty("$"+h[C].value),h[C].selected!==G&&(h[C].selected=G),G&&k&&(h[C].defaultSelected=!0)}else{for(C=""+_t(C),g=null,G=0;G<h.length;G++){if(h[G].value===C){h[G].selected=!0,k&&(h[G].defaultSelected=!0);return}g!==null||h[G].disabled||(g=h[G])}g!==null&&(g.selected=!0)}}function Nr(h,g){if(g.dangerouslySetInnerHTML!=null)throw Error(i(91));return yt({},g,{value:void 0,defaultValue:void 0,children:""+h._wrapperState.initialValue})}function Dr(h,g){var C=g.value;if(C==null){if(C=g.children,g=g.defaultValue,C!=null){if(g!=null)throw Error(i(92));if(Gr(C)){if(1<C.length)throw Error(i(93));C=C[0]}g=C}g==null&&(g=""),C=g}h._wrapperState={initialValue:_t(C)}}function Dn(h,g){var C=_t(g.value),k=_t(g.defaultValue);C!=null&&(C=""+C,C!==h.value&&(h.value=C),g.defaultValue==null&&h.defaultValue!==C&&(h.defaultValue=C)),k!=null&&(h.defaultValue=""+k)}function un(h){var g=h.textContent;g===h._wrapperState.initialValue&&g!==""&&g!==null&&(h.value=g)}function pt(h){switch(h){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function fe(h,g){return h==null||h==="http://www.w3.org/1999/xhtml"?pt(g):h==="http://www.w3.org/2000/svg"&&g==="foreignObject"?"http://www.w3.org/1999/xhtml":h}var pe,ve=(function(h){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(g,C,k,G){MSApp.execUnsafeLocalFunction(function(){return h(g,C,k,G)})}:h})(function(h,g){if(h.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in h)h.innerHTML=g;else{for(pe=pe||document.createElement("div"),pe.innerHTML="<svg>"+g.valueOf().toString()+"</svg>",g=pe.firstChild;h.firstChild;)h.removeChild(h.firstChild);for(;g.firstChild;)h.appendChild(g.firstChild)}});function qe(h,g){if(g){var C=h.firstChild;if(C&&C===h.lastChild&&C.nodeType===3){C.nodeValue=g;return}}h.textContent=g}var We={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Ct=["Webkit","ms","Moz","O"];Object.keys(We).forEach(function(h){Ct.forEach(function(g){g=g+h.charAt(0).toUpperCase()+h.substring(1),We[g]=We[h]})});function vt(h,g,C){return g==null||typeof g=="boolean"||g===""?"":C||typeof g!="number"||g===0||We.hasOwnProperty(h)&&We[h]?(""+g).trim():g+"px"}function ct(h,g){h=h.style;for(var C in g)if(g.hasOwnProperty(C)){var k=C.indexOf("--")===0,G=vt(C,g[C],k);C==="float"&&(C="cssFloat"),k?h.setProperty(C,G):h[C]=G}}var bt=yt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ht(h,g){if(g){if(bt[h]&&(g.children!=null||g.dangerouslySetInnerHTML!=null))throw Error(i(137,h));if(g.dangerouslySetInnerHTML!=null){if(g.children!=null)throw Error(i(60));if(typeof g.dangerouslySetInnerHTML!="object"||!("__html"in g.dangerouslySetInnerHTML))throw Error(i(61))}if(g.style!=null&&typeof g.style!="object")throw Error(i(62))}}function Ft(h,g){if(h.indexOf("-")===-1)return typeof g.is=="string";switch(h){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var cr=null;function Jt(h){return h=h.target||h.srcElement||window,h.correspondingUseElement&&(h=h.correspondingUseElement),h.nodeType===3?h.parentNode:h}var fr=null,rn=null,Tr=null;function mt(h){if(h=Ra(h)){if(typeof fr!="function")throw Error(i(280));var g=h.stateNode;g&&(g=HA(g),fr(h.stateNode,h.type,g))}}function tn(h){rn?Tr?Tr.push(h):Tr=[h]:rn=h}function Qr(){if(rn){var h=rn,g=Tr;if(Tr=rn=null,mt(h),g)for(h=0;h<g.length;h++)mt(g[h])}}function gr(h,g){return h(g)}function $r(){}var Rn=!1;function xr(h,g,C){if(Rn)return h(g,C);Rn=!0;try{return gr(h,g,C)}finally{Rn=!1,(rn!==null||Tr!==null)&&($r(),Qr())}}function Tn(h,g){var C=h.stateNode;if(C===null)return null;var k=HA(C);if(k===null)return null;C=k[g];e:switch(g){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(k=!k.disabled)||(h=h.type,k=!(h==="button"||h==="input"||h==="select"||h==="textarea")),h=!k;break e;default:h=!1}if(h)return null;if(C&&typeof C!="function")throw Error(i(231,g,typeof C));return C}var Bn=!1;if(o)try{var xn={};Object.defineProperty(xn,"passive",{get:function(){Bn=!0}}),window.addEventListener("test",xn,xn),window.removeEventListener("test",xn,xn)}catch{Bn=!1}function Ui(h,g,C,k,G,Y,xe,ht,xt){var jt=Array.prototype.slice.call(arguments,3);try{g.apply(C,jt)}catch(dr){this.onError(dr)}}var ai=!1,Yt=null,Zn=!1,$i=null,sl={onError:function(h){ai=!0,Yt=h}};function ns(h,g,C,k,G,Y,xe,ht,xt){ai=!1,Yt=null,Ui.apply(sl,arguments)}function pr(h,g,C,k,G,Y,xe,ht,xt){if(ns.apply(this,arguments),ai){if(ai){var jt=Yt;ai=!1,Yt=null}else throw Error(i(198));Zn||(Zn=!0,$i=jt)}}function nn(h){var g=h,C=h;if(h.alternate)for(;g.return;)g=g.return;else{h=g;do g=h,(g.flags&4098)!==0&&(C=g.return),h=g.return;while(h)}return g.tag===3?C:null}function hn(h){if(h.tag===13){var g=h.memoizedState;if(g===null&&(h=h.alternate,h!==null&&(g=h.memoizedState)),g!==null)return g.dehydrated}return null}function Di(h){if(nn(h)!==h)throw Error(i(188))}function El(h){var g=h.alternate;if(!g){if(g=nn(h),g===null)throw Error(i(188));return g!==h?null:h}for(var C=h,k=g;;){var G=C.return;if(G===null)break;var Y=G.alternate;if(Y===null){if(k=G.return,k!==null){C=k;continue}break}if(G.child===Y.child){for(Y=G.child;Y;){if(Y===C)return Di(G),h;if(Y===k)return Di(G),g;Y=Y.sibling}throw Error(i(188))}if(C.return!==k.return)C=G,k=Y;else{for(var xe=!1,ht=G.child;ht;){if(ht===C){xe=!0,C=G,k=Y;break}if(ht===k){xe=!0,k=G,C=Y;break}ht=ht.sibling}if(!xe){for(ht=Y.child;ht;){if(ht===C){xe=!0,C=Y,k=G;break}if(ht===k){xe=!0,k=Y,C=G;break}ht=ht.sibling}if(!xe)throw Error(i(189))}}if(C.alternate!==k)throw Error(i(190))}if(C.tag!==3)throw Error(i(188));return C.stateNode.current===C?h:g}function ks(h){return h=El(h),h!==null?dn(h):null}function dn(h){if(h.tag===5||h.tag===6)return h;for(h=h.child;h!==null;){var g=dn(h);if(g!==null)return g;h=h.sibling}return null}var ol=r.unstable_scheduleCallback,al=r.unstable_cancelCallback,ec=r.unstable_shouldYield,Ec=r.unstable_requestPaint,fi=r.unstable_now,tc=r.unstable_getCurrentPriorityLevel,Sl=r.unstable_ImmediatePriority,Ci=r.unstable_UserBlockingPriority,jn=r.unstable_NormalPriority,rA=r.unstable_LowPriority,ll=r.unstable_IdlePriority,cl=null,Us=null;function Ro(h){if(Us&&typeof Us.onCommitFiberRoot=="function")try{Us.onCommitFiberRoot(cl,h,void 0,(h.current.flags&128)===128)}catch{}}var fs=Math.clz32?Math.clz32:Mn,Ba=Math.log,IA=Math.LN2;function Mn(h){return h>>>=0,h===0?32:31-(Ba(h)/IA|0)|0}var Sc=64,No=4194304;function Qo(h){switch(h&-h){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return h&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return h&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return h}}function Fc(h,g){var C=h.pendingLanes;if(C===0)return 0;var k=0,G=h.suspendedLanes,Y=h.pingedLanes,xe=C&268435455;if(xe!==0){var ht=xe&~G;ht!==0?k=Qo(ht):(Y&=xe,Y!==0&&(k=Qo(Y)))}else xe=C&~G,xe!==0?k=Qo(xe):Y!==0&&(k=Qo(Y));if(k===0)return 0;if(g!==0&&g!==k&&(g&G)===0&&(G=k&-k,Y=g&-g,G>=Y||G===16&&(Y&4194240)!==0))return g;if((k&4)!==0&&(k|=C&16),g=h.entangledLanes,g!==0)for(h=h.entanglements,g&=k;0<g;)C=31-fs(g),G=1<<C,k|=h[C],g&=~G;return k}function la(h,g){switch(h){case 1:case 2:case 4:return g+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return g+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ys(h,g){for(var C=h.suspendedLanes,k=h.pingedLanes,G=h.expirationTimes,Y=h.pendingLanes;0<Y;){var xe=31-fs(Y),ht=1<<xe,xt=G[xe];xt===-1?((ht&C)===0||(ht&k)!==0)&&(G[xe]=la(ht,g)):xt<=g&&(h.expiredLanes|=ht),Y&=~ht}}function Oo(h){return h=h.pendingLanes&-1073741825,h!==0?h:h&1073741824?1073741824:0}function nA(){var h=Sc;return Sc<<=1,(Sc&4194240)===0&&(Sc=64),h}function iA(h){for(var g=[],C=0;31>C;C++)g.push(h);return g}function rc(h,g,C){h.pendingLanes|=g,g!==536870912&&(h.suspendedLanes=0,h.pingedLanes=0),h=h.eventTimes,g=31-fs(g),h[g]=C}function Ca(h,g){var C=h.pendingLanes&~g;h.pendingLanes=g,h.suspendedLanes=0,h.pingedLanes=0,h.expiredLanes&=g,h.mutableReadLanes&=g,h.entangledLanes&=g,g=h.entanglements;var k=h.eventTimes;for(h=h.expirationTimes;0<C;){var G=31-fs(C),Y=1<<G;g[G]=0,k[G]=-1,h[G]=-1,C&=~Y}}function TA(h,g){var C=h.entangledLanes|=g;for(h=h.entanglements;C;){var k=31-fs(C),G=1<<k;G&g|h[k]&g&&(h[k]|=g),C&=~G}}var Kn=0;function Fl(h){return h&=-h,1<h?4<h?(h&268435455)!==0?16:536870912:4:1}var nc,Il,PA,Ic,ca,Al=!1,an=[],Ea=null,zo=null,Ho=null,vs=new Map,Wr=new Map,Jn=[],cn="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function ii(h,g){switch(h){case"focusin":case"focusout":Ea=null;break;case"dragenter":case"dragleave":zo=null;break;case"mouseover":case"mouseout":Ho=null;break;case"pointerover":case"pointerout":vs.delete(g.pointerId);break;case"gotpointercapture":case"lostpointercapture":Wr.delete(g.pointerId)}}function _s(h,g,C,k,G,Y){return h===null||h.nativeEvent!==Y?(h={blockedOn:g,domEventName:C,eventSystemFlags:k,nativeEvent:Y,targetContainers:[G]},g!==null&&(g=Ra(g),g!==null&&Il(g)),h):(h.eventSystemFlags|=k,g=h.targetContainers,G!==null&&g.indexOf(G)===-1&&g.push(G),h)}function Wi(h,g,C,k,G){switch(g){case"focusin":return Ea=_s(Ea,h,g,C,k,G),!0;case"dragenter":return zo=_s(zo,h,g,C,k,G),!0;case"mouseover":return Ho=_s(Ho,h,g,C,k,G),!0;case"pointerover":var Y=G.pointerId;return vs.set(Y,_s(vs.get(Y)||null,h,g,C,k,G)),!0;case"gotpointercapture":return Y=G.pointerId,Wr.set(Y,_s(Wr.get(Y)||null,h,g,C,k,G)),!0}return!1}function uo(h){var g=Da(h.target);if(g!==null){var C=nn(g);if(C!==null){if(g=C.tag,g===13){if(g=hn(C),g!==null){h.blockedOn=g,ca(h.priority,function(){PA(C)});return}}else if(g===3&&C.stateNode.current.memoizedState.isDehydrated){h.blockedOn=C.tag===3?C.stateNode.containerInfo:null;return}}}h.blockedOn=null}function ws(h){if(h.blockedOn!==null)return!1;for(var g=h.targetContainers;0<g.length;){var C=sc(h.domEventName,h.eventSystemFlags,g[0],h.nativeEvent);if(C===null){C=h.nativeEvent;var k=new C.constructor(C.type,C);cr=k,C.target.dispatchEvent(k),cr=null}else return g=Ra(C),g!==null&&Il(g),h.blockedOn=C,!1;g.shift()}return!0}function Sa(h,g,C){ws(h)&&C.delete(g)}function Fa(){Al=!1,Ea!==null&&ws(Ea)&&(Ea=null),zo!==null&&ws(zo)&&(zo=null),Ho!==null&&ws(Ho)&&(Ho=null),vs.forEach(Sa),Wr.forEach(Sa)}function ti(h,g){h.blockedOn===g&&(h.blockedOn=null,Al||(Al=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,Fa)))}function Aa(h){function g(G){return ti(G,h)}if(0<an.length){ti(an[0],h);for(var C=1;C<an.length;C++){var k=an[C];k.blockedOn===h&&(k.blockedOn=null)}}for(Ea!==null&&ti(Ea,h),zo!==null&&ti(zo,h),Ho!==null&&ti(Ho,h),vs.forEach(g),Wr.forEach(g),C=0;C<Jn.length;C++)k=Jn[C],k.blockedOn===h&&(k.blockedOn=null);for(;0<Jn.length&&(C=Jn[0],C.blockedOn===null);)uo(C),C.blockedOn===null&&Jn.shift()}var Zi=de.ReactCurrentBatchConfig,ic=!0;function qs(h,g,C,k){var G=Kn,Y=Zi.transition;Zi.transition=null;try{Kn=1,jo(h,g,C,k)}finally{Kn=G,Zi.transition=Y}}function ul(h,g,C,k){var G=Kn,Y=Zi.transition;Zi.transition=null;try{Kn=4,jo(h,g,C,k)}finally{Kn=G,Zi.transition=Y}}function jo(h,g,C,k){if(ic){var G=sc(h,g,C,k);if(G===null)Qc(h,g,k,ua,C),ii(h,k);else if(Wi(G,h,g,C,k))k.stopPropagation();else if(ii(h,k),g&4&&-1<cn.indexOf(h)){for(;G!==null;){var Y=Ra(G);if(Y!==null&&nc(Y),Y=sc(h,g,C,k),Y===null&&Qc(h,g,k,ua,C),Y===G)break;G=Y}G!==null&&k.stopPropagation()}else Qc(h,g,k,null,C)}}var ua=null;function sc(h,g,C,k){if(ua=null,h=Jt(k),h=Da(h),h!==null)if(g=nn(h),g===null)h=null;else if(C=g.tag,C===13){if(h=hn(g),h!==null)return h;h=null}else if(C===3){if(g.stateNode.current.memoizedState.isDehydrated)return g.tag===3?g.stateNode.containerInfo:null;h=null}else g!==h&&(h=null);return ua=h,null}function ha(h){switch(h){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(tc()){case Sl:return 1;case Ci:return 4;case jn:case rA:return 16;case ll:return 536870912;default:return 16}default:return 16}}var Qn=null,Vo=null,En=null;function mn(){if(En)return En;var h,g=Vo,C=g.length,k,G="value"in Qn?Qn.value:Qn.textContent,Y=G.length;for(h=0;h<C&&g[h]===G[h];h++);var xe=C-h;for(k=1;k<=xe&&g[C-k]===G[Y-k];k++);return En=G.slice(h,1<k?1-k:void 0)}function Ia(h){var g=h.keyCode;return"charCode"in h?(h=h.charCode,h===0&&g===13&&(h=13)):h=g,h===10&&(h=13),32<=h||h===13?h:0}function bn(){return!0}function Go(){return!1}function Ei(h){function g(C,k,G,Y,xe){this._reactName=C,this._targetInst=G,this.type=k,this.nativeEvent=Y,this.target=xe,this.currentTarget=null;for(var ht in h)h.hasOwnProperty(ht)&&(C=h[ht],this[ht]=C?C(Y):Y[ht]);return this.isDefaultPrevented=(Y.defaultPrevented!=null?Y.defaultPrevented:Y.returnValue===!1)?bn:Go,this.isPropagationStopped=Go,this}return yt(g.prototype,{preventDefault:function(){this.defaultPrevented=!0;var C=this.nativeEvent;C&&(C.preventDefault?C.preventDefault():typeof C.returnValue!="unknown"&&(C.returnValue=!1),this.isDefaultPrevented=bn)},stopPropagation:function(){var C=this.nativeEvent;C&&(C.stopPropagation?C.stopPropagation():typeof C.cancelBubble!="unknown"&&(C.cancelBubble=!0),this.isPropagationStopped=bn)},persist:function(){},isPersistent:bn}),g}var ao={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(h){return h.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},da=Ei(ao),V=yt({},ao,{view:0,detail:0}),ye=Ei(V),tt,gt,It,Kt=yt({},V,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ta,button:0,buttons:0,relatedTarget:function(h){return h.relatedTarget===void 0?h.fromElement===h.srcElement?h.toElement:h.fromElement:h.relatedTarget},movementX:function(h){return"movementX"in h?h.movementX:(h!==It&&(It&&h.type==="mousemove"?(tt=h.screenX-It.screenX,gt=h.screenY-It.screenY):gt=tt=0,It=h),tt)},movementY:function(h){return"movementY"in h?h.movementY:gt}}),sr=Ei(Kt),Br=yt({},Kt,{dataTransfer:0}),Kr=Ei(Br),gn=yt({},V,{relatedTarget:0}),yn=Ei(gn),An=yt({},ao,{animationName:0,elapsedTime:0,pseudoElement:0}),Hi=Ei(An),is=yt({},ao,{clipboardData:function(h){return"clipboardData"in h?h.clipboardData:window.clipboardData}}),Si=Ei(is),Ds=yt({},ao,{data:0}),Li=Ei(Ds),xs={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Ko={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},fa={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function pa(h){var g=this.nativeEvent;return g.getModifierState?g.getModifierState(h):(h=fa[h])?!!g[h]:!1}function Ta(){return pa}var hl=yt({},V,{key:function(h){if(h.key){var g=xs[h.key]||h.key;if(g!=="Unidentified")return g}return h.type==="keypress"?(h=Ia(h),h===13?"Enter":String.fromCharCode(h)):h.type==="keydown"||h.type==="keyup"?Ko[h.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ta,charCode:function(h){return h.type==="keypress"?Ia(h):0},keyCode:function(h){return h.type==="keydown"||h.type==="keyup"?h.keyCode:0},which:function(h){return h.type==="keypress"?Ia(h):h.type==="keydown"||h.type==="keyup"?h.keyCode:0}}),Fi=Ei(hl),Tc=yt({},Kt,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ma=Ei(Tc),Pa=yt({},V,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ta}),Xi=Ei(Pa),sA=yt({},ao,{propertyName:0,elapsedTime:0,pseudoElement:0}),Tl=Ei(sA),ou=yt({},Kt,{deltaX:function(h){return"deltaX"in h?h.deltaX:"wheelDeltaX"in h?-h.wheelDeltaX:0},deltaY:function(h){return"deltaY"in h?h.deltaY:"wheelDeltaY"in h?-h.wheelDeltaY:"wheelDelta"in h?-h.wheelDelta:0},deltaZ:0,deltaMode:0}),Pl=Ei(ou),$s=[9,13,27,32],La=o&&"CompositionEvent"in window,dl=null;o&&"documentMode"in document&&(dl=document.documentMode);var LA=o&&"TextEvent"in window&&!dl,Bo=o&&(!La||dl&&8<dl&&11>=dl),Ll=" ",oA=!1;function aA(h,g){switch(h){case"keyup":return $s.indexOf(g.keyCode)!==-1;case"keydown":return g.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ml(h){return h=h.detail,typeof h=="object"&&"data"in h?h.data:null}var Ws=!1;function qo(h,g){switch(h){case"compositionend":return Ml(g);case"keypress":return g.which!==32?null:(oA=!0,Ll);case"textInput":return h=g.data,h===Ll&&oA?null:h;default:return null}}function Co(h,g){if(Ws)return h==="compositionend"||!La&&aA(h,g)?(h=mn(),En=Vo=Qn=null,Ws=!1,h):null;switch(h){case"paste":return null;case"keypress":if(!(g.ctrlKey||g.altKey||g.metaKey)||g.ctrlKey&&g.altKey){if(g.char&&1<g.char.length)return g.char;if(g.which)return String.fromCharCode(g.which)}return null;case"compositionend":return Bo&&g.locale!=="ko"?null:g.data;default:return null}}var ga={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function fl(h){var g=h&&h.nodeName&&h.nodeName.toLowerCase();return g==="input"?!!ga[h.type]:g==="textarea"}function Ma(h,g,C,k){tn(k),g=NA(g,"onChange"),0<g.length&&(C=new da("onChange","change",null,C,k),h.push({event:C,listeners:g}))}var oc=null,kl=null;function ss(h){lu(h,0)}function pl(h){var g=Na(h);if(or(g))return h}function ml(h,g){if(h==="change")return g}var ya=!1;if(o){var Pc;if(o){var Ul="oninput"in document;if(!Ul){var ho=document.createElement("div");ho.setAttribute("oninput","return;"),Ul=typeof ho.oninput=="function"}Pc=Ul}else Pc=!1;ya=Pc&&(!document.documentMode||9<document.documentMode)}function ac(){oc&&(oc.detachEvent("onpropertychange",gl),kl=oc=null)}function gl(h){if(h.propertyName==="value"&&pl(kl)){var g=[];Ma(g,kl,h,Jt(h)),xr(ss,g)}}function Dl(h,g,C){h==="focusin"?(ac(),oc=g,kl=C,oc.attachEvent("onpropertychange",gl)):h==="focusout"&&ac()}function Rl(h){if(h==="selectionchange"||h==="keyup"||h==="keydown")return pl(kl)}function Nl(h,g){if(h==="click")return pl(g)}function $o(h,g){if(h==="input"||h==="change")return pl(g)}function lc(h,g){return h===g&&(h!==0||1/h===1/g)||h!==h&&g!==g}var os=typeof Object.is=="function"?Object.is:lc;function Eo(h,g){if(os(h,g))return!0;if(typeof h!="object"||h===null||typeof g!="object"||g===null)return!1;var C=Object.keys(h),k=Object.keys(g);if(C.length!==k.length)return!1;for(k=0;k<C.length;k++){var G=C[k];if(!w.call(g,G)||!os(h[G],g[G]))return!1}return!0}function si(h){for(;h&&h.firstChild;)h=h.firstChild;return h}function _i(h,g){var C=si(h);h=0;for(var k;C;){if(C.nodeType===3){if(k=h+C.textContent.length,h<=g&&k>=g)return{node:C,offset:g-h};h=k}e:{for(;C;){if(C.nextSibling){C=C.nextSibling;break e}C=C.parentNode}C=void 0}C=si(C)}}function Yi(h,g){return h&&g?h===g?!0:h&&h.nodeType===3?!1:g&&g.nodeType===3?Yi(h,g.parentNode):"contains"in h?h.contains(g):h.compareDocumentPosition?!!(h.compareDocumentPosition(g)&16):!1:!1}function bs(){for(var h=window,g=Ar();g instanceof h.HTMLIFrameElement;){try{var C=typeof g.contentWindow.location.href=="string"}catch{C=!1}if(C)h=g.contentWindow;else break;g=Ar(h.document)}return g}function Pn(h){var g=h&&h.nodeName&&h.nodeName.toLowerCase();return g&&(g==="input"&&(h.type==="text"||h.type==="search"||h.type==="tel"||h.type==="url"||h.type==="password")||g==="textarea"||h.contentEditable==="true")}function Lc(h){var g=bs(),C=h.focusedElem,k=h.selectionRange;if(g!==C&&C&&C.ownerDocument&&Yi(C.ownerDocument.documentElement,C)){if(k!==null&&Pn(C)){if(g=k.start,h=k.end,h===void 0&&(h=g),"selectionStart"in C)C.selectionStart=g,C.selectionEnd=Math.min(h,C.value.length);else if(h=(g=C.ownerDocument||document)&&g.defaultView||window,h.getSelection){h=h.getSelection();var G=C.textContent.length,Y=Math.min(k.start,G);k=k.end===void 0?Y:Math.min(k.end,G),!h.extend&&Y>k&&(G=k,k=Y,Y=G),G=_i(C,Y);var xe=_i(C,k);G&&xe&&(h.rangeCount!==1||h.anchorNode!==G.node||h.anchorOffset!==G.offset||h.focusNode!==xe.node||h.focusOffset!==xe.offset)&&(g=g.createRange(),g.setStart(G.node,G.offset),h.removeAllRanges(),Y>k?(h.addRange(g),h.extend(xe.node,xe.offset)):(g.setEnd(xe.node,xe.offset),h.addRange(g)))}}for(g=[],h=C;h=h.parentNode;)h.nodeType===1&&g.push({element:h,left:h.scrollLeft,top:h.scrollTop});for(typeof C.focus=="function"&&C.focus(),C=0;C<g.length;C++)h=g[C],h.element.scrollLeft=h.left,h.element.scrollTop=h.top}}var cc=o&&"documentMode"in document&&11>=document.documentMode,ka=null,MA=null,Ua=null,Mc=!1;function kc(h,g,C){var k=C.window===C?C.document:C.nodeType===9?C:C.ownerDocument;Mc||ka==null||ka!==Ar(k)||(k=ka,"selectionStart"in k&&Pn(k)?k={start:k.selectionStart,end:k.selectionEnd}:(k=(k.ownerDocument&&k.ownerDocument.defaultView||window).getSelection(),k={anchorNode:k.anchorNode,anchorOffset:k.anchorOffset,focusNode:k.focusNode,focusOffset:k.focusOffset}),Ua&&Eo(Ua,k)||(Ua=k,k=NA(MA,"onSelect"),0<k.length&&(g=new da("onSelect","select",null,g,C),h.push({event:g,listeners:k}),g.target=ka)))}function fo(h,g){var C={};return C[h.toLowerCase()]=g.toLowerCase(),C["Webkit"+h]="webkit"+g,C["Moz"+h]="moz"+g,C}var Uc={animationend:fo("Animation","AnimationEnd"),animationiteration:fo("Animation","AnimationIteration"),animationstart:fo("Animation","AnimationStart"),transitionend:fo("Transition","TransitionEnd")},Dc={},au={};o&&(au=document.createElement("div").style,"AnimationEvent"in window||(delete Uc.animationend.animation,delete Uc.animationiteration.animation,delete Uc.animationstart.animation),"TransitionEvent"in window||delete Uc.transitionend.transition);function yl(h){if(Dc[h])return Dc[h];if(!Uc[h])return h;var g=Uc[h],C;for(C in g)if(g.hasOwnProperty(C)&&C in au)return Dc[h]=g[C];return h}var kA=yl("animationend"),UA=yl("animationiteration"),lA=yl("animationstart"),DA=yl("transitionend"),Uu=new Map,Rc="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function So(h,g){Uu.set(h,g),d(g,[h])}for(var cA=0;cA<Rc.length;cA++){var lo=Rc[cA],pn=lo.toLowerCase(),AA=lo[0].toUpperCase()+lo.slice(1);So(pn,"on"+AA)}So(kA,"onAnimationEnd"),So(UA,"onAnimationIteration"),So(lA,"onAnimationStart"),So("dblclick","onDoubleClick"),So("focusin","onFocus"),So("focusout","onBlur"),So(DA,"onTransitionEnd"),m("onMouseEnter",["mouseout","mouseover"]),m("onMouseLeave",["mouseout","mouseover"]),m("onPointerEnter",["pointerout","pointerover"]),m("onPointerLeave",["pointerout","pointerover"]),d("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),d("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),d("onBeforeInput",["compositionend","keypress","textInput","paste"]),d("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),d("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),d("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Nc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),ch=new Set("cancel close invalid load scroll toggle".split(" ").concat(Nc));function Ac(h,g,C){var k=h.type||"unknown-event";h.currentTarget=C,pr(k,g,void 0,h),h.currentTarget=null}function lu(h,g){g=(g&4)!==0;for(var C=0;C<h.length;C++){var k=h[C],G=k.event;k=k.listeners;e:{var Y=void 0;if(g)for(var xe=k.length-1;0<=xe;xe--){var ht=k[xe],xt=ht.instance,jt=ht.currentTarget;if(ht=ht.listener,xt!==Y&&G.isPropagationStopped())break e;Ac(G,ht,jt),Y=xt}else for(xe=0;xe<k.length;xe++){if(ht=k[xe],xt=ht.instance,jt=ht.currentTarget,ht=ht.listener,xt!==Y&&G.isPropagationStopped())break e;Ac(G,ht,jt),Y=xt}}}if(Zn)throw h=$i,Zn=!1,$i=null,h}function Ii(h,g){var C=g[Zs];C===void 0&&(C=g[Zs]=new Set);var k=h+"__bubble";C.has(k)||(Ql(g,h,2,!1),C.add(k))}function cu(h,g,C){var k=0;g&&(k|=4),Ql(C,h,k,g)}var RA="_reactListening"+Math.random().toString(36).slice(2);function uc(h){if(!h[RA]){h[RA]=!0,a.forEach(function(C){C!=="selectionchange"&&(ch.has(C)||cu(C,!1,h),cu(C,!0,h))});var g=h.nodeType===9?h:h.ownerDocument;g===null||g[RA]||(g[RA]=!0,cu("selectionchange",!1,g))}}function Ql(h,g,C,k){switch(ha(g)){case 1:var G=qs;break;case 4:G=ul;break;default:G=jo}C=G.bind(null,g,C,h),G=void 0,!Bn||g!=="touchstart"&&g!=="touchmove"&&g!=="wheel"||(G=!0),k?G!==void 0?h.addEventListener(g,C,{capture:!0,passive:G}):h.addEventListener(g,C,!0):G!==void 0?h.addEventListener(g,C,{passive:G}):h.addEventListener(g,C,!1)}function Qc(h,g,C,k,G){var Y=k;if((g&1)===0&&(g&2)===0&&k!==null)e:for(;;){if(k===null)return;var xe=k.tag;if(xe===3||xe===4){var ht=k.stateNode.containerInfo;if(ht===G||ht.nodeType===8&&ht.parentNode===G)break;if(xe===4)for(xe=k.return;xe!==null;){var xt=xe.tag;if((xt===3||xt===4)&&(xt=xe.stateNode.containerInfo,xt===G||xt.nodeType===8&&xt.parentNode===G))return;xe=xe.return}for(;ht!==null;){if(xe=Da(ht),xe===null)return;if(xt=xe.tag,xt===5||xt===6){k=Y=xe;continue e}ht=ht.parentNode}}k=k.return}xr(function(){var jt=Y,dr=Jt(C),vr=[];e:{var hr=Uu.get(h);if(hr!==void 0){var Or=da,en=h;switch(h){case"keypress":if(Ia(C)===0)break e;case"keydown":case"keyup":Or=Fi;break;case"focusin":en="focus",Or=yn;break;case"focusout":en="blur",Or=yn;break;case"beforeblur":case"afterblur":Or=yn;break;case"click":if(C.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Or=sr;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Or=Kr;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Or=Xi;break;case kA:case UA:case lA:Or=Hi;break;case DA:Or=Tl;break;case"scroll":Or=ye;break;case"wheel":Or=Pl;break;case"copy":case"cut":case"paste":Or=Si;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Or=ma}var qr=(g&4)!==0,Ps=!qr&&h==="scroll",Nt=qr?hr!==null?hr+"Capture":null:hr;qr=[];for(var Et=jt,zt;Et!==null;){zt=Et;var Cr=zt.stateNode;if(zt.tag===5&&Cr!==null&&(zt=Cr,Nt!==null&&(Cr=Tn(Et,Nt),Cr!=null&&qr.push(Oc(Et,Cr,zt)))),Ps)break;Et=Et.return}0<qr.length&&(hr=new Or(hr,en,null,C,dr),vr.push({event:hr,listeners:qr}))}}if((g&7)===0){e:{if(hr=h==="mouseover"||h==="pointerover",Or=h==="mouseout"||h==="pointerout",hr&&C!==cr&&(en=C.relatedTarget||C.fromElement)&&(Da(en)||en[Rs]))break e;if((Or||hr)&&(hr=dr.window===dr?dr:(hr=dr.ownerDocument)?hr.defaultView||hr.parentWindow:window,Or?(en=C.relatedTarget||C.toElement,Or=jt,en=en?Da(en):null,en!==null&&(Ps=nn(en),en!==Ps||en.tag!==5&&en.tag!==6)&&(en=null)):(Or=null,en=jt),Or!==en)){if(qr=sr,Cr="onMouseLeave",Nt="onMouseEnter",Et="mouse",(h==="pointerout"||h==="pointerover")&&(qr=ma,Cr="onPointerLeave",Nt="onPointerEnter",Et="pointer"),Ps=Or==null?hr:Na(Or),zt=en==null?hr:Na(en),hr=new qr(Cr,Et+"leave",Or,C,dr),hr.target=Ps,hr.relatedTarget=zt,Cr=null,Da(dr)===jt&&(qr=new qr(Nt,Et+"enter",en,C,dr),qr.target=zt,qr.relatedTarget=Ps,Cr=qr),Ps=Cr,Or&&en)t:{for(qr=Or,Nt=en,Et=0,zt=qr;zt;zt=hc(zt))Et++;for(zt=0,Cr=Nt;Cr;Cr=hc(Cr))zt++;for(;0<Et-zt;)qr=hc(qr),Et--;for(;0<zt-Et;)Nt=hc(Nt),zt--;for(;Et--;){if(qr===Nt||Nt!==null&&qr===Nt.alternate)break t;qr=hc(qr),Nt=hc(Nt)}qr=null}else qr=null;Or!==null&&Au(vr,hr,Or,qr,!1),en!==null&&Ps!==null&&Au(vr,Ps,en,qr,!0)}}e:{if(hr=jt?Na(jt):window,Or=hr.nodeName&&hr.nodeName.toLowerCase(),Or==="select"||Or==="input"&&hr.type==="file")var ln=ml;else if(fl(hr))if(ya)ln=$o;else{ln=Rl;var _n=Dl}else(Or=hr.nodeName)&&Or.toLowerCase()==="input"&&(hr.type==="checkbox"||hr.type==="radio")&&(ln=Nl);if(ln&&(ln=ln(h,jt))){Ma(vr,ln,C,dr);break e}_n&&_n(h,hr,jt),h==="focusout"&&(_n=hr._wrapperState)&&_n.controlled&&hr.type==="number"&&lr(hr,"number",hr.value)}switch(_n=jt?Na(jt):window,h){case"focusin":(fl(_n)||_n.contentEditable==="true")&&(ka=_n,MA=jt,Ua=null);break;case"focusout":Ua=MA=ka=null;break;case"mousedown":Mc=!0;break;case"contextmenu":case"mouseup":case"dragend":Mc=!1,kc(vr,C,dr);break;case"selectionchange":if(cc)break;case"keydown":case"keyup":kc(vr,C,dr)}var wn;if(La)e:{switch(h){case"compositionstart":var Ln="onCompositionStart";break e;case"compositionend":Ln="onCompositionEnd";break e;case"compositionupdate":Ln="onCompositionUpdate";break e}Ln=void 0}else Ws?aA(h,C)&&(Ln="onCompositionEnd"):h==="keydown"&&C.keyCode===229&&(Ln="onCompositionStart");Ln&&(Bo&&C.locale!=="ko"&&(Ws||Ln!=="onCompositionStart"?Ln==="onCompositionEnd"&&Ws&&(wn=mn()):(Qn=dr,Vo="value"in Qn?Qn.value:Qn.textContent,Ws=!0)),_n=NA(jt,Ln),0<_n.length&&(Ln=new Li(Ln,h,null,C,dr),vr.push({event:Ln,listeners:_n}),wn?Ln.data=wn:(wn=Ml(C),wn!==null&&(Ln.data=wn)))),(wn=LA?qo(h,C):Co(h,C))&&(jt=NA(jt,"onBeforeInput"),0<jt.length&&(dr=new Li("onBeforeInput","beforeinput",null,C,dr),vr.push({event:dr,listeners:jt}),dr.data=wn))}lu(vr,g)})}function Oc(h,g,C){return{instance:h,listener:g,currentTarget:C}}function NA(h,g){for(var C=g+"Capture",k=[];h!==null;){var G=h,Y=G.stateNode;G.tag===5&&Y!==null&&(G=Y,Y=Tn(h,C),Y!=null&&k.unshift(Oc(h,Y,G)),Y=Tn(h,g),Y!=null&&k.push(Oc(h,Y,G))),h=h.return}return k}function hc(h){if(h===null)return null;do h=h.return;while(h&&h.tag!==5);return h||null}function Au(h,g,C,k,G){for(var Y=g._reactName,xe=[];C!==null&&C!==k;){var ht=C,xt=ht.alternate,jt=ht.stateNode;if(xt!==null&&xt===k)break;ht.tag===5&&jt!==null&&(ht=jt,G?(xt=Tn(C,Y),xt!=null&&xe.unshift(Oc(C,xt,ht))):G||(xt=Tn(C,Y),xt!=null&&xe.push(Oc(C,xt,ht)))),C=C.return}xe.length!==0&&h.push({event:g,listeners:xe})}var Du=/\r\n?/g,uA=/\u0000|\uFFFD/g;function zc(h){return(typeof h=="string"?h:""+h).replace(Du,`
`).replace(uA,"")}function QA(h,g,C){if(g=zc(g),zc(h)!==g&&C)throw Error(i(425))}function OA(){}var dc=null,hA=null;function Ru(h,g){return h==="textarea"||h==="noscript"||typeof g.children=="string"||typeof g.children=="number"||typeof g.dangerouslySetInnerHTML=="object"&&g.dangerouslySetInnerHTML!==null&&g.dangerouslySetInnerHTML.__html!=null}var dA=typeof setTimeout=="function"?setTimeout:void 0,uu=typeof clearTimeout=="function"?clearTimeout:void 0,Ah=typeof Promise=="function"?Promise:void 0,jh=typeof queueMicrotask=="function"?queueMicrotask:typeof Ah<"u"?function(h){return Ah.resolve(null).then(h).catch(hu)}:dA;function hu(h){setTimeout(function(){throw h})}function zA(h,g){var C=g,k=0;do{var G=C.nextSibling;if(h.removeChild(C),G&&G.nodeType===8)if(C=G.data,C==="/$"){if(k===0){h.removeChild(G),Aa(g);return}k--}else C!=="$"&&C!=="$?"&&C!=="$!"||k++;C=G}while(C);Aa(g)}function po(h){for(;h!=null;h=h.nextSibling){var g=h.nodeType;if(g===1||g===3)break;if(g===8){if(g=h.data,g==="$"||g==="$!"||g==="$?")break;if(g==="/$")return null}}return h}function va(h){h=h.previousSibling;for(var g=0;h;){if(h.nodeType===8){var C=h.data;if(C==="$"||C==="$!"||C==="$?"){if(g===0)return h;g--}else C==="/$"&&g++}h=h.previousSibling}return null}var $n=Math.random().toString(36).slice(2),mo="__reactFiber$"+$n,co="__reactProps$"+$n,Rs="__reactContainer$"+$n,Zs="__reactEvents$"+$n,Nu="__reactListeners$"+$n,Hc="__reactHandles$"+$n;function Da(h){var g=h[mo];if(g)return g;for(var C=h.parentNode;C;){if(g=C[Rs]||C[mo]){if(C=g.alternate,g.child!==null||C!==null&&C.child!==null)for(h=va(h);h!==null;){if(C=h[mo])return C;h=va(h)}return g}h=C,C=h.parentNode}return null}function Ra(h){return h=h[mo]||h[Rs],!h||h.tag!==5&&h.tag!==6&&h.tag!==13&&h.tag!==3?null:h}function Na(h){if(h.tag===5||h.tag===6)return h.stateNode;throw Error(i(33))}function HA(h){return h[co]||null}var Qu=[],Ol=-1;function Qa(h){return{current:h}}function li(h){0>Ol||(h.current=Qu[Ol],Qu[Ol]=null,Ol--)}function Xn(h,g){Ol++,Qu[Ol]=h.current,h.current=g}var zl={},Ns=Qa(zl),Xs=Qa(!1),jc=zl;function Vc(h,g){var C=h.type.contextTypes;if(!C)return zl;var k=h.stateNode;if(k&&k.__reactInternalMemoizedUnmaskedChildContext===g)return k.__reactInternalMemoizedMaskedChildContext;var G={},Y;for(Y in C)G[Y]=g[Y];return k&&(h=h.stateNode,h.__reactInternalMemoizedUnmaskedChildContext=g,h.__reactInternalMemoizedMaskedChildContext=G),G}function go(h){return h=h.childContextTypes,h!=null}function du(){li(Xs),li(Ns)}function Ou(h,g,C){if(Ns.current!==zl)throw Error(i(168));Xn(Ns,g),Xn(Xs,C)}function fA(h,g,C){var k=h.stateNode;if(g=g.childContextTypes,typeof k.getChildContext!="function")return C;k=k.getChildContext();for(var G in k)if(!(G in g))throw Error(i(108,et(h)||"Unknown",G));return yt({},C,k)}function Oa(h){return h=(h=h.stateNode)&&h.__reactInternalMemoizedMergedChildContext||zl,jc=Ns.current,Xn(Ns,h),Xn(Xs,Xs.current),!0}function _a(h,g,C){var k=h.stateNode;if(!k)throw Error(i(169));C?(h=fA(h,g,jc),k.__reactInternalMemoizedMergedChildContext=h,li(Xs),li(Ns),Xn(Ns,h)):li(Xs),Xn(Xs,C)}var Qs=null,jA=!1,T=!1;function R(h){Qs===null?Qs=[h]:Qs.push(h)}function $(h){jA=!0,R(h)}function re(){if(!T&&Qs!==null){T=!0;var h=0,g=Kn;try{var C=Qs;for(Kn=1;h<C.length;h++){var k=C[h];do k=k(!0);while(k!==null)}Qs=null,jA=!1}catch(G){throw Qs!==null&&(Qs=Qs.slice(h+1)),ol(Sl,re),G}finally{Kn=g,T=!1}}return null}var ge=[],we=0,Se=null,Me=0,Re=[],Ke=0,$e=null,kt=1,Ye="";function Bt(h,g){ge[we++]=Me,ge[we++]=Se,Se=h,Me=g}function Pt(h,g,C){Re[Ke++]=kt,Re[Ke++]=Ye,Re[Ke++]=$e,$e=h;var k=kt;h=Ye;var G=32-fs(k)-1;k&=~(1<<G),C+=1;var Y=32-fs(g)+G;if(30<Y){var xe=G-G%5;Y=(k&(1<<xe)-1).toString(32),k>>=xe,G-=xe,kt=1<<32-fs(g)+G|C<<G|k,Ye=Y+h}else kt=1<<Y|C<<G|k,Ye=h}function Zt(h){h.return!==null&&(Bt(h,1),Pt(h,1,0))}function Ut(h){for(;h===Se;)Se=ge[--we],ge[we]=null,Me=ge[--we],ge[we]=null;for(;h===$e;)$e=Re[--Ke],Re[Ke]=null,Ye=Re[--Ke],Re[Ke]=null,kt=Re[--Ke],Re[Ke]=null}var qt=null,Wt=null,tr=!1,er=null;function sn(h,g){var C=_c(5,null,null,0);C.elementType="DELETED",C.stateNode=g,C.return=h,g=h.deletions,g===null?(h.deletions=[C],h.flags|=16):g.push(C)}function zr(h,g){switch(h.tag){case 5:var C=h.type;return g=g.nodeType!==1||C.toLowerCase()!==g.nodeName.toLowerCase()?null:g,g!==null?(h.stateNode=g,qt=h,Wt=po(g.firstChild),!0):!1;case 6:return g=h.pendingProps===""||g.nodeType!==3?null:g,g!==null?(h.stateNode=g,qt=h,Wt=null,!0):!1;case 13:return g=g.nodeType!==8?null:g,g!==null?(C=$e!==null?{id:kt,overflow:Ye}:null,h.memoizedState={dehydrated:g,treeContext:C,retryLane:1073741824},C=_c(18,null,null,0),C.stateNode=g,C.return=h,h.child=C,qt=h,Wt=null,!0):!1;default:return!1}}function Cn(h){return(h.mode&1)!==0&&(h.flags&128)===0}function Zr(h){if(tr){var g=Wt;if(g){var C=g;if(!zr(h,g)){if(Cn(h))throw Error(i(418));g=po(C.nextSibling);var k=qt;g&&zr(h,g)?sn(k,C):(h.flags=h.flags&-4097|2,tr=!1,qt=h)}}else{if(Cn(h))throw Error(i(418));h.flags=h.flags&-4097|2,tr=!1,qt=h}}}function On(h){for(h=h.return;h!==null&&h.tag!==5&&h.tag!==3&&h.tag!==13;)h=h.return;qt=h}function Ri(h){if(h!==qt)return!1;if(!tr)return On(h),tr=!0,!1;var g;if((g=h.tag!==3)&&!(g=h.tag!==5)&&(g=h.type,g=g!=="head"&&g!=="body"&&!Ru(h.type,h.memoizedProps)),g&&(g=Wt)){if(Cn(h))throw Sn(),Error(i(418));for(;g;)sn(h,g),g=po(g.nextSibling)}if(On(h),h.tag===13){if(h=h.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(i(317));e:{for(h=h.nextSibling,g=0;h;){if(h.nodeType===8){var C=h.data;if(C==="/$"){if(g===0){Wt=po(h.nextSibling);break e}g--}else C!=="$"&&C!=="$!"&&C!=="$?"||g++}h=h.nextSibling}Wt=null}}else Wt=qt?po(h.stateNode.nextSibling):null;return!0}function Sn(){for(var h=Wt;h;)h=po(h.nextSibling)}function Hr(){Wt=qt=null,tr=!1}function Fr(h){er===null?er=[h]:er.push(h)}var pi=de.ReactCurrentBatchConfig;function Mr(h,g,C){if(h=C.ref,h!==null&&typeof h!="function"&&typeof h!="object"){if(C._owner){if(C=C._owner,C){if(C.tag!==1)throw Error(i(309));var k=C.stateNode}if(!k)throw Error(i(147,h));var G=k,Y=""+h;return g!==null&&g.ref!==null&&typeof g.ref=="function"&&g.ref._stringRef===Y?g.ref:(g=function(xe){var ht=G.refs;xe===null?delete ht[Y]:ht[Y]=xe},g._stringRef=Y,g)}if(typeof h!="string")throw Error(i(284));if(!C._owner)throw Error(i(290,h))}return h}function zn(h,g){throw h=Object.prototype.toString.call(g),Error(i(31,h==="[object Object]"?"object with keys {"+Object.keys(g).join(", ")+"}":h))}function mi(h){var g=h._init;return g(h._payload)}function as(h){function g(Nt,Et){if(h){var zt=Nt.deletions;zt===null?(Nt.deletions=[Et],Nt.flags|=16):zt.push(Et)}}function C(Nt,Et){if(!h)return null;for(;Et!==null;)g(Nt,Et),Et=Et.sibling;return null}function k(Nt,Et){for(Nt=new Map;Et!==null;)Et.key!==null?Nt.set(Et.key,Et):Nt.set(Et.index,Et),Et=Et.sibling;return Nt}function G(Nt,Et){return Nt=yu(Nt,Et),Nt.index=0,Nt.sibling=null,Nt}function Y(Nt,Et,zt){return Nt.index=zt,h?(zt=Nt.alternate,zt!==null?(zt=zt.index,zt<Et?(Nt.flags|=2,Et):zt):(Nt.flags|=2,Et)):(Nt.flags|=1048576,Et)}function xe(Nt){return h&&Nt.alternate===null&&(Nt.flags|=2),Nt}function ht(Nt,Et,zt,Cr){return Et===null||Et.tag!==6?(Et=Vp(zt,Nt.mode,Cr),Et.return=Nt,Et):(Et=G(Et,zt),Et.return=Nt,Et)}function xt(Nt,Et,zt,Cr){var ln=zt.type;return ln===Xe?dr(Nt,Et,zt.props.children,Cr,zt.key):Et!==null&&(Et.elementType===ln||typeof ln=="object"&&ln!==null&&ln.$$typeof===it&&mi(ln)===Et.type)?(Cr=G(Et,zt.props),Cr.ref=Mr(Nt,Et,zt),Cr.return=Nt,Cr):(Cr=Nd(zt.type,zt.key,zt.props,null,Nt.mode,Cr),Cr.ref=Mr(Nt,Et,zt),Cr.return=Nt,Cr)}function jt(Nt,Et,zt,Cr){return Et===null||Et.tag!==4||Et.stateNode.containerInfo!==zt.containerInfo||Et.stateNode.implementation!==zt.implementation?(Et=Bf(zt,Nt.mode,Cr),Et.return=Nt,Et):(Et=G(Et,zt.children||[]),Et.return=Nt,Et)}function dr(Nt,Et,zt,Cr,ln){return Et===null||Et.tag!==7?(Et=Eh(zt,Nt.mode,Cr,ln),Et.return=Nt,Et):(Et=G(Et,zt),Et.return=Nt,Et)}function vr(Nt,Et,zt){if(typeof Et=="string"&&Et!==""||typeof Et=="number")return Et=Vp(""+Et,Nt.mode,zt),Et.return=Nt,Et;if(typeof Et=="object"&&Et!==null){switch(Et.$$typeof){case Pe:return zt=Nd(Et.type,Et.key,Et.props,null,Nt.mode,zt),zt.ref=Mr(Nt,null,Et),zt.return=Nt,zt;case He:return Et=Bf(Et,Nt.mode,zt),Et.return=Nt,Et;case it:var Cr=Et._init;return vr(Nt,Cr(Et._payload),zt)}if(Gr(Et)||Ne(Et))return Et=Eh(Et,Nt.mode,zt,null),Et.return=Nt,Et;zn(Nt,Et)}return null}function hr(Nt,Et,zt,Cr){var ln=Et!==null?Et.key:null;if(typeof zt=="string"&&zt!==""||typeof zt=="number")return ln!==null?null:ht(Nt,Et,""+zt,Cr);if(typeof zt=="object"&&zt!==null){switch(zt.$$typeof){case Pe:return zt.key===ln?xt(Nt,Et,zt,Cr):null;case He:return zt.key===ln?jt(Nt,Et,zt,Cr):null;case it:return ln=zt._init,hr(Nt,Et,ln(zt._payload),Cr)}if(Gr(zt)||Ne(zt))return ln!==null?null:dr(Nt,Et,zt,Cr,null);zn(Nt,zt)}return null}function Or(Nt,Et,zt,Cr,ln){if(typeof Cr=="string"&&Cr!==""||typeof Cr=="number")return Nt=Nt.get(zt)||null,ht(Et,Nt,""+Cr,ln);if(typeof Cr=="object"&&Cr!==null){switch(Cr.$$typeof){case Pe:return Nt=Nt.get(Cr.key===null?zt:Cr.key)||null,xt(Et,Nt,Cr,ln);case He:return Nt=Nt.get(Cr.key===null?zt:Cr.key)||null,jt(Et,Nt,Cr,ln);case it:var _n=Cr._init;return Or(Nt,Et,zt,_n(Cr._payload),ln)}if(Gr(Cr)||Ne(Cr))return Nt=Nt.get(zt)||null,dr(Et,Nt,Cr,ln,null);zn(Et,Cr)}return null}function en(Nt,Et,zt,Cr){for(var ln=null,_n=null,wn=Et,Ln=Et=0,Po=null;wn!==null&&Ln<zt.length;Ln++){wn.index>Ln?(Po=wn,wn=null):Po=wn.sibling;var vi=hr(Nt,wn,zt[Ln],Cr);if(vi===null){wn===null&&(wn=Po);break}h&&wn&&vi.alternate===null&&g(Nt,wn),Et=Y(vi,Et,Ln),_n===null?ln=vi:_n.sibling=vi,_n=vi,wn=Po}if(Ln===zt.length)return C(Nt,wn),tr&&Bt(Nt,Ln),ln;if(wn===null){for(;Ln<zt.length;Ln++)wn=vr(Nt,zt[Ln],Cr),wn!==null&&(Et=Y(wn,Et,Ln),_n===null?ln=wn:_n.sibling=wn,_n=wn);return tr&&Bt(Nt,Ln),ln}for(wn=k(Nt,wn);Ln<zt.length;Ln++)Po=Or(wn,Nt,Ln,zt[Ln],Cr),Po!==null&&(h&&Po.alternate!==null&&wn.delete(Po.key===null?Ln:Po.key),Et=Y(Po,Et,Ln),_n===null?ln=Po:_n.sibling=Po,_n=Po);return h&&wn.forEach(function(Za){return g(Nt,Za)}),tr&&Bt(Nt,Ln),ln}function qr(Nt,Et,zt,Cr){var ln=Ne(zt);if(typeof ln!="function")throw Error(i(150));if(zt=ln.call(zt),zt==null)throw Error(i(151));for(var _n=ln=null,wn=Et,Ln=Et=0,Po=null,vi=zt.next();wn!==null&&!vi.done;Ln++,vi=zt.next()){wn.index>Ln?(Po=wn,wn=null):Po=wn.sibling;var Za=hr(Nt,wn,vi.value,Cr);if(Za===null){wn===null&&(wn=Po);break}h&&wn&&Za.alternate===null&&g(Nt,wn),Et=Y(Za,Et,Ln),_n===null?ln=Za:_n.sibling=Za,_n=Za,wn=Po}if(vi.done)return C(Nt,wn),tr&&Bt(Nt,Ln),ln;if(wn===null){for(;!vi.done;Ln++,vi=zt.next())vi=vr(Nt,vi.value,Cr),vi!==null&&(Et=Y(vi,Et,Ln),_n===null?ln=vi:_n.sibling=vi,_n=vi);return tr&&Bt(Nt,Ln),ln}for(wn=k(Nt,wn);!vi.done;Ln++,vi=zt.next())vi=Or(wn,Nt,Ln,vi.value,Cr),vi!==null&&(h&&vi.alternate!==null&&wn.delete(vi.key===null?Ln:vi.key),Et=Y(vi,Et,Ln),_n===null?ln=vi:_n.sibling=vi,_n=vi);return h&&wn.forEach(function($u){return g(Nt,$u)}),tr&&Bt(Nt,Ln),ln}function Ps(Nt,Et,zt,Cr){if(typeof zt=="object"&&zt!==null&&zt.type===Xe&&zt.key===null&&(zt=zt.props.children),typeof zt=="object"&&zt!==null){switch(zt.$$typeof){case Pe:e:{for(var ln=zt.key,_n=Et;_n!==null;){if(_n.key===ln){if(ln=zt.type,ln===Xe){if(_n.tag===7){C(Nt,_n.sibling),Et=G(_n,zt.props.children),Et.return=Nt,Nt=Et;break e}}else if(_n.elementType===ln||typeof ln=="object"&&ln!==null&&ln.$$typeof===it&&mi(ln)===_n.type){C(Nt,_n.sibling),Et=G(_n,zt.props),Et.ref=Mr(Nt,_n,zt),Et.return=Nt,Nt=Et;break e}C(Nt,_n);break}else g(Nt,_n);_n=_n.sibling}zt.type===Xe?(Et=Eh(zt.props.children,Nt.mode,Cr,zt.key),Et.return=Nt,Nt=Et):(Cr=Nd(zt.type,zt.key,zt.props,null,Nt.mode,Cr),Cr.ref=Mr(Nt,Et,zt),Cr.return=Nt,Nt=Cr)}return xe(Nt);case He:e:{for(_n=zt.key;Et!==null;){if(Et.key===_n)if(Et.tag===4&&Et.stateNode.containerInfo===zt.containerInfo&&Et.stateNode.implementation===zt.implementation){C(Nt,Et.sibling),Et=G(Et,zt.children||[]),Et.return=Nt,Nt=Et;break e}else{C(Nt,Et);break}else g(Nt,Et);Et=Et.sibling}Et=Bf(zt,Nt.mode,Cr),Et.return=Nt,Nt=Et}return xe(Nt);case it:return _n=zt._init,Ps(Nt,Et,_n(zt._payload),Cr)}if(Gr(zt))return en(Nt,Et,zt,Cr);if(Ne(zt))return qr(Nt,Et,zt,Cr);zn(Nt,zt)}return typeof zt=="string"&&zt!==""||typeof zt=="number"?(zt=""+zt,Et!==null&&Et.tag===6?(C(Nt,Et.sibling),Et=G(Et,zt),Et.return=Nt,Nt=Et):(C(Nt,Et),Et=Vp(zt,Nt.mode,Cr),Et.return=Nt,Nt=Et),xe(Nt)):C(Nt,Et)}return Ps}var ls=as(!0),Ni=as(!1),Bs=Qa(null),Cs=null,Qi=null,Fn=null;function Yn(){Fn=Qi=Cs=null}function yr(h){var g=Bs.current;li(Bs),h._currentValue=g}function br(h,g,C){for(;h!==null;){var k=h.alternate;if((h.childLanes&g)!==g?(h.childLanes|=g,k!==null&&(k.childLanes|=g)):k!==null&&(k.childLanes&g)!==g&&(k.childLanes|=g),h===C)break;h=h.return}}function Ti(h,g){Cs=h,Fn=Qi=null,h=h.dependencies,h!==null&&h.firstContext!==null&&((h.lanes&g)!==0&&(qa=!0),h.firstContext=null)}function ji(h){var g=h._currentValue;if(Fn!==h)if(h={context:h,memoizedValue:g,next:null},Qi===null){if(Cs===null)throw Error(i(308));Qi=h,Cs.dependencies={lanes:0,firstContext:h}}else Qi=Qi.next=h;return g}var ei=null;function ci(h){ei===null?ei=[h]:ei.push(h)}function Nn(h,g,C,k){var G=g.interleaved;return G===null?(C.next=C,ci(g)):(C.next=G.next,G.next=C),g.interleaved=C,wi(h,k)}function wi(h,g){h.lanes|=g;var C=h.alternate;for(C!==null&&(C.lanes|=g),C=h,h=h.return;h!==null;)h.childLanes|=g,C=h.alternate,C!==null&&(C.childLanes|=g),C=h,h=h.return;return C.tag===3?C.stateNode:null}var Es=!1;function Ys(h){h.updateQueue={baseState:h.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Fo(h,g){h=h.updateQueue,g.updateQueue===h&&(g.updateQueue={baseState:h.baseState,firstBaseUpdate:h.firstBaseUpdate,lastBaseUpdate:h.lastBaseUpdate,shared:h.shared,effects:h.effects})}function Mi(h,g){return{eventTime:h,lane:g,tag:0,payload:null,callback:null,next:null}}function In(h,g,C){var k=h.updateQueue;if(k===null)return null;if(k=k.shared,(yi&2)!==0){var G=k.pending;return G===null?g.next=g:(g.next=G.next,G.next=g),k.pending=g,wi(h,C)}return G=k.interleaved,G===null?(g.next=g,ci(k)):(g.next=G.next,G.next=g),k.interleaved=g,wi(h,C)}function Vn(h,g,C){if(g=g.updateQueue,g!==null&&(g=g.shared,(C&4194240)!==0)){var k=g.lanes;k&=h.pendingLanes,C|=k,g.lanes=C,TA(h,C)}}function xi(h,g){var C=h.updateQueue,k=h.alternate;if(k!==null&&(k=k.updateQueue,C===k)){var G=null,Y=null;if(C=C.firstBaseUpdate,C!==null){do{var xe={eventTime:C.eventTime,lane:C.lane,tag:C.tag,payload:C.payload,callback:C.callback,next:null};Y===null?G=Y=xe:Y=Y.next=xe,C=C.next}while(C!==null);Y===null?G=Y=g:Y=Y.next=g}else G=Y=g;C={baseState:k.baseState,firstBaseUpdate:G,lastBaseUpdate:Y,shared:k.shared,effects:k.effects},h.updateQueue=C;return}h=C.lastBaseUpdate,h===null?C.firstBaseUpdate=g:h.next=g,C.lastBaseUpdate=g}function Ss(h,g,C,k){var G=h.updateQueue;Es=!1;var Y=G.firstBaseUpdate,xe=G.lastBaseUpdate,ht=G.shared.pending;if(ht!==null){G.shared.pending=null;var xt=ht,jt=xt.next;xt.next=null,xe===null?Y=jt:xe.next=jt,xe=xt;var dr=h.alternate;dr!==null&&(dr=dr.updateQueue,ht=dr.lastBaseUpdate,ht!==xe&&(ht===null?dr.firstBaseUpdate=jt:ht.next=jt,dr.lastBaseUpdate=xt))}if(Y!==null){var vr=G.baseState;xe=0,dr=jt=xt=null,ht=Y;do{var hr=ht.lane,Or=ht.eventTime;if((k&hr)===hr){dr!==null&&(dr=dr.next={eventTime:Or,lane:0,tag:ht.tag,payload:ht.payload,callback:ht.callback,next:null});e:{var en=h,qr=ht;switch(hr=g,Or=C,qr.tag){case 1:if(en=qr.payload,typeof en=="function"){vr=en.call(Or,vr,hr);break e}vr=en;break e;case 3:en.flags=en.flags&-65537|128;case 0:if(en=qr.payload,hr=typeof en=="function"?en.call(Or,vr,hr):en,hr==null)break e;vr=yt({},vr,hr);break e;case 2:Es=!0}}ht.callback!==null&&ht.lane!==0&&(h.flags|=64,hr=G.effects,hr===null?G.effects=[ht]:hr.push(ht))}else Or={eventTime:Or,lane:hr,tag:ht.tag,payload:ht.payload,callback:ht.callback,next:null},dr===null?(jt=dr=Or,xt=vr):dr=dr.next=Or,xe|=hr;if(ht=ht.next,ht===null){if(ht=G.shared.pending,ht===null)break;hr=ht,ht=hr.next,hr.next=null,G.lastBaseUpdate=hr,G.shared.pending=null}}while(!0);if(dr===null&&(xt=vr),G.baseState=xt,G.firstBaseUpdate=jt,G.lastBaseUpdate=dr,g=G.shared.interleaved,g!==null){G=g;do xe|=G.lane,G=G.next;while(G!==g)}else Y===null&&(G.shared.lanes=0);zi|=xe,h.lanes=xe,h.memoizedState=vr}}function Io(h,g,C){if(h=g.effects,g.effects=null,h!==null)for(g=0;g<h.length;g++){var k=h[g],G=k.callback;if(G!==null){if(k.callback=null,k=C,typeof G!="function")throw Error(i(191,G));G.call(k)}}}var Js={},Fs=Qa(Js),Ji=Qa(Js),za=Qa(Js);function Ha(h){if(h===Js)throw Error(i(174));return h}function Gc(h,g){switch(Xn(za,g),Xn(Ji,h),Xn(Fs,Js),h=g.nodeType,h){case 9:case 11:g=(g=g.documentElement)?g.namespaceURI:fe(null,"");break;default:h=h===8?g.parentNode:g,g=h.namespaceURI||null,h=h.tagName,g=fe(g,h)}li(Fs),Xn(Fs,g)}function ja(){li(Fs),li(Ji),li(za)}function Hl(h){Ha(za.current);var g=Ha(Fs.current),C=fe(g,h.type);g!==C&&(Xn(Ji,h),Xn(Fs,C))}function VA(h){Ji.current===h&&(li(Fs),li(Ji))}var gi=Qa(0);function Wo(h){for(var g=h;g!==null;){if(g.tag===13){var C=g.memoizedState;if(C!==null&&(C=C.dehydrated,C===null||C.data==="$?"||C.data==="$!"))return g}else if(g.tag===19&&g.memoizedProps.revealOrder!==void 0){if((g.flags&128)!==0)return g}else if(g.child!==null){g.child.return=g,g=g.child;continue}if(g===h)break;for(;g.sibling===null;){if(g.return===null||g.return===h)return null;g=g.return}g.sibling.return=g.return,g=g.sibling}return null}var pA=[];function fu(){for(var h=0;h<pA.length;h++)pA[h]._workInProgressVersionPrimary=null;pA.length=0}var jl=de.ReactCurrentDispatcher,Vl=de.ReactCurrentBatchConfig,Va=0,bi=null,ki=null,es=null,Kc=!1,Ga=!1,qc=0,x=0;function n(){throw Error(i(321))}function c(h,g){if(g===null)return!1;for(var C=0;C<g.length&&C<h.length;C++)if(!os(h[C],g[C]))return!1;return!0}function f(h,g,C,k,G,Y){if(Va=Y,bi=g,g.memoizedState=null,g.updateQueue=null,g.lanes=0,jl.current=h===null||h.memoizedState===null?Gi:eo,h=C(k,G),Ga){Y=0;do{if(Ga=!1,qc=0,25<=Y)throw Error(i(301));Y+=1,es=ki=null,g.updateQueue=null,jl.current=Ts,h=C(k,G)}while(Ga)}if(jl.current=Is,g=ki!==null&&ki.next!==null,Va=0,es=ki=bi=null,Kc=!1,g)throw Error(i(300));return h}function y(){var h=qc!==0;return qc=0,h}function b(){var h={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return es===null?bi.memoizedState=es=h:es=es.next=h,es}function S(){if(ki===null){var h=bi.alternate;h=h!==null?h.memoizedState:null}else h=ki.next;var g=es===null?bi.memoizedState:es.next;if(g!==null)es=g,ki=h;else{if(h===null)throw Error(i(310));ki=h,h={memoizedState:ki.memoizedState,baseState:ki.baseState,baseQueue:ki.baseQueue,queue:ki.queue,next:null},es===null?bi.memoizedState=es=h:es=es.next=h}return es}function M(h,g){return typeof g=="function"?g(h):g}function N(h){var g=S(),C=g.queue;if(C===null)throw Error(i(311));C.lastRenderedReducer=h;var k=ki,G=k.baseQueue,Y=C.pending;if(Y!==null){if(G!==null){var xe=G.next;G.next=Y.next,Y.next=xe}k.baseQueue=G=Y,C.pending=null}if(G!==null){Y=G.next,k=k.baseState;var ht=xe=null,xt=null,jt=Y;do{var dr=jt.lane;if((Va&dr)===dr)xt!==null&&(xt=xt.next={lane:0,action:jt.action,hasEagerState:jt.hasEagerState,eagerState:jt.eagerState,next:null}),k=jt.hasEagerState?jt.eagerState:h(k,jt.action);else{var vr={lane:dr,action:jt.action,hasEagerState:jt.hasEagerState,eagerState:jt.eagerState,next:null};xt===null?(ht=xt=vr,xe=k):xt=xt.next=vr,bi.lanes|=dr,zi|=dr}jt=jt.next}while(jt!==null&&jt!==Y);xt===null?xe=k:xt.next=ht,os(k,g.memoizedState)||(qa=!0),g.memoizedState=k,g.baseState=xe,g.baseQueue=xt,C.lastRenderedState=k}if(h=C.interleaved,h!==null){G=h;do Y=G.lane,bi.lanes|=Y,zi|=Y,G=G.next;while(G!==h)}else G===null&&(C.lanes=0);return[g.memoizedState,C.dispatch]}function j(h){var g=S(),C=g.queue;if(C===null)throw Error(i(311));C.lastRenderedReducer=h;var k=C.dispatch,G=C.pending,Y=g.memoizedState;if(G!==null){C.pending=null;var xe=G=G.next;do Y=h(Y,xe.action),xe=xe.next;while(xe!==G);os(Y,g.memoizedState)||(qa=!0),g.memoizedState=Y,g.baseQueue===null&&(g.baseState=Y),C.lastRenderedState=Y}return[Y,k]}function q(){}function ne(h,g){var C=bi,k=S(),G=g(),Y=!os(k.memoizedState,G);if(Y&&(k.memoizedState=G,qa=!0),k=k.queue,st(_e.bind(null,C,k,h),[h]),k.getSnapshot!==g||Y||es!==null&&es.memoizedState.tag&1){if(C.flags|=2048,Ge(9,ue.bind(null,C,k,G,g),void 0,null),ta===null)throw Error(i(349));(Va&30)!==0||te(C,g,G)}return G}function te(h,g,C){h.flags|=16384,h={getSnapshot:g,value:C},g=bi.updateQueue,g===null?(g={lastEffect:null,stores:null},bi.updateQueue=g,g.stores=[h]):(C=g.stores,C===null?g.stores=[h]:C.push(h))}function ue(h,g,C,k){g.value=C,g.getSnapshot=k,De(g)&&ze(h)}function _e(h,g,C){return C(function(){De(g)&&ze(h)})}function De(h){var g=h.getSnapshot;h=h.value;try{var C=g();return!os(h,C)}catch{return!0}}function ze(h){var g=wi(h,1);g!==null&&vc(g,h,1,-1)}function Oe(h){var g=b();return typeof h=="function"&&(h=h()),g.memoizedState=g.baseState=h,h={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:M,lastRenderedState:h},g.queue=h,h=h.dispatch=Oi.bind(null,bi,h),[g.memoizedState,h]}function Ge(h,g,C,k){return h={tag:h,create:g,destroy:C,deps:k,next:null},g=bi.updateQueue,g===null?(g={lastEffect:null,stores:null},bi.updateQueue=g,g.lastEffect=h.next=h):(C=g.lastEffect,C===null?g.lastEffect=h.next=h:(k=C.next,C.next=h,h.next=k,g.lastEffect=h)),h}function lt(){return S().memoizedState}function Ze(h,g,C,k){var G=b();bi.flags|=h,G.memoizedState=Ge(1|g,C,void 0,k===void 0?null:k)}function At(h,g,C,k){var G=S();k=k===void 0?null:k;var Y=void 0;if(ki!==null){var xe=ki.memoizedState;if(Y=xe.destroy,k!==null&&c(k,xe.deps)){G.memoizedState=Ge(g,C,Y,k);return}}bi.flags|=h,G.memoizedState=Ge(1|g,C,Y,k)}function ft(h,g){return Ze(8390656,8,h,g)}function st(h,g){return At(2048,8,h,g)}function wt(h,g){return At(4,2,h,g)}function Dt(h,g){return At(4,4,h,g)}function Lt(h,g){if(typeof g=="function")return h=h(),g(h),function(){g(null)};if(g!=null)return h=h(),g.current=h,function(){g.current=null}}function Rt(h,g,C){return C=C!=null?C.concat([h]):null,At(4,4,Lt.bind(null,g,h),C)}function Qt(){}function nr(h,g){var C=S();g=g===void 0?null:g;var k=C.memoizedState;return k!==null&&g!==null&&c(g,k[1])?k[0]:(C.memoizedState=[h,g],h)}function ur(h,g){var C=S();g=g===void 0?null:g;var k=C.memoizedState;return k!==null&&g!==null&&c(g,k[1])?k[0]:(h=h(),C.memoizedState=[h,g],h)}function rr(h,g,C){return(Va&21)===0?(h.baseState&&(h.baseState=!1,qa=!0),h.memoizedState=C):(os(C,g)||(C=nA(),bi.lanes|=C,zi|=C,h.baseState=!0),g)}function Rr(h,g){var C=Kn;Kn=C!==0&&4>C?C:4,h(!0);var k=Vl.transition;Vl.transition={};try{h(!1),g()}finally{Kn=C,Vl.transition=k}}function vn(){return S().memoizedState}function Ai(h,g,C){var k=Zc(h);if(C={lane:k,action:C,hasEagerState:!1,eagerState:null,next:null},ui(h))Vi(g,C);else if(C=Nn(h,g,C,k),C!==null){var G=Wa();vc(C,h,k,G),Pi(C,g,k)}}function Oi(h,g,C){var k=Zc(h),G={lane:k,action:C,hasEagerState:!1,eagerState:null,next:null};if(ui(h))Vi(g,G);else{var Y=h.alternate;if(h.lanes===0&&(Y===null||Y.lanes===0)&&(Y=g.lastRenderedReducer,Y!==null))try{var xe=g.lastRenderedState,ht=Y(xe,C);if(G.hasEagerState=!0,G.eagerState=ht,os(ht,xe)){var xt=g.interleaved;xt===null?(G.next=G,ci(g)):(G.next=xt.next,xt.next=G),g.interleaved=G;return}}catch{}finally{}C=Nn(h,g,G,k),C!==null&&(G=Wa(),vc(C,h,k,G),Pi(C,g,k))}}function ui(h){var g=h.alternate;return h===bi||g!==null&&g===bi}function Vi(h,g){Ga=Kc=!0;var C=h.pending;C===null?g.next=g:(g.next=C.next,C.next=g),h.pending=g}function Pi(h,g,C){if((C&4194240)!==0){var k=g.lanes;k&=h.pendingLanes,C|=k,g.lanes=C,TA(h,C)}}var Is={readContext:ji,useCallback:n,useContext:n,useEffect:n,useImperativeHandle:n,useInsertionEffect:n,useLayoutEffect:n,useMemo:n,useReducer:n,useRef:n,useState:n,useDebugValue:n,useDeferredValue:n,useTransition:n,useMutableSource:n,useSyncExternalStore:n,useId:n,unstable_isNewReconciler:!1},Gi={readContext:ji,useCallback:function(h,g){return b().memoizedState=[h,g===void 0?null:g],h},useContext:ji,useEffect:ft,useImperativeHandle:function(h,g,C){return C=C!=null?C.concat([h]):null,Ze(4194308,4,Lt.bind(null,g,h),C)},useLayoutEffect:function(h,g){return Ze(4194308,4,h,g)},useInsertionEffect:function(h,g){return Ze(4,2,h,g)},useMemo:function(h,g){var C=b();return g=g===void 0?null:g,h=h(),C.memoizedState=[h,g],h},useReducer:function(h,g,C){var k=b();return g=C!==void 0?C(g):g,k.memoizedState=k.baseState=g,h={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:h,lastRenderedState:g},k.queue=h,h=h.dispatch=Ai.bind(null,bi,h),[k.memoizedState,h]},useRef:function(h){var g=b();return h={current:h},g.memoizedState=h},useState:Oe,useDebugValue:Qt,useDeferredValue:function(h){return b().memoizedState=h},useTransition:function(){var h=Oe(!1),g=h[0];return h=Rr.bind(null,h[1]),b().memoizedState=h,[g,h]},useMutableSource:function(){},useSyncExternalStore:function(h,g,C){var k=bi,G=b();if(tr){if(C===void 0)throw Error(i(407));C=C()}else{if(C=g(),ta===null)throw Error(i(349));(Va&30)!==0||te(k,g,C)}G.memoizedState=C;var Y={value:C,getSnapshot:g};return G.queue=Y,ft(_e.bind(null,k,Y,h),[h]),k.flags|=2048,Ge(9,ue.bind(null,k,Y,C,g),void 0,null),C},useId:function(){var h=b(),g=ta.identifierPrefix;if(tr){var C=Ye,k=kt;C=(k&~(1<<32-fs(k)-1)).toString(32)+C,g=":"+g+"R"+C,C=qc++,0<C&&(g+="H"+C.toString(32)),g+=":"}else C=x++,g=":"+g+"r"+C.toString(32)+":";return h.memoizedState=g},unstable_isNewReconciler:!1},eo={readContext:ji,useCallback:nr,useContext:ji,useEffect:st,useImperativeHandle:Rt,useInsertionEffect:wt,useLayoutEffect:Dt,useMemo:ur,useReducer:N,useRef:lt,useState:function(){return N(M)},useDebugValue:Qt,useDeferredValue:function(h){var g=S();return rr(g,ki.memoizedState,h)},useTransition:function(){var h=N(M)[0],g=S().memoizedState;return[h,g]},useMutableSource:q,useSyncExternalStore:ne,useId:vn,unstable_isNewReconciler:!1},Ts={readContext:ji,useCallback:nr,useContext:ji,useEffect:st,useImperativeHandle:Rt,useInsertionEffect:wt,useLayoutEffect:Dt,useMemo:ur,useReducer:j,useRef:lt,useState:function(){return j(M)},useDebugValue:Qt,useDeferredValue:function(h){var g=S();return ki===null?g.memoizedState=h:rr(g,ki.memoizedState,h)},useTransition:function(){var h=j(M)[0],g=S().memoizedState;return[h,g]},useMutableSource:q,useSyncExternalStore:ne,useId:vn,unstable_isNewReconciler:!1};function hi(h,g){if(h&&h.defaultProps){g=yt({},g),h=h.defaultProps;for(var C in h)g[C]===void 0&&(g[C]=h[C]);return g}return g}function Ao(h,g,C,k){g=h.memoizedState,C=C(k,g),C=C==null?g:yt({},g,C),h.memoizedState=C,h.lanes===0&&(h.updateQueue.baseState=C)}var yo={isMounted:function(h){return(h=h._reactInternals)?nn(h)===h:!1},enqueueSetState:function(h,g,C){h=h._reactInternals;var k=Wa(),G=Zc(h),Y=Mi(k,G);Y.payload=g,C!=null&&(Y.callback=C),g=In(h,Y,G),g!==null&&(vc(g,h,G,k),Vn(g,h,G))},enqueueReplaceState:function(h,g,C){h=h._reactInternals;var k=Wa(),G=Zc(h),Y=Mi(k,G);Y.tag=1,Y.payload=g,C!=null&&(Y.callback=C),g=In(h,Y,G),g!==null&&(vc(g,h,G,k),Vn(g,h,G))},enqueueForceUpdate:function(h,g){h=h._reactInternals;var C=Wa(),k=Zc(h),G=Mi(C,k);G.tag=2,g!=null&&(G.callback=g),g=In(h,G,k),g!==null&&(vc(g,h,k,C),Vn(g,h,k))}};function fc(h,g,C,k,G,Y,xe){return h=h.stateNode,typeof h.shouldComponentUpdate=="function"?h.shouldComponentUpdate(k,Y,xe):g.prototype&&g.prototype.isPureReactComponent?!Eo(C,k)||!Eo(G,Y):!0}function mA(h,g,C){var k=!1,G=zl,Y=g.contextType;return typeof Y=="object"&&Y!==null?Y=ji(Y):(G=go(g)?jc:Ns.current,k=g.contextTypes,Y=(k=k!=null)?Vc(h,G):zl),g=new g(C,Y),h.memoizedState=g.state!==null&&g.state!==void 0?g.state:null,g.updater=yo,h.stateNode=g,g._reactInternals=h,k&&(h=h.stateNode,h.__reactInternalMemoizedUnmaskedChildContext=G,h.__reactInternalMemoizedMaskedChildContext=Y),g}function GA(h,g,C,k){h=g.state,typeof g.componentWillReceiveProps=="function"&&g.componentWillReceiveProps(C,k),typeof g.UNSAFE_componentWillReceiveProps=="function"&&g.UNSAFE_componentWillReceiveProps(C,k),g.state!==h&&yo.enqueueReplaceState(g,g.state,null)}function zu(h,g,C,k){var G=h.stateNode;G.props=C,G.state=h.memoizedState,G.refs={},Ys(h);var Y=g.contextType;typeof Y=="object"&&Y!==null?G.context=ji(Y):(Y=go(g)?jc:Ns.current,G.context=Vc(h,Y)),G.state=h.memoizedState,Y=g.getDerivedStateFromProps,typeof Y=="function"&&(Ao(h,g,Y,C),G.state=h.memoizedState),typeof g.getDerivedStateFromProps=="function"||typeof G.getSnapshotBeforeUpdate=="function"||typeof G.UNSAFE_componentWillMount!="function"&&typeof G.componentWillMount!="function"||(g=G.state,typeof G.componentWillMount=="function"&&G.componentWillMount(),typeof G.UNSAFE_componentWillMount=="function"&&G.UNSAFE_componentWillMount(),g!==G.state&&yo.enqueueReplaceState(G,G.state,null),Ss(h,C,G,k),G.state=h.memoizedState),typeof G.componentDidMount=="function"&&(h.flags|=4194308)}function pc(h,g){try{var C="",k=g;do C+=Ve(k),k=k.return;while(k);var G=C}catch(Y){G=`
Error generating stack: `+Y.message+`
`+Y.stack}return{value:h,source:g,stack:G,digest:null}}function Gl(h,g,C){return{value:h,source:null,stack:C??null,digest:g??null}}function to(h,g){try{console.error(g.value)}catch(C){setTimeout(function(){throw C})}}var Zo=typeof WeakMap=="function"?WeakMap:Map;function vo(h,g,C){C=Mi(-1,C),C.tag=3,C.payload={element:null};var k=g.value;return C.callback=function(){Vu||(Vu=!0,Md=k),to(h,g)},C}function vl(h,g,C){C=Mi(-1,C),C.tag=3;var k=h.type.getDerivedStateFromError;if(typeof k=="function"){var G=g.value;C.payload=function(){return k(G)},C.callback=function(){to(h,g)}}var Y=h.stateNode;return Y!==null&&typeof Y.componentDidCatch=="function"&&(C.callback=function(){to(h,g),typeof k!="function"&&(gc===null?gc=new Set([this]):gc.add(this));var xe=g.stack;this.componentDidCatch(g.value,{componentStack:xe!==null?xe:""})}),C}function Os(h,g,C){var k=h.pingCache;if(k===null){k=h.pingCache=new Zo;var G=new Set;k.set(g,G)}else G=k.get(g),G===void 0&&(G=new Set,k.set(g,G));G.has(C)||(G.add(C),h=Dd.bind(null,h,g,C),g.then(h,h))}function ro(h){do{var g;if((g=h.tag===13)&&(g=h.memoizedState,g=g!==null?g.dehydrated!==null:!0),g)return h;h=h.return}while(h!==null);return null}function Ka(h,g,C,k,G){return(h.mode&1)===0?(h===g?h.flags|=65536:(h.flags|=128,C.flags|=131072,C.flags&=-52805,C.tag===1&&(C.alternate===null?C.tag=17:(g=Mi(-1,1),g.tag=2,In(C,g,1))),C.lanes|=1),h):(h.flags|=65536,h.lanes=G,h)}var cs=de.ReactCurrentOwner,qa=!1;function Xo(h,g,C,k){g.child=h===null?Ni(g,null,C,k):ls(g,h.child,C,k)}function Vh(h,g,C,k,G){C=C.render;var Y=g.ref;return Ti(g,G),k=f(h,g,C,k,Y,G),C=y(),h!==null&&!qa?(g.updateQueue=h.updateQueue,g.flags&=-2053,h.lanes&=~G,$c(h,g,G)):(tr&&C&&Zt(g),g.flags|=1,Xo(h,g,k,G),g.child)}function Sd(h,g,C,k,G){if(h===null){var Y=C.type;return typeof Y=="function"&&!Rd(Y)&&Y.defaultProps===void 0&&C.compare===null&&C.defaultProps===void 0?(g.tag=15,g.type=Y,KA(h,g,Y,k,G)):(h=Nd(C.type,null,k,g,g.mode,G),h.ref=g.ref,h.return=g,g.child=h)}if(Y=h.child,(h.lanes&G)===0){var xe=Y.memoizedProps;if(C=C.compare,C=C!==null?C:Eo,C(xe,k)&&h.ref===g.ref)return $c(h,g,G)}return g.flags|=1,h=yu(Y,k),h.ref=g.ref,h.return=g,g.child=h}function KA(h,g,C,k,G){if(h!==null){var Y=h.memoizedProps;if(Eo(Y,k)&&h.ref===g.ref)if(qa=!1,g.pendingProps=k=Y,(h.lanes&G)!==0)(h.flags&131072)!==0&&(qa=!0);else return g.lanes=h.lanes,$c(h,g,G)}return Gh(h,g,C,k,G)}function qA(h,g,C){var k=g.pendingProps,G=k.children,Y=h!==null?h.memoizedState:null;if(k.mode==="hidden")if((g.mode&1)===0)g.memoizedState={baseLanes:0,cachePool:null,transitions:null},Xn(gh,mc),mc|=C;else{if((C&1073741824)===0)return h=Y!==null?Y.baseLanes|C:C,g.lanes=g.childLanes=1073741824,g.memoizedState={baseLanes:h,cachePool:null,transitions:null},g.updateQueue=null,Xn(gh,mc),mc|=h,null;g.memoizedState={baseLanes:0,cachePool:null,transitions:null},k=Y!==null?Y.baseLanes:C,Xn(gh,mc),mc|=k}else Y!==null?(k=Y.baseLanes|C,g.memoizedState=null):k=C,Xn(gh,mc),mc|=k;return Xo(h,g,G,C),g.child}function gA(h,g){var C=g.ref;(h===null&&C!==null||h!==null&&h.ref!==C)&&(g.flags|=512,g.flags|=2097152)}function Gh(h,g,C,k,G){var Y=go(C)?jc:Ns.current;return Y=Vc(g,Y),Ti(g,G),C=f(h,g,C,k,Y,G),k=y(),h!==null&&!qa?(g.updateQueue=h.updateQueue,g.flags&=-2053,h.lanes&=~G,$c(h,g,G)):(tr&&k&&Zt(g),g.flags|=1,Xo(h,g,C,G),g.child)}function uh(h,g,C,k,G){if(go(C)){var Y=!0;Oa(g)}else Y=!1;if(Ti(g,G),g.stateNode===null)mh(h,g),mA(g,C,k),zu(g,C,k,G),k=!0;else if(h===null){var xe=g.stateNode,ht=g.memoizedProps;xe.props=ht;var xt=xe.context,jt=C.contextType;typeof jt=="object"&&jt!==null?jt=ji(jt):(jt=go(C)?jc:Ns.current,jt=Vc(g,jt));var dr=C.getDerivedStateFromProps,vr=typeof dr=="function"||typeof xe.getSnapshotBeforeUpdate=="function";vr||typeof xe.UNSAFE_componentWillReceiveProps!="function"&&typeof xe.componentWillReceiveProps!="function"||(ht!==k||xt!==jt)&&GA(g,xe,k,jt),Es=!1;var hr=g.memoizedState;xe.state=hr,Ss(g,k,xe,G),xt=g.memoizedState,ht!==k||hr!==xt||Xs.current||Es?(typeof dr=="function"&&(Ao(g,C,dr,k),xt=g.memoizedState),(ht=Es||fc(g,C,ht,k,hr,xt,jt))?(vr||typeof xe.UNSAFE_componentWillMount!="function"&&typeof xe.componentWillMount!="function"||(typeof xe.componentWillMount=="function"&&xe.componentWillMount(),typeof xe.UNSAFE_componentWillMount=="function"&&xe.UNSAFE_componentWillMount()),typeof xe.componentDidMount=="function"&&(g.flags|=4194308)):(typeof xe.componentDidMount=="function"&&(g.flags|=4194308),g.memoizedProps=k,g.memoizedState=xt),xe.props=k,xe.state=xt,xe.context=jt,k=ht):(typeof xe.componentDidMount=="function"&&(g.flags|=4194308),k=!1)}else{xe=g.stateNode,Fo(h,g),ht=g.memoizedProps,jt=g.type===g.elementType?ht:hi(g.type,ht),xe.props=jt,vr=g.pendingProps,hr=xe.context,xt=C.contextType,typeof xt=="object"&&xt!==null?xt=ji(xt):(xt=go(C)?jc:Ns.current,xt=Vc(g,xt));var Or=C.getDerivedStateFromProps;(dr=typeof Or=="function"||typeof xe.getSnapshotBeforeUpdate=="function")||typeof xe.UNSAFE_componentWillReceiveProps!="function"&&typeof xe.componentWillReceiveProps!="function"||(ht!==vr||hr!==xt)&&GA(g,xe,k,xt),Es=!1,hr=g.memoizedState,xe.state=hr,Ss(g,k,xe,G);var en=g.memoizedState;ht!==vr||hr!==en||Xs.current||Es?(typeof Or=="function"&&(Ao(g,C,Or,k),en=g.memoizedState),(jt=Es||fc(g,C,jt,k,hr,en,xt)||!1)?(dr||typeof xe.UNSAFE_componentWillUpdate!="function"&&typeof xe.componentWillUpdate!="function"||(typeof xe.componentWillUpdate=="function"&&xe.componentWillUpdate(k,en,xt),typeof xe.UNSAFE_componentWillUpdate=="function"&&xe.UNSAFE_componentWillUpdate(k,en,xt)),typeof xe.componentDidUpdate=="function"&&(g.flags|=4),typeof xe.getSnapshotBeforeUpdate=="function"&&(g.flags|=1024)):(typeof xe.componentDidUpdate!="function"||ht===h.memoizedProps&&hr===h.memoizedState||(g.flags|=4),typeof xe.getSnapshotBeforeUpdate!="function"||ht===h.memoizedProps&&hr===h.memoizedState||(g.flags|=1024),g.memoizedProps=k,g.memoizedState=en),xe.props=k,xe.state=en,xe.context=xt,k=jt):(typeof xe.componentDidUpdate!="function"||ht===h.memoizedProps&&hr===h.memoizedState||(g.flags|=4),typeof xe.getSnapshotBeforeUpdate!="function"||ht===h.memoizedProps&&hr===h.memoizedState||(g.flags|=1024),k=!1)}return hh(h,g,C,k,Y,G)}function hh(h,g,C,k,G,Y){gA(h,g);var xe=(g.flags&128)!==0;if(!k&&!xe)return G&&_a(g,C,!1),$c(h,g,Y);k=g.stateNode,cs.current=g;var ht=xe&&typeof C.getDerivedStateFromError!="function"?null:k.render();return g.flags|=1,h!==null&&xe?(g.child=ls(g,h.child,null,Y),g.child=ls(g,null,ht,Y)):Xo(h,g,ht,Y),g.memoizedState=k.state,G&&_a(g,C,!0),g.child}function pu(h){var g=h.stateNode;g.pendingContext?Ou(h,g.pendingContext,g.pendingContext!==g.context):g.context&&Ou(h,g.context,!1),Gc(h,g.containerInfo)}function Kh(h,g,C,k,G){return Hr(),Fr(G),g.flags|=256,Xo(h,g,C,k),g.child}var dh={dehydrated:null,treeContext:null,retryLane:0};function Fd(h){return{baseLanes:h,cachePool:null,transitions:null}}function rg(h,g,C){var k=g.pendingProps,G=gi.current,Y=!1,xe=(g.flags&128)!==0,ht;if((ht=xe)||(ht=h!==null&&h.memoizedState===null?!1:(G&2)!==0),ht?(Y=!0,g.flags&=-129):(h===null||h.memoizedState!==null)&&(G|=1),Xn(gi,G&1),h===null)return Zr(g),h=g.memoizedState,h!==null&&(h=h.dehydrated,h!==null)?((g.mode&1)===0?g.lanes=1:h.data==="$!"?g.lanes=8:g.lanes=1073741824,null):(xe=k.children,h=k.fallback,Y?(k=g.mode,Y=g.child,xe={mode:"hidden",children:xe},(k&1)===0&&Y!==null?(Y.childLanes=0,Y.pendingProps=xe):Y=Sh(xe,k,0,null),h=Eh(h,k,C,null),Y.return=g,h.return=g,Y.sibling=h,g.child=Y,g.child.memoizedState=Fd(C),g.memoizedState=dh,h):Id(g,xe));if(G=h.memoizedState,G!==null&&(ht=G.dehydrated,ht!==null))return ng(h,g,xe,k,ht,G,C);if(Y){Y=k.fallback,xe=g.mode,G=h.child,ht=G.sibling;var xt={mode:"hidden",children:k.children};return(xe&1)===0&&g.child!==G?(k=g.child,k.childLanes=0,k.pendingProps=xt,g.deletions=null):(k=yu(G,xt),k.subtreeFlags=G.subtreeFlags&14680064),ht!==null?Y=yu(ht,Y):(Y=Eh(Y,xe,C,null),Y.flags|=2),Y.return=g,k.return=g,k.sibling=Y,g.child=k,k=Y,Y=g.child,xe=h.child.memoizedState,xe=xe===null?Fd(C):{baseLanes:xe.baseLanes|C,cachePool:null,transitions:xe.transitions},Y.memoizedState=xe,Y.childLanes=h.childLanes&~C,g.memoizedState=dh,k}return Y=h.child,h=Y.sibling,k=yu(Y,{mode:"visible",children:k.children}),(g.mode&1)===0&&(k.lanes=C),k.return=g,k.sibling=null,h!==null&&(C=g.deletions,C===null?(g.deletions=[h],g.flags|=16):C.push(h)),g.child=k,g.memoizedState=null,k}function Id(h,g){return g=Sh({mode:"visible",children:g},h.mode,0,null),g.return=h,h.child=g}function Td(h,g,C,k){return k!==null&&Fr(k),ls(g,h.child,null,C),h=Id(g,g.pendingProps.children),h.flags|=2,g.memoizedState=null,h}function ng(h,g,C,k,G,Y,xe){if(C)return g.flags&256?(g.flags&=-257,k=Gl(Error(i(422))),Td(h,g,xe,k)):g.memoizedState!==null?(g.child=h.child,g.flags|=128,null):(Y=k.fallback,G=g.mode,k=Sh({mode:"visible",children:k.children},G,0,null),Y=Eh(Y,G,xe,null),Y.flags|=2,k.return=g,Y.return=g,k.sibling=Y,g.child=k,(g.mode&1)!==0&&ls(g,h.child,null,xe),g.child.memoizedState=Fd(xe),g.memoizedState=dh,Y);if((g.mode&1)===0)return Td(h,g,xe,null);if(G.data==="$!"){if(k=G.nextSibling&&G.nextSibling.dataset,k)var ht=k.dgst;return k=ht,Y=Error(i(419)),k=Gl(Y,k,void 0),Td(h,g,xe,k)}if(ht=(xe&h.childLanes)!==0,qa||ht){if(k=ta,k!==null){switch(xe&-xe){case 4:G=2;break;case 16:G=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:G=32;break;case 536870912:G=268435456;break;default:G=0}G=(G&(k.suspendedLanes|xe))!==0?0:G,G!==0&&G!==Y.retryLane&&(Y.retryLane=G,wi(h,G),vc(k,h,G,-1))}return wf(),k=Gl(Error(i(421))),Td(h,g,xe,k)}return G.data==="$?"?(g.flags|=128,g.child=h.child,g=nv.bind(null,h),G._reactRetry=g,null):(h=Y.treeContext,Wt=po(G.nextSibling),qt=g,tr=!0,er=null,h!==null&&(Re[Ke++]=kt,Re[Ke++]=Ye,Re[Ke++]=$e,kt=h.id,Ye=h.overflow,$e=g),g=Id(g,k.children),g.flags|=4096,g)}function fh(h,g,C){h.lanes|=g;var k=h.alternate;k!==null&&(k.lanes|=g),br(h.return,g,C)}function Fp(h,g,C,k,G){var Y=h.memoizedState;Y===null?h.memoizedState={isBackwards:g,rendering:null,renderingStartTime:0,last:k,tail:C,tailMode:G}:(Y.isBackwards=g,Y.rendering=null,Y.renderingStartTime=0,Y.last=k,Y.tail=C,Y.tailMode=G)}function ph(h,g,C){var k=g.pendingProps,G=k.revealOrder,Y=k.tail;if(Xo(h,g,k.children,C),k=gi.current,(k&2)!==0)k=k&1|2,g.flags|=128;else{if(h!==null&&(h.flags&128)!==0)e:for(h=g.child;h!==null;){if(h.tag===13)h.memoizedState!==null&&fh(h,C,g);else if(h.tag===19)fh(h,C,g);else if(h.child!==null){h.child.return=h,h=h.child;continue}if(h===g)break e;for(;h.sibling===null;){if(h.return===null||h.return===g)break e;h=h.return}h.sibling.return=h.return,h=h.sibling}k&=1}if(Xn(gi,k),(g.mode&1)===0)g.memoizedState=null;else switch(G){case"forwards":for(C=g.child,G=null;C!==null;)h=C.alternate,h!==null&&Wo(h)===null&&(G=C),C=C.sibling;C=G,C===null?(G=g.child,g.child=null):(G=C.sibling,C.sibling=null),Fp(g,!1,G,C,Y);break;case"backwards":for(C=null,G=g.child,g.child=null;G!==null;){if(h=G.alternate,h!==null&&Wo(h)===null){g.child=G;break}h=G.sibling,G.sibling=C,C=G,G=h}Fp(g,!0,C,null,Y);break;case"together":Fp(g,!1,null,null,void 0);break;default:g.memoizedState=null}return g.child}function mh(h,g){(g.mode&1)===0&&h!==null&&(h.alternate=null,g.alternate=null,g.flags|=2)}function $c(h,g,C){if(h!==null&&(g.dependencies=h.dependencies),zi|=g.lanes,(C&g.childLanes)===0)return null;if(h!==null&&g.child!==h.child)throw Error(i(153));if(g.child!==null){for(h=g.child,C=yu(h,h.pendingProps),g.child=C,C.return=g;h.sibling!==null;)h=h.sibling,C=C.sibling=yu(h,h.pendingProps),C.return=g;C.sibling=null}return g.child}function ev(h,g,C){switch(g.tag){case 3:pu(g),Hr();break;case 5:Hl(g);break;case 1:go(g.type)&&Oa(g);break;case 4:Gc(g,g.stateNode.containerInfo);break;case 10:var k=g.type._context,G=g.memoizedProps.value;Xn(Bs,k._currentValue),k._currentValue=G;break;case 13:if(k=g.memoizedState,k!==null)return k.dehydrated!==null?(Xn(gi,gi.current&1),g.flags|=128,null):(C&g.child.childLanes)!==0?rg(h,g,C):(Xn(gi,gi.current&1),h=$c(h,g,C),h!==null?h.sibling:null);Xn(gi,gi.current&1);break;case 19:if(k=(C&g.childLanes)!==0,(h.flags&128)!==0){if(k)return ph(h,g,C);g.flags|=128}if(G=g.memoizedState,G!==null&&(G.rendering=null,G.tail=null,G.lastEffect=null),Xn(gi,gi.current),k)break;return null;case 22:case 23:return g.lanes=0,qA(h,g,C)}return $c(h,g,C)}var ig,Ip,sg,og;ig=function(h,g){for(var C=g.child;C!==null;){if(C.tag===5||C.tag===6)h.appendChild(C.stateNode);else if(C.tag!==4&&C.child!==null){C.child.return=C,C=C.child;continue}if(C===g)break;for(;C.sibling===null;){if(C.return===null||C.return===g)return;C=C.return}C.sibling.return=C.return,C=C.sibling}},Ip=function(){},sg=function(h,g,C,k){var G=h.memoizedProps;if(G!==k){h=g.stateNode,Ha(Fs.current);var Y=null;switch(C){case"input":G=_r(h,G),k=_r(h,k),Y=[];break;case"select":G=yt({},G,{value:void 0}),k=yt({},k,{value:void 0}),Y=[];break;case"textarea":G=Nr(h,G),k=Nr(h,k),Y=[];break;default:typeof G.onClick!="function"&&typeof k.onClick=="function"&&(h.onclick=OA)}Ht(C,k);var xe;C=null;for(jt in G)if(!k.hasOwnProperty(jt)&&G.hasOwnProperty(jt)&&G[jt]!=null)if(jt==="style"){var ht=G[jt];for(xe in ht)ht.hasOwnProperty(xe)&&(C||(C={}),C[xe]="")}else jt!=="dangerouslySetInnerHTML"&&jt!=="children"&&jt!=="suppressContentEditableWarning"&&jt!=="suppressHydrationWarning"&&jt!=="autoFocus"&&(u.hasOwnProperty(jt)?Y||(Y=[]):(Y=Y||[]).push(jt,null));for(jt in k){var xt=k[jt];if(ht=G?.[jt],k.hasOwnProperty(jt)&&xt!==ht&&(xt!=null||ht!=null))if(jt==="style")if(ht){for(xe in ht)!ht.hasOwnProperty(xe)||xt&&xt.hasOwnProperty(xe)||(C||(C={}),C[xe]="");for(xe in xt)xt.hasOwnProperty(xe)&&ht[xe]!==xt[xe]&&(C||(C={}),C[xe]=xt[xe])}else C||(Y||(Y=[]),Y.push(jt,C)),C=xt;else jt==="dangerouslySetInnerHTML"?(xt=xt?xt.__html:void 0,ht=ht?ht.__html:void 0,xt!=null&&ht!==xt&&(Y=Y||[]).push(jt,xt)):jt==="children"?typeof xt!="string"&&typeof xt!="number"||(Y=Y||[]).push(jt,""+xt):jt!=="suppressContentEditableWarning"&&jt!=="suppressHydrationWarning"&&(u.hasOwnProperty(jt)?(xt!=null&&jt==="onScroll"&&Ii("scroll",h),Y||ht===xt||(Y=[])):(Y=Y||[]).push(jt,xt))}C&&(Y=Y||[]).push("style",C);var jt=Y;(g.updateQueue=jt)&&(g.flags|=4)}},og=function(h,g,C,k){C!==k&&(g.flags|=4)};function qh(h,g){if(!tr)switch(h.tailMode){case"hidden":g=h.tail;for(var C=null;g!==null;)g.alternate!==null&&(C=g),g=g.sibling;C===null?h.tail=null:C.sibling=null;break;case"collapsed":C=h.tail;for(var k=null;C!==null;)C.alternate!==null&&(k=C),C=C.sibling;k===null?g||h.tail===null?h.tail=null:h.tail.sibling=null:k.sibling=null}}function Yo(h){var g=h.alternate!==null&&h.alternate.child===h.child,C=0,k=0;if(g)for(var G=h.child;G!==null;)C|=G.lanes|G.childLanes,k|=G.subtreeFlags&14680064,k|=G.flags&14680064,G.return=h,G=G.sibling;else for(G=h.child;G!==null;)C|=G.lanes|G.childLanes,k|=G.subtreeFlags,k|=G.flags,G.return=h,G=G.sibling;return h.subtreeFlags|=k,h.childLanes=C,g}function ag(h,g,C){var k=g.pendingProps;switch(Ut(g),g.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Yo(g),null;case 1:return go(g.type)&&du(),Yo(g),null;case 3:return k=g.stateNode,ja(),li(Xs),li(Ns),fu(),k.pendingContext&&(k.context=k.pendingContext,k.pendingContext=null),(h===null||h.child===null)&&(Ri(g)?g.flags|=4:h===null||h.memoizedState.isDehydrated&&(g.flags&256)===0||(g.flags|=1024,er!==null&&(zp(er),er=null))),Ip(h,g),Yo(g),null;case 5:VA(g);var G=Ha(za.current);if(C=g.type,h!==null&&g.stateNode!=null)sg(h,g,C,k,G),h.ref!==g.ref&&(g.flags|=512,g.flags|=2097152);else{if(!k){if(g.stateNode===null)throw Error(i(166));return Yo(g),null}if(h=Ha(Fs.current),Ri(g)){k=g.stateNode,C=g.type;var Y=g.memoizedProps;switch(k[mo]=g,k[co]=Y,h=(g.mode&1)!==0,C){case"dialog":Ii("cancel",k),Ii("close",k);break;case"iframe":case"object":case"embed":Ii("load",k);break;case"video":case"audio":for(G=0;G<Nc.length;G++)Ii(Nc[G],k);break;case"source":Ii("error",k);break;case"img":case"image":case"link":Ii("error",k),Ii("load",k);break;case"details":Ii("toggle",k);break;case"input":je(k,Y),Ii("invalid",k);break;case"select":k._wrapperState={wasMultiple:!!Y.multiple},Ii("invalid",k);break;case"textarea":Dr(k,Y),Ii("invalid",k)}Ht(C,Y),G=null;for(var xe in Y)if(Y.hasOwnProperty(xe)){var ht=Y[xe];xe==="children"?typeof ht=="string"?k.textContent!==ht&&(Y.suppressHydrationWarning!==!0&&QA(k.textContent,ht,h),G=["children",ht]):typeof ht=="number"&&k.textContent!==""+ht&&(Y.suppressHydrationWarning!==!0&&QA(k.textContent,ht,h),G=["children",""+ht]):u.hasOwnProperty(xe)&&ht!=null&&xe==="onScroll"&&Ii("scroll",k)}switch(C){case"input":Gt(k),Vr(k,Y,!0);break;case"textarea":Gt(k),un(k);break;case"select":case"option":break;default:typeof Y.onClick=="function"&&(k.onclick=OA)}k=G,g.updateQueue=k,k!==null&&(g.flags|=4)}else{xe=G.nodeType===9?G:G.ownerDocument,h==="http://www.w3.org/1999/xhtml"&&(h=pt(C)),h==="http://www.w3.org/1999/xhtml"?C==="script"?(h=xe.createElement("div"),h.innerHTML="<script><\/script>",h=h.removeChild(h.firstChild)):typeof k.is=="string"?h=xe.createElement(C,{is:k.is}):(h=xe.createElement(C),C==="select"&&(xe=h,k.multiple?xe.multiple=!0:k.size&&(xe.size=k.size))):h=xe.createElementNS(h,C),h[mo]=g,h[co]=k,ig(h,g,!1,!1),g.stateNode=h;e:{switch(xe=Ft(C,k),C){case"dialog":Ii("cancel",h),Ii("close",h),G=k;break;case"iframe":case"object":case"embed":Ii("load",h),G=k;break;case"video":case"audio":for(G=0;G<Nc.length;G++)Ii(Nc[G],h);G=k;break;case"source":Ii("error",h),G=k;break;case"img":case"image":case"link":Ii("error",h),Ii("load",h),G=k;break;case"details":Ii("toggle",h),G=k;break;case"input":je(h,k),G=_r(h,k),Ii("invalid",h);break;case"option":G=k;break;case"select":h._wrapperState={wasMultiple:!!k.multiple},G=yt({},k,{value:void 0}),Ii("invalid",h);break;case"textarea":Dr(h,k),G=Nr(h,k),Ii("invalid",h);break;default:G=k}Ht(C,G),ht=G;for(Y in ht)if(ht.hasOwnProperty(Y)){var xt=ht[Y];Y==="style"?ct(h,xt):Y==="dangerouslySetInnerHTML"?(xt=xt?xt.__html:void 0,xt!=null&&ve(h,xt)):Y==="children"?typeof xt=="string"?(C!=="textarea"||xt!=="")&&qe(h,xt):typeof xt=="number"&&qe(h,""+xt):Y!=="suppressContentEditableWarning"&&Y!=="suppressHydrationWarning"&&Y!=="autoFocus"&&(u.hasOwnProperty(Y)?xt!=null&&Y==="onScroll"&&Ii("scroll",h):xt!=null&&ce(h,Y,xt,xe))}switch(C){case"input":Gt(h),Vr(h,k,!1);break;case"textarea":Gt(h),un(h);break;case"option":k.value!=null&&h.setAttribute("value",""+_t(k.value));break;case"select":h.multiple=!!k.multiple,Y=k.value,Y!=null?Er(h,!!k.multiple,Y,!1):k.defaultValue!=null&&Er(h,!!k.multiple,k.defaultValue,!0);break;default:typeof G.onClick=="function"&&(h.onclick=OA)}switch(C){case"button":case"input":case"select":case"textarea":k=!!k.autoFocus;break e;case"img":k=!0;break e;default:k=!1}}k&&(g.flags|=4)}g.ref!==null&&(g.flags|=512,g.flags|=2097152)}return Yo(g),null;case 6:if(h&&g.stateNode!=null)og(h,g,h.memoizedProps,k);else{if(typeof k!="string"&&g.stateNode===null)throw Error(i(166));if(C=Ha(za.current),Ha(Fs.current),Ri(g)){if(k=g.stateNode,C=g.memoizedProps,k[mo]=g,(Y=k.nodeValue!==C)&&(h=qt,h!==null))switch(h.tag){case 3:QA(k.nodeValue,C,(h.mode&1)!==0);break;case 5:h.memoizedProps.suppressHydrationWarning!==!0&&QA(k.nodeValue,C,(h.mode&1)!==0)}Y&&(g.flags|=4)}else k=(C.nodeType===9?C:C.ownerDocument).createTextNode(k),k[mo]=g,g.stateNode=k}return Yo(g),null;case 13:if(li(gi),k=g.memoizedState,h===null||h.memoizedState!==null&&h.memoizedState.dehydrated!==null){if(tr&&Wt!==null&&(g.mode&1)!==0&&(g.flags&128)===0)Sn(),Hr(),g.flags|=98560,Y=!1;else if(Y=Ri(g),k!==null&&k.dehydrated!==null){if(h===null){if(!Y)throw Error(i(318));if(Y=g.memoizedState,Y=Y!==null?Y.dehydrated:null,!Y)throw Error(i(317));Y[mo]=g}else Hr(),(g.flags&128)===0&&(g.memoizedState=null),g.flags|=4;Yo(g),Y=!1}else er!==null&&(zp(er),er=null),Y=!0;if(!Y)return g.flags&65536?g:null}return(g.flags&128)!==0?(g.lanes=C,g):(k=k!==null,k!==(h!==null&&h.memoizedState!==null)&&k&&(g.child.flags|=8192,(g.mode&1)!==0&&(h===null||(gi.current&1)!==0?zs===0&&(zs=3):wf())),g.updateQueue!==null&&(g.flags|=4),Yo(g),null);case 4:return ja(),Ip(h,g),h===null&&uc(g.stateNode.containerInfo),Yo(g),null;case 10:return yr(g.type._context),Yo(g),null;case 17:return go(g.type)&&du(),Yo(g),null;case 19:if(li(gi),Y=g.memoizedState,Y===null)return Yo(g),null;if(k=(g.flags&128)!==0,xe=Y.rendering,xe===null)if(k)qh(Y,!1);else{if(zs!==0||h!==null&&(h.flags&128)!==0)for(h=g.child;h!==null;){if(xe=Wo(h),xe!==null){for(g.flags|=128,qh(Y,!1),k=xe.updateQueue,k!==null&&(g.updateQueue=k,g.flags|=4),g.subtreeFlags=0,k=C,C=g.child;C!==null;)Y=C,h=k,Y.flags&=14680066,xe=Y.alternate,xe===null?(Y.childLanes=0,Y.lanes=h,Y.child=null,Y.subtreeFlags=0,Y.memoizedProps=null,Y.memoizedState=null,Y.updateQueue=null,Y.dependencies=null,Y.stateNode=null):(Y.childLanes=xe.childLanes,Y.lanes=xe.lanes,Y.child=xe.child,Y.subtreeFlags=0,Y.deletions=null,Y.memoizedProps=xe.memoizedProps,Y.memoizedState=xe.memoizedState,Y.updateQueue=xe.updateQueue,Y.type=xe.type,h=xe.dependencies,Y.dependencies=h===null?null:{lanes:h.lanes,firstContext:h.firstContext}),C=C.sibling;return Xn(gi,gi.current&1|2),g.child}h=h.sibling}Y.tail!==null&&fi()>vh&&(g.flags|=128,k=!0,qh(Y,!1),g.lanes=4194304)}else{if(!k)if(h=Wo(xe),h!==null){if(g.flags|=128,k=!0,C=h.updateQueue,C!==null&&(g.updateQueue=C,g.flags|=4),qh(Y,!0),Y.tail===null&&Y.tailMode==="hidden"&&!xe.alternate&&!tr)return Yo(g),null}else 2*fi()-Y.renderingStartTime>vh&&C!==1073741824&&(g.flags|=128,k=!0,qh(Y,!1),g.lanes=4194304);Y.isBackwards?(xe.sibling=g.child,g.child=xe):(C=Y.last,C!==null?C.sibling=xe:g.child=xe,Y.last=xe)}return Y.tail!==null?(g=Y.tail,Y.rendering=g,Y.tail=g.sibling,Y.renderingStartTime=fi(),g.sibling=null,C=gi.current,Xn(gi,k?C&1|2:C&1),g):(Yo(g),null);case 22:case 23:return _f(),k=g.memoizedState!==null,h!==null&&h.memoizedState!==null!==k&&(g.flags|=8192),k&&(g.mode&1)!==0?(mc&1073741824)!==0&&(Yo(g),g.subtreeFlags&6&&(g.flags|=8192)):Yo(g),null;case 24:return null;case 25:return null}throw Error(i(156,g.tag))}function lg(h,g){switch(Ut(g),g.tag){case 1:return go(g.type)&&du(),h=g.flags,h&65536?(g.flags=h&-65537|128,g):null;case 3:return ja(),li(Xs),li(Ns),fu(),h=g.flags,(h&65536)!==0&&(h&128)===0?(g.flags=h&-65537|128,g):null;case 5:return VA(g),null;case 13:if(li(gi),h=g.memoizedState,h!==null&&h.dehydrated!==null){if(g.alternate===null)throw Error(i(340));Hr()}return h=g.flags,h&65536?(g.flags=h&-65537|128,g):null;case 19:return li(gi),null;case 4:return ja(),null;case 10:return yr(g.type._context),null;case 22:case 23:return _f(),null;case 24:return null;default:return null}}var uf=!1,$a=!1,cg=typeof WeakSet=="function"?WeakSet:Set,Xr=null;function $h(h,g){var C=h.ref;if(C!==null)if(typeof C=="function")try{C(null)}catch(k){no(h,g,k)}else C.current=null}function Pd(h,g,C){try{C()}catch(k){no(h,g,k)}}var Tp=!1;function Pp(h,g){if(dc=ic,h=bs(),Pn(h)){if("selectionStart"in h)var C={start:h.selectionStart,end:h.selectionEnd};else e:{C=(C=h.ownerDocument)&&C.defaultView||window;var k=C.getSelection&&C.getSelection();if(k&&k.rangeCount!==0){C=k.anchorNode;var G=k.anchorOffset,Y=k.focusNode;k=k.focusOffset;try{C.nodeType,Y.nodeType}catch{C=null;break e}var xe=0,ht=-1,xt=-1,jt=0,dr=0,vr=h,hr=null;t:for(;;){for(var Or;vr!==C||G!==0&&vr.nodeType!==3||(ht=xe+G),vr!==Y||k!==0&&vr.nodeType!==3||(xt=xe+k),vr.nodeType===3&&(xe+=vr.nodeValue.length),(Or=vr.firstChild)!==null;)hr=vr,vr=Or;for(;;){if(vr===h)break t;if(hr===C&&++jt===G&&(ht=xe),hr===Y&&++dr===k&&(xt=xe),(Or=vr.nextSibling)!==null)break;vr=hr,hr=vr.parentNode}vr=Or}C=ht===-1||xt===-1?null:{start:ht,end:xt}}else C=null}C=C||{start:0,end:0}}else C=null;for(hA={focusedElem:h,selectionRange:C},ic=!1,Xr=g;Xr!==null;)if(g=Xr,h=g.child,(g.subtreeFlags&1028)!==0&&h!==null)h.return=g,Xr=h;else for(;Xr!==null;){g=Xr;try{var en=g.alternate;if((g.flags&1024)!==0)switch(g.tag){case 0:case 11:case 15:break;case 1:if(en!==null){var qr=en.memoizedProps,Ps=en.memoizedState,Nt=g.stateNode,Et=Nt.getSnapshotBeforeUpdate(g.elementType===g.type?qr:hi(g.type,qr),Ps);Nt.__reactInternalSnapshotBeforeUpdate=Et}break;case 3:var zt=g.stateNode.containerInfo;zt.nodeType===1?zt.textContent="":zt.nodeType===9&&zt.documentElement&&zt.removeChild(zt.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(i(163))}}catch(Cr){no(g,g.return,Cr)}if(h=g.sibling,h!==null){h.return=g.return,Xr=h;break}Xr=g.return}return en=Tp,Tp=!1,en}function mu(h,g,C){var k=g.updateQueue;if(k=k!==null?k.lastEffect:null,k!==null){var G=k=k.next;do{if((G.tag&h)===h){var Y=G.destroy;G.destroy=void 0,Y!==void 0&&Pd(g,C,Y)}G=G.next}while(G!==k)}}function Jo(h,g){if(g=g.updateQueue,g=g!==null?g.lastEffect:null,g!==null){var C=g=g.next;do{if((C.tag&h)===h){var k=C.create;C.destroy=k()}C=C.next}while(C!==g)}}function hf(h){var g=h.ref;if(g!==null){var C=h.stateNode;switch(h.tag){case 5:h=C;break;default:h=C}typeof g=="function"?g(h):g.current=h}}function df(h){var g=h.alternate;g!==null&&(h.alternate=null,df(g)),h.child=null,h.deletions=null,h.sibling=null,h.tag===5&&(g=h.stateNode,g!==null&&(delete g[mo],delete g[co],delete g[Zs],delete g[Nu],delete g[Hc])),h.stateNode=null,h.return=null,h.dependencies=null,h.memoizedProps=null,h.memoizedState=null,h.pendingProps=null,h.stateNode=null,h.updateQueue=null}function Ag(h){return h.tag===5||h.tag===3||h.tag===4}function Lp(h){e:for(;;){for(;h.sibling===null;){if(h.return===null||Ag(h.return))return null;h=h.return}for(h.sibling.return=h.return,h=h.sibling;h.tag!==5&&h.tag!==6&&h.tag!==18;){if(h.flags&2||h.child===null||h.tag===4)continue e;h.child.return=h,h=h.child}if(!(h.flags&2))return h.stateNode}}function Mp(h,g,C){var k=h.tag;if(k===5||k===6)h=h.stateNode,g?C.nodeType===8?C.parentNode.insertBefore(h,g):C.insertBefore(h,g):(C.nodeType===8?(g=C.parentNode,g.insertBefore(h,C)):(g=C,g.appendChild(h)),C=C._reactRootContainer,C!=null||g.onclick!==null||(g.onclick=OA));else if(k!==4&&(h=h.child,h!==null))for(Mp(h,g,C),h=h.sibling;h!==null;)Mp(h,g,C),h=h.sibling}function kp(h,g,C){var k=h.tag;if(k===5||k===6)h=h.stateNode,g?C.insertBefore(h,g):C.appendChild(h);else if(k!==4&&(h=h.child,h!==null))for(kp(h,g,C),h=h.sibling;h!==null;)kp(h,g,C),h=h.sibling}var ea=null,yA=!1;function $A(h,g,C){for(C=C.child;C!==null;)Up(h,g,C),C=C.sibling}function Up(h,g,C){if(Us&&typeof Us.onCommitFiberUnmount=="function")try{Us.onCommitFiberUnmount(cl,C)}catch{}switch(C.tag){case 5:$a||$h(C,g);case 6:var k=ea,G=yA;ea=null,$A(h,g,C),ea=k,yA=G,ea!==null&&(yA?(h=ea,C=C.stateNode,h.nodeType===8?h.parentNode.removeChild(C):h.removeChild(C)):ea.removeChild(C.stateNode));break;case 18:ea!==null&&(yA?(h=ea,C=C.stateNode,h.nodeType===8?zA(h.parentNode,C):h.nodeType===1&&zA(h,C),Aa(h)):zA(ea,C.stateNode));break;case 4:k=ea,G=yA,ea=C.stateNode.containerInfo,yA=!0,$A(h,g,C),ea=k,yA=G;break;case 0:case 11:case 14:case 15:if(!$a&&(k=C.updateQueue,k!==null&&(k=k.lastEffect,k!==null))){G=k=k.next;do{var Y=G,xe=Y.destroy;Y=Y.tag,xe!==void 0&&((Y&2)!==0||(Y&4)!==0)&&Pd(C,g,xe),G=G.next}while(G!==k)}$A(h,g,C);break;case 1:if(!$a&&($h(C,g),k=C.stateNode,typeof k.componentWillUnmount=="function"))try{k.props=C.memoizedProps,k.state=C.memoizedState,k.componentWillUnmount()}catch(ht){no(C,g,ht)}$A(h,g,C);break;case 21:$A(h,g,C);break;case 22:C.mode&1?($a=(k=$a)||C.memoizedState!==null,$A(h,g,C),$a=k):$A(h,g,C);break;default:$A(h,g,C)}}function Dp(h){var g=h.updateQueue;if(g!==null){h.updateQueue=null;var C=h.stateNode;C===null&&(C=h.stateNode=new cg),g.forEach(function(k){var G=iv.bind(null,h,k);C.has(k)||(C.add(k),k.then(G,G))})}}function vA(h,g){var C=g.deletions;if(C!==null)for(var k=0;k<C.length;k++){var G=C[k];try{var Y=h,xe=g,ht=xe;e:for(;ht!==null;){switch(ht.tag){case 5:ea=ht.stateNode,yA=!1;break e;case 3:ea=ht.stateNode.containerInfo,yA=!0;break e;case 4:ea=ht.stateNode.containerInfo,yA=!0;break e}ht=ht.return}if(ea===null)throw Error(i(160));Up(Y,xe,G),ea=null,yA=!1;var xt=G.alternate;xt!==null&&(xt.return=null),G.return=null}catch(jt){no(G,g,jt)}}if(g.subtreeFlags&12854)for(g=g.child;g!==null;)ug(g,h),g=g.sibling}function ug(h,g){var C=h.alternate,k=h.flags;switch(h.tag){case 0:case 11:case 14:case 15:if(vA(g,h),WA(h),k&4){try{mu(3,h,h.return),Jo(3,h)}catch(qr){no(h,h.return,qr)}try{mu(5,h,h.return)}catch(qr){no(h,h.return,qr)}}break;case 1:vA(g,h),WA(h),k&512&&C!==null&&$h(C,C.return);break;case 5:if(vA(g,h),WA(h),k&512&&C!==null&&$h(C,C.return),h.flags&32){var G=h.stateNode;try{qe(G,"")}catch(qr){no(h,h.return,qr)}}if(k&4&&(G=h.stateNode,G!=null)){var Y=h.memoizedProps,xe=C!==null?C.memoizedProps:Y,ht=h.type,xt=h.updateQueue;if(h.updateQueue=null,xt!==null)try{ht==="input"&&Y.type==="radio"&&Y.name!=null&&mr(G,Y),Ft(ht,xe);var jt=Ft(ht,Y);for(xe=0;xe<xt.length;xe+=2){var dr=xt[xe],vr=xt[xe+1];dr==="style"?ct(G,vr):dr==="dangerouslySetInnerHTML"?ve(G,vr):dr==="children"?qe(G,vr):ce(G,dr,vr,jt)}switch(ht){case"input":kr(G,Y);break;case"textarea":Dn(G,Y);break;case"select":var hr=G._wrapperState.wasMultiple;G._wrapperState.wasMultiple=!!Y.multiple;var Or=Y.value;Or!=null?Er(G,!!Y.multiple,Or,!1):hr!==!!Y.multiple&&(Y.defaultValue!=null?Er(G,!!Y.multiple,Y.defaultValue,!0):Er(G,!!Y.multiple,Y.multiple?[]:"",!1))}G[co]=Y}catch(qr){no(h,h.return,qr)}}break;case 6:if(vA(g,h),WA(h),k&4){if(h.stateNode===null)throw Error(i(162));G=h.stateNode,Y=h.memoizedProps;try{G.nodeValue=Y}catch(qr){no(h,h.return,qr)}}break;case 3:if(vA(g,h),WA(h),k&4&&C!==null&&C.memoizedState.isDehydrated)try{Aa(g.containerInfo)}catch(qr){no(h,h.return,qr)}break;case 4:vA(g,h),WA(h);break;case 13:vA(g,h),WA(h),G=h.child,G.flags&8192&&(Y=G.memoizedState!==null,G.stateNode.isHidden=Y,!Y||G.alternate!==null&&G.alternate.memoizedState!==null||(yh=fi())),k&4&&Dp(h);break;case 22:if(dr=C!==null&&C.memoizedState!==null,h.mode&1?($a=(jt=$a)||dr,vA(g,h),$a=jt):vA(g,h),WA(h),k&8192){if(jt=h.memoizedState!==null,(h.stateNode.isHidden=jt)&&!dr&&(h.mode&1)!==0)for(Xr=h,dr=h.child;dr!==null;){for(vr=Xr=dr;Xr!==null;){switch(hr=Xr,Or=hr.child,hr.tag){case 0:case 11:case 14:case 15:mu(4,hr,hr.return);break;case 1:$h(hr,hr.return);var en=hr.stateNode;if(typeof en.componentWillUnmount=="function"){k=hr,C=hr.return;try{g=k,en.props=g.memoizedProps,en.state=g.memoizedState,en.componentWillUnmount()}catch(qr){no(k,C,qr)}}break;case 5:$h(hr,hr.return);break;case 22:if(hr.memoizedState!==null){Hu(vr);continue}}Or!==null?(Or.return=hr,Xr=Or):Hu(vr)}dr=dr.sibling}e:for(dr=null,vr=h;;){if(vr.tag===5){if(dr===null){dr=vr;try{G=vr.stateNode,jt?(Y=G.style,typeof Y.setProperty=="function"?Y.setProperty("display","none","important"):Y.display="none"):(ht=vr.stateNode,xt=vr.memoizedProps.style,xe=xt!=null&&xt.hasOwnProperty("display")?xt.display:null,ht.style.display=vt("display",xe))}catch(qr){no(h,h.return,qr)}}}else if(vr.tag===6){if(dr===null)try{vr.stateNode.nodeValue=jt?"":vr.memoizedProps}catch(qr){no(h,h.return,qr)}}else if((vr.tag!==22&&vr.tag!==23||vr.memoizedState===null||vr===h)&&vr.child!==null){vr.child.return=vr,vr=vr.child;continue}if(vr===h)break e;for(;vr.sibling===null;){if(vr.return===null||vr.return===h)break e;dr===vr&&(dr=null),vr=vr.return}dr===vr&&(dr=null),vr.sibling.return=vr.return,vr=vr.sibling}}break;case 19:vA(g,h),WA(h),k&4&&Dp(h);break;case 21:break;default:vA(g,h),WA(h)}}function WA(h){var g=h.flags;if(g&2){try{e:{for(var C=h.return;C!==null;){if(Ag(C)){var k=C;break e}C=C.return}throw Error(i(160))}switch(k.tag){case 5:var G=k.stateNode;k.flags&32&&(qe(G,""),k.flags&=-33);var Y=Lp(h);kp(h,Y,G);break;case 3:case 4:var xe=k.stateNode.containerInfo,ht=Lp(h);Mp(h,ht,xe);break;default:throw Error(i(161))}}catch(xt){no(h,h.return,xt)}h.flags&=-3}g&4096&&(h.flags&=-4097)}function ff(h,g,C){Xr=h,pf(h)}function pf(h,g,C){for(var k=(h.mode&1)!==0;Xr!==null;){var G=Xr,Y=G.child;if(G.tag===22&&k){var xe=G.memoizedState!==null||uf;if(!xe){var ht=G.alternate,xt=ht!==null&&ht.memoizedState!==null||$a;ht=uf;var jt=$a;if(uf=xe,($a=xt)&&!jt)for(Xr=G;Xr!==null;)xe=Xr,xt=xe.child,xe.tag===22&&xe.memoizedState!==null?Wh(G):xt!==null?(xt.return=xe,Xr=xt):Wh(G);for(;Y!==null;)Xr=Y,pf(Y),Y=Y.sibling;Xr=G,uf=ht,$a=jt}Rp(h)}else(G.subtreeFlags&8772)!==0&&Y!==null?(Y.return=G,Xr=Y):Rp(h)}}function Rp(h){for(;Xr!==null;){var g=Xr;if((g.flags&8772)!==0){var C=g.alternate;try{if((g.flags&8772)!==0)switch(g.tag){case 0:case 11:case 15:$a||Jo(5,g);break;case 1:var k=g.stateNode;if(g.flags&4&&!$a)if(C===null)k.componentDidMount();else{var G=g.elementType===g.type?C.memoizedProps:hi(g.type,C.memoizedProps);k.componentDidUpdate(G,C.memoizedState,k.__reactInternalSnapshotBeforeUpdate)}var Y=g.updateQueue;Y!==null&&Io(g,Y,k);break;case 3:var xe=g.updateQueue;if(xe!==null){if(C=null,g.child!==null)switch(g.child.tag){case 5:C=g.child.stateNode;break;case 1:C=g.child.stateNode}Io(g,xe,C)}break;case 5:var ht=g.stateNode;if(C===null&&g.flags&4){C=ht;var xt=g.memoizedProps;switch(g.type){case"button":case"input":case"select":case"textarea":xt.autoFocus&&C.focus();break;case"img":xt.src&&(C.src=xt.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(g.memoizedState===null){var jt=g.alternate;if(jt!==null){var dr=jt.memoizedState;if(dr!==null){var vr=dr.dehydrated;vr!==null&&Aa(vr)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(i(163))}$a||g.flags&512&&hf(g)}catch(hr){no(g,g.return,hr)}}if(g===h){Xr=null;break}if(C=g.sibling,C!==null){C.return=g.return,Xr=C;break}Xr=g.return}}function Hu(h){for(;Xr!==null;){var g=Xr;if(g===h){Xr=null;break}var C=g.sibling;if(C!==null){C.return=g.return,Xr=C;break}Xr=g.return}}function Wh(h){for(;Xr!==null;){var g=Xr;try{switch(g.tag){case 0:case 11:case 15:var C=g.return;try{Jo(4,g)}catch(xt){no(g,C,xt)}break;case 1:var k=g.stateNode;if(typeof k.componentDidMount=="function"){var G=g.return;try{k.componentDidMount()}catch(xt){no(g,G,xt)}}var Y=g.return;try{hf(g)}catch(xt){no(g,Y,xt)}break;case 5:var xe=g.return;try{hf(g)}catch(xt){no(g,xe,xt)}}}catch(xt){no(g,g.return,xt)}if(g===h){Xr=null;break}var ht=g.sibling;if(ht!==null){ht.return=g.return,Xr=ht;break}Xr=g.return}}var tv=Math.ceil,mf=de.ReactCurrentDispatcher,Np=de.ReactCurrentOwner,Wc=de.ReactCurrentBatchConfig,yi=0,ta=null,_o=null,To=0,mc=0,gh=Qa(0),zs=0,Ld=null,zi=0,gu=0,gf=0,ju=null,wa=null,yh=0,vh=1/0,ZA=null,Vu=!1,Md=null,gc=null,_h=!1,yc=null,Gu=0,kd=0,yf=null,XA=-1,vf=0;function Wa(){return(yi&6)!==0?fi():XA!==-1?XA:XA=fi()}function Zc(h){return(h.mode&1)===0?1:(yi&2)!==0&&To!==0?To&-To:pi.transition!==null?(vf===0&&(vf=nA()),vf):(h=Kn,h!==0||(h=window.event,h=h===void 0?16:ha(h.type)),h)}function vc(h,g,C,k){if(50<kd)throw kd=0,yf=null,Error(i(185));rc(h,C,k),((yi&2)===0||h!==ta)&&(h===ta&&((yi&2)===0&&(gu|=C),zs===4&&Ku(h,To)),_l(h,k),C===1&&yi===0&&(g.mode&1)===0&&(vh=fi()+500,jA&&re()))}function _l(h,g){var C=h.callbackNode;ys(h,g);var k=Fc(h,h===ta?To:0);if(k===0)C!==null&&al(C),h.callbackNode=null,h.callbackPriority=0;else if(g=k&-k,h.callbackPriority!==g){if(C!=null&&al(C),g===1)h.tag===0?$(hg.bind(null,h)):R(hg.bind(null,h)),jh(function(){(yi&6)===0&&re()}),C=null;else{switch(Fl(k)){case 1:C=Sl;break;case 4:C=Ci;break;case 16:C=jn;break;case 536870912:C=ll;break;default:C=jn}C=vg(C,Qp.bind(null,h))}h.callbackPriority=g,h.callbackNode=C}}function Qp(h,g){if(XA=-1,vf=0,(yi&6)!==0)throw Error(i(327));var C=h.callbackNode;if(Ch()&&h.callbackNode!==C)return null;var k=Fc(h,h===ta?To:0);if(k===0)return null;if((k&30)!==0||(k&h.expiredLanes)!==0||g)g=xf(h,k);else{g=k;var G=yi;yi|=2;var Y=fg();(ta!==h||To!==g)&&(ZA=null,vh=fi()+500,bh(h,g));do try{Ud();break}catch(ht){dg(h,ht)}while(!0);Yn(),mf.current=Y,yi=G,_o!==null?g=0:(ta=null,To=0,g=zs)}if(g!==0){if(g===2&&(G=Oo(h),G!==0&&(k=G,g=Op(h,G))),g===1)throw C=Ld,bh(h,0),Ku(h,k),_l(h,fi()),C;if(g===6)Ku(h,k);else{if(G=h.current.alternate,(k&30)===0&&!rv(G)&&(g=xf(h,k),g===2&&(Y=Oo(h),Y!==0&&(k=Y,g=Op(h,Y))),g===1))throw C=Ld,bh(h,0),Ku(h,k),_l(h,fi()),C;switch(h.finishedWork=G,h.finishedLanes=k,g){case 0:case 1:throw Error(i(345));case 2:Bh(h,wa,ZA);break;case 3:if(Ku(h,k),(k&130023424)===k&&(g=yh+500-fi(),10<g)){if(Fc(h,0)!==0)break;if(G=h.suspendedLanes,(G&k)!==k){Wa(),h.pingedLanes|=h.suspendedLanes&G;break}h.timeoutHandle=dA(Bh.bind(null,h,wa,ZA),g);break}Bh(h,wa,ZA);break;case 4:if(Ku(h,k),(k&4194240)===k)break;for(g=h.eventTimes,G=-1;0<k;){var xe=31-fs(k);Y=1<<xe,xe=g[xe],xe>G&&(G=xe),k&=~Y}if(k=G,k=fi()-k,k=(120>k?120:480>k?480:1080>k?1080:1920>k?1920:3e3>k?3e3:4320>k?4320:1960*tv(k/1960))-k,10<k){h.timeoutHandle=dA(Bh.bind(null,h,wa,ZA),k);break}Bh(h,wa,ZA);break;case 5:Bh(h,wa,ZA);break;default:throw Error(i(329))}}}return _l(h,fi()),h.callbackNode===C?Qp.bind(null,h):null}function Op(h,g){var C=ju;return h.current.memoizedState.isDehydrated&&(bh(h,g).flags|=256),h=xf(h,g),h!==2&&(g=wa,wa=C,g!==null&&zp(g)),h}function zp(h){wa===null?wa=h:wa.push.apply(wa,h)}function rv(h){for(var g=h;;){if(g.flags&16384){var C=g.updateQueue;if(C!==null&&(C=C.stores,C!==null))for(var k=0;k<C.length;k++){var G=C[k],Y=G.getSnapshot;G=G.value;try{if(!os(Y(),G))return!1}catch{return!1}}}if(C=g.child,g.subtreeFlags&16384&&C!==null)C.return=g,g=C;else{if(g===h)break;for(;g.sibling===null;){if(g.return===null||g.return===h)return!0;g=g.return}g.sibling.return=g.return,g=g.sibling}}return!0}function Ku(h,g){for(g&=~gf,g&=~gu,h.suspendedLanes|=g,h.pingedLanes&=~g,h=h.expirationTimes;0<g;){var C=31-fs(g),k=1<<C;h[C]=-1,g&=~k}}function hg(h){if((yi&6)!==0)throw Error(i(327));Ch();var g=Fc(h,0);if((g&1)===0)return _l(h,fi()),null;var C=xf(h,g);if(h.tag!==0&&C===2){var k=Oo(h);k!==0&&(g=k,C=Op(h,k))}if(C===1)throw C=Ld,bh(h,0),Ku(h,g),_l(h,fi()),C;if(C===6)throw Error(i(345));return h.finishedWork=h.current.alternate,h.finishedLanes=g,Bh(h,wa,ZA),_l(h,fi()),null}function wh(h,g){var C=yi;yi|=1;try{return h(g)}finally{yi=C,yi===0&&(vh=fi()+500,jA&&re())}}function xh(h){yc!==null&&yc.tag===0&&(yi&6)===0&&Ch();var g=yi;yi|=1;var C=Wc.transition,k=Kn;try{if(Wc.transition=null,Kn=1,h)return h()}finally{Kn=k,Wc.transition=C,yi=g,(yi&6)===0&&re()}}function _f(){mc=gh.current,li(gh)}function bh(h,g){h.finishedWork=null,h.finishedLanes=0;var C=h.timeoutHandle;if(C!==-1&&(h.timeoutHandle=-1,uu(C)),_o!==null)for(C=_o.return;C!==null;){var k=C;switch(Ut(k),k.tag){case 1:k=k.type.childContextTypes,k!=null&&du();break;case 3:ja(),li(Xs),li(Ns),fu();break;case 5:VA(k);break;case 4:ja();break;case 13:li(gi);break;case 19:li(gi);break;case 10:yr(k.type._context);break;case 22:case 23:_f()}C=C.return}if(ta=h,_o=h=yu(h.current,null),To=mc=g,zs=0,Ld=null,gf=gu=zi=0,wa=ju=null,ei!==null){for(g=0;g<ei.length;g++)if(C=ei[g],k=C.interleaved,k!==null){C.interleaved=null;var G=k.next,Y=C.pending;if(Y!==null){var xe=Y.next;Y.next=G,k.next=xe}C.pending=k}ei=null}return h}function dg(h,g){do{var C=_o;try{if(Yn(),jl.current=Is,Kc){for(var k=bi.memoizedState;k!==null;){var G=k.queue;G!==null&&(G.pending=null),k=k.next}Kc=!1}if(Va=0,es=ki=bi=null,Ga=!1,qc=0,Np.current=null,C===null||C.return===null){zs=1,Ld=g,_o=null;break}e:{var Y=h,xe=C.return,ht=C,xt=g;if(g=To,ht.flags|=32768,xt!==null&&typeof xt=="object"&&typeof xt.then=="function"){var jt=xt,dr=ht,vr=dr.tag;if((dr.mode&1)===0&&(vr===0||vr===11||vr===15)){var hr=dr.alternate;hr?(dr.updateQueue=hr.updateQueue,dr.memoizedState=hr.memoizedState,dr.lanes=hr.lanes):(dr.updateQueue=null,dr.memoizedState=null)}var Or=ro(xe);if(Or!==null){Or.flags&=-257,Ka(Or,xe,ht,Y,g),Or.mode&1&&Os(Y,jt,g),g=Or,xt=jt;var en=g.updateQueue;if(en===null){var qr=new Set;qr.add(xt),g.updateQueue=qr}else en.add(xt);break e}else{if((g&1)===0){Os(Y,jt,g),wf();break e}xt=Error(i(426))}}else if(tr&&ht.mode&1){var Ps=ro(xe);if(Ps!==null){(Ps.flags&65536)===0&&(Ps.flags|=256),Ka(Ps,xe,ht,Y,g),Fr(pc(xt,ht));break e}}Y=xt=pc(xt,ht),zs!==4&&(zs=2),ju===null?ju=[Y]:ju.push(Y),Y=xe;do{switch(Y.tag){case 3:Y.flags|=65536,g&=-g,Y.lanes|=g;var Nt=vo(Y,xt,g);xi(Y,Nt);break e;case 1:ht=xt;var Et=Y.type,zt=Y.stateNode;if((Y.flags&128)===0&&(typeof Et.getDerivedStateFromError=="function"||zt!==null&&typeof zt.componentDidCatch=="function"&&(gc===null||!gc.has(zt)))){Y.flags|=65536,g&=-g,Y.lanes|=g;var Cr=vl(Y,ht,g);xi(Y,Cr);break e}}Y=Y.return}while(Y!==null)}pg(C)}catch(ln){g=ln,_o===C&&C!==null&&(_o=C=C.return);continue}break}while(!0)}function fg(){var h=mf.current;return mf.current=Is,h===null?Is:h}function wf(){(zs===0||zs===3||zs===2)&&(zs=4),ta===null||(zi&268435455)===0&&(gu&268435455)===0||Ku(ta,To)}function xf(h,g){var C=yi;yi|=2;var k=fg();(ta!==h||To!==g)&&(ZA=null,bh(h,g));do try{Hp();break}catch(G){dg(h,G)}while(!0);if(Yn(),yi=C,mf.current=k,_o!==null)throw Error(i(261));return ta=null,To=0,zs}function Hp(){for(;_o!==null;)bf(_o)}function Ud(){for(;_o!==null&&!ec();)bf(_o)}function bf(h){var g=yg(h.alternate,h,mc);h.memoizedProps=h.pendingProps,g===null?pg(h):_o=g,Np.current=null}function pg(h){var g=h;do{var C=g.alternate;if(h=g.return,(g.flags&32768)===0){if(C=ag(C,g,mc),C!==null){_o=C;return}}else{if(C=lg(C,g),C!==null){C.flags&=32767,_o=C;return}if(h!==null)h.flags|=32768,h.subtreeFlags=0,h.deletions=null;else{zs=6,_o=null;return}}if(g=g.sibling,g!==null){_o=g;return}_o=g=h}while(g!==null);zs===0&&(zs=5)}function Bh(h,g,C){var k=Kn,G=Wc.transition;try{Wc.transition=null,Kn=1,mg(h,g,C,k)}finally{Wc.transition=G,Kn=k}return null}function mg(h,g,C,k){do Ch();while(yc!==null);if((yi&6)!==0)throw Error(i(327));C=h.finishedWork;var G=h.finishedLanes;if(C===null)return null;if(h.finishedWork=null,h.finishedLanes=0,C===h.current)throw Error(i(177));h.callbackNode=null,h.callbackPriority=0;var Y=C.lanes|C.childLanes;if(Ca(h,Y),h===ta&&(_o=ta=null,To=0),(C.subtreeFlags&2064)===0&&(C.flags&2064)===0||_h||(_h=!0,vg(jn,function(){return Ch(),null})),Y=(C.flags&15990)!==0,(C.subtreeFlags&15990)!==0||Y){Y=Wc.transition,Wc.transition=null;var xe=Kn;Kn=1;var ht=yi;yi|=4,Np.current=null,Pp(h,C),ug(C,h),Lc(hA),ic=!!dc,hA=dc=null,h.current=C,ff(C),Ec(),yi=ht,Kn=xe,Wc.transition=Y}else h.current=C;if(_h&&(_h=!1,yc=h,Gu=G),Y=h.pendingLanes,Y===0&&(gc=null),Ro(C.stateNode),_l(h,fi()),g!==null)for(k=h.onRecoverableError,C=0;C<g.length;C++)G=g[C],k(G.value,{componentStack:G.stack,digest:G.digest});if(Vu)throw Vu=!1,h=Md,Md=null,h;return(Gu&1)!==0&&h.tag!==0&&Ch(),Y=h.pendingLanes,(Y&1)!==0?h===yf?kd++:(kd=0,yf=h):kd=0,re(),null}function Ch(){if(yc!==null){var h=Fl(Gu),g=Wc.transition,C=Kn;try{if(Wc.transition=null,Kn=16>h?16:h,yc===null)var k=!1;else{if(h=yc,yc=null,Gu=0,(yi&6)!==0)throw Error(i(331));var G=yi;for(yi|=4,Xr=h.current;Xr!==null;){var Y=Xr,xe=Y.child;if((Xr.flags&16)!==0){var ht=Y.deletions;if(ht!==null){for(var xt=0;xt<ht.length;xt++){var jt=ht[xt];for(Xr=jt;Xr!==null;){var dr=Xr;switch(dr.tag){case 0:case 11:case 15:mu(8,dr,Y)}var vr=dr.child;if(vr!==null)vr.return=dr,Xr=vr;else for(;Xr!==null;){dr=Xr;var hr=dr.sibling,Or=dr.return;if(df(dr),dr===jt){Xr=null;break}if(hr!==null){hr.return=Or,Xr=hr;break}Xr=Or}}}var en=Y.alternate;if(en!==null){var qr=en.child;if(qr!==null){en.child=null;do{var Ps=qr.sibling;qr.sibling=null,qr=Ps}while(qr!==null)}}Xr=Y}}if((Y.subtreeFlags&2064)!==0&&xe!==null)xe.return=Y,Xr=xe;else e:for(;Xr!==null;){if(Y=Xr,(Y.flags&2048)!==0)switch(Y.tag){case 0:case 11:case 15:mu(9,Y,Y.return)}var Nt=Y.sibling;if(Nt!==null){Nt.return=Y.return,Xr=Nt;break e}Xr=Y.return}}var Et=h.current;for(Xr=Et;Xr!==null;){xe=Xr;var zt=xe.child;if((xe.subtreeFlags&2064)!==0&&zt!==null)zt.return=xe,Xr=zt;else e:for(xe=Et;Xr!==null;){if(ht=Xr,(ht.flags&2048)!==0)try{switch(ht.tag){case 0:case 11:case 15:Jo(9,ht)}}catch(ln){no(ht,ht.return,ln)}if(ht===xe){Xr=null;break e}var Cr=ht.sibling;if(Cr!==null){Cr.return=ht.return,Xr=Cr;break e}Xr=ht.return}}if(yi=G,re(),Us&&typeof Us.onPostCommitFiberRoot=="function")try{Us.onPostCommitFiberRoot(cl,h)}catch{}k=!0}return k}finally{Kn=C,Wc.transition=g}}return!1}function gg(h,g,C){g=pc(C,g),g=vo(h,g,1),h=In(h,g,1),g=Wa(),h!==null&&(rc(h,1,g),_l(h,g))}function no(h,g,C){if(h.tag===3)gg(h,h,C);else for(;g!==null;){if(g.tag===3){gg(g,h,C);break}else if(g.tag===1){var k=g.stateNode;if(typeof g.type.getDerivedStateFromError=="function"||typeof k.componentDidCatch=="function"&&(gc===null||!gc.has(k))){h=pc(C,h),h=vl(g,h,1),g=In(g,h,1),h=Wa(),g!==null&&(rc(g,1,h),_l(g,h));break}}g=g.return}}function Dd(h,g,C){var k=h.pingCache;k!==null&&k.delete(g),g=Wa(),h.pingedLanes|=h.suspendedLanes&C,ta===h&&(To&C)===C&&(zs===4||zs===3&&(To&130023424)===To&&500>fi()-yh?bh(h,0):gf|=C),_l(h,g)}function jp(h,g){g===0&&((h.mode&1)===0?g=1:(g=No,No<<=1,(No&130023424)===0&&(No=4194304)));var C=Wa();h=wi(h,g),h!==null&&(rc(h,g,C),_l(h,C))}function nv(h){var g=h.memoizedState,C=0;g!==null&&(C=g.retryLane),jp(h,C)}function iv(h,g){var C=0;switch(h.tag){case 13:var k=h.stateNode,G=h.memoizedState;G!==null&&(C=G.retryLane);break;case 19:k=h.stateNode;break;default:throw Error(i(314))}k!==null&&k.delete(g),jp(h,C)}var yg;yg=function(h,g,C){if(h!==null)if(h.memoizedProps!==g.pendingProps||Xs.current)qa=!0;else{if((h.lanes&C)===0&&(g.flags&128)===0)return qa=!1,ev(h,g,C);qa=(h.flags&131072)!==0}else qa=!1,tr&&(g.flags&1048576)!==0&&Pt(g,Me,g.index);switch(g.lanes=0,g.tag){case 2:var k=g.type;mh(h,g),h=g.pendingProps;var G=Vc(g,Ns.current);Ti(g,C),G=f(null,g,k,h,G,C);var Y=y();return g.flags|=1,typeof G=="object"&&G!==null&&typeof G.render=="function"&&G.$$typeof===void 0?(g.tag=1,g.memoizedState=null,g.updateQueue=null,go(k)?(Y=!0,Oa(g)):Y=!1,g.memoizedState=G.state!==null&&G.state!==void 0?G.state:null,Ys(g),G.updater=yo,g.stateNode=G,G._reactInternals=g,zu(g,k,h,C),g=hh(null,g,k,!0,Y,C)):(g.tag=0,tr&&Y&&Zt(g),Xo(null,g,G,C),g=g.child),g;case 16:k=g.elementType;e:{switch(mh(h,g),h=g.pendingProps,G=k._init,k=G(k._payload),g.type=k,G=g.tag=_g(k),h=hi(k,h),G){case 0:g=Gh(null,g,k,h,C);break e;case 1:g=uh(null,g,k,h,C);break e;case 11:g=Vh(null,g,k,h,C);break e;case 14:g=Sd(null,g,k,hi(k.type,h),C);break e}throw Error(i(306,k,""))}return g;case 0:return k=g.type,G=g.pendingProps,G=g.elementType===k?G:hi(k,G),Gh(h,g,k,G,C);case 1:return k=g.type,G=g.pendingProps,G=g.elementType===k?G:hi(k,G),uh(h,g,k,G,C);case 3:e:{if(pu(g),h===null)throw Error(i(387));k=g.pendingProps,Y=g.memoizedState,G=Y.element,Fo(h,g),Ss(g,k,null,C);var xe=g.memoizedState;if(k=xe.element,Y.isDehydrated)if(Y={element:k,isDehydrated:!1,cache:xe.cache,pendingSuspenseBoundaries:xe.pendingSuspenseBoundaries,transitions:xe.transitions},g.updateQueue.baseState=Y,g.memoizedState=Y,g.flags&256){G=pc(Error(i(423)),g),g=Kh(h,g,k,C,G);break e}else if(k!==G){G=pc(Error(i(424)),g),g=Kh(h,g,k,C,G);break e}else for(Wt=po(g.stateNode.containerInfo.firstChild),qt=g,tr=!0,er=null,C=Ni(g,null,k,C),g.child=C;C;)C.flags=C.flags&-3|4096,C=C.sibling;else{if(Hr(),k===G){g=$c(h,g,C);break e}Xo(h,g,k,C)}g=g.child}return g;case 5:return Hl(g),h===null&&Zr(g),k=g.type,G=g.pendingProps,Y=h!==null?h.memoizedProps:null,xe=G.children,Ru(k,G)?xe=null:Y!==null&&Ru(k,Y)&&(g.flags|=32),gA(h,g),Xo(h,g,xe,C),g.child;case 6:return h===null&&Zr(g),null;case 13:return rg(h,g,C);case 4:return Gc(g,g.stateNode.containerInfo),k=g.pendingProps,h===null?g.child=ls(g,null,k,C):Xo(h,g,k,C),g.child;case 11:return k=g.type,G=g.pendingProps,G=g.elementType===k?G:hi(k,G),Vh(h,g,k,G,C);case 7:return Xo(h,g,g.pendingProps,C),g.child;case 8:return Xo(h,g,g.pendingProps.children,C),g.child;case 12:return Xo(h,g,g.pendingProps.children,C),g.child;case 10:e:{if(k=g.type._context,G=g.pendingProps,Y=g.memoizedProps,xe=G.value,Xn(Bs,k._currentValue),k._currentValue=xe,Y!==null)if(os(Y.value,xe)){if(Y.children===G.children&&!Xs.current){g=$c(h,g,C);break e}}else for(Y=g.child,Y!==null&&(Y.return=g);Y!==null;){var ht=Y.dependencies;if(ht!==null){xe=Y.child;for(var xt=ht.firstContext;xt!==null;){if(xt.context===k){if(Y.tag===1){xt=Mi(-1,C&-C),xt.tag=2;var jt=Y.updateQueue;if(jt!==null){jt=jt.shared;var dr=jt.pending;dr===null?xt.next=xt:(xt.next=dr.next,dr.next=xt),jt.pending=xt}}Y.lanes|=C,xt=Y.alternate,xt!==null&&(xt.lanes|=C),br(Y.return,C,g),ht.lanes|=C;break}xt=xt.next}}else if(Y.tag===10)xe=Y.type===g.type?null:Y.child;else if(Y.tag===18){if(xe=Y.return,xe===null)throw Error(i(341));xe.lanes|=C,ht=xe.alternate,ht!==null&&(ht.lanes|=C),br(xe,C,g),xe=Y.sibling}else xe=Y.child;if(xe!==null)xe.return=Y;else for(xe=Y;xe!==null;){if(xe===g){xe=null;break}if(Y=xe.sibling,Y!==null){Y.return=xe.return,xe=Y;break}xe=xe.return}Y=xe}Xo(h,g,G.children,C),g=g.child}return g;case 9:return G=g.type,k=g.pendingProps.children,Ti(g,C),G=ji(G),k=k(G),g.flags|=1,Xo(h,g,k,C),g.child;case 14:return k=g.type,G=hi(k,g.pendingProps),G=hi(k.type,G),Sd(h,g,k,G,C);case 15:return KA(h,g,g.type,g.pendingProps,C);case 17:return k=g.type,G=g.pendingProps,G=g.elementType===k?G:hi(k,G),mh(h,g),g.tag=1,go(k)?(h=!0,Oa(g)):h=!1,Ti(g,C),mA(g,k,G),zu(g,k,G,C),hh(null,g,k,!0,h,C);case 19:return ph(h,g,C);case 22:return qA(h,g,C)}throw Error(i(156,g.tag))};function vg(h,g){return ol(h,g)}function sv(h,g,C,k){this.tag=h,this.key=C,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=g,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=k,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function _c(h,g,C,k){return new sv(h,g,C,k)}function Rd(h){return h=h.prototype,!(!h||!h.isReactComponent)}function _g(h){if(typeof h=="function")return Rd(h)?1:0;if(h!=null){if(h=h.$$typeof,h===me)return 11;if(h===ut)return 14}return 2}function yu(h,g){var C=h.alternate;return C===null?(C=_c(h.tag,g,h.key,h.mode),C.elementType=h.elementType,C.type=h.type,C.stateNode=h.stateNode,C.alternate=h,h.alternate=C):(C.pendingProps=g,C.type=h.type,C.flags=0,C.subtreeFlags=0,C.deletions=null),C.flags=h.flags&14680064,C.childLanes=h.childLanes,C.lanes=h.lanes,C.child=h.child,C.memoizedProps=h.memoizedProps,C.memoizedState=h.memoizedState,C.updateQueue=h.updateQueue,g=h.dependencies,C.dependencies=g===null?null:{lanes:g.lanes,firstContext:g.firstContext},C.sibling=h.sibling,C.index=h.index,C.ref=h.ref,C}function Nd(h,g,C,k,G,Y){var xe=2;if(k=h,typeof h=="function")Rd(h)&&(xe=1);else if(typeof h=="string")xe=5;else e:switch(h){case Xe:return Eh(C.children,G,Y,g);case Qe:xe=8,G|=8;break;case Be:return h=_c(12,C,g,G|2),h.elementType=Be,h.lanes=Y,h;case Te:return h=_c(13,C,g,G),h.elementType=Te,h.lanes=Y,h;case Ie:return h=_c(19,C,g,G),h.elementType=Ie,h.lanes=Y,h;case ot:return Sh(C,G,Y,g);default:if(typeof h=="object"&&h!==null)switch(h.$$typeof){case Je:xe=10;break e;case Ae:xe=9;break e;case me:xe=11;break e;case ut:xe=14;break e;case it:xe=16,k=null;break e}throw Error(i(130,h==null?h:typeof h,""))}return g=_c(xe,C,g,G),g.elementType=h,g.type=k,g.lanes=Y,g}function Eh(h,g,C,k){return h=_c(7,h,k,g),h.lanes=C,h}function Sh(h,g,C,k){return h=_c(22,h,k,g),h.elementType=ot,h.lanes=C,h.stateNode={isHidden:!1},h}function Vp(h,g,C){return h=_c(6,h,null,g),h.lanes=C,h}function Bf(h,g,C){return g=_c(4,h.children!==null?h.children:[],h.key,g),g.lanes=C,g.stateNode={containerInfo:h.containerInfo,pendingChildren:null,implementation:h.implementation},g}function ov(h,g,C,k,G){this.tag=g,this.containerInfo=h,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=iA(0),this.expirationTimes=iA(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=iA(0),this.identifierPrefix=k,this.onRecoverableError=G,this.mutableSourceEagerHydrationData=null}function Gp(h,g,C,k,G,Y,xe,ht,xt){return h=new ov(h,g,C,ht,xt),g===1?(g=1,Y===!0&&(g|=8)):g=0,Y=_c(3,null,null,g),h.current=Y,Y.stateNode=h,Y.memoizedState={element:k,isDehydrated:C,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ys(Y),h}function av(h,g,C){var k=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:He,key:k==null?null:""+k,children:h,containerInfo:g,implementation:C}}function Kp(h){if(!h)return zl;h=h._reactInternals;e:{if(nn(h)!==h||h.tag!==1)throw Error(i(170));var g=h;do{switch(g.tag){case 3:g=g.stateNode.context;break e;case 1:if(go(g.type)){g=g.stateNode.__reactInternalMemoizedMergedChildContext;break e}}g=g.return}while(g!==null);throw Error(i(171))}if(h.tag===1){var C=h.type;if(go(C))return fA(h,C,g)}return g}function wg(h,g,C,k,G,Y,xe,ht,xt){return h=Gp(C,k,!0,h,G,Y,xe,ht,xt),h.context=Kp(null),C=h.current,k=Wa(),G=Zc(C),Y=Mi(k,G),Y.callback=g??null,In(C,Y,G),h.current.lanes=G,rc(h,G,k),_l(h,k),h}function Cf(h,g,C,k){var G=g.current,Y=Wa(),xe=Zc(G);return C=Kp(C),g.context===null?g.context=C:g.pendingContext=C,g=Mi(Y,xe),g.payload={element:h},k=k===void 0?null:k,k!==null&&(g.callback=k),h=In(G,g,xe),h!==null&&(vc(h,G,xe,Y),Vn(h,G,xe)),xe}function Hs(h){if(h=h.current,!h.child)return null;switch(h.child.tag){case 5:return h.child.stateNode;default:return h.child.stateNode}}function Zh(h,g){if(h=h.memoizedState,h!==null&&h.dehydrated!==null){var C=h.retryLane;h.retryLane=C!==0&&C<g?C:g}}function qp(h,g){Zh(h,g),(h=h.alternate)&&Zh(h,g)}function lv(){return null}var $p=typeof reportError=="function"?reportError:function(h){console.error(h)};function Ef(h){this._internalRoot=h}Sf.prototype.render=Ef.prototype.render=function(h){var g=this._internalRoot;if(g===null)throw Error(i(409));Cf(h,g,null,null)},Sf.prototype.unmount=Ef.prototype.unmount=function(){var h=this._internalRoot;if(h!==null){this._internalRoot=null;var g=h.containerInfo;xh(function(){Cf(null,h,null,null)}),g[Rs]=null}};function Sf(h){this._internalRoot=h}Sf.prototype.unstable_scheduleHydration=function(h){if(h){var g=Ic();h={blockedOn:null,target:h,priority:g};for(var C=0;C<Jn.length&&g!==0&&g<Jn[C].priority;C++);Jn.splice(C,0,h),C===0&&uo(h)}};function Ff(h){return!(!h||h.nodeType!==1&&h.nodeType!==9&&h.nodeType!==11)}function Qd(h){return!(!h||h.nodeType!==1&&h.nodeType!==9&&h.nodeType!==11&&(h.nodeType!==8||h.nodeValue!==" react-mount-point-unstable "))}function Fh(){}function Wp(h,g,C,k,G){if(G){if(typeof k=="function"){var Y=k;k=function(){var jt=Hs(xe);Y.call(jt)}}var xe=wg(g,k,h,0,null,!1,!1,"",Fh);return h._reactRootContainer=xe,h[Rs]=xe.current,uc(h.nodeType===8?h.parentNode:h),xh(),xe}for(;G=h.lastChild;)h.removeChild(G);if(typeof k=="function"){var ht=k;k=function(){var jt=Hs(xt);ht.call(jt)}}var xt=Gp(h,0,!1,null,null,!1,!1,"",Fh);return h._reactRootContainer=xt,h[Rs]=xt.current,uc(h.nodeType===8?h.parentNode:h),xh(function(){Cf(g,xt,C,k)}),xt}function Od(h,g,C,k,G){var Y=C._reactRootContainer;if(Y){var xe=Y;if(typeof G=="function"){var ht=G;G=function(){var xt=Hs(xe);ht.call(xt)}}Cf(g,xe,h,G)}else xe=Wp(C,g,h,G,k);return Hs(xe)}nc=function(h){switch(h.tag){case 3:var g=h.stateNode;if(g.current.memoizedState.isDehydrated){var C=Qo(g.pendingLanes);C!==0&&(TA(g,C|1),_l(g,fi()),(yi&6)===0&&(vh=fi()+500,re()))}break;case 13:xh(function(){var k=wi(h,1);if(k!==null){var G=Wa();vc(k,h,1,G)}}),qp(h,1)}},Il=function(h){if(h.tag===13){var g=wi(h,134217728);if(g!==null){var C=Wa();vc(g,h,134217728,C)}qp(h,134217728)}},PA=function(h){if(h.tag===13){var g=Zc(h),C=wi(h,g);if(C!==null){var k=Wa();vc(C,h,g,k)}qp(h,g)}},Ic=function(){return Kn},ca=function(h,g){var C=Kn;try{return Kn=h,g()}finally{Kn=C}},fr=function(h,g,C){switch(g){case"input":if(kr(h,C),g=C.name,C.type==="radio"&&g!=null){for(C=h;C.parentNode;)C=C.parentNode;for(C=C.querySelectorAll("input[name="+JSON.stringify(""+g)+'][type="radio"]'),g=0;g<C.length;g++){var k=C[g];if(k!==h&&k.form===h.form){var G=HA(k);if(!G)throw Error(i(90));or(k),kr(k,G)}}}break;case"textarea":Dn(h,C);break;case"select":g=C.value,g!=null&&Er(h,!!C.multiple,g,!1)}},gr=wh,$r=xh;var xg={usingClientEntryPoint:!1,Events:[Ra,Na,HA,tn,Qr,wh]},qu={findFiberByHostInstance:Da,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Xh={bundleType:qu.bundleType,version:qu.version,rendererPackageName:qu.rendererPackageName,rendererConfig:qu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:de.ReactCurrentDispatcher,findHostInstanceByFiber:function(h){return h=ks(h),h===null?null:h.stateNode},findFiberByHostInstance:qu.findFiberByHostInstance||lv,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var zd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!zd.isDisabled&&zd.supportsFiber)try{cl=zd.inject(Xh),Us=zd}catch{}}return Yc.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=xg,Yc.createPortal=function(h,g){var C=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Ff(g))throw Error(i(200));return av(h,g,null,C)},Yc.createRoot=function(h,g){if(!Ff(h))throw Error(i(299));var C=!1,k="",G=$p;return g!=null&&(g.unstable_strictMode===!0&&(C=!0),g.identifierPrefix!==void 0&&(k=g.identifierPrefix),g.onRecoverableError!==void 0&&(G=g.onRecoverableError)),g=Gp(h,1,!1,null,null,C,!1,k,G),h[Rs]=g.current,uc(h.nodeType===8?h.parentNode:h),new Ef(g)},Yc.findDOMNode=function(h){if(h==null)return null;if(h.nodeType===1)return h;var g=h._reactInternals;if(g===void 0)throw typeof h.render=="function"?Error(i(188)):(h=Object.keys(h).join(","),Error(i(268,h)));return h=ks(g),h=h===null?null:h.stateNode,h},Yc.flushSync=function(h){return xh(h)},Yc.hydrate=function(h,g,C){if(!Qd(g))throw Error(i(200));return Od(null,h,g,!0,C)},Yc.hydrateRoot=function(h,g,C){if(!Ff(h))throw Error(i(405));var k=C!=null&&C.hydratedSources||null,G=!1,Y="",xe=$p;if(C!=null&&(C.unstable_strictMode===!0&&(G=!0),C.identifierPrefix!==void 0&&(Y=C.identifierPrefix),C.onRecoverableError!==void 0&&(xe=C.onRecoverableError)),g=wg(g,null,h,1,C??null,G,!1,Y,xe),h[Rs]=g.current,uc(h),k)for(h=0;h<k.length;h++)C=k[h],G=C._getVersion,G=G(C._source),g.mutableSourceEagerHydrationData==null?g.mutableSourceEagerHydrationData=[C,G]:g.mutableSourceEagerHydrationData.push(C,G);return new Sf(g)},Yc.render=function(h,g,C){if(!Qd(g))throw Error(i(200));return Od(null,h,g,!1,C)},Yc.unmountComponentAtNode=function(h){if(!Qd(h))throw Error(i(40));return h._reactRootContainer?(xh(function(){Od(null,null,h,!1,function(){h._reactRootContainer=null,h[Rs]=null})}),!0):!1},Yc.unstable_batchedUpdates=wh,Yc.unstable_renderSubtreeIntoContainer=function(h,g,C,k){if(!Qd(C))throw Error(i(200));if(h==null||h._reactInternals===void 0)throw Error(i(38));return Od(h,g,C,!1,k)},Yc.version="18.3.1-next-f1338f8080-20240426",Yc}var Ob;function m5(){if(Ob)return Gv.exports;Ob=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(r){console.error(r)}}return e(),Gv.exports=W4(),Gv.exports}var zb;function Z4(){if(zb)return Qg;zb=1;var e=m5();return Qg.createRoot=e.createRoot,Qg.hydrateRoot=e.hydrateRoot,Qg}var X4=Z4(),ee=_w();const Pr=vw(ee),py=j4({__proto__:null,default:Pr},[ee]),Y4=1,J4=1e6;let $v=0;function e3(){return $v=($v+1)%Number.MAX_SAFE_INTEGER,$v.toString()}const Wv=new Map,Hb=e=>{if(Wv.has(e))return;const r=setTimeout(()=>{Wv.delete(e),Cm({type:"REMOVE_TOAST",toastId:e})},J4);Wv.set(e,r)},t3=(e,r)=>{switch(r.type){case"ADD_TOAST":return{...e,toasts:[r.toast,...e.toasts].slice(0,Y4)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(i=>i.id===r.toast.id?{...i,...r.toast}:i)};case"DISMISS_TOAST":{const{toastId:i}=r;return i?Hb(i):e.toasts.forEach(a=>{Hb(a.id)}),{...e,toasts:e.toasts.map(a=>a.id===i||i===void 0?{...a,open:!1}:a)}}case"REMOVE_TOAST":return r.toastId===void 0?{...e,toasts:[]}:{...e,toasts:e.toasts.filter(i=>i.id!==r.toastId)}}},T0=[];let P0={toasts:[]};function Cm(e){P0=t3(P0,e),T0.forEach(r=>{r(P0)})}function a_({...e}){const r=e3(),i=u=>Cm({type:"UPDATE_TOAST",toast:{...u,id:r}}),a=()=>Cm({type:"DISMISS_TOAST",toastId:r});return Cm({type:"ADD_TOAST",toast:{...e,id:r,open:!0,onOpenChange:u=>{u||a()}}}),{id:r,dismiss:a,update:i}}function r3(){const[e,r]=ee.useState(P0);return ee.useEffect(()=>(T0.push(r),()=>{const i=T0.indexOf(r);i>-1&&T0.splice(i,1)}),[e]),{...e,toast:a_,dismiss:i=>Cm({type:"DISMISS_TOAST",toastId:i})}}var _p=m5();const g5=vw(_p);function Un(e,r,{checkForDefaultPrevented:i=!0}={}){return function(u){if(e?.(u),i===!1||!u.defaultPrevented)return r?.(u)}}function jb(e,r){if(typeof e=="function")return e(r);e!=null&&(e.current=r)}function Gm(...e){return r=>{let i=!1;const a=e.map(u=>{const d=jb(u,r);return!i&&typeof d=="function"&&(i=!0),d});if(i)return()=>{for(let u=0;u<a.length;u++){const d=a[u];typeof d=="function"?d():jb(e[u],null)}}}}function ds(...e){return ee.useCallback(Gm(...e),e)}function Hh(e,r=[]){let i=[];function a(d,m){const o=ee.createContext(m),w=i.length;i=[...i,m];const E=D=>{const{scope:O,children:P,...W}=D,z=O?.[e]?.[w]||o,H=ee.useMemo(()=>W,Object.values(W));return ae.jsx(z.Provider,{value:H,children:P})};E.displayName=d+"Provider";function I(D,O){const P=O?.[e]?.[w]||o,W=ee.useContext(P);if(W)return W;if(m!==void 0)return m;throw new Error(`\`${D}\` must be used within \`${d}\``)}return[E,I]}const u=()=>{const d=i.map(m=>ee.createContext(m));return function(o){const w=o?.[e]||d;return ee.useMemo(()=>({[`__scope${e}`]:{...o,[e]:w}}),[o,w])}};return u.scopeName=e,[a,n3(u,...r)]}function n3(...e){const r=e[0];if(e.length===1)return r;const i=()=>{const a=e.map(u=>({useScope:u(),scopeName:u.scopeName}));return function(d){const m=a.reduce((o,{useScope:w,scopeName:E})=>{const D=w(d)[`__scope${E}`];return{...o,...D}},{});return ee.useMemo(()=>({[`__scope${r.scopeName}`]:m}),[m])}};return i.scopeName=r.scopeName,i}function Vb(e){const r=i3(e),i=ee.forwardRef((a,u)=>{const{children:d,...m}=a,o=ee.Children.toArray(d),w=o.find(o3);if(w){const E=w.props.children,I=o.map(D=>D===w?ee.Children.count(E)>1?ee.Children.only(null):ee.isValidElement(E)?E.props.children:null:D);return ae.jsx(r,{...m,ref:u,children:ee.isValidElement(E)?ee.cloneElement(E,void 0,I):null})}return ae.jsx(r,{...m,ref:u,children:d})});return i.displayName=`${e}.Slot`,i}function i3(e){const r=ee.forwardRef((i,a)=>{const{children:u,...d}=i;if(ee.isValidElement(u)){const m=l3(u),o=a3(d,u.props);return u.type!==ee.Fragment&&(o.ref=a?Gm(a,m):m),ee.cloneElement(u,o)}return ee.Children.count(u)>1?ee.Children.only(null):null});return r.displayName=`${e}.SlotClone`,r}var s3=Symbol("radix.slottable");function o3(e){return ee.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===s3}function a3(e,r){const i={...r};for(const a in r){const u=e[a],d=r[a];/^on[A-Z]/.test(a)?u&&d?i[a]=(...o)=>{const w=d(...o);return u(...o),w}:u&&(i[a]=u):a==="style"?i[a]={...u,...d}:a==="className"&&(i[a]=[u,d].filter(Boolean).join(" "))}return{...e,...i}}function l3(e){let r=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,i=r&&"isReactWarning"in r&&r.isReactWarning;return i?e.ref:(r=Object.getOwnPropertyDescriptor(e,"ref")?.get,i=r&&"isReactWarning"in r&&r.isReactWarning,i?e.props.ref:e.props.ref||e.ref)}function ww(e){const r=e+"CollectionProvider",[i,a]=Hh(r),[u,d]=i(r,{collectionRef:{current:null},itemMap:new Map}),m=z=>{const{scope:H,children:Z}=z,se=Pr.useRef(null),ce=Pr.useRef(new Map).current;return ae.jsx(u,{scope:H,itemMap:ce,collectionRef:se,children:Z})};m.displayName=r;const o=e+"CollectionSlot",w=Vb(o),E=Pr.forwardRef((z,H)=>{const{scope:Z,children:se}=z,ce=d(o,Z),de=ds(H,ce.collectionRef);return ae.jsx(w,{ref:de,children:se})});E.displayName=o;const I=e+"CollectionItemSlot",D="data-radix-collection-item",O=Vb(I),P=Pr.forwardRef((z,H)=>{const{scope:Z,children:se,...ce}=z,de=Pr.useRef(null),Pe=ds(H,de),He=d(I,Z);return Pr.useEffect(()=>(He.itemMap.set(de,{ref:de,...ce}),()=>void He.itemMap.delete(de))),ae.jsx(O,{[D]:"",ref:Pe,children:se})});P.displayName=I;function W(z){const H=d(e+"CollectionConsumer",z);return Pr.useCallback(()=>{const se=H.collectionRef.current;if(!se)return[];const ce=Array.from(se.querySelectorAll(`[${D}]`));return Array.from(H.itemMap.values()).sort((He,Xe)=>ce.indexOf(He.ref.current)-ce.indexOf(Xe.ref.current))},[H.collectionRef,H.itemMap])}return[{Provider:m,Slot:E,ItemSlot:P},W,a]}function c3(e){const r=A3(e),i=ee.forwardRef((a,u)=>{const{children:d,...m}=a,o=ee.Children.toArray(d),w=o.find(h3);if(w){const E=w.props.children,I=o.map(D=>D===w?ee.Children.count(E)>1?ee.Children.only(null):ee.isValidElement(E)?E.props.children:null:D);return ae.jsx(r,{...m,ref:u,children:ee.isValidElement(E)?ee.cloneElement(E,void 0,I):null})}return ae.jsx(r,{...m,ref:u,children:d})});return i.displayName=`${e}.Slot`,i}function A3(e){const r=ee.forwardRef((i,a)=>{const{children:u,...d}=i;if(ee.isValidElement(u)){const m=f3(u),o=d3(d,u.props);return u.type!==ee.Fragment&&(o.ref=a?Gm(a,m):m),ee.cloneElement(u,o)}return ee.Children.count(u)>1?ee.Children.only(null):null});return r.displayName=`${e}.SlotClone`,r}var u3=Symbol("radix.slottable");function h3(e){return ee.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===u3}function d3(e,r){const i={...r};for(const a in r){const u=e[a],d=r[a];/^on[A-Z]/.test(a)?u&&d?i[a]=(...o)=>{const w=d(...o);return u(...o),w}:u&&(i[a]=u):a==="style"?i[a]={...u,...d}:a==="className"&&(i[a]=[u,d].filter(Boolean).join(" "))}return{...e,...i}}function f3(e){let r=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,i=r&&"isReactWarning"in r&&r.isReactWarning;return i?e.ref:(r=Object.getOwnPropertyDescriptor(e,"ref")?.get,i=r&&"isReactWarning"in r&&r.isReactWarning,i?e.props.ref:e.props.ref||e.ref)}var p3=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],oi=p3.reduce((e,r)=>{const i=c3(`Primitive.${r}`),a=ee.forwardRef((u,d)=>{const{asChild:m,...o}=u,w=m?i:r;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),ae.jsx(w,{...o,ref:d})});return a.displayName=`Primitive.${r}`,{...e,[r]:a}},{});function y5(e,r){e&&_p.flushSync(()=>e.dispatchEvent(r))}function iu(e){const r=ee.useRef(e);return ee.useEffect(()=>{r.current=e}),ee.useMemo(()=>(...i)=>r.current?.(...i),[])}function m3(e,r=globalThis?.document){const i=iu(e);ee.useEffect(()=>{const a=u=>{u.key==="Escape"&&i(u)};return r.addEventListener("keydown",a,{capture:!0}),()=>r.removeEventListener("keydown",a,{capture:!0})},[i,r])}var g3="DismissableLayer",l_="dismissableLayer.update",y3="dismissableLayer.pointerDownOutside",v3="dismissableLayer.focusOutside",Gb,v5=ee.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),my=ee.forwardRef((e,r)=>{const{disableOutsidePointerEvents:i=!1,onEscapeKeyDown:a,onPointerDownOutside:u,onFocusOutside:d,onInteractOutside:m,onDismiss:o,...w}=e,E=ee.useContext(v5),[I,D]=ee.useState(null),O=I?.ownerDocument??globalThis?.document,[,P]=ee.useState({}),W=ds(r,Xe=>D(Xe)),z=Array.from(E.layers),[H]=[...E.layersWithOutsidePointerEventsDisabled].slice(-1),Z=z.indexOf(H),se=I?z.indexOf(I):-1,ce=E.layersWithOutsidePointerEventsDisabled.size>0,de=se>=Z,Pe=w3(Xe=>{const Qe=Xe.target,Be=[...E.branches].some(Je=>Je.contains(Qe));!de||Be||(u?.(Xe),m?.(Xe),Xe.defaultPrevented||o?.())},O),He=x3(Xe=>{const Qe=Xe.target;[...E.branches].some(Je=>Je.contains(Qe))||(d?.(Xe),m?.(Xe),Xe.defaultPrevented||o?.())},O);return m3(Xe=>{se===E.layers.size-1&&(a?.(Xe),!Xe.defaultPrevented&&o&&(Xe.preventDefault(),o()))},O),ee.useEffect(()=>{if(I)return i&&(E.layersWithOutsidePointerEventsDisabled.size===0&&(Gb=O.body.style.pointerEvents,O.body.style.pointerEvents="none"),E.layersWithOutsidePointerEventsDisabled.add(I)),E.layers.add(I),Kb(),()=>{i&&E.layersWithOutsidePointerEventsDisabled.size===1&&(O.body.style.pointerEvents=Gb)}},[I,O,i,E]),ee.useEffect(()=>()=>{I&&(E.layers.delete(I),E.layersWithOutsidePointerEventsDisabled.delete(I),Kb())},[I,E]),ee.useEffect(()=>{const Xe=()=>P({});return document.addEventListener(l_,Xe),()=>document.removeEventListener(l_,Xe)},[]),ae.jsx(oi.div,{...w,ref:W,style:{pointerEvents:ce?de?"auto":"none":void 0,...e.style},onFocusCapture:Un(e.onFocusCapture,He.onFocusCapture),onBlurCapture:Un(e.onBlurCapture,He.onBlurCapture),onPointerDownCapture:Un(e.onPointerDownCapture,Pe.onPointerDownCapture)})});my.displayName=g3;var _3="DismissableLayerBranch",_5=ee.forwardRef((e,r)=>{const i=ee.useContext(v5),a=ee.useRef(null),u=ds(r,a);return ee.useEffect(()=>{const d=a.current;if(d)return i.branches.add(d),()=>{i.branches.delete(d)}},[i.branches]),ae.jsx(oi.div,{...e,ref:u})});_5.displayName=_3;function w3(e,r=globalThis?.document){const i=iu(e),a=ee.useRef(!1),u=ee.useRef(()=>{});return ee.useEffect(()=>{const d=o=>{if(o.target&&!a.current){let w=function(){w5(y3,i,E,{discrete:!0})};const E={originalEvent:o};o.pointerType==="touch"?(r.removeEventListener("click",u.current),u.current=w,r.addEventListener("click",u.current,{once:!0})):w()}else r.removeEventListener("click",u.current);a.current=!1},m=window.setTimeout(()=>{r.addEventListener("pointerdown",d)},0);return()=>{window.clearTimeout(m),r.removeEventListener("pointerdown",d),r.removeEventListener("click",u.current)}},[r,i]),{onPointerDownCapture:()=>a.current=!0}}function x3(e,r=globalThis?.document){const i=iu(e),a=ee.useRef(!1);return ee.useEffect(()=>{const u=d=>{d.target&&!a.current&&w5(v3,i,{originalEvent:d},{discrete:!1})};return r.addEventListener("focusin",u),()=>r.removeEventListener("focusin",u)},[r,i]),{onFocusCapture:()=>a.current=!0,onBlurCapture:()=>a.current=!1}}function Kb(){const e=new CustomEvent(l_);document.dispatchEvent(e)}function w5(e,r,i,{discrete:a}){const u=i.originalEvent.target,d=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:i});r&&u.addEventListener(e,r,{once:!0}),a?y5(u,d):u.dispatchEvent(d)}var b3=my,B3=_5,Cl=globalThis?.document?ee.useLayoutEffect:()=>{},C3="Portal",xw=ee.forwardRef((e,r)=>{const{container:i,...a}=e,[u,d]=ee.useState(!1);Cl(()=>d(!0),[]);const m=i||u&&globalThis?.document?.body;return m?g5.createPortal(ae.jsx(oi.div,{...a,ref:r}),m):null});xw.displayName=C3;function E3(e,r){return ee.useReducer((i,a)=>r[i][a]??i,e)}var Km=e=>{const{present:r,children:i}=e,a=S3(r),u=typeof i=="function"?i({present:a.isPresent}):ee.Children.only(i),d=ds(a.ref,F3(u));return typeof i=="function"||a.isPresent?ee.cloneElement(u,{ref:d}):null};Km.displayName="Presence";function S3(e){const[r,i]=ee.useState(),a=ee.useRef(null),u=ee.useRef(e),d=ee.useRef("none"),m=e?"mounted":"unmounted",[o,w]=E3(m,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return ee.useEffect(()=>{const E=Og(a.current);d.current=o==="mounted"?E:"none"},[o]),Cl(()=>{const E=a.current,I=u.current;if(I!==e){const O=d.current,P=Og(E);e?w("MOUNT"):P==="none"||E?.display==="none"?w("UNMOUNT"):w(I&&O!==P?"ANIMATION_OUT":"UNMOUNT"),u.current=e}},[e,w]),Cl(()=>{if(r){let E;const I=r.ownerDocument.defaultView??window,D=P=>{const z=Og(a.current).includes(CSS.escape(P.animationName));if(P.target===r&&z&&(w("ANIMATION_END"),!u.current)){const H=r.style.animationFillMode;r.style.animationFillMode="forwards",E=I.setTimeout(()=>{r.style.animationFillMode==="forwards"&&(r.style.animationFillMode=H)})}},O=P=>{P.target===r&&(d.current=Og(a.current))};return r.addEventListener("animationstart",O),r.addEventListener("animationcancel",D),r.addEventListener("animationend",D),()=>{I.clearTimeout(E),r.removeEventListener("animationstart",O),r.removeEventListener("animationcancel",D),r.removeEventListener("animationend",D)}}else w("ANIMATION_END")},[r,w]),{isPresent:["mounted","unmountSuspended"].includes(o),ref:ee.useCallback(E=>{a.current=E?getComputedStyle(E):null,i(E)},[])}}function Og(e){return e?.animationName||"none"}function F3(e){let r=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,i=r&&"isReactWarning"in r&&r.isReactWarning;return i?e.ref:(r=Object.getOwnPropertyDescriptor(e,"ref")?.get,i=r&&"isReactWarning"in r&&r.isReactWarning,i?e.props.ref:e.props.ref||e.ref)}var I3=py[" useInsertionEffect ".trim().toString()]||Cl;function mp({prop:e,defaultProp:r,onChange:i=()=>{},caller:a}){const[u,d,m]=T3({defaultProp:r,onChange:i}),o=e!==void 0,w=o?e:u;{const I=ee.useRef(e!==void 0);ee.useEffect(()=>{const D=I.current;D!==o&&console.warn(`${a} is changing from ${D?"controlled":"uncontrolled"} to ${o?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),I.current=o},[o,a])}const E=ee.useCallback(I=>{if(o){const D=P3(I)?I(e):I;D!==e&&m.current?.(D)}else d(I)},[o,e,d,m]);return[w,E]}function T3({defaultProp:e,onChange:r}){const[i,a]=ee.useState(e),u=ee.useRef(i),d=ee.useRef(r);return I3(()=>{d.current=r},[r]),ee.useEffect(()=>{u.current!==i&&(d.current?.(i),u.current=i)},[i,u]),[i,a,d]}function P3(e){return typeof e=="function"}var x5=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),L3="VisuallyHidden",gy=ee.forwardRef((e,r)=>ae.jsx(oi.span,{...e,ref:r,style:{...x5,...e.style}}));gy.displayName=L3;var M3=gy,bw="ToastProvider",[Bw,k3,U3]=ww("Toast"),[b5]=Hh("Toast",[U3]),[D3,yy]=b5(bw),B5=e=>{const{__scopeToast:r,label:i="Notification",duration:a=5e3,swipeDirection:u="right",swipeThreshold:d=50,children:m}=e,[o,w]=ee.useState(null),[E,I]=ee.useState(0),D=ee.useRef(!1),O=ee.useRef(!1);return i.trim()||console.error(`Invalid prop \`label\` supplied to \`${bw}\`. Expected non-empty \`string\`.`),ae.jsx(Bw.Provider,{scope:r,children:ae.jsx(D3,{scope:r,label:i,duration:a,swipeDirection:u,swipeThreshold:d,toastCount:E,viewport:o,onViewportChange:w,onToastAdd:ee.useCallback(()=>I(P=>P+1),[]),onToastRemove:ee.useCallback(()=>I(P=>P-1),[]),isFocusedToastEscapeKeyDownRef:D,isClosePausedRef:O,children:m})})};B5.displayName=bw;var C5="ToastViewport",R3=["F8"],c_="toast.viewportPause",A_="toast.viewportResume",E5=ee.forwardRef((e,r)=>{const{__scopeToast:i,hotkey:a=R3,label:u="Notifications ({hotkey})",...d}=e,m=yy(C5,i),o=k3(i),w=ee.useRef(null),E=ee.useRef(null),I=ee.useRef(null),D=ee.useRef(null),O=ds(r,D,m.onViewportChange),P=a.join("+").replace(/Key/g,"").replace(/Digit/g,""),W=m.toastCount>0;ee.useEffect(()=>{const H=Z=>{a.length!==0&&a.every(ce=>Z[ce]||Z.code===ce)&&D.current?.focus()};return document.addEventListener("keydown",H),()=>document.removeEventListener("keydown",H)},[a]),ee.useEffect(()=>{const H=w.current,Z=D.current;if(W&&H&&Z){const se=()=>{if(!m.isClosePausedRef.current){const He=new CustomEvent(c_);Z.dispatchEvent(He),m.isClosePausedRef.current=!0}},ce=()=>{if(m.isClosePausedRef.current){const He=new CustomEvent(A_);Z.dispatchEvent(He),m.isClosePausedRef.current=!1}},de=He=>{!H.contains(He.relatedTarget)&&ce()},Pe=()=>{H.contains(document.activeElement)||ce()};return H.addEventListener("focusin",se),H.addEventListener("focusout",de),H.addEventListener("pointermove",se),H.addEventListener("pointerleave",Pe),window.addEventListener("blur",se),window.addEventListener("focus",ce),()=>{H.removeEventListener("focusin",se),H.removeEventListener("focusout",de),H.removeEventListener("pointermove",se),H.removeEventListener("pointerleave",Pe),window.removeEventListener("blur",se),window.removeEventListener("focus",ce)}}},[W,m.isClosePausedRef]);const z=ee.useCallback(({tabbingDirection:H})=>{const se=o().map(ce=>{const de=ce.ref.current,Pe=[de,...Z3(de)];return H==="forwards"?Pe:Pe.reverse()});return(H==="forwards"?se.reverse():se).flat()},[o]);return ee.useEffect(()=>{const H=D.current;if(H){const Z=se=>{const ce=se.altKey||se.ctrlKey||se.metaKey;if(se.key==="Tab"&&!ce){const Pe=document.activeElement,He=se.shiftKey;if(se.target===H&&He){E.current?.focus();return}const Be=z({tabbingDirection:He?"backwards":"forwards"}),Je=Be.findIndex(Ae=>Ae===Pe);Zv(Be.slice(Je+1))?se.preventDefault():He?E.current?.focus():I.current?.focus()}};return H.addEventListener("keydown",Z),()=>H.removeEventListener("keydown",Z)}},[o,z]),ae.jsxs(B3,{ref:w,role:"region","aria-label":u.replace("{hotkey}",P),tabIndex:-1,style:{pointerEvents:W?void 0:"none"},children:[W&&ae.jsx(u_,{ref:E,onFocusFromOutsideViewport:()=>{const H=z({tabbingDirection:"forwards"});Zv(H)}}),ae.jsx(Bw.Slot,{scope:i,children:ae.jsx(oi.ol,{tabIndex:-1,...d,ref:O})}),W&&ae.jsx(u_,{ref:I,onFocusFromOutsideViewport:()=>{const H=z({tabbingDirection:"backwards"});Zv(H)}})]})});E5.displayName=C5;var S5="ToastFocusProxy",u_=ee.forwardRef((e,r)=>{const{__scopeToast:i,onFocusFromOutsideViewport:a,...u}=e,d=yy(S5,i);return ae.jsx(gy,{tabIndex:0,...u,ref:r,style:{position:"fixed"},onFocus:m=>{const o=m.relatedTarget;!d.viewport?.contains(o)&&a()}})});u_.displayName=S5;var qm="Toast",N3="toast.swipeStart",Q3="toast.swipeMove",O3="toast.swipeCancel",z3="toast.swipeEnd",F5=ee.forwardRef((e,r)=>{const{forceMount:i,open:a,defaultOpen:u,onOpenChange:d,...m}=e,[o,w]=mp({prop:a,defaultProp:u??!0,onChange:d,caller:qm});return ae.jsx(Km,{present:i||o,children:ae.jsx(V3,{open:o,...m,ref:r,onClose:()=>w(!1),onPause:iu(e.onPause),onResume:iu(e.onResume),onSwipeStart:Un(e.onSwipeStart,E=>{E.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:Un(e.onSwipeMove,E=>{const{x:I,y:D}=E.detail.delta;E.currentTarget.setAttribute("data-swipe","move"),E.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${I}px`),E.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${D}px`)}),onSwipeCancel:Un(e.onSwipeCancel,E=>{E.currentTarget.setAttribute("data-swipe","cancel"),E.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),E.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),E.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),E.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:Un(e.onSwipeEnd,E=>{const{x:I,y:D}=E.detail.delta;E.currentTarget.setAttribute("data-swipe","end"),E.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),E.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),E.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${I}px`),E.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${D}px`),w(!1)})})})});F5.displayName=qm;var[H3,j3]=b5(qm,{onClose(){}}),V3=ee.forwardRef((e,r)=>{const{__scopeToast:i,type:a="foreground",duration:u,open:d,onClose:m,onEscapeKeyDown:o,onPause:w,onResume:E,onSwipeStart:I,onSwipeMove:D,onSwipeCancel:O,onSwipeEnd:P,...W}=e,z=yy(qm,i),[H,Z]=ee.useState(null),se=ds(r,Ie=>Z(Ie)),ce=ee.useRef(null),de=ee.useRef(null),Pe=u||z.duration,He=ee.useRef(0),Xe=ee.useRef(Pe),Qe=ee.useRef(0),{onToastAdd:Be,onToastRemove:Je}=z,Ae=iu(()=>{H?.contains(document.activeElement)&&z.viewport?.focus(),m()}),me=ee.useCallback(Ie=>{!Ie||Ie===1/0||(window.clearTimeout(Qe.current),He.current=new Date().getTime(),Qe.current=window.setTimeout(Ae,Ie))},[Ae]);ee.useEffect(()=>{const Ie=z.viewport;if(Ie){const ut=()=>{me(Xe.current),E?.()},it=()=>{const ot=new Date().getTime()-He.current;Xe.current=Xe.current-ot,window.clearTimeout(Qe.current),w?.()};return Ie.addEventListener(c_,it),Ie.addEventListener(A_,ut),()=>{Ie.removeEventListener(c_,it),Ie.removeEventListener(A_,ut)}}},[z.viewport,Pe,w,E,me]),ee.useEffect(()=>{d&&!z.isClosePausedRef.current&&me(Pe)},[d,Pe,z.isClosePausedRef,me]),ee.useEffect(()=>(Be(),()=>Je()),[Be,Je]);const Te=ee.useMemo(()=>H?U5(H):null,[H]);return z.viewport?ae.jsxs(ae.Fragment,{children:[Te&&ae.jsx(G3,{__scopeToast:i,role:"status","aria-live":a==="foreground"?"assertive":"polite",children:Te}),ae.jsx(H3,{scope:i,onClose:Ae,children:_p.createPortal(ae.jsx(Bw.ItemSlot,{scope:i,children:ae.jsx(b3,{asChild:!0,onEscapeKeyDown:Un(o,()=>{z.isFocusedToastEscapeKeyDownRef.current||Ae(),z.isFocusedToastEscapeKeyDownRef.current=!1}),children:ae.jsx(oi.li,{tabIndex:0,"data-state":d?"open":"closed","data-swipe-direction":z.swipeDirection,...W,ref:se,style:{userSelect:"none",touchAction:"none",...e.style},onKeyDown:Un(e.onKeyDown,Ie=>{Ie.key==="Escape"&&(o?.(Ie.nativeEvent),Ie.nativeEvent.defaultPrevented||(z.isFocusedToastEscapeKeyDownRef.current=!0,Ae()))}),onPointerDown:Un(e.onPointerDown,Ie=>{Ie.button===0&&(ce.current={x:Ie.clientX,y:Ie.clientY})}),onPointerMove:Un(e.onPointerMove,Ie=>{if(!ce.current)return;const ut=Ie.clientX-ce.current.x,it=Ie.clientY-ce.current.y,ot=!!de.current,ke=["left","right"].includes(z.swipeDirection),Ne=["left","up"].includes(z.swipeDirection)?Math.min:Math.max,yt=ke?Ne(0,ut):0,Ce=ke?0:Ne(0,it),ie=Ie.pointerType==="touch"?10:2,Ee={x:yt,y:Ce},Le={originalEvent:Ie,delta:Ee};ot?(de.current=Ee,zg(Q3,D,Le,{discrete:!1})):qb(Ee,z.swipeDirection,ie)?(de.current=Ee,zg(N3,I,Le,{discrete:!1}),Ie.target.setPointerCapture(Ie.pointerId)):(Math.abs(ut)>ie||Math.abs(it)>ie)&&(ce.current=null)}),onPointerUp:Un(e.onPointerUp,Ie=>{const ut=de.current,it=Ie.target;if(it.hasPointerCapture(Ie.pointerId)&&it.releasePointerCapture(Ie.pointerId),de.current=null,ce.current=null,ut){const ot=Ie.currentTarget,ke={originalEvent:Ie,delta:ut};qb(ut,z.swipeDirection,z.swipeThreshold)?zg(z3,P,ke,{discrete:!0}):zg(O3,O,ke,{discrete:!0}),ot.addEventListener("click",Ne=>Ne.preventDefault(),{once:!0})}})})})}),z.viewport)})]}):null}),G3=e=>{const{__scopeToast:r,children:i,...a}=e,u=yy(qm,r),[d,m]=ee.useState(!1),[o,w]=ee.useState(!1);return $3(()=>m(!0)),ee.useEffect(()=>{const E=window.setTimeout(()=>w(!0),1e3);return()=>window.clearTimeout(E)},[]),o?null:ae.jsx(xw,{asChild:!0,children:ae.jsx(gy,{...a,children:d&&ae.jsxs(ae.Fragment,{children:[u.label," ",i]})})})},K3="ToastTitle",I5=ee.forwardRef((e,r)=>{const{__scopeToast:i,...a}=e;return ae.jsx(oi.div,{...a,ref:r})});I5.displayName=K3;var q3="ToastDescription",T5=ee.forwardRef((e,r)=>{const{__scopeToast:i,...a}=e;return ae.jsx(oi.div,{...a,ref:r})});T5.displayName=q3;var P5="ToastAction",L5=ee.forwardRef((e,r)=>{const{altText:i,...a}=e;return i.trim()?ae.jsx(k5,{altText:i,asChild:!0,children:ae.jsx(Cw,{...a,ref:r})}):(console.error(`Invalid prop \`altText\` supplied to \`${P5}\`. Expected non-empty \`string\`.`),null)});L5.displayName=P5;var M5="ToastClose",Cw=ee.forwardRef((e,r)=>{const{__scopeToast:i,...a}=e,u=j3(M5,i);return ae.jsx(k5,{asChild:!0,children:ae.jsx(oi.button,{type:"button",...a,ref:r,onClick:Un(e.onClick,u.onClose)})})});Cw.displayName=M5;var k5=ee.forwardRef((e,r)=>{const{__scopeToast:i,altText:a,...u}=e;return ae.jsx(oi.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":a||void 0,...u,ref:r})});function U5(e){const r=[];return Array.from(e.childNodes).forEach(a=>{if(a.nodeType===a.TEXT_NODE&&a.textContent&&r.push(a.textContent),W3(a)){const u=a.ariaHidden||a.hidden||a.style.display==="none",d=a.dataset.radixToastAnnounceExclude==="";if(!u)if(d){const m=a.dataset.radixToastAnnounceAlt;m&&r.push(m)}else r.push(...U5(a))}}),r}function zg(e,r,i,{discrete:a}){const u=i.originalEvent.currentTarget,d=new CustomEvent(e,{bubbles:!0,cancelable:!0,detail:i});r&&u.addEventListener(e,r,{once:!0}),a?y5(u,d):u.dispatchEvent(d)}var qb=(e,r,i=0)=>{const a=Math.abs(e.x),u=Math.abs(e.y),d=a>u;return r==="left"||r==="right"?d&&a>i:!d&&u>i};function $3(e=()=>{}){const r=iu(e);Cl(()=>{let i=0,a=0;return i=window.requestAnimationFrame(()=>a=window.requestAnimationFrame(r)),()=>{window.cancelAnimationFrame(i),window.cancelAnimationFrame(a)}},[r])}function W3(e){return e.nodeType===e.ELEMENT_NODE}function Z3(e){const r=[],i=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:a=>{const u=a.tagName==="INPUT"&&a.type==="hidden";return a.disabled||a.hidden||u?NodeFilter.FILTER_SKIP:a.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;i.nextNode();)r.push(i.currentNode);return r}function Zv(e){const r=document.activeElement;return e.some(i=>i===r?!0:(i.focus(),document.activeElement!==r))}var X3=B5,D5=E5,R5=F5,N5=I5,Q5=T5,O5=L5,z5=Cw;function H5(e){var r,i,a="";if(typeof e=="string"||typeof e=="number")a+=e;else if(typeof e=="object")if(Array.isArray(e)){var u=e.length;for(r=0;r<u;r++)e[r]&&(i=H5(e[r]))&&(a&&(a+=" "),a+=i)}else for(i in e)e[i]&&(a&&(a+=" "),a+=i);return a}function j5(){for(var e,r,i=0,a="",u=arguments.length;i<u;i++)(e=arguments[i])&&(r=H5(e))&&(a&&(a+=" "),a+=r);return a}const $b=e=>typeof e=="boolean"?`${e}`:e===0?"0":e,Wb=j5,vy=(e,r)=>i=>{var a;if(r?.variants==null)return Wb(e,i?.class,i?.className);const{variants:u,defaultVariants:d}=r,m=Object.keys(u).map(E=>{const I=i?.[E],D=d?.[E];if(I===null)return null;const O=$b(I)||$b(D);return u[E][O]}),o=i&&Object.entries(i).reduce((E,I)=>{let[D,O]=I;return O===void 0||(E[D]=O),E},{}),w=r==null||(a=r.compoundVariants)===null||a===void 0?void 0:a.reduce((E,I)=>{let{class:D,className:O,...P}=I;return Object.entries(P).every(W=>{let[z,H]=W;return Array.isArray(H)?H.includes({...d,...o}[z]):{...d,...o}[z]===H})?[...E,D,O]:E},[]);return Wb(e,m,w,i?.class,i?.className)};const Y3=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),V5=(...e)=>e.filter((r,i,a)=>!!r&&r.trim()!==""&&a.indexOf(r)===i).join(" ").trim();var J3={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const eP=ee.forwardRef(({color:e="currentColor",size:r=24,strokeWidth:i=2,absoluteStrokeWidth:a,className:u="",children:d,iconNode:m,...o},w)=>ee.createElement("svg",{ref:w,...J3,width:r,height:r,stroke:e,strokeWidth:a?Number(i)*24/Number(r):i,className:V5("lucide",u),...o},[...m.map(([E,I])=>ee.createElement(E,I)),...Array.isArray(d)?d:[d]]));const il=(e,r)=>{const i=ee.forwardRef(({className:a,...u},d)=>ee.createElement(eP,{ref:d,iconNode:r,className:V5(`lucide-${Y3(e)}`,a),...u}));return i.displayName=`${e}`,i};const tP=il("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]]);const rP=il("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);const nP=il("ChartColumn",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);const G5=il("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);const K5=il("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);const iP=il("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);const sP=il("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);const h_=il("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);const oP=il("FileImage",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["circle",{cx:"10",cy:"12",r:"2",key:"737tya"}],["path",{d:"m20 17-1.296-1.296a2.41 2.41 0 0 0-3.408 0L9 22",key:"wt3hpn"}]]);const aP=il("Github",[["path",{d:"M15 22v-4a4.8 4.8 0 0 0-1-3.5c3 0 6-2 6-5.5.08-1.25-.27-2.48-1-3.5.28-1.15.28-2.35 0-3.5 0 0-1 0-3 1.5-2.64-.5-5.36-.5-8 0C6 2 5 2 5 2c-.3 1.15-.3 2.35 0 3.5A5.403 5.403 0 0 0 4 9c0 3.5 3 5.5 6 5.5-.39.49-.68 1.05-.85 1.65-.17.6-.22 1.23-.15 1.85v4",key:"tonef"}],["path",{d:"M9 18c-4.51 2-5-2-7-2",key:"9comsn"}]]);const d_=il("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);const lP=il("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);const cP=il("Microscope",[["path",{d:"M6 18h8",key:"1borvv"}],["path",{d:"M3 22h18",key:"8prr45"}],["path",{d:"M14 22a7 7 0 1 0 0-14h-1",key:"1jwaiy"}],["path",{d:"M9 14h2",key:"197e7h"}],["path",{d:"M9 12a2 2 0 0 1-2-2V6h6v4a2 2 0 0 1-2 2Z",key:"1bmzmy"}],["path",{d:"M12 6V3a1 1 0 0 0-1-1H9a1 1 0 0 0-1 1v3",key:"1drr47"}]]);const Ew=il("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);const AP=il("Settings2",[["path",{d:"M20 7h-9",key:"3s1dr2"}],["path",{d:"M14 17H5",key:"gfn3mx"}],["circle",{cx:"17",cy:"17",r:"3",key:"18b49y"}],["circle",{cx:"7",cy:"7",r:"3",key:"dfmy0x"}]]);const Zb=il("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]);const Xb=il("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);const $m=il("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),Sw="-",uP=e=>{const r=dP(e),{conflictingClassGroups:i,conflictingClassGroupModifiers:a}=e;return{getClassGroupId:m=>{const o=m.split(Sw);return o[0]===""&&o.length!==1&&o.shift(),q5(o,r)||hP(m)},getConflictingClassGroupIds:(m,o)=>{const w=i[m]||[];return o&&a[m]?[...w,...a[m]]:w}}},q5=(e,r)=>{if(e.length===0)return r.classGroupId;const i=e[0],a=r.nextPart.get(i),u=a?q5(e.slice(1),a):void 0;if(u)return u;if(r.validators.length===0)return;const d=e.join(Sw);return r.validators.find(({validator:m})=>m(d))?.classGroupId},Yb=/^\[(.+)\]$/,hP=e=>{if(Yb.test(e)){const r=Yb.exec(e)[1],i=r?.substring(0,r.indexOf(":"));if(i)return"arbitrary.."+i}},dP=e=>{const{theme:r,prefix:i}=e,a={nextPart:new Map,validators:[]};return pP(Object.entries(e.classGroups),i).forEach(([d,m])=>{f_(m,a,d,r)}),a},f_=(e,r,i,a)=>{e.forEach(u=>{if(typeof u=="string"){const d=u===""?r:Jb(r,u);d.classGroupId=i;return}if(typeof u=="function"){if(fP(u)){f_(u(a),r,i,a);return}r.validators.push({validator:u,classGroupId:i});return}Object.entries(u).forEach(([d,m])=>{f_(m,Jb(r,d),i,a)})})},Jb=(e,r)=>{let i=e;return r.split(Sw).forEach(a=>{i.nextPart.has(a)||i.nextPart.set(a,{nextPart:new Map,validators:[]}),i=i.nextPart.get(a)}),i},fP=e=>e.isThemeGetter,pP=(e,r)=>r?e.map(([i,a])=>{const u=a.map(d=>typeof d=="string"?r+d:typeof d=="object"?Object.fromEntries(Object.entries(d).map(([m,o])=>[r+m,o])):d);return[i,u]}):e,mP=e=>{if(e<1)return{get:()=>{},set:()=>{}};let r=0,i=new Map,a=new Map;const u=(d,m)=>{i.set(d,m),r++,r>e&&(r=0,a=i,i=new Map)};return{get(d){let m=i.get(d);if(m!==void 0)return m;if((m=a.get(d))!==void 0)return u(d,m),m},set(d,m){i.has(d)?i.set(d,m):u(d,m)}}},$5="!",gP=e=>{const{separator:r,experimentalParseClassName:i}=e,a=r.length===1,u=r[0],d=r.length,m=o=>{const w=[];let E=0,I=0,D;for(let H=0;H<o.length;H++){let Z=o[H];if(E===0){if(Z===u&&(a||o.slice(H,H+d)===r)){w.push(o.slice(I,H)),I=H+d;continue}if(Z==="/"){D=H;continue}}Z==="["?E++:Z==="]"&&E--}const O=w.length===0?o:o.substring(I),P=O.startsWith($5),W=P?O.substring(1):O,z=D&&D>I?D-I:void 0;return{modifiers:w,hasImportantModifier:P,baseClassName:W,maybePostfixModifierPosition:z}};return i?o=>i({className:o,parseClassName:m}):m},yP=e=>{if(e.length<=1)return e;const r=[];let i=[];return e.forEach(a=>{a[0]==="["?(r.push(...i.sort(),a),i=[]):i.push(a)}),r.push(...i.sort()),r},vP=e=>({cache:mP(e.cacheSize),parseClassName:gP(e),...uP(e)}),_P=/\s+/,wP=(e,r)=>{const{parseClassName:i,getClassGroupId:a,getConflictingClassGroupIds:u}=r,d=[],m=e.trim().split(_P);let o="";for(let w=m.length-1;w>=0;w-=1){const E=m[w],{modifiers:I,hasImportantModifier:D,baseClassName:O,maybePostfixModifierPosition:P}=i(E);let W=!!P,z=a(W?O.substring(0,P):O);if(!z){if(!W){o=E+(o.length>0?" "+o:o);continue}if(z=a(O),!z){o=E+(o.length>0?" "+o:o);continue}W=!1}const H=yP(I).join(":"),Z=D?H+$5:H,se=Z+z;if(d.includes(se))continue;d.push(se);const ce=u(z,W);for(let de=0;de<ce.length;++de){const Pe=ce[de];d.push(Z+Pe)}o=E+(o.length>0?" "+o:o)}return o};function xP(){let e=0,r,i,a="";for(;e<arguments.length;)(r=arguments[e++])&&(i=W5(r))&&(a&&(a+=" "),a+=i);return a}const W5=e=>{if(typeof e=="string")return e;let r,i="";for(let a=0;a<e.length;a++)e[a]&&(r=W5(e[a]))&&(i&&(i+=" "),i+=r);return i};function bP(e,...r){let i,a,u,d=m;function m(w){const E=r.reduce((I,D)=>D(I),e());return i=vP(E),a=i.cache.get,u=i.cache.set,d=o,o(w)}function o(w){const E=a(w);if(E)return E;const I=wP(w,i);return u(w,I),I}return function(){return d(xP.apply(null,arguments))}}const Gs=e=>{const r=i=>i[e]||[];return r.isThemeGetter=!0,r},Z5=/^\[(?:([a-z-]+):)?(.+)\]$/i,BP=/^\d+\/\d+$/,CP=new Set(["px","full","screen"]),EP=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,SP=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,FP=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,IP=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,TP=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Lh=e=>lp(e)||CP.has(e)||BP.test(e),rd=e=>wp(e,"length",NP),lp=e=>!!e&&!Number.isNaN(Number(e)),Xv=e=>wp(e,"number",lp),sm=e=>!!e&&Number.isInteger(Number(e)),PP=e=>e.endsWith("%")&&lp(e.slice(0,-1)),Wn=e=>Z5.test(e),nd=e=>EP.test(e),LP=new Set(["length","size","percentage"]),MP=e=>wp(e,LP,X5),kP=e=>wp(e,"position",X5),UP=new Set(["image","url"]),DP=e=>wp(e,UP,OP),RP=e=>wp(e,"",QP),om=()=>!0,wp=(e,r,i)=>{const a=Z5.exec(e);return a?a[1]?typeof r=="string"?a[1]===r:r.has(a[1]):i(a[2]):!1},NP=e=>SP.test(e)&&!FP.test(e),X5=()=>!1,QP=e=>IP.test(e),OP=e=>TP.test(e),zP=()=>{const e=Gs("colors"),r=Gs("spacing"),i=Gs("blur"),a=Gs("brightness"),u=Gs("borderColor"),d=Gs("borderRadius"),m=Gs("borderSpacing"),o=Gs("borderWidth"),w=Gs("contrast"),E=Gs("grayscale"),I=Gs("hueRotate"),D=Gs("invert"),O=Gs("gap"),P=Gs("gradientColorStops"),W=Gs("gradientColorStopPositions"),z=Gs("inset"),H=Gs("margin"),Z=Gs("opacity"),se=Gs("padding"),ce=Gs("saturate"),de=Gs("scale"),Pe=Gs("sepia"),He=Gs("skew"),Xe=Gs("space"),Qe=Gs("translate"),Be=()=>["auto","contain","none"],Je=()=>["auto","hidden","clip","visible","scroll"],Ae=()=>["auto",Wn,r],me=()=>[Wn,r],Te=()=>["",Lh,rd],Ie=()=>["auto",lp,Wn],ut=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],it=()=>["solid","dashed","dotted","double","none"],ot=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],ke=()=>["start","end","center","between","around","evenly","stretch"],Ne=()=>["","0",Wn],yt=()=>["auto","avoid","all","avoid-page","page","left","right","column"],Ce=()=>[lp,Wn];return{cacheSize:500,separator:":",theme:{colors:[om],spacing:[Lh,rd],blur:["none","",nd,Wn],brightness:Ce(),borderColor:[e],borderRadius:["none","","full",nd,Wn],borderSpacing:me(),borderWidth:Te(),contrast:Ce(),grayscale:Ne(),hueRotate:Ce(),invert:Ne(),gap:me(),gradientColorStops:[e],gradientColorStopPositions:[PP,rd],inset:Ae(),margin:Ae(),opacity:Ce(),padding:me(),saturate:Ce(),scale:Ce(),sepia:Ne(),skew:Ce(),space:me(),translate:me()},classGroups:{aspect:[{aspect:["auto","square","video",Wn]}],container:["container"],columns:[{columns:[nd]}],"break-after":[{"break-after":yt()}],"break-before":[{"break-before":yt()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...ut(),Wn]}],overflow:[{overflow:Je()}],"overflow-x":[{"overflow-x":Je()}],"overflow-y":[{"overflow-y":Je()}],overscroll:[{overscroll:Be()}],"overscroll-x":[{"overscroll-x":Be()}],"overscroll-y":[{"overscroll-y":Be()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[z]}],"inset-x":[{"inset-x":[z]}],"inset-y":[{"inset-y":[z]}],start:[{start:[z]}],end:[{end:[z]}],top:[{top:[z]}],right:[{right:[z]}],bottom:[{bottom:[z]}],left:[{left:[z]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",sm,Wn]}],basis:[{basis:Ae()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",Wn]}],grow:[{grow:Ne()}],shrink:[{shrink:Ne()}],order:[{order:["first","last","none",sm,Wn]}],"grid-cols":[{"grid-cols":[om]}],"col-start-end":[{col:["auto",{span:["full",sm,Wn]},Wn]}],"col-start":[{"col-start":Ie()}],"col-end":[{"col-end":Ie()}],"grid-rows":[{"grid-rows":[om]}],"row-start-end":[{row:["auto",{span:[sm,Wn]},Wn]}],"row-start":[{"row-start":Ie()}],"row-end":[{"row-end":Ie()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",Wn]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",Wn]}],gap:[{gap:[O]}],"gap-x":[{"gap-x":[O]}],"gap-y":[{"gap-y":[O]}],"justify-content":[{justify:["normal",...ke()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...ke(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...ke(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[se]}],px:[{px:[se]}],py:[{py:[se]}],ps:[{ps:[se]}],pe:[{pe:[se]}],pt:[{pt:[se]}],pr:[{pr:[se]}],pb:[{pb:[se]}],pl:[{pl:[se]}],m:[{m:[H]}],mx:[{mx:[H]}],my:[{my:[H]}],ms:[{ms:[H]}],me:[{me:[H]}],mt:[{mt:[H]}],mr:[{mr:[H]}],mb:[{mb:[H]}],ml:[{ml:[H]}],"space-x":[{"space-x":[Xe]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[Xe]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",Wn,r]}],"min-w":[{"min-w":[Wn,r,"min","max","fit"]}],"max-w":[{"max-w":[Wn,r,"none","full","min","max","fit","prose",{screen:[nd]},nd]}],h:[{h:[Wn,r,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[Wn,r,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[Wn,r,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[Wn,r,"auto","min","max","fit"]}],"font-size":[{text:["base",nd,rd]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",Xv]}],"font-family":[{font:[om]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",Wn]}],"line-clamp":[{"line-clamp":["none",lp,Xv]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",Lh,Wn]}],"list-image":[{"list-image":["none",Wn]}],"list-style-type":[{list:["none","disc","decimal",Wn]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[e]}],"placeholder-opacity":[{"placeholder-opacity":[Z]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[e]}],"text-opacity":[{"text-opacity":[Z]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...it(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",Lh,rd]}],"underline-offset":[{"underline-offset":["auto",Lh,Wn]}],"text-decoration-color":[{decoration:[e]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:me()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Wn]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Wn]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[Z]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...ut(),kP]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",MP]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},DP]}],"bg-color":[{bg:[e]}],"gradient-from-pos":[{from:[W]}],"gradient-via-pos":[{via:[W]}],"gradient-to-pos":[{to:[W]}],"gradient-from":[{from:[P]}],"gradient-via":[{via:[P]}],"gradient-to":[{to:[P]}],rounded:[{rounded:[d]}],"rounded-s":[{"rounded-s":[d]}],"rounded-e":[{"rounded-e":[d]}],"rounded-t":[{"rounded-t":[d]}],"rounded-r":[{"rounded-r":[d]}],"rounded-b":[{"rounded-b":[d]}],"rounded-l":[{"rounded-l":[d]}],"rounded-ss":[{"rounded-ss":[d]}],"rounded-se":[{"rounded-se":[d]}],"rounded-ee":[{"rounded-ee":[d]}],"rounded-es":[{"rounded-es":[d]}],"rounded-tl":[{"rounded-tl":[d]}],"rounded-tr":[{"rounded-tr":[d]}],"rounded-br":[{"rounded-br":[d]}],"rounded-bl":[{"rounded-bl":[d]}],"border-w":[{border:[o]}],"border-w-x":[{"border-x":[o]}],"border-w-y":[{"border-y":[o]}],"border-w-s":[{"border-s":[o]}],"border-w-e":[{"border-e":[o]}],"border-w-t":[{"border-t":[o]}],"border-w-r":[{"border-r":[o]}],"border-w-b":[{"border-b":[o]}],"border-w-l":[{"border-l":[o]}],"border-opacity":[{"border-opacity":[Z]}],"border-style":[{border:[...it(),"hidden"]}],"divide-x":[{"divide-x":[o]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[o]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[Z]}],"divide-style":[{divide:it()}],"border-color":[{border:[u]}],"border-color-x":[{"border-x":[u]}],"border-color-y":[{"border-y":[u]}],"border-color-s":[{"border-s":[u]}],"border-color-e":[{"border-e":[u]}],"border-color-t":[{"border-t":[u]}],"border-color-r":[{"border-r":[u]}],"border-color-b":[{"border-b":[u]}],"border-color-l":[{"border-l":[u]}],"divide-color":[{divide:[u]}],"outline-style":[{outline:["",...it()]}],"outline-offset":[{"outline-offset":[Lh,Wn]}],"outline-w":[{outline:[Lh,rd]}],"outline-color":[{outline:[e]}],"ring-w":[{ring:Te()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[e]}],"ring-opacity":[{"ring-opacity":[Z]}],"ring-offset-w":[{"ring-offset":[Lh,rd]}],"ring-offset-color":[{"ring-offset":[e]}],shadow:[{shadow:["","inner","none",nd,RP]}],"shadow-color":[{shadow:[om]}],opacity:[{opacity:[Z]}],"mix-blend":[{"mix-blend":[...ot(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":ot()}],filter:[{filter:["","none"]}],blur:[{blur:[i]}],brightness:[{brightness:[a]}],contrast:[{contrast:[w]}],"drop-shadow":[{"drop-shadow":["","none",nd,Wn]}],grayscale:[{grayscale:[E]}],"hue-rotate":[{"hue-rotate":[I]}],invert:[{invert:[D]}],saturate:[{saturate:[ce]}],sepia:[{sepia:[Pe]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[i]}],"backdrop-brightness":[{"backdrop-brightness":[a]}],"backdrop-contrast":[{"backdrop-contrast":[w]}],"backdrop-grayscale":[{"backdrop-grayscale":[E]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[I]}],"backdrop-invert":[{"backdrop-invert":[D]}],"backdrop-opacity":[{"backdrop-opacity":[Z]}],"backdrop-saturate":[{"backdrop-saturate":[ce]}],"backdrop-sepia":[{"backdrop-sepia":[Pe]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[m]}],"border-spacing-x":[{"border-spacing-x":[m]}],"border-spacing-y":[{"border-spacing-y":[m]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",Wn]}],duration:[{duration:Ce()}],ease:[{ease:["linear","in","out","in-out",Wn]}],delay:[{delay:Ce()}],animate:[{animate:["none","spin","ping","pulse","bounce",Wn]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[de]}],"scale-x":[{"scale-x":[de]}],"scale-y":[{"scale-y":[de]}],rotate:[{rotate:[sm,Wn]}],"translate-x":[{"translate-x":[Qe]}],"translate-y":[{"translate-y":[Qe]}],"skew-x":[{"skew-x":[He]}],"skew-y":[{"skew-y":[He]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",Wn]}],accent:[{accent:["auto",e]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Wn]}],"caret-color":[{caret:[e]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":me()}],"scroll-mx":[{"scroll-mx":me()}],"scroll-my":[{"scroll-my":me()}],"scroll-ms":[{"scroll-ms":me()}],"scroll-me":[{"scroll-me":me()}],"scroll-mt":[{"scroll-mt":me()}],"scroll-mr":[{"scroll-mr":me()}],"scroll-mb":[{"scroll-mb":me()}],"scroll-ml":[{"scroll-ml":me()}],"scroll-p":[{"scroll-p":me()}],"scroll-px":[{"scroll-px":me()}],"scroll-py":[{"scroll-py":me()}],"scroll-ps":[{"scroll-ps":me()}],"scroll-pe":[{"scroll-pe":me()}],"scroll-pt":[{"scroll-pt":me()}],"scroll-pr":[{"scroll-pr":me()}],"scroll-pb":[{"scroll-pb":me()}],"scroll-pl":[{"scroll-pl":me()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Wn]}],fill:[{fill:[e,"none"]}],"stroke-w":[{stroke:[Lh,rd,Xv]}],stroke:[{stroke:[e,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},HP=bP(zP);function qi(...e){return HP(j5(e))}const jP=X3,Y5=ee.forwardRef(({className:e,...r},i)=>ae.jsx(D5,{ref:i,className:qi("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",e),...r}));Y5.displayName=D5.displayName;const VP=vy("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),J5=ee.forwardRef(({className:e,variant:r,...i},a)=>ae.jsx(R5,{ref:a,className:qi(VP({variant:r}),e),...i}));J5.displayName=R5.displayName;const GP=ee.forwardRef(({className:e,...r},i)=>ae.jsx(O5,{ref:i,className:qi("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",e),...r}));GP.displayName=O5.displayName;const eE=ee.forwardRef(({className:e,...r},i)=>ae.jsx(z5,{ref:i,className:qi("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",e),"toast-close":"",...r,children:ae.jsx($m,{className:"h-4 w-4"})}));eE.displayName=z5.displayName;const tE=ee.forwardRef(({className:e,...r},i)=>ae.jsx(N5,{ref:i,className:qi("text-sm font-semibold",e),...r}));tE.displayName=N5.displayName;const rE=ee.forwardRef(({className:e,...r},i)=>ae.jsx(Q5,{ref:i,className:qi("text-sm opacity-90",e),...r}));rE.displayName=Q5.displayName;function KP(){const{toasts:e}=r3();return ae.jsxs(jP,{children:[e.map(function({id:r,title:i,description:a,action:u,...d}){return ae.jsxs(J5,{...d,children:[ae.jsxs("div",{className:"grid gap-1",children:[i&&ae.jsx(tE,{children:i}),a&&ae.jsx(rE,{children:a})]}),u,ae.jsx(eE,{})]},r)}),ae.jsx(Y5,{})]})}var e2=["light","dark"],qP="(prefers-color-scheme: dark)",$P=ee.createContext(void 0),WP={setTheme:e=>{},themes:[]},ZP=()=>{var e;return(e=ee.useContext($P))!=null?e:WP};ee.memo(({forcedTheme:e,storageKey:r,attribute:i,enableSystem:a,enableColorScheme:u,defaultTheme:d,value:m,attrs:o,nonce:w})=>{let E=d==="system",I=i==="class"?`var d=document.documentElement,c=d.classList;${`c.remove(${o.map(W=>`'${W}'`).join(",")})`};`:`var d=document.documentElement,n='${i}',s='setAttribute';`,D=u?e2.includes(d)&&d?`if(e==='light'||e==='dark'||!e)d.style.colorScheme=e||'${d}'`:"if(e==='light'||e==='dark')d.style.colorScheme=e":"",O=(W,z=!1,H=!0)=>{let Z=m?m[W]:W,se=z?W+"|| ''":`'${Z}'`,ce="";return u&&H&&!z&&e2.includes(W)&&(ce+=`d.style.colorScheme = '${W}';`),i==="class"?z||Z?ce+=`c.add(${se})`:ce+="null":Z&&(ce+=`d[s](n,${se})`),ce},P=e?`!function(){${I}${O(e)}}()`:a?`!function(){try{${I}var e=localStorage.getItem('${r}');if('system'===e||(!e&&${E})){var t='${qP}',m=window.matchMedia(t);if(m.media!==t||m.matches){${O("dark")}}else{${O("light")}}}else if(e){${m?`var x=${JSON.stringify(m)};`:""}${O(m?"x[e]":"e",!0)}}${E?"":"else{"+O(d,!1,!1)+"}"}${D}}catch(e){}}()`:`!function(){try{${I}var e=localStorage.getItem('${r}');if(e){${m?`var x=${JSON.stringify(m)};`:""}${O(m?"x[e]":"e",!0)}}else{${O(d,!1,!1)};}${D}}catch(t){}}();`;return ee.createElement("script",{nonce:w,dangerouslySetInnerHTML:{__html:P}})});var XP=e=>{switch(e){case"success":return eL;case"info":return rL;case"warning":return tL;case"error":return nL;default:return null}},YP=Array(12).fill(0),JP=({visible:e,className:r})=>Pr.createElement("div",{className:["sonner-loading-wrapper",r].filter(Boolean).join(" "),"data-visible":e},Pr.createElement("div",{className:"sonner-spinner"},YP.map((i,a)=>Pr.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${a}`})))),eL=Pr.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},Pr.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),tL=Pr.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},Pr.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),rL=Pr.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},Pr.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),nL=Pr.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},Pr.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),iL=Pr.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},Pr.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),Pr.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),sL=()=>{let[e,r]=Pr.useState(document.hidden);return Pr.useEffect(()=>{let i=()=>{r(document.hidden)};return document.addEventListener("visibilitychange",i),()=>window.removeEventListener("visibilitychange",i)},[]),e},p_=1,oL=class{constructor(){this.subscribe=r=>(this.subscribers.push(r),()=>{let i=this.subscribers.indexOf(r);this.subscribers.splice(i,1)}),this.publish=r=>{this.subscribers.forEach(i=>i(r))},this.addToast=r=>{this.publish(r),this.toasts=[...this.toasts,r]},this.create=r=>{var i;let{message:a,...u}=r,d=typeof r?.id=="number"||((i=r.id)==null?void 0:i.length)>0?r.id:p_++,m=this.toasts.find(w=>w.id===d),o=r.dismissible===void 0?!0:r.dismissible;return this.dismissedToasts.has(d)&&this.dismissedToasts.delete(d),m?this.toasts=this.toasts.map(w=>w.id===d?(this.publish({...w,...r,id:d,title:a}),{...w,...r,id:d,dismissible:o,title:a}):w):this.addToast({title:a,...u,dismissible:o,id:d}),d},this.dismiss=r=>(this.dismissedToasts.add(r),r||this.toasts.forEach(i=>{this.subscribers.forEach(a=>a({id:i.id,dismiss:!0}))}),this.subscribers.forEach(i=>i({id:r,dismiss:!0})),r),this.message=(r,i)=>this.create({...i,message:r}),this.error=(r,i)=>this.create({...i,message:r,type:"error"}),this.success=(r,i)=>this.create({...i,type:"success",message:r}),this.info=(r,i)=>this.create({...i,type:"info",message:r}),this.warning=(r,i)=>this.create({...i,type:"warning",message:r}),this.loading=(r,i)=>this.create({...i,type:"loading",message:r}),this.promise=(r,i)=>{if(!i)return;let a;i.loading!==void 0&&(a=this.create({...i,promise:r,type:"loading",message:i.loading,description:typeof i.description!="function"?i.description:void 0}));let u=r instanceof Promise?r:r(),d=a!==void 0,m,o=u.then(async E=>{if(m=["resolve",E],Pr.isValidElement(E))d=!1,this.create({id:a,type:"default",message:E});else if(lL(E)&&!E.ok){d=!1;let I=typeof i.error=="function"?await i.error(`HTTP error! status: ${E.status}`):i.error,D=typeof i.description=="function"?await i.description(`HTTP error! status: ${E.status}`):i.description;this.create({id:a,type:"error",message:I,description:D})}else if(i.success!==void 0){d=!1;let I=typeof i.success=="function"?await i.success(E):i.success,D=typeof i.description=="function"?await i.description(E):i.description;this.create({id:a,type:"success",message:I,description:D})}}).catch(async E=>{if(m=["reject",E],i.error!==void 0){d=!1;let I=typeof i.error=="function"?await i.error(E):i.error,D=typeof i.description=="function"?await i.description(E):i.description;this.create({id:a,type:"error",message:I,description:D})}}).finally(()=>{var E;d&&(this.dismiss(a),a=void 0),(E=i.finally)==null||E.call(i)}),w=()=>new Promise((E,I)=>o.then(()=>m[0]==="reject"?I(m[1]):E(m[1])).catch(I));return typeof a!="string"&&typeof a!="number"?{unwrap:w}:Object.assign(a,{unwrap:w})},this.custom=(r,i)=>{let a=i?.id||p_++;return this.create({jsx:r(a),id:a,...i}),a},this.getActiveToasts=()=>this.toasts.filter(r=>!this.dismissedToasts.has(r.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}},Jc=new oL,aL=(e,r)=>{let i=r?.id||p_++;return Jc.addToast({title:e,...r,id:i}),i},lL=e=>e&&typeof e=="object"&&"ok"in e&&typeof e.ok=="boolean"&&"status"in e&&typeof e.status=="number",cL=aL,AL=()=>Jc.toasts,uL=()=>Jc.getActiveToasts();Object.assign(cL,{success:Jc.success,info:Jc.info,warning:Jc.warning,error:Jc.error,custom:Jc.custom,message:Jc.message,promise:Jc.promise,dismiss:Jc.dismiss,loading:Jc.loading},{getHistory:AL,getToasts:uL});function hL(e,{insertAt:r}={}){if(typeof document>"u")return;let i=document.head||document.getElementsByTagName("head")[0],a=document.createElement("style");a.type="text/css",r==="top"&&i.firstChild?i.insertBefore(a,i.firstChild):i.appendChild(a),a.styleSheet?a.styleSheet.cssText=e:a.appendChild(document.createTextNode(e))}hL(`:where(html[dir="ltr"]),:where([data-sonner-toaster][dir="ltr"]){--toast-icon-margin-start: -3px;--toast-icon-margin-end: 4px;--toast-svg-margin-start: -1px;--toast-svg-margin-end: 0px;--toast-button-margin-start: auto;--toast-button-margin-end: 0;--toast-close-button-start: 0;--toast-close-button-end: unset;--toast-close-button-transform: translate(-35%, -35%)}:where(html[dir="rtl"]),:where([data-sonner-toaster][dir="rtl"]){--toast-icon-margin-start: 4px;--toast-icon-margin-end: -3px;--toast-svg-margin-start: 0px;--toast-svg-margin-end: -1px;--toast-button-margin-start: 0;--toast-button-margin-end: auto;--toast-close-button-start: unset;--toast-close-button-end: 0;--toast-close-button-transform: translate(35%, -35%)}:where([data-sonner-toaster]){position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1: hsl(0, 0%, 99%);--gray2: hsl(0, 0%, 97.3%);--gray3: hsl(0, 0%, 95.1%);--gray4: hsl(0, 0%, 93%);--gray5: hsl(0, 0%, 90.9%);--gray6: hsl(0, 0%, 88.7%);--gray7: hsl(0, 0%, 85.8%);--gray8: hsl(0, 0%, 78%);--gray9: hsl(0, 0%, 56.1%);--gray10: hsl(0, 0%, 52.3%);--gray11: hsl(0, 0%, 43.5%);--gray12: hsl(0, 0%, 9%);--border-radius: 8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:none;z-index:999999999;transition:transform .4s ease}:where([data-sonner-toaster][data-lifted="true"]){transform:translateY(-10px)}@media (hover: none) and (pointer: coarse){:where([data-sonner-toaster][data-lifted="true"]){transform:none}}:where([data-sonner-toaster][data-x-position="right"]){right:var(--offset-right)}:where([data-sonner-toaster][data-x-position="left"]){left:var(--offset-left)}:where([data-sonner-toaster][data-x-position="center"]){left:50%;transform:translate(-50%)}:where([data-sonner-toaster][data-y-position="top"]){top:var(--offset-top)}:where([data-sonner-toaster][data-y-position="bottom"]){bottom:var(--offset-bottom)}:where([data-sonner-toast]){--y: translateY(100%);--lift-amount: calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);filter:blur(0);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:none;overflow-wrap:anywhere}:where([data-sonner-toast][data-styled="true"]){padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px #0000001a;width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}:where([data-sonner-toast]:focus-visible){box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast][data-y-position="top"]){top:0;--y: translateY(-100%);--lift: 1;--lift-amount: calc(1 * var(--gap))}:where([data-sonner-toast][data-y-position="bottom"]){bottom:0;--y: translateY(100%);--lift: -1;--lift-amount: calc(var(--lift) * var(--gap))}:where([data-sonner-toast]) :where([data-description]){font-weight:400;line-height:1.4;color:inherit}:where([data-sonner-toast]) :where([data-title]){font-weight:500;line-height:1.5;color:inherit}:where([data-sonner-toast]) :where([data-icon]){display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}:where([data-sonner-toast][data-promise="true"]) :where([data-icon])>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}:where([data-sonner-toast]) :where([data-icon])>*{flex-shrink:0}:where([data-sonner-toast]) :where([data-icon]) svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}:where([data-sonner-toast]) :where([data-content]){display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;cursor:pointer;outline:none;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}:where([data-sonner-toast]) :where([data-button]):focus-visible{box-shadow:0 0 0 2px #0006}:where([data-sonner-toast]) :where([data-button]):first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}:where([data-sonner-toast]) :where([data-cancel]){color:var(--normal-text);background:rgba(0,0,0,.08)}:where([data-sonner-toast][data-theme="dark"]) :where([data-cancel]){background:rgba(255,255,255,.3)}:where([data-sonner-toast]) :where([data-close-button]){position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast] [data-close-button]{background:var(--gray1)}:where([data-sonner-toast]) :where([data-close-button]):focus-visible{box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast]) :where([data-disabled="true"]){cursor:not-allowed}:where([data-sonner-toast]):hover :where([data-close-button]):hover{background:var(--gray2);border-color:var(--gray5)}:where([data-sonner-toast][data-swiping="true"]):before{content:"";position:absolute;left:-50%;right:-50%;height:100%;z-index:-1}:where([data-sonner-toast][data-y-position="top"][data-swiping="true"]):before{bottom:50%;transform:scaleY(3) translateY(50%)}:where([data-sonner-toast][data-y-position="bottom"][data-swiping="true"]):before{top:50%;transform:scaleY(3) translateY(-50%)}:where([data-sonner-toast][data-swiping="false"][data-removed="true"]):before{content:"";position:absolute;inset:0;transform:scaleY(2)}:where([data-sonner-toast]):after{content:"";position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}:where([data-sonner-toast][data-mounted="true"]){--y: translateY(0);opacity:1}:where([data-sonner-toast][data-expanded="false"][data-front="false"]){--scale: var(--toasts-before) * .05 + 1;--y: translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}:where([data-sonner-toast])>*{transition:opacity .4s}:where([data-sonner-toast][data-expanded="false"][data-front="false"][data-styled="true"])>*{opacity:0}:where([data-sonner-toast][data-visible="false"]){opacity:0;pointer-events:none}:where([data-sonner-toast][data-mounted="true"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}:where([data-sonner-toast][data-removed="true"][data-front="true"][data-swipe-out="false"]){--y: translateY(calc(var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="false"]){--y: translateY(40%);opacity:0;transition:transform .5s,opacity .2s}:where([data-sonner-toast][data-removed="true"][data-front="false"]):before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y, 0px)) translate(var(--swipe-amount-x, 0px));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width: 600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-theme=light]{--normal-bg: #fff;--normal-border: var(--gray4);--normal-text: var(--gray12);--success-bg: hsl(143, 85%, 96%);--success-border: hsl(145, 92%, 91%);--success-text: hsl(140, 100%, 27%);--info-bg: hsl(208, 100%, 97%);--info-border: hsl(221, 91%, 91%);--info-text: hsl(210, 92%, 45%);--warning-bg: hsl(49, 100%, 97%);--warning-border: hsl(49, 91%, 91%);--warning-text: hsl(31, 92%, 45%);--error-bg: hsl(359, 100%, 97%);--error-border: hsl(359, 100%, 94%);--error-text: hsl(360, 100%, 45%)}[data-sonner-toaster][data-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg: #fff;--normal-border: var(--gray3);--normal-text: var(--gray12)}[data-sonner-toaster][data-theme=dark]{--normal-bg: #000;--normal-bg-hover: hsl(0, 0%, 12%);--normal-border: hsl(0, 0%, 20%);--normal-border-hover: hsl(0, 0%, 25%);--normal-text: var(--gray1);--success-bg: hsl(150, 100%, 6%);--success-border: hsl(147, 100%, 12%);--success-text: hsl(150, 86%, 65%);--info-bg: hsl(215, 100%, 6%);--info-border: hsl(223, 100%, 12%);--info-text: hsl(216, 87%, 65%);--warning-bg: hsl(64, 100%, 6%);--warning-border: hsl(60, 100%, 12%);--warning-text: hsl(46, 87%, 65%);--error-bg: hsl(358, 76%, 10%);--error-border: hsl(357, 89%, 16%);--error-text: hsl(358, 100%, 81%)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success],[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info],[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning],[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error],[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size: 16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:nth-child(1){animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}to{opacity:.15}}@media (prefers-reduced-motion){[data-sonner-toast],[data-sonner-toast]>*,.sonner-loading-bar{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}
`);function Hg(e){return e.label!==void 0}var dL=3,fL="32px",pL="16px",t2=4e3,mL=356,gL=14,yL=20,vL=200;function Bu(...e){return e.filter(Boolean).join(" ")}function _L(e){let[r,i]=e.split("-"),a=[];return r&&a.push(r),i&&a.push(i),a}var wL=e=>{var r,i,a,u,d,m,o,w,E,I,D;let{invert:O,toast:P,unstyled:W,interacting:z,setHeights:H,visibleToasts:Z,heights:se,index:ce,toasts:de,expanded:Pe,removeToast:He,defaultRichColors:Xe,closeButton:Qe,style:Be,cancelButtonStyle:Je,actionButtonStyle:Ae,className:me="",descriptionClassName:Te="",duration:Ie,position:ut,gap:it,loadingIcon:ot,expandByDefault:ke,classNames:Ne,icons:yt,closeButtonAriaLabel:Ce="Close toast",pauseWhenPageIsHidden:ie}=e,[Ee,Le]=Pr.useState(null),[Ve,nt]=Pr.useState(null),[et,_t]=Pr.useState(!1),[St,Tt]=Pr.useState(!1),[Gt,or]=Pr.useState(!1),[Ar,_r]=Pr.useState(!1),[je,mr]=Pr.useState(!1),[kr,Vr]=Pr.useState(0),[lr,Gr]=Pr.useState(0),Er=Pr.useRef(P.duration||Ie||t2),Nr=Pr.useRef(null),Dr=Pr.useRef(null),Dn=ce===0,un=ce+1<=Z,pt=P.type,fe=P.dismissible!==!1,pe=P.className||"",ve=P.descriptionClassName||"",qe=Pr.useMemo(()=>se.findIndex(Qr=>Qr.toastId===P.id)||0,[se,P.id]),We=Pr.useMemo(()=>{var Qr;return(Qr=P.closeButton)!=null?Qr:Qe},[P.closeButton,Qe]),Ct=Pr.useMemo(()=>P.duration||Ie||t2,[P.duration,Ie]),vt=Pr.useRef(0),ct=Pr.useRef(0),bt=Pr.useRef(0),Ht=Pr.useRef(null),[Ft,cr]=ut.split("-"),Jt=Pr.useMemo(()=>se.reduce((Qr,gr,$r)=>$r>=qe?Qr:Qr+gr.height,0),[se,qe]),fr=sL(),rn=P.invert||O,Tr=pt==="loading";ct.current=Pr.useMemo(()=>qe*it+Jt,[qe,Jt]),Pr.useEffect(()=>{Er.current=Ct},[Ct]),Pr.useEffect(()=>{_t(!0)},[]),Pr.useEffect(()=>{let Qr=Dr.current;if(Qr){let gr=Qr.getBoundingClientRect().height;return Gr(gr),H($r=>[{toastId:P.id,height:gr,position:P.position},...$r]),()=>H($r=>$r.filter(Rn=>Rn.toastId!==P.id))}},[H,P.id]),Pr.useLayoutEffect(()=>{if(!et)return;let Qr=Dr.current,gr=Qr.style.height;Qr.style.height="auto";let $r=Qr.getBoundingClientRect().height;Qr.style.height=gr,Gr($r),H(Rn=>Rn.find(xr=>xr.toastId===P.id)?Rn.map(xr=>xr.toastId===P.id?{...xr,height:$r}:xr):[{toastId:P.id,height:$r,position:P.position},...Rn])},[et,P.title,P.description,H,P.id]);let mt=Pr.useCallback(()=>{Tt(!0),Vr(ct.current),H(Qr=>Qr.filter(gr=>gr.toastId!==P.id)),setTimeout(()=>{He(P)},vL)},[P,He,H,ct]);Pr.useEffect(()=>{if(P.promise&&pt==="loading"||P.duration===1/0||P.type==="loading")return;let Qr;return Pe||z||ie&&fr?(()=>{if(bt.current<vt.current){let gr=new Date().getTime()-vt.current;Er.current=Er.current-gr}bt.current=new Date().getTime()})():Er.current!==1/0&&(vt.current=new Date().getTime(),Qr=setTimeout(()=>{var gr;(gr=P.onAutoClose)==null||gr.call(P,P),mt()},Er.current)),()=>clearTimeout(Qr)},[Pe,z,P,pt,ie,fr,mt]),Pr.useEffect(()=>{P.delete&&mt()},[mt,P.delete]);function tn(){var Qr,gr,$r;return yt!=null&&yt.loading?Pr.createElement("div",{className:Bu(Ne?.loader,(Qr=P?.classNames)==null?void 0:Qr.loader,"sonner-loader"),"data-visible":pt==="loading"},yt.loading):ot?Pr.createElement("div",{className:Bu(Ne?.loader,(gr=P?.classNames)==null?void 0:gr.loader,"sonner-loader"),"data-visible":pt==="loading"},ot):Pr.createElement(JP,{className:Bu(Ne?.loader,($r=P?.classNames)==null?void 0:$r.loader),visible:pt==="loading"})}return Pr.createElement("li",{tabIndex:0,ref:Dr,className:Bu(me,pe,Ne?.toast,(r=P?.classNames)==null?void 0:r.toast,Ne?.default,Ne?.[pt],(i=P?.classNames)==null?void 0:i[pt]),"data-sonner-toast":"","data-rich-colors":(a=P.richColors)!=null?a:Xe,"data-styled":!(P.jsx||P.unstyled||W),"data-mounted":et,"data-promise":!!P.promise,"data-swiped":je,"data-removed":St,"data-visible":un,"data-y-position":Ft,"data-x-position":cr,"data-index":ce,"data-front":Dn,"data-swiping":Gt,"data-dismissible":fe,"data-type":pt,"data-invert":rn,"data-swipe-out":Ar,"data-swipe-direction":Ve,"data-expanded":!!(Pe||ke&&et),style:{"--index":ce,"--toasts-before":ce,"--z-index":de.length-ce,"--offset":`${St?kr:ct.current}px`,"--initial-height":ke?"auto":`${lr}px`,...Be,...P.style},onDragEnd:()=>{or(!1),Le(null),Ht.current=null},onPointerDown:Qr=>{Tr||!fe||(Nr.current=new Date,Vr(ct.current),Qr.target.setPointerCapture(Qr.pointerId),Qr.target.tagName!=="BUTTON"&&(or(!0),Ht.current={x:Qr.clientX,y:Qr.clientY}))},onPointerUp:()=>{var Qr,gr,$r,Rn;if(Ar||!fe)return;Ht.current=null;let xr=Number(((Qr=Dr.current)==null?void 0:Qr.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),Tn=Number(((gr=Dr.current)==null?void 0:gr.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),Bn=new Date().getTime()-(($r=Nr.current)==null?void 0:$r.getTime()),xn=Ee==="x"?xr:Tn,Ui=Math.abs(xn)/Bn;if(Math.abs(xn)>=yL||Ui>.11){Vr(ct.current),(Rn=P.onDismiss)==null||Rn.call(P,P),nt(Ee==="x"?xr>0?"right":"left":Tn>0?"down":"up"),mt(),_r(!0),mr(!1);return}or(!1),Le(null)},onPointerMove:Qr=>{var gr,$r,Rn,xr;if(!Ht.current||!fe||((gr=window.getSelection())==null?void 0:gr.toString().length)>0)return;let Tn=Qr.clientY-Ht.current.y,Bn=Qr.clientX-Ht.current.x,xn=($r=e.swipeDirections)!=null?$r:_L(ut);!Ee&&(Math.abs(Bn)>1||Math.abs(Tn)>1)&&Le(Math.abs(Bn)>Math.abs(Tn)?"x":"y");let Ui={x:0,y:0};Ee==="y"?(xn.includes("top")||xn.includes("bottom"))&&(xn.includes("top")&&Tn<0||xn.includes("bottom")&&Tn>0)&&(Ui.y=Tn):Ee==="x"&&(xn.includes("left")||xn.includes("right"))&&(xn.includes("left")&&Bn<0||xn.includes("right")&&Bn>0)&&(Ui.x=Bn),(Math.abs(Ui.x)>0||Math.abs(Ui.y)>0)&&mr(!0),(Rn=Dr.current)==null||Rn.style.setProperty("--swipe-amount-x",`${Ui.x}px`),(xr=Dr.current)==null||xr.style.setProperty("--swipe-amount-y",`${Ui.y}px`)}},We&&!P.jsx?Pr.createElement("button",{"aria-label":Ce,"data-disabled":Tr,"data-close-button":!0,onClick:Tr||!fe?()=>{}:()=>{var Qr;mt(),(Qr=P.onDismiss)==null||Qr.call(P,P)},className:Bu(Ne?.closeButton,(u=P?.classNames)==null?void 0:u.closeButton)},(d=yt?.close)!=null?d:iL):null,P.jsx||ee.isValidElement(P.title)?P.jsx?P.jsx:typeof P.title=="function"?P.title():P.title:Pr.createElement(Pr.Fragment,null,pt||P.icon||P.promise?Pr.createElement("div",{"data-icon":"",className:Bu(Ne?.icon,(m=P?.classNames)==null?void 0:m.icon)},P.promise||P.type==="loading"&&!P.icon?P.icon||tn():null,P.type!=="loading"?P.icon||yt?.[pt]||XP(pt):null):null,Pr.createElement("div",{"data-content":"",className:Bu(Ne?.content,(o=P?.classNames)==null?void 0:o.content)},Pr.createElement("div",{"data-title":"",className:Bu(Ne?.title,(w=P?.classNames)==null?void 0:w.title)},typeof P.title=="function"?P.title():P.title),P.description?Pr.createElement("div",{"data-description":"",className:Bu(Te,ve,Ne?.description,(E=P?.classNames)==null?void 0:E.description)},typeof P.description=="function"?P.description():P.description):null),ee.isValidElement(P.cancel)?P.cancel:P.cancel&&Hg(P.cancel)?Pr.createElement("button",{"data-button":!0,"data-cancel":!0,style:P.cancelButtonStyle||Je,onClick:Qr=>{var gr,$r;Hg(P.cancel)&&fe&&(($r=(gr=P.cancel).onClick)==null||$r.call(gr,Qr),mt())},className:Bu(Ne?.cancelButton,(I=P?.classNames)==null?void 0:I.cancelButton)},P.cancel.label):null,ee.isValidElement(P.action)?P.action:P.action&&Hg(P.action)?Pr.createElement("button",{"data-button":!0,"data-action":!0,style:P.actionButtonStyle||Ae,onClick:Qr=>{var gr,$r;Hg(P.action)&&(($r=(gr=P.action).onClick)==null||$r.call(gr,Qr),!Qr.defaultPrevented&&mt())},className:Bu(Ne?.actionButton,(D=P?.classNames)==null?void 0:D.actionButton)},P.action.label):null))};function r2(){if(typeof window>"u"||typeof document>"u")return"ltr";let e=document.documentElement.getAttribute("dir");return e==="auto"||!e?window.getComputedStyle(document.documentElement).direction:e}function xL(e,r){let i={};return[e,r].forEach((a,u)=>{let d=u===1,m=d?"--mobile-offset":"--offset",o=d?pL:fL;function w(E){["top","right","bottom","left"].forEach(I=>{i[`${m}-${I}`]=typeof E=="number"?`${E}px`:E})}typeof a=="number"||typeof a=="string"?w(a):typeof a=="object"?["top","right","bottom","left"].forEach(E=>{a[E]===void 0?i[`${m}-${E}`]=o:i[`${m}-${E}`]=typeof a[E]=="number"?`${a[E]}px`:a[E]}):w(o)}),i}var bL=ee.forwardRef(function(e,r){let{invert:i,position:a="bottom-right",hotkey:u=["altKey","KeyT"],expand:d,closeButton:m,className:o,offset:w,mobileOffset:E,theme:I="light",richColors:D,duration:O,style:P,visibleToasts:W=dL,toastOptions:z,dir:H=r2(),gap:Z=gL,loadingIcon:se,icons:ce,containerAriaLabel:de="Notifications",pauseWhenPageIsHidden:Pe}=e,[He,Xe]=Pr.useState([]),Qe=Pr.useMemo(()=>Array.from(new Set([a].concat(He.filter(ie=>ie.position).map(ie=>ie.position)))),[He,a]),[Be,Je]=Pr.useState([]),[Ae,me]=Pr.useState(!1),[Te,Ie]=Pr.useState(!1),[ut,it]=Pr.useState(I!=="system"?I:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),ot=Pr.useRef(null),ke=u.join("+").replace(/Key/g,"").replace(/Digit/g,""),Ne=Pr.useRef(null),yt=Pr.useRef(!1),Ce=Pr.useCallback(ie=>{Xe(Ee=>{var Le;return(Le=Ee.find(Ve=>Ve.id===ie.id))!=null&&Le.delete||Jc.dismiss(ie.id),Ee.filter(({id:Ve})=>Ve!==ie.id)})},[]);return Pr.useEffect(()=>Jc.subscribe(ie=>{if(ie.dismiss){Xe(Ee=>Ee.map(Le=>Le.id===ie.id?{...Le,delete:!0}:Le));return}setTimeout(()=>{g5.flushSync(()=>{Xe(Ee=>{let Le=Ee.findIndex(Ve=>Ve.id===ie.id);return Le!==-1?[...Ee.slice(0,Le),{...Ee[Le],...ie},...Ee.slice(Le+1)]:[ie,...Ee]})})})}),[]),Pr.useEffect(()=>{if(I!=="system"){it(I);return}if(I==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?it("dark"):it("light")),typeof window>"u")return;let ie=window.matchMedia("(prefers-color-scheme: dark)");try{ie.addEventListener("change",({matches:Ee})=>{it(Ee?"dark":"light")})}catch{ie.addListener(({matches:Le})=>{try{it(Le?"dark":"light")}catch(Ve){console.error(Ve)}})}},[I]),Pr.useEffect(()=>{He.length<=1&&me(!1)},[He]),Pr.useEffect(()=>{let ie=Ee=>{var Le,Ve;u.every(nt=>Ee[nt]||Ee.code===nt)&&(me(!0),(Le=ot.current)==null||Le.focus()),Ee.code==="Escape"&&(document.activeElement===ot.current||(Ve=ot.current)!=null&&Ve.contains(document.activeElement))&&me(!1)};return document.addEventListener("keydown",ie),()=>document.removeEventListener("keydown",ie)},[u]),Pr.useEffect(()=>{if(ot.current)return()=>{Ne.current&&(Ne.current.focus({preventScroll:!0}),Ne.current=null,yt.current=!1)}},[ot.current]),Pr.createElement("section",{ref:r,"aria-label":`${de} ${ke}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},Qe.map((ie,Ee)=>{var Le;let[Ve,nt]=ie.split("-");return He.length?Pr.createElement("ol",{key:ie,dir:H==="auto"?r2():H,tabIndex:-1,ref:ot,className:o,"data-sonner-toaster":!0,"data-theme":ut,"data-y-position":Ve,"data-lifted":Ae&&He.length>1&&!d,"data-x-position":nt,style:{"--front-toast-height":`${((Le=Be[0])==null?void 0:Le.height)||0}px`,"--width":`${mL}px`,"--gap":`${Z}px`,...P,...xL(w,E)},onBlur:et=>{yt.current&&!et.currentTarget.contains(et.relatedTarget)&&(yt.current=!1,Ne.current&&(Ne.current.focus({preventScroll:!0}),Ne.current=null))},onFocus:et=>{et.target instanceof HTMLElement&&et.target.dataset.dismissible==="false"||yt.current||(yt.current=!0,Ne.current=et.relatedTarget)},onMouseEnter:()=>me(!0),onMouseMove:()=>me(!0),onMouseLeave:()=>{Te||me(!1)},onDragEnd:()=>me(!1),onPointerDown:et=>{et.target instanceof HTMLElement&&et.target.dataset.dismissible==="false"||Ie(!0)},onPointerUp:()=>Ie(!1)},He.filter(et=>!et.position&&Ee===0||et.position===ie).map((et,_t)=>{var St,Tt;return Pr.createElement(wL,{key:et.id,icons:ce,index:_t,toast:et,defaultRichColors:D,duration:(St=z?.duration)!=null?St:O,className:z?.className,descriptionClassName:z?.descriptionClassName,invert:i,visibleToasts:W,closeButton:(Tt=z?.closeButton)!=null?Tt:m,interacting:Te,position:ie,style:z?.style,unstyled:z?.unstyled,classNames:z?.classNames,cancelButtonStyle:z?.cancelButtonStyle,actionButtonStyle:z?.actionButtonStyle,removeToast:Ce,toasts:He.filter(Gt=>Gt.position==et.position),heights:Be.filter(Gt=>Gt.position==et.position),setHeights:Je,expandByDefault:d,gap:Z,loadingIcon:se,expanded:Ae,pauseWhenPageIsHidden:Pe,swipeDirections:e.swipeDirections})})):null}))});const BL=({...e})=>{const{theme:r="system"}=ZP();return ae.jsx(bL,{theme:r,className:"toaster group",toastOptions:{classNames:{toast:"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg",description:"group-[.toast]:text-muted-foreground",actionButton:"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground",cancelButton:"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground"}},...e})};var CL=py[" useId ".trim().toString()]||(()=>{}),EL=0;function _y(e){const[r,i]=ee.useState(CL());return Cl(()=>{i(a=>a??String(EL++))},[e]),r?`radix-${r}`:""}const SL=["top","right","bottom","left"],_d=Math.min,EA=Math.max,K0=Math.round,jg=Math.floor,rh=e=>({x:e,y:e}),FL={left:"right",right:"left",bottom:"top",top:"bottom"},IL={start:"end",end:"start"};function m_(e,r,i){return EA(e,_d(r,i))}function Qh(e,r){return typeof e=="function"?e(r):e}function Oh(e){return e.split("-")[0]}function xp(e){return e.split("-")[1]}function Fw(e){return e==="x"?"y":"x"}function Iw(e){return e==="y"?"height":"width"}const TL=new Set(["top","bottom"]);function eh(e){return TL.has(Oh(e))?"y":"x"}function Tw(e){return Fw(eh(e))}function PL(e,r,i){i===void 0&&(i=!1);const a=xp(e),u=Tw(e),d=Iw(u);let m=u==="x"?a===(i?"end":"start")?"right":"left":a==="start"?"bottom":"top";return r.reference[d]>r.floating[d]&&(m=q0(m)),[m,q0(m)]}function LL(e){const r=q0(e);return[g_(e),r,g_(r)]}function g_(e){return e.replace(/start|end/g,r=>IL[r])}const n2=["left","right"],i2=["right","left"],ML=["top","bottom"],kL=["bottom","top"];function UL(e,r,i){switch(e){case"top":case"bottom":return i?r?i2:n2:r?n2:i2;case"left":case"right":return r?ML:kL;default:return[]}}function DL(e,r,i,a){const u=xp(e);let d=UL(Oh(e),i==="start",a);return u&&(d=d.map(m=>m+"-"+u),r&&(d=d.concat(d.map(g_)))),d}function q0(e){return e.replace(/left|right|bottom|top/g,r=>FL[r])}function RL(e){return{top:0,right:0,bottom:0,left:0,...e}}function nE(e){return typeof e!="number"?RL(e):{top:e,right:e,bottom:e,left:e}}function $0(e){const{x:r,y:i,width:a,height:u}=e;return{width:a,height:u,top:i,left:r,right:r+a,bottom:i+u,x:r,y:i}}function s2(e,r,i){let{reference:a,floating:u}=e;const d=eh(r),m=Tw(r),o=Iw(m),w=Oh(r),E=d==="y",I=a.x+a.width/2-u.width/2,D=a.y+a.height/2-u.height/2,O=a[o]/2-u[o]/2;let P;switch(w){case"top":P={x:I,y:a.y-u.height};break;case"bottom":P={x:I,y:a.y+a.height};break;case"right":P={x:a.x+a.width,y:D};break;case"left":P={x:a.x-u.width,y:D};break;default:P={x:a.x,y:a.y}}switch(xp(r)){case"start":P[m]-=O*(i&&E?-1:1);break;case"end":P[m]+=O*(i&&E?-1:1);break}return P}const NL=async(e,r,i)=>{const{placement:a="bottom",strategy:u="absolute",middleware:d=[],platform:m}=i,o=d.filter(Boolean),w=await(m.isRTL==null?void 0:m.isRTL(r));let E=await m.getElementRects({reference:e,floating:r,strategy:u}),{x:I,y:D}=s2(E,a,w),O=a,P={},W=0;for(let z=0;z<o.length;z++){const{name:H,fn:Z}=o[z],{x:se,y:ce,data:de,reset:Pe}=await Z({x:I,y:D,initialPlacement:a,placement:O,strategy:u,middlewareData:P,rects:E,platform:m,elements:{reference:e,floating:r}});I=se??I,D=ce??D,P={...P,[H]:{...P[H],...de}},Pe&&W<=50&&(W++,typeof Pe=="object"&&(Pe.placement&&(O=Pe.placement),Pe.rects&&(E=Pe.rects===!0?await m.getElementRects({reference:e,floating:r,strategy:u}):Pe.rects),{x:I,y:D}=s2(E,O,w)),z=-1)}return{x:I,y:D,placement:O,strategy:u,middlewareData:P}};async function Mm(e,r){var i;r===void 0&&(r={});const{x:a,y:u,platform:d,rects:m,elements:o,strategy:w}=e,{boundary:E="clippingAncestors",rootBoundary:I="viewport",elementContext:D="floating",altBoundary:O=!1,padding:P=0}=Qh(r,e),W=nE(P),H=o[O?D==="floating"?"reference":"floating":D],Z=$0(await d.getClippingRect({element:(i=await(d.isElement==null?void 0:d.isElement(H)))==null||i?H:H.contextElement||await(d.getDocumentElement==null?void 0:d.getDocumentElement(o.floating)),boundary:E,rootBoundary:I,strategy:w})),se=D==="floating"?{x:a,y:u,width:m.floating.width,height:m.floating.height}:m.reference,ce=await(d.getOffsetParent==null?void 0:d.getOffsetParent(o.floating)),de=await(d.isElement==null?void 0:d.isElement(ce))?await(d.getScale==null?void 0:d.getScale(ce))||{x:1,y:1}:{x:1,y:1},Pe=$0(d.convertOffsetParentRelativeRectToViewportRelativeRect?await d.convertOffsetParentRelativeRectToViewportRelativeRect({elements:o,rect:se,offsetParent:ce,strategy:w}):se);return{top:(Z.top-Pe.top+W.top)/de.y,bottom:(Pe.bottom-Z.bottom+W.bottom)/de.y,left:(Z.left-Pe.left+W.left)/de.x,right:(Pe.right-Z.right+W.right)/de.x}}const QL=e=>({name:"arrow",options:e,async fn(r){const{x:i,y:a,placement:u,rects:d,platform:m,elements:o,middlewareData:w}=r,{element:E,padding:I=0}=Qh(e,r)||{};if(E==null)return{};const D=nE(I),O={x:i,y:a},P=Tw(u),W=Iw(P),z=await m.getDimensions(E),H=P==="y",Z=H?"top":"left",se=H?"bottom":"right",ce=H?"clientHeight":"clientWidth",de=d.reference[W]+d.reference[P]-O[P]-d.floating[W],Pe=O[P]-d.reference[P],He=await(m.getOffsetParent==null?void 0:m.getOffsetParent(E));let Xe=He?He[ce]:0;(!Xe||!await(m.isElement==null?void 0:m.isElement(He)))&&(Xe=o.floating[ce]||d.floating[W]);const Qe=de/2-Pe/2,Be=Xe/2-z[W]/2-1,Je=_d(D[Z],Be),Ae=_d(D[se],Be),me=Je,Te=Xe-z[W]-Ae,Ie=Xe/2-z[W]/2+Qe,ut=m_(me,Ie,Te),it=!w.arrow&&xp(u)!=null&&Ie!==ut&&d.reference[W]/2-(Ie<me?Je:Ae)-z[W]/2<0,ot=it?Ie<me?Ie-me:Ie-Te:0;return{[P]:O[P]+ot,data:{[P]:ut,centerOffset:Ie-ut-ot,...it&&{alignmentOffset:ot}},reset:it}}}),OL=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(r){var i,a;const{placement:u,middlewareData:d,rects:m,initialPlacement:o,platform:w,elements:E}=r,{mainAxis:I=!0,crossAxis:D=!0,fallbackPlacements:O,fallbackStrategy:P="bestFit",fallbackAxisSideDirection:W="none",flipAlignment:z=!0,...H}=Qh(e,r);if((i=d.arrow)!=null&&i.alignmentOffset)return{};const Z=Oh(u),se=eh(o),ce=Oh(o)===o,de=await(w.isRTL==null?void 0:w.isRTL(E.floating)),Pe=O||(ce||!z?[q0(o)]:LL(o)),He=W!=="none";!O&&He&&Pe.push(...DL(o,z,W,de));const Xe=[o,...Pe],Qe=await Mm(r,H),Be=[];let Je=((a=d.flip)==null?void 0:a.overflows)||[];if(I&&Be.push(Qe[Z]),D){const Ie=PL(u,m,de);Be.push(Qe[Ie[0]],Qe[Ie[1]])}if(Je=[...Je,{placement:u,overflows:Be}],!Be.every(Ie=>Ie<=0)){var Ae,me;const Ie=(((Ae=d.flip)==null?void 0:Ae.index)||0)+1,ut=Xe[Ie];if(ut&&(!(D==="alignment"?se!==eh(ut):!1)||Je.every(ke=>eh(ke.placement)===se?ke.overflows[0]>0:!0)))return{data:{index:Ie,overflows:Je},reset:{placement:ut}};let it=(me=Je.filter(ot=>ot.overflows[0]<=0).sort((ot,ke)=>ot.overflows[1]-ke.overflows[1])[0])==null?void 0:me.placement;if(!it)switch(P){case"bestFit":{var Te;const ot=(Te=Je.filter(ke=>{if(He){const Ne=eh(ke.placement);return Ne===se||Ne==="y"}return!0}).map(ke=>[ke.placement,ke.overflows.filter(Ne=>Ne>0).reduce((Ne,yt)=>Ne+yt,0)]).sort((ke,Ne)=>ke[1]-Ne[1])[0])==null?void 0:Te[0];ot&&(it=ot);break}case"initialPlacement":it=o;break}if(u!==it)return{reset:{placement:it}}}return{}}}};function o2(e,r){return{top:e.top-r.height,right:e.right-r.width,bottom:e.bottom-r.height,left:e.left-r.width}}function a2(e){return SL.some(r=>e[r]>=0)}const zL=function(e){return e===void 0&&(e={}),{name:"hide",options:e,async fn(r){const{rects:i}=r,{strategy:a="referenceHidden",...u}=Qh(e,r);switch(a){case"referenceHidden":{const d=await Mm(r,{...u,elementContext:"reference"}),m=o2(d,i.reference);return{data:{referenceHiddenOffsets:m,referenceHidden:a2(m)}}}case"escaped":{const d=await Mm(r,{...u,altBoundary:!0}),m=o2(d,i.floating);return{data:{escapedOffsets:m,escaped:a2(m)}}}default:return{}}}}},iE=new Set(["left","top"]);async function HL(e,r){const{placement:i,platform:a,elements:u}=e,d=await(a.isRTL==null?void 0:a.isRTL(u.floating)),m=Oh(i),o=xp(i),w=eh(i)==="y",E=iE.has(m)?-1:1,I=d&&w?-1:1,D=Qh(r,e);let{mainAxis:O,crossAxis:P,alignmentAxis:W}=typeof D=="number"?{mainAxis:D,crossAxis:0,alignmentAxis:null}:{mainAxis:D.mainAxis||0,crossAxis:D.crossAxis||0,alignmentAxis:D.alignmentAxis};return o&&typeof W=="number"&&(P=o==="end"?W*-1:W),w?{x:P*I,y:O*E}:{x:O*E,y:P*I}}const jL=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(r){var i,a;const{x:u,y:d,placement:m,middlewareData:o}=r,w=await HL(r,e);return m===((i=o.offset)==null?void 0:i.placement)&&(a=o.arrow)!=null&&a.alignmentOffset?{}:{x:u+w.x,y:d+w.y,data:{...w,placement:m}}}}},VL=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(r){const{x:i,y:a,placement:u}=r,{mainAxis:d=!0,crossAxis:m=!1,limiter:o={fn:H=>{let{x:Z,y:se}=H;return{x:Z,y:se}}},...w}=Qh(e,r),E={x:i,y:a},I=await Mm(r,w),D=eh(Oh(u)),O=Fw(D);let P=E[O],W=E[D];if(d){const H=O==="y"?"top":"left",Z=O==="y"?"bottom":"right",se=P+I[H],ce=P-I[Z];P=m_(se,P,ce)}if(m){const H=D==="y"?"top":"left",Z=D==="y"?"bottom":"right",se=W+I[H],ce=W-I[Z];W=m_(se,W,ce)}const z=o.fn({...r,[O]:P,[D]:W});return{...z,data:{x:z.x-i,y:z.y-a,enabled:{[O]:d,[D]:m}}}}}},GL=function(e){return e===void 0&&(e={}),{options:e,fn(r){const{x:i,y:a,placement:u,rects:d,middlewareData:m}=r,{offset:o=0,mainAxis:w=!0,crossAxis:E=!0}=Qh(e,r),I={x:i,y:a},D=eh(u),O=Fw(D);let P=I[O],W=I[D];const z=Qh(o,r),H=typeof z=="number"?{mainAxis:z,crossAxis:0}:{mainAxis:0,crossAxis:0,...z};if(w){const ce=O==="y"?"height":"width",de=d.reference[O]-d.floating[ce]+H.mainAxis,Pe=d.reference[O]+d.reference[ce]-H.mainAxis;P<de?P=de:P>Pe&&(P=Pe)}if(E){var Z,se;const ce=O==="y"?"width":"height",de=iE.has(Oh(u)),Pe=d.reference[D]-d.floating[ce]+(de&&((Z=m.offset)==null?void 0:Z[D])||0)+(de?0:H.crossAxis),He=d.reference[D]+d.reference[ce]+(de?0:((se=m.offset)==null?void 0:se[D])||0)-(de?H.crossAxis:0);W<Pe?W=Pe:W>He&&(W=He)}return{[O]:P,[D]:W}}}},KL=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(r){var i,a;const{placement:u,rects:d,platform:m,elements:o}=r,{apply:w=()=>{},...E}=Qh(e,r),I=await Mm(r,E),D=Oh(u),O=xp(u),P=eh(u)==="y",{width:W,height:z}=d.floating;let H,Z;D==="top"||D==="bottom"?(H=D,Z=O===(await(m.isRTL==null?void 0:m.isRTL(o.floating))?"start":"end")?"left":"right"):(Z=D,H=O==="end"?"top":"bottom");const se=z-I.top-I.bottom,ce=W-I.left-I.right,de=_d(z-I[H],se),Pe=_d(W-I[Z],ce),He=!r.middlewareData.shift;let Xe=de,Qe=Pe;if((i=r.middlewareData.shift)!=null&&i.enabled.x&&(Qe=ce),(a=r.middlewareData.shift)!=null&&a.enabled.y&&(Xe=se),He&&!O){const Je=EA(I.left,0),Ae=EA(I.right,0),me=EA(I.top,0),Te=EA(I.bottom,0);P?Qe=W-2*(Je!==0||Ae!==0?Je+Ae:EA(I.left,I.right)):Xe=z-2*(me!==0||Te!==0?me+Te:EA(I.top,I.bottom))}await w({...r,availableWidth:Qe,availableHeight:Xe});const Be=await m.getDimensions(o.floating);return W!==Be.width||z!==Be.height?{reset:{rects:!0}}:{}}}};function wy(){return typeof window<"u"}function bp(e){return sE(e)?(e.nodeName||"").toLowerCase():"#document"}function FA(e){var r;return(e==null||(r=e.ownerDocument)==null?void 0:r.defaultView)||window}function sh(e){var r;return(r=(sE(e)?e.ownerDocument:e.document)||window.document)==null?void 0:r.documentElement}function sE(e){return wy()?e instanceof Node||e instanceof FA(e).Node:!1}function Tu(e){return wy()?e instanceof Element||e instanceof FA(e).Element:!1}function ih(e){return wy()?e instanceof HTMLElement||e instanceof FA(e).HTMLElement:!1}function l2(e){return!wy()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof FA(e).ShadowRoot}const qL=new Set(["inline","contents"]);function Wm(e){const{overflow:r,overflowX:i,overflowY:a,display:u}=Pu(e);return/auto|scroll|overlay|hidden|clip/.test(r+a+i)&&!qL.has(u)}const $L=new Set(["table","td","th"]);function WL(e){return $L.has(bp(e))}const ZL=[":popover-open",":modal"];function xy(e){return ZL.some(r=>{try{return e.matches(r)}catch{return!1}})}const XL=["transform","translate","scale","rotate","perspective"],YL=["transform","translate","scale","rotate","perspective","filter"],JL=["paint","layout","strict","content"];function Pw(e){const r=Lw(),i=Tu(e)?Pu(e):e;return XL.some(a=>i[a]?i[a]!=="none":!1)||(i.containerType?i.containerType!=="normal":!1)||!r&&(i.backdropFilter?i.backdropFilter!=="none":!1)||!r&&(i.filter?i.filter!=="none":!1)||YL.some(a=>(i.willChange||"").includes(a))||JL.some(a=>(i.contain||"").includes(a))}function eM(e){let r=wd(e);for(;ih(r)&&!gp(r);){if(Pw(r))return r;if(xy(r))return null;r=wd(r)}return null}function Lw(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const tM=new Set(["html","body","#document"]);function gp(e){return tM.has(bp(e))}function Pu(e){return FA(e).getComputedStyle(e)}function by(e){return Tu(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function wd(e){if(bp(e)==="html")return e;const r=e.assignedSlot||e.parentNode||l2(e)&&e.host||sh(e);return l2(r)?r.host:r}function oE(e){const r=wd(e);return gp(r)?e.ownerDocument?e.ownerDocument.body:e.body:ih(r)&&Wm(r)?r:oE(r)}function km(e,r,i){var a;r===void 0&&(r=[]),i===void 0&&(i=!0);const u=oE(e),d=u===((a=e.ownerDocument)==null?void 0:a.body),m=FA(u);if(d){const o=y_(m);return r.concat(m,m.visualViewport||[],Wm(u)?u:[],o&&i?km(o):[])}return r.concat(u,km(u,[],i))}function y_(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function aE(e){const r=Pu(e);let i=parseFloat(r.width)||0,a=parseFloat(r.height)||0;const u=ih(e),d=u?e.offsetWidth:i,m=u?e.offsetHeight:a,o=K0(i)!==d||K0(a)!==m;return o&&(i=d,a=m),{width:i,height:a,$:o}}function Mw(e){return Tu(e)?e:e.contextElement}function cp(e){const r=Mw(e);if(!ih(r))return rh(1);const i=r.getBoundingClientRect(),{width:a,height:u,$:d}=aE(r);let m=(d?K0(i.width):i.width)/a,o=(d?K0(i.height):i.height)/u;return(!m||!Number.isFinite(m))&&(m=1),(!o||!Number.isFinite(o))&&(o=1),{x:m,y:o}}const rM=rh(0);function lE(e){const r=FA(e);return!Lw()||!r.visualViewport?rM:{x:r.visualViewport.offsetLeft,y:r.visualViewport.offsetTop}}function nM(e,r,i){return r===void 0&&(r=!1),!i||r&&i!==FA(e)?!1:r}function rf(e,r,i,a){r===void 0&&(r=!1),i===void 0&&(i=!1);const u=e.getBoundingClientRect(),d=Mw(e);let m=rh(1);r&&(a?Tu(a)&&(m=cp(a)):m=cp(e));const o=nM(d,i,a)?lE(d):rh(0);let w=(u.left+o.x)/m.x,E=(u.top+o.y)/m.y,I=u.width/m.x,D=u.height/m.y;if(d){const O=FA(d),P=a&&Tu(a)?FA(a):a;let W=O,z=y_(W);for(;z&&a&&P!==W;){const H=cp(z),Z=z.getBoundingClientRect(),se=Pu(z),ce=Z.left+(z.clientLeft+parseFloat(se.paddingLeft))*H.x,de=Z.top+(z.clientTop+parseFloat(se.paddingTop))*H.y;w*=H.x,E*=H.y,I*=H.x,D*=H.y,w+=ce,E+=de,W=FA(z),z=y_(W)}}return $0({width:I,height:D,x:w,y:E})}function By(e,r){const i=by(e).scrollLeft;return r?r.left+i:rf(sh(e)).left+i}function cE(e,r){const i=e.getBoundingClientRect(),a=i.left+r.scrollLeft-By(e,i),u=i.top+r.scrollTop;return{x:a,y:u}}function iM(e){let{elements:r,rect:i,offsetParent:a,strategy:u}=e;const d=u==="fixed",m=sh(a),o=r?xy(r.floating):!1;if(a===m||o&&d)return i;let w={scrollLeft:0,scrollTop:0},E=rh(1);const I=rh(0),D=ih(a);if((D||!D&&!d)&&((bp(a)!=="body"||Wm(m))&&(w=by(a)),ih(a))){const P=rf(a);E=cp(a),I.x=P.x+a.clientLeft,I.y=P.y+a.clientTop}const O=m&&!D&&!d?cE(m,w):rh(0);return{width:i.width*E.x,height:i.height*E.y,x:i.x*E.x-w.scrollLeft*E.x+I.x+O.x,y:i.y*E.y-w.scrollTop*E.y+I.y+O.y}}function sM(e){return Array.from(e.getClientRects())}function oM(e){const r=sh(e),i=by(e),a=e.ownerDocument.body,u=EA(r.scrollWidth,r.clientWidth,a.scrollWidth,a.clientWidth),d=EA(r.scrollHeight,r.clientHeight,a.scrollHeight,a.clientHeight);let m=-i.scrollLeft+By(e);const o=-i.scrollTop;return Pu(a).direction==="rtl"&&(m+=EA(r.clientWidth,a.clientWidth)-u),{width:u,height:d,x:m,y:o}}const c2=25;function aM(e,r){const i=FA(e),a=sh(e),u=i.visualViewport;let d=a.clientWidth,m=a.clientHeight,o=0,w=0;if(u){d=u.width,m=u.height;const I=Lw();(!I||I&&r==="fixed")&&(o=u.offsetLeft,w=u.offsetTop)}const E=By(a);if(E<=0){const I=a.ownerDocument,D=I.body,O=getComputedStyle(D),P=I.compatMode==="CSS1Compat"&&parseFloat(O.marginLeft)+parseFloat(O.marginRight)||0,W=Math.abs(a.clientWidth-D.clientWidth-P);W<=c2&&(d-=W)}else E<=c2&&(d+=E);return{width:d,height:m,x:o,y:w}}const lM=new Set(["absolute","fixed"]);function cM(e,r){const i=rf(e,!0,r==="fixed"),a=i.top+e.clientTop,u=i.left+e.clientLeft,d=ih(e)?cp(e):rh(1),m=e.clientWidth*d.x,o=e.clientHeight*d.y,w=u*d.x,E=a*d.y;return{width:m,height:o,x:w,y:E}}function A2(e,r,i){let a;if(r==="viewport")a=aM(e,i);else if(r==="document")a=oM(sh(e));else if(Tu(r))a=cM(r,i);else{const u=lE(e);a={x:r.x-u.x,y:r.y-u.y,width:r.width,height:r.height}}return $0(a)}function AE(e,r){const i=wd(e);return i===r||!Tu(i)||gp(i)?!1:Pu(i).position==="fixed"||AE(i,r)}function AM(e,r){const i=r.get(e);if(i)return i;let a=km(e,[],!1).filter(o=>Tu(o)&&bp(o)!=="body"),u=null;const d=Pu(e).position==="fixed";let m=d?wd(e):e;for(;Tu(m)&&!gp(m);){const o=Pu(m),w=Pw(m);!w&&o.position==="fixed"&&(u=null),(d?!w&&!u:!w&&o.position==="static"&&!!u&&lM.has(u.position)||Wm(m)&&!w&&AE(e,m))?a=a.filter(I=>I!==m):u=o,m=wd(m)}return r.set(e,a),a}function uM(e){let{element:r,boundary:i,rootBoundary:a,strategy:u}=e;const m=[...i==="clippingAncestors"?xy(r)?[]:AM(r,this._c):[].concat(i),a],o=m[0],w=m.reduce((E,I)=>{const D=A2(r,I,u);return E.top=EA(D.top,E.top),E.right=_d(D.right,E.right),E.bottom=_d(D.bottom,E.bottom),E.left=EA(D.left,E.left),E},A2(r,o,u));return{width:w.right-w.left,height:w.bottom-w.top,x:w.left,y:w.top}}function hM(e){const{width:r,height:i}=aE(e);return{width:r,height:i}}function dM(e,r,i){const a=ih(r),u=sh(r),d=i==="fixed",m=rf(e,!0,d,r);let o={scrollLeft:0,scrollTop:0};const w=rh(0);function E(){w.x=By(u)}if(a||!a&&!d)if((bp(r)!=="body"||Wm(u))&&(o=by(r)),a){const P=rf(r,!0,d,r);w.x=P.x+r.clientLeft,w.y=P.y+r.clientTop}else u&&E();d&&!a&&u&&E();const I=u&&!a&&!d?cE(u,o):rh(0),D=m.left+o.scrollLeft-w.x-I.x,O=m.top+o.scrollTop-w.y-I.y;return{x:D,y:O,width:m.width,height:m.height}}function Yv(e){return Pu(e).position==="static"}function u2(e,r){if(!ih(e)||Pu(e).position==="fixed")return null;if(r)return r(e);let i=e.offsetParent;return sh(e)===i&&(i=i.ownerDocument.body),i}function uE(e,r){const i=FA(e);if(xy(e))return i;if(!ih(e)){let u=wd(e);for(;u&&!gp(u);){if(Tu(u)&&!Yv(u))return u;u=wd(u)}return i}let a=u2(e,r);for(;a&&WL(a)&&Yv(a);)a=u2(a,r);return a&&gp(a)&&Yv(a)&&!Pw(a)?i:a||eM(e)||i}const fM=async function(e){const r=this.getOffsetParent||uE,i=this.getDimensions,a=await i(e.floating);return{reference:dM(e.reference,await r(e.floating),e.strategy),floating:{x:0,y:0,width:a.width,height:a.height}}};function pM(e){return Pu(e).direction==="rtl"}const mM={convertOffsetParentRelativeRectToViewportRelativeRect:iM,getDocumentElement:sh,getClippingRect:uM,getOffsetParent:uE,getElementRects:fM,getClientRects:sM,getDimensions:hM,getScale:cp,isElement:Tu,isRTL:pM};function hE(e,r){return e.x===r.x&&e.y===r.y&&e.width===r.width&&e.height===r.height}function gM(e,r){let i=null,a;const u=sh(e);function d(){var o;clearTimeout(a),(o=i)==null||o.disconnect(),i=null}function m(o,w){o===void 0&&(o=!1),w===void 0&&(w=1),d();const E=e.getBoundingClientRect(),{left:I,top:D,width:O,height:P}=E;if(o||r(),!O||!P)return;const W=jg(D),z=jg(u.clientWidth-(I+O)),H=jg(u.clientHeight-(D+P)),Z=jg(I),ce={rootMargin:-W+"px "+-z+"px "+-H+"px "+-Z+"px",threshold:EA(0,_d(1,w))||1};let de=!0;function Pe(He){const Xe=He[0].intersectionRatio;if(Xe!==w){if(!de)return m();Xe?m(!1,Xe):a=setTimeout(()=>{m(!1,1e-7)},1e3)}Xe===1&&!hE(E,e.getBoundingClientRect())&&m(),de=!1}try{i=new IntersectionObserver(Pe,{...ce,root:u.ownerDocument})}catch{i=new IntersectionObserver(Pe,ce)}i.observe(e)}return m(!0),d}function yM(e,r,i,a){a===void 0&&(a={});const{ancestorScroll:u=!0,ancestorResize:d=!0,elementResize:m=typeof ResizeObserver=="function",layoutShift:o=typeof IntersectionObserver=="function",animationFrame:w=!1}=a,E=Mw(e),I=u||d?[...E?km(E):[],...km(r)]:[];I.forEach(Z=>{u&&Z.addEventListener("scroll",i,{passive:!0}),d&&Z.addEventListener("resize",i)});const D=E&&o?gM(E,i):null;let O=-1,P=null;m&&(P=new ResizeObserver(Z=>{let[se]=Z;se&&se.target===E&&P&&(P.unobserve(r),cancelAnimationFrame(O),O=requestAnimationFrame(()=>{var ce;(ce=P)==null||ce.observe(r)})),i()}),E&&!w&&P.observe(E),P.observe(r));let W,z=w?rf(e):null;w&&H();function H(){const Z=rf(e);z&&!hE(z,Z)&&i(),z=Z,W=requestAnimationFrame(H)}return i(),()=>{var Z;I.forEach(se=>{u&&se.removeEventListener("scroll",i),d&&se.removeEventListener("resize",i)}),D?.(),(Z=P)==null||Z.disconnect(),P=null,w&&cancelAnimationFrame(W)}}const vM=jL,_M=VL,wM=OL,xM=KL,bM=zL,h2=QL,BM=GL,CM=(e,r,i)=>{const a=new Map,u={platform:mM,...i},d={...u.platform,_c:a};return NL(e,r,{...u,platform:d})};var EM=typeof document<"u",SM=function(){},L0=EM?ee.useLayoutEffect:SM;function W0(e,r){if(e===r)return!0;if(typeof e!=typeof r)return!1;if(typeof e=="function"&&e.toString()===r.toString())return!0;let i,a,u;if(e&&r&&typeof e=="object"){if(Array.isArray(e)){if(i=e.length,i!==r.length)return!1;for(a=i;a--!==0;)if(!W0(e[a],r[a]))return!1;return!0}if(u=Object.keys(e),i=u.length,i!==Object.keys(r).length)return!1;for(a=i;a--!==0;)if(!{}.hasOwnProperty.call(r,u[a]))return!1;for(a=i;a--!==0;){const d=u[a];if(!(d==="_owner"&&e.$$typeof)&&!W0(e[d],r[d]))return!1}return!0}return e!==e&&r!==r}function dE(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function d2(e,r){const i=dE(e);return Math.round(r*i)/i}function Jv(e){const r=ee.useRef(e);return L0(()=>{r.current=e}),r}function FM(e){e===void 0&&(e={});const{placement:r="bottom",strategy:i="absolute",middleware:a=[],platform:u,elements:{reference:d,floating:m}={},transform:o=!0,whileElementsMounted:w,open:E}=e,[I,D]=ee.useState({x:0,y:0,strategy:i,placement:r,middlewareData:{},isPositioned:!1}),[O,P]=ee.useState(a);W0(O,a)||P(a);const[W,z]=ee.useState(null),[H,Z]=ee.useState(null),se=ee.useCallback(ke=>{ke!==He.current&&(He.current=ke,z(ke))},[]),ce=ee.useCallback(ke=>{ke!==Xe.current&&(Xe.current=ke,Z(ke))},[]),de=d||W,Pe=m||H,He=ee.useRef(null),Xe=ee.useRef(null),Qe=ee.useRef(I),Be=w!=null,Je=Jv(w),Ae=Jv(u),me=Jv(E),Te=ee.useCallback(()=>{if(!He.current||!Xe.current)return;const ke={placement:r,strategy:i,middleware:O};Ae.current&&(ke.platform=Ae.current),CM(He.current,Xe.current,ke).then(Ne=>{const yt={...Ne,isPositioned:me.current!==!1};Ie.current&&!W0(Qe.current,yt)&&(Qe.current=yt,_p.flushSync(()=>{D(yt)}))})},[O,r,i,Ae,me]);L0(()=>{E===!1&&Qe.current.isPositioned&&(Qe.current.isPositioned=!1,D(ke=>({...ke,isPositioned:!1})))},[E]);const Ie=ee.useRef(!1);L0(()=>(Ie.current=!0,()=>{Ie.current=!1}),[]),L0(()=>{if(de&&(He.current=de),Pe&&(Xe.current=Pe),de&&Pe){if(Je.current)return Je.current(de,Pe,Te);Te()}},[de,Pe,Te,Je,Be]);const ut=ee.useMemo(()=>({reference:He,floating:Xe,setReference:se,setFloating:ce}),[se,ce]),it=ee.useMemo(()=>({reference:de,floating:Pe}),[de,Pe]),ot=ee.useMemo(()=>{const ke={position:i,left:0,top:0};if(!it.floating)return ke;const Ne=d2(it.floating,I.x),yt=d2(it.floating,I.y);return o?{...ke,transform:"translate("+Ne+"px, "+yt+"px)",...dE(it.floating)>=1.5&&{willChange:"transform"}}:{position:i,left:Ne,top:yt}},[i,o,it.floating,I.x,I.y]);return ee.useMemo(()=>({...I,update:Te,refs:ut,elements:it,floatingStyles:ot}),[I,Te,ut,it,ot])}const IM=e=>{function r(i){return{}.hasOwnProperty.call(i,"current")}return{name:"arrow",options:e,fn(i){const{element:a,padding:u}=typeof e=="function"?e(i):e;return a&&r(a)?a.current!=null?h2({element:a.current,padding:u}).fn(i):{}:a?h2({element:a,padding:u}).fn(i):{}}}},TM=(e,r)=>({...vM(e),options:[e,r]}),PM=(e,r)=>({..._M(e),options:[e,r]}),LM=(e,r)=>({...BM(e),options:[e,r]}),MM=(e,r)=>({...wM(e),options:[e,r]}),kM=(e,r)=>({...xM(e),options:[e,r]}),UM=(e,r)=>({...bM(e),options:[e,r]}),DM=(e,r)=>({...IM(e),options:[e,r]});var RM="Arrow",fE=ee.forwardRef((e,r)=>{const{children:i,width:a=10,height:u=5,...d}=e;return ae.jsx(oi.svg,{...d,ref:r,width:a,height:u,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:e.asChild?i:ae.jsx("polygon",{points:"0,0 30,0 15,10"})})});fE.displayName=RM;var NM=fE;function kw(e){const[r,i]=ee.useState(void 0);return Cl(()=>{if(e){i({width:e.offsetWidth,height:e.offsetHeight});const a=new ResizeObserver(u=>{if(!Array.isArray(u)||!u.length)return;const d=u[0];let m,o;if("borderBoxSize"in d){const w=d.borderBoxSize,E=Array.isArray(w)?w[0]:w;m=E.inlineSize,o=E.blockSize}else m=e.offsetWidth,o=e.offsetHeight;i({width:m,height:o})});return a.observe(e,{box:"border-box"}),()=>a.unobserve(e)}else i(void 0)},[e]),r}var Uw="Popper",[pE,Cy]=Hh(Uw),[QM,mE]=pE(Uw),gE=e=>{const{__scopePopper:r,children:i}=e,[a,u]=ee.useState(null);return ae.jsx(QM,{scope:r,anchor:a,onAnchorChange:u,children:i})};gE.displayName=Uw;var yE="PopperAnchor",vE=ee.forwardRef((e,r)=>{const{__scopePopper:i,virtualRef:a,...u}=e,d=mE(yE,i),m=ee.useRef(null),o=ds(r,m),w=ee.useRef(null);return ee.useEffect(()=>{const E=w.current;w.current=a?.current||m.current,E!==w.current&&d.onAnchorChange(w.current)}),a?null:ae.jsx(oi.div,{...u,ref:o})});vE.displayName=yE;var Dw="PopperContent",[OM,zM]=pE(Dw),_E=ee.forwardRef((e,r)=>{const{__scopePopper:i,side:a="bottom",sideOffset:u=0,align:d="center",alignOffset:m=0,arrowPadding:o=0,avoidCollisions:w=!0,collisionBoundary:E=[],collisionPadding:I=0,sticky:D="partial",hideWhenDetached:O=!1,updatePositionStrategy:P="optimized",onPlaced:W,...z}=e,H=mE(Dw,i),[Z,se]=ee.useState(null),ce=ds(r,et=>se(et)),[de,Pe]=ee.useState(null),He=kw(de),Xe=He?.width??0,Qe=He?.height??0,Be=a+(d!=="center"?"-"+d:""),Je=typeof I=="number"?I:{top:0,right:0,bottom:0,left:0,...I},Ae=Array.isArray(E)?E:[E],me=Ae.length>0,Te={padding:Je,boundary:Ae.filter(jM),altBoundary:me},{refs:Ie,floatingStyles:ut,placement:it,isPositioned:ot,middlewareData:ke}=FM({strategy:"fixed",placement:Be,whileElementsMounted:(...et)=>yM(...et,{animationFrame:P==="always"}),elements:{reference:H.anchor},middleware:[TM({mainAxis:u+Qe,alignmentAxis:m}),w&&PM({mainAxis:!0,crossAxis:!1,limiter:D==="partial"?LM():void 0,...Te}),w&&MM({...Te}),kM({...Te,apply:({elements:et,rects:_t,availableWidth:St,availableHeight:Tt})=>{const{width:Gt,height:or}=_t.reference,Ar=et.floating.style;Ar.setProperty("--radix-popper-available-width",`${St}px`),Ar.setProperty("--radix-popper-available-height",`${Tt}px`),Ar.setProperty("--radix-popper-anchor-width",`${Gt}px`),Ar.setProperty("--radix-popper-anchor-height",`${or}px`)}}),de&&DM({element:de,padding:o}),VM({arrowWidth:Xe,arrowHeight:Qe}),O&&UM({strategy:"referenceHidden",...Te})]}),[Ne,yt]=bE(it),Ce=iu(W);Cl(()=>{ot&&Ce?.()},[ot,Ce]);const ie=ke.arrow?.x,Ee=ke.arrow?.y,Le=ke.arrow?.centerOffset!==0,[Ve,nt]=ee.useState();return Cl(()=>{Z&&nt(window.getComputedStyle(Z).zIndex)},[Z]),ae.jsx("div",{ref:Ie.setFloating,"data-radix-popper-content-wrapper":"",style:{...ut,transform:ot?ut.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:Ve,"--radix-popper-transform-origin":[ke.transformOrigin?.x,ke.transformOrigin?.y].join(" "),...ke.hide?.referenceHidden&&{visibility:"hidden",pointerEvents:"none"}},dir:e.dir,children:ae.jsx(OM,{scope:i,placedSide:Ne,onArrowChange:Pe,arrowX:ie,arrowY:Ee,shouldHideArrow:Le,children:ae.jsx(oi.div,{"data-side":Ne,"data-align":yt,...z,ref:ce,style:{...z.style,animation:ot?void 0:"none"}})})})});_E.displayName=Dw;var wE="PopperArrow",HM={top:"bottom",right:"left",bottom:"top",left:"right"},xE=ee.forwardRef(function(r,i){const{__scopePopper:a,...u}=r,d=zM(wE,a),m=HM[d.placedSide];return ae.jsx("span",{ref:d.onArrowChange,style:{position:"absolute",left:d.arrowX,top:d.arrowY,[m]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[d.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[d.placedSide],visibility:d.shouldHideArrow?"hidden":void 0},children:ae.jsx(NM,{...u,ref:i,style:{...u.style,display:"block"}})})});xE.displayName=wE;function jM(e){return e!==null}var VM=e=>({name:"transformOrigin",options:e,fn(r){const{placement:i,rects:a,middlewareData:u}=r,m=u.arrow?.centerOffset!==0,o=m?0:e.arrowWidth,w=m?0:e.arrowHeight,[E,I]=bE(i),D={start:"0%",center:"50%",end:"100%"}[I],O=(u.arrow?.x??0)+o/2,P=(u.arrow?.y??0)+w/2;let W="",z="";return E==="bottom"?(W=m?D:`${O}px`,z=`${-w}px`):E==="top"?(W=m?D:`${O}px`,z=`${a.floating.height+w}px`):E==="right"?(W=`${-w}px`,z=m?D:`${P}px`):E==="left"&&(W=`${a.floating.width+w}px`,z=m?D:`${P}px`),{data:{x:W,y:z}}}});function bE(e){const[r,i="center"]=e.split("-");return[r,i]}var GM=gE,BE=vE,CE=_E,EE=xE,KM=Symbol("radix.slottable");function qM(e){const r=({children:i})=>ae.jsx(ae.Fragment,{children:i});return r.displayName=`${e}.Slottable`,r.__radixId=KM,r}var[Ey]=Hh("Tooltip",[Cy]),Rw=Cy(),SE="TooltipProvider",$M=700,f2="tooltip.open",[WM,FE]=Ey(SE),IE=e=>{const{__scopeTooltip:r,delayDuration:i=$M,skipDelayDuration:a=300,disableHoverableContent:u=!1,children:d}=e,m=ee.useRef(!0),o=ee.useRef(!1),w=ee.useRef(0);return ee.useEffect(()=>{const E=w.current;return()=>window.clearTimeout(E)},[]),ae.jsx(WM,{scope:r,isOpenDelayedRef:m,delayDuration:i,onOpen:ee.useCallback(()=>{window.clearTimeout(w.current),m.current=!1},[]),onClose:ee.useCallback(()=>{window.clearTimeout(w.current),w.current=window.setTimeout(()=>m.current=!0,a)},[a]),isPointerInTransitRef:o,onPointerInTransitChange:ee.useCallback(E=>{o.current=E},[]),disableHoverableContent:u,children:d})};IE.displayName=SE;var TE="Tooltip",[kV,Sy]=Ey(TE),v_="TooltipTrigger",ZM=ee.forwardRef((e,r)=>{const{__scopeTooltip:i,...a}=e,u=Sy(v_,i),d=FE(v_,i),m=Rw(i),o=ee.useRef(null),w=ds(r,o,u.onTriggerChange),E=ee.useRef(!1),I=ee.useRef(!1),D=ee.useCallback(()=>E.current=!1,[]);return ee.useEffect(()=>()=>document.removeEventListener("pointerup",D),[D]),ae.jsx(BE,{asChild:!0,...m,children:ae.jsx(oi.button,{"aria-describedby":u.open?u.contentId:void 0,"data-state":u.stateAttribute,...a,ref:w,onPointerMove:Un(e.onPointerMove,O=>{O.pointerType!=="touch"&&!I.current&&!d.isPointerInTransitRef.current&&(u.onTriggerEnter(),I.current=!0)}),onPointerLeave:Un(e.onPointerLeave,()=>{u.onTriggerLeave(),I.current=!1}),onPointerDown:Un(e.onPointerDown,()=>{u.open&&u.onClose(),E.current=!0,document.addEventListener("pointerup",D,{once:!0})}),onFocus:Un(e.onFocus,()=>{E.current||u.onOpen()}),onBlur:Un(e.onBlur,u.onClose),onClick:Un(e.onClick,u.onClose)})})});ZM.displayName=v_;var XM="TooltipPortal",[UV,YM]=Ey(XM,{forceMount:void 0}),yp="TooltipContent",PE=ee.forwardRef((e,r)=>{const i=YM(yp,e.__scopeTooltip),{forceMount:a=i.forceMount,side:u="top",...d}=e,m=Sy(yp,e.__scopeTooltip);return ae.jsx(Km,{present:a||m.open,children:m.disableHoverableContent?ae.jsx(LE,{side:u,...d,ref:r}):ae.jsx(JM,{side:u,...d,ref:r})})}),JM=ee.forwardRef((e,r)=>{const i=Sy(yp,e.__scopeTooltip),a=FE(yp,e.__scopeTooltip),u=ee.useRef(null),d=ds(r,u),[m,o]=ee.useState(null),{trigger:w,onClose:E}=i,I=u.current,{onPointerInTransitChange:D}=a,O=ee.useCallback(()=>{o(null),D(!1)},[D]),P=ee.useCallback((W,z)=>{const H=W.currentTarget,Z={x:W.clientX,y:W.clientY},se=ik(Z,H.getBoundingClientRect()),ce=sk(Z,se),de=ok(z.getBoundingClientRect()),Pe=lk([...ce,...de]);o(Pe),D(!0)},[D]);return ee.useEffect(()=>()=>O(),[O]),ee.useEffect(()=>{if(w&&I){const W=H=>P(H,I),z=H=>P(H,w);return w.addEventListener("pointerleave",W),I.addEventListener("pointerleave",z),()=>{w.removeEventListener("pointerleave",W),I.removeEventListener("pointerleave",z)}}},[w,I,P,O]),ee.useEffect(()=>{if(m){const W=z=>{const H=z.target,Z={x:z.clientX,y:z.clientY},se=w?.contains(H)||I?.contains(H),ce=!ak(Z,m);se?O():ce&&(O(),E())};return document.addEventListener("pointermove",W),()=>document.removeEventListener("pointermove",W)}},[w,I,m,E,O]),ae.jsx(LE,{...e,ref:d})}),[ek,tk]=Ey(TE,{isInside:!1}),rk=qM("TooltipContent"),LE=ee.forwardRef((e,r)=>{const{__scopeTooltip:i,children:a,"aria-label":u,onEscapeKeyDown:d,onPointerDownOutside:m,...o}=e,w=Sy(yp,i),E=Rw(i),{onClose:I}=w;return ee.useEffect(()=>(document.addEventListener(f2,I),()=>document.removeEventListener(f2,I)),[I]),ee.useEffect(()=>{if(w.trigger){const D=O=>{O.target?.contains(w.trigger)&&I()};return window.addEventListener("scroll",D,{capture:!0}),()=>window.removeEventListener("scroll",D,{capture:!0})}},[w.trigger,I]),ae.jsx(my,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:d,onPointerDownOutside:m,onFocusOutside:D=>D.preventDefault(),onDismiss:I,children:ae.jsxs(CE,{"data-state":w.stateAttribute,...E,...o,ref:r,style:{...o.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[ae.jsx(rk,{children:a}),ae.jsx(ek,{scope:i,isInside:!0,children:ae.jsx(M3,{id:w.contentId,role:"tooltip",children:u||a})})]})})});PE.displayName=yp;var ME="TooltipArrow",nk=ee.forwardRef((e,r)=>{const{__scopeTooltip:i,...a}=e,u=Rw(i);return tk(ME,i).isInside?null:ae.jsx(EE,{...u,...a,ref:r})});nk.displayName=ME;function ik(e,r){const i=Math.abs(r.top-e.y),a=Math.abs(r.bottom-e.y),u=Math.abs(r.right-e.x),d=Math.abs(r.left-e.x);switch(Math.min(i,a,u,d)){case d:return"left";case u:return"right";case i:return"top";case a:return"bottom";default:throw new Error("unreachable")}}function sk(e,r,i=5){const a=[];switch(r){case"top":a.push({x:e.x-i,y:e.y+i},{x:e.x+i,y:e.y+i});break;case"bottom":a.push({x:e.x-i,y:e.y-i},{x:e.x+i,y:e.y-i});break;case"left":a.push({x:e.x+i,y:e.y-i},{x:e.x+i,y:e.y+i});break;case"right":a.push({x:e.x-i,y:e.y-i},{x:e.x-i,y:e.y+i});break}return a}function ok(e){const{top:r,right:i,bottom:a,left:u}=e;return[{x:u,y:r},{x:i,y:r},{x:i,y:a},{x:u,y:a}]}function ak(e,r){const{x:i,y:a}=e;let u=!1;for(let d=0,m=r.length-1;d<r.length;m=d++){const o=r[d],w=r[m],E=o.x,I=o.y,D=w.x,O=w.y;I>a!=O>a&&i<(D-E)*(a-I)/(O-I)+E&&(u=!u)}return u}function lk(e){const r=e.slice();return r.sort((i,a)=>i.x<a.x?-1:i.x>a.x?1:i.y<a.y?-1:i.y>a.y?1:0),ck(r)}function ck(e){if(e.length<=1)return e.slice();const r=[];for(let a=0;a<e.length;a++){const u=e[a];for(;r.length>=2;){const d=r[r.length-1],m=r[r.length-2];if((d.x-m.x)*(u.y-m.y)>=(d.y-m.y)*(u.x-m.x))r.pop();else break}r.push(u)}r.pop();const i=[];for(let a=e.length-1;a>=0;a--){const u=e[a];for(;i.length>=2;){const d=i[i.length-1],m=i[i.length-2];if((d.x-m.x)*(u.y-m.y)>=(d.y-m.y)*(u.x-m.x))i.pop();else break}i.push(u)}return i.pop(),r.length===1&&i.length===1&&r[0].x===i[0].x&&r[0].y===i[0].y?r:r.concat(i)}var Ak=IE,kE=PE;const uk=Ak,hk=ee.forwardRef(({className:e,sideOffset:r=4,...i},a)=>ae.jsx(kE,{ref:a,sideOffset:r,className:qi("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...i}));hk.displayName=kE.displayName;var Fy=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},dk={setTimeout:(e,r)=>setTimeout(e,r),clearTimeout:e=>clearTimeout(e),setInterval:(e,r)=>setInterval(e,r),clearInterval:e=>clearInterval(e)},fk=class{#e=dk;#t=!1;setTimeoutProvider(e){this.#e=e}setTimeout(e,r){return this.#e.setTimeout(e,r)}clearTimeout(e){this.#e.clearTimeout(e)}setInterval(e,r){return this.#e.setInterval(e,r)}clearInterval(e){this.#e.clearInterval(e)}},__=new fk;function pk(e){setTimeout(e,0)}var Iy=typeof window>"u"||"Deno"in globalThis;function Iu(){}function mk(e,r){return typeof e=="function"?e(r):e}function gk(e){return typeof e=="number"&&e>=0&&e!==1/0}function yk(e,r){return Math.max(e+(r||0)-Date.now(),0)}function w_(e,r){return typeof e=="function"?e(r):e}function vk(e,r){return typeof e=="function"?e(r):e}function p2(e,r){const{type:i="all",exact:a,fetchStatus:u,predicate:d,queryKey:m,stale:o}=e;if(m){if(a){if(r.queryHash!==Nw(m,r.options))return!1}else if(!Dm(r.queryKey,m))return!1}if(i!=="all"){const w=r.isActive();if(i==="active"&&!w||i==="inactive"&&w)return!1}return!(typeof o=="boolean"&&r.isStale()!==o||u&&u!==r.state.fetchStatus||d&&!d(r))}function m2(e,r){const{exact:i,status:a,predicate:u,mutationKey:d}=e;if(d){if(!r.options.mutationKey)return!1;if(i){if(Um(r.options.mutationKey)!==Um(d))return!1}else if(!Dm(r.options.mutationKey,d))return!1}return!(a&&r.state.status!==a||u&&!u(r))}function Nw(e,r){return(r?.queryKeyHashFn||Um)(e)}function Um(e){return JSON.stringify(e,(r,i)=>x_(i)?Object.keys(i).sort().reduce((a,u)=>(a[u]=i[u],a),{}):i)}function Dm(e,r){return e===r?!0:typeof e!=typeof r?!1:e&&r&&typeof e=="object"&&typeof r=="object"?Object.keys(r).every(i=>Dm(e[i],r[i])):!1}var _k=Object.prototype.hasOwnProperty;function UE(e,r){if(e===r)return e;const i=g2(e)&&g2(r);if(!i&&!(x_(e)&&x_(r)))return r;const u=(i?e:Object.keys(e)).length,d=i?r:Object.keys(r),m=d.length,o=i?new Array(m):{};let w=0;for(let E=0;E<m;E++){const I=i?E:d[E],D=e[I],O=r[I];if(D===O){o[I]=D,(i?E<u:_k.call(e,I))&&w++;continue}if(D===null||O===null||typeof D!="object"||typeof O!="object"){o[I]=O;continue}const P=UE(D,O);o[I]=P,P===D&&w++}return u===m&&w===u?e:o}function g2(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function x_(e){if(!y2(e))return!1;const r=e.constructor;if(r===void 0)return!0;const i=r.prototype;return!(!y2(i)||!i.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(e)!==Object.prototype)}function y2(e){return Object.prototype.toString.call(e)==="[object Object]"}function wk(e){return new Promise(r=>{__.setTimeout(r,e)})}function xk(e,r,i){return typeof i.structuralSharing=="function"?i.structuralSharing(e,r):i.structuralSharing!==!1?UE(e,r):r}function bk(e,r,i=0){const a=[...e,r];return i&&a.length>i?a.slice(1):a}function Bk(e,r,i=0){const a=[r,...e];return i&&a.length>i?a.slice(0,-1):a}var Qw=Symbol();function DE(e,r){return!e.queryFn&&r?.initialPromise?()=>r.initialPromise:!e.queryFn||e.queryFn===Qw?()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`)):e.queryFn}var Ck=class extends Fy{#e;#t;#r;constructor(){super(),this.#r=e=>{if(!Iy&&window.addEventListener){const r=()=>e();return window.addEventListener("visibilitychange",r,!1),()=>{window.removeEventListener("visibilitychange",r)}}}}onSubscribe(){this.#t||this.setEventListener(this.#r)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(e){this.#r=e,this.#t?.(),this.#t=e(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()})}setFocused(e){this.#e!==e&&(this.#e=e,this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(r=>{r(e)})}isFocused(){return typeof this.#e=="boolean"?this.#e:globalThis.document?.visibilityState!=="hidden"}},RE=new Ck;function Ek(){let e,r;const i=new Promise((u,d)=>{e=u,r=d});i.status="pending",i.catch(()=>{});function a(u){Object.assign(i,u),delete i.resolve,delete i.reject}return i.resolve=u=>{a({status:"fulfilled",value:u}),e(u)},i.reject=u=>{a({status:"rejected",reason:u}),r(u)},i}var Sk=pk;function Fk(){let e=[],r=0,i=o=>{o()},a=o=>{o()},u=Sk;const d=o=>{r?e.push(o):u(()=>{i(o)})},m=()=>{const o=e;e=[],o.length&&u(()=>{a(()=>{o.forEach(w=>{i(w)})})})};return{batch:o=>{let w;r++;try{w=o()}finally{r--,r||m()}return w},batchCalls:o=>(...w)=>{d(()=>{o(...w)})},schedule:d,setNotifyFunction:o=>{i=o},setBatchNotifyFunction:o=>{a=o},setScheduler:o=>{u=o}}}var Bc=Fk(),Ik=class extends Fy{#e=!0;#t;#r;constructor(){super(),this.#r=e=>{if(!Iy&&window.addEventListener){const r=()=>e(!0),i=()=>e(!1);return window.addEventListener("online",r,!1),window.addEventListener("offline",i,!1),()=>{window.removeEventListener("online",r),window.removeEventListener("offline",i)}}}}onSubscribe(){this.#t||this.setEventListener(this.#r)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(e){this.#r=e,this.#t?.(),this.#t=e(this.setOnline.bind(this))}setOnline(e){this.#e!==e&&(this.#e=e,this.listeners.forEach(i=>{i(e)}))}isOnline(){return this.#e}},Z0=new Ik;function Tk(e){return Math.min(1e3*2**e,3e4)}function NE(e){return(e??"online")==="online"?Z0.isOnline():!0}var b_=class extends Error{constructor(e){super("CancelledError"),this.revert=e?.revert,this.silent=e?.silent}};function QE(e){let r=!1,i=0,a;const u=Ek(),d=()=>u.status!=="pending",m=z=>{if(!d()){const H=new b_(z);O(H),e.onCancel?.(H)}},o=()=>{r=!0},w=()=>{r=!1},E=()=>RE.isFocused()&&(e.networkMode==="always"||Z0.isOnline())&&e.canRun(),I=()=>NE(e.networkMode)&&e.canRun(),D=z=>{d()||(a?.(),u.resolve(z))},O=z=>{d()||(a?.(),u.reject(z))},P=()=>new Promise(z=>{a=H=>{(d()||E())&&z(H)},e.onPause?.()}).then(()=>{a=void 0,d()||e.onContinue?.()}),W=()=>{if(d())return;let z;const H=i===0?e.initialPromise:void 0;try{z=H??e.fn()}catch(Z){z=Promise.reject(Z)}Promise.resolve(z).then(D).catch(Z=>{if(d())return;const se=e.retry??(Iy?0:3),ce=e.retryDelay??Tk,de=typeof ce=="function"?ce(i,Z):ce,Pe=se===!0||typeof se=="number"&&i<se||typeof se=="function"&&se(i,Z);if(r||!Pe){O(Z);return}i++,e.onFail?.(i,Z),wk(de).then(()=>E()?void 0:P()).then(()=>{r?O(Z):W()})})};return{promise:u,status:()=>u.status,cancel:m,continue:()=>(a?.(),u),cancelRetry:o,continueRetry:w,canStart:I,start:()=>(I()?W():P().then(W),u)}}var OE=class{#e;destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),gk(this.gcTime)&&(this.#e=__.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(Iy?1/0:300*1e3))}clearGcTimeout(){this.#e&&(__.clearTimeout(this.#e),this.#e=void 0)}},Pk=class extends OE{#e;#t;#r;#i;#n;#o;#a;constructor(e){super(),this.#a=!1,this.#o=e.defaultOptions,this.setOptions(e.options),this.observers=[],this.#i=e.client,this.#r=this.#i.getQueryCache(),this.queryKey=e.queryKey,this.queryHash=e.queryHash,this.#e=_2(this.options),this.state=e.state??this.#e,this.scheduleGc()}get meta(){return this.options.meta}get promise(){return this.#n?.promise}setOptions(e){if(this.options={...this.#o,...e},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const r=_2(this.options);r.data!==void 0&&(this.setState(v2(r.data,r.dataUpdatedAt)),this.#e=r)}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&this.#r.remove(this)}setData(e,r){const i=xk(this.state.data,e,this.options);return this.#s({data:i,type:"success",dataUpdatedAt:r?.updatedAt,manual:r?.manual}),i}setState(e,r){this.#s({type:"setState",state:e,setStateOptions:r})}cancel(e){const r=this.#n?.promise;return this.#n?.cancel(e),r?r.then(Iu).catch(Iu):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(this.#e)}isActive(){return this.observers.some(e=>vk(e.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===Qw||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(e=>w_(e.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(e=0){return this.state.data===void 0?!0:e==="static"?!1:this.state.isInvalidated?!0:!yk(this.state.dataUpdatedAt,e)}onFocus(){this.observers.find(r=>r.shouldFetchOnWindowFocus())?.refetch({cancelRefetch:!1}),this.#n?.continue()}onOnline(){this.observers.find(r=>r.shouldFetchOnReconnect())?.refetch({cancelRefetch:!1}),this.#n?.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),this.#r.notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(r=>r!==e),this.observers.length||(this.#n&&(this.#a?this.#n.cancel({revert:!0}):this.#n.cancelRetry()),this.scheduleGc()),this.#r.notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||this.#s({type:"invalidate"})}async fetch(e,r){if(this.state.fetchStatus!=="idle"&&this.#n?.status()!=="rejected"){if(this.state.data!==void 0&&r?.cancelRefetch)this.cancel({silent:!0});else if(this.#n)return this.#n.continueRetry(),this.#n.promise}if(e&&this.setOptions(e),!this.options.queryFn){const o=this.observers.find(w=>w.options.queryFn);o&&this.setOptions(o.options)}const i=new AbortController,a=o=>{Object.defineProperty(o,"signal",{enumerable:!0,get:()=>(this.#a=!0,i.signal)})},u=()=>{const o=DE(this.options,r),E=(()=>{const I={client:this.#i,queryKey:this.queryKey,meta:this.meta};return a(I),I})();return this.#a=!1,this.options.persister?this.options.persister(o,E,this):o(E)},m=(()=>{const o={fetchOptions:r,options:this.options,queryKey:this.queryKey,client:this.#i,state:this.state,fetchFn:u};return a(o),o})();this.options.behavior?.onFetch(m,this),this.#t=this.state,(this.state.fetchStatus==="idle"||this.state.fetchMeta!==m.fetchOptions?.meta)&&this.#s({type:"fetch",meta:m.fetchOptions?.meta}),this.#n=QE({initialPromise:r?.initialPromise,fn:m.fetchFn,onCancel:o=>{o instanceof b_&&o.revert&&this.setState({...this.#t,fetchStatus:"idle"}),i.abort()},onFail:(o,w)=>{this.#s({type:"failed",failureCount:o,error:w})},onPause:()=>{this.#s({type:"pause"})},onContinue:()=>{this.#s({type:"continue"})},retry:m.options.retry,retryDelay:m.options.retryDelay,networkMode:m.options.networkMode,canRun:()=>!0});try{const o=await this.#n.start();if(o===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(o),this.#r.config.onSuccess?.(o,this),this.#r.config.onSettled?.(o,this.state.error,this),o}catch(o){if(o instanceof b_){if(o.silent)return this.#n.promise;if(o.revert){if(this.state.data===void 0)throw o;return this.state.data}}throw this.#s({type:"error",error:o}),this.#r.config.onError?.(o,this),this.#r.config.onSettled?.(this.state.data,o,this),o}finally{this.scheduleGc()}}#s(e){const r=i=>{switch(e.type){case"failed":return{...i,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...i,fetchStatus:"paused"};case"continue":return{...i,fetchStatus:"fetching"};case"fetch":return{...i,...Lk(i.data,this.options),fetchMeta:e.meta??null};case"success":const a={...i,...v2(e.data,e.dataUpdatedAt),dataUpdateCount:i.dataUpdateCount+1,...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return this.#t=e.manual?a:void 0,a;case"error":const u=e.error;return{...i,error:u,errorUpdateCount:i.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:i.fetchFailureCount+1,fetchFailureReason:u,fetchStatus:"idle",status:"error"};case"invalidate":return{...i,isInvalidated:!0};case"setState":return{...i,...e.state}}};this.state=r(this.state),Bc.batch(()=>{this.observers.forEach(i=>{i.onQueryUpdate()}),this.#r.notify({query:this,type:"updated",action:e})})}};function Lk(e,r){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:NE(r.networkMode)?"fetching":"paused",...e===void 0&&{error:null,status:"pending"}}}function v2(e,r){return{data:e,dataUpdatedAt:r??Date.now(),error:null,isInvalidated:!1,status:"success"}}function _2(e){const r=typeof e.initialData=="function"?e.initialData():e.initialData,i=r!==void 0,a=i?typeof e.initialDataUpdatedAt=="function"?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:r,dataUpdateCount:0,dataUpdatedAt:i?a??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:i?"success":"pending",fetchStatus:"idle"}}function w2(e){return{onFetch:(r,i)=>{const a=r.options,u=r.fetchOptions?.meta?.fetchMore?.direction,d=r.state.data?.pages||[],m=r.state.data?.pageParams||[];let o={pages:[],pageParams:[]},w=0;const E=async()=>{let I=!1;const D=W=>{Object.defineProperty(W,"signal",{enumerable:!0,get:()=>(r.signal.aborted?I=!0:r.signal.addEventListener("abort",()=>{I=!0}),r.signal)})},O=DE(r.options,r.fetchOptions),P=async(W,z,H)=>{if(I)return Promise.reject();if(z==null&&W.pages.length)return Promise.resolve(W);const se=(()=>{const He={client:r.client,queryKey:r.queryKey,pageParam:z,direction:H?"backward":"forward",meta:r.options.meta};return D(He),He})(),ce=await O(se),{maxPages:de}=r.options,Pe=H?Bk:bk;return{pages:Pe(W.pages,ce,de),pageParams:Pe(W.pageParams,z,de)}};if(u&&d.length){const W=u==="backward",z=W?Mk:x2,H={pages:d,pageParams:m},Z=z(a,H);o=await P(H,Z,W)}else{const W=e??d.length;do{const z=w===0?m[0]??a.initialPageParam:x2(a,o);if(w>0&&z==null)break;o=await P(o,z),w++}while(w<W)}return o};r.options.persister?r.fetchFn=()=>r.options.persister?.(E,{client:r.client,queryKey:r.queryKey,meta:r.options.meta,signal:r.signal},i):r.fetchFn=E}}}function x2(e,{pages:r,pageParams:i}){const a=r.length-1;return r.length>0?e.getNextPageParam(r[a],r,i[a],i):void 0}function Mk(e,{pages:r,pageParams:i}){return r.length>0?e.getPreviousPageParam?.(r[0],r,i[0],i):void 0}var kk=class extends OE{#e;#t;#r;#i;constructor(e){super(),this.#e=e.client,this.mutationId=e.mutationId,this.#r=e.mutationCache,this.#t=[],this.state=e.state||Uk(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){this.#t.includes(e)||(this.#t.push(e),this.clearGcTimeout(),this.#r.notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){this.#t=this.#t.filter(r=>r!==e),this.scheduleGc(),this.#r.notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){this.#t.length||(this.state.status==="pending"?this.scheduleGc():this.#r.remove(this))}continue(){return this.#i?.continue()??this.execute(this.state.variables)}async execute(e){const r=()=>{this.#n({type:"continue"})},i={client:this.#e,meta:this.options.meta,mutationKey:this.options.mutationKey};this.#i=QE({fn:()=>this.options.mutationFn?this.options.mutationFn(e,i):Promise.reject(new Error("No mutationFn found")),onFail:(d,m)=>{this.#n({type:"failed",failureCount:d,error:m})},onPause:()=>{this.#n({type:"pause"})},onContinue:r,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>this.#r.canRun(this)});const a=this.state.status==="pending",u=!this.#i.canStart();try{if(a)r();else{this.#n({type:"pending",variables:e,isPaused:u}),await this.#r.config.onMutate?.(e,this,i);const m=await this.options.onMutate?.(e,i);m!==this.state.context&&this.#n({type:"pending",context:m,variables:e,isPaused:u})}const d=await this.#i.start();return await this.#r.config.onSuccess?.(d,e,this.state.context,this,i),await this.options.onSuccess?.(d,e,this.state.context,i),await this.#r.config.onSettled?.(d,null,this.state.variables,this.state.context,this,i),await this.options.onSettled?.(d,null,e,this.state.context,i),this.#n({type:"success",data:d}),d}catch(d){try{throw await this.#r.config.onError?.(d,e,this.state.context,this,i),await this.options.onError?.(d,e,this.state.context,i),await this.#r.config.onSettled?.(void 0,d,this.state.variables,this.state.context,this,i),await this.options.onSettled?.(void 0,d,e,this.state.context,i),d}finally{this.#n({type:"error",error:d})}}finally{this.#r.runNext(this)}}#n(e){const r=i=>{switch(e.type){case"failed":return{...i,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...i,isPaused:!0};case"continue":return{...i,isPaused:!1};case"pending":return{...i,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...i,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...i,data:void 0,error:e.error,failureCount:i.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=r(this.state),Bc.batch(()=>{this.#t.forEach(i=>{i.onMutationUpdate(e)}),this.#r.notify({mutation:this,type:"updated",action:e})})}};function Uk(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var Dk=class extends Fy{constructor(e={}){super(),this.config=e,this.#e=new Set,this.#t=new Map,this.#r=0}#e;#t;#r;build(e,r,i){const a=new kk({client:e,mutationCache:this,mutationId:++this.#r,options:e.defaultMutationOptions(r),state:i});return this.add(a),a}add(e){this.#e.add(e);const r=Vg(e);if(typeof r=="string"){const i=this.#t.get(r);i?i.push(e):this.#t.set(r,[e])}this.notify({type:"added",mutation:e})}remove(e){if(this.#e.delete(e)){const r=Vg(e);if(typeof r=="string"){const i=this.#t.get(r);if(i)if(i.length>1){const a=i.indexOf(e);a!==-1&&i.splice(a,1)}else i[0]===e&&this.#t.delete(r)}}this.notify({type:"removed",mutation:e})}canRun(e){const r=Vg(e);if(typeof r=="string"){const a=this.#t.get(r)?.find(u=>u.state.status==="pending");return!a||a===e}else return!0}runNext(e){const r=Vg(e);return typeof r=="string"?this.#t.get(r)?.find(a=>a!==e&&a.state.isPaused)?.continue()??Promise.resolve():Promise.resolve()}clear(){Bc.batch(()=>{this.#e.forEach(e=>{this.notify({type:"removed",mutation:e})}),this.#e.clear(),this.#t.clear()})}getAll(){return Array.from(this.#e)}find(e){const r={exact:!0,...e};return this.getAll().find(i=>m2(r,i))}findAll(e={}){return this.getAll().filter(r=>m2(e,r))}notify(e){Bc.batch(()=>{this.listeners.forEach(r=>{r(e)})})}resumePausedMutations(){const e=this.getAll().filter(r=>r.state.isPaused);return Bc.batch(()=>Promise.all(e.map(r=>r.continue().catch(Iu))))}};function Vg(e){return e.options.scope?.id}var Rk=class extends Fy{constructor(e={}){super(),this.config=e,this.#e=new Map}#e;build(e,r,i){const a=r.queryKey,u=r.queryHash??Nw(a,r);let d=this.get(u);return d||(d=new Pk({client:e,queryKey:a,queryHash:u,options:e.defaultQueryOptions(r),state:i,defaultOptions:e.getQueryDefaults(a)}),this.add(d)),d}add(e){this.#e.has(e.queryHash)||(this.#e.set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const r=this.#e.get(e.queryHash);r&&(e.destroy(),r===e&&this.#e.delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){Bc.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return this.#e.get(e)}getAll(){return[...this.#e.values()]}find(e){const r={exact:!0,...e};return this.getAll().find(i=>p2(r,i))}findAll(e={}){const r=this.getAll();return Object.keys(e).length>0?r.filter(i=>p2(e,i)):r}notify(e){Bc.batch(()=>{this.listeners.forEach(r=>{r(e)})})}onFocus(){Bc.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){Bc.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},Nk=class{#e;#t;#r;#i;#n;#o;#a;#s;constructor(e={}){this.#e=e.queryCache||new Rk,this.#t=e.mutationCache||new Dk,this.#r=e.defaultOptions||{},this.#i=new Map,this.#n=new Map,this.#o=0}mount(){this.#o++,this.#o===1&&(this.#a=RE.subscribe(async e=>{e&&(await this.resumePausedMutations(),this.#e.onFocus())}),this.#s=Z0.subscribe(async e=>{e&&(await this.resumePausedMutations(),this.#e.onOnline())}))}unmount(){this.#o--,this.#o===0&&(this.#a?.(),this.#a=void 0,this.#s?.(),this.#s=void 0)}isFetching(e){return this.#e.findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return this.#t.findAll({...e,status:"pending"}).length}getQueryData(e){const r=this.defaultQueryOptions({queryKey:e});return this.#e.get(r.queryHash)?.state.data}ensureQueryData(e){const r=this.defaultQueryOptions(e),i=this.#e.build(this,r),a=i.state.data;return a===void 0?this.fetchQuery(e):(e.revalidateIfStale&&i.isStaleByTime(w_(r.staleTime,i))&&this.prefetchQuery(r),Promise.resolve(a))}getQueriesData(e){return this.#e.findAll(e).map(({queryKey:r,state:i})=>{const a=i.data;return[r,a]})}setQueryData(e,r,i){const a=this.defaultQueryOptions({queryKey:e}),d=this.#e.get(a.queryHash)?.state.data,m=mk(r,d);if(m!==void 0)return this.#e.build(this,a).setData(m,{...i,manual:!0})}setQueriesData(e,r,i){return Bc.batch(()=>this.#e.findAll(e).map(({queryKey:a})=>[a,this.setQueryData(a,r,i)]))}getQueryState(e){const r=this.defaultQueryOptions({queryKey:e});return this.#e.get(r.queryHash)?.state}removeQueries(e){const r=this.#e;Bc.batch(()=>{r.findAll(e).forEach(i=>{r.remove(i)})})}resetQueries(e,r){const i=this.#e;return Bc.batch(()=>(i.findAll(e).forEach(a=>{a.reset()}),this.refetchQueries({type:"active",...e},r)))}cancelQueries(e,r={}){const i={revert:!0,...r},a=Bc.batch(()=>this.#e.findAll(e).map(u=>u.cancel(i)));return Promise.all(a).then(Iu).catch(Iu)}invalidateQueries(e,r={}){return Bc.batch(()=>(this.#e.findAll(e).forEach(i=>{i.invalidate()}),e?.refetchType==="none"?Promise.resolve():this.refetchQueries({...e,type:e?.refetchType??e?.type??"active"},r)))}refetchQueries(e,r={}){const i={...r,cancelRefetch:r.cancelRefetch??!0},a=Bc.batch(()=>this.#e.findAll(e).filter(u=>!u.isDisabled()&&!u.isStatic()).map(u=>{let d=u.fetch(void 0,i);return i.throwOnError||(d=d.catch(Iu)),u.state.fetchStatus==="paused"?Promise.resolve():d}));return Promise.all(a).then(Iu)}fetchQuery(e){const r=this.defaultQueryOptions(e);r.retry===void 0&&(r.retry=!1);const i=this.#e.build(this,r);return i.isStaleByTime(w_(r.staleTime,i))?i.fetch(r):Promise.resolve(i.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(Iu).catch(Iu)}fetchInfiniteQuery(e){return e.behavior=w2(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(Iu).catch(Iu)}ensureInfiniteQueryData(e){return e.behavior=w2(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return Z0.isOnline()?this.#t.resumePausedMutations():Promise.resolve()}getQueryCache(){return this.#e}getMutationCache(){return this.#t}getDefaultOptions(){return this.#r}setDefaultOptions(e){this.#r=e}setQueryDefaults(e,r){this.#i.set(Um(e),{queryKey:e,defaultOptions:r})}getQueryDefaults(e){const r=[...this.#i.values()],i={};return r.forEach(a=>{Dm(e,a.queryKey)&&Object.assign(i,a.defaultOptions)}),i}setMutationDefaults(e,r){this.#n.set(Um(e),{mutationKey:e,defaultOptions:r})}getMutationDefaults(e){const r=[...this.#n.values()],i={};return r.forEach(a=>{Dm(e,a.mutationKey)&&Object.assign(i,a.defaultOptions)}),i}defaultQueryOptions(e){if(e._defaulted)return e;const r={...this.#r.queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return r.queryHash||(r.queryHash=Nw(r.queryKey,r)),r.refetchOnReconnect===void 0&&(r.refetchOnReconnect=r.networkMode!=="always"),r.throwOnError===void 0&&(r.throwOnError=!!r.suspense),!r.networkMode&&r.persister&&(r.networkMode="offlineFirst"),r.queryFn===Qw&&(r.enabled=!1),r}defaultMutationOptions(e){return e?._defaulted?e:{...this.#r.mutations,...e?.mutationKey&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){this.#e.clear(),this.#t.clear()}},Qk=ee.createContext(void 0),Ok=({client:e,children:r})=>(ee.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]),ae.jsx(Qk.Provider,{value:e,children:r}));function Rm(){return Rm=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var i=arguments[r];for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(e[a]=i[a])}return e},Rm.apply(this,arguments)}var ud;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(ud||(ud={}));const b2="popstate";function zk(e){e===void 0&&(e={});function r(a,u){let{pathname:d,search:m,hash:o}=a.location;return B_("",{pathname:d,search:m,hash:o},u.state&&u.state.usr||null,u.state&&u.state.key||"default")}function i(a,u){return typeof u=="string"?u:X0(u)}return jk(r,i,null,e)}function aa(e,r){if(e===!1||e===null||typeof e>"u")throw new Error(r)}function Ow(e,r){if(!e){typeof console<"u"&&console.warn(r);try{throw new Error(r)}catch{}}}function Hk(){return Math.random().toString(36).substr(2,8)}function B2(e,r){return{usr:e.state,key:e.key,idx:r}}function B_(e,r,i,a){return i===void 0&&(i=null),Rm({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof r=="string"?Bp(r):r,{state:i,key:r&&r.key||a||Hk()})}function X0(e){let{pathname:r="/",search:i="",hash:a=""}=e;return i&&i!=="?"&&(r+=i.charAt(0)==="?"?i:"?"+i),a&&a!=="#"&&(r+=a.charAt(0)==="#"?a:"#"+a),r}function Bp(e){let r={};if(e){let i=e.indexOf("#");i>=0&&(r.hash=e.substr(i),e=e.substr(0,i));let a=e.indexOf("?");a>=0&&(r.search=e.substr(a),e=e.substr(0,a)),e&&(r.pathname=e)}return r}function jk(e,r,i,a){a===void 0&&(a={});let{window:u=document.defaultView,v5Compat:d=!1}=a,m=u.history,o=ud.Pop,w=null,E=I();E==null&&(E=0,m.replaceState(Rm({},m.state,{idx:E}),""));function I(){return(m.state||{idx:null}).idx}function D(){o=ud.Pop;let H=I(),Z=H==null?null:H-E;E=H,w&&w({action:o,location:z.location,delta:Z})}function O(H,Z){o=ud.Push;let se=B_(z.location,H,Z);E=I()+1;let ce=B2(se,E),de=z.createHref(se);try{m.pushState(ce,"",de)}catch(Pe){if(Pe instanceof DOMException&&Pe.name==="DataCloneError")throw Pe;u.location.assign(de)}d&&w&&w({action:o,location:z.location,delta:1})}function P(H,Z){o=ud.Replace;let se=B_(z.location,H,Z);E=I();let ce=B2(se,E),de=z.createHref(se);m.replaceState(ce,"",de),d&&w&&w({action:o,location:z.location,delta:0})}function W(H){let Z=u.location.origin!=="null"?u.location.origin:u.location.href,se=typeof H=="string"?H:X0(H);return se=se.replace(/ $/,"%20"),aa(Z,"No window.location.(origin|href) available to create URL for href: "+se),new URL(se,Z)}let z={get action(){return o},get location(){return e(u,m)},listen(H){if(w)throw new Error("A history only accepts one active listener");return u.addEventListener(b2,D),w=H,()=>{u.removeEventListener(b2,D),w=null}},createHref(H){return r(u,H)},createURL:W,encodeLocation(H){let Z=W(H);return{pathname:Z.pathname,search:Z.search,hash:Z.hash}},push:O,replace:P,go(H){return m.go(H)}};return z}var C2;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(C2||(C2={}));function Vk(e,r,i){return i===void 0&&(i="/"),Gk(e,r,i)}function Gk(e,r,i,a){let u=typeof r=="string"?Bp(r):r,d=zw(u.pathname||"/",i);if(d==null)return null;let m=zE(e);Kk(m);let o=null;for(let w=0;o==null&&w<m.length;++w){let E=iU(d);o=tU(m[w],E)}return o}function zE(e,r,i,a){r===void 0&&(r=[]),i===void 0&&(i=[]),a===void 0&&(a="");let u=(d,m,o)=>{let w={relativePath:o===void 0?d.path||"":o,caseSensitive:d.caseSensitive===!0,childrenIndex:m,route:d};w.relativePath.startsWith("/")&&(aa(w.relativePath.startsWith(a),'Absolute route path "'+w.relativePath+'" nested under path '+('"'+a+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),w.relativePath=w.relativePath.slice(a.length));let E=md([a,w.relativePath]),I=i.concat(w);d.children&&d.children.length>0&&(aa(d.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+E+'".')),zE(d.children,r,I,E)),!(d.path==null&&!d.index)&&r.push({path:E,score:Jk(E,d.index),routesMeta:I})};return e.forEach((d,m)=>{var o;if(d.path===""||!((o=d.path)!=null&&o.includes("?")))u(d,m);else for(let w of HE(d.path))u(d,m,w)}),r}function HE(e){let r=e.split("/");if(r.length===0)return[];let[i,...a]=r,u=i.endsWith("?"),d=i.replace(/\?$/,"");if(a.length===0)return u?[d,""]:[d];let m=HE(a.join("/")),o=[];return o.push(...m.map(w=>w===""?d:[d,w].join("/"))),u&&o.push(...m),o.map(w=>e.startsWith("/")&&w===""?"/":w)}function Kk(e){e.sort((r,i)=>r.score!==i.score?i.score-r.score:eU(r.routesMeta.map(a=>a.childrenIndex),i.routesMeta.map(a=>a.childrenIndex)))}const qk=/^:[\w-]+$/,$k=3,Wk=2,Zk=1,Xk=10,Yk=-2,E2=e=>e==="*";function Jk(e,r){let i=e.split("/"),a=i.length;return i.some(E2)&&(a+=Yk),r&&(a+=Wk),i.filter(u=>!E2(u)).reduce((u,d)=>u+(qk.test(d)?$k:d===""?Zk:Xk),a)}function eU(e,r){return e.length===r.length&&e.slice(0,-1).every((a,u)=>a===r[u])?e[e.length-1]-r[r.length-1]:0}function tU(e,r,i){let{routesMeta:a}=e,u={},d="/",m=[];for(let o=0;o<a.length;++o){let w=a[o],E=o===a.length-1,I=d==="/"?r:r.slice(d.length)||"/",D=rU({path:w.relativePath,caseSensitive:w.caseSensitive,end:E},I),O=w.route;if(!D)return null;Object.assign(u,D.params),m.push({params:u,pathname:md([d,D.pathname]),pathnameBase:cU(md([d,D.pathnameBase])),route:O}),D.pathnameBase!=="/"&&(d=md([d,D.pathnameBase]))}return m}function rU(e,r){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[i,a]=nU(e.path,e.caseSensitive,e.end),u=r.match(i);if(!u)return null;let d=u[0],m=d.replace(/(.)\/+$/,"$1"),o=u.slice(1);return{params:a.reduce((E,I,D)=>{let{paramName:O,isOptional:P}=I;if(O==="*"){let z=o[D]||"";m=d.slice(0,d.length-z.length).replace(/(.)\/+$/,"$1")}const W=o[D];return P&&!W?E[O]=void 0:E[O]=(W||"").replace(/%2F/g,"/"),E},{}),pathname:d,pathnameBase:m,pattern:e}}function nU(e,r,i){r===void 0&&(r=!1),i===void 0&&(i=!0),Ow(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let a=[],u="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(m,o,w)=>(a.push({paramName:o,isOptional:w!=null}),w?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(a.push({paramName:"*"}),u+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):i?u+="\\/*$":e!==""&&e!=="/"&&(u+="(?:(?=\\/|$))"),[new RegExp(u,r?void 0:"i"),a]}function iU(e){try{return e.split("/").map(r=>decodeURIComponent(r).replace(/\//g,"%2F")).join("/")}catch(r){return Ow(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+r+").")),e}}function zw(e,r){if(r==="/")return e;if(!e.toLowerCase().startsWith(r.toLowerCase()))return null;let i=r.endsWith("/")?r.length-1:r.length,a=e.charAt(i);return a&&a!=="/"?null:e.slice(i)||"/"}const sU=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,oU=e=>sU.test(e);function aU(e,r){r===void 0&&(r="/");let{pathname:i,search:a="",hash:u=""}=typeof e=="string"?Bp(e):e,d;if(i)if(oU(i))d=i;else{if(i.includes("//")){let m=i;i=i.replace(/\/\/+/g,"/"),Ow(!1,"Pathnames cannot have embedded double slashes - normalizing "+(m+" -> "+i))}i.startsWith("/")?d=S2(i.substring(1),"/"):d=S2(i,r)}else d=r;return{pathname:d,search:AU(a),hash:uU(u)}}function S2(e,r){let i=r.replace(/\/+$/,"").split("/");return e.split("/").forEach(u=>{u===".."?i.length>1&&i.pop():u!=="."&&i.push(u)}),i.length>1?i.join("/"):"/"}function e1(e,r,i,a){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+r+"` field ["+JSON.stringify(a)+"].  Please separate it out to the ")+("`to."+i+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function lU(e){return e.filter((r,i)=>i===0||r.route.path&&r.route.path.length>0)}function jE(e,r){let i=lU(e);return r?i.map((a,u)=>u===i.length-1?a.pathname:a.pathnameBase):i.map(a=>a.pathnameBase)}function VE(e,r,i,a){a===void 0&&(a=!1);let u;typeof e=="string"?u=Bp(e):(u=Rm({},e),aa(!u.pathname||!u.pathname.includes("?"),e1("?","pathname","search",u)),aa(!u.pathname||!u.pathname.includes("#"),e1("#","pathname","hash",u)),aa(!u.search||!u.search.includes("#"),e1("#","search","hash",u)));let d=e===""||u.pathname==="",m=d?"/":u.pathname,o;if(m==null)o=i;else{let D=r.length-1;if(!a&&m.startsWith("..")){let O=m.split("/");for(;O[0]==="..";)O.shift(),D-=1;u.pathname=O.join("/")}o=D>=0?r[D]:"/"}let w=aU(u,o),E=m&&m!=="/"&&m.endsWith("/"),I=(d||m===".")&&i.endsWith("/");return!w.pathname.endsWith("/")&&(E||I)&&(w.pathname+="/"),w}const md=e=>e.join("/").replace(/\/\/+/g,"/"),cU=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),AU=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,uU=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function hU(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const GE=["post","put","patch","delete"];new Set(GE);const dU=["get",...GE];new Set(dU);function Nm(){return Nm=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var i=arguments[r];for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(e[a]=i[a])}return e},Nm.apply(this,arguments)}const Hw=ee.createContext(null),fU=ee.createContext(null),af=ee.createContext(null),Ty=ee.createContext(null),lf=ee.createContext({outlet:null,matches:[],isDataRoute:!1}),KE=ee.createContext(null);function pU(e,r){let{relative:i}=r===void 0?{}:r;Zm()||aa(!1);let{basename:a,navigator:u}=ee.useContext(af),{hash:d,pathname:m,search:o}=$E(e,{relative:i}),w=m;return a!=="/"&&(w=m==="/"?a:md([a,m])),u.createHref({pathname:w,search:o,hash:d})}function Zm(){return ee.useContext(Ty)!=null}function Xm(){return Zm()||aa(!1),ee.useContext(Ty).location}function qE(e){ee.useContext(af).static||ee.useLayoutEffect(e)}function mU(){let{isDataRoute:e}=ee.useContext(lf);return e?IU():gU()}function gU(){Zm()||aa(!1);let e=ee.useContext(Hw),{basename:r,future:i,navigator:a}=ee.useContext(af),{matches:u}=ee.useContext(lf),{pathname:d}=Xm(),m=JSON.stringify(jE(u,i.v7_relativeSplatPath)),o=ee.useRef(!1);return qE(()=>{o.current=!0}),ee.useCallback(function(E,I){if(I===void 0&&(I={}),!o.current)return;if(typeof E=="number"){a.go(E);return}let D=VE(E,JSON.parse(m),d,I.relative==="path");e==null&&r!=="/"&&(D.pathname=D.pathname==="/"?r:md([r,D.pathname])),(I.replace?a.replace:a.push)(D,I.state,I)},[r,a,m,d,e])}function $E(e,r){let{relative:i}=r===void 0?{}:r,{future:a}=ee.useContext(af),{matches:u}=ee.useContext(lf),{pathname:d}=Xm(),m=JSON.stringify(jE(u,a.v7_relativeSplatPath));return ee.useMemo(()=>VE(e,JSON.parse(m),d,i==="path"),[e,m,d,i])}function yU(e,r){return vU(e,r)}function vU(e,r,i,a){Zm()||aa(!1);let{navigator:u}=ee.useContext(af),{matches:d}=ee.useContext(lf),m=d[d.length-1],o=m?m.params:{};m&&m.pathname;let w=m?m.pathnameBase:"/";m&&m.route;let E=Xm(),I;if(r){var D;let H=typeof r=="string"?Bp(r):r;w==="/"||(D=H.pathname)!=null&&D.startsWith(w)||aa(!1),I=H}else I=E;let O=I.pathname||"/",P=O;if(w!=="/"){let H=w.replace(/^\//,"").split("/");P="/"+O.replace(/^\//,"").split("/").slice(H.length).join("/")}let W=Vk(e,{pathname:P}),z=BU(W&&W.map(H=>Object.assign({},H,{params:Object.assign({},o,H.params),pathname:md([w,u.encodeLocation?u.encodeLocation(H.pathname).pathname:H.pathname]),pathnameBase:H.pathnameBase==="/"?w:md([w,u.encodeLocation?u.encodeLocation(H.pathnameBase).pathname:H.pathnameBase])})),d,i,a);return r&&z?ee.createElement(Ty.Provider,{value:{location:Nm({pathname:"/",search:"",hash:"",state:null,key:"default"},I),navigationType:ud.Pop}},z):z}function _U(){let e=FU(),r=hU(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),i=e instanceof Error?e.stack:null,u={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return ee.createElement(ee.Fragment,null,ee.createElement("h2",null,"Unexpected Application Error!"),ee.createElement("h3",{style:{fontStyle:"italic"}},r),i?ee.createElement("pre",{style:u},i):null,null)}const wU=ee.createElement(_U,null);class xU extends ee.Component{constructor(r){super(r),this.state={location:r.location,revalidation:r.revalidation,error:r.error}}static getDerivedStateFromError(r){return{error:r}}static getDerivedStateFromProps(r,i){return i.location!==r.location||i.revalidation!=="idle"&&r.revalidation==="idle"?{error:r.error,location:r.location,revalidation:r.revalidation}:{error:r.error!==void 0?r.error:i.error,location:i.location,revalidation:r.revalidation||i.revalidation}}componentDidCatch(r,i){console.error("React Router caught the following error during render",r,i)}render(){return this.state.error!==void 0?ee.createElement(lf.Provider,{value:this.props.routeContext},ee.createElement(KE.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function bU(e){let{routeContext:r,match:i,children:a}=e,u=ee.useContext(Hw);return u&&u.static&&u.staticContext&&(i.route.errorElement||i.route.ErrorBoundary)&&(u.staticContext._deepestRenderedBoundaryId=i.route.id),ee.createElement(lf.Provider,{value:r},a)}function BU(e,r,i,a){var u;if(r===void 0&&(r=[]),i===void 0&&(i=null),a===void 0&&(a=null),e==null){var d;if(!i)return null;if(i.errors)e=i.matches;else if((d=a)!=null&&d.v7_partialHydration&&r.length===0&&!i.initialized&&i.matches.length>0)e=i.matches;else return null}let m=e,o=(u=i)==null?void 0:u.errors;if(o!=null){let I=m.findIndex(D=>D.route.id&&o?.[D.route.id]!==void 0);I>=0||aa(!1),m=m.slice(0,Math.min(m.length,I+1))}let w=!1,E=-1;if(i&&a&&a.v7_partialHydration)for(let I=0;I<m.length;I++){let D=m[I];if((D.route.HydrateFallback||D.route.hydrateFallbackElement)&&(E=I),D.route.id){let{loaderData:O,errors:P}=i,W=D.route.loader&&O[D.route.id]===void 0&&(!P||P[D.route.id]===void 0);if(D.route.lazy||W){w=!0,E>=0?m=m.slice(0,E+1):m=[m[0]];break}}}return m.reduceRight((I,D,O)=>{let P,W=!1,z=null,H=null;i&&(P=o&&D.route.id?o[D.route.id]:void 0,z=D.route.errorElement||wU,w&&(E<0&&O===0?(TU("route-fallback"),W=!0,H=null):E===O&&(W=!0,H=D.route.hydrateFallbackElement||null)));let Z=r.concat(m.slice(0,O+1)),se=()=>{let ce;return P?ce=z:W?ce=H:D.route.Component?ce=ee.createElement(D.route.Component,null):D.route.element?ce=D.route.element:ce=I,ee.createElement(bU,{match:D,routeContext:{outlet:I,matches:Z,isDataRoute:i!=null},children:ce})};return i&&(D.route.ErrorBoundary||D.route.errorElement||O===0)?ee.createElement(xU,{location:i.location,revalidation:i.revalidation,component:z,error:P,children:se(),routeContext:{outlet:null,matches:Z,isDataRoute:!0}}):se()},null)}var WE=(function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e})(WE||{}),ZE=(function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e})(ZE||{});function CU(e){let r=ee.useContext(Hw);return r||aa(!1),r}function EU(e){let r=ee.useContext(fU);return r||aa(!1),r}function SU(e){let r=ee.useContext(lf);return r||aa(!1),r}function XE(e){let r=SU(),i=r.matches[r.matches.length-1];return i.route.id||aa(!1),i.route.id}function FU(){var e;let r=ee.useContext(KE),i=EU(),a=XE();return r!==void 0?r:(e=i.errors)==null?void 0:e[a]}function IU(){let{router:e}=CU(WE.UseNavigateStable),r=XE(ZE.UseNavigateStable),i=ee.useRef(!1);return qE(()=>{i.current=!0}),ee.useCallback(function(u,d){d===void 0&&(d={}),i.current&&(typeof u=="number"?e.navigate(u):e.navigate(u,Nm({fromRouteId:r},d)))},[e,r])}const F2={};function TU(e,r,i){F2[e]||(F2[e]=!0)}function PU(e,r){e?.v7_startTransition,e?.v7_relativeSplatPath}function C_(e){aa(!1)}function LU(e){let{basename:r="/",children:i=null,location:a,navigationType:u=ud.Pop,navigator:d,static:m=!1,future:o}=e;Zm()&&aa(!1);let w=r.replace(/^\/*/,"/"),E=ee.useMemo(()=>({basename:w,navigator:d,static:m,future:Nm({v7_relativeSplatPath:!1},o)}),[w,o,d,m]);typeof a=="string"&&(a=Bp(a));let{pathname:I="/",search:D="",hash:O="",state:P=null,key:W="default"}=a,z=ee.useMemo(()=>{let H=zw(I,w);return H==null?null:{location:{pathname:H,search:D,hash:O,state:P,key:W},navigationType:u}},[w,I,D,O,P,W,u]);return z==null?null:ee.createElement(af.Provider,{value:E},ee.createElement(Ty.Provider,{children:i,value:z}))}function MU(e){let{children:r,location:i}=e;return yU(E_(r),i)}new Promise(()=>{});function E_(e,r){r===void 0&&(r=[]);let i=[];return ee.Children.forEach(e,(a,u)=>{if(!ee.isValidElement(a))return;let d=[...r,u];if(a.type===ee.Fragment){i.push.apply(i,E_(a.props.children,d));return}a.type!==C_&&aa(!1),!a.props.index||!a.props.children||aa(!1);let m={id:a.props.id||d.join("-"),caseSensitive:a.props.caseSensitive,element:a.props.element,Component:a.props.Component,index:a.props.index,path:a.props.path,loader:a.props.loader,action:a.props.action,errorElement:a.props.errorElement,ErrorBoundary:a.props.ErrorBoundary,hasErrorBoundary:a.props.ErrorBoundary!=null||a.props.errorElement!=null,shouldRevalidate:a.props.shouldRevalidate,handle:a.props.handle,lazy:a.props.lazy};a.props.children&&(m.children=E_(a.props.children,d)),i.push(m)}),i}function S_(){return S_=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var i=arguments[r];for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(e[a]=i[a])}return e},S_.apply(this,arguments)}function kU(e,r){if(e==null)return{};var i={},a=Object.keys(e),u,d;for(d=0;d<a.length;d++)u=a[d],!(r.indexOf(u)>=0)&&(i[u]=e[u]);return i}function UU(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function DU(e,r){return e.button===0&&(!r||r==="_self")&&!UU(e)}const RU=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],NU="6";try{window.__reactRouterVersion=NU}catch{}const QU="startTransition",I2=py[QU];function OU(e){let{basename:r,children:i,future:a,window:u}=e,d=ee.useRef();d.current==null&&(d.current=zk({window:u,v5Compat:!0}));let m=d.current,[o,w]=ee.useState({action:m.action,location:m.location}),{v7_startTransition:E}=a||{},I=ee.useCallback(D=>{E&&I2?I2(()=>w(D)):w(D)},[w,E]);return ee.useLayoutEffect(()=>m.listen(I),[m,I]),ee.useEffect(()=>PU(a),[a]),ee.createElement(LU,{basename:r,children:i,location:o.location,navigationType:o.action,navigator:m,future:a})}const zU=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",HU=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,jU=ee.forwardRef(function(r,i){let{onClick:a,relative:u,reloadDocument:d,replace:m,state:o,target:w,to:E,preventScrollReset:I,viewTransition:D}=r,O=kU(r,RU),{basename:P}=ee.useContext(af),W,z=!1;if(typeof E=="string"&&HU.test(E)&&(W=E,zU))try{let ce=new URL(window.location.href),de=E.startsWith("//")?new URL(ce.protocol+E):new URL(E),Pe=zw(de.pathname,P);de.origin===ce.origin&&Pe!=null?E=Pe+de.search+de.hash:z=!0}catch{}let H=pU(E,{relative:u}),Z=VU(E,{replace:m,state:o,target:w,preventScrollReset:I,relative:u,viewTransition:D});function se(ce){a&&a(ce),ce.defaultPrevented||Z(ce)}return ee.createElement("a",S_({},O,{href:W||H,onClick:z||d?a:se,ref:i,target:w}))});var T2;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(T2||(T2={}));var P2;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(P2||(P2={}));function VU(e,r){let{target:i,replace:a,state:u,preventScrollReset:d,relative:m,viewTransition:o}=r===void 0?{}:r,w=mU(),E=Xm(),I=$E(e,{relative:m});return ee.useCallback(D=>{if(DU(D,i)){D.preventDefault();let O=a!==void 0?a:X0(E)===X0(I);w(e,{replace:O,state:u,preventScrollReset:d,relative:m,viewTransition:o})}},[E,w,I,a,u,i,e,d,m,o])}function GU(e){return new Worker("/Domapus/assets/data-processor-_EcCOMk5.js",{name:e?.name})}function KU(){const e=ee.useRef(null),[r,i]=ee.useState(!1),[a,u]=ee.useState({phase:""}),d=ee.useRef(new Map),m=ee.useRef(!1);return console.log("[useDataWorker] Hook initialized"),ee.useEffect(()=>{if(m.current)return;console.log("[useDataWorker] Creating worker instance");const w=new GU;return e.current=w,m.current=!0,w.onmessage=E=>{const{id:I,type:D,data:O,error:P}=E.data;switch(console.log("[useDataWorker] Received message from worker:",D,{id:I}),D){case"PROGRESS":console.log("[useDataWorker] Progress update:",O.phase),u(O);break;case"ERROR":{console.error("[useDataWorker] Worker error:",P),i(!1);const W=d.current.get(I);W&&(W.reject(new Error(P)),d.current.delete(I));break}default:{console.log(`[useDataWorker] ${D} completed for request ${I}`),i(!1);const W=d.current.get(I);W&&(W.resolve(O),d.current.delete(I));break}}},w.onerror=E=>{console.error("[useDataWorker] Unhandled worker error:",E),i(!1),d.current.forEach(I=>I.reject(E)),d.current.clear()},()=>{console.log("[useDataWorker] Terminating worker"),e.current&&(e.current.terminate(),e.current=null),m.current=!1}},[]),{processData:ee.useCallback(w=>{const E=e.current;return!E||!m.current?(console.error("[useDataWorker] Worker not available"),Promise.reject(new Error("Worker is not initialized"))):new Promise((I,D)=>{const O=`${Date.now()}-${Math.random()}`;console.log(`[useDataWorker] Sending message to worker: ${w.type}, request ID: ${O}`),d.current.set(O,{resolve:I,reject:D}),i(!0),E.postMessage({id:O,...w})})},[]),isLoading:r,progress:a}}var qU=Symbol.for("react.lazy"),Y0=py[" use ".trim().toString()];function $U(e){return typeof e=="object"&&e!==null&&"then"in e}function YE(e){return e!=null&&typeof e=="object"&&"$$typeof"in e&&e.$$typeof===qU&&"_payload"in e&&$U(e._payload)}function JE(e){const r=ZU(e),i=ee.forwardRef((a,u)=>{let{children:d,...m}=a;YE(d)&&typeof Y0=="function"&&(d=Y0(d._payload));const o=ee.Children.toArray(d),w=o.find(YU);if(w){const E=w.props.children,I=o.map(D=>D===w?ee.Children.count(E)>1?ee.Children.only(null):ee.isValidElement(E)?E.props.children:null:D);return ae.jsx(r,{...m,ref:u,children:ee.isValidElement(E)?ee.cloneElement(E,void 0,I):null})}return ae.jsx(r,{...m,ref:u,children:d})});return i.displayName=`${e}.Slot`,i}var WU=JE("Slot");function ZU(e){const r=ee.forwardRef((i,a)=>{let{children:u,...d}=i;if(YE(u)&&typeof Y0=="function"&&(u=Y0(u._payload)),ee.isValidElement(u)){const m=eD(u),o=JU(d,u.props);return u.type!==ee.Fragment&&(o.ref=a?Gm(a,m):m),ee.cloneElement(u,o)}return ee.Children.count(u)>1?ee.Children.only(null):null});return r.displayName=`${e}.SlotClone`,r}var XU=Symbol("radix.slottable");function YU(e){return ee.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===XU}function JU(e,r){const i={...r};for(const a in r){const u=e[a],d=r[a];/^on[A-Z]/.test(a)?u&&d?i[a]=(...o)=>{const w=d(...o);return u(...o),w}:u&&(i[a]=u):a==="style"?i[a]={...u,...d}:a==="className"&&(i[a]=[u,d].filter(Boolean).join(" "))}return{...e,...i}}function eD(e){let r=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,i=r&&"isReactWarning"in r&&r.isReactWarning;return i?e.ref:(r=Object.getOwnPropertyDescriptor(e,"ref")?.get,i=r&&"isReactWarning"in r&&r.isReactWarning,i?e.props.ref:e.props.ref||e.ref)}const tD=vy("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),Cc=ee.forwardRef(({className:e,variant:r,size:i,asChild:a=!1,...u},d)=>{const m=a?WU:"button";return ae.jsx(m,{className:qi(tD({variant:r,size:i,className:e})),ref:d,...u})});Cc.displayName="Button";var rD=ee.createContext(void 0);function jw(e){const r=ee.useContext(rD);return e||r||"ltr"}var t1="rovingFocusGroup.onEntryFocus",nD={bubbles:!1,cancelable:!0},Ym="RovingFocusGroup",[F_,eS,iD]=ww(Ym),[sD,tS]=Hh(Ym,[iD]),[oD,aD]=sD(Ym),rS=ee.forwardRef((e,r)=>ae.jsx(F_.Provider,{scope:e.__scopeRovingFocusGroup,children:ae.jsx(F_.Slot,{scope:e.__scopeRovingFocusGroup,children:ae.jsx(lD,{...e,ref:r})})}));rS.displayName=Ym;var lD=ee.forwardRef((e,r)=>{const{__scopeRovingFocusGroup:i,orientation:a,loop:u=!1,dir:d,currentTabStopId:m,defaultCurrentTabStopId:o,onCurrentTabStopIdChange:w,onEntryFocus:E,preventScrollOnEntryFocus:I=!1,...D}=e,O=ee.useRef(null),P=ds(r,O),W=jw(d),[z,H]=mp({prop:m,defaultProp:o??null,onChange:w,caller:Ym}),[Z,se]=ee.useState(!1),ce=iu(E),de=eS(i),Pe=ee.useRef(!1),[He,Xe]=ee.useState(0);return ee.useEffect(()=>{const Qe=O.current;if(Qe)return Qe.addEventListener(t1,ce),()=>Qe.removeEventListener(t1,ce)},[ce]),ae.jsx(oD,{scope:i,orientation:a,dir:W,loop:u,currentTabStopId:z,onItemFocus:ee.useCallback(Qe=>H(Qe),[H]),onItemShiftTab:ee.useCallback(()=>se(!0),[]),onFocusableItemAdd:ee.useCallback(()=>Xe(Qe=>Qe+1),[]),onFocusableItemRemove:ee.useCallback(()=>Xe(Qe=>Qe-1),[]),children:ae.jsx(oi.div,{tabIndex:Z||He===0?-1:0,"data-orientation":a,...D,ref:P,style:{outline:"none",...e.style},onMouseDown:Un(e.onMouseDown,()=>{Pe.current=!0}),onFocus:Un(e.onFocus,Qe=>{const Be=!Pe.current;if(Qe.target===Qe.currentTarget&&Be&&!Z){const Je=new CustomEvent(t1,nD);if(Qe.currentTarget.dispatchEvent(Je),!Je.defaultPrevented){const Ae=de().filter(it=>it.focusable),me=Ae.find(it=>it.active),Te=Ae.find(it=>it.id===z),ut=[me,Te,...Ae].filter(Boolean).map(it=>it.ref.current);sS(ut,I)}}Pe.current=!1}),onBlur:Un(e.onBlur,()=>se(!1))})})}),nS="RovingFocusGroupItem",iS=ee.forwardRef((e,r)=>{const{__scopeRovingFocusGroup:i,focusable:a=!0,active:u=!1,tabStopId:d,children:m,...o}=e,w=_y(),E=d||w,I=aD(nS,i),D=I.currentTabStopId===E,O=eS(i),{onFocusableItemAdd:P,onFocusableItemRemove:W,currentTabStopId:z}=I;return ee.useEffect(()=>{if(a)return P(),()=>W()},[a,P,W]),ae.jsx(F_.ItemSlot,{scope:i,id:E,focusable:a,active:u,children:ae.jsx(oi.span,{tabIndex:D?0:-1,"data-orientation":I.orientation,...o,ref:r,onMouseDown:Un(e.onMouseDown,H=>{a?I.onItemFocus(E):H.preventDefault()}),onFocus:Un(e.onFocus,()=>I.onItemFocus(E)),onKeyDown:Un(e.onKeyDown,H=>{if(H.key==="Tab"&&H.shiftKey){I.onItemShiftTab();return}if(H.target!==H.currentTarget)return;const Z=uD(H,I.orientation,I.dir);if(Z!==void 0){if(H.metaKey||H.ctrlKey||H.altKey||H.shiftKey)return;H.preventDefault();let ce=O().filter(de=>de.focusable).map(de=>de.ref.current);if(Z==="last")ce.reverse();else if(Z==="prev"||Z==="next"){Z==="prev"&&ce.reverse();const de=ce.indexOf(H.currentTarget);ce=I.loop?hD(ce,de+1):ce.slice(de+1)}setTimeout(()=>sS(ce))}}),children:typeof m=="function"?m({isCurrentTabStop:D,hasTabStop:z!=null}):m})})});iS.displayName=nS;var cD={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function AD(e,r){return r!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function uD(e,r,i){const a=AD(e.key,i);if(!(r==="vertical"&&["ArrowLeft","ArrowRight"].includes(a))&&!(r==="horizontal"&&["ArrowUp","ArrowDown"].includes(a)))return cD[a]}function sS(e,r=!1){const i=document.activeElement;for(const a of e)if(a===i||(a.focus({preventScroll:r}),document.activeElement!==i))return}function hD(e,r){return e.map((i,a)=>e[(r+a)%e.length])}var dD=rS,fD=iS;function Vw(e){const r=ee.useRef({value:e,previous:e});return ee.useMemo(()=>(r.current.value!==e&&(r.current.previous=r.current.value,r.current.value=e),r.current.previous),[e])}var Gw="Radio",[pD,oS]=Hh(Gw),[mD,gD]=pD(Gw),aS=ee.forwardRef((e,r)=>{const{__scopeRadio:i,name:a,checked:u=!1,required:d,disabled:m,value:o="on",onCheck:w,form:E,...I}=e,[D,O]=ee.useState(null),P=ds(r,H=>O(H)),W=ee.useRef(!1),z=D?E||!!D.closest("form"):!0;return ae.jsxs(mD,{scope:i,checked:u,disabled:m,children:[ae.jsx(oi.button,{type:"button",role:"radio","aria-checked":u,"data-state":uS(u),"data-disabled":m?"":void 0,disabled:m,value:o,...I,ref:P,onClick:Un(e.onClick,H=>{u||w?.(),z&&(W.current=H.isPropagationStopped(),W.current||H.stopPropagation())})}),z&&ae.jsx(AS,{control:D,bubbles:!W.current,name:a,value:o,checked:u,required:d,disabled:m,form:E,style:{transform:"translateX(-100%)"}})]})});aS.displayName=Gw;var lS="RadioIndicator",cS=ee.forwardRef((e,r)=>{const{__scopeRadio:i,forceMount:a,...u}=e,d=gD(lS,i);return ae.jsx(Km,{present:a||d.checked,children:ae.jsx(oi.span,{"data-state":uS(d.checked),"data-disabled":d.disabled?"":void 0,...u,ref:r})})});cS.displayName=lS;var yD="RadioBubbleInput",AS=ee.forwardRef(({__scopeRadio:e,control:r,checked:i,bubbles:a=!0,...u},d)=>{const m=ee.useRef(null),o=ds(m,d),w=Vw(i),E=kw(r);return ee.useEffect(()=>{const I=m.current;if(!I)return;const D=window.HTMLInputElement.prototype,P=Object.getOwnPropertyDescriptor(D,"checked").set;if(w!==i&&P){const W=new Event("click",{bubbles:a});P.call(I,i),I.dispatchEvent(W)}},[w,i,a]),ae.jsx(oi.input,{type:"radio","aria-hidden":!0,defaultChecked:i,...u,tabIndex:-1,ref:o,style:{...u.style,...E,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});AS.displayName=yD;function uS(e){return e?"checked":"unchecked"}var vD=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],Py="RadioGroup",[_D]=Hh(Py,[tS,oS]),hS=tS(),dS=oS(),[wD,xD]=_D(Py),fS=ee.forwardRef((e,r)=>{const{__scopeRadioGroup:i,name:a,defaultValue:u,value:d,required:m=!1,disabled:o=!1,orientation:w,dir:E,loop:I=!0,onValueChange:D,...O}=e,P=hS(i),W=jw(E),[z,H]=mp({prop:d,defaultProp:u??null,onChange:D,caller:Py});return ae.jsx(wD,{scope:i,name:a,required:m,disabled:o,value:z,onValueChange:H,children:ae.jsx(dD,{asChild:!0,...P,orientation:w,dir:W,loop:I,children:ae.jsx(oi.div,{role:"radiogroup","aria-required":m,"aria-orientation":w,"data-disabled":o?"":void 0,dir:W,...O,ref:r})})})});fS.displayName=Py;var pS="RadioGroupItem",mS=ee.forwardRef((e,r)=>{const{__scopeRadioGroup:i,disabled:a,...u}=e,d=xD(pS,i),m=d.disabled||a,o=hS(i),w=dS(i),E=ee.useRef(null),I=ds(r,E),D=d.value===u.value,O=ee.useRef(!1);return ee.useEffect(()=>{const P=z=>{vD.includes(z.key)&&(O.current=!0)},W=()=>O.current=!1;return document.addEventListener("keydown",P),document.addEventListener("keyup",W),()=>{document.removeEventListener("keydown",P),document.removeEventListener("keyup",W)}},[]),ae.jsx(fD,{asChild:!0,...o,focusable:!m,active:D,children:ae.jsx(aS,{disabled:m,required:d.required,checked:D,...w,...u,name:d.name,ref:I,onCheck:()=>d.onValueChange(u.value),onKeyDown:Un(P=>{P.key==="Enter"&&P.preventDefault()}),onFocus:Un(u.onFocus,()=>{O.current&&E.current?.click()})})})});mS.displayName=pS;var bD="RadioGroupIndicator",gS=ee.forwardRef((e,r)=>{const{__scopeRadioGroup:i,...a}=e,u=dS(i);return ae.jsx(cS,{...u,...a,ref:r})});gS.displayName=bD;var yS=fS,vS=mS,BD=gS;const I_=ee.forwardRef(({className:e,...r},i)=>ae.jsx(yS,{className:qi("grid gap-2",e),...r,ref:i}));I_.displayName=yS.displayName;const Yf=ee.forwardRef(({className:e,...r},i)=>ae.jsx(vS,{ref:i,className:qi("aspect-square h-4 w-4 rounded-full border border-primary text-primary ring-offset-background focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),...r,children:ae.jsx(BD,{className:"flex items-center justify-center",children:ae.jsx(sP,{className:"h-2.5 w-2.5 fill-current text-current"})})}));Yf.displayName=vS.displayName;var CD=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],ED=CD.reduce((e,r)=>{const i=JE(`Primitive.${r}`),a=ee.forwardRef((u,d)=>{const{asChild:m,...o}=u,w=m?i:r;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),ae.jsx(w,{...o,ref:d})});return a.displayName=`Primitive.${r}`,{...e,[r]:a}},{}),SD="Label",_S=ee.forwardRef((e,r)=>ae.jsx(ED.label,{...e,ref:r,onMouseDown:i=>{i.target.closest("button, input, select, textarea")||(e.onMouseDown?.(i),!i.defaultPrevented&&i.detail>1&&i.preventDefault())}}));_S.displayName=SD;var wS=_S;const FD=vy("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),od=ee.forwardRef(({className:e,...r},i)=>ae.jsx(wS,{ref:i,className:qi(FD(),e),...r}));od.displayName=wS.displayName;function L2(e,[r,i]){return Math.min(i,Math.max(r,e))}var r1=0;function ID(){ee.useEffect(()=>{const e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??M2()),document.body.insertAdjacentElement("beforeend",e[1]??M2()),r1++,()=>{r1===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(r=>r.remove()),r1--}},[])}function M2(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var n1="focusScope.autoFocusOnMount",i1="focusScope.autoFocusOnUnmount",k2={bubbles:!1,cancelable:!0},TD="FocusScope",xS=ee.forwardRef((e,r)=>{const{loop:i=!1,trapped:a=!1,onMountAutoFocus:u,onUnmountAutoFocus:d,...m}=e,[o,w]=ee.useState(null),E=iu(u),I=iu(d),D=ee.useRef(null),O=ds(r,z=>w(z)),P=ee.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;ee.useEffect(()=>{if(a){let z=function(ce){if(P.paused||!o)return;const de=ce.target;o.contains(de)?D.current=de:ad(D.current,{select:!0})},H=function(ce){if(P.paused||!o)return;const de=ce.relatedTarget;de!==null&&(o.contains(de)||ad(D.current,{select:!0}))},Z=function(ce){if(document.activeElement===document.body)for(const Pe of ce)Pe.removedNodes.length>0&&ad(o)};document.addEventListener("focusin",z),document.addEventListener("focusout",H);const se=new MutationObserver(Z);return o&&se.observe(o,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",z),document.removeEventListener("focusout",H),se.disconnect()}}},[a,o,P.paused]),ee.useEffect(()=>{if(o){D2.add(P);const z=document.activeElement;if(!o.contains(z)){const Z=new CustomEvent(n1,k2);o.addEventListener(n1,E),o.dispatchEvent(Z),Z.defaultPrevented||(PD(DD(bS(o)),{select:!0}),document.activeElement===z&&ad(o))}return()=>{o.removeEventListener(n1,E),setTimeout(()=>{const Z=new CustomEvent(i1,k2);o.addEventListener(i1,I),o.dispatchEvent(Z),Z.defaultPrevented||ad(z??document.body,{select:!0}),o.removeEventListener(i1,I),D2.remove(P)},0)}}},[o,E,I,P]);const W=ee.useCallback(z=>{if(!i&&!a||P.paused)return;const H=z.key==="Tab"&&!z.altKey&&!z.ctrlKey&&!z.metaKey,Z=document.activeElement;if(H&&Z){const se=z.currentTarget,[ce,de]=LD(se);ce&&de?!z.shiftKey&&Z===de?(z.preventDefault(),i&&ad(ce,{select:!0})):z.shiftKey&&Z===ce&&(z.preventDefault(),i&&ad(de,{select:!0})):Z===se&&z.preventDefault()}},[i,a,P.paused]);return ae.jsx(oi.div,{tabIndex:-1,...m,ref:O,onKeyDown:W})});xS.displayName=TD;function PD(e,{select:r=!1}={}){const i=document.activeElement;for(const a of e)if(ad(a,{select:r}),document.activeElement!==i)return}function LD(e){const r=bS(e),i=U2(r,e),a=U2(r.reverse(),e);return[i,a]}function bS(e){const r=[],i=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:a=>{const u=a.tagName==="INPUT"&&a.type==="hidden";return a.disabled||a.hidden||u?NodeFilter.FILTER_SKIP:a.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;i.nextNode();)r.push(i.currentNode);return r}function U2(e,r){for(const i of e)if(!MD(i,{upTo:r}))return i}function MD(e,{upTo:r}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(r!==void 0&&e===r)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function kD(e){return e instanceof HTMLInputElement&&"select"in e}function ad(e,{select:r=!1}={}){if(e&&e.focus){const i=document.activeElement;e.focus({preventScroll:!0}),e!==i&&kD(e)&&r&&e.select()}}var D2=UD();function UD(){let e=[];return{add(r){const i=e[0];r!==i&&i?.pause(),e=R2(e,r),e.unshift(r)},remove(r){e=R2(e,r),e[0]?.resume()}}}function R2(e,r){const i=[...e],a=i.indexOf(r);return a!==-1&&i.splice(a,1),i}function DD(e){return e.filter(r=>r.tagName!=="A")}function RD(e){const r=ND(e),i=ee.forwardRef((a,u)=>{const{children:d,...m}=a,o=ee.Children.toArray(d),w=o.find(OD);if(w){const E=w.props.children,I=o.map(D=>D===w?ee.Children.count(E)>1?ee.Children.only(null):ee.isValidElement(E)?E.props.children:null:D);return ae.jsx(r,{...m,ref:u,children:ee.isValidElement(E)?ee.cloneElement(E,void 0,I):null})}return ae.jsx(r,{...m,ref:u,children:d})});return i.displayName=`${e}.Slot`,i}function ND(e){const r=ee.forwardRef((i,a)=>{const{children:u,...d}=i;if(ee.isValidElement(u)){const m=HD(u),o=zD(d,u.props);return u.type!==ee.Fragment&&(o.ref=a?Gm(a,m):m),ee.cloneElement(u,o)}return ee.Children.count(u)>1?ee.Children.only(null):null});return r.displayName=`${e}.SlotClone`,r}var QD=Symbol("radix.slottable");function OD(e){return ee.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===QD}function zD(e,r){const i={...r};for(const a in r){const u=e[a],d=r[a];/^on[A-Z]/.test(a)?u&&d?i[a]=(...o)=>{const w=d(...o);return u(...o),w}:u&&(i[a]=u):a==="style"?i[a]={...u,...d}:a==="className"&&(i[a]=[u,d].filter(Boolean).join(" "))}return{...e,...i}}function HD(e){let r=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,i=r&&"isReactWarning"in r&&r.isReactWarning;return i?e.ref:(r=Object.getOwnPropertyDescriptor(e,"ref")?.get,i=r&&"isReactWarning"in r&&r.isReactWarning,i?e.props.ref:e.props.ref||e.ref)}var jD=function(e){if(typeof document>"u")return null;var r=Array.isArray(e)?e[0]:e;return r.ownerDocument.body},Qf=new WeakMap,Gg=new WeakMap,Kg={},s1=0,BS=function(e){return e&&(e.host||BS(e.parentNode))},VD=function(e,r){return r.map(function(i){if(e.contains(i))return i;var a=BS(i);return a&&e.contains(a)?a:(console.error("aria-hidden",i,"in not contained inside",e,". Doing nothing"),null)}).filter(function(i){return!!i})},GD=function(e,r,i,a){var u=VD(r,Array.isArray(e)?e:[e]);Kg[i]||(Kg[i]=new WeakMap);var d=Kg[i],m=[],o=new Set,w=new Set(u),E=function(D){!D||o.has(D)||(o.add(D),E(D.parentNode))};u.forEach(E);var I=function(D){!D||w.has(D)||Array.prototype.forEach.call(D.children,function(O){if(o.has(O))I(O);else try{var P=O.getAttribute(a),W=P!==null&&P!=="false",z=(Qf.get(O)||0)+1,H=(d.get(O)||0)+1;Qf.set(O,z),d.set(O,H),m.push(O),z===1&&W&&Gg.set(O,!0),H===1&&O.setAttribute(i,"true"),W||O.setAttribute(a,"true")}catch(Z){console.error("aria-hidden: cannot operate on ",O,Z)}})};return I(r),o.clear(),s1++,function(){m.forEach(function(D){var O=Qf.get(D)-1,P=d.get(D)-1;Qf.set(D,O),d.set(D,P),O||(Gg.has(D)||D.removeAttribute(a),Gg.delete(D)),P||D.removeAttribute(i)}),s1--,s1||(Qf=new WeakMap,Qf=new WeakMap,Gg=new WeakMap,Kg={})}},KD=function(e,r,i){i===void 0&&(i="data-aria-hidden");var a=Array.from(Array.isArray(e)?e:[e]),u=jD(e);return u?(a.push.apply(a,Array.from(u.querySelectorAll("[aria-live], script"))),GD(a,u,i,"aria-hidden")):function(){return null}},Ju=function(){return Ju=Object.assign||function(r){for(var i,a=1,u=arguments.length;a<u;a++){i=arguments[a];for(var d in i)Object.prototype.hasOwnProperty.call(i,d)&&(r[d]=i[d])}return r},Ju.apply(this,arguments)};function CS(e,r){var i={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&r.indexOf(a)<0&&(i[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var u=0,a=Object.getOwnPropertySymbols(e);u<a.length;u++)r.indexOf(a[u])<0&&Object.prototype.propertyIsEnumerable.call(e,a[u])&&(i[a[u]]=e[a[u]]);return i}function qD(e,r,i){if(i||arguments.length===2)for(var a=0,u=r.length,d;a<u;a++)(d||!(a in r))&&(d||(d=Array.prototype.slice.call(r,0,a)),d[a]=r[a]);return e.concat(d||Array.prototype.slice.call(r))}var M0="right-scroll-bar-position",k0="width-before-scroll-bar",$D="with-scroll-bars-hidden",WD="--removed-body-scroll-bar-size";function o1(e,r){return typeof e=="function"?e(r):e&&(e.current=r),e}function ZD(e,r){var i=ee.useState(function(){return{value:e,callback:r,facade:{get current(){return i.value},set current(a){var u=i.value;u!==a&&(i.value=a,i.callback(a,u))}}}})[0];return i.callback=r,i.facade}var XD=typeof window<"u"?ee.useLayoutEffect:ee.useEffect,N2=new WeakMap;function YD(e,r){var i=ZD(null,function(a){return e.forEach(function(u){return o1(u,a)})});return XD(function(){var a=N2.get(i);if(a){var u=new Set(a),d=new Set(e),m=i.current;u.forEach(function(o){d.has(o)||o1(o,null)}),d.forEach(function(o){u.has(o)||o1(o,m)})}N2.set(i,e)},[e]),i}function JD(e){return e}function eR(e,r){r===void 0&&(r=JD);var i=[],a=!1,u={read:function(){if(a)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return i.length?i[i.length-1]:e},useMedium:function(d){var m=r(d,a);return i.push(m),function(){i=i.filter(function(o){return o!==m})}},assignSyncMedium:function(d){for(a=!0;i.length;){var m=i;i=[],m.forEach(d)}i={push:function(o){return d(o)},filter:function(){return i}}},assignMedium:function(d){a=!0;var m=[];if(i.length){var o=i;i=[],o.forEach(d),m=i}var w=function(){var I=m;m=[],I.forEach(d)},E=function(){return Promise.resolve().then(w)};E(),i={push:function(I){m.push(I),E()},filter:function(I){return m=m.filter(I),i}}}};return u}function tR(e){e===void 0&&(e={});var r=eR(null);return r.options=Ju({async:!0,ssr:!1},e),r}var ES=function(e){var r=e.sideCar,i=CS(e,["sideCar"]);if(!r)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var a=r.read();if(!a)throw new Error("Sidecar medium not found");return ee.createElement(a,Ju({},i))};ES.isSideCarExport=!0;function rR(e,r){return e.useMedium(r),ES}var SS=tR(),a1=function(){},Ly=ee.forwardRef(function(e,r){var i=ee.useRef(null),a=ee.useState({onScrollCapture:a1,onWheelCapture:a1,onTouchMoveCapture:a1}),u=a[0],d=a[1],m=e.forwardProps,o=e.children,w=e.className,E=e.removeScrollBar,I=e.enabled,D=e.shards,O=e.sideCar,P=e.noRelative,W=e.noIsolation,z=e.inert,H=e.allowPinchZoom,Z=e.as,se=Z===void 0?"div":Z,ce=e.gapMode,de=CS(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),Pe=O,He=YD([i,r]),Xe=Ju(Ju({},de),u);return ee.createElement(ee.Fragment,null,I&&ee.createElement(Pe,{sideCar:SS,removeScrollBar:E,shards:D,noRelative:P,noIsolation:W,inert:z,setCallbacks:d,allowPinchZoom:!!H,lockRef:i,gapMode:ce}),m?ee.cloneElement(ee.Children.only(o),Ju(Ju({},Xe),{ref:He})):ee.createElement(se,Ju({},Xe,{className:w,ref:He}),o))});Ly.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Ly.classNames={fullWidth:k0,zeroRight:M0};var nR=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function iR(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var r=nR();return r&&e.setAttribute("nonce",r),e}function sR(e,r){e.styleSheet?e.styleSheet.cssText=r:e.appendChild(document.createTextNode(r))}function oR(e){var r=document.head||document.getElementsByTagName("head")[0];r.appendChild(e)}var aR=function(){var e=0,r=null;return{add:function(i){e==0&&(r=iR())&&(sR(r,i),oR(r)),e++},remove:function(){e--,!e&&r&&(r.parentNode&&r.parentNode.removeChild(r),r=null)}}},lR=function(){var e=aR();return function(r,i){ee.useEffect(function(){return e.add(r),function(){e.remove()}},[r&&i])}},FS=function(){var e=lR(),r=function(i){var a=i.styles,u=i.dynamic;return e(a,u),null};return r},cR={left:0,top:0,right:0,gap:0},l1=function(e){return parseInt(e||"",10)||0},AR=function(e){var r=window.getComputedStyle(document.body),i=r[e==="padding"?"paddingLeft":"marginLeft"],a=r[e==="padding"?"paddingTop":"marginTop"],u=r[e==="padding"?"paddingRight":"marginRight"];return[l1(i),l1(a),l1(u)]},uR=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return cR;var r=AR(e),i=document.documentElement.clientWidth,a=window.innerWidth;return{left:r[0],top:r[1],right:r[2],gap:Math.max(0,a-i+r[2]-r[0])}},hR=FS(),Ap="data-scroll-locked",dR=function(e,r,i,a){var u=e.left,d=e.top,m=e.right,o=e.gap;return i===void 0&&(i="margin"),`
  .`.concat($D,` {
   overflow: hidden `).concat(a,`;
   padding-right: `).concat(o,"px ").concat(a,`;
  }
  body[`).concat(Ap,`] {
    overflow: hidden `).concat(a,`;
    overscroll-behavior: contain;
    `).concat([r&&"position: relative ".concat(a,";"),i==="margin"&&`
    padding-left: `.concat(u,`px;
    padding-top: `).concat(d,`px;
    padding-right: `).concat(m,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(o,"px ").concat(a,`;
    `),i==="padding"&&"padding-right: ".concat(o,"px ").concat(a,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(M0,` {
    right: `).concat(o,"px ").concat(a,`;
  }
  
  .`).concat(k0,` {
    margin-right: `).concat(o,"px ").concat(a,`;
  }
  
  .`).concat(M0," .").concat(M0,` {
    right: 0 `).concat(a,`;
  }
  
  .`).concat(k0," .").concat(k0,` {
    margin-right: 0 `).concat(a,`;
  }
  
  body[`).concat(Ap,`] {
    `).concat(WD,": ").concat(o,`px;
  }
`)},Q2=function(){var e=parseInt(document.body.getAttribute(Ap)||"0",10);return isFinite(e)?e:0},fR=function(){ee.useEffect(function(){return document.body.setAttribute(Ap,(Q2()+1).toString()),function(){var e=Q2()-1;e<=0?document.body.removeAttribute(Ap):document.body.setAttribute(Ap,e.toString())}},[])},pR=function(e){var r=e.noRelative,i=e.noImportant,a=e.gapMode,u=a===void 0?"margin":a;fR();var d=ee.useMemo(function(){return uR(u)},[u]);return ee.createElement(hR,{styles:dR(d,!r,u,i?"":"!important")})},T_=!1;if(typeof window<"u")try{var qg=Object.defineProperty({},"passive",{get:function(){return T_=!0,!0}});window.addEventListener("test",qg,qg),window.removeEventListener("test",qg,qg)}catch{T_=!1}var Of=T_?{passive:!1}:!1,mR=function(e){return e.tagName==="TEXTAREA"},IS=function(e,r){if(!(e instanceof Element))return!1;var i=window.getComputedStyle(e);return i[r]!=="hidden"&&!(i.overflowY===i.overflowX&&!mR(e)&&i[r]==="visible")},gR=function(e){return IS(e,"overflowY")},yR=function(e){return IS(e,"overflowX")},O2=function(e,r){var i=r.ownerDocument,a=r;do{typeof ShadowRoot<"u"&&a instanceof ShadowRoot&&(a=a.host);var u=TS(e,a);if(u){var d=PS(e,a),m=d[1],o=d[2];if(m>o)return!0}a=a.parentNode}while(a&&a!==i.body);return!1},vR=function(e){var r=e.scrollTop,i=e.scrollHeight,a=e.clientHeight;return[r,i,a]},_R=function(e){var r=e.scrollLeft,i=e.scrollWidth,a=e.clientWidth;return[r,i,a]},TS=function(e,r){return e==="v"?gR(r):yR(r)},PS=function(e,r){return e==="v"?vR(r):_R(r)},wR=function(e,r){return e==="h"&&r==="rtl"?-1:1},xR=function(e,r,i,a,u){var d=wR(e,window.getComputedStyle(r).direction),m=d*a,o=i.target,w=r.contains(o),E=!1,I=m>0,D=0,O=0;do{if(!o)break;var P=PS(e,o),W=P[0],z=P[1],H=P[2],Z=z-H-d*W;(W||Z)&&TS(e,o)&&(D+=Z,O+=W);var se=o.parentNode;o=se&&se.nodeType===Node.DOCUMENT_FRAGMENT_NODE?se.host:se}while(!w&&o!==document.body||w&&(r.contains(o)||r===o));return(I&&Math.abs(D)<1||!I&&Math.abs(O)<1)&&(E=!0),E},$g=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},z2=function(e){return[e.deltaX,e.deltaY]},H2=function(e){return e&&"current"in e?e.current:e},bR=function(e,r){return e[0]===r[0]&&e[1]===r[1]},BR=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},CR=0,zf=[];function ER(e){var r=ee.useRef([]),i=ee.useRef([0,0]),a=ee.useRef(),u=ee.useState(CR++)[0],d=ee.useState(FS)[0],m=ee.useRef(e);ee.useEffect(function(){m.current=e},[e]),ee.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(u));var z=qD([e.lockRef.current],(e.shards||[]).map(H2),!0).filter(Boolean);return z.forEach(function(H){return H.classList.add("allow-interactivity-".concat(u))}),function(){document.body.classList.remove("block-interactivity-".concat(u)),z.forEach(function(H){return H.classList.remove("allow-interactivity-".concat(u))})}}},[e.inert,e.lockRef.current,e.shards]);var o=ee.useCallback(function(z,H){if("touches"in z&&z.touches.length===2||z.type==="wheel"&&z.ctrlKey)return!m.current.allowPinchZoom;var Z=$g(z),se=i.current,ce="deltaX"in z?z.deltaX:se[0]-Z[0],de="deltaY"in z?z.deltaY:se[1]-Z[1],Pe,He=z.target,Xe=Math.abs(ce)>Math.abs(de)?"h":"v";if("touches"in z&&Xe==="h"&&He.type==="range")return!1;var Qe=window.getSelection(),Be=Qe&&Qe.anchorNode,Je=Be?Be===He||Be.contains(He):!1;if(Je)return!1;var Ae=O2(Xe,He);if(!Ae)return!0;if(Ae?Pe=Xe:(Pe=Xe==="v"?"h":"v",Ae=O2(Xe,He)),!Ae)return!1;if(!a.current&&"changedTouches"in z&&(ce||de)&&(a.current=Pe),!Pe)return!0;var me=a.current||Pe;return xR(me,H,z,me==="h"?ce:de)},[]),w=ee.useCallback(function(z){var H=z;if(!(!zf.length||zf[zf.length-1]!==d)){var Z="deltaY"in H?z2(H):$g(H),se=r.current.filter(function(Pe){return Pe.name===H.type&&(Pe.target===H.target||H.target===Pe.shadowParent)&&bR(Pe.delta,Z)})[0];if(se&&se.should){H.cancelable&&H.preventDefault();return}if(!se){var ce=(m.current.shards||[]).map(H2).filter(Boolean).filter(function(Pe){return Pe.contains(H.target)}),de=ce.length>0?o(H,ce[0]):!m.current.noIsolation;de&&H.cancelable&&H.preventDefault()}}},[]),E=ee.useCallback(function(z,H,Z,se){var ce={name:z,delta:H,target:Z,should:se,shadowParent:SR(Z)};r.current.push(ce),setTimeout(function(){r.current=r.current.filter(function(de){return de!==ce})},1)},[]),I=ee.useCallback(function(z){i.current=$g(z),a.current=void 0},[]),D=ee.useCallback(function(z){E(z.type,z2(z),z.target,o(z,e.lockRef.current))},[]),O=ee.useCallback(function(z){E(z.type,$g(z),z.target,o(z,e.lockRef.current))},[]);ee.useEffect(function(){return zf.push(d),e.setCallbacks({onScrollCapture:D,onWheelCapture:D,onTouchMoveCapture:O}),document.addEventListener("wheel",w,Of),document.addEventListener("touchmove",w,Of),document.addEventListener("touchstart",I,Of),function(){zf=zf.filter(function(z){return z!==d}),document.removeEventListener("wheel",w,Of),document.removeEventListener("touchmove",w,Of),document.removeEventListener("touchstart",I,Of)}},[]);var P=e.removeScrollBar,W=e.inert;return ee.createElement(ee.Fragment,null,W?ee.createElement(d,{styles:BR(u)}):null,P?ee.createElement(pR,{noRelative:e.noRelative,gapMode:e.gapMode}):null)}function SR(e){for(var r=null;e!==null;)e instanceof ShadowRoot&&(r=e.host,e=e.host),e=e.parentNode;return r}const FR=rR(SS,ER);var LS=ee.forwardRef(function(e,r){return ee.createElement(Ly,Ju({},e,{ref:r,sideCar:FR}))});LS.classNames=Ly.classNames;var IR=[" ","Enter","ArrowUp","ArrowDown"],TR=[" ","Enter"],nf="Select",[My,ky,PR]=ww(nf),[Cp]=Hh(nf,[PR,Cy]),Uy=Cy(),[LR,Cd]=Cp(nf),[MR,kR]=Cp(nf),MS=e=>{const{__scopeSelect:r,children:i,open:a,defaultOpen:u,onOpenChange:d,value:m,defaultValue:o,onValueChange:w,dir:E,name:I,autoComplete:D,disabled:O,required:P,form:W}=e,z=Uy(r),[H,Z]=ee.useState(null),[se,ce]=ee.useState(null),[de,Pe]=ee.useState(!1),He=jw(E),[Xe,Qe]=mp({prop:a,defaultProp:u??!1,onChange:d,caller:nf}),[Be,Je]=mp({prop:m,defaultProp:o,onChange:w,caller:nf}),Ae=ee.useRef(null),me=H?W||!!H.closest("form"):!0,[Te,Ie]=ee.useState(new Set),ut=Array.from(Te).map(it=>it.props.value).join(";");return ae.jsx(GM,{...z,children:ae.jsxs(LR,{required:P,scope:r,trigger:H,onTriggerChange:Z,valueNode:se,onValueNodeChange:ce,valueNodeHasChildren:de,onValueNodeHasChildrenChange:Pe,contentId:_y(),value:Be,onValueChange:Je,open:Xe,onOpenChange:Qe,dir:He,triggerPointerDownPosRef:Ae,disabled:O,children:[ae.jsx(My.Provider,{scope:r,children:ae.jsx(MR,{scope:e.__scopeSelect,onNativeOptionAdd:ee.useCallback(it=>{Ie(ot=>new Set(ot).add(it))},[]),onNativeOptionRemove:ee.useCallback(it=>{Ie(ot=>{const ke=new Set(ot);return ke.delete(it),ke})},[]),children:i})}),me?ae.jsxs(nF,{"aria-hidden":!0,required:P,tabIndex:-1,name:I,autoComplete:D,value:Be,onChange:it=>Je(it.target.value),disabled:O,form:W,children:[Be===void 0?ae.jsx("option",{value:""}):null,Array.from(Te)]},ut):null]})})};MS.displayName=nf;var kS="SelectTrigger",US=ee.forwardRef((e,r)=>{const{__scopeSelect:i,disabled:a=!1,...u}=e,d=Uy(i),m=Cd(kS,i),o=m.disabled||a,w=ds(r,m.onTriggerChange),E=ky(i),I=ee.useRef("touch"),[D,O,P]=sF(z=>{const H=E().filter(ce=>!ce.disabled),Z=H.find(ce=>ce.value===m.value),se=oF(H,z,Z);se!==void 0&&m.onValueChange(se.value)}),W=z=>{o||(m.onOpenChange(!0),P()),z&&(m.triggerPointerDownPosRef.current={x:Math.round(z.pageX),y:Math.round(z.pageY)})};return ae.jsx(BE,{asChild:!0,...d,children:ae.jsx(oi.button,{type:"button",role:"combobox","aria-controls":m.contentId,"aria-expanded":m.open,"aria-required":m.required,"aria-autocomplete":"none",dir:m.dir,"data-state":m.open?"open":"closed",disabled:o,"data-disabled":o?"":void 0,"data-placeholder":iF(m.value)?"":void 0,...u,ref:w,onClick:Un(u.onClick,z=>{z.currentTarget.focus(),I.current!=="mouse"&&W(z)}),onPointerDown:Un(u.onPointerDown,z=>{I.current=z.pointerType;const H=z.target;H.hasPointerCapture(z.pointerId)&&H.releasePointerCapture(z.pointerId),z.button===0&&z.ctrlKey===!1&&z.pointerType==="mouse"&&(W(z),z.preventDefault())}),onKeyDown:Un(u.onKeyDown,z=>{const H=D.current!=="";!(z.ctrlKey||z.altKey||z.metaKey)&&z.key.length===1&&O(z.key),!(H&&z.key===" ")&&IR.includes(z.key)&&(W(),z.preventDefault())})})})});US.displayName=kS;var DS="SelectValue",RS=ee.forwardRef((e,r)=>{const{__scopeSelect:i,className:a,style:u,children:d,placeholder:m="",...o}=e,w=Cd(DS,i),{onValueNodeHasChildrenChange:E}=w,I=d!==void 0,D=ds(r,w.onValueNodeChange);return Cl(()=>{E(I)},[E,I]),ae.jsx(oi.span,{...o,ref:D,style:{pointerEvents:"none"},children:iF(w.value)?ae.jsx(ae.Fragment,{children:m}):d})});RS.displayName=DS;var UR="SelectIcon",NS=ee.forwardRef((e,r)=>{const{__scopeSelect:i,children:a,...u}=e;return ae.jsx(oi.span,{"aria-hidden":!0,...u,ref:r,children:a||""})});NS.displayName=UR;var DR="SelectPortal",QS=e=>ae.jsx(xw,{asChild:!0,...e});QS.displayName=DR;var sf="SelectContent",OS=ee.forwardRef((e,r)=>{const i=Cd(sf,e.__scopeSelect),[a,u]=ee.useState();if(Cl(()=>{u(new DocumentFragment)},[]),!i.open){const d=a;return d?_p.createPortal(ae.jsx(zS,{scope:e.__scopeSelect,children:ae.jsx(My.Slot,{scope:e.__scopeSelect,children:ae.jsx("div",{children:e.children})})}),d):null}return ae.jsx(HS,{...e,ref:r})});OS.displayName=sf;var Fu=10,[zS,Ed]=Cp(sf),RR="SelectContentImpl",NR=RD("SelectContent.RemoveScroll"),HS=ee.forwardRef((e,r)=>{const{__scopeSelect:i,position:a="item-aligned",onCloseAutoFocus:u,onEscapeKeyDown:d,onPointerDownOutside:m,side:o,sideOffset:w,align:E,alignOffset:I,arrowPadding:D,collisionBoundary:O,collisionPadding:P,sticky:W,hideWhenDetached:z,avoidCollisions:H,...Z}=e,se=Cd(sf,i),[ce,de]=ee.useState(null),[Pe,He]=ee.useState(null),Xe=ds(r,et=>de(et)),[Qe,Be]=ee.useState(null),[Je,Ae]=ee.useState(null),me=ky(i),[Te,Ie]=ee.useState(!1),ut=ee.useRef(!1);ee.useEffect(()=>{if(ce)return KD(ce)},[ce]),ID();const it=ee.useCallback(et=>{const[_t,...St]=me().map(or=>or.ref.current),[Tt]=St.slice(-1),Gt=document.activeElement;for(const or of et)if(or===Gt||(or?.scrollIntoView({block:"nearest"}),or===_t&&Pe&&(Pe.scrollTop=0),or===Tt&&Pe&&(Pe.scrollTop=Pe.scrollHeight),or?.focus(),document.activeElement!==Gt))return},[me,Pe]),ot=ee.useCallback(()=>it([Qe,ce]),[it,Qe,ce]);ee.useEffect(()=>{Te&&ot()},[Te,ot]);const{onOpenChange:ke,triggerPointerDownPosRef:Ne}=se;ee.useEffect(()=>{if(ce){let et={x:0,y:0};const _t=Tt=>{et={x:Math.abs(Math.round(Tt.pageX)-(Ne.current?.x??0)),y:Math.abs(Math.round(Tt.pageY)-(Ne.current?.y??0))}},St=Tt=>{et.x<=10&&et.y<=10?Tt.preventDefault():ce.contains(Tt.target)||ke(!1),document.removeEventListener("pointermove",_t),Ne.current=null};return Ne.current!==null&&(document.addEventListener("pointermove",_t),document.addEventListener("pointerup",St,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",_t),document.removeEventListener("pointerup",St,{capture:!0})}}},[ce,ke,Ne]),ee.useEffect(()=>{const et=()=>ke(!1);return window.addEventListener("blur",et),window.addEventListener("resize",et),()=>{window.removeEventListener("blur",et),window.removeEventListener("resize",et)}},[ke]);const[yt,Ce]=sF(et=>{const _t=me().filter(Gt=>!Gt.disabled),St=_t.find(Gt=>Gt.ref.current===document.activeElement),Tt=oF(_t,et,St);Tt&&setTimeout(()=>Tt.ref.current.focus())}),ie=ee.useCallback((et,_t,St)=>{const Tt=!ut.current&&!St;(se.value!==void 0&&se.value===_t||Tt)&&(Be(et),Tt&&(ut.current=!0))},[se.value]),Ee=ee.useCallback(()=>ce?.focus(),[ce]),Le=ee.useCallback((et,_t,St)=>{const Tt=!ut.current&&!St;(se.value!==void 0&&se.value===_t||Tt)&&Ae(et)},[se.value]),Ve=a==="popper"?P_:jS,nt=Ve===P_?{side:o,sideOffset:w,align:E,alignOffset:I,arrowPadding:D,collisionBoundary:O,collisionPadding:P,sticky:W,hideWhenDetached:z,avoidCollisions:H}:{};return ae.jsx(zS,{scope:i,content:ce,viewport:Pe,onViewportChange:He,itemRefCallback:ie,selectedItem:Qe,onItemLeave:Ee,itemTextRefCallback:Le,focusSelectedItem:ot,selectedItemText:Je,position:a,isPositioned:Te,searchRef:yt,children:ae.jsx(LS,{as:NR,allowPinchZoom:!0,children:ae.jsx(xS,{asChild:!0,trapped:se.open,onMountAutoFocus:et=>{et.preventDefault()},onUnmountAutoFocus:Un(u,et=>{se.trigger?.focus({preventScroll:!0}),et.preventDefault()}),children:ae.jsx(my,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:d,onPointerDownOutside:m,onFocusOutside:et=>et.preventDefault(),onDismiss:()=>se.onOpenChange(!1),children:ae.jsx(Ve,{role:"listbox",id:se.contentId,"data-state":se.open?"open":"closed",dir:se.dir,onContextMenu:et=>et.preventDefault(),...Z,...nt,onPlaced:()=>Ie(!0),ref:Xe,style:{display:"flex",flexDirection:"column",outline:"none",...Z.style},onKeyDown:Un(Z.onKeyDown,et=>{const _t=et.ctrlKey||et.altKey||et.metaKey;if(et.key==="Tab"&&et.preventDefault(),!_t&&et.key.length===1&&Ce(et.key),["ArrowUp","ArrowDown","Home","End"].includes(et.key)){let Tt=me().filter(Gt=>!Gt.disabled).map(Gt=>Gt.ref.current);if(["ArrowUp","End"].includes(et.key)&&(Tt=Tt.slice().reverse()),["ArrowUp","ArrowDown"].includes(et.key)){const Gt=et.target,or=Tt.indexOf(Gt);Tt=Tt.slice(or+1)}setTimeout(()=>it(Tt)),et.preventDefault()}})})})})})})});HS.displayName=RR;var QR="SelectItemAlignedPosition",jS=ee.forwardRef((e,r)=>{const{__scopeSelect:i,onPlaced:a,...u}=e,d=Cd(sf,i),m=Ed(sf,i),[o,w]=ee.useState(null),[E,I]=ee.useState(null),D=ds(r,Xe=>I(Xe)),O=ky(i),P=ee.useRef(!1),W=ee.useRef(!0),{viewport:z,selectedItem:H,selectedItemText:Z,focusSelectedItem:se}=m,ce=ee.useCallback(()=>{if(d.trigger&&d.valueNode&&o&&E&&z&&H&&Z){const Xe=d.trigger.getBoundingClientRect(),Qe=E.getBoundingClientRect(),Be=d.valueNode.getBoundingClientRect(),Je=Z.getBoundingClientRect();if(d.dir!=="rtl"){const Gt=Je.left-Qe.left,or=Be.left-Gt,Ar=Xe.left-or,_r=Xe.width+Ar,je=Math.max(_r,Qe.width),mr=window.innerWidth-Fu,kr=L2(or,[Fu,Math.max(Fu,mr-je)]);o.style.minWidth=_r+"px",o.style.left=kr+"px"}else{const Gt=Qe.right-Je.right,or=window.innerWidth-Be.right-Gt,Ar=window.innerWidth-Xe.right-or,_r=Xe.width+Ar,je=Math.max(_r,Qe.width),mr=window.innerWidth-Fu,kr=L2(or,[Fu,Math.max(Fu,mr-je)]);o.style.minWidth=_r+"px",o.style.right=kr+"px"}const Ae=O(),me=window.innerHeight-Fu*2,Te=z.scrollHeight,Ie=window.getComputedStyle(E),ut=parseInt(Ie.borderTopWidth,10),it=parseInt(Ie.paddingTop,10),ot=parseInt(Ie.borderBottomWidth,10),ke=parseInt(Ie.paddingBottom,10),Ne=ut+it+Te+ke+ot,yt=Math.min(H.offsetHeight*5,Ne),Ce=window.getComputedStyle(z),ie=parseInt(Ce.paddingTop,10),Ee=parseInt(Ce.paddingBottom,10),Le=Xe.top+Xe.height/2-Fu,Ve=me-Le,nt=H.offsetHeight/2,et=H.offsetTop+nt,_t=ut+it+et,St=Ne-_t;if(_t<=Le){const Gt=Ae.length>0&&H===Ae[Ae.length-1].ref.current;o.style.bottom="0px";const or=E.clientHeight-z.offsetTop-z.offsetHeight,Ar=Math.max(Ve,nt+(Gt?Ee:0)+or+ot),_r=_t+Ar;o.style.height=_r+"px"}else{const Gt=Ae.length>0&&H===Ae[0].ref.current;o.style.top="0px";const Ar=Math.max(Le,ut+z.offsetTop+(Gt?ie:0)+nt)+St;o.style.height=Ar+"px",z.scrollTop=_t-Le+z.offsetTop}o.style.margin=`${Fu}px 0`,o.style.minHeight=yt+"px",o.style.maxHeight=me+"px",a?.(),requestAnimationFrame(()=>P.current=!0)}},[O,d.trigger,d.valueNode,o,E,z,H,Z,d.dir,a]);Cl(()=>ce(),[ce]);const[de,Pe]=ee.useState();Cl(()=>{E&&Pe(window.getComputedStyle(E).zIndex)},[E]);const He=ee.useCallback(Xe=>{Xe&&W.current===!0&&(ce(),se?.(),W.current=!1)},[ce,se]);return ae.jsx(zR,{scope:i,contentWrapper:o,shouldExpandOnScrollRef:P,onScrollButtonChange:He,children:ae.jsx("div",{ref:w,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:de},children:ae.jsx(oi.div,{...u,ref:D,style:{boxSizing:"border-box",maxHeight:"100%",...u.style}})})})});jS.displayName=QR;var OR="SelectPopperPosition",P_=ee.forwardRef((e,r)=>{const{__scopeSelect:i,align:a="start",collisionPadding:u=Fu,...d}=e,m=Uy(i);return ae.jsx(CE,{...m,...d,ref:r,align:a,collisionPadding:u,style:{boxSizing:"border-box",...d.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});P_.displayName=OR;var[zR,Kw]=Cp(sf,{}),L_="SelectViewport",VS=ee.forwardRef((e,r)=>{const{__scopeSelect:i,nonce:a,...u}=e,d=Ed(L_,i),m=Kw(L_,i),o=ds(r,d.onViewportChange),w=ee.useRef(0);return ae.jsxs(ae.Fragment,{children:[ae.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:a}),ae.jsx(My.Slot,{scope:i,children:ae.jsx(oi.div,{"data-radix-select-viewport":"",role:"presentation",...u,ref:o,style:{position:"relative",flex:1,overflow:"hidden auto",...u.style},onScroll:Un(u.onScroll,E=>{const I=E.currentTarget,{contentWrapper:D,shouldExpandOnScrollRef:O}=m;if(O?.current&&D){const P=Math.abs(w.current-I.scrollTop);if(P>0){const W=window.innerHeight-Fu*2,z=parseFloat(D.style.minHeight),H=parseFloat(D.style.height),Z=Math.max(z,H);if(Z<W){const se=Z+P,ce=Math.min(W,se),de=se-ce;D.style.height=ce+"px",D.style.bottom==="0px"&&(I.scrollTop=de>0?de:0,D.style.justifyContent="flex-end")}}}w.current=I.scrollTop})})})]})});VS.displayName=L_;var GS="SelectGroup",[HR,jR]=Cp(GS),VR=ee.forwardRef((e,r)=>{const{__scopeSelect:i,...a}=e,u=_y();return ae.jsx(HR,{scope:i,id:u,children:ae.jsx(oi.div,{role:"group","aria-labelledby":u,...a,ref:r})})});VR.displayName=GS;var KS="SelectLabel",qS=ee.forwardRef((e,r)=>{const{__scopeSelect:i,...a}=e,u=jR(KS,i);return ae.jsx(oi.div,{id:u.id,...a,ref:r})});qS.displayName=KS;var J0="SelectItem",[GR,$S]=Cp(J0),WS=ee.forwardRef((e,r)=>{const{__scopeSelect:i,value:a,disabled:u=!1,textValue:d,...m}=e,o=Cd(J0,i),w=Ed(J0,i),E=o.value===a,[I,D]=ee.useState(d??""),[O,P]=ee.useState(!1),W=ds(r,se=>w.itemRefCallback?.(se,a,u)),z=_y(),H=ee.useRef("touch"),Z=()=>{u||(o.onValueChange(a),o.onOpenChange(!1))};if(a==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return ae.jsx(GR,{scope:i,value:a,disabled:u,textId:z,isSelected:E,onItemTextChange:ee.useCallback(se=>{D(ce=>ce||(se?.textContent??"").trim())},[]),children:ae.jsx(My.ItemSlot,{scope:i,value:a,disabled:u,textValue:I,children:ae.jsx(oi.div,{role:"option","aria-labelledby":z,"data-highlighted":O?"":void 0,"aria-selected":E&&O,"data-state":E?"checked":"unchecked","aria-disabled":u||void 0,"data-disabled":u?"":void 0,tabIndex:u?void 0:-1,...m,ref:W,onFocus:Un(m.onFocus,()=>P(!0)),onBlur:Un(m.onBlur,()=>P(!1)),onClick:Un(m.onClick,()=>{H.current!=="mouse"&&Z()}),onPointerUp:Un(m.onPointerUp,()=>{H.current==="mouse"&&Z()}),onPointerDown:Un(m.onPointerDown,se=>{H.current=se.pointerType}),onPointerMove:Un(m.onPointerMove,se=>{H.current=se.pointerType,u?w.onItemLeave?.():H.current==="mouse"&&se.currentTarget.focus({preventScroll:!0})}),onPointerLeave:Un(m.onPointerLeave,se=>{se.currentTarget===document.activeElement&&w.onItemLeave?.()}),onKeyDown:Un(m.onKeyDown,se=>{w.searchRef?.current!==""&&se.key===" "||(TR.includes(se.key)&&Z(),se.key===" "&&se.preventDefault())})})})})});WS.displayName=J0;var pm="SelectItemText",ZS=ee.forwardRef((e,r)=>{const{__scopeSelect:i,className:a,style:u,...d}=e,m=Cd(pm,i),o=Ed(pm,i),w=$S(pm,i),E=kR(pm,i),[I,D]=ee.useState(null),O=ds(r,Z=>D(Z),w.onItemTextChange,Z=>o.itemTextRefCallback?.(Z,w.value,w.disabled)),P=I?.textContent,W=ee.useMemo(()=>ae.jsx("option",{value:w.value,disabled:w.disabled,children:P},w.value),[w.disabled,w.value,P]),{onNativeOptionAdd:z,onNativeOptionRemove:H}=E;return Cl(()=>(z(W),()=>H(W)),[z,H,W]),ae.jsxs(ae.Fragment,{children:[ae.jsx(oi.span,{id:w.textId,...d,ref:O}),w.isSelected&&m.valueNode&&!m.valueNodeHasChildren?_p.createPortal(d.children,m.valueNode):null]})});ZS.displayName=pm;var XS="SelectItemIndicator",YS=ee.forwardRef((e,r)=>{const{__scopeSelect:i,...a}=e;return $S(XS,i).isSelected?ae.jsx(oi.span,{"aria-hidden":!0,...a,ref:r}):null});YS.displayName=XS;var M_="SelectScrollUpButton",JS=ee.forwardRef((e,r)=>{const i=Ed(M_,e.__scopeSelect),a=Kw(M_,e.__scopeSelect),[u,d]=ee.useState(!1),m=ds(r,a.onScrollButtonChange);return Cl(()=>{if(i.viewport&&i.isPositioned){let o=function(){const E=w.scrollTop>0;d(E)};const w=i.viewport;return o(),w.addEventListener("scroll",o),()=>w.removeEventListener("scroll",o)}},[i.viewport,i.isPositioned]),u?ae.jsx(tF,{...e,ref:m,onAutoScroll:()=>{const{viewport:o,selectedItem:w}=i;o&&w&&(o.scrollTop=o.scrollTop-w.offsetHeight)}}):null});JS.displayName=M_;var k_="SelectScrollDownButton",eF=ee.forwardRef((e,r)=>{const i=Ed(k_,e.__scopeSelect),a=Kw(k_,e.__scopeSelect),[u,d]=ee.useState(!1),m=ds(r,a.onScrollButtonChange);return Cl(()=>{if(i.viewport&&i.isPositioned){let o=function(){const E=w.scrollHeight-w.clientHeight,I=Math.ceil(w.scrollTop)<E;d(I)};const w=i.viewport;return o(),w.addEventListener("scroll",o),()=>w.removeEventListener("scroll",o)}},[i.viewport,i.isPositioned]),u?ae.jsx(tF,{...e,ref:m,onAutoScroll:()=>{const{viewport:o,selectedItem:w}=i;o&&w&&(o.scrollTop=o.scrollTop+w.offsetHeight)}}):null});eF.displayName=k_;var tF=ee.forwardRef((e,r)=>{const{__scopeSelect:i,onAutoScroll:a,...u}=e,d=Ed("SelectScrollButton",i),m=ee.useRef(null),o=ky(i),w=ee.useCallback(()=>{m.current!==null&&(window.clearInterval(m.current),m.current=null)},[]);return ee.useEffect(()=>()=>w(),[w]),Cl(()=>{o().find(I=>I.ref.current===document.activeElement)?.ref.current?.scrollIntoView({block:"nearest"})},[o]),ae.jsx(oi.div,{"aria-hidden":!0,...u,ref:r,style:{flexShrink:0,...u.style},onPointerDown:Un(u.onPointerDown,()=>{m.current===null&&(m.current=window.setInterval(a,50))}),onPointerMove:Un(u.onPointerMove,()=>{d.onItemLeave?.(),m.current===null&&(m.current=window.setInterval(a,50))}),onPointerLeave:Un(u.onPointerLeave,()=>{w()})})}),KR="SelectSeparator",rF=ee.forwardRef((e,r)=>{const{__scopeSelect:i,...a}=e;return ae.jsx(oi.div,{"aria-hidden":!0,...a,ref:r})});rF.displayName=KR;var U_="SelectArrow",qR=ee.forwardRef((e,r)=>{const{__scopeSelect:i,...a}=e,u=Uy(i),d=Cd(U_,i),m=Ed(U_,i);return d.open&&m.position==="popper"?ae.jsx(EE,{...u,...a,ref:r}):null});qR.displayName=U_;var $R="SelectBubbleInput",nF=ee.forwardRef(({__scopeSelect:e,value:r,...i},a)=>{const u=ee.useRef(null),d=ds(a,u),m=Vw(r);return ee.useEffect(()=>{const o=u.current;if(!o)return;const w=window.HTMLSelectElement.prototype,I=Object.getOwnPropertyDescriptor(w,"value").set;if(m!==r&&I){const D=new Event("change",{bubbles:!0});I.call(o,r),o.dispatchEvent(D)}},[m,r]),ae.jsx(oi.select,{...i,style:{...x5,...i.style},ref:d,defaultValue:r})});nF.displayName=$R;function iF(e){return e===""||e===void 0}function sF(e){const r=iu(e),i=ee.useRef(""),a=ee.useRef(0),u=ee.useCallback(m=>{const o=i.current+m;r(o),(function w(E){i.current=E,window.clearTimeout(a.current),E!==""&&(a.current=window.setTimeout(()=>w(""),1e3))})(o)},[r]),d=ee.useCallback(()=>{i.current="",window.clearTimeout(a.current)},[]);return ee.useEffect(()=>()=>window.clearTimeout(a.current),[]),[i,u,d]}function oF(e,r,i){const u=r.length>1&&Array.from(r).every(E=>E===r[0])?r[0]:r,d=i?e.indexOf(i):-1;let m=WR(e,Math.max(d,0));u.length===1&&(m=m.filter(E=>E!==i));const w=m.find(E=>E.textValue.toLowerCase().startsWith(u.toLowerCase()));return w!==i?w:void 0}function WR(e,r){return e.map((i,a)=>e[(r+a)%e.length])}var ZR=MS,aF=US,XR=RS,YR=NS,JR=QS,lF=OS,eN=VS,cF=qS,AF=WS,tN=ZS,rN=YS,uF=JS,hF=eF,dF=rF;const fF=ZR,pF=XR,qw=ee.forwardRef(({className:e,children:r,...i},a)=>ae.jsxs(aF,{ref:a,className:qi("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",e),...i,children:[r,ae.jsx(YR,{asChild:!0,children:ae.jsx(K5,{className:"h-4 w-4 opacity-50"})})]}));qw.displayName=aF.displayName;const mF=ee.forwardRef(({className:e,...r},i)=>ae.jsx(uF,{ref:i,className:qi("flex cursor-default items-center justify-center py-1",e),...r,children:ae.jsx(iP,{className:"h-4 w-4"})}));mF.displayName=uF.displayName;const gF=ee.forwardRef(({className:e,...r},i)=>ae.jsx(hF,{ref:i,className:qi("flex cursor-default items-center justify-center py-1",e),...r,children:ae.jsx(K5,{className:"h-4 w-4"})}));gF.displayName=hF.displayName;const $w=ee.forwardRef(({className:e,children:r,position:i="popper",...a},u)=>ae.jsx(JR,{children:ae.jsxs(lF,{ref:u,className:qi("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",i==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:i,...a,children:[ae.jsx(mF,{}),ae.jsx(eN,{className:qi("p-1",i==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:r}),ae.jsx(gF,{})]})}));$w.displayName=lF.displayName;const nN=ee.forwardRef(({className:e,...r},i)=>ae.jsx(cF,{ref:i,className:qi("py-1.5 pl-8 pr-2 text-sm font-semibold",e),...r}));nN.displayName=cF.displayName;const Ww=ee.forwardRef(({className:e,children:r,...i},a)=>ae.jsxs(AF,{ref:a,className:qi("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...i,children:[ae.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:ae.jsx(rN,{children:ae.jsx(G5,{className:"h-4 w-4"})})}),ae.jsx(tN,{children:r})]}));Ww.displayName=AF.displayName;const iN=ee.forwardRef(({className:e,...r},i)=>ae.jsx(dF,{ref:i,className:qi("-mx-1 my-1 h-px bg-muted",e),...r}));iN.displayName=dF.displayName;var Dy="Checkbox",[sN]=Hh(Dy),[oN,Zw]=sN(Dy);function aN(e){const{__scopeCheckbox:r,checked:i,children:a,defaultChecked:u,disabled:d,form:m,name:o,onCheckedChange:w,required:E,value:I="on",internal_do_not_use_render:D}=e,[O,P]=mp({prop:i,defaultProp:u??!1,onChange:w,caller:Dy}),[W,z]=ee.useState(null),[H,Z]=ee.useState(null),se=ee.useRef(!1),ce=W?!!m||!!W.closest("form"):!0,de={checked:O,disabled:d,setChecked:P,control:W,setControl:z,name:o,form:m,value:I,hasConsumerStoppedPropagationRef:se,required:E,defaultChecked:gd(u)?!1:u,isFormControl:ce,bubbleInput:H,setBubbleInput:Z};return ae.jsx(oN,{scope:r,...de,children:lN(D)?D(de):a})}var yF="CheckboxTrigger",vF=ee.forwardRef(({__scopeCheckbox:e,onKeyDown:r,onClick:i,...a},u)=>{const{control:d,value:m,disabled:o,checked:w,required:E,setControl:I,setChecked:D,hasConsumerStoppedPropagationRef:O,isFormControl:P,bubbleInput:W}=Zw(yF,e),z=ds(u,I),H=ee.useRef(w);return ee.useEffect(()=>{const Z=d?.form;if(Z){const se=()=>D(H.current);return Z.addEventListener("reset",se),()=>Z.removeEventListener("reset",se)}},[d,D]),ae.jsx(oi.button,{type:"button",role:"checkbox","aria-checked":gd(w)?"mixed":w,"aria-required":E,"data-state":BF(w),"data-disabled":o?"":void 0,disabled:o,value:m,...a,ref:z,onKeyDown:Un(r,Z=>{Z.key==="Enter"&&Z.preventDefault()}),onClick:Un(i,Z=>{D(se=>gd(se)?!0:!se),W&&P&&(O.current=Z.isPropagationStopped(),O.current||Z.stopPropagation())})})});vF.displayName=yF;var Xw=ee.forwardRef((e,r)=>{const{__scopeCheckbox:i,name:a,checked:u,defaultChecked:d,required:m,disabled:o,value:w,onCheckedChange:E,form:I,...D}=e;return ae.jsx(aN,{__scopeCheckbox:i,checked:u,defaultChecked:d,disabled:o,required:m,onCheckedChange:E,name:a,form:I,value:w,internal_do_not_use_render:({isFormControl:O})=>ae.jsxs(ae.Fragment,{children:[ae.jsx(vF,{...D,ref:r,__scopeCheckbox:i}),O&&ae.jsx(bF,{__scopeCheckbox:i})]})})});Xw.displayName=Dy;var _F="CheckboxIndicator",wF=ee.forwardRef((e,r)=>{const{__scopeCheckbox:i,forceMount:a,...u}=e,d=Zw(_F,i);return ae.jsx(Km,{present:a||gd(d.checked)||d.checked===!0,children:ae.jsx(oi.span,{"data-state":BF(d.checked),"data-disabled":d.disabled?"":void 0,...u,ref:r,style:{pointerEvents:"none",...e.style}})})});wF.displayName=_F;var xF="CheckboxBubbleInput",bF=ee.forwardRef(({__scopeCheckbox:e,...r},i)=>{const{control:a,hasConsumerStoppedPropagationRef:u,checked:d,defaultChecked:m,required:o,disabled:w,name:E,value:I,form:D,bubbleInput:O,setBubbleInput:P}=Zw(xF,e),W=ds(i,P),z=Vw(d),H=kw(a);ee.useEffect(()=>{const se=O;if(!se)return;const ce=window.HTMLInputElement.prototype,Pe=Object.getOwnPropertyDescriptor(ce,"checked").set,He=!u.current;if(z!==d&&Pe){const Xe=new Event("click",{bubbles:He});se.indeterminate=gd(d),Pe.call(se,gd(d)?!1:d),se.dispatchEvent(Xe)}},[O,z,d,u]);const Z=ee.useRef(gd(d)?!1:d);return ae.jsx(oi.input,{type:"checkbox","aria-hidden":!0,defaultChecked:m??Z.current,required:o,disabled:w,name:E,value:I,form:D,...r,tabIndex:-1,ref:W,style:{...r.style,...H,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});bF.displayName=xF;function lN(e){return typeof e=="function"}function gd(e){return e==="indeterminate"}function BF(e){return gd(e)?"indeterminate":e?"checked":"unchecked"}const D_=ee.forwardRef(({className:e,...r},i)=>ae.jsx(Xw,{ref:i,className:qi("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",e),...r,children:ae.jsx(wF,{className:qi("flex items-center justify-center text-current"),children:ae.jsx(G5,{className:"h-4 w-4"})})}));D_.displayName=Xw.displayName;const Ry=ee.forwardRef(({className:e,type:r,...i},a)=>ae.jsx("input",{type:r,className:qi("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),ref:a,...i}));Ry.displayName="Input";var U0={exports:{}};var cN=U0.exports,j2;function AN(){return j2||(j2=1,(function(e,r){(function(i,a){e.exports=a()})(cN,(function(){var i={},a={};function u(m,o,w){if(a[m]=w,m==="index"){var E="var sharedModule = {}; ("+a.shared+")(sharedModule); ("+a.worker+")(sharedModule);",I={};return a.shared(I),a.index(i,I),typeof window<"u"&&i.setWorkerUrl(window.URL.createObjectURL(new Blob([E],{type:"text/javascript"}))),i}}u("shared",["exports"],(function(m){function o(l,t,s,A){return new(s||(s=Promise))((function(p,v){function _(U){try{F(A.next(U))}catch(Q){v(Q)}}function B(U){try{F(A.throw(U))}catch(Q){v(Q)}}function F(U){var Q;U.done?p(U.value):(Q=U.value,Q instanceof s?Q:new s((function(K){K(Q)}))).then(_,B)}F((A=A.apply(l,t||[])).next())}))}function w(l,t){this.x=l,this.y=t}function E(l){return l&&l.__esModule&&Object.prototype.hasOwnProperty.call(l,"default")?l.default:l}var I,D;typeof SuppressedError=="function"&&SuppressedError,w.prototype={clone(){return new w(this.x,this.y)},add(l){return this.clone()._add(l)},sub(l){return this.clone()._sub(l)},multByPoint(l){return this.clone()._multByPoint(l)},divByPoint(l){return this.clone()._divByPoint(l)},mult(l){return this.clone()._mult(l)},div(l){return this.clone()._div(l)},rotate(l){return this.clone()._rotate(l)},rotateAround(l,t){return this.clone()._rotateAround(l,t)},matMult(l){return this.clone()._matMult(l)},unit(){return this.clone()._unit()},perp(){return this.clone()._perp()},round(){return this.clone()._round()},mag(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals(l){return this.x===l.x&&this.y===l.y},dist(l){return Math.sqrt(this.distSqr(l))},distSqr(l){const t=l.x-this.x,s=l.y-this.y;return t*t+s*s},angle(){return Math.atan2(this.y,this.x)},angleTo(l){return Math.atan2(this.y-l.y,this.x-l.x)},angleWith(l){return this.angleWithSep(l.x,l.y)},angleWithSep(l,t){return Math.atan2(this.x*t-this.y*l,this.x*l+this.y*t)},_matMult(l){const t=l[2]*this.x+l[3]*this.y;return this.x=l[0]*this.x+l[1]*this.y,this.y=t,this},_add(l){return this.x+=l.x,this.y+=l.y,this},_sub(l){return this.x-=l.x,this.y-=l.y,this},_mult(l){return this.x*=l,this.y*=l,this},_div(l){return this.x/=l,this.y/=l,this},_multByPoint(l){return this.x*=l.x,this.y*=l.y,this},_divByPoint(l){return this.x/=l.x,this.y/=l.y,this},_unit(){return this._div(this.mag()),this},_perp(){const l=this.y;return this.y=this.x,this.x=-l,this},_rotate(l){const t=Math.cos(l),s=Math.sin(l),A=s*this.x+t*this.y;return this.x=t*this.x-s*this.y,this.y=A,this},_rotateAround(l,t){const s=Math.cos(l),A=Math.sin(l),p=t.y+A*(this.x-t.x)+s*(this.y-t.y);return this.x=t.x+s*(this.x-t.x)-A*(this.y-t.y),this.y=p,this},_round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},constructor:w},w.convert=function(l){if(l instanceof w)return l;if(Array.isArray(l))return new w(+l[0],+l[1]);if(l.x!==void 0&&l.y!==void 0)return new w(+l.x,+l.y);throw new Error("Expected [x, y] or {x, y} point format")};var O=(function(){if(D)return I;function l(t,s,A,p){this.cx=3*t,this.bx=3*(A-t)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*s,this.by=3*(p-s)-this.cy,this.ay=1-this.cy-this.by,this.p1x=t,this.p1y=s,this.p2x=A,this.p2y=p}return D=1,I=l,l.prototype={sampleCurveX:function(t){return((this.ax*t+this.bx)*t+this.cx)*t},sampleCurveY:function(t){return((this.ay*t+this.by)*t+this.cy)*t},sampleCurveDerivativeX:function(t){return(3*this.ax*t+2*this.bx)*t+this.cx},solveCurveX:function(t,s){if(s===void 0&&(s=1e-6),t<0)return 0;if(t>1)return 1;for(var A=t,p=0;p<8;p++){var v=this.sampleCurveX(A)-t;if(Math.abs(v)<s)return A;var _=this.sampleCurveDerivativeX(A);if(Math.abs(_)<1e-6)break;A-=v/_}var B=0,F=1;for(A=t,p=0;p<20&&(v=this.sampleCurveX(A),!(Math.abs(v-t)<s));p++)t>v?B=A:F=A,A=.5*(F-B)+B;return A},solve:function(t,s){return this.sampleCurveY(this.solveCurveX(t,s))}},I})(),P=E(O);let W,z;function H(){return W==null&&(W=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")&&typeof createImageBitmap=="function"),W}function Z(){if(z==null&&(z=!1,H())){const t=new OffscreenCanvas(5,5).getContext("2d",{willReadFrequently:!0});if(t){for(let A=0;A<25;A++){const p=4*A;t.fillStyle=`rgb(${p},${p+1},${p+2})`,t.fillRect(A%5,Math.floor(A/5),1,1)}const s=t.getImageData(0,0,5,5).data;for(let A=0;A<100;A++)if(A%4!=3&&s[A]!==A){z=!0;break}}}return z||!1}var se=1e-6,ce=typeof Float32Array<"u"?Float32Array:Array;function de(){var l=new ce(9);return ce!=Float32Array&&(l[1]=0,l[2]=0,l[3]=0,l[5]=0,l[6]=0,l[7]=0),l[0]=1,l[4]=1,l[8]=1,l}function Pe(l){return l[0]=1,l[1]=0,l[2]=0,l[3]=0,l[4]=0,l[5]=1,l[6]=0,l[7]=0,l[8]=0,l[9]=0,l[10]=1,l[11]=0,l[12]=0,l[13]=0,l[14]=0,l[15]=1,l}function He(){var l=new ce(3);return ce!=Float32Array&&(l[0]=0,l[1]=0,l[2]=0),l}function Xe(l){var t=l[0],s=l[1],A=l[2];return Math.sqrt(t*t+s*s+A*A)}function Qe(l,t,s){var A=new ce(3);return A[0]=l,A[1]=t,A[2]=s,A}function Be(l,t,s){return l[0]=t[0]+s[0],l[1]=t[1]+s[1],l[2]=t[2]+s[2],l}function Je(l,t,s){return l[0]=t[0]*s,l[1]=t[1]*s,l[2]=t[2]*s,l}function Ae(l,t,s){var A=t[0],p=t[1],v=t[2],_=s[0],B=s[1],F=s[2];return l[0]=p*F-v*B,l[1]=v*_-A*F,l[2]=A*B-p*_,l}var me,Te=Xe;function Ie(l,t,s){var A=t[0],p=t[1],v=t[2],_=t[3];return l[0]=s[0]*A+s[4]*p+s[8]*v+s[12]*_,l[1]=s[1]*A+s[5]*p+s[9]*v+s[13]*_,l[2]=s[2]*A+s[6]*p+s[10]*v+s[14]*_,l[3]=s[3]*A+s[7]*p+s[11]*v+s[15]*_,l}function ut(){var l=new ce(4);return ce!=Float32Array&&(l[0]=0,l[1]=0,l[2]=0),l[3]=1,l}function it(l,t,s,A){var p=arguments.length>4&&arguments[4]!==void 0?arguments[4]:"zyx",v=Math.PI/360;t*=v,A*=v,s*=v;var _=Math.sin(t),B=Math.cos(t),F=Math.sin(s),U=Math.cos(s),Q=Math.sin(A),K=Math.cos(A);switch(p){case"xyz":l[0]=_*U*K+B*F*Q,l[1]=B*F*K-_*U*Q,l[2]=B*U*Q+_*F*K,l[3]=B*U*K-_*F*Q;break;case"xzy":l[0]=_*U*K-B*F*Q,l[1]=B*F*K-_*U*Q,l[2]=B*U*Q+_*F*K,l[3]=B*U*K+_*F*Q;break;case"yxz":l[0]=_*U*K+B*F*Q,l[1]=B*F*K-_*U*Q,l[2]=B*U*Q-_*F*K,l[3]=B*U*K+_*F*Q;break;case"yzx":l[0]=_*U*K+B*F*Q,l[1]=B*F*K+_*U*Q,l[2]=B*U*Q-_*F*K,l[3]=B*U*K-_*F*Q;break;case"zxy":l[0]=_*U*K-B*F*Q,l[1]=B*F*K+_*U*Q,l[2]=B*U*Q+_*F*K,l[3]=B*U*K-_*F*Q;break;case"zyx":l[0]=_*U*K-B*F*Q,l[1]=B*F*K+_*U*Q,l[2]=B*U*Q-_*F*K,l[3]=B*U*K+_*F*Q;break;default:throw new Error("Unknown angle order "+p)}return l}function ot(){var l=new ce(2);return ce!=Float32Array&&(l[0]=0,l[1]=0),l}function ke(l,t){var s=new ce(2);return s[0]=l,s[1]=t,s}He(),me=new ce(4),ce!=Float32Array&&(me[0]=0,me[1]=0,me[2]=0,me[3]=0),He(),Qe(1,0,0),Qe(0,1,0),ut(),ut(),de(),ot();const Ne=8192;function yt(l,t,s){return t*(Ne/(l.tileSize*Math.pow(2,s-l.tileID.overscaledZ)))}function Ce(l,t){return(l%t+t)%t}function ie(l,t,s){return l*(1-s)+t*s}function Ee(l){if(l<=0)return 0;if(l>=1)return 1;const t=l*l,s=t*l;return 4*(l<.5?s:3*(l-t)+s-.75)}function Le(l,t,s,A){const p=new P(l,t,s,A);return v=>p.solve(v)}const Ve=Le(.25,.1,.25,1);function nt(l,t,s){return Math.min(s,Math.max(t,l))}function et(l,t,s){const A=s-t,p=((l-t)%A+A)%A+t;return p===t?s:p}function _t(l,...t){for(const s of t)for(const A in s)l[A]=s[A];return l}let St=1;function Tt(l,t,s){const A={};for(const p in l)A[p]=t.call(this,l[p],p,l);return A}function Gt(l,t,s){const A={};for(const p in l)t.call(this,l[p],p,l)&&(A[p]=l[p]);return A}function or(l){return Array.isArray(l)?l.map(or):typeof l=="object"&&l?Tt(l,or):l}const Ar={};function _r(l){Ar[l]||(typeof console<"u"&&console.warn(l),Ar[l]=!0)}function je(l,t,s){return(s.y-l.y)*(t.x-l.x)>(t.y-l.y)*(s.x-l.x)}function mr(l){return typeof WorkerGlobalScope<"u"&&l!==void 0&&l instanceof WorkerGlobalScope}let kr=null;function Vr(l){return typeof ImageBitmap<"u"&&l instanceof ImageBitmap}const lr="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";function Gr(l,t,s,A,p){return o(this,void 0,void 0,(function*(){if(typeof VideoFrame>"u")throw new Error("VideoFrame not supported");const v=new VideoFrame(l,{timestamp:0});try{const _=v?.format;if(!_||!_.startsWith("BGR")&&!_.startsWith("RGB"))throw new Error(`Unrecognized format ${_}`);const B=_.startsWith("BGR"),F=new Uint8ClampedArray(A*p*4);if(yield v.copyTo(F,(function(U,Q,K,X,J){const oe=4*Math.max(-Q,0),le=(Math.max(0,K)-K)*X*4+oe,he=4*X,be=Math.max(0,Q),rt=Math.max(0,K);return{rect:{x:be,y:rt,width:Math.min(U.width,Q+X)-be,height:Math.min(U.height,K+J)-rt},layout:[{offset:le,stride:he}]}})(l,t,s,A,p)),B)for(let U=0;U<F.length;U+=4){const Q=F[U];F[U]=F[U+2],F[U+2]=Q}return F}finally{v.close()}}))}let Er,Nr;function Dr(l,t,s,A){return l.addEventListener(t,s,A),{unsubscribe:()=>{l.removeEventListener(t,s,A)}}}function Dn(l){return l*Math.PI/180}function un(l){return l/Math.PI*180}const pt={touchstart:!0,touchmove:!0,touchmoveWindow:!0,touchend:!0,touchcancel:!0},fe={dblclick:!0,click:!0,mouseover:!0,mouseout:!0,mousedown:!0,mousemove:!0,mousemoveWindow:!0,mouseup:!0,mouseupWindow:!0,contextmenu:!0,wheel:!0},pe="AbortError";class ve extends Error{constructor(t=pe){super(t instanceof Error?t.message:t),this.name=pe,t instanceof Error&&t.stack&&(this.stack=t.stack)}}function qe(l){return l.name===pe}const We={MAX_PARALLEL_IMAGE_REQUESTS:16,MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:8,MAX_TILE_CACHE_ZOOM_LEVELS:5,REGISTERED_PROTOCOLS:{},WORKER_URL:""};function Ct(l){return We.REGISTERED_PROTOCOLS[l.substring(0,l.indexOf("://"))]}const vt="global-dispatcher";class ct extends Error{constructor(t,s,A,p){super(`AJAXError: ${s} (${t}): ${A}`),this.status=t,this.statusText=s,this.url=A,this.body=p}}const bt=()=>mr(self)?self.worker&&self.worker.referrer:(window.location.protocol==="blob:"?window.parent:window).location.href,Ht=function(l,t){if(/:\/\//.test(l.url)&&!/^https?:|^file:/.test(l.url)){const A=Ct(l.url);if(A)return A(l,t);if(mr(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:l,targetMapId:vt},t)}if(!(/^file:/.test(s=l.url)||/^file:/.test(bt())&&!/^\w+:/.test(s))){if(fetch&&Request&&AbortController&&Object.prototype.hasOwnProperty.call(Request.prototype,"signal"))return(function(A,p){return o(this,void 0,void 0,(function*(){const v=new Request(A.url,{method:A.method||"GET",body:A.body,credentials:A.credentials,headers:A.headers,cache:A.cache,referrer:bt(),signal:p.signal});let _,B;A.type!=="json"||v.headers.has("Accept")||v.headers.set("Accept","application/json");try{_=yield fetch(v)}catch(U){throw qe(U)?U:new ct(0,U.message,A.url,new Blob)}if(!_.ok){const U=yield _.blob();throw new ct(_.status,_.statusText,A.url,U)}B=A.type==="arrayBuffer"||A.type==="image"?_.arrayBuffer():A.type==="json"?_.json():_.text();const F=yield B;return p.signal.throwIfAborted(),{data:F,cacheControl:_.headers.get("Cache-Control"),expires:_.headers.get("Expires")}}))})(l,t);if(mr(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:l,mustQueue:!0,targetMapId:vt},t)}var s;return(function(A,p){return new Promise(((v,_)=>{var B;const F=new XMLHttpRequest;F.open(A.method||"GET",A.url,!0),A.type!=="arrayBuffer"&&A.type!=="image"||(F.responseType="arraybuffer");for(const U in A.headers)F.setRequestHeader(U,A.headers[U]);A.type==="json"&&(F.responseType="text",!((B=A.headers)===null||B===void 0)&&B.Accept||F.setRequestHeader("Accept","application/json")),F.withCredentials=A.credentials==="include",F.onerror=()=>{_(new Error(F.statusText))},F.onload=()=>{if(!p.signal.aborted)if((F.status>=200&&F.status<300||F.status===0)&&F.response!==null){let U=F.response;if(A.type==="json")try{U=JSON.parse(F.response)}catch(Q){return void _(Q)}v({data:U,cacheControl:F.getResponseHeader("Cache-Control"),expires:F.getResponseHeader("Expires")})}else{const U=new Blob([F.response],{type:F.getResponseHeader("Content-Type")});_(new ct(F.status,F.statusText,A.url,U))}},p.signal.addEventListener("abort",(()=>{F.abort(),_(new ve(p.signal.reason))})),F.send(A.body)}))})(l,t)};function Ft(l){if(!l||l.indexOf("://")<=0||l.indexOf("data:image/")===0||l.indexOf("blob:")===0)return!0;const t=new URL(l),s=window.location;return t.protocol===s.protocol&&t.host===s.host}function cr(l,t,s){s[l]&&s[l].indexOf(t)!==-1||(s[l]=s[l]||[],s[l].push(t))}function Jt(l,t,s){if(s&&s[l]){const A=s[l].indexOf(t);A!==-1&&s[l].splice(A,1)}}class fr{constructor(t,s={}){_t(this,s),this.type=t}}class rn extends fr{constructor(t,s={}){super("error",_t({error:t},s))}}class Tr{on(t,s){return this._listeners=this._listeners||{},cr(t,s,this._listeners),{unsubscribe:()=>{this.off(t,s)}}}off(t,s){return Jt(t,s,this._listeners),Jt(t,s,this._oneTimeListeners),this}once(t,s){return s?(this._oneTimeListeners=this._oneTimeListeners||{},cr(t,s,this._oneTimeListeners),this):new Promise((A=>this.once(t,A)))}fire(t,s){typeof t=="string"&&(t=new fr(t,s||{}));const A=t.type;if(this.listens(A)){t.target=this;const p=this._listeners&&this._listeners[A]?this._listeners[A].slice():[];for(const B of p)B.call(this,t);const v=this._oneTimeListeners&&this._oneTimeListeners[A]?this._oneTimeListeners[A].slice():[];for(const B of v)Jt(A,B,this._oneTimeListeners),B.call(this,t);const _=this._eventedParent;_&&(_t(t,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),_.fire(t))}else t instanceof rn&&console.error(t.error);return this}listens(t){return this._listeners&&this._listeners[t]&&this._listeners[t].length>0||this._oneTimeListeners&&this._oneTimeListeners[t]&&this._oneTimeListeners[t].length>0||this._eventedParent&&this._eventedParent.listens(t)}setEventedParent(t,s){return this._eventedParent=t,this._eventedParentData=s,this}}var mt={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},centerAltitude:{type:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},roll:{type:"number",default:0,units:"degrees"},state:{type:"state",default:{}},light:{type:"light"},sky:{type:"sky"},projection:{type:"projection"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"sprite"},glyphs:{type:"string"},"font-faces":{type:"array",value:"fontFaces"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},encoding:{type:"enum",values:{mvt:{},mlt:{}},default:"mvt"},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{},custom:{}},default:"mapbox"},redFactor:{type:"number",default:1},blueFactor:{type:"number",default:1},greenFactor:{type:"number",default:1},baseShift:{type:"number",default:0},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{required:!0,type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},"color-relief":{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_color-relief","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-variable-anchor-offset":{type:"variableAnchorOffsetCollection",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_color-relief":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},sky:{"sky-color":{type:"color","property-type":"data-constant",default:"#88C6FC",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-ground-blend":{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-fog-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"sky-horizon-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"atmosphere-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1}},projection:{type:{type:"projectionDefinition",default:"mercator","property-type":"data-constant",transition:!1,expression:{interpolated:!0,parameters:["zoom"]}}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_color-relief","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"numberArray",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-altitude":{type:"numberArray",default:45,minimum:0,maximum:90,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"colorArray",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"colorArray",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-method":{type:"enum",values:{standard:{},basic:{},combined:{},igor:{},multidirectional:{}},default:"standard",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},"paint_color-relief":{"color-relief-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"color-relief-color":{type:"color",transition:!1,expression:{interpolated:!0,parameters:["elevation"]},"property-type":"color-ramp"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};const tn=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function Qr(l,t){const s={};for(const A in l)A!=="ref"&&(s[A]=l[A]);return tn.forEach((A=>{A in t&&(s[A]=t[A])})),s}function gr(l,t){if(Array.isArray(l)){if(!Array.isArray(t)||l.length!==t.length)return!1;for(let s=0;s<l.length;s++)if(!gr(l[s],t[s]))return!1;return!0}if(typeof l=="object"&&l!==null&&t!==null){if(typeof t!="object"||Object.keys(l).length!==Object.keys(t).length)return!1;for(const s in l)if(!gr(l[s],t[s]))return!1;return!0}return l===t}function $r(l,t){l.push(t)}function Rn(l,t,s){$r(s,{command:"addSource",args:[l,t[l]]})}function xr(l,t,s){$r(t,{command:"removeSource",args:[l]}),s[l]=!0}function Tn(l,t,s,A){xr(l,s,A),Rn(l,t,s)}function Bn(l,t,s){let A;for(A in l[s])if(Object.prototype.hasOwnProperty.call(l[s],A)&&A!=="data"&&!gr(l[s][A],t[s][A]))return!1;for(A in t[s])if(Object.prototype.hasOwnProperty.call(t[s],A)&&A!=="data"&&!gr(l[s][A],t[s][A]))return!1;return!0}function xn(l,t,s,A,p,v){l=l||{},t=t||{};for(const _ in l)Object.prototype.hasOwnProperty.call(l,_)&&(gr(l[_],t[_])||s.push({command:v,args:[A,_,t[_],p]}));for(const _ in t)Object.prototype.hasOwnProperty.call(t,_)&&!Object.prototype.hasOwnProperty.call(l,_)&&(gr(l[_],t[_])||s.push({command:v,args:[A,_,t[_],p]}))}function Ui(l){return l.id}function ai(l,t){return l[t.id]=t,l}class Yt{constructor(t,s,A,p){this.message=(t?`${t}: `:"")+A,p&&(this.identifier=p),s!=null&&s.__line__&&(this.line=s.__line__)}}function Zn(l,...t){for(const s of t)for(const A in s)l[A]=s[A];return l}class $i extends Error{constructor(t,s){super(s),this.message=s,this.key=t}}class sl{constructor(t,s=[]){this.parent=t,this.bindings={};for(const[A,p]of s)this.bindings[A]=p}concat(t){return new sl(this,t)}get(t){if(this.bindings[t])return this.bindings[t];if(this.parent)return this.parent.get(t);throw new Error(`${t} not found in scope.`)}has(t){return!!this.bindings[t]||!!this.parent&&this.parent.has(t)}}const ns={kind:"null"},pr={kind:"number"},nn={kind:"string"},hn={kind:"boolean"},Di={kind:"color"},El={kind:"projectionDefinition"},ks={kind:"object"},dn={kind:"value"},ol={kind:"collator"},al={kind:"formatted"},ec={kind:"padding"},Ec={kind:"colorArray"},fi={kind:"numberArray"},tc={kind:"resolvedImage"},Sl={kind:"variableAnchorOffsetCollection"};function Ci(l,t){return{kind:"array",itemType:l,N:t}}function jn(l){if(l.kind==="array"){const t=jn(l.itemType);return typeof l.N=="number"?`array<${t}, ${l.N}>`:l.itemType.kind==="value"?"array":`array<${t}>`}return l.kind}const rA=[ns,pr,nn,hn,Di,El,al,ks,Ci(dn),ec,fi,Ec,tc,Sl];function ll(l,t){if(t.kind==="error")return null;if(l.kind==="array"){if(t.kind==="array"&&(t.N===0&&t.itemType.kind==="value"||!ll(l.itemType,t.itemType))&&(typeof l.N!="number"||l.N===t.N))return null}else{if(l.kind===t.kind)return null;if(l.kind==="value"){for(const s of rA)if(!ll(s,t))return null}}return`Expected ${jn(l)} but found ${jn(t)} instead.`}function cl(l,t){return t.some((s=>s.kind===l.kind))}function Us(l,t){return t.some((s=>s==="null"?l===null:s==="array"?Array.isArray(l):s==="object"?l&&!Array.isArray(l)&&typeof l=="object":s===typeof l))}function Ro(l,t){return l.kind==="array"&&t.kind==="array"?l.itemType.kind===t.itemType.kind&&typeof l.N=="number":l.kind===t.kind}const fs=.96422,Ba=.82521,IA=4/29,Mn=6/29,Sc=3*Mn*Mn,No=Mn*Mn*Mn,Qo=Math.PI/180,Fc=180/Math.PI;function la(l){return(l%=360)<0&&(l+=360),l}function ys([l,t,s,A]){let p,v;const _=nA((.2225045*(l=Oo(l))+.7168786*(t=Oo(t))+.0606169*(s=Oo(s)))/1);l===t&&t===s?p=v=_:(p=nA((.4360747*l+.3850649*t+.1430804*s)/fs),v=nA((.0139322*l+.0971045*t+.7141733*s)/Ba));const B=116*_-16;return[B<0?0:B,500*(p-_),200*(_-v),A]}function Oo(l){return l<=.04045?l/12.92:Math.pow((l+.055)/1.055,2.4)}function nA(l){return l>No?Math.pow(l,1/3):l/Sc+IA}function iA([l,t,s,A]){let p=(l+16)/116,v=isNaN(t)?p:p+t/500,_=isNaN(s)?p:p-s/200;return p=1*Ca(p),v=fs*Ca(v),_=Ba*Ca(_),[rc(3.1338561*v-1.6168667*p-.4906146*_),rc(-.9787684*v+1.9161415*p+.033454*_),rc(.0719453*v-.2289914*p+1.4052427*_),A]}function rc(l){return(l=l<=.00304?12.92*l:1.055*Math.pow(l,1/2.4)-.055)<0?0:l>1?1:l}function Ca(l){return l>Mn?l*l*l:Sc*(l-IA)}const TA=Object.hasOwn||function(l,t){return Object.prototype.hasOwnProperty.call(l,t)};function Kn(l,t){return TA(l,t)?l[t]:void 0}function Fl(l){return parseInt(l.padEnd(2,l),16)/255}function nc(l,t){return Il(t?l/100:l,0,1)}function Il(l,t,s){return Math.min(Math.max(t,l),s)}function PA(l){return!l.some(Number.isNaN)}const Ic={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};function ca(l,t,s){return l+s*(t-l)}function Al(l,t,s){return l.map(((A,p)=>ca(A,t[p],s)))}class an{constructor(t,s,A,p=1,v=!0){this.r=t,this.g=s,this.b=A,this.a=p,v||(this.r*=p,this.g*=p,this.b*=p,p||this.overwriteGetter("rgb",[t,s,A,p]))}static parse(t){if(t instanceof an)return t;if(typeof t!="string")return;const s=(function(A){if((A=A.toLowerCase().trim())==="transparent")return[0,0,0,0];const p=Kn(Ic,A);if(p){const[_,B,F]=p;return[_/255,B/255,F/255,1]}if(A.startsWith("#")&&/^#(?:[0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/.test(A)){const _=A.length<6?1:2;let B=1;return[Fl(A.slice(B,B+=_)),Fl(A.slice(B,B+=_)),Fl(A.slice(B,B+=_)),Fl(A.slice(B,B+_)||"ff")]}if(A.startsWith("rgb")){const _=A.match(/^rgba?\(\s*([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(_){const[B,F,U,Q,K,X,J,oe,le,he,be,rt]=_,Fe=[Q||" ",J||" ",he].join("");if(Fe==="  "||Fe==="  /"||Fe===",,"||Fe===",,,"){const Ue=[U,X,le].join(""),at=Ue==="%%%"?100:Ue===""?255:0;if(at){const dt=[Il(+F/at,0,1),Il(+K/at,0,1),Il(+oe/at,0,1),be?nc(+be,rt):1];if(PA(dt))return dt}}return}}const v=A.match(/^hsla?\(\s*([\de.+-]+)(?:deg)?(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(v){const[_,B,F,U,Q,K,X,J,oe]=v,le=[F||" ",Q||" ",X].join("");if(le==="  "||le==="  /"||le===",,"||le===",,,"){const he=[+B,Il(+U,0,100),Il(+K,0,100),J?nc(+J,oe):1];if(PA(he))return(function([be,rt,Fe,Ue]){function at(dt){const Mt=(dt+be/30)%12,Xt=rt*Math.min(Fe,1-Fe);return Fe-Xt*Math.max(-1,Math.min(Mt-3,9-Mt,1))}return be=la(be),rt/=100,Fe/=100,[at(0),at(8),at(4),Ue]})(he)}}})(t);return s?new an(...s,!1):void 0}get rgb(){const{r:t,g:s,b:A,a:p}=this,v=p||1/0;return this.overwriteGetter("rgb",[t/v,s/v,A/v,p])}get hcl(){return this.overwriteGetter("hcl",(function(t){const[s,A,p,v]=ys(t),_=Math.sqrt(A*A+p*p);return[Math.round(1e4*_)?la(Math.atan2(p,A)*Fc):NaN,_,s,v]})(this.rgb))}get lab(){return this.overwriteGetter("lab",ys(this.rgb))}overwriteGetter(t,s){return Object.defineProperty(this,t,{value:s}),s}toString(){const[t,s,A,p]=this.rgb;return`rgba(${[t,s,A].map((v=>Math.round(255*v))).join(",")},${p})`}static interpolate(t,s,A,p="rgb"){switch(p){case"rgb":{const[v,_,B,F]=Al(t.rgb,s.rgb,A);return new an(v,_,B,F,!1)}case"hcl":{const[v,_,B,F]=t.hcl,[U,Q,K,X]=s.hcl;let J,oe;if(isNaN(v)||isNaN(U))isNaN(v)?isNaN(U)?J=NaN:(J=U,B!==1&&B!==0||(oe=Q)):(J=v,K!==1&&K!==0||(oe=_));else{let Fe=U-v;U>v&&Fe>180?Fe-=360:U<v&&v-U>180&&(Fe+=360),J=v+A*Fe}const[le,he,be,rt]=(function([Fe,Ue,at,dt]){return Fe=isNaN(Fe)?0:Fe*Qo,iA([at,Math.cos(Fe)*Ue,Math.sin(Fe)*Ue,dt])})([J,oe??ca(_,Q,A),ca(B,K,A),ca(F,X,A)]);return new an(le,he,be,rt,!1)}case"lab":{const[v,_,B,F]=iA(Al(t.lab,s.lab,A));return new an(v,_,B,F,!1)}}}}an.black=new an(0,0,0,1),an.white=new an(1,1,1,1),an.transparent=new an(0,0,0,0),an.red=new an(1,0,0,1);class Ea{constructor(t,s,A){this.sensitivity=t?s?"variant":"case":s?"accent":"base",this.locale=A,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(t,s){return this.collator.compare(t,s)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}const zo=["bottom","center","top"];class Ho{constructor(t,s,A,p,v,_){this.text=t,this.image=s,this.scale=A,this.fontStack=p,this.textColor=v,this.verticalAlign=_}}class vs{constructor(t){this.sections=t}static fromString(t){return new vs([new Ho(t,null,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some((t=>t.text.length!==0||t.image&&t.image.name.length!==0))}static factory(t){return t instanceof vs?t:vs.fromString(t)}toString(){return this.sections.length===0?"":this.sections.map((t=>t.text)).join("")}}class Wr{constructor(t){this.values=t.slice()}static parse(t){if(t instanceof Wr)return t;if(typeof t=="number")return new Wr([t,t,t,t]);if(Array.isArray(t)&&!(t.length<1||t.length>4)){for(const s of t)if(typeof s!="number")return;switch(t.length){case 1:t=[t[0],t[0],t[0],t[0]];break;case 2:t=[t[0],t[1],t[0],t[1]];break;case 3:t=[t[0],t[1],t[2],t[1]]}return new Wr(t)}}toString(){return JSON.stringify(this.values)}static interpolate(t,s,A){return new Wr(Al(t.values,s.values,A))}}class Jn{constructor(t){this.values=t.slice()}static parse(t){if(t instanceof Jn)return t;if(typeof t=="number")return new Jn([t]);if(Array.isArray(t)){for(const s of t)if(typeof s!="number")return;return new Jn(t)}}toString(){return JSON.stringify(this.values)}static interpolate(t,s,A){return new Jn(Al(t.values,s.values,A))}}class cn{constructor(t){this.values=t.slice()}static parse(t){if(t instanceof cn)return t;if(typeof t=="string"){const A=an.parse(t);return A?new cn([A]):void 0}if(!Array.isArray(t))return;const s=[];for(const A of t){if(typeof A!="string")return;const p=an.parse(A);if(!p)return;s.push(p)}return new cn(s)}toString(){return JSON.stringify(this.values)}static interpolate(t,s,A,p="rgb"){const v=[];if(t.values.length!=s.values.length)throw new Error(`colorArray: Arrays have mismatched length (${t.values.length} vs. ${s.values.length}), cannot interpolate.`);for(let _=0;_<t.values.length;_++)v.push(an.interpolate(t.values[_],s.values[_],A,p));return new cn(v)}}class ii extends Error{constructor(t){super(t),this.name="RuntimeError"}toJSON(){return this.message}}const _s=new Set(["center","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"]);class Wi{constructor(t){this.values=t.slice()}static parse(t){if(t instanceof Wi)return t;if(Array.isArray(t)&&!(t.length<1)&&t.length%2==0){for(let s=0;s<t.length;s+=2){const A=t[s],p=t[s+1];if(typeof A!="string"||!_s.has(A)||!Array.isArray(p)||p.length!==2||typeof p[0]!="number"||typeof p[1]!="number")return}return new Wi(t)}}toString(){return JSON.stringify(this.values)}static interpolate(t,s,A){const p=t.values,v=s.values;if(p.length!==v.length)throw new ii(`Cannot interpolate values of different length. from: ${t.toString()}, to: ${s.toString()}`);const _=[];for(let B=0;B<p.length;B+=2){if(p[B]!==v[B])throw new ii(`Cannot interpolate values containing mismatched anchors. from[${B}]: ${p[B]}, to[${B}]: ${v[B]}`);_.push(p[B]);const[F,U]=p[B+1],[Q,K]=v[B+1];_.push([ca(F,Q,A),ca(U,K,A)])}return new Wi(_)}}class uo{constructor(t){this.name=t.name,this.available=t.available}toString(){return this.name}static fromString(t){return t?new uo({name:t,available:!1}):null}}class ws{constructor(t,s,A){this.from=t,this.to=s,this.transition=A}static interpolate(t,s,A){return new ws(t,s,A)}static parse(t){return t instanceof ws?t:Array.isArray(t)&&t.length===3&&typeof t[0]=="string"&&typeof t[1]=="string"&&typeof t[2]=="number"?new ws(t[0],t[1],t[2]):typeof t=="object"&&typeof t.from=="string"&&typeof t.to=="string"&&typeof t.transition=="number"?new ws(t.from,t.to,t.transition):typeof t=="string"?new ws(t,t,1):void 0}}function Sa(l,t,s,A){return typeof l=="number"&&l>=0&&l<=255&&typeof t=="number"&&t>=0&&t<=255&&typeof s=="number"&&s>=0&&s<=255?A===void 0||typeof A=="number"&&A>=0&&A<=1?null:`Invalid rgba value [${[l,t,s,A].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof A=="number"?[l,t,s,A]:[l,t,s]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function Fa(l){if(l===null||typeof l=="string"||typeof l=="boolean"||typeof l=="number"||l instanceof ws||l instanceof an||l instanceof Ea||l instanceof vs||l instanceof Wr||l instanceof Jn||l instanceof cn||l instanceof Wi||l instanceof uo)return!0;if(Array.isArray(l)){for(const t of l)if(!Fa(t))return!1;return!0}if(typeof l=="object"){for(const t in l)if(!Fa(l[t]))return!1;return!0}return!1}function ti(l){if(l===null)return ns;if(typeof l=="string")return nn;if(typeof l=="boolean")return hn;if(typeof l=="number")return pr;if(l instanceof an)return Di;if(l instanceof ws)return El;if(l instanceof Ea)return ol;if(l instanceof vs)return al;if(l instanceof Wr)return ec;if(l instanceof Jn)return fi;if(l instanceof cn)return Ec;if(l instanceof Wi)return Sl;if(l instanceof uo)return tc;if(Array.isArray(l)){const t=l.length;let s;for(const A of l){const p=ti(A);if(s){if(s===p)continue;s=dn;break}s=p}return Ci(s||dn,t)}return ks}function Aa(l){const t=typeof l;return l===null?"":t==="string"||t==="number"||t==="boolean"?String(l):l instanceof an||l instanceof ws||l instanceof vs||l instanceof Wr||l instanceof Jn||l instanceof cn||l instanceof Wi||l instanceof uo?l.toString():JSON.stringify(l)}class Zi{constructor(t,s){this.type=t,this.value=s}static parse(t,s){if(t.length!==2)return s.error(`'literal' expression requires exactly one argument, but found ${t.length-1} instead.`);if(!Fa(t[1]))return s.error("invalid value");const A=t[1];let p=ti(A);const v=s.expectedType;return p.kind!=="array"||p.N!==0||!v||v.kind!=="array"||typeof v.N=="number"&&v.N!==0||(p=v),new Zi(p,A)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}}const ic={string:nn,number:pr,boolean:hn,object:ks};class qs{constructor(t,s){this.type=t,this.args=s}static parse(t,s){if(t.length<2)return s.error("Expected at least one argument.");let A,p=1;const v=t[0];if(v==="array"){let B,F;if(t.length>2){const U=t[1];if(typeof U!="string"||!(U in ic)||U==="object")return s.error('The item type argument of "array" must be one of string, number, boolean',1);B=ic[U],p++}else B=dn;if(t.length>3){if(t[2]!==null&&(typeof t[2]!="number"||t[2]<0||t[2]!==Math.floor(t[2])))return s.error('The length argument to "array" must be a positive integer literal',2);F=t[2],p++}A=Ci(B,F)}else{if(!ic[v])throw new Error(`Types doesn't contain name = ${v}`);A=ic[v]}const _=[];for(;p<t.length;p++){const B=s.parse(t[p],p,dn);if(!B)return null;_.push(B)}return new qs(A,_)}evaluate(t){for(let s=0;s<this.args.length;s++){const A=this.args[s].evaluate(t);if(!ll(this.type,ti(A)))return A;if(s===this.args.length-1)throw new ii(`Expected value to be of type ${jn(this.type)}, but found ${jn(ti(A))} instead.`)}throw new Error}eachChild(t){this.args.forEach(t)}outputDefined(){return this.args.every((t=>t.outputDefined()))}}const ul={"to-boolean":hn,"to-color":Di,"to-number":pr,"to-string":nn};class jo{constructor(t,s){this.type=t,this.args=s}static parse(t,s){if(t.length<2)return s.error("Expected at least one argument.");const A=t[0];if(!ul[A])throw new Error(`Can't parse ${A} as it is not part of the known types`);if((A==="to-boolean"||A==="to-string")&&t.length!==2)return s.error("Expected one argument.");const p=ul[A],v=[];for(let _=1;_<t.length;_++){const B=s.parse(t[_],_,dn);if(!B)return null;v.push(B)}return new jo(p,v)}evaluate(t){switch(this.type.kind){case"boolean":return!!this.args[0].evaluate(t);case"color":{let s,A;for(const p of this.args){if(s=p.evaluate(t),A=null,s instanceof an)return s;if(typeof s=="string"){const v=t.parseColor(s);if(v)return v}else if(Array.isArray(s)&&(A=s.length<3||s.length>4?`Invalid rgba value ${JSON.stringify(s)}: expected an array containing either three or four numeric values.`:Sa(s[0],s[1],s[2],s[3]),!A))return new an(s[0]/255,s[1]/255,s[2]/255,s[3])}throw new ii(A||`Could not parse color from value '${typeof s=="string"?s:JSON.stringify(s)}'`)}case"padding":{let s;for(const A of this.args){s=A.evaluate(t);const p=Wr.parse(s);if(p)return p}throw new ii(`Could not parse padding from value '${typeof s=="string"?s:JSON.stringify(s)}'`)}case"numberArray":{let s;for(const A of this.args){s=A.evaluate(t);const p=Jn.parse(s);if(p)return p}throw new ii(`Could not parse numberArray from value '${typeof s=="string"?s:JSON.stringify(s)}'`)}case"colorArray":{let s;for(const A of this.args){s=A.evaluate(t);const p=cn.parse(s);if(p)return p}throw new ii(`Could not parse colorArray from value '${typeof s=="string"?s:JSON.stringify(s)}'`)}case"variableAnchorOffsetCollection":{let s;for(const A of this.args){s=A.evaluate(t);const p=Wi.parse(s);if(p)return p}throw new ii(`Could not parse variableAnchorOffsetCollection from value '${typeof s=="string"?s:JSON.stringify(s)}'`)}case"number":{let s=null;for(const A of this.args){if(s=A.evaluate(t),s===null)return 0;const p=Number(s);if(!isNaN(p))return p}throw new ii(`Could not convert ${JSON.stringify(s)} to number.`)}case"formatted":return vs.fromString(Aa(this.args[0].evaluate(t)));case"resolvedImage":return uo.fromString(Aa(this.args[0].evaluate(t)));case"projectionDefinition":return this.args[0].evaluate(t);default:return Aa(this.args[0].evaluate(t))}}eachChild(t){this.args.forEach(t)}outputDefined(){return this.args.every((t=>t.outputDefined()))}}const ua=["Unknown","Point","LineString","Polygon"];class sc{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache=new Map,this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?ua[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(t){let s=this._parseColorCache.get(t);return s||(s=an.parse(t),this._parseColorCache.set(t,s)),s}}class ha{constructor(t,s,A=[],p,v=new sl,_=[]){this.registry=t,this.path=A,this.key=A.map((B=>`[${B}]`)).join(""),this.scope=v,this.errors=_,this.expectedType=p,this._isConstant=s}parse(t,s,A,p,v={}){return s?this.concat(s,A,p)._parse(t,v):this._parse(t,v)}_parse(t,s){function A(p,v,_){return _==="assert"?new qs(v,[p]):_==="coerce"?new jo(v,[p]):p}if(t!==null&&typeof t!="string"&&typeof t!="boolean"&&typeof t!="number"||(t=["literal",t]),Array.isArray(t)){if(t.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const p=t[0];if(typeof p!="string")return this.error(`Expression name must be a string, but found ${typeof p} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const v=this.registry[p];if(v){let _=v.parse(t,this);if(!_)return null;if(this.expectedType){const B=this.expectedType,F=_.type;if(B.kind!=="string"&&B.kind!=="number"&&B.kind!=="boolean"&&B.kind!=="object"&&B.kind!=="array"||F.kind!=="value"){if(B.kind==="projectionDefinition"&&["string","array"].includes(F.kind)||["color","formatted","resolvedImage"].includes(B.kind)&&["value","string"].includes(F.kind)||["padding","numberArray"].includes(B.kind)&&["value","number","array"].includes(F.kind)||B.kind==="colorArray"&&["value","string","array"].includes(F.kind)||B.kind==="variableAnchorOffsetCollection"&&["value","array"].includes(F.kind))_=A(_,B,s.typeAnnotation||"coerce");else if(this.checkSubtype(B,F))return null}else _=A(_,B,s.typeAnnotation||"assert")}if(!(_ instanceof Zi)&&_.type.kind!=="resolvedImage"&&this._isConstant(_)){const B=new sc;try{_=new Zi(_.type,_.evaluate(B))}catch(F){return this.error(F.message),null}}return _}return this.error(`Unknown expression "${p}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(t===void 0?"'undefined' value invalid. Use null instead.":typeof t=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof t} instead.`)}concat(t,s,A){const p=typeof t=="number"?this.path.concat(t):this.path,v=A?this.scope.concat(A):this.scope;return new ha(this.registry,this._isConstant,p,s||null,v,this.errors)}error(t,...s){const A=`${this.key}${s.map((p=>`[${p}]`)).join("")}`;this.errors.push(new $i(A,t))}checkSubtype(t,s){const A=ll(t,s);return A&&this.error(A),A}}class Qn{constructor(t,s){this.type=s.type,this.bindings=[].concat(t),this.result=s}evaluate(t){return this.result.evaluate(t)}eachChild(t){for(const s of this.bindings)t(s[1]);t(this.result)}static parse(t,s){if(t.length<4)return s.error(`Expected at least 3 arguments, but found ${t.length-1} instead.`);const A=[];for(let v=1;v<t.length-1;v+=2){const _=t[v];if(typeof _!="string")return s.error(`Expected string, but found ${typeof _} instead.`,v);if(/[^a-zA-Z0-9_]/.test(_))return s.error("Variable names must contain only alphanumeric characters or '_'.",v);const B=s.parse(t[v+1],v+1);if(!B)return null;A.push([_,B])}const p=s.parse(t[t.length-1],t.length-1,s.expectedType,A);return p?new Qn(A,p):null}outputDefined(){return this.result.outputDefined()}}class Vo{constructor(t,s){this.type=s.type,this.name=t,this.boundExpression=s}static parse(t,s){if(t.length!==2||typeof t[1]!="string")return s.error("'var' expression requires exactly one string literal argument.");const A=t[1];return s.scope.has(A)?new Vo(A,s.scope.get(A)):s.error(`Unknown variable "${A}". Make sure "${A}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(t){return this.boundExpression.evaluate(t)}eachChild(){}outputDefined(){return!1}}class En{constructor(t,s,A){this.type=t,this.index=s,this.input=A}static parse(t,s){if(t.length!==3)return s.error(`Expected 2 arguments, but found ${t.length-1} instead.`);const A=s.parse(t[1],1,pr),p=s.parse(t[2],2,Ci(s.expectedType||dn));return A&&p?new En(p.type.itemType,A,p):null}evaluate(t){const s=this.index.evaluate(t),A=this.input.evaluate(t);if(s<0)throw new ii(`Array index out of bounds: ${s} < 0.`);if(s>=A.length)throw new ii(`Array index out of bounds: ${s} > ${A.length-1}.`);if(s!==Math.floor(s))throw new ii(`Array index must be an integer, but found ${s} instead.`);return A[s]}eachChild(t){t(this.index),t(this.input)}outputDefined(){return!1}}class mn{constructor(t,s){this.type=hn,this.needle=t,this.haystack=s}static parse(t,s){if(t.length!==3)return s.error(`Expected 2 arguments, but found ${t.length-1} instead.`);const A=s.parse(t[1],1,dn),p=s.parse(t[2],2,dn);return A&&p?cl(A.type,[hn,nn,pr,ns,dn])?new mn(A,p):s.error(`Expected first argument to be of type boolean, string, number or null, but found ${jn(A.type)} instead`):null}evaluate(t){const s=this.needle.evaluate(t),A=this.haystack.evaluate(t);if(!A)return!1;if(!Us(s,["boolean","string","number","null"]))throw new ii(`Expected first argument to be of type boolean, string, number or null, but found ${jn(ti(s))} instead.`);if(!Us(A,["string","array"]))throw new ii(`Expected second argument to be of type array or string, but found ${jn(ti(A))} instead.`);return A.indexOf(s)>=0}eachChild(t){t(this.needle),t(this.haystack)}outputDefined(){return!0}}class Ia{constructor(t,s,A){this.type=pr,this.needle=t,this.haystack=s,this.fromIndex=A}static parse(t,s){if(t.length<=2||t.length>=5)return s.error(`Expected 2 or 3 arguments, but found ${t.length-1} instead.`);const A=s.parse(t[1],1,dn),p=s.parse(t[2],2,dn);if(!A||!p)return null;if(!cl(A.type,[hn,nn,pr,ns,dn]))return s.error(`Expected first argument to be of type boolean, string, number or null, but found ${jn(A.type)} instead`);if(t.length===4){const v=s.parse(t[3],3,pr);return v?new Ia(A,p,v):null}return new Ia(A,p)}evaluate(t){const s=this.needle.evaluate(t),A=this.haystack.evaluate(t);if(!Us(s,["boolean","string","number","null"]))throw new ii(`Expected first argument to be of type boolean, string, number or null, but found ${jn(ti(s))} instead.`);let p;if(this.fromIndex&&(p=this.fromIndex.evaluate(t)),Us(A,["string"])){const v=A.indexOf(s,p);return v===-1?-1:[...A.slice(0,v)].length}if(Us(A,["array"]))return A.indexOf(s,p);throw new ii(`Expected second argument to be of type array or string, but found ${jn(ti(A))} instead.`)}eachChild(t){t(this.needle),t(this.haystack),this.fromIndex&&t(this.fromIndex)}outputDefined(){return!1}}class bn{constructor(t,s,A,p,v,_){this.inputType=t,this.type=s,this.input=A,this.cases=p,this.outputs=v,this.otherwise=_}static parse(t,s){if(t.length<5)return s.error(`Expected at least 4 arguments, but found only ${t.length-1}.`);if(t.length%2!=1)return s.error("Expected an even number of arguments.");let A,p;s.expectedType&&s.expectedType.kind!=="value"&&(p=s.expectedType);const v={},_=[];for(let U=2;U<t.length-1;U+=2){let Q=t[U];const K=t[U+1];Array.isArray(Q)||(Q=[Q]);const X=s.concat(U);if(Q.length===0)return X.error("Expected at least one branch label.");for(const oe of Q){if(typeof oe!="number"&&typeof oe!="string")return X.error("Branch labels must be numbers or strings.");if(typeof oe=="number"&&Math.abs(oe)>Number.MAX_SAFE_INTEGER)return X.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof oe=="number"&&Math.floor(oe)!==oe)return X.error("Numeric branch labels must be integer values.");if(A){if(X.checkSubtype(A,ti(oe)))return null}else A=ti(oe);if(v[String(oe)]!==void 0)return X.error("Branch labels must be unique.");v[String(oe)]=_.length}const J=s.parse(K,U,p);if(!J)return null;p=p||J.type,_.push(J)}const B=s.parse(t[1],1,dn);if(!B)return null;const F=s.parse(t[t.length-1],t.length-1,p);return F?B.type.kind!=="value"&&s.concat(1).checkSubtype(A,B.type)?null:new bn(A,p,B,v,_,F):null}evaluate(t){const s=this.input.evaluate(t);return(ti(s)===this.inputType&&this.outputs[this.cases[s]]||this.otherwise).evaluate(t)}eachChild(t){t(this.input),this.outputs.forEach(t),t(this.otherwise)}outputDefined(){return this.outputs.every((t=>t.outputDefined()))&&this.otherwise.outputDefined()}}class Go{constructor(t,s,A){this.type=t,this.branches=s,this.otherwise=A}static parse(t,s){if(t.length<4)return s.error(`Expected at least 3 arguments, but found only ${t.length-1}.`);if(t.length%2!=0)return s.error("Expected an odd number of arguments.");let A;s.expectedType&&s.expectedType.kind!=="value"&&(A=s.expectedType);const p=[];for(let _=1;_<t.length-1;_+=2){const B=s.parse(t[_],_,hn);if(!B)return null;const F=s.parse(t[_+1],_+1,A);if(!F)return null;p.push([B,F]),A=A||F.type}const v=s.parse(t[t.length-1],t.length-1,A);if(!v)return null;if(!A)throw new Error("Can't infer output type");return new Go(A,p,v)}evaluate(t){for(const[s,A]of this.branches)if(s.evaluate(t))return A.evaluate(t);return this.otherwise.evaluate(t)}eachChild(t){for(const[s,A]of this.branches)t(s),t(A);t(this.otherwise)}outputDefined(){return this.branches.every((([t,s])=>s.outputDefined()))&&this.otherwise.outputDefined()}}class Ei{constructor(t,s,A,p){this.type=t,this.input=s,this.beginIndex=A,this.endIndex=p}static parse(t,s){if(t.length<=2||t.length>=5)return s.error(`Expected 2 or 3 arguments, but found ${t.length-1} instead.`);const A=s.parse(t[1],1,dn),p=s.parse(t[2],2,pr);if(!A||!p)return null;if(!cl(A.type,[Ci(dn),nn,dn]))return s.error(`Expected first argument to be of type array or string, but found ${jn(A.type)} instead`);if(t.length===4){const v=s.parse(t[3],3,pr);return v?new Ei(A.type,A,p,v):null}return new Ei(A.type,A,p)}evaluate(t){const s=this.input.evaluate(t),A=this.beginIndex.evaluate(t);let p;if(this.endIndex&&(p=this.endIndex.evaluate(t)),Us(s,["string"]))return[...s].slice(A,p).join("");if(Us(s,["array"]))return s.slice(A,p);throw new ii(`Expected first argument to be of type array or string, but found ${jn(ti(s))} instead.`)}eachChild(t){t(this.input),t(this.beginIndex),this.endIndex&&t(this.endIndex)}outputDefined(){return!1}}function ao(l,t){const s=l.length-1;let A,p,v=0,_=s,B=0;for(;v<=_;)if(B=Math.floor((v+_)/2),A=l[B],p=l[B+1],A<=t){if(B===s||t<p)return B;v=B+1}else{if(!(A>t))throw new ii("Input is not a number.");_=B-1}return 0}class da{constructor(t,s,A){this.type=t,this.input=s,this.labels=[],this.outputs=[];for(const[p,v]of A)this.labels.push(p),this.outputs.push(v)}static parse(t,s){if(t.length-1<4)return s.error(`Expected at least 4 arguments, but found only ${t.length-1}.`);if((t.length-1)%2!=0)return s.error("Expected an even number of arguments.");const A=s.parse(t[1],1,pr);if(!A)return null;const p=[];let v=null;s.expectedType&&s.expectedType.kind!=="value"&&(v=s.expectedType);for(let _=1;_<t.length;_+=2){const B=_===1?-1/0:t[_],F=t[_+1],U=_,Q=_+1;if(typeof B!="number")return s.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',U);if(p.length&&p[p.length-1][0]>=B)return s.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',U);const K=s.parse(F,Q,v);if(!K)return null;v=v||K.type,p.push([B,K])}return new da(v,A,p)}evaluate(t){const s=this.labels,A=this.outputs;if(s.length===1)return A[0].evaluate(t);const p=this.input.evaluate(t);if(p<=s[0])return A[0].evaluate(t);const v=s.length;return p>=s[v-1]?A[v-1].evaluate(t):A[ao(s,p)].evaluate(t)}eachChild(t){t(this.input);for(const s of this.outputs)t(s)}outputDefined(){return this.outputs.every((t=>t.outputDefined()))}}function V(l){return l&&l.__esModule&&Object.prototype.hasOwnProperty.call(l,"default")?l.default:l}var ye,tt,gt=(function(){if(tt)return ye;function l(t,s,A,p){this.cx=3*t,this.bx=3*(A-t)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*s,this.by=3*(p-s)-this.cy,this.ay=1-this.cy-this.by,this.p1x=t,this.p1y=s,this.p2x=A,this.p2y=p}return tt=1,ye=l,l.prototype={sampleCurveX:function(t){return((this.ax*t+this.bx)*t+this.cx)*t},sampleCurveY:function(t){return((this.ay*t+this.by)*t+this.cy)*t},sampleCurveDerivativeX:function(t){return(3*this.ax*t+2*this.bx)*t+this.cx},solveCurveX:function(t,s){if(s===void 0&&(s=1e-6),t<0)return 0;if(t>1)return 1;for(var A=t,p=0;p<8;p++){var v=this.sampleCurveX(A)-t;if(Math.abs(v)<s)return A;var _=this.sampleCurveDerivativeX(A);if(Math.abs(_)<1e-6)break;A-=v/_}var B=0,F=1;for(A=t,p=0;p<20&&(v=this.sampleCurveX(A),!(Math.abs(v-t)<s));p++)t>v?B=A:F=A,A=.5*(F-B)+B;return A},solve:function(t,s){return this.sampleCurveY(this.solveCurveX(t,s))}},ye})(),It=V(gt);class Kt{constructor(t,s,A,p,v){this.type=t,this.operator=s,this.interpolation=A,this.input=p,this.labels=[],this.outputs=[];for(const[_,B]of v)this.labels.push(_),this.outputs.push(B)}static interpolationFactor(t,s,A,p){let v=0;if(t.name==="exponential")v=sr(s,t.base,A,p);else if(t.name==="linear")v=sr(s,1,A,p);else if(t.name==="cubic-bezier"){const _=t.controlPoints;v=new It(_[0],_[1],_[2],_[3]).solve(sr(s,1,A,p))}return v}static parse(t,s){let[A,p,v,..._]=t;if(!Array.isArray(p)||p.length===0)return s.error("Expected an interpolation type expression.",1);if(p[0]==="linear")p={name:"linear"};else if(p[0]==="exponential"){const U=p[1];if(typeof U!="number")return s.error("Exponential interpolation requires a numeric base.",1,1);p={name:"exponential",base:U}}else{if(p[0]!=="cubic-bezier")return s.error(`Unknown interpolation type ${String(p[0])}`,1,0);{const U=p.slice(1);if(U.length!==4||U.some((Q=>typeof Q!="number"||Q<0||Q>1)))return s.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);p={name:"cubic-bezier",controlPoints:U}}}if(t.length-1<4)return s.error(`Expected at least 4 arguments, but found only ${t.length-1}.`);if((t.length-1)%2!=0)return s.error("Expected an even number of arguments.");if(v=s.parse(v,2,pr),!v)return null;const B=[];let F=null;A!=="interpolate-hcl"&&A!=="interpolate-lab"||s.expectedType==Ec?s.expectedType&&s.expectedType.kind!=="value"&&(F=s.expectedType):F=Di;for(let U=0;U<_.length;U+=2){const Q=_[U],K=_[U+1],X=U+3,J=U+4;if(typeof Q!="number")return s.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',X);if(B.length&&B[B.length-1][0]>=Q)return s.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',X);const oe=s.parse(K,J,F);if(!oe)return null;F=F||oe.type,B.push([Q,oe])}return Ro(F,pr)||Ro(F,El)||Ro(F,Di)||Ro(F,ec)||Ro(F,fi)||Ro(F,Ec)||Ro(F,Sl)||Ro(F,Ci(pr))?new Kt(F,A,p,v,B):s.error(`Type ${jn(F)} is not interpolatable.`)}evaluate(t){const s=this.labels,A=this.outputs;if(s.length===1)return A[0].evaluate(t);const p=this.input.evaluate(t);if(p<=s[0])return A[0].evaluate(t);const v=s.length;if(p>=s[v-1])return A[v-1].evaluate(t);const _=ao(s,p),B=Kt.interpolationFactor(this.interpolation,p,s[_],s[_+1]),F=A[_].evaluate(t),U=A[_+1].evaluate(t);switch(this.operator){case"interpolate":switch(this.type.kind){case"number":return ca(F,U,B);case"color":return an.interpolate(F,U,B);case"padding":return Wr.interpolate(F,U,B);case"colorArray":return cn.interpolate(F,U,B);case"numberArray":return Jn.interpolate(F,U,B);case"variableAnchorOffsetCollection":return Wi.interpolate(F,U,B);case"array":return Al(F,U,B);case"projectionDefinition":return ws.interpolate(F,U,B)}case"interpolate-hcl":switch(this.type.kind){case"color":return an.interpolate(F,U,B,"hcl");case"colorArray":return cn.interpolate(F,U,B,"hcl")}case"interpolate-lab":switch(this.type.kind){case"color":return an.interpolate(F,U,B,"lab");case"colorArray":return cn.interpolate(F,U,B,"lab")}}}eachChild(t){t(this.input);for(const s of this.outputs)t(s)}outputDefined(){return this.outputs.every((t=>t.outputDefined()))}}function sr(l,t,s,A){const p=A-s,v=l-s;return p===0?0:t===1?v/p:(Math.pow(t,v)-1)/(Math.pow(t,p)-1)}const Br={color:an.interpolate,number:ca,padding:Wr.interpolate,numberArray:Jn.interpolate,colorArray:cn.interpolate,variableAnchorOffsetCollection:Wi.interpolate,array:Al};class Kr{constructor(t,s){this.type=t,this.args=s}static parse(t,s){if(t.length<2)return s.error("Expected at least one argument.");let A=null;const p=s.expectedType;p&&p.kind!=="value"&&(A=p);const v=[];for(const B of t.slice(1)){const F=s.parse(B,1+v.length,A,void 0,{typeAnnotation:"omit"});if(!F)return null;A=A||F.type,v.push(F)}if(!A)throw new Error("No output type");const _=p&&v.some((B=>ll(p,B.type)));return new Kr(_?dn:A,v)}evaluate(t){let s,A=null,p=0;for(const v of this.args)if(p++,A=v.evaluate(t),A&&A instanceof uo&&!A.available&&(s||(s=A.name),A=null,p===this.args.length&&(A=s)),A!==null)break;return A}eachChild(t){this.args.forEach(t)}outputDefined(){return this.args.every((t=>t.outputDefined()))}}function gn(l,t){return l==="=="||l==="!="?t.kind==="boolean"||t.kind==="string"||t.kind==="number"||t.kind==="null"||t.kind==="value":t.kind==="string"||t.kind==="number"||t.kind==="value"}function yn(l,t,s,A){return A.compare(t,s)===0}function An(l,t,s){const A=l!=="=="&&l!=="!=";return class CF{constructor(v,_,B){this.type=hn,this.lhs=v,this.rhs=_,this.collator=B,this.hasUntypedArgument=v.type.kind==="value"||_.type.kind==="value"}static parse(v,_){if(v.length!==3&&v.length!==4)return _.error("Expected two or three arguments.");const B=v[0];let F=_.parse(v[1],1,dn);if(!F)return null;if(!gn(B,F.type))return _.concat(1).error(`"${B}" comparisons are not supported for type '${jn(F.type)}'.`);let U=_.parse(v[2],2,dn);if(!U)return null;if(!gn(B,U.type))return _.concat(2).error(`"${B}" comparisons are not supported for type '${jn(U.type)}'.`);if(F.type.kind!==U.type.kind&&F.type.kind!=="value"&&U.type.kind!=="value")return _.error(`Cannot compare types '${jn(F.type)}' and '${jn(U.type)}'.`);A&&(F.type.kind==="value"&&U.type.kind!=="value"?F=new qs(U.type,[F]):F.type.kind!=="value"&&U.type.kind==="value"&&(U=new qs(F.type,[U])));let Q=null;if(v.length===4){if(F.type.kind!=="string"&&U.type.kind!=="string"&&F.type.kind!=="value"&&U.type.kind!=="value")return _.error("Cannot use collator to compare non-string types.");if(Q=_.parse(v[3],3,ol),!Q)return null}return new CF(F,U,Q)}evaluate(v){const _=this.lhs.evaluate(v),B=this.rhs.evaluate(v);if(A&&this.hasUntypedArgument){const F=ti(_),U=ti(B);if(F.kind!==U.kind||F.kind!=="string"&&F.kind!=="number")throw new ii(`Expected arguments for "${l}" to be (string, string) or (number, number), but found (${F.kind}, ${U.kind}) instead.`)}if(this.collator&&!A&&this.hasUntypedArgument){const F=ti(_),U=ti(B);if(F.kind!=="string"||U.kind!=="string")return t(v,_,B)}return this.collator?s(v,_,B,this.collator.evaluate(v)):t(v,_,B)}eachChild(v){v(this.lhs),v(this.rhs),this.collator&&v(this.collator)}outputDefined(){return!0}}}const Hi=An("==",(function(l,t,s){return t===s}),yn),is=An("!=",(function(l,t,s){return t!==s}),(function(l,t,s,A){return!yn(0,t,s,A)})),Si=An("<",(function(l,t,s){return t<s}),(function(l,t,s,A){return A.compare(t,s)<0})),Ds=An(">",(function(l,t,s){return t>s}),(function(l,t,s,A){return A.compare(t,s)>0})),Li=An("<=",(function(l,t,s){return t<=s}),(function(l,t,s,A){return A.compare(t,s)<=0})),xs=An(">=",(function(l,t,s){return t>=s}),(function(l,t,s,A){return A.compare(t,s)>=0}));class Ko{constructor(t,s,A){this.type=ol,this.locale=A,this.caseSensitive=t,this.diacriticSensitive=s}static parse(t,s){if(t.length!==2)return s.error("Expected one argument.");const A=t[1];if(typeof A!="object"||Array.isArray(A))return s.error("Collator options argument must be an object.");const p=s.parse(A["case-sensitive"]!==void 0&&A["case-sensitive"],1,hn);if(!p)return null;const v=s.parse(A["diacritic-sensitive"]!==void 0&&A["diacritic-sensitive"],1,hn);if(!v)return null;let _=null;return A.locale&&(_=s.parse(A.locale,1,nn),!_)?null:new Ko(p,v,_)}evaluate(t){return new Ea(this.caseSensitive.evaluate(t),this.diacriticSensitive.evaluate(t),this.locale?this.locale.evaluate(t):null)}eachChild(t){t(this.caseSensitive),t(this.diacriticSensitive),this.locale&&t(this.locale)}outputDefined(){return!1}}class fa{constructor(t,s,A,p,v){this.type=nn,this.number=t,this.locale=s,this.currency=A,this.minFractionDigits=p,this.maxFractionDigits=v}static parse(t,s){if(t.length!==3)return s.error("Expected two arguments.");const A=s.parse(t[1],1,pr);if(!A)return null;const p=t[2];if(typeof p!="object"||Array.isArray(p))return s.error("NumberFormat options argument must be an object.");let v=null;if(p.locale&&(v=s.parse(p.locale,1,nn),!v))return null;let _=null;if(p.currency&&(_=s.parse(p.currency,1,nn),!_))return null;let B=null;if(p["min-fraction-digits"]&&(B=s.parse(p["min-fraction-digits"],1,pr),!B))return null;let F=null;return p["max-fraction-digits"]&&(F=s.parse(p["max-fraction-digits"],1,pr),!F)?null:new fa(A,v,_,B,F)}evaluate(t){return new Intl.NumberFormat(this.locale?this.locale.evaluate(t):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(t):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(t):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(t):void 0}).format(this.number.evaluate(t))}eachChild(t){t(this.number),this.locale&&t(this.locale),this.currency&&t(this.currency),this.minFractionDigits&&t(this.minFractionDigits),this.maxFractionDigits&&t(this.maxFractionDigits)}outputDefined(){return!1}}class pa{constructor(t){this.type=al,this.sections=t}static parse(t,s){if(t.length<2)return s.error("Expected at least one argument.");const A=t[1];if(!Array.isArray(A)&&typeof A=="object")return s.error("First argument must be an image or text section.");const p=[];let v=!1;for(let _=1;_<=t.length-1;++_){const B=t[_];if(v&&typeof B=="object"&&!Array.isArray(B)){v=!1;let F=null;if(B["font-scale"]&&(F=s.parse(B["font-scale"],1,pr),!F))return null;let U=null;if(B["text-font"]&&(U=s.parse(B["text-font"],1,Ci(nn)),!U))return null;let Q=null;if(B["text-color"]&&(Q=s.parse(B["text-color"],1,Di),!Q))return null;let K=null;if(B["vertical-align"]){if(typeof B["vertical-align"]=="string"&&!zo.includes(B["vertical-align"]))return s.error(`'vertical-align' must be one of: 'bottom', 'center', 'top' but found '${B["vertical-align"]}' instead.`);if(K=s.parse(B["vertical-align"],1,nn),!K)return null}const X=p[p.length-1];X.scale=F,X.font=U,X.textColor=Q,X.verticalAlign=K}else{const F=s.parse(t[_],1,dn);if(!F)return null;const U=F.type.kind;if(U!=="string"&&U!=="value"&&U!=="null"&&U!=="resolvedImage")return s.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");v=!0,p.push({content:F,scale:null,font:null,textColor:null,verticalAlign:null})}}return new pa(p)}evaluate(t){return new vs(this.sections.map((s=>{const A=s.content.evaluate(t);return ti(A)===tc?new Ho("",A,null,null,null,s.verticalAlign?s.verticalAlign.evaluate(t):null):new Ho(Aa(A),null,s.scale?s.scale.evaluate(t):null,s.font?s.font.evaluate(t).join(","):null,s.textColor?s.textColor.evaluate(t):null,s.verticalAlign?s.verticalAlign.evaluate(t):null)})))}eachChild(t){for(const s of this.sections)t(s.content),s.scale&&t(s.scale),s.font&&t(s.font),s.textColor&&t(s.textColor),s.verticalAlign&&t(s.verticalAlign)}outputDefined(){return!1}}class Ta{constructor(t){this.type=tc,this.input=t}static parse(t,s){if(t.length!==2)return s.error("Expected two arguments.");const A=s.parse(t[1],1,nn);return A?new Ta(A):s.error("No image name provided.")}evaluate(t){const s=this.input.evaluate(t),A=uo.fromString(s);return A&&t.availableImages&&(A.available=t.availableImages.indexOf(s)>-1),A}eachChild(t){t(this.input)}outputDefined(){return!1}}class hl{constructor(t){this.type=pr,this.input=t}static parse(t,s){if(t.length!==2)return s.error(`Expected 1 argument, but found ${t.length-1} instead.`);const A=s.parse(t[1],1);return A?A.type.kind!=="array"&&A.type.kind!=="string"&&A.type.kind!=="value"?s.error(`Expected argument of type string or array, but found ${jn(A.type)} instead.`):new hl(A):null}evaluate(t){const s=this.input.evaluate(t);if(typeof s=="string")return[...s].length;if(Array.isArray(s))return s.length;throw new ii(`Expected value to be of type string or array, but found ${jn(ti(s))} instead.`)}eachChild(t){t(this.input)}outputDefined(){return!1}}const Fi=8192;function Tc(l,t){const s=(180+l[0])/360,A=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+l[1]*Math.PI/360)))/360,p=Math.pow(2,t.z);return[Math.round(s*p*Fi),Math.round(A*p*Fi)]}function ma(l,t){const s=Math.pow(2,t.z);return[(p=(l[0]/Fi+t.x)/s,360*p-180),(A=(l[1]/Fi+t.y)/s,360/Math.PI*Math.atan(Math.exp((180-360*A)*Math.PI/180))-90)];var A,p}function Pa(l,t){l[0]=Math.min(l[0],t[0]),l[1]=Math.min(l[1],t[1]),l[2]=Math.max(l[2],t[0]),l[3]=Math.max(l[3],t[1])}function Xi(l,t){return!(l[0]<=t[0]||l[2]>=t[2]||l[1]<=t[1]||l[3]>=t[3])}function sA(l,t,s){const A=l[0]-t[0],p=l[1]-t[1],v=l[0]-s[0],_=l[1]-s[1];return A*_-v*p==0&&A*v<=0&&p*_<=0}function Tl(l,t,s,A){return(p=[A[0]-s[0],A[1]-s[1]])[0]*(v=[t[0]-l[0],t[1]-l[1]])[1]-p[1]*v[0]!=0&&!(!LA(l,t,s,A)||!LA(s,A,l,t));var p,v}function ou(l,t,s){for(const A of s)for(let p=0;p<A.length-1;++p)if(Tl(l,t,A[p],A[p+1]))return!0;return!1}function Pl(l,t,s=!1){let A=!1;for(const B of t)for(let F=0;F<B.length-1;F++){if(sA(l,B[F],B[F+1]))return s;(v=B[F])[1]>(p=l)[1]!=(_=B[F+1])[1]>p[1]&&p[0]<(_[0]-v[0])*(p[1]-v[1])/(_[1]-v[1])+v[0]&&(A=!A)}var p,v,_;return A}function $s(l,t){for(const s of t)if(Pl(l,s))return!0;return!1}function La(l,t){for(const s of l)if(!Pl(s,t))return!1;for(let s=0;s<l.length-1;++s)if(ou(l[s],l[s+1],t))return!1;return!0}function dl(l,t){for(const s of t)if(La(l,s))return!0;return!1}function LA(l,t,s,A){const p=A[0]-s[0],v=A[1]-s[1],_=(l[0]-s[0])*v-p*(l[1]-s[1]),B=(t[0]-s[0])*v-p*(t[1]-s[1]);return _>0&&B<0||_<0&&B>0}function Bo(l,t,s){const A=[];for(let p=0;p<l.length;p++){const v=[];for(let _=0;_<l[p].length;_++){const B=Tc(l[p][_],s);Pa(t,B),v.push(B)}A.push(v)}return A}function Ll(l,t,s){const A=[];for(let p=0;p<l.length;p++){const v=Bo(l[p],t,s);A.push(v)}return A}function oA(l,t,s,A){if(l[0]<s[0]||l[0]>s[2]){const p=.5*A;let v=l[0]-s[0]>p?-A:s[0]-l[0]>p?A:0;v===0&&(v=l[0]-s[2]>p?-A:s[2]-l[0]>p?A:0),l[0]+=v}Pa(t,l)}function aA(l,t,s,A){const p=Math.pow(2,A.z)*Fi,v=[A.x*Fi,A.y*Fi],_=[];for(const B of l)for(const F of B){const U=[F.x+v[0],F.y+v[1]];oA(U,t,s,p),_.push(U)}return _}function Ml(l,t,s,A){const p=Math.pow(2,A.z)*Fi,v=[A.x*Fi,A.y*Fi],_=[];for(const F of l){const U=[];for(const Q of F){const K=[Q.x+v[0],Q.y+v[1]];Pa(t,K),U.push(K)}_.push(U)}if(t[2]-t[0]<=p/2){(B=t)[0]=B[1]=1/0,B[2]=B[3]=-1/0;for(const F of _)for(const U of F)oA(U,t,s,p)}var B;return _}class Ws{constructor(t,s){this.type=hn,this.geojson=t,this.geometries=s}static parse(t,s){if(t.length!==2)return s.error(`'within' expression requires exactly one argument, but found ${t.length-1} instead.`);if(Fa(t[1])){const A=t[1];if(A.type==="FeatureCollection"){const p=[];for(const v of A.features){const{type:_,coordinates:B}=v.geometry;_==="Polygon"&&p.push(B),_==="MultiPolygon"&&p.push(...B)}if(p.length)return new Ws(A,{type:"MultiPolygon",coordinates:p})}else if(A.type==="Feature"){const p=A.geometry.type;if(p==="Polygon"||p==="MultiPolygon")return new Ws(A,A.geometry)}else if(A.type==="Polygon"||A.type==="MultiPolygon")return new Ws(A,A)}return s.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(t){if(t.geometry()!=null&&t.canonicalID()!=null){if(t.geometryType()==="Point")return(function(s,A){const p=[1/0,1/0,-1/0,-1/0],v=[1/0,1/0,-1/0,-1/0],_=s.canonicalID();if(A.type==="Polygon"){const B=Bo(A.coordinates,v,_),F=aA(s.geometry(),p,v,_);if(!Xi(p,v))return!1;for(const U of F)if(!Pl(U,B))return!1}if(A.type==="MultiPolygon"){const B=Ll(A.coordinates,v,_),F=aA(s.geometry(),p,v,_);if(!Xi(p,v))return!1;for(const U of F)if(!$s(U,B))return!1}return!0})(t,this.geometries);if(t.geometryType()==="LineString")return(function(s,A){const p=[1/0,1/0,-1/0,-1/0],v=[1/0,1/0,-1/0,-1/0],_=s.canonicalID();if(A.type==="Polygon"){const B=Bo(A.coordinates,v,_),F=Ml(s.geometry(),p,v,_);if(!Xi(p,v))return!1;for(const U of F)if(!La(U,B))return!1}if(A.type==="MultiPolygon"){const B=Ll(A.coordinates,v,_),F=Ml(s.geometry(),p,v,_);if(!Xi(p,v))return!1;for(const U of F)if(!dl(U,B))return!1}return!0})(t,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}}let qo=class{constructor(l=[],t=(s,A)=>s<A?-1:s>A?1:0){if(this.data=l,this.length=this.data.length,this.compare=t,this.length>0)for(let s=(this.length>>1)-1;s>=0;s--)this._down(s)}push(l){this.data.push(l),this._up(this.length++)}pop(){if(this.length===0)return;const l=this.data[0],t=this.data.pop();return--this.length>0&&(this.data[0]=t,this._down(0)),l}peek(){return this.data[0]}_up(l){const{data:t,compare:s}=this,A=t[l];for(;l>0;){const p=l-1>>1,v=t[p];if(s(A,v)>=0)break;t[l]=v,l=p}t[l]=A}_down(l){const{data:t,compare:s}=this,A=this.length>>1,p=t[l];for(;l<A;){let v=1+(l<<1);const _=v+1;if(_<this.length&&s(t[_],t[v])<0&&(v=_),s(t[v],p)>=0)break;t[l]=t[v],l=v}t[l]=p}};function Co(l,t,s=0,A=l.length-1,p=fl){for(;A>s;){if(A-s>600){const F=A-s+1,U=t-s+1,Q=Math.log(F),K=.5*Math.exp(2*Q/3),X=.5*Math.sqrt(Q*K*(F-K)/F)*(U-F/2<0?-1:1);Co(l,t,Math.max(s,Math.floor(t-U*K/F+X)),Math.min(A,Math.floor(t+(F-U)*K/F+X)),p)}const v=l[t];let _=s,B=A;for(ga(l,s,t),p(l[A],v)>0&&ga(l,s,A);_<B;){for(ga(l,_,B),_++,B--;p(l[_],v)<0;)_++;for(;p(l[B],v)>0;)B--}p(l[s],v)===0?ga(l,s,B):(B++,ga(l,B,A)),B<=t&&(s=B+1),t<=B&&(A=B-1)}}function ga(l,t,s){const A=l[t];l[t]=l[s],l[s]=A}function fl(l,t){return l<t?-1:l>t?1:0}function Ma(l,t){if(l.length<=1)return[l];const s=[];let A,p;for(const v of l){const _=kl(v);_!==0&&(v.area=Math.abs(_),p===void 0&&(p=_<0),p===_<0?(A&&s.push(A),A=[v]):A.push(v))}if(A&&s.push(A),t>1)for(let v=0;v<s.length;v++)s[v].length<=t||(Co(s[v],t,1,s[v].length-1,oc),s[v]=s[v].slice(0,t));return s}function oc(l,t){return t.area-l.area}function kl(l){let t=0;for(let s,A,p=0,v=l.length,_=v-1;p<v;_=p++)s=l[p],A=l[_],t+=(A.x-s.x)*(s.y+A.y);return t}const ss=1/298.257223563,pl=ss*(2-ss),ml=Math.PI/180;class ya{constructor(t){const s=6378.137*ml*1e3,A=Math.cos(t*ml),p=1/(1-pl*(1-A*A)),v=Math.sqrt(p);this.kx=s*v*A,this.ky=s*v*p*(1-pl)}distance(t,s){const A=this.wrap(t[0]-s[0])*this.kx,p=(t[1]-s[1])*this.ky;return Math.sqrt(A*A+p*p)}pointOnLine(t,s){let A,p,v,_,B=1/0;for(let F=0;F<t.length-1;F++){let U=t[F][0],Q=t[F][1],K=this.wrap(t[F+1][0]-U)*this.kx,X=(t[F+1][1]-Q)*this.ky,J=0;K===0&&X===0||(J=(this.wrap(s[0]-U)*this.kx*K+(s[1]-Q)*this.ky*X)/(K*K+X*X),J>1?(U=t[F+1][0],Q=t[F+1][1]):J>0&&(U+=K/this.kx*J,Q+=X/this.ky*J)),K=this.wrap(s[0]-U)*this.kx,X=(s[1]-Q)*this.ky;const oe=K*K+X*X;oe<B&&(B=oe,A=U,p=Q,v=F,_=J)}return{point:[A,p],index:v,t:Math.max(0,Math.min(1,_))}}wrap(t){for(;t<-180;)t+=360;for(;t>180;)t-=360;return t}}function Pc(l,t){return t[0]-l[0]}function Ul(l){return l[1]-l[0]+1}function ho(l,t){return l[1]>=l[0]&&l[1]<t}function ac(l,t){if(l[0]>l[1])return[null,null];const s=Ul(l);if(t){if(s===2)return[l,null];const p=Math.floor(s/2);return[[l[0],l[0]+p],[l[0]+p,l[1]]]}if(s===1)return[l,null];const A=Math.floor(s/2)-1;return[[l[0],l[0]+A],[l[0]+A+1,l[1]]]}function gl(l,t){if(!ho(t,l.length))return[1/0,1/0,-1/0,-1/0];const s=[1/0,1/0,-1/0,-1/0];for(let A=t[0];A<=t[1];++A)Pa(s,l[A]);return s}function Dl(l){const t=[1/0,1/0,-1/0,-1/0];for(const s of l)for(const A of s)Pa(t,A);return t}function Rl(l){return l[0]!==-1/0&&l[1]!==-1/0&&l[2]!==1/0&&l[3]!==1/0}function Nl(l,t,s){if(!Rl(l)||!Rl(t))return NaN;let A=0,p=0;return l[2]<t[0]&&(A=t[0]-l[2]),l[0]>t[2]&&(A=l[0]-t[2]),l[1]>t[3]&&(p=l[1]-t[3]),l[3]<t[1]&&(p=t[1]-l[3]),s.distance([0,0],[A,p])}function $o(l,t,s){const A=s.pointOnLine(t,l);return s.distance(l,A.point)}function lc(l,t,s,A,p){const v=Math.min($o(l,[s,A],p),$o(t,[s,A],p)),_=Math.min($o(s,[l,t],p),$o(A,[l,t],p));return Math.min(v,_)}function os(l,t,s,A,p){if(!ho(t,l.length)||!ho(A,s.length))return 1/0;let v=1/0;for(let _=t[0];_<t[1];++_){const B=l[_],F=l[_+1];for(let U=A[0];U<A[1];++U){const Q=s[U],K=s[U+1];if(Tl(B,F,Q,K))return 0;v=Math.min(v,lc(B,F,Q,K,p))}}return v}function Eo(l,t,s,A,p){if(!ho(t,l.length)||!ho(A,s.length))return NaN;let v=1/0;for(let _=t[0];_<=t[1];++_)for(let B=A[0];B<=A[1];++B)if(v=Math.min(v,p.distance(l[_],s[B])),v===0)return v;return v}function si(l,t,s){if(Pl(l,t,!0))return 0;let A=1/0;for(const p of t){const v=p[0],_=p[p.length-1];if(v!==_&&(A=Math.min(A,$o(l,[_,v],s)),A===0))return A;const B=s.pointOnLine(p,l);if(A=Math.min(A,s.distance(l,B.point)),A===0)return A}return A}function _i(l,t,s,A){if(!ho(t,l.length))return NaN;for(let v=t[0];v<=t[1];++v)if(Pl(l[v],s,!0))return 0;let p=1/0;for(let v=t[0];v<t[1];++v){const _=l[v],B=l[v+1];for(const F of s)for(let U=0,Q=F.length,K=Q-1;U<Q;K=U++){const X=F[K],J=F[U];if(Tl(_,B,X,J))return 0;p=Math.min(p,lc(_,B,X,J,A))}}return p}function Yi(l,t){for(const s of l)for(const A of s)if(Pl(A,t,!0))return!0;return!1}function bs(l,t,s,A=1/0){const p=Dl(l),v=Dl(t);if(A!==1/0&&Nl(p,v,s)>=A)return A;if(Xi(p,v)){if(Yi(l,t))return 0}else if(Yi(t,l))return 0;let _=1/0;for(const B of l)for(let F=0,U=B.length,Q=U-1;F<U;Q=F++){const K=B[Q],X=B[F];for(const J of t)for(let oe=0,le=J.length,he=le-1;oe<le;he=oe++){const be=J[he],rt=J[oe];if(Tl(K,X,be,rt))return 0;_=Math.min(_,lc(K,X,be,rt,s))}}return _}function Pn(l,t,s,A,p,v){if(!v)return;const _=Nl(gl(A,v),p,s);_<t&&l.push([_,v,[0,0]])}function Lc(l,t,s,A,p,v,_){if(!v||!_)return;const B=Nl(gl(A,v),gl(p,_),s);B<t&&l.push([B,v,_])}function cc(l,t,s,A,p=1/0){let v=Math.min(A.distance(l[0],s[0][0]),p);if(v===0)return v;const _=new qo([[0,[0,l.length-1],[0,0]]],Pc),B=Dl(s);for(;_.length>0;){const F=_.pop();if(F[0]>=v)continue;const U=F[1],Q=t?50:100;if(Ul(U)<=Q){if(!ho(U,l.length))return NaN;if(t){const K=_i(l,U,s,A);if(isNaN(K)||K===0)return K;v=Math.min(v,K)}else for(let K=U[0];K<=U[1];++K){const X=si(l[K],s,A);if(v=Math.min(v,X),v===0)return 0}}else{const K=ac(U,t);Pn(_,v,A,l,B,K[0]),Pn(_,v,A,l,B,K[1])}}return v}function ka(l,t,s,A,p,v=1/0){let _=Math.min(v,p.distance(l[0],s[0]));if(_===0)return _;const B=new qo([[0,[0,l.length-1],[0,s.length-1]]],Pc);for(;B.length>0;){const F=B.pop();if(F[0]>=_)continue;const U=F[1],Q=F[2],K=t?50:100,X=A?50:100;if(Ul(U)<=K&&Ul(Q)<=X){if(!ho(U,l.length)&&ho(Q,s.length))return NaN;let J;if(t&&A)J=os(l,U,s,Q,p),_=Math.min(_,J);else if(t&&!A){const oe=l.slice(U[0],U[1]+1);for(let le=Q[0];le<=Q[1];++le)if(J=$o(s[le],oe,p),_=Math.min(_,J),_===0)return _}else if(!t&&A){const oe=s.slice(Q[0],Q[1]+1);for(let le=U[0];le<=U[1];++le)if(J=$o(l[le],oe,p),_=Math.min(_,J),_===0)return _}else J=Eo(l,U,s,Q,p),_=Math.min(_,J)}else{const J=ac(U,t),oe=ac(Q,A);Lc(B,_,p,l,s,J[0],oe[0]),Lc(B,_,p,l,s,J[0],oe[1]),Lc(B,_,p,l,s,J[1],oe[0]),Lc(B,_,p,l,s,J[1],oe[1])}}return _}function MA(l){return l.type==="MultiPolygon"?l.coordinates.map((t=>({type:"Polygon",coordinates:t}))):l.type==="MultiLineString"?l.coordinates.map((t=>({type:"LineString",coordinates:t}))):l.type==="MultiPoint"?l.coordinates.map((t=>({type:"Point",coordinates:t}))):[l]}class Ua{constructor(t,s){this.type=pr,this.geojson=t,this.geometries=s}static parse(t,s){if(t.length!==2)return s.error(`'distance' expression requires exactly one argument, but found ${t.length-1} instead.`);if(Fa(t[1])){const A=t[1];if(A.type==="FeatureCollection")return new Ua(A,A.features.map((p=>MA(p.geometry))).flat());if(A.type==="Feature")return new Ua(A,MA(A.geometry));if("type"in A&&"coordinates"in A)return new Ua(A,MA(A))}return s.error("'distance' expression requires valid geojson object that contains polygon geometry type.")}evaluate(t){if(t.geometry()!=null&&t.canonicalID()!=null){if(t.geometryType()==="Point")return(function(s,A){const p=s.geometry(),v=p.flat().map((F=>ma([F.x,F.y],s.canonical)));if(p.length===0)return NaN;const _=new ya(v[0][1]);let B=1/0;for(const F of A){switch(F.type){case"Point":B=Math.min(B,ka(v,!1,[F.coordinates],!1,_,B));break;case"LineString":B=Math.min(B,ka(v,!1,F.coordinates,!0,_,B));break;case"Polygon":B=Math.min(B,cc(v,!1,F.coordinates,_,B))}if(B===0)return B}return B})(t,this.geometries);if(t.geometryType()==="LineString")return(function(s,A){const p=s.geometry(),v=p.flat().map((F=>ma([F.x,F.y],s.canonical)));if(p.length===0)return NaN;const _=new ya(v[0][1]);let B=1/0;for(const F of A){switch(F.type){case"Point":B=Math.min(B,ka(v,!0,[F.coordinates],!1,_,B));break;case"LineString":B=Math.min(B,ka(v,!0,F.coordinates,!0,_,B));break;case"Polygon":B=Math.min(B,cc(v,!0,F.coordinates,_,B))}if(B===0)return B}return B})(t,this.geometries);if(t.geometryType()==="Polygon")return(function(s,A){const p=s.geometry();if(p.length===0||p[0].length===0)return NaN;const v=Ma(p,0).map((F=>F.map((U=>U.map((Q=>ma([Q.x,Q.y],s.canonical))))))),_=new ya(v[0][0][0][1]);let B=1/0;for(const F of A)for(const U of v){switch(F.type){case"Point":B=Math.min(B,cc([F.coordinates],!1,U,_,B));break;case"LineString":B=Math.min(B,cc(F.coordinates,!0,U,_,B));break;case"Polygon":B=Math.min(B,bs(U,F.coordinates,_,B))}if(B===0)return B}return B})(t,this.geometries)}return NaN}eachChild(){}outputDefined(){return!0}}class Mc{constructor(t){this.type=dn,this.key=t}static parse(t,s){if(t.length!==2)return s.error(`Expected 1 argument, but found ${t.length-1} instead.`);const A=t[1];return A==null?s.error("Global state property must be defined."):typeof A!="string"?s.error(`Global state property must be string, but found ${typeof t[1]} instead.`):new Mc(A)}evaluate(t){var s;const A=(s=t.globals)===null||s===void 0?void 0:s.globalState;return A&&Object.keys(A).length!==0?Kn(A,this.key):null}eachChild(){}outputDefined(){return!1}}const kc={"==":Hi,"!=":is,">":Ds,"<":Si,">=":xs,"<=":Li,array:qs,at:En,boolean:qs,case:Go,coalesce:Kr,collator:Ko,format:pa,image:Ta,in:mn,"index-of":Ia,interpolate:Kt,"interpolate-hcl":Kt,"interpolate-lab":Kt,length:hl,let:Qn,literal:Zi,match:bn,number:qs,"number-format":fa,object:qs,slice:Ei,step:da,string:qs,"to-boolean":jo,"to-color":jo,"to-number":jo,"to-string":jo,var:Vo,within:Ws,distance:Ua,"global-state":Mc};class fo{constructor(t,s,A,p){this.name=t,this.type=s,this._evaluate=A,this.args=p}evaluate(t){return this._evaluate(t,this.args)}eachChild(t){this.args.forEach(t)}outputDefined(){return!1}static parse(t,s){const A=t[0],p=fo.definitions[A];if(!p)return s.error(`Unknown expression "${A}". If you wanted a literal array, use ["literal", [...]].`,0);const v=Array.isArray(p)?p[0]:p.type,_=Array.isArray(p)?[[p[1],p[2]]]:p.overloads,B=_.filter((([U])=>!Array.isArray(U)||U.length===t.length-1));let F=null;for(const[U,Q]of B){F=new ha(s.registry,kA,s.path,null,s.scope);const K=[];let X=!1;for(let J=1;J<t.length;J++){const oe=t[J],le=Array.isArray(U)?U[J-1]:U.type,he=F.parse(oe,1+K.length,le);if(!he){X=!0;break}K.push(he)}if(!X)if(Array.isArray(U)&&U.length!==K.length)F.error(`Expected ${U.length} arguments, but found ${K.length} instead.`);else{for(let J=0;J<K.length;J++){const oe=Array.isArray(U)?U[J]:U.type,le=K[J];F.concat(J+1).checkSubtype(oe,le.type)}if(F.errors.length===0)return new fo(A,v,Q,K)}}if(B.length===1)s.errors.push(...F.errors);else{const U=(B.length?B:_).map((([K])=>{return X=K,Array.isArray(X)?`(${X.map(jn).join(", ")})`:`(${jn(X.type)}...)`;var X})).join(" | "),Q=[];for(let K=1;K<t.length;K++){const X=s.parse(t[K],1+Q.length);if(!X)return null;Q.push(jn(X.type))}s.error(`Expected arguments of type ${U}, but found (${Q.join(", ")}) instead.`)}return null}static register(t,s){fo.definitions=s;for(const A in s)t[A]=fo}}function Uc(l,[t,s,A,p]){t=t.evaluate(l),s=s.evaluate(l),A=A.evaluate(l);const v=p?p.evaluate(l):1,_=Sa(t,s,A,v);if(_)throw new ii(_);return new an(t/255,s/255,A/255,v,!1)}function Dc(l,t){return l in t}function au(l,t){const s=t[l];return s===void 0?null:s}function yl(l){return{type:l}}function kA(l){if(l instanceof Vo)return kA(l.boundExpression);if(l instanceof fo&&l.name==="error"||l instanceof Ko||l instanceof Ws||l instanceof Ua||l instanceof Mc)return!1;const t=l instanceof jo||l instanceof qs;let s=!0;return l.eachChild((A=>{s=t?s&&kA(A):s&&A instanceof Zi})),!!s&&UA(l)&&DA(l,["zoom","heatmap-density","elevation","line-progress","accumulated","is-supported-script"])}function UA(l){if(l instanceof fo&&(l.name==="get"&&l.args.length===1||l.name==="feature-state"||l.name==="has"&&l.args.length===1||l.name==="properties"||l.name==="geometry-type"||l.name==="id"||/^filter-/.test(l.name))||l instanceof Ws||l instanceof Ua)return!1;let t=!0;return l.eachChild((s=>{t&&!UA(s)&&(t=!1)})),t}function lA(l){if(l instanceof fo&&l.name==="feature-state")return!1;let t=!0;return l.eachChild((s=>{t&&!lA(s)&&(t=!1)})),t}function DA(l,t){if(l instanceof fo&&t.indexOf(l.name)>=0)return!1;let s=!0;return l.eachChild((A=>{s&&!DA(A,t)&&(s=!1)})),s}function Uu(l){return{result:"success",value:l}}function Rc(l){return{result:"error",value:l}}function So(l){return l["property-type"]==="data-driven"||l["property-type"]==="cross-faded-data-driven"}function cA(l){return!!l.expression&&l.expression.parameters.indexOf("zoom")>-1}function lo(l){return!!l.expression&&l.expression.interpolated}function pn(l){return l instanceof Number?"number":l instanceof String?"string":l instanceof Boolean?"boolean":Array.isArray(l)?"array":l===null?"null":typeof l}function AA(l){return typeof l=="object"&&l!==null&&!Array.isArray(l)&&ti(l)===ks}function Nc(l){return l}function ch(l,t){const s=l.stops&&typeof l.stops[0][0]=="object",A=s||!(s||l.property!==void 0),p=l.type||(lo(t)?"exponential":"interval"),v=(function(Q){switch(Q.type){case"color":return an.parse;case"padding":return Wr.parse;case"numberArray":return Jn.parse;case"colorArray":return cn.parse;default:return null}})(t);if(v&&((l=Zn({},l)).stops&&(l.stops=l.stops.map((Q=>[Q[0],v(Q[1])]))),l.default=v(l.default?l.default:t.default)),l.colorSpace&&(_=l.colorSpace)!=="rgb"&&_!=="hcl"&&_!=="lab")throw new Error(`Unknown color space: "${l.colorSpace}"`);var _;const B=(function(Q){switch(Q){case"exponential":return cu;case"interval":return Ii;case"categorical":return lu;case"identity":return RA;default:throw new Error(`Unknown function type "${Q}"`)}})(p);let F,U;if(p==="categorical"){F=Object.create(null);for(const Q of l.stops)F[Q[0]]=Q[1];U=typeof l.stops[0][0]}if(s){const Q={},K=[];for(let oe=0;oe<l.stops.length;oe++){const le=l.stops[oe],he=le[0].zoom;Q[he]===void 0&&(Q[he]={zoom:he,type:l.type,property:l.property,default:l.default,stops:[]},K.push(he)),Q[he].stops.push([le[0].value,le[1]])}const X=[];for(const oe of K)X.push([Q[oe].zoom,ch(Q[oe],t)]);const J={name:"linear"};return{kind:"composite",interpolationType:J,interpolationFactor:Kt.interpolationFactor.bind(void 0,J),zoomStops:X.map((oe=>oe[0])),evaluate:({zoom:oe},le)=>cu({stops:X,base:l.base},t,oe).evaluate(oe,le)}}if(A){const Q=p==="exponential"?{name:"exponential",base:l.base!==void 0?l.base:1}:null;return{kind:"camera",interpolationType:Q,interpolationFactor:Kt.interpolationFactor.bind(void 0,Q),zoomStops:l.stops.map((K=>K[0])),evaluate:({zoom:K})=>B(l,t,K,F,U)}}return{kind:"source",evaluate(Q,K){const X=K&&K.properties?K.properties[l.property]:void 0;return X===void 0?Ac(l.default,t.default):B(l,t,X,F,U)}}}function Ac(l,t,s){return l!==void 0?l:t!==void 0?t:s!==void 0?s:void 0}function lu(l,t,s,A,p){return Ac(typeof s===p?A[s]:void 0,l.default,t.default)}function Ii(l,t,s){if(pn(s)!=="number")return Ac(l.default,t.default);const A=l.stops.length;if(A===1||s<=l.stops[0][0])return l.stops[0][1];if(s>=l.stops[A-1][0])return l.stops[A-1][1];const p=ao(l.stops.map((v=>v[0])),s);return l.stops[p][1]}function cu(l,t,s){const A=l.base!==void 0?l.base:1;if(pn(s)!=="number")return Ac(l.default,t.default);const p=l.stops.length;if(p===1||s<=l.stops[0][0])return l.stops[0][1];if(s>=l.stops[p-1][0])return l.stops[p-1][1];const v=ao(l.stops.map((Q=>Q[0])),s),_=(function(Q,K,X,J){const oe=J-X,le=Q-X;return oe===0?0:K===1?le/oe:(Math.pow(K,le)-1)/(Math.pow(K,oe)-1)})(s,A,l.stops[v][0],l.stops[v+1][0]),B=l.stops[v][1],F=l.stops[v+1][1],U=Br[t.type]||Nc;return typeof B.evaluate=="function"?{evaluate(...Q){const K=B.evaluate.apply(void 0,Q),X=F.evaluate.apply(void 0,Q);if(K!==void 0&&X!==void 0)return U(K,X,_,l.colorSpace)}}:U(B,F,_,l.colorSpace)}function RA(l,t,s){switch(t.type){case"color":s=an.parse(s);break;case"formatted":s=vs.fromString(s.toString());break;case"resolvedImage":s=uo.fromString(s.toString());break;case"padding":s=Wr.parse(s);break;case"colorArray":s=cn.parse(s);break;case"numberArray":s=Jn.parse(s);break;default:pn(s)===t.type||t.type==="enum"&&t.values[s]||(s=void 0)}return Ac(s,l.default,t.default)}fo.register(kc,{error:[{kind:"error"},[nn],(l,[t])=>{throw new ii(t.evaluate(l))}],typeof:[nn,[dn],(l,[t])=>jn(ti(t.evaluate(l)))],"to-rgba":[Ci(pr,4),[Di],(l,[t])=>{const[s,A,p,v]=t.evaluate(l).rgb;return[255*s,255*A,255*p,v]}],rgb:[Di,[pr,pr,pr],Uc],rgba:[Di,[pr,pr,pr,pr],Uc],has:{type:hn,overloads:[[[nn],(l,[t])=>Dc(t.evaluate(l),l.properties())],[[nn,ks],(l,[t,s])=>Dc(t.evaluate(l),s.evaluate(l))]]},get:{type:dn,overloads:[[[nn],(l,[t])=>au(t.evaluate(l),l.properties())],[[nn,ks],(l,[t,s])=>au(t.evaluate(l),s.evaluate(l))]]},"feature-state":[dn,[nn],(l,[t])=>au(t.evaluate(l),l.featureState||{})],properties:[ks,[],l=>l.properties()],"geometry-type":[nn,[],l=>l.geometryType()],id:[dn,[],l=>l.id()],zoom:[pr,[],l=>l.globals.zoom],"heatmap-density":[pr,[],l=>l.globals.heatmapDensity||0],elevation:[pr,[],l=>l.globals.elevation||0],"line-progress":[pr,[],l=>l.globals.lineProgress||0],accumulated:[dn,[],l=>l.globals.accumulated===void 0?null:l.globals.accumulated],"+":[pr,yl(pr),(l,t)=>{let s=0;for(const A of t)s+=A.evaluate(l);return s}],"*":[pr,yl(pr),(l,t)=>{let s=1;for(const A of t)s*=A.evaluate(l);return s}],"-":{type:pr,overloads:[[[pr,pr],(l,[t,s])=>t.evaluate(l)-s.evaluate(l)],[[pr],(l,[t])=>-t.evaluate(l)]]},"/":[pr,[pr,pr],(l,[t,s])=>t.evaluate(l)/s.evaluate(l)],"%":[pr,[pr,pr],(l,[t,s])=>t.evaluate(l)%s.evaluate(l)],ln2:[pr,[],()=>Math.LN2],pi:[pr,[],()=>Math.PI],e:[pr,[],()=>Math.E],"^":[pr,[pr,pr],(l,[t,s])=>Math.pow(t.evaluate(l),s.evaluate(l))],sqrt:[pr,[pr],(l,[t])=>Math.sqrt(t.evaluate(l))],log10:[pr,[pr],(l,[t])=>Math.log(t.evaluate(l))/Math.LN10],ln:[pr,[pr],(l,[t])=>Math.log(t.evaluate(l))],log2:[pr,[pr],(l,[t])=>Math.log(t.evaluate(l))/Math.LN2],sin:[pr,[pr],(l,[t])=>Math.sin(t.evaluate(l))],cos:[pr,[pr],(l,[t])=>Math.cos(t.evaluate(l))],tan:[pr,[pr],(l,[t])=>Math.tan(t.evaluate(l))],asin:[pr,[pr],(l,[t])=>Math.asin(t.evaluate(l))],acos:[pr,[pr],(l,[t])=>Math.acos(t.evaluate(l))],atan:[pr,[pr],(l,[t])=>Math.atan(t.evaluate(l))],min:[pr,yl(pr),(l,t)=>Math.min(...t.map((s=>s.evaluate(l))))],max:[pr,yl(pr),(l,t)=>Math.max(...t.map((s=>s.evaluate(l))))],abs:[pr,[pr],(l,[t])=>Math.abs(t.evaluate(l))],round:[pr,[pr],(l,[t])=>{const s=t.evaluate(l);return s<0?-Math.round(-s):Math.round(s)}],floor:[pr,[pr],(l,[t])=>Math.floor(t.evaluate(l))],ceil:[pr,[pr],(l,[t])=>Math.ceil(t.evaluate(l))],"filter-==":[hn,[nn,dn],(l,[t,s])=>l.properties()[t.value]===s.value],"filter-id-==":[hn,[dn],(l,[t])=>l.id()===t.value],"filter-type-==":[hn,[nn],(l,[t])=>l.geometryType()===t.value],"filter-<":[hn,[nn,dn],(l,[t,s])=>{const A=l.properties()[t.value],p=s.value;return typeof A==typeof p&&A<p}],"filter-id-<":[hn,[dn],(l,[t])=>{const s=l.id(),A=t.value;return typeof s==typeof A&&s<A}],"filter->":[hn,[nn,dn],(l,[t,s])=>{const A=l.properties()[t.value],p=s.value;return typeof A==typeof p&&A>p}],"filter-id->":[hn,[dn],(l,[t])=>{const s=l.id(),A=t.value;return typeof s==typeof A&&s>A}],"filter-<=":[hn,[nn,dn],(l,[t,s])=>{const A=l.properties()[t.value],p=s.value;return typeof A==typeof p&&A<=p}],"filter-id-<=":[hn,[dn],(l,[t])=>{const s=l.id(),A=t.value;return typeof s==typeof A&&s<=A}],"filter->=":[hn,[nn,dn],(l,[t,s])=>{const A=l.properties()[t.value],p=s.value;return typeof A==typeof p&&A>=p}],"filter-id->=":[hn,[dn],(l,[t])=>{const s=l.id(),A=t.value;return typeof s==typeof A&&s>=A}],"filter-has":[hn,[dn],(l,[t])=>t.value in l.properties()],"filter-has-id":[hn,[],l=>l.id()!==null&&l.id()!==void 0],"filter-type-in":[hn,[Ci(nn)],(l,[t])=>t.value.indexOf(l.geometryType())>=0],"filter-id-in":[hn,[Ci(dn)],(l,[t])=>t.value.indexOf(l.id())>=0],"filter-in-small":[hn,[nn,Ci(dn)],(l,[t,s])=>s.value.indexOf(l.properties()[t.value])>=0],"filter-in-large":[hn,[nn,Ci(dn)],(l,[t,s])=>(function(A,p,v,_){for(;v<=_;){const B=v+_>>1;if(p[B]===A)return!0;p[B]>A?_=B-1:v=B+1}return!1})(l.properties()[t.value],s.value,0,s.value.length-1)],all:{type:hn,overloads:[[[hn,hn],(l,[t,s])=>t.evaluate(l)&&s.evaluate(l)],[yl(hn),(l,t)=>{for(const s of t)if(!s.evaluate(l))return!1;return!0}]]},any:{type:hn,overloads:[[[hn,hn],(l,[t,s])=>t.evaluate(l)||s.evaluate(l)],[yl(hn),(l,t)=>{for(const s of t)if(s.evaluate(l))return!0;return!1}]]},"!":[hn,[hn],(l,[t])=>!t.evaluate(l)],"is-supported-script":[hn,[nn],(l,[t])=>{const s=l.globals&&l.globals.isSupportedScript;return!s||s(t.evaluate(l))}],upcase:[nn,[nn],(l,[t])=>t.evaluate(l).toUpperCase()],downcase:[nn,[nn],(l,[t])=>t.evaluate(l).toLowerCase()],concat:[nn,yl(dn),(l,t)=>t.map((s=>Aa(s.evaluate(l)))).join("")],"resolved-locale":[nn,[ol],(l,[t])=>t.evaluate(l).resolvedLocale()]});class uc{constructor(t,s,A){this.expression=t,this._warningHistory={},this._evaluator=new sc,this._defaultValue=s?(function(p){if(p.type==="color"&&AA(p.default))return new an(0,0,0,0);switch(p.type){case"color":return an.parse(p.default)||null;case"padding":return Wr.parse(p.default)||null;case"numberArray":return Jn.parse(p.default)||null;case"colorArray":return cn.parse(p.default)||null;case"variableAnchorOffsetCollection":return Wi.parse(p.default)||null;case"projectionDefinition":return ws.parse(p.default)||null;default:return p.default===void 0?null:p.default}})(s):null,this._enumValues=s&&s.type==="enum"?s.values:null,this._globalState=A}evaluateWithoutErrorHandling(t,s,A,p,v,_){return this._globalState&&(t=zc(t,this._globalState)),this._evaluator.globals=t,this._evaluator.feature=s,this._evaluator.featureState=A,this._evaluator.canonical=p,this._evaluator.availableImages=v||null,this._evaluator.formattedSection=_,this.expression.evaluate(this._evaluator)}evaluate(t,s,A,p,v,_){this._globalState&&(t=zc(t,this._globalState)),this._evaluator.globals=t,this._evaluator.feature=s||null,this._evaluator.featureState=A||null,this._evaluator.canonical=p,this._evaluator.availableImages=v||null,this._evaluator.formattedSection=_||null;try{const B=this.expression.evaluate(this._evaluator);if(B==null||typeof B=="number"&&B!=B)return this._defaultValue;if(this._enumValues&&!(B in this._enumValues))throw new ii(`Expected value to be one of ${Object.keys(this._enumValues).map((F=>JSON.stringify(F))).join(", ")}, but found ${JSON.stringify(B)} instead.`);return B}catch(B){return this._warningHistory[B.message]||(this._warningHistory[B.message]=!0,typeof console<"u"&&console.warn(B.message)),this._defaultValue}}}function Ql(l){return Array.isArray(l)&&l.length>0&&typeof l[0]=="string"&&l[0]in kc}function Qc(l,t,s){const A=new ha(kc,kA,[],t?(function(v){const _={color:Di,string:nn,number:pr,enum:nn,boolean:hn,formatted:al,padding:ec,numberArray:fi,colorArray:Ec,projectionDefinition:El,resolvedImage:tc,variableAnchorOffsetCollection:Sl};return v.type==="array"?Ci(_[v.value]||dn,v.length):_[v.type]})(t):void 0),p=A.parse(l,void 0,void 0,void 0,t&&t.type==="string"?{typeAnnotation:"coerce"}:void 0);return p?Uu(new uc(p,t,s)):Rc(A.errors)}class Oc{constructor(t,s,A){this.kind=t,this._styleExpression=s,this.isStateDependent=t!=="constant"&&!lA(s.expression),this.globalStateRefs=uA(s.expression),this._globalState=A}evaluateWithoutErrorHandling(t,s,A,p,v,_){return this._globalState&&(t=zc(t,this._globalState)),this._styleExpression.evaluateWithoutErrorHandling(t,s,A,p,v,_)}evaluate(t,s,A,p,v,_){return this._globalState&&(t=zc(t,this._globalState)),this._styleExpression.evaluate(t,s,A,p,v,_)}}class NA{constructor(t,s,A,p,v){this.kind=t,this.zoomStops=A,this._styleExpression=s,this.isStateDependent=t!=="camera"&&!lA(s.expression),this.globalStateRefs=uA(s.expression),this.interpolationType=p,this._globalState=v}evaluateWithoutErrorHandling(t,s,A,p,v,_){return this._globalState&&(t=zc(t,this._globalState)),this._styleExpression.evaluateWithoutErrorHandling(t,s,A,p,v,_)}evaluate(t,s,A,p,v,_){return this._globalState&&(t=zc(t,this._globalState)),this._styleExpression.evaluate(t,s,A,p,v,_)}interpolationFactor(t,s,A){return this.interpolationType?Kt.interpolationFactor(this.interpolationType,t,s,A):0}}function hc(l,t,s){const A=Qc(l,t,s);if(A.result==="error")return A;const p=A.value.expression,v=UA(p);if(!v&&!So(t))return Rc([new $i("","data expressions not supported")]);const _=DA(p,["zoom"]);if(!_&&!cA(t))return Rc([new $i("","zoom expressions not supported")]);const B=Du(p);return B||_?B instanceof $i?Rc([B]):B instanceof Kt&&!lo(t)?Rc([new $i("",'"interpolate" expressions cannot be used with this property')]):Uu(B?new NA(v?"camera":"composite",A.value,B.labels,B instanceof Kt?B.interpolation:void 0,s):new Oc(v?"constant":"source",A.value,s)):Rc([new $i("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class Au{constructor(t,s){this._parameters=t,this._specification=s,Zn(this,ch(this._parameters,this._specification))}static deserialize(t){return new Au(t._parameters,t._specification)}static serialize(t){return{_parameters:t._parameters,_specification:t._specification}}}function Du(l){let t=null;if(l instanceof Qn)t=Du(l.result);else if(l instanceof Kr){for(const s of l.args)if(t=Du(s),t)break}else(l instanceof da||l instanceof Kt)&&l.input instanceof fo&&l.input.name==="zoom"&&(t=l);return t instanceof $i||l.eachChild((s=>{const A=Du(s);A instanceof $i?t=A:!t&&A?t=new $i("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):t&&A&&t!==A&&(t=new $i("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))})),t}function uA(l,t=new Set){return l instanceof Mc&&t.add(l.key),l.eachChild((s=>{uA(s,t)})),t}function zc(l,t){const{zoom:s,heatmapDensity:A,elevation:p,lineProgress:v,isSupportedScript:_,accumulated:B}=l??{};return{zoom:s,heatmapDensity:A,elevation:p,lineProgress:v,isSupportedScript:_,accumulated:B,globalState:t}}function QA(l){if(l===!0||l===!1)return!0;if(!Array.isArray(l)||l.length===0)return!1;switch(l[0]){case"has":return l.length>=2&&l[1]!=="$id"&&l[1]!=="$type";case"in":return l.length>=3&&(typeof l[1]!="string"||Array.isArray(l[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return l.length!==3||Array.isArray(l[1])||Array.isArray(l[2]);case"any":case"all":for(const t of l.slice(1))if(!QA(t)&&typeof t!="boolean")return!1;return!0;default:return!0}}const OA={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function dc(l,t){if(l==null)return{filter:()=>!0,needGeometry:!1,getGlobalStateRefs:()=>new Set};QA(l)||(l=dA(l));const s=Qc(l,OA,t);if(s.result==="error")throw new Error(s.value.map((A=>`${A.key}: ${A.message}`)).join(", "));return{filter:(A,p,v)=>s.value.evaluate(A,p,{},v),needGeometry:Ru(l),getGlobalStateRefs:()=>uA(s.value.expression)}}function hA(l,t){return l<t?-1:l>t?1:0}function Ru(l){if(!Array.isArray(l))return!1;if(l[0]==="within"||l[0]==="distance")return!0;for(let t=1;t<l.length;t++)if(Ru(l[t]))return!0;return!1}function dA(l){if(!l)return!0;const t=l[0];return l.length<=1?t!=="any":t==="=="?uu(l[1],l[2],"=="):t==="!="?hu(uu(l[1],l[2],"==")):t==="<"||t===">"||t==="<="||t===">="?uu(l[1],l[2],t):t==="any"?(s=l.slice(1),["any"].concat(s.map(dA))):t==="all"?["all"].concat(l.slice(1).map(dA)):t==="none"?["all"].concat(l.slice(1).map(dA).map(hu)):t==="in"?Ah(l[1],l.slice(2)):t==="!in"?hu(Ah(l[1],l.slice(2))):t==="has"?jh(l[1]):t!=="!has"||hu(jh(l[1]));var s}function uu(l,t,s){switch(l){case"$type":return[`filter-type-${s}`,t];case"$id":return[`filter-id-${s}`,t];default:return[`filter-${s}`,l,t]}}function Ah(l,t){if(t.length===0)return!1;switch(l){case"$type":return["filter-type-in",["literal",t]];case"$id":return["filter-id-in",["literal",t]];default:return t.length>200&&!t.some((s=>typeof s!=typeof t[0]))?["filter-in-large",l,["literal",t.sort(hA)]]:["filter-in-small",l,["literal",t]]}}function jh(l){switch(l){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",l]}}function hu(l){return["!",l]}function zA(l){const t=typeof l;if(t==="number"||t==="boolean"||t==="string"||l==null)return JSON.stringify(l);if(Array.isArray(l)){let p="[";for(const v of l)p+=`${zA(v)},`;return`${p}]`}const s=Object.keys(l).sort();let A="{";for(let p=0;p<s.length;p++)A+=`${JSON.stringify(s[p])}:${zA(l[s[p]])},`;return`${A}}`}function po(l){let t="";for(const s of tn)t+=`/${zA(l[s])}`;return t}function va(l){const t=l.value;return t?[new Yt(l.key,t,"constants have been deprecated as of v8")]:[]}function $n(l){return l instanceof Number||l instanceof String||l instanceof Boolean?l.valueOf():l}function mo(l){if(Array.isArray(l))return l.map(mo);if(l instanceof Object&&!(l instanceof Number||l instanceof String||l instanceof Boolean)){const t={};for(const s in l)t[s]=mo(l[s]);return t}return $n(l)}function co(l){const t=l.key,s=l.value,A=l.valueSpec||{},p=l.objectElementValidators||{},v=l.style,_=l.styleSpec,B=l.validateSpec;let F=[];const U=pn(s);if(U!=="object")return[new Yt(t,s,`object expected, ${U} found`)];for(const Q in s){const K=Q.split(".")[0],X=Kn(A,K)||A["*"];let J;if(Kn(p,K))J=p[K];else if(Kn(A,K))J=B;else if(p["*"])J=p["*"];else{if(!A["*"]){F.push(new Yt(t,s[Q],`unknown property "${Q}"`));continue}J=B}F=F.concat(J({key:(t&&`${t}.`)+Q,value:s[Q],valueSpec:X,style:v,styleSpec:_,object:s,objectKey:Q,validateSpec:B},s))}for(const Q in A)p[Q]||A[Q].required&&A[Q].default===void 0&&s[Q]===void 0&&F.push(new Yt(t,s,`missing required property "${Q}"`));return F}function Rs(l){const t=l.value,s=l.valueSpec,A=l.style,p=l.styleSpec,v=l.key,_=l.arrayElementValidator||l.validateSpec;if(pn(t)!=="array")return[new Yt(v,t,`array expected, ${pn(t)} found`)];if(s.length&&t.length!==s.length)return[new Yt(v,t,`array length ${s.length} expected, length ${t.length} found`)];if(s["min-length"]&&t.length<s["min-length"])return[new Yt(v,t,`array length at least ${s["min-length"]} expected, length ${t.length} found`)];let B={type:s.value,values:s.values};p.$version<7&&(B.function=s.function),pn(s.value)==="object"&&(B=s.value);let F=[];for(let U=0;U<t.length;U++)F=F.concat(_({array:t,arrayIndex:U,value:t[U],valueSpec:B,validateSpec:l.validateSpec,style:A,styleSpec:p,key:`${v}[${U}]`}));return F}function Zs(l){const t=l.key,s=l.value,A=l.valueSpec;let p=pn(s);return p==="number"&&s!=s&&(p="NaN"),p!=="number"?[new Yt(t,s,`number expected, ${p} found`)]:"minimum"in A&&s<A.minimum?[new Yt(t,s,`${s} is less than the minimum value ${A.minimum}`)]:"maximum"in A&&s>A.maximum?[new Yt(t,s,`${s} is greater than the maximum value ${A.maximum}`)]:[]}function Nu(l){const t=l.valueSpec,s=$n(l.value.type);let A,p,v,_={};const B=s!=="categorical"&&l.value.property===void 0,F=!B,U=pn(l.value.stops)==="array"&&pn(l.value.stops[0])==="array"&&pn(l.value.stops[0][0])==="object",Q=co({key:l.key,value:l.value,valueSpec:l.styleSpec.function,validateSpec:l.validateSpec,style:l.style,styleSpec:l.styleSpec,objectElementValidators:{stops:function(J){if(s==="identity")return[new Yt(J.key,J.value,'identity function may not have a "stops" property')];let oe=[];const le=J.value;return oe=oe.concat(Rs({key:J.key,value:le,valueSpec:J.valueSpec,validateSpec:J.validateSpec,style:J.style,styleSpec:J.styleSpec,arrayElementValidator:K})),pn(le)==="array"&&le.length===0&&oe.push(new Yt(J.key,le,"array must have at least one stop")),oe},default:function(J){return J.validateSpec({key:J.key,value:J.value,valueSpec:t,validateSpec:J.validateSpec,style:J.style,styleSpec:J.styleSpec})}}});return s==="identity"&&B&&Q.push(new Yt(l.key,l.value,'missing required property "property"')),s==="identity"||l.value.stops||Q.push(new Yt(l.key,l.value,'missing required property "stops"')),s==="exponential"&&l.valueSpec.expression&&!lo(l.valueSpec)&&Q.push(new Yt(l.key,l.value,"exponential functions not supported")),l.styleSpec.$version>=8&&(F&&!So(l.valueSpec)?Q.push(new Yt(l.key,l.value,"property functions not supported")):B&&!cA(l.valueSpec)&&Q.push(new Yt(l.key,l.value,"zoom functions not supported"))),s!=="categorical"&&!U||l.value.property!==void 0||Q.push(new Yt(l.key,l.value,'"property" property is required')),Q;function K(J){let oe=[];const le=J.value,he=J.key;if(pn(le)!=="array")return[new Yt(he,le,`array expected, ${pn(le)} found`)];if(le.length!==2)return[new Yt(he,le,`array length 2 expected, length ${le.length} found`)];if(U){if(pn(le[0])!=="object")return[new Yt(he,le,`object expected, ${pn(le[0])} found`)];if(le[0].zoom===void 0)return[new Yt(he,le,"object stop key must have zoom")];if(le[0].value===void 0)return[new Yt(he,le,"object stop key must have value")];if(v&&v>$n(le[0].zoom))return[new Yt(he,le[0].zoom,"stop zoom values must appear in ascending order")];$n(le[0].zoom)!==v&&(v=$n(le[0].zoom),p=void 0,_={}),oe=oe.concat(co({key:`${he}[0]`,value:le[0],valueSpec:{zoom:{}},validateSpec:J.validateSpec,style:J.style,styleSpec:J.styleSpec,objectElementValidators:{zoom:Zs,value:X}}))}else oe=oe.concat(X({key:`${he}[0]`,value:le[0],validateSpec:J.validateSpec,style:J.style,styleSpec:J.styleSpec},le));return Ql(mo(le[1]))?oe.concat([new Yt(`${he}[1]`,le[1],"expressions are not allowed in function stops.")]):oe.concat(J.validateSpec({key:`${he}[1]`,value:le[1],valueSpec:t,validateSpec:J.validateSpec,style:J.style,styleSpec:J.styleSpec}))}function X(J,oe){const le=pn(J.value),he=$n(J.value),be=J.value!==null?J.value:oe;if(A){if(le!==A)return[new Yt(J.key,be,`${le} stop domain type must match previous stop domain type ${A}`)]}else A=le;if(le!=="number"&&le!=="string"&&le!=="boolean")return[new Yt(J.key,be,"stop domain value must be a number, string, or boolean")];if(le!=="number"&&s!=="categorical"){let rt=`number expected, ${le} found`;return So(t)&&s===void 0&&(rt+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new Yt(J.key,be,rt)]}return s!=="categorical"||le!=="number"||isFinite(he)&&Math.floor(he)===he?s!=="categorical"&&le==="number"&&p!==void 0&&he<p?[new Yt(J.key,be,"stop domain values must appear in ascending order")]:(p=he,s==="categorical"&&he in _?[new Yt(J.key,be,"stop domain values must be unique")]:(_[he]=!0,[])):[new Yt(J.key,be,`integer expected, found ${he}`)]}}function Hc(l){const t=(l.expressionContext==="property"?hc:Qc)(mo(l.value),l.valueSpec);if(t.result==="error")return t.value.map((A=>new Yt(`${l.key}${A.key}`,l.value,A.message)));const s=t.value.expression||t.value._styleExpression.expression;if(l.expressionContext==="property"&&l.propertyKey==="text-font"&&!s.outputDefined())return[new Yt(l.key,l.value,`Invalid data expression for "${l.propertyKey}". Output values must be contained as literals within the expression.`)];if(l.expressionContext==="property"&&l.propertyType==="layout"&&!lA(s))return[new Yt(l.key,l.value,'"feature-state" data expressions are not supported with layout properties.')];if(l.expressionContext==="filter"&&!lA(s))return[new Yt(l.key,l.value,'"feature-state" data expressions are not supported with filters.')];if(l.expressionContext&&l.expressionContext.indexOf("cluster")===0){if(!DA(s,["zoom","feature-state"]))return[new Yt(l.key,l.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(l.expressionContext==="cluster-initial"&&!UA(s))return[new Yt(l.key,l.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function Da(l){const t=l.key,s=l.value,A=pn(s);return A!=="string"?[new Yt(t,s,`color expected, ${A} found`)]:an.parse(String(s))?[]:[new Yt(t,s,`color expected, "${s}" found`)]}function Ra(l){const t=l.key,s=l.value,A=l.valueSpec,p=[];return Array.isArray(A.values)?A.values.indexOf($n(s))===-1&&p.push(new Yt(t,s,`expected one of [${A.values.join(", ")}], ${JSON.stringify(s)} found`)):Object.keys(A.values).indexOf($n(s))===-1&&p.push(new Yt(t,s,`expected one of [${Object.keys(A.values).join(", ")}], ${JSON.stringify(s)} found`)),p}function Na(l){return QA(mo(l.value))?Hc(Zn({},l,{expressionContext:"filter",valueSpec:{value:"boolean"}})):HA(l)}function HA(l){const t=l.value,s=l.key;if(pn(t)!=="array")return[new Yt(s,t,`array expected, ${pn(t)} found`)];const A=l.styleSpec;let p,v=[];if(t.length<1)return[new Yt(s,t,"filter array must have at least 1 element")];switch(v=v.concat(Ra({key:`${s}[0]`,value:t[0],valueSpec:A.filter_operator,style:l.style,styleSpec:l.styleSpec})),$n(t[0])){case"<":case"<=":case">":case">=":t.length>=2&&$n(t[1])==="$type"&&v.push(new Yt(s,t,`"$type" cannot be use with operator "${t[0]}"`));case"==":case"!=":t.length!==3&&v.push(new Yt(s,t,`filter array for operator "${t[0]}" must have 3 elements`));case"in":case"!in":t.length>=2&&(p=pn(t[1]),p!=="string"&&v.push(new Yt(`${s}[1]`,t[1],`string expected, ${p} found`)));for(let _=2;_<t.length;_++)p=pn(t[_]),$n(t[1])==="$type"?v=v.concat(Ra({key:`${s}[${_}]`,value:t[_],valueSpec:A.geometry_type,style:l.style,styleSpec:l.styleSpec})):p!=="string"&&p!=="number"&&p!=="boolean"&&v.push(new Yt(`${s}[${_}]`,t[_],`string, number, or boolean expected, ${p} found`));break;case"any":case"all":case"none":for(let _=1;_<t.length;_++)v=v.concat(HA({key:`${s}[${_}]`,value:t[_],style:l.style,styleSpec:l.styleSpec}));break;case"has":case"!has":p=pn(t[1]),t.length!==2?v.push(new Yt(s,t,`filter array for "${t[0]}" operator must have 2 elements`)):p!=="string"&&v.push(new Yt(`${s}[1]`,t[1],`string expected, ${p} found`))}return v}function Qu(l,t){const s=l.key,A=l.validateSpec,p=l.style,v=l.styleSpec,_=l.value,B=l.objectKey,F=v[`${t}_${l.layerType}`];if(!F)return[];const U=B.match(/^(.*)-transition$/);if(t==="paint"&&U&&F[U[1]]&&F[U[1]].transition)return A({key:s,value:_,valueSpec:v.transition,style:p,styleSpec:v});const Q=l.valueSpec||F[B];if(!Q)return[new Yt(s,_,`unknown property "${B}"`)];let K;if(pn(_)==="string"&&So(Q)&&!Q.tokens&&(K=/^{([^}]+)}$/.exec(_)))return[new Yt(s,_,`"${B}" does not support interpolation syntax
Use an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(K[1])} }\`.`)];const X=[];return l.layerType==="symbol"&&B==="text-font"&&AA(mo(_))&&$n(_.type)==="identity"&&X.push(new Yt(s,_,'"text-font" does not support identity functions')),X.concat(A({key:l.key,value:_,valueSpec:Q,style:p,styleSpec:v,expressionContext:"property",propertyType:t,propertyKey:B}))}function Ol(l){return Qu(l,"paint")}function Qa(l){return Qu(l,"layout")}function li(l){let t=[];const s=l.value,A=l.key,p=l.style,v=l.styleSpec;if(pn(s)!=="object")return[new Yt(A,s,`object expected, ${pn(s)} found`)];s.type||s.ref||t.push(new Yt(A,s,'either "type" or "ref" is required'));let _=$n(s.type);const B=$n(s.ref);if(s.id){const F=$n(s.id);for(let U=0;U<l.arrayIndex;U++){const Q=p.layers[U];$n(Q.id)===F&&t.push(new Yt(A,s.id,`duplicate layer id "${s.id}", previously used at line ${Q.id.__line__}`))}}if("ref"in s){let F;["type","source","source-layer","filter","layout"].forEach((U=>{U in s&&t.push(new Yt(A,s[U],`"${U}" is prohibited for ref layers`))})),p.layers.forEach((U=>{$n(U.id)===B&&(F=U)})),F?F.ref?t.push(new Yt(A,s.ref,"ref cannot reference another ref layer")):_=$n(F.type):t.push(new Yt(A,s.ref,`ref layer "${B}" not found`))}else if(_!=="background")if(s.source){const F=p.sources&&p.sources[s.source],U=F&&$n(F.type);F?U==="vector"&&_==="raster"?t.push(new Yt(A,s.source,`layer "${s.id}" requires a raster source`)):U!=="raster-dem"&&_==="hillshade"||U!=="raster-dem"&&_==="color-relief"?t.push(new Yt(A,s.source,`layer "${s.id}" requires a raster-dem source`)):U==="raster"&&_!=="raster"?t.push(new Yt(A,s.source,`layer "${s.id}" requires a vector source`)):U!=="vector"||s["source-layer"]?U==="raster-dem"&&_!=="hillshade"&&_!=="color-relief"?t.push(new Yt(A,s.source,"raster-dem source can only be used with layer type 'hillshade' or 'color-relief'.")):_!=="line"||!s.paint||!s.paint["line-gradient"]||U==="geojson"&&F.lineMetrics||t.push(new Yt(A,s,`layer "${s.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):t.push(new Yt(A,s,`layer "${s.id}" must specify a "source-layer"`)):t.push(new Yt(A,s.source,`source "${s.source}" not found`))}else t.push(new Yt(A,s,'missing required property "source"'));return t=t.concat(co({key:A,value:s,valueSpec:v.layer,style:l.style,styleSpec:l.styleSpec,validateSpec:l.validateSpec,objectElementValidators:{"*":()=>[],type:()=>l.validateSpec({key:`${A}.type`,value:s.type,valueSpec:v.layer.type,style:l.style,styleSpec:l.styleSpec,validateSpec:l.validateSpec,object:s,objectKey:"type"}),filter:Na,layout:F=>co({layer:s,key:F.key,value:F.value,style:F.style,styleSpec:F.styleSpec,validateSpec:F.validateSpec,objectElementValidators:{"*":U=>Qa(Zn({layerType:_},U))}}),paint:F=>co({layer:s,key:F.key,value:F.value,style:F.style,styleSpec:F.styleSpec,validateSpec:F.validateSpec,objectElementValidators:{"*":U=>Ol(Zn({layerType:_},U))}})}})),t}function Xn(l){const t=l.value,s=l.key,A=pn(t);return A!=="string"?[new Yt(s,t,`string expected, ${A} found`)]:[]}const zl={promoteId:function({key:l,value:t}){if(pn(t)==="string")return Xn({key:l,value:t});{const s=[];for(const A in t)s.push(...Xn({key:`${l}.${A}`,value:t[A]}));return s}}};function Ns(l){const t=l.value,s=l.key,A=l.styleSpec,p=l.style,v=l.validateSpec;if(!t.type)return[new Yt(s,t,'"type" is required')];const _=$n(t.type);let B;switch(_){case"vector":case"raster":return B=co({key:s,value:t,valueSpec:A[`source_${_.replace("-","_")}`],style:l.style,styleSpec:A,objectElementValidators:zl,validateSpec:v}),B;case"raster-dem":return B=(function(F){var U;const Q=(U=F.sourceName)!==null&&U!==void 0?U:"",K=F.value,X=F.styleSpec,J=X.source_raster_dem,oe=F.style;let le=[];const he=pn(K);if(K===void 0)return le;if(he!=="object")return le.push(new Yt("source_raster_dem",K,`object expected, ${he} found`)),le;const be=$n(K.encoding)==="custom",rt=["redFactor","greenFactor","blueFactor","baseShift"],Fe=F.value.encoding?`"${F.value.encoding}"`:"Default";for(const Ue in K)!be&&rt.includes(Ue)?le.push(new Yt(Ue,K[Ue],`In "${Q}": "${Ue}" is only valid when "encoding" is set to "custom". ${Fe} encoding found`)):J[Ue]?le=le.concat(F.validateSpec({key:Ue,value:K[Ue],valueSpec:J[Ue],validateSpec:F.validateSpec,style:oe,styleSpec:X})):le.push(new Yt(Ue,K[Ue],`unknown property "${Ue}"`));return le})({sourceName:s,value:t,style:l.style,styleSpec:A,validateSpec:v}),B;case"geojson":if(B=co({key:s,value:t,valueSpec:A.source_geojson,style:p,styleSpec:A,validateSpec:v,objectElementValidators:zl}),t.cluster)for(const F in t.clusterProperties){const[U,Q]=t.clusterProperties[F],K=typeof U=="string"?[U,["accumulated"],["get",F]]:U;B.push(...Hc({key:`${s}.${F}.map`,value:Q,expressionContext:"cluster-map"})),B.push(...Hc({key:`${s}.${F}.reduce`,value:K,expressionContext:"cluster-reduce"}))}return B;case"video":return co({key:s,value:t,valueSpec:A.source_video,style:p,validateSpec:v,styleSpec:A});case"image":return co({key:s,value:t,valueSpec:A.source_image,style:p,validateSpec:v,styleSpec:A});case"canvas":return[new Yt(s,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return Ra({key:`${s}.type`,value:t.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]}})}}function Xs(l){const t=l.value,s=l.styleSpec,A=s.light,p=l.style;let v=[];const _=pn(t);if(t===void 0)return v;if(_!=="object")return v=v.concat([new Yt("light",t,`object expected, ${_} found`)]),v;for(const B in t){const F=B.match(/^(.*)-transition$/);v=v.concat(F&&A[F[1]]&&A[F[1]].transition?l.validateSpec({key:B,value:t[B],valueSpec:s.transition,validateSpec:l.validateSpec,style:p,styleSpec:s}):A[B]?l.validateSpec({key:B,value:t[B],valueSpec:A[B],validateSpec:l.validateSpec,style:p,styleSpec:s}):[new Yt(B,t[B],`unknown property "${B}"`)])}return v}function jc(l){const t=l.value,s=l.styleSpec,A=s.sky,p=l.style,v=pn(t);if(t===void 0)return[];if(v!=="object")return[new Yt("sky",t,`object expected, ${v} found`)];let _=[];for(const B in t)_=_.concat(A[B]?l.validateSpec({key:B,value:t[B],valueSpec:A[B],style:p,styleSpec:s}):[new Yt(B,t[B],`unknown property "${B}"`)]);return _}function Vc(l){const t=l.value,s=l.styleSpec,A=s.terrain,p=l.style;let v=[];const _=pn(t);if(t===void 0)return v;if(_!=="object")return v=v.concat([new Yt("terrain",t,`object expected, ${_} found`)]),v;for(const B in t)v=v.concat(A[B]?l.validateSpec({key:B,value:t[B],valueSpec:A[B],validateSpec:l.validateSpec,style:p,styleSpec:s}):[new Yt(B,t[B],`unknown property "${B}"`)]);return v}function go(l){let t=[];const s=l.value,A=l.key;if(Array.isArray(s)){const p=[],v=[];for(const _ in s)s[_].id&&p.includes(s[_].id)&&t.push(new Yt(A,s,`all the sprites' ids must be unique, but ${s[_].id} is duplicated`)),p.push(s[_].id),s[_].url&&v.includes(s[_].url)&&t.push(new Yt(A,s,`all the sprites' URLs must be unique, but ${s[_].url} is duplicated`)),v.push(s[_].url),t=t.concat(co({key:`${A}[${_}]`,value:s[_],valueSpec:{id:{type:"string",required:!0},url:{type:"string",required:!0}},validateSpec:l.validateSpec}));return t}return Xn({key:A,value:s})}function du(l){return t=l.value,t&&t.constructor===Object?[]:[new Yt(l.key,l.value,`object expected, ${pn(l.value)} found`)];var t}const Ou={"*":()=>[],array:Rs,boolean:function(l){const t=l.value,s=l.key,A=pn(t);return A!=="boolean"?[new Yt(s,t,`boolean expected, ${A} found`)]:[]},number:Zs,color:Da,constants:va,enum:Ra,filter:Na,function:Nu,layer:li,object:co,source:Ns,light:Xs,sky:jc,terrain:Vc,projection:function(l){const t=l.value,s=l.styleSpec,A=s.projection,p=l.style,v=pn(t);if(t===void 0)return[];if(v!=="object")return[new Yt("projection",t,`object expected, ${v} found`)];let _=[];for(const B in t)_=_.concat(A[B]?l.validateSpec({key:B,value:t[B],valueSpec:A[B],style:p,styleSpec:s}):[new Yt(B,t[B],`unknown property "${B}"`)]);return _},projectionDefinition:function(l){const t=l.key;let s=l.value;s=s instanceof String?s.valueOf():s;const A=pn(s);return A!=="array"||(function(p){return Array.isArray(p)&&p.length===3&&typeof p[0]=="string"&&typeof p[1]=="string"&&typeof p[2]=="number"})(s)||(function(p){return!!["interpolate","step","literal"].includes(p[0])})(s)?["array","string"].includes(A)?[]:[new Yt(t,s,`projection expected, invalid type "${A}" found`)]:[new Yt(t,s,`projection expected, invalid array ${JSON.stringify(s)} found`)]},string:Xn,formatted:function(l){return Xn(l).length===0?[]:Hc(l)},resolvedImage:function(l){return Xn(l).length===0?[]:Hc(l)},padding:function(l){const t=l.key,s=l.value;if(pn(s)==="array"){if(s.length<1||s.length>4)return[new Yt(t,s,`padding requires 1 to 4 values; ${s.length} values found`)];const A={type:"number"};let p=[];for(let v=0;v<s.length;v++)p=p.concat(l.validateSpec({key:`${t}[${v}]`,value:s[v],validateSpec:l.validateSpec,valueSpec:A}));return p}return Zs({key:t,value:s,valueSpec:{}})},numberArray:function(l){const t=l.key,s=l.value;if(pn(s)==="array"){const A={type:"number"};if(s.length<1)return[new Yt(t,s,"array length at least 1 expected, length 0 found")];let p=[];for(let v=0;v<s.length;v++)p=p.concat(l.validateSpec({key:`${t}[${v}]`,value:s[v],validateSpec:l.validateSpec,valueSpec:A}));return p}return Zs({key:t,value:s,valueSpec:{}})},colorArray:function(l){const t=l.key,s=l.value;if(pn(s)==="array"){if(s.length<1)return[new Yt(t,s,"array length at least 1 expected, length 0 found")];let A=[];for(let p=0;p<s.length;p++)A=A.concat(Da({key:`${t}[${p}]`,value:s[p]}));return A}return Da({key:t,value:s})},variableAnchorOffsetCollection:function(l){const t=l.key,s=l.value,A=pn(s),p=l.styleSpec;if(A!=="array"||s.length<1||s.length%2!=0)return[new Yt(t,s,"variableAnchorOffsetCollection requires a non-empty array of even length")];let v=[];for(let _=0;_<s.length;_+=2)v=v.concat(Ra({key:`${t}[${_}]`,value:s[_],valueSpec:p.layout_symbol["text-anchor"]})),v=v.concat(Rs({key:`${t}[${_+1}]`,value:s[_+1],valueSpec:{length:2,value:"number"},validateSpec:l.validateSpec,style:l.style,styleSpec:p}));return v},sprite:go,state:du};function fA(l){const t=l.value,s=l.valueSpec,A=l.styleSpec;return l.validateSpec=fA,s.expression&&AA($n(t))?Nu(l):s.expression&&Ql(mo(t))?Hc(l):s.type&&Ou[s.type]?Ou[s.type](l):co(Zn({},l,{valueSpec:s.type?A[s.type]:s}))}function Oa(l){const t=l.value,s=l.key,A=Xn(l);return A.length||(t.indexOf("{fontstack}")===-1&&A.push(new Yt(s,t,'"glyphs" url must include a "{fontstack}" token')),t.indexOf("{range}")===-1&&A.push(new Yt(s,t,'"glyphs" url must include a "{range}" token'))),A}function _a(l,t=mt){let s=[];return s=s.concat(fA({key:"",value:l,valueSpec:t.$root,styleSpec:t,style:l,validateSpec:fA,objectElementValidators:{glyphs:Oa,"*":()=>[]}})),l.constants&&(s=s.concat(va({key:"constants",value:l.constants}))),jA(s)}function Qs(l){return function(t){return l(Object.assign({},t,{validateSpec:fA}))}}function jA(l){return[].concat(l).sort(((t,s)=>t.line-s.line))}function T(l){return function(...t){return jA(l.apply(this,t))}}_a.source=T(Qs(Ns)),_a.sprite=T(Qs(go)),_a.glyphs=T(Qs(Oa)),_a.light=T(Qs(Xs)),_a.sky=T(Qs(jc)),_a.terrain=T(Qs(Vc)),_a.state=T(Qs(du)),_a.layer=T(Qs(li)),_a.filter=T(Qs(Na)),_a.paintProperty=T(Qs(Ol)),_a.layoutProperty=T(Qs(Qa));const R=mt,$=_a,re=$.light,ge=$.sky,we=$.paintProperty,Se=$.layoutProperty;function Me(l,t){let s=!1;if(t&&t.length)for(const A of t)l.fire(new rn(new Error(A.message))),s=!0;return s}class Re{constructor(t,s,A){const p=this.cells=[];if(t instanceof ArrayBuffer){this.arrayBuffer=t;const _=new Int32Array(this.arrayBuffer);t=_[0],this.d=(s=_[1])+2*(A=_[2]);for(let F=0;F<this.d*this.d;F++){const U=_[3+F],Q=_[3+F+1];p.push(U===Q?null:_.subarray(U,Q))}const B=_[3+p.length+1];this.keys=_.subarray(_[3+p.length],B),this.bboxes=_.subarray(B),this.insert=this._insertReadonly}else{this.d=s+2*A;for(let _=0;_<this.d*this.d;_++)p.push([]);this.keys=[],this.bboxes=[]}this.n=s,this.extent=t,this.padding=A,this.scale=s/t,this.uid=0;const v=A/s*t;this.min=-v,this.max=t+v}insert(t,s,A,p,v){this._forEachCell(s,A,p,v,this._insertCell,this.uid++,void 0,void 0),this.keys.push(t),this.bboxes.push(s),this.bboxes.push(A),this.bboxes.push(p),this.bboxes.push(v)}_insertReadonly(){throw new Error("Cannot insert into a GridIndex created from an ArrayBuffer.")}_insertCell(t,s,A,p,v,_){this.cells[v].push(_)}query(t,s,A,p,v){const _=this.min,B=this.max;if(t<=_&&s<=_&&B<=A&&B<=p&&!v)return Array.prototype.slice.call(this.keys);{const F=[];return this._forEachCell(t,s,A,p,this._queryCell,F,{},v),F}}_queryCell(t,s,A,p,v,_,B,F){const U=this.cells[v];if(U!==null){const Q=this.keys,K=this.bboxes;for(let X=0;X<U.length;X++){const J=U[X];if(B[J]===void 0){const oe=4*J;(F?F(K[oe+0],K[oe+1],K[oe+2],K[oe+3]):t<=K[oe+2]&&s<=K[oe+3]&&A>=K[oe+0]&&p>=K[oe+1])?(B[J]=!0,_.push(Q[J])):B[J]=!1}}}}_forEachCell(t,s,A,p,v,_,B,F){const U=this._convertToCellCoord(t),Q=this._convertToCellCoord(s),K=this._convertToCellCoord(A),X=this._convertToCellCoord(p);for(let J=U;J<=K;J++)for(let oe=Q;oe<=X;oe++){const le=this.d*oe+J;if((!F||F(this._convertFromCellCoord(J),this._convertFromCellCoord(oe),this._convertFromCellCoord(J+1),this._convertFromCellCoord(oe+1)))&&v.call(this,t,s,A,p,le,_,B,F))return}}_convertFromCellCoord(t){return(t-this.padding)/this.scale}_convertToCellCoord(t){return Math.max(0,Math.min(this.d-1,Math.floor(t*this.scale)+this.padding))}toArrayBuffer(){if(this.arrayBuffer)return this.arrayBuffer;const t=this.cells,s=3+this.cells.length+1+1;let A=0;for(let _=0;_<this.cells.length;_++)A+=this.cells[_].length;const p=new Int32Array(s+A+this.keys.length+this.bboxes.length);p[0]=this.extent,p[1]=this.n,p[2]=this.padding;let v=s;for(let _=0;_<t.length;_++){const B=t[_];p[3+_]=v,p.set(B,v),v+=B.length}return p[3+t.length]=v,p.set(this.keys,v),v+=this.keys.length,p[3+t.length+1]=v,p.set(this.bboxes,v),v+=this.bboxes.length,p.buffer}static serialize(t,s){const A=t.toArrayBuffer();return s&&s.push(A),{buffer:A}}static deserialize(t){return new Re(t.buffer)}}const Ke={};function $e(l,t,s={}){if(Ke[l])throw new Error(`${l} is already registered.`);Object.defineProperty(t,"_classRegistryKey",{value:l,writeable:!1}),Ke[l]={klass:t,omit:s.omit||[],shallow:s.shallow||[]}}$e("Object",Object),$e("Set",Set),$e("TransferableGridIndex",Re),$e("Color",an),$e("Error",Error),$e("AJAXError",ct),$e("ResolvedImage",uo),$e("StylePropertyFunction",Au),$e("StyleExpression",uc,{omit:["_evaluator"]}),$e("ZoomDependentExpression",NA),$e("ZoomConstantExpression",Oc),$e("CompoundExpression",fo,{omit:["_evaluate"]});for(const l in kc)kc[l]._classRegistryKey||$e(`Expression_${l}`,kc[l]);function kt(l){return l&&typeof ArrayBuffer<"u"&&(l instanceof ArrayBuffer||l.constructor&&l.constructor.name==="ArrayBuffer")}function Ye(l){return l.$name||l.constructor._classRegistryKey}function Bt(l){return!(function(t){if(t===null||typeof t!="object")return!1;const s=Ye(t);return!(!s||s==="Object")})(l)&&(l==null||typeof l=="boolean"||typeof l=="number"||typeof l=="string"||l instanceof Boolean||l instanceof Number||l instanceof String||l instanceof Date||l instanceof RegExp||l instanceof Blob||l instanceof Error||kt(l)||Vr(l)||ArrayBuffer.isView(l)||l instanceof ImageData)}function Pt(l,t){if(Bt(l))return(kt(l)||Vr(l))&&t&&t.push(l),ArrayBuffer.isView(l)&&t&&t.push(l.buffer),l instanceof ImageData&&t&&t.push(l.data.buffer),l;if(Array.isArray(l)){const v=[];for(const _ of l)v.push(Pt(_,t));return v}if(typeof l!="object")throw new Error("can't serialize object of type "+typeof l);const s=Ye(l);if(!s)throw new Error(`can't serialize object of unregistered class ${l.constructor.name}`);if(!Ke[s])throw new Error(`${s} is not registered.`);const{klass:A}=Ke[s],p=A.serialize?A.serialize(l,t):{};if(A.serialize){if(t&&p===t[t.length-1])throw new Error("statically serialized object won't survive transfer of $name property")}else{for(const v in l){if(!l.hasOwnProperty(v)||Ke[s].omit.indexOf(v)>=0)continue;const _=l[v];p[v]=Ke[s].shallow.indexOf(v)>=0?_:Pt(_,t)}l instanceof Error&&(p.message=l.message)}if(p.$name)throw new Error("$name property is reserved for worker serialization logic.");return s!=="Object"&&(p.$name=s),p}function Zt(l){if(Bt(l))return l;if(Array.isArray(l))return l.map(Zt);if(typeof l!="object")throw new Error("can't deserialize object of type "+typeof l);const t=Ye(l)||"Object";if(!Ke[t])throw new Error(`can't deserialize unregistered class ${t}`);const{klass:s}=Ke[t];if(!s)throw new Error(`can't deserialize unregistered class ${t}`);if(s.deserialize)return s.deserialize(l);const A=Object.create(s.prototype);for(const p of Object.keys(l)){if(p==="$name")continue;const v=l[p];A[p]=Ke[t].shallow.indexOf(p)>=0?v:Zt(v)}return A}class Ut{constructor(){this.first=!0}update(t,s){const A=Math.floor(t);return this.first?(this.first=!1,this.lastIntegerZoom=A,this.lastIntegerZoomTime=0,this.lastZoom=t,this.lastFloorZoom=A,!0):(this.lastFloorZoom>A?(this.lastIntegerZoom=A+1,this.lastIntegerZoomTime=s):this.lastFloorZoom<A&&(this.lastIntegerZoom=A,this.lastIntegerZoomTime=s),t!==this.lastZoom&&(this.lastZoom=t,this.lastFloorZoom=A,!0))}}function qt(l){return/[\u02EA\u02EB\u2E80-\u2FDF\u2FF0-\u303F\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FD-\u30FF\u3105-\u312F\u31A0-\u4DBF\u4E00-\uA48C\uA490-\uA4C6\uF900-\uFA6D\uFA70-\uFAD9\uFE10-\uFE1F\uFE30-\uFE4F\uFF00-\uFFEF]|\uD81B[\uDFE0-\uDFFF]|[\uD81C-\uD822\uD840-\uD868\uD86A-\uD86D\uD86F-\uD872\uD874-\uD879\uD880-\uD883\uD885-\uD88C][\uDC00-\uDFFF]|\uD823[\uDC00-\uDCD5\uDCFF-\uDD1E\uDD80-\uDDF2]|\uD82B[\uDFF0-\uDFFF]|\uD82C[\uDC00-\uDEFB]|\uD83C[\uDE00-\uDEFF]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEAD\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0\uDFF0-\uDFFF]|\uD87B[\uDC00-\uDE5D]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A\uDF50-\uDFFF]|\uD88D[\uDC00-\uDC79]/gim.test(String.fromCodePoint(l))}function Wt(l){return/[\u02EA\u02EB\u1100-\u11FF\u1400-\u167F\u18B0-\u18F5\u2E80-\u2E99\u2E9B-\u2EF3\u2F00-\u2FD5\u2FF0-\u3007\u3012\u3013\u3020-\u302F\u3031-\u303F\u3041-\u3096\u309D-\u30FB\u30FD-\u30FF\u3105-\u312F\u3131-\u318E\u3190-\uA48C\uA490-\uA4C6\uA960-\uA97C\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFE10-\uFE1F\uFE30-\uFE48\uFE50-\uFE57\uFE5F-\uFE62\uFE67-\uFE6F\uFF00-\uFF07\uFF0A-\uFF0C\uFF0E-\uFF19\uFF1F-\uFF3A\uFF3C\uFF3E\uFF40-\uFF5A\uFFE0-\uFFE2\uFFE4-\uFFE7]|\uD802[\uDD80-\uDD9F]|\uD805[\uDD80-\uDDFF]|\uD806[\uDE00-\uDEBF]|\uD811[\uDC00-\uDE7F]|\uD81B[\uDFE0-\uDFE4\uDFF0-\uDFF6]|[\uD81C-\uD822\uD83D\uD840-\uD868\uD86A-\uD86D\uD86F-\uD872\uD874-\uD879\uD880-\uD883\uD885-\uD88C][\uDC00-\uDFFF]|\uD823[\uDC00-\uDCD5\uDCFF-\uDD1E\uDD80-\uDDF2]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD30-\uDEFB]|\uD833[\uDEC0-\uDFCF]|\uD834[\uDC00-\uDDFF\uDEE0-\uDF7F]|\uD836[\uDC00-\uDEAF]|\uD83C[\uDC00-\uDE00\uDF00-\uDFFF]|\uD83E[\uDD00-\uDEFF]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEAD\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0\uDFF0-\uDFFF]|\uD87B[\uDC00-\uDE5D]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A\uDF50-\uDFFF]|\uD88D[\uDC00-\uDC79]/gim.test(String.fromCodePoint(l))}function tr(l){return/\s/u.test(String.fromCodePoint(l))}function er(l){for(const t of l)if(Wt(t.codePointAt(0)))return!0;return!1}function sn(l){for(const t of l)if(!Zr(t.codePointAt(0)))return!1;return!0}function zr(l){const t=l.map((s=>{try{return new RegExp(`\\p{sc=${s}}`,"u").source}catch{return null}})).filter((s=>s));return new RegExp(t.join("|"),"u")}const Cn=zr(["Arab","Dupl","Mong","Ougr","Syrc"]);function Zr(l){return!Cn.test(String.fromCodePoint(l))}function On(l){return!(Wt(l)||(t=l,/[\xA7\xA9\xAE\xB1\xBC-\xBE\xD7\xF7\u2016\u2020\u2021\u2030\u2031\u203B\u203C\u2042\u2047-\u2049\u2051\u2100-\u218F\u221E\u2234\u2235\u2300-\u2307\u230C-\u231F\u2324-\u2328\u232B\u237D-\u239A\u23BE-\u23CD\u23CF\u23D1-\u23DB\u23E2-\u2422\u2424-\u24FF\u25A0-\u2619\u2620-\u2767\u2776-\u2793\u2B12-\u2B2F\u2B50-\u2B59\u2BB8-\u2BEB\u3000-\u303F\u30A0-\u30FF\uE000-\uF8FF\uFE30-\uFE6F\uFF00-\uFFEF\uFFFC\uFFFD]|[\uDB80-\uDBFF][\uDC00-\uDFFF]/gim.test(String.fromCodePoint(t))));var t}const Ri=zr(["Adlm","Arab","Armi","Avst","Chrs","Cprt","Egyp","Elym","Gara","Hatr","Hebr","Hung","Khar","Lydi","Mand","Mani","Mend","Merc","Mero","Narb","Nbat","Nkoo","Orkh","Palm","Phli","Phlp","Phnx","Prti","Rohg","Samr","Sarb","Sogo","Syrc","Thaa","Todr","Yezi"]);function Sn(l){return Ri.test(String.fromCodePoint(l))}function Hr(l,t){return!(!t&&Sn(l)||/[\u0900-\u0DFF\u0F00-\u109F\u1780-\u17FF]/gim.test(String.fromCodePoint(l)))}function Fr(l){for(const t of l)if(Sn(t.codePointAt(0)))return!0;return!1}const pi=new class{constructor(){this.TIMEOUT=5e3,this.applyArabicShaping=null,this.processBidirectionalText=null,this.processStyledBidirectionalText=null,this.pluginStatus="unavailable",this.pluginURL=null,this.loadScriptResolve=()=>{}}setState(l){this.pluginStatus=l.pluginStatus,this.pluginURL=l.pluginURL}getState(){return{pluginStatus:this.pluginStatus,pluginURL:this.pluginURL}}setMethods(l){if(pi.isParsed())throw new Error("RTL text plugin already registered.");this.applyArabicShaping=l.applyArabicShaping,this.processBidirectionalText=l.processBidirectionalText,this.processStyledBidirectionalText=l.processStyledBidirectionalText,this.loadScriptResolve()}isParsed(){return this.applyArabicShaping!=null&&this.processBidirectionalText!=null&&this.processStyledBidirectionalText!=null}getRTLTextPluginStatus(){return this.pluginStatus}syncState(l,t){return o(this,void 0,void 0,(function*(){if(this.isParsed())return this.getState();if(l.pluginStatus!=="loading")return this.setState(l),l;const s=l.pluginURL,A=new Promise((v=>{this.loadScriptResolve=v}));t(s);const p=new Promise((v=>setTimeout((()=>v()),this.TIMEOUT)));if(yield Promise.race([A,p]),this.isParsed()){const v={pluginStatus:"loaded",pluginURL:s};return this.setState(v),v}throw this.setState({pluginStatus:"error",pluginURL:""}),new Error(`RTL Text Plugin failed to import scripts from ${s}`)}))}};class Mr{constructor(t,s){this.isSupportedScript=zn,this.zoom=t,s?(this.now=s.now||0,this.fadeDuration=s.fadeDuration||0,this.zoomHistory=s.zoomHistory||new Ut,this.transition=s.transition||{}):(this.now=0,this.fadeDuration=0,this.zoomHistory=new Ut,this.transition={})}crossFadingFactor(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){const t=this.zoom,s=t-Math.floor(t),A=this.crossFadingFactor();return t>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:s+(1-s)*A}:{fromScale:.5,toScale:1,t:1-(1-A)*s}}}function zn(l){return(function(t,s){for(const A of t)if(!Hr(A.codePointAt(0),s))return!1;return!0})(l,pi.getRTLTextPluginStatus()==="loaded")}const mi="-transition";class as{constructor(t,s,A){this.property=t,this.value=s,this.expression=(function(p,v,_){if(AA(p))return new Au(p,v);if(Ql(p)){const B=hc(p,v,_);if(B.result==="error")throw new Error(B.value.map((F=>`${F.key}: ${F.message}`)).join(", "));return B.value}{let B=p;return v.type==="color"&&typeof p=="string"?B=an.parse(p):v.type!=="padding"||typeof p!="number"&&!Array.isArray(p)?v.type!=="numberArray"||typeof p!="number"&&!Array.isArray(p)?v.type!=="colorArray"||typeof p!="string"&&!Array.isArray(p)?v.type==="variableAnchorOffsetCollection"&&Array.isArray(p)?B=Wi.parse(p):v.type==="projectionDefinition"&&typeof p=="string"&&(B=ws.parse(p)):B=cn.parse(p):B=Jn.parse(p):B=Wr.parse(p),{globalStateRefs:new Set,_globalState:null,kind:"constant",evaluate:()=>B}}})(s===void 0?t.specification.default:s,t.specification,A)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}getGlobalStateRefs(){return this.expression.globalStateRefs||new Set}possiblyEvaluate(t,s,A){return this.property.possiblyEvaluate(this,t,s,A)}}class ls{constructor(t,s){this.property=t,this.value=new as(t,void 0,s)}transitioned(t,s){return new Bs(this.property,this.value,s,_t({},t.transition,this.transition),t.now)}untransitioned(){return new Bs(this.property,this.value,null,{},0)}}class Ni{constructor(t,s){this._properties=t,this._values=Object.create(t.defaultTransitionablePropertyValues),this._globalState=s}getValue(t){return or(this._values[t].value.value)}setValue(t,s){Object.prototype.hasOwnProperty.call(this._values,t)||(this._values[t]=new ls(this._values[t].property,this._globalState)),this._values[t].value=new as(this._values[t].property,s===null?void 0:or(s),this._globalState)}getTransition(t){return or(this._values[t].transition)}setTransition(t,s){Object.prototype.hasOwnProperty.call(this._values,t)||(this._values[t]=new ls(this._values[t].property,this._globalState)),this._values[t].transition=or(s)||void 0}serialize(){const t={};for(const s of Object.keys(this._values)){const A=this.getValue(s);A!==void 0&&(t[s]=A);const p=this.getTransition(s);p!==void 0&&(t[`${s}${mi}`]=p)}return t}transitioned(t,s){const A=new Cs(this._properties);for(const p of Object.keys(this._values))A._values[p]=this._values[p].transitioned(t,s._values[p]);return A}untransitioned(){const t=new Cs(this._properties);for(const s of Object.keys(this._values))t._values[s]=this._values[s].untransitioned();return t}}class Bs{constructor(t,s,A,p,v){this.property=t,this.value=s,this.begin=v+p.delay||0,this.end=this.begin+p.duration||0,t.specification.transition&&(p.delay||p.duration)&&(this.prior=A)}possiblyEvaluate(t,s,A){const p=t.now||0,v=this.value.possiblyEvaluate(t,s,A),_=this.prior;if(_){if(p>this.end)return this.prior=null,v;if(this.value.isDataDriven())return this.prior=null,v;if(p<this.begin)return _.possiblyEvaluate(t,s,A);{const B=(p-this.begin)/(this.end-this.begin);return this.property.interpolate(_.possiblyEvaluate(t,s,A),v,Ee(B))}}return v}}class Cs{constructor(t){this._properties=t,this._values=Object.create(t.defaultTransitioningPropertyValues)}possiblyEvaluate(t,s,A){const p=new Yn(this._properties);for(const v of Object.keys(this._values))p._values[v]=this._values[v].possiblyEvaluate(t,s,A);return p}hasTransition(){for(const t of Object.keys(this._values))if(this._values[t].prior)return!0;return!1}}class Qi{constructor(t,s){this._properties=t,this._values=Object.create(t.defaultPropertyValues),this._globalState=s}hasValue(t){return this._values[t].value!==void 0}getValue(t){return or(this._values[t].value)}setValue(t,s){this._values[t]=new as(this._values[t].property,s===null?void 0:or(s),this._globalState)}serialize(){const t={};for(const s of Object.keys(this._values)){const A=this.getValue(s);A!==void 0&&(t[s]=A)}return t}possiblyEvaluate(t,s,A){const p=new Yn(this._properties);for(const v of Object.keys(this._values))p._values[v]=this._values[v].possiblyEvaluate(t,s,A);return p}}class Fn{constructor(t,s,A){this.property=t,this.value=s,this.parameters=A}isConstant(){return this.value.kind==="constant"}constantOr(t){return this.value.kind==="constant"?this.value.value:t}evaluate(t,s,A,p){return this.property.evaluate(this.value,this.parameters,t,s,A,p)}}class Yn{constructor(t){this._properties=t,this._values=Object.create(t.defaultPossiblyEvaluatedValues)}get(t){return this._values[t]}}class yr{constructor(t){this.specification=t}possiblyEvaluate(t,s){if(t.isDataDriven())throw new Error("Value should not be data driven");return t.expression.evaluate(s)}interpolate(t,s,A){const p=Br[this.specification.type];return p?p(t,s,A):t}}class br{constructor(t,s){this.specification=t,this.overrides=s}possiblyEvaluate(t,s,A,p){return new Fn(this,t.expression.kind==="constant"||t.expression.kind==="camera"?{kind:"constant",value:t.expression.evaluate(s,null,{},A,p)}:t.expression,s)}interpolate(t,s,A){if(t.value.kind!=="constant"||s.value.kind!=="constant")return t;if(t.value.value===void 0||s.value.value===void 0)return new Fn(this,{kind:"constant",value:void 0},t.parameters);const p=Br[this.specification.type];if(p){const v=p(t.value.value,s.value.value,A);return new Fn(this,{kind:"constant",value:v},t.parameters)}return t}evaluate(t,s,A,p,v,_){return t.kind==="constant"?t.value:t.evaluate(s,A,p,v,_)}}class Ti extends br{possiblyEvaluate(t,s,A,p){if(t.value===void 0)return new Fn(this,{kind:"constant",value:void 0},s);if(t.expression.kind==="constant"){const v=t.expression.evaluate(s,null,{},A,p),_=t.property.specification.type==="resolvedImage"&&typeof v!="string"?v.name:v,B=this._calculate(_,_,_,s);return new Fn(this,{kind:"constant",value:B},s)}if(t.expression.kind==="camera"){const v=this._calculate(t.expression.evaluate({zoom:s.zoom-1}),t.expression.evaluate({zoom:s.zoom}),t.expression.evaluate({zoom:s.zoom+1}),s);return new Fn(this,{kind:"constant",value:v},s)}return new Fn(this,t.expression,s)}evaluate(t,s,A,p,v,_){if(t.kind==="source"){const B=t.evaluate(s,A,p,v,_);return this._calculate(B,B,B,s)}return t.kind==="composite"?this._calculate(t.evaluate({zoom:Math.floor(s.zoom)-1},A,p),t.evaluate({zoom:Math.floor(s.zoom)},A,p),t.evaluate({zoom:Math.floor(s.zoom)+1},A,p),s):t.value}_calculate(t,s,A,p){return p.zoom>p.zoomHistory.lastIntegerZoom?{from:t,to:s}:{from:A,to:s}}interpolate(t){return t}}class ji{constructor(t){this.specification=t}possiblyEvaluate(t,s,A,p){if(t.value!==void 0){if(t.expression.kind==="constant"){const v=t.expression.evaluate(s,null,{},A,p);return this._calculate(v,v,v,s)}return this._calculate(t.expression.evaluate(new Mr(Math.floor(s.zoom-1),s)),t.expression.evaluate(new Mr(Math.floor(s.zoom),s)),t.expression.evaluate(new Mr(Math.floor(s.zoom+1),s)),s)}}_calculate(t,s,A,p){return p.zoom>p.zoomHistory.lastIntegerZoom?{from:t,to:s}:{from:A,to:s}}interpolate(t){return t}}class ei{constructor(t){this.specification=t}possiblyEvaluate(t,s,A,p){return!!t.expression.evaluate(s,null,{},A,p)}interpolate(){return!1}}class ci{constructor(t){this.properties=t,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(const s in t){const A=t[s];A.specification.overridable&&this.overridableProperties.push(s);const p=this.defaultPropertyValues[s]=new as(A,void 0,void 0),v=this.defaultTransitionablePropertyValues[s]=new ls(A,void 0);this.defaultTransitioningPropertyValues[s]=v.untransitioned(),this.defaultPossiblyEvaluatedValues[s]=p.possiblyEvaluate({})}}}$e("DataDrivenProperty",br),$e("DataConstantProperty",yr),$e("CrossFadedDataDrivenProperty",Ti),$e("CrossFadedProperty",ji),$e("ColorRampProperty",ei);class Nn extends Tr{constructor(t,s,A){if(super(),this.id=t.id,this.type=t.type,this._globalState=A,this._featureFilter={filter:()=>!0,needGeometry:!1,getGlobalStateRefs:()=>new Set},t.type!=="custom"&&(this.metadata=t.metadata,this.minzoom=t.minzoom,this.maxzoom=t.maxzoom,t.type!=="background"&&(this.source=t.source,this.sourceLayer=t["source-layer"],this.filter=t.filter,this._featureFilter=dc(t.filter,A)),s.layout&&(this._unevaluatedLayout=new Qi(s.layout,A)),s.paint)){this._transitionablePaint=new Ni(s.paint,A);for(const p in t.paint)this.setPaintProperty(p,t.paint[p],{validate:!1});for(const p in t.layout)this.setLayoutProperty(p,t.layout[p],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new Yn(s.paint)}}setFilter(t){this.filter=t,this._featureFilter=dc(t,this._globalState)}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(t){return t==="visibility"?this.visibility:this._unevaluatedLayout.getValue(t)}getLayoutAffectingGlobalStateRefs(){const t=new Set;if(this._unevaluatedLayout)for(const s in this._unevaluatedLayout._values){const A=this._unevaluatedLayout._values[s];for(const p of A.getGlobalStateRefs())t.add(p)}for(const s of this._featureFilter.getGlobalStateRefs())t.add(s);return t}getPaintAffectingGlobalStateRefs(){var t;const s=new globalThis.Map;if(this._transitionablePaint)for(const A in this._transitionablePaint._values){const p=this._transitionablePaint._values[A].value;for(const v of p.getGlobalStateRefs()){const _=(t=s.get(v))!==null&&t!==void 0?t:[];_.push({name:A,value:p.value}),s.set(v,_)}}return s}setLayoutProperty(t,s,A={}){s!=null&&this._validate(Se,`layers.${this.id}.layout.${t}`,t,s,A)||(t!=="visibility"?this._unevaluatedLayout.setValue(t,s):this.visibility=s)}getPaintProperty(t){return t.endsWith(mi)?this._transitionablePaint.getTransition(t.slice(0,-11)):this._transitionablePaint.getValue(t)}setPaintProperty(t,s,A={}){if(s!=null&&this._validate(we,`layers.${this.id}.paint.${t}`,t,s,A))return!1;if(t.endsWith(mi))return this._transitionablePaint.setTransition(t.slice(0,-11),s||void 0),!1;{const p=this._transitionablePaint._values[t],v=p.property.specification["property-type"]==="cross-faded-data-driven",_=p.value.isDataDriven(),B=p.value;this._transitionablePaint.setValue(t,s),this._handleSpecialPaintPropertyUpdate(t);const F=this._transitionablePaint._values[t].value;return F.isDataDriven()||_||v||this._handleOverridablePaintPropertyUpdate(t,B,F)}}_handleSpecialPaintPropertyUpdate(t){}_handleOverridablePaintPropertyUpdate(t,s,A){return!1}isHidden(t,s=!1){return!!(this.minzoom&&t<(s?Math.floor(this.minzoom):this.minzoom))||!!(this.maxzoom&&t>=this.maxzoom)||this.visibility==="none"}updateTransitions(t){this._transitioningPaint=this._transitionablePaint.transitioned(t,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(t,s){t.getCrossfadeParameters&&(this._crossfadeParameters=t.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(t,void 0,s)),this.paint=this._transitioningPaint.possiblyEvaluate(t,void 0,s)}serialize(){const t={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(t.layout=t.layout||{},t.layout.visibility=this.visibility),Gt(t,((s,A)=>!(s===void 0||A==="layout"&&!Object.keys(s).length||A==="paint"&&!Object.keys(s).length)))}_validate(t,s,A,p,v={}){return(!v||v.validate!==!1)&&Me(this,t.call($,{key:s,layerType:this.type,objectKey:A,value:p,styleSpec:mt,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const t in this.paint._values){const s=this.paint.get(t);if(s instanceof Fn&&So(s.property.specification)&&(s.value.kind==="source"||s.value.kind==="composite")&&s.value.isStateDependent)return!0}return!1}}let wi;var Es={get paint(){return wi=wi||new ci({"raster-opacity":new yr(mt.paint_raster["raster-opacity"]),"raster-hue-rotate":new yr(mt.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new yr(mt.paint_raster["raster-brightness-min"]),"raster-brightness-max":new yr(mt.paint_raster["raster-brightness-max"]),"raster-saturation":new yr(mt.paint_raster["raster-saturation"]),"raster-contrast":new yr(mt.paint_raster["raster-contrast"]),"raster-resampling":new yr(mt.paint_raster["raster-resampling"]),"raster-fade-duration":new yr(mt.paint_raster["raster-fade-duration"])})}};class Ys extends Nn{constructor(t,s){super(t,Es,s)}}const Fo={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class Mi{constructor(t,s){this._structArray=t,this._pos1=s*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class In{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(t,s){return t._trim(),s&&(t.isTransferred=!0,s.push(t.arrayBuffer)),{length:t.length,arrayBuffer:t.arrayBuffer}}static deserialize(t){const s=Object.create(this.prototype);return s.arrayBuffer=t.arrayBuffer,s.length=t.length,s.capacity=t.arrayBuffer.byteLength/s.bytesPerElement,s._refreshViews(),s}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(t){this.reserve(t),this.length=t}reserve(t){if(t>this.capacity){this.capacity=Math.max(t,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const s=this.uint8;this._refreshViews(),s&&this.uint8.set(s)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}}function Vn(l,t=1){let s=0,A=0;return{members:l.map((p=>{const v=Fo[p.type].BYTES_PER_ELEMENT,_=s=xi(s,Math.max(t,v)),B=p.components||1;return A=Math.max(A,v),s+=v*B,{name:p.name,type:p.type,components:B,offset:_}})),size:xi(s,Math.max(A,t)),alignment:t}}function xi(l,t){return Math.ceil(l/t)*t}class Ss extends In{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,s){const A=this.length;return this.resize(A+1),this.emplace(A,t,s)}emplace(t,s,A){const p=2*t;return this.int16[p+0]=s,this.int16[p+1]=A,t}}Ss.prototype.bytesPerElement=4,$e("StructArrayLayout2i4",Ss);class Io extends In{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,s,A){const p=this.length;return this.resize(p+1),this.emplace(p,t,s,A)}emplace(t,s,A,p){const v=3*t;return this.int16[v+0]=s,this.int16[v+1]=A,this.int16[v+2]=p,t}}Io.prototype.bytesPerElement=6,$e("StructArrayLayout3i6",Io);class Js extends In{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,s,A,p){const v=this.length;return this.resize(v+1),this.emplace(v,t,s,A,p)}emplace(t,s,A,p,v){const _=4*t;return this.int16[_+0]=s,this.int16[_+1]=A,this.int16[_+2]=p,this.int16[_+3]=v,t}}Js.prototype.bytesPerElement=8,$e("StructArrayLayout4i8",Js);class Fs extends In{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,s,A,p,v,_){const B=this.length;return this.resize(B+1),this.emplace(B,t,s,A,p,v,_)}emplace(t,s,A,p,v,_,B){const F=6*t;return this.int16[F+0]=s,this.int16[F+1]=A,this.int16[F+2]=p,this.int16[F+3]=v,this.int16[F+4]=_,this.int16[F+5]=B,t}}Fs.prototype.bytesPerElement=12,$e("StructArrayLayout2i4i12",Fs);class Ji extends In{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,s,A,p,v,_){const B=this.length;return this.resize(B+1),this.emplace(B,t,s,A,p,v,_)}emplace(t,s,A,p,v,_,B){const F=4*t,U=8*t;return this.int16[F+0]=s,this.int16[F+1]=A,this.uint8[U+4]=p,this.uint8[U+5]=v,this.uint8[U+6]=_,this.uint8[U+7]=B,t}}Ji.prototype.bytesPerElement=8,$e("StructArrayLayout2i4ub8",Ji);class za extends In{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,s){const A=this.length;return this.resize(A+1),this.emplace(A,t,s)}emplace(t,s,A){const p=2*t;return this.float32[p+0]=s,this.float32[p+1]=A,t}}za.prototype.bytesPerElement=8,$e("StructArrayLayout2f8",za);class Ha extends In{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,s,A,p,v,_,B,F,U,Q){const K=this.length;return this.resize(K+1),this.emplace(K,t,s,A,p,v,_,B,F,U,Q)}emplace(t,s,A,p,v,_,B,F,U,Q,K){const X=10*t;return this.uint16[X+0]=s,this.uint16[X+1]=A,this.uint16[X+2]=p,this.uint16[X+3]=v,this.uint16[X+4]=_,this.uint16[X+5]=B,this.uint16[X+6]=F,this.uint16[X+7]=U,this.uint16[X+8]=Q,this.uint16[X+9]=K,t}}Ha.prototype.bytesPerElement=20,$e("StructArrayLayout10ui20",Ha);class Gc extends In{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,s,A,p,v,_,B,F){const U=this.length;return this.resize(U+1),this.emplace(U,t,s,A,p,v,_,B,F)}emplace(t,s,A,p,v,_,B,F,U){const Q=8*t;return this.uint16[Q+0]=s,this.uint16[Q+1]=A,this.uint16[Q+2]=p,this.uint16[Q+3]=v,this.uint16[Q+4]=_,this.uint16[Q+5]=B,this.uint16[Q+6]=F,this.uint16[Q+7]=U,t}}Gc.prototype.bytesPerElement=16,$e("StructArrayLayout8ui16",Gc);class ja extends In{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,s,A,p,v,_,B,F,U,Q,K,X){const J=this.length;return this.resize(J+1),this.emplace(J,t,s,A,p,v,_,B,F,U,Q,K,X)}emplace(t,s,A,p,v,_,B,F,U,Q,K,X,J){const oe=12*t;return this.int16[oe+0]=s,this.int16[oe+1]=A,this.int16[oe+2]=p,this.int16[oe+3]=v,this.uint16[oe+4]=_,this.uint16[oe+5]=B,this.uint16[oe+6]=F,this.uint16[oe+7]=U,this.int16[oe+8]=Q,this.int16[oe+9]=K,this.int16[oe+10]=X,this.int16[oe+11]=J,t}}ja.prototype.bytesPerElement=24,$e("StructArrayLayout4i4ui4i24",ja);class Hl extends In{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,s,A){const p=this.length;return this.resize(p+1),this.emplace(p,t,s,A)}emplace(t,s,A,p){const v=3*t;return this.float32[v+0]=s,this.float32[v+1]=A,this.float32[v+2]=p,t}}Hl.prototype.bytesPerElement=12,$e("StructArrayLayout3f12",Hl);class VA extends In{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(t){const s=this.length;return this.resize(s+1),this.emplace(s,t)}emplace(t,s){return this.uint32[1*t+0]=s,t}}VA.prototype.bytesPerElement=4,$e("StructArrayLayout1ul4",VA);class gi extends In{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,s,A,p,v,_,B,F,U){const Q=this.length;return this.resize(Q+1),this.emplace(Q,t,s,A,p,v,_,B,F,U)}emplace(t,s,A,p,v,_,B,F,U,Q){const K=10*t,X=5*t;return this.int16[K+0]=s,this.int16[K+1]=A,this.int16[K+2]=p,this.int16[K+3]=v,this.int16[K+4]=_,this.int16[K+5]=B,this.uint32[X+3]=F,this.uint16[K+8]=U,this.uint16[K+9]=Q,t}}gi.prototype.bytesPerElement=20,$e("StructArrayLayout6i1ul2ui20",gi);class Wo extends In{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,s,A,p,v,_){const B=this.length;return this.resize(B+1),this.emplace(B,t,s,A,p,v,_)}emplace(t,s,A,p,v,_,B){const F=6*t;return this.int16[F+0]=s,this.int16[F+1]=A,this.int16[F+2]=p,this.int16[F+3]=v,this.int16[F+4]=_,this.int16[F+5]=B,t}}Wo.prototype.bytesPerElement=12,$e("StructArrayLayout2i2i2i12",Wo);class pA extends In{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,s,A,p,v){const _=this.length;return this.resize(_+1),this.emplace(_,t,s,A,p,v)}emplace(t,s,A,p,v,_){const B=4*t,F=8*t;return this.float32[B+0]=s,this.float32[B+1]=A,this.float32[B+2]=p,this.int16[F+6]=v,this.int16[F+7]=_,t}}pA.prototype.bytesPerElement=16,$e("StructArrayLayout2f1f2i16",pA);class fu extends In{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,s,A,p,v,_){const B=this.length;return this.resize(B+1),this.emplace(B,t,s,A,p,v,_)}emplace(t,s,A,p,v,_,B){const F=16*t,U=4*t,Q=8*t;return this.uint8[F+0]=s,this.uint8[F+1]=A,this.float32[U+1]=p,this.float32[U+2]=v,this.int16[Q+6]=_,this.int16[Q+7]=B,t}}fu.prototype.bytesPerElement=16,$e("StructArrayLayout2ub2f2i16",fu);class jl extends In{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,s,A){const p=this.length;return this.resize(p+1),this.emplace(p,t,s,A)}emplace(t,s,A,p){const v=3*t;return this.uint16[v+0]=s,this.uint16[v+1]=A,this.uint16[v+2]=p,t}}jl.prototype.bytesPerElement=6,$e("StructArrayLayout3ui6",jl);class Vl extends In{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,s,A,p,v,_,B,F,U,Q,K,X,J,oe,le,he,be){const rt=this.length;return this.resize(rt+1),this.emplace(rt,t,s,A,p,v,_,B,F,U,Q,K,X,J,oe,le,he,be)}emplace(t,s,A,p,v,_,B,F,U,Q,K,X,J,oe,le,he,be,rt){const Fe=24*t,Ue=12*t,at=48*t;return this.int16[Fe+0]=s,this.int16[Fe+1]=A,this.uint16[Fe+2]=p,this.uint16[Fe+3]=v,this.uint32[Ue+2]=_,this.uint32[Ue+3]=B,this.uint32[Ue+4]=F,this.uint16[Fe+10]=U,this.uint16[Fe+11]=Q,this.uint16[Fe+12]=K,this.float32[Ue+7]=X,this.float32[Ue+8]=J,this.uint8[at+36]=oe,this.uint8[at+37]=le,this.uint8[at+38]=he,this.uint32[Ue+10]=be,this.int16[Fe+22]=rt,t}}Vl.prototype.bytesPerElement=48,$e("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",Vl);class Va extends In{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,s,A,p,v,_,B,F,U,Q,K,X,J,oe,le,he,be,rt,Fe,Ue,at,dt,Mt,Xt,Vt,ir,wr,ar){const $t=this.length;return this.resize($t+1),this.emplace($t,t,s,A,p,v,_,B,F,U,Q,K,X,J,oe,le,he,be,rt,Fe,Ue,at,dt,Mt,Xt,Vt,ir,wr,ar)}emplace(t,s,A,p,v,_,B,F,U,Q,K,X,J,oe,le,he,be,rt,Fe,Ue,at,dt,Mt,Xt,Vt,ir,wr,ar,$t){const Ot=32*t,Lr=16*t;return this.int16[Ot+0]=s,this.int16[Ot+1]=A,this.int16[Ot+2]=p,this.int16[Ot+3]=v,this.int16[Ot+4]=_,this.int16[Ot+5]=B,this.int16[Ot+6]=F,this.int16[Ot+7]=U,this.uint16[Ot+8]=Q,this.uint16[Ot+9]=K,this.uint16[Ot+10]=X,this.uint16[Ot+11]=J,this.uint16[Ot+12]=oe,this.uint16[Ot+13]=le,this.uint16[Ot+14]=he,this.uint16[Ot+15]=be,this.uint16[Ot+16]=rt,this.uint16[Ot+17]=Fe,this.uint16[Ot+18]=Ue,this.uint16[Ot+19]=at,this.uint16[Ot+20]=dt,this.uint16[Ot+21]=Mt,this.uint16[Ot+22]=Xt,this.uint32[Lr+12]=Vt,this.float32[Lr+13]=ir,this.float32[Lr+14]=wr,this.uint16[Ot+30]=ar,this.uint16[Ot+31]=$t,t}}Va.prototype.bytesPerElement=64,$e("StructArrayLayout8i15ui1ul2f2ui64",Va);class bi extends In{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t){const s=this.length;return this.resize(s+1),this.emplace(s,t)}emplace(t,s){return this.float32[1*t+0]=s,t}}bi.prototype.bytesPerElement=4,$e("StructArrayLayout1f4",bi);class ki extends In{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,s,A){const p=this.length;return this.resize(p+1),this.emplace(p,t,s,A)}emplace(t,s,A,p){const v=3*t;return this.uint16[6*t+0]=s,this.float32[v+1]=A,this.float32[v+2]=p,t}}ki.prototype.bytesPerElement=12,$e("StructArrayLayout1ui2f12",ki);class es extends In{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,s,A){const p=this.length;return this.resize(p+1),this.emplace(p,t,s,A)}emplace(t,s,A,p){const v=4*t;return this.uint32[2*t+0]=s,this.uint16[v+2]=A,this.uint16[v+3]=p,t}}es.prototype.bytesPerElement=8,$e("StructArrayLayout1ul2ui8",es);class Kc extends In{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,s){const A=this.length;return this.resize(A+1),this.emplace(A,t,s)}emplace(t,s,A){const p=2*t;return this.uint16[p+0]=s,this.uint16[p+1]=A,t}}Kc.prototype.bytesPerElement=4,$e("StructArrayLayout2ui4",Kc);class Ga extends In{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t){const s=this.length;return this.resize(s+1),this.emplace(s,t)}emplace(t,s){return this.uint16[1*t+0]=s,t}}Ga.prototype.bytesPerElement=2,$e("StructArrayLayout1ui2",Ga);class qc extends In{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,s,A,p){const v=this.length;return this.resize(v+1),this.emplace(v,t,s,A,p)}emplace(t,s,A,p,v){const _=4*t;return this.float32[_+0]=s,this.float32[_+1]=A,this.float32[_+2]=p,this.float32[_+3]=v,t}}qc.prototype.bytesPerElement=16,$e("StructArrayLayout4f16",qc);class x extends Mi{get anchorPointX(){return this._structArray.int16[this._pos2+0]}get anchorPointY(){return this._structArray.int16[this._pos2+1]}get x1(){return this._structArray.int16[this._pos2+2]}get y1(){return this._structArray.int16[this._pos2+3]}get x2(){return this._structArray.int16[this._pos2+4]}get y2(){return this._structArray.int16[this._pos2+5]}get featureIndex(){return this._structArray.uint32[this._pos4+3]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+8]}get bucketIndex(){return this._structArray.uint16[this._pos2+9]}get anchorPoint(){return new w(this.anchorPointX,this.anchorPointY)}}x.prototype.size=20;class n extends gi{get(t){return new x(this,t)}}$e("CollisionBoxArray",n);class c extends Mi{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+2]}get numGlyphs(){return this._structArray.uint16[this._pos2+3]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+2]}get lineStartIndex(){return this._structArray.uint32[this._pos4+3]}get lineLength(){return this._structArray.uint32[this._pos4+4]}get segment(){return this._structArray.uint16[this._pos2+10]}get lowerSize(){return this._structArray.uint16[this._pos2+11]}get upperSize(){return this._structArray.uint16[this._pos2+12]}get lineOffsetX(){return this._structArray.float32[this._pos4+7]}get lineOffsetY(){return this._structArray.float32[this._pos4+8]}get writingMode(){return this._structArray.uint8[this._pos1+36]}get placedOrientation(){return this._structArray.uint8[this._pos1+37]}set placedOrientation(t){this._structArray.uint8[this._pos1+37]=t}get hidden(){return this._structArray.uint8[this._pos1+38]}set hidden(t){this._structArray.uint8[this._pos1+38]=t}get crossTileID(){return this._structArray.uint32[this._pos4+10]}set crossTileID(t){this._structArray.uint32[this._pos4+10]=t}get associatedIconIndex(){return this._structArray.int16[this._pos2+22]}}c.prototype.size=48;class f extends Vl{get(t){return new c(this,t)}}$e("PlacedSymbolArray",f);class y extends Mi{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+2]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+3]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+4]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+5]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+6]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+7]}get key(){return this._structArray.uint16[this._pos2+8]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+9]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+10]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+11]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+12]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+13]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+14]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get featureIndex(){return this._structArray.uint16[this._pos2+17]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+18]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+19]}get numIconVertices(){return this._structArray.uint16[this._pos2+20]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+21]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+22]}get crossTileID(){return this._structArray.uint32[this._pos4+12]}set crossTileID(t){this._structArray.uint32[this._pos4+12]=t}get textBoxScale(){return this._structArray.float32[this._pos4+13]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+14]}get textAnchorOffsetStartIndex(){return this._structArray.uint16[this._pos2+30]}get textAnchorOffsetEndIndex(){return this._structArray.uint16[this._pos2+31]}}y.prototype.size=64;class b extends Va{get(t){return new y(this,t)}}$e("SymbolInstanceArray",b);class S extends bi{getoffsetX(t){return this.float32[1*t+0]}}$e("GlyphOffsetArray",S);class M extends Io{getx(t){return this.int16[3*t+0]}gety(t){return this.int16[3*t+1]}gettileUnitDistanceFromAnchor(t){return this.int16[3*t+2]}}$e("SymbolLineVertexArray",M);class N extends Mi{get textAnchor(){return this._structArray.uint16[this._pos2+0]}get textOffset0(){return this._structArray.float32[this._pos4+1]}get textOffset1(){return this._structArray.float32[this._pos4+2]}}N.prototype.size=12;class j extends ki{get(t){return new N(this,t)}}$e("TextAnchorOffsetArray",j);class q extends Mi{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}}q.prototype.size=8;class ne extends es{get(t){return new q(this,t)}}$e("FeatureIndexArray",ne);class te extends Ss{}class ue extends Ss{}class _e extends Ss{}class De extends Fs{}class ze extends Ji{}class Oe extends za{}class Ge extends Ha{}class lt extends Gc{}class Ze extends ja{}class At extends Hl{}class ft extends VA{}class st extends Wo{}class wt extends fu{}class Dt extends jl{}class Lt extends Kc{}const Rt=Vn([{name:"a_pos",components:2,type:"Int16"}],4),{members:Qt}=Rt;class nr{constructor(t=[]){this._forceNewSegmentOnNextPrepare=!1,this.segments=t}prepareSegment(t,s,A,p){const v=this.segments[this.segments.length-1];return t>nr.MAX_VERTEX_ARRAY_LENGTH&&_r(`Max vertices per segment is ${nr.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${t}. Consider using the \`fillLargeMeshArrays\` function if you require meshes with more than ${nr.MAX_VERTEX_ARRAY_LENGTH} vertices.`),this._forceNewSegmentOnNextPrepare||!v||v.vertexLength+t>nr.MAX_VERTEX_ARRAY_LENGTH||v.sortKey!==p?this.createNewSegment(s,A,p):v}createNewSegment(t,s,A){const p={vertexOffset:t.length,primitiveOffset:s.length,vertexLength:0,primitiveLength:0,vaos:{}};return A!==void 0&&(p.sortKey=A),this._forceNewSegmentOnNextPrepare=!1,this.segments.push(p),p}getOrCreateLatestSegment(t,s,A){return this.prepareSegment(0,t,s,A)}forceNewSegmentOnNextPrepare(){this._forceNewSegmentOnNextPrepare=!0}get(){return this.segments}destroy(){for(const t of this.segments)for(const s in t.vaos)t.vaos[s].destroy()}static simpleSegment(t,s,A,p){return new nr([{vertexOffset:t,primitiveOffset:s,vertexLength:A,primitiveLength:p,vaos:{},sortKey:0}])}}function ur(l,t){return 256*(l=nt(Math.floor(l),0,255))+nt(Math.floor(t),0,255)}nr.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,$e("SegmentVector",nr);const rr=Vn([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]),Rr=Vn([{name:"a_dasharray_from",components:4,type:"Uint16"},{name:"a_dasharray_to",components:4,type:"Uint16"}]);var vn,Ai,Oi,ui={exports:{}},Vi={exports:{}},Pi={exports:{}},Is=(function(){if(Oi)return ui.exports;Oi=1;var l=(vn||(vn=1,Vi.exports=function(s,A){var p,v,_,B,F,U,Q,K;for(v=s.length-(p=3&s.length),_=A,F=3432918353,U=461845907,K=0;K<v;)Q=255&s.charCodeAt(K)|(255&s.charCodeAt(++K))<<8|(255&s.charCodeAt(++K))<<16|(255&s.charCodeAt(++K))<<24,++K,_=27492+(65535&(B=5*(65535&(_=(_^=Q=(65535&(Q=(Q=(65535&Q)*F+(((Q>>>16)*F&65535)<<16)&4294967295)<<15|Q>>>17))*U+(((Q>>>16)*U&65535)<<16)&4294967295)<<13|_>>>19))+((5*(_>>>16)&65535)<<16)&4294967295))+((58964+(B>>>16)&65535)<<16);switch(Q=0,p){case 3:Q^=(255&s.charCodeAt(K+2))<<16;case 2:Q^=(255&s.charCodeAt(K+1))<<8;case 1:_^=Q=(65535&(Q=(Q=(65535&(Q^=255&s.charCodeAt(K)))*F+(((Q>>>16)*F&65535)<<16)&4294967295)<<15|Q>>>17))*U+(((Q>>>16)*U&65535)<<16)&4294967295}return _^=s.length,_=2246822507*(65535&(_^=_>>>16))+((2246822507*(_>>>16)&65535)<<16)&4294967295,_=3266489909*(65535&(_^=_>>>13))+((3266489909*(_>>>16)&65535)<<16)&4294967295,(_^=_>>>16)>>>0}),Vi.exports),t=(Ai||(Ai=1,Pi.exports=function(s,A){for(var p,v=s.length,_=A^v,B=0;v>=4;)p=1540483477*(65535&(p=255&s.charCodeAt(B)|(255&s.charCodeAt(++B))<<8|(255&s.charCodeAt(++B))<<16|(255&s.charCodeAt(++B))<<24))+((1540483477*(p>>>16)&65535)<<16),_=1540483477*(65535&_)+((1540483477*(_>>>16)&65535)<<16)^(p=1540483477*(65535&(p^=p>>>24))+((1540483477*(p>>>16)&65535)<<16)),v-=4,++B;switch(v){case 3:_^=(255&s.charCodeAt(B+2))<<16;case 2:_^=(255&s.charCodeAt(B+1))<<8;case 1:_=1540483477*(65535&(_^=255&s.charCodeAt(B)))+((1540483477*(_>>>16)&65535)<<16)}return _=1540483477*(65535&(_^=_>>>13))+((1540483477*(_>>>16)&65535)<<16),(_^=_>>>15)>>>0}),Pi.exports);return ui.exports=l,ui.exports.murmur3=l,ui.exports.murmur2=t,ui.exports})(),Gi=E(Is);class eo{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(t,s,A,p){this.ids.push(Ts(t)),this.positions.push(s,A,p)}getPositions(t){if(!this.indexed)throw new Error("Trying to get index, but feature positions are not indexed");const s=Ts(t);let A=0,p=this.ids.length-1;for(;A<p;){const _=A+p>>1;this.ids[_]>=s?p=_:A=_+1}const v=[];for(;this.ids[A]===s;)v.push({index:this.positions[3*A],start:this.positions[3*A+1],end:this.positions[3*A+2]}),A++;return v}static serialize(t,s){const A=new Float64Array(t.ids),p=new Uint32Array(t.positions);return hi(A,p,0,A.length-1),s&&s.push(A.buffer,p.buffer),{ids:A,positions:p}}static deserialize(t){const s=new eo;return s.ids=t.ids,s.positions=t.positions,s.indexed=!0,s}}function Ts(l){const t=+l;return!isNaN(t)&&t<=Number.MAX_SAFE_INTEGER?t:Gi(String(l))}function hi(l,t,s,A){for(;s<A;){const p=l[s+A>>1];let v=s-1,_=A+1;for(;;){do v++;while(l[v]<p);do _--;while(l[_]>p);if(v>=_)break;Ao(l,v,_),Ao(t,3*v,3*_),Ao(t,3*v+1,3*_+1),Ao(t,3*v+2,3*_+2)}_-s<A-_?(hi(l,t,s,_),s=_+1):(hi(l,t,_+1,A),A=_)}}function Ao(l,t,s){const A=l[t];l[t]=l[s],l[s]=A}$e("FeaturePositionMap",eo);class yo{constructor(t,s){this.gl=t.gl,this.location=s}}class fc extends yo{constructor(t,s){super(t,s),this.current=0}set(t){this.current!==t&&(this.current=t,this.gl.uniform1f(this.location,t))}}class mA extends yo{constructor(t,s){super(t,s),this.current=[0,0,0,0]}set(t){t[0]===this.current[0]&&t[1]===this.current[1]&&t[2]===this.current[2]&&t[3]===this.current[3]||(this.current=t,this.gl.uniform4f(this.location,t[0],t[1],t[2],t[3]))}}class GA extends yo{constructor(t,s){super(t,s),this.current=an.transparent}set(t){t.r===this.current.r&&t.g===this.current.g&&t.b===this.current.b&&t.a===this.current.a||(this.current=t,this.gl.uniform4f(this.location,t.r,t.g,t.b,t.a))}}const zu=new Float32Array(16);function pc(l){return[ur(255*l.r,255*l.g),ur(255*l.b,255*l.a)]}class Gl{constructor(t,s,A){this.value=t,this.uniformNames=s.map((p=>`u_${p}`)),this.type=A}setUniform(t,s,A){t.set(A.constantOr(this.value))}getBinding(t,s,A){return this.type==="color"?new GA(t,s):new fc(t,s)}}class to{constructor(t,s){this.uniformNames=s.map((A=>`u_${A}`)),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(t,s){this.pixelRatioFrom=s.pixelRatio,this.pixelRatioTo=t.pixelRatio,this.patternFrom=s.tlbr,this.patternTo=t.tlbr}setConstantDashPositions(t,s){this.dashTo=[0,t.y,t.height,t.width],this.dashFrom=[0,s.y,s.height,s.width]}setUniform(t,s,A,p){let v=null;p==="u_pattern_to"?v=this.patternTo:p==="u_pattern_from"?v=this.patternFrom:p==="u_dasharray_to"?v=this.dashTo:p==="u_dasharray_from"?v=this.dashFrom:p==="u_pixel_ratio_to"?v=this.pixelRatioTo:p==="u_pixel_ratio_from"&&(v=this.pixelRatioFrom),v!==null&&t.set(v)}getBinding(t,s,A){return A.substr(0,9)==="u_pattern"||A.substr(0,12)==="u_dasharray_"?new mA(t,s):new fc(t,s)}}class Zo{constructor(t,s,A,p){this.expression=t,this.type=A,this.maxValue=0,this.paintVertexAttributes=s.map((v=>({name:`a_${v}`,type:"Float32",components:A==="color"?2:1,offset:0}))),this.paintVertexArray=new p}populatePaintArray(t,s,A){const p=this.paintVertexArray.length,v=this.expression.evaluate(new Mr(0,A),s,{},A.canonical,[],A.formattedSection);this.paintVertexArray.resize(t),this._setPaintValue(p,t,v)}updatePaintArray(t,s,A,p,v){const _=this.expression.evaluate(new Mr(0,v),A,p);this._setPaintValue(t,s,_)}_setPaintValue(t,s,A){if(this.type==="color"){const p=pc(A);for(let v=t;v<s;v++)this.paintVertexArray.emplace(v,p[0],p[1])}else{for(let p=t;p<s;p++)this.paintVertexArray.emplace(p,A);this.maxValue=Math.max(this.maxValue,Math.abs(A))}}upload(t){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=t.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class vo{constructor(t,s,A,p,v,_){this.expression=t,this.uniformNames=s.map((B=>`u_${B}_t`)),this.type=A,this.useIntegerZoom=p,this.zoom=v,this.maxValue=0,this.paintVertexAttributes=s.map((B=>({name:`a_${B}`,type:"Float32",components:A==="color"?4:2,offset:0}))),this.paintVertexArray=new _}populatePaintArray(t,s,A){const p=this.expression.evaluate(new Mr(this.zoom,A),s,{},A.canonical,[],A.formattedSection),v=this.expression.evaluate(new Mr(this.zoom+1,A),s,{},A.canonical,[],A.formattedSection),_=this.paintVertexArray.length;this.paintVertexArray.resize(t),this._setPaintValue(_,t,p,v)}updatePaintArray(t,s,A,p,v){const _=this.expression.evaluate(new Mr(this.zoom,v),A,p),B=this.expression.evaluate(new Mr(this.zoom+1,v),A,p);this._setPaintValue(t,s,_,B)}_setPaintValue(t,s,A,p){if(this.type==="color"){const v=pc(A),_=pc(p);for(let B=t;B<s;B++)this.paintVertexArray.emplace(B,v[0],v[1],_[0],_[1])}else{for(let v=t;v<s;v++)this.paintVertexArray.emplace(v,A,p);this.maxValue=Math.max(this.maxValue,Math.abs(A),Math.abs(p))}}upload(t){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=t.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(t,s){const A=this.useIntegerZoom?Math.floor(s.zoom):s.zoom,p=nt(this.expression.interpolationFactor(A,this.zoom,this.zoom+1),0,1);t.set(p)}getBinding(t,s,A){return new fc(t,s)}}class vl{constructor(t,s,A,p,v,_){this.expression=t,this.type=s,this.useIntegerZoom=A,this.zoom=p,this.layerId=_,this.zoomInPaintVertexArray=new v,this.zoomOutPaintVertexArray=new v}populatePaintArray(t,s,A){const p=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(t),this.zoomOutPaintVertexArray.resize(t),this._setPaintValues(p,t,this.getPositionIds(s),A)}updatePaintArray(t,s,A,p,v){this._setPaintValues(t,s,this.getPositionIds(A),v)}_setPaintValues(t,s,A,p){const v=this.getPositions(p);if(!v||!A)return;const _=v[A.min],B=v[A.mid],F=v[A.max];if(_&&B&&F)for(let U=t;U<s;U++)this.emplace(this.zoomInPaintVertexArray,U,B,_),this.emplace(this.zoomOutPaintVertexArray,U,B,F)}upload(t){if(this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer){const s=this.getVertexAttributes();this.zoomInPaintVertexBuffer=t.createVertexBuffer(this.zoomInPaintVertexArray,s,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=t.createVertexBuffer(this.zoomOutPaintVertexArray,s,this.expression.isStateDependent)}}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class Os extends vl{getPositions(t){return t.imagePositions}getPositionIds(t){return t.patterns&&t.patterns[this.layerId]}getVertexAttributes(){return rr.members}emplace(t,s,A,p){t.emplace(s,A.tlbr[0],A.tlbr[1],A.tlbr[2],A.tlbr[3],p.tlbr[0],p.tlbr[1],p.tlbr[2],p.tlbr[3],A.pixelRatio,p.pixelRatio)}}class ro extends vl{getPositions(t){return t.dashPositions}getPositionIds(t){return t.dashes&&t.dashes[this.layerId]}getVertexAttributes(){return Rr.members}emplace(t,s,A,p){t.emplace(s,0,A.y,A.height,A.width,0,p.y,p.height,p.width)}}class Ka{constructor(t,s,A){this.binders={},this._buffers=[];const p=[];for(const v in t.paint._values){if(!A(v))continue;const _=t.paint.get(v);if(!(_ instanceof Fn&&So(_.property.specification)))continue;const B=qa(v,t.type),F=_.value,U=_.property.specification.type,Q=_.property.useIntegerZoom,K=_.property.specification["property-type"],X=K==="cross-faded"||K==="cross-faded-data-driven";if(F.kind==="constant")this.binders[v]=X?new to(F.value,B):new Gl(F.value,B,U),p.push(`/u_${v}`);else if(F.kind==="source"||X){const J=Xo(v,U,"source");this.binders[v]=X?v==="line-dasharray"?new ro(F,U,Q,s,J,t.id):new Os(F,U,Q,s,J,t.id):new Zo(F,B,U,J),p.push(`/a_${v}`)}else{const J=Xo(v,U,"composite");this.binders[v]=new vo(F,B,U,Q,s,J),p.push(`/z_${v}`)}}this.cacheKey=p.sort().join("")}getMaxValue(t){const s=this.binders[t];return s instanceof Zo||s instanceof vo?s.maxValue:0}populatePaintArrays(t,s,A){for(const p in this.binders){const v=this.binders[p];(v instanceof Zo||v instanceof vo||v instanceof vl)&&v.populatePaintArray(t,s,A)}}setConstantPatternPositions(t,s){for(const A in this.binders){const p=this.binders[A];p instanceof to&&p.setConstantPatternPositions(t,s)}}setConstantDashPositions(t,s){for(const A in this.binders){const p=this.binders[A];p instanceof to&&p.setConstantDashPositions(t,s)}}updatePaintArrays(t,s,A,p,v){let _=!1;for(const B in t){const F=s.getPositions(B);for(const U of F){const Q=A.feature(U.index);for(const K in this.binders){const X=this.binders[K];if((X instanceof Zo||X instanceof vo||X instanceof vl)&&X.expression.isStateDependent===!0){const J=p.paint.get(K);X.expression=J.value,X.updatePaintArray(U.start,U.end,Q,t[B],v),_=!0}}}}return _}defines(){const t=[];for(const s in this.binders){const A=this.binders[s];(A instanceof Gl||A instanceof to)&&t.push(...A.uniformNames.map((p=>`#define HAS_UNIFORM_${p}`)))}return t}getBinderAttributes(){const t=[];for(const s in this.binders){const A=this.binders[s];if(A instanceof Zo||A instanceof vo)for(let p=0;p<A.paintVertexAttributes.length;p++)t.push(A.paintVertexAttributes[p].name);else if(A instanceof vl){const p=A.getVertexAttributes();for(const v of p)t.push(v.name)}}return t}getBinderUniforms(){const t=[];for(const s in this.binders){const A=this.binders[s];if(A instanceof Gl||A instanceof to||A instanceof vo)for(const p of A.uniformNames)t.push(p)}return t}getPaintVertexBuffers(){return this._buffers}getUniforms(t,s){const A=[];for(const p in this.binders){const v=this.binders[p];if(v instanceof Gl||v instanceof to||v instanceof vo){for(const _ of v.uniformNames)if(s[_]){const B=v.getBinding(t,s[_],_);A.push({name:_,property:p,binding:B})}}}return A}setUniforms(t,s,A,p){for(const{name:v,property:_,binding:B}of s)this.binders[_].setUniform(B,p,A.get(_),v)}updatePaintBuffers(t){this._buffers=[];for(const s in this.binders){const A=this.binders[s];if(t&&A instanceof vl){const p=t.fromScale===2?A.zoomInPaintVertexBuffer:A.zoomOutPaintVertexBuffer;p&&this._buffers.push(p)}else(A instanceof Zo||A instanceof vo)&&A.paintVertexBuffer&&this._buffers.push(A.paintVertexBuffer)}}upload(t){for(const s in this.binders){const A=this.binders[s];(A instanceof Zo||A instanceof vo||A instanceof vl)&&A.upload(t)}this.updatePaintBuffers()}destroy(){for(const t in this.binders){const s=this.binders[t];(s instanceof Zo||s instanceof vo||s instanceof vl)&&s.destroy()}}}class cs{constructor(t,s,A=()=>!0){this.programConfigurations={};for(const p of t)this.programConfigurations[p.id]=new Ka(p,s,A);this.needsUpload=!1,this._featureMap=new eo,this._bufferOffset=0}populatePaintArrays(t,s,A,p){for(const v in this.programConfigurations)this.programConfigurations[v].populatePaintArrays(t,s,p);s.id!==void 0&&this._featureMap.add(s.id,A,this._bufferOffset,t),this._bufferOffset=t,this.needsUpload=!0}updatePaintArrays(t,s,A,p){for(const v of A)this.needsUpload=this.programConfigurations[v.id].updatePaintArrays(t,this._featureMap,s,v,p)||this.needsUpload}get(t){return this.programConfigurations[t]}upload(t){if(this.needsUpload){for(const s in this.programConfigurations)this.programConfigurations[s].upload(t);this.needsUpload=!1}}destroy(){for(const t in this.programConfigurations)this.programConfigurations[t].destroy()}}function qa(l,t){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-dasharray":["dasharray_to","dasharray_from"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[l]||[l.replace(`${t}-`,"").replace(/-/g,"_")]}function Xo(l,t,s){const A={color:{source:za,composite:qc},number:{source:bi,composite:za}},p=(function(v){return{"line-pattern":{source:Ge,composite:Ge},"fill-pattern":{source:Ge,composite:Ge},"fill-extrusion-pattern":{source:Ge,composite:Ge},"line-dasharray":{source:lt,composite:lt}}[v]})(l);return p&&p[s]||A[t][s]}$e("ConstantBinder",Gl),$e("CrossFadedConstantBinder",to),$e("SourceExpressionBinder",Zo),$e("CrossFadedPatternBinder",Os),$e("CrossFadedDasharrayBinder",ro),$e("CompositeExpressionBinder",vo),$e("ProgramConfiguration",Ka,{omit:["_buffers"]}),$e("ProgramConfigurationSet",cs);const Vh=Math.pow(2,14)-1,Sd=-Vh-1;function KA(l){const t=Ne/l.extent,s=l.loadGeometry();for(let A=0;A<s.length;A++){const p=s[A];for(let v=0;v<p.length;v++){const _=p[v],B=Math.round(_.x*t),F=Math.round(_.y*t);_.x=nt(B,Sd,Vh),_.y=nt(F,Sd,Vh),(B<_.x||B>_.x+1||F<_.y||F>_.y+1)&&_r("Geometry exceeds allowed extent, reduce your vector tile buffer size")}}return s}function qA(l,t){return{type:l.type,id:l.id,properties:l.properties,geometry:t?KA(l):[]}}const gA=-32768;function Gh(l,t,s,A,p){l.emplaceBack(gA+8*t+A,gA+8*s+p)}class uh{constructor(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map((s=>s.id)),this.index=t.index,this.hasDependencies=!1,this.layoutVertexArray=new ue,this.indexArray=new Dt,this.segments=new nr,this.programConfigurations=new cs(t.layers,t.zoom),this.stateDependentLayerIds=this.layers.filter((s=>s.isStateDependent())).map((s=>s.id))}populate(t,s,A){const p=this.layers[0],v=[];let _=null,B=!1,F=p.type==="heatmap";if(p.type==="circle"){const Q=p;_=Q.layout.get("circle-sort-key"),B=!_.isConstant(),F=F||Q.paint.get("circle-pitch-alignment")==="map"}const U=F?s.subdivisionGranularity.circle:1;for(const{feature:Q,id:K,index:X,sourceLayerIndex:J}of t){const oe=this.layers[0]._featureFilter.needGeometry,le=qA(Q,oe);if(!this.layers[0]._featureFilter.filter(new Mr(this.zoom),le,A))continue;const he=B?_.evaluate(le,{},A):void 0,be={id:K,properties:Q.properties,type:Q.type,sourceLayerIndex:J,index:X,geometry:oe?le.geometry:KA(Q),patterns:{},sortKey:he};v.push(be)}B&&v.sort(((Q,K)=>Q.sortKey-K.sortKey));for(const Q of v){const{geometry:K,index:X,sourceLayerIndex:J}=Q,oe=t[X].feature;this.addFeature(Q,K,X,A,U),s.featureIndex.insert(oe,K,X,J,this.index)}}update(t,s,A){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,s,this.stateDependentLayers,{imagePositions:A})}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,Qt),this.indexBuffer=t.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(t),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(t,s,A,p,v=1){let _;switch(v){case 1:_=[0,7];break;case 3:_=[0,2,5,7];break;case 5:_=[0,1,3,4,6,7];break;case 7:_=[0,1,2,3,4,5,6,7];break;default:throw new Error(`Invalid circle bucket granularity: ${v}; valid values are 1, 3, 5, 7.`)}const B=_.length;for(const F of s)for(const U of F){const Q=U.x,K=U.y;if(Q<0||Q>=Ne||K<0||K>=Ne)continue;const X=this.segments.prepareSegment(B*B,this.layoutVertexArray,this.indexArray,t.sortKey),J=X.vertexLength;for(let oe=0;oe<B;oe++)for(let le=0;le<B;le++)Gh(this.layoutVertexArray,Q,K,_[le],_[oe]);for(let oe=0;oe<B-1;oe++)for(let le=0;le<B-1;le++){const he=J+oe*B+le,be=J+(oe+1)*B+le;this.indexArray.emplaceBack(he,be+1,he+1),this.indexArray.emplaceBack(he,be,be+1)}X.vertexLength+=B*B,X.primitiveLength+=(B-1)*(B-1)*2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,A,{imagePositions:{},canonical:p})}}function hh(l,t){for(let s=0;s<l.length;s++)if(fh(t,l[s]))return!0;for(let s=0;s<t.length;s++)if(fh(l,t[s]))return!0;return!!Fd(l,t)}function pu(l,t,s){return!!fh(l,t)||!!Id(t,l,s)}function Kh(l,t){if(l.length===1)return ng(t,l[0]);for(let s=0;s<t.length;s++){const A=t[s];for(let p=0;p<A.length;p++)if(fh(l,A[p]))return!0}for(let s=0;s<l.length;s++)if(ng(t,l[s]))return!0;for(let s=0;s<t.length;s++)if(Fd(l,t[s]))return!0;return!1}function dh(l,t,s){if(l.length>1){if(Fd(l,t))return!0;for(let A=0;A<t.length;A++)if(Id(t[A],l,s))return!0}for(let A=0;A<l.length;A++)if(Id(l[A],t,s))return!0;return!1}function Fd(l,t){if(l.length===0||t.length===0)return!1;for(let s=0;s<l.length-1;s++){const A=l[s],p=l[s+1];for(let v=0;v<t.length-1;v++)if(rg(A,p,t[v],t[v+1]))return!0}return!1}function rg(l,t,s,A){return je(l,s,A)!==je(t,s,A)&&je(l,t,s)!==je(l,t,A)}function Id(l,t,s){const A=s*s;if(t.length===1)return l.distSqr(t[0])<A;for(let p=1;p<t.length;p++)if(Td(l,t[p-1],t[p])<A)return!0;return!1}function Td(l,t,s){const A=t.distSqr(s);if(A===0)return l.distSqr(t);const p=((l.x-t.x)*(s.x-t.x)+(l.y-t.y)*(s.y-t.y))/A;return l.distSqr(p<0?t:p>1?s:s.sub(t)._mult(p)._add(t))}function ng(l,t){let s,A,p,v=!1;for(let _=0;_<l.length;_++){s=l[_];for(let B=0,F=s.length-1;B<s.length;F=B++)A=s[B],p=s[F],A.y>t.y!=p.y>t.y&&t.x<(p.x-A.x)*(t.y-A.y)/(p.y-A.y)+A.x&&(v=!v)}return v}function fh(l,t){let s=!1;for(let A=0,p=l.length-1;A<l.length;p=A++){const v=l[A],_=l[p];v.y>t.y!=_.y>t.y&&t.x<(_.x-v.x)*(t.y-v.y)/(_.y-v.y)+v.x&&(s=!s)}return s}function Fp(l,t,s){const A=s[0],p=s[2];if(l.x<A.x&&t.x<A.x||l.x>p.x&&t.x>p.x||l.y<A.y&&t.y<A.y||l.y>p.y&&t.y>p.y)return!1;const v=je(l,t,s[0]);return v!==je(l,t,s[1])||v!==je(l,t,s[2])||v!==je(l,t,s[3])}function ph(l,t,s){const A=t.paint.get(l).value;return A.kind==="constant"?A.value:s.programConfigurations.get(t.id).getMaxValue(l)}function mh(l){return Math.sqrt(l[0]*l[0]+l[1]*l[1])}function $c(l,t,s,A,p){if(!t[0]&&!t[1])return l;const v=w.convert(t)._mult(p);s==="viewport"&&v._rotate(-A);const _=[];for(let B=0;B<l.length;B++)_.push(l[B].sub(v));return _}function ev(l){const t=[];for(let s=0;s<l.length;s++){const A=l[s],p=t.at(-1);(s===0||p&&!A.equals(p))&&t.push(A)}return t}function ig({queryGeometry:l,size:t},s){return pu(l,s,t)}function Ip({queryGeometry:l,size:t,transform:s,unwrappedTileID:A,getElevation:p},v){return pu(l,v,t*(s.projectTileCoordinates(v.x,v.y,A,p).signedDistanceFromCamera/s.cameraToCenterDistance))}function sg({queryGeometry:l,size:t,transform:s,unwrappedTileID:A,getElevation:p},v){const _=s.projectTileCoordinates(v.x,v.y,A,p).signedDistanceFromCamera,B=t*(s.cameraToCenterDistance/_);return pu(l,Yo(v,s,A,p),B)}function og({queryGeometry:l,size:t,transform:s,unwrappedTileID:A,getElevation:p},v){return pu(l,Yo(v,s,A,p),t)}function qh({queryGeometry:l,size:t,transform:s,unwrappedTileID:A,getElevation:p,pitchAlignment:v="map",pitchScale:_="map"},B){const F=v==="map"?_==="map"?ig:Ip:_==="map"?sg:og,U={queryGeometry:l,size:t,transform:s,unwrappedTileID:A,getElevation:p};for(const Q of B)for(const K of Q)if(F(U,K))return!0;return!1}function Yo(l,t,s,A){const p=t.projectTileCoordinates(l.x,l.y,s,A).point;return new w((.5*p.x+.5)*t.width,(.5*-p.y+.5)*t.height)}let ag,lg;$e("CircleBucket",uh,{omit:["layers"]});var uf={get paint(){return lg=lg||new ci({"circle-radius":new br(mt.paint_circle["circle-radius"]),"circle-color":new br(mt.paint_circle["circle-color"]),"circle-blur":new br(mt.paint_circle["circle-blur"]),"circle-opacity":new br(mt.paint_circle["circle-opacity"]),"circle-translate":new yr(mt.paint_circle["circle-translate"]),"circle-translate-anchor":new yr(mt.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new yr(mt.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new yr(mt.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new br(mt.paint_circle["circle-stroke-width"]),"circle-stroke-color":new br(mt.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new br(mt.paint_circle["circle-stroke-opacity"])})},get layout(){return ag=ag||new ci({"circle-sort-key":new br(mt.layout_circle["circle-sort-key"])})}};class $a extends Nn{constructor(t,s){super(t,uf,s)}createBucket(t){return new uh(t)}queryRadius(t){const s=t;return ph("circle-radius",this,s)+ph("circle-stroke-width",this,s)+mh(this.paint.get("circle-translate"))}queryIntersectsFeature({queryGeometry:t,feature:s,featureState:A,geometry:p,transform:v,pixelsToTileUnits:_,unwrappedTileID:B,getElevation:F}){const U=$c(t,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),-v.bearingInRadians,_),Q=this.paint.get("circle-radius").evaluate(s,A)+this.paint.get("circle-stroke-width").evaluate(s,A),K=this.paint.get("circle-pitch-scale"),X=this.paint.get("circle-pitch-alignment");let J,oe;return X==="map"?(J=U,oe=Q*_):(J=(function(le,he,be,rt){return le.map((Fe=>Yo(Fe,he,be,rt)))})(U,v,B,F),oe=Q),qh({queryGeometry:J,size:oe,transform:v,unwrappedTileID:B,getElevation:F,pitchAlignment:X,pitchScale:K},p)}}class cg extends uh{}let Xr;$e("HeatmapBucket",cg,{omit:["layers"]});var $h={get paint(){return Xr=Xr||new ci({"heatmap-radius":new br(mt.paint_heatmap["heatmap-radius"]),"heatmap-weight":new br(mt.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new yr(mt.paint_heatmap["heatmap-intensity"]),"heatmap-color":new ei(mt.paint_heatmap["heatmap-color"]),"heatmap-opacity":new yr(mt.paint_heatmap["heatmap-opacity"])})}};function Pd(l,{width:t,height:s},A,p){if(p){if(p instanceof Uint8ClampedArray)p=new Uint8Array(p.buffer);else if(p.length!==t*s*A)throw new RangeError(`mismatched image size. expected: ${p.length} but got: ${t*s*A}`)}else p=new Uint8Array(t*s*A);return l.width=t,l.height=s,l.data=p,l}function Tp(l,{width:t,height:s},A){if(t===l.width&&s===l.height)return;const p=Pd({},{width:t,height:s},A);Pp(l,p,{x:0,y:0},{x:0,y:0},{width:Math.min(l.width,t),height:Math.min(l.height,s)},A),l.width=t,l.height=s,l.data=p.data}function Pp(l,t,s,A,p,v){if(p.width===0||p.height===0)return t;if(p.width>l.width||p.height>l.height||s.x>l.width-p.width||s.y>l.height-p.height)throw new RangeError("out of range source coordinates for image copy");if(p.width>t.width||p.height>t.height||A.x>t.width-p.width||A.y>t.height-p.height)throw new RangeError("out of range destination coordinates for image copy");const _=l.data,B=t.data;if(_===B)throw new Error("srcData equals dstData, so image is already copied");for(let F=0;F<p.height;F++){const U=((s.y+F)*l.width+s.x)*v,Q=((A.y+F)*t.width+A.x)*v;for(let K=0;K<p.width*v;K++)B[Q+K]=_[U+K]}return t}class mu{constructor(t,s){Pd(this,t,1,s)}resize(t){Tp(this,t,1)}clone(){return new mu({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(t,s,A,p,v){Pp(t,s,A,p,v,1)}}class Jo{constructor(t,s){Pd(this,t,4,s)}resize(t){Tp(this,t,4)}replace(t,s){s?this.data.set(t):this.data=t instanceof Uint8ClampedArray?new Uint8Array(t.buffer):t}clone(){return new Jo({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(t,s,A,p,v){Pp(t,s,A,p,v,4)}setPixel(t,s,A){const p=4*(t*this.width+s);this.data[p+0]=Math.round(255*A.r/A.a),this.data[p+1]=Math.round(255*A.g/A.a),this.data[p+2]=Math.round(255*A.b/A.a),this.data[p+3]=Math.round(255*A.a)}}function hf(l){const t={},s=l.resolution||256,A=l.clips?l.clips.length:1,p=l.image||new Jo({width:s,height:A});if(Math.log(s)/Math.LN2%1!=0)throw new Error(`width is not a power of 2 - ${s}`);const v=(_,B,F)=>{t[l.evaluationKey]=F;const U=l.expression.evaluate(t);p.setPixel(_/4/s,B/4,U)};if(l.clips)for(let _=0,B=0;_<A;++_,B+=4*s)for(let F=0,U=0;F<s;F++,U+=4){const Q=F/(s-1),{start:K,end:X}=l.clips[_];v(B,U,K*(1-Q)+X*Q)}else for(let _=0,B=0;_<s;_++,B+=4)v(0,B,_/(s-1));return p}$e("AlphaImage",mu),$e("RGBAImage",Jo);const df="big-fb";class Ag extends Nn{createBucket(t){return new cg(t)}constructor(t,s){super(t,$h,s),this.heatmapFbos=new Map,this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(t){t==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=hf({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbos.has(df)&&this.heatmapFbos.delete(df)}queryRadius(t){return ph("heatmap-radius",this,t)}queryIntersectsFeature({queryGeometry:t,feature:s,featureState:A,geometry:p,transform:v,pixelsToTileUnits:_,unwrappedTileID:B,getElevation:F}){return qh({queryGeometry:t,size:this.paint.get("heatmap-radius").evaluate(s,A)*_,transform:v,unwrappedTileID:B,getElevation:F},p)}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}}let Lp;var Mp={get paint(){return Lp=Lp||new ci({"hillshade-illumination-direction":new yr(mt.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-altitude":new yr(mt.paint_hillshade["hillshade-illumination-altitude"]),"hillshade-illumination-anchor":new yr(mt.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new yr(mt.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new yr(mt.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new yr(mt.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new yr(mt.paint_hillshade["hillshade-accent-color"]),"hillshade-method":new yr(mt.paint_hillshade["hillshade-method"])})}};class kp extends Nn{constructor(t,s){super(t,Mp,s),this.recalculate({zoom:0,zoomHistory:{}},void 0)}getIlluminationProperties(){let t=this.paint.get("hillshade-illumination-direction").values,s=this.paint.get("hillshade-illumination-altitude").values,A=this.paint.get("hillshade-highlight-color").values,p=this.paint.get("hillshade-shadow-color").values;const v=Math.max(t.length,s.length,A.length,p.length);t=t.concat(Array(v-t.length).fill(t.at(-1))),s=s.concat(Array(v-s.length).fill(s.at(-1))),A=A.concat(Array(v-A.length).fill(A.at(-1))),p=p.concat(Array(v-p.length).fill(p.at(-1)));const _=s.map(Dn);return{directionRadians:t.map(Dn),altitudeRadians:_,shadowColor:p,highlightColor:A}}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}}let ea;var yA={get paint(){return ea=ea||new ci({"color-relief-opacity":new yr(mt["paint_color-relief"]["color-relief-opacity"]),"color-relief-color":new ei(mt["paint_color-relief"]["color-relief-color"])})}};class $A{constructor(t,s,A,p){this.context=t,this.format=A,this.texture=t.gl.createTexture(),this.update(s,p)}update(t,s,A){const{width:p,height:v}=t,_=!(this.size&&this.size[0]===p&&this.size[1]===v||A),{context:B}=this,{gl:F}=B;if(this.useMipmap=!!(s&&s.useMipmap),F.bindTexture(F.TEXTURE_2D,this.texture),B.pixelStoreUnpackFlipY.set(!1),B.pixelStoreUnpack.set(1),B.pixelStoreUnpackPremultiplyAlpha.set(this.format===F.RGBA&&(!s||s.premultiply!==!1)),_)this.size=[p,v],t instanceof HTMLImageElement||t instanceof HTMLCanvasElement||t instanceof HTMLVideoElement||t instanceof ImageData||Vr(t)?F.texImage2D(F.TEXTURE_2D,0,this.format,this.format,F.UNSIGNED_BYTE,t):F.texImage2D(F.TEXTURE_2D,0,this.format,p,v,0,this.format,F.UNSIGNED_BYTE,t.data);else{const{x:U,y:Q}=A||{x:0,y:0};t instanceof HTMLImageElement||t instanceof HTMLCanvasElement||t instanceof HTMLVideoElement||t instanceof ImageData||Vr(t)?F.texSubImage2D(F.TEXTURE_2D,0,U,Q,F.RGBA,F.UNSIGNED_BYTE,t):F.texSubImage2D(F.TEXTURE_2D,0,U,Q,p,v,F.RGBA,F.UNSIGNED_BYTE,t.data)}this.useMipmap&&this.isSizePowerOfTwo()&&F.generateMipmap(F.TEXTURE_2D),B.pixelStoreUnpackFlipY.setDefault(),B.pixelStoreUnpack.setDefault(),B.pixelStoreUnpackPremultiplyAlpha.setDefault()}bind(t,s,A){const{context:p}=this,{gl:v}=p;v.bindTexture(v.TEXTURE_2D,this.texture),A!==v.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(A=v.LINEAR),t!==this.filter&&(v.texParameteri(v.TEXTURE_2D,v.TEXTURE_MAG_FILTER,t),v.texParameteri(v.TEXTURE_2D,v.TEXTURE_MIN_FILTER,A||t),this.filter=t),s!==this.wrap&&(v.texParameteri(v.TEXTURE_2D,v.TEXTURE_WRAP_S,s),v.texParameteri(v.TEXTURE_2D,v.TEXTURE_WRAP_T,s),this.wrap=s)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:t}=this.context;t.deleteTexture(this.texture),this.texture=null}}class Up{constructor(t,s,A,p=1,v=1,_=1,B=0){if(this.uid=t,s.height!==s.width)throw new RangeError("DEM tiles must be square");if(A&&!["mapbox","terrarium","custom"].includes(A))return void _r(`"${A}" is not a valid encoding type. Valid types include "mapbox", "terrarium" and "custom".`);this.stride=s.height;const F=this.dim=s.height-2;switch(this.data=new Uint32Array(s.data.buffer),A){case"terrarium":this.redFactor=256,this.greenFactor=1,this.blueFactor=1/256,this.baseShift=32768;break;case"custom":this.redFactor=p,this.greenFactor=v,this.blueFactor=_,this.baseShift=B;break;default:this.redFactor=6553.6,this.greenFactor=25.6,this.blueFactor=.1,this.baseShift=1e4}for(let U=0;U<F;U++)this.data[this._idx(-1,U)]=this.data[this._idx(0,U)],this.data[this._idx(F,U)]=this.data[this._idx(F-1,U)],this.data[this._idx(U,-1)]=this.data[this._idx(U,0)],this.data[this._idx(U,F)]=this.data[this._idx(U,F-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(F,-1)]=this.data[this._idx(F-1,0)],this.data[this._idx(-1,F)]=this.data[this._idx(0,F-1)],this.data[this._idx(F,F)]=this.data[this._idx(F-1,F-1)],this.min=Number.MAX_SAFE_INTEGER,this.max=Number.MIN_SAFE_INTEGER;for(let U=0;U<F;U++)for(let Q=0;Q<F;Q++){const K=this.get(U,Q);K>this.max&&(this.max=K),K<this.min&&(this.min=K)}}get(t,s){const A=new Uint8Array(this.data.buffer),p=4*this._idx(t,s);return this.unpack(A[p],A[p+1],A[p+2])}getUnpackVector(){return[this.redFactor,this.greenFactor,this.blueFactor,this.baseShift]}_idx(t,s){if(t<-1||t>=this.dim+1||s<-1||s>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(s+1)*this.stride+(t+1)}unpack(t,s,A){return t*this.redFactor+s*this.greenFactor+A*this.blueFactor-this.baseShift}pack(t){return Dp(t,this.getUnpackVector())}getPixels(){return new Jo({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}backfillBorder(t,s,A){if(this.dim!==t.dim)throw new Error("dem dimension mismatch");let p=s*this.dim,v=s*this.dim+this.dim,_=A*this.dim,B=A*this.dim+this.dim;switch(s){case-1:p=v-1;break;case 1:v=p+1}switch(A){case-1:_=B-1;break;case 1:B=_+1}const F=-s*this.dim,U=-A*this.dim;for(let Q=_;Q<B;Q++)for(let K=p;K<v;K++)this.data[this._idx(K,Q)]=t.data[this._idx(K+F,Q+U)]}}function Dp(l,t){const s=t[0],A=t[1],p=t[2],v=t[3],_=Math.min(s,A,p),B=Math.round((l+v)/_);return{r:Math.floor(B*_/s)%256,g:Math.floor(B*_/A)%256,b:Math.floor(B*_/p)%256}}$e("DEMData",Up);class vA extends Nn{constructor(t,s){super(t,yA,s)}_createColorRamp(t){const s={elevationStops:[],colorStops:[]},A=this._transitionablePaint._values["color-relief-color"].value.expression;if(A instanceof Oc&&A._styleExpression.expression instanceof Kt){this.colorRampExpression=A;const _=A._styleExpression.expression;s.elevationStops=_.labels,s.colorStops=[];for(const B of s.elevationStops)s.colorStops.push(_.evaluate({globals:{elevation:B}}))}if(s.elevationStops.length<1&&(s.elevationStops=[0],s.colorStops=[an.transparent]),s.elevationStops.length<2&&(s.elevationStops.push(s.elevationStops[0]+1),s.colorStops.push(s.colorStops[0])),s.elevationStops.length<=t)return s;const p={elevationStops:[],colorStops:[]},v=(s.elevationStops.length-1)/(t-1);for(let _=0;_<s.elevationStops.length-.5;_+=v)p.elevationStops.push(s.elevationStops[Math.round(_)]),p.colorStops.push(s.colorStops[Math.round(_)]);return _r(`Too many colors in specification of ${this.id} color-relief layer, may not render properly. Max possible colors: ${t}, provided: ${s.elevationStops.length}`),p}_colorRampChanged(){return this.colorRampExpression!=this._transitionablePaint._values["color-relief-color"].value.expression}getColorRampTextures(t,s,A){if(this.colorRampTextures&&!this._colorRampChanged())return this.colorRampTextures;const p=this._createColorRamp(s),v=new Jo({width:p.colorStops.length,height:1}),_=new Jo({width:p.colorStops.length,height:1});for(let B=0;B<p.elevationStops.length;B++){const F=Dp(p.elevationStops[B],A);_.setPixel(0,B,new an(F.r/255,F.g/255,F.b/255,1)),v.setPixel(0,B,p.colorStops[B])}return this.colorRampTextures={elevationTexture:new $A(t,_,t.gl.RGBA),colorTexture:new $A(t,v,t.gl.RGBA)},this.colorRampTextures}hasOffscreenPass(){return this.visibility!=="none"&&!!this.colorRampTextures}}const ug=Vn([{name:"a_pos",components:2,type:"Int16"}],4),{members:WA}=ug;function ff(l,t,s){const A=s.patternDependencies;let p=!1;for(const v of t){const _=v.paint.get(`${l}-pattern`);_.isConstant()||(p=!0);const B=_.constantOr(null);B&&(p=!0,A[B.to]=!0,A[B.from]=!0)}return p}function pf(l,t,s,A,p){const{zoom:v}=A,_=p.patternDependencies;for(const B of t){const F=B.paint.get(`${l}-pattern`).value;if(F.kind!=="constant"){let U=F.evaluate({zoom:v-1},s,{},p.availableImages),Q=F.evaluate({zoom:v},s,{},p.availableImages),K=F.evaluate({zoom:v+1},s,{},p.availableImages);U=U&&U.name?U.name:U,Q=Q&&Q.name?Q.name:Q,K=K&&K.name?K.name:K,_[U]=!0,_[Q]=!0,_[K]=!0,s.patterns[B.id]={min:U,mid:Q,max:K}}}return s}function Rp(l,t,s,A,p){let v;if(p===(function(_,B,F,U){let Q=0;for(let K=B,X=F-U;K<F;K+=U)Q+=(_[X]-_[K])*(_[K+1]+_[X+1]),X=K;return Q})(l,t,s,A)>0)for(let _=t;_<s;_+=A)v=ZA(_/A|0,l[_],l[_+1],v);else for(let _=s-A;_>=t;_-=A)v=ZA(_/A|0,l[_],l[_+1],v);return v&&gu(v,v.next)&&(Vu(v),v=v.next),v}function Hu(l,t){if(!l)return l;t||(t=l);let s,A=l;do if(s=!1,A.steiner||!gu(A,A.next)&&zi(A.prev,A,A.next)!==0)A=A.next;else{if(Vu(A),A=t=A.prev,A===A.next)break;s=!0}while(s||A!==t);return t}function Wh(l,t,s,A,p,v,_){if(!l)return;!_&&v&&(function(F,U,Q,K){let X=F;do X.z===0&&(X.z=To(X.x,X.y,U,Q,K)),X.prevZ=X.prev,X.nextZ=X.next,X=X.next;while(X!==F);X.prevZ.nextZ=null,X.prevZ=null,(function(J){let oe,le=1;do{let he,be=J;J=null;let rt=null;for(oe=0;be;){oe++;let Fe=be,Ue=0;for(let dt=0;dt<le&&(Ue++,Fe=Fe.nextZ,Fe);dt++);let at=le;for(;Ue>0||at>0&&Fe;)Ue!==0&&(at===0||!Fe||be.z<=Fe.z)?(he=be,be=be.nextZ,Ue--):(he=Fe,Fe=Fe.nextZ,at--),rt?rt.nextZ=he:J=he,he.prevZ=rt,rt=he;be=Fe}rt.nextZ=null,le*=2}while(oe>1)})(X)})(l,A,p,v);let B=l;for(;l.prev!==l.next;){const F=l.prev,U=l.next;if(v?mf(l,A,p,v):tv(l))t.push(F.i,l.i,U.i),Vu(l),l=U.next,B=U.next;else if((l=U)===B){_?_===1?Wh(l=Np(Hu(l),t),t,s,A,p,v,2):_===2&&Wc(l,t,s,A,p,v):Wh(Hu(l),t,s,A,p,v,1);break}}}function tv(l){const t=l.prev,s=l,A=l.next;if(zi(t,s,A)>=0)return!1;const p=t.x,v=s.x,_=A.x,B=t.y,F=s.y,U=A.y,Q=Math.min(p,v,_),K=Math.min(B,F,U),X=Math.max(p,v,_),J=Math.max(B,F,U);let oe=A.next;for(;oe!==t;){if(oe.x>=Q&&oe.x<=X&&oe.y>=K&&oe.y<=J&&zs(p,B,v,F,_,U,oe.x,oe.y)&&zi(oe.prev,oe,oe.next)>=0)return!1;oe=oe.next}return!0}function mf(l,t,s,A){const p=l.prev,v=l,_=l.next;if(zi(p,v,_)>=0)return!1;const B=p.x,F=v.x,U=_.x,Q=p.y,K=v.y,X=_.y,J=Math.min(B,F,U),oe=Math.min(Q,K,X),le=Math.max(B,F,U),he=Math.max(Q,K,X),be=To(J,oe,t,s,A),rt=To(le,he,t,s,A);let Fe=l.prevZ,Ue=l.nextZ;for(;Fe&&Fe.z>=be&&Ue&&Ue.z<=rt;){if(Fe.x>=J&&Fe.x<=le&&Fe.y>=oe&&Fe.y<=he&&Fe!==p&&Fe!==_&&zs(B,Q,F,K,U,X,Fe.x,Fe.y)&&zi(Fe.prev,Fe,Fe.next)>=0||(Fe=Fe.prevZ,Ue.x>=J&&Ue.x<=le&&Ue.y>=oe&&Ue.y<=he&&Ue!==p&&Ue!==_&&zs(B,Q,F,K,U,X,Ue.x,Ue.y)&&zi(Ue.prev,Ue,Ue.next)>=0))return!1;Ue=Ue.nextZ}for(;Fe&&Fe.z>=be;){if(Fe.x>=J&&Fe.x<=le&&Fe.y>=oe&&Fe.y<=he&&Fe!==p&&Fe!==_&&zs(B,Q,F,K,U,X,Fe.x,Fe.y)&&zi(Fe.prev,Fe,Fe.next)>=0)return!1;Fe=Fe.prevZ}for(;Ue&&Ue.z<=rt;){if(Ue.x>=J&&Ue.x<=le&&Ue.y>=oe&&Ue.y<=he&&Ue!==p&&Ue!==_&&zs(B,Q,F,K,U,X,Ue.x,Ue.y)&&zi(Ue.prev,Ue,Ue.next)>=0)return!1;Ue=Ue.nextZ}return!0}function Np(l,t){let s=l;do{const A=s.prev,p=s.next.next;!gu(A,p)&&gf(A,s,s.next,p)&&yh(A,p)&&yh(p,A)&&(t.push(A.i,s.i,p.i),Vu(s),Vu(s.next),s=l=p),s=s.next}while(s!==l);return Hu(s)}function Wc(l,t,s,A,p,v){let _=l;do{let B=_.next.next;for(;B!==_.prev;){if(_.i!==B.i&&Ld(_,B)){let F=vh(_,B);return _=Hu(_,_.next),F=Hu(F,F.next),Wh(_,t,s,A,p,v,0),void Wh(F,t,s,A,p,v,0)}B=B.next}_=_.next}while(_!==l)}function yi(l,t){let s=l.x-t.x;return s===0&&(s=l.y-t.y,s===0)&&(s=(l.next.y-l.y)/(l.next.x-l.x)-(t.next.y-t.y)/(t.next.x-t.x)),s}function ta(l,t){const s=(function(p,v){let _=v;const B=p.x,F=p.y;let U,Q=-1/0;if(gu(p,_))return _;do{if(gu(p,_.next))return _.next;if(F<=_.y&&F>=_.next.y&&_.next.y!==_.y){const le=_.x+(F-_.y)*(_.next.x-_.x)/(_.next.y-_.y);if(le<=B&&le>Q&&(Q=le,U=_.x<_.next.x?_:_.next,le===B))return U}_=_.next}while(_!==v);if(!U)return null;const K=U,X=U.x,J=U.y;let oe=1/0;_=U;do{if(B>=_.x&&_.x>=X&&B!==_.x&&gh(F<J?B:Q,F,X,J,F<J?Q:B,F,_.x,_.y)){const le=Math.abs(F-_.y)/(B-_.x);yh(_,p)&&(le<oe||le===oe&&(_.x>U.x||_.x===U.x&&_o(U,_)))&&(U=_,oe=le)}_=_.next}while(_!==K);return U})(l,t);if(!s)return t;const A=vh(s,l);return Hu(A,A.next),Hu(s,s.next)}function _o(l,t){return zi(l.prev,l,t.prev)<0&&zi(t.next,l,l.next)<0}function To(l,t,s,A,p){return(l=1431655765&((l=858993459&((l=252645135&((l=16711935&((l=(l-s)*p|0)|l<<8))|l<<4))|l<<2))|l<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=(t-A)*p|0)|t<<8))|t<<4))|t<<2))|t<<1))<<1}function mc(l){let t=l,s=l;do(t.x<s.x||t.x===s.x&&t.y<s.y)&&(s=t),t=t.next;while(t!==l);return s}function gh(l,t,s,A,p,v,_,B){return(p-_)*(t-B)>=(l-_)*(v-B)&&(l-_)*(A-B)>=(s-_)*(t-B)&&(s-_)*(v-B)>=(p-_)*(A-B)}function zs(l,t,s,A,p,v,_,B){return!(l===_&&t===B)&&gh(l,t,s,A,p,v,_,B)}function Ld(l,t){return l.next.i!==t.i&&l.prev.i!==t.i&&!(function(s,A){let p=s;do{if(p.i!==s.i&&p.next.i!==s.i&&p.i!==A.i&&p.next.i!==A.i&&gf(p,p.next,s,A))return!0;p=p.next}while(p!==s);return!1})(l,t)&&(yh(l,t)&&yh(t,l)&&(function(s,A){let p=s,v=!1;const _=(s.x+A.x)/2,B=(s.y+A.y)/2;do p.y>B!=p.next.y>B&&p.next.y!==p.y&&_<(p.next.x-p.x)*(B-p.y)/(p.next.y-p.y)+p.x&&(v=!v),p=p.next;while(p!==s);return v})(l,t)&&(zi(l.prev,l,t.prev)||zi(l,t.prev,t))||gu(l,t)&&zi(l.prev,l,l.next)>0&&zi(t.prev,t,t.next)>0)}function zi(l,t,s){return(t.y-l.y)*(s.x-t.x)-(t.x-l.x)*(s.y-t.y)}function gu(l,t){return l.x===t.x&&l.y===t.y}function gf(l,t,s,A){const p=wa(zi(l,t,s)),v=wa(zi(l,t,A)),_=wa(zi(s,A,l)),B=wa(zi(s,A,t));return p!==v&&_!==B||!(p!==0||!ju(l,s,t))||!(v!==0||!ju(l,A,t))||!(_!==0||!ju(s,l,A))||!(B!==0||!ju(s,t,A))}function ju(l,t,s){return t.x<=Math.max(l.x,s.x)&&t.x>=Math.min(l.x,s.x)&&t.y<=Math.max(l.y,s.y)&&t.y>=Math.min(l.y,s.y)}function wa(l){return l>0?1:l<0?-1:0}function yh(l,t){return zi(l.prev,l,l.next)<0?zi(l,t,l.next)>=0&&zi(l,l.prev,t)>=0:zi(l,t,l.prev)<0||zi(l,l.next,t)<0}function vh(l,t){const s=Md(l.i,l.x,l.y),A=Md(t.i,t.x,t.y),p=l.next,v=t.prev;return l.next=t,t.prev=l,s.next=p,p.prev=s,A.next=s,s.prev=A,v.next=A,A.prev=v,A}function ZA(l,t,s,A){const p=Md(l,t,s);return A?(p.next=A.next,p.prev=A,A.next.prev=p,A.next=p):(p.prev=p,p.next=p),p}function Vu(l){l.next.prev=l.prev,l.prev.next=l.next,l.prevZ&&(l.prevZ.nextZ=l.nextZ),l.nextZ&&(l.nextZ.prevZ=l.prevZ)}function Md(l,t,s){return{i:l,x:t,y:s,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}class gc{constructor(t,s){if(s>t)throw new Error("Min granularity must not be greater than base granularity.");this._baseZoomGranularity=t,this._minGranularity=s}getGranularityForZoomLevel(t){return Math.max(Math.floor(this._baseZoomGranularity/(1<<t)),this._minGranularity,1)}}class _h{constructor(t){this.fill=t.fill,this.line=t.line,this.tile=t.tile,this.stencil=t.stencil,this.circle=t.circle}}_h.noSubdivision=new _h({fill:new gc(0,0),line:new gc(0,0),tile:new gc(0,0),stencil:new gc(0,0),circle:1}),$e("SubdivisionGranularityExpression",gc),$e("SubdivisionGranularitySetting",_h);const yc=-32768,Gu=32767;class kd{constructor(t,s){this._vertexBuffer=[],this._vertexDictionary=new Map,this._used=!1,this._granularity=t,this._granularityCellSize=Ne/t,this._canonical=s}_getKey(t,s){return(t+=32768)<<16|s+32768}_vertexToIndex(t,s){if(t<-32768||s<-32768||t>32767||s>32767)throw new Error("Vertex coordinates are out of signed 16 bit integer range.");const A=0|Math.round(t),p=0|Math.round(s),v=this._getKey(A,p);if(this._vertexDictionary.has(v))return this._vertexDictionary.get(v);const _=this._vertexBuffer.length/2;return this._vertexDictionary.set(v,_),this._vertexBuffer.push(A,p),_}_subdivideTrianglesScanline(t){if(this._granularity<2)return(function(p,v){const _=[];for(let B=0;B<v.length;B+=3){const F=v[B],U=v[B+1],Q=v[B+2],K=p[2*F],X=p[2*F+1];(p[2*U]-K)*(p[2*Q+1]-X)-(p[2*U+1]-X)*(p[2*Q]-K)>0?(_.push(F),_.push(Q),_.push(U)):(_.push(F),_.push(U),_.push(Q))}return _})(this._vertexBuffer,t);const s=[],A=t.length;for(let p=0;p<A;p+=3){const v=[t[p+0],t[p+1],t[p+2]],_=[this._vertexBuffer[2*t[p+0]+0],this._vertexBuffer[2*t[p+0]+1],this._vertexBuffer[2*t[p+1]+0],this._vertexBuffer[2*t[p+1]+1],this._vertexBuffer[2*t[p+2]+0],this._vertexBuffer[2*t[p+2]+1]];let B=1/0,F=1/0,U=-1/0,Q=-1/0;for(let le=0;le<3;le++){const he=_[2*le],be=_[2*le+1];B=Math.min(B,he),U=Math.max(U,he),F=Math.min(F,be),Q=Math.max(Q,be)}if(B===U||F===Q)continue;const K=Math.floor(B/this._granularityCellSize),X=Math.ceil(U/this._granularityCellSize),J=Math.floor(F/this._granularityCellSize),oe=Math.ceil(Q/this._granularityCellSize);if(K!==X||J!==oe)for(let le=J;le<oe;le++){const he=this._scanlineGenerateVertexRingForCellRow(le,_,v);vf(this._vertexBuffer,he,s)}else s.push(...v)}return s}_scanlineGenerateVertexRingForCellRow(t,s,A){const p=t*this._granularityCellSize,v=p+this._granularityCellSize,_=[];for(let B=0;B<3;B++){const F=s[2*B],U=s[2*B+1],Q=s[2*(B+1)%6],K=s[(2*(B+1)+1)%6],X=s[2*(B+2)%6],J=s[(2*(B+2)+1)%6],oe=Q-F,le=K-U,he=oe===0,be=le===0,rt=(p-U)/le,Fe=(v-U)/le,Ue=Math.min(rt,Fe),at=Math.max(rt,Fe);if(!be&&(Ue>=1||at<=0)||be&&(U<p||U>v)){K>=p&&K<=v&&_.push(A[(B+1)%3]);continue}!be&&Ue>0&&_.push(this._vertexToIndex(F+oe*Ue,U+le*Ue));const dt=F+oe*Math.max(Ue,0),Mt=F+oe*Math.min(at,1);he||this._generateIntraEdgeVertices(_,F,U,Q,K,dt,Mt),!be&&at<1&&_.push(this._vertexToIndex(F+oe*at,U+le*at)),(be||K>=p&&K<=v)&&_.push(A[(B+1)%3]),!be&&(K<=p||K>=v)&&this._generateInterEdgeVertices(_,F,U,Q,K,X,J,Mt,p,v)}return _}_generateIntraEdgeVertices(t,s,A,p,v,_,B){const F=p-s,U=v-A,Q=U===0,K=Q?Math.min(s,p):Math.min(_,B),X=Q?Math.max(s,p):Math.max(_,B),J=Math.floor(K/this._granularityCellSize)+1,oe=Math.ceil(X/this._granularityCellSize)-1;if(Q?s<p:_<B)for(let le=J;le<=oe;le++){const he=le*this._granularityCellSize;t.push(this._vertexToIndex(he,A+U*(he-s)/F))}else for(let le=oe;le>=J;le--){const he=le*this._granularityCellSize;t.push(this._vertexToIndex(he,A+U*(he-s)/F))}}_generateInterEdgeVertices(t,s,A,p,v,_,B,F,U,Q){const K=v-A,X=_-p,J=B-v,oe=(U-v)/J,le=(Q-v)/J,he=Math.min(oe,le),be=Math.max(oe,le),rt=p+X*he;let Fe=Math.floor(Math.min(rt,F)/this._granularityCellSize)+1,Ue=Math.ceil(Math.max(rt,F)/this._granularityCellSize)-1,at=F<rt;const dt=J===0;if(dt&&(B===U||B===Q))return;if(dt||he>=1||be<=0){const Xt=A-B,Vt=_+(s-_)*Math.min((U-B)/Xt,(Q-B)/Xt);Fe=Math.floor(Math.min(Vt,F)/this._granularityCellSize)+1,Ue=Math.ceil(Math.max(Vt,F)/this._granularityCellSize)-1,at=F<Vt}const Mt=K>0?Q:U;if(at)for(let Xt=Fe;Xt<=Ue;Xt++)t.push(this._vertexToIndex(Xt*this._granularityCellSize,Mt));else for(let Xt=Ue;Xt>=Fe;Xt--)t.push(this._vertexToIndex(Xt*this._granularityCellSize,Mt))}_generateOutline(t){const s=[];for(const A of t){const p=XA(A,this._granularity,!0),v=this._pointArrayToIndices(p),_=[];for(let B=1;B<v.length;B++)_.push(v[B-1]),_.push(v[B]);s.push(_)}return s}_handlePoles(t){let s=!1,A=!1;this._canonical&&(this._canonical.y===0&&(s=!0),this._canonical.y===(1<<this._canonical.z)-1&&(A=!0)),(s||A)&&this._fillPoles(t,s,A)}_ensureNoPoleVertices(){const t=this._vertexBuffer;for(let s=0;s<t.length;s+=2){const A=t[s+1];A===yc&&(t[s+1]=-32767),A===Gu&&(t[s+1]=32766)}}_generatePoleQuad(t,s,A,p,v,_){p>v!=(_===yc)?(t.push(s),t.push(A),t.push(this._vertexToIndex(p,_)),t.push(A),t.push(this._vertexToIndex(v,_)),t.push(this._vertexToIndex(p,_))):(t.push(A),t.push(s),t.push(this._vertexToIndex(p,_)),t.push(this._vertexToIndex(v,_)),t.push(A),t.push(this._vertexToIndex(p,_)))}_fillPoles(t,s,A){const p=this._vertexBuffer,v=Ne,_=t.length;for(let B=2;B<_;B+=3){const F=t[B-2],U=t[B-1],Q=t[B],K=p[2*F],X=p[2*F+1],J=p[2*U],oe=p[2*U+1],le=p[2*Q],he=p[2*Q+1];s&&(X===0&&oe===0&&this._generatePoleQuad(t,F,U,K,J,yc),oe===0&&he===0&&this._generatePoleQuad(t,U,Q,J,le,yc),he===0&&X===0&&this._generatePoleQuad(t,Q,F,le,K,yc)),A&&(X===v&&oe===v&&this._generatePoleQuad(t,F,U,K,J,Gu),oe===v&&he===v&&this._generatePoleQuad(t,U,Q,J,le,Gu),he===v&&X===v&&this._generatePoleQuad(t,Q,F,le,K,Gu))}}_initializeVertices(t){for(let s=0;s<t.length;s+=2)this._vertexToIndex(t[s],t[s+1])}subdividePolygonInternal(t,s){if(this._used)throw new Error("Subdivision: multiple use not allowed.");this._used=!0;const{flattened:A,holeIndices:p}=(function(B){const F=[],U=[];for(const Q of B)if(Q.length!==0){Q!==B[0]&&F.push(U.length/2);for(let K=0;K<Q.length;K++)U.push(Q[K].x),U.push(Q[K].y)}return{flattened:U,holeIndices:F}})(t);let v;this._initializeVertices(A);try{const B=(function(U,Q,K=2){const X=Q&&Q.length,J=X?Q[0]*K:U.length;let oe=Rp(U,0,J,K,!0);const le=[];if(!oe||oe.next===oe.prev)return le;let he,be,rt;if(X&&(oe=(function(Fe,Ue,at,dt){const Mt=[];for(let Xt=0,Vt=Ue.length;Xt<Vt;Xt++){const ir=Rp(Fe,Ue[Xt]*dt,Xt<Vt-1?Ue[Xt+1]*dt:Fe.length,dt,!1);ir===ir.next&&(ir.steiner=!0),Mt.push(mc(ir))}Mt.sort(yi);for(let Xt=0;Xt<Mt.length;Xt++)at=ta(Mt[Xt],at);return at})(U,Q,oe,K)),U.length>80*K){he=U[0],be=U[1];let Fe=he,Ue=be;for(let at=K;at<J;at+=K){const dt=U[at],Mt=U[at+1];dt<he&&(he=dt),Mt<be&&(be=Mt),dt>Fe&&(Fe=dt),Mt>Ue&&(Ue=Mt)}rt=Math.max(Fe-he,Ue-be),rt=rt!==0?32767/rt:0}return Wh(oe,le,K,he,be,rt,0),le})(A,p),F=this._convertIndices(A,B);v=this._subdivideTrianglesScanline(F)}catch(B){console.error(B)}let _=[];return s&&(_=this._generateOutline(t)),this._ensureNoPoleVertices(),this._handlePoles(v),{verticesFlattened:this._vertexBuffer,indicesTriangles:v,indicesLineList:_}}_convertIndices(t,s){const A=[];for(let p=0;p<s.length;p++)A.push(this._vertexToIndex(t[2*s[p]],t[2*s[p]+1]));return A}_pointArrayToIndices(t){const s=[];for(let A=0;A<t.length;A++){const p=t[A];s.push(this._vertexToIndex(p.x,p.y))}return s}}function yf(l,t,s,A=!0){return new kd(s,t).subdividePolygonInternal(l,A)}function XA(l,t,s=!1){if(!l||l.length<1)return[];if(l.length<2)return[];const A=l[0],p=l[l.length-1],v=s&&(A.x!==p.x||A.y!==p.y);if(t<2)return v?[...l,l[0]]:[...l];const _=Math.floor(Ne/t),B=[];B.push(new w(l[0].x,l[0].y));const F=l.length,U=v?F:F-1;for(let Q=0;Q<U;Q++){const K=l[Q],X=Q<F-1?l[Q+1]:l[0],J=K.x,oe=K.y,le=X.x,he=X.y,be=J!==le,rt=oe!==he;if(!be&&!rt)continue;const Fe=le-J,Ue=he-oe,at=Math.abs(Fe),dt=Math.abs(Ue);let Mt=J,Xt=oe;for(;;){const ir=Fe>0?(Math.floor(Mt/_)+1)*_:(Math.ceil(Mt/_)-1)*_,wr=Ue>0?(Math.floor(Xt/_)+1)*_:(Math.ceil(Xt/_)-1)*_,ar=Math.abs(Mt-ir),$t=Math.abs(Xt-wr),Ot=Math.abs(Mt-le),Lr=Math.abs(Xt-he),Ir=be?ar/at:Number.POSITIVE_INFINITY,Ur=rt?$t/dt:Number.POSITIVE_INFINITY;if((Ot<=ar||!be)&&(Lr<=$t||!rt))break;if(Ir<Ur&&be||!rt){Mt=ir,Xt+=Ue*Ir;const Sr=new w(Mt,Math.round(Xt));B[B.length-1].x===Sr.x&&B[B.length-1].y===Sr.y||B.push(Sr)}else{Mt+=Fe*Ur,Xt=wr;const Sr=new w(Math.round(Mt),Xt);B[B.length-1].x===Sr.x&&B[B.length-1].y===Sr.y||B.push(Sr)}}const Vt=new w(le,he);B[B.length-1].x===Vt.x&&B[B.length-1].y===Vt.y||B.push(Vt)}return B}function vf(l,t,s){if(t.length===0)throw new Error("Subdivision vertex ring is empty.");let A=0,p=l[2*t[0]];for(let F=1;F<t.length;F++){const U=l[2*t[F]];U<p&&(p=U,A=F)}const v=t.length;let _=A,B=(_+1)%v;for(;;){const F=_-1>=0?_-1:v-1,U=(B+1)%v,Q=l[2*t[F]],K=l[2*t[U]],X=l[2*t[_]],J=l[2*t[_]+1],oe=l[2*t[B]+1];let le=!1;if(Q<K)le=!0;else if(Q>K)le=!1;else{const he=oe-J,be=-(l[2*t[B]]-X),rt=J<oe?1:-1;((Q-X)*he+(l[2*t[F]+1]-J)*be)*rt>((K-X)*he+(l[2*t[U]+1]-J)*be)*rt&&(le=!0)}if(le){const he=t[F],be=t[_],rt=t[B];he!==be&&he!==rt&&be!==rt&&s.push(rt,be,he),_--,_<0&&(_=v-1)}else{const he=t[U],be=t[_],rt=t[B];he!==be&&he!==rt&&be!==rt&&s.push(rt,be,he),B++,B>=v&&(B=0)}if(F===U)break}}function Wa(l,t,s,A,p,v,_,B,F){const U=p.length/2,Q=_&&B&&F;if(U<nr.MAX_VERTEX_ARRAY_LENGTH){const K=t.prepareSegment(U,s,A),X=K.vertexLength;for(let le=0;le<v.length;le+=3)A.emplaceBack(X+v[le],X+v[le+1],X+v[le+2]);let J,oe;K.vertexLength+=U,K.primitiveLength+=v.length/3,Q&&(oe=_.prepareSegment(U,s,B),J=oe.vertexLength,oe.vertexLength+=U);for(let le=0;le<p.length;le+=2)l(p[le],p[le+1]);if(Q)for(let le=0;le<F.length;le++){const he=F[le];for(let be=1;be<he.length;be+=2)B.emplaceBack(J+he[be-1],J+he[be]);oe.primitiveLength+=he.length/2}}else(function(K,X,J,oe,le,he){const be=[];for(let dt=0;dt<oe.length/2;dt++)be.push(-1);const rt={count:0};let Fe=0,Ue=K.getOrCreateLatestSegment(X,J),at=Ue.vertexLength;for(let dt=2;dt<le.length;dt+=3){const Mt=le[dt-2],Xt=le[dt-1],Vt=le[dt];let ir=be[Mt]<Fe,wr=be[Xt]<Fe,ar=be[Vt]<Fe;Ue.vertexLength+((ir?1:0)+(wr?1:0)+(ar?1:0))>nr.MAX_VERTEX_ARRAY_LENGTH&&(Ue=K.createNewSegment(X,J),Fe=rt.count,ir=!0,wr=!0,ar=!0,at=0);const $t=Zc(be,oe,he,rt,Mt,ir,Ue),Ot=Zc(be,oe,he,rt,Xt,wr,Ue),Lr=Zc(be,oe,he,rt,Vt,ar,Ue);J.emplaceBack(at+$t-Fe,at+Ot-Fe,at+Lr-Fe),Ue.primitiveLength++}})(t,s,A,p,v,l),Q&&(function(K,X,J,oe,le,he){const be=[];for(let dt=0;dt<oe.length/2;dt++)be.push(-1);const rt={count:0};let Fe=0,Ue=K.getOrCreateLatestSegment(X,J),at=Ue.vertexLength;for(let dt=0;dt<le.length;dt++){const Mt=le[dt];for(let Xt=1;Xt<le[dt].length;Xt+=2){const Vt=Mt[Xt-1],ir=Mt[Xt];let wr=be[Vt]<Fe,ar=be[ir]<Fe;Ue.vertexLength+((wr?1:0)+(ar?1:0))>nr.MAX_VERTEX_ARRAY_LENGTH&&(Ue=K.createNewSegment(X,J),Fe=rt.count,wr=!0,ar=!0,at=0);const $t=Zc(be,oe,he,rt,Vt,wr,Ue),Ot=Zc(be,oe,he,rt,ir,ar,Ue);J.emplaceBack(at+$t-Fe,at+Ot-Fe),Ue.primitiveLength++}}})(_,s,B,p,F,l),t.forceNewSegmentOnNextPrepare(),_?.forceNewSegmentOnNextPrepare()}function Zc(l,t,s,A,p,v,_){if(v){const B=A.count;return s(t[2*p],t[2*p+1]),l[p]=A.count,A.count++,_.vertexLength++,B}return l[p]}class vc{constructor(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map((s=>s.id)),this.index=t.index,this.hasDependencies=!1,this.patternFeatures=[],this.layoutVertexArray=new _e,this.indexArray=new Dt,this.indexArray2=new Lt,this.programConfigurations=new cs(t.layers,t.zoom),this.segments=new nr,this.segments2=new nr,this.stateDependentLayerIds=this.layers.filter((s=>s.isStateDependent())).map((s=>s.id))}populate(t,s,A){this.hasDependencies=ff("fill",this.layers,s);const p=this.layers[0].layout.get("fill-sort-key"),v=!p.isConstant(),_=[];for(const{feature:B,id:F,index:U,sourceLayerIndex:Q}of t){const K=this.layers[0]._featureFilter.needGeometry,X=qA(B,K);if(!this.layers[0]._featureFilter.filter(new Mr(this.zoom),X,A))continue;const J=v?p.evaluate(X,{},A,s.availableImages):void 0,oe={id:F,properties:B.properties,type:B.type,sourceLayerIndex:Q,index:U,geometry:K?X.geometry:KA(B),patterns:{},sortKey:J};_.push(oe)}v&&_.sort(((B,F)=>B.sortKey-F.sortKey));for(const B of _){const{geometry:F,index:U,sourceLayerIndex:Q}=B;if(this.hasDependencies){const K=pf("fill",this.layers,B,{zoom:this.zoom},s);this.patternFeatures.push(K)}else this.addFeature(B,F,U,A,{},s.subdivisionGranularity);s.featureIndex.insert(t[U].feature,F,U,Q,this.index)}}update(t,s,A){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,s,this.stateDependentLayers,{imagePositions:A})}addFeatures(t,s,A){for(const p of this.patternFeatures)this.addFeature(p,p.geometry,p.index,s,A,t.subdivisionGranularity)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,WA),this.indexBuffer=t.createIndexBuffer(this.indexArray),this.indexBuffer2=t.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(t),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(t,s,A,p,v,_){for(const B of Ma(s,500)){const F=yf(B,p,_.fill.getGranularityForZoomLevel(p.z)),U=this.layoutVertexArray;Wa(((Q,K)=>{U.emplaceBack(Q,K)}),this.segments,this.layoutVertexArray,this.indexArray,F.verticesFlattened,F.indicesTriangles,this.segments2,this.indexArray2,F.indicesLineList)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,A,{imagePositions:v,canonical:p})}}let _l,Qp;$e("FillBucket",vc,{omit:["layers","patternFeatures"]});var Op={get paint(){return Qp=Qp||new ci({"fill-antialias":new yr(mt.paint_fill["fill-antialias"]),"fill-opacity":new br(mt.paint_fill["fill-opacity"]),"fill-color":new br(mt.paint_fill["fill-color"]),"fill-outline-color":new br(mt.paint_fill["fill-outline-color"]),"fill-translate":new yr(mt.paint_fill["fill-translate"]),"fill-translate-anchor":new yr(mt.paint_fill["fill-translate-anchor"]),"fill-pattern":new Ti(mt.paint_fill["fill-pattern"])})},get layout(){return _l=_l||new ci({"fill-sort-key":new br(mt.layout_fill["fill-sort-key"])})}};class zp extends Nn{constructor(t,s){super(t,Op,s)}recalculate(t,s){super.recalculate(t,s);const A=this.paint._values["fill-outline-color"];A.value.kind==="constant"&&A.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(t){return new vc(t)}queryRadius(){return mh(this.paint.get("fill-translate"))}queryIntersectsFeature({queryGeometry:t,geometry:s,transform:A,pixelsToTileUnits:p}){return Kh($c(t,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),-A.bearingInRadians,p),s)}isTileClipped(){return!0}}const rv=Vn([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),Ku=Vn([{name:"a_centroid",components:2,type:"Int16"}],4),{members:hg}=rv;class wh{constructor(t,s,A,p,v){this.properties={},this.extent=A,this.type=0,this.id=void 0,this._pbf=t,this._geometry=-1,this._keys=p,this._values=v,t.readFields(xh,this,s)}loadGeometry(){const t=this._pbf;t.pos=this._geometry;const s=t.readVarint()+t.pos,A=[];let p,v=1,_=0,B=0,F=0;for(;t.pos<s;){if(_<=0){const U=t.readVarint();v=7&U,_=U>>3}if(_--,v===1||v===2)B+=t.readSVarint(),F+=t.readSVarint(),v===1&&(p&&A.push(p),p=[]),p&&p.push(new w(B,F));else{if(v!==7)throw new Error(`unknown command ${v}`);p&&p.push(p[0].clone())}}return p&&A.push(p),A}bbox(){const t=this._pbf;t.pos=this._geometry;const s=t.readVarint()+t.pos;let A=1,p=0,v=0,_=0,B=1/0,F=-1/0,U=1/0,Q=-1/0;for(;t.pos<s;){if(p<=0){const K=t.readVarint();A=7&K,p=K>>3}if(p--,A===1||A===2)v+=t.readSVarint(),_+=t.readSVarint(),v<B&&(B=v),v>F&&(F=v),_<U&&(U=_),_>Q&&(Q=_);else if(A!==7)throw new Error(`unknown command ${A}`)}return[B,U,F,Q]}toGeoJSON(t,s,A){const p=this.extent*Math.pow(2,A),v=this.extent*t,_=this.extent*s,B=this.loadGeometry();function F(X){return[360*(X.x+v)/p-180,360/Math.PI*Math.atan(Math.exp((1-2*(X.y+_)/p)*Math.PI))-90]}function U(X){return X.map(F)}let Q;if(this.type===1){const X=[];for(const oe of B)X.push(oe[0]);const J=U(X);Q=X.length===1?{type:"Point",coordinates:J[0]}:{type:"MultiPoint",coordinates:J}}else if(this.type===2){const X=B.map(U);Q=X.length===1?{type:"LineString",coordinates:X[0]}:{type:"MultiLineString",coordinates:X}}else{if(this.type!==3)throw new Error("unknown feature type");{const X=_f(B),J=[];for(const oe of X)J.push(oe.map(U));Q=J.length===1?{type:"Polygon",coordinates:J[0]}:{type:"MultiPolygon",coordinates:J}}}const K={type:"Feature",geometry:Q,properties:this.properties};return this.id!=null&&(K.id=this.id),K}}function xh(l,t,s){l===1?t.id=s.readVarint():l===2?(function(A,p){const v=A.readVarint()+A.pos;for(;A.pos<v;){const _=p._keys[A.readVarint()],B=p._values[A.readVarint()];p.properties[_]=B}})(s,t):l===3?t.type=s.readVarint():l===4&&(t._geometry=s.pos)}function _f(l){const t=l.length;if(t<=1)return[l];const s=[];let A,p;for(let v=0;v<t;v++){const _=bh(l[v]);_!==0&&(p===void 0&&(p=_<0),p===_<0?(A&&s.push(A),A=[l[v]]):A&&A.push(l[v]))}return A&&s.push(A),s}function bh(l){let t=0;for(let s,A,p=0,v=l.length,_=v-1;p<v;_=p++)s=l[p],A=l[_],t+=(A.x-s.x)*(s.y+A.y);return t}wh.types=["Unknown","Point","LineString","Polygon"];class dg{constructor(t,s){this.version=1,this.name="",this.extent=4096,this.length=0,this._pbf=t,this._keys=[],this._values=[],this._features=[],t.readFields(fg,this,s),this.length=this._features.length}feature(t){if(t<0||t>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[t];const s=this._pbf.readVarint()+this._pbf.pos;return new wh(this._pbf,s,this.extent,this._keys,this._values)}}function fg(l,t,s){l===15?t.version=s.readVarint():l===1?t.name=s.readString():l===5?t.extent=s.readVarint():l===2?t._features.push(s.pos):l===3?t._keys.push(s.readString()):l===4&&t._values.push((function(A){let p=null;const v=A.readVarint()+A.pos;for(;A.pos<v;){const _=A.readVarint()>>3;p=_===1?A.readString():_===2?A.readFloat():_===3?A.readDouble():_===4?A.readVarint64():_===5?A.readVarint():_===6?A.readSVarint():_===7?A.readBoolean():null}if(p==null)throw new Error("unknown feature value");return p})(s))}class wf{constructor(t,s){this.layers=t.readFields(xf,{},s)}}function xf(l,t,s){if(l===3){const A=new dg(s,s.readVarint()+s.pos);A.length&&(t[A.name]=A)}}const Hp=Math.pow(2,13);function Ud(l,t,s,A,p,v,_,B){l.emplaceBack(t,s,2*Math.floor(A*Hp)+_,p*Hp*2,v*Hp*2,Math.round(B))}class bf{constructor(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map((s=>s.id)),this.index=t.index,this.hasDependencies=!1,this.layoutVertexArray=new De,this.centroidVertexArray=new te,this.indexArray=new Dt,this.programConfigurations=new cs(t.layers,t.zoom),this.segments=new nr,this.stateDependentLayerIds=this.layers.filter((s=>s.isStateDependent())).map((s=>s.id))}populate(t,s,A){this.features=[],this.hasDependencies=ff("fill-extrusion",this.layers,s);for(const{feature:p,id:v,index:_,sourceLayerIndex:B}of t){const F=this.layers[0]._featureFilter.needGeometry,U=qA(p,F);if(!this.layers[0]._featureFilter.filter(new Mr(this.zoom),U,A))continue;const Q={id:v,sourceLayerIndex:B,index:_,geometry:F?U.geometry:KA(p),properties:p.properties,type:p.type,patterns:{}};this.hasDependencies?this.features.push(pf("fill-extrusion",this.layers,Q,{zoom:this.zoom},s)):this.addFeature(Q,Q.geometry,_,A,{},s.subdivisionGranularity),s.featureIndex.insert(p,Q.geometry,_,B,this.index,!0)}}addFeatures(t,s,A){for(const p of this.features){const{geometry:v}=p;this.addFeature(p,v,p.index,s,A,t.subdivisionGranularity)}}update(t,s,A){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,s,this.stateDependentLayers,{imagePositions:A})}isEmpty(){return this.layoutVertexArray.length===0&&this.centroidVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,hg),this.centroidVertexBuffer=t.createVertexBuffer(this.centroidVertexArray,Ku.members,!0),this.indexBuffer=t.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(t),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.centroidVertexBuffer.destroy())}addFeature(t,s,A,p,v,_){for(const B of Ma(s,500)){const F={x:0,y:0,sampleCount:0},U=this.layoutVertexArray.length;this.processPolygon(F,p,t,B,_);const Q=this.layoutVertexArray.length-U,K=Math.floor(F.x/F.sampleCount),X=Math.floor(F.y/F.sampleCount);for(let J=0;J<Q;J++)this.centroidVertexArray.emplaceBack(K,X)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,A,{imagePositions:v,canonical:p})}processPolygon(t,s,A,p,v){if(p.length<1||mg(p[0]))return;for(const K of p)K.length!==0&&pg(t,K);const _={segment:this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray)},B=v.fill.getGranularityForZoomLevel(s.z),F=wh.types[A.type]==="Polygon";for(const K of p){if(K.length===0||mg(K))continue;const X=XA(K,B,F);this._generateSideFaces(X,_)}if(!F)return;const U=yf(p,s,B,!1),Q=this.layoutVertexArray;Wa(((K,X)=>{Ud(Q,K,X,0,0,1,1,0)}),this.segments,this.layoutVertexArray,this.indexArray,U.verticesFlattened,U.indicesTriangles)}_generateSideFaces(t,s){let A=0;for(let p=1;p<t.length;p++){const v=t[p],_=t[p-1];if(Bh(v,_))continue;s.segment.vertexLength+4>nr.MAX_VERTEX_ARRAY_LENGTH&&(s.segment=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));const B=v.sub(_)._perp()._unit(),F=_.dist(v);A+F>32768&&(A=0),Ud(this.layoutVertexArray,v.x,v.y,B.x,B.y,0,0,A),Ud(this.layoutVertexArray,v.x,v.y,B.x,B.y,0,1,A),A+=F,Ud(this.layoutVertexArray,_.x,_.y,B.x,B.y,0,0,A),Ud(this.layoutVertexArray,_.x,_.y,B.x,B.y,0,1,A);const U=s.segment.vertexLength;this.indexArray.emplaceBack(U,U+2,U+1),this.indexArray.emplaceBack(U+1,U+2,U+3),s.segment.vertexLength+=4,s.segment.primitiveLength+=2}}}function pg(l,t){for(let s=0;s<t.length;s++){const A=t[s];s===t.length-1&&t[0].x===A.x&&t[0].y===A.y||(l.x+=A.x,l.y+=A.y,l.sampleCount++)}}function Bh(l,t){return l.x===t.x&&(l.x<0||l.x>Ne)||l.y===t.y&&(l.y<0||l.y>Ne)}function mg(l){return l.every((t=>t.x<0))||l.every((t=>t.x>Ne))||l.every((t=>t.y<0))||l.every((t=>t.y>Ne))}let Ch;$e("FillExtrusionBucket",bf,{omit:["layers","features"]});var gg={get paint(){return Ch=Ch||new ci({"fill-extrusion-opacity":new yr(mt["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new br(mt["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new yr(mt["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new yr(mt["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new Ti(mt["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new br(mt["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new br(mt["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new yr(mt["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})}};class no extends Nn{constructor(t,s){super(t,gg,s)}createBucket(t){return new bf(t)}queryRadius(){return mh(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}queryIntersectsFeature({queryGeometry:t,feature:s,featureState:A,geometry:p,transform:v,pixelsToTileUnits:_,pixelPosMatrix:B}){const F=$c(t,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),-v.bearingInRadians,_),U=this.paint.get("fill-extrusion-height").evaluate(s,A),Q=this.paint.get("fill-extrusion-base").evaluate(s,A),K=(function(J,oe){const le=[];for(const he of J){const be=[he.x,he.y,0,1];Ie(be,be,oe),le.push(new w(be[0]/be[3],be[1]/be[3]))}return le})(F,B),X=(function(J,oe,le,he){const be=[],rt=[],Fe=he[8]*oe,Ue=he[9]*oe,at=he[10]*oe,dt=he[11]*oe,Mt=he[8]*le,Xt=he[9]*le,Vt=he[10]*le,ir=he[11]*le;for(const wr of J){const ar=[],$t=[];for(const Ot of wr){const Lr=Ot.x,Ir=Ot.y,Ur=he[0]*Lr+he[4]*Ir+he[12],Sr=he[1]*Lr+he[5]*Ir+he[13],Jr=he[2]*Lr+he[6]*Ir+he[14],ri=he[3]*Lr+he[7]*Ir+he[15],Gn=Jr+at,ps=ri+dt,Ja=Ur+Mt,wo=Sr+Xt,ms=Jr+Vt,As=ri+ir,Bi=new w((Ur+Fe)/ps,(Sr+Ue)/ps);Bi.z=Gn/ps,ar.push(Bi);const js=new w(Ja/As,wo/As);js.z=ms/As,$t.push(js)}be.push(ar),rt.push($t)}return[be,rt]})(p,Q,U,B);return(function(J,oe,le){let he=1/0;Kh(le,oe)&&(he=jp(le,oe[0]));for(let be=0;be<oe.length;be++){const rt=oe[be],Fe=J[be];for(let Ue=0;Ue<rt.length-1;Ue++){const at=rt[Ue],dt=[at,rt[Ue+1],Fe[Ue+1],Fe[Ue],at];hh(le,dt)&&(he=Math.min(he,jp(le,dt)))}}return he!==1/0&&he})(X[0],X[1],K)}}function Dd(l,t){return l.x*t.x+l.y*t.y}function jp(l,t){if(l.length===1){let s=0;const A=t[s++];let p;for(;!p||A.equals(p);)if(p=t[s++],!p)return 1/0;for(;s<t.length;s++){const v=t[s],_=l[0],B=p.sub(A),F=v.sub(A),U=_.sub(A),Q=Dd(B,B),K=Dd(B,F),X=Dd(F,F),J=Dd(U,B),oe=Dd(U,F),le=Q*X-K*K,he=(X*J-K*oe)/le,be=(Q*oe-K*J)/le,rt=A.z*(1-he-be)+p.z*he+v.z*be;if(isFinite(rt))return rt}return 1/0}{let s=1/0;for(const A of t)s=Math.min(s,A.z);return s}}const nv=Vn([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),{members:iv}=nv,yg=Vn([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]),{members:vg}=yg,sv=Math.cos(Math.PI/180*37.5),_c=Math.pow(2,14)/.5;class Rd{constructor(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map((s=>s.id)),this.index=t.index,this.hasDependencies=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach((s=>{this.gradients[s.id]={}})),this.layoutVertexArray=new ze,this.layoutVertexArray2=new Oe,this.indexArray=new Dt,this.programConfigurations=new cs(t.layers,t.zoom),this.segments=new nr,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter((s=>s.isStateDependent())).map((s=>s.id))}populate(t,s,A){this.hasDependencies=ff("line",this.layers,s)||this.hasLineDasharray(this.layers);const p=this.layers[0].layout.get("line-sort-key"),v=!p.isConstant(),_=[];for(const{feature:B,id:F,index:U,sourceLayerIndex:Q}of t){const K=this.layers[0]._featureFilter.needGeometry,X=qA(B,K);if(!this.layers[0]._featureFilter.filter(new Mr(this.zoom),X,A))continue;const J=v?p.evaluate(X,{},A):void 0,oe={id:F,properties:B.properties,type:B.type,sourceLayerIndex:Q,index:U,geometry:K?X.geometry:KA(B),patterns:{},dashes:{},sortKey:J};_.push(oe)}v&&_.sort(((B,F)=>B.sortKey-F.sortKey));for(const B of _){const{geometry:F,index:U,sourceLayerIndex:Q}=B;this.hasDependencies?(ff("line",this.layers,s)?pf("line",this.layers,B,{zoom:this.zoom},s):this.hasLineDasharray(this.layers)&&this.addLineDashDependencies(this.layers,B,this.zoom,s),this.patternFeatures.push(B)):this.addFeature(B,F,U,A,{},{},s.subdivisionGranularity),s.featureIndex.insert(t[U].feature,F,U,Q,this.index)}}update(t,s,A,p){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,s,this.stateDependentLayers,{imagePositions:A,dashPositions:p})}addFeatures(t,s,A,p){for(const v of this.patternFeatures)this.addFeature(v,v.geometry,v.index,s,A,p,t.subdivisionGranularity)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(t){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=t.createVertexBuffer(this.layoutVertexArray2,vg)),this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,iv),this.indexBuffer=t.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(t),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(t){if(t.properties&&Object.prototype.hasOwnProperty.call(t.properties,"mapbox_clip_start")&&Object.prototype.hasOwnProperty.call(t.properties,"mapbox_clip_end"))return{start:+t.properties.mapbox_clip_start,end:+t.properties.mapbox_clip_end}}addFeature(t,s,A,p,v,_,B){const F=this.layers[0].layout,U=F.get("line-join").evaluate(t,{}),Q=F.get("line-cap"),K=F.get("line-miter-limit"),X=F.get("line-round-limit");this.lineClips=this.lineFeatureClips(t);for(const J of s)this.addLine(J,t,U,Q,K,X,p,B);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,A,{imagePositions:v,dashPositions:_,canonical:p})}addLine(t,s,A,p,v,_,B,F){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,t=XA(t,B?F.line.getGranularityForZoomLevel(B.z):1),this.lineClips){this.lineClipsArray.push(this.lineClips);for(let Fe=0;Fe<t.length-1;Fe++)this.totalDistance+=t[Fe].dist(t[Fe+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const U=wh.types[s.type]==="Polygon";let Q=t.length;for(;Q>=2&&t[Q-1].equals(t[Q-2]);)Q--;let K=0;for(;K<Q-1&&t[K].equals(t[K+1]);)K++;if(Q<(U?3:2))return;A==="bevel"&&(v=1.05);const X=this.overscaling<=16?122880/(512*this.overscaling):0,J=this.segments.prepareSegment(10*Q,this.layoutVertexArray,this.indexArray);let oe,le,he,be,rt;this.e1=this.e2=-1,U&&(oe=t[Q-2],rt=t[K].sub(oe)._unit()._perp());for(let Fe=K;Fe<Q;Fe++){if(he=Fe===Q-1?U?t[K+1]:void 0:t[Fe+1],he&&t[Fe].equals(he))continue;rt&&(be=rt),oe&&(le=oe),oe=t[Fe],rt=he?he.sub(oe)._unit()._perp():be,be=be||rt;let Ue=be.add(rt);Ue.x===0&&Ue.y===0||Ue._unit();const at=be.x*rt.x+be.y*rt.y,dt=Ue.x*rt.x+Ue.y*rt.y,Mt=dt!==0?1/dt:1/0,Xt=2*Math.sqrt(2-2*dt),Vt=dt<sv&&le&&he,ir=be.x*rt.y-be.y*rt.x>0;if(Vt&&Fe>K){const $t=oe.dist(le);if($t>2*X){const Ot=oe.sub(oe.sub(le)._mult(X/$t)._round());this.updateDistance(le,Ot),this.addCurrentVertex(Ot,be,0,0,J),le=Ot}}const wr=le&&he;let ar=wr?A:U?"butt":p;if(wr&&ar==="round"&&(Mt<_?ar="miter":Mt<=2&&(ar="fakeround")),ar==="miter"&&Mt>v&&(ar="bevel"),ar==="bevel"&&(Mt>2&&(ar="flipbevel"),Mt<v&&(ar="miter")),le&&this.updateDistance(le,oe),ar==="miter")Ue._mult(Mt),this.addCurrentVertex(oe,Ue,0,0,J);else if(ar==="flipbevel"){if(Mt>100)Ue=rt.mult(-1);else{const $t=Mt*be.add(rt).mag()/be.sub(rt).mag();Ue._perp()._mult($t*(ir?-1:1))}this.addCurrentVertex(oe,Ue,0,0,J),this.addCurrentVertex(oe,Ue.mult(-1),0,0,J)}else if(ar==="bevel"||ar==="fakeround"){const $t=-Math.sqrt(Mt*Mt-1),Ot=ir?$t:0,Lr=ir?0:$t;if(le&&this.addCurrentVertex(oe,be,Ot,Lr,J),ar==="fakeround"){const Ir=Math.round(180*Xt/Math.PI/20);for(let Ur=1;Ur<Ir;Ur++){let Sr=Ur/Ir;if(Sr!==.5){const ri=Sr-.5;Sr+=Sr*ri*(Sr-1)*((1.0904+at*(at*(3.55645-1.43519*at)-3.2452))*ri*ri+(.848013+at*(.215638*at-1.06021)))}const Jr=rt.sub(be)._mult(Sr)._add(be)._unit()._mult(ir?-1:1);this.addHalfVertex(oe,Jr.x,Jr.y,!1,ir,0,J)}}he&&this.addCurrentVertex(oe,rt,-Ot,-Lr,J)}else if(ar==="butt")this.addCurrentVertex(oe,Ue,0,0,J);else if(ar==="square"){const $t=le?1:-1;this.addCurrentVertex(oe,Ue,$t,$t,J)}else ar==="round"&&(le&&(this.addCurrentVertex(oe,be,0,0,J),this.addCurrentVertex(oe,be,1,1,J,!0)),he&&(this.addCurrentVertex(oe,rt,-1,-1,J,!0),this.addCurrentVertex(oe,rt,0,0,J)));if(Vt&&Fe<Q-1){const $t=oe.dist(he);if($t>2*X){const Ot=oe.add(he.sub(oe)._mult(X/$t)._round());this.updateDistance(oe,Ot),this.addCurrentVertex(Ot,rt,0,0,J),oe=Ot}}}}addCurrentVertex(t,s,A,p,v,_=!1){const B=s.y*p-s.x,F=-s.y-s.x*p;this.addHalfVertex(t,s.x+s.y*A,s.y-s.x*A,_,!1,A,v),this.addHalfVertex(t,B,F,_,!0,-p,v),this.distance>_c/2&&this.totalDistance===0&&(this.distance=0,this.updateScaledDistance(),this.addCurrentVertex(t,s,A,p,v,_))}addHalfVertex({x:t,y:s},A,p,v,_,B,F){const U=.5*(this.lineClips?this.scaledDistance*(_c-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((t<<1)+(v?1:0),(s<<1)+(_?1:0),Math.round(63*A)+128,Math.round(63*p)+128,1+(B===0?0:B<0?-1:1)|(63&U)<<2,U>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);const Q=F.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,Q,this.e2),F.primitiveLength++),_?this.e2=Q:this.e1=Q}updateScaledDistance(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance}updateDistance(t,s){this.distance+=t.dist(s),this.updateScaledDistance()}hasLineDasharray(t){for(const s of t){const A=s.paint.get("line-dasharray");if(A&&!A.isConstant())return!0}return!1}addLineDashDependencies(t,s,A,p){for(const v of t){const _=v.paint.get("line-dasharray");if(!_||_.value.kind==="constant")continue;const B=v.layout.get("line-cap")==="round",F={dasharray:_.value.evaluate({zoom:A-1},s,{}),round:B},U={dasharray:_.value.evaluate({zoom:A},s,{}),round:B},Q={dasharray:_.value.evaluate({zoom:A+1},s,{}),round:B},K=`${F.dasharray.join(",")},${F.round}`,X=`${U.dasharray.join(",")},${U.round}`,J=`${Q.dasharray.join(",")},${Q.round}`;p.dashDependencies[K]=F,p.dashDependencies[X]=U,p.dashDependencies[J]=Q,s.dashes[v.id]={min:K,mid:X,max:J}}}}let _g,yu;$e("LineBucket",Rd,{omit:["layers","patternFeatures"]});var Nd={get paint(){return yu=yu||new ci({"line-opacity":new br(mt.paint_line["line-opacity"]),"line-color":new br(mt.paint_line["line-color"]),"line-translate":new yr(mt.paint_line["line-translate"]),"line-translate-anchor":new yr(mt.paint_line["line-translate-anchor"]),"line-width":new br(mt.paint_line["line-width"]),"line-gap-width":new br(mt.paint_line["line-gap-width"]),"line-offset":new br(mt.paint_line["line-offset"]),"line-blur":new br(mt.paint_line["line-blur"]),"line-dasharray":new Ti(mt.paint_line["line-dasharray"]),"line-pattern":new Ti(mt.paint_line["line-pattern"]),"line-gradient":new ei(mt.paint_line["line-gradient"])})},get layout(){return _g=_g||new ci({"line-cap":new yr(mt.layout_line["line-cap"]),"line-join":new br(mt.layout_line["line-join"]),"line-miter-limit":new yr(mt.layout_line["line-miter-limit"]),"line-round-limit":new yr(mt.layout_line["line-round-limit"]),"line-sort-key":new br(mt.layout_line["line-sort-key"])})}};class Eh extends br{possiblyEvaluate(t,s){return s=new Mr(Math.floor(s.zoom),{now:s.now,fadeDuration:s.fadeDuration,zoomHistory:s.zoomHistory,transition:s.transition}),super.possiblyEvaluate(t,s)}evaluate(t,s,A,p){return s=_t({},s,{zoom:Math.floor(s.zoom)}),super.evaluate(t,s,A,p)}}let Sh;class Vp extends Nn{constructor(t,s){super(t,Nd,s),this.gradientVersion=0,Sh||(Sh=new Eh(Nd.paint.properties["line-width"].specification),Sh.useIntegerZoom=!0)}_handleSpecialPaintPropertyUpdate(t){if(t==="line-gradient"){const s=this.gradientExpression();this.stepInterpolant=!!(function(A){return A._styleExpression!==void 0})(s)&&s._styleExpression.expression instanceof da,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(t,s){super.recalculate(t,s),this.paint._values["line-floorwidth"]=Sh.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,t)}createBucket(t){return new Rd(t)}queryRadius(t){const s=t,A=Bf(ph("line-width",this,s),ph("line-gap-width",this,s)),p=ph("line-offset",this,s);return A/2+Math.abs(p)+mh(this.paint.get("line-translate"))}queryIntersectsFeature({queryGeometry:t,feature:s,featureState:A,geometry:p,transform:v,pixelsToTileUnits:_}){const B=$c(t,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),-v.bearingInRadians,_),F=_/2*Bf(this.paint.get("line-width").evaluate(s,A),this.paint.get("line-gap-width").evaluate(s,A)),U=this.paint.get("line-offset").evaluate(s,A);return U&&(p=(function(Q,K){const X=[];for(let J=0;J<Q.length;J++){const oe=ev(Q[J]),le=[];for(let he=0;he<oe.length;he++){const be=oe[he],rt=oe[he-1],Fe=oe[he+1],Ue=he===0?new w(0,0):be.sub(rt)._unit()._perp(),at=he===oe.length-1?new w(0,0):Fe.sub(be)._unit()._perp(),dt=Ue._add(at)._unit(),Mt=dt.x*at.x+dt.y*at.y;Mt!==0&&dt._mult(1/Mt),le.push(dt._mult(K)._add(be))}X.push(le)}return X})(p,U*_)),(function(Q,K,X){for(let J=0;J<K.length;J++){const oe=K[J];if(Q.length>=3){for(let le=0;le<oe.length;le++)if(fh(Q,oe[le]))return!0}if(dh(Q,oe,X))return!0}return!1})(B,p,F)}isTileClipped(){return!0}}function Bf(l,t){return t>0?t+2*l:l}const ov=Vn([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),Gp=Vn([{name:"a_projected_pos",components:3,type:"Float32"}],4);Vn([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const av=Vn([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"},{name:"a_box_real",components:2,type:"Int16"}]);Vn([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const Kp=Vn([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),wg=Vn([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function Cf(l,t,s){return l.sections.forEach((A=>{A.text=(function(p,v,_){const B=v.layout.get("text-transform").evaluate(_,{});return B==="uppercase"?p=p.toLocaleUpperCase():B==="lowercase"&&(p=p.toLocaleLowerCase()),pi.applyArabicShaping&&(p=pi.applyArabicShaping(p)),p})(A.text,t,s)})),l}Vn([{name:"triangle",components:3,type:"Uint16"}]),Vn([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),Vn([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",name:"collisionCircleDiameter"},{type:"Uint16",name:"textAnchorOffsetStartIndex"},{type:"Uint16",name:"textAnchorOffsetEndIndex"}]),Vn([{type:"Float32",name:"offsetX"}]),Vn([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]),Vn([{type:"Uint16",name:"textAnchor"},{type:"Float32",components:2,name:"textOffset"}]);var Hs=24;const Zh={"!":"","#":"",$:"","%":"","&":"","(":"",")":"","*":"","+":"",",":"","-":"",".":"","/":"",":":"",";":"","<":"","=":"",">":"","?":"","@":"","[":"","\\":"","]":"","^":"",_:"","`":"","{":"","|":"","}":"","~":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":""},qp={10:!0,32:!0,38:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0},lv={40:!0};function $p(l,t,s,A,p,v){if("fontStack"in t){const _=s[t.fontStack],B=_&&_[l];return B?B.metrics.advance*t.scale+p:0}{const _=A[t.imageName];return _?_.displaySize[0]*t.scale*Hs/v+p:0}}function Ef(l,t,s,A){const p=Math.pow(l-t,2);return A?l<t?p/2:2*p:p+Math.abs(s)*s}function Sf(l,t,s){let A=0;return l===10&&(A-=1e4),s&&(A+=150),l!==40&&l!==65288||(A+=50),t!==41&&t!==65289||(A+=50),A}function Ff(l,t,s,A,p,v){let _=null,B=Ef(t,s,p,v);for(const F of A){const U=Ef(t-F.x,s,p,v)+F.badness;U<=B&&(_=F,B=U)}return{index:l,x:t,priorBreak:_,badness:B}}function Qd(l){return l?Qd(l.priorBreak).concat(l.index):[]}class Fh{constructor(t="",s=[],A=[]){this.text=t,this.sections=s,this.sectionIndex=A,this.imageSectionID=null}static fromFeature(t,s){const A=new Fh;for(let p=0;p<t.sections.length;p++){const v=t.sections[p];v.image?A.addImageSection(v):A.addTextSection(v,s)}return A}length(){return[...this.text].length}getSection(t){return this.sections[this.sectionIndex[t]]}getSectionIndex(t){return this.sectionIndex[t]}verticalizePunctuation(){this.text=(function(t){let s="",A={premature:!0,value:void 0};const p=t[Symbol.iterator]();let v=p.next();const _=t[Symbol.iterator]();_.next();let B=_.next();for(;!v.done;)s+=!B.done&&On(B.value.codePointAt(0))&&!Zh[B.value]||!A.premature&&On(A.value.codePointAt(0))&&!Zh[A.value]||!Zh[v.value]?v.value:Zh[v.value],A={value:v.value,premature:!1},v=p.next(),B=_.next();return s})(this.text)}hasZeroWidthSpaces(){return this.text.includes("")}trim(){const t=this.text.match(/^\s*/),s=t?t[0].length:0,A=this.text.match(/\S\s*$/),p=A?A[0].length-1:0;this.text=this.text.substring(s,this.text.length-p),this.sectionIndex=this.sectionIndex.slice(s,this.sectionIndex.length-p)}substring(t,s){const A=[...this.text].slice(t,s).join(""),p=this.sectionIndex.slice(t,s);return new Fh(A,this.sections,p)}toCodeUnitIndex(t){return[...this.text].slice(0,t).join("").length}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce(((t,s)=>Math.max(t,this.sections[s].scale)),0)}getMaxImageSize(t){let s=0,A=0;for(let p=0;p<this.length();p++){const v=this.getSection(p);if("imageName"in v){const _=t[v.imageName];if(!_)continue;const B=_.displaySize;s=Math.max(s,B[0]),A=Math.max(A,B[1])}}return{maxImageWidth:s,maxImageHeight:A}}addTextSection(t,s){this.text+=t.text,this.sections.push({scale:t.scale||1,verticalAlign:t.verticalAlign||"bottom",fontStack:t.fontStack||s});const A=this.sections.length-1;this.sectionIndex.push(...[...t.text].map((()=>A)))}addImageSection(t){const s=t.image?t.image.name:"";if(s.length===0)return void _r("Can't add FormattedSection with an empty image.");const A=this.getNextImageSectionCharCode();A?(this.text+=String.fromCharCode(A),this.sections.push({scale:1,verticalAlign:t.verticalAlign||"bottom",imageName:s}),this.sectionIndex.push(this.sections.length-1)):_r("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}determineLineBreaks(t,s,A,p,v){const _=[],B=this.determineAverageLineWidth(t,s,A,p,v),F=this.hasZeroWidthSpaces();let U=0,Q=0;const K=this.text[Symbol.iterator]();let X=K.next();const J=this.text[Symbol.iterator]();J.next();let oe=J.next();const le=this.text[Symbol.iterator]();le.next(),le.next();let he=le.next();for(;!X.done;){const be=this.getSection(Q),rt=X.value.codePointAt(0);if(tr(rt)||(U+=$p(rt,be,A,p,t,v)),!oe.done){const Fe=qt(rt),Ue=oe.value.codePointAt(0);(qp[rt]||Fe||"imageName"in be||!he.done&&lv[Ue])&&_.push(Ff(Q+1,U,B,_,Sf(rt,Ue,Fe&&F),!1))}Q++,X=K.next(),oe=J.next(),he=le.next()}return Qd(Ff(this.length(),U,B,_,0,!0))}determineAverageLineWidth(t,s,A,p,v){let _=0,B=0;for(const F of this.text){const U=this.getSection(B);_+=$p(F.codePointAt(0),U,A,p,t,v),B++}return _/Math.max(1,Math.ceil(_/s))}}const Wp=4294967296,Od=1/Wp,xg=typeof TextDecoder>"u"?null:new TextDecoder("utf-8");class qu{constructor(t=new Uint8Array(16)){this.buf=ArrayBuffer.isView(t)?t:new Uint8Array(t),this.dataView=new DataView(this.buf.buffer),this.pos=0,this.type=0,this.length=this.buf.length}readFields(t,s,A=this.length){for(;this.pos<A;){const p=this.readVarint(),v=p>>3,_=this.pos;this.type=7&p,t(v,s,this),this.pos===_&&this.skip(p)}return s}readMessage(t,s){return this.readFields(t,s,this.readVarint()+this.pos)}readFixed32(){const t=this.dataView.getUint32(this.pos,!0);return this.pos+=4,t}readSFixed32(){const t=this.dataView.getInt32(this.pos,!0);return this.pos+=4,t}readFixed64(){const t=this.dataView.getUint32(this.pos,!0)+this.dataView.getUint32(this.pos+4,!0)*Wp;return this.pos+=8,t}readSFixed64(){const t=this.dataView.getUint32(this.pos,!0)+this.dataView.getInt32(this.pos+4,!0)*Wp;return this.pos+=8,t}readFloat(){const t=this.dataView.getFloat32(this.pos,!0);return this.pos+=4,t}readDouble(){const t=this.dataView.getFloat64(this.pos,!0);return this.pos+=8,t}readVarint(t){const s=this.buf;let A,p;return p=s[this.pos++],A=127&p,p<128?A:(p=s[this.pos++],A|=(127&p)<<7,p<128?A:(p=s[this.pos++],A|=(127&p)<<14,p<128?A:(p=s[this.pos++],A|=(127&p)<<21,p<128?A:(p=s[this.pos],A|=(15&p)<<28,(function(v,_,B){const F=B.buf;let U,Q;if(Q=F[B.pos++],U=(112&Q)>>4,Q<128||(Q=F[B.pos++],U|=(127&Q)<<3,Q<128)||(Q=F[B.pos++],U|=(127&Q)<<10,Q<128)||(Q=F[B.pos++],U|=(127&Q)<<17,Q<128)||(Q=F[B.pos++],U|=(127&Q)<<24,Q<128)||(Q=F[B.pos++],U|=(1&Q)<<31,Q<128))return Xh(v,U,_);throw new Error("Expected varint not more than 10 bytes")})(A,t,this)))))}readVarint64(){return this.readVarint(!0)}readSVarint(){const t=this.readVarint();return t%2==1?(t+1)/-2:t/2}readBoolean(){return!!this.readVarint()}readString(){const t=this.readVarint()+this.pos,s=this.pos;return this.pos=t,t-s>=12&&xg?xg.decode(this.buf.subarray(s,t)):(function(A,p,v){let _="",B=p;for(;B<v;){const F=A[B];let U,Q,K,X=null,J=F>239?4:F>223?3:F>191?2:1;if(B+J>v)break;J===1?F<128&&(X=F):J===2?(U=A[B+1],(192&U)==128&&(X=(31&F)<<6|63&U,X<=127&&(X=null))):J===3?(U=A[B+1],Q=A[B+2],(192&U)==128&&(192&Q)==128&&(X=(15&F)<<12|(63&U)<<6|63&Q,(X<=2047||X>=55296&&X<=57343)&&(X=null))):J===4&&(U=A[B+1],Q=A[B+2],K=A[B+3],(192&U)==128&&(192&Q)==128&&(192&K)==128&&(X=(15&F)<<18|(63&U)<<12|(63&Q)<<6|63&K,(X<=65535||X>=1114112)&&(X=null))),X===null?(X=65533,J=1):X>65535&&(X-=65536,_+=String.fromCharCode(X>>>10&1023|55296),X=56320|1023&X),_+=String.fromCharCode(X),B+=J}return _})(this.buf,s,t)}readBytes(){const t=this.readVarint()+this.pos,s=this.buf.subarray(this.pos,t);return this.pos=t,s}readPackedVarint(t=[],s){const A=this.readPackedEnd();for(;this.pos<A;)t.push(this.readVarint(s));return t}readPackedSVarint(t=[]){const s=this.readPackedEnd();for(;this.pos<s;)t.push(this.readSVarint());return t}readPackedBoolean(t=[]){const s=this.readPackedEnd();for(;this.pos<s;)t.push(this.readBoolean());return t}readPackedFloat(t=[]){const s=this.readPackedEnd();for(;this.pos<s;)t.push(this.readFloat());return t}readPackedDouble(t=[]){const s=this.readPackedEnd();for(;this.pos<s;)t.push(this.readDouble());return t}readPackedFixed32(t=[]){const s=this.readPackedEnd();for(;this.pos<s;)t.push(this.readFixed32());return t}readPackedSFixed32(t=[]){const s=this.readPackedEnd();for(;this.pos<s;)t.push(this.readSFixed32());return t}readPackedFixed64(t=[]){const s=this.readPackedEnd();for(;this.pos<s;)t.push(this.readFixed64());return t}readPackedSFixed64(t=[]){const s=this.readPackedEnd();for(;this.pos<s;)t.push(this.readSFixed64());return t}readPackedEnd(){return this.type===2?this.readVarint()+this.pos:this.pos+1}skip(t){const s=7&t;if(s===0)for(;this.buf[this.pos++]>127;);else if(s===2)this.pos=this.readVarint()+this.pos;else if(s===5)this.pos+=4;else{if(s!==1)throw new Error(`Unimplemented type: ${s}`);this.pos+=8}}writeTag(t,s){this.writeVarint(t<<3|s)}realloc(t){let s=this.length||16;for(;s<this.pos+t;)s*=2;if(s!==this.length){const A=new Uint8Array(s);A.set(this.buf),this.buf=A,this.dataView=new DataView(A.buffer),this.length=s}}finish(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)}writeFixed32(t){this.realloc(4),this.dataView.setInt32(this.pos,t,!0),this.pos+=4}writeSFixed32(t){this.realloc(4),this.dataView.setInt32(this.pos,t,!0),this.pos+=4}writeFixed64(t){this.realloc(8),this.dataView.setInt32(this.pos,-1&t,!0),this.dataView.setInt32(this.pos+4,Math.floor(t*Od),!0),this.pos+=8}writeSFixed64(t){this.realloc(8),this.dataView.setInt32(this.pos,-1&t,!0),this.dataView.setInt32(this.pos+4,Math.floor(t*Od),!0),this.pos+=8}writeVarint(t){(t=+t||0)>268435455||t<0?(function(s,A){let p,v;if(s>=0?(p=s%4294967296|0,v=s/4294967296|0):(p=~(-s%4294967296),v=~(-s/4294967296),4294967295^p?p=p+1|0:(p=0,v=v+1|0)),s>=18446744073709552e3||s<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");A.realloc(10),(function(_,B,F){F.buf[F.pos++]=127&_|128,_>>>=7,F.buf[F.pos++]=127&_|128,_>>>=7,F.buf[F.pos++]=127&_|128,_>>>=7,F.buf[F.pos++]=127&_|128,F.buf[F.pos]=127&(_>>>=7)})(p,0,A),(function(_,B){const F=(7&_)<<4;B.buf[B.pos++]|=F|((_>>>=3)?128:0),_&&(B.buf[B.pos++]=127&_|((_>>>=7)?128:0),_&&(B.buf[B.pos++]=127&_|((_>>>=7)?128:0),_&&(B.buf[B.pos++]=127&_|((_>>>=7)?128:0),_&&(B.buf[B.pos++]=127&_|((_>>>=7)?128:0),_&&(B.buf[B.pos++]=127&_)))))})(v,A)})(t,this):(this.realloc(4),this.buf[this.pos++]=127&t|(t>127?128:0),t<=127||(this.buf[this.pos++]=127&(t>>>=7)|(t>127?128:0),t<=127||(this.buf[this.pos++]=127&(t>>>=7)|(t>127?128:0),t<=127||(this.buf[this.pos++]=t>>>7&127))))}writeSVarint(t){this.writeVarint(t<0?2*-t-1:2*t)}writeBoolean(t){this.writeVarint(+t)}writeString(t){t=String(t),this.realloc(4*t.length),this.pos++;const s=this.pos;this.pos=(function(p,v,_){for(let B,F,U=0;U<v.length;U++){if(B=v.charCodeAt(U),B>55295&&B<57344){if(!F){B>56319||U+1===v.length?(p[_++]=239,p[_++]=191,p[_++]=189):F=B;continue}if(B<56320){p[_++]=239,p[_++]=191,p[_++]=189,F=B;continue}B=F-55296<<10|B-56320|65536,F=null}else F&&(p[_++]=239,p[_++]=191,p[_++]=189,F=null);B<128?p[_++]=B:(B<2048?p[_++]=B>>6|192:(B<65536?p[_++]=B>>12|224:(p[_++]=B>>18|240,p[_++]=B>>12&63|128),p[_++]=B>>6&63|128),p[_++]=63&B|128)}return _})(this.buf,t,this.pos);const A=this.pos-s;A>=128&&zd(s,A,this),this.pos=s-1,this.writeVarint(A),this.pos+=A}writeFloat(t){this.realloc(4),this.dataView.setFloat32(this.pos,t,!0),this.pos+=4}writeDouble(t){this.realloc(8),this.dataView.setFloat64(this.pos,t,!0),this.pos+=8}writeBytes(t){const s=t.length;this.writeVarint(s),this.realloc(s);for(let A=0;A<s;A++)this.buf[this.pos++]=t[A]}writeRawMessage(t,s){this.pos++;const A=this.pos;t(s,this);const p=this.pos-A;p>=128&&zd(A,p,this),this.pos=A-1,this.writeVarint(p),this.pos+=p}writeMessage(t,s,A){this.writeTag(t,2),this.writeRawMessage(s,A)}writePackedVarint(t,s){s.length&&this.writeMessage(t,h,s)}writePackedSVarint(t,s){s.length&&this.writeMessage(t,g,s)}writePackedBoolean(t,s){s.length&&this.writeMessage(t,G,s)}writePackedFloat(t,s){s.length&&this.writeMessage(t,C,s)}writePackedDouble(t,s){s.length&&this.writeMessage(t,k,s)}writePackedFixed32(t,s){s.length&&this.writeMessage(t,Y,s)}writePackedSFixed32(t,s){s.length&&this.writeMessage(t,xe,s)}writePackedFixed64(t,s){s.length&&this.writeMessage(t,ht,s)}writePackedSFixed64(t,s){s.length&&this.writeMessage(t,xt,s)}writeBytesField(t,s){this.writeTag(t,2),this.writeBytes(s)}writeFixed32Field(t,s){this.writeTag(t,5),this.writeFixed32(s)}writeSFixed32Field(t,s){this.writeTag(t,5),this.writeSFixed32(s)}writeFixed64Field(t,s){this.writeTag(t,1),this.writeFixed64(s)}writeSFixed64Field(t,s){this.writeTag(t,1),this.writeSFixed64(s)}writeVarintField(t,s){this.writeTag(t,0),this.writeVarint(s)}writeSVarintField(t,s){this.writeTag(t,0),this.writeSVarint(s)}writeStringField(t,s){this.writeTag(t,2),this.writeString(s)}writeFloatField(t,s){this.writeTag(t,5),this.writeFloat(s)}writeDoubleField(t,s){this.writeTag(t,1),this.writeDouble(s)}writeBooleanField(t,s){this.writeVarintField(t,+s)}}function Xh(l,t,s){return s?4294967296*t+(l>>>0):4294967296*(t>>>0)+(l>>>0)}function zd(l,t,s){const A=t<=16383?1:t<=2097151?2:t<=268435455?3:Math.floor(Math.log(t)/(7*Math.LN2));s.realloc(A);for(let p=s.pos-1;p>=l;p--)s.buf[p+A]=s.buf[p]}function h(l,t){for(let s=0;s<l.length;s++)t.writeVarint(l[s])}function g(l,t){for(let s=0;s<l.length;s++)t.writeSVarint(l[s])}function C(l,t){for(let s=0;s<l.length;s++)t.writeFloat(l[s])}function k(l,t){for(let s=0;s<l.length;s++)t.writeDouble(l[s])}function G(l,t){for(let s=0;s<l.length;s++)t.writeBoolean(l[s])}function Y(l,t){for(let s=0;s<l.length;s++)t.writeFixed32(l[s])}function xe(l,t){for(let s=0;s<l.length;s++)t.writeSFixed32(l[s])}function ht(l,t){for(let s=0;s<l.length;s++)t.writeFixed64(l[s])}function xt(l,t){for(let s=0;s<l.length;s++)t.writeSFixed64(l[s])}function jt(l,t,s){l===1&&s.readMessage(dr,t)}function dr(l,t,s){if(l===3){const{id:A,bitmap:p,width:v,height:_,left:B,top:F,advance:U}=s.readMessage(vr,{});t.push({id:A,bitmap:new mu({width:v+6,height:_+6},p),metrics:{width:v,height:_,left:B,top:F,advance:U}})}}function vr(l,t,s){l===1?t.id=s.readVarint():l===2?t.bitmap=s.readBytes():l===3?t.width=s.readVarint():l===4?t.height=s.readVarint():l===5?t.left=s.readSVarint():l===6?t.top=s.readSVarint():l===7&&(t.advance=s.readVarint())}function hr(l){let t=0,s=0;for(const _ of l)t+=_.w*_.h,s=Math.max(s,_.w);l.sort(((_,B)=>B.h-_.h));const A=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(t/.95)),s),h:1/0}];let p=0,v=0;for(const _ of l)for(let B=A.length-1;B>=0;B--){const F=A[B];if(!(_.w>F.w||_.h>F.h)){if(_.x=F.x,_.y=F.y,v=Math.max(v,_.y+_.h),p=Math.max(p,_.x+_.w),_.w===F.w&&_.h===F.h){const U=A.pop();U&&B<A.length&&(A[B]=U)}else _.h===F.h?(F.x+=_.w,F.w-=_.w):_.w===F.w?(F.y+=_.h,F.h-=_.h):(A.push({x:F.x+_.w,y:F.y,w:F.w-_.w,h:_.h}),F.y+=_.h,F.h-=_.h);break}}return{w:p,h:v,fill:t/(p*v)||0}}class Or{constructor(t,{pixelRatio:s,version:A,stretchX:p,stretchY:v,content:_,textFitWidth:B,textFitHeight:F}){this.paddedRect=t,this.pixelRatio=s,this.stretchX=p,this.stretchY=v,this.content=_,this.version=A,this.textFitWidth=B,this.textFitHeight=F}get tl(){return[this.paddedRect.x+1,this.paddedRect.y+1]}get br(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]}get tlbr(){return this.tl.concat(this.br)}get displaySize(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]}}class en{constructor(t,s){const A={},p={};this.haveRenderCallbacks=[];const v=[];this.addImages(t,A,v),this.addImages(s,p,v);const{w:_,h:B}=hr(v),F=new Jo({width:_||1,height:B||1});for(const U in t){const Q=t[U],K=A[U].paddedRect;Jo.copy(Q.data,F,{x:0,y:0},{x:K.x+1,y:K.y+1},Q.data)}for(const U in s){const Q=s[U],K=p[U].paddedRect,X=K.x+1,J=K.y+1,oe=Q.data.width,le=Q.data.height;Jo.copy(Q.data,F,{x:0,y:0},{x:X,y:J},Q.data),Jo.copy(Q.data,F,{x:0,y:le-1},{x:X,y:J-1},{width:oe,height:1}),Jo.copy(Q.data,F,{x:0,y:0},{x:X,y:J+le},{width:oe,height:1}),Jo.copy(Q.data,F,{x:oe-1,y:0},{x:X-1,y:J},{width:1,height:le}),Jo.copy(Q.data,F,{x:0,y:0},{x:X+oe,y:J},{width:1,height:le})}this.image=F,this.iconPositions=A,this.patternPositions=p}addImages(t,s,A){for(const p in t){const v=t[p],_={x:0,y:0,w:v.data.width+2,h:v.data.height+2};A.push(_),s[p]=new Or(_,v),v.hasRenderCallback&&this.haveRenderCallbacks.push(p)}}patchUpdatedImages(t,s){t.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const A in t.updatedImages)this.patchUpdatedImage(this.iconPositions[A],t.getImage(A),s),this.patchUpdatedImage(this.patternPositions[A],t.getImage(A),s)}patchUpdatedImage(t,s,A){if(!t||!s||t.version===s.version)return;t.version=s.version;const[p,v]=t.tl;A.update(s.data,void 0,{x:p,y:v})}}var qr;function Ps(l,t,s,A,p,v,_,B,F,U,Q,K,X,J,oe){const le=Fh.fromFeature(l,p);let he;K===m.aA.vertical&&le.verticalizePunctuation();let be=le.determineLineBreaks(U,v,t,A,J);const{processBidirectionalText:rt,processStyledBidirectionalText:Fe}=pi;if(rt&&le.sections.length===1){he=[],be=be.map((Mt=>le.toCodeUnitIndex(Mt)));const dt=rt(le.toString(),be);for(const Mt of dt){const Xt=[...Mt].map((()=>0));he.push(new Fh(Mt,le.sections,Xt))}}else if(Fe){he=[],be=be.map((Vt=>le.toCodeUnitIndex(Vt)));let dt=0;const Mt=[];for(const Vt of le.text)Mt.push(...Array(Vt.length).fill(le.sectionIndex[dt])),dt++;const Xt=Fe(le.text,Mt,be);for(const Vt of Xt){const ir=[];let wr="";for(const ar of Vt[0])ir.push(Vt[1][wr.length]),wr+=ar;he.push(new Fh(Vt[0],le.sections,ir))}}else he=(function(dt,Mt){const Xt=[];let Vt=0;for(const ir of Mt)Xt.push(dt.substring(Vt,ir)),Vt=ir;return Vt<dt.length()&&Xt.push(dt.substring(Vt,dt.length())),Xt})(le,be);const Ue=[],at={positionedLines:Ue,text:le.toString(),top:Q[1],bottom:Q[1],left:Q[0],right:Q[0],writingMode:K,iconsInText:!1,verticalizable:!1};return(function(dt,Mt,Xt,Vt,ir,wr,ar,$t,Ot,Lr,Ir,Ur){let Sr=0,Jr=0,ri=0,Gn=0;const ps=$t==="right"?1:$t==="left"?0:.5,Ja=Hs/Ur;let wo=0;for(const Bi of ir){Bi.trim();const js=Bi.getMaxScale(),io={positionedGlyphs:[],lineOffset:0};dt.positionedLines[wo]=io;const ts=io.positionedGlyphs;let wc=0;if(!Bi.length()){Jr+=wr,++wo;continue}const el=Et(Vt,Bi,Ja);let xc=0;for(const ia of Bi.text){const Ls=Bi.getSection(xc),xo=ia.codePointAt(0),Vs=Cr(Ot,Ir,xo),sa={glyph:xo,imageName:null,x:Sr,y:Jr+-17,vertical:Vs,scale:1,fontStack:"",sectionIndex:Bi.getSectionIndex(xc),metrics:null,rect:null};let Th;if("fontStack"in Ls){if(Th=ln(Ls,xo,Vs,el,Mt,Xt),!Th)continue;sa.fontStack=Ls.fontStack}else{if(dt.iconsInText=!0,Ls.scale*=Ja,Th=_n(Ls,Vs,js,el,Vt),!Th)continue;wc=Math.max(wc,Th.imageOffset),sa.imageName=Ls.imageName}const{rect:wu,metrics:nm,baselineOffset:td}=Th;sa.y+=td,sa.scale=Ls.scale,sa.metrics=nm,sa.rect=wu,ts.push(sa),Vs?(dt.verticalizable=!0,Sr+=("imageName"in Ls?nm.advance:Hs)*Ls.scale+Lr):Sr+=nm.advance*Ls.scale+Lr,xc++}ts.length!==0&&(ri=Math.max(Sr-Lr,ri),wn(ts,0,ts.length-1,ps)),Sr=0,io.lineOffset=Math.max(wc,(js-1)*Hs);const YA=wr*js+wc;Jr+=YA,Gn=Math.max(YA,Gn),++wo}const{horizontalAlign:ms,verticalAlign:As}=Nt(ar);(function(Bi,js,io,ts,wc,el,xc,YA,ia){const Ls=(js-io)*wc;let xo=0;xo=el!==xc?-YA*ts- -17:-ts*ia*xc+.5*xc;for(const Vs of Bi)for(const sa of Vs.positionedGlyphs)sa.x+=Ls,sa.y+=xo})(dt.positionedLines,ps,ms,As,ri,Gn,wr,Jr,ir.length),dt.top+=-As*Jr,dt.bottom=dt.top+Jr,dt.left+=-ms*ri,dt.right=dt.left+ri})(at,t,s,A,he,_,B,F,K,U,X,oe),!(function(dt){for(const Mt of dt)if(Mt.positionedGlyphs.length!==0)return!1;return!0})(Ue)&&at}function Nt(l){let t=.5,s=.5;switch(l){case"right":case"top-right":case"bottom-right":t=1;break;case"left":case"top-left":case"bottom-left":t=0}switch(l){case"bottom":case"bottom-right":case"bottom-left":s=1;break;case"top":case"top-right":case"top-left":s=0}return{horizontalAlign:t,verticalAlign:s}}function Et(l,t,s){const A=t.getMaxScale()*Hs,{maxImageWidth:p,maxImageHeight:v}=t.getMaxImageSize(l),_=Math.max(A,v*s);return{verticalLineContentWidth:Math.max(A,p*s),horizontalLineContentHeight:_}}function zt(l){switch(l){case"top":return 0;case"center":return .5;default:return 1}}function Cr(l,t,s){return!(l===m.aA.horizontal||!t&&!Wt(s)||t&&(tr(s)||(A=s,new RegExp("\\p{sc=Arab}","u").test(String.fromCodePoint(A)))));var A}function ln(l,t,s,A,p,v){const _=v[l.fontStack],B=(function(U,Q,K,X){if(U&&U.rect)return U;const J=Q[K.fontStack],oe=J&&J[X];return oe?{rect:null,metrics:oe.metrics}:null})(_&&_[t],p,l,t);if(B===null)return null;let F;if(s)F=A.verticalLineContentWidth-l.scale*Hs;else{const U=zt(l.verticalAlign);F=(A.horizontalLineContentHeight-l.scale*Hs)*U}return{rect:B.rect,metrics:B.metrics,baselineOffset:F}}function _n(l,t,s,A,p){const v=p[l.imageName];if(!v)return null;const _=v.paddedRect,B=v.displaySize,F={width:B[0],height:B[1],left:1,top:-3,advance:t?B[1]:B[0]};let U;if(t)U=A.verticalLineContentWidth-B[1]*l.scale;else{const Q=zt(l.verticalAlign);U=(A.horizontalLineContentHeight-B[1]*l.scale)*Q}return{rect:_,metrics:F,baselineOffset:U,imageOffset:(t?B[0]:B[1])*l.scale-Hs*s}}function wn(l,t,s,A){if(A===0)return;const p=l[s],v=(l[s].x+p.metrics.advance*p.scale)*A;for(let _=t;_<=s;_++)l[_].x-=v}function Ln(l,t,s){const{horizontalAlign:A,verticalAlign:p}=Nt(s),v=t[0]-l.displaySize[0]*A,_=t[1]-l.displaySize[1]*p;return{image:l,top:_,bottom:_+l.displaySize[1],left:v,right:v+l.displaySize[0]}}function Po(l){var t,s;let A=l.left,p=l.top,v=l.right-A,_=l.bottom-p;const B=(t=l.image.textFitWidth)!==null&&t!==void 0?t:"stretchOrShrink",F=(s=l.image.textFitHeight)!==null&&s!==void 0?s:"stretchOrShrink",U=(l.image.content[2]-l.image.content[0])/(l.image.content[3]-l.image.content[1]);if(F==="proportional"){if(B==="stretchOnly"&&v/_<U||B==="proportional"){const Q=Math.ceil(_*U);A*=Q/v,v=Q}}else if(B==="proportional"&&F==="stretchOnly"&&U!==0&&v/_>U){const Q=Math.ceil(v/U);p*=Q/_,_=Q}return{x1:A,y1:p,x2:A+v,y2:p+_}}function vi(l,t,s,A,p,v){const _=l.image;let B;if(_.content){const he=_.content,be=_.pixelRatio||1;B=[he[0]/be,he[1]/be,_.displaySize[0]-he[2]/be,_.displaySize[1]-he[3]/be]}const F=t.left*v,U=t.right*v;let Q,K,X,J;s==="width"||s==="both"?(J=p[0]+F-A[3],K=p[0]+U+A[1]):(J=p[0]+(F+U-_.displaySize[0])/2,K=J+_.displaySize[0]);const oe=t.top*v,le=t.bottom*v;return s==="height"||s==="both"?(Q=p[1]+oe-A[0],X=p[1]+le+A[2]):(Q=p[1]+(oe+le-_.displaySize[1])/2,X=Q+_.displaySize[1]),{image:_,top:Q,right:K,bottom:X,left:J,collisionPadding:B}}$e("ImagePosition",Or),$e("ImageAtlas",en),m.aA=void 0,(qr=m.aA||(m.aA={}))[qr.none=0]="none",qr[qr.horizontal=1]="horizontal",qr[qr.vertical=2]="vertical",qr[qr.horizontalOnly=3]="horizontalOnly";const Za=128,$u=32640;function fx(l,t){const{expression:s}=t;if(s.kind==="constant")return{kind:"constant",layoutSize:s.evaluate(new Mr(l+1))};if(s.kind==="source")return{kind:"source"};{const{zoomStops:A,interpolationType:p}=s;let v=0;for(;v<A.length&&A[v]<=l;)v++;v=Math.max(0,v-1);let _=v;for(;_<A.length&&A[_]<l+1;)_++;_=Math.min(A.length-1,_);const B=A[v],F=A[_];return s.kind==="composite"?{kind:"composite",minZoom:B,maxZoom:F,interpolationType:p}:{kind:"camera",minZoom:B,maxZoom:F,minSize:s.evaluate(new Mr(B)),maxSize:s.evaluate(new Mr(F)),interpolationType:p}}}function cv(l,t,s){let A="never";const p=l.get(t);return p?A=p:l.get(s)&&(A="always"),A}const zT=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function bg(l,t,s,A,p,v,_,B,F,U,Q,K,X){const J=B?Math.min($u,Math.round(B[0])):0,oe=B?Math.min($u,Math.round(B[1])):0;l.emplaceBack(t,s,Math.round(32*A),Math.round(32*p),v,_,(J<<1)+(F?1:0),oe,16*U,16*Q,256*K,256*X)}function Av(l,t,s){l.emplaceBack(t.x,t.y,s),l.emplaceBack(t.x,t.y,s),l.emplaceBack(t.x,t.y,s),l.emplaceBack(t.x,t.y,s)}function HT(l){for(const t of l.sections)if(Fr(t.text))return!0;return!1}class uv{constructor(t){this.layoutVertexArray=new Ze,this.indexArray=new Dt,this.programConfigurations=t,this.segments=new nr,this.dynamicLayoutVertexArray=new At,this.opacityVertexArray=new ft,this.hasVisibleVertices=!1,this.placedSymbolArray=new f}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0}upload(t,s,A,p){this.isEmpty()||(A&&(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,ov.members),this.indexBuffer=t.createIndexBuffer(this.indexArray,s),this.dynamicLayoutVertexBuffer=t.createVertexBuffer(this.dynamicLayoutVertexArray,Gp.members,!0),this.opacityVertexBuffer=t.createVertexBuffer(this.opacityVertexArray,zT,!0),this.opacityVertexBuffer.itemSize=1),(A||p)&&this.programConfigurations.upload(t))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}$e("SymbolBuffers",uv);class hv{constructor(t,s,A){this.layoutVertexArray=new t,this.layoutAttributes=s,this.indexArray=new A,this.segments=new nr,this.collisionVertexArray=new wt}upload(t){this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=t.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=t.createVertexBuffer(this.collisionVertexArray,av.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())}}$e("CollisionBuffers",hv);class If{constructor(t){this.collisionBoxArray=t.collisionBoxArray,this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map((_=>_.id)),this.index=t.index,this.pixelRatio=t.pixelRatio,this.sourceLayerIndex=t.sourceLayerIndex,this.hasDependencies=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[];const s=this.layers[0]._unevaluatedLayout._values;this.textSizeData=fx(this.zoom,s["text-size"]),this.iconSizeData=fx(this.zoom,s["icon-size"]);const A=this.layers[0].layout,p=A.get("symbol-sort-key"),v=A.get("symbol-z-order");this.canOverlap=cv(A,"text-overlap","text-allow-overlap")!=="never"||cv(A,"icon-overlap","icon-allow-overlap")!=="never"||A.get("text-ignore-placement")||A.get("icon-ignore-placement"),this.sortFeaturesByKey=v!=="viewport-y"&&!p.isConstant(),this.sortFeaturesByY=(v==="viewport-y"||v==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,A.get("symbol-placement")==="point"&&(this.writingModes=A.get("text-writing-mode").map((_=>m.aA[_]))),this.stateDependentLayerIds=this.layers.filter((_=>_.isStateDependent())).map((_=>_.id)),this.sourceID=t.sourceID}createArrays(){this.text=new uv(new cs(this.layers,this.zoom,(t=>/^text/.test(t)))),this.icon=new uv(new cs(this.layers,this.zoom,(t=>/^icon/.test(t)))),this.glyphOffsetArray=new S,this.lineVertexArray=new M,this.symbolInstances=new b,this.textAnchorOffsets=new j}calculateGlyphDependencies(t,s,A,p,v){for(const _ of t)if(s[_.codePointAt(0)]=!0,(A||p)&&v){const B=Zh[_];B&&(s[B.codePointAt(0)]=!0)}}populate(t,s,A){const p=this.layers[0],v=p.layout,_=v.get("text-font"),B=v.get("text-field"),F=v.get("icon-image"),U=(B.value.kind!=="constant"||B.value.value instanceof vs&&!B.value.value.isEmpty()||B.value.value.toString().length>0)&&(_.value.kind!=="constant"||_.value.value.length>0),Q=F.value.kind!=="constant"||!!F.value.value||Object.keys(F.parameters).length>0,K=v.get("symbol-sort-key");if(this.features=[],!U&&!Q)return;const X=s.iconDependencies,J=s.glyphDependencies,oe=s.availableImages,le=new Mr(this.zoom);for(const{feature:he,id:be,index:rt,sourceLayerIndex:Fe}of t){const Ue=p._featureFilter.needGeometry,at=qA(he,Ue);if(!p._featureFilter.filter(le,at,A))continue;let dt,Mt;if(Ue||(at.geometry=KA(he)),U){const Vt=p.getValueAndResolveTokens("text-field",at,A,oe),ir=vs.factory(Vt),wr=this.hasRTLText=this.hasRTLText||HT(ir);(!wr||pi.getRTLTextPluginStatus()==="unavailable"||wr&&pi.isParsed())&&(dt=Cf(ir,p,at))}if(Q){const Vt=p.getValueAndResolveTokens("icon-image",at,A,oe);Mt=Vt instanceof uo?Vt:uo.fromString(Vt)}if(!dt&&!Mt)continue;const Xt=this.sortFeaturesByKey?K.evaluate(at,{},A):void 0;if(this.features.push({id:be,text:dt,icon:Mt,index:rt,sourceLayerIndex:Fe,geometry:at.geometry,properties:he.properties,type:wh.types[he.type],sortKey:Xt}),Mt&&(X[Mt.name]=!0),dt){const Vt=_.evaluate(at,{},A).join(","),ir=v.get("text-rotation-alignment")!=="viewport"&&v.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(m.aA.vertical)>=0;for(const wr of dt.sections)if(wr.image)X[wr.image.name]=!0;else{const ar=er(dt.toString()),$t=wr.fontStack||Vt,Ot=J[$t]=J[$t]||{};this.calculateGlyphDependencies(wr.text,Ot,ir,this.allowVerticalPlacement,ar)}}}v.get("symbol-placement")==="line"&&(this.features=(function(he){const be={},rt={},Fe=[];let Ue=0;function at(Vt){Fe.push(he[Vt]),Ue++}function dt(Vt,ir,wr){const ar=rt[Vt];return delete rt[Vt],rt[ir]=ar,Fe[ar].geometry[0].pop(),Fe[ar].geometry[0]=Fe[ar].geometry[0].concat(wr[0]),ar}function Mt(Vt,ir,wr){const ar=be[ir];return delete be[ir],be[Vt]=ar,Fe[ar].geometry[0].shift(),Fe[ar].geometry[0]=wr[0].concat(Fe[ar].geometry[0]),ar}function Xt(Vt,ir,wr){const ar=wr?ir[0][ir[0].length-1]:ir[0][0];return`${Vt}:${ar.x}:${ar.y}`}for(let Vt=0;Vt<he.length;Vt++){const ir=he[Vt],wr=ir.geometry,ar=ir.text?ir.text.toString():null;if(!ar){at(Vt);continue}const $t=Xt(ar,wr),Ot=Xt(ar,wr,!0);if($t in rt&&Ot in be&&rt[$t]!==be[Ot]){const Lr=Mt($t,Ot,wr),Ir=dt($t,Ot,Fe[Lr].geometry);delete be[$t],delete rt[Ot],rt[Xt(ar,Fe[Ir].geometry,!0)]=Ir,Fe[Lr].geometry=null}else $t in rt?dt($t,Ot,wr):Ot in be?Mt($t,Ot,wr):(at(Vt),be[$t]=Ue-1,rt[Ot]=Ue-1)}return Fe.filter((Vt=>Vt.geometry))})(this.features)),this.sortFeaturesByKey&&this.features.sort(((he,be)=>he.sortKey-be.sortKey))}update(t,s,A){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(t,s,this.layers,{imagePositions:A}),this.icon.programConfigurations.updatePaintArrays(t,s,this.layers,{imagePositions:A}))}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(t){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(t),this.iconCollisionBox.upload(t)),this.text.upload(t,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(t,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(t,s){const A=this.lineVertexArray.length;if(t.segment!==void 0){let p=t.dist(s[t.segment+1]),v=t.dist(s[t.segment]);const _={};for(let B=t.segment+1;B<s.length;B++)_[B]={x:s[B].x,y:s[B].y,tileUnitDistanceFromAnchor:p},B<s.length-1&&(p+=s[B+1].dist(s[B]));for(let B=t.segment||0;B>=0;B--)_[B]={x:s[B].x,y:s[B].y,tileUnitDistanceFromAnchor:v},B>0&&(v+=s[B-1].dist(s[B]));for(let B=0;B<s.length;B++){const F=_[B];this.lineVertexArray.emplaceBack(F.x,F.y,F.tileUnitDistanceFromAnchor)}}return{lineStartIndex:A,lineLength:this.lineVertexArray.length-A}}addSymbols(t,s,A,p,v,_,B,F,U,Q,K,X){const J=t.indexArray,oe=t.layoutVertexArray,le=t.segments.prepareSegment(4*s.length,oe,J,this.canOverlap?_.sortKey:void 0),he=this.glyphOffsetArray.length,be=le.vertexLength,rt=this.allowVerticalPlacement&&B===m.aA.vertical?Math.PI/2:0,Fe=_.text&&_.text.sections;for(let Ue=0;Ue<s.length;Ue++){const{tl:at,tr:dt,bl:Mt,br:Xt,tex:Vt,pixelOffsetTL:ir,pixelOffsetBR:wr,minFontScaleX:ar,minFontScaleY:$t,glyphOffset:Ot,isSDF:Lr,sectionIndex:Ir}=s[Ue],Ur=le.vertexLength,Sr=Ot[1];bg(oe,F.x,F.y,at.x,Sr+at.y,Vt.x,Vt.y,A,Lr,ir.x,ir.y,ar,$t),bg(oe,F.x,F.y,dt.x,Sr+dt.y,Vt.x+Vt.w,Vt.y,A,Lr,wr.x,ir.y,ar,$t),bg(oe,F.x,F.y,Mt.x,Sr+Mt.y,Vt.x,Vt.y+Vt.h,A,Lr,ir.x,wr.y,ar,$t),bg(oe,F.x,F.y,Xt.x,Sr+Xt.y,Vt.x+Vt.w,Vt.y+Vt.h,A,Lr,wr.x,wr.y,ar,$t),Av(t.dynamicLayoutVertexArray,F,rt),J.emplaceBack(Ur,Ur+2,Ur+1),J.emplaceBack(Ur+1,Ur+2,Ur+3),le.vertexLength+=4,le.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(Ot[0]),Ue!==s.length-1&&Ir===s[Ue+1].sectionIndex||t.programConfigurations.populatePaintArrays(oe.length,_,_.index,{imagePositions:{},canonical:X,formattedSection:Fe&&Fe[Ir]})}t.placedSymbolArray.emplaceBack(F.x,F.y,he,this.glyphOffsetArray.length-he,be,U,Q,F.segment,A?A[0]:0,A?A[1]:0,p[0],p[1],B,0,!1,0,K)}_addCollisionDebugVertex(t,s,A,p,v,_){return s.emplaceBack(0,0),t.emplaceBack(A.x,A.y,p,v,Math.round(_.x),Math.round(_.y))}addCollisionDebugVertices(t,s,A,p,v,_,B){const F=v.segments.prepareSegment(4,v.layoutVertexArray,v.indexArray),U=F.vertexLength,Q=v.layoutVertexArray,K=v.collisionVertexArray,X=B.anchorX,J=B.anchorY;this._addCollisionDebugVertex(Q,K,_,X,J,new w(t,s)),this._addCollisionDebugVertex(Q,K,_,X,J,new w(A,s)),this._addCollisionDebugVertex(Q,K,_,X,J,new w(A,p)),this._addCollisionDebugVertex(Q,K,_,X,J,new w(t,p)),F.vertexLength+=4;const oe=v.indexArray;oe.emplaceBack(U,U+1),oe.emplaceBack(U+1,U+2),oe.emplaceBack(U+2,U+3),oe.emplaceBack(U+3,U),F.primitiveLength+=4}addDebugCollisionBoxes(t,s,A,p){for(let v=t;v<s;v++){const _=this.collisionBoxArray.get(v);this.addCollisionDebugVertices(_.x1,_.y1,_.x2,_.y2,p?this.textCollisionBox:this.iconCollisionBox,_.anchorPoint,A)}}generateCollisionDebugBuffers(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new hv(st,Kp.members,Lt),this.iconCollisionBox=new hv(st,Kp.members,Lt);for(let t=0;t<this.symbolInstances.length;t++){const s=this.symbolInstances.get(t);this.addDebugCollisionBoxes(s.textBoxStartIndex,s.textBoxEndIndex,s,!0),this.addDebugCollisionBoxes(s.verticalTextBoxStartIndex,s.verticalTextBoxEndIndex,s,!0),this.addDebugCollisionBoxes(s.iconBoxStartIndex,s.iconBoxEndIndex,s,!1),this.addDebugCollisionBoxes(s.verticalIconBoxStartIndex,s.verticalIconBoxEndIndex,s,!1)}}_deserializeCollisionBoxesForSymbol(t,s,A,p,v,_,B,F,U){const Q={};for(let K=s;K<A;K++){const X=t.get(K);Q.textBox={x1:X.x1,y1:X.y1,x2:X.x2,y2:X.y2,anchorPointX:X.anchorPointX,anchorPointY:X.anchorPointY},Q.textFeatureIndex=X.featureIndex;break}for(let K=p;K<v;K++){const X=t.get(K);Q.verticalTextBox={x1:X.x1,y1:X.y1,x2:X.x2,y2:X.y2,anchorPointX:X.anchorPointX,anchorPointY:X.anchorPointY},Q.verticalTextFeatureIndex=X.featureIndex;break}for(let K=_;K<B;K++){const X=t.get(K);Q.iconBox={x1:X.x1,y1:X.y1,x2:X.x2,y2:X.y2,anchorPointX:X.anchorPointX,anchorPointY:X.anchorPointY},Q.iconFeatureIndex=X.featureIndex;break}for(let K=F;K<U;K++){const X=t.get(K);Q.verticalIconBox={x1:X.x1,y1:X.y1,x2:X.x2,y2:X.y2,anchorPointX:X.anchorPointX,anchorPointY:X.anchorPointY},Q.verticalIconFeatureIndex=X.featureIndex;break}return Q}deserializeCollisionBoxes(t){this.collisionArrays=[];for(let s=0;s<this.symbolInstances.length;s++){const A=this.symbolInstances.get(s);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(t,A.textBoxStartIndex,A.textBoxEndIndex,A.verticalTextBoxStartIndex,A.verticalTextBoxEndIndex,A.iconBoxStartIndex,A.iconBoxEndIndex,A.verticalIconBoxStartIndex,A.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(t,s){const A=t.placedSymbolArray.get(s),p=A.vertexStartIndex+4*A.numGlyphs;for(let v=A.vertexStartIndex;v<p;v+=4)t.indexArray.emplaceBack(v,v+2,v+1),t.indexArray.emplaceBack(v+1,v+2,v+3)}getSortedSymbolIndexes(t){if(this.sortedAngle===t&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;const s=Math.sin(t),A=Math.cos(t),p=[],v=[],_=[];for(let B=0;B<this.symbolInstances.length;++B){_.push(B);const F=this.symbolInstances.get(B);p.push(0|Math.round(s*F.anchorX+A*F.anchorY)),v.push(F.featureIndex)}return _.sort(((B,F)=>p[B]-p[F]||v[F]-v[B])),_}addToSortKeyRanges(t,s){const A=this.sortKeyRanges[this.sortKeyRanges.length-1];A&&A.sortKey===s?A.symbolInstanceEnd=t+1:this.sortKeyRanges.push({sortKey:s,symbolInstanceStart:t,symbolInstanceEnd:t+1})}sortFeatures(t){if(this.sortFeaturesByY&&this.sortedAngle!==t&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(t),this.sortedAngle=t,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const s of this.symbolInstanceIndexes){const A=this.symbolInstances.get(s);this.featureSortOrder.push(A.featureIndex),[A.rightJustifiedTextSymbolIndex,A.centerJustifiedTextSymbolIndex,A.leftJustifiedTextSymbolIndex].forEach(((p,v,_)=>{p>=0&&_.indexOf(p)===v&&this.addIndicesForPlacedSymbol(this.text,p)})),A.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,A.verticalPlacedTextSymbolIndex),A.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,A.placedIconSymbolIndex),A.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,A.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}let px,mx;$e("SymbolBucket",If,{omit:["layers","collisionBoxArray","features","compareText"]}),If.MAX_GLYPHS=65535,If.addDynamicAttributes=Av;var dv={get paint(){return mx=mx||new ci({"icon-opacity":new br(mt.paint_symbol["icon-opacity"]),"icon-color":new br(mt.paint_symbol["icon-color"]),"icon-halo-color":new br(mt.paint_symbol["icon-halo-color"]),"icon-halo-width":new br(mt.paint_symbol["icon-halo-width"]),"icon-halo-blur":new br(mt.paint_symbol["icon-halo-blur"]),"icon-translate":new yr(mt.paint_symbol["icon-translate"]),"icon-translate-anchor":new yr(mt.paint_symbol["icon-translate-anchor"]),"text-opacity":new br(mt.paint_symbol["text-opacity"]),"text-color":new br(mt.paint_symbol["text-color"],{runtimeType:Di,getOverride:l=>l.textColor,hasOverride:l=>!!l.textColor}),"text-halo-color":new br(mt.paint_symbol["text-halo-color"]),"text-halo-width":new br(mt.paint_symbol["text-halo-width"]),"text-halo-blur":new br(mt.paint_symbol["text-halo-blur"]),"text-translate":new yr(mt.paint_symbol["text-translate"]),"text-translate-anchor":new yr(mt.paint_symbol["text-translate-anchor"])})},get layout(){return px=px||new ci({"symbol-placement":new yr(mt.layout_symbol["symbol-placement"]),"symbol-spacing":new yr(mt.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new yr(mt.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new br(mt.layout_symbol["symbol-sort-key"]),"symbol-z-order":new yr(mt.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new yr(mt.layout_symbol["icon-allow-overlap"]),"icon-overlap":new yr(mt.layout_symbol["icon-overlap"]),"icon-ignore-placement":new yr(mt.layout_symbol["icon-ignore-placement"]),"icon-optional":new yr(mt.layout_symbol["icon-optional"]),"icon-rotation-alignment":new yr(mt.layout_symbol["icon-rotation-alignment"]),"icon-size":new br(mt.layout_symbol["icon-size"]),"icon-text-fit":new yr(mt.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new yr(mt.layout_symbol["icon-text-fit-padding"]),"icon-image":new br(mt.layout_symbol["icon-image"]),"icon-rotate":new br(mt.layout_symbol["icon-rotate"]),"icon-padding":new br(mt.layout_symbol["icon-padding"]),"icon-keep-upright":new yr(mt.layout_symbol["icon-keep-upright"]),"icon-offset":new br(mt.layout_symbol["icon-offset"]),"icon-anchor":new br(mt.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new yr(mt.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new yr(mt.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new yr(mt.layout_symbol["text-rotation-alignment"]),"text-field":new br(mt.layout_symbol["text-field"]),"text-font":new br(mt.layout_symbol["text-font"]),"text-size":new br(mt.layout_symbol["text-size"]),"text-max-width":new br(mt.layout_symbol["text-max-width"]),"text-line-height":new yr(mt.layout_symbol["text-line-height"]),"text-letter-spacing":new br(mt.layout_symbol["text-letter-spacing"]),"text-justify":new br(mt.layout_symbol["text-justify"]),"text-radial-offset":new br(mt.layout_symbol["text-radial-offset"]),"text-variable-anchor":new yr(mt.layout_symbol["text-variable-anchor"]),"text-variable-anchor-offset":new br(mt.layout_symbol["text-variable-anchor-offset"]),"text-anchor":new br(mt.layout_symbol["text-anchor"]),"text-max-angle":new yr(mt.layout_symbol["text-max-angle"]),"text-writing-mode":new yr(mt.layout_symbol["text-writing-mode"]),"text-rotate":new br(mt.layout_symbol["text-rotate"]),"text-padding":new yr(mt.layout_symbol["text-padding"]),"text-keep-upright":new yr(mt.layout_symbol["text-keep-upright"]),"text-transform":new br(mt.layout_symbol["text-transform"]),"text-offset":new br(mt.layout_symbol["text-offset"]),"text-allow-overlap":new yr(mt.layout_symbol["text-allow-overlap"]),"text-overlap":new yr(mt.layout_symbol["text-overlap"]),"text-ignore-placement":new yr(mt.layout_symbol["text-ignore-placement"]),"text-optional":new yr(mt.layout_symbol["text-optional"])})}};class gx{constructor(t){if(t.property.overrides===void 0)throw new Error("overrides must be provided to instantiate FormatSectionOverride class");this.type=t.property.overrides?t.property.overrides.runtimeType:ns,this.defaultValue=t}evaluate(t){if(t.formattedSection){const s=this.defaultValue.property.overrides;if(s&&s.hasOverride(t.formattedSection))return s.getOverride(t.formattedSection)}return t.feature&&t.featureState?this.defaultValue.evaluate(t.feature,t.featureState):this.defaultValue.property.specification.default}eachChild(t){this.defaultValue.isConstant()||t(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}$e("FormatSectionOverride",gx,{omit:["defaultValue"]});class Bg extends Nn{constructor(t,s){super(t,dv,s)}recalculate(t,s){if(super.recalculate(t,s),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")==="map"?"map":"viewport"),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){const A=this.layout.get("text-writing-mode");if(A){const p=[];for(const v of A)p.indexOf(v)<0&&p.push(v);this.layout._values["text-writing-mode"]=p}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()}getValueAndResolveTokens(t,s,A,p){const v=this.layout.get(t).evaluate(s,{},A,p),_=this._unevaluatedLayout._values[t];return _.isDataDriven()||Ql(_.value)||!v?v:(function(B,F){return F.replace(/{([^{}]+)}/g,((U,Q)=>B&&Q in B?String(B[Q]):""))})(s.properties,v)}createBucket(t){return new If(t)}queryRadius(){return 0}queryIntersectsFeature(){throw new Error("Should take a different path in FeatureIndex")}_setPaintOverrides(){for(const t of dv.paint.overridableProperties){if(!Bg.hasPaintOverride(this.layout,t))continue;const s=this.paint.get(t),A=new gx(s),p=new uc(A,s.property.specification);let v=null;v=s.value.kind==="constant"||s.value.kind==="source"?new Oc("source",p):new NA("composite",p,s.value.zoomStops),this.paint._values[t]=new Fn(s.property,v,s.parameters)}}_handleOverridablePaintPropertyUpdate(t,s,A){return!(!this.layout||s.isDataDriven()||A.isDataDriven())&&Bg.hasPaintOverride(this.layout,t)}static hasPaintOverride(t,s){const A=t.get("text-field"),p=dv.paint.properties[s];let v=!1;const _=B=>{for(const F of B)if(p.overrides&&p.overrides.hasOverride(F))return void(v=!0)};if(A.value.kind==="constant"&&A.value.value instanceof vs)_(A.value.value.sections);else if(A.value.kind==="source"||A.value.kind==="composite"){const B=U=>{v||(U instanceof Zi&&ti(U.value)===al?_(U.value.sections):U instanceof pa?_(U.sections):U.eachChild(B))},F=A.value;F._styleExpression&&B(F._styleExpression.expression)}return v}}let yx;var jT={get paint(){return yx=yx||new ci({"background-color":new yr(mt.paint_background["background-color"]),"background-pattern":new ji(mt.paint_background["background-pattern"]),"background-opacity":new yr(mt.paint_background["background-opacity"])})}};class VT extends Nn{constructor(t,s){super(t,jT,s)}}class GT extends Nn{constructor(t,s){super(t,{},s),this.onAdd=A=>{this.implementation.onAdd&&this.implementation.onAdd(A,A.painter.context.gl)},this.onRemove=A=>{this.implementation.onRemove&&this.implementation.onRemove(A,A.painter.context.gl)},this.implementation=t}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){throw new Error("Custom layers cannot be serialized")}}class KT{constructor(t){this._methodToThrottle=t,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._methodToThrottle()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout((()=>{this._triggered=!1,this._methodToThrottle()}),0))}remove(){delete this._channel,this._methodToThrottle=()=>{}}}const qT={once:!0},fv=63710088e-1;class Yh{constructor(t,s){if(isNaN(t)||isNaN(s))throw new Error(`Invalid LngLat object: (${t}, ${s})`);if(this.lng=+t,this.lat=+s,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new Yh(et(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(t){const s=Math.PI/180,A=this.lat*s,p=t.lat*s,v=Math.sin(A)*Math.sin(p)+Math.cos(A)*Math.cos(p)*Math.cos((t.lng-this.lng)*s);return fv*Math.acos(Math.min(v,1))}static convert(t){if(t instanceof Yh)return t;if(Array.isArray(t)&&(t.length===2||t.length===3))return new Yh(Number(t[0]),Number(t[1]));if(!Array.isArray(t)&&typeof t=="object"&&t!==null)return new Yh(Number("lng"in t?t.lng:t.lon),Number(t.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}const vx=2*Math.PI*fv;function _x(l){return vx*Math.cos(l*Math.PI/180)}function wx(l){return(180+l)/360}function xx(l){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+l*Math.PI/360)))/360}function bx(l,t){return l/_x(t)}function Bx(l){return 360*l-180}function Cg(l){return 360/Math.PI*Math.atan(Math.exp((180-360*l)*Math.PI/180))-90}function Cx(l,t){return l*_x(Cg(t))}class Zp{constructor(t,s,A=0){this.x=+t,this.y=+s,this.z=+A}static fromLngLat(t,s=0){const A=Yh.convert(t);return new Zp(wx(A.lng),xx(A.lat),bx(s,A.lat))}toLngLat(){return new Yh(Bx(this.x),Cg(this.y))}toAltitude(){return Cx(this.z,this.y)}meterInMercatorCoordinateUnits(){return 1/vx*(t=Cg(this.y),1/Math.cos(t*Math.PI/180));var t}}function Ex(l,t,s){var A=2*Math.PI*6378137/256/Math.pow(2,s);return[l*A-2*Math.PI*6378137/2,t*A-2*Math.PI*6378137/2]}class pv{constructor(t,s,A){if(!(function(p,v,_){return!(p<0||p>25||_<0||_>=Math.pow(2,p)||v<0||v>=Math.pow(2,p))})(t,s,A))throw new Error(`x=${s}, y=${A}, z=${t} outside of bounds. 0<=x<${Math.pow(2,t)}, 0<=y<${Math.pow(2,t)} 0<=z<=25 `);this.z=t,this.x=s,this.y=A,this.key=Tf(0,t,t,s,A)}equals(t){return this.z===t.z&&this.x===t.x&&this.y===t.y}url(t,s,A){const p=(function(_,B,F){var U=Ex(256*_,256*(B=Math.pow(2,F)-B-1),F),Q=Ex(256*(_+1),256*(B+1),F);return U[0]+","+U[1]+","+Q[0]+","+Q[1]})(this.x,this.y,this.z),v=(function(_,B,F){let U,Q="";for(let K=_;K>0;K--)U=1<<K-1,Q+=(B&U?1:0)+(F&U?2:0);return Q})(this.z,this.x,this.y);return t[(this.x+this.y)%t.length].replace(/{prefix}/g,(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(A==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace(/{ratio}/g,s>1?"@2x":"").replace(/{quadkey}/g,v).replace(/{bbox-epsg-3857}/g,p)}isChildOf(t){const s=this.z-t.z;return s>0&&t.x===this.x>>s&&t.y===this.y>>s}getTilePoint(t){const s=Math.pow(2,this.z);return new w((t.x*s-this.x)*Ne,(t.y*s-this.y)*Ne)}toString(){return`${this.z}/${this.x}/${this.y}`}}class Sx{constructor(t,s){this.wrap=t,this.canonical=s,this.key=Tf(t,s.z,s.z,s.x,s.y)}}class _A{constructor(t,s,A,p,v){if(this.terrainRttPosMatrix32f=null,t<A)throw new Error(`overscaledZ should be >= z; overscaledZ = ${t}; z = ${A}`);this.overscaledZ=t,this.wrap=s,this.canonical=new pv(A,+p,+v),this.key=Tf(s,t,A,p,v)}clone(){return new _A(this.overscaledZ,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)}equals(t){return this.overscaledZ===t.overscaledZ&&this.wrap===t.wrap&&this.canonical.equals(t.canonical)}scaledTo(t){if(t>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${t}; overscaledZ = ${this.overscaledZ}`);const s=this.canonical.z-t;return t>this.canonical.z?new _A(t,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new _A(t,this.wrap,t,this.canonical.x>>s,this.canonical.y>>s)}isOverscaled(){return this.overscaledZ>this.canonical.z}calculateScaledKey(t,s){if(t>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${t}; overscaledZ = ${this.overscaledZ}`);const A=this.canonical.z-t;return t>this.canonical.z?Tf(this.wrap*+s,t,this.canonical.z,this.canonical.x,this.canonical.y):Tf(this.wrap*+s,t,t,this.canonical.x>>A,this.canonical.y>>A)}isChildOf(t){if(t.wrap!==this.wrap||this.overscaledZ-t.overscaledZ<=0)return!1;if(t.overscaledZ===0)return this.overscaledZ>0;const s=this.canonical.z-t.canonical.z;return!(s<0)&&t.canonical.x===this.canonical.x>>s&&t.canonical.y===this.canonical.y>>s}children(t){if(this.overscaledZ>=t)return[new _A(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const s=this.canonical.z+1,A=2*this.canonical.x,p=2*this.canonical.y;return[new _A(s,this.wrap,s,A,p),new _A(s,this.wrap,s,A+1,p),new _A(s,this.wrap,s,A,p+1),new _A(s,this.wrap,s,A+1,p+1)]}isLessThan(t){return this.wrap<t.wrap||!(this.wrap>t.wrap)&&(this.overscaledZ<t.overscaledZ||!(this.overscaledZ>t.overscaledZ)&&(this.canonical.x<t.canonical.x||!(this.canonical.x>t.canonical.x)&&this.canonical.y<t.canonical.y))}wrapped(){return new _A(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(t){return new _A(this.overscaledZ,t,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new Sx(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}getTilePoint(t){return this.canonical.getTilePoint(new Zp(t.x-this.wrap,t.y))}}function Tf(l,t,s,A,p){(l*=2)<0&&(l=-1*l-1);const v=1<<s;return(v*v*l+v*p+A).toString(36)+s.toString(36)+t.toString(36)}function Xp(l,t){return t?l.properties[t]:l.id}function $T(l,t){const s={id:l.id};if(t.removeAllProperties&&(delete l.removeProperties,delete l.addOrUpdateProperties,delete t.removeProperties),t.removeProperties)for(const A of t.removeProperties){const p=l.addOrUpdateProperties.findIndex((v=>v.key===A));p>-1&&l.addOrUpdateProperties.splice(p,1)}return(l.removeAllProperties||t.removeAllProperties)&&(s.removeAllProperties=!0),(l.removeProperties||t.removeProperties)&&(s.removeProperties=[...l.removeProperties||[],...t.removeProperties||[]]),(l.addOrUpdateProperties||t.addOrUpdateProperties)&&(s.addOrUpdateProperties=[...l.addOrUpdateProperties||[],...t.addOrUpdateProperties||[]]),(l.newGeometry||t.newGeometry)&&(s.newGeometry=t.newGeometry||l.newGeometry),s}function Fx(l){var t,s;if(!l)return{};const A={};return A.removeAll=l.removeAll,A.remove=new Set(l.remove||[]),A.add=new Map((t=l.add)===null||t===void 0?void 0:t.map((p=>[p.id,p]))),A.update=new Map((s=l.update)===null||s===void 0?void 0:s.map((p=>[p.id,p]))),A}$e("CanonicalTileID",pv),$e("OverscaledTileID",_A,{omit:["terrainRttPosMatrix32f"]});class Ix{constructor(t){this._stringToNumber={},this._numberToString=[];for(let s=0;s<t.length;s++){const A=t[s];this._stringToNumber[A]=s,this._numberToString[s]=A}}encode(t){return this._stringToNumber[t]}decode(t){if(t>=this._numberToString.length)throw new Error(`Out of bounds. Index requested n=${t} can't be >= this._numberToString.length ${this._numberToString.length}`);return this._numberToString[t]}}class Tx{constructor(t,s,A,p,v){this.type="Feature",this._vectorTileFeature=t,this._x=A,this._y=p,this._z=s,this.properties=t.properties,this.id=v}projectPoint(t,s,A,p){return[360*(t.x+s)/p-180,360/Math.PI*Math.atan(Math.exp((1-2*(t.y+A)/p)*Math.PI))-90]}projectLine(t,s,A,p){return t.map((v=>this.projectPoint(v,s,A,p)))}get geometry(){if(this._geometry)return this._geometry;const t=this._vectorTileFeature,s=t.extent*Math.pow(2,this._z),A=t.extent*this._x,p=t.extent*this._y,v=t.loadGeometry();switch(t.type){case 1:{const _=[];for(const F of v)_.push(F[0]);const B=this.projectLine(_,A,p,s);this._geometry=_.length===1?{type:"Point",coordinates:B[0]}:{type:"MultiPoint",coordinates:B};break}case 2:{const _=v.map((B=>this.projectLine(B,A,p,s)));this._geometry=_.length===1?{type:"LineString",coordinates:_[0]}:{type:"MultiLineString",coordinates:_};break}case 3:{const _=_f(v),B=[];for(const F of _)B.push(F.map((U=>this.projectLine(U,A,p,s))));this._geometry=B.length===1?{type:"Polygon",coordinates:B[0]}:{type:"MultiPolygon",coordinates:B};break}default:throw new Error(`unknown feature type: ${t.type}`)}return this._geometry}set geometry(t){this._geometry=t}toJSON(){const t={geometry:this.geometry};for(const s in this)s!=="_geometry"&&s!=="_vectorTileFeature"&&s!=="_x"&&s!=="_y"&&s!=="_z"&&(t[s]=this[s]);return t}}class Pf{_name;dataBuffer;nullabilityBuffer;_size;constructor(t,s,A){this._name=t,this.dataBuffer=s,typeof A=="number"?this._size=A:(this.nullabilityBuffer=A,this._size=A.size())}getValue(t){return this.nullabilityBuffer&&!this.nullabilityBuffer.get(t)?null:this.getValueFromBuffer(t)}has(t){return this.nullabilityBuffer&&this.nullabilityBuffer.get(t)||!this.nullabilityBuffer}get name(){return this._name}get size(){return this._size}}class Eg extends Pf{}class mv extends Eg{getValueFromBuffer(t){return this.dataBuffer[t]}}class gv extends Eg{getValueFromBuffer(t){return this.dataBuffer[t]}}class Px extends Pf{delta;constructor(t,s,A,p){super(t,s,p),this.delta=A}}class yv extends Px{constructor(t,s,A,p){super(t,Int32Array.of(s),A,p)}getValueFromBuffer(t){return this.dataBuffer[0]+t*this.delta}}class vv extends Pf{constructor(t,s,A){super(t,Int32Array.of(s),A)}getValueFromBuffer(t){return this.dataBuffer[0]}}class WT{_name;_geometryVector;_idVector;_propertyVectors;_extent;propertyVectorsMap;constructor(t,s,A,p,v=4096){this._name=t,this._geometryVector=s,this._idVector=A,this._propertyVectors=p,this._extent=v}get name(){return this._name}get idVector(){return this._idVector}get geometryVector(){return this._geometryVector}get propertyVectors(){return this._propertyVectors}getPropertyVector(t){return this.propertyVectorsMap||(this.propertyVectorsMap=new Map(this._propertyVectors.map((s=>[s.name,s])))),this.propertyVectorsMap.get(t)}*[Symbol.iterator](){const t=this.geometryVector[Symbol.iterator]();let s=0;for(;s<this.numFeatures;){let A;this.idVector&&(A=this.containsMaxSaveIntegerValues(this.idVector)?Number(this.idVector.getValue(s)):this.idVector.getValue(s));const p=t?.next().value,v={};for(const _ of this.propertyVectors){if(!_)continue;const B=_.name,F=_.getValue(s);F!==null&&(v[B]=F)}s++,yield{id:A,geometry:p,properties:v}}}get numFeatures(){return this.geometryVector.numGeometries}get extent(){return this._extent}getFeatures(){const t=[],s=this.geometryVector.getGeometries();for(let A=0;A<this.numFeatures;A++){let p;this.idVector&&(p=this.containsMaxSaveIntegerValues(this.idVector)?Number(this.idVector.getValue(A)):this.idVector.getValue(A));const v={coordinates:s[A],type:this.geometryVector.geometryType(A)},_={};for(const B of this.propertyVectors){if(!B)continue;const F=B.name,U=B.getValue(A);U!==null&&(_[F]=U)}t.push({id:p,geometry:v,properties:_})}return t}containsMaxSaveIntegerValues(t){return t instanceof mv||t instanceof vv&&t instanceof yv||t instanceof gv}}class ZT{value;constructor(t){this.value=t}get(){return this.value}set(t){this.value=t}increment(){return this.value++}add(t){this.value+=t}}var qn,Ih,Xa,vu,Hd,Xc,ra,na,Lx,wA;function xa(l,t,s){const A=new Int32Array(s);let p=0,v=t.get();for(let _=0;_<A.length;_++){let B=l[v++],F=127&B;B<128||(B=l[v++],F|=(127&B)<<7,B<128||(B=l[v++],F|=(127&B)<<14,B<128||(B=l[v++],F|=(127&B)<<21,B<128||(B=l[v++],F|=(15&B)<<28)))),A[p++]=F}return t.set(v),A}function Sg(l,t,s){const A=new BigInt64Array(s);for(let p=0;p<A.length;p++)A[p]=YT(l,t);return A}function XT(l,t){let s,A;return A=l[t.get()],t.increment(),s=127&A,A<128?s:(A=l[t.get()],t.increment(),s|=(127&A)<<7,A<128?s:(A=l[t.get()],t.increment(),s|=(127&A)<<14,A<128?s:(A=l[t.get()],t.increment(),s|=(127&A)<<21,A<128?s:(A=l[t.get()],s|=(15&A)<<28,(function(p,v,_){let B,F;if(F=v[_.get()],_.increment(),B=(112&F)>>4,F<128||(F=v[_.get()],_.increment(),B|=(127&F)<<3,F<128)||(F=v[_.get()],_.increment(),B|=(127&F)<<10,F<128)||(F=v[_.get()],_.increment(),B|=(127&F)<<17,F<128)||(F=v[_.get()],_.increment(),B|=(127&F)<<24,F<128)||(F=v[_.get()],_.increment(),B|=(1&F)<<31,F<128))return 4294967296*B+(p>>>0);throw new Error("Expected varint not more than 10 bytes")})(s,l,t)))))}function Mx(l,t,s,A){throw new Error("FastPFor is not implemented yet.")}function jd(l){return l>>>1^-(1&l)}function Lf(l){return l>>1n^-(1n&l)}function YT(l,t){let s=0n,A=0,p=t.get();for(;p<l.length;){const v=l[p++];if(s|=BigInt(127&v)<<BigInt(A),!(128&v))break;if(A+=7,A>=64)throw new Error("Varint too long")}return t.set(p),s}function kx(l,t,s){const A=new Int32Array(s);let p=0;for(let v=0;v<t;v++){const _=l[v];A.fill(l[v+t],p,p+_),p+=_}return A}function Ux(l,t,s){const A=new BigInt64Array(s);let p=0;for(let v=0;v<t;v++){const _=Number(l[v]);A.fill(l[v+t],p,p+_),p+=_}return A}function Dx(l,t,s){const A=new Float64Array(s);let p=0;for(let v=0;v<t;v++){const _=l[v];A.fill(l[v+t],p,p+_),p+=_}return A}function _v(l){const t=l.length/4*4;let s=1;if(t>=4)for(let A=l[0];s<t-4;s+=4)A=l[s]+=A,A=l[s+1]+=A,A=l[s+2]+=A,A=l[s+3]+=A;for(;s!=l.length;)l[s]+=l[s-1],++s}function Rx(l){l[0]=l[0]>>>1^-(1&l[0]),l[1]=l[1]>>>1^-(1&l[1]);const t=l.length/4*4;let s=2;if(t>=4)for(;s<t-4;s+=4){const A=l[s],p=l[s+1],v=l[s+2],_=l[s+3];l[s]=(A>>>1^-(1&A))+l[s-2],l[s+1]=(p>>>1^-(1&p))+l[s-1],l[s+2]=(v>>>1^-(1&v))+l[s],l[s+3]=(_>>>1^-(1&_))+l[s+1]}for(;s!=l.length;s+=2)l[s]=(l[s]>>>1^-(1&l[s]))+l[s-2],l[s+1]=(l[s+1]>>>1^-(1&l[s+1]))+l[s-1]}(function(l){l.NONE="NONE",l.DELTA="DELTA",l.COMPONENTWISE_DELTA="COMPONENTWISE_DELTA",l.RLE="RLE",l.MORTON="MORTON",l.PDE="PDE"})(qn||(qn={})),(function(l){l.NONE="NONE",l.FAST_PFOR="FAST_PFOR",l.VARINT="VARINT",l.ALP="ALP"})(Ih||(Ih={})),(function(l){l.PRESENT="PRESENT",l.DATA="DATA",l.OFFSET="OFFSET",l.LENGTH="LENGTH"})(Xa||(Xa={}));class wv{_dictionaryType;_offsetType;_lengthType;constructor(t,s,A){this._dictionaryType=t,this._offsetType=s,this._lengthType=A}get dictionaryType(){return this._dictionaryType}get offsetType(){return this._offsetType}get lengthType(){return this._lengthType}}function Kl(l,t){const s=(function(A,p){const v=A[p.get()],_=Object.values(Xa)[v>>4];let B=null;switch(_){case Xa.DATA:B=new wv(Object.values(vu)[15&v]);break;case Xa.OFFSET:B=new wv(null,Object.values(Hd)[15&v]);break;case Xa.LENGTH:B=new wv(null,null,Object.values(Xc)[15&v])}p.increment();const F=A[p.get()],U=Object.values(qn)[F>>5],Q=Object.values(qn)[F>>2&7],K=Object.values(Ih)[3&F];p.increment();const X=xa(A,p,2),J=X[0];return{physicalStreamType:_,logicalStreamType:B,logicalLevelTechnique1:U,logicalLevelTechnique2:Q,physicalLevelTechnique:K,numValues:J,byteLength:X[1],decompressedCount:J}})(l,t);return s.logicalLevelTechnique1===qn.MORTON?(function(A,p,v){const _=xa(p,v,2);return{physicalStreamType:A.physicalStreamType,logicalStreamType:A.logicalStreamType,logicalLevelTechnique1:A.logicalLevelTechnique1,logicalLevelTechnique2:A.logicalLevelTechnique2,physicalLevelTechnique:A.physicalLevelTechnique,numValues:A.numValues,byteLength:A.byteLength,decompressedCount:A.decompressedCount,numBits:_[0],coordinateShift:_[1]}})(s,l,t):qn.RLE!==s.logicalLevelTechnique1&&qn.RLE!==s.logicalLevelTechnique2||Ih.NONE===s.physicalLevelTechnique?s:(function(A,p,v){const _=xa(p,v,2);return{physicalStreamType:A.physicalStreamType,logicalStreamType:A.logicalStreamType,logicalLevelTechnique1:A.logicalLevelTechnique1,logicalLevelTechnique2:A.logicalLevelTechnique2,physicalLevelTechnique:A.physicalLevelTechnique,numValues:A.numValues,byteLength:A.byteLength,decompressedCount:_[1],runs:_[0],numRleValues:_[1]}})(s,l,t)}(function(l){l.NONE="NONE",l.SINGLE="SINGLE",l.SHARED="SHARED",l.VERTEX="VERTEX",l.MORTON="MORTON",l.FSST="FSST"})(vu||(vu={})),(function(l){l.VERTEX="VERTEX",l.INDEX="INDEX",l.STRING="STRING",l.KEY="KEY"})(Hd||(Hd={})),(function(l){l.VAR_BINARY="VAR_BINARY",l.GEOMETRIES="GEOMETRIES",l.PARTS="PARTS",l.RINGS="RINGS",l.TRIANGLES="TRIANGLES",l.SYMBOL="SYMBOL",l.DICTIONARY="DICTIONARY"})(Xc||(Xc={})),(function(l){l[l.FLAT=0]="FLAT",l[l.CONST=1]="CONST",l[l.SEQUENCE=2]="SEQUENCE",l[l.DICTIONARY=3]="DICTIONARY",l[l.FSST_DICTIONARY=4]="FSST_DICTIONARY"})(ra||(ra={}));class _u{values;_size;constructor(t,s){this.values=t,this._size=s}get(t){const s=Math.floor(t/8);return(this.values[s]>>t%8&1)==1}set(t,s){const A=Math.floor(t/8);this.values[A]=this.values[A]|(s?1:0)<<t%8}getInt(t){const s=Math.floor(t/8);return this.values[s]>>t%8&1}size(){return this._size}getBuffer(){return this.values}}function ql(l,t,s,A,p){return(function(v,_,B){switch(_.logicalLevelTechnique1){case qn.DELTA:return _.logicalLevelTechnique2===qn.RLE?(function(F,U,Q){const K=new Int32Array(Q);let X=0,J=0;for(let oe=0;oe<U;oe++){const le=F[oe],he=jd(F[oe+U]);for(let be=0;be<le;be++)J+=he,K[X++]=J}return K})(v,_.runs,_.numRleValues):((function(F){F[0]=F[0]>>>1^-(1&F[0]);const U=F.length/4*4;let Q=1;if(U>=4)for(;Q<U-4;Q+=4){const K=F[Q],X=F[Q+1],J=F[Q+2],oe=F[Q+3];F[Q]=(K>>>1^-(1&K))+F[Q-1],F[Q+1]=(X>>>1^-(1&X))+F[Q],F[Q+2]=(J>>>1^-(1&J))+F[Q+1],F[Q+3]=(oe>>>1^-(1&oe))+F[Q+2]}for(;Q!=F.length;++Q)F[Q]=(F[Q]>>>1^-(1&F[Q]))+F[Q-1]})(v),v);case qn.RLE:return(function(F,U,Q){return Q?(function(K,X,J){const oe=new Int32Array(J);let le=0;for(let he=0;he<X;he++){const be=K[he];let rt=K[he+X];rt=rt>>>1^-(1&rt),oe.fill(rt,le,le+be),le+=be}return oe})(F,U.runs,U.numRleValues):kx(F,U.runs,U.numRleValues)})(v,_,B);case qn.MORTON:return _v(v),v;case qn.COMPONENTWISE_DELTA:return Rx(v),v;case qn.NONE:return B&&(function(F){for(let U=0;U<F.length;U++){const Q=F[U];F[U]=Q>>>1^-(1&Q)}})(v),v;default:throw new Error(`The specified Logical level technique is not supported: ${_.logicalLevelTechnique1}`)}})(Fg(l,t,s),s,A)}function Jh(l,t,s){return(function(A,p){if(p.logicalLevelTechnique1===qn.DELTA&&p.logicalLevelTechnique2===qn.NONE)return(function(_){const B=new Int32Array(_.length+1);B[0]=0,B[1]=jd(_[0]);let F=B[1],U=2;for(;U!=B.length;++U){const Q=_[U-1];F+=Q>>>1^-(1&Q),B[U]=B[U-1]+F}return B})(A);if(p.logicalLevelTechnique1===qn.RLE&&p.logicalLevelTechnique2===qn.NONE)return(function(_,B,F){const U=new Int32Array(F+1);U[0]=0;let Q=1,K=U[0];for(let X=0;X<B;X++){const J=_[X],oe=_[X+B];for(let le=Q;le<Q+J;le++)U[le]=oe+K,K=U[le];Q+=J}return U})(A,p.runs,p.numRleValues);if(p.logicalLevelTechnique1===qn.NONE&&p.logicalLevelTechnique2===qn.NONE){(function(_){let B=0;for(let F=0;F<_.length;F++)_[F]+=B,B=_[F]})(A);const v=new Int32Array(p.numValues+1);return v[0]=0,v.set(A,1),v}if(p.logicalLevelTechnique1===qn.DELTA&&p.logicalLevelTechnique2===qn.RLE){const v=(function(_,B,F){const U=new Int32Array(F+1);U[0]=0;let Q=1,K=U[0];for(let X=0;X<B;X++){const J=_[X];let oe=_[X+B];oe=oe>>>1^-(1&oe);for(let le=Q;le<Q+J;le++)U[le]=oe+K,K=U[le];Q+=J}return U})(A,p.runs,p.numRleValues);return _v(v),v}throw new Error("Only delta encoding is supported for transforming length to offset streams yet.")})(Fg(l,t,s),s)}function Fg(l,t,s){const A=s.physicalLevelTechnique;if(A===Ih.FAST_PFOR)return Mx();if(A===Ih.VARINT)return xa(l,t,s.numValues);if(A===Ih.NONE){const p=t.get();t.add(s.byteLength);const v=l.subarray(p,t.get());return new Int32Array(v)}throw new Error("Specified physicalLevelTechnique is not supported (yet).")}function xv(l,t,s,A){const p=Fg(l,t,s);if(p.length===1){const v=p[0];return A?jd(v):v}return A?(function(v){return jd(v[1])})(p):(function(v){return v[1]})(p)}function Nx(l,t,s){return(function(A){if(A.length==2){const p=jd(A[1]);return[p,p]}return[jd(A[2]),jd(A[3])]})(Fg(l,t,s))}function Qx(l,t,s){return(function(A){if(A.length==2){const p=Lf(A[1]);return[p,p]}return[Lf(A[2]),Lf(A[3])]})(Sg(l,t,s.numValues))}function Ox(l,t,s,A){return(function(p,v,_){switch(v.logicalLevelTechnique1){case qn.DELTA:return v.logicalLevelTechnique2===qn.RLE?(function(B,F,U){const Q=new BigInt64Array(U);let K=0,X=0n;for(let J=0;J<F;J++){const oe=Number(B[J]),le=Lf(B[J+F]);for(let he=0;he<oe;he++)X+=le,Q[K++]=X}return Q})(p,v.runs,v.numRleValues):((function(B){B[0]=B[0]>>1n^-(1n&B[0]);const F=B.length/4*4;let U=1;if(F>=4)for(;U<F-4;U+=4){const Q=B[U],K=B[U+1],X=B[U+2],J=B[U+3];B[U]=(Q>>1n^-(1n&Q))+B[U-1],B[U+1]=(K>>1n^-(1n&K))+B[U],B[U+2]=(X>>1n^-(1n&X))+B[U+1],B[U+3]=(J>>1n^-(1n&J))+B[U+2]}for(;U!=B.length;++U)B[U]=(B[U]>>1n^-(1n&B[U]))+B[U-1]})(p),p);case qn.RLE:return(function(B,F,U){return U?(function(Q,K,X){const J=new BigInt64Array(X);let oe=0;for(let le=0;le<K;le++){const he=Number(Q[le]);let be=Q[le+K];be=be>>1n^-(1n&be),J.fill(be,oe,oe+he),oe+=he}return J})(B,F.runs,F.numRleValues):Ux(B,F.runs,F.numRleValues)})(p,v,_);case qn.NONE:return _&&(function(B){for(let F=0;F<B.length;F++){const U=B[F];B[F]=U>>1n^-(1n&U)}})(p),p;default:throw new Error(`The specified Logical level technique is not supported: ${v.logicalLevelTechnique1}`)}})(Sg(l,t,s.numValues),s,A)}function zx(l,t,s,A){const p=Sg(l,t,s.numValues);if(p.length===1){const v=p[0];return A?Lf(v):v}return A?(function(v){return Lf(v[1])})(p):(function(v){return v[1]})(p)}function bv(l,t,s,A,p){return(function(v,_,B,F){switch(_.logicalLevelTechnique1){case qn.DELTA:return _.logicalLevelTechnique2===qn.RLE&&(v=kx(v,_.runs,_.numRleValues)),(function(U,Q){const K=new Int32Array(U.size());let X=0;U.get(0)?(K[0]=U.get(0)?Q[0]>>>1^-(1&Q[0]):0,X=1):K[0]=0;let J=1;for(;J!=K.length;++J)K[J]=U.get(J)?K[J-1]+(Q[X]>>>1^-(1&Q[X++])):K[J-1];return K})(F,v);case qn.RLE:return(function(U,Q,K,X){const J=Q;return K?(function(oe,le,he){const be=new Int32Array(oe.size());let rt=0;for(let Fe=0;Fe<he;Fe++){const Ue=le[Fe];let at=le[Fe+he];at=at>>>1^-(1&at);for(let dt=rt;dt<rt+Ue;dt++)oe.get(dt)?be[dt]=at:(be[dt]=0,rt++);rt+=Ue}return be})(X,U,J.runs):(function(oe,le,he){const be=new Int32Array(oe.size());let rt=0;for(let Fe=0;Fe<he;Fe++){const Ue=le[Fe],at=le[Fe+he];for(let dt=rt;dt<rt+Ue;dt++)oe.get(dt)?be[dt]=at:(be[dt]=0,rt++);rt+=Ue}return be})(X,U,J.runs)})(v,_,B,F);case qn.MORTON:return _v(v),v;case qn.COMPONENTWISE_DELTA:return Rx(v),v;case qn.NONE:return v=B?(function(U,Q){const K=new Int32Array(U.size());let X=0,J=0;for(;J!=K.length;++J)if(U.get(J)){const oe=Q[X++];K[J]=oe>>>1^-(1&oe)}else K[J]=0;return K})(F,v):(function(U,Q){const K=new Int32Array(U.size());let X=0,J=0;for(;J!=K.length;++J)K[J]=U.get(J)?Q[X++]:0;return K})(F,v),v;default:throw new Error("The specified Logical level technique is not supported")}})(s.physicalLevelTechnique===Ih.FAST_PFOR?Mx():xa(l,t,s.numValues),s,A,p)}function Ig(l,t,s,A){const p=l.logicalLevelTechnique1;if(p===qn.RLE)return l.runs===1?ra.CONST:ra.FLAT;const v=t instanceof _u?t.size():t;if(p===qn.DELTA&&l.logicalLevelTechnique2===qn.RLE){const _=l.runs,B=2;if(l.numRleValues!==v)return ra.FLAT;if(_===1)return ra.SEQUENCE;if(_===2){const F=A.get();let U;if(l.physicalLevelTechnique===Ih.VARINT)U=xa(s,A,4);else{const Q=A.get();U=new Int32Array(s.buffer,s.byteOffset+Q,4)}if(A.set(F),U[2]===B&&U[3]===B)return ra.SEQUENCE}}return l.numValues===1?ra.CONST:ra.FLAT}class Hx extends Eg{getValueFromBuffer(t){return this.dataBuffer[t]}}class jx extends Px{constructor(t,s,A,p){super(t,BigInt64Array.of(s),A,p)}getValueFromBuffer(t){return this.dataBuffer[0]+BigInt(t)*this.delta}}class Mf{_geometryOffsets;_partOffsets;_ringOffsets;constructor(t,s,A){this._geometryOffsets=t,this._partOffsets=s,this._ringOffsets=A}get geometryOffsets(){return this._geometryOffsets}get partOffsets(){return this._partOffsets}get ringOffsets(){return this._ringOffsets}}function Bv(l,t,s){return{x:Vx(l,t)-s,y:Vx(l>>1,t)-s}}function Vx(l,t){let s=0;for(let A=0;A<t;A++)s|=(l&1<<2*A)>>A;return s}(function(l){l[l.POINT=0]="POINT",l[l.LINESTRING=1]="LINESTRING",l[l.POLYGON=2]="POLYGON",l[l.MULTIPOINT=3]="MULTIPOINT",l[l.MULTILINESTRING=4]="MULTILINESTRING",l[l.MULTIPOLYGON=5]="MULTIPOLYGON"})(na||(na={})),(function(l){l[l.POINT=0]="POINT",l[l.LINESTRING=1]="LINESTRING",l[l.POLYGON=2]="POLYGON"})(Lx||(Lx={})),(function(l){l[l.MORTON=0]="MORTON",l[l.VEC_2=1]="VEC_2",l[l.VEC_3=2]="VEC_3"})(wA||(wA={}));class JT{createPoint(t){return[[t]]}createMultiPoint(t){return t.map((s=>[s]))}createLineString(t){return[t]}createMultiLineString(t){return t}createPolygon(t,s){return[t].concat(s)}createMultiPolygon(t){return t.flat()}}function Gx(l){const t=new Array(l.numGeometries);let s=1,A=1,p=1,v=0;const _=new JT;let B=0,F=0;const U=l.mortonSettings,Q=l.topologyVector,K=Q.geometryOffsets,X=Q.partOffsets,J=Q.ringOffsets,oe=l.vertexOffsets,le=l.containsPolygonGeometry(),he=l.vertexBuffer;for(let be=0;be<l.numGeometries;be++){const rt=l.geometryType(be);if(rt===na.POINT){if(oe&&oe.length!==0)if(l.vertexBufferType===wA.VEC_2){const Fe=2*oe[F++],Ue=new w(he[Fe],he[Fe+1]);t[v++]=_.createPoint(Ue)}else{const Fe=Bv(he[oe[F++]],U.numBits,U.coordinateShift),Ue=new w(Fe.x,Fe.y);t[v++]=_.createPoint(Ue)}else{const Fe=new w(he[B++],he[B++]);t[v++]=_.createPoint(Fe)}K&&p++,X&&s++,J&&A++}else if(rt===na.MULTIPOINT){const Fe=K[p]-K[p-1];p++;const Ue=new Array(Fe);if(oe&&oe.length!==0){for(let at=0;at<Fe;at++){const dt=2*oe[F++];Ue[at]=new w(he[dt],he[dt+1])}t[v++]=_.createMultiPoint(Ue)}else{for(let at=0;at<Fe;at++){const dt=he[B++],Mt=he[B++];Ue[at]=new w(dt,Mt)}t[v++]=_.createMultiPoint(Ue)}}else if(rt===na.LINESTRING){let Fe,Ue=0;le?(Ue=J[A]-J[A-1],A++):Ue=X[s]-X[s-1],s++,oe&&oe.length!==0?(Fe=l.vertexBufferType===wA.VEC_2?Ev(he,oe,F,Ue,!1):Sv(he,oe,F,Ue,!1,U),F+=Ue):(Fe=Cv(he,B,Ue,!1),B+=2*Ue),t[v++]=_.createLineString(Fe),K&&p++}else if(rt===na.POLYGON){const Fe=X[s]-X[s-1];s++;const Ue=new Array(Fe-1);let at=J[A]-J[A-1];if(A++,oe&&oe.length!==0){const dt=l.vertexBufferType===wA.VEC_2?Pg(he,oe,F,at):Lg(he,oe,F,at,0,U);F+=at;for(let Mt=0;Mt<Ue.length;Mt++)at=J[A]-J[A-1],A++,Ue[Mt]=l.vertexBufferType===wA.VEC_2?Pg(he,oe,F,at):Lg(he,oe,F,at,0,U),F+=at;t[v++]=_.createPolygon(dt,Ue)}else{const dt=Tg(he,B,at);B+=2*at;for(let Mt=0;Mt<Ue.length;Mt++)at=J[A]-J[A-1],A++,Ue[Mt]=Tg(he,B,at),B+=2*at;t[v++]=_.createPolygon(dt,Ue)}K&&p++}else if(rt===na.MULTILINESTRING){const Fe=K[p]-K[p-1];p++;const Ue=new Array(Fe);if(oe&&oe.length!==0){for(let at=0;at<Fe;at++){let dt=0;le?(dt=J[A]-J[A-1],A++):dt=X[s]-X[s-1],s++;const Mt=l.vertexBufferType===wA.VEC_2?Ev(he,oe,F,dt,!1):Sv(he,oe,F,dt,!1,U);Ue[at]=Mt,F+=dt}t[v++]=_.createMultiLineString(Ue)}else{for(let at=0;at<Fe;at++){let dt=0;le?(dt=J[A]-J[A-1],A++):dt=X[s]-X[s-1],s++,Ue[at]=Cv(he,B,dt,!1),B+=2*dt}t[v++]=_.createMultiLineString(Ue)}}else{if(rt!==na.MULTIPOLYGON)throw new Error("The specified geometry type is currently not supported.");{const Fe=K[p]-K[p-1];p++;const Ue=new Array(Fe);let at=0;if(oe&&oe.length!==0){for(let dt=0;dt<Fe;dt++){const Mt=X[s]-X[s-1];s++;const Xt=new Array(Mt-1);at=J[A]-J[A-1],A++;const Vt=l.vertexBufferType===wA.VEC_2?Pg(he,oe,F,at):Lg(he,oe,F,at,0,U);F+=at;for(let ir=0;ir<Xt.length;ir++)at=J[A]-J[A-1],A++,Xt[ir]=l.vertexBufferType===wA.VEC_2?Pg(he,oe,F,at):Lg(he,oe,F,at,0,U),F+=at;Ue[dt]=_.createPolygon(Vt,Xt)}t[v++]=_.createMultiPolygon(Ue)}else{for(let dt=0;dt<Fe;dt++){const Mt=X[s]-X[s-1];s++;const Xt=new Array(Mt-1);at=J[A]-J[A-1],A++;const Vt=Tg(he,B,at);B+=2*at;for(let ir=0;ir<Xt.length;ir++){const wr=J[A]-J[A-1];A++,Xt[ir]=Tg(he,B,wr),B+=2*wr}Ue[dt]=_.createPolygon(Vt,Xt)}t[v++]=_.createMultiPolygon(Ue)}}}}return t}function Tg(l,t,s){return Cv(l,t,s,!0)}function Pg(l,t,s,A){return Ev(l,t,s,A,!0)}function Lg(l,t,s,A,p,v){return Sv(l,t,s,A,!0,v)}function Cv(l,t,s,A){const p=new Array(A?s+1:s);for(let v=0;v<2*s;v+=2)p[v/2]=new w(l[t+v],l[t+v+1]);return A&&(p[p.length-1]=p[0]),p}function Ev(l,t,s,A,p){const v=new Array(p?A+1:A);for(let _=0;_<2*A;_+=2){const B=2*t[s+_/2];v[_/2]=new w(l[B],l[B+1])}return p&&(v[v.length-1]=v[0]),v}function Sv(l,t,s,A,p,v){const _=new Array(p?A+1:A);for(let B=0;B<A;B++){const F=Bv(l[t[s+B]],v.numBits,v.coordinateShift);_[B]=new w(F.x,F.y)}return p&&(_[_.length-1]=_[0]),_}class Kx{_vertexBufferType;_topologyVector;_vertexOffsets;_vertexBuffer;_mortonSettings;constructor(t,s,A,p,v){this._vertexBufferType=t,this._topologyVector=s,this._vertexOffsets=A,this._vertexBuffer=p,this._mortonSettings=v}get vertexBufferType(){return this._vertexBufferType}get topologyVector(){return this._topologyVector}get vertexOffsets(){return this._vertexOffsets}get vertexBuffer(){return this._vertexBuffer}*[Symbol.iterator](){const t=Gx(this);let s=0;for(;s<this.numGeometries;)yield{coordinates:t[s],type:this.geometryType(s)},s++}getSimpleEncodedVertex(t){const s=this.vertexOffsets?2*this.vertexOffsets[t]:2*t;return[this.vertexBuffer[s],this.vertexBuffer[s+1]]}getVertex(t){if(this.vertexOffsets&&this.mortonSettings){const A=Bv(this.vertexBuffer[this.vertexOffsets[t]],this.mortonSettings.numBits,this.mortonSettings.coordinateShift);return[A.x,A.y]}const s=this.vertexOffsets?2*this.vertexOffsets[t]:2*t;return[this.vertexBuffer[s],this.vertexBuffer[s+1]]}getGeometries(){return Gx(this)}get mortonSettings(){return this._mortonSettings}}class qx extends Kx{_numGeometries;_geometryType;constructor(t,s,A,p,v,_,B){super(A,p,v,_,B),this._numGeometries=t,this._geometryType=s}geometryType(t){return this._geometryType}get numGeometries(){return this._numGeometries}containsPolygonGeometry(){return this._geometryType===na.POLYGON||this._geometryType===na.MULTIPOLYGON}containsSingleGeometryType(){return!0}}class $x extends Kx{_geometryTypes;constructor(t,s,A,p,v,_){super(t,A,p,v,_),this._geometryTypes=s}geometryType(t){return this._geometryTypes[t]}get numGeometries(){return this._geometryTypes.length}containsPolygonGeometry(){for(let t=0;t<this.numGeometries;t++)if(this.geometryType(t)===na.POLYGON||this.geometryType(t)===na.MULTIPOLYGON)return!0;return!1}containsSingleGeometryType(){return!1}}class Wx{_triangleOffsets;_indexBuffer;_vertexBuffer;_topologyVector;constructor(t,s,A,p){this._triangleOffsets=t,this._indexBuffer=s,this._vertexBuffer=A,this._topologyVector=p}get triangleOffsets(){return this._triangleOffsets}get indexBuffer(){return this._indexBuffer}get vertexBuffer(){return this._vertexBuffer}get topologyVector(){return this._topologyVector}getGeometries(){if(!this._topologyVector)throw new Error("Cannot convert GpuVector to coordinates without topology information");const t=new Array(this.numGeometries),s=this._topologyVector,A=s.partOffsets,p=s.ringOffsets,v=s.geometryOffsets;let _=0,B=1,F=1,U=1;for(let Q=0;Q<this.numGeometries;Q++)switch(this.geometryType(Q)){case na.POLYGON:{const K=A[B]-A[B-1];B++;const X=[];for(let J=0;J<K;J++){const oe=p[F]-p[F-1];F++;const le=[];for(let he=0;he<oe;he++){const be=this._vertexBuffer[_++],rt=this._vertexBuffer[_++];le.push(new w(be,rt))}le.length>0&&le.push(le[0]),X.push(le)}t[Q]=X,v&&U++}break;case na.MULTIPOLYGON:{const K=v[U]-v[U-1];U++;const X=[];for(let J=0;J<K;J++){const oe=A[B]-A[B-1];B++;for(let le=0;le<oe;le++){const he=p[F]-p[F-1];F++;const be=[];for(let rt=0;rt<he;rt++){const Fe=this._vertexBuffer[_++],Ue=this._vertexBuffer[_++];be.push(new w(Fe,Ue))}be.length>0&&be.push(be[0]),X.push(be)}}t[Q]=X}}return t}[Symbol.iterator](){return null}}function Zx(l,t,s,A,p,v){return new e4(l,t,s,A,p,v)}class e4 extends Wx{_numGeometries;_geometryType;constructor(t,s,A,p,v,_){super(A,p,v,_),this._numGeometries=t,this._geometryType=s}geometryType(t){return this._geometryType}get numGeometries(){return this._numGeometries}containsSingleGeometryType(){return!0}}function Xx(l,t,s,A,p){return new t4(l,t,s,A,p)}class t4 extends Wx{_geometryTypes;constructor(t,s,A,p,v){super(s,A,p,v),this._geometryTypes=t}geometryType(t){return this._geometryTypes[t]}get numGeometries(){return this._geometryTypes.length}containsSingleGeometryType(){return!1}}function r4(l,t,s,A,p){const v=Kl(l,s);let _=null,B=null,F=null,U=null,Q=null,K=null,X=null,J=null;if(Ig(v,A,l,s)===ra.CONST){const le=xv(l,s,v,!1);for(let he=0;he<t-1;he++){const be=Kl(l,s);switch(be.physicalStreamType){case Xa.LENGTH:switch(be.logicalStreamType.lengthType){case Xc.GEOMETRIES:_=Jh(l,s,be);break;case Xc.PARTS:B=Jh(l,s,be);break;case Xc.RINGS:F=Jh(l,s,be);break;case Xc.TRIANGLES:X=Jh(l,s,be)}break;case Xa.OFFSET:switch(be.logicalStreamType.offsetType){case Hd.VERTEX:U=ql(l,s,be,!1);break;case Hd.INDEX:J=ql(l,s,be,!1)}break;case Xa.DATA:vu.VERTEX===be.logicalStreamType.dictionaryType?Q=ql(l,s,be,!0):(K={numBits:be.numBits,coordinateShift:be.coordinateShift},Q=ql(l,s,be,!1))}}return J!==null?_!=null||B!=null?Zx(A,le,X,J,Q,new Mf(_,B,F)):Zx(A,le,X,J,Q):K===null?(function(he,be,rt,Fe,Ue){return new qx(he,be,wA.VEC_2,rt,Fe,Ue)})(A,le,new Mf(_,B,F),U,Q):(function(he,be,rt,Fe,Ue,at){return new qx(he,be,wA.MORTON,rt,Fe,Ue,at)})(A,le,new Mf(_,B,F),U,Q,K)}const oe=ql(l,s,v,!1);for(let le=0;le<t-1;le++){const he=Kl(l,s);switch(he.physicalStreamType){case Xa.LENGTH:switch(he.logicalStreamType.lengthType){case Xc.GEOMETRIES:_=ql(l,s,he,!1);break;case Xc.PARTS:B=ql(l,s,he,!1);break;case Xc.RINGS:F=ql(l,s,he,!1);break;case Xc.TRIANGLES:X=Jh(l,s,he)}break;case Xa.OFFSET:switch(he.logicalStreamType.offsetType){case Hd.VERTEX:U=ql(l,s,he,!1);break;case Hd.INDEX:J=ql(l,s,he,!1)}break;case Xa.DATA:vu.VERTEX===he.logicalStreamType.dictionaryType?Q=ql(l,s,he,!0):(K={numBits:he.numBits,coordinateShift:he.coordinateShift},Q=ql(l,s,he,!1))}}return J!==null&&B===null?Xx(oe,X,J,Q):(_!==null?(_=Fv(oe,_,2),B!==null&&F!==null?(B=Yx(oe,_,B,!1),F=(function(le,he,be,rt){const Fe=new Int32Array(be[be.length-1]+1);let Ue=0;Fe[0]=Ue;let at=1,dt=1,Mt=0;for(let Xt=0;Xt<le.length;Xt++){const Vt=le[Xt],ir=he[Xt+1]-he[Xt];if(Vt!==0&&Vt!==3)for(let wr=0;wr<ir;wr++){const ar=be[at]-be[at-1];at++;for(let $t=0;$t<ar;$t++)Ue=Fe[dt++]=Ue+rt[Mt++]}else for(let wr=0;wr<ir;wr++)Fe[dt++]=++Ue,at++}return Fe})(oe,_,B,F)):B!==null&&(B=(function(le,he,be){const rt=new Int32Array(he[he.length-1]+1);let Fe=0;rt[0]=Fe;let Ue=1,at=0;for(let dt=0;dt<le.length;dt++){const Mt=le[dt],Xt=he[dt+1]-he[dt];if(Mt===4||Mt===1)for(let Vt=0;Vt<Xt;Vt++)Fe=rt[Ue++]=Fe+be[at++];else for(let Vt=0;Vt<Xt;Vt++)rt[Ue++]=++Fe}return rt})(oe,_,B))):B!==null&&F!==null?(B=Fv(oe,B,1),F=Yx(oe,B,F,!0)):B!==null&&(B=Fv(oe,B,0)),J!==null?Xx(oe,X,J,Q,new Mf(_,B,F)):K===null?(function(le,he,be,rt){return new $x(wA.VEC_2,le,he,be,rt)})(oe,new Mf(_,B,F),U,Q):(function(le,he,be,rt,Fe){return new $x(wA.MORTON,le,he,be,rt,Fe)})(oe,new Mf(_,B,F),U,Q,K))}function Fv(l,t,s){const A=new Int32Array(l.length+1);let p=0;A[0]=p;let v=0;for(let _=0;_<l.length;_++)p=A[_+1]=p+(l[_]>s?t[v++]:1);return A}function Yx(l,t,s,A){const p=new Int32Array(t[t.length-1]+1);let v=0;p[0]=v;let _=1,B=0;for(let F=0;F<l.length;F++){const U=l[F],Q=t[F+1]-t[F];if(U===5||U===2||A&&(U===4||U===1))for(let K=0;K<Q;K++)v=p[_++]=v+s[B++];else for(let K=0;K<Q;K++)p[_++]=++v}return p}class n4 extends Pf{dataVector;constructor(t,s,A){super(t,s.getBuffer(),A),this.dataVector=s}getValueFromBuffer(t){return this.dataVector.get(t)}}class i4 extends Eg{getValueFromBuffer(t){return this.dataBuffer[t]}}class Jx extends Pf{constructor(t,s,A){super(t,BigInt64Array.of(s),A)}getValueFromBuffer(t){return this.dataBuffer[0]}}function Yp(l,t,s){return eb(l,Math.ceil(t/8),s)}function eb(l,t,s){const A=new Uint8Array(t);let p=0;for(;p<t;){const v=l[s.increment()];if(v<=127){const _=v+3,B=l[s.increment()],F=p+_;A.fill(B,p,F),p=F}else{const _=256-v;for(let B=0;B<_;B++)A[p++]=l[s.increment()]}}return A}const s4=new TextDecoder;function Iv(l,t,s){return s-t>=12?s4.decode(l.subarray(t,s)):(function(A,p,v){let _="",B=p;for(;B<v;){const F=A[B];let U,Q,K,X=null,J=F>239?4:F>223?3:F>191?2:1;if(B+J>v)break;J===1?F<128&&(X=F):J===2?(U=A[B+1],(192&U)==128&&(X=(31&F)<<6|63&U,X<=127&&(X=null))):J===3?(U=A[B+1],Q=A[B+2],(192&U)==128&&(192&Q)==128&&(X=(15&F)<<12|(63&U)<<6|63&Q,(X<=2047||X>=55296&&X<=57343)&&(X=null))):J===4&&(U=A[B+1],Q=A[B+2],K=A[B+3],(192&U)==128&&(192&Q)==128&&(192&K)==128&&(X=(15&F)<<18|(63&U)<<12|(63&Q)<<6|63&K,(X<=65535||X>=1114112)&&(X=null))),X===null?(X=65533,J=1):X>65535&&(X-=65536,_+=String.fromCharCode(X>>>10&1023|55296),X=56320|1023&X),_+=String.fromCharCode(X),B+=J}return _})(l,t,s)}class Tv extends Pf{offsetBuffer;constructor(t,s,A,p){super(t,A,p),this.offsetBuffer=s}}class tb extends Tv{textEncoder;constructor(t,s,A,p){super(t,s,A,p??s.length-1),this.textEncoder=new TextEncoder}getValueFromBuffer(t){return Iv(this.dataBuffer,this.offsetBuffer[t],this.offsetBuffer[t+1])}}class kf extends Tv{indexBuffer;textEncoder;constructor(t,s,A,p,v){super(t,A,p,v??s.length),this.indexBuffer=s,this.indexBuffer=s,this.textEncoder=new TextEncoder}getValueFromBuffer(t){const s=this.indexBuffer[t];return Iv(this.dataBuffer,this.offsetBuffer[s],this.offsetBuffer[s+1])}}class rb extends Tv{indexBuffer;symbolOffsetBuffer;symbolTableBuffer;textEncoder;symbolLengthBuffer;lengthBuffer;decodedDictionary;constructor(t,s,A,p,v,_,B){super(t,A,p,B),this.indexBuffer=s,this.symbolOffsetBuffer=v,this.symbolTableBuffer=_,this.textEncoder=new TextEncoder}getValueFromBuffer(t){this.decodedDictionary==null&&(this.symbolLengthBuffer==null&&(this.symbolLengthBuffer=this.offsetToLengthBuffer(this.symbolOffsetBuffer),this.lengthBuffer=this.offsetToLengthBuffer(this.offsetBuffer)),this.decodedDictionary=(function(A,p,v){const _=[],B=new Array(p.length).fill(0);for(let F=1;F<p.length;F++)B[F]=B[F-1]+p[F-1];for(let F=0;F<v.length;F++)if(v[F]===255)_.push(v[++F]);else{const U=p[v[F]],Q=B[v[F]];for(let K=0;K<U;K++)_.push(A[Q+K])}return new Uint8Array(_)})(this.symbolTableBuffer,this.symbolLengthBuffer,this.dataBuffer));const s=this.indexBuffer[t];return Iv(this.decodedDictionary,this.offsetBuffer[s],this.offsetBuffer[s+1])}offsetToLengthBuffer(t){const s=new Uint32Array(t.length-1);let A=t[0];for(let p=1;p<t.length;p++){const v=t[p];s[p-1]=v-A,A=v}return s}}function o4(l,t,s,A,p,v){return s.type==="scalarType"?(function(_,B,F,U,Q,K){let X=null,J=0;if(_===0)return null;if(K.nullable){const le=Kl(B,F);J=le.numValues;const he=F.get(),be=Yp(B,J,F);F.set(he+le.byteLength),X=new _u(be,le.numValues)}const oe=X??U;switch(Q.physicalType){case 4:case 3:return(function(le,he,be,rt,Fe){const Ue=Kl(le,he),at=Ig(Ue,Fe,le,he),dt=rt.physicalType===3;if(at===ra.FLAT){const Mt=Jp(Fe)?bv(le,he,Ue,dt,Fe):ql(le,he,Ue,dt);return new mv(be.name,Mt,Fe)}if(at===ra.SEQUENCE){const Mt=Nx(le,he,Ue);return new yv(be.name,Mt[0],Mt[1],Ue.numRleValues)}{const Mt=xv(le,he,Ue,dt);return new vv(be.name,Mt,Fe)}})(B,F,K,Q,oe);case 9:return(function(le,he,be,rt,Fe){let Ue=null,at=null,dt=null,Mt=null,Xt=null,Vt=null,ir=null,wr=null;for(let ar=0;ar<rt;ar++){const $t=Kl(he,be);if($t.byteLength!==0)switch($t.physicalStreamType){case Xa.PRESENT:{const Ot=Yp(he,$t.numValues,be);Vt=new _u(Ot,$t.numValues);break}case Xa.OFFSET:at=Fe!=null||Vt!=null?bv(he,be,$t,!1,Fe??Vt):ql(he,be,$t,!1);break;case Xa.LENGTH:{const Ot=Jh(he,be,$t);Xc.DICTIONARY===$t.logicalStreamType.lengthType?Ue=Ot:Xc.SYMBOL===$t.logicalStreamType.lengthType?Mt=Ot:ir=Ot;break}case Xa.DATA:{const Ot=he.subarray(be.get(),be.get()+$t.byteLength);be.add($t.byteLength);const Lr=$t.logicalStreamType.dictionaryType;vu.FSST===Lr?Xt=Ot:vu.SINGLE===Lr||vu.SHARED===Lr?dt=Ot:vu.NONE===Lr&&(wr=Ot);break}}}return(function(ar,$t,Ot,Lr,Ir,Ur,Sr){return $t?new rb(ar,Ot,Lr,Ir,Ur,$t,Sr):null})(le,Xt,at,Ue,dt,Mt,Fe??Vt)??(function(ar,$t,Ot,Lr,Ir){return $t?Ir?new kf(ar,Ot,Lr,$t,Ir):new kf(ar,Ot,Lr,$t):null})(le,dt,at,Ue,Fe??Vt)??(function(ar,$t,Ot,Lr,Ir){if(!$t||!Ot)return null;if(Lr)return Ir?new kf(ar,Lr,$t,Ot,Ir):new kf(ar,Lr,$t,Ot);if(Ir&&Ir.size()!==$t.length-1){const Ur=new Int32Array(Ir.size());let Sr=0;for(let Jr=0;Jr<Ir.size();Jr++)Ur[Jr]=Ir.get(Jr)?Sr++:0;return new kf(ar,Ur,$t,Ot,Ir)}return Ir?new tb(ar,$t,Ot,Ir):new tb(ar,$t,Ot)})(le,ir,wr,at,Fe??Vt)})(K.name,B,F,K.nullable?_-1:_,X);case 0:return(function(le,he,be,rt,Fe){const Ue=Kl(le,he),at=Ue.numValues,dt=he.get(),Mt=Jp(Fe)?(function(Vt,ir,wr,ar){const $t=eb(Vt,Math.ceil(ir/8),wr),Ot=new _u($t,ir),Lr=ar.size(),Ir=new _u(new Uint8Array(Lr),Lr);let Ur=0;for(let Sr=0;Sr<ar.size();Sr++){const Jr=!!ar.get(Sr)&&Ot.get(Ur++);Ir.set(Sr,Jr)}return Ir.getBuffer()})(le,at,he,Fe):Yp(le,at,he);he.set(dt+Ue.byteLength);const Xt=new _u(Mt,at);return new n4(be.name,Xt,Fe)})(B,F,K,0,oe);case 6:case 5:return(function(le,he,be,rt,Fe){const Ue=Kl(le,he),at=Ig(Ue,rt,le,he),dt=Fe.physicalType===5;if(at===ra.FLAT){const Mt=Jp(rt)?(function(Xt,Vt,ir,wr,ar){return(function($t,Ot,Lr,Ir){switch(Ot.logicalLevelTechnique1){case qn.DELTA:return Ot.logicalLevelTechnique2===qn.RLE&&($t=Ux($t,Ot.runs,Ot.numRleValues)),(function(Ur,Sr){const Jr=new BigInt64Array(Ur.size());let ri=0;Ur.get(0)?(Jr[0]=Ur.get(0)?Sr[0]>>1n^-(1n&Sr[0]):0n,ri=1):Jr[0]=0n;let Gn=1;for(;Gn!=Jr.length;++Gn)Jr[Gn]=Ur.get(Gn)?Jr[Gn-1]+(Sr[ri]>>1n^-(1n&Sr[ri++])):Jr[Gn-1];return Jr})(Ir,$t);case qn.RLE:return(function(Ur,Sr,Jr,ri){const Gn=Sr;return Jr?(function(ps,Ja,wo){const ms=new BigInt64Array(ps.size());let As=0;for(let Bi=0;Bi<wo;Bi++){const js=Number(Ja[Bi]);let io=Ja[Bi+wo];io=io>>1n^-(1n&io);for(let ts=As;ts<As+js;ts++)ps.get(ts)?ms[ts]=io:(ms[ts]=0n,As++);As+=js}return ms})(ri,Ur,Gn.runs):(function(ps,Ja,wo){const ms=new BigInt64Array(ps.size());let As=0;for(let Bi=0;Bi<wo;Bi++){const js=Number(Ja[Bi]),io=Ja[Bi+wo];for(let ts=As;ts<As+js;ts++)ps.get(ts)?ms[ts]=io:(ms[ts]=0n,As++);As+=js}return ms})(ri,Ur,Gn.runs)})($t,Ot,Lr,Ir);case qn.NONE:return $t=Lr?(function(Ur,Sr){const Jr=new BigInt64Array(Ur.size());let ri=0,Gn=0;for(;Gn!=Jr.length;++Gn)if(Ur.get(Gn)){const ps=Sr[ri++];Jr[Gn]=ps>>1n^-(1n&ps)}else Jr[Gn]=0n;return Jr})(Ir,$t):(function(Ur,Sr){const Jr=new BigInt64Array(Ur.size());let ri=0,Gn=0;for(;Gn!=Jr.length;++Gn)Jr[Gn]=Ur.get(Gn)?Sr[ri++]:0n;return Jr})(Ir,$t),$t;default:throw new Error("The specified Logical level technique is not supported")}})(Sg(Xt,Vt,ir.numValues),ir,wr,ar)})(le,he,Ue,dt,rt):Ox(le,he,Ue,dt);return new Hx(be.name,Mt,rt)}if(at===ra.SEQUENCE){const Mt=Qx(le,he,Ue);return new jx(be.name,Mt[0],Mt[1],Ue.numRleValues)}{const Mt=zx(le,he,Ue,dt);return new Jx(be.name,Mt,rt)}})(B,F,K,oe,Q);case 7:return(function(le,he,be,rt){const Fe=Kl(le,he),Ue=Jp(rt)?(function(at,dt,Mt,Xt){const Vt=dt.get(),ir=Vt+Xt*Float32Array.BYTES_PER_ELEMENT,wr=new Uint8Array(at.subarray(Vt,ir)).buffer,ar=new Float32Array(wr);dt.set(ir);const $t=Mt.size(),Ot=new Float32Array($t);let Lr=0;for(let Ir=0;Ir<$t;Ir++)Ot[Ir]=Mt.get(Ir)?ar[Lr++]:0;return Ot})(le,he,rt,Fe.numValues):(function(at,dt,Mt){const Xt=dt.get(),Vt=Xt+Mt*Float32Array.BYTES_PER_ELEMENT,ir=new Uint8Array(at.subarray(Xt,Vt)).buffer,wr=new Float32Array(ir);return dt.set(Vt),wr})(le,he,Fe.numValues);return new i4(be.name,Ue,rt)})(B,F,K,oe);case 8:return(function(le,he,be,rt){const Fe=Kl(le,he),Ue=Jp(rt)?(function(at,dt,Mt,Xt){const Vt=dt.get(),ir=Vt+Xt*Float64Array.BYTES_PER_ELEMENT,wr=new Uint8Array(at.subarray(Vt,ir)).buffer,ar=new Float64Array(wr);dt.set(ir);const $t=Mt.size(),Ot=new Float64Array($t);let Lr=0;for(let Ir=0;Ir<$t;Ir++)Ot[Ir]=Mt.get(Ir)?ar[Lr++]:0;return Ot})(le,he,rt,Fe.numValues):(function(at,dt,Mt){const Xt=dt.get(),Vt=Xt+Mt*Float64Array.BYTES_PER_ELEMENT,ir=new Uint8Array(at.subarray(Xt,Vt)).buffer,wr=new Float64Array(ir);return dt.set(Vt),wr})(le,he,Fe.numValues);return new gv(be.name,Ue,rt)})(B,F,K,oe);default:throw new Error(`The specified data type for the field is currently not supported: ${Q}`)}})(A,l,t,p,s.scalarType,s):A!=1?null:(function(_,B,F,U){let Q=null,K=null,X=null,J=null,oe=!1;for(;!oe;){const rt=Kl(_,B);switch(rt.physicalStreamType){case Xa.LENGTH:Xc.DICTIONARY===rt.logicalStreamType.lengthType?Q=Jh(_,B,rt):X=Jh(_,B,rt);break;case Xa.DATA:vu.SINGLE===rt.logicalStreamType.dictionaryType||vu.SHARED===rt.logicalStreamType.dictionaryType?(K=_.subarray(B.get(),B.get()+rt.byteLength),oe=!0):J=_.subarray(B.get(),B.get()+rt.byteLength),B.add(rt.byteLength)}}const le=F.complexType.children,he=[];let be=0;for(const rt of le){const Fe=xa(_,B,1)[0];if(Fe==0)continue;const Ue=`${F.name}${rt.name==="default"?"":":"+rt.name}`;if(Fe!==2||rt.type!=="scalarField"||rt.scalarField.physicalType!==9)throw new Error("Currently only optional string fields are implemented for a struct.");const at=Kl(_,B),dt=Yp(_,at.numValues,B),Mt=Kl(_,B),Xt=Mt.decompressedCount!==U?bv(_,B,Mt,!1,new _u(dt,at.numValues)):ql(_,B,Mt,!1);he[be++]=J?new rb(Ue,Xt,Q,K,X,J,new _u(dt,at.numValues)):new kf(Ue,Xt,Q,K,new _u(dt,at.numValues))}return he})(l,t,s,p)}function Jp(l){return l instanceof _u}function a4(l){if(l.name==="id")return!1;if(l.type==="scalarType"){const t=l.scalarType;if(t.type==="physicalType")switch(t.physicalType){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:default:return!1;case 9:return!0}else if(t.type==="logicalType")return!1}else if(l.type==="complexType"){const t=l.complexType;if(t.type==="physicalType")switch(t.physicalType){case 0:case 1:return!0;default:return!1}}return console.warn("Unexpected column type in hasStreamCount",l),!1}const l4=new TextDecoder;function nb(l,t){const s=xa(l,t,1)[0];if(s===0)return"";const A=t.get(),p=l.subarray(A,A+s);return t.add(s),l4.decode(p)}function ib(l,t){const s=xa(l,t,1)[0]>>>0,A=!!(4&s),p=!!(2&s),v=xa(l,t,1)[0]>>>0,_={};if(1&s&&(_.nullable=!0),p){const B={};if(A?(B.type="logicalType",B.logicalType=v):(B.type="physicalType",B.physicalType=v),8&s){const F=xa(l,t,1)[0]>>>0;B.children=new Array(F);for(let U=0;U<F;U++)B.children[U]=ib(l,t)}_.type="complexField",_.complexField=B}else{const B={};A?(B.type="logicalType",B.logicalType=v):(B.type="physicalType",B.physicalType=v),_.type="scalarField",_.scalarField=B}return _}function c4(l,t){const s=xa(l,t,1)[0]>>>0,A=(function(p){switch(p){case 0:case 1:case 2:case 3:{const v={};v.nullable=!!(1&p),v.columnScope=0;const _={};return _.physicalType=p>1?6:4,_.type="physicalType",v.scalarType=_,v.type="scalarType",v}case 4:{const v={nullable:!1,columnScope:0},_={type:"physicalType",physicalType:0};return v.type="complexType",v.complexType=_,v}case 30:{const v={nullable:!1,columnScope:0},_={type:"physicalType",physicalType:1};return v.type="complexType",v.complexType=_,v}default:return(function(v){let _=null;switch(v){case 10:case 11:_=0;break;case 12:case 13:_=1;break;case 14:case 15:_=2;break;case 16:case 17:_=3;break;case 18:case 19:_=4;break;case 20:case 21:_=5;break;case 22:case 23:_=6;break;case 24:case 25:_=7;break;case 26:case 27:_=8;break;case 28:case 29:_=9;break;default:return null}const B={};B.nullable=!!(1&v),B.columnScope=0;const F={type:"physicalType"};return F.physicalType=_,B.type="scalarType",B.scalarType=F,B})(p)}})(s);if(!A)throw new Error(`Unsupported column type code: ${s}`);if((function(p){return p>=10})(s)?A.name=nb(l,t):s>=0&&s<=3?A.name="id":s===4&&(A.name="geometry"),(function(p){return p===30})(s)){const p=xa(l,t,1)[0]>>>0,v=A.complexType;v.children=new Array(p);for(let _=0;_<p;_++)v.children[_]=ib(l,t)}return A}function A4(l,t){const s={featureTables:[]},A={};A.name=nb(l,t);const p=xa(l,t,1)[0]>>>0,v=xa(l,t,1)[0]>>>0;A.columns=new Array(v);for(let _=0;_<v;_++)A.columns[_]=c4(l,t);return s.featureTables.push(A),[s,p]}function u4(l,t,s,A,p,v,_=!1){const B=t.scalarType.physicalType,F=Ig(p,v,l,s);if(B===4)switch(F){case ra.FLAT:{const U=ql(l,s,p,!1);return new mv(A,U,v)}case ra.SEQUENCE:{const U=Nx(l,s,p);return new yv(A,U[0],U[1],p.numRleValues)}case ra.CONST:{const U=xv(l,s,p,!1);return new vv(A,U,v)}}else switch(F){case ra.FLAT:{if(_){const Q=(function(K,X,J,oe){const le=(function(he,be,rt){const Fe=new Float64Array(be);for(let Ue=0;Ue<be;Ue++)Fe[Ue]=XT(he,rt);return Fe})(K,J.numValues,X);return(function(he,be,rt){switch(be.logicalLevelTechnique1){case qn.DELTA:return be.logicalLevelTechnique2===qn.RLE&&(he=Dx(he,be.runs,be.numRleValues)),(function(Fe){Fe[0]=Fe[0]%2==1?(Fe[0]+1)/-2:Fe[0]/2;const Ue=Fe.length/4*4;let at=1;if(Ue>=4)for(;at<Ue-4;at+=4){const dt=Fe[at],Mt=Fe[at+1],Xt=Fe[at+2],Vt=Fe[at+3];Fe[at]=(dt%2==1?(dt+1)/-2:dt/2)+Fe[at-1],Fe[at+1]=(Mt%2==1?(Mt+1)/-2:Mt/2)+Fe[at],Fe[at+2]=(Xt%2==1?(Xt+1)/-2:Xt/2)+Fe[at+1],Fe[at+3]=(Vt%2==1?(Vt+1)/-2:Vt/2)+Fe[at+2]}for(;at!=Fe.length;++at)Fe[at]=(Fe[at]%2==1?(Fe[at]+1)/-2:Fe[at]/2)+Fe[at-1]})(he),he;case qn.RLE:return(function(Fe,Ue,at){return Dx(Fe,Ue.runs,Ue.numRleValues)})(he,be);case qn.NONE:return he;default:throw new Error(`The specified Logical level technique is not supported: ${be.logicalLevelTechnique1}`)}})(le,J)})(l,s,p);return new gv(A,Q,v)}const U=Ox(l,s,p,!1);return new Hx(A,U,v)}case ra.SEQUENCE:{const U=Qx(l,s,p);return new jx(A,U[0],U[1],p.numRleValues)}case ra.CONST:{const U=zx(l,s,p,!1);return new Jx(A,U,v)}}throw new Error("Vector type not supported for id column.")}class h4{constructor(t,s){var A;switch(this._featureData=t,this.properties=this._featureData.properties||{},(A=this._featureData.geometry)===null||A===void 0?void 0:A.type){case na.POINT:case na.MULTIPOINT:this.type=1;break;case na.LINESTRING:case na.MULTILINESTRING:this.type=2;break;case na.POLYGON:case na.MULTIPOLYGON:this.type=3;break;default:this.type=0}this.extent=s,this.id=Number(this._featureData.id)}loadGeometry(){const t=[];for(const s of this._featureData.geometry.coordinates){const A=[];for(const p of s)A.push(new w(p.x,p.y));t.push(A)}return t}}class d4{constructor(t){this.features=[],this.featureTable=t,this.name=t.name,this.extent=t.extent,this.version=2,this.features=t.getFeatures(),this.length=this.features.length}feature(t){return new h4(this.features[t],this.extent)}}class sb{constructor(t){this.layers={};const s=(function(A,p,v=!0){const _=new ZT(0),B=[];for(;_.get()<A.length;){const F=xa(A,_,1)[0]>>>0,U=_.get()+F;if(U>A.length)throw new Error(`Block overruns tile: ${U} > ${A.length}`);if(xa(A,_,1)[0]>>>0!=1){_.set(U);continue}const Q=A4(A,_),K=Q[1],X=Q[0].featureTables[0];let J=null,oe=null;const le=[];let he=0;for(const rt of X.columns){const Fe=rt.name;if(Fe==="id"){let Ue=null;if(rt.nullable){const dt=Kl(A,_),Mt=_.get(),Xt=Yp(A,dt.numValues,_);_.set(Mt+dt.byteLength),Ue=new _u(Xt,dt.numValues)}const at=Kl(A,_);he=at.decompressedCount,J=u4(A,rt,_,Fe,at,Ue??he,v)}else if(Fe==="geometry"){const Ue=xa(A,_,1)[0];if(he===0){const at=_.get();he=Kl(A,_).decompressedCount,_.set(at)}oe=r4(A,Ue,_,he)}else{const Ue=a4(rt)?xa(A,_,1)[0]:1;if(Ue===0&&rt.type==="scalarType")continue;const at=o4(A,_,rt,Ue,he);if(at)if(Array.isArray(at))for(const dt of at)le.push(dt);else le.push(at)}}const be=new WT(X.name,oe,J,le,K);B.push(be),_.set(U)}return B})(new Uint8Array(t));this.layers=s.reduce(((A,p)=>Object.assign(Object.assign({},A),{[p.name]:new d4(p)})),{})}}class Vd{constructor(){this.minX=1/0,this.maxX=-1/0,this.minY=1/0,this.maxY=-1/0}extend(t){return this.minX=Math.min(this.minX,t.x),this.minY=Math.min(this.minY,t.y),this.maxX=Math.max(this.maxX,t.x),this.maxY=Math.max(this.maxY,t.y),this}expandBy(t){return this.minX-=t,this.minY-=t,this.maxX+=t,this.maxY+=t,(this.minX>this.maxX||this.minY>this.maxY)&&(this.minX=1/0,this.maxX=-1/0,this.minY=1/0,this.maxY=-1/0),this}shrinkBy(t){return this.expandBy(-t)}map(t){const s=new Vd;return s.extend(t(new w(this.minX,this.minY))),s.extend(t(new w(this.maxX,this.minY))),s.extend(t(new w(this.minX,this.maxY))),s.extend(t(new w(this.maxX,this.maxY))),s}static fromPoints(t){const s=new Vd;for(const A of t)s.extend(A);return s}contains(t){return t.x>=this.minX&&t.x<=this.maxX&&t.y>=this.minY&&t.y<=this.maxY}empty(){return this.minX>this.maxX}width(){return this.maxX-this.minX}height(){return this.maxY-this.minY}covers(t){return!this.empty()&&!t.empty()&&t.minX>=this.minX&&t.maxX<=this.maxX&&t.minY>=this.minY&&t.maxY<=this.maxY}intersects(t){return!this.empty()&&!t.empty()&&t.minX<=this.maxX&&t.maxX>=this.minX&&t.minY<=this.maxY&&t.maxY>=this.minY}}class f4{constructor(t,s){this.feature=t,this.type=t.type,this.properties=t.tags?t.tags:{},this.extent=s,"id"in t&&(typeof t.id=="string"?this.id=parseInt(t.id,10):typeof t.id!="number"||isNaN(t.id)||(this.id=t.id))}loadGeometry(){const t=[],s=this.feature.type===1?[this.feature.geometry]:this.feature.geometry;for(const A of s){const p=[];for(const v of A)p.push(new w(v[0],v[1]));t.push(p)}return t}}const em="_geojsonTileLayer";function p4(l,t){t.writeVarintField(15,l.version||1),t.writeStringField(1,l.name||""),t.writeVarintField(5,l.extent||4096);const s={keys:[],values:[],keycache:{},valuecache:{}};for(let v=0;v<l.length;v++)s.feature=l.feature(v),t.writeMessage(2,m4,s);const A=s.keys;for(const v of A)t.writeStringField(3,v);const p=s.values;for(const v of p)t.writeMessage(4,v4,v)}function m4(l,t){if(!l.feature)return;const s=l.feature;s.id!==void 0&&t.writeVarintField(1,s.id),t.writeMessage(2,g4,l),t.writeVarintField(3,s.type),t.writeMessage(4,y4,s)}function g4(l,t){for(const s in l.feature?.properties){let A=l.feature.properties[s],p=l.keycache[s];if(A===null)continue;p===void 0&&(l.keys.push(s),p=l.keys.length-1,l.keycache[s]=p),t.writeVarint(p),typeof A!="string"&&typeof A!="boolean"&&typeof A!="number"&&(A=JSON.stringify(A));const v=typeof A+":"+A;let _=l.valuecache[v];_===void 0&&(l.values.push(A),_=l.values.length-1,l.valuecache[v]=_),t.writeVarint(_)}}function Pv(l,t){return(t<<3)+(7&l)}function ob(l){return l<<1^l>>31}function y4(l,t){const s=l.loadGeometry(),A=l.type;let p=0,v=0;for(const _ of s){let B=1;A===1&&(B=_.length),t.writeVarint(Pv(1,B));const F=A===3?_.length-1:_.length;for(let U=0;U<F;U++){U===1&&A!==1&&t.writeVarint(Pv(2,F-1));const Q=_[U].x-p,K=_[U].y-v;t.writeVarint(ob(Q)),t.writeVarint(ob(K)),p+=Q,v+=K}l.type===3&&t.writeVarint(Pv(7,1))}}function v4(l,t){const s=typeof l;s==="string"?t.writeStringField(1,l):s==="boolean"?t.writeBooleanField(7,l):s==="number"&&(l%1!=0?t.writeDoubleField(3,l):l<0?t.writeSVarintField(6,l):t.writeVarintField(5,l))}class ab{constructor(t,s){this.tileID=t,this.x=t.canonical.x,this.y=t.canonical.y,this.z=t.canonical.z,this.grid=new Re(Ne,16,0),this.grid3D=new Re(Ne,16,0),this.featureIndexArray=new ne,this.promoteId=s}insert(t,s,A,p,v,_){const B=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(A,p,v);const F=_?this.grid3D:this.grid;for(let U=0;U<s.length;U++){const Q=s[U],K=[1/0,1/0,-1/0,-1/0];for(let X=0;X<Q.length;X++){const J=Q[X];K[0]=Math.min(K[0],J.x),K[1]=Math.min(K[1],J.y),K[2]=Math.max(K[2],J.x),K[3]=Math.max(K[3],J.y)}K[0]<Ne&&K[1]<Ne&&K[2]>=0&&K[3]>=0&&F.insert(B,K[0],K[1],K[2],K[3])}}loadVTLayers(){return this.vtLayers||(this.vtLayers=this.encoding!=="mlt"?new wf(new qu(this.rawTileData)).layers:new sb(this.rawTileData).layers,this.sourceLayerCoder=new Ix(this.vtLayers?Object.keys(this.vtLayers).sort():[em])),this.vtLayers}query(t,s,A,p){this.loadVTLayers();const v=t.params,_=Ne/t.tileSize/t.scale,B=dc(v.filter,v.globalState),F=t.queryGeometry,U=t.queryPadding*_,Q=Vd.fromPoints(F),K=this.grid.query(Q.minX-U,Q.minY-U,Q.maxX+U,Q.maxY+U),X=Vd.fromPoints(t.cameraQueryGeometry).expandBy(U),J=this.grid3D.query(X.minX,X.minY,X.maxX,X.maxY,((he,be,rt,Fe)=>(function(Ue,at,dt,Mt,Xt){for(const ir of Ue)if(at<=ir.x&&dt<=ir.y&&Mt>=ir.x&&Xt>=ir.y)return!0;const Vt=[new w(at,dt),new w(at,Xt),new w(Mt,Xt),new w(Mt,dt)];if(Ue.length>2){for(const ir of Vt)if(fh(Ue,ir))return!0}for(let ir=0;ir<Ue.length-1;ir++)if(Fp(Ue[ir],Ue[ir+1],Vt))return!0;return!1})(t.cameraQueryGeometry,he-U,be-U,rt+U,Fe+U)));for(const he of J)K.push(he);K.sort(_4);const oe={};let le;for(let he=0;he<K.length;he++){const be=K[he];if(be===le)continue;le=be;const rt=this.featureIndexArray.get(be);let Fe=null;this.loadMatchingFeature(oe,rt.bucketIndex,rt.sourceLayerIndex,rt.featureIndex,B,v.layers,v.availableImages,s,A,p,((Ue,at,dt)=>(Fe||(Fe=KA(Ue)),at.queryIntersectsFeature({queryGeometry:F,feature:Ue,featureState:dt,geometry:Fe,zoom:this.z,transform:t.transform,pixelsToTileUnits:_,pixelPosMatrix:t.pixelPosMatrix,unwrappedTileID:this.tileID.toUnwrapped(),getElevation:t.getElevation}))))}return oe}loadMatchingFeature(t,s,A,p,v,_,B,F,U,Q,K){const X=this.bucketLayerIDs[s];if(_&&!X.some((he=>_.has(he))))return;const J=this.sourceLayerCoder.decode(A),oe=this.vtLayers[J].feature(p);if(v.needGeometry){const he=qA(oe,!0);if(!v.filter(new Mr(this.tileID.overscaledZ),he,this.tileID.canonical))return}else if(!v.filter(new Mr(this.tileID.overscaledZ),oe))return;const le=this.getId(oe,J);for(let he=0;he<X.length;he++){const be=X[he];if(_&&!_.has(be))continue;const rt=F[be];if(!rt)continue;let Fe={};le&&Q&&(Fe=Q.getState(rt.sourceLayer||em,le));const Ue=_t({},U[be]);Ue.paint=lb(Ue.paint,rt.paint,oe,Fe,B),Ue.layout=lb(Ue.layout,rt.layout,oe,Fe,B);const at=!K||K(oe,rt,Fe);if(!at)continue;const dt=new Tx(oe,this.z,this.x,this.y,le);dt.layer=Ue;let Mt=t[be];Mt===void 0&&(Mt=t[be]=[]),Mt.push({featureIndex:p,feature:dt,intersectionZ:at})}}lookupSymbolFeatures(t,s,A,p,v,_,B,F){const U={};this.loadVTLayers();const Q=dc(v.filterSpec,v.globalState);for(const K of t)this.loadMatchingFeature(U,A,p,K,Q,_,B,F,s);return U}hasLayer(t){for(const s of this.bucketLayerIDs)for(const A of s)if(t===A)return!0;return!1}getId(t,s){var A;let p=t.id;return this.promoteId&&(p=t.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[s]],typeof p=="boolean"&&(p=Number(p)),p===void 0&&(!((A=t.properties)===null||A===void 0)&&A.cluster)&&this.promoteId&&(p=Number(t.properties.cluster_id))),p}}function lb(l,t,s,A,p){return Tt(l,((v,_)=>{const B=t instanceof Yn?t.get(_):null;return B&&B.evaluate?B.evaluate(s,A,p):B}))}function _4(l,t){return t-l}function cb(l,t,s,A,p){const v=[];for(let _=0;_<l.length;_++){const B=l[_];let F;for(let U=0;U<B.length-1;U++){let Q=B[U],K=B[U+1];Q.x<t&&K.x<t||(Q.x<t?Q=new w(t,Q.y+(t-Q.x)/(K.x-Q.x)*(K.y-Q.y))._round():K.x<t&&(K=new w(t,Q.y+(t-Q.x)/(K.x-Q.x)*(K.y-Q.y))._round()),Q.y<s&&K.y<s||(Q.y<s?Q=new w(Q.x+(s-Q.y)/(K.y-Q.y)*(K.x-Q.x),s)._round():K.y<s&&(K=new w(Q.x+(s-Q.y)/(K.y-Q.y)*(K.x-Q.x),s)._round()),Q.x>=A&&K.x>=A||(Q.x>=A?Q=new w(A,Q.y+(A-Q.x)/(K.x-Q.x)*(K.y-Q.y))._round():K.x>=A&&(K=new w(A,Q.y+(A-Q.x)/(K.x-Q.x)*(K.y-Q.y))._round()),Q.y>=p&&K.y>=p||(Q.y>=p?Q=new w(Q.x+(p-Q.y)/(K.y-Q.y)*(K.x-Q.x),p)._round():K.y>=p&&(K=new w(Q.x+(p-Q.y)/(K.y-Q.y)*(K.x-Q.x),p)._round()),F&&Q.equals(F[F.length-1])||(F=[Q],v.push(F)),F.push(K)))))}}return v}function Ab(l,t,s,A,p){switch(t){case 1:return(function(v,_,B,F){const U=[];for(const Q of v)for(const K of Q){const X=F===0?K.x:K.y;X>=_&&X<=B&&U.push([K])}return U})(l,s,A,p);case 2:return ub(l,s,A,p,!1);case 3:return ub(l,s,A,p,!0)}return[]}function w4(l,t,s,A,p){const v=A===0?x4:b4;let _=[];const B=[];for(let Q=0;Q<l.length-1;Q++){const K=l[Q],X=l[Q+1],J=A===0?K.x:K.y,oe=A===0?X.x:X.y;let le=!1;J<t?oe>t&&_.push(v(K,X,t)):J>s?oe<s&&_.push(v(K,X,s)):_.push(K),oe<t&&J>=t&&(_.push(v(K,X,t)),le=!0),oe>s&&J<=s&&(_.push(v(K,X,s)),le=!0),!p&&le&&(B.push(_),_=[])}const F=l.length-1,U=A===0?l[F].x:l[F].y;return U>=t&&U<=s&&_.push(l[F]),p&&_.length>0&&!_[0].equals(_[_.length-1])&&_.push(new w(_[0].x,_[0].y)),_.length>0&&B.push(_),B}function ub(l,t,s,A,p){const v=[];for(const _ of l){const B=w4(_,t,s,A,p);B.length>0&&v.push(...B)}return v}function x4(l,t,s){return new w(s,l.y+(s-l.x)/(t.x-l.x)*(t.y-l.y))}function b4(l,t,s){return new w(l.x+(s-l.y)/(t.y-l.y)*(t.x-l.x),s)}$e("FeatureIndex",ab,{omit:["rawTileData","sourceLayerCoder"]});class ed extends w{constructor(t,s,A,p){super(t,s),this.angle=A,p!==void 0&&(this.segment=p)}clone(){return new ed(this.x,this.y,this.angle,this.segment)}}function hb(l,t,s,A,p){if(t.segment===void 0||s===0)return!0;let v=t,_=t.segment+1,B=0;for(;B>-s/2;){if(_--,_<0)return!1;B-=l[_].dist(v),v=l[_]}B+=l[_].dist(l[_+1]),_++;const F=[];let U=0;for(;B<s/2;){const Q=l[_],K=l[_+1];if(!K)return!1;let X=l[_-1].angleTo(Q)-Q.angleTo(K);for(X=Math.abs((X+3*Math.PI)%(2*Math.PI)-Math.PI),F.push({distance:B,angleDelta:X}),U+=X;B-F[0].distance>A;)U-=F.shift().angleDelta;if(U>p)return!1;_++,B+=Q.dist(K)}return!0}function db(l){let t=0;for(let s=0;s<l.length-1;s++)t+=l[s].dist(l[s+1]);return t}function fb(l,t,s){return l?.6*t*s:0}function pb(l,t){return Math.max(l?l.right-l.left:0,t?t.right-t.left:0)}function B4(l,t,s,A,p,v){const _=fb(s,p,v),B=pb(s,A)*v;let F=0;const U=db(l)/2;for(let Q=0;Q<l.length-1;Q++){const K=l[Q],X=l[Q+1],J=K.dist(X);if(F+J>U){const oe=(U-F)/J,le=Br.number(K.x,X.x,oe),he=Br.number(K.y,X.y,oe),be=new ed(le,he,X.angleTo(K),Q);return be._round(),!_||hb(l,be,B,_,t)?be:void 0}F+=J}}function C4(l,t,s,A,p,v,_,B,F){const U=fb(A,v,_),Q=pb(A,p),K=Q*_,X=l[0].x===0||l[0].x===F||l[0].y===0||l[0].y===F;return t-K<t/4&&(t=K+t/4),mb(l,X?t/2*B%t:(Q/2+2*v)*_*B%t,t,U,s,K,X,!1,F)}function mb(l,t,s,A,p,v,_,B,F){const U=v/2,Q=db(l);let K=0,X=t-s,J=[];for(let oe=0;oe<l.length-1;oe++){const le=l[oe],he=l[oe+1],be=le.dist(he),rt=he.angleTo(le);for(;X+s<K+be;){X+=s;const Fe=(X-K)/be,Ue=Br.number(le.x,he.x,Fe),at=Br.number(le.y,he.y,Fe);if(Ue>=0&&Ue<F&&at>=0&&at<F&&X-U>=0&&X+U<=Q){const dt=new ed(Ue,at,rt,oe);dt._round(),A&&!hb(l,dt,v,A,p)||J.push(dt)}}K+=be}return B||J.length||_||(J=mb(l,K/2,s,A,p,v,_,!0,F)),J}function gb(l,t,s,A){const p=[],v=l.image,_=v.pixelRatio,B=v.paddedRect.w-2,F=v.paddedRect.h-2;let U={x1:l.left,y1:l.top,x2:l.right,y2:l.bottom};const Q=v.stretchX||[[0,B]],K=v.stretchY||[[0,F]],X=(Ot,Lr)=>Ot+Lr[1]-Lr[0],J=Q.reduce(X,0),oe=K.reduce(X,0),le=B-J,he=F-oe;let be=0,rt=J,Fe=0,Ue=oe,at=0,dt=le,Mt=0,Xt=he;if(v.content&&A){const Ot=v.content,Lr=Ot[2]-Ot[0],Ir=Ot[3]-Ot[1];(v.textFitWidth||v.textFitHeight)&&(U=Po(l)),be=Mg(Q,0,Ot[0]),Fe=Mg(K,0,Ot[1]),rt=Mg(Q,Ot[0],Ot[2]),Ue=Mg(K,Ot[1],Ot[3]),at=Ot[0]-be,Mt=Ot[1]-Fe,dt=Lr-rt,Xt=Ir-Ue}const Vt=U.x1,ir=U.y1,wr=U.x2-Vt,ar=U.y2-ir,$t=(Ot,Lr,Ir,Ur)=>{const Sr=kg(Ot.stretch-be,rt,wr,Vt),Jr=Ug(Ot.fixed-at,dt,Ot.stretch,J),ri=kg(Lr.stretch-Fe,Ue,ar,ir),Gn=Ug(Lr.fixed-Mt,Xt,Lr.stretch,oe),ps=kg(Ir.stretch-be,rt,wr,Vt),Ja=Ug(Ir.fixed-at,dt,Ir.stretch,J),wo=kg(Ur.stretch-Fe,Ue,ar,ir),ms=Ug(Ur.fixed-Mt,Xt,Ur.stretch,oe),As=new w(Sr,ri),Bi=new w(ps,ri),js=new w(ps,wo),io=new w(Sr,wo),ts=new w(Jr/_,Gn/_),wc=new w(Ja/_,ms/_),el=t*Math.PI/180;if(el){const ia=Math.sin(el),Ls=Math.cos(el),xo=[Ls,-ia,ia,Ls];As._matMult(xo),Bi._matMult(xo),io._matMult(xo),js._matMult(xo)}const xc=Ot.stretch+Ot.fixed,YA=Lr.stretch+Lr.fixed;return{tl:As,tr:Bi,bl:io,br:js,tex:{x:v.paddedRect.x+1+xc,y:v.paddedRect.y+1+YA,w:Ir.stretch+Ir.fixed-xc,h:Ur.stretch+Ur.fixed-YA},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:ts,pixelOffsetBR:wc,minFontScaleX:dt/_/wr,minFontScaleY:Xt/_/ar,isSDF:s}};if(A&&(v.stretchX||v.stretchY)){const Ot=yb(Q,le,J),Lr=yb(K,he,oe);for(let Ir=0;Ir<Ot.length-1;Ir++){const Ur=Ot[Ir],Sr=Ot[Ir+1];for(let Jr=0;Jr<Lr.length-1;Jr++)p.push($t(Ur,Lr[Jr],Sr,Lr[Jr+1]))}}else p.push($t({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:B+1},{fixed:0,stretch:F+1}));return p}function Mg(l,t,s){let A=0;for(const p of l)A+=Math.max(t,Math.min(s,p[1]))-Math.max(t,Math.min(s,p[0]));return A}function yb(l,t,s){const A=[{fixed:-1,stretch:0}];for(const[p,v]of l){const _=A[A.length-1];A.push({fixed:p-_.stretch,stretch:_.stretch}),A.push({fixed:p-_.stretch,stretch:_.stretch+(v-p)})}return A.push({fixed:t+1,stretch:s}),A}function kg(l,t,s,A){return l/t*s+A}function Ug(l,t,s,A){return l-t*s/A}$e("Anchor",ed);class Dg{constructor(t,s,A,p,v,_,B,F,U,Q){var K;if(this.boxStartIndex=t.length,U){let X=_.top,J=_.bottom;const oe=_.collisionPadding;oe&&(X-=oe[1],J+=oe[3]);let le=J-X;le>0&&(le=Math.max(10,le),this.circleDiameter=le)}else{const X=!((K=_.image)===null||K===void 0)&&K.content&&(_.image.textFitWidth||_.image.textFitHeight)?Po(_):{x1:_.left,y1:_.top,x2:_.right,y2:_.bottom};X.y1=X.y1*B-F[0],X.y2=X.y2*B+F[2],X.x1=X.x1*B-F[3],X.x2=X.x2*B+F[1];const J=_.collisionPadding;if(J&&(X.x1-=J[0]*B,X.y1-=J[1]*B,X.x2+=J[2]*B,X.y2+=J[3]*B),Q){const oe=new w(X.x1,X.y1),le=new w(X.x2,X.y1),he=new w(X.x1,X.y2),be=new w(X.x2,X.y2),rt=Q*Math.PI/180;oe._rotate(rt),le._rotate(rt),he._rotate(rt),be._rotate(rt),X.x1=Math.min(oe.x,le.x,he.x,be.x),X.x2=Math.max(oe.x,le.x,he.x,be.x),X.y1=Math.min(oe.y,le.y,he.y,be.y),X.y2=Math.max(oe.y,le.y,he.y,be.y)}t.emplaceBack(s.x,s.y,X.x1,X.y1,X.x2,X.y2,A,p,v)}this.boxEndIndex=t.length}}class E4{constructor(t=[],s=(A,p)=>A<p?-1:A>p?1:0){if(this.data=t,this.length=this.data.length,this.compare=s,this.length>0)for(let A=(this.length>>1)-1;A>=0;A--)this._down(A)}push(t){this.data.push(t),this._up(this.length++)}pop(){if(this.length===0)return;const t=this.data[0],s=this.data.pop();return--this.length>0&&(this.data[0]=s,this._down(0)),t}peek(){return this.data[0]}_up(t){const{data:s,compare:A}=this,p=s[t];for(;t>0;){const v=t-1>>1,_=s[v];if(A(p,_)>=0)break;s[t]=_,t=v}s[t]=p}_down(t){const{data:s,compare:A}=this,p=this.length>>1,v=s[t];for(;t<p;){let _=1+(t<<1);const B=_+1;if(B<this.length&&A(s[B],s[_])<0&&(_=B),A(s[_],v)>=0)break;s[t]=s[_],t=_}s[t]=v}}function S4(l,t=1,s=!1){const A=Vd.fromPoints(l[0]),p=Math.min(A.width(),A.height());let v=p/2;const _=new E4([],F4),{minX:B,minY:F,maxX:U,maxY:Q}=A;if(p===0)return new w(B,F);for(let J=B;J<U;J+=p)for(let oe=F;oe<Q;oe+=p)_.push(new Uf(J+v,oe+v,v,l));let K=(function(J){let oe=0,le=0,he=0;const be=J[0];for(let rt=0,Fe=be.length,Ue=Fe-1;rt<Fe;Ue=rt++){const at=be[rt],dt=be[Ue],Mt=at.x*dt.y-dt.x*at.y;le+=(at.x+dt.x)*Mt,he+=(at.y+dt.y)*Mt,oe+=3*Mt}return new Uf(le/oe,he/oe,0,J)})(l),X=_.length;for(;_.length;){const J=_.pop();(J.d>K.d||!K.d)&&(K=J,s&&console.log("found best %d after %d probes",Math.round(1e4*J.d)/1e4,X)),J.max-K.d<=t||(v=J.h/2,_.push(new Uf(J.p.x-v,J.p.y-v,v,l)),_.push(new Uf(J.p.x+v,J.p.y-v,v,l)),_.push(new Uf(J.p.x-v,J.p.y+v,v,l)),_.push(new Uf(J.p.x+v,J.p.y+v,v,l)),X+=4)}return s&&(console.log(`num probes: ${X}`),console.log(`best distance: ${K.d}`)),K.p}function F4(l,t){return t.max-l.max}function Uf(l,t,s,A){this.p=new w(l,t),this.h=s,this.d=(function(p,v){let _=!1,B=1/0;for(let F=0;F<v.length;F++){const U=v[F];for(let Q=0,K=U.length,X=K-1;Q<K;X=Q++){const J=U[Q],oe=U[X];J.y>p.y!=oe.y>p.y&&p.x<(oe.x-J.x)*(p.y-J.y)/(oe.y-J.y)+J.x&&(_=!_),B=Math.min(B,Td(p,J,oe))}}return(_?1:-1)*Math.sqrt(B)})(this.p,A),this.max=this.d+this.h*Math.SQRT2}var Ya;m.aQ=void 0,(Ya=m.aQ||(m.aQ={}))[Ya.center=1]="center",Ya[Ya.left=2]="left",Ya[Ya.right=3]="right",Ya[Ya.top=4]="top",Ya[Ya.bottom=5]="bottom",Ya[Ya["top-left"]=6]="top-left",Ya[Ya["top-right"]=7]="top-right",Ya[Ya["bottom-left"]=8]="bottom-left",Ya[Ya["bottom-right"]=9]="bottom-right";const Lv=Number.POSITIVE_INFINITY;function vb(l,t){return t[1]!==Lv?(function(s,A,p){let v=0,_=0;switch(A=Math.abs(A),p=Math.abs(p),s){case"top-right":case"top-left":case"top":_=p-7;break;case"bottom-right":case"bottom-left":case"bottom":_=7-p}switch(s){case"top-right":case"bottom-right":case"right":v=-A;break;case"top-left":case"bottom-left":case"left":v=A}return[v,_]})(l,t[0],t[1]):(function(s,A){let p=0,v=0;A<0&&(A=0);const _=A/Math.SQRT2;switch(s){case"top-right":case"top-left":v=_-7;break;case"bottom-right":case"bottom-left":v=7-_;break;case"bottom":v=7-A;break;case"top":v=A-7}switch(s){case"top-right":case"bottom-right":p=-_;break;case"top-left":case"bottom-left":p=_;break;case"left":p=A;break;case"right":p=-A}return[p,v]})(l,t[0])}function _b(l,t,s){var A;const p=l.layout,v=(A=p.get("text-variable-anchor-offset"))===null||A===void 0?void 0:A.evaluate(t,{},s);if(v){const B=v.values,F=[];for(let U=0;U<B.length;U+=2){const Q=F[U]=B[U],K=B[U+1].map((X=>X*Hs));Q.startsWith("top")?K[1]-=7:Q.startsWith("bottom")&&(K[1]+=7),F[U+1]=K}return new Wi(F)}const _=p.get("text-variable-anchor");if(_){let B;B=l._unevaluatedLayout.getValue("text-radial-offset")!==void 0?[p.get("text-radial-offset").evaluate(t,{},s)*Hs,Lv]:p.get("text-offset").evaluate(t,{},s).map((U=>U*Hs));const F=[];for(const U of _)F.push(U,vb(U,B));return new Wi(F)}return null}function Mv(l){switch(l){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function I4(l,t,s,A,p,v,_,B,F,U,Q,K){let X=v.textMaxSize.evaluate(t,{});X===void 0&&(X=_);const J=l.layers[0].layout,oe=J.get("icon-offset").evaluate(t,{},Q),le=xb(s.horizontal),he=_/24,be=l.tilePixelRatio*he,rt=l.tilePixelRatio*X/24,Fe=l.tilePixelRatio*B,Ue=l.tilePixelRatio*J.get("symbol-spacing"),at=J.get("text-padding")*l.tilePixelRatio,dt=(function(Ir,Ur,Sr,Jr=1){const ri=Ir.get("icon-padding").evaluate(Ur,{},Sr),Gn=ri&&ri.values;return[Gn[0]*Jr,Gn[1]*Jr,Gn[2]*Jr,Gn[3]*Jr]})(J,t,Q,l.tilePixelRatio),Mt=J.get("text-max-angle")/180*Math.PI,Xt=J.get("text-rotation-alignment")!=="viewport"&&J.get("symbol-placement")!=="point",Vt=J.get("icon-rotation-alignment")==="map"&&J.get("symbol-placement")!=="point",ir=J.get("symbol-placement"),wr=Ue/2,ar=J.get("icon-text-fit");let $t;A&&ar!=="none"&&(l.allowVerticalPlacement&&s.vertical&&($t=vi(A,s.vertical,ar,J.get("icon-text-fit-padding"),oe,he)),le&&(A=vi(A,le,ar,J.get("icon-text-fit-padding"),oe,he)));const Ot=Q?K.line.getGranularityForZoomLevel(Q.z):1,Lr=(Ir,Ur)=>{Ur.x<0||Ur.x>=Ne||Ur.y<0||Ur.y>=Ne||(function(Sr,Jr,ri,Gn,ps,Ja,wo,ms,As,Bi,js,io,ts,wc,el,xc,YA,ia,Ls,xo,Vs,sa,Th,wu,nm){const td=Sr.addToLineVertexArray(Jr,ri);let Gd,Df,Rf,Nf,Eb=0,Sb=0,Fb=0,Ib=0,zv=-1,Hv=-1;const Ph={};let Tb=Gi("");if(Sr.allowVerticalPlacement&&Gn.vertical){const wl=ms.layout.get("text-rotate").evaluate(Vs,{},wu)+90;Rf=new Dg(As,Jr,Bi,js,io,Gn.vertical,ts,wc,el,wl),wo&&(Nf=new Dg(As,Jr,Bi,js,io,wo,YA,ia,el,wl))}if(ps){const wl=ms.layout.get("icon-rotate").evaluate(Vs,{}),xA=ms.layout.get("icon-text-fit")!=="none",Kd=gb(ps,wl,Th,xA),bu=wo?gb(wo,wl,Th,xA):void 0;Df=new Dg(As,Jr,Bi,js,io,ps,YA,ia,!1,wl),Eb=4*Kd.length;const qd=Sr.iconSizeData;let Wu=null;qd.kind==="source"?(Wu=[Za*ms.layout.get("icon-size").evaluate(Vs,{})],Wu[0]>$u&&_r(`${Sr.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)):qd.kind==="composite"&&(Wu=[Za*sa.compositeIconSizes[0].evaluate(Vs,{},wu),Za*sa.compositeIconSizes[1].evaluate(Vs,{},wu)],(Wu[0]>$u||Wu[1]>$u)&&_r(`${Sr.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)),Sr.addSymbols(Sr.icon,Kd,Wu,xo,Ls,Vs,m.aA.none,Jr,td.lineStartIndex,td.lineLength,-1,wu),zv=Sr.icon.placedSymbolArray.length-1,bu&&(Sb=4*bu.length,Sr.addSymbols(Sr.icon,bu,Wu,xo,Ls,Vs,m.aA.vertical,Jr,td.lineStartIndex,td.lineLength,-1,wu),Hv=Sr.icon.placedSymbolArray.length-1)}const Pb=Object.keys(Gn.horizontal);for(const wl of Pb){const xA=Gn.horizontal[wl];if(!Gd){Tb=Gi(xA.text);const bu=ms.layout.get("text-rotate").evaluate(Vs,{},wu);Gd=new Dg(As,Jr,Bi,js,io,xA,ts,wc,el,bu)}const Kd=xA.positionedLines.length===1;if(Fb+=wb(Sr,Jr,xA,Ja,ms,el,Vs,xc,td,Gn.vertical?m.aA.horizontal:m.aA.horizontalOnly,Kd?Pb:[wl],Ph,zv,sa,wu),Kd)break}Gn.vertical&&(Ib+=wb(Sr,Jr,Gn.vertical,Ja,ms,el,Vs,xc,td,m.aA.vertical,["vertical"],Ph,Hv,sa,wu));const L4=Gd?Gd.boxStartIndex:Sr.collisionBoxArray.length,M4=Gd?Gd.boxEndIndex:Sr.collisionBoxArray.length,k4=Rf?Rf.boxStartIndex:Sr.collisionBoxArray.length,U4=Rf?Rf.boxEndIndex:Sr.collisionBoxArray.length,D4=Df?Df.boxStartIndex:Sr.collisionBoxArray.length,R4=Df?Df.boxEndIndex:Sr.collisionBoxArray.length,N4=Nf?Nf.boxStartIndex:Sr.collisionBoxArray.length,Q4=Nf?Nf.boxEndIndex:Sr.collisionBoxArray.length;let xu=-1;const Ng=(wl,xA)=>wl&&wl.circleDiameter?Math.max(wl.circleDiameter,xA):xA;xu=Ng(Gd,xu),xu=Ng(Rf,xu),xu=Ng(Df,xu),xu=Ng(Nf,xu);const Lb=xu>-1?1:0;Lb&&(xu*=nm/Hs),Sr.glyphOffsetArray.length>=If.MAX_GLYPHS&&_r("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),Vs.sortKey!==void 0&&Sr.addToSortKeyRanges(Sr.symbolInstances.length,Vs.sortKey);const O4=_b(ms,Vs,wu),[z4,H4]=(function(wl,xA){const Kd=wl.length,bu=xA?.values;if(bu?.length>0)for(let qd=0;qd<bu.length;qd+=2){const Wu=bu[qd+1];wl.emplaceBack(m.aQ[bu[qd]],Wu[0],Wu[1])}return[Kd,wl.length]})(Sr.textAnchorOffsets,O4);Sr.symbolInstances.emplaceBack(Jr.x,Jr.y,Ph.right>=0?Ph.right:-1,Ph.center>=0?Ph.center:-1,Ph.left>=0?Ph.left:-1,Ph.vertical||-1,zv,Hv,Tb,L4,M4,k4,U4,D4,R4,N4,Q4,Bi,Fb,Ib,Eb,Sb,Lb,0,ts,xu,z4,H4)})(l,Ur,Ir,s,A,p,$t,l.layers[0],l.collisionBoxArray,t.index,t.sourceLayerIndex,l.index,be,[at,at,at,at],Xt,F,Fe,dt,Vt,oe,t,v,U,Q,_)};if(ir==="line")for(const Ir of cb(t.geometry,0,0,Ne,Ne)){const Ur=XA(Ir,Ot),Sr=C4(Ur,Ue,Mt,s.vertical||le,A,24,rt,l.overscaling,Ne);for(const Jr of Sr)le&&T4(l,le.text,wr,Jr)||Lr(Ur,Jr)}else if(ir==="line-center"){for(const Ir of t.geometry)if(Ir.length>1){const Ur=XA(Ir,Ot),Sr=B4(Ur,Mt,s.vertical||le,A,24,rt);Sr&&Lr(Ur,Sr)}}else if(t.type==="Polygon")for(const Ir of Ma(t.geometry,0)){const Ur=S4(Ir,16);Lr(XA(Ir[0],Ot,!0),new ed(Ur.x,Ur.y,0))}else if(t.type==="LineString")for(const Ir of t.geometry){const Ur=XA(Ir,Ot);Lr(Ur,new ed(Ur[0].x,Ur[0].y,0))}else if(t.type==="Point")for(const Ir of t.geometry)for(const Ur of Ir)Lr([Ur],new ed(Ur.x,Ur.y,0))}function wb(l,t,s,A,p,v,_,B,F,U,Q,K,X,J,oe){const le=(function(rt,Fe,Ue,at,dt,Mt,Xt,Vt){const ir=at.layout.get("text-rotate").evaluate(Mt,{})*Math.PI/180,wr=[];for(const ar of Fe.positionedLines)for(const $t of ar.positionedGlyphs){if(!$t.rect)continue;const Ot=$t.rect||{};let Lr=4,Ir=!0,Ur=1,Sr=0;const Jr=(dt||Vt)&&$t.vertical,ri=$t.metrics.advance*$t.scale/2;if(Vt&&Fe.verticalizable&&(Sr=ar.lineOffset/2-($t.imageName?-(Hs-$t.metrics.width*$t.scale)/2:($t.scale-1)*Hs)),$t.imageName){const ia=Xt[$t.imageName];Ir=ia.sdf,Ur=ia.pixelRatio,Lr=1/Ur}const Gn=dt?[$t.x+ri,$t.y]:[0,0];let ps=dt?[0,0]:[$t.x+ri+Ue[0],$t.y+Ue[1]-Sr],Ja=[0,0];Jr&&(Ja=ps,ps=[0,0]);const wo=$t.metrics.isDoubleResolution?2:1,ms=($t.metrics.left-Lr)*$t.scale-ri+ps[0],As=(-$t.metrics.top-Lr)*$t.scale+ps[1],Bi=ms+Ot.w/wo*$t.scale/Ur,js=As+Ot.h/wo*$t.scale/Ur,io=new w(ms,As),ts=new w(Bi,As),wc=new w(ms,js),el=new w(Bi,js);if(Jr){const ia=new w(-ri,ri- -17),Ls=-Math.PI/2,xo=12-ri,Vs=new w(22-xo,-($t.imageName?xo:0)),sa=new w(...Ja);io._rotateAround(Ls,ia)._add(Vs)._add(sa),ts._rotateAround(Ls,ia)._add(Vs)._add(sa),wc._rotateAround(Ls,ia)._add(Vs)._add(sa),el._rotateAround(Ls,ia)._add(Vs)._add(sa)}if(ir){const ia=Math.sin(ir),Ls=Math.cos(ir),xo=[Ls,-ia,ia,Ls];io._matMult(xo),ts._matMult(xo),wc._matMult(xo),el._matMult(xo)}const xc=new w(0,0),YA=new w(0,0);wr.push({tl:io,tr:ts,bl:wc,br:el,tex:Ot,writingMode:Fe.writingMode,glyphOffset:Gn,sectionIndex:$t.sectionIndex,isSDF:Ir,pixelOffsetTL:xc,pixelOffsetBR:YA,minFontScaleX:0,minFontScaleY:0})}return wr})(0,s,B,p,v,_,A,l.allowVerticalPlacement),he=l.textSizeData;let be=null;he.kind==="source"?(be=[Za*p.layout.get("text-size").evaluate(_,{})],be[0]>$u&&_r(`${l.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)):he.kind==="composite"&&(be=[Za*J.compositeTextSizes[0].evaluate(_,{},oe),Za*J.compositeTextSizes[1].evaluate(_,{},oe)],(be[0]>$u||be[1]>$u)&&_r(`${l.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)),l.addSymbols(l.text,le,be,B,v,_,U,t,F.lineStartIndex,F.lineLength,X,oe);for(const rt of Q)K[rt]=l.text.placedSymbolArray.length-1;return 4*le.length}function xb(l){for(const t in l)return l[t];return null}function T4(l,t,s,A){const p=l.compareText;if(t in p){const v=p[t];for(let _=v.length-1;_>=0;_--)if(A.dist(v[_])<s)return!0}else p[t]=[];return p[t].push(A),!1}const bb=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class kv{static from(t){if(!(t instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[s,A]=new Uint8Array(t,0,2);if(s!==219)throw new Error("Data does not appear to be in a KDBush format.");const p=A>>4;if(p!==1)throw new Error(`Got v${p} data when expected v1.`);const v=bb[15&A];if(!v)throw new Error("Unrecognized array type.");const[_]=new Uint16Array(t,2,1),[B]=new Uint32Array(t,4,1);return new kv(B,_,v,t)}constructor(t,s=64,A=Float64Array,p){if(isNaN(t)||t<0)throw new Error(`Unpexpected numItems value: ${t}.`);this.numItems=+t,this.nodeSize=Math.min(Math.max(+s,2),65535),this.ArrayType=A,this.IndexArrayType=t<65536?Uint16Array:Uint32Array;const v=bb.indexOf(this.ArrayType),_=2*t*this.ArrayType.BYTES_PER_ELEMENT,B=t*this.IndexArrayType.BYTES_PER_ELEMENT,F=(8-B%8)%8;if(v<0)throw new Error(`Unexpected typed array class: ${A}.`);p&&p instanceof ArrayBuffer?(this.data=p,this.ids=new this.IndexArrayType(this.data,8,t),this.coords=new this.ArrayType(this.data,8+B+F,2*t),this._pos=2*t,this._finished=!0):(this.data=new ArrayBuffer(8+_+B+F),this.ids=new this.IndexArrayType(this.data,8,t),this.coords=new this.ArrayType(this.data,8+B+F,2*t),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+v]),new Uint16Array(this.data,2,1)[0]=s,new Uint32Array(this.data,4,1)[0]=t)}add(t,s){const A=this._pos>>1;return this.ids[A]=A,this.coords[this._pos++]=t,this.coords[this._pos++]=s,A}finish(){const t=this._pos>>1;if(t!==this.numItems)throw new Error(`Added ${t} items when expected ${this.numItems}.`);return Uv(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(t,s,A,p){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:v,coords:_,nodeSize:B}=this,F=[0,v.length-1,0],U=[];for(;F.length;){const Q=F.pop()||0,K=F.pop()||0,X=F.pop()||0;if(K-X<=B){for(let he=X;he<=K;he++){const be=_[2*he],rt=_[2*he+1];be>=t&&be<=A&&rt>=s&&rt<=p&&U.push(v[he])}continue}const J=X+K>>1,oe=_[2*J],le=_[2*J+1];oe>=t&&oe<=A&&le>=s&&le<=p&&U.push(v[J]),(Q===0?t<=oe:s<=le)&&(F.push(X),F.push(J-1),F.push(1-Q)),(Q===0?A>=oe:p>=le)&&(F.push(J+1),F.push(K),F.push(1-Q))}return U}within(t,s,A){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:p,coords:v,nodeSize:_}=this,B=[0,p.length-1,0],F=[],U=A*A;for(;B.length;){const Q=B.pop()||0,K=B.pop()||0,X=B.pop()||0;if(K-X<=_){for(let he=X;he<=K;he++)Cb(v[2*he],v[2*he+1],t,s)<=U&&F.push(p[he]);continue}const J=X+K>>1,oe=v[2*J],le=v[2*J+1];Cb(oe,le,t,s)<=U&&F.push(p[J]),(Q===0?t-A<=oe:s-A<=le)&&(B.push(X),B.push(J-1),B.push(1-Q)),(Q===0?t+A>=oe:s+A>=le)&&(B.push(J+1),B.push(K),B.push(1-Q))}return F}}function Uv(l,t,s,A,p,v){if(p-A<=s)return;const _=A+p>>1;Bb(l,t,_,A,p,v),Uv(l,t,s,A,_-1,1-v),Uv(l,t,s,_+1,p,1-v)}function Bb(l,t,s,A,p,v){for(;p>A;){if(p-A>600){const U=p-A+1,Q=s-A+1,K=Math.log(U),X=.5*Math.exp(2*K/3),J=.5*Math.sqrt(K*X*(U-X)/U)*(Q-U/2<0?-1:1);Bb(l,t,s,Math.max(A,Math.floor(s-Q*X/U+J)),Math.min(p,Math.floor(s+(U-Q)*X/U+J)),v)}const _=t[2*s+v];let B=A,F=p;for(tm(l,t,A,s),t[2*p+v]>_&&tm(l,t,A,p);B<F;){for(tm(l,t,B,F),B++,F--;t[2*B+v]<_;)B++;for(;t[2*F+v]>_;)F--}t[2*A+v]===_?tm(l,t,A,F):(F++,tm(l,t,F,p)),F<=s&&(A=F+1),s<=F&&(p=F-1)}}function tm(l,t,s,A){Dv(l,s,A),Dv(t,2*s,2*A),Dv(t,2*s+1,2*A+1)}function Dv(l,t,s){const A=l[t];l[t]=l[s],l[s]=A}function Cb(l,t,s,A){const p=l-s,v=t-A;return p*p+v*v}var Rv;m.cI=void 0,(Rv=m.cI||(m.cI={})).create="create",Rv.load="load",Rv.fullLoad="fullLoad";let Rg=null,rm=[];const Nv=1e3/60,Qv="loadTime",Ov="fullLoadTime",P4={mark(l){performance.mark(l)},frame(l){const t=l;Rg!=null&&rm.push(t-Rg),Rg=t},clearMetrics(){Rg=null,rm=[],performance.clearMeasures(Qv),performance.clearMeasures(Ov);for(const l in m.cI)performance.clearMarks(m.cI[l])},getPerformanceMetrics(){performance.measure(Qv,m.cI.create,m.cI.load),performance.measure(Ov,m.cI.create,m.cI.fullLoad);const l=performance.getEntriesByName(Qv)[0].duration,t=performance.getEntriesByName(Ov)[0].duration,s=rm.length,A=1/(rm.reduce(((v,_)=>v+_),0)/s/1e3),p=rm.filter((v=>v>Nv)).reduce(((v,_)=>v+(_-Nv)/Nv),0);return{loadTime:l,fullLoadTime:t,fps:A,percentDroppedFrames:p/(s+p)*100,totalFrames:s}}};m.$=H,m.A=ce,m.B=Me,m.C=$,m.D=yr,m.E=Tr,m.F=function([l,t,s]){return t+=90,t*=Math.PI/180,s*=Math.PI/180,{x:l*Math.cos(t)*Math.sin(s),y:l*Math.sin(t)*Math.sin(s),z:l*Math.cos(s)}},m.G=Br,m.H=Mr,m.I=Or,m.J=ge,m.K=function(l){if(kr==null){const t=l.navigator?l.navigator.userAgent:null;kr=!!l.safari||!(!t||!(/\b(iPad|iPhone|iPod)\b/.test(t)||t.match("Safari")&&!t.match("Chrome")))}return kr},m.L=class{constructor(l,t){this.target=l,this.mapId=t,this.resolveRejects={},this.tasks={},this.taskQueue=[],this.abortControllers={},this.messageHandlers={},this.invoker=new KT((()=>this.process())),this.subscription=Dr(this.target,"message",(s=>this.receive(s)),!1),this.globalScope=mr(self)?l:window}registerMessageHandler(l,t){this.messageHandlers[l]=t}unregisterMessageHandler(l){delete this.messageHandlers[l]}sendAsync(l,t){return new Promise(((s,A)=>{const p=Math.round(1e18*Math.random()).toString(36).substring(0,10),v=t?Dr(t.signal,"abort",(()=>{v?.unsubscribe(),delete this.resolveRejects[p];const F={id:p,type:"<cancel>",origin:location.origin,targetMapId:l.targetMapId,sourceMapId:this.mapId};this.target.postMessage(F)}),qT):null;this.resolveRejects[p]={resolve:F=>{v?.unsubscribe(),s(F)},reject:F=>{v?.unsubscribe(),A(F)}};const _=[],B=Object.assign(Object.assign({},l),{id:p,sourceMapId:this.mapId,origin:location.origin,data:Pt(l.data,_)});this.target.postMessage(B,{transfer:_})}))}receive(l){const t=l.data,s=t.id;if(!(t.origin!=="file://"&&location.origin!=="file://"&&t.origin!=="resource://android"&&location.origin!=="resource://android"&&t.origin!==location.origin||t.targetMapId&&this.mapId!==t.targetMapId)){if(t.type==="<cancel>"){delete this.tasks[s];const A=this.abortControllers[s];return delete this.abortControllers[s],void(A&&A.abort())}if(mr(self)||t.mustQueue)return this.tasks[s]=t,this.taskQueue.push(s),void this.invoker.trigger();this.processTask(s,t)}}process(){if(this.taskQueue.length===0)return;const l=this.taskQueue.shift(),t=this.tasks[l];delete this.tasks[l],this.taskQueue.length>0&&this.invoker.trigger(),t&&this.processTask(l,t)}processTask(l,t){return o(this,void 0,void 0,(function*(){if(t.type==="<response>"){const p=this.resolveRejects[l];return delete this.resolveRejects[l],p?void(t.error?p.reject(Zt(t.error)):p.resolve(Zt(t.data))):void 0}if(!this.messageHandlers[t.type])return void this.completeTask(l,new Error(`Could not find a registered handler for ${t.type}, map ID: ${this.mapId}, available handlers: ${Object.keys(this.messageHandlers).join(", ")}`));const s=Zt(t.data),A=new AbortController;this.abortControllers[l]=A;try{const p=yield this.messageHandlers[t.type](t.sourceMapId,s,A);this.completeTask(l,null,p)}catch(p){this.completeTask(l,p)}}))}completeTask(l,t,s){const A=[];delete this.abortControllers[l];const p={id:l,type:"<response>",sourceMapId:this.mapId,origin:location.origin,error:t?Pt(t):null,data:Pt(s,A)};this.target.postMessage(p,{transfer:A})}remove(){this.invoker.remove(),this.subscription.unsubscribe()}},m.M=vt,m.N=function(){var l=new ce(16);return ce!=Float32Array&&(l[1]=0,l[2]=0,l[3]=0,l[4]=0,l[6]=0,l[7]=0,l[8]=0,l[9]=0,l[11]=0,l[12]=0,l[13]=0,l[14]=0),l[0]=1,l[5]=1,l[10]=1,l[15]=1,l},m.O=function(l,t,s){var A,p,v,_,B,F,U,Q,K,X,J,oe,le=s[0],he=s[1],be=s[2];return t===l?(l[12]=t[0]*le+t[4]*he+t[8]*be+t[12],l[13]=t[1]*le+t[5]*he+t[9]*be+t[13],l[14]=t[2]*le+t[6]*he+t[10]*be+t[14],l[15]=t[3]*le+t[7]*he+t[11]*be+t[15]):(p=t[1],v=t[2],_=t[3],B=t[4],F=t[5],U=t[6],Q=t[7],K=t[8],X=t[9],J=t[10],oe=t[11],l[0]=A=t[0],l[1]=p,l[2]=v,l[3]=_,l[4]=B,l[5]=F,l[6]=U,l[7]=Q,l[8]=K,l[9]=X,l[10]=J,l[11]=oe,l[12]=A*le+B*he+K*be+t[12],l[13]=p*le+F*he+X*be+t[13],l[14]=v*le+U*he+J*be+t[14],l[15]=_*le+Q*he+oe*be+t[15]),l},m.P=w,m.Q=function(l,t,s){var A=s[0],p=s[1],v=s[2];return l[0]=t[0]*A,l[1]=t[1]*A,l[2]=t[2]*A,l[3]=t[3]*A,l[4]=t[4]*p,l[5]=t[5]*p,l[6]=t[6]*p,l[7]=t[7]*p,l[8]=t[8]*v,l[9]=t[9]*v,l[10]=t[10]*v,l[11]=t[11]*v,l[12]=t[12],l[13]=t[13],l[14]=t[14],l[15]=t[15],l},m.R=Jo,m.S=function(l,t,s){var A=t[0],p=t[1],v=t[2],_=t[3],B=t[4],F=t[5],U=t[6],Q=t[7],K=t[8],X=t[9],J=t[10],oe=t[11],le=t[12],he=t[13],be=t[14],rt=t[15],Fe=s[0],Ue=s[1],at=s[2],dt=s[3];return l[0]=Fe*A+Ue*B+at*K+dt*le,l[1]=Fe*p+Ue*F+at*X+dt*he,l[2]=Fe*v+Ue*U+at*J+dt*be,l[3]=Fe*_+Ue*Q+at*oe+dt*rt,l[4]=(Fe=s[4])*A+(Ue=s[5])*B+(at=s[6])*K+(dt=s[7])*le,l[5]=Fe*p+Ue*F+at*X+dt*he,l[6]=Fe*v+Ue*U+at*J+dt*be,l[7]=Fe*_+Ue*Q+at*oe+dt*rt,l[8]=(Fe=s[8])*A+(Ue=s[9])*B+(at=s[10])*K+(dt=s[11])*le,l[9]=Fe*p+Ue*F+at*X+dt*he,l[10]=Fe*v+Ue*U+at*J+dt*be,l[11]=Fe*_+Ue*Q+at*oe+dt*rt,l[12]=(Fe=s[12])*A+(Ue=s[13])*B+(at=s[14])*K+(dt=s[15])*le,l[13]=Fe*p+Ue*F+at*X+dt*he,l[14]=Fe*v+Ue*U+at*J+dt*be,l[15]=Fe*_+Ue*Q+at*oe+dt*rt,l},m.T=$A,m.U=function(l,t){const s={};for(let A=0;A<t.length;A++){const p=t[A];p in l&&(s[p]=l[p])}return s},m.V=Yh,m.W=et,m.X=xx,m.Y=wx,m.Z=qe,m._=o,m.a=ve,m.a$=Cx,m.a0=Z,m.a1=Gr,m.a2=_A,m.a3=Bx,m.a4=Cg,m.a5=Ne,m.a6=function(l,t,s){if(!l)return t||{};if(!t)return l||{};const A=Fx(l),p=Fx(t);(function(_,B){B.removeAll&&(_.add.clear(),_.update.clear(),_.remove.clear(),B.remove.clear());for(const F of B.remove)_.add.delete(F),_.update.delete(F);for(const[F,U]of B.update){const Q=_.update.get(F);Q&&(B.update.set(F,$T(Q,U)),_.update.delete(F))}})(A,p);const v={};if((A.removeAll||p.removeAll)&&(v.removeAll=!0),v.remove=new Set([...A.remove,...p.remove]),v.add=new Map([...A.add,...p.add]),v.update=new Map([...A.update,...p.update]),v.remove.size&&v.add.size)for(const _ of v.add.keys())v.remove.delete(_);return(function(_){const B={};return _.removeAll&&(B.removeAll=_.removeAll),_.remove&&(B.remove=Array.from(_.remove)),_.add&&(B.add=Array.from(_.add.values())),_.update&&(B.update=Array.from(_.update.values())),B})(v)},m.a7=function(l,t){if(l==null||l.type==null)return!0;if(l.type==="Feature")return Xp(l,t)!=null;if(l.type==="FeatureCollection"){const s=new Set;for(const A of l.features){const p=Xp(A,t);if(p==null||s.has(p))return!1;s.add(p)}return!0}return!1},m.a8=function(l,t){const s=new Map;if(!(l==null||l.type==null))if(l.type==="Feature")s.set(Xp(l,t),l);else for(const A of l.features)s.set(Xp(A,t),A);return s},m.a9=function(l,t,s){var A,p;if(t.removeAll)l.clear();else if(t.remove)for(const v of t.remove)l.delete(v);if(t.add)for(const v of t.add){const _=Xp(v,s);_!=null&&l.set(_,v)}if(t.update)for(const v of t.update){let _=l.get(v.id);if(!_)continue;const B=!!v.newGeometry,F=v.removeAllProperties||((A=v.removeProperties)===null||A===void 0?void 0:A.length)>0||((p=v.addOrUpdateProperties)===null||p===void 0?void 0:p.length)>0;if((B||F)&&(_=Object.assign({},_),l.set(v.id,_),B&&(_.geometry=v.newGeometry),F)){if(_.properties=v.removeAllProperties?{}:Object.assign({},_.properties||{}),v.removeProperties)for(const U of v.removeProperties)delete _.properties[U];if(v.addOrUpdateProperties)for(const{key:U,value:Q}of v.addOrUpdateProperties)_.properties[U]=Q}}},m.aB=function(l,{uSize:t,uSizeT:s},{lowerSize:A,upperSize:p}){return l.kind==="source"?A/Za:l.kind==="composite"?Br.number(A/Za,p/Za,s):t},m.aC=function(l,t){var s=t[0],A=t[1],p=t[2],v=t[3],_=t[4],B=t[5],F=t[6],U=t[7],Q=t[8],K=t[9],X=t[10],J=t[11],oe=t[12],le=t[13],he=t[14],be=t[15],rt=s*B-A*_,Fe=s*F-p*_,Ue=s*U-v*_,at=A*F-p*B,dt=A*U-v*B,Mt=p*U-v*F,Xt=Q*le-K*oe,Vt=Q*he-X*oe,ir=Q*be-J*oe,wr=K*he-X*le,ar=K*be-J*le,$t=X*be-J*he,Ot=rt*$t-Fe*ar+Ue*wr+at*ir-dt*Vt+Mt*Xt;return Ot?(l[0]=(B*$t-F*ar+U*wr)*(Ot=1/Ot),l[1]=(p*ar-A*$t-v*wr)*Ot,l[2]=(le*Mt-he*dt+be*at)*Ot,l[3]=(X*dt-K*Mt-J*at)*Ot,l[4]=(F*ir-_*$t-U*Vt)*Ot,l[5]=(s*$t-p*ir+v*Vt)*Ot,l[6]=(he*Ue-oe*Mt-be*Fe)*Ot,l[7]=(Q*Mt-X*Ue+J*Fe)*Ot,l[8]=(_*ar-B*ir+U*Xt)*Ot,l[9]=(A*ir-s*ar-v*Xt)*Ot,l[10]=(oe*dt-le*Ue+be*rt)*Ot,l[11]=(K*Ue-Q*dt-J*rt)*Ot,l[12]=(B*Vt-_*wr-F*Xt)*Ot,l[13]=(s*wr-A*Vt+p*Xt)*Ot,l[14]=(le*Fe-oe*at-he*rt)*Ot,l[15]=(Q*at-K*Fe+X*rt)*Ot,l):null},m.aD=ot,m.aE=function(l){var t=l[0],s=l[1];return Math.sqrt(t*t+s*s)},m.aF=function(l){return l[0]=0,l[1]=0,l},m.aG=function(l,t,s){return l[0]=t[0]*s,l[1]=t[1]*s,l},m.aH=Av,m.aI=Ie,m.aJ=function(l,t,s,A){const p=t.y-l.y,v=t.x-l.x,_=A.y-s.y,B=A.x-s.x,F=_*v-B*p;if(F===0)return null;const U=(B*(l.y-s.y)-_*(l.x-s.x))/F;return new w(l.x+U*v,l.y+U*p)},m.aK=cb,m.aL=hh,m.aM=function(l){let t=1/0,s=1/0,A=-1/0,p=-1/0;for(const v of l)t=Math.min(t,v.x),s=Math.min(s,v.y),A=Math.max(A,v.x),p=Math.max(p,v.y);return[t,s,A,p]},m.aN=Hs,m.aO=yt,m.aP=function(l,t,s,A,p=!1){if(!s[0]&&!s[1])return[0,0];const v=p?A==="map"?-l.bearingInRadians:0:A==="viewport"?l.bearingInRadians:0;if(v){const _=Math.sin(v),B=Math.cos(v);s=[s[0]*B-s[1]*_,s[0]*_+s[1]*B]}return[p?s[0]:yt(t,s[0],l.zoom),p?s[1]:yt(t,s[1],l.zoom)]},m.aR=cv,m.aS=Mv,m.aT=Nt,m.aU=kv,m.aV=Vn,m.aW=_h,m.aX=te,m.aY=nr,m.aZ=Dt,m.a_=un,m.aa=em,m.ab=Zp,m.ac=Vd,m.ad=25,m.ae=pv,m.af=l=>{const t=window.document.createElement("video");return t.muted=!0,new Promise((s=>{t.onloadstart=()=>{s(t)};for(const A of l){const p=window.document.createElement("source");Ft(A)||(t.crossOrigin="Anonymous"),p.src=A,t.appendChild(p)}}))},m.ag=Yt,m.ah=function(){return St++},m.ai=n,m.aj=If,m.ak=dc,m.al=qA,m.am=Tx,m.an=function(l){const t={};if(l.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,((s,A,p,v)=>{const _=p||v;return t[A]=!_||_.toLowerCase(),""})),t["max-age"]){const s=parseInt(t["max-age"],10);isNaN(s)?delete t["max-age"]:t["max-age"]=s}return t},m.ao=nt,m.ap=85.051129,m.aq=Dn,m.ar=function(l){return Math.pow(2,l)},m.as=Pe,m.at=bx,m.au=function(l){return Math.log(l)/Math.LN2},m.av=function(l){var t=l[0],s=l[1];return t*t+s*s},m.aw=function(l){if(!l.length)return new Set;const t=Math.max(...l.map((F=>F.canonical.z)));let s=1/0,A=-1/0,p=1/0,v=-1/0;const _=[];for(const F of l){const{x:U,y:Q,z:K}=F.canonical,X=Math.pow(2,t-K),J=U*X,oe=Q*X;_.push({id:F,x:J,y:oe}),J<s&&(s=J),J>A&&(A=J),oe<p&&(p=oe),oe>v&&(v=oe)}const B=new Set;for(const F of _)F.x!==s&&F.x!==A&&F.y!==p&&F.y!==v||B.add(F.id);return B},m.ax=function(l,t){const s=Math.abs(2*l.wrap)-+(l.wrap<0),A=Math.abs(2*t.wrap)-+(t.wrap<0);return l.overscaledZ-t.overscaledZ||A-s||t.canonical.y-l.canonical.y||t.canonical.x-l.canonical.x},m.ay=class{constructor(l,t){this.max=l,this.onRemove=t,this.reset()}reset(){for(const l in this.data)for(const t of this.data[l])t.timeout&&clearTimeout(t.timeout),this.onRemove(t.value);return this.data={},this.order=[],this}add(l,t,s){const A=l.wrapped().key;this.data[A]===void 0&&(this.data[A]=[]);const p={value:t,timeout:void 0};if(s!==void 0&&(p.timeout=setTimeout((()=>{this.remove(l,p)}),s)),this.data[A].push(p),this.order.push(A),this.order.length>this.max){const v=this._getAndRemoveByKey(this.order[0]);v&&this.onRemove(v)}return this}has(l){return l.wrapped().key in this.data}getAndRemove(l){return this.has(l)?this._getAndRemoveByKey(l.wrapped().key):null}_getAndRemoveByKey(l){const t=this.data[l].shift();return t.timeout&&clearTimeout(t.timeout),this.data[l].length===0&&delete this.data[l],this.order.splice(this.order.indexOf(l),1),t.value}getByKey(l){const t=this.data[l];return t?t[0].value:null}get(l){return this.has(l)?this.data[l.wrapped().key][0].value:null}remove(l,t){if(!this.has(l))return this;const s=l.wrapped().key,A=t===void 0?0:this.data[s].indexOf(t),p=this.data[s][A];return this.data[s].splice(A,1),p.timeout&&clearTimeout(p.timeout),this.data[s].length===0&&delete this.data[s],this.onRemove(p.value),this.order.splice(this.order.indexOf(s),1),this}setMaxSize(l){for(this.max=l;this.order.length>this.max;){const t=this._getAndRemoveByKey(this.order[0]);t&&this.onRemove(t)}return this}filter(l){const t=[];for(const s in this.data)for(const A of this.data[s])l(A.value)||t.push(A);for(const s of t)this.remove(s.value.tileID,s)}},m.az=function(l,t){let s=0,A=0;if(l.kind==="constant")A=l.layoutSize;else if(l.kind!=="source"){const{interpolationType:p,minZoom:v,maxZoom:_}=l,B=p?nt(Kt.interpolationFactor(p,t,v,_),0,1):0;l.kind==="camera"?A=Br.number(l.minSize,l.maxSize,B):s=B}return{uSizeT:s,uSize:A}},m.b=Vr,m.b$=class extends yo{constructor(l,t){super(l,t),this.current=0}set(l){this.current!==l&&(this.current=l,this.gl.uniform1i(this.location,l))}},m.b0=Je,m.b1=Be,m.b2=function(l){var t=new ce(3);return t[0]=l[0],t[1]=l[1],t[2]=l[2],t},m.b3=function(l,t,s){return l[0]=t[0]-s[0],l[1]=t[1]-s[1],l[2]=t[2]-s[2],l},m.b4=function(l,t){var s=t[0],A=t[1],p=t[2],v=s*s+A*A+p*p;return v>0&&(v=1/Math.sqrt(v)),l[0]=t[0]*v,l[1]=t[1]*v,l[2]=t[2]*v,l},m.b5=Ae,m.b6=function(l,t){return l[0]*t[0]+l[1]*t[1]+l[2]*t[2]},m.b7=function(l,t,s){return l[0]=t[0]*s[0],l[1]=t[1]*s[1],l[2]=t[2]*s[2],l[3]=t[3]*s[3],l},m.b8=Xe,m.b9=function(l,t,s){const A=t[0]*s[0]+t[1]*s[1]+t[2]*s[2];return A===0?null:(-(l[0]*s[0]+l[1]*s[1]+l[2]*s[2])-s[3])/A},m.bA=function(){return new Float64Array(3)},m.bB=function(l,t,s,A){return l[0]=t[0]+s[0]*A,l[1]=t[1]+s[1]*A,l[2]=t[2]+s[2]*A,l},m.bC=it,m.bD=function(l,t,s){var A=s[0],p=s[1],v=s[2],_=s[3],B=t[0],F=t[1],U=t[2],Q=p*U-v*F,K=v*B-A*U,X=A*F-p*B;return l[0]=B+_*(Q+=Q)+p*(X+=X)-v*(K+=K),l[1]=F+_*K+v*Q-A*X,l[2]=U+_*X+A*K-p*Q,l},m.bE=function(l,t,s){const A=(function(F){var U=F[3],Q=F[4],K=F[5],X=F[6],J=F[7],oe=F[8];return F[0]*(oe*Q-K*J)+F[1]*(-oe*U+K*X)+F[2]*(J*U-Q*X)})([l[0],l[1],l[2],t[0],t[1],t[2],s[0],s[1],s[2]]);if(A===0)return null;const p=Ae([],[t[0],t[1],t[2]],[s[0],s[1],s[2]]),v=Ae([],[s[0],s[1],s[2]],[l[0],l[1],l[2]]),_=Ae([],[l[0],l[1],l[2]],[t[0],t[1],t[2]]),B=Je([],p,-l[3]);return Be(B,B,Je([],v,-t[3])),Be(B,B,Je([],_,-s[3])),Je(B,B,1/A),B},m.bF=fv,m.bG=function(){return new Float64Array(4)},m.bH=function(l,t,s,A){var p=[],v=[];return p[0]=t[0]-s[0],p[1]=t[1]-s[1],p[2]=t[2]-s[2],v[0]=p[0]*Math.cos(A)-p[1]*Math.sin(A),v[1]=p[0]*Math.sin(A)+p[1]*Math.cos(A),v[2]=p[2],l[0]=v[0]+s[0],l[1]=v[1]+s[1],l[2]=v[2]+s[2],l},m.bI=function(l,t,s,A){var p=[],v=[];return p[0]=t[0]-s[0],p[1]=t[1]-s[1],p[2]=t[2]-s[2],v[0]=p[0],v[1]=p[1]*Math.cos(A)-p[2]*Math.sin(A),v[2]=p[1]*Math.sin(A)+p[2]*Math.cos(A),l[0]=v[0]+s[0],l[1]=v[1]+s[1],l[2]=v[2]+s[2],l},m.bJ=function(l,t,s,A){var p=[],v=[];return p[0]=t[0]-s[0],p[1]=t[1]-s[1],p[2]=t[2]-s[2],v[0]=p[2]*Math.sin(A)+p[0]*Math.cos(A),v[1]=p[1],v[2]=p[2]*Math.cos(A)-p[0]*Math.sin(A),l[0]=v[0]+s[0],l[1]=v[1]+s[1],l[2]=v[2]+s[2],l},m.bK=function(l,t,s){var A=Math.sin(s),p=Math.cos(s),v=t[0],_=t[1],B=t[2],F=t[3],U=t[8],Q=t[9],K=t[10],X=t[11];return t!==l&&(l[4]=t[4],l[5]=t[5],l[6]=t[6],l[7]=t[7],l[12]=t[12],l[13]=t[13],l[14]=t[14],l[15]=t[15]),l[0]=v*p-U*A,l[1]=_*p-Q*A,l[2]=B*p-K*A,l[3]=F*p-X*A,l[8]=v*A+U*p,l[9]=_*A+Q*p,l[10]=B*A+K*p,l[11]=F*A+X*p,l},m.bL=function(l,t){const s=Ce(l,360),A=Ce(t,360),p=A-s,v=A>s?p-360:p+360;return Math.abs(p)<Math.abs(v)?p:v},m.bM=function(l){return l[0]=0,l[1]=0,l[2]=0,l},m.bN=function(l,t,s,A){const p=Math.sqrt(l*l+t*t),v=Math.sqrt(s*s+A*A);l/=p,t/=p,s/=v,A/=v;const _=Math.acos(l*s+t*A);return-t*s+l*A>0?_:-_},m.bO=function(l,t){const s=Ce(l,2*Math.PI),A=Ce(t,2*Math.PI);return Math.min(Math.abs(s-A),Math.abs(s-A+2*Math.PI),Math.abs(s-A-2*Math.PI))},m.bP=function(){const l={},t=mt.$version;for(const s in mt.$root){const A=mt.$root[s];if(A.required){let p=null;p=s==="version"?t:A.type==="array"?[]:{},p!=null&&(l[s]=p)}}return l},m.bQ=bt,m.bR=Ut,m.bS=function l(t,s){if(Array.isArray(t)){if(!Array.isArray(s)||t.length!==s.length)return!1;for(let A=0;A<t.length;A++)if(!l(t[A],s[A]))return!1;return!0}if(typeof t=="object"&&t!==null&&s!==null){if(typeof s!="object"||Object.keys(t).length!==Object.keys(s).length)return!1;for(const A in t)if(!l(t[A],s[A]))return!1;return!0}return t===s},m.bT=function(l){l=l.slice();const t=Object.create(null);for(let s=0;s<l.length;s++)t[l[s].id]=l[s];for(let s=0;s<l.length;s++)"ref"in l[s]&&(l[s]=Qr(l[s],t[l[s].ref]));return l},m.bU=function(l,t){if(l.type==="custom")return new GT(l,t);switch(l.type){case"background":return new VT(l,t);case"circle":return new $a(l,t);case"color-relief":return new vA(l,t);case"fill":return new zp(l,t);case"fill-extrusion":return new no(l,t);case"heatmap":return new Ag(l,t);case"hillshade":return new kp(l,t);case"line":return new Vp(l,t);case"raster":return new Ys(l,t);case"symbol":return new Bg(l,t)}},m.bV=l=>l.type==="raster",m.bW=or,m.bX=function(l,t){if(!l)return[{command:"setStyle",args:[t]}];let s=[];try{if(!gr(l.version,t.version))return[{command:"setStyle",args:[t]}];gr(l.center,t.center)||s.push({command:"setCenter",args:[t.center]}),gr(l.state,t.state)||s.push({command:"setGlobalState",args:[t.state]}),gr(l.centerAltitude,t.centerAltitude)||s.push({command:"setCenterAltitude",args:[t.centerAltitude]}),gr(l.zoom,t.zoom)||s.push({command:"setZoom",args:[t.zoom]}),gr(l.bearing,t.bearing)||s.push({command:"setBearing",args:[t.bearing]}),gr(l.pitch,t.pitch)||s.push({command:"setPitch",args:[t.pitch]}),gr(l.roll,t.roll)||s.push({command:"setRoll",args:[t.roll]}),gr(l.sprite,t.sprite)||s.push({command:"setSprite",args:[t.sprite]}),gr(l.glyphs,t.glyphs)||s.push({command:"setGlyphs",args:[t.glyphs]}),gr(l.transition,t.transition)||s.push({command:"setTransition",args:[t.transition]}),gr(l.light,t.light)||s.push({command:"setLight",args:[t.light]}),gr(l.terrain,t.terrain)||s.push({command:"setTerrain",args:[t.terrain]}),gr(l.sky,t.sky)||s.push({command:"setSky",args:[t.sky]}),gr(l.projection,t.projection)||s.push({command:"setProjection",args:[t.projection]});const A={},p=[];(function(_,B,F,U){let Q;for(Q in B=B||{},_=_||{})Object.prototype.hasOwnProperty.call(_,Q)&&(Object.prototype.hasOwnProperty.call(B,Q)||xr(Q,F,U));for(Q in B)Object.prototype.hasOwnProperty.call(B,Q)&&(Object.prototype.hasOwnProperty.call(_,Q)?gr(_[Q],B[Q])||(_[Q].type==="geojson"&&B[Q].type==="geojson"&&Bn(_,B,Q)?$r(F,{command:"setGeoJSONSourceData",args:[Q,B[Q].data]}):Tn(Q,B,F,U)):Rn(Q,B,F))})(l.sources,t.sources,p,A);const v=[];l.layers&&l.layers.forEach((_=>{"source"in _&&A[_.source]?s.push({command:"removeLayer",args:[_.id]}):v.push(_)})),s=s.concat(p),(function(_,B,F){B=B||[];const U=(_=_||[]).map(Ui),Q=B.map(Ui),K=_.reduce(ai,{}),X=B.reduce(ai,{}),J=U.slice(),oe=Object.create(null);let le,he,be,rt,Fe;for(let Ue=0,at=0;Ue<U.length;Ue++)le=U[Ue],Object.prototype.hasOwnProperty.call(X,le)?at++:($r(F,{command:"removeLayer",args:[le]}),J.splice(J.indexOf(le,at),1));for(let Ue=0,at=0;Ue<Q.length;Ue++)le=Q[Q.length-1-Ue],J[J.length-1-Ue]!==le&&(Object.prototype.hasOwnProperty.call(K,le)?($r(F,{command:"removeLayer",args:[le]}),J.splice(J.lastIndexOf(le,J.length-at),1)):at++,rt=J[J.length-Ue],$r(F,{command:"addLayer",args:[X[le],rt]}),J.splice(J.length-Ue,0,le),oe[le]=!0);for(let Ue=0;Ue<Q.length;Ue++)if(le=Q[Ue],he=K[le],be=X[le],!oe[le]&&!gr(he,be))if(gr(he.source,be.source)&&gr(he["source-layer"],be["source-layer"])&&gr(he.type,be.type)){for(Fe in xn(he.layout,be.layout,F,le,null,"setLayoutProperty"),xn(he.paint,be.paint,F,le,null,"setPaintProperty"),gr(he.filter,be.filter)||$r(F,{command:"setFilter",args:[le,be.filter]}),gr(he.minzoom,be.minzoom)&&gr(he.maxzoom,be.maxzoom)||$r(F,{command:"setLayerZoomRange",args:[le,be.minzoom,be.maxzoom]}),he)Object.prototype.hasOwnProperty.call(he,Fe)&&Fe!=="layout"&&Fe!=="paint"&&Fe!=="filter"&&Fe!=="metadata"&&Fe!=="minzoom"&&Fe!=="maxzoom"&&(Fe.indexOf("paint.")===0?xn(he[Fe],be[Fe],F,le,Fe.slice(6),"setPaintProperty"):gr(he[Fe],be[Fe])||$r(F,{command:"setLayerProperty",args:[le,Fe,be[Fe]]}));for(Fe in be)Object.prototype.hasOwnProperty.call(be,Fe)&&!Object.prototype.hasOwnProperty.call(he,Fe)&&Fe!=="layout"&&Fe!=="paint"&&Fe!=="filter"&&Fe!=="metadata"&&Fe!=="minzoom"&&Fe!=="maxzoom"&&(Fe.indexOf("paint.")===0?xn(he[Fe],be[Fe],F,le,Fe.slice(6),"setPaintProperty"):gr(he[Fe],be[Fe])||$r(F,{command:"setLayerProperty",args:[le,Fe,be[Fe]]}))}else $r(F,{command:"removeLayer",args:[le]}),rt=J[J.lastIndexOf(le)+1],$r(F,{command:"addLayer",args:[be,rt]})})(v,t.layers,s)}catch(A){console.warn("Unable to compute style diff:",A),s=[{command:"setStyle",args:[t]}]}return s},m.bY=function(l){const t=[],s=l.id;return s===void 0&&t.push({message:`layers.${s}: missing required property "id"`}),l.render===void 0&&t.push({message:`layers.${s}: missing required method "render"`}),l.renderingMode&&l.renderingMode!=="2d"&&l.renderingMode!=="3d"&&t.push({message:`layers.${s}: property "renderingMode" must be either "2d" or "3d"`}),t},m.bZ=Tt,m.b_=Gt,m.ba=Te,m.bb=function(l,t,s){return l[0]=t[0]*s,l[1]=t[1]*s,l[2]=t[2]*s,l[3]=t[3]*s,l},m.bc=function(l,t){return l[0]*t[0]+l[1]*t[1]+l[2]*t[2]+l[3]},m.bd=Sx,m.be=Tf,m.bf=function(l,t,s,A,p){var v=1/Math.tan(t/2);if(l[0]=v/s,l[1]=0,l[2]=0,l[3]=0,l[4]=0,l[5]=v,l[6]=0,l[7]=0,l[8]=0,l[9]=0,l[11]=-1,l[12]=0,l[13]=0,l[15]=0,p!=null&&p!==1/0){var _=1/(A-p);l[10]=(p+A)*_,l[14]=2*p*A*_}else l[10]=-1,l[14]=-2*A;return l},m.bg=function(l){var t=new ce(16);return t[0]=l[0],t[1]=l[1],t[2]=l[2],t[3]=l[3],t[4]=l[4],t[5]=l[5],t[6]=l[6],t[7]=l[7],t[8]=l[8],t[9]=l[9],t[10]=l[10],t[11]=l[11],t[12]=l[12],t[13]=l[13],t[14]=l[14],t[15]=l[15],t},m.bh=function(l,t,s){var A=Math.sin(s),p=Math.cos(s),v=t[0],_=t[1],B=t[2],F=t[3],U=t[4],Q=t[5],K=t[6],X=t[7];return t!==l&&(l[8]=t[8],l[9]=t[9],l[10]=t[10],l[11]=t[11],l[12]=t[12],l[13]=t[13],l[14]=t[14],l[15]=t[15]),l[0]=v*p+U*A,l[1]=_*p+Q*A,l[2]=B*p+K*A,l[3]=F*p+X*A,l[4]=U*p-v*A,l[5]=Q*p-_*A,l[6]=K*p-B*A,l[7]=X*p-F*A,l},m.bi=function(l,t,s){var A=Math.sin(s),p=Math.cos(s),v=t[4],_=t[5],B=t[6],F=t[7],U=t[8],Q=t[9],K=t[10],X=t[11];return t!==l&&(l[0]=t[0],l[1]=t[1],l[2]=t[2],l[3]=t[3],l[12]=t[12],l[13]=t[13],l[14]=t[14],l[15]=t[15]),l[4]=v*p+U*A,l[5]=_*p+Q*A,l[6]=B*p+K*A,l[7]=F*p+X*A,l[8]=U*p-v*A,l[9]=Q*p-_*A,l[10]=K*p-B*A,l[11]=X*p-F*A,l},m.bj=function(){const l=new Float32Array(16);return Pe(l),l},m.bk=function(){const l=new Float64Array(16);return Pe(l),l},m.bl=function(){return new Float64Array(16)},m.bm=function(l,t,s){const A=new Float64Array(4);return it(A,l,t-90,s),A},m.bn=function(l,t,s,A){var p,v,_,B,F,U=t[0],Q=t[1],K=t[2],X=t[3],J=s[0],oe=s[1],le=s[2],he=s[3];return(v=U*J+Q*oe+K*le+X*he)<0&&(v=-v,J=-J,oe=-oe,le=-le,he=-he),1-v>se?(p=Math.acos(v),_=Math.sin(p),B=Math.sin((1-A)*p)/_,F=Math.sin(A*p)/_):(B=1-A,F=A),l[0]=B*U+F*J,l[1]=B*Q+F*oe,l[2]=B*K+F*le,l[3]=B*X+F*he,l},m.bo=function(l){const t=new Float64Array(9);(function(v,_){var B=_[0],F=_[1],U=_[2],Q=_[3],K=B+B,X=F+F,J=U+U,oe=B*K,le=F*K,he=F*X,be=U*K,rt=U*X,Fe=U*J,Ue=Q*K,at=Q*X,dt=Q*J;v[0]=1-he-Fe,v[3]=le-dt,v[6]=be+at,v[1]=le+dt,v[4]=1-oe-Fe,v[7]=rt-Ue,v[2]=be-at,v[5]=rt+Ue,v[8]=1-oe-he})(t,l);const s=un(-Math.asin(nt(t[2],-1,1)));let A,p;return Math.hypot(t[5],t[8])<.001?(A=0,p=-un(Math.atan2(t[3],t[4]))):(A=un(t[5]===0&&t[8]===0?0:Math.atan2(t[5],t[8])),p=un(t[1]===0&&t[0]===0?0:Math.atan2(t[1],t[0]))),{roll:A,pitch:s+90,bearing:p}},m.bp=function(l,t){return l.roll==t.roll&&l.pitch==t.pitch&&l.bearing==t.bearing},m.bq=an,m.br=fc,m.bs=yc,m.bt=Gu,m.bu=gc,m.bv=ie,m.bw=Ee,m.bx=ws,m.by=function(l,t,s,A,p){return ie(A,p,nt((l-t)/(s-t),0,1))},m.bz=Ce,m.c=We,m.c$=class{constructor(l){this._marks={start:[l.url,"start"].join("#"),end:[l.url,"end"].join("#"),measure:l.url.toString()},performance.mark(this._marks.start)}finish(){performance.mark(this._marks.end);let l=performance.getEntriesByName(this._marks.measure);return l.length===0&&(performance.measure(this._marks.measure,this._marks.start,this._marks.end),l=performance.getEntriesByName(this._marks.measure),performance.clearMarks(this._marks.start),performance.clearMarks(this._marks.end),performance.clearMeasures(this._marks.measure)),l}},m.c0=GA,m.c1=class extends yo{constructor(l,t){super(l,t),this.current=zu}set(l){if(l[12]!==this.current[12]||l[0]!==this.current[0])return this.current=l,void this.gl.uniformMatrix4fv(this.location,!1,l);for(let t=1;t<16;t++)if(l[t]!==this.current[t]){this.current=l,this.gl.uniformMatrix4fv(this.location,!1,l);break}}},m.c2=mA,m.c3=class extends yo{constructor(l,t){super(l,t),this.current=[0,0,0]}set(l){l[0]===this.current[0]&&l[1]===this.current[1]&&l[2]===this.current[2]||(this.current=l,this.gl.uniform3f(this.location,l[0],l[1],l[2]))}},m.c4=class extends yo{constructor(l,t){super(l,t),this.current=[0,0]}set(l){l[0]===this.current[0]&&l[1]===this.current[1]||(this.current=l,this.gl.uniform2f(this.location,l[0],l[1]))}},m.c5=de,m.c6=function(l,t){var s=Math.sin(t),A=Math.cos(t);return l[0]=A,l[1]=s,l[2]=0,l[3]=-s,l[4]=A,l[5]=0,l[6]=0,l[7]=0,l[8]=1,l},m.c7=function(l,t,s){var A=t[0],p=t[1],v=t[2];return l[0]=A*s[0]+p*s[3]+v*s[6],l[1]=A*s[1]+p*s[4]+v*s[7],l[2]=A*s[2]+p*s[5]+v*s[8],l},m.c8=function(l,t,s,A,p,v,_){var B=1/(t-s),F=1/(A-p),U=1/(v-_);return l[0]=-2*B,l[1]=0,l[2]=0,l[3]=0,l[4]=0,l[5]=-2*F,l[6]=0,l[7]=0,l[8]=0,l[9]=0,l[10]=2*U,l[11]=0,l[12]=(t+s)*B,l[13]=(p+A)*F,l[14]=(_+v)*U,l[15]=1,l},m.c9=class extends yo{constructor(l,t){super(l,t),this.current=new Array}set(l){if(l!=this.current){this.current=l;const t=new Float32Array(4*l.length);for(let s=0;s<l.length;s++)t[4*s]=l[s].r,t[4*s+1]=l[s].g,t[4*s+2]=l[s].b,t[4*s+3]=l[s].a;this.gl.uniform4fv(this.location,t)}}},m.cA=function(l,t){return fe[t]&&(l instanceof MouseEvent||l instanceof WheelEvent)},m.cB=function(l,t){return pt[t]&&"touches"in l},m.cC=function(l){return pt[l]||fe[l]},m.cD=function(l,t,s){var A=t[0],p=t[1];return l[0]=s[0]*A+s[4]*p+s[12],l[1]=s[1]*A+s[5]*p+s[13],l},m.cE=function(l,t){const{x:s,y:A}=Zp.fromLngLat(t);return!(l<0||l>25||A<0||A>=1||s<0||s>=1)},m.cF=function(l,t){return l[0]=t[0],l[1]=0,l[2]=0,l[3]=0,l[4]=0,l[5]=t[1],l[6]=0,l[7]=0,l[8]=0,l[9]=0,l[10]=t[2],l[11]=0,l[12]=0,l[13]=0,l[14]=0,l[15]=1,l},m.cG=class extends Io{},m.cH=P4,m.cJ=ct,m.cK=function(l,t){We.REGISTERED_PROTOCOLS[l]=t},m.cL=function(l){delete We.REGISTERED_PROTOCOLS[l]},m.cM=function(l,t){const s={};for(let p=0;p<l.length;p++){const v=t&&t[l[p].id]||po(l[p]);t&&(t[l[p].id]=v);let _=s[v];_||(_=s[v]=[]),_.push(l[p])}const A=[];for(const p in s)A.push(s[p]);return A},m.cN=$e,m.cO=Ix,m.cP=ab,m.cQ=en,m.cR=function(l){l.bucket.createArrays(),l.bucket.tilePixelRatio=Ne/(512*l.bucket.overscaling),l.bucket.compareText={},l.bucket.iconsNeedLinear=!1;const t=l.bucket.layers[0],s=t.layout,A=t._unevaluatedLayout._values,p={layoutIconSize:A["icon-size"].possiblyEvaluate(new Mr(l.bucket.zoom+1),l.canonical),layoutTextSize:A["text-size"].possiblyEvaluate(new Mr(l.bucket.zoom+1),l.canonical),textMaxSize:A["text-size"].possiblyEvaluate(new Mr(18))};if(l.bucket.textSizeData.kind==="composite"){const{minZoom:U,maxZoom:Q}=l.bucket.textSizeData;p.compositeTextSizes=[A["text-size"].possiblyEvaluate(new Mr(U),l.canonical),A["text-size"].possiblyEvaluate(new Mr(Q),l.canonical)]}if(l.bucket.iconSizeData.kind==="composite"){const{minZoom:U,maxZoom:Q}=l.bucket.iconSizeData;p.compositeIconSizes=[A["icon-size"].possiblyEvaluate(new Mr(U),l.canonical),A["icon-size"].possiblyEvaluate(new Mr(Q),l.canonical)]}const v=s.get("text-line-height")*Hs,_=s.get("text-rotation-alignment")!=="viewport"&&s.get("symbol-placement")!=="point",B=s.get("text-keep-upright"),F=s.get("text-size");for(const U of l.bucket.features){const Q=s.get("text-font").evaluate(U,{},l.canonical).join(","),K=F.evaluate(U,{},l.canonical),X=p.layoutTextSize.evaluate(U,{},l.canonical),J=p.layoutIconSize.evaluate(U,{},l.canonical),oe={horizontal:{},vertical:void 0},le=U.text;let he,be=[0,0];if(le){const Ue=le.toString(),at=s.get("text-letter-spacing").evaluate(U,{},l.canonical)*Hs,dt=sn(Ue)?at:0,Mt=s.get("text-anchor").evaluate(U,{},l.canonical),Xt=_b(t,U,l.canonical);if(!Xt){const ar=s.get("text-radial-offset").evaluate(U,{},l.canonical);be=ar?vb(Mt,[ar*Hs,Lv]):s.get("text-offset").evaluate(U,{},l.canonical).map(($t=>$t*Hs))}let Vt=_?"center":s.get("text-justify").evaluate(U,{},l.canonical);const ir=s.get("symbol-placement")==="point"?s.get("text-max-width").evaluate(U,{},l.canonical)*Hs:1/0,wr=()=>{l.bucket.allowVerticalPlacement&&er(Ue)&&(oe.vertical=Ps(le,l.glyphMap,l.glyphPositions,l.imagePositions,Q,ir,v,Mt,"left",dt,be,m.aA.vertical,!0,X,K))};if(!_&&Xt){const ar=new Set;if(Vt==="auto")for(let Ot=0;Ot<Xt.values.length;Ot+=2)ar.add(Mv(Xt.values[Ot]));else ar.add(Vt);let $t=!1;for(const Ot of ar)if(!oe.horizontal[Ot])if($t)oe.horizontal[Ot]=oe.horizontal[0];else{const Lr=Ps(le,l.glyphMap,l.glyphPositions,l.imagePositions,Q,ir,v,"center",Ot,dt,be,m.aA.horizontal,!1,X,K);Lr&&(oe.horizontal[Ot]=Lr,$t=Lr.positionedLines.length===1)}wr()}else{Vt==="auto"&&(Vt=Mv(Mt));const ar=Ps(le,l.glyphMap,l.glyphPositions,l.imagePositions,Q,ir,v,Mt,Vt,dt,be,m.aA.horizontal,!1,X,K);ar&&(oe.horizontal[Vt]=ar),wr(),er(Ue)&&_&&B&&(oe.vertical=Ps(le,l.glyphMap,l.glyphPositions,l.imagePositions,Q,ir,v,Mt,Vt,dt,be,m.aA.vertical,!1,X,K))}}let rt=!1;if(U.icon&&U.icon.name){const Ue=l.imageMap[U.icon.name];Ue&&(he=Ln(l.imagePositions[U.icon.name],s.get("icon-offset").evaluate(U,{},l.canonical),s.get("icon-anchor").evaluate(U,{},l.canonical)),rt=!!Ue.sdf,l.bucket.sdfIcons===void 0?l.bucket.sdfIcons=rt:l.bucket.sdfIcons!==rt&&_r("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(Ue.pixelRatio!==l.bucket.pixelRatio||s.get("icon-rotate").constantOr(1)!==0)&&(l.bucket.iconsNeedLinear=!0))}const Fe=xb(oe.horizontal)||oe.vertical;l.bucket.iconsInText=!!Fe&&Fe.iconsInText,(Fe||he)&&I4(l.bucket,U,oe,he,l.imageMap,p,X,J,be,rt,l.canonical,l.subdivisionGranularity)}l.showCollisionBoxes&&l.bucket.generateCollisionDebugBuffers()},m.cS=vc,m.cT=bf,m.cU=Rd,m.cV=function(l){const t=new qu;return(function(s,A){for(const p in s.layers)A.writeMessage(3,p4,s.layers[p])})(l,t),t.finish()},m.cW=function(l,t,s,A,p,v){let _=Ab(l,t,s,p,0);return _=Ab(_,t,A,v,1),_},m.cX=class{constructor(l){this.maxEntries=l,this.map=new Map}get(l){const t=this.map.get(l);return t!==void 0&&(this.map.delete(l),this.map.set(l,t)),t}set(l,t){if(this.map.has(l))this.map.delete(l);else if(this.map.size>=this.maxEntries){const s=this.map.keys().next().value;this.map.delete(s)}this.map.set(l,t)}clear(){this.map.clear()}},m.cY=wf,m.cZ=qu,m.c_=sb,m.ca=class extends yo{constructor(l,t){super(l,t),this.current=new Array}set(l){if(l!=this.current){this.current=l;const t=new Float32Array(l);this.gl.uniform1fv(this.location,t)}}},m.cb=class extends pA{},m.cc=wg,m.cd=class extends jl{},m.ce=df,m.cf=function(l){return l<=1?1:Math.pow(2,Math.ceil(Math.log(l)/Math.LN2))},m.cg=hf,m.ch=function(l,t,s){var A=t[0],p=t[1],v=t[2],_=s[3]*A+s[7]*p+s[11]*v+s[15];return l[0]=(s[0]*A+s[4]*p+s[8]*v+s[12])/(_=_||1),l[1]=(s[1]*A+s[5]*p+s[9]*v+s[13])/_,l[2]=(s[2]*A+s[6]*p+s[10]*v+s[14])/_,l},m.ci=class extends Js{},m.cj=class extends Ga{},m.ck=function(l,t){return l[0]===t[0]&&l[1]===t[1]&&l[2]===t[2]&&l[3]===t[3]&&l[4]===t[4]&&l[5]===t[5]&&l[6]===t[6]&&l[7]===t[7]&&l[8]===t[8]&&l[9]===t[9]&&l[10]===t[10]&&l[11]===t[11]&&l[12]===t[12]&&l[13]===t[13]&&l[14]===t[14]&&l[15]===t[15]},m.cl=function(l,t){var s=l[0],A=l[1],p=l[2],v=l[3],_=l[4],B=l[5],F=l[6],U=l[7],Q=l[8],K=l[9],X=l[10],J=l[11],oe=l[12],le=l[13],he=l[14],be=l[15],rt=t[0],Fe=t[1],Ue=t[2],at=t[3],dt=t[4],Mt=t[5],Xt=t[6],Vt=t[7],ir=t[8],wr=t[9],ar=t[10],$t=t[11],Ot=t[12],Lr=t[13],Ir=t[14],Ur=t[15];return Math.abs(s-rt)<=se*Math.max(1,Math.abs(s),Math.abs(rt))&&Math.abs(A-Fe)<=se*Math.max(1,Math.abs(A),Math.abs(Fe))&&Math.abs(p-Ue)<=se*Math.max(1,Math.abs(p),Math.abs(Ue))&&Math.abs(v-at)<=se*Math.max(1,Math.abs(v),Math.abs(at))&&Math.abs(_-dt)<=se*Math.max(1,Math.abs(_),Math.abs(dt))&&Math.abs(B-Mt)<=se*Math.max(1,Math.abs(B),Math.abs(Mt))&&Math.abs(F-Xt)<=se*Math.max(1,Math.abs(F),Math.abs(Xt))&&Math.abs(U-Vt)<=se*Math.max(1,Math.abs(U),Math.abs(Vt))&&Math.abs(Q-ir)<=se*Math.max(1,Math.abs(Q),Math.abs(ir))&&Math.abs(K-wr)<=se*Math.max(1,Math.abs(K),Math.abs(wr))&&Math.abs(X-ar)<=se*Math.max(1,Math.abs(X),Math.abs(ar))&&Math.abs(J-$t)<=se*Math.max(1,Math.abs(J),Math.abs($t))&&Math.abs(oe-Ot)<=se*Math.max(1,Math.abs(oe),Math.abs(Ot))&&Math.abs(le-Lr)<=se*Math.max(1,Math.abs(le),Math.abs(Lr))&&Math.abs(he-Ir)<=se*Math.max(1,Math.abs(he),Math.abs(Ir))&&Math.abs(be-Ur)<=se*Math.max(1,Math.abs(be),Math.abs(Ur))},m.cm=function(l,t){return l[0]=t[0],l[1]=t[1],l[2]=t[2],l[3]=t[3],l[4]=t[4],l[5]=t[5],l[6]=t[6],l[7]=t[7],l[8]=t[8],l[9]=t[9],l[10]=t[10],l[11]=t[11],l[12]=t[12],l[13]=t[13],l[14]=t[14],l[15]=t[15],l},m.cn=l=>l.type==="symbol",m.co=l=>l.type==="circle",m.cp=l=>l.type==="heatmap",m.cq=l=>l.type==="line",m.cr=l=>l.type==="fill",m.cs=l=>l.type==="fill-extrusion",m.ct=l=>l.type==="hillshade",m.cu=l=>l.type==="color-relief",m.cv=l=>l.type==="background",m.cw=l=>l.type==="custom",m.cx=Le,m.cy=function(l,t,s){const A=ke(t.x-s.x,t.y-s.y),p=ke(l.x-s.x,l.y-s.y),v=Math.atan2(A[0]*p[1]-A[1]*p[0],(function(_,B){return _[0]*B[0]+_[1]*B[1]})(A,p));return un(v)},m.cz=Ve,m.d=Ft,m.d0=function(l,t,s,A,p){return o(this,void 0,void 0,(function*(){if(Z())try{return yield Gr(l,t,s,A,p)}catch{}return(function(v,_,B,F,U){const Q=v.width,K=v.height;Er&&Nr||(Er=new OffscreenCanvas(Q,K),Nr=Er.getContext("2d",{willReadFrequently:!0})),Er.width=Q,Er.height=K,Nr.drawImage(v,0,0,Q,K);const X=Nr.getImageData(_,B,F,U);return Nr.clearRect(0,0,Q,K),X.data})(l,t,s,A,p)}))},m.d1=Up,m.d2=E,m.d3=class{constructor(l,t){this.layers={[em]:this},this.name=em,this.version=t?t.version:1,this.extent=t?t.extent:4096,this.length=l.length,this.features=l}feature(l){return new f4(this.features[l],this.extent)}},m.d4=Qc,m.d5=pi,m.e=_t,m.f=l=>o(void 0,void 0,void 0,(function*(){if(l.byteLength===0)return createImageBitmap(new ImageData(1,1));const t=new Blob([new Uint8Array(l)],{type:"image/png"});try{return createImageBitmap(t)}catch(s){throw new Error(`Could not load image because of ${s.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`)}})),m.g=Ct,m.h=l=>new Promise(((t,s)=>{const A=new Image;A.onload=()=>{t(A),URL.revokeObjectURL(A.src),A.onload=null,window.requestAnimationFrame((()=>{A.src=lr}))},A.onerror=()=>s(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const p=new Blob([new Uint8Array(l)],{type:"image/png"});A.src=l.byteLength?URL.createObjectURL(p):lr})),m.i=mr,m.j=(l,t)=>Ht(_t(l,{type:"json"}),t),m.k=rn,m.l=fr,m.m=Ht,m.n=(l,t)=>Ht(_t(l,{type:"arrayBuffer"}),t),m.o=function(l){return new qu(l).readFields(jt,[])},m.p=hr,m.q=function(l){return/[\u02EA\u02EB\u1100-\u11FF\u2E80-\u2FDF\u3000-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u4DBF\u4E00-\uA48C\uA490-\uA4C6\uA960-\uA97C\uAC00-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFE10-\uFE1F\uFE30-\uFE4F\uFF00-\uFFEF]|\uD81B[\uDFE0-\uDFFF]|[\uD81C-\uD822\uD840-\uD868\uD86A-\uD86D\uD86F-\uD872\uD874-\uD879\uD880-\uD883\uD885-\uD88C][\uDC00-\uDFFF]|\uD823[\uDC00-\uDCD5\uDCFF-\uDD1E\uDD80-\uDDF2]|\uD82B[\uDFF0-\uDFFF]|\uD82C[\uDC00-\uDEFB]|\uD83C[\uDE00-\uDEFF]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEAD\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0\uDFF0-\uDFFF]|\uD87B[\uDC00-\uDE5D]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A\uDF50-\uDFFF]|\uD88D[\uDC00-\uDC79]/gim.test(String.fromCodePoint(l))},m.r=mu,m.s=Dr,m.t=ci,m.u=mt,m.v=R,m.w=_r,m.x=Ni,m.y=re,m.z=mi})),u("worker",["./shared"],(function(m){class o{constructor(fe,pe){this.keyCache={},fe&&this.replace(fe,pe)}replace(fe,pe){this._layerConfigs={},this._layers={},this.update(fe,[],pe)}update(fe,pe,ve){for(const We of fe){this._layerConfigs[We.id]=We;const Ct=this._layers[We.id]=m.bU(We,ve);Ct._featureFilter=m.ak(Ct.filter,ve),this.keyCache[We.id]&&delete this.keyCache[We.id]}for(const We of pe)delete this.keyCache[We],delete this._layerConfigs[We],delete this._layers[We];this.familiesBySource={};const qe=m.cM(Object.values(this._layerConfigs),this.keyCache);for(const We of qe){const Ct=We.map((cr=>this._layers[cr.id])),vt=Ct[0];if(vt.visibility==="none")continue;const ct=vt.source||"";let bt=this.familiesBySource[ct];bt||(bt=this.familiesBySource[ct]={});const Ht=vt.sourceLayer||m.aa;let Ft=bt[Ht];Ft||(Ft=bt[Ht]=[]),Ft.push(Ct)}}}class w{constructor(fe){const pe={},ve=[];for(const vt in fe){const ct=fe[vt],bt=pe[vt]={};for(const Ht in ct){const Ft=ct[+Ht];if(!Ft||Ft.bitmap.width===0||Ft.bitmap.height===0)continue;const cr={x:0,y:0,w:Ft.bitmap.width+2,h:Ft.bitmap.height+2};ve.push(cr),bt[Ht]={rect:cr,metrics:Ft.metrics}}}const{w:qe,h:We}=m.p(ve),Ct=new m.r({width:qe||1,height:We||1});for(const vt in fe){const ct=fe[vt];for(const bt in ct){const Ht=ct[+bt];if(!Ht||Ht.bitmap.width===0||Ht.bitmap.height===0)continue;const Ft=pe[vt][bt].rect;m.r.copy(Ht.bitmap,Ct,{x:0,y:0},{x:Ft.x+1,y:Ft.y+1},Ht.bitmap)}}this.image=Ct,this.positions=pe}}m.cN("GlyphAtlas",w);class E{constructor(fe){this.tileID=new m.a2(fe.tileID.overscaledZ,fe.tileID.wrap,fe.tileID.canonical.z,fe.tileID.canonical.x,fe.tileID.canonical.y),this.uid=fe.uid,this.zoom=fe.zoom,this.pixelRatio=fe.pixelRatio,this.tileSize=fe.tileSize,this.source=fe.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=fe.showCollisionBoxes,this.collectResourceTiming=!!fe.collectResourceTiming,this.returnDependencies=!!fe.returnDependencies,this.promoteId=fe.promoteId,this.inFlightDependencies=[]}parse(fe,pe,ve,qe,We){return m._(this,void 0,void 0,(function*(){this.status="parsing",this.data=fe,this.collisionBoxArray=new m.ai;const Ct=new m.cO(Object.keys(fe.layers).sort()),vt=new m.cP(this.tileID,this.promoteId);vt.bucketLayerIDs=[];const ct={},bt={featureIndex:vt,iconDependencies:{},patternDependencies:{},glyphDependencies:{},dashDependencies:{},availableImages:ve,subdivisionGranularity:We},Ht=pe.familiesBySource[this.source];for(const Bn in Ht){const xn=fe.layers[Bn];if(!xn)continue;xn.version===1&&m.w(`Vector tile source "${this.source}" layer "${Bn}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const Ui=Ct.encode(Bn),ai=[];for(let Yt=0;Yt<xn.length;Yt++){const Zn=xn.feature(Yt),$i=vt.getId(Zn,Bn);ai.push({feature:Zn,id:$i,index:Yt,sourceLayerIndex:Ui})}for(const Yt of Ht[Bn]){const Zn=Yt[0];Zn.source!==this.source&&m.w(`layer.source = ${Zn.source} does not equal this.source = ${this.source}`),Zn.isHidden(this.zoom,!0)||(I(Yt,this.zoom,ve),(ct[Zn.id]=Zn.createBucket({index:vt.bucketLayerIDs.length,layers:Yt,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:Ui,sourceID:this.source})).populate(ai,bt,this.tileID.canonical),vt.bucketLayerIDs.push(Yt.map(($i=>$i.id))))}}const Ft=m.bZ(bt.glyphDependencies,(Bn=>Object.keys(Bn).map(Number)));this.inFlightDependencies.forEach((Bn=>Bn?.abort())),this.inFlightDependencies=[];let cr=Promise.resolve({});if(Object.keys(Ft).length){const Bn=new AbortController;this.inFlightDependencies.push(Bn),cr=qe.sendAsync({type:"GG",data:{stacks:Ft,source:this.source,tileID:this.tileID,type:"glyphs"}},Bn)}const Jt=Object.keys(bt.iconDependencies);let fr=Promise.resolve({});if(Jt.length){const Bn=new AbortController;this.inFlightDependencies.push(Bn),fr=qe.sendAsync({type:"GI",data:{icons:Jt,source:this.source,tileID:this.tileID,type:"icons"}},Bn)}const rn=Object.keys(bt.patternDependencies);let Tr=Promise.resolve({});if(rn.length){const Bn=new AbortController;this.inFlightDependencies.push(Bn),Tr=qe.sendAsync({type:"GI",data:{icons:rn,source:this.source,tileID:this.tileID,type:"patterns"}},Bn)}const mt=bt.dashDependencies;let tn=Promise.resolve({});if(Object.keys(mt).length){const Bn=new AbortController;this.inFlightDependencies.push(Bn),tn=qe.sendAsync({type:"GDA",data:{dashes:mt}},Bn)}const[Qr,gr,$r,Rn]=yield Promise.all([cr,fr,Tr,tn]),xr=new w(Qr),Tn=new m.cQ(gr,$r);for(const Bn in ct){const xn=ct[Bn];xn instanceof m.aj?(I(xn.layers,this.zoom,ve),m.cR({bucket:xn,glyphMap:Qr,glyphPositions:xr.positions,imageMap:gr,imagePositions:Tn.iconPositions,showCollisionBoxes:this.showCollisionBoxes,canonical:this.tileID.canonical,subdivisionGranularity:bt.subdivisionGranularity})):xn.hasDependencies&&(xn instanceof m.cS||xn instanceof m.cT||xn instanceof m.cU)&&(I(xn.layers,this.zoom,ve),xn.addFeatures(bt,this.tileID.canonical,Tn.patternPositions,Rn))}return this.status="done",{buckets:Object.values(ct).filter((Bn=>!Bn.isEmpty())),featureIndex:vt,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:xr.image,imageAtlas:Tn,dashPositions:Rn,glyphMap:this.returnDependencies?Qr:null,iconMap:this.returnDependencies?gr:null,glyphPositions:this.returnDependencies?xr.positions:null}}))}}function I(pt,fe,pe){const ve=new m.H(fe);for(const qe of pt)qe.recalculate(ve,pe)}class D{constructor(fe,pe,ve,qe,We){this.type=fe,this.properties=ve||{},this.extent=We,this.pointsArray=pe,this.id=qe}loadGeometry(){return this.pointsArray.map((fe=>fe.map((pe=>new m.P(pe.x,pe.y)))))}}class O{constructor(fe,pe,ve){this.version=2,this._myFeatures=fe,this.name=pe,this.length=fe.length,this.extent=ve}feature(fe){return this._myFeatures[fe]}}class P{constructor(){this.layers={}}addLayer(fe){this.layers[fe.name]=fe}}function W(pt){let fe=m.cV(pt);return fe.byteOffset===0&&fe.byteLength===fe.buffer.byteLength||(fe=new Uint8Array(fe)),{vectorTile:pt,rawData:fe.buffer}}function z(pt,fe,pe){const{extent:ve}=pt,qe=Math.pow(2,pe.z-fe.z),We=(pe.x-fe.x*qe)*ve,Ct=(pe.y-fe.y*qe)*ve,vt=[];for(let ct=0;ct<pt.length;ct++){const bt=pt.feature(ct);let Ht=bt.loadGeometry();for(const cr of Ht)for(const Jt of cr)Jt.x=Jt.x*qe-We,Jt.y=Jt.y*qe-Ct;const Ft=128;Ht=m.cW(Ht,bt.type,-Ft,-Ft,ve+Ft,ve+Ft),Ht.length!==0&&vt.push(new D(bt.type,Ht,bt.properties,bt.id,ve))}return new O(vt,pt.name,ve)}class H{constructor(fe,pe,ve){this.actor=fe,this.layerIndex=pe,this.availableImages=ve,this.fetching={},this.loading={},this.loaded={},this.overzoomedTileResultCache=new m.cX(1e3)}loadVectorTile(fe,pe){return m._(this,void 0,void 0,(function*(){const ve=yield m.n(fe.request,pe);try{return{vectorTile:fe.encoding!=="mlt"?new m.cY(new m.cZ(ve.data)):new m.c_(ve.data),rawData:ve.data,cacheControl:ve.cacheControl,expires:ve.expires}}catch(qe){const We=new Uint8Array(ve.data);let Ct=`Unable to parse the tile at ${fe.request.url}, `;throw Ct+=We[0]===31&&We[1]===139?"please make sure the data is not gzipped and that you have configured the relevant header in the server":`got error: ${qe.message}`,new Error(Ct)}}))}loadTile(fe){return m._(this,void 0,void 0,(function*(){const{uid:pe,overzoomParameters:ve}=fe;ve&&(fe.request=ve.overzoomRequest);const qe=!!(fe&&fe.request&&fe.request.collectResourceTiming)&&new m.c$(fe.request),We=new E(fe);this.loading[pe]=We;const Ct=new AbortController;We.abort=Ct;try{const vt=yield this.loadVectorTile(fe,Ct);if(delete this.loading[pe],!vt)return null;if(ve){const cr=this._getOverzoomTile(fe,vt.vectorTile);vt.rawData=cr.rawData,vt.vectorTile=cr.vectorTile}const ct=vt.rawData,bt={};vt.expires&&(bt.expires=vt.expires),vt.cacheControl&&(bt.cacheControl=vt.cacheControl);const Ht={};if(qe){const cr=qe.finish();cr&&(Ht.resourceTiming=JSON.parse(JSON.stringify(cr)))}We.vectorTile=vt.vectorTile;const Ft=We.parse(vt.vectorTile,this.layerIndex,this.availableImages,this.actor,fe.subdivisionGranularity);this.loaded[pe]=We,this.fetching[pe]={rawTileData:ct,cacheControl:bt,resourceTiming:Ht};try{const cr=yield Ft;return m.e({rawTileData:ct.slice(0),encoding:fe.encoding},cr,bt,Ht)}finally{delete this.fetching[pe]}}catch(vt){throw delete this.loading[pe],We.status="done",this.loaded[pe]=We,vt}}))}_getOverzoomTile(fe,pe){const{tileID:ve,source:qe,overzoomParameters:We}=fe,{maxZoomTileID:Ct}=We,vt=`${Ct.key}_${ve.key}`,ct=this.overzoomedTileResultCache.get(vt);if(ct)return ct;const bt=new P,Ht=this.layerIndex.familiesBySource[qe];for(const cr in Ht){const Jt=pe.layers[cr];if(!Jt)continue;const fr=z(Jt,Ct,ve.canonical);fr.length>0&&bt.addLayer(fr)}const Ft=W(bt);return this.overzoomedTileResultCache.set(vt,Ft),Ft}reloadTile(fe){return m._(this,void 0,void 0,(function*(){const pe=fe.uid;if(!this.loaded||!this.loaded[pe])throw new Error("Should not be trying to reload a tile that was never loaded or has been removed");const ve=this.loaded[pe];if(ve.showCollisionBoxes=fe.showCollisionBoxes,ve.status==="parsing"){const qe=yield ve.parse(ve.vectorTile,this.layerIndex,this.availableImages,this.actor,fe.subdivisionGranularity);let We;if(this.fetching[pe]){const{rawTileData:Ct,cacheControl:vt,resourceTiming:ct}=this.fetching[pe];delete this.fetching[pe],We=m.e({rawTileData:Ct.slice(0),encoding:fe.encoding},qe,vt,ct)}else We=qe;return We}if(ve.status==="done"&&ve.vectorTile)return ve.parse(ve.vectorTile,this.layerIndex,this.availableImages,this.actor,fe.subdivisionGranularity)}))}abortTile(fe){return m._(this,void 0,void 0,(function*(){const pe=this.loading,ve=fe.uid;pe&&pe[ve]&&pe[ve].abort&&(pe[ve].abort.abort(),delete pe[ve])}))}removeTile(fe){return m._(this,void 0,void 0,(function*(){this.loaded&&this.loaded[fe.uid]&&delete this.loaded[fe.uid]}))}}class Z{constructor(){this.loaded={}}loadTile(fe){return m._(this,void 0,void 0,(function*(){const{uid:pe,encoding:ve,rawImageData:qe,redFactor:We,greenFactor:Ct,blueFactor:vt,baseShift:ct}=fe,bt=qe.width+2,Ht=qe.height+2,Ft=m.b(qe)?new m.R({width:bt,height:Ht},yield m.d0(qe,-1,-1,bt,Ht)):qe,cr=new m.d1(pe,Ft,ve,We,Ct,vt,ct);return this.loaded=this.loaded||{},this.loaded[pe]=cr,cr}))}removeTile(fe){const pe=this.loaded,ve=fe.uid;pe&&pe[ve]&&delete pe[ve]}}var se,ce,de=(function(){if(ce)return se;function pt(pe,ve){if(pe.length!==0){fe(pe[0],ve);for(var qe=1;qe<pe.length;qe++)fe(pe[qe],!ve)}}function fe(pe,ve){for(var qe=0,We=0,Ct=0,vt=pe.length,ct=vt-1;Ct<vt;ct=Ct++){var bt=(pe[Ct][0]-pe[ct][0])*(pe[ct][1]+pe[Ct][1]),Ht=qe+bt;We+=Math.abs(qe)>=Math.abs(bt)?qe-Ht+bt:bt-Ht+qe,qe=Ht}qe+We>=0!=!!ve&&pe.reverse()}return ce=1,se=function pe(ve,qe){var We,Ct=ve&&ve.type;if(Ct==="FeatureCollection")for(We=0;We<ve.features.length;We++)pe(ve.features[We],qe);else if(Ct==="GeometryCollection")for(We=0;We<ve.geometries.length;We++)pe(ve.geometries[We],qe);else if(Ct==="Feature")pe(ve.geometry,qe);else if(Ct==="Polygon")pt(ve.coordinates,qe);else if(Ct==="MultiPolygon")for(We=0;We<ve.coordinates.length;We++)pt(ve.coordinates[We],qe);return ve}})(),Pe=m.d2(de);const He={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:pt=>pt},Xe=Math.fround||(Qe=new Float32Array(1),pt=>(Qe[0]=+pt,Qe[0]));var Qe;class Be{constructor(fe){this.options=Object.assign(Object.create(He),fe),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(fe){const{log:pe,minZoom:ve,maxZoom:qe}=this.options;pe&&console.time("total time");const We=`prepare ${fe.length} points`;pe&&console.time(We),this.points=fe;const Ct=[];for(let ct=0;ct<fe.length;ct++){const bt=fe[ct];if(!bt.geometry)continue;const[Ht,Ft]=bt.geometry.coordinates,cr=Xe(me(Ht)),Jt=Xe(Te(Ft));Ct.push(cr,Jt,1/0,ct,-1,1),this.options.reduce&&Ct.push(0)}let vt=this.trees[qe+1]=this._createTree(Ct);pe&&console.timeEnd(We);for(let ct=qe;ct>=ve;ct--){const bt=+Date.now();vt=this.trees[ct]=this._createTree(this._cluster(vt,ct)),pe&&console.log("z%d: %d clusters in %dms",ct,vt.numItems,+Date.now()-bt)}return pe&&console.timeEnd("total time"),this}getClusters(fe,pe){let ve=((fe[0]+180)%360+360)%360-180;const qe=Math.max(-90,Math.min(90,fe[1]));let We=fe[2]===180?180:((fe[2]+180)%360+360)%360-180;const Ct=Math.max(-90,Math.min(90,fe[3]));if(fe[2]-fe[0]>=360)ve=-180,We=180;else if(ve>We){const Ft=this.getClusters([ve,qe,180,Ct],pe),cr=this.getClusters([-180,qe,We,Ct],pe);return Ft.concat(cr)}const vt=this.trees[this._limitZoom(pe)],ct=vt.range(me(ve),Te(Ct),me(We),Te(qe)),bt=vt.data,Ht=[];for(const Ft of ct){const cr=this.stride*Ft;Ht.push(bt[cr+5]>1?Je(bt,cr,this.clusterProps):this.points[bt[cr+3]])}return Ht}getChildren(fe){const pe=this._getOriginId(fe),ve=this._getOriginZoom(fe),qe="No cluster with the specified id.",We=this.trees[ve];if(!We)throw new Error(qe);const Ct=We.data;if(pe*this.stride>=Ct.length)throw new Error(qe);const vt=this.options.radius/(this.options.extent*Math.pow(2,ve-1)),ct=We.within(Ct[pe*this.stride],Ct[pe*this.stride+1],vt),bt=[];for(const Ht of ct){const Ft=Ht*this.stride;Ct[Ft+4]===fe&&bt.push(Ct[Ft+5]>1?Je(Ct,Ft,this.clusterProps):this.points[Ct[Ft+3]])}if(bt.length===0)throw new Error(qe);return bt}getLeaves(fe,pe,ve){const qe=[];return this._appendLeaves(qe,fe,pe=pe||10,ve=ve||0,0),qe}getTile(fe,pe,ve){const qe=this.trees[this._limitZoom(fe)],We=Math.pow(2,fe),{extent:Ct,radius:vt}=this.options,ct=vt/Ct,bt=(ve-ct)/We,Ht=(ve+1+ct)/We,Ft={features:[]};return this._addTileFeatures(qe.range((pe-ct)/We,bt,(pe+1+ct)/We,Ht),qe.data,pe,ve,We,Ft),pe===0&&this._addTileFeatures(qe.range(1-ct/We,bt,1,Ht),qe.data,We,ve,We,Ft),pe===We-1&&this._addTileFeatures(qe.range(0,bt,ct/We,Ht),qe.data,-1,ve,We,Ft),Ft.features.length?Ft:null}getClusterExpansionZoom(fe){let pe=this._getOriginZoom(fe)-1;for(;pe<=this.options.maxZoom;){const ve=this.getChildren(fe);if(pe++,ve.length!==1)break;fe=ve[0].properties.cluster_id}return pe}_appendLeaves(fe,pe,ve,qe,We){const Ct=this.getChildren(pe);for(const vt of Ct){const ct=vt.properties;if(ct&&ct.cluster?We+ct.point_count<=qe?We+=ct.point_count:We=this._appendLeaves(fe,ct.cluster_id,ve,qe,We):We<qe?We++:fe.push(vt),fe.length===ve)break}return We}_createTree(fe){const pe=new m.aU(fe.length/this.stride|0,this.options.nodeSize,Float32Array);for(let ve=0;ve<fe.length;ve+=this.stride)pe.add(fe[ve],fe[ve+1]);return pe.finish(),pe.data=fe,pe}_addTileFeatures(fe,pe,ve,qe,We,Ct){for(const vt of fe){const ct=vt*this.stride,bt=pe[ct+5]>1;let Ht,Ft,cr;if(bt)Ht=Ae(pe,ct,this.clusterProps),Ft=pe[ct],cr=pe[ct+1];else{const rn=this.points[pe[ct+3]];Ht=rn.properties;const[Tr,mt]=rn.geometry.coordinates;Ft=me(Tr),cr=Te(mt)}const Jt={type:1,geometry:[[Math.round(this.options.extent*(Ft*We-ve)),Math.round(this.options.extent*(cr*We-qe))]],tags:Ht};let fr;fr=bt||this.options.generateId?pe[ct+3]:this.points[pe[ct+3]].id,fr!==void 0&&(Jt.id=fr),Ct.features.push(Jt)}}_limitZoom(fe){return Math.max(this.options.minZoom,Math.min(Math.floor(+fe),this.options.maxZoom+1))}_cluster(fe,pe){const{radius:ve,extent:qe,reduce:We,minPoints:Ct}=this.options,vt=ve/(qe*Math.pow(2,pe)),ct=fe.data,bt=[],Ht=this.stride;for(let Ft=0;Ft<ct.length;Ft+=Ht){if(ct[Ft+2]<=pe)continue;ct[Ft+2]=pe;const cr=ct[Ft],Jt=ct[Ft+1],fr=fe.within(ct[Ft],ct[Ft+1],vt),rn=ct[Ft+5];let Tr=rn;for(const mt of fr){const tn=mt*Ht;ct[tn+2]>pe&&(Tr+=ct[tn+5])}if(Tr>rn&&Tr>=Ct){let mt,tn=cr*rn,Qr=Jt*rn,gr=-1;const $r=(Ft/Ht<<5)+(pe+1)+this.points.length;for(const Rn of fr){const xr=Rn*Ht;if(ct[xr+2]<=pe)continue;ct[xr+2]=pe;const Tn=ct[xr+5];tn+=ct[xr]*Tn,Qr+=ct[xr+1]*Tn,ct[xr+4]=$r,We&&(mt||(mt=this._map(ct,Ft,!0),gr=this.clusterProps.length,this.clusterProps.push(mt)),We(mt,this._map(ct,xr)))}ct[Ft+4]=$r,bt.push(tn/Tr,Qr/Tr,1/0,$r,-1,Tr),We&&bt.push(gr)}else{for(let mt=0;mt<Ht;mt++)bt.push(ct[Ft+mt]);if(Tr>1)for(const mt of fr){const tn=mt*Ht;if(!(ct[tn+2]<=pe)){ct[tn+2]=pe;for(let Qr=0;Qr<Ht;Qr++)bt.push(ct[tn+Qr])}}}}return bt}_getOriginId(fe){return fe-this.points.length>>5}_getOriginZoom(fe){return(fe-this.points.length)%32}_map(fe,pe,ve){if(fe[pe+5]>1){const Ct=this.clusterProps[fe[pe+6]];return ve?Object.assign({},Ct):Ct}const qe=this.points[fe[pe+3]].properties,We=this.options.map(qe);return ve&&We===qe?Object.assign({},We):We}}function Je(pt,fe,pe){return{type:"Feature",id:pt[fe+3],properties:Ae(pt,fe,pe),geometry:{type:"Point",coordinates:[(ve=pt[fe],360*(ve-.5)),Ie(pt[fe+1])]}};var ve}function Ae(pt,fe,pe){const ve=pt[fe+5],qe=ve>=1e4?`${Math.round(ve/1e3)}k`:ve>=1e3?Math.round(ve/100)/10+"k":ve,We=pt[fe+6],Ct=We===-1?{}:Object.assign({},pe[We]);return Object.assign(Ct,{cluster:!0,cluster_id:pt[fe+3],point_count:ve,point_count_abbreviated:qe})}function me(pt){return pt/360+.5}function Te(pt){const fe=Math.sin(pt*Math.PI/180),pe=.5-.25*Math.log((1+fe)/(1-fe))/Math.PI;return pe<0?0:pe>1?1:pe}function Ie(pt){const fe=(180-360*pt)*Math.PI/180;return 360*Math.atan(Math.exp(fe))/Math.PI-90}function ut(pt,fe,pe,ve){let qe=ve;const We=fe+(pe-fe>>1);let Ct,vt=pe-fe;const ct=pt[fe],bt=pt[fe+1],Ht=pt[pe],Ft=pt[pe+1];for(let cr=fe+3;cr<pe;cr+=3){const Jt=it(pt[cr],pt[cr+1],ct,bt,Ht,Ft);if(Jt>qe)Ct=cr,qe=Jt;else if(Jt===qe){const fr=Math.abs(cr-We);fr<vt&&(Ct=cr,vt=fr)}}qe>ve&&(Ct-fe>3&&ut(pt,fe,Ct,ve),pt[Ct+2]=qe,pe-Ct>3&&ut(pt,Ct,pe,ve))}function it(pt,fe,pe,ve,qe,We){let Ct=qe-pe,vt=We-ve;if(Ct!==0||vt!==0){const ct=((pt-pe)*Ct+(fe-ve)*vt)/(Ct*Ct+vt*vt);ct>1?(pe=qe,ve=We):ct>0&&(pe+=Ct*ct,ve+=vt*ct)}return Ct=pt-pe,vt=fe-ve,Ct*Ct+vt*vt}function ot(pt,fe,pe,ve){const qe={id:pt??null,type:fe,geometry:pe,tags:ve,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};if(fe==="Point"||fe==="MultiPoint"||fe==="LineString")ke(qe,pe);else if(fe==="Polygon")ke(qe,pe[0]);else if(fe==="MultiLineString")for(const We of pe)ke(qe,We);else if(fe==="MultiPolygon")for(const We of pe)ke(qe,We[0]);return qe}function ke(pt,fe){for(let pe=0;pe<fe.length;pe+=3)pt.minX=Math.min(pt.minX,fe[pe]),pt.minY=Math.min(pt.minY,fe[pe+1]),pt.maxX=Math.max(pt.maxX,fe[pe]),pt.maxY=Math.max(pt.maxY,fe[pe+1])}function Ne(pt,fe,pe,ve){if(!fe.geometry)return;const qe=fe.geometry.coordinates;if(qe&&qe.length===0)return;const We=fe.geometry.type,Ct=Math.pow(pe.tolerance/((1<<pe.maxZoom)*pe.extent),2);let vt=[],ct=fe.id;if(pe.promoteId?ct=fe.properties[pe.promoteId]:pe.generateId&&(ct=ve||0),We==="Point")yt(qe,vt);else if(We==="MultiPoint")for(const bt of qe)yt(bt,vt);else if(We==="LineString")Ce(qe,vt,Ct,!1);else if(We==="MultiLineString"){if(pe.lineMetrics){for(const bt of qe)vt=[],Ce(bt,vt,Ct,!1),pt.push(ot(ct,"LineString",vt,fe.properties));return}ie(qe,vt,Ct,!1)}else if(We==="Polygon")ie(qe,vt,Ct,!0);else{if(We!=="MultiPolygon"){if(We==="GeometryCollection"){for(const bt of fe.geometry.geometries)Ne(pt,{id:ct,geometry:bt,properties:fe.properties},pe,ve);return}throw new Error("Input data is not a valid GeoJSON object.")}for(const bt of qe){const Ht=[];ie(bt,Ht,Ct,!0),vt.push(Ht)}}pt.push(ot(ct,We,vt,fe.properties))}function yt(pt,fe){fe.push(Ee(pt[0]),Le(pt[1]),0)}function Ce(pt,fe,pe,ve){let qe,We,Ct=0;for(let ct=0;ct<pt.length;ct++){const bt=Ee(pt[ct][0]),Ht=Le(pt[ct][1]);fe.push(bt,Ht,0),ct>0&&(Ct+=ve?(qe*Ht-bt*We)/2:Math.sqrt(Math.pow(bt-qe,2)+Math.pow(Ht-We,2))),qe=bt,We=Ht}const vt=fe.length-3;fe[2]=1,ut(fe,0,vt,pe),fe[vt+2]=1,fe.size=Math.abs(Ct),fe.start=0,fe.end=fe.size}function ie(pt,fe,pe,ve){for(let qe=0;qe<pt.length;qe++){const We=[];Ce(pt[qe],We,pe,ve),fe.push(We)}}function Ee(pt){return pt/360+.5}function Le(pt){const fe=Math.sin(pt*Math.PI/180),pe=.5-.25*Math.log((1+fe)/(1-fe))/Math.PI;return pe<0?0:pe>1?1:pe}function Ve(pt,fe,pe,ve,qe,We,Ct,vt){if(ve/=fe,We>=(pe/=fe)&&Ct<ve)return pt;if(Ct<pe||We>=ve)return null;const ct=[];for(const bt of pt){const Ht=bt.geometry;let Ft=bt.type;const cr=qe===0?bt.minX:bt.minY,Jt=qe===0?bt.maxX:bt.maxY;if(cr>=pe&&Jt<ve){ct.push(bt);continue}if(Jt<pe||cr>=ve)continue;let fr=[];if(Ft==="Point"||Ft==="MultiPoint")nt(Ht,fr,pe,ve,qe);else if(Ft==="LineString")et(Ht,fr,pe,ve,qe,!1,vt.lineMetrics);else if(Ft==="MultiLineString")St(Ht,fr,pe,ve,qe,!1);else if(Ft==="Polygon")St(Ht,fr,pe,ve,qe,!0);else if(Ft==="MultiPolygon")for(const rn of Ht){const Tr=[];St(rn,Tr,pe,ve,qe,!0),Tr.length&&fr.push(Tr)}if(fr.length){if(vt.lineMetrics&&Ft==="LineString"){for(const rn of fr)ct.push(ot(bt.id,Ft,rn,bt.tags));continue}Ft!=="LineString"&&Ft!=="MultiLineString"||(fr.length===1?(Ft="LineString",fr=fr[0]):Ft="MultiLineString"),Ft!=="Point"&&Ft!=="MultiPoint"||(Ft=fr.length===3?"Point":"MultiPoint"),ct.push(ot(bt.id,Ft,fr,bt.tags))}}return ct.length?ct:null}function nt(pt,fe,pe,ve,qe){for(let We=0;We<pt.length;We+=3){const Ct=pt[We+qe];Ct>=pe&&Ct<=ve&&Tt(fe,pt[We],pt[We+1],pt[We+2])}}function et(pt,fe,pe,ve,qe,We,Ct){let vt=_t(pt);const ct=qe===0?Gt:or;let bt,Ht,Ft=pt.start;for(let Tr=0;Tr<pt.length-3;Tr+=3){const mt=pt[Tr],tn=pt[Tr+1],Qr=pt[Tr+2],gr=pt[Tr+3],$r=pt[Tr+4],Rn=qe===0?mt:tn,xr=qe===0?gr:$r;let Tn=!1;Ct&&(bt=Math.sqrt(Math.pow(mt-gr,2)+Math.pow(tn-$r,2))),Rn<pe?xr>pe&&(Ht=ct(vt,mt,tn,gr,$r,pe),Ct&&(vt.start=Ft+bt*Ht)):Rn>ve?xr<ve&&(Ht=ct(vt,mt,tn,gr,$r,ve),Ct&&(vt.start=Ft+bt*Ht)):Tt(vt,mt,tn,Qr),xr<pe&&Rn>=pe&&(Ht=ct(vt,mt,tn,gr,$r,pe),Tn=!0),xr>ve&&Rn<=ve&&(Ht=ct(vt,mt,tn,gr,$r,ve),Tn=!0),!We&&Tn&&(Ct&&(vt.end=Ft+bt*Ht),fe.push(vt),vt=_t(pt)),Ct&&(Ft+=bt)}let cr=pt.length-3;const Jt=pt[cr],fr=pt[cr+1],rn=qe===0?Jt:fr;rn>=pe&&rn<=ve&&Tt(vt,Jt,fr,pt[cr+2]),cr=vt.length-3,We&&cr>=3&&(vt[cr]!==vt[0]||vt[cr+1]!==vt[1])&&Tt(vt,vt[0],vt[1],vt[2]),vt.length&&fe.push(vt)}function _t(pt){const fe=[];return fe.size=pt.size,fe.start=pt.start,fe.end=pt.end,fe}function St(pt,fe,pe,ve,qe,We){for(const Ct of pt)et(Ct,fe,pe,ve,qe,We,!1)}function Tt(pt,fe,pe,ve){pt.push(fe,pe,ve)}function Gt(pt,fe,pe,ve,qe,We){const Ct=(We-fe)/(ve-fe);return Tt(pt,We,pe+(qe-pe)*Ct,1),Ct}function or(pt,fe,pe,ve,qe,We){const Ct=(We-pe)/(qe-pe);return Tt(pt,fe+(ve-fe)*Ct,We,1),Ct}function Ar(pt,fe){const pe=[];for(let ve=0;ve<pt.length;ve++){const qe=pt[ve],We=qe.type;let Ct;if(We==="Point"||We==="MultiPoint"||We==="LineString")Ct=_r(qe.geometry,fe);else if(We==="MultiLineString"||We==="Polygon"){Ct=[];for(const vt of qe.geometry)Ct.push(_r(vt,fe))}else if(We==="MultiPolygon"){Ct=[];for(const vt of qe.geometry){const ct=[];for(const bt of vt)ct.push(_r(bt,fe));Ct.push(ct)}}pe.push(ot(qe.id,We,Ct,qe.tags))}return pe}function _r(pt,fe){const pe=[];pe.size=pt.size,pt.start!==void 0&&(pe.start=pt.start,pe.end=pt.end);for(let ve=0;ve<pt.length;ve+=3)pe.push(pt[ve]+fe,pt[ve+1],pt[ve+2]);return pe}function je(pt,fe){if(pt.transformed)return pt;const pe=1<<pt.z,ve=pt.x,qe=pt.y;for(const We of pt.features){const Ct=We.geometry,vt=We.type;if(We.geometry=[],vt===1)for(let ct=0;ct<Ct.length;ct+=2)We.geometry.push(mr(Ct[ct],Ct[ct+1],fe,pe,ve,qe));else for(let ct=0;ct<Ct.length;ct++){const bt=[];for(let Ht=0;Ht<Ct[ct].length;Ht+=2)bt.push(mr(Ct[ct][Ht],Ct[ct][Ht+1],fe,pe,ve,qe));We.geometry.push(bt)}}return pt.transformed=!0,pt}function mr(pt,fe,pe,ve,qe,We){return[Math.round(pe*(pt*ve-qe)),Math.round(pe*(fe*ve-We))]}function kr(pt,fe,pe,ve,qe){const We=fe===qe.maxZoom?0:qe.tolerance/((1<<fe)*qe.extent),Ct={features:[],numPoints:0,numSimplified:0,numFeatures:pt.length,source:null,x:pe,y:ve,z:fe,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0};for(const vt of pt)Vr(Ct,vt,We,qe);return Ct}function Vr(pt,fe,pe,ve){const qe=fe.geometry,We=fe.type,Ct=[];if(pt.minX=Math.min(pt.minX,fe.minX),pt.minY=Math.min(pt.minY,fe.minY),pt.maxX=Math.max(pt.maxX,fe.maxX),pt.maxY=Math.max(pt.maxY,fe.maxY),We==="Point"||We==="MultiPoint")for(let vt=0;vt<qe.length;vt+=3)Ct.push(qe[vt],qe[vt+1]),pt.numPoints++,pt.numSimplified++;else if(We==="LineString")lr(Ct,qe,pt,pe,!1,!1);else if(We==="MultiLineString"||We==="Polygon")for(let vt=0;vt<qe.length;vt++)lr(Ct,qe[vt],pt,pe,We==="Polygon",vt===0);else if(We==="MultiPolygon")for(let vt=0;vt<qe.length;vt++){const ct=qe[vt];for(let bt=0;bt<ct.length;bt++)lr(Ct,ct[bt],pt,pe,!0,bt===0)}if(Ct.length){let vt=fe.tags||null;if(We==="LineString"&&ve.lineMetrics){vt={};for(const bt in fe.tags)vt[bt]=fe.tags[bt];vt.mapbox_clip_start=qe.start/qe.size,vt.mapbox_clip_end=qe.end/qe.size}const ct={geometry:Ct,type:We==="Polygon"||We==="MultiPolygon"?3:We==="LineString"||We==="MultiLineString"?2:1,tags:vt};fe.id!==null&&(ct.id=fe.id),pt.features.push(ct)}}function lr(pt,fe,pe,ve,qe,We){const Ct=ve*ve;if(ve>0&&fe.size<(qe?Ct:ve))return void(pe.numPoints+=fe.length/3);const vt=[];for(let ct=0;ct<fe.length;ct+=3)(ve===0||fe[ct+2]>Ct)&&(pe.numSimplified++,vt.push(fe[ct],fe[ct+1])),pe.numPoints++;qe&&(function(ct,bt){let Ht=0;for(let Ft=0,cr=ct.length,Jt=cr-2;Ft<cr;Jt=Ft,Ft+=2)Ht+=(ct[Ft]-ct[Jt])*(ct[Ft+1]+ct[Jt+1]);if(Ht>0===bt)for(let Ft=0,cr=ct.length;Ft<cr/2;Ft+=2){const Jt=ct[Ft],fr=ct[Ft+1];ct[Ft]=ct[cr-2-Ft],ct[Ft+1]=ct[cr-1-Ft],ct[cr-2-Ft]=Jt,ct[cr-1-Ft]=fr}})(vt,We),pt.push(vt)}const Gr={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0};class Er{constructor(fe,pe){const ve=(pe=this.options=(function(We,Ct){for(const vt in Ct)We[vt]=Ct[vt];return We})(Object.create(Gr),pe)).debug;if(ve&&console.time("preprocess data"),pe.maxZoom<0||pe.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(pe.promoteId&&pe.generateId)throw new Error("promoteId and generateId cannot be used together.");let qe=(function(We,Ct){const vt=[];if(We.type==="FeatureCollection")for(let ct=0;ct<We.features.length;ct++)Ne(vt,We.features[ct],Ct,ct);else Ne(vt,We.type==="Feature"?We:{geometry:We},Ct);return vt})(fe,pe);this.tiles={},this.tileCoords=[],ve&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",pe.indexMaxZoom,pe.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),qe=(function(We,Ct){const vt=Ct.buffer/Ct.extent;let ct=We;const bt=Ve(We,1,-1-vt,vt,0,-1,2,Ct),Ht=Ve(We,1,1-vt,2+vt,0,-1,2,Ct);return(bt||Ht)&&(ct=Ve(We,1,-vt,1+vt,0,-1,2,Ct)||[],bt&&(ct=Ar(bt,1).concat(ct)),Ht&&(ct=ct.concat(Ar(Ht,-1)))),ct})(qe,pe),qe.length&&this.splitTile(qe,0,0,0),ve&&(qe.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}splitTile(fe,pe,ve,qe,We,Ct,vt){const ct=[fe,pe,ve,qe],bt=this.options,Ht=bt.debug;for(;ct.length;){qe=ct.pop(),ve=ct.pop(),pe=ct.pop(),fe=ct.pop();const Ft=1<<pe,cr=Nr(pe,ve,qe);let Jt=this.tiles[cr];if(!Jt&&(Ht>1&&console.time("creation"),Jt=this.tiles[cr]=kr(fe,pe,ve,qe,bt),this.tileCoords.push({z:pe,x:ve,y:qe}),Ht)){Ht>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",pe,ve,qe,Jt.numFeatures,Jt.numPoints,Jt.numSimplified),console.timeEnd("creation"));const Tn=`z${pe}`;this.stats[Tn]=(this.stats[Tn]||0)+1,this.total++}if(Jt.source=fe,We==null){if(pe===bt.indexMaxZoom||Jt.numPoints<=bt.indexMaxPoints)continue}else{if(pe===bt.maxZoom||pe===We)continue;if(We!=null){const Tn=We-pe;if(ve!==Ct>>Tn||qe!==vt>>Tn)continue}}if(Jt.source=null,fe.length===0)continue;Ht>1&&console.time("clipping");const fr=.5*bt.buffer/bt.extent,rn=.5-fr,Tr=.5+fr,mt=1+fr;let tn=null,Qr=null,gr=null,$r=null,Rn=Ve(fe,Ft,ve-fr,ve+Tr,0,Jt.minX,Jt.maxX,bt),xr=Ve(fe,Ft,ve+rn,ve+mt,0,Jt.minX,Jt.maxX,bt);fe=null,Rn&&(tn=Ve(Rn,Ft,qe-fr,qe+Tr,1,Jt.minY,Jt.maxY,bt),Qr=Ve(Rn,Ft,qe+rn,qe+mt,1,Jt.minY,Jt.maxY,bt),Rn=null),xr&&(gr=Ve(xr,Ft,qe-fr,qe+Tr,1,Jt.minY,Jt.maxY,bt),$r=Ve(xr,Ft,qe+rn,qe+mt,1,Jt.minY,Jt.maxY,bt),xr=null),Ht>1&&console.timeEnd("clipping"),ct.push(tn||[],pe+1,2*ve,2*qe),ct.push(Qr||[],pe+1,2*ve,2*qe+1),ct.push(gr||[],pe+1,2*ve+1,2*qe),ct.push($r||[],pe+1,2*ve+1,2*qe+1)}}getTile(fe,pe,ve){fe=+fe,pe=+pe,ve=+ve;const qe=this.options,{extent:We,debug:Ct}=qe;if(fe<0||fe>24)return null;const vt=1<<fe,ct=Nr(fe,pe=pe+vt&vt-1,ve);if(this.tiles[ct])return je(this.tiles[ct],We);Ct>1&&console.log("drilling down to z%d-%d-%d",fe,pe,ve);let bt,Ht=fe,Ft=pe,cr=ve;for(;!bt&&Ht>0;)Ht--,Ft>>=1,cr>>=1,bt=this.tiles[Nr(Ht,Ft,cr)];return bt&&bt.source?(Ct>1&&(console.log("found parent tile z%d-%d-%d",Ht,Ft,cr),console.time("drilling down")),this.splitTile(bt.source,Ht,Ft,cr,fe,pe,ve),Ct>1&&console.timeEnd("drilling down"),this.tiles[ct]?je(this.tiles[ct],We):null):null}}function Nr(pt,fe,pe){return 32*((1<<pt)*pe+fe)+pt}class Dr extends H{constructor(fe,pe,ve,qe=Dn){super(fe,pe,ve),this._dataUpdateable=new Map,this._createGeoJSONIndex=qe}loadVectorTile(fe,pe){return m._(this,void 0,void 0,(function*(){const ve=fe.tileID.canonical;if(!this._geoJSONIndex)throw new Error("Unable to parse the data into a cluster or geojson");const qe=this._geoJSONIndex.getTile(ve.z,ve.x,ve.y);return qe?W(new m.d3(qe.features,{version:2,extent:m.a5})):null}))}loadData(fe){return m._(this,void 0,void 0,(function*(){var pe;(pe=this._pendingRequest)===null||pe===void 0||pe.abort();const ve=this._startPerformance(fe);this._pendingRequest=new AbortController;try{(!this._pendingData||fe.request||fe.data||fe.dataDiff)&&(this._pendingData=this.loadAndProcessGeoJSON(fe,this._pendingRequest));const qe=yield this._pendingData;this._geoJSONIndex=this._createGeoJSONIndex(qe,fe),this.loaded={};const We={};return this._finishPerformance(ve,fe,We),We}catch(qe){if(delete this._pendingRequest,m.Z(qe))return{abandoned:!0};throw qe}}))}_startPerformance(fe){var pe;if(!((pe=fe?.request)===null||pe===void 0)&&pe.collectResourceTiming)return new m.c$(fe.request)}_finishPerformance(fe,pe,ve){if(!fe)return;const qe=fe.finish();qe&&(ve.resourceTiming={},ve.resourceTiming[pe.source]=JSON.parse(JSON.stringify(qe)))}getData(){return m._(this,void 0,void 0,(function*(){return this._pendingData}))}reloadTile(fe){const pe=this.loaded;return pe&&pe[fe.uid]?super.reloadTile(fe):this.loadTile(fe)}loadAndProcessGeoJSON(fe,pe){return m._(this,void 0,void 0,(function*(){let ve;if(fe.request?ve=yield this.loadGeoJSONFromUrl(fe.request,fe.promoteId,pe):fe.data?ve=this._loadGeoJSONFromObject(fe.data,fe.promoteId):fe.dataDiff&&(ve=this._loadGeoJSONFromDiff(fe.dataDiff,fe.promoteId,fe.source)),delete this._pendingRequest,typeof ve!="object")throw new Error(`Input data given to '${fe.source}' is not a valid GeoJSON object.`);return Pe(ve,!0),fe.filter&&(ve=this._filterGeoJSON(ve,fe.filter)),ve}))}loadGeoJSONFromUrl(fe,pe,ve){return m._(this,void 0,void 0,(function*(){const qe=yield m.j(fe,ve);return this._dataUpdateable=m.a7(qe.data,pe)?m.a8(qe.data,pe):void 0,qe.data}))}_loadGeoJSONFromObject(fe,pe){return this._dataUpdateable=m.a7(fe,pe)?m.a8(fe,pe):void 0,fe}_loadGeoJSONFromDiff(fe,pe,ve){if(!this._dataUpdateable)throw new Error(`Cannot update existing geojson data in ${ve}`);m.a9(this._dataUpdateable,fe,pe);const qe=Array.from(this._dataUpdateable.values());return this._toFeatureCollection(qe)}_filterGeoJSON(fe,pe){const ve=m.d4(pe,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(ve.result==="error")throw new Error(ve.value.map((We=>`${We.key}: ${We.message}`)).join(", "));const qe=fe.features.filter((We=>ve.value.evaluate({zoom:0},We)));return this._toFeatureCollection(qe)}_toFeatureCollection(fe){return{type:"FeatureCollection",features:fe}}removeSource(fe){return m._(this,void 0,void 0,(function*(){this._pendingRequest&&this._pendingRequest.abort()}))}getClusterExpansionZoom(fe){return this._geoJSONIndex.getClusterExpansionZoom(fe.clusterId)}getClusterChildren(fe){return this._geoJSONIndex.getChildren(fe.clusterId)}getClusterLeaves(fe){return this._geoJSONIndex.getLeaves(fe.clusterId,fe.limit,fe.offset)}}function Dn(pt,fe){return fe.cluster?new Be((function({superclusterOptions:pe,clusterProperties:ve}){if(!ve||!pe)return pe;const qe={},We={},Ct={accumulated:null,zoom:0},vt={properties:null},ct=Object.keys(ve);for(const bt of ct){const[Ht,Ft]=ve[bt],cr=m.d4(Ft),Jt=m.d4(typeof Ht=="string"?[Ht,["accumulated"],["get",bt]]:Ht);qe[bt]=cr.value,We[bt]=Jt.value}return pe.map=bt=>{vt.properties=bt;const Ht={};for(const Ft of ct)Ht[Ft]=qe[Ft].evaluate(Ct,vt);return Ht},pe.reduce=(bt,Ht)=>{vt.properties=Ht;for(const Ft of ct)Ct.accumulated=bt[Ft],bt[Ft]=We[Ft].evaluate(Ct,vt)},pe})(fe)).load(pt.features):(function(pe,ve){return new Er(pe,ve)})(pt,fe.geojsonVtOptions)}class un{constructor(fe){this.self=fe,this.actor=new m.L(fe),this.layerIndexes={},this.availableImages={},this.workerSources={},this.demWorkerSources={},this.externalWorkerSourceTypes={},this.globalStates=new Map,this.self.registerWorkerSource=(pe,ve)=>{if(this.externalWorkerSourceTypes[pe])throw new Error(`Worker source with name "${pe}" already registered.`);this.externalWorkerSourceTypes[pe]=ve},this.self.addProtocol=m.cK,this.self.removeProtocol=m.cL,this.self.registerRTLTextPlugin=pe=>{m.d5.setMethods(pe)},this.actor.registerMessageHandler("LDT",((pe,ve)=>this._getDEMWorkerSource(pe,ve.source).loadTile(ve))),this.actor.registerMessageHandler("RDT",((pe,ve)=>m._(this,void 0,void 0,(function*(){this._getDEMWorkerSource(pe,ve.source).removeTile(ve)})))),this.actor.registerMessageHandler("GCEZ",((pe,ve)=>m._(this,void 0,void 0,(function*(){return this._getWorkerSource(pe,ve.type,ve.source).getClusterExpansionZoom(ve)})))),this.actor.registerMessageHandler("GCC",((pe,ve)=>m._(this,void 0,void 0,(function*(){return this._getWorkerSource(pe,ve.type,ve.source).getClusterChildren(ve)})))),this.actor.registerMessageHandler("GCL",((pe,ve)=>m._(this,void 0,void 0,(function*(){return this._getWorkerSource(pe,ve.type,ve.source).getClusterLeaves(ve)})))),this.actor.registerMessageHandler("LD",((pe,ve)=>this._getWorkerSource(pe,ve.type,ve.source).loadData(ve))),this.actor.registerMessageHandler("GD",((pe,ve)=>this._getWorkerSource(pe,ve.type,ve.source).getData())),this.actor.registerMessageHandler("LT",((pe,ve)=>this._getWorkerSource(pe,ve.type,ve.source).loadTile(ve))),this.actor.registerMessageHandler("RT",((pe,ve)=>this._getWorkerSource(pe,ve.type,ve.source).reloadTile(ve))),this.actor.registerMessageHandler("AT",((pe,ve)=>this._getWorkerSource(pe,ve.type,ve.source).abortTile(ve))),this.actor.registerMessageHandler("RMT",((pe,ve)=>this._getWorkerSource(pe,ve.type,ve.source).removeTile(ve))),this.actor.registerMessageHandler("RS",((pe,ve)=>m._(this,void 0,void 0,(function*(){if(!this.workerSources[pe]||!this.workerSources[pe][ve.type]||!this.workerSources[pe][ve.type][ve.source])return;const qe=this.workerSources[pe][ve.type][ve.source];delete this.workerSources[pe][ve.type][ve.source],qe.removeSource!==void 0&&qe.removeSource(ve)})))),this.actor.registerMessageHandler("RM",(pe=>m._(this,void 0,void 0,(function*(){delete this.layerIndexes[pe],delete this.availableImages[pe],delete this.workerSources[pe],delete this.demWorkerSources[pe],this.globalStates.delete(pe)})))),this.actor.registerMessageHandler("SR",((pe,ve)=>m._(this,void 0,void 0,(function*(){this.referrer=ve})))),this.actor.registerMessageHandler("SRPS",((pe,ve)=>this._syncRTLPluginState(pe,ve))),this.actor.registerMessageHandler("IS",((pe,ve)=>m._(this,void 0,void 0,(function*(){this.self.importScripts(ve)})))),this.actor.registerMessageHandler("SI",((pe,ve)=>this._setImages(pe,ve))),this.actor.registerMessageHandler("UL",((pe,ve)=>m._(this,void 0,void 0,(function*(){this._getLayerIndex(pe).update(ve.layers,ve.removedIds,this._getGlobalState(pe))})))),this.actor.registerMessageHandler("UGS",((pe,ve)=>m._(this,void 0,void 0,(function*(){const qe=this._getGlobalState(pe);for(const We in ve)qe[We]=ve[We]})))),this.actor.registerMessageHandler("SL",((pe,ve)=>m._(this,void 0,void 0,(function*(){this._getLayerIndex(pe).replace(ve,this._getGlobalState(pe))}))))}_getGlobalState(fe){let pe=this.globalStates.get(fe);return pe||(pe={},this.globalStates.set(fe,pe)),pe}_setImages(fe,pe){return m._(this,void 0,void 0,(function*(){this.availableImages[fe]=pe;for(const ve in this.workerSources[fe]){const qe=this.workerSources[fe][ve];for(const We in qe)qe[We].availableImages=pe}}))}_syncRTLPluginState(fe,pe){return m._(this,void 0,void 0,(function*(){return yield m.d5.syncState(pe,this.self.importScripts)}))}_getAvailableImages(fe){let pe=this.availableImages[fe];return pe||(pe=[]),pe}_getLayerIndex(fe){let pe=this.layerIndexes[fe];return pe||(pe=this.layerIndexes[fe]=new o),pe}_getWorkerSource(fe,pe,ve){if(this.workerSources[fe]||(this.workerSources[fe]={}),this.workerSources[fe][pe]||(this.workerSources[fe][pe]={}),!this.workerSources[fe][pe][ve]){const qe={sendAsync:(We,Ct)=>(We.targetMapId=fe,this.actor.sendAsync(We,Ct))};switch(pe){case"vector":this.workerSources[fe][pe][ve]=new H(qe,this._getLayerIndex(fe),this._getAvailableImages(fe));break;case"geojson":this.workerSources[fe][pe][ve]=new Dr(qe,this._getLayerIndex(fe),this._getAvailableImages(fe));break;default:this.workerSources[fe][pe][ve]=new this.externalWorkerSourceTypes[pe](qe,this._getLayerIndex(fe),this._getAvailableImages(fe))}}return this.workerSources[fe][pe][ve]}_getDEMWorkerSource(fe,pe){return this.demWorkerSources[fe]||(this.demWorkerSources[fe]={}),this.demWorkerSources[fe][pe]||(this.demWorkerSources[fe][pe]=new Z),this.demWorkerSources[fe][pe]}}return m.i(self)&&(self.worker=new un(self)),un})),u("index",["exports","./shared"],(function(m,o){var w="5.14.0";function E(){var x=new o.A(4);return o.A!=Float32Array&&(x[1]=0,x[2]=0),x[0]=1,x[3]=1,x}let I,D,O;const P={frame(x,n,c){const f=requestAnimationFrame((b=>{y(),n(b)})),{unsubscribe:y}=o.s(x.signal,"abort",(()=>{y(),cancelAnimationFrame(f),c(new o.a(x.signal.reason))}),!1)},frameAsync(x){return new Promise(((n,c)=>{this.frame(x,n,c)}))},getImageData(x,n=0){return this.getImageCanvasContext(x).getImageData(-n,-n,x.width+2*n,x.height+2*n)},getImageCanvasContext(x){const n=window.document.createElement("canvas"),c=n.getContext("2d",{willReadFrequently:!0});if(!c)throw new Error("failed to create canvas 2d context");return n.width=x.width,n.height=x.height,c.drawImage(x,0,0,x.width,x.height),c},resolveURL:x=>(I||(I=document.createElement("a")),I.href=x,I.href),hardwareConcurrency:typeof navigator<"u"&&navigator.hardwareConcurrency||4,get prefersReducedMotion(){return O!==void 0?O:!!matchMedia&&(D==null&&(D=matchMedia("(prefers-reduced-motion: reduce)")),D.matches)},set prefersReducedMotion(x){O=x}},W=new class{constructor(){this._realTime=typeof performance<"u"&&performance&&performance.now?performance.now.bind(performance):Date.now.bind(Date),this._frozenAt=null}getCurrentTime(){return this._frozenAt!==null?this._frozenAt:this._realTime()}setNow(x){this._frozenAt=x}restoreNow(){this._frozenAt=null}isFrozen(){return this._frozenAt!==null}};function z(){return W.getCurrentTime()}class H{static testProp(n){if(!H.docStyle)return n[0];for(let c=0;c<n.length;c++)if(n[c]in H.docStyle)return n[c];return n[0]}static create(n,c,f){const y=window.document.createElement(n);return c!==void 0&&(y.className=c),f&&f.appendChild(y),y}static createNS(n,c){return window.document.createElementNS(n,c)}static disableDrag(){H.docStyle&&H.selectProp&&(H.userSelect=H.docStyle[H.selectProp],H.docStyle[H.selectProp]="none")}static enableDrag(){H.docStyle&&H.selectProp&&(H.docStyle[H.selectProp]=H.userSelect)}static setTransform(n,c){n.style[H.transformProp]=c}static addEventListener(n,c,f,y={}){n.addEventListener(c,f,"passive"in y?y:y.capture)}static removeEventListener(n,c,f,y={}){n.removeEventListener(c,f,"passive"in y?y:y.capture)}static suppressClickInternal(n){n.preventDefault(),n.stopPropagation(),window.removeEventListener("click",H.suppressClickInternal,!0)}static suppressClick(){window.addEventListener("click",H.suppressClickInternal,!0),window.setTimeout((()=>{window.removeEventListener("click",H.suppressClickInternal,!0)}),0)}static getScale(n){const c=n.getBoundingClientRect();return{x:c.width/n.offsetWidth||1,y:c.height/n.offsetHeight||1,boundingClientRect:c}}static getPoint(n,c,f){const y=c.boundingClientRect;return new o.P((f.clientX-y.left)/c.x-n.clientLeft,(f.clientY-y.top)/c.y-n.clientTop)}static mousePos(n,c){const f=H.getScale(n);return H.getPoint(n,f,c)}static touchPos(n,c){const f=[],y=H.getScale(n);for(let b=0;b<c.length;b++)f.push(H.getPoint(n,y,c[b]));return f}static mouseButton(n){return n.button}static remove(n){n.parentNode&&n.parentNode.removeChild(n)}static sanitize(n){const c=new DOMParser().parseFromString(n,"text/html").body||document.createElement("body"),f=c.querySelectorAll("script");for(const y of f)y.remove();return H.clean(c),c.innerHTML}static isPossiblyDangerous(n,c){const f=c.replace(/\s+/g,"").toLowerCase();return!(!["src","href","xlink:href"].includes(n)||!f.includes("javascript:")&&!f.includes("data:"))||!!n.startsWith("on")||void 0}static clean(n){const c=n.children;for(const f of c)H.removeAttributes(f),H.clean(f)}static removeAttributes(n){for(const{name:c,value:f}of n.attributes)H.isPossiblyDangerous(c,f)&&n.removeAttribute(c)}}H.docStyle=typeof window<"u"&&window.document&&window.document.documentElement.style,H.selectProp=H.testProp(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),H.transformProp=H.testProp(["transform","WebkitTransform"]);const Z={supported:!1,testSupport:function(x){!de&&ce&&(Pe?He(x):se=x)}};let se,ce,de=!1,Pe=!1;function He(x){const n=x.createTexture();x.bindTexture(x.TEXTURE_2D,n);try{if(x.texImage2D(x.TEXTURE_2D,0,x.RGBA,x.RGBA,x.UNSIGNED_BYTE,ce),x.isContextLost())return;Z.supported=!0}catch{}x.deleteTexture(n),de=!0}var Xe;typeof document<"u"&&(ce=document.createElement("img"),ce.onload=()=>{se&&He(se),se=null,Pe=!0},ce.onerror=()=>{de=!0,se=null},ce.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA="),(function(x){let n,c,f,y;x.resetRequestQueue=()=>{n=[],c=0,f=0,y={}},x.addThrottleControl=N=>{const j=f++;return y[j]=N,j},x.removeThrottleControl=N=>{delete y[N],S()},x.getImage=(N,j,q=!0)=>new Promise(((ne,te)=>{Z.supported&&(N.headers||(N.headers={}),N.headers.accept="image/webp,*/*"),o.e(N,{type:"image"}),n.push({abortController:j,requestParameters:N,supportImageRefresh:q,state:"queued",onError:ue=>{te(ue)},onSuccess:ue=>{ne(ue)}}),S()}));const b=N=>o._(this,void 0,void 0,(function*(){N.state="running";const{requestParameters:j,supportImageRefresh:q,onError:ne,onSuccess:te,abortController:ue}=N,_e=q===!1&&!o.i(self)&&!o.g(j.url)&&(!j.headers||Object.keys(j.headers).reduce(((Oe,Ge)=>Oe&&Ge==="accept"),!0));c++;const De=_e?M(j,ue):o.m(j,ue);try{const Oe=yield De;delete N.abortController,N.state="completed",Oe.data instanceof HTMLImageElement||o.b(Oe.data)?te(Oe):Oe.data&&te({data:yield(ze=Oe.data,typeof createImageBitmap=="function"?o.f(ze):o.h(ze)),cacheControl:Oe.cacheControl,expires:Oe.expires})}catch(Oe){delete N.abortController,ne(Oe)}finally{c--,S()}var ze})),S=()=>{const N=(()=>{for(const j of Object.keys(y))if(y[j]())return!0;return!1})()?o.c.MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:o.c.MAX_PARALLEL_IMAGE_REQUESTS;for(let j=c;j<N&&n.length>0;j++){const q=n.shift();q.abortController.signal.aborted?j--:b(q)}},M=(N,j)=>new Promise(((q,ne)=>{const te=new Image,ue=N.url,_e=N.credentials;_e&&_e==="include"?te.crossOrigin="use-credentials":(_e&&_e==="same-origin"||!o.d(ue))&&(te.crossOrigin="anonymous"),j.signal.addEventListener("abort",(()=>{te.src="",ne(new o.a(j.signal.reason))})),te.fetchPriority="high",te.onload=()=>{te.onerror=te.onload=null,q({data:te})},te.onerror=()=>{te.onerror=te.onload=null,j.signal.aborted||ne(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))},te.src=ue}))})(Xe||(Xe={})),Xe.resetRequestQueue();class Qe{constructor(n){this._transformRequestFn=n??null}transformRequest(n,c){return this._transformRequestFn&&this._transformRequestFn(n,c)||{url:n}}setTransformRequest(n){this._transformRequestFn=n}}function Be(x){const n=[];if(typeof x=="string")n.push({id:"default",url:x});else if(x&&x.length>0){const c=[];for(const{id:f,url:y}of x){const b=`${f}${y}`;c.indexOf(b)===-1&&(c.push(b),n.push({id:f,url:y}))}}return n}function Je(x,n,c){try{const f=new URL(x);return f.pathname+=`${n}${c}`,f.toString()}catch{throw new Error(`Invalid sprite URL "${x}", must be absolute. Modify style specification directly or use TransformStyleFunction to correct the issue dynamically`)}}function Ae(x){const{userImage:n}=x;return!!(n&&n.render&&n.render())&&(x.data.replace(new Uint8Array(n.data.buffer)),!0)}class me extends o.E{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new o.R({width:1,height:1}),this.dirty=!0}destroy(){this.atlasTexture&&(this.atlasTexture.destroy(),this.atlasTexture=null);for(const n of Object.keys(this.images))this.removeImage(n);this.patterns={},this.atlasImage=new o.R({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(n){if(this.loaded!==n&&(this.loaded=n,n)){for(const{ids:c,promiseResolve:f}of this.requestors)f(this._getImagesForIds(c));this.requestors=[]}}getImage(n){const c=this.images[n];if(c&&!c.data&&c.spriteData){const f=c.spriteData;c.data=new o.R({width:f.width,height:f.height},f.context.getImageData(f.x,f.y,f.width,f.height).data),c.spriteData=null}return c}addImage(n,c){if(this.images[n])throw new Error(`Image id ${n} already exist, use updateImage instead`);this._validate(n,c)&&(this.images[n]=c)}_validate(n,c){let f=!0;const y=c.data||c.spriteData;return this._validateStretch(c.stretchX,y&&y.width)||(this.fire(new o.k(new Error(`Image "${n}" has invalid "stretchX" value`))),f=!1),this._validateStretch(c.stretchY,y&&y.height)||(this.fire(new o.k(new Error(`Image "${n}" has invalid "stretchY" value`))),f=!1),this._validateContent(c.content,c)||(this.fire(new o.k(new Error(`Image "${n}" has invalid "content" value`))),f=!1),f}_validateStretch(n,c){if(!n)return!0;let f=0;for(const y of n){if(y[0]<f||y[1]<y[0]||c<y[1])return!1;f=y[1]}return!0}_validateContent(n,c){if(!n)return!0;if(n.length!==4)return!1;const f=c.spriteData,y=f&&f.width||c.data.width,b=f&&f.height||c.data.height;return!(n[0]<0||y<n[0]||n[1]<0||b<n[1]||n[2]<0||y<n[2]||n[3]<0||b<n[3]||n[2]<n[0]||n[3]<n[1])}updateImage(n,c,f=!0){const y=this.getImage(n);if(f&&(y.data.width!==c.data.width||y.data.height!==c.data.height))throw new Error(`size mismatch between old image (${y.data.width}x${y.data.height}) and new image (${c.data.width}x${c.data.height}).`);c.version=y.version+1,this.images[n]=c,this.updatedImages[n]=!0}removeImage(n){const c=this.images[n];delete this.images[n],delete this.patterns[n],c.userImage&&c.userImage.onRemove&&c.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(n){return new Promise(((c,f)=>{let y=!0;if(!this.isLoaded())for(const b of n)this.images[b]||(y=!1);this.isLoaded()||y?c(this._getImagesForIds(n)):this.requestors.push({ids:n,promiseResolve:c})}))}_getImagesForIds(n){const c={};for(const f of n){let y=this.getImage(f);y||(this.fire(new o.l("styleimagemissing",{id:f})),y=this.getImage(f)),y?c[f]={data:y.data.clone(),pixelRatio:y.pixelRatio,sdf:y.sdf,version:y.version,stretchX:y.stretchX,stretchY:y.stretchY,content:y.content,textFitWidth:y.textFitWidth,textFitHeight:y.textFitHeight,hasRenderCallback:!!(y.userImage&&y.userImage.render)}:o.w(`Image "${f}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}return c}getPixelSize(){const{width:n,height:c}=this.atlasImage;return{width:n,height:c}}getPattern(n){const c=this.patterns[n],f=this.getImage(n);if(!f)return null;if(c&&c.position.version===f.version)return c.position;if(c)c.position.version=f.version;else{const y={w:f.data.width+2,h:f.data.height+2,x:0,y:0},b=new o.I(y,f);this.patterns[n]={bin:y,position:b}}return this._updatePatternAtlas(),this.patterns[n].position}bind(n){const c=n.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new o.T(n,this.atlasImage,c.RGBA),this.atlasTexture.bind(c.LINEAR,c.CLAMP_TO_EDGE)}_updatePatternAtlas(){const n=[];for(const b in this.patterns)n.push(this.patterns[b].bin);const{w:c,h:f}=o.p(n),y=this.atlasImage;y.resize({width:c||1,height:f||1});for(const b in this.patterns){const{bin:S}=this.patterns[b],M=S.x+1,N=S.y+1,j=this.getImage(b).data,q=j.width,ne=j.height;o.R.copy(j,y,{x:0,y:0},{x:M,y:N},{width:q,height:ne}),o.R.copy(j,y,{x:0,y:ne-1},{x:M,y:N-1},{width:q,height:1}),o.R.copy(j,y,{x:0,y:0},{x:M,y:N+ne},{width:q,height:1}),o.R.copy(j,y,{x:q-1,y:0},{x:M-1,y:N},{width:1,height:ne}),o.R.copy(j,y,{x:0,y:0},{x:M+q,y:N},{width:1,height:ne})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(n){for(const c of n){if(this.callbackDispatchedThisFrame[c])continue;this.callbackDispatchedThisFrame[c]=!0;const f=this.getImage(c);f||o.w(`Image with ID: "${c}" was not found`),Ae(f)&&this.updateImage(c,f)}}cloneImages(){const n={};for(const c in this.images){const f=this.images[c];n[c]=Object.assign(Object.assign({},f),{data:f.data?f.data.clone():null})}return n}}const Te=1e20;function Ie(x,n,c,f,y,b,S,M,N){for(let j=n;j<n+f;j++)ut(x,c*b+j,b,y,S,M,N);for(let j=c;j<c+y;j++)ut(x,j*b+n,1,f,S,M,N)}function ut(x,n,c,f,y,b,S){b[0]=0,S[0]=-Te,S[1]=Te,y[0]=x[n];for(let M=1,N=0,j=0;M<f;M++){y[M]=x[n+M*c];const q=M*M;do{const ne=b[N];j=(y[M]-y[ne]+q-ne*ne)/(M-ne)/2}while(j<=S[N]&&--N>-1);N++,b[N]=M,S[N]=j,S[N+1]=Te}for(let M=0,N=0;M<f;M++){for(;S[N+1]<M;)N++;const j=b[N],q=M-j;x[n+M*c]=y[j]+q*q}}const it=o.v.layout_symbol["text-font"].default.join(",");class ot{constructor(n,c,f){this.requestManager=n,this.localIdeographFontFamily=c,this.entries={},this.lang=f}setURL(n){this.url=n}getGlyphs(n){return o._(this,void 0,void 0,(function*(){const c=[];for(const b in n)for(const S of n[b])c.push(this._getAndCacheGlyphsPromise(b,S));const f=yield Promise.all(c),y={};for(const{stack:b,id:S,glyph:M}of f)y[b]||(y[b]={}),y[b][S]=M&&{id:M.id,bitmap:M.bitmap.clone(),metrics:M.metrics};return y}))}_getAndCacheGlyphsPromise(n,c){return o._(this,void 0,void 0,(function*(){let f=this.entries[n];f||(f=this.entries[n]={glyphs:{},requests:{},ranges:{}});let y=f.glyphs[c];return y!==void 0?{stack:n,id:c,glyph:y}:!this.url||this._charUsesLocalIdeographFontFamily(c)?(y=f.glyphs[c]=this._drawGlyph(f,n,c),{stack:n,id:c,glyph:y}):yield this._downloadAndCacheRangePromise(n,c)}))}_downloadAndCacheRangePromise(n,c){return o._(this,void 0,void 0,(function*(){const f=this.entries[n],y=Math.floor(c/256);if(f.ranges[y])return{stack:n,id:c,glyph:null};if(!f.requests[y]){const b=ot.loadGlyphRange(n,y,this.url,this.requestManager);f.requests[y]=b}try{const b=yield f.requests[y];for(const S in b)f.glyphs[+S]=b[+S];return f.ranges[y]=!0,{stack:n,id:c,glyph:b[c]||null}}catch(b){const S=f.glyphs[c]=this._drawGlyph(f,n,c);return this._warnOnMissingGlyphRange(S,y,c,b),{stack:n,id:c,glyph:S}}}))}_warnOnMissingGlyphRange(n,c,f,y){const b=256*c,S=b+255,M=f.toString(16).padStart(4,"0").toUpperCase();o.w(`Unable to load glyph range ${c}, ${b}-${S}. Rendering codepoint U+${M} locally instead. ${y}`)}_charUsesLocalIdeographFontFamily(n){return!!this.localIdeographFontFamily&&o.q(n)}_drawGlyph(n,c,f){const y=c===it&&this.localIdeographFontFamily!==""&&this._charUsesLocalIdeographFontFamily(f),b=y?"ideographTinySDF":"tinySDF";n[b]||(n[b]=this._createTinySDF(y?this.localIdeographFontFamily:c));const S=n[b].draw(String.fromCodePoint(f));return{id:f,bitmap:new o.r({width:S.width||60,height:S.height||60},S.data),metrics:{width:S.glyphWidth/2||24,height:S.glyphHeight/2||24,left:S.glyphLeft/2+.5||0,top:S.glyphTop/2-27.5||-8,advance:S.glyphAdvance/2||24,isDoubleResolution:!0}}}_createTinySDF(n){const c=n?n.split(","):[];c.push("sans-serif");const f=c.map((y=>/[-\w]+/.test(y)?y:`'${CSS.escape(y)}'`)).join(",");return new ot.TinySDF({fontSize:48,buffer:6,radius:16,cutoff:.25,fontFamily:f,fontWeight:this._fontWeight(c[0]),fontStyle:this._fontStyle(c[0]),lang:this.lang})}_fontStyle(n){return/italic/i.test(n)?"italic":/oblique/i.test(n)?"oblique":"normal"}_fontWeight(n){const c={thin:100,hairline:100,"extra light":200,"ultra light":200,light:300,normal:400,regular:400,medium:500,semibold:600,demibold:600,bold:700,"extra bold":800,"ultra bold":800,black:900,heavy:900,"extra black":950,"ultra black":950};let f;for(const[y,b]of Object.entries(c))new RegExp(`\\b${y}\\b`,"i").test(n)&&(f=`${b}`);return f}destroy(){for(const n in this.entries){const c=this.entries[n];c.tinySDF&&(c.tinySDF=null),c.ideographTinySDF&&(c.ideographTinySDF=null),c.glyphs={},c.requests={},c.ranges={}}this.entries={}}}ot.loadGlyphRange=function(x,n,c,f){return o._(this,void 0,void 0,(function*(){const y=256*n,b=y+255,S=f.transformRequest(c.replace("{fontstack}",x).replace("{range}",`${y}-${b}`),"Glyphs"),M=yield o.n(S,new AbortController);if(!M||!M.data)throw new Error(`Could not load glyph range. range: ${n}, ${y}-${b}`);const N={};for(const j of o.o(M.data))N[j.id]=j;return N}))},ot.TinySDF=class{constructor({fontSize:x=24,buffer:n=3,radius:c=8,cutoff:f=.25,fontFamily:y="sans-serif",fontWeight:b="normal",fontStyle:S="normal",lang:M=null}={}){this.buffer=n,this.cutoff=f,this.radius=c,this.lang=M;const N=this.size=x+4*n,j=this._createCanvas(N),q=this.ctx=j.getContext("2d",{willReadFrequently:!0});q.font=`${S} ${b} ${x}px ${y}`,q.textBaseline="alphabetic",q.textAlign="left",q.fillStyle="black",this.gridOuter=new Float64Array(N*N),this.gridInner=new Float64Array(N*N),this.f=new Float64Array(N),this.z=new Float64Array(N+1),this.v=new Uint16Array(N)}_createCanvas(x){const n=document.createElement("canvas");return n.width=n.height=x,n}draw(x){const{width:n,actualBoundingBoxAscent:c,actualBoundingBoxDescent:f,actualBoundingBoxLeft:y,actualBoundingBoxRight:b}=this.ctx.measureText(x),S=Math.ceil(c),M=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(b-y))),N=Math.min(this.size-this.buffer,S+Math.ceil(f)),j=M+2*this.buffer,q=N+2*this.buffer,ne=Math.max(j*q,0),te=new Uint8ClampedArray(ne),ue={data:te,width:j,height:q,glyphWidth:M,glyphHeight:N,glyphTop:S,glyphLeft:0,glyphAdvance:n};if(M===0||N===0)return ue;const{ctx:_e,buffer:De,gridInner:ze,gridOuter:Oe}=this;this.lang&&(_e.lang=this.lang),_e.clearRect(De,De,M,N),_e.fillText(x,De,De+S);const Ge=_e.getImageData(De,De,M,N);Oe.fill(Te,0,ne),ze.fill(0,0,ne);for(let lt=0;lt<N;lt++)for(let Ze=0;Ze<M;Ze++){const At=Ge.data[4*(lt*M+Ze)+3]/255;if(At===0)continue;const ft=(lt+De)*j+Ze+De;if(At===1)Oe[ft]=0,ze[ft]=Te;else{const st=.5-At;Oe[ft]=st>0?st*st:0,ze[ft]=st<0?st*st:0}}Ie(Oe,0,0,j,q,j,this.f,this.v,this.z),Ie(ze,De,De,M,N,j,this.f,this.v,this.z);for(let lt=0;lt<ne;lt++){const Ze=Math.sqrt(Oe[lt])-Math.sqrt(ze[lt]);te[lt]=Math.round(255-255*(Ze/this.radius+this.cutoff))}return ue}};class ke{constructor(){this.specification=o.u.light.position}possiblyEvaluate(n,c){return o.F(n.expression.evaluate(c))}interpolate(n,c,f){return{x:o.G.number(n.x,c.x,f),y:o.G.number(n.y,c.y,f),z:o.G.number(n.z,c.z,f)}}}let Ne;class yt extends o.E{constructor(n){super(),Ne=Ne||new o.t({anchor:new o.D(o.u.light.anchor),position:new ke,color:new o.D(o.u.light.color),intensity:new o.D(o.u.light.intensity)}),this._transitionable=new o.x(Ne,void 0),this.setLight(n),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(n,c={}){if(!this._validate(o.y,n,c))for(const f in n){const y=n[f];f.endsWith(o.z)?this._transitionable.setTransition(f.slice(0,-o.z.length),y):this._transitionable.setValue(f,y)}}updateTransitions(n){this._transitioning=this._transitionable.transitioned(n,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(n){this.properties=this._transitioning.possiblyEvaluate(n)}_validate(n,c,f){return(!f||f.validate!==!1)&&o.B(this,n.call(o.C,{value:c,style:{glyphs:!0,sprite:!0},styleSpec:o.u}))}}const Ce=new o.t({"sky-color":new o.D(o.u.sky["sky-color"]),"horizon-color":new o.D(o.u.sky["horizon-color"]),"fog-color":new o.D(o.u.sky["fog-color"]),"fog-ground-blend":new o.D(o.u.sky["fog-ground-blend"]),"horizon-fog-blend":new o.D(o.u.sky["horizon-fog-blend"]),"sky-horizon-blend":new o.D(o.u.sky["sky-horizon-blend"]),"atmosphere-blend":new o.D(o.u.sky["atmosphere-blend"])});class ie extends o.E{constructor(n){super(),this._transitionable=new o.x(Ce,void 0),this.setSky(n),this._transitioning=this._transitionable.untransitioned(),this.recalculate(new o.H(0))}setSky(n,c={}){if(!this._validate(o.J,n,c)){n||(n={"sky-color":"transparent","horizon-color":"transparent","fog-color":"transparent","fog-ground-blend":1,"atmosphere-blend":0});for(const f in n){const y=n[f];f.endsWith(o.z)?this._transitionable.setTransition(f.slice(0,-o.z.length),y):this._transitionable.setValue(f,y)}}}getSky(){return this._transitionable.serialize()}updateTransitions(n){this._transitioning=this._transitionable.transitioned(n,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(n){this.properties=this._transitioning.possiblyEvaluate(n)}_validate(n,c,f={}){return f?.validate!==!1&&o.B(this,n.call(o.C,o.e({value:c,style:{glyphs:!0,sprite:!0},styleSpec:o.u})))}calculateFogBlendOpacity(n){return n<60?0:n<70?(n-60)/10:1}}class Ee{constructor(n,c){this.width=n,this.height=c,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}}getDash(n,c){const f=n.join(",")+String(c);return this.dashEntry[f]||(this.dashEntry[f]=this.addDash(n,c)),this.dashEntry[f]}getDashRanges(n,c,f){const y=[];let b=n.length%2==1?-n[n.length-1]*f:0,S=n[0]*f,M=!0;y.push({left:b,right:S,isDash:M,zeroLength:n[0]===0});let N=n[0];for(let j=1;j<n.length;j++){M=!M;const q=n[j];b=N*f,N+=q,S=N*f,y.push({left:b,right:S,isDash:M,zeroLength:q===0})}return y}addRoundDash(n,c,f){const y=c/2;for(let b=-f;b<=f;b++){const S=this.width*(this.nextRow+f+b);let M=0,N=n[M];for(let j=0;j<this.width;j++){j/N.right>1&&(N=n[++M]);const q=Math.abs(j-N.left),ne=Math.abs(j-N.right),te=Math.min(q,ne);let ue;const _e=b/f*(y+1);if(N.isDash){const De=y-Math.abs(_e);ue=Math.sqrt(te*te+De*De)}else ue=y-Math.sqrt(te*te+_e*_e);this.data[S+j]=Math.max(0,Math.min(255,ue+128))}}}addRegularDash(n){for(let M=n.length-1;M>=0;--M){const N=n[M],j=n[M+1];N.zeroLength?n.splice(M,1):j&&j.isDash===N.isDash&&(j.left=N.left,n.splice(M,1))}const c=n[0],f=n[n.length-1];c.isDash===f.isDash&&(c.left=f.left-this.width,f.right=c.right+this.width);const y=this.width*this.nextRow;let b=0,S=n[b];for(let M=0;M<this.width;M++){M/S.right>1&&(S=n[++b]);const N=Math.abs(M-S.left),j=Math.abs(M-S.right),q=Math.min(N,j);this.data[y+M]=Math.max(0,Math.min(255,(S.isDash?q:-q)+128))}}addDash(n,c){const f=c?7:0,y=2*f+1;if(this.nextRow+y>this.height)return o.w("LineAtlas out of space"),null;let b=0;for(let M=0;M<n.length;M++)b+=n[M];if(b!==0){const M=this.width/b,N=this.getDashRanges(n,this.width,M);c?this.addRoundDash(N,M,f):this.addRegularDash(N)}const S={y:this.nextRow+f,height:2*f,width:b};return this.nextRow+=y,this.dirty=!0,S}bind(n){const c=n.gl;this.texture?(c.bindTexture(c.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,c.texSubImage2D(c.TEXTURE_2D,0,0,0,this.width,this.height,c.ALPHA,c.UNSIGNED_BYTE,this.data))):(this.texture=c.createTexture(),c.bindTexture(c.TEXTURE_2D,this.texture),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_S,c.REPEAT),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_T,c.REPEAT),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MIN_FILTER,c.LINEAR),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MAG_FILTER,c.LINEAR),c.texImage2D(c.TEXTURE_2D,0,c.ALPHA,this.width,this.height,0,c.ALPHA,c.UNSIGNED_BYTE,this.data))}}const Le="maplibre_preloaded_worker_pool";class Ve{constructor(){this.active={}}acquire(n){if(!this.workers)for(this.workers=[];this.workers.length<Ve.workerCount;)this.workers.push(new Worker(o.c.WORKER_URL));return this.active[n]=!0,this.workers.slice()}release(n){delete this.active[n],this.numActive()===0&&(this.workers.forEach((c=>{c.terminate()})),this.workers=null)}isPreloaded(){return!!this.active[Le]}numActive(){return Object.keys(this.active).length}}const nt=Math.floor(P.hardwareConcurrency/2);let et,_t;function St(){return et||(et=new Ve),et}Ve.workerCount=o.K(globalThis)?Math.max(Math.min(nt,3),1):1;class Tt{constructor(n,c){this.workerPool=n,this.actors=[],this.currentActor=0,this.id=c;const f=this.workerPool.acquire(c);for(let y=0;y<f.length;y++){const b=new o.L(f[y],c);b.name=`Worker ${y}`,this.actors.push(b)}if(!this.actors.length)throw new Error("No actors found")}broadcast(n,c){const f=[];for(const y of this.actors)f.push(y.sendAsync({type:n,data:c}));return Promise.all(f)}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(n=!0){this.actors.forEach((c=>{c.remove()})),this.actors=[],n&&this.workerPool.release(this.id)}registerMessageHandler(n,c){for(const f of this.actors)f.registerMessageHandler(n,c)}unregisterMessageHandler(n){for(const c of this.actors)c.unregisterMessageHandler(n)}}function Gt(){return _t||(_t=new Tt(St(),o.M),_t.registerMessageHandler("GR",((x,n,c)=>o.m(n,c)))),_t}function or(x,n){const c=o.N();return o.O(c,c,[1,1,0]),o.Q(c,c,[.5*x.width,.5*x.height,1]),x.calculatePosMatrix?o.S(c,c,x.calculatePosMatrix(n.toUnwrapped())):c}function Ar(x,n,c,f,y,b,S){var M;const N=(function(te,ue,_e){if(te)for(const De of te){const ze=ue[De];if(ze&&ze.source===_e&&ze.type==="fill-extrusion")return!0}else for(const De in ue){const ze=ue[De];if(ze.source===_e&&ze.type==="fill-extrusion")return!0}return!1})((M=y?.layers)!==null&&M!==void 0?M:null,n,x.id),j=b.maxPitchScaleFactor(),q=x.tilesIn(f,j,N);q.sort(_r);const ne=[];for(const te of q)ne.push({wrappedTileID:te.tileID.wrapped().key,queryResults:te.tile.queryRenderedFeatures(n,c,x.getState(),te.queryGeometry,te.cameraQueryGeometry,te.scale,y,b,j,or(b,te.tileID),S?(ue,_e)=>S(te.tileID,ue,_e):void 0)});return(function(te,ue){for(const _e in te)for(const De of te[_e])je(De,ue);return te})((function(te){const ue={},_e={};for(const De of te){const ze=De.queryResults,Oe=De.wrappedTileID,Ge=_e[Oe]=_e[Oe]||{};for(const lt in ze){const Ze=ze[lt],At=Ge[lt]=Ge[lt]||{},ft=ue[lt]=ue[lt]||[];for(const st of Ze)At[st.featureIndex]||(At[st.featureIndex]=!0,ft.push(st))}}return ue})(ne),x)}function _r(x,n){const c=x.tileID,f=n.tileID;return c.overscaledZ-f.overscaledZ||c.canonical.y-f.canonical.y||c.wrap-f.wrap||c.canonical.x-f.canonical.x}function je(x,n){const c=x.feature,f=n.getFeatureState(c.layer["source-layer"],c.id);c.source=c.layer.source,c.layer["source-layer"]&&(c.sourceLayer=c.layer["source-layer"]),c.state=f}function mr(x,n,c){return o._(this,void 0,void 0,(function*(){let f=x;if(x.url?f=(yield o.j(n.transformRequest(x.url,"Source"),c)).data:yield P.frameAsync(c),!f)return null;const y=o.U(o.e(f,x),["tiles","minzoom","maxzoom","attribution","bounds","scheme","tileSize","encoding"]);return"vector_layers"in f&&f.vector_layers&&(y.vectorLayerIds=f.vector_layers.map((b=>b.id))),y}))}class kr{constructor(n,c){n&&(c?this.setSouthWest(n).setNorthEast(c):Array.isArray(n)&&(n.length===4?this.setSouthWest([n[0],n[1]]).setNorthEast([n[2],n[3]]):this.setSouthWest(n[0]).setNorthEast(n[1])))}setNorthEast(n){return this._ne=n instanceof o.V?new o.V(n.lng,n.lat):o.V.convert(n),this}setSouthWest(n){return this._sw=n instanceof o.V?new o.V(n.lng,n.lat):o.V.convert(n),this}extend(n){const c=this._sw,f=this._ne;let y,b;if(n instanceof o.V)y=n,b=n;else{if(!(n instanceof kr))return Array.isArray(n)?n.length===4||n.every(Array.isArray)?this.extend(kr.convert(n)):this.extend(o.V.convert(n)):n&&("lng"in n||"lon"in n)&&"lat"in n?this.extend(o.V.convert(n)):this;if(y=n._sw,b=n._ne,!y||!b)return this}return c||f?(c.lng=Math.min(y.lng,c.lng),c.lat=Math.min(y.lat,c.lat),f.lng=Math.max(b.lng,f.lng),f.lat=Math.max(b.lat,f.lat)):(this._sw=new o.V(y.lng,y.lat),this._ne=new o.V(b.lng,b.lat)),this}getCenter(){return new o.V((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new o.V(this.getWest(),this.getNorth())}getSouthEast(){return new o.V(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(n){const{lng:c,lat:f}=o.V.convert(n);let y=this._sw.lng<=c&&c<=this._ne.lng;return this._sw.lng>this._ne.lng&&(y=this._sw.lng>=c&&c>=this._ne.lng),this._sw.lat<=f&&f<=this._ne.lat&&y}intersects(n){if(!((n=kr.convert(n)).getNorth()>=this.getSouth()&&n.getSouth()<=this.getNorth()))return!1;const c=o.W(this.getWest(),-180,180),f=o.W(this.getEast(),-180,180),y=o.W(n.getWest(),-180,180),b=o.W(n.getEast(),-180,180),S=c>=f,M=y>=b;return!(!S||!M)||(S?b>=c||y<=f:M?f>=y||c<=b:y<=f&&b>=c)}static convert(n){return n instanceof kr?n:n&&new kr(n)}static fromLngLat(n,c=0){const f=360*c/40075017,y=f/Math.cos(Math.PI/180*n.lat);return new kr(new o.V(n.lng-y,n.lat-f),new o.V(n.lng+y,n.lat+f))}adjustAntiMeridian(){const n=new o.V(this._sw.lng,this._sw.lat),c=new o.V(this._ne.lng,this._ne.lat);return new kr(n,n.lng>c.lng?new o.V(c.lng+360,c.lat):c)}}class Vr{constructor(n,c,f){this.bounds=kr.convert(this.validateBounds(n)),this.minzoom=c||0,this.maxzoom=f||24}validateBounds(n){return Array.isArray(n)&&n.length===4?[Math.max(-180,n[0]),Math.max(-90,n[1]),Math.min(180,n[2]),Math.min(90,n[3])]:[-180,-90,180,90]}contains(n){const c=Math.pow(2,n.z),f=Math.floor(o.Y(this.bounds.getWest())*c),y=Math.floor(o.X(this.bounds.getNorth())*c),b=Math.ceil(o.Y(this.bounds.getEast())*c),S=Math.ceil(o.X(this.bounds.getSouth())*c);return n.x>=f&&n.x<b&&n.y>=y&&n.y<S}}class lr extends o.E{constructor(n,c,f,y){if(super(),this.id=n,this.dispatcher=f,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,o.e(this,o.U(c,["url","scheme","tileSize","promoteId","encoding"])),this._options=o.e({type:"vector"},c),this._collectResourceTiming=c.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(y)}load(){return o._(this,void 0,void 0,(function*(){this._loaded=!1,this.fire(new o.l("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{const n=yield mr(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,this.map.style.tileManagers[this.id].clearTiles(),n&&(o.e(this,n),n.bounds&&(this.tileBounds=new Vr(n.bounds,this.minzoom,this.maxzoom)),this.fire(new o.l("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new o.l("data",{dataType:"source",sourceDataType:"content"})))}catch(n){this._tileJSONRequest=null,this._loaded=!0,o.Z(n)||this.fire(new o.k(n))}}))}loaded(){return this._loaded}hasTile(n){return!this.tileBounds||this.tileBounds.contains(n.canonical)}onAdd(n){this.map=n,this.load()}setSourceProperty(n){this._tileJSONRequest&&this._tileJSONRequest.abort(),n(),this.load()}setTiles(n){return this.setSourceProperty((()=>{this._options.tiles=n})),this}setUrl(n){return this.setSourceProperty((()=>{this.url=n,this._options.url=n})),this}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}serialize(){return o.e({},this._options)}loadTile(n){return o._(this,void 0,void 0,(function*(){const c=n.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),f={request:this.map._requestManager.transformRequest(c,"Tile"),uid:n.uid,tileID:n.tileID,zoom:n.tileID.overscaledZ,tileSize:this.tileSize*n.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,subdivisionGranularity:this.map.style.projection.subdivisionGranularity,encoding:this.encoding,overzoomParameters:this._getOverzoomParameters(n)};f.request.collectResourceTiming=this._collectResourceTiming;let y="RT";if(n.actor&&n.state!=="expired"){if(n.state==="loading")return new Promise(((b,S)=>{n.reloadPromise={resolve:b,reject:S}}))}else n.actor=this.dispatcher.getActor(),y="LT";n.abortController=new AbortController;try{const b=yield n.actor.sendAsync({type:y,data:f},n.abortController);if(delete n.abortController,n.aborted)return;this._afterTileLoadWorkerResponse(n,b)}catch(b){if(delete n.abortController,n.aborted)return;if(b&&b.status!==404)throw b;this._afterTileLoadWorkerResponse(n,null)}}))}_getOverzoomParameters(n){if(n.tileID.canonical.z<=this.maxzoom||this.map._zoomLevelsToOverscale===void 0)return;const c=n.tileID.scaledTo(this.maxzoom).canonical,f=c.url(this.tiles,this.map.getPixelRatio(),this.scheme);return{maxZoomTileID:c,overzoomRequest:this.map._requestManager.transformRequest(f,"Tile")}}_afterTileLoadWorkerResponse(n,c){if(c&&c.resourceTiming&&(n.resourceTiming=c.resourceTiming),c&&this.map._refreshExpiredTiles&&n.setExpiryData(c),n.loadVectorData(c,this.map.painter),n.reloadPromise){const f=n.reloadPromise;n.reloadPromise=null,this.loadTile(n).then(f.resolve).catch(f.reject)}}abortTile(n){return o._(this,void 0,void 0,(function*(){n.abortController&&(n.abortController.abort(),delete n.abortController),n.actor&&(yield n.actor.sendAsync({type:"AT",data:{uid:n.uid,type:this.type,source:this.id}}))}))}unloadTile(n){return o._(this,void 0,void 0,(function*(){n.unloadVectorData(),n.actor&&(yield n.actor.sendAsync({type:"RMT",data:{uid:n.uid,type:this.type,source:this.id}}))}))}hasTransition(){return!1}}class Gr extends o.E{constructor(n,c,f,y){super(),this.id=n,this.dispatcher=f,this.setEventedParent(y),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=o.e({type:"raster"},c),o.e(this,o.U(c,["url","scheme","tileSize"]))}load(){return o._(this,arguments,void 0,(function*(n=!1){this._loaded=!1,this.fire(new o.l("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{const c=yield mr(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,c&&(o.e(this,c),c.bounds&&(this.tileBounds=new Vr(c.bounds,this.minzoom,this.maxzoom)),this.fire(new o.l("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new o.l("data",{dataType:"source",sourceDataType:"content",sourceDataChanged:n})))}catch(c){this._tileJSONRequest=null,this._loaded=!0,o.Z(c)||this.fire(new o.k(c))}}))}loaded(){return this._loaded}onAdd(n){this.map=n,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}setSourceProperty(n){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null),n(),this.load(!0)}setTiles(n){return this.setSourceProperty((()=>{this._options.tiles=n})),this}setUrl(n){return this.setSourceProperty((()=>{this.url=n,this._options.url=n})),this}serialize(){return o.e({},this._options)}hasTile(n){return!this.tileBounds||this.tileBounds.contains(n.canonical)}loadTile(n){return o._(this,void 0,void 0,(function*(){const c=n.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);n.abortController=new AbortController;try{const f=yield Xe.getImage(this.map._requestManager.transformRequest(c,"Tile"),n.abortController,this.map._refreshExpiredTiles);if(delete n.abortController,n.aborted)return void(n.state="unloaded");if(f&&f.data){this.map._refreshExpiredTiles&&(f.cacheControl||f.expires)&&n.setExpiryData({cacheControl:f.cacheControl,expires:f.expires});const y=this.map.painter.context,b=y.gl,S=f.data;n.texture=this.map.painter.getTileTexture(S.width),n.texture?n.texture.update(S,{useMipmap:!0}):(n.texture=new o.T(y,S,b.RGBA,{useMipmap:!0}),n.texture.bind(b.LINEAR,b.CLAMP_TO_EDGE,b.LINEAR_MIPMAP_NEAREST)),n.state="loaded"}}catch(f){if(delete n.abortController,n.aborted)n.state="unloaded";else if(f)throw n.state="errored",f}}))}abortTile(n){return o._(this,void 0,void 0,(function*(){n.abortController&&(n.abortController.abort(),delete n.abortController)}))}unloadTile(n){return o._(this,void 0,void 0,(function*(){n.texture&&this.map.painter.saveTileTexture(n.texture)}))}hasTransition(){return!1}}class Er extends Gr{constructor(n,c,f,y){super(n,c,f,y),this.type="raster-dem",this.maxzoom=22,this._options=o.e({type:"raster-dem"},c),this.encoding=c.encoding||"mapbox",this.redFactor=c.redFactor,this.greenFactor=c.greenFactor,this.blueFactor=c.blueFactor,this.baseShift=c.baseShift}loadTile(n){return o._(this,void 0,void 0,(function*(){const c=n.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),f=this.map._requestManager.transformRequest(c,"Tile");n.neighboringTiles=this._getNeighboringTiles(n.tileID),n.abortController=new AbortController;try{const y=yield Xe.getImage(f,n.abortController,this.map._refreshExpiredTiles);if(delete n.abortController,n.aborted)return void(n.state="unloaded");if(y&&y.data){const b=y.data;this.map._refreshExpiredTiles&&(y.cacheControl||y.expires)&&n.setExpiryData({cacheControl:y.cacheControl,expires:y.expires});const S=o.b(b)&&o.$()?b:yield this.readImageNow(b),M={type:this.type,uid:n.uid,source:this.id,rawImageData:S,encoding:this.encoding,redFactor:this.redFactor,greenFactor:this.greenFactor,blueFactor:this.blueFactor,baseShift:this.baseShift};if(!n.actor||n.state==="expired"){n.actor=this.dispatcher.getActor();const N=yield n.actor.sendAsync({type:"LDT",data:M});n.dem=N,n.needsHillshadePrepare=!0,n.needsTerrainPrepare=!0,n.state="loaded"}}}catch(y){if(delete n.abortController,n.aborted)n.state="unloaded";else if(y)throw n.state="errored",y}}))}readImageNow(n){return o._(this,void 0,void 0,(function*(){if(typeof VideoFrame<"u"&&o.a0()){const c=n.width+2,f=n.height+2;try{return new o.R({width:c,height:f},yield o.a1(n,-1,-1,c,f))}catch{}}return P.getImageData(n,1)}))}_getNeighboringTiles(n){const c=n.canonical,f=Math.pow(2,c.z),y=(c.x-1+f)%f,b=c.x===0?n.wrap-1:n.wrap,S=(c.x+1+f)%f,M=c.x+1===f?n.wrap+1:n.wrap,N={};return N[new o.a2(n.overscaledZ,b,c.z,y,c.y).key]={backfilled:!1},N[new o.a2(n.overscaledZ,M,c.z,S,c.y).key]={backfilled:!1},c.y>0&&(N[new o.a2(n.overscaledZ,b,c.z,y,c.y-1).key]={backfilled:!1},N[new o.a2(n.overscaledZ,n.wrap,c.z,c.x,c.y-1).key]={backfilled:!1},N[new o.a2(n.overscaledZ,M,c.z,S,c.y-1).key]={backfilled:!1}),c.y+1<f&&(N[new o.a2(n.overscaledZ,b,c.z,y,c.y+1).key]={backfilled:!1},N[new o.a2(n.overscaledZ,n.wrap,c.z,c.x,c.y+1).key]={backfilled:!1},N[new o.a2(n.overscaledZ,M,c.z,S,c.y+1).key]={backfilled:!1}),N}unloadTile(n){return o._(this,void 0,void 0,(function*(){n.demTexture&&this.map.painter.saveTileTexture(n.demTexture),n.fbo&&(n.fbo.destroy(),delete n.fbo),n.dem&&delete n.dem,delete n.neighboringTiles,n.state="unloaded",n.actor&&(yield n.actor.sendAsync({type:"RDT",data:{type:this.type,uid:n.uid,source:this.id}}))}))}}function Nr(x){return x.type==="GeometryCollection"?x.geometries.map((n=>n.coordinates)).flat(1/0):x.coordinates.flat(1/0)}function Dr(x){const n=new kr;let c;switch(x.type){case"FeatureCollection":c=x.features.map((f=>Nr(f.geometry))).flat(1/0);break;case"Feature":c=Nr(x.geometry);break;default:c=Nr(x)}if(c.length==0)return n;for(let f=0;f<c.length-1;f+=2)n.extend([c[f],c[f+1]]);return n}class Dn extends o.E{constructor(n,c,f,y){super(),this.id=n,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._isUpdatingWorker=!1,this._pendingWorkerUpdate={data:c.data},this.actor=f.getActor(),this.setEventedParent(y),this._data=typeof c.data=="string"?{url:c.data}:{geojson:c.data},this._options=o.e({},c),this._collectResourceTiming=c.collectResourceTiming,c.maxzoom!==void 0&&(this.maxzoom=c.maxzoom),c.type&&(this.type=c.type),c.attribution&&(this.attribution=c.attribution),this.promoteId=c.promoteId,c.clusterMaxZoom!==void 0&&this.maxzoom<=c.clusterMaxZoom&&o.w(`The maxzoom value "${this.maxzoom}" is expected to be greater than the clusterMaxZoom value "${c.clusterMaxZoom}".`),this.workerOptions=o.e({source:this.id,cluster:c.cluster||!1,geojsonVtOptions:{buffer:this._pixelsToTileUnits(c.buffer!==void 0?c.buffer:128),tolerance:this._pixelsToTileUnits(c.tolerance!==void 0?c.tolerance:.375),extent:o.a5,maxZoom:this.maxzoom,lineMetrics:c.lineMetrics||!1,generateId:c.generateId||!1},superclusterOptions:{maxZoom:this._getClusterMaxZoom(c.clusterMaxZoom),minPoints:Math.max(2,c.clusterMinPoints||2),extent:o.a5,radius:this._pixelsToTileUnits(c.clusterRadius||50),log:!1,generateId:c.generateId||!1},clusterProperties:c.clusterProperties,filter:c.filter},c.workerOptions),typeof this.promoteId=="string"&&(this.workerOptions.promoteId=this.promoteId)}_hasPendingWorkerUpdate(){return this._pendingWorkerUpdate.data!==void 0||this._pendingWorkerUpdate.diff!==void 0||this._pendingWorkerUpdate.optionsChanged}_pixelsToTileUnits(n){return n*(o.a5/this.tileSize)}_getClusterMaxZoom(n){const c=n?Math.round(n):this.maxzoom-1;return Number.isInteger(n)||n===void 0||o.w(`Integer expected for option 'clusterMaxZoom': provided value "${n}" rounded to "${c}"`),c}load(){return o._(this,void 0,void 0,(function*(){yield this._updateWorkerData()}))}onAdd(n){this.map=n,this.load()}setData(n,c){this._data=typeof n=="string"?{url:n}:{geojson:n},this._pendingWorkerUpdate={data:n};const f=this._updateWorkerData();return c?f:this}updateData(n,c){this._pendingWorkerUpdate.diff=o.a6(this._pendingWorkerUpdate.diff,n);const f=this._updateWorkerData();return c?f:this}getData(){return o._(this,void 0,void 0,(function*(){const n=o.e({type:this.type},this.workerOptions);return this.actor.sendAsync({type:"GD",data:n})}))}getBounds(){return o._(this,void 0,void 0,(function*(){return Dr(yield this.getData())}))}setClusterOptions(n){return this.workerOptions.cluster=n.cluster,n.clusterRadius!==void 0&&(this.workerOptions.superclusterOptions.radius=this._pixelsToTileUnits(n.clusterRadius)),n.clusterMaxZoom!==void 0&&(this.workerOptions.superclusterOptions.maxZoom=this._getClusterMaxZoom(n.clusterMaxZoom)),this._pendingWorkerUpdate.optionsChanged=!0,this._updateWorkerData(),this}getClusterExpansionZoom(n){return this.actor.sendAsync({type:"GCEZ",data:{type:this.type,clusterId:n,source:this.id}})}getClusterChildren(n){return this.actor.sendAsync({type:"GCC",data:{type:this.type,clusterId:n,source:this.id}})}getClusterLeaves(n,c,f){return this.actor.sendAsync({type:"GCL",data:{type:this.type,source:this.id,clusterId:n,limit:c,offset:f}})}_updateWorkerData(){return o._(this,void 0,void 0,(function*(){if(this._isUpdatingWorker)return;if(!this._hasPendingWorkerUpdate())return void o.w(`No pending worker updates for GeoJSONSource ${this.id}.`);const{data:n,diff:c}=this._pendingWorkerUpdate,f=o.e({type:this.type},this.workerOptions);n!==void 0?(typeof n=="string"?(f.request=this.map._requestManager.transformRequest(P.resolveURL(n),"Source"),f.request.collectResourceTiming=this._collectResourceTiming):f.data=n,this._pendingWorkerUpdate.data=void 0):c&&(f.dataDiff=c,this._pendingWorkerUpdate.diff=void 0),this._pendingWorkerUpdate.optionsChanged=void 0,this._isUpdatingWorker=!0,this.fire(new o.l("dataloading",{dataType:"source"}));try{const y=yield this.actor.sendAsync({type:"LD",data:f});if(this._isUpdatingWorker=!1,this._removed||y.abandoned)return void this.fire(new o.l("dataabort",{dataType:"source"}));c&&this._applyDiff(c);let b=null;y.resourceTiming&&y.resourceTiming[this.id]&&(b=y.resourceTiming[this.id].slice(0));const S={dataType:"source"};this._collectResourceTiming&&b&&b.length>0&&o.e(S,{resourceTiming:b}),this.fire(new o.l("data",Object.assign(Object.assign({},S),{sourceDataType:"metadata"}))),this.fire(new o.l("data",Object.assign(Object.assign({},S),{sourceDataType:"content",shouldReloadTileOptions:this._getShouldReloadTileOptions(c)})))}catch(y){if(this._isUpdatingWorker=!1,this._removed)return void this.fire(new o.l("dataabort",{dataType:"source"}));this.fire(new o.k(y))}finally{this._hasPendingWorkerUpdate()&&this._updateWorkerData()}}))}_applyDiff(n){const c=typeof this.promoteId=="string"?this.promoteId:void 0;if(!this._data.url&&!this._data.updateable){if(!o.a7(this._data.geojson,c))throw new Error(`GeoJSONSource "${this.id}": GeoJSON data is not compatible with updateData`);this._data={updateable:o.a8(this._data.geojson,c)}}this._data.updateable&&o.a9(this._data.updateable,n,c)}_getShouldReloadTileOptions(n){if(this._options.cluster||!n||n.removeAll)return;const{add:c=[],update:f=[],remove:y=[]}=n||{},b=new Set([...f.map((S=>S.id)),...y]);for(const S of b.values())if(typeof S!="number"&&this.promoteId==null)return void o.w(`GeoJSONSource "${this.id}": updateData is slower when using string GeoJSON feature IDs. Consider using promoteId or numeric IDs for better performance.`);return{nextBounds:[...f.map((S=>S.newGeometry)),...c.map((S=>S.geometry))].filter(Boolean).map((S=>Dr(S))),prevIds:b}}shouldReloadTile(n,{nextBounds:c,prevIds:f}){if(!n.latestFeatureIndex)return n.state!=="unloaded";const y=n.latestFeatureIndex.loadVTLayers();for(let N=0;N<n.latestFeatureIndex.featureIndexArray.length;N++){const j=n.latestFeatureIndex.featureIndexArray.get(N),q=y[o.aa].feature(j.featureIndex),ne=n.latestFeatureIndex.getId(q,o.aa);if(f.has(ne))return!0}const{buffer:b,extent:S}=this.workerOptions.geojsonVtOptions,M=(function({x:N,y:j,z:q},ne=0){const te=o.a3((N-ne)/Math.pow(2,q)),ue=o.a4((j+1+ne)/Math.pow(2,q)),_e=o.a3((N+1+ne)/Math.pow(2,q)),De=o.a4((j-ne)/Math.pow(2,q));return new kr([te,ue],[_e,De])})(n.tileID.canonical,b/S);for(const N of c)if(M.intersects(N))return!0;return!1}loaded(){return!this._isUpdatingWorker&&!this._hasPendingWorkerUpdate()}loadTile(n){return o._(this,void 0,void 0,(function*(){const c=n.actor?"RT":"LT";n.actor=this.actor;const f={type:this.type,uid:n.uid,tileID:n.tileID,zoom:n.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,subdivisionGranularity:this.map.style.projection.subdivisionGranularity};n.abortController=new AbortController;const y=yield this.actor.sendAsync({type:c,data:f},n.abortController);delete n.abortController,n.unloadVectorData(),n.aborted||n.loadVectorData(y,this.map.painter,c==="RT")}))}abortTile(n){return o._(this,void 0,void 0,(function*(){n.abortController&&(n.abortController.abort(),delete n.abortController),n.aborted=!0}))}unloadTile(n){return o._(this,void 0,void 0,(function*(){n.unloadVectorData(),yield this.actor.sendAsync({type:"RMT",data:{uid:n.uid,type:this.type,source:this.id}})}))}onRemove(){this._removed=!0,this.actor.sendAsync({type:"RS",data:{type:this.type,source:this.id}})}serialize(){return o.e({},this._options,{type:this.type,data:this._data.updateable?{type:"FeatureCollection",features:Array.from(this._data.updateable.values())}:this._data.url||this._data.geojson})}hasTransition(){return!1}}class un extends o.E{constructor(n,c,f,y){super(),this.flippedWindingOrder=!1,this.id=n,this.dispatcher=f,this.coordinates=c.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(y),this.options=c}load(n){return o._(this,void 0,void 0,(function*(){this._loaded=!1,this.fire(new o.l("dataloading",{dataType:"source"})),this.url=this.options.url,this._request=new AbortController;try{const c=yield Xe.getImage(this.map._requestManager.transformRequest(this.url,"Image"),this._request);this._request=null,this._loaded=!0,c&&c.data&&(this.image=c.data,n&&(this.coordinates=n),this._finishLoading())}catch(c){this._request=null,this._loaded=!0,o.Z(c)||this.fire(new o.k(c))}}))}loaded(){return this._loaded}updateImage(n){return n.url?(this._request&&(this._request.abort(),this._request=null),this.options.url=n.url,this.load(n.coordinates).finally((()=>{this.texture=null})),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new o.l("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(n){this.map=n,this.load()}onRemove(){this._request&&(this._request.abort(),this._request=null)}setCoordinates(n){this.coordinates=n;const c=n.map(o.ab.fromLngLat);var f;return this.tileID=(function(y){const b=o.ac.fromPoints(y),S=b.width(),M=b.height(),N=Math.max(S,M),j=Math.max(0,Math.floor(-Math.log(N)/Math.LN2)),q=Math.pow(2,j);return new o.ae(j,Math.floor((b.minX+b.maxX)/2*q),Math.floor((b.minY+b.maxY)/2*q))})(c),this.terrainTileRanges=this._getOverlappingTileRanges(c),this.minzoom=this.maxzoom=this.tileID.z,this.tileCoords=c.map((y=>this.tileID.getTilePoint(y)._round())),this.flippedWindingOrder=((f=this.tileCoords)[1].x-f[0].x)*(f[2].y-f[0].y)-(f[1].y-f[0].y)*(f[2].x-f[0].x)<0,this.fire(new o.l("data",{dataType:"source",sourceDataType:"content"})),this}prepare(){if(Object.keys(this.tiles).length===0||!this.image)return;const n=this.map.painter.context,c=n.gl;this.texture||(this.texture=new o.T(n,this.image,c.RGBA),this.texture.bind(c.LINEAR,c.CLAMP_TO_EDGE));let f=!1;for(const y in this.tiles){const b=this.tiles[y];b.state!=="loaded"&&(b.state="loaded",b.texture=this.texture,f=!0)}f&&this.fire(new o.l("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}loadTile(n){return o._(this,void 0,void 0,(function*(){this.tileID&&this.tileID.equals(n.tileID.canonical)?(this.tiles[String(n.tileID.wrap)]=n,n.buckets={}):n.state="errored"}))}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}_getOverlappingTileRanges(n){const{minX:c,minY:f,maxX:y,maxY:b}=o.ac.fromPoints(n),S={};for(let M=0;M<=o.ad;M++){const N=Math.pow(2,M),j=Math.floor(c*N),q=Math.floor(f*N),ne=Math.floor(y*N),te=Math.floor(b*N);S[M]={minTileX:j,minTileY:q,maxTileX:ne,maxTileY:te}}return S}}class pt extends un{constructor(n,c,f,y){super(n,c,f,y),this.roundZoom=!0,this.type="video",this.options=c}load(){return o._(this,void 0,void 0,(function*(){this._loaded=!1;const n=this.options;this.urls=[];for(const c of n.urls)this.urls.push(this.map._requestManager.transformRequest(c,"Source").url);try{const c=yield o.af(this.urls);if(this._loaded=!0,!c)return;this.video=c,this.video.loop=!0,this.video.addEventListener("playing",(()=>{this.map.triggerRepaint()})),this.map&&this.video.play(),this._finishLoading()}catch(c){this.fire(new o.k(c))}}))}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(n){if(this.video){const c=this.video.seekable;n<c.start(0)||n>c.end(0)?this.fire(new o.k(new o.ag(`sources.${this.id}`,null,`Playback for this video can be set only between the ${c.start(0)} and ${c.end(0)}-second mark.`))):this.video.currentTime=n}}getVideo(){return this.video}onAdd(n){this.map||(this.map=n,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;const n=this.map.painter.context,c=n.gl;this.texture?this.video.paused||(this.texture.bind(c.LINEAR,c.CLAMP_TO_EDGE),c.texSubImage2D(c.TEXTURE_2D,0,0,0,c.RGBA,c.UNSIGNED_BYTE,this.video)):(this.texture=new o.T(n,this.video,c.RGBA),this.texture.bind(c.LINEAR,c.CLAMP_TO_EDGE));let f=!1;for(const y in this.tiles){const b=this.tiles[y];b.state!=="loaded"&&(b.state="loaded",b.texture=this.texture,f=!0)}f&&this.fire(new o.l("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}}class fe extends un{constructor(n,c,f,y){super(n,c,f,y),c.coordinates?Array.isArray(c.coordinates)&&c.coordinates.length===4&&!c.coordinates.some((b=>!Array.isArray(b)||b.length!==2||b.some((S=>typeof S!="number"))))||this.fire(new o.k(new o.ag(`sources.${n}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new o.k(new o.ag(`sources.${n}`,null,'missing required property "coordinates"'))),c.animate&&typeof c.animate!="boolean"&&this.fire(new o.k(new o.ag(`sources.${n}`,null,'optional "animate" property must be a boolean value'))),c.canvas?typeof c.canvas=="string"||c.canvas instanceof HTMLCanvasElement||this.fire(new o.k(new o.ag(`sources.${n}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new o.k(new o.ag(`sources.${n}`,null,'missing required property "canvas"'))),this.options=c,this.animate=c.animate===void 0||c.animate}load(){return o._(this,void 0,void 0,(function*(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new o.k(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())}))}getCanvas(){return this.canvas}onAdd(n){this.map=n,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let n=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,n=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,n=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;const c=this.map.painter.context,f=c.gl;this.texture?(n||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):(this.texture=new o.T(c,this.canvas,f.RGBA,{premultiply:!0}),this.texture.bind(f.LINEAR,f.CLAMP_TO_EDGE));let y=!1;for(const b in this.tiles){const S=this.tiles[b];S.state!=="loaded"&&(S.state="loaded",S.texture=this.texture,y=!0)}y&&this.fire(new o.l("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"canvas",animate:this.animate,canvas:this.options.canvas,coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const n of[this.canvas.width,this.canvas.height])if(isNaN(n)||n<=0)return!0;return!1}}const pe={},ve=x=>{switch(x){case"geojson":return Dn;case"image":return un;case"raster":return Gr;case"raster-dem":return Er;case"vector":return lr;case"video":return pt;case"canvas":return fe}return pe[x]},qe="RTLPluginLoaded";class We extends o.E{constructor(){super(...arguments),this.status="unavailable",this.url=null,this.dispatcher=Gt()}_syncState(n){return this.status=n,this.dispatcher.broadcast("SRPS",{pluginStatus:n,pluginURL:this.url}).catch((c=>{throw this.status="error",c}))}getRTLTextPluginStatus(){return this.status}clearRTLTextPlugin(){this.status="unavailable",this.url=null}setRTLTextPlugin(n){return o._(this,arguments,void 0,(function*(c,f=!1){if(this.url)throw new Error("setRTLTextPlugin cannot be called multiple times.");if(this.url=P.resolveURL(c),!this.url)throw new Error(`requested url ${c} is invalid`);if(this.status==="unavailable"){if(!f)return this._requestImport();this.status="deferred",this._syncState(this.status)}else if(this.status==="requested")return this._requestImport()}))}_requestImport(){return o._(this,void 0,void 0,(function*(){yield this._syncState("loading"),this.status="loaded",this.fire(new o.l(qe))}))}lazyLoad(){this.status==="unavailable"?this.status="requested":this.status==="deferred"&&this._requestImport()}}let Ct=null;function vt(){return Ct||(Ct=new We),Ct}var ct,bt;(function(x){x[x.Base=0]="Base",x[x.Parent=1]="Parent"})(ct||(ct={})),(function(x){x[x.Departing=0]="Departing",x[x.Incoming=1]="Incoming"})(bt||(bt={}));class Ht{constructor(n,c){this.timeAdded=0,this.fadeEndTime=0,this.fadeOpacity=1,this.tileID=n,this.uid=o.ah(),this.uses=0,this.tileSize=c,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.rtt=[],this.rttCoords={},this.expiredRequestCount=0,this.state="loading"}isRenderable(n){return this.hasData()&&(!this.fadeEndTime||this.fadeOpacity>0)&&(n||!this.holdingForSymbolFade())}setCrossFadeLogic({fadingRole:n,fadingDirection:c,fadingParentID:f,fadeEndTime:y}){this.resetFadeLogic(),this.fadingRole=n,this.fadingDirection=c,this.fadingParentID=f,this.fadeEndTime=y}setSelfFadeLogic(n){this.resetFadeLogic(),this.selfFading=!0,this.fadeEndTime=n}resetFadeLogic(){this.fadingRole=null,this.fadingDirection=null,this.fadingParentID=null,this.selfFading=!1,this.timeAdded=z(),this.fadeEndTime=0,this.fadeOpacity=1}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}clearTextures(n){this.demTexture&&n.saveTileTexture(this.demTexture),this.demTexture=null}loadVectorData(n,c,f){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",n){n.featureIndex&&(this.latestFeatureIndex=n.featureIndex,n.rawTileData?(this.latestRawTileData=n.rawTileData,this.latestFeatureIndex.rawTileData=n.rawTileData,this.latestFeatureIndex.encoding=n.encoding):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData,this.latestFeatureIndex.encoding=this.latestEncoding)),this.collisionBoxArray=n.collisionBoxArray,this.buckets=(function(y,b){const S={};if(!b)return S;for(const M of y){const N=M.layerIds.map((j=>b.getLayer(j))).filter(Boolean);if(N.length!==0){M.layers=N,M.stateDependentLayerIds&&(M.stateDependentLayers=M.stateDependentLayerIds.map((j=>N.filter((q=>q.id===j))[0])));for(const j of N)S[j.id]=M}}return S})(n.buckets,c?.style),this.hasSymbolBuckets=!1;for(const y in this.buckets){const b=this.buckets[y];if(b instanceof o.aj){if(this.hasSymbolBuckets=!0,!f)break;b.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const y in this.buckets){const b=this.buckets[y];if(b instanceof o.aj&&b.hasRTLText){this.hasRTLText=!0,vt().lazyLoad();break}}this.queryPadding=0;for(const y in this.buckets){const b=this.buckets[y];this.queryPadding=Math.max(this.queryPadding,c.style.getLayer(y).queryRadius(b))}n.imageAtlas&&(this.imageAtlas=n.imageAtlas),n.glyphAtlasImage&&(this.glyphAtlasImage=n.glyphAtlasImage),this.dashPositions=n.dashPositions}else this.collisionBoxArray=new o.ai}unloadVectorData(){for(const n in this.buckets)this.buckets[n].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.dashPositions&&(this.dashPositions=null),this.latestFeatureIndex=null,this.state="unloaded"}getBucket(n){return this.buckets[n.id]}upload(n){for(const f in this.buckets){const y=this.buckets[f];y.uploadPending()&&y.upload(n)}const c=n.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new o.T(n,this.imageAtlas.image,c.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new o.T(n,this.glyphAtlasImage,c.ALPHA),this.glyphAtlasImage=null)}prepare(n){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(n,this.imageAtlasTexture)}queryRenderedFeatures(n,c,f,y,b,S,M,N,j,q,ne){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:y,cameraQueryGeometry:b,scale:S,tileSize:this.tileSize,pixelPosMatrix:q,transform:N,params:M,queryPadding:this.queryPadding*j,getElevation:ne},n,c,f):{}}querySourceFeatures(n,c){const f=this.latestFeatureIndex;if(!f||!f.rawTileData)return;const y=f.loadVTLayers(),b=c&&c.sourceLayer?c.sourceLayer:"",S=y[o.aa]||y[b];if(!S)return;const M=o.ak(c?.filter,c?.globalState),{z:N,x:j,y:q}=this.tileID.canonical,ne={z:N,x:j,y:q};for(let te=0;te<S.length;te++){const ue=S.feature(te);if(M.needGeometry){const ze=o.al(ue,!0);if(!M.filter(new o.H(this.tileID.overscaledZ),ze,this.tileID.canonical))continue}else if(!M.filter(new o.H(this.tileID.overscaledZ),ue))continue;const _e=f.getId(ue,b),De=new o.am(ue,N,j,q,_e);De.tile=ne,n.push(De)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(n){const c=this.expirationTime;if(n.cacheControl){const f=o.an(n.cacheControl);f["max-age"]&&(this.expirationTime=Date.now()+1e3*f["max-age"])}else n.expires&&(this.expirationTime=new Date(n.expires).getTime());if(this.expirationTime){const f=Date.now();let y=!1;if(this.expirationTime>f)y=!1;else if(c)if(this.expirationTime<c)y=!0;else{const b=this.expirationTime-c;b?this.expirationTime=f+Math.max(b,3e4):y=!0}else y=!0;y?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(n,c){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(n).length===0)return;const f=this.latestFeatureIndex.loadVTLayers();for(const y in this.buckets){if(!c.style.hasLayer(y))continue;const b=this.buckets[y],S=b.layers[0].sourceLayer||o.aa,M=f[S],N=n[S];if(!M||!N||Object.keys(N).length===0)continue;b.update(N,M,this.imageAtlas&&this.imageAtlas.patternPositions||{},this.dashPositions||{});const j=c&&c.style&&c.style.getLayer(y);j&&(this.queryPadding=Math.max(this.queryPadding,j.queryRadius(b)))}}holdingForSymbolFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<z()}clearSymbolFadeHold(){this.symbolFadeHoldUntil=void 0}setSymbolHoldDuration(n){this.symbolFadeHoldUntil=z()+n}setDependencies(n,c){const f={};for(const y of c)f[y]=!0;this.dependencies[n]=f}hasDependency(n,c){for(const f of n){const y=this.dependencies[f];if(y){for(const b of c)if(y[b])return!0}}return!1}}class Ft{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(n,c,f){const y=String(c);if(this.stateChanges[n]=this.stateChanges[n]||{},this.stateChanges[n][y]=this.stateChanges[n][y]||{},o.e(this.stateChanges[n][y],f),this.deletedStates[n]===null){this.deletedStates[n]={};for(const b in this.state[n])b!==y&&(this.deletedStates[n][b]=null)}else if(this.deletedStates[n]&&this.deletedStates[n][y]===null){this.deletedStates[n][y]={};for(const b in this.state[n][y])f[b]||(this.deletedStates[n][y][b]=null)}else for(const b in f)this.deletedStates[n]&&this.deletedStates[n][y]&&this.deletedStates[n][y][b]===null&&delete this.deletedStates[n][y][b]}removeFeatureState(n,c,f){if(this.deletedStates[n]===null)return;const y=String(c);if(this.deletedStates[n]=this.deletedStates[n]||{},f&&c!==void 0)this.deletedStates[n][y]!==null&&(this.deletedStates[n][y]=this.deletedStates[n][y]||{},this.deletedStates[n][y][f]=null);else if(c!==void 0)if(this.stateChanges[n]&&this.stateChanges[n][y])for(f in this.deletedStates[n][y]={},this.stateChanges[n][y])this.deletedStates[n][y][f]=null;else this.deletedStates[n][y]=null;else this.deletedStates[n]=null}getState(n,c){const f=String(c),y=o.e({},(this.state[n]||{})[f],(this.stateChanges[n]||{})[f]);if(this.deletedStates[n]===null)return{};if(this.deletedStates[n]){const b=this.deletedStates[n][c];if(b===null)return{};for(const S in b)delete y[S]}return y}initializeTileState(n,c){n.setFeatureState(this.state,c)}coalesceChanges(n,c){const f={};for(const y in this.stateChanges){this.state[y]=this.state[y]||{};const b={};for(const S in this.stateChanges[y])this.state[y][S]||(this.state[y][S]={}),o.e(this.state[y][S],this.stateChanges[y][S]),b[S]=this.state[y][S];f[y]=b}for(const y in this.deletedStates){this.state[y]=this.state[y]||{};const b={};if(this.deletedStates[y]===null)for(const S in this.state[y])b[S]={},this.state[y][S]={};else for(const S in this.deletedStates[y]){if(this.deletedStates[y][S]===null)this.state[y][S]={};else for(const M of Object.keys(this.deletedStates[y][S]))delete this.state[y][S][M];b[S]=this.state[y][S]}f[y]=f[y]||{},o.e(f[y],b)}this.stateChanges={},this.deletedStates={},Object.keys(f).length!==0&&n.setFeatureState(f,c)}}const cr=89.25;function Jt(x,n){const c=o.ao(n.lat,-o.ap,o.ap);return new o.P(o.Y(n.lng)*x,o.X(c)*x)}function fr(x,n){return new o.ab(n.x/x,n.y/x).toLngLat()}function rn(x){return x.cameraToCenterDistance*Math.min(.85*Math.tan(o.aq(90-x.pitch)),Math.tan(o.aq(cr-x.pitch)))}function Tr(x,n){const c=x.canonical,f=n/o.ar(c.z),y=c.x+Math.pow(2,c.z)*x.wrap,b=o.as(new Float64Array(16));return o.O(b,b,[y*f,c.y*f,0]),o.Q(b,b,[f/o.a5,f/o.a5,1]),b}function mt(x,n,c,f,y){const b=o.ab.fromLngLat(x,n),S=y*o.at(1,x.lat),{x:M,y:N,z:j}=tn(c,f);return new o.ab(b.x+S*-M,b.y+S*-N,b.z+S*-j)}function tn(x,n){const c=o.aq(x),f=o.aq(n),y=Math.cos(-c),b=Math.sin(c);return{x:b*Math.sin(f),y:-b*Math.cos(f),z:y}}function Qr(x,n,c){const f=n.intersectsFrustum(x);if(!c||f===0)return f;const y=n.intersectsPlane(c);return y===0?0:f===2&&y===2?2:1}function gr(x,n,c){let f=0;const y=(c-n)/10;for(let b=0;b<10;b++)f+=y*Math.pow(Math.cos(n+(b+.5)/10*(c-n)),x);return f}function $r(x,n){return function(c,f,y,b,S){const M=2*((x-1)/o.au(Math.cos(o.aq(cr-S))/Math.cos(o.aq(cr)))-1),N=Math.acos(y/b),j=2*gr(M-1,0,o.aq(S/2)),q=Math.min(o.aq(cr),N+o.aq(S/2)),ne=gr(M-1,Math.min(q,N-o.aq(S/2)),q),te=Math.atan(f/y),ue=Math.hypot(f,y);let _e=c;return _e+=o.au(b/ue/Math.max(.5,Math.cos(o.aq(S/2)))),_e+=M*o.au(Math.cos(te))/2,_e-=o.au(Math.max(1,ne/j/n))/2,_e}}const Rn=$r(9.314,3);function xr(x,n){const c=(n.roundZoom?Math.round:Math.floor)(x.zoom+o.au(x.tileSize/n.tileSize));return Math.max(0,c)}function Tn(x,n){const c=x.getCameraFrustum(),f=x.getClippingPlane(),y=x.screenPointToMercatorCoordinate(x.getCameraPoint()),b=o.ab.fromLngLat(x.center,x.elevation);y.z=b.z+Math.cos(x.pitchInRadians)*x.cameraToCenterDistance/x.worldSize;const S=x.getCoveringTilesDetailsProvider(),M=S.allowVariableZoom(x,n),N=xr(x,n),j=n.minzoom||0,q=n.maxzoom!==void 0?n.maxzoom:x.maxZoom,ne=Math.min(Math.max(0,N),q),te=Math.pow(2,ne),ue=[te*y.x,te*y.y,0],_e=[te*b.x,te*b.y,0],De=Math.hypot(b.x-y.x,b.y-y.y),ze=Math.abs(b.z-y.z),Oe=Math.hypot(De,ze),Ge=At=>({zoom:0,x:0,y:0,wrap:At,fullyVisible:!1}),lt=[],Ze=[];if(x.renderWorldCopies&&S.allowWorldCopies())for(let At=1;At<=3;At++)lt.push(Ge(-At)),lt.push(Ge(At));for(lt.push(Ge(0));lt.length>0;){const At=lt.pop(),ft=At.x,st=At.y;let wt=At.fullyVisible;const Dt={x:ft,y:st,z:At.zoom},Lt=S.getTileBoundingVolume(Dt,At.wrap,x.elevation,n);if(!wt){const ur=Qr(c,Lt,f);if(ur===0)continue;wt=ur===2}const Rt=S.distanceToTile2d(y.x,y.y,Dt,Lt);let Qt=N;M&&(Qt=(n.calculateTileZoom||Rn)(x.zoom+o.au(x.tileSize/n.tileSize),Rt,ze,Oe,x.fov)),Qt=(n.roundZoom?Math.round:Math.floor)(Qt),Qt=Math.max(0,Qt);const nr=Math.min(Qt,q);if(At.wrap=S.getWrap(b,Dt,At.wrap),At.zoom>=nr){if(At.zoom<j)continue;const ur=ne-At.zoom,rr=ue[0]-.5-(ft<<ur),Rr=ue[1]-.5-(st<<ur),vn=n.reparseOverscaled?Math.max(At.zoom,Qt):At.zoom;Ze.push({tileID:new o.a2(At.zoom===q?vn:At.zoom,At.wrap,At.zoom,ft,st),distanceSq:o.av([_e[0]-.5-ft,_e[1]-.5-st]),tileDistanceToCamera:Math.sqrt(rr*rr+Rr*Rr)})}else for(let ur=0;ur<4;ur++)lt.push({zoom:At.zoom+1,x:(ft<<1)+ur%2,y:(st<<1)+(ur>>1),wrap:At.wrap,fullyVisible:wt})}return Ze.sort(((At,ft)=>At.distanceSq-ft.distanceSq)).map((At=>At.tileID))}const Bn=o.ac.fromPoints([new o.P(0,0),new o.P(o.a5,o.a5)]);function xn(x){return x==="raster"||x==="image"||x==="video"}function Ui(x,n,c,f,y,b,S){if(!n.hasData())return!1;const{tileID:M,fadingRole:N,fadingDirection:j,fadingParentID:q}=n;if(N===ct.Base&&j===bt.Incoming&&q)return c[q.key]=q,!0;const ne=Math.max(M.overscaledZ-y,b);for(let te=M.overscaledZ-1;te>=ne;te--){const ue=M.scaledTo(te),_e=x.getLoadedTile(ue);if(_e)return n.setCrossFadeLogic({fadingRole:ct.Base,fadingDirection:bt.Incoming,fadingParentID:_e.tileID,fadeEndTime:f+S}),_e.setCrossFadeLogic({fadingRole:ct.Parent,fadingDirection:bt.Departing,fadeEndTime:f+S}),c[ue.key]=ue,!0}return!1}function ai(x,n,c,f,y,b){if(!n.hasData())return!1;const S=n.tileID.children(y);let M=Yt(x,n,S,c,f,y,b);if(M)return!0;for(const N of S)Yt(x,n,N.children(y),c,f,y,b)&&(M=!0);return M}function Yt(x,n,c,f,y,b,S){if(c[0].overscaledZ>=b)return!1;let M=!1;for(const N of c){const j=x.getLoadedTile(N);if(!j)continue;const{fadingRole:q,fadingDirection:ne,fadingParentID:te}=j;q===ct.Base&&ne===bt.Departing&&te||(j.setCrossFadeLogic({fadingRole:ct.Base,fadingDirection:bt.Departing,fadingParentID:n.tileID,fadeEndTime:y+S}),n.setCrossFadeLogic({fadingRole:ct.Parent,fadingDirection:bt.Incoming,fadeEndTime:y+S})),f[N.key]=N,M=!0}return M}function Zn(x,n,c,f){const y=x.tileID;return!!x.selfFading||!x.hasData()&&!!n.has(y)&&(x.setSelfFadeLogic(c+f),!0)}function $i(x,n){var c;x.needsHillshadePrepare=!0,x.needsTerrainPrepare=!0;let f=n.tileID.canonical.x-x.tileID.canonical.x;const y=n.tileID.canonical.y-x.tileID.canonical.y,b=Math.pow(2,x.tileID.canonical.z),S=n.tileID.key;f===0&&y===0||Math.abs(y)>1||(Math.abs(f)>1&&(Math.abs(f+b)===1?f+=b:Math.abs(f-b)===1&&(f-=b)),n.dem&&x.dem&&(x.dem.backfillBorder(n.dem,f,y),!((c=x.neighboringTiles)===null||c===void 0)&&c[S]&&(x.neighboringTiles[S].backfilled=!0)))}class sl{constructor(){this._tiles={}}handleWrapJump(n){const c={};for(const f in this._tiles){const y=this._tiles[f];y.tileID=y.tileID.unwrapTo(y.tileID.wrap+n),c[y.tileID.key]=y}this._tiles=c}setFeatureState(n,c){for(const f in this._tiles)this._tiles[f].setFeatureState(n,c)}getAllTiles(){return Object.values(this._tiles)}getAllIds(n=!1){return n?Object.values(this._tiles).map((c=>c.tileID)).sort(o.ax).map((c=>c.key)):Object.keys(this._tiles)}getTileById(n){return this._tiles[n]}setTile(n,c){this._tiles[n]=c}deleteTileById(n){delete this._tiles[n]}getLoadedTile(n){const c=this.getTileById(n.key);return c?.hasData()?c:null}isIdRenderable(n,c=!1){var f;return(f=this.getTileById(n))===null||f===void 0?void 0:f.isRenderable(c)}getRenderableIds(n=0,c){const f=[];for(const y of this.getAllIds())this.isIdRenderable(y,c)&&f.push(this.getTileById(y));return c?f.sort(((y,b)=>{const S=y.tileID,M=b.tileID,N=new o.P(S.canonical.x,S.canonical.y)._rotate(-n),j=new o.P(M.canonical.x,M.canonical.y)._rotate(-n);return S.overscaledZ-M.overscaledZ||j.y-N.y||j.x-N.x})).map((y=>y.tileID.key)):f.map((y=>y.tileID)).sort(o.ax).map((y=>y.key))}}class ns extends o.E{constructor(n,c,f){super(),this.id=n,this.dispatcher=f,this.on("data",(y=>this._dataHandler(y))),this.on("dataloading",(()=>{this._sourceErrored=!1})),this.on("error",(()=>{this._sourceErrored=this._source.loaded()})),this._source=((y,b,S,M)=>{const N=new(ve(b.type))(y,b,S,M);if(N.id!==y)throw new Error(`Expected Source id to be ${y} instead of ${N.id}`);return N})(n,c,f,this),this._inViewTiles=new sl,this._outOfViewCache=new o.ay(0,(y=>this._unloadTile(y))),this._timers={},this._maxTileCacheSize=null,this._maxTileCacheZoomLevels=null,this._rasterFadeDuration=0,this._maxFadingAncestorLevels=5,this._state=new Ft,this._didEmitContent=!1,this._updated=!1}onAdd(n){this.map=n,this._maxTileCacheSize=n?n._maxTileCacheSize:null,this._maxTileCacheZoomLevels=n?n._maxTileCacheZoomLevels:null,this._source&&this._source.onAdd&&this._source.onAdd(n)}onRemove(n){for(const c of this._inViewTiles.getAllTiles())c.unloadVectorData();this.clearTiles(),this._source&&this._source.onRemove&&this._source.onRemove(n),this._inViewTiles=new sl}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;if(!(this.used===void 0&&this.usedForTerrain===void 0||this.used||this.usedForTerrain))return!0;if(!this._updated)return!1;for(const n of this._inViewTiles.getAllTiles())if(n.state!=="loaded"&&n.state!=="errored")return!1;return!0}getSource(){return this._source}getState(){return this._state}pause(){this._paused=!0}resume(){if(!this._paused)return;const n=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,n&&this.reload(),this.transform&&this.update(this.transform,this.terrain)}_loadTile(n,c,f){return o._(this,void 0,void 0,(function*(){try{yield this._source.loadTile(n),this._tileLoaded(n,c,f)}catch(y){n.state="errored",y.status!==404?this._source.fire(new o.k(y,{tile:n})):this.update(this.transform,this.terrain)}}))}_unloadTile(n){this._source.unloadTile&&this._source.unloadTile(n)}_abortTile(n){this._source.abortTile&&this._source.abortTile(n),this._source.fire(new o.l("dataabort",{tile:n,coord:n.tileID,dataType:"source"}))}serialize(){return this._source.serialize()}prepare(n){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._inViewTiles,this.map?this.map.painter:null);for(const c of this._inViewTiles.getAllTiles())c.upload(n),c.prepare(this.map.style.imageManager)}getIds(){return this._inViewTiles.getAllIds(!0)}getRenderableIds(n){var c;return this._inViewTiles.getRenderableIds((c=this.transform)===null||c===void 0?void 0:c.bearingInRadians,n)}hasRenderableParent(n){const c=n.overscaledZ-1;if(c>=this._source.minzoom){const f=this.getLoadedTile(n.scaledTo(c));if(f)return this._inViewTiles.isIdRenderable(f.tileID.key)}return!1}reload(n,c=void 0){if(this._paused)this._shouldReloadOnResume=!0;else{this._outOfViewCache.reset();for(const f of this._inViewTiles.getAllIds()){const y=this._inViewTiles.getTileById(f);c&&!this._source.shouldReloadTile(y,c)||(n?this._reloadTile(f,"expired"):y.state!=="errored"&&this._reloadTile(f,"reloading"))}}}_reloadTile(n,c){return o._(this,void 0,void 0,(function*(){const f=this._inViewTiles.getTileById(n);f&&(f.state!=="loading"&&(f.state=c),yield this._loadTile(f,n,c))}))}_tileLoaded(n,c,f){n.timeAdded=z(),n.selfFading&&(n.fadeEndTime=n.timeAdded+this._rasterFadeDuration),f==="expired"&&(n.refreshedUponExpiration=!0),this._setTileReloadTimer(c,n),this.getSource().type==="raster-dem"&&n.dem&&(function(y,b){var S,M;const N=b.getRenderableIds();for(const j of N){if(!y.neighboringTiles||!y.neighboringTiles[j])continue;const q=b.getTileById(j);y.neighboringTiles[j].backfilled||$i(y,q),!((M=(S=q.neighboringTiles)===null||S===void 0?void 0:S[y.tileID.key])===null||M===void 0)&&M.backfilled||$i(q,y)}})(n,this._inViewTiles),this._state.initializeTileState(n,this.map?this.map.painter:null),n.aborted||this._source.fire(new o.l("data",{dataType:"source",tile:n,coord:n.tileID}))}getTile(n){return this.getTileByID(n.key)}getTileByID(n){return this._inViewTiles.getTileById(n)}_retainLoadedChildren(n,c){const f=this._getLoadedDescendents(c),y=new Set;for(const b of c){const S=f[b.key];if(!S?.length){y.add(b);continue}const M=b.overscaledZ+ns.maxOverzooming,N=S.filter((ne=>ne.tileID.overscaledZ<=M));if(!N.length){y.add(b);continue}const j=Math.min(...N.map((ne=>ne.tileID.overscaledZ))),q=N.filter((ne=>ne.tileID.overscaledZ===j)).map((ne=>ne.tileID));for(const ne of q)n[ne.key]=ne;this._areDescendentsComplete(q,j,b.overscaledZ)||y.add(b)}return y}_getLoadedDescendents(n){var c;const f={};for(const y of this._inViewTiles.getAllTiles().filter((b=>b.hasData())))for(const b of n)y.tileID.isChildOf(b)&&(f[c=b.key]||(f[c]=[])).push(y);return f}_areDescendentsComplete(n,c,f){return n.length===1&&n[0].isOverscaled()?n[0].overscaledZ===c:Math.pow(4,c-f)===n.length}getLoadedTile(n){return this._inViewTiles.getLoadedTile(n)}updateCacheSize(n){const c=Math.ceil(n.width/this._source.tileSize)+1,f=Math.ceil(n.height/this._source.tileSize)+1,y=Math.floor(c*f*(this._maxTileCacheZoomLevels===null?o.c.MAX_TILE_CACHE_ZOOM_LEVELS:this._maxTileCacheZoomLevels)),b=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,y):y;this._outOfViewCache.setMaxSize(b)}handleWrapJump(n){const c=Math.round((n-(this._prevLng===void 0?n:this._prevLng))/360);this._prevLng=n,c&&(this._inViewTiles.handleWrapJump(c),this._resetTileReloadTimers())}update(n,c){if(!this._sourceLoaded||this._paused)return;let f;this.transform=n,this.terrain=c,this.updateCacheSize(n),this.handleWrapJump(this.transform.center.lng),this.used||this.usedForTerrain?this._source.tileID?f=n.getVisibleUnwrappedCoordinates(this._source.tileID).map((N=>new o.a2(N.canonical.z,N.wrap,N.canonical.z,N.canonical.x,N.canonical.y))):(f=Tn(n,{tileSize:this.usedForTerrain?this.tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.type==="vector"&&this.map._zoomLevelsToOverscale!==void 0?n.maxZoom-this.map._zoomLevelsToOverscale:this._source.maxzoom,roundZoom:!this.usedForTerrain&&this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled,terrain:c,calculateTileZoom:this._source.calculateTileZoom}),this._source.hasTile&&(f=f.filter((N=>this._source.hasTile(N))))):f=[],this.usedForTerrain&&(f=this._addTerrainIdealTiles(f));const y=f.length===0&&!this._updated&&this._didEmitContent;this._updated=!0,y&&this.fire(new o.l("data",{sourceDataType:"idle",dataType:"source",sourceId:this.id}));const b=xr(n,this._source),S=this._updateRetainedTiles(f,b),M=xn(this._source.type);M&&this._rasterFadeDuration>0&&!c&&(function(N,j,q,ne,te,ue,_e){const De=z(),ze=o.aw(j);for(const Oe of j){const Ge=N.getTileById(Oe.key);Ge.fadingDirection!==bt.Departing&&Ge.fadeOpacity!==0||Ge.resetFadeLogic(),Ui(N,Ge,q,De,ne,te,_e)||ai(N,Ge,q,De,ue,_e)||Zn(Ge,ze,De,_e)||Ge.resetFadeLogic()}})(this._inViewTiles,f,S,this._maxFadingAncestorLevels,this._source.minzoom,this._source.maxzoom,this._rasterFadeDuration),M?this._cleanUpRasterTiles(S):this._cleanUpVectorTiles(S)}_cleanUpRasterTiles(n){for(const c of this._inViewTiles.getAllIds())n[c]||this._removeTile(c)}_cleanUpVectorTiles(n){for(const c of this._inViewTiles.getAllIds()){const f=this._inViewTiles.getTileById(c);n[c]?f.clearSymbolFadeHold():f.hasSymbolBuckets?f.holdingForSymbolFade()?f.symbolFadeFinished()&&this._removeTile(c):f.setSymbolHoldDuration(this.map._fadeDuration):this._removeTile(c)}}_addTerrainIdealTiles(n){const c=[];for(const f of n)if(f.canonical.z>this._source.minzoom){const y=f.scaledTo(f.canonical.z-1);c.push(y);const b=f.scaledTo(Math.max(this._source.minzoom,Math.min(f.canonical.z,5)));c.push(b)}return n.concat(c)}releaseSymbolFadeTiles(){for(const n of this._inViewTiles.getAllIds())this._inViewTiles.getTileById(n).holdingForSymbolFade()&&this._removeTile(n)}_updateRetainedTiles(n,c){var f;const y=new Set;for(const j of n)this._addTile(j).hasData()||y.add(j);const b=n.reduce(((j,q)=>(j[q.key]=q,j)),{}),S=this._retainLoadedChildren(b,y),M={},N=Math.max(c-ns.maxUnderzooming,this._source.minzoom);for(const j of S){let q=this._inViewTiles.getTileById(j.key),ne=q?.wasRequested();for(let te=j.overscaledZ-1;te>=N;--te){const ue=j.scaledTo(te);if(M[ue.key])break;if(M[ue.key]=!0,q=this.getTile(ue),!q&&ne&&(q=this._addTile(ue)),q){const _e=q.hasData();if((_e||!(!((f=this.map)===null||f===void 0)&&f.cancelPendingTileRequestsWhileZooming)||ne)&&(b[ue.key]=ue),ne=q.wasRequested(),_e)break}}}return b}_addTile(n){let c=this._inViewTiles.getTileById(n.key);if(c)return c;c=this._outOfViewCache.getAndRemove(n),c&&(c.resetFadeLogic(),this._setTileReloadTimer(n.key,c),c.tileID=n,this._state.initializeTileState(c,this.map?this.map.painter:null));const f=c;return c||(c=new Ht(n,this._source.tileSize*n.overscaleFactor()),this._loadTile(c,n.key,c.state)),c.uses++,this._inViewTiles.setTile(n.key,c),f||this._source.fire(new o.l("dataloading",{tile:c,coord:c.tileID,dataType:"source"})),c}_setTileReloadTimer(n,c){this._clearTileReloadTimer(n);const f=c.getExpiryTimeout();f&&(this._timers[n]=setTimeout((()=>{this._reloadTile(n,"expired"),delete this._timers[n]}),f))}_clearTileReloadTimer(n){const c=this._timers[n];c&&(clearTimeout(c),delete this._timers[n])}_resetTileReloadTimers(){for(const n in this._timers)clearTimeout(this._timers[n]),delete this._timers[n];for(const n of this._inViewTiles.getAllIds()){const c=this._inViewTiles.getTileById(n);this._setTileReloadTimer(n,c)}}refreshTiles(n){for(const c of this._inViewTiles.getAllIds()){const f=this._inViewTiles.getTileById(c);(this._inViewTiles.isIdRenderable(c)||f.state=="errored")&&n.some((y=>y.equals(f.tileID.canonical)))&&this._reloadTile(c,"expired")}}_removeTile(n){const c=this._inViewTiles.getTileById(n);c&&(c.uses--,this._inViewTiles.deleteTileById(n),this._clearTileReloadTimer(n),c.uses>0||(c.hasData()&&c.state!=="reloading"?this._outOfViewCache.add(c.tileID,c,c.getExpiryTimeout()):(c.aborted=!0,this._abortTile(c),this._unloadTile(c))))}_dataHandler(n){n.dataType==="source"&&(n.sourceDataType!=="metadata"?n.sourceDataType==="content"&&this._sourceLoaded&&!this._paused&&(this.reload(n.sourceDataChanged,n.shouldReloadTileOptions),this.transform&&this.update(this.transform,this.terrain),this._didEmitContent=!0):this._sourceLoaded=!0)}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const n of this._inViewTiles.getAllIds())this._removeTile(n);this._outOfViewCache.reset()}tilesIn(n,c,f){const y=[],b=this.transform;if(!b)return y;const S=b.getCoveringTilesDetailsProvider().allowWorldCopies(),M=f?b.getCameraQueryGeometry(n):n,N=ue=>b.screenPointToMercatorCoordinate(ue,this.terrain),j=this.transformBbox(n,N,!S),q=this.transformBbox(M,N,!S),ne=this.getIds(),te=o.ac.fromPoints(q);for(let ue=0;ue<ne.length;ue++){const _e=this._inViewTiles.getTileById(ne[ue]);if(_e.holdingForSymbolFade())continue;const De=S?[_e.tileID]:[_e.tileID.unwrapTo(-1),_e.tileID.unwrapTo(0)],ze=Math.pow(2,b.zoom-_e.tileID.overscaledZ),Oe=c*_e.queryPadding*o.a5/_e.tileSize/ze;for(const Ge of De){const lt=te.map((Ze=>Ge.getTilePoint(new o.ab(Ze.x,Ze.y))));if(lt.expandBy(Oe),lt.intersects(Bn)){const Ze=j.map((ft=>Ge.getTilePoint(ft))),At=q.map((ft=>Ge.getTilePoint(ft)));y.push({tile:_e,tileID:S?Ge:Ge.unwrapTo(0),queryGeometry:Ze,cameraQueryGeometry:At,scale:ze})}}}return y}transformBbox(n,c,f){let y=n.map(c);if(f){const b=o.ac.fromPoints(n);b.shrinkBy(.001*Math.min(b.width(),b.height()));const S=b.map(c);o.ac.fromPoints(y).covers(S)||(y=y.map((M=>M.x>.5?new o.ab(M.x-1,M.y,M.z):M)))}return y}getVisibleCoordinates(n){const c=this.getRenderableIds(n).map((f=>this._inViewTiles.getTileById(f).tileID));return this.transform&&this.transform.populateCache(c),c}hasTransition(){return!!this._source.hasTransition()||!(!xn(this._source.type)||!(function(n,c){if(c<=0)return!1;const f=z();for(const y of n.getAllTiles())if(y.fadeEndTime>=f)return!0;return!1})(this._inViewTiles,this._rasterFadeDuration))}setRasterFadeDuration(n){this._rasterFadeDuration=n}setFeatureState(n,c,f){this._state.updateState(n=n||o.aa,c,f)}removeFeatureState(n,c,f){this._state.removeFeatureState(n=n||o.aa,c,f)}getFeatureState(n,c){return this._state.getState(n=n||o.aa,c)}setDependencies(n,c,f){const y=this._inViewTiles.getTileById(n);y&&y.setDependencies(c,f)}reloadTilesForDependencies(n,c){for(const f of this._inViewTiles.getAllIds())this._inViewTiles.getTileById(f).hasDependency(n,c)&&this._reloadTile(f,"reloading");this._outOfViewCache.filter((f=>!f.hasDependency(n,c)))}areTilesLoaded(){for(const n of this._inViewTiles.getAllTiles())if(n.state!=="loaded"&&n.state!=="errored")return!1;return!0}}ns.maxUnderzooming=10,ns.maxOverzooming=3;class pr{constructor(n,c){this.reset(n,c)}reset(n,c){this.points=n||[],this._distances=[0];for(let f=1;f<this.points.length;f++)this._distances[f]=this._distances[f-1]+this.points[f].dist(this.points[f-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(c||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(n){if(this.points.length===1)return this.points[0];n=o.ao(n,0,1);let c=1,f=this._distances[c];const y=n*this.paddedLength+this.padding;for(;f<y&&c<this._distances.length;)f=this._distances[++c];const b=c-1,S=this._distances[b],M=f-S,N=M>0?(y-S)/M:0;return this.points[b].mult(1-N).add(this.points[c].mult(N))}}function nn(x,n){let c=!0;return x==="always"||x!=="never"&&n!=="never"||(c=!1),c}class hn{constructor(n,c,f){const y=this.boxCells=[],b=this.circleCells=[];this.xCellCount=Math.ceil(n/f),this.yCellCount=Math.ceil(c/f);for(let S=0;S<this.xCellCount*this.yCellCount;S++)y.push([]),b.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=n,this.height=c,this.xScale=this.xCellCount/n,this.yScale=this.yCellCount/c,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(n,c,f,y,b){this._forEachCell(c,f,y,b,this._insertBoxCell,this.boxUid++),this.boxKeys.push(n),this.bboxes.push(c),this.bboxes.push(f),this.bboxes.push(y),this.bboxes.push(b)}insertCircle(n,c,f,y){this._forEachCell(c-y,f-y,c+y,f+y,this._insertCircleCell,this.circleUid++),this.circleKeys.push(n),this.circles.push(c),this.circles.push(f),this.circles.push(y)}_insertBoxCell(n,c,f,y,b,S){this.boxCells[b].push(S)}_insertCircleCell(n,c,f,y,b,S){this.circleCells[b].push(S)}_query(n,c,f,y,b,S,M){if(f<0||n>this.width||y<0||c>this.height)return[];const N=[];if(n<=0&&c<=0&&this.width<=f&&this.height<=y){if(b)return[{key:null,x1:n,y1:c,x2:f,y2:y}];for(let j=0;j<this.boxKeys.length;j++)N.push({key:this.boxKeys[j],x1:this.bboxes[4*j],y1:this.bboxes[4*j+1],x2:this.bboxes[4*j+2],y2:this.bboxes[4*j+3]});for(let j=0;j<this.circleKeys.length;j++){const q=this.circles[3*j],ne=this.circles[3*j+1],te=this.circles[3*j+2];N.push({key:this.circleKeys[j],x1:q-te,y1:ne-te,x2:q+te,y2:ne+te})}}else this._forEachCell(n,c,f,y,this._queryCell,N,{hitTest:b,overlapMode:S,seenUids:{box:{},circle:{}}},M);return N}query(n,c,f,y){return this._query(n,c,f,y,!1,null)}hitTest(n,c,f,y,b,S){return this._query(n,c,f,y,!0,b,S).length>0}hitTestCircle(n,c,f,y,b){const S=n-f,M=n+f,N=c-f,j=c+f;if(M<0||S>this.width||j<0||N>this.height)return!1;const q=[];return this._forEachCell(S,N,M,j,this._queryCellCircle,q,{hitTest:!0,overlapMode:y,circle:{x:n,y:c,radius:f},seenUids:{box:{},circle:{}}},b),q.length>0}_queryCell(n,c,f,y,b,S,M,N){const{seenUids:j,hitTest:q,overlapMode:ne}=M,te=this.boxCells[b];if(te!==null){const _e=this.bboxes;for(const De of te)if(!j.box[De]){j.box[De]=!0;const ze=4*De,Oe=this.boxKeys[De];if(n<=_e[ze+2]&&c<=_e[ze+3]&&f>=_e[ze+0]&&y>=_e[ze+1]&&(!N||N(Oe))&&(!q||!nn(ne,Oe.overlapMode))&&(S.push({key:Oe,x1:_e[ze],y1:_e[ze+1],x2:_e[ze+2],y2:_e[ze+3]}),q))return!0}}const ue=this.circleCells[b];if(ue!==null){const _e=this.circles;for(const De of ue)if(!j.circle[De]){j.circle[De]=!0;const ze=3*De,Oe=this.circleKeys[De];if(this._circleAndRectCollide(_e[ze],_e[ze+1],_e[ze+2],n,c,f,y)&&(!N||N(Oe))&&(!q||!nn(ne,Oe.overlapMode))){const Ge=_e[ze],lt=_e[ze+1],Ze=_e[ze+2];if(S.push({key:Oe,x1:Ge-Ze,y1:lt-Ze,x2:Ge+Ze,y2:lt+Ze}),q)return!0}}}return!1}_queryCellCircle(n,c,f,y,b,S,M,N){const{circle:j,seenUids:q,overlapMode:ne}=M,te=this.boxCells[b];if(te!==null){const _e=this.bboxes;for(const De of te)if(!q.box[De]){q.box[De]=!0;const ze=4*De,Oe=this.boxKeys[De];if(this._circleAndRectCollide(j.x,j.y,j.radius,_e[ze+0],_e[ze+1],_e[ze+2],_e[ze+3])&&(!N||N(Oe))&&!nn(ne,Oe.overlapMode))return S.push(!0),!0}}const ue=this.circleCells[b];if(ue!==null){const _e=this.circles;for(const De of ue)if(!q.circle[De]){q.circle[De]=!0;const ze=3*De,Oe=this.circleKeys[De];if(this._circlesCollide(_e[ze],_e[ze+1],_e[ze+2],j.x,j.y,j.radius)&&(!N||N(Oe))&&!nn(ne,Oe.overlapMode))return S.push(!0),!0}}}_forEachCell(n,c,f,y,b,S,M,N){const j=this._convertToXCellCoord(n),q=this._convertToYCellCoord(c),ne=this._convertToXCellCoord(f),te=this._convertToYCellCoord(y);for(let ue=j;ue<=ne;ue++)for(let _e=q;_e<=te;_e++)if(b.call(this,n,c,f,y,this.xCellCount*_e+ue,S,M,N))return}_convertToXCellCoord(n){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(n*this.xScale)))}_convertToYCellCoord(n){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(n*this.yScale)))}_circlesCollide(n,c,f,y,b,S){const M=y-n,N=b-c,j=f+S;return j*j>M*M+N*N}_circleAndRectCollide(n,c,f,y,b,S,M){const N=(S-y)/2,j=Math.abs(n-(y+N));if(j>N+f)return!1;const q=(M-b)/2,ne=Math.abs(c-(b+q));if(ne>q+f)return!1;if(j<=N||ne<=q)return!0;const te=j-N,ue=ne-q;return te*te+ue*ue<=f*f}}function Di(x,n,c){const f=o.N();if(!x){const{vecSouth:ne,vecEast:te}=ks(n),ue=E();ue[0]=te[0],ue[1]=te[1],ue[2]=ne[0],ue[3]=ne[1],y=ue,(q=(S=(b=ue)[0])*(j=b[3])-(N=b[2])*(M=b[1]))&&(y[0]=j*(q=1/q),y[1]=-M*q,y[2]=-N*q,y[3]=S*q),f[0]=ue[0],f[1]=ue[1],f[4]=ue[2],f[5]=ue[3]}var y,b,S,M,N,j,q;return o.Q(f,f,[1/c,1/c,1]),f}function El(x,n,c,f){if(x){const y=o.N();if(!n){const{vecSouth:b,vecEast:S}=ks(c);y[0]=S[0],y[1]=S[1],y[4]=b[0],y[5]=b[1]}return o.Q(y,y,[f,f,1]),y}return c.pixelsToClipSpaceMatrix}function ks(x){const n=Math.cos(x.rollInRadians),c=Math.sin(x.rollInRadians),f=Math.cos(x.pitchInRadians),y=Math.cos(x.bearingInRadians),b=Math.sin(x.bearingInRadians),S=o.aD();S[0]=-y*f*c-b*n,S[1]=-b*f*c+y*n;const M=o.aE(S);M<1e-9?o.aF(S):o.aG(S,S,1/M);const N=o.aD();N[0]=y*f*n-b*c,N[1]=b*f*n+y*c;const j=o.aE(N);return j<1e-9?o.aF(N):o.aG(N,N,1/j),{vecEast:N,vecSouth:S}}function dn(x,n,c,f){let y;f?(y=[x,n,f(x,n),1],o.aI(y,y,c)):(y=[x,n,0,1],IA(y,y,c));const b=y[3];return{point:new o.P(y[0]/b,y[1]/b),signedDistanceFromCamera:b,isOccluded:!1}}function ol(x,n){return .5+x/n*.5}function al(x,n){return x.x>=-n[0]&&x.x<=n[0]&&x.y>=-n[1]&&x.y<=n[1]}function ec(x,n,c,f,y,b,S,M,N,j,q,ne,te){const ue=c?x.textSizeData:x.iconSizeData,_e=o.az(ue,n.transform.zoom),De=[256/n.width*2+1,256/n.height*2+1],ze=c?x.text.dynamicLayoutVertexArray:x.icon.dynamicLayoutVertexArray;ze.clear();const Oe=x.lineVertexArray,Ge=c?x.text.placedSymbolArray:x.icon.placedSymbolArray,lt=n.transform.width/n.transform.height;let Ze=!1;for(let At=0;At<Ge.length;At++){const ft=Ge.get(At);if(ft.hidden||ft.writingMode===o.aA.vertical&&!Ze){Ba(ft.numGlyphs,ze);continue}Ze=!1;const st=new o.P(ft.anchorX,ft.anchorY),wt={getElevation:te,pitchedLabelPlaneMatrix:f,lineVertexArray:Oe,pitchWithMap:b,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},transform:n.transform,tileAnchorPoint:st,unwrappedTileID:N,width:j,height:q,translation:ne},Dt=ll(ft.anchorX,ft.anchorY,wt);if(!al(Dt.point,De)){Ba(ft.numGlyphs,ze);continue}const Lt=ol(n.transform.cameraToCenterDistance,Dt.signedDistanceFromCamera),Rt=o.aB(ue,_e,ft),Qt=b?Rt*n.transform.getPitchedTextCorrection(ft.anchorX,ft.anchorY,N)/Lt:Rt*Lt,nr=tc({projectionContext:wt,pitchedLabelPlaneMatrixInverse:y,symbol:ft,fontSize:Qt,flip:!1,keepUpright:S,glyphOffsetArray:x.glyphOffsetArray,dynamicLayoutVertexArray:ze,aspectRatio:lt,rotateToLine:M});Ze=nr.useVertical,(nr.notEnoughRoom||Ze||nr.needsFlipping&&tc({projectionContext:wt,pitchedLabelPlaneMatrixInverse:y,symbol:ft,fontSize:Qt,flip:!0,keepUpright:S,glyphOffsetArray:x.glyphOffsetArray,dynamicLayoutVertexArray:ze,aspectRatio:lt,rotateToLine:M}).notEnoughRoom)&&Ba(ft.numGlyphs,ze)}c?x.text.dynamicLayoutVertexBuffer.updateData(ze):x.icon.dynamicLayoutVertexBuffer.updateData(ze)}function Ec(x,n,c,f,y,b,S,M){const N=b.glyphStartIndex+b.numGlyphs,j=b.lineStartIndex,q=b.lineStartIndex+b.lineLength,ne=n.getoffsetX(b.glyphStartIndex),te=n.getoffsetX(N-1),ue=Ro(x*ne,c,f,y,b.segment,j,q,M,S);if(!ue)return null;const _e=Ro(x*te,c,f,y,b.segment,j,q,M,S);return _e?M.projectionCache.anyProjectionOccluded?null:{first:ue,last:_e}:null}function fi(x,n,c,f){return x===o.aA.horizontal&&Math.abs(c.y-n.y)>Math.abs(c.x-n.x)*f?{useVertical:!0}:(x===o.aA.vertical?n.y<c.y:n.x>c.x)?{needsFlipping:!0}:null}function tc(x){const{projectionContext:n,pitchedLabelPlaneMatrixInverse:c,symbol:f,fontSize:y,flip:b,keepUpright:S,glyphOffsetArray:M,dynamicLayoutVertexArray:N,aspectRatio:j,rotateToLine:q}=x,ne=y/24,te=f.lineOffsetX*ne,ue=f.lineOffsetY*ne;let _e;if(f.numGlyphs>1){const De=f.glyphStartIndex+f.numGlyphs,ze=f.lineStartIndex,Oe=f.lineStartIndex+f.lineLength,Ge=Ec(ne,M,te,ue,b,f,q,n);if(!Ge)return{notEnoughRoom:!0};const lt=rA(Ge.first.point.x,Ge.first.point.y,n,c),Ze=rA(Ge.last.point.x,Ge.last.point.y,n,c);if(S&&!b){const At=fi(f.writingMode,lt,Ze,j);if(At)return At}_e=[Ge.first];for(let At=f.glyphStartIndex+1;At<De-1;At++){const ft=Ro(ne*M.getoffsetX(At),te,ue,b,f.segment,ze,Oe,n,q);if(!ft)return{notEnoughRoom:!0};_e.push(ft)}_e.push(Ge.last)}else{if(S&&!b){const ze=jn(n.tileAnchorPoint.x,n.tileAnchorPoint.y,n).point,Oe=f.lineStartIndex+f.segment+1,Ge=new o.P(n.lineVertexArray.getx(Oe),n.lineVertexArray.gety(Oe)),lt=jn(Ge.x,Ge.y,n),Ze=lt.signedDistanceFromCamera>0?lt.point:Sl(n.tileAnchorPoint,Ge,ze,1,n),At=rA(ze.x,ze.y,n,c),ft=rA(Ze.x,Ze.y,n,c),st=fi(f.writingMode,At,ft,j);if(st)return st}const De=Ro(ne*M.getoffsetX(f.glyphStartIndex),te,ue,b,f.segment,f.lineStartIndex,f.lineStartIndex+f.lineLength,n,q);if(!De||n.projectionCache.anyProjectionOccluded)return{notEnoughRoom:!0};_e=[De]}for(const De of _e)o.aH(N,De.point,De.angle);return{}}function Sl(x,n,c,f,y){const b=x.add(x.sub(n)._unit()),S=jn(b.x,b.y,y).point,M=c.sub(S);return c.add(M._mult(f/M.mag()))}function Ci(x,n,c){const f=n.projectionCache;if(f.projections[x])return f.projections[x];const y=new o.P(n.lineVertexArray.getx(x),n.lineVertexArray.gety(x)),b=jn(y.x,y.y,n);if(b.signedDistanceFromCamera>0)return f.projections[x]=b.point,f.anyProjectionOccluded=f.anyProjectionOccluded||b.isOccluded,b.point;const S=x-c.direction;return Sl(c.distanceFromAnchor===0?n.tileAnchorPoint:new o.P(n.lineVertexArray.getx(S),n.lineVertexArray.gety(S)),y,c.previousVertex,c.absOffsetX-c.distanceFromAnchor+1,n)}function jn(x,n,c){const f=x+c.translation[0],y=n+c.translation[1];let b;return c.pitchWithMap?(b=dn(f,y,c.pitchedLabelPlaneMatrix,c.getElevation),b.isOccluded=!1):(b=c.transform.projectTileCoordinates(f,y,c.unwrappedTileID,c.getElevation),b.point.x=(.5*b.point.x+.5)*c.width,b.point.y=(.5*-b.point.y+.5)*c.height),b}function rA(x,n,c,f){if(c.pitchWithMap){const y=[x,n,0,1];return o.aI(y,y,f),c.transform.projectTileCoordinates(y[0]/y[3],y[1]/y[3],c.unwrappedTileID,c.getElevation).point}return{x:x/c.width*2-1,y:1-n/c.height*2}}function ll(x,n,c){return c.transform.projectTileCoordinates(x,n,c.unwrappedTileID,c.getElevation)}function cl(x,n,c){return x._unit()._perp()._mult(n*c)}function Us(x,n,c,f,y,b,S,M,N){if(M.projectionCache.offsets[x])return M.projectionCache.offsets[x];const j=c.add(n);if(x+N.direction<f||x+N.direction>=y)return M.projectionCache.offsets[x]=j,j;const q=Ci(x+N.direction,M,N),ne=cl(q.sub(c),S,N.direction),te=c.add(ne),ue=q.add(ne);return M.projectionCache.offsets[x]=o.aJ(b,j,te,ue)||j,M.projectionCache.offsets[x]}function Ro(x,n,c,f,y,b,S,M,N){const j=f?x-n:x+n;let q=j>0?1:-1,ne=0;f&&(q*=-1,ne=Math.PI),q<0&&(ne+=Math.PI);let te,ue=q>0?b+y:b+y+1;M.projectionCache.cachedAnchorPoint?te=M.projectionCache.cachedAnchorPoint:(te=jn(M.tileAnchorPoint.x,M.tileAnchorPoint.y,M).point,M.projectionCache.cachedAnchorPoint=te);let _e,De,ze=te,Oe=te,Ge=0,lt=0;const Ze=Math.abs(j),At=[];let ft;for(;Ge+lt<=Ze;){if(ue+=q,ue<b||ue>=S)return null;Ge+=lt,Oe=ze,De=_e;const Dt={absOffsetX:Ze,direction:q,distanceFromAnchor:Ge,previousVertex:Oe};if(ze=Ci(ue,M,Dt),c===0)At.push(Oe),ft=ze.sub(Oe);else{let Lt;const Rt=ze.sub(Oe);Lt=Rt.mag()===0?cl(Ci(ue+q,M,Dt).sub(ze),c,q):cl(Rt,c,q),De||(De=Oe.add(Lt)),_e=Us(ue,Lt,ze,b,S,De,c,M,Dt),At.push(De),ft=_e.sub(De)}lt=ft.mag()}const st=ft._mult((Ze-Ge)/lt)._add(De||Oe),wt=ne+Math.atan2(ze.y-Oe.y,ze.x-Oe.x);return At.push(st),{point:st,angle:N?wt:0,path:At}}const fs=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function Ba(x,n){for(let c=0;c<x;c++){const f=n.length;n.resize(f+4),n.float32.set(fs,3*f)}}function IA(x,n,c){const f=n[0],y=n[1];return x[0]=c[0]*f+c[4]*y+c[12],x[1]=c[1]*f+c[5]*y+c[13],x[3]=c[3]*f+c[7]*y+c[15],x}const Mn=100;class Sc{constructor(n,c=new hn(n.width+200,n.height+200,25),f=new hn(n.width+200,n.height+200,25)){this.transform=n,this.grid=c,this.ignoredGrid=f,this.pitchFactor=Math.cos(n.pitch*Math.PI/180)*n.cameraToCenterDistance,this.screenRightBoundary=n.width+Mn,this.screenBottomBoundary=n.height+Mn,this.gridRightBoundary=n.width+200,this.gridBottomBoundary=n.height+200,this.perspectiveRatioCutoff=.6}placeCollisionBox(n,c,f,y,b,S,M,N,j,q,ne,te){const ue=this.projectAndGetPerspectiveRatio(n.anchorPointX+N[0],n.anchorPointY+N[1],b,q,te),_e=f*ue.perspectiveRatio;let De;if(S||M)De=this._projectCollisionBox(n,_e,y,b,S,M,N,ue,q,ne,te);else{const ft=ue.x+(ne?ne.x*_e:0),st=ue.y+(ne?ne.y*_e:0);De={allPointsOccluded:!1,box:[ft+n.x1*_e,st+n.y1*_e,ft+n.x2*_e,st+n.y2*_e]}}const[ze,Oe,Ge,lt]=De.box,Ze=S?De.allPointsOccluded:ue.isOccluded;let At=Ze;return At||(At=ue.perspectiveRatio<this.perspectiveRatioCutoff),At||(At=!this.isInsideGrid(ze,Oe,Ge,lt)),At||c!=="always"&&this.grid.hitTest(ze,Oe,Ge,lt,c,j)?{box:[ze,Oe,Ge,lt],placeable:!1,offscreen:!1,occluded:Ze}:{box:[ze,Oe,Ge,lt],placeable:!0,offscreen:this.isOffscreen(ze,Oe,Ge,lt),occluded:Ze}}placeCollisionCircles(n,c,f,y,b,S,M,N,j,q,ne,te,ue,_e){const De=[],ze=new o.P(c.anchorX,c.anchorY),Oe=this.getPerspectiveRatio(ze.x,ze.y,S,_e),Ge=(j?b*this.transform.getPitchedTextCorrection(c.anchorX,c.anchorY,S)/Oe:b*Oe)/o.aN,lt={getElevation:_e,pitchedLabelPlaneMatrix:M,lineVertexArray:f,pitchWithMap:j,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},transform:this.transform,tileAnchorPoint:ze,unwrappedTileID:S,width:this.transform.width,height:this.transform.height,translation:ue},Ze=Ec(Ge,y,c.lineOffsetX*Ge,c.lineOffsetY*Ge,!1,c,!1,lt);let At=!1,ft=!1,st=!0;if(Ze){const wt=.5*ne*Oe+te,Dt=new o.P(-100,-100),Lt=new o.P(this.screenRightBoundary,this.screenBottomBoundary),Rt=new pr,Qt=Ze.first,nr=Ze.last;let ur=[];for(let vn=Qt.path.length-1;vn>=1;vn--)ur.push(Qt.path[vn]);for(let vn=1;vn<nr.path.length;vn++)ur.push(nr.path[vn]);const rr=2.5*wt;if(j){const vn=this.projectPathToScreenSpace(ur,lt);ur=vn.some((Ai=>Ai.signedDistanceFromCamera<=0))?[]:vn.map((Ai=>Ai.point))}let Rr=[];if(ur.length>0){const vn=ur[0].clone(),Ai=ur[0].clone();for(let Oi=1;Oi<ur.length;Oi++)vn.x=Math.min(vn.x,ur[Oi].x),vn.y=Math.min(vn.y,ur[Oi].y),Ai.x=Math.max(Ai.x,ur[Oi].x),Ai.y=Math.max(Ai.y,ur[Oi].y);Rr=vn.x>=Dt.x&&Ai.x<=Lt.x&&vn.y>=Dt.y&&Ai.y<=Lt.y?[ur]:Ai.x<Dt.x||vn.x>Lt.x||Ai.y<Dt.y||vn.y>Lt.y?[]:o.aK([ur],Dt.x,Dt.y,Lt.x,Lt.y)}for(const vn of Rr){Rt.reset(vn,.25*wt);let Ai=0;Ai=Rt.length<=.5*wt?1:Math.ceil(Rt.paddedLength/rr)+1;for(let Oi=0;Oi<Ai;Oi++){const ui=Oi/Math.max(Ai-1,1),Vi=Rt.lerp(ui),Pi=Vi.x+Mn,Is=Vi.y+Mn;De.push(Pi,Is,wt,0);const Gi=Pi-wt,eo=Is-wt,Ts=Pi+wt,hi=Is+wt;if(st=st&&this.isOffscreen(Gi,eo,Ts,hi),ft=ft||this.isInsideGrid(Gi,eo,Ts,hi),n!=="always"&&this.grid.hitTestCircle(Pi,Is,wt,n,q)&&(At=!0,!N))return{circles:[],offscreen:!1,collisionDetected:At}}}}return{circles:!N&&At||!ft||Oe<this.perspectiveRatioCutoff?[]:De,offscreen:st,collisionDetected:At}}projectPathToScreenSpace(n,c){const f=(function(y,b){const S=o.N();return o.aC(S,b.pitchedLabelPlaneMatrix),y.map((M=>{const N=dn(M.x,M.y,S,b.getElevation),j=b.transform.projectTileCoordinates(N.point.x,N.point.y,b.unwrappedTileID,b.getElevation);return j.point.x=(.5*j.point.x+.5)*b.width,j.point.y=(.5*-j.point.y+.5)*b.height,j}))})(n,c);return(function(y){let b=0,S=0,M=0,N=0;for(let j=0;j<y.length;j++)y[j].isOccluded?(M=j+1,N=0):(N++,N>S&&(S=N,b=M));return y.slice(b,b+S)})(f)}queryRenderedSymbols(n){if(n.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};const c=[],f=new o.ac;for(const ne of n){const te=new o.P(ne.x+Mn,ne.y+Mn);f.extend(te),c.push(te)}const{minX:y,minY:b,maxX:S,maxY:M}=f,N=this.grid.query(y,b,S,M).concat(this.ignoredGrid.query(y,b,S,M)),j={},q={};for(const ne of N){const te=ne.key;if(j[te.bucketInstanceId]===void 0&&(j[te.bucketInstanceId]={}),j[te.bucketInstanceId][te.featureIndex])continue;const ue=[new o.P(ne.x1,ne.y1),new o.P(ne.x2,ne.y1),new o.P(ne.x2,ne.y2),new o.P(ne.x1,ne.y2)];o.aL(c,ue)&&(j[te.bucketInstanceId][te.featureIndex]=!0,q[te.bucketInstanceId]===void 0&&(q[te.bucketInstanceId]=[]),q[te.bucketInstanceId].push(te.featureIndex))}return q}insertCollisionBox(n,c,f,y,b,S){(f?this.ignoredGrid:this.grid).insert({bucketInstanceId:y,featureIndex:b,collisionGroupID:S,overlapMode:c},n[0],n[1],n[2],n[3])}insertCollisionCircles(n,c,f,y,b,S){const M=f?this.ignoredGrid:this.grid,N={bucketInstanceId:y,featureIndex:b,collisionGroupID:S,overlapMode:c};for(let j=0;j<n.length;j+=4)M.insertCircle(N,n[j],n[j+1],n[j+2])}projectAndGetPerspectiveRatio(n,c,f,y,b){if(b){let S;y?(S=[n,c,y(n,c),1],o.aI(S,S,b)):(S=[n,c,0,1],IA(S,S,b));const M=S[3];return{x:(S[0]/M+1)/2*this.transform.width+Mn,y:(-S[1]/M+1)/2*this.transform.height+Mn,perspectiveRatio:.5+this.transform.cameraToCenterDistance/M*.5,isOccluded:!1,signedDistanceFromCamera:M}}{const S=this.transform.projectTileCoordinates(n,c,f,y);return{x:(S.point.x+1)/2*this.transform.width+Mn,y:(1-S.point.y)/2*this.transform.height+Mn,perspectiveRatio:.5+this.transform.cameraToCenterDistance/S.signedDistanceFromCamera*.5,isOccluded:S.isOccluded,signedDistanceFromCamera:S.signedDistanceFromCamera}}}getPerspectiveRatio(n,c,f,y){const b=this.transform.projectTileCoordinates(n,c,f,y);return .5+this.transform.cameraToCenterDistance/b.signedDistanceFromCamera*.5}isOffscreen(n,c,f,y){return f<Mn||n>=this.screenRightBoundary||y<Mn||c>this.screenBottomBoundary}isInsideGrid(n,c,f,y){return f>=0&&n<this.gridRightBoundary&&y>=0&&c<this.gridBottomBoundary}getViewportMatrix(){const n=o.as([]);return o.O(n,n,[-100,-100,0]),n}_projectCollisionBox(n,c,f,y,b,S,M,N,j,q,ne){let te=1,ue=0,_e=0,De=1;const ze=n.anchorPointX+M[0],Oe=n.anchorPointY+M[1];if(S&&!b){const ur=this.projectAndGetPerspectiveRatio(ze+1,Oe,y,j,ne),rr=ur.x-N.x,Rr=Math.atan((ur.y-N.y)/rr)+(rr<0?Math.PI:0),vn=Math.sin(Rr),Ai=Math.cos(Rr);te=Ai,ue=vn,_e=-vn,De=Ai}else if(!S&&b){const ur=ks(this.transform);te=ur.vecEast[0],ue=ur.vecEast[1],_e=ur.vecSouth[0],De=ur.vecSouth[1]}let Ge=N.x,lt=N.y,Ze=c;b&&(Ge=ze,lt=Oe,Ze=Math.pow(2,-(this.transform.zoom-f.overscaledZ)),Ze*=this.transform.getPitchedTextCorrection(ze,Oe,y),q||(Ze*=o.ao(.5+N.signedDistanceFromCamera/this.transform.cameraToCenterDistance*.5,0,4))),q&&(Ge+=te*q.x*Ze+_e*q.y*Ze,lt+=ue*q.x*Ze+De*q.y*Ze);const At=n.x1*Ze,ft=n.x2*Ze,st=(At+ft)/2,wt=n.y1*Ze,Dt=n.y2*Ze,Lt=(wt+Dt)/2,Rt=[{offsetX:At,offsetY:wt},{offsetX:st,offsetY:wt},{offsetX:ft,offsetY:wt},{offsetX:ft,offsetY:Lt},{offsetX:ft,offsetY:Dt},{offsetX:st,offsetY:Dt},{offsetX:At,offsetY:Dt},{offsetX:At,offsetY:Lt}];let Qt=[];for(const{offsetX:ur,offsetY:rr}of Rt)Qt.push(new o.P(Ge+te*ur+_e*rr,lt+ue*ur+De*rr));let nr=!1;if(b){const ur=Qt.map((rr=>this.projectAndGetPerspectiveRatio(rr.x,rr.y,y,j,ne)));nr=ur.some((rr=>!rr.isOccluded)),Qt=ur.map((rr=>new o.P(rr.x,rr.y)))}else nr=!0;return{box:o.aM(Qt),allPointsOccluded:!nr}}}class No{constructor(n,c,f,y){this.opacity=n?Math.max(0,Math.min(1,n.opacity+(n.placed?c:-c))):y&&f?1:0,this.placed=f}isHidden(){return this.opacity===0&&!this.placed}}class Qo{constructor(n,c,f,y,b){this.text=new No(n?n.text:null,c,f,b),this.icon=new No(n?n.icon:null,c,y,b)}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class Fc{constructor(n,c,f){this.text=n,this.icon=c,this.skipFade=f}}class la{constructor(n,c,f,y,b){this.bucketInstanceId=n,this.featureIndex=c,this.sourceLayerIndex=f,this.bucketIndex=y,this.tileID=b}}class ys{constructor(n){this.crossSourceCollisions=n,this.maxGroupID=0,this.collisionGroups={}}get(n){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[n]){const c=++this.maxGroupID;this.collisionGroups[n]={ID:c,predicate:f=>f.collisionGroupID===c}}return this.collisionGroups[n]}}function Oo(x,n,c,f,y){const{horizontalAlign:b,verticalAlign:S}=o.aT(x);return new o.P(-(b-.5)*n+f[0]*y,-(S-.5)*c+f[1]*y)}class nA{constructor(n,c,f,y,b){this.transform=n.clone(),this.terrain=c,this.collisionIndex=new Sc(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=f,this.retainedQueryData={},this.collisionGroups=new ys(y),this.collisionCircleArrays={},this.collisionBoxArrays=new Map,this.prevPlacement=b,b&&(b.prevPlacement=void 0),this.placedOrientations={}}_getTerrainElevationFunc(n){const c=this.terrain;return c?(f,y)=>c.getElevation(n,f,y):null}getBucketParts(n,c,f,y){const b=f.getBucket(c),S=f.latestFeatureIndex;if(!b||!S||c.id!==b.layerIds[0])return;const M=f.collisionBoxArray,N=b.layers[0].layout,j=b.layers[0].paint,q=Math.pow(2,this.transform.zoom-f.tileID.overscaledZ),ne=f.tileSize/o.a5,te=f.tileID.toUnwrapped(),ue=N.get("text-rotation-alignment")==="map",_e=o.aO(f,1,this.transform.zoom),De=o.aP(this.collisionIndex.transform,f,j.get("text-translate"),j.get("text-translate-anchor")),ze=o.aP(this.collisionIndex.transform,f,j.get("icon-translate"),j.get("icon-translate-anchor")),Oe=Di(ue,this.transform,_e);this.retainedQueryData[b.bucketInstanceId]=new la(b.bucketInstanceId,S,b.sourceLayerIndex,b.index,f.tileID);const Ge={bucket:b,layout:N,translationText:De,translationIcon:ze,unwrappedTileID:te,pitchedLabelPlaneMatrix:Oe,scale:q,textPixelRatio:ne,holdingForFade:f.holdingForSymbolFade(),collisionBoxArray:M,partiallyEvaluatedTextSize:o.az(b.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(b.sourceID)};if(y)for(const lt of b.sortKeyRanges){const{sortKey:Ze,symbolInstanceStart:At,symbolInstanceEnd:ft}=lt;n.push({sortKey:Ze,symbolInstanceStart:At,symbolInstanceEnd:ft,parameters:Ge})}else n.push({symbolInstanceStart:0,symbolInstanceEnd:b.symbolInstances.length,parameters:Ge})}attemptAnchorPlacement(n,c,f,y,b,S,M,N,j,q,ne,te,ue,_e,De,ze,Oe,Ge,lt,Ze){const At=o.aQ[n.textAnchor],ft=[n.textOffset0,n.textOffset1],st=Oo(At,f,y,ft,b),wt=this.collisionIndex.placeCollisionBox(c,te,N,j,q,M,S,ze,ne.predicate,lt,st,Ze);if((!Ge||this.collisionIndex.placeCollisionBox(Ge,te,N,j,q,M,S,Oe,ne.predicate,lt,st,Ze).placeable)&&wt.placeable){let Dt;if(this.prevPlacement&&this.prevPlacement.variableOffsets[ue.crossTileID]&&this.prevPlacement.placements[ue.crossTileID]&&this.prevPlacement.placements[ue.crossTileID].text&&(Dt=this.prevPlacement.variableOffsets[ue.crossTileID].anchor),ue.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");return this.variableOffsets[ue.crossTileID]={textOffset:ft,width:f,height:y,anchor:At,textBoxScale:b,prevAnchor:Dt},this.markUsedJustification(_e,At,ue,De),_e.allowVerticalPlacement&&(this.markUsedOrientation(_e,De,ue),this.placedOrientations[ue.crossTileID]=De),{shift:st,placedGlyphBoxes:wt}}}placeLayerBucketPart(n,c,f){const{bucket:y,layout:b,translationText:S,translationIcon:M,unwrappedTileID:N,pitchedLabelPlaneMatrix:j,textPixelRatio:q,holdingForFade:ne,collisionBoxArray:te,partiallyEvaluatedTextSize:ue,collisionGroup:_e}=n.parameters,De=b.get("text-optional"),ze=b.get("icon-optional"),Oe=o.aR(b,"text-overlap","text-allow-overlap"),Ge=Oe==="always",lt=o.aR(b,"icon-overlap","icon-allow-overlap"),Ze=lt==="always",At=b.get("text-rotation-alignment")==="map",ft=b.get("text-pitch-alignment")==="map",st=b.get("icon-text-fit")!=="none",wt=b.get("symbol-z-order")==="viewport-y",Dt=Ge&&(Ze||!y.hasIconData()||ze),Lt=Ze&&(Ge||!y.hasTextData()||De);!y.collisionArrays&&te&&y.deserializeCollisionBoxes(te);const Rt=this.retainedQueryData[y.bucketInstanceId].tileID,Qt=this._getTerrainElevationFunc(Rt),nr=this.transform.getFastPathSimpleProjectionMatrix(Rt),ur=(rr,Rr,vn)=>{var Ai,Oi;if(c[rr.crossTileID])return;if(ne)return void(this.placements[rr.crossTileID]=new Fc(!1,!1,!1));let ui=!1,Vi=!1,Pi=!0,Is=null,Gi={box:null,placeable:!1,offscreen:null,occluded:!1},eo={placeable:!1},Ts=null,hi=null,Ao=null,yo=0,fc=0,mA=0;Rr.textFeatureIndex?yo=Rr.textFeatureIndex:rr.useRuntimeCollisionCircles&&(yo=rr.featureIndex),Rr.verticalTextFeatureIndex&&(fc=Rr.verticalTextFeatureIndex);const GA=Rr.textBox;if(GA){const to=Os=>{let ro=o.aA.horizontal;if(y.allowVerticalPlacement&&!Os&&this.prevPlacement){const Ka=this.prevPlacement.placedOrientations[rr.crossTileID];Ka&&(this.placedOrientations[rr.crossTileID]=Ka,ro=Ka,this.markUsedOrientation(y,ro,rr))}return ro},Zo=(Os,ro)=>{if(y.allowVerticalPlacement&&rr.numVerticalGlyphVertices>0&&Rr.verticalTextBox){for(const Ka of y.writingModes)if(Ka===o.aA.vertical?(Gi=ro(),eo=Gi):Gi=Os(),Gi&&Gi.placeable)break}else Gi=Os()},vo=rr.textAnchorOffsetStartIndex,vl=rr.textAnchorOffsetEndIndex;if(vl===vo){const Os=(ro,Ka)=>{const cs=this.collisionIndex.placeCollisionBox(ro,Oe,q,Rt,N,ft,At,S,_e.predicate,Qt,void 0,nr);return cs&&cs.placeable&&(this.markUsedOrientation(y,Ka,rr),this.placedOrientations[rr.crossTileID]=Ka),cs};Zo((()=>Os(GA,o.aA.horizontal)),(()=>{const ro=Rr.verticalTextBox;return y.allowVerticalPlacement&&rr.numVerticalGlyphVertices>0&&ro?Os(ro,o.aA.vertical):{box:null,offscreen:null}})),to(Gi&&Gi.placeable)}else{let Os=o.aQ[(Oi=(Ai=this.prevPlacement)===null||Ai===void 0?void 0:Ai.variableOffsets[rr.crossTileID])===null||Oi===void 0?void 0:Oi.anchor];const ro=(cs,qa,Xo)=>{const Vh=cs.x2-cs.x1,Sd=cs.y2-cs.y1,KA=rr.textBoxScale,qA=st&&lt==="never"?qa:null;let gA=null,Gh=Oe==="never"?1:2,uh="never";Os&&Gh++;for(let hh=0;hh<Gh;hh++){for(let pu=vo;pu<vl;pu++){const Kh=y.textAnchorOffsets.get(pu);if(Os&&Kh.textAnchor!==Os)continue;const dh=this.attemptAnchorPlacement(Kh,cs,Vh,Sd,KA,At,ft,q,Rt,N,_e,uh,rr,y,Xo,S,M,qA,Qt);if(dh&&(gA=dh.placedGlyphBoxes,gA&&gA.placeable))return ui=!0,Is=dh.shift,gA}Os?Os=null:uh=Oe}return f&&!gA&&(gA={box:this.collisionIndex.placeCollisionBox(GA,"always",q,Rt,N,ft,At,S,_e.predicate,Qt,void 0,nr).box,offscreen:!1,placeable:!1,occluded:!1}),gA};Zo((()=>ro(GA,Rr.iconBox,o.aA.horizontal)),(()=>{const cs=Rr.verticalTextBox;return y.allowVerticalPlacement&&(!Gi||!Gi.placeable)&&rr.numVerticalGlyphVertices>0&&cs?ro(cs,Rr.verticalIconBox,o.aA.vertical):{box:null,occluded:!0,offscreen:null}})),Gi&&(ui=Gi.placeable,Pi=Gi.offscreen);const Ka=to(Gi&&Gi.placeable);if(!ui&&this.prevPlacement){const cs=this.prevPlacement.variableOffsets[rr.crossTileID];cs&&(this.variableOffsets[rr.crossTileID]=cs,this.markUsedJustification(y,cs.anchor,rr,Ka))}}}if(Ts=Gi,ui=Ts&&Ts.placeable,Pi=Ts&&Ts.offscreen,rr.useRuntimeCollisionCircles&&rr.centerJustifiedTextSymbolIndex>=0){const to=y.text.placedSymbolArray.get(rr.centerJustifiedTextSymbolIndex),Zo=o.aB(y.textSizeData,ue,to),vo=b.get("text-padding");hi=this.collisionIndex.placeCollisionCircles(Oe,to,y.lineVertexArray,y.glyphOffsetArray,Zo,N,j,f,ft,_e.predicate,rr.collisionCircleDiameter,vo,S,Qt),hi.circles.length&&hi.collisionDetected&&!f&&o.w("Collisions detected, but collision boxes are not shown"),ui=Ge||hi.circles.length>0&&!hi.collisionDetected,Pi=Pi&&hi.offscreen}if(Rr.iconFeatureIndex&&(mA=Rr.iconFeatureIndex),Rr.iconBox){const to=Zo=>this.collisionIndex.placeCollisionBox(Zo,lt,q,Rt,N,ft,At,M,_e.predicate,Qt,st&&Is?Is:void 0,nr);eo&&eo.placeable&&Rr.verticalIconBox?(Ao=to(Rr.verticalIconBox),Vi=Ao.placeable):(Ao=to(Rr.iconBox),Vi=Ao.placeable),Pi=Pi&&Ao.offscreen}const zu=De||rr.numHorizontalGlyphVertices===0&&rr.numVerticalGlyphVertices===0,pc=ze||rr.numIconVertices===0;zu||pc?pc?zu||(Vi=Vi&&ui):ui=Vi&&ui:Vi=ui=Vi&&ui;const Gl=Vi&&Ao.placeable;if(ui&&Ts.placeable&&this.collisionIndex.insertCollisionBox(Ts.box,Oe,b.get("text-ignore-placement"),y.bucketInstanceId,eo&&eo.placeable&&fc?fc:yo,_e.ID),Gl&&this.collisionIndex.insertCollisionBox(Ao.box,lt,b.get("icon-ignore-placement"),y.bucketInstanceId,mA,_e.ID),hi&&ui&&this.collisionIndex.insertCollisionCircles(hi.circles,Oe,b.get("text-ignore-placement"),y.bucketInstanceId,yo,_e.ID),f&&this.storeCollisionData(y.bucketInstanceId,vn,Rr,Ts,Ao,hi),rr.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");if(y.bucketInstanceId===0)throw new Error("bucket.bucketInstanceId can't be 0");this.placements[rr.crossTileID]=new Fc((ui||Dt)&&!Ts?.occluded,(Vi||Lt)&&!Ao?.occluded,Pi||y.justReloaded),c[rr.crossTileID]=!0};if(wt){if(n.symbolInstanceStart!==0)throw new Error("bucket.bucketInstanceId should be 0");const rr=y.getSortedSymbolIndexes(-this.transform.bearingInRadians);for(let Rr=rr.length-1;Rr>=0;--Rr){const vn=rr[Rr];ur(y.symbolInstances.get(vn),y.collisionArrays[vn],vn)}}else for(let rr=n.symbolInstanceStart;rr<n.symbolInstanceEnd;rr++)ur(y.symbolInstances.get(rr),y.collisionArrays[rr],rr);y.justReloaded=!1}storeCollisionData(n,c,f,y,b,S){if(f.textBox||f.iconBox){let M,N;this.collisionBoxArrays.has(n)?M=this.collisionBoxArrays.get(n):(M=new Map,this.collisionBoxArrays.set(n,M)),M.has(c)?N=M.get(c):(N={text:null,icon:null},M.set(c,N)),f.textBox&&(N.text=y.box),f.iconBox&&(N.icon=b.box)}if(S){let M=this.collisionCircleArrays[n];M===void 0&&(M=this.collisionCircleArrays[n]=[]);for(let N=0;N<S.circles.length;N+=4)M.push(S.circles[N+0]-Mn),M.push(S.circles[N+1]-Mn),M.push(S.circles[N+2]),M.push(S.collisionDetected?1:0)}}markUsedJustification(n,c,f,y){let b;b=y===o.aA.vertical?f.verticalPlacedTextSymbolIndex:{left:f.leftJustifiedTextSymbolIndex,center:f.centerJustifiedTextSymbolIndex,right:f.rightJustifiedTextSymbolIndex}[o.aS(c)];const S=[f.leftJustifiedTextSymbolIndex,f.centerJustifiedTextSymbolIndex,f.rightJustifiedTextSymbolIndex,f.verticalPlacedTextSymbolIndex];for(const M of S)M>=0&&(n.text.placedSymbolArray.get(M).crossTileID=b>=0&&M!==b?0:f.crossTileID)}markUsedOrientation(n,c,f){const y=c===o.aA.horizontal||c===o.aA.horizontalOnly?c:0,b=c===o.aA.vertical?c:0,S=[f.leftJustifiedTextSymbolIndex,f.centerJustifiedTextSymbolIndex,f.rightJustifiedTextSymbolIndex];for(const M of S)n.text.placedSymbolArray.get(M).placedOrientation=y;f.verticalPlacedTextSymbolIndex&&(n.text.placedSymbolArray.get(f.verticalPlacedTextSymbolIndex).placedOrientation=b)}commit(n){this.commitTime=n,this.zoomAtLastRecencyCheck=this.transform.zoom;const c=this.prevPlacement;let f=!1;this.prevZoomAdjustment=c?c.zoomAdjustment(this.transform.zoom):0;const y=c?c.symbolFadeChange(n):1,b=c?c.opacities:{},S=c?c.variableOffsets:{},M=c?c.placedOrientations:{};for(const N in this.placements){const j=this.placements[N],q=b[N];q?(this.opacities[N]=new Qo(q,y,j.text,j.icon),f=f||j.text!==q.text.placed||j.icon!==q.icon.placed):(this.opacities[N]=new Qo(null,y,j.text,j.icon,j.skipFade),f=f||j.text||j.icon)}for(const N in b){const j=b[N];if(!this.opacities[N]){const q=new Qo(j,y,!1,!1);q.isHidden()||(this.opacities[N]=q,f=f||j.text.placed||j.icon.placed)}}for(const N in S)this.variableOffsets[N]||!this.opacities[N]||this.opacities[N].isHidden()||(this.variableOffsets[N]=S[N]);for(const N in M)this.placedOrientations[N]||!this.opacities[N]||this.opacities[N].isHidden()||(this.placedOrientations[N]=M[N]);if(c&&c.lastPlacementChangeTime===void 0)throw new Error("Last placement time for previous placement is not defined");f?this.lastPlacementChangeTime=n:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=c?c.lastPlacementChangeTime:n)}updateLayerOpacities(n,c){const f={};for(const y of c){const b=y.getBucket(n);b&&y.latestFeatureIndex&&n.id===b.layerIds[0]&&this.updateBucketOpacities(b,y.tileID,f,y.collisionBoxArray)}}updateBucketOpacities(n,c,f,y){n.hasTextData()&&(n.text.opacityVertexArray.clear(),n.text.hasVisibleVertices=!1),n.hasIconData()&&(n.icon.opacityVertexArray.clear(),n.icon.hasVisibleVertices=!1),n.hasIconCollisionBoxData()&&n.iconCollisionBox.collisionVertexArray.clear(),n.hasTextCollisionBoxData()&&n.textCollisionBox.collisionVertexArray.clear();const b=n.layers[0],S=b.layout,M=new Qo(null,0,!1,!1,!0),N=S.get("text-allow-overlap"),j=S.get("icon-allow-overlap"),q=b._unevaluatedLayout.hasValue("text-variable-anchor")||b._unevaluatedLayout.hasValue("text-variable-anchor-offset"),ne=S.get("text-rotation-alignment")==="map",te=S.get("text-pitch-alignment")==="map",ue=S.get("icon-text-fit")!=="none",_e=new Qo(null,0,N&&(j||!n.hasIconData()||S.get("icon-optional")),j&&(N||!n.hasTextData()||S.get("text-optional")),!0);!n.collisionArrays&&y&&(n.hasIconCollisionBoxData()||n.hasTextCollisionBoxData())&&n.deserializeCollisionBoxes(y);const De=(Oe,Ge,lt)=>{for(let Ze=0;Ze<Ge/4;Ze++)Oe.opacityVertexArray.emplaceBack(lt);Oe.hasVisibleVertices=Oe.hasVisibleVertices||lt!==Ic},ze=this.collisionBoxArrays.get(n.bucketInstanceId);for(let Oe=0;Oe<n.symbolInstances.length;Oe++){const Ge=n.symbolInstances.get(Oe),{numHorizontalGlyphVertices:lt,numVerticalGlyphVertices:Ze,crossTileID:At}=Ge;let ft=this.opacities[At];f[At]?ft=M:ft||(ft=_e,this.opacities[At]=ft),f[At]=!0;const st=Ge.numIconVertices>0,wt=this.placedOrientations[Ge.crossTileID],Dt=wt===o.aA.vertical,Lt=wt===o.aA.horizontal||wt===o.aA.horizontalOnly;if(lt>0||Ze>0){const Qt=PA(ft.text);De(n.text,lt,Dt?Ic:Qt),De(n.text,Ze,Lt?Ic:Qt);const nr=ft.text.isHidden();[Ge.rightJustifiedTextSymbolIndex,Ge.centerJustifiedTextSymbolIndex,Ge.leftJustifiedTextSymbolIndex].forEach((Rr=>{Rr>=0&&(n.text.placedSymbolArray.get(Rr).hidden=nr||Dt?1:0)})),Ge.verticalPlacedTextSymbolIndex>=0&&(n.text.placedSymbolArray.get(Ge.verticalPlacedTextSymbolIndex).hidden=nr||Lt?1:0);const ur=this.variableOffsets[Ge.crossTileID];ur&&this.markUsedJustification(n,ur.anchor,Ge,wt);const rr=this.placedOrientations[Ge.crossTileID];rr&&(this.markUsedJustification(n,"left",Ge,rr),this.markUsedOrientation(n,rr,Ge))}if(st){const Qt=PA(ft.icon),nr=!(ue&&Ge.verticalPlacedIconSymbolIndex&&Dt);Ge.placedIconSymbolIndex>=0&&(De(n.icon,Ge.numIconVertices,nr?Qt:Ic),n.icon.placedSymbolArray.get(Ge.placedIconSymbolIndex).hidden=ft.icon.isHidden()),Ge.verticalPlacedIconSymbolIndex>=0&&(De(n.icon,Ge.numVerticalIconVertices,nr?Ic:Qt),n.icon.placedSymbolArray.get(Ge.verticalPlacedIconSymbolIndex).hidden=ft.icon.isHidden())}const Rt=ze&&ze.has(Oe)?ze.get(Oe):{text:null,icon:null};if(n.hasIconCollisionBoxData()||n.hasTextCollisionBoxData()){const Qt=n.collisionArrays[Oe];if(Qt){let nr=new o.P(0,0);if(Qt.textBox||Qt.verticalTextBox){let ur=!0;if(q){const rr=this.variableOffsets[At];rr?(nr=Oo(rr.anchor,rr.width,rr.height,rr.textOffset,rr.textBoxScale),ne&&nr._rotate(te?-this.transform.bearingInRadians:this.transform.bearingInRadians)):ur=!1}if(Qt.textBox||Qt.verticalTextBox){let rr;Qt.textBox&&(rr=Dt),Qt.verticalTextBox&&(rr=Lt),iA(n.textCollisionBox.collisionVertexArray,ft.text.placed,!ur||rr,Rt.text,nr.x,nr.y)}}if(Qt.iconBox||Qt.verticalIconBox){const ur=!!(!Lt&&Qt.verticalIconBox);let rr;Qt.iconBox&&(rr=ur),Qt.verticalIconBox&&(rr=!ur),iA(n.iconCollisionBox.collisionVertexArray,ft.icon.placed,rr,Rt.icon,ue?nr.x:0,ue?nr.y:0)}}}}if(n.sortFeatures(-this.transform.bearingInRadians),this.retainedQueryData[n.bucketInstanceId]&&(this.retainedQueryData[n.bucketInstanceId].featureSortOrder=n.featureSortOrder),n.hasTextData()&&n.text.opacityVertexBuffer&&n.text.opacityVertexBuffer.updateData(n.text.opacityVertexArray),n.hasIconData()&&n.icon.opacityVertexBuffer&&n.icon.opacityVertexBuffer.updateData(n.icon.opacityVertexArray),n.hasIconCollisionBoxData()&&n.iconCollisionBox.collisionVertexBuffer&&n.iconCollisionBox.collisionVertexBuffer.updateData(n.iconCollisionBox.collisionVertexArray),n.hasTextCollisionBoxData()&&n.textCollisionBox.collisionVertexBuffer&&n.textCollisionBox.collisionVertexBuffer.updateData(n.textCollisionBox.collisionVertexArray),n.text.opacityVertexArray.length!==n.text.layoutVertexArray.length/4)throw new Error(`bucket.text.opacityVertexArray.length (= ${n.text.opacityVertexArray.length}) !== bucket.text.layoutVertexArray.length (= ${n.text.layoutVertexArray.length}) / 4`);if(n.icon.opacityVertexArray.length!==n.icon.layoutVertexArray.length/4)throw new Error(`bucket.icon.opacityVertexArray.length (= ${n.icon.opacityVertexArray.length}) !== bucket.icon.layoutVertexArray.length (= ${n.icon.layoutVertexArray.length}) / 4`);n.bucketInstanceId in this.collisionCircleArrays&&(n.collisionCircleArray=this.collisionCircleArrays[n.bucketInstanceId],delete this.collisionCircleArrays[n.bucketInstanceId])}symbolFadeChange(n){return this.fadeDuration===0?1:(n-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(n){return Math.max(0,(this.transform.zoom-n)/1.5)}hasTransitions(n){return this.stale||n-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(n,c){const f=this.zoomAtLastRecencyCheck===c?1-this.zoomAdjustment(c):1;return this.zoomAtLastRecencyCheck=c,this.commitTime+this.fadeDuration*f>n}setStale(){this.stale=!0}}function iA(x,n,c,f,y,b){f&&f.length!==0||(f=[0,0,0,0]);const S=f[0]-Mn,M=f[1]-Mn,N=f[2]-Mn,j=f[3]-Mn;x.emplaceBack(n?1:0,c?1:0,y||0,b||0,S,M),x.emplaceBack(n?1:0,c?1:0,y||0,b||0,N,M),x.emplaceBack(n?1:0,c?1:0,y||0,b||0,N,j),x.emplaceBack(n?1:0,c?1:0,y||0,b||0,S,j)}const rc=Math.pow(2,25),Ca=Math.pow(2,24),TA=Math.pow(2,17),Kn=Math.pow(2,16),Fl=Math.pow(2,9),nc=Math.pow(2,8),Il=Math.pow(2,1);function PA(x){if(x.opacity===0&&!x.placed)return 0;if(x.opacity===1&&x.placed)return 4294967295;const n=x.placed?1:0,c=Math.floor(127*x.opacity);return c*rc+n*Ca+c*TA+n*Kn+c*Fl+n*nc+c*Il+n}const Ic=0;class ca{constructor(n){this._sortAcrossTiles=n.layout.get("symbol-z-order")!=="viewport-y"&&!n.layout.get("symbol-sort-key").isConstant(),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(n,c,f,y,b){const S=this._bucketParts;for(;this._currentTileIndex<n.length;)if(c.getBucketParts(S,y,n[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,b())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,S.sort(((M,N)=>M.sortKey-N.sortKey)));this._currentPartIndex<S.length;)if(c.placeLayerBucketPart(S[this._currentPartIndex],this._seenCrossTileIDs,f),this._currentPartIndex++,b())return!0;return!1}}class Al{constructor(n,c,f,y,b,S,M,N){this.placement=new nA(n,c,S,M,N),this._currentPlacementIndex=f.length-1,this._forceFullPlacement=y,this._showCollisionBoxes=b,this._done=!1}isDone(){return this._done}continuePlacement(n,c,f){const y=z(),b=()=>!this._forceFullPlacement&&z()-y>2;for(;this._currentPlacementIndex>=0;){const S=c[n[this._currentPlacementIndex]],M=this.placement.collisionIndex.transform.zoom;if(S.type==="symbol"&&(!S.minzoom||S.minzoom<=M)&&(!S.maxzoom||S.maxzoom>M)){if(this._inProgressLayer||(this._inProgressLayer=new ca(S)),this._inProgressLayer.continuePlacement(f[S.source],this.placement,this._showCollisionBoxes,S,b))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(n){return this.placement.commit(n),this.placement}}const an=512/o.a5/2;class Ea{constructor(n,c,f){this.tileID=n,this.bucketInstanceId=f,this._symbolsByKey={};const y=new Map;for(let b=0;b<c.length;b++){const S=c.get(b),M=S.key,N=y.get(M);N?N.push(S):y.set(M,[S])}for(const[b,S]of y){const M={positions:S.map((N=>({x:Math.floor(N.anchorX*an),y:Math.floor(N.anchorY*an)}))),crossTileIDs:S.map((N=>N.crossTileID))};if(M.positions.length>128){const N=new o.aU(M.positions.length,16,Uint16Array);for(const{x:j,y:q}of M.positions)N.add(j,q);N.finish(),delete M.positions,M.index=N}this._symbolsByKey[b]=M}}getScaledCoordinates(n,c){const{x:f,y,z:b}=this.tileID.canonical,{x:S,y:M,z:N}=c.canonical,j=an/Math.pow(2,N-b),q=(M*o.a5+n.anchorY)*j,ne=y*o.a5*an;return{x:Math.floor((S*o.a5+n.anchorX)*j-f*o.a5*an),y:Math.floor(q-ne)}}findMatches(n,c,f){const y=this.tileID.canonical.z<c.canonical.z?1:Math.pow(2,this.tileID.canonical.z-c.canonical.z);for(let b=0;b<n.length;b++){const S=n.get(b);if(S.crossTileID)continue;const M=this._symbolsByKey[S.key];if(!M)continue;const N=this.getScaledCoordinates(S,c);if(M.index){const j=M.index.range(N.x-y,N.y-y,N.x+y,N.y+y).sort();for(const q of j){const ne=M.crossTileIDs[q];if(!f[ne]){f[ne]=!0,S.crossTileID=ne;break}}}else if(M.positions)for(let j=0;j<M.positions.length;j++){const q=M.positions[j],ne=M.crossTileIDs[j];if(Math.abs(q.x-N.x)<=y&&Math.abs(q.y-N.y)<=y&&!f[ne]){f[ne]=!0,S.crossTileID=ne;break}}}}getCrossTileIDsLists(){return Object.values(this._symbolsByKey).map((({crossTileIDs:n})=>n))}}class zo{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class Ho{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(n){const c=Math.round((n-this.lng)/360);if(c!==0)for(const f in this.indexes){const y=this.indexes[f],b={};for(const S in y){const M=y[S];M.tileID=M.tileID.unwrapTo(M.tileID.wrap+c),b[M.tileID.key]=M}this.indexes[f]=b}this.lng=n}addBucket(n,c,f){if(this.indexes[n.overscaledZ]&&this.indexes[n.overscaledZ][n.key]){if(this.indexes[n.overscaledZ][n.key].bucketInstanceId===c.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(n.overscaledZ,this.indexes[n.overscaledZ][n.key])}for(let b=0;b<c.symbolInstances.length;b++)c.symbolInstances.get(b).crossTileID=0;this.usedCrossTileIDs[n.overscaledZ]||(this.usedCrossTileIDs[n.overscaledZ]={});const y=this.usedCrossTileIDs[n.overscaledZ];for(const b in this.indexes){const S=this.indexes[b];if(Number(b)>n.overscaledZ)for(const M in S){const N=S[M];N.tileID.isChildOf(n)&&N.findMatches(c.symbolInstances,n,y)}else{const M=S[n.scaledTo(Number(b)).key];M&&M.findMatches(c.symbolInstances,n,y)}}for(let b=0;b<c.symbolInstances.length;b++){const S=c.symbolInstances.get(b);S.crossTileID||(S.crossTileID=f.generate(),y[S.crossTileID]=!0)}return this.indexes[n.overscaledZ]===void 0&&(this.indexes[n.overscaledZ]={}),this.indexes[n.overscaledZ][n.key]=new Ea(n,c.symbolInstances,c.bucketInstanceId),!0}removeBucketCrossTileIDs(n,c){for(const f of c.getCrossTileIDsLists())for(const y of f)delete this.usedCrossTileIDs[n][y]}removeStaleBuckets(n){let c=!1;for(const f in this.indexes){const y=this.indexes[f];for(const b in y)n[y[b].bucketInstanceId]||(this.removeBucketCrossTileIDs(f,y[b]),delete y[b],c=!0)}return c}}class vs{constructor(){this.layerIndexes={},this.crossTileIDs=new zo,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(n,c,f){let y=this.layerIndexes[n.id];y===void 0&&(y=this.layerIndexes[n.id]=new Ho);let b=!1;const S={};y.handleWrapJump(f);for(const M of c){const N=M.getBucket(n);N&&n.id===N.layerIds[0]&&(N.bucketInstanceId||(N.bucketInstanceId=++this.maxBucketInstanceId),y.addBucket(M.tileID,N,this.crossTileIDs)&&(b=!0),S[N.bucketInstanceId]=!0)}return y.removeStaleBuckets(S)&&(b=!0),b}pruneUnusedLayers(n){const c={};n.forEach((f=>{c[f]=!0}));for(const f in this.layerIndexes)c[f]||delete this.layerIndexes[f]}}var Wr="void main() {fragColor=vec4(1.0);}";const Jn={prelude:cn(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
out highp vec4 fragColor;`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}mat3 rotationMatrixFromAxisAngle(vec3 u,float angle) {float c=cos(angle);float s=sin(angle);float c2=1.0-c;return mat3(u.x*u.x*c2+      c,u.x*u.y*c2-u.z*s,u.x*u.z*c2+u.y*s,u.y*u.x*c2+u.z*s,u.y*u.y*c2+    c,u.y*u.z*c2-u.x*s,u.z*u.x*c2-u.y*s,u.z*u.y*c2+u.x*s,u.z*u.z*c2+    c
);}
#ifdef TERRAIN3D
uniform sampler2D u_terrain;uniform float u_terrain_dim;uniform mat4 u_terrain_matrix;uniform vec4 u_terrain_unpack;uniform float u_terrain_exaggeration;uniform highp sampler2D u_depth;
#endif
const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitShifts=vec4(1.)/bitSh;highp float unpack(highp vec4 color) {return dot(color,bitShifts);}highp float depthOpacity(vec3 frag) {
#ifdef TERRAIN3D
highp float d=unpack(texture(u_depth,frag.xy*0.5+0.5))+0.0001-frag.z;return 1.0-max(0.0,min(1.0,-d*500.0));
#else
return 1.0;
#endif
}float calculate_visibility(vec4 pos) {
#ifdef TERRAIN3D
vec3 frag=pos.xyz/pos.w;highp float d=depthOpacity(frag);if (d > 0.95) return 1.0;return (d+depthOpacity(frag+vec3(0.0,0.01,0.0)))/2.0;
#else
return 1.0;
#endif
}float ele(vec2 pos) {
#ifdef TERRAIN3D
vec4 rgb=(texture(u_terrain,pos)*255.0)*u_terrain_unpack;return rgb.r+rgb.g+rgb.b-u_terrain_unpack.a;
#else
return 0.0;
#endif
}float get_elevation(vec2 pos) {
#ifdef TERRAIN3D
#ifdef GLOBE
if ((pos.y <-32767.5) || (pos.y > 32766.5)) {return 0.0;}
#endif
vec2 coord=(u_terrain_matrix*vec4(pos,0.0,1.0)).xy*u_terrain_dim+1.0;vec2 f=fract(coord);vec2 c=(floor(coord)+0.5)/(u_terrain_dim+2.0);float d=1.0/(u_terrain_dim+2.0);float tl=ele(c);float tr=ele(c+vec2(d,0.0));float bl=ele(c+vec2(0.0,d));float br=ele(c+vec2(d,d));float elevation=mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);return elevation*u_terrain_exaggeration;
#else
return 0.0;
#endif
}const float PI=3.141592653589793;uniform mat4 u_projection_matrix;`),projectionMercator:cn("","float projectLineThickness(float tileY) {return 1.0;}float projectCircleRadius(float tileY) {return 1.0;}vec4 projectTile(vec2 p) {vec4 result=u_projection_matrix*vec4(p,0.0,1.0);return result;}vec4 projectTile(vec2 p,vec2 rawPos) {vec4 result=u_projection_matrix*vec4(p,0.0,1.0);if (rawPos.y <-32767.5 || rawPos.y > 32766.5) {result.z=-10000000.0;}return result;}vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_projection_matrix*vec4(posInTile,elevation,1.0);}vec4 projectTileFor3D(vec2 posInTile,float elevation) {return projectTileWithElevation(posInTile,elevation);}"),projectionGlobe:cn("",`#define GLOBE_RADIUS 6371008.8
uniform highp vec4 u_projection_tile_mercator_coords;uniform highp vec4 u_projection_clipping_plane;uniform highp float u_projection_transition;uniform mat4 u_projection_fallback_matrix;vec3 globeRotateVector(vec3 vec,vec2 angles) {vec3 axisRight=vec3(vec.z,0.0,-vec.x);vec3 axisUp=cross(axisRight,vec);axisRight=normalize(axisRight);axisUp=normalize(axisUp);vec2 t=tan(angles);return normalize(vec+axisRight*t.x+axisUp*t.y);}mat3 globeGetRotationMatrix(vec3 spherePos) {vec3 axisRight=vec3(spherePos.z,0.0,-spherePos.x);vec3 axisDown=cross(axisRight,spherePos);axisRight=normalize(axisRight);axisDown=normalize(axisDown);return mat3(axisRight,axisDown,spherePos
);}float circumferenceRatioAtTileY(float tileY) {float mercator_pos_y=u_projection_tile_mercator_coords.y+u_projection_tile_mercator_coords.w*tileY;float spherical_y=2.0*atan(exp(PI-(mercator_pos_y*PI*2.0)))-PI*0.5;return cos(spherical_y);}float projectLineThickness(float tileY) {float thickness=1.0/circumferenceRatioAtTileY(tileY); 
if (u_projection_transition < 0.999) {return mix(1.0,thickness,u_projection_transition);} else {return thickness;}}vec3 projectToSphere(vec2 translatedPos,vec2 rawPos) {vec2 mercator_pos=u_projection_tile_mercator_coords.xy+u_projection_tile_mercator_coords.zw*translatedPos;vec2 spherical;spherical.x=mercator_pos.x*PI*2.0+PI;spherical.y=2.0*atan(exp(PI-(mercator_pos.y*PI*2.0)))-PI*0.5;float len=cos(spherical.y);vec3 pos=vec3(sin(spherical.x)*len,sin(spherical.y),cos(spherical.x)*len
);if (rawPos.y <-32767.5) {pos=vec3(0.0,1.0,0.0);}if (rawPos.y > 32766.5) {pos=vec3(0.0,-1.0,0.0);}return pos;}vec3 projectToSphere(vec2 posInTile) {return projectToSphere(posInTile,vec2(0.0,0.0));}float globeComputeClippingZ(vec3 spherePos) {return (1.0-(dot(spherePos,u_projection_clipping_plane.xyz)+u_projection_clipping_plane.w));}vec4 interpolateProjection(vec2 posInTile,vec3 spherePos,float elevation) {vec3 elevatedPos=spherePos*(1.0+elevation/GLOBE_RADIUS);vec4 globePosition=u_projection_matrix*vec4(elevatedPos,1.0);globePosition.z=globeComputeClippingZ(elevatedPos)*globePosition.w;if (u_projection_transition > 0.999) {return globePosition;}vec4 flatPosition=u_projection_fallback_matrix*vec4(posInTile,elevation,1.0);const float z_globeness_threshold=0.2;vec4 result=globePosition;result.z=mix(0.0,globePosition.z,clamp((u_projection_transition-z_globeness_threshold)/(1.0-z_globeness_threshold),0.0,1.0));result.xyw=mix(flatPosition.xyw,globePosition.xyw,u_projection_transition);if ((posInTile.y <-32767.5) || (posInTile.y > 32766.5)) {result=globePosition;const float poles_hidden_anim_percentage=0.02;result.z=mix(globePosition.z,100.0,pow(max((1.0-u_projection_transition)/poles_hidden_anim_percentage,0.0),8.0));}return result;}vec4 interpolateProjectionFor3D(vec2 posInTile,vec3 spherePos,float elevation) {vec3 elevatedPos=spherePos*(1.0+elevation/GLOBE_RADIUS);vec4 globePosition=u_projection_matrix*vec4(elevatedPos,1.0);if (u_projection_transition > 0.999) {return globePosition;}vec4 fallbackPosition=u_projection_fallback_matrix*vec4(posInTile,elevation,1.0);return mix(fallbackPosition,globePosition,u_projection_transition);}vec4 projectTile(vec2 posInTile) {return interpolateProjection(posInTile,projectToSphere(posInTile),0.0);}vec4 projectTile(vec2 posInTile,vec2 rawPos) {return interpolateProjection(posInTile,projectToSphere(posInTile,rawPos),0.0);}vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return interpolateProjection(posInTile,projectToSphere(posInTile),elevation);}vec4 projectTileFor3D(vec2 posInTile,float elevation) {vec3 spherePos=projectToSphere(posInTile,posInTile);return interpolateProjectionFor3D(posInTile,spherePos,elevation);}`),background:cn(`uniform vec4 u_color;uniform float u_opacity;void main() {fragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"in vec2 a_pos;void main() {gl_Position=projectTile(a_pos);}"),backgroundPattern:cn(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;in vec2 v_pos_a;in vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);fragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;in vec2 a_pos;out vec2 v_pos_a;out vec2 v_pos_b;void main() {gl_Position=projectTile(a_pos);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),circle:cn(`in vec3 v_data;in float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);float antialiased_blur=v_data.z;float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));fragColor=v_visibility*opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);const float epsilon=0.5/255.0;if (fragColor.r < epsilon && fragColor.g < epsilon && fragColor.b < epsilon && fragColor.a < epsilon) {discard;}
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform highp float u_globe_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;uniform vec2 u_translate;in vec2 a_pos;out vec3 v_data;out float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 pos_raw=a_pos+32768.0;vec2 extrude=vec2(mod(pos_raw,8.0)/7.0*2.0-1.0);vec2 circle_center=floor(pos_raw/8.0)+u_translate;float ele=get_elevation(circle_center);v_visibility=calculate_visibility(projectTileWithElevation(circle_center,ele));if (u_pitch_with_map) {
#ifdef GLOBE
vec3 center_vector=projectToSphere(circle_center);
#endif
float angle_scale=u_globe_extrude_scale;vec2 corner_position=circle_center;if (u_scale_with_map) {angle_scale*=(radius+stroke_width);corner_position+=extrude*u_extrude_scale*(radius+stroke_width);} else {
#ifdef GLOBE
vec4 projected_center=interpolateProjection(circle_center,center_vector,ele);
#else
vec4 projected_center=projectTileWithElevation(circle_center,ele);
#endif
corner_position+=extrude*u_extrude_scale*(radius+stroke_width)*(projected_center.w/u_camera_to_center_distance);angle_scale*=(radius+stroke_width)*(projected_center.w/u_camera_to_center_distance);}
#ifdef GLOBE
vec2 angles=extrude*angle_scale;vec3 corner_vector=globeRotateVector(center_vector,angles);gl_Position=interpolateProjection(corner_position,corner_vector,ele);
#else
gl_Position=projectTileWithElevation(corner_position,ele);
#endif
} else {gl_Position=projectTileWithElevation(circle_center,ele);if (gl_Position.z/gl_Position.w > 1.0) {gl_Position.xy=vec2(10000.0);}if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}float antialiasblur=-max(1.0/u_device_pixel_ratio/(radius+stroke_width),blur);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),clippingMask:cn(Wr,"in vec2 a_pos;void main() {gl_Position=projectTile(a_pos);}"),heatmap:cn(`uniform highp float u_intensity;in vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);fragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;uniform highp float u_globe_extrude_scale;in vec2 a_pos;out vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 pos_raw=a_pos+32768.0;vec2 unscaled_extrude=vec2(mod(pos_raw,8.0)/7.0*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec2 circle_center=floor(pos_raw/8.0);
#ifdef GLOBE
vec2 angles=v_extrude*radius*u_globe_extrude_scale;vec3 center_vector=projectToSphere(circle_center);vec3 corner_vector=globeRotateVector(center_vector,angles);gl_Position=interpolateProjection(circle_center+extrude,corner_vector,0.0);
#else
gl_Position=projectTileFor3D(circle_center+extrude,get_elevation(circle_center));
#endif
}`),heatmapTexture:cn(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;in vec2 v_pos;void main() {float t=texture(u_image,v_pos).r;vec4 color=texture(u_color_ramp,vec2(t,0.5));fragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),collisionBox:cn("in float v_placed;in float v_notUsed;void main() {float alpha=0.5;fragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {fragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {fragColor*=.1;}}","in vec2 a_anchor_pos;in vec2 a_placed;in vec2 a_box_real;uniform vec2 u_pixel_extrude_scale;out float v_placed;out float v_notUsed;void main() {gl_Position=projectTileWithElevation(a_anchor_pos,get_elevation(a_anchor_pos));gl_Position.xy=((a_box_real+0.5)*u_pixel_extrude_scale*2.0-1.0)*vec2(1.0,-1.0)*gl_Position.w;if (gl_Position.z/gl_Position.w < 1.1) {gl_Position.z=0.5;}v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:cn("in float v_radius;in vec2 v_extrude;in float v_collision;void main() {float alpha=0.5;float stroke_radius=0.9;float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);fragColor=color*alpha*opacity_t;}","in vec2 a_pos;in float a_radius;in vec2 a_flags;uniform vec2 u_viewport_size;out float v_radius;out vec2 v_extrude;out float v_collision;void main() {float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_collision=collision;gl_Position=vec4((a_pos/u_viewport_size*2.0-1.0)*vec2(1.0,-1.0),0.0,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),colorRelief:cn(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;uniform vec4 u_unpack;uniform sampler2D u_elevation_stops;uniform sampler2D u_color_stops;uniform int u_color_ramp_size;uniform float u_opacity;in vec2 v_pos;float getElevation(vec2 coord) {vec4 data=texture(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack);}float getElevationStop(int stop) {float x=(float(stop)+0.5)/float(u_color_ramp_size);vec4 data=texture(u_elevation_stops,vec2(x,0))*255.0;data.a=-1.0;return dot(data,u_unpack);}void main() {float el=getElevation(v_pos);int r=(u_color_ramp_size-1);int l=0;float el_l=getElevationStop(l);float el_r=getElevationStop(r);while(r-l > 1){int m=(r+l)/2;float el_m=getElevationStop(m);if(el < el_m){r=m;el_r=el_m;}else
{l=m;el_l=el_m;}}float x=(float(l)+(el-el_l)/(el_r-el_l)+0.5)/float(u_color_ramp_size);fragColor=u_opacity*texture(u_color_stops,vec2(x,0));
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform vec2 u_dimension;in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=projectTile(a_pos,a_pos);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_pos/8192.0)*scale+epsilon;if (a_pos.y <-32767.5) {v_pos.y=0.0;}if (a_pos.y > 32766.5) {v_pos.y=1.0;}}"),debug:cn("uniform highp vec4 u_color;uniform sampler2D u_overlay;in vec2 v_uv;void main() {vec4 overlay_color=texture(u_overlay,v_uv);fragColor=mix(u_color,overlay_color,overlay_color.a);}","in vec2 a_pos;out vec2 v_uv;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=projectTileWithElevation(a_pos*u_overlay_scale,get_elevation(a_pos));}"),depth:cn(Wr,`in vec2 a_pos;void main() {
#ifdef GLOBE
gl_Position=projectTileFor3D(a_pos,0.0);
#else
gl_Position=u_projection_matrix*vec4(a_pos,0.0,1.0);
#endif
}`),fill:cn(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
fragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_fill_translate;in vec2 a_pos;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=projectTile(a_pos+u_fill_translate,a_pos);}`),fillOutline:cn(`in vec2 v_pos;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);fragColor=outline_color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_world;uniform vec2 u_fill_translate;in vec2 a_pos;out vec2 v_pos;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=projectTile(a_pos+u_fill_translate,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
}`),fillOutlinePattern:cn(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;in vec2 v_pos_a;in vec2 v_pos_b;in vec2 v_pos;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);fragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;uniform vec2 u_fill_translate;in vec2 a_pos;out vec2 v_pos_a;out vec2 v_pos_b;out vec2 v_pos;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=projectTile(a_pos+u_fill_translate,a_pos);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
}`),fillPattern:cn(`#ifdef GL_ES
precision highp float;
#endif
uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;in vec2 v_pos_a;in vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);fragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;uniform vec2 u_fill_translate;in vec2 a_pos;out vec2 v_pos_a;out vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=projectTile(a_pos+u_fill_translate,a_pos);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),fillExtrusion:cn(`in vec4 v_color;void main() {fragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp vec3 u_lightpos_globe;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec2 u_fill_translate;in vec2 a_pos;in vec4 a_normal_ed;
#ifdef TERRAIN3D
in vec2 a_centroid;
#endif
out vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float elevation=t > 0.0 ? height : base;vec2 posInTile=a_pos+u_fill_translate;
#ifdef GLOBE
vec3 spherePos=projectToSphere(posInTile,a_pos);gl_Position=interpolateProjectionFor3D(posInTile,spherePos,elevation);
#else
gl_Position=u_projection_matrix*vec4(posInTile,elevation,1.0);
#endif
float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;vec3 normalForLighting=normal/16384.0;float directional=clamp(dot(normalForLighting,u_lightpos),0.0,1.0);
#ifdef GLOBE
mat3 rotMatrix=globeGetRotationMatrix(spherePos);normalForLighting=rotMatrix*normalForLighting;directional=mix(directional,clamp(dot(normalForLighting,u_lightpos_globe),0.0,1.0),u_projection_transition);
#endif
directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),fillExtrusionPattern:cn(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;in vec2 v_pos_a;in vec2 v_pos_b;in vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);fragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec2 u_fill_translate;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp vec3 u_lightpos_globe;uniform lowp float u_lightintensity;in vec2 a_pos;in vec4 a_normal_ed;
#ifdef TERRAIN3D
in vec2 a_centroid;
#endif
#ifdef GLOBE
out vec3 v_sphere_pos;
#endif
out vec2 v_pos_a;out vec2 v_pos_b;out vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float elevation=t > 0.0 ? height : base;vec2 posInTile=a_pos+u_fill_translate;
#ifdef GLOBE
vec3 spherePos=projectToSphere(posInTile,a_pos);vec3 elevatedPos=spherePos*(1.0+elevation/GLOBE_RADIUS);v_sphere_pos=elevatedPos;gl_Position=interpolateProjectionFor3D(posInTile,spherePos,elevation);
#else
gl_Position=u_projection_matrix*vec4(posInTile,elevation,1.0);
#endif
vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,elevation*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),hillshadePrepare:cn(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;in vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack);}void main() {vec2 epsilon=1.0/u_dimension;float tileSize=u_dimension.x-2.0;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))*tileSize/pow(2.0,exaggeration+(28.2562-u_zoom));fragColor=clamp(vec4(deriv.x/8.0+0.5,deriv.y/8.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;in vec2 a_pos;in vec2 a_texture_pos;out vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:cn(`uniform sampler2D u_image;in vec2 v_pos;uniform vec2 u_latrange;uniform float u_exaggeration;uniform vec4 u_accent;uniform int u_method;uniform float u_altitudes[NUM_ILLUMINATION_SOURCES];uniform float u_azimuths[NUM_ILLUMINATION_SOURCES];uniform vec4 u_shadows[NUM_ILLUMINATION_SOURCES];uniform vec4 u_highlights[NUM_ILLUMINATION_SOURCES];
#define PI 3.141592653589793
#define STANDARD 0
#define COMBINED 1
#define IGOR 2
#define MULTIDIRECTIONAL 3
#define BASIC 4
float get_aspect(vec2 deriv){return deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);}void igor_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;float aspect=get_aspect(deriv);float azimuth=u_azimuths[0]+PI;float slope_stength=atan(length(deriv))*2.0/PI;float aspect_strength=1.0-abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);float shadow_strength=slope_stength*aspect_strength;float highlight_strength=slope_stength*(1.0-aspect_strength);fragColor=u_shadows[0]*shadow_strength+u_highlights[0]*highlight_strength;}void standard_hillshade(vec2 deriv){float azimuth=u_azimuths[0]+PI;float slope=atan(0.625*length(deriv));float aspect=get_aspect(deriv);float intensity=u_exaggeration;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadows[0],u_highlights[0],shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);fragColor=accent_color*(1.0-shade_color.a)+shade_color;}void basic_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;float azimuth=u_azimuths[0]+PI;float cos_az=cos(azimuth);float sin_az=sin(azimuth);float cos_alt=cos(u_altitudes[0]);float sin_alt=sin(u_altitudes[0]);float cang=(sin_alt-(deriv.y*cos_az*cos_alt-deriv.x*sin_az*cos_alt))/sqrt(1.0+dot(deriv,deriv));float shade=clamp(cang,0.0,1.0);if(shade > 0.5){fragColor=u_highlights[0]*(2.0*shade-1.0);}else
{fragColor=u_shadows[0]*(1.0-2.0*shade);}}void multidirectional_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;fragColor=vec4(0,0,0,0);for(int i=0; i < NUM_ILLUMINATION_SOURCES; i++){float cos_alt=cos(u_altitudes[i]);float sin_alt=sin(u_altitudes[i]);float cos_az=-cos(u_azimuths[i]);float sin_az=-sin(u_azimuths[i]);float cang=(sin_alt-(deriv.y*cos_az*cos_alt-deriv.x*sin_az*cos_alt))/sqrt(1.0+dot(deriv,deriv));float shade=clamp(cang,0.0,1.0);if(shade > 0.5){fragColor+=u_highlights[i]*(2.0*shade-1.0)/float(NUM_ILLUMINATION_SOURCES);}else
{fragColor+=u_shadows[i]*(1.0-2.0*shade)/float(NUM_ILLUMINATION_SOURCES);}}}void combined_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;float azimuth=u_azimuths[0]+PI;float cos_az=cos(azimuth);float sin_az=sin(azimuth);float cos_alt=cos(u_altitudes[0]);float sin_alt=sin(u_altitudes[0]);float cang=acos((sin_alt-(deriv.y*cos_az*cos_alt-deriv.x*sin_az*cos_alt))/sqrt(1.0+dot(deriv,deriv)));cang=clamp(cang,0.0,PI/2.0);float shade=cang*atan(length(deriv))*4.0/PI/PI;float highlight=(PI/2.0-cang)*atan(length(deriv))*4.0/PI/PI;fragColor=u_shadows[0]*shade+u_highlights[0]*highlight;}void main() {vec4 pixel=texture(u_image,v_pos);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));vec2 deriv=((pixel.rg*8.0)-4.0)/scaleFactor;if (u_method==BASIC) {basic_hillshade(deriv);} else if (u_method==COMBINED) {combined_hillshade(deriv);} else if (u_method==IGOR) {igor_hillshade(deriv);} else if (u_method==MULTIDIRECTIONAL) {multidirectional_hillshade(deriv);} else if (u_method==STANDARD) {standard_hillshade(deriv);} else {standard_hillshade(deriv);}
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=projectTile(a_pos,a_pos);v_pos=a_pos/8192.0;if (a_pos.y <-32767.5) {v_pos.y=0.0;}if (a_pos.y > 32766.5) {v_pos.y=1.0;}}"),line:cn(`uniform lowp float u_device_pixel_ratio;in vec2 v_width2;in vec2 v_normal;in float v_gamma_scale;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);fragColor=color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
in vec2 a_pos_normal;in vec4 a_data;uniform vec2 u_translation;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;out vec2 v_normal;out vec2 v_width2;out float v_gamma_scale;out highp float v_linesofar;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),lineGradient:cn(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;in vec2 v_width2;in vec2 v_normal;in float v_gamma_scale;in highp vec2 v_uv;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture(u_image,v_uv);fragColor=color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
in vec2 a_pos_normal;in vec4 a_data;in float a_uv_x;in float a_split_index;uniform vec2 u_translation;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;out vec2 v_normal;out vec2 v_width2;out float v_gamma_scale;out highp vec2 v_uv;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),linePattern:cn(`#ifdef GL_ES
precision highp float;
#endif
uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;in vec2 v_normal;in vec2 v_width2;in float v_linesofar;in float v_gamma_scale;in float v_width;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture(u_image,pos_a),texture(u_image,pos_b),u_fade);fragColor=color*alpha*opacity;
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
in vec2 a_pos_normal;in vec4 a_data;uniform vec2 u_translation;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;out vec2 v_normal;out vec2 v_width2;out float v_linesofar;out float v_gamma_scale;out float v_width;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),lineSDF:cn(`uniform lowp float u_device_pixel_ratio;uniform lowp float u_lineatlas_width;uniform sampler2D u_image;uniform float u_mix;in vec2 v_normal;in vec2 v_width2;in vec2 v_tex_a;in vec2 v_tex_b;in float v_gamma_scale;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define mediump vec4 dasharray_from
#pragma mapbox: define mediump vec4 dasharray_to
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 dasharray_from
#pragma mapbox: initialize mediump vec4 dasharray_to
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture(u_image,v_tex_a).a;float sdfdist_b=texture(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);float sdfgamma=(u_lineatlas_width/256.0/u_device_pixel_ratio)/min(dasharray_from.w,dasharray_to.w);alpha*=smoothstep(0.5-sdfgamma/floorwidth,0.5+sdfgamma/floorwidth,sdfdist);fragColor=color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
in vec2 a_pos_normal;in vec4 a_data;uniform vec2 u_translation;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_tileratio;uniform float u_crossfade_from;uniform float u_crossfade_to;uniform float u_lineatlas_height;out vec2 v_normal;out vec2 v_width2;out vec2 v_tex_a;out vec2 v_tex_b;out float v_gamma_scale;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define mediump vec4 dasharray_from
#pragma mapbox: define mediump vec4 dasharray_to
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 dasharray_from
#pragma mapbox: initialize mediump vec4 dasharray_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
float u_patternscale_a_x=u_tileratio/dasharray_from.w/u_crossfade_from;float u_patternscale_a_y=-dasharray_from.z/2.0/u_lineatlas_height;float u_patternscale_b_x=u_tileratio/dasharray_to.w/u_crossfade_to;float u_patternscale_b_y=-dasharray_to.z/2.0/u_lineatlas_height;v_tex_a=vec2(a_linesofar*u_patternscale_a_x/floorwidth,normal.y*u_patternscale_a_y+(float(dasharray_from.y)+0.5)/u_lineatlas_height);v_tex_b=vec2(a_linesofar*u_patternscale_b_x/floorwidth,normal.y*u_patternscale_b_y+(float(dasharray_to.y)+0.5)/u_lineatlas_height);v_width2=vec2(outset,inset);}`),lineGradientSDF:cn(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform sampler2D u_image_dash;uniform float u_mix;uniform lowp float u_lineatlas_width;in vec2 v_normal;in vec2 v_width2;in vec2 v_tex_a;in vec2 v_tex_b;in float v_gamma_scale;in highp vec2 v_uv;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define mediump vec4 dasharray_from
#pragma mapbox: define mediump vec4 dasharray_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 dasharray_from
#pragma mapbox: initialize mediump vec4 dasharray_to
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture(u_image,v_uv);float sdfdist_a=texture(u_image_dash,v_tex_a).a;float sdfdist_b=texture(u_image_dash,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);float sdfgamma=(u_lineatlas_width/256.0)/min(dasharray_from.w,dasharray_to.w);float dash_alpha=smoothstep(0.5-sdfgamma/floorwidth,0.5+sdfgamma/floorwidth,sdfdist);fragColor=color*(alpha*dash_alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
in vec2 a_pos_normal;in vec4 a_data;in float a_uv_x;in float a_split_index;uniform vec2 u_translation;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;uniform float u_tileratio;uniform float u_crossfade_from;uniform float u_crossfade_to;uniform float u_lineatlas_height;out vec2 v_normal;out vec2 v_width2;out float v_gamma_scale;out highp vec2 v_uv;out vec2 v_tex_a;out vec2 v_tex_b;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define mediump vec4 dasharray_from
#pragma mapbox: define mediump vec4 dasharray_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 dasharray_from
#pragma mapbox: initialize mediump vec4 dasharray_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;float texel_height=1.0/u_image_height;float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
float u_patternscale_a_x=u_tileratio/dasharray_from.w/u_crossfade_from;float u_patternscale_a_y=-dasharray_from.z/2.0/u_lineatlas_height;float u_patternscale_b_x=u_tileratio/dasharray_to.w/u_crossfade_to;float u_patternscale_b_y=-dasharray_to.z/2.0/u_lineatlas_height;v_tex_a=vec2(a_linesofar*u_patternscale_a_x/floorwidth,normal.y*u_patternscale_a_y+(float(dasharray_from.y)+0.5)/u_lineatlas_height);v_tex_b=vec2(a_linesofar*u_patternscale_b_x/floorwidth,normal.y*u_patternscale_b_y+(float(dasharray_to.y)+0.5)/u_lineatlas_height);v_width2=vec2(outset,inset);}`),raster:cn(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;in vec2 v_pos0;in vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture(u_image0,v_pos0);vec4 color1=texture(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);fragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;uniform vec4 u_coords_top;uniform vec4 u_coords_bottom;in vec2 a_pos;out vec2 v_pos0;out vec2 v_pos1;void main() {vec2 fractionalPos=a_pos/8192.0;vec2 position=mix(mix(u_coords_top.xy,u_coords_top.zw,fractionalPos.x),mix(u_coords_bottom.xy,u_coords_bottom.zw,fractionalPos.x),fractionalPos.y);gl_Position=projectTile(position,position);v_pos0=((fractionalPos-0.5)/u_buffer_scale)+0.5;
#ifdef GLOBE
if (a_pos.y <-32767.5) {v_pos0.y=0.0;}if (a_pos.y > 32766.5) {v_pos0.y=1.0;}
#endif
v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}`),symbolIcon:cn(`uniform sampler2D u_texture;in vec2 v_tex;in float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;fragColor=texture(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`in vec4 a_pos_offset;in vec4 a_data;in vec4 a_pixeloffset;in vec3 a_projected_pos;in float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;out vec2 v_tex;out float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;
#ifdef GLOBE
if(u_pitch_with_map) {float anchor_pos_tile_y=(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w,z,1.0)).y;projectionScaling=mix(projectionScaling,1.0/circumferenceRatioAtTileY(anchor_pos_tile_y)*u_pitched_scale,u_projection_transition);}
#endif
vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}gl_Position=finalPos;v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float visibility=calculate_visibility(projectedPoint);v_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));}`),symbolSDF:cn(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;in vec2 v_data0;in vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float inner_edge=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);inner_edge=inner_edge+gamma*gamma_scale;}lowp float dist=texture(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(inner_edge-gamma_scaled,inner_edge+gamma_scaled,dist);if (u_is_halo) {lowp float halo_edge=(6.0-halo_width/fontScale)/SDF_PX;alpha=min(smoothstep(halo_edge-gamma_scaled,halo_edge+gamma_scaled,dist),1.0-alpha);}fragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`in vec4 a_pos_offset;in vec4 a_data;in vec4 a_pixeloffset;in vec3 a_projected_pos;in float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_translation;uniform float u_pitched_scale;out vec2 v_data0;out vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;
#ifdef GLOBE
if(u_pitch_with_map) {float anchor_pos_tile_y=(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w,z,1.0)).y;projectionScaling=mix(projectionScaling,1.0/circumferenceRatioAtTileY(anchor_pos_tile_y)*u_pitched_scale,u_projection_transition);}
#endif
vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),symbolTextAndIcon:cn(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;in vec4 v_data0;in vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;fragColor=texture(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);fragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`in vec4 a_pos_offset;in vec4 a_data;in vec3 a_projected_pos;in float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;out vec4 v_data0;out vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;
#ifdef GLOBE
if(u_pitch_with_map && !u_is_along_line) {float anchor_pos_tile_y=(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w,z,1.0)).y;projectionScaling=mix(projectionScaling,1.0/circumferenceRatioAtTileY(anchor_pos_tile_y)*u_pitched_scale,u_projection_transition);}
#endif
vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`),terrain:cn("uniform sampler2D u_texture;uniform vec4 u_fog_color;uniform vec4 u_horizon_color;uniform float u_fog_ground_blend;uniform float u_fog_ground_blend_opacity;uniform float u_horizon_fog_blend;uniform bool u_is_globe_mode;in vec2 v_texture_pos;in float v_fog_depth;const float gamma=2.2;vec4 gammaToLinear(vec4 color) {return pow(color,vec4(gamma));}vec4 linearToGamma(vec4 color) {return pow(color,vec4(1.0/gamma));}void main() {vec4 surface_color=texture(u_texture,vec2(v_texture_pos.x,1.0-v_texture_pos.y));if (!u_is_globe_mode && v_fog_depth > u_fog_ground_blend) {vec4 surface_color_linear=gammaToLinear(surface_color);float blend_color=smoothstep(0.0,1.0,max((v_fog_depth-u_horizon_fog_blend)/(1.0-u_horizon_fog_blend),0.0));vec4 fog_horizon_color_linear=mix(gammaToLinear(u_fog_color),gammaToLinear(u_horizon_color),blend_color);float factor_fog=max(v_fog_depth-u_fog_ground_blend,0.0)/(1.0-u_fog_ground_blend);fragColor=linearToGamma(mix(surface_color_linear,fog_horizon_color_linear,pow(factor_fog,2.0)*u_fog_ground_blend_opacity));} else {fragColor=surface_color;}}","in vec3 a_pos3d;uniform mat4 u_fog_matrix;uniform float u_ele_delta;out vec2 v_texture_pos;out float v_fog_depth;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/8192.0;gl_Position=projectTileFor3D(a_pos3d.xy,get_elevation(a_pos3d.xy)-ele_delta);vec4 pos=u_fog_matrix*vec4(a_pos3d.xy,ele,1.0);v_fog_depth=pos.z/pos.w*0.5+0.5;}"),terrainDepth:cn("in float v_depth;const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitMsk=vec4(0.,vec3(1./256.0));highp vec4 pack(highp float value) {highp vec4 comp=fract(value*bitSh);comp-=comp.xxyz*bitMsk;return comp;}void main() {fragColor=pack(v_depth);}","in vec3 a_pos3d;uniform float u_ele_delta;out float v_depth;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;gl_Position=projectTileFor3D(a_pos3d.xy,ele-ele_delta);v_depth=gl_Position.z/gl_Position.w;}"),terrainCoords:cn("precision mediump float;uniform sampler2D u_texture;uniform float u_terrain_coords_id;in vec2 v_texture_pos;void main() {vec4 rgba=texture(u_texture,v_texture_pos);fragColor=vec4(rgba.r,rgba.g,rgba.b,u_terrain_coords_id);}","in vec3 a_pos3d;uniform float u_ele_delta;out vec2 v_texture_pos;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/8192.0;gl_Position=projectTileFor3D(a_pos3d.xy,ele-ele_delta);}"),projectionErrorMeasurement:cn("in vec4 v_output_error_encoded;void main() {fragColor=v_output_error_encoded;}","in vec2 a_pos;uniform highp float u_input;uniform highp float u_output_expected;out vec4 v_output_error_encoded;void main() {float real_output=2.0*atan(exp(PI-(u_input*PI*2.0)))-PI*0.5;float error=real_output-u_output_expected;float abs_error=abs(error)*128.0;v_output_error_encoded.x=min(floor(abs_error*256.0),255.0)/255.0;abs_error-=v_output_error_encoded.x;v_output_error_encoded.y=min(floor(abs_error*65536.0),255.0)/255.0;abs_error-=v_output_error_encoded.x/255.0;v_output_error_encoded.z=min(floor(abs_error*16777216.0),255.0)/255.0;v_output_error_encoded.w=error >=0.0 ? 1.0 : 0.0;gl_Position=vec4(a_pos,0.0,1.0);}"),atmosphere:cn(`in vec3 view_direction;uniform vec3 u_sun_pos;uniform vec3 u_globe_position;uniform float u_globe_radius;uniform float u_atmosphere_blend;/**Shader use from https:*Made some change to adapt to MapLibre Globe geometry*/const float PI=3.141592653589793;const int iSteps=5;const int jSteps=3;/*radius of the planet*/const float EARTH_RADIUS=6371e3;/*radius of the atmosphere*/const float ATMOS_RADIUS=6471e3;vec2 rsi(vec3 r0,vec3 rd,float sr) {float a=dot(rd,rd);float b=2.0*dot(rd,r0);float c=dot(r0,r0)-(sr*sr);float d=(b*b)-4.0*a*c;if (d < 0.0) return vec2(1e5,-1e5);return vec2((-b-sqrt(d))/(2.0*a),(-b+sqrt(d))/(2.0*a));}vec4 atmosphere(vec3 r,vec3 r0,vec3 pSun,float iSun,float rPlanet,float rAtmos,vec3 kRlh,float kMie,float shRlh,float shMie,float g) {pSun=normalize(pSun);r=normalize(r);vec2 p=rsi(r0,r,rAtmos);if (p.x > p.y) {return vec4(0.0,0.0,0.0,1.0);}if (p.x < 0.0) {p.x=0.0;}vec3 pos=r0+r*p.x;vec2 p2=rsi(r0,r,rPlanet);if (p2.x <=p2.y && p2.x > 0.0) {p.y=min(p.y,p2.x);}float iStepSize=(p.y-p.x)/float(iSteps);float iTime=p.x+iStepSize*0.5;vec3 totalRlh=vec3(0,0,0);vec3 totalMie=vec3(0,0,0);float iOdRlh=0.0;float iOdMie=0.0;float mu=dot(r,pSun);float mumu=mu*mu;float gg=g*g;float pRlh=3.0/(16.0*PI)*(1.0+mumu);float pMie=3.0/(8.0*PI)*((1.0-gg)*(mumu+1.0))/(pow(1.0+gg-2.0*mu*g,1.5)*(2.0+gg));for (int i=0; i < iSteps; i++) {vec3 iPos=r0+r*iTime;float iHeight=length(iPos)-rPlanet;float odStepRlh=exp(-iHeight/shRlh)*iStepSize;float odStepMie=exp(-iHeight/shMie)*iStepSize;iOdRlh+=odStepRlh;iOdMie+=odStepMie;float jStepSize=rsi(iPos,pSun,rAtmos).y/float(jSteps);float jTime=jStepSize*0.5;float jOdRlh=0.0;float jOdMie=0.0;for (int j=0; j < jSteps; j++) {vec3 jPos=iPos+pSun*jTime;float jHeight=length(jPos)-rPlanet;jOdRlh+=exp(-jHeight/shRlh)*jStepSize;jOdMie+=exp(-jHeight/shMie)*jStepSize;jTime+=jStepSize;}vec3 attn=exp(-(kMie*(iOdMie+jOdMie)+kRlh*(iOdRlh+jOdRlh)));totalRlh+=odStepRlh*attn;totalMie+=odStepMie*attn;iTime+=iStepSize;}float opacity=exp(-(length(kRlh)*length(totalRlh)+kMie*length(totalMie)));vec3 color=iSun*(pRlh*kRlh*totalRlh+pMie*kMie*totalMie);return vec4(color,opacity);}void main() {vec3 scale_camera_pos=-u_globe_position*EARTH_RADIUS/u_globe_radius;vec4 color=atmosphere(normalize(view_direction),scale_camera_pos,u_sun_pos,22.0,EARTH_RADIUS,ATMOS_RADIUS,vec3(5.5e-6,13.0e-6,22.4e-6),21e-6,8e3,1.2e3,0.758
);color.rgb=1.0-exp(-1.0*color.rgb);color=pow(color,vec4(1.0/2.2));fragColor=vec4(color.rgb,1.0-color.a)*u_atmosphere_blend;}`,"in vec2 a_pos;uniform mat4 u_inv_proj_matrix;out vec3 view_direction;void main() {view_direction=(u_inv_proj_matrix*vec4(a_pos,0.0,1.0)).xyz;gl_Position=vec4(a_pos,0.0,1.0);}"),sky:cn("uniform vec4 u_sky_color;uniform vec4 u_horizon_color;uniform vec2 u_horizon;uniform vec2 u_horizon_normal;uniform float u_sky_horizon_blend;uniform float u_sky_blend;void main() {float x=gl_FragCoord.x;float y=gl_FragCoord.y;float blend=(y-u_horizon.y)*u_horizon_normal.y+(x-u_horizon.x)*u_horizon_normal.x;if (blend > 0.0) {if (blend < u_sky_horizon_blend) {fragColor=mix(u_sky_color,u_horizon_color,pow(1.0-blend/u_sky_horizon_blend,2.0));} else {fragColor=u_sky_color;}}fragColor=mix(fragColor,vec4(vec3(0.0),0.0),u_sky_blend);}","in vec2 a_pos;void main() {gl_Position=vec4(a_pos,1.0,1.0);}")};function cn(x,n){const c=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,f=n.match(/in ([\w]+) ([\w]+)/g),y=x.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),b=n.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),S=b?b.concat(y):y,M={};return{fragmentSource:x=x.replace(c,((N,j,q,ne,te)=>(M[te]=!0,j==="define"?`
#ifndef HAS_UNIFORM_u_${te}
in ${q} ${ne} ${te};
#else
uniform ${q} ${ne} u_${te};
#endif
`:`
#ifdef HAS_UNIFORM_u_${te}
    ${q} ${ne} ${te} = u_${te};
#endif
`))),vertexSource:n=n.replace(c,((N,j,q,ne,te)=>{const ue=ne==="float"?"vec2":"vec4",_e=te.match(/color/)?"color":ue;return M[te]?j==="define"?`
#ifndef HAS_UNIFORM_u_${te}
uniform lowp float u_${te}_t;
in ${q} ${ue} a_${te};
out ${q} ${ne} ${te};
#else
uniform ${q} ${ne} u_${te};
#endif
`:_e==="vec4"?`
#ifndef HAS_UNIFORM_u_${te}
    ${te} = a_${te};
#else
    ${q} ${ne} ${te} = u_${te};
#endif
`:`
#ifndef HAS_UNIFORM_u_${te}
    ${te} = unpack_mix_${_e}(a_${te}, u_${te}_t);
#else
    ${q} ${ne} ${te} = u_${te};
#endif
`:j==="define"?`
#ifndef HAS_UNIFORM_u_${te}
uniform lowp float u_${te}_t;
in ${q} ${ue} a_${te};
#else
uniform ${q} ${ne} u_${te};
#endif
`:_e==="vec4"?`
#ifndef HAS_UNIFORM_u_${te}
    ${q} ${ne} ${te} = a_${te};
#else
    ${q} ${ne} ${te} = u_${te};
#endif
`:`
#ifndef HAS_UNIFORM_u_${te}
    ${q} ${ne} ${te} = unpack_mix_${_e}(a_${te}, u_${te}_t);
#else
    ${q} ${ne} ${te} = u_${te};
#endif
`})),staticAttributes:f,staticUniforms:S}}class ii{constructor(n,c,f){this.vertexBuffer=n,this.indexBuffer=c,this.segments=f}destroy(){this.vertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.vertexBuffer=null,this.indexBuffer=null,this.segments=null}}var _s=o.aV([{name:"a_pos",type:"Int16",components:2}]);const Wi="#define PROJECTION_MERCATOR",uo="mercator";class ws{constructor(){this._cachedMesh=null}get name(){return"mercator"}get useSubdivision(){return!1}get shaderVariantName(){return uo}get shaderDefine(){return Wi}get shaderPreludeCode(){return Jn.projectionMercator}get vertexShaderPreludeCode(){return Jn.projectionMercator.vertexSource}get subdivisionGranularity(){return o.aW.noSubdivision}get useGlobeControls(){return!1}get transitionState(){return 0}get latitudeErrorCorrectionRadians(){return 0}destroy(){}updateGPUdependent(n){}getMeshFromTileID(n,c,f,y,b){if(this._cachedMesh)return this._cachedMesh;const S=new o.aX;S.emplaceBack(0,0),S.emplaceBack(o.a5,0),S.emplaceBack(0,o.a5),S.emplaceBack(o.a5,o.a5);const M=n.createVertexBuffer(S,_s.members),N=o.aY.simpleSegment(0,0,4,2),j=new o.aZ;j.emplaceBack(1,0,2),j.emplaceBack(1,2,3);const q=n.createIndexBuffer(j);return this._cachedMesh=new ii(M,q,N),this._cachedMesh}recalculate(){}hasTransition(){return!1}setErrorQueryLatitudeDegrees(n){}}class Sa{constructor(n=0,c=0,f=0,y=0){if(isNaN(n)||n<0||isNaN(c)||c<0||isNaN(f)||f<0||isNaN(y)||y<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=n,this.bottom=c,this.left=f,this.right=y}interpolate(n,c,f){return c.top!=null&&n.top!=null&&(this.top=o.G.number(n.top,c.top,f)),c.bottom!=null&&n.bottom!=null&&(this.bottom=o.G.number(n.bottom,c.bottom,f)),c.left!=null&&n.left!=null&&(this.left=o.G.number(n.left,c.left,f)),c.right!=null&&n.right!=null&&(this.right=o.G.number(n.right,c.right,f)),this}getCenter(n,c){const f=o.ao((this.left+n-this.right)/2,0,n),y=o.ao((this.top+c-this.bottom)/2,0,c);return new o.P(f,y)}equals(n){return this.top===n.top&&this.bottom===n.bottom&&this.left===n.left&&this.right===n.right}clone(){return new Sa(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}function Fa(x,n){if(!x.renderWorldCopies||x.lngRange)return;const c=n.lng-x.center.lng;n.lng+=c>180?-360:c<-180?360:0}function ti(x){return Math.max(0,Math.floor(x))}class Aa{constructor(n,c){var f;this.applyConstrain=(y,b)=>this._constrainOverride!==null?this._constrainOverride(y,b):this._callbacks.defaultConstrain(y,b),this._callbacks=n,this._tileSize=512,this._renderWorldCopies=c?.renderWorldCopies===void 0||!!c?.renderWorldCopies,this._minZoom=c?.minZoom||0,this._maxZoom=c?.maxZoom||22,this._minPitch=c?.minPitch==null?0:c?.minPitch,this._maxPitch=c?.maxPitch==null?60:c?.maxPitch,this._constrainOverride=(f=c?.constrainOverride)!==null&&f!==void 0?f:null,this.setMaxBounds(),this._width=0,this._height=0,this._center=new o.V(0,0),this._elevation=0,this._zoom=0,this._tileZoom=ti(this._zoom),this._scale=o.ar(this._zoom),this._bearingInRadians=0,this._fovInRadians=.6435011087932844,this._pitchInRadians=0,this._rollInRadians=0,this._unmodified=!0,this._edgeInsets=new Sa,this._minElevationForCurrentTile=0,this._autoCalculateNearFarZ=!0}apply(n,c,f){this._constrainOverride=n.constrainOverride,this._latRange=n.latRange,this._lngRange=n.lngRange,this._width=n.width,this._height=n.height,this._center=n.center,this._elevation=n.elevation,this._minElevationForCurrentTile=n.minElevationForCurrentTile,this._zoom=n.zoom,this._tileZoom=ti(this._zoom),this._scale=o.ar(this._zoom),this._bearingInRadians=n.bearingInRadians,this._fovInRadians=n.fovInRadians,this._pitchInRadians=n.pitchInRadians,this._rollInRadians=n.rollInRadians,this._unmodified=n.unmodified,this._edgeInsets=new Sa(n.padding.top,n.padding.bottom,n.padding.left,n.padding.right),this._minZoom=n.minZoom,this._maxZoom=n.maxZoom,this._minPitch=n.minPitch,this._maxPitch=n.maxPitch,this._renderWorldCopies=n.renderWorldCopies,this._cameraToCenterDistance=n.cameraToCenterDistance,this._nearZ=n.nearZ,this._farZ=n.farZ,this._autoCalculateNearFarZ=!f&&n.autoCalculateNearFarZ,c&&this.constrainInternal(),this._calcMatrices()}get pixelsToClipSpaceMatrix(){return this._pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._clipSpaceToPixelsMatrix}get minElevationForCurrentTile(){return this._minElevationForCurrentTile}setMinElevationForCurrentTile(n){this._minElevationForCurrentTile=n}get tileSize(){return this._tileSize}get tileZoom(){return this._tileZoom}get scale(){return this._scale}get width(){return this._width}get height(){return this._height}get bearingInRadians(){return this._bearingInRadians}get lngRange(){return this._lngRange}get latRange(){return this._latRange}get pixelsToGLUnits(){return this._pixelsToGLUnits}get minZoom(){return this._minZoom}setMinZoom(n){this._minZoom!==n&&(this._minZoom=n,this.setZoom(this.applyConstrain(this._center,this.zoom).zoom))}get maxZoom(){return this._maxZoom}setMaxZoom(n){this._maxZoom!==n&&(this._maxZoom=n,this.setZoom(this.applyConstrain(this._center,this.zoom).zoom))}get minPitch(){return this._minPitch}setMinPitch(n){this._minPitch!==n&&(this._minPitch=n,this.setPitch(Math.max(this.pitch,n)))}get maxPitch(){return this._maxPitch}setMaxPitch(n){this._maxPitch!==n&&(this._maxPitch=n,this.setPitch(Math.min(this.pitch,n)))}get renderWorldCopies(){return this._renderWorldCopies}setRenderWorldCopies(n){n===void 0?n=!0:n===null&&(n=!1),this._renderWorldCopies=n}get constrainOverride(){return this._constrainOverride}setConstrainOverride(n){n===void 0&&(n=null),this._constrainOverride!==n&&(this._constrainOverride=n,this.constrainInternal(),this._calcMatrices())}get worldSize(){return this._tileSize*this._scale}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new o.P(this._width,this._height)}get bearing(){return this._bearingInRadians/Math.PI*180}setBearing(n){const c=o.W(n,-180,180)*Math.PI/180;var f,y,b,S,M,N,j,q,ne;this._bearingInRadians!==c&&(this._unmodified=!1,this._bearingInRadians=c,this._calcMatrices(),this._rotationMatrix=E(),f=this._rotationMatrix,b=-this._bearingInRadians,S=(y=this._rotationMatrix)[0],M=y[1],N=y[2],j=y[3],q=Math.sin(b),ne=Math.cos(b),f[0]=S*ne+N*q,f[1]=M*ne+j*q,f[2]=S*-q+N*ne,f[3]=M*-q+j*ne)}get rotationMatrix(){return this._rotationMatrix}get pitchInRadians(){return this._pitchInRadians}get pitch(){return this._pitchInRadians/Math.PI*180}setPitch(n){const c=o.ao(n,this.minPitch,this.maxPitch)/180*Math.PI;this._pitchInRadians!==c&&(this._unmodified=!1,this._pitchInRadians=c,this._calcMatrices())}get rollInRadians(){return this._rollInRadians}get roll(){return this._rollInRadians/Math.PI*180}setRoll(n){const c=n/180*Math.PI;this._rollInRadians!==c&&(this._unmodified=!1,this._rollInRadians=c,this._calcMatrices())}get fovInRadians(){return this._fovInRadians}get fov(){return o.a_(this._fovInRadians)}setFov(n){n=o.ao(n,.1,150),this.fov!==n&&(this._unmodified=!1,this._fovInRadians=o.aq(n),this._calcMatrices())}get zoom(){return this._zoom}setZoom(n){const c=this.applyConstrain(this._center,n).zoom;this._zoom!==c&&(this._unmodified=!1,this._zoom=c,this._tileZoom=Math.max(0,Math.floor(c)),this._scale=o.ar(c),this.constrainInternal(),this._calcMatrices())}get center(){return this._center}setCenter(n){n.lat===this._center.lat&&n.lng===this._center.lng||(this._unmodified=!1,this._center=n,this.constrainInternal(),this._calcMatrices())}get elevation(){return this._elevation}setElevation(n){n!==this._elevation&&(this._elevation=n,this.constrainInternal(),this._calcMatrices())}get padding(){return this._edgeInsets.toJSON()}setPadding(n){this._edgeInsets.equals(n)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,n,1),this._calcMatrices())}get centerPoint(){return this._edgeInsets.getCenter(this._width,this._height)}get pixelsPerMeter(){return this._pixelPerMeter}get unmodified(){return this._unmodified}get cameraToCenterDistance(){return this._cameraToCenterDistance}get nearZ(){return this._nearZ}get farZ(){return this._farZ}get autoCalculateNearFarZ(){return this._autoCalculateNearFarZ}overrideNearFarZ(n,c){this._autoCalculateNearFarZ=!1,this._nearZ=n,this._farZ=c,this._calcMatrices()}clearNearFarZOverride(){this._autoCalculateNearFarZ=!0,this._calcMatrices()}isPaddingEqual(n){return this._edgeInsets.equals(n)}interpolatePadding(n,c,f){this._unmodified=!1,this._edgeInsets.interpolate(n,c,f),this.constrainInternal(),this._calcMatrices()}resize(n,c,f=!0){this._width=n,this._height=c,f&&this.constrainInternal(),this._calcMatrices()}getMaxBounds(){return this._latRange&&this._latRange.length===2&&this._lngRange&&this._lngRange.length===2?new kr([this._lngRange[0],this._latRange[0]],[this._lngRange[1],this._latRange[1]]):null}setMaxBounds(n){n?(this._lngRange=[n.getWest(),n.getEast()],this._latRange=[n.getSouth(),n.getNorth()],this.constrainInternal()):(this._lngRange=null,this._latRange=[-o.ap,o.ap])}getCameraQueryGeometry(n,c){if(c.length===1)return[c[0],n];{const{minX:f,minY:y,maxX:b,maxY:S}=o.ac.fromPoints(c).extend(n);return[new o.P(f,y),new o.P(b,y),new o.P(b,S),new o.P(f,S),new o.P(f,y)]}}constrainInternal(){if(!this.center||!this._width||!this._height||this._constraining)return;this._constraining=!0;const n=this._unmodified,{center:c,zoom:f}=this.applyConstrain(this.center,this.zoom);this.setCenter(c),this.setZoom(f),this._unmodified=n,this._constraining=!1}_calcMatrices(){if(this._width&&this._height){this._pixelsToGLUnits=[2/this._width,-2/this._height];let n=o.as(new Float64Array(16));o.Q(n,n,[this._width/2,-this._height/2,1]),o.O(n,n,[1,-1,0]),this._clipSpaceToPixelsMatrix=n,n=o.as(new Float64Array(16)),o.Q(n,n,[1,-1,1]),o.O(n,n,[-1,-1,0]),o.Q(n,n,[2/this._width,2/this._height,1]),this._pixelsToClipSpaceMatrix=n,this._cameraToCenterDistance=.5/Math.tan(this.fovInRadians/2)*this._height}this._callbacks.calcMatrices()}calculateCenterFromCameraLngLatAlt(n,c,f,y){const b=f!==void 0?f:this.bearing,S=y=y!==void 0?y:this.pitch,{distanceToCenter:M,clampedElevation:N}=this._distanceToCenterFromAltElevationPitch(c,this.elevation,S),{x:j,y:q}=tn(S,b),ne=o.ab.fromLngLat(n,c);let te,ue,_e=o.a$(1,ne.y),De=0;do{if(De+=1,De>10)break;ue=M/_e,te=new o.ab(ne.x+j*ue,ne.y+q*ue),_e=1/te.meterInMercatorCoordinateUnits()}while(Math.abs(M-ue*_e)>1e-12);return{center:te.toLngLat(),elevation:N,zoom:o.au(this.height/2/Math.tan(this.fovInRadians/2)/ue/this.tileSize)}}recalculateZoomAndCenter(n){if(this.elevation-n==0)return;const c=1/this.worldSize,f=o.at(1,this.center.lat)*this.worldSize,y=o.ab.fromLngLat(this.center,this.elevation),b=y.x/c,S=y.y/c,M=y.z/c,N=this.pitch,j=this.bearing,{x:q,y:ne,z:te}=tn(N,j),ue=this.cameraToCenterDistance,_e=b+ue*-q,De=S+ue*-ne,ze=M+ue*te,{distanceToCenter:Oe,clampedElevation:Ge}=this._distanceToCenterFromAltElevationPitch(ze/f,n,N),lt=Oe*f,Ze=new o.ab((_e+q*lt)*c,(De+ne*lt)*c,0).toLngLat(),At=o.at(1,Ze.lat),ft=o.au(this.height/2/Math.tan(this.fovInRadians/2)/Oe/At/this.tileSize);this._elevation=Ge,this._center=Ze,this.setZoom(ft)}_distanceToCenterFromAltElevationPitch(n,c,f){const y=-Math.cos(o.aq(f)),b=n-c;let S,M=c;return y*b>=0||Math.abs(y)<.1?(S=1e4,M=n+S*y):S=-b/y,{distanceToCenter:S,clampedElevation:M}}getCameraPoint(){const n=Math.tan(this.pitchInRadians)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new o.P(n*Math.sin(this.rollInRadians),n*Math.cos(this.rollInRadians)))}getCameraAltitude(){return Math.cos(this.pitchInRadians)*this._cameraToCenterDistance/this._pixelPerMeter+this.elevation}getCameraLngLat(){const n=o.at(1,this.center.lat)*this.worldSize;return mt(this.center,this.elevation,this.pitch,this.bearing,this.cameraToCenterDistance/n).toLngLat()}getMercatorTileCoordinates(n){if(!n)return[0,0,1,1];const c=n.canonical.z>=0?1<<n.canonical.z:Math.pow(2,n.canonical.z);return[n.canonical.x/c,n.canonical.y/c,1/c/o.a5,1/c/o.a5]}}class Zi{constructor(n,c){this.min=n,this.max=c,this.center=o.b0([],o.b1([],this.min,this.max),.5)}quadrant(n){const c=[n%2==0,n<2],f=o.b2(this.min),y=o.b2(this.max);for(let b=0;b<c.length;b++)f[b]=c[b]?this.min[b]:this.center[b],y[b]=c[b]?this.center[b]:this.max[b];return y[2]=this.max[2],new Zi(f,y)}distanceX(n){return Math.max(Math.min(this.max[0],n[0]),this.min[0])-n[0]}distanceY(n){return Math.max(Math.min(this.max[1],n[1]),this.min[1])-n[1]}intersectsFrustum(n){let c=!0;for(let f=0;f<n.planes.length;f++){const y=this.intersectsPlane(n.planes[f]);if(y===0)return 0;y===1&&(c=!1)}return c?2:n.aabb.min[0]>this.max[0]||n.aabb.min[1]>this.max[1]||n.aabb.min[2]>this.max[2]||n.aabb.max[0]<this.min[0]||n.aabb.max[1]<this.min[1]||n.aabb.max[2]<this.min[2]?0:1}intersectsPlane(n){let c=n[3],f=n[3];for(let y=0;y<3;y++)n[y]>0?(c+=n[y]*this.min[y],f+=n[y]*this.max[y]):(f+=n[y]*this.min[y],c+=n[y]*this.max[y]);return c>=0?2:f<0?0:1}}class ic{distanceToTile2d(n,c,f,y){const b=y.distanceX([n,c]),S=y.distanceY([n,c]);return Math.hypot(b,S)}getWrap(n,c,f){return f}getTileBoundingVolume(n,c,f,y){var b,S;let M=0,N=0;if(y?.terrain){const q=new o.a2(n.z,c,n.z,n.x,n.y),ne=y.terrain.getMinMaxElevation(q);M=(b=ne.minElevation)!==null&&b!==void 0?b:Math.min(0,f),N=(S=ne.maxElevation)!==null&&S!==void 0?S:Math.max(0,f)}const j=1<<n.z;return new Zi([c+n.x/j,n.y/j,M],[c+(n.x+1)/j,(n.y+1)/j,N])}allowVariableZoom(n,c){const f=n.fov*(Math.abs(Math.cos(n.rollInRadians))*n.height+Math.abs(Math.sin(n.rollInRadians))*n.width)/n.height,y=o.ao(78.5-f/2,0,60);return!!c.terrain||n.pitch>y}allowWorldCopies(){return!0}prepareNextFrame(){}}class qs{constructor(n,c,f){this.points=n,this.planes=c,this.aabb=f}static fromInvProjectionMatrix(n,c=1,f=0,y,b){const S=b?[[6,5,4],[0,1,2],[0,3,7],[2,1,5],[3,2,6],[0,4,5]]:[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]],M=Math.pow(2,f),N=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map((te=>(function(ue,_e,De,ze){const Oe=o.aI([],ue,_e),Ge=1/Oe[3]/De*ze;return o.b7(Oe,Oe,[Ge,Ge,1/Oe[3],Ge])})(te,n,c,M)));y&&(function(te,ue,_e,De){const ze=De?4:0,Oe=De?0:4;let Ge=0;const lt=[],Ze=[];for(let st=0;st<4;st++){const wt=o.b3([],te[st+Oe],te[st+ze]),Dt=o.b8(wt);o.b0(wt,wt,1/Dt),lt.push(Dt),Ze.push(wt)}for(let st=0;st<4;st++){const wt=o.b9(te[st+ze],Ze[st],_e);Ge=wt!==null&&wt>=0?Math.max(Ge,wt):Math.max(Ge,lt[st])}const At=(function(st,wt){const Dt=o.b3([],st[wt[0]],st[wt[1]]),Lt=o.b3([],st[wt[2]],st[wt[1]]),Rt=[0,0,0,0];return o.b4(Rt,o.b5([],Dt,Lt)),Rt[3]=-o.b6(Rt,st[wt[0]]),Rt})(te,ue),ft=(function(st,wt){const Dt=o.ba(st),Lt=o.bb([],st,1/Dt),Rt=o.b3([],wt,o.b0([],Lt,o.b6(wt,Lt))),Qt=o.ba(Rt);if(Qt>0){const nr=Math.sqrt(1-Lt[3]*Lt[3]),ur=o.b0([],Lt,-Lt[3]),rr=o.b1([],ur,o.b0([],Rt,nr/Qt));return o.bc(wt,rr)}return null})(_e,At);if(ft!==null){const st=ft/o.b6(Ze[0],At);Ge=Math.min(Ge,st)}for(let st=0;st<4;st++){const wt=Math.min(Ge,lt[st]);te[st+Oe]=[te[st+ze][0]+Ze[st][0]*wt,te[st+ze][1]+Ze[st][1]*wt,te[st+ze][2]+Ze[st][2]*wt,1]}})(N,S[0],y,b);const j=S.map((te=>{const ue=o.b3([],N[te[0]],N[te[1]]),_e=o.b3([],N[te[2]],N[te[1]]),De=o.b4([],o.b5([],ue,_e)),ze=-o.b6(De,N[te[1]]);return De.concat(ze)})),q=[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY],ne=[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY];for(const te of N)for(let ue=0;ue<3;ue++)q[ue]=Math.min(q[ue],te[ue]),ne[ue]=Math.max(ne[ue],te[ue]);return new qs(N,j,new Zi(q,ne))}}class ul{get pixelsToClipSpaceMatrix(){return this._helper.pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._helper.clipSpaceToPixelsMatrix}get pixelsToGLUnits(){return this._helper.pixelsToGLUnits}get centerOffset(){return this._helper.centerOffset}get size(){return this._helper.size}get rotationMatrix(){return this._helper.rotationMatrix}get centerPoint(){return this._helper.centerPoint}get pixelsPerMeter(){return this._helper.pixelsPerMeter}setMinZoom(n){this._helper.setMinZoom(n)}setMaxZoom(n){this._helper.setMaxZoom(n)}setMinPitch(n){this._helper.setMinPitch(n)}setMaxPitch(n){this._helper.setMaxPitch(n)}setRenderWorldCopies(n){this._helper.setRenderWorldCopies(n)}setBearing(n){this._helper.setBearing(n)}setPitch(n){this._helper.setPitch(n)}setRoll(n){this._helper.setRoll(n)}setFov(n){this._helper.setFov(n)}setZoom(n){this._helper.setZoom(n)}setCenter(n){this._helper.setCenter(n)}setElevation(n){this._helper.setElevation(n)}setMinElevationForCurrentTile(n){this._helper.setMinElevationForCurrentTile(n)}setPadding(n){this._helper.setPadding(n)}interpolatePadding(n,c,f){return this._helper.interpolatePadding(n,c,f)}isPaddingEqual(n){return this._helper.isPaddingEqual(n)}resize(n,c,f=!0){this._helper.resize(n,c,f)}getMaxBounds(){return this._helper.getMaxBounds()}setMaxBounds(n){this._helper.setMaxBounds(n)}setConstrainOverride(n){this._helper.setConstrainOverride(n)}overrideNearFarZ(n,c){this._helper.overrideNearFarZ(n,c)}clearNearFarZOverride(){this._helper.clearNearFarZOverride()}getCameraQueryGeometry(n){return this._helper.getCameraQueryGeometry(this.getCameraPoint(),n)}get tileSize(){return this._helper.tileSize}get tileZoom(){return this._helper.tileZoom}get scale(){return this._helper.scale}get worldSize(){return this._helper.worldSize}get width(){return this._helper.width}get height(){return this._helper.height}get lngRange(){return this._helper.lngRange}get latRange(){return this._helper.latRange}get minZoom(){return this._helper.minZoom}get maxZoom(){return this._helper.maxZoom}get zoom(){return this._helper.zoom}get center(){return this._helper.center}get minPitch(){return this._helper.minPitch}get maxPitch(){return this._helper.maxPitch}get pitch(){return this._helper.pitch}get pitchInRadians(){return this._helper.pitchInRadians}get roll(){return this._helper.roll}get rollInRadians(){return this._helper.rollInRadians}get bearing(){return this._helper.bearing}get bearingInRadians(){return this._helper.bearingInRadians}get fov(){return this._helper.fov}get fovInRadians(){return this._helper.fovInRadians}get elevation(){return this._helper.elevation}get minElevationForCurrentTile(){return this._helper.minElevationForCurrentTile}get padding(){return this._helper.padding}get unmodified(){return this._helper.unmodified}get renderWorldCopies(){return this._helper.renderWorldCopies}get cameraToCenterDistance(){return this._helper.cameraToCenterDistance}get constrainOverride(){return this._helper.constrainOverride}get nearZ(){return this._helper.nearZ}get farZ(){return this._helper.farZ}get autoCalculateNearFarZ(){return this._helper.autoCalculateNearFarZ}setTransitionState(n,c){}constructor(n){this._posMatrixCache=new Map,this._alignedPosMatrixCache=new Map,this._fogMatrixCacheF32=new Map,this.defaultConstrain=(c,f)=>{f=o.ao(+f,this.minZoom,this.maxZoom);const y={center:new o.V(c.lng,c.lat),zoom:f};let b=this._helper._lngRange;if(!this._helper._renderWorldCopies&&b===null){const Ze=179.9999999999;b=[-Ze,Ze]}const S=this.tileSize*o.ar(y.zoom);let M=0,N=S,j=0,q=S,ne=0,te=0;const{x:ue,y:_e}=this.size;if(this._helper._latRange){const Ze=this._helper._latRange;M=o.X(Ze[1])*S,N=o.X(Ze[0])*S,N-M<_e&&(ne=_e/(N-M))}b&&(j=o.W(o.Y(b[0])*S,0,S),q=o.W(o.Y(b[1])*S,0,S),q<j&&(q+=S),q-j<ue&&(te=ue/(q-j)));const{x:De,y:ze}=Jt(S,c);let Oe,Ge;const lt=Math.max(te||0,ne||0);if(lt){const Ze=new o.P(te?(q+j)/2:De,ne?(N+M)/2:ze);return y.center=fr(S,Ze).wrap(),y.zoom+=o.au(lt),y}if(this._helper._latRange){const Ze=_e/2;ze-Ze<M&&(Ge=M+Ze),ze+Ze>N&&(Ge=N-Ze)}if(b){const Ze=(j+q)/2;let At=De;this._helper._renderWorldCopies&&(At=o.W(De,Ze-S/2,Ze+S/2));const ft=ue/2;At-ft<j&&(Oe=j+ft),At+ft>q&&(Oe=q-ft)}if(Oe!==void 0||Ge!==void 0){const Ze=new o.P(Oe??De,Ge??ze);y.center=fr(S,Ze).wrap()}return y},this.applyConstrain=(c,f)=>this._helper.applyConstrain(c,f),this._helper=new Aa({calcMatrices:()=>{this._calcMatrices()},defaultConstrain:(c,f)=>this.defaultConstrain(c,f)},n),this._coveringTilesDetailsProvider=new ic}clone(){const n=new ul;return n.apply(this),n}apply(n,c,f){this._helper.apply(n,c,f)}get cameraPosition(){return this._cameraPosition}get projectionMatrix(){return this._projectionMatrix}get modelViewProjectionMatrix(){return this._viewProjMatrix}get inverseProjectionMatrix(){return this._invProjMatrix}get mercatorMatrix(){return this._mercatorMatrix}getVisibleUnwrappedCoordinates(n){const c=[new o.bd(0,n)];if(this._helper._renderWorldCopies){const f=this.screenPointToMercatorCoordinate(new o.P(0,0)),y=this.screenPointToMercatorCoordinate(new o.P(this._helper._width,0)),b=this.screenPointToMercatorCoordinate(new o.P(this._helper._width,this._helper._height)),S=this.screenPointToMercatorCoordinate(new o.P(0,this._helper._height)),M=Math.floor(Math.min(f.x,y.x,b.x,S.x)),N=Math.floor(Math.max(f.x,y.x,b.x,S.x)),j=1;for(let q=M-j;q<=N+j;q++)q!==0&&c.push(new o.bd(q,n))}return c}getCameraFrustum(){return qs.fromInvProjectionMatrix(this._invViewProjMatrix,this.worldSize)}getClippingPlane(){return null}getCoveringTilesDetailsProvider(){return this._coveringTilesDetailsProvider}recalculateZoomAndCenter(n){const c=this.screenPointToLocation(this.centerPoint,n),f=n?n.getElevationForLngLatZoom(c,this._helper._tileZoom):0;this._helper.recalculateZoomAndCenter(f)}setLocationAtPoint(n,c){const f=o.at(this.elevation,this.center.lat),y=this.screenPointToMercatorCoordinateAtZ(c,f),b=this.screenPointToMercatorCoordinateAtZ(this.centerPoint,f),S=o.ab.fromLngLat(n),M=new o.ab(S.x-(y.x-b.x),S.y-(y.y-b.y));this.setCenter(M?.toLngLat()),this._helper._renderWorldCopies&&this.setCenter(this.center.wrap())}locationToScreenPoint(n,c){return c?this.coordinatePoint(o.ab.fromLngLat(n),c.getElevationForLngLat(n),this._pixelMatrix3D):this.coordinatePoint(o.ab.fromLngLat(n))}screenPointToLocation(n,c){var f;return(f=this.screenPointToMercatorCoordinate(n,c))===null||f===void 0?void 0:f.toLngLat()}screenPointToMercatorCoordinate(n,c){if(c){const f=c.pointCoordinate(n);if(f!=null)return f}return this.screenPointToMercatorCoordinateAtZ(n)}screenPointToMercatorCoordinateAtZ(n,c){const f=c||0,y=[n.x,n.y,0,1],b=[n.x,n.y,1,1];o.aI(y,y,this._pixelMatrixInverse),o.aI(b,b,this._pixelMatrixInverse);const S=y[3],M=b[3],N=y[1]/S,j=b[1]/M,q=y[2]/S,ne=b[2]/M,te=q===ne?0:(f-q)/(ne-q);return new o.ab(o.G.number(y[0]/S,b[0]/M,te)/this.worldSize,o.G.number(N,j,te)/this.worldSize,f)}coordinatePoint(n,c=0,f=this._pixelMatrix){const y=[n.x*this.worldSize,n.y*this.worldSize,c,1];return o.aI(y,y,f),new o.P(y[0]/y[3],y[1]/y[3])}getBounds(){const n=Math.max(0,this._helper._height/2-rn(this));return new kr().extend(this.screenPointToLocation(new o.P(0,n))).extend(this.screenPointToLocation(new o.P(this._helper._width,n))).extend(this.screenPointToLocation(new o.P(this._helper._width,this._helper._height))).extend(this.screenPointToLocation(new o.P(0,this._helper._height)))}isPointOnMapSurface(n,c){return c?c.pointCoordinate(n)!=null:n.y>this.height/2-rn(this)}calculatePosMatrix(n,c=!1,f){var y;const b=(y=n.key)!==null&&y!==void 0?y:o.be(n.wrap,n.canonical.z,n.canonical.z,n.canonical.x,n.canonical.y),S=c?this._alignedPosMatrixCache:this._posMatrixCache;if(S.has(b)){const j=S.get(b);return f?j.f32:j.f64}const M=Tr(n,this.worldSize);o.S(M,c?this._alignedProjMatrix:this._viewProjMatrix,M);const N={f64:M,f32:new Float32Array(M)};return S.set(b,N),f?N.f32:N.f64}calculateFogMatrix(n){const c=n.key,f=this._fogMatrixCacheF32;if(f.has(c))return f.get(c);const y=Tr(n,this.worldSize);return o.S(y,this._fogMatrix,y),f.set(c,new Float32Array(y)),f.get(c)}calculateCenterFromCameraLngLatAlt(n,c,f,y){return this._helper.calculateCenterFromCameraLngLatAlt(n,c,f,y)}_calculateNearFarZIfNeeded(n,c,f){if(!this._helper.autoCalculateNearFarZ)return;const y=Math.min(this.elevation,this.minElevationForCurrentTile,this.getCameraAltitude()-100),b=n-y*this._helper._pixelPerMeter/Math.cos(c),S=y<0?b:n,M=Math.PI/2+this.pitchInRadians,N=o.aq(this.fov)*(Math.abs(Math.cos(o.aq(this.roll)))*this.height+Math.abs(Math.sin(o.aq(this.roll)))*this.width)/this.height*(.5+f.y/this.height),j=Math.sin(N)*S/Math.sin(o.ao(Math.PI-M-N,.01,Math.PI-.01)),q=rn(this),ne=Math.atan(q/this._helper.cameraToCenterDistance),te=o.aq(.75),ue=ne>te?2*ne*(.5+f.y/(2*q)):te,_e=Math.sin(ue)*S/Math.sin(o.ao(Math.PI-M-ue,.01,Math.PI-.01)),De=Math.min(j,_e);this._helper._farZ=1.01*(Math.cos(Math.PI/2-c)*De+S),this._helper._nearZ=this._helper._height/50}_calcMatrices(){if(!this._helper._height)return;const n=this.centerOffset,c=Jt(this.worldSize,this.center),f=c.x,y=c.y;this._helper._pixelPerMeter=o.at(1,this.center.lat)*this.worldSize;const b=o.aq(Math.min(this.pitch,cr)),S=Math.max(this._helper.cameraToCenterDistance/2,this._helper.cameraToCenterDistance+this._helper._elevation*this._helper._pixelPerMeter/Math.cos(b));let M;this._calculateNearFarZIfNeeded(S,b,n),M=new Float64Array(16),o.bf(M,this.fovInRadians,this._helper._width/this._helper._height,this._helper._nearZ,this._helper._farZ),this._invProjMatrix=new Float64Array(16),o.aC(this._invProjMatrix,M),M[8]=2*-n.x/this._helper._width,M[9]=2*n.y/this._helper._height,this._projectionMatrix=o.bg(M),o.Q(M,M,[1,-1,1]),o.O(M,M,[0,0,-this._helper.cameraToCenterDistance]),o.bh(M,M,-this.rollInRadians),o.bi(M,M,this.pitchInRadians),o.bh(M,M,-this.bearingInRadians),o.O(M,M,[-f,-y,0]),this._mercatorMatrix=o.Q([],M,[this.worldSize,this.worldSize,this.worldSize]),o.Q(M,M,[1,1,this._helper._pixelPerMeter]),this._pixelMatrix=o.S(new Float64Array(16),this.clipSpaceToPixelsMatrix,M),o.O(M,M,[0,0,-this.elevation]),this._viewProjMatrix=M,this._invViewProjMatrix=o.aC([],M);const N=[0,0,-1,1];o.aI(N,N,this._invViewProjMatrix),this._cameraPosition=[N[0]/N[3],N[1]/N[3],N[2]/N[3]],this._fogMatrix=new Float64Array(16),o.bf(this._fogMatrix,this.fovInRadians,this.width/this.height,S,this._helper._farZ),this._fogMatrix[8]=2*-n.x/this.width,this._fogMatrix[9]=2*n.y/this.height,o.Q(this._fogMatrix,this._fogMatrix,[1,-1,1]),o.O(this._fogMatrix,this._fogMatrix,[0,0,-this.cameraToCenterDistance]),o.bh(this._fogMatrix,this._fogMatrix,-this.rollInRadians),o.bi(this._fogMatrix,this._fogMatrix,this.pitchInRadians),o.bh(this._fogMatrix,this._fogMatrix,-this.bearingInRadians),o.O(this._fogMatrix,this._fogMatrix,[-f,-y,0]),o.Q(this._fogMatrix,this._fogMatrix,[1,1,this._helper._pixelPerMeter]),o.O(this._fogMatrix,this._fogMatrix,[0,0,-this.elevation]),this._pixelMatrix3D=o.S(new Float64Array(16),this.clipSpaceToPixelsMatrix,M);const j=this._helper._width%2/2,q=this._helper._height%2/2,ne=Math.cos(this.bearingInRadians),te=Math.sin(-this.bearingInRadians),ue=f-Math.round(f)+ne*j+te*q,_e=y-Math.round(y)+ne*q+te*j,De=new Float64Array(M);if(o.O(De,De,[ue>.5?ue-1:ue,_e>.5?_e-1:_e,0]),this._alignedProjMatrix=De,M=o.aC(new Float64Array(16),this._pixelMatrix),!M)throw new Error("failed to invert matrix");this._pixelMatrixInverse=M,this._clearMatrixCaches()}_clearMatrixCaches(){this._posMatrixCache.clear(),this._alignedPosMatrixCache.clear(),this._fogMatrixCacheF32.clear()}maxPitchScaleFactor(){if(!this._pixelMatrixInverse)return 1;const n=this.screenPointToMercatorCoordinate(new o.P(0,0)),c=[n.x*this.worldSize,n.y*this.worldSize,0,1];return o.aI(c,c,this._pixelMatrix)[3]/this._helper.cameraToCenterDistance}getCameraPoint(){return this._helper.getCameraPoint()}getCameraAltitude(){return this._helper.getCameraAltitude()}getCameraLngLat(){const n=o.at(1,this.center.lat)*this.worldSize;return mt(this.center,this.elevation,this.pitch,this.bearing,this._helper.cameraToCenterDistance/n).toLngLat()}lngLatToCameraDepth(n,c){const f=o.ab.fromLngLat(n),y=[f.x*this.worldSize,f.y*this.worldSize,c,1];return o.aI(y,y,this._viewProjMatrix),y[2]/y[3]}getProjectionData(n){const{overscaledTileID:c,aligned:f,applyTerrainMatrix:y}=n,b=this._helper.getMercatorTileCoordinates(c),S=c?this.calculatePosMatrix(c,f,!0):null;let M;return M=c&&c.terrainRttPosMatrix32f&&y?c.terrainRttPosMatrix32f:S||o.bj(),{mainMatrix:M,tileMercatorCoords:b,clippingPlane:[0,0,0,0],projectionTransition:0,fallbackMatrix:M}}isLocationOccluded(n){return!1}getPixelScale(){return 1}getCircleRadiusCorrection(){return 1}getPitchedTextCorrection(n,c,f){return 1}transformLightDirection(n){return o.b2(n)}getRayDirectionFromPixel(n){throw new Error("Not implemented.")}projectTileCoordinates(n,c,f,y){const b=this.calculatePosMatrix(f);let S;y?(S=[n,c,y(n,c),1],o.aI(S,S,b)):(S=[n,c,0,1],IA(S,S,b));const M=S[3];return{point:new o.P(S[0]/M,S[1]/M),signedDistanceFromCamera:M,isOccluded:!1}}populateCache(n){for(const c of n)this.calculatePosMatrix(c)}getMatrixForModel(n,c){const f=o.ab.fromLngLat(n,c),y=f.meterInMercatorCoordinateUnits(),b=o.bk();return o.O(b,b,[f.x,f.y,f.z]),o.bh(b,b,Math.PI),o.bi(b,b,Math.PI/2),o.Q(b,b,[-y,y,y]),b}getProjectionDataForCustomLayer(n=!0){const c=new o.a2(0,0,0,0,0),f=this.getProjectionData({overscaledTileID:c,applyGlobeMatrix:n}),y=Tr(c,this.worldSize);o.S(y,this._viewProjMatrix,y),f.tileMercatorCoords=[0,0,1,1];const b=[o.a5,o.a5,this.worldSize/this._helper.pixelsPerMeter],S=o.bl();return o.Q(S,y,b),f.fallbackMatrix=S,f.mainMatrix=S,f}getFastPathSimpleProjectionMatrix(n){return this.calculatePosMatrix(n)}}function jo(){o.w("Map cannot fit within canvas with the given bounds, padding, and/or offset.")}function ua(x){if(x.useSlerp)if(x.k<1){const n=o.bm(x.startEulerAngles.roll,x.startEulerAngles.pitch,x.startEulerAngles.bearing),c=o.bm(x.endEulerAngles.roll,x.endEulerAngles.pitch,x.endEulerAngles.bearing),f=new Float64Array(4);o.bn(f,n,c,x.k);const y=o.bo(f);x.tr.setRoll(y.roll),x.tr.setPitch(y.pitch),x.tr.setBearing(y.bearing)}else x.tr.setRoll(x.endEulerAngles.roll),x.tr.setPitch(x.endEulerAngles.pitch),x.tr.setBearing(x.endEulerAngles.bearing);else x.tr.setRoll(o.G.number(x.startEulerAngles.roll,x.endEulerAngles.roll,x.k)),x.tr.setPitch(o.G.number(x.startEulerAngles.pitch,x.endEulerAngles.pitch,x.k)),x.tr.setBearing(o.G.number(x.startEulerAngles.bearing,x.endEulerAngles.bearing,x.k))}function sc(x,n,c,f,y){const b=y.padding,S=Jt(y.worldSize,c.getNorthWest()),M=Jt(y.worldSize,c.getNorthEast()),N=Jt(y.worldSize,c.getSouthEast()),j=Jt(y.worldSize,c.getSouthWest()),q=o.aq(-f),ne=S.rotate(q),te=M.rotate(q),ue=N.rotate(q),_e=j.rotate(q),De=new o.P(Math.max(ne.x,te.x,_e.x,ue.x),Math.max(ne.y,te.y,_e.y,ue.y)),ze=new o.P(Math.min(ne.x,te.x,_e.x,ue.x),Math.min(ne.y,te.y,_e.y,ue.y)),Oe=De.sub(ze),Ge=(y.width-(b.left+b.right+n.left+n.right))/Oe.x,lt=(y.height-(b.top+b.bottom+n.top+n.bottom))/Oe.y;if(lt<0||Ge<0)return void jo();const Ze=Math.min(o.au(y.scale*Math.min(Ge,lt)),x.maxZoom),At=o.P.convert(x.offset),ft=new o.P((n.left-n.right)/2,(n.top-n.bottom)/2).rotate(o.aq(f)),st=At.add(ft).mult(y.scale/o.ar(Ze));return{center:fr(y.worldSize,S.add(N).div(2).sub(st)),zoom:Ze,bearing:f}}class ha{get useGlobeControls(){return!1}handlePanInertia(n,c){const f=n.mag(),y=Math.abs(rn(c));return{easingOffset:n.mult(Math.min(.75*y/f,1)),easingCenter:c.center}}handleMapControlsRollPitchBearingZoom(n,c){n.bearingDelta&&c.setBearing(c.bearing+n.bearingDelta),n.pitchDelta&&c.setPitch(c.pitch+n.pitchDelta),n.rollDelta&&c.setRoll(c.roll+n.rollDelta),n.zoomDelta&&c.setZoom(c.zoom+n.zoomDelta)}handleMapControlsPan(n,c,f){n.around.distSqr(c.centerPoint)<.01||c.setLocationAtPoint(f,n.around)}cameraForBoxAndBearing(n,c,f,y,b){return sc(n,c,f,y,b)}handleJumpToCenterZoom(n,c){n.zoom!==(c.zoom!==void 0?+c.zoom:n.zoom)&&n.setZoom(+c.zoom),c.center!==void 0&&n.setCenter(o.V.convert(c.center))}handleEaseTo(n,c){const f=n.zoom,y=n.padding,b={roll:n.roll,pitch:n.pitch,bearing:n.bearing},S={roll:c.roll===void 0?n.roll:c.roll,pitch:c.pitch===void 0?n.pitch:c.pitch,bearing:c.bearing===void 0?n.bearing:c.bearing},M=c.zoom!==void 0,N=!n.isPaddingEqual(c.padding);let j=!1;const q=M?+c.zoom:n.zoom;let ne=n.centerPoint.add(c.offsetAsPoint);const te=n.screenPointToLocation(ne),{center:ue,zoom:_e}=n.applyConstrain(o.V.convert(c.center||te),q??f);Fa(n,ue);const De=Jt(n.worldSize,te),ze=Jt(n.worldSize,ue).sub(De),Oe=o.ar(_e-f);return j=_e!==f,{easeFunc:Ge=>{if(j&&n.setZoom(o.G.number(f,_e,Ge)),o.bp(b,S)||ua({startEulerAngles:b,endEulerAngles:S,tr:n,k:Ge,useSlerp:b.roll!=S.roll}),N&&(n.interpolatePadding(y,c.padding,Ge),ne=n.centerPoint.add(c.offsetAsPoint)),c.around)n.setLocationAtPoint(c.around,c.aroundPoint);else{const lt=o.ar(n.zoom-f),Ze=_e>f?Math.min(2,Oe):Math.max(.5,Oe),At=Math.pow(Ze,1-Ge),ft=fr(n.worldSize,De.add(ze.mult(Ge*At)).mult(lt));n.setLocationAtPoint(n.renderWorldCopies?ft.wrap():ft,ne)}},isZooming:j,elevationCenter:ue}}handleFlyTo(n,c){const f=c.zoom!==void 0,y=n.zoom,b=n.applyConstrain(o.V.convert(c.center||c.locationAtOffset),f?+c.zoom:y),S=b.center,M=b.zoom;Fa(n,S);const N=Jt(n.worldSize,c.locationAtOffset),j=Jt(n.worldSize,S).sub(N),q=j.mag(),ne=o.ar(M-y);let te;if(c.minZoom!==void 0){const ue=Math.min(+c.minZoom,y,M),_e=n.applyConstrain(S,ue).zoom;te=o.ar(_e-y)}return{easeFunc:(ue,_e,De,ze)=>{n.setZoom(ue===1?M:y+o.au(_e));const Oe=ue===1?S:fr(n.worldSize,N.add(j.mult(De)).mult(_e));n.setLocationAtPoint(n.renderWorldCopies?Oe.wrap():Oe,ze)},scaleOfZoom:ne,targetCenter:S,scaleOfMinZoom:te,pixelPathLength:q}}}class Qn{constructor(n,c,f){this.blendFunction=n,this.blendColor=c,this.mask=f}}Qn.Replace=[1,0],Qn.disabled=new Qn(Qn.Replace,o.bq.transparent,[!1,!1,!1,!1]),Qn.unblended=new Qn(Qn.Replace,o.bq.transparent,[!0,!0,!0,!0]),Qn.alphaBlended=new Qn([1,771],o.bq.transparent,[!0,!0,!0,!0]);const Vo=2305;class En{constructor(n,c,f){this.enable=n,this.mode=c,this.frontFace=f}}En.disabled=new En(!1,1029,Vo),En.backCCW=new En(!0,1029,Vo),En.frontCCW=new En(!0,1028,Vo);class mn{constructor(n,c,f){this.func=n,this.mask=c,this.range=f}}mn.ReadOnly=!1,mn.ReadWrite=!0,mn.disabled=new mn(519,mn.ReadOnly,[0,1]);const Ia=7680;class bn{constructor(n,c,f,y,b,S){this.test=n,this.ref=c,this.mask=f,this.fail=y,this.depthFail=b,this.pass=S}}bn.disabled=new bn({func:519,mask:0},0,0,Ia,Ia,Ia);const Go=new WeakMap;function Ei(x){var n;if(Go.has(x))return Go.get(x);{const c=(n=x.getParameter(x.VERSION))===null||n===void 0?void 0:n.startsWith("WebGL 2.0");return Go.set(x,c),c}}class ao{get awaitingQuery(){return!!this._readbackQueue}constructor(n){this._readbackWaitFrames=4,this._measureWaitFrames=6,this._texWidth=1,this._texHeight=1,this._measuredError=0,this._updateCount=0,this._lastReadbackFrame=-1e3,this._readbackQueue=null,this._cachedRenderContext=n;const c=n.context,f=c.gl;this._texFormat=f.RGBA,this._texType=f.UNSIGNED_BYTE;const y=new o.aX;y.emplaceBack(-1,-1),y.emplaceBack(2,-1),y.emplaceBack(-1,2);const b=new o.aZ;b.emplaceBack(0,1,2),this._fullscreenTriangle=new ii(c.createVertexBuffer(y,_s.members),c.createIndexBuffer(b),o.aY.simpleSegment(0,0,y.length,b.length)),this._resultBuffer=new Uint8Array(4),c.activeTexture.set(f.TEXTURE1);const S=f.createTexture();f.bindTexture(f.TEXTURE_2D,S),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_WRAP_S,f.CLAMP_TO_EDGE),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_WRAP_T,f.CLAMP_TO_EDGE),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MIN_FILTER,f.NEAREST),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MAG_FILTER,f.NEAREST),f.texImage2D(f.TEXTURE_2D,0,this._texFormat,this._texWidth,this._texHeight,0,this._texFormat,this._texType,null),this._fbo=c.createFramebuffer(this._texWidth,this._texHeight,!1,!1),this._fbo.colorAttachment.set(S),Ei(f)&&(this._pbo=f.createBuffer(),f.bindBuffer(f.PIXEL_PACK_BUFFER,this._pbo),f.bufferData(f.PIXEL_PACK_BUFFER,4,f.STREAM_READ),f.bindBuffer(f.PIXEL_PACK_BUFFER,null))}destroy(){const n=this._cachedRenderContext.context.gl;this._fullscreenTriangle.destroy(),this._fbo.destroy(),n.deleteBuffer(this._pbo),this._fullscreenTriangle=null,this._fbo=null,this._pbo=null,this._resultBuffer=null}updateErrorLoop(n,c){const f=this._updateCount;return this._readbackQueue?f>=this._readbackQueue.frameNumberIssued+this._readbackWaitFrames&&this._tryReadback():f>=this._lastReadbackFrame+this._measureWaitFrames&&this._renderErrorTexture(n,c),this._updateCount++,this._measuredError}_bindFramebuffer(){const n=this._cachedRenderContext.context,c=n.gl;n.activeTexture.set(c.TEXTURE1),c.bindTexture(c.TEXTURE_2D,this._fbo.colorAttachment.get()),n.bindFramebuffer.set(this._fbo.framebuffer)}_renderErrorTexture(n,c){const f=this._cachedRenderContext.context,y=f.gl;if(this._bindFramebuffer(),f.viewport.set([0,0,this._texWidth,this._texHeight]),f.clear({color:o.bq.transparent}),this._cachedRenderContext.useProgram("projectionErrorMeasurement").draw(f,y.TRIANGLES,mn.disabled,bn.disabled,Qn.unblended,En.disabled,((b,S)=>({u_input:b,u_output_expected:S}))(n,c),null,null,"$clipping",this._fullscreenTriangle.vertexBuffer,this._fullscreenTriangle.indexBuffer,this._fullscreenTriangle.segments),this._pbo&&Ei(y)){y.bindBuffer(y.PIXEL_PACK_BUFFER,this._pbo),y.readBuffer(y.COLOR_ATTACHMENT0),y.readPixels(0,0,this._texWidth,this._texHeight,this._texFormat,this._texType,0),y.bindBuffer(y.PIXEL_PACK_BUFFER,null);const b=y.fenceSync(y.SYNC_GPU_COMMANDS_COMPLETE,0);y.flush(),this._readbackQueue={frameNumberIssued:this._updateCount,sync:b}}else this._readbackQueue={frameNumberIssued:this._updateCount,sync:null}}_tryReadback(){const n=this._cachedRenderContext.context.gl;if(this._pbo&&this._readbackQueue&&Ei(n)){const c=n.clientWaitSync(this._readbackQueue.sync,0,0);if(c===n.WAIT_FAILED)return o.w("WebGL2 clientWaitSync failed."),this._readbackQueue=null,void(this._lastReadbackFrame=this._updateCount);if(c===n.TIMEOUT_EXPIRED)return;n.bindBuffer(n.PIXEL_PACK_BUFFER,this._pbo),n.getBufferSubData(n.PIXEL_PACK_BUFFER,0,this._resultBuffer,0,4),n.bindBuffer(n.PIXEL_PACK_BUFFER,null)}else this._bindFramebuffer(),n.readPixels(0,0,this._texWidth,this._texHeight,this._texFormat,this._texType,this._resultBuffer);this._readbackQueue=null,this._measuredError=ao._parseRGBA8float(this._resultBuffer),this._lastReadbackFrame=this._updateCount}static _parseRGBA8float(n){let c=0;return c+=n[0]/256,c+=n[1]/65536,c+=n[2]/16777216,n[3]<127&&(c=-c),c/128}}const da=o.a5/128;function V(x,n){const c=x.granularity!==void 0?Math.max(x.granularity,1):1,f=c+(x.generateBorders?2:0),y=c+(x.extendToNorthPole||x.generateBorders?1:0)+(x.extendToSouthPole||x.generateBorders?1:0),b=f+1,S=y+1,M=x.generateBorders?-1:0,N=x.generateBorders||x.extendToNorthPole?-1:0,j=c+(x.generateBorders?1:0),q=c+(x.generateBorders||x.extendToSouthPole?1:0),ne=b*S,te=f*y*6,ue=b*S>65536;if(ue&&n==="16bit")throw new Error("Granularity is too large and meshes would not fit inside 16 bit vertex indices.");const _e=ue||n==="32bit",De=new Int16Array(2*ne);let ze=0;for(let lt=N;lt<=q;lt++)for(let Ze=M;Ze<=j;Ze++){let At=Ze/c*o.a5;Ze===-1&&(At=-da),Ze===c+1&&(At=o.a5+da);let ft=lt/c*o.a5;lt===-1&&(ft=x.extendToNorthPole?o.bs:-da),lt===c+1&&(ft=x.extendToSouthPole?o.bt:o.a5+da),De[ze++]=At,De[ze++]=ft}const Oe=_e?new Uint32Array(te):new Uint16Array(te);let Ge=0;for(let lt=0;lt<y;lt++)for(let Ze=0;Ze<f;Ze++){const At=Ze+1+lt*b,ft=Ze+(lt+1)*b,st=Ze+1+(lt+1)*b;Oe[Ge++]=Ze+lt*b,Oe[Ge++]=ft,Oe[Ge++]=At,Oe[Ge++]=At,Oe[Ge++]=ft,Oe[Ge++]=st}return{vertices:De.buffer.slice(0),indices:Oe.buffer.slice(0),uses32bitIndices:_e}}const ye=new o.aW({fill:new o.bu(128,2),line:new o.bu(512,0),tile:new o.bu(128,32),stencil:new o.bu(128,1),circle:3});class tt{constructor(){this._tileMeshCache={},this._errorCorrectionUsable=0,this._errorMeasurementLastValue=0,this._errorCorrectionPreviousValue=0,this._errorMeasurementLastChangeTime=-1e3}get name(){return"vertical-perspective"}get transitionState(){return 1}get useSubdivision(){return!0}get shaderVariantName(){return"globe"}get shaderDefine(){return"#define GLOBE"}get shaderPreludeCode(){return Jn.projectionGlobe}get vertexShaderPreludeCode(){return Jn.projectionMercator.vertexSource}get subdivisionGranularity(){return ye}get useGlobeControls(){return!0}get latitudeErrorCorrectionRadians(){return this._errorCorrectionUsable}destroy(){this._errorMeasurement&&this._errorMeasurement.destroy()}updateGPUdependent(n){this._errorMeasurement||(this._errorMeasurement=new ao(n));const c=o.X(this._errorQueryLatitudeDegrees),f=2*Math.atan(Math.exp(Math.PI-c*Math.PI*2))-.5*Math.PI,y=this._errorMeasurement.updateErrorLoop(c,f),b=z();y!==this._errorMeasurementLastValue&&(this._errorCorrectionPreviousValue=this._errorCorrectionUsable,this._errorMeasurementLastValue=y,this._errorMeasurementLastChangeTime=b);const S=Math.min(Math.max((b-this._errorMeasurementLastChangeTime)/1e3/.5,0),1);this._errorCorrectionUsable=o.bv(this._errorCorrectionPreviousValue,-this._errorMeasurementLastValue,o.bw(S))}_getMeshKey(n){return`${n.granularity.toString(36)}_${n.generateBorders?"b":""}${n.extendToNorthPole?"n":""}${n.extendToSouthPole?"s":""}`}getMeshFromTileID(n,c,f,y,b){const S=(b==="stencil"?ye.stencil:ye.tile).getGranularityForZoomLevel(c.z);return this._getMesh(n,{granularity:S,generateBorders:f,extendToNorthPole:c.y===0&&y,extendToSouthPole:c.y===(1<<c.z)-1&&y})}_getMesh(n,c){const f=this._getMeshKey(c);if(f in this._tileMeshCache)return this._tileMeshCache[f];const y=(function(b,S){const M=V(S,"16bit"),N=o.aX.deserialize({arrayBuffer:M.vertices,length:M.vertices.byteLength/2/2}),j=o.aZ.deserialize({arrayBuffer:M.indices,length:M.indices.byteLength/2/3});return new ii(b.createVertexBuffer(N,_s.members),b.createIndexBuffer(j),o.aY.simpleSegment(0,0,N.length,j.length))})(n,c);return this._tileMeshCache[f]=y,y}recalculate(n){}hasTransition(){const n=z();let c=!1;return c=c||(n-this._errorMeasurementLastChangeTime)/1e3<.7,c=c||this._errorMeasurement&&this._errorMeasurement.awaitingQuery,c}setErrorQueryLatitudeDegrees(n){this._errorQueryLatitudeDegrees=n}}const gt=new o.t({type:new o.D(o.u.projection.type)});class It extends o.E{constructor(n){super(),this._transitionable=new o.x(gt,void 0),this.setProjection(n),this._transitioning=this._transitionable.untransitioned(),this.recalculate(new o.H(0)),this._mercatorProjection=new ws,this._verticalPerspectiveProjection=new tt}get transitionState(){const n=this.properties.get("type");if(typeof n=="string"&&n==="mercator")return 0;if(typeof n=="string"&&n==="vertical-perspective")return 1;if(n instanceof o.bx){if(n.from==="vertical-perspective"&&n.to==="mercator")return 1-n.transition;if(n.from==="mercator"&&n.to==="vertical-perspective")return n.transition}return 1}get useGlobeRendering(){return this.transitionState>0}get latitudeErrorCorrectionRadians(){return this._verticalPerspectiveProjection.latitudeErrorCorrectionRadians}get currentProjection(){return this.useGlobeRendering?this._verticalPerspectiveProjection:this._mercatorProjection}get name(){return"globe"}get useSubdivision(){return this.currentProjection.useSubdivision}get shaderVariantName(){return this.currentProjection.shaderVariantName}get shaderDefine(){return this.currentProjection.shaderDefine}get shaderPreludeCode(){return this.currentProjection.shaderPreludeCode}get vertexShaderPreludeCode(){return this.currentProjection.vertexShaderPreludeCode}get subdivisionGranularity(){return this.currentProjection.subdivisionGranularity}get useGlobeControls(){return this.transitionState>0}destroy(){this._mercatorProjection.destroy(),this._verticalPerspectiveProjection.destroy()}updateGPUdependent(n){this._mercatorProjection.updateGPUdependent(n),this._verticalPerspectiveProjection.updateGPUdependent(n)}getMeshFromTileID(n,c,f,y,b){return this.currentProjection.getMeshFromTileID(n,c,f,y,b)}setProjection(n){this._transitionable.setValue("type",n?.type||"mercator")}updateTransitions(n){this._transitioning=this._transitionable.transitioned(n,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()||this.currentProjection.hasTransition()}recalculate(n){this.properties=this._transitioning.possiblyEvaluate(n)}setErrorQueryLatitudeDegrees(n){this._verticalPerspectiveProjection.setErrorQueryLatitudeDegrees(n),this._mercatorProjection.setErrorQueryLatitudeDegrees(n)}}function Kt(x){const n=Kr(x.worldSize,x.center.lat);return 2*Math.PI*n}function sr(x,n,c,f,y){const b=1/(1<<y),S=n/o.a5*b+f*b,M=o.bz((x/o.a5*b+c*b)*Math.PI*2+Math.PI,2*Math.PI),N=2*Math.atan(Math.exp(Math.PI-S*Math.PI*2))-.5*Math.PI,j=Math.cos(N),q=new Float64Array(3);return q[0]=Math.sin(M)*j,q[1]=Math.sin(N),q[2]=Math.cos(M)*j,q}function Br(x){return(function(n,c){const f=Math.cos(c),y=new Float64Array(3);return y[0]=Math.sin(n)*f,y[1]=Math.sin(c),y[2]=Math.cos(n)*f,y})(x.lng*Math.PI/180,x.lat*Math.PI/180)}function Kr(x,n){return x/(2*Math.PI)/Math.cos(n*Math.PI/180)}function gn(x){const n=Math.asin(x[1])/Math.PI*180,c=Math.sqrt(x[0]*x[0]+x[2]*x[2]);if(c>1e-6){const f=x[0]/c,y=Math.acos(x[2]/c),b=(f>0?y:-y)/Math.PI*180;return new o.V(o.W(b,-180,180),n)}return new o.V(0,n)}function yn(x){return Math.cos(x*Math.PI/180)}function An(x,n){const c=yn(x),f=yn(n);return o.au(f/c)}function Hi(x,n){const c=x.rotate(n.bearingInRadians),f=n.zoom+An(n.center.lat,0),y=o.bv(1/yn(n.center.lat),1/yn(Math.min(Math.abs(n.center.lat),60)),o.by(f,7,3,0,1)),b=360/Kt({worldSize:n.worldSize,center:{lat:n.center.lat}});return new o.V(n.center.lng-c.x*b*y,o.ao(n.center.lat+c.y*b,-o.ap,o.ap))}function is(x){const n=.5*x,c=Math.sin(n),f=Math.cos(n);return Math.log(c+f)-Math.log(f-c)}function Si(x,n,c,f){const y=x.lat+c*f;if(Math.abs(c)>1){const b=(Math.sign(x.lat+c)!==Math.sign(x.lat)?-Math.abs(x.lat):Math.abs(x.lat))*Math.PI/180,S=Math.abs(x.lat+c)*Math.PI/180,M=is(b+f*(S-b)),N=is(b),j=is(S);return new o.V(x.lng+n*((M-N)/(j-N)),y)}return new o.V(x.lng+n*f,y)}class Ds{constructor(n){this._cachePrevious=new Map,this._cache=new Map,this._hadAnyChanges=!1,this._boundingVolumeFactory=n}swapBuffers(){if(!this._hadAnyChanges)return;const n=this._cachePrevious;this._cachePrevious=this._cache,this._cache=n,this._cache.clear(),this._hadAnyChanges=!1}getTileBoundingVolume(n,c,f,y){const b=`${n.z}_${n.x}_${n.y}_${y?.terrain?"t":""}`,S=this._cache.get(b);if(S)return S;const M=this._cachePrevious.get(b);if(M)return this._cache.set(b,M),M;const N=this._boundingVolumeFactory(n,c,f,y);return this._cache.set(b,N),this._hadAnyChanges=!0,N}}class Li{constructor(n,c,f,y){this.min=f,this.max=y,this.points=n,this.planes=c}static fromAabb(n,c){const f=[];for(let y=0;y<8;y++)f.push([1&~y?n[0]:c[0],(y>>1&1)==1?c[1]:n[1],(y>>2&1)==1?c[2]:n[2]]);return new Li(f,[[-1,0,0,c[0]],[1,0,0,-n[0]],[0,-1,0,c[1]],[0,1,0,-n[1]],[0,0,-1,c[2]],[0,0,1,-n[2]]],n,c)}static fromCenterSizeAngles(n,c,f){const y=o.bC([],f[0],f[1],f[2]),b=o.bD([],[c[0],0,0],y),S=o.bD([],[0,c[1],0],y),M=o.bD([],[0,0,c[2]],y),N=[...n],j=[...n];for(let ne=0;ne<8;ne++)for(let te=0;te<3;te++){const ue=n[te]+b[te]*(1&~ne?-1:1)+S[te]*((ne>>1&1)==1?1:-1)+M[te]*((ne>>2&1)==1?1:-1);N[te]=Math.min(N[te],ue),j[te]=Math.max(j[te],ue)}const q=[];for(let ne=0;ne<8;ne++){const te=[...n];o.b1(te,te,o.b0([],b,1&~ne?-1:1)),o.b1(te,te,o.b0([],S,(ne>>1&1)==1?1:-1)),o.b1(te,te,o.b0([],M,(ne>>2&1)==1?1:-1)),q.push(te)}return new Li(q,[[...b,-o.b6(b,q[0])],[...S,-o.b6(S,q[0])],[...M,-o.b6(M,q[0])],[-b[0],-b[1],-b[2],-o.b6(b,q[7])],[-S[0],-S[1],-S[2],-o.b6(S,q[7])],[-M[0],-M[1],-M[2],-o.b6(M,q[7])]],N,j)}intersectsFrustum(n){let c=!0;const f=this.points.length,y=this.planes.length,b=n.planes.length,S=n.points.length;for(let M=0;M<b;M++){const N=n.planes[M];let j=0;for(let q=0;q<f;q++){const ne=this.points[q];N[0]*ne[0]+N[1]*ne[1]+N[2]*ne[2]+N[3]>=0&&j++}if(j===0)return 0;j<f&&(c=!1)}if(c)return 2;for(let M=0;M<y;M++){const N=this.planes[M];let j=0;for(let q=0;q<S;q++){const ne=n.points[q];N[0]*ne[0]+N[1]*ne[1]+N[2]*ne[2]+N[3]>=0&&j++}if(j===0)return 0}return 1}intersectsPlane(n){const c=this.points.length;let f=0;for(let y=0;y<c;y++){const b=this.points[y];n[0]*b[0]+n[1]*b[1]+n[2]*b[2]+n[3]>=0&&f++}return f===c?2:f===0?0:1}}function xs(x,n,c){const f=x-n;return f<0?-f:Math.max(0,f-c)}function Ko(x,n,c,f,y){const b=x-c;let S;return S=b<0?Math.min(-b,1+b-y):b>1?Math.min(Math.max(b-y,0),1-b):0,Math.max(S,xs(n,f,y))}class fa{constructor(){this._boundingVolumeCache=new Ds(this._computeTileBoundingVolume)}prepareNextFrame(){this._boundingVolumeCache.swapBuffers()}distanceToTile2d(n,c,f,y){const b=1<<f.z,S=1/b,M=f.x/b,N=f.y/b;let j=2;return j=Math.min(j,Ko(n,c,M,N,S)),j=Math.min(j,Ko(n,c,M+.5,-N-S,S)),j=Math.min(j,Ko(n,c,M+.5,2-N-S,S)),j}getWrap(n,c,f){const y=1<<c.z,b=1/y,S=c.x/y,M=xs(n.x,S,b),N=xs(n.x,S-1,b),j=xs(n.x,S+1,b),q=Math.min(M,N,j);return q===j?1:q===N?-1:0}allowVariableZoom(n,c){return xr(n,c)>4}allowWorldCopies(){return!1}getTileBoundingVolume(n,c,f,y){return this._boundingVolumeCache.getTileBoundingVolume(n,c,f,y)}_computeTileBoundingVolume(n,c,f,y){var b,S;let M=0,N=0;if(y?.terrain){const j=new o.a2(n.z,c,n.z,n.x,n.y),q=y.terrain.getMinMaxElevation(j);M=(b=q.minElevation)!==null&&b!==void 0?b:Math.min(0,f),N=(S=q.maxElevation)!==null&&S!==void 0?S:Math.max(0,f)}if(M/=o.bF,N/=o.bF,M+=1,N+=1,n.z<=0)return Li.fromAabb([-N,-N,-N],[N,N,N]);if(n.z===1)return Li.fromAabb([n.x===0?-N:0,n.y===0?0:-N,-N],[n.x===0?0:N,n.y===0?N:0,N]);{const j=[sr(0,0,n.x,n.y,n.z),sr(o.a5,0,n.x,n.y,n.z),sr(o.a5,o.a5,n.x,n.y,n.z),sr(0,o.a5,n.x,n.y,n.z)],q=[];for(const Rt of j)q.push(o.b0([],Rt,N));if(N!==M)for(const Rt of j)q.push(o.b0([],Rt,M));n.y===0&&q.push([0,1,0]),n.y===(1<<n.z)-1&&q.push([0,-1,0]);const ne=[1,1,1],te=[-1,-1,-1];for(const Rt of q)for(let Qt=0;Qt<3;Qt++)ne[Qt]=Math.min(ne[Qt],Rt[Qt]),te[Qt]=Math.max(te[Qt],Rt[Qt]);const ue=sr(o.a5/2,o.a5/2,n.x,n.y,n.z),_e=o.b5([],[0,1,0],ue);o.b4(_e,_e);const De=o.b5([],ue,_e);o.b4(De,De);const ze=o.b5([],j[2],j[1]);o.b4(ze,ze);const Oe=o.b5([],j[0],j[3]);o.b4(Oe,Oe),q.push(o.b0([],ue,N)),n.y>=(1<<n.z)/2&&q.push(o.b0([],sr(o.a5/2,0,n.x,n.y,n.z),N)),n.y<(1<<n.z)/2&&q.push(o.b0([],sr(o.a5/2,o.a5,n.x,n.y,n.z),N));const Ge=pa(ue,q),lt=pa(De,q),Ze=[-ue[0],-ue[1],-ue[2],Ge.max],At=[ue[0],ue[1],ue[2],-Ge.min],ft=[-De[0],-De[1],-De[2],lt.max],st=[De[0],De[1],De[2],-lt.min],wt=[...ze,0],Dt=[...Oe,0],Lt=[];return n.y===0?Lt.push(o.bE(Dt,wt,Ze),o.bE(Dt,wt,At)):Lt.push(o.bE(ft,wt,Ze),o.bE(ft,wt,At),o.bE(ft,Dt,Ze),o.bE(ft,Dt,At)),n.y===(1<<n.z)-1?Lt.push(o.bE(Dt,wt,Ze),o.bE(Dt,wt,At)):Lt.push(o.bE(st,wt,Ze),o.bE(st,wt,At),o.bE(st,Dt,Ze),o.bE(st,Dt,At)),new Li(Lt,[Ze,At,ft,st,wt,Dt],ne,te)}}}function pa(x,n){let c=1/0,f=-1/0;for(const y of n){const b=o.b6(x,y);c=Math.min(c,b),f=Math.max(f,b)}return{min:c,max:f}}class Ta{get pixelsToClipSpaceMatrix(){return this._helper.pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._helper.clipSpaceToPixelsMatrix}get pixelsToGLUnits(){return this._helper.pixelsToGLUnits}get centerOffset(){return this._helper.centerOffset}get size(){return this._helper.size}get rotationMatrix(){return this._helper.rotationMatrix}get centerPoint(){return this._helper.centerPoint}get pixelsPerMeter(){return this._helper.pixelsPerMeter}setMinZoom(n){this._helper.setMinZoom(n)}setMaxZoom(n){this._helper.setMaxZoom(n)}setMinPitch(n){this._helper.setMinPitch(n)}setMaxPitch(n){this._helper.setMaxPitch(n)}setRenderWorldCopies(n){this._helper.setRenderWorldCopies(n)}setBearing(n){this._helper.setBearing(n)}setPitch(n){this._helper.setPitch(n)}setRoll(n){this._helper.setRoll(n)}setFov(n){this._helper.setFov(n)}setZoom(n){this._helper.setZoom(n)}setCenter(n){this._helper.setCenter(n)}setElevation(n){this._helper.setElevation(n)}setMinElevationForCurrentTile(n){this._helper.setMinElevationForCurrentTile(n)}setPadding(n){this._helper.setPadding(n)}interpolatePadding(n,c,f){return this._helper.interpolatePadding(n,c,f)}isPaddingEqual(n){return this._helper.isPaddingEqual(n)}resize(n,c){this._helper.resize(n,c)}getMaxBounds(){return this._helper.getMaxBounds()}setMaxBounds(n){this._helper.setMaxBounds(n)}setConstrainOverride(n){this._helper.setConstrainOverride(n)}overrideNearFarZ(n,c){this._helper.overrideNearFarZ(n,c)}clearNearFarZOverride(){this._helper.clearNearFarZOverride()}getCameraQueryGeometry(n){return this._helper.getCameraQueryGeometry(this.getCameraPoint(),n)}get tileSize(){return this._helper.tileSize}get tileZoom(){return this._helper.tileZoom}get scale(){return this._helper.scale}get worldSize(){return this._helper.worldSize}get width(){return this._helper.width}get height(){return this._helper.height}get lngRange(){return this._helper.lngRange}get latRange(){return this._helper.latRange}get minZoom(){return this._helper.minZoom}get maxZoom(){return this._helper.maxZoom}get zoom(){return this._helper.zoom}get center(){return this._helper.center}get minPitch(){return this._helper.minPitch}get maxPitch(){return this._helper.maxPitch}get pitch(){return this._helper.pitch}get pitchInRadians(){return this._helper.pitchInRadians}get roll(){return this._helper.roll}get rollInRadians(){return this._helper.rollInRadians}get bearing(){return this._helper.bearing}get bearingInRadians(){return this._helper.bearingInRadians}get fov(){return this._helper.fov}get fovInRadians(){return this._helper.fovInRadians}get elevation(){return this._helper.elevation}get minElevationForCurrentTile(){return this._helper.minElevationForCurrentTile}get padding(){return this._helper.padding}get unmodified(){return this._helper.unmodified}get renderWorldCopies(){return this._helper.renderWorldCopies}get constrainOverride(){return this._helper.constrainOverride}get nearZ(){return this._helper.nearZ}get farZ(){return this._helper.farZ}get autoCalculateNearFarZ(){return this._helper.autoCalculateNearFarZ}setTransitionState(n){}constructor(n){this._cachedClippingPlane=o.bG(),this._projectionMatrix=o.bk(),this._globeViewProjMatrix32f=o.bj(),this._globeViewProjMatrixNoCorrection=o.bk(),this._globeViewProjMatrixNoCorrectionInverted=o.bk(),this._globeProjMatrixInverted=o.bk(),this._cameraPosition=o.bA(),this._globeLatitudeErrorCorrectionRadians=0,this.defaultConstrain=(c,f)=>{const y=o.ao(c.lat,-o.ap,o.ap),b=o.ao(+f,this.minZoom+An(0,y),this.maxZoom);return{center:new o.V(c.lng,y),zoom:b}},this.applyConstrain=(c,f)=>this._helper.applyConstrain(c,f),this._helper=new Aa({calcMatrices:()=>{this._calcMatrices()},defaultConstrain:(c,f)=>this.defaultConstrain(c,f)},n),this._coveringTilesDetailsProvider=new fa}clone(){const n=new Ta;return n.apply(this),n}apply(n,c){this._globeLatitudeErrorCorrectionRadians=c||0,this._helper.apply(n)}get projectionMatrix(){return this._projectionMatrix}get modelViewProjectionMatrix(){return this._globeViewProjMatrixNoCorrection}get inverseProjectionMatrix(){return this._globeProjMatrixInverted}get cameraPosition(){const n=o.bA();return n[0]=this._cameraPosition[0],n[1]=this._cameraPosition[1],n[2]=this._cameraPosition[2],n}get cameraToCenterDistance(){return this._helper.cameraToCenterDistance}getProjectionData(n){const{overscaledTileID:c,applyGlobeMatrix:f}=n,y=this._helper.getMercatorTileCoordinates(c);return{mainMatrix:this._globeViewProjMatrix32f,tileMercatorCoords:y,clippingPlane:this._cachedClippingPlane,projectionTransition:f?1:0,fallbackMatrix:this._globeViewProjMatrix32f}}_computeClippingPlane(n){const c=this.pitchInRadians,f=this.cameraToCenterDistance/n,y=Math.sin(c)*f,b=Math.cos(c)*f+1,S=1/Math.sqrt(y*y+b*b)*1;let M=-y,N=b;const j=Math.sqrt(M*M+N*N);M/=j,N/=j;const q=[0,M,N];o.bH(q,q,[0,0,0],-this.bearingInRadians),o.bI(q,q,[0,0,0],-1*this.center.lat*Math.PI/180),o.bJ(q,q,[0,0,0],this.center.lng*Math.PI/180);const ne=1/o.b8(q);return o.b0(q,q,ne),[...q,-S*ne]}isLocationOccluded(n){return!this.isSurfacePointVisible(Br(n))}transformLightDirection(n){const c=this._helper._center.lng*Math.PI/180,f=this._helper._center.lat*Math.PI/180,y=Math.cos(f),b=[Math.sin(c)*y,Math.sin(f),Math.cos(c)*y],S=[b[2],0,-b[0]],M=[0,0,0];o.b5(M,S,b),o.b4(S,S),o.b4(M,M);const N=[0,0,0];return o.b4(N,[S[0]*n[0]+M[0]*n[1]+b[0]*n[2],S[1]*n[0]+M[1]*n[1]+b[1]*n[2],S[2]*n[0]+M[2]*n[1]+b[2]*n[2]]),N}getPixelScale(){return 1/Math.cos(this._helper._center.lat*Math.PI/180)}getCircleRadiusCorrection(){return Math.cos(this._helper._center.lat*Math.PI/180)}getPitchedTextCorrection(n,c,f){const y=(function(M,N,j){const q=1/(1<<j.z);return new o.ab(M/o.a5*q+j.x*q,N/o.a5*q+j.y*q)})(n,c,f.canonical),b=(S=y.y,[o.bz(y.x*Math.PI*2+Math.PI,2*Math.PI),2*Math.atan(Math.exp(Math.PI-S*Math.PI*2))-.5*Math.PI]);var S;return this.getCircleRadiusCorrection()/Math.cos(b[1])}projectTileCoordinates(n,c,f,y){const b=f.canonical,S=sr(n,c,b.x,b.y,b.z),M=1+(y?y(n,c):0)/o.bF,N=[S[0]*M,S[1]*M,S[2]*M,1];o.aI(N,N,this._globeViewProjMatrixNoCorrection);const j=this._cachedClippingPlane,q=j[0]*S[0]+j[1]*S[1]+j[2]*S[2]+j[3]<0;return{point:new o.P(N[0]/N[3],N[1]/N[3]),signedDistanceFromCamera:N[3],isOccluded:q}}_calcMatrices(){if(!this._helper._width||!this._helper._height)return;const n=Kr(this.worldSize,this.center.lat),c=o.bl(),f=o.bl();this._helper.autoCalculateNearFarZ&&(this._helper._nearZ=.5,this._helper._farZ=this.cameraToCenterDistance+2*n),o.bf(c,this.fovInRadians,this.width/this.height,this._helper._nearZ,this._helper._farZ);const y=this.centerOffset;c[8]=2*-y.x/this._helper._width,c[9]=2*y.y/this._helper._height,this._projectionMatrix=o.bg(c),this._globeProjMatrixInverted=o.bl(),o.aC(this._globeProjMatrixInverted,c),o.O(c,c,[0,0,-this.cameraToCenterDistance]),o.bh(c,c,this.rollInRadians),o.bi(c,c,-this.pitchInRadians),o.bh(c,c,this.bearingInRadians),o.O(c,c,[0,0,-n]);const b=o.bA();b[0]=n,b[1]=n,b[2]=n,o.bi(f,c,this.center.lat*Math.PI/180),o.bK(f,f,-this.center.lng*Math.PI/180),o.Q(f,f,b),this._globeViewProjMatrixNoCorrection=f,o.bi(c,c,this.center.lat*Math.PI/180-this._globeLatitudeErrorCorrectionRadians),o.bK(c,c,-this.center.lng*Math.PI/180),o.Q(c,c,b),this._globeViewProjMatrix32f=new Float32Array(c),this._globeViewProjMatrixNoCorrectionInverted=o.bl(),o.aC(this._globeViewProjMatrixNoCorrectionInverted,f);const S=o.bA();this._cameraPosition=o.bA(),this._cameraPosition[2]=this.cameraToCenterDistance/n,o.bH(this._cameraPosition,this._cameraPosition,S,-this.rollInRadians),o.bI(this._cameraPosition,this._cameraPosition,S,this.pitchInRadians),o.bH(this._cameraPosition,this._cameraPosition,S,-this.bearingInRadians),o.b1(this._cameraPosition,this._cameraPosition,[0,0,1]),o.bI(this._cameraPosition,this._cameraPosition,S,-this.center.lat*Math.PI/180),o.bJ(this._cameraPosition,this._cameraPosition,S,this.center.lng*Math.PI/180),this._cachedClippingPlane=this._computeClippingPlane(n);const M=o.bg(this._globeViewProjMatrixNoCorrectionInverted);o.Q(M,M,[1,1,-1]),this._cachedFrustum=qs.fromInvProjectionMatrix(M,1,0,this._cachedClippingPlane,!0)}calculateFogMatrix(n){o.w("calculateFogMatrix is not supported on globe projection.");const c=o.bl();return o.as(c),c}getVisibleUnwrappedCoordinates(n){return[new o.bd(0,n)]}getCameraFrustum(){return this._cachedFrustum}getClippingPlane(){return this._cachedClippingPlane}getCoveringTilesDetailsProvider(){return this._coveringTilesDetailsProvider}recalculateZoomAndCenter(n){n&&o.w("terrain is not fully supported on vertical perspective projection."),this._helper.recalculateZoomAndCenter(0)}maxPitchScaleFactor(){return 1}getCameraPoint(){return this._helper.getCameraPoint()}getCameraAltitude(){return this._helper.getCameraAltitude()}getCameraLngLat(){return this._helper.getCameraLngLat()}lngLatToCameraDepth(n,c){if(!this._globeViewProjMatrixNoCorrection)return 1;const f=Br(n);o.b0(f,f,1+c/o.bF);const y=o.bG();return o.aI(y,[f[0],f[1],f[2],1],this._globeViewProjMatrixNoCorrection),y[2]/y[3]}populateCache(n){}getBounds(){const n=.5*this.width,c=.5*this.height,f=[new o.P(0,0),new o.P(n,0),new o.P(this.width,0),new o.P(this.width,c),new o.P(this.width,this.height),new o.P(n,this.height),new o.P(0,this.height),new o.P(0,c)],y=[];for(const ne of f)y.push(this.unprojectScreenPoint(ne));let b=0,S=0,M=0,N=0;const j=this.center;for(const ne of y){const te=o.bL(j.lng,ne.lng),ue=o.bL(j.lat,ne.lat);te<S&&(S=te),te>b&&(b=te),ue<N&&(N=ue),ue>M&&(M=ue)}const q=[j.lng+S,j.lat+N,j.lng+b,j.lat+M];return this.isSurfacePointOnScreen([0,1,0])&&(q[3]=90,q[0]=-180,q[2]=180),this.isSurfacePointOnScreen([0,-1,0])&&(q[1]=-90,q[0]=-180,q[2]=180),new kr(q)}calculateCenterFromCameraLngLatAlt(n,c,f,y){return this._helper.calculateCenterFromCameraLngLatAlt(n,c,f,y)}setLocationAtPoint(n,c){const f=Br(this.unprojectScreenPoint(c)),y=Br(n),b=o.bA();o.bM(b);const S=o.bA();o.bJ(S,f,b,-this.center.lng*Math.PI/180),o.bI(S,S,b,this.center.lat*Math.PI/180);const M=y[0]*y[0]+y[2]*y[2],N=S[0]*S[0];if(M<N)return;const j=Math.sqrt(M-N),q=-j,ne=o.bN(y[0],y[2],S[0],j),te=o.bN(y[0],y[2],S[0],q),ue=o.bA();o.bJ(ue,y,b,-ne);const _e=o.bN(ue[1],ue[2],S[1],S[2]),De=o.bA();o.bJ(De,y,b,-te);const ze=o.bN(De[1],De[2],S[1],S[2]),Oe=.5*Math.PI,Ge=_e>=-Oe&&_e<=Oe,lt=ze>=-Oe&&ze<=Oe;let Ze,At;if(Ge&&lt){const Dt=this.center.lng*Math.PI/180,Lt=this.center.lat*Math.PI/180;o.bO(ne,Dt)+o.bO(_e,Lt)<o.bO(te,Dt)+o.bO(ze,Lt)?(Ze=ne,At=_e):(Ze=te,At=ze)}else if(Ge)Ze=ne,At=_e;else{if(!lt)return;Ze=te,At=ze}const ft=Ze/Math.PI*180,st=At/Math.PI*180,wt=this.center.lat;this.setCenter(new o.V(ft,o.ao(st,-90,90))),this.setZoom(this.zoom+An(wt,this.center.lat))}locationToScreenPoint(n,c){const f=Br(n);if(c){const y=c.getElevationForLngLatZoom(n,this._helper._tileZoom);o.b0(f,f,1+y/o.bF)}return this._projectSurfacePointToScreen(f)}_projectSurfacePointToScreen(n){const c=o.bG();return o.aI(c,[...n,1],this._globeViewProjMatrixNoCorrection),c[0]/=c[3],c[1]/=c[3],new o.P((.5*c[0]+.5)*this.width,(.5*-c[1]+.5)*this.height)}screenPointToMercatorCoordinate(n,c){if(c){const f=c.pointCoordinate(n);if(f)return f}return o.ab.fromLngLat(this.unprojectScreenPoint(n))}screenPointToLocation(n,c){var f;return(f=this.screenPointToMercatorCoordinate(n,c))===null||f===void 0?void 0:f.toLngLat()}isPointOnMapSurface(n,c){const f=this._cameraPosition,y=this.getRayDirectionFromPixel(n);return!!this.rayPlanetIntersection(f,y)}getRayDirectionFromPixel(n){const c=o.bG();c[0]=n.x/this.width*2-1,c[1]=-1*(n.y/this.height*2-1),c[2]=1,c[3]=1,o.aI(c,c,this._globeViewProjMatrixNoCorrectionInverted),c[0]/=c[3],c[1]/=c[3],c[2]/=c[3];const f=o.bA();f[0]=c[0]-this._cameraPosition[0],f[1]=c[1]-this._cameraPosition[1],f[2]=c[2]-this._cameraPosition[2];const y=o.bA();return o.b4(y,f),y}isSurfacePointVisible(n){const c=this._cachedClippingPlane;return c[0]*n[0]+c[1]*n[1]+c[2]*n[2]+c[3]>=0}isSurfacePointOnScreen(n){if(!this.isSurfacePointVisible(n))return!1;const c=o.bG();return o.aI(c,[...n,1],this._globeViewProjMatrixNoCorrection),c[0]/=c[3],c[1]/=c[3],c[2]/=c[3],c[0]>-1&&c[0]<1&&c[1]>-1&&c[1]<1&&c[2]>-1&&c[2]<1}rayPlanetIntersection(n,c){const f=o.b6(n,c),y=o.bA(),b=o.bA();o.b0(b,c,f),o.b3(y,n,b);const S=1-o.b6(y,y);if(S<0)return null;const M=o.b6(n,n)-1,N=-f+(f<0?1:-1)*Math.sqrt(S),j=M/N,q=N;return{tMin:Math.min(j,q),tMax:Math.max(j,q)}}unprojectScreenPoint(n){const c=this._cameraPosition,f=this.getRayDirectionFromPixel(n),y=this.rayPlanetIntersection(c,f);if(y){const q=o.bA();o.b1(q,c,[f[0]*y.tMin,f[1]*y.tMin,f[2]*y.tMin]);const ne=o.bA();return o.b4(ne,q),gn(ne)}const b=this._cachedClippingPlane,S=b[0]*f[0]+b[1]*f[1]+b[2]*f[2],M=-o.bc(b,c)/S,N=o.bA();if(M>0)o.b1(N,c,[f[0]*M,f[1]*M,f[2]*M]);else{const q=o.bA();o.b1(q,c,[2*f[0],2*f[1],2*f[2]]);const ne=o.bc(this._cachedClippingPlane,q);o.b3(N,q,[this._cachedClippingPlane[0]*ne,this._cachedClippingPlane[1]*ne,this._cachedClippingPlane[2]*ne])}const j=(function(q){const ne=o.bA();return ne[0]=q[0]*-q[3],ne[1]=q[1]*-q[3],ne[2]=q[2]*-q[3],{center:ne,radius:Math.sqrt(1-q[3]*q[3])}})(b);return gn((function(q,ne,te){const ue=o.bA();o.b3(ue,te,q);const _e=o.bA();return o.bB(_e,q,ue,ne/o.ba(ue)),_e})(j.center,j.radius,N))}getMatrixForModel(n,c){const f=o.V.convert(n),y=1/o.bF,b=o.bk();return o.bK(b,b,f.lng/180*Math.PI),o.bi(b,b,-f.lat/180*Math.PI),o.O(b,b,[0,0,1+c/o.bF]),o.bi(b,b,.5*Math.PI),o.Q(b,b,[y,y,y]),b}getProjectionDataForCustomLayer(n=!0){const c=this.getProjectionData({overscaledTileID:new o.a2(0,0,0,0,0),applyGlobeMatrix:n});return c.tileMercatorCoords=[0,0,1,1],c}getFastPathSimpleProjectionMatrix(n){}}class hl{get pixelsToClipSpaceMatrix(){return this._helper.pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._helper.clipSpaceToPixelsMatrix}get pixelsToGLUnits(){return this._helper.pixelsToGLUnits}get centerOffset(){return this._helper.centerOffset}get size(){return this._helper.size}get rotationMatrix(){return this._helper.rotationMatrix}get centerPoint(){return this._helper.centerPoint}get pixelsPerMeter(){return this._helper.pixelsPerMeter}setMinZoom(n){this._helper.setMinZoom(n)}setMaxZoom(n){this._helper.setMaxZoom(n)}setMinPitch(n){this._helper.setMinPitch(n)}setMaxPitch(n){this._helper.setMaxPitch(n)}setRenderWorldCopies(n){this._helper.setRenderWorldCopies(n)}setBearing(n){this._helper.setBearing(n)}setPitch(n){this._helper.setPitch(n)}setRoll(n){this._helper.setRoll(n)}setFov(n){this._helper.setFov(n)}setZoom(n){this._helper.setZoom(n)}setCenter(n){this._helper.setCenter(n)}setElevation(n){this._helper.setElevation(n)}setMinElevationForCurrentTile(n){this._helper.setMinElevationForCurrentTile(n)}setPadding(n){this._helper.setPadding(n)}interpolatePadding(n,c,f){return this._helper.interpolatePadding(n,c,f)}isPaddingEqual(n){return this._helper.isPaddingEqual(n)}resize(n,c,f=!0){this._helper.resize(n,c,f)}getMaxBounds(){return this._helper.getMaxBounds()}setMaxBounds(n){this._helper.setMaxBounds(n)}setConstrainOverride(n){this._helper.setConstrainOverride(n)}overrideNearFarZ(n,c){this._helper.overrideNearFarZ(n,c)}clearNearFarZOverride(){this._helper.clearNearFarZOverride()}getCameraQueryGeometry(n){return this._helper.getCameraQueryGeometry(this.getCameraPoint(),n)}get tileSize(){return this._helper.tileSize}get tileZoom(){return this._helper.tileZoom}get scale(){return this._helper.scale}get worldSize(){return this._helper.worldSize}get width(){return this._helper.width}get height(){return this._helper.height}get lngRange(){return this._helper.lngRange}get latRange(){return this._helper.latRange}get minZoom(){return this._helper.minZoom}get maxZoom(){return this._helper.maxZoom}get zoom(){return this._helper.zoom}get center(){return this._helper.center}get minPitch(){return this._helper.minPitch}get maxPitch(){return this._helper.maxPitch}get pitch(){return this._helper.pitch}get pitchInRadians(){return this._helper.pitchInRadians}get roll(){return this._helper.roll}get rollInRadians(){return this._helper.rollInRadians}get bearing(){return this._helper.bearing}get bearingInRadians(){return this._helper.bearingInRadians}get fov(){return this._helper.fov}get fovInRadians(){return this._helper.fovInRadians}get elevation(){return this._helper.elevation}get minElevationForCurrentTile(){return this._helper.minElevationForCurrentTile}get padding(){return this._helper.padding}get unmodified(){return this._helper.unmodified}get renderWorldCopies(){return this._helper.renderWorldCopies}get cameraToCenterDistance(){return this._helper.cameraToCenterDistance}get constrainOverride(){return this._helper.constrainOverride}get nearZ(){return this._helper.nearZ}get farZ(){return this._helper.farZ}get autoCalculateNearFarZ(){return this._helper.autoCalculateNearFarZ}get isGlobeRendering(){return this._globeness>0}setTransitionState(n,c){this._globeness=n,this._globeLatitudeErrorCorrectionRadians=c,this._calcMatrices(),this._verticalPerspectiveTransform.getCoveringTilesDetailsProvider().prepareNextFrame(),this._mercatorTransform.getCoveringTilesDetailsProvider().prepareNextFrame()}get currentTransform(){return this.isGlobeRendering?this._verticalPerspectiveTransform:this._mercatorTransform}constructor(n){this._globeLatitudeErrorCorrectionRadians=0,this._globeness=1,this.defaultConstrain=(c,f)=>this.currentTransform.defaultConstrain(c,f),this.applyConstrain=(c,f)=>this._helper.applyConstrain(c,f),this._helper=new Aa({calcMatrices:()=>{this._calcMatrices()},defaultConstrain:(c,f)=>this.defaultConstrain(c,f)},n),this._globeness=1,this._mercatorTransform=new ul,this._verticalPerspectiveTransform=new Ta}clone(){const n=new hl;return n._globeness=this._globeness,n._globeLatitudeErrorCorrectionRadians=this._globeLatitudeErrorCorrectionRadians,n.apply(this),n}apply(n){this._helper.apply(n),this._mercatorTransform.apply(this),this._verticalPerspectiveTransform.apply(this,this._globeLatitudeErrorCorrectionRadians)}get projectionMatrix(){return this.currentTransform.projectionMatrix}get modelViewProjectionMatrix(){return this.currentTransform.modelViewProjectionMatrix}get inverseProjectionMatrix(){return this.currentTransform.inverseProjectionMatrix}get cameraPosition(){return this.currentTransform.cameraPosition}getProjectionData(n){const c=this._mercatorTransform.getProjectionData(n),f=this._verticalPerspectiveTransform.getProjectionData(n);return{mainMatrix:this.isGlobeRendering?f.mainMatrix:c.mainMatrix,clippingPlane:f.clippingPlane,tileMercatorCoords:f.tileMercatorCoords,projectionTransition:n.applyGlobeMatrix?this._globeness:0,fallbackMatrix:c.fallbackMatrix}}isLocationOccluded(n){return this.currentTransform.isLocationOccluded(n)}transformLightDirection(n){return this.currentTransform.transformLightDirection(n)}getPixelScale(){return o.bv(this._mercatorTransform.getPixelScale(),this._verticalPerspectiveTransform.getPixelScale(),this._globeness)}getCircleRadiusCorrection(){return o.bv(this._mercatorTransform.getCircleRadiusCorrection(),this._verticalPerspectiveTransform.getCircleRadiusCorrection(),this._globeness)}getPitchedTextCorrection(n,c,f){const y=this._mercatorTransform.getPitchedTextCorrection(n,c,f),b=this._verticalPerspectiveTransform.getPitchedTextCorrection(n,c,f);return o.bv(y,b,this._globeness)}projectTileCoordinates(n,c,f,y){return this.currentTransform.projectTileCoordinates(n,c,f,y)}_calcMatrices(){this._helper._width&&this._helper._height&&(this._verticalPerspectiveTransform.apply(this,this._globeLatitudeErrorCorrectionRadians),this._helper._nearZ=this._verticalPerspectiveTransform.nearZ,this._helper._farZ=this._verticalPerspectiveTransform.farZ,this._mercatorTransform.apply(this,!0,this.isGlobeRendering),this._helper._nearZ=this._mercatorTransform.nearZ,this._helper._farZ=this._mercatorTransform.farZ)}calculateFogMatrix(n){return this.currentTransform.calculateFogMatrix(n)}getVisibleUnwrappedCoordinates(n){return this.currentTransform.getVisibleUnwrappedCoordinates(n)}getCameraFrustum(){return this.currentTransform.getCameraFrustum()}getClippingPlane(){return this.currentTransform.getClippingPlane()}getCoveringTilesDetailsProvider(){return this.currentTransform.getCoveringTilesDetailsProvider()}recalculateZoomAndCenter(n){this._mercatorTransform.recalculateZoomAndCenter(n),this._verticalPerspectiveTransform.recalculateZoomAndCenter(n)}maxPitchScaleFactor(){return this._mercatorTransform.maxPitchScaleFactor()}getCameraPoint(){return this._helper.getCameraPoint()}getCameraAltitude(){return this._helper.getCameraAltitude()}getCameraLngLat(){return this._helper.getCameraLngLat()}lngLatToCameraDepth(n,c){return this.currentTransform.lngLatToCameraDepth(n,c)}populateCache(n){this._mercatorTransform.populateCache(n),this._verticalPerspectiveTransform.populateCache(n)}getBounds(){return this.currentTransform.getBounds()}calculateCenterFromCameraLngLatAlt(n,c,f,y){return this._helper.calculateCenterFromCameraLngLatAlt(n,c,f,y)}setLocationAtPoint(n,c){if(!this.isGlobeRendering)return this._mercatorTransform.setLocationAtPoint(n,c),void this.apply(this._mercatorTransform);this._verticalPerspectiveTransform.setLocationAtPoint(n,c),this.apply(this._verticalPerspectiveTransform)}locationToScreenPoint(n,c){return this.currentTransform.locationToScreenPoint(n,c)}screenPointToMercatorCoordinate(n,c){return this.currentTransform.screenPointToMercatorCoordinate(n,c)}screenPointToLocation(n,c){return this.currentTransform.screenPointToLocation(n,c)}isPointOnMapSurface(n,c){return this.currentTransform.isPointOnMapSurface(n,c)}getRayDirectionFromPixel(n){return this._verticalPerspectiveTransform.getRayDirectionFromPixel(n)}getMatrixForModel(n,c){return this.currentTransform.getMatrixForModel(n,c)}getProjectionDataForCustomLayer(n=!0){const c=this._mercatorTransform.getProjectionDataForCustomLayer(n);if(!this.isGlobeRendering)return c;const f=this._verticalPerspectiveTransform.getProjectionDataForCustomLayer(n);return f.fallbackMatrix=c.mainMatrix,f}getFastPathSimpleProjectionMatrix(n){return this.currentTransform.getFastPathSimpleProjectionMatrix(n)}}class Fi{get useGlobeControls(){return!0}handlePanInertia(n,c){const f=Hi(n,c);return Math.abs(f.lng-c.center.lng)>180&&(f.lng=c.center.lng+179.5*Math.sign(f.lng-c.center.lng)),{easingCenter:f,easingOffset:new o.P(0,0)}}handleMapControlsRollPitchBearingZoom(n,c){const f=n.around,y=c.screenPointToLocation(f);n.bearingDelta&&c.setBearing(c.bearing+n.bearingDelta),n.pitchDelta&&c.setPitch(c.pitch+n.pitchDelta),n.rollDelta&&c.setRoll(c.roll+n.rollDelta);const b=c.zoom;n.zoomDelta&&c.setZoom(c.zoom+n.zoomDelta);const S=c.zoom-b;if(S===0)return;const M=o.bL(c.center.lng,y.lng),N=M/(Math.abs(M/180)+1),j=o.bL(c.center.lat,y.lat),q=c.getRayDirectionFromPixel(f),ne=c.cameraPosition,te=-1*o.b6(ne,q),ue=o.bA();o.b1(ue,ne,[q[0]*te,q[1]*te,q[2]*te]);const _e=o.b8(ue)-1,De=Math.exp(.5*-Math.max(_e-.3,0)),ze=Kr(c.worldSize,c.center.lat)/Math.min(c.width,c.height),Oe=o.by(ze,.9,.5,1,.25),Ge=(1-o.ar(-S))*Math.min(De,Oe),lt=c.center.lat,Ze=c.zoom,At=new o.V(c.center.lng+N*Ge,o.ao(c.center.lat+j*Ge,-o.ap,o.ap));c.setLocationAtPoint(y,f);const ft=c.center,st=o.by(Math.abs(M),45,85,0,1),wt=o.by(ze,.75,.35,0,1),Dt=Math.pow(Math.max(st,wt),.25),Lt=o.bL(ft.lng,At.lng),Rt=o.bL(ft.lat,At.lat);c.setCenter(new o.V(ft.lng+Lt*Dt,ft.lat+Rt*Dt).wrap()),c.setZoom(Ze+An(lt,c.center.lat))}handleMapControlsPan(n,c,f){if(!n.panDelta)return;const y=c.center.lat,b=c.zoom;c.setCenter(Hi(n.panDelta,c).wrap()),c.setZoom(b+An(y,c.center.lat))}cameraForBoxAndBearing(n,c,f,y,b){const S=sc(n,c,f,y,b),M=c.left/b.width*2-1,N=(b.width-c.right)/b.width*2-1,j=c.top/b.height*-2+1,q=(b.height-c.bottom)/b.height*-2+1,ne=o.bL(f.getWest(),f.getEast())<0,te=ne?f.getEast():f.getWest(),ue=ne?f.getWest():f.getEast(),_e=Math.max(f.getNorth(),f.getSouth()),De=Math.min(f.getNorth(),f.getSouth()),ze=te+.5*o.bL(te,ue),Oe=_e+.5*o.bL(_e,De),Ge=b.clone();Ge.setCenter(S.center),Ge.setBearing(S.bearing),Ge.setPitch(0),Ge.setRoll(0),Ge.setZoom(S.zoom);const lt=Ge.modelViewProjectionMatrix,Ze=[Br(f.getNorthWest()),Br(f.getNorthEast()),Br(f.getSouthWest()),Br(f.getSouthEast()),Br(new o.V(ue,Oe)),Br(new o.V(te,Oe)),Br(new o.V(ze,_e)),Br(new o.V(ze,De))],At=Br(S.center);let ft=Number.POSITIVE_INFINITY;for(const st of Ze)M<0&&(ft=Fi.getLesserNonNegativeNonNull(ft,Fi.solveVectorScale(st,At,lt,"x",M))),N>0&&(ft=Fi.getLesserNonNegativeNonNull(ft,Fi.solveVectorScale(st,At,lt,"x",N))),j>0&&(ft=Fi.getLesserNonNegativeNonNull(ft,Fi.solveVectorScale(st,At,lt,"y",j))),q<0&&(ft=Fi.getLesserNonNegativeNonNull(ft,Fi.solveVectorScale(st,At,lt,"y",q)));if(Number.isFinite(ft)&&ft!==0)return S.zoom=Ge.zoom+o.au(ft),S;jo()}handleJumpToCenterZoom(n,c){const f=n.center.lat,y=n.applyConstrain(c.center?o.V.convert(c.center):n.center,n.zoom).center;n.setCenter(y.wrap());const b=c.zoom!==void 0?+c.zoom:n.zoom+An(f,y.lat);n.zoom!==b&&n.setZoom(b)}handleEaseTo(n,c){const f=n.zoom,y=n.center,b=n.padding,S={roll:n.roll,pitch:n.pitch,bearing:n.bearing},M={roll:c.roll===void 0?n.roll:c.roll,pitch:c.pitch===void 0?n.pitch:c.pitch,bearing:c.bearing===void 0?n.bearing:c.bearing},N=c.zoom!==void 0,j=!n.isPaddingEqual(c.padding);let q=!1;const ne=c.center?o.V.convert(c.center):y,te=n.applyConstrain(ne,f).center;Fa(n,te);const ue=n.clone();ue.setCenter(te),ue.setZoom(N?+c.zoom:f+An(y.lat,ne.lat)),ue.setBearing(c.bearing);const _e=new o.P(o.ao(n.centerPoint.x+c.offsetAsPoint.x,0,n.width),o.ao(n.centerPoint.y+c.offsetAsPoint.y,0,n.height));ue.setLocationAtPoint(te,_e);const De=(c.offset&&c.offsetAsPoint.mag())>0?ue.center:te,ze=N?+c.zoom:f+An(y.lat,De.lat),Oe=f+An(y.lat,0),Ge=ze+An(De.lat,0),lt=o.bL(y.lng,De.lng),Ze=o.bL(y.lat,De.lat),At=o.ar(Ge-Oe);return q=ze!==f,{easeFunc:ft=>{if(o.bp(S,M)||ua({startEulerAngles:S,endEulerAngles:M,tr:n,k:ft,useSlerp:S.roll!=M.roll}),j&&n.interpolatePadding(b,c.padding,ft),c.around)o.w("Easing around a point is not supported under globe projection."),n.setLocationAtPoint(c.around,c.aroundPoint);else{const st=Ge>Oe?Math.min(2,At):Math.max(.5,At),wt=Math.pow(st,1-ft),Dt=Si(y,lt,Ze,ft*wt);n.setCenter(Dt.wrap())}if(q){const st=o.G.number(Oe,Ge,ft)+An(0,n.center.lat);n.setZoom(st)}},isZooming:q,elevationCenter:De}}handleFlyTo(n,c){const f=c.zoom!==void 0,y=n.center,b=n.zoom,S=n.padding,M=!n.isPaddingEqual(c.padding),N=n.applyConstrain(o.V.convert(c.center||c.locationAtOffset),b).center,j=f?+c.zoom:n.zoom+An(n.center.lat,N.lat),q=n.clone();q.setCenter(N),q.setZoom(j),q.setBearing(c.bearing);const ne=new o.P(o.ao(n.centerPoint.x+c.offsetAsPoint.x,0,n.width),o.ao(n.centerPoint.y+c.offsetAsPoint.y,0,n.height));q.setLocationAtPoint(N,ne);const te=q.center;Fa(n,te);const ue=(function(Ze,At,ft){const st=Br(At),wt=Br(ft),Dt=o.b6(st,wt),Lt=Math.acos(Dt),Rt=Kt(Ze);return Lt/(2*Math.PI)*Rt})(n,y,te),_e=b+An(y.lat,0),De=j+An(te.lat,0),ze=o.ar(De-_e);let Oe;if(typeof c.minZoom=="number"){const Ze=+c.minZoom+An(te.lat,0),At=Math.min(Ze,_e,De)+An(0,te.lat),ft=n.applyConstrain(te,At).zoom+An(te.lat,0);Oe=o.ar(ft-_e)}const Ge=o.bL(y.lng,te.lng),lt=o.bL(y.lat,te.lat);return{easeFunc:(Ze,At,ft,st)=>{const wt=Si(y,Ge,lt,ft);M&&n.interpolatePadding(S,c.padding,Ze);const Dt=Ze===1?te:wt;n.setCenter(Dt.wrap());const Lt=_e+o.au(At);n.setZoom(Ze===1?j:Lt+An(0,Dt.lat))},scaleOfZoom:ze,targetCenter:te,scaleOfMinZoom:Oe,pixelPathLength:ue}}static solveVectorScale(n,c,f,y,b){const S=y==="x"?[f[0],f[4],f[8],f[12]]:[f[1],f[5],f[9],f[13]],M=[f[3],f[7],f[11],f[15]],N=n[0]*S[0]+n[1]*S[1]+n[2]*S[2],j=n[0]*M[0]+n[1]*M[1]+n[2]*M[2],q=c[0]*S[0]+c[1]*S[1]+c[2]*S[2],ne=c[0]*M[0]+c[1]*M[1]+c[2]*M[2];return q+b*j===N+b*ne||M[3]*(N-q)+S[3]*(ne-j)+N*ne==q*j?null:(q+S[3]-b*ne-b*M[3])/(q-N-b*ne+b*j)}static getLesserNonNegativeNonNull(n,c){return c!==null&&c>=0&&c<n?c:n}}class Tc{constructor(n){this._globe=n,this._mercatorCameraHelper=new ha,this._verticalPerspectiveCameraHelper=new Fi}get useGlobeControls(){return this._globe.useGlobeRendering}get currentHelper(){return this.useGlobeControls?this._verticalPerspectiveCameraHelper:this._mercatorCameraHelper}handlePanInertia(n,c){return this.currentHelper.handlePanInertia(n,c)}handleMapControlsRollPitchBearingZoom(n,c){return this.currentHelper.handleMapControlsRollPitchBearingZoom(n,c)}handleMapControlsPan(n,c,f){this.currentHelper.handleMapControlsPan(n,c,f)}cameraForBoxAndBearing(n,c,f,y,b){return this.currentHelper.cameraForBoxAndBearing(n,c,f,y,b)}handleJumpToCenterZoom(n,c){this.currentHelper.handleJumpToCenterZoom(n,c)}handleEaseTo(n,c){return this.currentHelper.handleEaseTo(n,c)}handleFlyTo(n,c){return this.currentHelper.handleFlyTo(n,c)}}const ma=(x,n)=>o.B(x,n&&n.filter((c=>c.identifier!=="source.canvas"))),Pa=o.bP();class Xi extends o.E{constructor(n,c={}){var f,y;super(),this._rtlPluginLoaded=()=>{for(const S in this.tileManagers){const M=this.tileManagers[S].getSource().type;M!=="vector"&&M!=="geojson"||this.tileManagers[S].reload()}},this.map=n,this.dispatcher=new Tt(St(),n._getMapId()),this.dispatcher.registerMessageHandler("GG",((S,M)=>this.getGlyphs(S,M))),this.dispatcher.registerMessageHandler("GI",((S,M)=>this.getImages(S,M))),this.dispatcher.registerMessageHandler("GDA",((S,M)=>this.getDashes(S,M))),this.imageManager=new me,this.imageManager.setEventedParent(this);const b=((f=n._container)===null||f===void 0?void 0:f.lang)||typeof document<"u"&&((y=document.documentElement)===null||y===void 0?void 0:y.lang)||void 0;this.glyphManager=new ot(n._requestManager,c.localIdeographFontFamily,b),this.lineAtlas=new Ee(256,512),this.crossTileSymbolIndex=new vs,this._setInitialValues(),this._resetUpdates(),this.dispatcher.broadcast("SR",o.bQ()),vt().on(qe,this._rtlPluginLoaded),this.on("data",(S=>{if(S.dataType!=="source"||S.sourceDataType!=="metadata")return;const M=this.tileManagers[S.sourceId];if(!M)return;const N=M.getSource();if(N&&N.vectorLayerIds)for(const j in this._layers){const q=this._layers[j];q.source===N.id&&this._validateLayer(q)}}))}_setInitialValues(){var n;this._spritesImagesIds={},this._layers={},this._order=[],this.tileManagers={},this.zoomHistory=new o.bR,this._availableImages=[],this._globalState={},this._serializedLayers={},this.stylesheet=null,this.light=null,this.sky=null,this.projection&&(this.projection.destroy(),delete this.projection),this._loaded=!1,this._changed=!1,this._updatedLayers={},this._updatedSources={},this._changedImages={},this._glyphsDidChange=!1,this._updatedPaintProps={},this._layerOrderChanged=!1,this.crossTileSymbolIndex=new(((n=this.crossTileSymbolIndex)===null||n===void 0?void 0:n.constructor)||Object),this.pauseablePlacement=void 0,this.placement=void 0,this.z=0}setGlobalStateProperty(n,c){var f,y,b;this._checkLoaded();const S=c===null?(b=(y=(f=this.stylesheet.state)===null||f===void 0?void 0:f[n])===null||y===void 0?void 0:y.default)!==null&&b!==void 0?b:null:c;if(o.bS(S,this._globalState[n]))return this;this._globalState[n]=S,this._applyGlobalStateChanges([n])}getGlobalState(){return this._globalState}setGlobalState(n){this._checkLoaded();const c=[];for(const f in n)!o.bS(this._globalState[f],n[f].default)&&(c.push(f),this._globalState[f]=n[f].default);this._applyGlobalStateChanges(c)}_applyGlobalStateChanges(n){if(n.length===0)return;const c=new Set,f={};for(const y of n){f[y]=this._globalState[y];for(const b in this._layers){const S=this._layers[b],M=S.getLayoutAffectingGlobalStateRefs(),N=S.getPaintAffectingGlobalStateRefs();if(M.has(y)&&c.add(S.source),N.has(y))for(const{name:j,value:q}of N.get(y))this._updatePaintProperty(S,j,q)}}this.dispatcher.broadcast("UGS",f);for(const y in this.tileManagers)c.has(y)&&(this._reloadSource(y),this._changed=!0)}loadURL(n,c={},f){this.fire(new o.l("dataloading",{dataType:"style"})),c.validate=typeof c.validate!="boolean"||c.validate;const y=this.map._requestManager.transformRequest(n,"Style");this._loadStyleRequest=new AbortController;const b=this._loadStyleRequest;o.j(y,this._loadStyleRequest).then((S=>{this._loadStyleRequest=null,this._load(S.data,c,f)})).catch((S=>{this._loadStyleRequest=null,S&&!b.signal.aborted&&this.fire(new o.k(S))}))}loadJSON(n,c={},f){this.fire(new o.l("dataloading",{dataType:"style"})),this._frameRequest=new AbortController,P.frameAsync(this._frameRequest).then((()=>{this._frameRequest=null,c.validate=c.validate!==!1,this._load(n,c,f)})).catch((()=>{}))}loadEmpty(){this.fire(new o.l("dataloading",{dataType:"style"})),this._load(Pa,{validate:!1})}_load(n,c,f){var y,b;let S=c.transformStyle?c.transformStyle(f,n):n;if(!c.validate||!ma(this,o.C(S))){S=Object.assign({},S),this._loaded=!0,this.stylesheet=S;for(const M in S.sources)this.addSource(M,S.sources[M],{validate:!1});S.sprite?this._loadSprite(S.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(S.glyphs),this._createLayers(),this.light=new yt(this.stylesheet.light),this._setProjectionInternal(((y=this.stylesheet.projection)===null||y===void 0?void 0:y.type)||"mercator"),this.sky=new ie(this.stylesheet.sky),this.map.setTerrain((b=this.stylesheet.terrain)!==null&&b!==void 0?b:null),this.fire(new o.l("data",{dataType:"style"})),this.fire(new o.l("style.load"))}}_createLayers(){var n,c,f;const y=o.bT(this.stylesheet.layers);this.setGlobalState((n=this.stylesheet.state)!==null&&n!==void 0?n:null),this.dispatcher.broadcast("SL",y),this._order=y.map((b=>b.id)),this._layers={},this._serializedLayers=null;for(const b of y){const S=o.bU(b,this._globalState);if(S.setEventedParent(this,{layer:{id:b.id}}),this._layers[b.id]=S,o.bV(S)&&this.tileManagers[S.source]){const M=(f=(c=b.paint)===null||c===void 0?void 0:c["raster-fade-duration"])!==null&&f!==void 0?f:S.paint.get("raster-fade-duration");this.tileManagers[S.source].setRasterFadeDuration(M)}}}_loadSprite(n,c=!1,f=void 0){this.imageManager.setLoaded(!1);const y=new AbortController;let b;this._spriteRequest=y,(function(S,M,N,j){return o._(this,void 0,void 0,(function*(){const q=Be(S),ne=N>1?"@2x":"",te={},ue={};for(const{id:_e,url:De}of q){const ze=M.transformRequest(Je(De,ne,".json"),"SpriteJSON");te[_e]=o.j(ze,j);const Oe=M.transformRequest(Je(De,ne,".png"),"SpriteImage");ue[_e]=Xe.getImage(Oe,j)}return yield Promise.all([...Object.values(te),...Object.values(ue)]),(function(_e,De){return o._(this,void 0,void 0,(function*(){const ze={};for(const Oe in _e){ze[Oe]={};const Ge=P.getImageCanvasContext((yield De[Oe]).data),lt=(yield _e[Oe]).data;for(const Ze in lt){const{width:At,height:ft,x:st,y:wt,sdf:Dt,pixelRatio:Lt,stretchX:Rt,stretchY:Qt,content:nr,textFitWidth:ur,textFitHeight:rr}=lt[Ze];ze[Oe][Ze]={data:null,pixelRatio:Lt,sdf:Dt,stretchX:Rt,stretchY:Qt,content:nr,textFitWidth:ur,textFitHeight:rr,spriteData:{width:At,height:ft,x:st,y:wt,context:Ge}}}}return ze}))})(te,ue)}))})(n,this.map._requestManager,this.map.getPixelRatio(),this._spriteRequest).then((S=>{if(this._spriteRequest=null,S)for(const M in S){this._spritesImagesIds[M]=[];const N=this._spritesImagesIds[M]?this._spritesImagesIds[M].filter((j=>!(j in S))):[];for(const j of N)this.imageManager.removeImage(j),this._changedImages[j]=!0;for(const j in S[M]){const q=M==="default"?j:`${M}:${j}`;this._spritesImagesIds[M].push(q),q in this.imageManager.images?this.imageManager.updateImage(q,S[M][j],!1):this.imageManager.addImage(q,S[M][j]),c&&(this._changedImages[q]=!0)}}})).catch((S=>{this._spriteRequest=null,b=S,y.signal.aborted||this.fire(new o.k(b))})).finally((()=>{this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),c&&(this._changed=!0),this.dispatcher.broadcast("SI",this._availableImages),this.fire(new o.l("data",{dataType:"style"})),f&&f(b)}))}_unloadSprite(){for(const n of Object.values(this._spritesImagesIds).flat())this.imageManager.removeImage(n),this._changedImages[n]=!0;this._spritesImagesIds={},this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new o.l("data",{dataType:"style"}))}_validateLayer(n){const c=this.tileManagers[n.source];if(!c)return;const f=n.sourceLayer;if(!f)return;const y=c.getSource();(y.type==="geojson"||y.vectorLayerIds&&y.vectorLayerIds.indexOf(f)===-1)&&this.fire(new o.k(new Error(`Source layer "${f}" does not exist on source "${y.id}" as specified by style layer "${n.id}".`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(const n in this.tileManagers)if(!this.tileManagers[n].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeByIds(n,c=!1){const f=this._serializedAllLayers();if(!n||n.length===0)return Object.values(c?o.bW(f):f);const y=[];for(const b of n)if(f[b]){const S=c?o.bW(f[b]):f[b];y.push(S)}return y}_serializedAllLayers(){let n=this._serializedLayers;if(n)return n;n=this._serializedLayers={};const c=Object.keys(this._layers);for(const f of c){const y=this._layers[f];y.type!=="custom"&&(n[f]=y.serialize())}return n}hasTransitions(){var n,c,f;if(!((n=this.light)===null||n===void 0)&&n.hasTransition()||!((c=this.sky)===null||c===void 0)&&c.hasTransition()||!((f=this.projection)===null||f===void 0)&&f.hasTransition())return!0;for(const y in this.tileManagers)if(this.tileManagers[y].hasTransition())return!0;for(const y in this._layers)if(this._layers[y].hasTransition())return!0;return!1}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading.")}update(n){if(!this._loaded)return;const c=this._changed;if(c){const y=Object.keys(this._updatedLayers),b=Object.keys(this._removedLayers);(y.length||b.length)&&this._updateWorkerLayers(y,b);for(const S in this._updatedSources){const M=this._updatedSources[S];if(M==="reload")this._reloadSource(S);else{if(M!=="clear")throw new Error(`Invalid action ${M}`);this._clearSource(S)}}this._updateTilesForChangedImages(),this._updateTilesForChangedGlyphs();for(const S in this._updatedPaintProps)this._layers[S].updateTransitions(n);this.light.updateTransitions(n),this.sky.updateTransitions(n),this._resetUpdates()}const f={};for(const y in this.tileManagers){const b=this.tileManagers[y];f[y]=b.used,b.used=!1}for(const y of this._order){const b=this._layers[y];b.recalculate(n,this._availableImages),!b.isHidden(n.zoom)&&b.source&&(this.tileManagers[b.source].used=!0)}for(const y in f){const b=this.tileManagers[y];!!f[y]!=!!b.used&&b.fire(new o.l("data",{sourceDataType:"visibility",dataType:"source",sourceId:y}))}this.light.recalculate(n),this.sky.recalculate(n),this.projection.recalculate(n),this.z=n.zoom,c&&this.fire(new o.l("data",{dataType:"style"}))}_updateTilesForChangedImages(){const n=Object.keys(this._changedImages);if(n.length){for(const c in this.tileManagers)this.tileManagers[c].reloadTilesForDependencies(["icons","patterns"],n);this._changedImages={}}}_updateTilesForChangedGlyphs(){if(this._glyphsDidChange){for(const n in this.tileManagers)this.tileManagers[n].reloadTilesForDependencies(["glyphs"],[""]);this._glyphsDidChange=!1}}_updateWorkerLayers(n,c){this.dispatcher.broadcast("UL",{layers:this._serializeByIds(n,!1),removedIds:c})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={},this._glyphsDidChange=!1}setState(n,c={}){var f;this._checkLoaded();const y=this.serialize();if(n=c.transformStyle?c.transformStyle(y,n):n,((f=c.validate)===null||f===void 0||f)&&ma(this,o.C(n)))return!1;(n=o.bW(n)).layers=o.bT(n.layers);const b=o.bX(y,n),S=this._getOperationsToPerform(b);if(S.unimplemented.length>0)throw new Error(`Unimplemented: ${S.unimplemented.join(", ")}.`);if(S.operations.length===0)return!1;for(const M of S.operations)M();return this.stylesheet=n,this._serializedLayers=null,!0}_getOperationsToPerform(n){const c=[],f=[];for(const y of n)switch(y.command){case"setCenter":case"setZoom":case"setBearing":case"setPitch":case"setRoll":continue;case"addLayer":c.push((()=>this.addLayer.apply(this,y.args)));break;case"removeLayer":c.push((()=>this.removeLayer.apply(this,y.args)));break;case"setPaintProperty":c.push((()=>this.setPaintProperty.apply(this,y.args)));break;case"setLayoutProperty":c.push((()=>this.setLayoutProperty.apply(this,y.args)));break;case"setFilter":c.push((()=>this.setFilter.apply(this,y.args)));break;case"addSource":c.push((()=>this.addSource.apply(this,y.args)));break;case"removeSource":c.push((()=>this.removeSource.apply(this,y.args)));break;case"setLayerZoomRange":c.push((()=>this.setLayerZoomRange.apply(this,y.args)));break;case"setLight":c.push((()=>this.setLight.apply(this,y.args)));break;case"setGeoJSONSourceData":c.push((()=>this.setGeoJSONSourceData.apply(this,y.args)));break;case"setGlyphs":c.push((()=>this.setGlyphs.apply(this,y.args)));break;case"setSprite":c.push((()=>this.setSprite.apply(this,y.args)));break;case"setTerrain":c.push((()=>this.map.setTerrain.apply(this,y.args)));break;case"setSky":c.push((()=>this.setSky.apply(this,y.args)));break;case"setProjection":this.setProjection.apply(this,y.args);break;case"setGlobalState":c.push((()=>this.setGlobalState.apply(this,y.args)));break;case"setTransition":c.push((()=>{}));break;default:f.push(y.command)}return{operations:c,unimplemented:f}}addImage(n,c){if(this.getImage(n))return this.fire(new o.k(new Error(`An image named "${n}" already exists.`)));this.imageManager.addImage(n,c),this._afterImageUpdated(n)}updateImage(n,c){this.imageManager.updateImage(n,c)}getImage(n){return this.imageManager.getImage(n)}removeImage(n){if(!this.getImage(n))return this.fire(new o.k(new Error(`An image named "${n}" does not exist.`)));this.imageManager.removeImage(n),this._afterImageUpdated(n)}_afterImageUpdated(n){this._availableImages=this.imageManager.listImages(),this._changedImages[n]=!0,this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new o.l("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this.imageManager.listImages()}addSource(n,c,f={}){if(this._checkLoaded(),this.tileManagers[n]!==void 0)throw new Error(`Source "${n}" already exists.`);if(!c.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(c).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(c.type)>=0&&this._validate(o.C.source,`sources.${n}`,c,null,f))return;this.map&&this.map._collectResourceTiming&&(c.collectResourceTiming=!0);const y=this.tileManagers[n]=new ns(n,c,this.dispatcher);y.style=this,y.setEventedParent(this,(()=>({isSourceLoaded:y.loaded(),source:y.serialize(),sourceId:n}))),y.onAdd(this.map),this._changed=!0}removeSource(n){if(this._checkLoaded(),this.tileManagers[n]===void 0)throw new Error("There is no source with this ID");for(const f in this._layers)if(this._layers[f].source===n)return this.fire(new o.k(new Error(`Source "${n}" cannot be removed while layer "${f}" is using it.`)));const c=this.tileManagers[n];delete this.tileManagers[n],delete this._updatedSources[n],c.fire(new o.l("data",{sourceDataType:"metadata",dataType:"source",sourceId:n})),c.setEventedParent(null),c.onRemove(this.map),this._changed=!0}setGeoJSONSourceData(n,c){if(this._checkLoaded(),this.tileManagers[n]===void 0)throw new Error(`There is no source with this ID=${n}`);const f=this.tileManagers[n].getSource();if(f.type!=="geojson")throw new Error(`geojsonSource.type is ${f.type}, which is !== 'geojson`);f.setData(c),this._changed=!0}getSource(n){return this.tileManagers[n]&&this.tileManagers[n].getSource()}addLayer(n,c,f={}){this._checkLoaded();const y=n.id;if(this.getLayer(y))return void this.fire(new o.k(new Error(`Layer "${y}" already exists on this map.`)));let b;if(n.type==="custom"){if(ma(this,o.bY(n)))return;b=o.bU(n,this._globalState)}else{if("source"in n&&typeof n.source=="object"&&(this.addSource(y,n.source),n=o.bW(n),n=o.e(n,{source:y})),this._validate(o.C.layer,`layers.${y}`,n,{arrayIndex:-1},f))return;b=o.bU(n,this._globalState),this._validateLayer(b),b.setEventedParent(this,{layer:{id:y}})}const S=c?this._order.indexOf(c):this._order.length;if(c&&S===-1)this.fire(new o.k(new Error(`Cannot add layer "${y}" before non-existing layer "${c}".`)));else{if(this._order.splice(S,0,y),this._layerOrderChanged=!0,this._layers[y]=b,this._removedLayers[y]&&b.source&&b.type!=="custom"){const M=this._removedLayers[y];delete this._removedLayers[y],M.type!==b.type?this._updatedSources[b.source]="clear":(this._updatedSources[b.source]="reload",this.tileManagers[b.source].pause())}this._updateLayer(b),b.onAdd&&b.onAdd(this.map)}}moveLayer(n,c){if(this._checkLoaded(),this._changed=!0,!this._layers[n])return void this.fire(new o.k(new Error(`The layer '${n}' does not exist in the map's style and cannot be moved.`)));if(n===c)return;const f=this._order.indexOf(n);this._order.splice(f,1);const y=c?this._order.indexOf(c):this._order.length;c&&y===-1?this.fire(new o.k(new Error(`Cannot move layer "${n}" before non-existing layer "${c}".`))):(this._order.splice(y,0,n),this._layerOrderChanged=!0)}removeLayer(n){this._checkLoaded();const c=this._layers[n];if(!c)return void this.fire(new o.k(new Error(`Cannot remove non-existing layer "${n}".`)));c.setEventedParent(null);const f=this._order.indexOf(n);this._order.splice(f,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[n]=c,delete this._layers[n],this._serializedLayers&&delete this._serializedLayers[n],delete this._updatedLayers[n],delete this._updatedPaintProps[n],c.onRemove&&c.onRemove(this.map)}getLayer(n){return this._layers[n]}getLayersOrder(){return[...this._order]}hasLayer(n){return n in this._layers}setLayerZoomRange(n,c,f){this._checkLoaded();const y=this.getLayer(n);y?y.minzoom===c&&y.maxzoom===f||(c!=null&&(y.minzoom=c),f!=null&&(y.maxzoom=f),this._updateLayer(y)):this.fire(new o.k(new Error(`Cannot set the zoom range of non-existing layer "${n}".`)))}setFilter(n,c,f={}){this._checkLoaded();const y=this.getLayer(n);if(y){if(!o.bS(y.filter,c))return c==null?(y.setFilter(void 0),void this._updateLayer(y)):void(this._validate(o.C.filter,`layers.${y.id}.filter`,c,null,f)||(y.setFilter(o.bW(c)),this._updateLayer(y)))}else this.fire(new o.k(new Error(`Cannot filter non-existing layer "${n}".`)))}getFilter(n){return o.bW(this.getLayer(n).filter)}setLayoutProperty(n,c,f,y={}){this._checkLoaded();const b=this.getLayer(n);b?o.bS(b.getLayoutProperty(c),f)||(b.setLayoutProperty(c,f,y),this._updateLayer(b)):this.fire(new o.k(new Error(`Cannot style non-existing layer "${n}".`)))}getLayoutProperty(n,c){const f=this.getLayer(n);if(f)return f.getLayoutProperty(c);this.fire(new o.k(new Error(`Cannot get style of non-existing layer "${n}".`)))}setPaintProperty(n,c,f,y={}){this._checkLoaded();const b=this.getLayer(n);b?o.bS(b.getPaintProperty(c),f)||this._updatePaintProperty(b,c,f,y):this.fire(new o.k(new Error(`Cannot style non-existing layer "${n}".`)))}_updatePaintProperty(n,c,f,y={}){n.setPaintProperty(c,f,y)&&this._updateLayer(n),o.bV(n)&&c==="raster-fade-duration"&&this.tileManagers[n.source].setRasterFadeDuration(f),this._changed=!0,this._updatedPaintProps[n.id]=!0,this._serializedLayers=null}getPaintProperty(n,c){return this.getLayer(n).getPaintProperty(c)}setFeatureState(n,c){this._checkLoaded();const f=n.source,y=n.sourceLayer,b=this.tileManagers[f];if(b===void 0)return void this.fire(new o.k(new Error(`The source '${f}' does not exist in the map's style.`)));const S=b.getSource().type;S==="geojson"&&y?this.fire(new o.k(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):S!=="vector"||y?(n.id===void 0&&this.fire(new o.k(new Error("The feature id parameter must be provided."))),b.setFeatureState(y,n.id,c)):this.fire(new o.k(new Error("The sourceLayer parameter must be provided for vector source types.")))}removeFeatureState(n,c){this._checkLoaded();const f=n.source,y=this.tileManagers[f];if(y===void 0)return void this.fire(new o.k(new Error(`The source '${f}' does not exist in the map's style.`)));const b=y.getSource().type,S=b==="vector"?n.sourceLayer:void 0;b!=="vector"||S?c&&typeof n.id!="string"&&typeof n.id!="number"?this.fire(new o.k(new Error("A feature id is required to remove its specific state property."))):y.removeFeatureState(S,n.id,c):this.fire(new o.k(new Error("The sourceLayer parameter must be provided for vector source types.")))}getFeatureState(n){this._checkLoaded();const c=n.source,f=n.sourceLayer,y=this.tileManagers[c];if(y!==void 0)return y.getSource().type!=="vector"||f?(n.id===void 0&&this.fire(new o.k(new Error("The feature id parameter must be provided."))),y.getFeatureState(f,n.id)):void this.fire(new o.k(new Error("The sourceLayer parameter must be provided for vector source types.")));this.fire(new o.k(new Error(`The source '${c}' does not exist in the map's style.`)))}getTransition(){return o.e({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){if(!this._loaded)return;const n=o.bZ(this.tileManagers,(b=>b.serialize())),c=this._serializeByIds(this._order,!0),f=this.map.getTerrain()||void 0,y=this.stylesheet;return o.b_({version:y.version,name:y.name,metadata:y.metadata,light:y.light,sky:y.sky,center:y.center,zoom:y.zoom,bearing:y.bearing,pitch:y.pitch,sprite:y.sprite,glyphs:y.glyphs,transition:y.transition,projection:y.projection,sources:n,layers:c,terrain:f},(b=>b!==void 0))}_updateLayer(n){this._updatedLayers[n.id]=!0,n.source&&!this._updatedSources[n.source]&&this.tileManagers[n.source].getSource().type!=="raster"&&(this._updatedSources[n.source]="reload",this.tileManagers[n.source].pause()),this._serializedLayers=null,this._changed=!0}_flattenAndSortRenderedFeatures(n){const c=S=>this._layers[S].type==="fill-extrusion",f={},y=[];for(let S=this._order.length-1;S>=0;S--){const M=this._order[S];if(c(M)){f[M]=S;for(const N of n){const j=N[M];if(j)for(const q of j)y.push(q)}}}y.sort(((S,M)=>M.intersectionZ-S.intersectionZ));const b=[];for(let S=this._order.length-1;S>=0;S--){const M=this._order[S];if(c(M))for(let N=y.length-1;N>=0;N--){const j=y[N].feature;if(f[j.layer.id]<S)break;b.push(j),y.pop()}else for(const N of n){const j=N[M];if(j)for(const q of j)b.push(q.feature)}}return b}queryRenderedFeatures(n,c,f){c&&c.filter&&this._validate(o.C.filter,"queryRenderedFeatures.filter",c.filter,null,c);const y={};if(c&&c.layers){if(!(Array.isArray(c.layers)||c.layers instanceof Set))return this.fire(new o.k(new Error("parameters.layers must be an Array or a Set of strings"))),[];for(const j of c.layers){const q=this._layers[j];if(!q)return this.fire(new o.k(new Error(`The layer '${j}' does not exist in the map's style and cannot be queried for features.`))),[];y[q.source]=!0}}const b=[];c.availableImages=this._availableImages;const S=this._serializedAllLayers(),M=c.layers instanceof Set?c.layers:Array.isArray(c.layers)?new Set(c.layers):null,N=Object.assign(Object.assign({},c),{layers:M,globalState:this._globalState});for(const j in this.tileManagers)c.layers&&!y[j]||b.push(Ar(this.tileManagers[j],this._layers,S,n,N,f,this.map.terrain?(q,ne,te)=>this.map.terrain.getElevation(q,ne,te):void 0));return this.placement&&b.push((function(j,q,ne,te,ue,_e,De){const ze={},Oe=_e.queryRenderedSymbols(te),Ge=[];for(const lt of Object.keys(Oe).map(Number))Ge.push(De[lt]);Ge.sort(_r);for(const lt of Ge){const Ze=lt.featureIndex.lookupSymbolFeatures(Oe[lt.bucketInstanceId],q,lt.bucketIndex,lt.sourceLayerIndex,{filterSpec:ue.filter,globalState:ue.globalState},ue.layers,ue.availableImages,j);for(const At in Ze){const ft=ze[At]=ze[At]||[],st=Ze[At];st.sort(((wt,Dt)=>{const Lt=lt.featureSortOrder;if(Lt){const Rt=Lt.indexOf(wt.featureIndex);return Lt.indexOf(Dt.featureIndex)-Rt}return Dt.featureIndex-wt.featureIndex}));for(const wt of st)ft.push(wt)}}return(function(lt,Ze,At){for(const ft in lt)for(const st of lt[ft])je(st,At[Ze[ft].source]);return lt})(ze,j,ne)})(this._layers,S,this.tileManagers,n,N,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(b)}querySourceFeatures(n,c){c?.filter&&this._validate(o.C.filter,"querySourceFeatures.filter",c.filter,null,c);const f=this.tileManagers[n];return f?(function(y,b){const S=y.getRenderableIds().map((j=>y.getTileByID(j))),M=[],N={};for(let j=0;j<S.length;j++){const q=S[j],ne=q.tileID.canonical.key;N[ne]||(N[ne]=!0,q.querySourceFeatures(M,b))}return M})(f,c?Object.assign(Object.assign({},c),{globalState:this._globalState}):{globalState:this._globalState}):[]}getLight(){return this.light.getLight()}setLight(n,c={}){this._checkLoaded();const f=this.light.getLight();let y=!1;for(const S in n)if(!o.bS(n[S],f[S])){y=!0;break}if(!y)return;const b={now:z(),transition:o.e({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(n,c),this.light.updateTransitions(b)}getProjection(){var n;return(n=this.stylesheet)===null||n===void 0?void 0:n.projection}setProjection(n){if(this._checkLoaded(),this.projection){if(this.projection.name===n.type)return;this.projection.destroy(),delete this.projection}this.stylesheet.projection=n,this._setProjectionInternal(n.type)}getSky(){var n;return(n=this.stylesheet)===null||n===void 0?void 0:n.sky}setSky(n,c={}){this._checkLoaded();const f=this.getSky();let y=!1;if(!n&&!f)return;if(n&&!f)y=!0;else if(!n&&f)y=!0;else for(const S in n)if(!o.bS(n[S],f[S])){y=!0;break}if(!y)return;const b={now:z(),transition:o.e({duration:300,delay:0},this.stylesheet.transition)};this.stylesheet.sky=n,this.sky.setSky(n,c),this.sky.updateTransitions(b)}_setProjectionInternal(n){const c=(function(f,y){const b={constrainOverride:y};if(Array.isArray(f)){const S=new It({type:f});return{projection:S,transform:new hl(b),cameraHelper:new Tc(S)}}switch(f){case"mercator":return{projection:new ws,transform:new ul(b),cameraHelper:new ha};case"globe":{const S=new It({type:["interpolate",["linear"],["zoom"],11,"vertical-perspective",12,"mercator"]});return{projection:S,transform:new hl(b),cameraHelper:new Tc(S)}}case"vertical-perspective":return{projection:new tt,transform:new Ta(b),cameraHelper:new Fi};default:return o.w(`Unknown projection name: ${f}. Falling back to mercator projection.`),{projection:new ws,transform:new ul(b),cameraHelper:new ha}}})(n,this.map.transformConstrain);this.projection=c.projection,this.map.migrateProjection(c.transform,c.cameraHelper);for(const f in this.tileManagers)this.tileManagers[f].reload()}_validate(n,c,f,y,b={}){return(!b||b.validate!==!1)&&ma(this,n.call(o.C,o.e({key:c,style:this.serialize(),value:f,styleSpec:o.u},y)))}_remove(n=!0){this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._loadStyleRequest&&(this._loadStyleRequest.abort(),this._loadStyleRequest=null),this._spriteRequest&&(this._spriteRequest.abort(),this._spriteRequest=null),vt().off(qe,this._rtlPluginLoaded);for(const c in this._layers)this._layers[c].setEventedParent(null);for(const c in this.tileManagers){const f=this.tileManagers[c];f.setEventedParent(null),f.onRemove(this.map)}this.imageManager.setEventedParent(null),this.setEventedParent(null),n&&this.dispatcher.broadcast("RM",void 0),this.dispatcher.remove(n)}_clearSource(n){this.tileManagers[n].clearTiles()}_reloadSource(n){this.tileManagers[n].resume(),this.tileManagers[n].reload()}_updateSources(n){for(const c in this.tileManagers)this.tileManagers[c].update(n,this.map.terrain)}_generateCollisionBoxes(){for(const n in this.tileManagers)this._reloadSource(n)}_updatePlacement(n,c,f,y,b=!1){let S=!1,M=!1;const N={};for(const j of this._order){const q=this._layers[j];if(q.type!=="symbol")continue;if(!N[q.source]){const te=this.tileManagers[q.source];N[q.source]=te.getRenderableIds(!0).map((ue=>te.getTileByID(ue))).sort(((ue,_e)=>_e.tileID.overscaledZ-ue.tileID.overscaledZ||(ue.tileID.isLessThan(_e.tileID)?-1:1)))}const ne=this.crossTileSymbolIndex.addLayer(q,N[q.source],n.center.lng);S=S||ne}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((b=b||this._layerOrderChanged||f===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(z(),n.zoom))&&(this.pauseablePlacement=new Al(n,this.map.terrain,this._order,b,c,f,y,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,N),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(z()),M=!0),S&&this.pauseablePlacement.placement.setStale()),M||S)for(const j of this._order){const q=this._layers[j];q.type==="symbol"&&this.placement.updateLayerOpacities(q,N[q.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(z())}_releaseSymbolFadeTiles(){for(const n in this.tileManagers)this.tileManagers[n].releaseSymbolFadeTiles()}getImages(n,c){return o._(this,void 0,void 0,(function*(){const f=yield this.imageManager.getImages(c.icons);this._updateTilesForChangedImages();const y=this.tileManagers[c.source];return y&&y.setDependencies(c.tileID.key,c.type,c.icons),f}))}getGlyphs(n,c){return o._(this,void 0,void 0,(function*(){const f=yield this.glyphManager.getGlyphs(c.stacks),y=this.tileManagers[c.source];return y&&y.setDependencies(c.tileID.key,c.type,[""]),f}))}getGlyphsUrl(){return this.stylesheet.glyphs||null}setGlyphs(n,c={}){this._checkLoaded(),n&&this._validate(o.C.glyphs,"glyphs",n,null,c)||(this._glyphsDidChange=!0,this.stylesheet.glyphs=n,this.glyphManager.entries={},this.glyphManager.setURL(n))}getDashes(n,c){return o._(this,void 0,void 0,(function*(){const f={};for(const[y,b]of Object.entries(c.dashes))f[y]=this.lineAtlas.getDash(b.dasharray,b.round);return f}))}addSprite(n,c,f={},y){this._checkLoaded();const b=[{id:n,url:c}],S=[...Be(this.stylesheet.sprite),...b];this._validate(o.C.sprite,"sprite",S,null,f)||(this.stylesheet.sprite=S,this._loadSprite(b,!0,y))}removeSprite(n){this._checkLoaded();const c=Be(this.stylesheet.sprite);if(c.find((f=>f.id===n))){if(this._spritesImagesIds[n])for(const f of this._spritesImagesIds[n])this.imageManager.removeImage(f),this._changedImages[f]=!0;c.splice(c.findIndex((f=>f.id===n)),1),this.stylesheet.sprite=c.length>0?c:void 0,delete this._spritesImagesIds[n],this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new o.l("data",{dataType:"style"}))}else this.fire(new o.k(new Error(`Sprite "${n}" doesn't exists on this map.`)))}getSprite(){return Be(this.stylesheet.sprite)}setSprite(n,c={},f){this._checkLoaded(),n&&this._validate(o.C.sprite,"sprite",n,null,c)||(this.stylesheet.sprite=n,n?this._loadSprite(n,!0,f):(this._unloadSprite(),f&&f(null)))}destroy(){this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._loadStyleRequest&&(this._loadStyleRequest.abort(),this._loadStyleRequest=null),this._spriteRequest&&(this._spriteRequest.abort(),this._spriteRequest=null);for(const n in this.tileManagers){const c=this.tileManagers[n];c.setEventedParent(null),c.onRemove(this.map)}this.tileManagers={},this.imageManager&&(this.imageManager.setEventedParent(null),this.imageManager.destroy(),this._availableImages=[],this._spritesImagesIds={}),this.glyphManager&&this.glyphManager.destroy();for(const n in this._layers){const c=this._layers[n];c.setEventedParent(null),c.onRemove&&c.onRemove(this.map)}this._setInitialValues(),this.setEventedParent(null),this.dispatcher.unregisterMessageHandler("GG"),this.dispatcher.unregisterMessageHandler("GI"),this.dispatcher.unregisterMessageHandler("GDA"),this.dispatcher.remove(!0),this._listeners={},this._oneTimeListeners={}}}var sA=o.aV([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);class Tl{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}bind(n,c,f,y,b,S,M,N,j){this.context=n;let q=this.boundPaintVertexBuffers.length!==y.length;for(let ne=0;!q&&ne<y.length;ne++)this.boundPaintVertexBuffers[ne]!==y[ne]&&(q=!0);!this.vao||this.boundProgram!==c||this.boundLayoutVertexBuffer!==f||q||this.boundIndexBuffer!==b||this.boundVertexOffset!==S||this.boundDynamicVertexBuffer!==M||this.boundDynamicVertexBuffer2!==N||this.boundDynamicVertexBuffer3!==j?this.freshBind(c,f,y,b,S,M,N,j):(n.bindVertexArray.set(this.vao),M&&M.bind(),b&&b.dynamicDraw&&b.bind(),N&&N.bind(),j&&j.bind())}freshBind(n,c,f,y,b,S,M,N){const j=n.numAttributes,q=this.context,ne=q.gl;this.vao&&this.destroy(),this.vao=q.createVertexArray(),q.bindVertexArray.set(this.vao),this.boundProgram=n,this.boundLayoutVertexBuffer=c,this.boundPaintVertexBuffers=f,this.boundIndexBuffer=y,this.boundVertexOffset=b,this.boundDynamicVertexBuffer=S,this.boundDynamicVertexBuffer2=M,this.boundDynamicVertexBuffer3=N,c.enableAttributes(ne,n);for(const te of f)te.enableAttributes(ne,n);S&&S.enableAttributes(ne,n),M&&M.enableAttributes(ne,n),N&&N.enableAttributes(ne,n),c.bind(),c.setVertexAttribPointers(ne,n,b);for(const te of f)te.bind(),te.setVertexAttribPointers(ne,n,b);S&&(S.bind(),S.setVertexAttribPointers(ne,n,b)),y&&y.bind(),M&&(M.bind(),M.setVertexAttribPointers(ne,n,b)),N&&(N.bind(),N.setVertexAttribPointers(ne,n,b)),q.currentNumAttributes=j}destroy(){this.vao&&(this.context.deleteVertexArray(this.vao),this.vao=null)}}const ou=(x,n,c,f,y)=>({u_texture:0,u_ele_delta:x,u_fog_matrix:n,u_fog_color:c?c.properties.get("fog-color"):o.bq.white,u_fog_ground_blend:c?c.properties.get("fog-ground-blend"):1,u_fog_ground_blend_opacity:y?0:c?c.calculateFogBlendOpacity(f):0,u_horizon_color:c?c.properties.get("horizon-color"):o.bq.white,u_horizon_fog_blend:c?c.properties.get("horizon-fog-blend"):1,u_is_globe_mode:y?1:0}),Pl={mainMatrix:"u_projection_matrix",tileMercatorCoords:"u_projection_tile_mercator_coords",clippingPlane:"u_projection_clipping_plane",projectionTransition:"u_projection_transition",fallbackMatrix:"u_projection_fallback_matrix"};function $s(x){const n=[];for(let c=0;c<x.length;c++){if(x[c]===null)continue;const f=x[c].split(" ");n.push(f.pop())}return n}class La{constructor(n,c,f,y,b,S,M,N,j=[]){const q=n.gl;this.program=q.createProgram();const ne=$s(c.staticAttributes),te=f?f.getBinderAttributes():[],ue=ne.concat(te),_e=Jn.prelude.staticUniforms?$s(Jn.prelude.staticUniforms):[],De=M.staticUniforms?$s(M.staticUniforms):[],ze=c.staticUniforms?$s(c.staticUniforms):[],Oe=f?f.getBinderUniforms():[],Ge=_e.concat(De).concat(ze).concat(Oe),lt=[];for(const Lt of Ge)lt.indexOf(Lt)<0&&lt.push(Lt);const Ze=f?f.defines():[];Ei(q)&&Ze.unshift("#version 300 es"),b&&Ze.push("#define OVERDRAW_INSPECTOR;"),S&&Ze.push("#define TERRAIN3D;"),N&&Ze.push(N),j&&Ze.push(...j);let At=Ze.concat(Jn.prelude.fragmentSource,M.fragmentSource,c.fragmentSource).join(`
`),ft=Ze.concat(Jn.prelude.vertexSource,M.vertexSource,c.vertexSource).join(`
`);Ei(q)||(At=(function(Lt){return Lt.replace(/\bin\s/g,"varying ").replace("out highp vec4 fragColor;","").replace(/fragColor/g,"gl_FragColor").replace(/texture\(/g,"texture2D(")})(At),ft=(function(Lt){return Lt.replace(/\bin\s/g,"attribute ").replace(/\bout\s/g,"varying ").replace(/texture\(/g,"texture2D(")})(ft));const st=q.createShader(q.FRAGMENT_SHADER);if(q.isContextLost())return void(this.failedToCreate=!0);if(q.shaderSource(st,At),q.compileShader(st),!q.getShaderParameter(st,q.COMPILE_STATUS))throw new Error(`Could not compile fragment shader: ${q.getShaderInfoLog(st)}`);q.attachShader(this.program,st);const wt=q.createShader(q.VERTEX_SHADER);if(q.isContextLost())return void(this.failedToCreate=!0);if(q.shaderSource(wt,ft),q.compileShader(wt),!q.getShaderParameter(wt,q.COMPILE_STATUS))throw new Error(`Could not compile vertex shader: ${q.getShaderInfoLog(wt)}`);q.attachShader(this.program,wt),this.attributes={};const Dt={};this.numAttributes=ue.length;for(let Lt=0;Lt<this.numAttributes;Lt++)ue[Lt]&&(q.bindAttribLocation(this.program,Lt,ue[Lt]),this.attributes[ue[Lt]]=Lt);if(q.linkProgram(this.program),!q.getProgramParameter(this.program,q.LINK_STATUS))throw new Error(`Program failed to link: ${q.getProgramInfoLog(this.program)}`);q.deleteShader(wt),q.deleteShader(st);for(let Lt=0;Lt<lt.length;Lt++){const Rt=lt[Lt];if(Rt&&!Dt[Rt]){const Qt=q.getUniformLocation(this.program,Rt);Qt&&(Dt[Rt]=Qt)}}this.fixedUniforms=y(n,Dt),this.terrainUniforms=((Lt,Rt)=>({u_depth:new o.b$(Lt,Rt.u_depth),u_terrain:new o.b$(Lt,Rt.u_terrain),u_terrain_dim:new o.br(Lt,Rt.u_terrain_dim),u_terrain_matrix:new o.c1(Lt,Rt.u_terrain_matrix),u_terrain_unpack:new o.c2(Lt,Rt.u_terrain_unpack),u_terrain_exaggeration:new o.br(Lt,Rt.u_terrain_exaggeration)}))(n,Dt),this.projectionUniforms=((Lt,Rt)=>({u_projection_matrix:new o.c1(Lt,Rt.u_projection_matrix),u_projection_tile_mercator_coords:new o.c2(Lt,Rt.u_projection_tile_mercator_coords),u_projection_clipping_plane:new o.c2(Lt,Rt.u_projection_clipping_plane),u_projection_transition:new o.br(Lt,Rt.u_projection_transition),u_projection_fallback_matrix:new o.c1(Lt,Rt.u_projection_fallback_matrix)}))(n,Dt),this.binderUniforms=f?f.getUniforms(n,Dt):[]}draw(n,c,f,y,b,S,M,N,j,q,ne,te,ue,_e,De,ze,Oe,Ge,lt){const Ze=n.gl;if(this.failedToCreate)return;if(n.program.set(this.program),n.setDepthMode(f),n.setStencilMode(y),n.setColorMode(b),n.setCullFace(S),N){n.activeTexture.set(Ze.TEXTURE2),Ze.bindTexture(Ze.TEXTURE_2D,N.depthTexture),n.activeTexture.set(Ze.TEXTURE3),Ze.bindTexture(Ze.TEXTURE_2D,N.texture);for(const ft in this.terrainUniforms)this.terrainUniforms[ft].set(N[ft])}if(j)for(const ft in j)this.projectionUniforms[Pl[ft]].set(j[ft]);if(M)for(const ft in this.fixedUniforms)this.fixedUniforms[ft].set(M[ft]);ze&&ze.setUniforms(n,this.binderUniforms,_e,{zoom:De});let At=0;switch(c){case Ze.LINES:At=2;break;case Ze.TRIANGLES:At=3;break;case Ze.LINE_STRIP:At=1}for(const ft of ue.get()){const st=ft.vaos||(ft.vaos={});(st[q]||(st[q]=new Tl)).bind(n,this,ne,ze?ze.getPaintVertexBuffers():[],te,ft.vertexOffset,Oe,Ge,lt),Ze.drawElements(c,ft.primitiveLength*At,Ze.UNSIGNED_SHORT,ft.primitiveOffset*At*2)}}}function dl(x,n,c){const f=1/o.aO(c,1,n.transform.tileZoom),y=Math.pow(2,c.tileID.overscaledZ),b=c.tileSize*Math.pow(2,n.transform.tileZoom)/y,S=b*(c.tileID.canonical.x+c.tileID.wrap*y),M=b*c.tileID.canonical.y;return{u_image:0,u_texsize:c.imageAtlasTexture.size,u_scale:[f,x.fromScale,x.toScale],u_fade:x.t,u_pixel_coord_upper:[S>>16,M>>16],u_pixel_coord_lower:[65535&S,65535&M]}}const LA=(x,n,c,f)=>{const y=x.style.light,b=y.properties.get("position"),S=[b.x,b.y,b.z],M=o.c5();y.properties.get("anchor")==="viewport"&&o.c6(M,x.transform.bearingInRadians),o.c7(S,S,M);const N=x.transform.transformLightDirection(S),j=y.properties.get("color");return{u_lightpos:S,u_lightpos_globe:N,u_lightintensity:y.properties.get("intensity"),u_lightcolor:[j.r,j.g,j.b],u_vertical_gradient:+n,u_opacity:c,u_fill_translate:f}},Bo=(x,n,c,f,y,b,S)=>o.e(LA(x,n,c,f),dl(b,x,S),{u_height_factor:-Math.pow(2,y.overscaledZ)/S.tileSize/8}),Ll=(x,n,c,f)=>o.e(dl(n,x,c),{u_fill_translate:f}),oA=(x,n)=>({u_world:x,u_fill_translate:n}),aA=(x,n,c,f,y)=>o.e(Ll(x,n,c,y),{u_world:f}),Ml=(x,n,c,f,y)=>{const b=x.transform;let S,M,N=0;if(c.paint.get("circle-pitch-alignment")==="map"){const j=o.aO(n,1,b.zoom);S=!0,M=[j,j],N=j/(o.a5*Math.pow(2,n.tileID.overscaledZ))*2*Math.PI*y}else S=!1,M=b.pixelsToGLUnits;return{u_camera_to_center_distance:b.cameraToCenterDistance,u_scale_with_map:+(c.paint.get("circle-pitch-scale")==="map"),u_pitch_with_map:+S,u_device_pixel_ratio:x.pixelRatio,u_extrude_scale:M,u_globe_extrude_scale:N,u_translate:f}},Ws=x=>({u_pixel_extrude_scale:[1/x.width,1/x.height]}),qo=x=>({u_viewport_size:[x.width,x.height]}),Co=(x,n=1)=>({u_color:x,u_overlay:0,u_overlay_scale:n}),ga=(x,n,c,f)=>{const y=o.aO(x,1,n)/(o.a5*Math.pow(2,x.tileID.overscaledZ))*2*Math.PI*f;return{u_extrude_scale:o.aO(x,1,n),u_intensity:c,u_globe_extrude_scale:y}},fl=(x,n,c,f)=>{const y=o.N();o.c8(y,0,x.width,x.height,0,0,1);const b=x.context.gl;return{u_matrix:y,u_world:[b.drawingBufferWidth,b.drawingBufferHeight],u_image:c,u_color_ramp:f,u_opacity:n.paint.get("heatmap-opacity")}},Ma=(x,n,c)=>{const f=c.paint.get("hillshade-accent-color");let y;switch(c.paint.get("hillshade-method")){case"basic":y=4;break;case"combined":y=1;break;case"igor":y=2;break;case"multidirectional":y=3;break;default:y=0}const b=c.getIlluminationProperties();for(let S=0;S<b.directionRadians.length;S++)c.paint.get("hillshade-illumination-anchor")==="viewport"&&(b.directionRadians[S]+=x.transform.bearingInRadians);return{u_image:0,u_latrange:kl(0,n.tileID),u_exaggeration:c.paint.get("hillshade-exaggeration"),u_altitudes:b.altitudeRadians,u_azimuths:b.directionRadians,u_accent:f,u_method:y,u_highlights:b.highlightColor,u_shadows:b.shadowColor}},oc=(x,n)=>{const c=n.stride,f=o.N();return o.c8(f,0,o.a5,-o.a5,0,0,1),o.O(f,f,[0,-o.a5,0]),{u_matrix:f,u_image:1,u_dimension:[c,c],u_zoom:x.overscaledZ,u_unpack:n.getUnpackVector()}};function kl(x,n){const c=Math.pow(2,n.canonical.z),f=n.canonical.y;return[new o.ab(0,f/c).toLngLat().lat,new o.ab(0,(f+1)/c).toLngLat().lat]}const ss=(x,n,c=0)=>({u_image:0,u_unpack:n.getUnpackVector(),u_dimension:[n.stride,n.stride],u_elevation_stops:1,u_color_stops:4,u_color_ramp_size:c,u_opacity:x.paint.get("color-relief-opacity")}),pl=(x,n,c,f)=>{const y=x.transform;return{u_translation:ac(x,n,c),u_ratio:f/o.aO(n,1,y.zoom),u_device_pixel_ratio:x.pixelRatio,u_units_to_pixels:[1/y.pixelsToGLUnits[0],1/y.pixelsToGLUnits[1]]}},ml=(x,n,c,f,y)=>o.e(pl(x,n,c,f),{u_image:0,u_image_height:y}),ya=(x,n,c,f,y)=>{const b=x.transform,S=ho(n,b);return{u_translation:ac(x,n,c),u_texsize:n.imageAtlasTexture.size,u_ratio:f/o.aO(n,1,b.zoom),u_device_pixel_ratio:x.pixelRatio,u_image:0,u_scale:[S,y.fromScale,y.toScale],u_fade:y.t,u_units_to_pixels:[1/b.pixelsToGLUnits[0],1/b.pixelsToGLUnits[1]]}},Pc=(x,n,c,f,y)=>{const b=ho(n,x.transform);return o.e(pl(x,n,c,f),{u_tileratio:b,u_crossfade_from:y.fromScale,u_crossfade_to:y.toScale,u_image:0,u_mix:y.t,u_lineatlas_width:x.lineAtlas.width,u_lineatlas_height:x.lineAtlas.height})},Ul=(x,n,c,f,y,b)=>{const S=ho(n,x.transform);return o.e(pl(x,n,c,f),{u_image:0,u_image_height:b,u_tileratio:S,u_crossfade_from:y.fromScale,u_crossfade_to:y.toScale,u_image_dash:1,u_mix:y.t,u_lineatlas_width:x.lineAtlas.width,u_lineatlas_height:x.lineAtlas.height})};function ho(x,n){return 1/o.aO(x,1,n.tileZoom)}function ac(x,n,c){return o.aP(x.transform,n,c.paint.get("line-translate"),c.paint.get("line-translate-anchor"))}const gl=(x,n,c,f,y)=>{return{u_tl_parent:x,u_scale_parent:n,u_buffer_scale:1,u_fade_t:c.mix,u_opacity:c.opacity*f.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:f.paint.get("raster-brightness-min"),u_brightness_high:f.paint.get("raster-brightness-max"),u_saturation_factor:(S=f.paint.get("raster-saturation"),S>0?1-1/(1.001-S):-S),u_contrast_factor:(b=f.paint.get("raster-contrast"),b>0?1/(1-b):1+b),u_spin_weights:Dl(f.paint.get("raster-hue-rotate")),u_coords_top:[y[0].x,y[0].y,y[1].x,y[1].y],u_coords_bottom:[y[3].x,y[3].y,y[2].x,y[2].y]};var b,S};function Dl(x){x*=Math.PI/180;const n=Math.sin(x),c=Math.cos(x);return[(2*c+1)/3,(-Math.sqrt(3)*n-c+1)/3,(Math.sqrt(3)*n-c+1)/3]}const Rl=(x,n,c,f,y,b,S,M,N,j,q,ne,te)=>{const ue=S.transform;return{u_is_size_zoom_constant:+(x==="constant"||x==="source"),u_is_size_feature_constant:+(x==="constant"||x==="camera"),u_size_t:n?n.uSizeT:0,u_size:n?n.uSize:0,u_camera_to_center_distance:ue.cameraToCenterDistance,u_pitch:ue.pitch/360*2*Math.PI,u_rotate_symbol:+c,u_aspect_ratio:ue.width/ue.height,u_fade_change:S.options.fadeDuration?S.symbolFadeChange:1,u_label_plane_matrix:M,u_coord_matrix:N,u_is_text:+q,u_pitch_with_map:+f,u_is_along_line:y,u_is_variable_anchor:b,u_texsize:ne,u_texture:0,u_translation:j,u_pitched_scale:te}},Nl=(x,n,c,f,y,b,S,M,N,j,q,ne,te,ue)=>{const _e=S.transform;return o.e(Rl(x,n,c,f,y,b,S,M,N,j,q,ne,ue),{u_gamma_scale:f?Math.cos(_e.pitch*Math.PI/180)*_e.cameraToCenterDistance:1,u_device_pixel_ratio:S.pixelRatio,u_is_halo:1})},$o=(x,n,c,f,y,b,S,M,N,j,q,ne,te)=>o.e(Nl(x,n,c,f,y,b,S,M,N,j,!0,q,0,te),{u_texsize_icon:ne,u_texture_icon:1}),lc=(x,n)=>({u_opacity:x,u_color:n}),os=(x,n,c,f,y)=>o.e((function(b,S,M,N){const j=M.imageManager.getPattern(b.from.toString()),q=M.imageManager.getPattern(b.to.toString()),{width:ne,height:te}=M.imageManager.getPixelSize(),ue=Math.pow(2,N.tileID.overscaledZ),_e=N.tileSize*Math.pow(2,M.transform.tileZoom)/ue,De=_e*(N.tileID.canonical.x+N.tileID.wrap*ue),ze=_e*N.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:j.tl,u_pattern_br_a:j.br,u_pattern_tl_b:q.tl,u_pattern_br_b:q.br,u_texsize:[ne,te],u_mix:S.t,u_pattern_size_a:j.displaySize,u_pattern_size_b:q.displaySize,u_scale_a:S.fromScale,u_scale_b:S.toScale,u_tile_units_to_pixels:1/o.aO(N,1,M.transform.tileZoom),u_pixel_coord_upper:[De>>16,ze>>16],u_pixel_coord_lower:[65535&De,65535&ze]}})(c,y,n,f),{u_opacity:x}),Eo=(x,n)=>{},si={fillExtrusion:(x,n)=>({u_lightpos:new o.c3(x,n.u_lightpos),u_lightpos_globe:new o.c3(x,n.u_lightpos_globe),u_lightintensity:new o.br(x,n.u_lightintensity),u_lightcolor:new o.c3(x,n.u_lightcolor),u_vertical_gradient:new o.br(x,n.u_vertical_gradient),u_opacity:new o.br(x,n.u_opacity),u_fill_translate:new o.c4(x,n.u_fill_translate)}),fillExtrusionPattern:(x,n)=>({u_lightpos:new o.c3(x,n.u_lightpos),u_lightpos_globe:new o.c3(x,n.u_lightpos_globe),u_lightintensity:new o.br(x,n.u_lightintensity),u_lightcolor:new o.c3(x,n.u_lightcolor),u_vertical_gradient:new o.br(x,n.u_vertical_gradient),u_height_factor:new o.br(x,n.u_height_factor),u_opacity:new o.br(x,n.u_opacity),u_fill_translate:new o.c4(x,n.u_fill_translate),u_image:new o.b$(x,n.u_image),u_texsize:new o.c4(x,n.u_texsize),u_pixel_coord_upper:new o.c4(x,n.u_pixel_coord_upper),u_pixel_coord_lower:new o.c4(x,n.u_pixel_coord_lower),u_scale:new o.c3(x,n.u_scale),u_fade:new o.br(x,n.u_fade)}),fill:(x,n)=>({u_fill_translate:new o.c4(x,n.u_fill_translate)}),fillPattern:(x,n)=>({u_image:new o.b$(x,n.u_image),u_texsize:new o.c4(x,n.u_texsize),u_pixel_coord_upper:new o.c4(x,n.u_pixel_coord_upper),u_pixel_coord_lower:new o.c4(x,n.u_pixel_coord_lower),u_scale:new o.c3(x,n.u_scale),u_fade:new o.br(x,n.u_fade),u_fill_translate:new o.c4(x,n.u_fill_translate)}),fillOutline:(x,n)=>({u_world:new o.c4(x,n.u_world),u_fill_translate:new o.c4(x,n.u_fill_translate)}),fillOutlinePattern:(x,n)=>({u_world:new o.c4(x,n.u_world),u_image:new o.b$(x,n.u_image),u_texsize:new o.c4(x,n.u_texsize),u_pixel_coord_upper:new o.c4(x,n.u_pixel_coord_upper),u_pixel_coord_lower:new o.c4(x,n.u_pixel_coord_lower),u_scale:new o.c3(x,n.u_scale),u_fade:new o.br(x,n.u_fade),u_fill_translate:new o.c4(x,n.u_fill_translate)}),circle:(x,n)=>({u_camera_to_center_distance:new o.br(x,n.u_camera_to_center_distance),u_scale_with_map:new o.b$(x,n.u_scale_with_map),u_pitch_with_map:new o.b$(x,n.u_pitch_with_map),u_extrude_scale:new o.c4(x,n.u_extrude_scale),u_device_pixel_ratio:new o.br(x,n.u_device_pixel_ratio),u_globe_extrude_scale:new o.br(x,n.u_globe_extrude_scale),u_translate:new o.c4(x,n.u_translate)}),collisionBox:(x,n)=>({u_pixel_extrude_scale:new o.c4(x,n.u_pixel_extrude_scale)}),collisionCircle:(x,n)=>({u_viewport_size:new o.c4(x,n.u_viewport_size)}),debug:(x,n)=>({u_color:new o.c0(x,n.u_color),u_overlay:new o.b$(x,n.u_overlay),u_overlay_scale:new o.br(x,n.u_overlay_scale)}),depth:Eo,clippingMask:Eo,heatmap:(x,n)=>({u_extrude_scale:new o.br(x,n.u_extrude_scale),u_intensity:new o.br(x,n.u_intensity),u_globe_extrude_scale:new o.br(x,n.u_globe_extrude_scale)}),heatmapTexture:(x,n)=>({u_matrix:new o.c1(x,n.u_matrix),u_world:new o.c4(x,n.u_world),u_image:new o.b$(x,n.u_image),u_color_ramp:new o.b$(x,n.u_color_ramp),u_opacity:new o.br(x,n.u_opacity)}),hillshade:(x,n)=>({u_image:new o.b$(x,n.u_image),u_latrange:new o.c4(x,n.u_latrange),u_exaggeration:new o.br(x,n.u_exaggeration),u_altitudes:new o.ca(x,n.u_altitudes),u_azimuths:new o.ca(x,n.u_azimuths),u_accent:new o.c0(x,n.u_accent),u_method:new o.b$(x,n.u_method),u_shadows:new o.c9(x,n.u_shadows),u_highlights:new o.c9(x,n.u_highlights)}),hillshadePrepare:(x,n)=>({u_matrix:new o.c1(x,n.u_matrix),u_image:new o.b$(x,n.u_image),u_dimension:new o.c4(x,n.u_dimension),u_zoom:new o.br(x,n.u_zoom),u_unpack:new o.c2(x,n.u_unpack)}),colorRelief:(x,n)=>({u_image:new o.b$(x,n.u_image),u_unpack:new o.c2(x,n.u_unpack),u_dimension:new o.c4(x,n.u_dimension),u_elevation_stops:new o.b$(x,n.u_elevation_stops),u_color_stops:new o.b$(x,n.u_color_stops),u_color_ramp_size:new o.b$(x,n.u_color_ramp_size),u_opacity:new o.br(x,n.u_opacity)}),line:(x,n)=>({u_translation:new o.c4(x,n.u_translation),u_ratio:new o.br(x,n.u_ratio),u_device_pixel_ratio:new o.br(x,n.u_device_pixel_ratio),u_units_to_pixels:new o.c4(x,n.u_units_to_pixels)}),lineGradient:(x,n)=>({u_translation:new o.c4(x,n.u_translation),u_ratio:new o.br(x,n.u_ratio),u_device_pixel_ratio:new o.br(x,n.u_device_pixel_ratio),u_units_to_pixels:new o.c4(x,n.u_units_to_pixels),u_image:new o.b$(x,n.u_image),u_image_height:new o.br(x,n.u_image_height)}),linePattern:(x,n)=>({u_translation:new o.c4(x,n.u_translation),u_texsize:new o.c4(x,n.u_texsize),u_ratio:new o.br(x,n.u_ratio),u_device_pixel_ratio:new o.br(x,n.u_device_pixel_ratio),u_image:new o.b$(x,n.u_image),u_units_to_pixels:new o.c4(x,n.u_units_to_pixels),u_scale:new o.c3(x,n.u_scale),u_fade:new o.br(x,n.u_fade)}),lineSDF:(x,n)=>({u_translation:new o.c4(x,n.u_translation),u_ratio:new o.br(x,n.u_ratio),u_device_pixel_ratio:new o.br(x,n.u_device_pixel_ratio),u_units_to_pixels:new o.c4(x,n.u_units_to_pixels),u_image:new o.b$(x,n.u_image),u_mix:new o.br(x,n.u_mix),u_tileratio:new o.br(x,n.u_tileratio),u_crossfade_from:new o.br(x,n.u_crossfade_from),u_crossfade_to:new o.br(x,n.u_crossfade_to),u_lineatlas_width:new o.br(x,n.u_lineatlas_width),u_lineatlas_height:new o.br(x,n.u_lineatlas_height)}),lineGradientSDF:(x,n)=>({u_translation:new o.c4(x,n.u_translation),u_ratio:new o.br(x,n.u_ratio),u_device_pixel_ratio:new o.br(x,n.u_device_pixel_ratio),u_units_to_pixels:new o.c4(x,n.u_units_to_pixels),u_image:new o.b$(x,n.u_image),u_image_height:new o.br(x,n.u_image_height),u_tileratio:new o.br(x,n.u_tileratio),u_crossfade_from:new o.br(x,n.u_crossfade_from),u_crossfade_to:new o.br(x,n.u_crossfade_to),u_image_dash:new o.b$(x,n.u_image_dash),u_mix:new o.br(x,n.u_mix),u_lineatlas_width:new o.br(x,n.u_lineatlas_width),u_lineatlas_height:new o.br(x,n.u_lineatlas_height)}),raster:(x,n)=>({u_tl_parent:new o.c4(x,n.u_tl_parent),u_scale_parent:new o.br(x,n.u_scale_parent),u_buffer_scale:new o.br(x,n.u_buffer_scale),u_fade_t:new o.br(x,n.u_fade_t),u_opacity:new o.br(x,n.u_opacity),u_image0:new o.b$(x,n.u_image0),u_image1:new o.b$(x,n.u_image1),u_brightness_low:new o.br(x,n.u_brightness_low),u_brightness_high:new o.br(x,n.u_brightness_high),u_saturation_factor:new o.br(x,n.u_saturation_factor),u_contrast_factor:new o.br(x,n.u_contrast_factor),u_spin_weights:new o.c3(x,n.u_spin_weights),u_coords_top:new o.c2(x,n.u_coords_top),u_coords_bottom:new o.c2(x,n.u_coords_bottom)}),symbolIcon:(x,n)=>({u_is_size_zoom_constant:new o.b$(x,n.u_is_size_zoom_constant),u_is_size_feature_constant:new o.b$(x,n.u_is_size_feature_constant),u_size_t:new o.br(x,n.u_size_t),u_size:new o.br(x,n.u_size),u_camera_to_center_distance:new o.br(x,n.u_camera_to_center_distance),u_pitch:new o.br(x,n.u_pitch),u_rotate_symbol:new o.b$(x,n.u_rotate_symbol),u_aspect_ratio:new o.br(x,n.u_aspect_ratio),u_fade_change:new o.br(x,n.u_fade_change),u_label_plane_matrix:new o.c1(x,n.u_label_plane_matrix),u_coord_matrix:new o.c1(x,n.u_coord_matrix),u_is_text:new o.b$(x,n.u_is_text),u_pitch_with_map:new o.b$(x,n.u_pitch_with_map),u_is_along_line:new o.b$(x,n.u_is_along_line),u_is_variable_anchor:new o.b$(x,n.u_is_variable_anchor),u_texsize:new o.c4(x,n.u_texsize),u_texture:new o.b$(x,n.u_texture),u_translation:new o.c4(x,n.u_translation),u_pitched_scale:new o.br(x,n.u_pitched_scale)}),symbolSDF:(x,n)=>({u_is_size_zoom_constant:new o.b$(x,n.u_is_size_zoom_constant),u_is_size_feature_constant:new o.b$(x,n.u_is_size_feature_constant),u_size_t:new o.br(x,n.u_size_t),u_size:new o.br(x,n.u_size),u_camera_to_center_distance:new o.br(x,n.u_camera_to_center_distance),u_pitch:new o.br(x,n.u_pitch),u_rotate_symbol:new o.b$(x,n.u_rotate_symbol),u_aspect_ratio:new o.br(x,n.u_aspect_ratio),u_fade_change:new o.br(x,n.u_fade_change),u_label_plane_matrix:new o.c1(x,n.u_label_plane_matrix),u_coord_matrix:new o.c1(x,n.u_coord_matrix),u_is_text:new o.b$(x,n.u_is_text),u_pitch_with_map:new o.b$(x,n.u_pitch_with_map),u_is_along_line:new o.b$(x,n.u_is_along_line),u_is_variable_anchor:new o.b$(x,n.u_is_variable_anchor),u_texsize:new o.c4(x,n.u_texsize),u_texture:new o.b$(x,n.u_texture),u_gamma_scale:new o.br(x,n.u_gamma_scale),u_device_pixel_ratio:new o.br(x,n.u_device_pixel_ratio),u_is_halo:new o.b$(x,n.u_is_halo),u_translation:new o.c4(x,n.u_translation),u_pitched_scale:new o.br(x,n.u_pitched_scale)}),symbolTextAndIcon:(x,n)=>({u_is_size_zoom_constant:new o.b$(x,n.u_is_size_zoom_constant),u_is_size_feature_constant:new o.b$(x,n.u_is_size_feature_constant),u_size_t:new o.br(x,n.u_size_t),u_size:new o.br(x,n.u_size),u_camera_to_center_distance:new o.br(x,n.u_camera_to_center_distance),u_pitch:new o.br(x,n.u_pitch),u_rotate_symbol:new o.b$(x,n.u_rotate_symbol),u_aspect_ratio:new o.br(x,n.u_aspect_ratio),u_fade_change:new o.br(x,n.u_fade_change),u_label_plane_matrix:new o.c1(x,n.u_label_plane_matrix),u_coord_matrix:new o.c1(x,n.u_coord_matrix),u_is_text:new o.b$(x,n.u_is_text),u_pitch_with_map:new o.b$(x,n.u_pitch_with_map),u_is_along_line:new o.b$(x,n.u_is_along_line),u_is_variable_anchor:new o.b$(x,n.u_is_variable_anchor),u_texsize:new o.c4(x,n.u_texsize),u_texsize_icon:new o.c4(x,n.u_texsize_icon),u_texture:new o.b$(x,n.u_texture),u_texture_icon:new o.b$(x,n.u_texture_icon),u_gamma_scale:new o.br(x,n.u_gamma_scale),u_device_pixel_ratio:new o.br(x,n.u_device_pixel_ratio),u_is_halo:new o.b$(x,n.u_is_halo),u_translation:new o.c4(x,n.u_translation),u_pitched_scale:new o.br(x,n.u_pitched_scale)}),background:(x,n)=>({u_opacity:new o.br(x,n.u_opacity),u_color:new o.c0(x,n.u_color)}),backgroundPattern:(x,n)=>({u_opacity:new o.br(x,n.u_opacity),u_image:new o.b$(x,n.u_image),u_pattern_tl_a:new o.c4(x,n.u_pattern_tl_a),u_pattern_br_a:new o.c4(x,n.u_pattern_br_a),u_pattern_tl_b:new o.c4(x,n.u_pattern_tl_b),u_pattern_br_b:new o.c4(x,n.u_pattern_br_b),u_texsize:new o.c4(x,n.u_texsize),u_mix:new o.br(x,n.u_mix),u_pattern_size_a:new o.c4(x,n.u_pattern_size_a),u_pattern_size_b:new o.c4(x,n.u_pattern_size_b),u_scale_a:new o.br(x,n.u_scale_a),u_scale_b:new o.br(x,n.u_scale_b),u_pixel_coord_upper:new o.c4(x,n.u_pixel_coord_upper),u_pixel_coord_lower:new o.c4(x,n.u_pixel_coord_lower),u_tile_units_to_pixels:new o.br(x,n.u_tile_units_to_pixels)}),terrain:(x,n)=>({u_texture:new o.b$(x,n.u_texture),u_ele_delta:new o.br(x,n.u_ele_delta),u_fog_matrix:new o.c1(x,n.u_fog_matrix),u_fog_color:new o.c0(x,n.u_fog_color),u_fog_ground_blend:new o.br(x,n.u_fog_ground_blend),u_fog_ground_blend_opacity:new o.br(x,n.u_fog_ground_blend_opacity),u_horizon_color:new o.c0(x,n.u_horizon_color),u_horizon_fog_blend:new o.br(x,n.u_horizon_fog_blend),u_is_globe_mode:new o.br(x,n.u_is_globe_mode)}),terrainDepth:(x,n)=>({u_ele_delta:new o.br(x,n.u_ele_delta)}),terrainCoords:(x,n)=>({u_texture:new o.b$(x,n.u_texture),u_terrain_coords_id:new o.br(x,n.u_terrain_coords_id),u_ele_delta:new o.br(x,n.u_ele_delta)}),projectionErrorMeasurement:(x,n)=>({u_input:new o.br(x,n.u_input),u_output_expected:new o.br(x,n.u_output_expected)}),atmosphere:(x,n)=>({u_sun_pos:new o.c3(x,n.u_sun_pos),u_atmosphere_blend:new o.br(x,n.u_atmosphere_blend),u_globe_position:new o.c3(x,n.u_globe_position),u_globe_radius:new o.br(x,n.u_globe_radius),u_inv_proj_matrix:new o.c1(x,n.u_inv_proj_matrix)}),sky:(x,n)=>({u_sky_color:new o.c0(x,n.u_sky_color),u_horizon_color:new o.c0(x,n.u_horizon_color),u_horizon:new o.c4(x,n.u_horizon),u_horizon_normal:new o.c4(x,n.u_horizon_normal),u_sky_horizon_blend:new o.br(x,n.u_sky_horizon_blend),u_sky_blend:new o.br(x,n.u_sky_blend)})};class _i{constructor(n,c,f){this.context=n;const y=n.gl;this.buffer=y.createBuffer(),this.dynamicDraw=!!f,this.context.unbindVAO(),n.bindElementBuffer.set(this.buffer),y.bufferData(y.ELEMENT_ARRAY_BUFFER,c.arrayBuffer,this.dynamicDraw?y.DYNAMIC_DRAW:y.STATIC_DRAW),this.dynamicDraw||delete c.arrayBuffer}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(n){const c=this.context.gl;if(!this.dynamicDraw)throw new Error("Attempted to update data while not in dynamic mode.");this.context.unbindVAO(),this.bind(),c.bufferSubData(c.ELEMENT_ARRAY_BUFFER,0,n.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const Yi={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class bs{constructor(n,c,f,y){this.length=c.length,this.attributes=f,this.itemSize=c.bytesPerElement,this.dynamicDraw=y,this.context=n;const b=n.gl;this.buffer=b.createBuffer(),n.bindVertexBuffer.set(this.buffer),b.bufferData(b.ARRAY_BUFFER,c.arrayBuffer,this.dynamicDraw?b.DYNAMIC_DRAW:b.STATIC_DRAW),this.dynamicDraw||delete c.arrayBuffer}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(n){if(n.length!==this.length)throw new Error(`Length of new data is ${n.length}, which doesn't match current length of ${this.length}`);const c=this.context.gl;this.bind(),c.bufferSubData(c.ARRAY_BUFFER,0,n.arrayBuffer)}enableAttributes(n,c){for(let f=0;f<this.attributes.length;f++){const y=c.attributes[this.attributes[f].name];y!==void 0&&n.enableVertexAttribArray(y)}}setVertexAttribPointers(n,c,f){for(let y=0;y<this.attributes.length;y++){const b=this.attributes[y],S=c.attributes[b.name];S!==void 0&&n.vertexAttribPointer(S,b.components,n[Yi[b.type]],!1,this.itemSize,b.offset+this.itemSize*(f||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}class Pn{constructor(n){this.gl=n.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(n){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class Lc extends Pn{getDefault(){return o.bq.transparent}set(n){const c=this.current;(n.r!==c.r||n.g!==c.g||n.b!==c.b||n.a!==c.a||this.dirty)&&(this.gl.clearColor(n.r,n.g,n.b,n.a),this.current=n,this.dirty=!1)}}class cc extends Pn{getDefault(){return 1}set(n){(n!==this.current||this.dirty)&&(this.gl.clearDepth(n),this.current=n,this.dirty=!1)}}class ka extends Pn{getDefault(){return 0}set(n){(n!==this.current||this.dirty)&&(this.gl.clearStencil(n),this.current=n,this.dirty=!1)}}class MA extends Pn{getDefault(){return[!0,!0,!0,!0]}set(n){const c=this.current;(n[0]!==c[0]||n[1]!==c[1]||n[2]!==c[2]||n[3]!==c[3]||this.dirty)&&(this.gl.colorMask(n[0],n[1],n[2],n[3]),this.current=n,this.dirty=!1)}}class Ua extends Pn{getDefault(){return!0}set(n){(n!==this.current||this.dirty)&&(this.gl.depthMask(n),this.current=n,this.dirty=!1)}}class Mc extends Pn{getDefault(){return 255}set(n){(n!==this.current||this.dirty)&&(this.gl.stencilMask(n),this.current=n,this.dirty=!1)}}class kc extends Pn{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(n){const c=this.current;(n.func!==c.func||n.ref!==c.ref||n.mask!==c.mask||this.dirty)&&(this.gl.stencilFunc(n.func,n.ref,n.mask),this.current=n,this.dirty=!1)}}class fo extends Pn{getDefault(){const n=this.gl;return[n.KEEP,n.KEEP,n.KEEP]}set(n){const c=this.current;(n[0]!==c[0]||n[1]!==c[1]||n[2]!==c[2]||this.dirty)&&(this.gl.stencilOp(n[0],n[1],n[2]),this.current=n,this.dirty=!1)}}class Uc extends Pn{getDefault(){return!1}set(n){if(n===this.current&&!this.dirty)return;const c=this.gl;n?c.enable(c.STENCIL_TEST):c.disable(c.STENCIL_TEST),this.current=n,this.dirty=!1}}class Dc extends Pn{getDefault(){return[0,1]}set(n){const c=this.current;(n[0]!==c[0]||n[1]!==c[1]||this.dirty)&&(this.gl.depthRange(n[0],n[1]),this.current=n,this.dirty=!1)}}class au extends Pn{getDefault(){return!1}set(n){if(n===this.current&&!this.dirty)return;const c=this.gl;n?c.enable(c.DEPTH_TEST):c.disable(c.DEPTH_TEST),this.current=n,this.dirty=!1}}class yl extends Pn{getDefault(){return this.gl.LESS}set(n){(n!==this.current||this.dirty)&&(this.gl.depthFunc(n),this.current=n,this.dirty=!1)}}class kA extends Pn{getDefault(){return!1}set(n){if(n===this.current&&!this.dirty)return;const c=this.gl;n?c.enable(c.BLEND):c.disable(c.BLEND),this.current=n,this.dirty=!1}}class UA extends Pn{getDefault(){const n=this.gl;return[n.ONE,n.ZERO]}set(n){const c=this.current;(n[0]!==c[0]||n[1]!==c[1]||this.dirty)&&(this.gl.blendFunc(n[0],n[1]),this.current=n,this.dirty=!1)}}class lA extends Pn{getDefault(){return o.bq.transparent}set(n){const c=this.current;(n.r!==c.r||n.g!==c.g||n.b!==c.b||n.a!==c.a||this.dirty)&&(this.gl.blendColor(n.r,n.g,n.b,n.a),this.current=n,this.dirty=!1)}}class DA extends Pn{getDefault(){return this.gl.FUNC_ADD}set(n){(n!==this.current||this.dirty)&&(this.gl.blendEquation(n),this.current=n,this.dirty=!1)}}class Uu extends Pn{getDefault(){return!1}set(n){if(n===this.current&&!this.dirty)return;const c=this.gl;n?c.enable(c.CULL_FACE):c.disable(c.CULL_FACE),this.current=n,this.dirty=!1}}class Rc extends Pn{getDefault(){return this.gl.BACK}set(n){(n!==this.current||this.dirty)&&(this.gl.cullFace(n),this.current=n,this.dirty=!1)}}class So extends Pn{getDefault(){return this.gl.CCW}set(n){(n!==this.current||this.dirty)&&(this.gl.frontFace(n),this.current=n,this.dirty=!1)}}class cA extends Pn{getDefault(){return null}set(n){(n!==this.current||this.dirty)&&(this.gl.useProgram(n),this.current=n,this.dirty=!1)}}class lo extends Pn{getDefault(){return this.gl.TEXTURE0}set(n){(n!==this.current||this.dirty)&&(this.gl.activeTexture(n),this.current=n,this.dirty=!1)}}class pn extends Pn{getDefault(){const n=this.gl;return[0,0,n.drawingBufferWidth,n.drawingBufferHeight]}set(n){const c=this.current;(n[0]!==c[0]||n[1]!==c[1]||n[2]!==c[2]||n[3]!==c[3]||this.dirty)&&(this.gl.viewport(n[0],n[1],n[2],n[3]),this.current=n,this.dirty=!1)}}class AA extends Pn{getDefault(){return null}set(n){if(n===this.current&&!this.dirty)return;const c=this.gl;c.bindFramebuffer(c.FRAMEBUFFER,n),this.current=n,this.dirty=!1}}class Nc extends Pn{getDefault(){return null}set(n){if(n===this.current&&!this.dirty)return;const c=this.gl;c.bindRenderbuffer(c.RENDERBUFFER,n),this.current=n,this.dirty=!1}}class ch extends Pn{getDefault(){return null}set(n){if(n===this.current&&!this.dirty)return;const c=this.gl;c.bindTexture(c.TEXTURE_2D,n),this.current=n,this.dirty=!1}}class Ac extends Pn{getDefault(){return null}set(n){if(n===this.current&&!this.dirty)return;const c=this.gl;c.bindBuffer(c.ARRAY_BUFFER,n),this.current=n,this.dirty=!1}}class lu extends Pn{getDefault(){return null}set(n){const c=this.gl;c.bindBuffer(c.ELEMENT_ARRAY_BUFFER,n),this.current=n,this.dirty=!1}}class Ii extends Pn{getDefault(){return null}set(n){var c;if(n===this.current&&!this.dirty)return;const f=this.gl;Ei(f)?f.bindVertexArray(n):(c=f.getExtension("OES_vertex_array_object"))===null||c===void 0||c.bindVertexArrayOES(n),this.current=n,this.dirty=!1}}class cu extends Pn{getDefault(){return 4}set(n){if(n===this.current&&!this.dirty)return;const c=this.gl;c.pixelStorei(c.UNPACK_ALIGNMENT,n),this.current=n,this.dirty=!1}}class RA extends Pn{getDefault(){return!1}set(n){if(n===this.current&&!this.dirty)return;const c=this.gl;c.pixelStorei(c.UNPACK_PREMULTIPLY_ALPHA_WEBGL,n),this.current=n,this.dirty=!1}}class uc extends Pn{getDefault(){return!1}set(n){if(n===this.current&&!this.dirty)return;const c=this.gl;c.pixelStorei(c.UNPACK_FLIP_Y_WEBGL,n),this.current=n,this.dirty=!1}}class Ql extends Pn{constructor(n,c){super(n),this.context=n,this.parent=c}getDefault(){return null}}class Qc extends Ql{setDirty(){this.dirty=!0}set(n){if(n===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const c=this.gl;c.framebufferTexture2D(c.FRAMEBUFFER,c.COLOR_ATTACHMENT0,c.TEXTURE_2D,n,0),this.current=n,this.dirty=!1}}class Oc extends Ql{set(n){if(n===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const c=this.gl;c.framebufferRenderbuffer(c.FRAMEBUFFER,c.DEPTH_ATTACHMENT,c.RENDERBUFFER,n),this.current=n,this.dirty=!1}}class NA extends Ql{set(n){if(n===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const c=this.gl;c.framebufferRenderbuffer(c.FRAMEBUFFER,c.DEPTH_STENCIL_ATTACHMENT,c.RENDERBUFFER,n),this.current=n,this.dirty=!1}}const hc="Framebuffer is not complete";class Au{constructor(n,c,f,y,b){this.context=n,this.width=c,this.height=f;const S=n.gl,M=this.framebuffer=S.createFramebuffer();if(this.colorAttachment=new Qc(n,M),y)this.depthAttachment=b?new NA(n,M):new Oc(n,M);else if(b)throw new Error("Stencil cannot be set without depth");if(S.checkFramebufferStatus(S.FRAMEBUFFER)!==S.FRAMEBUFFER_COMPLETE)throw new Error(hc)}destroy(){const n=this.context.gl,c=this.colorAttachment.get();if(c&&n.deleteTexture(c),this.depthAttachment){const f=this.depthAttachment.get();f&&n.deleteRenderbuffer(f)}n.deleteFramebuffer(this.framebuffer)}}class Du{constructor(n){var c,f;if(this.gl=n,this.clearColor=new Lc(this),this.clearDepth=new cc(this),this.clearStencil=new ka(this),this.colorMask=new MA(this),this.depthMask=new Ua(this),this.stencilMask=new Mc(this),this.stencilFunc=new kc(this),this.stencilOp=new fo(this),this.stencilTest=new Uc(this),this.depthRange=new Dc(this),this.depthTest=new au(this),this.depthFunc=new yl(this),this.blend=new kA(this),this.blendFunc=new UA(this),this.blendColor=new lA(this),this.blendEquation=new DA(this),this.cullFace=new Uu(this),this.cullFaceSide=new Rc(this),this.frontFace=new So(this),this.program=new cA(this),this.activeTexture=new lo(this),this.viewport=new pn(this),this.bindFramebuffer=new AA(this),this.bindRenderbuffer=new Nc(this),this.bindTexture=new ch(this),this.bindVertexBuffer=new Ac(this),this.bindElementBuffer=new lu(this),this.bindVertexArray=new Ii(this),this.pixelStoreUnpack=new cu(this),this.pixelStoreUnpackPremultiplyAlpha=new RA(this),this.pixelStoreUnpackFlipY=new uc(this),this.extTextureFilterAnisotropic=n.getExtension("EXT_texture_filter_anisotropic")||n.getExtension("MOZ_EXT_texture_filter_anisotropic")||n.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=n.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.maxTextureSize=n.getParameter(n.MAX_TEXTURE_SIZE),Ei(n)){this.HALF_FLOAT=n.HALF_FLOAT;const y=n.getExtension("EXT_color_buffer_half_float");this.RGBA16F=(c=n.RGBA16F)!==null&&c!==void 0?c:y?.RGBA16F_EXT,this.RGB16F=(f=n.RGB16F)!==null&&f!==void 0?f:y?.RGB16F_EXT,n.getExtension("EXT_color_buffer_float")}else{n.getExtension("EXT_color_buffer_half_float"),n.getExtension("OES_texture_half_float_linear");const y=n.getExtension("OES_texture_half_float");this.HALF_FLOAT=y?.HALF_FLOAT_OES}}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.bindVertexArray.dirty=!0,this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(n,c){return new _i(this,n,c)}createVertexBuffer(n,c,f){return new bs(this,n,c,f)}createRenderbuffer(n,c,f){const y=this.gl,b=y.createRenderbuffer();return this.bindRenderbuffer.set(b),y.renderbufferStorage(y.RENDERBUFFER,n,c,f),this.bindRenderbuffer.set(null),b}createFramebuffer(n,c,f,y){return new Au(this,n,c,f,y)}clear({color:n,depth:c,stencil:f}){const y=this.gl;let b=0;n&&(b|=y.COLOR_BUFFER_BIT,this.clearColor.set(n),this.colorMask.set([!0,!0,!0,!0])),c!==void 0&&(b|=y.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(c),this.depthMask.set(!0)),f!==void 0&&(b|=y.STENCIL_BUFFER_BIT,this.clearStencil.set(f),this.stencilMask.set(255)),y.clear(b)}setCullFace(n){n.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(n.mode),this.frontFace.set(n.frontFace))}setDepthMode(n){n.func!==this.gl.ALWAYS||n.mask?(this.depthTest.set(!0),this.depthFunc.set(n.func),this.depthMask.set(n.mask),this.depthRange.set(n.range)):this.depthTest.set(!1)}setStencilMode(n){n.test.func!==this.gl.ALWAYS||n.mask?(this.stencilTest.set(!0),this.stencilMask.set(n.mask),this.stencilOp.set([n.fail,n.depthFail,n.pass]),this.stencilFunc.set({func:n.test.func,ref:n.ref,mask:n.test.mask})):this.stencilTest.set(!1)}setColorMode(n){o.bS(n.blendFunction,Qn.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(n.blendFunction),this.blendColor.set(n.blendColor)),this.colorMask.set(n.mask)}createVertexArray(){var n;return Ei(this.gl)?this.gl.createVertexArray():(n=this.gl.getExtension("OES_vertex_array_object"))===null||n===void 0?void 0:n.createVertexArrayOES()}deleteVertexArray(n){var c;return Ei(this.gl)?this.gl.deleteVertexArray(n):(c=this.gl.getExtension("OES_vertex_array_object"))===null||c===void 0?void 0:c.deleteVertexArrayOES(n)}unbindVAO(){this.bindVertexArray.set(null)}}let uA;function zc(x,n,c,f,y){const b=x.context,S=x.transform,M=b.gl,N=x.useProgram("collisionBox"),j=[];let q=0,ne=0;for(let Oe=0;Oe<f.length;Oe++){const Ge=f[Oe],lt=n.getTile(Ge).getBucket(c);if(!lt)continue;const Ze=y?lt.textCollisionBox:lt.iconCollisionBox,At=lt.collisionCircleArray;At.length>0&&(j.push({circleArray:At,circleOffset:ne,coord:Ge}),q+=At.length/4,ne=q),Ze&&N.draw(b,M.LINES,mn.disabled,bn.disabled,x.colorModeForRenderPass(),En.disabled,Ws(x.transform),x.style.map.terrain&&x.style.map.terrain.getTerrainData(Ge),S.getProjectionData({overscaledTileID:Ge,applyGlobeMatrix:!0,applyTerrainMatrix:!0}),c.id,Ze.layoutVertexBuffer,Ze.indexBuffer,Ze.segments,null,x.transform.zoom,null,null,Ze.collisionVertexBuffer)}if(!y||!j.length)return;const te=x.useProgram("collisionCircle"),ue=new o.cb;ue.resize(4*q),ue._trim();let _e=0;for(const Oe of j)for(let Ge=0;Ge<Oe.circleArray.length/4;Ge++){const lt=4*Ge,Ze=Oe.circleArray[lt+0],At=Oe.circleArray[lt+1],ft=Oe.circleArray[lt+2],st=Oe.circleArray[lt+3];ue.emplace(_e++,Ze,At,ft,st,0),ue.emplace(_e++,Ze,At,ft,st,1),ue.emplace(_e++,Ze,At,ft,st,2),ue.emplace(_e++,Ze,At,ft,st,3)}(!uA||uA.length<2*q)&&(uA=(function(Oe){const Ge=2*Oe,lt=new o.cd;lt.resize(Ge),lt._trim();for(let Ze=0;Ze<Ge;Ze++){const At=6*Ze;lt.uint16[At+0]=4*Ze+0,lt.uint16[At+1]=4*Ze+1,lt.uint16[At+2]=4*Ze+2,lt.uint16[At+3]=4*Ze+2,lt.uint16[At+4]=4*Ze+3,lt.uint16[At+5]=4*Ze+0}return lt})(q));const De=b.createIndexBuffer(uA,!0),ze=b.createVertexBuffer(ue,o.cc.members,!0);for(const Oe of j){const Ge=qo(x.transform);te.draw(b,M.TRIANGLES,mn.disabled,bn.disabled,x.colorModeForRenderPass(),En.disabled,Ge,x.style.map.terrain&&x.style.map.terrain.getTerrainData(Oe.coord),null,c.id,ze,De,o.aY.simpleSegment(0,2*Oe.circleOffset,Oe.circleArray.length,Oe.circleArray.length/2),null,x.transform.zoom,null,null,null)}ze.destroy(),De.destroy()}const QA=o.as(new Float32Array(16));function OA(x,n,c,f,y,b){const{horizontalAlign:S,verticalAlign:M}=o.aT(x);return new o.P((-(S-.5)*n/y+f[0])*b,(-(M-.5)*c/y+f[1])*b)}function dc(x,n,c,f,y,b){const S=n.tileAnchorPoint.add(new o.P(n.translation[0],n.translation[1]));if(n.pitchWithMap){let M=f.mult(b);c||(M=M.rotate(-y));const N=S.add(M);return dn(N.x,N.y,n.pitchedLabelPlaneMatrix,n.getElevation).point}if(c){const M=jn(n.tileAnchorPoint.x+1,n.tileAnchorPoint.y,n).point.sub(x),N=Math.atan(M.y/M.x)+(M.x<0?Math.PI:0);return x.add(f.rotate(N))}return x.add(f)}function hA(x,n,c,f,y,b,S,M,N,j,q,ne){const te=x.text.placedSymbolArray,ue=x.text.dynamicLayoutVertexArray,_e=x.icon.dynamicLayoutVertexArray,De={};ue.clear();for(let ze=0;ze<te.length;ze++){const Oe=te.get(ze),Ge=Oe.hidden||!Oe.crossTileID||x.allowVerticalPlacement&&!Oe.placedOrientation?null:f[Oe.crossTileID];if(Ge){const lt=new o.P(Oe.anchorX,Oe.anchorY),Ze={getElevation:ne,width:y.width,height:y.height,pitchedLabelPlaneMatrix:b,pitchWithMap:c,transform:y,tileAnchorPoint:lt,translation:j,unwrappedTileID:q},At=c?ll(lt.x,lt.y,Ze):jn(lt.x,lt.y,Ze),ft=ol(y.cameraToCenterDistance,At.signedDistanceFromCamera);let st=o.aB(x.textSizeData,M,Oe)*ft/o.aN;c&&(st*=x.tilePixelRatio/S);const{width:wt,height:Dt,anchor:Lt,textOffset:Rt,textBoxScale:Qt}=Ge,nr=OA(Lt,wt,Dt,Rt,Qt,st),ur=y.getPitchedTextCorrection(lt.x+j[0],lt.y+j[1],q),rr=dc(At.point,Ze,n,nr,-y.bearingInRadians,ur),Rr=x.allowVerticalPlacement&&Oe.placedOrientation===o.aA.vertical?Math.PI/2:0;for(let vn=0;vn<Oe.numGlyphs;vn++)o.aH(ue,rr,Rr);N&&Oe.associatedIconIndex>=0&&(De[Oe.associatedIconIndex]={shiftedAnchor:rr,angle:Rr})}else Ba(Oe.numGlyphs,ue)}if(N){_e.clear();const ze=x.icon.placedSymbolArray;for(let Oe=0;Oe<ze.length;Oe++){const Ge=ze.get(Oe);if(Ge.hidden)Ba(Ge.numGlyphs,_e);else{const lt=De[Oe];if(lt)for(let Ze=0;Ze<Ge.numGlyphs;Ze++)o.aH(_e,lt.shiftedAnchor,lt.angle);else Ba(Ge.numGlyphs,_e)}}x.icon.dynamicLayoutVertexBuffer.updateData(_e)}x.text.dynamicLayoutVertexBuffer.updateData(ue)}function Ru(x,n,c){return c.iconsInText&&n?"symbolTextAndIcon":x?"symbolSDF":"symbolIcon"}function dA(x,n,c,f,y,b,S,M,N,j,q,ne,te){const ue=x.context,_e=ue.gl,De=x.transform,ze=M==="map",Oe=N==="map",Ge=M!=="viewport"&&c.layout.get("symbol-placement")!=="point",lt=ze&&!Oe&&!Ge,Ze=!c.layout.get("symbol-sort-key").isConstant();let At=!1;const ft=x.getDepthModeForSublayer(0,mn.ReadOnly),st=c._unevaluatedLayout.hasValue("text-variable-anchor")||c._unevaluatedLayout.hasValue("text-variable-anchor-offset"),wt=[],Dt=De.getCircleRadiusCorrection();for(const Lt of f){const Rt=n.getTile(Lt),Qt=Rt.getBucket(c);if(!Qt)continue;const nr=y?Qt.text:Qt.icon;if(!nr||!nr.segments.get().length||!nr.hasVisibleVertices)continue;const ur=nr.programConfigurations.get(c.id),rr=y||Qt.sdfIcons,Rr=y?Qt.textSizeData:Qt.iconSizeData,vn=Oe||De.pitch!==0,Ai=x.useProgram(Ru(rr,y,Qt),ur),Oi=o.az(Rr,De.zoom),ui=x.style.map.terrain&&x.style.map.terrain.getTerrainData(Lt);let Vi,Pi,Is,Gi,eo=[0,0],Ts=null;if(y)Pi=Rt.glyphAtlasTexture,Is=_e.LINEAR,Vi=Rt.glyphAtlasTexture.size,Qt.iconsInText&&(eo=Rt.imageAtlasTexture.size,Ts=Rt.imageAtlasTexture,Gi=vn||x.options.rotating||x.options.zooming||Rr.kind==="composite"||Rr.kind==="camera"?_e.LINEAR:_e.NEAREST);else{const Os=c.layout.get("icon-size").constantOr(0)!==1||Qt.iconsNeedLinear;Pi=Rt.imageAtlasTexture,Is=rr||x.options.rotating||x.options.zooming||Os||vn?_e.LINEAR:_e.NEAREST,Vi=Rt.imageAtlasTexture.size}const hi=o.aO(Rt,1,x.transform.zoom),Ao=Di(ze,x.transform,hi),yo=o.N();o.aC(yo,Ao);const fc=El(Oe,ze,x.transform,hi),mA=o.aP(De,Rt,b,S),GA=De.getProjectionData({overscaledTileID:Lt,applyGlobeMatrix:!te,applyTerrainMatrix:!0}),zu=st&&Qt.hasTextData(),pc=c.layout.get("icon-text-fit")!=="none"&&zu&&Qt.hasIconData();if(Ge){const Os=x.style.map.terrain?(Ka,cs)=>x.style.map.terrain.getElevation(Lt,Ka,cs):null,ro=c.layout.get("text-rotation-alignment")==="map";ec(Qt,x,y,Ao,yo,Oe,j,ro,Lt.toUnwrapped(),De.width,De.height,mA,Os)}const Gl=y&&st||pc,to=Ge||Gl?QA:Oe?Ao:x.transform.clipSpaceToPixelsMatrix,Zo=rr&&c.paint.get(y?"text-halo-width":"icon-halo-width").constantOr(1)!==0;let vo;vo=rr?Qt.iconsInText?$o(Rr.kind,Oi,lt,Oe,Ge,Gl,x,to,fc,mA,Vi,eo,Dt):Nl(Rr.kind,Oi,lt,Oe,Ge,Gl,x,to,fc,mA,y,Vi,0,Dt):Rl(Rr.kind,Oi,lt,Oe,Ge,Gl,x,to,fc,mA,y,Vi,Dt);const vl={program:Ai,buffers:nr,uniformValues:vo,projectionData:GA,atlasTexture:Pi,atlasTextureIcon:Ts,atlasInterpolation:Is,atlasInterpolationIcon:Gi,isSDF:rr,hasHalo:Zo};if(Ze&&Qt.canOverlap){At=!0;const Os=nr.segments.get();for(const ro of Os)wt.push({segments:new o.aY([ro]),sortKey:ro.sortKey,state:vl,terrainData:ui})}else wt.push({segments:nr.segments,sortKey:0,state:vl,terrainData:ui})}At&&wt.sort(((Lt,Rt)=>Lt.sortKey-Rt.sortKey));for(const Lt of wt){const Rt=Lt.state;if(ue.activeTexture.set(_e.TEXTURE0),Rt.atlasTexture.bind(Rt.atlasInterpolation,_e.CLAMP_TO_EDGE),Rt.atlasTextureIcon&&(ue.activeTexture.set(_e.TEXTURE1),Rt.atlasTextureIcon&&Rt.atlasTextureIcon.bind(Rt.atlasInterpolationIcon,_e.CLAMP_TO_EDGE)),Rt.isSDF){const Qt=Rt.uniformValues;Rt.hasHalo&&(Qt.u_is_halo=1,uu(Rt.buffers,Lt.segments,c,x,Rt.program,ft,q,ne,Qt,Rt.projectionData,Lt.terrainData)),Qt.u_is_halo=0}uu(Rt.buffers,Lt.segments,c,x,Rt.program,ft,q,ne,Rt.uniformValues,Rt.projectionData,Lt.terrainData)}}function uu(x,n,c,f,y,b,S,M,N,j,q){const ne=f.context;y.draw(ne,ne.gl.TRIANGLES,b,S,M,En.backCCW,N,q,j,c.id,x.layoutVertexBuffer,x.indexBuffer,n,c.paint,f.transform.zoom,x.programConfigurations.get(c.id),x.dynamicLayoutVertexBuffer,x.opacityVertexBuffer)}function Ah(x,n,c,f,y){const b=x.context,S=b.gl,M=bn.disabled,N=new Qn([S.ONE,S.ONE],o.bq.transparent,[!0,!0,!0,!0]),j=n.getBucket(c);if(!j)return;const q=f.key;let ne=c.heatmapFbos.get(q);ne||(ne=hu(b,n.tileSize,n.tileSize),c.heatmapFbos.set(q,ne)),b.bindFramebuffer.set(ne.framebuffer),b.viewport.set([0,0,n.tileSize,n.tileSize]),b.clear({color:o.bq.transparent});const te=j.programConfigurations.get(c.id),ue=x.useProgram("heatmap",te,!y),_e=x.transform.getProjectionData({overscaledTileID:n.tileID,applyGlobeMatrix:!0,applyTerrainMatrix:!0}),De=x.style.map.terrain.getTerrainData(f);ue.draw(b,S.TRIANGLES,mn.disabled,M,N,En.disabled,ga(n,x.transform.zoom,c.paint.get("heatmap-intensity"),1),De,_e,c.id,j.layoutVertexBuffer,j.indexBuffer,j.segments,c.paint,x.transform.zoom,te)}function jh(x,n,c,f,y){const b=x.context,S=b.gl,M=x.transform;b.setColorMode(x.colorModeForRenderPass());const N=zA(b,n),j=c.key,q=n.heatmapFbos.get(j);if(!q)return;b.activeTexture.set(S.TEXTURE0),S.bindTexture(S.TEXTURE_2D,q.colorAttachment.get()),b.activeTexture.set(S.TEXTURE1),N.bind(S.LINEAR,S.CLAMP_TO_EDGE);const ne=M.getProjectionData({overscaledTileID:c,applyTerrainMatrix:y,applyGlobeMatrix:!f});x.useProgram("heatmapTexture").draw(b,S.TRIANGLES,mn.disabled,bn.disabled,x.colorModeForRenderPass(),En.disabled,fl(x,n,0,1),null,ne,n.id,x.rasterBoundsBuffer,x.quadTriangleIndexBuffer,x.rasterBoundsSegments,n.paint,M.zoom),q.destroy(),n.heatmapFbos.delete(j)}function hu(x,n,c){var f,y;const b=x.gl,S=b.createTexture();b.bindTexture(b.TEXTURE_2D,S),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_S,b.CLAMP_TO_EDGE),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_T,b.CLAMP_TO_EDGE),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MIN_FILTER,b.LINEAR),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MAG_FILTER,b.LINEAR);const M=(f=x.HALF_FLOAT)!==null&&f!==void 0?f:b.UNSIGNED_BYTE,N=(y=x.RGBA16F)!==null&&y!==void 0?y:b.RGBA;b.texImage2D(b.TEXTURE_2D,0,N,n,c,0,b.RGBA,M,null);const j=x.createFramebuffer(n,c,!1,!1);return j.colorAttachment.set(S),j}function zA(x,n){return n.colorRampTexture||(n.colorRampTexture=new o.T(x,n.colorRamp,x.gl.RGBA)),n.colorRampTexture}function po(x,n,c,f,y,b,S,M){let N=256;if(y.stepInterpolant){const j=n.getSource().maxzoom,q=S.canonical.z===j?Math.ceil(1<<x.transform.maxZoom-S.canonical.z):1;N=o.ao(o.cf(b.maxLineLength/o.a5*1024*q),256,c.maxTextureSize)}return M.gradient=o.cg({expression:y.gradientExpression(),evaluationKey:"lineProgress",resolution:N,image:M.gradient||void 0,clips:b.lineClipsArray}),M.texture?M.texture.update(M.gradient):M.texture=new o.T(c,M.gradient,f.RGBA),M.version=y.gradientVersion,M.texture}function va(x,n,c,f,y){x.activeTexture.set(n.TEXTURE0),c.imageAtlasTexture.bind(n.LINEAR,n.CLAMP_TO_EDGE),f.updatePaintBuffers(y)}function $n(x,n,c,f,y,b){(y||x.lineAtlas.dirty)&&(n.activeTexture.set(c.TEXTURE0),x.lineAtlas.bind(n)),f.updatePaintBuffers(b)}function mo(x,n,c,f,y,b,S){const M=b.gradients[y.id];let N=M.texture;y.gradientVersion!==M.version&&(N=po(x,n,c,f,y,b,S,M)),c.activeTexture.set(f.TEXTURE0),N.bind(y.stepInterpolant?f.NEAREST:f.LINEAR,f.CLAMP_TO_EDGE)}function co(x,n,c,f,y,b,S,M,N){const j=b.gradients[y.id];let q=j.texture;y.gradientVersion!==j.version&&(q=po(x,n,c,f,y,b,S,j)),c.activeTexture.set(f.TEXTURE0),q.bind(y.stepInterpolant?f.NEAREST:f.LINEAR,f.CLAMP_TO_EDGE),c.activeTexture.set(f.TEXTURE1),x.lineAtlas.bind(c),M.updatePaintBuffers(N)}function Rs(x,n,c,f,y){if(!c||!f||!f.imageAtlas)return;const b=f.imageAtlas.patternPositions;let S=b[c.to.toString()],M=b[c.from.toString()];if(!S&&M&&(S=M),!M&&S&&(M=S),!S||!M){const N=y.getPaintProperty(n);S=b[N],M=b[N]}S&&M&&x.setConstantPatternPositions(S,M)}function Zs(x,n,c,f,y,b,S,M){const N=x.context.gl,j="fill-pattern",q=c.paint.get(j),ne=q&&q.constantOr(1),te=c.getCrossfadeParameters();let ue,_e,De,ze,Oe;const Ge=x.transform,lt=c.paint.get("fill-translate"),Ze=c.paint.get("fill-translate-anchor");S?(_e=ne&&!c.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",ue=N.LINES):(_e=ne?"fillPattern":"fill",ue=N.TRIANGLES);const At=q.constantOr(null);for(const ft of f){const st=n.getTile(ft);if(ne&&!st.patternsLoaded())continue;const wt=st.getBucket(c);if(!wt)continue;const Dt=wt.programConfigurations.get(c.id),Lt=x.useProgram(_e,Dt),Rt=x.style.map.terrain&&x.style.map.terrain.getTerrainData(ft);ne&&(x.context.activeTexture.set(N.TEXTURE0),st.imageAtlasTexture.bind(N.LINEAR,N.CLAMP_TO_EDGE),Dt.updatePaintBuffers(te)),Rs(Dt,j,At,st,c);const Qt=Ge.getProjectionData({overscaledTileID:ft,applyGlobeMatrix:!M,applyTerrainMatrix:!0}),nr=o.aP(Ge,st,lt,Ze);if(S){ze=wt.indexBuffer2,Oe=wt.segments2;const rr=[N.drawingBufferWidth,N.drawingBufferHeight];De=_e==="fillOutlinePattern"&&ne?aA(x,te,st,rr,nr):oA(rr,nr)}else ze=wt.indexBuffer,Oe=wt.segments,De=ne?Ll(x,te,st,nr):{u_fill_translate:nr};const ur=x.stencilModeForClipping(ft);Lt.draw(x.context,ue,y,ur,b,En.backCCW,De,Rt,Qt,c.id,wt.layoutVertexBuffer,ze,Oe,c.paint,x.transform.zoom,Dt)}}function Nu(x,n,c,f,y,b,S,M){const N=x.context,j=N.gl,q="fill-extrusion-pattern",ne=c.paint.get(q),te=ne.constantOr(1),ue=c.getCrossfadeParameters(),_e=c.paint.get("fill-extrusion-opacity"),De=ne.constantOr(null),ze=x.transform;for(const Oe of f){const Ge=n.getTile(Oe),lt=Ge.getBucket(c);if(!lt)continue;const Ze=x.style.map.terrain&&x.style.map.terrain.getTerrainData(Oe),At=lt.programConfigurations.get(c.id),ft=x.useProgram(te?"fillExtrusionPattern":"fillExtrusion",At);te&&(x.context.activeTexture.set(j.TEXTURE0),Ge.imageAtlasTexture.bind(j.LINEAR,j.CLAMP_TO_EDGE),At.updatePaintBuffers(ue));const st=ze.getProjectionData({overscaledTileID:Oe,applyGlobeMatrix:!M,applyTerrainMatrix:!0});Rs(At,q,De,Ge,c);const wt=o.aP(ze,Ge,c.paint.get("fill-extrusion-translate"),c.paint.get("fill-extrusion-translate-anchor")),Dt=c.paint.get("fill-extrusion-vertical-gradient"),Lt=te?Bo(x,Dt,_e,wt,Oe,ue,Ge):LA(x,Dt,_e,wt);ft.draw(N,N.gl.TRIANGLES,y,b,S,En.backCCW,Lt,Ze,st,c.id,lt.layoutVertexBuffer,lt.indexBuffer,lt.segments,c.paint,x.transform.zoom,At,x.style.map.terrain&&lt.centroidVertexBuffer)}}function Hc(x,n,c,f,y,b,S,M,N){var j;const q=x.style.projection,ne=x.context,te=x.transform,ue=ne.gl,_e=[`#define NUM_ILLUMINATION_SOURCES ${c.paint.get("hillshade-highlight-color").values.length}`],De=x.useProgram("hillshade",null,!1,_e),ze=!x.options.moving;for(const Oe of f){const Ge=n.getTile(Oe),lt=Ge.fbo;if(!lt)continue;const Ze=q.getMeshFromTileID(ne,Oe.canonical,M,!0,"raster"),At=(j=x.style.map.terrain)===null||j===void 0?void 0:j.getTerrainData(Oe);ne.activeTexture.set(ue.TEXTURE0),ue.bindTexture(ue.TEXTURE_2D,lt.colorAttachment.get());const ft=te.getProjectionData({overscaledTileID:Oe,aligned:ze,applyGlobeMatrix:!N,applyTerrainMatrix:!0});De.draw(ne,ue.TRIANGLES,b,y[Oe.overscaledZ],S,En.backCCW,Ma(x,Ge,c),At,ft,c.id,Ze.vertexBuffer,Ze.indexBuffer,Ze.segments)}}function Da(x,n,c,f,y,b,S,M,N){var j;const q=x.style.projection,ne=x.context,te=x.transform,ue=ne.gl,_e=x.useProgram("colorRelief"),De=!x.options.moving;let ze=!0,Oe=0;for(const Ge of f){const lt=n.getTile(Ge),Ze=lt.dem;if(ze){const Lt=ue.getParameter(ue.MAX_TEXTURE_SIZE),{elevationTexture:Rt,colorTexture:Qt}=c.getColorRampTextures(ne,Lt,Ze.getUnpackVector());ne.activeTexture.set(ue.TEXTURE1),Rt.bind(ue.NEAREST,ue.CLAMP_TO_EDGE),ne.activeTexture.set(ue.TEXTURE4),Qt.bind(ue.LINEAR,ue.CLAMP_TO_EDGE),ze=!1,Oe=Rt.size[0]}if(!Ze||!Ze.data)continue;const At=Ze.stride,ft=Ze.getPixels();if(ne.activeTexture.set(ue.TEXTURE0),ne.pixelStoreUnpackPremultiplyAlpha.set(!1),lt.demTexture=lt.demTexture||x.getTileTexture(At),lt.demTexture){const Lt=lt.demTexture;Lt.update(ft,{premultiply:!1}),Lt.bind(ue.LINEAR,ue.CLAMP_TO_EDGE)}else lt.demTexture=new o.T(ne,ft,ue.RGBA,{premultiply:!1}),lt.demTexture.bind(ue.LINEAR,ue.CLAMP_TO_EDGE);const st=q.getMeshFromTileID(ne,Ge.canonical,M,!0,"raster"),wt=(j=x.style.map.terrain)===null||j===void 0?void 0:j.getTerrainData(Ge),Dt=te.getProjectionData({overscaledTileID:Ge,aligned:De,applyGlobeMatrix:!N,applyTerrainMatrix:!0});_e.draw(ne,ue.TRIANGLES,b,y[Ge.overscaledZ],S,En.backCCW,ss(c,lt.dem,Oe),wt,Dt,c.id,st.vertexBuffer,st.indexBuffer,st.segments)}}const Ra=[new o.P(0,0),new o.P(o.a5,0),new o.P(o.a5,o.a5),new o.P(0,o.a5)];function Na(x,n,c,f,y,b,S,M,N=!1,j=!1){const q=f[f.length-1].overscaledZ,ne=x.context,te=ne.gl,ue=x.useProgram("raster"),_e=x.transform,De=x.style.projection,ze=x.colorModeForRenderPass(),Oe=!x.options.moving,Ge=c.paint.get("raster-opacity"),lt=c.paint.get("raster-resampling"),Ze=c.paint.get("raster-fade-duration"),At=!!x.style.map.terrain;for(const ft of f){const st=x.getDepthModeForSublayer(ft.overscaledZ-q,Ge===1?mn.ReadWrite:mn.ReadOnly,te.LESS),wt=n.getTile(ft),Dt=lt==="nearest"?te.NEAREST:te.LINEAR;ne.activeTexture.set(te.TEXTURE0),wt.texture.bind(Dt,te.CLAMP_TO_EDGE,te.LINEAR_MIPMAP_NEAREST),ne.activeTexture.set(te.TEXTURE1);const{parentTile:Lt,parentScaleBy:Rt,parentTopLeft:Qt,fadeValues:nr}=HA(wt,n,Ze,At);wt.fadeOpacity=nr.tileOpacity,Lt?(Lt.fadeOpacity=nr.parentTileOpacity,Lt.texture.bind(Dt,te.CLAMP_TO_EDGE,te.LINEAR_MIPMAP_NEAREST)):wt.texture.bind(Dt,te.CLAMP_TO_EDGE,te.LINEAR_MIPMAP_NEAREST),wt.texture.useMipmap&&ne.extTextureFilterAnisotropic&&x.transform.pitch>20&&te.texParameterf(te.TEXTURE_2D,ne.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,ne.extTextureFilterAnisotropicMax);const ur=x.style.map.terrain&&x.style.map.terrain.getTerrainData(ft),rr=_e.getProjectionData({overscaledTileID:ft,aligned:Oe,applyGlobeMatrix:!j,applyTerrainMatrix:!0}),Rr=gl(Qt,Rt,nr.fadeMix,c,M),vn=De.getMeshFromTileID(ne,ft.canonical,b,S,"raster");ue.draw(ne,te.TRIANGLES,st,y?y[ft.overscaledZ]:bn.disabled,ze,N?En.frontCCW:En.backCCW,Rr,ur,rr,c.id,vn.vertexBuffer,vn.indexBuffer,vn.segments)}}function HA(x,n,c,f){const y={parentTile:null,parentScaleBy:1,parentTopLeft:[0,0],fadeValues:{tileOpacity:1,parentTileOpacity:1,fadeMix:{opacity:1,mix:0}}};if(c===0||f)return y;if(x.fadingParentID){const b=n.getLoadedTile(x.fadingParentID);if(!b)return y;const S=Math.pow(2,b.tileID.overscaledZ-x.tileID.overscaledZ),M=[x.tileID.canonical.x*S%1,x.tileID.canonical.y*S%1],N=(function(j,q,ne){const te=z(),ue=(te-q.timeAdded)/ne,_e=j.fadingDirection===bt.Incoming,De=o.ao((te-j.timeAdded)/ne,0,1),ze=o.ao(1-ue,0,1),Oe=_e?De:ze;return{tileOpacity:Oe,parentTileOpacity:_e?ze:De,fadeMix:{opacity:1,mix:1-Oe}}})(x,b,c);return{parentTile:b,parentScaleBy:S,parentTopLeft:M,fadeValues:N}}if(x.selfFading){const b=(function(S,M){const N=(z()-S.timeAdded)/M,j=o.ao(N,0,1);return{tileOpacity:j,fadeMix:{opacity:j,mix:0}}})(x,c);return{parentTile:null,parentScaleBy:1,parentTopLeft:[0,0],fadeValues:b}}return y}const Qu=new o.bq(1,0,0,1),Ol=new o.bq(0,1,0,1),Qa=new o.bq(0,0,1,1),li=new o.bq(1,0,1,1),Xn=new o.bq(0,1,1,1);function zl(x,n,c,f){Xs(x,0,n+c/2,x.transform.width,c,f)}function Ns(x,n,c,f){Xs(x,n-c/2,0,c,x.transform.height,f)}function Xs(x,n,c,f,y,b){const S=x.context,M=S.gl;M.enable(M.SCISSOR_TEST),M.scissor(n*x.pixelRatio,c*x.pixelRatio,f*x.pixelRatio,y*x.pixelRatio),S.clear({color:b}),M.disable(M.SCISSOR_TEST)}function jc(x,n,c){const f=x.context,y=f.gl,b=x.useProgram("debug"),S=mn.disabled,M=bn.disabled,N=x.colorModeForRenderPass(),j="$debug",q=x.style.map.terrain&&x.style.map.terrain.getTerrainData(c);f.activeTexture.set(y.TEXTURE0);const ne=n.getTileByID(c.key).latestRawTileData,te=Math.floor((ne&&ne.byteLength||0)/1024),ue=n.getTile(c).tileSize,_e=512/Math.min(ue,512)*(c.overscaledZ/x.transform.zoom)*.5;let De=c.canonical.toString();c.overscaledZ!==c.canonical.z&&(De+=` => ${c.overscaledZ}`),(function(Oe,Ge){Oe.initDebugOverlayCanvas();const lt=Oe.debugOverlayCanvas,Ze=Oe.context.gl,At=Oe.debugOverlayCanvas.getContext("2d");At.clearRect(0,0,lt.width,lt.height),At.shadowColor="white",At.shadowBlur=2,At.lineWidth=1.5,At.strokeStyle="white",At.textBaseline="top",At.font="bold 36px Open Sans, sans-serif",At.fillText(Ge,5,5),At.strokeText(Ge,5,5),Oe.debugOverlayTexture.update(lt),Oe.debugOverlayTexture.bind(Ze.LINEAR,Ze.CLAMP_TO_EDGE)})(x,`${De} ${te}kB`);const ze=x.transform.getProjectionData({overscaledTileID:c,applyGlobeMatrix:!0,applyTerrainMatrix:!0});b.draw(f,y.TRIANGLES,S,M,Qn.alphaBlended,En.disabled,Co(o.bq.transparent,_e),null,ze,j,x.debugBuffer,x.quadTriangleIndexBuffer,x.debugSegments),b.draw(f,y.LINE_STRIP,S,M,N,En.disabled,Co(o.bq.red),q,ze,j,x.debugBuffer,x.tileBorderIndexBuffer,x.debugSegments)}function Vc(x,n,c,f){const{isRenderingGlobe:y}=f,b=x.context,S=b.gl,M=x.transform,N=x.colorModeForRenderPass(),j=x.getDepthModeFor3D(),q=x.useProgram("terrain");b.bindFramebuffer.set(null),b.viewport.set([0,0,x.width,x.height]);for(const ne of c){const te=n.getTerrainMesh(ne.tileID),ue=x.renderToTexture.getTexture(ne),_e=n.getTerrainData(ne.tileID);b.activeTexture.set(S.TEXTURE0),S.bindTexture(S.TEXTURE_2D,ue.texture);const De=n.getMeshFrameDelta(M.zoom),ze=M.calculateFogMatrix(ne.tileID.toUnwrapped()),Oe=ou(De,ze,x.style.sky,M.pitch,y),Ge=M.getProjectionData({overscaledTileID:ne.tileID,applyTerrainMatrix:!1,applyGlobeMatrix:!0});q.draw(b,S.TRIANGLES,j,bn.disabled,N,En.backCCW,Oe,_e,Ge,"terrain",te.vertexBuffer,te.indexBuffer,te.segments)}}function go(x,n){if(!n.mesh){const c=new o.aX;c.emplaceBack(-1,-1),c.emplaceBack(1,-1),c.emplaceBack(1,1),c.emplaceBack(-1,1);const f=new o.aZ;f.emplaceBack(0,1,2),f.emplaceBack(0,2,3),n.mesh=new ii(x.createVertexBuffer(c,_s.members),x.createIndexBuffer(f),o.aY.simpleSegment(0,0,c.length,f.length))}return n.mesh}class du{constructor(n,c){this.context=new Du(n),this.transform=c,this._tileTextures={},this.terrainFacilitator={dirty:!0,matrix:o.as(new Float64Array(16)),renderTime:0},this.setup(),this.numSublayers=ns.maxOverzooming+ns.maxUnderzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new vs}resize(n,c,f){if(this.width=Math.floor(n*f),this.height=Math.floor(c*f),this.pixelRatio=f,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const y of this.style._order)this.style._layers[y].resize()}setup(){const n=this.context,c=new o.aX;c.emplaceBack(0,0),c.emplaceBack(o.a5,0),c.emplaceBack(0,o.a5),c.emplaceBack(o.a5,o.a5),this.tileExtentBuffer=n.createVertexBuffer(c,_s.members),this.tileExtentSegments=o.aY.simpleSegment(0,0,4,2);const f=new o.aX;f.emplaceBack(0,0),f.emplaceBack(o.a5,0),f.emplaceBack(0,o.a5),f.emplaceBack(o.a5,o.a5),this.debugBuffer=n.createVertexBuffer(f,_s.members),this.debugSegments=o.aY.simpleSegment(0,0,4,5);const y=new o.ci;y.emplaceBack(0,0,0,0),y.emplaceBack(o.a5,0,o.a5,0),y.emplaceBack(0,o.a5,0,o.a5),y.emplaceBack(o.a5,o.a5,o.a5,o.a5),this.rasterBoundsBuffer=n.createVertexBuffer(y,sA.members),this.rasterBoundsSegments=o.aY.simpleSegment(0,0,4,2);const b=new o.aX;b.emplaceBack(0,0),b.emplaceBack(o.a5,0),b.emplaceBack(0,o.a5),b.emplaceBack(o.a5,o.a5),this.rasterBoundsBufferPosOnly=n.createVertexBuffer(b,_s.members),this.rasterBoundsSegmentsPosOnly=o.aY.simpleSegment(0,0,4,5);const S=new o.aX;S.emplaceBack(0,0),S.emplaceBack(1,0),S.emplaceBack(0,1),S.emplaceBack(1,1),this.viewportBuffer=n.createVertexBuffer(S,_s.members),this.viewportSegments=o.aY.simpleSegment(0,0,4,2);const M=new o.cj;M.emplaceBack(0),M.emplaceBack(1),M.emplaceBack(3),M.emplaceBack(2),M.emplaceBack(0),this.tileBorderIndexBuffer=n.createIndexBuffer(M);const N=new o.aZ;N.emplaceBack(1,0,2),N.emplaceBack(1,2,3),this.quadTriangleIndexBuffer=n.createIndexBuffer(N);const j=this.context.gl;this.stencilClearMode=new bn({func:j.ALWAYS,mask:0},0,255,j.ZERO,j.ZERO,j.ZERO),this.tileExtentMesh=new ii(this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}clearStencil(){const n=this.context,c=n.gl;this.nextStencilID=1,this.currentStencilSource=void 0;const f=o.N();o.c8(f,0,this.width,this.height,0,0,1),o.Q(f,f,[c.drawingBufferWidth,c.drawingBufferHeight,0]);const y={mainMatrix:f,tileMercatorCoords:[0,0,1,1],clippingPlane:[0,0,0,0],projectionTransition:0,fallbackMatrix:f};this.useProgram("clippingMask",null,!0).draw(n,c.TRIANGLES,mn.disabled,this.stencilClearMode,Qn.disabled,En.disabled,null,null,y,"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}_renderTileClippingMasks(n,c,f){if(this.currentStencilSource===n.source||!n.isTileClipped()||!c||!c.length)return;this.currentStencilSource=n.source,this.nextStencilID+c.length>256&&this.clearStencil();const y=this.context;y.setColorMode(Qn.disabled),y.setDepthMode(mn.disabled);const b={};for(const S of c)b[S.key]=this.nextStencilID++;this._renderTileMasks(b,c,f,!0),this._renderTileMasks(b,c,f,!1),this._tileClippingMaskIDs=b}_renderTileMasks(n,c,f,y){const b=this.context,S=b.gl,M=this.style.projection,N=this.transform,j=this.useProgram("clippingMask");for(const q of c){const ne=n[q.key],te=this.style.map.terrain&&this.style.map.terrain.getTerrainData(q),ue=M.getMeshFromTileID(this.context,q.canonical,y,!0,"stencil"),_e=N.getProjectionData({overscaledTileID:q,applyGlobeMatrix:!f,applyTerrainMatrix:!0});j.draw(b,S.TRIANGLES,mn.disabled,new bn({func:S.ALWAYS,mask:0},ne,255,S.KEEP,S.KEEP,S.REPLACE),Qn.disabled,f?En.disabled:En.backCCW,null,te,_e,"$clipping",ue.vertexBuffer,ue.indexBuffer,ue.segments)}}_renderTilesDepthBuffer(){const n=this.context,c=n.gl,f=this.style.projection,y=this.transform,b=this.useProgram("depth"),S=this.getDepthModeFor3D(),M=Tn(y,{tileSize:y.tileSize});for(const N of M){const j=this.style.map.terrain&&this.style.map.terrain.getTerrainData(N),q=f.getMeshFromTileID(this.context,N.canonical,!0,!0,"raster"),ne=y.getProjectionData({overscaledTileID:N,applyGlobeMatrix:!0,applyTerrainMatrix:!0});b.draw(n,c.TRIANGLES,S,bn.disabled,Qn.disabled,En.backCCW,null,j,ne,"$clipping",q.vertexBuffer,q.indexBuffer,q.segments)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const n=this.nextStencilID++,c=this.context.gl;return new bn({func:c.NOTEQUAL,mask:255},n,255,c.KEEP,c.KEEP,c.REPLACE)}stencilModeForClipping(n){const c=this.context.gl;return new bn({func:c.EQUAL,mask:255},this._tileClippingMaskIDs[n.key],0,c.KEEP,c.KEEP,c.REPLACE)}getStencilConfigForOverlapAndUpdateStencilID(n){const c=this.context.gl,f=n.sort(((S,M)=>M.overscaledZ-S.overscaledZ)),y=f[f.length-1].overscaledZ,b=f[0].overscaledZ-y+1;if(b>1){this.currentStencilSource=void 0,this.nextStencilID+b>256&&this.clearStencil();const S={};for(let M=0;M<b;M++)S[M+y]=new bn({func:c.GEQUAL,mask:255},M+this.nextStencilID,255,c.KEEP,c.KEEP,c.REPLACE);return this.nextStencilID+=b,[S,f]}return[{[y]:bn.disabled},f]}stencilConfigForOverlapTwoPass(n){const c=this.context.gl,f=n.sort(((S,M)=>M.overscaledZ-S.overscaledZ)),y=f[f.length-1].overscaledZ,b=f[0].overscaledZ-y+1;if(this.clearStencil(),b>1){const S={},M={};for(let N=0;N<b;N++)S[N+y]=new bn({func:c.GREATER,mask:255},b+1+N,255,c.KEEP,c.KEEP,c.REPLACE),M[N+y]=new bn({func:c.GREATER,mask:255},1+N,255,c.KEEP,c.KEEP,c.REPLACE);return this.nextStencilID=2*b+1,[S,M,f]}return this.nextStencilID=3,[{[y]:new bn({func:c.GREATER,mask:255},2,255,c.KEEP,c.KEEP,c.REPLACE)},{[y]:new bn({func:c.GREATER,mask:255},1,255,c.KEEP,c.KEEP,c.REPLACE)},f]}colorModeForRenderPass(){const n=this.context.gl;return this._showOverdrawInspector?new Qn([n.CONSTANT_COLOR,n.ONE],new o.bq(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?Qn.unblended:Qn.alphaBlended}getDepthModeForSublayer(n,c,f){if(!this.opaquePassEnabledForLayer())return mn.disabled;const y=1-((1+this.currentLayer)*this.numSublayers+n)*this.depthEpsilon;return new mn(f||this.context.gl.LEQUAL,c,[y,y])}getDepthModeFor3D(){return new mn(this.context.gl.LEQUAL,mn.ReadWrite,this.depthRangeFor3D)}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(n,c){var f,y;this.style=n,this.options=c,this.lineAtlas=n.lineAtlas,this.imageManager=n.imageManager,this.glyphManager=n.glyphManager,this.symbolFadeChange=n.placement.symbolFadeChange(z()),this.imageManager.beginFrame();const b=this.style._order,S=this.style.tileManagers,M={},N={},j={},q={isRenderingToTexture:!1,isRenderingGlobe:((f=n.projection)===null||f===void 0?void 0:f.transitionState)>0};for(const te in S){const ue=S[te];ue.used&&ue.prepare(this.context),M[te]=ue.getVisibleCoordinates(!1),N[te]=M[te].slice().reverse(),j[te]=ue.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let te=0;te<b.length;te++)if(this.style._layers[b[te]].is3D()){this.opaquePassCutoff=te;break}this.maybeDrawDepthAndCoords(!1),this.renderToTexture&&(this.renderToTexture.prepareForRender(this.style,this.transform.zoom),this.opaquePassCutoff=0),this.renderPass="offscreen";for(const te of b){const ue=this.style._layers[te];if(!ue.hasOffscreenPass()||ue.isHidden(this.transform.zoom))continue;const _e=N[ue.source];(ue.type==="custom"||_e.length)&&this.renderLayer(this,S[ue.source],ue,_e,q)}if((y=this.style.projection)===null||y===void 0||y.updateGPUdependent({context:this.context,useProgram:te=>this.useProgram(te)}),this.context.viewport.set([0,0,this.width,this.height]),this.context.bindFramebuffer.set(null),this.context.clear({color:c.showOverdrawInspector?o.bq.black:o.bq.transparent,depth:1}),this.clearStencil(),this.style.sky&&(function(te,ue){const _e=te.context,De=_e.gl,ze=((ft,st,wt)=>{const Dt=Math.cos(st.rollInRadians),Lt=Math.sin(st.rollInRadians),Rt=rn(st),Qt=st.getProjectionData({overscaledTileID:null,applyGlobeMatrix:!0,applyTerrainMatrix:!0}).projectionTransition;return{u_sky_color:ft.properties.get("sky-color"),u_horizon_color:ft.properties.get("horizon-color"),u_horizon:[(st.width/2-Rt*Lt)*wt,(st.height/2+Rt*Dt)*wt],u_horizon_normal:[-Lt,Dt],u_sky_horizon_blend:ft.properties.get("sky-horizon-blend")*st.height/2*wt,u_sky_blend:Qt}})(ue,te.style.map.transform,te.pixelRatio),Oe=new mn(De.LEQUAL,mn.ReadWrite,[0,1]),Ge=bn.disabled,lt=te.colorModeForRenderPass(),Ze=te.useProgram("sky"),At=go(_e,ue);Ze.draw(_e,De.TRIANGLES,Oe,Ge,lt,En.disabled,ze,null,void 0,"sky",At.vertexBuffer,At.indexBuffer,At.segments)})(this,this.style.sky),this._showOverdrawInspector=c.showOverdrawInspector,this.depthRangeFor3D=[0,1-(n._order.length+2)*this.numSublayers*this.depthEpsilon],!this.renderToTexture)for(this.renderPass="opaque",this.currentLayer=b.length-1;this.currentLayer>=0;this.currentLayer--){const te=this.style._layers[b[this.currentLayer]],ue=S[te.source],_e=M[te.source];this._renderTileClippingMasks(te,_e,!1),this.renderLayer(this,ue,te,_e,q)}this.renderPass="translucent";let ne=!1;for(this.currentLayer=0;this.currentLayer<b.length;this.currentLayer++){const te=this.style._layers[b[this.currentLayer]],ue=S[te.source];if(this.renderToTexture&&this.renderToTexture.renderLayer(te,q))continue;this.opaquePassEnabledForLayer()||ne||(ne=!0,q.isRenderingGlobe&&!this.style.map.terrain&&this._renderTilesDepthBuffer());const _e=(te.type==="symbol"?j:N)[te.source];this._renderTileClippingMasks(te,M[te.source],!!this.renderToTexture),this.renderLayer(this,ue,te,_e,q)}if(q.isRenderingGlobe&&(function(te,ue,_e){const De=te.context,ze=De.gl,Oe=te.useProgram("atmosphere"),Ge=new mn(ze.LEQUAL,mn.ReadOnly,[0,1]),lt=te.transform,Ze=(function(Qt,nr){const ur=Qt.properties.get("position"),rr=[-ur.x,-ur.y,-ur.z],Rr=o.as(new Float64Array(16));return Qt.properties.get("anchor")==="map"&&(o.bh(Rr,Rr,nr.rollInRadians),o.bi(Rr,Rr,-nr.pitchInRadians),o.bh(Rr,Rr,nr.bearingInRadians),o.bi(Rr,Rr,nr.center.lat*Math.PI/180),o.bK(Rr,Rr,-nr.center.lng*Math.PI/180)),o.ch(rr,rr,Rr),rr})(_e,te.transform),At=lt.getProjectionData({overscaledTileID:null,applyGlobeMatrix:!0,applyTerrainMatrix:!0}),ft=ue.properties.get("atmosphere-blend")*At.projectionTransition;if(ft===0)return;const st=Kr(lt.worldSize,lt.center.lat),wt=lt.inverseProjectionMatrix,Dt=new Float64Array(4);Dt[3]=1,o.aI(Dt,Dt,lt.modelViewProjectionMatrix),Dt[0]/=Dt[3],Dt[1]/=Dt[3],Dt[2]/=Dt[3],Dt[3]=1,o.aI(Dt,Dt,wt),Dt[0]/=Dt[3],Dt[1]/=Dt[3],Dt[2]/=Dt[3],Dt[3]=1;const Lt=((Qt,nr,ur,rr,Rr)=>({u_sun_pos:Qt,u_atmosphere_blend:nr,u_globe_position:ur,u_globe_radius:rr,u_inv_proj_matrix:Rr}))(Ze,ft,[Dt[0],Dt[1],Dt[2]],st,wt),Rt=go(De,ue);Oe.draw(De,ze.TRIANGLES,Ge,bn.disabled,Qn.alphaBlended,En.disabled,Lt,null,null,"atmosphere",Rt.vertexBuffer,Rt.indexBuffer,Rt.segments)})(this,this.style.sky,this.style.light),this.options.showTileBoundaries){const te=(function(ue,_e){let De=null;const ze=Object.values(ue._layers).flatMap((Ze=>Ze.source&&!Ze.isHidden(_e)?[ue.tileManagers[Ze.source]]:[])),Oe=ze.filter((Ze=>Ze.getSource().type==="vector")),Ge=ze.filter((Ze=>Ze.getSource().type!=="vector")),lt=Ze=>{(!De||De.getSource().maxzoom<Ze.getSource().maxzoom)&&(De=Ze)};return Oe.forEach((Ze=>lt(Ze))),De||Ge.forEach((Ze=>lt(Ze))),De})(this.style,this.transform.zoom);te&&(function(ue,_e,De){for(let ze=0;ze<De.length;ze++)jc(ue,_e,De[ze])})(this,te,te.getVisibleCoordinates())}this.options.showPadding&&(function(te){const ue=te.transform.padding;zl(te,te.transform.height-(ue.top||0),3,Qu),zl(te,ue.bottom||0,3,Ol),Ns(te,ue.left||0,3,Qa),Ns(te,te.transform.width-(ue.right||0),3,li);const _e=te.transform.centerPoint;(function(De,ze,Oe,Ge){Xs(De,ze-1,Oe-10,2,20,Ge),Xs(De,ze-10,Oe-1,20,2,Ge)})(te,_e.x,te.transform.height-_e.y,Xn)})(this),this.context.setDefault()}maybeDrawDepthAndCoords(n){if(!this.style||!this.style.map||!this.style.map.terrain)return;const c=this.terrainFacilitator.matrix,f=this.transform.modelViewProjectionMatrix;let y=this.terrainFacilitator.dirty;y||(y=n?!o.ck(c,f):!o.cl(c,f)),y||(y=this.style.map.terrain.tileManager.anyTilesAfterTime(this.terrainFacilitator.renderTime)),y&&(o.cm(c,f),this.terrainFacilitator.renderTime=Date.now(),this.terrainFacilitator.dirty=!1,(function(b,S){const M=b.context,N=M.gl,j=b.transform,q=Qn.unblended,ne=new mn(N.LEQUAL,mn.ReadWrite,[0,1]),te=S.tileManager.getRenderableTiles(),ue=b.useProgram("terrainDepth");M.bindFramebuffer.set(S.getFramebuffer("depth").framebuffer),M.viewport.set([0,0,b.width/devicePixelRatio,b.height/devicePixelRatio]),M.clear({color:o.bq.transparent,depth:1});for(const _e of te){const De=S.getTerrainMesh(_e.tileID),ze=S.getTerrainData(_e.tileID),Oe=j.getProjectionData({overscaledTileID:_e.tileID,applyTerrainMatrix:!1,applyGlobeMatrix:!0}),Ge={u_ele_delta:S.getMeshFrameDelta(j.zoom)};ue.draw(M,N.TRIANGLES,ne,bn.disabled,q,En.backCCW,Ge,ze,Oe,"terrain",De.vertexBuffer,De.indexBuffer,De.segments)}M.bindFramebuffer.set(null),M.viewport.set([0,0,b.width,b.height])})(this,this.style.map.terrain),(function(b,S){const M=b.context,N=M.gl,j=b.transform,q=Qn.unblended,ne=new mn(N.LEQUAL,mn.ReadWrite,[0,1]),te=S.getCoordsTexture(),ue=S.tileManager.getRenderableTiles(),_e=b.useProgram("terrainCoords");M.bindFramebuffer.set(S.getFramebuffer("coords").framebuffer),M.viewport.set([0,0,b.width/devicePixelRatio,b.height/devicePixelRatio]),M.clear({color:o.bq.transparent,depth:1}),S.coordsIndex=[];for(const De of ue){const ze=S.getTerrainMesh(De.tileID),Oe=S.getTerrainData(De.tileID);M.activeTexture.set(N.TEXTURE0),N.bindTexture(N.TEXTURE_2D,te.texture);const Ge={u_terrain_coords_id:(255-S.coordsIndex.length)/255,u_texture:0,u_ele_delta:S.getMeshFrameDelta(j.zoom)},lt=j.getProjectionData({overscaledTileID:De.tileID,applyTerrainMatrix:!1,applyGlobeMatrix:!0});_e.draw(M,N.TRIANGLES,ne,bn.disabled,q,En.backCCW,Ge,Oe,lt,"terrain",ze.vertexBuffer,ze.indexBuffer,ze.segments),S.coordsIndex.push(De.tileID.key)}M.bindFramebuffer.set(null),M.viewport.set([0,0,b.width,b.height])})(this,this.style.map.terrain))}renderLayer(n,c,f,y,b){f.isHidden(this.transform.zoom)||(f.type==="background"||f.type==="custom"||(y||[]).length)&&(this.id=f.id,o.cn(f)?(function(S,M,N,j,q,ne){if(S.renderPass!=="translucent")return;const{isRenderingToTexture:te}=ne,ue=bn.disabled,_e=S.colorModeForRenderPass();(N._unevaluatedLayout.hasValue("text-variable-anchor")||N._unevaluatedLayout.hasValue("text-variable-anchor-offset"))&&(function(De,ze,Oe,Ge,lt,Ze,At,ft,st){const wt=ze.transform,Dt=ze.style.map.terrain,Lt=lt==="map",Rt=Ze==="map";for(const Qt of De){const nr=Ge.getTile(Qt),ur=nr.getBucket(Oe);if(!ur||!ur.text||!ur.text.segments.get().length)continue;const rr=o.az(ur.textSizeData,wt.zoom),Rr=o.aO(nr,1,ze.transform.zoom),vn=Di(Lt,ze.transform,Rr),Ai=Oe.layout.get("icon-text-fit")!=="none"&&ur.hasIconData();if(rr){const Oi=Math.pow(2,wt.zoom-nr.tileID.overscaledZ),ui=Dt?(Vi,Pi)=>Dt.getElevation(Qt,Vi,Pi):null;hA(ur,Lt,Rt,st,wt,vn,Oi,rr,Ai,o.aP(wt,nr,At,ft),Qt.toUnwrapped(),ui)}}})(j,S,N,M,N.layout.get("text-rotation-alignment"),N.layout.get("text-pitch-alignment"),N.paint.get("text-translate"),N.paint.get("text-translate-anchor"),q),N.paint.get("icon-opacity").constantOr(1)!==0&&dA(S,M,N,j,!1,N.paint.get("icon-translate"),N.paint.get("icon-translate-anchor"),N.layout.get("icon-rotation-alignment"),N.layout.get("icon-pitch-alignment"),N.layout.get("icon-keep-upright"),ue,_e,te),N.paint.get("text-opacity").constantOr(1)!==0&&dA(S,M,N,j,!0,N.paint.get("text-translate"),N.paint.get("text-translate-anchor"),N.layout.get("text-rotation-alignment"),N.layout.get("text-pitch-alignment"),N.layout.get("text-keep-upright"),ue,_e,te),M.map.showCollisionBoxes&&(zc(S,M,N,j,!0),zc(S,M,N,j,!1))})(n,c,f,y,this.style.placement.variableOffsets,b):o.co(f)?(function(S,M,N,j,q){if(S.renderPass!=="translucent")return;const{isRenderingToTexture:ne}=q,te=N.paint.get("circle-opacity"),ue=N.paint.get("circle-stroke-width"),_e=N.paint.get("circle-stroke-opacity"),De=!N.layout.get("circle-sort-key").isConstant();if(te.constantOr(1)===0&&(ue.constantOr(1)===0||_e.constantOr(1)===0))return;const ze=S.context,Oe=ze.gl,Ge=S.transform,lt=S.getDepthModeForSublayer(0,mn.ReadOnly),Ze=bn.disabled,At=S.colorModeForRenderPass(),ft=[],st=Ge.getCircleRadiusCorrection();for(let wt=0;wt<j.length;wt++){const Dt=j[wt],Lt=M.getTile(Dt),Rt=Lt.getBucket(N);if(!Rt)continue;const Qt=N.paint.get("circle-translate"),nr=N.paint.get("circle-translate-anchor"),ur=o.aP(Ge,Lt,Qt,nr),rr=Rt.programConfigurations.get(N.id),Rr=S.useProgram("circle",rr),vn=Rt.layoutVertexBuffer,Ai=Rt.indexBuffer,Oi=S.style.map.terrain&&S.style.map.terrain.getTerrainData(Dt),ui={programConfiguration:rr,program:Rr,layoutVertexBuffer:vn,indexBuffer:Ai,uniformValues:Ml(S,Lt,N,ur,st),terrainData:Oi,projectionData:Ge.getProjectionData({overscaledTileID:Dt,applyGlobeMatrix:!ne,applyTerrainMatrix:!0})};if(De){const Vi=Rt.segments.get();for(const Pi of Vi)ft.push({segments:new o.aY([Pi]),sortKey:Pi.sortKey,state:ui})}else ft.push({segments:Rt.segments,sortKey:0,state:ui})}De&&ft.sort(((wt,Dt)=>wt.sortKey-Dt.sortKey));for(const wt of ft){const{programConfiguration:Dt,program:Lt,layoutVertexBuffer:Rt,indexBuffer:Qt,uniformValues:nr,terrainData:ur,projectionData:rr}=wt.state;Lt.draw(ze,Oe.TRIANGLES,lt,Ze,At,En.backCCW,nr,ur,rr,N.id,Rt,Qt,wt.segments,N.paint,S.transform.zoom,Dt)}})(n,c,f,y,b):o.cp(f)?(function(S,M,N,j,q){if(N.paint.get("heatmap-opacity")===0)return;const ne=S.context,{isRenderingToTexture:te,isRenderingGlobe:ue}=q;if(S.style.map.terrain){for(const _e of j){const De=M.getTile(_e);M.hasRenderableParent(_e)||(S.renderPass==="offscreen"?Ah(S,De,N,_e,ue):S.renderPass==="translucent"&&jh(S,N,_e,te,ue))}ne.viewport.set([0,0,S.width,S.height])}else S.renderPass==="offscreen"?(function(_e,De,ze,Oe){const Ge=_e.context,lt=Ge.gl,Ze=_e.transform,At=bn.disabled,ft=new Qn([lt.ONE,lt.ONE],o.bq.transparent,[!0,!0,!0,!0]);(function(st,wt,Dt){const Lt=st.gl;st.activeTexture.set(Lt.TEXTURE1),st.viewport.set([0,0,wt.width/4,wt.height/4]);let Rt=Dt.heatmapFbos.get(o.ce);Rt?(Lt.bindTexture(Lt.TEXTURE_2D,Rt.colorAttachment.get()),st.bindFramebuffer.set(Rt.framebuffer)):(Rt=hu(st,wt.width/4,wt.height/4),Dt.heatmapFbos.set(o.ce,Rt))})(Ge,_e,ze),Ge.clear({color:o.bq.transparent});for(let st=0;st<Oe.length;st++){const wt=Oe[st];if(De.hasRenderableParent(wt))continue;const Dt=De.getTile(wt),Lt=Dt.getBucket(ze);if(!Lt)continue;const Rt=Lt.programConfigurations.get(ze.id),Qt=_e.useProgram("heatmap",Rt),nr=Ze.getProjectionData({overscaledTileID:wt,applyGlobeMatrix:!0,applyTerrainMatrix:!1}),ur=Ze.getCircleRadiusCorrection();Qt.draw(Ge,lt.TRIANGLES,mn.disabled,At,ft,En.backCCW,ga(Dt,Ze.zoom,ze.paint.get("heatmap-intensity"),ur),null,nr,ze.id,Lt.layoutVertexBuffer,Lt.indexBuffer,Lt.segments,ze.paint,Ze.zoom,Rt)}Ge.viewport.set([0,0,_e.width,_e.height])})(S,M,N,j):S.renderPass==="translucent"&&(function(_e,De){const ze=_e.context,Oe=ze.gl;ze.setColorMode(_e.colorModeForRenderPass());const Ge=De.heatmapFbos.get(o.ce);Ge&&(ze.activeTexture.set(Oe.TEXTURE0),Oe.bindTexture(Oe.TEXTURE_2D,Ge.colorAttachment.get()),ze.activeTexture.set(Oe.TEXTURE1),zA(ze,De).bind(Oe.LINEAR,Oe.CLAMP_TO_EDGE),_e.useProgram("heatmapTexture").draw(ze,Oe.TRIANGLES,mn.disabled,bn.disabled,_e.colorModeForRenderPass(),En.disabled,fl(_e,De,0,1),null,null,De.id,_e.viewportBuffer,_e.quadTriangleIndexBuffer,_e.viewportSegments,De.paint,_e.transform.zoom))})(S,N)})(n,c,f,y,b):o.cq(f)?(function(S,M,N,j,q){if(S.renderPass!=="translucent")return;const{isRenderingToTexture:ne}=q,te=N.paint.get("line-opacity"),ue=N.paint.get("line-width");if(te.constantOr(1)===0||ue.constantOr(1)===0)return;const _e=S.getDepthModeForSublayer(0,mn.ReadOnly),De=S.colorModeForRenderPass(),ze=N.paint.get("line-dasharray"),Oe=ze.constantOr(1),Ge=N.paint.get("line-pattern"),lt=Ge.constantOr(1),Ze=N.paint.get("line-gradient"),At=N.getCrossfadeParameters();let ft;ft=lt?"linePattern":Oe&&Ze?"lineGradientSDF":Oe?"lineSDF":Ze?"lineGradient":"line";const st=S.context,wt=st.gl,Dt=S.transform;let Lt=!0;for(const Rt of j){const Qt=M.getTile(Rt);if(lt&&!Qt.patternsLoaded())continue;const nr=Qt.getBucket(N);if(!nr)continue;const ur=nr.programConfigurations.get(N.id),rr=S.context.program.get(),Rr=S.useProgram(ft,ur),vn=Lt||Rr.program!==rr,Ai=S.style.map.terrain&&S.style.map.terrain.getTerrainData(Rt),Oi=Ge.constantOr(null),ui=ze&&ze.constantOr(null);if(Oi&&Qt.imageAtlas){const eo=Qt.imageAtlas,Ts=eo.patternPositions[Oi.to.toString()],hi=eo.patternPositions[Oi.from.toString()];Ts&&hi&&ur.setConstantPatternPositions(Ts,hi)}else if(ui){const eo=N.layout.get("line-cap")==="round",Ts=S.lineAtlas.getDash(ui.to,eo),hi=S.lineAtlas.getDash(ui.from,eo);ur.setConstantDashPositions(Ts,hi)}const Vi=Dt.getProjectionData({overscaledTileID:Rt,applyGlobeMatrix:!ne,applyTerrainMatrix:!0}),Pi=Dt.getPixelScale();let Is;lt?(Is=ya(S,Qt,N,Pi,At),va(st,wt,Qt,ur,At)):Oe&&Ze?(Is=Ul(S,Qt,N,Pi,At,nr.lineClipsArray.length),co(S,M,st,wt,N,nr,Rt,ur,At)):Oe?(Is=Pc(S,Qt,N,Pi,At),$n(S,st,wt,ur,vn,At)):Ze?(Is=ml(S,Qt,N,Pi,nr.lineClipsArray.length),mo(S,M,st,wt,N,nr,Rt)):Is=pl(S,Qt,N,Pi);const Gi=S.stencilModeForClipping(Rt);Rr.draw(st,wt.TRIANGLES,_e,Gi,De,En.disabled,Is,Ai,Vi,N.id,nr.layoutVertexBuffer,nr.indexBuffer,nr.segments,N.paint,S.transform.zoom,ur,nr.layoutVertexBuffer2),Lt=!1}})(n,c,f,y,b):o.cr(f)?(function(S,M,N,j,q){const ne=N.paint.get("fill-color"),te=N.paint.get("fill-opacity");if(te.constantOr(1)===0)return;const{isRenderingToTexture:ue}=q,_e=S.colorModeForRenderPass(),De=N.paint.get("fill-pattern"),ze=S.opaquePassEnabledForLayer()&&!De.constantOr(1)&&ne.constantOr(o.bq.transparent).a===1&&te.constantOr(0)===1?"opaque":"translucent";if(S.renderPass===ze){const Oe=S.getDepthModeForSublayer(1,S.renderPass==="opaque"?mn.ReadWrite:mn.ReadOnly);Zs(S,M,N,j,Oe,_e,!1,ue)}if(S.renderPass==="translucent"&&N.paint.get("fill-antialias")){const Oe=S.getDepthModeForSublayer(N.getPaintProperty("fill-outline-color")?2:0,mn.ReadOnly);Zs(S,M,N,j,Oe,_e,!0,ue)}})(n,c,f,y,b):o.cs(f)?(function(S,M,N,j,q){const ne=N.paint.get("fill-extrusion-opacity");if(ne===0)return;const{isRenderingToTexture:te}=q;if(S.renderPass==="translucent"){const ue=new mn(S.context.gl.LEQUAL,mn.ReadWrite,S.depthRangeFor3D);if(ne!==1||N.paint.get("fill-extrusion-pattern").constantOr(1))Nu(S,M,N,j,ue,bn.disabled,Qn.disabled,te),Nu(S,M,N,j,ue,S.stencilModeFor3D(),S.colorModeForRenderPass(),te);else{const _e=S.colorModeForRenderPass();Nu(S,M,N,j,ue,bn.disabled,_e,te)}}})(n,c,f,y,b):o.ct(f)?(function(S,M,N,j,q){if(S.renderPass!=="offscreen"&&S.renderPass!=="translucent")return;const{isRenderingToTexture:ne}=q,te=S.context,ue=S.style.projection.useSubdivision,_e=S.getDepthModeForSublayer(0,mn.ReadOnly),De=S.colorModeForRenderPass();if(S.renderPass==="offscreen")(function(ze,Oe,Ge,lt,Ze,At,ft){const st=ze.context,wt=st.gl;for(const Dt of Ge){const Lt=Oe.getTile(Dt),Rt=Lt.dem;if(!Rt||!Rt.data||!Lt.needsHillshadePrepare)continue;const Qt=Rt.dim,nr=Rt.stride,ur=Rt.getPixels();if(st.activeTexture.set(wt.TEXTURE1),st.pixelStoreUnpackPremultiplyAlpha.set(!1),Lt.demTexture=Lt.demTexture||ze.getTileTexture(nr),Lt.demTexture){const Rr=Lt.demTexture;Rr.update(ur,{premultiply:!1}),Rr.bind(wt.NEAREST,wt.CLAMP_TO_EDGE)}else Lt.demTexture=new o.T(st,ur,wt.RGBA,{premultiply:!1}),Lt.demTexture.bind(wt.NEAREST,wt.CLAMP_TO_EDGE);st.activeTexture.set(wt.TEXTURE0);let rr=Lt.fbo;if(!rr){const Rr=new o.T(st,{width:Qt,height:Qt,data:null},wt.RGBA);Rr.bind(wt.LINEAR,wt.CLAMP_TO_EDGE),rr=Lt.fbo=st.createFramebuffer(Qt,Qt,!0,!1),rr.colorAttachment.set(Rr.texture)}st.bindFramebuffer.set(rr.framebuffer),st.viewport.set([0,0,Qt,Qt]),ze.useProgram("hillshadePrepare").draw(st,wt.TRIANGLES,Ze,At,ft,En.disabled,oc(Lt.tileID,Rt),null,null,lt.id,ze.rasterBoundsBuffer,ze.quadTriangleIndexBuffer,ze.rasterBoundsSegments),Lt.needsHillshadePrepare=!1}})(S,M,j,N,_e,bn.disabled,De),te.viewport.set([0,0,S.width,S.height]);else if(S.renderPass==="translucent")if(ue){const[ze,Oe,Ge]=S.stencilConfigForOverlapTwoPass(j);Hc(S,M,N,Ge,ze,_e,De,!1,ne),Hc(S,M,N,Ge,Oe,_e,De,!0,ne)}else{const[ze,Oe]=S.getStencilConfigForOverlapAndUpdateStencilID(j);Hc(S,M,N,Oe,ze,_e,De,!1,ne)}})(n,c,f,y,b):o.cu(f)?(function(S,M,N,j,q){if(S.renderPass!=="translucent"||!j.length)return;const{isRenderingToTexture:ne}=q,te=S.style.projection.useSubdivision,ue=S.getDepthModeForSublayer(0,mn.ReadOnly),_e=S.colorModeForRenderPass();if(te){const[De,ze,Oe]=S.stencilConfigForOverlapTwoPass(j);Da(S,M,N,Oe,De,ue,_e,!1,ne),Da(S,M,N,Oe,ze,ue,_e,!0,ne)}else{const[De,ze]=S.getStencilConfigForOverlapAndUpdateStencilID(j);Da(S,M,N,ze,De,ue,_e,!1,ne)}})(n,c,f,y,b):o.bV(f)?(function(S,M,N,j,q){if(S.renderPass!=="translucent"||N.paint.get("raster-opacity")===0||!j.length)return;const{isRenderingToTexture:ne}=q,te=M.getSource(),ue=S.style.projection.useSubdivision;if(te instanceof un)Na(S,M,N,j,null,!1,!1,te.tileCoords,te.flippedWindingOrder,ne);else if(ue){const[_e,De,ze]=S.stencilConfigForOverlapTwoPass(j);Na(S,M,N,ze,_e,!1,!0,Ra,!1,ne),Na(S,M,N,ze,De,!0,!0,Ra,!1,ne)}else{const[_e,De]=S.getStencilConfigForOverlapAndUpdateStencilID(j);Na(S,M,N,De,_e,!1,!0,Ra,!1,ne)}})(n,c,f,y,b):o.cv(f)?(function(S,M,N,j,q){const ne=N.paint.get("background-color"),te=N.paint.get("background-opacity");if(te===0)return;const{isRenderingToTexture:ue}=q,_e=S.context,De=_e.gl,ze=S.style.projection,Oe=S.transform,Ge=Oe.tileSize,lt=N.paint.get("background-pattern");if(S.isPatternMissing(lt))return;const Ze=!lt&&ne.a===1&&te===1&&S.opaquePassEnabledForLayer()?"opaque":"translucent";if(S.renderPass!==Ze)return;const At=bn.disabled,ft=S.getDepthModeForSublayer(0,Ze==="opaque"?mn.ReadWrite:mn.ReadOnly),st=S.colorModeForRenderPass(),wt=S.useProgram(lt?"backgroundPattern":"background"),Dt=j||Tn(Oe,{tileSize:Ge,terrain:S.style.map.terrain});lt&&(_e.activeTexture.set(De.TEXTURE0),S.imageManager.bind(S.context));const Lt=N.getCrossfadeParameters();for(const Rt of Dt){const Qt=Oe.getProjectionData({overscaledTileID:Rt,applyGlobeMatrix:!ue,applyTerrainMatrix:!0}),nr=lt?os(te,S,lt,{tileID:Rt,tileSize:Ge},Lt):lc(te,ne),ur=S.style.map.terrain&&S.style.map.terrain.getTerrainData(Rt),rr=ze.getMeshFromTileID(_e,Rt.canonical,!1,!0,"raster");wt.draw(_e,De.TRIANGLES,ft,At,st,En.backCCW,nr,ur,Qt,N.id,rr.vertexBuffer,rr.indexBuffer,rr.segments)}})(n,0,f,y,b):o.cw(f)&&(function(S,M,N,j){const{isRenderingGlobe:q}=j,ne=S.context,te=N.implementation,ue=S.style.projection,_e=S.transform,De=_e.getProjectionDataForCustomLayer(q),ze={farZ:_e.farZ,nearZ:_e.nearZ,fov:_e.fov*Math.PI/180,modelViewProjectionMatrix:_e.modelViewProjectionMatrix,projectionMatrix:_e.projectionMatrix,shaderData:{variantName:ue.shaderVariantName,vertexShaderPrelude:`const float PI = 3.141592653589793;
uniform mat4 u_projection_matrix;
${ue.shaderPreludeCode.vertexSource}`,define:ue.shaderDefine},defaultProjectionData:De},Oe=te.renderingMode?te.renderingMode:"2d";if(S.renderPass==="offscreen"){const Ge=te.prerender;Ge&&(S.setCustomLayerDefaults(),ne.setColorMode(S.colorModeForRenderPass()),Ge.call(te,ne.gl,ze),ne.setDirty(),S.setBaseState())}else if(S.renderPass==="translucent"){S.setCustomLayerDefaults(),ne.setColorMode(S.colorModeForRenderPass()),ne.setStencilMode(bn.disabled);const Ge=Oe==="3d"?S.getDepthModeFor3D():S.getDepthModeForSublayer(0,mn.ReadOnly);ne.setDepthMode(Ge),te.render(ne.gl,ze),ne.setDirty(),S.setBaseState(),ne.bindFramebuffer.set(null)}})(n,0,f,b))}saveTileTexture(n){const c=this._tileTextures[n.size[0]];c?c.push(n):this._tileTextures[n.size[0]]=[n]}getTileTexture(n){const c=this._tileTextures[n];return c&&c.length>0?c.pop():null}isPatternMissing(n){if(!n)return!1;if(!n.from||!n.to)return!0;const c=this.imageManager.getPattern(n.from.toString()),f=this.imageManager.getPattern(n.to.toString());return!c||!f}useProgram(n,c,f=!1,y=[]){this.cache=this.cache||{};const b=!!this.style.map.terrain,S=this.style.projection,M=f?Jn.projectionMercator:S.shaderPreludeCode,N=f?Wi:S.shaderDefine,j=n+(c?c.cacheKey:"")+`/${f?uo:S.shaderVariantName}`+(this._showOverdrawInspector?"/overdraw":"")+(b?"/terrain":"")+(y?`/${y.join("/")}`:"");return this.cache[j]||(this.cache[j]=new La(this.context,Jn[n],c,si[n],this._showOverdrawInspector,b,M,N,y)),this.cache[j]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const n=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(n.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new o.T(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){var n,c;if(this._tileTextures){for(const f in this._tileTextures){const y=this._tileTextures[f];if(y)for(const b of y)b.destroy()}this._tileTextures={}}if(this.tileExtentBuffer&&this.tileExtentBuffer.destroy(),this.debugBuffer&&this.debugBuffer.destroy(),this.rasterBoundsBuffer&&this.rasterBoundsBuffer.destroy(),this.rasterBoundsBufferPosOnly&&this.rasterBoundsBufferPosOnly.destroy(),this.viewportBuffer&&this.viewportBuffer.destroy(),this.tileBorderIndexBuffer&&this.tileBorderIndexBuffer.destroy(),this.quadTriangleIndexBuffer&&this.quadTriangleIndexBuffer.destroy(),this.tileExtentMesh&&((n=this.tileExtentMesh.vertexBuffer)===null||n===void 0||n.destroy()),this.tileExtentMesh&&((c=this.tileExtentMesh.indexBuffer)===null||c===void 0||c.destroy()),this.debugOverlayTexture&&this.debugOverlayTexture.destroy(),this.cache){for(const f in this.cache){const y=this.cache[f];y&&y.program&&this.context.gl.deleteProgram(y.program)}this.cache={}}this.context&&this.context.setDefault()}overLimit(){const{drawingBufferWidth:n,drawingBufferHeight:c}=this.context.gl;return this.width!==n||this.height!==c}}function Ou(x,n){let c,f=!1,y=null,b=null;const S=()=>{y=null,f&&(x.apply(b,c),y=setTimeout(S,n),f=!1)};return(...M)=>(f=!0,b=this,c=M,y||S(),y)}class fA{constructor(n){this._getCurrentHash=()=>{const c=window.location.hash.replace("#","");if(this._hashName){let f;return c.split("&").map((y=>y.split("="))).forEach((y=>{y[0]===this._hashName&&(f=y)})),(f&&f[1]||"").split("/")}return c.split("/")},this._onHashChange=()=>{const c=this._getCurrentHash();if(!this._isValidHash(c))return!1;const f=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(c[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+c[2],+c[1]],zoom:+c[0],bearing:f,pitch:+(c[4]||0)}),!0},this._updateHashUnthrottled=()=>{const c=window.location.href.replace(/(#.*)?$/,this.getHashString());window.history.replaceState(window.history.state,null,c)},this._removeHash=()=>{const c=this._getCurrentHash();if(c.length===0)return;const f=c.join("/");let y=f;y.split("&").length>0&&(y=y.split("&")[0]),this._hashName&&(y=`${this._hashName}=${f}`);let b=window.location.hash.replace(y,"");b.startsWith("#&")?b=b.slice(0,1)+b.slice(2):b==="#"&&(b="");let S=window.location.href.replace(/(#.+)?$/,b);S=S.replace("&&","&"),window.history.replaceState(window.history.state,null,S)},this._updateHash=Ou(this._updateHashUnthrottled,300),this._hashName=n&&encodeURIComponent(n)}addTo(n){return this._map=n,addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this}remove(){return removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),this._removeHash(),delete this._map,this}getHashString(n){const c=this._map.getCenter(),f=Math.round(100*this._map.getZoom())/100,y=Math.ceil((f*Math.LN2+Math.log(512/360/.5))/Math.LN10),b=Math.pow(10,y),S=Math.round(c.lng*b)/b,M=Math.round(c.lat*b)/b,N=this._map.getBearing(),j=this._map.getPitch();let q="";if(q+=n?`/${S}/${M}/${f}`:`${f}/${M}/${S}`,(N||j)&&(q+="/"+Math.round(10*N)/10),j&&(q+=`/${Math.round(j)}`),this._hashName){const ne=this._hashName;let te=!1;const ue=window.location.hash.slice(1).split("&").map((_e=>{const De=_e.split("=")[0];return De===ne?(te=!0,`${De}=${q}`):_e})).filter((_e=>_e));return te||ue.push(`${ne}=${q}`),`#${ue.join("&")}`}return`#${q}`}_isValidHash(n){if(n.length<3||n.some(isNaN))return!1;try{new o.V(+n[2],+n[1])}catch{return!1}const c=+n[0],f=+(n[3]||0),y=+(n[4]||0);return c>=this._map.getMinZoom()&&c<=this._map.getMaxZoom()&&f>=-180&&f<=180&&y>=this._map.getMinPitch()&&y<=this._map.getMaxPitch()}}const Oa={linearity:.3,easing:o.cx(0,0,.3,1)},_a=o.e({deceleration:2500,maxSpeed:1400},Oa),Qs=o.e({deceleration:20,maxSpeed:1400},Oa),jA=o.e({deceleration:1e3,maxSpeed:360},Oa),T=o.e({deceleration:1e3,maxSpeed:90},Oa),R=o.e({deceleration:1e3,maxSpeed:360},Oa);class ${constructor(n){this._map=n,this.clear()}clear(){this._inertiaBuffer=[]}record(n){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:z(),settings:n})}_drainInertiaBuffer(){const n=this._inertiaBuffer,c=z();for(;n.length>0&&c-n[0].time>160;)n.shift()}_onMoveEnd(n){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;const c={zoom:0,bearing:0,pitch:0,roll:0,pan:new o.P(0,0),pinchAround:void 0,around:void 0};for(const{settings:b}of this._inertiaBuffer)c.zoom+=b.zoomDelta||0,c.bearing+=b.bearingDelta||0,c.pitch+=b.pitchDelta||0,c.roll+=b.rollDelta||0,b.panDelta&&c.pan._add(b.panDelta),b.around&&(c.around=b.around),b.pinchAround&&(c.pinchAround=b.pinchAround);const f=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,y={};if(c.pan.mag()){const b=ge(c.pan.mag(),f,o.e({},_a,n||{})),S=c.pan.mult(b.amount/c.pan.mag()),M=this._map.cameraHelper.handlePanInertia(S,this._map.transform);y.center=M.easingCenter,y.offset=M.easingOffset,re(y,b)}if(c.zoom){const b=ge(c.zoom,f,Qs);y.zoom=this._map.transform.zoom+b.amount,re(y,b)}if(c.bearing){const b=ge(c.bearing,f,jA);y.bearing=this._map.transform.bearing+o.ao(b.amount,-179,179),re(y,b)}if(c.pitch){const b=ge(c.pitch,f,T);y.pitch=this._map.transform.pitch+b.amount,re(y,b)}if(c.roll){const b=ge(c.roll,f,R);y.roll=this._map.transform.roll+o.ao(b.amount,-179,179),re(y,b)}if(y.zoom||y.bearing){const b=c.pinchAround===void 0?c.around:c.pinchAround;y.around=b?this._map.unproject(b):this._map.getCenter()}return this.clear(),o.e(y,{noMoveStart:!0})}}function re(x,n){(!x.duration||x.duration<n.duration)&&(x.duration=n.duration,x.easing=n.easing)}function ge(x,n,c){const{maxSpeed:f,linearity:y,deceleration:b}=c,S=o.ao(x*y/(n/1e3),-f,f),M=Math.abs(S)/(b*y);return{easing:c.easing,duration:1e3*M,amount:S*(M/2)}}class we extends o.l{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(n,c,f,y={}){f=f instanceof MouseEvent?f:new MouseEvent(n,f);const b=H.mousePos(c.getCanvas(),f),S=c.unproject(b);super(n,o.e({point:b,lngLat:S,originalEvent:f},y)),this._defaultPrevented=!1,this.target=c}}class Se extends o.l{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(n,c,f){const y=n==="touchend"?f.changedTouches:f.touches,b=H.touchPos(c.getCanvasContainer(),y),S=b.map((N=>c.unproject(N))),M=b.reduce(((N,j,q,ne)=>N.add(j.div(ne.length))),new o.P(0,0));super(n,{points:b,point:M,lngLats:S,lngLat:c.unproject(M),originalEvent:f}),this._defaultPrevented=!1}}class Me extends o.l{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(n,c,f){super(n,{originalEvent:f}),this._defaultPrevented=!1}}class Re{constructor(n,c){this._map=n,this._clickTolerance=c.clickTolerance}reset(){delete this._mousedownPos}wheel(n){return this._firePreventable(new Me(n.type,this._map,n))}mousedown(n,c){return this._mousedownPos=c,this._firePreventable(new we(n.type,this._map,n))}mouseup(n){this._map.fire(new we(n.type,this._map,n))}click(n,c){this._mousedownPos&&this._mousedownPos.dist(c)>=this._clickTolerance||this._map.fire(new we(n.type,this._map,n))}dblclick(n){return this._firePreventable(new we(n.type,this._map,n))}mouseover(n){this._map.fire(new we(n.type,this._map,n))}mouseout(n){this._map.fire(new we(n.type,this._map,n))}touchstart(n){return this._firePreventable(new Se(n.type,this._map,n))}touchmove(n){this._map.fire(new Se(n.type,this._map,n))}touchend(n){this._map.fire(new Se(n.type,this._map,n))}touchcancel(n){this._map.fire(new Se(n.type,this._map,n))}_firePreventable(n){if(this._map.fire(n),n.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Ke{constructor(n){this._map=n}reset(){this._delayContextMenu=!1,this._ignoreContextMenu=!0,delete this._contextMenuEvent}mousemove(n){this._map.fire(new we(n.type,this._map,n))}mousedown(){this._delayContextMenu=!0,this._ignoreContextMenu=!1}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new we("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(n){this._delayContextMenu?this._contextMenuEvent=n:this._ignoreContextMenu||this._map.fire(new we(n.type,this._map,n)),this._map.listens("contextmenu")&&n.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class $e{constructor(n){this._map=n}get transform(){return this._map._requestedCameraState||this._map.transform}get center(){return{lng:this.transform.center.lng,lat:this.transform.center.lat}}get zoom(){return this.transform.zoom}get pitch(){return this.transform.pitch}get bearing(){return this.transform.bearing}unproject(n){return this.transform.screenPointToLocation(o.P.convert(n),this._map.terrain)}}class kt{constructor(n,c){this._map=n,this._tr=new $e(n),this._el=n.getCanvasContainer(),this._container=n.getContainer(),this._clickTolerance=c.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(n,c){this.isEnabled()&&n.shiftKey&&n.button===0&&(H.disableDrag(),this._startPos=this._lastPos=c,this._active=!0)}mousemoveWindow(n,c){if(!this._active)return;const f=c;if(this._lastPos.equals(f)||!this._box&&f.dist(this._startPos)<this._clickTolerance)return;const y=this._startPos;this._lastPos=f,this._box||(this._box=H.create("div","maplibregl-boxzoom",this._container),this._container.classList.add("maplibregl-crosshair"),this._fireEvent("boxzoomstart",n));const b=Math.min(y.x,f.x),S=Math.max(y.x,f.x),M=Math.min(y.y,f.y),N=Math.max(y.y,f.y);H.setTransform(this._box,`translate(${b}px,${M}px)`),this._box.style.width=S-b+"px",this._box.style.height=N-M+"px"}mouseupWindow(n,c){if(!this._active||n.button!==0)return;const f=this._startPos,y=c;if(this.reset(),H.suppressClick(),f.x!==y.x||f.y!==y.y)return this._map.fire(new o.l("boxzoomend",{originalEvent:n})),{cameraAnimation:b=>b.fitScreenCoordinates(f,y,this._tr.bearing,{linear:!0})};this._fireEvent("boxzoomcancel",n)}keydown(n){this._active&&n.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",n))}reset(){this._active=!1,this._container.classList.remove("maplibregl-crosshair"),this._box&&(H.remove(this._box),this._box=null),H.enableDrag(),delete this._startPos,delete this._lastPos}_fireEvent(n,c){return this._map.fire(new o.l(n,{originalEvent:c}))}}function Ye(x,n){if(x.length!==n.length)throw new Error(`The number of touches and points are not equal - touches ${x.length}, points ${n.length}`);const c={};for(let f=0;f<x.length;f++)c[x[f].identifier]=n[f];return c}class Bt{constructor(n){this.reset(),this.numTouches=n.numTouches}reset(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}touchstart(n,c,f){(this.centroid||f.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=n.timeStamp),f.length===this.numTouches&&(this.centroid=(function(y){const b=new o.P(0,0);for(const S of y)b._add(S);return b.div(y.length)})(c),this.touches=Ye(f,c)))}touchmove(n,c,f){if(this.aborted||!this.centroid)return;const y=Ye(f,c);for(const b in this.touches){const S=y[b];(!S||S.dist(this.touches[b])>30)&&(this.aborted=!0)}}touchend(n,c,f){if((!this.centroid||n.timeStamp-this.startTime>500)&&(this.aborted=!0),f.length===0){const y=!this.aborted&&this.centroid;if(this.reset(),y)return y}}}class Pt{constructor(n){this.singleTap=new Bt(n),this.numTaps=n.numTaps,this.reset()}reset(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}touchstart(n,c,f){this.singleTap.touchstart(n,c,f)}touchmove(n,c,f){this.singleTap.touchmove(n,c,f)}touchend(n,c,f){const y=this.singleTap.touchend(n,c,f);if(y){const b=n.timeStamp-this.lastTime<500,S=!this.lastTap||this.lastTap.dist(y)<30;if(b&&S||this.reset(),this.count++,this.lastTime=n.timeStamp,this.lastTap=y,this.count===this.numTaps)return this.reset(),y}}}class Zt{constructor(n){this._tr=new $e(n),this._zoomIn=new Pt({numTouches:1,numTaps:2}),this._zoomOut=new Pt({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(n,c,f){this._zoomIn.touchstart(n,c,f),this._zoomOut.touchstart(n,c,f)}touchmove(n,c,f){this._zoomIn.touchmove(n,c,f),this._zoomOut.touchmove(n,c,f)}touchend(n,c,f){const y=this._zoomIn.touchend(n,c,f),b=this._zoomOut.touchend(n,c,f),S=this._tr;return y?(this._active=!0,n.preventDefault(),setTimeout((()=>this.reset()),0),{cameraAnimation:M=>M.easeTo({duration:300,zoom:S.zoom+1,around:S.unproject(y)},{originalEvent:n})}):b?(this._active=!0,n.preventDefault(),setTimeout((()=>this.reset()),0),{cameraAnimation:M=>M.easeTo({duration:300,zoom:S.zoom-1,around:S.unproject(b)},{originalEvent:n})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Ut{constructor(n){this._enabled=!!n.enable,this._moveStateManager=n.moveStateManager,this._clickTolerance=n.clickTolerance||1,this._moveFunction=n.move,this._activateOnStart=!!n.activateOnStart,n.assignEvents(this),this.reset()}reset(n){this._active=!1,this._moved=!1,delete this._lastPoint,this._moveStateManager.endMove(n)}_move(...n){const c=this._moveFunction(...n);if(c.bearingDelta||c.pitchDelta||c.rollDelta||c.around||c.panDelta)return this._active=!0,c}dragStart(n,c){this.isEnabled()&&!this._lastPoint&&this._moveStateManager.isValidStartEvent(n)&&(this._moveStateManager.startMove(n),this._lastPoint=Array.isArray(c)?c[0]:c,this._activateOnStart&&this._lastPoint&&(this._active=!0))}dragMove(n,c){if(!this.isEnabled())return;const f=this._lastPoint;if(!f)return;if(n.preventDefault(),!this._moveStateManager.isValidMoveEvent(n))return void this.reset(n);const y=Array.isArray(c)?c[0]:c;return!this._moved&&y.dist(f)<this._clickTolerance?void 0:(this._moved=!0,this._lastPoint=y,this._move(f,y))}dragEnd(n){this.isEnabled()&&this._lastPoint&&this._moveStateManager.isValidEndEvent(n)&&(this._moved&&H.suppressClick(),this.reset(n))}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}getClickTolerance(){return this._clickTolerance}}const qt=0,Wt=2,tr={[qt]:1,[Wt]:2};class er{constructor(n){this._correctEvent=n.checkCorrectEvent}startMove(n){const c=H.mouseButton(n);this._eventButton=c}endMove(n){delete this._eventButton}isValidStartEvent(n){return this._correctEvent(n)}isValidMoveEvent(n){return!(function(c,f){const y=tr[f];return c.buttons===void 0||(c.buttons&y)!==y})(n,this._eventButton)}isValidEndEvent(n){return H.mouseButton(n)===this._eventButton}}class sn{constructor(){this._firstTouch=void 0}_isOneFingerTouch(n){return n.targetTouches.length===1}_isSameTouchEvent(n){return n.targetTouches[0].identifier===this._firstTouch}startMove(n){this._firstTouch=n.targetTouches[0].identifier}endMove(n){delete this._firstTouch}isValidStartEvent(n){return this._isOneFingerTouch(n)}isValidMoveEvent(n){return this._isOneFingerTouch(n)&&this._isSameTouchEvent(n)}isValidEndEvent(n){return this._isOneFingerTouch(n)&&this._isSameTouchEvent(n)}}class zr{constructor(n=new er({checkCorrectEvent:()=>!0}),c=new sn){this.mouseMoveStateManager=n,this.oneFingerTouchMoveStateManager=c}_executeRelevantHandler(n,c,f){return n instanceof MouseEvent?c(n):typeof TouchEvent<"u"&&n instanceof TouchEvent?f(n):void 0}startMove(n){this._executeRelevantHandler(n,(c=>this.mouseMoveStateManager.startMove(c)),(c=>this.oneFingerTouchMoveStateManager.startMove(c)))}endMove(n){this._executeRelevantHandler(n,(c=>this.mouseMoveStateManager.endMove(c)),(c=>this.oneFingerTouchMoveStateManager.endMove(c)))}isValidStartEvent(n){return this._executeRelevantHandler(n,(c=>this.mouseMoveStateManager.isValidStartEvent(c)),(c=>this.oneFingerTouchMoveStateManager.isValidStartEvent(c)))}isValidMoveEvent(n){return this._executeRelevantHandler(n,(c=>this.mouseMoveStateManager.isValidMoveEvent(c)),(c=>this.oneFingerTouchMoveStateManager.isValidMoveEvent(c)))}isValidEndEvent(n){return this._executeRelevantHandler(n,(c=>this.mouseMoveStateManager.isValidEndEvent(c)),(c=>this.oneFingerTouchMoveStateManager.isValidEndEvent(c)))}}const Cn=x=>{x.mousedown=x.dragStart,x.mousemoveWindow=x.dragMove,x.mouseup=x.dragEnd,x.contextmenu=n=>{n.preventDefault()}};class Zr{constructor(n,c){this._clickTolerance=n.clickTolerance||1,this._map=c,this.reset()}reset(){this._active=!1,this._touches={},this._sum=new o.P(0,0)}_shouldBePrevented(n){return n<(this._map.cooperativeGestures.isEnabled()?2:1)}touchstart(n,c,f){return this._calculateTransform(n,c,f)}touchmove(n,c,f){if(this._active){if(!this._shouldBePrevented(f.length))return n.preventDefault(),this._calculateTransform(n,c,f);this._map.cooperativeGestures.notifyGestureBlocked("touch_pan",n)}}touchend(n,c,f){this._calculateTransform(n,c,f),this._active&&this._shouldBePrevented(f.length)&&this.reset()}touchcancel(){this.reset()}_calculateTransform(n,c,f){f.length>0&&(this._active=!0);const y=Ye(f,c),b=new o.P(0,0),S=new o.P(0,0);let M=0;for(const j in y){const q=y[j],ne=this._touches[j];ne&&(b._add(q),S._add(q.sub(ne)),M++,y[j]=q)}if(this._touches=y,this._shouldBePrevented(M)||!S.mag())return;const N=S.div(M);return this._sum._add(N),this._sum.mag()<this._clickTolerance?void 0:{around:b.div(M),panDelta:N}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class On{constructor(){this.reset()}reset(){this._active=!1,delete this._firstTwoTouches}touchstart(n,c,f){this._firstTwoTouches||f.length<2||(this._firstTwoTouches=[f[0].identifier,f[1].identifier],this._start([c[0],c[1]]))}touchmove(n,c,f){if(!this._firstTwoTouches)return;n.preventDefault();const[y,b]=this._firstTwoTouches,S=Ri(f,c,y),M=Ri(f,c,b);if(!S||!M)return;const N=this._aroundCenter?null:S.add(M).div(2);return this._move([S,M],N,n)}touchend(n,c,f){if(!this._firstTwoTouches)return;const[y,b]=this._firstTwoTouches,S=Ri(f,c,y),M=Ri(f,c,b);S&&M||(this._active&&H.suppressClick(),this.reset())}touchcancel(){this.reset()}enable(n){this._enabled=!0,this._aroundCenter=!!n&&n.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return!!this._enabled}isActive(){return!!this._active}}function Ri(x,n,c){for(let f=0;f<x.length;f++)if(x[f].identifier===c)return n[f]}function Sn(x,n){return Math.log(x/n)/Math.LN2}class Hr extends On{reset(){super.reset(),delete this._distance,delete this._startDistance}_start(n){this._startDistance=this._distance=n[0].dist(n[1])}_move(n,c){const f=this._distance;if(this._distance=n[0].dist(n[1]),this._active||!(Math.abs(Sn(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:Sn(this._distance,f),pinchAround:c}}}function Fr(x,n){return 180*x.angleWith(n)/Math.PI}class pi extends On{reset(){super.reset(),delete this._minDiameter,delete this._startVector,delete this._vector}_start(n){this._startVector=this._vector=n[0].sub(n[1]),this._minDiameter=n[0].dist(n[1])}_move(n,c,f){const y=this._vector;if(this._vector=n[0].sub(n[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:Fr(this._vector,y),pinchAround:c}}_isBelowThreshold(n){this._minDiameter=Math.min(this._minDiameter,n.mag());const c=25/(Math.PI*this._minDiameter)*360,f=Fr(n,this._startVector);return Math.abs(f)<c}}function Mr(x){return Math.abs(x.y)>Math.abs(x.x)}class zn extends On{constructor(n){super(),this._currentTouchCount=0,this._map=n}reset(){super.reset(),this._valid=void 0,delete this._firstMove,delete this._lastPoints}touchstart(n,c,f){super.touchstart(n,c,f),this._currentTouchCount=f.length}_start(n){this._lastPoints=n,Mr(n[0].sub(n[1]))&&(this._valid=!1)}_move(n,c,f){if(this._map.cooperativeGestures.isEnabled()&&this._currentTouchCount<3)return;const y=n[0].sub(this._lastPoints[0]),b=n[1].sub(this._lastPoints[1]);return this._valid=this.gestureBeginsVertically(y,b,f.timeStamp),this._valid?(this._lastPoints=n,this._active=!0,{pitchDelta:(y.y+b.y)/2*-.5}):void 0}gestureBeginsVertically(n,c,f){if(this._valid!==void 0)return this._valid;const y=n.mag()>=2,b=c.mag()>=2;if(!y&&!b)return;if(!y||!b)return this._firstMove===void 0&&(this._firstMove=f),f-this._firstMove<100&&void 0;const S=n.y>0==c.y>0;return Mr(n)&&Mr(c)&&S}}const mi={panStep:100,bearingStep:15,pitchStep:10};class as{constructor(n){this._tr=new $e(n);const c=mi;this._panStep=c.panStep,this._bearingStep=c.bearingStep,this._pitchStep=c.pitchStep,this._rotationDisabled=!1}reset(){this._active=!1}keydown(n){if(n.altKey||n.ctrlKey||n.metaKey)return;let c=0,f=0,y=0,b=0,S=0;switch(n.keyCode){case 61:case 107:case 171:case 187:c=1;break;case 189:case 109:case 173:c=-1;break;case 37:n.shiftKey?f=-1:(n.preventDefault(),b=-1);break;case 39:n.shiftKey?f=1:(n.preventDefault(),b=1);break;case 38:n.shiftKey?y=1:(n.preventDefault(),S=-1);break;case 40:n.shiftKey?y=-1:(n.preventDefault(),S=1);break;default:return}return this._rotationDisabled&&(f=0,y=0),{cameraAnimation:M=>{const N=this._tr;M.easeTo({duration:300,easeId:"keyboardHandler",easing:ls,zoom:c?Math.round(N.zoom)+c*(n.shiftKey?2:1):N.zoom,bearing:N.bearing+f*this._bearingStep,pitch:N.pitch+y*this._pitchStep,offset:[-b*this._panStep,-S*this._panStep],center:N.center},{originalEvent:n})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function ls(x){return x*(2-x)}const Ni=4.000244140625,Bs=1/450;class Cs{constructor(n,c){this._onTimeout=f=>{this._type="wheel",this._delta-=this._lastValue,this._active||this._start(f)},this._map=n,this._tr=new $e(n),this._triggerRenderFrame=c,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=Bs}setZoomRate(n){this._defaultZoomRate=n}setWheelZoomRate(n){this._wheelZoomRate=n}isEnabled(){return!!this._enabled}isActive(){return!!this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(n){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!n&&n.around==="center")}disable(){this.isEnabled()&&(this._enabled=!1)}_shouldBePrevented(n){return!!this._map.cooperativeGestures.isEnabled()&&!(n.ctrlKey||this._map.cooperativeGestures.isBypassed(n))}wheel(n){if(!this.isEnabled())return;if(this._shouldBePrevented(n))return void this._map.cooperativeGestures.notifyGestureBlocked("wheel_zoom",n);let c=n.deltaMode===WheelEvent.DOM_DELTA_LINE?40*n.deltaY:n.deltaY;const f=z(),y=f-(this._lastWheelEventTime||0);this._lastWheelEventTime=f,c!==0&&c%Ni==0?this._type="wheel":c!==0&&Math.abs(c)<4?this._type="trackpad":y>400?(this._type=null,this._lastValue=c,this._timeout=setTimeout(this._onTimeout,40,n)):this._type||(this._type=Math.abs(y*c)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,c+=this._lastValue)),n.shiftKey&&c&&(c/=4),this._type&&(this._lastWheelEvent=n,this._delta-=c,this._active||this._start(n)),n.preventDefault()}_start(n){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const c=H.mousePos(this._map.getCanvas(),n),f=this._tr;this._aroundPoint=this._aroundCenter?f.transform.locationToScreenPoint(o.V.convert(f.center)):c,this._frameId||(this._frameId=!0,this._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const n=this._tr.transform;if(typeof this._lastExpectedZoom=="number"){const M=n.zoom-this._lastExpectedZoom;typeof this._startZoom=="number"&&(this._startZoom+=M),typeof this._targetZoom=="number"&&(this._targetZoom+=M)}if(this._delta!==0){const M=this._type==="wheel"&&Math.abs(this._delta)>Ni?this._wheelZoomRate:this._defaultZoomRate;let N=2/(1+Math.exp(-Math.abs(this._delta*M)));this._delta<0&&N!==0&&(N=1/N);const j=typeof this._targetZoom!="number"?n.scale:o.ar(this._targetZoom);this._targetZoom=n.applyConstrain(n.getCameraLngLat(),o.au(j*N)).zoom,this._type==="wheel"&&(this._startZoom=n.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}const c=typeof this._targetZoom!="number"?n.zoom:this._targetZoom,f=this._startZoom,y=this._easing;let b,S=!1;if(this._type==="wheel"&&f&&y){const M=z()-this._lastWheelEventTime,N=Math.min((M+5)/200,1),j=y(N);b=o.G.number(f,c,j),N<1?this._frameId||(this._frameId=!0):S=!0}else b=c,S=!0;return this._active=!0,S&&(this._active=!1,this._finishTimeout=setTimeout((()=>{this._zooming=!1,this._triggerRenderFrame(),delete this._targetZoom,delete this._lastExpectedZoom,delete this._finishTimeout}),200)),this._lastExpectedZoom=b,{noInertia:!0,needsRenderFrame:!S,zoomDelta:b-n.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}_smoothOutEasing(n){let c=o.cz;if(this._prevEase){const f=this._prevEase,y=(z()-f.start)/f.duration,b=f.easing(y+.01)-f.easing(y),S=.27/Math.sqrt(b*b+1e-4)*.01,M=Math.sqrt(.0729-S*S);c=o.cx(S,M,.25,1)}return this._prevEase={start:z(),duration:n,easing:c},c}reset(){this._active=!1,this._zooming=!1,delete this._targetZoom,delete this._lastExpectedZoom,this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout)}}class Qi{constructor(n,c){this._clickZoom=n,this._tapZoom=c}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class Fn{constructor(n){this._tr=new $e(n),this.reset()}reset(){this._active=!1}dblclick(n,c){return n.preventDefault(),{cameraAnimation:f=>{f.easeTo({duration:300,zoom:this._tr.zoom+(n.shiftKey?-1:1),around:this._tr.unproject(c)},{originalEvent:n})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Yn{constructor(){this._tap=new Pt({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,delete this._tapPoint,this._tap.reset()}touchstart(n,c,f){if(!this._swipePoint)if(this._tapTime){const y=c[0],b=n.timeStamp-this._tapTime<500,S=this._tapPoint.dist(y)<30;b&&S?f.length>0&&(this._swipePoint=y,this._swipeTouch=f[0].identifier):this.reset()}else this._tap.touchstart(n,c,f)}touchmove(n,c,f){if(this._tapTime){if(this._swipePoint){if(f[0].identifier!==this._swipeTouch)return;const y=c[0],b=y.y-this._swipePoint.y;return this._swipePoint=y,n.preventDefault(),this._active=!0,{zoomDelta:b/128}}}else this._tap.touchmove(n,c,f)}touchend(n,c,f){if(this._tapTime)this._swipePoint&&f.length===0&&this.reset();else{const y=this._tap.touchend(n,c,f);y&&(this._tapTime=n.timeStamp,this._tapPoint=y)}}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class yr{constructor(n,c,f){this._el=n,this._mousePan=c,this._touchPan=f}enable(n){this._inertiaOptions=n||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("maplibregl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("maplibregl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class br{constructor(n,c,f,y){this._pitchWithRotate=n.pitchWithRotate,this._rollEnabled=n.rollEnabled,this._mouseRotate=c,this._mousePitch=f,this._mouseRoll=y}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable(),this._rollEnabled&&this._mouseRoll.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable(),this._mouseRoll.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())&&(!this._rollEnabled||this._mouseRoll.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()||this._mouseRoll.isActive()}}class Ti{constructor(n,c,f,y){this._el=n,this._touchZoom=c,this._touchRotate=f,this._tapDragZoom=y,this._rotationDisabled=!1,this._enabled=!0}enable(n){this._touchZoom.enable(n),this._rotationDisabled||this._touchRotate.enable(n),this._tapDragZoom.enable(),this._el.classList.add("maplibregl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("maplibregl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}class ji{constructor(n,c){this._bypassKey=navigator.userAgent.indexOf("Mac")!==-1?"metaKey":"ctrlKey",this._map=n,this._options=c,this._enabled=!1}isActive(){return!1}reset(){}_setupUI(){if(this._container)return;const n=this._map.getCanvasContainer();n.classList.add("maplibregl-cooperative-gestures"),this._container=H.create("div","maplibregl-cooperative-gesture-screen",n);let c=this._map._getUIString("CooperativeGesturesHandler.WindowsHelpText");this._bypassKey==="metaKey"&&(c=this._map._getUIString("CooperativeGesturesHandler.MacHelpText"));const f=this._map._getUIString("CooperativeGesturesHandler.MobileHelpText"),y=document.createElement("div");y.className="maplibregl-desktop-message",y.textContent=c,this._container.appendChild(y);const b=document.createElement("div");b.className="maplibregl-mobile-message",b.textContent=f,this._container.appendChild(b),this._container.setAttribute("aria-hidden","true")}_destroyUI(){this._container&&(H.remove(this._container),this._map.getCanvasContainer().classList.remove("maplibregl-cooperative-gestures")),delete this._container}enable(){this._setupUI(),this._enabled=!0}disable(){this._enabled=!1,this._destroyUI()}isEnabled(){return this._enabled}isBypassed(n){return n[this._bypassKey]}notifyGestureBlocked(n,c){this._enabled&&(this._map.fire(new o.l("cooperativegestureprevented",{gestureType:n,originalEvent:c})),this._container.classList.add("maplibregl-show"),setTimeout((()=>{this._container.classList.remove("maplibregl-show")}),100))}}const ei=x=>x.zoom||x.drag||x.roll||x.pitch||x.rotate;class ci extends o.l{}function Nn(x){return x.panDelta&&x.panDelta.mag()||x.zoomDelta||x.bearingDelta||x.pitchDelta||x.rollDelta}class wi{constructor(n,c){this.handleWindowEvent=y=>{this.handleEvent(y,`${y.type}Window`)},this.handleEvent=(y,b)=>{if(y.type==="blur")return void this.stop(!0);this._updatingCamera=!0;const S=y.type==="renderFrame"?void 0:y,M={needsRenderFrame:!1},N={},j={};for(const{handlerName:te,handler:ue,allowed:_e}of this._handlers){if(!ue.isEnabled())continue;let De;if(this._blockedByActive(j,_e,te))ue.reset();else if(ue[b||y.type]){if(o.cA(y,b||y.type)){const ze=H.mousePos(this._map.getCanvas(),y);De=ue[b||y.type](y,ze)}else if(o.cB(y,b||y.type)){const ze=this._getMapTouches(y.touches),Oe=H.touchPos(this._map.getCanvas(),ze);De=ue[b||y.type](y,Oe,ze)}else o.cC(b||y.type)||(De=ue[b||y.type](y));this.mergeHandlerResult(M,N,De,te,S),De&&De.needsRenderFrame&&this._triggerRenderFrame()}(De||ue.isActive())&&(j[te]=ue)}const q={};for(const te in this._previousActiveHandlers)j[te]||(q[te]=S);this._previousActiveHandlers=j,(Object.keys(q).length||Nn(M))&&(this._changes.push([M,N,q]),this._triggerRenderFrame()),(Object.keys(j).length||Nn(M))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:ne}=M;ne&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],ne(this._map))},this._map=n,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new $(n),this._bearingSnap=c.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(c);const f=this._el;this._listeners=[[f,"touchstart",{passive:!0}],[f,"touchmove",{passive:!1}],[f,"touchend",void 0],[f,"touchcancel",void 0],[f,"mousedown",void 0],[f,"mousemove",void 0],[f,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[f,"mouseover",void 0],[f,"mouseout",void 0],[f,"dblclick",void 0],[f,"click",void 0],[f,"keydown",{capture:!1}],[f,"keyup",void 0],[f,"wheel",{passive:!1}],[f,"contextmenu",void 0],[window,"blur",void 0]];for(const[y,b,S]of this._listeners)H.addEventListener(y,b,y===document?this.handleWindowEvent:this.handleEvent,S)}destroy(){for(const[n,c,f]of this._listeners)H.removeEventListener(n,c,n===document?this.handleWindowEvent:this.handleEvent,f)}_addDefaultHandlers(n){const c=this._map,f=c.getCanvasContainer();this._add("mapEvent",new Re(c,n));const y=c.boxZoom=new kt(c,n);this._add("boxZoom",y),n.interactive&&n.boxZoom&&y.enable();const b=c.cooperativeGestures=new ji(c,n.cooperativeGestures);this._add("cooperativeGestures",b),n.cooperativeGestures&&b.enable();const S=new Zt(c),M=new Fn(c);c.doubleClickZoom=new Qi(M,S),this._add("tapZoom",S),this._add("clickZoom",M),n.interactive&&n.doubleClickZoom&&c.doubleClickZoom.enable();const N=new Yn;this._add("tapDragZoom",N);const j=c.touchPitch=new zn(c);this._add("touchPitch",j),n.interactive&&n.touchPitch&&c.touchPitch.enable(n.touchPitch);const q=()=>c.project(c.getCenter()),ne=(function({enable:Ze,clickTolerance:At,aroundCenter:ft=!0,minPixelCenterThreshold:st=100,rotateDegreesPerPixelMoved:wt=.8},Dt){const Lt=new er({checkCorrectEvent:Rt=>H.mouseButton(Rt)===0&&Rt.ctrlKey||H.mouseButton(Rt)===2&&!Rt.ctrlKey});return new Ut({clickTolerance:At,move:(Rt,Qt)=>{const nr=Dt();if(ft&&Math.abs(nr.y-Rt.y)>st)return{bearingDelta:o.cy(new o.P(Rt.x,Qt.y),Qt,nr)};let ur=(Qt.x-Rt.x)*wt;return ft&&Qt.y<nr.y&&(ur=-ur),{bearingDelta:ur}},moveStateManager:Lt,enable:Ze,assignEvents:Cn})})(n,q),te=(function({enable:Ze,clickTolerance:At,pitchDegreesPerPixelMoved:ft=-.5}){const st=new er({checkCorrectEvent:wt=>H.mouseButton(wt)===0&&wt.ctrlKey||H.mouseButton(wt)===2});return new Ut({clickTolerance:At,move:(wt,Dt)=>({pitchDelta:(Dt.y-wt.y)*ft}),moveStateManager:st,enable:Ze,assignEvents:Cn})})(n),ue=(function({enable:Ze,clickTolerance:At,rollDegreesPerPixelMoved:ft=.3},st){const wt=new er({checkCorrectEvent:Dt=>H.mouseButton(Dt)===2&&Dt.ctrlKey});return new Ut({clickTolerance:At,move:(Dt,Lt)=>{const Rt=st();let Qt=(Lt.x-Dt.x)*ft;return Lt.y<Rt.y&&(Qt=-Qt),{rollDelta:Qt}},moveStateManager:wt,enable:Ze,assignEvents:Cn})})(n,q);c.dragRotate=new br(n,ne,te,ue),this._add("mouseRotate",ne,["mousePitch"]),this._add("mousePitch",te,["mouseRotate","mouseRoll"]),this._add("mouseRoll",ue,["mousePitch"]),n.interactive&&n.dragRotate&&c.dragRotate.enable();const _e=(function({enable:Ze,clickTolerance:At}){const ft=new er({checkCorrectEvent:st=>H.mouseButton(st)===0&&!st.ctrlKey});return new Ut({clickTolerance:At,move:(st,wt)=>({around:wt,panDelta:wt.sub(st)}),activateOnStart:!0,moveStateManager:ft,enable:Ze,assignEvents:Cn})})(n),De=new Zr(n,c);c.dragPan=new yr(f,_e,De),this._add("mousePan",_e),this._add("touchPan",De,["touchZoom","touchRotate"]),n.interactive&&n.dragPan&&c.dragPan.enable(n.dragPan);const ze=new pi,Oe=new Hr;c.touchZoomRotate=new Ti(f,Oe,ze,N),this._add("touchRotate",ze,["touchPan","touchZoom"]),this._add("touchZoom",Oe,["touchPan","touchRotate"]),n.interactive&&n.touchZoomRotate&&c.touchZoomRotate.enable(n.touchZoomRotate),this._add("blockableMapEvent",new Ke(c));const Ge=c.scrollZoom=new Cs(c,(()=>this._triggerRenderFrame()));this._add("scrollZoom",Ge,["mousePan"]),n.interactive&&n.scrollZoom&&c.scrollZoom.enable(n.scrollZoom);const lt=c.keyboard=new as(c);this._add("keyboard",lt),n.interactive&&n.keyboard&&c.keyboard.enable()}_add(n,c,f){this._handlers.push({handlerName:n,handler:c,allowed:f}),this._handlersById[n]=c}stop(n){if(!this._updatingCamera){for(const{handler:c}of this._handlers)c.reset();this._inertia.clear(),this._fireEvents({},{},n),this._changes=[]}}isActive(){for(const{handler:n}of this._handlers)if(n.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!ei(this._eventsInProgress)||this.isZooming()}_blockedByActive(n,c,f){for(const y in n)if(y!==f&&(!c||c.indexOf(y)<0))return!0;return!1}_getMapTouches(n){const c=[];for(const f of n)this._el.contains(f.target)&&c.push(f);return c}mergeHandlerResult(n,c,f,y,b){if(!f)return;o.e(n,f);const S={handlerName:y,originalEvent:f.originalEvent||b};f.zoomDelta!==void 0&&(c.zoom=S),f.panDelta!==void 0&&(c.drag=S),f.rollDelta!==void 0&&(c.roll=S),f.pitchDelta!==void 0&&(c.pitch=S),f.bearingDelta!==void 0&&(c.rotate=S)}_applyChanges(){const n={},c={},f={};for(const[y,b,S]of this._changes)y.panDelta&&(n.panDelta=(n.panDelta||new o.P(0,0))._add(y.panDelta)),y.zoomDelta&&(n.zoomDelta=(n.zoomDelta||0)+y.zoomDelta),y.bearingDelta&&(n.bearingDelta=(n.bearingDelta||0)+y.bearingDelta),y.pitchDelta&&(n.pitchDelta=(n.pitchDelta||0)+y.pitchDelta),y.rollDelta&&(n.rollDelta=(n.rollDelta||0)+y.rollDelta),y.around!==void 0&&(n.around=y.around),y.pinchAround!==void 0&&(n.pinchAround=y.pinchAround),y.noInertia&&(n.noInertia=y.noInertia),o.e(c,b),o.e(f,S);this._updateMapTransform(n,c,f),this._changes=[]}_updateMapTransform(n,c,f){const y=this._map,b=y._getTransformForUpdate(),S=y.terrain;if(!(Nn(n)||S&&this._terrainMovement))return this._fireEvents(c,f,!0);y._stop(!0);let{panDelta:M,zoomDelta:N,bearingDelta:j,pitchDelta:q,rollDelta:ne,around:te,pinchAround:ue}=n;ue!==void 0&&(te=ue),te=te||y.transform.centerPoint,S&&!b.isPointOnMapSurface(te)&&(te=b.centerPoint);const _e={panDelta:M,zoomDelta:N,rollDelta:ne,pitchDelta:q,bearingDelta:j,around:te};this._map.cameraHelper.useGlobeControls&&!b.isPointOnMapSurface(te)&&(te=b.centerPoint);const De=te.distSqr(b.centerPoint)<.01?b.center:b.screenPointToLocation(M?te.sub(M):te);this._handleMapControls({terrain:S,tr:b,deltasForHelper:_e,preZoomAroundLoc:De,combinedEventsInProgress:c,panDelta:M}),y._applyUpdatedTransform(b),this._map._update(),n.noInertia||this._inertia.record(n),this._fireEvents(c,f,!0)}_handleMapControls({terrain:n,tr:c,deltasForHelper:f,preZoomAroundLoc:y,combinedEventsInProgress:b,panDelta:S}){const M=this._map.cameraHelper;if(M.handleMapControlsRollPitchBearingZoom(f,c),n)return M.useGlobeControls?(this._terrainMovement||!b.drag&&!b.zoom||(this._terrainMovement=!0,this._map._elevationFreeze=!0),void M.handleMapControlsPan(f,c,y)):this._terrainMovement||!b.drag&&!b.zoom?void(b.drag&&this._terrainMovement&&S?c.setCenter(c.screenPointToLocation(c.centerPoint.sub(S))):M.handleMapControlsPan(f,c,y)):(this._terrainMovement=!0,this._map._elevationFreeze=!0,void M.handleMapControlsPan(f,c,y));M.handleMapControlsPan(f,c,y)}_fireEvents(n,c,f){const y=ei(this._eventsInProgress),b=ei(n),S={};for(const ne in n){const{originalEvent:te}=n[ne];this._eventsInProgress[ne]||(S[`${ne}start`]=te),this._eventsInProgress[ne]=n[ne]}!y&&b&&this._fireEvent("movestart",b.originalEvent);for(const ne in S)this._fireEvent(ne,S[ne]);b&&this._fireEvent("move",b.originalEvent);for(const ne in n){const{originalEvent:te}=n[ne];this._fireEvent(ne,te)}const M={};let N;for(const ne in this._eventsInProgress){const{handlerName:te,originalEvent:ue}=this._eventsInProgress[ne];this._handlersById[te].isActive()||(delete this._eventsInProgress[ne],N=c[te]||ue,M[`${ne}end`]=N)}for(const ne in M)this._fireEvent(ne,M[ne]);const j=ei(this._eventsInProgress),q=(y||b)&&!j;if(q&&this._terrainMovement){this._map._elevationFreeze=!1,this._terrainMovement=!1;const ne=this._map._getTransformForUpdate();this._map.getCenterClampedToGround()&&ne.recalculateZoomAndCenter(this._map.terrain),this._map._applyUpdatedTransform(ne)}if(f&&q){this._updatingCamera=!0;const ne=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),te=ue=>ue!==0&&-this._bearingSnap<ue&&ue<this._bearingSnap;!ne||!ne.essential&&P.prefersReducedMotion?(this._map.fire(new o.l("moveend",{originalEvent:N})),te(this._map.getBearing())&&this._map.resetNorth()):(te(ne.bearing||this._map.getBearing())&&(ne.bearing=0),ne.freezeElevation=!0,this._map.easeTo(ne,{originalEvent:N})),this._updatingCamera=!1}}_fireEvent(n,c){this._map.fire(new o.l(n,c?{originalEvent:c}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add((n=>{delete this._frameId,this.handleEvent(new ci("renderFrame",{timeStamp:n})),this._applyChanges()}))}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}class Es extends o.E{constructor(n,c,f){super(),this._renderFrameCallback=()=>{const y=Math.min((z()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(y)),y<1&&this._easeFrameId?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},this._moving=!1,this._zooming=!1,this.transform=n,this._bearingSnap=f.bearingSnap,this.cameraHelper=c,this.on("moveend",(()=>{delete this._requestedCameraState}))}migrateProjection(n,c){n.apply(this.transform),this.transform=n,this.cameraHelper=c}getCenter(){return new o.V(this.transform.center.lng,this.transform.center.lat)}setCenter(n,c){return this.jumpTo({center:n},c)}getCenterElevation(){return this.transform.elevation}setCenterElevation(n,c){return this.jumpTo({elevation:n},c),this}getCenterClampedToGround(){return this._centerClampedToGround}setCenterClampedToGround(n){this._centerClampedToGround=n}panBy(n,c,f){return n=o.P.convert(n).mult(-1),this.panTo(this.transform.center,o.e({offset:n},c),f)}panTo(n,c,f){return this.easeTo(o.e({center:n},c),f)}getZoom(){return this.transform.zoom}setZoom(n,c){return this.jumpTo({zoom:n},c),this}zoomTo(n,c,f){return this.easeTo(o.e({zoom:n},c),f)}zoomIn(n,c){return this.zoomTo(this.getZoom()+1,n,c),this}zoomOut(n,c){return this.zoomTo(this.getZoom()-1,n,c),this}getVerticalFieldOfView(){return this.transform.fov}setVerticalFieldOfView(n,c){return n!=this.transform.fov&&(this.transform.setFov(n),this.fire(new o.l("movestart",c)).fire(new o.l("move",c)).fire(new o.l("moveend",c))),this}getBearing(){return this.transform.bearing}setBearing(n,c){return this.jumpTo({bearing:n},c),this}getPadding(){return this.transform.padding}setPadding(n,c){return this.jumpTo({padding:n},c),this}rotateTo(n,c,f){return this.easeTo(o.e({bearing:n},c),f)}resetNorth(n,c){return this.rotateTo(0,o.e({duration:1e3},n),c),this}resetNorthPitch(n,c){return this.easeTo(o.e({bearing:0,pitch:0,roll:0,duration:1e3},n),c),this}snapToNorth(n,c){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(n,c):this}getPitch(){return this.transform.pitch}setPitch(n,c){return this.jumpTo({pitch:n},c),this}getRoll(){return this.transform.roll}setRoll(n,c){return this.jumpTo({roll:n},c),this}cameraForBounds(n,c){n=kr.convert(n).adjustAntiMeridian();const f=c&&c.bearing||0;return this._cameraForBoxAndBearing(n.getNorthWest(),n.getSouthEast(),f,c)}_cameraForBoxAndBearing(n,c,f,y){const b={top:0,bottom:0,right:0,left:0};if(typeof(y=o.e({padding:b,offset:[0,0],maxZoom:this.transform.maxZoom},y)).padding=="number"){const j=y.padding;y.padding={top:j,bottom:j,right:j,left:j}}const S=o.e(b,y.padding);y.padding=S;const M=this.transform,N=new kr(n,c);return this.cameraHelper.cameraForBoxAndBearing(y,S,N,f,M)}fitBounds(n,c,f){return this._fitInternal(this.cameraForBounds(n,c),c,f)}fitScreenCoordinates(n,c,f,y,b){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.screenPointToLocation(o.P.convert(n)),this.transform.screenPointToLocation(o.P.convert(c)),f,y),y,b)}_fitInternal(n,c,f){return n?(delete(c=o.e(n,c)).padding,c.linear?this.easeTo(c,f):this.flyTo(c,f)):this}jumpTo(n,c){this.stop();const f=this._getTransformForUpdate();let y=!1,b=!1,S=!1;const M=f.zoom;this.cameraHelper.handleJumpToCenterZoom(f,n);const N=f.zoom!==M;return"elevation"in n&&f.elevation!==+n.elevation&&f.setElevation(+n.elevation),"bearing"in n&&f.bearing!==+n.bearing&&(y=!0,f.setBearing(+n.bearing)),"pitch"in n&&f.pitch!==+n.pitch&&(b=!0,f.setPitch(+n.pitch)),"roll"in n&&f.roll!==+n.roll&&(S=!0,f.setRoll(+n.roll)),n.padding==null||f.isPaddingEqual(n.padding)||f.setPadding(n.padding),this._applyUpdatedTransform(f),this.fire(new o.l("movestart",c)).fire(new o.l("move",c)),N&&this.fire(new o.l("zoomstart",c)).fire(new o.l("zoom",c)).fire(new o.l("zoomend",c)),y&&this.fire(new o.l("rotatestart",c)).fire(new o.l("rotate",c)).fire(new o.l("rotateend",c)),b&&this.fire(new o.l("pitchstart",c)).fire(new o.l("pitch",c)).fire(new o.l("pitchend",c)),S&&this.fire(new o.l("rollstart",c)).fire(new o.l("roll",c)).fire(new o.l("rollend",c)),this.fire(new o.l("moveend",c))}calculateCameraOptionsFromTo(n,c,f,y=0){const b=o.ab.fromLngLat(n,c),S=o.ab.fromLngLat(f,y),M=S.x-b.x,N=S.y-b.y,j=S.z-b.z,q=Math.hypot(M,N,j);if(q===0)throw new Error("Can't calculate camera options with same From and To");const ne=Math.hypot(M,N),te=o.au(this.transform.cameraToCenterDistance/q/this.transform.tileSize),ue=180*Math.atan2(M,-N)/Math.PI;let _e=180*Math.acos(ne/q)/Math.PI;return _e=j<0?90-_e:90+_e,{center:S.toLngLat(),elevation:y,zoom:te,pitch:_e,bearing:ue}}calculateCameraOptionsFromCameraLngLatAltRotation(n,c,f,y,b){const S=this.transform.calculateCenterFromCameraLngLatAlt(n,c,f,y);return{center:S.center,elevation:S.elevation,zoom:S.zoom,bearing:f,pitch:y,roll:b}}easeTo(n,c){this._stop(!1,n.easeId),((n=o.e({offset:[0,0],duration:500,easing:o.cz},n)).animate===!1||!n.essential&&P.prefersReducedMotion)&&(n.duration=0);const f=this._getTransformForUpdate(),y=this.getBearing(),b=f.pitch,S=f.roll,M="bearing"in n?this._normalizeBearing(n.bearing,y):y,N="pitch"in n?+n.pitch:b,j="roll"in n?this._normalizeBearing(n.roll,S):S,q="padding"in n?n.padding:f.padding,ne=o.P.convert(n.offset);let te,ue;n.around&&(te=o.V.convert(n.around),ue=f.locationToScreenPoint(te));const _e={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching,rolling:this._rolling},De=this.cameraHelper.handleEaseTo(f,{bearing:M,pitch:N,roll:j,padding:q,around:te,aroundPoint:ue,offsetAsPoint:ne,offset:n.offset,zoom:n.zoom,center:n.center});return this._rotating=this._rotating||y!==M,this._pitching=this._pitching||N!==b,this._rolling=this._rolling||j!==S,this._padding=!f.isPaddingEqual(q),this._zooming=this._zooming||De.isZooming,this._easeId=n.easeId,this._prepareEase(c,n.noMoveStart,_e),this.terrain&&this._prepareElevation(De.elevationCenter),this._ease((ze=>{De.easeFunc(ze),this.terrain&&!n.freezeElevation&&this._updateElevation(ze),this._applyUpdatedTransform(f),this._fireMoveEvents(c)}),(ze=>{this.terrain&&n.freezeElevation&&this._finalizeElevation(),this._afterEase(c,ze)}),n),this}_prepareEase(n,c,f={}){this._moving=!0,c||f.moving||this.fire(new o.l("movestart",n)),this._zooming&&!f.zooming&&this.fire(new o.l("zoomstart",n)),this._rotating&&!f.rotating&&this.fire(new o.l("rotatestart",n)),this._pitching&&!f.pitching&&this.fire(new o.l("pitchstart",n)),this._rolling&&!f.rolling&&this.fire(new o.l("rollstart",n))}_prepareElevation(n){this._elevationCenter=n,this._elevationStart=this.transform.elevation,this._elevationTarget=this.terrain.getElevationForLngLatZoom(n,this.transform.tileZoom),this._elevationFreeze=!0}_updateElevation(n){this._elevationStart!==void 0&&this._elevationCenter!==void 0||this._prepareElevation(this.transform.center),this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom));const c=this.terrain.getElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);if(n<1&&c!==this._elevationTarget){const f=this._elevationTarget-this._elevationStart;this._elevationStart+=n*(f-(c-(f*n+this._elevationStart))/(1-n)),this._elevationTarget=c}this.transform.setElevation(o.G.number(this._elevationStart,this._elevationTarget,n))}_finalizeElevation(){this._elevationFreeze=!1,this.getCenterClampedToGround()&&this.transform.recalculateZoomAndCenter(this.terrain)}_getTransformForUpdate(){return this.transformCameraUpdate||this.terrain?(this._requestedCameraState||(this._requestedCameraState=this.transform.clone()),this._requestedCameraState):this.transform}_elevateCameraIfInsideTerrain(n){if(!this.terrain&&n.elevation>=0&&n.pitch<=90)return{};const c=n.getCameraLngLat(),f=n.getCameraAltitude(),y=this.terrain?this.terrain.getElevationForLngLatZoom(c,n.zoom):0;if(f<y){const b=this.calculateCameraOptionsFromTo(c,y,n.center,n.elevation);return{pitch:b.pitch,zoom:b.zoom}}return{}}_applyUpdatedTransform(n){const c=[];if(c.push((y=>this._elevateCameraIfInsideTerrain(y))),this.transformCameraUpdate&&c.push((y=>this.transformCameraUpdate(y))),!c.length)return;const f=n.clone();for(const y of c){const b=f.clone(),{center:S,zoom:M,roll:N,pitch:j,bearing:q,elevation:ne}=y(b);S&&b.setCenter(S),ne!==void 0&&b.setElevation(ne),M!==void 0&&b.setZoom(M),N!==void 0&&b.setRoll(N),j!==void 0&&b.setPitch(j),q!==void 0&&b.setBearing(q),f.apply(b)}this.transform.apply(f)}_fireMoveEvents(n){this.fire(new o.l("move",n)),this._zooming&&this.fire(new o.l("zoom",n)),this._rotating&&this.fire(new o.l("rotate",n)),this._pitching&&this.fire(new o.l("pitch",n)),this._rolling&&this.fire(new o.l("roll",n))}_afterEase(n,c){if(this._easeId&&c&&this._easeId===c)return;delete this._easeId;const f=this._zooming,y=this._rotating,b=this._pitching,S=this._rolling;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._rolling=!1,this._padding=!1,f&&this.fire(new o.l("zoomend",n)),y&&this.fire(new o.l("rotateend",n)),b&&this.fire(new o.l("pitchend",n)),S&&this.fire(new o.l("rollend",n)),this.fire(new o.l("moveend",n))}flyTo(n,c){if(!n.essential&&P.prefersReducedMotion){const Qt=o.U(n,["center","zoom","bearing","pitch","roll","elevation","padding"]);return this.jumpTo(Qt,c)}this.stop(),n=o.e({offset:[0,0],speed:1.2,curve:1.42,easing:o.cz},n);const f=this._getTransformForUpdate(),y=f.bearing,b=f.pitch,S=f.roll,M=f.padding,N="bearing"in n?this._normalizeBearing(n.bearing,y):y,j="pitch"in n?+n.pitch:b,q="roll"in n?this._normalizeBearing(n.roll,S):S,ne="padding"in n?n.padding:f.padding,te=o.P.convert(n.offset);let ue=f.centerPoint.add(te);const _e=f.screenPointToLocation(ue),De=this.cameraHelper.handleFlyTo(f,{bearing:N,pitch:j,roll:q,padding:ne,locationAtOffset:_e,offsetAsPoint:te,center:n.center,minZoom:n.minZoom,zoom:n.zoom});let ze=n.curve;const Oe=Math.max(f.width,f.height),Ge=Oe/De.scaleOfZoom,lt=De.pixelPathLength;typeof De.scaleOfMinZoom=="number"&&(ze=Math.sqrt(Oe/De.scaleOfMinZoom/lt*2));const Ze=ze*ze;function At(Qt){const nr=(Ge*Ge-Oe*Oe+(Qt?-1:1)*Ze*Ze*lt*lt)/(2*(Qt?Ge:Oe)*Ze*lt);return Math.log(Math.sqrt(nr*nr+1)-nr)}function ft(Qt){return(Math.exp(Qt)-Math.exp(-Qt))/2}function st(Qt){return(Math.exp(Qt)+Math.exp(-Qt))/2}const wt=At(!1);let Dt=function(Qt){return st(wt)/st(wt+ze*Qt)},Lt=function(Qt){return Oe*((st(wt)*(ft(nr=wt+ze*Qt)/st(nr))-ft(wt))/Ze)/lt;var nr},Rt=(At(!0)-wt)/ze;if(Math.abs(lt)<2e-6||!isFinite(Rt)){if(Math.abs(Oe-Ge)<1e-6)return this.easeTo(n,c);const Qt=Ge<Oe?-1:1;Rt=Math.abs(Math.log(Ge/Oe))/ze,Lt=()=>0,Dt=nr=>Math.exp(Qt*ze*nr)}return n.duration="duration"in n?+n.duration:1e3*Rt/("screenSpeed"in n?+n.screenSpeed/ze:+n.speed),n.maxDuration&&n.duration>n.maxDuration&&(n.duration=0),this._zooming=!0,this._rotating=y!==N,this._pitching=j!==b,this._rolling=q!==S,this._padding=!f.isPaddingEqual(ne),this._prepareEase(c,!1),this.terrain&&this._prepareElevation(De.targetCenter),this._ease((Qt=>{const nr=Qt*Rt,ur=1/Dt(nr),rr=Lt(nr);this._rotating&&f.setBearing(o.G.number(y,N,Qt)),this._pitching&&f.setPitch(o.G.number(b,j,Qt)),this._rolling&&f.setRoll(o.G.number(S,q,Qt)),this._padding&&(f.interpolatePadding(M,ne,Qt),ue=f.centerPoint.add(te)),De.easeFunc(Qt,ur,rr,ue),this.terrain&&!n.freezeElevation&&this._updateElevation(Qt),this._applyUpdatedTransform(f),this._fireMoveEvents(c)}),(()=>{this.terrain&&n.freezeElevation&&this._finalizeElevation(),this._afterEase(c)}),n),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(n,c){var f;if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){const y=this._onEaseEnd;delete this._onEaseEnd,y.call(this,c)}return n||(f=this.handlers)===null||f===void 0||f.stop(!1),this}_ease(n,c,f){f.animate===!1||f.duration===0?(n(1),c()):(this._easeStart=z(),this._easeOptions=f,this._onEaseFrame=n,this._onEaseEnd=c,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_normalizeBearing(n,c){n=o.W(n,-180,180);const f=Math.abs(n-c);return Math.abs(n-360-c)<f&&(n-=360),Math.abs(n+360-c)<f&&(n+=360),n}queryTerrainElevation(n){return this.terrain?this.terrain.getElevationForLngLat(o.V.convert(n)):null}}const Ys={compact:!0,customAttribution:'<a href="https://maplibre.org/" target="_blank">MapLibre</a>'};class Fo{constructor(n=Ys){this._toggleAttribution=()=>{this._container.classList.contains("maplibregl-compact")&&(this._container.classList.contains("maplibregl-compact-show")?(this._container.setAttribute("open",""),this._container.classList.remove("maplibregl-compact-show")):(this._container.classList.add("maplibregl-compact-show"),this._container.removeAttribute("open")))},this._updateData=c=>{!c||c.sourceDataType!=="metadata"&&c.sourceDataType!=="visibility"&&c.dataType!=="style"&&c.type!=="terrain"||this._updateAttributions()},this._updateCompact=()=>{this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact===!1?this._container.setAttribute("open",""):this._container.classList.contains("maplibregl-compact")||this._container.classList.contains("maplibregl-attrib-empty")||(this._container.setAttribute("open",""),this._container.classList.add("maplibregl-compact","maplibregl-compact-show")):(this._container.setAttribute("open",""),this._container.classList.contains("maplibregl-compact")&&this._container.classList.remove("maplibregl-compact","maplibregl-compact-show"))},this._updateCompactMinimize=()=>{this._container.classList.contains("maplibregl-compact")&&this._container.classList.contains("maplibregl-compact-show")&&this._container.classList.remove("maplibregl-compact-show")},this.options=n}getDefaultPosition(){return"bottom-right"}onAdd(n){return this._map=n,this._compact=this.options.compact,this._container=H.create("details","maplibregl-ctrl maplibregl-ctrl-attrib"),this._compactButton=H.create("summary","maplibregl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=H.create("div","maplibregl-ctrl-attrib-inner",this._container),this._updateAttributions(),this._updateCompact(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("terrain",this._updateData),this._map.on("resize",this._updateCompact),this._map.on("drag",this._updateCompactMinimize),this._container}onRemove(){H.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("terrain",this._updateData),this._map.off("resize",this._updateCompact),this._map.off("drag",this._updateCompactMinimize),this._map=void 0,this._compact=void 0,this._attribHTML=void 0}_setElementTitle(n,c){const f=this._map._getUIString(`AttributionControl.${c}`);n.title=f,n.setAttribute("aria-label",f)}_updateAttributions(){if(!this._map.style)return;let n=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?n=n.concat(this.options.customAttribution.map((y=>typeof y!="string"?"":y))):typeof this.options.customAttribution=="string"&&n.push(this.options.customAttribution)),this._map.style.stylesheet){const y=this._map.style.stylesheet;this.styleOwner=y.owner,this.styleId=y.id}const c=this._map.style.tileManagers;for(const y in c){const b=c[y];if(b.used||b.usedForTerrain){const S=b.getSource();S.attribution&&n.indexOf(S.attribution)<0&&n.push(S.attribution)}}n=n.filter((y=>String(y).trim())),n.sort(((y,b)=>y.length-b.length)),n=n.filter(((y,b)=>{for(let S=b+1;S<n.length;S++)if(n[S].indexOf(y)>=0)return!1;return!0}));const f=n.join(" | ");f!==this._attribHTML&&(this._attribHTML=f,n.length?(this._innerContainer.innerHTML=H.sanitize(f),this._container.classList.remove("maplibregl-attrib-empty")):this._container.classList.add("maplibregl-attrib-empty"),this._updateCompact(),this._editLink=null)}}class Mi{constructor(n={}){this._updateCompact=()=>{const c=this._container.children;if(c.length){const f=c[0];this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact!==!1&&f.classList.add("maplibregl-compact"):f.classList.remove("maplibregl-compact")}},this.options=n}getDefaultPosition(){return"bottom-left"}onAdd(n){this._map=n,this._compact=this.options&&this.options.compact,this._container=H.create("div","maplibregl-ctrl");const c=H.create("a","maplibregl-ctrl-logo");return c.target="_blank",c.rel="noopener nofollow",c.href="https://maplibre.org/",c.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),c.setAttribute("rel","noopener nofollow"),this._container.appendChild(c),this._container.style.display="block",this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){H.remove(this._container),this._map.off("resize",this._updateCompact),this._map=void 0,this._compact=void 0}}class In{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(n){const c=++this._id;return this._queue.push({callback:n,id:c,cancelled:!1}),c}remove(n){const c=this._currentlyRunning,f=c?this._queue.concat(c):this._queue;for(const y of f)if(y.id===n)return void(y.cancelled=!0)}run(n=0){if(this._currentlyRunning)throw new Error("Attempting to run(), but is already running.");const c=this._currentlyRunning=this._queue;this._queue=[];for(const f of c)if(!f.cancelled&&(f.callback(n),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}var Vn=o.aV([{name:"a_pos3d",type:"Int16",components:3}]);class xi extends o.E{constructor(n){super(),this._lastTilesetChange=z(),this.tileManager=n,this._tiles={},this._renderableTilesKeys=[],this._sourceTileCache={},this.minzoom=0,this.maxzoom=22,this.deltaZoom=1,this.tileSize=n._source.tileSize*2**this.deltaZoom,n.usedForTerrain=!0,n.tileSize=this.tileSize}destruct(){this.tileManager.usedForTerrain=!1,this.tileManager.tileSize=null}getSource(){return this.tileManager._source}update(n,c){this.tileManager.update(n,c),this._renderableTilesKeys=[];const f={};for(const y of Tn(n,{tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,reparseOverscaled:!1,terrain:c,calculateTileZoom:this.tileManager._source.calculateTileZoom}))f[y.key]=!0,this._renderableTilesKeys.push(y.key),this._tiles[y.key]||(y.terrainRttPosMatrix32f=new Float64Array(16),o.c8(y.terrainRttPosMatrix32f,0,o.a5,o.a5,0,0,1),this._tiles[y.key]=new Ht(y,this.tileSize),this._lastTilesetChange=z());for(const y in this._tiles)f[y]||delete this._tiles[y]}freeRtt(n){for(const c in this._tiles){const f=this._tiles[c];(!n||f.tileID.equals(n)||f.tileID.isChildOf(n)||n.isChildOf(f.tileID))&&(f.rtt=[])}}getRenderableTiles(){return this._renderableTilesKeys.map((n=>this.getTileByID(n)))}getTileByID(n){return this._tiles[n]}getTerrainCoords(n,c){return c?this._getTerrainCoordsForTileRanges(n,c):this._getTerrainCoordsForRegularTile(n)}_getTerrainCoordsForRegularTile(n){const c={};for(const f of this._renderableTilesKeys){const y=this._tiles[f].tileID,b=n.clone(),S=o.bl();if(y.canonical.equals(n.canonical))o.c8(S,0,o.a5,o.a5,0,0,1);else if(y.canonical.isChildOf(n.canonical)){const M=y.canonical.z-n.canonical.z,N=y.canonical.x-(y.canonical.x>>M<<M),j=y.canonical.y-(y.canonical.y>>M<<M),q=o.a5>>M;o.c8(S,0,q,q,0,0,1),o.O(S,S,[-N*q,-j*q,0])}else{if(!n.canonical.isChildOf(y.canonical))continue;{const M=n.canonical.z-y.canonical.z,N=n.canonical.x-(n.canonical.x>>M<<M),j=n.canonical.y-(n.canonical.y>>M<<M),q=o.a5>>M;o.c8(S,0,o.a5,o.a5,0,0,1),o.O(S,S,[N*q,j*q,0]),o.Q(S,S,[1/2**M,1/2**M,0])}}b.terrainRttPosMatrix32f=new Float32Array(S),c[f]=b}return c}_getTerrainCoordsForTileRanges(n,c){const f={};for(const y of this._renderableTilesKeys){const b=this._tiles[y].tileID;if(!this._isWithinTileRanges(b,c))continue;const S=n.clone(),M=o.bl();if(b.canonical.z===n.canonical.z){const N=n.canonical.x-b.canonical.x,j=n.canonical.y-b.canonical.y;o.c8(M,0,o.a5,o.a5,0,0,1),o.O(M,M,[N*o.a5,j*o.a5,0])}else if(b.canonical.z>n.canonical.z){const N=b.canonical.z-n.canonical.z,j=b.canonical.x-(b.canonical.x>>N<<N),q=b.canonical.y-(b.canonical.y>>N<<N),ne=n.canonical.x-(b.canonical.x>>N),te=n.canonical.y-(b.canonical.y>>N),ue=o.a5>>N;o.c8(M,0,ue,ue,0,0,1),o.O(M,M,[-j*ue+ne*o.a5,-q*ue+te*o.a5,0])}else{const N=n.canonical.z-b.canonical.z,j=n.canonical.x-(n.canonical.x>>N<<N),q=n.canonical.y-(n.canonical.y>>N<<N),ne=(n.canonical.x>>N)-b.canonical.x,te=(n.canonical.y>>N)-b.canonical.y,ue=o.a5<<N;o.c8(M,0,ue,ue,0,0,1),o.O(M,M,[j*o.a5+ne*ue,q*o.a5+te*ue,0])}S.terrainRttPosMatrix32f=new Float32Array(M),f[y]=S}return f}getSourceTile(n,c){const f=this.tileManager._source;let y=n.overscaledZ-this.deltaZoom;if(y>f.maxzoom&&(y=f.maxzoom),y<f.minzoom)return;this._sourceTileCache[n.key]||(this._sourceTileCache[n.key]=n.scaledTo(y).key);let b=this.findTileInCaches(this._sourceTileCache[n.key]);if(!b?.dem&&c)for(;y>=f.minzoom&&!b?.dem;)b=this.findTileInCaches(n.scaledTo(y--).key);return b}findTileInCaches(n){let c=this.tileManager.getTileByID(n);return c||(c=this.tileManager._outOfViewCache.getByKey(n),c)}anyTilesAfterTime(n=Date.now()){return this._lastTilesetChange>=n}_isWithinTileRanges(n,c){return c[n.canonical.z]&&n.canonical.x>=c[n.canonical.z].minTileX&&n.canonical.x<=c[n.canonical.z].maxTileX&&n.canonical.y>=c[n.canonical.z].minTileY&&n.canonical.y<=c[n.canonical.z].maxTileY}}class Ss{constructor(n,c,f){this._meshCache={},this.painter=n,this.tileManager=new xi(c),this.options=f,this.exaggeration=typeof f.exaggeration=="number"?f.exaggeration:1,this.qualityFactor=2,this.meshSize=128,this._demMatrixCache={},this.coordsIndex=[],this._coordsTextureSize=1024}getDEMElevation(n,c,f,y=o.a5){var b;if(!(c>=0&&c<y&&f>=0&&f<y))return 0;const S=this.getTerrainData(n),M=(b=S.tile)===null||b===void 0?void 0:b.dem;if(!M)return 0;const N=o.cD([],[c/y*o.a5,f/y*o.a5],S.u_terrain_matrix),j=[N[0]*M.dim,N[1]*M.dim],q=Math.floor(j[0]),ne=Math.floor(j[1]),te=j[0]-q,ue=j[1]-ne;return M.get(q,ne)*(1-te)*(1-ue)+M.get(q+1,ne)*te*(1-ue)+M.get(q,ne+1)*(1-te)*ue+M.get(q+1,ne+1)*te*ue}getElevationForLngLatZoom(n,c){if(!o.cE(c,n.wrap()))return 0;const{tileID:f,mercatorX:y,mercatorY:b}=this._getOverscaledTileIDFromLngLatZoom(n,c);return this.getElevation(f,y%o.a5,b%o.a5,o.a5)}getElevationForLngLat(n){return this.getElevationForLngLatZoom(n,this.tileManager.maxzoom)}getElevation(n,c,f,y=o.a5){return this.getDEMElevation(n,c,f,y)*this.exaggeration}getTerrainData(n){if(!this._emptyDemTexture){const y=this.painter.context,b=new o.R({width:1,height:1},new Uint8Array(4));this._emptyDepthTexture=new o.T(y,b,y.gl.RGBA,{premultiply:!1}),this._emptyDemUnpack=[0,0,0,0],this._emptyDemTexture=new o.T(y,new o.R({width:1,height:1}),y.gl.RGBA,{premultiply:!1}),this._emptyDemTexture.bind(y.gl.NEAREST,y.gl.CLAMP_TO_EDGE),this._emptyDemMatrix=o.as([])}const c=this.tileManager.getSourceTile(n,!0);if(c&&c.dem&&(!c.demTexture||c.needsTerrainPrepare)){const y=this.painter.context;c.demTexture=this.painter.getTileTexture(c.dem.stride),c.demTexture?c.demTexture.update(c.dem.getPixels(),{premultiply:!1}):c.demTexture=new o.T(y,c.dem.getPixels(),y.gl.RGBA,{premultiply:!1}),c.demTexture.bind(y.gl.NEAREST,y.gl.CLAMP_TO_EDGE),c.needsTerrainPrepare=!1}const f=c&&c+c.tileID.key+n.key;if(f&&!this._demMatrixCache[f]){const y=this.tileManager.getSource().maxzoom;let b=n.canonical.z-c.tileID.canonical.z;n.overscaledZ>n.canonical.z&&(n.canonical.z>=y?b=n.canonical.z-y:o.w("cannot calculate elevation if elevation maxzoom > source.maxzoom"));const S=n.canonical.x-(n.canonical.x>>b<<b),M=n.canonical.y-(n.canonical.y>>b<<b),N=o.cF(new Float64Array(16),[1/(o.a5<<b),1/(o.a5<<b),0]);o.O(N,N,[S*o.a5,M*o.a5,0]),this._demMatrixCache[n.key]={matrix:N,coord:n}}return{u_depth:2,u_terrain:3,u_terrain_dim:c&&c.dem&&c.dem.dim||1,u_terrain_matrix:f?this._demMatrixCache[n.key].matrix:this._emptyDemMatrix,u_terrain_unpack:c&&c.dem&&c.dem.getUnpackVector()||this._emptyDemUnpack,u_terrain_exaggeration:this.exaggeration,texture:(c&&c.demTexture||this._emptyDemTexture).texture,depthTexture:(this._fboDepthTexture||this._emptyDepthTexture).texture,tile:c}}getFramebuffer(n){const c=this.painter,f=c.width/devicePixelRatio,y=c.height/devicePixelRatio;return!this._fbo||this._fbo.width===f&&this._fbo.height===y||(this._fbo.destroy(),this._fboCoordsTexture.destroy(),this._fboDepthTexture.destroy(),delete this._fbo,delete this._fboDepthTexture,delete this._fboCoordsTexture),this._fboCoordsTexture||(this._fboCoordsTexture=new o.T(c.context,{width:f,height:y,data:null},c.context.gl.RGBA,{premultiply:!1}),this._fboCoordsTexture.bind(c.context.gl.NEAREST,c.context.gl.CLAMP_TO_EDGE)),this._fboDepthTexture||(this._fboDepthTexture=new o.T(c.context,{width:f,height:y,data:null},c.context.gl.RGBA,{premultiply:!1}),this._fboDepthTexture.bind(c.context.gl.NEAREST,c.context.gl.CLAMP_TO_EDGE)),this._fbo||(this._fbo=c.context.createFramebuffer(f,y,!0,!1),this._fbo.depthAttachment.set(c.context.createRenderbuffer(c.context.gl.DEPTH_COMPONENT16,f,y))),this._fbo.colorAttachment.set(n==="coords"?this._fboCoordsTexture.texture:this._fboDepthTexture.texture),this._fbo}getCoordsTexture(){const n=this.painter.context;if(this._coordsTexture)return this._coordsTexture;const c=new Uint8Array(this._coordsTextureSize*this._coordsTextureSize*4);for(let b=0,S=0;b<this._coordsTextureSize;b++)for(let M=0;M<this._coordsTextureSize;M++,S+=4)c[S+0]=255&M,c[S+1]=255&b,c[S+2]=M>>8<<4|b>>8,c[S+3]=0;const f=new o.R({width:this._coordsTextureSize,height:this._coordsTextureSize},new Uint8Array(c.buffer)),y=new o.T(n,f,n.gl.RGBA,{premultiply:!1});return y.bind(n.gl.NEAREST,n.gl.CLAMP_TO_EDGE),this._coordsTexture=y,y}pointCoordinate(n){this.painter.maybeDrawDepthAndCoords(!0);const c=new Uint8Array(4),f=this.painter.context,y=f.gl,b=Math.round(n.x*this.painter.pixelRatio/devicePixelRatio),S=Math.round(n.y*this.painter.pixelRatio/devicePixelRatio),M=Math.round(this.painter.height/devicePixelRatio);f.bindFramebuffer.set(this.getFramebuffer("coords").framebuffer),y.readPixels(b,M-S-1,1,1,y.RGBA,y.UNSIGNED_BYTE,c),f.bindFramebuffer.set(null);const N=c[0]+(c[2]>>4<<8),j=c[1]+((15&c[2])<<8),q=this.coordsIndex[255-c[3]],ne=q&&this.tileManager.getTileByID(q);if(!ne)return null;const te=this._coordsTextureSize,ue=(1<<ne.tileID.canonical.z)*te;return new o.ab((ne.tileID.canonical.x*te+N)/ue+ne.tileID.wrap,(ne.tileID.canonical.y*te+j)/ue,this.getElevation(ne.tileID,N,j,te))}depthAtPoint(n){const c=new Uint8Array(4),f=this.painter.context,y=f.gl;return f.bindFramebuffer.set(this.getFramebuffer("depth").framebuffer),y.readPixels(n.x,this.painter.height/devicePixelRatio-n.y-1,1,1,y.RGBA,y.UNSIGNED_BYTE,c),f.bindFramebuffer.set(null),(c[0]/16777216+c[1]/65536+c[2]/256+c[3])/256}getTerrainMesh(n){var c;const f=((c=this.painter.style.projection)===null||c===void 0?void 0:c.transitionState)>0,y=f&&n.canonical.y===0,b=f&&n.canonical.y===(1<<n.canonical.z)-1,S=`m_${y?"n":""}_${b?"s":""}`;if(this._meshCache[S])return this._meshCache[S];const M=this.painter.context,N=new o.cG,j=new o.aZ,q=this.meshSize,ne=o.a5/q,te=q*q;for(let st=0;st<=q;st++)for(let wt=0;wt<=q;wt++)N.emplaceBack(wt*ne,st*ne,0);for(let st=0;st<te;st+=q+1)for(let wt=0;wt<q;wt++)j.emplaceBack(wt+st,q+wt+st+1,q+wt+st+2),j.emplaceBack(wt+st,q+wt+st+2,wt+st+1);const ue=N.length,_e=ue+(q+1),De=(q+1)*q,ze=y?o.bs:0,Oe=y?0:1,Ge=b?o.bt:o.a5,lt=b?0:1;for(let st=0;st<=q;st++)N.emplaceBack(st*ne,ze,Oe);for(let st=0;st<=q;st++)N.emplaceBack(st*ne,Ge,lt);for(let st=0;st<q;st++)j.emplaceBack(De+st,_e+st,_e+st+1),j.emplaceBack(De+st,_e+st+1,De+st+1),j.emplaceBack(0+st,ue+st+1,ue+st),j.emplaceBack(0+st,0+st+1,ue+st+1);const Ze=N.length,At=Ze+2*(q+1);for(const st of[0,1])for(let wt=0;wt<=q;wt++)for(const Dt of[0,1])N.emplaceBack(st*o.a5,wt*ne,Dt);for(let st=0;st<2*q;st+=2)j.emplaceBack(Ze+st,Ze+st+1,Ze+st+3),j.emplaceBack(Ze+st,Ze+st+3,Ze+st+2),j.emplaceBack(At+st,At+st+3,At+st+1),j.emplaceBack(At+st,At+st+2,At+st+3);const ft=new ii(M.createVertexBuffer(N,Vn.members),M.createIndexBuffer(j),o.aY.simpleSegment(0,0,N.length,j.length));return this._meshCache[S]=ft,ft}getMeshFrameDelta(n){return 2*Math.PI*o.bF/Math.pow(2,Math.max(n,0))/5}getMinTileElevationForLngLatZoom(n,c){var f;if(!o.cE(c,n.wrap()))return 0;const{tileID:y}=this._getOverscaledTileIDFromLngLatZoom(n,c);return(f=this.getMinMaxElevation(y).minElevation)!==null&&f!==void 0?f:0}getMinMaxElevation(n){const c=this.getTerrainData(n).tile,f={minElevation:null,maxElevation:null};return c&&c.dem&&(f.minElevation=c.dem.min*this.exaggeration,f.maxElevation=c.dem.max*this.exaggeration),f}_getOverscaledTileIDFromLngLatZoom(n,c){const f=o.ab.fromLngLat(n.wrap()),y=(1<<c)*o.a5,b=f.x*y,S=f.y*y,M=Math.floor(b/o.a5),N=Math.floor(S/o.a5);return{tileID:new o.a2(c,0,c,M,N),mercatorX:b,mercatorY:S}}}class Io{constructor(n,c,f){this._context=n,this._size=c,this._tileSize=f,this._objects=[],this._recentlyUsed=[],this._stamp=0}destruct(){for(const n of this._objects)n.texture.destroy(),n.fbo.destroy()}_createObject(n){const c=this._context.createFramebuffer(this._tileSize,this._tileSize,!0,!0),f=new o.T(this._context,{width:this._tileSize,height:this._tileSize,data:null},this._context.gl.RGBA);return f.bind(this._context.gl.LINEAR,this._context.gl.CLAMP_TO_EDGE),this._context.extTextureFilterAnisotropic&&this._context.gl.texParameterf(this._context.gl.TEXTURE_2D,this._context.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,this._context.extTextureFilterAnisotropicMax),c.depthAttachment.set(this._context.createRenderbuffer(this._context.gl.DEPTH_STENCIL,this._tileSize,this._tileSize)),c.colorAttachment.set(f.texture),{id:n,fbo:c,texture:f,stamp:-1,inUse:!1}}getObjectForId(n){return this._objects[n]}useObject(n){n.inUse=!0,this._recentlyUsed=this._recentlyUsed.filter((c=>n.id!==c)),this._recentlyUsed.push(n.id)}stampObject(n){n.stamp=++this._stamp}getOrCreateFreeObject(){for(const c of this._recentlyUsed)if(!this._objects[c].inUse)return this._objects[c];if(this._objects.length>=this._size)throw new Error("No free RenderPool available, call freeAllObjects() required!");const n=this._createObject(this._objects.length);return this._objects.push(n),n}freeObject(n){n.inUse=!1}freeAllObjects(){for(const n of this._objects)this.freeObject(n)}isFull(){return!(this._objects.length<this._size)&&this._objects.some((n=>!n.inUse))===!1}}const Js={background:!0,fill:!0,line:!0,raster:!0,hillshade:!0,"color-relief":!0};class Fs{constructor(n,c){this.painter=n,this.terrain=c,this.pool=new Io(n.context,30,c.tileManager.tileSize*c.qualityFactor)}destruct(){this.pool.destruct()}getTexture(n){return this.pool.getObjectForId(n.rtt[this._stacks.length-1].id).texture}prepareForRender(n,c){this._stacks=[],this._prevType=null,this._rttTiles=[],this._renderableTiles=this.terrain.tileManager.getRenderableTiles(),this._renderableLayerIds=n._order.filter((f=>!n._layers[f].isHidden(c))),this._coordsAscending={};for(const f in n.tileManagers){this._coordsAscending[f]={};const y=n.tileManagers[f].getVisibleCoordinates(),b=n.tileManagers[f].getSource(),S=b instanceof un?b.terrainTileRanges:null;for(const M of y){const N=this.terrain.tileManager.getTerrainCoords(M,S);for(const j in N)this._coordsAscending[f][j]||(this._coordsAscending[f][j]=[]),this._coordsAscending[f][j].push(N[j])}}this._coordsAscendingStr={};for(const f of n._order){const y=n._layers[f],b=y.source;if(Js[y.type]&&!this._coordsAscendingStr[b]){this._coordsAscendingStr[b]={};for(const S in this._coordsAscending[b])this._coordsAscendingStr[b][S]=this._coordsAscending[b][S].map((M=>M.key)).sort().join()}}for(const f of this._renderableTiles)for(const y in this._coordsAscendingStr){const b=this._coordsAscendingStr[y][f.tileID.key];b&&b!==f.rttCoords[y]&&(f.rtt=[])}}renderLayer(n,c){if(n.isHidden(this.painter.transform.zoom))return!1;const f=Object.assign(Object.assign({},c),{isRenderingToTexture:!0}),y=n.type,b=this.painter,S=this._renderableLayerIds[this._renderableLayerIds.length-1]===n.id;if(Js[y]&&(this._prevType&&Js[this._prevType]||this._stacks.push([]),this._prevType=y,this._stacks[this._stacks.length-1].push(n.id),!S))return!0;if(Js[this._prevType]||Js[y]&&S){this._prevType=y;const M=this._stacks.length-1,N=this._stacks[M]||[];for(const j of this._renderableTiles){if(this.pool.isFull()&&(Vc(this.painter,this.terrain,this._rttTiles,f),this._rttTiles=[],this.pool.freeAllObjects()),this._rttTiles.push(j),j.rtt[M]){const ne=this.pool.getObjectForId(j.rtt[M].id);if(ne.stamp===j.rtt[M].stamp){this.pool.useObject(ne);continue}}const q=this.pool.getOrCreateFreeObject();this.pool.useObject(q),this.pool.stampObject(q),j.rtt[M]={id:q.id,stamp:q.stamp},b.context.bindFramebuffer.set(q.fbo.framebuffer),b.context.clear({color:o.bq.transparent,stencil:0}),b.currentStencilSource=void 0;for(let ne=0;ne<N.length;ne++){const te=b.style._layers[N[ne]],ue=te.source?this._coordsAscending[te.source][j.tileID.key]:[j.tileID];b.context.viewport.set([0,0,q.fbo.width,q.fbo.height]),b._renderTileClippingMasks(te,ue,!0),b.renderLayer(b,b.style.tileManagers[te.source],te,ue,f),te.source&&(j.rttCoords[te.source]=this._coordsAscendingStr[te.source][j.tileID.key])}}return Vc(this.painter,this.terrain,this._rttTiles,f),this._rttTiles=[],this.pool.freeAllObjects(),Js[y]}return!1}}const Ji={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"MapLibre logo","Map.Title":"Map","Marker.Title":"Map marker","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","Popup.Close":"Close popup","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm","GlobeControl.Enable":"Enable globe","GlobeControl.Disable":"Disable globe","TerrainControl.Enable":"Enable terrain","TerrainControl.Disable":"Disable terrain","CooperativeGesturesHandler.WindowsHelpText":"Use Ctrl + scroll to zoom the map","CooperativeGesturesHandler.MacHelpText":"Use  + scroll to zoom the map","CooperativeGesturesHandler.MobileHelpText":"Use two fingers to move the map"},za=w,Ha={hash:!1,interactive:!0,bearingSnap:7,attributionControl:Ys,maplibreLogo:!1,refreshExpiredTiles:!0,canvasContextAttributes:{antialias:!1,preserveDrawingBuffer:!1,powerPreference:"high-performance",failIfMajorPerformanceCaveat:!1,desynchronized:!1,contextType:void 0},scrollZoom:!0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:!1,trackResize:!0,center:[0,0],elevation:0,zoom:0,bearing:0,pitch:0,roll:0,renderWorldCopies:!0,maxTileCacheSize:null,maxTileCacheZoomLevels:o.c.MAX_TILE_CACHE_ZOOM_LEVELS,transformRequest:null,transformCameraUpdate:null,transformConstrain:null,fadeDuration:300,crossSourceCollisions:!0,clickTolerance:3,localIdeographFontFamily:"sans-serif",pitchWithRotate:!0,rollEnabled:!1,reduceMotion:void 0,validateStyle:!0,maxCanvasSize:[4096,4096],cancelPendingTileRequestsWhileZooming:!0,centerClampedToGround:!0,experimentalZoomLevelsToOverscale:void 0},Gc={showCompass:!0,showZoom:!0,visualizePitch:!1,visualizeRoll:!0};class ja{constructor(n,c,f=!1){this.mousedown=b=>{this.startMove(b,H.mousePos(this.element,b)),H.addEventListener(window,"mousemove",this.mousemove),H.addEventListener(window,"mouseup",this.mouseup)},this.mousemove=b=>{this.move(b,H.mousePos(this.element,b))},this.mouseup=b=>{this._rotatePitchHandler.dragEnd(b),this.offTemp()},this.touchstart=b=>{b.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=H.touchPos(this.element,b.targetTouches)[0],this.startMove(b,this._startPos),H.addEventListener(window,"touchmove",this.touchmove,{passive:!1}),H.addEventListener(window,"touchend",this.touchend))},this.touchmove=b=>{b.targetTouches.length!==1?this.reset():(this._lastPos=H.touchPos(this.element,b.targetTouches)[0],this.move(b,this._lastPos))},this.touchend=b=>{b.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),delete this._startPos,delete this._lastPos,this.offTemp()},this.reset=()=>{this._rotatePitchHandler.reset(),delete this._startPos,delete this._lastPos,this.offTemp()},this._clickTolerance=10,this.element=c;const y=new zr;this._rotatePitchHandler=new Ut({clickTolerance:3,move:(b,S)=>{const M=c.getBoundingClientRect(),N=new o.P((M.bottom-M.top)/2,(M.right-M.left)/2);return{bearingDelta:o.cy(new o.P(b.x,S.y),S,N),pitchDelta:f?-.5*(S.y-b.y):void 0}},moveStateManager:y,enable:!0,assignEvents:()=>{}}),this.map=n,H.addEventListener(c,"mousedown",this.mousedown),H.addEventListener(c,"touchstart",this.touchstart,{passive:!1}),H.addEventListener(c,"touchcancel",this.reset)}startMove(n,c){this._rotatePitchHandler.dragStart(n,c),H.disableDrag()}move(n,c){const f=this.map,{bearingDelta:y,pitchDelta:b}=this._rotatePitchHandler.dragMove(n,c)||{};y&&f.setBearing(f.getBearing()+y),b&&f.setPitch(f.getPitch()+b)}off(){const n=this.element;H.removeEventListener(n,"mousedown",this.mousedown),H.removeEventListener(n,"touchstart",this.touchstart,{passive:!1}),H.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),H.removeEventListener(window,"touchend",this.touchend),H.removeEventListener(n,"touchcancel",this.reset),this.offTemp()}offTemp(){H.enableDrag(),H.removeEventListener(window,"mousemove",this.mousemove),H.removeEventListener(window,"mouseup",this.mouseup),H.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),H.removeEventListener(window,"touchend",this.touchend)}}let Hl;function VA(x,n,c,f=!1){if(f||!c.getCoveringTilesDetailsProvider().allowWorldCopies())return x?.wrap();const y=new o.V(x.lng,x.lat);if(x=new o.V(x.lng,x.lat),n){const b=new o.V(x.lng-360,x.lat),S=new o.V(x.lng+360,x.lat),M=c.locationToScreenPoint(x).distSqr(n);c.locationToScreenPoint(b).distSqr(n)<M?x=b:c.locationToScreenPoint(S).distSqr(n)<M&&(x=S)}for(;Math.abs(x.lng-c.center.lng)>180;){const b=c.locationToScreenPoint(x);if(b.x>=0&&b.y>=0&&b.x<=c.width&&b.y<=c.height)break;x.lng>c.center.lng?x.lng-=360:x.lng+=360}return x.lng!==y.lng&&c.isPointOnMapSurface(c.locationToScreenPoint(x))?x:y}const gi={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function Wo(x,n,c){const f=x.classList;for(const y in gi)f.remove(`maplibregl-${c}-anchor-${y}`);f.add(`maplibregl-${c}-anchor-${n}`)}class pA extends o.E{constructor(n){if(super(),this._onKeyPress=c=>{const f=c.code,y=c.charCode||c.keyCode;f!=="Space"&&f!=="Enter"&&y!==32&&y!==13||this.togglePopup()},this._onMapClick=c=>{const f=c.originalEvent.target,y=this._element;this._popup&&(f===y||y.contains(f))&&this.togglePopup()},this._update=c=>{if(!this._map)return;const f=this._map.loaded()&&!this._map.isMoving();(c?.type==="terrain"||c?.type==="render"&&!f)&&this._map.once("render",this._update),this._lngLat=VA(this._lngLat,this._flatPos,this._map.transform),this._flatPos=this._pos=this._map.project(this._lngLat)._add(this._offset),this._map.terrain&&(this._flatPos=this._map.transform.locationToScreenPoint(this._lngLat)._add(this._offset));let y="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?y=`rotateZ(${this._rotation}deg)`:this._rotationAlignment==="map"&&(y=`rotateZ(${this._rotation-this._map.getBearing()}deg)`);let b="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?b="rotateX(0deg)":this._pitchAlignment==="map"&&(b=`rotateX(${this._map.getPitch()}deg)`),this._subpixelPositioning||c&&c.type!=="moveend"||(this._pos=this._pos.round()),H.setTransform(this._element,`${gi[this._anchor]} translate(${this._pos.x}px, ${this._pos.y}px) ${b} ${y}`),P.frameAsync(new AbortController).then((()=>{this._updateOpacity(c&&c.type==="moveend")})).catch((()=>{}))},this._onMove=c=>{if(!this._isDragging){const f=this._clickTolerance||this._map._clickTolerance;this._isDragging=c.point.dist(this._pointerdownPos)>=f}this._isDragging&&(this._pos=c.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new o.l("dragstart"))),this.fire(new o.l("drag")))},this._onUp=()=>{this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new o.l("dragend")),this._state="inactive"},this._addDragHandler=c=>{this._element.contains(c.originalEvent.target)&&(c.preventDefault(),this._positionDelta=c.point.sub(this._pos).add(this._offset),this._pointerdownPos=c.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},this._anchor=n&&n.anchor||"center",this._color=n&&n.color||"#3FB1CE",this._scale=n&&n.scale||1,this._draggable=n&&n.draggable||!1,this._clickTolerance=n&&n.clickTolerance||0,this._subpixelPositioning=n&&n.subpixelPositioning||!1,this._isDragging=!1,this._state="inactive",this._rotation=n&&n.rotation||0,this._rotationAlignment=n&&n.rotationAlignment||"auto",this._pitchAlignment=n&&n.pitchAlignment&&n.pitchAlignment!=="auto"?n.pitchAlignment:this._rotationAlignment,this.setOpacity(n?.opacity,n?.opacityWhenCovered),n&&n.element)this._element=n.element,this._offset=o.P.convert(n&&n.offset||[0,0]);else{this._defaultMarker=!0,this._element=H.create("div");const c=H.createNS("http://www.w3.org/2000/svg","svg"),f=41,y=27;c.setAttributeNS(null,"display","block"),c.setAttributeNS(null,"height",`${f}px`),c.setAttributeNS(null,"width",`${y}px`),c.setAttributeNS(null,"viewBox",`0 0 ${y} ${f}`);const b=H.createNS("http://www.w3.org/2000/svg","g");b.setAttributeNS(null,"stroke","none"),b.setAttributeNS(null,"stroke-width","1"),b.setAttributeNS(null,"fill","none"),b.setAttributeNS(null,"fill-rule","evenodd");const S=H.createNS("http://www.w3.org/2000/svg","g");S.setAttributeNS(null,"fill-rule","nonzero");const M=H.createNS("http://www.w3.org/2000/svg","g");M.setAttributeNS(null,"transform","translate(3.0, 29.0)"),M.setAttributeNS(null,"fill","#000000");const N=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];for(const Oe of N){const Ge=H.createNS("http://www.w3.org/2000/svg","ellipse");Ge.setAttributeNS(null,"opacity","0.04"),Ge.setAttributeNS(null,"cx","10.5"),Ge.setAttributeNS(null,"cy","5.80029008"),Ge.setAttributeNS(null,"rx",Oe.rx),Ge.setAttributeNS(null,"ry",Oe.ry),M.appendChild(Ge)}const j=H.createNS("http://www.w3.org/2000/svg","g");j.setAttributeNS(null,"fill",this._color);const q=H.createNS("http://www.w3.org/2000/svg","path");q.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),j.appendChild(q);const ne=H.createNS("http://www.w3.org/2000/svg","g");ne.setAttributeNS(null,"opacity","0.25"),ne.setAttributeNS(null,"fill","#000000");const te=H.createNS("http://www.w3.org/2000/svg","path");te.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),ne.appendChild(te);const ue=H.createNS("http://www.w3.org/2000/svg","g");ue.setAttributeNS(null,"transform","translate(6.0, 7.0)"),ue.setAttributeNS(null,"fill","#FFFFFF");const _e=H.createNS("http://www.w3.org/2000/svg","g");_e.setAttributeNS(null,"transform","translate(8.0, 8.0)");const De=H.createNS("http://www.w3.org/2000/svg","circle");De.setAttributeNS(null,"fill","#000000"),De.setAttributeNS(null,"opacity","0.25"),De.setAttributeNS(null,"cx","5.5"),De.setAttributeNS(null,"cy","5.5"),De.setAttributeNS(null,"r","5.4999962");const ze=H.createNS("http://www.w3.org/2000/svg","circle");ze.setAttributeNS(null,"fill","#FFFFFF"),ze.setAttributeNS(null,"cx","5.5"),ze.setAttributeNS(null,"cy","5.5"),ze.setAttributeNS(null,"r","5.4999962"),_e.appendChild(De),_e.appendChild(ze),S.appendChild(M),S.appendChild(j),S.appendChild(ne),S.appendChild(ue),S.appendChild(_e),c.appendChild(S),c.setAttributeNS(null,"height",f*this._scale+"px"),c.setAttributeNS(null,"width",y*this._scale+"px"),this._element.appendChild(c),this._offset=o.P.convert(n&&n.offset||[0,-14])}if(this._element.classList.add("maplibregl-marker"),this._element.addEventListener("dragstart",(c=>{c.preventDefault()})),this._element.addEventListener("mousedown",(c=>{c.preventDefault()})),Wo(this._element,this._anchor,"marker"),n&&n.className)for(const c of n.className.split(" "))this._element.classList.add(c);this._popup=null}addTo(n){return this.remove(),this._map=n,this._element.hasAttribute("aria-label")||this._element.setAttribute("aria-label",n._getUIString("Marker.Title")),this._element.hasAttribute("role")||this._element.setAttribute("role","button"),n.getCanvasContainer().appendChild(this._element),n.on("move",this._update),n.on("moveend",this._update),n.on("terrain",this._update),n.on("projectiontransition",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this}remove(){return this._opacityTimeout&&(clearTimeout(this._opacityTimeout),delete this._opacityTimeout),this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("terrain",this._update),this._map.off("projectiontransition",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),H.remove(this._element),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(n){return this._lngLat=o.V.convert(n),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this}getElement(){return this._element}setPopup(n){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),n){if(!("offset"in n.options)){const y=Math.abs(13.5)/Math.SQRT2;n.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[y,-1*(38.1-13.5+y)],"bottom-right":[-y,-1*(38.1-13.5+y)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=n,this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this}setSubpixelPositioning(n){return this._subpixelPositioning=n,this}getPopup(){return this._popup}togglePopup(){const n=this._popup;return this._element.style.opacity===this._opacityWhenCovered?this:n?(n.isOpen()?n.remove():(n.setLngLat(this._lngLat),n.addTo(this._map)),this):this}_updateOpacity(n=!1){var c,f;const y=(c=this._map)===null||c===void 0?void 0:c.terrain,b=this._map.transform.isLocationOccluded(this._lngLat);if(!y||b){const ue=b?this._opacityWhenCovered:this._opacity;return void(this._element.style.opacity!==ue&&(this._element.style.opacity=ue))}if(n)this._opacityTimeout=null;else{if(this._opacityTimeout)return;this._opacityTimeout=setTimeout((()=>{this._opacityTimeout=null}),100)}const S=this._map,M=S.terrain.depthAtPoint(this._pos),N=S.terrain.getElevationForLngLat(this._lngLat);if(S.transform.lngLatToCameraDepth(this._lngLat,N)-M<.006)return void(this._element.style.opacity=this._opacity);const j=-this._offset.y/S.transform.pixelsPerMeter,q=Math.sin(S.getPitch()*Math.PI/180)*j,ne=S.terrain.depthAtPoint(new o.P(this._pos.x,this._pos.y-this._offset.y)),te=S.transform.lngLatToCameraDepth(this._lngLat,N+q)-ne>.006;!((f=this._popup)===null||f===void 0)&&f.isOpen()&&te&&this._popup.remove(),this._element.style.opacity=te?this._opacityWhenCovered:this._opacity}getOffset(){return this._offset}setOffset(n){return this._offset=o.P.convert(n),this._update(),this}addClassName(n){this._element.classList.add(n)}removeClassName(n){this._element.classList.remove(n)}toggleClassName(n){return this._element.classList.toggle(n)}setDraggable(n){return this._draggable=!!n,this._map&&(n?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(n){return this._rotation=n||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(n){return this._rotationAlignment=n||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment}setPitchAlignment(n){return this._pitchAlignment=n&&n!=="auto"?n:this._rotationAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment}setOpacity(n,c){return(this._opacity===void 0||n===void 0&&c===void 0)&&(this._opacity="1",this._opacityWhenCovered="0.2"),n!==void 0&&(this._opacity=n),c!==void 0&&(this._opacityWhenCovered=c),this._map&&this._updateOpacity(!0),this}}const fu={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0};let jl=0,Vl=!1;const Va={maxWidth:100,unit:"metric"};function bi(x,n,c){const f=c&&c.maxWidth||100,y=x._container.clientHeight/2,b=x._container.clientWidth/2,S=x.unproject([b-f/2,y]),M=x.unproject([b+f/2,y]),N=Math.round(x.project(M).x-x.project(S).x),j=Math.min(f,N,x._container.clientWidth),q=S.distanceTo(M);if(c&&c.unit==="imperial"){const ne=3.2808*q;ne>5280?ki(n,j,ne/5280,x._getUIString("ScaleControl.Miles")):ki(n,j,ne,x._getUIString("ScaleControl.Feet"))}else c&&c.unit==="nautical"?ki(n,j,q/1852,x._getUIString("ScaleControl.NauticalMiles")):q>=1e3?ki(n,j,q/1e3,x._getUIString("ScaleControl.Kilometers")):ki(n,j,q,x._getUIString("ScaleControl.Meters"))}function ki(x,n,c,f){const y=(function(b){const S=Math.pow(10,`${Math.floor(b)}`.length-1);let M=b/S;return M=M>=10?10:M>=5?5:M>=3?3:M>=2?2:M>=1?1:(function(N){const j=Math.pow(10,Math.ceil(-Math.log(N)/Math.LN10));return Math.round(N*j)/j})(M),S*M})(c);x.style.width=n*(y/c)+"px",x.innerHTML=`${y}&nbsp;${f}`}const es={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px",subpixelPositioning:!1,locationOccludedOpacity:void 0},Kc=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function Ga(x){if(x){if(typeof x=="number"){const n=Math.round(Math.abs(x)/Math.SQRT2);return{center:new o.P(0,0),top:new o.P(0,x),"top-left":new o.P(n,n),"top-right":new o.P(-n,n),bottom:new o.P(0,-x),"bottom-left":new o.P(n,-n),"bottom-right":new o.P(-n,-n),left:new o.P(x,0),right:new o.P(-x,0)}}if(x instanceof o.P||Array.isArray(x)){const n=o.P.convert(x);return{center:n,top:n,"top-left":n,"top-right":n,bottom:n,"bottom-left":n,"bottom-right":n,left:n,right:n}}return{center:o.P.convert(x.center||[0,0]),top:o.P.convert(x.top||[0,0]),"top-left":o.P.convert(x["top-left"]||[0,0]),"top-right":o.P.convert(x["top-right"]||[0,0]),bottom:o.P.convert(x.bottom||[0,0]),"bottom-left":o.P.convert(x["bottom-left"]||[0,0]),"bottom-right":o.P.convert(x["bottom-right"]||[0,0]),left:o.P.convert(x.left||[0,0]),right:o.P.convert(x.right||[0,0])}}return Ga(new o.P(0,0))}const qc=w;m.AJAXError=o.cJ,m.Event=o.l,m.Evented=o.E,m.LngLat=o.V,m.MercatorCoordinate=o.ab,m.Point=o.P,m.addProtocol=o.cK,m.config=o.c,m.removeProtocol=o.cL,m.AttributionControl=Fo,m.BoxZoomHandler=kt,m.CanvasSource=fe,m.CooperativeGesturesHandler=ji,m.DoubleClickZoomHandler=Qi,m.DragPanHandler=yr,m.DragRotateHandler=br,m.EdgeInsets=Sa,m.FullscreenControl=class extends o.E{constructor(x={}){super(),this._onFullscreenChange=()=>{var n;let c=window.document.fullscreenElement||window.document.mozFullScreenElement||window.document.webkitFullscreenElement||window.document.msFullscreenElement;for(;!((n=c?.shadowRoot)===null||n===void 0)&&n.fullscreenElement;)c=c.shadowRoot.fullscreenElement;c===this._container!==this._fullscreen&&this._handleFullscreenChange()},this._onClickFullscreen=()=>{this._isFullscreen()?this._exitFullscreen():this._requestFullscreen()},this._fullscreen=!1,x&&x.container&&(x.container instanceof HTMLElement?this._container=x.container:o.w("Full screen control 'container' must be a DOM element.")),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in document&&(this._fullscreenchange="MSFullscreenChange")}onAdd(x){return this._map=x,this._container||(this._container=this._map.getContainer()),this._controlContainer=H.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),this._controlContainer}onRemove(){H.remove(this._controlContainer),this._map=null,window.document.removeEventListener(this._fullscreenchange,this._onFullscreenChange)}_setupUI(){const x=this._fullscreenButton=H.create("button","maplibregl-ctrl-fullscreen",this._controlContainer);H.create("span","maplibregl-ctrl-icon",x).setAttribute("aria-hidden","true"),x.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),window.document.addEventListener(this._fullscreenchange,this._onFullscreenChange)}_updateTitle(){const x=this._getTitle();this._fullscreenButton.setAttribute("aria-label",x),this._fullscreenButton.title=x}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_handleFullscreenChange(){this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("maplibregl-ctrl-shrink"),this._fullscreenButton.classList.toggle("maplibregl-ctrl-fullscreen"),this._updateTitle(),this._fullscreen?(this.fire(new o.l("fullscreenstart")),this._prevCooperativeGesturesEnabled=this._map.cooperativeGestures.isEnabled(),this._map.cooperativeGestures.disable()):(this.fire(new o.l("fullscreenend")),this._prevCooperativeGesturesEnabled&&this._map.cooperativeGestures.enable())}_exitFullscreen(){window.document.exitFullscreen?window.document.exitFullscreen():window.document.mozCancelFullScreen?window.document.mozCancelFullScreen():window.document.msExitFullscreen?window.document.msExitFullscreen():window.document.webkitCancelFullScreen?window.document.webkitCancelFullScreen():this._togglePseudoFullScreen()}_requestFullscreen(){this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen?this._container.webkitRequestFullscreen():this._togglePseudoFullScreen()}_togglePseudoFullScreen(){this._container.classList.toggle("maplibregl-pseudo-fullscreen"),this._handleFullscreenChange(),this._map.resize()}},m.GeoJSONSource=Dn,m.GeolocateControl=class extends o.E{constructor(x){super(),this._onSuccess=n=>{if(this._map){if(this._isOutOfMapMaxBounds(n))return this._setErrorState(),this.fire(new o.l("outofmaxbounds",n)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=n,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background");break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(n),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(n),this.options.showUserLocation&&this._dotElement.classList.remove("maplibregl-user-location-dot-stale"),this.fire(new o.l("geolocate",n)),this._finish()}},this._updateCamera=n=>{const c=new o.V(n.coords.longitude,n.coords.latitude),f=n.coords.accuracy,y=this._map.getBearing(),b=o.e({bearing:y},this.options.fitBoundsOptions),S=kr.fromLngLat(c,f);this._map.fitBounds(S,b,{geolocateSource:!0})},this._updateMarker=n=>{if(n){const c=new o.V(n.coords.longitude,n.coords.latitude);this._accuracyCircleMarker.setLngLat(c).addTo(this._map),this._userLocationDotMarker.setLngLat(c).addTo(this._map),this._accuracy=n.coords.accuracy,this._updateCircleRadiusIfNeeded()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},this._onUpdate=()=>{this._updateCircleRadiusIfNeeded()},this._onError=n=>{if(this._map){if(n.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const c=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=c,this._geolocateButton.setAttribute("aria-label",c),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(n.code===3&&Vl)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("maplibregl-user-location-dot-stale"),this.fire(new o.l("error",n)),this._finish()}},this._finish=()=>{this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},this._setupUI=()=>{this._map&&(this._container.addEventListener("contextmenu",(n=>n.preventDefault())),this._geolocateButton=H.create("button","maplibregl-ctrl-geolocate",this._container),H.create("span","maplibregl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",this._geolocateButton.disabled=!0)},this._finishSetupUI=n=>{if(this._map){if(n===!1){o.w("Geolocation support is not available so the GeolocateControl will be disabled.");const c=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=c,this._geolocateButton.setAttribute("aria-label",c)}else{const c=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.disabled=!1,this._geolocateButton.title=c,this._geolocateButton.setAttribute("aria-label",c)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=H.create("div","maplibregl-user-location-dot"),this._userLocationDotMarker=new pA({element:this._dotElement}),this._circleElement=H.create("div","maplibregl-user-location-accuracy-circle"),this._accuracyCircleMarker=new pA({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onUpdate),this._map.on("move",this._onUpdate),this._map.on("rotate",this._onUpdate),this._map.on("pitch",this._onUpdate)),this._geolocateButton.addEventListener("click",(()=>this.trigger())),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",(c=>{const f=c?.[0]instanceof ResizeObserverEntry;c.geolocateSource||this._watchState!=="ACTIVE_LOCK"||f||this._map.isZooming()||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this.fire(new o.l("trackuserlocationend")),this.fire(new o.l("userlocationlostfocus")))}))}},this.options=o.e({},fu,x)}onAdd(x){return this._map=x,this._container=H.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),(function(){return o._(this,arguments,void 0,(function*(n=!1){if(Hl!==void 0&&!n)return Hl;if(window.navigator.permissions===void 0)return Hl=!!window.navigator.geolocation,Hl;try{Hl=(yield window.navigator.permissions.query({name:"geolocation"})).state!=="denied"}catch{Hl=!!window.navigator.geolocation}return Hl}))})().then((n=>this._finishSetupUI(n))),this._container}onRemove(){this._geolocationWatchID!==void 0&&(window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),H.remove(this._container),this._map.off("zoom",this._onUpdate),this._map.off("move",this._onUpdate),this._map.off("rotate",this._onUpdate),this._map.off("pitch",this._onUpdate),this._map=void 0,jl=0,Vl=!1}_isOutOfMapMaxBounds(x){const n=this._map.getMaxBounds(),c=x.coords;return n&&(c.longitude<n.getWest()||c.longitude>n.getEast()||c.latitude<n.getSouth()||c.latitude>n.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"ACTIVE_ERROR":case"BACKGROUND_ERROR":case"OFF":case void 0:break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}}_updateCircleRadiusIfNeeded(){const x=this._userLocationDotMarker.getLngLat();if(!(this.options.showUserLocation&&this.options.showAccuracyCircle&&this._accuracy&&x))return;const n=this._map.project(x),c=this._map.unproject([n.x+100,n.y]),f=x.distanceTo(c)/100,y=2*this._accuracy/f;this._circleElement.style.width=`${y.toFixed(2)}px`,this._circleElement.style.height=`${y.toFixed(2)}px`}trigger(){if(!this._setup)return o.w("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new o.l("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":jl--,Vl=!1,this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this.fire(new o.l("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new o.l("trackuserlocationstart")),this.fire(new o.l("userlocationfocus"));break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"OFF":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let x;this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),jl++,jl>1?(x={maximumAge:6e5,timeout:0},Vl=!0):(x=this.options.positionOptions,Vl=!1),this._geolocationWatchID=window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,x)}}else window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_clearWatch(){window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},m.GlobeControl=class{constructor(){this._toggleProjection=()=>{var x;const n=(x=this._map.getProjection())===null||x===void 0?void 0:x.type;this._map.setProjection(n!=="mercator"&&n?{type:"mercator"}:{type:"globe"}),this._updateGlobeIcon()},this._updateGlobeIcon=()=>{var x;this._globeButton.classList.remove("maplibregl-ctrl-globe"),this._globeButton.classList.remove("maplibregl-ctrl-globe-enabled"),((x=this._map.getProjection())===null||x===void 0?void 0:x.type)==="globe"?(this._globeButton.classList.add("maplibregl-ctrl-globe-enabled"),this._globeButton.title=this._map._getUIString("GlobeControl.Disable")):(this._globeButton.classList.add("maplibregl-ctrl-globe"),this._globeButton.title=this._map._getUIString("GlobeControl.Enable"))}}onAdd(x){return this._map=x,this._container=H.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._globeButton=H.create("button","maplibregl-ctrl-globe",this._container),H.create("span","maplibregl-ctrl-icon",this._globeButton).setAttribute("aria-hidden","true"),this._globeButton.type="button",this._globeButton.addEventListener("click",this._toggleProjection),this._updateGlobeIcon(),this._map.on("styledata",this._updateGlobeIcon),this._container}onRemove(){H.remove(this._container),this._map.off("styledata",this._updateGlobeIcon),this._globeButton.removeEventListener("click",this._toggleProjection),this._map=void 0}},m.Hash=fA,m.ImageSource=un,m.KeyboardHandler=as,m.LngLatBounds=kr,m.LogoControl=Mi,m.Map=class extends Es{constructor(x){var n,c;o.cH.mark(o.cI.create);const f=Object.assign(Object.assign(Object.assign({},Ha),x),{canvasContextAttributes:Object.assign(Object.assign({},Ha.canvasContextAttributes),x.canvasContextAttributes)});if(f.minZoom!=null&&f.maxZoom!=null&&f.minZoom>f.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(f.minPitch!=null&&f.maxPitch!=null&&f.minPitch>f.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(f.minPitch!=null&&f.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(f.maxPitch!=null&&f.maxPitch>180)throw new Error("maxPitch must be less than or equal to 180");const y=new ul,b=new ha;if(f.minZoom!==void 0&&y.setMinZoom(f.minZoom),f.maxZoom!==void 0&&y.setMaxZoom(f.maxZoom),f.minPitch!==void 0&&y.setMinPitch(f.minPitch),f.maxPitch!==void 0&&y.setMaxPitch(f.maxPitch),f.renderWorldCopies!==void 0&&y.setRenderWorldCopies(f.renderWorldCopies),f.transformConstrain!==null&&y.setConstrainOverride(f.transformConstrain),super(y,b,{bearingSnap:f.bearingSnap}),this._idleTriggered=!1,this._crossFadingFactor=1,this._renderTaskQueue=new In,this._controls=[],this._mapId=o.ah(),this._lostContextStyle={style:null,images:null},this._contextLost=M=>{M.preventDefault(),this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this.painter.destroy();for(const N of Object.values(this.style._layers))if(N.type==="custom"&&console.warn(`Custom layer with id '${N.id}' cannot be restored after WebGL context loss. You will need to re-add it manually after context restoration.`),N._listeners)for(const[j]of Object.entries(N._listeners))console.warn(`Custom layer with id '${N.id}' had event listeners for event '${j}' which cannot be restored after WebGL context loss. You will need to re-add them manually after context restoration.`);this._lostContextStyle=this._getStyleAndImages(),this.style.destroy(),this.style=null,this.fire(new o.l("webglcontextlost",{originalEvent:M}))},this._contextRestored=M=>{this._lostContextStyle.style&&this.setStyle(this._lostContextStyle.style,{diff:!1}),this._lostContextStyle.images&&(this.style.imageManager.images=this._lostContextStyle.images),this._setupPainter(),this.resize(),this._update(),this.fire(new o.l("webglcontextrestored",{originalEvent:M}))},this._onMapScroll=M=>{if(M.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},this._onWindowOnline=()=>{this._update()},this._interactive=f.interactive,this._maxTileCacheSize=f.maxTileCacheSize,this._maxTileCacheZoomLevels=f.maxTileCacheZoomLevels,this._canvasContextAttributes=Object.assign({},f.canvasContextAttributes),this._trackResize=f.trackResize===!0,this._bearingSnap=f.bearingSnap,this._centerClampedToGround=f.centerClampedToGround,this._refreshExpiredTiles=f.refreshExpiredTiles===!0,this._fadeDuration=f.fadeDuration,this._crossSourceCollisions=f.crossSourceCollisions===!0,this._collectResourceTiming=f.collectResourceTiming===!0,this._locale=Object.assign(Object.assign({},Ji),f.locale),this._clickTolerance=f.clickTolerance,this._overridePixelRatio=f.pixelRatio,this._maxCanvasSize=f.maxCanvasSize,this._zoomLevelsToOverscale=f.experimentalZoomLevelsToOverscale,this.transformCameraUpdate=f.transformCameraUpdate,this.transformConstrain=f.transformConstrain,this.cancelPendingTileRequestsWhileZooming=f.cancelPendingTileRequestsWhileZooming===!0,f.reduceMotion!==void 0&&(P.prefersReducedMotion=f.reduceMotion),this._imageQueueHandle=Xe.addThrottleControl((()=>this.isMoving())),this._requestManager=new Qe(f.transformRequest),typeof f.container=="string"){if(this._container=document.getElementById(f.container),!this._container)throw new Error(`Container '${f.container}' not found.`)}else{if(!(f.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=f.container}if(f.maxBounds&&this.setMaxBounds(f.maxBounds),this._setupContainer(),this._setupPainter(),this.on("move",(()=>this._update(!1))),this.on("moveend",(()=>this._update(!1))),this.on("zoom",(()=>this._update(!0))),this.on("terrain",(()=>{this.painter.terrainFacilitator.dirty=!0,this._update(!0)})),this.once("idle",(()=>{this._idleTriggered=!0})),typeof window<"u"){addEventListener("online",this._onWindowOnline,!1);let M=!1;const N=Ou((j=>{this._trackResize&&!this._removed&&(this.resize(j),this.redraw())}),50);this._resizeObserver=new ResizeObserver((j=>{M?N(j):M=!0})),this._resizeObserver.observe(this._container)}this.handlers=new wi(this,f),this._hash=f.hash&&new fA(typeof f.hash=="string"&&f.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:f.center,elevation:f.elevation,zoom:f.zoom,bearing:f.bearing,pitch:f.pitch,roll:f.roll}),f.bounds&&(this.resize(),this.fitBounds(f.bounds,o.e({},f.fitBoundsOptions,{duration:0}))));const S=typeof f.style=="string"||((c=(n=f.style)===null||n===void 0?void 0:n.projection)===null||c===void 0?void 0:c.type)!=="globe";this.resize(null,S),this._localIdeographFontFamily=f.localIdeographFontFamily,this._validateStyle=f.validateStyle,f.style&&this.setStyle(f.style,{localIdeographFontFamily:f.localIdeographFontFamily}),f.attributionControl&&this.addControl(new Fo(typeof f.attributionControl=="boolean"?void 0:f.attributionControl)),f.maplibreLogo&&this.addControl(new Mi,f.logoPosition),this.on("style.load",(()=>{if(S||this._resizeTransform(),this.transform.unmodified){const M=o.U(this.style.stylesheet,["center","zoom","bearing","pitch","roll"]);this.jumpTo(M)}})),this.on("data",(M=>{this._update(M.dataType==="style"),this.fire(new o.l(`${M.dataType}data`,M))})),this.on("dataloading",(M=>{this.fire(new o.l(`${M.dataType}dataloading`,M))})),this.on("dataabort",(M=>{this.fire(new o.l("sourcedataabort",M))}))}_getMapId(){return this._mapId}setGlobalStateProperty(x,n){return this.style.setGlobalStateProperty(x,n),this._update(!0)}getGlobalState(){return this.style.getGlobalState()}addControl(x,n){if(n===void 0&&(n=x.getDefaultPosition?x.getDefaultPosition():"top-right"),!x||!x.onAdd)return this.fire(new o.k(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const c=x.onAdd(this);this._controls.push(x);const f=this._controlPositions[n];return n.indexOf("bottom")!==-1?f.insertBefore(c,f.firstChild):f.appendChild(c),this}removeControl(x){if(!x||!x.onRemove)return this.fire(new o.k(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const n=this._controls.indexOf(x);return n>-1&&this._controls.splice(n,1),x.onRemove(this),this}hasControl(x){return this._controls.indexOf(x)>-1}coveringTiles(x){return Tn(this.transform,x)}calculateCameraOptionsFromTo(x,n,c,f){return f==null&&this.terrain&&(f=this.terrain.getElevationForLngLat(c)),super.calculateCameraOptionsFromTo(x,n,c,f)}resize(x,n=!0){const[c,f]=this._containerDimensions(),y=this._getClampedPixelRatio(c,f);if(this._resizeCanvas(c,f,y),this.painter.resize(c,f,y),this.painter.overLimit()){const S=this.painter.context.gl;this._maxCanvasSize=[S.drawingBufferWidth,S.drawingBufferHeight];const M=this._getClampedPixelRatio(c,f);this._resizeCanvas(c,f,M),this.painter.resize(c,f,M)}this._resizeTransform(n);const b=!this._moving;return b&&(this.stop(),this.fire(new o.l("movestart",x)).fire(new o.l("move",x))),this.fire(new o.l("resize",x)),b&&this.fire(new o.l("moveend",x)),this}_resizeTransform(x=!0){var n;const[c,f]=this._containerDimensions();this.transform.resize(c,f,x),(n=this._requestedCameraState)===null||n===void 0||n.resize(c,f,x)}_getClampedPixelRatio(x,n){const{0:c,1:f}=this._maxCanvasSize,y=this.getPixelRatio(),b=x*y,S=n*y;return Math.min(b>c?c/b:1,S>f?f/S:1)*y}getPixelRatio(){var x;return(x=this._overridePixelRatio)!==null&&x!==void 0?x:devicePixelRatio}setPixelRatio(x){this._overridePixelRatio=x,this.resize()}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()}setMaxBounds(x){return this.transform.setMaxBounds(kr.convert(x)),this._update()}setMinZoom(x){if((x=x??-2)>=-2&&x<=this.transform.maxZoom)return this.transform.setMinZoom(x),this._update(),this.getZoom()<x&&this.setZoom(x),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(x){if((x=x??22)>=this.transform.minZoom)return this.transform.setMaxZoom(x),this._update(),this.getZoom()>x&&this.setZoom(x),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(x){if((x=x??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(x>=0&&x<=this.transform.maxPitch)return this.transform.setMinPitch(x),this._update(),this.getPitch()<x&&this.setPitch(x),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(x){if((x=x??60)>180)throw new Error("maxPitch must be less than or equal to 180");if(x>=this.transform.minPitch)return this.transform.setMaxPitch(x),this._update(),this.getPitch()>x&&this.setPitch(x),this;throw new Error("maxPitch must be greater than the current minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(x){return this.transform.setRenderWorldCopies(x),this._update()}setTransformConstrain(x){return this.transform.setConstrainOverride(x),this._update()}project(x){return this.transform.locationToScreenPoint(o.V.convert(x),this.style&&this.terrain)}unproject(x){return this.transform.screenPointToLocation(o.P.convert(x),this.terrain)}isMoving(){var x;return this._moving||((x=this.handlers)===null||x===void 0?void 0:x.isMoving())}isZooming(){var x;return this._zooming||((x=this.handlers)===null||x===void 0?void 0:x.isZooming())}isRotating(){var x;return this._rotating||((x=this.handlers)===null||x===void 0?void 0:x.isRotating())}_createDelegatedListener(x,n,c){if(x==="mouseenter"||x==="mouseover"){let f=!1;return{layers:n,listener:c,delegates:{mousemove:b=>{const S=n.filter((N=>this.getLayer(N))),M=S.length!==0?this.queryRenderedFeatures(b.point,{layers:S}):[];M.length?f||(f=!0,c.call(this,new we(x,this,b.originalEvent,{features:M}))):f=!1},mouseout:()=>{f=!1}}}}if(x==="mouseleave"||x==="mouseout"){let f=!1;return{layers:n,listener:c,delegates:{mousemove:S=>{const M=n.filter((N=>this.getLayer(N)));(M.length!==0?this.queryRenderedFeatures(S.point,{layers:M}):[]).length?f=!0:f&&(f=!1,c.call(this,new we(x,this,S.originalEvent)))},mouseout:S=>{f&&(f=!1,c.call(this,new we(x,this,S.originalEvent)))}}}}{const f=y=>{const b=n.filter((M=>this.getLayer(M))),S=b.length!==0?this.queryRenderedFeatures(y.point,{layers:b}):[];S.length&&(y.features=S,c.call(this,y),delete y.features)};return{layers:n,listener:c,delegates:{[x]:f}}}}_saveDelegatedListener(x,n){this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[x]=this._delegatedListeners[x]||[],this._delegatedListeners[x].push(n)}_removeDelegatedListener(x,n,c){if(!this._delegatedListeners||!this._delegatedListeners[x])return;const f=this._delegatedListeners[x];for(let y=0;y<f.length;y++){const b=f[y];if(b.listener===c&&b.layers.length===n.length&&b.layers.every((S=>n.includes(S)))){for(const S in b.delegates)this.off(S,b.delegates[S]);return void f.splice(y,1)}}}on(x,n,c){if(c===void 0)return super.on(x,n);const f=typeof n=="string"?[n]:n,y=this._createDelegatedListener(x,f,c);this._saveDelegatedListener(x,y);for(const b in y.delegates)this.on(b,y.delegates[b]);return{unsubscribe:()=>{this._removeDelegatedListener(x,f,c)}}}once(x,n,c){if(c===void 0)return super.once(x,n);const f=typeof n=="string"?[n]:n,y=this._createDelegatedListener(x,f,c);for(const b in y.delegates){const S=y.delegates[b];y.delegates[b]=(...M)=>{this._removeDelegatedListener(x,f,c),S(...M)}}this._saveDelegatedListener(x,y);for(const b in y.delegates)this.once(b,y.delegates[b]);return this}off(x,n,c){return c===void 0?super.off(x,n):(this._removeDelegatedListener(x,typeof n=="string"?[n]:n,c),this)}queryRenderedFeatures(x,n){if(!this.style)return[];let c;const f=x instanceof o.P||Array.isArray(x),y=f?x:[[0,0],[this.transform.width,this.transform.height]];if(n=n||(f?{}:x)||{},y instanceof o.P||typeof y[0]=="number")c=[o.P.convert(y)];else{const b=o.P.convert(y[0]),S=o.P.convert(y[1]);c=[b,new o.P(S.x,b.y),S,new o.P(b.x,S.y),b]}return this.style.queryRenderedFeatures(c,n,this.transform)}querySourceFeatures(x,n){return this.style.querySourceFeatures(x,n)}setStyle(x,n){return(n=o.e({},{localIdeographFontFamily:this._localIdeographFontFamily,validate:this._validateStyle},n)).diff!==!1&&n.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&x?(this._diffStyle(x,n),this):(this._localIdeographFontFamily=n.localIdeographFontFamily,this._updateStyle(x,n))}setTransformRequest(x){return this._requestManager.setTransformRequest(x),this}_getUIString(x){const n=this._locale[x];if(n==null)throw new Error(`Missing UI string '${x}'`);return n}_updateStyle(x,n){var c,f;if(n.transformStyle&&this.style&&!this.style._loaded)return void this.style.once("style.load",(()=>this._updateStyle(x,n)));const y=this.style&&n.transformStyle?this.style.serialize():void 0;return this.style&&(this.style.setEventedParent(null),this.style._remove(!x)),x?(this.style=new Xi(this,n||{}),this.style.setEventedParent(this,{style:this.style}),typeof x=="string"?this.style.loadURL(x,n,y):this.style.loadJSON(x,n,y),this):((f=(c=this.style)===null||c===void 0?void 0:c.projection)===null||f===void 0||f.destroy(),delete this.style,this)}_lazyInitEmptyStyle(){this.style||(this.style=new Xi(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(x,n){if(typeof x=="string"){const c=this._requestManager.transformRequest(x,"Style");o.j(c,new AbortController).then((f=>{this._updateDiff(f.data,n)})).catch((f=>{f&&this.fire(new o.k(f))}))}else typeof x=="object"&&this._updateDiff(x,n)}_updateDiff(x,n){try{this.style.setState(x,n)&&this._update(!0)}catch(c){o.w(`Unable to perform style diff: ${c.message||c.error||c}.  Rebuilding the style from scratch.`),this._updateStyle(x,n)}}getStyle(){if(this.style)return this.style.serialize()}_getStyleAndImages(){return this.style?{style:this.style.serialize(),images:this.style.imageManager.cloneImages()}:{style:null,images:{}}}isStyleLoaded(){return this.style?this.style.loaded():o.w("There is no style added to the map.")}addSource(x,n){return this._lazyInitEmptyStyle(),this.style.addSource(x,n),this._update(!0)}isSourceLoaded(x){const n=this.style&&this.style.tileManagers[x];if(n!==void 0)return n.loaded();this.fire(new o.k(new Error(`There is no tile manager with ID '${x}'`)))}setTerrain(x){if(this.style._checkLoaded(),this._terrainDataCallback&&this.style.off("data",this._terrainDataCallback),x){const n=this.style.tileManagers[x.source];if(!n)throw new Error(`cannot load terrain, because there exists no source with ID: ${x.source}`);this.terrain===null&&n.reload();for(const c in this.style._layers){const f=this.style._layers[c];f.type==="hillshade"&&f.source===x.source&&o.w("You are using the same source for a hillshade layer and for 3D terrain. Please consider using two separate sources to improve rendering quality."),f.type==="color-relief"&&f.source===x.source&&o.w("You are using the same source for a color-relief layer and for 3D terrain. Please consider using two separate sources to improve rendering quality.")}this.terrain=new Ss(this.painter,n,x),this.painter.renderToTexture=new Fs(this.painter,this.terrain),this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this.transform.setElevation(this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this._terrainDataCallback=c=>{var f;c.dataType==="style"?this.terrain.tileManager.freeRtt():c.dataType==="source"&&c.tile&&(c.sourceId!==x.source||this._elevationFreeze||(this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this._centerClampedToGround&&this.transform.setElevation(this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))),((f=c.source)===null||f===void 0?void 0:f.type)==="image"?this.terrain.tileManager.freeRtt():this.terrain.tileManager.freeRtt(c.tile.tileID))},this.style.on("data",this._terrainDataCallback)}else this.terrain&&this.terrain.tileManager.destruct(),this.terrain=null,this.painter.renderToTexture&&this.painter.renderToTexture.destruct(),this.painter.renderToTexture=null,this.transform.setMinElevationForCurrentTile(0),this._centerClampedToGround&&this.transform.setElevation(0);return this.fire(new o.l("terrain",{terrain:x})),this}getTerrain(){var x,n;return(n=(x=this.terrain)===null||x===void 0?void 0:x.options)!==null&&n!==void 0?n:null}areTilesLoaded(){const x=this.style&&this.style.tileManagers;for(const n of Object.values(x))if(!n.areTilesLoaded())return!1;return!0}removeSource(x){return this.style.removeSource(x),this._update(!0)}getSource(x){return this.style.getSource(x)}setSourceTileLodParams(x,n,c){if(c){const f=this.getSource(c);if(!f)throw new Error(`There is no source with ID "${c}", cannot set LOD parameters`);f.calculateTileZoom=$r(Math.max(1,x),Math.max(1,n))}else for(const f in this.style.tileManagers)this.style.tileManagers[f].getSource().calculateTileZoom=$r(Math.max(1,x),Math.max(1,n));return this._update(!0),this}refreshTiles(x,n){const c=this.style.tileManagers[x];if(!c)throw new Error(`There is no tile manager with ID "${x}", cannot refresh tile`);n===void 0?c.reload(!0):c.refreshTiles(n.map((f=>new o.ae(f.z,f.x,f.y))))}addImage(x,n,c={}){const{pixelRatio:f=1,sdf:y=!1,stretchX:b,stretchY:S,content:M,textFitWidth:N,textFitHeight:j}=c;if(this._lazyInitEmptyStyle(),!(n instanceof HTMLImageElement||o.b(n))){if(n.width===void 0||n.height===void 0)return this.fire(new o.k(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));{const{width:q,height:ne,data:te}=n,ue=n;return this.style.addImage(x,{data:new o.R({width:q,height:ne},new Uint8Array(te)),pixelRatio:f,stretchX:b,stretchY:S,content:M,textFitWidth:N,textFitHeight:j,sdf:y,version:0,userImage:ue}),ue.onAdd&&ue.onAdd(this,x),this}}{const{width:q,height:ne,data:te}=P.getImageData(n);this.style.addImage(x,{data:new o.R({width:q,height:ne},te),pixelRatio:f,stretchX:b,stretchY:S,content:M,textFitWidth:N,textFitHeight:j,sdf:y,version:0})}}updateImage(x,n){const c=this.style.getImage(x);if(!c)return this.fire(new o.k(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const f=n instanceof HTMLImageElement||o.b(n)?P.getImageData(n):n,{width:y,height:b,data:S}=f;if(y===void 0||b===void 0)return this.fire(new o.k(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(y!==c.data.width||b!==c.data.height)return this.fire(new o.k(new Error("The width and height of the updated image must be that same as the previous version of the image")));const M=!(n instanceof HTMLImageElement||o.b(n));return c.data.replace(S,M),this.style.updateImage(x,c),this}getImage(x){return this.style.getImage(x)}hasImage(x){return x?!!this.style.getImage(x):(this.fire(new o.k(new Error("Missing required image id"))),!1)}removeImage(x){this.style.removeImage(x)}loadImage(x){return Xe.getImage(this._requestManager.transformRequest(x,"Image"),new AbortController)}listImages(){return this.style.listImages()}addLayer(x,n){return this._lazyInitEmptyStyle(),this.style.addLayer(x,n),this._update(!0)}moveLayer(x,n){return this.style.moveLayer(x,n),this._update(!0)}removeLayer(x){return this.style.removeLayer(x),this._update(!0)}getLayer(x){return this.style.getLayer(x)}getLayersOrder(){return this.style.getLayersOrder()}setLayerZoomRange(x,n,c){return this.style.setLayerZoomRange(x,n,c),this._update(!0)}setFilter(x,n,c={}){return this.style.setFilter(x,n,c),this._update(!0)}getFilter(x){return this.style.getFilter(x)}setPaintProperty(x,n,c,f={}){return this.style.setPaintProperty(x,n,c,f),this._update(!0)}getPaintProperty(x,n){return this.style.getPaintProperty(x,n)}setLayoutProperty(x,n,c,f={}){return this.style.setLayoutProperty(x,n,c,f),this._update(!0)}getLayoutProperty(x,n){return this.style.getLayoutProperty(x,n)}setGlyphs(x,n={}){return this._lazyInitEmptyStyle(),this.style.setGlyphs(x,n),this._update(!0)}getGlyphs(){return this.style.getGlyphsUrl()}addSprite(x,n,c={}){return this._lazyInitEmptyStyle(),this.style.addSprite(x,n,c,(f=>{f||this._update(!0)})),this}removeSprite(x){return this._lazyInitEmptyStyle(),this.style.removeSprite(x),this._update(!0)}getSprite(){return this.style.getSprite()}setSprite(x,n={}){return this._lazyInitEmptyStyle(),this.style.setSprite(x,n,(c=>{c||this._update(!0)})),this}setLight(x,n={}){return this._lazyInitEmptyStyle(),this.style.setLight(x,n),this._update(!0)}getLight(){return this.style.getLight()}setSky(x,n={}){return this._lazyInitEmptyStyle(),this.style.setSky(x,n),this._update(!0)}getSky(){return this.style.getSky()}setFeatureState(x,n){return this.style.setFeatureState(x,n),this._update()}removeFeatureState(x,n){return this.style.removeFeatureState(x,n),this._update()}getFeatureState(x){return this.style.getFeatureState(x)}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}_containerDimensions(){let x=0,n=0;return this._container&&(x=this._container.clientWidth||400,n=this._container.clientHeight||300),[x,n]}_setupContainer(){const x=this._container;x.classList.add("maplibregl-map");const n=this._canvasContainer=H.create("div","maplibregl-canvas-container",x);this._interactive&&n.classList.add("maplibregl-interactive"),this._canvas=H.create("canvas","maplibregl-canvas",n),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex",this._interactive?"0":"-1"),this._canvas.setAttribute("aria-label",this._getUIString("Map.Title")),this._canvas.setAttribute("role","region");const c=this._containerDimensions(),f=this._getClampedPixelRatio(c[0],c[1]);this._resizeCanvas(c[0],c[1],f);const y=this._controlContainer=H.create("div","maplibregl-control-container",x),b=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach((S=>{b[S]=H.create("div",`maplibregl-ctrl-${S} `,y)})),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas(x,n,c){this._canvas.width=Math.floor(c*x),this._canvas.height=Math.floor(c*n),this._canvas.style.width=`${x}px`,this._canvas.style.height=`${n}px`}_setupPainter(){const x=Object.assign(Object.assign({},this._canvasContextAttributes),{alpha:!0,depth:!0,stencil:!0,premultipliedAlpha:!0});let n=null;this._canvas.addEventListener("webglcontextcreationerror",(f=>{n={requestedAttributes:x},f&&(n.statusMessage=f.statusMessage,n.type=f.type)}),{once:!0});let c=null;if(c=this._canvasContextAttributes.contextType?this._canvas.getContext(this._canvasContextAttributes.contextType,x):this._canvas.getContext("webgl2",x)||this._canvas.getContext("webgl",x),!c){const f="Failed to initialize WebGL";throw n?(n.message=f,new Error(JSON.stringify(n))):new Error(f)}this.painter=new du(c,this.transform),Z.testSupport(c)}migrateProjection(x,n){super.migrateProjection(x,n),this.painter.transform=x,this.fire(new o.l("projectiontransition",{newProjection:this.style.projection.name}))}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(x){return this.style&&this.style._loaded?(this._styleDirty=this._styleDirty||x,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(x){return this._update(),this._renderTaskQueue.add(x)}_cancelRenderFrame(x){this._renderTaskQueue.remove(x)}_render(x){var n,c,f,y,b;const S=this._idleTriggered?this._fadeDuration:0,M=((n=this.style.projection)===null||n===void 0?void 0:n.transitionState)>0;if(this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(x),this._removed)return;let N=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;const ne=this.transform.zoom,te=z();this.style.zoomHistory.update(ne,te);const ue=new o.H(ne,{now:te,fadeDuration:S,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),_e=ue.crossFadingFactor();_e===1&&_e===this._crossFadingFactor||(N=!0,this._crossFadingFactor=_e),this.style.update(ue)}const j=((c=this.style.projection)===null||c===void 0?void 0:c.transitionState)>0!==M;(f=this.style.projection)===null||f===void 0||f.setErrorQueryLatitudeDegrees(this.transform.center.lat),this.transform.setTransitionState((y=this.style.projection)===null||y===void 0?void 0:y.transitionState,(b=this.style.projection)===null||b===void 0?void 0:b.latitudeErrorCorrectionRadians),this.style&&(this._sourcesDirty||j)&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this.terrain?(this.terrain.tileManager.update(this.transform,this.terrain),this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),!this._elevationFreeze&&this._centerClampedToGround&&this.transform.setElevation(this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))):(this.transform.setMinElevationForCurrentTile(0),this._centerClampedToGround&&this.transform.setElevation(0)),this._placementDirty=this.style&&this.style._updatePlacement(this.transform,this.showCollisionBoxes,S,this._crossSourceCollisions,j),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:S,showPadding:this.showPadding}),this.fire(new o.l("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,o.cH.mark(o.cI.load),this.fire(new o.l("load"))),this.style&&(this.style.hasTransitions()||N)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles();const q=this._sourcesDirty||this._styleDirty||this._placementDirty;return q||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new o.l("idle")),!this._loaded||this._fullyLoaded||q||(this._fullyLoaded=!0,o.cH.mark(o.cI.fullLoad)),this}redraw(){return this.style&&(this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._render(0)),this}remove(){var x;this._hash&&this._hash.remove();for(const c of this._controls)c.onRemove(this);this._controls=[],this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),typeof window<"u"&&removeEventListener("online",this._onWindowOnline,!1),Xe.removeThrottleControl(this._imageQueueHandle),(x=this._resizeObserver)===null||x===void 0||x.disconnect();const n=this.painter.context.gl.getExtension("WEBGL_lose_context");n?.loseContext&&n.loseContext(),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),H.remove(this._canvasContainer),H.remove(this._controlContainer),this._container.removeEventListener("scroll",this._onMapScroll,!1),this._container.classList.remove("maplibregl-map"),o.cH.clearMetrics(),this._removed=!0,this.fire(new o.l("remove"))}triggerRepaint(){this.style&&!this._frameRequest&&(this._frameRequest=new AbortController,P.frame(this._frameRequest,(x=>{o.cH.frame(x),this._frameRequest=null;try{this._render(x)}catch(n){if(!o.Z(n)&&!(function(c){return c.message===hc})(n))throw n}}),(()=>{})))}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(x){this._showTileBoundaries!==x&&(this._showTileBoundaries=x,this._update())}get showPadding(){return!!this._showPadding}set showPadding(x){this._showPadding!==x&&(this._showPadding=x,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(x){this._showCollisionBoxes!==x&&(this._showCollisionBoxes=x,x?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(x){this._showOverdrawInspector!==x&&(this._showOverdrawInspector=x,this._update())}get repaint(){return!!this._repaint}set repaint(x){this._repaint!==x&&(this._repaint=x,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(x){this._vertices=x,this._update()}get version(){return za}getCameraTargetElevation(){return this.transform.elevation}getProjection(){return this.style.getProjection()}setProjection(x){return this._lazyInitEmptyStyle(),this.style.setProjection(x),this._update(!0)}},m.MapMouseEvent=we,m.MapTouchEvent=Se,m.MapWheelEvent=Me,m.Marker=pA,m.NavigationControl=class{constructor(x){this._updateZoomButtons=()=>{const n=this._map.getZoom(),c=n===this._map.getMaxZoom(),f=n===this._map.getMinZoom();this._zoomInButton.disabled=c,this._zoomOutButton.disabled=f,this._zoomInButton.setAttribute("aria-disabled",c.toString()),this._zoomOutButton.setAttribute("aria-disabled",f.toString())},this._rotateCompassArrow=()=>{this._compassIcon.style.transform=this.options.visualizePitch&&this.options.visualizeRoll?`scale(${1/Math.pow(Math.cos(this._map.transform.pitchInRadians),.5)}) rotateZ(${-this._map.transform.roll}deg) rotateX(${this._map.transform.pitch}deg) rotateZ(${-this._map.transform.bearing}deg)`:this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(this._map.transform.pitchInRadians),.5)}) rotateX(${this._map.transform.pitch}deg) rotateZ(${-this._map.transform.bearing}deg)`:this.options.visualizeRoll?`rotate(${-this._map.transform.bearing-this._map.transform.roll}deg)`:`rotate(${-this._map.transform.bearing}deg)`},this._setButtonTitle=(n,c)=>{const f=this._map._getUIString(`NavigationControl.${c}`);n.title=f,n.setAttribute("aria-label",f)},this.options=o.e({},Gc,x),this._container=H.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._container.addEventListener("contextmenu",(n=>n.preventDefault())),this.options.showZoom&&(this._zoomInButton=this._createButton("maplibregl-ctrl-zoom-in",(n=>this._map.zoomIn({},{originalEvent:n}))),H.create("span","maplibregl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("maplibregl-ctrl-zoom-out",(n=>this._map.zoomOut({},{originalEvent:n}))),H.create("span","maplibregl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(this._compass=this._createButton("maplibregl-ctrl-compass",(n=>{this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:n}):this._map.resetNorth({},{originalEvent:n})})),this._compassIcon=H.create("span","maplibregl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}onAdd(x){return this._map=x,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this.options.visualizeRoll&&this._map.on("roll",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new ja(this._map,this._compass,this.options.visualizePitch)),this._container}onRemove(){H.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this.options.visualizeRoll&&this._map.off("roll",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map}_createButton(x,n){const c=H.create("button",x,this._container);return c.type="button",c.addEventListener("click",n),c}},m.Popup=class extends o.E{constructor(x){super(),this._updateOpacity=()=>{this.options.locationOccludedOpacity!==void 0&&(this._container.style.opacity=this._map.transform.isLocationOccluded(this.getLngLat())?`${this.options.locationOccludedOpacity}`:"")},this.remove=()=>(this._content&&H.remove(this._content),this._container&&(H.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),this._map._canvasContainer.classList.remove("maplibregl-track-pointer"),delete this._map,this.fire(new o.l("close"))),this),this._onMouseUp=n=>{this._update(n.point)},this._onMouseMove=n=>{this._update(n.point)},this._onDrag=n=>{this._update(n.point)},this._update=n=>{if(!this._map||!this._lngLat&&!this._trackPointer||!this._content)return;if(!this._container){if(this._container=H.create("div","maplibregl-popup",this._map.getContainer()),this._tip=H.create("div","maplibregl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className)for(const S of this.options.className.split(" "))this._container.classList.add(S);this._closeButton&&this._closeButton.setAttribute("aria-label",this._map._getUIString("Popup.Close")),this._trackPointer&&this._container.classList.add("maplibregl-popup-track-pointer")}if(this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._lngLat=VA(this._lngLat,this._flatPos,this._map.transform,this._trackPointer),this._trackPointer&&!n)return;const c=this._flatPos=this._pos=this._trackPointer&&n?n:this._map.project(this._lngLat);this._map.terrain&&(this._flatPos=this._trackPointer&&n?n:this._map.transform.locationToScreenPoint(this._lngLat));let f=this.options.anchor;const y=Ga(this.options.offset);if(!f){const S=this._container.offsetWidth,M=this._container.offsetHeight;let N;N=c.y+y.bottom.y<M?["top"]:c.y>this._map.transform.height-M?["bottom"]:[],c.x<S/2?N.push("left"):c.x>this._map.transform.width-S/2&&N.push("right"),f=N.length===0?"bottom":N.join("-")}let b=c.add(y[f]);this.options.subpixelPositioning||(b=b.round()),H.setTransform(this._container,`${gi[f]} translate(${b.x}px,${b.y}px)`),Wo(this._container,f,"popup"),this._updateOpacity()},this._onClose=()=>{this.remove()},this.options=o.e(Object.create(es),x)}addTo(x){return this._map&&this.remove(),this._map=x,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")):this._map.on("move",this._update),this.fire(new o.l("open")),this}isOpen(){return!!this._map}getLngLat(){return this._lngLat}setLngLat(x){return this._lngLat=o.V.convert(x),this._pos=null,this._flatPos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.remove("maplibregl-track-pointer")),this}trackPointer(){return this._trackPointer=!0,this._pos=null,this._flatPos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")),this}getElement(){return this._container}setText(x){return this.setDOMContent(document.createTextNode(x))}setHTML(x){const n=document.createDocumentFragment(),c=document.createElement("body");let f;for(c.innerHTML=x;f=c.firstChild,f;)n.appendChild(f);return this.setDOMContent(n)}getMaxWidth(){var x;return(x=this._container)===null||x===void 0?void 0:x.style.maxWidth}setMaxWidth(x){return this.options.maxWidth=x,this._update(),this}setDOMContent(x){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=H.create("div","maplibregl-popup-content",this._container);return this._content.appendChild(x),this._createCloseButton(),this._update(),this._focusFirstElement(),this}addClassName(x){return this._container&&this._container.classList.add(x),this}removeClassName(x){return this._container&&this._container.classList.remove(x),this}setOffset(x){return this.options.offset=x,this._update(),this}toggleClassName(x){if(this._container)return this._container.classList.toggle(x)}setSubpixelPositioning(x){this.options.subpixelPositioning=x}_createCloseButton(){this.options.closeButton&&(this._closeButton=H.create("button","maplibregl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const x=this._container.querySelector(Kc);x&&x.focus()}},m.RasterDEMTileSource=Er,m.RasterTileSource=Gr,m.ScaleControl=class{constructor(x){this._onMove=()=>{bi(this._map,this._container,this.options)},this.setUnit=n=>{this.options.unit=n,bi(this._map,this._container,this.options)},this.options=Object.assign(Object.assign({},Va),x)}getDefaultPosition(){return"bottom-left"}onAdd(x){return this._map=x,this._container=H.create("div","maplibregl-ctrl maplibregl-ctrl-scale",x.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}onRemove(){H.remove(this._container),this._map.off("move",this._onMove),this._map=void 0}},m.ScrollZoomHandler=Cs,m.Style=Xi,m.TerrainControl=class{constructor(x){this._toggleTerrain=()=>{this._map.getTerrain()?this._map.setTerrain(null):this._map.setTerrain(this.options),this._updateTerrainIcon()},this._updateTerrainIcon=()=>{this._terrainButton.classList.remove("maplibregl-ctrl-terrain"),this._terrainButton.classList.remove("maplibregl-ctrl-terrain-enabled"),this._map.terrain?(this._terrainButton.classList.add("maplibregl-ctrl-terrain-enabled"),this._terrainButton.title=this._map._getUIString("TerrainControl.Disable")):(this._terrainButton.classList.add("maplibregl-ctrl-terrain"),this._terrainButton.title=this._map._getUIString("TerrainControl.Enable"))},this.options=x}onAdd(x){return this._map=x,this._container=H.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._terrainButton=H.create("button","maplibregl-ctrl-terrain",this._container),H.create("span","maplibregl-ctrl-icon",this._terrainButton).setAttribute("aria-hidden","true"),this._terrainButton.type="button",this._terrainButton.addEventListener("click",this._toggleTerrain),this._updateTerrainIcon(),this._map.on("terrain",this._updateTerrainIcon),this._container}onRemove(){H.remove(this._container),this._map.off("terrain",this._updateTerrainIcon),this._map=void 0}},m.TwoFingersTouchPitchHandler=zn,m.TwoFingersTouchRotateHandler=pi,m.TwoFingersTouchZoomHandler=Hr,m.TwoFingersTouchZoomRotateHandler=Ti,m.VectorTileSource=lr,m.VideoSource=pt,m.addSourceType=(x,n)=>o._(void 0,void 0,void 0,(function*(){if(ve(x))throw new Error(`A source type called "${x}" already exists.`);((c,f)=>{pe[c]=f})(x,n)})),m.clearPrewarmedResources=function(){const x=et;x&&(x.isPreloaded()&&x.numActive()===1?(x.release(Le),et=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},m.createTileMesh=V,m.getMaxParallelImageRequests=function(){return o.c.MAX_PARALLEL_IMAGE_REQUESTS},m.getRTLTextPluginStatus=function(){return vt().getRTLTextPluginStatus()},m.getVersion=function(){return qc},m.getWorkerCount=function(){return Ve.workerCount},m.getWorkerUrl=function(){return o.c.WORKER_URL},m.importScriptInWorkers=function(x){return Gt().broadcast("IS",x)},m.isTimeFrozen=function(){return W.isFrozen()},m.now=z,m.prewarm=function(){St().acquire(Le)},m.restoreNow=function(){W.restoreNow()},m.setMaxParallelImageRequests=function(x){o.c.MAX_PARALLEL_IMAGE_REQUESTS=x},m.setNow=function(x){W.setNow(x)},m.setRTLTextPlugin=function(x,n){return vt().setRTLTextPlugin(x,n)},m.setWorkerCount=function(x){Ve.workerCount=x},m.setWorkerUrl=function(x){o.c.WORKER_URL=x}}));var d=i;return d}))})(U0)),U0.exports}var uN=AN();const sp=vw(uN);var bl=Uint8Array,SA=Uint16Array,Yw=Int32Array,Ny=new bl([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),Qy=new bl([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),R_=new bl([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),EF=function(e,r){for(var i=new SA(31),a=0;a<31;++a)i[a]=r+=1<<e[a-1];for(var u=new Yw(i[30]),a=1;a<30;++a)for(var d=i[a];d<i[a+1];++d)u[d]=d-i[a]<<5|a;return{b:i,r:u}},SF=EF(Ny,2),FF=SF.b,N_=SF.r;FF[28]=258,N_[258]=28;var IF=EF(Qy,0),hN=IF.b,V2=IF.r,Q_=new SA(32768);for(var Ks=0;Ks<32768;++Ks){var id=(Ks&43690)>>1|(Ks&21845)<<1;id=(id&52428)>>2|(id&13107)<<2,id=(id&61680)>>4|(id&3855)<<4,Q_[Ks]=((id&65280)>>8|(id&255)<<8)>>1}var nh=(function(e,r,i){for(var a=e.length,u=0,d=new SA(r);u<a;++u)e[u]&&++d[e[u]-1];var m=new SA(r);for(u=1;u<r;++u)m[u]=m[u-1]+d[u-1]<<1;var o;if(i){o=new SA(1<<r);var w=15-r;for(u=0;u<a;++u)if(e[u])for(var E=u<<4|e[u],I=r-e[u],D=m[e[u]-1]++<<I,O=D|(1<<I)-1;D<=O;++D)o[Q_[D]>>w]=E}else for(o=new SA(a),u=0;u<a;++u)e[u]&&(o[u]=Q_[m[e[u]-1]++]>>15-e[u]);return o}),xd=new bl(288);for(var Ks=0;Ks<144;++Ks)xd[Ks]=8;for(var Ks=144;Ks<256;++Ks)xd[Ks]=9;for(var Ks=256;Ks<280;++Ks)xd[Ks]=7;for(var Ks=280;Ks<288;++Ks)xd[Ks]=8;var Qm=new bl(32);for(var Ks=0;Ks<32;++Ks)Qm[Ks]=5;var dN=nh(xd,9,0),fN=nh(xd,9,1),pN=nh(Qm,5,0),mN=nh(Qm,5,1),c1=function(e){for(var r=e[0],i=1;i<e.length;++i)e[i]>r&&(r=e[i]);return r},Cu=function(e,r,i){var a=r/8|0;return(e[a]|e[a+1]<<8)>>(r&7)&i},A1=function(e,r){var i=r/8|0;return(e[i]|e[i+1]<<8|e[i+2]<<16)>>(r&7)},Jw=function(e){return(e+7)/8|0},TF=function(e,r,i){return(i==null||i>e.length)&&(i=e.length),new bl(e.subarray(r,i))},gN=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],CA=function(e,r,i){var a=new Error(r||gN[e]);if(a.code=e,Error.captureStackTrace&&Error.captureStackTrace(a,CA),!i)throw a;return a},ex=function(e,r,i,a){var u=e.length,d=0;if(!u||r.f&&!r.l)return i||new bl(0);var m=!i,o=m||r.i!=2,w=r.i;m&&(i=new bl(u*3));var E=function(Gt){var or=i.length;if(Gt>or){var Ar=new bl(Math.max(or*2,Gt));Ar.set(i),i=Ar}},I=r.f||0,D=r.p||0,O=r.b||0,P=r.l,W=r.d,z=r.m,H=r.n,Z=u*8;do{if(!P){I=Cu(e,D,1);var se=Cu(e,D+1,3);if(D+=3,se)if(se==1)P=fN,W=mN,z=9,H=5;else if(se==2){var He=Cu(e,D,31)+257,Xe=Cu(e,D+10,15)+4,Qe=He+Cu(e,D+5,31)+1;D+=14;for(var Be=new bl(Qe),Je=new bl(19),Ae=0;Ae<Xe;++Ae)Je[R_[Ae]]=Cu(e,D+Ae*3,7);D+=Xe*3;for(var me=c1(Je),Te=(1<<me)-1,Ie=nh(Je,me,1),Ae=0;Ae<Qe;){var ut=Ie[Cu(e,D,Te)];D+=ut&15;var ce=ut>>4;if(ce<16)Be[Ae++]=ce;else{var it=0,ot=0;for(ce==16?(ot=3+Cu(e,D,3),D+=2,it=Be[Ae-1]):ce==17?(ot=3+Cu(e,D,7),D+=3):ce==18&&(ot=11+Cu(e,D,127),D+=7);ot--;)Be[Ae++]=it}}var ke=Be.subarray(0,He),Ne=Be.subarray(He);z=c1(ke),H=c1(Ne),P=nh(ke,z,1),W=nh(Ne,H,1)}else CA(1);else{var ce=Jw(D)+4,de=e[ce-4]|e[ce-3]<<8,Pe=ce+de;if(Pe>u){w&&CA(0);break}o&&E(O+de),i.set(e.subarray(ce,Pe),O),r.b=O+=de,r.p=D=Pe*8,r.f=I;continue}if(D>Z){w&&CA(0);break}}o&&E(O+131072);for(var yt=(1<<z)-1,Ce=(1<<H)-1,ie=D;;ie=D){var it=P[A1(e,D)&yt],Ee=it>>4;if(D+=it&15,D>Z){w&&CA(0);break}if(it||CA(2),Ee<256)i[O++]=Ee;else if(Ee==256){ie=D,P=null;break}else{var Le=Ee-254;if(Ee>264){var Ae=Ee-257,Ve=Ny[Ae];Le=Cu(e,D,(1<<Ve)-1)+FF[Ae],D+=Ve}var nt=W[A1(e,D)&Ce],et=nt>>4;nt||CA(3),D+=nt&15;var Ne=hN[et];if(et>3){var Ve=Qy[et];Ne+=A1(e,D)&(1<<Ve)-1,D+=Ve}if(D>Z){w&&CA(0);break}o&&E(O+131072);var _t=O+Le;if(O<Ne){var St=d-Ne,Tt=Math.min(Ne,_t);for(St+O<0&&CA(3);O<Tt;++O)i[O]=a[St+O]}for(;O<_t;++O)i[O]=i[O-Ne]}}r.l=P,r.p=ie,r.b=O,r.f=I,P&&(I=1,r.m=z,r.d=W,r.n=H)}while(!I);return O!=i.length&&m?TF(i,0,O):i.subarray(0,O)},Mh=function(e,r,i){i<<=r&7;var a=r/8|0;e[a]|=i,e[a+1]|=i>>8},am=function(e,r,i){i<<=r&7;var a=r/8|0;e[a]|=i,e[a+1]|=i>>8,e[a+2]|=i>>16},u1=function(e,r){for(var i=[],a=0;a<e.length;++a)e[a]&&i.push({s:a,f:e[a]});var u=i.length,d=i.slice();if(!u)return{t:LF,l:0};if(u==1){var m=new bl(i[0].s+1);return m[i[0].s]=1,{t:m,l:1}}i.sort(function(Pe,He){return Pe.f-He.f}),i.push({s:-1,f:25001});var o=i[0],w=i[1],E=0,I=1,D=2;for(i[0]={s:-1,f:o.f+w.f,l:o,r:w};I!=u-1;)o=i[i[E].f<i[D].f?E++:D++],w=i[E!=I&&i[E].f<i[D].f?E++:D++],i[I++]={s:-1,f:o.f+w.f,l:o,r:w};for(var O=d[0].s,a=1;a<u;++a)d[a].s>O&&(O=d[a].s);var P=new SA(O+1),W=O_(i[I-1],P,0);if(W>r){var a=0,z=0,H=W-r,Z=1<<H;for(d.sort(function(He,Xe){return P[Xe.s]-P[He.s]||He.f-Xe.f});a<u;++a){var se=d[a].s;if(P[se]>r)z+=Z-(1<<W-P[se]),P[se]=r;else break}for(z>>=H;z>0;){var ce=d[a].s;P[ce]<r?z-=1<<r-P[ce]++-1:++a}for(;a>=0&&z;--a){var de=d[a].s;P[de]==r&&(--P[de],++z)}W=r}return{t:new bl(P),l:W}},O_=function(e,r,i){return e.s==-1?Math.max(O_(e.l,r,i+1),O_(e.r,r,i+1)):r[e.s]=i},G2=function(e){for(var r=e.length;r&&!e[--r];);for(var i=new SA(++r),a=0,u=e[0],d=1,m=function(w){i[a++]=w},o=1;o<=r;++o)if(e[o]==u&&o!=r)++d;else{if(!u&&d>2){for(;d>138;d-=138)m(32754);d>2&&(m(d>10?d-11<<5|28690:d-3<<5|12305),d=0)}else if(d>3){for(m(u),--d;d>6;d-=6)m(8304);d>2&&(m(d-3<<5|8208),d=0)}for(;d--;)m(u);d=1,u=e[o]}return{c:i.subarray(0,a),n:r}},lm=function(e,r){for(var i=0,a=0;a<r.length;++a)i+=e[a]*r[a];return i},PF=function(e,r,i){var a=i.length,u=Jw(r+2);e[u]=a&255,e[u+1]=a>>8,e[u+2]=e[u]^255,e[u+3]=e[u+1]^255;for(var d=0;d<a;++d)e[u+d+4]=i[d];return(u+4+a)*8},K2=function(e,r,i,a,u,d,m,o,w,E,I){Mh(r,I++,i),++u[256];for(var D=u1(u,15),O=D.t,P=D.l,W=u1(d,15),z=W.t,H=W.l,Z=G2(O),se=Z.c,ce=Z.n,de=G2(z),Pe=de.c,He=de.n,Xe=new SA(19),Qe=0;Qe<se.length;++Qe)++Xe[se[Qe]&31];for(var Qe=0;Qe<Pe.length;++Qe)++Xe[Pe[Qe]&31];for(var Be=u1(Xe,7),Je=Be.t,Ae=Be.l,me=19;me>4&&!Je[R_[me-1]];--me);var Te=E+5<<3,Ie=lm(u,xd)+lm(d,Qm)+m,ut=lm(u,O)+lm(d,z)+m+14+3*me+lm(Xe,Je)+2*Xe[16]+3*Xe[17]+7*Xe[18];if(w>=0&&Te<=Ie&&Te<=ut)return PF(r,I,e.subarray(w,w+E));var it,ot,ke,Ne;if(Mh(r,I,1+(ut<Ie)),I+=2,ut<Ie){it=nh(O,P,0),ot=O,ke=nh(z,H,0),Ne=z;var yt=nh(Je,Ae,0);Mh(r,I,ce-257),Mh(r,I+5,He-1),Mh(r,I+10,me-4),I+=14;for(var Qe=0;Qe<me;++Qe)Mh(r,I+3*Qe,Je[R_[Qe]]);I+=3*me;for(var Ce=[se,Pe],ie=0;ie<2;++ie)for(var Ee=Ce[ie],Qe=0;Qe<Ee.length;++Qe){var Le=Ee[Qe]&31;Mh(r,I,yt[Le]),I+=Je[Le],Le>15&&(Mh(r,I,Ee[Qe]>>5&127),I+=Ee[Qe]>>12)}}else it=dN,ot=xd,ke=pN,Ne=Qm;for(var Qe=0;Qe<o;++Qe){var Ve=a[Qe];if(Ve>255){var Le=Ve>>18&31;am(r,I,it[Le+257]),I+=ot[Le+257],Le>7&&(Mh(r,I,Ve>>23&31),I+=Ny[Le]);var nt=Ve&31;am(r,I,ke[nt]),I+=Ne[nt],nt>3&&(am(r,I,Ve>>5&8191),I+=Qy[nt])}else am(r,I,it[Ve]),I+=ot[Ve]}return am(r,I,it[256]),I+ot[256]},yN=new Yw([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),LF=new bl(0),vN=function(e,r,i,a,u,d){var m=d.z||e.length,o=new bl(a+m+5*(1+Math.ceil(m/7e3))+u),w=o.subarray(a,o.length-u),E=d.l,I=(d.r||0)&7;if(r){I&&(w[0]=d.r>>3);for(var D=yN[r-1],O=D>>13,P=D&8191,W=(1<<i)-1,z=d.p||new SA(32768),H=d.h||new SA(W+1),Z=Math.ceil(i/3),se=2*Z,ce=function(_r){return(e[_r]^e[_r+1]<<Z^e[_r+2]<<se)&W},de=new Yw(25e3),Pe=new SA(288),He=new SA(32),Xe=0,Qe=0,Be=d.i||0,Je=0,Ae=d.w||0,me=0;Be+2<m;++Be){var Te=ce(Be),Ie=Be&32767,ut=H[Te];if(z[Ie]=ut,H[Te]=Ie,Ae<=Be){var it=m-Be;if((Xe>7e3||Je>24576)&&(it>423||!E)){I=K2(e,w,0,de,Pe,He,Qe,Je,me,Be-me,I),Je=Xe=Qe=0,me=Be;for(var ot=0;ot<286;++ot)Pe[ot]=0;for(var ot=0;ot<30;++ot)He[ot]=0}var ke=2,Ne=0,yt=P,Ce=Ie-ut&32767;if(it>2&&Te==ce(Be-Ce))for(var ie=Math.min(O,it)-1,Ee=Math.min(32767,Be),Le=Math.min(258,it);Ce<=Ee&&--yt&&Ie!=ut;){if(e[Be+ke]==e[Be+ke-Ce]){for(var Ve=0;Ve<Le&&e[Be+Ve]==e[Be+Ve-Ce];++Ve);if(Ve>ke){if(ke=Ve,Ne=Ce,Ve>ie)break;for(var nt=Math.min(Ce,Ve-2),et=0,ot=0;ot<nt;++ot){var _t=Be-Ce+ot&32767,St=z[_t],Tt=_t-St&32767;Tt>et&&(et=Tt,ut=_t)}}}Ie=ut,ut=z[Ie],Ce+=Ie-ut&32767}if(Ne){de[Je++]=268435456|N_[ke]<<18|V2[Ne];var Gt=N_[ke]&31,or=V2[Ne]&31;Qe+=Ny[Gt]+Qy[or],++Pe[257+Gt],++He[or],Ae=Be+ke,++Xe}else de[Je++]=e[Be],++Pe[e[Be]]}}for(Be=Math.max(Be,Ae);Be<m;++Be)de[Je++]=e[Be],++Pe[e[Be]];I=K2(e,w,E,de,Pe,He,Qe,Je,me,Be-me,I),E||(d.r=I&7|w[I/8|0]<<3,I-=7,d.h=H,d.p=z,d.i=Be,d.w=Ae)}else{for(var Be=d.w||0;Be<m+E;Be+=65535){var Ar=Be+65535;Ar>=m&&(w[I/8|0]=E,Ar=m),I=PF(w,I+1,e.subarray(Be,Ar))}d.i=m}return TF(o,0,a+Jw(I)+u)},MF=function(){var e=1,r=0;return{p:function(i){for(var a=e,u=r,d=i.length|0,m=0;m!=d;){for(var o=Math.min(m+2655,d);m<o;++m)u+=a+=i[m];a=(a&65535)+15*(a>>16),u=(u&65535)+15*(u>>16)}e=a,r=u},d:function(){return e%=65521,r%=65521,(e&255)<<24|(e&65280)<<8|(r&255)<<8|r>>8}}},_N=function(e,r,i,a,u){if(!u&&(u={l:1},r.dictionary)){var d=r.dictionary.subarray(-32768),m=new bl(d.length+e.length);m.set(d),m.set(e,d.length),e=m,u.w=d.length}return vN(e,r.level==null?6:r.level,r.mem==null?u.l?Math.ceil(Math.max(8,Math.min(13,Math.log(e.length)))*1.5):20:12+r.mem,i,a,u)},kF=function(e,r,i){for(;i;++r)e[r]=i,i>>>=8},wN=function(e){(e[0]!=31||e[1]!=139||e[2]!=8)&&CA(6,"invalid gzip data");var r=e[3],i=10;r&4&&(i+=(e[10]|e[11]<<8)+2);for(var a=(r>>3&1)+(r>>4&1);a>0;a-=!e[i++]);return i+(r&2)},xN=function(e){var r=e.length;return(e[r-4]|e[r-3]<<8|e[r-2]<<16|e[r-1]<<24)>>>0},bN=function(e,r){var i=r.level,a=i==0?0:i<6?1:i==9?3:2;if(e[0]=120,e[1]=a<<6|(r.dictionary&&32),e[1]|=31-(e[0]<<8|e[1])%31,r.dictionary){var u=MF();u.p(r.dictionary),kF(e,2,u.d())}},BN=function(e,r){return((e[0]&15)!=8||e[0]>>4>7||(e[0]<<8|e[1])%31)&&CA(6,"invalid zlib data"),(e[1]>>5&1)==1&&CA(6,"invalid zlib data: "+(e[1]&32?"need":"unexpected")+" dictionary"),(e[1]>>3&4)+2};function CN(e,r){return ex(e,{i:2},r,r)}function EN(e,r){var i=wN(e);return i+8>e.length&&CA(6,"invalid gzip data"),ex(e.subarray(i,-8),{i:2},new bl(xN(e)),r)}function z_(e,r){r||(r={});var i=MF();i.p(e);var a=_N(e,r,r.dictionary?6:2,4);return bN(a,r),kF(a,a.length-4,i.d()),a}function SN(e,r){return ex(e.subarray(BN(e),-4),{i:2},r,r)}function FN(e,r){return e[0]==31&&e[1]==139&&e[2]==8?EN(e,r):(e[0]&15)!=8||e[0]>>4>7||(e[0]<<8|e[1])%31?CN(e,r):SN(e,r)}var IN=typeof TextDecoder<"u"&&new TextDecoder,TN=0;try{IN.decode(LF,{stream:!0}),TN=1}catch{}var PN=Object.defineProperty,Em=Math.pow,hs=(e,r)=>PN(e,"name",{value:r,configurable:!0}),nl=(e,r,i)=>new Promise((a,u)=>{var d=w=>{try{o(i.next(w))}catch(E){u(E)}},m=w=>{try{o(i.throw(w))}catch(E){u(E)}},o=w=>w.done?a(w.value):Promise.resolve(w.value).then(d,m);o((i=i.apply(e,r)).next())});hs((e,r)=>{let i=!1,a="",u=L.GridLayer.extend({createTile:hs((d,m)=>{let o=document.createElement("img"),w=new AbortController,E=w.signal;return o.cancel=()=>{w.abort()},i||(e.getHeader().then(I=>{I.tileType===1?console.error("Error: archive contains MVT vector tiles, but leafletRasterLayer is for displaying raster tiles. See https://github.com/protomaps/PMTiles/tree/main/js for details."):I.tileType===2?a="image/png":I.tileType===3?a="image/jpeg":I.tileType===4?a="image/webp":I.tileType===5&&(a="image/avif")}),i=!0),e.getZxy(d.z,d.x,d.y,E).then(I=>{if(I){let D=new Blob([I.data],{type:a}),O=window.URL.createObjectURL(D);o.src=O,o.cancel=void 0,m(void 0,o)}}).catch(I=>{if(I.name!=="AbortError")throw I}),o},"createTile"),_removeTile:hs(function(d){let m=this._tiles[d];m&&(m.el.cancel&&m.el.cancel(),m.el.width=0,m.el.height=0,m.el.deleted=!0,L.DomUtil.remove(m.el),delete this._tiles[d],this.fire("tileunload",{tile:m.el,coords:this._keyToTileCoords(d)}))},"_removeTile")});return new u(r)},"leafletRasterLayer");var LN=hs(e=>(r,i)=>{if(i instanceof AbortController)return e(r,i);let a=new AbortController;return e(r,a).then(u=>i(void 0,u.data,u.cacheControl||"",u.expires||""),u=>i(u)).catch(u=>i(u)),{cancel:hs(()=>a.abort(),"cancel")}},"v3compat"),UF=class{constructor(r){this.tilev4=hs((i,a)=>nl(this,null,function*(){if(i.type==="json"){let P=i.url.substr(10),W=this.tiles.get(P);if(W||(W=new q2(P),this.tiles.set(P,W)),this.metadata)return{data:yield W.getTileJson(i.url)};let z=yield W.getHeader();return(z.minLon>=z.maxLon||z.minLat>=z.maxLat)&&console.error(`Bounds of PMTiles archive ${z.minLon},${z.minLat},${z.maxLon},${z.maxLat} are not valid.`),{data:{tiles:[`${i.url}/{z}/{x}/{y}`],minzoom:z.minZoom,maxzoom:z.maxZoom,bounds:[z.minLon,z.minLat,z.maxLon,z.maxLat]}}}let u=new RegExp(/pmtiles:\/\/(.+)\/(\d+)\/(\d+)\/(\d+)/),d=i.url.match(u);if(!d)throw new Error("Invalid PMTiles protocol URL");let m=d[1],o=this.tiles.get(m);o||(o=new q2(m),this.tiles.set(m,o));let w=d[2],E=d[3],I=d[4],D=yield o.getHeader(),O=yield o?.getZxy(+w,+E,+I,a.signal);if(O)return{data:new Uint8Array(O.data),cacheControl:O.cacheControl,expires:O.expires};if(D.tileType===1){if(this.errorOnMissingTile)throw new Error("Tile not found.");return{data:new Uint8Array}}return{data:null}}),"tilev4"),this.tile=LN(this.tilev4),this.tiles=new Map,this.metadata=r?.metadata||!1,this.errorOnMissingTile=r?.errorOnMissingTile||!1}add(r){this.tiles.set(r.source.getKey(),r)}get(r){return this.tiles.get(r)}};hs(UF,"Protocol");var MN=UF;function DF(e,r){return(r>>>0)*4294967296+(e>>>0)}hs(DF,"toNum");function RF(e,r){let i=r.buf,a=i[r.pos++],u=(a&112)>>4;if(a<128||(a=i[r.pos++],u|=(a&127)<<3,a<128)||(a=i[r.pos++],u|=(a&127)<<10,a<128)||(a=i[r.pos++],u|=(a&127)<<17,a<128)||(a=i[r.pos++],u|=(a&127)<<24,a<128)||(a=i[r.pos++],u|=(a&1)<<31,a<128))return DF(e,u);throw new Error("Expected varint not more than 10 bytes")}hs(RF,"readVarintRemainder");function Jf(e){let r=e.buf,i=r[e.pos++],a=i&127;return i<128||(i=r[e.pos++],a|=(i&127)<<7,i<128)||(i=r[e.pos++],a|=(i&127)<<14,i<128)||(i=r[e.pos++],a|=(i&127)<<21,i<128)?a:(i=r[e.pos],a|=(i&15)<<28,RF(a,e))}hs(Jf,"readVarint");function tx(e,r,i,a){if(a===0){i===1&&(r[0]=e-1-r[0],r[1]=e-1-r[1]);let u=r[0];r[0]=r[1],r[1]=u}}hs(tx,"rotate");function NF(e,r){let i=Em(2,e),a=r,u=r,d=r,m=[0,0],o=1;for(;o<i;)a=1&d/2,u=1&(d^a),tx(o,m,a,u),m[0]+=o*a,m[1]+=o*u,d=d/4,o*=2;return[e,m[0],m[1]]}hs(NF,"idOnLevel");var kN=[0,1,5,21,85,341,1365,5461,21845,87381,349525,1398101,5592405,22369621,89478485,357913941,1431655765,5726623061,22906492245,91625968981,366503875925,1466015503701,5864062014805,23456248059221,93824992236885,375299968947541,0x5555555555555];function QF(e,r,i){if(e>26)throw new Error("Tile zoom level exceeds max safe number limit (26)");if(r>Em(2,e)-1||i>Em(2,e)-1)throw new Error("tile x/y outside zoom level bounds");let a=kN[e],u=Em(2,e),d=0,m=0,o=0,w=[r,i],E=u/2;for(;E>0;)d=(w[0]&E)>0?1:0,m=(w[1]&E)>0?1:0,o+=E*E*(3*d^m),tx(E,w,d,m),E=E/2;return a+o}hs(QF,"zxyToTileId");function UN(e){let r=0;for(let i=0;i<27;i++){let a=(1<<i)*(1<<i);if(r+a>e)return NF(i,e-r);r+=a}throw new Error("Tile zoom level exceeds max safe number limit (26)")}hs(UN,"tileIdToZxy");var DN=(e=>(e[e.Unknown=0]="Unknown",e[e.None=1]="None",e[e.Gzip=2]="Gzip",e[e.Brotli=3]="Brotli",e[e.Zstd=4]="Zstd",e))(DN||{});function Oy(e,r){return nl(this,null,function*(){if(r===1||r===0)return e;if(r===2){if(typeof globalThis.DecompressionStream>"u")return FN(new Uint8Array(e));let i=new Response(e).body;if(!i)throw new Error("Failed to read response stream");let a=i.pipeThrough(new globalThis.DecompressionStream("gzip"));return new Response(a).arrayBuffer()}throw new Error("Compression method not supported")})}hs(Oy,"defaultDecompress");var RN=(e=>(e[e.Unknown=0]="Unknown",e[e.Mvt=1]="Mvt",e[e.Png=2]="Png",e[e.Jpeg=3]="Jpeg",e[e.Webp=4]="Webp",e[e.Avif=5]="Avif",e))(RN||{});function OF(e){return e===1?".mvt":e===2?".png":e===3?".jpg":e===4?".webp":e===5?".avif":""}hs(OF,"tileTypeExt");var NN=127;function zF(e,r){let i=0,a=e.length-1;for(;i<=a;){let u=a+i>>1,d=r-e[u].tileId;if(d>0)i=u+1;else if(d<0)a=u-1;else return e[u]}return a>=0&&(e[a].runLength===0||r-e[a].tileId<e[a].runLength)?e[a]:null}hs(zF,"findTile");var QN=class{constructor(r){this.file=r}getKey(){return this.file.name}getBytes(r,i){return nl(this,null,function*(){return{data:yield this.file.slice(r,r+i).arrayBuffer()}})}};hs(QN,"FileSource");var HF=class{constructor(r,i=new Headers){this.url=r,this.customHeaders=i,this.mustReload=!1;let a="";"navigator"in globalThis&&(a=globalThis.navigator.userAgent||"");let u=a.indexOf("Windows")>-1,d=/Chrome|Chromium|Edg|OPR|Brave/.test(a);this.chromeWindowsNoCache=!1,u&&d&&(this.chromeWindowsNoCache=!0)}getKey(){return this.url}setHeaders(r){this.customHeaders=r}getBytes(r,i,a,u){return nl(this,null,function*(){let d,m;a?m=a:(d=new AbortController,m=d.signal);let o=new Headers(this.customHeaders);o.set("range",`bytes=${r}-${r+i-1}`);let w;this.mustReload?w="reload":this.chromeWindowsNoCache&&(w="no-store");let E=yield fetch(this.url,{signal:m,cache:w,headers:o});if(r===0&&E.status===416){let O=E.headers.get("Content-Range");if(!O||!O.startsWith("bytes */"))throw new Error("Missing content-length on 416 response");let P=+O.substr(8);E=yield fetch(this.url,{signal:m,cache:"reload",headers:{range:`bytes=0-${P-1}`}})}let I=E.headers.get("Etag");if(I!=null&&I.startsWith("W/")&&(I=null),E.status===416||u&&I&&I!==u)throw this.mustReload=!0,new H_(`Server returned non-matching ETag ${u} after one retry. Check browser extensions and servers for issues that may affect correct ETag headers.`);if(E.status>=300)throw new Error(`Bad response code: ${E.status}`);let D=E.headers.get("Content-Length");if(E.status===200&&(!D||+D>i))throw d&&d.abort(),new Error("Server returned no content-length header or content-length exceeding request. Check that your storage backend supports HTTP Byte Serving.");return{data:yield E.arrayBuffer(),etag:I||void 0,cacheControl:E.headers.get("Cache-Control")||void 0,expires:E.headers.get("Expires")||void 0}})}};hs(HF,"FetchSource");var ON=HF;function JA(e,r){let i=e.getUint32(r+4,!0),a=e.getUint32(r+0,!0);return i*Em(2,32)+a}hs(JA,"getUint64");function jF(e,r){let i=new DataView(e),a=i.getUint8(7);if(a>3)throw new Error(`Archive is spec version ${a} but this library supports up to spec version 3`);return{specVersion:a,rootDirectoryOffset:JA(i,8),rootDirectoryLength:JA(i,16),jsonMetadataOffset:JA(i,24),jsonMetadataLength:JA(i,32),leafDirectoryOffset:JA(i,40),leafDirectoryLength:JA(i,48),tileDataOffset:JA(i,56),tileDataLength:JA(i,64),numAddressedTiles:JA(i,72),numTileEntries:JA(i,80),numTileContents:JA(i,88),clustered:i.getUint8(96)===1,internalCompression:i.getUint8(97),tileCompression:i.getUint8(98),tileType:i.getUint8(99),minZoom:i.getUint8(100),maxZoom:i.getUint8(101),minLon:i.getInt32(102,!0)/1e7,minLat:i.getInt32(106,!0)/1e7,maxLon:i.getInt32(110,!0)/1e7,maxLat:i.getInt32(114,!0)/1e7,centerZoom:i.getUint8(118),centerLon:i.getInt32(119,!0)/1e7,centerLat:i.getInt32(123,!0)/1e7,etag:r}}hs(jF,"bytesToHeader");function rx(e){let r={buf:new Uint8Array(e),pos:0},i=Jf(r),a=[],u=0;for(let d=0;d<i;d++){let m=Jf(r);a.push({tileId:u+m,offset:0,length:0,runLength:1}),u+=m}for(let d=0;d<i;d++)a[d].runLength=Jf(r);for(let d=0;d<i;d++)a[d].length=Jf(r);for(let d=0;d<i;d++){let m=Jf(r);m===0&&d>0?a[d].offset=a[d-1].offset+a[d-1].length:a[d].offset=m-1}return a}hs(rx,"deserializeIndex");var VF=class extends Error{};hs(VF,"EtagMismatch");var H_=VF;function nx(e,r){return nl(this,null,function*(){let i=yield e.getBytes(0,16384);if(new DataView(i.data).getUint16(0,!0)!==19792)throw new Error("Wrong magic number for PMTiles archive");let a=i.data.slice(0,NN),u=jF(a,i.etag),d=i.data.slice(u.rootDirectoryOffset,u.rootDirectoryOffset+u.rootDirectoryLength),m=`${e.getKey()}|${u.etag||""}|${u.rootDirectoryOffset}|${u.rootDirectoryLength}`,o=rx(yield r(d,u.internalCompression));return[u,[m,o.length,o]]})}hs(nx,"getHeaderAndRoot");function ix(e,r,i,a,u){return nl(this,null,function*(){let d=yield e.getBytes(i,a,void 0,u.etag),m=yield r(d.data,u.internalCompression),o=rx(m);if(o.length===0)throw new Error("Empty directory is invalid");return o})}hs(ix,"getDirectory");var zN=class{constructor(r=100,i=!0,a=Oy){this.cache=new Map,this.maxCacheEntries=r,this.counter=1,this.decompress=a}getHeader(r){return nl(this,null,function*(){let i=r.getKey(),a=this.cache.get(i);if(a)return a.lastUsed=this.counter++,a.data;let u=yield nx(r,this.decompress);return u[1]&&this.cache.set(u[1][0],{lastUsed:this.counter++,data:u[1][2]}),this.cache.set(i,{lastUsed:this.counter++,data:u[0]}),this.prune(),u[0]})}getDirectory(r,i,a,u){return nl(this,null,function*(){let d=`${r.getKey()}|${u.etag||""}|${i}|${a}`,m=this.cache.get(d);if(m)return m.lastUsed=this.counter++,m.data;let o=yield ix(r,this.decompress,i,a,u);return this.cache.set(d,{lastUsed:this.counter++,data:o}),this.prune(),o})}prune(){if(this.cache.size>this.maxCacheEntries){let r=1/0,i;this.cache.forEach((a,u)=>{a.lastUsed<r&&(r=a.lastUsed,i=u)}),i&&this.cache.delete(i)}}invalidate(r){return nl(this,null,function*(){this.cache.delete(r.getKey())})}};hs(zN,"ResolvedValueCache");var GF=class{constructor(r=100,i=!0,a=Oy){this.cache=new Map,this.invalidations=new Map,this.maxCacheEntries=r,this.counter=1,this.decompress=a}getHeader(r){return nl(this,null,function*(){let i=r.getKey(),a=this.cache.get(i);if(a)return a.lastUsed=this.counter++,yield a.data;let u=new Promise((d,m)=>{nx(r,this.decompress).then(o=>{o[1]&&this.cache.set(o[1][0],{lastUsed:this.counter++,data:Promise.resolve(o[1][2])}),d(o[0]),this.prune()}).catch(o=>{m(o)})});return this.cache.set(i,{lastUsed:this.counter++,data:u}),u})}getDirectory(r,i,a,u){return nl(this,null,function*(){let d=`${r.getKey()}|${u.etag||""}|${i}|${a}`,m=this.cache.get(d);if(m)return m.lastUsed=this.counter++,yield m.data;let o=new Promise((w,E)=>{ix(r,this.decompress,i,a,u).then(I=>{w(I),this.prune()}).catch(I=>{E(I)})});return this.cache.set(d,{lastUsed:this.counter++,data:o}),o})}prune(){if(this.cache.size>=this.maxCacheEntries){let r=1/0,i;this.cache.forEach((a,u)=>{a.lastUsed<r&&(r=a.lastUsed,i=u)}),i&&this.cache.delete(i)}}invalidate(r){return nl(this,null,function*(){let i=r.getKey();if(this.invalidations.get(i))return yield this.invalidations.get(i);this.cache.delete(r.getKey());let a=new Promise((u,d)=>{this.getHeader(r).then(m=>{u(),this.invalidations.delete(i)}).catch(m=>{d(m)})});this.invalidations.set(i,a)})}};hs(GF,"SharedPromiseCache");var HN=GF,KF=class{constructor(r,i,a){typeof r=="string"?this.source=new ON(r):this.source=r,a?this.decompress=a:this.decompress=Oy,i?this.cache=i:this.cache=new HN}getHeader(){return nl(this,null,function*(){return yield this.cache.getHeader(this.source)})}getZxyAttempt(r,i,a,u){return nl(this,null,function*(){let d=QF(r,i,a),m=yield this.cache.getHeader(this.source);if(r<m.minZoom||r>m.maxZoom)return;let o=m.rootDirectoryOffset,w=m.rootDirectoryLength;for(let E=0;E<=3;E++){let I=yield this.cache.getDirectory(this.source,o,w,m),D=zF(I,d);if(D){if(D.runLength>0){let O=yield this.source.getBytes(m.tileDataOffset+D.offset,D.length,u,m.etag);return{data:yield this.decompress(O.data,m.tileCompression),cacheControl:O.cacheControl,expires:O.expires}}o=m.leafDirectoryOffset+D.offset,w=D.length}else return}throw new Error("Maximum directory depth exceeded")})}getZxy(r,i,a,u){return nl(this,null,function*(){try{return yield this.getZxyAttempt(r,i,a,u)}catch(d){if(d instanceof H_)return this.cache.invalidate(this.source),yield this.getZxyAttempt(r,i,a,u);throw d}})}getMetadataAttempt(){return nl(this,null,function*(){let r=yield this.cache.getHeader(this.source),i=yield this.source.getBytes(r.jsonMetadataOffset,r.jsonMetadataLength,void 0,r.etag),a=yield this.decompress(i.data,r.internalCompression),u=new TextDecoder("utf-8");return JSON.parse(u.decode(a))})}getMetadata(){return nl(this,null,function*(){try{return yield this.getMetadataAttempt()}catch(r){if(r instanceof H_)return this.cache.invalidate(this.source),yield this.getMetadataAttempt();throw r}})}getTileJson(r){return nl(this,null,function*(){let i=yield this.getHeader(),a=yield this.getMetadata(),u=OF(i.tileType);return{tilejson:"3.0.0",scheme:"xyz",tiles:[`${r}/{z}/{x}/{y}${u}`],vector_layers:a.vector_layers,attribution:a.attribution,description:a.description,name:a.name,version:a.version,bounds:[i.minLon,i.minLat,i.maxLon,i.maxLat],center:[i.centerLon,i.centerLat,i.centerZoom],minzoom:i.minZoom,maxzoom:i.maxZoom}})}};hs(KF,"PMTiles");var q2=KF;let $2=!1;function qF(){if($2)return;const e=new MN;sp.addProtocol("pmtiles",e.tile),$2=!0,console.log("[PMTiles] Protocol registered")}function jN(e,r,i={}){const a={type:"Feature"};return(i.id===0||i.id)&&(a.id=i.id),i.bbox&&(a.bbox=i.bbox),a.properties={},a.geometry=e,a}function W2(e,r,i={}){if(!e)throw new Error("coordinates is required");if(!Array.isArray(e))throw new Error("coordinates must be an Array");if(e.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!X2(e[0])||!X2(e[1]))throw new Error("coordinates must contain numbers");return jN({type:"Point",coordinates:e},r,i)}function Z2(e,r={}){const i={type:"FeatureCollection"};return r.id&&(i.id=r.id),r.bbox&&(i.bbox=r.bbox),i.features=e,i}function X2(e){return!isNaN(e)&&e!==null&&!Array.isArray(e)}function $F(e,r,i){if(e!==null)for(var a,u,d,m,o,w,E,I=0,D=0,O,P=e.type,W=P==="FeatureCollection",z=P==="Feature",H=W?e.features.length:1,Z=0;Z<H;Z++){E=W?e.features[Z].geometry:z?e.geometry:e,O=E?E.type==="GeometryCollection":!1,o=O?E.geometries.length:1;for(var se=0;se<o;se++){var ce=0,de=0;if(m=O?E.geometries[se]:E,m!==null){w=m.coordinates;var Pe=m.type;switch(I=0,Pe){case null:break;case"Point":if(r(w,D,Z,ce,de)===!1)return!1;D++,ce++;break;case"LineString":case"MultiPoint":for(a=0;a<w.length;a++){if(r(w[a],D,Z,ce,de)===!1)return!1;D++,Pe==="MultiPoint"&&ce++}Pe==="LineString"&&ce++;break;case"Polygon":case"MultiLineString":for(a=0;a<w.length;a++){for(u=0;u<w[a].length-I;u++){if(r(w[a][u],D,Z,ce,de)===!1)return!1;D++}Pe==="MultiLineString"&&ce++,Pe==="Polygon"&&de++}Pe==="Polygon"&&ce++;break;case"MultiPolygon":for(a=0;a<w.length;a++){for(de=0,u=0;u<w[a].length;u++){for(d=0;d<w[a][u].length-I;d++){if(r(w[a][u][d],D,Z,ce,de)===!1)return!1;D++}de++}ce++}break;case"GeometryCollection":for(a=0;a<m.geometries.length;a++)if($F(m.geometries[a],r)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function VN(e,r={}){if(e.bbox!=null&&r.recompute!==!0)return e.bbox;const i=[1/0,1/0,-1/0,-1/0];return $F(e,a=>{i[0]>a[0]&&(i[0]=a[0]),i[1]>a[1]&&(i[1]=a[1]),i[2]<a[0]&&(i[2]=a[0]),i[3]<a[1]&&(i[3]=a[1])}),i}var Y2=VN;const GN="/Domapus/",Wg=["#FFF9B0","#FFEB84","#FFD166","#FF9A56","#E84C61","#C13584","#7B2E8D","#2E0B59"];function h1(e,r){if(!e)return 0;const i=e[r];return typeof i=="number"&&isFinite(i)?i:0}function KN(e,r=8){const i=[...e].filter(w=>w>0).sort((w,E)=>w-E);if(i.length===0)return[];const a=i[0],u=i[i.length-1];if(a===u)return[a];const d=[],m=(u-a)*1e-6||1e-6,o=w=>i[Math.floor(w*(i.length-1))];for(let w=1;w<r;w++){let E=o(w/r);d.length&&E<=d[d.length-1]&&(E=d[d.length-1]+m),d.push(E)}return d}const J2=e=>({zhvi:"Zillow Home Value Index",median_sale_price:"Median Sale Price",median_ppsf:"Median Price per Sq Ft",avg_sale_to_list_ratio:"Sale-to-List Ratio",median_dom:"Median Days on Market"})[e]||e.split("_").map(i=>i.charAt(0).toUpperCase()+i.slice(1)).join(" "),qN=()=>new Date(new Date().setMonth(new Date().getMonth()-1)).toLocaleDateString("en-US",{month:"long",year:"numeric"});function d1(e,r){const i=r.toLowerCase();return i.includes("price")||i.includes("zhvi")?`$${(e/1e3).toFixed(0)}k`:i.includes("ratio")?`${e.toFixed(1)}%`:e.toLocaleString()}function $N(e,r){if(!e||e.length===0)return r.map(()=>0);const i=[...e].sort((a,u)=>a-u);return r.map(a=>{const u=(i.length-1)*a,d=Math.floor(u),m=Math.ceil(u),o=u-d;return i[d]*(1-o)+i[m]*o})}const WF=ee.forwardRef(({filteredData:e,selectedMetric:r,regionScope:i,regionName:a,includeLegend:u,includeTitle:d,onReady:m},o)=>{const w=ee.useRef(null),E=ee.useRef(null),I=ee.useRef(null),D=ee.useRef(null),O=ee.useRef({}),[P,W]=ee.useState(!1),z=ee.useMemo(()=>`${i}-${a}-${r}-${e.length}`,[i,a,r,e.length]);ee.useImperativeHandle(o,()=>({getElement:()=>w.current}));const H=ee.useMemo(()=>{const Je={};return e.forEach(Ae=>{Je[Ae.zipCode]=Ae}),Je},[e]),Z=ee.useMemo(()=>{const Je=e.map(Ae=>h1(Ae,r));return KN(Je)},[e,r]),se=ee.useMemo(()=>e.map(Je=>Je[r]).filter(Je=>typeof Je=="number"&&Je>0),[e,r]),ce=ee.useMemo(()=>{if(se.length===0)return{min:"N/A",mid:"N/A",max:"N/A"};const[Je,Ae,me]=$N(se,[.05,.5,.95]);return{min:d1(Je,r),mid:d1(Ae,r),max:d1(me,r)}},[se,r]),de=ee.useMemo(()=>new Set(e.map(Je=>Je.zipCode)),[e]),{alaskaZips:Pe,hawaiiZips:He,mainlandZips:Xe}=ee.useMemo(()=>{const Je=new Set,Ae=new Set,me=new Set;return e.forEach(Te=>{const Ie=h1(Te,r),ut=(Te.state??"").toString();Ie>0?ut==="AK"||ut.toLowerCase()==="alaska"?Je.add(Te.zipCode):ut==="HI"||ut.toLowerCase()==="hawaii"?Ae.add(Te.zipCode):me.add(Te.zipCode):i!=="national"&&me.add(Te.zipCode)}),{alaskaZips:Je,hawaiiZips:Ae,mainlandZips:me}},[e,i,r]),Qe=ee.useMemo(()=>{if(i==="national")return null;const Je=e.filter(Ne=>Ne.latitude&&Ne.longitude);if(Je.length===0)return null;const Ae=Je.map(Ne=>W2([Ne.longitude,Ne.latitude])),me=Z2(Ae);let[Te,Ie,ut,it]=Y2(me);const ot=(ut-Te)*.1||.5,ke=(it-Ie)*.1||.5;return{bounds:[[Te-ot,Ie-ke],[ut+ot,it+ke]],center:[(Te+ut)/2,(Ie+it)/2]}},[e,i]),Be=ee.useMemo(()=>{if(i!=="national")return null;const Je=e.filter(Ne=>{const yt=(Ne.state??"").toString();return!(yt==="AK"||yt==="HI"||yt.toLowerCase()==="alaska"||yt.toLowerCase()==="hawaii")&&Ne.latitude&&Ne.longitude});if(Je.length===0)return null;const Ae=Je.map(Ne=>W2([Ne.longitude,Ne.latitude])),me=Z2(Ae);let[Te,Ie,ut,it]=Y2(me);const ot=(ut-Te)*.05||.5,ke=(it-Ie)*.05||.5;return[[Te-ot,Ie-ke],[ut+ot,it+ke]]},[e,i]);return ee.useEffect(()=>{if(qF(),W(!1),Object.keys(O.current).forEach(it=>{O.current[it]?.remove(),O.current[it]=null}),e.length===0){m&&m();return}const Je=new URL(`${GN}data/us_zip_codes.pmtiles`,window.location.origin).href,Ae=["step",["coalesce",["feature-state","metricValue"],0],"#efefef",1e-6,Wg[0],...Z.flatMap((it,ot)=>[it,Wg[Math.min(ot+1,Wg.length-1)]])];let me=0;const Te=i==="national"?1+(Pe.size>0?1:0)+(He.size>0?1:0):1,Ie=()=>{me++,me>=Te&&(W(!0),m&&m())},ut=(it,ot,ke,Ne,yt,Ce)=>{if(!it)return null;const ie=new sp.Map({container:it,style:{version:8,sources:{},layers:[{id:"bg",type:"background",paint:{"background-color":"#ffffff"}}]},center:ke,zoom:Ne,pixelRatio:2,interactive:!1,attributionControl:!1,canvasContextAttributes:{preserveDrawingBuffer:!0}});return O.current[ot]=ie,ie.on("load",()=>{yt&&ie.fitBounds(yt,{padding:30,maxZoom:10}),ie.addSource("zips",{type:"vector",url:`pmtiles://${Je}`,promoteId:"ZCTA5CE20"}),ie.addLayer({id:"zips-fill",type:"fill",source:"zips","source-layer":"us_zip_codes",paint:{"fill-color":Ae,"fill-opacity":.9}}),ie.addLayer({id:"zips-border",type:"line",source:"zips","source-layer":"us_zip_codes",paint:{"line-color":["case",["boolean",["feature-state","inRegion"],!1],"rgba(0,0,0,0.15)","transparent"],"line-width":.5}}),ie.once("idle",()=>{(Ce||de).forEach(Le=>{const Ve=H[Le];if(Ve){const nt=h1(Ve,r);ie.setFeatureState({source:"zips",sourceLayer:"us_zip_codes",id:Le},{metricValue:nt,inRegion:!0})}}),ie.triggerRepaint(),ie.once("idle",Ie)})}),ie};return i==="national"?(ut(E.current,"main",[-98.5,39.5],3.8,Be||void 0,Xe),Pe.size>0&&ut(I.current,"alaska",[-152,64],2.8,void 0,Pe),He.size>0&&ut(D.current,"hawaii",[-157,20.5],5.5,void 0,He)):ut(E.current,"main",Qe?.center||[-98.5,39.5],5,Qe?.bounds,de),()=>{Object.keys(O.current).forEach(it=>{O.current[it]?.remove(),O.current[it]=null})}},[z]),ae.jsxs("div",{ref:w,className:"w-full h-full flex flex-col",style:{fontFamily:"system-ui, -apple-system, sans-serif",backgroundColor:"#ffffff"},children:[ae.jsxs("div",{className:"flex items-start justify-between px-6 pt-5 pb-3",style:{backgroundColor:"#ffffff"},children:[d&&ae.jsxs("div",{children:[ae.jsxs("h1",{className:"text-2xl font-bold leading-tight",style:{color:"#111827"},children:[J2(r)," by ZIP Code"]}),ae.jsxs("p",{className:"text-sm mt-0.5",style:{color:"#6b7280"},children:[a,"  ",qN()]})]}),ae.jsxs("div",{className:"flex items-center gap-1.5 text-[12px] text-[#9ca3af] whitespace-nowrap flex-shrink-0",children:[ae.jsxs("span",{children:["Built by ",ae.jsx("a",{href:"https://jasperc2024.github.io/Domapus/",target:"_blank",rel:"noopener noreferrer",className:"text-[13px] hover:underline",style:{color:"#0c82a5"},children:"Domapus"})]}),ae.jsx("span",{className:"opacity-60",children:""}),ae.jsxs("span",{children:["Data: ",ae.jsx("a",{href:"https://www.redfin.com/news/data-center/",target:"_blank",rel:"noopener noreferrer",className:"hover:underline",style:{color:"#0c82a5"},children:"Redfin"})," & ",ae.jsx("a",{href:"https://www.zillow.com/research/data/",target:"_blank",rel:"noopener noreferrer",className:"hover:underline",style:{color:"#0c82a5"},children:"Zillow"})]}),ae.jsx("span",{className:"opacity-60",children:""}),ae.jsxs("span",{children:["Map: ",ae.jsx("a",{href:"https://carto.com/about-carto/",target:"_blank",rel:"noopener noreferrer",className:"hover:underline",style:{color:"#0c82a5"},children:" CARTO"})," ",ae.jsx("a",{href:"http://www.openstreetmap.org/about/",target:"_blank",rel:"noopener noreferrer",className:"hover:underline",style:{color:"#0c82a5"},children:" OpenStreetMap"})," contributors"]})]})]}),ae.jsx("div",{className:"flex-1 mx-6 mb-4 relative overflow-hidden",style:{backgroundColor:"#ffffff"},children:e.length>0?ae.jsxs(ae.Fragment,{children:[ae.jsx("div",{ref:E,className:"absolute inset-0"}),i==="national"&&ae.jsxs("div",{className:"absolute bottom-4 left-4 flex gap-3 z-10",children:[Pe.size>0&&ae.jsxs("div",{className:"flex flex-col",children:[ae.jsx("span",{className:"text-[10px] font-medium mb-1",style:{color:"#6b7280"},children:"Alaska"}),ae.jsx("div",{className:"w-36 h-24 border overflow-hidden",style:{borderColor:"#d1d5db",backgroundColor:"#ffffff"},children:ae.jsx("div",{ref:I,className:"w-full h-full"})})]}),He.size>0&&ae.jsxs("div",{className:"flex flex-col",children:[ae.jsx("span",{className:"text-[10px] font-medium mb-1",style:{color:"#6b7280"},children:"Hawaii"}),ae.jsx("div",{className:"w-28 h-20 border overflow-hidden",style:{borderColor:"#d1d5db",backgroundColor:"#ffffff"},children:ae.jsx("div",{ref:D,className:"w-full h-full"})})]})]}),u&&ae.jsxs("div",{className:"absolute bottom-4 right-4 z-10 p-3",style:{backgroundColor:"#ffffff"},children:[ae.jsx("div",{className:"text-xs font-semibold mb-2",style:{color:"#111827"},children:J2(r)}),ae.jsx("div",{className:"h-3 w-48",style:{background:`linear-gradient(to right, ${Wg.join(", ")})`,borderRadius:"2px"}}),ae.jsxs("div",{className:"mt-1 flex justify-between text-[10px] font-medium w-48",style:{color:"#6b7280"},children:[ae.jsx("span",{children:ce.min}),ae.jsx("span",{children:ce.mid}),ae.jsx("span",{children:ce.max})]})]}),!P&&ae.jsx("div",{className:"absolute inset-0 flex items-center justify-center",style:{backgroundColor:"rgba(255,255,255,0.8)"},children:ae.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2",style:{borderColor:"#2563eb"}})})]}):ae.jsx("div",{className:"flex items-center justify-center h-full text-lg",style:{color:"#9ca3af"},children:"No data to display"})})]})});WF.displayName="PrintStage";var j_=function(e,r){return j_=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,a){i.__proto__=a}||function(i,a){for(var u in a)Object.prototype.hasOwnProperty.call(a,u)&&(i[u]=a[u])},j_(e,r)};function Lu(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");j_(e,r);function i(){this.constructor=e}e.prototype=r===null?Object.create(r):(i.prototype=r.prototype,new i)}var V_=function(){return V_=Object.assign||function(r){for(var i,a=1,u=arguments.length;a<u;a++){i=arguments[a];for(var d in i)Object.prototype.hasOwnProperty.call(i,d)&&(r[d]=i[d])}return r},V_.apply(this,arguments)};function bc(e,r,i,a){function u(d){return d instanceof i?d:new i(function(m){m(d)})}return new(i||(i=Promise))(function(d,m){function o(I){try{E(a.next(I))}catch(D){m(D)}}function w(I){try{E(a.throw(I))}catch(D){m(D)}}function E(I){I.done?d(I.value):u(I.value).then(o,w)}E((a=a.apply(e,[])).next())})}function Yl(e,r){var i={label:0,sent:function(){if(d[0]&1)throw d[1];return d[1]},trys:[],ops:[]},a,u,d,m;return m={next:o(0),throw:o(1),return:o(2)},typeof Symbol=="function"&&(m[Symbol.iterator]=function(){return this}),m;function o(E){return function(I){return w([E,I])}}function w(E){if(a)throw new TypeError("Generator is already executing.");for(;i;)try{if(a=1,u&&(d=E[0]&2?u.return:E[0]?u.throw||((d=u.return)&&d.call(u),0):u.next)&&!(d=d.call(u,E[1])).done)return d;switch(u=0,d&&(E=[E[0]&2,d.value]),E[0]){case 0:case 1:d=E;break;case 4:return i.label++,{value:E[1],done:!1};case 5:i.label++,u=E[1],E=[0];continue;case 7:E=i.ops.pop(),i.trys.pop();continue;default:if(d=i.trys,!(d=d.length>0&&d[d.length-1])&&(E[0]===6||E[0]===2)){i=0;continue}if(E[0]===3&&(!d||E[1]>d[0]&&E[1]<d[3])){i.label=E[1];break}if(E[0]===6&&i.label<d[1]){i.label=d[1],d=E;break}if(d&&i.label<d[2]){i.label=d[2],i.ops.push(E);break}d[2]&&i.ops.pop(),i.trys.pop();continue}E=r.call(e,i)}catch(I){E=[6,I],u=0}finally{a=d=0}if(E[0]&5)throw E[1];return{value:E[0]?E[1]:void 0,done:!0}}}function Zg(e,r,i){if(arguments.length===2)for(var a=0,u=r.length,d;a<u;a++)(d||!(a in r))&&(d||(d=Array.prototype.slice.call(r,0,a)),d[a]=r[a]);return e.concat(d||r)}var zh=(function(){function e(r,i,a,u){this.left=r,this.top=i,this.width=a,this.height=u}return e.prototype.add=function(r,i,a,u){return new e(this.left+r,this.top+i,this.width+a,this.height+u)},e.fromClientRect=function(r,i){return new e(i.left+r.windowBounds.left,i.top+r.windowBounds.top,i.width,i.height)},e.fromDOMRectList=function(r,i){var a=Array.from(i).find(function(u){return u.width!==0});return a?new e(a.left+r.windowBounds.left,a.top+r.windowBounds.top,a.width,a.height):e.EMPTY},e.EMPTY=new e(0,0,0,0),e})(),zy=function(e,r){return zh.fromClientRect(e,r.getBoundingClientRect())},WN=function(e){var r=e.body,i=e.documentElement;if(!r||!i)throw new Error("Unable to get document size");var a=Math.max(Math.max(r.scrollWidth,i.scrollWidth),Math.max(r.offsetWidth,i.offsetWidth),Math.max(r.clientWidth,i.clientWidth)),u=Math.max(Math.max(r.scrollHeight,i.scrollHeight),Math.max(r.offsetHeight,i.offsetHeight),Math.max(r.clientHeight,i.clientHeight));return new zh(0,0,a,u)},Hy=function(e){for(var r=[],i=0,a=e.length;i<a;){var u=e.charCodeAt(i++);if(u>=55296&&u<=56319&&i<a){var d=e.charCodeAt(i++);(d&64512)===56320?r.push(((u&1023)<<10)+(d&1023)+65536):(r.push(u),i--)}else r.push(u)}return r},Mo=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];if(String.fromCodePoint)return String.fromCodePoint.apply(String,e);var i=e.length;if(!i)return"";for(var a=[],u=-1,d="";++u<i;){var m=e[u];m<=65535?a.push(m):(m-=65536,a.push((m>>10)+55296,m%1024+56320)),(u+1===i||a.length>16384)&&(d+=String.fromCharCode.apply(String,a),a.length=0)}return d},eB="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",ZN=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var Xg=0;Xg<eB.length;Xg++)ZN[eB.charCodeAt(Xg)]=Xg;var tB="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",mm=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var Yg=0;Yg<tB.length;Yg++)mm[tB.charCodeAt(Yg)]=Yg;var XN=function(e){var r=e.length*.75,i=e.length,a,u=0,d,m,o,w;e[e.length-1]==="="&&(r--,e[e.length-2]==="="&&r--);var E=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(r):new Array(r),I=Array.isArray(E)?E:new Uint8Array(E);for(a=0;a<i;a+=4)d=mm[e.charCodeAt(a)],m=mm[e.charCodeAt(a+1)],o=mm[e.charCodeAt(a+2)],w=mm[e.charCodeAt(a+3)],I[u++]=d<<2|m>>4,I[u++]=(m&15)<<4|o>>2,I[u++]=(o&3)<<6|w&63;return E},YN=function(e){for(var r=e.length,i=[],a=0;a<r;a+=2)i.push(e[a+1]<<8|e[a]);return i},JN=function(e){for(var r=e.length,i=[],a=0;a<r;a+=4)i.push(e[a+3]<<24|e[a+2]<<16|e[a+1]<<8|e[a]);return i},Jd=5,sx=11,f1=2,e6=sx-Jd,ZF=65536>>Jd,t6=1<<Jd,p1=t6-1,r6=1024>>Jd,n6=ZF+r6,i6=n6,s6=32,o6=i6+s6,a6=65536>>sx,l6=1<<e6,c6=l6-1,rB=function(e,r,i){return e.slice?e.slice(r,i):new Uint16Array(Array.prototype.slice.call(e,r,i))},A6=function(e,r,i){return e.slice?e.slice(r,i):new Uint32Array(Array.prototype.slice.call(e,r,i))},u6=function(e,r){var i=XN(e),a=Array.isArray(i)?JN(i):new Uint32Array(i),u=Array.isArray(i)?YN(i):new Uint16Array(i),d=24,m=rB(u,d/2,a[4]/2),o=a[5]===2?rB(u,(d+a[4])/2):A6(a,Math.ceil((d+a[4])/4));return new h6(a[0],a[1],a[2],a[3],m,o)},h6=(function(){function e(r,i,a,u,d,m){this.initialValue=r,this.errorValue=i,this.highStart=a,this.highValueIndex=u,this.index=d,this.data=m}return e.prototype.get=function(r){var i;if(r>=0){if(r<55296||r>56319&&r<=65535)return i=this.index[r>>Jd],i=(i<<f1)+(r&p1),this.data[i];if(r<=65535)return i=this.index[ZF+(r-55296>>Jd)],i=(i<<f1)+(r&p1),this.data[i];if(r<this.highStart)return i=o6-a6+(r>>sx),i=this.index[i],i+=r>>Jd&c6,i=this.index[i],i=(i<<f1)+(r&p1),this.data[i];if(r<=1114111)return this.data[this.highValueIndex]}return this.errorValue},e})(),nB="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",d6=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var Jg=0;Jg<nB.length;Jg++)d6[nB.charCodeAt(Jg)]=Jg;var f6="KwAAAAAAAAAACA4AUD0AADAgAAACAAAAAAAIABAAGABAAEgAUABYAGAAaABgAGgAYgBqAF8AZwBgAGgAcQB5AHUAfQCFAI0AlQCdAKIAqgCyALoAYABoAGAAaABgAGgAwgDKAGAAaADGAM4A0wDbAOEA6QDxAPkAAQEJAQ8BFwF1AH0AHAEkASwBNAE6AUIBQQFJAVEBWQFhAWgBcAF4ATAAgAGGAY4BlQGXAZ8BpwGvAbUBvQHFAc0B0wHbAeMB6wHxAfkBAQIJAvEBEQIZAiECKQIxAjgCQAJGAk4CVgJeAmQCbAJ0AnwCgQKJApECmQKgAqgCsAK4ArwCxAIwAMwC0wLbAjAA4wLrAvMC+AIAAwcDDwMwABcDHQMlAy0DNQN1AD0DQQNJA0kDSQNRA1EDVwNZA1kDdQB1AGEDdQBpA20DdQN1AHsDdQCBA4kDkQN1AHUAmQOhA3UAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AKYDrgN1AHUAtgO+A8YDzgPWAxcD3gPjA+sD8wN1AHUA+wMDBAkEdQANBBUEHQQlBCoEFwMyBDgEYABABBcDSARQBFgEYARoBDAAcAQzAXgEgASIBJAEdQCXBHUAnwSnBK4EtgS6BMIEyAR1AHUAdQB1AHUAdQCVANAEYABgAGAAYABgAGAAYABgANgEYADcBOQEYADsBPQE/AQEBQwFFAUcBSQFLAU0BWQEPAVEBUsFUwVbBWAAYgVgAGoFcgV6BYIFigWRBWAAmQWfBaYFYABgAGAAYABgAKoFYACxBbAFuQW6BcEFwQXHBcEFwQXPBdMF2wXjBeoF8gX6BQIGCgYSBhoGIgYqBjIGOgZgAD4GRgZMBmAAUwZaBmAAYABgAGAAYABgAGAAYABgAGAAYABgAGIGYABpBnAGYABgAGAAYABgAGAAYABgAGAAYAB4Bn8GhQZgAGAAYAB1AHcDFQSLBmAAYABgAJMGdQA9A3UAmwajBqsGqwaVALMGuwbDBjAAywbSBtIG1QbSBtIG0gbSBtIG0gbdBuMG6wbzBvsGAwcLBxMHAwcbByMHJwcsBywHMQcsB9IGOAdAB0gHTgfSBkgHVgfSBtIG0gbSBtIG0gbSBtIG0gbSBiwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdgAGAALAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdbB2MHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB2kH0gZwB64EdQB1AHUAdQB1AHUAdQB1AHUHfQdgAIUHjQd1AHUAlQedB2AAYAClB6sHYACzB7YHvgfGB3UAzgfWBzMB3gfmB1EB7gf1B/0HlQENAQUIDQh1ABUIHQglCBcDLQg1CD0IRQhNCEEDUwh1AHUAdQBbCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIcAh3CHoIMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIgggwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAALAcsBywHLAcsBywHLAcsBywHLAcsB4oILAcsB44I0gaWCJ4Ipgh1AHUAqgiyCHUAdQB1AHUAdQB1AHUAdQB1AHUAtwh8AXUAvwh1AMUIyQjRCNkI4AjoCHUAdQB1AO4I9gj+CAYJDgkTCS0HGwkjCYIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiAAIAAAAFAAYABgAGIAXwBgAHEAdQBFAJUAogCyAKAAYABgAEIA4ABGANMA4QDxAMEBDwE1AFwBLAE6AQEBUQF4QkhCmEKoQrhCgAHIQsAB0MLAAcABwAHAAeDC6ABoAHDCwMMAAcABwAHAAdDDGMMAAcAB6MM4wwjDWMNow3jDaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAEjDqABWw6bDqABpg6gAaABoAHcDvwOPA+gAaABfA/8DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DpcPAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcAB9cPKwkyCToJMAB1AHUAdQBCCUoJTQl1AFUJXAljCWcJawkwADAAMAAwAHMJdQB2CX4JdQCECYoJjgmWCXUAngkwAGAAYABxAHUApgn3A64JtAl1ALkJdQDACTAAMAAwADAAdQB1AHUAdQB1AHUAdQB1AHUAowYNBMUIMAAwADAAMADICcsJ0wnZCRUE4QkwAOkJ8An4CTAAMAB1AAAKvwh1AAgKDwoXCh8KdQAwACcKLgp1ADYKqAmICT4KRgowADAAdQB1AE4KMAB1AFYKdQBeCnUAZQowADAAMAAwADAAMAAwADAAMAAVBHUAbQowADAAdQC5CXUKMAAwAHwBxAijBogEMgF9CoQKiASMCpQKmgqIBKIKqgquCogEDQG2Cr4KxgrLCjAAMADTCtsKCgHjCusK8Qr5CgELMAAwADAAMAB1AIsECQsRC3UANAEZCzAAMAAwADAAMAB1ACELKQswAHUANAExCzkLdQBBC0kLMABRC1kLMAAwADAAMAAwADAAdQBhCzAAMAAwAGAAYABpC3ELdwt/CzAAMACHC4sLkwubC58Lpwt1AK4Ltgt1APsDMAAwADAAMAAwADAAMAAwAL4LwwvLC9IL1wvdCzAAMADlC+kL8Qv5C/8LSQswADAAMAAwADAAMAAwADAAMAAHDDAAMAAwADAAMAAODBYMHgx1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1ACYMMAAwADAAdQB1AHUALgx1AHUAdQB1AHUAdQA2DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AD4MdQBGDHUAdQB1AHUAdQB1AEkMdQB1AHUAdQB1AFAMMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQBYDHUAdQB1AF8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUA+wMVBGcMMAAwAHwBbwx1AHcMfwyHDI8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAYABgAJcMMAAwADAAdQB1AJ8MlQClDDAAMACtDCwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB7UMLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AA0EMAC9DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAsBywHLAcsBywHLAcsBywHLQcwAMEMyAwsBywHLAcsBywHLAcsBywHLAcsBywHzAwwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1ANQM2QzhDDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMABgAGAAYABgAGAAYABgAOkMYADxDGAA+AwADQYNYABhCWAAYAAODTAAMAAwADAAFg1gAGAAHg37AzAAMAAwADAAYABgACYNYAAsDTQNPA1gAEMNPg1LDWAAYABgAGAAYABgAGAAYABgAGAAUg1aDYsGVglhDV0NcQBnDW0NdQ15DWAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAlQCBDZUAiA2PDZcNMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAnw2nDTAAMAAwADAAMAAwAHUArw23DTAAMAAwADAAMAAwADAAMAAwADAAMAB1AL8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQDHDTAAYABgAM8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA1w11ANwNMAAwAD0B5A0wADAAMAAwADAAMADsDfQN/A0EDgwOFA4wABsOMAAwADAAMAAwADAAMAAwANIG0gbSBtIG0gbSBtIG0gYjDigOwQUuDsEFMw7SBjoO0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGQg5KDlIOVg7SBtIGXg5lDm0OdQ7SBtIGfQ6EDooOjQ6UDtIGmg6hDtIG0gaoDqwO0ga0DrwO0gZgAGAAYADEDmAAYAAkBtIGzA5gANIOYADaDokO0gbSBt8O5w7SBu8O0gb1DvwO0gZgAGAAxA7SBtIG0gbSBtIGYABgAGAAYAAED2AAsAUMD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHJA8sBywHLAcsBywHLAccDywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywPLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAc0D9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHPA/SBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gYUD0QPlQCVAJUAMAAwADAAMACVAJUAlQCVAJUAlQCVAEwPMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA//8EAAQABAAEAAQABAAEAAQABAANAAMAAQABAAIABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQACgATABcAHgAbABoAHgAXABYAEgAeABsAGAAPABgAHABLAEsASwBLAEsASwBLAEsASwBLABgAGAAeAB4AHgATAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABYAGwASAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWAA0AEQAeAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAFAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJABYAGgAbABsAGwAeAB0AHQAeAE8AFwAeAA0AHgAeABoAGwBPAE8ADgBQAB0AHQAdAE8ATwAXAE8ATwBPABYAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAFAATwBAAE8ATwBPAEAATwBQAFAATwBQAB4AHgAeAB4AHgAeAB0AHQAdAB0AHgAdAB4ADgBQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgBQAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAkACQAJAAkACQAJAAkABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAFAAHgAeAB4AKwArAFAAUABQAFAAGABQACsAKwArACsAHgAeAFAAHgBQAFAAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUAAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAYAA0AKwArAB4AHgAbACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAB4ABAAEAB4ABAAEABMABAArACsAKwArACsAKwArACsAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAKwArACsAKwBWAFYAVgBWAB4AHgArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AGgAaABoAGAAYAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQAEwAEACsAEwATAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABLAEsASwBLAEsASwBLAEsASwBLABoAGQAZAB4AUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABMAUAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABABQAFAABAAEAB4ABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUAAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAFAABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQAUABQAB4AHgAYABMAUAArACsABAAbABsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAFAABAAEAAQABAAEAFAABAAEAAQAUAAEAAQABAAEAAQAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArACsAHgArAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAUAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEAA0ADQBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUAArACsAKwBQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABABQACsAKwArACsAKwArACsAKwAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUAAaABoAUABQAFAAUABQAEwAHgAbAFAAHgAEACsAKwAEAAQABAArAFAAUABQAFAAUABQACsAKwArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQACsAUABQACsAKwAEACsABAAEAAQABAAEACsAKwArACsABAAEACsAKwAEAAQABAArACsAKwAEACsAKwArACsAKwArACsAUABQAFAAUAArAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLAAQABABQAFAAUAAEAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAArACsAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AGwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAKwArACsAKwArAAQABAAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAAQAUAArAFAAUABQAFAAUABQACsAKwArAFAAUABQACsAUABQAFAAUAArACsAKwBQAFAAKwBQACsAUABQACsAKwArAFAAUAArACsAKwBQAFAAUAArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArAAQABAAEAAQABAArACsAKwAEAAQABAArAAQABAAEAAQAKwArAFAAKwArACsAKwArACsABAArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAHgAeAB4AHgAeAB4AGwAeACsAKwArACsAKwAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAUABQAFAAKwArACsAKwArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwAOAFAAUABQAFAAUABQAFAAHgBQAAQABAAEAA4AUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAKwArAAQAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAKwArACsAKwArACsAUAArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAFAABAAEAAQABAAEAAQABAArAAQABAAEACsABAAEAAQABABQAB4AKwArACsAKwBQAFAAUAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQABoAUABQAFAAUABQAFAAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQACsAUAArACsAUABQAFAAUABQAFAAUAArACsAKwAEACsAKwArACsABAAEAAQABAAEAAQAKwAEACsABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArAAQABAAeACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAXAAqACoAKgAqACoAKgAqACsAKwArACsAGwBcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAeAEsASwBLAEsASwBLAEsASwBLAEsADQANACsAKwArACsAKwBcAFwAKwBcACsAXABcAFwAXABcACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAXAArAFwAXABcAFwAXABcAFwAXABcAFwAKgBcAFwAKgAqACoAKgAqACoAKgAqACoAXAArACsAXABcAFwAXABcACsAXAArACoAKgAqACoAKgAqACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwBcAFwAXABcAFAADgAOAA4ADgAeAA4ADgAJAA4ADgANAAkAEwATABMAEwATAAkAHgATAB4AHgAeAAQABAAeAB4AHgAeAB4AHgBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQAFAADQAEAB4ABAAeAAQAFgARABYAEQAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAAQABAAEAAQADQAEAAQAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAA0ADQAeAB4AHgAeAB4AHgAEAB4AHgAeAB4AHgAeACsAHgAeAA4ADgANAA4AHgAeAB4AHgAeAAkACQArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgBcAEsASwBLAEsASwBLAEsASwBLAEsADQANAB4AHgAeAB4AXABcAFwAXABcAFwAKgAqACoAKgBcAFwAXABcACoAKgAqAFwAKgAqACoAXABcACoAKgAqACoAKgAqACoAXABcAFwAKgAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqAFwAKgBLAEsASwBLAEsASwBLAEsASwBLACoAKgAqACoAKgAqAFAAUABQAFAAUABQACsAUAArACsAKwArACsAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAKwBQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsABAAEAAQAHgANAB4AHgAeAB4AHgAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUAArACsADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWABEAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQANAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAANAA0AKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUAArAAQABAArACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqAA0ADQAVAFwADQAeAA0AGwBcACoAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwAeAB4AEwATAA0ADQAOAB4AEwATAB4ABAAEAAQACQArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAHgArACsAKwATABMASwBLAEsASwBLAEsASwBLAEsASwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAXABcAFwAXABcACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAXAArACsAKwAqACoAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsAHgAeAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKwAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKwArAAQASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACoAKgAqACoAKgAqACoAXAAqACoAKgAqACoAKgArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABABQAFAAUABQAFAAUABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwANAA0AHgANAA0ADQANAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwAeAB4AHgAeAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArAA0ADQANAA0ADQBLAEsASwBLAEsASwBLAEsASwBLACsAKwArAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUAAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAAQAUABQAFAAUABQAFAABABQAFAABAAEAAQAUAArACsAKwArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQACsAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAFAAUABQACsAHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQACsAKwAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQACsAHgAeAB4AHgAeAB4AHgAOAB4AKwANAA0ADQANAA0ADQANAAkADQANAA0ACAAEAAsABAAEAA0ACQANAA0ADAAdAB0AHgAXABcAFgAXABcAFwAWABcAHQAdAB4AHgAUABQAFAANAAEAAQAEAAQABAAEAAQACQAaABoAGgAaABoAGgAaABoAHgAXABcAHQAVABUAHgAeAB4AHgAeAB4AGAAWABEAFQAVABUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ADQAeAA0ADQANAA0AHgANAA0ADQAHAB4AHgAeAB4AKwAEAAQABAAEAAQABAAEAAQABAAEAFAAUAArACsATwBQAFAAUABQAFAAHgAeAB4AFgARAE8AUABPAE8ATwBPAFAAUABQAFAAUAAeAB4AHgAWABEAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArABsAGwAbABsAGwAbABsAGgAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGgAbABsAGwAbABoAGwAbABoAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAHgAeAFAAGgAeAB0AHgBQAB4AGgAeAB4AHgAeAB4AHgAeAB4AHgBPAB4AUAAbAB4AHgBQAFAAUABQAFAAHgAeAB4AHQAdAB4AUAAeAFAAHgBQAB4AUABPAFAAUAAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgBQAFAAUABQAE8ATwBQAFAAUABQAFAATwBQAFAATwBQAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAUABQAFAATwBPAE8ATwBPAE8ATwBPAE8ATwBQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABPAB4AHgArACsAKwArAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHQAdAB4AHgAeAB0AHQAeAB4AHQAeAB4AHgAdAB4AHQAbABsAHgAdAB4AHgAeAB4AHQAeAB4AHQAdAB0AHQAeAB4AHQAeAB0AHgAdAB0AHQAdAB0AHQAeAB0AHgAeAB4AHgAeAB0AHQAdAB0AHgAeAB4AHgAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHgAeAB0AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAeAB0AHQAdAB0AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAdAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAWABEAHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAWABEAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AHQAdAB0AHgAeAB0AHgAeAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlAB4AHQAdAB4AHgAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AJQAlAB0AHQAlAB4AJQAlACUAIAAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAdAB0AHQAeAB0AJQAdAB0AHgAdAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAdAB0AHQAdACUAHgAlACUAJQAdACUAJQAdAB0AHQAlACUAHQAdACUAHQAdACUAJQAlAB4AHQAeAB4AHgAeAB0AHQAlAB0AHQAdAB0AHQAdACUAJQAlACUAJQAdACUAJQAgACUAHQAdACUAJQAlACUAJQAlACUAJQAeAB4AHgAlACUAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AFwAXABcAFwAXABcAHgATABMAJQAeAB4AHgAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARABYAEQAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAEAAQABAAeAB4AKwArACsAKwArABMADQANAA0AUAATAA0AUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUAANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAA0ADQANAA0ADQANAA0ADQAeAA0AFgANAB4AHgAXABcAHgAeABcAFwAWABEAFgARABYAEQAWABEADQANAA0ADQATAFAADQANAB4ADQANAB4AHgAeAB4AHgAMAAwADQANAA0AHgANAA0AFgANAA0ADQANAA0ADQANAA0AHgANAB4ADQANAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArAA0AEQARACUAJQBHAFcAVwAWABEAFgARABYAEQAWABEAFgARACUAJQAWABEAFgARABYAEQAWABEAFQAWABEAEQAlAFcAVwBXAFcAVwBXAFcAVwBXAAQABAAEAAQABAAEACUAVwBXAFcAVwA2ACUAJQBXAFcAVwBHAEcAJQAlACUAKwBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBRAFcAUQBXAFEAVwBXAFcAVwBXAFcAUQBXAFcAVwBXAFcAVwBRAFEAKwArAAQABAAVABUARwBHAFcAFQBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBRAFcAVwBXAFcAVwBXAFEAUQBXAFcAVwBXABUAUQBHAEcAVwArACsAKwArACsAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwAlACUAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACsAKwArACsAKwArACsAKwArACsAKwArAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBPAE8ATwBPAE8ATwBPAE8AJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADQATAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABLAEsASwBLAEsASwBLAEsASwBLAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAABAAEAAQABAAeAAQABAAEAAQABAAEAAQABAAEAAQAHgBQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAeAA0ADQANAA0ADQArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAAQAUABQAFAABABQAFAAUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAeAB4AHgAeAAQAKwArACsAUABQAFAAUABQAFAAHgAeABoAHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADgAOABMAEwArACsAKwArACsAKwArACsABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwANAA0ASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUAAeAB4AHgBQAA4AUABQAAQAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArAB4AWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYACsAKwArAAQAHgAeAB4AHgAeAB4ADQANAA0AHgAeAB4AHgArAFAASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArAB4AHgBcAFwAXABcAFwAKgBcAFwAXABcAFwAXABcAFwAXABcAEsASwBLAEsASwBLAEsASwBLAEsAXABcAFwAXABcACsAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAFAAUABQAAQAUABQAFAAUABQAFAAUABQAAQABAArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAHgANAA0ADQBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAXAAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAKgAqACoAXABcACoAKgBcAFwAXABcAFwAKgAqAFwAKgBcACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcACoAKgBQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAA0ADQBQAFAAUAAEAAQAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQADQAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAVABVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBUAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVACsAKwArACsAKwArACsAKwArACsAKwArAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAKwArACsAKwBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAKwArACsAKwAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAKwArACsAKwArAFYABABWAFYAVgBWAFYAVgBWAFYAVgBWAB4AVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgArAFYAVgBWAFYAVgArAFYAKwBWAFYAKwBWAFYAKwBWAFYAVgBWAFYAVgBWAFYAVgBWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAEQAWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAaAB4AKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAGAARABEAGAAYABMAEwAWABEAFAArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACUAJQAlACUAJQAWABEAFgARABYAEQAWABEAFgARABYAEQAlACUAFgARACUAJQAlACUAJQAlACUAEQAlABEAKwAVABUAEwATACUAFgARABYAEQAWABEAJQAlACUAJQAlACUAJQAlACsAJQAbABoAJQArACsAKwArAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAcAKwATACUAJQAbABoAJQAlABYAEQAlACUAEQAlABEAJQBXAFcAVwBXAFcAVwBXAFcAVwBXABUAFQAlACUAJQATACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXABYAJQARACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAWACUAEQAlABYAEQARABYAEQARABUAVwBRAFEAUQBRAFEAUQBRAFEAUQBRAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcARwArACsAVwBXAFcAVwBXAFcAKwArAFcAVwBXAFcAVwBXACsAKwBXAFcAVwBXAFcAVwArACsAVwBXAFcAKwArACsAGgAbACUAJQAlABsAGwArAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAAQAB0AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsADQANAA0AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAA0AUABQAFAAUAArACsAKwArAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwArAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwBQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAUABQAFAAUABQAAQABAAEACsABAAEACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAKwBQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAA0ADQANAA0ADQANAA0ADQAeACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAArACsAKwArAFAAUABQAFAAUAANAA0ADQANAA0ADQAUACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsADQANAA0ADQANAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArAAQABAANACsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAB4AHgAeAB4AHgArACsAKwArACsAKwAEAAQABAAEAAQABAAEAA0ADQAeAB4AHgAeAB4AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsASwBLAEsASwBLAEsASwBLAEsASwANAA0ADQANAFAABAAEAFAAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAeAA4AUAArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAADQANAB4ADQAEAAQABAAEAB4ABAAEAEsASwBLAEsASwBLAEsASwBLAEsAUAAOAFAADQANAA0AKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAANAA0AHgANAA0AHgAEACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAA0AKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsABAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsABAAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAUAArACsAKwArACsAKwAEACsAKwArACsAKwBQAFAAUABQAFAABAAEACsAKwAEAAQABAAEAAQABAAEACsAKwArAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAAQABABQAFAAUABQAA0ADQANAA0AHgBLAEsASwBLAEsASwBLAEsASwBLAA0ADQArAB4ABABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUAAeAFAAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABAAEAAQADgANAA0AEwATAB4AHgAeAA0ADQANAA0ADQANAA0ADQANAA0ADQANAA0ADQANAFAAUABQAFAABAAEACsAKwAEAA0ADQAeAFAAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKwArACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBcAFwADQANAA0AKgBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAKwArAFAAKwArAFAAUABQAFAAUABQAFAAUAArAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQAKwAEAAQAKwArAAQABAAEAAQAUAAEAFAABAAEAA0ADQANACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABABQAA4AUAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAFAABAAEAAQABAAOAB4ADQANAA0ADQAOAB4ABAArACsAKwArACsAKwArACsAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAA0ADQANAFAADgAOAA4ADQANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAAQABAAEAFAADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAOABMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAArACsAKwAEACsABAAEACsABAAEAAQABAAEAAQABABQAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAaABoAGgAaAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABIAEgAQwBDAEMAUABQAFAAUABDAFAAUABQAEgAQwBIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABDAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAJAAkACQAJAAkACQAJABYAEQArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwANAA0AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAANACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAA0ADQANAB4AHgAeAB4AHgAeAFAAUABQAFAADQAeACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAA0AHgAeACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAARwBHABUARwAJACsAKwArACsAKwArACsAKwArACsAKwAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUQBRAFEAKwArACsAKwArACsAKwArACsAKwArACsAKwBRAFEAUQBRACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAHgAEAAQADQAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQABAAEAAQABAAeAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQAHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAKwArAFAAKwArAFAAUAArACsAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUAArAFAAUABQAFAAUABQAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAHgAeAFAAUABQAFAAUAArAFAAKwArACsAUABQAFAAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeACsAKwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4ABAAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAHgAeAA0ADQANAA0AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArAAQABAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwBQAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArABsAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAB4AHgAeAB4ABAAEAAQABAAEAAQABABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArABYAFgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAGgBQAFAAUAAaAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUAArACsAKwArACsAKwBQACsAKwArACsAUAArAFAAKwBQACsAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUAArAFAAKwBQACsAUAArAFAAUAArAFAAKwArAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAKwBQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8AJQAlACUAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB4AHgAeACUAJQAlAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAlACUAJQAlACUAHgAlACUAJQAlACUAIAAgACAAJQAlACAAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACEAIQAhACEAIQAlACUAIAAgACUAJQAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAIAAlACUAJQAlACAAIAAgACUAIAAgACAAJQAlACUAJQAlACUAJQAgACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAlAB4AJQAeACUAJQAlACUAJQAgACUAJQAlACUAHgAlAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACAAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABcAFwAXABUAFQAVAB4AHgAeAB4AJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAgACUAJQAgACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAIAAgACUAJQAgACAAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACAAIAAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACAAIAAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAA==",iB=50,p6=1,XF=2,YF=3,m6=4,g6=5,sB=7,JF=8,oB=9,hd=10,G_=11,aB=12,K_=13,y6=14,gm=15,q_=16,e0=17,cm=18,v6=19,lB=20,$_=21,Am=22,m1=23,Hf=24,BA=25,ym=26,vm=27,jf=28,_6=29,Zd=30,w6=31,t0=32,r0=33,W_=34,Z_=35,X_=36,Om=37,Y_=38,D0=39,R0=40,g1=41,eI=42,x6=43,b6=[9001,65288],tI="!",di="",n0="",J_=u6(f6),kh=[Zd,X_],ew=[p6,XF,YF,g6],rI=[hd,JF],cB=[vm,ym],B6=ew.concat(rI),AB=[Y_,D0,R0,W_,Z_],C6=[gm,K_],E6=function(e,r){r===void 0&&(r="strict");var i=[],a=[],u=[];return e.forEach(function(d,m){var o=J_.get(d);if(o>iB?(u.push(!0),o-=iB):u.push(!1),["normal","auto","loose"].indexOf(r)!==-1&&[8208,8211,12316,12448].indexOf(d)!==-1)return a.push(m),i.push(q_);if(o===m6||o===G_){if(m===0)return a.push(m),i.push(Zd);var w=i[m-1];return B6.indexOf(w)===-1?(a.push(a[m-1]),i.push(w)):(a.push(m),i.push(Zd))}if(a.push(m),o===w6)return i.push(r==="strict"?$_:Om);if(o===eI||o===_6)return i.push(Zd);if(o===x6)return d>=131072&&d<=196605||d>=196608&&d<=262141?i.push(Om):i.push(Zd);i.push(o)}),[a,i,u]},y1=function(e,r,i,a){var u=a[i];if(Array.isArray(e)?e.indexOf(u)!==-1:e===u)for(var d=i;d<=a.length;){d++;var m=a[d];if(m===r)return!0;if(m!==hd)break}if(u===hd)for(var d=i;d>0;){d--;var o=a[d];if(Array.isArray(e)?e.indexOf(o)!==-1:e===o)for(var w=i;w<=a.length;){w++;var m=a[w];if(m===r)return!0;if(m!==hd)break}if(o!==hd)break}return!1},uB=function(e,r){for(var i=e;i>=0;){var a=r[i];if(a===hd)i--;else return a}return 0},S6=function(e,r,i,a,u){if(i[a]===0)return di;var d=a-1;if(Array.isArray(u)&&u[d]===!0)return di;var m=d-1,o=d+1,w=r[d],E=m>=0?r[m]:0,I=r[o];if(w===XF&&I===YF)return di;if(ew.indexOf(w)!==-1)return tI;if(ew.indexOf(I)!==-1||rI.indexOf(I)!==-1)return di;if(uB(d,r)===JF)return n0;if(J_.get(e[d])===G_||(w===t0||w===r0)&&J_.get(e[o])===G_||w===sB||I===sB||w===oB||[hd,K_,gm].indexOf(w)===-1&&I===oB||[e0,cm,v6,Hf,jf].indexOf(I)!==-1||uB(d,r)===Am||y1(m1,Am,d,r)||y1([e0,cm],$_,d,r)||y1(aB,aB,d,r))return di;if(w===hd)return n0;if(w===m1||I===m1)return di;if(I===q_||w===q_)return n0;if([K_,gm,$_].indexOf(I)!==-1||w===y6||E===X_&&C6.indexOf(w)!==-1||w===jf&&I===X_||I===lB||kh.indexOf(I)!==-1&&w===BA||kh.indexOf(w)!==-1&&I===BA||w===vm&&[Om,t0,r0].indexOf(I)!==-1||[Om,t0,r0].indexOf(w)!==-1&&I===ym||kh.indexOf(w)!==-1&&cB.indexOf(I)!==-1||cB.indexOf(w)!==-1&&kh.indexOf(I)!==-1||[vm,ym].indexOf(w)!==-1&&(I===BA||[Am,gm].indexOf(I)!==-1&&r[o+1]===BA)||[Am,gm].indexOf(w)!==-1&&I===BA||w===BA&&[BA,jf,Hf].indexOf(I)!==-1)return di;if([BA,jf,Hf,e0,cm].indexOf(I)!==-1)for(var D=d;D>=0;){var O=r[D];if(O===BA)return di;if([jf,Hf].indexOf(O)!==-1)D--;else break}if([vm,ym].indexOf(I)!==-1)for(var D=[e0,cm].indexOf(w)!==-1?m:d;D>=0;){var O=r[D];if(O===BA)return di;if([jf,Hf].indexOf(O)!==-1)D--;else break}if(Y_===w&&[Y_,D0,W_,Z_].indexOf(I)!==-1||[D0,W_].indexOf(w)!==-1&&[D0,R0].indexOf(I)!==-1||[R0,Z_].indexOf(w)!==-1&&I===R0||AB.indexOf(w)!==-1&&[lB,ym].indexOf(I)!==-1||AB.indexOf(I)!==-1&&w===vm||kh.indexOf(w)!==-1&&kh.indexOf(I)!==-1||w===Hf&&kh.indexOf(I)!==-1||kh.concat(BA).indexOf(w)!==-1&&I===Am&&b6.indexOf(e[o])===-1||kh.concat(BA).indexOf(I)!==-1&&w===cm)return di;if(w===g1&&I===g1){for(var P=i[d],W=1;P>0&&(P--,r[P]===g1);)W++;if(W%2!==0)return di}return w===t0&&I===r0?di:n0},F6=function(e,r){r||(r={lineBreak:"normal",wordBreak:"normal"});var i=E6(e,r.lineBreak),a=i[0],u=i[1],d=i[2];(r.wordBreak==="break-all"||r.wordBreak==="break-word")&&(u=u.map(function(o){return[BA,Zd,eI].indexOf(o)!==-1?Om:o}));var m=r.wordBreak==="keep-all"?d.map(function(o,w){return o&&e[w]>=19968&&e[w]<=40959}):void 0;return[a,u,m]},I6=(function(){function e(r,i,a,u){this.codePoints=r,this.required=i===tI,this.start=a,this.end=u}return e.prototype.slice=function(){return Mo.apply(void 0,this.codePoints.slice(this.start,this.end))},e})(),T6=function(e,r){var i=Hy(e),a=F6(i,r),u=a[0],d=a[1],m=a[2],o=i.length,w=0,E=0;return{next:function(){if(E>=o)return{done:!0,value:null};for(var I=di;E<o&&(I=S6(i,d,u,++E,m))===di;);if(I!==di||E===o){var D=new I6(i,I,w,E);return w=E,{value:D,done:!1}}return{done:!0,value:null}}}},P6=1,L6=2,Jm=4,hB=8,ey=10,dB=47,Sm=92,M6=9,k6=32,i0=34,um=61,U6=35,D6=36,R6=37,s0=39,o0=40,hm=41,N6=95,eA=45,Q6=33,O6=60,z6=62,H6=64,j6=91,V6=93,G6=61,K6=123,a0=63,q6=125,fB=124,$6=126,W6=128,pB=65533,v1=42,Yd=43,Z6=44,X6=58,Y6=59,zm=46,J6=0,eQ=8,tQ=11,rQ=14,nQ=31,iQ=127,Zu=-1,nI=48,iI=97,sI=101,sQ=102,oQ=117,aQ=122,oI=65,aI=69,lI=70,lQ=85,cQ=90,Jl=function(e){return e>=nI&&e<=57},AQ=function(e){return e>=55296&&e<=57343},Vf=function(e){return Jl(e)||e>=oI&&e<=lI||e>=iI&&e<=sQ},uQ=function(e){return e>=iI&&e<=aQ},hQ=function(e){return e>=oI&&e<=cQ},dQ=function(e){return uQ(e)||hQ(e)},fQ=function(e){return e>=W6},l0=function(e){return e===ey||e===M6||e===k6},ty=function(e){return dQ(e)||fQ(e)||e===N6},mB=function(e){return ty(e)||Jl(e)||e===eA},pQ=function(e){return e>=J6&&e<=eQ||e===tQ||e>=rQ&&e<=nQ||e===iQ},Ad=function(e,r){return e!==Sm?!1:r!==ey},c0=function(e,r,i){return e===eA?ty(r)||Ad(r,i):ty(e)?!0:!!(e===Sm&&Ad(e,r))},_1=function(e,r,i){return e===Yd||e===eA?Jl(r)?!0:r===zm&&Jl(i):Jl(e===zm?r:e)},mQ=function(e){var r=0,i=1;(e[r]===Yd||e[r]===eA)&&(e[r]===eA&&(i=-1),r++);for(var a=[];Jl(e[r]);)a.push(e[r++]);var u=a.length?parseInt(Mo.apply(void 0,a),10):0;e[r]===zm&&r++;for(var d=[];Jl(e[r]);)d.push(e[r++]);var m=d.length,o=m?parseInt(Mo.apply(void 0,d),10):0;(e[r]===aI||e[r]===sI)&&r++;var w=1;(e[r]===Yd||e[r]===eA)&&(e[r]===eA&&(w=-1),r++);for(var E=[];Jl(e[r]);)E.push(e[r++]);var I=E.length?parseInt(Mo.apply(void 0,E),10):0;return i*(u+o*Math.pow(10,-m))*Math.pow(10,w*I)},gQ={type:2},yQ={type:3},vQ={type:4},_Q={type:13},wQ={type:8},xQ={type:21},bQ={type:9},BQ={type:10},CQ={type:11},EQ={type:12},SQ={type:14},A0={type:23},FQ={type:1},IQ={type:25},TQ={type:24},PQ={type:26},LQ={type:27},MQ={type:28},kQ={type:29},UQ={type:31},tw={type:32},cI=(function(){function e(){this._value=[]}return e.prototype.write=function(r){this._value=this._value.concat(Hy(r))},e.prototype.read=function(){for(var r=[],i=this.consumeToken();i!==tw;)r.push(i),i=this.consumeToken();return r},e.prototype.consumeToken=function(){var r=this.consumeCodePoint();switch(r){case i0:return this.consumeStringToken(i0);case U6:var i=this.peekCodePoint(0),a=this.peekCodePoint(1),u=this.peekCodePoint(2);if(mB(i)||Ad(a,u)){var d=c0(i,a,u)?L6:P6,m=this.consumeName();return{type:5,value:m,flags:d}}break;case D6:if(this.peekCodePoint(0)===um)return this.consumeCodePoint(),_Q;break;case s0:return this.consumeStringToken(s0);case o0:return gQ;case hm:return yQ;case v1:if(this.peekCodePoint(0)===um)return this.consumeCodePoint(),SQ;break;case Yd:if(_1(r,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(r),this.consumeNumericToken();break;case Z6:return vQ;case eA:var o=r,w=this.peekCodePoint(0),E=this.peekCodePoint(1);if(_1(o,w,E))return this.reconsumeCodePoint(r),this.consumeNumericToken();if(c0(o,w,E))return this.reconsumeCodePoint(r),this.consumeIdentLikeToken();if(w===eA&&E===z6)return this.consumeCodePoint(),this.consumeCodePoint(),TQ;break;case zm:if(_1(r,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(r),this.consumeNumericToken();break;case dB:if(this.peekCodePoint(0)===v1)for(this.consumeCodePoint();;){var I=this.consumeCodePoint();if(I===v1&&(I=this.consumeCodePoint(),I===dB))return this.consumeToken();if(I===Zu)return this.consumeToken()}break;case X6:return PQ;case Y6:return LQ;case O6:if(this.peekCodePoint(0)===Q6&&this.peekCodePoint(1)===eA&&this.peekCodePoint(2)===eA)return this.consumeCodePoint(),this.consumeCodePoint(),IQ;break;case H6:var D=this.peekCodePoint(0),O=this.peekCodePoint(1),P=this.peekCodePoint(2);if(c0(D,O,P)){var m=this.consumeName();return{type:7,value:m}}break;case j6:return MQ;case Sm:if(Ad(r,this.peekCodePoint(0)))return this.reconsumeCodePoint(r),this.consumeIdentLikeToken();break;case V6:return kQ;case G6:if(this.peekCodePoint(0)===um)return this.consumeCodePoint(),wQ;break;case K6:return CQ;case q6:return EQ;case oQ:case lQ:var W=this.peekCodePoint(0),z=this.peekCodePoint(1);return W===Yd&&(Vf(z)||z===a0)&&(this.consumeCodePoint(),this.consumeUnicodeRangeToken()),this.reconsumeCodePoint(r),this.consumeIdentLikeToken();case fB:if(this.peekCodePoint(0)===um)return this.consumeCodePoint(),bQ;if(this.peekCodePoint(0)===fB)return this.consumeCodePoint(),xQ;break;case $6:if(this.peekCodePoint(0)===um)return this.consumeCodePoint(),BQ;break;case Zu:return tw}return l0(r)?(this.consumeWhiteSpace(),UQ):Jl(r)?(this.reconsumeCodePoint(r),this.consumeNumericToken()):ty(r)?(this.reconsumeCodePoint(r),this.consumeIdentLikeToken()):{type:6,value:Mo(r)}},e.prototype.consumeCodePoint=function(){var r=this._value.shift();return typeof r>"u"?-1:r},e.prototype.reconsumeCodePoint=function(r){this._value.unshift(r)},e.prototype.peekCodePoint=function(r){return r>=this._value.length?-1:this._value[r]},e.prototype.consumeUnicodeRangeToken=function(){for(var r=[],i=this.consumeCodePoint();Vf(i)&&r.length<6;)r.push(i),i=this.consumeCodePoint();for(var a=!1;i===a0&&r.length<6;)r.push(i),i=this.consumeCodePoint(),a=!0;if(a){var u=parseInt(Mo.apply(void 0,r.map(function(w){return w===a0?nI:w})),16),d=parseInt(Mo.apply(void 0,r.map(function(w){return w===a0?lI:w})),16);return{type:30,start:u,end:d}}var m=parseInt(Mo.apply(void 0,r),16);if(this.peekCodePoint(0)===eA&&Vf(this.peekCodePoint(1))){this.consumeCodePoint(),i=this.consumeCodePoint();for(var o=[];Vf(i)&&o.length<6;)o.push(i),i=this.consumeCodePoint();var d=parseInt(Mo.apply(void 0,o),16);return{type:30,start:m,end:d}}else return{type:30,start:m,end:m}},e.prototype.consumeIdentLikeToken=function(){var r=this.consumeName();return r.toLowerCase()==="url"&&this.peekCodePoint(0)===o0?(this.consumeCodePoint(),this.consumeUrlToken()):this.peekCodePoint(0)===o0?(this.consumeCodePoint(),{type:19,value:r}):{type:20,value:r}},e.prototype.consumeUrlToken=function(){var r=[];if(this.consumeWhiteSpace(),this.peekCodePoint(0)===Zu)return{type:22,value:""};var i=this.peekCodePoint(0);if(i===s0||i===i0){var a=this.consumeStringToken(this.consumeCodePoint());return a.type===0&&(this.consumeWhiteSpace(),this.peekCodePoint(0)===Zu||this.peekCodePoint(0)===hm)?(this.consumeCodePoint(),{type:22,value:a.value}):(this.consumeBadUrlRemnants(),A0)}for(;;){var u=this.consumeCodePoint();if(u===Zu||u===hm)return{type:22,value:Mo.apply(void 0,r)};if(l0(u))return this.consumeWhiteSpace(),this.peekCodePoint(0)===Zu||this.peekCodePoint(0)===hm?(this.consumeCodePoint(),{type:22,value:Mo.apply(void 0,r)}):(this.consumeBadUrlRemnants(),A0);if(u===i0||u===s0||u===o0||pQ(u))return this.consumeBadUrlRemnants(),A0;if(u===Sm)if(Ad(u,this.peekCodePoint(0)))r.push(this.consumeEscapedCodePoint());else return this.consumeBadUrlRemnants(),A0;else r.push(u)}},e.prototype.consumeWhiteSpace=function(){for(;l0(this.peekCodePoint(0));)this.consumeCodePoint()},e.prototype.consumeBadUrlRemnants=function(){for(;;){var r=this.consumeCodePoint();if(r===hm||r===Zu)return;Ad(r,this.peekCodePoint(0))&&this.consumeEscapedCodePoint()}},e.prototype.consumeStringSlice=function(r){for(var i=5e4,a="";r>0;){var u=Math.min(i,r);a+=Mo.apply(void 0,this._value.splice(0,u)),r-=u}return this._value.shift(),a},e.prototype.consumeStringToken=function(r){var i="",a=0;do{var u=this._value[a];if(u===Zu||u===void 0||u===r)return i+=this.consumeStringSlice(a),{type:0,value:i};if(u===ey)return this._value.splice(0,a),FQ;if(u===Sm){var d=this._value[a+1];d!==Zu&&d!==void 0&&(d===ey?(i+=this.consumeStringSlice(a),a=-1,this._value.shift()):Ad(u,d)&&(i+=this.consumeStringSlice(a),i+=Mo(this.consumeEscapedCodePoint()),a=-1))}a++}while(!0)},e.prototype.consumeNumber=function(){var r=[],i=Jm,a=this.peekCodePoint(0);for((a===Yd||a===eA)&&r.push(this.consumeCodePoint());Jl(this.peekCodePoint(0));)r.push(this.consumeCodePoint());a=this.peekCodePoint(0);var u=this.peekCodePoint(1);if(a===zm&&Jl(u))for(r.push(this.consumeCodePoint(),this.consumeCodePoint()),i=hB;Jl(this.peekCodePoint(0));)r.push(this.consumeCodePoint());a=this.peekCodePoint(0),u=this.peekCodePoint(1);var d=this.peekCodePoint(2);if((a===aI||a===sI)&&((u===Yd||u===eA)&&Jl(d)||Jl(u)))for(r.push(this.consumeCodePoint(),this.consumeCodePoint()),i=hB;Jl(this.peekCodePoint(0));)r.push(this.consumeCodePoint());return[mQ(r),i]},e.prototype.consumeNumericToken=function(){var r=this.consumeNumber(),i=r[0],a=r[1],u=this.peekCodePoint(0),d=this.peekCodePoint(1),m=this.peekCodePoint(2);if(c0(u,d,m)){var o=this.consumeName();return{type:15,number:i,flags:a,unit:o}}return u===R6?(this.consumeCodePoint(),{type:16,number:i,flags:a}):{type:17,number:i,flags:a}},e.prototype.consumeEscapedCodePoint=function(){var r=this.consumeCodePoint();if(Vf(r)){for(var i=Mo(r);Vf(this.peekCodePoint(0))&&i.length<6;)i+=Mo(this.consumeCodePoint());l0(this.peekCodePoint(0))&&this.consumeCodePoint();var a=parseInt(i,16);return a===0||AQ(a)||a>1114111?pB:a}return r===Zu?pB:r},e.prototype.consumeName=function(){for(var r="";;){var i=this.consumeCodePoint();if(mB(i))r+=Mo(i);else if(Ad(i,this.peekCodePoint(0)))r+=Mo(this.consumeEscapedCodePoint());else return this.reconsumeCodePoint(i),r}},e})(),AI=(function(){function e(r){this._tokens=r}return e.create=function(r){var i=new cI;return i.write(r),new e(i.read())},e.parseValue=function(r){return e.create(r).parseComponentValue()},e.parseValues=function(r){return e.create(r).parseComponentValues()},e.prototype.parseComponentValue=function(){for(var r=this.consumeToken();r.type===31;)r=this.consumeToken();if(r.type===32)throw new SyntaxError("Error parsing CSS component value, unexpected EOF");this.reconsumeToken(r);var i=this.consumeComponentValue();do r=this.consumeToken();while(r.type===31);if(r.type===32)return i;throw new SyntaxError("Error parsing CSS component value, multiple values found when expecting only one")},e.prototype.parseComponentValues=function(){for(var r=[];;){var i=this.consumeComponentValue();if(i.type===32)return r;r.push(i),r.push()}},e.prototype.consumeComponentValue=function(){var r=this.consumeToken();switch(r.type){case 11:case 28:case 2:return this.consumeSimpleBlock(r.type);case 19:return this.consumeFunction(r)}return r},e.prototype.consumeSimpleBlock=function(r){for(var i={type:r,values:[]},a=this.consumeToken();;){if(a.type===32||RQ(a,r))return i;this.reconsumeToken(a),i.values.push(this.consumeComponentValue()),a=this.consumeToken()}},e.prototype.consumeFunction=function(r){for(var i={name:r.value,values:[],type:18};;){var a=this.consumeToken();if(a.type===32||a.type===3)return i;this.reconsumeToken(a),i.values.push(this.consumeComponentValue())}},e.prototype.consumeToken=function(){var r=this._tokens.shift();return typeof r>"u"?tw:r},e.prototype.reconsumeToken=function(r){this._tokens.unshift(r)},e})(),eg=function(e){return e.type===15},Ep=function(e){return e.type===17},us=function(e){return e.type===20},DQ=function(e){return e.type===0},rw=function(e,r){return us(e)&&e.value===r},uI=function(e){return e.type!==31},vp=function(e){return e.type!==31&&e.type!==4},oh=function(e){var r=[],i=[];return e.forEach(function(a){if(a.type===4){if(i.length===0)throw new Error("Error parsing function args, zero tokens for arg");r.push(i),i=[];return}a.type!==31&&i.push(a)}),i.length&&r.push(i),r},RQ=function(e,r){return r===11&&e.type===12||r===28&&e.type===29?!0:r===2&&e.type===3},bd=function(e){return e.type===17||e.type===15},oa=function(e){return e.type===16||bd(e)},hI=function(e){return e.length>1?[e[0],e[1]]:[e[0]]},Bl={type:17,number:0,flags:Jm},ox={type:16,number:50,flags:Jm},dd={type:16,number:100,flags:Jm},_m=function(e,r,i){var a=e[0],u=e[1];return[Ms(a,r),Ms(typeof u<"u"?u:a,i)]},Ms=function(e,r){if(e.type===16)return e.number/100*r;if(eg(e))switch(e.unit){case"rem":case"em":return 16*e.number;case"px":default:return e.number}return e.number},dI="deg",fI="grad",pI="rad",mI="turn",jy={name:"angle",parse:function(e,r){if(r.type===15)switch(r.unit){case dI:return Math.PI*r.number/180;case fI:return Math.PI/200*r.number;case pI:return r.number;case mI:return Math.PI*2*r.number}throw new Error("Unsupported angle type")}},gI=function(e){return e.type===15&&(e.unit===dI||e.unit===fI||e.unit===pI||e.unit===mI)},yI=function(e){var r=e.filter(us).map(function(i){return i.value}).join(" ");switch(r){case"to bottom right":case"to right bottom":case"left top":case"top left":return[Bl,Bl];case"to top":case"bottom":return ru(0);case"to bottom left":case"to left bottom":case"right top":case"top right":return[Bl,dd];case"to right":case"left":return ru(90);case"to top left":case"to left top":case"right bottom":case"bottom right":return[dd,dd];case"to bottom":case"top":return ru(180);case"to top right":case"to right top":case"left bottom":case"bottom left":return[dd,Bl];case"to left":case"right":return ru(270)}return 0},ru=function(e){return Math.PI*e/180},yd={name:"color",parse:function(e,r){if(r.type===18){var i=NQ[r.name];if(typeof i>"u")throw new Error('Attempting to parse an unsupported color function "'+r.name+'"');return i(e,r.values)}if(r.type===5){if(r.value.length===3){var a=r.value.substring(0,1),u=r.value.substring(1,2),d=r.value.substring(2,3);return fd(parseInt(a+a,16),parseInt(u+u,16),parseInt(d+d,16),1)}if(r.value.length===4){var a=r.value.substring(0,1),u=r.value.substring(1,2),d=r.value.substring(2,3),m=r.value.substring(3,4);return fd(parseInt(a+a,16),parseInt(u+u,16),parseInt(d+d,16),parseInt(m+m,16)/255)}if(r.value.length===6){var a=r.value.substring(0,2),u=r.value.substring(2,4),d=r.value.substring(4,6);return fd(parseInt(a,16),parseInt(u,16),parseInt(d,16),1)}if(r.value.length===8){var a=r.value.substring(0,2),u=r.value.substring(2,4),d=r.value.substring(4,6),m=r.value.substring(6,8);return fd(parseInt(a,16),parseInt(u,16),parseInt(d,16),parseInt(m,16)/255)}}if(r.type===20){var o=Nh[r.value.toUpperCase()];if(typeof o<"u")return o}return Nh.TRANSPARENT}},vd=function(e){return(255&e)===0},tl=function(e){var r=255&e,i=255&e>>8,a=255&e>>16,u=255&e>>24;return r<255?"rgba("+u+","+a+","+i+","+r/255+")":"rgb("+u+","+a+","+i+")"},fd=function(e,r,i,a){return(e<<24|r<<16|i<<8|Math.round(a*255)<<0)>>>0},gB=function(e,r){if(e.type===17)return e.number;if(e.type===16){var i=r===3?1:255;return r===3?e.number/100*i:Math.round(e.number/100*i)}return 0},yB=function(e,r){var i=r.filter(vp);if(i.length===3){var a=i.map(gB),u=a[0],d=a[1],m=a[2];return fd(u,d,m,1)}if(i.length===4){var o=i.map(gB),u=o[0],d=o[1],m=o[2],w=o[3];return fd(u,d,m,w)}return 0};function w1(e,r,i){return i<0&&(i+=1),i>=1&&(i-=1),i<1/6?(r-e)*i*6+e:i<1/2?r:i<2/3?(r-e)*6*(2/3-i)+e:e}var vB=function(e,r){var i=r.filter(vp),a=i[0],u=i[1],d=i[2],m=i[3],o=(a.type===17?ru(a.number):jy.parse(e,a))/(Math.PI*2),w=oa(u)?u.number/100:0,E=oa(d)?d.number/100:0,I=typeof m<"u"&&oa(m)?Ms(m,1):1;if(w===0)return fd(E*255,E*255,E*255,1);var D=E<=.5?E*(w+1):E+w-E*w,O=E*2-D,P=w1(O,D,o+1/3),W=w1(O,D,o),z=w1(O,D,o-1/3);return fd(P*255,W*255,z*255,I)},NQ={hsl:vB,hsla:vB,rgb:yB,rgba:yB},Fm=function(e,r){return yd.parse(e,AI.create(r).parseComponentValue())},Nh={ALICEBLUE:4042850303,ANTIQUEWHITE:4209760255,AQUA:16777215,AQUAMARINE:2147472639,AZURE:4043309055,BEIGE:4126530815,BISQUE:4293182719,BLACK:255,BLANCHEDALMOND:4293643775,BLUE:65535,BLUEVIOLET:2318131967,BROWN:2771004159,BURLYWOOD:3736635391,CADETBLUE:1604231423,CHARTREUSE:2147418367,CHOCOLATE:3530104575,CORAL:4286533887,CORNFLOWERBLUE:1687547391,CORNSILK:4294499583,CRIMSON:3692313855,CYAN:16777215,DARKBLUE:35839,DARKCYAN:9145343,DARKGOLDENROD:3095837695,DARKGRAY:2846468607,DARKGREEN:6553855,DARKGREY:2846468607,DARKKHAKI:3182914559,DARKMAGENTA:2332068863,DARKOLIVEGREEN:1433087999,DARKORANGE:4287365375,DARKORCHID:2570243327,DARKRED:2332033279,DARKSALMON:3918953215,DARKSEAGREEN:2411499519,DARKSLATEBLUE:1211993087,DARKSLATEGRAY:793726975,DARKSLATEGREY:793726975,DARKTURQUOISE:13554175,DARKVIOLET:2483082239,DEEPPINK:4279538687,DEEPSKYBLUE:12582911,DIMGRAY:1768516095,DIMGREY:1768516095,DODGERBLUE:512819199,FIREBRICK:2988581631,FLORALWHITE:4294635775,FORESTGREEN:579543807,FUCHSIA:4278255615,GAINSBORO:3705462015,GHOSTWHITE:4177068031,GOLD:4292280575,GOLDENROD:3668254975,GRAY:2155905279,GREEN:8388863,GREENYELLOW:2919182335,GREY:2155905279,HONEYDEW:4043305215,HOTPINK:4285117695,INDIANRED:3445382399,INDIGO:1258324735,IVORY:4294963455,KHAKI:4041641215,LAVENDER:3873897215,LAVENDERBLUSH:4293981695,LAWNGREEN:2096890111,LEMONCHIFFON:4294626815,LIGHTBLUE:2916673279,LIGHTCORAL:4034953471,LIGHTCYAN:3774873599,LIGHTGOLDENRODYELLOW:4210742015,LIGHTGRAY:3553874943,LIGHTGREEN:2431553791,LIGHTGREY:3553874943,LIGHTPINK:4290167295,LIGHTSALMON:4288707327,LIGHTSEAGREEN:548580095,LIGHTSKYBLUE:2278488831,LIGHTSLATEGRAY:2005441023,LIGHTSLATEGREY:2005441023,LIGHTSTEELBLUE:2965692159,LIGHTYELLOW:4294959359,LIME:16711935,LIMEGREEN:852308735,LINEN:4210091775,MAGENTA:4278255615,MAROON:2147483903,MEDIUMAQUAMARINE:1724754687,MEDIUMBLUE:52735,MEDIUMORCHID:3126187007,MEDIUMPURPLE:2473647103,MEDIUMSEAGREEN:1018393087,MEDIUMSLATEBLUE:2070474495,MEDIUMSPRINGGREEN:16423679,MEDIUMTURQUOISE:1221709055,MEDIUMVIOLETRED:3340076543,MIDNIGHTBLUE:421097727,MINTCREAM:4127193855,MISTYROSE:4293190143,MOCCASIN:4293178879,NAVAJOWHITE:4292783615,NAVY:33023,OLDLACE:4260751103,OLIVE:2155872511,OLIVEDRAB:1804477439,ORANGE:4289003775,ORANGERED:4282712319,ORCHID:3664828159,PALEGOLDENROD:4008225535,PALEGREEN:2566625535,PALETURQUOISE:2951671551,PALEVIOLETRED:3681588223,PAPAYAWHIP:4293907967,PEACHPUFF:4292524543,PERU:3448061951,PINK:4290825215,PLUM:3718307327,POWDERBLUE:2967529215,PURPLE:2147516671,REBECCAPURPLE:1714657791,RED:4278190335,ROSYBROWN:3163525119,ROYALBLUE:1097458175,SADDLEBROWN:2336560127,SALMON:4202722047,SANDYBROWN:4104413439,SEAGREEN:780883967,SEASHELL:4294307583,SIENNA:2689740287,SILVER:3233857791,SKYBLUE:2278484991,SLATEBLUE:1784335871,SLATEGRAY:1887473919,SLATEGREY:1887473919,SNOW:4294638335,SPRINGGREEN:16744447,STEELBLUE:1182971135,TAN:3535047935,TEAL:8421631,THISTLE:3636451583,TOMATO:4284696575,TRANSPARENT:0,TURQUOISE:1088475391,VIOLET:4001558271,WHEAT:4125012991,WHITE:4294967295,WHITESMOKE:4126537215,YELLOW:4294902015,YELLOWGREEN:2597139199},QQ={name:"background-clip",initialValue:"border-box",prefix:!1,type:1,parse:function(e,r){return r.map(function(i){if(us(i))switch(i.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},OQ={name:"background-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},Vy=function(e,r){var i=yd.parse(e,r[0]),a=r[1];return a&&oa(a)?{color:i,stop:a}:{color:i,stop:null}},_B=function(e,r){var i=e[0],a=e[e.length-1];i.stop===null&&(i.stop=Bl),a.stop===null&&(a.stop=dd);for(var u=[],d=0,m=0;m<e.length;m++){var o=e[m].stop;if(o!==null){var w=Ms(o,r);w>d?u.push(w):u.push(d),d=w}else u.push(null)}for(var E=null,m=0;m<u.length;m++){var I=u[m];if(I===null)E===null&&(E=m);else if(E!==null){for(var D=m-E,O=u[E-1],P=(I-O)/(D+1),W=1;W<=D;W++)u[E+W-1]=P*W;E=null}}return e.map(function(z,H){var Z=z.color;return{color:Z,stop:Math.max(Math.min(1,u[H]/r),0)}})},zQ=function(e,r,i){var a=r/2,u=i/2,d=Ms(e[0],r)-a,m=u-Ms(e[1],i);return(Math.atan2(m,d)+Math.PI*2)%(Math.PI*2)},HQ=function(e,r,i){var a=typeof e=="number"?e:zQ(e,r,i),u=Math.abs(r*Math.sin(a))+Math.abs(i*Math.cos(a)),d=r/2,m=i/2,o=u/2,w=Math.sin(a-Math.PI/2)*o,E=Math.cos(a-Math.PI/2)*o;return[u,d-E,d+E,m-w,m+w]},Su=function(e,r){return Math.sqrt(e*e+r*r)},wB=function(e,r,i,a,u){var d=[[0,0],[0,r],[e,0],[e,r]];return d.reduce(function(m,o){var w=o[0],E=o[1],I=Su(i-w,a-E);return(u?I<m.optimumDistance:I>m.optimumDistance)?{optimumCorner:o,optimumDistance:I}:m},{optimumDistance:u?1/0:-1/0,optimumCorner:null}).optimumCorner},jQ=function(e,r,i,a,u){var d=0,m=0;switch(e.size){case 0:e.shape===0?d=m=Math.min(Math.abs(r),Math.abs(r-a),Math.abs(i),Math.abs(i-u)):e.shape===1&&(d=Math.min(Math.abs(r),Math.abs(r-a)),m=Math.min(Math.abs(i),Math.abs(i-u)));break;case 2:if(e.shape===0)d=m=Math.min(Su(r,i),Su(r,i-u),Su(r-a,i),Su(r-a,i-u));else if(e.shape===1){var o=Math.min(Math.abs(i),Math.abs(i-u))/Math.min(Math.abs(r),Math.abs(r-a)),w=wB(a,u,r,i,!0),E=w[0],I=w[1];d=Su(E-r,(I-i)/o),m=o*d}break;case 1:e.shape===0?d=m=Math.max(Math.abs(r),Math.abs(r-a),Math.abs(i),Math.abs(i-u)):e.shape===1&&(d=Math.max(Math.abs(r),Math.abs(r-a)),m=Math.max(Math.abs(i),Math.abs(i-u)));break;case 3:if(e.shape===0)d=m=Math.max(Su(r,i),Su(r,i-u),Su(r-a,i),Su(r-a,i-u));else if(e.shape===1){var o=Math.max(Math.abs(i),Math.abs(i-u))/Math.max(Math.abs(r),Math.abs(r-a)),D=wB(a,u,r,i,!1),E=D[0],I=D[1];d=Su(E-r,(I-i)/o),m=o*d}break}return Array.isArray(e.size)&&(d=Ms(e.size[0],a),m=e.size.length===2?Ms(e.size[1],u):d),[d,m]},VQ=function(e,r){var i=ru(180),a=[];return oh(r).forEach(function(u,d){if(d===0){var m=u[0];if(m.type===20&&m.value==="to"){i=yI(u);return}else if(gI(m)){i=jy.parse(e,m);return}}var o=Vy(e,u);a.push(o)}),{angle:i,stops:a,type:1}},u0=function(e,r){var i=ru(180),a=[];return oh(r).forEach(function(u,d){if(d===0){var m=u[0];if(m.type===20&&["top","left","right","bottom"].indexOf(m.value)!==-1){i=yI(u);return}else if(gI(m)){i=(jy.parse(e,m)+ru(270))%ru(360);return}}var o=Vy(e,u);a.push(o)}),{angle:i,stops:a,type:1}},GQ=function(e,r){var i=ru(180),a=[],u=1,d=0,m=3,o=[];return oh(r).forEach(function(w,E){var I=w[0];if(E===0){if(us(I)&&I.value==="linear"){u=1;return}else if(us(I)&&I.value==="radial"){u=2;return}}if(I.type===18){if(I.name==="from"){var D=yd.parse(e,I.values[0]);a.push({stop:Bl,color:D})}else if(I.name==="to"){var D=yd.parse(e,I.values[0]);a.push({stop:dd,color:D})}else if(I.name==="color-stop"){var O=I.values.filter(vp);if(O.length===2){var D=yd.parse(e,O[1]),P=O[0];Ep(P)&&a.push({stop:{type:16,number:P.number*100,flags:P.flags},color:D})}}}}),u===1?{angle:(i+ru(180))%ru(360),stops:a,type:u}:{size:m,shape:d,stops:a,position:o,type:u}},vI="closest-side",_I="farthest-side",wI="closest-corner",xI="farthest-corner",bI="circle",BI="ellipse",CI="cover",EI="contain",KQ=function(e,r){var i=0,a=3,u=[],d=[];return oh(r).forEach(function(m,o){var w=!0;if(o===0){var E=!1;w=m.reduce(function(D,O){if(E)if(us(O))switch(O.value){case"center":return d.push(ox),D;case"top":case"left":return d.push(Bl),D;case"right":case"bottom":return d.push(dd),D}else(oa(O)||bd(O))&&d.push(O);else if(us(O))switch(O.value){case bI:return i=0,!1;case BI:return i=1,!1;case"at":return E=!0,!1;case vI:return a=0,!1;case CI:case _I:return a=1,!1;case EI:case wI:return a=2,!1;case xI:return a=3,!1}else if(bd(O)||oa(O))return Array.isArray(a)||(a=[]),a.push(O),!1;return D},w)}if(w){var I=Vy(e,m);u.push(I)}}),{size:a,shape:i,stops:u,position:d,type:2}},h0=function(e,r){var i=0,a=3,u=[],d=[];return oh(r).forEach(function(m,o){var w=!0;if(o===0?w=m.reduce(function(I,D){if(us(D))switch(D.value){case"center":return d.push(ox),!1;case"top":case"left":return d.push(Bl),!1;case"right":case"bottom":return d.push(dd),!1}else if(oa(D)||bd(D))return d.push(D),!1;return I},w):o===1&&(w=m.reduce(function(I,D){if(us(D))switch(D.value){case bI:return i=0,!1;case BI:return i=1,!1;case EI:case vI:return a=0,!1;case _I:return a=1,!1;case wI:return a=2,!1;case CI:case xI:return a=3,!1}else if(bd(D)||oa(D))return Array.isArray(a)||(a=[]),a.push(D),!1;return I},w)),w){var E=Vy(e,m);u.push(E)}}),{size:a,shape:i,stops:u,position:d,type:2}},qQ=function(e){return e.type===1},$Q=function(e){return e.type===2},ax={name:"image",parse:function(e,r){if(r.type===22){var i={url:r.value,type:0};return e.cache.addImage(r.value),i}if(r.type===18){var a=SI[r.name];if(typeof a>"u")throw new Error('Attempting to parse an unsupported image function "'+r.name+'"');return a(e,r.values)}throw new Error("Unsupported image type "+r.type)}};function WQ(e){return!(e.type===20&&e.value==="none")&&(e.type!==18||!!SI[e.name])}var SI={"linear-gradient":VQ,"-moz-linear-gradient":u0,"-ms-linear-gradient":u0,"-o-linear-gradient":u0,"-webkit-linear-gradient":u0,"radial-gradient":KQ,"-moz-radial-gradient":h0,"-ms-radial-gradient":h0,"-o-radial-gradient":h0,"-webkit-radial-gradient":h0,"-webkit-gradient":GQ},ZQ={name:"background-image",initialValue:"none",type:1,prefix:!1,parse:function(e,r){if(r.length===0)return[];var i=r[0];return i.type===20&&i.value==="none"?[]:r.filter(function(a){return vp(a)&&WQ(a)}).map(function(a){return ax.parse(e,a)})}},XQ={name:"background-origin",initialValue:"border-box",prefix:!1,type:1,parse:function(e,r){return r.map(function(i){if(us(i))switch(i.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},YQ={name:"background-position",initialValue:"0% 0%",type:1,prefix:!1,parse:function(e,r){return oh(r).map(function(i){return i.filter(oa)}).map(hI)}},JQ={name:"background-repeat",initialValue:"repeat",prefix:!1,type:1,parse:function(e,r){return oh(r).map(function(i){return i.filter(us).map(function(a){return a.value}).join(" ")}).map(eO)}},eO=function(e){switch(e){case"no-repeat":return 1;case"repeat-x":case"repeat no-repeat":return 2;case"repeat-y":case"no-repeat repeat":return 3;case"repeat":default:return 0}},up;(function(e){e.AUTO="auto",e.CONTAIN="contain",e.COVER="cover"})(up||(up={}));var tO={name:"background-size",initialValue:"0",prefix:!1,type:1,parse:function(e,r){return oh(r).map(function(i){return i.filter(rO)})}},rO=function(e){return us(e)||oa(e)},Gy=function(e){return{name:"border-"+e+"-color",initialValue:"transparent",prefix:!1,type:3,format:"color"}},nO=Gy("top"),iO=Gy("right"),sO=Gy("bottom"),oO=Gy("left"),Ky=function(e){return{name:"border-radius-"+e,initialValue:"0 0",prefix:!1,type:1,parse:function(r,i){return hI(i.filter(oa))}}},aO=Ky("top-left"),lO=Ky("top-right"),cO=Ky("bottom-right"),AO=Ky("bottom-left"),qy=function(e){return{name:"border-"+e+"-style",initialValue:"solid",prefix:!1,type:2,parse:function(r,i){switch(i){case"none":return 0;case"dashed":return 2;case"dotted":return 3;case"double":return 4}return 1}}},uO=qy("top"),hO=qy("right"),dO=qy("bottom"),fO=qy("left"),$y=function(e){return{name:"border-"+e+"-width",initialValue:"0",type:0,prefix:!1,parse:function(r,i){return eg(i)?i.number:0}}},pO=$y("top"),mO=$y("right"),gO=$y("bottom"),yO=$y("left"),vO={name:"color",initialValue:"transparent",prefix:!1,type:3,format:"color"},_O={name:"direction",initialValue:"ltr",prefix:!1,type:2,parse:function(e,r){switch(r){case"rtl":return 1;case"ltr":default:return 0}}},wO={name:"display",initialValue:"inline-block",prefix:!1,type:1,parse:function(e,r){return r.filter(us).reduce(function(i,a){return i|xO(a.value)},0)}},xO=function(e){switch(e){case"block":case"-webkit-box":return 2;case"inline":return 4;case"run-in":return 8;case"flow":return 16;case"flow-root":return 32;case"table":return 64;case"flex":case"-webkit-flex":return 128;case"grid":case"-ms-grid":return 256;case"ruby":return 512;case"subgrid":return 1024;case"list-item":return 2048;case"table-row-group":return 4096;case"table-header-group":return 8192;case"table-footer-group":return 16384;case"table-row":return 32768;case"table-cell":return 65536;case"table-column-group":return 131072;case"table-column":return 262144;case"table-caption":return 524288;case"ruby-base":return 1048576;case"ruby-text":return 2097152;case"ruby-base-container":return 4194304;case"ruby-text-container":return 8388608;case"contents":return 16777216;case"inline-block":return 33554432;case"inline-list-item":return 67108864;case"inline-table":return 134217728;case"inline-flex":return 268435456;case"inline-grid":return 536870912}return 0},bO={name:"float",initialValue:"none",prefix:!1,type:2,parse:function(e,r){switch(r){case"left":return 1;case"right":return 2;case"inline-start":return 3;case"inline-end":return 4}return 0}},BO={name:"letter-spacing",initialValue:"0",prefix:!1,type:0,parse:function(e,r){return r.type===20&&r.value==="normal"?0:r.type===17||r.type===15?r.number:0}},ry;(function(e){e.NORMAL="normal",e.STRICT="strict"})(ry||(ry={}));var CO={name:"line-break",initialValue:"normal",prefix:!1,type:2,parse:function(e,r){switch(r){case"strict":return ry.STRICT;case"normal":default:return ry.NORMAL}}},EO={name:"line-height",initialValue:"normal",prefix:!1,type:4},xB=function(e,r){return us(e)&&e.value==="normal"?1.2*r:e.type===17?r*e.number:oa(e)?Ms(e,r):r},SO={name:"list-style-image",initialValue:"none",type:0,prefix:!1,parse:function(e,r){return r.type===20&&r.value==="none"?null:ax.parse(e,r)}},FO={name:"list-style-position",initialValue:"outside",prefix:!1,type:2,parse:function(e,r){switch(r){case"inside":return 0;case"outside":default:return 1}}},nw={name:"list-style-type",initialValue:"none",prefix:!1,type:2,parse:function(e,r){switch(r){case"disc":return 0;case"circle":return 1;case"square":return 2;case"decimal":return 3;case"cjk-decimal":return 4;case"decimal-leading-zero":return 5;case"lower-roman":return 6;case"upper-roman":return 7;case"lower-greek":return 8;case"lower-alpha":return 9;case"upper-alpha":return 10;case"arabic-indic":return 11;case"armenian":return 12;case"bengali":return 13;case"cambodian":return 14;case"cjk-earthly-branch":return 15;case"cjk-heavenly-stem":return 16;case"cjk-ideographic":return 17;case"devanagari":return 18;case"ethiopic-numeric":return 19;case"georgian":return 20;case"gujarati":return 21;case"gurmukhi":return 22;case"hebrew":return 22;case"hiragana":return 23;case"hiragana-iroha":return 24;case"japanese-formal":return 25;case"japanese-informal":return 26;case"kannada":return 27;case"katakana":return 28;case"katakana-iroha":return 29;case"khmer":return 30;case"korean-hangul-formal":return 31;case"korean-hanja-formal":return 32;case"korean-hanja-informal":return 33;case"lao":return 34;case"lower-armenian":return 35;case"malayalam":return 36;case"mongolian":return 37;case"myanmar":return 38;case"oriya":return 39;case"persian":return 40;case"simp-chinese-formal":return 41;case"simp-chinese-informal":return 42;case"tamil":return 43;case"telugu":return 44;case"thai":return 45;case"tibetan":return 46;case"trad-chinese-formal":return 47;case"trad-chinese-informal":return 48;case"upper-armenian":return 49;case"disclosure-open":return 50;case"disclosure-closed":return 51;case"none":default:return-1}}},Wy=function(e){return{name:"margin-"+e,initialValue:"0",prefix:!1,type:4}},IO=Wy("top"),TO=Wy("right"),PO=Wy("bottom"),LO=Wy("left"),MO={name:"overflow",initialValue:"visible",prefix:!1,type:1,parse:function(e,r){return r.filter(us).map(function(i){switch(i.value){case"hidden":return 1;case"scroll":return 2;case"clip":return 3;case"auto":return 4;case"visible":default:return 0}})}},kO={name:"overflow-wrap",initialValue:"normal",prefix:!1,type:2,parse:function(e,r){switch(r){case"break-word":return"break-word";case"normal":default:return"normal"}}},Zy=function(e){return{name:"padding-"+e,initialValue:"0",prefix:!1,type:3,format:"length-percentage"}},UO=Zy("top"),DO=Zy("right"),RO=Zy("bottom"),NO=Zy("left"),QO={name:"text-align",initialValue:"left",prefix:!1,type:2,parse:function(e,r){switch(r){case"right":return 2;case"center":case"justify":return 1;case"left":default:return 0}}},OO={name:"position",initialValue:"static",prefix:!1,type:2,parse:function(e,r){switch(r){case"relative":return 1;case"absolute":return 2;case"fixed":return 3;case"sticky":return 4}return 0}},zO={name:"text-shadow",initialValue:"none",type:1,prefix:!1,parse:function(e,r){return r.length===1&&rw(r[0],"none")?[]:oh(r).map(function(i){for(var a={color:Nh.TRANSPARENT,offsetX:Bl,offsetY:Bl,blur:Bl},u=0,d=0;d<i.length;d++){var m=i[d];bd(m)?(u===0?a.offsetX=m:u===1?a.offsetY=m:a.blur=m,u++):a.color=yd.parse(e,m)}return a})}},HO={name:"text-transform",initialValue:"none",prefix:!1,type:2,parse:function(e,r){switch(r){case"uppercase":return 2;case"lowercase":return 1;case"capitalize":return 3}return 0}},jO={name:"transform",initialValue:"none",prefix:!0,type:0,parse:function(e,r){if(r.type===20&&r.value==="none")return null;if(r.type===18){var i=KO[r.name];if(typeof i>"u")throw new Error('Attempting to parse an unsupported transform function "'+r.name+'"');return i(r.values)}return null}},VO=function(e){var r=e.filter(function(i){return i.type===17}).map(function(i){return i.number});return r.length===6?r:null},GO=function(e){var r=e.filter(function(w){return w.type===17}).map(function(w){return w.number}),i=r[0],a=r[1];r[2],r[3];var u=r[4],d=r[5];r[6],r[7],r[8],r[9],r[10],r[11];var m=r[12],o=r[13];return r[14],r[15],r.length===16?[i,a,u,d,m,o]:null},KO={matrix:VO,matrix3d:GO},bB={type:16,number:50,flags:Jm},qO=[bB,bB],$O={name:"transform-origin",initialValue:"50% 50%",prefix:!0,type:1,parse:function(e,r){var i=r.filter(oa);return i.length!==2?qO:[i[0],i[1]]}},WO={name:"visible",initialValue:"none",prefix:!1,type:2,parse:function(e,r){switch(r){case"hidden":return 1;case"collapse":return 2;case"visible":default:return 0}}},Im;(function(e){e.NORMAL="normal",e.BREAK_ALL="break-all",e.KEEP_ALL="keep-all"})(Im||(Im={}));var ZO={name:"word-break",initialValue:"normal",prefix:!1,type:2,parse:function(e,r){switch(r){case"break-all":return Im.BREAK_ALL;case"keep-all":return Im.KEEP_ALL;case"normal":default:return Im.NORMAL}}},XO={name:"z-index",initialValue:"auto",prefix:!1,type:0,parse:function(e,r){if(r.type===20)return{auto:!0,order:0};if(Ep(r))return{auto:!1,order:r.number};throw new Error("Invalid z-index number parsed")}},FI={name:"time",parse:function(e,r){if(r.type===15)switch(r.unit.toLowerCase()){case"s":return 1e3*r.number;case"ms":return r.number}throw new Error("Unsupported time type")}},YO={name:"opacity",initialValue:"1",type:0,prefix:!1,parse:function(e,r){return Ep(r)?r.number:1}},JO={name:"text-decoration-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},e8={name:"text-decoration-line",initialValue:"none",prefix:!1,type:1,parse:function(e,r){return r.filter(us).map(function(i){switch(i.value){case"underline":return 1;case"overline":return 2;case"line-through":return 3;case"none":return 4}return 0}).filter(function(i){return i!==0})}},t8={name:"font-family",initialValue:"",prefix:!1,type:1,parse:function(e,r){var i=[],a=[];return r.forEach(function(u){switch(u.type){case 20:case 0:i.push(u.value);break;case 17:i.push(u.number.toString());break;case 4:a.push(i.join(" ")),i.length=0;break}}),i.length&&a.push(i.join(" ")),a.map(function(u){return u.indexOf(" ")===-1?u:"'"+u+"'"})}},r8={name:"font-size",initialValue:"0",prefix:!1,type:3,format:"length"},n8={name:"font-weight",initialValue:"normal",type:0,prefix:!1,parse:function(e,r){if(Ep(r))return r.number;if(us(r))switch(r.value){case"bold":return 700;case"normal":default:return 400}return 400}},i8={name:"font-variant",initialValue:"none",type:1,prefix:!1,parse:function(e,r){return r.filter(us).map(function(i){return i.value})}},s8={name:"font-style",initialValue:"normal",prefix:!1,type:2,parse:function(e,r){switch(r){case"oblique":return"oblique";case"italic":return"italic";case"normal":default:return"normal"}}},ba=function(e,r){return(e&r)!==0},o8={name:"content",initialValue:"none",type:1,prefix:!1,parse:function(e,r){if(r.length===0)return[];var i=r[0];return i.type===20&&i.value==="none"?[]:r}},a8={name:"counter-increment",initialValue:"none",prefix:!0,type:1,parse:function(e,r){if(r.length===0)return null;var i=r[0];if(i.type===20&&i.value==="none")return null;for(var a=[],u=r.filter(uI),d=0;d<u.length;d++){var m=u[d],o=u[d+1];if(m.type===20){var w=o&&Ep(o)?o.number:1;a.push({counter:m.value,increment:w})}}return a}},l8={name:"counter-reset",initialValue:"none",prefix:!0,type:1,parse:function(e,r){if(r.length===0)return[];for(var i=[],a=r.filter(uI),u=0;u<a.length;u++){var d=a[u],m=a[u+1];if(us(d)&&d.value!=="none"){var o=m&&Ep(m)?m.number:0;i.push({counter:d.value,reset:o})}}return i}},c8={name:"duration",initialValue:"0s",prefix:!1,type:1,parse:function(e,r){return r.filter(eg).map(function(i){return FI.parse(e,i)})}},A8={name:"quotes",initialValue:"none",prefix:!0,type:1,parse:function(e,r){if(r.length===0)return null;var i=r[0];if(i.type===20&&i.value==="none")return null;var a=[],u=r.filter(DQ);if(u.length%2!==0)return null;for(var d=0;d<u.length;d+=2){var m=u[d].value,o=u[d+1].value;a.push({open:m,close:o})}return a}},BB=function(e,r,i){if(!e)return"";var a=e[Math.min(r,e.length-1)];return a?i?a.open:a.close:""},u8={name:"box-shadow",initialValue:"none",type:1,prefix:!1,parse:function(e,r){return r.length===1&&rw(r[0],"none")?[]:oh(r).map(function(i){for(var a={color:255,offsetX:Bl,offsetY:Bl,blur:Bl,spread:Bl,inset:!1},u=0,d=0;d<i.length;d++){var m=i[d];rw(m,"inset")?a.inset=!0:bd(m)?(u===0?a.offsetX=m:u===1?a.offsetY=m:u===2?a.blur=m:a.spread=m,u++):a.color=yd.parse(e,m)}return a})}},h8={name:"paint-order",initialValue:"normal",prefix:!1,type:1,parse:function(e,r){var i=[0,1,2],a=[];return r.filter(us).forEach(function(u){switch(u.value){case"stroke":a.push(1);break;case"fill":a.push(0);break;case"markers":a.push(2);break}}),i.forEach(function(u){a.indexOf(u)===-1&&a.push(u)}),a}},d8={name:"-webkit-text-stroke-color",initialValue:"currentcolor",prefix:!1,type:3,format:"color"},f8={name:"-webkit-text-stroke-width",initialValue:"0",type:0,prefix:!1,parse:function(e,r){return eg(r)?r.number:0}},p8=(function(){function e(r,i){var a,u;this.animationDuration=Yr(r,c8,i.animationDuration),this.backgroundClip=Yr(r,QQ,i.backgroundClip),this.backgroundColor=Yr(r,OQ,i.backgroundColor),this.backgroundImage=Yr(r,ZQ,i.backgroundImage),this.backgroundOrigin=Yr(r,XQ,i.backgroundOrigin),this.backgroundPosition=Yr(r,YQ,i.backgroundPosition),this.backgroundRepeat=Yr(r,JQ,i.backgroundRepeat),this.backgroundSize=Yr(r,tO,i.backgroundSize),this.borderTopColor=Yr(r,nO,i.borderTopColor),this.borderRightColor=Yr(r,iO,i.borderRightColor),this.borderBottomColor=Yr(r,sO,i.borderBottomColor),this.borderLeftColor=Yr(r,oO,i.borderLeftColor),this.borderTopLeftRadius=Yr(r,aO,i.borderTopLeftRadius),this.borderTopRightRadius=Yr(r,lO,i.borderTopRightRadius),this.borderBottomRightRadius=Yr(r,cO,i.borderBottomRightRadius),this.borderBottomLeftRadius=Yr(r,AO,i.borderBottomLeftRadius),this.borderTopStyle=Yr(r,uO,i.borderTopStyle),this.borderRightStyle=Yr(r,hO,i.borderRightStyle),this.borderBottomStyle=Yr(r,dO,i.borderBottomStyle),this.borderLeftStyle=Yr(r,fO,i.borderLeftStyle),this.borderTopWidth=Yr(r,pO,i.borderTopWidth),this.borderRightWidth=Yr(r,mO,i.borderRightWidth),this.borderBottomWidth=Yr(r,gO,i.borderBottomWidth),this.borderLeftWidth=Yr(r,yO,i.borderLeftWidth),this.boxShadow=Yr(r,u8,i.boxShadow),this.color=Yr(r,vO,i.color),this.direction=Yr(r,_O,i.direction),this.display=Yr(r,wO,i.display),this.float=Yr(r,bO,i.cssFloat),this.fontFamily=Yr(r,t8,i.fontFamily),this.fontSize=Yr(r,r8,i.fontSize),this.fontStyle=Yr(r,s8,i.fontStyle),this.fontVariant=Yr(r,i8,i.fontVariant),this.fontWeight=Yr(r,n8,i.fontWeight),this.letterSpacing=Yr(r,BO,i.letterSpacing),this.lineBreak=Yr(r,CO,i.lineBreak),this.lineHeight=Yr(r,EO,i.lineHeight),this.listStyleImage=Yr(r,SO,i.listStyleImage),this.listStylePosition=Yr(r,FO,i.listStylePosition),this.listStyleType=Yr(r,nw,i.listStyleType),this.marginTop=Yr(r,IO,i.marginTop),this.marginRight=Yr(r,TO,i.marginRight),this.marginBottom=Yr(r,PO,i.marginBottom),this.marginLeft=Yr(r,LO,i.marginLeft),this.opacity=Yr(r,YO,i.opacity);var d=Yr(r,MO,i.overflow);this.overflowX=d[0],this.overflowY=d[d.length>1?1:0],this.overflowWrap=Yr(r,kO,i.overflowWrap),this.paddingTop=Yr(r,UO,i.paddingTop),this.paddingRight=Yr(r,DO,i.paddingRight),this.paddingBottom=Yr(r,RO,i.paddingBottom),this.paddingLeft=Yr(r,NO,i.paddingLeft),this.paintOrder=Yr(r,h8,i.paintOrder),this.position=Yr(r,OO,i.position),this.textAlign=Yr(r,QO,i.textAlign),this.textDecorationColor=Yr(r,JO,(a=i.textDecorationColor)!==null&&a!==void 0?a:i.color),this.textDecorationLine=Yr(r,e8,(u=i.textDecorationLine)!==null&&u!==void 0?u:i.textDecoration),this.textShadow=Yr(r,zO,i.textShadow),this.textTransform=Yr(r,HO,i.textTransform),this.transform=Yr(r,jO,i.transform),this.transformOrigin=Yr(r,$O,i.transformOrigin),this.visibility=Yr(r,WO,i.visibility),this.webkitTextStrokeColor=Yr(r,d8,i.webkitTextStrokeColor),this.webkitTextStrokeWidth=Yr(r,f8,i.webkitTextStrokeWidth),this.wordBreak=Yr(r,ZO,i.wordBreak),this.zIndex=Yr(r,XO,i.zIndex)}return e.prototype.isVisible=function(){return this.display>0&&this.opacity>0&&this.visibility===0},e.prototype.isTransparent=function(){return vd(this.backgroundColor)},e.prototype.isTransformed=function(){return this.transform!==null},e.prototype.isPositioned=function(){return this.position!==0},e.prototype.isPositionedWithZIndex=function(){return this.isPositioned()&&!this.zIndex.auto},e.prototype.isFloating=function(){return this.float!==0},e.prototype.isInlineLevel=function(){return ba(this.display,4)||ba(this.display,33554432)||ba(this.display,268435456)||ba(this.display,536870912)||ba(this.display,67108864)||ba(this.display,134217728)},e})(),m8=(function(){function e(r,i){this.content=Yr(r,o8,i.content),this.quotes=Yr(r,A8,i.quotes)}return e})(),CB=(function(){function e(r,i){this.counterIncrement=Yr(r,a8,i.counterIncrement),this.counterReset=Yr(r,l8,i.counterReset)}return e})(),Yr=function(e,r,i){var a=new cI,u=i!==null&&typeof i<"u"?i.toString():r.initialValue;a.write(u);var d=new AI(a.read());switch(r.type){case 2:var m=d.parseComponentValue();return r.parse(e,us(m)?m.value:r.initialValue);case 0:return r.parse(e,d.parseComponentValue());case 1:return r.parse(e,d.parseComponentValues());case 4:return d.parseComponentValue();case 3:switch(r.format){case"angle":return jy.parse(e,d.parseComponentValue());case"color":return yd.parse(e,d.parseComponentValue());case"image":return ax.parse(e,d.parseComponentValue());case"length":var o=d.parseComponentValue();return bd(o)?o:Bl;case"length-percentage":var w=d.parseComponentValue();return oa(w)?w:Bl;case"time":return FI.parse(e,d.parseComponentValue())}break}},g8="data-html2canvas-debug",y8=function(e){var r=e.getAttribute(g8);switch(r){case"all":return 1;case"clone":return 2;case"parse":return 3;case"render":return 4;default:return 0}},iw=function(e,r){var i=y8(e);return i===1||r===i},ah=(function(){function e(r,i){if(this.context=r,this.textNodes=[],this.elements=[],this.flags=0,iw(i,3))debugger;this.styles=new p8(r,window.getComputedStyle(i,null)),aw(i)&&(this.styles.animationDuration.some(function(a){return a>0})&&(i.style.animationDuration="0s"),this.styles.transform!==null&&(i.style.transform="none")),this.bounds=zy(this.context,i),iw(i,4)&&(this.flags|=16)}return e})(),v8="AAAAAAAAAAAAEA4AGBkAAFAaAAACAAAAAAAIABAAGAAwADgACAAQAAgAEAAIABAACAAQAAgAEAAIABAACAAQAAgAEAAIABAAQABIAEQATAAIABAACAAQAAgAEAAIABAAVABcAAgAEAAIABAACAAQAGAAaABwAHgAgACIAI4AlgAIABAAmwCjAKgAsAC2AL4AvQDFAMoA0gBPAVYBWgEIAAgACACMANoAYgFkAWwBdAF8AX0BhQGNAZUBlgGeAaMBlQGWAasBswF8AbsBwwF0AcsBYwHTAQgA2wG/AOMBdAF8AekB8QF0AfkB+wHiAHQBfAEIAAMC5gQIAAsCEgIIAAgAFgIeAggAIgIpAggAMQI5AkACygEIAAgASAJQAlgCYAIIAAgACAAKBQoFCgUTBRMFGQUrBSsFCAAIAAgACAAIAAgACAAIAAgACABdAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABoAmgCrwGvAQgAbgJ2AggAHgEIAAgACADnAXsCCAAIAAgAgwIIAAgACAAIAAgACACKAggAkQKZAggAPADJAAgAoQKkAqwCsgK6AsICCADJAggA0AIIAAgACAAIANYC3gIIAAgACAAIAAgACABAAOYCCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAkASoB+QIEAAgACAA8AEMCCABCBQgACABJBVAFCAAIAAgACAAIAAgACAAIAAgACABTBVoFCAAIAFoFCABfBWUFCAAIAAgACAAIAAgAbQUIAAgACAAIAAgACABzBXsFfQWFBYoFigWKBZEFigWKBYoFmAWfBaYFrgWxBbkFCAAIAAgACAAIAAgACAAIAAgACAAIAMEFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAMgFCADQBQgACAAIAAgACAAIAAgACAAIAAgACAAIAO4CCAAIAAgAiQAIAAgACABAAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAD0AggACAD8AggACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIANYFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAMDvwAIAAgAJAIIAAgACAAIAAgACAAIAAgACwMTAwgACAB9BOsEGwMjAwgAKwMyAwsFYgE3A/MEPwMIAEUDTQNRAwgAWQOsAGEDCAAIAAgACAAIAAgACABpAzQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFIQUoBSwFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABtAwgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABMAEwACAAIAAgACAAIABgACAAIAAgACAC/AAgACAAyAQgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACAAIAAwAAgACAAIAAgACAAIAAgACAAIAAAARABIAAgACAAIABQASAAIAAgAIABwAEAAjgCIABsAqAC2AL0AigDQAtwC+IJIQqVAZUBWQqVAZUBlQGVAZUBlQGrC5UBlQGVAZUBlQGVAZUBlQGVAXsKlQGVAbAK6wsrDGUMpQzlDJUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAfAKAAuZA64AtwCJALoC6ADwAAgAuACgA/oEpgO6AqsD+AAIAAgAswMIAAgACAAIAIkAuwP5AfsBwwPLAwgACAAIAAgACADRA9kDCAAIAOED6QMIAAgACAAIAAgACADuA/YDCAAIAP4DyQAIAAgABgQIAAgAXQAOBAgACAAIAAgACAAIABMECAAIAAgACAAIAAgACAD8AAQBCAAIAAgAGgQiBCoECAExBAgAEAEIAAgACAAIAAgACAAIAAgACAAIAAgACAA4BAgACABABEYECAAIAAgATAQYAQgAVAQIAAgACAAIAAgACAAIAAgACAAIAFoECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAOQEIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAB+BAcACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAEABhgSMBAgACAAIAAgAlAQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAwAEAAQABAADAAMAAwADAAQABAAEAAQABAAEAAQABHATAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAdQMIAAgACAAIAAgACAAIAMkACAAIAAgAfQMIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACFA4kDCAAIAAgACAAIAOcBCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAIcDCAAIAAgACAAIAAgACAAIAAgACAAIAJEDCAAIAAgACADFAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABgBAgAZgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAbAQCBXIECAAIAHkECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABAAJwEQACjBKoEsgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAC6BMIECAAIAAgACAAIAAgACABmBAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAxwQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAGYECAAIAAgAzgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBd0FXwUIAOIF6gXxBYoF3gT5BQAGCAaKBYoFigWKBYoFigWKBYoFigWKBYoFigXWBIoFigWKBYoFigWKBYoFigWKBYsFEAaKBYoFigWKBYoFigWKBRQGCACKBYoFigWKBQgACAAIANEECAAIABgGigUgBggAJgYIAC4GMwaKBYoF0wQ3Bj4GigWKBYoFigWKBYoFigWKBYoFigWKBYoFigUIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWLBf///////wQABAAEAAQABAAEAAQABAAEAAQAAwAEAAQAAgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAQADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUAAAAFAAUAAAAFAAUAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAQAAAAUABQAFAAUABQAFAAAAAAAFAAUAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAFAAUAAQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAAABwAHAAcAAAAHAAcABwAFAAEAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAcABwAFAAUAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAQABAAAAAAAAAAAAAAAFAAUABQAFAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAHAAcAAAAHAAcAAAAAAAUABQAHAAUAAQAHAAEABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwABAAUABQAFAAUAAAAAAAAAAAAAAAEAAQABAAEAAQABAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABQANAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAABQAHAAUABQAFAAAAAAAAAAcABQAFAAUABQAFAAQABAAEAAQABAAEAAQABAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUAAAAFAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAUAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAcABwAFAAcABwAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUABwAHAAUABQAFAAUAAAAAAAcABwAAAAAABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAAAAAAAAAAABQAFAAAAAAAFAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAFAAUABQAFAAUAAAAFAAUABwAAAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABwAFAAUABQAFAAAAAAAHAAcAAAAAAAcABwAFAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAAAAAAAAAHAAcABwAAAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAUABQAFAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAHAAcABQAHAAcAAAAFAAcABwAAAAcABwAFAAUAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAFAAcABwAFAAUABQAAAAUAAAAHAAcABwAHAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAHAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUAAAAFAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAUAAAAFAAUAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABwAFAAUABQAFAAUABQAAAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABQAFAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAFAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAHAAUABQAFAAUABQAFAAUABwAHAAcABwAHAAcABwAHAAUABwAHAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABwAHAAcABwAFAAUABwAHAAcAAAAAAAAAAAAHAAcABQAHAAcABwAHAAcABwAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAUABQAFAAUABQAFAAUAAAAFAAAABQAAAAAABQAFAAUABQAFAAUABQAFAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAUABQAFAAUABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABwAFAAcABwAHAAcABwAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAUABQAFAAUABwAHAAUABQAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABQAFAAcABwAHAAUABwAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAcABQAFAAUABQAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAAAAAABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAAAAAAAAAFAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAUABQAHAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAFAAUABQAFAAcABwAFAAUABwAHAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAcABwAFAAUABwAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABQAAAAAABQAFAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAcABwAAAAAAAAAAAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAcABwAFAAcABwAAAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAFAAUABQAAAAUABQAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABwAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAHAAcABQAHAAUABQAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAAABwAHAAAAAAAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAFAAUABwAFAAcABwAFAAcABQAFAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAAAAAABwAHAAcABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAFAAcABwAFAAUABQAFAAUABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAUABQAFAAcABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABQAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAAAAAAFAAUABwAHAAcABwAFAAAAAAAAAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAHAAUABQAFAAUABQAFAAUABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAABQAAAAUABQAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAHAAcAAAAFAAUAAAAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABQAFAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAABQAFAAUABQAFAAUABQAAAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAFAAUABQAFAAUADgAOAA4ADgAOAA4ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAMAAwADAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkAAAAAAAAAAAAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAAAAAAAAAAAAsADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwACwAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAADgAOAA4AAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAAAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4AAAAOAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAAAAAAAAAAAA4AAAAOAAAAAAAAAAAADgAOAA4AAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAA=",EB="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",wm=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var d0=0;d0<EB.length;d0++)wm[EB.charCodeAt(d0)]=d0;var _8=function(e){var r=e.length*.75,i=e.length,a,u=0,d,m,o,w;e[e.length-1]==="="&&(r--,e[e.length-2]==="="&&r--);var E=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(r):new Array(r),I=Array.isArray(E)?E:new Uint8Array(E);for(a=0;a<i;a+=4)d=wm[e.charCodeAt(a)],m=wm[e.charCodeAt(a+1)],o=wm[e.charCodeAt(a+2)],w=wm[e.charCodeAt(a+3)],I[u++]=d<<2|m>>4,I[u++]=(m&15)<<4|o>>2,I[u++]=(o&3)<<6|w&63;return E},w8=function(e){for(var r=e.length,i=[],a=0;a<r;a+=2)i.push(e[a+1]<<8|e[a]);return i},x8=function(e){for(var r=e.length,i=[],a=0;a<r;a+=4)i.push(e[a+3]<<24|e[a+2]<<16|e[a+1]<<8|e[a]);return i},ef=5,lx=11,x1=2,b8=lx-ef,II=65536>>ef,B8=1<<ef,b1=B8-1,C8=1024>>ef,E8=II+C8,S8=E8,F8=32,I8=S8+F8,T8=65536>>lx,P8=1<<b8,L8=P8-1,SB=function(e,r,i){return e.slice?e.slice(r,i):new Uint16Array(Array.prototype.slice.call(e,r,i))},M8=function(e,r,i){return e.slice?e.slice(r,i):new Uint32Array(Array.prototype.slice.call(e,r,i))},k8=function(e,r){var i=_8(e),a=Array.isArray(i)?x8(i):new Uint32Array(i),u=Array.isArray(i)?w8(i):new Uint16Array(i),d=24,m=SB(u,d/2,a[4]/2),o=a[5]===2?SB(u,(d+a[4])/2):M8(a,Math.ceil((d+a[4])/4));return new U8(a[0],a[1],a[2],a[3],m,o)},U8=(function(){function e(r,i,a,u,d,m){this.initialValue=r,this.errorValue=i,this.highStart=a,this.highValueIndex=u,this.index=d,this.data=m}return e.prototype.get=function(r){var i;if(r>=0){if(r<55296||r>56319&&r<=65535)return i=this.index[r>>ef],i=(i<<x1)+(r&b1),this.data[i];if(r<=65535)return i=this.index[II+(r-55296>>ef)],i=(i<<x1)+(r&b1),this.data[i];if(r<this.highStart)return i=I8-T8+(r>>lx),i=this.index[i],i+=r>>ef&L8,i=this.index[i],i=(i<<x1)+(r&b1),this.data[i];if(r<=1114111)return this.data[this.highValueIndex]}return this.errorValue},e})(),FB="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",D8=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var f0=0;f0<FB.length;f0++)D8[FB.charCodeAt(f0)]=f0;var R8=1,B1=2,C1=3,IB=4,TB=5,N8=7,PB=8,E1=9,S1=10,LB=11,MB=12,kB=13,UB=14,F1=15,Q8=function(e){for(var r=[],i=0,a=e.length;i<a;){var u=e.charCodeAt(i++);if(u>=55296&&u<=56319&&i<a){var d=e.charCodeAt(i++);(d&64512)===56320?r.push(((u&1023)<<10)+(d&1023)+65536):(r.push(u),i--)}else r.push(u)}return r},O8=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];if(String.fromCodePoint)return String.fromCodePoint.apply(String,e);var i=e.length;if(!i)return"";for(var a=[],u=-1,d="";++u<i;){var m=e[u];m<=65535?a.push(m):(m-=65536,a.push((m>>10)+55296,m%1024+56320)),(u+1===i||a.length>16384)&&(d+=String.fromCharCode.apply(String,a),a.length=0)}return d},z8=k8(v8),eu="",I1="",H8=function(e){return z8.get(e)},j8=function(e,r,i){var a=i-2,u=r[a],d=r[i-1],m=r[i];if(d===B1&&m===C1)return eu;if(d===B1||d===C1||d===IB||m===B1||m===C1||m===IB)return I1;if(d===PB&&[PB,E1,LB,MB].indexOf(m)!==-1||(d===LB||d===E1)&&(m===E1||m===S1)||(d===MB||d===S1)&&m===S1||m===kB||m===TB||m===N8||d===R8)return eu;if(d===kB&&m===UB){for(;u===TB;)u=r[--a];if(u===UB)return eu}if(d===F1&&m===F1){for(var o=0;u===F1;)o++,u=r[--a];if(o%2===0)return eu}return I1},V8=function(e){var r=Q8(e),i=r.length,a=0,u=0,d=r.map(H8);return{next:function(){if(a>=i)return{done:!0,value:null};for(var m=eu;a<i&&(m=j8(r,d,++a))===eu;);if(m!==eu||a===i){var o=O8.apply(null,r.slice(u,a));return u=a,{value:o,done:!1}}return{done:!0,value:null}}}},G8=function(e){for(var r=V8(e),i=[],a;!(a=r.next()).done;)a.value&&i.push(a.value.slice());return i},K8=function(e){var r=123;if(e.createRange){var i=e.createRange();if(i.getBoundingClientRect){var a=e.createElement("boundtest");a.style.height=r+"px",a.style.display="block",e.body.appendChild(a),i.selectNode(a);var u=i.getBoundingClientRect(),d=Math.round(u.height);if(e.body.removeChild(a),d===r)return!0}}return!1},q8=function(e){var r=e.createElement("boundtest");r.style.width="50px",r.style.display="block",r.style.fontSize="12px",r.style.letterSpacing="0px",r.style.wordSpacing="0px",e.body.appendChild(r);var i=e.createRange();r.innerHTML=typeof"".repeat=="function"?"&#128104;".repeat(10):"";var a=r.firstChild,u=Hy(a.data).map(function(w){return Mo(w)}),d=0,m={},o=u.every(function(w,E){i.setStart(a,d),i.setEnd(a,d+w.length);var I=i.getBoundingClientRect();d+=w.length;var D=I.x>m.x||I.y>m.y;return m=I,E===0?!0:D});return e.body.removeChild(r),o},$8=function(){return typeof new Image().crossOrigin<"u"},W8=function(){return typeof new XMLHttpRequest().responseType=="string"},Z8=function(e){var r=new Image,i=e.createElement("canvas"),a=i.getContext("2d");if(!a)return!1;r.src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'></svg>";try{a.drawImage(r,0,0),i.toDataURL()}catch{return!1}return!0},DB=function(e){return e[0]===0&&e[1]===255&&e[2]===0&&e[3]===255},X8=function(e){var r=e.createElement("canvas"),i=100;r.width=i,r.height=i;var a=r.getContext("2d");if(!a)return Promise.reject(!1);a.fillStyle="rgb(0, 255, 0)",a.fillRect(0,0,i,i);var u=new Image,d=r.toDataURL();u.src=d;var m=sw(i,i,0,0,u);return a.fillStyle="red",a.fillRect(0,0,i,i),RB(m).then(function(o){a.drawImage(o,0,0);var w=a.getImageData(0,0,i,i).data;a.fillStyle="red",a.fillRect(0,0,i,i);var E=e.createElement("div");return E.style.backgroundImage="url("+d+")",E.style.height=i+"px",DB(w)?RB(sw(i,i,0,0,E)):Promise.reject(!1)}).then(function(o){return a.drawImage(o,0,0),DB(a.getImageData(0,0,i,i).data)}).catch(function(){return!1})},sw=function(e,r,i,a,u){var d="http://www.w3.org/2000/svg",m=document.createElementNS(d,"svg"),o=document.createElementNS(d,"foreignObject");return m.setAttributeNS(null,"width",e.toString()),m.setAttributeNS(null,"height",r.toString()),o.setAttributeNS(null,"width","100%"),o.setAttributeNS(null,"height","100%"),o.setAttributeNS(null,"x",i.toString()),o.setAttributeNS(null,"y",a.toString()),o.setAttributeNS(null,"externalResourcesRequired","true"),m.appendChild(o),o.appendChild(u),m},RB=function(e){return new Promise(function(r,i){var a=new Image;a.onload=function(){return r(a)},a.onerror=i,a.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(e))})},xl={get SUPPORT_RANGE_BOUNDS(){var e=K8(document);return Object.defineProperty(xl,"SUPPORT_RANGE_BOUNDS",{value:e}),e},get SUPPORT_WORD_BREAKING(){var e=xl.SUPPORT_RANGE_BOUNDS&&q8(document);return Object.defineProperty(xl,"SUPPORT_WORD_BREAKING",{value:e}),e},get SUPPORT_SVG_DRAWING(){var e=Z8(document);return Object.defineProperty(xl,"SUPPORT_SVG_DRAWING",{value:e}),e},get SUPPORT_FOREIGNOBJECT_DRAWING(){var e=typeof Array.from=="function"&&typeof window.fetch=="function"?X8(document):Promise.resolve(!1);return Object.defineProperty(xl,"SUPPORT_FOREIGNOBJECT_DRAWING",{value:e}),e},get SUPPORT_CORS_IMAGES(){var e=$8();return Object.defineProperty(xl,"SUPPORT_CORS_IMAGES",{value:e}),e},get SUPPORT_RESPONSE_TYPE(){var e=W8();return Object.defineProperty(xl,"SUPPORT_RESPONSE_TYPE",{value:e}),e},get SUPPORT_CORS_XHR(){var e="withCredentials"in new XMLHttpRequest;return Object.defineProperty(xl,"SUPPORT_CORS_XHR",{value:e}),e},get SUPPORT_NATIVE_TEXT_SEGMENTATION(){var e=!!(typeof Intl<"u"&&Intl.Segmenter);return Object.defineProperty(xl,"SUPPORT_NATIVE_TEXT_SEGMENTATION",{value:e}),e}},Tm=(function(){function e(r,i){this.text=r,this.bounds=i}return e})(),Y8=function(e,r,i,a){var u=tz(r,i),d=[],m=0;return u.forEach(function(o){if(i.textDecorationLine.length||o.trim().length>0)if(xl.SUPPORT_RANGE_BOUNDS){var w=NB(a,m,o.length).getClientRects();if(w.length>1){var E=cx(o),I=0;E.forEach(function(O){d.push(new Tm(O,zh.fromDOMRectList(e,NB(a,I+m,O.length).getClientRects()))),I+=O.length})}else d.push(new Tm(o,zh.fromDOMRectList(e,w)))}else{var D=a.splitText(o.length);d.push(new Tm(o,J8(e,a))),a=D}else xl.SUPPORT_RANGE_BOUNDS||(a=a.splitText(o.length));m+=o.length}),d},J8=function(e,r){var i=r.ownerDocument;if(i){var a=i.createElement("html2canvaswrapper");a.appendChild(r.cloneNode(!0));var u=r.parentNode;if(u){u.replaceChild(a,r);var d=zy(e,a);return a.firstChild&&u.replaceChild(a.firstChild,a),d}}return zh.EMPTY},NB=function(e,r,i){var a=e.ownerDocument;if(!a)throw new Error("Node has no owner document");var u=a.createRange();return u.setStart(e,r),u.setEnd(e,r+i),u},cx=function(e){if(xl.SUPPORT_NATIVE_TEXT_SEGMENTATION){var r=new Intl.Segmenter(void 0,{granularity:"grapheme"});return Array.from(r.segment(e)).map(function(i){return i.segment})}return G8(e)},ez=function(e,r){if(xl.SUPPORT_NATIVE_TEXT_SEGMENTATION){var i=new Intl.Segmenter(void 0,{granularity:"word"});return Array.from(i.segment(e)).map(function(a){return a.segment})}return nz(e,r)},tz=function(e,r){return r.letterSpacing!==0?cx(e):ez(e,r)},rz=[32,160,4961,65792,65793,4153,4241],nz=function(e,r){for(var i=T6(e,{lineBreak:r.lineBreak,wordBreak:r.overflowWrap==="break-word"?"break-word":r.wordBreak}),a=[],u,d=function(){if(u.value){var m=u.value.slice(),o=Hy(m),w="";o.forEach(function(E){rz.indexOf(E)===-1?w+=Mo(E):(w.length&&a.push(w),a.push(Mo(E)),w="")}),w.length&&a.push(w)}};!(u=i.next()).done;)d();return a},iz=(function(){function e(r,i,a){this.text=sz(i.data,a.textTransform),this.textBounds=Y8(r,this.text,a,i)}return e})(),sz=function(e,r){switch(r){case 1:return e.toLowerCase();case 3:return e.replace(oz,az);case 2:return e.toUpperCase();default:return e}},oz=/(^|\s|:|-|\(|\))([a-z])/g,az=function(e,r,i){return e.length>0?r+i.toUpperCase():e},TI=(function(e){Lu(r,e);function r(i,a){var u=e.call(this,i,a)||this;return u.src=a.currentSrc||a.src,u.intrinsicWidth=a.naturalWidth,u.intrinsicHeight=a.naturalHeight,u.context.cache.addImage(u.src),u}return r})(ah),PI=(function(e){Lu(r,e);function r(i,a){var u=e.call(this,i,a)||this;return u.canvas=a,u.intrinsicWidth=a.width,u.intrinsicHeight=a.height,u}return r})(ah),LI=(function(e){Lu(r,e);function r(i,a){var u=e.call(this,i,a)||this,d=new XMLSerializer,m=zy(i,a);return a.setAttribute("width",m.width+"px"),a.setAttribute("height",m.height+"px"),u.svg="data:image/svg+xml,"+encodeURIComponent(d.serializeToString(a)),u.intrinsicWidth=a.width.baseVal.value,u.intrinsicHeight=a.height.baseVal.value,u.context.cache.addImage(u.svg),u}return r})(ah),MI=(function(e){Lu(r,e);function r(i,a){var u=e.call(this,i,a)||this;return u.value=a.value,u}return r})(ah),ow=(function(e){Lu(r,e);function r(i,a){var u=e.call(this,i,a)||this;return u.start=a.start,u.reversed=typeof a.reversed=="boolean"&&a.reversed===!0,u}return r})(ah),lz=[{type:15,flags:0,unit:"px",number:3}],cz=[{type:16,flags:0,number:50}],Az=function(e){return e.width>e.height?new zh(e.left+(e.width-e.height)/2,e.top,e.height,e.height):e.width<e.height?new zh(e.left,e.top+(e.height-e.width)/2,e.width,e.width):e},uz=function(e){var r=e.type===hz?new Array(e.value.length+1).join(""):e.value;return r.length===0?e.placeholder||"":r},ny="checkbox",iy="radio",hz="password",QB=707406591,Ax=(function(e){Lu(r,e);function r(i,a){var u=e.call(this,i,a)||this;switch(u.type=a.type.toLowerCase(),u.checked=a.checked,u.value=uz(a),(u.type===ny||u.type===iy)&&(u.styles.backgroundColor=3739148031,u.styles.borderTopColor=u.styles.borderRightColor=u.styles.borderBottomColor=u.styles.borderLeftColor=2779096575,u.styles.borderTopWidth=u.styles.borderRightWidth=u.styles.borderBottomWidth=u.styles.borderLeftWidth=1,u.styles.borderTopStyle=u.styles.borderRightStyle=u.styles.borderBottomStyle=u.styles.borderLeftStyle=1,u.styles.backgroundClip=[0],u.styles.backgroundOrigin=[0],u.bounds=Az(u.bounds)),u.type){case ny:u.styles.borderTopRightRadius=u.styles.borderTopLeftRadius=u.styles.borderBottomRightRadius=u.styles.borderBottomLeftRadius=lz;break;case iy:u.styles.borderTopRightRadius=u.styles.borderTopLeftRadius=u.styles.borderBottomRightRadius=u.styles.borderBottomLeftRadius=cz;break}return u}return r})(ah),kI=(function(e){Lu(r,e);function r(i,a){var u=e.call(this,i,a)||this,d=a.options[a.selectedIndex||0];return u.value=d&&d.text||"",u}return r})(ah),UI=(function(e){Lu(r,e);function r(i,a){var u=e.call(this,i,a)||this;return u.value=a.value,u}return r})(ah),DI=(function(e){Lu(r,e);function r(i,a){var u=e.call(this,i,a)||this;u.src=a.src,u.width=parseInt(a.width,10)||0,u.height=parseInt(a.height,10)||0,u.backgroundColor=u.styles.backgroundColor;try{if(a.contentWindow&&a.contentWindow.document&&a.contentWindow.document.documentElement){u.tree=NI(i,a.contentWindow.document.documentElement);var d=a.contentWindow.document.documentElement?Fm(i,getComputedStyle(a.contentWindow.document.documentElement).backgroundColor):Nh.TRANSPARENT,m=a.contentWindow.document.body?Fm(i,getComputedStyle(a.contentWindow.document.body).backgroundColor):Nh.TRANSPARENT;u.backgroundColor=vd(d)?vd(m)?u.styles.backgroundColor:m:d}}catch{}return u}return r})(ah),dz=["OL","UL","MENU"],N0=function(e,r,i,a){for(var u=r.firstChild,d=void 0;u;u=d)if(d=u.nextSibling,QI(u)&&u.data.trim().length>0)i.textNodes.push(new iz(e,u,i.styles));else if(op(u))if(jI(u)&&u.assignedNodes)u.assignedNodes().forEach(function(o){return N0(e,o,i,a)});else{var m=RI(e,u);m.styles.isVisible()&&(fz(u,m,a)?m.flags|=4:pz(m.styles)&&(m.flags|=2),dz.indexOf(u.tagName)!==-1&&(m.flags|=8),i.elements.push(m),u.slot,u.shadowRoot?N0(e,u.shadowRoot,m,a):!sy(u)&&!OI(u)&&!oy(u)&&N0(e,u,m,a))}},RI=function(e,r){return lw(r)?new TI(e,r):zI(r)?new PI(e,r):OI(r)?new LI(e,r):mz(r)?new MI(e,r):gz(r)?new ow(e,r):yz(r)?new Ax(e,r):oy(r)?new kI(e,r):sy(r)?new UI(e,r):HI(r)?new DI(e,r):new ah(e,r)},NI=function(e,r){var i=RI(e,r);return i.flags|=4,N0(e,r,i,i),i},fz=function(e,r,i){return r.styles.isPositionedWithZIndex()||r.styles.opacity<1||r.styles.isTransformed()||ux(e)&&i.styles.isTransparent()},pz=function(e){return e.isPositioned()||e.isFloating()},QI=function(e){return e.nodeType===Node.TEXT_NODE},op=function(e){return e.nodeType===Node.ELEMENT_NODE},aw=function(e){return op(e)&&typeof e.style<"u"&&!Q0(e)},Q0=function(e){return typeof e.className=="object"},mz=function(e){return e.tagName==="LI"},gz=function(e){return e.tagName==="OL"},yz=function(e){return e.tagName==="INPUT"},vz=function(e){return e.tagName==="HTML"},OI=function(e){return e.tagName==="svg"},ux=function(e){return e.tagName==="BODY"},zI=function(e){return e.tagName==="CANVAS"},OB=function(e){return e.tagName==="VIDEO"},lw=function(e){return e.tagName==="IMG"},HI=function(e){return e.tagName==="IFRAME"},zB=function(e){return e.tagName==="STYLE"},_z=function(e){return e.tagName==="SCRIPT"},sy=function(e){return e.tagName==="TEXTAREA"},oy=function(e){return e.tagName==="SELECT"},jI=function(e){return e.tagName==="SLOT"},HB=function(e){return e.tagName.indexOf("-")>0},wz=(function(){function e(){this.counters={}}return e.prototype.getCounterValue=function(r){var i=this.counters[r];return i&&i.length?i[i.length-1]:1},e.prototype.getCounterValues=function(r){var i=this.counters[r];return i||[]},e.prototype.pop=function(r){var i=this;r.forEach(function(a){return i.counters[a].pop()})},e.prototype.parse=function(r){var i=this,a=r.counterIncrement,u=r.counterReset,d=!0;a!==null&&a.forEach(function(o){var w=i.counters[o.counter];w&&o.increment!==0&&(d=!1,w.length||w.push(1),w[Math.max(0,w.length-1)]+=o.increment)});var m=[];return d&&u.forEach(function(o){var w=i.counters[o.counter];m.push(o.counter),w||(w=i.counters[o.counter]=[]),w.push(o.reset)}),m},e})(),jB={integers:[1e3,900,500,400,100,90,50,40,10,9,5,4,1],values:["M","CM","D","CD","C","XC","L","XL","X","IX","V","IV","I"]},VB={integers:[9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},xz={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,400,300,200,100,90,80,70,60,50,40,30,20,19,18,17,16,15,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},bz={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},Gf=function(e,r,i,a,u,d){return e<r||e>i?Hm(e,u,d.length>0):a.integers.reduce(function(m,o,w){for(;e>=o;)e-=o,m+=a.values[w];return m},"")+d},VI=function(e,r,i,a){var u="";do i||e--,u=a(e)+u,e/=r;while(e*r>=r);return u},Lo=function(e,r,i,a,u){var d=i-r+1;return(e<0?"-":"")+(VI(Math.abs(e),d,a,function(m){return Mo(Math.floor(m%d)+r)})+u)},$d=function(e,r,i){i===void 0&&(i=". ");var a=r.length;return VI(Math.abs(e),a,!1,function(u){return r[Math.floor(u%a)]})+i},ep=1,ld=2,cd=4,xm=8,Uh=function(e,r,i,a,u,d){if(e<-9999||e>9999)return Hm(e,4,u.length>0);var m=Math.abs(e),o=u;if(m===0)return r[0]+o;for(var w=0;m>0&&w<=4;w++){var E=m%10;E===0&&ba(d,ep)&&o!==""?o=r[E]+o:E>1||E===1&&w===0||E===1&&w===1&&ba(d,ld)||E===1&&w===1&&ba(d,cd)&&e>100||E===1&&w>1&&ba(d,xm)?o=r[E]+(w>0?i[w-1]:"")+o:E===1&&w>0&&(o=i[w-1]+o),m=Math.floor(m/10)}return(e<0?a:"")+o},GB="",KB="",qB="",T1="",Hm=function(e,r,i){var a=i?". ":"",u=i?"":"",d=i?", ":"",m=i?" ":"";switch(r){case 0:return""+m;case 1:return""+m;case 2:return""+m;case 5:var o=Lo(e,48,57,!0,a);return o.length<4?"0"+o:o;case 4:return $d(e,"",u);case 6:return Gf(e,1,3999,jB,3,a).toLowerCase();case 7:return Gf(e,1,3999,jB,3,a);case 8:return Lo(e,945,969,!1,a);case 9:return Lo(e,97,122,!1,a);case 10:return Lo(e,65,90,!1,a);case 11:return Lo(e,1632,1641,!0,a);case 12:case 49:return Gf(e,1,9999,VB,3,a);case 35:return Gf(e,1,9999,VB,3,a).toLowerCase();case 13:return Lo(e,2534,2543,!0,a);case 14:case 30:return Lo(e,6112,6121,!0,a);case 15:return $d(e,"",u);case 16:return $d(e,"",u);case 17:case 48:return Uh(e,"",GB,"",u,ld|cd|xm);case 47:return Uh(e,"",KB,"",u,ep|ld|cd|xm);case 42:return Uh(e,"",GB,"",u,ld|cd|xm);case 41:return Uh(e,"",KB,"",u,ep|ld|cd|xm);case 26:return Uh(e,"","",qB,u,0);case 25:return Uh(e,"","",qB,u,ep|ld|cd);case 31:return Uh(e,"","",T1,d,ep|ld|cd);case 33:return Uh(e,"","",T1,d,0);case 32:return Uh(e,"","",T1,d,ep|ld|cd);case 18:return Lo(e,2406,2415,!0,a);case 20:return Gf(e,1,19999,bz,3,a);case 21:return Lo(e,2790,2799,!0,a);case 22:return Lo(e,2662,2671,!0,a);case 22:return Gf(e,1,10999,xz,3,a);case 23:return $d(e,"");case 24:return $d(e,"");case 27:return Lo(e,3302,3311,!0,a);case 28:return $d(e,"",u);case 29:return $d(e,"",u);case 34:return Lo(e,3792,3801,!0,a);case 37:return Lo(e,6160,6169,!0,a);case 38:return Lo(e,4160,4169,!0,a);case 39:return Lo(e,2918,2927,!0,a);case 40:return Lo(e,1776,1785,!0,a);case 43:return Lo(e,3046,3055,!0,a);case 44:return Lo(e,3174,3183,!0,a);case 45:return Lo(e,3664,3673,!0,a);case 46:return Lo(e,3872,3881,!0,a);case 3:default:return Lo(e,48,57,!0,a)}},GI="data-html2canvas-ignore",$B=(function(){function e(r,i,a){if(this.context=r,this.options=a,this.scrolledElements=[],this.referenceElement=i,this.counters=new wz,this.quoteDepth=0,!i.ownerDocument)throw new Error("Cloned element does not have an owner document");this.documentElement=this.cloneNode(i.ownerDocument.documentElement,!1)}return e.prototype.toIFrame=function(r,i){var a=this,u=Bz(r,i);if(!u.contentWindow)return Promise.reject("Unable to find iframe window");var d=r.defaultView.pageXOffset,m=r.defaultView.pageYOffset,o=u.contentWindow,w=o.document,E=Sz(u).then(function(){return bc(a,void 0,void 0,function(){var I,D;return Yl(this,function(O){switch(O.label){case 0:return this.scrolledElements.forEach(Pz),o&&(o.scrollTo(i.left,i.top),/(iPad|iPhone|iPod)/g.test(navigator.userAgent)&&(o.scrollY!==i.top||o.scrollX!==i.left)&&(this.context.logger.warn("Unable to restore scroll position for cloned document"),this.context.windowBounds=this.context.windowBounds.add(o.scrollX-i.left,o.scrollY-i.top,0,0))),I=this.options.onclone,D=this.clonedReferenceElement,typeof D>"u"?[2,Promise.reject("Error finding the "+this.referenceElement.nodeName+" in the cloned document")]:w.fonts&&w.fonts.ready?[4,w.fonts.ready]:[3,2];case 1:O.sent(),O.label=2;case 2:return/(AppleWebKit)/g.test(navigator.userAgent)?[4,Ez(w)]:[3,4];case 3:O.sent(),O.label=4;case 4:return typeof I=="function"?[2,Promise.resolve().then(function(){return I(w,D)}).then(function(){return u})]:[2,u]}})})});return w.open(),w.write(Iz(document.doctype)+"<html></html>"),Tz(this.referenceElement.ownerDocument,d,m),w.replaceChild(w.adoptNode(this.documentElement),w.documentElement),w.close(),E},e.prototype.createElementClone=function(r){if(iw(r,2))debugger;if(zI(r))return this.createCanvasClone(r);if(OB(r))return this.createVideoClone(r);if(zB(r))return this.createStyleClone(r);var i=r.cloneNode(!1);return lw(i)&&(lw(r)&&r.currentSrc&&r.currentSrc!==r.src&&(i.src=r.currentSrc,i.srcset=""),i.loading==="lazy"&&(i.loading="eager")),HB(i)?this.createCustomElementClone(i):i},e.prototype.createCustomElementClone=function(r){var i=document.createElement("html2canvascustomelement");return P1(r.style,i),i},e.prototype.createStyleClone=function(r){try{var i=r.sheet;if(i&&i.cssRules){var a=[].slice.call(i.cssRules,0).reduce(function(d,m){return m&&typeof m.cssText=="string"?d+m.cssText:d},""),u=r.cloneNode(!1);return u.textContent=a,u}}catch(d){if(this.context.logger.error("Unable to access cssRules property",d),d.name!=="SecurityError")throw d}return r.cloneNode(!1)},e.prototype.createCanvasClone=function(r){var i;if(this.options.inlineImages&&r.ownerDocument){var a=r.ownerDocument.createElement("img");try{return a.src=r.toDataURL(),a}catch{this.context.logger.info("Unable to inline canvas contents, canvas is tainted",r)}}var u=r.cloneNode(!1);try{u.width=r.width,u.height=r.height;var d=r.getContext("2d"),m=u.getContext("2d");if(m)if(!this.options.allowTaint&&d)m.putImageData(d.getImageData(0,0,r.width,r.height),0,0);else{var o=(i=r.getContext("webgl2"))!==null&&i!==void 0?i:r.getContext("webgl");if(o){var w=o.getContextAttributes();w?.preserveDrawingBuffer===!1&&this.context.logger.warn("Unable to clone WebGL context as it has preserveDrawingBuffer=false",r)}m.drawImage(r,0,0)}return u}catch{this.context.logger.info("Unable to clone canvas as it is tainted",r)}return u},e.prototype.createVideoClone=function(r){var i=r.ownerDocument.createElement("canvas");i.width=r.offsetWidth,i.height=r.offsetHeight;var a=i.getContext("2d");try{return a&&(a.drawImage(r,0,0,i.width,i.height),this.options.allowTaint||a.getImageData(0,0,i.width,i.height)),i}catch{this.context.logger.info("Unable to clone video as it is tainted",r)}var u=r.ownerDocument.createElement("canvas");return u.width=r.offsetWidth,u.height=r.offsetHeight,u},e.prototype.appendChildNode=function(r,i,a){(!op(i)||!_z(i)&&!i.hasAttribute(GI)&&(typeof this.options.ignoreElements!="function"||!this.options.ignoreElements(i)))&&(!this.options.copyStyles||!op(i)||!zB(i))&&r.appendChild(this.cloneNode(i,a))},e.prototype.cloneChildNodes=function(r,i,a){for(var u=this,d=r.shadowRoot?r.shadowRoot.firstChild:r.firstChild;d;d=d.nextSibling)if(op(d)&&jI(d)&&typeof d.assignedNodes=="function"){var m=d.assignedNodes();m.length&&m.forEach(function(o){return u.appendChildNode(i,o,a)})}else this.appendChildNode(i,d,a)},e.prototype.cloneNode=function(r,i){if(QI(r))return document.createTextNode(r.data);if(!r.ownerDocument)return r.cloneNode(!1);var a=r.ownerDocument.defaultView;if(a&&op(r)&&(aw(r)||Q0(r))){var u=this.createElementClone(r);u.style.transitionProperty="none";var d=a.getComputedStyle(r),m=a.getComputedStyle(r,":before"),o=a.getComputedStyle(r,":after");this.referenceElement===r&&aw(u)&&(this.clonedReferenceElement=u),ux(u)&&kz(u);var w=this.counters.parse(new CB(this.context,d)),E=this.resolvePseudoContent(r,u,m,Pm.BEFORE);HB(r)&&(i=!0),OB(r)||this.cloneChildNodes(r,u,i),E&&u.insertBefore(E,u.firstChild);var I=this.resolvePseudoContent(r,u,o,Pm.AFTER);return I&&u.appendChild(I),this.counters.pop(w),(d&&(this.options.copyStyles||Q0(r))&&!HI(r)||i)&&P1(d,u),(r.scrollTop!==0||r.scrollLeft!==0)&&this.scrolledElements.push([u,r.scrollLeft,r.scrollTop]),(sy(r)||oy(r))&&(sy(u)||oy(u))&&(u.value=r.value),u}return r.cloneNode(!1)},e.prototype.resolvePseudoContent=function(r,i,a,u){var d=this;if(a){var m=a.content,o=i.ownerDocument;if(!(!o||!m||m==="none"||m==="-moz-alt-content"||a.display==="none")){this.counters.parse(new CB(this.context,a));var w=new m8(this.context,a),E=o.createElement("html2canvaspseudoelement");P1(a,E),w.content.forEach(function(D){if(D.type===0)E.appendChild(o.createTextNode(D.value));else if(D.type===22){var O=o.createElement("img");O.src=D.value,O.style.opacity="1",E.appendChild(O)}else if(D.type===18){if(D.name==="attr"){var P=D.values.filter(us);P.length&&E.appendChild(o.createTextNode(r.getAttribute(P[0].value)||""))}else if(D.name==="counter"){var W=D.values.filter(vp),z=W[0],H=W[1];if(z&&us(z)){var Z=d.counters.getCounterValue(z.value),se=H&&us(H)?nw.parse(d.context,H.value):3;E.appendChild(o.createTextNode(Hm(Z,se,!1)))}}else if(D.name==="counters"){var ce=D.values.filter(vp),z=ce[0],de=ce[1],H=ce[2];if(z&&us(z)){var Pe=d.counters.getCounterValues(z.value),He=H&&us(H)?nw.parse(d.context,H.value):3,Xe=de&&de.type===0?de.value:"",Qe=Pe.map(function(Ae){return Hm(Ae,He,!1)}).join(Xe);E.appendChild(o.createTextNode(Qe))}}}else if(D.type===20)switch(D.value){case"open-quote":E.appendChild(o.createTextNode(BB(w.quotes,d.quoteDepth++,!0)));break;case"close-quote":E.appendChild(o.createTextNode(BB(w.quotes,--d.quoteDepth,!1)));break;default:E.appendChild(o.createTextNode(D.value))}}),E.className=cw+" "+Aw;var I=u===Pm.BEFORE?" "+cw:" "+Aw;return Q0(i)?i.className.baseValue+=I:i.className+=I,E}}},e.destroy=function(r){return r.parentNode?(r.parentNode.removeChild(r),!0):!1},e})(),Pm;(function(e){e[e.BEFORE=0]="BEFORE",e[e.AFTER=1]="AFTER"})(Pm||(Pm={}));var Bz=function(e,r){var i=e.createElement("iframe");return i.className="html2canvas-container",i.style.visibility="hidden",i.style.position="fixed",i.style.left="-10000px",i.style.top="0px",i.style.border="0",i.width=r.width.toString(),i.height=r.height.toString(),i.scrolling="no",i.setAttribute(GI,"true"),e.body.appendChild(i),i},Cz=function(e){return new Promise(function(r){if(e.complete){r();return}if(!e.src){r();return}e.onload=r,e.onerror=r})},Ez=function(e){return Promise.all([].slice.call(e.images,0).map(Cz))},Sz=function(e){return new Promise(function(r,i){var a=e.contentWindow;if(!a)return i("No window assigned for iframe");var u=a.document;a.onload=e.onload=function(){a.onload=e.onload=null;var d=setInterval(function(){u.body.childNodes.length>0&&u.readyState==="complete"&&(clearInterval(d),r(e))},50)}})},Fz=["all","d","content"],P1=function(e,r){for(var i=e.length-1;i>=0;i--){var a=e.item(i);Fz.indexOf(a)===-1&&r.style.setProperty(a,e.getPropertyValue(a))}return r},Iz=function(e){var r="";return e&&(r+="<!DOCTYPE ",e.name&&(r+=e.name),e.internalSubset&&(r+=e.internalSubset),e.publicId&&(r+='"'+e.publicId+'"'),e.systemId&&(r+='"'+e.systemId+'"'),r+=">"),r},Tz=function(e,r,i){e&&e.defaultView&&(r!==e.defaultView.pageXOffset||i!==e.defaultView.pageYOffset)&&e.defaultView.scrollTo(r,i)},Pz=function(e){var r=e[0],i=e[1],a=e[2];r.scrollLeft=i,r.scrollTop=a},Lz=":before",Mz=":after",cw="___html2canvas___pseudoelement_before",Aw="___html2canvas___pseudoelement_after",WB=`{
    content: "" !important;
    display: none !important;
}`,kz=function(e){Uz(e,"."+cw+Lz+WB+`
         .`+Aw+Mz+WB)},Uz=function(e,r){var i=e.ownerDocument;if(i){var a=i.createElement("style");a.textContent=r,e.appendChild(a)}},KI=(function(){function e(){}return e.getOrigin=function(r){var i=e._link;return i?(i.href=r,i.href=i.href,i.protocol+i.hostname+i.port):"about:blank"},e.isSameOrigin=function(r){return e.getOrigin(r)===e._origin},e.setContext=function(r){e._link=r.document.createElement("a"),e._origin=e.getOrigin(r.location.href)},e._origin="about:blank",e})(),Dz=(function(){function e(r,i){this.context=r,this._options=i,this._cache={}}return e.prototype.addImage=function(r){var i=Promise.resolve();return this.has(r)||(M1(r)||Oz(r))&&(this._cache[r]=this.loadImage(r)).catch(function(){}),i},e.prototype.match=function(r){return this._cache[r]},e.prototype.loadImage=function(r){return bc(this,void 0,void 0,function(){var i,a,u,d,m=this;return Yl(this,function(o){switch(o.label){case 0:return i=KI.isSameOrigin(r),a=!L1(r)&&this._options.useCORS===!0&&xl.SUPPORT_CORS_IMAGES&&!i,u=!L1(r)&&!i&&!M1(r)&&typeof this._options.proxy=="string"&&xl.SUPPORT_CORS_XHR&&!a,!i&&this._options.allowTaint===!1&&!L1(r)&&!M1(r)&&!u&&!a?[2]:(d=r,u?[4,this.proxy(d)]:[3,2]);case 1:d=o.sent(),o.label=2;case 2:return this.context.logger.debug("Added image "+r.substring(0,256)),[4,new Promise(function(w,E){var I=new Image;I.onload=function(){return w(I)},I.onerror=E,(zz(d)||a)&&(I.crossOrigin="anonymous"),I.src=d,I.complete===!0&&setTimeout(function(){return w(I)},500),m._options.imageTimeout>0&&setTimeout(function(){return E("Timed out ("+m._options.imageTimeout+"ms) loading image")},m._options.imageTimeout)})];case 3:return[2,o.sent()]}})})},e.prototype.has=function(r){return typeof this._cache[r]<"u"},e.prototype.keys=function(){return Promise.resolve(Object.keys(this._cache))},e.prototype.proxy=function(r){var i=this,a=this._options.proxy;if(!a)throw new Error("No proxy defined");var u=r.substring(0,256);return new Promise(function(d,m){var o=xl.SUPPORT_RESPONSE_TYPE?"blob":"text",w=new XMLHttpRequest;w.onload=function(){if(w.status===200)if(o==="text")d(w.response);else{var D=new FileReader;D.addEventListener("load",function(){return d(D.result)},!1),D.addEventListener("error",function(O){return m(O)},!1),D.readAsDataURL(w.response)}else m("Failed to proxy resource "+u+" with status code "+w.status)},w.onerror=m;var E=a.indexOf("?")>-1?"&":"?";if(w.open("GET",""+a+E+"url="+encodeURIComponent(r)+"&responseType="+o),o!=="text"&&w instanceof XMLHttpRequest&&(w.responseType=o),i._options.imageTimeout){var I=i._options.imageTimeout;w.timeout=I,w.ontimeout=function(){return m("Timed out ("+I+"ms) proxying "+u)}}w.send()})},e})(),Rz=/^data:image\/svg\+xml/i,Nz=/^data:image\/.*;base64,/i,Qz=/^data:image\/.*/i,Oz=function(e){return xl.SUPPORT_SVG_DRAWING||!Hz(e)},L1=function(e){return Qz.test(e)},zz=function(e){return Nz.test(e)},M1=function(e){return e.substr(0,4)==="blob"},Hz=function(e){return e.substr(-3).toLowerCase()==="svg"||Rz.test(e)},jr=(function(){function e(r,i){this.type=0,this.x=r,this.y=i}return e.prototype.add=function(r,i){return new e(this.x+r,this.y+i)},e})(),Kf=function(e,r,i){return new jr(e.x+(r.x-e.x)*i,e.y+(r.y-e.y)*i)},p0=(function(){function e(r,i,a,u){this.type=1,this.start=r,this.startControl=i,this.endControl=a,this.end=u}return e.prototype.subdivide=function(r,i){var a=Kf(this.start,this.startControl,r),u=Kf(this.startControl,this.endControl,r),d=Kf(this.endControl,this.end,r),m=Kf(a,u,r),o=Kf(u,d,r),w=Kf(m,o,r);return i?new e(this.start,a,m,w):new e(w,o,d,this.end)},e.prototype.add=function(r,i){return new e(this.start.add(r,i),this.startControl.add(r,i),this.endControl.add(r,i),this.end.add(r,i))},e.prototype.reverse=function(){return new e(this.end,this.endControl,this.startControl,this.start)},e})(),tu=function(e){return e.type===1},jz=(function(){function e(r){var i=r.styles,a=r.bounds,u=_m(i.borderTopLeftRadius,a.width,a.height),d=u[0],m=u[1],o=_m(i.borderTopRightRadius,a.width,a.height),w=o[0],E=o[1],I=_m(i.borderBottomRightRadius,a.width,a.height),D=I[0],O=I[1],P=_m(i.borderBottomLeftRadius,a.width,a.height),W=P[0],z=P[1],H=[];H.push((d+w)/a.width),H.push((W+D)/a.width),H.push((m+z)/a.height),H.push((E+O)/a.height);var Z=Math.max.apply(Math,H);Z>1&&(d/=Z,m/=Z,w/=Z,E/=Z,D/=Z,O/=Z,W/=Z,z/=Z);var se=a.width-w,ce=a.height-O,de=a.width-D,Pe=a.height-z,He=i.borderTopWidth,Xe=i.borderRightWidth,Qe=i.borderBottomWidth,Be=i.borderLeftWidth,Je=Ms(i.paddingTop,r.bounds.width),Ae=Ms(i.paddingRight,r.bounds.width),me=Ms(i.paddingBottom,r.bounds.width),Te=Ms(i.paddingLeft,r.bounds.width);this.topLeftBorderDoubleOuterBox=d>0||m>0?so(a.left+Be/3,a.top+He/3,d-Be/3,m-He/3,Ki.TOP_LEFT):new jr(a.left+Be/3,a.top+He/3),this.topRightBorderDoubleOuterBox=d>0||m>0?so(a.left+se,a.top+He/3,w-Xe/3,E-He/3,Ki.TOP_RIGHT):new jr(a.left+a.width-Xe/3,a.top+He/3),this.bottomRightBorderDoubleOuterBox=D>0||O>0?so(a.left+de,a.top+ce,D-Xe/3,O-Qe/3,Ki.BOTTOM_RIGHT):new jr(a.left+a.width-Xe/3,a.top+a.height-Qe/3),this.bottomLeftBorderDoubleOuterBox=W>0||z>0?so(a.left+Be/3,a.top+Pe,W-Be/3,z-Qe/3,Ki.BOTTOM_LEFT):new jr(a.left+Be/3,a.top+a.height-Qe/3),this.topLeftBorderDoubleInnerBox=d>0||m>0?so(a.left+Be*2/3,a.top+He*2/3,d-Be*2/3,m-He*2/3,Ki.TOP_LEFT):new jr(a.left+Be*2/3,a.top+He*2/3),this.topRightBorderDoubleInnerBox=d>0||m>0?so(a.left+se,a.top+He*2/3,w-Xe*2/3,E-He*2/3,Ki.TOP_RIGHT):new jr(a.left+a.width-Xe*2/3,a.top+He*2/3),this.bottomRightBorderDoubleInnerBox=D>0||O>0?so(a.left+de,a.top+ce,D-Xe*2/3,O-Qe*2/3,Ki.BOTTOM_RIGHT):new jr(a.left+a.width-Xe*2/3,a.top+a.height-Qe*2/3),this.bottomLeftBorderDoubleInnerBox=W>0||z>0?so(a.left+Be*2/3,a.top+Pe,W-Be*2/3,z-Qe*2/3,Ki.BOTTOM_LEFT):new jr(a.left+Be*2/3,a.top+a.height-Qe*2/3),this.topLeftBorderStroke=d>0||m>0?so(a.left+Be/2,a.top+He/2,d-Be/2,m-He/2,Ki.TOP_LEFT):new jr(a.left+Be/2,a.top+He/2),this.topRightBorderStroke=d>0||m>0?so(a.left+se,a.top+He/2,w-Xe/2,E-He/2,Ki.TOP_RIGHT):new jr(a.left+a.width-Xe/2,a.top+He/2),this.bottomRightBorderStroke=D>0||O>0?so(a.left+de,a.top+ce,D-Xe/2,O-Qe/2,Ki.BOTTOM_RIGHT):new jr(a.left+a.width-Xe/2,a.top+a.height-Qe/2),this.bottomLeftBorderStroke=W>0||z>0?so(a.left+Be/2,a.top+Pe,W-Be/2,z-Qe/2,Ki.BOTTOM_LEFT):new jr(a.left+Be/2,a.top+a.height-Qe/2),this.topLeftBorderBox=d>0||m>0?so(a.left,a.top,d,m,Ki.TOP_LEFT):new jr(a.left,a.top),this.topRightBorderBox=w>0||E>0?so(a.left+se,a.top,w,E,Ki.TOP_RIGHT):new jr(a.left+a.width,a.top),this.bottomRightBorderBox=D>0||O>0?so(a.left+de,a.top+ce,D,O,Ki.BOTTOM_RIGHT):new jr(a.left+a.width,a.top+a.height),this.bottomLeftBorderBox=W>0||z>0?so(a.left,a.top+Pe,W,z,Ki.BOTTOM_LEFT):new jr(a.left,a.top+a.height),this.topLeftPaddingBox=d>0||m>0?so(a.left+Be,a.top+He,Math.max(0,d-Be),Math.max(0,m-He),Ki.TOP_LEFT):new jr(a.left+Be,a.top+He),this.topRightPaddingBox=w>0||E>0?so(a.left+Math.min(se,a.width-Xe),a.top+He,se>a.width+Xe?0:Math.max(0,w-Xe),Math.max(0,E-He),Ki.TOP_RIGHT):new jr(a.left+a.width-Xe,a.top+He),this.bottomRightPaddingBox=D>0||O>0?so(a.left+Math.min(de,a.width-Be),a.top+Math.min(ce,a.height-Qe),Math.max(0,D-Xe),Math.max(0,O-Qe),Ki.BOTTOM_RIGHT):new jr(a.left+a.width-Xe,a.top+a.height-Qe),this.bottomLeftPaddingBox=W>0||z>0?so(a.left+Be,a.top+Math.min(Pe,a.height-Qe),Math.max(0,W-Be),Math.max(0,z-Qe),Ki.BOTTOM_LEFT):new jr(a.left+Be,a.top+a.height-Qe),this.topLeftContentBox=d>0||m>0?so(a.left+Be+Te,a.top+He+Je,Math.max(0,d-(Be+Te)),Math.max(0,m-(He+Je)),Ki.TOP_LEFT):new jr(a.left+Be+Te,a.top+He+Je),this.topRightContentBox=w>0||E>0?so(a.left+Math.min(se,a.width+Be+Te),a.top+He+Je,se>a.width+Be+Te?0:w-Be+Te,E-(He+Je),Ki.TOP_RIGHT):new jr(a.left+a.width-(Xe+Ae),a.top+He+Je),this.bottomRightContentBox=D>0||O>0?so(a.left+Math.min(de,a.width-(Be+Te)),a.top+Math.min(ce,a.height+He+Je),Math.max(0,D-(Xe+Ae)),O-(Qe+me),Ki.BOTTOM_RIGHT):new jr(a.left+a.width-(Xe+Ae),a.top+a.height-(Qe+me)),this.bottomLeftContentBox=W>0||z>0?so(a.left+Be+Te,a.top+Pe,Math.max(0,W-(Be+Te)),z-(Qe+me),Ki.BOTTOM_LEFT):new jr(a.left+Be+Te,a.top+a.height-(Qe+me))}return e})(),Ki;(function(e){e[e.TOP_LEFT=0]="TOP_LEFT",e[e.TOP_RIGHT=1]="TOP_RIGHT",e[e.BOTTOM_RIGHT=2]="BOTTOM_RIGHT",e[e.BOTTOM_LEFT=3]="BOTTOM_LEFT"})(Ki||(Ki={}));var so=function(e,r,i,a,u){var d=4*((Math.sqrt(2)-1)/3),m=i*d,o=a*d,w=e+i,E=r+a;switch(u){case Ki.TOP_LEFT:return new p0(new jr(e,E),new jr(e,E-o),new jr(w-m,r),new jr(w,r));case Ki.TOP_RIGHT:return new p0(new jr(e,r),new jr(e+m,r),new jr(w,E-o),new jr(w,E));case Ki.BOTTOM_RIGHT:return new p0(new jr(w,r),new jr(w,r+o),new jr(e+m,E),new jr(e,E));case Ki.BOTTOM_LEFT:default:return new p0(new jr(w,E),new jr(w-m,E),new jr(e,r+o),new jr(e,r))}},ay=function(e){return[e.topLeftBorderBox,e.topRightBorderBox,e.bottomRightBorderBox,e.bottomLeftBorderBox]},Vz=function(e){return[e.topLeftContentBox,e.topRightContentBox,e.bottomRightContentBox,e.bottomLeftContentBox]},ly=function(e){return[e.topLeftPaddingBox,e.topRightPaddingBox,e.bottomRightPaddingBox,e.bottomLeftPaddingBox]},Gz=(function(){function e(r,i,a){this.offsetX=r,this.offsetY=i,this.matrix=a,this.type=0,this.target=6}return e})(),m0=(function(){function e(r,i){this.path=r,this.target=i,this.type=1}return e})(),Kz=(function(){function e(r){this.opacity=r,this.type=2,this.target=6}return e})(),qz=function(e){return e.type===0},qI=function(e){return e.type===1},$z=function(e){return e.type===2},ZB=function(e,r){return e.length===r.length?e.some(function(i,a){return i===r[a]}):!1},Wz=function(e,r,i,a,u){return e.map(function(d,m){switch(m){case 0:return d.add(r,i);case 1:return d.add(r+a,i);case 2:return d.add(r+a,i+u);case 3:return d.add(r,i+u)}return d})},$I=(function(){function e(r){this.element=r,this.inlineLevel=[],this.nonInlineLevel=[],this.negativeZIndex=[],this.zeroOrAutoZIndexOrTransformedOrOpacity=[],this.positiveZIndex=[],this.nonPositionedFloats=[],this.nonPositionedInlineLevel=[]}return e})(),WI=(function(){function e(r,i){if(this.container=r,this.parent=i,this.effects=[],this.curves=new jz(this.container),this.container.styles.opacity<1&&this.effects.push(new Kz(this.container.styles.opacity)),this.container.styles.transform!==null){var a=this.container.bounds.left+this.container.styles.transformOrigin[0].number,u=this.container.bounds.top+this.container.styles.transformOrigin[1].number,d=this.container.styles.transform;this.effects.push(new Gz(a,u,d))}if(this.container.styles.overflowX!==0){var m=ay(this.curves),o=ly(this.curves);ZB(m,o)?this.effects.push(new m0(m,6)):(this.effects.push(new m0(m,2)),this.effects.push(new m0(o,4)))}}return e.prototype.getEffects=function(r){for(var i=[2,3].indexOf(this.container.styles.position)===-1,a=this.parent,u=this.effects.slice(0);a;){var d=a.effects.filter(function(w){return!qI(w)});if(i||a.container.styles.position!==0||!a.parent){if(u.unshift.apply(u,d),i=[2,3].indexOf(a.container.styles.position)===-1,a.container.styles.overflowX!==0){var m=ay(a.curves),o=ly(a.curves);ZB(m,o)||u.unshift(new m0(o,6))}}else u.unshift.apply(u,d);a=a.parent}return u.filter(function(w){return ba(w.target,r)})},e})(),uw=function(e,r,i,a){e.container.elements.forEach(function(u){var d=ba(u.flags,4),m=ba(u.flags,2),o=new WI(u,e);ba(u.styles.display,2048)&&a.push(o);var w=ba(u.flags,8)?[]:a;if(d||m){var E=d||u.styles.isPositioned()?i:r,I=new $I(o);if(u.styles.isPositioned()||u.styles.opacity<1||u.styles.isTransformed()){var D=u.styles.zIndex.order;if(D<0){var O=0;E.negativeZIndex.some(function(W,z){return D>W.element.container.styles.zIndex.order?(O=z,!1):O>0}),E.negativeZIndex.splice(O,0,I)}else if(D>0){var P=0;E.positiveZIndex.some(function(W,z){return D>=W.element.container.styles.zIndex.order?(P=z+1,!1):P>0}),E.positiveZIndex.splice(P,0,I)}else E.zeroOrAutoZIndexOrTransformedOrOpacity.push(I)}else u.styles.isFloating()?E.nonPositionedFloats.push(I):E.nonPositionedInlineLevel.push(I);uw(o,I,d?I:i,w)}else u.styles.isInlineLevel()?r.inlineLevel.push(o):r.nonInlineLevel.push(o),uw(o,r,i,w);ba(u.flags,8)&&ZI(u,w)})},ZI=function(e,r){for(var i=e instanceof ow?e.start:1,a=e instanceof ow?e.reversed:!1,u=0;u<r.length;u++){var d=r[u];d.container instanceof MI&&typeof d.container.value=="number"&&d.container.value!==0&&(i=d.container.value),d.listValue=Hm(i,d.container.styles.listStyleType,!0),i+=a?-1:1}},Zz=function(e){var r=new WI(e,null),i=new $I(r),a=[];return uw(r,i,i,a),ZI(r.container,a),i},XB=function(e,r){switch(r){case 0:return nu(e.topLeftBorderBox,e.topLeftPaddingBox,e.topRightBorderBox,e.topRightPaddingBox);case 1:return nu(e.topRightBorderBox,e.topRightPaddingBox,e.bottomRightBorderBox,e.bottomRightPaddingBox);case 2:return nu(e.bottomRightBorderBox,e.bottomRightPaddingBox,e.bottomLeftBorderBox,e.bottomLeftPaddingBox);case 3:default:return nu(e.bottomLeftBorderBox,e.bottomLeftPaddingBox,e.topLeftBorderBox,e.topLeftPaddingBox)}},Xz=function(e,r){switch(r){case 0:return nu(e.topLeftBorderBox,e.topLeftBorderDoubleOuterBox,e.topRightBorderBox,e.topRightBorderDoubleOuterBox);case 1:return nu(e.topRightBorderBox,e.topRightBorderDoubleOuterBox,e.bottomRightBorderBox,e.bottomRightBorderDoubleOuterBox);case 2:return nu(e.bottomRightBorderBox,e.bottomRightBorderDoubleOuterBox,e.bottomLeftBorderBox,e.bottomLeftBorderDoubleOuterBox);case 3:default:return nu(e.bottomLeftBorderBox,e.bottomLeftBorderDoubleOuterBox,e.topLeftBorderBox,e.topLeftBorderDoubleOuterBox)}},Yz=function(e,r){switch(r){case 0:return nu(e.topLeftBorderDoubleInnerBox,e.topLeftPaddingBox,e.topRightBorderDoubleInnerBox,e.topRightPaddingBox);case 1:return nu(e.topRightBorderDoubleInnerBox,e.topRightPaddingBox,e.bottomRightBorderDoubleInnerBox,e.bottomRightPaddingBox);case 2:return nu(e.bottomRightBorderDoubleInnerBox,e.bottomRightPaddingBox,e.bottomLeftBorderDoubleInnerBox,e.bottomLeftPaddingBox);case 3:default:return nu(e.bottomLeftBorderDoubleInnerBox,e.bottomLeftPaddingBox,e.topLeftBorderDoubleInnerBox,e.topLeftPaddingBox)}},Jz=function(e,r){switch(r){case 0:return g0(e.topLeftBorderStroke,e.topRightBorderStroke);case 1:return g0(e.topRightBorderStroke,e.bottomRightBorderStroke);case 2:return g0(e.bottomRightBorderStroke,e.bottomLeftBorderStroke);case 3:default:return g0(e.bottomLeftBorderStroke,e.topLeftBorderStroke)}},g0=function(e,r){var i=[];return tu(e)?i.push(e.subdivide(.5,!1)):i.push(e),tu(r)?i.push(r.subdivide(.5,!0)):i.push(r),i},nu=function(e,r,i,a){var u=[];return tu(e)?u.push(e.subdivide(.5,!1)):u.push(e),tu(i)?u.push(i.subdivide(.5,!0)):u.push(i),tu(a)?u.push(a.subdivide(.5,!0).reverse()):u.push(a),tu(r)?u.push(r.subdivide(.5,!1).reverse()):u.push(r),u},XI=function(e){var r=e.bounds,i=e.styles;return r.add(i.borderLeftWidth,i.borderTopWidth,-(i.borderRightWidth+i.borderLeftWidth),-(i.borderTopWidth+i.borderBottomWidth))},cy=function(e){var r=e.styles,i=e.bounds,a=Ms(r.paddingLeft,i.width),u=Ms(r.paddingRight,i.width),d=Ms(r.paddingTop,i.width),m=Ms(r.paddingBottom,i.width);return i.add(a+r.borderLeftWidth,d+r.borderTopWidth,-(r.borderRightWidth+r.borderLeftWidth+a+u),-(r.borderTopWidth+r.borderBottomWidth+d+m))},eH=function(e,r){return e===0?r.bounds:e===2?cy(r):XI(r)},tH=function(e,r){return e===0?r.bounds:e===2?cy(r):XI(r)},k1=function(e,r,i){var a=eH(tp(e.styles.backgroundOrigin,r),e),u=tH(tp(e.styles.backgroundClip,r),e),d=rH(tp(e.styles.backgroundSize,r),i,a),m=d[0],o=d[1],w=_m(tp(e.styles.backgroundPosition,r),a.width-m,a.height-o),E=nH(tp(e.styles.backgroundRepeat,r),w,d,a,u),I=Math.round(a.left+w[0]),D=Math.round(a.top+w[1]);return[E,I,D,m,o]},qf=function(e){return us(e)&&e.value===up.AUTO},y0=function(e){return typeof e=="number"},rH=function(e,r,i){var a=r[0],u=r[1],d=r[2],m=e[0],o=e[1];if(!m)return[0,0];if(oa(m)&&o&&oa(o))return[Ms(m,i.width),Ms(o,i.height)];var w=y0(d);if(us(m)&&(m.value===up.CONTAIN||m.value===up.COVER)){if(y0(d)){var E=i.width/i.height;return E<d!=(m.value===up.COVER)?[i.width,i.width/d]:[i.height*d,i.height]}return[i.width,i.height]}var I=y0(a),D=y0(u),O=I||D;if(qf(m)&&(!o||qf(o))){if(I&&D)return[a,u];if(!w&&!O)return[i.width,i.height];if(O&&w){var P=I?a:u*d,W=D?u:a/d;return[P,W]}var z=I?a:i.width,H=D?u:i.height;return[z,H]}if(w){var Z=0,se=0;return oa(m)?Z=Ms(m,i.width):oa(o)&&(se=Ms(o,i.height)),qf(m)?Z=se*d:(!o||qf(o))&&(se=Z/d),[Z,se]}var ce=null,de=null;if(oa(m)?ce=Ms(m,i.width):o&&oa(o)&&(de=Ms(o,i.height)),ce!==null&&(!o||qf(o))&&(de=I&&D?ce/a*u:i.height),de!==null&&qf(m)&&(ce=I&&D?de/u*a:i.width),ce!==null&&de!==null)return[ce,de];throw new Error("Unable to calculate background-size for element")},tp=function(e,r){var i=e[r];return typeof i>"u"?e[0]:i},nH=function(e,r,i,a,u){var d=r[0],m=r[1],o=i[0],w=i[1];switch(e){case 2:return[new jr(Math.round(a.left),Math.round(a.top+m)),new jr(Math.round(a.left+a.width),Math.round(a.top+m)),new jr(Math.round(a.left+a.width),Math.round(w+a.top+m)),new jr(Math.round(a.left),Math.round(w+a.top+m))];case 3:return[new jr(Math.round(a.left+d),Math.round(a.top)),new jr(Math.round(a.left+d+o),Math.round(a.top)),new jr(Math.round(a.left+d+o),Math.round(a.height+a.top)),new jr(Math.round(a.left+d),Math.round(a.height+a.top))];case 1:return[new jr(Math.round(a.left+d),Math.round(a.top+m)),new jr(Math.round(a.left+d+o),Math.round(a.top+m)),new jr(Math.round(a.left+d+o),Math.round(a.top+m+w)),new jr(Math.round(a.left+d),Math.round(a.top+m+w))];default:return[new jr(Math.round(u.left),Math.round(u.top)),new jr(Math.round(u.left+u.width),Math.round(u.top)),new jr(Math.round(u.left+u.width),Math.round(u.height+u.top)),new jr(Math.round(u.left),Math.round(u.height+u.top))]}},iH="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",YB="Hidden Text",sH=(function(){function e(r){this._data={},this._document=r}return e.prototype.parseMetrics=function(r,i){var a=this._document.createElement("div"),u=this._document.createElement("img"),d=this._document.createElement("span"),m=this._document.body;a.style.visibility="hidden",a.style.fontFamily=r,a.style.fontSize=i,a.style.margin="0",a.style.padding="0",a.style.whiteSpace="nowrap",m.appendChild(a),u.src=iH,u.width=1,u.height=1,u.style.margin="0",u.style.padding="0",u.style.verticalAlign="baseline",d.style.fontFamily=r,d.style.fontSize=i,d.style.margin="0",d.style.padding="0",d.appendChild(this._document.createTextNode(YB)),a.appendChild(d),a.appendChild(u);var o=u.offsetTop-d.offsetTop+2;a.removeChild(d),a.appendChild(this._document.createTextNode(YB)),a.style.lineHeight="normal",u.style.verticalAlign="super";var w=u.offsetTop-a.offsetTop+2;return m.removeChild(a),{baseline:o,middle:w}},e.prototype.getMetrics=function(r,i){var a=r+" "+i;return typeof this._data[a]>"u"&&(this._data[a]=this.parseMetrics(r,i)),this._data[a]},e})(),YI=(function(){function e(r,i){this.context=r,this.options=i}return e})(),oH=1e4,aH=(function(e){Lu(r,e);function r(i,a){var u=e.call(this,i,a)||this;return u._activeEffects=[],u.canvas=a.canvas?a.canvas:document.createElement("canvas"),u.ctx=u.canvas.getContext("2d"),a.canvas||(u.canvas.width=Math.floor(a.width*a.scale),u.canvas.height=Math.floor(a.height*a.scale),u.canvas.style.width=a.width+"px",u.canvas.style.height=a.height+"px"),u.fontMetrics=new sH(document),u.ctx.scale(u.options.scale,u.options.scale),u.ctx.translate(-a.x,-a.y),u.ctx.textBaseline="bottom",u._activeEffects=[],u.context.logger.debug("Canvas renderer initialized ("+a.width+"x"+a.height+") with scale "+a.scale),u}return r.prototype.applyEffects=function(i){for(var a=this;this._activeEffects.length;)this.popEffect();i.forEach(function(u){return a.applyEffect(u)})},r.prototype.applyEffect=function(i){this.ctx.save(),$z(i)&&(this.ctx.globalAlpha=i.opacity),qz(i)&&(this.ctx.translate(i.offsetX,i.offsetY),this.ctx.transform(i.matrix[0],i.matrix[1],i.matrix[2],i.matrix[3],i.matrix[4],i.matrix[5]),this.ctx.translate(-i.offsetX,-i.offsetY)),qI(i)&&(this.path(i.path),this.ctx.clip()),this._activeEffects.push(i)},r.prototype.popEffect=function(){this._activeEffects.pop(),this.ctx.restore()},r.prototype.renderStack=function(i){return bc(this,void 0,void 0,function(){var a;return Yl(this,function(u){switch(u.label){case 0:return a=i.element.container.styles,a.isVisible()?[4,this.renderStackContent(i)]:[3,2];case 1:u.sent(),u.label=2;case 2:return[2]}})})},r.prototype.renderNode=function(i){return bc(this,void 0,void 0,function(){return Yl(this,function(a){switch(a.label){case 0:if(ba(i.container.flags,16))debugger;return i.container.styles.isVisible()?[4,this.renderNodeBackgroundAndBorders(i)]:[3,3];case 1:return a.sent(),[4,this.renderNodeContent(i)];case 2:a.sent(),a.label=3;case 3:return[2]}})})},r.prototype.renderTextWithLetterSpacing=function(i,a,u){var d=this;if(a===0)this.ctx.fillText(i.text,i.bounds.left,i.bounds.top+u);else{var m=cx(i.text);m.reduce(function(o,w){return d.ctx.fillText(w,o,i.bounds.top+u),o+d.ctx.measureText(w).width},i.bounds.left)}},r.prototype.createFontStyle=function(i){var a=i.fontVariant.filter(function(m){return m==="normal"||m==="small-caps"}).join(""),u=hH(i.fontFamily).join(", "),d=eg(i.fontSize)?""+i.fontSize.number+i.fontSize.unit:i.fontSize.number+"px";return[[i.fontStyle,a,i.fontWeight,d,u].join(" "),u,d]},r.prototype.renderTextNode=function(i,a){return bc(this,void 0,void 0,function(){var u,d,m,o,w,E,I,D,O=this;return Yl(this,function(P){return u=this.createFontStyle(a),d=u[0],m=u[1],o=u[2],this.ctx.font=d,this.ctx.direction=a.direction===1?"rtl":"ltr",this.ctx.textAlign="left",this.ctx.textBaseline="alphabetic",w=this.fontMetrics.getMetrics(m,o),E=w.baseline,I=w.middle,D=a.paintOrder,i.textBounds.forEach(function(W){D.forEach(function(z){switch(z){case 0:O.ctx.fillStyle=tl(a.color),O.renderTextWithLetterSpacing(W,a.letterSpacing,E);var H=a.textShadow;H.length&&W.text.trim().length&&(H.slice(0).reverse().forEach(function(Z){O.ctx.shadowColor=tl(Z.color),O.ctx.shadowOffsetX=Z.offsetX.number*O.options.scale,O.ctx.shadowOffsetY=Z.offsetY.number*O.options.scale,O.ctx.shadowBlur=Z.blur.number,O.renderTextWithLetterSpacing(W,a.letterSpacing,E)}),O.ctx.shadowColor="",O.ctx.shadowOffsetX=0,O.ctx.shadowOffsetY=0,O.ctx.shadowBlur=0),a.textDecorationLine.length&&(O.ctx.fillStyle=tl(a.textDecorationColor||a.color),a.textDecorationLine.forEach(function(Z){switch(Z){case 1:O.ctx.fillRect(W.bounds.left,Math.round(W.bounds.top+E),W.bounds.width,1);break;case 2:O.ctx.fillRect(W.bounds.left,Math.round(W.bounds.top),W.bounds.width,1);break;case 3:O.ctx.fillRect(W.bounds.left,Math.ceil(W.bounds.top+I),W.bounds.width,1);break}}));break;case 1:a.webkitTextStrokeWidth&&W.text.trim().length&&(O.ctx.strokeStyle=tl(a.webkitTextStrokeColor),O.ctx.lineWidth=a.webkitTextStrokeWidth,O.ctx.lineJoin=window.chrome?"miter":"round",O.ctx.strokeText(W.text,W.bounds.left,W.bounds.top+E)),O.ctx.strokeStyle="",O.ctx.lineWidth=0,O.ctx.lineJoin="miter";break}})}),[2]})})},r.prototype.renderReplacedElement=function(i,a,u){if(u&&i.intrinsicWidth>0&&i.intrinsicHeight>0){var d=cy(i),m=ly(a);this.path(m),this.ctx.save(),this.ctx.clip(),this.ctx.drawImage(u,0,0,i.intrinsicWidth,i.intrinsicHeight,d.left,d.top,d.width,d.height),this.ctx.restore()}},r.prototype.renderNodeContent=function(i){return bc(this,void 0,void 0,function(){var a,u,d,m,o,w,se,se,E,I,D,O,de,P,W,Pe,z,H,Z,se,ce,de,Pe;return Yl(this,function(He){switch(He.label){case 0:this.applyEffects(i.getEffects(4)),a=i.container,u=i.curves,d=a.styles,m=0,o=a.textNodes,He.label=1;case 1:return m<o.length?(w=o[m],[4,this.renderTextNode(w,d)]):[3,4];case 2:He.sent(),He.label=3;case 3:return m++,[3,1];case 4:if(!(a instanceof TI))return[3,8];He.label=5;case 5:return He.trys.push([5,7,,8]),[4,this.context.cache.match(a.src)];case 6:return se=He.sent(),this.renderReplacedElement(a,u,se),[3,8];case 7:return He.sent(),this.context.logger.error("Error loading image "+a.src),[3,8];case 8:if(a instanceof PI&&this.renderReplacedElement(a,u,a.canvas),!(a instanceof LI))return[3,12];He.label=9;case 9:return He.trys.push([9,11,,12]),[4,this.context.cache.match(a.svg)];case 10:return se=He.sent(),this.renderReplacedElement(a,u,se),[3,12];case 11:return He.sent(),this.context.logger.error("Error loading svg "+a.svg.substring(0,255)),[3,12];case 12:return a instanceof DI&&a.tree?(E=new r(this.context,{scale:this.options.scale,backgroundColor:a.backgroundColor,x:0,y:0,width:a.width,height:a.height}),[4,E.render(a.tree)]):[3,14];case 13:I=He.sent(),a.width&&a.height&&this.ctx.drawImage(I,0,0,a.width,a.height,a.bounds.left,a.bounds.top,a.bounds.width,a.bounds.height),He.label=14;case 14:if(a instanceof Ax&&(D=Math.min(a.bounds.width,a.bounds.height),a.type===ny?a.checked&&(this.ctx.save(),this.path([new jr(a.bounds.left+D*.39363,a.bounds.top+D*.79),new jr(a.bounds.left+D*.16,a.bounds.top+D*.5549),new jr(a.bounds.left+D*.27347,a.bounds.top+D*.44071),new jr(a.bounds.left+D*.39694,a.bounds.top+D*.5649),new jr(a.bounds.left+D*.72983,a.bounds.top+D*.23),new jr(a.bounds.left+D*.84,a.bounds.top+D*.34085),new jr(a.bounds.left+D*.39363,a.bounds.top+D*.79)]),this.ctx.fillStyle=tl(QB),this.ctx.fill(),this.ctx.restore()):a.type===iy&&a.checked&&(this.ctx.save(),this.ctx.beginPath(),this.ctx.arc(a.bounds.left+D/2,a.bounds.top+D/2,D/4,0,Math.PI*2,!0),this.ctx.fillStyle=tl(QB),this.ctx.fill(),this.ctx.restore())),lH(a)&&a.value.length){switch(O=this.createFontStyle(d),de=O[0],P=O[1],W=this.fontMetrics.getMetrics(de,P).baseline,this.ctx.font=de,this.ctx.fillStyle=tl(d.color),this.ctx.textBaseline="alphabetic",this.ctx.textAlign=AH(a.styles.textAlign),Pe=cy(a),z=0,a.styles.textAlign){case 1:z+=Pe.width/2;break;case 2:z+=Pe.width;break}H=Pe.add(z,0,0,-Pe.height/2+1),this.ctx.save(),this.path([new jr(Pe.left,Pe.top),new jr(Pe.left+Pe.width,Pe.top),new jr(Pe.left+Pe.width,Pe.top+Pe.height),new jr(Pe.left,Pe.top+Pe.height)]),this.ctx.clip(),this.renderTextWithLetterSpacing(new Tm(a.value,H),d.letterSpacing,W),this.ctx.restore(),this.ctx.textBaseline="alphabetic",this.ctx.textAlign="left"}if(!ba(a.styles.display,2048))return[3,20];if(a.styles.listStyleImage===null)return[3,19];if(Z=a.styles.listStyleImage,Z.type!==0)return[3,18];se=void 0,ce=Z.url,He.label=15;case 15:return He.trys.push([15,17,,18]),[4,this.context.cache.match(ce)];case 16:return se=He.sent(),this.ctx.drawImage(se,a.bounds.left-(se.width+10),a.bounds.top),[3,18];case 17:return He.sent(),this.context.logger.error("Error loading list-style-image "+ce),[3,18];case 18:return[3,20];case 19:i.listValue&&a.styles.listStyleType!==-1&&(de=this.createFontStyle(d)[0],this.ctx.font=de,this.ctx.fillStyle=tl(d.color),this.ctx.textBaseline="middle",this.ctx.textAlign="right",Pe=new zh(a.bounds.left,a.bounds.top+Ms(a.styles.paddingTop,a.bounds.width),a.bounds.width,xB(d.lineHeight,d.fontSize.number)/2+1),this.renderTextWithLetterSpacing(new Tm(i.listValue,Pe),d.letterSpacing,xB(d.lineHeight,d.fontSize.number)/2+2),this.ctx.textBaseline="bottom",this.ctx.textAlign="left"),He.label=20;case 20:return[2]}})})},r.prototype.renderStackContent=function(i){return bc(this,void 0,void 0,function(){var a,u,Z,d,m,Z,o,w,Z,E,I,Z,D,O,Z,P,W,Z,z,H,Z;return Yl(this,function(se){switch(se.label){case 0:if(ba(i.element.container.flags,16))debugger;return[4,this.renderNodeBackgroundAndBorders(i.element)];case 1:se.sent(),a=0,u=i.negativeZIndex,se.label=2;case 2:return a<u.length?(Z=u[a],[4,this.renderStack(Z)]):[3,5];case 3:se.sent(),se.label=4;case 4:return a++,[3,2];case 5:return[4,this.renderNodeContent(i.element)];case 6:se.sent(),d=0,m=i.nonInlineLevel,se.label=7;case 7:return d<m.length?(Z=m[d],[4,this.renderNode(Z)]):[3,10];case 8:se.sent(),se.label=9;case 9:return d++,[3,7];case 10:o=0,w=i.nonPositionedFloats,se.label=11;case 11:return o<w.length?(Z=w[o],[4,this.renderStack(Z)]):[3,14];case 12:se.sent(),se.label=13;case 13:return o++,[3,11];case 14:E=0,I=i.nonPositionedInlineLevel,se.label=15;case 15:return E<I.length?(Z=I[E],[4,this.renderStack(Z)]):[3,18];case 16:se.sent(),se.label=17;case 17:return E++,[3,15];case 18:D=0,O=i.inlineLevel,se.label=19;case 19:return D<O.length?(Z=O[D],[4,this.renderNode(Z)]):[3,22];case 20:se.sent(),se.label=21;case 21:return D++,[3,19];case 22:P=0,W=i.zeroOrAutoZIndexOrTransformedOrOpacity,se.label=23;case 23:return P<W.length?(Z=W[P],[4,this.renderStack(Z)]):[3,26];case 24:se.sent(),se.label=25;case 25:return P++,[3,23];case 26:z=0,H=i.positiveZIndex,se.label=27;case 27:return z<H.length?(Z=H[z],[4,this.renderStack(Z)]):[3,30];case 28:se.sent(),se.label=29;case 29:return z++,[3,27];case 30:return[2]}})})},r.prototype.mask=function(i){this.ctx.beginPath(),this.ctx.moveTo(0,0),this.ctx.lineTo(this.canvas.width,0),this.ctx.lineTo(this.canvas.width,this.canvas.height),this.ctx.lineTo(0,this.canvas.height),this.ctx.lineTo(0,0),this.formatPath(i.slice(0).reverse()),this.ctx.closePath()},r.prototype.path=function(i){this.ctx.beginPath(),this.formatPath(i),this.ctx.closePath()},r.prototype.formatPath=function(i){var a=this;i.forEach(function(u,d){var m=tu(u)?u.start:u;d===0?a.ctx.moveTo(m.x,m.y):a.ctx.lineTo(m.x,m.y),tu(u)&&a.ctx.bezierCurveTo(u.startControl.x,u.startControl.y,u.endControl.x,u.endControl.y,u.end.x,u.end.y)})},r.prototype.renderRepeat=function(i,a,u,d){this.path(i),this.ctx.fillStyle=a,this.ctx.translate(u,d),this.ctx.fill(),this.ctx.translate(-u,-d)},r.prototype.resizeImage=function(i,a,u){var d;if(i.width===a&&i.height===u)return i;var m=(d=this.canvas.ownerDocument)!==null&&d!==void 0?d:document,o=m.createElement("canvas");o.width=Math.max(1,a),o.height=Math.max(1,u);var w=o.getContext("2d");return w.drawImage(i,0,0,i.width,i.height,0,0,a,u),o},r.prototype.renderBackgroundImage=function(i){return bc(this,void 0,void 0,function(){var a,u,d,m,o,w;return Yl(this,function(E){switch(E.label){case 0:a=i.styles.backgroundImage.length-1,u=function(I){var D,O,P,Je,it,ot,Te,Ie,Qe,W,Je,it,ot,Te,Ie,z,H,Z,se,ce,de,Pe,He,Xe,Qe,Be,Je,Ae,me,Te,Ie,ut,it,ot,ke,Ne,yt,Ce,ie,Ee,Le,Ve;return Yl(this,function(nt){switch(nt.label){case 0:if(I.type!==0)return[3,5];D=void 0,O=I.url,nt.label=1;case 1:return nt.trys.push([1,3,,4]),[4,d.context.cache.match(O)];case 2:return D=nt.sent(),[3,4];case 3:return nt.sent(),d.context.logger.error("Error loading background-image "+O),[3,4];case 4:return D&&(P=k1(i,a,[D.width,D.height,D.width/D.height]),Je=P[0],it=P[1],ot=P[2],Te=P[3],Ie=P[4],Qe=d.ctx.createPattern(d.resizeImage(D,Te,Ie),"repeat"),d.renderRepeat(Je,Qe,it,ot)),[3,6];case 5:qQ(I)?(W=k1(i,a,[null,null,null]),Je=W[0],it=W[1],ot=W[2],Te=W[3],Ie=W[4],z=HQ(I.angle,Te,Ie),H=z[0],Z=z[1],se=z[2],ce=z[3],de=z[4],Pe=document.createElement("canvas"),Pe.width=Te,Pe.height=Ie,He=Pe.getContext("2d"),Xe=He.createLinearGradient(Z,ce,se,de),_B(I.stops,H).forEach(function(et){return Xe.addColorStop(et.stop,tl(et.color))}),He.fillStyle=Xe,He.fillRect(0,0,Te,Ie),Te>0&&Ie>0&&(Qe=d.ctx.createPattern(Pe,"repeat"),d.renderRepeat(Je,Qe,it,ot))):$Q(I)&&(Be=k1(i,a,[null,null,null]),Je=Be[0],Ae=Be[1],me=Be[2],Te=Be[3],Ie=Be[4],ut=I.position.length===0?[ox]:I.position,it=Ms(ut[0],Te),ot=Ms(ut[ut.length-1],Ie),ke=jQ(I,it,ot,Te,Ie),Ne=ke[0],yt=ke[1],Ne>0&&yt>0&&(Ce=d.ctx.createRadialGradient(Ae+it,me+ot,0,Ae+it,me+ot,Ne),_B(I.stops,Ne*2).forEach(function(et){return Ce.addColorStop(et.stop,tl(et.color))}),d.path(Je),d.ctx.fillStyle=Ce,Ne!==yt?(ie=i.bounds.left+.5*i.bounds.width,Ee=i.bounds.top+.5*i.bounds.height,Le=yt/Ne,Ve=1/Le,d.ctx.save(),d.ctx.translate(ie,Ee),d.ctx.transform(1,0,0,Le,0,0),d.ctx.translate(-ie,-Ee),d.ctx.fillRect(Ae,Ve*(me-Ee)+Ee,Te,Ie*Ve),d.ctx.restore()):d.ctx.fill())),nt.label=6;case 6:return a--,[2]}})},d=this,m=0,o=i.styles.backgroundImage.slice(0).reverse(),E.label=1;case 1:return m<o.length?(w=o[m],[5,u(w)]):[3,4];case 2:E.sent(),E.label=3;case 3:return m++,[3,1];case 4:return[2]}})})},r.prototype.renderSolidBorder=function(i,a,u){return bc(this,void 0,void 0,function(){return Yl(this,function(d){return this.path(XB(u,a)),this.ctx.fillStyle=tl(i),this.ctx.fill(),[2]})})},r.prototype.renderDoubleBorder=function(i,a,u,d){return bc(this,void 0,void 0,function(){var m,o;return Yl(this,function(w){switch(w.label){case 0:return a<3?[4,this.renderSolidBorder(i,u,d)]:[3,2];case 1:return w.sent(),[2];case 2:return m=Xz(d,u),this.path(m),this.ctx.fillStyle=tl(i),this.ctx.fill(),o=Yz(d,u),this.path(o),this.ctx.fill(),[2]}})})},r.prototype.renderNodeBackgroundAndBorders=function(i){return bc(this,void 0,void 0,function(){var a,u,d,m,o,w,E,I,D=this;return Yl(this,function(O){switch(O.label){case 0:return this.applyEffects(i.getEffects(2)),a=i.container.styles,u=!vd(a.backgroundColor)||a.backgroundImage.length,d=[{style:a.borderTopStyle,color:a.borderTopColor,width:a.borderTopWidth},{style:a.borderRightStyle,color:a.borderRightColor,width:a.borderRightWidth},{style:a.borderBottomStyle,color:a.borderBottomColor,width:a.borderBottomWidth},{style:a.borderLeftStyle,color:a.borderLeftColor,width:a.borderLeftWidth}],m=cH(tp(a.backgroundClip,0),i.curves),u||a.boxShadow.length?(this.ctx.save(),this.path(m),this.ctx.clip(),vd(a.backgroundColor)||(this.ctx.fillStyle=tl(a.backgroundColor),this.ctx.fill()),[4,this.renderBackgroundImage(i.container)]):[3,2];case 1:O.sent(),this.ctx.restore(),a.boxShadow.slice(0).reverse().forEach(function(P){D.ctx.save();var W=ay(i.curves),z=P.inset?0:oH,H=Wz(W,-z+(P.inset?1:-1)*P.spread.number,(P.inset?1:-1)*P.spread.number,P.spread.number*(P.inset?-2:2),P.spread.number*(P.inset?-2:2));P.inset?(D.path(W),D.ctx.clip(),D.mask(H)):(D.mask(W),D.ctx.clip(),D.path(H)),D.ctx.shadowOffsetX=P.offsetX.number+z,D.ctx.shadowOffsetY=P.offsetY.number,D.ctx.shadowColor=tl(P.color),D.ctx.shadowBlur=P.blur.number,D.ctx.fillStyle=P.inset?tl(P.color):"rgba(0,0,0,1)",D.ctx.fill(),D.ctx.restore()}),O.label=2;case 2:o=0,w=0,E=d,O.label=3;case 3:return w<E.length?(I=E[w],I.style!==0&&!vd(I.color)&&I.width>0?I.style!==2?[3,5]:[4,this.renderDashedDottedBorder(I.color,I.width,o,i.curves,2)]:[3,11]):[3,13];case 4:return O.sent(),[3,11];case 5:return I.style!==3?[3,7]:[4,this.renderDashedDottedBorder(I.color,I.width,o,i.curves,3)];case 6:return O.sent(),[3,11];case 7:return I.style!==4?[3,9]:[4,this.renderDoubleBorder(I.color,I.width,o,i.curves)];case 8:return O.sent(),[3,11];case 9:return[4,this.renderSolidBorder(I.color,o,i.curves)];case 10:O.sent(),O.label=11;case 11:o++,O.label=12;case 12:return w++,[3,3];case 13:return[2]}})})},r.prototype.renderDashedDottedBorder=function(i,a,u,d,m){return bc(this,void 0,void 0,function(){var o,w,E,I,D,O,P,W,z,H,Z,se,ce,de,Pe,He,Pe,He;return Yl(this,function(Xe){return this.ctx.save(),o=Jz(d,u),w=XB(d,u),m===2&&(this.path(w),this.ctx.clip()),tu(w[0])?(E=w[0].start.x,I=w[0].start.y):(E=w[0].x,I=w[0].y),tu(w[1])?(D=w[1].end.x,O=w[1].end.y):(D=w[1].x,O=w[1].y),u===0||u===2?P=Math.abs(E-D):P=Math.abs(I-O),this.ctx.beginPath(),m===3?this.formatPath(o):this.formatPath(w.slice(0,2)),W=a<3?a*3:a*2,z=a<3?a*2:a,m===3&&(W=a,z=a),H=!0,P<=W*2?H=!1:P<=W*2+z?(Z=P/(2*W+z),W*=Z,z*=Z):(se=Math.floor((P+z)/(W+z)),ce=(P-se*W)/(se-1),de=(P-(se+1)*W)/se,z=de<=0||Math.abs(z-ce)<Math.abs(z-de)?ce:de),H&&(m===3?this.ctx.setLineDash([0,W+z]):this.ctx.setLineDash([W,z])),m===3?(this.ctx.lineCap="round",this.ctx.lineWidth=a):this.ctx.lineWidth=a*2+1.1,this.ctx.strokeStyle=tl(i),this.ctx.stroke(),this.ctx.setLineDash([]),m===2&&(tu(w[0])&&(Pe=w[3],He=w[0],this.ctx.beginPath(),this.formatPath([new jr(Pe.end.x,Pe.end.y),new jr(He.start.x,He.start.y)]),this.ctx.stroke()),tu(w[1])&&(Pe=w[1],He=w[2],this.ctx.beginPath(),this.formatPath([new jr(Pe.end.x,Pe.end.y),new jr(He.start.x,He.start.y)]),this.ctx.stroke())),this.ctx.restore(),[2]})})},r.prototype.render=function(i){return bc(this,void 0,void 0,function(){var a;return Yl(this,function(u){switch(u.label){case 0:return this.options.backgroundColor&&(this.ctx.fillStyle=tl(this.options.backgroundColor),this.ctx.fillRect(this.options.x,this.options.y,this.options.width,this.options.height)),a=Zz(i),[4,this.renderStack(a)];case 1:return u.sent(),this.applyEffects([]),[2,this.canvas]}})})},r})(YI),lH=function(e){return e instanceof UI||e instanceof kI?!0:e instanceof Ax&&e.type!==iy&&e.type!==ny},cH=function(e,r){switch(e){case 0:return ay(r);case 2:return Vz(r);case 1:default:return ly(r)}},AH=function(e){switch(e){case 1:return"center";case 2:return"right";case 0:default:return"left"}},uH=["-apple-system","system-ui"],hH=function(e){return/iPhone OS 15_(0|1)/.test(window.navigator.userAgent)?e.filter(function(r){return uH.indexOf(r)===-1}):e},dH=(function(e){Lu(r,e);function r(i,a){var u=e.call(this,i,a)||this;return u.canvas=a.canvas?a.canvas:document.createElement("canvas"),u.ctx=u.canvas.getContext("2d"),u.options=a,u.canvas.width=Math.floor(a.width*a.scale),u.canvas.height=Math.floor(a.height*a.scale),u.canvas.style.width=a.width+"px",u.canvas.style.height=a.height+"px",u.ctx.scale(u.options.scale,u.options.scale),u.ctx.translate(-a.x,-a.y),u.context.logger.debug("EXPERIMENTAL ForeignObject renderer initialized ("+a.width+"x"+a.height+" at "+a.x+","+a.y+") with scale "+a.scale),u}return r.prototype.render=function(i){return bc(this,void 0,void 0,function(){var a,u;return Yl(this,function(d){switch(d.label){case 0:return a=sw(this.options.width*this.options.scale,this.options.height*this.options.scale,this.options.scale,this.options.scale,i),[4,fH(a)];case 1:return u=d.sent(),this.options.backgroundColor&&(this.ctx.fillStyle=tl(this.options.backgroundColor),this.ctx.fillRect(0,0,this.options.width*this.options.scale,this.options.height*this.options.scale)),this.ctx.drawImage(u,-this.options.x*this.options.scale,-this.options.y*this.options.scale),[2,this.canvas]}})})},r})(YI),fH=function(e){return new Promise(function(r,i){var a=new Image;a.onload=function(){r(a)},a.onerror=i,a.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(e))})},pH=(function(){function e(r){var i=r.id,a=r.enabled;this.id=i,this.enabled=a,this.start=Date.now()}return e.prototype.debug=function(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];this.enabled&&(typeof window<"u"&&window.console&&typeof console.debug=="function"?console.debug.apply(console,Zg([this.id,this.getTime()+"ms"],r)):this.info.apply(this,r))},e.prototype.getTime=function(){return Date.now()-this.start},e.prototype.info=function(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];this.enabled&&typeof window<"u"&&window.console&&typeof console.info=="function"&&console.info.apply(console,Zg([this.id,this.getTime()+"ms"],r))},e.prototype.warn=function(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];this.enabled&&(typeof window<"u"&&window.console&&typeof console.warn=="function"?console.warn.apply(console,Zg([this.id,this.getTime()+"ms"],r)):this.info.apply(this,r))},e.prototype.error=function(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];this.enabled&&(typeof window<"u"&&window.console&&typeof console.error=="function"?console.error.apply(console,Zg([this.id,this.getTime()+"ms"],r)):this.info.apply(this,r))},e.instances={},e})(),mH=(function(){function e(r,i){var a;this.windowBounds=i,this.instanceName="#"+e.instanceCount++,this.logger=new pH({id:this.instanceName,enabled:r.logging}),this.cache=(a=r.cache)!==null&&a!==void 0?a:new Dz(this,r)}return e.instanceCount=1,e})(),JI=function(e,r){return r===void 0&&(r={}),gH(e,r)};typeof window<"u"&&KI.setContext(window);var gH=function(e,r){return bc(void 0,void 0,void 0,function(){var i,a,u,d,m,o,w,E,I,D,O,P,W,z,H,Z,se,ce,de,Pe,Xe,He,Xe,Qe,Be,Je,Ae,me,Te,Ie,ut,it,ot,ke,Ne,yt,Ce,ie,Ee,Le;return Yl(this,function(Ve){switch(Ve.label){case 0:if(!e||typeof e!="object")return[2,Promise.reject("Invalid element provided as first argument")];if(i=e.ownerDocument,!i)throw new Error("Element is not attached to a Document");if(a=i.defaultView,!a)throw new Error("Document is not attached to a Window");return u={allowTaint:(Qe=r.allowTaint)!==null&&Qe!==void 0?Qe:!1,imageTimeout:(Be=r.imageTimeout)!==null&&Be!==void 0?Be:15e3,proxy:r.proxy,useCORS:(Je=r.useCORS)!==null&&Je!==void 0?Je:!1},d=V_({logging:(Ae=r.logging)!==null&&Ae!==void 0?Ae:!0,cache:r.cache},u),m={windowWidth:(me=r.windowWidth)!==null&&me!==void 0?me:a.innerWidth,windowHeight:(Te=r.windowHeight)!==null&&Te!==void 0?Te:a.innerHeight,scrollX:(Ie=r.scrollX)!==null&&Ie!==void 0?Ie:a.pageXOffset,scrollY:(ut=r.scrollY)!==null&&ut!==void 0?ut:a.pageYOffset},o=new zh(m.scrollX,m.scrollY,m.windowWidth,m.windowHeight),w=new mH(d,o),E=(it=r.foreignObjectRendering)!==null&&it!==void 0?it:!1,I={allowTaint:(ot=r.allowTaint)!==null&&ot!==void 0?ot:!1,onclone:r.onclone,ignoreElements:r.ignoreElements,inlineImages:E,copyStyles:E},w.logger.debug("Starting document clone with size "+o.width+"x"+o.height+" scrolled to "+-o.left+","+-o.top),D=new $B(w,e,I),O=D.clonedReferenceElement,O?[4,D.toIFrame(i,o)]:[2,Promise.reject("Unable to find element in cloned iframe")];case 1:return P=Ve.sent(),W=ux(O)||vz(O)?WN(O.ownerDocument):zy(w,O),z=W.width,H=W.height,Z=W.left,se=W.top,ce=yH(w,O,r.backgroundColor),de={canvas:r.canvas,backgroundColor:ce,scale:(Ne=(ke=r.scale)!==null&&ke!==void 0?ke:a.devicePixelRatio)!==null&&Ne!==void 0?Ne:1,x:((yt=r.x)!==null&&yt!==void 0?yt:0)+Z,y:((Ce=r.y)!==null&&Ce!==void 0?Ce:0)+se,width:(ie=r.width)!==null&&ie!==void 0?ie:Math.ceil(z),height:(Ee=r.height)!==null&&Ee!==void 0?Ee:Math.ceil(H)},E?(w.logger.debug("Document cloned, using foreign object rendering"),Xe=new dH(w,de),[4,Xe.render(O)]):[3,3];case 2:return Pe=Ve.sent(),[3,5];case 3:return w.logger.debug("Document cloned, element located at "+Z+","+se+" with size "+z+"x"+H+" using computed rendering"),w.logger.debug("Starting DOM parsing"),He=NI(w,O),ce===He.styles.backgroundColor&&(He.styles.backgroundColor=Nh.TRANSPARENT),w.logger.debug("Starting renderer for element at "+de.x+","+de.y+" with size "+de.width+"x"+de.height),Xe=new aH(w,de),[4,Xe.render(He)];case 4:Pe=Ve.sent(),Ve.label=5;case 5:return(!((Le=r.removeContainer)!==null&&Le!==void 0)||Le)&&($B.destroy(P)||w.logger.error("Cannot detach cloned iframe as it is not in the DOM anymore")),w.logger.debug("Finished rendering"),[2,Pe]}})})},yH=function(e,r,i){var a=r.ownerDocument,u=a.documentElement?Fm(e,getComputedStyle(a.documentElement).backgroundColor):Nh.TRANSPARENT,d=a.body?Fm(e,getComputedStyle(a.body).backgroundColor):Nh.TRANSPARENT,m=typeof i=="string"?Fm(e,i):i===null?Nh.TRANSPARENT:4294967295;return r===a.documentElement?vd(u)?vd(d)?m:d:u:m};const vH=Object.freeze(Object.defineProperty({__proto__:null,default:JI},Symbol.toStringTag,{value:"Module"})),_H="modulepreload",wH=function(e){return"/Domapus/"+e},JB={},U1=function(r,i,a){let u=Promise.resolve();if(i&&i.length>0){let w=function(E){return Promise.all(E.map(I=>Promise.resolve(I).then(D=>({status:"fulfilled",value:D}),D=>({status:"rejected",reason:D}))))};document.getElementsByTagName("link");const m=document.querySelector("meta[property=csp-nonce]"),o=m?.nonce||m?.getAttribute("nonce");u=w(i.map(E=>{if(E=wH(E),E in JB)return;JB[E]=!0;const I=E.endsWith(".css"),D=I?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${E}"]${D}`))return;const O=document.createElement("link");if(O.rel=I?"stylesheet":_H,I||(O.as="script"),O.crossOrigin="",O.href=E,o&&O.setAttribute("nonce",o),document.head.appendChild(O),I)return new Promise((P,W)=>{O.addEventListener("load",P),O.addEventListener("error",()=>W(new Error(`Unable to preload CSS for ${E}`)))})}))}function d(m){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=m,window.dispatchEvent(o),!o.defaultPrevented)throw m}return u.then(m=>{for(const o of m||[])o.status==="rejected"&&d(o.reason);return r().catch(d)})};function rs(e){"@babel/helpers - typeof";return rs=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},rs(e)}function xH(e){if(Array.isArray(e))return e}function bH(e,r){var i=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(i!=null){var a,u,d,m,o=[],w=!0,E=!1;try{if(d=(i=i.call(e)).next,r!==0)for(;!(w=(a=d.call(i)).done)&&(o.push(a.value),o.length!==r);w=!0);}catch(I){E=!0,u=I}finally{try{if(!w&&i.return!=null&&(m=i.return(),Object(m)!==m))return}finally{if(E)throw u}}return o}}function eC(e,r){(r==null||r>e.length)&&(r=e.length);for(var i=0,a=Array(r);i<r;i++)a[i]=e[i];return a}function BH(e,r){if(e){if(typeof e=="string")return eC(e,r);var i={}.toString.call(e).slice(8,-1);return i==="Object"&&e.constructor&&(i=e.constructor.name),i==="Map"||i==="Set"?Array.from(e):i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?eC(e,r):void 0}}function CH(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function tC(e,r){return xH(e)||bH(e,r)||BH(e,r)||CH()}function rC(e,r="utf8"){return new TextDecoder(r).decode(e)}const EH=new TextEncoder;function SH(e){return EH.encode(e)}const FH=1024*8,IH=(()=>{const e=new Uint8Array(4),r=new Uint32Array(e.buffer);return!((r[0]=1)&e[0])})(),D1={int8:globalThis.Int8Array,uint8:globalThis.Uint8Array,int16:globalThis.Int16Array,uint16:globalThis.Uint16Array,int32:globalThis.Int32Array,uint32:globalThis.Uint32Array,uint64:globalThis.BigUint64Array,int64:globalThis.BigInt64Array,float32:globalThis.Float32Array,float64:globalThis.Float64Array};class hx{buffer;byteLength;byteOffset;length;offset;lastWrittenByte;littleEndian;_data;_mark;_marks;constructor(r=FH,i={}){let a=!1;typeof r=="number"?r=new ArrayBuffer(r):(a=!0,this.lastWrittenByte=r.byteLength);const u=i.offset?i.offset>>>0:0,d=r.byteLength-u;let m=u;(ArrayBuffer.isView(r)||r instanceof hx)&&(r.byteLength!==r.buffer.byteLength&&(m=r.byteOffset+u),r=r.buffer),a?this.lastWrittenByte=d:this.lastWrittenByte=0,this.buffer=r,this.length=d,this.byteLength=d,this.byteOffset=m,this.offset=0,this.littleEndian=!0,this._data=new DataView(this.buffer,m,d),this._mark=0,this._marks=[]}available(r=1){return this.offset+r<=this.length}isLittleEndian(){return this.littleEndian}setLittleEndian(){return this.littleEndian=!0,this}isBigEndian(){return!this.littleEndian}setBigEndian(){return this.littleEndian=!1,this}skip(r=1){return this.offset+=r,this}back(r=1){return this.offset-=r,this}seek(r){return this.offset=r,this}mark(){return this._mark=this.offset,this}reset(){return this.offset=this._mark,this}pushMark(){return this._marks.push(this.offset),this}popMark(){const r=this._marks.pop();if(r===void 0)throw new Error("Mark stack empty");return this.seek(r),this}rewind(){return this.offset=0,this}ensureAvailable(r=1){if(!this.available(r)){const a=(this.offset+r)*2,u=new Uint8Array(a);u.set(new Uint8Array(this.buffer)),this.buffer=u.buffer,this.length=a,this.byteLength=a,this._data=new DataView(this.buffer)}return this}readBoolean(){return this.readUint8()!==0}readInt8(){return this._data.getInt8(this.offset++)}readUint8(){return this._data.getUint8(this.offset++)}readByte(){return this.readUint8()}readBytes(r=1){return this.readArray(r,"uint8")}readArray(r,i){const a=D1[i].BYTES_PER_ELEMENT*r,u=this.byteOffset+this.offset,d=this.buffer.slice(u,u+a);if(this.littleEndian===IH&&i!=="uint8"&&i!=="int8"){const o=new Uint8Array(this.buffer.slice(u,u+a));o.reverse();const w=new D1[i](o.buffer);return this.offset+=a,w.reverse(),w}const m=new D1[i](d);return this.offset+=a,m}readInt16(){const r=this._data.getInt16(this.offset,this.littleEndian);return this.offset+=2,r}readUint16(){const r=this._data.getUint16(this.offset,this.littleEndian);return this.offset+=2,r}readInt32(){const r=this._data.getInt32(this.offset,this.littleEndian);return this.offset+=4,r}readUint32(){const r=this._data.getUint32(this.offset,this.littleEndian);return this.offset+=4,r}readFloat32(){const r=this._data.getFloat32(this.offset,this.littleEndian);return this.offset+=4,r}readFloat64(){const r=this._data.getFloat64(this.offset,this.littleEndian);return this.offset+=8,r}readBigInt64(){const r=this._data.getBigInt64(this.offset,this.littleEndian);return this.offset+=8,r}readBigUint64(){const r=this._data.getBigUint64(this.offset,this.littleEndian);return this.offset+=8,r}readChar(){return String.fromCharCode(this.readInt8())}readChars(r=1){let i="";for(let a=0;a<r;a++)i+=this.readChar();return i}readUtf8(r=1){return rC(this.readBytes(r))}decodeText(r=1,i="utf8"){return rC(this.readBytes(r),i)}writeBoolean(r){return this.writeUint8(r?255:0),this}writeInt8(r){return this.ensureAvailable(1),this._data.setInt8(this.offset++,r),this._updateLastWrittenByte(),this}writeUint8(r){return this.ensureAvailable(1),this._data.setUint8(this.offset++,r),this._updateLastWrittenByte(),this}writeByte(r){return this.writeUint8(r)}writeBytes(r){this.ensureAvailable(r.length);for(let i=0;i<r.length;i++)this._data.setUint8(this.offset++,r[i]);return this._updateLastWrittenByte(),this}writeInt16(r){return this.ensureAvailable(2),this._data.setInt16(this.offset,r,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeUint16(r){return this.ensureAvailable(2),this._data.setUint16(this.offset,r,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeInt32(r){return this.ensureAvailable(4),this._data.setInt32(this.offset,r,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeUint32(r){return this.ensureAvailable(4),this._data.setUint32(this.offset,r,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat32(r){return this.ensureAvailable(4),this._data.setFloat32(this.offset,r,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat64(r){return this.ensureAvailable(8),this._data.setFloat64(this.offset,r,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigInt64(r){return this.ensureAvailable(8),this._data.setBigInt64(this.offset,r,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigUint64(r){return this.ensureAvailable(8),this._data.setBigUint64(this.offset,r,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeChar(r){return this.writeUint8(r.charCodeAt(0))}writeChars(r){for(let i=0;i<r.length;i++)this.writeUint8(r.charCodeAt(i));return this}writeUtf8(r){return this.writeBytes(SH(r))}toArray(){return new Uint8Array(this.buffer,this.byteOffset,this.lastWrittenByte)}getWrittenByteLength(){return this.lastWrittenByte-this.byteOffset}_updateLastWrittenByte(){this.offset>this.lastWrittenByte&&(this.lastWrittenByte=this.offset)}}function Sp(e){let r=e.length;for(;--r>=0;)e[r]=0}const TH=3,PH=258,eT=29,LH=256,MH=LH+1+eT,tT=30,kH=512,UH=new Array((MH+2)*2);Sp(UH);const DH=new Array(tT*2);Sp(DH);const RH=new Array(kH);Sp(RH);const NH=new Array(PH-TH+1);Sp(NH);const QH=new Array(eT);Sp(QH);const OH=new Array(tT);Sp(OH);const zH=(e,r,i,a)=>{let u=e&65535|0,d=e>>>16&65535|0,m=0;for(;i!==0;){m=i>2e3?2e3:i,i-=m;do u=u+r[a++]|0,d=d+u|0;while(--m);u%=65521,d%=65521}return u|d<<16|0};var hw=zH;const HH=()=>{let e,r=[];for(var i=0;i<256;i++){e=i;for(var a=0;a<8;a++)e=e&1?3988292384^e>>>1:e>>>1;r[i]=e}return r},jH=new Uint32Array(HH()),VH=(e,r,i,a)=>{const u=jH,d=a+i;e^=-1;for(let m=a;m<d;m++)e=e>>>8^u[(e^r[m])&255];return e^-1};var Xu=VH,dw={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},rT={Z_NO_FLUSH:0,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_DEFLATED:8};const GH=(e,r)=>Object.prototype.hasOwnProperty.call(e,r);var KH=function(e){const r=Array.prototype.slice.call(arguments,1);for(;r.length;){const i=r.shift();if(i){if(typeof i!="object")throw new TypeError(i+"must be non-object");for(const a in i)GH(i,a)&&(e[a]=i[a])}}return e},qH=e=>{let r=0;for(let a=0,u=e.length;a<u;a++)r+=e[a].length;const i=new Uint8Array(r);for(let a=0,u=0,d=e.length;a<d;a++){let m=e[a];i.set(m,u),u+=m.length}return i},nT={assign:KH,flattenChunks:qH};let iT=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{iT=!1}const jm=new Uint8Array(256);for(let e=0;e<256;e++)jm[e]=e>=252?6:e>=248?5:e>=240?4:e>=224?3:e>=192?2:1;jm[254]=jm[254]=1;var $H=e=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(e);let r,i,a,u,d,m=e.length,o=0;for(u=0;u<m;u++)i=e.charCodeAt(u),(i&64512)===55296&&u+1<m&&(a=e.charCodeAt(u+1),(a&64512)===56320&&(i=65536+(i-55296<<10)+(a-56320),u++)),o+=i<128?1:i<2048?2:i<65536?3:4;for(r=new Uint8Array(o),d=0,u=0;d<o;u++)i=e.charCodeAt(u),(i&64512)===55296&&u+1<m&&(a=e.charCodeAt(u+1),(a&64512)===56320&&(i=65536+(i-55296<<10)+(a-56320),u++)),i<128?r[d++]=i:i<2048?(r[d++]=192|i>>>6,r[d++]=128|i&63):i<65536?(r[d++]=224|i>>>12,r[d++]=128|i>>>6&63,r[d++]=128|i&63):(r[d++]=240|i>>>18,r[d++]=128|i>>>12&63,r[d++]=128|i>>>6&63,r[d++]=128|i&63);return r};const WH=(e,r)=>{if(r<65534&&e.subarray&&iT)return String.fromCharCode.apply(null,e.length===r?e:e.subarray(0,r));let i="";for(let a=0;a<r;a++)i+=String.fromCharCode(e[a]);return i};var ZH=(e,r)=>{const i=r||e.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(e.subarray(0,r));let a,u;const d=new Array(i*2);for(u=0,a=0;a<i;){let m=e[a++];if(m<128){d[u++]=m;continue}let o=jm[m];if(o>4){d[u++]=65533,a+=o-1;continue}for(m&=o===2?31:o===3?15:7;o>1&&a<i;)m=m<<6|e[a++]&63,o--;if(o>1){d[u++]=65533;continue}m<65536?d[u++]=m:(m-=65536,d[u++]=55296|m>>10&1023,d[u++]=56320|m&1023)}return WH(d,u)},XH=(e,r)=>{r=r||e.length,r>e.length&&(r=e.length);let i=r-1;for(;i>=0&&(e[i]&192)===128;)i--;return i<0||i===0?r:i+jm[e[i]]>r?i:r},fw={string2buf:$H,buf2string:ZH,utf8border:XH};function YH(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var JH=YH;const v0=16209,ej=16191;var tj=function(r,i){let a,u,d,m,o,w,E,I,D,O,P,W,z,H,Z,se,ce,de,Pe,He,Xe,Qe,Be,Je;const Ae=r.state;a=r.next_in,Be=r.input,u=a+(r.avail_in-5),d=r.next_out,Je=r.output,m=d-(i-r.avail_out),o=d+(r.avail_out-257),w=Ae.dmax,E=Ae.wsize,I=Ae.whave,D=Ae.wnext,O=Ae.window,P=Ae.hold,W=Ae.bits,z=Ae.lencode,H=Ae.distcode,Z=(1<<Ae.lenbits)-1,se=(1<<Ae.distbits)-1;e:do{W<15&&(P+=Be[a++]<<W,W+=8,P+=Be[a++]<<W,W+=8),ce=z[P&Z];t:for(;;){if(de=ce>>>24,P>>>=de,W-=de,de=ce>>>16&255,de===0)Je[d++]=ce&65535;else if(de&16){Pe=ce&65535,de&=15,de&&(W<de&&(P+=Be[a++]<<W,W+=8),Pe+=P&(1<<de)-1,P>>>=de,W-=de),W<15&&(P+=Be[a++]<<W,W+=8,P+=Be[a++]<<W,W+=8),ce=H[P&se];r:for(;;){if(de=ce>>>24,P>>>=de,W-=de,de=ce>>>16&255,de&16){if(He=ce&65535,de&=15,W<de&&(P+=Be[a++]<<W,W+=8,W<de&&(P+=Be[a++]<<W,W+=8)),He+=P&(1<<de)-1,He>w){r.msg="invalid distance too far back",Ae.mode=v0;break e}if(P>>>=de,W-=de,de=d-m,He>de){if(de=He-de,de>I&&Ae.sane){r.msg="invalid distance too far back",Ae.mode=v0;break e}if(Xe=0,Qe=O,D===0){if(Xe+=E-de,de<Pe){Pe-=de;do Je[d++]=O[Xe++];while(--de);Xe=d-He,Qe=Je}}else if(D<de){if(Xe+=E+D-de,de-=D,de<Pe){Pe-=de;do Je[d++]=O[Xe++];while(--de);if(Xe=0,D<Pe){de=D,Pe-=de;do Je[d++]=O[Xe++];while(--de);Xe=d-He,Qe=Je}}}else if(Xe+=D-de,de<Pe){Pe-=de;do Je[d++]=O[Xe++];while(--de);Xe=d-He,Qe=Je}for(;Pe>2;)Je[d++]=Qe[Xe++],Je[d++]=Qe[Xe++],Je[d++]=Qe[Xe++],Pe-=3;Pe&&(Je[d++]=Qe[Xe++],Pe>1&&(Je[d++]=Qe[Xe++]))}else{Xe=d-He;do Je[d++]=Je[Xe++],Je[d++]=Je[Xe++],Je[d++]=Je[Xe++],Pe-=3;while(Pe>2);Pe&&(Je[d++]=Je[Xe++],Pe>1&&(Je[d++]=Je[Xe++]))}}else if((de&64)===0){ce=H[(ce&65535)+(P&(1<<de)-1)];continue r}else{r.msg="invalid distance code",Ae.mode=v0;break e}break}}else if((de&64)===0){ce=z[(ce&65535)+(P&(1<<de)-1)];continue t}else if(de&32){Ae.mode=ej;break e}else{r.msg="invalid literal/length code",Ae.mode=v0;break e}break}}while(a<u&&d<o);Pe=W>>3,a-=Pe,W-=Pe<<3,P&=(1<<W)-1,r.next_in=a,r.next_out=d,r.avail_in=a<u?5+(u-a):5-(a-u),r.avail_out=d<o?257+(o-d):257-(d-o),Ae.hold=P,Ae.bits=W};const $f=15,nC=852,iC=592,sC=0,R1=1,oC=2,rj=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),nj=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),ij=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),sj=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),oj=(e,r,i,a,u,d,m,o)=>{const w=o.bits;let E=0,I=0,D=0,O=0,P=0,W=0,z=0,H=0,Z=0,se=0,ce,de,Pe,He,Xe,Qe=null,Be;const Je=new Uint16Array($f+1),Ae=new Uint16Array($f+1);let me=null,Te,Ie,ut;for(E=0;E<=$f;E++)Je[E]=0;for(I=0;I<a;I++)Je[r[i+I]]++;for(P=w,O=$f;O>=1&&Je[O]===0;O--);if(P>O&&(P=O),O===0)return u[d++]=1<<24|64<<16|0,u[d++]=1<<24|64<<16|0,o.bits=1,0;for(D=1;D<O&&Je[D]===0;D++);for(P<D&&(P=D),H=1,E=1;E<=$f;E++)if(H<<=1,H-=Je[E],H<0)return-1;if(H>0&&(e===sC||O!==1))return-1;for(Ae[1]=0,E=1;E<$f;E++)Ae[E+1]=Ae[E]+Je[E];for(I=0;I<a;I++)r[i+I]!==0&&(m[Ae[r[i+I]]++]=I);if(e===sC?(Qe=me=m,Be=20):e===R1?(Qe=rj,me=nj,Be=257):(Qe=ij,me=sj,Be=0),se=0,I=0,E=D,Xe=d,W=P,z=0,Pe=-1,Z=1<<P,He=Z-1,e===R1&&Z>nC||e===oC&&Z>iC)return 1;for(;;){Te=E-z,m[I]+1<Be?(Ie=0,ut=m[I]):m[I]>=Be?(Ie=me[m[I]-Be],ut=Qe[m[I]-Be]):(Ie=96,ut=0),ce=1<<E-z,de=1<<W,D=de;do de-=ce,u[Xe+(se>>z)+de]=Te<<24|Ie<<16|ut|0;while(de!==0);for(ce=1<<E-1;se&ce;)ce>>=1;if(ce!==0?(se&=ce-1,se+=ce):se=0,I++,--Je[E]===0){if(E===O)break;E=r[i+m[I]]}if(E>P&&(se&He)!==Pe){for(z===0&&(z=P),Xe+=D,W=E-z,H=1<<W;W+z<O&&(H-=Je[W+z],!(H<=0));)W++,H<<=1;if(Z+=1<<W,e===R1&&Z>nC||e===oC&&Z>iC)return 1;Pe=se&He,u[Pe]=P<<24|W<<16|Xe-d|0}}return se!==0&&(u[Xe+se]=E-z<<24|64<<16|0),o.bits=P,0};var Lm=oj;const aj=0,sT=1,oT=2,{Z_FINISH:aC,Z_BLOCK:lj,Z_TREES:_0,Z_OK:of,Z_STREAM_END:cj,Z_NEED_DICT:Aj,Z_STREAM_ERROR:su,Z_DATA_ERROR:aT,Z_MEM_ERROR:lT,Z_BUF_ERROR:uj,Z_DEFLATED:lC}=rT,Xy=16180,cC=16181,AC=16182,uC=16183,hC=16184,dC=16185,fC=16186,pC=16187,mC=16188,gC=16189,Ay=16190,Dh=16191,N1=16192,yC=16193,Q1=16194,vC=16195,_C=16196,wC=16197,xC=16198,w0=16199,x0=16200,bC=16201,BC=16202,CC=16203,EC=16204,SC=16205,O1=16206,FC=16207,IC=16208,oo=16209,cT=16210,AT=16211,hj=852,dj=592,fj=15,pj=fj,TC=e=>(e>>>24&255)+(e>>>8&65280)+((e&65280)<<8)+((e&255)<<24);function mj(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const cf=e=>{if(!e)return 1;const r=e.state;return!r||r.strm!==e||r.mode<Xy||r.mode>AT?1:0},uT=e=>{if(cf(e))return su;const r=e.state;return e.total_in=e.total_out=r.total=0,e.msg="",r.wrap&&(e.adler=r.wrap&1),r.mode=Xy,r.last=0,r.havedict=0,r.flags=-1,r.dmax=32768,r.head=null,r.hold=0,r.bits=0,r.lencode=r.lendyn=new Int32Array(hj),r.distcode=r.distdyn=new Int32Array(dj),r.sane=1,r.back=-1,of},hT=e=>{if(cf(e))return su;const r=e.state;return r.wsize=0,r.whave=0,r.wnext=0,uT(e)},dT=(e,r)=>{let i;if(cf(e))return su;const a=e.state;return r<0?(i=0,r=-r):(i=(r>>4)+5,r<48&&(r&=15)),r&&(r<8||r>15)?su:(a.window!==null&&a.wbits!==r&&(a.window=null),a.wrap=i,a.wbits=r,hT(e))},fT=(e,r)=>{if(!e)return su;const i=new mj;e.state=i,i.strm=e,i.window=null,i.mode=Xy;const a=dT(e,r);return a!==of&&(e.state=null),a},gj=e=>fT(e,pj);let PC=!0,z1,H1;const yj=e=>{if(PC){z1=new Int32Array(512),H1=new Int32Array(32);let r=0;for(;r<144;)e.lens[r++]=8;for(;r<256;)e.lens[r++]=9;for(;r<280;)e.lens[r++]=7;for(;r<288;)e.lens[r++]=8;for(Lm(sT,e.lens,0,288,z1,0,e.work,{bits:9}),r=0;r<32;)e.lens[r++]=5;Lm(oT,e.lens,0,32,H1,0,e.work,{bits:5}),PC=!1}e.lencode=z1,e.lenbits=9,e.distcode=H1,e.distbits=5},pT=(e,r,i,a)=>{let u;const d=e.state;return d.window===null&&(d.wsize=1<<d.wbits,d.wnext=0,d.whave=0,d.window=new Uint8Array(d.wsize)),a>=d.wsize?(d.window.set(r.subarray(i-d.wsize,i),0),d.wnext=0,d.whave=d.wsize):(u=d.wsize-d.wnext,u>a&&(u=a),d.window.set(r.subarray(i-a,i-a+u),d.wnext),a-=u,a?(d.window.set(r.subarray(i-a,i),0),d.wnext=a,d.whave=d.wsize):(d.wnext+=u,d.wnext===d.wsize&&(d.wnext=0),d.whave<d.wsize&&(d.whave+=u))),0},vj=(e,r)=>{let i,a,u,d,m,o,w,E,I,D,O,P,W,z,H=0,Z,se,ce,de,Pe,He,Xe,Qe;const Be=new Uint8Array(4);let Je,Ae;const me=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(cf(e)||!e.output||!e.input&&e.avail_in!==0)return su;i=e.state,i.mode===Dh&&(i.mode=N1),m=e.next_out,u=e.output,w=e.avail_out,d=e.next_in,a=e.input,o=e.avail_in,E=i.hold,I=i.bits,D=o,O=w,Qe=of;e:for(;;)switch(i.mode){case Xy:if(i.wrap===0){i.mode=N1;break}for(;I<16;){if(o===0)break e;o--,E+=a[d++]<<I,I+=8}if(i.wrap&2&&E===35615){i.wbits===0&&(i.wbits=15),i.check=0,Be[0]=E&255,Be[1]=E>>>8&255,i.check=Xu(i.check,Be,2,0),E=0,I=0,i.mode=cC;break}if(i.head&&(i.head.done=!1),!(i.wrap&1)||(((E&255)<<8)+(E>>8))%31){e.msg="incorrect header check",i.mode=oo;break}if((E&15)!==lC){e.msg="unknown compression method",i.mode=oo;break}if(E>>>=4,I-=4,Xe=(E&15)+8,i.wbits===0&&(i.wbits=Xe),Xe>15||Xe>i.wbits){e.msg="invalid window size",i.mode=oo;break}i.dmax=1<<i.wbits,i.flags=0,e.adler=i.check=1,i.mode=E&512?gC:Dh,E=0,I=0;break;case cC:for(;I<16;){if(o===0)break e;o--,E+=a[d++]<<I,I+=8}if(i.flags=E,(i.flags&255)!==lC){e.msg="unknown compression method",i.mode=oo;break}if(i.flags&57344){e.msg="unknown header flags set",i.mode=oo;break}i.head&&(i.head.text=E>>8&1),i.flags&512&&i.wrap&4&&(Be[0]=E&255,Be[1]=E>>>8&255,i.check=Xu(i.check,Be,2,0)),E=0,I=0,i.mode=AC;case AC:for(;I<32;){if(o===0)break e;o--,E+=a[d++]<<I,I+=8}i.head&&(i.head.time=E),i.flags&512&&i.wrap&4&&(Be[0]=E&255,Be[1]=E>>>8&255,Be[2]=E>>>16&255,Be[3]=E>>>24&255,i.check=Xu(i.check,Be,4,0)),E=0,I=0,i.mode=uC;case uC:for(;I<16;){if(o===0)break e;o--,E+=a[d++]<<I,I+=8}i.head&&(i.head.xflags=E&255,i.head.os=E>>8),i.flags&512&&i.wrap&4&&(Be[0]=E&255,Be[1]=E>>>8&255,i.check=Xu(i.check,Be,2,0)),E=0,I=0,i.mode=hC;case hC:if(i.flags&1024){for(;I<16;){if(o===0)break e;o--,E+=a[d++]<<I,I+=8}i.length=E,i.head&&(i.head.extra_len=E),i.flags&512&&i.wrap&4&&(Be[0]=E&255,Be[1]=E>>>8&255,i.check=Xu(i.check,Be,2,0)),E=0,I=0}else i.head&&(i.head.extra=null);i.mode=dC;case dC:if(i.flags&1024&&(P=i.length,P>o&&(P=o),P&&(i.head&&(Xe=i.head.extra_len-i.length,i.head.extra||(i.head.extra=new Uint8Array(i.head.extra_len)),i.head.extra.set(a.subarray(d,d+P),Xe)),i.flags&512&&i.wrap&4&&(i.check=Xu(i.check,a,P,d)),o-=P,d+=P,i.length-=P),i.length))break e;i.length=0,i.mode=fC;case fC:if(i.flags&2048){if(o===0)break e;P=0;do Xe=a[d+P++],i.head&&Xe&&i.length<65536&&(i.head.name+=String.fromCharCode(Xe));while(Xe&&P<o);if(i.flags&512&&i.wrap&4&&(i.check=Xu(i.check,a,P,d)),o-=P,d+=P,Xe)break e}else i.head&&(i.head.name=null);i.length=0,i.mode=pC;case pC:if(i.flags&4096){if(o===0)break e;P=0;do Xe=a[d+P++],i.head&&Xe&&i.length<65536&&(i.head.comment+=String.fromCharCode(Xe));while(Xe&&P<o);if(i.flags&512&&i.wrap&4&&(i.check=Xu(i.check,a,P,d)),o-=P,d+=P,Xe)break e}else i.head&&(i.head.comment=null);i.mode=mC;case mC:if(i.flags&512){for(;I<16;){if(o===0)break e;o--,E+=a[d++]<<I,I+=8}if(i.wrap&4&&E!==(i.check&65535)){e.msg="header crc mismatch",i.mode=oo;break}E=0,I=0}i.head&&(i.head.hcrc=i.flags>>9&1,i.head.done=!0),e.adler=i.check=0,i.mode=Dh;break;case gC:for(;I<32;){if(o===0)break e;o--,E+=a[d++]<<I,I+=8}e.adler=i.check=TC(E),E=0,I=0,i.mode=Ay;case Ay:if(i.havedict===0)return e.next_out=m,e.avail_out=w,e.next_in=d,e.avail_in=o,i.hold=E,i.bits=I,Aj;e.adler=i.check=1,i.mode=Dh;case Dh:if(r===lj||r===_0)break e;case N1:if(i.last){E>>>=I&7,I-=I&7,i.mode=O1;break}for(;I<3;){if(o===0)break e;o--,E+=a[d++]<<I,I+=8}switch(i.last=E&1,E>>>=1,I-=1,E&3){case 0:i.mode=yC;break;case 1:if(yj(i),i.mode=w0,r===_0){E>>>=2,I-=2;break e}break;case 2:i.mode=_C;break;case 3:e.msg="invalid block type",i.mode=oo}E>>>=2,I-=2;break;case yC:for(E>>>=I&7,I-=I&7;I<32;){if(o===0)break e;o--,E+=a[d++]<<I,I+=8}if((E&65535)!==(E>>>16^65535)){e.msg="invalid stored block lengths",i.mode=oo;break}if(i.length=E&65535,E=0,I=0,i.mode=Q1,r===_0)break e;case Q1:i.mode=vC;case vC:if(P=i.length,P){if(P>o&&(P=o),P>w&&(P=w),P===0)break e;u.set(a.subarray(d,d+P),m),o-=P,d+=P,w-=P,m+=P,i.length-=P;break}i.mode=Dh;break;case _C:for(;I<14;){if(o===0)break e;o--,E+=a[d++]<<I,I+=8}if(i.nlen=(E&31)+257,E>>>=5,I-=5,i.ndist=(E&31)+1,E>>>=5,I-=5,i.ncode=(E&15)+4,E>>>=4,I-=4,i.nlen>286||i.ndist>30){e.msg="too many length or distance symbols",i.mode=oo;break}i.have=0,i.mode=wC;case wC:for(;i.have<i.ncode;){for(;I<3;){if(o===0)break e;o--,E+=a[d++]<<I,I+=8}i.lens[me[i.have++]]=E&7,E>>>=3,I-=3}for(;i.have<19;)i.lens[me[i.have++]]=0;if(i.lencode=i.lendyn,i.lenbits=7,Je={bits:i.lenbits},Qe=Lm(aj,i.lens,0,19,i.lencode,0,i.work,Je),i.lenbits=Je.bits,Qe){e.msg="invalid code lengths set",i.mode=oo;break}i.have=0,i.mode=xC;case xC:for(;i.have<i.nlen+i.ndist;){for(;H=i.lencode[E&(1<<i.lenbits)-1],Z=H>>>24,se=H>>>16&255,ce=H&65535,!(Z<=I);){if(o===0)break e;o--,E+=a[d++]<<I,I+=8}if(ce<16)E>>>=Z,I-=Z,i.lens[i.have++]=ce;else{if(ce===16){for(Ae=Z+2;I<Ae;){if(o===0)break e;o--,E+=a[d++]<<I,I+=8}if(E>>>=Z,I-=Z,i.have===0){e.msg="invalid bit length repeat",i.mode=oo;break}Xe=i.lens[i.have-1],P=3+(E&3),E>>>=2,I-=2}else if(ce===17){for(Ae=Z+3;I<Ae;){if(o===0)break e;o--,E+=a[d++]<<I,I+=8}E>>>=Z,I-=Z,Xe=0,P=3+(E&7),E>>>=3,I-=3}else{for(Ae=Z+7;I<Ae;){if(o===0)break e;o--,E+=a[d++]<<I,I+=8}E>>>=Z,I-=Z,Xe=0,P=11+(E&127),E>>>=7,I-=7}if(i.have+P>i.nlen+i.ndist){e.msg="invalid bit length repeat",i.mode=oo;break}for(;P--;)i.lens[i.have++]=Xe}}if(i.mode===oo)break;if(i.lens[256]===0){e.msg="invalid code -- missing end-of-block",i.mode=oo;break}if(i.lenbits=9,Je={bits:i.lenbits},Qe=Lm(sT,i.lens,0,i.nlen,i.lencode,0,i.work,Je),i.lenbits=Je.bits,Qe){e.msg="invalid literal/lengths set",i.mode=oo;break}if(i.distbits=6,i.distcode=i.distdyn,Je={bits:i.distbits},Qe=Lm(oT,i.lens,i.nlen,i.ndist,i.distcode,0,i.work,Je),i.distbits=Je.bits,Qe){e.msg="invalid distances set",i.mode=oo;break}if(i.mode=w0,r===_0)break e;case w0:i.mode=x0;case x0:if(o>=6&&w>=258){e.next_out=m,e.avail_out=w,e.next_in=d,e.avail_in=o,i.hold=E,i.bits=I,tj(e,O),m=e.next_out,u=e.output,w=e.avail_out,d=e.next_in,a=e.input,o=e.avail_in,E=i.hold,I=i.bits,i.mode===Dh&&(i.back=-1);break}for(i.back=0;H=i.lencode[E&(1<<i.lenbits)-1],Z=H>>>24,se=H>>>16&255,ce=H&65535,!(Z<=I);){if(o===0)break e;o--,E+=a[d++]<<I,I+=8}if(se&&(se&240)===0){for(de=Z,Pe=se,He=ce;H=i.lencode[He+((E&(1<<de+Pe)-1)>>de)],Z=H>>>24,se=H>>>16&255,ce=H&65535,!(de+Z<=I);){if(o===0)break e;o--,E+=a[d++]<<I,I+=8}E>>>=de,I-=de,i.back+=de}if(E>>>=Z,I-=Z,i.back+=Z,i.length=ce,se===0){i.mode=SC;break}if(se&32){i.back=-1,i.mode=Dh;break}if(se&64){e.msg="invalid literal/length code",i.mode=oo;break}i.extra=se&15,i.mode=bC;case bC:if(i.extra){for(Ae=i.extra;I<Ae;){if(o===0)break e;o--,E+=a[d++]<<I,I+=8}i.length+=E&(1<<i.extra)-1,E>>>=i.extra,I-=i.extra,i.back+=i.extra}i.was=i.length,i.mode=BC;case BC:for(;H=i.distcode[E&(1<<i.distbits)-1],Z=H>>>24,se=H>>>16&255,ce=H&65535,!(Z<=I);){if(o===0)break e;o--,E+=a[d++]<<I,I+=8}if((se&240)===0){for(de=Z,Pe=se,He=ce;H=i.distcode[He+((E&(1<<de+Pe)-1)>>de)],Z=H>>>24,se=H>>>16&255,ce=H&65535,!(de+Z<=I);){if(o===0)break e;o--,E+=a[d++]<<I,I+=8}E>>>=de,I-=de,i.back+=de}if(E>>>=Z,I-=Z,i.back+=Z,se&64){e.msg="invalid distance code",i.mode=oo;break}i.offset=ce,i.extra=se&15,i.mode=CC;case CC:if(i.extra){for(Ae=i.extra;I<Ae;){if(o===0)break e;o--,E+=a[d++]<<I,I+=8}i.offset+=E&(1<<i.extra)-1,E>>>=i.extra,I-=i.extra,i.back+=i.extra}if(i.offset>i.dmax){e.msg="invalid distance too far back",i.mode=oo;break}i.mode=EC;case EC:if(w===0)break e;if(P=O-w,i.offset>P){if(P=i.offset-P,P>i.whave&&i.sane){e.msg="invalid distance too far back",i.mode=oo;break}P>i.wnext?(P-=i.wnext,W=i.wsize-P):W=i.wnext-P,P>i.length&&(P=i.length),z=i.window}else z=u,W=m-i.offset,P=i.length;P>w&&(P=w),w-=P,i.length-=P;do u[m++]=z[W++];while(--P);i.length===0&&(i.mode=x0);break;case SC:if(w===0)break e;u[m++]=i.length,w--,i.mode=x0;break;case O1:if(i.wrap){for(;I<32;){if(o===0)break e;o--,E|=a[d++]<<I,I+=8}if(O-=w,e.total_out+=O,i.total+=O,i.wrap&4&&O&&(e.adler=i.check=i.flags?Xu(i.check,u,O,m-O):hw(i.check,u,O,m-O)),O=w,i.wrap&4&&(i.flags?E:TC(E))!==i.check){e.msg="incorrect data check",i.mode=oo;break}E=0,I=0}i.mode=FC;case FC:if(i.wrap&&i.flags){for(;I<32;){if(o===0)break e;o--,E+=a[d++]<<I,I+=8}if(i.wrap&4&&E!==(i.total&4294967295)){e.msg="incorrect length check",i.mode=oo;break}E=0,I=0}i.mode=IC;case IC:Qe=cj;break e;case oo:Qe=aT;break e;case cT:return lT;case AT:default:return su}return e.next_out=m,e.avail_out=w,e.next_in=d,e.avail_in=o,i.hold=E,i.bits=I,(i.wsize||O!==e.avail_out&&i.mode<oo&&(i.mode<O1||r!==aC))&&pT(e,e.output,e.next_out,O-e.avail_out),D-=e.avail_in,O-=e.avail_out,e.total_in+=D,e.total_out+=O,i.total+=O,i.wrap&4&&O&&(e.adler=i.check=i.flags?Xu(i.check,u,O,e.next_out-O):hw(i.check,u,O,e.next_out-O)),e.data_type=i.bits+(i.last?64:0)+(i.mode===Dh?128:0)+(i.mode===w0||i.mode===Q1?256:0),(D===0&&O===0||r===aC)&&Qe===of&&(Qe=uj),Qe},_j=e=>{if(cf(e))return su;let r=e.state;return r.window&&(r.window=null),e.state=null,of},wj=(e,r)=>{if(cf(e))return su;const i=e.state;return(i.wrap&2)===0?su:(i.head=r,r.done=!1,of)},xj=(e,r)=>{const i=r.length;let a,u,d;return cf(e)||(a=e.state,a.wrap!==0&&a.mode!==Ay)?su:a.mode===Ay&&(u=1,u=hw(u,r,i,0),u!==a.check)?aT:(d=pT(e,r,i,i),d?(a.mode=cT,lT):(a.havedict=1,of))};var bj=hT,Bj=dT,Cj=uT,Ej=gj,Sj=fT,Fj=vj,Ij=_j,Tj=wj,Pj=xj,Lj="pako inflate (from Nodeca project)",Rh={inflateReset:bj,inflateReset2:Bj,inflateResetKeep:Cj,inflateInit:Ej,inflateInit2:Sj,inflate:Fj,inflateEnd:Ij,inflateGetHeader:Tj,inflateSetDictionary:Pj,inflateInfo:Lj};function Mj(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var kj=Mj;const mT=Object.prototype.toString,{Z_NO_FLUSH:Uj,Z_FINISH:Dj,Z_OK:Vm,Z_STREAM_END:j1,Z_NEED_DICT:V1,Z_STREAM_ERROR:Rj,Z_DATA_ERROR:LC,Z_MEM_ERROR:Nj}=rT;function tg(e){this.options=nT.assign({chunkSize:1024*64,windowBits:15,to:""},e||{});const r=this.options;r.raw&&r.windowBits>=0&&r.windowBits<16&&(r.windowBits=-r.windowBits,r.windowBits===0&&(r.windowBits=-15)),r.windowBits>=0&&r.windowBits<16&&!(e&&e.windowBits)&&(r.windowBits+=32),r.windowBits>15&&r.windowBits<48&&(r.windowBits&15)===0&&(r.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new JH,this.strm.avail_out=0;let i=Rh.inflateInit2(this.strm,r.windowBits);if(i!==Vm)throw new Error(dw[i]);if(this.header=new kj,Rh.inflateGetHeader(this.strm,this.header),r.dictionary&&(typeof r.dictionary=="string"?r.dictionary=fw.string2buf(r.dictionary):mT.call(r.dictionary)==="[object ArrayBuffer]"&&(r.dictionary=new Uint8Array(r.dictionary)),r.raw&&(i=Rh.inflateSetDictionary(this.strm,r.dictionary),i!==Vm)))throw new Error(dw[i])}tg.prototype.push=function(e,r){const i=this.strm,a=this.options.chunkSize,u=this.options.dictionary;let d,m,o;if(this.ended)return!1;for(r===~~r?m=r:m=r===!0?Dj:Uj,mT.call(e)==="[object ArrayBuffer]"?i.input=new Uint8Array(e):i.input=e,i.next_in=0,i.avail_in=i.input.length;;){for(i.avail_out===0&&(i.output=new Uint8Array(a),i.next_out=0,i.avail_out=a),d=Rh.inflate(i,m),d===V1&&u&&(d=Rh.inflateSetDictionary(i,u),d===Vm?d=Rh.inflate(i,m):d===LC&&(d=V1));i.avail_in>0&&d===j1&&i.state.wrap>0&&e[i.next_in]!==0;)Rh.inflateReset(i),d=Rh.inflate(i,m);switch(d){case Rj:case LC:case V1:case Nj:return this.onEnd(d),this.ended=!0,!1}if(o=i.avail_out,i.next_out&&(i.avail_out===0||d===j1))if(this.options.to==="string"){let w=fw.utf8border(i.output,i.next_out),E=i.next_out-w,I=fw.buf2string(i.output,w);i.next_out=E,i.avail_out=a-E,E&&i.output.set(i.output.subarray(w,w+E),0),this.onData(I)}else this.onData(i.output.length===i.next_out?i.output:i.output.subarray(0,i.next_out));if(!(d===Vm&&o===0)){if(d===j1)return d=Rh.inflateEnd(this.strm),this.onEnd(d),this.ended=!0,!0;if(i.avail_in===0)break}}return!0};tg.prototype.onData=function(e){this.chunks.push(e)};tg.prototype.onEnd=function(e){e===Vm&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=nT.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};function Qj(e,r){const i=new tg(r);if(i.push(e),i.err)throw i.msg||dw[i.err];return i.result}var Oj=tg,zj=Qj,Hj={Inflate:Oj,inflate:zj};const{Inflate:jj,inflate:Vj}=Hj;var MC=jj,Gj=Vj;const gT=[];for(let e=0;e<256;e++){let r=e;for(let i=0;i<8;i++)r&1?r=3988292384^r>>>1:r=r>>>1;gT[e]=r}const kC=4294967295;function Kj(e,r,i){let a=e;for(let u=0;u<i;u++)a=gT[(a^r[u])&255]^a>>>8;return a}function qj(e,r){return(Kj(kC,e,r)^kC)>>>0}function UC(e,r,i){const a=e.readUint32(),u=qj(new Uint8Array(e.buffer,e.byteOffset+e.offset-r-4,r),r);if(u!==a)throw new Error(`CRC mismatch for chunk ${i}. Expected ${a}, found ${u}`)}function yT(e,r,i){for(let a=0;a<i;a++)r[a]=e[a]}function vT(e,r,i,a){let u=0;for(;u<a;u++)r[u]=e[u];for(;u<i;u++)r[u]=e[u]+r[u-a]&255}function _T(e,r,i,a){let u=0;if(i.length===0)for(;u<a;u++)r[u]=e[u];else for(;u<a;u++)r[u]=e[u]+i[u]&255}function wT(e,r,i,a,u){let d=0;if(i.length===0){for(;d<u;d++)r[d]=e[d];for(;d<a;d++)r[d]=e[d]+(r[d-u]>>1)&255}else{for(;d<u;d++)r[d]=e[d]+(i[d]>>1)&255;for(;d<a;d++)r[d]=e[d]+(r[d-u]+i[d]>>1)&255}}function xT(e,r,i,a,u){let d=0;if(i.length===0){for(;d<u;d++)r[d]=e[d];for(;d<a;d++)r[d]=e[d]+r[d-u]&255}else{for(;d<u;d++)r[d]=e[d]+i[d]&255;for(;d<a;d++)r[d]=e[d]+$j(r[d-u],i[d],i[d-u])&255}}function $j(e,r,i){const a=e+r-i,u=Math.abs(a-e),d=Math.abs(a-r),m=Math.abs(a-i);return u<=d&&u<=m?e:d<=m?r:i}function Wj(e,r,i,a,u,d){switch(e){case 0:yT(r,i,u);break;case 1:vT(r,i,u,d);break;case 2:_T(r,i,a,u);break;case 3:wT(r,i,a,u,d);break;case 4:xT(r,i,a,u,d);break;default:throw new Error(`Unsupported filter: ${e}`)}}const Zj=new Uint16Array([255]),Xj=new Uint8Array(Zj.buffer),Yj=Xj[0]===255;function Jj(e){const{data:r,width:i,height:a,channels:u,depth:d}=e,m=[{x:0,y:0,xStep:8,yStep:8},{x:4,y:0,xStep:8,yStep:8},{x:0,y:4,xStep:4,yStep:8},{x:2,y:0,xStep:4,yStep:4},{x:0,y:2,xStep:2,yStep:4},{x:1,y:0,xStep:2,yStep:2},{x:0,y:1,xStep:1,yStep:2}],o=Math.ceil(d/8)*u,w=new Uint8Array(a*i*o);let E=0;for(let I=0;I<7;I++){const D=m[I],O=Math.ceil((i-D.x)/D.xStep),P=Math.ceil((a-D.y)/D.yStep);if(O<=0||P<=0)continue;const W=O*o,z=new Uint8Array(W);for(let H=0;H<P;H++){const Z=r[E++],se=r.subarray(E,E+W);E+=W;const ce=new Uint8Array(W);Wj(Z,se,ce,z,W,o),z.set(ce);for(let de=0;de<O;de++){const Pe=D.x+de*D.xStep,He=D.y+H*D.yStep;if(!(Pe>=i||He>=a))for(let Xe=0;Xe<o;Xe++)w[(He*i+Pe)*o+Xe]=ce[de*o+Xe]}}}if(d===16){const I=new Uint16Array(w.buffer);if(Yj)for(let D=0;D<I.length;D++)I[D]=e7(I[D]);return I}else return w}function e7(e){return(e&255)<<8|e>>8&255}const t7=new Uint16Array([255]),r7=new Uint8Array(t7.buffer),n7=r7[0]===255,i7=new Uint8Array(0);function DC(e){const{data:r,width:i,height:a,channels:u,depth:d}=e,m=Math.ceil(d/8)*u,o=Math.ceil(d/8*u*i),w=new Uint8Array(a*o);let E=i7,I=0,D,O;for(let P=0;P<a;P++){switch(D=r.subarray(I+1,I+1+o),O=w.subarray(P*o,(P+1)*o),r[I]){case 0:yT(D,O,o);break;case 1:vT(D,O,o,m);break;case 2:_T(D,O,E,o);break;case 3:wT(D,O,E,o,m);break;case 4:xT(D,O,E,o,m);break;default:throw new Error(`Unsupported filter: ${r[I]}`)}E=O,I+=o+1}if(d===16){const P=new Uint16Array(w.buffer);if(n7)for(let W=0;W<P.length;W++)P[W]=s7(P[W]);return P}else return w}function s7(e){return(e&255)<<8|e>>8&255}const O0=Uint8Array.of(137,80,78,71,13,10,26,10);function RC(e){if(!o7(e.readBytes(O0.length)))throw new Error("wrong PNG signature")}function o7(e){if(e.length<O0.length)return!1;for(let r=0;r<O0.length;r++)if(e[r]!==O0[r])return!1;return!0}const a7="tEXt",l7=0,bT=new TextDecoder("latin1");function c7(e){if(u7(e),e.length===0||e.length>79)throw new Error("keyword length must be between 1 and 79")}const A7=/^[\u0000-\u00FF]*$/;function u7(e){if(!A7.test(e))throw new Error("invalid latin1 text")}function h7(e,r,i){const a=BT(r);e[a]=d7(r,i-a.length-1)}function BT(e){for(e.mark();e.readByte()!==l7;);const r=e.offset;e.reset();const i=bT.decode(e.readBytes(r-e.offset-1));return e.skip(1),c7(i),i}function d7(e,r){return bT.decode(e.readBytes(r))}const bA={UNKNOWN:-1,GREYSCALE:0,TRUECOLOUR:2,INDEXED_COLOUR:3,GREYSCALE_ALPHA:4,TRUECOLOUR_ALPHA:6},G1={UNKNOWN:-1,DEFLATE:0},NC={UNKNOWN:-1,ADAPTIVE:0},K1={UNKNOWN:-1,NO_INTERLACE:0,ADAM7:1},b0={NONE:0,BACKGROUND:1,PREVIOUS:2},q1={SOURCE:0,OVER:1};class f7 extends hx{_checkCrc;_inflator;_png;_apng;_end;_hasPalette;_palette;_hasTransparency;_transparency;_compressionMethod;_filterMethod;_interlaceMethod;_colorType;_isAnimated;_numberOfFrames;_numberOfPlays;_frames;_writingDataChunks;constructor(r,i={}){super(r);const{checkCrc:a=!1}=i;this._checkCrc=a,this._inflator=new MC,this._png={width:-1,height:-1,channels:-1,data:new Uint8Array(0),depth:1,text:{}},this._apng={width:-1,height:-1,channels:-1,depth:1,numberOfFrames:1,numberOfPlays:0,text:{},frames:[]},this._end=!1,this._hasPalette=!1,this._palette=[],this._hasTransparency=!1,this._transparency=new Uint16Array(0),this._compressionMethod=G1.UNKNOWN,this._filterMethod=NC.UNKNOWN,this._interlaceMethod=K1.UNKNOWN,this._colorType=bA.UNKNOWN,this._isAnimated=!1,this._numberOfFrames=1,this._numberOfPlays=0,this._frames=[],this._writingDataChunks=!1,this.setBigEndian()}decode(){for(RC(this);!this._end;){const r=this.readUint32(),i=this.readChars(4);this.decodeChunk(r,i)}return this.decodeImage(),this._png}decodeApng(){for(RC(this);!this._end;){const r=this.readUint32(),i=this.readChars(4);this.decodeApngChunk(r,i)}return this.decodeApngImage(),this._apng}decodeChunk(r,i){const a=this.offset;switch(i){case"IHDR":this.decodeIHDR();break;case"PLTE":this.decodePLTE(r);break;case"IDAT":this.decodeIDAT(r);break;case"IEND":this._end=!0;break;case"tRNS":this.decodetRNS(r);break;case"iCCP":this.decodeiCCP(r);break;case a7:h7(this._png.text,this,r);break;case"pHYs":this.decodepHYs();break;default:this.skip(r);break}if(this.offset-a!==r)throw new Error(`Length mismatch while decoding chunk ${i}`);this._checkCrc?UC(this,r+4,i):this.skip(4)}decodeApngChunk(r,i){const a=this.offset;switch(i!=="fdAT"&&i!=="IDAT"&&this._writingDataChunks&&this.pushDataToFrame(),i){case"acTL":this.decodeACTL();break;case"fcTL":this.decodeFCTL();break;case"fdAT":this.decodeFDAT(r);break;default:this.decodeChunk(r,i),this.offset=a+r;break}if(this.offset-a!==r)throw new Error(`Length mismatch while decoding chunk ${i}`);this._checkCrc?UC(this,r+4,i):this.skip(4)}decodeIHDR(){const r=this._png;r.width=this.readUint32(),r.height=this.readUint32(),r.depth=p7(this.readUint8());const i=this.readUint8();this._colorType=i;let a;switch(i){case bA.GREYSCALE:a=1;break;case bA.TRUECOLOUR:a=3;break;case bA.INDEXED_COLOUR:a=1;break;case bA.GREYSCALE_ALPHA:a=2;break;case bA.TRUECOLOUR_ALPHA:a=4;break;case bA.UNKNOWN:default:throw new Error(`Unknown color type: ${i}`)}if(this._png.channels=a,this._compressionMethod=this.readUint8(),this._compressionMethod!==G1.DEFLATE)throw new Error(`Unsupported compression method: ${this._compressionMethod}`);this._filterMethod=this.readUint8(),this._interlaceMethod=this.readUint8()}decodeACTL(){this._numberOfFrames=this.readUint32(),this._numberOfPlays=this.readUint32(),this._isAnimated=!0}decodeFCTL(){const r={sequenceNumber:this.readUint32(),width:this.readUint32(),height:this.readUint32(),xOffset:this.readUint32(),yOffset:this.readUint32(),delayNumber:this.readUint16(),delayDenominator:this.readUint16(),disposeOp:this.readUint8(),blendOp:this.readUint8(),data:new Uint8Array(0)};this._frames.push(r)}decodePLTE(r){if(r%3!==0)throw new RangeError(`PLTE field length must be a multiple of 3. Got ${r}`);const i=r/3;this._hasPalette=!0;const a=[];this._palette=a;for(let u=0;u<i;u++)a.push([this.readUint8(),this.readUint8(),this.readUint8()])}decodeIDAT(r){this._writingDataChunks=!0;const i=r,a=this.offset+this.byteOffset;if(this._inflator.push(new Uint8Array(this.buffer,a,i)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(r)}decodeFDAT(r){this._writingDataChunks=!0;let i=r,a=this.offset+this.byteOffset;if(a+=4,i-=4,this._inflator.push(new Uint8Array(this.buffer,a,i)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(r)}decodetRNS(r){switch(this._colorType){case bA.GREYSCALE:case bA.TRUECOLOUR:{if(r%2!==0)throw new RangeError(`tRNS chunk length must be a multiple of 2. Got ${r}`);if(r/2>this._png.width*this._png.height)throw new Error(`tRNS chunk contains more alpha values than there are pixels (${r/2} vs ${this._png.width*this._png.height})`);this._hasTransparency=!0,this._transparency=new Uint16Array(r/2);for(let i=0;i<r/2;i++)this._transparency[i]=this.readUint16();break}case bA.INDEXED_COLOUR:{if(r>this._palette.length)throw new Error(`tRNS chunk contains more alpha values than there are palette colors (${r} vs ${this._palette.length})`);let i=0;for(;i<r;i++){const a=this.readByte();this._palette[i].push(a)}for(;i<this._palette.length;i++)this._palette[i].push(255);break}case bA.UNKNOWN:case bA.GREYSCALE_ALPHA:case bA.TRUECOLOUR_ALPHA:default:throw new Error(`tRNS chunk is not supported for color type ${this._colorType}`)}}decodeiCCP(r){const i=BT(this),a=this.readUint8();if(a!==G1.DEFLATE)throw new Error(`Unsupported iCCP compression method: ${a}`);const u=this.readBytes(r-i.length-2);this._png.iccEmbeddedProfile={name:i,profile:Gj(u)}}decodepHYs(){const r=this.readUint32(),i=this.readUint32(),a=this.readByte();this._png.resolution={x:r,y:i,unit:a}}decodeApngImage(){this._apng.width=this._png.width,this._apng.height=this._png.height,this._apng.channels=this._png.channels,this._apng.depth=this._png.depth,this._apng.numberOfFrames=this._numberOfFrames,this._apng.numberOfPlays=this._numberOfPlays,this._apng.text=this._png.text,this._apng.resolution=this._png.resolution;for(let r=0;r<this._numberOfFrames;r++){const i={sequenceNumber:this._frames[r].sequenceNumber,delayNumber:this._frames[r].delayNumber,delayDenominator:this._frames[r].delayDenominator,data:this._apng.depth===8?new Uint8Array(this._apng.width*this._apng.height*this._apng.channels):new Uint16Array(this._apng.width*this._apng.height*this._apng.channels)},a=this._frames.at(r);if(a){if(a.data=DC({data:a.data,width:a.width,height:a.height,channels:this._apng.channels,depth:this._apng.depth}),this._hasPalette&&(this._apng.palette=this._palette),this._hasTransparency&&(this._apng.transparency=this._transparency),r===0||a.xOffset===0&&a.yOffset===0&&a.width===this._png.width&&a.height===this._png.height)i.data=a.data;else{const u=this._apng.frames.at(r-1);this.disposeFrame(a,u,i),this.addFrameDataToCanvas(i,a)}this._apng.frames.push(i)}}return this._apng}disposeFrame(r,i,a){switch(r.disposeOp){case b0.NONE:break;case b0.BACKGROUND:for(let u=0;u<this._png.height;u++)for(let d=0;d<this._png.width;d++){const m=(u*r.width+d)*this._png.channels;for(let o=0;o<this._png.channels;o++)a.data[m+o]=0}break;case b0.PREVIOUS:a.data.set(i.data);break;default:throw new Error("Unknown disposeOp")}}addFrameDataToCanvas(r,i){const a=1<<this._png.depth,u=(d,m)=>{const o=((d+i.yOffset)*this._png.width+i.xOffset+m)*this._png.channels,w=(d*i.width+m)*this._png.channels;return{index:o,frameIndex:w}};switch(i.blendOp){case q1.SOURCE:for(let d=0;d<i.height;d++)for(let m=0;m<i.width;m++){const{index:o,frameIndex:w}=u(d,m);for(let E=0;E<this._png.channels;E++)r.data[o+E]=i.data[w+E]}break;case q1.OVER:for(let d=0;d<i.height;d++)for(let m=0;m<i.width;m++){const{index:o,frameIndex:w}=u(d,m);for(let E=0;E<this._png.channels;E++){const I=i.data[w+this._png.channels-1]/a,D=E%(this._png.channels-1)===0?1:i.data[w+E],O=Math.floor(I*D+(1-I)*r.data[o+E]);r.data[o+E]+=O}}break;default:throw new Error("Unknown blendOp")}}decodeImage(){if(this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);const r=this._isAnimated?(this._frames?.at(0)).data:this._inflator.result;if(this._filterMethod!==NC.ADAPTIVE)throw new Error(`Filter method ${this._filterMethod} not supported`);if(this._interlaceMethod===K1.NO_INTERLACE)this._png.data=DC({data:r,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else if(this._interlaceMethod===K1.ADAM7)this._png.data=Jj({data:r,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else throw new Error(`Interlace method ${this._interlaceMethod} not supported`);this._hasPalette&&(this._png.palette=this._palette),this._hasTransparency&&(this._png.transparency=this._transparency)}pushDataToFrame(){const r=this._inflator.result,i=this._frames.at(-1);i?i.data=r:this._frames.push({sequenceNumber:0,width:this._png.width,height:this._png.height,xOffset:0,yOffset:0,delayNumber:0,delayDenominator:0,disposeOp:b0.NONE,blendOp:q1.SOURCE,data:r}),this._inflator=new MC,this._writingDataChunks=!1}}function p7(e){if(e!==1&&e!==2&&e!==4&&e!==8&&e!==16)throw new Error(`invalid bit depth: ${e}`);return e}var QC;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.METRE=1]="METRE"})(QC||(QC={}));function m7(e,r){return new f7(e,r).decode()}var kn=(function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this})();function $1(){kn.console&&typeof kn.console.log=="function"&&kn.console.log.apply(kn.console,arguments)}var gs={log:$1,warn:function(e){kn.console&&(typeof kn.console.warn=="function"?kn.console.warn.apply(kn.console,arguments):$1.call(null,arguments))},error:function(e){kn.console&&(typeof kn.console.error=="function"?kn.console.error.apply(kn.console,arguments):$1(e))}};function W1(e,r,i){var a=new XMLHttpRequest;a.open("GET",e),a.responseType="blob",a.onload=function(){Wd(a.response,r,i)},a.onerror=function(){gs.error("could not download file")},a.send()}function OC(e){var r=new XMLHttpRequest;r.open("HEAD",e,!1);try{r.send()}catch{}return r.status>=200&&r.status<=299}function B0(e){try{e.dispatchEvent(new MouseEvent("click"))}catch{var r=document.createEvent("MouseEvents");r.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(r)}}var Wd=kn.saveAs||((typeof window>"u"?"undefined":rs(window))!=="object"||window!==kn?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(e,r,i){var a=kn.URL||kn.webkitURL,u=document.createElement("a");r=r||e.name||"download",u.download=r,u.rel="noopener",typeof e=="string"?(u.href=e,u.origin!==location.origin?OC(u.href)?W1(e,r,i):B0(u,u.target="_blank"):B0(u)):(u.href=a.createObjectURL(e),setTimeout(function(){a.revokeObjectURL(u.href)},4e4),setTimeout(function(){B0(u)},0))}:"msSaveOrOpenBlob"in navigator?function(e,r,i){if(r=r||e.name||"download",typeof e=="string")if(OC(e))W1(e,r,i);else{var a=document.createElement("a");a.href=e,a.target="_blank",setTimeout(function(){B0(a)})}else navigator.msSaveOrOpenBlob((function(u,d){return d===void 0?d={autoBom:!1}:rs(d)!=="object"&&(gs.warn("Deprecated: Expected third argument to be a object"),d={autoBom:!d}),d.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(u.type)?new Blob(["\uFEFF",u],{type:u.type}):u})(e,i),r)}:function(e,r,i,a){if((a=a||open("","_blank"))&&(a.document.title=a.document.body.innerText="downloading..."),typeof e=="string")return W1(e,r,i);var u=e.type==="application/octet-stream",d=/constructor/i.test(kn.HTMLElement)||kn.safari,m=/CriOS\/[\d]+/.test(navigator.userAgent);if((m||u&&d)&&(typeof FileReader>"u"?"undefined":rs(FileReader))==="object"){var o=new FileReader;o.onloadend=function(){var I=o.result;I=m?I:I.replace(/^data:[^;]*;/,"data:attachment/file;"),a?a.location.href=I:location=I,a=null},o.readAsDataURL(e)}else{var w=kn.URL||kn.webkitURL,E=w.createObjectURL(e);a?a.location=E:location.href=E,a=null,setTimeout(function(){w.revokeObjectURL(E)},4e4)}});function CT(e){var r;e=e||"",this.ok=!1,e.charAt(0)=="#"&&(e=e.substr(1,6)),e={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[e=(e=e.replace(/ /g,"")).toLowerCase()]||e;for(var i=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(o){return[parseInt(o[1]),parseInt(o[2]),parseInt(o[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(o){return[parseInt(o[1],16),parseInt(o[2],16),parseInt(o[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(o){return[parseInt(o[1]+o[1],16),parseInt(o[2]+o[2],16),parseInt(o[3]+o[3],16)]}}],a=0;a<i.length;a++){var u=i[a].re,d=i[a].process,m=u.exec(e);m&&(r=d(m),this.r=r[0],this.g=r[1],this.b=r[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var o=this.r.toString(16),w=this.g.toString(16),E=this.b.toString(16);return o.length==1&&(o="0"+o),w.length==1&&(w="0"+w),E.length==1&&(E="0"+E),"#"+o+w+E}}var z0=kn.atob.bind(kn),zC=kn.btoa.bind(kn);function Z1(e,r){var i=e[0],a=e[1],u=e[2],d=e[3];i=$l(i,a,u,d,r[0],7,-680876936),d=$l(d,i,a,u,r[1],12,-389564586),u=$l(u,d,i,a,r[2],17,606105819),a=$l(a,u,d,i,r[3],22,-1044525330),i=$l(i,a,u,d,r[4],7,-176418897),d=$l(d,i,a,u,r[5],12,1200080426),u=$l(u,d,i,a,r[6],17,-1473231341),a=$l(a,u,d,i,r[7],22,-45705983),i=$l(i,a,u,d,r[8],7,1770035416),d=$l(d,i,a,u,r[9],12,-1958414417),u=$l(u,d,i,a,r[10],17,-42063),a=$l(a,u,d,i,r[11],22,-1990404162),i=$l(i,a,u,d,r[12],7,1804603682),d=$l(d,i,a,u,r[13],12,-40341101),u=$l(u,d,i,a,r[14],17,-1502002290),i=Wl(i,a=$l(a,u,d,i,r[15],22,1236535329),u,d,r[1],5,-165796510),d=Wl(d,i,a,u,r[6],9,-1069501632),u=Wl(u,d,i,a,r[11],14,643717713),a=Wl(a,u,d,i,r[0],20,-373897302),i=Wl(i,a,u,d,r[5],5,-701558691),d=Wl(d,i,a,u,r[10],9,38016083),u=Wl(u,d,i,a,r[15],14,-660478335),a=Wl(a,u,d,i,r[4],20,-405537848),i=Wl(i,a,u,d,r[9],5,568446438),d=Wl(d,i,a,u,r[14],9,-1019803690),u=Wl(u,d,i,a,r[3],14,-187363961),a=Wl(a,u,d,i,r[8],20,1163531501),i=Wl(i,a,u,d,r[13],5,-1444681467),d=Wl(d,i,a,u,r[2],9,-51403784),u=Wl(u,d,i,a,r[7],14,1735328473),i=Zl(i,a=Wl(a,u,d,i,r[12],20,-1926607734),u,d,r[5],4,-378558),d=Zl(d,i,a,u,r[8],11,-2022574463),u=Zl(u,d,i,a,r[11],16,1839030562),a=Zl(a,u,d,i,r[14],23,-35309556),i=Zl(i,a,u,d,r[1],4,-1530992060),d=Zl(d,i,a,u,r[4],11,1272893353),u=Zl(u,d,i,a,r[7],16,-155497632),a=Zl(a,u,d,i,r[10],23,-1094730640),i=Zl(i,a,u,d,r[13],4,681279174),d=Zl(d,i,a,u,r[0],11,-358537222),u=Zl(u,d,i,a,r[3],16,-722521979),a=Zl(a,u,d,i,r[6],23,76029189),i=Zl(i,a,u,d,r[9],4,-640364487),d=Zl(d,i,a,u,r[12],11,-421815835),u=Zl(u,d,i,a,r[15],16,530742520),i=Xl(i,a=Zl(a,u,d,i,r[2],23,-995338651),u,d,r[0],6,-198630844),d=Xl(d,i,a,u,r[7],10,1126891415),u=Xl(u,d,i,a,r[14],15,-1416354905),a=Xl(a,u,d,i,r[5],21,-57434055),i=Xl(i,a,u,d,r[12],6,1700485571),d=Xl(d,i,a,u,r[3],10,-1894986606),u=Xl(u,d,i,a,r[10],15,-1051523),a=Xl(a,u,d,i,r[1],21,-2054922799),i=Xl(i,a,u,d,r[8],6,1873313359),d=Xl(d,i,a,u,r[15],10,-30611744),u=Xl(u,d,i,a,r[6],15,-1560198380),a=Xl(a,u,d,i,r[13],21,1309151649),i=Xl(i,a,u,d,r[4],6,-145523070),d=Xl(d,i,a,u,r[11],10,-1120210379),u=Xl(u,d,i,a,r[2],15,718787259),a=Xl(a,u,d,i,r[9],21,-343485551),e[0]=pd(i,e[0]),e[1]=pd(a,e[1]),e[2]=pd(u,e[2]),e[3]=pd(d,e[3])}function Yy(e,r,i,a,u,d){return r=pd(pd(r,e),pd(a,d)),pd(r<<u|r>>>32-u,i)}function $l(e,r,i,a,u,d,m){return Yy(r&i|~r&a,e,r,u,d,m)}function Wl(e,r,i,a,u,d,m){return Yy(r&a|i&~a,e,r,u,d,m)}function Zl(e,r,i,a,u,d,m){return Yy(r^i^a,e,r,u,d,m)}function Xl(e,r,i,a,u,d,m){return Yy(i^(r|~a),e,r,u,d,m)}function ET(e){var r,i=e.length,a=[1732584193,-271733879,-1732584194,271733878];for(r=64;r<=e.length;r+=64)Z1(a,g7(e.substring(r-64,r)));e=e.substring(r-64);var u=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(r=0;r<e.length;r++)u[r>>2]|=e.charCodeAt(r)<<(r%4<<3);if(u[r>>2]|=128<<(r%4<<3),r>55)for(Z1(a,u),r=0;r<16;r++)u[r]=0;return u[14]=8*i,Z1(a,u),a}function g7(e){var r,i=[];for(r=0;r<64;r+=4)i[r>>2]=e.charCodeAt(r)+(e.charCodeAt(r+1)<<8)+(e.charCodeAt(r+2)<<16)+(e.charCodeAt(r+3)<<24);return i}var HC="0123456789abcdef".split("");function y7(e){for(var r="",i=0;i<4;i++)r+=HC[e>>8*i+4&15]+HC[e>>8*i&15];return r}function v7(e){return String.fromCharCode(255&e,(65280&e)>>8,(16711680&e)>>16,(4278190080&e)>>24)}function pw(e){return ET(e).map(v7).join("")}var _7=(function(e){for(var r=0;r<e.length;r++)e[r]=y7(e[r]);return e.join("")})(ET("hello"))!="5d41402abc4b2a76b9719d911017c592";function pd(e,r){if(_7){var i=(65535&e)+(65535&r);return(e>>16)+(r>>16)+(i>>16)<<16|65535&i}return e+r&4294967295}function mw(e,r){var i,a,u,d;if(e!==i){for(var m=(u=e,d=1+(256/e.length|0),new Array(d+1).join(u)),o=[],w=0;w<256;w++)o[w]=w;var E=0;for(w=0;w<256;w++){var I=o[w];E=(E+I+m.charCodeAt(w))%256,o[w]=o[E],o[E]=I}i=e,a=o}else o=a;var D=r.length,O=0,P=0,W="";for(w=0;w<D;w++)P=(P+(I=o[O=(O+1)%256]))%256,o[O]=o[P],o[P]=I,m=o[(o[O]+o[P])%256],W+=String.fromCharCode(r.charCodeAt(w)^m);return W}var jC={print:4,modify:8,copy:16,"annot-forms":32};function rp(e,r,i,a){this.v=1,this.r=2;var u=192;e.forEach(function(o){if(jC.perm!==void 0)throw new Error("Invalid permission: "+o);u+=jC[o]}),this.padding="(N^NuAd\0NV\b..\0h>/\fdSiz";var d=(r+this.padding).substr(0,32),m=(i+this.padding).substr(0,32);this.O=this.processOwnerPassword(d,m),this.P=-(1+(255^u)),this.encryptionKey=pw(d+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(a)).substr(0,5),this.U=mw(this.encryptionKey,this.padding)}function np(e){if(/[^\u0000-\u00ff]/.test(e))throw new Error("Invalid PDF Name Object: "+e+", Only accept ASCII characters.");for(var r="",i=e.length,a=0;a<i;a++){var u=e.charCodeAt(a);r+=u<33||u===35||u===37||u===40||u===41||u===47||u===60||u===62||u===91||u===93||u===123||u===125||u>126?"#"+("0"+u.toString(16)).slice(-2):e[a]}return r}function VC(e){if(rs(e)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var r={};this.subscribe=function(i,a,u){if(u=u||!1,typeof i!="string"||typeof a!="function"||typeof u!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");r.hasOwnProperty(i)||(r[i]={});var d=Math.random().toString(35);return r[i][d]=[a,!!u],d},this.unsubscribe=function(i){for(var a in r)if(r[a][i])return delete r[a][i],Object.keys(r[a]).length===0&&delete r[a],!0;return!1},this.publish=function(i){if(r.hasOwnProperty(i)){var a=Array.prototype.slice.call(arguments,1),u=[];for(var d in r[i]){var m=r[i][d];try{m[0].apply(e,a)}catch(o){kn.console&&gs.error("jsPDF PubSub Error",o.message,o)}m[1]&&u.push(d)}u.length&&u.forEach(this.unsubscribe)}},this.getTopics=function(){return r}}function uy(e){if(!(this instanceof uy))return new uy(e);var r="opacity,stroke-opacity".split(",");for(var i in e)e.hasOwnProperty(i)&&r.indexOf(i)>=0&&(this[i]=e[i]);this.id="",this.objectNumber=-1}function ST(e,r){this.gState=e,this.matrix=r,this.id="",this.objectNumber=-1}function Xd(e,r,i,a,u){if(!(this instanceof Xd))return new Xd(e,r,i,a,u);this.type=e==="axial"?2:3,this.coords=r,this.colors=i,ST.call(this,a,u)}function ap(e,r,i,a,u){if(!(this instanceof ap))return new ap(e,r,i,a,u);this.boundingBox=e,this.xStep=r,this.yStep=i,this.stream="",this.cloneIndex=0,ST.call(this,a,u)}function fn(e){var r,i=typeof arguments[0]=="string"?arguments[0]:"p",a=arguments[1],u=arguments[2],d=arguments[3],m=[],o=1,w=16,E="S",I=null;rs(e=e||{})==="object"&&(i=e.orientation,a=e.unit||a,u=e.format||u,d=e.compress||e.compressPdf||d,(I=e.encryption||null)!==null&&(I.userPassword=I.userPassword||"",I.ownerPassword=I.ownerPassword||"",I.userPermissions=I.userPermissions||[]),o=typeof e.userUnit=="number"?Math.abs(e.userUnit):1,e.precision!==void 0&&(r=e.precision),e.floatPrecision!==void 0&&(w=e.floatPrecision),E=e.defaultPathOperation||"S"),m=e.filters||(d===!0?["FlateEncode"]:m),a=a||"mm",i=(""+(i||"P")).toLowerCase();var D=e.putOnlyUsedFonts||!1,O={},P={internal:{},__private__:{}};P.__private__.PubSub=VC;var W="1.3",z=P.__private__.getPdfVersion=function(){return W};P.__private__.setPdfVersion=function(V){W=V};var H={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};P.__private__.getPageFormats=function(){return H};var Z=P.__private__.getPageFormat=function(V){return H[V]};u=u||"a4";var se="compat",ce="advanced",de=se;function Pe(){this.saveGraphicsState(),je(new xr(qe,0,0,-qe,0,ao()*qe).toString()+" cm"),this.setFontSize(this.getFontSize()/qe),E="n",de=ce}function He(){this.restoreGraphicsState(),E="S",de=se}var Xe=P.__private__.combineFontStyleAndFontWeight=function(V,ye){if(V=="bold"&&ye=="normal"||V=="bold"&&ye==400||V=="normal"&&ye=="italic"||V=="bold"&&ye=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return ye&&(V=ye==400||ye==="normal"?V==="italic"?"italic":"normal":ye!=700&&ye!=="bold"||V!=="normal"?(ye==700?"bold":ye)+""+V:"bold"),V};P.advancedAPI=function(V){var ye=de===se;return ye&&Pe.call(this),typeof V!="function"||(V(this),ye&&He.call(this)),this},P.compatAPI=function(V){var ye=de===ce;return ye&&He.call(this),typeof V!="function"||(V(this),ye&&Pe.call(this)),this},P.isAdvancedAPI=function(){return de===ce};var Qe,Be=function(V){if(de!==ce)throw new Error(V+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},Je=P.roundToPrecision=P.__private__.roundToPrecision=function(V,ye){var tt=r||ye;if(isNaN(V)||isNaN(tt))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return V.toFixed(tt).replace(/0+$/,"")};Qe=P.hpf=P.__private__.hpf=typeof w=="number"?function(V){if(isNaN(V))throw new Error("Invalid argument passed to jsPDF.hpf");return Je(V,w)}:w==="smart"?function(V){if(isNaN(V))throw new Error("Invalid argument passed to jsPDF.hpf");return Je(V,V>-1&&V<1?16:5)}:function(V){if(isNaN(V))throw new Error("Invalid argument passed to jsPDF.hpf");return Je(V,16)};var Ae=P.f2=P.__private__.f2=function(V){if(isNaN(V))throw new Error("Invalid argument passed to jsPDF.f2");return Je(V,2)},me=P.__private__.f3=function(V){if(isNaN(V))throw new Error("Invalid argument passed to jsPDF.f3");return Je(V,3)},Te=P.scale=P.__private__.scale=function(V){if(isNaN(V))throw new Error("Invalid argument passed to jsPDF.scale");return de===se?V*qe:de===ce?V:void 0},Ie=function(V){return Te((function(ye){return de===se?ao()-ye:de===ce?ye:void 0})(V))};P.__private__.setPrecision=P.setPrecision=function(V){typeof parseInt(V,10)=="number"&&(r=parseInt(V,10))};var ut,it="00000000000000000000000000000000",ot=P.__private__.getFileId=function(){return it},ke=P.__private__.setFileId=function(V){return it=V!==void 0&&/^[a-fA-F0-9]{32}$/.test(V)?V.toUpperCase():it.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),I!==null&&(ys=new rp(I.userPermissions,I.userPassword,I.ownerPassword,it)),it};P.setFileId=function(V){return ke(V),this},P.getFileId=function(){return ot()};var Ne=P.__private__.convertDateToPDFDate=function(V){var ye=V.getTimezoneOffset(),tt=ye<0?"+":"-",gt=Math.floor(Math.abs(ye/60)),It=Math.abs(ye%60),Kt=[tt,Le(gt),"'",Le(It),"'"].join("");return["D:",V.getFullYear(),Le(V.getMonth()+1),Le(V.getDate()),Le(V.getHours()),Le(V.getMinutes()),Le(V.getSeconds()),Kt].join("")},yt=P.__private__.convertPDFDateToDate=function(V){var ye=parseInt(V.substr(2,4),10),tt=parseInt(V.substr(6,2),10)-1,gt=parseInt(V.substr(8,2),10),It=parseInt(V.substr(10,2),10),Kt=parseInt(V.substr(12,2),10),sr=parseInt(V.substr(14,2),10);return new Date(ye,tt,gt,It,Kt,sr,0)},Ce=P.__private__.setCreationDate=function(V){var ye;if(V===void 0&&(V=new Date),V instanceof Date)ye=Ne(V);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(V))throw new Error("Invalid argument passed to jsPDF.setCreationDate");ye=V}return ut=ye},ie=P.__private__.getCreationDate=function(V){var ye=ut;return V==="jsDate"&&(ye=yt(ut)),ye};P.setCreationDate=function(V){return Ce(V),this},P.getCreationDate=function(V){return ie(V)};var Ee,Le=P.__private__.padd2=function(V){return("0"+parseInt(V)).slice(-2)},Ve=P.__private__.padd2Hex=function(V){return("00"+(V=V.toString())).substr(V.length)},nt=0,et=[],_t=[],St=0,Tt=[],Gt=[],or=!1,Ar=_t;P.__private__.setCustomOutputDestination=function(V){or=!0,Ar=V};var _r=function(V){or||(Ar=V)};P.__private__.resetCustomOutputDestination=function(){or=!1,Ar=_t};var je=P.__private__.out=function(V){return V=V.toString(),St+=V.length+1,Ar.push(V),Ar},mr=P.__private__.write=function(V){return je(arguments.length===1?V.toString():Array.prototype.join.call(arguments," "))},kr=P.__private__.getArrayBuffer=function(V){for(var ye=V.length,tt=new ArrayBuffer(ye),gt=new Uint8Array(tt);ye--;)gt[ye]=V.charCodeAt(ye);return tt},Vr=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];P.__private__.getStandardFonts=function(){return Vr};var lr=e.fontSize||16;P.__private__.setFontSize=P.setFontSize=function(V){return lr=de===ce?V/qe:V,this};var Gr,Er=P.__private__.getFontSize=P.getFontSize=function(){return de===se?lr:lr*qe},Nr=e.R2L||!1;P.__private__.setR2L=P.setR2L=function(V){return Nr=V,this},P.__private__.getR2L=P.getR2L=function(){return Nr};var Dr,Dn=P.__private__.setZoomMode=function(V){if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(V))Gr=V;else if(isNaN(V)){if([void 0,null,"fullwidth","fullheight","fullpage","original"].indexOf(V)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+V+'" is not recognized.');Gr=V}else Gr=parseInt(V,10)};P.__private__.getZoomMode=function(){return Gr};var un,pt=P.__private__.setPageMode=function(V){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(V)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+V+'" is not recognized.');Dr=V};P.__private__.getPageMode=function(){return Dr};var fe=P.__private__.setLayoutMode=function(V){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(V)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+V+'" is not recognized.');un=V};P.__private__.getLayoutMode=function(){return un},P.__private__.setDisplayMode=P.setDisplayMode=function(V,ye,tt){return Dn(V),fe(ye),pt(tt),this};var pe={title:"",subject:"",author:"",keywords:"",creator:""};P.__private__.getDocumentProperty=function(V){if(Object.keys(pe).indexOf(V)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return pe[V]},P.__private__.getDocumentProperties=function(){return pe},P.__private__.setDocumentProperties=P.setProperties=P.setDocumentProperties=function(V){for(var ye in pe)pe.hasOwnProperty(ye)&&V[ye]&&(pe[ye]=V[ye]);return this},P.__private__.setDocumentProperty=function(V,ye){if(Object.keys(pe).indexOf(V)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return pe[V]=ye};var ve,qe,We,Ct,vt,ct={},bt={},Ht=[],Ft={},cr={},Jt={},fr={},rn=null,Tr=0,mt=[],tn=new VC(P),Qr=e.hotfixes||[],gr={},$r={},Rn=[],xr=function V(ye,tt,gt,It,Kt,sr){if(!(this instanceof V))return new V(ye,tt,gt,It,Kt,sr);isNaN(ye)&&(ye=1),isNaN(tt)&&(tt=0),isNaN(gt)&&(gt=0),isNaN(It)&&(It=1),isNaN(Kt)&&(Kt=0),isNaN(sr)&&(sr=0),this._matrix=[ye,tt,gt,It,Kt,sr]};Object.defineProperty(xr.prototype,"sx",{get:function(){return this._matrix[0]},set:function(V){this._matrix[0]=V}}),Object.defineProperty(xr.prototype,"shy",{get:function(){return this._matrix[1]},set:function(V){this._matrix[1]=V}}),Object.defineProperty(xr.prototype,"shx",{get:function(){return this._matrix[2]},set:function(V){this._matrix[2]=V}}),Object.defineProperty(xr.prototype,"sy",{get:function(){return this._matrix[3]},set:function(V){this._matrix[3]=V}}),Object.defineProperty(xr.prototype,"tx",{get:function(){return this._matrix[4]},set:function(V){this._matrix[4]=V}}),Object.defineProperty(xr.prototype,"ty",{get:function(){return this._matrix[5]},set:function(V){this._matrix[5]=V}}),Object.defineProperty(xr.prototype,"a",{get:function(){return this._matrix[0]},set:function(V){this._matrix[0]=V}}),Object.defineProperty(xr.prototype,"b",{get:function(){return this._matrix[1]},set:function(V){this._matrix[1]=V}}),Object.defineProperty(xr.prototype,"c",{get:function(){return this._matrix[2]},set:function(V){this._matrix[2]=V}}),Object.defineProperty(xr.prototype,"d",{get:function(){return this._matrix[3]},set:function(V){this._matrix[3]=V}}),Object.defineProperty(xr.prototype,"e",{get:function(){return this._matrix[4]},set:function(V){this._matrix[4]=V}}),Object.defineProperty(xr.prototype,"f",{get:function(){return this._matrix[5]},set:function(V){this._matrix[5]=V}}),Object.defineProperty(xr.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(xr.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(xr.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(xr.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),xr.prototype.join=function(V){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(Qe).join(V)},xr.prototype.multiply=function(V){var ye=V.sx*this.sx+V.shy*this.shx,tt=V.sx*this.shy+V.shy*this.sy,gt=V.shx*this.sx+V.sy*this.shx,It=V.shx*this.shy+V.sy*this.sy,Kt=V.tx*this.sx+V.ty*this.shx+this.tx,sr=V.tx*this.shy+V.ty*this.sy+this.ty;return new xr(ye,tt,gt,It,Kt,sr)},xr.prototype.decompose=function(){var V=this.sx,ye=this.shy,tt=this.shx,gt=this.sy,It=this.tx,Kt=this.ty,sr=Math.sqrt(V*V+ye*ye),Br=(V/=sr)*tt+(ye/=sr)*gt;tt-=V*Br,gt-=ye*Br;var Kr=Math.sqrt(tt*tt+gt*gt);return Br/=Kr,V*(gt/=Kr)<ye*(tt/=Kr)&&(V=-V,ye=-ye,Br=-Br,sr=-sr),{scale:new xr(sr,0,0,Kr,0,0),translate:new xr(1,0,0,1,It,Kt),rotate:new xr(V,ye,-ye,V,0,0),skew:new xr(1,0,Br,1,0,0)}},xr.prototype.toString=function(V){return this.join(" ")},xr.prototype.inversed=function(){var V=this.sx,ye=this.shy,tt=this.shx,gt=this.sy,It=this.tx,Kt=this.ty,sr=1/(V*gt-ye*tt),Br=gt*sr,Kr=-ye*sr,gn=-tt*sr,yn=V*sr;return new xr(Br,Kr,gn,yn,-Br*It-gn*Kt,-Kr*It-yn*Kt)},xr.prototype.applyToPoint=function(V){var ye=V.x*this.sx+V.y*this.shx+this.tx,tt=V.x*this.shy+V.y*this.sy+this.ty;return new ua(ye,tt)},xr.prototype.applyToRectangle=function(V){var ye=this.applyToPoint(V),tt=this.applyToPoint(new ua(V.x+V.w,V.y+V.h));return new sc(ye.x,ye.y,tt.x-ye.x,tt.y-ye.y)},xr.prototype.clone=function(){var V=this.sx,ye=this.shy,tt=this.shx,gt=this.sy,It=this.tx,Kt=this.ty;return new xr(V,ye,tt,gt,It,Kt)},P.Matrix=xr;var Tn=P.matrixMult=function(V,ye){return ye.multiply(V)},Bn=new xr(1,0,0,1,0,0);P.unitMatrix=P.identityMatrix=Bn;var xn=function(V,ye){if(!cr[V]){var tt=(ye instanceof Xd?"Sh":"P")+(Object.keys(Ft).length+1).toString(10);ye.id=tt,cr[V]=tt,Ft[tt]=ye,tn.publish("addPattern",ye)}};P.ShadingPattern=Xd,P.TilingPattern=ap,P.addShadingPattern=function(V,ye){return Be("addShadingPattern()"),xn(V,ye),this},P.beginTilingPattern=function(V){Be("beginTilingPattern()"),Qn(V.boundingBox[0],V.boundingBox[1],V.boundingBox[2]-V.boundingBox[0],V.boundingBox[3]-V.boundingBox[1],V.matrix)},P.endTilingPattern=function(V,ye){Be("endTilingPattern()"),ye.stream=Gt[Ee].join(`
`),xn(V,ye),tn.publish("endTilingPattern",ye),Rn.pop().restore()};var Ui,ai=P.__private__.newObject=function(){var V=Yt();return Zn(V,!0),V},Yt=P.__private__.newObjectDeferred=function(){return nt++,et[nt]=function(){return St},nt},Zn=function(V,ye){return ye=typeof ye=="boolean"&&ye,et[V]=St,ye&&je(V+" 0 obj"),V},$i=P.__private__.newAdditionalObject=function(){var V={objId:Yt(),content:""};return Tt.push(V),V},sl=Yt(),ns=Yt(),pr=P.__private__.decodeColorString=function(V){var ye=V.split(" ");if(ye.length!==2||ye[1]!=="g"&&ye[1]!=="G")ye.length!==5||ye[4]!=="k"&&ye[4]!=="K"||(ye=[(1-ye[0])*(1-ye[3]),(1-ye[1])*(1-ye[3]),(1-ye[2])*(1-ye[3]),"r"]);else{var tt=parseFloat(ye[0]);ye=[tt,tt,tt,"r"]}for(var gt="#",It=0;It<3;It++)gt+=("0"+Math.floor(255*parseFloat(ye[It])).toString(16)).slice(-2);return gt},nn=P.__private__.encodeColorString=function(V){var ye;typeof V=="string"&&(V={ch1:V});var tt=V.ch1,gt=V.ch2,It=V.ch3,Kt=V.ch4,sr=V.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof tt=="string"&&tt.charAt(0)!=="#"){var Br=new CT(tt);if(Br.ok)tt=Br.toHex();else if(!/^\d*\.?\d*$/.test(tt))throw new Error('Invalid color "'+tt+'" passed to jsPDF.encodeColorString.')}if(typeof tt=="string"&&/^#[0-9A-Fa-f]{3}$/.test(tt)&&(tt="#"+tt[1]+tt[1]+tt[2]+tt[2]+tt[3]+tt[3]),typeof tt=="string"&&/^#[0-9A-Fa-f]{6}$/.test(tt)){var Kr=parseInt(tt.substr(1),16);tt=Kr>>16&255,gt=Kr>>8&255,It=255&Kr}if(gt===void 0||Kt===void 0&&tt===gt&&gt===It)ye=typeof tt=="string"?tt+" "+sr[0]:V.precision===2?Ae(tt/255)+" "+sr[0]:me(tt/255)+" "+sr[0];else if(Kt===void 0||rs(Kt)==="object"){if(Kt&&!isNaN(Kt.a)&&Kt.a===0)return["1.","1.","1.",sr[1]].join(" ");ye=typeof tt=="string"?[tt,gt,It,sr[1]].join(" "):V.precision===2?[Ae(tt/255),Ae(gt/255),Ae(It/255),sr[1]].join(" "):[me(tt/255),me(gt/255),me(It/255),sr[1]].join(" ")}else ye=typeof tt=="string"?[tt,gt,It,Kt,sr[2]].join(" "):V.precision===2?[Ae(tt),Ae(gt),Ae(It),Ae(Kt),sr[2]].join(" "):[me(tt),me(gt),me(It),me(Kt),sr[2]].join(" ");return ye},hn=P.__private__.getFilters=function(){return m},Di=P.__private__.putStream=function(V){var ye=(V=V||{}).data||"",tt=V.filters||hn(),gt=V.alreadyAppliedFilters||[],It=V.addLength1||!1,Kt=ye.length,sr=V.objectId,Br=function(Ds){return Ds};if(I!==null&&sr===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");I!==null&&(Br=ys.encryptor(sr,0));var Kr={};tt===!0&&(tt=["FlateEncode"]);var gn=V.additionalKeyValues||[],yn=(Kr=fn.API.processDataByFilters!==void 0?fn.API.processDataByFilters(ye,tt):{data:ye,reverseChain:[]}).reverseChain+(Array.isArray(gt)?gt.join(" "):gt.toString());if(Kr.data.length!==0&&(gn.push({key:"Length",value:Kr.data.length}),It===!0&&gn.push({key:"Length1",value:Kt})),yn.length!=0)if(yn.split("/").length-1==1)gn.push({key:"Filter",value:yn});else{gn.push({key:"Filter",value:"["+yn+"]"});for(var An=0;An<gn.length;An+=1)if(gn[An].key==="DecodeParms"){for(var Hi=[],is=0;is<Kr.reverseChain.split("/").length-1;is+=1)Hi.push("null");Hi.push(gn[An].value),gn[An].value="["+Hi.join(" ")+"]"}}je("<<");for(var Si=0;Si<gn.length;Si++)je("/"+gn[Si].key+" "+gn[Si].value);je(">>"),Kr.data.length!==0&&(je("stream"),je(Br(Kr.data)),je("endstream"))},El=P.__private__.putPage=function(V){var ye=V.number,tt=V.data,gt=V.objId,It=V.contentsObjId;Zn(gt,!0),je("<</Type /Page"),je("/Parent "+V.rootDictionaryObjId+" 0 R"),je("/Resources "+V.resourceDictionaryObjId+" 0 R"),je("/MediaBox ["+parseFloat(Qe(V.mediaBox.bottomLeftX))+" "+parseFloat(Qe(V.mediaBox.bottomLeftY))+" "+Qe(V.mediaBox.topRightX)+" "+Qe(V.mediaBox.topRightY)+"]"),V.cropBox!==null&&je("/CropBox ["+Qe(V.cropBox.bottomLeftX)+" "+Qe(V.cropBox.bottomLeftY)+" "+Qe(V.cropBox.topRightX)+" "+Qe(V.cropBox.topRightY)+"]"),V.bleedBox!==null&&je("/BleedBox ["+Qe(V.bleedBox.bottomLeftX)+" "+Qe(V.bleedBox.bottomLeftY)+" "+Qe(V.bleedBox.topRightX)+" "+Qe(V.bleedBox.topRightY)+"]"),V.trimBox!==null&&je("/TrimBox ["+Qe(V.trimBox.bottomLeftX)+" "+Qe(V.trimBox.bottomLeftY)+" "+Qe(V.trimBox.topRightX)+" "+Qe(V.trimBox.topRightY)+"]"),V.artBox!==null&&je("/ArtBox ["+Qe(V.artBox.bottomLeftX)+" "+Qe(V.artBox.bottomLeftY)+" "+Qe(V.artBox.topRightX)+" "+Qe(V.artBox.topRightY)+"]"),typeof V.userUnit=="number"&&V.userUnit!==1&&je("/UserUnit "+V.userUnit),tn.publish("putPage",{objId:gt,pageContext:mt[ye],pageNumber:ye,page:tt}),je("/Contents "+It+" 0 R"),je(">>"),je("endobj");var Kt=tt.join(`
`);return de===ce&&(Kt+=`
Q`),Zn(It,!0),Di({data:Kt,filters:hn(),objectId:It}),je("endobj"),gt},ks=P.__private__.putPages=function(){var V,ye,tt=[];for(V=1;V<=Tr;V++)mt[V].objId=Yt(),mt[V].contentsObjId=Yt();for(V=1;V<=Tr;V++)tt.push(El({number:V,data:Gt[V],objId:mt[V].objId,contentsObjId:mt[V].contentsObjId,mediaBox:mt[V].mediaBox,cropBox:mt[V].cropBox,bleedBox:mt[V].bleedBox,trimBox:mt[V].trimBox,artBox:mt[V].artBox,userUnit:mt[V].userUnit,rootDictionaryObjId:sl,resourceDictionaryObjId:ns}));Zn(sl,!0),je("<</Type /Pages");var gt="/Kids [";for(ye=0;ye<Tr;ye++)gt+=tt[ye]+" 0 R ";je(gt+"]"),je("/Count "+Tr),je(">>"),je("endobj"),tn.publish("postPutPages")},dn=function(V){tn.publish("putFont",{font:V,out:je,newObject:ai,putStream:Di}),V.isAlreadyPutted!==!0&&(V.objectNumber=ai(),je("<<"),je("/Type /Font"),je("/BaseFont /"+np(V.postScriptName)),je("/Subtype /Type1"),typeof V.encoding=="string"&&je("/Encoding /"+V.encoding),je("/FirstChar 32"),je("/LastChar 255"),je(">>"),je("endobj"))},ol=function(V){V.objectNumber=ai();var ye=[];ye.push({key:"Type",value:"/XObject"}),ye.push({key:"Subtype",value:"/Form"}),ye.push({key:"BBox",value:"["+[Qe(V.x),Qe(V.y),Qe(V.x+V.width),Qe(V.y+V.height)].join(" ")+"]"}),ye.push({key:"Matrix",value:"["+V.matrix.toString()+"]"});var tt=V.pages[1].join(`
`);Di({data:tt,additionalKeyValues:ye,objectId:V.objectNumber}),je("endobj")},al=function(V,ye){ye||(ye=21);var tt=ai(),gt=(function(sr,Br){var Kr,gn=[],yn=1/(Br-1);for(Kr=0;Kr<1;Kr+=yn)gn.push(Kr);if(gn.push(1),sr[0].offset!=0){var An={offset:0,color:sr[0].color};sr.unshift(An)}if(sr[sr.length-1].offset!=1){var Hi={offset:1,color:sr[sr.length-1].color};sr.push(Hi)}for(var is="",Si=0,Ds=0;Ds<gn.length;Ds++){for(Kr=gn[Ds];Kr>sr[Si+1].offset;)Si++;var Li=sr[Si].offset,xs=(Kr-Li)/(sr[Si+1].offset-Li),Ko=sr[Si].color,fa=sr[Si+1].color;is+=Ve(Math.round((1-xs)*Ko[0]+xs*fa[0]).toString(16))+Ve(Math.round((1-xs)*Ko[1]+xs*fa[1]).toString(16))+Ve(Math.round((1-xs)*Ko[2]+xs*fa[2]).toString(16))}return is.trim()})(V.colors,ye),It=[];It.push({key:"FunctionType",value:"0"}),It.push({key:"Domain",value:"[0.0 1.0]"}),It.push({key:"Size",value:"["+ye+"]"}),It.push({key:"BitsPerSample",value:"8"}),It.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),It.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Di({data:gt,additionalKeyValues:It,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:tt}),je("endobj"),V.objectNumber=ai(),je("<< /ShadingType "+V.type),je("/ColorSpace /DeviceRGB");var Kt="/Coords ["+Qe(parseFloat(V.coords[0]))+" "+Qe(parseFloat(V.coords[1]))+" ";V.type===2?Kt+=Qe(parseFloat(V.coords[2]))+" "+Qe(parseFloat(V.coords[3])):Kt+=Qe(parseFloat(V.coords[2]))+" "+Qe(parseFloat(V.coords[3]))+" "+Qe(parseFloat(V.coords[4]))+" "+Qe(parseFloat(V.coords[5])),je(Kt+="]"),V.matrix&&je("/Matrix ["+V.matrix.toString()+"]"),je("/Function "+tt+" 0 R"),je("/Extend [true true]"),je(">>"),je("endobj")},ec=function(V,ye){var tt=Yt(),gt=ai();ye.push({resourcesOid:tt,objectOid:gt}),V.objectNumber=gt;var It=[];It.push({key:"Type",value:"/Pattern"}),It.push({key:"PatternType",value:"1"}),It.push({key:"PaintType",value:"1"}),It.push({key:"TilingType",value:"1"}),It.push({key:"BBox",value:"["+V.boundingBox.map(Qe).join(" ")+"]"}),It.push({key:"XStep",value:Qe(V.xStep)}),It.push({key:"YStep",value:Qe(V.yStep)}),It.push({key:"Resources",value:tt+" 0 R"}),V.matrix&&It.push({key:"Matrix",value:"["+V.matrix.toString()+"]"}),Di({data:V.stream,additionalKeyValues:It,objectId:V.objectNumber}),je("endobj")},Ec=function(V){for(var ye in V.objectNumber=ai(),je("<<"),V)switch(ye){case"opacity":je("/ca "+Ae(V[ye]));break;case"stroke-opacity":je("/CA "+Ae(V[ye]))}je(">>"),je("endobj")},fi=function(V){Zn(V.resourcesOid,!0),je("<<"),je("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),(function(){for(var ye in je("/Font <<"),ct)ct.hasOwnProperty(ye)&&(D===!1||D===!0&&O.hasOwnProperty(ye))&&je("/"+ye+" "+ct[ye].objectNumber+" 0 R");je(">>")})(),(function(){if(Object.keys(Ft).length>0){for(var ye in je("/Shading <<"),Ft)Ft.hasOwnProperty(ye)&&Ft[ye]instanceof Xd&&Ft[ye].objectNumber>=0&&je("/"+ye+" "+Ft[ye].objectNumber+" 0 R");tn.publish("putShadingPatternDict"),je(">>")}})(),(function(ye){if(Object.keys(Ft).length>0){for(var tt in je("/Pattern <<"),Ft)Ft.hasOwnProperty(tt)&&Ft[tt]instanceof P.TilingPattern&&Ft[tt].objectNumber>=0&&Ft[tt].objectNumber<ye&&je("/"+tt+" "+Ft[tt].objectNumber+" 0 R");tn.publish("putTilingPatternDict"),je(">>")}})(V.objectOid),(function(){if(Object.keys(Jt).length>0){var ye;for(ye in je("/ExtGState <<"),Jt)Jt.hasOwnProperty(ye)&&Jt[ye].objectNumber>=0&&je("/"+ye+" "+Jt[ye].objectNumber+" 0 R");tn.publish("putGStateDict"),je(">>")}})(),(function(){for(var ye in je("/XObject <<"),gr)gr.hasOwnProperty(ye)&&gr[ye].objectNumber>=0&&je("/"+ye+" "+gr[ye].objectNumber+" 0 R");tn.publish("putXobjectDict"),je(">>")})(),je(">>"),je("endobj")},tc=function(V){bt[V.fontName]=bt[V.fontName]||{},bt[V.fontName][V.fontStyle]=V.id},Sl=function(V,ye,tt,gt,It){var Kt={id:"F"+(Object.keys(ct).length+1).toString(10),postScriptName:V,fontName:ye,fontStyle:tt,encoding:gt,isStandardFont:It||!1,metadata:{}};return tn.publish("addFont",{font:Kt,instance:this}),ct[Kt.id]=Kt,tc(Kt),Kt.id},Ci=P.__private__.pdfEscape=P.pdfEscape=function(V,ye){return(function(tt,gt){var It,Kt,sr,Br,Kr,gn,yn,An,Hi;if(sr=(gt=gt||{}).sourceEncoding||"Unicode",Kr=gt.outputEncoding,(gt.autoencode||Kr)&&ct[ve].metadata&&ct[ve].metadata[sr]&&ct[ve].metadata[sr].encoding&&(Br=ct[ve].metadata[sr].encoding,!Kr&&ct[ve].encoding&&(Kr=ct[ve].encoding),!Kr&&Br.codePages&&(Kr=Br.codePages[0]),typeof Kr=="string"&&(Kr=Br[Kr]),Kr)){for(yn=!1,gn=[],It=0,Kt=tt.length;It<Kt;It++)(An=Kr[tt.charCodeAt(It)])?gn.push(String.fromCharCode(An)):gn.push(tt[It]),gn[It].charCodeAt(0)>>8&&(yn=!0);tt=gn.join("")}for(It=tt.length;yn===void 0&&It!==0;)tt.charCodeAt(It-1)>>8&&(yn=!0),It--;if(!yn)return tt;for(gn=gt.noBOM?[]:[254,255],It=0,Kt=tt.length;It<Kt;It++){if((Hi=(An=tt.charCodeAt(It))>>8)>>8)throw new Error("Character at position "+It+" of string '"+tt+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");gn.push(Hi),gn.push(An-(Hi<<8))}return String.fromCharCode.apply(void 0,gn)})(V,ye).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},jn=P.__private__.beginPage=function(V){Gt[++Tr]=[],mt[Tr]={objId:0,contentsObjId:0,userUnit:Number(o),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(V[0]),topRightY:Number(V[1])}},cl(Tr),_r(Gt[Ee])},rA=function(V,ye){var tt,gt,It;switch(i=ye||i,typeof V=="string"&&(tt=Z(V.toLowerCase()),Array.isArray(tt)&&(gt=tt[0],It=tt[1])),Array.isArray(V)&&(gt=V[0]*qe,It=V[1]*qe),isNaN(gt)&&(gt=u[0],It=u[1]),(gt>14400||It>14400)&&(gs.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),gt=Math.min(14400,gt),It=Math.min(14400,It)),u=[gt,It],i.substr(0,1)){case"l":It>gt&&(u=[It,gt]);break;case"p":gt>It&&(u=[It,gt])}jn(u),Wr(Ho),je(Sa),qs!==0&&je(qs+" J"),ul!==0&&je(ul+" j"),tn.publish("addPage",{pageNumber:Tr})},ll=function(V){V>0&&V<=Tr&&(Gt.splice(V,1),mt.splice(V,1),Tr--,Ee>Tr&&(Ee=Tr),this.setPage(Ee))},cl=function(V){V>0&&V<=Tr&&(Ee=V)},Us=P.__private__.getNumberOfPages=P.getNumberOfPages=function(){return Gt.length-1},Ro=function(V,ye,tt){var gt,It=void 0;return tt=tt||{},V=V!==void 0?V:ct[ve].fontName,ye=ye!==void 0?ye:ct[ve].fontStyle,gt=V.toLowerCase(),bt[gt]!==void 0&&bt[gt][ye]!==void 0?It=bt[gt][ye]:bt[V]!==void 0&&bt[V][ye]!==void 0?It=bt[V][ye]:tt.disableWarning===!1&&gs.warn("Unable to look up font label for font '"+V+"', '"+ye+"'. Refer to getFontList() for available fonts."),It||tt.noFallback||(It=bt.times[ye])==null&&(It=bt.times.normal),It},fs=P.__private__.putInfo=function(){var V=ai(),ye=function(gt){return gt};for(var tt in I!==null&&(ye=ys.encryptor(V,0)),je("<<"),je("/Producer ("+Ci(ye("jsPDF "+fn.version))+")"),pe)pe.hasOwnProperty(tt)&&pe[tt]&&je("/"+tt.substr(0,1).toUpperCase()+tt.substr(1)+" ("+Ci(ye(pe[tt]))+")");je("/CreationDate ("+Ci(ye(ut))+")"),je(">>"),je("endobj")},Ba=P.__private__.putCatalog=function(V){var ye=(V=V||{}).rootDictionaryObjId||sl;switch(ai(),je("<<"),je("/Type /Catalog"),je("/Pages "+ye+" 0 R"),Gr||(Gr="fullwidth"),Gr){case"fullwidth":je("/OpenAction [3 0 R /FitH null]");break;case"fullheight":je("/OpenAction [3 0 R /FitV null]");break;case"fullpage":je("/OpenAction [3 0 R /Fit]");break;case"original":je("/OpenAction [3 0 R /XYZ null null 1]");break;default:var tt=""+Gr;tt.substr(tt.length-1)==="%"&&(Gr=parseInt(Gr)/100),typeof Gr=="number"&&je("/OpenAction [3 0 R /XYZ null null "+Ae(Gr)+"]")}switch(un||(un="continuous"),un){case"continuous":je("/PageLayout /OneColumn");break;case"single":je("/PageLayout /SinglePage");break;case"two":case"twoleft":je("/PageLayout /TwoColumnLeft");break;case"tworight":je("/PageLayout /TwoColumnRight")}Dr&&je("/PageMode /"+Dr),tn.publish("putCatalog"),je(">>"),je("endobj")},IA=P.__private__.putTrailer=function(){je("trailer"),je("<<"),je("/Size "+(nt+1)),je("/Root "+nt+" 0 R"),je("/Info "+(nt-1)+" 0 R"),I!==null&&je("/Encrypt "+ys.oid+" 0 R"),je("/ID [ <"+it+"> <"+it+"> ]"),je(">>")},Mn=P.__private__.putHeader=function(){je("%PDF-"+W),je("%")},Sc=P.__private__.putXRef=function(){var V="0000000000";je("xref"),je("0 "+(nt+1)),je("0000000000 65535 f ");for(var ye=1;ye<=nt;ye++)typeof et[ye]=="function"?je((V+et[ye]()).slice(-10)+" 00000 n "):et[ye]!==void 0?je((V+et[ye]).slice(-10)+" 00000 n "):je("0000000000 00000 n ")},No=P.__private__.buildDocument=function(){var V;nt=0,St=0,_t=[],et=[],Tt=[],sl=Yt(),ns=Yt(),_r(_t),tn.publish("buildDocument"),Mn(),ks(),(function(){tn.publish("putAdditionalObjects");for(var tt=0;tt<Tt.length;tt++){var gt=Tt[tt];Zn(gt.objId,!0),je(gt.content),je("endobj")}tn.publish("postPutAdditionalObjects")})(),V=[],(function(){for(var tt in ct)ct.hasOwnProperty(tt)&&(D===!1||D===!0&&O.hasOwnProperty(tt))&&dn(ct[tt])})(),(function(){var tt;for(tt in Jt)Jt.hasOwnProperty(tt)&&Ec(Jt[tt])})(),(function(){for(var tt in gr)gr.hasOwnProperty(tt)&&ol(gr[tt])})(),(function(tt){var gt;for(gt in Ft)Ft.hasOwnProperty(gt)&&(Ft[gt]instanceof Xd?al(Ft[gt]):Ft[gt]instanceof ap&&ec(Ft[gt],tt))})(V),tn.publish("putResources"),V.forEach(fi),fi({resourcesOid:ns,objectOid:Number.MAX_SAFE_INTEGER}),tn.publish("postPutResources"),I!==null&&(ys.oid=ai(),je("<<"),je("/Filter /Standard"),je("/V "+ys.v),je("/R "+ys.r),je("/U <"+ys.toHexString(ys.U)+">"),je("/O <"+ys.toHexString(ys.O)+">"),je("/P "+ys.P),je(">>"),je("endobj")),fs(),Ba();var ye=St;return Sc(),IA(),je("startxref"),je(""+ye),je("%%EOF"),_r(Gt[Ee]),_t.join(`
`)},Qo=P.__private__.getBlob=function(V){return new Blob([kr(V)],{type:"application/pdf"})},Fc=P.output=P.__private__.output=(Ui=function(V,ye){switch(typeof(ye=ye||{})=="string"?ye={filename:ye}:ye.filename=ye.filename||"generated.pdf",V){case void 0:return No();case"save":P.save(ye.filename);break;case"arraybuffer":return kr(No());case"blob":return Qo(No());case"bloburi":case"bloburl":if(kn.URL!==void 0&&typeof kn.URL.createObjectURL=="function")return kn.URL&&kn.URL.createObjectURL(Qo(No()))||void 0;gs.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var tt="",gt=No();try{tt=zC(gt)}catch{tt=zC(unescape(encodeURIComponent(gt)))}return"data:application/pdf;filename="+ye.filename+";base64,"+tt;case"pdfobjectnewwindow":if(Object.prototype.toString.call(kn)==="[object Window]"){var It="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",Kt=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';ye.pdfObjectUrl&&(It=ye.pdfObjectUrl,Kt="");var sr='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+It+'"'+Kt+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(ye)+");<\/script></body></html>",Br=kn.open();return Br!==null&&Br.document.write(sr),Br}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(kn)==="[object Window]"){var Kr='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(ye.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+ye.filename+'" width="500px" height="400px" /></body></html>',gn=kn.open();if(gn!==null){gn.document.write(Kr);var yn=this;gn.document.documentElement.querySelector("#pdfViewer").onload=function(){gn.document.title=ye.filename,gn.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(yn.output("bloburl"))}}return gn}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(kn)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var An='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",ye)+'"></iframe></body></html>',Hi=kn.open();if(Hi!==null&&(Hi.document.write(An),Hi.document.title=ye.filename),Hi||typeof safari>"u")return Hi;break;case"datauri":case"dataurl":return kn.document.location.href=this.output("datauristring",ye);default:return null}},Ui.foo=function(){try{return Ui.apply(this,arguments)}catch(tt){var V=tt.stack||"";~V.indexOf(" at ")&&(V=V.split(" at ")[1]);var ye="Error in function "+V.split(`
`)[0].split("<")[0]+": "+tt.message;if(!kn.console)throw new Error(ye);kn.console.error(ye,tt),kn.alert&&alert(ye)}},Ui.foo.bar=Ui,Ui.foo),la=function(V){return Array.isArray(Qr)===!0&&Qr.indexOf(V)>-1};switch(a){case"pt":qe=1;break;case"mm":qe=72/25.4;break;case"cm":qe=72/2.54;break;case"in":qe=72;break;case"px":qe=la("px_scaling")==1?.75:96/72;break;case"pc":case"em":qe=12;break;case"ex":qe=6;break;default:if(typeof a!="number")throw new Error("Invalid unit: "+a);qe=a}var ys=null;Ce(),ke();var Oo=P.__private__.getPageInfo=P.getPageInfo=function(V){if(isNaN(V)||V%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:mt[V].objId,pageNumber:V,pageContext:mt[V]}},nA=P.__private__.getPageInfoByObjId=function(V){if(isNaN(V)||V%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var ye in mt)if(mt[ye].objId===V)break;return Oo(ye)},iA=P.__private__.getCurrentPageInfo=P.getCurrentPageInfo=function(){return{objId:mt[Ee].objId,pageNumber:Ee,pageContext:mt[Ee]}};P.addPage=function(){return rA.apply(this,arguments),this},P.setPage=function(){return cl.apply(this,arguments),_r.call(this,Gt[Ee]),this},P.insertPage=function(V){return this.addPage(),this.movePage(Ee,V),this},P.movePage=function(V,ye){var tt,gt;if(V>ye){tt=Gt[V],gt=mt[V];for(var It=V;It>ye;It--)Gt[It]=Gt[It-1],mt[It]=mt[It-1];Gt[ye]=tt,mt[ye]=gt,this.setPage(ye)}else if(V<ye){tt=Gt[V],gt=mt[V];for(var Kt=V;Kt<ye;Kt++)Gt[Kt]=Gt[Kt+1],mt[Kt]=mt[Kt+1];Gt[ye]=tt,mt[ye]=gt,this.setPage(ye)}return this},P.deletePage=function(){return ll.apply(this,arguments),this},P.__private__.text=P.text=function(V,ye,tt,gt,It){var Kt,sr,Br,Kr,gn,yn,An,Hi,is,Si=(gt=gt||{}).scope||this;if(typeof V=="number"&&typeof ye=="number"&&(typeof tt=="string"||Array.isArray(tt))){var Ds=tt;tt=ye,ye=V,V=Ds}if(arguments[3]instanceof xr==0?(Br=arguments[4],Kr=arguments[5],rs(An=arguments[3])==="object"&&An!==null||(typeof Br=="string"&&(Kr=Br,Br=null),typeof An=="string"&&(Kr=An,An=null),typeof An=="number"&&(Br=An,An=null),gt={flags:An,angle:Br,align:Kr})):(Be("The transform parameter of text() with a Matrix value"),is=It),isNaN(ye)||isNaN(tt)||V==null)throw new Error("Invalid arguments passed to jsPDF.text");if(V.length===0)return Si;var Li,xs="",Ko=typeof gt.lineHeightFactor=="number"?gt.lineHeightFactor:zo,fa=Si.internal.scaleFactor;function pa(si){return si=si.split("	").join(Array(gt.TabLen||9).join(" ")),Ci(si,An)}function Ta(si){for(var _i,Yi=si.concat(),bs=[],Pn=Yi.length;Pn--;)typeof(_i=Yi.shift())=="string"?bs.push(_i):Array.isArray(si)&&(_i.length===1||_i[1]===void 0&&_i[2]===void 0)?bs.push(_i[0]):bs.push([_i[0],_i[1],_i[2]]);return bs}function hl(si,_i){var Yi;if(typeof si=="string")Yi=_i(si)[0];else if(Array.isArray(si)){for(var bs,Pn,Lc=si.concat(),cc=[],ka=Lc.length;ka--;)typeof(bs=Lc.shift())=="string"?cc.push(_i(bs)[0]):Array.isArray(bs)&&typeof bs[0]=="string"&&(Pn=_i(bs[0],bs[1],bs[2]),cc.push([Pn[0],Pn[1],Pn[2]]));Yi=cc}return Yi}var Fi=!1,Tc=!0;if(typeof V=="string")Fi=!0;else if(Array.isArray(V)){var ma=V.concat();sr=[];for(var Pa,Xi=ma.length;Xi--;)(typeof(Pa=ma.shift())!="string"||Array.isArray(Pa)&&typeof Pa[0]!="string")&&(Tc=!1);Fi=Tc}if(Fi===!1)throw new Error('Type of text must be string or Array. "'+V+'" is not recognized.');typeof V=="string"&&(V=V.match(/[\r?\n]/)?V.split(/\r\n|\r|\n/g):[V]);var sA=lr/Si.internal.scaleFactor,Tl=sA*(Ko-1);switch(gt.baseline){case"bottom":tt-=Tl;break;case"top":tt+=sA-Tl;break;case"hanging":tt+=sA-2*Tl;break;case"middle":tt+=sA/2-Tl}if((yn=gt.maxWidth||0)>0&&(typeof V=="string"?V=Si.splitTextToSize(V,yn):Object.prototype.toString.call(V)==="[object Array]"&&(V=V.reduce(function(si,_i){return si.concat(Si.splitTextToSize(_i,yn))},[]))),Kt={text:V,x:ye,y:tt,options:gt,mutex:{pdfEscape:Ci,activeFontKey:ve,fonts:ct,activeFontSize:lr}},tn.publish("preProcessText",Kt),V=Kt.text,Br=(gt=Kt.options).angle,is instanceof xr==0&&Br&&typeof Br=="number"){Br*=Math.PI/180,gt.rotationDirection===0&&(Br=-Br),de===ce&&(Br=-Br);var ou=Math.cos(Br),Pl=Math.sin(Br);is=new xr(ou,Pl,-Pl,ou,0,0)}else Br&&Br instanceof xr&&(is=Br);de!==ce||is||(is=Bn),(gn=gt.charSpace||Zi)!==void 0&&(xs+=Qe(Te(gn))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(Hi=gt.horizontalScale)!==void 0&&(xs+=Qe(100*Hi)+` Tz
`),gt.lang;var $s=-1,La=gt.renderingMode!==void 0?gt.renderingMode:gt.stroke,dl=Si.internal.getCurrentPageInfo().pageContext;switch(La){case 0:case!1:case"fill":$s=0;break;case 1:case!0:case"stroke":$s=1;break;case 2:case"fillThenStroke":$s=2;break;case 3:case"invisible":$s=3;break;case 4:case"fillAndAddForClipping":$s=4;break;case 5:case"strokeAndAddPathForClipping":$s=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":$s=6;break;case 7:case"addToPathForClipping":$s=7}var LA=dl.usedRenderingMode!==void 0?dl.usedRenderingMode:-1;$s!==-1?xs+=$s+` Tr
`:LA!==-1&&(xs+=`0 Tr
`),$s!==-1&&(dl.usedRenderingMode=$s),Kr=gt.align||"left";var Bo,Ll=lr*Ko,oA=Si.internal.pageSize.getWidth(),aA=ct[ve];gn=gt.charSpace||Zi,yn=gt.maxWidth||0,An=Object.assign({autoencode:!0,noBOM:!0},gt.flags);var Ml=[],Ws=function(si){return Si.getStringUnitWidth(si,{font:aA,charSpace:gn,fontSize:lr,doKerning:!1})*lr/fa};if(Object.prototype.toString.call(V)==="[object Array]"){var qo;sr=Ta(V),Kr!=="left"&&(Bo=sr.map(Ws));var Co,ga=0;if(Kr==="right"){ye-=Bo[0],V=[],Xi=sr.length;for(var fl=0;fl<Xi;fl++)fl===0?(Co=_s(ye),qo=Wi(tt)):(Co=Te(ga-Bo[fl]),qo=-Ll),V.push([sr[fl],Co,qo]),ga=Bo[fl]}else if(Kr==="center"){ye-=Bo[0]/2,V=[],Xi=sr.length;for(var Ma=0;Ma<Xi;Ma++)Ma===0?(Co=_s(ye),qo=Wi(tt)):(Co=Te((ga-Bo[Ma])/2),qo=-Ll),V.push([sr[Ma],Co,qo]),ga=Bo[Ma]}else if(Kr==="left"){V=[],Xi=sr.length;for(var oc=0;oc<Xi;oc++)V.push(sr[oc])}else if(Kr==="justify"&&aA.encoding==="Identity-H"){V=[],Xi=sr.length,yn=yn!==0?yn:oA;for(var kl=0,ss=0;ss<Xi;ss++)if(qo=ss===0?Wi(tt):-Ll,Co=ss===0?_s(ye):kl,ss<Xi-1){var pl=Te((yn-Bo[ss])/(sr[ss].split(" ").length-1)),ml=sr[ss].split(" ");V.push([ml[0]+" ",Co,qo]),kl=0;for(var ya=1;ya<ml.length;ya++){var Pc=(Ws(ml[ya-1]+" "+ml[ya])-Ws(ml[ya]))*fa+pl;ya==ml.length-1?V.push([ml[ya],Pc,0]):V.push([ml[ya]+" ",Pc,0]),kl-=Pc}}else V.push([sr[ss],Co,qo]);V.push(["",kl,0])}else{if(Kr!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(V=[],Xi=sr.length,yn=yn!==0?yn:oA,ss=0;ss<Xi;ss++){qo=ss===0?Wi(tt):-Ll,Co=ss===0?_s(ye):0;var Ul=sr[ss].split(" ").length-1,ho=Ul>0?(yn-Bo[ss])/Ul:0;ss<Xi-1?Ml.push(Qe(Te(ho))):Ml.push(0),V.push([sr[ss],Co,qo])}}}(typeof gt.R2L=="boolean"?gt.R2L:Nr)===!0&&(V=hl(V,function(si,_i,Yi){return[si.split("").reverse().join(""),_i,Yi]})),Kt={text:V,x:ye,y:tt,options:gt,mutex:{pdfEscape:Ci,activeFontKey:ve,fonts:ct,activeFontSize:lr}},tn.publish("postProcessText",Kt),V=Kt.text,Li=Kt.mutex.isHex||!1;var ac=ct[ve].encoding;ac!=="WinAnsiEncoding"&&ac!=="StandardEncoding"||(V=hl(V,function(si,_i,Yi){return[pa(si),_i,Yi]})),sr=Ta(V),V=[];for(var gl,Dl,Rl,Nl=Array.isArray(sr[0])?1:0,$o="",lc=function(si,_i,Yi){var bs="";return Yi instanceof xr?(Yi=typeof gt.angle=="number"?Tn(Yi,new xr(1,0,0,1,si,_i)):Tn(new xr(1,0,0,1,si,_i),Yi),de===ce&&(Yi=Tn(new xr(1,0,0,-1,0,0),Yi)),bs=Yi.join(" ")+` Tm
`):bs=Qe(si)+" "+Qe(_i)+` Td
`,bs},os=0;os<sr.length;os++){switch($o="",Nl){case 1:Rl=(Li?"<":"(")+sr[os][0]+(Li?">":")"),gl=parseFloat(sr[os][1]),Dl=parseFloat(sr[os][2]);break;case 0:Rl=(Li?"<":"(")+sr[os]+(Li?">":")"),gl=_s(ye),Dl=Wi(tt)}Ml!==void 0&&Ml[os]!==void 0&&($o=Ml[os]+` Tw
`),os===0?V.push($o+lc(gl,Dl,is)+Rl):Nl===0?V.push($o+Rl):Nl===1&&V.push($o+lc(gl,Dl,is)+Rl)}V=Nl===0?V.join(` Tj
T* `):V.join(` Tj
`),V+=` Tj
`;var Eo=`BT
/`;return Eo+=ve+" "+lr+` Tf
`,Eo+=Qe(lr*Ko)+` TL
`,Eo+=ti+`
`,Eo+=xs,Eo+=V,je(Eo+="ET"),O[ve]=!0,Si};var rc=P.__private__.clip=P.clip=function(V){return je(V==="evenodd"?"W*":"W"),this};P.clipEvenOdd=function(){return rc("evenodd")},P.__private__.discardPath=P.discardPath=function(){return je("n"),this};var Ca=P.__private__.isValidStyle=function(V){var ye=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(V)!==-1&&(ye=!0),ye};P.__private__.setDefaultPathOperation=P.setDefaultPathOperation=function(V){return Ca(V)&&(E=V),this};var TA=P.__private__.getStyle=P.getStyle=function(V){var ye=E;switch(V){case"D":case"S":ye="S";break;case"F":ye="f";break;case"FD":case"DF":ye="B";break;case"f":case"f*":case"B":case"B*":ye=V}return ye},Kn=P.close=function(){return je("h"),this};P.stroke=function(){return je("S"),this},P.fill=function(V){return Fl("f",V),this},P.fillEvenOdd=function(V){return Fl("f*",V),this},P.fillStroke=function(V){return Fl("B",V),this},P.fillStrokeEvenOdd=function(V){return Fl("B*",V),this};var Fl=function(V,ye){rs(ye)==="object"?PA(ye,V):je(V)},nc=function(V){V===null||de===ce&&V===void 0||(V=TA(V),je(V))};function Il(V,ye,tt,gt,It){var Kt=new ap(ye||this.boundingBox,tt||this.xStep,gt||this.yStep,this.gState,It||this.matrix);Kt.stream=this.stream;var sr=V+"$$"+this.cloneIndex+++"$$";return xn(sr,Kt),Kt}var PA=function(V,ye){var tt=cr[V.key],gt=Ft[tt];if(gt instanceof Xd)je("q"),je(Ic(ye)),gt.gState&&P.setGState(gt.gState),je(V.matrix.toString()+" cm"),je("/"+tt+" sh"),je("Q");else if(gt instanceof ap){var It=new xr(1,0,0,-1,0,ao());V.matrix&&(It=It.multiply(V.matrix||Bn),tt=Il.call(gt,V.key,V.boundingBox,V.xStep,V.yStep,It).id),je("q"),je("/Pattern cs"),je("/"+tt+" scn"),gt.gState&&P.setGState(gt.gState),je(ye),je("Q")}},Ic=function(V){switch(V){case"f":case"F":case"n":return"W n";case"f*":return"W* n";case"B":case"S":return"W S";case"B*":return"W* S"}},ca=P.moveTo=function(V,ye){return je(Qe(Te(V))+" "+Qe(Ie(ye))+" m"),this},Al=P.lineTo=function(V,ye){return je(Qe(Te(V))+" "+Qe(Ie(ye))+" l"),this},an=P.curveTo=function(V,ye,tt,gt,It,Kt){return je([Qe(Te(V)),Qe(Ie(ye)),Qe(Te(tt)),Qe(Ie(gt)),Qe(Te(It)),Qe(Ie(Kt)),"c"].join(" ")),this};P.__private__.line=P.line=function(V,ye,tt,gt,It){if(isNaN(V)||isNaN(ye)||isNaN(tt)||isNaN(gt)||!Ca(It))throw new Error("Invalid arguments passed to jsPDF.line");return de===se?this.lines([[tt-V,gt-ye]],V,ye,[1,1],It||"S"):this.lines([[tt-V,gt-ye]],V,ye,[1,1]).stroke()},P.__private__.lines=P.lines=function(V,ye,tt,gt,It,Kt){var sr,Br,Kr,gn,yn,An,Hi,is,Si,Ds,Li,xs;if(typeof V=="number"&&(xs=tt,tt=ye,ye=V,V=xs),gt=gt||[1,1],Kt=Kt||!1,isNaN(ye)||isNaN(tt)||!Array.isArray(V)||!Array.isArray(gt)||!Ca(It)||typeof Kt!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(ca(ye,tt),sr=gt[0],Br=gt[1],gn=V.length,Ds=ye,Li=tt,Kr=0;Kr<gn;Kr++)(yn=V[Kr]).length===2?(Ds=yn[0]*sr+Ds,Li=yn[1]*Br+Li,Al(Ds,Li)):(An=yn[0]*sr+Ds,Hi=yn[1]*Br+Li,is=yn[2]*sr+Ds,Si=yn[3]*Br+Li,Ds=yn[4]*sr+Ds,Li=yn[5]*Br+Li,an(An,Hi,is,Si,Ds,Li));return Kt&&Kn(),nc(It),this},P.path=function(V){for(var ye=0;ye<V.length;ye++){var tt=V[ye],gt=tt.c;switch(tt.op){case"m":ca(gt[0],gt[1]);break;case"l":Al(gt[0],gt[1]);break;case"c":an.apply(this,gt);break;case"h":Kn()}}return this},P.__private__.rect=P.rect=function(V,ye,tt,gt,It){if(isNaN(V)||isNaN(ye)||isNaN(tt)||isNaN(gt)||!Ca(It))throw new Error("Invalid arguments passed to jsPDF.rect");return de===se&&(gt=-gt),je([Qe(Te(V)),Qe(Ie(ye)),Qe(Te(tt)),Qe(Te(gt)),"re"].join(" ")),nc(It),this},P.__private__.triangle=P.triangle=function(V,ye,tt,gt,It,Kt,sr){if(isNaN(V)||isNaN(ye)||isNaN(tt)||isNaN(gt)||isNaN(It)||isNaN(Kt)||!Ca(sr))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[tt-V,gt-ye],[It-tt,Kt-gt],[V-It,ye-Kt]],V,ye,[1,1],sr,!0),this},P.__private__.roundedRect=P.roundedRect=function(V,ye,tt,gt,It,Kt,sr){if(isNaN(V)||isNaN(ye)||isNaN(tt)||isNaN(gt)||isNaN(It)||isNaN(Kt)||!Ca(sr))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var Br=4/3*(Math.SQRT2-1);return It=Math.min(It,.5*tt),Kt=Math.min(Kt,.5*gt),this.lines([[tt-2*It,0],[It*Br,0,It,Kt-Kt*Br,It,Kt],[0,gt-2*Kt],[0,Kt*Br,-It*Br,Kt,-It,Kt],[2*It-tt,0],[-It*Br,0,-It,-Kt*Br,-It,-Kt],[0,2*Kt-gt],[0,-Kt*Br,It*Br,-Kt,It,-Kt]],V+It,ye,[1,1],sr,!0),this},P.__private__.ellipse=P.ellipse=function(V,ye,tt,gt,It){if(isNaN(V)||isNaN(ye)||isNaN(tt)||isNaN(gt)||!Ca(It))throw new Error("Invalid arguments passed to jsPDF.ellipse");var Kt=4/3*(Math.SQRT2-1)*tt,sr=4/3*(Math.SQRT2-1)*gt;return ca(V+tt,ye),an(V+tt,ye-sr,V+Kt,ye-gt,V,ye-gt),an(V-Kt,ye-gt,V-tt,ye-sr,V-tt,ye),an(V-tt,ye+sr,V-Kt,ye+gt,V,ye+gt),an(V+Kt,ye+gt,V+tt,ye+sr,V+tt,ye),nc(It),this},P.__private__.circle=P.circle=function(V,ye,tt,gt){if(isNaN(V)||isNaN(ye)||isNaN(tt)||!Ca(gt))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(V,ye,tt,tt,gt)},P.setFont=function(V,ye,tt){return tt&&(ye=Xe(ye,tt)),ve=Ro(V,ye,{disableWarning:!1}),this};var Ea=P.__private__.getFont=P.getFont=function(){return ct[Ro.apply(P,arguments)]};P.__private__.getFontList=P.getFontList=function(){var V,ye,tt={};for(V in bt)if(bt.hasOwnProperty(V))for(ye in tt[V]=[],bt[V])bt[V].hasOwnProperty(ye)&&tt[V].push(ye);return tt},P.addFont=function(V,ye,tt,gt,It){var Kt=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&Kt.indexOf(arguments[3])!==-1?It=arguments[3]:arguments[3]&&Kt.indexOf(arguments[3])==-1&&(tt=Xe(tt,gt)),Sl.call(this,V,ye,tt,It=It||"Identity-H")};var zo,Ho=e.lineWidth||.200025,vs=P.__private__.getLineWidth=P.getLineWidth=function(){return Ho},Wr=P.__private__.setLineWidth=P.setLineWidth=function(V){return Ho=V,je(Qe(Te(V))+" w"),this};P.__private__.setLineDash=fn.API.setLineDash=fn.API.setLineDashPattern=function(V,ye){if(V=V||[],ye=ye||0,isNaN(ye)||!Array.isArray(V))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return V=V.map(function(tt){return Qe(Te(tt))}).join(" "),ye=Qe(Te(ye)),je("["+V+"] "+ye+" d"),this};var Jn=P.__private__.getLineHeight=P.getLineHeight=function(){return lr*zo};P.__private__.getLineHeight=P.getLineHeight=function(){return lr*zo};var cn=P.__private__.setLineHeightFactor=P.setLineHeightFactor=function(V){return typeof(V=V||1.15)=="number"&&(zo=V),this},ii=P.__private__.getLineHeightFactor=P.getLineHeightFactor=function(){return zo};cn(e.lineHeight);var _s=P.__private__.getHorizontalCoordinate=function(V){return Te(V)},Wi=P.__private__.getVerticalCoordinate=function(V){return de===ce?V:mt[Ee].mediaBox.topRightY-mt[Ee].mediaBox.bottomLeftY-Te(V)},uo=P.__private__.getHorizontalCoordinateString=P.getHorizontalCoordinateString=function(V){return Qe(_s(V))},ws=P.__private__.getVerticalCoordinateString=P.getVerticalCoordinateString=function(V){return Qe(Wi(V))},Sa=e.strokeColor||"0 G";P.__private__.getStrokeColor=P.getDrawColor=function(){return pr(Sa)},P.__private__.setStrokeColor=P.setDrawColor=function(V,ye,tt,gt){return Sa=nn({ch1:V,ch2:ye,ch3:tt,ch4:gt,pdfColorType:"draw",precision:2}),je(Sa),this};var Fa=e.fillColor||"0 g";P.__private__.getFillColor=P.getFillColor=function(){return pr(Fa)},P.__private__.setFillColor=P.setFillColor=function(V,ye,tt,gt){return Fa=nn({ch1:V,ch2:ye,ch3:tt,ch4:gt,pdfColorType:"fill",precision:2}),je(Fa),this};var ti=e.textColor||"0 g",Aa=P.__private__.getTextColor=P.getTextColor=function(){return pr(ti)};P.__private__.setTextColor=P.setTextColor=function(V,ye,tt,gt){return ti=nn({ch1:V,ch2:ye,ch3:tt,ch4:gt,pdfColorType:"text",precision:3}),this};var Zi=e.charSpace,ic=P.__private__.getCharSpace=P.getCharSpace=function(){return parseFloat(Zi||0)};P.__private__.setCharSpace=P.setCharSpace=function(V){if(isNaN(V))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return Zi=V,this};var qs=0;P.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},P.__private__.setLineCap=P.setLineCap=function(V){var ye=P.CapJoinStyles[V];if(ye===void 0)throw new Error("Line cap style of '"+V+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return qs=ye,je(ye+" J"),this};var ul=0;P.__private__.setLineJoin=P.setLineJoin=function(V){var ye=P.CapJoinStyles[V];if(ye===void 0)throw new Error("Line join style of '"+V+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return ul=ye,je(ye+" j"),this},P.__private__.setLineMiterLimit=P.__private__.setMiterLimit=P.setLineMiterLimit=P.setMiterLimit=function(V){if(V=V||0,isNaN(V))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return je(Qe(Te(V))+" M"),this},P.GState=uy,P.setGState=function(V){(V=typeof V=="string"?Jt[fr[V]]:jo(null,V)).equals(rn)||(je("/"+V.id+" gs"),rn=V)};var jo=function(V,ye){if(!V||!fr[V]){var tt=!1;for(var gt in Jt)if(Jt.hasOwnProperty(gt)&&Jt[gt].equals(ye)){tt=!0;break}if(tt)ye=Jt[gt];else{var It="GS"+(Object.keys(Jt).length+1).toString(10);Jt[It]=ye,ye.id=It}return V&&(fr[V]=ye.id),tn.publish("addGState",ye),ye}};P.addGState=function(V,ye){return jo(V,ye),this},P.saveGraphicsState=function(){return je("q"),Ht.push({key:ve,size:lr,color:ti}),this},P.restoreGraphicsState=function(){je("Q");var V=Ht.pop();return ve=V.key,lr=V.size,ti=V.color,rn=null,this},P.setCurrentTransformationMatrix=function(V){return je(V.toString()+" cm"),this},P.comment=function(V){return je("#"+V),this};var ua=function(V,ye){var tt=V||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return tt},set:function(Kt){isNaN(Kt)||(tt=parseFloat(Kt))}});var gt=ye||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return gt},set:function(Kt){isNaN(Kt)||(gt=parseFloat(Kt))}});var It="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return It},set:function(Kt){It=Kt.toString()}}),this},sc=function(V,ye,tt,gt){ua.call(this,V,ye),this.type="rect";var It=tt||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return It},set:function(sr){isNaN(sr)||(It=parseFloat(sr))}});var Kt=gt||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return Kt},set:function(sr){isNaN(sr)||(Kt=parseFloat(sr))}}),this},ha=function(){this.page=Tr,this.currentPage=Ee,this.pages=Gt.slice(0),this.pagesContext=mt.slice(0),this.x=We,this.y=Ct,this.matrix=vt,this.width=En(Ee),this.height=Ia(Ee),this.outputDestination=Ar,this.id="",this.objectNumber=-1};ha.prototype.restore=function(){Tr=this.page,Ee=this.currentPage,mt=this.pagesContext,Gt=this.pages,We=this.x,Ct=this.y,vt=this.matrix,mn(Ee,this.width),bn(Ee,this.height),Ar=this.outputDestination};var Qn=function(V,ye,tt,gt,It){Rn.push(new ha),Tr=Ee=0,Gt=[],We=V,Ct=ye,vt=It,jn([tt,gt])};for(var Vo in P.beginFormObject=function(V,ye,tt,gt,It){return Qn(V,ye,tt,gt,It),this},P.endFormObject=function(V){return(function(ye){if($r[ye])Rn.pop().restore();else{var tt=new ha,gt="Xo"+(Object.keys(gr).length+1).toString(10);tt.id=gt,$r[ye]=gt,gr[gt]=tt,tn.publish("addFormObject",tt),Rn.pop().restore()}})(V),this},P.doFormObject=function(V,ye){var tt=gr[$r[V]];return je("q"),je(ye.toString()+" cm"),je("/"+tt.id+" Do"),je("Q"),this},P.getFormObject=function(V){var ye=gr[$r[V]];return{x:ye.x,y:ye.y,width:ye.width,height:ye.height,matrix:ye.matrix}},P.save=function(V,ye){return V=V||"generated.pdf",(ye=ye||{}).returnPromise=ye.returnPromise||!1,ye.returnPromise===!1?(Wd(Qo(No()),V),typeof Wd.unload=="function"&&kn.setTimeout&&setTimeout(Wd.unload,911),this):new Promise(function(tt,gt){try{var It=Wd(Qo(No()),V);typeof Wd.unload=="function"&&kn.setTimeout&&setTimeout(Wd.unload,911),tt(It)}catch(Kt){gt(Kt.message)}})},fn.API)fn.API.hasOwnProperty(Vo)&&(Vo==="events"&&fn.API.events.length?(function(V,ye){var tt,gt,It;for(It=ye.length-1;It!==-1;It--)tt=ye[It][0],gt=ye[It][1],V.subscribe.apply(V,[tt].concat(typeof gt=="function"?[gt]:gt))})(tn,fn.API.events):P[Vo]=fn.API[Vo]);function En(V){return mt[V].mediaBox.topRightX-mt[V].mediaBox.bottomLeftX}function mn(V,ye){mt[V].mediaBox.topRightX=ye+mt[V].mediaBox.bottomLeftX}function Ia(V){return mt[V].mediaBox.topRightY-mt[V].mediaBox.bottomLeftY}function bn(V,ye){mt[V].mediaBox.topRightY=ye+mt[V].mediaBox.bottomLeftY}var Go=P.getPageWidth=function(V){return En(V=V||Ee)/qe},Ei=P.setPageWidth=function(V,ye){mn(V,ye*qe)},ao=P.getPageHeight=function(V){return Ia(V=V||Ee)/qe},da=P.setPageHeight=function(V,ye){bn(V,ye*qe)};return P.internal={pdfEscape:Ci,getStyle:TA,getFont:Ea,getFontSize:Er,getCharSpace:ic,getTextColor:Aa,getLineHeight:Jn,getLineHeightFactor:ii,getLineWidth:vs,write:mr,getHorizontalCoordinate:_s,getVerticalCoordinate:Wi,getCoordinateString:uo,getVerticalCoordinateString:ws,collections:{},newObject:ai,newAdditionalObject:$i,newObjectDeferred:Yt,newObjectDeferredBegin:Zn,getFilters:hn,putStream:Di,events:tn,scaleFactor:qe,pageSize:{getWidth:function(){return Go(Ee)},setWidth:function(V){Ei(Ee,V)},getHeight:function(){return ao(Ee)},setHeight:function(V){da(Ee,V)}},encryptionOptions:I,encryption:ys,getEncryptor:function(V){return I!==null?ys.encryptor(V,0):function(ye){return ye}},output:Fc,getNumberOfPages:Us,get pages(){return Gt},out:je,f2:Ae,f3:me,getPageInfo:Oo,getPageInfoByObjId:nA,getCurrentPageInfo:iA,getPDFVersion:z,Point:ua,Rectangle:sc,Matrix:xr,hasHotfix:la},Object.defineProperty(P.internal.pageSize,"width",{get:function(){return Go(Ee)},set:function(V){Ei(Ee,V)},enumerable:!0,configurable:!0}),Object.defineProperty(P.internal.pageSize,"height",{get:function(){return ao(Ee)},set:function(V){da(Ee,V)},enumerable:!0,configurable:!0}),(function(V){for(var ye=0,tt=Vr.length;ye<tt;ye++){var gt=Sl.call(this,V[ye][0],V[ye][1],V[ye][2],Vr[ye][3],!0);D===!1&&(O[gt]=!0);var It=V[ye][0].split("-");tc({id:gt,fontName:It[0],fontStyle:It[1]||""})}tn.publish("addFonts",{fonts:ct,dictionary:bt})}).call(P,Vr),ve="F1",rA(u,i),tn.publish("initialized"),P}rp.prototype.lsbFirstWord=function(e){return String.fromCharCode(255&e,e>>8&255,e>>16&255,e>>24&255)},rp.prototype.toHexString=function(e){return e.split("").map(function(r){return("0"+(255&r.charCodeAt(0)).toString(16)).slice(-2)}).join("")},rp.prototype.hexToBytes=function(e){for(var r=[],i=0;i<e.length;i+=2)r.push(String.fromCharCode(parseInt(e.substr(i,2),16)));return r.join("")},rp.prototype.processOwnerPassword=function(e,r){return mw(pw(r).substr(0,5),e)},rp.prototype.encryptor=function(e,r){var i=pw(this.encryptionKey+String.fromCharCode(255&e,e>>8&255,e>>16&255,255&r,r>>8&255)).substr(0,10);return function(a){return mw(i,a)}},uy.prototype.equals=function(e){var r,i="id,objectNumber,equals";if(!e||rs(e)!==rs(this))return!1;var a=0;for(r in this)if(!(i.indexOf(r)>=0)){if(this.hasOwnProperty(r)&&!e.hasOwnProperty(r)||this[r]!==e[r])return!1;a++}for(r in e)e.hasOwnProperty(r)&&i.indexOf(r)<0&&a--;return a===0},fn.API={events:[]},fn.version="3.0.4";var bo=fn.API,dx=1,Af=function(e){return e.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Wf=function(e){return e.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},Hn=function(e){return e.toFixed(2)},sd=function(e){return e.toFixed(5)};bo.__acroform__={};var tA=function(e,r){e.prototype=Object.create(r.prototype),e.prototype.constructor=e},GC=function(e){return e*dx},Yu=function(e){var r=new IT,i=on.internal.getHeight(e)||0,a=on.internal.getWidth(e)||0;return r.BBox=[0,0,Number(Hn(a)),Number(Hn(i))],r},w7=bo.__acroform__.setBit=function(e,r){if(e=e||0,r=r||0,isNaN(e)||isNaN(r))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return e|1<<r},x7=bo.__acroform__.clearBit=function(e,r){if(e=e||0,r=r||0,isNaN(e)||isNaN(r))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return e&~(1<<r)},b7=bo.__acroform__.getBit=function(e,r){if(isNaN(e)||isNaN(r))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return e&1<<r?1:0},ko=bo.__acroform__.getBitForPdf=function(e,r){if(isNaN(e)||isNaN(r))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return b7(e,r-1)},Uo=bo.__acroform__.setBitForPdf=function(e,r){if(isNaN(e)||isNaN(r))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return w7(e,r-1)},Do=bo.__acroform__.clearBitForPdf=function(e,r){if(isNaN(e)||isNaN(r))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return x7(e,r-1)},B7=bo.__acroform__.calculateCoordinates=function(e,r){var i=r.internal.getHorizontalCoordinate,a=r.internal.getVerticalCoordinate,u=e[0],d=e[1],m=e[2],o=e[3],w={};return w.lowerLeft_X=i(u)||0,w.lowerLeft_Y=a(d+o)||0,w.upperRight_X=i(u+m)||0,w.upperRight_Y=a(d)||0,[Number(Hn(w.lowerLeft_X)),Number(Hn(w.lowerLeft_Y)),Number(Hn(w.upperRight_X)),Number(Hn(w.upperRight_Y))]},C7=function(e){if(e.appearanceStreamContent)return e.appearanceStreamContent;if(e.V||e.DV){var r=[],i=e._V||e.DV,a=gw(e,i),u=e.scope.internal.getFont(e.fontName,e.fontStyle).id;r.push("/Tx BMC"),r.push("q"),r.push("BT"),r.push(e.scope.__private__.encodeColorString(e.color)),r.push("/"+u+" "+Hn(a.fontSize)+" Tf"),r.push("1 0 0 1 0 0 Tm"),r.push(a.text),r.push("ET"),r.push("Q"),r.push("EMC");var d=Yu(e);return d.scope=e.scope,d.stream=r.join(`
`),d}},gw=function(e,r){var i=e.fontSize===0?e.maxFontSize:e.fontSize,a={text:"",fontSize:""},u=(r=(r=r.substr(0,1)=="("?r.substr(1):r).substr(r.length-1)==")"?r.substr(0,r.length-1):r).split(" ");u=e.multiline?u.map(function(Ae){return Ae.split(`
`)}):u.map(function(Ae){return[Ae]});var d=i,m=on.internal.getHeight(e)||0;m=m<0?-m:m;var o=on.internal.getWidth(e)||0;o=o<0?-o:o;var w=function(Ae,me,Te){if(Ae+1<u.length){var Ie=me+" "+u[Ae+1][0];return C0(Ie,e,Te).width<=o-4}return!1};d++;e:for(;d>0;){r="",d--;var E,I,D=C0("3",e,d).height,O=e.multiline?m-d:(m-D)/2,P=O+=2,W=0,z=0,H=0;if(d<=0){r=`(...) Tj
`,r+="% Width of Text: "+C0(r,e,d=12).width+", FieldWidth:"+o+`
`;break}for(var Z="",se=0,ce=0;ce<u.length;ce++)if(u.hasOwnProperty(ce)){var de=!1;if(u[ce].length!==1&&H!==u[ce].length-1){if((D+2)*(se+2)+2>m)continue e;Z+=u[ce][H],de=!0,z=ce,ce--}else{Z=(Z+=u[ce][H]+" ").substr(Z.length-1)==" "?Z.substr(0,Z.length-1):Z;var Pe=parseInt(ce),He=w(Pe,Z,d),Xe=ce>=u.length-1;if(He&&!Xe){Z+=" ",H=0;continue}if(He||Xe){if(Xe)z=Pe;else if(e.multiline&&(D+2)*(se+2)+2>m)continue e}else{if(!e.multiline||(D+2)*(se+2)+2>m)continue e;z=Pe}}for(var Qe="",Be=W;Be<=z;Be++){var Je=u[Be];if(e.multiline){if(Be===z){Qe+=Je[H]+" ",H=(H+1)%Je.length;continue}if(Be===W){Qe+=Je[Je.length-1]+" ";continue}}Qe+=Je[0]+" "}switch(Qe=Qe.substr(Qe.length-1)==" "?Qe.substr(0,Qe.length-1):Qe,I=C0(Qe,e,d).width,e.textAlign){case"right":E=o-I-2;break;case"center":E=(o-I)/2;break;default:E=2}r+=Hn(E)+" "+Hn(P)+` Td
`,r+="("+Af(Qe)+`) Tj
`,r+=-Hn(E)+` 0 Td
`,P=-(d+2),I=0,W=de?z:z+1,se++,Z=""}break}return a.text=r,a.fontSize=d,a},C0=function(e,r,i){var a=r.scope.internal.getFont(r.fontName,r.fontStyle),u=r.scope.getStringUnitWidth(e,{font:a,fontSize:parseFloat(i),charSpace:0})*parseFloat(i);return{height:r.scope.getStringUnitWidth("3",{font:a,fontSize:parseFloat(i),charSpace:0})*parseFloat(i)*1.5,width:u}},E7={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},S7=function(e,r){var i={type:"reference",object:e};r.internal.getPageInfo(e.page).pageContext.annotations.find(function(a){return a.type===i.type&&a.object===i.object})===void 0&&r.internal.getPageInfo(e.page).pageContext.annotations.push(i)},F7=function(e,r){if(r.scope=e,e.internal!==void 0&&(e.internal.acroformPlugin===void 0||e.internal.acroformPlugin.isInitialized===!1)){if(Mu.FieldNum=0,e.internal.acroformPlugin=JSON.parse(JSON.stringify(E7)),e.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");dx=e.internal.scaleFactor,e.internal.acroformPlugin.acroFormDictionaryRoot=new TT,e.internal.acroformPlugin.acroFormDictionaryRoot.scope=e,e.internal.acroformPlugin.acroFormDictionaryRoot._eventID=e.internal.events.subscribe("postPutResources",function(){(function(i){i.internal.events.unsubscribe(i.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete i.internal.acroformPlugin.acroFormDictionaryRoot._eventID,i.internal.acroformPlugin.printedOut=!0})(e)}),e.internal.events.subscribe("buildDocument",function(){(function(i){i.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var a=i.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var u in a)if(a.hasOwnProperty(u)){var d=a[u];d.objId=void 0,d.hasAnnotation&&S7(d,i)}})(e)}),e.internal.events.subscribe("putCatalog",function(){(function(i){if(i.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");i.internal.write("/AcroForm "+i.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(e)}),e.internal.events.subscribe("postPutPages",function(i){(function(a,u){var d=!a;for(var m in a||(u.internal.newObjectDeferredBegin(u.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),u.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),a=a||u.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(a.hasOwnProperty(m)){var o=a[m],w=[],E=o.Rect;if(o.Rect&&(o.Rect=B7(o.Rect,u)),u.internal.newObjectDeferredBegin(o.objId,!0),o.DA=on.createDefaultAppearanceStream(o),rs(o)==="object"&&typeof o.getKeyValueListForStream=="function"&&(w=o.getKeyValueListForStream()),o.Rect=E,o.hasAppearanceStream&&!o.appearanceStreamContent){var I=C7(o);w.push({key:"AP",value:"<</N "+I+">>"}),u.internal.acroformPlugin.xForms.push(I)}if(o.appearanceStreamContent){var D="";for(var O in o.appearanceStreamContent)if(o.appearanceStreamContent.hasOwnProperty(O)){var P=o.appearanceStreamContent[O];if(D+="/"+O+" ",D+="<<",Object.keys(P).length>=1||Array.isArray(P)){for(var m in P)if(P.hasOwnProperty(m)){var W=P[m];typeof W=="function"&&(W=W.call(u,o)),D+="/"+m+" "+W+" ",u.internal.acroformPlugin.xForms.indexOf(W)>=0||u.internal.acroformPlugin.xForms.push(W)}}else typeof(W=P)=="function"&&(W=W.call(u,o)),D+="/"+m+" "+W,u.internal.acroformPlugin.xForms.indexOf(W)>=0||u.internal.acroformPlugin.xForms.push(W);D+=">>"}w.push({key:"AP",value:`<<
`+D+">>"})}u.internal.putStream({additionalKeyValues:w,objectId:o.objId}),u.internal.out("endobj")}d&&(function(z,H){for(var Z in z)if(z.hasOwnProperty(Z)){var se=Z,ce=z[Z];H.internal.newObjectDeferredBegin(ce.objId,!0),rs(ce)==="object"&&typeof ce.putStream=="function"&&ce.putStream(),delete z[se]}})(u.internal.acroformPlugin.xForms,u)})(i,e)}),e.internal.acroformPlugin.isInitialized=!0}},FT=bo.__acroform__.arrayToPdfArray=function(e,r,i){var a=function(m){return m};if(Array.isArray(e)){for(var u="[",d=0;d<e.length;d++)switch(d!==0&&(u+=" "),rs(e[d])){case"boolean":case"number":case"object":u+=e[d].toString();break;case"string":e[d].substr(0,1)!=="/"?(r!==void 0&&i&&(a=i.internal.getEncryptor(r)),u+="("+Af(a(e[d].toString()))+")"):u+=e[d].toString()}return u+"]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},X1=function(e,r,i){var a=function(u){return u};return r!==void 0&&i&&(a=i.internal.getEncryptor(r)),(e=e||"").toString(),"("+Af(a(e))+")"},th=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(e){this._objId=e}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};th.prototype.toString=function(){return this.objId+" 0 R"},th.prototype.putStream=function(){var e=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:e,objectId:this.objId}),this.scope.internal.out("endobj")},th.prototype.getKeyValueListForStream=function(){var e=[],r=Object.getOwnPropertyNames(this).filter(function(d){return d!="content"&&d!="appearanceStreamContent"&&d!="scope"&&d!="objId"&&d.substring(0,1)!="_"});for(var i in r)if(Object.getOwnPropertyDescriptor(this,r[i]).configurable===!1){var a=r[i],u=this[a];u&&(Array.isArray(u)?e.push({key:a,value:FT(u,this.objId,this.scope)}):u instanceof th?(u.scope=this.scope,e.push({key:a,value:u.objId+" 0 R"})):typeof u!="function"&&e.push({key:a,value:u}))}return e};var IT=function(){th.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var e,r=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return r},set:function(i){r=i}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(i){e=i.trim()},get:function(){return e||null}})};tA(IT,th);var TT=function(){th.call(this);var e,r=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return r.length>0?r:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return r}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(e){var i=function(a){return a};return this.scope&&(i=this.scope.internal.getEncryptor(this.objId)),"("+Af(i(e))+")"}},set:function(i){e=i}})};tA(TT,th);var Mu=function e(){th.call(this);var r=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return r},set:function(Z){if(isNaN(Z))throw new Error('Invalid value "'+Z+'" for attribute F supplied.');r=Z}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!ko(r,3)},set:function(Z){Z?this.F=Uo(r,3):this.F=Do(r,3)}});var i=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return i},set:function(Z){if(isNaN(Z))throw new Error('Invalid value "'+Z+'" for attribute Ff supplied.');i=Z}});var a=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(a.length!==0)return a},set:function(Z){a=Z!==void 0?Z:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!a||isNaN(a[0])?0:a[0]},set:function(Z){a[0]=Z}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!a||isNaN(a[1])?0:a[1]},set:function(Z){a[1]=Z}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!a||isNaN(a[2])?0:a[2]},set:function(Z){a[2]=Z}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!a||isNaN(a[3])?0:a[3]},set:function(Z){a[3]=Z}});var u="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return u},set:function(Z){switch(Z){case"/Btn":case"/Tx":case"/Ch":case"/Sig":u=Z;break;default:throw new Error('Invalid value "'+Z+'" for attribute FT supplied.')}}});var d=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!d||d.length<1){if(this instanceof hy)return;d="FieldObject"+e.FieldNum++}var Z=function(se){return se};return this.scope&&(Z=this.scope.internal.getEncryptor(this.objId)),"("+Af(Z(d))+")"},set:function(Z){d=Z.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return d},set:function(Z){d=Z}});var m="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return m},set:function(Z){m=Z}});var o="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return o},set:function(Z){o=Z}});var w=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return w},set:function(Z){w=Z}});var E=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return E===void 0?50/dx:E},set:function(Z){E=Z}});var I="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return I},set:function(Z){I=Z}});var D="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!D||this instanceof hy||this instanceof tf))return X1(D,this.objId,this.scope)},set:function(Z){Z=Z.toString(),D=Z}});var O=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(O)return this instanceof rl==0?X1(O,this.objId,this.scope):O},set:function(Z){Z=Z.toString(),O=this instanceof rl==0?Z.substr(0,1)==="("?Wf(Z.substr(1,Z.length-2)):Wf(Z):Z}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof rl==1?Wf(O.substr(1,O.length-1)):O},set:function(Z){Z=Z.toString(),O=this instanceof rl==1?"/"+Z:Z}});var P=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(P)return P},set:function(Z){this.V=Z}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(P)return this instanceof rl==0?X1(P,this.objId,this.scope):P},set:function(Z){Z=Z.toString(),P=this instanceof rl==0?Z.substr(0,1)==="("?Wf(Z.substr(1,Z.length-2)):Wf(Z):Z}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof rl==1?Wf(P.substr(1,P.length-1)):P},set:function(Z){Z=Z.toString(),P=this instanceof rl==1?"/"+Z:Z}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var W,z=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return z},set:function(Z){Z=!!Z,z=Z}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(W)return W},set:function(Z){W=Z}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!ko(this.Ff,1)},set:function(Z){Z?this.Ff=Uo(this.Ff,1):this.Ff=Do(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!ko(this.Ff,2)},set:function(Z){Z?this.Ff=Uo(this.Ff,2):this.Ff=Do(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!ko(this.Ff,3)},set:function(Z){Z?this.Ff=Uo(this.Ff,3):this.Ff=Do(this.Ff,3)}});var H=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(H!==null)return H},set:function(Z){if([0,1,2].indexOf(Z)===-1)throw new Error('Invalid value "'+Z+'" for attribute Q supplied.');H=Z}}),Object.defineProperty(this,"textAlign",{get:function(){var Z;switch(H){case 0:default:Z="left";break;case 1:Z="center";break;case 2:Z="right"}return Z},configurable:!0,enumerable:!0,set:function(Z){switch(Z){case"right":case 2:H=2;break;case"center":case 1:H=1;break;default:H=0}}})};tA(Mu,th);var hp=function(){Mu.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var e=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return e},set:function(i){e=i}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return e},set:function(i){e=i}});var r=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return FT(r,this.objId,this.scope)},set:function(i){var a,u;u=[],typeof(a=i)=="string"&&(u=(function(d,m,o){o||(o=1);for(var w,E=[];w=m.exec(d);)E.push(w[o]);return E})(a,/\((.*?)\)/g)),r=u}}),this.getOptions=function(){return r},this.setOptions=function(i){r=i,this.sort&&r.sort()},this.addOption=function(i){i=(i=i||"").toString(),r.push(i),this.sort&&r.sort()},this.removeOption=function(i,a){for(a=a||!1,i=(i=i||"").toString();r.indexOf(i)!==-1&&(r.splice(r.indexOf(i),1),a!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!ko(this.Ff,18)},set:function(i){i?this.Ff=Uo(this.Ff,18):this.Ff=Do(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!ko(this.Ff,19)},set:function(i){this.combo===!0&&(i?this.Ff=Uo(this.Ff,19):this.Ff=Do(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!ko(this.Ff,20)},set:function(i){i?(this.Ff=Uo(this.Ff,20),r.sort()):this.Ff=Do(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!ko(this.Ff,22)},set:function(i){i?this.Ff=Uo(this.Ff,22):this.Ff=Do(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!ko(this.Ff,23)},set:function(i){i?this.Ff=Uo(this.Ff,23):this.Ff=Do(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!ko(this.Ff,27)},set:function(i){i?this.Ff=Uo(this.Ff,27):this.Ff=Do(this.Ff,27)}}),this.hasAppearanceStream=!1};tA(hp,Mu);var dp=function(){hp.call(this),this.fontName="helvetica",this.combo=!1};tA(dp,hp);var fp=function(){dp.call(this),this.combo=!0};tA(fp,dp);var H0=function(){fp.call(this),this.edit=!0};tA(H0,fp);var rl=function(){Mu.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!ko(this.Ff,15)},set:function(i){i?this.Ff=Uo(this.Ff,15):this.Ff=Do(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!ko(this.Ff,16)},set:function(i){i?this.Ff=Uo(this.Ff,16):this.Ff=Do(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!ko(this.Ff,17)},set:function(i){i?this.Ff=Uo(this.Ff,17):this.Ff=Do(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!ko(this.Ff,26)},set:function(i){i?this.Ff=Uo(this.Ff,26):this.Ff=Do(this.Ff,26)}});var e,r={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var i=function(d){return d};if(this.scope&&(i=this.scope.internal.getEncryptor(this.objId)),Object.keys(r).length!==0){var a,u=[];for(a in u.push("<<"),r)u.push("/"+a+" ("+Af(i(r[a]))+")");return u.push(">>"),u.join(`
`)}},set:function(i){rs(i)==="object"&&(r=i)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return r.CA||""},set:function(i){typeof i=="string"&&(r.CA=i)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return e},set:function(i){e=i}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return e.substr(1,e.length-1)},set:function(i){e="/"+i}})};tA(rl,Mu);var j0=function(){rl.call(this),this.pushButton=!0};tA(j0,rl);var pp=function(){rl.call(this),this.radio=!0,this.pushButton=!1;var e=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return e},set:function(r){e=r!==void 0?r:[]}})};tA(pp,rl);var hy=function(){var e,r;Mu.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return e},set:function(u){e=u}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return r},set:function(u){r=u}});var i,a={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var u=function(o){return o};this.scope&&(u=this.scope.internal.getEncryptor(this.objId));var d,m=[];for(d in m.push("<<"),a)m.push("/"+d+" ("+Af(u(a[d]))+")");return m.push(">>"),m.join(`
`)},set:function(u){rs(u)==="object"&&(a=u)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return a.CA||""},set:function(u){typeof u=="string"&&(a.CA=u)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return i},set:function(u){i=u}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return i.substr(1,i.length-1)},set:function(u){i="/"+u}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=on.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};tA(hy,Mu),pp.prototype.setAppearance=function(e){if(!("createAppearanceStream"in e)||!("getCA"in e))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var r in this.Kids)if(this.Kids.hasOwnProperty(r)){var i=this.Kids[r];i.appearanceStreamContent=e.createAppearanceStream(i.optionName),i.caption=e.getCA()}},pp.prototype.createOption=function(e){var r=new hy;return r.Parent=this,r.optionName=e,this.Kids.push(r),I7.call(this.scope,r),r};var V0=function(){rl.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=on.CheckBox.createAppearanceStream()};tA(V0,rl);var tf=function(){Mu.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!ko(this.Ff,13)},set:function(r){r?this.Ff=Uo(this.Ff,13):this.Ff=Do(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!ko(this.Ff,21)},set:function(r){r?this.Ff=Uo(this.Ff,21):this.Ff=Do(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!ko(this.Ff,23)},set:function(r){r?this.Ff=Uo(this.Ff,23):this.Ff=Do(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!ko(this.Ff,24)},set:function(r){r?this.Ff=Uo(this.Ff,24):this.Ff=Do(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!ko(this.Ff,25)},set:function(r){r?this.Ff=Uo(this.Ff,25):this.Ff=Do(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!ko(this.Ff,26)},set:function(r){r?this.Ff=Uo(this.Ff,26):this.Ff=Do(this.Ff,26)}});var e=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return e},set:function(r){e=r}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return e},set:function(r){Number.isInteger(r)&&(e=r)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};tA(tf,Mu);var G0=function(){tf.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!ko(this.Ff,14)},set:function(e){e?this.Ff=Uo(this.Ff,14):this.Ff=Do(this.Ff,14)}}),this.password=!0};tA(G0,tf);var on={CheckBox:{createAppearanceStream:function(){return{N:{On:on.CheckBox.YesNormal},D:{On:on.CheckBox.YesPushDown,Off:on.CheckBox.OffPushDown}}},YesPushDown:function(e){var r=Yu(e);r.scope=e.scope;var i=[],a=e.scope.internal.getFont(e.fontName,e.fontStyle).id,u=e.scope.__private__.encodeColorString(e.color),d=gw(e,e.caption);return i.push("0.749023 g"),i.push("0 0 "+Hn(on.internal.getWidth(e))+" "+Hn(on.internal.getHeight(e))+" re"),i.push("f"),i.push("BMC"),i.push("q"),i.push("0 0 1 rg"),i.push("/"+a+" "+Hn(d.fontSize)+" Tf "+u),i.push("BT"),i.push(d.text),i.push("ET"),i.push("Q"),i.push("EMC"),r.stream=i.join(`
`),r},YesNormal:function(e){var r=Yu(e);r.scope=e.scope;var i=e.scope.internal.getFont(e.fontName,e.fontStyle).id,a=e.scope.__private__.encodeColorString(e.color),u=[],d=on.internal.getHeight(e),m=on.internal.getWidth(e),o=gw(e,e.caption);return u.push("1 g"),u.push("0 0 "+Hn(m)+" "+Hn(d)+" re"),u.push("f"),u.push("q"),u.push("0 0 1 rg"),u.push("0 0 "+Hn(m-1)+" "+Hn(d-1)+" re"),u.push("W"),u.push("n"),u.push("0 g"),u.push("BT"),u.push("/"+i+" "+Hn(o.fontSize)+" Tf "+a),u.push(o.text),u.push("ET"),u.push("Q"),r.stream=u.join(`
`),r},OffPushDown:function(e){var r=Yu(e);r.scope=e.scope;var i=[];return i.push("0.749023 g"),i.push("0 0 "+Hn(on.internal.getWidth(e))+" "+Hn(on.internal.getHeight(e))+" re"),i.push("f"),r.stream=i.join(`
`),r}},RadioButton:{Circle:{createAppearanceStream:function(e){var r={D:{Off:on.RadioButton.Circle.OffPushDown},N:{}};return r.N[e]=on.RadioButton.Circle.YesNormal,r.D[e]=on.RadioButton.Circle.YesPushDown,r},getCA:function(){return"l"},YesNormal:function(e){var r=Yu(e);r.scope=e.scope;var i=[],a=on.internal.getWidth(e)<=on.internal.getHeight(e)?on.internal.getWidth(e)/4:on.internal.getHeight(e)/4;a=Number((.9*a).toFixed(5));var u=on.internal.Bezier_C,d=Number((a*u).toFixed(5));return i.push("q"),i.push("1 0 0 1 "+sd(on.internal.getWidth(e)/2)+" "+sd(on.internal.getHeight(e)/2)+" cm"),i.push(a+" 0 m"),i.push(a+" "+d+" "+d+" "+a+" 0 "+a+" c"),i.push("-"+d+" "+a+" -"+a+" "+d+" -"+a+" 0 c"),i.push("-"+a+" -"+d+" -"+d+" -"+a+" 0 -"+a+" c"),i.push(d+" -"+a+" "+a+" -"+d+" "+a+" 0 c"),i.push("f"),i.push("Q"),r.stream=i.join(`
`),r},YesPushDown:function(e){var r=Yu(e);r.scope=e.scope;var i=[],a=on.internal.getWidth(e)<=on.internal.getHeight(e)?on.internal.getWidth(e)/4:on.internal.getHeight(e)/4;a=Number((.9*a).toFixed(5));var u=Number((2*a).toFixed(5)),d=Number((u*on.internal.Bezier_C).toFixed(5)),m=Number((a*on.internal.Bezier_C).toFixed(5));return i.push("0.749023 g"),i.push("q"),i.push("1 0 0 1 "+sd(on.internal.getWidth(e)/2)+" "+sd(on.internal.getHeight(e)/2)+" cm"),i.push(u+" 0 m"),i.push(u+" "+d+" "+d+" "+u+" 0 "+u+" c"),i.push("-"+d+" "+u+" -"+u+" "+d+" -"+u+" 0 c"),i.push("-"+u+" -"+d+" -"+d+" -"+u+" 0 -"+u+" c"),i.push(d+" -"+u+" "+u+" -"+d+" "+u+" 0 c"),i.push("f"),i.push("Q"),i.push("0 g"),i.push("q"),i.push("1 0 0 1 "+sd(on.internal.getWidth(e)/2)+" "+sd(on.internal.getHeight(e)/2)+" cm"),i.push(a+" 0 m"),i.push(a+" "+m+" "+m+" "+a+" 0 "+a+" c"),i.push("-"+m+" "+a+" -"+a+" "+m+" -"+a+" 0 c"),i.push("-"+a+" -"+m+" -"+m+" -"+a+" 0 -"+a+" c"),i.push(m+" -"+a+" "+a+" -"+m+" "+a+" 0 c"),i.push("f"),i.push("Q"),r.stream=i.join(`
`),r},OffPushDown:function(e){var r=Yu(e);r.scope=e.scope;var i=[],a=on.internal.getWidth(e)<=on.internal.getHeight(e)?on.internal.getWidth(e)/4:on.internal.getHeight(e)/4;a=Number((.9*a).toFixed(5));var u=Number((2*a).toFixed(5)),d=Number((u*on.internal.Bezier_C).toFixed(5));return i.push("0.749023 g"),i.push("q"),i.push("1 0 0 1 "+sd(on.internal.getWidth(e)/2)+" "+sd(on.internal.getHeight(e)/2)+" cm"),i.push(u+" 0 m"),i.push(u+" "+d+" "+d+" "+u+" 0 "+u+" c"),i.push("-"+d+" "+u+" -"+u+" "+d+" -"+u+" 0 c"),i.push("-"+u+" -"+d+" -"+d+" -"+u+" 0 -"+u+" c"),i.push(d+" -"+u+" "+u+" -"+d+" "+u+" 0 c"),i.push("f"),i.push("Q"),r.stream=i.join(`
`),r}},Cross:{createAppearanceStream:function(e){var r={D:{Off:on.RadioButton.Cross.OffPushDown},N:{}};return r.N[e]=on.RadioButton.Cross.YesNormal,r.D[e]=on.RadioButton.Cross.YesPushDown,r},getCA:function(){return"8"},YesNormal:function(e){var r=Yu(e);r.scope=e.scope;var i=[],a=on.internal.calculateCross(e);return i.push("q"),i.push("1 1 "+Hn(on.internal.getWidth(e)-2)+" "+Hn(on.internal.getHeight(e)-2)+" re"),i.push("W"),i.push("n"),i.push(Hn(a.x1.x)+" "+Hn(a.x1.y)+" m"),i.push(Hn(a.x2.x)+" "+Hn(a.x2.y)+" l"),i.push(Hn(a.x4.x)+" "+Hn(a.x4.y)+" m"),i.push(Hn(a.x3.x)+" "+Hn(a.x3.y)+" l"),i.push("s"),i.push("Q"),r.stream=i.join(`
`),r},YesPushDown:function(e){var r=Yu(e);r.scope=e.scope;var i=on.internal.calculateCross(e),a=[];return a.push("0.749023 g"),a.push("0 0 "+Hn(on.internal.getWidth(e))+" "+Hn(on.internal.getHeight(e))+" re"),a.push("f"),a.push("q"),a.push("1 1 "+Hn(on.internal.getWidth(e)-2)+" "+Hn(on.internal.getHeight(e)-2)+" re"),a.push("W"),a.push("n"),a.push(Hn(i.x1.x)+" "+Hn(i.x1.y)+" m"),a.push(Hn(i.x2.x)+" "+Hn(i.x2.y)+" l"),a.push(Hn(i.x4.x)+" "+Hn(i.x4.y)+" m"),a.push(Hn(i.x3.x)+" "+Hn(i.x3.y)+" l"),a.push("s"),a.push("Q"),r.stream=a.join(`
`),r},OffPushDown:function(e){var r=Yu(e);r.scope=e.scope;var i=[];return i.push("0.749023 g"),i.push("0 0 "+Hn(on.internal.getWidth(e))+" "+Hn(on.internal.getHeight(e))+" re"),i.push("f"),r.stream=i.join(`
`),r}}},createDefaultAppearanceStream:function(e){var r=e.scope.internal.getFont(e.fontName,e.fontStyle).id,i=e.scope.__private__.encodeColorString(e.color);return"/"+r+" "+e.fontSize+" Tf "+i}};on.internal={Bezier_C:.551915024494,calculateCross:function(e){var r=on.internal.getWidth(e),i=on.internal.getHeight(e),a=Math.min(r,i);return{x1:{x:(r-a)/2,y:(i-a)/2+a},x2:{x:(r-a)/2+a,y:(i-a)/2},x3:{x:(r-a)/2,y:(i-a)/2},x4:{x:(r-a)/2+a,y:(i-a)/2+a}}}},on.internal.getWidth=function(e){var r=0;return rs(e)==="object"&&(r=GC(e.Rect[2])),r},on.internal.getHeight=function(e){var r=0;return rs(e)==="object"&&(r=GC(e.Rect[3])),r};var I7=bo.addField=function(e){if(F7(this,e),!(e instanceof Mu))throw new Error("Invalid argument passed to jsPDF.addField.");var r;return(r=e).scope.internal.acroformPlugin.printedOut&&(r.scope.internal.acroformPlugin.printedOut=!1,r.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),r.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(r),e.page=e.scope.internal.getCurrentPageInfo().pageNumber,this};bo.AcroFormChoiceField=hp,bo.AcroFormListBox=dp,bo.AcroFormComboBox=fp,bo.AcroFormEditBox=H0,bo.AcroFormButton=rl,bo.AcroFormPushButton=j0,bo.AcroFormRadioButton=pp,bo.AcroFormCheckBox=V0,bo.AcroFormTextField=tf,bo.AcroFormPasswordField=G0,bo.AcroFormAppearance=on,bo.AcroForm={ChoiceField:hp,ListBox:dp,ComboBox:fp,EditBox:H0,Button:rl,PushButton:j0,RadioButton:pp,CheckBox:V0,TextField:tf,PasswordField:G0,Appearance:on},fn.AcroForm={ChoiceField:hp,ListBox:dp,ComboBox:fp,EditBox:H0,Button:rl,PushButton:j0,RadioButton:pp,CheckBox:V0,TextField:tf,PasswordField:G0,Appearance:on};fn.AcroForm;function PT(e){return e.reduce(function(r,i,a){return r[i]=a,r},{})}(function(e){var r="addImage_";e.__addimage__={};var i="UNKNOWN",a={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},u=e.__addimage__.getImageFileTypeByImageData=function(Ae,me){var Te,Ie,ut,it,ot,ke=i;if((me=me||i)==="RGBA"||Ae.data!==void 0&&Ae.data instanceof Uint8ClampedArray&&"height"in Ae&&"width"in Ae)return"RGBA";if(He(Ae))for(ot in a)for(ut=a[ot],Te=0;Te<ut.length;Te+=1){for(it=!0,Ie=0;Ie<ut[Te].length;Ie+=1)if(ut[Te][Ie]!==void 0&&ut[Te][Ie]!==Ae[Ie]){it=!1;break}if(it===!0){ke=ot;break}}else for(ot in a)for(ut=a[ot],Te=0;Te<ut.length;Te+=1){for(it=!0,Ie=0;Ie<ut[Te].length;Ie+=1)if(ut[Te][Ie]!==void 0&&ut[Te][Ie]!==Ae.charCodeAt(Ie)){it=!1;break}if(it===!0){ke=ot;break}}return ke===i&&me!==i&&(ke=me),ke},d=function Ae(me){for(var Te=this.internal.write,Ie=this.internal.putStream,ut=(0,this.internal.getFilters)();ut.indexOf("FlateEncode")!==-1;)ut.splice(ut.indexOf("FlateEncode"),1);me.objectId=this.internal.newObject();var it=[];if(it.push({key:"Type",value:"/XObject"}),it.push({key:"Subtype",value:"/Image"}),it.push({key:"Width",value:me.width}),it.push({key:"Height",value:me.height}),me.colorSpace===Z.INDEXED?it.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(me.palette.length/3-1)+" "+("sMask"in me&&me.sMask!==void 0?me.objectId+2:me.objectId+1)+" 0 R]"}):(it.push({key:"ColorSpace",value:"/"+me.colorSpace}),me.colorSpace===Z.DEVICE_CMYK&&it.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),it.push({key:"BitsPerComponent",value:me.bitsPerComponent}),"decodeParameters"in me&&me.decodeParameters!==void 0&&it.push({key:"DecodeParms",value:"<<"+me.decodeParameters+">>"}),"transparency"in me&&Array.isArray(me.transparency)&&me.transparency.length>0){for(var ot="",ke=0,Ne=me.transparency.length;ke<Ne;ke++)ot+=me.transparency[ke]+" "+me.transparency[ke]+" ";it.push({key:"Mask",value:"["+ot+"]"})}me.sMask!==void 0&&it.push({key:"SMask",value:me.objectId+1+" 0 R"});var yt=me.filter!==void 0?["/"+me.filter]:void 0;if(Ie({data:me.data,additionalKeyValues:it,alreadyAppliedFilters:yt,objectId:me.objectId}),Te("endobj"),"sMask"in me&&me.sMask!==void 0){var Ce,ie=(Ce=me.sMaskBitsPerComponent)!==null&&Ce!==void 0?Ce:me.bitsPerComponent,Ee={width:me.width,height:me.height,colorSpace:"DeviceGray",bitsPerComponent:ie,data:me.sMask};"filter"in me&&(Ee.decodeParameters="/Predictor ".concat(me.predictor," /Colors 1 /BitsPerComponent ").concat(ie," /Columns ").concat(me.width),Ee.filter=me.filter),Ae.call(this,Ee)}if(me.colorSpace===Z.INDEXED){var Le=this.internal.newObject();Ie({data:Qe(new Uint8Array(me.palette)),objectId:Le}),Te("endobj")}},m=function(){var Ae=this.internal.collections[r+"images"];for(var me in Ae)d.call(this,Ae[me])},o=function(){var Ae,me=this.internal.collections[r+"images"],Te=this.internal.write;for(var Ie in me)Te("/I"+(Ae=me[Ie]).index,Ae.objectId,"0","R")},w=function(){this.internal.collections[r+"images"]||(this.internal.collections[r+"images"]={},this.internal.events.subscribe("putResources",m),this.internal.events.subscribe("putXobjectDict",o))},E=function(){var Ae=this.internal.collections[r+"images"];return w.call(this),Ae},I=function(){return Object.keys(this.internal.collections[r+"images"]).length},D=function(Ae){return typeof e["process"+Ae.toUpperCase()]=="function"},O=function(Ae){return rs(Ae)==="object"&&Ae.nodeType===1},P=function(Ae,me){if(Ae.nodeName==="IMG"&&Ae.hasAttribute("src")){var Te=""+Ae.getAttribute("src");if(Te.indexOf("data:image/")===0)return z0(unescape(Te).split("base64,").pop());var Ie=e.loadFile(Te,!0);if(Ie!==void 0)return Ie}if(Ae.nodeName==="CANVAS"){if(Ae.width===0||Ae.height===0)throw new Error("Given canvas must have data. Canvas width: "+Ae.width+", height: "+Ae.height);var ut;switch(me){case"PNG":ut="image/png";break;case"WEBP":ut="image/webp";break;default:ut="image/jpeg"}return z0(Ae.toDataURL(ut,1).split("base64,").pop())}},W=function(Ae){var me=this.internal.collections[r+"images"];if(me){for(var Te in me)if(Ae===me[Te].alias)return me[Te]}},z=function(Ae,me,Te){return Ae||me||(Ae=-96,me=-96),Ae<0&&(Ae=-1*Te.width*72/Ae/this.internal.scaleFactor),me<0&&(me=-1*Te.height*72/me/this.internal.scaleFactor),Ae===0&&(Ae=me*Te.width/Te.height),me===0&&(me=Ae*Te.height/Te.width),[Ae,me]},H=function(Ae,me,Te,Ie,ut,it){var ot=z.call(this,Te,Ie,ut),ke=this.internal.getCoordinateString,Ne=this.internal.getVerticalCoordinateString,yt=E.call(this);if(Te=ot[0],Ie=ot[1],yt[ut.index]=ut,it){it*=Math.PI/180;var Ce=Math.cos(it),ie=Math.sin(it),Ee=function(Ve){return Ve.toFixed(4)},Le=[Ee(Ce),Ee(ie),Ee(-1*ie),Ee(Ce),0,0,"cm"]}this.internal.write("q"),it?(this.internal.write([1,"0","0",1,ke(Ae),Ne(me+Ie),"cm"].join(" ")),this.internal.write(Le.join(" ")),this.internal.write([ke(Te),"0","0",ke(Ie),"0","0","cm"].join(" "))):this.internal.write([ke(Te),"0","0",ke(Ie),ke(Ae),Ne(me+Ie),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+ut.index+" Do"),this.internal.write("Q")},Z=e.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};e.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var se=e.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},ce=e.__addimage__.sHashCode=function(Ae){var me,Te,Ie=0;if(typeof Ae=="string")for(Te=Ae.length,me=0;me<Te;me++)Ie=(Ie<<5)-Ie+Ae.charCodeAt(me),Ie|=0;else if(He(Ae))for(Te=Ae.byteLength/2,me=0;me<Te;me++)Ie=(Ie<<5)-Ie+Ae[me],Ie|=0;return Ie},de=e.__addimage__.validateStringAsBase64=function(Ae){(Ae=Ae||"").toString().trim();var me=!0;return Ae.length===0&&(me=!1),Ae.length%4!=0&&(me=!1),/^[A-Za-z0-9+/]+$/.test(Ae.substr(0,Ae.length-2))===!1&&(me=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(Ae.substr(-2))===!1&&(me=!1),me},Pe=e.__addimage__.extractImageFromDataUrl=function(Ae){if(Ae==null||!(Ae=Ae.trim()).startsWith("data:"))return null;var me=Ae.indexOf(",");return me<0?null:Ae.substring(0,me).trim().endsWith("base64")?Ae.substring(me+1):null};e.__addimage__.isArrayBuffer=function(Ae){return Ae instanceof ArrayBuffer};var He=e.__addimage__.isArrayBufferView=function(Ae){return Ae instanceof Int8Array||Ae instanceof Uint8Array||Ae instanceof Uint8ClampedArray||Ae instanceof Int16Array||Ae instanceof Uint16Array||Ae instanceof Int32Array||Ae instanceof Uint32Array||Ae instanceof Float32Array||Ae instanceof Float64Array},Xe=e.__addimage__.binaryStringToUint8Array=function(Ae){for(var me=Ae.length,Te=new Uint8Array(me),Ie=0;Ie<me;Ie++)Te[Ie]=Ae.charCodeAt(Ie);return Te},Qe=e.__addimage__.arrayBufferToBinaryString=function(Ae){for(var me="",Te=He(Ae)?Ae:new Uint8Array(Ae),Ie=0;Ie<Te.length;Ie+=8192)me+=String.fromCharCode.apply(null,Te.subarray(Ie,Ie+8192));return me};e.addImage=function(){var Ae,me,Te,Ie,ut,it,ot,ke,Ne;if(typeof arguments[1]=="number"?(me=i,Te=arguments[1],Ie=arguments[2],ut=arguments[3],it=arguments[4],ot=arguments[5],ke=arguments[6],Ne=arguments[7]):(me=arguments[1],Te=arguments[2],Ie=arguments[3],ut=arguments[4],it=arguments[5],ot=arguments[6],ke=arguments[7],Ne=arguments[8]),rs(Ae=arguments[0])==="object"&&!O(Ae)&&"imageData"in Ae){var yt=Ae;Ae=yt.imageData,me=yt.format||me||i,Te=yt.x||Te||0,Ie=yt.y||Ie||0,ut=yt.w||yt.width||ut,it=yt.h||yt.height||it,ot=yt.alias||ot,ke=yt.compression||ke,Ne=yt.rotation||yt.angle||Ne}var Ce=this.internal.getFilters();if(ke===void 0&&Ce.indexOf("FlateEncode")!==-1&&(ke="SLOW"),isNaN(Te)||isNaN(Ie))throw new Error("Invalid coordinates passed to jsPDF.addImage");w.call(this);var ie=Be.call(this,Ae,me,ot,ke);return H.call(this,Te,Ie,ut,it,ie,Ne),this};var Be=function(Ae,me,Te,Ie){var ut,it,ot;if(typeof Ae=="string"&&u(Ae)===i){Ae=unescape(Ae);var ke=Je(Ae,!1);(ke!==""||(ke=e.loadFile(Ae,!0))!==void 0)&&(Ae=ke)}if(O(Ae)&&(Ae=P(Ae,me)),me=u(Ae,me),!D(me))throw new Error("addImage does not support files of type '"+me+"', please ensure that a plugin for '"+me+"' support is added.");if(((ot=Te)==null||ot.length===0)&&(Te=(function(Ne){return typeof Ne=="string"||He(Ne)?ce(Ne):He(Ne.data)?ce(Ne.data):null})(Ae)),(ut=W.call(this,Te))||(Ae instanceof Uint8Array||me==="RGBA"||(it=Ae,Ae=Xe(Ae)),ut=this["process"+me.toUpperCase()](Ae,I.call(this),Te,(function(Ne){return Ne&&typeof Ne=="string"&&(Ne=Ne.toUpperCase()),Ne in e.image_compression?Ne:se.NONE})(Ie),it)),!ut)throw new Error("An unknown error occurred whilst processing the image.");return ut},Je=e.__addimage__.convertBase64ToBinaryString=function(Ae,me){me=typeof me!="boolean"||me;var Te,Ie="";if(typeof Ae=="string"){var ut;Te=(ut=Pe(Ae))!==null&&ut!==void 0?ut:Ae;try{Ie=z0(Te)}catch(it){if(me)throw de(Te)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+it.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return Ie};e.getImageProperties=function(Ae){var me,Te,Ie="";if(O(Ae)&&(Ae=P(Ae)),typeof Ae=="string"&&u(Ae)===i&&((Ie=Je(Ae,!1))===""&&(Ie=e.loadFile(Ae)||""),Ae=Ie),Te=u(Ae),!D(Te))throw new Error("addImage does not support files of type '"+Te+"', please ensure that a plugin for '"+Te+"' support is added.");if(Ae instanceof Uint8Array||(Ae=Xe(Ae)),!(me=this["process"+Te.toUpperCase()](Ae)))throw new Error("An unknown error occurred whilst processing the image");return me.fileType=Te,me}})(fn.API),(function(e){var r=function(i){if(i!==void 0&&i!="")return!0};fn.API.events.push(["addPage",function(i){this.internal.getPageInfo(i.pageNumber).pageContext.annotations=[]}]),e.events.push(["putPage",function(i){for(var a,u,d,m=this.internal.getCoordinateString,o=this.internal.getVerticalCoordinateString,w=this.internal.getPageInfoByObjId(i.objId),E=i.pageContext.annotations,I=!1,D=0;D<E.length&&!I;D++)switch((a=E[D]).type){case"link":(r(a.options.url)||r(a.options.pageNumber))&&(I=!0);break;case"reference":case"text":case"freetext":I=!0}if(I!=0){this.internal.write("/Annots [");for(var O=0;O<E.length;O++){a=E[O];var P=this.internal.pdfEscape,W=this.internal.getEncryptor(i.objId);switch(a.type){case"reference":this.internal.write(" "+a.object.objId+" 0 R ");break;case"text":var z=this.internal.newAdditionalObject(),H=this.internal.newAdditionalObject(),Z=this.internal.getEncryptor(z.objId),se=a.title||"Note";d="<</Type /Annot /Subtype /Text "+(u="/Rect ["+m(a.bounds.x)+" "+o(a.bounds.y+a.bounds.h)+" "+m(a.bounds.x+a.bounds.w)+" "+o(a.bounds.y)+"] ")+"/Contents ("+P(Z(a.contents))+")",d+=" /Popup "+H.objId+" 0 R",d+=" /P "+w.objId+" 0 R",d+=" /T ("+P(Z(se))+") >>",z.content=d;var ce=z.objId+" 0 R";d="<</Type /Annot /Subtype /Popup "+(u="/Rect ["+m(a.bounds.x+30)+" "+o(a.bounds.y+a.bounds.h)+" "+m(a.bounds.x+a.bounds.w+30)+" "+o(a.bounds.y)+"] ")+" /Parent "+ce,a.open&&(d+=" /Open true"),d+=" >>",H.content=d,this.internal.write(z.objId,"0 R",H.objId,"0 R");break;case"freetext":u="/Rect ["+m(a.bounds.x)+" "+o(a.bounds.y)+" "+m(a.bounds.x+a.bounds.w)+" "+o(a.bounds.y+a.bounds.h)+"] ";var de=a.color||"#000000";d="<</Type /Annot /Subtype /FreeText "+u+"/Contents ("+P(W(a.contents))+")",d+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+de+")",d+=" /Border [0 0 0]",d+=" >>",this.internal.write(d);break;case"link":if(a.options.name){var Pe=this.annotations._nameMap[a.options.name];a.options.pageNumber=Pe.page,a.options.top=Pe.y}else a.options.top||(a.options.top=0);if(u="/Rect ["+a.finalBounds.x+" "+a.finalBounds.y+" "+a.finalBounds.w+" "+a.finalBounds.h+"] ",d="",a.options.url)d="<</Type /Annot /Subtype /Link "+u+"/Border [0 0 0] /A <</S /URI /URI ("+P(W(a.options.url))+") >>";else if(a.options.pageNumber)switch(d="<</Type /Annot /Subtype /Link "+u+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(a.options.pageNumber).objId+" 0 R",a.options.magFactor=a.options.magFactor||"XYZ",a.options.magFactor){case"Fit":d+=" /Fit]";break;case"FitH":d+=" /FitH "+a.options.top+"]";break;case"FitV":a.options.left=a.options.left||0,d+=" /FitV "+a.options.left+"]";break;default:var He=o(a.options.top);a.options.left=a.options.left||0,a.options.zoom===void 0&&(a.options.zoom=0),d+=" /XYZ "+a.options.left+" "+He+" "+a.options.zoom+"]"}d!=""&&(d+=" >>",this.internal.write(d))}}this.internal.write("]")}}]),e.createAnnotation=function(i){var a=this.internal.getCurrentPageInfo();switch(i.type){case"link":this.link(i.bounds.x,i.bounds.y,i.bounds.w,i.bounds.h,i);break;case"text":case"freetext":a.pageContext.annotations.push(i)}},e.link=function(i,a,u,d,m){var o=this.internal.getCurrentPageInfo(),w=this.internal.getCoordinateString,E=this.internal.getVerticalCoordinateString;o.pageContext.annotations.push({finalBounds:{x:w(i),y:E(a),w:w(i+u),h:E(a+d)},options:m,type:"link"})},e.textWithLink=function(i,a,u,d){var m,o,w=this.getTextWidth(i),E=this.internal.getLineHeight()/this.internal.scaleFactor;if(d.maxWidth!==void 0){o=d.maxWidth;var I=this.splitTextToSize(i,o).length;m=Math.ceil(E*I)}else o=w,m=E;return this.text(i,a,u,d),u+=.2*E,d.align==="center"&&(a-=w/2),d.align==="right"&&(a-=w),this.link(a,u-E,o,m,d),w},e.getTextWidth=function(i){var a=this.internal.getFontSize();return this.getStringUnitWidth(i)*a/this.internal.scaleFactor}})(fn.API),(function(e){var r={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},i={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},a={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},u=[1570,1571,1573,1575];e.__arabicParser__={};var d=e.__arabicParser__.isInArabicSubstitutionA=function(z){return r[z.charCodeAt(0)]!==void 0},m=e.__arabicParser__.isArabicLetter=function(z){return typeof z=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(z)},o=e.__arabicParser__.isArabicEndLetter=function(z){return m(z)&&d(z)&&r[z.charCodeAt(0)].length<=2},w=e.__arabicParser__.isArabicAlfLetter=function(z){return m(z)&&u.indexOf(z.charCodeAt(0))>=0};e.__arabicParser__.arabicLetterHasIsolatedForm=function(z){return m(z)&&d(z)&&r[z.charCodeAt(0)].length>=1};var E=e.__arabicParser__.arabicLetterHasFinalForm=function(z){return m(z)&&d(z)&&r[z.charCodeAt(0)].length>=2};e.__arabicParser__.arabicLetterHasInitialForm=function(z){return m(z)&&d(z)&&r[z.charCodeAt(0)].length>=3};var I=e.__arabicParser__.arabicLetterHasMedialForm=function(z){return m(z)&&d(z)&&r[z.charCodeAt(0)].length==4},D=e.__arabicParser__.resolveLigatures=function(z){var H=0,Z=i,se="",ce=0;for(H=0;H<z.length;H+=1)Z[z.charCodeAt(H)]!==void 0?(ce++,typeof(Z=Z[z.charCodeAt(H)])=="number"&&(se+=String.fromCharCode(Z),Z=i,ce=0),H===z.length-1&&(Z=i,se+=z.charAt(H-(ce-1)),H-=ce-1,ce=0)):(Z=i,se+=z.charAt(H-ce),H-=ce,ce=0);return se};e.__arabicParser__.isArabicDiacritic=function(z){return z!==void 0&&a[z.charCodeAt(0)]!==void 0};var O=e.__arabicParser__.getCorrectForm=function(z,H,Z){return m(z)?d(z)===!1?-1:!E(z)||!m(H)&&!m(Z)||!m(Z)&&o(H)||o(z)&&!m(H)||o(z)&&w(H)||o(z)&&o(H)?0:I(z)&&m(H)&&!o(H)&&m(Z)&&E(Z)?3:o(z)||!m(Z)?1:2:-1},P=function(z){var H=0,Z=0,se=0,ce="",de="",Pe="",He=(z=z||"").split("\\s+"),Xe=[];for(H=0;H<He.length;H+=1){for(Xe.push(""),Z=0;Z<He[H].length;Z+=1)ce=He[H][Z],de=He[H][Z-1],Pe=He[H][Z+1],m(ce)?(se=O(ce,de,Pe),Xe[H]+=se!==-1?String.fromCharCode(r[ce.charCodeAt(0)][se]):ce):Xe[H]+=ce;Xe[H]=D(Xe[H])}return Xe.join(" ")},W=e.__arabicParser__.processArabic=e.processArabic=function(){var z,H=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,Z=[];if(Array.isArray(H)){var se=0;for(Z=[],se=0;se<H.length;se+=1)Array.isArray(H[se])?Z.push([P(H[se][0]),H[se][1],H[se][2]]):Z.push([P(H[se])]);z=Z}else z=P(H);return typeof arguments[0]=="string"?z:(arguments[0].text=z,arguments[0])};e.events.push(["preProcessText",W])})(fn.API),fn.API.autoPrint=function(e){var r;return(e=e||{}).variant=e.variant||"non-conform",e.variant==="javascript"?this.addJS("print({});"):(this.internal.events.subscribe("postPutResources",function(){r=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+r+" 0 R")})),this},(function(e){var r=function(){var i=void 0;Object.defineProperty(this,"pdf",{get:function(){return i},set:function(o){i=o}});var a=150;Object.defineProperty(this,"width",{get:function(){return a},set:function(o){a=isNaN(o)||Number.isInteger(o)===!1||o<0?150:o,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=a+1)}});var u=300;Object.defineProperty(this,"height",{get:function(){return u},set:function(o){u=isNaN(o)||Number.isInteger(o)===!1||o<0?300:o,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=u+1)}});var d=[];Object.defineProperty(this,"childNodes",{get:function(){return d},set:function(o){d=o}});var m={};Object.defineProperty(this,"style",{get:function(){return m},set:function(o){m=o}}),Object.defineProperty(this,"parentNode",{})};r.prototype.getContext=function(i,a){var u;if((i=i||"2d")!=="2d")return null;for(u in a)this.pdf.context2d.hasOwnProperty(u)&&(this.pdf.context2d[u]=a[u]);return this.pdf.context2d._canvas=this,this.pdf.context2d},r.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},e.events.push(["initialized",function(){this.canvas=new r,this.canvas.pdf=this}])})(fn.API),(function(e){var r={left:0,top:0,bottom:0,right:0},i=!1,a=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},r),this.internal.__cell__.margins.width=this.getPageWidth(),u.call(this))},u=function(){this.internal.__cell__.lastCell=new d,this.internal.__cell__.pages=1},d=function(){var w=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return w},set:function(z){w=z}});var E=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return E},set:function(z){E=z}});var I=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return I},set:function(z){I=z}});var D=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return D},set:function(z){D=z}});var O=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return O},set:function(z){O=z}});var P=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return P},set:function(z){P=z}});var W=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return W},set:function(z){W=z}}),this};d.prototype.clone=function(){return new d(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},d.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},e.setHeaderFunction=function(w){return a.call(this),this.internal.__cell__.headerFunction=typeof w=="function"?w:void 0,this},e.getTextDimensions=function(w,E){a.call(this);var I=(E=E||{}).fontSize||this.getFontSize(),D=E.font||this.getFont(),O=E.scaleFactor||this.internal.scaleFactor,P=0,W=0,z=0,H=this;if(!Array.isArray(w)&&typeof w!="string"){if(typeof w!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");w=String(w)}var Z=E.maxWidth;Z>0?typeof w=="string"?w=this.splitTextToSize(w,Z):Object.prototype.toString.call(w)==="[object Array]"&&(w=w.reduce(function(ce,de){return ce.concat(H.splitTextToSize(de,Z))},[])):w=Array.isArray(w)?w:[w];for(var se=0;se<w.length;se++)P<(z=this.getStringUnitWidth(w[se],{font:D})*I)&&(P=z);return P!==0&&(W=w.length),{w:P/=O,h:Math.max((W*I*this.getLineHeightFactor()-I*(this.getLineHeightFactor()-1))/O,0)}},e.cellAddPage=function(){a.call(this),this.addPage();var w=this.internal.__cell__.margins||r;return this.internal.__cell__.lastCell=new d(w.left,w.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var m=e.cell=function(){var w;w=arguments[0]instanceof d?arguments[0]:new d(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6]),a.call(this);var E=this.internal.__cell__.lastCell,I=this.internal.__cell__.padding,D=this.internal.__cell__.margins||r,O=this.internal.__cell__.tableHeaderRow,P=this.internal.__cell__.printHeaders;return E.lineNumber!==void 0&&(E.lineNumber===w.lineNumber?(w.x=(E.x||0)+(E.width||0),w.y=E.y||0):E.y+E.height+w.height+D.bottom>this.getPageHeight()?(this.cellAddPage(),w.y=D.top,P&&O&&(this.printHeaderRow(w.lineNumber,!0),w.y+=O[0].height)):w.y=E.y+E.height||w.y),w.text[0]!==void 0&&(this.rect(w.x,w.y,w.width,w.height,i===!0?"FD":void 0),w.align==="right"?this.text(w.text,w.x+w.width-I,w.y+I,{align:"right",baseline:"top"}):w.align==="center"?this.text(w.text,w.x+w.width/2,w.y+I,{align:"center",baseline:"top",maxWidth:w.width-I-I}):this.text(w.text,w.x+I,w.y+I,{align:"left",baseline:"top",maxWidth:w.width-I-I})),this.internal.__cell__.lastCell=w,this};e.table=function(w,E,I,D,O){if(a.call(this),!I)throw new Error("No data for PDF table.");var P,W,z,H,Z=[],se=[],ce=[],de={},Pe={},He=[],Xe=[],Qe=(O=O||{}).autoSize||!1,Be=O.printHeaders!==!1,Je=O.css&&O.css["font-size"]!==void 0?16*O.css["font-size"]:O.fontSize||12,Ae=O.margins||Object.assign({width:this.getPageWidth()},r),me=typeof O.padding=="number"?O.padding:3,Te=O.headerBackgroundColor||"#c8c8c8",Ie=O.headerTextColor||"#000";if(u.call(this),this.internal.__cell__.printHeaders=Be,this.internal.__cell__.margins=Ae,this.internal.__cell__.table_font_size=Je,this.internal.__cell__.padding=me,this.internal.__cell__.headerBackgroundColor=Te,this.internal.__cell__.headerTextColor=Ie,this.setFontSize(Je),D==null)se=Z=Object.keys(I[0]),ce=Z.map(function(){return"left"});else if(Array.isArray(D)&&rs(D[0])==="object")for(Z=D.map(function(yt){return yt.name}),se=D.map(function(yt){return yt.prompt||yt.name||""}),ce=D.map(function(yt){return yt.align||"left"}),P=0;P<D.length;P+=1)Pe[D[P].name]=.7499990551181103*D[P].width;else Array.isArray(D)&&typeof D[0]=="string"&&(se=Z=D,ce=Z.map(function(){return"left"}));if(Qe||Array.isArray(D)&&typeof D[0]=="string")for(P=0;P<Z.length;P+=1){for(de[H=Z[P]]=I.map(function(yt){return yt[H]}),this.setFont(void 0,"bold"),He.push(this.getTextDimensions(se[P],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),W=de[H],this.setFont(void 0,"normal"),z=0;z<W.length;z+=1)He.push(this.getTextDimensions(W[z],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);Pe[H]=Math.max.apply(null,He)+me+me,He=[]}if(Be){var ut={};for(P=0;P<Z.length;P+=1)ut[Z[P]]={},ut[Z[P]].text=se[P],ut[Z[P]].align=ce[P];var it=o.call(this,ut,Pe);Xe=Z.map(function(yt){return new d(w,E,Pe[yt],it,ut[yt].text,void 0,ut[yt].align)}),this.setTableHeaderRow(Xe),this.printHeaderRow(1,!1)}var ot=D.reduce(function(yt,Ce){return yt[Ce.name]=Ce.align,yt},{});for(P=0;P<I.length;P+=1){"rowStart"in O&&O.rowStart instanceof Function&&O.rowStart({row:P,data:I[P]},this);var ke=o.call(this,I[P],Pe);for(z=0;z<Z.length;z+=1){var Ne=I[P][Z[z]];"cellStart"in O&&O.cellStart instanceof Function&&O.cellStart({row:P,col:z,data:Ne},this),m.call(this,new d(w,E,Pe[Z[z]],ke,Ne,P+2,ot[Z[z]]))}}return this.internal.__cell__.table_x=w,this.internal.__cell__.table_y=E,this};var o=function(w,E){var I=this.internal.__cell__.padding,D=this.internal.__cell__.table_font_size,O=this.internal.scaleFactor;return Object.keys(w).map(function(P){var W=w[P];return this.splitTextToSize(W.hasOwnProperty("text")?W.text:W,E[P]-I-I)},this).map(function(P){return this.getLineHeightFactor()*P.length*D/O+I+I},this).reduce(function(P,W){return Math.max(P,W)},0)};e.setTableHeaderRow=function(w){a.call(this),this.internal.__cell__.tableHeaderRow=w},e.printHeaderRow=function(w,E){if(a.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var I;if(i=!0,typeof this.internal.__cell__.headerFunction=="function"){var D=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new d(D[0],D[1],D[2],D[3],void 0,-1)}this.setFont(void 0,"bold");for(var O=[],P=0;P<this.internal.__cell__.tableHeaderRow.length;P+=1){I=this.internal.__cell__.tableHeaderRow[P].clone(),E&&(I.y=this.internal.__cell__.margins.top||0,O.push(I)),I.lineNumber=w;var W=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),m.call(this,I),this.setTextColor(W)}O.length>0&&this.setTableHeaderRow(O),this.setFont(void 0,"normal"),i=!1}})(fn.API);var LT={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},MT=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],yw=PT(MT),kT=[100,200,300,400,500,600,700,800,900],T7=PT(kT);function Y1(e){var r=e.family.replace(/"|'/g,"").toLowerCase(),i=(function(d){return LT[d=d||"normal"]?d:"normal"})(e.style),a=(function(d){return d?typeof d=="number"?d>=100&&d<=900&&d%100==0?d:400:/^\d00$/.test(d)?parseInt(d):d==="bold"?700:400:400})(e.weight),u=(function(d){return typeof yw[d=d||"normal"]=="number"?d:"normal"})(e.stretch);return{family:r,style:i,weight:a,stretch:u,src:e.src||[],ref:e.ref||{name:r,style:[u,i,a].join(" ")}}}function KC(e,r,i,a){var u;for(u=i;u>=0&&u<r.length;u+=a)if(e[r[u]])return e[r[u]];for(u=i;u>=0&&u<r.length;u-=a)if(e[r[u]])return e[r[u]]}var P7={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},qC={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function $C(e){return[e.stretch,e.style,e.weight,e.family].join(" ")}function WC(e){return e.trimLeft()}function L7(e,r){for(var i=0;i<e.length;){if(e.charAt(i)===r)return[e.substring(0,i),e.substring(i+1)];i+=1}return null}function M7(e){var r=e.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return r===null?null:[r[0],e.substring(r[0].length)]}var E0,ZC,XC,Zf,S0,YC,JC,e5,J1=["times"];function t5(e,r,i,a,u){var d=4,m=n5;switch(u){case fn.API.image_compression.FAST:d=1,m=r5;break;case fn.API.image_compression.MEDIUM:d=6,m=i5;break;case fn.API.image_compression.SLOW:d=9,m=s5}e=(function(w,E,I,D){for(var O,P=w.length/E,W=new Uint8Array(w.length+P),z=[k7,r5,n5,i5,s5],H=0;H<P;H+=1){var Z=H*E,se=w.subarray(Z,Z+E);if(D)W.set(D(se,I,O),Z+H);else{for(var ce=z.length,de=[],Pe=0;Pe<ce;Pe+=1)de[Pe]=z[Pe](se,I,O);var He=D7(de.concat());W.set(de[He],Z+H)}O=se}return W})(e,r,Math.ceil(i*a/8),m);var o=z_(e,{level:d});return fn.API.__addimage__.arrayBufferToBinaryString(o)}function k7(e){var r=Array.apply([],e);return r.unshift(0),r}function r5(e,r){var i=e.length,a=[];a[0]=1;for(var u=0;u<i;u+=1){var d=e[u-r]||0;a[u+1]=e[u]-d+256&255}return a}function n5(e,r,i){var a=e.length,u=[];u[0]=2;for(var d=0;d<a;d+=1){var m=i&&i[d]||0;u[d+1]=e[d]-m+256&255}return u}function i5(e,r,i){var a=e.length,u=[];u[0]=3;for(var d=0;d<a;d+=1){var m=e[d-r]||0,o=i&&i[d]||0;u[d+1]=e[d]+256-(m+o>>>1)&255}return u}function s5(e,r,i){var a=e.length,u=[];u[0]=4;for(var d=0;d<a;d+=1){var m=U7(e[d-r]||0,i&&i[d]||0,i&&i[d-r]||0);u[d+1]=e[d]-m+256&255}return u}function U7(e,r,i){if(e===r&&r===i)return e;var a=Math.abs(r-i),u=Math.abs(e-i),d=Math.abs(e+r-i-i);return a<=u&&a<=d?e:u<=d?r:i}function D7(e){var r=e.map(function(i){return i.reduce(function(a,u){return a+Math.abs(u)},0)});return r.indexOf(Math.min.apply(null,r))}function e_(e,r,i){var a=r*i,u=Math.floor(a/8),d=16-(a-8*u+i),m=(1<<i)-1;return UT(e,u)>>d&m}function o5(e,r,i,a){var u=i*a,d=Math.floor(u/8),m=16-(u-8*d+a),o=(1<<a)-1,w=(r&o)<<m;(function(E,I,D){if(I+1<E.byteLength)E.setUint16(I,D,!1);else{var O=D>>8&255;E.setUint8(I,O)}})(e,d,UT(e,d)&~(o<<m)&65535|w)}function UT(e,r){return r+1<e.byteLength?e.getUint16(r,!1):e.getUint8(r)<<8}function R7(e){var r=0;if(e[r++]!==71||e[r++]!==73||e[r++]!==70||e[r++]!==56||(e[r++]+1&253)!=56||e[r++]!==97)throw new Error("Invalid GIF 87a/89a header.");var i=e[r++]|e[r++]<<8,a=e[r++]|e[r++]<<8,u=e[r++],d=u>>7,m=1<<1+(7&u);e[r++],e[r++];var o=null,w=null;d&&(o=r,w=m,r+=3*m);var E=!0,I=[],D=0,O=null,P=0,W=null;for(this.width=i,this.height=a;E&&r<e.length;)switch(e[r++]){case 33:switch(e[r++]){case 255:if(e[r]!==11||e[r+1]==78&&e[r+2]==69&&e[r+3]==84&&e[r+4]==83&&e[r+5]==67&&e[r+6]==65&&e[r+7]==80&&e[r+8]==69&&e[r+9]==50&&e[r+10]==46&&e[r+11]==48&&e[r+12]==3&&e[r+13]==1&&e[r+16]==0)r+=14,W=e[r++]|e[r++]<<8,r++;else for(r+=12;;){if(!((Ae=e[r++])>=0))throw Error("Invalid block size");if(Ae===0)break;r+=Ae}break;case 249:if(e[r++]!==4||e[r+4]!==0)throw new Error("Invalid graphics extension block.");var z=e[r++];D=e[r++]|e[r++]<<8,O=e[r++],1&z||(O=null),P=z>>2&7,r++;break;case 254:for(;;){if(!((Ae=e[r++])>=0))throw Error("Invalid block size");if(Ae===0)break;r+=Ae}break;default:throw new Error("Unknown graphic control label: 0x"+e[r-1].toString(16))}break;case 44:var H=e[r++]|e[r++]<<8,Z=e[r++]|e[r++]<<8,se=e[r++]|e[r++]<<8,ce=e[r++]|e[r++]<<8,de=e[r++],Pe=de>>6&1,He=1<<1+(7&de),Xe=o,Qe=w,Be=!1;de>>7&&(Be=!0,Xe=r,Qe=He,r+=3*He);var Je=r;for(r++;;){var Ae;if(!((Ae=e[r++])>=0))throw Error("Invalid block size");if(Ae===0)break;r+=Ae}I.push({x:H,y:Z,width:se,height:ce,has_local_palette:Be,palette_offset:Xe,palette_size:Qe,data_offset:Je,data_length:r-Je,transparent_index:O,interlaced:!!Pe,delay:D,disposal:P});break;case 59:E=!1;break;default:throw new Error("Unknown gif block: 0x"+e[r-1].toString(16))}this.numFrames=function(){return I.length},this.loopCount=function(){return W},this.frameInfo=function(me){if(me<0||me>=I.length)throw new Error("Frame index out of range.");return I[me]},this.decodeAndBlitFrameBGRA=function(me,Te){var Ie=this.frameInfo(me),ut=Ie.width*Ie.height,it=new Uint8Array(ut);a5(e,Ie.data_offset,it,ut);var ot=Ie.palette_offset,ke=Ie.transparent_index;ke===null&&(ke=256);var Ne=Ie.width,yt=i-Ne,Ce=Ne,ie=4*(Ie.y*i+Ie.x),Ee=4*((Ie.y+Ie.height)*i+Ie.x),Le=ie,Ve=4*yt;Ie.interlaced===!0&&(Ve+=4*i*7);for(var nt=8,et=0,_t=it.length;et<_t;++et){var St=it[et];if(Ce===0&&(Ce=Ne,(Le+=Ve)>=Ee&&(Ve=4*yt+4*i*(nt-1),Le=ie+(Ne+yt)*(nt<<1),nt>>=1)),St===ke)Le+=4;else{var Tt=e[ot+3*St],Gt=e[ot+3*St+1],or=e[ot+3*St+2];Te[Le++]=or,Te[Le++]=Gt,Te[Le++]=Tt,Te[Le++]=255}--Ce}},this.decodeAndBlitFrameRGBA=function(me,Te){var Ie=this.frameInfo(me),ut=Ie.width*Ie.height,it=new Uint8Array(ut);a5(e,Ie.data_offset,it,ut);var ot=Ie.palette_offset,ke=Ie.transparent_index;ke===null&&(ke=256);var Ne=Ie.width,yt=i-Ne,Ce=Ne,ie=4*(Ie.y*i+Ie.x),Ee=4*((Ie.y+Ie.height)*i+Ie.x),Le=ie,Ve=4*yt;Ie.interlaced===!0&&(Ve+=4*i*7);for(var nt=8,et=0,_t=it.length;et<_t;++et){var St=it[et];if(Ce===0&&(Ce=Ne,(Le+=Ve)>=Ee&&(Ve=4*yt+4*i*(nt-1),Le=ie+(Ne+yt)*(nt<<1),nt>>=1)),St===ke)Le+=4;else{var Tt=e[ot+3*St],Gt=e[ot+3*St+1],or=e[ot+3*St+2];Te[Le++]=Tt,Te[Le++]=Gt,Te[Le++]=or,Te[Le++]=255}--Ce}}}function a5(e,r,i,a){for(var u=e[r++],d=1<<u,m=d+1,o=m+1,w=u+1,E=(1<<w)-1,I=0,D=0,O=0,P=e[r++],W=new Int32Array(4096),z=null;;){for(;I<16&&P!==0;)D|=e[r++]<<I,I+=8,P===1?P=e[r++]:--P;if(I<w)break;var H=D&E;if(D>>=w,I-=w,H!==d){if(H===m)break;for(var Z=H<o?H:z,se=0,ce=Z;ce>d;)ce=W[ce]>>8,++se;var de=ce;if(O+se+(Z!==H?1:0)>a)return void gs.log("Warning, gif stream longer than expected.");i[O++]=de;var Pe=O+=se;for(Z!==H&&(i[O++]=de),ce=Z;se--;)ce=W[ce],i[--Pe]=255&ce,ce>>=8;z!==null&&o<4096&&(W[o++]=z<<8|de,o>=E+1&&w<12&&(++w,E=E<<1|1)),z=H}else o=m+1,E=(1<<(w=u+1))-1,z=null}return O!==a&&gs.log("Warning, gif stream shorter than expected."),i}function t_(e){var r,i,a,u,d,m=Math.floor,o=new Array(64),w=new Array(64),E=new Array(64),I=new Array(64),D=new Array(65535),O=new Array(65535),P=new Array(64),W=new Array(64),z=[],H=0,Z=7,se=new Array(64),ce=new Array(64),de=new Array(64),Pe=new Array(256),He=new Array(2048),Xe=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],Qe=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],Be=[0,1,2,3,4,5,6,7,8,9,10,11],Je=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],Ae=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],me=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],Te=[0,1,2,3,4,5,6,7,8,9,10,11],Ie=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],ut=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function it(ie,Ee){for(var Le=0,Ve=0,nt=new Array,et=1;et<=16;et++){for(var _t=1;_t<=ie[et];_t++)nt[Ee[Ve]]=[],nt[Ee[Ve]][0]=Le,nt[Ee[Ve]][1]=et,Ve++,Le++;Le*=2}return nt}function ot(ie){for(var Ee=ie[0],Le=ie[1]-1;Le>=0;)Ee&1<<Le&&(H|=1<<Z),Le--,--Z<0&&(H==255?(ke(255),ke(0)):ke(H),Z=7,H=0)}function ke(ie){z.push(ie)}function Ne(ie){ke(ie>>8&255),ke(255&ie)}function yt(ie,Ee,Le,Ve,nt){for(var et,_t=nt[0],St=nt[240],Tt=(function(lr,Gr){var Er,Nr,Dr,Dn,un,pt,fe,pe,ve,qe,We=0;for(ve=0;ve<8;++ve){Er=lr[We],Nr=lr[We+1],Dr=lr[We+2],Dn=lr[We+3],un=lr[We+4],pt=lr[We+5],fe=lr[We+6];var Ct=Er+(pe=lr[We+7]),vt=Er-pe,ct=Nr+fe,bt=Nr-fe,Ht=Dr+pt,Ft=Dr-pt,cr=Dn+un,Jt=Dn-un,fr=Ct+cr,rn=Ct-cr,Tr=ct+Ht,mt=ct-Ht;lr[We]=fr+Tr,lr[We+4]=fr-Tr;var tn=.707106781*(mt+rn);lr[We+2]=rn+tn,lr[We+6]=rn-tn;var Qr=.382683433*((fr=Jt+Ft)-(mt=bt+vt)),gr=.5411961*fr+Qr,$r=1.306562965*mt+Qr,Rn=.707106781*(Tr=Ft+bt),xr=vt+Rn,Tn=vt-Rn;lr[We+5]=Tn+gr,lr[We+3]=Tn-gr,lr[We+1]=xr+$r,lr[We+7]=xr-$r,We+=8}for(We=0,ve=0;ve<8;++ve){Er=lr[We],Nr=lr[We+8],Dr=lr[We+16],Dn=lr[We+24],un=lr[We+32],pt=lr[We+40],fe=lr[We+48];var Bn=Er+(pe=lr[We+56]),xn=Er-pe,Ui=Nr+fe,ai=Nr-fe,Yt=Dr+pt,Zn=Dr-pt,$i=Dn+un,sl=Dn-un,ns=Bn+$i,pr=Bn-$i,nn=Ui+Yt,hn=Ui-Yt;lr[We]=ns+nn,lr[We+32]=ns-nn;var Di=.707106781*(hn+pr);lr[We+16]=pr+Di,lr[We+48]=pr-Di;var El=.382683433*((ns=sl+Zn)-(hn=ai+xn)),ks=.5411961*ns+El,dn=1.306562965*hn+El,ol=.707106781*(nn=Zn+ai),al=xn+ol,ec=xn-ol;lr[We+40]=ec+ks,lr[We+24]=ec-ks,lr[We+8]=al+dn,lr[We+56]=al-dn,We++}for(ve=0;ve<64;++ve)qe=lr[ve]*Gr[ve],P[ve]=qe>0?qe+.5|0:qe-.5|0;return P})(ie,Ee),Gt=0;Gt<64;++Gt)W[Xe[Gt]]=Tt[Gt];var or=W[0]-Le;Le=W[0],or==0?ot(Ve[0]):(ot(Ve[O[et=32767+or]]),ot(D[et]));for(var Ar=63;Ar>0&&W[Ar]==0;)Ar--;if(Ar==0)return ot(_t),Le;for(var _r,je=1;je<=Ar;){for(var mr=je;W[je]==0&&je<=Ar;)++je;var kr=je-mr;if(kr>=16){_r=kr>>4;for(var Vr=1;Vr<=_r;++Vr)ot(St);kr&=15}et=32767+W[je],ot(nt[(kr<<4)+O[et]]),ot(D[et]),je++}return Ar!=63&&ot(_t),Le}function Ce(ie){ie=Math.min(Math.max(ie,1),100),d!=ie&&((function(Ee){for(var Le=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],Ve=0;Ve<64;Ve++){var nt=m((Le[Ve]*Ee+50)/100);nt=Math.min(Math.max(nt,1),255),o[Xe[Ve]]=nt}for(var et=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],_t=0;_t<64;_t++){var St=m((et[_t]*Ee+50)/100);St=Math.min(Math.max(St,1),255),w[Xe[_t]]=St}for(var Tt=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],Gt=0,or=0;or<8;or++)for(var Ar=0;Ar<8;Ar++)E[Gt]=1/(o[Xe[Gt]]*Tt[or]*Tt[Ar]*8),I[Gt]=1/(w[Xe[Gt]]*Tt[or]*Tt[Ar]*8),Gt++})(ie<50?Math.floor(5e3/ie):Math.floor(200-2*ie)),d=ie)}this.encode=function(ie,Ee){Ee&&Ce(Ee),z=new Array,H=0,Z=7,Ne(65496),Ne(65504),Ne(16),ke(74),ke(70),ke(73),ke(70),ke(0),ke(1),ke(1),ke(0),Ne(1),Ne(1),ke(0),ke(0),(function(){Ne(65499),Ne(132),ke(0);for(var Nr=0;Nr<64;Nr++)ke(o[Nr]);ke(1);for(var Dr=0;Dr<64;Dr++)ke(w[Dr])})(),(function(Nr,Dr){Ne(65472),Ne(17),ke(8),Ne(Dr),Ne(Nr),ke(3),ke(1),ke(17),ke(0),ke(2),ke(17),ke(1),ke(3),ke(17),ke(1)})(ie.width,ie.height),(function(){Ne(65476),Ne(418),ke(0);for(var Nr=0;Nr<16;Nr++)ke(Qe[Nr+1]);for(var Dr=0;Dr<=11;Dr++)ke(Be[Dr]);ke(16);for(var Dn=0;Dn<16;Dn++)ke(Je[Dn+1]);for(var un=0;un<=161;un++)ke(Ae[un]);ke(1);for(var pt=0;pt<16;pt++)ke(me[pt+1]);for(var fe=0;fe<=11;fe++)ke(Te[fe]);ke(17);for(var pe=0;pe<16;pe++)ke(Ie[pe+1]);for(var ve=0;ve<=161;ve++)ke(ut[ve])})(),Ne(65498),Ne(12),ke(3),ke(1),ke(0),ke(2),ke(17),ke(3),ke(17),ke(0),ke(63),ke(0);var Le=0,Ve=0,nt=0;H=0,Z=7,this.encode.displayName="_encode_";for(var et,_t,St,Tt,Gt,or,Ar,_r,je,mr=ie.data,kr=ie.width,Vr=ie.height,lr=4*kr,Gr=0;Gr<Vr;){for(et=0;et<lr;){for(Gt=lr*Gr+et,Ar=-1,_r=0,je=0;je<64;je++)or=Gt+(_r=je>>3)*lr+(Ar=4*(7&je)),Gr+_r>=Vr&&(or-=lr*(Gr+1+_r-Vr)),et+Ar>=lr&&(or-=et+Ar-lr+4),_t=mr[or++],St=mr[or++],Tt=mr[or++],se[je]=(He[_t]+He[St+256|0]+He[Tt+512|0]>>16)-128,ce[je]=(He[_t+768|0]+He[St+1024|0]+He[Tt+1280|0]>>16)-128,de[je]=(He[_t+1280|0]+He[St+1536|0]+He[Tt+1792|0]>>16)-128;Le=yt(se,E,Le,r,a),Ve=yt(ce,I,Ve,i,u),nt=yt(de,I,nt,i,u),et+=32}Gr+=8}if(Z>=0){var Er=[];Er[1]=Z+1,Er[0]=(1<<Z+1)-1,ot(Er)}return Ne(65497),new Uint8Array(z)},e=e||50,(function(){for(var ie=String.fromCharCode,Ee=0;Ee<256;Ee++)Pe[Ee]=ie(Ee)})(),r=it(Qe,Be),i=it(me,Te),a=it(Je,Ae),u=it(Ie,ut),(function(){for(var ie=1,Ee=2,Le=1;Le<=15;Le++){for(var Ve=ie;Ve<Ee;Ve++)O[32767+Ve]=Le,D[32767+Ve]=[],D[32767+Ve][1]=Le,D[32767+Ve][0]=Ve;for(var nt=-(Ee-1);nt<=-ie;nt++)O[32767+nt]=Le,D[32767+nt]=[],D[32767+nt][1]=Le,D[32767+nt][0]=Ee-1+nt;ie<<=1,Ee<<=1}})(),(function(){for(var ie=0;ie<256;ie++)He[ie]=19595*ie,He[ie+256|0]=38470*ie,He[ie+512|0]=7471*ie+32768,He[ie+768|0]=-11059*ie,He[ie+1024|0]=-21709*ie,He[ie+1280|0]=32768*ie+8421375,He[ie+1536|0]=-27439*ie,He[ie+1792|0]=-5329*ie})(),Ce(e)}function Eu(e,r){if(this.pos=0,this.buffer=e,this.datav=new DataView(e.buffer),this.is_with_alpha=!!r,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function l5(e){function r(Be){if(!Be)throw Error("assert :P")}function i(Be,Je,Ae){for(var me=0;4>me;me++)if(Be[Je+me]!=Ae.charCodeAt(me))return!0;return!1}function a(Be,Je,Ae,me,Te){for(var Ie=0;Ie<Te;Ie++)Be[Je+Ie]=Ae[me+Ie]}function u(Be,Je,Ae,me){for(var Te=0;Te<me;Te++)Be[Je+Te]=Ae}function d(Be){return new Int32Array(Be)}function m(Be,Je){for(var Ae=[],me=0;me<Be;me++)Ae.push(new Je);return Ae}function o(Be,Je){var Ae=[];return(function me(Te,Ie,ut){for(var it=ut[Ie],ot=0;ot<it&&(Te.push(ut.length>Ie+1?[]:new Je),!(ut.length<Ie+1));ot++)me(Te[ot],Ie+1,ut)})(Ae,0,Be),Ae}var w=function(){var Be=this;function Je(T,R){for(var $=1<<R-1>>>0;T&$;)$>>>=1;return $?(T&$-1)+$:T}function Ae(T,R,$,re,ge){r(!(re%$));do T[R+(re-=$)]=ge;while(0<re)}function me(T,R,$,re,ge){if(r(2328>=ge),512>=ge)var we=d(512);else if((we=d(ge))==null)return 0;return(function(Se,Me,Re,Ke,$e,kt){var Ye,Bt,Pt=Me,Zt=1<<Re,Ut=d(16),qt=d(16);for(r($e!=0),r(Ke!=null),r(Se!=null),r(0<Re),Bt=0;Bt<$e;++Bt){if(15<Ke[Bt])return 0;++Ut[Ke[Bt]]}if(Ut[0]==$e)return 0;for(qt[1]=0,Ye=1;15>Ye;++Ye){if(Ut[Ye]>1<<Ye)return 0;qt[Ye+1]=qt[Ye]+Ut[Ye]}for(Bt=0;Bt<$e;++Bt)Ye=Ke[Bt],0<Ke[Bt]&&(kt[qt[Ye]++]=Bt);if(qt[15]==1)return(Ke=new Te).g=0,Ke.value=kt[0],Ae(Se,Pt,1,Zt,Ke),Zt;var Wt,tr=-1,er=Zt-1,sn=0,zr=1,Cn=1,Zr=1<<Re;for(Bt=0,Ye=1,$e=2;Ye<=Re;++Ye,$e<<=1){if(zr+=Cn<<=1,0>(Cn-=Ut[Ye]))return 0;for(;0<Ut[Ye];--Ut[Ye])(Ke=new Te).g=Ye,Ke.value=kt[Bt++],Ae(Se,Pt+sn,$e,Zr,Ke),sn=Je(sn,Ye)}for(Ye=Re+1,$e=2;15>=Ye;++Ye,$e<<=1){if(zr+=Cn<<=1,0>(Cn-=Ut[Ye]))return 0;for(;0<Ut[Ye];--Ut[Ye]){if(Ke=new Te,(sn&er)!=tr){for(Pt+=Zr,Wt=1<<(tr=Ye)-Re;15>tr&&!(0>=(Wt-=Ut[tr]));)++tr,Wt<<=1;Zt+=Zr=1<<(Wt=tr-Re),Se[Me+(tr=sn&er)].g=Wt+Re,Se[Me+tr].value=Pt-Me-tr}Ke.g=Ye-Re,Ke.value=kt[Bt++],Ae(Se,Pt+(sn>>Re),$e,Zr,Ke),sn=Je(sn,Ye)}}return zr!=2*qt[15]-1?0:Zt})(T,R,$,re,ge,we)}function Te(){this.value=this.g=0}function Ie(){this.value=this.g=0}function ut(){this.G=m(5,Te),this.H=d(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=m(Ws,Ie)}function it(T,R,$,re){r(T!=null),r(R!=null),r(2147483648>re),T.Ca=254,T.I=0,T.b=-8,T.Ka=0,T.oa=R,T.pa=$,T.Jd=R,T.Yc=$+re,T.Zc=4<=re?$+re-4+1:$,_t(T)}function ot(T,R){for(var $=0;0<R--;)$|=Tt(T,128)<<R;return $}function ke(T,R){var $=ot(T,R);return St(T)?-$:$}function Ne(T,R,$,re){var ge,we=0;for(r(T!=null),r(R!=null),r(4294967288>re),T.Sb=re,T.Ra=0,T.u=0,T.h=0,4<re&&(re=4),ge=0;ge<re;++ge)we+=R[$+ge]<<8*ge;T.Ra=we,T.bb=re,T.oa=R,T.pa=$}function yt(T){for(;8<=T.u&&T.bb<T.Sb;)T.Ra>>>=8,T.Ra+=T.oa[T.pa+T.bb]<<ga-8>>>0,++T.bb,T.u-=8;Ve(T)&&(T.h=1,T.u=0)}function Ce(T,R){if(r(0<=R),!T.h&&R<=Co){var $=Le(T)&qo[R];return T.u+=R,yt(T),$}return T.h=1,T.u=0}function ie(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function Ee(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function Le(T){return T.Ra>>>(T.u&ga-1)>>>0}function Ve(T){return r(T.bb<=T.Sb),T.h||T.bb==T.Sb&&T.u>ga}function nt(T,R){T.u=R,T.h=Ve(T)}function et(T){T.u>=fl&&(r(T.u>=fl),yt(T))}function _t(T){r(T!=null&&T.oa!=null),T.pa<T.Zc?(T.I=(T.oa[T.pa++]|T.I<<8)>>>0,T.b+=8):(r(T!=null&&T.oa!=null),T.pa<T.Yc?(T.b+=8,T.I=T.oa[T.pa++]|T.I<<8):T.Ka?T.b=0:(T.I<<=8,T.b+=8,T.Ka=1))}function St(T){return ot(T,1)}function Tt(T,R){var $=T.Ca;0>T.b&&_t(T);var re=T.b,ge=$*R>>>8,we=(T.I>>>re>ge)+0;for(we?($-=ge,T.I-=ge+1<<re>>>0):$=ge+1,re=$,ge=0;256<=re;)ge+=8,re>>=8;return re=7^ge+Ma[re],T.b-=re,T.Ca=($<<re)-1,we}function Gt(T,R,$){T[R+0]=$>>24&255,T[R+1]=$>>16&255,T[R+2]=$>>8&255,T[R+3]=255&$}function or(T,R){return T[R+0]|T[R+1]<<8}function Ar(T,R){return or(T,R)|T[R+2]<<16}function _r(T,R){return or(T,R)|or(T,R+2)<<16}function je(T,R){var $=1<<R;return r(T!=null),r(0<R),T.X=d($),T.X==null?0:(T.Mb=32-R,T.Xa=R,1)}function mr(T,R){r(T!=null),r(R!=null),r(T.Xa==R.Xa),a(R.X,0,T.X,0,1<<R.Xa)}function kr(){this.X=[],this.Xa=this.Mb=0}function Vr(T,R,$,re){r($!=null),r(re!=null);var ge=$[0],we=re[0];return ge==0&&(ge=(T*we+R/2)/R),we==0&&(we=(R*ge+T/2)/T),0>=ge||0>=we?0:($[0]=ge,re[0]=we,1)}function lr(T,R){return T+(1<<R)-1>>>R}function Gr(T,R){return((4278255360&T)+(4278255360&R)>>>0&4278255360)+((16711935&T)+(16711935&R)>>>0&16711935)>>>0}function Er(T,R){Be[R]=function($,re,ge,we,Se,Me,Re){var Ke;for(Ke=0;Ke<Se;++Ke){var $e=Be[T](Me[Re+Ke-1],ge,we+Ke);Me[Re+Ke]=Gr($[re+Ke],$e)}}}function Nr(){this.ud=this.hd=this.jd=0}function Dr(T,R){return((4278124286&(T^R))>>>1)+(T&R)>>>0}function Dn(T){return 0<=T&&256>T?T:0>T?0:255<T?255:void 0}function un(T,R){return Dn(T+(T-R+.5>>1))}function pt(T,R,$){return Math.abs(R-$)-Math.abs(T-$)}function fe(T,R,$,re,ge,we,Se){for(re=we[Se-1],$=0;$<ge;++$)we[Se+$]=re=Gr(T[R+$],re)}function pe(T,R,$,re,ge){var we;for(we=0;we<$;++we){var Se=T[R+we],Me=Se>>8&255,Re=16711935&(Re=(Re=16711935&Se)+((Me<<16)+Me));re[ge+we]=(4278255360&Se)+Re>>>0}}function ve(T,R){R.jd=255&T,R.hd=T>>8&255,R.ud=T>>16&255}function qe(T,R,$,re,ge,we){var Se;for(Se=0;Se<re;++Se){var Me=R[$+Se],Re=Me>>>8,Ke=Me,$e=255&($e=($e=Me>>>16)+((T.jd<<24>>24)*(Re<<24>>24)>>>5));Ke=255&(Ke=(Ke+=(T.hd<<24>>24)*(Re<<24>>24)>>>5)+((T.ud<<24>>24)*($e<<24>>24)>>>5)),ge[we+Se]=(4278255360&Me)+($e<<16)+Ke}}function We(T,R,$,re,ge){Be[R]=function(we,Se,Me,Re,Ke,$e,kt,Ye,Bt){for(Re=kt;Re<Ye;++Re)for(kt=0;kt<Bt;++kt)Ke[$e++]=ge(Me[re(we[Se++])])},Be[T]=function(we,Se,Me,Re,Ke,$e,kt){var Ye=8>>we.b,Bt=we.Ea,Pt=we.K[0],Zt=we.w;if(8>Ye)for(we=(1<<we.b)-1,Zt=(1<<Ye)-1;Se<Me;++Se){var Ut,qt=0;for(Ut=0;Ut<Bt;++Ut)Ut&we||(qt=re(Re[Ke++])),$e[kt++]=ge(Pt[qt&Zt]),qt>>=Ye}else Be["VP8LMapColor"+$](Re,Ke,Pt,Zt,$e,kt,Se,Me,Bt)}}function Ct(T,R,$,re,ge){for($=R+$;R<$;){var we=T[R++];re[ge++]=we>>16&255,re[ge++]=we>>8&255,re[ge++]=255&we}}function vt(T,R,$,re,ge){for($=R+$;R<$;){var we=T[R++];re[ge++]=we>>16&255,re[ge++]=we>>8&255,re[ge++]=255&we,re[ge++]=we>>24&255}}function ct(T,R,$,re,ge){for($=R+$;R<$;){var we=(Se=T[R++])>>16&240|Se>>12&15,Se=240&Se|Se>>28&15;re[ge++]=we,re[ge++]=Se}}function bt(T,R,$,re,ge){for($=R+$;R<$;){var we=(Se=T[R++])>>16&248|Se>>13&7,Se=Se>>5&224|Se>>3&31;re[ge++]=we,re[ge++]=Se}}function Ht(T,R,$,re,ge){for($=R+$;R<$;){var we=T[R++];re[ge++]=255&we,re[ge++]=we>>8&255,re[ge++]=we>>16&255}}function Ft(T,R,$,re,ge,we){if(we==0)for($=R+$;R<$;)Gt(re,((we=T[R++])[0]>>24|we[1]>>8&65280|we[2]<<8&16711680|we[3]<<24)>>>0),ge+=32;else a(re,ge,T,R,$)}function cr(T,R){Be[R][0]=Be[T+"0"],Be[R][1]=Be[T+"1"],Be[R][2]=Be[T+"2"],Be[R][3]=Be[T+"3"],Be[R][4]=Be[T+"4"],Be[R][5]=Be[T+"5"],Be[R][6]=Be[T+"6"],Be[R][7]=Be[T+"7"],Be[R][8]=Be[T+"8"],Be[R][9]=Be[T+"9"],Be[R][10]=Be[T+"10"],Be[R][11]=Be[T+"11"],Be[R][12]=Be[T+"12"],Be[R][13]=Be[T+"13"],Be[R][14]=Be[T+"0"],Be[R][15]=Be[T+"0"]}function Jt(T){return T==RA||T==uc||T==Ql||T==Qc}function fr(){this.eb=[],this.size=this.A=this.fb=0}function rn(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function Tr(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new fr,this.f.kb=new rn,this.sd=null}function mt(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function tn(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function Qr(T){return alert("todo:WebPSamplerProcessPlane"),T.T}function gr(T,R){var $=T.T,re=R.ba.f.RGBA,ge=re.eb,we=re.fb+T.ka*re.A,Se=Zs[R.ba.S],Me=T.y,Re=T.O,Ke=T.f,$e=T.N,kt=T.ea,Ye=T.W,Bt=R.cc,Pt=R.dc,Zt=R.Mc,Ut=R.Nc,qt=T.ka,Wt=T.ka+T.T,tr=T.U,er=tr+1>>1;for(qt==0?Se(Me,Re,null,null,Ke,$e,kt,Ye,Ke,$e,kt,Ye,ge,we,null,null,tr):(Se(R.ec,R.fc,Me,Re,Bt,Pt,Zt,Ut,Ke,$e,kt,Ye,ge,we-re.A,ge,we,tr),++$);qt+2<Wt;qt+=2)Bt=Ke,Pt=$e,Zt=kt,Ut=Ye,$e+=T.Rc,Ye+=T.Rc,we+=2*re.A,Se(Me,(Re+=2*T.fa)-T.fa,Me,Re,Bt,Pt,Zt,Ut,Ke,$e,kt,Ye,ge,we-re.A,ge,we,tr);return Re+=T.fa,T.j+Wt<T.o?(a(R.ec,R.fc,Me,Re,tr),a(R.cc,R.dc,Ke,$e,er),a(R.Mc,R.Nc,kt,Ye,er),$--):1&Wt||Se(Me,Re,null,null,Ke,$e,kt,Ye,Ke,$e,kt,Ye,ge,we+re.A,null,null,tr),$}function $r(T,R,$){var re=T.F,ge=[T.J];if(re!=null){var we=T.U,Se=R.ba.S,Me=Se==lu||Se==Ql;R=R.ba.f.RGBA;var Re=[0],Ke=T.ka;Re[0]=T.T,T.Kb&&(Ke==0?--Re[0]:(--Ke,ge[0]-=T.width),T.j+T.ka+T.T==T.o&&(Re[0]=T.o-T.j-Ke));var $e=R.eb;Ke=R.fb+Ke*R.A,T=yl(re,ge[0],T.width,we,Re,$e,Ke+(Me?0:3),R.A),r($==Re),T&&Jt(Se)&&Dc($e,Ke,Me,we,Re,R.A)}return 0}function Rn(T){var R=T.ma,$=R.ba.S,re=11>$,ge=$==Nc||$==Ac||$==lu||$==Ii||$==12||Jt($);if(R.memory=null,R.Ib=null,R.Jb=null,R.Nd=null,!oA(R.Oa,T,ge?11:12))return 0;if(ge&&Jt($)&&Ta(),T.da)alert("todo:use_scaling");else{if(re){if(R.Ib=Qr,T.Kb){if($=T.U+1>>1,R.memory=d(T.U+2*$),R.memory==null)return 0;R.ec=R.memory,R.fc=0,R.cc=R.ec,R.dc=R.fc+T.U,R.Mc=R.cc,R.Nc=R.dc+$,R.Ib=gr,Ta()}}else alert("todo:EmitYUV");ge&&(R.Jb=$r,re&&fa())}if(re&&!Ns){for(T=0;256>T;++T)Xs[T]=89858*(T-128)+Qa>>Ol,go[T]=-22014*(T-128)+Qa,Vc[T]=-45773*(T-128),jc[T]=113618*(T-128)+Qa>>Ol;for(T=li;T<Xn;++T)R=76283*(T-16)+Qa>>Ol,du[T-li]=fs(R,255),Ou[T-li]=fs(R+8>>4,15);Ns=1}return 1}function xr(T){var R=T.ma,$=T.U,re=T.T;return r(!(1&T.ka)),0>=$||0>=re?0:($=R.Ib(T,R),R.Jb!=null&&R.Jb(T,R,$),R.Dc+=$,1)}function Tn(T){T.ma.memory=null}function Bn(T,R,$,re){return Ce(T,8)!=47?0:(R[0]=Ce(T,14)+1,$[0]=Ce(T,14)+1,re[0]=Ce(T,1),Ce(T,3)!=0?0:!T.h)}function xn(T,R){if(4>T)return T+1;var $=T-2>>1;return(2+(1&T)<<$)+Ce(R,$)+1}function Ui(T,R){return 120<R?R-120:1<=($=(($=uA[R-1])>>4)*T+(8-(15&$)))?$:1;var $}function ai(T,R,$){var re=Le($),ge=T[R+=255&re].g-8;return 0<ge&&(nt($,$.u+8),re=Le($),R+=T[R].value,R+=re&(1<<ge)-1),nt($,$.u+T[R].g),T[R].value}function Yt(T,R,$){return $.g+=T.g,$.value+=T.value<<R>>>0,r(8>=$.g),T.g}function Zn(T,R,$){var re=T.xc;return r((R=re==0?0:T.vc[T.md*($>>re)+(R>>re)])<T.Wb),T.Ya[R]}function $i(T,R,$,re){var ge=T.ab,we=T.c*R,Se=T.C;R=Se+R;var Me=$,Re=re;for(re=T.Ta,$=T.Ua;0<ge--;){var Ke=T.gc[ge],$e=Se,kt=R,Ye=Me,Bt=Re,Pt=(Re=re,Me=$,Ke.Ea);switch(r($e<kt),r(kt<=Ke.nc),Ke.hc){case 2:ss(Ye,Bt,(kt-$e)*Pt,Re,Me);break;case 0:var Zt=$e,Ut=kt,qt=Re,Wt=Me,tr=(Zr=Ke).Ea;Zt==0&&(oc(Ye,Bt,null,null,1,qt,Wt),fe(Ye,Bt+1,0,0,tr-1,qt,Wt+1),Bt+=tr,Wt+=tr,++Zt);for(var er=1<<Zr.b,sn=er-1,zr=lr(tr,Zr.b),Cn=Zr.K,Zr=Zr.w+(Zt>>Zr.b)*zr;Zt<Ut;){var On=Cn,Ri=Zr,Sn=1;for(kl(Ye,Bt,qt,Wt-tr,1,qt,Wt);Sn<tr;){var Hr=(Sn&~sn)+er;Hr>tr&&(Hr=tr),(0,Ul[On[Ri++]>>8&15])(Ye,Bt+ +Sn,qt,Wt+Sn-tr,Hr-Sn,qt,Wt+Sn),Sn=Hr}Bt+=tr,Wt+=tr,++Zt&sn||(Zr+=zr)}kt!=Ke.nc&&a(Re,Me-Pt,Re,Me+(kt-$e-1)*Pt,Pt);break;case 1:for(Pt=Ye,Ut=Bt,tr=(Ye=Ke.Ea)-(Wt=Ye&~(qt=(Bt=1<<Ke.b)-1)),Zt=lr(Ye,Ke.b),er=Ke.K,Ke=Ke.w+($e>>Ke.b)*Zt;$e<kt;){for(sn=er,zr=Ke,Cn=new Nr,Zr=Ut+Wt,On=Ut+Ye;Ut<Zr;)ve(sn[zr++],Cn),ho(Cn,Pt,Ut,Bt,Re,Me),Ut+=Bt,Me+=Bt;Ut<On&&(ve(sn[zr++],Cn),ho(Cn,Pt,Ut,tr,Re,Me),Ut+=tr,Me+=tr),++$e&qt||(Ke+=Zt)}break;case 3:if(Ye==Re&&Bt==Me&&0<Ke.b){for(Ut=Re,Ye=Pt=Me+(kt-$e)*Pt-(Wt=(kt-$e)*lr(Ke.Ea,Ke.b)),Bt=Re,qt=Me,Zt=[],Wt=(tr=Wt)-1;0<=Wt;--Wt)Zt[Wt]=Bt[qt+Wt];for(Wt=tr-1;0<=Wt;--Wt)Ut[Ye+Wt]=Zt[Wt];pl(Ke,$e,kt,Re,Pt,Re,Me)}else pl(Ke,$e,kt,Ye,Bt,Re,Me)}Me=re,Re=$}Re!=$&&a(re,$,Me,Re,we)}function sl(T,R){var $=T.V,re=T.Ba+T.c*T.C,ge=R-T.C;if(r(R<=T.l.o),r(16>=ge),0<ge){var we=T.l,Se=T.Ta,Me=T.Ua,Re=we.width;if($i(T,ge,$,re),ge=Me=[Me],r(($=T.C)<(re=R)),r(we.v<we.va),re>we.o&&(re=we.o),$<we.j){var Ke=we.j-$;$=we.j,ge[0]+=Ke*Re}if($>=re?$=0:(ge[0]+=4*we.v,we.ka=$-we.j,we.U=we.va-we.v,we.T=re-$,$=1),$){if(Me=Me[0],11>($=T.ca).S){var $e=$.f.RGBA,kt=(re=$.S,ge=we.U,we=we.T,Ke=$e.eb,$e.A),Ye=we;for($e=$e.fb+T.Ma*$e.A;0<Ye--;){var Bt=Se,Pt=Me,Zt=ge,Ut=Ke,qt=$e;switch(re){case AA:ac(Bt,Pt,Zt,Ut,qt);break;case Nc:gl(Bt,Pt,Zt,Ut,qt);break;case RA:gl(Bt,Pt,Zt,Ut,qt),Dc(Ut,qt,0,Zt,1,0);break;case ch:Nl(Bt,Pt,Zt,Ut,qt);break;case Ac:Ft(Bt,Pt,Zt,Ut,qt,1);break;case uc:Ft(Bt,Pt,Zt,Ut,qt,1),Dc(Ut,qt,0,Zt,1,0);break;case lu:Ft(Bt,Pt,Zt,Ut,qt,0);break;case Ql:Ft(Bt,Pt,Zt,Ut,qt,0),Dc(Ut,qt,1,Zt,1,0);break;case Ii:Dl(Bt,Pt,Zt,Ut,qt);break;case Qc:Dl(Bt,Pt,Zt,Ut,qt),au(Ut,qt,Zt,1,0);break;case cu:Rl(Bt,Pt,Zt,Ut,qt);break;default:r(0)}Me+=Re,$e+=kt}T.Ma+=we}else alert("todo:EmitRescaledRowsYUVA");r(T.Ma<=$.height)}}T.C=R,r(T.C<=T.i)}function ns(T){var R;if(0<T.ua)return 0;for(R=0;R<T.Wb;++R){var $=T.Ya[R].G,re=T.Ya[R].H;if(0<$[1][re[1]+0].g||0<$[2][re[2]+0].g||0<$[3][re[3]+0].g)return 0}return 1}function pr(T,R,$,re,ge,we){if(T.Z!=0){var Se=T.qd,Me=T.rd;for(r(Rs[T.Z]!=null);R<$;++R)Rs[T.Z](Se,Me,re,ge,re,ge,we),Se=re,Me=ge,ge+=we;T.qd=Se,T.rd=Me}}function nn(T,R){var $=T.l.ma,re=$.Z==0||$.Z==1?T.l.j:T.C;if(re=T.C<re?re:T.C,r(R<=T.l.o),R>re){var ge=T.l.width,we=$.ca,Se=$.tb+ge*re,Me=T.V,Re=T.Ba+T.c*re,Ke=T.gc;r(T.ab==1),r(Ke[0].hc==3),ya(Ke[0],re,R,Me,Re,we,Se),pr($,re,R,we,Se,ge)}T.C=T.Ma=R}function hn(T,R,$,re,ge,we,Se){var Me=T.$/re,Re=T.$%re,Ke=T.m,$e=T.s,kt=$+T.$,Ye=kt;ge=$+re*ge;var Bt=$+re*we,Pt=280+$e.ua,Zt=T.Pb?Me:16777216,Ut=0<$e.ua?$e.Wa:null,qt=$e.wc,Wt=kt<Bt?Zn($e,Re,Me):null;r(T.C<we),r(Bt<=ge);var tr=!1;e:for(;;){for(;tr||kt<Bt;){var er=0;if(Me>=Zt){var sn=kt-$;r((Zt=T).Pb),Zt.wd=Zt.m,Zt.xd=sn,0<Zt.s.ua&&mr(Zt.s.Wa,Zt.s.vb),Zt=Me+QA}if(Re&qt||(Wt=Zn($e,Re,Me)),r(Wt!=null),Wt.Qb&&(R[kt]=Wt.qb,tr=!0),!tr)if(et(Ke),Wt.jc){er=Ke,sn=R;var zr=kt,Cn=Wt.pd[Le(er)&Ws-1];r(Wt.jc),256>Cn.g?(nt(er,er.u+Cn.g),sn[zr]=Cn.value,er=0):(nt(er,er.u+Cn.g-256),r(256<=Cn.value),er=Cn.value),er==0&&(tr=!0)}else er=ai(Wt.G[0],Wt.H[0],Ke);if(Ke.h)break;if(tr||256>er){if(!tr)if(Wt.nd)R[kt]=(Wt.qb|er<<8)>>>0;else{if(et(Ke),tr=ai(Wt.G[1],Wt.H[1],Ke),et(Ke),sn=ai(Wt.G[2],Wt.H[2],Ke),zr=ai(Wt.G[3],Wt.H[3],Ke),Ke.h)break;R[kt]=(zr<<24|tr<<16|er<<8|sn)>>>0}if(tr=!1,++kt,++Re>=re&&(Re=0,++Me,Se!=null&&Me<=we&&!(Me%16)&&Se(T,Me),Ut!=null))for(;Ye<kt;)er=R[Ye++],Ut.X[(506832829*er&4294967295)>>>Ut.Mb]=er}else if(280>er){if(er=xn(er-256,Ke),sn=ai(Wt.G[4],Wt.H[4],Ke),et(Ke),sn=Ui(re,sn=xn(sn,Ke)),Ke.h)break;if(kt-$<sn||ge-kt<er)break e;for(zr=0;zr<er;++zr)R[kt+zr]=R[kt+zr-sn];for(kt+=er,Re+=er;Re>=re;)Re-=re,++Me,Se!=null&&Me<=we&&!(Me%16)&&Se(T,Me);if(r(kt<=ge),Re&qt&&(Wt=Zn($e,Re,Me)),Ut!=null)for(;Ye<kt;)er=R[Ye++],Ut.X[(506832829*er&4294967295)>>>Ut.Mb]=er}else{if(!(er<Pt))break e;for(tr=er-280,r(Ut!=null);Ye<kt;)er=R[Ye++],Ut.X[(506832829*er&4294967295)>>>Ut.Mb]=er;er=kt,r(!(tr>>>(sn=Ut).Xa)),R[er]=sn.X[tr],tr=!0}tr||r(Ke.h==Ve(Ke))}if(T.Pb&&Ke.h&&kt<ge)r(T.m.h),T.a=5,T.m=T.wd,T.$=T.xd,0<T.s.ua&&mr(T.s.vb,T.s.Wa);else{if(Ke.h)break e;Se?.(T,Me>we?we:Me),T.a=0,T.$=kt-$}return 1}return T.a=3,0}function Di(T){r(T!=null),T.vc=null,T.yc=null,T.Ya=null;var R=T.Wa;R!=null&&(R.X=null),T.vb=null,r(T!=null)}function El(){var T=new gn;return T==null?null:(T.a=0,T.xb=co,cr("Predictor","VP8LPredictors"),cr("Predictor","VP8LPredictors_C"),cr("PredictorAdd","VP8LPredictorsAdd"),cr("PredictorAdd","VP8LPredictorsAdd_C"),ss=pe,ho=qe,ac=Ct,gl=vt,Dl=ct,Rl=bt,Nl=Ht,Be.VP8LMapColor32b=ml,Be.VP8LMapColor8b=Pc,T)}function ks(T,R,$,re,ge){var we=1,Se=[T],Me=[R],Re=re.m,Ke=re.s,$e=null,kt=0;e:for(;;){if($)for(;we&&Ce(Re,1);){var Ye=Se,Bt=Me,Pt=re,Zt=1,Ut=Pt.m,qt=Pt.gc[Pt.ab],Wt=Ce(Ut,2);if(Pt.Oc&1<<Wt)we=0;else{switch(Pt.Oc|=1<<Wt,qt.hc=Wt,qt.Ea=Ye[0],qt.nc=Bt[0],qt.K=[null],++Pt.ab,r(4>=Pt.ab),Wt){case 0:case 1:qt.b=Ce(Ut,3)+2,Zt=ks(lr(qt.Ea,qt.b),lr(qt.nc,qt.b),0,Pt,qt.K),qt.K=qt.K[0];break;case 3:var tr,er=Ce(Ut,8)+1,sn=16<er?0:4<er?1:2<er?2:3;if(Ye[0]=lr(qt.Ea,sn),qt.b=sn,tr=Zt=ks(er,1,0,Pt,qt.K)){var zr,Cn=er,Zr=qt,On=1<<(8>>Zr.b),Ri=d(On);if(Ri==null)tr=0;else{var Sn=Zr.K[0],Hr=Zr.w;for(Ri[0]=Zr.K[0][0],zr=1;zr<1*Cn;++zr)Ri[zr]=Gr(Sn[Hr+zr],Ri[zr-1]);for(;zr<4*On;++zr)Ri[zr]=0;Zr.K[0]=null,Zr.K[0]=Ri,tr=1}}Zt=tr;break;case 2:break;default:r(0)}we=Zt}}if(Se=Se[0],Me=Me[0],we&&Ce(Re,1)&&!(we=1<=(kt=Ce(Re,4))&&11>=kt)){re.a=3;break e}var Fr;if(Fr=we)t:{var pi,Mr,zn,mi=re,as=Se,ls=Me,Ni=kt,Bs=$,Cs=mi.m,Qi=mi.s,Fn=[null],Yn=1,yr=0,br=zc[Ni];r:for(;;){if(Bs&&Ce(Cs,1)){var Ti=Ce(Cs,3)+2,ji=lr(as,Ti),ei=lr(ls,Ti),ci=ji*ei;if(!ks(ji,ei,0,mi,Fn))break r;for(Fn=Fn[0],Qi.xc=Ti,pi=0;pi<ci;++pi){var Nn=Fn[pi]>>8&65535;Fn[pi]=Nn,Nn>=Yn&&(Yn=Nn+1)}}if(Cs.h)break r;for(Mr=0;5>Mr;++Mr){var wi=hc[Mr];!Mr&&0<Ni&&(wi+=1<<Ni),yr<wi&&(yr=wi)}var Es=m(Yn*br,Te),Ys=Yn,Fo=m(Ys,ut);if(Fo==null)var Mi=null;else r(65536>=Ys),Mi=Fo;var In=d(yr);if(Mi==null||In==null||Es==null){mi.a=1;break r}var Vn=Es;for(pi=zn=0;pi<Yn;++pi){var xi=Mi[pi],Ss=xi.G,Io=xi.H,Js=0,Fs=1,Ji=0;for(Mr=0;5>Mr;++Mr){wi=hc[Mr],Ss[Mr]=Vn,Io[Mr]=zn,!Mr&&0<Ni&&(wi+=1<<Ni);i:{var za,Ha=wi,Gc=mi,ja=In,Hl=Vn,VA=zn,gi=0,Wo=Gc.m,pA=Ce(Wo,1);if(u(ja,0,0,Ha),pA){var fu=Ce(Wo,1)+1,jl=Ce(Wo,1),Vl=Ce(Wo,jl==0?1:8);ja[Vl]=1,fu==2&&(ja[Vl=Ce(Wo,8)]=1);var Va=1}else{var bi=d(19),ki=Ce(Wo,4)+4;if(19<ki){Gc.a=3;var es=0;break i}for(za=0;za<ki;++za)bi[Du[za]]=Ce(Wo,3);var Kc=void 0,Ga=void 0,qc=Gc,x=bi,n=Ha,c=ja,f=0,y=qc.m,b=8,S=m(128,Te);n:for(;me(S,0,7,x,19);){if(Ce(y,1)){var M=2+2*Ce(y,3);if((Kc=2+Ce(y,M))>n)break n}else Kc=n;for(Ga=0;Ga<n&&Kc--;){et(y);var N=S[0+(127&Le(y))];nt(y,y.u+N.g);var j=N.value;if(16>j)c[Ga++]=j,j!=0&&(b=j);else{var q=j==16,ne=j-16,te=NA[ne],ue=Ce(y,Oc[ne])+te;if(Ga+ue>n)break n;for(var _e=q?b:0;0<ue--;)c[Ga++]=_e}}f=1;break n}f||(qc.a=3),Va=f}(Va=Va&&!Wo.h)&&(gi=me(Hl,VA,8,ja,Ha)),Va&&gi!=0?es=gi:(Gc.a=3,es=0)}if(es==0)break r;if(Fs&&Au[Mr]==1&&(Fs=Vn[zn].g==0),Js+=Vn[zn].g,zn+=es,3>=Mr){var De,ze=In[0];for(De=1;De<wi;++De)In[De]>ze&&(ze=In[De]);Ji+=ze}}if(xi.nd=Fs,xi.Qb=0,Fs&&(xi.qb=(Ss[3][Io[3]+0].value<<24|Ss[1][Io[1]+0].value<<16|Ss[2][Io[2]+0].value)>>>0,Js==0&&256>Ss[0][Io[0]+0].value&&(xi.Qb=1,xi.qb+=Ss[0][Io[0]+0].value<<8)),xi.jc=!xi.Qb&&6>Ji,xi.jc){var Oe,Ge=xi;for(Oe=0;Oe<Ws;++Oe){var lt=Oe,Ze=Ge.pd[lt],At=Ge.G[0][Ge.H[0]+lt];256<=At.value?(Ze.g=At.g+256,Ze.value=At.value):(Ze.g=0,Ze.value=0,lt>>=Yt(At,8,Ze),lt>>=Yt(Ge.G[1][Ge.H[1]+lt],16,Ze),lt>>=Yt(Ge.G[2][Ge.H[2]+lt],0,Ze),Yt(Ge.G[3][Ge.H[3]+lt],24,Ze))}}}Qi.vc=Fn,Qi.Wb=Yn,Qi.Ya=Mi,Qi.yc=Es,Fr=1;break t}Fr=0}if(!(we=Fr)){re.a=3;break e}if(0<kt){if(Ke.ua=1<<kt,!je(Ke.Wa,kt)){re.a=1,we=0;break e}}else Ke.ua=0;var ft=re,st=Se,wt=Me,Dt=ft.s,Lt=Dt.xc;if(ft.c=st,ft.i=wt,Dt.md=lr(st,Lt),Dt.wc=Lt==0?-1:(1<<Lt)-1,$){re.xb=mo;break e}if(($e=d(Se*Me))==null){re.a=1,we=0;break e}we=(we=hn(re,$e,0,Se,Me,Me,null))&&!Re.h;break e}return we?(ge!=null?ge[0]=$e:(r($e==null),r($)),re.$=0,$||Di(Ke)):Di(Ke),we}function dn(T,R){var $=T.c*T.i,re=$+R+16*R;return r(T.c<=R),T.V=d(re),T.V==null?(T.Ta=null,T.Ua=0,T.a=1,0):(T.Ta=T.V,T.Ua=T.Ba+$+R,1)}function ol(T,R){var $=T.C,re=R-$,ge=T.V,we=T.Ba+T.c*$;for(r(R<=T.l.o);0<re;){var Se=16<re?16:re,Me=T.l.ma,Re=T.l.width,Ke=Re*Se,$e=Me.ca,kt=Me.tb+Re*$,Ye=T.Ta,Bt=T.Ua;$i(T,Se,ge,we),kA(Ye,Bt,$e,kt,Ke),pr(Me,$,$+Se,$e,kt,Re),re-=Se,ge+=Se*T.c,$+=Se}r($==R),T.C=T.Ma=R}function al(){this.ub=this.yd=this.td=this.Rb=0}function ec(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function Ec(){this.Fb=this.Bb=this.Cb=0,this.Zb=d(4),this.Lb=d(4)}function fi(){this.Yb=(function(){var T=[];return(function R($,re,ge){for(var we=ge[re],Se=0;Se<we&&($.push(ge.length>re+1?[]:0),!(ge.length<re+1));Se++)R($[Se],re+1,ge)})(T,0,[3,11]),T})()}function tc(){this.jb=d(3),this.Wc=o([4,8],fi),this.Xc=o([4,17],fi)}function Sl(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new d(4),this.od=new d(4)}function Ci(){this.ld=this.La=this.dd=this.tc=0}function jn(){this.Na=this.la=0}function rA(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function ll(){this.ad=d(384),this.Za=0,this.Ob=d(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function cl(){this.uc=this.M=this.Nb=0,this.wa=Array(new Ci),this.Y=0,this.ya=Array(new ll),this.aa=0,this.l=new Ba}function Us(){this.y=d(16),this.f=d(8),this.ea=d(8)}function Ro(){this.cb=this.a=0,this.sc="",this.m=new ie,this.Od=new al,this.Kc=new ec,this.ed=new Sl,this.Qa=new Ec,this.Ic=this.$c=this.Aa=0,this.D=new cl,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=m(8,ie),this.ia=0,this.pb=m(4,rA),this.Pa=new tc,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new Us),this.Hd=0,this.rb=Array(new jn),this.sb=0,this.wa=Array(new Ci),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new ll),this.L=this.aa=0,this.gd=o([4,2],Ci),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function fs(T,R){return 0>T?0:T>R?R:T}function Ba(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function IA(){var T=new Ro;return T!=null&&(T.a=0,T.sc="OK",T.cb=0,T.Xb=0,hA||(hA=Qo)),T}function Mn(T,R,$){return T.a==0&&(T.a=R,T.sc=$,T.cb=0),0}function Sc(T,R,$){return 3<=$&&T[R+0]==157&&T[R+1]==1&&T[R+2]==42}function No(T,R){if(T==null)return 0;if(T.a=0,T.sc="OK",R==null)return Mn(T,2,"null VP8Io passed to VP8GetHeaders()");var $=R.data,re=R.w,ge=R.ha;if(4>ge)return Mn(T,7,"Truncated header.");var we=$[re+0]|$[re+1]<<8|$[re+2]<<16,Se=T.Od;if(Se.Rb=!(1&we),Se.td=we>>1&7,Se.yd=we>>4&1,Se.ub=we>>5,3<Se.td)return Mn(T,3,"Incorrect keyframe parameters.");if(!Se.yd)return Mn(T,4,"Frame not displayable.");re+=3,ge-=3;var Me=T.Kc;if(Se.Rb){if(7>ge)return Mn(T,7,"cannot parse picture header");if(!Sc($,re,ge))return Mn(T,3,"Bad code word");Me.c=16383&($[re+4]<<8|$[re+3]),Me.Td=$[re+4]>>6,Me.i=16383&($[re+6]<<8|$[re+5]),Me.Ud=$[re+6]>>6,re+=7,ge-=7,T.za=Me.c+15>>4,T.Ub=Me.i+15>>4,R.width=Me.c,R.height=Me.i,R.Da=0,R.j=0,R.v=0,R.va=R.width,R.o=R.height,R.da=0,R.ib=R.width,R.hb=R.height,R.U=R.width,R.T=R.height,u((we=T.Pa).jb,0,255,we.jb.length),r((we=T.Qa)!=null),we.Cb=0,we.Bb=0,we.Fb=1,u(we.Zb,0,0,we.Zb.length),u(we.Lb,0,0,we.Lb)}if(Se.ub>ge)return Mn(T,7,"bad partition length");it(we=T.m,$,re,Se.ub),re+=Se.ub,ge-=Se.ub,Se.Rb&&(Me.Ld=St(we),Me.Kd=St(we)),Me=T.Qa;var Re,Ke=T.Pa;if(r(we!=null),r(Me!=null),Me.Cb=St(we),Me.Cb){if(Me.Bb=St(we),St(we)){for(Me.Fb=St(we),Re=0;4>Re;++Re)Me.Zb[Re]=St(we)?ke(we,7):0;for(Re=0;4>Re;++Re)Me.Lb[Re]=St(we)?ke(we,6):0}if(Me.Bb)for(Re=0;3>Re;++Re)Ke.jb[Re]=St(we)?ot(we,8):255}else Me.Bb=0;if(we.Ka)return Mn(T,3,"cannot parse segment header");if((Me=T.ed).zd=St(we),Me.Tb=ot(we,6),Me.wb=ot(we,3),Me.Pc=St(we),Me.Pc&&St(we)){for(Ke=0;4>Ke;++Ke)St(we)&&(Me.vd[Ke]=ke(we,6));for(Ke=0;4>Ke;++Ke)St(we)&&(Me.od[Ke]=ke(we,6))}if(T.L=Me.Tb==0?0:Me.zd?1:2,we.Ka)return Mn(T,3,"cannot parse filter header");var $e=ge;if(ge=Re=re,re=Re+$e,Me=$e,T.Xb=(1<<ot(T.m,2))-1,$e<3*(Ke=T.Xb))$=7;else{for(Re+=3*Ke,Me-=3*Ke,$e=0;$e<Ke;++$e){var kt=$[ge+0]|$[ge+1]<<8|$[ge+2]<<16;kt>Me&&(kt=Me),it(T.Jc[+$e],$,Re,kt),Re+=kt,Me-=kt,ge+=3}it(T.Jc[+Ke],$,Re,Me),$=Re<re?0:5}if($!=0)return Mn(T,$,"cannot parse partitions");for($=ot(Re=T.m,7),ge=St(Re)?ke(Re,4):0,re=St(Re)?ke(Re,4):0,Me=St(Re)?ke(Re,4):0,Ke=St(Re)?ke(Re,4):0,Re=St(Re)?ke(Re,4):0,$e=T.Qa,kt=0;4>kt;++kt){if($e.Cb){var Ye=$e.Zb[kt];$e.Fb||(Ye+=$)}else{if(0<kt){T.pb[kt]=T.pb[0];continue}Ye=$}var Bt=T.pb[kt];Bt.Sc[0]=OA[fs(Ye+ge,127)],Bt.Sc[1]=dc[fs(Ye+0,127)],Bt.Eb[0]=2*OA[fs(Ye+re,127)],Bt.Eb[1]=101581*dc[fs(Ye+Me,127)]>>16,8>Bt.Eb[1]&&(Bt.Eb[1]=8),Bt.Qc[0]=OA[fs(Ye+Ke,117)],Bt.Qc[1]=dc[fs(Ye+Re,127)],Bt.lc=Ye+Re}if(!Se.Rb)return Mn(T,4,"Not a key frame.");for(St(we),Se=T.Pa,$=0;4>$;++$){for(ge=0;8>ge;++ge)for(re=0;3>re;++re)for(Me=0;11>Me;++Me)Ke=Tt(we,hu[$][ge][re][Me])?ot(we,8):Ah[$][ge][re][Me],Se.Wc[$][ge].Yb[re][Me]=Ke;for(ge=0;17>ge;++ge)Se.Xc[$][ge]=Se.Wc[$][zA[ge]]}return T.kc=St(we),T.kc&&(T.Bd=ot(we,8)),T.cb=1}function Qo(T,R,$,re,ge,we,Se){var Me=R[ge].Yb[$];for($=0;16>ge;++ge){if(!Tt(T,Me[$+0]))return ge;for(;!Tt(T,Me[$+1]);)if(Me=R[++ge].Yb[0],$=0,ge==16)return 16;var Re=R[ge+1].Yb;if(Tt(T,Me[$+2])){var Ke=T,$e=0;if(Tt(Ke,(Ye=Me)[(kt=$)+3]))if(Tt(Ke,Ye[kt+6])){for(Me=0,kt=2*($e=Tt(Ke,Ye[kt+8]))+(Ye=Tt(Ke,Ye[kt+9+$e])),$e=0,Ye=Ru[kt];Ye[Me];++Me)$e+=$e+Tt(Ke,Ye[Me]);$e+=3+(8<<kt)}else Tt(Ke,Ye[kt+7])?($e=7+2*Tt(Ke,165),$e+=Tt(Ke,145)):$e=5+Tt(Ke,159);else $e=Tt(Ke,Ye[kt+4])?3+Tt(Ke,Ye[kt+5]):2;Me=Re[2]}else $e=1,Me=Re[1];Re=Se+dA[ge],0>(Ke=T).b&&_t(Ke);var kt,Ye=Ke.b,Bt=(kt=Ke.Ca>>1)-(Ke.I>>Ye)>>31;--Ke.b,Ke.Ca+=Bt,Ke.Ca|=1,Ke.I-=(kt+1&Bt)<<Ye,we[Re]=(($e^Bt)-Bt)*re[(0<ge)+0]}return 16}function Fc(T){var R=T.rb[T.sb-1];R.la=0,R.Na=0,u(T.zc,0,0,T.zc.length),T.ja=0}function la(T,R,$,re,ge){ge=T[R+$+32*re]+(ge>>3),T[R+$+32*re]=-256&ge?0>ge?0:255:ge}function ys(T,R,$,re,ge,we){la(T,R,0,$,re+ge),la(T,R,1,$,re+we),la(T,R,2,$,re-we),la(T,R,3,$,re-ge)}function Oo(T){return(20091*T>>16)+T}function nA(T,R,$,re){var ge,we=0,Se=d(16);for(ge=0;4>ge;++ge){var Me=T[R+0]+T[R+8],Re=T[R+0]-T[R+8],Ke=(35468*T[R+4]>>16)-Oo(T[R+12]),$e=Oo(T[R+4])+(35468*T[R+12]>>16);Se[we+0]=Me+$e,Se[we+1]=Re+Ke,Se[we+2]=Re-Ke,Se[we+3]=Me-$e,we+=4,R++}for(ge=we=0;4>ge;++ge)Me=(T=Se[we+0]+4)+Se[we+8],Re=T-Se[we+8],Ke=(35468*Se[we+4]>>16)-Oo(Se[we+12]),la($,re,0,0,Me+($e=Oo(Se[we+4])+(35468*Se[we+12]>>16))),la($,re,1,0,Re+Ke),la($,re,2,0,Re-Ke),la($,re,3,0,Me-$e),we++,re+=32}function iA(T,R,$,re){var ge=T[R+0]+4,we=35468*T[R+4]>>16,Se=Oo(T[R+4]),Me=35468*T[R+1]>>16;ys($,re,0,ge+Se,T=Oo(T[R+1]),Me),ys($,re,1,ge+we,T,Me),ys($,re,2,ge-we,T,Me),ys($,re,3,ge-Se,T,Me)}function rc(T,R,$,re,ge){nA(T,R,$,re),ge&&nA(T,R+16,$,re+4)}function Ca(T,R,$,re){lc(T,R+0,$,re,1),lc(T,R+32,$,re+128,1)}function TA(T,R,$,re){var ge;for(T=T[R+0]+4,ge=0;4>ge;++ge)for(R=0;4>R;++R)la($,re,R,ge,T)}function Kn(T,R,$,re){T[R+0]&&si(T,R+0,$,re),T[R+16]&&si(T,R+16,$,re+4),T[R+32]&&si(T,R+32,$,re+128),T[R+48]&&si(T,R+48,$,re+128+4)}function Fl(T,R,$,re){var ge,we=d(16);for(ge=0;4>ge;++ge){var Se=T[R+0+ge]+T[R+12+ge],Me=T[R+4+ge]+T[R+8+ge],Re=T[R+4+ge]-T[R+8+ge],Ke=T[R+0+ge]-T[R+12+ge];we[0+ge]=Se+Me,we[8+ge]=Se-Me,we[4+ge]=Ke+Re,we[12+ge]=Ke-Re}for(ge=0;4>ge;++ge)Se=(T=we[0+4*ge]+3)+we[3+4*ge],Me=we[1+4*ge]+we[2+4*ge],Re=we[1+4*ge]-we[2+4*ge],Ke=T-we[3+4*ge],$[re+0]=Se+Me>>3,$[re+16]=Ke+Re>>3,$[re+32]=Se-Me>>3,$[re+48]=Ke-Re>>3,re+=64}function nc(T,R,$){var re,ge=R-32,we=lo,Se=255-T[ge-1];for(re=0;re<$;++re){var Me,Re=we,Ke=Se+T[R-1];for(Me=0;Me<$;++Me)T[R+Me]=Re[Ke+T[ge+Me]];R+=32}}function Il(T,R){nc(T,R,4)}function PA(T,R){nc(T,R,8)}function Ic(T,R){nc(T,R,16)}function ca(T,R){var $;for($=0;16>$;++$)a(T,R+32*$,T,R-32,16)}function Al(T,R){var $;for($=16;0<$;--$)u(T,R,T[R-1],16),R+=32}function an(T,R,$){var re;for(re=0;16>re;++re)u(R,$+32*re,T,16)}function Ea(T,R){var $,re=16;for($=0;16>$;++$)re+=T[R-1+32*$]+T[R+$-32];an(re>>5,T,R)}function zo(T,R){var $,re=8;for($=0;16>$;++$)re+=T[R-1+32*$];an(re>>4,T,R)}function Ho(T,R){var $,re=8;for($=0;16>$;++$)re+=T[R+$-32];an(re>>4,T,R)}function vs(T,R){an(128,T,R)}function Wr(T,R,$){return T+2*R+$+2>>2}function Jn(T,R){var $,re=R-32;for(re=new Uint8Array([Wr(T[re-1],T[re+0],T[re+1]),Wr(T[re+0],T[re+1],T[re+2]),Wr(T[re+1],T[re+2],T[re+3]),Wr(T[re+2],T[re+3],T[re+4])]),$=0;4>$;++$)a(T,R+32*$,re,0,re.length)}function cn(T,R){var $=T[R-1],re=T[R-1+32],ge=T[R-1+64],we=T[R-1+96];Gt(T,R+0,16843009*Wr(T[R-1-32],$,re)),Gt(T,R+32,16843009*Wr($,re,ge)),Gt(T,R+64,16843009*Wr(re,ge,we)),Gt(T,R+96,16843009*Wr(ge,we,we))}function ii(T,R){var $,re=4;for($=0;4>$;++$)re+=T[R+$-32]+T[R-1+32*$];for(re>>=3,$=0;4>$;++$)u(T,R+32*$,re,4)}function _s(T,R){var $=T[R-1+0],re=T[R-1+32],ge=T[R-1+64],we=T[R-1-32],Se=T[R+0-32],Me=T[R+1-32],Re=T[R+2-32],Ke=T[R+3-32];T[R+0+96]=Wr(re,ge,T[R-1+96]),T[R+1+96]=T[R+0+64]=Wr($,re,ge),T[R+2+96]=T[R+1+64]=T[R+0+32]=Wr(we,$,re),T[R+3+96]=T[R+2+64]=T[R+1+32]=T[R+0+0]=Wr(Se,we,$),T[R+3+64]=T[R+2+32]=T[R+1+0]=Wr(Me,Se,we),T[R+3+32]=T[R+2+0]=Wr(Re,Me,Se),T[R+3+0]=Wr(Ke,Re,Me)}function Wi(T,R){var $=T[R+1-32],re=T[R+2-32],ge=T[R+3-32],we=T[R+4-32],Se=T[R+5-32],Me=T[R+6-32],Re=T[R+7-32];T[R+0+0]=Wr(T[R+0-32],$,re),T[R+1+0]=T[R+0+32]=Wr($,re,ge),T[R+2+0]=T[R+1+32]=T[R+0+64]=Wr(re,ge,we),T[R+3+0]=T[R+2+32]=T[R+1+64]=T[R+0+96]=Wr(ge,we,Se),T[R+3+32]=T[R+2+64]=T[R+1+96]=Wr(we,Se,Me),T[R+3+64]=T[R+2+96]=Wr(Se,Me,Re),T[R+3+96]=Wr(Me,Re,Re)}function uo(T,R){var $=T[R-1+0],re=T[R-1+32],ge=T[R-1+64],we=T[R-1-32],Se=T[R+0-32],Me=T[R+1-32],Re=T[R+2-32],Ke=T[R+3-32];T[R+0+0]=T[R+1+64]=we+Se+1>>1,T[R+1+0]=T[R+2+64]=Se+Me+1>>1,T[R+2+0]=T[R+3+64]=Me+Re+1>>1,T[R+3+0]=Re+Ke+1>>1,T[R+0+96]=Wr(ge,re,$),T[R+0+64]=Wr(re,$,we),T[R+0+32]=T[R+1+96]=Wr($,we,Se),T[R+1+32]=T[R+2+96]=Wr(we,Se,Me),T[R+2+32]=T[R+3+96]=Wr(Se,Me,Re),T[R+3+32]=Wr(Me,Re,Ke)}function ws(T,R){var $=T[R+0-32],re=T[R+1-32],ge=T[R+2-32],we=T[R+3-32],Se=T[R+4-32],Me=T[R+5-32],Re=T[R+6-32],Ke=T[R+7-32];T[R+0+0]=$+re+1>>1,T[R+1+0]=T[R+0+64]=re+ge+1>>1,T[R+2+0]=T[R+1+64]=ge+we+1>>1,T[R+3+0]=T[R+2+64]=we+Se+1>>1,T[R+0+32]=Wr($,re,ge),T[R+1+32]=T[R+0+96]=Wr(re,ge,we),T[R+2+32]=T[R+1+96]=Wr(ge,we,Se),T[R+3+32]=T[R+2+96]=Wr(we,Se,Me),T[R+3+64]=Wr(Se,Me,Re),T[R+3+96]=Wr(Me,Re,Ke)}function Sa(T,R){var $=T[R-1+0],re=T[R-1+32],ge=T[R-1+64],we=T[R-1+96];T[R+0+0]=$+re+1>>1,T[R+2+0]=T[R+0+32]=re+ge+1>>1,T[R+2+32]=T[R+0+64]=ge+we+1>>1,T[R+1+0]=Wr($,re,ge),T[R+3+0]=T[R+1+32]=Wr(re,ge,we),T[R+3+32]=T[R+1+64]=Wr(ge,we,we),T[R+3+64]=T[R+2+64]=T[R+0+96]=T[R+1+96]=T[R+2+96]=T[R+3+96]=we}function Fa(T,R){var $=T[R-1+0],re=T[R-1+32],ge=T[R-1+64],we=T[R-1+96],Se=T[R-1-32],Me=T[R+0-32],Re=T[R+1-32],Ke=T[R+2-32];T[R+0+0]=T[R+2+32]=$+Se+1>>1,T[R+0+32]=T[R+2+64]=re+$+1>>1,T[R+0+64]=T[R+2+96]=ge+re+1>>1,T[R+0+96]=we+ge+1>>1,T[R+3+0]=Wr(Me,Re,Ke),T[R+2+0]=Wr(Se,Me,Re),T[R+1+0]=T[R+3+32]=Wr($,Se,Me),T[R+1+32]=T[R+3+64]=Wr(re,$,Se),T[R+1+64]=T[R+3+96]=Wr(ge,re,$),T[R+1+96]=Wr(we,ge,re)}function ti(T,R){var $;for($=0;8>$;++$)a(T,R+32*$,T,R-32,8)}function Aa(T,R){var $;for($=0;8>$;++$)u(T,R,T[R-1],8),R+=32}function Zi(T,R,$){var re;for(re=0;8>re;++re)u(R,$+32*re,T,8)}function ic(T,R){var $,re=8;for($=0;8>$;++$)re+=T[R+$-32]+T[R-1+32*$];Zi(re>>4,T,R)}function qs(T,R){var $,re=4;for($=0;8>$;++$)re+=T[R+$-32];Zi(re>>3,T,R)}function ul(T,R){var $,re=4;for($=0;8>$;++$)re+=T[R-1+32*$];Zi(re>>3,T,R)}function jo(T,R){Zi(128,T,R)}function ua(T,R,$){var re=T[R-$],ge=T[R+0],we=3*(ge-re)+So[1020+T[R-2*$]-T[R+$]],Se=cA[112+(we+4>>3)];T[R-$]=lo[255+re+cA[112+(we+3>>3)]],T[R+0]=lo[255+ge-Se]}function sc(T,R,$,re){var ge=T[R+0],we=T[R+$];return pn[255+T[R-2*$]-T[R-$]]>re||pn[255+we-ge]>re}function ha(T,R,$,re){return 4*pn[255+T[R-$]-T[R+0]]+pn[255+T[R-2*$]-T[R+$]]<=re}function Qn(T,R,$,re,ge){var we=T[R-3*$],Se=T[R-2*$],Me=T[R-$],Re=T[R+0],Ke=T[R+$],$e=T[R+2*$],kt=T[R+3*$];return 4*pn[255+Me-Re]+pn[255+Se-Ke]>re?0:pn[255+T[R-4*$]-we]<=ge&&pn[255+we-Se]<=ge&&pn[255+Se-Me]<=ge&&pn[255+kt-$e]<=ge&&pn[255+$e-Ke]<=ge&&pn[255+Ke-Re]<=ge}function Vo(T,R,$,re){var ge=2*re+1;for(re=0;16>re;++re)ha(T,R+re,$,ge)&&ua(T,R+re,$)}function En(T,R,$,re){var ge=2*re+1;for(re=0;16>re;++re)ha(T,R+re*$,1,ge)&&ua(T,R+re*$,1)}function mn(T,R,$,re){var ge;for(ge=3;0<ge;--ge)Vo(T,R+=4*$,$,re)}function Ia(T,R,$,re){var ge;for(ge=3;0<ge;--ge)En(T,R+=4,$,re)}function bn(T,R,$,re,ge,we,Se,Me){for(we=2*we+1;0<ge--;){if(Qn(T,R,$,we,Se))if(sc(T,R,$,Me))ua(T,R,$);else{var Re=T,Ke=R,$e=$,kt=Re[Ke-2*$e],Ye=Re[Ke-$e],Bt=Re[Ke+0],Pt=Re[Ke+$e],Zt=Re[Ke+2*$e],Ut=27*(Wt=So[1020+3*(Bt-Ye)+So[1020+kt-Pt]])+63>>7,qt=18*Wt+63>>7,Wt=9*Wt+63>>7;Re[Ke-3*$e]=lo[255+Re[Ke-3*$e]+Wt],Re[Ke-2*$e]=lo[255+kt+qt],Re[Ke-$e]=lo[255+Ye+Ut],Re[Ke+0]=lo[255+Bt-Ut],Re[Ke+$e]=lo[255+Pt-qt],Re[Ke+2*$e]=lo[255+Zt-Wt]}R+=re}}function Go(T,R,$,re,ge,we,Se,Me){for(we=2*we+1;0<ge--;){if(Qn(T,R,$,we,Se))if(sc(T,R,$,Me))ua(T,R,$);else{var Re=T,Ke=R,$e=$,kt=Re[Ke-$e],Ye=Re[Ke+0],Bt=Re[Ke+$e],Pt=cA[112+(4+(Zt=3*(Ye-kt))>>3)],Zt=cA[112+(Zt+3>>3)],Ut=Pt+1>>1;Re[Ke-2*$e]=lo[255+Re[Ke-2*$e]+Ut],Re[Ke-$e]=lo[255+kt+Zt],Re[Ke+0]=lo[255+Ye-Pt],Re[Ke+$e]=lo[255+Bt-Ut]}R+=re}}function Ei(T,R,$,re,ge,we){bn(T,R,$,1,16,re,ge,we)}function ao(T,R,$,re,ge,we){bn(T,R,1,$,16,re,ge,we)}function da(T,R,$,re,ge,we){var Se;for(Se=3;0<Se;--Se)Go(T,R+=4*$,$,1,16,re,ge,we)}function V(T,R,$,re,ge,we){var Se;for(Se=3;0<Se;--Se)Go(T,R+=4,1,$,16,re,ge,we)}function ye(T,R,$,re,ge,we,Se,Me){bn(T,R,ge,1,8,we,Se,Me),bn($,re,ge,1,8,we,Se,Me)}function tt(T,R,$,re,ge,we,Se,Me){bn(T,R,1,ge,8,we,Se,Me),bn($,re,1,ge,8,we,Se,Me)}function gt(T,R,$,re,ge,we,Se,Me){Go(T,R+4*ge,ge,1,8,we,Se,Me),Go($,re+4*ge,ge,1,8,we,Se,Me)}function It(T,R,$,re,ge,we,Se,Me){Go(T,R+4,1,ge,8,we,Se,Me),Go($,re+4,1,ge,8,we,Se,Me)}function Kt(){this.ba=new Tr,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new tn,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function sr(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function Br(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function Kr(){this.ua=0,this.Wa=new kr,this.vb=new kr,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new ut,this.yc=new Te}function gn(){this.xb=this.a=0,this.l=new Ba,this.ca=new Tr,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new Ee,this.Pb=0,this.wd=new Ee,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new Kr,this.ab=0,this.gc=m(4,Br),this.Oc=0}function yn(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new Ba,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function An(T,R,$,re,ge,we,Se){for(T=T==null?0:T[R+0],R=0;R<Se;++R)ge[we+R]=T+$[re+R]&255,T=ge[we+R]}function Hi(T,R,$,re,ge,we,Se){var Me;if(T==null)An(null,null,$,re,ge,we,Se);else for(Me=0;Me<Se;++Me)ge[we+Me]=T[R+Me]+$[re+Me]&255}function is(T,R,$,re,ge,we,Se){if(T==null)An(null,null,$,re,ge,we,Se);else{var Me,Re=T[R+0],Ke=Re,$e=Re;for(Me=0;Me<Se;++Me)Ke=$e+(Re=T[R+Me])-Ke,$e=$[re+Me]+(-256&Ke?0>Ke?0:255:Ke)&255,Ke=Re,ge[we+Me]=$e}}function Si(T,R,$,re){var ge=R.width,we=R.o;if(r(T!=null&&R!=null),0>$||0>=re||$+re>we)return null;if(!T.Cc){if(T.ga==null){var Se;if(T.ga=new yn,(Se=T.ga==null)||(Se=R.width*R.o,r(T.Gb.length==0),T.Gb=d(Se),T.Uc=0,T.Gb==null?Se=0:(T.mb=T.Gb,T.nb=T.Uc,T.rc=null,Se=1),Se=!Se),!Se){Se=T.ga;var Me=T.Fa,Re=T.P,Ke=T.qc,$e=T.mb,kt=T.nb,Ye=Re+1,Bt=Ke-1,Pt=Se.l;if(r(Me!=null&&$e!=null&&R!=null),Rs[0]=null,Rs[1]=An,Rs[2]=Hi,Rs[3]=is,Se.ca=$e,Se.tb=kt,Se.c=R.width,Se.i=R.height,r(0<Se.c&&0<Se.i),1>=Ke)R=0;else if(Se.$a=3&Me[Re+0],Se.Z=Me[Re+0]>>2&3,Se.Lc=Me[Re+0]>>4&3,Re=Me[Re+0]>>6&3,0>Se.$a||1<Se.$a||4<=Se.Z||1<Se.Lc||Re)R=0;else if(Pt.put=xr,Pt.ac=Rn,Pt.bc=Tn,Pt.ma=Se,Pt.width=R.width,Pt.height=R.height,Pt.Da=R.Da,Pt.v=R.v,Pt.va=R.va,Pt.j=R.j,Pt.o=R.o,Se.$a)e:{r(Se.$a==1),R=El();t:for(;;){if(R==null){R=0;break e}if(r(Se!=null),Se.mc=R,R.c=Se.c,R.i=Se.i,R.l=Se.l,R.l.ma=Se,R.l.width=Se.c,R.l.height=Se.i,R.a=0,Ne(R.m,Me,Ye,Bt),!ks(Se.c,Se.i,1,R,null)||(R.ab==1&&R.gc[0].hc==3&&ns(R.s)?(Se.ic=1,Me=R.c*R.i,R.Ta=null,R.Ua=0,R.V=d(Me),R.Ba=0,R.V==null?(R.a=1,R=0):R=1):(Se.ic=0,R=dn(R,Se.c)),!R))break t;R=1;break e}Se.mc=null,R=0}else R=Bt>=Se.c*Se.i;Se=!R}if(Se)return null;T.ga.Lc!=1?T.Ga=0:re=we-$}r(T.ga!=null),r($+re<=we);e:{if(R=(Me=T.ga).c,we=Me.l.o,Me.$a==0){if(Ye=T.rc,Bt=T.Vc,Pt=T.Fa,Re=T.P+1+$*R,Ke=T.mb,$e=T.nb+$*R,r(Re<=T.P+T.qc),Me.Z!=0)for(r(Rs[Me.Z]!=null),Se=0;Se<re;++Se)Rs[Me.Z](Ye,Bt,Pt,Re,Ke,$e,R),Ye=Ke,Bt=$e,$e+=R,Re+=R;else for(Se=0;Se<re;++Se)a(Ke,$e,Pt,Re,R),Ye=Ke,Bt=$e,$e+=R,Re+=R;T.rc=Ye,T.Vc=Bt}else{if(r(Me.mc!=null),R=$+re,r((Se=Me.mc)!=null),r(R<=Se.i),Se.C>=R)R=1;else if(Me.ic||fa(),Me.ic){Me=Se.V,Ye=Se.Ba,Bt=Se.c;var Zt=Se.i,Ut=(Pt=1,Re=Se.$/Bt,Ke=Se.$%Bt,$e=Se.m,kt=Se.s,Se.$),qt=Bt*Zt,Wt=Bt*R,tr=kt.wc,er=Ut<Wt?Zn(kt,Ke,Re):null;r(Ut<=qt),r(R<=Zt),r(ns(kt));t:for(;;){for(;!$e.h&&Ut<Wt;){if(Ke&tr||(er=Zn(kt,Ke,Re)),r(er!=null),et($e),256>(Zt=ai(er.G[0],er.H[0],$e)))Me[Ye+Ut]=Zt,++Ut,++Ke>=Bt&&(Ke=0,++Re<=R&&!(Re%16)&&nn(Se,Re));else{if(!(280>Zt)){Pt=0;break t}Zt=xn(Zt-256,$e);var sn,zr=ai(er.G[4],er.H[4],$e);if(et($e),!(Ut>=(zr=Ui(Bt,zr=xn(zr,$e)))&&qt-Ut>=Zt)){Pt=0;break t}for(sn=0;sn<Zt;++sn)Me[Ye+Ut+sn]=Me[Ye+Ut+sn-zr];for(Ut+=Zt,Ke+=Zt;Ke>=Bt;)Ke-=Bt,++Re<=R&&!(Re%16)&&nn(Se,Re);Ut<Wt&&Ke&tr&&(er=Zn(kt,Ke,Re))}r($e.h==Ve($e))}nn(Se,Re>R?R:Re);break t}!Pt||$e.h&&Ut<qt?(Pt=0,Se.a=$e.h?5:3):Se.$=Ut,R=Pt}else R=hn(Se,Se.V,Se.Ba,Se.c,Se.i,R,ol);if(!R){re=0;break e}}$+re>=we&&(T.Cc=1),re=1}if(!re)return null;if(T.Cc&&((re=T.ga)!=null&&(re.mc=null),T.ga=null,0<T.Ga))return alert("todo:WebPDequantizeLevels"),null}return T.nb+$*ge}function Ds(T,R,$,re,ge,we){for(;0<ge--;){var Se,Me=T,Re=R+($?1:0),Ke=T,$e=R+($?0:3);for(Se=0;Se<re;++Se){var kt=Ke[$e+4*Se];kt!=255&&(kt*=32897,Me[Re+4*Se+0]=Me[Re+4*Se+0]*kt>>23,Me[Re+4*Se+1]=Me[Re+4*Se+1]*kt>>23,Me[Re+4*Se+2]=Me[Re+4*Se+2]*kt>>23)}R+=we}}function Li(T,R,$,re,ge){for(;0<re--;){var we;for(we=0;we<$;++we){var Se=T[R+2*we+0],Me=15&(Ke=T[R+2*we+1]),Re=4369*Me,Ke=(240&Ke|Ke>>4)*Re>>16;T[R+2*we+0]=(240&Se|Se>>4)*Re>>16&240|(15&Se|Se<<4)*Re>>16>>4&15,T[R+2*we+1]=240&Ke|Me}R+=ge}}function xs(T,R,$,re,ge,we,Se,Me){var Re,Ke,$e=255;for(Ke=0;Ke<ge;++Ke){for(Re=0;Re<re;++Re){var kt=T[R+Re];we[Se+4*Re]=kt,$e&=kt}R+=$,Se+=Me}return $e!=255}function Ko(T,R,$,re,ge){var we;for(we=0;we<ge;++we)$[re+we]=T[R+we]>>8}function fa(){Dc=Ds,au=Li,yl=xs,kA=Ko}function pa(T,R,$){Be[T]=function(re,ge,we,Se,Me,Re,Ke,$e,kt,Ye,Bt,Pt,Zt,Ut,qt,Wt,tr){var er,sn=tr-1>>1,zr=Me[Re+0]|Ke[$e+0]<<16,Cn=kt[Ye+0]|Bt[Pt+0]<<16;r(re!=null);var Zr=3*zr+Cn+131074>>2;for(R(re[ge+0],255&Zr,Zr>>16,Zt,Ut),we!=null&&(Zr=3*Cn+zr+131074>>2,R(we[Se+0],255&Zr,Zr>>16,qt,Wt)),er=1;er<=sn;++er){var On=Me[Re+er]|Ke[$e+er]<<16,Ri=kt[Ye+er]|Bt[Pt+er]<<16,Sn=zr+On+Cn+Ri+524296,Hr=Sn+2*(On+Cn)>>3;Zr=Hr+zr>>1,zr=(Sn=Sn+2*(zr+Ri)>>3)+On>>1,R(re[ge+2*er-1],255&Zr,Zr>>16,Zt,Ut+(2*er-1)*$),R(re[ge+2*er-0],255&zr,zr>>16,Zt,Ut+(2*er-0)*$),we!=null&&(Zr=Sn+Cn>>1,zr=Hr+Ri>>1,R(we[Se+2*er-1],255&Zr,Zr>>16,qt,Wt+(2*er-1)*$),R(we[Se+2*er+0],255&zr,zr>>16,qt,Wt+(2*er+0)*$)),zr=On,Cn=Ri}1&tr||(Zr=3*zr+Cn+131074>>2,R(re[ge+tr-1],255&Zr,Zr>>16,Zt,Ut+(tr-1)*$),we!=null&&(Zr=3*Cn+zr+131074>>2,R(we[Se+tr-1],255&Zr,Zr>>16,qt,Wt+(tr-1)*$)))}}function Ta(){Zs[AA]=Nu,Zs[Nc]=Da,Zs[ch]=Hc,Zs[Ac]=Ra,Zs[lu]=Na,Zs[Ii]=HA,Zs[cu]=Qu,Zs[RA]=Da,Zs[uc]=Ra,Zs[Ql]=Na,Zs[Qc]=HA}function hl(T){return T&-16384?0>T?0:255:T>>zl}function Fi(T,R){return hl((19077*T>>8)+(26149*R>>8)-14234)}function Tc(T,R,$){return hl((19077*T>>8)-(6419*R>>8)-(13320*$>>8)+8708)}function ma(T,R){return hl((19077*T>>8)+(33050*R>>8)-17685)}function Pa(T,R,$,re,ge){re[ge+0]=Fi(T,$),re[ge+1]=Tc(T,R,$),re[ge+2]=ma(T,R)}function Xi(T,R,$,re,ge){re[ge+0]=ma(T,R),re[ge+1]=Tc(T,R,$),re[ge+2]=Fi(T,$)}function sA(T,R,$,re,ge){var we=Tc(T,R,$);R=we<<3&224|ma(T,R)>>3,re[ge+0]=248&Fi(T,$)|we>>5,re[ge+1]=R}function Tl(T,R,$,re,ge){var we=240&ma(T,R)|15;re[ge+0]=240&Fi(T,$)|Tc(T,R,$)>>4,re[ge+1]=we}function ou(T,R,$,re,ge){re[ge+0]=255,Pa(T,R,$,re,ge+1)}function Pl(T,R,$,re,ge){Xi(T,R,$,re,ge),re[ge+3]=255}function $s(T,R,$,re,ge){Pa(T,R,$,re,ge),re[ge+3]=255}function La(T,R,$){Be[T]=function(re,ge,we,Se,Me,Re,Ke,$e,kt){for(var Ye=$e+(-2&kt)*$;$e!=Ye;)R(re[ge+0],we[Se+0],Me[Re+0],Ke,$e),R(re[ge+1],we[Se+0],Me[Re+0],Ke,$e+$),ge+=2,++Se,++Re,$e+=2*$;1&kt&&R(re[ge+0],we[Se+0],Me[Re+0],Ke,$e)}}function dl(T,R,$){return $==0?T==0?R==0?6:5:R==0?4:0:$}function LA(T,R,$,re,ge){switch(T>>>30){case 3:lc(R,$,re,ge,0);break;case 2:os(R,$,re,ge);break;case 1:si(R,$,re,ge)}}function Bo(T,R){var $,re,ge=R.M,we=R.Nb,Se=T.oc,Me=T.pc+40,Re=T.oc,Ke=T.pc+584,$e=T.oc,kt=T.pc+600;for($=0;16>$;++$)Se[Me+32*$-1]=129;for($=0;8>$;++$)Re[Ke+32*$-1]=129,$e[kt+32*$-1]=129;for(0<ge?Se[Me-1-32]=Re[Ke-1-32]=$e[kt-1-32]=129:(u(Se,Me-32-1,127,21),u(Re,Ke-32-1,127,9),u($e,kt-32-1,127,9)),re=0;re<T.za;++re){var Ye=R.ya[R.aa+re];if(0<re){for($=-1;16>$;++$)a(Se,Me+32*$-4,Se,Me+32*$+12,4);for($=-1;8>$;++$)a(Re,Ke+32*$-4,Re,Ke+32*$+4,4),a($e,kt+32*$-4,$e,kt+32*$+4,4)}var Bt=T.Gd,Pt=T.Hd+re,Zt=Ye.ad,Ut=Ye.Hc;if(0<ge&&(a(Se,Me-32,Bt[Pt].y,0,16),a(Re,Ke-32,Bt[Pt].f,0,8),a($e,kt-32,Bt[Pt].ea,0,8)),Ye.Za){var qt=Se,Wt=Me-32+16;for(0<ge&&(re>=T.za-1?u(qt,Wt,Bt[Pt].y[15],4):a(qt,Wt,Bt[Pt+1].y,0,4)),$=0;4>$;$++)qt[Wt+128+$]=qt[Wt+256+$]=qt[Wt+384+$]=qt[Wt+0+$];for($=0;16>$;++$,Ut<<=2)qt=Se,Wt=Me+fA[$],va[Ye.Ob[$]](qt,Wt),LA(Ut,Zt,16*+$,qt,Wt)}else if(qt=dl(re,ge,Ye.Ob[0]),po[qt](Se,Me),Ut!=0)for($=0;16>$;++$,Ut<<=2)LA(Ut,Zt,16*+$,Se,Me+fA[$]);for($=Ye.Gc,qt=dl(re,ge,Ye.Dd),$n[qt](Re,Ke),$n[qt]($e,kt),Ut=Zt,qt=Re,Wt=Ke,255&(Ye=0|$)&&(170&Ye?Eo(Ut,256,qt,Wt):_i(Ut,256,qt,Wt)),Ye=$e,Ut=kt,255&($>>=8)&&(170&$?Eo(Zt,320,Ye,Ut):_i(Zt,320,Ye,Ut)),ge<T.Ub-1&&(a(Bt[Pt].y,0,Se,Me+480,16),a(Bt[Pt].f,0,Re,Ke+224,8),a(Bt[Pt].ea,0,$e,kt+224,8)),$=8*we*T.B,Bt=T.sa,Pt=T.ta+16*re+16*we*T.R,Zt=T.qa,Ye=T.ra+8*re+$,Ut=T.Ha,qt=T.Ia+8*re+$,$=0;16>$;++$)a(Bt,Pt+$*T.R,Se,Me+32*$,16);for($=0;8>$;++$)a(Zt,Ye+$*T.B,Re,Ke+32*$,8),a(Ut,qt+$*T.B,$e,kt+32*$,8)}}function Ll(T,R,$,re,ge,we,Se,Me,Re){var Ke=[0],$e=[0],kt=0,Ye=Re!=null?Re.kd:0,Bt=Re??new sr;if(T==null||12>$)return 7;Bt.data=T,Bt.w=R,Bt.ha=$,R=[R],$=[$],Bt.gb=[Bt.gb];e:{var Pt=R,Zt=$,Ut=Bt.gb;if(r(T!=null),r(Zt!=null),r(Ut!=null),Ut[0]=0,12<=Zt[0]&&!i(T,Pt[0],"RIFF")){if(i(T,Pt[0]+8,"WEBP")){Ut=3;break e}var qt=_r(T,Pt[0]+4);if(12>qt||4294967286<qt){Ut=3;break e}if(Ye&&qt>Zt[0]-8){Ut=7;break e}Ut[0]=qt,Pt[0]+=12,Zt[0]-=12}Ut=0}if(Ut!=0)return Ut;for(qt=0<Bt.gb[0],$=$[0];;){e:{var Wt=T;Zt=R,Ut=$;var tr=Ke,er=$e,sn=Pt=[0];if((Zr=kt=[kt])[0]=0,8>Ut[0])Ut=7;else{if(!i(Wt,Zt[0],"VP8X")){if(_r(Wt,Zt[0]+4)!=10){Ut=3;break e}if(18>Ut[0]){Ut=7;break e}var zr=_r(Wt,Zt[0]+8),Cn=1+Ar(Wt,Zt[0]+12);if(2147483648<=Cn*(Wt=1+Ar(Wt,Zt[0]+15))){Ut=3;break e}sn!=null&&(sn[0]=zr),tr!=null&&(tr[0]=Cn),er!=null&&(er[0]=Wt),Zt[0]+=18,Ut[0]-=18,Zr[0]=1}Ut=0}}if(kt=kt[0],Pt=Pt[0],Ut!=0)return Ut;if(Zt=!!(2&Pt),!qt&&kt)return 3;if(we!=null&&(we[0]=!!(16&Pt)),Se!=null&&(Se[0]=Zt),Me!=null&&(Me[0]=0),Se=Ke[0],Pt=$e[0],kt&&Zt&&Re==null){Ut=0;break}if(4>$){Ut=7;break}if(qt&&kt||!qt&&!kt&&!i(T,R[0],"ALPH")){$=[$],Bt.na=[Bt.na],Bt.P=[Bt.P],Bt.Sa=[Bt.Sa];e:{zr=T,Ut=R,qt=$;var Zr=Bt.gb;tr=Bt.na,er=Bt.P,sn=Bt.Sa,Cn=22,r(zr!=null),r(qt!=null),Wt=Ut[0];var On=qt[0];for(r(tr!=null),r(sn!=null),tr[0]=null,er[0]=null,sn[0]=0;;){if(Ut[0]=Wt,qt[0]=On,8>On){Ut=7;break e}var Ri=_r(zr,Wt+4);if(4294967286<Ri){Ut=3;break e}var Sn=8+Ri+1&-2;if(Cn+=Sn,0<Zr&&Cn>Zr){Ut=3;break e}if(!i(zr,Wt,"VP8 ")||!i(zr,Wt,"VP8L")){Ut=0;break e}if(On[0]<Sn){Ut=7;break e}i(zr,Wt,"ALPH")||(tr[0]=zr,er[0]=Wt+8,sn[0]=Ri),Wt+=Sn,On-=Sn}}if($=$[0],Bt.na=Bt.na[0],Bt.P=Bt.P[0],Bt.Sa=Bt.Sa[0],Ut!=0)break}$=[$],Bt.Ja=[Bt.Ja],Bt.xa=[Bt.xa];e:if(Zr=T,Ut=R,qt=$,tr=Bt.gb[0],er=Bt.Ja,sn=Bt.xa,zr=Ut[0],Wt=!i(Zr,zr,"VP8 "),Cn=!i(Zr,zr,"VP8L"),r(Zr!=null),r(qt!=null),r(er!=null),r(sn!=null),8>qt[0])Ut=7;else{if(Wt||Cn){if(Zr=_r(Zr,zr+4),12<=tr&&Zr>tr-12){Ut=3;break e}if(Ye&&Zr>qt[0]-8){Ut=7;break e}er[0]=Zr,Ut[0]+=8,qt[0]-=8,sn[0]=Cn}else sn[0]=5<=qt[0]&&Zr[zr+0]==47&&!(Zr[zr+4]>>5),er[0]=qt[0];Ut=0}if($=$[0],Bt.Ja=Bt.Ja[0],Bt.xa=Bt.xa[0],R=R[0],Ut!=0)break;if(4294967286<Bt.Ja)return 3;if(Me==null||Zt||(Me[0]=Bt.xa?2:1),Se=[Se],Pt=[Pt],Bt.xa){if(5>$){Ut=7;break}Me=Se,Ye=Pt,Zt=we,T==null||5>$?T=0:5<=$&&T[R+0]==47&&!(T[R+4]>>5)?(qt=[0],Zr=[0],tr=[0],Ne(er=new Ee,T,R,$),Bn(er,qt,Zr,tr)?(Me!=null&&(Me[0]=qt[0]),Ye!=null&&(Ye[0]=Zr[0]),Zt!=null&&(Zt[0]=tr[0]),T=1):T=0):T=0}else{if(10>$){Ut=7;break}Me=Pt,T==null||10>$||!Sc(T,R+3,$-3)?T=0:(Ye=T[R+0]|T[R+1]<<8|T[R+2]<<16,Zt=16383&(T[R+7]<<8|T[R+6]),T=16383&(T[R+9]<<8|T[R+8]),1&Ye||3<(Ye>>1&7)||!(Ye>>4&1)||Ye>>5>=Bt.Ja||!Zt||!T?T=0:(Se&&(Se[0]=Zt),Me&&(Me[0]=T),T=1))}if(!T||(Se=Se[0],Pt=Pt[0],kt&&(Ke[0]!=Se||$e[0]!=Pt)))return 3;Re!=null&&(Re[0]=Bt,Re.offset=R-Re.w,r(4294967286>R-Re.w),r(Re.offset==Re.ha-$));break}return Ut==0||Ut==7&&kt&&Re==null?(we!=null&&(we[0]|=Bt.na!=null&&0<Bt.na.length),re!=null&&(re[0]=Se),ge!=null&&(ge[0]=Pt),0):Ut}function oA(T,R,$){var re=R.width,ge=R.height,we=0,Se=0,Me=re,Re=ge;if(R.Da=T!=null&&0<T.Da,R.Da&&(Me=T.cd,Re=T.bd,we=T.v,Se=T.j,11>$||(we&=-2,Se&=-2),0>we||0>Se||0>=Me||0>=Re||we+Me>re||Se+Re>ge))return 0;if(R.v=we,R.j=Se,R.va=we+Me,R.o=Se+Re,R.U=Me,R.T=Re,R.da=T!=null&&0<T.da,R.da){if(!Vr(Me,Re,$=[T.ib],we=[T.hb]))return 0;R.ib=$[0],R.hb=we[0]}return R.ob=T!=null&&T.ob,R.Kb=T==null||!T.Sd,R.da&&(R.ob=R.ib<3*re/4&&R.hb<3*ge/4,R.Kb=0),1}function aA(T){if(T==null)return 2;if(11>T.S){var R=T.f.RGBA;R.fb+=(T.height-1)*R.A,R.A=-R.A}else R=T.f.kb,T=T.height,R.O+=(T-1)*R.fa,R.fa=-R.fa,R.N+=(T-1>>1)*R.Ab,R.Ab=-R.Ab,R.W+=(T-1>>1)*R.Db,R.Db=-R.Db,R.F!=null&&(R.J+=(T-1)*R.lb,R.lb=-R.lb);return 0}function Ml(T,R,$,re){if(re==null||0>=T||0>=R)return 2;if($!=null){if($.Da){var ge=$.cd,we=$.bd,Se=-2&$.v,Me=-2&$.j;if(0>Se||0>Me||0>=ge||0>=we||Se+ge>T||Me+we>R)return 2;T=ge,R=we}if($.da){if(!Vr(T,R,ge=[$.ib],we=[$.hb]))return 2;T=ge[0],R=we[0]}}re.width=T,re.height=R;e:{var Re=re.width,Ke=re.height;if(T=re.S,0>=Re||0>=Ke||!(T>=AA&&13>T))T=2;else{if(0>=re.Rd&&re.sd==null){Se=we=ge=R=0;var $e=(Me=Re*jA[T])*Ke;if(11>T||(we=(Ke+1)/2*(R=(Re+1)/2),T==12&&(Se=(ge=Re)*Ke)),(Ke=d($e+2*we+Se))==null){T=1;break e}re.sd=Ke,11>T?((Re=re.f.RGBA).eb=Ke,Re.fb=0,Re.A=Me,Re.size=$e):((Re=re.f.kb).y=Ke,Re.O=0,Re.fa=Me,Re.Fd=$e,Re.f=Ke,Re.N=0+$e,Re.Ab=R,Re.Cd=we,Re.ea=Ke,Re.W=0+$e+we,Re.Db=R,Re.Ed=we,T==12&&(Re.F=Ke,Re.J=0+$e+2*we),Re.Tc=Se,Re.lb=ge)}if(R=1,ge=re.S,we=re.width,Se=re.height,ge>=AA&&13>ge)if(11>ge)T=re.f.RGBA,R&=(Me=Math.abs(T.A))*(Se-1)+we<=T.size,R&=Me>=we*jA[ge],R&=T.eb!=null;else{T=re.f.kb,Me=(we+1)/2,$e=(Se+1)/2,Re=Math.abs(T.fa),Ke=Math.abs(T.Ab);var kt=Math.abs(T.Db),Ye=Math.abs(T.lb),Bt=Ye*(Se-1)+we;R&=Re*(Se-1)+we<=T.Fd,R&=Ke*($e-1)+Me<=T.Cd,R=(R&=kt*($e-1)+Me<=T.Ed)&Re>=we&Ke>=Me&kt>=Me,R&=T.y!=null,R&=T.f!=null,R&=T.ea!=null,ge==12&&(R&=Ye>=we,R&=Bt<=T.Tc,R&=T.F!=null)}else R=0;T=R?0:2}}return T!=0||$!=null&&$.fd&&(T=aA(re)),T}var Ws=64,qo=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],Co=24,ga=32,fl=8,Ma=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];Er("Predictor0","PredictorAdd0"),Be.Predictor0=function(){return 4278190080},Be.Predictor1=function(T){return T},Be.Predictor2=function(T,R,$){return R[$+0]},Be.Predictor3=function(T,R,$){return R[$+1]},Be.Predictor4=function(T,R,$){return R[$-1]},Be.Predictor5=function(T,R,$){return Dr(Dr(T,R[$+1]),R[$+0])},Be.Predictor6=function(T,R,$){return Dr(T,R[$-1])},Be.Predictor7=function(T,R,$){return Dr(T,R[$+0])},Be.Predictor8=function(T,R,$){return Dr(R[$-1],R[$+0])},Be.Predictor9=function(T,R,$){return Dr(R[$+0],R[$+1])},Be.Predictor10=function(T,R,$){return Dr(Dr(T,R[$-1]),Dr(R[$+0],R[$+1]))},Be.Predictor11=function(T,R,$){var re=R[$+0];return 0>=pt(re>>24&255,T>>24&255,(R=R[$-1])>>24&255)+pt(re>>16&255,T>>16&255,R>>16&255)+pt(re>>8&255,T>>8&255,R>>8&255)+pt(255&re,255&T,255&R)?re:T},Be.Predictor12=function(T,R,$){var re=R[$+0];return(Dn((T>>24&255)+(re>>24&255)-((R=R[$-1])>>24&255))<<24|Dn((T>>16&255)+(re>>16&255)-(R>>16&255))<<16|Dn((T>>8&255)+(re>>8&255)-(R>>8&255))<<8|Dn((255&T)+(255&re)-(255&R)))>>>0},Be.Predictor13=function(T,R,$){var re=R[$-1];return(un((T=Dr(T,R[$+0]))>>24&255,re>>24&255)<<24|un(T>>16&255,re>>16&255)<<16|un(T>>8&255,re>>8&255)<<8|un(255&T,255&re))>>>0};var oc=Be.PredictorAdd0;Be.PredictorAdd1=fe,Er("Predictor2","PredictorAdd2"),Er("Predictor3","PredictorAdd3"),Er("Predictor4","PredictorAdd4"),Er("Predictor5","PredictorAdd5"),Er("Predictor6","PredictorAdd6"),Er("Predictor7","PredictorAdd7"),Er("Predictor8","PredictorAdd8"),Er("Predictor9","PredictorAdd9"),Er("Predictor10","PredictorAdd10"),Er("Predictor11","PredictorAdd11"),Er("Predictor12","PredictorAdd12"),Er("Predictor13","PredictorAdd13");var kl=Be.PredictorAdd2;We("ColorIndexInverseTransform","MapARGB","32b",function(T){return T>>8&255},function(T){return T}),We("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(T){return T},function(T){return T>>8&255});var ss,pl=Be.ColorIndexInverseTransform,ml=Be.MapARGB,ya=Be.VP8LColorIndexInverseTransformAlpha,Pc=Be.MapAlpha,Ul=Be.VP8LPredictorsAdd=[];Ul.length=16,(Be.VP8LPredictors=[]).length=16,(Be.VP8LPredictorsAdd_C=[]).length=16,(Be.VP8LPredictors_C=[]).length=16;var ho,ac,gl,Dl,Rl,Nl,$o,lc,os,Eo,si,_i,Yi,bs,Pn,Lc,cc,ka,MA,Ua,Mc,kc,fo,Uc,Dc,au,yl,kA,UA=d(511),lA=d(2041),DA=d(225),Uu=d(767),Rc=0,So=lA,cA=DA,lo=Uu,pn=UA,AA=0,Nc=1,ch=2,Ac=3,lu=4,Ii=5,cu=6,RA=7,uc=8,Ql=9,Qc=10,Oc=[2,3,7],NA=[3,3,11],hc=[280,256,256,256,40],Au=[0,1,1,1,0],Du=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],uA=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],zc=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],QA=8,OA=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],dc=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],hA=null,Ru=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],dA=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],uu=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],Ah=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],jh=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],hu=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],zA=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],po=[],va=[],$n=[],mo=1,co=2,Rs=[],Zs=[];pa("UpsampleRgbLinePair",Pa,3),pa("UpsampleBgrLinePair",Xi,3),pa("UpsampleRgbaLinePair",$s,4),pa("UpsampleBgraLinePair",Pl,4),pa("UpsampleArgbLinePair",ou,4),pa("UpsampleRgba4444LinePair",Tl,2),pa("UpsampleRgb565LinePair",sA,2);var Nu=Be.UpsampleRgbLinePair,Hc=Be.UpsampleBgrLinePair,Da=Be.UpsampleRgbaLinePair,Ra=Be.UpsampleBgraLinePair,Na=Be.UpsampleArgbLinePair,HA=Be.UpsampleRgba4444LinePair,Qu=Be.UpsampleRgb565LinePair,Ol=16,Qa=1<<Ol-1,li=-227,Xn=482,zl=6,Ns=0,Xs=d(256),jc=d(256),Vc=d(256),go=d(256),du=d(Xn-li),Ou=d(Xn-li);La("YuvToRgbRow",Pa,3),La("YuvToBgrRow",Xi,3),La("YuvToRgbaRow",$s,4),La("YuvToBgraRow",Pl,4),La("YuvToArgbRow",ou,4),La("YuvToRgba4444Row",Tl,2),La("YuvToRgb565Row",sA,2);var fA=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],Oa=[0,2,8],_a=[8,7,6,4,4,2,2,2,1,1,1,1],Qs=1;this.WebPDecodeRGBA=function(T,R,$,re,ge){var we=Nc,Se=new Kt,Me=new Tr;Se.ba=Me,Me.S=we,Me.width=[Me.width],Me.height=[Me.height];var Re=Me.width,Ke=Me.height,$e=new mt;if($e==null||T==null)var kt=2;else r($e!=null),kt=Ll(T,R,$,$e.width,$e.height,$e.Pd,$e.Qd,$e.format,null);if(kt!=0?Re=0:(Re!=null&&(Re[0]=$e.width[0]),Ke!=null&&(Ke[0]=$e.height[0]),Re=1),Re){Me.width=Me.width[0],Me.height=Me.height[0],re!=null&&(re[0]=Me.width),ge!=null&&(ge[0]=Me.height);e:{if(re=new Ba,(ge=new sr).data=T,ge.w=R,ge.ha=$,ge.kd=1,R=[0],r(ge!=null),((T=Ll(ge.data,ge.w,ge.ha,null,null,null,R,null,ge))==0||T==7)&&R[0]&&(T=4),(R=T)==0){if(r(Se!=null),re.data=ge.data,re.w=ge.w+ge.offset,re.ha=ge.ha-ge.offset,re.put=xr,re.ac=Rn,re.bc=Tn,re.ma=Se,ge.xa){if((T=El())==null){Se=1;break e}if((function(Ye,Bt){var Pt=[0],Zt=[0],Ut=[0];t:for(;;){if(Ye==null)return 0;if(Bt==null)return Ye.a=2,0;if(Ye.l=Bt,Ye.a=0,Ne(Ye.m,Bt.data,Bt.w,Bt.ha),!Bn(Ye.m,Pt,Zt,Ut)){Ye.a=3;break t}if(Ye.xb=co,Bt.width=Pt[0],Bt.height=Zt[0],!ks(Pt[0],Zt[0],1,Ye,null))break t;return 1}return r(Ye.a!=0),0})(T,re)){if(re=(R=Ml(re.width,re.height,Se.Oa,Se.ba))==0){t:{re=T;r:for(;;){if(re==null){re=0;break t}if(r(re.s.yc!=null),r(re.s.Ya!=null),r(0<re.s.Wb),r(($=re.l)!=null),r((ge=$.ma)!=null),re.xb!=0){if(re.ca=ge.ba,re.tb=ge.tb,r(re.ca!=null),!oA(ge.Oa,$,Ac)){re.a=2;break r}if(!dn(re,$.width)||$.da)break r;if(($.da||Jt(re.ca.S))&&fa(),11>re.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),re.ca.f.kb.F!=null&&fa()),re.Pb&&0<re.s.ua&&re.s.vb.X==null&&!je(re.s.vb,re.s.Wa.Xa)){re.a=1;break r}re.xb=0}if(!hn(re,re.V,re.Ba,re.c,re.i,$.o,sl))break r;ge.Dc=re.Ma,re=1;break t}r(re.a!=0),re=0}re=!re}re&&(R=T.a)}else R=T.a}else{if((T=new IA)==null){Se=1;break e}if(T.Fa=ge.na,T.P=ge.P,T.qc=ge.Sa,No(T,re)){if((R=Ml(re.width,re.height,Se.Oa,Se.ba))==0){if(T.Aa=0,$=Se.Oa,r((ge=T)!=null),$!=null){if(0<(Re=0>(Re=$.Md)?0:100<Re?255:255*Re/100)){for(Ke=$e=0;4>Ke;++Ke)12>(kt=ge.pb[Ke]).lc&&(kt.ia=Re*_a[0>kt.lc?0:kt.lc]>>3),$e|=kt.ia;$e&&(alert("todo:VP8InitRandom"),ge.ia=1)}ge.Ga=$.Id,100<ge.Ga?ge.Ga=100:0>ge.Ga&&(ge.Ga=0)}(function(Ye,Bt){if(Ye==null)return 0;if(Bt==null)return Mn(Ye,2,"NULL VP8Io parameter in VP8Decode().");if(!Ye.cb&&!No(Ye,Bt))return 0;if(r(Ye.cb),Bt.ac==null||Bt.ac(Bt)){Bt.ob&&(Ye.L=0);var Pt=Oa[Ye.L];if(Ye.L==2?(Ye.yb=0,Ye.zb=0):(Ye.yb=Bt.v-Pt>>4,Ye.zb=Bt.j-Pt>>4,0>Ye.yb&&(Ye.yb=0),0>Ye.zb&&(Ye.zb=0)),Ye.Va=Bt.o+15+Pt>>4,Ye.Hb=Bt.va+15+Pt>>4,Ye.Hb>Ye.za&&(Ye.Hb=Ye.za),Ye.Va>Ye.Ub&&(Ye.Va=Ye.Ub),0<Ye.L){var Zt=Ye.ed;for(Pt=0;4>Pt;++Pt){var Ut;if(Ye.Qa.Cb){var qt=Ye.Qa.Lb[Pt];Ye.Qa.Fb||(qt+=Zt.Tb)}else qt=Zt.Tb;for(Ut=0;1>=Ut;++Ut){var Wt=Ye.gd[Pt][Ut],tr=qt;if(Zt.Pc&&(tr+=Zt.vd[0],Ut&&(tr+=Zt.od[0])),0<(tr=0>tr?0:63<tr?63:tr)){var er=tr;0<Zt.wb&&(er=4<Zt.wb?er>>2:er>>1)>9-Zt.wb&&(er=9-Zt.wb),1>er&&(er=1),Wt.dd=er,Wt.tc=2*tr+er,Wt.ld=40<=tr?2:15<=tr?1:0}else Wt.tc=0;Wt.La=Ut}}}Pt=0}else Mn(Ye,6,"Frame setup failed"),Pt=Ye.a;if(Pt=Pt==0){if(Pt){Ye.$c=0,0<Ye.Aa||(Ye.Ic=Qs);t:{Pt=Ye.Ic,Zt=4*(er=Ye.za);var sn=32*er,zr=er+1,Cn=0<Ye.L?er*(0<Ye.Aa?2:1):0,Zr=(Ye.Aa==2?2:1)*er;if((Wt=Zt+832+(Ut=3*(16*Pt+Oa[Ye.L])/2*sn)+(qt=Ye.Fa!=null&&0<Ye.Fa.length?Ye.Kc.c*Ye.Kc.i:0))!=Wt)Pt=0;else{if(Wt>Ye.Vb){if(Ye.Vb=0,Ye.Ec=d(Wt),Ye.Fc=0,Ye.Ec==null){Pt=Mn(Ye,1,"no memory during frame initialization.");break t}Ye.Vb=Wt}Wt=Ye.Ec,tr=Ye.Fc,Ye.Ac=Wt,Ye.Bc=tr,tr+=Zt,Ye.Gd=m(sn,Us),Ye.Hd=0,Ye.rb=m(zr+1,jn),Ye.sb=1,Ye.wa=Cn?m(Cn,Ci):null,Ye.Y=0,Ye.D.Nb=0,Ye.D.wa=Ye.wa,Ye.D.Y=Ye.Y,0<Ye.Aa&&(Ye.D.Y+=er),r(!0),Ye.oc=Wt,Ye.pc=tr,tr+=832,Ye.ya=m(Zr,ll),Ye.aa=0,Ye.D.ya=Ye.ya,Ye.D.aa=Ye.aa,Ye.Aa==2&&(Ye.D.aa+=er),Ye.R=16*er,Ye.B=8*er,er=(sn=Oa[Ye.L])*Ye.R,sn=sn/2*Ye.B,Ye.sa=Wt,Ye.ta=tr+er,Ye.qa=Ye.sa,Ye.ra=Ye.ta+16*Pt*Ye.R+sn,Ye.Ha=Ye.qa,Ye.Ia=Ye.ra+8*Pt*Ye.B+sn,Ye.$c=0,tr+=Ut,Ye.mb=qt?Wt:null,Ye.nb=qt?tr:null,r(tr+qt<=Ye.Fc+Ye.Vb),Fc(Ye),u(Ye.Ac,Ye.Bc,0,Zt),Pt=1}}if(Pt){if(Bt.ka=0,Bt.y=Ye.sa,Bt.O=Ye.ta,Bt.f=Ye.qa,Bt.N=Ye.ra,Bt.ea=Ye.Ha,Bt.Vd=Ye.Ia,Bt.fa=Ye.R,Bt.Rc=Ye.B,Bt.F=null,Bt.J=0,!Rc){for(Pt=-255;255>=Pt;++Pt)UA[255+Pt]=0>Pt?-Pt:Pt;for(Pt=-1020;1020>=Pt;++Pt)lA[1020+Pt]=-128>Pt?-128:127<Pt?127:Pt;for(Pt=-112;112>=Pt;++Pt)DA[112+Pt]=-16>Pt?-16:15<Pt?15:Pt;for(Pt=-255;510>=Pt;++Pt)Uu[255+Pt]=0>Pt?0:255<Pt?255:Pt;Rc=1}$o=Fl,lc=rc,Eo=Ca,si=TA,_i=Kn,os=iA,Yi=Ei,bs=ao,Pn=ye,Lc=tt,cc=da,ka=V,MA=gt,Ua=It,Mc=Vo,kc=En,fo=mn,Uc=Ia,va[0]=ii,va[1]=Il,va[2]=Jn,va[3]=cn,va[4]=_s,va[5]=uo,va[6]=Wi,va[7]=ws,va[8]=Fa,va[9]=Sa,po[0]=Ea,po[1]=Ic,po[2]=ca,po[3]=Al,po[4]=zo,po[5]=Ho,po[6]=vs,$n[0]=ic,$n[1]=PA,$n[2]=ti,$n[3]=Aa,$n[4]=ul,$n[5]=qs,$n[6]=jo,Pt=1}else Pt=0}Pt&&(Pt=(function(On,Ri){for(On.M=0;On.M<On.Va;++On.M){var Sn,Hr=On.Jc[On.M&On.Xb],Fr=On.m,pi=On;for(Sn=0;Sn<pi.za;++Sn){var Mr=Fr,zn=pi,mi=zn.Ac,as=zn.Bc+4*Sn,ls=zn.zc,Ni=zn.ya[zn.aa+Sn];if(zn.Qa.Bb?Ni.$b=Tt(Mr,zn.Pa.jb[0])?2+Tt(Mr,zn.Pa.jb[2]):Tt(Mr,zn.Pa.jb[1]):Ni.$b=0,zn.kc&&(Ni.Ad=Tt(Mr,zn.Bd)),Ni.Za=!Tt(Mr,145)+0,Ni.Za){var Bs=Ni.Ob,Cs=0;for(zn=0;4>zn;++zn){var Qi,Fn=ls[0+zn];for(Qi=0;4>Qi;++Qi){Fn=jh[mi[as+Qi]][Fn];for(var Yn=uu[Tt(Mr,Fn[0])];0<Yn;)Yn=uu[2*Yn+Tt(Mr,Fn[Yn])];Fn=-Yn,mi[as+Qi]=Fn}a(Bs,Cs,mi,as,4),Cs+=4,ls[0+zn]=Fn}}else Fn=Tt(Mr,156)?Tt(Mr,128)?1:3:Tt(Mr,163)?2:0,Ni.Ob[0]=Fn,u(mi,as,Fn,4),u(ls,0,Fn,4);Ni.Dd=Tt(Mr,142)?Tt(Mr,114)?Tt(Mr,183)?1:3:2:0}if(pi.m.Ka)return Mn(On,7,"Premature end-of-partition0 encountered.");for(;On.ja<On.za;++On.ja){if(pi=Hr,Mr=(Fr=On).rb[Fr.sb-1],mi=Fr.rb[Fr.sb+Fr.ja],Sn=Fr.ya[Fr.aa+Fr.ja],as=Fr.kc?Sn.Ad:0)Mr.la=mi.la=0,Sn.Za||(Mr.Na=mi.Na=0),Sn.Hc=0,Sn.Gc=0,Sn.ia=0;else{var yr,br;if(Mr=mi,mi=pi,as=Fr.Pa.Xc,ls=Fr.ya[Fr.aa+Fr.ja],Ni=Fr.pb[ls.$b],zn=ls.ad,Bs=0,Cs=Fr.rb[Fr.sb-1],Fn=Qi=0,u(zn,Bs,0,384),ls.Za)var Ti=0,ji=as[3];else{Yn=d(16);var ei=Mr.Na+Cs.Na;if(ei=hA(mi,as[1],ei,Ni.Eb,0,Yn,0),Mr.Na=Cs.Na=(0<ei)+0,1<ei)$o(Yn,0,zn,Bs);else{var ci=Yn[0]+3>>3;for(Yn=0;256>Yn;Yn+=16)zn[Bs+Yn]=ci}Ti=1,ji=as[0]}var Nn=15&Mr.la,wi=15&Cs.la;for(Yn=0;4>Yn;++Yn){var Es=1&wi;for(ci=br=0;4>ci;++ci)Nn=Nn>>1|(Es=(ei=hA(mi,ji,ei=Es+(1&Nn),Ni.Sc,Ti,zn,Bs))>Ti)<<7,br=br<<2|(3<ei?3:1<ei?2:zn[Bs+0]!=0),Bs+=16;Nn>>=4,wi=wi>>1|Es<<7,Qi=(Qi<<8|br)>>>0}for(ji=Nn,Ti=wi>>4,yr=0;4>yr;yr+=2){for(br=0,Nn=Mr.la>>4+yr,wi=Cs.la>>4+yr,Yn=0;2>Yn;++Yn){for(Es=1&wi,ci=0;2>ci;++ci)ei=Es+(1&Nn),Nn=Nn>>1|(Es=0<(ei=hA(mi,as[2],ei,Ni.Qc,0,zn,Bs)))<<3,br=br<<2|(3<ei?3:1<ei?2:zn[Bs+0]!=0),Bs+=16;Nn>>=2,wi=wi>>1|Es<<5}Fn|=br<<4*yr,ji|=Nn<<4<<yr,Ti|=(240&wi)<<yr}Mr.la=ji,Cs.la=Ti,ls.Hc=Qi,ls.Gc=Fn,ls.ia=43690&Fn?0:Ni.ia,as=!(Qi|Fn)}if(0<Fr.L&&(Fr.wa[Fr.Y+Fr.ja]=Fr.gd[Sn.$b][Sn.Za],Fr.wa[Fr.Y+Fr.ja].La|=!as),pi.Ka)return Mn(On,7,"Premature end-of-file encountered.")}if(Fc(On),Fr=Ri,pi=1,Sn=(Hr=On).D,Mr=0<Hr.L&&Hr.M>=Hr.zb&&Hr.M<=Hr.Va,Hr.Aa==0)t:{if(Sn.M=Hr.M,Sn.uc=Mr,Bo(Hr,Sn),pi=1,Sn=(br=Hr.D).Nb,Mr=(Fn=Oa[Hr.L])*Hr.R,mi=Fn/2*Hr.B,Yn=16*Sn*Hr.R,ci=8*Sn*Hr.B,as=Hr.sa,ls=Hr.ta-Mr+Yn,Ni=Hr.qa,zn=Hr.ra-mi+ci,Bs=Hr.Ha,Cs=Hr.Ia-mi+ci,wi=(Nn=br.M)==0,Qi=Nn>=Hr.Va-1,Hr.Aa==2&&Bo(Hr,br),br.uc)for(Es=(ei=Hr).D.M,r(ei.D.uc),br=ei.yb;br<ei.Hb;++br){Ti=br,ji=Es;var Ys=(Fo=(Ji=ei).D).Nb;yr=Ji.R;var Fo=Fo.wa[Fo.Y+Ti],Mi=Ji.sa,In=Ji.ta+16*Ys*yr+16*Ti,Vn=Fo.dd,xi=Fo.tc;if(xi!=0)if(r(3<=xi),Ji.L==1)0<Ti&&kc(Mi,In,yr,xi+4),Fo.La&&Uc(Mi,In,yr,xi),0<ji&&Mc(Mi,In,yr,xi+4),Fo.La&&fo(Mi,In,yr,xi);else{var Ss=Ji.B,Io=Ji.qa,Js=Ji.ra+8*Ys*Ss+8*Ti,Fs=Ji.Ha,Ji=Ji.Ia+8*Ys*Ss+8*Ti;Ys=Fo.ld,0<Ti&&(bs(Mi,In,yr,xi+4,Vn,Ys),Lc(Io,Js,Fs,Ji,Ss,xi+4,Vn,Ys)),Fo.La&&(ka(Mi,In,yr,xi,Vn,Ys),Ua(Io,Js,Fs,Ji,Ss,xi,Vn,Ys)),0<ji&&(Yi(Mi,In,yr,xi+4,Vn,Ys),Pn(Io,Js,Fs,Ji,Ss,xi+4,Vn,Ys)),Fo.La&&(cc(Mi,In,yr,xi,Vn,Ys),MA(Io,Js,Fs,Ji,Ss,xi,Vn,Ys))}}if(Hr.ia&&alert("todo:DitherRow"),Fr.put!=null){if(br=16*Nn,Nn=16*(Nn+1),wi?(Fr.y=Hr.sa,Fr.O=Hr.ta+Yn,Fr.f=Hr.qa,Fr.N=Hr.ra+ci,Fr.ea=Hr.Ha,Fr.W=Hr.Ia+ci):(br-=Fn,Fr.y=as,Fr.O=ls,Fr.f=Ni,Fr.N=zn,Fr.ea=Bs,Fr.W=Cs),Qi||(Nn-=Fn),Nn>Fr.o&&(Nn=Fr.o),Fr.F=null,Fr.J=null,Hr.Fa!=null&&0<Hr.Fa.length&&br<Nn&&(Fr.J=Si(Hr,Fr,br,Nn-br),Fr.F=Hr.mb,Fr.F==null&&Fr.F.length==0)){pi=Mn(Hr,3,"Could not decode alpha data.");break t}br<Fr.j&&(Fn=Fr.j-br,br=Fr.j,r(!(1&Fn)),Fr.O+=Hr.R*Fn,Fr.N+=Hr.B*(Fn>>1),Fr.W+=Hr.B*(Fn>>1),Fr.F!=null&&(Fr.J+=Fr.width*Fn)),br<Nn&&(Fr.O+=Fr.v,Fr.N+=Fr.v>>1,Fr.W+=Fr.v>>1,Fr.F!=null&&(Fr.J+=Fr.v),Fr.ka=br-Fr.j,Fr.U=Fr.va-Fr.v,Fr.T=Nn-br,pi=Fr.put(Fr))}Sn+1!=Hr.Ic||Qi||(a(Hr.sa,Hr.ta-Mr,as,ls+16*Hr.R,Mr),a(Hr.qa,Hr.ra-mi,Ni,zn+8*Hr.B,mi),a(Hr.Ha,Hr.Ia-mi,Bs,Cs+8*Hr.B,mi))}if(!pi)return Mn(On,6,"Output aborted.")}return 1})(Ye,Bt)),Bt.bc!=null&&Bt.bc(Bt),Pt&=1}return Pt?(Ye.cb=0,Pt):0})(T,re)||(R=T.a)}}else R=T.a}R==0&&Se.Oa!=null&&Se.Oa.fd&&(R=aA(Se.ba))}Se=R}we=Se!=0?null:11>we?Me.f.RGBA.eb:Me.f.kb.y}else we=null;return we};var jA=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function E(Be,Je){for(var Ae="",me=0;me<4;me++)Ae+=String.fromCharCode(Be[Je++]);return Ae}function I(Be,Je){return Be[Je+0]|Be[Je+1]<<8}function D(Be,Je){return(Be[Je+0]|Be[Je+1]<<8|Be[Je+2]<<16)>>>0}function O(Be,Je){return(Be[Je+0]|Be[Je+1]<<8|Be[Je+2]<<16|Be[Je+3]<<24)>>>0}new w;var P=[0],W=[0],z=[],H=new w,Z=e,se=(function(Be,Je){var Ae={},me=0,Te=!1,Ie=0,ut=0;if(Ae.frames=[],!(function(ie,Ee){for(var Le=0;Le<4;Le++)if(ie[Ee+Le]!="RIFF".charCodeAt(Le))return!0;return!1})(Be,Je)){for(O(Be,Je+=4),Je+=8;Je<Be.length;){var it=E(Be,Je),ot=O(Be,Je+=4);Je+=4;var ke=ot+(1&ot);switch(it){case"VP8 ":case"VP8L":Ae.frames[me]===void 0&&(Ae.frames[me]={}),(Ce=Ae.frames[me]).src_off=Te?ut:Je-8,Ce.src_size=Ie+ot+8,me++,Te&&(Te=!1,Ie=0,ut=0);break;case"VP8X":(Ce=Ae.header={}).feature_flags=Be[Je];var Ne=Je+4;Ce.canvas_width=1+D(Be,Ne),Ne+=3,Ce.canvas_height=1+D(Be,Ne),Ne+=3;break;case"ALPH":Te=!0,Ie=ke+8,ut=Je-8;break;case"ANIM":(Ce=Ae.header).bgcolor=O(Be,Je),Ne=Je+4,Ce.loop_count=I(Be,Ne),Ne+=2;break;case"ANMF":var yt,Ce;(Ce=Ae.frames[me]={}).offset_x=2*D(Be,Je),Je+=3,Ce.offset_y=2*D(Be,Je),Je+=3,Ce.width=1+D(Be,Je),Je+=3,Ce.height=1+D(Be,Je),Je+=3,Ce.duration=D(Be,Je),Je+=3,yt=Be[Je++],Ce.dispose=1&yt,Ce.blend=yt>>1&1}it!="ANMF"&&(Je+=ke)}return Ae}})(Z,0);se.response=Z,se.rgbaoutput=!0,se.dataurl=!1;var ce=se.header?se.header:null,de=se.frames?se.frames:null;if(ce){ce.loop_counter=ce.loop_count,P=[ce.canvas_height],W=[ce.canvas_width];for(var Pe=0;Pe<de.length&&de[Pe].blend!=0;Pe++);}var He=de[0],Xe=H.WebPDecodeRGBA(Z,He.src_off,He.src_size,W,P);He.rgba=Xe,He.imgwidth=W[0],He.imgheight=P[0];for(var Qe=0;Qe<W[0]*P[0]*4;Qe++)z[Qe]=Xe[Qe];return this.width=W,this.height=P,this.data=z,this}(function(e){var r,i,a,u,d,m,o,w,E,I=function(ie){return ie=ie||{},this.isStrokeTransparent=ie.isStrokeTransparent||!1,this.strokeOpacity=ie.strokeOpacity||1,this.strokeStyle=ie.strokeStyle||"#000000",this.fillStyle=ie.fillStyle||"#000000",this.isFillTransparent=ie.isFillTransparent||!1,this.fillOpacity=ie.fillOpacity||1,this.font=ie.font||"10px sans-serif",this.textBaseline=ie.textBaseline||"alphabetic",this.textAlign=ie.textAlign||"left",this.lineWidth=ie.lineWidth||1,this.lineJoin=ie.lineJoin||"miter",this.lineCap=ie.lineCap||"butt",this.path=ie.path||[],this.transform=ie.transform!==void 0?ie.transform.clone():new w,this.globalCompositeOperation=ie.globalCompositeOperation||"normal",this.globalAlpha=ie.globalAlpha||1,this.clip_path=ie.clip_path||[],this.currentPoint=ie.currentPoint||new m,this.miterLimit=ie.miterLimit||10,this.lastPoint=ie.lastPoint||new m,this.lineDashOffset=ie.lineDashOffset||0,this.lineDash=ie.lineDash||[],this.margin=ie.margin||[0,0,0,0],this.prevPageLastElemOffset=ie.prevPageLastElemOffset||0,this.ignoreClearRect=typeof ie.ignoreClearRect!="boolean"||ie.ignoreClearRect,this};e.events.push(["initialized",function(){this.context2d=new D(this),r=this.internal.f2,i=this.internal.getCoordinateString,a=this.internal.getVerticalCoordinateString,u=this.internal.getHorizontalCoordinate,d=this.internal.getVerticalCoordinate,m=this.internal.Point,o=this.internal.Rectangle,w=this.internal.Matrix,E=new I}]);var D=function(ie){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var Ee=ie;Object.defineProperty(this,"pdf",{get:function(){return Ee}});var Le=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return Le},set:function(je){Le=!!je}});var Ve=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return Ve},set:function(je){Ve=!!je}});var nt=0;Object.defineProperty(this,"posX",{get:function(){return nt},set:function(je){isNaN(je)||(nt=je)}});var et=0;Object.defineProperty(this,"posY",{get:function(){return et},set:function(je){isNaN(je)||(et=je)}}),Object.defineProperty(this,"margin",{get:function(){return E.margin},set:function(je){var mr;typeof je=="number"?mr=[je,je,je,je]:((mr=new Array(4))[0]=je[0],mr[1]=je.length>=2?je[1]:mr[0],mr[2]=je.length>=3?je[2]:mr[0],mr[3]=je.length>=4?je[3]:mr[1]),E.margin=mr}});var _t=!1;Object.defineProperty(this,"autoPaging",{get:function(){return _t},set:function(je){_t=je}});var St=0;Object.defineProperty(this,"lastBreak",{get:function(){return St},set:function(je){St=je}});var Tt=[];Object.defineProperty(this,"pageBreaks",{get:function(){return Tt},set:function(je){Tt=je}}),Object.defineProperty(this,"ctx",{get:function(){return E},set:function(je){je instanceof I&&(E=je)}}),Object.defineProperty(this,"path",{get:function(){return E.path},set:function(je){E.path=je}});var Gt=[];Object.defineProperty(this,"ctxStack",{get:function(){return Gt},set:function(je){Gt=je}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(je){var mr;mr=O(je),this.ctx.fillStyle=mr.style,this.ctx.isFillTransparent=mr.a===0,this.ctx.fillOpacity=mr.a,this.pdf.setFillColor(mr.r,mr.g,mr.b,{a:mr.a}),this.pdf.setTextColor(mr.r,mr.g,mr.b,{a:mr.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(je){var mr=O(je);this.ctx.strokeStyle=mr.style,this.ctx.isStrokeTransparent=mr.a===0,this.ctx.strokeOpacity=mr.a,mr.a===0?this.pdf.setDrawColor(255,255,255):(mr.a,this.pdf.setDrawColor(mr.r,mr.g,mr.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(je){["butt","round","square"].indexOf(je)!==-1&&(this.ctx.lineCap=je,this.pdf.setLineCap(je))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(je){isNaN(je)||(this.ctx.lineWidth=je,this.pdf.setLineWidth(je))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(je){["bevel","round","miter"].indexOf(je)!==-1&&(this.ctx.lineJoin=je,this.pdf.setLineJoin(je))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(je){isNaN(je)||(this.ctx.miterLimit=je,this.pdf.setMiterLimit(je))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(je){this.ctx.textBaseline=je}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(je){["right","end","center","left","start"].indexOf(je)!==-1&&(this.ctx.textAlign=je)}});var or=null,Ar=null,_r=null;Object.defineProperty(this,"fontFaces",{get:function(){return _r},set:function(je){or=null,Ar=null,_r=je}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(je){var mr;if(this.ctx.font=je,(mr=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z0-9]+?)\s*$/i.exec(je))!==null){var kr=mr[1];mr[2];var Vr=mr[3],lr=mr[4];mr[5];var Gr=mr[6],Er=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(lr)[2];lr=Math.floor(Er==="px"?parseFloat(lr)*this.pdf.internal.scaleFactor:Er==="em"?parseFloat(lr)*this.pdf.getFontSize():parseFloat(lr)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(lr);var Nr=(function(We){var Ct,vt,ct=[],bt=We.trim();if(bt==="")return J1;if(bt in qC)return[qC[bt]];for(;bt!=="";){switch(vt=null,Ct=(bt=WC(bt)).charAt(0)){case'"':case"'":vt=L7(bt.substring(1),Ct);break;default:vt=M7(bt)}if(vt===null||(ct.push(vt[0]),(bt=WC(vt[1]))!==""&&bt.charAt(0)!==","))return J1;bt=bt.replace(/^,/,"")}return ct})(Gr);if(this.fontFaces){var Dr=(function(We,Ct){var vt=We.getFontList(),ct=JSON.stringify(vt);if(or===null||Ar!==ct){var bt=(function(Ht){var Ft=[];return Object.keys(Ht).forEach(function(cr){Ht[cr].forEach(function(Jt){var fr=null;switch(Jt){case"bold":fr={family:cr,weight:"bold"};break;case"italic":fr={family:cr,style:"italic"};break;case"bolditalic":fr={family:cr,weight:"bold",style:"italic"};break;case"":case"normal":fr={family:cr}}fr!==null&&(fr.ref={name:cr,style:Jt},Ft.push(fr))})}),Ft})(vt);or=(function(Ht){for(var Ft={},cr=0;cr<Ht.length;++cr){var Jt=Y1(Ht[cr]),fr=Jt.family,rn=Jt.stretch,Tr=Jt.style,mt=Jt.weight;Ft[fr]=Ft[fr]||{},Ft[fr][rn]=Ft[fr][rn]||{},Ft[fr][rn][Tr]=Ft[fr][rn][Tr]||{},Ft[fr][rn][Tr][mt]=Jt}return Ft})(bt.concat(Ct)),Ar=ct}return or})(this.pdf,this.fontFaces),Dn=Nr.map(function(We){return{family:We,stretch:"normal",weight:Vr,style:kr}}),un=(function(We,Ct,vt){for(var ct=(vt=vt||{}).defaultFontFamily||"times",bt=Object.assign({},P7,vt.genericFontFamilies||{}),Ht=null,Ft=null,cr=0;cr<Ct.length;++cr)if(bt[(Ht=Y1(Ct[cr])).family]&&(Ht.family=bt[Ht.family]),We.hasOwnProperty(Ht.family)){Ft=We[Ht.family];break}if(!(Ft=Ft||We[ct]))throw new Error("Could not find a font-family for the rule '"+$C(Ht)+"' and default family '"+ct+"'.");if(Ft=(function(Jt,fr){if(fr[Jt])return fr[Jt];var rn=yw[Jt],Tr=rn<=yw.normal?-1:1,mt=KC(fr,MT,rn,Tr);if(!mt)throw new Error("Could not find a matching font-stretch value for "+Jt);return mt})(Ht.stretch,Ft),Ft=(function(Jt,fr){if(fr[Jt])return fr[Jt];for(var rn=LT[Jt],Tr=0;Tr<rn.length;++Tr)if(fr[rn[Tr]])return fr[rn[Tr]];throw new Error("Could not find a matching font-style for "+Jt)})(Ht.style,Ft),!(Ft=(function(Jt,fr){if(fr[Jt])return fr[Jt];if(Jt===400&&fr[500])return fr[500];if(Jt===500&&fr[400])return fr[400];var rn=T7[Jt],Tr=KC(fr,kT,rn,Jt<400?-1:1);if(!Tr)throw new Error("Could not find a matching font-weight for value "+Jt);return Tr})(Ht.weight,Ft)))throw new Error("Failed to resolve a font for the rule '"+$C(Ht)+"'.");return Ft})(Dr,Dn);this.pdf.setFont(un.ref.name,un.ref.style)}else{var pt="";(Vr==="bold"||parseInt(Vr,10)>=700||kr==="bold")&&(pt="bold"),kr==="italic"&&(pt+="italic"),pt.length===0&&(pt="normal");for(var fe="",pe={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},ve=0;ve<Nr.length;ve++){if(this.pdf.internal.getFont(Nr[ve],pt,{noFallback:!0,disableWarning:!0})!==void 0){fe=Nr[ve];break}if(pt==="bolditalic"&&this.pdf.internal.getFont(Nr[ve],"bold",{noFallback:!0,disableWarning:!0})!==void 0)fe=Nr[ve],pt="bold";else if(this.pdf.internal.getFont(Nr[ve],"normal",{noFallback:!0,disableWarning:!0})!==void 0){fe=Nr[ve],pt="normal";break}}if(fe===""){for(var qe=0;qe<Nr.length;qe++)if(pe[Nr[qe]]){fe=pe[Nr[qe]];break}}fe=fe===""?"Times":fe,this.pdf.setFont(fe,pt)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(je){this.ctx.globalCompositeOperation=je}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(je){this.ctx.globalAlpha=je}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(je){this.ctx.lineDashOffset=je,Ce.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(je){this.ctx.lineDash=je,Ce.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(je){this.ctx.ignoreClearRect=!!je}})};D.prototype.setLineDash=function(ie){this.lineDash=ie},D.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},D.prototype.fill=function(){de.call(this,"fill",!1)},D.prototype.stroke=function(){de.call(this,"stroke",!1)},D.prototype.beginPath=function(){this.path=[{type:"begin"}]},D.prototype.moveTo=function(ie,Ee){if(isNaN(ie)||isNaN(Ee))throw gs.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var Le=this.ctx.transform.applyToPoint(new m(ie,Ee));this.path.push({type:"mt",x:Le.x,y:Le.y}),this.ctx.lastPoint=new m(ie,Ee)},D.prototype.closePath=function(){var ie=new m(0,0),Ee=0;for(Ee=this.path.length-1;Ee!==-1;Ee--)if(this.path[Ee].type==="begin"&&rs(this.path[Ee+1])==="object"&&typeof this.path[Ee+1].x=="number"){ie=new m(this.path[Ee+1].x,this.path[Ee+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new m(ie.x,ie.y)},D.prototype.lineTo=function(ie,Ee){if(isNaN(ie)||isNaN(Ee))throw gs.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var Le=this.ctx.transform.applyToPoint(new m(ie,Ee));this.path.push({type:"lt",x:Le.x,y:Le.y}),this.ctx.lastPoint=new m(Le.x,Le.y)},D.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),de.call(this,null,!0)},D.prototype.quadraticCurveTo=function(ie,Ee,Le,Ve){if(isNaN(Le)||isNaN(Ve)||isNaN(ie)||isNaN(Ee))throw gs.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var nt=this.ctx.transform.applyToPoint(new m(Le,Ve)),et=this.ctx.transform.applyToPoint(new m(ie,Ee));this.path.push({type:"qct",x1:et.x,y1:et.y,x:nt.x,y:nt.y}),this.ctx.lastPoint=new m(nt.x,nt.y)},D.prototype.bezierCurveTo=function(ie,Ee,Le,Ve,nt,et){if(isNaN(nt)||isNaN(et)||isNaN(ie)||isNaN(Ee)||isNaN(Le)||isNaN(Ve))throw gs.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var _t=this.ctx.transform.applyToPoint(new m(nt,et)),St=this.ctx.transform.applyToPoint(new m(ie,Ee)),Tt=this.ctx.transform.applyToPoint(new m(Le,Ve));this.path.push({type:"bct",x1:St.x,y1:St.y,x2:Tt.x,y2:Tt.y,x:_t.x,y:_t.y}),this.ctx.lastPoint=new m(_t.x,_t.y)},D.prototype.arc=function(ie,Ee,Le,Ve,nt,et){if(isNaN(ie)||isNaN(Ee)||isNaN(Le)||isNaN(Ve)||isNaN(nt))throw gs.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(et=!!et,!this.ctx.transform.isIdentity){var _t=this.ctx.transform.applyToPoint(new m(ie,Ee));ie=_t.x,Ee=_t.y;var St=this.ctx.transform.applyToPoint(new m(0,Le)),Tt=this.ctx.transform.applyToPoint(new m(0,0));Le=Math.sqrt(Math.pow(St.x-Tt.x,2)+Math.pow(St.y-Tt.y,2))}Math.abs(nt-Ve)>=2*Math.PI&&(Ve=0,nt=2*Math.PI),this.path.push({type:"arc",x:ie,y:Ee,radius:Le,startAngle:Ve,endAngle:nt,counterclockwise:et})},D.prototype.arcTo=function(ie,Ee,Le,Ve,nt){throw new Error("arcTo not implemented.")},D.prototype.rect=function(ie,Ee,Le,Ve){if(isNaN(ie)||isNaN(Ee)||isNaN(Le)||isNaN(Ve))throw gs.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(ie,Ee),this.lineTo(ie+Le,Ee),this.lineTo(ie+Le,Ee+Ve),this.lineTo(ie,Ee+Ve),this.lineTo(ie,Ee),this.lineTo(ie+Le,Ee),this.lineTo(ie,Ee)},D.prototype.fillRect=function(ie,Ee,Le,Ve){if(isNaN(ie)||isNaN(Ee)||isNaN(Le)||isNaN(Ve))throw gs.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!P.call(this)){var nt={};this.lineCap!=="butt"&&(nt.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(nt.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(ie,Ee,Le,Ve),this.fill(),nt.hasOwnProperty("lineCap")&&(this.lineCap=nt.lineCap),nt.hasOwnProperty("lineJoin")&&(this.lineJoin=nt.lineJoin)}},D.prototype.strokeRect=function(ie,Ee,Le,Ve){if(isNaN(ie)||isNaN(Ee)||isNaN(Le)||isNaN(Ve))throw gs.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");W.call(this)||(this.beginPath(),this.rect(ie,Ee,Le,Ve),this.stroke())},D.prototype.clearRect=function(ie,Ee,Le,Ve){if(isNaN(ie)||isNaN(Ee)||isNaN(Le)||isNaN(Ve))throw gs.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(ie,Ee,Le,Ve))},D.prototype.save=function(ie){ie=typeof ie!="boolean"||ie;for(var Ee=this.pdf.internal.getCurrentPageInfo().pageNumber,Le=0;Le<this.pdf.internal.getNumberOfPages();Le++)this.pdf.setPage(Le+1),this.pdf.internal.out("q");if(this.pdf.setPage(Ee),ie){this.ctx.fontSize=this.pdf.internal.getFontSize();var Ve=new I(this.ctx);this.ctxStack.push(this.ctx),this.ctx=Ve}},D.prototype.restore=function(ie){ie=typeof ie!="boolean"||ie;for(var Ee=this.pdf.internal.getCurrentPageInfo().pageNumber,Le=0;Le<this.pdf.internal.getNumberOfPages();Le++)this.pdf.setPage(Le+1),this.pdf.internal.out("Q");this.pdf.setPage(Ee),ie&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},D.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var O=function(ie){var Ee,Le,Ve,nt;if(ie.isCanvasGradient===!0&&(ie=ie.getColor()),!ie)return{r:0,g:0,b:0,a:0,style:ie};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(ie))Ee=0,Le=0,Ve=0,nt=0;else{var et=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(ie);if(et!==null)Ee=parseInt(et[1]),Le=parseInt(et[2]),Ve=parseInt(et[3]),nt=1;else if((et=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(ie))!==null)Ee=parseInt(et[1]),Le=parseInt(et[2]),Ve=parseInt(et[3]),nt=parseFloat(et[4]);else{if(nt=1,typeof ie=="string"&&ie.charAt(0)!=="#"){var _t=new CT(ie);ie=_t.ok?_t.toHex():"#000000"}ie.length===4?(Ee=ie.substring(1,2),Ee+=Ee,Le=ie.substring(2,3),Le+=Le,Ve=ie.substring(3,4),Ve+=Ve):(Ee=ie.substring(1,3),Le=ie.substring(3,5),Ve=ie.substring(5,7)),Ee=parseInt(Ee,16),Le=parseInt(Le,16),Ve=parseInt(Ve,16)}}return{r:Ee,g:Le,b:Ve,a:nt,style:ie}},P=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},W=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};D.prototype.fillText=function(ie,Ee,Le,Ve){if(isNaN(Ee)||isNaN(Le)||typeof ie!="string")throw gs.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(Ve=isNaN(Ve)?void 0:Ve,!P.call(this)){var nt=ke(this.ctx.transform.rotation),et=this.ctx.transform.scaleX;me.call(this,{text:ie,x:Ee,y:Le,scale:et,angle:nt,align:this.textAlign,maxWidth:Ve})}},D.prototype.strokeText=function(ie,Ee,Le,Ve){if(isNaN(Ee)||isNaN(Le)||typeof ie!="string")throw gs.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!W.call(this)){Ve=isNaN(Ve)?void 0:Ve;var nt=ke(this.ctx.transform.rotation),et=this.ctx.transform.scaleX;me.call(this,{text:ie,x:Ee,y:Le,scale:et,renderingMode:"stroke",angle:nt,align:this.textAlign,maxWidth:Ve})}},D.prototype.measureText=function(ie){if(typeof ie!="string")throw gs.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var Ee=this.pdf,Le=this.pdf.internal.scaleFactor,Ve=Ee.internal.getFontSize(),nt=Ee.getStringUnitWidth(ie)*Ve/Ee.internal.scaleFactor;return new function(et){var _t=(et=et||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return _t}}),this}({width:nt*=Math.round(96*Le/72*1e4)/1e4})},D.prototype.scale=function(ie,Ee){if(isNaN(ie)||isNaN(Ee))throw gs.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var Le=new w(ie,0,0,Ee,0,0);this.ctx.transform=this.ctx.transform.multiply(Le)},D.prototype.rotate=function(ie){if(isNaN(ie))throw gs.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var Ee=new w(Math.cos(ie),Math.sin(ie),-Math.sin(ie),Math.cos(ie),0,0);this.ctx.transform=this.ctx.transform.multiply(Ee)},D.prototype.translate=function(ie,Ee){if(isNaN(ie)||isNaN(Ee))throw gs.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var Le=new w(1,0,0,1,ie,Ee);this.ctx.transform=this.ctx.transform.multiply(Le)},D.prototype.transform=function(ie,Ee,Le,Ve,nt,et){if(isNaN(ie)||isNaN(Ee)||isNaN(Le)||isNaN(Ve)||isNaN(nt)||isNaN(et))throw gs.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var _t=new w(ie,Ee,Le,Ve,nt,et);this.ctx.transform=this.ctx.transform.multiply(_t)},D.prototype.setTransform=function(ie,Ee,Le,Ve,nt,et){ie=isNaN(ie)?1:ie,Ee=isNaN(Ee)?0:Ee,Le=isNaN(Le)?0:Le,Ve=isNaN(Ve)?1:Ve,nt=isNaN(nt)?0:nt,et=isNaN(et)?0:et,this.ctx.transform=new w(ie,Ee,Le,Ve,nt,et)};var z=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};D.prototype.drawImage=function(ie,Ee,Le,Ve,nt,et,_t,St,Tt){var Gt=this.pdf.getImageProperties(ie),or=1,Ar=1,_r=1,je=1;Ve!==void 0&&St!==void 0&&(_r=St/Ve,je=Tt/nt,or=Gt.width/Ve*St/Ve,Ar=Gt.height/nt*Tt/nt),et===void 0&&(et=Ee,_t=Le,Ee=0,Le=0),Ve!==void 0&&St===void 0&&(St=Ve,Tt=nt),Ve===void 0&&St===void 0&&(St=Gt.width,Tt=Gt.height);var mr=this.ctx.transform.decompose(),kr=ke(mr.rotate.shx),Vr=new w,lr=(Vr=(Vr=(Vr=Vr.multiply(mr.translate)).multiply(mr.skew)).multiply(mr.scale)).applyToRectangle(new o(et-Ee*_r,_t-Le*je,Ve*or,nt*Ar));if(this.autoPaging){for(var Gr,Er=H.call(this,lr),Nr=[],Dr=0;Dr<Er.length;Dr+=1)Nr.indexOf(Er[Dr])===-1&&Nr.push(Er[Dr]);ce(Nr);for(var Dn=Nr[0],un=Nr[Nr.length-1],pt=Dn;pt<un+1;pt++){this.pdf.setPage(pt);var fe=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],pe=pt===1?this.posY+this.margin[0]:this.margin[0],ve=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],qe=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],We=pt===1?0:ve+(pt-2)*qe;if(this.ctx.clip_path.length!==0){var Ct=this.path;Gr=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=se(Gr,this.posX+this.margin[3],-We+pe+this.ctx.prevPageLastElemOffset),Pe.call(this,"fill",!0),this.path=Ct}var vt=JSON.parse(JSON.stringify(lr));vt=se([vt],this.posX+this.margin[3],-We+pe+this.ctx.prevPageLastElemOffset)[0];var ct=(pt>Dn||pt<un)&&z.call(this);ct&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],fe,qe,null).clip().discardPath()),this.pdf.addImage(ie,"JPEG",vt.x,vt.y,vt.w,vt.h,null,null,kr),ct&&this.pdf.restoreGraphicsState()}}else this.pdf.addImage(ie,"JPEG",lr.x,lr.y,lr.w,lr.h,null,null,kr)};var H=function(ie,Ee,Le){var Ve=[];Ee=Ee||this.pdf.internal.pageSize.width,Le=Le||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var nt=this.posY+this.ctx.prevPageLastElemOffset;switch(ie.type){default:case"mt":case"lt":Ve.push(Math.floor((ie.y+nt)/Le)+1);break;case"arc":Ve.push(Math.floor((ie.y+nt-ie.radius)/Le)+1),Ve.push(Math.floor((ie.y+nt+ie.radius)/Le)+1);break;case"qct":var et=Ne(this.ctx.lastPoint.x,this.ctx.lastPoint.y,ie.x1,ie.y1,ie.x,ie.y);Ve.push(Math.floor((et.y+nt)/Le)+1),Ve.push(Math.floor((et.y+et.h+nt)/Le)+1);break;case"bct":var _t=yt(this.ctx.lastPoint.x,this.ctx.lastPoint.y,ie.x1,ie.y1,ie.x2,ie.y2,ie.x,ie.y);Ve.push(Math.floor((_t.y+nt)/Le)+1),Ve.push(Math.floor((_t.y+_t.h+nt)/Le)+1);break;case"rect":Ve.push(Math.floor((ie.y+nt)/Le)+1),Ve.push(Math.floor((ie.y+ie.h+nt)/Le)+1)}for(var St=0;St<Ve.length;St+=1)for(;this.pdf.internal.getNumberOfPages()<Ve[St];)Z.call(this);return Ve},Z=function(){var ie=this.fillStyle,Ee=this.strokeStyle,Le=this.font,Ve=this.lineCap,nt=this.lineWidth,et=this.lineJoin;this.pdf.addPage(),this.fillStyle=ie,this.strokeStyle=Ee,this.font=Le,this.lineCap=Ve,this.lineWidth=nt,this.lineJoin=et},se=function(ie,Ee,Le){for(var Ve=0;Ve<ie.length;Ve++)switch(ie[Ve].type){case"bct":ie[Ve].x2+=Ee,ie[Ve].y2+=Le;case"qct":ie[Ve].x1+=Ee,ie[Ve].y1+=Le;default:ie[Ve].x+=Ee,ie[Ve].y+=Le}return ie},ce=function(ie){return ie.sort(function(Ee,Le){return Ee-Le})},de=function(ie,Ee){var Le=this.fillStyle,Ve=this.strokeStyle,nt=this.lineCap,et=this.lineWidth,_t=Math.abs(et*this.ctx.transform.scaleX),St=this.lineJoin;if(this.autoPaging){for(var Tt,Gt,or=JSON.parse(JSON.stringify(this.path)),Ar=JSON.parse(JSON.stringify(this.path)),_r=[],je=0;je<Ar.length;je++)if(Ar[je].x!==void 0)for(var mr=H.call(this,Ar[je]),kr=0;kr<mr.length;kr+=1)_r.indexOf(mr[kr])===-1&&_r.push(mr[kr]);for(var Vr=0;Vr<_r.length;Vr++)for(;this.pdf.internal.getNumberOfPages()<_r[Vr];)Z.call(this);ce(_r);for(var lr=_r[0],Gr=_r[_r.length-1],Er=lr;Er<Gr+1;Er++){this.pdf.setPage(Er),this.fillStyle=Le,this.strokeStyle=Ve,this.lineCap=nt,this.lineWidth=_t,this.lineJoin=St;var Nr=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Dr=Er===1?this.posY+this.margin[0]:this.margin[0],Dn=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],un=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],pt=Er===1?0:Dn+(Er-2)*un;if(this.ctx.clip_path.length!==0){var fe=this.path;Tt=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=se(Tt,this.posX+this.margin[3],-pt+Dr+this.ctx.prevPageLastElemOffset),Pe.call(this,ie,!0),this.path=fe}if(Gt=JSON.parse(JSON.stringify(or)),this.path=se(Gt,this.posX+this.margin[3],-pt+Dr+this.ctx.prevPageLastElemOffset),Ee===!1||Er===0){var pe=(Er>lr||Er<Gr)&&z.call(this);pe&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Nr,un,null).clip().discardPath()),Pe.call(this,ie,Ee),pe&&this.pdf.restoreGraphicsState()}this.lineWidth=et}this.path=or}else this.lineWidth=_t,Pe.call(this,ie,Ee),this.lineWidth=et},Pe=function(ie,Ee){if((ie!=="stroke"||Ee||!W.call(this))&&(ie==="stroke"||Ee||!P.call(this))){for(var Le,Ve,nt=[],et=this.path,_t=0;_t<et.length;_t++){var St=et[_t];switch(St.type){case"begin":nt.push({begin:!0});break;case"close":nt.push({close:!0});break;case"mt":nt.push({start:St,deltas:[],abs:[]});break;case"lt":var Tt=nt.length;if(et[_t-1]&&!isNaN(et[_t-1].x)&&(Le=[St.x-et[_t-1].x,St.y-et[_t-1].y],Tt>0)){for(;Tt>=0;Tt--)if(nt[Tt-1].close!==!0&&nt[Tt-1].begin!==!0){nt[Tt-1].deltas.push(Le),nt[Tt-1].abs.push(St);break}}break;case"bct":Le=[St.x1-et[_t-1].x,St.y1-et[_t-1].y,St.x2-et[_t-1].x,St.y2-et[_t-1].y,St.x-et[_t-1].x,St.y-et[_t-1].y],nt[nt.length-1].deltas.push(Le);break;case"qct":var Gt=et[_t-1].x+2/3*(St.x1-et[_t-1].x),or=et[_t-1].y+2/3*(St.y1-et[_t-1].y),Ar=St.x+2/3*(St.x1-St.x),_r=St.y+2/3*(St.y1-St.y),je=St.x,mr=St.y;Le=[Gt-et[_t-1].x,or-et[_t-1].y,Ar-et[_t-1].x,_r-et[_t-1].y,je-et[_t-1].x,mr-et[_t-1].y],nt[nt.length-1].deltas.push(Le);break;case"arc":nt.push({deltas:[],abs:[],arc:!0}),Array.isArray(nt[nt.length-1].abs)&&nt[nt.length-1].abs.push(St)}}Ve=Ee?null:ie==="stroke"?"stroke":"fill";for(var kr=!1,Vr=0;Vr<nt.length;Vr++)if(nt[Vr].arc)for(var lr=nt[Vr].abs,Gr=0;Gr<lr.length;Gr++){var Er=lr[Gr];Er.type==="arc"?Qe.call(this,Er.x,Er.y,Er.radius,Er.startAngle,Er.endAngle,Er.counterclockwise,void 0,Ee,!kr):Te.call(this,Er.x,Er.y),kr=!0}else if(nt[Vr].close===!0)this.pdf.internal.out("h"),kr=!1;else if(nt[Vr].begin!==!0){var Nr=nt[Vr].start.x,Dr=nt[Vr].start.y;Ie.call(this,nt[Vr].deltas,Nr,Dr),kr=!0}Ve&&Be.call(this,Ve),Ee&&Je.call(this)}},He=function(ie){var Ee=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,Le=Ee*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return ie-Le;case"top":return ie+Ee-Le;case"hanging":return ie+Ee-2*Le;case"middle":return ie+Ee/2-Le;default:return ie}},Xe=function(ie){return ie+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};D.prototype.createLinearGradient=function(){var ie=function(){};return ie.colorStops=[],ie.addColorStop=function(Ee,Le){this.colorStops.push([Ee,Le])},ie.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},ie.isCanvasGradient=!0,ie},D.prototype.createPattern=function(){return this.createLinearGradient()},D.prototype.createRadialGradient=function(){return this.createLinearGradient()};var Qe=function(ie,Ee,Le,Ve,nt,et,_t,St,Tt){for(var Gt=it.call(this,Le,Ve,nt,et),or=0;or<Gt.length;or++){var Ar=Gt[or];or===0&&(Tt?Ae.call(this,Ar.x1+ie,Ar.y1+Ee):Te.call(this,Ar.x1+ie,Ar.y1+Ee)),ut.call(this,ie,Ee,Ar.x2,Ar.y2,Ar.x3,Ar.y3,Ar.x4,Ar.y4)}St?Je.call(this):Be.call(this,_t)},Be=function(ie){switch(ie){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},Je=function(){this.pdf.clip(),this.pdf.discardPath()},Ae=function(ie,Ee){this.pdf.internal.out(i(ie)+" "+a(Ee)+" m")},me=function(ie){var Ee;switch(ie.align){case"right":case"end":Ee="right";break;case"center":Ee="center";break;default:Ee="left"}var Le,Ve,nt,et=this.pdf.getTextDimensions(ie.text),_t=He.call(this,ie.y),St=Xe.call(this,_t)-et.h,Tt=this.ctx.transform.applyToPoint(new m(ie.x,_t));if(this.autoPaging){var Gt=this.ctx.transform.decompose(),or=new w;or=(or=(or=or.multiply(Gt.translate)).multiply(Gt.skew)).multiply(Gt.scale);for(var Ar=this.ctx.transform.applyToRectangle(new o(ie.x,_t,et.w,et.h)),_r=or.applyToRectangle(new o(ie.x,St,et.w,et.h)),je=H.call(this,_r),mr=[],kr=0;kr<je.length;kr+=1)mr.indexOf(je[kr])===-1&&mr.push(je[kr]);ce(mr);for(var Vr=mr[0],lr=mr[mr.length-1],Gr=Vr;Gr<lr+1;Gr++){this.pdf.setPage(Gr);var Er=Gr===1?this.posY+this.margin[0]:this.margin[0],Nr=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Dr=this.pdf.internal.pageSize.height-this.margin[2],Dn=Dr-this.margin[0],un=this.pdf.internal.pageSize.width-this.margin[1],pt=un-this.margin[3],fe=Gr===1?0:Nr+(Gr-2)*Dn;if(this.ctx.clip_path.length!==0){var pe=this.path;Le=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=se(Le,this.posX+this.margin[3],-1*fe+Er),Pe.call(this,"fill",!0),this.path=pe}var ve=se([JSON.parse(JSON.stringify(_r))],this.posX+this.margin[3],-fe+Er+this.ctx.prevPageLastElemOffset)[0];ie.scale>=.01&&(Ve=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Ve*ie.scale),nt=this.lineWidth,this.lineWidth=nt*ie.scale);var qe=this.autoPaging!=="text";if(qe||ve.y+ve.h<=Dr){if(qe||ve.y>=Er&&ve.x<=un){var We=qe?ie.text:this.pdf.splitTextToSize(ie.text,ie.maxWidth||un-ve.x)[0],Ct=se([JSON.parse(JSON.stringify(Ar))],this.posX+this.margin[3],-fe+Er+this.ctx.prevPageLastElemOffset)[0],vt=qe&&(Gr>Vr||Gr<lr)&&z.call(this);vt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],pt,Dn,null).clip().discardPath()),this.pdf.text(We,Ct.x,Ct.y,{angle:ie.angle,align:Ee,renderingMode:ie.renderingMode}),vt&&this.pdf.restoreGraphicsState()}}else ve.y<Dr&&(this.ctx.prevPageLastElemOffset+=Dr-ve.y);ie.scale>=.01&&(this.pdf.setFontSize(Ve),this.lineWidth=nt)}}else ie.scale>=.01&&(Ve=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Ve*ie.scale),nt=this.lineWidth,this.lineWidth=nt*ie.scale),this.pdf.text(ie.text,Tt.x+this.posX,Tt.y+this.posY,{angle:ie.angle,align:Ee,renderingMode:ie.renderingMode,maxWidth:ie.maxWidth}),ie.scale>=.01&&(this.pdf.setFontSize(Ve),this.lineWidth=nt)},Te=function(ie,Ee,Le,Ve){Le=Le||0,Ve=Ve||0,this.pdf.internal.out(i(ie+Le)+" "+a(Ee+Ve)+" l")},Ie=function(ie,Ee,Le){return this.pdf.lines(ie,Ee,Le,null,null)},ut=function(ie,Ee,Le,Ve,nt,et,_t,St){this.pdf.internal.out([r(u(Le+ie)),r(d(Ve+Ee)),r(u(nt+ie)),r(d(et+Ee)),r(u(_t+ie)),r(d(St+Ee)),"c"].join(" "))},it=function(ie,Ee,Le,Ve){for(var nt=2*Math.PI,et=Math.PI/2;Ee>Le;)Ee-=nt;var _t=Math.abs(Le-Ee);_t<nt&&Ve&&(_t=nt-_t);for(var St=[],Tt=Ve?-1:1,Gt=Ee;_t>1e-5;){var or=Gt+Tt*Math.min(_t,et);St.push(ot.call(this,ie,Gt,or)),_t-=Math.abs(or-Gt),Gt=or}return St},ot=function(ie,Ee,Le){var Ve=(Le-Ee)/2,nt=ie*Math.cos(Ve),et=ie*Math.sin(Ve),_t=nt,St=-et,Tt=_t*_t+St*St,Gt=Tt+_t*nt+St*et,or=4/3*(Math.sqrt(2*Tt*Gt)-Gt)/(_t*et-St*nt),Ar=_t-or*St,_r=St+or*_t,je=Ar,mr=-_r,kr=Ve+Ee,Vr=Math.cos(kr),lr=Math.sin(kr);return{x1:ie*Math.cos(Ee),y1:ie*Math.sin(Ee),x2:Ar*Vr-_r*lr,y2:Ar*lr+_r*Vr,x3:je*Vr-mr*lr,y3:je*lr+mr*Vr,x4:ie*Math.cos(Le),y4:ie*Math.sin(Le)}},ke=function(ie){return 180*ie/Math.PI},Ne=function(ie,Ee,Le,Ve,nt,et){var _t=ie+.5*(Le-ie),St=Ee+.5*(Ve-Ee),Tt=nt+.5*(Le-nt),Gt=et+.5*(Ve-et),or=Math.min(ie,nt,_t,Tt),Ar=Math.max(ie,nt,_t,Tt),_r=Math.min(Ee,et,St,Gt),je=Math.max(Ee,et,St,Gt);return new o(or,_r,Ar-or,je-_r)},yt=function(ie,Ee,Le,Ve,nt,et,_t,St){var Tt,Gt,or,Ar,_r,je,mr,kr,Vr,lr,Gr,Er,Nr,Dr,Dn=Le-ie,un=Ve-Ee,pt=nt-Le,fe=et-Ve,pe=_t-nt,ve=St-et;for(Gt=0;Gt<41;Gt++)Vr=(mr=(or=ie+(Tt=Gt/40)*Dn)+Tt*((_r=Le+Tt*pt)-or))+Tt*(_r+Tt*(nt+Tt*pe-_r)-mr),lr=(kr=(Ar=Ee+Tt*un)+Tt*((je=Ve+Tt*fe)-Ar))+Tt*(je+Tt*(et+Tt*ve-je)-kr),Gt==0?(Gr=Vr,Er=lr,Nr=Vr,Dr=lr):(Gr=Math.min(Gr,Vr),Er=Math.min(Er,lr),Nr=Math.max(Nr,Vr),Dr=Math.max(Dr,lr));return new o(Math.round(Gr),Math.round(Er),Math.round(Nr-Gr),Math.round(Dr-Er))},Ce=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var ie,Ee,Le=(ie=this.ctx.lineDash,Ee=this.ctx.lineDashOffset,JSON.stringify({lineDash:ie,lineDashOffset:Ee}));this.prevLineDash!==Le&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=Le)}}})(fn.API),(function(e){var r=function(m){var o,w,E,I,D,O,P,W,z,H;for(w=[],E=0,I=(m+=o="\0\0\0\0".slice(m.length%4||4)).length;I>E;E+=4)(D=(m.charCodeAt(E)<<24)+(m.charCodeAt(E+1)<<16)+(m.charCodeAt(E+2)<<8)+m.charCodeAt(E+3))!==0?(O=(D=((D=((D=((D=(D-(H=D%85))/85)-(z=D%85))/85)-(W=D%85))/85)-(P=D%85))/85)%85,w.push(O+33,P+33,W+33,z+33,H+33)):w.push(122);return(function(Z,se){for(var ce=se;ce>0;ce--)Z.pop()})(w,o.length),String.fromCharCode.apply(String,w)+"~>"},i=function(m){var o,w,E,I,D,O=String,P="length",W=255,z="charCodeAt",H="slice",Z="replace";for(m[H](-2),m=m[H](0,-2)[Z](/\s/g,"")[Z]("z","!!!!!"),E=[],I=0,D=(m+=o="uuuuu"[H](m[P]%5||5))[P];D>I;I+=5)w=52200625*(m[z](I)-33)+614125*(m[z](I+1)-33)+7225*(m[z](I+2)-33)+85*(m[z](I+3)-33)+(m[z](I+4)-33),E.push(W&w>>24,W&w>>16,W&w>>8,W&w);return(function(se,ce){for(var de=ce;de>0;de--)se.pop()})(E,o[P]),O.fromCharCode.apply(O,E)},a=function(m){return m.split("").map(function(o){return("0"+o.charCodeAt().toString(16)).slice(-2)}).join("")+">"},u=function(m){var o=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((m=m.replace(/\s/g,"")).indexOf(">")!==-1&&(m=m.substr(0,m.indexOf(">"))),m.length%2&&(m+="0"),o.test(m)===!1)return"";for(var w="",E=0;E<m.length;E+=2)w+=String.fromCharCode("0x"+(m[E]+m[E+1]));return w},d=function(m){for(var o=new Uint8Array(m.length),w=m.length;w--;)o[w]=m.charCodeAt(w);return(o=z_(o)).reduce(function(E,I){return E+String.fromCharCode(I)},"")};e.processDataByFilters=function(m,o){var w=0,E=m||"",I=[];for(typeof(o=o||[])=="string"&&(o=[o]),w=0;w<o.length;w+=1)switch(o[w]){case"ASCII85Decode":case"/ASCII85Decode":E=i(E),I.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":E=r(E),I.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":E=u(E),I.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":E=a(E),I.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":E=d(E),I.push("/FlateDecode");break;default:throw new Error('The filter: "'+o[w]+'" is not implemented')}return{data:E,reverseChain:I.reverse().join(" ")}}})(fn.API),(function(e){e.loadFile=function(r,i,a){return(function(u,d,m){d=d!==!1,m=typeof m=="function"?m:function(){};var o=void 0;try{o=(function(w,E,I){var D=new XMLHttpRequest,O=0,P=function(W){var z=W.length,H=[],Z=String.fromCharCode;for(O=0;O<z;O+=1)H.push(Z(255&W.charCodeAt(O)));return H.join("")};if(D.open("GET",w,!E),D.overrideMimeType("text/plain; charset=x-user-defined"),E===!1&&(D.onload=function(){D.status===200?I(P(this.responseText)):I(void 0)}),D.send(null),E&&D.status===200)return P(D.responseText)})(u,d,m)}catch{}return o})(r,i,a)},e.loadImageFile=e.loadFile})(fn.API),(function(e){function r(){return(kn.html2canvas?Promise.resolve(kn.html2canvas):U1(()=>Promise.resolve().then(()=>vH),void 0)).catch(function(o){return Promise.reject(new Error("Could not load html2canvas: "+o))}).then(function(o){return o.default?o.default:o})}function i(){return(kn.DOMPurify?Promise.resolve(kn.DOMPurify):U1(()=>import("./purify.es-C65SP4u9.js"),[])).catch(function(o){return Promise.reject(new Error("Could not load dompurify: "+o))}).then(function(o){return o.default?o.default:o})}var a=function(o){var w=rs(o);return w==="undefined"?"undefined":w==="string"||o instanceof String?"string":w==="number"||o instanceof Number?"number":w==="function"||o instanceof Function?"function":o&&o.constructor===Array?"array":o&&o.nodeType===1?"element":w==="object"?"object":"unknown"},u=function(o,w){var E=document.createElement(o);for(var I in w.className&&(E.className=w.className),w.innerHTML&&w.dompurify&&(E.innerHTML=w.dompurify.sanitize(w.innerHTML)),w.style)E.style[I]=w.style[I];return E},d=function o(w,E){for(var I=w.nodeType===3?document.createTextNode(w.nodeValue):w.cloneNode(!1),D=w.firstChild;D;D=D.nextSibling)E!==!0&&D.nodeType===1&&D.nodeName==="SCRIPT"||I.appendChild(o(D,E));return w.nodeType===1&&(w.nodeName==="CANVAS"?(I.width=w.width,I.height=w.height,I.getContext("2d").drawImage(w,0,0)):w.nodeName!=="TEXTAREA"&&w.nodeName!=="SELECT"||(I.value=w.value),I.addEventListener("load",function(){I.scrollTop=w.scrollTop,I.scrollLeft=w.scrollLeft},!0)),I},m=function o(w){var E=Object.assign(o.convert(Promise.resolve()),JSON.parse(JSON.stringify(o.template))),I=o.convert(Promise.resolve(),E);return(I=I.setProgress(1,o,1,[o])).set(w)};(m.prototype=Object.create(Promise.prototype)).constructor=m,m.convert=function(o,w){return o.__proto__=w||m.prototype,o},m.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},m.prototype.from=function(o,w){return this.then(function(){switch(w=w||(function(E){switch(a(E)){case"string":return"string";case"element":return E.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}})(o),w){case"string":return this.then(i).then(function(E){return this.set({src:u("div",{innerHTML:o,dompurify:E})})});case"element":return this.set({src:o});case"canvas":return this.set({canvas:o});case"img":return this.set({img:o});default:return this.error("Unknown source type.")}})},m.prototype.to=function(o){switch(o){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},m.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var o={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},w=d(this.prop.src,this.opt.html2canvas.javascriptEnabled);w.tagName==="BODY"&&(o.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=u("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=u("div",{className:"html2pdf__container",style:o}),this.prop.container.appendChild(w),this.prop.container.firstChild.appendChild(u("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},m.prototype.toCanvas=function(){var o=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(o).then(r).then(function(w){var E=Object.assign({},this.opt.html2canvas);return delete E.onrendered,w(this.prop.container,E)}).then(function(w){(this.opt.html2canvas.onrendered||function(){})(w),this.prop.canvas=w,document.body.removeChild(this.prop.overlay)})},m.prototype.toContext2d=function(){var o=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(o).then(r).then(function(w){var E=this.opt.jsPDF,I=this.opt.fontFaces,D=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,O=Object.assign({async:!0,allowTaint:!0,scale:D,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete O.onrendered,E.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,E.context2d.posX=this.opt.x,E.context2d.posY=this.opt.y,E.context2d.margin=this.opt.margin,E.context2d.fontFaces=I,I)for(var P=0;P<I.length;++P){var W=I[P],z=W.src.find(function(H){return H.format==="truetype"});z&&E.addFont(z.url,W.ref.name,W.ref.style)}return O.windowHeight=O.windowHeight||0,O.windowHeight=O.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):O.windowHeight,E.context2d.save(!0),w(this.prop.container,O)}).then(function(w){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(w),this.prop.canvas=w,document.body.removeChild(this.prop.overlay)})},m.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var o=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=o})},m.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},m.prototype.output=function(o,w,E){return(E=E||"pdf").toLowerCase()==="img"||E.toLowerCase()==="image"?this.outputImg(o,w):this.outputPdf(o,w)},m.prototype.outputPdf=function(o,w){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(o,w)})},m.prototype.outputImg=function(o){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(o){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+o+'" is not supported.'}})},m.prototype.save=function(o){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(o?{filename:o}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},m.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},m.prototype.set=function(o){if(a(o)!=="object")return this;var w=Object.keys(o||{}).map(function(E){if(E in m.template.prop)return function(){this.prop[E]=o[E]};switch(E){case"margin":return this.setMargin.bind(this,o.margin);case"jsPDF":return function(){return this.opt.jsPDF=o.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,o.pageSize);default:return function(){this.opt[E]=o[E]}}},this);return this.then(function(){return this.thenList(w)})},m.prototype.get=function(o,w){return this.then(function(){var E=o in m.template.prop?this.prop[o]:this.opt[o];return w?w(E):E})},m.prototype.setMargin=function(o){return this.then(function(){switch(a(o)){case"number":o=[o,o,o,o];case"array":if(o.length===2&&(o=[o[0],o[1],o[0],o[1]]),o.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=o}).then(this.setPageSize)},m.prototype.setPageSize=function(o){function w(E,I){return Math.floor(E*I/72*96)}return this.then(function(){(o=o||fn.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(o.inner={width:o.width-this.opt.margin[1]-this.opt.margin[3],height:o.height-this.opt.margin[0]-this.opt.margin[2]},o.inner.px={width:w(o.inner.width,o.k),height:w(o.inner.height,o.k)},o.inner.ratio=o.inner.height/o.inner.width),this.prop.pageSize=o})},m.prototype.setProgress=function(o,w,E,I){return o!=null&&(this.progress.val=o),w!=null&&(this.progress.state=w),E!=null&&(this.progress.n=E),I!=null&&(this.progress.stack=I),this.progress.ratio=this.progress.val/this.progress.state,this},m.prototype.updateProgress=function(o,w,E,I){return this.setProgress(o?this.progress.val+o:null,w||null,E?this.progress.n+E:null,I?this.progress.stack.concat(I):null)},m.prototype.then=function(o,w){var E=this;return this.thenCore(o,w,function(I,D){return E.updateProgress(null,null,1,[I]),Promise.prototype.then.call(this,function(O){return E.updateProgress(null,I),O}).then(I,D).then(function(O){return E.updateProgress(1),O})})},m.prototype.thenCore=function(o,w,E){E=E||Promise.prototype.then;var I=this;o&&(o=o.bind(I)),w&&(w=w.bind(I));var D=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?I:m.convert(Object.assign({},I),Promise.prototype),O=E.call(D,o,w);return m.convert(O,I.__proto__)},m.prototype.thenExternal=function(o,w){return Promise.prototype.then.call(this,o,w)},m.prototype.thenList=function(o){var w=this;return o.forEach(function(E){w=w.thenCore(E)}),w},m.prototype.catch=function(o){o&&(o=o.bind(this));var w=Promise.prototype.catch.call(this,o);return m.convert(w,this)},m.prototype.catchExternal=function(o){return Promise.prototype.catch.call(this,o)},m.prototype.error=function(o){return this.then(function(){throw new Error(o)})},m.prototype.using=m.prototype.set,m.prototype.saveAs=m.prototype.save,m.prototype.export=m.prototype.output,m.prototype.run=m.prototype.then,fn.getPageSize=function(o,w,E){if(rs(o)==="object"){var I=o;o=I.orientation,w=I.unit||w,E=I.format||E}w=w||"mm",E=E||"a4",o=(""+(o||"P")).toLowerCase();var D,O=(""+E).toLowerCase(),P={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(w){case"pt":D=1;break;case"mm":D=72/25.4;break;case"cm":D=72/2.54;break;case"in":D=72;break;case"px":D=.75;break;case"pc":case"em":D=12;break;case"ex":D=6;break;default:throw"Invalid unit: "+w}var W,z=0,H=0;if(P.hasOwnProperty(O))z=P[O][1]/D,H=P[O][0]/D;else try{z=E[1],H=E[0]}catch{throw new Error("Invalid format: "+E)}if(o==="p"||o==="portrait")o="p",H>z&&(W=H,H=z,z=W);else{if(o!=="l"&&o!=="landscape")throw"Invalid orientation: "+o;o="l",z>H&&(W=H,H=z,z=W)}return{width:H,height:z,unit:w,k:D,orientation:o}},e.html=function(o,w){(w=w||{}).callback=w.callback||function(){},w.html2canvas=w.html2canvas||{},w.html2canvas.canvas=w.html2canvas.canvas||this.canvas,w.jsPDF=w.jsPDF||this,w.fontFaces=w.fontFaces?w.fontFaces.map(Y1):null;var E=new m(w);return w.worker?E:E.from(o).doCallback()}})(fn.API),fn.API.addJS=function(e){return XC=e,this.internal.events.subscribe("postPutResources",function(){E0=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(E0+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),ZC=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+XC+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){E0!==void 0&&ZC!==void 0&&this.internal.out("/Names <</JavaScript "+E0+" 0 R>>")}),this},(function(e){var r;e.events.push(["postPutResources",function(){var i=this,a=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var u=i.outline.render().split(/\r\n/),d=0;d<u.length;d++){var m=u[d],o=a.exec(m);if(o!=null){var w=o[1];i.internal.newObjectDeferredBegin(w,!1)}i.internal.write(m)}if(this.outline.createNamedDestinations){var E=this.internal.pages.length,I=[];for(d=0;d<E;d++){var D=i.internal.newObject();I.push(D);var O=i.internal.getPageInfo(d+1);i.internal.write("<< /D["+O.objId+" 0 R /XYZ null null null]>> endobj")}var P=i.internal.newObject();for(i.internal.write("<< /Names [ "),d=0;d<I.length;d++)i.internal.write("(page_"+(d+1)+")"+I[d]+" 0 R");i.internal.write(" ] >>","endobj"),r=i.internal.newObject(),i.internal.write("<< /Dests "+P+" 0 R"),i.internal.write(">>","endobj")}}]),e.events.push(["putCatalog",function(){var i=this;i.outline.root.children.length>0&&(i.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&i.internal.write("/Names "+r+" 0 R"))}]),e.events.push(["initialized",function(){var i=this;i.outline={createNamedDestinations:!1,root:{children:[]}},i.outline.add=function(a,u,d){var m={title:u,options:d,children:[]};return a==null&&(a=this.root),a.children.push(m),m},i.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=i,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},i.outline.genIds_r=function(a){a.id=i.internal.newObjectDeferred();for(var u=0;u<a.children.length;u++)this.genIds_r(a.children[u])},i.outline.renderRoot=function(a){this.objStart(a),this.line("/Type /Outlines"),a.children.length>0&&(this.line("/First "+this.makeRef(a.children[0])),this.line("/Last "+this.makeRef(a.children[a.children.length-1]))),this.line("/Count "+this.count_r({count:0},a)),this.objEnd()},i.outline.renderItems=function(a){for(var u=this.ctx.pdf.internal.getVerticalCoordinateString,d=0;d<a.children.length;d++){var m=a.children[d];this.objStart(m),this.line("/Title "+this.makeString(m.title)),this.line("/Parent "+this.makeRef(a)),d>0&&this.line("/Prev "+this.makeRef(a.children[d-1])),d<a.children.length-1&&this.line("/Next "+this.makeRef(a.children[d+1])),m.children.length>0&&(this.line("/First "+this.makeRef(m.children[0])),this.line("/Last "+this.makeRef(m.children[m.children.length-1])));var o=this.count=this.count_r({count:0},m);if(o>0&&this.line("/Count "+o),m.options&&m.options.pageNumber){var w=i.internal.getPageInfo(m.options.pageNumber);this.line("/Dest ["+w.objId+" 0 R /XYZ 0 "+u(0)+" 0]")}this.objEnd()}for(var E=0;E<a.children.length;E++)this.renderItems(a.children[E])},i.outline.line=function(a){this.ctx.val+=a+`\r
`},i.outline.makeRef=function(a){return a.id+" 0 R"},i.outline.makeString=function(a){return"("+i.internal.pdfEscape(a)+")"},i.outline.objStart=function(a){this.ctx.val+=`\r
`+a.id+` 0 obj\r
<<\r
`},i.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},i.outline.count_r=function(a,u){for(var d=0;d<u.children.length;d++)a.count++,this.count_r(a,u.children[d]);return a.count}}])})(fn.API),(function(e){var r=[192,193,194,195,196,197,198,199];e.processJPEG=function(i,a,u,d,m,o){var w,E=this.decode.DCT_DECODE,I=null;if(typeof i=="string"||this.__addimage__.isArrayBuffer(i)||this.__addimage__.isArrayBufferView(i)){switch(i=m||i,i=this.__addimage__.isArrayBuffer(i)?new Uint8Array(i):i,w=(function(D){for(var O,P=256*D.charCodeAt(4)+D.charCodeAt(5),W=D.length,z={width:0,height:0,numcomponents:1},H=4;H<W;H+=2){if(H+=P,r.indexOf(D.charCodeAt(H+1))!==-1){O=256*D.charCodeAt(H+5)+D.charCodeAt(H+6),z={width:256*D.charCodeAt(H+7)+D.charCodeAt(H+8),height:O,numcomponents:D.charCodeAt(H+9)};break}P=256*D.charCodeAt(H+2)+D.charCodeAt(H+3)}return z})(i=this.__addimage__.isArrayBufferView(i)?this.__addimage__.arrayBufferToBinaryString(i):i),w.numcomponents){case 1:o=this.color_spaces.DEVICE_GRAY;break;case 4:o=this.color_spaces.DEVICE_CMYK;break;case 3:o=this.color_spaces.DEVICE_RGB}I={data:i,width:w.width,height:w.height,colorSpace:o,bitsPerComponent:8,filter:E,index:a,alias:u}}return I}})(fn.API),fn.API.processPNG=function(e,r,i,a){if(this.__addimage__.isArrayBuffer(e)&&(e=new Uint8Array(e)),this.__addimage__.isArrayBufferView(e)){var u,d=m7(e,{checkCrc:!0}),m=d.width,o=d.height,w=d.channels,E=d.palette,I=d.depth;u=E&&w===1?(function(Qe){for(var Be=Qe.width,Je=Qe.height,Ae=Qe.data,me=Qe.palette,Te=Qe.depth,Ie=!1,ut=[],it=[],ot=void 0,ke=!1,Ne=0,yt=0;yt<me.length;yt++){var Ce=tC(me[yt],4),ie=Ce[0],Ee=Ce[1],Le=Ce[2],Ve=Ce[3];ut.push(ie,Ee,Le),Ve!=null&&(Ve===0?(Ne++,it.length<1&&it.push(yt)):Ve<255&&(ke=!0))}if(ke||Ne>1){Ie=!0,it=void 0;var nt=Be*Je;ot=new Uint8Array(nt);for(var et=new DataView(Ae.buffer),_t=0;_t<nt;_t++){var St=e_(et,_t,Te),Tt=tC(me[St],4)[3];ot[_t]=Tt}}else Ne===0&&(it=void 0);return{colorSpace:"Indexed",colorsPerPixel:1,sMaskBitsPerComponent:Ie?8:void 0,colorBytes:Ae,alphaBytes:ot,needSMask:Ie,palette:ut,mask:it}})(d):w===2||w===4?(function(Qe){for(var Be=Qe.data,Je=Qe.width,Ae=Qe.height,me=Qe.channels,Te=Qe.depth,Ie=me===2?"DeviceGray":"DeviceRGB",ut=me-1,it=Je*Ae,ot=ut,ke=it*ot,Ne=1*it,yt=Math.ceil(ke*Te/8),Ce=Math.ceil(Ne*Te/8),ie=new Uint8Array(yt),Ee=new Uint8Array(Ce),Le=new DataView(Be.buffer),Ve=new DataView(ie.buffer),nt=new DataView(Ee.buffer),et=!1,_t=0;_t<it;_t++){for(var St=_t*me,Tt=0;Tt<ot;Tt++)o5(Ve,e_(Le,St+Tt,Te),_t*ot+Tt,Te);var Gt=e_(Le,St+ot,Te);Gt<(1<<Te)-1&&(et=!0),o5(nt,Gt,1*_t,Te)}return{colorSpace:Ie,colorsPerPixel:ut,sMaskBitsPerComponent:et?Te:void 0,colorBytes:ie,alphaBytes:Ee,needSMask:et}})(d):(function(Qe){var Be=Qe.data,Je=Qe.channels===1?"DeviceGray":"DeviceRGB";return{colorSpace:Je,colorsPerPixel:Je==="DeviceGray"?1:3,colorBytes:Be instanceof Uint16Array?(function(Ae){for(var me=Ae.length,Te=new Uint8Array(2*me),Ie=new DataView(Te.buffer,Te.byteOffset,Te.byteLength),ut=0;ut<me;ut++)Ie.setUint16(2*ut,Ae[ut],!1);return Te})(Be):Be,needSMask:!1}})(d);var D,O,P,W=u,z=W.colorSpace,H=W.colorsPerPixel,Z=W.sMaskBitsPerComponent,se=W.colorBytes,ce=W.alphaBytes,de=W.needSMask,Pe=W.palette,He=W.mask,Xe=null;return a!==fn.API.image_compression.NONE&&typeof z_=="function"?(Xe=(function(Qe){var Be;switch(Qe){case fn.API.image_compression.FAST:Be=11;break;case fn.API.image_compression.MEDIUM:Be=13;break;case fn.API.image_compression.SLOW:Be=14;break;default:Be=12}return Be})(a),D=this.decode.FLATE_DECODE,O="/Predictor ".concat(Xe," /Colors ").concat(H," /BitsPerComponent ").concat(I," /Columns ").concat(m),e=t5(se,Math.ceil(m*H*I/8),H,I,a),de&&(P=t5(ce,Math.ceil(m*Z/8),1,Z,a))):(D=void 0,O=void 0,e=se,de&&(P=ce)),(this.__addimage__.isArrayBuffer(e)||this.__addimage__.isArrayBufferView(e))&&(e=this.__addimage__.arrayBufferToBinaryString(e)),(P&&this.__addimage__.isArrayBuffer(P)||this.__addimage__.isArrayBufferView(P))&&(P=this.__addimage__.arrayBufferToBinaryString(P)),{alias:i,data:e,index:r,filter:D,decodeParameters:O,transparency:He,palette:Pe,sMask:P,predictor:Xe,width:m,height:o,bitsPerComponent:I,sMaskBitsPerComponent:Z,colorSpace:z}}},(function(e){e.processGIF89A=function(r,i,a,u){var d=new R7(r),m=d.width,o=d.height,w=[];d.decodeAndBlitFrameRGBA(0,w);var E={data:w,width:m,height:o},I=new t_(100).encode(E,100);return e.processJPEG.call(this,I,i,a,u)},e.processGIF87A=e.processGIF89A})(fn.API),Eu.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var e=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(e);for(var r=0;r<e;r++){var i=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),u=this.datav.getUint8(this.pos++,!0),d=this.datav.getUint8(this.pos++,!0);this.palette[r]={red:u,green:a,blue:i,quad:d}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},Eu.prototype.parseBGR=function(){this.pos=this.offset;try{var e="bit"+this.bitPP,r=this.width*this.height*4;this.data=new Uint8Array(r),this[e]()}catch(i){gs.log("bit decode error:"+i)}},Eu.prototype.bit1=function(){var e,r=Math.ceil(this.width/8),i=r%4;for(e=this.height-1;e>=0;e--){for(var a=this.bottom_up?e:this.height-1-e,u=0;u<r;u++)for(var d=this.datav.getUint8(this.pos++,!0),m=a*this.width*4+8*u*4,o=0;o<8&&8*u+o<this.width;o++){var w=this.palette[d>>7-o&1];this.data[m+4*o]=w.blue,this.data[m+4*o+1]=w.green,this.data[m+4*o+2]=w.red,this.data[m+4*o+3]=255}i!==0&&(this.pos+=4-i)}},Eu.prototype.bit4=function(){for(var e=Math.ceil(this.width/2),r=e%4,i=this.height-1;i>=0;i--){for(var a=this.bottom_up?i:this.height-1-i,u=0;u<e;u++){var d=this.datav.getUint8(this.pos++,!0),m=a*this.width*4+2*u*4,o=d>>4,w=15&d,E=this.palette[o];if(this.data[m]=E.blue,this.data[m+1]=E.green,this.data[m+2]=E.red,this.data[m+3]=255,2*u+1>=this.width)break;E=this.palette[w],this.data[m+4]=E.blue,this.data[m+4+1]=E.green,this.data[m+4+2]=E.red,this.data[m+4+3]=255}r!==0&&(this.pos+=4-r)}},Eu.prototype.bit8=function(){for(var e=this.width%4,r=this.height-1;r>=0;r--){for(var i=this.bottom_up?r:this.height-1-r,a=0;a<this.width;a++){var u=this.datav.getUint8(this.pos++,!0),d=i*this.width*4+4*a;if(u<this.palette.length){var m=this.palette[u];this.data[d]=m.red,this.data[d+1]=m.green,this.data[d+2]=m.blue,this.data[d+3]=255}else this.data[d]=255,this.data[d+1]=255,this.data[d+2]=255,this.data[d+3]=255}e!==0&&(this.pos+=4-e)}},Eu.prototype.bit15=function(){for(var e=this.width%3,r=parseInt("11111",2),i=this.height-1;i>=0;i--){for(var a=this.bottom_up?i:this.height-1-i,u=0;u<this.width;u++){var d=this.datav.getUint16(this.pos,!0);this.pos+=2;var m=(d&r)/r*255|0,o=(d>>5&r)/r*255|0,w=(d>>10&r)/r*255|0,E=d>>15?255:0,I=a*this.width*4+4*u;this.data[I]=w,this.data[I+1]=o,this.data[I+2]=m,this.data[I+3]=E}this.pos+=e}},Eu.prototype.bit16=function(){for(var e=this.width%3,r=parseInt("11111",2),i=parseInt("111111",2),a=this.height-1;a>=0;a--){for(var u=this.bottom_up?a:this.height-1-a,d=0;d<this.width;d++){var m=this.datav.getUint16(this.pos,!0);this.pos+=2;var o=(m&r)/r*255|0,w=(m>>5&i)/i*255|0,E=(m>>11)/r*255|0,I=u*this.width*4+4*d;this.data[I]=E,this.data[I+1]=w,this.data[I+2]=o,this.data[I+3]=255}this.pos+=e}},Eu.prototype.bit24=function(){for(var e=this.height-1;e>=0;e--){for(var r=this.bottom_up?e:this.height-1-e,i=0;i<this.width;i++){var a=this.datav.getUint8(this.pos++,!0),u=this.datav.getUint8(this.pos++,!0),d=this.datav.getUint8(this.pos++,!0),m=r*this.width*4+4*i;this.data[m]=d,this.data[m+1]=u,this.data[m+2]=a,this.data[m+3]=255}this.pos+=this.width%4}},Eu.prototype.bit32=function(){for(var e=this.height-1;e>=0;e--)for(var r=this.bottom_up?e:this.height-1-e,i=0;i<this.width;i++){var a=this.datav.getUint8(this.pos++,!0),u=this.datav.getUint8(this.pos++,!0),d=this.datav.getUint8(this.pos++,!0),m=this.datav.getUint8(this.pos++,!0),o=r*this.width*4+4*i;this.data[o]=d,this.data[o+1]=u,this.data[o+2]=a,this.data[o+3]=m}},Eu.prototype.getData=function(){return this.data},(function(e){e.processBMP=function(r,i,a,u){var d=new Eu(r,!1),m=d.width,o=d.height,w={data:d.getData(),width:m,height:o},E=new t_(100).encode(w,100);return e.processJPEG.call(this,E,i,a,u)}})(fn.API),l5.prototype.getData=function(){return this.data},(function(e){e.processWEBP=function(r,i,a,u){var d=new l5(r),m=d.width,o=d.height,w={data:d.getData(),width:m,height:o},E=new t_(100).encode(w,100);return e.processJPEG.call(this,E,i,a,u)}})(fn.API),fn.API.processRGBA=function(e,r,i){for(var a=e.data,u=a.length,d=new Uint8Array(u/4*3),m=new Uint8Array(u/4),o=0,w=0,E=0;E<u;E+=4){var I=a[E],D=a[E+1],O=a[E+2],P=a[E+3];d[o++]=I,d[o++]=D,d[o++]=O,m[w++]=P}var W=this.__addimage__.arrayBufferToBinaryString(d);return{alpha:this.__addimage__.arrayBufferToBinaryString(m),data:W,index:r,alias:i,colorSpace:"DeviceRGB",bitsPerComponent:8,width:e.width,height:e.height}},fn.API.setLanguage=function(e){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[e]!==void 0&&(this.internal.languageSettings.languageCode=e,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},Zf=fn.API,S0=Zf.getCharWidthsArray=function(e,r){var i,a,u=(r=r||{}).font||this.internal.getFont(),d=r.fontSize||this.internal.getFontSize(),m=r.charSpace||this.internal.getCharSpace(),o=r.widths?r.widths:u.metadata.Unicode.widths,w=o.fof?o.fof:1,E=r.kerning?r.kerning:u.metadata.Unicode.kerning,I=E.fof?E.fof:1,D=r.doKerning!==!1,O=0,P=e.length,W=0,z=o[0]||w,H=[];for(i=0;i<P;i++)a=e.charCodeAt(i),typeof u.metadata.widthOfString=="function"?H.push((u.metadata.widthOfGlyph(u.metadata.characterToGlyph(a))+m*(1e3/d)||0)/1e3):(O=D&&rs(E[a])==="object"&&!isNaN(parseInt(E[a][W],10))?E[a][W]/I:0,H.push((o[a]||z)/w+O)),W=a;return H},YC=Zf.getStringUnitWidth=function(e,r){var i=(r=r||{}).fontSize||this.internal.getFontSize(),a=r.font||this.internal.getFont(),u=r.charSpace||this.internal.getCharSpace();return Zf.processArabic&&(e=Zf.processArabic(e)),typeof a.metadata.widthOfString=="function"?a.metadata.widthOfString(e,i,u)/i:S0.apply(this,arguments).reduce(function(d,m){return d+m},0)},JC=function(e,r,i,a){for(var u=[],d=0,m=e.length,o=0;d!==m&&o+r[d]<i;)o+=r[d],d++;u.push(e.slice(0,d));var w=d;for(o=0;d!==m;)o+r[d]>a&&(u.push(e.slice(w,d)),o=0,w=d),o+=r[d],d++;return w!==d&&u.push(e.slice(w,d)),u},e5=function(e,r,i){i||(i={});var a,u,d,m,o,w,E,I=[],D=[I],O=i.textIndent||0,P=0,W=0,z=e.split(" "),H=S0.apply(this,[" ",i])[0];if(w=i.lineIndent===-1?z[0].length+2:i.lineIndent||0){var Z=Array(w).join(" "),se=[];z.map(function(de){(de=de.split(/\s*\n/)).length>1?se=se.concat(de.map(function(Pe,He){return(He&&Pe.length?`
`:"")+Pe})):se.push(de[0])}),z=se,w=YC.apply(this,[Z,i])}for(d=0,m=z.length;d<m;d++){var ce=0;if(a=z[d],w&&a[0]==`
`&&(a=a.substr(1),ce=1),O+P+(W=(u=S0.apply(this,[a,i])).reduce(function(de,Pe){return de+Pe},0))>r||ce){if(W>r){for(o=JC.apply(this,[a,u,r-(O+P),r]),I.push(o.shift()),I=[o.pop()];o.length;)D.push([o.shift()]);W=u.slice(a.length-(I[0]?I[0].length:0)).reduce(function(de,Pe){return de+Pe},0)}else I=[a];D.push(I),O=W+w,P=H}else I.push(a),O+=P+W,P=H}return E=w?function(de,Pe){return(Pe?Z:"")+de.join(" ")}:function(de){return de.join(" ")},D.map(E)},Zf.splitTextToSize=function(e,r,i){var a,u=(i=i||{}).fontSize||this.internal.getFontSize(),d=(function(I){if(I.widths&&I.kerning)return{widths:I.widths,kerning:I.kerning};var D=this.internal.getFont(I.fontName,I.fontStyle),O="Unicode";return D.metadata[O]?{widths:D.metadata[O].widths||{0:1},kerning:D.metadata[O].kerning||{}}:{font:D.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,i);a=Array.isArray(e)?e:String(e).split(/\r?\n/);var m=1*this.internal.scaleFactor*r/u;d.textIndent=i.textIndent?1*i.textIndent*this.internal.scaleFactor/u:0,d.lineIndent=i.lineIndent;var o,w,E=[];for(o=0,w=a.length;o<w;o++)E=E.concat(e5.apply(this,[a[o],m,d]));return E},(function(e){e.__fontmetrics__=e.__fontmetrics__||{};for(var r="0123456789abcdef",i="klmnopqrstuvwxyz",a={},u={},d=0;d<16;d++)a[i[d]]=r[d],u[r[d]]=i[d];var m=function(O){return"0x"+parseInt(O,10).toString(16)},o=e.__fontmetrics__.compress=function(O){var P,W,z,H,Z=["{"];for(var se in O){if(P=O[se],isNaN(parseInt(se,10))?W="'"+se+"'":(se=parseInt(se,10),W=(W=m(se).slice(2)).slice(0,-1)+u[W.slice(-1)]),typeof P=="number")P<0?(z=m(P).slice(3),H="-"):(z=m(P).slice(2),H=""),z=H+z.slice(0,-1)+u[z.slice(-1)];else{if(rs(P)!=="object")throw new Error("Don't know what to do with value type "+rs(P)+".");z=o(P)}Z.push(W+z)}return Z.push("}"),Z.join("")},w=e.__fontmetrics__.uncompress=function(O){if(typeof O!="string")throw new Error("Invalid argument passed to uncompress.");for(var P,W,z,H,Z={},se=1,ce=Z,de=[],Pe="",He="",Xe=O.length-1,Qe=1;Qe<Xe;Qe+=1)(H=O[Qe])=="'"?P?(z=P.join(""),P=void 0):P=[]:P?P.push(H):H=="{"?(de.push([ce,z]),ce={},z=void 0):H=="}"?((W=de.pop())[0][W[1]]=ce,z=void 0,ce=W[0]):H=="-"?se=-1:z===void 0?a.hasOwnProperty(H)?(Pe+=a[H],z=parseInt(Pe,16)*se,se=1,Pe=""):Pe+=H:a.hasOwnProperty(H)?(He+=a[H],ce[z]=parseInt(He,16)*se,se=1,z=void 0,He=""):He+=H;return Z},E={codePages:["WinAnsiEncoding"],WinAnsiEncoding:w("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},I={Unicode:{Courier:E,"Courier-Bold":E,"Courier-BoldOblique":E,"Courier-Oblique":E,Helvetica:E,"Helvetica-Bold":E,"Helvetica-BoldOblique":E,"Helvetica-Oblique":E,"Times-Roman":E,"Times-Bold":E,"Times-BoldItalic":E,"Times-Italic":E}},D={Unicode:{"Courier-Oblique":w("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":w("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":w("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:w("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":w("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":w("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:w("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:w("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":w("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:w("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":w("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":w("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":w("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":w("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};e.events.push(["addFont",function(O){var P=O.font,W=D.Unicode[P.postScriptName];W&&(P.metadata.Unicode={},P.metadata.Unicode.widths=W.widths,P.metadata.Unicode.kerning=W.kerning);var z=I.Unicode[P.postScriptName];z&&(P.metadata.Unicode.encoding=z,P.encoding=z.codePages[0])}])})(fn.API),(function(e){var r=function(i){for(var a=i.length,u=new Uint8Array(a),d=0;d<a;d++)u[d]=i.charCodeAt(d);return u};e.API.events.push(["addFont",function(i){var a=void 0,u=i.font,d=i.instance;if(!u.isStandardFont){if(d===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+u.postScriptName+"').");if(typeof(a=d.existsFileInVFS(u.postScriptName)===!1?d.loadFile(u.postScriptName):d.getFileFromVFS(u.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+u.postScriptName+"').");(function(m,o){o=/^\x00\x01\x00\x00/.test(o)?r(o):r(z0(o)),m.metadata=e.API.TTFFont.open(o),m.metadata.Unicode=m.metadata.Unicode||{encoding:{},kerning:{},widths:[]},m.metadata.glyIdsUsed=[0]})(u,a)}}])})(fn),fn.API.addSvgAsImage=function(e,r,i,a,u,d,m,o){if(isNaN(r)||isNaN(i))throw gs.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(a)||isNaN(u))throw gs.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var w=document.createElement("canvas");w.width=a,w.height=u;var E=w.getContext("2d");E.fillStyle="#fff",E.fillRect(0,0,w.width,w.height);var I={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},D=this;return(kn.canvg?Promise.resolve(kn.canvg):U1(()=>import("./index.es-BL_KaGoD.js"),[])).catch(function(O){return Promise.reject(new Error("Could not load canvg: "+O))}).then(function(O){return O.default?O.default:O}).then(function(O){return O.fromString(E,e,I)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(O){return O.render(I)}).then(function(){D.addImage(w.toDataURL("image/jpeg",1),r,i,a,u,m,o)})},fn.API.putTotalPages=function(e){var r,i=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(r=new RegExp(e,"g"),i=this.internal.getNumberOfPages()):(r=new RegExp(this.pdfEscape16(e,this.internal.getFont()),"g"),i=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var a=1;a<=this.internal.getNumberOfPages();a++)for(var u=0;u<this.internal.pages[a].length;u++)this.internal.pages[a][u]=this.internal.pages[a][u].replace(r,i);return this},fn.API.viewerPreferences=function(e,r){var i;e=e||{},r=r||!1;var a,u,d,m={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},o=Object.keys(m),w=[],E=0,I=0,D=0;function O(W,z){var H,Z=!1;for(H=0;H<W.length;H+=1)W[H]===z&&(Z=!0);return Z}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(m)),this.internal.viewerpreferences.isSubscribed=!1),i=this.internal.viewerpreferences.configuration,e==="reset"||r===!0){var P=o.length;for(D=0;D<P;D+=1)i[o[D]].value=i[o[D]].defaultValue,i[o[D]].explicitSet=!1}if(rs(e)==="object"){for(u in e)if(d=e[u],O(o,u)&&d!==void 0){if(i[u].type==="boolean"&&typeof d=="boolean")i[u].value=d;else if(i[u].type==="name"&&O(i[u].valueSet,d))i[u].value=d;else if(i[u].type==="integer"&&Number.isInteger(d))i[u].value=d;else if(i[u].type==="array"){for(E=0;E<d.length;E+=1)if(a=!0,d[E].length===1&&typeof d[E][0]=="number")w.push(String(d[E]-1));else if(d[E].length>1){for(I=0;I<d[E].length;I+=1)typeof d[E][I]!="number"&&(a=!1);a===!0&&w.push([d[E][0]-1,d[E][1]-1].join(" "))}i[u].value="["+w.join(" ")+"]"}else i[u].value=i[u].defaultValue;i[u].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var W,z=[];for(W in i)i[W].explicitSet===!0&&(i[W].type==="name"?z.push("/"+W+" /"+i[W].value):z.push("/"+W+" "+i[W].value));z.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+z.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=i,this},(function(e){var r=function(){var a='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',u=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),d=unescape(encodeURIComponent(a)),m=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),o=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),w=unescape(encodeURIComponent("</x:xmpmeta>")),E=d.length+m.length+o.length+u.length+w.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+E+" >>"),this.internal.write("stream"),this.internal.write(u+d+m+o+w),this.internal.write("endstream"),this.internal.write("endobj")},i=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};e.addMetadata=function(a,u){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:a,namespaceuri:u||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",i),this.internal.events.subscribe("postPutResources",r)),this}})(fn.API),(function(e){var r=e.API,i=r.pdfEscape16=function(d,m){for(var o,w=m.metadata.Unicode.widths,E=["","0","00","000","0000"],I=[""],D=0,O=d.length;D<O;++D){if(o=m.metadata.characterToGlyph(d.charCodeAt(D)),m.metadata.glyIdsUsed.push(o),m.metadata.toUnicode[o]=d.charCodeAt(D),w.indexOf(o)==-1&&(w.push(o),w.push([parseInt(m.metadata.widthOfGlyph(o),10)])),o=="0")return I.join("");o=o.toString(16),I.push(E[4-o.length],o)}return I.join("")},a=function(d){var m,o,w,E,I,D,O;for(I=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,w=[],D=0,O=(o=Object.keys(d).sort(function(P,W){return P-W})).length;D<O;D++)m=o[D],w.length>=100&&(I+=`
`+w.length+` beginbfchar
`+w.join(`
`)+`
endbfchar`,w=[]),d[m]!==void 0&&d[m]!==null&&typeof d[m].toString=="function"&&(E=("0000"+d[m].toString(16)).slice(-4),m=("0000"+(+m).toString(16)).slice(-4),w.push("<"+m+"><"+E+">"));return w.length&&(I+=`
`+w.length+` beginbfchar
`+w.join(`
`)+`
endbfchar
`),I+`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};r.events.push(["putFont",function(d){(function(m){var o=m.font,w=m.out,E=m.newObject,I=m.putStream;if(o.metadata instanceof e.API.TTFFont&&o.encoding==="Identity-H"){for(var D=o.metadata.Unicode.widths,O=o.metadata.subset.encode(o.metadata.glyIdsUsed,1),P="",W=0;W<O.length;W++)P+=String.fromCharCode(O[W]);var z=E();I({data:P,addLength1:!0,objectId:z}),w("endobj");var H=E();I({data:a(o.metadata.toUnicode),addLength1:!0,objectId:H}),w("endobj");var Z=E();w("<<"),w("/Type /FontDescriptor"),w("/FontName /"+np(o.fontName)),w("/FontFile2 "+z+" 0 R"),w("/FontBBox "+e.API.PDFObject.convert(o.metadata.bbox)),w("/Flags "+o.metadata.flags),w("/StemV "+o.metadata.stemV),w("/ItalicAngle "+o.metadata.italicAngle),w("/Ascent "+o.metadata.ascender),w("/Descent "+o.metadata.decender),w("/CapHeight "+o.metadata.capHeight),w(">>"),w("endobj");var se=E();w("<<"),w("/Type /Font"),w("/BaseFont /"+np(o.fontName)),w("/FontDescriptor "+Z+" 0 R"),w("/W "+e.API.PDFObject.convert(D)),w("/CIDToGIDMap /Identity"),w("/DW 1000"),w("/Subtype /CIDFontType2"),w("/CIDSystemInfo"),w("<<"),w("/Supplement 0"),w("/Registry (Adobe)"),w("/Ordering ("+o.encoding+")"),w(">>"),w(">>"),w("endobj"),o.objectNumber=E(),w("<<"),w("/Type /Font"),w("/Subtype /Type0"),w("/ToUnicode "+H+" 0 R"),w("/BaseFont /"+np(o.fontName)),w("/Encoding /"+o.encoding),w("/DescendantFonts ["+se+" 0 R]"),w(">>"),w("endobj"),o.isAlreadyPutted=!0}})(d)}]),r.events.push(["putFont",function(d){(function(m){var o=m.font,w=m.out,E=m.newObject,I=m.putStream;if(o.metadata instanceof e.API.TTFFont&&o.encoding==="WinAnsiEncoding"){for(var D=o.metadata.rawData,O="",P=0;P<D.length;P++)O+=String.fromCharCode(D[P]);var W=E();I({data:O,addLength1:!0,objectId:W}),w("endobj");var z=E();I({data:a(o.metadata.toUnicode),addLength1:!0,objectId:z}),w("endobj");var H=E();w("<<"),w("/Descent "+o.metadata.decender),w("/CapHeight "+o.metadata.capHeight),w("/StemV "+o.metadata.stemV),w("/Type /FontDescriptor"),w("/FontFile2 "+W+" 0 R"),w("/Flags 96"),w("/FontBBox "+e.API.PDFObject.convert(o.metadata.bbox)),w("/FontName /"+np(o.fontName)),w("/ItalicAngle "+o.metadata.italicAngle),w("/Ascent "+o.metadata.ascender),w(">>"),w("endobj"),o.objectNumber=E();for(var Z=0;Z<o.metadata.hmtx.widths.length;Z++)o.metadata.hmtx.widths[Z]=parseInt(o.metadata.hmtx.widths[Z]*(1e3/o.metadata.head.unitsPerEm));w("<</Subtype/TrueType/Type/Font/ToUnicode "+z+" 0 R/BaseFont/"+np(o.fontName)+"/FontDescriptor "+H+" 0 R/Encoding/"+o.encoding+" /FirstChar 29 /LastChar 255 /Widths "+e.API.PDFObject.convert(o.metadata.hmtx.widths)+">>"),w("endobj"),o.isAlreadyPutted=!0}})(d)}]);var u=function(d){var m,o=d.text||"",w=d.x,E=d.y,I=d.options||{},D=d.mutex||{},O=D.pdfEscape,P=D.activeFontKey,W=D.fonts,z=P,H="",Z=0,se="",ce=W[z].encoding;if(W[z].encoding!=="Identity-H")return{text:o,x:w,y:E,options:I,mutex:D};for(se=o,z=P,Array.isArray(o)&&(se=o[0]),Z=0;Z<se.length;Z+=1)W[z].metadata.hasOwnProperty("cmap")&&(m=W[z].metadata.cmap.unicode.codeMap[se[Z].charCodeAt(0)]),m||se[Z].charCodeAt(0)<256&&W[z].metadata.hasOwnProperty("Unicode")?H+=se[Z]:H+="";var de="";return parseInt(z.slice(1))<14||ce==="WinAnsiEncoding"?de=O(H,z).split("").map(function(Pe){return Pe.charCodeAt(0).toString(16)}).join(""):ce==="Identity-H"&&(de=i(H,W[z])),D.isHex=!0,{text:de,x:w,y:E,options:I,mutex:D}};r.events.push(["postProcessText",function(d){var m=d.text||"",o=[],w={text:m,x:d.x,y:d.y,options:d.options,mutex:d.mutex};if(Array.isArray(m)){var E=0;for(E=0;E<m.length;E+=1)Array.isArray(m[E])&&m[E].length===3?o.push([u(Object.assign({},w,{text:m[E][0]})).text,m[E][1],m[E][2]]):o.push(u(Object.assign({},w,{text:m[E]})).text);d.text=o}else d.text=u(Object.assign({},w,{text:m})).text}])})(fn),(function(e){var r=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};e.existsFileInVFS=function(i){return r.call(this),this.internal.vFS[i]!==void 0},e.addFileToVFS=function(i,a){return r.call(this),this.internal.vFS[i]=a,this},e.getFileFromVFS=function(i){return r.call(this),this.internal.vFS[i]!==void 0?this.internal.vFS[i]:null}})(fn.API),(function(e){e.__bidiEngine__=e.prototype.__bidiEngine__=function(a){var u,d,m,o,w,E,I,D=r,O=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],P=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],W={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},z={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},H=["(",")","(","<",">","<","[","]","[","{","}","{","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],Z=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),se=!1,ce=0;this.__bidiEngine__={};var de=function(Ae){var me=Ae.charCodeAt(),Te=me>>8,Ie=z[Te];return Ie!==void 0?D[256*Ie+(255&me)]:Te===252||Te===253?"AL":Z.test(Te)?"L":Te===8?"R":"N"},Pe=function(Ae){for(var me,Te=0;Te<Ae.length;Te++){if((me=de(Ae.charAt(Te)))==="L")return!1;if(me==="R")return!0}return!1},He=function(Ae,me,Te,Ie){var ut,it,ot,ke,Ne=me[Ie];switch(Ne){case"L":case"R":case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":se=!1;break;case"N":case"AN":break;case"EN":se&&(Ne="AN");break;case"AL":se=!0,Ne="R";break;case"WS":case"BN":Ne="N";break;case"CS":Ie<1||Ie+1>=me.length||(ut=Te[Ie-1])!=="EN"&&ut!=="AN"||(it=me[Ie+1])!=="EN"&&it!=="AN"?Ne="N":se&&(it="AN"),Ne=it===ut?it:"N";break;case"ES":Ne=(ut=Ie>0?Te[Ie-1]:"B")==="EN"&&Ie+1<me.length&&me[Ie+1]==="EN"?"EN":"N";break;case"ET":if(Ie>0&&Te[Ie-1]==="EN"){Ne="EN";break}if(se){Ne="N";break}for(ot=Ie+1,ke=me.length;ot<ke&&me[ot]==="ET";)ot++;Ne=ot<ke&&me[ot]==="EN"?"EN":"N";break;case"NSM":if(m&&!o){for(ke=me.length,ot=Ie+1;ot<ke&&me[ot]==="NSM";)ot++;if(ot<ke){var yt=Ae[Ie],Ce=yt>=1425&&yt<=2303||yt===64286;if(ut=me[ot],Ce&&(ut==="R"||ut==="AL")){Ne="R";break}}}Ne=Ie<1||(ut=me[Ie-1])==="B"?"N":Te[Ie-1];break;case"B":se=!1,u=!0,Ne=ce;break;case"S":d=!0,Ne="N"}return Ne},Xe=function(Ae,me,Te){var Ie=Ae.split("");return Te&&Qe(Ie,Te,{hiLevel:ce}),Ie.reverse(),me&&me.reverse(),Ie.join("")},Qe=function(Ae,me,Te){var Ie,ut,it,ot,ke,Ne=-1,yt=Ae.length,Ce=0,ie=[],Ee=ce?P:O,Le=[];for(se=!1,u=!1,d=!1,ut=0;ut<yt;ut++)Le[ut]=de(Ae[ut]);for(it=0;it<yt;it++){if(ke=Ce,ie[it]=He(Ae,Le,ie,it),Ie=240&(Ce=Ee[ke][W[ie[it]]]),Ce&=15,me[it]=ot=Ee[Ce][5],Ie>0)if(Ie===16){for(ut=Ne;ut<it;ut++)me[ut]=1;Ne=-1}else Ne=-1;if(Ee[Ce][6])Ne===-1&&(Ne=it);else if(Ne>-1){for(ut=Ne;ut<it;ut++)me[ut]=ot;Ne=-1}Le[it]==="B"&&(me[it]=0),Te.hiLevel|=ot}d&&(function(Ve,nt,et){for(var _t=0;_t<et;_t++)if(Ve[_t]==="S"){nt[_t]=ce;for(var St=_t-1;St>=0&&Ve[St]==="WS";St--)nt[St]=ce}})(Le,me,yt)},Be=function(Ae,me,Te,Ie,ut){if(!(ut.hiLevel<Ae)){if(Ae===1&&ce===1&&!u)return me.reverse(),void(Te&&Te.reverse());for(var it,ot,ke,Ne,yt=me.length,Ce=0;Ce<yt;){if(Ie[Ce]>=Ae){for(ke=Ce+1;ke<yt&&Ie[ke]>=Ae;)ke++;for(Ne=Ce,ot=ke-1;Ne<ot;Ne++,ot--)it=me[Ne],me[Ne]=me[ot],me[ot]=it,Te&&(it=Te[Ne],Te[Ne]=Te[ot],Te[ot]=it);Ce=ke}Ce++}}},Je=function(Ae,me,Te){var Ie=Ae.split(""),ut={hiLevel:ce};return Te||(Te=[]),Qe(Ie,Te,ut),(function(it,ot,ke){if(ke.hiLevel!==0&&I)for(var Ne,yt=0;yt<it.length;yt++)ot[yt]===1&&(Ne=H.indexOf(it[yt]))>=0&&(it[yt]=H[Ne+1])})(Ie,Te,ut),Be(2,Ie,me,Te,ut),Be(1,Ie,me,Te,ut),Ie.join("")};return this.__bidiEngine__.doBidiReorder=function(Ae,me,Te){if((function(ut,it){if(it)for(var ot=0;ot<ut.length;ot++)it[ot]=ot;o===void 0&&(o=Pe(ut)),E===void 0&&(E=Pe(ut))})(Ae,me),m||!w||E)if(m&&w&&o^E)ce=o?1:0,Ae=Xe(Ae,me,Te);else if(!m&&w&&E)ce=o?1:0,Ae=Je(Ae,me,Te),Ae=Xe(Ae,me);else if(!m||o||w||E){if(m&&!w&&o^E)Ae=Xe(Ae,me),o?(ce=0,Ae=Je(Ae,me,Te)):(ce=1,Ae=Je(Ae,me,Te),Ae=Xe(Ae,me));else if(m&&o&&!w&&E)ce=1,Ae=Je(Ae,me,Te),Ae=Xe(Ae,me);else if(!m&&!w&&o^E){var Ie=I;o?(ce=1,Ae=Je(Ae,me,Te),ce=0,I=!1,Ae=Je(Ae,me,Te),I=Ie):(ce=0,Ae=Je(Ae,me,Te),Ae=Xe(Ae,me),ce=1,I=!1,Ae=Je(Ae,me,Te),I=Ie,Ae=Xe(Ae,me))}}else ce=0,Ae=Je(Ae,me,Te);else ce=o?1:0,Ae=Je(Ae,me,Te);return Ae},this.__bidiEngine__.setOptions=function(Ae){Ae&&(m=Ae.isInputVisual,w=Ae.isOutputVisual,o=Ae.isInputRtl,E=Ae.isOutputRtl,I=Ae.isSymmetricSwapping)},this.__bidiEngine__.setOptions(a),this.__bidiEngine__};var r=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],i=new e.__bidiEngine__({isInputVisual:!0});e.API.events.push(["postProcessText",function(a){var u=a.text;a.x,a.y;var d=a.options||{};a.mutex,d.lang;var m=[];if(d.isInputVisual=typeof d.isInputVisual!="boolean"||d.isInputVisual,i.setOptions(d),Object.prototype.toString.call(u)==="[object Array]"){var o=0;for(m=[],o=0;o<u.length;o+=1)Object.prototype.toString.call(u[o])==="[object Array]"?m.push([i.doBidiReorder(u[o][0]),u[o][1],u[o][2]]):m.push([i.doBidiReorder(u[o])]);a.text=m}else a.text=i.doBidiReorder(u);i.setOptions({isInputVisual:!0})}])})(fn),fn.API.TTFFont=(function(){function e(r){var i;if(this.rawData=r,i=this.contents=new Bd(r),this.contents.pos=4,i.readString(4)==="ttcf")throw new Error("TTCF not supported.");i.pos=0,this.parse(),this.subset=new Y7(this),this.registerTTF()}return e.open=function(r){return new e(r)},e.prototype.parse=function(){return this.directory=new N7(this.contents),this.head=new O7(this),this.name=new G7(this),this.cmap=new DT(this),this.toUnicode={},this.hhea=new z7(this),this.maxp=new K7(this),this.hmtx=new q7(this),this.post=new j7(this),this.os2=new H7(this),this.loca=new X7(this),this.glyf=new $7(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},e.prototype.registerTTF=function(){var r,i,a,u,d;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var m,o,w,E;for(E=[],m=0,o=(w=this.bbox).length;m<o;m++)r=w[m],E.push(Math.round(r*this.scaleFactor));return E}).call(this),this.stemV=0,this.post.exists?(a=255&(u=this.post.italic_angle),32768&(i=u>>16)&&(i=-(1+(65535^i))),this.italicAngle=+(i+"."+a)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(d=this.familyClass)===1||d===2||d===3||d===4||d===5||d===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},e.prototype.characterToGlyph=function(r){var i;return((i=this.cmap.unicode)!=null?i.codeMap[r]:void 0)||0},e.prototype.widthOfGlyph=function(r){var i;return i=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(r).advance*i},e.prototype.widthOfString=function(r,i,a){var u,d,m,o;for(m=0,d=0,o=(r=""+r).length;0<=o?d<o:d>o;d=0<=o?++d:--d)u=r.charCodeAt(d),m+=this.widthOfGlyph(this.characterToGlyph(u))+a*(1e3/i)||0;return m*(i/1e3)},e.prototype.lineHeight=function(r,i){var a;return i==null&&(i=!1),a=i?this.lineGap:0,(this.ascender+a-this.decender)/1e3*r},e})();var ku,Bd=(function(){function e(r){this.data=r??[],this.pos=0,this.length=this.data.length}return e.prototype.readByte=function(){return this.data[this.pos++]},e.prototype.writeByte=function(r){return this.data[this.pos++]=r},e.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},e.prototype.writeUInt32=function(r){return this.writeByte(r>>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r)},e.prototype.readInt32=function(){var r;return(r=this.readUInt32())>=2147483648?r-4294967296:r},e.prototype.writeInt32=function(r){return r<0&&(r+=4294967296),this.writeUInt32(r)},e.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},e.prototype.writeUInt16=function(r){return this.writeByte(r>>8&255),this.writeByte(255&r)},e.prototype.readInt16=function(){var r;return(r=this.readUInt16())>=32768?r-65536:r},e.prototype.writeInt16=function(r){return r<0&&(r+=65536),this.writeUInt16(r)},e.prototype.readString=function(r){var i,a;for(a=[],i=0;0<=r?i<r:i>r;i=0<=r?++i:--i)a[i]=String.fromCharCode(this.readByte());return a.join("")},e.prototype.writeString=function(r){var i,a,u;for(u=[],i=0,a=r.length;0<=a?i<a:i>a;i=0<=a?++i:--i)u.push(this.writeByte(r.charCodeAt(i)));return u},e.prototype.readShort=function(){return this.readInt16()},e.prototype.writeShort=function(r){return this.writeInt16(r)},e.prototype.readLongLong=function(){var r,i,a,u,d,m,o,w;return r=this.readByte(),i=this.readByte(),a=this.readByte(),u=this.readByte(),d=this.readByte(),m=this.readByte(),o=this.readByte(),w=this.readByte(),128&r?-1*(72057594037927940*(255^r)+281474976710656*(255^i)+1099511627776*(255^a)+4294967296*(255^u)+16777216*(255^d)+65536*(255^m)+256*(255^o)+(255^w)+1):72057594037927940*r+281474976710656*i+1099511627776*a+4294967296*u+16777216*d+65536*m+256*o+w},e.prototype.writeLongLong=function(r){var i,a;return i=Math.floor(r/4294967296),a=4294967295&r,this.writeByte(i>>24&255),this.writeByte(i>>16&255),this.writeByte(i>>8&255),this.writeByte(255&i),this.writeByte(a>>24&255),this.writeByte(a>>16&255),this.writeByte(a>>8&255),this.writeByte(255&a)},e.prototype.readInt=function(){return this.readInt32()},e.prototype.writeInt=function(r){return this.writeInt32(r)},e.prototype.read=function(r){var i,a;for(i=[],a=0;0<=r?a<r:a>r;a=0<=r?++a:--a)i.push(this.readByte());return i},e.prototype.write=function(r){var i,a,u,d;for(d=[],a=0,u=r.length;a<u;a++)i=r[a],d.push(this.writeByte(i));return d},e})(),N7=(function(){var e;function r(i){var a,u,d;for(this.scalarType=i.readInt(),this.tableCount=i.readShort(),this.searchRange=i.readShort(),this.entrySelector=i.readShort(),this.rangeShift=i.readShort(),this.tables={},u=0,d=this.tableCount;0<=d?u<d:u>d;u=0<=d?++u:--u)a={tag:i.readString(4),checksum:i.readInt(),offset:i.readInt(),length:i.readInt()},this.tables[a.tag]=a}return r.prototype.encode=function(i){var a,u,d,m,o,w,E,I,D,O,P,W,z;for(z in P=Object.keys(i).length,w=Math.log(2),D=16*Math.floor(Math.log(P)/w),m=Math.floor(D/w),I=16*P-D,(u=new Bd).writeInt(this.scalarType),u.writeShort(P),u.writeShort(D),u.writeShort(m),u.writeShort(I),d=16*P,E=u.pos+d,o=null,W=[],i)for(O=i[z],u.writeString(z),u.writeInt(e(O)),u.writeInt(E),u.writeInt(O.length),W=W.concat(O),z==="head"&&(o=E),E+=O.length;E%4;)W.push(0),E++;return u.write(W),a=2981146554-e(u.data),u.pos=o+8,u.writeUInt32(a),u.data},e=function(i){var a,u,d,m;for(i=RT.call(i);i.length%4;)i.push(0);for(d=new Bd(i),u=0,a=0,m=i.length;a<m;a=a+=4)u+=d.readUInt32();return 4294967295&u},r})(),Q7={}.hasOwnProperty,lh=function(e,r){for(var i in r)Q7.call(r,i)&&(e[i]=r[i]);function a(){this.constructor=e}return a.prototype=r.prototype,e.prototype=new a,e.__super__=r.prototype,e};ku=(function(){function e(r){var i;this.file=r,i=this.file.directory.tables[this.tag],this.exists=!!i,i&&(this.offset=i.offset,this.length=i.length,this.parse(this.file.contents))}return e.prototype.parse=function(){},e.prototype.encode=function(){},e.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},e})();var O7=(function(){function e(){return e.__super__.constructor.apply(this,arguments)}return lh(e,ku),e.prototype.tag="head",e.prototype.parse=function(r){return r.pos=this.offset,this.version=r.readInt(),this.revision=r.readInt(),this.checkSumAdjustment=r.readInt(),this.magicNumber=r.readInt(),this.flags=r.readShort(),this.unitsPerEm=r.readShort(),this.created=r.readLongLong(),this.modified=r.readLongLong(),this.xMin=r.readShort(),this.yMin=r.readShort(),this.xMax=r.readShort(),this.yMax=r.readShort(),this.macStyle=r.readShort(),this.lowestRecPPEM=r.readShort(),this.fontDirectionHint=r.readShort(),this.indexToLocFormat=r.readShort(),this.glyphDataFormat=r.readShort()},e.prototype.encode=function(r){var i;return(i=new Bd).writeInt(this.version),i.writeInt(this.revision),i.writeInt(this.checkSumAdjustment),i.writeInt(this.magicNumber),i.writeShort(this.flags),i.writeShort(this.unitsPerEm),i.writeLongLong(this.created),i.writeLongLong(this.modified),i.writeShort(this.xMin),i.writeShort(this.yMin),i.writeShort(this.xMax),i.writeShort(this.yMax),i.writeShort(this.macStyle),i.writeShort(this.lowestRecPPEM),i.writeShort(this.fontDirectionHint),i.writeShort(r),i.writeShort(this.glyphDataFormat),i.data},e})(),c5=(function(){function e(r,i){var a,u,d,m,o,w,E,I,D,O,P,W,z,H,Z,se,ce;switch(this.platformID=r.readUInt16(),this.encodingID=r.readShort(),this.offset=i+r.readInt(),D=r.pos,r.pos=this.offset,this.format=r.readUInt16(),this.length=r.readUInt16(),this.language=r.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(w=0;w<256;++w)this.codeMap[w]=r.readByte();break;case 4:for(P=r.readUInt16(),O=P/2,r.pos+=6,d=(function(){var de,Pe;for(Pe=[],w=de=0;0<=O?de<O:de>O;w=0<=O?++de:--de)Pe.push(r.readUInt16());return Pe})(),r.pos+=2,z=(function(){var de,Pe;for(Pe=[],w=de=0;0<=O?de<O:de>O;w=0<=O?++de:--de)Pe.push(r.readUInt16());return Pe})(),E=(function(){var de,Pe;for(Pe=[],w=de=0;0<=O?de<O:de>O;w=0<=O?++de:--de)Pe.push(r.readUInt16());return Pe})(),I=(function(){var de,Pe;for(Pe=[],w=de=0;0<=O?de<O:de>O;w=0<=O?++de:--de)Pe.push(r.readUInt16());return Pe})(),u=(this.length-r.pos+this.offset)/2,o=(function(){var de,Pe;for(Pe=[],w=de=0;0<=u?de<u:de>u;w=0<=u?++de:--de)Pe.push(r.readUInt16());return Pe})(),w=Z=0,ce=d.length;Z<ce;w=++Z)for(H=d[w],a=se=W=z[w];W<=H?se<=H:se>=H;a=W<=H?++se:--se)I[w]===0?m=a+E[w]:(m=o[I[w]/2+(a-W)-(O-w)]||0)!==0&&(m+=E[w]),this.codeMap[a]=65535&m}r.pos=D}return e.encode=function(r,i){var a,u,d,m,o,w,E,I,D,O,P,W,z,H,Z,se,ce,de,Pe,He,Xe,Qe,Be,Je,Ae,me,Te,Ie,ut,it,ot,ke,Ne,yt,Ce,ie,Ee,Le,Ve,nt,et,_t,St,Tt,Gt,or;switch(Ie=new Bd,m=Object.keys(r).sort(function(Ar,_r){return Ar-_r}),i){case"macroman":for(z=0,H=(function(){var Ar=[];for(W=0;W<256;++W)Ar.push(0);return Ar})(),se={0:0},d={},ut=0,Ne=m.length;ut<Ne;ut++)se[St=r[u=m[ut]]]==null&&(se[St]=++z),d[u]={old:r[u],new:se[r[u]]},H[u]=se[r[u]];return Ie.writeUInt16(1),Ie.writeUInt16(0),Ie.writeUInt32(12),Ie.writeUInt16(0),Ie.writeUInt16(262),Ie.writeUInt16(0),Ie.write(H),{charMap:d,subtable:Ie.data,maxGlyphID:z+1};case"unicode":for(me=[],D=[],ce=0,se={},a={},Z=E=null,it=0,yt=m.length;it<yt;it++)se[Pe=r[u=m[it]]]==null&&(se[Pe]=++ce),a[u]={old:Pe,new:se[Pe]},o=se[Pe]-u,Z!=null&&o===E||(Z&&D.push(Z),me.push(u),E=o),Z=u;for(Z&&D.push(Z),D.push(65535),me.push(65535),Je=2*(Be=me.length),Qe=2*Math.pow(Math.log(Be)/Math.LN2,2),O=Math.log(Qe/2)/Math.LN2,Xe=2*Be-Qe,w=[],He=[],P=[],W=ot=0,Ce=me.length;ot<Ce;W=++ot){if(Ae=me[W],I=D[W],Ae===65535){w.push(0),He.push(0);break}if(Ae-(Te=a[Ae].new)>=32768)for(w.push(0),He.push(2*(P.length+Be-W)),u=ke=Ae;Ae<=I?ke<=I:ke>=I;u=Ae<=I?++ke:--ke)P.push(a[u].new);else w.push(Te-Ae),He.push(0)}for(Ie.writeUInt16(3),Ie.writeUInt16(1),Ie.writeUInt32(12),Ie.writeUInt16(4),Ie.writeUInt16(16+8*Be+2*P.length),Ie.writeUInt16(0),Ie.writeUInt16(Je),Ie.writeUInt16(Qe),Ie.writeUInt16(O),Ie.writeUInt16(Xe),et=0,ie=D.length;et<ie;et++)u=D[et],Ie.writeUInt16(u);for(Ie.writeUInt16(0),_t=0,Ee=me.length;_t<Ee;_t++)u=me[_t],Ie.writeUInt16(u);for(Tt=0,Le=w.length;Tt<Le;Tt++)o=w[Tt],Ie.writeUInt16(o);for(Gt=0,Ve=He.length;Gt<Ve;Gt++)de=He[Gt],Ie.writeUInt16(de);for(or=0,nt=P.length;or<nt;or++)z=P[or],Ie.writeUInt16(z);return{charMap:a,subtable:Ie.data,maxGlyphID:ce+1}}},e})(),DT=(function(){function e(){return e.__super__.constructor.apply(this,arguments)}return lh(e,ku),e.prototype.tag="cmap",e.prototype.parse=function(r){var i,a,u;for(r.pos=this.offset,this.version=r.readUInt16(),u=r.readUInt16(),this.tables=[],this.unicode=null,a=0;0<=u?a<u:a>u;a=0<=u?++a:--a)i=new c5(r,this.offset),this.tables.push(i),i.isUnicode&&this.unicode==null&&(this.unicode=i);return!0},e.encode=function(r,i){var a,u;return i==null&&(i="macroman"),a=c5.encode(r,i),(u=new Bd).writeUInt16(0),u.writeUInt16(1),a.table=u.data.concat(a.subtable),a},e})(),z7=(function(){function e(){return e.__super__.constructor.apply(this,arguments)}return lh(e,ku),e.prototype.tag="hhea",e.prototype.parse=function(r){return r.pos=this.offset,this.version=r.readInt(),this.ascender=r.readShort(),this.decender=r.readShort(),this.lineGap=r.readShort(),this.advanceWidthMax=r.readShort(),this.minLeftSideBearing=r.readShort(),this.minRightSideBearing=r.readShort(),this.xMaxExtent=r.readShort(),this.caretSlopeRise=r.readShort(),this.caretSlopeRun=r.readShort(),this.caretOffset=r.readShort(),r.pos+=8,this.metricDataFormat=r.readShort(),this.numberOfMetrics=r.readUInt16()},e})(),H7=(function(){function e(){return e.__super__.constructor.apply(this,arguments)}return lh(e,ku),e.prototype.tag="OS/2",e.prototype.parse=function(r){if(r.pos=this.offset,this.version=r.readUInt16(),this.averageCharWidth=r.readShort(),this.weightClass=r.readUInt16(),this.widthClass=r.readUInt16(),this.type=r.readShort(),this.ySubscriptXSize=r.readShort(),this.ySubscriptYSize=r.readShort(),this.ySubscriptXOffset=r.readShort(),this.ySubscriptYOffset=r.readShort(),this.ySuperscriptXSize=r.readShort(),this.ySuperscriptYSize=r.readShort(),this.ySuperscriptXOffset=r.readShort(),this.ySuperscriptYOffset=r.readShort(),this.yStrikeoutSize=r.readShort(),this.yStrikeoutPosition=r.readShort(),this.familyClass=r.readShort(),this.panose=(function(){var i,a;for(a=[],i=0;i<10;++i)a.push(r.readByte());return a})(),this.charRange=(function(){var i,a;for(a=[],i=0;i<4;++i)a.push(r.readInt());return a})(),this.vendorID=r.readString(4),this.selection=r.readShort(),this.firstCharIndex=r.readShort(),this.lastCharIndex=r.readShort(),this.version>0&&(this.ascent=r.readShort(),this.descent=r.readShort(),this.lineGap=r.readShort(),this.winAscent=r.readShort(),this.winDescent=r.readShort(),this.codePageRange=(function(){var i,a;for(a=[],i=0;i<2;i=++i)a.push(r.readInt());return a})(),this.version>1))return this.xHeight=r.readShort(),this.capHeight=r.readShort(),this.defaultChar=r.readShort(),this.breakChar=r.readShort(),this.maxContext=r.readShort()},e})(),j7=(function(){function e(){return e.__super__.constructor.apply(this,arguments)}return lh(e,ku),e.prototype.tag="post",e.prototype.parse=function(r){var i,a,u;switch(r.pos=this.offset,this.format=r.readInt(),this.italicAngle=r.readInt(),this.underlinePosition=r.readShort(),this.underlineThickness=r.readShort(),this.isFixedPitch=r.readInt(),this.minMemType42=r.readInt(),this.maxMemType42=r.readInt(),this.minMemType1=r.readInt(),this.maxMemType1=r.readInt(),this.format){case 65536:case 196608:break;case 131072:var d;for(a=r.readUInt16(),this.glyphNameIndex=[],d=0;0<=a?d<a:d>a;d=0<=a?++d:--d)this.glyphNameIndex.push(r.readUInt16());for(this.names=[],u=[];r.pos<this.offset+this.length;)i=r.readByte(),u.push(this.names.push(r.readString(i)));return u;case 151552:return a=r.readUInt16(),this.offsets=r.read(a);case 262144:return this.map=(function(){var m,o,w;for(w=[],d=m=0,o=this.file.maxp.numGlyphs;0<=o?m<o:m>o;d=0<=o?++m:--m)w.push(r.readUInt32());return w}).call(this)}},e})(),V7=function(e,r){this.raw=e,this.length=e.length,this.platformID=r.platformID,this.encodingID=r.encodingID,this.languageID=r.languageID},G7=(function(){function e(){return e.__super__.constructor.apply(this,arguments)}return lh(e,ku),e.prototype.tag="name",e.prototype.parse=function(r){var i,a,u,d,m,o,w,E,I,D,O;for(r.pos=this.offset,r.readShort(),i=r.readShort(),o=r.readShort(),a=[],d=0;0<=i?d<i:d>i;d=0<=i?++d:--d)a.push({platformID:r.readShort(),encodingID:r.readShort(),languageID:r.readShort(),nameID:r.readShort(),length:r.readShort(),offset:this.offset+o+r.readShort()});for(w={},d=I=0,D=a.length;I<D;d=++I)u=a[d],r.pos=u.offset,E=r.readString(u.length),m=new V7(E,u),w[O=u.nameID]==null&&(w[O]=[]),w[u.nameID].push(m);this.strings=w,this.copyright=w[0],this.fontFamily=w[1],this.fontSubfamily=w[2],this.uniqueSubfamily=w[3],this.fontName=w[4],this.version=w[5];try{this.postscriptName=w[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=w[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=w[7],this.manufacturer=w[8],this.designer=w[9],this.description=w[10],this.vendorUrl=w[11],this.designerUrl=w[12],this.license=w[13],this.licenseUrl=w[14],this.preferredFamily=w[15],this.preferredSubfamily=w[17],this.compatibleFull=w[18],this.sampleText=w[19]},e})(),K7=(function(){function e(){return e.__super__.constructor.apply(this,arguments)}return lh(e,ku),e.prototype.tag="maxp",e.prototype.parse=function(r){return r.pos=this.offset,this.version=r.readInt(),this.numGlyphs=r.readUInt16(),this.maxPoints=r.readUInt16(),this.maxContours=r.readUInt16(),this.maxCompositePoints=r.readUInt16(),this.maxComponentContours=r.readUInt16(),this.maxZones=r.readUInt16(),this.maxTwilightPoints=r.readUInt16(),this.maxStorage=r.readUInt16(),this.maxFunctionDefs=r.readUInt16(),this.maxInstructionDefs=r.readUInt16(),this.maxStackElements=r.readUInt16(),this.maxSizeOfInstructions=r.readUInt16(),this.maxComponentElements=r.readUInt16(),this.maxComponentDepth=r.readUInt16()},e})(),q7=(function(){function e(){return e.__super__.constructor.apply(this,arguments)}return lh(e,ku),e.prototype.tag="hmtx",e.prototype.parse=function(r){var i,a,u,d,m,o,w;for(r.pos=this.offset,this.metrics=[],i=0,o=this.file.hhea.numberOfMetrics;0<=o?i<o:i>o;i=0<=o?++i:--i)this.metrics.push({advance:r.readUInt16(),lsb:r.readInt16()});for(u=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=(function(){var E,I;for(I=[],i=E=0;0<=u?E<u:E>u;i=0<=u?++E:--E)I.push(r.readInt16());return I})(),this.widths=(function(){var E,I,D,O;for(O=[],E=0,I=(D=this.metrics).length;E<I;E++)d=D[E],O.push(d.advance);return O}).call(this),a=this.widths[this.widths.length-1],w=[],i=m=0;0<=u?m<u:m>u;i=0<=u?++m:--m)w.push(this.widths.push(a));return w},e.prototype.forGlyph=function(r){return r in this.metrics?this.metrics[r]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[r-this.metrics.length]}},e})(),RT=[].slice,$7=(function(){function e(){return e.__super__.constructor.apply(this,arguments)}return lh(e,ku),e.prototype.tag="glyf",e.prototype.parse=function(){return this.cache={}},e.prototype.glyphFor=function(r){var i,a,u,d,m,o,w,E,I,D;return r in this.cache?this.cache[r]:(d=this.file.loca,i=this.file.contents,a=d.indexOf(r),(u=d.lengthOf(r))===0?this.cache[r]=null:(i.pos=this.offset+a,m=(o=new Bd(i.read(u))).readShort(),E=o.readShort(),D=o.readShort(),w=o.readShort(),I=o.readShort(),this.cache[r]=m===-1?new Z7(o,E,D,w,I):new W7(o,m,E,D,w,I),this.cache[r]))},e.prototype.encode=function(r,i,a){var u,d,m,o,w;for(m=[],d=[],o=0,w=i.length;o<w;o++)u=r[i[o]],d.push(m.length),u&&(m=m.concat(u.encode(a)));return d.push(m.length),{table:m,offsets:d}},e})(),W7=(function(){function e(r,i,a,u,d,m){this.raw=r,this.numberOfContours=i,this.xMin=a,this.yMin=u,this.xMax=d,this.yMax=m,this.compound=!1}return e.prototype.encode=function(){return this.raw.data},e})(),Z7=(function(){function e(r,i,a,u,d){var m,o;for(this.raw=r,this.xMin=i,this.yMin=a,this.xMax=u,this.yMax=d,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],m=this.raw;o=m.readShort(),this.glyphOffsets.push(m.pos),this.glyphIDs.push(m.readUInt16()),32&o;)m.pos+=1&o?4:2,128&o?m.pos+=8:64&o?m.pos+=4:8&o&&(m.pos+=2)}return e.prototype.encode=function(){var r,i,a;for(i=new Bd(RT.call(this.raw.data)),r=0,a=this.glyphIDs.length;r<a;++r)i.pos=this.glyphOffsets[r];return i.data},e})(),X7=(function(){function e(){return e.__super__.constructor.apply(this,arguments)}return lh(e,ku),e.prototype.tag="loca",e.prototype.parse=function(r){var i,a;return r.pos=this.offset,i=this.file.head.indexToLocFormat,this.offsets=i===0?(function(){var u,d;for(d=[],a=0,u=this.length;a<u;a+=2)d.push(2*r.readUInt16());return d}).call(this):(function(){var u,d;for(d=[],a=0,u=this.length;a<u;a+=4)d.push(r.readUInt32());return d}).call(this)},e.prototype.indexOf=function(r){return this.offsets[r]},e.prototype.lengthOf=function(r){return this.offsets[r+1]-this.offsets[r]},e.prototype.encode=function(r,i){for(var a=new Uint32Array(this.offsets.length),u=0,d=0,m=0;m<a.length;++m)if(a[m]=u,d<i.length&&i[d]==m){++d,a[m]=u;var o=this.offsets[m],w=this.offsets[m+1]-o;w>0&&(u+=w)}for(var E=new Array(4*a.length),I=0;I<a.length;++I)E[4*I+3]=255&a[I],E[4*I+2]=(65280&a[I])>>8,E[4*I+1]=(16711680&a[I])>>16,E[4*I]=(4278190080&a[I])>>24;return E},e})(),Y7=(function(){function e(r){this.font=r,this.subset={},this.unicodes={},this.next=33}return e.prototype.generateCmap=function(){var r,i,a,u,d;for(i in u=this.font.cmap.tables[0].codeMap,r={},d=this.subset)a=d[i],r[i]=u[a];return r},e.prototype.glyphsFor=function(r){var i,a,u,d,m,o,w;for(u={},m=0,o=r.length;m<o;m++)u[d=r[m]]=this.font.glyf.glyphFor(d);for(d in i=[],u)(a=u[d])!=null&&a.compound&&i.push.apply(i,a.glyphIDs);if(i.length>0)for(d in w=this.glyphsFor(i))a=w[d],u[d]=a;return u},e.prototype.encode=function(r,i){var a,u,d,m,o,w,E,I,D,O,P,W,z,H,Z;for(u in a=DT.encode(this.generateCmap(),"unicode"),m=this.glyphsFor(r),P={0:0},Z=a.charMap)P[(w=Z[u]).old]=w.new;for(W in O=a.maxGlyphID,m)W in P||(P[W]=O++);return I=(function(se){var ce,de;for(ce in de={},se)de[se[ce]]=ce;return de})(P),D=Object.keys(I).sort(function(se,ce){return se-ce}),z=(function(){var se,ce,de;for(de=[],se=0,ce=D.length;se<ce;se++)o=D[se],de.push(I[o]);return de})(),d=this.font.glyf.encode(m,z,P),E=this.font.loca.encode(d.offsets,z),H={cmap:this.font.cmap.raw(),glyf:d.table,loca:E,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(i)},this.font.os2.exists&&(H["OS/2"]=this.font.os2.raw()),this.font.directory.encode(H)},e})();fn.API.PDFObject=(function(){var e;function r(){}return e=function(i,a){return(Array(a+1).join("0")+i).slice(-a)},r.convert=function(i){var a,u,d,m;if(Array.isArray(i))return"["+(function(){var o,w,E;for(E=[],o=0,w=i.length;o<w;o++)a=i[o],E.push(r.convert(a));return E})().join(" ")+"]";if(typeof i=="string")return"/"+i;if(i?.isString)return"("+i+")";if(i instanceof Date)return"(D:"+e(i.getUTCFullYear(),4)+e(i.getUTCMonth(),2)+e(i.getUTCDate(),2)+e(i.getUTCHours(),2)+e(i.getUTCMinutes(),2)+e(i.getUTCSeconds(),2)+"Z)";if({}.toString.call(i)==="[object Object]"){for(u in d=["<<"],i)m=i[u],d.push("/"+u+" "+r.convert(m));return d.push(">>"),d.join(`
`)}return""+i},r})();const A5={AL:"Alabama",AK:"Alaska",AZ:"Arizona",AR:"Arkansas",CA:"California",CO:"Colorado",CT:"Connecticut",DE:"Delaware",DC:"District of Columbia",FL:"Florida",GA:"Georgia",HI:"Hawaii",ID:"Idaho",IL:"Illinois",IN:"Indiana",IA:"Iowa",KS:"Kansas",KY:"Kentucky",LA:"Louisiana",ME:"Maine",MD:"Maryland",MA:"Massachusetts",MI:"Michigan",MN:"Minnesota",MS:"Mississippi",MO:"Missouri",MT:"Montana",NE:"Nebraska",NV:"Nevada",NH:"New Hampshire",NJ:"New Jersey",NM:"New Mexico",NY:"New York",NC:"North Carolina",ND:"North Dakota",OH:"Ohio",OK:"Oklahoma",OR:"Oregon",PA:"Pennsylvania",PR:"Puerto Rico",RI:"Rhode Island",SC:"South Carolina",SD:"South Dakota",TN:"Tennessee",TX:"Texas",UT:"Utah",VT:"Vermont",VA:"Virginia",WA:"Washington",WV:"West Virginia",WI:"Wisconsin",WY:"Wyoming"};function J7({allZipData:e,selectedMetric:r,onClose:i}){const[a,u]=ee.useState("national"),[d,m]=ee.useState(""),[o,w]=ee.useState(""),[E,I]=ee.useState(""),[D,O]=ee.useState(""),[P,W]=ee.useState(!1),z=ee.useRef(null),[H,Z]=ee.useState("png"),[se,ce]=ee.useState(!0),[de,Pe]=ee.useState(!0),[He,Xe]=ee.useState(!1),[Qe,Be]=ee.useState(!1),Je=ee.useRef(null);ee.useEffect(()=>{const Ce=setTimeout(()=>O(E),150);return()=>clearTimeout(Ce)},[E]),ee.useEffect(()=>{function Ce(ie){z.current&&!z.current.contains(ie.target)&&W(!1)}return document.addEventListener("mousedown",Ce),()=>document.removeEventListener("mousedown",Ce)},[]),ee.useEffect(()=>{Be(!1)},[a,d,o,r,se,de]);const{availableStates:Ae,filteredMetros:me}=ee.useMemo(()=>{if(Object.keys(e).length===0)return{availableStates:[],filteredMetros:[]};const Ce=new Set,ie=new Set;for(const nt of Object.values(e))nt.state&&Ce.add(nt.state),nt.metro&&ie.add(nt.metro);const Ee=Array.from(Ce).map(nt=>({code:nt,name:A5[nt]||nt})).sort((nt,et)=>nt.name.localeCompare(et.name)),Le=Array.from(ie).sort(),Ve=D?Le.filter(nt=>nt.toLowerCase().includes(D.toLowerCase())):Le;return{availableStates:Ee,filteredMetros:Ve}},[e,D]),Te=ee.useMemo(()=>!!(a==="national"||a==="state"&&d||a==="metro"&&o),[a,d,o]),Ie=ee.useMemo(()=>Te?Object.keys(e).length===0?[]:Object.values(e).filter(Ce=>a==="state"&&d?Ce.state===d:a==="metro"&&o?Ce.metro===o:!0):[],[e,a,d,o,Te]),ut=ee.useMemo(()=>a==="state"?A5[d]||d||"Select a state":a==="metro"?o||"Select a metro area":"United States",[a,d,o]),it=()=>!!(He||!Qe||!Te||Ie.length===0),ot=()=>{if(He)return"Exporting...";if(!Te){if(a==="state")return"Select a state";if(a==="metro")return"Select a metro"}return!Qe&&Ie.length>0?"Rendering...":`Export ${H.toUpperCase()}`},ke=ee.useCallback(async()=>{const Ce=Je.current?.getElement();if(Ce){window.dataLayer=window.dataLayer||[],window.dataLayer.push({event:"map_export_click",export_settings:{format:H,metric:r,scope:a,region_name:ut,include_legend:se,include_title:de}}),Xe(!0);try{await new Promise(Le=>requestAnimationFrame(Le)),await new Promise(Le=>setTimeout(Le,100));const Ee=await JI(Ce,{scale:5,useCORS:!0,backgroundColor:"#ffffff",logging:!1,allowTaint:!0});if(H==="png"){const Le=document.createElement("a");Le.download=`Domapus-${r}-${a}.png`,Le.href=Ee.toDataURL("image/png",1),Le.click()}else{const Le=Ee.toDataURL("image/png",1),Ve=new fn({orientation:"landscape",unit:"pt",format:"a4"}),nt=Ve.internal.pageSize.getWidth(),et=Ve.internal.pageSize.getHeight(),_t=Ee.width/Ee.height,St=nt/et;let Tt,Gt,or,Ar;_t>St?(Tt=nt,Gt=nt/_t,or=0,Ar=(et-Gt)/2):(Gt=et,Tt=et*_t,or=(nt-Tt)/2,Ar=0),Ve.addImage(Le,"PNG",or,Ar,Tt,Gt);const _r=Ce.getBoundingClientRect();Ce.querySelectorAll("a").forEach(mr=>{const kr=mr.getBoundingClientRect(),Vr=(kr.left-_r.left)/_r.width,lr=(kr.top-_r.top)/_r.height,Gr=kr.width/_r.width,Er=kr.height/_r.height,Nr=or+Vr*Tt,Dr=Ar+lr*Gt,Dn=Gr*Tt,un=Er*Gt;Ve.link(Nr,Dr,Dn,un,{url:mr.href})}),Ve.save(`Domapus-${r}-${a}.pdf`)}a_({title:"Export Complete",description:"Your map has been downloaded.",duration:3e4})}catch(ie){console.error("Export failed:",ie),a_({title:"Export Failed",description:"Something went wrong.",variant:"destructive"})}finally{Xe(!1)}}},[H,r,a]),Ne=Ce=>{w(Ce),I(Ce),W(!1)},yt=()=>{w(""),I(""),O(""),W(!0)};return ae.jsxs("div",{className:"fixed inset-0 bg-background z-50 flex",children:[ae.jsxs("div",{className:"w-80 bg-background border-r h-full shadow-xl flex flex-col",children:[ae.jsxs("div",{className:"p-4 space-y-4 flex-1 overflow-y-auto",children:[ae.jsxs("div",{className:"flex items-center gap-2 pb-2 border-b",children:[ae.jsx(h_,{className:"h-4 w-4 text-primary"}),ae.jsx("h2",{className:"text-base font-semibold",children:"Export Settings"})]}),ae.jsxs("div",{className:"p-3 rounded-md border bg-muted/20 space-y-3",children:[ae.jsxs("div",{className:"flex items-center gap-2 text-sm font-medium",children:[ae.jsx(cP,{className:"h-3.5 w-3.5"}),ae.jsx("span",{children:"Region Scope"})]}),ae.jsxs(I_,{value:a,onValueChange:Ce=>u(Ce),className:"space-y-2",children:[ae.jsxs("div",{className:"flex items-center space-x-2",children:[ae.jsx(Yf,{value:"national",id:"r-national"}),ae.jsx(od,{htmlFor:"r-national",className:"text-sm",children:"National"})]}),ae.jsxs("div",{className:"flex items-center space-x-2",children:[ae.jsx(Yf,{value:"state",id:"r-state"}),ae.jsx(od,{htmlFor:"r-state",className:"text-sm",children:"State"})]}),ae.jsxs("div",{className:"flex items-center space-x-2",children:[ae.jsx(Yf,{value:"metro",id:"r-metro"}),ae.jsx(od,{htmlFor:"r-metro",className:"text-sm",children:"Metro Area"})]})]}),a==="state"&&ae.jsxs(fF,{value:d,onValueChange:m,children:[ae.jsx(qw,{className:"h-9",children:ae.jsx(pF,{placeholder:"Select a state"})}),ae.jsx($w,{children:Ae.map(Ce=>ae.jsx(Ww,{value:Ce.code,children:Ce.name},Ce.code))})]}),a==="metro"&&ae.jsxs("div",{className:"space-y-2 relative",ref:z,children:[ae.jsxs("div",{className:"relative",children:[ae.jsx(Ew,{className:"absolute left-2 top-2.5 h-4 w-4 text-muted-foreground"}),ae.jsx(Ry,{placeholder:"Type to search metros...",value:E,onChange:Ce=>{I(Ce.target.value),W(!0),o&&Ce.target.value!==o&&w("")},onFocus:()=>W(!0),className:"pl-8 h-9 pr-8"}),E&&ae.jsx("button",{onClick:yt,className:"absolute right-2 top-2.5 text-muted-foreground hover:text-foreground",children:ae.jsx($m,{className:"h-4 w-4"})})]}),P&&ae.jsx("div",{className:"absolute z-10 w-full mt-1 bg-popover text-popover-foreground border rounded-md shadow-md max-h-[250px] overflow-y-auto",children:me.length>0?ae.jsx("div",{className:"p-1",children:me.map(Ce=>ae.jsx("div",{onClick:()=>Ne(Ce),className:qi("relative flex w-full cursor-pointer select-none items-center rounded-sm py-1.5 px-2 text-sm outline-none hover:bg-accent hover:text-accent-foreground",o===Ce&&"bg-accent text-accent-foreground font-medium"),children:Ce},Ce))}):ae.jsx("div",{className:"py-6 text-center text-sm text-muted-foreground",children:"No metro areas found."})})]})]}),ae.jsxs("div",{className:"p-3 rounded-md border bg-muted/20 space-y-3",children:[ae.jsxs("div",{className:"flex items-center gap-2 text-sm font-medium",children:[ae.jsx(oP,{className:"h-3.5 w-3.5"}),ae.jsx("span",{children:"File Format"})]}),ae.jsxs(I_,{value:H,onValueChange:Ce=>Z(Ce),className:"space-y-2",children:[ae.jsxs("div",{className:"flex items-center space-x-2",children:[ae.jsx(Yf,{value:"png",id:"r-png"}),ae.jsx(od,{htmlFor:"r-png",className:"text-sm",children:"PNG (Image)"})]}),ae.jsxs("div",{className:"flex items-center space-x-2",children:[ae.jsx(Yf,{value:"pdf",id:"r-pdf"}),ae.jsx(od,{htmlFor:"r-pdf",className:"text-sm",children:"PDF (Document)"})]})]})]}),ae.jsxs("div",{className:"p-3 rounded-md border bg-muted/20 space-y-3",children:[ae.jsxs("div",{className:"flex items-center gap-2 text-sm font-medium",children:[ae.jsx(AP,{className:"h-3.5 w-3.5"}),ae.jsx("span",{children:"Customization"})]}),ae.jsxs("div",{className:"space-y-2",children:[ae.jsxs("div",{className:"flex items-center space-x-2",children:[ae.jsx(D_,{id:"c-title",checked:de,onCheckedChange:Ce=>Pe(Ce===!0)}),ae.jsx(od,{htmlFor:"c-title",className:"text-sm",children:"Include Title"})]}),ae.jsxs("div",{className:"flex items-center space-x-2",children:[ae.jsx(D_,{id:"c-legend",checked:se,onCheckedChange:Ce=>ce(Ce===!0)}),ae.jsx(od,{htmlFor:"c-legend",className:"text-sm",children:"Include Legend"})]})]})]})]}),ae.jsxs("div",{className:"p-4 space-y-2 border-t bg-background",children:[ae.jsxs(Cc,{id:"btn-map-export",onClick:ke,disabled:it(),className:"w-full",size:"default",children:[(He||!Qe&&Te&&Ie.length>0)&&ae.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),!He&&Te&&Ie.length>0&&Qe&&ae.jsx(h_,{className:"h-4 w-4 mr-2"}),ot()]}),ae.jsx(Cc,{onClick:i,variant:"outline",className:"w-full",disabled:He,children:"Cancel"})]})]}),ae.jsxs("div",{className:"flex-1 p-6 overflow-hidden flex flex-col bg-muted/30",children:[ae.jsxs("div",{className:"mb-3",children:[ae.jsx("h3",{className:"text-base font-semibold text-foreground",children:"Preview"}),ae.jsx("p",{className:"text-xs text-muted-foreground",children:Te?`${Ie.length.toLocaleString()} ZIP codes`:"Select a region to preview"})]}),ae.jsx("div",{className:"flex-1 flex items-center justify-center",children:ae.jsx("div",{className:"bg-white rounded-lg shadow-lg overflow-hidden border border-border relative",style:{width:"100%",maxWidth:"1200px",aspectRatio:"4 / 3"},children:Te?ae.jsxs(ae.Fragment,{children:[ae.jsx(WF,{ref:Je,filteredData:Ie,selectedMetric:r,regionScope:a,regionName:ut,includeLegend:se,includeTitle:de,onReady:()=>Be(!0)}),ae.jsx("div",{className:"absolute inset-0 z-[5] bg-transparent",onContextMenu:Ce=>{}})]}):ae.jsx("div",{className:"w-full h-full flex items-center justify-center text-muted-foreground",children:a==="state"?"Select a state to preview":"Select a metro area to preview"})})})]})]})}const r_=768;function Jy(){const[e,r]=ee.useState(void 0);return ee.useEffect(()=>{const i=window.matchMedia(`(max-width: ${r_-1}px)`),a=()=>{r(window.innerWidth<r_)};return i.addEventListener("change",a),r(window.innerWidth<r_),()=>i.removeEventListener("change",a)},[]),!!e}function eV({allZipData:e,selectedMetric:r,onExportModeChange:i}){const[a,u]=ee.useState(!1),d=Jy();ee.useEffect(()=>{i(a)},[a,i]);const m=()=>{u(!1)};return a?ae.jsx(J7,{allZipData:e,selectedMetric:r,onClose:m}):ae.jsxs(Cc,{variant:"outline",size:"sm",onClick:()=>u(!0),children:[ae.jsx(h_,{className:"h-4 w-4"}),!d&&ae.jsx("span",{children:"Export"})]})}function NT(e,r,i=0,a=e.length-1,u=tV){for(;a>i;){if(a-i>600){const w=a-i+1,E=r-i+1,I=Math.log(w),D=.5*Math.exp(2*I/3),O=.5*Math.sqrt(I*D*(w-D)/w)*(E-w/2<0?-1:1),P=Math.max(i,Math.floor(r-E*D/w+O)),W=Math.min(a,Math.floor(r+(w-E)*D/w+O));NT(e,r,P,W,u)}const d=e[r];let m=i,o=a;for(dm(e,i,r),u(e[a],d)>0&&dm(e,i,a);m<o;){for(dm(e,m,o),m++,o--;u(e[m],d)<0;)m++;for(;u(e[o],d)>0;)o--}u(e[i],d)===0?dm(e,i,o):(o++,dm(e,o,a)),o<=r&&(i=o+1),r<=o&&(a=o-1)}}function dm(e,r,i){const a=e[r];e[r]=e[i],e[i]=a}function tV(e,r){return e<r?-1:e>r?1:0}class rV{constructor(r=9){this._maxEntries=Math.max(4,r),this._minEntries=Math.max(2,Math.ceil(this._maxEntries*.4)),this.clear()}all(){return this._all(this.data,[])}search(r){let i=this.data;const a=[];if(!I0(r,i))return a;const u=this.toBBox,d=[];for(;i;){for(let m=0;m<i.children.length;m++){const o=i.children[m],w=i.leaf?u(o):o;I0(r,w)&&(i.leaf?a.push(o):i_(r,w)?this._all(o,a):d.push(o))}i=d.pop()}return a}collides(r){let i=this.data;if(!I0(r,i))return!1;const a=[];for(;i;){for(let u=0;u<i.children.length;u++){const d=i.children[u],m=i.leaf?this.toBBox(d):d;if(I0(r,m)){if(i.leaf||i_(r,m))return!0;a.push(d)}}i=a.pop()}return!1}load(r){if(!(r&&r.length))return this;if(r.length<this._minEntries){for(let a=0;a<r.length;a++)this.insert(r[a]);return this}let i=this._build(r.slice(),0,r.length-1,0);if(!this.data.children.length)this.data=i;else if(this.data.height===i.height)this._splitRoot(this.data,i);else{if(this.data.height<i.height){const a=this.data;this.data=i,i=a}this._insert(i,this.data.height-i.height-1,!0)}return this}insert(r){return r&&this._insert(r,this.data.height-1),this}clear(){return this.data=ip([]),this}remove(r,i){if(!r)return this;let a=this.data;const u=this.toBBox(r),d=[],m=[];let o,w,E;for(;a||d.length;){if(a||(a=d.pop(),w=d[d.length-1],o=m.pop(),E=!0),a.leaf){const I=nV(r,a.children,i);if(I!==-1)return a.children.splice(I,1),d.push(a),this._condense(d),this}!E&&!a.leaf&&i_(a,u)?(d.push(a),m.push(o),o=0,w=a,a=a.children[0]):w?(o++,a=w.children[o],E=!1):a=null}return this}toBBox(r){return r}compareMinX(r,i){return r.minX-i.minX}compareMinY(r,i){return r.minY-i.minY}toJSON(){return this.data}fromJSON(r){return this.data=r,this}_all(r,i){const a=[];for(;r;)r.leaf?i.push(...r.children):a.push(...r.children),r=a.pop();return i}_build(r,i,a,u){const d=a-i+1;let m=this._maxEntries,o;if(d<=m)return o=ip(r.slice(i,a+1)),Xf(o,this.toBBox),o;u||(u=Math.ceil(Math.log(d)/Math.log(m)),m=Math.ceil(d/Math.pow(m,u-1))),o=ip([]),o.leaf=!1,o.height=u;const w=Math.ceil(d/m),E=w*Math.ceil(Math.sqrt(m));u5(r,i,a,E,this.compareMinX);for(let I=i;I<=a;I+=E){const D=Math.min(I+E-1,a);u5(r,I,D,w,this.compareMinY);for(let O=I;O<=D;O+=w){const P=Math.min(O+w-1,D);o.children.push(this._build(r,O,P,u-1))}}return Xf(o,this.toBBox),o}_chooseSubtree(r,i,a,u){for(;u.push(i),!(i.leaf||u.length-1===a);){let d=1/0,m=1/0,o;for(let w=0;w<i.children.length;w++){const E=i.children[w],I=n_(E),D=oV(r,E)-I;D<m?(m=D,d=I<d?I:d,o=E):D===m&&I<d&&(d=I,o=E)}i=o||i.children[0]}return i}_insert(r,i,a){const u=a?r:this.toBBox(r),d=[],m=this._chooseSubtree(u,this.data,i,d);for(m.children.push(r),Bm(m,u);i>=0&&d[i].children.length>this._maxEntries;)this._split(d,i),i--;this._adjustParentBBoxes(u,d,i)}_split(r,i){const a=r[i],u=a.children.length,d=this._minEntries;this._chooseSplitAxis(a,d,u);const m=this._chooseSplitIndex(a,d,u),o=ip(a.children.splice(m,a.children.length-m));o.height=a.height,o.leaf=a.leaf,Xf(a,this.toBBox),Xf(o,this.toBBox),i?r[i-1].children.push(o):this._splitRoot(a,o)}_splitRoot(r,i){this.data=ip([r,i]),this.data.height=r.height+1,this.data.leaf=!1,Xf(this.data,this.toBBox)}_chooseSplitIndex(r,i,a){let u,d=1/0,m=1/0;for(let o=i;o<=a-i;o++){const w=bm(r,0,o,this.toBBox),E=bm(r,o,a,this.toBBox),I=aV(w,E),D=n_(w)+n_(E);I<d?(d=I,u=o,m=D<m?D:m):I===d&&D<m&&(m=D,u=o)}return u||a-i}_chooseSplitAxis(r,i,a){const u=r.leaf?this.compareMinX:iV,d=r.leaf?this.compareMinY:sV,m=this._allDistMargin(r,i,a,u),o=this._allDistMargin(r,i,a,d);m<o&&r.children.sort(u)}_allDistMargin(r,i,a,u){r.children.sort(u);const d=this.toBBox,m=bm(r,0,i,d),o=bm(r,a-i,a,d);let w=F0(m)+F0(o);for(let E=i;E<a-i;E++){const I=r.children[E];Bm(m,r.leaf?d(I):I),w+=F0(m)}for(let E=a-i-1;E>=i;E--){const I=r.children[E];Bm(o,r.leaf?d(I):I),w+=F0(o)}return w}_adjustParentBBoxes(r,i,a){for(let u=a;u>=0;u--)Bm(i[u],r)}_condense(r){for(let i=r.length-1,a;i>=0;i--)r[i].children.length===0?i>0?(a=r[i-1].children,a.splice(a.indexOf(r[i]),1)):this.clear():Xf(r[i],this.toBBox)}}function nV(e,r,i){if(!i)return r.indexOf(e);for(let a=0;a<r.length;a++)if(i(e,r[a]))return a;return-1}function Xf(e,r){bm(e,0,e.children.length,r,e)}function bm(e,r,i,a,u){u||(u=ip(null)),u.minX=1/0,u.minY=1/0,u.maxX=-1/0,u.maxY=-1/0;for(let d=r;d<i;d++){const m=e.children[d];Bm(u,e.leaf?a(m):m)}return u}function Bm(e,r){return e.minX=Math.min(e.minX,r.minX),e.minY=Math.min(e.minY,r.minY),e.maxX=Math.max(e.maxX,r.maxX),e.maxY=Math.max(e.maxY,r.maxY),e}function iV(e,r){return e.minX-r.minX}function sV(e,r){return e.minY-r.minY}function n_(e){return(e.maxX-e.minX)*(e.maxY-e.minY)}function F0(e){return e.maxX-e.minX+(e.maxY-e.minY)}function oV(e,r){return(Math.max(r.maxX,e.maxX)-Math.min(r.minX,e.minX))*(Math.max(r.maxY,e.maxY)-Math.min(r.minY,e.minY))}function aV(e,r){const i=Math.max(e.minX,r.minX),a=Math.max(e.minY,r.minY),u=Math.min(e.maxX,r.maxX),d=Math.min(e.maxY,r.maxY);return Math.max(0,u-i)*Math.max(0,d-a)}function i_(e,r){return e.minX<=r.minX&&e.minY<=r.minY&&r.maxX<=e.maxX&&r.maxY<=e.maxY}function I0(e,r){return r.minX<=e.maxX&&r.minY<=e.maxY&&r.maxX>=e.minX&&r.maxY>=e.minY}function ip(e){return{children:e,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function u5(e,r,i,a,u){const d=[r,i];for(;d.length;){if(i=d.pop(),r=d.pop(),i-r<=a)continue;const m=r+Math.ceil((i-r)/a/2)*a;NT(e,m,r,i,u),d.push(r,m,m,i)}}let fm=null;function lV(e){const r=[];for(const[i,a]of Object.entries(e))a.latitude&&a.longitude&&r.push({minX:a.longitude-.01,minY:a.latitude-.01,maxX:a.longitude+.01,maxY:a.latitude+.01,zipCode:i});return fm?fm.clear():fm=new rV,fm.load(r),new Set(r.map(i=>i.zipCode)),console.log(`[SpatialIndex] Built index with ${r.length} ZIP codes`),fm}const cV={zhvi:"Zillow Home Value Index",median_sale_price:"Median Sale Price",median_ppsf:"Median Price per Sq Ft",avg_sale_to_list_ratio:"Sale-to-List Ratio",median_dom:"Median Days on Market"};function h5({selectedMetric:e,onMetricChange:r}){return ae.jsxs("div",{className:"flex items-center gap-2",children:[ae.jsx("label",{className:"text-xs font-medium text-dashboard-text-secondary whitespace-nowrap hidden lg:block",children:"Metric:"}),ae.jsxs(fF,{value:e,onValueChange:r,children:[ae.jsx(qw,{className:"w-50 h-8 text-sm px-3 justify-between","aria-label":"Select visualization metric",children:ae.jsx("div",{className:"flex-1 text-left truncate pr-2",children:ae.jsx(pF,{placeholder:"Select a metric"})})}),ae.jsx($w,{className:"z-[9999]",children:Object.entries(cV).map(([i,a])=>ae.jsx(Ww,{value:i,children:a},i))})]})]})}function d5({onSearch:e}){const[r,i]=ee.useState(""),[a,u]=ee.useState(0),d=o=>{const w=o.target.value.replace(/\D/g,"");i(w)},m=ee.useCallback(o=>{if(o.preventDefault(),r.trim()){const w=a+1;u(w),e(r.trim(),w)}},[r,a,e]);return ae.jsxs("form",{onSubmit:m,className:"flex items-center gap-2 w-full min-w-0",children:[ae.jsxs("div",{className:"relative flex-1 min-w-[9rem] max-w-[24rem]",children:[ae.jsx(Ew,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-dashboard-text-secondary"}),ae.jsx(Ry,{type:"text",pattern:"[0-9]*",inputMode:"numeric",placeholder:"Enter ZIP code...",value:r,onChange:d,className:"pl-10 w-full",maxLength:5,"aria-label":"Search for ZIP code"})]}),ae.jsx(Cc,{type:"submit",variant:"outline",size:"sm","aria-label":"Search",children:"Search"})]})}const AV="/Domapus/";function uV({selectedMetric:e,onMetricChange:r,onSearch:i,hideMobileControls:a=!1,children:u}){const d=Jy(),[m,o]=ee.useState(null);ee.useEffect(()=>{const E=`${AV}data/last_updated.json`;(async()=>{try{const D=await fetch(E);if(!D.ok)throw new Error("Failed to fetch last_updated.json");const O=await D.json();o(O.last_updated_utc)}catch(D){console.error("Error fetching last_updated.json:",D)}})()},[]);const w=E=>{if(!E)return"N/A";try{return new Date(E).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})}catch{return"N/A"}};return ae.jsxs(ae.Fragment,{children:[ae.jsxs("header",{className:"flex items-center justify-between px-4 sm:px-6 py-2 bg-dashboard-panel border-b border-dashboard-border h-14 sm:h-16",children:[ae.jsxs("div",{className:"flex items-center gap-4 sm:gap-6 flex-1 min-w-0",children:[ae.jsxs("div",{className:"flex items-center gap-2 cursor-pointer hover:opacity-80 transition-opacity flex-shrink-0",onClick:()=>window.location.reload(),title:"Click to reload page",children:[ae.jsx("img",{src:"/Domapus/Logo.svg",alt:"Domapus Logo",width:"40",height:"40",className:"w-9 h-9 sm:w-10 sm:h-10"}),ae.jsxs("div",{className:"flex flex-col font-logo",children:[ae.jsx("h1",{className:"text-base sm:text-lg font-bold text-dashboard-text-primary leading-tight",children:"Domapus"}),ae.jsx("p",{className:"text-xs sm:text-sm text-dashboard-text-secondary leading-tight hidden sm:block",children:"Housing Market Analysis"})]})]}),!d&&ae.jsx(h5,{selectedMetric:e,onMetricChange:r})]}),ae.jsxs("div",{className:"flex items-center gap-4 flex-shrink-0",children:[!d&&ae.jsx(d5,{onSearch:i}),ae.jsxs("div",{className:"flex items-center gap-2 ml-1",children:[ae.jsxs("div",{className:"flex items-center text-dashboard-text-secondary gap-2 mr-2",children:[ae.jsx(rP,{className:"h-4 w-4 opacity-80"}),ae.jsxs("div",{className:"flex flex-col",children:[ae.jsx("span",{className:"text-xs font-medium",children:"Data Updated:"}),ae.jsx("span",{className:"text-xs font-medium whitespace-nowrap",children:w(m)})]})]}),u,ae.jsx(Cc,{variant:"outline",size:"sm",asChild:!0,children:ae.jsxs("a",{href:"https://github.com/Jasperc2024/Domapus",target:"_blank",rel:"noopener noreferrer",title:"GitHub",children:[ae.jsx(aP,{className:"h-4 w-4"}),!d&&ae.jsx("span",{children:"GitHub"})," "]})}),ae.jsx(Cc,{variant:"outline",size:"sm",asChild:!0,className:"bg-pink-600 hover:bg-pink-700 text-white",children:ae.jsxs("a",{href:"https://buymeacoffee.com/JasperC",target:"_blank",rel:"noopener noreferrer",title:"Sponsor",children:[ae.jsx(d_,{className:"h-4 w-4"}),!d&&ae.jsx("span",{children:"Sponsor"})," "]})})]})]})]}),d&&ae.jsx("div",{className:"fixed bottom-4 left-4 right-4 z-[1001] bg-dashboard-panel border border-dashboard-border rounded-lg p-3 shadow-lg",children:ae.jsxs("div",{className:"space-y-2.5",children:[!a&&ae.jsx(h5,{selectedMetric:e,onMetricChange:r}),ae.jsx(d5,{onSearch:i})]})})]})}function hV(e,r){if(!e||!e.zipCode)return'<div class="p-2">No data available</div>';const a={zhvi:{key:"zhvi",label:"ZHVI",format:"currency"},median_sale_price:{key:"median_sale_price",label:"Median Sale Price",format:"currency"},median_list_price:{key:"median_list_price",label:"Median List Price",format:"currency"},median_ppsf:{key:"median_ppsf",label:"Median Price Per Square Foot",format:"currency"},homes_sold:{key:"homes_sold",label:"Homes Sold",format:"number"},pending_sales:{key:"pending_sales",label:"Pending Sales",format:"number"},new_listings:{key:"new_listings",label:"New Listings",format:"number"},inventory:{key:"inventory",label:"Inventory",format:"number"},median_dom:{key:"median_dom",label:"Median Days on Market",format:"number"},avg_sale_to_list_ratio:{key:"avg_sale_to_list_ratio",label:"Sale-to-List Ratio",format:"ratio"},sold_above_list:{key:"sold_above_list",label:"% Sold Above List",format:"percent"},off_market_in_two_weeks:{key:"off_market_in_two_weeks",label:"% Off Market in 2 Weeks",format:"percent"}}[r],u=a?e[a.key]:null;let d="N/A";if(typeof u=="number"&&isFinite(u))switch(a.format){case"currency":d=`$${u.toLocaleString()}`;break;case"percent":d=`${u.toFixed(1)}%`;break;case"ratio":d=`${u.toFixed(1)}%`;break;case"number":d=u.toLocaleString();break}return`
      <div class="font-bold text-base">${e.zipCode}</div>
      <div class="text-sm text-gray-600">${e.city||"Unknown City"}, ${e.state}</div>
      <div class="text-sm mt-2">
        <span class="font-semibold">${a?.label||r}:</span>
        <span class="font-normal"> ${d}</span>
      </div>
  `}const dV="/Domapus/",s_=["#FFF9B0","#FFEB84","#FFD166","#FF9A56","#E84C61","#C13584","#7B2E8D","#2E0B59"];function f5(e,r){if(!e)return 0;const i=e[r];return typeof i=="number"&&isFinite(i)?i:0}function fV(e,r=8){const i=[...e].filter(w=>w>0).sort((w,E)=>w-E);if(i.length===0)return[];const a=i[0],u=i[i.length-1];if(a===u)return[a];const d=[],m=(u-a)*1e-6||1e-6,o=w=>i[Math.floor(w*(i.length-1))];for(let w=1;w<r;w++){let E=o(w/r);d.length&&E<=d[d.length-1]&&(E=d[d.length-1]+m),d.push(E)}return d}function pV({selectedMetric:e,onZipSelect:r,searchZip:i,searchTrigger:a,zipData:u,isLoading:d}){const m=ee.useRef(null),o=ee.useRef(null),[w,E]=ee.useState(!1),[I,D]=ee.useState(null),O=ee.useRef(!1),[P,W]=ee.useState(!1),z=ee.useRef(null),H=ee.useRef(null),Z=ee.useRef(null),se=ee.useRef(""),ce=ee.useRef(""),de=ee.useRef(null),Pe=ee.useRef({width:0,height:0}),He=ee.useRef(null),Xe=ee.useRef({zipData:u,selectedMetric:e,onZipSelect:r});ee.useEffect(()=>{Xe.current={zipData:u,selectedMetric:e,onZipSelect:r}},[u,e,r]);const Qe=ee.useMemo(()=>Object.keys(u).length>0,[u]),Be=ee.useCallback(Ae=>{qF();const me=new sp.Map({container:Ae,style:"https://basemaps.cartocdn.com/gl/positron-gl-style/style.json",center:[-98.57,39.82],zoom:3.5,minZoom:3,maxZoom:12,attributionControl:!1});return me.addControl(new sp.AttributionControl({compact:!0}),"bottom-left"),me.addControl(new sp.NavigationControl,"top-right"),me.on("error",Te=>{console.error("[Map] Internal error:",Te?.error??Te),D("Map internal error. Try refreshing.")}),me.once("load",()=>{console.log("[Map] style/load fired  map is ready"),E(!0)}),me},[]);ee.useEffect(()=>{if(!m.current||o.current)return;const Ae=m.current;let me=!1;const Te=()=>{if(!me&&!(Ae.clientWidth===0||Ae.clientHeight===0))try{const it=Be(Ae);o.current=it,Pe.current={width:Ae.clientWidth,height:Ae.clientHeight}}catch(it){console.error("Map init failed",it)}},Ie=()=>{if(!o.current||me)return;const it=Ae.clientWidth,ot=Ae.clientHeight,ke=Math.abs(it-Pe.current.width),Ne=Math.abs(ot-Pe.current.height);(ke>5||Ne>5)&&(He.current&&clearTimeout(He.current),He.current=setTimeout(()=>{!me&&o.current&&(Pe.current={width:it,height:ot},o.current.resize())},150))},ut=new ResizeObserver(Ie);return ut.observe(Ae),Te(),()=>{if(me=!0,ut.disconnect(),He.current&&clearTimeout(He.current),z.current&&(cancelAnimationFrame(z.current),z.current=null),Z.current&&(Z.current.remove(),Z.current=null),o.current){try{o.current.remove()}catch(it){console.warn("[MapLibreMap] error removing map",it)}o.current=null}E(!1),O.current=!1}},[Be]);const Je=ee.useCallback(()=>{const Ae=o.current;if(!Ae||O.current)return;const me="zips-fill",Te=it=>{H.current=it,!z.current&&(z.current=requestAnimationFrame(()=>{const ot=H.current;z.current=null;try{const ke=Ae.queryRenderedFeatures(ot.point,{layers:[me]}),Ne=ke.length>0;if(Ae.getCanvas().style.cursor=Ne?"pointer":"",!Ne){Z.current?.remove();return}const yt=ke[0].properties??{},Ce=yt.ZCTA5CE20||yt.zipCode||yt.id,{zipData:ie,selectedMetric:Ee}=Xe.current;if(!Ce||!ie[Ce]){Z.current?.remove();return}Z.current||(Z.current=new sp.Popup({closeButton:!1,offset:[0,-10],maxWidth:"320px"})),Z.current.setLngLat(ot.lngLat).setHTML(hV(ie[Ce],Ee)).addTo(Ae)}catch(ke){console.error("mousemove error",ke)}}))},Ie=it=>{const ot=Ae.queryRenderedFeatures(it.point,{layers:[me]});if(!ot.length)return;const ke=ot[0].properties??{},Ne=ke.ZCTA5CE20||ke.zipCode||ke.id,{zipData:yt,onZipSelect:Ce}=Xe.current;Ne&&yt[Ne]&&Ce(yt[Ne])},ut=()=>{Ae.getCanvas().style.cursor="",Z.current?.remove()};Ae.on("mousemove",Te),Ae.on("click",Ie),Ae.on("mouseout",ut),O.current=!0},[]);return ee.useEffect(()=>{if(!w||!o.current)return;const Ae=o.current;if(!Ae.getSource("zips"))try{Ae.getStyle().layers.forEach(ot=>{if("source-layer"in ot){const ke=ot["source-layer"];(ke==="transportation"||ke==="transportation_name")&&Ae.setLayoutProperty(ot.id,"visibility","none")}});const Te=new URL(`${dV}data/us_zip_codes.pmtiles`,window.location.origin).href;Ae.addSource("zips",{type:"vector",url:`pmtiles://${Te}`,promoteId:"ZCTA5CE20"});const Ie=Ae.getStyle().layers;let ut;const it=Ie.find(ot=>ot.id==="watername_ocean");it&&(ut=it.id),Ae.addLayer({id:"zips-fill",type:"fill",source:"zips","source-layer":"us_zip_codes",paint:{"fill-color":"#cccccc","fill-opacity":.75}},ut),Ae.addLayer({id:"zips-border",type:"line",source:"zips","source-layer":"us_zip_codes",paint:{"line-color":["case",["boolean",["feature-state","highlighted"],!1],"#ff6b35","rgba(0,0,0,0.15)"],"line-width":["interpolate",["linear"],["zoom"],3,["case",["boolean",["feature-state","highlighted"],!1],2,.3],6,["case",["boolean",["feature-state","highlighted"],!1],3,.6],10,["case",["boolean",["feature-state","highlighted"],!1],4,1.5],12,["case",["boolean",["feature-state","highlighted"],!1],5,2]]}},ut),Ae.once("idle",()=>{console.log("[MapLibreMap] PMTiles layer loaded"),W(!0)}),Je()}catch(me){console.error("Add PMTiles layer failed",me),D("Failed to load map data. Try refreshing.")}},[w,Je]),ee.useEffect(()=>{if(!w||!o.current||!P||!Qe)return;const Ae=o.current,me=Ae.getSource("zips");if(!me||!me._loaded||!Ae.getLayer("zips-fill"))return;const Te=Object.keys(u).length.toString();if(se.current===e&&ce.current===Te)return;se.current=e,ce.current=Te,console.log("[MapLibreMap] Updating choropleth colors...");const Ie=Object.values(u).map(ot=>f5(ot,e)),ut=fV(Ie);if(ut.length===0){console.warn("[MapLibreMap] No valid data for choropleth");return}const it=["step",["coalesce",["feature-state","metricValue"],0],"transparent",.001,s_[0],...ut.flatMap((ot,ke)=>[ot,s_[Math.min(ke+1,s_.length-1)]])];for(const[ot,ke]of Object.entries(u)){const Ne=f5(ke,e);Ae.setFeatureState({source:"zips",sourceLayer:"us_zip_codes",id:ot},{metricValue:Ne})}Ae.setPaintProperty("zips-fill","fill-color",it),console.log(`[MapLibreMap] Choropleth updated for ${Object.keys(u).length} ZIPs`)},[w,P,u,e,Qe]),ee.useEffect(()=>{if(!w||!o.current||!P||!i||!u[i])return;const Ae=o.current,{longitude:me,latitude:Te}=u[i];de.current&&de.current!==i&&Ae.setFeatureState({source:"zips",sourceLayer:"us_zip_codes",id:de.current},{highlighted:!1}),Ae.setFeatureState({source:"zips",sourceLayer:"us_zip_codes",id:i},{highlighted:!0}),de.current=i,me&&Te&&Ae.flyTo({center:[me,Te],zoom:10,duration:1500})},[w,P,i,a,u]),ae.jsxs("div",{className:"absolute inset-0 w-full h-full min-h-[400px]",children:[ae.jsx("div",{ref:m,className:"w-full h-full",style:{minHeight:"400px"}}),(d||!w||I)&&ae.jsx("div",{className:"absolute inset-0 flex flex-col items-center justify-center bg-white/80 z-10",children:I?ae.jsx("div",{className:"text-red-500 font-bold",children:I}):ae.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary"})})]})}function o_(e,r){const i=r.toLowerCase();return i.includes("price")||i.includes("zhvi")?`$${(e/1e3).toFixed(0)}k`:i.includes("ratio")?`${e.toFixed(1)}%`:i.includes("mom")||i.includes("yoy")?`${e.toFixed(1)}%`:e.toLocaleString()}function mV(e,r){if(!e||e.length===0)return r.map(()=>0);const i=[...e].sort((a,u)=>a-u);return r.map(a=>{const u=(i.length-1)*a,d=Math.floor(u),m=Math.ceil(u),o=u-d;return i[d]*(1-o)+i[m]*o})}function gV({selectedMetric:e,metricValues:r,isExport:i=!1}){const a=Jy(),u=ee.useMemo(()=>{if(!r||r.length===0)return{min:"N/A",mid:"N/A",max:"N/A"};const[w,E,I]=mV(r,[.05,.5,.95]);return{min:o_(w,e),mid:o_(E,e),max:o_(I,e)}},[r,e]),d=w=>({zhvi:"Zillow Home Value Index",median_sale_price:"Median Sale Price",median_ppsf:"Median Price per Sq Ft",sale_to_list_ratio:"Sale-to-List Ratio",avg_sale_to_list_ratio:"Sale-to-List Ratio",median_dom:"Median Days on Market"})[w]||w.split("_").map(I=>I.charAt(0).toUpperCase()+I.slice(1)).join(" "),m="linear-gradient(to right, hsl(var(--choropleth-1)), hsl(var(--choropleth-2)), hsl(var(--choropleth-3)), hsl(var(--choropleth-4)), hsl(var(--choropleth-5)), hsl(var(--choropleth-6)), hsl(var(--choropleth-7)), hsl(var(--choropleth-8)))",o="linear-gradient(to top, hsl(var(--choropleth-1)), hsl(var(--choropleth-3)), hsl(var(--choropleth-5)), hsl(var(--choropleth-8)))";return a&&!i?ae.jsxs("div",{className:"bg-card/95 backdrop-blur-sm shadow-lg border border-border rounded-md p-3 w-36",children:[ae.jsx("div",{className:"text-xs font-semibold text-foreground truncate mb-2",children:d(e)}),ae.jsxs("div",{className:"flex items-stretch gap-2",children:[ae.jsx("div",{className:"w-3 rounded-sm border border-border",style:{background:o},"aria-hidden":"true"}),ae.jsxs("div",{className:"flex flex-col justify-between text-[11px] font-medium text-muted-foreground",children:[ae.jsx("span",{className:"text-foreground",children:u.max}),ae.jsx("span",{children:u.mid}),ae.jsx("span",{children:u.min})]})]})]}):i?ae.jsxs("div",{className:"bg-transparent p-0",children:[ae.jsx("div",{className:"text-xs font-semibold text-foreground mb-2",children:d(e)}),ae.jsx("div",{className:"h-3 rounded-sm border border-border",style:{background:m},"aria-hidden":"true"}),ae.jsxs("div",{className:"mt-1 flex justify-between text-[11px] font-medium text-muted-foreground",children:[ae.jsx("span",{children:u.min}),ae.jsx("span",{children:u.mid}),ae.jsx("span",{children:u.max})]})]}):ae.jsxs("div",{className:"border border-border rounded-lg p-4 w-full max-w-xs bg-card/95 backdrop-blur-sm shadow-xl",children:[ae.jsx("h3",{className:"text-sm font-semibold mb-3 text-foreground",children:d(e)}),ae.jsxs("div",{className:"space-y-2",children:[ae.jsx("div",{className:"h-4 rounded-md border border-border",style:{background:m},"aria-hidden":"true"}),ae.jsxs("div",{className:"flex justify-between text-xs text-muted-foreground font-semibold",children:[ae.jsx("span",{children:u.min}),ae.jsx("span",{children:u.mid}),ae.jsx("span",{children:u.max})]})]}),ae.jsx("div",{className:"mt-2 pt-2 border-t border-border/60",children:ae.jsx("p",{className:"text-[10px] text-muted-foreground text-center",children:"Click ZIP code to view details"})})]})}function yV({onClose:e}){return ee.useEffect(()=>{const r=setTimeout(e,2e4);return()=>clearTimeout(r)},[e]),ae.jsx("div",{className:"fixed top-4 left-1/2 transform -translate-x-1/2 z-50 max-w-md w-full mx-4",children:ae.jsxs("div",{className:"bg-dashboard-panel border border-dashboard-border rounded-lg shadow-lg p-4",children:[ae.jsxs("div",{className:"flex items-start justify-between",children:[ae.jsxs("div",{className:"flex items-start space-x-3",children:[ae.jsx(d_,{className:"h-5 w-5 text-pink-600 mt-0.5 flex-shrink-0"}),ae.jsxs("div",{className:"text-sm text-dashboard-text-primary",children:[ae.jsx("p",{className:"font-semibold mb-1",children:"This site is proudly ad-free and built to serve the public."}),ae.jsx("p",{className:"text-dashboard-text-secondary",children:"If you find it useful, please consider sponsoring or supporting us to keep the data flowing and the site improving."})]})]}),ae.jsx(Cc,{variant:"ghost",size:"sm",onClick:e,className:"h-6 w-6 p-0 flex-shrink-0",children:ae.jsx($m,{className:"h-4 w-4"})})]}),ae.jsxs("div",{className:"mt-3 flex space-x-2",children:[ae.jsx(Cc,{size:"sm",asChild:!0,className:"bg-pink-600 hover:bg-pink-700 text-white",children:ae.jsxs("a",{href:"https://buymeacoffee.com/jasperc",target:"_blank",rel:"noopener noreferrer",children:[ae.jsx(d_,{className:"h-4 w-4 mr-2"}),"Sponsor"]})}),ae.jsx(Cc,{variant:"outline",size:"sm",onClick:e,children:"Maybe later"})]})]})})}const dy=ee.forwardRef(({className:e,...r},i)=>ae.jsx("div",{ref:i,className:qi("rounded-lg border bg-card text-card-foreground shadow-sm",e),...r}));dy.displayName="Card";const QT=ee.forwardRef(({className:e,...r},i)=>ae.jsx("div",{ref:i,className:qi("flex flex-col space-y-1.5 p-6",e),...r}));QT.displayName="CardHeader";const OT=ee.forwardRef(({className:e,...r},i)=>ae.jsx("h3",{ref:i,className:qi("text-2xl font-semibold leading-none tracking-tight",e),...r}));OT.displayName="CardTitle";const vV=ee.forwardRef(({className:e,...r},i)=>ae.jsx("p",{ref:i,className:qi("text-sm text-muted-foreground",e),...r}));vV.displayName="CardDescription";const fy=ee.forwardRef(({className:e,...r},i)=>ae.jsx("div",{ref:i,className:qi("p-6 pt-0",e),...r}));fy.displayName="CardContent";const _V=ee.forwardRef(({className:e,...r},i)=>ae.jsx("div",{ref:i,className:qi("flex items-center p-6 pt-0",e),...r}));_V.displayName="CardFooter";const wV=vy("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function p5({className:e,variant:r,...i}){return ae.jsx("div",{className:qi(wV({variant:r}),e),...i})}function xV({currentZip:e,allZipData:r,onClose:i}){const[a,u]=ee.useState(""),[d,m]=ee.useState(null),[o,w]=ee.useState(""),E=()=>{if(!a.trim())return;w("");const P=r[a.trim()];P?m(P):(w("ZIP code not found in our database."),m(null))},I=(P,W)=>{if(P==null)return"N/A";const z=Number(P);if(isNaN(z))return"N/A";switch(W){case"price":return`$${z.toLocaleString()}`;case"days":return`${z} days`;case"percentage":return`${z.toFixed(1)}%`;case"ratio":return`${z.toFixed(1)}%`;default:return z.toLocaleString()}},D=(P,W)=>{const z=Number(P),H=Number(W);if(isNaN(z)||isNaN(H))return"same";const Z=z-H;return Math.abs(Z)<.01?"same":Z>0?"higher":"lower"},O=[{key:"zhvi",label:"Zillow Home Value Index",type:"price"},{key:"median_sale_price",label:"Median Sale Price",type:"price"},{key:"median_list_price",label:"Median List Price",type:"price"},{key:"median_ppsf",label:"Median Price per Sq Ft",type:"price"},{key:"homes_sold",label:"Homes Sold",type:"number"},{key:"pending_sales",label:"Pending Sales",type:"number"},{key:"new_listings",label:"New Listings",type:"number"},{key:"inventory",label:"Inventory",type:"number"},{key:"median_dom",label:"Median Days on Market",type:"days"},{key:"avg_sale_to_list_ratio",label:"Sale-to-List Ratio",type:"ratio"},{key:"sold_above_list",label:"% Sold Above List",type:"percentage"},{key:"off_market_in_two_weeks",label:"% Off Market in 2 Weeks",type:"percentage"}];return ae.jsxs("div",{className:"space-y-4",children:[ae.jsxs("div",{className:"flex items-center justify-between",children:[ae.jsx("h3",{className:"text-lg font-semibold text-dashboard-text-primary",children:"Compare ZIP Codes"}),ae.jsx(Cc,{variant:"ghost",size:"sm",onClick:i,"aria-label":"Close comparison",children:ae.jsx($m,{className:"h-4 w-4"})})]}),ae.jsxs("div",{className:"flex space-x-2",children:[ae.jsx(Ry,{type:"text",pattern:"[0-9]*",inputMode:"numeric",maxLength:5,placeholder:"Enter ZIP code...",value:a,onChange:P=>u(P.target.value.replace(/\D/g,"")),onKeyDown:P=>{P.key==="Enter"&&E()},"aria-label":"ZIP code to compare"}),ae.jsx(Cc,{onClick:E,size:"sm","aria-label":"Search",children:ae.jsx(Ew,{className:"h-4 w-4"})})]}),o&&ae.jsx("div",{className:"text-sm text-red-500 p-2 rounded bg-red-50",children:o}),d&&ae.jsxs("div",{className:"space-y-3 pt-2",children:[ae.jsxs("div",{className:"grid grid-cols-3 gap-2 mb-4 text-center",children:[ae.jsxs("div",{children:[ae.jsx(p5,{variant:"secondary",children:e.zipCode}),ae.jsx("div",{className:"text-xs text-muted-foreground mt-1",children:e.city})]}),ae.jsx("div",{className:"text-xs text-muted-foreground self-center",children:"vs"}),ae.jsxs("div",{children:[ae.jsx(p5,{variant:"secondary",children:d.zipCode}),ae.jsx("div",{className:"text-xs text-muted-foreground mt-1",children:d.city})]})]}),ae.jsx("div",{className:"space-y-2",children:O.map(P=>{const W=e[P.key],z=d[P.key],H=D(W,z),Z=!P.key.includes("dom");return ae.jsx(dy,{children:ae.jsxs(fy,{className:"p-3",children:[ae.jsx("div",{className:"text-center mb-2 text-xs font-medium text-muted-foreground",children:P.label}),ae.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[ae.jsx("div",{className:`text-center font-bold text-sm ${H==="higher"?Z?"text-green-600":"text-red-600":H==="lower"?Z?"text-red-600":"text-green-600":""}`,children:I(W,P.type)}),ae.jsx("div",{className:`text-center font-bold text-sm ${H==="lower"?Z?"text-green-600":"text-red-600":H==="higher"?Z?"text-red-600":"text-green-600":""}`,children:I(z,P.type)})]})]})},P.key)})})]})]})}function bV({isOpen:e,isCollapsed:r,zipData:i,allZipData:a,onClose:u}){const[d,m]=ee.useState(!1);if(!e||!i)return null;const o=(I,D)=>{if(I==null)return"N/A";const O=Number(I);if(isNaN(O))return"N/A";switch(D){case"price":return`$${O.toLocaleString()}`;case"days":return`${O} days`;case"percentage":return`${O.toFixed(1)}%`;case"ratio":return`${O.toFixed(1)}%`;default:return O.toLocaleString()}},w=I=>{if(I==null)return{formatted:"N/A",isPositive:!1,isZero:!0};const D=Number(I);if(isNaN(D))return{formatted:"N/A",isPositive:!1,isZero:!0};const O=D>0,P=D===0;return{formatted:`${O?"+":""}${D.toFixed(1)}%`,isPositive:O,isZero:P}},E=[{key:"zhvi",label:"Zillow Home Value Index",type:"price",momKey:"zhvi_mom",yoyKey:"zhvi_yoy"},{key:"median_sale_price",label:"Median Sale Price",type:"price",momKey:"median_sale_price_mom",yoyKey:"median_sale_price_yoy"},{key:"median_list_price",label:"Median List Price",type:"price",momKey:"median_list_price_mom",yoyKey:"median_list_price_yoy"},{key:"median_ppsf",label:"Median Price per Sq Ft",type:"price",momKey:"median_ppsf_mom",yoyKey:"median_ppsf_yoy"},{key:"homes_sold",label:"Homes Sold",type:"number",momKey:"homes_sold_mom",yoyKey:"homes_sold_yoy"},{key:"pending_sales",label:"Pending Sales",type:"number",momKey:"pending_sales_mom",yoyKey:"pending_sales_yoy"},{key:"new_listings",label:"New Listings",type:"number",momKey:"new_listings_mom",yoyKey:"new_listings_yoy"},{key:"inventory",label:"Inventory",type:"number",momKey:"inventory_mom",yoyKey:"inventory_yoy"},{key:"median_dom",label:"Median Days on Market",type:"days",momKey:"median_dom_mom",yoyKey:"median_dom_yoy"},{key:"avg_sale_to_list_ratio",label:"Sale-to-List Ratio",type:"ratio",momKey:"avg_sale_to_list_ratio_mom",yoyKey:"avg_sale_to_list_ratio_yoy"},{key:"sold_above_list",label:"% Sold Above List",type:"percentage",momKey:"sold_above_list_mom",yoyKey:"sold_above_list_yoy"},{key:"off_market_in_two_weeks",label:"% Off Market in 2 Weeks",type:"percentage",momKey:"off_market_in_two_weeks_mom",yoyKey:"off_market_in_two_weeks_yoy"}].map(I=>({...I,value:i[I.key]})).filter(I=>I.value!==null&&I.value!==void 0);return ae.jsxs("div",{className:`absolute left-0 bg-dashboard-panel border-r border-dashboard-border shadow-lg z-40 transition-all duration-300 h-full flex flex-col ${r?"w-16":"w-96"}`,children:[ae.jsxs("div",{className:"flex items-center justify-between px-3 py-2 border-b border-dashboard-border",role:"banner",children:[!r&&ae.jsxs("div",{className:"flex flex-col justify-center",children:[ae.jsx("h2",{className:"text-lg font-semibold leading-tight",children:i.zipCode}),ae.jsx("p",{className:"text-sm text-muted-foreground leading-none",children:i.city})]}),ae.jsx("div",{className:"flex items-center",children:!r&&ae.jsx(Cc,{variant:"ghost",size:"icon",className:"h-8 w-8",onClick:u,"aria-label":"Close sidebar",children:ae.jsx($m,{className:"h-4 w-4"})})})]}),!r&&ae.jsxs("div",{className:"flex flex-col flex-1 overflow-hidden min-h-0",children:[d?ae.jsx("div",{className:"p-4 flex-1 overflow-y-auto",children:ae.jsx(xV,{currentZip:i,allZipData:a,onClose:()=>m(!1)})}):ae.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-3",children:[ae.jsxs(dy,{children:[ae.jsx(QT,{children:ae.jsxs(OT,{className:"text-sm flex items-center",children:[ae.jsx(lP,{className:"h-4 w-4 mr-2"}),"Location Information"]})}),ae.jsxs(fy,{className:"space-y-2 text-sm",children:[ae.jsxs("div",{className:"flex justify-between",children:[ae.jsx("span",{children:"City:"}),ae.jsx("span",{className:"font-medium",children:i.city})]}),ae.jsxs("div",{className:"flex justify-between",children:[ae.jsx("span",{children:"County:"}),ae.jsx("span",{className:"font-medium",children:i.county})]}),ae.jsxs("div",{className:"flex justify-between",children:[ae.jsx("span",{children:"Metro Area:"}),ae.jsx("span",{className:"font-medium",children:i.metro})]})]})]}),ae.jsxs("h3",{className:"text-sm font-medium pt-2 flex items-center",children:[ae.jsx(tP,{className:"h-4 w-4 mr-2"}),"Market Data"]}),ae.jsx("div",{className:"space-y-3",children:E.map((I,D)=>{const O=I.momKey?w(i[I.momKey]):null,P=I.yoyKey?w(i[I.yoyKey]):null;return ae.jsx(dy,{children:ae.jsx(fy,{className:"p-4",children:ae.jsxs("div",{className:"space-y-2",children:[ae.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:I.label}),ae.jsx("p",{className:"text-xl font-bold",children:o(I.value,I.type)}),ae.jsxs("div",{className:"flex flex-wrap gap-2 text-xs",children:[O&&!O.isZero&&ae.jsxs("span",{className:`flex items-center ${O.isPositive?"text-green-600":"text-red-600"}`,children:[O.isPositive?ae.jsx(Xb,{className:"h-3 w-3 mr-1"}):ae.jsx(Zb,{className:"h-3 w-3 mr-1"}),O.formatted," vs last month"]}),P&&!P.isZero&&ae.jsxs("span",{className:`flex items-center ${P.isPositive?"text-green-600":"text-red-600"}`,children:[P.isPositive?ae.jsx(Xb,{className:"h-3 w-3 mr-1"}):ae.jsx(Zb,{className:"h-3 w-3 mr-1"}),P.formatted," vs last year"]})]})]})})},D)})})]}),ae.jsx("div",{className:"flex-shrink-0 px-4 py-4 border-t border-dashboard-border bg-dashboard-panel",children:ae.jsxs(Cc,{variant:"outline",className:"w-full",onClick:()=>m(!d),children:[ae.jsx(nP,{className:"h-4 w-4 mr-2"}),d?"Back to Details":"Compare ZIP Codes"]})})]})]})}const BV="/Domapus/";function CV(){const e=Jy(),[r,i]=ee.useState("zhvi"),[a,u]=ee.useState(null),[d,m]=ee.useState(""),[o,w]=ee.useState(0),[E,I]=ee.useState({}),[D,O]=ee.useState(null),[P,W]=ee.useState(!1),[z]=ee.useState(!1),[H,Z]=ee.useState(!1),[se,ce]=ee.useState(!1),{processData:de,isLoading:Pe}=KU();ee.useEffect(()=>{let Qe=!0,Be=!1;(async()=>{if(Be)return;Be=!0,console.log("[HousingDashboard] Starting initial data load");const me=new URL(`${BV}data/zip-data.json`,window.location.origin).href;try{const Te=await de({type:"LOAD_AND_PROCESS_DATA",data:{url:me,selectedMetric:"zhvi"}});if(!Qe)return;Te&&(console.log(`[HousingDashboard] ZIP data loaded: ${Object.keys(Te.zip_codes).length} ZIPs`),I(Te.zip_codes),O(Te.bounds),setTimeout(()=>{lV(Te.zip_codes)},100))}catch(Te){console.error("[HousingDashboard] Failed to load initial data:",Te)}})();const Ae=setTimeout(()=>Z(!0),3e4);return()=>{Qe=!1,clearTimeout(Ae)}},[]);const He=ee.useCallback((Qe,Be)=>{m(Qe),w(Be)},[]),Xe=ee.useCallback(Qe=>{u(Qe),W(!0)},[]);return ae.jsxs("div",{className:"w-full h-screen bg-dashboard-bg overflow-hidden flex flex-col",children:[H&&ae.jsx(yV,{onClose:()=>Z(!1)}),ae.jsx(uV,{selectedMetric:r,onMetricChange:i,onSearch:He,hideMobileControls:e&&P,children:ae.jsx(eV,{allZipData:E,selectedMetric:r,onExportModeChange:ce})}),ae.jsxs("div",{className:"flex flex-1 relative h-full min-h-[400px]",children:[P&&ae.jsx(bV,{isOpen:P,isCollapsed:z,zipData:a,allZipData:E,onClose:()=>W(!1)}),ae.jsxs("div",{className:"flex-1 relative",children:[ae.jsx("div",{className:"absolute inset-0 min-h-[400px]",children:ae.jsx(pV,{selectedMetric:r,onZipSelect:Xe,searchZip:d,searchTrigger:o,zipData:E,colorScaleDomain:D?[D.min,D.max]:null,isLoading:Pe,processData:de})}),!se&&!(e&&P)&&ae.jsx("div",{className:"absolute bottom-4 right-4 w-64 z-[1000] pointer-events-auto",children:ae.jsx(gV,{selectedMetric:r,metricValues:Object.values(E).map(Qe=>Qe[r]??0).filter(Qe=>Qe>0)})})]})]})]})}const EV=()=>ae.jsx(CV,{}),SV=()=>{const e=Xm();return ee.useEffect(()=>{console.error("404 Error: User attempted to access non-existent route:",e.pathname)},[e.pathname]),ae.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-100",children:ae.jsxs("div",{className:"text-center",children:[ae.jsx("h1",{className:"text-4xl font-bold mb-4",children:"404"}),ae.jsx("p",{className:"text-xl text-gray-600 mb-4",children:"Oops! Page not found"}),ae.jsx(jU,{to:"https://github.com/Jasperc2024",className:"text-blue-500 hover:text-blue-700 underline",children:"Return"})]})})},FV=new Nk,IV="/Domapus/".replace(/\/$/,"")||"/",TV=()=>ae.jsx(Ok,{client:FV,children:ae.jsxs(uk,{children:[ae.jsx(KP,{}),ae.jsx(BL,{}),ae.jsx(OU,{basename:IV,children:ae.jsxs(MU,{children:[ae.jsx(C_,{path:"/",element:ae.jsx(EV,{})}),ae.jsx(C_,{path:"*",element:ae.jsx(SV,{})})]})})]})});class PV extends Pr.Component{constructor(r){super(r),this.state={hasError:!1}}static getDerivedStateFromError(){return{hasError:!0}}componentDidCatch(r,i){console.error("Error Boundary Caught:",r,i)}handleTryAgain=()=>{this.setState({hasError:!1})};render(){return this.state.hasError?ae.jsxs("div",{className:"flex flex-col items-center justify-center h-screen bg-gray-100 text-center p-4",children:[ae.jsx("h2",{className:"text-2xl font-bold text-red-600 mb-4",children:"Oops! Something went wrong."}),ae.jsx("p",{className:"text-gray-700 mb-6",children:"We've logged the issue and will look into it. Please try again."}),ae.jsx(Cc,{onClick:this.handleTryAgain,children:"Try Again"})]}):this.props.children}}X4.createRoot(document.getElementById("root")).render(ae.jsx(PV,{children:ae.jsx(TV,{})}));export{rs as _,LV as c,vw as g};
