import{c as T,j as e,a as k,b as it,d as te,r as c,e as lt,u as A,P as _,f as v,g as W,h as me,i as se,k as ct,l as U,m as dt,n as ut,R as ft,o as mt,p as pt,F as xt,D as ht,q as gt,X as ae,B as E,C as F,s as yt,t as vt,v as O,S as le,w as ce,x as de,y as ue,z as Y,I as bt,A as Nt}from"./index-oCnFaybc.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jt=T("ChartColumn",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _t=T("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wt=T("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fe=T("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ct=T("Map",[["path",{d:"M14.106 5.553a2 2 0 0 0 1.788 0l3.659-1.83A1 1 0 0 1 21 4.619v12.764a1 1 0 0 1-.553.894l-4.553 2.277a2 2 0 0 1-1.788 0l-4.212-2.106a2 2 0 0 0-1.788 0l-3.659 1.83A1 1 0 0 1 3 19.381V6.618a1 1 0 0 1 .553-.894l4.553-2.277a2 2 0 0 1 1.788 0z",key:"169xi5"}],["path",{d:"M15 5.764v15",key:"1pn4in"}],["path",{d:"M9 3.236v15",key:"1uimfh"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const St=T("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X=T("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J=T("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]),Rt=it("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function G({className:t,variant:o,...s}){return e.jsx("div",{className:k(Rt({variant:o}),t),...s})}var q="rovingFocusGroup.onEntryFocus",kt={bubbles:!1,cancelable:!0},L="RovingFocusGroup",[Q,pe,Tt]=lt(L),[It,xe]=te(L,[Tt]),[Et,Dt]=It(L),he=c.forwardRef((t,o)=>e.jsx(Q.Provider,{scope:t.__scopeRovingFocusGroup,children:e.jsx(Q.Slot,{scope:t.__scopeRovingFocusGroup,children:e.jsx(Mt,{...t,ref:o})})}));he.displayName=L;var Mt=c.forwardRef((t,o)=>{const{__scopeRovingFocusGroup:s,orientation:n,loop:i=!1,dir:r,currentTabStopId:d,defaultCurrentTabStopId:f,onCurrentTabStopIdChange:x,onEntryFocus:l,preventScrollOnEntryFocus:a=!1,...m}=t,p=c.useRef(null),C=W(o,p),N=me(r),[S,g]=se({prop:d,defaultProp:f??null,onChange:x,caller:L}),[b,R]=c.useState(!1),u=ct(l),h=pe(s),j=c.useRef(!1),[$,K]=c.useState(0);return c.useEffect(()=>{const y=p.current;if(y)return y.addEventListener(q,u),()=>y.removeEventListener(q,u)},[u]),e.jsx(Et,{scope:s,orientation:n,dir:N,loop:i,currentTabStopId:S,onItemFocus:c.useCallback(y=>g(y),[g]),onItemShiftTab:c.useCallback(()=>R(!0),[]),onFocusableItemAdd:c.useCallback(()=>K(y=>y+1),[]),onFocusableItemRemove:c.useCallback(()=>K(y=>y-1),[]),children:e.jsx(_.div,{tabIndex:b||$===0?-1:0,"data-orientation":n,...m,ref:C,style:{outline:"none",...t.style},onMouseDown:v(t.onMouseDown,()=>{j.current=!0}),onFocus:v(t.onFocus,y=>{const Z=!j.current;if(y.target===y.currentTarget&&Z&&!b){const P=new CustomEvent(q,kt);if(y.currentTarget.dispatchEvent(P),!P.defaultPrevented){const M=h().filter(I=>I.focusable),ot=M.find(I=>I.active),nt=M.find(I=>I.id===S),rt=[ot,nt,...M].filter(Boolean).map(I=>I.ref.current);ve(rt,a)}}j.current=!1}),onBlur:v(t.onBlur,()=>R(!1))})})}),ge="RovingFocusGroupItem",ye=c.forwardRef((t,o)=>{const{__scopeRovingFocusGroup:s,focusable:n=!0,active:i=!1,tabStopId:r,children:d,...f}=t,x=A(),l=r||x,a=Dt(ge,s),m=a.currentTabStopId===l,p=pe(s),{onFocusableItemAdd:C,onFocusableItemRemove:N,currentTabStopId:S}=a;return c.useEffect(()=>{if(n)return C(),()=>N()},[n,C,N]),e.jsx(Q.ItemSlot,{scope:s,id:l,focusable:n,active:i,children:e.jsx(_.span,{tabIndex:m?0:-1,"data-orientation":a.orientation,...f,ref:o,onMouseDown:v(t.onMouseDown,g=>{n?a.onItemFocus(l):g.preventDefault()}),onFocus:v(t.onFocus,()=>a.onItemFocus(l)),onKeyDown:v(t.onKeyDown,g=>{if(g.key==="Tab"&&g.shiftKey){a.onItemShiftTab();return}if(g.target!==g.currentTarget)return;const b=Ft(g,a.orientation,a.dir);if(b!==void 0){if(g.metaKey||g.ctrlKey||g.altKey||g.shiftKey)return;g.preventDefault();let u=p().filter(h=>h.focusable).map(h=>h.ref.current);if(b==="last")u.reverse();else if(b==="prev"||b==="next"){b==="prev"&&u.reverse();const h=u.indexOf(g.currentTarget);u=a.loop?Ot(u,h+1):u.slice(h+1)}setTimeout(()=>ve(u))}}),children:typeof d=="function"?d({isCurrentTabStop:m,hasTabStop:S!=null}):d})})});ye.displayName=ge;var Pt={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function At(t,o){return o!=="rtl"?t:t==="ArrowLeft"?"ArrowRight":t==="ArrowRight"?"ArrowLeft":t}function Ft(t,o,s){const n=At(t.key,s);if(!(o==="vertical"&&["ArrowLeft","ArrowRight"].includes(n))&&!(o==="horizontal"&&["ArrowUp","ArrowDown"].includes(n)))return Pt[n]}function ve(t,o=!1){const s=document.activeElement;for(const n of t)if(n===s||(n.focus({preventScroll:o}),document.activeElement!==s))return}function Ot(t,o){return t.map((s,n)=>t[(o+n)%t.length])}var Lt=he,$t=ye,B="Tabs",[Kt,us]=te(B,[xe]),be=xe(),[Gt,oe]=Kt(B),Ne=c.forwardRef((t,o)=>{const{__scopeTabs:s,value:n,onValueChange:i,defaultValue:r,orientation:d="horizontal",dir:f,activationMode:x="automatic",...l}=t,a=me(f),[m,p]=se({prop:n,onChange:i,defaultProp:r??"",caller:B});return e.jsx(Gt,{scope:s,baseId:A(),value:m,onValueChange:p,orientation:d,dir:a,activationMode:x,children:e.jsx(_.div,{dir:a,"data-orientation":d,...l,ref:o})})});Ne.displayName=B;var je="TabsList",_e=c.forwardRef((t,o)=>{const{__scopeTabs:s,loop:n=!0,...i}=t,r=oe(je,s),d=be(s);return e.jsx(Lt,{asChild:!0,...d,orientation:r.orientation,dir:r.dir,loop:n,children:e.jsx(_.div,{role:"tablist","aria-orientation":r.orientation,...i,ref:o})})});_e.displayName=je;var we="TabsTrigger",Ce=c.forwardRef((t,o)=>{const{__scopeTabs:s,value:n,disabled:i=!1,...r}=t,d=oe(we,s),f=be(s),x=ke(d.baseId,n),l=Te(d.baseId,n),a=n===d.value;return e.jsx($t,{asChild:!0,...f,focusable:!i,active:a,children:e.jsx(_.button,{type:"button",role:"tab","aria-selected":a,"aria-controls":l,"data-state":a?"active":"inactive","data-disabled":i?"":void 0,disabled:i,id:x,...r,ref:o,onMouseDown:v(t.onMouseDown,m=>{!i&&m.button===0&&m.ctrlKey===!1?d.onValueChange(n):m.preventDefault()}),onKeyDown:v(t.onKeyDown,m=>{[" ","Enter"].includes(m.key)&&d.onValueChange(n)}),onFocus:v(t.onFocus,()=>{const m=d.activationMode!=="manual";!a&&!i&&m&&d.onValueChange(n)})})})});Ce.displayName=we;var Se="TabsContent",Re=c.forwardRef((t,o)=>{const{__scopeTabs:s,value:n,forceMount:i,children:r,...d}=t,f=oe(Se,s),x=ke(f.baseId,n),l=Te(f.baseId,n),a=n===f.value,m=c.useRef(a);return c.useEffect(()=>{const p=requestAnimationFrame(()=>m.current=!1);return()=>cancelAnimationFrame(p)},[]),e.jsx(U,{present:i||a,children:({present:p})=>e.jsx(_.div,{"data-state":a?"active":"inactive","data-orientation":f.orientation,role:"tabpanel","aria-labelledby":x,hidden:!p,id:l,tabIndex:0,...d,ref:o,style:{...t.style,animationDuration:m.current?"0s":void 0},children:p&&r})})});Re.displayName=Se;function ke(t,o){return`${t}-trigger-${o}`}function Te(t,o){return`${t}-content-${o}`}var Vt=Ne,Ie=_e,Ee=Ce,De=Re;const Wt=Vt,Me=c.forwardRef(({className:t,...o},s)=>e.jsx(Ie,{ref:s,className:k("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",t),...o}));Me.displayName=Ie.displayName;const z=c.forwardRef(({className:t,...o},s)=>e.jsx(Ee,{ref:s,className:k("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",t),...o}));z.displayName=Ee.displayName;const ee=c.forwardRef(({className:t,...o},s)=>e.jsx(De,{ref:s,className:k("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",t),...o}));ee.displayName=De.displayName;var H="Dialog",[Pe,fs]=te(H),[Ut,w]=Pe(H),Ae=t=>{const{__scopeDialog:o,children:s,open:n,defaultOpen:i,onOpenChange:r,modal:d=!0}=t,f=c.useRef(null),x=c.useRef(null),[l,a]=se({prop:n,defaultProp:i??!1,onChange:r,caller:H});return e.jsx(Ut,{scope:o,triggerRef:f,contentRef:x,contentId:A(),titleId:A(),descriptionId:A(),open:l,onOpenChange:a,onOpenToggle:c.useCallback(()=>a(m=>!m),[a]),modal:d,children:s})};Ae.displayName=H;var Fe="DialogTrigger",Oe=c.forwardRef((t,o)=>{const{__scopeDialog:s,...n}=t,i=w(Fe,s),r=W(o,i.triggerRef);return e.jsx(_.button,{type:"button","aria-haspopup":"dialog","aria-expanded":i.open,"aria-controls":i.contentId,"data-state":ie(i.open),...n,ref:r,onClick:v(t.onClick,i.onOpenToggle)})});Oe.displayName=Fe;var ne="DialogPortal",[Bt,Le]=Pe(ne,{forceMount:void 0}),$e=t=>{const{__scopeDialog:o,forceMount:s,children:n,container:i}=t,r=w(ne,o);return e.jsx(Bt,{scope:o,forceMount:s,children:c.Children.map(n,d=>e.jsx(U,{present:s||r.open,children:e.jsx(dt,{asChild:!0,container:i,children:d})}))})};$e.displayName=ne;var V="DialogOverlay",Ke=c.forwardRef((t,o)=>{const s=Le(V,t.__scopeDialog),{forceMount:n=s.forceMount,...i}=t,r=w(V,t.__scopeDialog);return r.modal?e.jsx(U,{present:n||r.open,children:e.jsx(Zt,{...i,ref:o})}):null});Ke.displayName=V;var Ht=mt("DialogOverlay.RemoveScroll"),Zt=c.forwardRef((t,o)=>{const{__scopeDialog:s,...n}=t,i=w(V,s);return e.jsx(ft,{as:Ht,allowPinchZoom:!0,shards:[i.contentRef],children:e.jsx(_.div,{"data-state":ie(i.open),...n,ref:o,style:{pointerEvents:"auto",...n.style}})})}),D="DialogContent",Ge=c.forwardRef((t,o)=>{const s=Le(D,t.__scopeDialog),{forceMount:n=s.forceMount,...i}=t,r=w(D,t.__scopeDialog);return e.jsx(U,{present:n||r.open,children:r.modal?e.jsx(Yt,{...i,ref:o}):e.jsx(qt,{...i,ref:o})})});Ge.displayName=D;var Yt=c.forwardRef((t,o)=>{const s=w(D,t.__scopeDialog),n=c.useRef(null),i=W(o,s.contentRef,n);return c.useEffect(()=>{const r=n.current;if(r)return ut(r)},[]),e.jsx(Ve,{...t,ref:i,trapFocus:s.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:v(t.onCloseAutoFocus,r=>{var d;r.preventDefault(),(d=s.triggerRef.current)==null||d.focus()}),onPointerDownOutside:v(t.onPointerDownOutside,r=>{const d=r.detail.originalEvent,f=d.button===0&&d.ctrlKey===!0;(d.button===2||f)&&r.preventDefault()}),onFocusOutside:v(t.onFocusOutside,r=>r.preventDefault())})}),qt=c.forwardRef((t,o)=>{const s=w(D,t.__scopeDialog),n=c.useRef(!1),i=c.useRef(!1);return e.jsx(Ve,{...t,ref:o,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:r=>{var d,f;(d=t.onCloseAutoFocus)==null||d.call(t,r),r.defaultPrevented||(n.current||(f=s.triggerRef.current)==null||f.focus(),r.preventDefault()),n.current=!1,i.current=!1},onInteractOutside:r=>{var x,l;(x=t.onInteractOutside)==null||x.call(t,r),r.defaultPrevented||(n.current=!0,r.detail.originalEvent.type==="pointerdown"&&(i.current=!0));const d=r.target;((l=s.triggerRef.current)==null?void 0:l.contains(d))&&r.preventDefault(),r.detail.originalEvent.type==="focusin"&&i.current&&r.preventDefault()}})}),Ve=c.forwardRef((t,o)=>{const{__scopeDialog:s,trapFocus:n,onOpenAutoFocus:i,onCloseAutoFocus:r,...d}=t,f=w(D,s),x=c.useRef(null),l=W(o,x);return pt(),e.jsxs(e.Fragment,{children:[e.jsx(xt,{asChild:!0,loop:!0,trapped:n,onMountAutoFocus:i,onUnmountAutoFocus:r,children:e.jsx(ht,{role:"dialog",id:f.contentId,"aria-describedby":f.descriptionId,"aria-labelledby":f.titleId,"data-state":ie(f.open),...d,ref:l,onDismiss:()=>f.onOpenChange(!1)})}),e.jsxs(e.Fragment,{children:[e.jsx(Xt,{titleId:f.titleId}),e.jsx(Qt,{contentRef:x,descriptionId:f.descriptionId})]})]})}),re="DialogTitle",We=c.forwardRef((t,o)=>{const{__scopeDialog:s,...n}=t,i=w(re,s);return e.jsx(_.h2,{id:i.titleId,...n,ref:o})});We.displayName=re;var Ue="DialogDescription",Be=c.forwardRef((t,o)=>{const{__scopeDialog:s,...n}=t,i=w(Ue,s);return e.jsx(_.p,{id:i.descriptionId,...n,ref:o})});Be.displayName=Ue;var He="DialogClose",Ze=c.forwardRef((t,o)=>{const{__scopeDialog:s,...n}=t,i=w(He,s);return e.jsx(_.button,{type:"button",...n,ref:o,onClick:v(t.onClick,()=>i.onOpenChange(!1))})});Ze.displayName=He;function ie(t){return t?"open":"closed"}var Ye="DialogTitleWarning",[ms,qe]=gt(Ye,{contentName:D,titleName:re,docsSlug:"dialog"}),Xt=({titleId:t})=>{const o=qe(Ye),s=`\`${o.contentName}\` requires a \`${o.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${o.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${o.docsSlug}`;return c.useEffect(()=>{t&&(document.getElementById(t)||console.error(s))},[s,t]),null},Jt="DialogDescriptionWarning",Qt=({contentRef:t,descriptionId:o})=>{const n=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${qe(Jt).contentName}}.`;return c.useEffect(()=>{var r;const i=(r=t.current)==null?void 0:r.getAttribute("aria-describedby");o&&i&&(document.getElementById(o)||console.warn(n))},[n,t,o]),null},zt=Ae,es=Oe,ts=$e,Xe=Ke,Je=Ge,Qe=We,ze=Be,ss=Ze;const as=zt,os=es,ns=ts,et=c.forwardRef(({className:t,...o},s)=>e.jsx(Xe,{ref:s,className:k("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...o}));et.displayName=Xe.displayName;const tt=c.forwardRef(({className:t,children:o,...s},n)=>e.jsxs(ns,{children:[e.jsx(et,{}),e.jsxs(Je,{ref:n,className:k("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...s,children:[o,e.jsxs(ss,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[e.jsx(ae,{className:"h-4 w-4"}),e.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));tt.displayName=Je.displayName;const st=({className:t,...o})=>e.jsx("div",{className:k("flex flex-col space-y-1.5 text-center sm:text-left",t),...o});st.displayName="DialogHeader";const at=c.forwardRef(({className:t,...o},s)=>e.jsx(Qe,{ref:s,className:k("text-lg font-semibold leading-none tracking-tight",t),...o}));at.displayName=Qe.displayName;const rs=c.forwardRef(({className:t,...o},s)=>e.jsx(ze,{ref:s,className:k("text-sm text-muted-foreground",t),...o}));rs.displayName=ze.displayName;function is({selectedMetric:t}){const[o,s]=c.useState("national"),[n,i]=c.useState(""),[r,d]=c.useState(!1),f=[{code:"CA",name:"California"},{code:"NY",name:"New York"},{code:"TX",name:"Texas"},{code:"FL",name:"Florida"},{code:"IL",name:"Illinois"},{code:"WA",name:"Washington"}],x=async()=>{d(!0);try{const l=document.createElement("canvas");l.width=1200,l.height=800;const a=l.getContext("2d");if(!a)throw new Error("Cannot get canvas context");a.fillStyle="#f8fafc",a.fillRect(0,0,l.width,l.height),a.fillStyle="#1e293b",a.font="bold 24px Arial",a.textAlign="center";const m=o==="national"?`U.S. Housing Market - ${t}`:`${n} Housing Market - ${t}`;a.fillText(m,l.width/2,40),a.fillStyle="#e2e8f0",a.fillRect(50,70,l.width-300,l.height-200),a.fillStyle="#64748b",a.font="16px Arial",a.textAlign="center",a.fillText("Map Visualization",l.width/2-75,l.height/2),a.fillStyle="#ffffff",a.fillRect(l.width-240,70,190,300),a.strokeStyle="#e2e8f0",a.strokeRect(l.width-240,70,190,300),a.fillStyle="#1e293b",a.font="bold 14px Arial",a.textAlign="left",a.fillText("Legend",l.width-230,95);const p=["Low","Medium-Low","Medium","Medium-High","High"],C=["#dcfce7","#bbf7d0","#fef3c7","#fed7aa","#fecaca"];p.forEach((g,b)=>{const R=120+b*25;a.fillStyle=C[b],a.fillRect(l.width-230,R-10,15,15),a.strokeStyle="#e2e8f0",a.strokeRect(l.width-230,R-10,15,15),a.fillStyle="#1e293b",a.font="12px Arial",a.fillText(g,l.width-210,R+2)}),a.fillStyle="#f1f5f9",a.fillRect(50,l.height-120,l.width-100,70),a.strokeStyle="#e2e8f0",a.strokeRect(50,l.height-120,l.width-100,70),a.fillStyle="#3b82f6",a.fillRect(70,l.height-100,30,30),a.fillStyle="#64748b",a.font="12px Arial",a.textAlign="left",a.fillText("Generated from: domapus.com",110,l.height-85),a.fillText(`Export Date: ${new Date().toLocaleDateString()}`,110,l.height-70),a.font="10px Arial",a.fillText("Data Source: Redfin Market Data",110,l.height-55);const N=document.createElement("a"),S=`housing-market-${o}-${t}-${new Date().toISOString().split("T")[0]}.png`;N.download=S,N.href=l.toDataURL("image/png"),N.click()}catch(l){console.error("Export failed:",l)}finally{d(!1)}};return e.jsxs(as,{children:[e.jsx(os,{asChild:!0,children:e.jsxs(E,{variant:"outline",size:"sm","aria-label":"Export map as PNG",children:[e.jsx(fe,{className:"h-4 w-4 mr-2","aria-hidden":"true"}),"Export Map"]})}),e.jsxs(tt,{className:"sm:max-w-md",children:[e.jsx(st,{children:e.jsxs(at,{className:"flex items-center gap-2",children:[e.jsx(Ct,{className:"h-5 w-5","aria-hidden":"true"}),"Export Map as PNG"]})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs(F,{children:[e.jsx(yt,{className:"pb-3",children:e.jsx(vt,{className:"text-sm",children:"Export Type"})}),e.jsxs(O,{className:"space-y-3",children:[e.jsxs(le,{value:o,onValueChange:l=>s(l),children:[e.jsx(ce,{"aria-label":"Select export type",children:e.jsx(de,{})}),e.jsxs(ue,{children:[e.jsx(Y,{value:"national",children:"National Map"}),e.jsx(Y,{value:"state",children:"State Map"})]})]}),o==="state"&&e.jsxs(le,{value:n,onValueChange:i,children:[e.jsx(ce,{"aria-label":"Select state",children:e.jsx(de,{placeholder:"Select a state"})}),e.jsx(ue,{children:f.map(l=>e.jsx(Y,{value:l.code,children:l.name},l.code))})]})]})]}),e.jsxs("div",{className:"text-sm text-muted-foreground",children:[e.jsx("p",{children:"The exported PNG will include:"}),e.jsxs("ul",{className:"list-disc list-inside mt-1 space-y-1",children:[e.jsx("li",{children:"Map visualization with current metric"}),e.jsx("li",{children:"Legend and color scale"}),e.jsx("li",{children:"Website watermark and timestamp"}),e.jsx("li",{children:"Data source attribution"})]})]}),e.jsx(E,{onClick:x,disabled:r||o==="state"&&!n,className:"w-full","aria-label":r?"Exporting map...":"Export map as PNG",children:r?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-current mr-2"}),"Exporting..."]}):e.jsxs(e.Fragment,{children:[e.jsx(fe,{className:"h-4 w-4 mr-2","aria-hidden":"true"}),"Export PNG"]})})]})]})]})}function ls({currentZip:t,onClose:o}){const[s,n]=c.useState(""),[i,r]=c.useState(null),[d,f]=c.useState({}),[x,l]=c.useState({}),[a,m]=c.useState(!1),[p,C]=c.useState("");c.useEffect(()=>{(async()=>{try{const j=await(await fetch("data/zip_data.json")).json();f(j);const K=await(await fetch("data/zip-city-mapping.csv")).text(),y={};K.split(`
`).slice(1).forEach(Z=>{const[P,M]=Z.split(",");P&&M&&(y[P.trim()]=M.trim())}),l(y)}catch(h){console.error("Error loading data:",h)}})()},[]);const N=async()=>{if(s.trim()){m(!0),C("");try{const u=d[s.trim()];if(u){const h={...u,zipCode:s.trim(),city:x[s.trim()]||u.city||"Unknown"};r(h)}else C("ZIP code not found in database"),r(null)}catch{C("Error searching for ZIP code"),r(null)}finally{m(!1)}}},S=(u,h)=>{if(u==null)return"N/A";switch(h){case"price":return`$${Number(u).toLocaleString()}`;case"days":return`${u} days`;case"percentage":return`${Number(u).toFixed(1)}%`;case"ratio":return`${(Number(u)*100).toFixed(1)}%`;default:return u.toString()}},g=(u,h)=>{if(!u||!h)return"same";const j=Number(u)-Number(h);return Math.abs(j)<.01?"same":j>0?"higher":"lower"},b=({comparison:u})=>{switch(u){case"higher":return e.jsx(J,{className:"h-4 w-4 text-green-500"});case"lower":return e.jsx(X,{className:"h-4 w-4 text-red-500"});default:return e.jsx(St,{className:"h-4 w-4 text-muted-foreground"})}},R=[{key:"median_sale_price",label:"Median Sale Price",type:"price"},{key:"median_list_price",label:"Median List Price",type:"price"},{key:"median_dom",label:"Median Days on Market",type:"days"},{key:"inventory",label:"Inventory",type:"number"},{key:"new_listings",label:"New Listings",type:"number"},{key:"homes_sold",label:"Homes Sold",type:"number"},{key:"avg_sale_to_list_ratio",label:"Sale-to-List Ratio",type:"ratio"},{key:"sold_above_list",label:"% Sold Above List",type:"percentage"},{key:"off_market_in_two_weeks",label:"% Off Market in 2 Weeks",type:"percentage"}];return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-semibold text-dashboard-text-primary",children:"Compare ZIP Codes"}),e.jsx(E,{variant:"ghost",size:"sm",onClick:o,children:e.jsx(ae,{className:"h-4 w-4"})})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(bt,{placeholder:"Enter ZIP code to compare",value:s,onChange:u=>n(u.target.value),onKeyDown:u=>u.key==="Enter"&&N(),"aria-label":"ZIP code to compare"}),e.jsx(E,{onClick:N,disabled:a,size:"sm",children:e.jsx(Nt,{className:"h-4 w-4"})})]}),p&&e.jsx("div",{className:"text-sm text-red-500 bg-red-50 p-2 rounded",children:p}),i&&e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"grid grid-cols-3 gap-2 mb-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx(G,{variant:"outline",className:"mb-1",children:t.zipCode}),e.jsxs("div",{className:"text-xs text-dashboard-text-secondary",children:[t.city,", ",t.state]})]}),e.jsx("div",{className:"text-center text-xs text-dashboard-text-secondary",children:"Comparison"}),e.jsxs("div",{className:"text-center",children:[e.jsx(G,{variant:"outline",className:"mb-1",children:i.zipCode}),e.jsxs("div",{className:"text-xs text-dashboard-text-secondary",children:[i.city,", ",i.state]})]})]}),e.jsx("div",{className:"space-y-2",children:R.map(u=>{const h=t[u.key],j=i[u.key],$=g(h,j);return e.jsx(F,{className:"border-dashboard-border",children:e.jsx(O,{className:"p-3",children:e.jsxs("div",{className:"grid grid-cols-3 gap-2 items-center",children:[e.jsx("div",{className:"text-right",children:e.jsx("div",{className:"font-medium text-sm",children:S(h,u.type)})}),e.jsx("div",{className:"text-center",children:e.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[e.jsx(b,{comparison:$}),e.jsx("span",{className:"text-xs text-dashboard-text-secondary",children:u.label})]})}),e.jsx("div",{className:"text-left",children:e.jsx("div",{className:"font-medium text-sm",children:S(j,u.type)})})]})})},u.key)})})]})]})}function ps({isOpen:t,isCollapsed:o,zipData:s,onClose:n,onToggleCollapse:i}){const[r,d]=c.useState(!1);if(!t||!s)return null;const f=(a,m)=>{if(a==null)return"N/A";switch(m){case"price":return`$${Number(a).toLocaleString()}`;case"days":return`${a} days`;case"percentage":return`${Number(a).toFixed(1)}%`;case"ratio":return`${(Number(a)*100).toFixed(1)}%`;default:return a.toString()}},x=a=>{if(a==null)return{formatted:"N/A",isPositive:!1};const m=Number(a),p=m>=0;return{formatted:`${p?"+":""}${m.toFixed(1)}%`,isPositive:p}},l=[{key:"median_sale_price",label:"Median Sale Price",type:"price",yoyKey:"median_sale_price_yoy_pct",value:s.median_sale_price||s.medianSalePrice},{key:"median_list_price",label:"Median List Price",type:"price",yoyKey:"median_list_price_yoy_pct",value:s.median_list_price||s.medianListPrice},{key:"median_dom",label:"Median Days on Market",type:"days",yoyKey:"median_dom_yoy_pct",value:s.median_dom||s.medianDOM},{key:"inventory",label:"Inventory",type:"number",yoyKey:"inventory_yoy_pct",value:s.inventory},{key:"new_listings",label:"New Listings",type:"number",yoyKey:"new_listings_yoy_pct",value:s.new_listings},{key:"homes_sold",label:"Homes Sold",type:"number",yoyKey:"homes_sold_yoy_pct",value:s.homes_sold||s.homesSold},{key:"avg_sale_to_list_ratio",label:"Sale-to-List Ratio",type:"ratio",yoyKey:"avg_sale_to_list_yoy_pct",value:s.avg_sale_to_list_ratio||s.saleToListRatio},{key:"sold_above_list",label:"% Sold Above List",type:"percentage",yoyKey:"sold_above_list_yoy_pct",value:s.sold_above_list||s.homesSoldAboveList},{key:"off_market_in_two_weeks",label:"% Off Market in 2 Weeks",type:"percentage",yoyKey:"off_market_in_two_weeks_yoy_pct",value:s.off_market_in_two_weeks||s.offMarket2Weeks},{key:"median_ppsf",label:"Median Price per Sq Ft",type:"price",yoyKey:null,value:s.median_ppsf},{key:"median_list_ppsf",label:"Median List Price per Sq Ft",type:"price",yoyKey:null,value:s.median_list_ppsf},{key:"pending_sales",label:"Pending Sales",type:"number",yoyKey:null,value:s.pending_sales},{key:"months_of_supply",label:"Months of Supply",type:"number",yoyKey:null,value:s.months_of_supply},{key:"price_drops",label:"Price Drops",type:"number",yoyKey:null,value:s.price_drops}].filter(a=>a.value!==null&&a.value!==void 0);return e.jsxs("div",{className:`fixed left-0 top-0 h-full bg-dashboard-panel border-r border-dashboard-border shadow-lg z-40 transition-all duration-300 ${o?"w-16":"w-96"}`,children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-dashboard-border",children:[!o&&e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold text-dashboard-text-primary",children:"ZIP Code Details"}),e.jsxs("p",{className:"text-sm text-dashboard-text-secondary",children:[s.zipCode,", ",s.state]}),s.city&&e.jsx("p",{className:"text-xs text-dashboard-text-secondary",children:s.city})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(E,{variant:"ghost",size:"sm",onClick:i,children:o?e.jsx(wt,{className:"h-4 w-4"}):e.jsx(_t,{className:"h-4 w-4"})}),!o&&e.jsx(E,{variant:"ghost",size:"sm",onClick:n,children:e.jsx(ae,{className:"h-4 w-4"})})]})]}),!o&&e.jsxs("div",{className:"flex flex-col h-full",children:[r?e.jsx("div",{className:"p-4 flex-1 overflow-y-auto",children:e.jsx(ls,{currentZip:s,onClose:()=>d(!1)})}):e.jsx("div",{className:"flex-1 overflow-y-auto",children:e.jsxs(Wt,{defaultValue:"metrics",className:"w-full",children:[e.jsxs(Me,{className:"grid w-full grid-cols-2 mx-4 mt-4",children:[e.jsx(z,{value:"metrics",children:"Current Data"}),e.jsx(z,{value:"trends",children:"YoY Trends"})]}),e.jsxs(ee,{value:"metrics",className:"p-4 space-y-3",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[e.jsx(G,{variant:"outline",className:"text-lg px-3 py-1",children:s.zipCode}),e.jsx("span",{className:"text-dashboard-text-secondary",children:s.state})]}),e.jsx("div",{className:"space-y-3",children:l.map((a,m)=>e.jsx(F,{className:"border-dashboard-border",children:e.jsx(O,{className:"p-4",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm text-dashboard-text-secondary font-medium",children:a.label}),e.jsx("p",{className:"text-xl font-bold text-dashboard-text-primary mt-1",children:f(a.value,a.type)})]}),a.yoyKey&&s[a.yoyKey]&&e.jsx("div",{className:"flex flex-col items-end",children:(()=>{const p=x(s[a.yoyKey]);return e.jsxs(e.Fragment,{children:[e.jsxs(G,{variant:p.isPositive?"default":"destructive",className:"text-xs flex items-center space-x-1",children:[p.isPositive?e.jsx(J,{className:"h-3 w-3"}):e.jsx(X,{className:"h-3 w-3"}),e.jsx("span",{children:p.formatted})]}),e.jsx("span",{className:"text-xs text-dashboard-text-secondary mt-1",children:"vs last year"})]})})()})]})})},m))})]}),e.jsx(ee,{value:"trends",className:"p-4 space-y-3",children:e.jsx("div",{className:"space-y-3",children:l.filter(a=>a.yoyKey&&s[a.yoyKey]).map((a,m)=>{const p=x(s[a.yoyKey]);return e.jsx(F,{className:"border-dashboard-border",children:e.jsx(O,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm text-dashboard-text-secondary font-medium",children:a.label}),e.jsx("p",{className:"text-lg font-bold text-dashboard-text-primary mt-1",children:f(a.value,a.type)})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[p.isPositive?e.jsx(J,{className:"h-5 w-5 text-green-500"}):e.jsx(X,{className:"h-5 w-5 text-red-500"}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:`text-lg font-bold ${p.isPositive?"text-green-600":"text-red-600"}`,children:p.formatted}),e.jsx("div",{className:"text-xs text-dashboard-text-secondary",children:"YoY Change"})]})]})]})})},m)})})})]})}),e.jsxs("div",{className:"p-4 space-y-3 border-t border-dashboard-border bg-dashboard-panel",children:[e.jsxs(E,{variant:"outline",className:"w-full",onClick:()=>d(!r),children:[e.jsx(jt,{className:"h-4 w-4 mr-2"}),r?"Back to Details":"Compare ZIP Codes"]}),e.jsx(is,{selectedMetric:"current-view"}),e.jsx(F,{className:"border-dashboard-border bg-muted/30",children:e.jsx(O,{className:"p-3",children:e.jsx("p",{className:"text-xs text-dashboard-text-secondary",children:"Data sourced from Redfin Data Center. Updated periodically from latest available data."})})})]})]})]})}export{ps as Sidebar};
