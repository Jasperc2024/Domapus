function DT(e,n){for(var i=0;i<n.length;i++){const l=n[i];if(typeof l!="string"&&!Array.isArray(l)){for(const h in l)if(h!=="default"&&!(h in e)){const d=Object.getOwnPropertyDescriptor(l,h);d&&Object.defineProperty(e,h,d.get?d:{enumerable:!0,get:()=>l[h]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const h of document.querySelectorAll('link[rel="modulepreload"]'))l(h);new MutationObserver(h=>{for(const d of h)if(d.type==="childList")for(const m of d.addedNodes)m.tagName==="LINK"&&m.rel==="modulepreload"&&l(m)}).observe(document,{childList:!0,subtree:!0});function i(h){const d={};return h.integrity&&(d.integrity=h.integrity),h.referrerPolicy&&(d.referrerPolicy=h.referrerPolicy),h.crossOrigin==="use-credentials"?d.credentials="include":h.crossOrigin==="anonymous"?d.credentials="omit":d.credentials="same-origin",d}function l(h){if(h.ep)return;h.ep=!0;const d=i(h);fetch(h.href,d)}})();var wV=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function pw(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var zv={exports:{}},im={},Hv={exports:{}},ni={};var Tb;function RT(){if(Tb)return ni;Tb=1;var e=Symbol.for("react.element"),n=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),l=Symbol.for("react.strict_mode"),h=Symbol.for("react.profiler"),d=Symbol.for("react.provider"),m=Symbol.for("react.context"),o=Symbol.for("react.forward_ref"),x=Symbol.for("react.suspense"),E=Symbol.for("react.memo"),I=Symbol.for("react.lazy"),D=Symbol.iterator;function O(Re){return Re===null||typeof Re!="object"?null:(Re=D&&Re[D]||Re["@@iterator"],typeof Re=="function"?Re:null)}var P={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},W=Object.assign,z={};function H(Re,oe,Se){this.props=Re,this.context=oe,this.refs=z,this.updater=Se||P}H.prototype.isReactComponent={},H.prototype.setState=function(Re,oe){if(typeof Re!="object"&&typeof Re!="function"&&Re!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,Re,oe,"setState")},H.prototype.forceUpdate=function(Re){this.updater.enqueueForceUpdate(this,Re,"forceUpdate")};function Z(){}Z.prototype=H.prototype;function ie(Re,oe,Se){this.props=Re,this.context=oe,this.refs=z,this.updater=Se||P}var ce=ie.prototype=new Z;ce.constructor=ie,W(ce,H.prototype),ce.isPureReactComponent=!0;var he=Array.isArray,Ie=Object.prototype.hasOwnProperty,Ve={current:null},Me={key:!0,ref:!0,__self:!0,__source:!0};function Pe(Re,oe,Se){var Ne,Ye={},lt=null,rt=null;if(oe!=null)for(Ne in oe.ref!==void 0&&(rt=oe.ref),oe.key!==void 0&&(lt=""+oe.key),oe)Ie.call(oe,Ne)&&!Me.hasOwnProperty(Ne)&&(Ye[Ne]=oe[Ne]);var vt=arguments.length-2;if(vt===1)Ye.children=Se;else if(1<vt){for(var St=Array(vt),Lt=0;Lt<vt;Lt++)St[Lt]=arguments[Lt+2];Ye.children=St}if(Re&&Re.defaultProps)for(Ne in vt=Re.defaultProps,vt)Ye[Ne]===void 0&&(Ye[Ne]=vt[Ne]);return{$$typeof:e,type:Re,key:lt,ref:rt,props:Ye,_owner:Ve.current}}function xe(Re,oe){return{$$typeof:e,type:Re.type,key:oe,ref:Re.ref,props:Re.props,_owner:Re._owner}}function nt(Re){return typeof Re=="object"&&Re!==null&&Re.$$typeof===e}function pe(Re){var oe={"=":"=0",":":"=2"};return"$"+Re.replace(/[=:]/g,function(Se){return oe[Se]})}var _e=/\/+/g;function Ue(Re,oe){return typeof Re=="object"&&Re!==null&&Re.key!=null?pe(""+Re.key):oe.toString(36)}function Fe(Re,oe,Se,Ne,Ye){var lt=typeof Re;(lt==="undefined"||lt==="boolean")&&(Re=null);var rt=!1;if(Re===null)rt=!0;else switch(lt){case"string":case"number":rt=!0;break;case"object":switch(Re.$$typeof){case e:case n:rt=!0}}if(rt)return rt=Re,Ye=Ye(rt),Re=Ne===""?"."+Ue(rt,0):Ne,he(Ye)?(Se="",Re!=null&&(Se=Re.replace(_e,"$&/")+"/"),Fe(Ye,oe,Se,"",function(Lt){return Lt})):Ye!=null&&(nt(Ye)&&(Ye=xe(Ye,Se+(!Ye.key||rt&&rt.key===Ye.key?"":(""+Ye.key).replace(_e,"$&/")+"/")+Re)),oe.push(Ye)),1;if(rt=0,Ne=Ne===""?".":Ne+":",he(Re))for(var vt=0;vt<Re.length;vt++){lt=Re[vt];var St=Ne+Ue(lt,vt);rt+=Fe(lt,oe,Se,St,Ye)}else if(St=O(Re),typeof St=="function")for(Re=St.call(Re),vt=0;!(lt=Re.next()).done;)lt=lt.value,St=Ne+Ue(lt,vt++),rt+=Fe(lt,oe,Se,St,Ye);else if(lt==="object")throw oe=String(Re),Error("Objects are not valid as a React child (found: "+(oe==="[object Object]"?"object with keys {"+Object.keys(Re).join(", ")+"}":oe)+"). If you meant to render a collection of children, use an array instead.");return rt}function pt(Re,oe,Se){if(Re==null)return Re;var Ne=[],Ye=0;return Fe(Re,Ne,"","",function(lt){return oe.call(Se,lt,Ye++)}),Ne}function ht(Re){if(Re._status===-1){var oe=Re._result;oe=oe(),oe.then(function(Se){(Re._status===0||Re._status===-1)&&(Re._status=1,Re._result=Se)},function(Se){(Re._status===0||Re._status===-1)&&(Re._status=2,Re._result=Se)}),Re._status===-1&&(Re._status=0,Re._result=oe)}if(Re._status===1)return Re._result.default;throw Re._result}var Je={current:null},ze={transition:null},je={ReactCurrentDispatcher:Je,ReactCurrentBatchConfig:ze,ReactCurrentOwner:Ve};function xt(){throw Error("act(...) is not supported in production builds of React.")}return ni.Children={map:pt,forEach:function(Re,oe,Se){pt(Re,function(){oe.apply(this,arguments)},Se)},count:function(Re){var oe=0;return pt(Re,function(){oe++}),oe},toArray:function(Re){return pt(Re,function(oe){return oe})||[]},only:function(Re){if(!nt(Re))throw Error("React.Children.only expected to receive a single React element child.");return Re}},ni.Component=H,ni.Fragment=i,ni.Profiler=h,ni.PureComponent=ie,ni.StrictMode=l,ni.Suspense=x,ni.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=je,ni.act=xt,ni.cloneElement=function(Re,oe,Se){if(Re==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+Re+".");var Ne=W({},Re.props),Ye=Re.key,lt=Re.ref,rt=Re._owner;if(oe!=null){if(oe.ref!==void 0&&(lt=oe.ref,rt=Ve.current),oe.key!==void 0&&(Ye=""+oe.key),Re.type&&Re.type.defaultProps)var vt=Re.type.defaultProps;for(St in oe)Ie.call(oe,St)&&!Me.hasOwnProperty(St)&&(Ne[St]=oe[St]===void 0&&vt!==void 0?vt[St]:oe[St])}var St=arguments.length-2;if(St===1)Ne.children=Se;else if(1<St){vt=Array(St);for(var Lt=0;Lt<St;Lt++)vt[Lt]=arguments[Lt+2];Ne.children=vt}return{$$typeof:e,type:Re.type,key:Ye,ref:lt,props:Ne,_owner:rt}},ni.createContext=function(Re){return Re={$$typeof:m,_currentValue:Re,_currentValue2:Re,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},Re.Provider={$$typeof:d,_context:Re},Re.Consumer=Re},ni.createElement=Pe,ni.createFactory=function(Re){var oe=Pe.bind(null,Re);return oe.type=Re,oe},ni.createRef=function(){return{current:null}},ni.forwardRef=function(Re){return{$$typeof:o,render:Re}},ni.isValidElement=nt,ni.lazy=function(Re){return{$$typeof:I,_payload:{_status:-1,_result:Re},_init:ht}},ni.memo=function(Re,oe){return{$$typeof:E,type:Re,compare:oe===void 0?null:oe}},ni.startTransition=function(Re){var oe=ze.transition;ze.transition={};try{Re()}finally{ze.transition=oe}},ni.unstable_act=xt,ni.useCallback=function(Re,oe){return Je.current.useCallback(Re,oe)},ni.useContext=function(Re){return Je.current.useContext(Re)},ni.useDebugValue=function(){},ni.useDeferredValue=function(Re){return Je.current.useDeferredValue(Re)},ni.useEffect=function(Re,oe){return Je.current.useEffect(Re,oe)},ni.useId=function(){return Je.current.useId()},ni.useImperativeHandle=function(Re,oe,Se){return Je.current.useImperativeHandle(Re,oe,Se)},ni.useInsertionEffect=function(Re,oe){return Je.current.useInsertionEffect(Re,oe)},ni.useLayoutEffect=function(Re,oe){return Je.current.useLayoutEffect(Re,oe)},ni.useMemo=function(Re,oe){return Je.current.useMemo(Re,oe)},ni.useReducer=function(Re,oe,Se){return Je.current.useReducer(Re,oe,Se)},ni.useRef=function(Re){return Je.current.useRef(Re)},ni.useState=function(Re){return Je.current.useState(Re)},ni.useSyncExternalStore=function(Re,oe,Se){return Je.current.useSyncExternalStore(Re,oe,Se)},ni.useTransition=function(){return Je.current.useTransition()},ni.version="18.3.1",ni}var Pb;function mw(){return Pb||(Pb=1,Hv.exports=RT()),Hv.exports}var Lb;function NT(){if(Lb)return im;Lb=1;var e=mw(),n=Symbol.for("react.element"),i=Symbol.for("react.fragment"),l=Object.prototype.hasOwnProperty,h=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,d={key:!0,ref:!0,__self:!0,__source:!0};function m(o,x,E){var I,D={},O=null,P=null;E!==void 0&&(O=""+E),x.key!==void 0&&(O=""+x.key),x.ref!==void 0&&(P=x.ref);for(I in x)l.call(x,I)&&!d.hasOwnProperty(I)&&(D[I]=x[I]);if(o&&o.defaultProps)for(I in x=o.defaultProps,x)D[I]===void 0&&(D[I]=x[I]);return{$$typeof:n,type:o,key:O,ref:P,props:D,_owner:h.current}}return im.Fragment=i,im.jsx=m,im.jsxs=m,im}var Mb;function QT(){return Mb||(Mb=1,zv.exports=NT()),zv.exports}var ae=QT(),Qg={},jv={exports:{}},Yc={},Vv={exports:{}},Gv={};var kb;function OT(){return kb||(kb=1,(function(e){function n(ze,je){var xt=ze.length;ze.push(je);e:for(;0<xt;){var Re=xt-1>>>1,oe=ze[Re];if(0<h(oe,je))ze[Re]=je,ze[xt]=oe,xt=Re;else break e}}function i(ze){return ze.length===0?null:ze[0]}function l(ze){if(ze.length===0)return null;var je=ze[0],xt=ze.pop();if(xt!==je){ze[0]=xt;e:for(var Re=0,oe=ze.length,Se=oe>>>1;Re<Se;){var Ne=2*(Re+1)-1,Ye=ze[Ne],lt=Ne+1,rt=ze[lt];if(0>h(Ye,xt))lt<oe&&0>h(rt,Ye)?(ze[Re]=rt,ze[lt]=xt,Re=lt):(ze[Re]=Ye,ze[Ne]=xt,Re=Ne);else if(lt<oe&&0>h(rt,xt))ze[Re]=rt,ze[lt]=xt,Re=lt;else break e}}return je}function h(ze,je){var xt=ze.sortIndex-je.sortIndex;return xt!==0?xt:ze.id-je.id}if(typeof performance=="object"&&typeof performance.now=="function"){var d=performance;e.unstable_now=function(){return d.now()}}else{var m=Date,o=m.now();e.unstable_now=function(){return m.now()-o}}var x=[],E=[],I=1,D=null,O=3,P=!1,W=!1,z=!1,H=typeof setTimeout=="function"?setTimeout:null,Z=typeof clearTimeout=="function"?clearTimeout:null,ie=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function ce(ze){for(var je=i(E);je!==null;){if(je.callback===null)l(E);else if(je.startTime<=ze)l(E),je.sortIndex=je.expirationTime,n(x,je);else break;je=i(E)}}function he(ze){if(z=!1,ce(ze),!W)if(i(x)!==null)W=!0,ht(Ie);else{var je=i(E);je!==null&&Je(he,je.startTime-ze)}}function Ie(ze,je){W=!1,z&&(z=!1,Z(Pe),Pe=-1),P=!0;var xt=O;try{for(ce(je),D=i(x);D!==null&&(!(D.expirationTime>je)||ze&&!pe());){var Re=D.callback;if(typeof Re=="function"){D.callback=null,O=D.priorityLevel;var oe=Re(D.expirationTime<=je);je=e.unstable_now(),typeof oe=="function"?D.callback=oe:D===i(x)&&l(x),ce(je)}else l(x);D=i(x)}if(D!==null)var Se=!0;else{var Ne=i(E);Ne!==null&&Je(he,Ne.startTime-je),Se=!1}return Se}finally{D=null,O=xt,P=!1}}var Ve=!1,Me=null,Pe=-1,xe=5,nt=-1;function pe(){return!(e.unstable_now()-nt<xe)}function _e(){if(Me!==null){var ze=e.unstable_now();nt=ze;var je=!0;try{je=Me(!0,ze)}finally{je?Ue():(Ve=!1,Me=null)}}else Ve=!1}var Ue;if(typeof ie=="function")Ue=function(){ie(_e)};else if(typeof MessageChannel<"u"){var Fe=new MessageChannel,pt=Fe.port2;Fe.port1.onmessage=_e,Ue=function(){pt.postMessage(null)}}else Ue=function(){H(_e,0)};function ht(ze){Me=ze,Ve||(Ve=!0,Ue())}function Je(ze,je){Pe=H(function(){ze(e.unstable_now())},je)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(ze){ze.callback=null},e.unstable_continueExecution=function(){W||P||(W=!0,ht(Ie))},e.unstable_forceFrameRate=function(ze){0>ze||125<ze?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):xe=0<ze?Math.floor(1e3/ze):5},e.unstable_getCurrentPriorityLevel=function(){return O},e.unstable_getFirstCallbackNode=function(){return i(x)},e.unstable_next=function(ze){switch(O){case 1:case 2:case 3:var je=3;break;default:je=O}var xt=O;O=je;try{return ze()}finally{O=xt}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(ze,je){switch(ze){case 1:case 2:case 3:case 4:case 5:break;default:ze=3}var xt=O;O=ze;try{return je()}finally{O=xt}},e.unstable_scheduleCallback=function(ze,je,xt){var Re=e.unstable_now();switch(typeof xt=="object"&&xt!==null?(xt=xt.delay,xt=typeof xt=="number"&&0<xt?Re+xt:Re):xt=Re,ze){case 1:var oe=-1;break;case 2:oe=250;break;case 5:oe=1073741823;break;case 4:oe=1e4;break;default:oe=5e3}return oe=xt+oe,ze={id:I++,callback:je,priorityLevel:ze,startTime:xt,expirationTime:oe,sortIndex:-1},xt>Re?(ze.sortIndex=xt,n(E,ze),i(x)===null&&ze===i(E)&&(z?(Z(Pe),Pe=-1):z=!0,Je(he,xt-Re))):(ze.sortIndex=oe,n(x,ze),W||P||(W=!0,ht(Ie))),ze},e.unstable_shouldYield=pe,e.unstable_wrapCallback=function(ze){var je=O;return function(){var xt=O;O=je;try{return ze.apply(this,arguments)}finally{O=xt}}}})(Gv)),Gv}var Ub;function zT(){return Ub||(Ub=1,Vv.exports=OT()),Vv.exports}var Db;function HT(){if(Db)return Yc;Db=1;var e=mw(),n=zT();function i(u){for(var g="https://reactjs.org/docs/error-decoder.html?invariant="+u,C=1;C<arguments.length;C++)g+="&args[]="+encodeURIComponent(arguments[C]);return"Minified React error #"+u+"; visit "+g+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var l=new Set,h={};function d(u,g){m(u,g),m(u+"Capture",g)}function m(u,g){for(h[u]=g,u=0;u<g.length;u++)l.add(g[u])}var o=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),x=Object.prototype.hasOwnProperty,E=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,I={},D={};function O(u){return x.call(D,u)?!0:x.call(I,u)?!1:E.test(u)?D[u]=!0:(I[u]=!0,!1)}function P(u,g,C,k){if(C!==null&&C.type===0)return!1;switch(typeof g){case"function":case"symbol":return!0;case"boolean":return k?!1:C!==null?!C.acceptsBooleans:(u=u.toLowerCase().slice(0,5),u!=="data-"&&u!=="aria-");default:return!1}}function W(u,g,C,k){if(g===null||typeof g>"u"||P(u,g,C,k))return!0;if(k)return!1;if(C!==null)switch(C.type){case 3:return!g;case 4:return g===!1;case 5:return isNaN(g);case 6:return isNaN(g)||1>g}return!1}function z(u,g,C,k,G,Y,be){this.acceptsBooleans=g===2||g===3||g===4,this.attributeName=k,this.attributeNamespace=G,this.mustUseProperty=C,this.propertyName=u,this.type=g,this.sanitizeURL=Y,this.removeEmptyString=be}var H={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(u){H[u]=new z(u,0,!1,u,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(u){var g=u[0];H[g]=new z(g,1,!1,u[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(u){H[u]=new z(u,2,!1,u.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(u){H[u]=new z(u,2,!1,u,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(u){H[u]=new z(u,3,!1,u.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(u){H[u]=new z(u,3,!0,u,null,!1,!1)}),["capture","download"].forEach(function(u){H[u]=new z(u,4,!1,u,null,!1,!1)}),["cols","rows","size","span"].forEach(function(u){H[u]=new z(u,6,!1,u,null,!1,!1)}),["rowSpan","start"].forEach(function(u){H[u]=new z(u,5,!1,u.toLowerCase(),null,!1,!1)});var Z=/[\-:]([a-z])/g;function ie(u){return u[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(u){var g=u.replace(Z,ie);H[g]=new z(g,1,!1,u,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(u){var g=u.replace(Z,ie);H[g]=new z(g,1,!1,u,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(u){var g=u.replace(Z,ie);H[g]=new z(g,1,!1,u,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(u){H[u]=new z(u,1,!1,u.toLowerCase(),null,!1,!1)}),H.xlinkHref=new z("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(u){H[u]=new z(u,1,!1,u.toLowerCase(),null,!0,!0)});function ce(u,g,C,k){var G=H.hasOwnProperty(g)?H[g]:null;(G!==null?G.type!==0:k||!(2<g.length)||g[0]!=="o"&&g[0]!=="O"||g[1]!=="n"&&g[1]!=="N")&&(W(g,C,G,k)&&(C=null),k||G===null?O(g)&&(C===null?u.removeAttribute(g):u.setAttribute(g,""+C)):G.mustUseProperty?u[G.propertyName]=C===null?G.type===3?!1:"":C:(g=G.attributeName,k=G.attributeNamespace,C===null?u.removeAttribute(g):(G=G.type,C=G===3||G===4&&C===!0?"":""+C,k?u.setAttributeNS(k,g,C):u.setAttribute(g,C))))}var he=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Ie=Symbol.for("react.element"),Ve=Symbol.for("react.portal"),Me=Symbol.for("react.fragment"),Pe=Symbol.for("react.strict_mode"),xe=Symbol.for("react.profiler"),nt=Symbol.for("react.provider"),pe=Symbol.for("react.context"),_e=Symbol.for("react.forward_ref"),Ue=Symbol.for("react.suspense"),Fe=Symbol.for("react.suspense_list"),pt=Symbol.for("react.memo"),ht=Symbol.for("react.lazy"),Je=Symbol.for("react.offscreen"),ze=Symbol.iterator;function je(u){return u===null||typeof u!="object"?null:(u=ze&&u[ze]||u["@@iterator"],typeof u=="function"?u:null)}var xt=Object.assign,Re;function oe(u){if(Re===void 0)try{throw Error()}catch(C){var g=C.stack.trim().match(/\n( *(at )?)/);Re=g&&g[1]||""}return`
`+Re+u}var Se=!1;function Ne(u,g){if(!u||Se)return"";Se=!0;var C=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(g)if(g=function(){throw Error()},Object.defineProperty(g.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(g,[])}catch(jt){var k=jt}Reflect.construct(u,[],g)}else{try{g.call()}catch(jt){k=jt}u.call(g.prototype)}else{try{throw Error()}catch(jt){k=jt}u()}}catch(jt){if(jt&&k&&typeof jt.stack=="string"){for(var G=jt.stack.split(`
`),Y=k.stack.split(`
`),be=G.length-1,At=Y.length-1;1<=be&&0<=At&&G[be]!==Y[At];)At--;for(;1<=be&&0<=At;be--,At--)if(G[be]!==Y[At]){if(be!==1||At!==1)do if(be--,At--,0>At||G[be]!==Y[At]){var wt=`
`+G[be].replace(" at new "," at ");return u.displayName&&wt.includes("<anonymous>")&&(wt=wt.replace("<anonymous>",u.displayName)),wt}while(1<=be&&0<=At);break}}}finally{Se=!1,Error.prepareStackTrace=C}return(u=u?u.displayName||u.name:"")?oe(u):""}function Ye(u){switch(u.tag){case 5:return oe(u.type);case 16:return oe("Lazy");case 13:return oe("Suspense");case 19:return oe("SuspenseList");case 0:case 2:case 15:return u=Ne(u.type,!1),u;case 11:return u=Ne(u.type.render,!1),u;case 1:return u=Ne(u.type,!0),u;default:return""}}function lt(u){if(u==null)return null;if(typeof u=="function")return u.displayName||u.name||null;if(typeof u=="string")return u;switch(u){case Me:return"Fragment";case Ve:return"Portal";case xe:return"Profiler";case Pe:return"StrictMode";case Ue:return"Suspense";case Fe:return"SuspenseList"}if(typeof u=="object")switch(u.$$typeof){case pe:return(u.displayName||"Context")+".Consumer";case nt:return(u._context.displayName||"Context")+".Provider";case _e:var g=u.render;return u=u.displayName,u||(u=g.displayName||g.name||"",u=u!==""?"ForwardRef("+u+")":"ForwardRef"),u;case pt:return g=u.displayName||null,g!==null?g:lt(u.type)||"Memo";case ht:g=u._payload,u=u._init;try{return lt(u(g))}catch{}}return null}function rt(u){var g=u.type;switch(u.tag){case 24:return"Cache";case 9:return(g.displayName||"Context")+".Consumer";case 10:return(g._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return u=g.render,u=u.displayName||u.name||"",g.displayName||(u!==""?"ForwardRef("+u+")":"ForwardRef");case 7:return"Fragment";case 5:return g;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return lt(g);case 8:return g===Pe?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof g=="function")return g.displayName||g.name||null;if(typeof g=="string")return g}return null}function vt(u){switch(typeof u){case"boolean":case"number":case"string":case"undefined":return u;case"object":return u;default:return""}}function St(u){var g=u.type;return(u=u.nodeName)&&u.toLowerCase()==="input"&&(g==="checkbox"||g==="radio")}function Lt(u){var g=St(u)?"checked":"value",C=Object.getOwnPropertyDescriptor(u.constructor.prototype,g),k=""+u[g];if(!u.hasOwnProperty(g)&&typeof C<"u"&&typeof C.get=="function"&&typeof C.set=="function"){var G=C.get,Y=C.set;return Object.defineProperty(u,g,{configurable:!0,get:function(){return G.call(this)},set:function(be){k=""+be,Y.call(this,be)}}),Object.defineProperty(u,g,{enumerable:C.enumerable}),{getValue:function(){return k},setValue:function(be){k=""+be},stopTracking:function(){u._valueTracker=null,delete u[g]}}}}function Wt(u){u._valueTracker||(u._valueTracker=Lt(u))}function ar(u){if(!u)return!1;var g=u._valueTracker;if(!g)return!0;var C=g.getValue(),k="";return u&&(k=St(u)?u.checked?"true":"false":u.value),u=k,u!==C?(g.setValue(u),!0):!1}function hr(u){if(u=u||(typeof document<"u"?document:void 0),typeof u>"u")return null;try{return u.activeElement||u.body}catch{return u.body}}function Cr(u,g){var C=g.checked;return xt({},g,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:C??u._wrapperState.initialChecked})}function He(u,g){var C=g.defaultValue==null?"":g.defaultValue,k=g.checked!=null?g.checked:g.defaultChecked;C=vt(g.value!=null?g.value:C),u._wrapperState={initialChecked:k,initialValue:C,controlled:g.type==="checkbox"||g.type==="radio"?g.checked!=null:g.value!=null}}function vr(u,g){g=g.checked,g!=null&&ce(u,"checked",g,!1)}function Ur(u,g){vr(u,g);var C=vt(g.value),k=g.type;if(C!=null)k==="number"?(C===0&&u.value===""||u.value!=C)&&(u.value=""+C):u.value!==""+C&&(u.value=""+C);else if(k==="submit"||k==="reset"){u.removeAttribute("value");return}g.hasOwnProperty("value")?lr(u,g.type,C):g.hasOwnProperty("defaultValue")&&lr(u,g.type,vt(g.defaultValue)),g.checked==null&&g.defaultChecked!=null&&(u.defaultChecked=!!g.defaultChecked)}function $r(u,g,C){if(g.hasOwnProperty("value")||g.hasOwnProperty("defaultValue")){var k=g.type;if(!(k!=="submit"&&k!=="reset"||g.value!==void 0&&g.value!==null))return;g=""+u._wrapperState.initialValue,C||g===u.value||(u.value=g),u.defaultValue=g}C=u.name,C!==""&&(u.name=""),u.defaultChecked=!!u._wrapperState.initialChecked,C!==""&&(u.name=C)}function lr(u,g,C){(g!=="number"||hr(u.ownerDocument)!==u)&&(C==null?u.defaultValue=""+u._wrapperState.initialValue:u.defaultValue!==""+C&&(u.defaultValue=""+C))}var Wr=Array.isArray;function Sr(u,g,C,k){if(u=u.options,g){g={};for(var G=0;G<C.length;G++)g["$"+C[G]]=!0;for(C=0;C<u.length;C++)G=g.hasOwnProperty("$"+u[C].value),u[C].selected!==G&&(u[C].selected=G),G&&k&&(u[C].defaultSelected=!0)}else{for(C=""+vt(C),g=null,G=0;G<u.length;G++){if(u[G].value===C){u[G].selected=!0,k&&(u[G].defaultSelected=!0);return}g!==null||u[G].disabled||(g=u[G])}g!==null&&(g.selected=!0)}}function Or(u,g){if(g.dangerouslySetInnerHTML!=null)throw Error(i(91));return xt({},g,{value:void 0,defaultValue:void 0,children:""+u._wrapperState.initialValue})}function Rr(u,g){var C=g.value;if(C==null){if(C=g.children,g=g.defaultValue,C!=null){if(g!=null)throw Error(i(92));if(Wr(C)){if(1<C.length)throw Error(i(93));C=C[0]}g=C}g==null&&(g=""),C=g}u._wrapperState={initialValue:vt(C)}}function On(u,g){var C=vt(g.value),k=vt(g.defaultValue);C!=null&&(C=""+C,C!==u.value&&(u.value=C),g.defaultValue==null&&u.defaultValue!==C&&(u.defaultValue=C)),k!=null&&(u.defaultValue=""+k)}function hn(u){var g=u.textContent;g===u._wrapperState.initialValue&&g!==""&&g!==null&&(u.value=g)}function ft(u){switch(u){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function de(u,g){return u==null||u==="http://www.w3.org/1999/xhtml"?ft(g):u==="http://www.w3.org/2000/svg"&&g==="foreignObject"?"http://www.w3.org/1999/xhtml":u}var fe,ye=(function(u){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(g,C,k,G){MSApp.execUnsafeLocalFunction(function(){return u(g,C,k,G)})}:u})(function(u,g){if(u.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in u)u.innerHTML=g;else{for(fe=fe||document.createElement("div"),fe.innerHTML="<svg>"+g.valueOf().toString()+"</svg>",g=fe.firstChild;u.firstChild;)u.removeChild(u.firstChild);for(;g.firstChild;)u.appendChild(g.firstChild)}});function qe(u,g){if(g){var C=u.firstChild;if(C&&C===u.lastChild&&C.nodeType===3){C.nodeValue=g;return}}u.textContent=g}var We={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Ct=["Webkit","ms","Moz","O"];Object.keys(We).forEach(function(u){Ct.forEach(function(g){g=g+u.charAt(0).toUpperCase()+u.substring(1),We[g]=We[u]})});function yt(u,g,C){return g==null||typeof g=="boolean"||g===""?"":C||typeof g!="number"||g===0||We.hasOwnProperty(u)&&We[u]?(""+g).trim():g+"px"}function at(u,g){u=u.style;for(var C in g)if(g.hasOwnProperty(C)){var k=C.indexOf("--")===0,G=yt(C,g[C],k);C==="float"&&(C="cssFloat"),k?u.setProperty(C,G):u[C]=G}}var bt=xt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ht(u,g){if(g){if(bt[u]&&(g.children!=null||g.dangerouslySetInnerHTML!=null))throw Error(i(137,u));if(g.dangerouslySetInnerHTML!=null){if(g.children!=null)throw Error(i(60));if(typeof g.dangerouslySetInnerHTML!="object"||!("__html"in g.dangerouslySetInnerHTML))throw Error(i(61))}if(g.style!=null&&typeof g.style!="object")throw Error(i(62))}}function Ft(u,g){if(u.indexOf("-")===-1)return typeof g.is=="string";switch(u){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var cr=null;function Jt(u){return u=u.target||u.srcElement||window,u.correspondingUseElement&&(u=u.correspondingUseElement),u.nodeType===3?u.parentNode:u}var fr=null,rn=null,Tr=null;function mt(u){if(u=Ra(u)){if(typeof fr!="function")throw Error(i(280));var g=u.stateNode;g&&(g=HA(g),fr(u.stateNode,u.type,g))}}function tn(u){rn?Tr?Tr.push(u):Tr=[u]:rn=u}function Nr(){if(rn){var u=rn,g=Tr;if(Tr=rn=null,mt(u),g)for(u=0;u<g.length;u++)mt(g[u])}}function mr(u,g){return u(g)}function Kr(){}var Dn=!1;function wr(u,g,C){if(Dn)return u(g,C);Dn=!0;try{return mr(u,g,C)}finally{Dn=!1,(rn!==null||Tr!==null)&&(Kr(),Nr())}}function Tn(u,g){var C=u.stateNode;if(C===null)return null;var k=HA(C);if(k===null)return null;C=k[g];e:switch(g){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(k=!k.disabled)||(u=u.type,k=!(u==="button"||u==="input"||u==="select"||u==="textarea")),u=!k;break e;default:u=!1}if(u)return null;if(C&&typeof C!="function")throw Error(i(231,g,typeof C));return C}var Bn=!1;if(o)try{var xn={};Object.defineProperty(xn,"passive",{get:function(){Bn=!0}}),window.addEventListener("test",xn,xn),window.removeEventListener("test",xn,xn)}catch{Bn=!1}function Di(u,g,C,k,G,Y,be,At,wt){var jt=Array.prototype.slice.call(arguments,3);try{g.apply(C,jt)}catch(dr){this.onError(dr)}}var ai=!1,Yt=null,Zn=!1,$i=null,sl={onError:function(u){ai=!0,Yt=u}};function ns(u,g,C,k,G,Y,be,At,wt){ai=!1,Yt=null,Di.apply(sl,arguments)}function pr(u,g,C,k,G,Y,be,At,wt){if(ns.apply(this,arguments),ai){if(ai){var jt=Yt;ai=!1,Yt=null}else throw Error(i(198));Zn||(Zn=!0,$i=jt)}}function nn(u){var g=u,C=u;if(u.alternate)for(;g.return;)g=g.return;else{u=g;do g=u,(g.flags&4098)!==0&&(C=g.return),u=g.return;while(u)}return g.tag===3?C:null}function un(u){if(u.tag===13){var g=u.memoizedState;if(g===null&&(u=u.alternate,u!==null&&(g=u.memoizedState)),g!==null)return g.dehydrated}return null}function Ri(u){if(nn(u)!==u)throw Error(i(188))}function El(u){var g=u.alternate;if(!g){if(g=nn(u),g===null)throw Error(i(188));return g!==u?null:u}for(var C=u,k=g;;){var G=C.return;if(G===null)break;var Y=G.alternate;if(Y===null){if(k=G.return,k!==null){C=k;continue}break}if(G.child===Y.child){for(Y=G.child;Y;){if(Y===C)return Ri(G),u;if(Y===k)return Ri(G),g;Y=Y.sibling}throw Error(i(188))}if(C.return!==k.return)C=G,k=Y;else{for(var be=!1,At=G.child;At;){if(At===C){be=!0,C=G,k=Y;break}if(At===k){be=!0,k=G,C=Y;break}At=At.sibling}if(!be){for(At=Y.child;At;){if(At===C){be=!0,C=Y,k=G;break}if(At===k){be=!0,k=Y,C=G;break}At=At.sibling}if(!be)throw Error(i(189))}}if(C.alternate!==k)throw Error(i(190))}if(C.tag!==3)throw Error(i(188));return C.stateNode.current===C?u:g}function ks(u){return u=El(u),u!==null?dn(u):null}function dn(u){if(u.tag===5||u.tag===6)return u;for(u=u.child;u!==null;){var g=dn(u);if(g!==null)return g;u=u.sibling}return null}var ol=n.unstable_scheduleCallback,al=n.unstable_cancelCallback,ec=n.unstable_shouldYield,Ec=n.unstable_requestPaint,fi=n.unstable_now,tc=n.unstable_getCurrentPriorityLevel,Sl=n.unstable_ImmediatePriority,Ci=n.unstable_UserBlockingPriority,jn=n.unstable_NormalPriority,rA=n.unstable_LowPriority,ll=n.unstable_IdlePriority,cl=null,Us=null;function Ro(u){if(Us&&typeof Us.onCommitFiberRoot=="function")try{Us.onCommitFiberRoot(cl,u,void 0,(u.current.flags&128)===128)}catch{}}var fs=Math.clz32?Math.clz32:Mn,Ba=Math.log,IA=Math.LN2;function Mn(u){return u>>>=0,u===0?32:31-(Ba(u)/IA|0)|0}var Sc=64,No=4194304;function Qo(u){switch(u&-u){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return u&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return u&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return u}}function Fc(u,g){var C=u.pendingLanes;if(C===0)return 0;var k=0,G=u.suspendedLanes,Y=u.pingedLanes,be=C&268435455;if(be!==0){var At=be&~G;At!==0?k=Qo(At):(Y&=be,Y!==0&&(k=Qo(Y)))}else be=C&~G,be!==0?k=Qo(be):Y!==0&&(k=Qo(Y));if(k===0)return 0;if(g!==0&&g!==k&&(g&G)===0&&(G=k&-k,Y=g&-g,G>=Y||G===16&&(Y&4194240)!==0))return g;if((k&4)!==0&&(k|=C&16),g=u.entangledLanes,g!==0)for(u=u.entanglements,g&=k;0<g;)C=31-fs(g),G=1<<C,k|=u[C],g&=~G;return k}function la(u,g){switch(u){case 1:case 2:case 4:return g+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return g+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ys(u,g){for(var C=u.suspendedLanes,k=u.pingedLanes,G=u.expirationTimes,Y=u.pendingLanes;0<Y;){var be=31-fs(Y),At=1<<be,wt=G[be];wt===-1?((At&C)===0||(At&k)!==0)&&(G[be]=la(At,g)):wt<=g&&(u.expiredLanes|=At),Y&=~At}}function Oo(u){return u=u.pendingLanes&-1073741825,u!==0?u:u&1073741824?1073741824:0}function nA(){var u=Sc;return Sc<<=1,(Sc&4194240)===0&&(Sc=64),u}function iA(u){for(var g=[],C=0;31>C;C++)g.push(u);return g}function rc(u,g,C){u.pendingLanes|=g,g!==536870912&&(u.suspendedLanes=0,u.pingedLanes=0),u=u.eventTimes,g=31-fs(g),u[g]=C}function Ca(u,g){var C=u.pendingLanes&~g;u.pendingLanes=g,u.suspendedLanes=0,u.pingedLanes=0,u.expiredLanes&=g,u.mutableReadLanes&=g,u.entangledLanes&=g,g=u.entanglements;var k=u.eventTimes;for(u=u.expirationTimes;0<C;){var G=31-fs(C),Y=1<<G;g[G]=0,k[G]=-1,u[G]=-1,C&=~Y}}function TA(u,g){var C=u.entangledLanes|=g;for(u=u.entanglements;C;){var k=31-fs(C),G=1<<k;G&g|u[k]&g&&(u[k]|=g),C&=~G}}var Kn=0;function Fl(u){return u&=-u,1<u?4<u?(u&268435455)!==0?16:536870912:4:1}var nc,Il,PA,Ic,ca,Al=!1,an=[],Ea=null,zo=null,Ho=null,vs=new Map,qr=new Map,Jn=[],cn="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function ii(u,g){switch(u){case"focusin":case"focusout":Ea=null;break;case"dragenter":case"dragleave":zo=null;break;case"mouseover":case"mouseout":Ho=null;break;case"pointerover":case"pointerout":vs.delete(g.pointerId);break;case"gotpointercapture":case"lostpointercapture":qr.delete(g.pointerId)}}function _s(u,g,C,k,G,Y){return u===null||u.nativeEvent!==Y?(u={blockedOn:g,domEventName:C,eventSystemFlags:k,nativeEvent:Y,targetContainers:[G]},g!==null&&(g=Ra(g),g!==null&&Il(g)),u):(u.eventSystemFlags|=k,g=u.targetContainers,G!==null&&g.indexOf(G)===-1&&g.push(G),u)}function Wi(u,g,C,k,G){switch(g){case"focusin":return Ea=_s(Ea,u,g,C,k,G),!0;case"dragenter":return zo=_s(zo,u,g,C,k,G),!0;case"mouseover":return Ho=_s(Ho,u,g,C,k,G),!0;case"pointerover":var Y=G.pointerId;return vs.set(Y,_s(vs.get(Y)||null,u,g,C,k,G)),!0;case"gotpointercapture":return Y=G.pointerId,qr.set(Y,_s(qr.get(Y)||null,u,g,C,k,G)),!0}return!1}function uo(u){var g=Da(u.target);if(g!==null){var C=nn(g);if(C!==null){if(g=C.tag,g===13){if(g=un(C),g!==null){u.blockedOn=g,ca(u.priority,function(){PA(C)});return}}else if(g===3&&C.stateNode.current.memoizedState.isDehydrated){u.blockedOn=C.tag===3?C.stateNode.containerInfo:null;return}}}u.blockedOn=null}function ws(u){if(u.blockedOn!==null)return!1;for(var g=u.targetContainers;0<g.length;){var C=sc(u.domEventName,u.eventSystemFlags,g[0],u.nativeEvent);if(C===null){C=u.nativeEvent;var k=new C.constructor(C.type,C);cr=k,C.target.dispatchEvent(k),cr=null}else return g=Ra(C),g!==null&&Il(g),u.blockedOn=C,!1;g.shift()}return!0}function Sa(u,g,C){ws(u)&&C.delete(g)}function Fa(){Al=!1,Ea!==null&&ws(Ea)&&(Ea=null),zo!==null&&ws(zo)&&(zo=null),Ho!==null&&ws(Ho)&&(Ho=null),vs.forEach(Sa),qr.forEach(Sa)}function ti(u,g){u.blockedOn===g&&(u.blockedOn=null,Al||(Al=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,Fa)))}function Aa(u){function g(G){return ti(G,u)}if(0<an.length){ti(an[0],u);for(var C=1;C<an.length;C++){var k=an[C];k.blockedOn===u&&(k.blockedOn=null)}}for(Ea!==null&&ti(Ea,u),zo!==null&&ti(zo,u),Ho!==null&&ti(Ho,u),vs.forEach(g),qr.forEach(g),C=0;C<Jn.length;C++)k=Jn[C],k.blockedOn===u&&(k.blockedOn=null);for(;0<Jn.length&&(C=Jn[0],C.blockedOn===null);)uo(C),C.blockedOn===null&&Jn.shift()}var Zi=he.ReactCurrentBatchConfig,ic=!0;function qs(u,g,C,k){var G=Kn,Y=Zi.transition;Zi.transition=null;try{Kn=1,jo(u,g,C,k)}finally{Kn=G,Zi.transition=Y}}function ul(u,g,C,k){var G=Kn,Y=Zi.transition;Zi.transition=null;try{Kn=4,jo(u,g,C,k)}finally{Kn=G,Zi.transition=Y}}function jo(u,g,C,k){if(ic){var G=sc(u,g,C,k);if(G===null)Qc(u,g,k,ua,C),ii(u,k);else if(Wi(G,u,g,C,k))k.stopPropagation();else if(ii(u,k),g&4&&-1<cn.indexOf(u)){for(;G!==null;){var Y=Ra(G);if(Y!==null&&nc(Y),Y=sc(u,g,C,k),Y===null&&Qc(u,g,k,ua,C),Y===G)break;G=Y}G!==null&&k.stopPropagation()}else Qc(u,g,k,null,C)}}var ua=null;function sc(u,g,C,k){if(ua=null,u=Jt(k),u=Da(u),u!==null)if(g=nn(u),g===null)u=null;else if(C=g.tag,C===13){if(u=un(g),u!==null)return u;u=null}else if(C===3){if(g.stateNode.current.memoizedState.isDehydrated)return g.tag===3?g.stateNode.containerInfo:null;u=null}else g!==u&&(u=null);return ua=u,null}function ha(u){switch(u){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(tc()){case Sl:return 1;case Ci:return 4;case jn:case rA:return 16;case ll:return 536870912;default:return 16}default:return 16}}var Nn=null,Vo=null,En=null;function mn(){if(En)return En;var u,g=Vo,C=g.length,k,G="value"in Nn?Nn.value:Nn.textContent,Y=G.length;for(u=0;u<C&&g[u]===G[u];u++);var be=C-u;for(k=1;k<=be&&g[C-k]===G[Y-k];k++);return En=G.slice(u,1<k?1-k:void 0)}function Ia(u){var g=u.keyCode;return"charCode"in u?(u=u.charCode,u===0&&g===13&&(u=13)):u=g,u===10&&(u=13),32<=u||u===13?u:0}function bn(){return!0}function Go(){return!1}function Ei(u){function g(C,k,G,Y,be){this._reactName=C,this._targetInst=G,this.type=k,this.nativeEvent=Y,this.target=be,this.currentTarget=null;for(var At in u)u.hasOwnProperty(At)&&(C=u[At],this[At]=C?C(Y):Y[At]);return this.isDefaultPrevented=(Y.defaultPrevented!=null?Y.defaultPrevented:Y.returnValue===!1)?bn:Go,this.isPropagationStopped=Go,this}return xt(g.prototype,{preventDefault:function(){this.defaultPrevented=!0;var C=this.nativeEvent;C&&(C.preventDefault?C.preventDefault():typeof C.returnValue!="unknown"&&(C.returnValue=!1),this.isDefaultPrevented=bn)},stopPropagation:function(){var C=this.nativeEvent;C&&(C.stopPropagation?C.stopPropagation():typeof C.cancelBubble!="unknown"&&(C.cancelBubble=!0),this.isPropagationStopped=bn)},persist:function(){},isPersistent:bn}),g}var ao={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(u){return u.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},da=Ei(ao),V=xt({},ao,{view:0,detail:0}),ge=Ei(V),et,gt,It,Gt=xt({},V,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ta,button:0,buttons:0,relatedTarget:function(u){return u.relatedTarget===void 0?u.fromElement===u.srcElement?u.toElement:u.fromElement:u.relatedTarget},movementX:function(u){return"movementX"in u?u.movementX:(u!==It&&(It&&u.type==="mousemove"?(et=u.screenX-It.screenX,gt=u.screenY-It.screenY):gt=et=0,It=u),et)},movementY:function(u){return"movementY"in u?u.movementY:gt}}),sr=Ei(Gt),br=xt({},Gt,{dataTransfer:0}),Vr=Ei(br),gn=xt({},V,{relatedTarget:0}),yn=Ei(gn),An=xt({},ao,{animationName:0,elapsedTime:0,pseudoElement:0}),ji=Ei(An),is=xt({},ao,{clipboardData:function(u){return"clipboardData"in u?u.clipboardData:window.clipboardData}}),Si=Ei(is),Ds=xt({},ao,{data:0}),Mi=Ei(Ds),xs={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Ko={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},fa={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function pa(u){var g=this.nativeEvent;return g.getModifierState?g.getModifierState(u):(u=fa[u])?!!g[u]:!1}function Ta(){return pa}var hl=xt({},V,{key:function(u){if(u.key){var g=xs[u.key]||u.key;if(g!=="Unidentified")return g}return u.type==="keypress"?(u=Ia(u),u===13?"Enter":String.fromCharCode(u)):u.type==="keydown"||u.type==="keyup"?Ko[u.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ta,charCode:function(u){return u.type==="keypress"?Ia(u):0},keyCode:function(u){return u.type==="keydown"||u.type==="keyup"?u.keyCode:0},which:function(u){return u.type==="keypress"?Ia(u):u.type==="keydown"||u.type==="keyup"?u.keyCode:0}}),Fi=Ei(hl),Tc=xt({},Gt,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ma=Ei(Tc),Pa=xt({},V,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ta}),Xi=Ei(Pa),sA=xt({},ao,{propertyName:0,elapsedTime:0,pseudoElement:0}),Tl=Ei(sA),ou=xt({},Gt,{deltaX:function(u){return"deltaX"in u?u.deltaX:"wheelDeltaX"in u?-u.wheelDeltaX:0},deltaY:function(u){return"deltaY"in u?u.deltaY:"wheelDeltaY"in u?-u.wheelDeltaY:"wheelDelta"in u?-u.wheelDelta:0},deltaZ:0,deltaMode:0}),Pl=Ei(ou),$s=[9,13,27,32],La=o&&"CompositionEvent"in window,dl=null;o&&"documentMode"in document&&(dl=document.documentMode);var LA=o&&"TextEvent"in window&&!dl,Bo=o&&(!La||dl&&8<dl&&11>=dl),Ll=" ",oA=!1;function aA(u,g){switch(u){case"keyup":return $s.indexOf(g.keyCode)!==-1;case"keydown":return g.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ml(u){return u=u.detail,typeof u=="object"&&"data"in u?u.data:null}var Ws=!1;function qo(u,g){switch(u){case"compositionend":return Ml(g);case"keypress":return g.which!==32?null:(oA=!0,Ll);case"textInput":return u=g.data,u===Ll&&oA?null:u;default:return null}}function Co(u,g){if(Ws)return u==="compositionend"||!La&&aA(u,g)?(u=mn(),En=Vo=Nn=null,Ws=!1,u):null;switch(u){case"paste":return null;case"keypress":if(!(g.ctrlKey||g.altKey||g.metaKey)||g.ctrlKey&&g.altKey){if(g.char&&1<g.char.length)return g.char;if(g.which)return String.fromCharCode(g.which)}return null;case"compositionend":return Bo&&g.locale!=="ko"?null:g.data;default:return null}}var ga={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function fl(u){var g=u&&u.nodeName&&u.nodeName.toLowerCase();return g==="input"?!!ga[u.type]:g==="textarea"}function Ma(u,g,C,k){tn(k),g=NA(g,"onChange"),0<g.length&&(C=new da("onChange","change",null,C,k),u.push({event:C,listeners:g}))}var oc=null,kl=null;function ss(u){lu(u,0)}function pl(u){var g=Na(u);if(ar(g))return u}function ml(u,g){if(u==="change")return g}var ya=!1;if(o){var Pc;if(o){var Ul="oninput"in document;if(!Ul){var ho=document.createElement("div");ho.setAttribute("oninput","return;"),Ul=typeof ho.oninput=="function"}Pc=Ul}else Pc=!1;ya=Pc&&(!document.documentMode||9<document.documentMode)}function ac(){oc&&(oc.detachEvent("onpropertychange",gl),kl=oc=null)}function gl(u){if(u.propertyName==="value"&&pl(kl)){var g=[];Ma(g,kl,u,Jt(u)),wr(ss,g)}}function Dl(u,g,C){u==="focusin"?(ac(),oc=g,kl=C,oc.attachEvent("onpropertychange",gl)):u==="focusout"&&ac()}function Rl(u){if(u==="selectionchange"||u==="keyup"||u==="keydown")return pl(kl)}function Nl(u,g){if(u==="click")return pl(g)}function $o(u,g){if(u==="input"||u==="change")return pl(g)}function lc(u,g){return u===g&&(u!==0||1/u===1/g)||u!==u&&g!==g}var os=typeof Object.is=="function"?Object.is:lc;function Eo(u,g){if(os(u,g))return!0;if(typeof u!="object"||u===null||typeof g!="object"||g===null)return!1;var C=Object.keys(u),k=Object.keys(g);if(C.length!==k.length)return!1;for(k=0;k<C.length;k++){var G=C[k];if(!x.call(g,G)||!os(u[G],g[G]))return!1}return!0}function si(u){for(;u&&u.firstChild;)u=u.firstChild;return u}function _i(u,g){var C=si(u);u=0;for(var k;C;){if(C.nodeType===3){if(k=u+C.textContent.length,u<=g&&k>=g)return{node:C,offset:g-u};u=k}e:{for(;C;){if(C.nextSibling){C=C.nextSibling;break e}C=C.parentNode}C=void 0}C=si(C)}}function Yi(u,g){return u&&g?u===g?!0:u&&u.nodeType===3?!1:g&&g.nodeType===3?Yi(u,g.parentNode):"contains"in u?u.contains(g):u.compareDocumentPosition?!!(u.compareDocumentPosition(g)&16):!1:!1}function bs(){for(var u=window,g=hr();g instanceof u.HTMLIFrameElement;){try{var C=typeof g.contentWindow.location.href=="string"}catch{C=!1}if(C)u=g.contentWindow;else break;g=hr(u.document)}return g}function Pn(u){var g=u&&u.nodeName&&u.nodeName.toLowerCase();return g&&(g==="input"&&(u.type==="text"||u.type==="search"||u.type==="tel"||u.type==="url"||u.type==="password")||g==="textarea"||u.contentEditable==="true")}function Lc(u){var g=bs(),C=u.focusedElem,k=u.selectionRange;if(g!==C&&C&&C.ownerDocument&&Yi(C.ownerDocument.documentElement,C)){if(k!==null&&Pn(C)){if(g=k.start,u=k.end,u===void 0&&(u=g),"selectionStart"in C)C.selectionStart=g,C.selectionEnd=Math.min(u,C.value.length);else if(u=(g=C.ownerDocument||document)&&g.defaultView||window,u.getSelection){u=u.getSelection();var G=C.textContent.length,Y=Math.min(k.start,G);k=k.end===void 0?Y:Math.min(k.end,G),!u.extend&&Y>k&&(G=k,k=Y,Y=G),G=_i(C,Y);var be=_i(C,k);G&&be&&(u.rangeCount!==1||u.anchorNode!==G.node||u.anchorOffset!==G.offset||u.focusNode!==be.node||u.focusOffset!==be.offset)&&(g=g.createRange(),g.setStart(G.node,G.offset),u.removeAllRanges(),Y>k?(u.addRange(g),u.extend(be.node,be.offset)):(g.setEnd(be.node,be.offset),u.addRange(g)))}}for(g=[],u=C;u=u.parentNode;)u.nodeType===1&&g.push({element:u,left:u.scrollLeft,top:u.scrollTop});for(typeof C.focus=="function"&&C.focus(),C=0;C<g.length;C++)u=g[C],u.element.scrollLeft=u.left,u.element.scrollTop=u.top}}var cc=o&&"documentMode"in document&&11>=document.documentMode,ka=null,MA=null,Ua=null,Mc=!1;function kc(u,g,C){var k=C.window===C?C.document:C.nodeType===9?C:C.ownerDocument;Mc||ka==null||ka!==hr(k)||(k=ka,"selectionStart"in k&&Pn(k)?k={start:k.selectionStart,end:k.selectionEnd}:(k=(k.ownerDocument&&k.ownerDocument.defaultView||window).getSelection(),k={anchorNode:k.anchorNode,anchorOffset:k.anchorOffset,focusNode:k.focusNode,focusOffset:k.focusOffset}),Ua&&Eo(Ua,k)||(Ua=k,k=NA(MA,"onSelect"),0<k.length&&(g=new da("onSelect","select",null,g,C),u.push({event:g,listeners:k}),g.target=ka)))}function fo(u,g){var C={};return C[u.toLowerCase()]=g.toLowerCase(),C["Webkit"+u]="webkit"+g,C["Moz"+u]="moz"+g,C}var Uc={animationend:fo("Animation","AnimationEnd"),animationiteration:fo("Animation","AnimationIteration"),animationstart:fo("Animation","AnimationStart"),transitionend:fo("Transition","TransitionEnd")},Dc={},au={};o&&(au=document.createElement("div").style,"AnimationEvent"in window||(delete Uc.animationend.animation,delete Uc.animationiteration.animation,delete Uc.animationstart.animation),"TransitionEvent"in window||delete Uc.transitionend.transition);function yl(u){if(Dc[u])return Dc[u];if(!Uc[u])return u;var g=Uc[u],C;for(C in g)if(g.hasOwnProperty(C)&&C in au)return Dc[u]=g[C];return u}var kA=yl("animationend"),UA=yl("animationiteration"),lA=yl("animationstart"),DA=yl("transitionend"),Uu=new Map,Rc="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function So(u,g){Uu.set(u,g),d(g,[u])}for(var cA=0;cA<Rc.length;cA++){var lo=Rc[cA],pn=lo.toLowerCase(),AA=lo[0].toUpperCase()+lo.slice(1);So(pn,"on"+AA)}So(kA,"onAnimationEnd"),So(UA,"onAnimationIteration"),So(lA,"onAnimationStart"),So("dblclick","onDoubleClick"),So("focusin","onFocus"),So("focusout","onBlur"),So(DA,"onTransitionEnd"),m("onMouseEnter",["mouseout","mouseover"]),m("onMouseLeave",["mouseout","mouseover"]),m("onPointerEnter",["pointerout","pointerover"]),m("onPointerLeave",["pointerout","pointerover"]),d("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),d("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),d("onBeforeInput",["compositionend","keypress","textInput","paste"]),d("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),d("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),d("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Nc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),ch=new Set("cancel close invalid load scroll toggle".split(" ").concat(Nc));function Ac(u,g,C){var k=u.type||"unknown-event";u.currentTarget=C,pr(k,g,void 0,u),u.currentTarget=null}function lu(u,g){g=(g&4)!==0;for(var C=0;C<u.length;C++){var k=u[C],G=k.event;k=k.listeners;e:{var Y=void 0;if(g)for(var be=k.length-1;0<=be;be--){var At=k[be],wt=At.instance,jt=At.currentTarget;if(At=At.listener,wt!==Y&&G.isPropagationStopped())break e;Ac(G,At,jt),Y=wt}else for(be=0;be<k.length;be++){if(At=k[be],wt=At.instance,jt=At.currentTarget,At=At.listener,wt!==Y&&G.isPropagationStopped())break e;Ac(G,At,jt),Y=wt}}}if(Zn)throw u=$i,Zn=!1,$i=null,u}function Ii(u,g){var C=g[Zs];C===void 0&&(C=g[Zs]=new Set);var k=u+"__bubble";C.has(k)||(Ql(g,u,2,!1),C.add(k))}function cu(u,g,C){var k=0;g&&(k|=4),Ql(C,u,k,g)}var RA="_reactListening"+Math.random().toString(36).slice(2);function uc(u){if(!u[RA]){u[RA]=!0,l.forEach(function(C){C!=="selectionchange"&&(ch.has(C)||cu(C,!1,u),cu(C,!0,u))});var g=u.nodeType===9?u:u.ownerDocument;g===null||g[RA]||(g[RA]=!0,cu("selectionchange",!1,g))}}function Ql(u,g,C,k){switch(ha(g)){case 1:var G=qs;break;case 4:G=ul;break;default:G=jo}C=G.bind(null,g,C,u),G=void 0,!Bn||g!=="touchstart"&&g!=="touchmove"&&g!=="wheel"||(G=!0),k?G!==void 0?u.addEventListener(g,C,{capture:!0,passive:G}):u.addEventListener(g,C,!0):G!==void 0?u.addEventListener(g,C,{passive:G}):u.addEventListener(g,C,!1)}function Qc(u,g,C,k,G){var Y=k;if((g&1)===0&&(g&2)===0&&k!==null)e:for(;;){if(k===null)return;var be=k.tag;if(be===3||be===4){var At=k.stateNode.containerInfo;if(At===G||At.nodeType===8&&At.parentNode===G)break;if(be===4)for(be=k.return;be!==null;){var wt=be.tag;if((wt===3||wt===4)&&(wt=be.stateNode.containerInfo,wt===G||wt.nodeType===8&&wt.parentNode===G))return;be=be.return}for(;At!==null;){if(be=Da(At),be===null)return;if(wt=be.tag,wt===5||wt===6){k=Y=be;continue e}At=At.parentNode}}k=k.return}wr(function(){var jt=Y,dr=Jt(C),yr=[];e:{var ur=Uu.get(u);if(ur!==void 0){var Qr=da,en=u;switch(u){case"keypress":if(Ia(C)===0)break e;case"keydown":case"keyup":Qr=Fi;break;case"focusin":en="focus",Qr=yn;break;case"focusout":en="blur",Qr=yn;break;case"beforeblur":case"afterblur":Qr=yn;break;case"click":if(C.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Qr=sr;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Qr=Vr;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Qr=Xi;break;case kA:case UA:case lA:Qr=ji;break;case DA:Qr=Tl;break;case"scroll":Qr=ge;break;case"wheel":Qr=Pl;break;case"copy":case"cut":case"paste":Qr=Si;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Qr=ma}var Gr=(g&4)!==0,Ps=!Gr&&u==="scroll",Nt=Gr?ur!==null?ur+"Capture":null:ur;Gr=[];for(var Et=jt,zt;Et!==null;){zt=Et;var Br=zt.stateNode;if(zt.tag===5&&Br!==null&&(zt=Br,Nt!==null&&(Br=Tn(Et,Nt),Br!=null&&Gr.push(Oc(Et,Br,zt)))),Ps)break;Et=Et.return}0<Gr.length&&(ur=new Qr(ur,en,null,C,dr),yr.push({event:ur,listeners:Gr}))}}if((g&7)===0){e:{if(ur=u==="mouseover"||u==="pointerover",Qr=u==="mouseout"||u==="pointerout",ur&&C!==cr&&(en=C.relatedTarget||C.fromElement)&&(Da(en)||en[Rs]))break e;if((Qr||ur)&&(ur=dr.window===dr?dr:(ur=dr.ownerDocument)?ur.defaultView||ur.parentWindow:window,Qr?(en=C.relatedTarget||C.toElement,Qr=jt,en=en?Da(en):null,en!==null&&(Ps=nn(en),en!==Ps||en.tag!==5&&en.tag!==6)&&(en=null)):(Qr=null,en=jt),Qr!==en)){if(Gr=sr,Br="onMouseLeave",Nt="onMouseEnter",Et="mouse",(u==="pointerout"||u==="pointerover")&&(Gr=ma,Br="onPointerLeave",Nt="onPointerEnter",Et="pointer"),Ps=Qr==null?ur:Na(Qr),zt=en==null?ur:Na(en),ur=new Gr(Br,Et+"leave",Qr,C,dr),ur.target=Ps,ur.relatedTarget=zt,Br=null,Da(dr)===jt&&(Gr=new Gr(Nt,Et+"enter",en,C,dr),Gr.target=zt,Gr.relatedTarget=Ps,Br=Gr),Ps=Br,Qr&&en)t:{for(Gr=Qr,Nt=en,Et=0,zt=Gr;zt;zt=hc(zt))Et++;for(zt=0,Br=Nt;Br;Br=hc(Br))zt++;for(;0<Et-zt;)Gr=hc(Gr),Et--;for(;0<zt-Et;)Nt=hc(Nt),zt--;for(;Et--;){if(Gr===Nt||Nt!==null&&Gr===Nt.alternate)break t;Gr=hc(Gr),Nt=hc(Nt)}Gr=null}else Gr=null;Qr!==null&&Au(yr,ur,Qr,Gr,!1),en!==null&&Ps!==null&&Au(yr,Ps,en,Gr,!0)}}e:{if(ur=jt?Na(jt):window,Qr=ur.nodeName&&ur.nodeName.toLowerCase(),Qr==="select"||Qr==="input"&&ur.type==="file")var ln=ml;else if(fl(ur))if(ya)ln=$o;else{ln=Rl;var _n=Dl}else(Qr=ur.nodeName)&&Qr.toLowerCase()==="input"&&(ur.type==="checkbox"||ur.type==="radio")&&(ln=Nl);if(ln&&(ln=ln(u,jt))){Ma(yr,ln,C,dr);break e}_n&&_n(u,ur,jt),u==="focusout"&&(_n=ur._wrapperState)&&_n.controlled&&ur.type==="number"&&lr(ur,"number",ur.value)}switch(_n=jt?Na(jt):window,u){case"focusin":(fl(_n)||_n.contentEditable==="true")&&(ka=_n,MA=jt,Ua=null);break;case"focusout":Ua=MA=ka=null;break;case"mousedown":Mc=!0;break;case"contextmenu":case"mouseup":case"dragend":Mc=!1,kc(yr,C,dr);break;case"selectionchange":if(cc)break;case"keydown":case"keyup":kc(yr,C,dr)}var wn;if(La)e:{switch(u){case"compositionstart":var Ln="onCompositionStart";break e;case"compositionend":Ln="onCompositionEnd";break e;case"compositionupdate":Ln="onCompositionUpdate";break e}Ln=void 0}else Ws?aA(u,C)&&(Ln="onCompositionEnd"):u==="keydown"&&C.keyCode===229&&(Ln="onCompositionStart");Ln&&(Bo&&C.locale!=="ko"&&(Ws||Ln!=="onCompositionStart"?Ln==="onCompositionEnd"&&Ws&&(wn=mn()):(Nn=dr,Vo="value"in Nn?Nn.value:Nn.textContent,Ws=!0)),_n=NA(jt,Ln),0<_n.length&&(Ln=new Mi(Ln,u,null,C,dr),yr.push({event:Ln,listeners:_n}),wn?Ln.data=wn:(wn=Ml(C),wn!==null&&(Ln.data=wn)))),(wn=LA?qo(u,C):Co(u,C))&&(jt=NA(jt,"onBeforeInput"),0<jt.length&&(dr=new Mi("onBeforeInput","beforeinput",null,C,dr),yr.push({event:dr,listeners:jt}),dr.data=wn))}lu(yr,g)})}function Oc(u,g,C){return{instance:u,listener:g,currentTarget:C}}function NA(u,g){for(var C=g+"Capture",k=[];u!==null;){var G=u,Y=G.stateNode;G.tag===5&&Y!==null&&(G=Y,Y=Tn(u,C),Y!=null&&k.unshift(Oc(u,Y,G)),Y=Tn(u,g),Y!=null&&k.push(Oc(u,Y,G))),u=u.return}return k}function hc(u){if(u===null)return null;do u=u.return;while(u&&u.tag!==5);return u||null}function Au(u,g,C,k,G){for(var Y=g._reactName,be=[];C!==null&&C!==k;){var At=C,wt=At.alternate,jt=At.stateNode;if(wt!==null&&wt===k)break;At.tag===5&&jt!==null&&(At=jt,G?(wt=Tn(C,Y),wt!=null&&be.unshift(Oc(C,wt,At))):G||(wt=Tn(C,Y),wt!=null&&be.push(Oc(C,wt,At)))),C=C.return}be.length!==0&&u.push({event:g,listeners:be})}var Du=/\r\n?/g,uA=/\u0000|\uFFFD/g;function zc(u){return(typeof u=="string"?u:""+u).replace(Du,`
`).replace(uA,"")}function QA(u,g,C){if(g=zc(g),zc(u)!==g&&C)throw Error(i(425))}function OA(){}var dc=null,hA=null;function Ru(u,g){return u==="textarea"||u==="noscript"||typeof g.children=="string"||typeof g.children=="number"||typeof g.dangerouslySetInnerHTML=="object"&&g.dangerouslySetInnerHTML!==null&&g.dangerouslySetInnerHTML.__html!=null}var dA=typeof setTimeout=="function"?setTimeout:void 0,uu=typeof clearTimeout=="function"?clearTimeout:void 0,Ah=typeof Promise=="function"?Promise:void 0,jh=typeof queueMicrotask=="function"?queueMicrotask:typeof Ah<"u"?function(u){return Ah.resolve(null).then(u).catch(hu)}:dA;function hu(u){setTimeout(function(){throw u})}function zA(u,g){var C=g,k=0;do{var G=C.nextSibling;if(u.removeChild(C),G&&G.nodeType===8)if(C=G.data,C==="/$"){if(k===0){u.removeChild(G),Aa(g);return}k--}else C!=="$"&&C!=="$?"&&C!=="$!"||k++;C=G}while(C);Aa(g)}function po(u){for(;u!=null;u=u.nextSibling){var g=u.nodeType;if(g===1||g===3)break;if(g===8){if(g=u.data,g==="$"||g==="$!"||g==="$?")break;if(g==="/$")return null}}return u}function va(u){u=u.previousSibling;for(var g=0;u;){if(u.nodeType===8){var C=u.data;if(C==="$"||C==="$!"||C==="$?"){if(g===0)return u;g--}else C==="/$"&&g++}u=u.previousSibling}return null}var $n=Math.random().toString(36).slice(2),mo="__reactFiber$"+$n,co="__reactProps$"+$n,Rs="__reactContainer$"+$n,Zs="__reactEvents$"+$n,Nu="__reactListeners$"+$n,Hc="__reactHandles$"+$n;function Da(u){var g=u[mo];if(g)return g;for(var C=u.parentNode;C;){if(g=C[Rs]||C[mo]){if(C=g.alternate,g.child!==null||C!==null&&C.child!==null)for(u=va(u);u!==null;){if(C=u[mo])return C;u=va(u)}return g}u=C,C=u.parentNode}return null}function Ra(u){return u=u[mo]||u[Rs],!u||u.tag!==5&&u.tag!==6&&u.tag!==13&&u.tag!==3?null:u}function Na(u){if(u.tag===5||u.tag===6)return u.stateNode;throw Error(i(33))}function HA(u){return u[co]||null}var Qu=[],Ol=-1;function Qa(u){return{current:u}}function li(u){0>Ol||(u.current=Qu[Ol],Qu[Ol]=null,Ol--)}function Xn(u,g){Ol++,Qu[Ol]=u.current,u.current=g}var zl={},Ns=Qa(zl),Xs=Qa(!1),jc=zl;function Vc(u,g){var C=u.type.contextTypes;if(!C)return zl;var k=u.stateNode;if(k&&k.__reactInternalMemoizedUnmaskedChildContext===g)return k.__reactInternalMemoizedMaskedChildContext;var G={},Y;for(Y in C)G[Y]=g[Y];return k&&(u=u.stateNode,u.__reactInternalMemoizedUnmaskedChildContext=g,u.__reactInternalMemoizedMaskedChildContext=G),G}function go(u){return u=u.childContextTypes,u!=null}function du(){li(Xs),li(Ns)}function Ou(u,g,C){if(Ns.current!==zl)throw Error(i(168));Xn(Ns,g),Xn(Xs,C)}function fA(u,g,C){var k=u.stateNode;if(g=g.childContextTypes,typeof k.getChildContext!="function")return C;k=k.getChildContext();for(var G in k)if(!(G in g))throw Error(i(108,rt(u)||"Unknown",G));return xt({},C,k)}function Oa(u){return u=(u=u.stateNode)&&u.__reactInternalMemoizedMergedChildContext||zl,jc=Ns.current,Xn(Ns,u),Xn(Xs,Xs.current),!0}function _a(u,g,C){var k=u.stateNode;if(!k)throw Error(i(169));C?(u=fA(u,g,jc),k.__reactInternalMemoizedMergedChildContext=u,li(Xs),li(Ns),Xn(Ns,u)):li(Xs),Xn(Xs,C)}var Qs=null,jA=!1,T=!1;function R(u){Qs===null?Qs=[u]:Qs.push(u)}function $(u){jA=!0,R(u)}function te(){if(!T&&Qs!==null){T=!0;var u=0,g=Kn;try{var C=Qs;for(Kn=1;u<C.length;u++){var k=C[u];do k=k(!0);while(k!==null)}Qs=null,jA=!1}catch(G){throw Qs!==null&&(Qs=Qs.slice(u+1)),ol(Sl,te),G}finally{Kn=g,T=!1}}return null}var me=[],we=0,Ce=null,Te=0,De=[],Ke=0,$e=null,kt=1,Xe="";function Bt(u,g){me[we++]=Te,me[we++]=Ce,Ce=u,Te=g}function Tt(u,g,C){De[Ke++]=kt,De[Ke++]=Xe,De[Ke++]=$e,$e=u;var k=kt;u=Xe;var G=32-fs(k)-1;k&=~(1<<G),C+=1;var Y=32-fs(g)+G;if(30<Y){var be=G-G%5;Y=(k&(1<<be)-1).toString(32),k>>=be,G-=be,kt=1<<32-fs(g)+G|C<<G|k,Xe=Y+u}else kt=1<<Y|C<<G|k,Xe=u}function Zt(u){u.return!==null&&(Bt(u,1),Tt(u,1,0))}function Ut(u){for(;u===Ce;)Ce=me[--we],me[we]=null,Te=me[--we],me[we]=null;for(;u===$e;)$e=De[--Ke],De[Ke]=null,Xe=De[--Ke],De[Ke]=null,kt=De[--Ke],De[Ke]=null}var Kt=null,$t=null,tr=!1,er=null;function sn(u,g){var C=_c(5,null,null,0);C.elementType="DELETED",C.stateNode=g,C.return=u,g=u.deletions,g===null?(u.deletions=[C],u.flags|=16):g.push(C)}function zr(u,g){switch(u.tag){case 5:var C=u.type;return g=g.nodeType!==1||C.toLowerCase()!==g.nodeName.toLowerCase()?null:g,g!==null?(u.stateNode=g,Kt=u,$t=po(g.firstChild),!0):!1;case 6:return g=u.pendingProps===""||g.nodeType!==3?null:g,g!==null?(u.stateNode=g,Kt=u,$t=null,!0):!1;case 13:return g=g.nodeType!==8?null:g,g!==null?(C=$e!==null?{id:kt,overflow:Xe}:null,u.memoizedState={dehydrated:g,treeContext:C,retryLane:1073741824},C=_c(18,null,null,0),C.stateNode=g,C.return=u,u.child=C,Kt=u,$t=null,!0):!1;default:return!1}}function Cn(u){return(u.mode&1)!==0&&(u.flags&128)===0}function Zr(u){if(tr){var g=$t;if(g){var C=g;if(!zr(u,g)){if(Cn(u))throw Error(i(418));g=po(C.nextSibling);var k=Kt;g&&zr(u,g)?sn(k,C):(u.flags=u.flags&-4097|2,tr=!1,Kt=u)}}else{if(Cn(u))throw Error(i(418));u.flags=u.flags&-4097|2,tr=!1,Kt=u}}}function Qn(u){for(u=u.return;u!==null&&u.tag!==5&&u.tag!==3&&u.tag!==13;)u=u.return;Kt=u}function Ni(u){if(u!==Kt)return!1;if(!tr)return Qn(u),tr=!0,!1;var g;if((g=u.tag!==3)&&!(g=u.tag!==5)&&(g=u.type,g=g!=="head"&&g!=="body"&&!Ru(u.type,u.memoizedProps)),g&&(g=$t)){if(Cn(u))throw Sn(),Error(i(418));for(;g;)sn(u,g),g=po(g.nextSibling)}if(Qn(u),u.tag===13){if(u=u.memoizedState,u=u!==null?u.dehydrated:null,!u)throw Error(i(317));e:{for(u=u.nextSibling,g=0;u;){if(u.nodeType===8){var C=u.data;if(C==="/$"){if(g===0){$t=po(u.nextSibling);break e}g--}else C!=="$"&&C!=="$!"&&C!=="$?"||g++}u=u.nextSibling}$t=null}}else $t=Kt?po(u.stateNode.nextSibling):null;return!0}function Sn(){for(var u=$t;u;)u=po(u.nextSibling)}function Hr(){$t=Kt=null,tr=!1}function Fr(u){er===null?er=[u]:er.push(u)}var pi=he.ReactCurrentBatchConfig;function Mr(u,g,C){if(u=C.ref,u!==null&&typeof u!="function"&&typeof u!="object"){if(C._owner){if(C=C._owner,C){if(C.tag!==1)throw Error(i(309));var k=C.stateNode}if(!k)throw Error(i(147,u));var G=k,Y=""+u;return g!==null&&g.ref!==null&&typeof g.ref=="function"&&g.ref._stringRef===Y?g.ref:(g=function(be){var At=G.refs;be===null?delete At[Y]:At[Y]=be},g._stringRef=Y,g)}if(typeof u!="string")throw Error(i(284));if(!C._owner)throw Error(i(290,u))}return u}function zn(u,g){throw u=Object.prototype.toString.call(g),Error(i(31,u==="[object Object]"?"object with keys {"+Object.keys(g).join(", ")+"}":u))}function mi(u){var g=u._init;return g(u._payload)}function as(u){function g(Nt,Et){if(u){var zt=Nt.deletions;zt===null?(Nt.deletions=[Et],Nt.flags|=16):zt.push(Et)}}function C(Nt,Et){if(!u)return null;for(;Et!==null;)g(Nt,Et),Et=Et.sibling;return null}function k(Nt,Et){for(Nt=new Map;Et!==null;)Et.key!==null?Nt.set(Et.key,Et):Nt.set(Et.index,Et),Et=Et.sibling;return Nt}function G(Nt,Et){return Nt=yu(Nt,Et),Nt.index=0,Nt.sibling=null,Nt}function Y(Nt,Et,zt){return Nt.index=zt,u?(zt=Nt.alternate,zt!==null?(zt=zt.index,zt<Et?(Nt.flags|=2,Et):zt):(Nt.flags|=2,Et)):(Nt.flags|=1048576,Et)}function be(Nt){return u&&Nt.alternate===null&&(Nt.flags|=2),Nt}function At(Nt,Et,zt,Br){return Et===null||Et.tag!==6?(Et=Vp(zt,Nt.mode,Br),Et.return=Nt,Et):(Et=G(Et,zt),Et.return=Nt,Et)}function wt(Nt,Et,zt,Br){var ln=zt.type;return ln===Me?dr(Nt,Et,zt.props.children,Br,zt.key):Et!==null&&(Et.elementType===ln||typeof ln=="object"&&ln!==null&&ln.$$typeof===ht&&mi(ln)===Et.type)?(Br=G(Et,zt.props),Br.ref=Mr(Nt,Et,zt),Br.return=Nt,Br):(Br=Nd(zt.type,zt.key,zt.props,null,Nt.mode,Br),Br.ref=Mr(Nt,Et,zt),Br.return=Nt,Br)}function jt(Nt,Et,zt,Br){return Et===null||Et.tag!==4||Et.stateNode.containerInfo!==zt.containerInfo||Et.stateNode.implementation!==zt.implementation?(Et=Bf(zt,Nt.mode,Br),Et.return=Nt,Et):(Et=G(Et,zt.children||[]),Et.return=Nt,Et)}function dr(Nt,Et,zt,Br,ln){return Et===null||Et.tag!==7?(Et=Eh(zt,Nt.mode,Br,ln),Et.return=Nt,Et):(Et=G(Et,zt),Et.return=Nt,Et)}function yr(Nt,Et,zt){if(typeof Et=="string"&&Et!==""||typeof Et=="number")return Et=Vp(""+Et,Nt.mode,zt),Et.return=Nt,Et;if(typeof Et=="object"&&Et!==null){switch(Et.$$typeof){case Ie:return zt=Nd(Et.type,Et.key,Et.props,null,Nt.mode,zt),zt.ref=Mr(Nt,null,Et),zt.return=Nt,zt;case Ve:return Et=Bf(Et,Nt.mode,zt),Et.return=Nt,Et;case ht:var Br=Et._init;return yr(Nt,Br(Et._payload),zt)}if(Wr(Et)||je(Et))return Et=Eh(Et,Nt.mode,zt,null),Et.return=Nt,Et;zn(Nt,Et)}return null}function ur(Nt,Et,zt,Br){var ln=Et!==null?Et.key:null;if(typeof zt=="string"&&zt!==""||typeof zt=="number")return ln!==null?null:At(Nt,Et,""+zt,Br);if(typeof zt=="object"&&zt!==null){switch(zt.$$typeof){case Ie:return zt.key===ln?wt(Nt,Et,zt,Br):null;case Ve:return zt.key===ln?jt(Nt,Et,zt,Br):null;case ht:return ln=zt._init,ur(Nt,Et,ln(zt._payload),Br)}if(Wr(zt)||je(zt))return ln!==null?null:dr(Nt,Et,zt,Br,null);zn(Nt,zt)}return null}function Qr(Nt,Et,zt,Br,ln){if(typeof Br=="string"&&Br!==""||typeof Br=="number")return Nt=Nt.get(zt)||null,At(Et,Nt,""+Br,ln);if(typeof Br=="object"&&Br!==null){switch(Br.$$typeof){case Ie:return Nt=Nt.get(Br.key===null?zt:Br.key)||null,wt(Et,Nt,Br,ln);case Ve:return Nt=Nt.get(Br.key===null?zt:Br.key)||null,jt(Et,Nt,Br,ln);case ht:var _n=Br._init;return Qr(Nt,Et,zt,_n(Br._payload),ln)}if(Wr(Br)||je(Br))return Nt=Nt.get(zt)||null,dr(Et,Nt,Br,ln,null);zn(Et,Br)}return null}function en(Nt,Et,zt,Br){for(var ln=null,_n=null,wn=Et,Ln=Et=0,Po=null;wn!==null&&Ln<zt.length;Ln++){wn.index>Ln?(Po=wn,wn=null):Po=wn.sibling;var vi=ur(Nt,wn,zt[Ln],Br);if(vi===null){wn===null&&(wn=Po);break}u&&wn&&vi.alternate===null&&g(Nt,wn),Et=Y(vi,Et,Ln),_n===null?ln=vi:_n.sibling=vi,_n=vi,wn=Po}if(Ln===zt.length)return C(Nt,wn),tr&&Bt(Nt,Ln),ln;if(wn===null){for(;Ln<zt.length;Ln++)wn=yr(Nt,zt[Ln],Br),wn!==null&&(Et=Y(wn,Et,Ln),_n===null?ln=wn:_n.sibling=wn,_n=wn);return tr&&Bt(Nt,Ln),ln}for(wn=k(Nt,wn);Ln<zt.length;Ln++)Po=Qr(wn,Nt,Ln,zt[Ln],Br),Po!==null&&(u&&Po.alternate!==null&&wn.delete(Po.key===null?Ln:Po.key),Et=Y(Po,Et,Ln),_n===null?ln=Po:_n.sibling=Po,_n=Po);return u&&wn.forEach(function(Za){return g(Nt,Za)}),tr&&Bt(Nt,Ln),ln}function Gr(Nt,Et,zt,Br){var ln=je(zt);if(typeof ln!="function")throw Error(i(150));if(zt=ln.call(zt),zt==null)throw Error(i(151));for(var _n=ln=null,wn=Et,Ln=Et=0,Po=null,vi=zt.next();wn!==null&&!vi.done;Ln++,vi=zt.next()){wn.index>Ln?(Po=wn,wn=null):Po=wn.sibling;var Za=ur(Nt,wn,vi.value,Br);if(Za===null){wn===null&&(wn=Po);break}u&&wn&&Za.alternate===null&&g(Nt,wn),Et=Y(Za,Et,Ln),_n===null?ln=Za:_n.sibling=Za,_n=Za,wn=Po}if(vi.done)return C(Nt,wn),tr&&Bt(Nt,Ln),ln;if(wn===null){for(;!vi.done;Ln++,vi=zt.next())vi=yr(Nt,vi.value,Br),vi!==null&&(Et=Y(vi,Et,Ln),_n===null?ln=vi:_n.sibling=vi,_n=vi);return tr&&Bt(Nt,Ln),ln}for(wn=k(Nt,wn);!vi.done;Ln++,vi=zt.next())vi=Qr(wn,Nt,Ln,vi.value,Br),vi!==null&&(u&&vi.alternate!==null&&wn.delete(vi.key===null?Ln:vi.key),Et=Y(vi,Et,Ln),_n===null?ln=vi:_n.sibling=vi,_n=vi);return u&&wn.forEach(function($u){return g(Nt,$u)}),tr&&Bt(Nt,Ln),ln}function Ps(Nt,Et,zt,Br){if(typeof zt=="object"&&zt!==null&&zt.type===Me&&zt.key===null&&(zt=zt.props.children),typeof zt=="object"&&zt!==null){switch(zt.$$typeof){case Ie:e:{for(var ln=zt.key,_n=Et;_n!==null;){if(_n.key===ln){if(ln=zt.type,ln===Me){if(_n.tag===7){C(Nt,_n.sibling),Et=G(_n,zt.props.children),Et.return=Nt,Nt=Et;break e}}else if(_n.elementType===ln||typeof ln=="object"&&ln!==null&&ln.$$typeof===ht&&mi(ln)===_n.type){C(Nt,_n.sibling),Et=G(_n,zt.props),Et.ref=Mr(Nt,_n,zt),Et.return=Nt,Nt=Et;break e}C(Nt,_n);break}else g(Nt,_n);_n=_n.sibling}zt.type===Me?(Et=Eh(zt.props.children,Nt.mode,Br,zt.key),Et.return=Nt,Nt=Et):(Br=Nd(zt.type,zt.key,zt.props,null,Nt.mode,Br),Br.ref=Mr(Nt,Et,zt),Br.return=Nt,Nt=Br)}return be(Nt);case Ve:e:{for(_n=zt.key;Et!==null;){if(Et.key===_n)if(Et.tag===4&&Et.stateNode.containerInfo===zt.containerInfo&&Et.stateNode.implementation===zt.implementation){C(Nt,Et.sibling),Et=G(Et,zt.children||[]),Et.return=Nt,Nt=Et;break e}else{C(Nt,Et);break}else g(Nt,Et);Et=Et.sibling}Et=Bf(zt,Nt.mode,Br),Et.return=Nt,Nt=Et}return be(Nt);case ht:return _n=zt._init,Ps(Nt,Et,_n(zt._payload),Br)}if(Wr(zt))return en(Nt,Et,zt,Br);if(je(zt))return Gr(Nt,Et,zt,Br);zn(Nt,zt)}return typeof zt=="string"&&zt!==""||typeof zt=="number"?(zt=""+zt,Et!==null&&Et.tag===6?(C(Nt,Et.sibling),Et=G(Et,zt),Et.return=Nt,Nt=Et):(C(Nt,Et),Et=Vp(zt,Nt.mode,Br),Et.return=Nt,Nt=Et),be(Nt)):C(Nt,Et)}return Ps}var ls=as(!0),Qi=as(!1),Bs=Qa(null),Cs=null,Oi=null,Fn=null;function Yn(){Fn=Oi=Cs=null}function gr(u){var g=Bs.current;li(Bs),u._currentValue=g}function xr(u,g,C){for(;u!==null;){var k=u.alternate;if((u.childLanes&g)!==g?(u.childLanes|=g,k!==null&&(k.childLanes|=g)):k!==null&&(k.childLanes&g)!==g&&(k.childLanes|=g),u===C)break;u=u.return}}function Ti(u,g){Cs=u,Fn=Oi=null,u=u.dependencies,u!==null&&u.firstContext!==null&&((u.lanes&g)!==0&&(qa=!0),u.firstContext=null)}function Vi(u){var g=u._currentValue;if(Fn!==u)if(u={context:u,memoizedValue:g,next:null},Oi===null){if(Cs===null)throw Error(i(308));Oi=u,Cs.dependencies={lanes:0,firstContext:u}}else Oi=Oi.next=u;return g}var ei=null;function ci(u){ei===null?ei=[u]:ei.push(u)}function Rn(u,g,C,k){var G=g.interleaved;return G===null?(C.next=C,ci(g)):(C.next=G.next,G.next=C),g.interleaved=C,wi(u,k)}function wi(u,g){u.lanes|=g;var C=u.alternate;for(C!==null&&(C.lanes|=g),C=u,u=u.return;u!==null;)u.childLanes|=g,C=u.alternate,C!==null&&(C.childLanes|=g),C=u,u=u.return;return C.tag===3?C.stateNode:null}var Es=!1;function Ys(u){u.updateQueue={baseState:u.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Fo(u,g){u=u.updateQueue,g.updateQueue===u&&(g.updateQueue={baseState:u.baseState,firstBaseUpdate:u.firstBaseUpdate,lastBaseUpdate:u.lastBaseUpdate,shared:u.shared,effects:u.effects})}function ki(u,g){return{eventTime:u,lane:g,tag:0,payload:null,callback:null,next:null}}function In(u,g,C){var k=u.updateQueue;if(k===null)return null;if(k=k.shared,(yi&2)!==0){var G=k.pending;return G===null?g.next=g:(g.next=G.next,G.next=g),k.pending=g,wi(u,C)}return G=k.interleaved,G===null?(g.next=g,ci(k)):(g.next=G.next,G.next=g),k.interleaved=g,wi(u,C)}function Vn(u,g,C){if(g=g.updateQueue,g!==null&&(g=g.shared,(C&4194240)!==0)){var k=g.lanes;k&=u.pendingLanes,C|=k,g.lanes=C,TA(u,C)}}function xi(u,g){var C=u.updateQueue,k=u.alternate;if(k!==null&&(k=k.updateQueue,C===k)){var G=null,Y=null;if(C=C.firstBaseUpdate,C!==null){do{var be={eventTime:C.eventTime,lane:C.lane,tag:C.tag,payload:C.payload,callback:C.callback,next:null};Y===null?G=Y=be:Y=Y.next=be,C=C.next}while(C!==null);Y===null?G=Y=g:Y=Y.next=g}else G=Y=g;C={baseState:k.baseState,firstBaseUpdate:G,lastBaseUpdate:Y,shared:k.shared,effects:k.effects},u.updateQueue=C;return}u=C.lastBaseUpdate,u===null?C.firstBaseUpdate=g:u.next=g,C.lastBaseUpdate=g}function Ss(u,g,C,k){var G=u.updateQueue;Es=!1;var Y=G.firstBaseUpdate,be=G.lastBaseUpdate,At=G.shared.pending;if(At!==null){G.shared.pending=null;var wt=At,jt=wt.next;wt.next=null,be===null?Y=jt:be.next=jt,be=wt;var dr=u.alternate;dr!==null&&(dr=dr.updateQueue,At=dr.lastBaseUpdate,At!==be&&(At===null?dr.firstBaseUpdate=jt:At.next=jt,dr.lastBaseUpdate=wt))}if(Y!==null){var yr=G.baseState;be=0,dr=jt=wt=null,At=Y;do{var ur=At.lane,Qr=At.eventTime;if((k&ur)===ur){dr!==null&&(dr=dr.next={eventTime:Qr,lane:0,tag:At.tag,payload:At.payload,callback:At.callback,next:null});e:{var en=u,Gr=At;switch(ur=g,Qr=C,Gr.tag){case 1:if(en=Gr.payload,typeof en=="function"){yr=en.call(Qr,yr,ur);break e}yr=en;break e;case 3:en.flags=en.flags&-65537|128;case 0:if(en=Gr.payload,ur=typeof en=="function"?en.call(Qr,yr,ur):en,ur==null)break e;yr=xt({},yr,ur);break e;case 2:Es=!0}}At.callback!==null&&At.lane!==0&&(u.flags|=64,ur=G.effects,ur===null?G.effects=[At]:ur.push(At))}else Qr={eventTime:Qr,lane:ur,tag:At.tag,payload:At.payload,callback:At.callback,next:null},dr===null?(jt=dr=Qr,wt=yr):dr=dr.next=Qr,be|=ur;if(At=At.next,At===null){if(At=G.shared.pending,At===null)break;ur=At,At=ur.next,ur.next=null,G.lastBaseUpdate=ur,G.shared.pending=null}}while(!0);if(dr===null&&(wt=yr),G.baseState=wt,G.firstBaseUpdate=jt,G.lastBaseUpdate=dr,g=G.shared.interleaved,g!==null){G=g;do be|=G.lane,G=G.next;while(G!==g)}else Y===null&&(G.shared.lanes=0);Hi|=be,u.lanes=be,u.memoizedState=yr}}function Io(u,g,C){if(u=g.effects,g.effects=null,u!==null)for(g=0;g<u.length;g++){var k=u[g],G=k.callback;if(G!==null){if(k.callback=null,k=C,typeof G!="function")throw Error(i(191,G));G.call(k)}}}var Js={},Fs=Qa(Js),Ji=Qa(Js),za=Qa(Js);function Ha(u){if(u===Js)throw Error(i(174));return u}function Gc(u,g){switch(Xn(za,g),Xn(Ji,u),Xn(Fs,Js),u=g.nodeType,u){case 9:case 11:g=(g=g.documentElement)?g.namespaceURI:de(null,"");break;default:u=u===8?g.parentNode:g,g=u.namespaceURI||null,u=u.tagName,g=de(g,u)}li(Fs),Xn(Fs,g)}function ja(){li(Fs),li(Ji),li(za)}function Hl(u){Ha(za.current);var g=Ha(Fs.current),C=de(g,u.type);g!==C&&(Xn(Ji,u),Xn(Fs,C))}function VA(u){Ji.current===u&&(li(Fs),li(Ji))}var gi=Qa(0);function Wo(u){for(var g=u;g!==null;){if(g.tag===13){var C=g.memoizedState;if(C!==null&&(C=C.dehydrated,C===null||C.data==="$?"||C.data==="$!"))return g}else if(g.tag===19&&g.memoizedProps.revealOrder!==void 0){if((g.flags&128)!==0)return g}else if(g.child!==null){g.child.return=g,g=g.child;continue}if(g===u)break;for(;g.sibling===null;){if(g.return===null||g.return===u)return null;g=g.return}g.sibling.return=g.return,g=g.sibling}return null}var pA=[];function fu(){for(var u=0;u<pA.length;u++)pA[u]._workInProgressVersionPrimary=null;pA.length=0}var jl=he.ReactCurrentDispatcher,Vl=he.ReactCurrentBatchConfig,Va=0,bi=null,Ui=null,es=null,Kc=!1,Ga=!1,qc=0,w=0;function r(){throw Error(i(321))}function c(u,g){if(g===null)return!1;for(var C=0;C<g.length&&C<u.length;C++)if(!os(u[C],g[C]))return!1;return!0}function f(u,g,C,k,G,Y){if(Va=Y,bi=g,g.memoizedState=null,g.updateQueue=null,g.lanes=0,jl.current=u===null||u.memoizedState===null?Ki:eo,u=C(k,G),Ga){Y=0;do{if(Ga=!1,qc=0,25<=Y)throw Error(i(301));Y+=1,es=Ui=null,g.updateQueue=null,jl.current=Ts,u=C(k,G)}while(Ga)}if(jl.current=Is,g=Ui!==null&&Ui.next!==null,Va=0,es=Ui=bi=null,Kc=!1,g)throw Error(i(300));return u}function y(){var u=qc!==0;return qc=0,u}function b(){var u={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return es===null?bi.memoizedState=es=u:es=es.next=u,es}function S(){if(Ui===null){var u=bi.alternate;u=u!==null?u.memoizedState:null}else u=Ui.next;var g=es===null?bi.memoizedState:es.next;if(g!==null)es=g,Ui=u;else{if(u===null)throw Error(i(310));Ui=u,u={memoizedState:Ui.memoizedState,baseState:Ui.baseState,baseQueue:Ui.baseQueue,queue:Ui.queue,next:null},es===null?bi.memoizedState=es=u:es=es.next=u}return es}function M(u,g){return typeof g=="function"?g(u):g}function N(u){var g=S(),C=g.queue;if(C===null)throw Error(i(311));C.lastRenderedReducer=u;var k=Ui,G=k.baseQueue,Y=C.pending;if(Y!==null){if(G!==null){var be=G.next;G.next=Y.next,Y.next=be}k.baseQueue=G=Y,C.pending=null}if(G!==null){Y=G.next,k=k.baseState;var At=be=null,wt=null,jt=Y;do{var dr=jt.lane;if((Va&dr)===dr)wt!==null&&(wt=wt.next={lane:0,action:jt.action,hasEagerState:jt.hasEagerState,eagerState:jt.eagerState,next:null}),k=jt.hasEagerState?jt.eagerState:u(k,jt.action);else{var yr={lane:dr,action:jt.action,hasEagerState:jt.hasEagerState,eagerState:jt.eagerState,next:null};wt===null?(At=wt=yr,be=k):wt=wt.next=yr,bi.lanes|=dr,Hi|=dr}jt=jt.next}while(jt!==null&&jt!==Y);wt===null?be=k:wt.next=At,os(k,g.memoizedState)||(qa=!0),g.memoizedState=k,g.baseState=be,g.baseQueue=wt,C.lastRenderedState=k}if(u=C.interleaved,u!==null){G=u;do Y=G.lane,bi.lanes|=Y,Hi|=Y,G=G.next;while(G!==u)}else G===null&&(C.lanes=0);return[g.memoizedState,C.dispatch]}function j(u){var g=S(),C=g.queue;if(C===null)throw Error(i(311));C.lastRenderedReducer=u;var k=C.dispatch,G=C.pending,Y=g.memoizedState;if(G!==null){C.pending=null;var be=G=G.next;do Y=u(Y,be.action),be=be.next;while(be!==G);os(Y,g.memoizedState)||(qa=!0),g.memoizedState=Y,g.baseQueue===null&&(g.baseState=Y),C.lastRenderedState=Y}return[Y,k]}function q(){}function ne(u,g){var C=bi,k=S(),G=g(),Y=!os(k.memoizedState,G);if(Y&&(k.memoizedState=G,qa=!0),k=k.queue,it(ve.bind(null,C,k,u),[u]),k.getSnapshot!==g||Y||es!==null&&es.memoizedState.tag&1){if(C.flags|=2048,Ge(9,Ae.bind(null,C,k,G,g),void 0,null),ta===null)throw Error(i(349));(Va&30)!==0||ee(C,g,G)}return G}function ee(u,g,C){u.flags|=16384,u={getSnapshot:g,value:C},g=bi.updateQueue,g===null?(g={lastEffect:null,stores:null},bi.updateQueue=g,g.stores=[u]):(C=g.stores,C===null?g.stores=[u]:C.push(u))}function Ae(u,g,C,k){g.value=C,g.getSnapshot=k,ke(g)&&Oe(u)}function ve(u,g,C){return C(function(){ke(g)&&Oe(u)})}function ke(u){var g=u.getSnapshot;u=u.value;try{var C=g();return!os(u,C)}catch{return!0}}function Oe(u){var g=wi(u,1);g!==null&&vc(g,u,1,-1)}function Qe(u){var g=b();return typeof u=="function"&&(u=u()),g.memoizedState=g.baseState=u,u={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:M,lastRenderedState:u},g.queue=u,u=u.dispatch=zi.bind(null,bi,u),[g.memoizedState,u]}function Ge(u,g,C,k){return u={tag:u,create:g,destroy:C,deps:k,next:null},g=bi.updateQueue,g===null?(g={lastEffect:null,stores:null},bi.updateQueue=g,g.lastEffect=u.next=u):(C=g.lastEffect,C===null?g.lastEffect=u.next=u:(k=C.next,C.next=u,u.next=k,g.lastEffect=u)),u}function ot(){return S().memoizedState}function Ze(u,g,C,k){var G=b();bi.flags|=u,G.memoizedState=Ge(1|g,C,void 0,k===void 0?null:k)}function ct(u,g,C,k){var G=S();k=k===void 0?null:k;var Y=void 0;if(Ui!==null){var be=Ui.memoizedState;if(Y=be.destroy,k!==null&&c(k,be.deps)){G.memoizedState=Ge(g,C,Y,k);return}}bi.flags|=u,G.memoizedState=Ge(1|g,C,Y,k)}function dt(u,g){return Ze(8390656,8,u,g)}function it(u,g){return ct(2048,8,u,g)}function _t(u,g){return ct(4,2,u,g)}function Dt(u,g){return ct(4,4,u,g)}function Pt(u,g){if(typeof g=="function")return u=u(),g(u),function(){g(null)};if(g!=null)return u=u(),g.current=u,function(){g.current=null}}function Rt(u,g,C){return C=C!=null?C.concat([u]):null,ct(4,4,Pt.bind(null,g,u),C)}function Qt(){}function nr(u,g){var C=S();g=g===void 0?null:g;var k=C.memoizedState;return k!==null&&g!==null&&c(g,k[1])?k[0]:(C.memoizedState=[u,g],u)}function Ar(u,g){var C=S();g=g===void 0?null:g;var k=C.memoizedState;return k!==null&&g!==null&&c(g,k[1])?k[0]:(u=u(),C.memoizedState=[u,g],u)}function rr(u,g,C){return(Va&21)===0?(u.baseState&&(u.baseState=!1,qa=!0),u.memoizedState=C):(os(C,g)||(C=nA(),bi.lanes|=C,Hi|=C,u.baseState=!0),g)}function Dr(u,g){var C=Kn;Kn=C!==0&&4>C?C:4,u(!0);var k=Vl.transition;Vl.transition={};try{u(!1),g()}finally{Kn=C,Vl.transition=k}}function vn(){return S().memoizedState}function Ai(u,g,C){var k=Zc(u);if(C={lane:k,action:C,hasEagerState:!1,eagerState:null,next:null},ui(u))Gi(g,C);else if(C=Rn(u,g,C,k),C!==null){var G=Wa();vc(C,u,k,G),Pi(C,g,k)}}function zi(u,g,C){var k=Zc(u),G={lane:k,action:C,hasEagerState:!1,eagerState:null,next:null};if(ui(u))Gi(g,G);else{var Y=u.alternate;if(u.lanes===0&&(Y===null||Y.lanes===0)&&(Y=g.lastRenderedReducer,Y!==null))try{var be=g.lastRenderedState,At=Y(be,C);if(G.hasEagerState=!0,G.eagerState=At,os(At,be)){var wt=g.interleaved;wt===null?(G.next=G,ci(g)):(G.next=wt.next,wt.next=G),g.interleaved=G;return}}catch{}finally{}C=Rn(u,g,G,k),C!==null&&(G=Wa(),vc(C,u,k,G),Pi(C,g,k))}}function ui(u){var g=u.alternate;return u===bi||g!==null&&g===bi}function Gi(u,g){Ga=Kc=!0;var C=u.pending;C===null?g.next=g:(g.next=C.next,C.next=g),u.pending=g}function Pi(u,g,C){if((C&4194240)!==0){var k=g.lanes;k&=u.pendingLanes,C|=k,g.lanes=C,TA(u,C)}}var Is={readContext:Vi,useCallback:r,useContext:r,useEffect:r,useImperativeHandle:r,useInsertionEffect:r,useLayoutEffect:r,useMemo:r,useReducer:r,useRef:r,useState:r,useDebugValue:r,useDeferredValue:r,useTransition:r,useMutableSource:r,useSyncExternalStore:r,useId:r,unstable_isNewReconciler:!1},Ki={readContext:Vi,useCallback:function(u,g){return b().memoizedState=[u,g===void 0?null:g],u},useContext:Vi,useEffect:dt,useImperativeHandle:function(u,g,C){return C=C!=null?C.concat([u]):null,Ze(4194308,4,Pt.bind(null,g,u),C)},useLayoutEffect:function(u,g){return Ze(4194308,4,u,g)},useInsertionEffect:function(u,g){return Ze(4,2,u,g)},useMemo:function(u,g){var C=b();return g=g===void 0?null:g,u=u(),C.memoizedState=[u,g],u},useReducer:function(u,g,C){var k=b();return g=C!==void 0?C(g):g,k.memoizedState=k.baseState=g,u={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:u,lastRenderedState:g},k.queue=u,u=u.dispatch=Ai.bind(null,bi,u),[k.memoizedState,u]},useRef:function(u){var g=b();return u={current:u},g.memoizedState=u},useState:Qe,useDebugValue:Qt,useDeferredValue:function(u){return b().memoizedState=u},useTransition:function(){var u=Qe(!1),g=u[0];return u=Dr.bind(null,u[1]),b().memoizedState=u,[g,u]},useMutableSource:function(){},useSyncExternalStore:function(u,g,C){var k=bi,G=b();if(tr){if(C===void 0)throw Error(i(407));C=C()}else{if(C=g(),ta===null)throw Error(i(349));(Va&30)!==0||ee(k,g,C)}G.memoizedState=C;var Y={value:C,getSnapshot:g};return G.queue=Y,dt(ve.bind(null,k,Y,u),[u]),k.flags|=2048,Ge(9,Ae.bind(null,k,Y,C,g),void 0,null),C},useId:function(){var u=b(),g=ta.identifierPrefix;if(tr){var C=Xe,k=kt;C=(k&~(1<<32-fs(k)-1)).toString(32)+C,g=":"+g+"R"+C,C=qc++,0<C&&(g+="H"+C.toString(32)),g+=":"}else C=w++,g=":"+g+"r"+C.toString(32)+":";return u.memoizedState=g},unstable_isNewReconciler:!1},eo={readContext:Vi,useCallback:nr,useContext:Vi,useEffect:it,useImperativeHandle:Rt,useInsertionEffect:_t,useLayoutEffect:Dt,useMemo:Ar,useReducer:N,useRef:ot,useState:function(){return N(M)},useDebugValue:Qt,useDeferredValue:function(u){var g=S();return rr(g,Ui.memoizedState,u)},useTransition:function(){var u=N(M)[0],g=S().memoizedState;return[u,g]},useMutableSource:q,useSyncExternalStore:ne,useId:vn,unstable_isNewReconciler:!1},Ts={readContext:Vi,useCallback:nr,useContext:Vi,useEffect:it,useImperativeHandle:Rt,useInsertionEffect:_t,useLayoutEffect:Dt,useMemo:Ar,useReducer:j,useRef:ot,useState:function(){return j(M)},useDebugValue:Qt,useDeferredValue:function(u){var g=S();return Ui===null?g.memoizedState=u:rr(g,Ui.memoizedState,u)},useTransition:function(){var u=j(M)[0],g=S().memoizedState;return[u,g]},useMutableSource:q,useSyncExternalStore:ne,useId:vn,unstable_isNewReconciler:!1};function hi(u,g){if(u&&u.defaultProps){g=xt({},g),u=u.defaultProps;for(var C in u)g[C]===void 0&&(g[C]=u[C]);return g}return g}function Ao(u,g,C,k){g=u.memoizedState,C=C(k,g),C=C==null?g:xt({},g,C),u.memoizedState=C,u.lanes===0&&(u.updateQueue.baseState=C)}var yo={isMounted:function(u){return(u=u._reactInternals)?nn(u)===u:!1},enqueueSetState:function(u,g,C){u=u._reactInternals;var k=Wa(),G=Zc(u),Y=ki(k,G);Y.payload=g,C!=null&&(Y.callback=C),g=In(u,Y,G),g!==null&&(vc(g,u,G,k),Vn(g,u,G))},enqueueReplaceState:function(u,g,C){u=u._reactInternals;var k=Wa(),G=Zc(u),Y=ki(k,G);Y.tag=1,Y.payload=g,C!=null&&(Y.callback=C),g=In(u,Y,G),g!==null&&(vc(g,u,G,k),Vn(g,u,G))},enqueueForceUpdate:function(u,g){u=u._reactInternals;var C=Wa(),k=Zc(u),G=ki(C,k);G.tag=2,g!=null&&(G.callback=g),g=In(u,G,k),g!==null&&(vc(g,u,k,C),Vn(g,u,k))}};function fc(u,g,C,k,G,Y,be){return u=u.stateNode,typeof u.shouldComponentUpdate=="function"?u.shouldComponentUpdate(k,Y,be):g.prototype&&g.prototype.isPureReactComponent?!Eo(C,k)||!Eo(G,Y):!0}function mA(u,g,C){var k=!1,G=zl,Y=g.contextType;return typeof Y=="object"&&Y!==null?Y=Vi(Y):(G=go(g)?jc:Ns.current,k=g.contextTypes,Y=(k=k!=null)?Vc(u,G):zl),g=new g(C,Y),u.memoizedState=g.state!==null&&g.state!==void 0?g.state:null,g.updater=yo,u.stateNode=g,g._reactInternals=u,k&&(u=u.stateNode,u.__reactInternalMemoizedUnmaskedChildContext=G,u.__reactInternalMemoizedMaskedChildContext=Y),g}function GA(u,g,C,k){u=g.state,typeof g.componentWillReceiveProps=="function"&&g.componentWillReceiveProps(C,k),typeof g.UNSAFE_componentWillReceiveProps=="function"&&g.UNSAFE_componentWillReceiveProps(C,k),g.state!==u&&yo.enqueueReplaceState(g,g.state,null)}function zu(u,g,C,k){var G=u.stateNode;G.props=C,G.state=u.memoizedState,G.refs={},Ys(u);var Y=g.contextType;typeof Y=="object"&&Y!==null?G.context=Vi(Y):(Y=go(g)?jc:Ns.current,G.context=Vc(u,Y)),G.state=u.memoizedState,Y=g.getDerivedStateFromProps,typeof Y=="function"&&(Ao(u,g,Y,C),G.state=u.memoizedState),typeof g.getDerivedStateFromProps=="function"||typeof G.getSnapshotBeforeUpdate=="function"||typeof G.UNSAFE_componentWillMount!="function"&&typeof G.componentWillMount!="function"||(g=G.state,typeof G.componentWillMount=="function"&&G.componentWillMount(),typeof G.UNSAFE_componentWillMount=="function"&&G.UNSAFE_componentWillMount(),g!==G.state&&yo.enqueueReplaceState(G,G.state,null),Ss(u,C,G,k),G.state=u.memoizedState),typeof G.componentDidMount=="function"&&(u.flags|=4194308)}function pc(u,g){try{var C="",k=g;do C+=Ye(k),k=k.return;while(k);var G=C}catch(Y){G=`
Error generating stack: `+Y.message+`
`+Y.stack}return{value:u,source:g,stack:G,digest:null}}function Gl(u,g,C){return{value:u,source:null,stack:C??null,digest:g??null}}function to(u,g){try{console.error(g.value)}catch(C){setTimeout(function(){throw C})}}var Zo=typeof WeakMap=="function"?WeakMap:Map;function vo(u,g,C){C=ki(-1,C),C.tag=3,C.payload={element:null};var k=g.value;return C.callback=function(){Vu||(Vu=!0,Md=k),to(u,g)},C}function vl(u,g,C){C=ki(-1,C),C.tag=3;var k=u.type.getDerivedStateFromError;if(typeof k=="function"){var G=g.value;C.payload=function(){return k(G)},C.callback=function(){to(u,g)}}var Y=u.stateNode;return Y!==null&&typeof Y.componentDidCatch=="function"&&(C.callback=function(){to(u,g),typeof k!="function"&&(gc===null?gc=new Set([this]):gc.add(this));var be=g.stack;this.componentDidCatch(g.value,{componentStack:be!==null?be:""})}),C}function Os(u,g,C){var k=u.pingCache;if(k===null){k=u.pingCache=new Zo;var G=new Set;k.set(g,G)}else G=k.get(g),G===void 0&&(G=new Set,k.set(g,G));G.has(C)||(G.add(C),u=Dd.bind(null,u,g,C),g.then(u,u))}function ro(u){do{var g;if((g=u.tag===13)&&(g=u.memoizedState,g=g!==null?g.dehydrated!==null:!0),g)return u;u=u.return}while(u!==null);return null}function Ka(u,g,C,k,G){return(u.mode&1)===0?(u===g?u.flags|=65536:(u.flags|=128,C.flags|=131072,C.flags&=-52805,C.tag===1&&(C.alternate===null?C.tag=17:(g=ki(-1,1),g.tag=2,In(C,g,1))),C.lanes|=1),u):(u.flags|=65536,u.lanes=G,u)}var cs=he.ReactCurrentOwner,qa=!1;function Xo(u,g,C,k){g.child=u===null?Qi(g,null,C,k):ls(g,u.child,C,k)}function Vh(u,g,C,k,G){C=C.render;var Y=g.ref;return Ti(g,G),k=f(u,g,C,k,Y,G),C=y(),u!==null&&!qa?(g.updateQueue=u.updateQueue,g.flags&=-2053,u.lanes&=~G,$c(u,g,G)):(tr&&C&&Zt(g),g.flags|=1,Xo(u,g,k,G),g.child)}function Sd(u,g,C,k,G){if(u===null){var Y=C.type;return typeof Y=="function"&&!Rd(Y)&&Y.defaultProps===void 0&&C.compare===null&&C.defaultProps===void 0?(g.tag=15,g.type=Y,KA(u,g,Y,k,G)):(u=Nd(C.type,null,k,g,g.mode,G),u.ref=g.ref,u.return=g,g.child=u)}if(Y=u.child,(u.lanes&G)===0){var be=Y.memoizedProps;if(C=C.compare,C=C!==null?C:Eo,C(be,k)&&u.ref===g.ref)return $c(u,g,G)}return g.flags|=1,u=yu(Y,k),u.ref=g.ref,u.return=g,g.child=u}function KA(u,g,C,k,G){if(u!==null){var Y=u.memoizedProps;if(Eo(Y,k)&&u.ref===g.ref)if(qa=!1,g.pendingProps=k=Y,(u.lanes&G)!==0)(u.flags&131072)!==0&&(qa=!0);else return g.lanes=u.lanes,$c(u,g,G)}return Gh(u,g,C,k,G)}function qA(u,g,C){var k=g.pendingProps,G=k.children,Y=u!==null?u.memoizedState:null;if(k.mode==="hidden")if((g.mode&1)===0)g.memoizedState={baseLanes:0,cachePool:null,transitions:null},Xn(gh,mc),mc|=C;else{if((C&1073741824)===0)return u=Y!==null?Y.baseLanes|C:C,g.lanes=g.childLanes=1073741824,g.memoizedState={baseLanes:u,cachePool:null,transitions:null},g.updateQueue=null,Xn(gh,mc),mc|=u,null;g.memoizedState={baseLanes:0,cachePool:null,transitions:null},k=Y!==null?Y.baseLanes:C,Xn(gh,mc),mc|=k}else Y!==null?(k=Y.baseLanes|C,g.memoizedState=null):k=C,Xn(gh,mc),mc|=k;return Xo(u,g,G,C),g.child}function gA(u,g){var C=g.ref;(u===null&&C!==null||u!==null&&u.ref!==C)&&(g.flags|=512,g.flags|=2097152)}function Gh(u,g,C,k,G){var Y=go(C)?jc:Ns.current;return Y=Vc(g,Y),Ti(g,G),C=f(u,g,C,k,Y,G),k=y(),u!==null&&!qa?(g.updateQueue=u.updateQueue,g.flags&=-2053,u.lanes&=~G,$c(u,g,G)):(tr&&k&&Zt(g),g.flags|=1,Xo(u,g,C,G),g.child)}function uh(u,g,C,k,G){if(go(C)){var Y=!0;Oa(g)}else Y=!1;if(Ti(g,G),g.stateNode===null)mh(u,g),mA(g,C,k),zu(g,C,k,G),k=!0;else if(u===null){var be=g.stateNode,At=g.memoizedProps;be.props=At;var wt=be.context,jt=C.contextType;typeof jt=="object"&&jt!==null?jt=Vi(jt):(jt=go(C)?jc:Ns.current,jt=Vc(g,jt));var dr=C.getDerivedStateFromProps,yr=typeof dr=="function"||typeof be.getSnapshotBeforeUpdate=="function";yr||typeof be.UNSAFE_componentWillReceiveProps!="function"&&typeof be.componentWillReceiveProps!="function"||(At!==k||wt!==jt)&&GA(g,be,k,jt),Es=!1;var ur=g.memoizedState;be.state=ur,Ss(g,k,be,G),wt=g.memoizedState,At!==k||ur!==wt||Xs.current||Es?(typeof dr=="function"&&(Ao(g,C,dr,k),wt=g.memoizedState),(At=Es||fc(g,C,At,k,ur,wt,jt))?(yr||typeof be.UNSAFE_componentWillMount!="function"&&typeof be.componentWillMount!="function"||(typeof be.componentWillMount=="function"&&be.componentWillMount(),typeof be.UNSAFE_componentWillMount=="function"&&be.UNSAFE_componentWillMount()),typeof be.componentDidMount=="function"&&(g.flags|=4194308)):(typeof be.componentDidMount=="function"&&(g.flags|=4194308),g.memoizedProps=k,g.memoizedState=wt),be.props=k,be.state=wt,be.context=jt,k=At):(typeof be.componentDidMount=="function"&&(g.flags|=4194308),k=!1)}else{be=g.stateNode,Fo(u,g),At=g.memoizedProps,jt=g.type===g.elementType?At:hi(g.type,At),be.props=jt,yr=g.pendingProps,ur=be.context,wt=C.contextType,typeof wt=="object"&&wt!==null?wt=Vi(wt):(wt=go(C)?jc:Ns.current,wt=Vc(g,wt));var Qr=C.getDerivedStateFromProps;(dr=typeof Qr=="function"||typeof be.getSnapshotBeforeUpdate=="function")||typeof be.UNSAFE_componentWillReceiveProps!="function"&&typeof be.componentWillReceiveProps!="function"||(At!==yr||ur!==wt)&&GA(g,be,k,wt),Es=!1,ur=g.memoizedState,be.state=ur,Ss(g,k,be,G);var en=g.memoizedState;At!==yr||ur!==en||Xs.current||Es?(typeof Qr=="function"&&(Ao(g,C,Qr,k),en=g.memoizedState),(jt=Es||fc(g,C,jt,k,ur,en,wt)||!1)?(dr||typeof be.UNSAFE_componentWillUpdate!="function"&&typeof be.componentWillUpdate!="function"||(typeof be.componentWillUpdate=="function"&&be.componentWillUpdate(k,en,wt),typeof be.UNSAFE_componentWillUpdate=="function"&&be.UNSAFE_componentWillUpdate(k,en,wt)),typeof be.componentDidUpdate=="function"&&(g.flags|=4),typeof be.getSnapshotBeforeUpdate=="function"&&(g.flags|=1024)):(typeof be.componentDidUpdate!="function"||At===u.memoizedProps&&ur===u.memoizedState||(g.flags|=4),typeof be.getSnapshotBeforeUpdate!="function"||At===u.memoizedProps&&ur===u.memoizedState||(g.flags|=1024),g.memoizedProps=k,g.memoizedState=en),be.props=k,be.state=en,be.context=wt,k=jt):(typeof be.componentDidUpdate!="function"||At===u.memoizedProps&&ur===u.memoizedState||(g.flags|=4),typeof be.getSnapshotBeforeUpdate!="function"||At===u.memoizedProps&&ur===u.memoizedState||(g.flags|=1024),k=!1)}return hh(u,g,C,k,Y,G)}function hh(u,g,C,k,G,Y){gA(u,g);var be=(g.flags&128)!==0;if(!k&&!be)return G&&_a(g,C,!1),$c(u,g,Y);k=g.stateNode,cs.current=g;var At=be&&typeof C.getDerivedStateFromError!="function"?null:k.render();return g.flags|=1,u!==null&&be?(g.child=ls(g,u.child,null,Y),g.child=ls(g,null,At,Y)):Xo(u,g,At,Y),g.memoizedState=k.state,G&&_a(g,C,!0),g.child}function pu(u){var g=u.stateNode;g.pendingContext?Ou(u,g.pendingContext,g.pendingContext!==g.context):g.context&&Ou(u,g.context,!1),Gc(u,g.containerInfo)}function Kh(u,g,C,k,G){return Hr(),Fr(G),g.flags|=256,Xo(u,g,C,k),g.child}var dh={dehydrated:null,treeContext:null,retryLane:0};function Fd(u){return{baseLanes:u,cachePool:null,transitions:null}}function rg(u,g,C){var k=g.pendingProps,G=gi.current,Y=!1,be=(g.flags&128)!==0,At;if((At=be)||(At=u!==null&&u.memoizedState===null?!1:(G&2)!==0),At?(Y=!0,g.flags&=-129):(u===null||u.memoizedState!==null)&&(G|=1),Xn(gi,G&1),u===null)return Zr(g),u=g.memoizedState,u!==null&&(u=u.dehydrated,u!==null)?((g.mode&1)===0?g.lanes=1:u.data==="$!"?g.lanes=8:g.lanes=1073741824,null):(be=k.children,u=k.fallback,Y?(k=g.mode,Y=g.child,be={mode:"hidden",children:be},(k&1)===0&&Y!==null?(Y.childLanes=0,Y.pendingProps=be):Y=Sh(be,k,0,null),u=Eh(u,k,C,null),Y.return=g,u.return=g,Y.sibling=u,g.child=Y,g.child.memoizedState=Fd(C),g.memoizedState=dh,u):Id(g,be));if(G=u.memoizedState,G!==null&&(At=G.dehydrated,At!==null))return ng(u,g,be,k,At,G,C);if(Y){Y=k.fallback,be=g.mode,G=u.child,At=G.sibling;var wt={mode:"hidden",children:k.children};return(be&1)===0&&g.child!==G?(k=g.child,k.childLanes=0,k.pendingProps=wt,g.deletions=null):(k=yu(G,wt),k.subtreeFlags=G.subtreeFlags&14680064),At!==null?Y=yu(At,Y):(Y=Eh(Y,be,C,null),Y.flags|=2),Y.return=g,k.return=g,k.sibling=Y,g.child=k,k=Y,Y=g.child,be=u.child.memoizedState,be=be===null?Fd(C):{baseLanes:be.baseLanes|C,cachePool:null,transitions:be.transitions},Y.memoizedState=be,Y.childLanes=u.childLanes&~C,g.memoizedState=dh,k}return Y=u.child,u=Y.sibling,k=yu(Y,{mode:"visible",children:k.children}),(g.mode&1)===0&&(k.lanes=C),k.return=g,k.sibling=null,u!==null&&(C=g.deletions,C===null?(g.deletions=[u],g.flags|=16):C.push(u)),g.child=k,g.memoizedState=null,k}function Id(u,g){return g=Sh({mode:"visible",children:g},u.mode,0,null),g.return=u,u.child=g}function Td(u,g,C,k){return k!==null&&Fr(k),ls(g,u.child,null,C),u=Id(g,g.pendingProps.children),u.flags|=2,g.memoizedState=null,u}function ng(u,g,C,k,G,Y,be){if(C)return g.flags&256?(g.flags&=-257,k=Gl(Error(i(422))),Td(u,g,be,k)):g.memoizedState!==null?(g.child=u.child,g.flags|=128,null):(Y=k.fallback,G=g.mode,k=Sh({mode:"visible",children:k.children},G,0,null),Y=Eh(Y,G,be,null),Y.flags|=2,k.return=g,Y.return=g,k.sibling=Y,g.child=k,(g.mode&1)!==0&&ls(g,u.child,null,be),g.child.memoizedState=Fd(be),g.memoizedState=dh,Y);if((g.mode&1)===0)return Td(u,g,be,null);if(G.data==="$!"){if(k=G.nextSibling&&G.nextSibling.dataset,k)var At=k.dgst;return k=At,Y=Error(i(419)),k=Gl(Y,k,void 0),Td(u,g,be,k)}if(At=(be&u.childLanes)!==0,qa||At){if(k=ta,k!==null){switch(be&-be){case 4:G=2;break;case 16:G=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:G=32;break;case 536870912:G=268435456;break;default:G=0}G=(G&(k.suspendedLanes|be))!==0?0:G,G!==0&&G!==Y.retryLane&&(Y.retryLane=G,wi(u,G),vc(k,u,G,-1))}return wf(),k=Gl(Error(i(421))),Td(u,g,be,k)}return G.data==="$?"?(g.flags|=128,g.child=u.child,g=tv.bind(null,u),G._reactRetry=g,null):(u=Y.treeContext,$t=po(G.nextSibling),Kt=g,tr=!0,er=null,u!==null&&(De[Ke++]=kt,De[Ke++]=Xe,De[Ke++]=$e,kt=u.id,Xe=u.overflow,$e=g),g=Id(g,k.children),g.flags|=4096,g)}function fh(u,g,C){u.lanes|=g;var k=u.alternate;k!==null&&(k.lanes|=g),xr(u.return,g,C)}function Fp(u,g,C,k,G){var Y=u.memoizedState;Y===null?u.memoizedState={isBackwards:g,rendering:null,renderingStartTime:0,last:k,tail:C,tailMode:G}:(Y.isBackwards=g,Y.rendering=null,Y.renderingStartTime=0,Y.last=k,Y.tail=C,Y.tailMode=G)}function ph(u,g,C){var k=g.pendingProps,G=k.revealOrder,Y=k.tail;if(Xo(u,g,k.children,C),k=gi.current,(k&2)!==0)k=k&1|2,g.flags|=128;else{if(u!==null&&(u.flags&128)!==0)e:for(u=g.child;u!==null;){if(u.tag===13)u.memoizedState!==null&&fh(u,C,g);else if(u.tag===19)fh(u,C,g);else if(u.child!==null){u.child.return=u,u=u.child;continue}if(u===g)break e;for(;u.sibling===null;){if(u.return===null||u.return===g)break e;u=u.return}u.sibling.return=u.return,u=u.sibling}k&=1}if(Xn(gi,k),(g.mode&1)===0)g.memoizedState=null;else switch(G){case"forwards":for(C=g.child,G=null;C!==null;)u=C.alternate,u!==null&&Wo(u)===null&&(G=C),C=C.sibling;C=G,C===null?(G=g.child,g.child=null):(G=C.sibling,C.sibling=null),Fp(g,!1,G,C,Y);break;case"backwards":for(C=null,G=g.child,g.child=null;G!==null;){if(u=G.alternate,u!==null&&Wo(u)===null){g.child=G;break}u=G.sibling,G.sibling=C,C=G,G=u}Fp(g,!0,C,null,Y);break;case"together":Fp(g,!1,null,null,void 0);break;default:g.memoizedState=null}return g.child}function mh(u,g){(g.mode&1)===0&&u!==null&&(u.alternate=null,g.alternate=null,g.flags|=2)}function $c(u,g,C){if(u!==null&&(g.dependencies=u.dependencies),Hi|=g.lanes,(C&g.childLanes)===0)return null;if(u!==null&&g.child!==u.child)throw Error(i(153));if(g.child!==null){for(u=g.child,C=yu(u,u.pendingProps),g.child=C,C.return=g;u.sibling!==null;)u=u.sibling,C=C.sibling=yu(u,u.pendingProps),C.return=g;C.sibling=null}return g.child}function Yy(u,g,C){switch(g.tag){case 3:pu(g),Hr();break;case 5:Hl(g);break;case 1:go(g.type)&&Oa(g);break;case 4:Gc(g,g.stateNode.containerInfo);break;case 10:var k=g.type._context,G=g.memoizedProps.value;Xn(Bs,k._currentValue),k._currentValue=G;break;case 13:if(k=g.memoizedState,k!==null)return k.dehydrated!==null?(Xn(gi,gi.current&1),g.flags|=128,null):(C&g.child.childLanes)!==0?rg(u,g,C):(Xn(gi,gi.current&1),u=$c(u,g,C),u!==null?u.sibling:null);Xn(gi,gi.current&1);break;case 19:if(k=(C&g.childLanes)!==0,(u.flags&128)!==0){if(k)return ph(u,g,C);g.flags|=128}if(G=g.memoizedState,G!==null&&(G.rendering=null,G.tail=null,G.lastEffect=null),Xn(gi,gi.current),k)break;return null;case 22:case 23:return g.lanes=0,qA(u,g,C)}return $c(u,g,C)}var ig,Ip,sg,og;ig=function(u,g){for(var C=g.child;C!==null;){if(C.tag===5||C.tag===6)u.appendChild(C.stateNode);else if(C.tag!==4&&C.child!==null){C.child.return=C,C=C.child;continue}if(C===g)break;for(;C.sibling===null;){if(C.return===null||C.return===g)return;C=C.return}C.sibling.return=C.return,C=C.sibling}},Ip=function(){},sg=function(u,g,C,k){var G=u.memoizedProps;if(G!==k){u=g.stateNode,Ha(Fs.current);var Y=null;switch(C){case"input":G=Cr(u,G),k=Cr(u,k),Y=[];break;case"select":G=xt({},G,{value:void 0}),k=xt({},k,{value:void 0}),Y=[];break;case"textarea":G=Or(u,G),k=Or(u,k),Y=[];break;default:typeof G.onClick!="function"&&typeof k.onClick=="function"&&(u.onclick=OA)}Ht(C,k);var be;C=null;for(jt in G)if(!k.hasOwnProperty(jt)&&G.hasOwnProperty(jt)&&G[jt]!=null)if(jt==="style"){var At=G[jt];for(be in At)At.hasOwnProperty(be)&&(C||(C={}),C[be]="")}else jt!=="dangerouslySetInnerHTML"&&jt!=="children"&&jt!=="suppressContentEditableWarning"&&jt!=="suppressHydrationWarning"&&jt!=="autoFocus"&&(h.hasOwnProperty(jt)?Y||(Y=[]):(Y=Y||[]).push(jt,null));for(jt in k){var wt=k[jt];if(At=G?.[jt],k.hasOwnProperty(jt)&&wt!==At&&(wt!=null||At!=null))if(jt==="style")if(At){for(be in At)!At.hasOwnProperty(be)||wt&&wt.hasOwnProperty(be)||(C||(C={}),C[be]="");for(be in wt)wt.hasOwnProperty(be)&&At[be]!==wt[be]&&(C||(C={}),C[be]=wt[be])}else C||(Y||(Y=[]),Y.push(jt,C)),C=wt;else jt==="dangerouslySetInnerHTML"?(wt=wt?wt.__html:void 0,At=At?At.__html:void 0,wt!=null&&At!==wt&&(Y=Y||[]).push(jt,wt)):jt==="children"?typeof wt!="string"&&typeof wt!="number"||(Y=Y||[]).push(jt,""+wt):jt!=="suppressContentEditableWarning"&&jt!=="suppressHydrationWarning"&&(h.hasOwnProperty(jt)?(wt!=null&&jt==="onScroll"&&Ii("scroll",u),Y||At===wt||(Y=[])):(Y=Y||[]).push(jt,wt))}C&&(Y=Y||[]).push("style",C);var jt=Y;(g.updateQueue=jt)&&(g.flags|=4)}},og=function(u,g,C,k){C!==k&&(g.flags|=4)};function qh(u,g){if(!tr)switch(u.tailMode){case"hidden":g=u.tail;for(var C=null;g!==null;)g.alternate!==null&&(C=g),g=g.sibling;C===null?u.tail=null:C.sibling=null;break;case"collapsed":C=u.tail;for(var k=null;C!==null;)C.alternate!==null&&(k=C),C=C.sibling;k===null?g||u.tail===null?u.tail=null:u.tail.sibling=null:k.sibling=null}}function Yo(u){var g=u.alternate!==null&&u.alternate.child===u.child,C=0,k=0;if(g)for(var G=u.child;G!==null;)C|=G.lanes|G.childLanes,k|=G.subtreeFlags&14680064,k|=G.flags&14680064,G.return=u,G=G.sibling;else for(G=u.child;G!==null;)C|=G.lanes|G.childLanes,k|=G.subtreeFlags,k|=G.flags,G.return=u,G=G.sibling;return u.subtreeFlags|=k,u.childLanes=C,g}function ag(u,g,C){var k=g.pendingProps;switch(Ut(g),g.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Yo(g),null;case 1:return go(g.type)&&du(),Yo(g),null;case 3:return k=g.stateNode,ja(),li(Xs),li(Ns),fu(),k.pendingContext&&(k.context=k.pendingContext,k.pendingContext=null),(u===null||u.child===null)&&(Ni(g)?g.flags|=4:u===null||u.memoizedState.isDehydrated&&(g.flags&256)===0||(g.flags|=1024,er!==null&&(zp(er),er=null))),Ip(u,g),Yo(g),null;case 5:VA(g);var G=Ha(za.current);if(C=g.type,u!==null&&g.stateNode!=null)sg(u,g,C,k,G),u.ref!==g.ref&&(g.flags|=512,g.flags|=2097152);else{if(!k){if(g.stateNode===null)throw Error(i(166));return Yo(g),null}if(u=Ha(Fs.current),Ni(g)){k=g.stateNode,C=g.type;var Y=g.memoizedProps;switch(k[mo]=g,k[co]=Y,u=(g.mode&1)!==0,C){case"dialog":Ii("cancel",k),Ii("close",k);break;case"iframe":case"object":case"embed":Ii("load",k);break;case"video":case"audio":for(G=0;G<Nc.length;G++)Ii(Nc[G],k);break;case"source":Ii("error",k);break;case"img":case"image":case"link":Ii("error",k),Ii("load",k);break;case"details":Ii("toggle",k);break;case"input":He(k,Y),Ii("invalid",k);break;case"select":k._wrapperState={wasMultiple:!!Y.multiple},Ii("invalid",k);break;case"textarea":Rr(k,Y),Ii("invalid",k)}Ht(C,Y),G=null;for(var be in Y)if(Y.hasOwnProperty(be)){var At=Y[be];be==="children"?typeof At=="string"?k.textContent!==At&&(Y.suppressHydrationWarning!==!0&&QA(k.textContent,At,u),G=["children",At]):typeof At=="number"&&k.textContent!==""+At&&(Y.suppressHydrationWarning!==!0&&QA(k.textContent,At,u),G=["children",""+At]):h.hasOwnProperty(be)&&At!=null&&be==="onScroll"&&Ii("scroll",k)}switch(C){case"input":Wt(k),$r(k,Y,!0);break;case"textarea":Wt(k),hn(k);break;case"select":case"option":break;default:typeof Y.onClick=="function"&&(k.onclick=OA)}k=G,g.updateQueue=k,k!==null&&(g.flags|=4)}else{be=G.nodeType===9?G:G.ownerDocument,u==="http://www.w3.org/1999/xhtml"&&(u=ft(C)),u==="http://www.w3.org/1999/xhtml"?C==="script"?(u=be.createElement("div"),u.innerHTML="<script><\/script>",u=u.removeChild(u.firstChild)):typeof k.is=="string"?u=be.createElement(C,{is:k.is}):(u=be.createElement(C),C==="select"&&(be=u,k.multiple?be.multiple=!0:k.size&&(be.size=k.size))):u=be.createElementNS(u,C),u[mo]=g,u[co]=k,ig(u,g,!1,!1),g.stateNode=u;e:{switch(be=Ft(C,k),C){case"dialog":Ii("cancel",u),Ii("close",u),G=k;break;case"iframe":case"object":case"embed":Ii("load",u),G=k;break;case"video":case"audio":for(G=0;G<Nc.length;G++)Ii(Nc[G],u);G=k;break;case"source":Ii("error",u),G=k;break;case"img":case"image":case"link":Ii("error",u),Ii("load",u),G=k;break;case"details":Ii("toggle",u),G=k;break;case"input":He(u,k),G=Cr(u,k),Ii("invalid",u);break;case"option":G=k;break;case"select":u._wrapperState={wasMultiple:!!k.multiple},G=xt({},k,{value:void 0}),Ii("invalid",u);break;case"textarea":Rr(u,k),G=Or(u,k),Ii("invalid",u);break;default:G=k}Ht(C,G),At=G;for(Y in At)if(At.hasOwnProperty(Y)){var wt=At[Y];Y==="style"?at(u,wt):Y==="dangerouslySetInnerHTML"?(wt=wt?wt.__html:void 0,wt!=null&&ye(u,wt)):Y==="children"?typeof wt=="string"?(C!=="textarea"||wt!=="")&&qe(u,wt):typeof wt=="number"&&qe(u,""+wt):Y!=="suppressContentEditableWarning"&&Y!=="suppressHydrationWarning"&&Y!=="autoFocus"&&(h.hasOwnProperty(Y)?wt!=null&&Y==="onScroll"&&Ii("scroll",u):wt!=null&&ce(u,Y,wt,be))}switch(C){case"input":Wt(u),$r(u,k,!1);break;case"textarea":Wt(u),hn(u);break;case"option":k.value!=null&&u.setAttribute("value",""+vt(k.value));break;case"select":u.multiple=!!k.multiple,Y=k.value,Y!=null?Sr(u,!!k.multiple,Y,!1):k.defaultValue!=null&&Sr(u,!!k.multiple,k.defaultValue,!0);break;default:typeof G.onClick=="function"&&(u.onclick=OA)}switch(C){case"button":case"input":case"select":case"textarea":k=!!k.autoFocus;break e;case"img":k=!0;break e;default:k=!1}}k&&(g.flags|=4)}g.ref!==null&&(g.flags|=512,g.flags|=2097152)}return Yo(g),null;case 6:if(u&&g.stateNode!=null)og(u,g,u.memoizedProps,k);else{if(typeof k!="string"&&g.stateNode===null)throw Error(i(166));if(C=Ha(za.current),Ha(Fs.current),Ni(g)){if(k=g.stateNode,C=g.memoizedProps,k[mo]=g,(Y=k.nodeValue!==C)&&(u=Kt,u!==null))switch(u.tag){case 3:QA(k.nodeValue,C,(u.mode&1)!==0);break;case 5:u.memoizedProps.suppressHydrationWarning!==!0&&QA(k.nodeValue,C,(u.mode&1)!==0)}Y&&(g.flags|=4)}else k=(C.nodeType===9?C:C.ownerDocument).createTextNode(k),k[mo]=g,g.stateNode=k}return Yo(g),null;case 13:if(li(gi),k=g.memoizedState,u===null||u.memoizedState!==null&&u.memoizedState.dehydrated!==null){if(tr&&$t!==null&&(g.mode&1)!==0&&(g.flags&128)===0)Sn(),Hr(),g.flags|=98560,Y=!1;else if(Y=Ni(g),k!==null&&k.dehydrated!==null){if(u===null){if(!Y)throw Error(i(318));if(Y=g.memoizedState,Y=Y!==null?Y.dehydrated:null,!Y)throw Error(i(317));Y[mo]=g}else Hr(),(g.flags&128)===0&&(g.memoizedState=null),g.flags|=4;Yo(g),Y=!1}else er!==null&&(zp(er),er=null),Y=!0;if(!Y)return g.flags&65536?g:null}return(g.flags&128)!==0?(g.lanes=C,g):(k=k!==null,k!==(u!==null&&u.memoizedState!==null)&&k&&(g.child.flags|=8192,(g.mode&1)!==0&&(u===null||(gi.current&1)!==0?zs===0&&(zs=3):wf())),g.updateQueue!==null&&(g.flags|=4),Yo(g),null);case 4:return ja(),Ip(u,g),u===null&&uc(g.stateNode.containerInfo),Yo(g),null;case 10:return gr(g.type._context),Yo(g),null;case 17:return go(g.type)&&du(),Yo(g),null;case 19:if(li(gi),Y=g.memoizedState,Y===null)return Yo(g),null;if(k=(g.flags&128)!==0,be=Y.rendering,be===null)if(k)qh(Y,!1);else{if(zs!==0||u!==null&&(u.flags&128)!==0)for(u=g.child;u!==null;){if(be=Wo(u),be!==null){for(g.flags|=128,qh(Y,!1),k=be.updateQueue,k!==null&&(g.updateQueue=k,g.flags|=4),g.subtreeFlags=0,k=C,C=g.child;C!==null;)Y=C,u=k,Y.flags&=14680066,be=Y.alternate,be===null?(Y.childLanes=0,Y.lanes=u,Y.child=null,Y.subtreeFlags=0,Y.memoizedProps=null,Y.memoizedState=null,Y.updateQueue=null,Y.dependencies=null,Y.stateNode=null):(Y.childLanes=be.childLanes,Y.lanes=be.lanes,Y.child=be.child,Y.subtreeFlags=0,Y.deletions=null,Y.memoizedProps=be.memoizedProps,Y.memoizedState=be.memoizedState,Y.updateQueue=be.updateQueue,Y.type=be.type,u=be.dependencies,Y.dependencies=u===null?null:{lanes:u.lanes,firstContext:u.firstContext}),C=C.sibling;return Xn(gi,gi.current&1|2),g.child}u=u.sibling}Y.tail!==null&&fi()>vh&&(g.flags|=128,k=!0,qh(Y,!1),g.lanes=4194304)}else{if(!k)if(u=Wo(be),u!==null){if(g.flags|=128,k=!0,C=u.updateQueue,C!==null&&(g.updateQueue=C,g.flags|=4),qh(Y,!0),Y.tail===null&&Y.tailMode==="hidden"&&!be.alternate&&!tr)return Yo(g),null}else 2*fi()-Y.renderingStartTime>vh&&C!==1073741824&&(g.flags|=128,k=!0,qh(Y,!1),g.lanes=4194304);Y.isBackwards?(be.sibling=g.child,g.child=be):(C=Y.last,C!==null?C.sibling=be:g.child=be,Y.last=be)}return Y.tail!==null?(g=Y.tail,Y.rendering=g,Y.tail=g.sibling,Y.renderingStartTime=fi(),g.sibling=null,C=gi.current,Xn(gi,k?C&1|2:C&1),g):(Yo(g),null);case 22:case 23:return _f(),k=g.memoizedState!==null,u!==null&&u.memoizedState!==null!==k&&(g.flags|=8192),k&&(g.mode&1)!==0?(mc&1073741824)!==0&&(Yo(g),g.subtreeFlags&6&&(g.flags|=8192)):Yo(g),null;case 24:return null;case 25:return null}throw Error(i(156,g.tag))}function lg(u,g){switch(Ut(g),g.tag){case 1:return go(g.type)&&du(),u=g.flags,u&65536?(g.flags=u&-65537|128,g):null;case 3:return ja(),li(Xs),li(Ns),fu(),u=g.flags,(u&65536)!==0&&(u&128)===0?(g.flags=u&-65537|128,g):null;case 5:return VA(g),null;case 13:if(li(gi),u=g.memoizedState,u!==null&&u.dehydrated!==null){if(g.alternate===null)throw Error(i(340));Hr()}return u=g.flags,u&65536?(g.flags=u&-65537|128,g):null;case 19:return li(gi),null;case 4:return ja(),null;case 10:return gr(g.type._context),null;case 22:case 23:return _f(),null;case 24:return null;default:return null}}var uf=!1,$a=!1,cg=typeof WeakSet=="function"?WeakSet:Set,Xr=null;function $h(u,g){var C=u.ref;if(C!==null)if(typeof C=="function")try{C(null)}catch(k){no(u,g,k)}else C.current=null}function Pd(u,g,C){try{C()}catch(k){no(u,g,k)}}var Tp=!1;function Pp(u,g){if(dc=ic,u=bs(),Pn(u)){if("selectionStart"in u)var C={start:u.selectionStart,end:u.selectionEnd};else e:{C=(C=u.ownerDocument)&&C.defaultView||window;var k=C.getSelection&&C.getSelection();if(k&&k.rangeCount!==0){C=k.anchorNode;var G=k.anchorOffset,Y=k.focusNode;k=k.focusOffset;try{C.nodeType,Y.nodeType}catch{C=null;break e}var be=0,At=-1,wt=-1,jt=0,dr=0,yr=u,ur=null;t:for(;;){for(var Qr;yr!==C||G!==0&&yr.nodeType!==3||(At=be+G),yr!==Y||k!==0&&yr.nodeType!==3||(wt=be+k),yr.nodeType===3&&(be+=yr.nodeValue.length),(Qr=yr.firstChild)!==null;)ur=yr,yr=Qr;for(;;){if(yr===u)break t;if(ur===C&&++jt===G&&(At=be),ur===Y&&++dr===k&&(wt=be),(Qr=yr.nextSibling)!==null)break;yr=ur,ur=yr.parentNode}yr=Qr}C=At===-1||wt===-1?null:{start:At,end:wt}}else C=null}C=C||{start:0,end:0}}else C=null;for(hA={focusedElem:u,selectionRange:C},ic=!1,Xr=g;Xr!==null;)if(g=Xr,u=g.child,(g.subtreeFlags&1028)!==0&&u!==null)u.return=g,Xr=u;else for(;Xr!==null;){g=Xr;try{var en=g.alternate;if((g.flags&1024)!==0)switch(g.tag){case 0:case 11:case 15:break;case 1:if(en!==null){var Gr=en.memoizedProps,Ps=en.memoizedState,Nt=g.stateNode,Et=Nt.getSnapshotBeforeUpdate(g.elementType===g.type?Gr:hi(g.type,Gr),Ps);Nt.__reactInternalSnapshotBeforeUpdate=Et}break;case 3:var zt=g.stateNode.containerInfo;zt.nodeType===1?zt.textContent="":zt.nodeType===9&&zt.documentElement&&zt.removeChild(zt.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(i(163))}}catch(Br){no(g,g.return,Br)}if(u=g.sibling,u!==null){u.return=g.return,Xr=u;break}Xr=g.return}return en=Tp,Tp=!1,en}function mu(u,g,C){var k=g.updateQueue;if(k=k!==null?k.lastEffect:null,k!==null){var G=k=k.next;do{if((G.tag&u)===u){var Y=G.destroy;G.destroy=void 0,Y!==void 0&&Pd(g,C,Y)}G=G.next}while(G!==k)}}function Jo(u,g){if(g=g.updateQueue,g=g!==null?g.lastEffect:null,g!==null){var C=g=g.next;do{if((C.tag&u)===u){var k=C.create;C.destroy=k()}C=C.next}while(C!==g)}}function hf(u){var g=u.ref;if(g!==null){var C=u.stateNode;switch(u.tag){case 5:u=C;break;default:u=C}typeof g=="function"?g(u):g.current=u}}function df(u){var g=u.alternate;g!==null&&(u.alternate=null,df(g)),u.child=null,u.deletions=null,u.sibling=null,u.tag===5&&(g=u.stateNode,g!==null&&(delete g[mo],delete g[co],delete g[Zs],delete g[Nu],delete g[Hc])),u.stateNode=null,u.return=null,u.dependencies=null,u.memoizedProps=null,u.memoizedState=null,u.pendingProps=null,u.stateNode=null,u.updateQueue=null}function Ag(u){return u.tag===5||u.tag===3||u.tag===4}function Lp(u){e:for(;;){for(;u.sibling===null;){if(u.return===null||Ag(u.return))return null;u=u.return}for(u.sibling.return=u.return,u=u.sibling;u.tag!==5&&u.tag!==6&&u.tag!==18;){if(u.flags&2||u.child===null||u.tag===4)continue e;u.child.return=u,u=u.child}if(!(u.flags&2))return u.stateNode}}function Mp(u,g,C){var k=u.tag;if(k===5||k===6)u=u.stateNode,g?C.nodeType===8?C.parentNode.insertBefore(u,g):C.insertBefore(u,g):(C.nodeType===8?(g=C.parentNode,g.insertBefore(u,C)):(g=C,g.appendChild(u)),C=C._reactRootContainer,C!=null||g.onclick!==null||(g.onclick=OA));else if(k!==4&&(u=u.child,u!==null))for(Mp(u,g,C),u=u.sibling;u!==null;)Mp(u,g,C),u=u.sibling}function kp(u,g,C){var k=u.tag;if(k===5||k===6)u=u.stateNode,g?C.insertBefore(u,g):C.appendChild(u);else if(k!==4&&(u=u.child,u!==null))for(kp(u,g,C),u=u.sibling;u!==null;)kp(u,g,C),u=u.sibling}var ea=null,yA=!1;function $A(u,g,C){for(C=C.child;C!==null;)Up(u,g,C),C=C.sibling}function Up(u,g,C){if(Us&&typeof Us.onCommitFiberUnmount=="function")try{Us.onCommitFiberUnmount(cl,C)}catch{}switch(C.tag){case 5:$a||$h(C,g);case 6:var k=ea,G=yA;ea=null,$A(u,g,C),ea=k,yA=G,ea!==null&&(yA?(u=ea,C=C.stateNode,u.nodeType===8?u.parentNode.removeChild(C):u.removeChild(C)):ea.removeChild(C.stateNode));break;case 18:ea!==null&&(yA?(u=ea,C=C.stateNode,u.nodeType===8?zA(u.parentNode,C):u.nodeType===1&&zA(u,C),Aa(u)):zA(ea,C.stateNode));break;case 4:k=ea,G=yA,ea=C.stateNode.containerInfo,yA=!0,$A(u,g,C),ea=k,yA=G;break;case 0:case 11:case 14:case 15:if(!$a&&(k=C.updateQueue,k!==null&&(k=k.lastEffect,k!==null))){G=k=k.next;do{var Y=G,be=Y.destroy;Y=Y.tag,be!==void 0&&((Y&2)!==0||(Y&4)!==0)&&Pd(C,g,be),G=G.next}while(G!==k)}$A(u,g,C);break;case 1:if(!$a&&($h(C,g),k=C.stateNode,typeof k.componentWillUnmount=="function"))try{k.props=C.memoizedProps,k.state=C.memoizedState,k.componentWillUnmount()}catch(At){no(C,g,At)}$A(u,g,C);break;case 21:$A(u,g,C);break;case 22:C.mode&1?($a=(k=$a)||C.memoizedState!==null,$A(u,g,C),$a=k):$A(u,g,C);break;default:$A(u,g,C)}}function Dp(u){var g=u.updateQueue;if(g!==null){u.updateQueue=null;var C=u.stateNode;C===null&&(C=u.stateNode=new cg),g.forEach(function(k){var G=rv.bind(null,u,k);C.has(k)||(C.add(k),k.then(G,G))})}}function vA(u,g){var C=g.deletions;if(C!==null)for(var k=0;k<C.length;k++){var G=C[k];try{var Y=u,be=g,At=be;e:for(;At!==null;){switch(At.tag){case 5:ea=At.stateNode,yA=!1;break e;case 3:ea=At.stateNode.containerInfo,yA=!0;break e;case 4:ea=At.stateNode.containerInfo,yA=!0;break e}At=At.return}if(ea===null)throw Error(i(160));Up(Y,be,G),ea=null,yA=!1;var wt=G.alternate;wt!==null&&(wt.return=null),G.return=null}catch(jt){no(G,g,jt)}}if(g.subtreeFlags&12854)for(g=g.child;g!==null;)ug(g,u),g=g.sibling}function ug(u,g){var C=u.alternate,k=u.flags;switch(u.tag){case 0:case 11:case 14:case 15:if(vA(g,u),WA(u),k&4){try{mu(3,u,u.return),Jo(3,u)}catch(Gr){no(u,u.return,Gr)}try{mu(5,u,u.return)}catch(Gr){no(u,u.return,Gr)}}break;case 1:vA(g,u),WA(u),k&512&&C!==null&&$h(C,C.return);break;case 5:if(vA(g,u),WA(u),k&512&&C!==null&&$h(C,C.return),u.flags&32){var G=u.stateNode;try{qe(G,"")}catch(Gr){no(u,u.return,Gr)}}if(k&4&&(G=u.stateNode,G!=null)){var Y=u.memoizedProps,be=C!==null?C.memoizedProps:Y,At=u.type,wt=u.updateQueue;if(u.updateQueue=null,wt!==null)try{At==="input"&&Y.type==="radio"&&Y.name!=null&&vr(G,Y),Ft(At,be);var jt=Ft(At,Y);for(be=0;be<wt.length;be+=2){var dr=wt[be],yr=wt[be+1];dr==="style"?at(G,yr):dr==="dangerouslySetInnerHTML"?ye(G,yr):dr==="children"?qe(G,yr):ce(G,dr,yr,jt)}switch(At){case"input":Ur(G,Y);break;case"textarea":On(G,Y);break;case"select":var ur=G._wrapperState.wasMultiple;G._wrapperState.wasMultiple=!!Y.multiple;var Qr=Y.value;Qr!=null?Sr(G,!!Y.multiple,Qr,!1):ur!==!!Y.multiple&&(Y.defaultValue!=null?Sr(G,!!Y.multiple,Y.defaultValue,!0):Sr(G,!!Y.multiple,Y.multiple?[]:"",!1))}G[co]=Y}catch(Gr){no(u,u.return,Gr)}}break;case 6:if(vA(g,u),WA(u),k&4){if(u.stateNode===null)throw Error(i(162));G=u.stateNode,Y=u.memoizedProps;try{G.nodeValue=Y}catch(Gr){no(u,u.return,Gr)}}break;case 3:if(vA(g,u),WA(u),k&4&&C!==null&&C.memoizedState.isDehydrated)try{Aa(g.containerInfo)}catch(Gr){no(u,u.return,Gr)}break;case 4:vA(g,u),WA(u);break;case 13:vA(g,u),WA(u),G=u.child,G.flags&8192&&(Y=G.memoizedState!==null,G.stateNode.isHidden=Y,!Y||G.alternate!==null&&G.alternate.memoizedState!==null||(yh=fi())),k&4&&Dp(u);break;case 22:if(dr=C!==null&&C.memoizedState!==null,u.mode&1?($a=(jt=$a)||dr,vA(g,u),$a=jt):vA(g,u),WA(u),k&8192){if(jt=u.memoizedState!==null,(u.stateNode.isHidden=jt)&&!dr&&(u.mode&1)!==0)for(Xr=u,dr=u.child;dr!==null;){for(yr=Xr=dr;Xr!==null;){switch(ur=Xr,Qr=ur.child,ur.tag){case 0:case 11:case 14:case 15:mu(4,ur,ur.return);break;case 1:$h(ur,ur.return);var en=ur.stateNode;if(typeof en.componentWillUnmount=="function"){k=ur,C=ur.return;try{g=k,en.props=g.memoizedProps,en.state=g.memoizedState,en.componentWillUnmount()}catch(Gr){no(k,C,Gr)}}break;case 5:$h(ur,ur.return);break;case 22:if(ur.memoizedState!==null){Hu(yr);continue}}Qr!==null?(Qr.return=ur,Xr=Qr):Hu(yr)}dr=dr.sibling}e:for(dr=null,yr=u;;){if(yr.tag===5){if(dr===null){dr=yr;try{G=yr.stateNode,jt?(Y=G.style,typeof Y.setProperty=="function"?Y.setProperty("display","none","important"):Y.display="none"):(At=yr.stateNode,wt=yr.memoizedProps.style,be=wt!=null&&wt.hasOwnProperty("display")?wt.display:null,At.style.display=yt("display",be))}catch(Gr){no(u,u.return,Gr)}}}else if(yr.tag===6){if(dr===null)try{yr.stateNode.nodeValue=jt?"":yr.memoizedProps}catch(Gr){no(u,u.return,Gr)}}else if((yr.tag!==22&&yr.tag!==23||yr.memoizedState===null||yr===u)&&yr.child!==null){yr.child.return=yr,yr=yr.child;continue}if(yr===u)break e;for(;yr.sibling===null;){if(yr.return===null||yr.return===u)break e;dr===yr&&(dr=null),yr=yr.return}dr===yr&&(dr=null),yr.sibling.return=yr.return,yr=yr.sibling}}break;case 19:vA(g,u),WA(u),k&4&&Dp(u);break;case 21:break;default:vA(g,u),WA(u)}}function WA(u){var g=u.flags;if(g&2){try{e:{for(var C=u.return;C!==null;){if(Ag(C)){var k=C;break e}C=C.return}throw Error(i(160))}switch(k.tag){case 5:var G=k.stateNode;k.flags&32&&(qe(G,""),k.flags&=-33);var Y=Lp(u);kp(u,Y,G);break;case 3:case 4:var be=k.stateNode.containerInfo,At=Lp(u);Mp(u,At,be);break;default:throw Error(i(161))}}catch(wt){no(u,u.return,wt)}u.flags&=-3}g&4096&&(u.flags&=-4097)}function ff(u,g,C){Xr=u,pf(u)}function pf(u,g,C){for(var k=(u.mode&1)!==0;Xr!==null;){var G=Xr,Y=G.child;if(G.tag===22&&k){var be=G.memoizedState!==null||uf;if(!be){var At=G.alternate,wt=At!==null&&At.memoizedState!==null||$a;At=uf;var jt=$a;if(uf=be,($a=wt)&&!jt)for(Xr=G;Xr!==null;)be=Xr,wt=be.child,be.tag===22&&be.memoizedState!==null?Wh(G):wt!==null?(wt.return=be,Xr=wt):Wh(G);for(;Y!==null;)Xr=Y,pf(Y),Y=Y.sibling;Xr=G,uf=At,$a=jt}Rp(u)}else(G.subtreeFlags&8772)!==0&&Y!==null?(Y.return=G,Xr=Y):Rp(u)}}function Rp(u){for(;Xr!==null;){var g=Xr;if((g.flags&8772)!==0){var C=g.alternate;try{if((g.flags&8772)!==0)switch(g.tag){case 0:case 11:case 15:$a||Jo(5,g);break;case 1:var k=g.stateNode;if(g.flags&4&&!$a)if(C===null)k.componentDidMount();else{var G=g.elementType===g.type?C.memoizedProps:hi(g.type,C.memoizedProps);k.componentDidUpdate(G,C.memoizedState,k.__reactInternalSnapshotBeforeUpdate)}var Y=g.updateQueue;Y!==null&&Io(g,Y,k);break;case 3:var be=g.updateQueue;if(be!==null){if(C=null,g.child!==null)switch(g.child.tag){case 5:C=g.child.stateNode;break;case 1:C=g.child.stateNode}Io(g,be,C)}break;case 5:var At=g.stateNode;if(C===null&&g.flags&4){C=At;var wt=g.memoizedProps;switch(g.type){case"button":case"input":case"select":case"textarea":wt.autoFocus&&C.focus();break;case"img":wt.src&&(C.src=wt.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(g.memoizedState===null){var jt=g.alternate;if(jt!==null){var dr=jt.memoizedState;if(dr!==null){var yr=dr.dehydrated;yr!==null&&Aa(yr)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(i(163))}$a||g.flags&512&&hf(g)}catch(ur){no(g,g.return,ur)}}if(g===u){Xr=null;break}if(C=g.sibling,C!==null){C.return=g.return,Xr=C;break}Xr=g.return}}function Hu(u){for(;Xr!==null;){var g=Xr;if(g===u){Xr=null;break}var C=g.sibling;if(C!==null){C.return=g.return,Xr=C;break}Xr=g.return}}function Wh(u){for(;Xr!==null;){var g=Xr;try{switch(g.tag){case 0:case 11:case 15:var C=g.return;try{Jo(4,g)}catch(wt){no(g,C,wt)}break;case 1:var k=g.stateNode;if(typeof k.componentDidMount=="function"){var G=g.return;try{k.componentDidMount()}catch(wt){no(g,G,wt)}}var Y=g.return;try{hf(g)}catch(wt){no(g,Y,wt)}break;case 5:var be=g.return;try{hf(g)}catch(wt){no(g,be,wt)}}}catch(wt){no(g,g.return,wt)}if(g===u){Xr=null;break}var At=g.sibling;if(At!==null){At.return=g.return,Xr=At;break}Xr=g.return}}var Jy=Math.ceil,mf=he.ReactCurrentDispatcher,Np=he.ReactCurrentOwner,Wc=he.ReactCurrentBatchConfig,yi=0,ta=null,_o=null,To=0,mc=0,gh=Qa(0),zs=0,Ld=null,Hi=0,gu=0,gf=0,ju=null,wa=null,yh=0,vh=1/0,ZA=null,Vu=!1,Md=null,gc=null,_h=!1,yc=null,Gu=0,kd=0,yf=null,XA=-1,vf=0;function Wa(){return(yi&6)!==0?fi():XA!==-1?XA:XA=fi()}function Zc(u){return(u.mode&1)===0?1:(yi&2)!==0&&To!==0?To&-To:pi.transition!==null?(vf===0&&(vf=nA()),vf):(u=Kn,u!==0||(u=window.event,u=u===void 0?16:ha(u.type)),u)}function vc(u,g,C,k){if(50<kd)throw kd=0,yf=null,Error(i(185));rc(u,C,k),((yi&2)===0||u!==ta)&&(u===ta&&((yi&2)===0&&(gu|=C),zs===4&&Ku(u,To)),_l(u,k),C===1&&yi===0&&(g.mode&1)===0&&(vh=fi()+500,jA&&te()))}function _l(u,g){var C=u.callbackNode;ys(u,g);var k=Fc(u,u===ta?To:0);if(k===0)C!==null&&al(C),u.callbackNode=null,u.callbackPriority=0;else if(g=k&-k,u.callbackPriority!==g){if(C!=null&&al(C),g===1)u.tag===0?$(hg.bind(null,u)):R(hg.bind(null,u)),jh(function(){(yi&6)===0&&te()}),C=null;else{switch(Fl(k)){case 1:C=Sl;break;case 4:C=Ci;break;case 16:C=jn;break;case 536870912:C=ll;break;default:C=jn}C=vg(C,Qp.bind(null,u))}u.callbackPriority=g,u.callbackNode=C}}function Qp(u,g){if(XA=-1,vf=0,(yi&6)!==0)throw Error(i(327));var C=u.callbackNode;if(Ch()&&u.callbackNode!==C)return null;var k=Fc(u,u===ta?To:0);if(k===0)return null;if((k&30)!==0||(k&u.expiredLanes)!==0||g)g=xf(u,k);else{g=k;var G=yi;yi|=2;var Y=fg();(ta!==u||To!==g)&&(ZA=null,vh=fi()+500,bh(u,g));do try{Ud();break}catch(At){dg(u,At)}while(!0);Yn(),mf.current=Y,yi=G,_o!==null?g=0:(ta=null,To=0,g=zs)}if(g!==0){if(g===2&&(G=Oo(u),G!==0&&(k=G,g=Op(u,G))),g===1)throw C=Ld,bh(u,0),Ku(u,k),_l(u,fi()),C;if(g===6)Ku(u,k);else{if(G=u.current.alternate,(k&30)===0&&!ev(G)&&(g=xf(u,k),g===2&&(Y=Oo(u),Y!==0&&(k=Y,g=Op(u,Y))),g===1))throw C=Ld,bh(u,0),Ku(u,k),_l(u,fi()),C;switch(u.finishedWork=G,u.finishedLanes=k,g){case 0:case 1:throw Error(i(345));case 2:Bh(u,wa,ZA);break;case 3:if(Ku(u,k),(k&130023424)===k&&(g=yh+500-fi(),10<g)){if(Fc(u,0)!==0)break;if(G=u.suspendedLanes,(G&k)!==k){Wa(),u.pingedLanes|=u.suspendedLanes&G;break}u.timeoutHandle=dA(Bh.bind(null,u,wa,ZA),g);break}Bh(u,wa,ZA);break;case 4:if(Ku(u,k),(k&4194240)===k)break;for(g=u.eventTimes,G=-1;0<k;){var be=31-fs(k);Y=1<<be,be=g[be],be>G&&(G=be),k&=~Y}if(k=G,k=fi()-k,k=(120>k?120:480>k?480:1080>k?1080:1920>k?1920:3e3>k?3e3:4320>k?4320:1960*Jy(k/1960))-k,10<k){u.timeoutHandle=dA(Bh.bind(null,u,wa,ZA),k);break}Bh(u,wa,ZA);break;case 5:Bh(u,wa,ZA);break;default:throw Error(i(329))}}}return _l(u,fi()),u.callbackNode===C?Qp.bind(null,u):null}function Op(u,g){var C=ju;return u.current.memoizedState.isDehydrated&&(bh(u,g).flags|=256),u=xf(u,g),u!==2&&(g=wa,wa=C,g!==null&&zp(g)),u}function zp(u){wa===null?wa=u:wa.push.apply(wa,u)}function ev(u){for(var g=u;;){if(g.flags&16384){var C=g.updateQueue;if(C!==null&&(C=C.stores,C!==null))for(var k=0;k<C.length;k++){var G=C[k],Y=G.getSnapshot;G=G.value;try{if(!os(Y(),G))return!1}catch{return!1}}}if(C=g.child,g.subtreeFlags&16384&&C!==null)C.return=g,g=C;else{if(g===u)break;for(;g.sibling===null;){if(g.return===null||g.return===u)return!0;g=g.return}g.sibling.return=g.return,g=g.sibling}}return!0}function Ku(u,g){for(g&=~gf,g&=~gu,u.suspendedLanes|=g,u.pingedLanes&=~g,u=u.expirationTimes;0<g;){var C=31-fs(g),k=1<<C;u[C]=-1,g&=~k}}function hg(u){if((yi&6)!==0)throw Error(i(327));Ch();var g=Fc(u,0);if((g&1)===0)return _l(u,fi()),null;var C=xf(u,g);if(u.tag!==0&&C===2){var k=Oo(u);k!==0&&(g=k,C=Op(u,k))}if(C===1)throw C=Ld,bh(u,0),Ku(u,g),_l(u,fi()),C;if(C===6)throw Error(i(345));return u.finishedWork=u.current.alternate,u.finishedLanes=g,Bh(u,wa,ZA),_l(u,fi()),null}function wh(u,g){var C=yi;yi|=1;try{return u(g)}finally{yi=C,yi===0&&(vh=fi()+500,jA&&te())}}function xh(u){yc!==null&&yc.tag===0&&(yi&6)===0&&Ch();var g=yi;yi|=1;var C=Wc.transition,k=Kn;try{if(Wc.transition=null,Kn=1,u)return u()}finally{Kn=k,Wc.transition=C,yi=g,(yi&6)===0&&te()}}function _f(){mc=gh.current,li(gh)}function bh(u,g){u.finishedWork=null,u.finishedLanes=0;var C=u.timeoutHandle;if(C!==-1&&(u.timeoutHandle=-1,uu(C)),_o!==null)for(C=_o.return;C!==null;){var k=C;switch(Ut(k),k.tag){case 1:k=k.type.childContextTypes,k!=null&&du();break;case 3:ja(),li(Xs),li(Ns),fu();break;case 5:VA(k);break;case 4:ja();break;case 13:li(gi);break;case 19:li(gi);break;case 10:gr(k.type._context);break;case 22:case 23:_f()}C=C.return}if(ta=u,_o=u=yu(u.current,null),To=mc=g,zs=0,Ld=null,gf=gu=Hi=0,wa=ju=null,ei!==null){for(g=0;g<ei.length;g++)if(C=ei[g],k=C.interleaved,k!==null){C.interleaved=null;var G=k.next,Y=C.pending;if(Y!==null){var be=Y.next;Y.next=G,k.next=be}C.pending=k}ei=null}return u}function dg(u,g){do{var C=_o;try{if(Yn(),jl.current=Is,Kc){for(var k=bi.memoizedState;k!==null;){var G=k.queue;G!==null&&(G.pending=null),k=k.next}Kc=!1}if(Va=0,es=Ui=bi=null,Ga=!1,qc=0,Np.current=null,C===null||C.return===null){zs=1,Ld=g,_o=null;break}e:{var Y=u,be=C.return,At=C,wt=g;if(g=To,At.flags|=32768,wt!==null&&typeof wt=="object"&&typeof wt.then=="function"){var jt=wt,dr=At,yr=dr.tag;if((dr.mode&1)===0&&(yr===0||yr===11||yr===15)){var ur=dr.alternate;ur?(dr.updateQueue=ur.updateQueue,dr.memoizedState=ur.memoizedState,dr.lanes=ur.lanes):(dr.updateQueue=null,dr.memoizedState=null)}var Qr=ro(be);if(Qr!==null){Qr.flags&=-257,Ka(Qr,be,At,Y,g),Qr.mode&1&&Os(Y,jt,g),g=Qr,wt=jt;var en=g.updateQueue;if(en===null){var Gr=new Set;Gr.add(wt),g.updateQueue=Gr}else en.add(wt);break e}else{if((g&1)===0){Os(Y,jt,g),wf();break e}wt=Error(i(426))}}else if(tr&&At.mode&1){var Ps=ro(be);if(Ps!==null){(Ps.flags&65536)===0&&(Ps.flags|=256),Ka(Ps,be,At,Y,g),Fr(pc(wt,At));break e}}Y=wt=pc(wt,At),zs!==4&&(zs=2),ju===null?ju=[Y]:ju.push(Y),Y=be;do{switch(Y.tag){case 3:Y.flags|=65536,g&=-g,Y.lanes|=g;var Nt=vo(Y,wt,g);xi(Y,Nt);break e;case 1:At=wt;var Et=Y.type,zt=Y.stateNode;if((Y.flags&128)===0&&(typeof Et.getDerivedStateFromError=="function"||zt!==null&&typeof zt.componentDidCatch=="function"&&(gc===null||!gc.has(zt)))){Y.flags|=65536,g&=-g,Y.lanes|=g;var Br=vl(Y,At,g);xi(Y,Br);break e}}Y=Y.return}while(Y!==null)}pg(C)}catch(ln){g=ln,_o===C&&C!==null&&(_o=C=C.return);continue}break}while(!0)}function fg(){var u=mf.current;return mf.current=Is,u===null?Is:u}function wf(){(zs===0||zs===3||zs===2)&&(zs=4),ta===null||(Hi&268435455)===0&&(gu&268435455)===0||Ku(ta,To)}function xf(u,g){var C=yi;yi|=2;var k=fg();(ta!==u||To!==g)&&(ZA=null,bh(u,g));do try{Hp();break}catch(G){dg(u,G)}while(!0);if(Yn(),yi=C,mf.current=k,_o!==null)throw Error(i(261));return ta=null,To=0,zs}function Hp(){for(;_o!==null;)bf(_o)}function Ud(){for(;_o!==null&&!ec();)bf(_o)}function bf(u){var g=yg(u.alternate,u,mc);u.memoizedProps=u.pendingProps,g===null?pg(u):_o=g,Np.current=null}function pg(u){var g=u;do{var C=g.alternate;if(u=g.return,(g.flags&32768)===0){if(C=ag(C,g,mc),C!==null){_o=C;return}}else{if(C=lg(C,g),C!==null){C.flags&=32767,_o=C;return}if(u!==null)u.flags|=32768,u.subtreeFlags=0,u.deletions=null;else{zs=6,_o=null;return}}if(g=g.sibling,g!==null){_o=g;return}_o=g=u}while(g!==null);zs===0&&(zs=5)}function Bh(u,g,C){var k=Kn,G=Wc.transition;try{Wc.transition=null,Kn=1,mg(u,g,C,k)}finally{Wc.transition=G,Kn=k}return null}function mg(u,g,C,k){do Ch();while(yc!==null);if((yi&6)!==0)throw Error(i(327));C=u.finishedWork;var G=u.finishedLanes;if(C===null)return null;if(u.finishedWork=null,u.finishedLanes=0,C===u.current)throw Error(i(177));u.callbackNode=null,u.callbackPriority=0;var Y=C.lanes|C.childLanes;if(Ca(u,Y),u===ta&&(_o=ta=null,To=0),(C.subtreeFlags&2064)===0&&(C.flags&2064)===0||_h||(_h=!0,vg(jn,function(){return Ch(),null})),Y=(C.flags&15990)!==0,(C.subtreeFlags&15990)!==0||Y){Y=Wc.transition,Wc.transition=null;var be=Kn;Kn=1;var At=yi;yi|=4,Np.current=null,Pp(u,C),ug(C,u),Lc(hA),ic=!!dc,hA=dc=null,u.current=C,ff(C),Ec(),yi=At,Kn=be,Wc.transition=Y}else u.current=C;if(_h&&(_h=!1,yc=u,Gu=G),Y=u.pendingLanes,Y===0&&(gc=null),Ro(C.stateNode),_l(u,fi()),g!==null)for(k=u.onRecoverableError,C=0;C<g.length;C++)G=g[C],k(G.value,{componentStack:G.stack,digest:G.digest});if(Vu)throw Vu=!1,u=Md,Md=null,u;return(Gu&1)!==0&&u.tag!==0&&Ch(),Y=u.pendingLanes,(Y&1)!==0?u===yf?kd++:(kd=0,yf=u):kd=0,te(),null}function Ch(){if(yc!==null){var u=Fl(Gu),g=Wc.transition,C=Kn;try{if(Wc.transition=null,Kn=16>u?16:u,yc===null)var k=!1;else{if(u=yc,yc=null,Gu=0,(yi&6)!==0)throw Error(i(331));var G=yi;for(yi|=4,Xr=u.current;Xr!==null;){var Y=Xr,be=Y.child;if((Xr.flags&16)!==0){var At=Y.deletions;if(At!==null){for(var wt=0;wt<At.length;wt++){var jt=At[wt];for(Xr=jt;Xr!==null;){var dr=Xr;switch(dr.tag){case 0:case 11:case 15:mu(8,dr,Y)}var yr=dr.child;if(yr!==null)yr.return=dr,Xr=yr;else for(;Xr!==null;){dr=Xr;var ur=dr.sibling,Qr=dr.return;if(df(dr),dr===jt){Xr=null;break}if(ur!==null){ur.return=Qr,Xr=ur;break}Xr=Qr}}}var en=Y.alternate;if(en!==null){var Gr=en.child;if(Gr!==null){en.child=null;do{var Ps=Gr.sibling;Gr.sibling=null,Gr=Ps}while(Gr!==null)}}Xr=Y}}if((Y.subtreeFlags&2064)!==0&&be!==null)be.return=Y,Xr=be;else e:for(;Xr!==null;){if(Y=Xr,(Y.flags&2048)!==0)switch(Y.tag){case 0:case 11:case 15:mu(9,Y,Y.return)}var Nt=Y.sibling;if(Nt!==null){Nt.return=Y.return,Xr=Nt;break e}Xr=Y.return}}var Et=u.current;for(Xr=Et;Xr!==null;){be=Xr;var zt=be.child;if((be.subtreeFlags&2064)!==0&&zt!==null)zt.return=be,Xr=zt;else e:for(be=Et;Xr!==null;){if(At=Xr,(At.flags&2048)!==0)try{switch(At.tag){case 0:case 11:case 15:Jo(9,At)}}catch(ln){no(At,At.return,ln)}if(At===be){Xr=null;break e}var Br=At.sibling;if(Br!==null){Br.return=At.return,Xr=Br;break e}Xr=At.return}}if(yi=G,te(),Us&&typeof Us.onPostCommitFiberRoot=="function")try{Us.onPostCommitFiberRoot(cl,u)}catch{}k=!0}return k}finally{Kn=C,Wc.transition=g}}return!1}function gg(u,g,C){g=pc(C,g),g=vo(u,g,1),u=In(u,g,1),g=Wa(),u!==null&&(rc(u,1,g),_l(u,g))}function no(u,g,C){if(u.tag===3)gg(u,u,C);else for(;g!==null;){if(g.tag===3){gg(g,u,C);break}else if(g.tag===1){var k=g.stateNode;if(typeof g.type.getDerivedStateFromError=="function"||typeof k.componentDidCatch=="function"&&(gc===null||!gc.has(k))){u=pc(C,u),u=vl(g,u,1),g=In(g,u,1),u=Wa(),g!==null&&(rc(g,1,u),_l(g,u));break}}g=g.return}}function Dd(u,g,C){var k=u.pingCache;k!==null&&k.delete(g),g=Wa(),u.pingedLanes|=u.suspendedLanes&C,ta===u&&(To&C)===C&&(zs===4||zs===3&&(To&130023424)===To&&500>fi()-yh?bh(u,0):gf|=C),_l(u,g)}function jp(u,g){g===0&&((u.mode&1)===0?g=1:(g=No,No<<=1,(No&130023424)===0&&(No=4194304)));var C=Wa();u=wi(u,g),u!==null&&(rc(u,g,C),_l(u,C))}function tv(u){var g=u.memoizedState,C=0;g!==null&&(C=g.retryLane),jp(u,C)}function rv(u,g){var C=0;switch(u.tag){case 13:var k=u.stateNode,G=u.memoizedState;G!==null&&(C=G.retryLane);break;case 19:k=u.stateNode;break;default:throw Error(i(314))}k!==null&&k.delete(g),jp(u,C)}var yg;yg=function(u,g,C){if(u!==null)if(u.memoizedProps!==g.pendingProps||Xs.current)qa=!0;else{if((u.lanes&C)===0&&(g.flags&128)===0)return qa=!1,Yy(u,g,C);qa=(u.flags&131072)!==0}else qa=!1,tr&&(g.flags&1048576)!==0&&Tt(g,Te,g.index);switch(g.lanes=0,g.tag){case 2:var k=g.type;mh(u,g),u=g.pendingProps;var G=Vc(g,Ns.current);Ti(g,C),G=f(null,g,k,u,G,C);var Y=y();return g.flags|=1,typeof G=="object"&&G!==null&&typeof G.render=="function"&&G.$$typeof===void 0?(g.tag=1,g.memoizedState=null,g.updateQueue=null,go(k)?(Y=!0,Oa(g)):Y=!1,g.memoizedState=G.state!==null&&G.state!==void 0?G.state:null,Ys(g),G.updater=yo,g.stateNode=G,G._reactInternals=g,zu(g,k,u,C),g=hh(null,g,k,!0,Y,C)):(g.tag=0,tr&&Y&&Zt(g),Xo(null,g,G,C),g=g.child),g;case 16:k=g.elementType;e:{switch(mh(u,g),u=g.pendingProps,G=k._init,k=G(k._payload),g.type=k,G=g.tag=_g(k),u=hi(k,u),G){case 0:g=Gh(null,g,k,u,C);break e;case 1:g=uh(null,g,k,u,C);break e;case 11:g=Vh(null,g,k,u,C);break e;case 14:g=Sd(null,g,k,hi(k.type,u),C);break e}throw Error(i(306,k,""))}return g;case 0:return k=g.type,G=g.pendingProps,G=g.elementType===k?G:hi(k,G),Gh(u,g,k,G,C);case 1:return k=g.type,G=g.pendingProps,G=g.elementType===k?G:hi(k,G),uh(u,g,k,G,C);case 3:e:{if(pu(g),u===null)throw Error(i(387));k=g.pendingProps,Y=g.memoizedState,G=Y.element,Fo(u,g),Ss(g,k,null,C);var be=g.memoizedState;if(k=be.element,Y.isDehydrated)if(Y={element:k,isDehydrated:!1,cache:be.cache,pendingSuspenseBoundaries:be.pendingSuspenseBoundaries,transitions:be.transitions},g.updateQueue.baseState=Y,g.memoizedState=Y,g.flags&256){G=pc(Error(i(423)),g),g=Kh(u,g,k,C,G);break e}else if(k!==G){G=pc(Error(i(424)),g),g=Kh(u,g,k,C,G);break e}else for($t=po(g.stateNode.containerInfo.firstChild),Kt=g,tr=!0,er=null,C=Qi(g,null,k,C),g.child=C;C;)C.flags=C.flags&-3|4096,C=C.sibling;else{if(Hr(),k===G){g=$c(u,g,C);break e}Xo(u,g,k,C)}g=g.child}return g;case 5:return Hl(g),u===null&&Zr(g),k=g.type,G=g.pendingProps,Y=u!==null?u.memoizedProps:null,be=G.children,Ru(k,G)?be=null:Y!==null&&Ru(k,Y)&&(g.flags|=32),gA(u,g),Xo(u,g,be,C),g.child;case 6:return u===null&&Zr(g),null;case 13:return rg(u,g,C);case 4:return Gc(g,g.stateNode.containerInfo),k=g.pendingProps,u===null?g.child=ls(g,null,k,C):Xo(u,g,k,C),g.child;case 11:return k=g.type,G=g.pendingProps,G=g.elementType===k?G:hi(k,G),Vh(u,g,k,G,C);case 7:return Xo(u,g,g.pendingProps,C),g.child;case 8:return Xo(u,g,g.pendingProps.children,C),g.child;case 12:return Xo(u,g,g.pendingProps.children,C),g.child;case 10:e:{if(k=g.type._context,G=g.pendingProps,Y=g.memoizedProps,be=G.value,Xn(Bs,k._currentValue),k._currentValue=be,Y!==null)if(os(Y.value,be)){if(Y.children===G.children&&!Xs.current){g=$c(u,g,C);break e}}else for(Y=g.child,Y!==null&&(Y.return=g);Y!==null;){var At=Y.dependencies;if(At!==null){be=Y.child;for(var wt=At.firstContext;wt!==null;){if(wt.context===k){if(Y.tag===1){wt=ki(-1,C&-C),wt.tag=2;var jt=Y.updateQueue;if(jt!==null){jt=jt.shared;var dr=jt.pending;dr===null?wt.next=wt:(wt.next=dr.next,dr.next=wt),jt.pending=wt}}Y.lanes|=C,wt=Y.alternate,wt!==null&&(wt.lanes|=C),xr(Y.return,C,g),At.lanes|=C;break}wt=wt.next}}else if(Y.tag===10)be=Y.type===g.type?null:Y.child;else if(Y.tag===18){if(be=Y.return,be===null)throw Error(i(341));be.lanes|=C,At=be.alternate,At!==null&&(At.lanes|=C),xr(be,C,g),be=Y.sibling}else be=Y.child;if(be!==null)be.return=Y;else for(be=Y;be!==null;){if(be===g){be=null;break}if(Y=be.sibling,Y!==null){Y.return=be.return,be=Y;break}be=be.return}Y=be}Xo(u,g,G.children,C),g=g.child}return g;case 9:return G=g.type,k=g.pendingProps.children,Ti(g,C),G=Vi(G),k=k(G),g.flags|=1,Xo(u,g,k,C),g.child;case 14:return k=g.type,G=hi(k,g.pendingProps),G=hi(k.type,G),Sd(u,g,k,G,C);case 15:return KA(u,g,g.type,g.pendingProps,C);case 17:return k=g.type,G=g.pendingProps,G=g.elementType===k?G:hi(k,G),mh(u,g),g.tag=1,go(k)?(u=!0,Oa(g)):u=!1,Ti(g,C),mA(g,k,G),zu(g,k,G,C),hh(null,g,k,!0,u,C);case 19:return ph(u,g,C);case 22:return qA(u,g,C)}throw Error(i(156,g.tag))};function vg(u,g){return ol(u,g)}function nv(u,g,C,k){this.tag=u,this.key=C,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=g,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=k,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function _c(u,g,C,k){return new nv(u,g,C,k)}function Rd(u){return u=u.prototype,!(!u||!u.isReactComponent)}function _g(u){if(typeof u=="function")return Rd(u)?1:0;if(u!=null){if(u=u.$$typeof,u===_e)return 11;if(u===pt)return 14}return 2}function yu(u,g){var C=u.alternate;return C===null?(C=_c(u.tag,g,u.key,u.mode),C.elementType=u.elementType,C.type=u.type,C.stateNode=u.stateNode,C.alternate=u,u.alternate=C):(C.pendingProps=g,C.type=u.type,C.flags=0,C.subtreeFlags=0,C.deletions=null),C.flags=u.flags&14680064,C.childLanes=u.childLanes,C.lanes=u.lanes,C.child=u.child,C.memoizedProps=u.memoizedProps,C.memoizedState=u.memoizedState,C.updateQueue=u.updateQueue,g=u.dependencies,C.dependencies=g===null?null:{lanes:g.lanes,firstContext:g.firstContext},C.sibling=u.sibling,C.index=u.index,C.ref=u.ref,C}function Nd(u,g,C,k,G,Y){var be=2;if(k=u,typeof u=="function")Rd(u)&&(be=1);else if(typeof u=="string")be=5;else e:switch(u){case Me:return Eh(C.children,G,Y,g);case Pe:be=8,G|=8;break;case xe:return u=_c(12,C,g,G|2),u.elementType=xe,u.lanes=Y,u;case Ue:return u=_c(13,C,g,G),u.elementType=Ue,u.lanes=Y,u;case Fe:return u=_c(19,C,g,G),u.elementType=Fe,u.lanes=Y,u;case Je:return Sh(C,G,Y,g);default:if(typeof u=="object"&&u!==null)switch(u.$$typeof){case nt:be=10;break e;case pe:be=9;break e;case _e:be=11;break e;case pt:be=14;break e;case ht:be=16,k=null;break e}throw Error(i(130,u==null?u:typeof u,""))}return g=_c(be,C,g,G),g.elementType=u,g.type=k,g.lanes=Y,g}function Eh(u,g,C,k){return u=_c(7,u,k,g),u.lanes=C,u}function Sh(u,g,C,k){return u=_c(22,u,k,g),u.elementType=Je,u.lanes=C,u.stateNode={isHidden:!1},u}function Vp(u,g,C){return u=_c(6,u,null,g),u.lanes=C,u}function Bf(u,g,C){return g=_c(4,u.children!==null?u.children:[],u.key,g),g.lanes=C,g.stateNode={containerInfo:u.containerInfo,pendingChildren:null,implementation:u.implementation},g}function iv(u,g,C,k,G){this.tag=g,this.containerInfo=u,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=iA(0),this.expirationTimes=iA(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=iA(0),this.identifierPrefix=k,this.onRecoverableError=G,this.mutableSourceEagerHydrationData=null}function Gp(u,g,C,k,G,Y,be,At,wt){return u=new iv(u,g,C,At,wt),g===1?(g=1,Y===!0&&(g|=8)):g=0,Y=_c(3,null,null,g),u.current=Y,Y.stateNode=u,Y.memoizedState={element:k,isDehydrated:C,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ys(Y),u}function sv(u,g,C){var k=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ve,key:k==null?null:""+k,children:u,containerInfo:g,implementation:C}}function Kp(u){if(!u)return zl;u=u._reactInternals;e:{if(nn(u)!==u||u.tag!==1)throw Error(i(170));var g=u;do{switch(g.tag){case 3:g=g.stateNode.context;break e;case 1:if(go(g.type)){g=g.stateNode.__reactInternalMemoizedMergedChildContext;break e}}g=g.return}while(g!==null);throw Error(i(171))}if(u.tag===1){var C=u.type;if(go(C))return fA(u,C,g)}return g}function wg(u,g,C,k,G,Y,be,At,wt){return u=Gp(C,k,!0,u,G,Y,be,At,wt),u.context=Kp(null),C=u.current,k=Wa(),G=Zc(C),Y=ki(k,G),Y.callback=g??null,In(C,Y,G),u.current.lanes=G,rc(u,G,k),_l(u,k),u}function Cf(u,g,C,k){var G=g.current,Y=Wa(),be=Zc(G);return C=Kp(C),g.context===null?g.context=C:g.pendingContext=C,g=ki(Y,be),g.payload={element:u},k=k===void 0?null:k,k!==null&&(g.callback=k),u=In(G,g,be),u!==null&&(vc(u,G,be,Y),Vn(u,G,be)),be}function Hs(u){if(u=u.current,!u.child)return null;switch(u.child.tag){case 5:return u.child.stateNode;default:return u.child.stateNode}}function Zh(u,g){if(u=u.memoizedState,u!==null&&u.dehydrated!==null){var C=u.retryLane;u.retryLane=C!==0&&C<g?C:g}}function qp(u,g){Zh(u,g),(u=u.alternate)&&Zh(u,g)}function ov(){return null}var $p=typeof reportError=="function"?reportError:function(u){console.error(u)};function Ef(u){this._internalRoot=u}Sf.prototype.render=Ef.prototype.render=function(u){var g=this._internalRoot;if(g===null)throw Error(i(409));Cf(u,g,null,null)},Sf.prototype.unmount=Ef.prototype.unmount=function(){var u=this._internalRoot;if(u!==null){this._internalRoot=null;var g=u.containerInfo;xh(function(){Cf(null,u,null,null)}),g[Rs]=null}};function Sf(u){this._internalRoot=u}Sf.prototype.unstable_scheduleHydration=function(u){if(u){var g=Ic();u={blockedOn:null,target:u,priority:g};for(var C=0;C<Jn.length&&g!==0&&g<Jn[C].priority;C++);Jn.splice(C,0,u),C===0&&uo(u)}};function Ff(u){return!(!u||u.nodeType!==1&&u.nodeType!==9&&u.nodeType!==11)}function Qd(u){return!(!u||u.nodeType!==1&&u.nodeType!==9&&u.nodeType!==11&&(u.nodeType!==8||u.nodeValue!==" react-mount-point-unstable "))}function Fh(){}function Wp(u,g,C,k,G){if(G){if(typeof k=="function"){var Y=k;k=function(){var jt=Hs(be);Y.call(jt)}}var be=wg(g,k,u,0,null,!1,!1,"",Fh);return u._reactRootContainer=be,u[Rs]=be.current,uc(u.nodeType===8?u.parentNode:u),xh(),be}for(;G=u.lastChild;)u.removeChild(G);if(typeof k=="function"){var At=k;k=function(){var jt=Hs(wt);At.call(jt)}}var wt=Gp(u,0,!1,null,null,!1,!1,"",Fh);return u._reactRootContainer=wt,u[Rs]=wt.current,uc(u.nodeType===8?u.parentNode:u),xh(function(){Cf(g,wt,C,k)}),wt}function Od(u,g,C,k,G){var Y=C._reactRootContainer;if(Y){var be=Y;if(typeof G=="function"){var At=G;G=function(){var wt=Hs(be);At.call(wt)}}Cf(g,be,u,G)}else be=Wp(C,g,u,G,k);return Hs(be)}nc=function(u){switch(u.tag){case 3:var g=u.stateNode;if(g.current.memoizedState.isDehydrated){var C=Qo(g.pendingLanes);C!==0&&(TA(g,C|1),_l(g,fi()),(yi&6)===0&&(vh=fi()+500,te()))}break;case 13:xh(function(){var k=wi(u,1);if(k!==null){var G=Wa();vc(k,u,1,G)}}),qp(u,1)}},Il=function(u){if(u.tag===13){var g=wi(u,134217728);if(g!==null){var C=Wa();vc(g,u,134217728,C)}qp(u,134217728)}},PA=function(u){if(u.tag===13){var g=Zc(u),C=wi(u,g);if(C!==null){var k=Wa();vc(C,u,g,k)}qp(u,g)}},Ic=function(){return Kn},ca=function(u,g){var C=Kn;try{return Kn=u,g()}finally{Kn=C}},fr=function(u,g,C){switch(g){case"input":if(Ur(u,C),g=C.name,C.type==="radio"&&g!=null){for(C=u;C.parentNode;)C=C.parentNode;for(C=C.querySelectorAll("input[name="+JSON.stringify(""+g)+'][type="radio"]'),g=0;g<C.length;g++){var k=C[g];if(k!==u&&k.form===u.form){var G=HA(k);if(!G)throw Error(i(90));ar(k),Ur(k,G)}}}break;case"textarea":On(u,C);break;case"select":g=C.value,g!=null&&Sr(u,!!C.multiple,g,!1)}},mr=wh,Kr=xh;var xg={usingClientEntryPoint:!1,Events:[Ra,Na,HA,tn,Nr,wh]},qu={findFiberByHostInstance:Da,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Xh={bundleType:qu.bundleType,version:qu.version,rendererPackageName:qu.rendererPackageName,rendererConfig:qu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:he.ReactCurrentDispatcher,findHostInstanceByFiber:function(u){return u=ks(u),u===null?null:u.stateNode},findFiberByHostInstance:qu.findFiberByHostInstance||ov,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var zd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!zd.isDisabled&&zd.supportsFiber)try{cl=zd.inject(Xh),Us=zd}catch{}}return Yc.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=xg,Yc.createPortal=function(u,g){var C=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Ff(g))throw Error(i(200));return sv(u,g,null,C)},Yc.createRoot=function(u,g){if(!Ff(u))throw Error(i(299));var C=!1,k="",G=$p;return g!=null&&(g.unstable_strictMode===!0&&(C=!0),g.identifierPrefix!==void 0&&(k=g.identifierPrefix),g.onRecoverableError!==void 0&&(G=g.onRecoverableError)),g=Gp(u,1,!1,null,null,C,!1,k,G),u[Rs]=g.current,uc(u.nodeType===8?u.parentNode:u),new Ef(g)},Yc.findDOMNode=function(u){if(u==null)return null;if(u.nodeType===1)return u;var g=u._reactInternals;if(g===void 0)throw typeof u.render=="function"?Error(i(188)):(u=Object.keys(u).join(","),Error(i(268,u)));return u=ks(g),u=u===null?null:u.stateNode,u},Yc.flushSync=function(u){return xh(u)},Yc.hydrate=function(u,g,C){if(!Qd(g))throw Error(i(200));return Od(null,u,g,!0,C)},Yc.hydrateRoot=function(u,g,C){if(!Ff(u))throw Error(i(405));var k=C!=null&&C.hydratedSources||null,G=!1,Y="",be=$p;if(C!=null&&(C.unstable_strictMode===!0&&(G=!0),C.identifierPrefix!==void 0&&(Y=C.identifierPrefix),C.onRecoverableError!==void 0&&(be=C.onRecoverableError)),g=wg(g,null,u,1,C??null,G,!1,Y,be),u[Rs]=g.current,uc(u),k)for(u=0;u<k.length;u++)C=k[u],G=C._getVersion,G=G(C._source),g.mutableSourceEagerHydrationData==null?g.mutableSourceEagerHydrationData=[C,G]:g.mutableSourceEagerHydrationData.push(C,G);return new Sf(g)},Yc.render=function(u,g,C){if(!Qd(g))throw Error(i(200));return Od(null,u,g,!1,C)},Yc.unmountComponentAtNode=function(u){if(!Qd(u))throw Error(i(40));return u._reactRootContainer?(xh(function(){Od(null,null,u,!1,function(){u._reactRootContainer=null,u[Rs]=null})}),!0):!1},Yc.unstable_batchedUpdates=wh,Yc.unstable_renderSubtreeIntoContainer=function(u,g,C,k){if(!Qd(C))throw Error(i(200));if(u==null||u._reactInternals===void 0)throw Error(i(38));return Od(u,g,C,!1,k)},Yc.version="18.3.1-next-f1338f8080-20240426",Yc}var Rb;function l5(){if(Rb)return jv.exports;Rb=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(n){console.error(n)}}return e(),jv.exports=HT(),jv.exports}var Nb;function jT(){if(Nb)return Qg;Nb=1;var e=l5();return Qg.createRoot=e.createRoot,Qg.hydrateRoot=e.hydrateRoot,Qg}var VT=jT(),re=mw();const Pr=pw(re),fy=DT({__proto__:null,default:Pr},[re]),GT=1,KT=1e6;let Kv=0;function qT(){return Kv=(Kv+1)%Number.MAX_SAFE_INTEGER,Kv.toString()}const qv=new Map,Qb=e=>{if(qv.has(e))return;const n=setTimeout(()=>{qv.delete(e),Cm({type:"REMOVE_TOAST",toastId:e})},KT);qv.set(e,n)},$T=(e,n)=>{switch(n.type){case"ADD_TOAST":return{...e,toasts:[n.toast,...e.toasts].slice(0,GT)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(i=>i.id===n.toast.id?{...i,...n.toast}:i)};case"DISMISS_TOAST":{const{toastId:i}=n;return i?Qb(i):e.toasts.forEach(l=>{Qb(l.id)}),{...e,toasts:e.toasts.map(l=>l.id===i||i===void 0?{...l,open:!1}:l)}}case"REMOVE_TOAST":return n.toastId===void 0?{...e,toasts:[]}:{...e,toasts:e.toasts.filter(i=>i.id!==n.toastId)}}},I0=[];let T0={toasts:[]};function Cm(e){T0=$T(T0,e),I0.forEach(n=>{n(T0)})}function i_({...e}){const n=qT(),i=h=>Cm({type:"UPDATE_TOAST",toast:{...h,id:n}}),l=()=>Cm({type:"DISMISS_TOAST",toastId:n});return Cm({type:"ADD_TOAST",toast:{...e,id:n,open:!0,onOpenChange:h=>{h||l()}}}),{id:n,dismiss:l,update:i}}function WT(){const[e,n]=re.useState(T0);return re.useEffect(()=>(I0.push(n),()=>{const i=I0.indexOf(n);i>-1&&I0.splice(i,1)}),[e]),{...e,toast:i_,dismiss:i=>Cm({type:"DISMISS_TOAST",toastId:i})}}var _p=l5();const c5=pw(_p);function Un(e,n,{checkForDefaultPrevented:i=!0}={}){return function(h){if(e?.(h),i===!1||!h.defaultPrevented)return n?.(h)}}function Ob(e,n){if(typeof e=="function")return e(n);e!=null&&(e.current=n)}function Gm(...e){return n=>{let i=!1;const l=e.map(h=>{const d=Ob(h,n);return!i&&typeof d=="function"&&(i=!0),d});if(i)return()=>{for(let h=0;h<l.length;h++){const d=l[h];typeof d=="function"?d():Ob(e[h],null)}}}}function ds(...e){return re.useCallback(Gm(...e),e)}function Hh(e,n=[]){let i=[];function l(d,m){const o=re.createContext(m),x=i.length;i=[...i,m];const E=D=>{const{scope:O,children:P,...W}=D,z=O?.[e]?.[x]||o,H=re.useMemo(()=>W,Object.values(W));return ae.jsx(z.Provider,{value:H,children:P})};E.displayName=d+"Provider";function I(D,O){const P=O?.[e]?.[x]||o,W=re.useContext(P);if(W)return W;if(m!==void 0)return m;throw new Error(`\`${D}\` must be used within \`${d}\``)}return[E,I]}const h=()=>{const d=i.map(m=>re.createContext(m));return function(o){const x=o?.[e]||d;return re.useMemo(()=>({[`__scope${e}`]:{...o,[e]:x}}),[o,x])}};return h.scopeName=e,[l,ZT(h,...n)]}function ZT(...e){const n=e[0];if(e.length===1)return n;const i=()=>{const l=e.map(h=>({useScope:h(),scopeName:h.scopeName}));return function(d){const m=l.reduce((o,{useScope:x,scopeName:E})=>{const D=x(d)[`__scope${E}`];return{...o,...D}},{});return re.useMemo(()=>({[`__scope${n.scopeName}`]:m}),[m])}};return i.scopeName=n.scopeName,i}function zb(e){const n=XT(e),i=re.forwardRef((l,h)=>{const{children:d,...m}=l,o=re.Children.toArray(d),x=o.find(JT);if(x){const E=x.props.children,I=o.map(D=>D===x?re.Children.count(E)>1?re.Children.only(null):re.isValidElement(E)?E.props.children:null:D);return ae.jsx(n,{...m,ref:h,children:re.isValidElement(E)?re.cloneElement(E,void 0,I):null})}return ae.jsx(n,{...m,ref:h,children:d})});return i.displayName=`${e}.Slot`,i}function XT(e){const n=re.forwardRef((i,l)=>{const{children:h,...d}=i;if(re.isValidElement(h)){const m=t3(h),o=e3(d,h.props);return h.type!==re.Fragment&&(o.ref=l?Gm(l,m):m),re.cloneElement(h,o)}return re.Children.count(h)>1?re.Children.only(null):null});return n.displayName=`${e}.SlotClone`,n}var YT=Symbol("radix.slottable");function JT(e){return re.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===YT}function e3(e,n){const i={...n};for(const l in n){const h=e[l],d=n[l];/^on[A-Z]/.test(l)?h&&d?i[l]=(...o)=>{const x=d(...o);return h(...o),x}:h&&(i[l]=h):l==="style"?i[l]={...h,...d}:l==="className"&&(i[l]=[h,d].filter(Boolean).join(" "))}return{...e,...i}}function t3(e){let n=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,i=n&&"isReactWarning"in n&&n.isReactWarning;return i?e.ref:(n=Object.getOwnPropertyDescriptor(e,"ref")?.get,i=n&&"isReactWarning"in n&&n.isReactWarning,i?e.props.ref:e.props.ref||e.ref)}function gw(e){const n=e+"CollectionProvider",[i,l]=Hh(n),[h,d]=i(n,{collectionRef:{current:null},itemMap:new Map}),m=z=>{const{scope:H,children:Z}=z,ie=Pr.useRef(null),ce=Pr.useRef(new Map).current;return ae.jsx(h,{scope:H,itemMap:ce,collectionRef:ie,children:Z})};m.displayName=n;const o=e+"CollectionSlot",x=zb(o),E=Pr.forwardRef((z,H)=>{const{scope:Z,children:ie}=z,ce=d(o,Z),he=ds(H,ce.collectionRef);return ae.jsx(x,{ref:he,children:ie})});E.displayName=o;const I=e+"CollectionItemSlot",D="data-radix-collection-item",O=zb(I),P=Pr.forwardRef((z,H)=>{const{scope:Z,children:ie,...ce}=z,he=Pr.useRef(null),Ie=ds(H,he),Ve=d(I,Z);return Pr.useEffect(()=>(Ve.itemMap.set(he,{ref:he,...ce}),()=>void Ve.itemMap.delete(he))),ae.jsx(O,{[D]:"",ref:Ie,children:ie})});P.displayName=I;function W(z){const H=d(e+"CollectionConsumer",z);return Pr.useCallback(()=>{const ie=H.collectionRef.current;if(!ie)return[];const ce=Array.from(ie.querySelectorAll(`[${D}]`));return Array.from(H.itemMap.values()).sort((Ve,Me)=>ce.indexOf(Ve.ref.current)-ce.indexOf(Me.ref.current))},[H.collectionRef,H.itemMap])}return[{Provider:m,Slot:E,ItemSlot:P},W,l]}function r3(e){const n=n3(e),i=re.forwardRef((l,h)=>{const{children:d,...m}=l,o=re.Children.toArray(d),x=o.find(s3);if(x){const E=x.props.children,I=o.map(D=>D===x?re.Children.count(E)>1?re.Children.only(null):re.isValidElement(E)?E.props.children:null:D);return ae.jsx(n,{...m,ref:h,children:re.isValidElement(E)?re.cloneElement(E,void 0,I):null})}return ae.jsx(n,{...m,ref:h,children:d})});return i.displayName=`${e}.Slot`,i}function n3(e){const n=re.forwardRef((i,l)=>{const{children:h,...d}=i;if(re.isValidElement(h)){const m=a3(h),o=o3(d,h.props);return h.type!==re.Fragment&&(o.ref=l?Gm(l,m):m),re.cloneElement(h,o)}return re.Children.count(h)>1?re.Children.only(null):null});return n.displayName=`${e}.SlotClone`,n}var i3=Symbol("radix.slottable");function s3(e){return re.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===i3}function o3(e,n){const i={...n};for(const l in n){const h=e[l],d=n[l];/^on[A-Z]/.test(l)?h&&d?i[l]=(...o)=>{const x=d(...o);return h(...o),x}:h&&(i[l]=h):l==="style"?i[l]={...h,...d}:l==="className"&&(i[l]=[h,d].filter(Boolean).join(" "))}return{...e,...i}}function a3(e){let n=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,i=n&&"isReactWarning"in n&&n.isReactWarning;return i?e.ref:(n=Object.getOwnPropertyDescriptor(e,"ref")?.get,i=n&&"isReactWarning"in n&&n.isReactWarning,i?e.props.ref:e.props.ref||e.ref)}var l3=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],oi=l3.reduce((e,n)=>{const i=r3(`Primitive.${n}`),l=re.forwardRef((h,d)=>{const{asChild:m,...o}=h,x=m?i:n;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),ae.jsx(x,{...o,ref:d})});return l.displayName=`Primitive.${n}`,{...e,[n]:l}},{});function A5(e,n){e&&_p.flushSync(()=>e.dispatchEvent(n))}function iu(e){const n=re.useRef(e);return re.useEffect(()=>{n.current=e}),re.useMemo(()=>(...i)=>n.current?.(...i),[])}function c3(e,n=globalThis?.document){const i=iu(e);re.useEffect(()=>{const l=h=>{h.key==="Escape"&&i(h)};return n.addEventListener("keydown",l,{capture:!0}),()=>n.removeEventListener("keydown",l,{capture:!0})},[i,n])}var A3="DismissableLayer",s_="dismissableLayer.update",u3="dismissableLayer.pointerDownOutside",h3="dismissableLayer.focusOutside",Hb,u5=re.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),py=re.forwardRef((e,n)=>{const{disableOutsidePointerEvents:i=!1,onEscapeKeyDown:l,onPointerDownOutside:h,onFocusOutside:d,onInteractOutside:m,onDismiss:o,...x}=e,E=re.useContext(u5),[I,D]=re.useState(null),O=I?.ownerDocument??globalThis?.document,[,P]=re.useState({}),W=ds(n,Me=>D(Me)),z=Array.from(E.layers),[H]=[...E.layersWithOutsidePointerEventsDisabled].slice(-1),Z=z.indexOf(H),ie=I?z.indexOf(I):-1,ce=E.layersWithOutsidePointerEventsDisabled.size>0,he=ie>=Z,Ie=f3(Me=>{const Pe=Me.target,xe=[...E.branches].some(nt=>nt.contains(Pe));!he||xe||(h?.(Me),m?.(Me),Me.defaultPrevented||o?.())},O),Ve=p3(Me=>{const Pe=Me.target;[...E.branches].some(nt=>nt.contains(Pe))||(d?.(Me),m?.(Me),Me.defaultPrevented||o?.())},O);return c3(Me=>{ie===E.layers.size-1&&(l?.(Me),!Me.defaultPrevented&&o&&(Me.preventDefault(),o()))},O),re.useEffect(()=>{if(I)return i&&(E.layersWithOutsidePointerEventsDisabled.size===0&&(Hb=O.body.style.pointerEvents,O.body.style.pointerEvents="none"),E.layersWithOutsidePointerEventsDisabled.add(I)),E.layers.add(I),jb(),()=>{i&&E.layersWithOutsidePointerEventsDisabled.size===1&&(O.body.style.pointerEvents=Hb)}},[I,O,i,E]),re.useEffect(()=>()=>{I&&(E.layers.delete(I),E.layersWithOutsidePointerEventsDisabled.delete(I),jb())},[I,E]),re.useEffect(()=>{const Me=()=>P({});return document.addEventListener(s_,Me),()=>document.removeEventListener(s_,Me)},[]),ae.jsx(oi.div,{...x,ref:W,style:{pointerEvents:ce?he?"auto":"none":void 0,...e.style},onFocusCapture:Un(e.onFocusCapture,Ve.onFocusCapture),onBlurCapture:Un(e.onBlurCapture,Ve.onBlurCapture),onPointerDownCapture:Un(e.onPointerDownCapture,Ie.onPointerDownCapture)})});py.displayName=A3;var d3="DismissableLayerBranch",h5=re.forwardRef((e,n)=>{const i=re.useContext(u5),l=re.useRef(null),h=ds(n,l);return re.useEffect(()=>{const d=l.current;if(d)return i.branches.add(d),()=>{i.branches.delete(d)}},[i.branches]),ae.jsx(oi.div,{...e,ref:h})});h5.displayName=d3;function f3(e,n=globalThis?.document){const i=iu(e),l=re.useRef(!1),h=re.useRef(()=>{});return re.useEffect(()=>{const d=o=>{if(o.target&&!l.current){let x=function(){d5(u3,i,E,{discrete:!0})};const E={originalEvent:o};o.pointerType==="touch"?(n.removeEventListener("click",h.current),h.current=x,n.addEventListener("click",h.current,{once:!0})):x()}else n.removeEventListener("click",h.current);l.current=!1},m=window.setTimeout(()=>{n.addEventListener("pointerdown",d)},0);return()=>{window.clearTimeout(m),n.removeEventListener("pointerdown",d),n.removeEventListener("click",h.current)}},[n,i]),{onPointerDownCapture:()=>l.current=!0}}function p3(e,n=globalThis?.document){const i=iu(e),l=re.useRef(!1);return re.useEffect(()=>{const h=d=>{d.target&&!l.current&&d5(h3,i,{originalEvent:d},{discrete:!1})};return n.addEventListener("focusin",h),()=>n.removeEventListener("focusin",h)},[n,i]),{onFocusCapture:()=>l.current=!0,onBlurCapture:()=>l.current=!1}}function jb(){const e=new CustomEvent(s_);document.dispatchEvent(e)}function d5(e,n,i,{discrete:l}){const h=i.originalEvent.target,d=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:i});n&&h.addEventListener(e,n,{once:!0}),l?A5(h,d):h.dispatchEvent(d)}var m3=py,g3=h5,Cl=globalThis?.document?re.useLayoutEffect:()=>{},y3="Portal",yw=re.forwardRef((e,n)=>{const{container:i,...l}=e,[h,d]=re.useState(!1);Cl(()=>d(!0),[]);const m=i||h&&globalThis?.document?.body;return m?c5.createPortal(ae.jsx(oi.div,{...l,ref:n}),m):null});yw.displayName=y3;function v3(e,n){return re.useReducer((i,l)=>n[i][l]??i,e)}var Km=e=>{const{present:n,children:i}=e,l=_3(n),h=typeof i=="function"?i({present:l.isPresent}):re.Children.only(i),d=ds(l.ref,w3(h));return typeof i=="function"||l.isPresent?re.cloneElement(h,{ref:d}):null};Km.displayName="Presence";function _3(e){const[n,i]=re.useState(),l=re.useRef(null),h=re.useRef(e),d=re.useRef("none"),m=e?"mounted":"unmounted",[o,x]=v3(m,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return re.useEffect(()=>{const E=Og(l.current);d.current=o==="mounted"?E:"none"},[o]),Cl(()=>{const E=l.current,I=h.current;if(I!==e){const O=d.current,P=Og(E);e?x("MOUNT"):P==="none"||E?.display==="none"?x("UNMOUNT"):x(I&&O!==P?"ANIMATION_OUT":"UNMOUNT"),h.current=e}},[e,x]),Cl(()=>{if(n){let E;const I=n.ownerDocument.defaultView??window,D=P=>{const z=Og(l.current).includes(CSS.escape(P.animationName));if(P.target===n&&z&&(x("ANIMATION_END"),!h.current)){const H=n.style.animationFillMode;n.style.animationFillMode="forwards",E=I.setTimeout(()=>{n.style.animationFillMode==="forwards"&&(n.style.animationFillMode=H)})}},O=P=>{P.target===n&&(d.current=Og(l.current))};return n.addEventListener("animationstart",O),n.addEventListener("animationcancel",D),n.addEventListener("animationend",D),()=>{I.clearTimeout(E),n.removeEventListener("animationstart",O),n.removeEventListener("animationcancel",D),n.removeEventListener("animationend",D)}}else x("ANIMATION_END")},[n,x]),{isPresent:["mounted","unmountSuspended"].includes(o),ref:re.useCallback(E=>{l.current=E?getComputedStyle(E):null,i(E)},[])}}function Og(e){return e?.animationName||"none"}function w3(e){let n=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,i=n&&"isReactWarning"in n&&n.isReactWarning;return i?e.ref:(n=Object.getOwnPropertyDescriptor(e,"ref")?.get,i=n&&"isReactWarning"in n&&n.isReactWarning,i?e.props.ref:e.props.ref||e.ref)}var x3=fy[" useInsertionEffect ".trim().toString()]||Cl;function mp({prop:e,defaultProp:n,onChange:i=()=>{},caller:l}){const[h,d,m]=b3({defaultProp:n,onChange:i}),o=e!==void 0,x=o?e:h;{const I=re.useRef(e!==void 0);re.useEffect(()=>{const D=I.current;D!==o&&console.warn(`${l} is changing from ${D?"controlled":"uncontrolled"} to ${o?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),I.current=o},[o,l])}const E=re.useCallback(I=>{if(o){const D=B3(I)?I(e):I;D!==e&&m.current?.(D)}else d(I)},[o,e,d,m]);return[x,E]}function b3({defaultProp:e,onChange:n}){const[i,l]=re.useState(e),h=re.useRef(i),d=re.useRef(n);return x3(()=>{d.current=n},[n]),re.useEffect(()=>{h.current!==i&&(d.current?.(i),h.current=i)},[i,h]),[i,l,d]}function B3(e){return typeof e=="function"}var f5=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),C3="VisuallyHidden",my=re.forwardRef((e,n)=>ae.jsx(oi.span,{...e,ref:n,style:{...f5,...e.style}}));my.displayName=C3;var E3=my,vw="ToastProvider",[_w,S3,F3]=gw("Toast"),[p5]=Hh("Toast",[F3]),[I3,gy]=p5(vw),m5=e=>{const{__scopeToast:n,label:i="Notification",duration:l=5e3,swipeDirection:h="right",swipeThreshold:d=50,children:m}=e,[o,x]=re.useState(null),[E,I]=re.useState(0),D=re.useRef(!1),O=re.useRef(!1);return i.trim()||console.error(`Invalid prop \`label\` supplied to \`${vw}\`. Expected non-empty \`string\`.`),ae.jsx(_w.Provider,{scope:n,children:ae.jsx(I3,{scope:n,label:i,duration:l,swipeDirection:h,swipeThreshold:d,toastCount:E,viewport:o,onViewportChange:x,onToastAdd:re.useCallback(()=>I(P=>P+1),[]),onToastRemove:re.useCallback(()=>I(P=>P-1),[]),isFocusedToastEscapeKeyDownRef:D,isClosePausedRef:O,children:m})})};m5.displayName=vw;var g5="ToastViewport",T3=["F8"],o_="toast.viewportPause",a_="toast.viewportResume",y5=re.forwardRef((e,n)=>{const{__scopeToast:i,hotkey:l=T3,label:h="Notifications ({hotkey})",...d}=e,m=gy(g5,i),o=S3(i),x=re.useRef(null),E=re.useRef(null),I=re.useRef(null),D=re.useRef(null),O=ds(n,D,m.onViewportChange),P=l.join("+").replace(/Key/g,"").replace(/Digit/g,""),W=m.toastCount>0;re.useEffect(()=>{const H=Z=>{l.length!==0&&l.every(ce=>Z[ce]||Z.code===ce)&&D.current?.focus()};return document.addEventListener("keydown",H),()=>document.removeEventListener("keydown",H)},[l]),re.useEffect(()=>{const H=x.current,Z=D.current;if(W&&H&&Z){const ie=()=>{if(!m.isClosePausedRef.current){const Ve=new CustomEvent(o_);Z.dispatchEvent(Ve),m.isClosePausedRef.current=!0}},ce=()=>{if(m.isClosePausedRef.current){const Ve=new CustomEvent(a_);Z.dispatchEvent(Ve),m.isClosePausedRef.current=!1}},he=Ve=>{!H.contains(Ve.relatedTarget)&&ce()},Ie=()=>{H.contains(document.activeElement)||ce()};return H.addEventListener("focusin",ie),H.addEventListener("focusout",he),H.addEventListener("pointermove",ie),H.addEventListener("pointerleave",Ie),window.addEventListener("blur",ie),window.addEventListener("focus",ce),()=>{H.removeEventListener("focusin",ie),H.removeEventListener("focusout",he),H.removeEventListener("pointermove",ie),H.removeEventListener("pointerleave",Ie),window.removeEventListener("blur",ie),window.removeEventListener("focus",ce)}}},[W,m.isClosePausedRef]);const z=re.useCallback(({tabbingDirection:H})=>{const ie=o().map(ce=>{const he=ce.ref.current,Ie=[he,...j3(he)];return H==="forwards"?Ie:Ie.reverse()});return(H==="forwards"?ie.reverse():ie).flat()},[o]);return re.useEffect(()=>{const H=D.current;if(H){const Z=ie=>{const ce=ie.altKey||ie.ctrlKey||ie.metaKey;if(ie.key==="Tab"&&!ce){const Ie=document.activeElement,Ve=ie.shiftKey;if(ie.target===H&&Ve){E.current?.focus();return}const xe=z({tabbingDirection:Ve?"backwards":"forwards"}),nt=xe.findIndex(pe=>pe===Ie);$v(xe.slice(nt+1))?ie.preventDefault():Ve?E.current?.focus():I.current?.focus()}};return H.addEventListener("keydown",Z),()=>H.removeEventListener("keydown",Z)}},[o,z]),ae.jsxs(g3,{ref:x,role:"region","aria-label":h.replace("{hotkey}",P),tabIndex:-1,style:{pointerEvents:W?void 0:"none"},children:[W&&ae.jsx(l_,{ref:E,onFocusFromOutsideViewport:()=>{const H=z({tabbingDirection:"forwards"});$v(H)}}),ae.jsx(_w.Slot,{scope:i,children:ae.jsx(oi.ol,{tabIndex:-1,...d,ref:O})}),W&&ae.jsx(l_,{ref:I,onFocusFromOutsideViewport:()=>{const H=z({tabbingDirection:"backwards"});$v(H)}})]})});y5.displayName=g5;var v5="ToastFocusProxy",l_=re.forwardRef((e,n)=>{const{__scopeToast:i,onFocusFromOutsideViewport:l,...h}=e,d=gy(v5,i);return ae.jsx(my,{tabIndex:0,...h,ref:n,style:{position:"fixed"},onFocus:m=>{const o=m.relatedTarget;!d.viewport?.contains(o)&&l()}})});l_.displayName=v5;var qm="Toast",P3="toast.swipeStart",L3="toast.swipeMove",M3="toast.swipeCancel",k3="toast.swipeEnd",_5=re.forwardRef((e,n)=>{const{forceMount:i,open:l,defaultOpen:h,onOpenChange:d,...m}=e,[o,x]=mp({prop:l,defaultProp:h??!0,onChange:d,caller:qm});return ae.jsx(Km,{present:i||o,children:ae.jsx(R3,{open:o,...m,ref:n,onClose:()=>x(!1),onPause:iu(e.onPause),onResume:iu(e.onResume),onSwipeStart:Un(e.onSwipeStart,E=>{E.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:Un(e.onSwipeMove,E=>{const{x:I,y:D}=E.detail.delta;E.currentTarget.setAttribute("data-swipe","move"),E.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${I}px`),E.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${D}px`)}),onSwipeCancel:Un(e.onSwipeCancel,E=>{E.currentTarget.setAttribute("data-swipe","cancel"),E.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),E.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),E.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),E.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:Un(e.onSwipeEnd,E=>{const{x:I,y:D}=E.detail.delta;E.currentTarget.setAttribute("data-swipe","end"),E.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),E.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),E.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${I}px`),E.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${D}px`),x(!1)})})})});_5.displayName=qm;var[U3,D3]=p5(qm,{onClose(){}}),R3=re.forwardRef((e,n)=>{const{__scopeToast:i,type:l="foreground",duration:h,open:d,onClose:m,onEscapeKeyDown:o,onPause:x,onResume:E,onSwipeStart:I,onSwipeMove:D,onSwipeCancel:O,onSwipeEnd:P,...W}=e,z=gy(qm,i),[H,Z]=re.useState(null),ie=ds(n,Fe=>Z(Fe)),ce=re.useRef(null),he=re.useRef(null),Ie=h||z.duration,Ve=re.useRef(0),Me=re.useRef(Ie),Pe=re.useRef(0),{onToastAdd:xe,onToastRemove:nt}=z,pe=iu(()=>{H?.contains(document.activeElement)&&z.viewport?.focus(),m()}),_e=re.useCallback(Fe=>{!Fe||Fe===1/0||(window.clearTimeout(Pe.current),Ve.current=new Date().getTime(),Pe.current=window.setTimeout(pe,Fe))},[pe]);re.useEffect(()=>{const Fe=z.viewport;if(Fe){const pt=()=>{_e(Me.current),E?.()},ht=()=>{const Je=new Date().getTime()-Ve.current;Me.current=Me.current-Je,window.clearTimeout(Pe.current),x?.()};return Fe.addEventListener(o_,ht),Fe.addEventListener(a_,pt),()=>{Fe.removeEventListener(o_,ht),Fe.removeEventListener(a_,pt)}}},[z.viewport,Ie,x,E,_e]),re.useEffect(()=>{d&&!z.isClosePausedRef.current&&_e(Ie)},[d,Ie,z.isClosePausedRef,_e]),re.useEffect(()=>(xe(),()=>nt()),[xe,nt]);const Ue=re.useMemo(()=>H?S5(H):null,[H]);return z.viewport?ae.jsxs(ae.Fragment,{children:[Ue&&ae.jsx(N3,{__scopeToast:i,role:"status","aria-live":l==="foreground"?"assertive":"polite",children:Ue}),ae.jsx(U3,{scope:i,onClose:pe,children:_p.createPortal(ae.jsx(_w.ItemSlot,{scope:i,children:ae.jsx(m3,{asChild:!0,onEscapeKeyDown:Un(o,()=>{z.isFocusedToastEscapeKeyDownRef.current||pe(),z.isFocusedToastEscapeKeyDownRef.current=!1}),children:ae.jsx(oi.li,{tabIndex:0,"data-state":d?"open":"closed","data-swipe-direction":z.swipeDirection,...W,ref:ie,style:{userSelect:"none",touchAction:"none",...e.style},onKeyDown:Un(e.onKeyDown,Fe=>{Fe.key==="Escape"&&(o?.(Fe.nativeEvent),Fe.nativeEvent.defaultPrevented||(z.isFocusedToastEscapeKeyDownRef.current=!0,pe()))}),onPointerDown:Un(e.onPointerDown,Fe=>{Fe.button===0&&(ce.current={x:Fe.clientX,y:Fe.clientY})}),onPointerMove:Un(e.onPointerMove,Fe=>{if(!ce.current)return;const pt=Fe.clientX-ce.current.x,ht=Fe.clientY-ce.current.y,Je=!!he.current,ze=["left","right"].includes(z.swipeDirection),je=["left","up"].includes(z.swipeDirection)?Math.min:Math.max,xt=ze?je(0,pt):0,Re=ze?0:je(0,ht),oe=Fe.pointerType==="touch"?10:2,Se={x:xt,y:Re},Ne={originalEvent:Fe,delta:Se};Je?(he.current=Se,zg(L3,D,Ne,{discrete:!1})):Vb(Se,z.swipeDirection,oe)?(he.current=Se,zg(P3,I,Ne,{discrete:!1}),Fe.target.setPointerCapture(Fe.pointerId)):(Math.abs(pt)>oe||Math.abs(ht)>oe)&&(ce.current=null)}),onPointerUp:Un(e.onPointerUp,Fe=>{const pt=he.current,ht=Fe.target;if(ht.hasPointerCapture(Fe.pointerId)&&ht.releasePointerCapture(Fe.pointerId),he.current=null,ce.current=null,pt){const Je=Fe.currentTarget,ze={originalEvent:Fe,delta:pt};Vb(pt,z.swipeDirection,z.swipeThreshold)?zg(k3,P,ze,{discrete:!0}):zg(M3,O,ze,{discrete:!0}),Je.addEventListener("click",je=>je.preventDefault(),{once:!0})}})})})}),z.viewport)})]}):null}),N3=e=>{const{__scopeToast:n,children:i,...l}=e,h=gy(qm,n),[d,m]=re.useState(!1),[o,x]=re.useState(!1);return z3(()=>m(!0)),re.useEffect(()=>{const E=window.setTimeout(()=>x(!0),1e3);return()=>window.clearTimeout(E)},[]),o?null:ae.jsx(yw,{asChild:!0,children:ae.jsx(my,{...l,children:d&&ae.jsxs(ae.Fragment,{children:[h.label," ",i]})})})},Q3="ToastTitle",w5=re.forwardRef((e,n)=>{const{__scopeToast:i,...l}=e;return ae.jsx(oi.div,{...l,ref:n})});w5.displayName=Q3;var O3="ToastDescription",x5=re.forwardRef((e,n)=>{const{__scopeToast:i,...l}=e;return ae.jsx(oi.div,{...l,ref:n})});x5.displayName=O3;var b5="ToastAction",B5=re.forwardRef((e,n)=>{const{altText:i,...l}=e;return i.trim()?ae.jsx(E5,{altText:i,asChild:!0,children:ae.jsx(ww,{...l,ref:n})}):(console.error(`Invalid prop \`altText\` supplied to \`${b5}\`. Expected non-empty \`string\`.`),null)});B5.displayName=b5;var C5="ToastClose",ww=re.forwardRef((e,n)=>{const{__scopeToast:i,...l}=e,h=D3(C5,i);return ae.jsx(E5,{asChild:!0,children:ae.jsx(oi.button,{type:"button",...l,ref:n,onClick:Un(e.onClick,h.onClose)})})});ww.displayName=C5;var E5=re.forwardRef((e,n)=>{const{__scopeToast:i,altText:l,...h}=e;return ae.jsx(oi.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":l||void 0,...h,ref:n})});function S5(e){const n=[];return Array.from(e.childNodes).forEach(l=>{if(l.nodeType===l.TEXT_NODE&&l.textContent&&n.push(l.textContent),H3(l)){const h=l.ariaHidden||l.hidden||l.style.display==="none",d=l.dataset.radixToastAnnounceExclude==="";if(!h)if(d){const m=l.dataset.radixToastAnnounceAlt;m&&n.push(m)}else n.push(...S5(l))}}),n}function zg(e,n,i,{discrete:l}){const h=i.originalEvent.currentTarget,d=new CustomEvent(e,{bubbles:!0,cancelable:!0,detail:i});n&&h.addEventListener(e,n,{once:!0}),l?A5(h,d):h.dispatchEvent(d)}var Vb=(e,n,i=0)=>{const l=Math.abs(e.x),h=Math.abs(e.y),d=l>h;return n==="left"||n==="right"?d&&l>i:!d&&h>i};function z3(e=()=>{}){const n=iu(e);Cl(()=>{let i=0,l=0;return i=window.requestAnimationFrame(()=>l=window.requestAnimationFrame(n)),()=>{window.cancelAnimationFrame(i),window.cancelAnimationFrame(l)}},[n])}function H3(e){return e.nodeType===e.ELEMENT_NODE}function j3(e){const n=[],i=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:l=>{const h=l.tagName==="INPUT"&&l.type==="hidden";return l.disabled||l.hidden||h?NodeFilter.FILTER_SKIP:l.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;i.nextNode();)n.push(i.currentNode);return n}function $v(e){const n=document.activeElement;return e.some(i=>i===n?!0:(i.focus(),document.activeElement!==n))}var V3=m5,F5=y5,I5=_5,T5=w5,P5=x5,L5=B5,M5=ww;function k5(e){var n,i,l="";if(typeof e=="string"||typeof e=="number")l+=e;else if(typeof e=="object")if(Array.isArray(e)){var h=e.length;for(n=0;n<h;n++)e[n]&&(i=k5(e[n]))&&(l&&(l+=" "),l+=i)}else for(i in e)e[i]&&(l&&(l+=" "),l+=i);return l}function U5(){for(var e,n,i=0,l="",h=arguments.length;i<h;i++)(e=arguments[i])&&(n=k5(e))&&(l&&(l+=" "),l+=n);return l}const Gb=e=>typeof e=="boolean"?`${e}`:e===0?"0":e,Kb=U5,yy=(e,n)=>i=>{var l;if(n?.variants==null)return Kb(e,i?.class,i?.className);const{variants:h,defaultVariants:d}=n,m=Object.keys(h).map(E=>{const I=i?.[E],D=d?.[E];if(I===null)return null;const O=Gb(I)||Gb(D);return h[E][O]}),o=i&&Object.entries(i).reduce((E,I)=>{let[D,O]=I;return O===void 0||(E[D]=O),E},{}),x=n==null||(l=n.compoundVariants)===null||l===void 0?void 0:l.reduce((E,I)=>{let{class:D,className:O,...P}=I;return Object.entries(P).every(W=>{let[z,H]=W;return Array.isArray(H)?H.includes({...d,...o}[z]):{...d,...o}[z]===H})?[...E,D,O]:E},[]);return Kb(e,m,x,i?.class,i?.className)};const G3=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),D5=(...e)=>e.filter((n,i,l)=>!!n&&n.trim()!==""&&l.indexOf(n)===i).join(" ").trim();var K3={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const q3=re.forwardRef(({color:e="currentColor",size:n=24,strokeWidth:i=2,absoluteStrokeWidth:l,className:h="",children:d,iconNode:m,...o},x)=>re.createElement("svg",{ref:x,...K3,width:n,height:n,stroke:e,strokeWidth:l?Number(i)*24/Number(n):i,className:D5("lucide",h),...o},[...m.map(([E,I])=>re.createElement(E,I)),...Array.isArray(d)?d:[d]]));const il=(e,n)=>{const i=re.forwardRef(({className:l,...h},d)=>re.createElement(q3,{ref:d,iconNode:n,className:D5(`lucide-${G3(e)}`,l),...h}));return i.displayName=`${e}`,i};const $3=il("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]]);const W3=il("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);const Z3=il("ChartColumn",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);const R5=il("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);const N5=il("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);const X3=il("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);const Y3=il("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);const Q5=il("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);const J3=il("FileImage",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["circle",{cx:"10",cy:"12",r:"2",key:"737tya"}],["path",{d:"m20 17-1.296-1.296a2.41 2.41 0 0 0-3.408 0L9 22",key:"wt3hpn"}]]);const eP=il("Github",[["path",{d:"M15 22v-4a4.8 4.8 0 0 0-1-3.5c3 0 6-2 6-5.5.08-1.25-.27-2.48-1-3.5.28-1.15.28-2.35 0-3.5 0 0-1 0-3 1.5-2.64-.5-5.36-.5-8 0C6 2 5 2 5 2c-.3 1.15-.3 2.35 0 3.5A5.403 5.403 0 0 0 4 9c0 3.5 3 5.5 6 5.5-.39.49-.68 1.05-.85 1.65-.17.6-.22 1.23-.15 1.85v4",key:"tonef"}],["path",{d:"M9 18c-4.51 2-5-2-7-2",key:"9comsn"}]]);const c_=il("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);const tP=il("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);const rP=il("Map",[["path",{d:"M14.106 5.553a2 2 0 0 0 1.788 0l3.659-1.83A1 1 0 0 1 21 4.619v12.764a1 1 0 0 1-.553.894l-4.553 2.277a2 2 0 0 1-1.788 0l-4.212-2.106a2 2 0 0 0-1.788 0l-3.659 1.83A1 1 0 0 1 3 19.381V6.618a1 1 0 0 1 .553-.894l4.553-2.277a2 2 0 0 1 1.788 0z",key:"169xi5"}],["path",{d:"M15 5.764v15",key:"1pn4in"}],["path",{d:"M9 3.236v15",key:"1uimfh"}]]);const xw=il("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);const nP=il("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);const qb=il("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]);const $b=il("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);const $m=il("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),bw="-",iP=e=>{const n=oP(e),{conflictingClassGroups:i,conflictingClassGroupModifiers:l}=e;return{getClassGroupId:m=>{const o=m.split(bw);return o[0]===""&&o.length!==1&&o.shift(),O5(o,n)||sP(m)},getConflictingClassGroupIds:(m,o)=>{const x=i[m]||[];return o&&l[m]?[...x,...l[m]]:x}}},O5=(e,n)=>{if(e.length===0)return n.classGroupId;const i=e[0],l=n.nextPart.get(i),h=l?O5(e.slice(1),l):void 0;if(h)return h;if(n.validators.length===0)return;const d=e.join(bw);return n.validators.find(({validator:m})=>m(d))?.classGroupId},Wb=/^\[(.+)\]$/,sP=e=>{if(Wb.test(e)){const n=Wb.exec(e)[1],i=n?.substring(0,n.indexOf(":"));if(i)return"arbitrary.."+i}},oP=e=>{const{theme:n,prefix:i}=e,l={nextPart:new Map,validators:[]};return lP(Object.entries(e.classGroups),i).forEach(([d,m])=>{A_(m,l,d,n)}),l},A_=(e,n,i,l)=>{e.forEach(h=>{if(typeof h=="string"){const d=h===""?n:Zb(n,h);d.classGroupId=i;return}if(typeof h=="function"){if(aP(h)){A_(h(l),n,i,l);return}n.validators.push({validator:h,classGroupId:i});return}Object.entries(h).forEach(([d,m])=>{A_(m,Zb(n,d),i,l)})})},Zb=(e,n)=>{let i=e;return n.split(bw).forEach(l=>{i.nextPart.has(l)||i.nextPart.set(l,{nextPart:new Map,validators:[]}),i=i.nextPart.get(l)}),i},aP=e=>e.isThemeGetter,lP=(e,n)=>n?e.map(([i,l])=>{const h=l.map(d=>typeof d=="string"?n+d:typeof d=="object"?Object.fromEntries(Object.entries(d).map(([m,o])=>[n+m,o])):d);return[i,h]}):e,cP=e=>{if(e<1)return{get:()=>{},set:()=>{}};let n=0,i=new Map,l=new Map;const h=(d,m)=>{i.set(d,m),n++,n>e&&(n=0,l=i,i=new Map)};return{get(d){let m=i.get(d);if(m!==void 0)return m;if((m=l.get(d))!==void 0)return h(d,m),m},set(d,m){i.has(d)?i.set(d,m):h(d,m)}}},z5="!",AP=e=>{const{separator:n,experimentalParseClassName:i}=e,l=n.length===1,h=n[0],d=n.length,m=o=>{const x=[];let E=0,I=0,D;for(let H=0;H<o.length;H++){let Z=o[H];if(E===0){if(Z===h&&(l||o.slice(H,H+d)===n)){x.push(o.slice(I,H)),I=H+d;continue}if(Z==="/"){D=H;continue}}Z==="["?E++:Z==="]"&&E--}const O=x.length===0?o:o.substring(I),P=O.startsWith(z5),W=P?O.substring(1):O,z=D&&D>I?D-I:void 0;return{modifiers:x,hasImportantModifier:P,baseClassName:W,maybePostfixModifierPosition:z}};return i?o=>i({className:o,parseClassName:m}):m},uP=e=>{if(e.length<=1)return e;const n=[];let i=[];return e.forEach(l=>{l[0]==="["?(n.push(...i.sort(),l),i=[]):i.push(l)}),n.push(...i.sort()),n},hP=e=>({cache:cP(e.cacheSize),parseClassName:AP(e),...iP(e)}),dP=/\s+/,fP=(e,n)=>{const{parseClassName:i,getClassGroupId:l,getConflictingClassGroupIds:h}=n,d=[],m=e.trim().split(dP);let o="";for(let x=m.length-1;x>=0;x-=1){const E=m[x],{modifiers:I,hasImportantModifier:D,baseClassName:O,maybePostfixModifierPosition:P}=i(E);let W=!!P,z=l(W?O.substring(0,P):O);if(!z){if(!W){o=E+(o.length>0?" "+o:o);continue}if(z=l(O),!z){o=E+(o.length>0?" "+o:o);continue}W=!1}const H=uP(I).join(":"),Z=D?H+z5:H,ie=Z+z;if(d.includes(ie))continue;d.push(ie);const ce=h(z,W);for(let he=0;he<ce.length;++he){const Ie=ce[he];d.push(Z+Ie)}o=E+(o.length>0?" "+o:o)}return o};function pP(){let e=0,n,i,l="";for(;e<arguments.length;)(n=arguments[e++])&&(i=H5(n))&&(l&&(l+=" "),l+=i);return l}const H5=e=>{if(typeof e=="string")return e;let n,i="";for(let l=0;l<e.length;l++)e[l]&&(n=H5(e[l]))&&(i&&(i+=" "),i+=n);return i};function mP(e,...n){let i,l,h,d=m;function m(x){const E=n.reduce((I,D)=>D(I),e());return i=hP(E),l=i.cache.get,h=i.cache.set,d=o,o(x)}function o(x){const E=l(x);if(E)return E;const I=fP(x,i);return h(x,I),I}return function(){return d(pP.apply(null,arguments))}}const Gs=e=>{const n=i=>i[e]||[];return n.isThemeGetter=!0,n},j5=/^\[(?:([a-z-]+):)?(.+)\]$/i,gP=/^\d+\/\d+$/,yP=new Set(["px","full","screen"]),vP=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,_P=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,wP=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,xP=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,bP=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Lh=e=>lp(e)||yP.has(e)||gP.test(e),rd=e=>wp(e,"length",PP),lp=e=>!!e&&!Number.isNaN(Number(e)),Wv=e=>wp(e,"number",lp),sm=e=>!!e&&Number.isInteger(Number(e)),BP=e=>e.endsWith("%")&&lp(e.slice(0,-1)),Wn=e=>j5.test(e),nd=e=>vP.test(e),CP=new Set(["length","size","percentage"]),EP=e=>wp(e,CP,V5),SP=e=>wp(e,"position",V5),FP=new Set(["image","url"]),IP=e=>wp(e,FP,MP),TP=e=>wp(e,"",LP),om=()=>!0,wp=(e,n,i)=>{const l=j5.exec(e);return l?l[1]?typeof n=="string"?l[1]===n:n.has(l[1]):i(l[2]):!1},PP=e=>_P.test(e)&&!wP.test(e),V5=()=>!1,LP=e=>xP.test(e),MP=e=>bP.test(e),kP=()=>{const e=Gs("colors"),n=Gs("spacing"),i=Gs("blur"),l=Gs("brightness"),h=Gs("borderColor"),d=Gs("borderRadius"),m=Gs("borderSpacing"),o=Gs("borderWidth"),x=Gs("contrast"),E=Gs("grayscale"),I=Gs("hueRotate"),D=Gs("invert"),O=Gs("gap"),P=Gs("gradientColorStops"),W=Gs("gradientColorStopPositions"),z=Gs("inset"),H=Gs("margin"),Z=Gs("opacity"),ie=Gs("padding"),ce=Gs("saturate"),he=Gs("scale"),Ie=Gs("sepia"),Ve=Gs("skew"),Me=Gs("space"),Pe=Gs("translate"),xe=()=>["auto","contain","none"],nt=()=>["auto","hidden","clip","visible","scroll"],pe=()=>["auto",Wn,n],_e=()=>[Wn,n],Ue=()=>["",Lh,rd],Fe=()=>["auto",lp,Wn],pt=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],ht=()=>["solid","dashed","dotted","double","none"],Je=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],ze=()=>["start","end","center","between","around","evenly","stretch"],je=()=>["","0",Wn],xt=()=>["auto","avoid","all","avoid-page","page","left","right","column"],Re=()=>[lp,Wn];return{cacheSize:500,separator:":",theme:{colors:[om],spacing:[Lh,rd],blur:["none","",nd,Wn],brightness:Re(),borderColor:[e],borderRadius:["none","","full",nd,Wn],borderSpacing:_e(),borderWidth:Ue(),contrast:Re(),grayscale:je(),hueRotate:Re(),invert:je(),gap:_e(),gradientColorStops:[e],gradientColorStopPositions:[BP,rd],inset:pe(),margin:pe(),opacity:Re(),padding:_e(),saturate:Re(),scale:Re(),sepia:je(),skew:Re(),space:_e(),translate:_e()},classGroups:{aspect:[{aspect:["auto","square","video",Wn]}],container:["container"],columns:[{columns:[nd]}],"break-after":[{"break-after":xt()}],"break-before":[{"break-before":xt()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...pt(),Wn]}],overflow:[{overflow:nt()}],"overflow-x":[{"overflow-x":nt()}],"overflow-y":[{"overflow-y":nt()}],overscroll:[{overscroll:xe()}],"overscroll-x":[{"overscroll-x":xe()}],"overscroll-y":[{"overscroll-y":xe()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[z]}],"inset-x":[{"inset-x":[z]}],"inset-y":[{"inset-y":[z]}],start:[{start:[z]}],end:[{end:[z]}],top:[{top:[z]}],right:[{right:[z]}],bottom:[{bottom:[z]}],left:[{left:[z]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",sm,Wn]}],basis:[{basis:pe()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",Wn]}],grow:[{grow:je()}],shrink:[{shrink:je()}],order:[{order:["first","last","none",sm,Wn]}],"grid-cols":[{"grid-cols":[om]}],"col-start-end":[{col:["auto",{span:["full",sm,Wn]},Wn]}],"col-start":[{"col-start":Fe()}],"col-end":[{"col-end":Fe()}],"grid-rows":[{"grid-rows":[om]}],"row-start-end":[{row:["auto",{span:[sm,Wn]},Wn]}],"row-start":[{"row-start":Fe()}],"row-end":[{"row-end":Fe()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",Wn]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",Wn]}],gap:[{gap:[O]}],"gap-x":[{"gap-x":[O]}],"gap-y":[{"gap-y":[O]}],"justify-content":[{justify:["normal",...ze()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...ze(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...ze(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[ie]}],px:[{px:[ie]}],py:[{py:[ie]}],ps:[{ps:[ie]}],pe:[{pe:[ie]}],pt:[{pt:[ie]}],pr:[{pr:[ie]}],pb:[{pb:[ie]}],pl:[{pl:[ie]}],m:[{m:[H]}],mx:[{mx:[H]}],my:[{my:[H]}],ms:[{ms:[H]}],me:[{me:[H]}],mt:[{mt:[H]}],mr:[{mr:[H]}],mb:[{mb:[H]}],ml:[{ml:[H]}],"space-x":[{"space-x":[Me]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[Me]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",Wn,n]}],"min-w":[{"min-w":[Wn,n,"min","max","fit"]}],"max-w":[{"max-w":[Wn,n,"none","full","min","max","fit","prose",{screen:[nd]},nd]}],h:[{h:[Wn,n,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[Wn,n,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[Wn,n,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[Wn,n,"auto","min","max","fit"]}],"font-size":[{text:["base",nd,rd]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",Wv]}],"font-family":[{font:[om]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",Wn]}],"line-clamp":[{"line-clamp":["none",lp,Wv]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",Lh,Wn]}],"list-image":[{"list-image":["none",Wn]}],"list-style-type":[{list:["none","disc","decimal",Wn]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[e]}],"placeholder-opacity":[{"placeholder-opacity":[Z]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[e]}],"text-opacity":[{"text-opacity":[Z]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...ht(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",Lh,rd]}],"underline-offset":[{"underline-offset":["auto",Lh,Wn]}],"text-decoration-color":[{decoration:[e]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:_e()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Wn]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Wn]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[Z]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...pt(),SP]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",EP]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},IP]}],"bg-color":[{bg:[e]}],"gradient-from-pos":[{from:[W]}],"gradient-via-pos":[{via:[W]}],"gradient-to-pos":[{to:[W]}],"gradient-from":[{from:[P]}],"gradient-via":[{via:[P]}],"gradient-to":[{to:[P]}],rounded:[{rounded:[d]}],"rounded-s":[{"rounded-s":[d]}],"rounded-e":[{"rounded-e":[d]}],"rounded-t":[{"rounded-t":[d]}],"rounded-r":[{"rounded-r":[d]}],"rounded-b":[{"rounded-b":[d]}],"rounded-l":[{"rounded-l":[d]}],"rounded-ss":[{"rounded-ss":[d]}],"rounded-se":[{"rounded-se":[d]}],"rounded-ee":[{"rounded-ee":[d]}],"rounded-es":[{"rounded-es":[d]}],"rounded-tl":[{"rounded-tl":[d]}],"rounded-tr":[{"rounded-tr":[d]}],"rounded-br":[{"rounded-br":[d]}],"rounded-bl":[{"rounded-bl":[d]}],"border-w":[{border:[o]}],"border-w-x":[{"border-x":[o]}],"border-w-y":[{"border-y":[o]}],"border-w-s":[{"border-s":[o]}],"border-w-e":[{"border-e":[o]}],"border-w-t":[{"border-t":[o]}],"border-w-r":[{"border-r":[o]}],"border-w-b":[{"border-b":[o]}],"border-w-l":[{"border-l":[o]}],"border-opacity":[{"border-opacity":[Z]}],"border-style":[{border:[...ht(),"hidden"]}],"divide-x":[{"divide-x":[o]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[o]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[Z]}],"divide-style":[{divide:ht()}],"border-color":[{border:[h]}],"border-color-x":[{"border-x":[h]}],"border-color-y":[{"border-y":[h]}],"border-color-s":[{"border-s":[h]}],"border-color-e":[{"border-e":[h]}],"border-color-t":[{"border-t":[h]}],"border-color-r":[{"border-r":[h]}],"border-color-b":[{"border-b":[h]}],"border-color-l":[{"border-l":[h]}],"divide-color":[{divide:[h]}],"outline-style":[{outline:["",...ht()]}],"outline-offset":[{"outline-offset":[Lh,Wn]}],"outline-w":[{outline:[Lh,rd]}],"outline-color":[{outline:[e]}],"ring-w":[{ring:Ue()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[e]}],"ring-opacity":[{"ring-opacity":[Z]}],"ring-offset-w":[{"ring-offset":[Lh,rd]}],"ring-offset-color":[{"ring-offset":[e]}],shadow:[{shadow:["","inner","none",nd,TP]}],"shadow-color":[{shadow:[om]}],opacity:[{opacity:[Z]}],"mix-blend":[{"mix-blend":[...Je(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":Je()}],filter:[{filter:["","none"]}],blur:[{blur:[i]}],brightness:[{brightness:[l]}],contrast:[{contrast:[x]}],"drop-shadow":[{"drop-shadow":["","none",nd,Wn]}],grayscale:[{grayscale:[E]}],"hue-rotate":[{"hue-rotate":[I]}],invert:[{invert:[D]}],saturate:[{saturate:[ce]}],sepia:[{sepia:[Ie]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[i]}],"backdrop-brightness":[{"backdrop-brightness":[l]}],"backdrop-contrast":[{"backdrop-contrast":[x]}],"backdrop-grayscale":[{"backdrop-grayscale":[E]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[I]}],"backdrop-invert":[{"backdrop-invert":[D]}],"backdrop-opacity":[{"backdrop-opacity":[Z]}],"backdrop-saturate":[{"backdrop-saturate":[ce]}],"backdrop-sepia":[{"backdrop-sepia":[Ie]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[m]}],"border-spacing-x":[{"border-spacing-x":[m]}],"border-spacing-y":[{"border-spacing-y":[m]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",Wn]}],duration:[{duration:Re()}],ease:[{ease:["linear","in","out","in-out",Wn]}],delay:[{delay:Re()}],animate:[{animate:["none","spin","ping","pulse","bounce",Wn]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[he]}],"scale-x":[{"scale-x":[he]}],"scale-y":[{"scale-y":[he]}],rotate:[{rotate:[sm,Wn]}],"translate-x":[{"translate-x":[Pe]}],"translate-y":[{"translate-y":[Pe]}],"skew-x":[{"skew-x":[Ve]}],"skew-y":[{"skew-y":[Ve]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",Wn]}],accent:[{accent:["auto",e]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Wn]}],"caret-color":[{caret:[e]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":_e()}],"scroll-mx":[{"scroll-mx":_e()}],"scroll-my":[{"scroll-my":_e()}],"scroll-ms":[{"scroll-ms":_e()}],"scroll-me":[{"scroll-me":_e()}],"scroll-mt":[{"scroll-mt":_e()}],"scroll-mr":[{"scroll-mr":_e()}],"scroll-mb":[{"scroll-mb":_e()}],"scroll-ml":[{"scroll-ml":_e()}],"scroll-p":[{"scroll-p":_e()}],"scroll-px":[{"scroll-px":_e()}],"scroll-py":[{"scroll-py":_e()}],"scroll-ps":[{"scroll-ps":_e()}],"scroll-pe":[{"scroll-pe":_e()}],"scroll-pt":[{"scroll-pt":_e()}],"scroll-pr":[{"scroll-pr":_e()}],"scroll-pb":[{"scroll-pb":_e()}],"scroll-pl":[{"scroll-pl":_e()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Wn]}],fill:[{fill:[e,"none"]}],"stroke-w":[{stroke:[Lh,rd,Wv]}],stroke:[{stroke:[e,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},UP=mP(kP);function Li(...e){return UP(U5(e))}const DP=V3,G5=re.forwardRef(({className:e,...n},i)=>ae.jsx(F5,{ref:i,className:Li("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",e),...n}));G5.displayName=F5.displayName;const RP=yy("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),K5=re.forwardRef(({className:e,variant:n,...i},l)=>ae.jsx(I5,{ref:l,className:Li(RP({variant:n}),e),...i}));K5.displayName=I5.displayName;const NP=re.forwardRef(({className:e,...n},i)=>ae.jsx(L5,{ref:i,className:Li("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",e),...n}));NP.displayName=L5.displayName;const q5=re.forwardRef(({className:e,...n},i)=>ae.jsx(M5,{ref:i,className:Li("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",e),"toast-close":"",...n,children:ae.jsx($m,{className:"h-4 w-4"})}));q5.displayName=M5.displayName;const $5=re.forwardRef(({className:e,...n},i)=>ae.jsx(T5,{ref:i,className:Li("text-sm font-semibold",e),...n}));$5.displayName=T5.displayName;const W5=re.forwardRef(({className:e,...n},i)=>ae.jsx(P5,{ref:i,className:Li("text-sm opacity-90",e),...n}));W5.displayName=P5.displayName;function QP(){const{toasts:e}=WT();return ae.jsxs(DP,{children:[e.map(function({id:n,title:i,description:l,action:h,...d}){return ae.jsxs(K5,{...d,children:[ae.jsxs("div",{className:"grid gap-1",children:[i&&ae.jsx($5,{children:i}),l&&ae.jsx(W5,{children:l})]}),h,ae.jsx(q5,{})]},n)}),ae.jsx(G5,{})]})}var Xb=["light","dark"],OP="(prefers-color-scheme: dark)",zP=re.createContext(void 0),HP={setTheme:e=>{},themes:[]},jP=()=>{var e;return(e=re.useContext(zP))!=null?e:HP};re.memo(({forcedTheme:e,storageKey:n,attribute:i,enableSystem:l,enableColorScheme:h,defaultTheme:d,value:m,attrs:o,nonce:x})=>{let E=d==="system",I=i==="class"?`var d=document.documentElement,c=d.classList;${`c.remove(${o.map(W=>`'${W}'`).join(",")})`};`:`var d=document.documentElement,n='${i}',s='setAttribute';`,D=h?Xb.includes(d)&&d?`if(e==='light'||e==='dark'||!e)d.style.colorScheme=e||'${d}'`:"if(e==='light'||e==='dark')d.style.colorScheme=e":"",O=(W,z=!1,H=!0)=>{let Z=m?m[W]:W,ie=z?W+"|| ''":`'${Z}'`,ce="";return h&&H&&!z&&Xb.includes(W)&&(ce+=`d.style.colorScheme = '${W}';`),i==="class"?z||Z?ce+=`c.add(${ie})`:ce+="null":Z&&(ce+=`d[s](n,${ie})`),ce},P=e?`!function(){${I}${O(e)}}()`:l?`!function(){try{${I}var e=localStorage.getItem('${n}');if('system'===e||(!e&&${E})){var t='${OP}',m=window.matchMedia(t);if(m.media!==t||m.matches){${O("dark")}}else{${O("light")}}}else if(e){${m?`var x=${JSON.stringify(m)};`:""}${O(m?"x[e]":"e",!0)}}${E?"":"else{"+O(d,!1,!1)+"}"}${D}}catch(e){}}()`:`!function(){try{${I}var e=localStorage.getItem('${n}');if(e){${m?`var x=${JSON.stringify(m)};`:""}${O(m?"x[e]":"e",!0)}}else{${O(d,!1,!1)};}${D}}catch(t){}}();`;return re.createElement("script",{nonce:x,dangerouslySetInnerHTML:{__html:P}})});var VP=e=>{switch(e){case"success":return qP;case"info":return WP;case"warning":return $P;case"error":return ZP;default:return null}},GP=Array(12).fill(0),KP=({visible:e,className:n})=>Pr.createElement("div",{className:["sonner-loading-wrapper",n].filter(Boolean).join(" "),"data-visible":e},Pr.createElement("div",{className:"sonner-spinner"},GP.map((i,l)=>Pr.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${l}`})))),qP=Pr.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},Pr.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),$P=Pr.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},Pr.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),WP=Pr.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},Pr.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),ZP=Pr.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},Pr.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),XP=Pr.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},Pr.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),Pr.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),YP=()=>{let[e,n]=Pr.useState(document.hidden);return Pr.useEffect(()=>{let i=()=>{n(document.hidden)};return document.addEventListener("visibilitychange",i),()=>window.removeEventListener("visibilitychange",i)},[]),e},u_=1,JP=class{constructor(){this.subscribe=n=>(this.subscribers.push(n),()=>{let i=this.subscribers.indexOf(n);this.subscribers.splice(i,1)}),this.publish=n=>{this.subscribers.forEach(i=>i(n))},this.addToast=n=>{this.publish(n),this.toasts=[...this.toasts,n]},this.create=n=>{var i;let{message:l,...h}=n,d=typeof n?.id=="number"||((i=n.id)==null?void 0:i.length)>0?n.id:u_++,m=this.toasts.find(x=>x.id===d),o=n.dismissible===void 0?!0:n.dismissible;return this.dismissedToasts.has(d)&&this.dismissedToasts.delete(d),m?this.toasts=this.toasts.map(x=>x.id===d?(this.publish({...x,...n,id:d,title:l}),{...x,...n,id:d,dismissible:o,title:l}):x):this.addToast({title:l,...h,dismissible:o,id:d}),d},this.dismiss=n=>(this.dismissedToasts.add(n),n||this.toasts.forEach(i=>{this.subscribers.forEach(l=>l({id:i.id,dismiss:!0}))}),this.subscribers.forEach(i=>i({id:n,dismiss:!0})),n),this.message=(n,i)=>this.create({...i,message:n}),this.error=(n,i)=>this.create({...i,message:n,type:"error"}),this.success=(n,i)=>this.create({...i,type:"success",message:n}),this.info=(n,i)=>this.create({...i,type:"info",message:n}),this.warning=(n,i)=>this.create({...i,type:"warning",message:n}),this.loading=(n,i)=>this.create({...i,type:"loading",message:n}),this.promise=(n,i)=>{if(!i)return;let l;i.loading!==void 0&&(l=this.create({...i,promise:n,type:"loading",message:i.loading,description:typeof i.description!="function"?i.description:void 0}));let h=n instanceof Promise?n:n(),d=l!==void 0,m,o=h.then(async E=>{if(m=["resolve",E],Pr.isValidElement(E))d=!1,this.create({id:l,type:"default",message:E});else if(tL(E)&&!E.ok){d=!1;let I=typeof i.error=="function"?await i.error(`HTTP error! status: ${E.status}`):i.error,D=typeof i.description=="function"?await i.description(`HTTP error! status: ${E.status}`):i.description;this.create({id:l,type:"error",message:I,description:D})}else if(i.success!==void 0){d=!1;let I=typeof i.success=="function"?await i.success(E):i.success,D=typeof i.description=="function"?await i.description(E):i.description;this.create({id:l,type:"success",message:I,description:D})}}).catch(async E=>{if(m=["reject",E],i.error!==void 0){d=!1;let I=typeof i.error=="function"?await i.error(E):i.error,D=typeof i.description=="function"?await i.description(E):i.description;this.create({id:l,type:"error",message:I,description:D})}}).finally(()=>{var E;d&&(this.dismiss(l),l=void 0),(E=i.finally)==null||E.call(i)}),x=()=>new Promise((E,I)=>o.then(()=>m[0]==="reject"?I(m[1]):E(m[1])).catch(I));return typeof l!="string"&&typeof l!="number"?{unwrap:x}:Object.assign(l,{unwrap:x})},this.custom=(n,i)=>{let l=i?.id||u_++;return this.create({jsx:n(l),id:l,...i}),l},this.getActiveToasts=()=>this.toasts.filter(n=>!this.dismissedToasts.has(n.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}},Jc=new JP,eL=(e,n)=>{let i=n?.id||u_++;return Jc.addToast({title:e,...n,id:i}),i},tL=e=>e&&typeof e=="object"&&"ok"in e&&typeof e.ok=="boolean"&&"status"in e&&typeof e.status=="number",rL=eL,nL=()=>Jc.toasts,iL=()=>Jc.getActiveToasts();Object.assign(rL,{success:Jc.success,info:Jc.info,warning:Jc.warning,error:Jc.error,custom:Jc.custom,message:Jc.message,promise:Jc.promise,dismiss:Jc.dismiss,loading:Jc.loading},{getHistory:nL,getToasts:iL});function sL(e,{insertAt:n}={}){if(typeof document>"u")return;let i=document.head||document.getElementsByTagName("head")[0],l=document.createElement("style");l.type="text/css",n==="top"&&i.firstChild?i.insertBefore(l,i.firstChild):i.appendChild(l),l.styleSheet?l.styleSheet.cssText=e:l.appendChild(document.createTextNode(e))}sL(`:where(html[dir="ltr"]),:where([data-sonner-toaster][dir="ltr"]){--toast-icon-margin-start: -3px;--toast-icon-margin-end: 4px;--toast-svg-margin-start: -1px;--toast-svg-margin-end: 0px;--toast-button-margin-start: auto;--toast-button-margin-end: 0;--toast-close-button-start: 0;--toast-close-button-end: unset;--toast-close-button-transform: translate(-35%, -35%)}:where(html[dir="rtl"]),:where([data-sonner-toaster][dir="rtl"]){--toast-icon-margin-start: 4px;--toast-icon-margin-end: -3px;--toast-svg-margin-start: 0px;--toast-svg-margin-end: -1px;--toast-button-margin-start: 0;--toast-button-margin-end: auto;--toast-close-button-start: unset;--toast-close-button-end: 0;--toast-close-button-transform: translate(35%, -35%)}:where([data-sonner-toaster]){position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1: hsl(0, 0%, 99%);--gray2: hsl(0, 0%, 97.3%);--gray3: hsl(0, 0%, 95.1%);--gray4: hsl(0, 0%, 93%);--gray5: hsl(0, 0%, 90.9%);--gray6: hsl(0, 0%, 88.7%);--gray7: hsl(0, 0%, 85.8%);--gray8: hsl(0, 0%, 78%);--gray9: hsl(0, 0%, 56.1%);--gray10: hsl(0, 0%, 52.3%);--gray11: hsl(0, 0%, 43.5%);--gray12: hsl(0, 0%, 9%);--border-radius: 8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:none;z-index:999999999;transition:transform .4s ease}:where([data-sonner-toaster][data-lifted="true"]){transform:translateY(-10px)}@media (hover: none) and (pointer: coarse){:where([data-sonner-toaster][data-lifted="true"]){transform:none}}:where([data-sonner-toaster][data-x-position="right"]){right:var(--offset-right)}:where([data-sonner-toaster][data-x-position="left"]){left:var(--offset-left)}:where([data-sonner-toaster][data-x-position="center"]){left:50%;transform:translate(-50%)}:where([data-sonner-toaster][data-y-position="top"]){top:var(--offset-top)}:where([data-sonner-toaster][data-y-position="bottom"]){bottom:var(--offset-bottom)}:where([data-sonner-toast]){--y: translateY(100%);--lift-amount: calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);filter:blur(0);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:none;overflow-wrap:anywhere}:where([data-sonner-toast][data-styled="true"]){padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px #0000001a;width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}:where([data-sonner-toast]:focus-visible){box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast][data-y-position="top"]){top:0;--y: translateY(-100%);--lift: 1;--lift-amount: calc(1 * var(--gap))}:where([data-sonner-toast][data-y-position="bottom"]){bottom:0;--y: translateY(100%);--lift: -1;--lift-amount: calc(var(--lift) * var(--gap))}:where([data-sonner-toast]) :where([data-description]){font-weight:400;line-height:1.4;color:inherit}:where([data-sonner-toast]) :where([data-title]){font-weight:500;line-height:1.5;color:inherit}:where([data-sonner-toast]) :where([data-icon]){display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}:where([data-sonner-toast][data-promise="true"]) :where([data-icon])>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}:where([data-sonner-toast]) :where([data-icon])>*{flex-shrink:0}:where([data-sonner-toast]) :where([data-icon]) svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}:where([data-sonner-toast]) :where([data-content]){display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;cursor:pointer;outline:none;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}:where([data-sonner-toast]) :where([data-button]):focus-visible{box-shadow:0 0 0 2px #0006}:where([data-sonner-toast]) :where([data-button]):first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}:where([data-sonner-toast]) :where([data-cancel]){color:var(--normal-text);background:rgba(0,0,0,.08)}:where([data-sonner-toast][data-theme="dark"]) :where([data-cancel]){background:rgba(255,255,255,.3)}:where([data-sonner-toast]) :where([data-close-button]){position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast] [data-close-button]{background:var(--gray1)}:where([data-sonner-toast]) :where([data-close-button]):focus-visible{box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast]) :where([data-disabled="true"]){cursor:not-allowed}:where([data-sonner-toast]):hover :where([data-close-button]):hover{background:var(--gray2);border-color:var(--gray5)}:where([data-sonner-toast][data-swiping="true"]):before{content:"";position:absolute;left:-50%;right:-50%;height:100%;z-index:-1}:where([data-sonner-toast][data-y-position="top"][data-swiping="true"]):before{bottom:50%;transform:scaleY(3) translateY(50%)}:where([data-sonner-toast][data-y-position="bottom"][data-swiping="true"]):before{top:50%;transform:scaleY(3) translateY(-50%)}:where([data-sonner-toast][data-swiping="false"][data-removed="true"]):before{content:"";position:absolute;inset:0;transform:scaleY(2)}:where([data-sonner-toast]):after{content:"";position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}:where([data-sonner-toast][data-mounted="true"]){--y: translateY(0);opacity:1}:where([data-sonner-toast][data-expanded="false"][data-front="false"]){--scale: var(--toasts-before) * .05 + 1;--y: translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}:where([data-sonner-toast])>*{transition:opacity .4s}:where([data-sonner-toast][data-expanded="false"][data-front="false"][data-styled="true"])>*{opacity:0}:where([data-sonner-toast][data-visible="false"]){opacity:0;pointer-events:none}:where([data-sonner-toast][data-mounted="true"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}:where([data-sonner-toast][data-removed="true"][data-front="true"][data-swipe-out="false"]){--y: translateY(calc(var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="false"]){--y: translateY(40%);opacity:0;transition:transform .5s,opacity .2s}:where([data-sonner-toast][data-removed="true"][data-front="false"]):before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y, 0px)) translate(var(--swipe-amount-x, 0px));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width: 600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-theme=light]{--normal-bg: #fff;--normal-border: var(--gray4);--normal-text: var(--gray12);--success-bg: hsl(143, 85%, 96%);--success-border: hsl(145, 92%, 91%);--success-text: hsl(140, 100%, 27%);--info-bg: hsl(208, 100%, 97%);--info-border: hsl(221, 91%, 91%);--info-text: hsl(210, 92%, 45%);--warning-bg: hsl(49, 100%, 97%);--warning-border: hsl(49, 91%, 91%);--warning-text: hsl(31, 92%, 45%);--error-bg: hsl(359, 100%, 97%);--error-border: hsl(359, 100%, 94%);--error-text: hsl(360, 100%, 45%)}[data-sonner-toaster][data-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg: #fff;--normal-border: var(--gray3);--normal-text: var(--gray12)}[data-sonner-toaster][data-theme=dark]{--normal-bg: #000;--normal-bg-hover: hsl(0, 0%, 12%);--normal-border: hsl(0, 0%, 20%);--normal-border-hover: hsl(0, 0%, 25%);--normal-text: var(--gray1);--success-bg: hsl(150, 100%, 6%);--success-border: hsl(147, 100%, 12%);--success-text: hsl(150, 86%, 65%);--info-bg: hsl(215, 100%, 6%);--info-border: hsl(223, 100%, 12%);--info-text: hsl(216, 87%, 65%);--warning-bg: hsl(64, 100%, 6%);--warning-border: hsl(60, 100%, 12%);--warning-text: hsl(46, 87%, 65%);--error-bg: hsl(358, 76%, 10%);--error-border: hsl(357, 89%, 16%);--error-text: hsl(358, 100%, 81%)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success],[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info],[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning],[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error],[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size: 16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:nth-child(1){animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}to{opacity:.15}}@media (prefers-reduced-motion){[data-sonner-toast],[data-sonner-toast]>*,.sonner-loading-bar{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}
`);function Hg(e){return e.label!==void 0}var oL=3,aL="32px",lL="16px",Yb=4e3,cL=356,AL=14,uL=20,hL=200;function Bu(...e){return e.filter(Boolean).join(" ")}function dL(e){let[n,i]=e.split("-"),l=[];return n&&l.push(n),i&&l.push(i),l}var fL=e=>{var n,i,l,h,d,m,o,x,E,I,D;let{invert:O,toast:P,unstyled:W,interacting:z,setHeights:H,visibleToasts:Z,heights:ie,index:ce,toasts:he,expanded:Ie,removeToast:Ve,defaultRichColors:Me,closeButton:Pe,style:xe,cancelButtonStyle:nt,actionButtonStyle:pe,className:_e="",descriptionClassName:Ue="",duration:Fe,position:pt,gap:ht,loadingIcon:Je,expandByDefault:ze,classNames:je,icons:xt,closeButtonAriaLabel:Re="Close toast",pauseWhenPageIsHidden:oe}=e,[Se,Ne]=Pr.useState(null),[Ye,lt]=Pr.useState(null),[rt,vt]=Pr.useState(!1),[St,Lt]=Pr.useState(!1),[Wt,ar]=Pr.useState(!1),[hr,Cr]=Pr.useState(!1),[He,vr]=Pr.useState(!1),[Ur,$r]=Pr.useState(0),[lr,Wr]=Pr.useState(0),Sr=Pr.useRef(P.duration||Fe||Yb),Or=Pr.useRef(null),Rr=Pr.useRef(null),On=ce===0,hn=ce+1<=Z,ft=P.type,de=P.dismissible!==!1,fe=P.className||"",ye=P.descriptionClassName||"",qe=Pr.useMemo(()=>ie.findIndex(Nr=>Nr.toastId===P.id)||0,[ie,P.id]),We=Pr.useMemo(()=>{var Nr;return(Nr=P.closeButton)!=null?Nr:Pe},[P.closeButton,Pe]),Ct=Pr.useMemo(()=>P.duration||Fe||Yb,[P.duration,Fe]),yt=Pr.useRef(0),at=Pr.useRef(0),bt=Pr.useRef(0),Ht=Pr.useRef(null),[Ft,cr]=pt.split("-"),Jt=Pr.useMemo(()=>ie.reduce((Nr,mr,Kr)=>Kr>=qe?Nr:Nr+mr.height,0),[ie,qe]),fr=YP(),rn=P.invert||O,Tr=ft==="loading";at.current=Pr.useMemo(()=>qe*ht+Jt,[qe,Jt]),Pr.useEffect(()=>{Sr.current=Ct},[Ct]),Pr.useEffect(()=>{vt(!0)},[]),Pr.useEffect(()=>{let Nr=Rr.current;if(Nr){let mr=Nr.getBoundingClientRect().height;return Wr(mr),H(Kr=>[{toastId:P.id,height:mr,position:P.position},...Kr]),()=>H(Kr=>Kr.filter(Dn=>Dn.toastId!==P.id))}},[H,P.id]),Pr.useLayoutEffect(()=>{if(!rt)return;let Nr=Rr.current,mr=Nr.style.height;Nr.style.height="auto";let Kr=Nr.getBoundingClientRect().height;Nr.style.height=mr,Wr(Kr),H(Dn=>Dn.find(wr=>wr.toastId===P.id)?Dn.map(wr=>wr.toastId===P.id?{...wr,height:Kr}:wr):[{toastId:P.id,height:Kr,position:P.position},...Dn])},[rt,P.title,P.description,H,P.id]);let mt=Pr.useCallback(()=>{Lt(!0),$r(at.current),H(Nr=>Nr.filter(mr=>mr.toastId!==P.id)),setTimeout(()=>{Ve(P)},hL)},[P,Ve,H,at]);Pr.useEffect(()=>{if(P.promise&&ft==="loading"||P.duration===1/0||P.type==="loading")return;let Nr;return Ie||z||oe&&fr?(()=>{if(bt.current<yt.current){let mr=new Date().getTime()-yt.current;Sr.current=Sr.current-mr}bt.current=new Date().getTime()})():Sr.current!==1/0&&(yt.current=new Date().getTime(),Nr=setTimeout(()=>{var mr;(mr=P.onAutoClose)==null||mr.call(P,P),mt()},Sr.current)),()=>clearTimeout(Nr)},[Ie,z,P,ft,oe,fr,mt]),Pr.useEffect(()=>{P.delete&&mt()},[mt,P.delete]);function tn(){var Nr,mr,Kr;return xt!=null&&xt.loading?Pr.createElement("div",{className:Bu(je?.loader,(Nr=P?.classNames)==null?void 0:Nr.loader,"sonner-loader"),"data-visible":ft==="loading"},xt.loading):Je?Pr.createElement("div",{className:Bu(je?.loader,(mr=P?.classNames)==null?void 0:mr.loader,"sonner-loader"),"data-visible":ft==="loading"},Je):Pr.createElement(KP,{className:Bu(je?.loader,(Kr=P?.classNames)==null?void 0:Kr.loader),visible:ft==="loading"})}return Pr.createElement("li",{tabIndex:0,ref:Rr,className:Bu(_e,fe,je?.toast,(n=P?.classNames)==null?void 0:n.toast,je?.default,je?.[ft],(i=P?.classNames)==null?void 0:i[ft]),"data-sonner-toast":"","data-rich-colors":(l=P.richColors)!=null?l:Me,"data-styled":!(P.jsx||P.unstyled||W),"data-mounted":rt,"data-promise":!!P.promise,"data-swiped":He,"data-removed":St,"data-visible":hn,"data-y-position":Ft,"data-x-position":cr,"data-index":ce,"data-front":On,"data-swiping":Wt,"data-dismissible":de,"data-type":ft,"data-invert":rn,"data-swipe-out":hr,"data-swipe-direction":Ye,"data-expanded":!!(Ie||ze&&rt),style:{"--index":ce,"--toasts-before":ce,"--z-index":he.length-ce,"--offset":`${St?Ur:at.current}px`,"--initial-height":ze?"auto":`${lr}px`,...xe,...P.style},onDragEnd:()=>{ar(!1),Ne(null),Ht.current=null},onPointerDown:Nr=>{Tr||!de||(Or.current=new Date,$r(at.current),Nr.target.setPointerCapture(Nr.pointerId),Nr.target.tagName!=="BUTTON"&&(ar(!0),Ht.current={x:Nr.clientX,y:Nr.clientY}))},onPointerUp:()=>{var Nr,mr,Kr,Dn;if(hr||!de)return;Ht.current=null;let wr=Number(((Nr=Rr.current)==null?void 0:Nr.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),Tn=Number(((mr=Rr.current)==null?void 0:mr.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),Bn=new Date().getTime()-((Kr=Or.current)==null?void 0:Kr.getTime()),xn=Se==="x"?wr:Tn,Di=Math.abs(xn)/Bn;if(Math.abs(xn)>=uL||Di>.11){$r(at.current),(Dn=P.onDismiss)==null||Dn.call(P,P),lt(Se==="x"?wr>0?"right":"left":Tn>0?"down":"up"),mt(),Cr(!0),vr(!1);return}ar(!1),Ne(null)},onPointerMove:Nr=>{var mr,Kr,Dn,wr;if(!Ht.current||!de||((mr=window.getSelection())==null?void 0:mr.toString().length)>0)return;let Tn=Nr.clientY-Ht.current.y,Bn=Nr.clientX-Ht.current.x,xn=(Kr=e.swipeDirections)!=null?Kr:dL(pt);!Se&&(Math.abs(Bn)>1||Math.abs(Tn)>1)&&Ne(Math.abs(Bn)>Math.abs(Tn)?"x":"y");let Di={x:0,y:0};Se==="y"?(xn.includes("top")||xn.includes("bottom"))&&(xn.includes("top")&&Tn<0||xn.includes("bottom")&&Tn>0)&&(Di.y=Tn):Se==="x"&&(xn.includes("left")||xn.includes("right"))&&(xn.includes("left")&&Bn<0||xn.includes("right")&&Bn>0)&&(Di.x=Bn),(Math.abs(Di.x)>0||Math.abs(Di.y)>0)&&vr(!0),(Dn=Rr.current)==null||Dn.style.setProperty("--swipe-amount-x",`${Di.x}px`),(wr=Rr.current)==null||wr.style.setProperty("--swipe-amount-y",`${Di.y}px`)}},We&&!P.jsx?Pr.createElement("button",{"aria-label":Re,"data-disabled":Tr,"data-close-button":!0,onClick:Tr||!de?()=>{}:()=>{var Nr;mt(),(Nr=P.onDismiss)==null||Nr.call(P,P)},className:Bu(je?.closeButton,(h=P?.classNames)==null?void 0:h.closeButton)},(d=xt?.close)!=null?d:XP):null,P.jsx||re.isValidElement(P.title)?P.jsx?P.jsx:typeof P.title=="function"?P.title():P.title:Pr.createElement(Pr.Fragment,null,ft||P.icon||P.promise?Pr.createElement("div",{"data-icon":"",className:Bu(je?.icon,(m=P?.classNames)==null?void 0:m.icon)},P.promise||P.type==="loading"&&!P.icon?P.icon||tn():null,P.type!=="loading"?P.icon||xt?.[ft]||VP(ft):null):null,Pr.createElement("div",{"data-content":"",className:Bu(je?.content,(o=P?.classNames)==null?void 0:o.content)},Pr.createElement("div",{"data-title":"",className:Bu(je?.title,(x=P?.classNames)==null?void 0:x.title)},typeof P.title=="function"?P.title():P.title),P.description?Pr.createElement("div",{"data-description":"",className:Bu(Ue,ye,je?.description,(E=P?.classNames)==null?void 0:E.description)},typeof P.description=="function"?P.description():P.description):null),re.isValidElement(P.cancel)?P.cancel:P.cancel&&Hg(P.cancel)?Pr.createElement("button",{"data-button":!0,"data-cancel":!0,style:P.cancelButtonStyle||nt,onClick:Nr=>{var mr,Kr;Hg(P.cancel)&&de&&((Kr=(mr=P.cancel).onClick)==null||Kr.call(mr,Nr),mt())},className:Bu(je?.cancelButton,(I=P?.classNames)==null?void 0:I.cancelButton)},P.cancel.label):null,re.isValidElement(P.action)?P.action:P.action&&Hg(P.action)?Pr.createElement("button",{"data-button":!0,"data-action":!0,style:P.actionButtonStyle||pe,onClick:Nr=>{var mr,Kr;Hg(P.action)&&((Kr=(mr=P.action).onClick)==null||Kr.call(mr,Nr),!Nr.defaultPrevented&&mt())},className:Bu(je?.actionButton,(D=P?.classNames)==null?void 0:D.actionButton)},P.action.label):null))};function Jb(){if(typeof window>"u"||typeof document>"u")return"ltr";let e=document.documentElement.getAttribute("dir");return e==="auto"||!e?window.getComputedStyle(document.documentElement).direction:e}function pL(e,n){let i={};return[e,n].forEach((l,h)=>{let d=h===1,m=d?"--mobile-offset":"--offset",o=d?lL:aL;function x(E){["top","right","bottom","left"].forEach(I=>{i[`${m}-${I}`]=typeof E=="number"?`${E}px`:E})}typeof l=="number"||typeof l=="string"?x(l):typeof l=="object"?["top","right","bottom","left"].forEach(E=>{l[E]===void 0?i[`${m}-${E}`]=o:i[`${m}-${E}`]=typeof l[E]=="number"?`${l[E]}px`:l[E]}):x(o)}),i}var mL=re.forwardRef(function(e,n){let{invert:i,position:l="bottom-right",hotkey:h=["altKey","KeyT"],expand:d,closeButton:m,className:o,offset:x,mobileOffset:E,theme:I="light",richColors:D,duration:O,style:P,visibleToasts:W=oL,toastOptions:z,dir:H=Jb(),gap:Z=AL,loadingIcon:ie,icons:ce,containerAriaLabel:he="Notifications",pauseWhenPageIsHidden:Ie}=e,[Ve,Me]=Pr.useState([]),Pe=Pr.useMemo(()=>Array.from(new Set([l].concat(Ve.filter(oe=>oe.position).map(oe=>oe.position)))),[Ve,l]),[xe,nt]=Pr.useState([]),[pe,_e]=Pr.useState(!1),[Ue,Fe]=Pr.useState(!1),[pt,ht]=Pr.useState(I!=="system"?I:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),Je=Pr.useRef(null),ze=h.join("+").replace(/Key/g,"").replace(/Digit/g,""),je=Pr.useRef(null),xt=Pr.useRef(!1),Re=Pr.useCallback(oe=>{Me(Se=>{var Ne;return(Ne=Se.find(Ye=>Ye.id===oe.id))!=null&&Ne.delete||Jc.dismiss(oe.id),Se.filter(({id:Ye})=>Ye!==oe.id)})},[]);return Pr.useEffect(()=>Jc.subscribe(oe=>{if(oe.dismiss){Me(Se=>Se.map(Ne=>Ne.id===oe.id?{...Ne,delete:!0}:Ne));return}setTimeout(()=>{c5.flushSync(()=>{Me(Se=>{let Ne=Se.findIndex(Ye=>Ye.id===oe.id);return Ne!==-1?[...Se.slice(0,Ne),{...Se[Ne],...oe},...Se.slice(Ne+1)]:[oe,...Se]})})})}),[]),Pr.useEffect(()=>{if(I!=="system"){ht(I);return}if(I==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?ht("dark"):ht("light")),typeof window>"u")return;let oe=window.matchMedia("(prefers-color-scheme: dark)");try{oe.addEventListener("change",({matches:Se})=>{ht(Se?"dark":"light")})}catch{oe.addListener(({matches:Ne})=>{try{ht(Ne?"dark":"light")}catch(Ye){console.error(Ye)}})}},[I]),Pr.useEffect(()=>{Ve.length<=1&&_e(!1)},[Ve]),Pr.useEffect(()=>{let oe=Se=>{var Ne,Ye;h.every(lt=>Se[lt]||Se.code===lt)&&(_e(!0),(Ne=Je.current)==null||Ne.focus()),Se.code==="Escape"&&(document.activeElement===Je.current||(Ye=Je.current)!=null&&Ye.contains(document.activeElement))&&_e(!1)};return document.addEventListener("keydown",oe),()=>document.removeEventListener("keydown",oe)},[h]),Pr.useEffect(()=>{if(Je.current)return()=>{je.current&&(je.current.focus({preventScroll:!0}),je.current=null,xt.current=!1)}},[Je.current]),Pr.createElement("section",{ref:n,"aria-label":`${he} ${ze}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},Pe.map((oe,Se)=>{var Ne;let[Ye,lt]=oe.split("-");return Ve.length?Pr.createElement("ol",{key:oe,dir:H==="auto"?Jb():H,tabIndex:-1,ref:Je,className:o,"data-sonner-toaster":!0,"data-theme":pt,"data-y-position":Ye,"data-lifted":pe&&Ve.length>1&&!d,"data-x-position":lt,style:{"--front-toast-height":`${((Ne=xe[0])==null?void 0:Ne.height)||0}px`,"--width":`${cL}px`,"--gap":`${Z}px`,...P,...pL(x,E)},onBlur:rt=>{xt.current&&!rt.currentTarget.contains(rt.relatedTarget)&&(xt.current=!1,je.current&&(je.current.focus({preventScroll:!0}),je.current=null))},onFocus:rt=>{rt.target instanceof HTMLElement&&rt.target.dataset.dismissible==="false"||xt.current||(xt.current=!0,je.current=rt.relatedTarget)},onMouseEnter:()=>_e(!0),onMouseMove:()=>_e(!0),onMouseLeave:()=>{Ue||_e(!1)},onDragEnd:()=>_e(!1),onPointerDown:rt=>{rt.target instanceof HTMLElement&&rt.target.dataset.dismissible==="false"||Fe(!0)},onPointerUp:()=>Fe(!1)},Ve.filter(rt=>!rt.position&&Se===0||rt.position===oe).map((rt,vt)=>{var St,Lt;return Pr.createElement(fL,{key:rt.id,icons:ce,index:vt,toast:rt,defaultRichColors:D,duration:(St=z?.duration)!=null?St:O,className:z?.className,descriptionClassName:z?.descriptionClassName,invert:i,visibleToasts:W,closeButton:(Lt=z?.closeButton)!=null?Lt:m,interacting:Ue,position:oe,style:z?.style,unstyled:z?.unstyled,classNames:z?.classNames,cancelButtonStyle:z?.cancelButtonStyle,actionButtonStyle:z?.actionButtonStyle,removeToast:Re,toasts:Ve.filter(Wt=>Wt.position==rt.position),heights:xe.filter(Wt=>Wt.position==rt.position),setHeights:nt,expandByDefault:d,gap:Z,loadingIcon:ie,expanded:pe,pauseWhenPageIsHidden:Ie,swipeDirections:e.swipeDirections})})):null}))});const gL=({...e})=>{const{theme:n="system"}=jP();return ae.jsx(mL,{theme:n,className:"toaster group",toastOptions:{classNames:{toast:"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg",description:"group-[.toast]:text-muted-foreground",actionButton:"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground",cancelButton:"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground"}},...e})};var yL=fy[" useId ".trim().toString()]||(()=>{}),vL=0;function vy(e){const[n,i]=re.useState(yL());return Cl(()=>{i(l=>l??String(vL++))},[e]),n?`radix-${n}`:""}const _L=["top","right","bottom","left"],_d=Math.min,EA=Math.max,G0=Math.round,jg=Math.floor,rh=e=>({x:e,y:e}),wL={left:"right",right:"left",bottom:"top",top:"bottom"},xL={start:"end",end:"start"};function h_(e,n,i){return EA(e,_d(n,i))}function Qh(e,n){return typeof e=="function"?e(n):e}function Oh(e){return e.split("-")[0]}function xp(e){return e.split("-")[1]}function Bw(e){return e==="x"?"y":"x"}function Cw(e){return e==="y"?"height":"width"}const bL=new Set(["top","bottom"]);function eh(e){return bL.has(Oh(e))?"y":"x"}function Ew(e){return Bw(eh(e))}function BL(e,n,i){i===void 0&&(i=!1);const l=xp(e),h=Ew(e),d=Cw(h);let m=h==="x"?l===(i?"end":"start")?"right":"left":l==="start"?"bottom":"top";return n.reference[d]>n.floating[d]&&(m=K0(m)),[m,K0(m)]}function CL(e){const n=K0(e);return[d_(e),n,d_(n)]}function d_(e){return e.replace(/start|end/g,n=>xL[n])}const e2=["left","right"],t2=["right","left"],EL=["top","bottom"],SL=["bottom","top"];function FL(e,n,i){switch(e){case"top":case"bottom":return i?n?t2:e2:n?e2:t2;case"left":case"right":return n?EL:SL;default:return[]}}function IL(e,n,i,l){const h=xp(e);let d=FL(Oh(e),i==="start",l);return h&&(d=d.map(m=>m+"-"+h),n&&(d=d.concat(d.map(d_)))),d}function K0(e){return e.replace(/left|right|bottom|top/g,n=>wL[n])}function TL(e){return{top:0,right:0,bottom:0,left:0,...e}}function Z5(e){return typeof e!="number"?TL(e):{top:e,right:e,bottom:e,left:e}}function q0(e){const{x:n,y:i,width:l,height:h}=e;return{width:l,height:h,top:i,left:n,right:n+l,bottom:i+h,x:n,y:i}}function r2(e,n,i){let{reference:l,floating:h}=e;const d=eh(n),m=Ew(n),o=Cw(m),x=Oh(n),E=d==="y",I=l.x+l.width/2-h.width/2,D=l.y+l.height/2-h.height/2,O=l[o]/2-h[o]/2;let P;switch(x){case"top":P={x:I,y:l.y-h.height};break;case"bottom":P={x:I,y:l.y+l.height};break;case"right":P={x:l.x+l.width,y:D};break;case"left":P={x:l.x-h.width,y:D};break;default:P={x:l.x,y:l.y}}switch(xp(n)){case"start":P[m]-=O*(i&&E?-1:1);break;case"end":P[m]+=O*(i&&E?-1:1);break}return P}const PL=async(e,n,i)=>{const{placement:l="bottom",strategy:h="absolute",middleware:d=[],platform:m}=i,o=d.filter(Boolean),x=await(m.isRTL==null?void 0:m.isRTL(n));let E=await m.getElementRects({reference:e,floating:n,strategy:h}),{x:I,y:D}=r2(E,l,x),O=l,P={},W=0;for(let z=0;z<o.length;z++){const{name:H,fn:Z}=o[z],{x:ie,y:ce,data:he,reset:Ie}=await Z({x:I,y:D,initialPlacement:l,placement:O,strategy:h,middlewareData:P,rects:E,platform:m,elements:{reference:e,floating:n}});I=ie??I,D=ce??D,P={...P,[H]:{...P[H],...he}},Ie&&W<=50&&(W++,typeof Ie=="object"&&(Ie.placement&&(O=Ie.placement),Ie.rects&&(E=Ie.rects===!0?await m.getElementRects({reference:e,floating:n,strategy:h}):Ie.rects),{x:I,y:D}=r2(E,O,x)),z=-1)}return{x:I,y:D,placement:O,strategy:h,middlewareData:P}};async function Mm(e,n){var i;n===void 0&&(n={});const{x:l,y:h,platform:d,rects:m,elements:o,strategy:x}=e,{boundary:E="clippingAncestors",rootBoundary:I="viewport",elementContext:D="floating",altBoundary:O=!1,padding:P=0}=Qh(n,e),W=Z5(P),H=o[O?D==="floating"?"reference":"floating":D],Z=q0(await d.getClippingRect({element:(i=await(d.isElement==null?void 0:d.isElement(H)))==null||i?H:H.contextElement||await(d.getDocumentElement==null?void 0:d.getDocumentElement(o.floating)),boundary:E,rootBoundary:I,strategy:x})),ie=D==="floating"?{x:l,y:h,width:m.floating.width,height:m.floating.height}:m.reference,ce=await(d.getOffsetParent==null?void 0:d.getOffsetParent(o.floating)),he=await(d.isElement==null?void 0:d.isElement(ce))?await(d.getScale==null?void 0:d.getScale(ce))||{x:1,y:1}:{x:1,y:1},Ie=q0(d.convertOffsetParentRelativeRectToViewportRelativeRect?await d.convertOffsetParentRelativeRectToViewportRelativeRect({elements:o,rect:ie,offsetParent:ce,strategy:x}):ie);return{top:(Z.top-Ie.top+W.top)/he.y,bottom:(Ie.bottom-Z.bottom+W.bottom)/he.y,left:(Z.left-Ie.left+W.left)/he.x,right:(Ie.right-Z.right+W.right)/he.x}}const LL=e=>({name:"arrow",options:e,async fn(n){const{x:i,y:l,placement:h,rects:d,platform:m,elements:o,middlewareData:x}=n,{element:E,padding:I=0}=Qh(e,n)||{};if(E==null)return{};const D=Z5(I),O={x:i,y:l},P=Ew(h),W=Cw(P),z=await m.getDimensions(E),H=P==="y",Z=H?"top":"left",ie=H?"bottom":"right",ce=H?"clientHeight":"clientWidth",he=d.reference[W]+d.reference[P]-O[P]-d.floating[W],Ie=O[P]-d.reference[P],Ve=await(m.getOffsetParent==null?void 0:m.getOffsetParent(E));let Me=Ve?Ve[ce]:0;(!Me||!await(m.isElement==null?void 0:m.isElement(Ve)))&&(Me=o.floating[ce]||d.floating[W]);const Pe=he/2-Ie/2,xe=Me/2-z[W]/2-1,nt=_d(D[Z],xe),pe=_d(D[ie],xe),_e=nt,Ue=Me-z[W]-pe,Fe=Me/2-z[W]/2+Pe,pt=h_(_e,Fe,Ue),ht=!x.arrow&&xp(h)!=null&&Fe!==pt&&d.reference[W]/2-(Fe<_e?nt:pe)-z[W]/2<0,Je=ht?Fe<_e?Fe-_e:Fe-Ue:0;return{[P]:O[P]+Je,data:{[P]:pt,centerOffset:Fe-pt-Je,...ht&&{alignmentOffset:Je}},reset:ht}}}),ML=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(n){var i,l;const{placement:h,middlewareData:d,rects:m,initialPlacement:o,platform:x,elements:E}=n,{mainAxis:I=!0,crossAxis:D=!0,fallbackPlacements:O,fallbackStrategy:P="bestFit",fallbackAxisSideDirection:W="none",flipAlignment:z=!0,...H}=Qh(e,n);if((i=d.arrow)!=null&&i.alignmentOffset)return{};const Z=Oh(h),ie=eh(o),ce=Oh(o)===o,he=await(x.isRTL==null?void 0:x.isRTL(E.floating)),Ie=O||(ce||!z?[K0(o)]:CL(o)),Ve=W!=="none";!O&&Ve&&Ie.push(...IL(o,z,W,he));const Me=[o,...Ie],Pe=await Mm(n,H),xe=[];let nt=((l=d.flip)==null?void 0:l.overflows)||[];if(I&&xe.push(Pe[Z]),D){const Fe=BL(h,m,he);xe.push(Pe[Fe[0]],Pe[Fe[1]])}if(nt=[...nt,{placement:h,overflows:xe}],!xe.every(Fe=>Fe<=0)){var pe,_e;const Fe=(((pe=d.flip)==null?void 0:pe.index)||0)+1,pt=Me[Fe];if(pt&&(!(D==="alignment"?ie!==eh(pt):!1)||nt.every(ze=>eh(ze.placement)===ie?ze.overflows[0]>0:!0)))return{data:{index:Fe,overflows:nt},reset:{placement:pt}};let ht=(_e=nt.filter(Je=>Je.overflows[0]<=0).sort((Je,ze)=>Je.overflows[1]-ze.overflows[1])[0])==null?void 0:_e.placement;if(!ht)switch(P){case"bestFit":{var Ue;const Je=(Ue=nt.filter(ze=>{if(Ve){const je=eh(ze.placement);return je===ie||je==="y"}return!0}).map(ze=>[ze.placement,ze.overflows.filter(je=>je>0).reduce((je,xt)=>je+xt,0)]).sort((ze,je)=>ze[1]-je[1])[0])==null?void 0:Ue[0];Je&&(ht=Je);break}case"initialPlacement":ht=o;break}if(h!==ht)return{reset:{placement:ht}}}return{}}}};function n2(e,n){return{top:e.top-n.height,right:e.right-n.width,bottom:e.bottom-n.height,left:e.left-n.width}}function i2(e){return _L.some(n=>e[n]>=0)}const kL=function(e){return e===void 0&&(e={}),{name:"hide",options:e,async fn(n){const{rects:i}=n,{strategy:l="referenceHidden",...h}=Qh(e,n);switch(l){case"referenceHidden":{const d=await Mm(n,{...h,elementContext:"reference"}),m=n2(d,i.reference);return{data:{referenceHiddenOffsets:m,referenceHidden:i2(m)}}}case"escaped":{const d=await Mm(n,{...h,altBoundary:!0}),m=n2(d,i.floating);return{data:{escapedOffsets:m,escaped:i2(m)}}}default:return{}}}}},X5=new Set(["left","top"]);async function UL(e,n){const{placement:i,platform:l,elements:h}=e,d=await(l.isRTL==null?void 0:l.isRTL(h.floating)),m=Oh(i),o=xp(i),x=eh(i)==="y",E=X5.has(m)?-1:1,I=d&&x?-1:1,D=Qh(n,e);let{mainAxis:O,crossAxis:P,alignmentAxis:W}=typeof D=="number"?{mainAxis:D,crossAxis:0,alignmentAxis:null}:{mainAxis:D.mainAxis||0,crossAxis:D.crossAxis||0,alignmentAxis:D.alignmentAxis};return o&&typeof W=="number"&&(P=o==="end"?W*-1:W),x?{x:P*I,y:O*E}:{x:O*E,y:P*I}}const DL=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(n){var i,l;const{x:h,y:d,placement:m,middlewareData:o}=n,x=await UL(n,e);return m===((i=o.offset)==null?void 0:i.placement)&&(l=o.arrow)!=null&&l.alignmentOffset?{}:{x:h+x.x,y:d+x.y,data:{...x,placement:m}}}}},RL=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(n){const{x:i,y:l,placement:h}=n,{mainAxis:d=!0,crossAxis:m=!1,limiter:o={fn:H=>{let{x:Z,y:ie}=H;return{x:Z,y:ie}}},...x}=Qh(e,n),E={x:i,y:l},I=await Mm(n,x),D=eh(Oh(h)),O=Bw(D);let P=E[O],W=E[D];if(d){const H=O==="y"?"top":"left",Z=O==="y"?"bottom":"right",ie=P+I[H],ce=P-I[Z];P=h_(ie,P,ce)}if(m){const H=D==="y"?"top":"left",Z=D==="y"?"bottom":"right",ie=W+I[H],ce=W-I[Z];W=h_(ie,W,ce)}const z=o.fn({...n,[O]:P,[D]:W});return{...z,data:{x:z.x-i,y:z.y-l,enabled:{[O]:d,[D]:m}}}}}},NL=function(e){return e===void 0&&(e={}),{options:e,fn(n){const{x:i,y:l,placement:h,rects:d,middlewareData:m}=n,{offset:o=0,mainAxis:x=!0,crossAxis:E=!0}=Qh(e,n),I={x:i,y:l},D=eh(h),O=Bw(D);let P=I[O],W=I[D];const z=Qh(o,n),H=typeof z=="number"?{mainAxis:z,crossAxis:0}:{mainAxis:0,crossAxis:0,...z};if(x){const ce=O==="y"?"height":"width",he=d.reference[O]-d.floating[ce]+H.mainAxis,Ie=d.reference[O]+d.reference[ce]-H.mainAxis;P<he?P=he:P>Ie&&(P=Ie)}if(E){var Z,ie;const ce=O==="y"?"width":"height",he=X5.has(Oh(h)),Ie=d.reference[D]-d.floating[ce]+(he&&((Z=m.offset)==null?void 0:Z[D])||0)+(he?0:H.crossAxis),Ve=d.reference[D]+d.reference[ce]+(he?0:((ie=m.offset)==null?void 0:ie[D])||0)-(he?H.crossAxis:0);W<Ie?W=Ie:W>Ve&&(W=Ve)}return{[O]:P,[D]:W}}}},QL=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(n){var i,l;const{placement:h,rects:d,platform:m,elements:o}=n,{apply:x=()=>{},...E}=Qh(e,n),I=await Mm(n,E),D=Oh(h),O=xp(h),P=eh(h)==="y",{width:W,height:z}=d.floating;let H,Z;D==="top"||D==="bottom"?(H=D,Z=O===(await(m.isRTL==null?void 0:m.isRTL(o.floating))?"start":"end")?"left":"right"):(Z=D,H=O==="end"?"top":"bottom");const ie=z-I.top-I.bottom,ce=W-I.left-I.right,he=_d(z-I[H],ie),Ie=_d(W-I[Z],ce),Ve=!n.middlewareData.shift;let Me=he,Pe=Ie;if((i=n.middlewareData.shift)!=null&&i.enabled.x&&(Pe=ce),(l=n.middlewareData.shift)!=null&&l.enabled.y&&(Me=ie),Ve&&!O){const nt=EA(I.left,0),pe=EA(I.right,0),_e=EA(I.top,0),Ue=EA(I.bottom,0);P?Pe=W-2*(nt!==0||pe!==0?nt+pe:EA(I.left,I.right)):Me=z-2*(_e!==0||Ue!==0?_e+Ue:EA(I.top,I.bottom))}await x({...n,availableWidth:Pe,availableHeight:Me});const xe=await m.getDimensions(o.floating);return W!==xe.width||z!==xe.height?{reset:{rects:!0}}:{}}}};function _y(){return typeof window<"u"}function bp(e){return Y5(e)?(e.nodeName||"").toLowerCase():"#document"}function FA(e){var n;return(e==null||(n=e.ownerDocument)==null?void 0:n.defaultView)||window}function sh(e){var n;return(n=(Y5(e)?e.ownerDocument:e.document)||window.document)==null?void 0:n.documentElement}function Y5(e){return _y()?e instanceof Node||e instanceof FA(e).Node:!1}function Tu(e){return _y()?e instanceof Element||e instanceof FA(e).Element:!1}function ih(e){return _y()?e instanceof HTMLElement||e instanceof FA(e).HTMLElement:!1}function s2(e){return!_y()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof FA(e).ShadowRoot}const OL=new Set(["inline","contents"]);function Wm(e){const{overflow:n,overflowX:i,overflowY:l,display:h}=Pu(e);return/auto|scroll|overlay|hidden|clip/.test(n+l+i)&&!OL.has(h)}const zL=new Set(["table","td","th"]);function HL(e){return zL.has(bp(e))}const jL=[":popover-open",":modal"];function wy(e){return jL.some(n=>{try{return e.matches(n)}catch{return!1}})}const VL=["transform","translate","scale","rotate","perspective"],GL=["transform","translate","scale","rotate","perspective","filter"],KL=["paint","layout","strict","content"];function Sw(e){const n=Fw(),i=Tu(e)?Pu(e):e;return VL.some(l=>i[l]?i[l]!=="none":!1)||(i.containerType?i.containerType!=="normal":!1)||!n&&(i.backdropFilter?i.backdropFilter!=="none":!1)||!n&&(i.filter?i.filter!=="none":!1)||GL.some(l=>(i.willChange||"").includes(l))||KL.some(l=>(i.contain||"").includes(l))}function qL(e){let n=wd(e);for(;ih(n)&&!gp(n);){if(Sw(n))return n;if(wy(n))return null;n=wd(n)}return null}function Fw(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const $L=new Set(["html","body","#document"]);function gp(e){return $L.has(bp(e))}function Pu(e){return FA(e).getComputedStyle(e)}function xy(e){return Tu(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function wd(e){if(bp(e)==="html")return e;const n=e.assignedSlot||e.parentNode||s2(e)&&e.host||sh(e);return s2(n)?n.host:n}function J5(e){const n=wd(e);return gp(n)?e.ownerDocument?e.ownerDocument.body:e.body:ih(n)&&Wm(n)?n:J5(n)}function km(e,n,i){var l;n===void 0&&(n=[]),i===void 0&&(i=!0);const h=J5(e),d=h===((l=e.ownerDocument)==null?void 0:l.body),m=FA(h);if(d){const o=f_(m);return n.concat(m,m.visualViewport||[],Wm(h)?h:[],o&&i?km(o):[])}return n.concat(h,km(h,[],i))}function f_(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function eE(e){const n=Pu(e);let i=parseFloat(n.width)||0,l=parseFloat(n.height)||0;const h=ih(e),d=h?e.offsetWidth:i,m=h?e.offsetHeight:l,o=G0(i)!==d||G0(l)!==m;return o&&(i=d,l=m),{width:i,height:l,$:o}}function Iw(e){return Tu(e)?e:e.contextElement}function cp(e){const n=Iw(e);if(!ih(n))return rh(1);const i=n.getBoundingClientRect(),{width:l,height:h,$:d}=eE(n);let m=(d?G0(i.width):i.width)/l,o=(d?G0(i.height):i.height)/h;return(!m||!Number.isFinite(m))&&(m=1),(!o||!Number.isFinite(o))&&(o=1),{x:m,y:o}}const WL=rh(0);function tE(e){const n=FA(e);return!Fw()||!n.visualViewport?WL:{x:n.visualViewport.offsetLeft,y:n.visualViewport.offsetTop}}function ZL(e,n,i){return n===void 0&&(n=!1),!i||n&&i!==FA(e)?!1:n}function rf(e,n,i,l){n===void 0&&(n=!1),i===void 0&&(i=!1);const h=e.getBoundingClientRect(),d=Iw(e);let m=rh(1);n&&(l?Tu(l)&&(m=cp(l)):m=cp(e));const o=ZL(d,i,l)?tE(d):rh(0);let x=(h.left+o.x)/m.x,E=(h.top+o.y)/m.y,I=h.width/m.x,D=h.height/m.y;if(d){const O=FA(d),P=l&&Tu(l)?FA(l):l;let W=O,z=f_(W);for(;z&&l&&P!==W;){const H=cp(z),Z=z.getBoundingClientRect(),ie=Pu(z),ce=Z.left+(z.clientLeft+parseFloat(ie.paddingLeft))*H.x,he=Z.top+(z.clientTop+parseFloat(ie.paddingTop))*H.y;x*=H.x,E*=H.y,I*=H.x,D*=H.y,x+=ce,E+=he,W=FA(z),z=f_(W)}}return q0({width:I,height:D,x,y:E})}function by(e,n){const i=xy(e).scrollLeft;return n?n.left+i:rf(sh(e)).left+i}function rE(e,n){const i=e.getBoundingClientRect(),l=i.left+n.scrollLeft-by(e,i),h=i.top+n.scrollTop;return{x:l,y:h}}function XL(e){let{elements:n,rect:i,offsetParent:l,strategy:h}=e;const d=h==="fixed",m=sh(l),o=n?wy(n.floating):!1;if(l===m||o&&d)return i;let x={scrollLeft:0,scrollTop:0},E=rh(1);const I=rh(0),D=ih(l);if((D||!D&&!d)&&((bp(l)!=="body"||Wm(m))&&(x=xy(l)),ih(l))){const P=rf(l);E=cp(l),I.x=P.x+l.clientLeft,I.y=P.y+l.clientTop}const O=m&&!D&&!d?rE(m,x):rh(0);return{width:i.width*E.x,height:i.height*E.y,x:i.x*E.x-x.scrollLeft*E.x+I.x+O.x,y:i.y*E.y-x.scrollTop*E.y+I.y+O.y}}function YL(e){return Array.from(e.getClientRects())}function JL(e){const n=sh(e),i=xy(e),l=e.ownerDocument.body,h=EA(n.scrollWidth,n.clientWidth,l.scrollWidth,l.clientWidth),d=EA(n.scrollHeight,n.clientHeight,l.scrollHeight,l.clientHeight);let m=-i.scrollLeft+by(e);const o=-i.scrollTop;return Pu(l).direction==="rtl"&&(m+=EA(n.clientWidth,l.clientWidth)-h),{width:h,height:d,x:m,y:o}}const o2=25;function eM(e,n){const i=FA(e),l=sh(e),h=i.visualViewport;let d=l.clientWidth,m=l.clientHeight,o=0,x=0;if(h){d=h.width,m=h.height;const I=Fw();(!I||I&&n==="fixed")&&(o=h.offsetLeft,x=h.offsetTop)}const E=by(l);if(E<=0){const I=l.ownerDocument,D=I.body,O=getComputedStyle(D),P=I.compatMode==="CSS1Compat"&&parseFloat(O.marginLeft)+parseFloat(O.marginRight)||0,W=Math.abs(l.clientWidth-D.clientWidth-P);W<=o2&&(d-=W)}else E<=o2&&(d+=E);return{width:d,height:m,x:o,y:x}}const tM=new Set(["absolute","fixed"]);function rM(e,n){const i=rf(e,!0,n==="fixed"),l=i.top+e.clientTop,h=i.left+e.clientLeft,d=ih(e)?cp(e):rh(1),m=e.clientWidth*d.x,o=e.clientHeight*d.y,x=h*d.x,E=l*d.y;return{width:m,height:o,x,y:E}}function a2(e,n,i){let l;if(n==="viewport")l=eM(e,i);else if(n==="document")l=JL(sh(e));else if(Tu(n))l=rM(n,i);else{const h=tE(e);l={x:n.x-h.x,y:n.y-h.y,width:n.width,height:n.height}}return q0(l)}function nE(e,n){const i=wd(e);return i===n||!Tu(i)||gp(i)?!1:Pu(i).position==="fixed"||nE(i,n)}function nM(e,n){const i=n.get(e);if(i)return i;let l=km(e,[],!1).filter(o=>Tu(o)&&bp(o)!=="body"),h=null;const d=Pu(e).position==="fixed";let m=d?wd(e):e;for(;Tu(m)&&!gp(m);){const o=Pu(m),x=Sw(m);!x&&o.position==="fixed"&&(h=null),(d?!x&&!h:!x&&o.position==="static"&&!!h&&tM.has(h.position)||Wm(m)&&!x&&nE(e,m))?l=l.filter(I=>I!==m):h=o,m=wd(m)}return n.set(e,l),l}function iM(e){let{element:n,boundary:i,rootBoundary:l,strategy:h}=e;const m=[...i==="clippingAncestors"?wy(n)?[]:nM(n,this._c):[].concat(i),l],o=m[0],x=m.reduce((E,I)=>{const D=a2(n,I,h);return E.top=EA(D.top,E.top),E.right=_d(D.right,E.right),E.bottom=_d(D.bottom,E.bottom),E.left=EA(D.left,E.left),E},a2(n,o,h));return{width:x.right-x.left,height:x.bottom-x.top,x:x.left,y:x.top}}function sM(e){const{width:n,height:i}=eE(e);return{width:n,height:i}}function oM(e,n,i){const l=ih(n),h=sh(n),d=i==="fixed",m=rf(e,!0,d,n);let o={scrollLeft:0,scrollTop:0};const x=rh(0);function E(){x.x=by(h)}if(l||!l&&!d)if((bp(n)!=="body"||Wm(h))&&(o=xy(n)),l){const P=rf(n,!0,d,n);x.x=P.x+n.clientLeft,x.y=P.y+n.clientTop}else h&&E();d&&!l&&h&&E();const I=h&&!l&&!d?rE(h,o):rh(0),D=m.left+o.scrollLeft-x.x-I.x,O=m.top+o.scrollTop-x.y-I.y;return{x:D,y:O,width:m.width,height:m.height}}function Zv(e){return Pu(e).position==="static"}function l2(e,n){if(!ih(e)||Pu(e).position==="fixed")return null;if(n)return n(e);let i=e.offsetParent;return sh(e)===i&&(i=i.ownerDocument.body),i}function iE(e,n){const i=FA(e);if(wy(e))return i;if(!ih(e)){let h=wd(e);for(;h&&!gp(h);){if(Tu(h)&&!Zv(h))return h;h=wd(h)}return i}let l=l2(e,n);for(;l&&HL(l)&&Zv(l);)l=l2(l,n);return l&&gp(l)&&Zv(l)&&!Sw(l)?i:l||qL(e)||i}const aM=async function(e){const n=this.getOffsetParent||iE,i=this.getDimensions,l=await i(e.floating);return{reference:oM(e.reference,await n(e.floating),e.strategy),floating:{x:0,y:0,width:l.width,height:l.height}}};function lM(e){return Pu(e).direction==="rtl"}const cM={convertOffsetParentRelativeRectToViewportRelativeRect:XL,getDocumentElement:sh,getClippingRect:iM,getOffsetParent:iE,getElementRects:aM,getClientRects:YL,getDimensions:sM,getScale:cp,isElement:Tu,isRTL:lM};function sE(e,n){return e.x===n.x&&e.y===n.y&&e.width===n.width&&e.height===n.height}function AM(e,n){let i=null,l;const h=sh(e);function d(){var o;clearTimeout(l),(o=i)==null||o.disconnect(),i=null}function m(o,x){o===void 0&&(o=!1),x===void 0&&(x=1),d();const E=e.getBoundingClientRect(),{left:I,top:D,width:O,height:P}=E;if(o||n(),!O||!P)return;const W=jg(D),z=jg(h.clientWidth-(I+O)),H=jg(h.clientHeight-(D+P)),Z=jg(I),ce={rootMargin:-W+"px "+-z+"px "+-H+"px "+-Z+"px",threshold:EA(0,_d(1,x))||1};let he=!0;function Ie(Ve){const Me=Ve[0].intersectionRatio;if(Me!==x){if(!he)return m();Me?m(!1,Me):l=setTimeout(()=>{m(!1,1e-7)},1e3)}Me===1&&!sE(E,e.getBoundingClientRect())&&m(),he=!1}try{i=new IntersectionObserver(Ie,{...ce,root:h.ownerDocument})}catch{i=new IntersectionObserver(Ie,ce)}i.observe(e)}return m(!0),d}function uM(e,n,i,l){l===void 0&&(l={});const{ancestorScroll:h=!0,ancestorResize:d=!0,elementResize:m=typeof ResizeObserver=="function",layoutShift:o=typeof IntersectionObserver=="function",animationFrame:x=!1}=l,E=Iw(e),I=h||d?[...E?km(E):[],...km(n)]:[];I.forEach(Z=>{h&&Z.addEventListener("scroll",i,{passive:!0}),d&&Z.addEventListener("resize",i)});const D=E&&o?AM(E,i):null;let O=-1,P=null;m&&(P=new ResizeObserver(Z=>{let[ie]=Z;ie&&ie.target===E&&P&&(P.unobserve(n),cancelAnimationFrame(O),O=requestAnimationFrame(()=>{var ce;(ce=P)==null||ce.observe(n)})),i()}),E&&!x&&P.observe(E),P.observe(n));let W,z=x?rf(e):null;x&&H();function H(){const Z=rf(e);z&&!sE(z,Z)&&i(),z=Z,W=requestAnimationFrame(H)}return i(),()=>{var Z;I.forEach(ie=>{h&&ie.removeEventListener("scroll",i),d&&ie.removeEventListener("resize",i)}),D?.(),(Z=P)==null||Z.disconnect(),P=null,x&&cancelAnimationFrame(W)}}const hM=DL,dM=RL,fM=ML,pM=QL,mM=kL,c2=LL,gM=NL,yM=(e,n,i)=>{const l=new Map,h={platform:cM,...i},d={...h.platform,_c:l};return PL(e,n,{...h,platform:d})};var vM=typeof document<"u",_M=function(){},P0=vM?re.useLayoutEffect:_M;function $0(e,n){if(e===n)return!0;if(typeof e!=typeof n)return!1;if(typeof e=="function"&&e.toString()===n.toString())return!0;let i,l,h;if(e&&n&&typeof e=="object"){if(Array.isArray(e)){if(i=e.length,i!==n.length)return!1;for(l=i;l--!==0;)if(!$0(e[l],n[l]))return!1;return!0}if(h=Object.keys(e),i=h.length,i!==Object.keys(n).length)return!1;for(l=i;l--!==0;)if(!{}.hasOwnProperty.call(n,h[l]))return!1;for(l=i;l--!==0;){const d=h[l];if(!(d==="_owner"&&e.$$typeof)&&!$0(e[d],n[d]))return!1}return!0}return e!==e&&n!==n}function oE(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function A2(e,n){const i=oE(e);return Math.round(n*i)/i}function Xv(e){const n=re.useRef(e);return P0(()=>{n.current=e}),n}function wM(e){e===void 0&&(e={});const{placement:n="bottom",strategy:i="absolute",middleware:l=[],platform:h,elements:{reference:d,floating:m}={},transform:o=!0,whileElementsMounted:x,open:E}=e,[I,D]=re.useState({x:0,y:0,strategy:i,placement:n,middlewareData:{},isPositioned:!1}),[O,P]=re.useState(l);$0(O,l)||P(l);const[W,z]=re.useState(null),[H,Z]=re.useState(null),ie=re.useCallback(ze=>{ze!==Ve.current&&(Ve.current=ze,z(ze))},[]),ce=re.useCallback(ze=>{ze!==Me.current&&(Me.current=ze,Z(ze))},[]),he=d||W,Ie=m||H,Ve=re.useRef(null),Me=re.useRef(null),Pe=re.useRef(I),xe=x!=null,nt=Xv(x),pe=Xv(h),_e=Xv(E),Ue=re.useCallback(()=>{if(!Ve.current||!Me.current)return;const ze={placement:n,strategy:i,middleware:O};pe.current&&(ze.platform=pe.current),yM(Ve.current,Me.current,ze).then(je=>{const xt={...je,isPositioned:_e.current!==!1};Fe.current&&!$0(Pe.current,xt)&&(Pe.current=xt,_p.flushSync(()=>{D(xt)}))})},[O,n,i,pe,_e]);P0(()=>{E===!1&&Pe.current.isPositioned&&(Pe.current.isPositioned=!1,D(ze=>({...ze,isPositioned:!1})))},[E]);const Fe=re.useRef(!1);P0(()=>(Fe.current=!0,()=>{Fe.current=!1}),[]),P0(()=>{if(he&&(Ve.current=he),Ie&&(Me.current=Ie),he&&Ie){if(nt.current)return nt.current(he,Ie,Ue);Ue()}},[he,Ie,Ue,nt,xe]);const pt=re.useMemo(()=>({reference:Ve,floating:Me,setReference:ie,setFloating:ce}),[ie,ce]),ht=re.useMemo(()=>({reference:he,floating:Ie}),[he,Ie]),Je=re.useMemo(()=>{const ze={position:i,left:0,top:0};if(!ht.floating)return ze;const je=A2(ht.floating,I.x),xt=A2(ht.floating,I.y);return o?{...ze,transform:"translate("+je+"px, "+xt+"px)",...oE(ht.floating)>=1.5&&{willChange:"transform"}}:{position:i,left:je,top:xt}},[i,o,ht.floating,I.x,I.y]);return re.useMemo(()=>({...I,update:Ue,refs:pt,elements:ht,floatingStyles:Je}),[I,Ue,pt,ht,Je])}const xM=e=>{function n(i){return{}.hasOwnProperty.call(i,"current")}return{name:"arrow",options:e,fn(i){const{element:l,padding:h}=typeof e=="function"?e(i):e;return l&&n(l)?l.current!=null?c2({element:l.current,padding:h}).fn(i):{}:l?c2({element:l,padding:h}).fn(i):{}}}},bM=(e,n)=>({...hM(e),options:[e,n]}),BM=(e,n)=>({...dM(e),options:[e,n]}),CM=(e,n)=>({...gM(e),options:[e,n]}),EM=(e,n)=>({...fM(e),options:[e,n]}),SM=(e,n)=>({...pM(e),options:[e,n]}),FM=(e,n)=>({...mM(e),options:[e,n]}),IM=(e,n)=>({...xM(e),options:[e,n]});var TM="Arrow",aE=re.forwardRef((e,n)=>{const{children:i,width:l=10,height:h=5,...d}=e;return ae.jsx(oi.svg,{...d,ref:n,width:l,height:h,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:e.asChild?i:ae.jsx("polygon",{points:"0,0 30,0 15,10"})})});aE.displayName=TM;var PM=aE;function Tw(e){const[n,i]=re.useState(void 0);return Cl(()=>{if(e){i({width:e.offsetWidth,height:e.offsetHeight});const l=new ResizeObserver(h=>{if(!Array.isArray(h)||!h.length)return;const d=h[0];let m,o;if("borderBoxSize"in d){const x=d.borderBoxSize,E=Array.isArray(x)?x[0]:x;m=E.inlineSize,o=E.blockSize}else m=e.offsetWidth,o=e.offsetHeight;i({width:m,height:o})});return l.observe(e,{box:"border-box"}),()=>l.unobserve(e)}else i(void 0)},[e]),n}var Pw="Popper",[lE,By]=Hh(Pw),[LM,cE]=lE(Pw),AE=e=>{const{__scopePopper:n,children:i}=e,[l,h]=re.useState(null);return ae.jsx(LM,{scope:n,anchor:l,onAnchorChange:h,children:i})};AE.displayName=Pw;var uE="PopperAnchor",hE=re.forwardRef((e,n)=>{const{__scopePopper:i,virtualRef:l,...h}=e,d=cE(uE,i),m=re.useRef(null),o=ds(n,m),x=re.useRef(null);return re.useEffect(()=>{const E=x.current;x.current=l?.current||m.current,E!==x.current&&d.onAnchorChange(x.current)}),l?null:ae.jsx(oi.div,{...h,ref:o})});hE.displayName=uE;var Lw="PopperContent",[MM,kM]=lE(Lw),dE=re.forwardRef((e,n)=>{const{__scopePopper:i,side:l="bottom",sideOffset:h=0,align:d="center",alignOffset:m=0,arrowPadding:o=0,avoidCollisions:x=!0,collisionBoundary:E=[],collisionPadding:I=0,sticky:D="partial",hideWhenDetached:O=!1,updatePositionStrategy:P="optimized",onPlaced:W,...z}=e,H=cE(Lw,i),[Z,ie]=re.useState(null),ce=ds(n,rt=>ie(rt)),[he,Ie]=re.useState(null),Ve=Tw(he),Me=Ve?.width??0,Pe=Ve?.height??0,xe=l+(d!=="center"?"-"+d:""),nt=typeof I=="number"?I:{top:0,right:0,bottom:0,left:0,...I},pe=Array.isArray(E)?E:[E],_e=pe.length>0,Ue={padding:nt,boundary:pe.filter(DM),altBoundary:_e},{refs:Fe,floatingStyles:pt,placement:ht,isPositioned:Je,middlewareData:ze}=wM({strategy:"fixed",placement:xe,whileElementsMounted:(...rt)=>uM(...rt,{animationFrame:P==="always"}),elements:{reference:H.anchor},middleware:[bM({mainAxis:h+Pe,alignmentAxis:m}),x&&BM({mainAxis:!0,crossAxis:!1,limiter:D==="partial"?CM():void 0,...Ue}),x&&EM({...Ue}),SM({...Ue,apply:({elements:rt,rects:vt,availableWidth:St,availableHeight:Lt})=>{const{width:Wt,height:ar}=vt.reference,hr=rt.floating.style;hr.setProperty("--radix-popper-available-width",`${St}px`),hr.setProperty("--radix-popper-available-height",`${Lt}px`),hr.setProperty("--radix-popper-anchor-width",`${Wt}px`),hr.setProperty("--radix-popper-anchor-height",`${ar}px`)}}),he&&IM({element:he,padding:o}),RM({arrowWidth:Me,arrowHeight:Pe}),O&&FM({strategy:"referenceHidden",...Ue})]}),[je,xt]=mE(ht),Re=iu(W);Cl(()=>{Je&&Re?.()},[Je,Re]);const oe=ze.arrow?.x,Se=ze.arrow?.y,Ne=ze.arrow?.centerOffset!==0,[Ye,lt]=re.useState();return Cl(()=>{Z&&lt(window.getComputedStyle(Z).zIndex)},[Z]),ae.jsx("div",{ref:Fe.setFloating,"data-radix-popper-content-wrapper":"",style:{...pt,transform:Je?pt.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:Ye,"--radix-popper-transform-origin":[ze.transformOrigin?.x,ze.transformOrigin?.y].join(" "),...ze.hide?.referenceHidden&&{visibility:"hidden",pointerEvents:"none"}},dir:e.dir,children:ae.jsx(MM,{scope:i,placedSide:je,onArrowChange:Ie,arrowX:oe,arrowY:Se,shouldHideArrow:Ne,children:ae.jsx(oi.div,{"data-side":je,"data-align":xt,...z,ref:ce,style:{...z.style,animation:Je?void 0:"none"}})})})});dE.displayName=Lw;var fE="PopperArrow",UM={top:"bottom",right:"left",bottom:"top",left:"right"},pE=re.forwardRef(function(n,i){const{__scopePopper:l,...h}=n,d=kM(fE,l),m=UM[d.placedSide];return ae.jsx("span",{ref:d.onArrowChange,style:{position:"absolute",left:d.arrowX,top:d.arrowY,[m]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[d.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[d.placedSide],visibility:d.shouldHideArrow?"hidden":void 0},children:ae.jsx(PM,{...h,ref:i,style:{...h.style,display:"block"}})})});pE.displayName=fE;function DM(e){return e!==null}var RM=e=>({name:"transformOrigin",options:e,fn(n){const{placement:i,rects:l,middlewareData:h}=n,m=h.arrow?.centerOffset!==0,o=m?0:e.arrowWidth,x=m?0:e.arrowHeight,[E,I]=mE(i),D={start:"0%",center:"50%",end:"100%"}[I],O=(h.arrow?.x??0)+o/2,P=(h.arrow?.y??0)+x/2;let W="",z="";return E==="bottom"?(W=m?D:`${O}px`,z=`${-x}px`):E==="top"?(W=m?D:`${O}px`,z=`${l.floating.height+x}px`):E==="right"?(W=`${-x}px`,z=m?D:`${P}px`):E==="left"&&(W=`${l.floating.width+x}px`,z=m?D:`${P}px`),{data:{x:W,y:z}}}});function mE(e){const[n,i="center"]=e.split("-");return[n,i]}var NM=AE,gE=hE,yE=dE,vE=pE,QM=Symbol("radix.slottable");function OM(e){const n=({children:i})=>ae.jsx(ae.Fragment,{children:i});return n.displayName=`${e}.Slottable`,n.__radixId=QM,n}var[Cy]=Hh("Tooltip",[By]),Mw=By(),_E="TooltipProvider",zM=700,u2="tooltip.open",[HM,wE]=Cy(_E),xE=e=>{const{__scopeTooltip:n,delayDuration:i=zM,skipDelayDuration:l=300,disableHoverableContent:h=!1,children:d}=e,m=re.useRef(!0),o=re.useRef(!1),x=re.useRef(0);return re.useEffect(()=>{const E=x.current;return()=>window.clearTimeout(E)},[]),ae.jsx(HM,{scope:n,isOpenDelayedRef:m,delayDuration:i,onOpen:re.useCallback(()=>{window.clearTimeout(x.current),m.current=!1},[]),onClose:re.useCallback(()=>{window.clearTimeout(x.current),x.current=window.setTimeout(()=>m.current=!0,l)},[l]),isPointerInTransitRef:o,onPointerInTransitChange:re.useCallback(E=>{o.current=E},[]),disableHoverableContent:h,children:d})};xE.displayName=_E;var bE="Tooltip",[bV,Ey]=Cy(bE),p_="TooltipTrigger",jM=re.forwardRef((e,n)=>{const{__scopeTooltip:i,...l}=e,h=Ey(p_,i),d=wE(p_,i),m=Mw(i),o=re.useRef(null),x=ds(n,o,h.onTriggerChange),E=re.useRef(!1),I=re.useRef(!1),D=re.useCallback(()=>E.current=!1,[]);return re.useEffect(()=>()=>document.removeEventListener("pointerup",D),[D]),ae.jsx(gE,{asChild:!0,...m,children:ae.jsx(oi.button,{"aria-describedby":h.open?h.contentId:void 0,"data-state":h.stateAttribute,...l,ref:x,onPointerMove:Un(e.onPointerMove,O=>{O.pointerType!=="touch"&&!I.current&&!d.isPointerInTransitRef.current&&(h.onTriggerEnter(),I.current=!0)}),onPointerLeave:Un(e.onPointerLeave,()=>{h.onTriggerLeave(),I.current=!1}),onPointerDown:Un(e.onPointerDown,()=>{h.open&&h.onClose(),E.current=!0,document.addEventListener("pointerup",D,{once:!0})}),onFocus:Un(e.onFocus,()=>{E.current||h.onOpen()}),onBlur:Un(e.onBlur,h.onClose),onClick:Un(e.onClick,h.onClose)})})});jM.displayName=p_;var VM="TooltipPortal",[BV,GM]=Cy(VM,{forceMount:void 0}),yp="TooltipContent",BE=re.forwardRef((e,n)=>{const i=GM(yp,e.__scopeTooltip),{forceMount:l=i.forceMount,side:h="top",...d}=e,m=Ey(yp,e.__scopeTooltip);return ae.jsx(Km,{present:l||m.open,children:m.disableHoverableContent?ae.jsx(CE,{side:h,...d,ref:n}):ae.jsx(KM,{side:h,...d,ref:n})})}),KM=re.forwardRef((e,n)=>{const i=Ey(yp,e.__scopeTooltip),l=wE(yp,e.__scopeTooltip),h=re.useRef(null),d=ds(n,h),[m,o]=re.useState(null),{trigger:x,onClose:E}=i,I=h.current,{onPointerInTransitChange:D}=l,O=re.useCallback(()=>{o(null),D(!1)},[D]),P=re.useCallback((W,z)=>{const H=W.currentTarget,Z={x:W.clientX,y:W.clientY},ie=XM(Z,H.getBoundingClientRect()),ce=YM(Z,ie),he=JM(z.getBoundingClientRect()),Ie=tk([...ce,...he]);o(Ie),D(!0)},[D]);return re.useEffect(()=>()=>O(),[O]),re.useEffect(()=>{if(x&&I){const W=H=>P(H,I),z=H=>P(H,x);return x.addEventListener("pointerleave",W),I.addEventListener("pointerleave",z),()=>{x.removeEventListener("pointerleave",W),I.removeEventListener("pointerleave",z)}}},[x,I,P,O]),re.useEffect(()=>{if(m){const W=z=>{const H=z.target,Z={x:z.clientX,y:z.clientY},ie=x?.contains(H)||I?.contains(H),ce=!ek(Z,m);ie?O():ce&&(O(),E())};return document.addEventListener("pointermove",W),()=>document.removeEventListener("pointermove",W)}},[x,I,m,E,O]),ae.jsx(CE,{...e,ref:d})}),[qM,$M]=Cy(bE,{isInside:!1}),WM=OM("TooltipContent"),CE=re.forwardRef((e,n)=>{const{__scopeTooltip:i,children:l,"aria-label":h,onEscapeKeyDown:d,onPointerDownOutside:m,...o}=e,x=Ey(yp,i),E=Mw(i),{onClose:I}=x;return re.useEffect(()=>(document.addEventListener(u2,I),()=>document.removeEventListener(u2,I)),[I]),re.useEffect(()=>{if(x.trigger){const D=O=>{O.target?.contains(x.trigger)&&I()};return window.addEventListener("scroll",D,{capture:!0}),()=>window.removeEventListener("scroll",D,{capture:!0})}},[x.trigger,I]),ae.jsx(py,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:d,onPointerDownOutside:m,onFocusOutside:D=>D.preventDefault(),onDismiss:I,children:ae.jsxs(yE,{"data-state":x.stateAttribute,...E,...o,ref:n,style:{...o.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[ae.jsx(WM,{children:l}),ae.jsx(qM,{scope:i,isInside:!0,children:ae.jsx(E3,{id:x.contentId,role:"tooltip",children:h||l})})]})})});BE.displayName=yp;var EE="TooltipArrow",ZM=re.forwardRef((e,n)=>{const{__scopeTooltip:i,...l}=e,h=Mw(i);return $M(EE,i).isInside?null:ae.jsx(vE,{...h,...l,ref:n})});ZM.displayName=EE;function XM(e,n){const i=Math.abs(n.top-e.y),l=Math.abs(n.bottom-e.y),h=Math.abs(n.right-e.x),d=Math.abs(n.left-e.x);switch(Math.min(i,l,h,d)){case d:return"left";case h:return"right";case i:return"top";case l:return"bottom";default:throw new Error("unreachable")}}function YM(e,n,i=5){const l=[];switch(n){case"top":l.push({x:e.x-i,y:e.y+i},{x:e.x+i,y:e.y+i});break;case"bottom":l.push({x:e.x-i,y:e.y-i},{x:e.x+i,y:e.y-i});break;case"left":l.push({x:e.x+i,y:e.y-i},{x:e.x+i,y:e.y+i});break;case"right":l.push({x:e.x-i,y:e.y-i},{x:e.x-i,y:e.y+i});break}return l}function JM(e){const{top:n,right:i,bottom:l,left:h}=e;return[{x:h,y:n},{x:i,y:n},{x:i,y:l},{x:h,y:l}]}function ek(e,n){const{x:i,y:l}=e;let h=!1;for(let d=0,m=n.length-1;d<n.length;m=d++){const o=n[d],x=n[m],E=o.x,I=o.y,D=x.x,O=x.y;I>l!=O>l&&i<(D-E)*(l-I)/(O-I)+E&&(h=!h)}return h}function tk(e){const n=e.slice();return n.sort((i,l)=>i.x<l.x?-1:i.x>l.x?1:i.y<l.y?-1:i.y>l.y?1:0),rk(n)}function rk(e){if(e.length<=1)return e.slice();const n=[];for(let l=0;l<e.length;l++){const h=e[l];for(;n.length>=2;){const d=n[n.length-1],m=n[n.length-2];if((d.x-m.x)*(h.y-m.y)>=(d.y-m.y)*(h.x-m.x))n.pop();else break}n.push(h)}n.pop();const i=[];for(let l=e.length-1;l>=0;l--){const h=e[l];for(;i.length>=2;){const d=i[i.length-1],m=i[i.length-2];if((d.x-m.x)*(h.y-m.y)>=(d.y-m.y)*(h.x-m.x))i.pop();else break}i.push(h)}return i.pop(),n.length===1&&i.length===1&&n[0].x===i[0].x&&n[0].y===i[0].y?n:n.concat(i)}var nk=xE,SE=BE;const ik=nk,sk=re.forwardRef(({className:e,sideOffset:n=4,...i},l)=>ae.jsx(SE,{ref:l,sideOffset:n,className:Li("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...i}));sk.displayName=SE.displayName;var Sy=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},ok={setTimeout:(e,n)=>setTimeout(e,n),clearTimeout:e=>clearTimeout(e),setInterval:(e,n)=>setInterval(e,n),clearInterval:e=>clearInterval(e)},ak=class{#e=ok;#t=!1;setTimeoutProvider(e){this.#e=e}setTimeout(e,n){return this.#e.setTimeout(e,n)}clearTimeout(e){this.#e.clearTimeout(e)}setInterval(e,n){return this.#e.setInterval(e,n)}clearInterval(e){this.#e.clearInterval(e)}},m_=new ak;function lk(e){setTimeout(e,0)}var Fy=typeof window>"u"||"Deno"in globalThis;function Iu(){}function ck(e,n){return typeof e=="function"?e(n):e}function Ak(e){return typeof e=="number"&&e>=0&&e!==1/0}function uk(e,n){return Math.max(e+(n||0)-Date.now(),0)}function g_(e,n){return typeof e=="function"?e(n):e}function hk(e,n){return typeof e=="function"?e(n):e}function h2(e,n){const{type:i="all",exact:l,fetchStatus:h,predicate:d,queryKey:m,stale:o}=e;if(m){if(l){if(n.queryHash!==kw(m,n.options))return!1}else if(!Dm(n.queryKey,m))return!1}if(i!=="all"){const x=n.isActive();if(i==="active"&&!x||i==="inactive"&&x)return!1}return!(typeof o=="boolean"&&n.isStale()!==o||h&&h!==n.state.fetchStatus||d&&!d(n))}function d2(e,n){const{exact:i,status:l,predicate:h,mutationKey:d}=e;if(d){if(!n.options.mutationKey)return!1;if(i){if(Um(n.options.mutationKey)!==Um(d))return!1}else if(!Dm(n.options.mutationKey,d))return!1}return!(l&&n.state.status!==l||h&&!h(n))}function kw(e,n){return(n?.queryKeyHashFn||Um)(e)}function Um(e){return JSON.stringify(e,(n,i)=>y_(i)?Object.keys(i).sort().reduce((l,h)=>(l[h]=i[h],l),{}):i)}function Dm(e,n){return e===n?!0:typeof e!=typeof n?!1:e&&n&&typeof e=="object"&&typeof n=="object"?Object.keys(n).every(i=>Dm(e[i],n[i])):!1}var dk=Object.prototype.hasOwnProperty;function FE(e,n){if(e===n)return e;const i=f2(e)&&f2(n);if(!i&&!(y_(e)&&y_(n)))return n;const h=(i?e:Object.keys(e)).length,d=i?n:Object.keys(n),m=d.length,o=i?new Array(m):{};let x=0;for(let E=0;E<m;E++){const I=i?E:d[E],D=e[I],O=n[I];if(D===O){o[I]=D,(i?E<h:dk.call(e,I))&&x++;continue}if(D===null||O===null||typeof D!="object"||typeof O!="object"){o[I]=O;continue}const P=FE(D,O);o[I]=P,P===D&&x++}return h===m&&x===h?e:o}function f2(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function y_(e){if(!p2(e))return!1;const n=e.constructor;if(n===void 0)return!0;const i=n.prototype;return!(!p2(i)||!i.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(e)!==Object.prototype)}function p2(e){return Object.prototype.toString.call(e)==="[object Object]"}function fk(e){return new Promise(n=>{m_.setTimeout(n,e)})}function pk(e,n,i){return typeof i.structuralSharing=="function"?i.structuralSharing(e,n):i.structuralSharing!==!1?FE(e,n):n}function mk(e,n,i=0){const l=[...e,n];return i&&l.length>i?l.slice(1):l}function gk(e,n,i=0){const l=[n,...e];return i&&l.length>i?l.slice(0,-1):l}var Uw=Symbol();function IE(e,n){return!e.queryFn&&n?.initialPromise?()=>n.initialPromise:!e.queryFn||e.queryFn===Uw?()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`)):e.queryFn}var yk=class extends Sy{#e;#t;#r;constructor(){super(),this.#r=e=>{if(!Fy&&window.addEventListener){const n=()=>e();return window.addEventListener("visibilitychange",n,!1),()=>{window.removeEventListener("visibilitychange",n)}}}}onSubscribe(){this.#t||this.setEventListener(this.#r)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(e){this.#r=e,this.#t?.(),this.#t=e(n=>{typeof n=="boolean"?this.setFocused(n):this.onFocus()})}setFocused(e){this.#e!==e&&(this.#e=e,this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(n=>{n(e)})}isFocused(){return typeof this.#e=="boolean"?this.#e:globalThis.document?.visibilityState!=="hidden"}},TE=new yk;function vk(){let e,n;const i=new Promise((h,d)=>{e=h,n=d});i.status="pending",i.catch(()=>{});function l(h){Object.assign(i,h),delete i.resolve,delete i.reject}return i.resolve=h=>{l({status:"fulfilled",value:h}),e(h)},i.reject=h=>{l({status:"rejected",reason:h}),n(h)},i}var _k=lk;function wk(){let e=[],n=0,i=o=>{o()},l=o=>{o()},h=_k;const d=o=>{n?e.push(o):h(()=>{i(o)})},m=()=>{const o=e;e=[],o.length&&h(()=>{l(()=>{o.forEach(x=>{i(x)})})})};return{batch:o=>{let x;n++;try{x=o()}finally{n--,n||m()}return x},batchCalls:o=>(...x)=>{d(()=>{o(...x)})},schedule:d,setNotifyFunction:o=>{i=o},setBatchNotifyFunction:o=>{l=o},setScheduler:o=>{h=o}}}var Bc=wk(),xk=class extends Sy{#e=!0;#t;#r;constructor(){super(),this.#r=e=>{if(!Fy&&window.addEventListener){const n=()=>e(!0),i=()=>e(!1);return window.addEventListener("online",n,!1),window.addEventListener("offline",i,!1),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",i)}}}}onSubscribe(){this.#t||this.setEventListener(this.#r)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(e){this.#r=e,this.#t?.(),this.#t=e(this.setOnline.bind(this))}setOnline(e){this.#e!==e&&(this.#e=e,this.listeners.forEach(i=>{i(e)}))}isOnline(){return this.#e}},W0=new xk;function bk(e){return Math.min(1e3*2**e,3e4)}function PE(e){return(e??"online")==="online"?W0.isOnline():!0}var v_=class extends Error{constructor(e){super("CancelledError"),this.revert=e?.revert,this.silent=e?.silent}};function LE(e){let n=!1,i=0,l;const h=vk(),d=()=>h.status!=="pending",m=z=>{if(!d()){const H=new v_(z);O(H),e.onCancel?.(H)}},o=()=>{n=!0},x=()=>{n=!1},E=()=>TE.isFocused()&&(e.networkMode==="always"||W0.isOnline())&&e.canRun(),I=()=>PE(e.networkMode)&&e.canRun(),D=z=>{d()||(l?.(),h.resolve(z))},O=z=>{d()||(l?.(),h.reject(z))},P=()=>new Promise(z=>{l=H=>{(d()||E())&&z(H)},e.onPause?.()}).then(()=>{l=void 0,d()||e.onContinue?.()}),W=()=>{if(d())return;let z;const H=i===0?e.initialPromise:void 0;try{z=H??e.fn()}catch(Z){z=Promise.reject(Z)}Promise.resolve(z).then(D).catch(Z=>{if(d())return;const ie=e.retry??(Fy?0:3),ce=e.retryDelay??bk,he=typeof ce=="function"?ce(i,Z):ce,Ie=ie===!0||typeof ie=="number"&&i<ie||typeof ie=="function"&&ie(i,Z);if(n||!Ie){O(Z);return}i++,e.onFail?.(i,Z),fk(he).then(()=>E()?void 0:P()).then(()=>{n?O(Z):W()})})};return{promise:h,status:()=>h.status,cancel:m,continue:()=>(l?.(),h),cancelRetry:o,continueRetry:x,canStart:I,start:()=>(I()?W():P().then(W),h)}}var ME=class{#e;destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),Ak(this.gcTime)&&(this.#e=m_.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(Fy?1/0:300*1e3))}clearGcTimeout(){this.#e&&(m_.clearTimeout(this.#e),this.#e=void 0)}},Bk=class extends ME{#e;#t;#r;#i;#n;#o;#a;constructor(e){super(),this.#a=!1,this.#o=e.defaultOptions,this.setOptions(e.options),this.observers=[],this.#i=e.client,this.#r=this.#i.getQueryCache(),this.queryKey=e.queryKey,this.queryHash=e.queryHash,this.#e=g2(this.options),this.state=e.state??this.#e,this.scheduleGc()}get meta(){return this.options.meta}get promise(){return this.#n?.promise}setOptions(e){if(this.options={...this.#o,...e},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const n=g2(this.options);n.data!==void 0&&(this.setState(m2(n.data,n.dataUpdatedAt)),this.#e=n)}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&this.#r.remove(this)}setData(e,n){const i=pk(this.state.data,e,this.options);return this.#s({data:i,type:"success",dataUpdatedAt:n?.updatedAt,manual:n?.manual}),i}setState(e,n){this.#s({type:"setState",state:e,setStateOptions:n})}cancel(e){const n=this.#n?.promise;return this.#n?.cancel(e),n?n.then(Iu).catch(Iu):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(this.#e)}isActive(){return this.observers.some(e=>hk(e.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===Uw||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(e=>g_(e.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(e=0){return this.state.data===void 0?!0:e==="static"?!1:this.state.isInvalidated?!0:!uk(this.state.dataUpdatedAt,e)}onFocus(){this.observers.find(n=>n.shouldFetchOnWindowFocus())?.refetch({cancelRefetch:!1}),this.#n?.continue()}onOnline(){this.observers.find(n=>n.shouldFetchOnReconnect())?.refetch({cancelRefetch:!1}),this.#n?.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),this.#r.notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(n=>n!==e),this.observers.length||(this.#n&&(this.#a?this.#n.cancel({revert:!0}):this.#n.cancelRetry()),this.scheduleGc()),this.#r.notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||this.#s({type:"invalidate"})}async fetch(e,n){if(this.state.fetchStatus!=="idle"&&this.#n?.status()!=="rejected"){if(this.state.data!==void 0&&n?.cancelRefetch)this.cancel({silent:!0});else if(this.#n)return this.#n.continueRetry(),this.#n.promise}if(e&&this.setOptions(e),!this.options.queryFn){const o=this.observers.find(x=>x.options.queryFn);o&&this.setOptions(o.options)}const i=new AbortController,l=o=>{Object.defineProperty(o,"signal",{enumerable:!0,get:()=>(this.#a=!0,i.signal)})},h=()=>{const o=IE(this.options,n),E=(()=>{const I={client:this.#i,queryKey:this.queryKey,meta:this.meta};return l(I),I})();return this.#a=!1,this.options.persister?this.options.persister(o,E,this):o(E)},m=(()=>{const o={fetchOptions:n,options:this.options,queryKey:this.queryKey,client:this.#i,state:this.state,fetchFn:h};return l(o),o})();this.options.behavior?.onFetch(m,this),this.#t=this.state,(this.state.fetchStatus==="idle"||this.state.fetchMeta!==m.fetchOptions?.meta)&&this.#s({type:"fetch",meta:m.fetchOptions?.meta}),this.#n=LE({initialPromise:n?.initialPromise,fn:m.fetchFn,onCancel:o=>{o instanceof v_&&o.revert&&this.setState({...this.#t,fetchStatus:"idle"}),i.abort()},onFail:(o,x)=>{this.#s({type:"failed",failureCount:o,error:x})},onPause:()=>{this.#s({type:"pause"})},onContinue:()=>{this.#s({type:"continue"})},retry:m.options.retry,retryDelay:m.options.retryDelay,networkMode:m.options.networkMode,canRun:()=>!0});try{const o=await this.#n.start();if(o===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(o),this.#r.config.onSuccess?.(o,this),this.#r.config.onSettled?.(o,this.state.error,this),o}catch(o){if(o instanceof v_){if(o.silent)return this.#n.promise;if(o.revert){if(this.state.data===void 0)throw o;return this.state.data}}throw this.#s({type:"error",error:o}),this.#r.config.onError?.(o,this),this.#r.config.onSettled?.(this.state.data,o,this),o}finally{this.scheduleGc()}}#s(e){const n=i=>{switch(e.type){case"failed":return{...i,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...i,fetchStatus:"paused"};case"continue":return{...i,fetchStatus:"fetching"};case"fetch":return{...i,...Ck(i.data,this.options),fetchMeta:e.meta??null};case"success":const l={...i,...m2(e.data,e.dataUpdatedAt),dataUpdateCount:i.dataUpdateCount+1,...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return this.#t=e.manual?l:void 0,l;case"error":const h=e.error;return{...i,error:h,errorUpdateCount:i.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:i.fetchFailureCount+1,fetchFailureReason:h,fetchStatus:"idle",status:"error"};case"invalidate":return{...i,isInvalidated:!0};case"setState":return{...i,...e.state}}};this.state=n(this.state),Bc.batch(()=>{this.observers.forEach(i=>{i.onQueryUpdate()}),this.#r.notify({query:this,type:"updated",action:e})})}};function Ck(e,n){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:PE(n.networkMode)?"fetching":"paused",...e===void 0&&{error:null,status:"pending"}}}function m2(e,n){return{data:e,dataUpdatedAt:n??Date.now(),error:null,isInvalidated:!1,status:"success"}}function g2(e){const n=typeof e.initialData=="function"?e.initialData():e.initialData,i=n!==void 0,l=i?typeof e.initialDataUpdatedAt=="function"?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:n,dataUpdateCount:0,dataUpdatedAt:i?l??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:i?"success":"pending",fetchStatus:"idle"}}function y2(e){return{onFetch:(n,i)=>{const l=n.options,h=n.fetchOptions?.meta?.fetchMore?.direction,d=n.state.data?.pages||[],m=n.state.data?.pageParams||[];let o={pages:[],pageParams:[]},x=0;const E=async()=>{let I=!1;const D=W=>{Object.defineProperty(W,"signal",{enumerable:!0,get:()=>(n.signal.aborted?I=!0:n.signal.addEventListener("abort",()=>{I=!0}),n.signal)})},O=IE(n.options,n.fetchOptions),P=async(W,z,H)=>{if(I)return Promise.reject();if(z==null&&W.pages.length)return Promise.resolve(W);const ie=(()=>{const Ve={client:n.client,queryKey:n.queryKey,pageParam:z,direction:H?"backward":"forward",meta:n.options.meta};return D(Ve),Ve})(),ce=await O(ie),{maxPages:he}=n.options,Ie=H?gk:mk;return{pages:Ie(W.pages,ce,he),pageParams:Ie(W.pageParams,z,he)}};if(h&&d.length){const W=h==="backward",z=W?Ek:v2,H={pages:d,pageParams:m},Z=z(l,H);o=await P(H,Z,W)}else{const W=e??d.length;do{const z=x===0?m[0]??l.initialPageParam:v2(l,o);if(x>0&&z==null)break;o=await P(o,z),x++}while(x<W)}return o};n.options.persister?n.fetchFn=()=>n.options.persister?.(E,{client:n.client,queryKey:n.queryKey,meta:n.options.meta,signal:n.signal},i):n.fetchFn=E}}}function v2(e,{pages:n,pageParams:i}){const l=n.length-1;return n.length>0?e.getNextPageParam(n[l],n,i[l],i):void 0}function Ek(e,{pages:n,pageParams:i}){return n.length>0?e.getPreviousPageParam?.(n[0],n,i[0],i):void 0}var Sk=class extends ME{#e;#t;#r;#i;constructor(e){super(),this.#e=e.client,this.mutationId=e.mutationId,this.#r=e.mutationCache,this.#t=[],this.state=e.state||Fk(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){this.#t.includes(e)||(this.#t.push(e),this.clearGcTimeout(),this.#r.notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){this.#t=this.#t.filter(n=>n!==e),this.scheduleGc(),this.#r.notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){this.#t.length||(this.state.status==="pending"?this.scheduleGc():this.#r.remove(this))}continue(){return this.#i?.continue()??this.execute(this.state.variables)}async execute(e){const n=()=>{this.#n({type:"continue"})},i={client:this.#e,meta:this.options.meta,mutationKey:this.options.mutationKey};this.#i=LE({fn:()=>this.options.mutationFn?this.options.mutationFn(e,i):Promise.reject(new Error("No mutationFn found")),onFail:(d,m)=>{this.#n({type:"failed",failureCount:d,error:m})},onPause:()=>{this.#n({type:"pause"})},onContinue:n,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>this.#r.canRun(this)});const l=this.state.status==="pending",h=!this.#i.canStart();try{if(l)n();else{this.#n({type:"pending",variables:e,isPaused:h}),await this.#r.config.onMutate?.(e,this,i);const m=await this.options.onMutate?.(e,i);m!==this.state.context&&this.#n({type:"pending",context:m,variables:e,isPaused:h})}const d=await this.#i.start();return await this.#r.config.onSuccess?.(d,e,this.state.context,this,i),await this.options.onSuccess?.(d,e,this.state.context,i),await this.#r.config.onSettled?.(d,null,this.state.variables,this.state.context,this,i),await this.options.onSettled?.(d,null,e,this.state.context,i),this.#n({type:"success",data:d}),d}catch(d){try{throw await this.#r.config.onError?.(d,e,this.state.context,this,i),await this.options.onError?.(d,e,this.state.context,i),await this.#r.config.onSettled?.(void 0,d,this.state.variables,this.state.context,this,i),await this.options.onSettled?.(void 0,d,e,this.state.context,i),d}finally{this.#n({type:"error",error:d})}}finally{this.#r.runNext(this)}}#n(e){const n=i=>{switch(e.type){case"failed":return{...i,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...i,isPaused:!0};case"continue":return{...i,isPaused:!1};case"pending":return{...i,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...i,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...i,data:void 0,error:e.error,failureCount:i.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=n(this.state),Bc.batch(()=>{this.#t.forEach(i=>{i.onMutationUpdate(e)}),this.#r.notify({mutation:this,type:"updated",action:e})})}};function Fk(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var Ik=class extends Sy{constructor(e={}){super(),this.config=e,this.#e=new Set,this.#t=new Map,this.#r=0}#e;#t;#r;build(e,n,i){const l=new Sk({client:e,mutationCache:this,mutationId:++this.#r,options:e.defaultMutationOptions(n),state:i});return this.add(l),l}add(e){this.#e.add(e);const n=Vg(e);if(typeof n=="string"){const i=this.#t.get(n);i?i.push(e):this.#t.set(n,[e])}this.notify({type:"added",mutation:e})}remove(e){if(this.#e.delete(e)){const n=Vg(e);if(typeof n=="string"){const i=this.#t.get(n);if(i)if(i.length>1){const l=i.indexOf(e);l!==-1&&i.splice(l,1)}else i[0]===e&&this.#t.delete(n)}}this.notify({type:"removed",mutation:e})}canRun(e){const n=Vg(e);if(typeof n=="string"){const l=this.#t.get(n)?.find(h=>h.state.status==="pending");return!l||l===e}else return!0}runNext(e){const n=Vg(e);return typeof n=="string"?this.#t.get(n)?.find(l=>l!==e&&l.state.isPaused)?.continue()??Promise.resolve():Promise.resolve()}clear(){Bc.batch(()=>{this.#e.forEach(e=>{this.notify({type:"removed",mutation:e})}),this.#e.clear(),this.#t.clear()})}getAll(){return Array.from(this.#e)}find(e){const n={exact:!0,...e};return this.getAll().find(i=>d2(n,i))}findAll(e={}){return this.getAll().filter(n=>d2(e,n))}notify(e){Bc.batch(()=>{this.listeners.forEach(n=>{n(e)})})}resumePausedMutations(){const e=this.getAll().filter(n=>n.state.isPaused);return Bc.batch(()=>Promise.all(e.map(n=>n.continue().catch(Iu))))}};function Vg(e){return e.options.scope?.id}var Tk=class extends Sy{constructor(e={}){super(),this.config=e,this.#e=new Map}#e;build(e,n,i){const l=n.queryKey,h=n.queryHash??kw(l,n);let d=this.get(h);return d||(d=new Bk({client:e,queryKey:l,queryHash:h,options:e.defaultQueryOptions(n),state:i,defaultOptions:e.getQueryDefaults(l)}),this.add(d)),d}add(e){this.#e.has(e.queryHash)||(this.#e.set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const n=this.#e.get(e.queryHash);n&&(e.destroy(),n===e&&this.#e.delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){Bc.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return this.#e.get(e)}getAll(){return[...this.#e.values()]}find(e){const n={exact:!0,...e};return this.getAll().find(i=>h2(n,i))}findAll(e={}){const n=this.getAll();return Object.keys(e).length>0?n.filter(i=>h2(e,i)):n}notify(e){Bc.batch(()=>{this.listeners.forEach(n=>{n(e)})})}onFocus(){Bc.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){Bc.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},Pk=class{#e;#t;#r;#i;#n;#o;#a;#s;constructor(e={}){this.#e=e.queryCache||new Tk,this.#t=e.mutationCache||new Ik,this.#r=e.defaultOptions||{},this.#i=new Map,this.#n=new Map,this.#o=0}mount(){this.#o++,this.#o===1&&(this.#a=TE.subscribe(async e=>{e&&(await this.resumePausedMutations(),this.#e.onFocus())}),this.#s=W0.subscribe(async e=>{e&&(await this.resumePausedMutations(),this.#e.onOnline())}))}unmount(){this.#o--,this.#o===0&&(this.#a?.(),this.#a=void 0,this.#s?.(),this.#s=void 0)}isFetching(e){return this.#e.findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return this.#t.findAll({...e,status:"pending"}).length}getQueryData(e){const n=this.defaultQueryOptions({queryKey:e});return this.#e.get(n.queryHash)?.state.data}ensureQueryData(e){const n=this.defaultQueryOptions(e),i=this.#e.build(this,n),l=i.state.data;return l===void 0?this.fetchQuery(e):(e.revalidateIfStale&&i.isStaleByTime(g_(n.staleTime,i))&&this.prefetchQuery(n),Promise.resolve(l))}getQueriesData(e){return this.#e.findAll(e).map(({queryKey:n,state:i})=>{const l=i.data;return[n,l]})}setQueryData(e,n,i){const l=this.defaultQueryOptions({queryKey:e}),d=this.#e.get(l.queryHash)?.state.data,m=ck(n,d);if(m!==void 0)return this.#e.build(this,l).setData(m,{...i,manual:!0})}setQueriesData(e,n,i){return Bc.batch(()=>this.#e.findAll(e).map(({queryKey:l})=>[l,this.setQueryData(l,n,i)]))}getQueryState(e){const n=this.defaultQueryOptions({queryKey:e});return this.#e.get(n.queryHash)?.state}removeQueries(e){const n=this.#e;Bc.batch(()=>{n.findAll(e).forEach(i=>{n.remove(i)})})}resetQueries(e,n){const i=this.#e;return Bc.batch(()=>(i.findAll(e).forEach(l=>{l.reset()}),this.refetchQueries({type:"active",...e},n)))}cancelQueries(e,n={}){const i={revert:!0,...n},l=Bc.batch(()=>this.#e.findAll(e).map(h=>h.cancel(i)));return Promise.all(l).then(Iu).catch(Iu)}invalidateQueries(e,n={}){return Bc.batch(()=>(this.#e.findAll(e).forEach(i=>{i.invalidate()}),e?.refetchType==="none"?Promise.resolve():this.refetchQueries({...e,type:e?.refetchType??e?.type??"active"},n)))}refetchQueries(e,n={}){const i={...n,cancelRefetch:n.cancelRefetch??!0},l=Bc.batch(()=>this.#e.findAll(e).filter(h=>!h.isDisabled()&&!h.isStatic()).map(h=>{let d=h.fetch(void 0,i);return i.throwOnError||(d=d.catch(Iu)),h.state.fetchStatus==="paused"?Promise.resolve():d}));return Promise.all(l).then(Iu)}fetchQuery(e){const n=this.defaultQueryOptions(e);n.retry===void 0&&(n.retry=!1);const i=this.#e.build(this,n);return i.isStaleByTime(g_(n.staleTime,i))?i.fetch(n):Promise.resolve(i.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(Iu).catch(Iu)}fetchInfiniteQuery(e){return e.behavior=y2(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(Iu).catch(Iu)}ensureInfiniteQueryData(e){return e.behavior=y2(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return W0.isOnline()?this.#t.resumePausedMutations():Promise.resolve()}getQueryCache(){return this.#e}getMutationCache(){return this.#t}getDefaultOptions(){return this.#r}setDefaultOptions(e){this.#r=e}setQueryDefaults(e,n){this.#i.set(Um(e),{queryKey:e,defaultOptions:n})}getQueryDefaults(e){const n=[...this.#i.values()],i={};return n.forEach(l=>{Dm(e,l.queryKey)&&Object.assign(i,l.defaultOptions)}),i}setMutationDefaults(e,n){this.#n.set(Um(e),{mutationKey:e,defaultOptions:n})}getMutationDefaults(e){const n=[...this.#n.values()],i={};return n.forEach(l=>{Dm(e,l.mutationKey)&&Object.assign(i,l.defaultOptions)}),i}defaultQueryOptions(e){if(e._defaulted)return e;const n={...this.#r.queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return n.queryHash||(n.queryHash=kw(n.queryKey,n)),n.refetchOnReconnect===void 0&&(n.refetchOnReconnect=n.networkMode!=="always"),n.throwOnError===void 0&&(n.throwOnError=!!n.suspense),!n.networkMode&&n.persister&&(n.networkMode="offlineFirst"),n.queryFn===Uw&&(n.enabled=!1),n}defaultMutationOptions(e){return e?._defaulted?e:{...this.#r.mutations,...e?.mutationKey&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){this.#e.clear(),this.#t.clear()}},Lk=re.createContext(void 0),Mk=({client:e,children:n})=>(re.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]),ae.jsx(Lk.Provider,{value:e,children:n}));function Rm(){return Rm=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var i=arguments[n];for(var l in i)Object.prototype.hasOwnProperty.call(i,l)&&(e[l]=i[l])}return e},Rm.apply(this,arguments)}var ud;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(ud||(ud={}));const _2="popstate";function kk(e){e===void 0&&(e={});function n(l,h){let{pathname:d,search:m,hash:o}=l.location;return __("",{pathname:d,search:m,hash:o},h.state&&h.state.usr||null,h.state&&h.state.key||"default")}function i(l,h){return typeof h=="string"?h:Z0(h)}return Dk(n,i,null,e)}function aa(e,n){if(e===!1||e===null||typeof e>"u")throw new Error(n)}function Dw(e,n){if(!e){typeof console<"u"&&console.warn(n);try{throw new Error(n)}catch{}}}function Uk(){return Math.random().toString(36).substr(2,8)}function w2(e,n){return{usr:e.state,key:e.key,idx:n}}function __(e,n,i,l){return i===void 0&&(i=null),Rm({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof n=="string"?Bp(n):n,{state:i,key:n&&n.key||l||Uk()})}function Z0(e){let{pathname:n="/",search:i="",hash:l=""}=e;return i&&i!=="?"&&(n+=i.charAt(0)==="?"?i:"?"+i),l&&l!=="#"&&(n+=l.charAt(0)==="#"?l:"#"+l),n}function Bp(e){let n={};if(e){let i=e.indexOf("#");i>=0&&(n.hash=e.substr(i),e=e.substr(0,i));let l=e.indexOf("?");l>=0&&(n.search=e.substr(l),e=e.substr(0,l)),e&&(n.pathname=e)}return n}function Dk(e,n,i,l){l===void 0&&(l={});let{window:h=document.defaultView,v5Compat:d=!1}=l,m=h.history,o=ud.Pop,x=null,E=I();E==null&&(E=0,m.replaceState(Rm({},m.state,{idx:E}),""));function I(){return(m.state||{idx:null}).idx}function D(){o=ud.Pop;let H=I(),Z=H==null?null:H-E;E=H,x&&x({action:o,location:z.location,delta:Z})}function O(H,Z){o=ud.Push;let ie=__(z.location,H,Z);E=I()+1;let ce=w2(ie,E),he=z.createHref(ie);try{m.pushState(ce,"",he)}catch(Ie){if(Ie instanceof DOMException&&Ie.name==="DataCloneError")throw Ie;h.location.assign(he)}d&&x&&x({action:o,location:z.location,delta:1})}function P(H,Z){o=ud.Replace;let ie=__(z.location,H,Z);E=I();let ce=w2(ie,E),he=z.createHref(ie);m.replaceState(ce,"",he),d&&x&&x({action:o,location:z.location,delta:0})}function W(H){let Z=h.location.origin!=="null"?h.location.origin:h.location.href,ie=typeof H=="string"?H:Z0(H);return ie=ie.replace(/ $/,"%20"),aa(Z,"No window.location.(origin|href) available to create URL for href: "+ie),new URL(ie,Z)}let z={get action(){return o},get location(){return e(h,m)},listen(H){if(x)throw new Error("A history only accepts one active listener");return h.addEventListener(_2,D),x=H,()=>{h.removeEventListener(_2,D),x=null}},createHref(H){return n(h,H)},createURL:W,encodeLocation(H){let Z=W(H);return{pathname:Z.pathname,search:Z.search,hash:Z.hash}},push:O,replace:P,go(H){return m.go(H)}};return z}var x2;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(x2||(x2={}));function Rk(e,n,i){return i===void 0&&(i="/"),Nk(e,n,i)}function Nk(e,n,i,l){let h=typeof n=="string"?Bp(n):n,d=Rw(h.pathname||"/",i);if(d==null)return null;let m=kE(e);Qk(m);let o=null;for(let x=0;o==null&&x<m.length;++x){let E=Xk(d);o=$k(m[x],E)}return o}function kE(e,n,i,l){n===void 0&&(n=[]),i===void 0&&(i=[]),l===void 0&&(l="");let h=(d,m,o)=>{let x={relativePath:o===void 0?d.path||"":o,caseSensitive:d.caseSensitive===!0,childrenIndex:m,route:d};x.relativePath.startsWith("/")&&(aa(x.relativePath.startsWith(l),'Absolute route path "'+x.relativePath+'" nested under path '+('"'+l+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),x.relativePath=x.relativePath.slice(l.length));let E=md([l,x.relativePath]),I=i.concat(x);d.children&&d.children.length>0&&(aa(d.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+E+'".')),kE(d.children,n,I,E)),!(d.path==null&&!d.index)&&n.push({path:E,score:Kk(E,d.index),routesMeta:I})};return e.forEach((d,m)=>{var o;if(d.path===""||!((o=d.path)!=null&&o.includes("?")))h(d,m);else for(let x of UE(d.path))h(d,m,x)}),n}function UE(e){let n=e.split("/");if(n.length===0)return[];let[i,...l]=n,h=i.endsWith("?"),d=i.replace(/\?$/,"");if(l.length===0)return h?[d,""]:[d];let m=UE(l.join("/")),o=[];return o.push(...m.map(x=>x===""?d:[d,x].join("/"))),h&&o.push(...m),o.map(x=>e.startsWith("/")&&x===""?"/":x)}function Qk(e){e.sort((n,i)=>n.score!==i.score?i.score-n.score:qk(n.routesMeta.map(l=>l.childrenIndex),i.routesMeta.map(l=>l.childrenIndex)))}const Ok=/^:[\w-]+$/,zk=3,Hk=2,jk=1,Vk=10,Gk=-2,b2=e=>e==="*";function Kk(e,n){let i=e.split("/"),l=i.length;return i.some(b2)&&(l+=Gk),n&&(l+=Hk),i.filter(h=>!b2(h)).reduce((h,d)=>h+(Ok.test(d)?zk:d===""?jk:Vk),l)}function qk(e,n){return e.length===n.length&&e.slice(0,-1).every((l,h)=>l===n[h])?e[e.length-1]-n[n.length-1]:0}function $k(e,n,i){let{routesMeta:l}=e,h={},d="/",m=[];for(let o=0;o<l.length;++o){let x=l[o],E=o===l.length-1,I=d==="/"?n:n.slice(d.length)||"/",D=Wk({path:x.relativePath,caseSensitive:x.caseSensitive,end:E},I),O=x.route;if(!D)return null;Object.assign(h,D.params),m.push({params:h,pathname:md([d,D.pathname]),pathnameBase:rU(md([d,D.pathnameBase])),route:O}),D.pathnameBase!=="/"&&(d=md([d,D.pathnameBase]))}return m}function Wk(e,n){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[i,l]=Zk(e.path,e.caseSensitive,e.end),h=n.match(i);if(!h)return null;let d=h[0],m=d.replace(/(.)\/+$/,"$1"),o=h.slice(1);return{params:l.reduce((E,I,D)=>{let{paramName:O,isOptional:P}=I;if(O==="*"){let z=o[D]||"";m=d.slice(0,d.length-z.length).replace(/(.)\/+$/,"$1")}const W=o[D];return P&&!W?E[O]=void 0:E[O]=(W||"").replace(/%2F/g,"/"),E},{}),pathname:d,pathnameBase:m,pattern:e}}function Zk(e,n,i){n===void 0&&(n=!1),i===void 0&&(i=!0),Dw(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let l=[],h="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(m,o,x)=>(l.push({paramName:o,isOptional:x!=null}),x?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(l.push({paramName:"*"}),h+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):i?h+="\\/*$":e!==""&&e!=="/"&&(h+="(?:(?=\\/|$))"),[new RegExp(h,n?void 0:"i"),l]}function Xk(e){try{return e.split("/").map(n=>decodeURIComponent(n).replace(/\//g,"%2F")).join("/")}catch(n){return Dw(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+n+").")),e}}function Rw(e,n){if(n==="/")return e;if(!e.toLowerCase().startsWith(n.toLowerCase()))return null;let i=n.endsWith("/")?n.length-1:n.length,l=e.charAt(i);return l&&l!=="/"?null:e.slice(i)||"/"}const Yk=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Jk=e=>Yk.test(e);function eU(e,n){n===void 0&&(n="/");let{pathname:i,search:l="",hash:h=""}=typeof e=="string"?Bp(e):e,d;if(i)if(Jk(i))d=i;else{if(i.includes("//")){let m=i;i=i.replace(/\/\/+/g,"/"),Dw(!1,"Pathnames cannot have embedded double slashes - normalizing "+(m+" -> "+i))}i.startsWith("/")?d=B2(i.substring(1),"/"):d=B2(i,n)}else d=n;return{pathname:d,search:nU(l),hash:iU(h)}}function B2(e,n){let i=n.replace(/\/+$/,"").split("/");return e.split("/").forEach(h=>{h===".."?i.length>1&&i.pop():h!=="."&&i.push(h)}),i.length>1?i.join("/"):"/"}function Yv(e,n,i,l){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+n+"` field ["+JSON.stringify(l)+"].  Please separate it out to the ")+("`to."+i+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function tU(e){return e.filter((n,i)=>i===0||n.route.path&&n.route.path.length>0)}function DE(e,n){let i=tU(e);return n?i.map((l,h)=>h===i.length-1?l.pathname:l.pathnameBase):i.map(l=>l.pathnameBase)}function RE(e,n,i,l){l===void 0&&(l=!1);let h;typeof e=="string"?h=Bp(e):(h=Rm({},e),aa(!h.pathname||!h.pathname.includes("?"),Yv("?","pathname","search",h)),aa(!h.pathname||!h.pathname.includes("#"),Yv("#","pathname","hash",h)),aa(!h.search||!h.search.includes("#"),Yv("#","search","hash",h)));let d=e===""||h.pathname==="",m=d?"/":h.pathname,o;if(m==null)o=i;else{let D=n.length-1;if(!l&&m.startsWith("..")){let O=m.split("/");for(;O[0]==="..";)O.shift(),D-=1;h.pathname=O.join("/")}o=D>=0?n[D]:"/"}let x=eU(h,o),E=m&&m!=="/"&&m.endsWith("/"),I=(d||m===".")&&i.endsWith("/");return!x.pathname.endsWith("/")&&(E||I)&&(x.pathname+="/"),x}const md=e=>e.join("/").replace(/\/\/+/g,"/"),rU=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),nU=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,iU=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function sU(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const NE=["post","put","patch","delete"];new Set(NE);const oU=["get",...NE];new Set(oU);function Nm(){return Nm=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var i=arguments[n];for(var l in i)Object.prototype.hasOwnProperty.call(i,l)&&(e[l]=i[l])}return e},Nm.apply(this,arguments)}const Nw=re.createContext(null),aU=re.createContext(null),af=re.createContext(null),Iy=re.createContext(null),lf=re.createContext({outlet:null,matches:[],isDataRoute:!1}),QE=re.createContext(null);function lU(e,n){let{relative:i}=n===void 0?{}:n;Zm()||aa(!1);let{basename:l,navigator:h}=re.useContext(af),{hash:d,pathname:m,search:o}=zE(e,{relative:i}),x=m;return l!=="/"&&(x=m==="/"?l:md([l,m])),h.createHref({pathname:x,search:o,hash:d})}function Zm(){return re.useContext(Iy)!=null}function Xm(){return Zm()||aa(!1),re.useContext(Iy).location}function OE(e){re.useContext(af).static||re.useLayoutEffect(e)}function cU(){let{isDataRoute:e}=re.useContext(lf);return e?xU():AU()}function AU(){Zm()||aa(!1);let e=re.useContext(Nw),{basename:n,future:i,navigator:l}=re.useContext(af),{matches:h}=re.useContext(lf),{pathname:d}=Xm(),m=JSON.stringify(DE(h,i.v7_relativeSplatPath)),o=re.useRef(!1);return OE(()=>{o.current=!0}),re.useCallback(function(E,I){if(I===void 0&&(I={}),!o.current)return;if(typeof E=="number"){l.go(E);return}let D=RE(E,JSON.parse(m),d,I.relative==="path");e==null&&n!=="/"&&(D.pathname=D.pathname==="/"?n:md([n,D.pathname])),(I.replace?l.replace:l.push)(D,I.state,I)},[n,l,m,d,e])}function zE(e,n){let{relative:i}=n===void 0?{}:n,{future:l}=re.useContext(af),{matches:h}=re.useContext(lf),{pathname:d}=Xm(),m=JSON.stringify(DE(h,l.v7_relativeSplatPath));return re.useMemo(()=>RE(e,JSON.parse(m),d,i==="path"),[e,m,d,i])}function uU(e,n){return hU(e,n)}function hU(e,n,i,l){Zm()||aa(!1);let{navigator:h}=re.useContext(af),{matches:d}=re.useContext(lf),m=d[d.length-1],o=m?m.params:{};m&&m.pathname;let x=m?m.pathnameBase:"/";m&&m.route;let E=Xm(),I;if(n){var D;let H=typeof n=="string"?Bp(n):n;x==="/"||(D=H.pathname)!=null&&D.startsWith(x)||aa(!1),I=H}else I=E;let O=I.pathname||"/",P=O;if(x!=="/"){let H=x.replace(/^\//,"").split("/");P="/"+O.replace(/^\//,"").split("/").slice(H.length).join("/")}let W=Rk(e,{pathname:P}),z=gU(W&&W.map(H=>Object.assign({},H,{params:Object.assign({},o,H.params),pathname:md([x,h.encodeLocation?h.encodeLocation(H.pathname).pathname:H.pathname]),pathnameBase:H.pathnameBase==="/"?x:md([x,h.encodeLocation?h.encodeLocation(H.pathnameBase).pathname:H.pathnameBase])})),d,i,l);return n&&z?re.createElement(Iy.Provider,{value:{location:Nm({pathname:"/",search:"",hash:"",state:null,key:"default"},I),navigationType:ud.Pop}},z):z}function dU(){let e=wU(),n=sU(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),i=e instanceof Error?e.stack:null,h={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return re.createElement(re.Fragment,null,re.createElement("h2",null,"Unexpected Application Error!"),re.createElement("h3",{style:{fontStyle:"italic"}},n),i?re.createElement("pre",{style:h},i):null,null)}const fU=re.createElement(dU,null);class pU extends re.Component{constructor(n){super(n),this.state={location:n.location,revalidation:n.revalidation,error:n.error}}static getDerivedStateFromError(n){return{error:n}}static getDerivedStateFromProps(n,i){return i.location!==n.location||i.revalidation!=="idle"&&n.revalidation==="idle"?{error:n.error,location:n.location,revalidation:n.revalidation}:{error:n.error!==void 0?n.error:i.error,location:i.location,revalidation:n.revalidation||i.revalidation}}componentDidCatch(n,i){console.error("React Router caught the following error during render",n,i)}render(){return this.state.error!==void 0?re.createElement(lf.Provider,{value:this.props.routeContext},re.createElement(QE.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function mU(e){let{routeContext:n,match:i,children:l}=e,h=re.useContext(Nw);return h&&h.static&&h.staticContext&&(i.route.errorElement||i.route.ErrorBoundary)&&(h.staticContext._deepestRenderedBoundaryId=i.route.id),re.createElement(lf.Provider,{value:n},l)}function gU(e,n,i,l){var h;if(n===void 0&&(n=[]),i===void 0&&(i=null),l===void 0&&(l=null),e==null){var d;if(!i)return null;if(i.errors)e=i.matches;else if((d=l)!=null&&d.v7_partialHydration&&n.length===0&&!i.initialized&&i.matches.length>0)e=i.matches;else return null}let m=e,o=(h=i)==null?void 0:h.errors;if(o!=null){let I=m.findIndex(D=>D.route.id&&o?.[D.route.id]!==void 0);I>=0||aa(!1),m=m.slice(0,Math.min(m.length,I+1))}let x=!1,E=-1;if(i&&l&&l.v7_partialHydration)for(let I=0;I<m.length;I++){let D=m[I];if((D.route.HydrateFallback||D.route.hydrateFallbackElement)&&(E=I),D.route.id){let{loaderData:O,errors:P}=i,W=D.route.loader&&O[D.route.id]===void 0&&(!P||P[D.route.id]===void 0);if(D.route.lazy||W){x=!0,E>=0?m=m.slice(0,E+1):m=[m[0]];break}}}return m.reduceRight((I,D,O)=>{let P,W=!1,z=null,H=null;i&&(P=o&&D.route.id?o[D.route.id]:void 0,z=D.route.errorElement||fU,x&&(E<0&&O===0?(bU("route-fallback"),W=!0,H=null):E===O&&(W=!0,H=D.route.hydrateFallbackElement||null)));let Z=n.concat(m.slice(0,O+1)),ie=()=>{let ce;return P?ce=z:W?ce=H:D.route.Component?ce=re.createElement(D.route.Component,null):D.route.element?ce=D.route.element:ce=I,re.createElement(mU,{match:D,routeContext:{outlet:I,matches:Z,isDataRoute:i!=null},children:ce})};return i&&(D.route.ErrorBoundary||D.route.errorElement||O===0)?re.createElement(pU,{location:i.location,revalidation:i.revalidation,component:z,error:P,children:ie(),routeContext:{outlet:null,matches:Z,isDataRoute:!0}}):ie()},null)}var HE=(function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e})(HE||{}),jE=(function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e})(jE||{});function yU(e){let n=re.useContext(Nw);return n||aa(!1),n}function vU(e){let n=re.useContext(aU);return n||aa(!1),n}function _U(e){let n=re.useContext(lf);return n||aa(!1),n}function VE(e){let n=_U(),i=n.matches[n.matches.length-1];return i.route.id||aa(!1),i.route.id}function wU(){var e;let n=re.useContext(QE),i=vU(),l=VE();return n!==void 0?n:(e=i.errors)==null?void 0:e[l]}function xU(){let{router:e}=yU(HE.UseNavigateStable),n=VE(jE.UseNavigateStable),i=re.useRef(!1);return OE(()=>{i.current=!0}),re.useCallback(function(h,d){d===void 0&&(d={}),i.current&&(typeof h=="number"?e.navigate(h):e.navigate(h,Nm({fromRouteId:n},d)))},[e,n])}const C2={};function bU(e,n,i){C2[e]||(C2[e]=!0)}function BU(e,n){e?.v7_startTransition,e?.v7_relativeSplatPath}function w_(e){aa(!1)}function CU(e){let{basename:n="/",children:i=null,location:l,navigationType:h=ud.Pop,navigator:d,static:m=!1,future:o}=e;Zm()&&aa(!1);let x=n.replace(/^\/*/,"/"),E=re.useMemo(()=>({basename:x,navigator:d,static:m,future:Nm({v7_relativeSplatPath:!1},o)}),[x,o,d,m]);typeof l=="string"&&(l=Bp(l));let{pathname:I="/",search:D="",hash:O="",state:P=null,key:W="default"}=l,z=re.useMemo(()=>{let H=Rw(I,x);return H==null?null:{location:{pathname:H,search:D,hash:O,state:P,key:W},navigationType:h}},[x,I,D,O,P,W,h]);return z==null?null:re.createElement(af.Provider,{value:E},re.createElement(Iy.Provider,{children:i,value:z}))}function EU(e){let{children:n,location:i}=e;return uU(x_(n),i)}new Promise(()=>{});function x_(e,n){n===void 0&&(n=[]);let i=[];return re.Children.forEach(e,(l,h)=>{if(!re.isValidElement(l))return;let d=[...n,h];if(l.type===re.Fragment){i.push.apply(i,x_(l.props.children,d));return}l.type!==w_&&aa(!1),!l.props.index||!l.props.children||aa(!1);let m={id:l.props.id||d.join("-"),caseSensitive:l.props.caseSensitive,element:l.props.element,Component:l.props.Component,index:l.props.index,path:l.props.path,loader:l.props.loader,action:l.props.action,errorElement:l.props.errorElement,ErrorBoundary:l.props.ErrorBoundary,hasErrorBoundary:l.props.ErrorBoundary!=null||l.props.errorElement!=null,shouldRevalidate:l.props.shouldRevalidate,handle:l.props.handle,lazy:l.props.lazy};l.props.children&&(m.children=x_(l.props.children,d)),i.push(m)}),i}function b_(){return b_=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var i=arguments[n];for(var l in i)Object.prototype.hasOwnProperty.call(i,l)&&(e[l]=i[l])}return e},b_.apply(this,arguments)}function SU(e,n){if(e==null)return{};var i={},l=Object.keys(e),h,d;for(d=0;d<l.length;d++)h=l[d],!(n.indexOf(h)>=0)&&(i[h]=e[h]);return i}function FU(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function IU(e,n){return e.button===0&&(!n||n==="_self")&&!FU(e)}const TU=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],PU="6";try{window.__reactRouterVersion=PU}catch{}const LU="startTransition",E2=fy[LU];function MU(e){let{basename:n,children:i,future:l,window:h}=e,d=re.useRef();d.current==null&&(d.current=kk({window:h,v5Compat:!0}));let m=d.current,[o,x]=re.useState({action:m.action,location:m.location}),{v7_startTransition:E}=l||{},I=re.useCallback(D=>{E&&E2?E2(()=>x(D)):x(D)},[x,E]);return re.useLayoutEffect(()=>m.listen(I),[m,I]),re.useEffect(()=>BU(l),[l]),re.createElement(CU,{basename:n,children:i,location:o.location,navigationType:o.action,navigator:m,future:l})}const kU=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",UU=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,DU=re.forwardRef(function(n,i){let{onClick:l,relative:h,reloadDocument:d,replace:m,state:o,target:x,to:E,preventScrollReset:I,viewTransition:D}=n,O=SU(n,TU),{basename:P}=re.useContext(af),W,z=!1;if(typeof E=="string"&&UU.test(E)&&(W=E,kU))try{let ce=new URL(window.location.href),he=E.startsWith("//")?new URL(ce.protocol+E):new URL(E),Ie=Rw(he.pathname,P);he.origin===ce.origin&&Ie!=null?E=Ie+he.search+he.hash:z=!0}catch{}let H=lU(E,{relative:h}),Z=RU(E,{replace:m,state:o,target:x,preventScrollReset:I,relative:h,viewTransition:D});function ie(ce){l&&l(ce),ce.defaultPrevented||Z(ce)}return re.createElement("a",b_({},O,{href:W||H,onClick:z||d?l:ie,ref:i,target:x}))});var S2;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(S2||(S2={}));var F2;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(F2||(F2={}));function RU(e,n){let{target:i,replace:l,state:h,preventScrollReset:d,relative:m,viewTransition:o}=n===void 0?{}:n,x=cU(),E=Xm(),I=zE(e,{relative:m});return re.useCallback(D=>{if(IU(D,i)){D.preventDefault();let O=l!==void 0?l:Z0(E)===Z0(I);x(e,{replace:O,state:h,preventScrollReset:d,relative:m,viewTransition:o})}},[E,x,I,l,h,i,e,d,m,o])}function NU(e){return new Worker("/Domapus/assets/data-processor-BM1X7qjO.js",{name:e?.name})}function QU(){const e=re.useRef(null),[n,i]=re.useState(!1),[l,h]=re.useState({phase:""}),d=re.useRef(new Map),m=re.useRef(!1);return console.log("[useDataWorker] Hook initialized"),re.useEffect(()=>{if(m.current)return;console.log("[useDataWorker] Creating worker instance");const x=new NU;return e.current=x,m.current=!0,x.onmessage=E=>{const{id:I,type:D,data:O,error:P}=E.data;switch(console.log("[useDataWorker] Received message from worker:",D,{id:I}),D){case"PROGRESS":console.log("[useDataWorker] Progress update:",O.phase),h(O);break;case"ERROR":{console.error("[useDataWorker] Worker error:",P),i(!1);const W=d.current.get(I);W&&(W.reject(new Error(P)),d.current.delete(I));break}default:{console.log(`[useDataWorker] ${D} completed for request ${I}`),i(!1);const W=d.current.get(I);W&&(W.resolve(O),d.current.delete(I));break}}},x.onerror=E=>{console.error("[useDataWorker] Unhandled worker error:",E),i(!1),d.current.forEach(I=>I.reject(E)),d.current.clear()},()=>{console.log("[useDataWorker] Terminating worker"),e.current&&(e.current.terminate(),e.current=null),m.current=!1}},[]),{processData:re.useCallback(x=>{const E=e.current;return!E||!m.current?(console.error("[useDataWorker] Worker not available"),Promise.reject(new Error("Worker is not initialized"))):new Promise((I,D)=>{const O=`${Date.now()}-${Math.random()}`;console.log(`[useDataWorker] Sending message to worker: ${x.type}, request ID: ${O}`),d.current.set(O,{resolve:I,reject:D}),i(!0),E.postMessage({id:O,...x})})},[]),isLoading:n,progress:l}}var OU=Symbol.for("react.lazy"),X0=fy[" use ".trim().toString()];function zU(e){return typeof e=="object"&&e!==null&&"then"in e}function GE(e){return e!=null&&typeof e=="object"&&"$$typeof"in e&&e.$$typeof===OU&&"_payload"in e&&zU(e._payload)}function KE(e){const n=jU(e),i=re.forwardRef((l,h)=>{let{children:d,...m}=l;GE(d)&&typeof X0=="function"&&(d=X0(d._payload));const o=re.Children.toArray(d),x=o.find(GU);if(x){const E=x.props.children,I=o.map(D=>D===x?re.Children.count(E)>1?re.Children.only(null):re.isValidElement(E)?E.props.children:null:D);return ae.jsx(n,{...m,ref:h,children:re.isValidElement(E)?re.cloneElement(E,void 0,I):null})}return ae.jsx(n,{...m,ref:h,children:d})});return i.displayName=`${e}.Slot`,i}var HU=KE("Slot");function jU(e){const n=re.forwardRef((i,l)=>{let{children:h,...d}=i;if(GE(h)&&typeof X0=="function"&&(h=X0(h._payload)),re.isValidElement(h)){const m=qU(h),o=KU(d,h.props);return h.type!==re.Fragment&&(o.ref=l?Gm(l,m):m),re.cloneElement(h,o)}return re.Children.count(h)>1?re.Children.only(null):null});return n.displayName=`${e}.SlotClone`,n}var VU=Symbol("radix.slottable");function GU(e){return re.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===VU}function KU(e,n){const i={...n};for(const l in n){const h=e[l],d=n[l];/^on[A-Z]/.test(l)?h&&d?i[l]=(...o)=>{const x=d(...o);return h(...o),x}:h&&(i[l]=h):l==="style"?i[l]={...h,...d}:l==="className"&&(i[l]=[h,d].filter(Boolean).join(" "))}return{...e,...i}}function qU(e){let n=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,i=n&&"isReactWarning"in n&&n.isReactWarning;return i?e.ref:(n=Object.getOwnPropertyDescriptor(e,"ref")?.get,i=n&&"isReactWarning"in n&&n.isReactWarning,i?e.props.ref:e.props.ref||e.ref)}const $U=yy("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),Cc=re.forwardRef(({className:e,variant:n,size:i,asChild:l=!1,...h},d)=>{const m=l?HU:"button";return ae.jsx(m,{className:Li($U({variant:n,size:i,className:e})),ref:d,...h})});Cc.displayName="Button";var WU=re.createContext(void 0);function Qw(e){const n=re.useContext(WU);return e||n||"ltr"}var Jv="rovingFocusGroup.onEntryFocus",ZU={bubbles:!1,cancelable:!0},Ym="RovingFocusGroup",[B_,qE,XU]=gw(Ym),[YU,$E]=Hh(Ym,[XU]),[JU,eD]=YU(Ym),WE=re.forwardRef((e,n)=>ae.jsx(B_.Provider,{scope:e.__scopeRovingFocusGroup,children:ae.jsx(B_.Slot,{scope:e.__scopeRovingFocusGroup,children:ae.jsx(tD,{...e,ref:n})})}));WE.displayName=Ym;var tD=re.forwardRef((e,n)=>{const{__scopeRovingFocusGroup:i,orientation:l,loop:h=!1,dir:d,currentTabStopId:m,defaultCurrentTabStopId:o,onCurrentTabStopIdChange:x,onEntryFocus:E,preventScrollOnEntryFocus:I=!1,...D}=e,O=re.useRef(null),P=ds(n,O),W=Qw(d),[z,H]=mp({prop:m,defaultProp:o??null,onChange:x,caller:Ym}),[Z,ie]=re.useState(!1),ce=iu(E),he=qE(i),Ie=re.useRef(!1),[Ve,Me]=re.useState(0);return re.useEffect(()=>{const Pe=O.current;if(Pe)return Pe.addEventListener(Jv,ce),()=>Pe.removeEventListener(Jv,ce)},[ce]),ae.jsx(JU,{scope:i,orientation:l,dir:W,loop:h,currentTabStopId:z,onItemFocus:re.useCallback(Pe=>H(Pe),[H]),onItemShiftTab:re.useCallback(()=>ie(!0),[]),onFocusableItemAdd:re.useCallback(()=>Me(Pe=>Pe+1),[]),onFocusableItemRemove:re.useCallback(()=>Me(Pe=>Pe-1),[]),children:ae.jsx(oi.div,{tabIndex:Z||Ve===0?-1:0,"data-orientation":l,...D,ref:P,style:{outline:"none",...e.style},onMouseDown:Un(e.onMouseDown,()=>{Ie.current=!0}),onFocus:Un(e.onFocus,Pe=>{const xe=!Ie.current;if(Pe.target===Pe.currentTarget&&xe&&!Z){const nt=new CustomEvent(Jv,ZU);if(Pe.currentTarget.dispatchEvent(nt),!nt.defaultPrevented){const pe=he().filter(ht=>ht.focusable),_e=pe.find(ht=>ht.active),Ue=pe.find(ht=>ht.id===z),pt=[_e,Ue,...pe].filter(Boolean).map(ht=>ht.ref.current);YE(pt,I)}}Ie.current=!1}),onBlur:Un(e.onBlur,()=>ie(!1))})})}),ZE="RovingFocusGroupItem",XE=re.forwardRef((e,n)=>{const{__scopeRovingFocusGroup:i,focusable:l=!0,active:h=!1,tabStopId:d,children:m,...o}=e,x=vy(),E=d||x,I=eD(ZE,i),D=I.currentTabStopId===E,O=qE(i),{onFocusableItemAdd:P,onFocusableItemRemove:W,currentTabStopId:z}=I;return re.useEffect(()=>{if(l)return P(),()=>W()},[l,P,W]),ae.jsx(B_.ItemSlot,{scope:i,id:E,focusable:l,active:h,children:ae.jsx(oi.span,{tabIndex:D?0:-1,"data-orientation":I.orientation,...o,ref:n,onMouseDown:Un(e.onMouseDown,H=>{l?I.onItemFocus(E):H.preventDefault()}),onFocus:Un(e.onFocus,()=>I.onItemFocus(E)),onKeyDown:Un(e.onKeyDown,H=>{if(H.key==="Tab"&&H.shiftKey){I.onItemShiftTab();return}if(H.target!==H.currentTarget)return;const Z=iD(H,I.orientation,I.dir);if(Z!==void 0){if(H.metaKey||H.ctrlKey||H.altKey||H.shiftKey)return;H.preventDefault();let ce=O().filter(he=>he.focusable).map(he=>he.ref.current);if(Z==="last")ce.reverse();else if(Z==="prev"||Z==="next"){Z==="prev"&&ce.reverse();const he=ce.indexOf(H.currentTarget);ce=I.loop?sD(ce,he+1):ce.slice(he+1)}setTimeout(()=>YE(ce))}}),children:typeof m=="function"?m({isCurrentTabStop:D,hasTabStop:z!=null}):m})})});XE.displayName=ZE;var rD={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function nD(e,n){return n!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function iD(e,n,i){const l=nD(e.key,i);if(!(n==="vertical"&&["ArrowLeft","ArrowRight"].includes(l))&&!(n==="horizontal"&&["ArrowUp","ArrowDown"].includes(l)))return rD[l]}function YE(e,n=!1){const i=document.activeElement;for(const l of e)if(l===i||(l.focus({preventScroll:n}),document.activeElement!==i))return}function sD(e,n){return e.map((i,l)=>e[(n+l)%e.length])}var oD=WE,aD=XE;function Ow(e){const n=re.useRef({value:e,previous:e});return re.useMemo(()=>(n.current.value!==e&&(n.current.previous=n.current.value,n.current.value=e),n.current.previous),[e])}var zw="Radio",[lD,JE]=Hh(zw),[cD,AD]=lD(zw),eS=re.forwardRef((e,n)=>{const{__scopeRadio:i,name:l,checked:h=!1,required:d,disabled:m,value:o="on",onCheck:x,form:E,...I}=e,[D,O]=re.useState(null),P=ds(n,H=>O(H)),W=re.useRef(!1),z=D?E||!!D.closest("form"):!0;return ae.jsxs(cD,{scope:i,checked:h,disabled:m,children:[ae.jsx(oi.button,{type:"button",role:"radio","aria-checked":h,"data-state":iS(h),"data-disabled":m?"":void 0,disabled:m,value:o,...I,ref:P,onClick:Un(e.onClick,H=>{h||x?.(),z&&(W.current=H.isPropagationStopped(),W.current||H.stopPropagation())})}),z&&ae.jsx(nS,{control:D,bubbles:!W.current,name:l,value:o,checked:h,required:d,disabled:m,form:E,style:{transform:"translateX(-100%)"}})]})});eS.displayName=zw;var tS="RadioIndicator",rS=re.forwardRef((e,n)=>{const{__scopeRadio:i,forceMount:l,...h}=e,d=AD(tS,i);return ae.jsx(Km,{present:l||d.checked,children:ae.jsx(oi.span,{"data-state":iS(d.checked),"data-disabled":d.disabled?"":void 0,...h,ref:n})})});rS.displayName=tS;var uD="RadioBubbleInput",nS=re.forwardRef(({__scopeRadio:e,control:n,checked:i,bubbles:l=!0,...h},d)=>{const m=re.useRef(null),o=ds(m,d),x=Ow(i),E=Tw(n);return re.useEffect(()=>{const I=m.current;if(!I)return;const D=window.HTMLInputElement.prototype,P=Object.getOwnPropertyDescriptor(D,"checked").set;if(x!==i&&P){const W=new Event("click",{bubbles:l});P.call(I,i),I.dispatchEvent(W)}},[x,i,l]),ae.jsx(oi.input,{type:"radio","aria-hidden":!0,defaultChecked:i,...h,tabIndex:-1,ref:o,style:{...h.style,...E,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});nS.displayName=uD;function iS(e){return e?"checked":"unchecked"}var hD=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],Ty="RadioGroup",[dD]=Hh(Ty,[$E,JE]),sS=$E(),oS=JE(),[fD,pD]=dD(Ty),aS=re.forwardRef((e,n)=>{const{__scopeRadioGroup:i,name:l,defaultValue:h,value:d,required:m=!1,disabled:o=!1,orientation:x,dir:E,loop:I=!0,onValueChange:D,...O}=e,P=sS(i),W=Qw(E),[z,H]=mp({prop:d,defaultProp:h??null,onChange:D,caller:Ty});return ae.jsx(fD,{scope:i,name:l,required:m,disabled:o,value:z,onValueChange:H,children:ae.jsx(oD,{asChild:!0,...P,orientation:x,dir:W,loop:I,children:ae.jsx(oi.div,{role:"radiogroup","aria-required":m,"aria-orientation":x,"data-disabled":o?"":void 0,dir:W,...O,ref:n})})})});aS.displayName=Ty;var lS="RadioGroupItem",cS=re.forwardRef((e,n)=>{const{__scopeRadioGroup:i,disabled:l,...h}=e,d=pD(lS,i),m=d.disabled||l,o=sS(i),x=oS(i),E=re.useRef(null),I=ds(n,E),D=d.value===h.value,O=re.useRef(!1);return re.useEffect(()=>{const P=z=>{hD.includes(z.key)&&(O.current=!0)},W=()=>O.current=!1;return document.addEventListener("keydown",P),document.addEventListener("keyup",W),()=>{document.removeEventListener("keydown",P),document.removeEventListener("keyup",W)}},[]),ae.jsx(aD,{asChild:!0,...o,focusable:!m,active:D,children:ae.jsx(eS,{disabled:m,required:d.required,checked:D,...x,...h,name:d.name,ref:I,onCheck:()=>d.onValueChange(h.value),onKeyDown:Un(P=>{P.key==="Enter"&&P.preventDefault()}),onFocus:Un(h.onFocus,()=>{O.current&&E.current?.click()})})})});cS.displayName=lS;var mD="RadioGroupIndicator",AS=re.forwardRef((e,n)=>{const{__scopeRadioGroup:i,...l}=e,h=oS(i);return ae.jsx(rS,{...h,...l,ref:n})});AS.displayName=mD;var uS=aS,hS=cS,gD=AS;const C_=re.forwardRef(({className:e,...n},i)=>ae.jsx(uS,{className:Li("grid gap-2",e),...n,ref:i}));C_.displayName=uS.displayName;const Yf=re.forwardRef(({className:e,...n},i)=>ae.jsx(hS,{ref:i,className:Li("aspect-square h-4 w-4 rounded-full border border-primary text-primary ring-offset-background focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),...n,children:ae.jsx(gD,{className:"flex items-center justify-center",children:ae.jsx(Y3,{className:"h-2.5 w-2.5 fill-current text-current"})})}));Yf.displayName=hS.displayName;var yD=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],vD=yD.reduce((e,n)=>{const i=KE(`Primitive.${n}`),l=re.forwardRef((h,d)=>{const{asChild:m,...o}=h,x=m?i:n;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),ae.jsx(x,{...o,ref:d})});return l.displayName=`Primitive.${n}`,{...e,[n]:l}},{}),_D="Label",dS=re.forwardRef((e,n)=>ae.jsx(vD.label,{...e,ref:n,onMouseDown:i=>{i.target.closest("button, input, select, textarea")||(e.onMouseDown?.(i),!i.defaultPrevented&&i.detail>1&&i.preventDefault())}}));dS.displayName=_D;var fS=dS;const wD=yy("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),od=re.forwardRef(({className:e,...n},i)=>ae.jsx(fS,{ref:i,className:Li(wD(),e),...n}));od.displayName=fS.displayName;function I2(e,[n,i]){return Math.min(i,Math.max(n,e))}var e1=0;function xD(){re.useEffect(()=>{const e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??T2()),document.body.insertAdjacentElement("beforeend",e[1]??T2()),e1++,()=>{e1===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(n=>n.remove()),e1--}},[])}function T2(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var t1="focusScope.autoFocusOnMount",r1="focusScope.autoFocusOnUnmount",P2={bubbles:!1,cancelable:!0},bD="FocusScope",pS=re.forwardRef((e,n)=>{const{loop:i=!1,trapped:l=!1,onMountAutoFocus:h,onUnmountAutoFocus:d,...m}=e,[o,x]=re.useState(null),E=iu(h),I=iu(d),D=re.useRef(null),O=ds(n,z=>x(z)),P=re.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;re.useEffect(()=>{if(l){let z=function(ce){if(P.paused||!o)return;const he=ce.target;o.contains(he)?D.current=he:ad(D.current,{select:!0})},H=function(ce){if(P.paused||!o)return;const he=ce.relatedTarget;he!==null&&(o.contains(he)||ad(D.current,{select:!0}))},Z=function(ce){if(document.activeElement===document.body)for(const Ie of ce)Ie.removedNodes.length>0&&ad(o)};document.addEventListener("focusin",z),document.addEventListener("focusout",H);const ie=new MutationObserver(Z);return o&&ie.observe(o,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",z),document.removeEventListener("focusout",H),ie.disconnect()}}},[l,o,P.paused]),re.useEffect(()=>{if(o){M2.add(P);const z=document.activeElement;if(!o.contains(z)){const Z=new CustomEvent(t1,P2);o.addEventListener(t1,E),o.dispatchEvent(Z),Z.defaultPrevented||(BD(ID(mS(o)),{select:!0}),document.activeElement===z&&ad(o))}return()=>{o.removeEventListener(t1,E),setTimeout(()=>{const Z=new CustomEvent(r1,P2);o.addEventListener(r1,I),o.dispatchEvent(Z),Z.defaultPrevented||ad(z??document.body,{select:!0}),o.removeEventListener(r1,I),M2.remove(P)},0)}}},[o,E,I,P]);const W=re.useCallback(z=>{if(!i&&!l||P.paused)return;const H=z.key==="Tab"&&!z.altKey&&!z.ctrlKey&&!z.metaKey,Z=document.activeElement;if(H&&Z){const ie=z.currentTarget,[ce,he]=CD(ie);ce&&he?!z.shiftKey&&Z===he?(z.preventDefault(),i&&ad(ce,{select:!0})):z.shiftKey&&Z===ce&&(z.preventDefault(),i&&ad(he,{select:!0})):Z===ie&&z.preventDefault()}},[i,l,P.paused]);return ae.jsx(oi.div,{tabIndex:-1,...m,ref:O,onKeyDown:W})});pS.displayName=bD;function BD(e,{select:n=!1}={}){const i=document.activeElement;for(const l of e)if(ad(l,{select:n}),document.activeElement!==i)return}function CD(e){const n=mS(e),i=L2(n,e),l=L2(n.reverse(),e);return[i,l]}function mS(e){const n=[],i=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:l=>{const h=l.tagName==="INPUT"&&l.type==="hidden";return l.disabled||l.hidden||h?NodeFilter.FILTER_SKIP:l.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;i.nextNode();)n.push(i.currentNode);return n}function L2(e,n){for(const i of e)if(!ED(i,{upTo:n}))return i}function ED(e,{upTo:n}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(n!==void 0&&e===n)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function SD(e){return e instanceof HTMLInputElement&&"select"in e}function ad(e,{select:n=!1}={}){if(e&&e.focus){const i=document.activeElement;e.focus({preventScroll:!0}),e!==i&&SD(e)&&n&&e.select()}}var M2=FD();function FD(){let e=[];return{add(n){const i=e[0];n!==i&&i?.pause(),e=k2(e,n),e.unshift(n)},remove(n){e=k2(e,n),e[0]?.resume()}}}function k2(e,n){const i=[...e],l=i.indexOf(n);return l!==-1&&i.splice(l,1),i}function ID(e){return e.filter(n=>n.tagName!=="A")}function TD(e){const n=PD(e),i=re.forwardRef((l,h)=>{const{children:d,...m}=l,o=re.Children.toArray(d),x=o.find(MD);if(x){const E=x.props.children,I=o.map(D=>D===x?re.Children.count(E)>1?re.Children.only(null):re.isValidElement(E)?E.props.children:null:D);return ae.jsx(n,{...m,ref:h,children:re.isValidElement(E)?re.cloneElement(E,void 0,I):null})}return ae.jsx(n,{...m,ref:h,children:d})});return i.displayName=`${e}.Slot`,i}function PD(e){const n=re.forwardRef((i,l)=>{const{children:h,...d}=i;if(re.isValidElement(h)){const m=UD(h),o=kD(d,h.props);return h.type!==re.Fragment&&(o.ref=l?Gm(l,m):m),re.cloneElement(h,o)}return re.Children.count(h)>1?re.Children.only(null):null});return n.displayName=`${e}.SlotClone`,n}var LD=Symbol("radix.slottable");function MD(e){return re.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===LD}function kD(e,n){const i={...n};for(const l in n){const h=e[l],d=n[l];/^on[A-Z]/.test(l)?h&&d?i[l]=(...o)=>{const x=d(...o);return h(...o),x}:h&&(i[l]=h):l==="style"?i[l]={...h,...d}:l==="className"&&(i[l]=[h,d].filter(Boolean).join(" "))}return{...e,...i}}function UD(e){let n=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,i=n&&"isReactWarning"in n&&n.isReactWarning;return i?e.ref:(n=Object.getOwnPropertyDescriptor(e,"ref")?.get,i=n&&"isReactWarning"in n&&n.isReactWarning,i?e.props.ref:e.props.ref||e.ref)}var DD=function(e){if(typeof document>"u")return null;var n=Array.isArray(e)?e[0]:e;return n.ownerDocument.body},Qf=new WeakMap,Gg=new WeakMap,Kg={},n1=0,gS=function(e){return e&&(e.host||gS(e.parentNode))},RD=function(e,n){return n.map(function(i){if(e.contains(i))return i;var l=gS(i);return l&&e.contains(l)?l:(console.error("aria-hidden",i,"in not contained inside",e,". Doing nothing"),null)}).filter(function(i){return!!i})},ND=function(e,n,i,l){var h=RD(n,Array.isArray(e)?e:[e]);Kg[i]||(Kg[i]=new WeakMap);var d=Kg[i],m=[],o=new Set,x=new Set(h),E=function(D){!D||o.has(D)||(o.add(D),E(D.parentNode))};h.forEach(E);var I=function(D){!D||x.has(D)||Array.prototype.forEach.call(D.children,function(O){if(o.has(O))I(O);else try{var P=O.getAttribute(l),W=P!==null&&P!=="false",z=(Qf.get(O)||0)+1,H=(d.get(O)||0)+1;Qf.set(O,z),d.set(O,H),m.push(O),z===1&&W&&Gg.set(O,!0),H===1&&O.setAttribute(i,"true"),W||O.setAttribute(l,"true")}catch(Z){console.error("aria-hidden: cannot operate on ",O,Z)}})};return I(n),o.clear(),n1++,function(){m.forEach(function(D){var O=Qf.get(D)-1,P=d.get(D)-1;Qf.set(D,O),d.set(D,P),O||(Gg.has(D)||D.removeAttribute(l),Gg.delete(D)),P||D.removeAttribute(i)}),n1--,n1||(Qf=new WeakMap,Qf=new WeakMap,Gg=new WeakMap,Kg={})}},QD=function(e,n,i){i===void 0&&(i="data-aria-hidden");var l=Array.from(Array.isArray(e)?e:[e]),h=DD(e);return h?(l.push.apply(l,Array.from(h.querySelectorAll("[aria-live], script"))),ND(l,h,i,"aria-hidden")):function(){return null}},Ju=function(){return Ju=Object.assign||function(n){for(var i,l=1,h=arguments.length;l<h;l++){i=arguments[l];for(var d in i)Object.prototype.hasOwnProperty.call(i,d)&&(n[d]=i[d])}return n},Ju.apply(this,arguments)};function yS(e,n){var i={};for(var l in e)Object.prototype.hasOwnProperty.call(e,l)&&n.indexOf(l)<0&&(i[l]=e[l]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var h=0,l=Object.getOwnPropertySymbols(e);h<l.length;h++)n.indexOf(l[h])<0&&Object.prototype.propertyIsEnumerable.call(e,l[h])&&(i[l[h]]=e[l[h]]);return i}function OD(e,n,i){if(i||arguments.length===2)for(var l=0,h=n.length,d;l<h;l++)(d||!(l in n))&&(d||(d=Array.prototype.slice.call(n,0,l)),d[l]=n[l]);return e.concat(d||Array.prototype.slice.call(n))}var L0="right-scroll-bar-position",M0="width-before-scroll-bar",zD="with-scroll-bars-hidden",HD="--removed-body-scroll-bar-size";function i1(e,n){return typeof e=="function"?e(n):e&&(e.current=n),e}function jD(e,n){var i=re.useState(function(){return{value:e,callback:n,facade:{get current(){return i.value},set current(l){var h=i.value;h!==l&&(i.value=l,i.callback(l,h))}}}})[0];return i.callback=n,i.facade}var VD=typeof window<"u"?re.useLayoutEffect:re.useEffect,U2=new WeakMap;function GD(e,n){var i=jD(null,function(l){return e.forEach(function(h){return i1(h,l)})});return VD(function(){var l=U2.get(i);if(l){var h=new Set(l),d=new Set(e),m=i.current;h.forEach(function(o){d.has(o)||i1(o,null)}),d.forEach(function(o){h.has(o)||i1(o,m)})}U2.set(i,e)},[e]),i}function KD(e){return e}function qD(e,n){n===void 0&&(n=KD);var i=[],l=!1,h={read:function(){if(l)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return i.length?i[i.length-1]:e},useMedium:function(d){var m=n(d,l);return i.push(m),function(){i=i.filter(function(o){return o!==m})}},assignSyncMedium:function(d){for(l=!0;i.length;){var m=i;i=[],m.forEach(d)}i={push:function(o){return d(o)},filter:function(){return i}}},assignMedium:function(d){l=!0;var m=[];if(i.length){var o=i;i=[],o.forEach(d),m=i}var x=function(){var I=m;m=[],I.forEach(d)},E=function(){return Promise.resolve().then(x)};E(),i={push:function(I){m.push(I),E()},filter:function(I){return m=m.filter(I),i}}}};return h}function $D(e){e===void 0&&(e={});var n=qD(null);return n.options=Ju({async:!0,ssr:!1},e),n}var vS=function(e){var n=e.sideCar,i=yS(e,["sideCar"]);if(!n)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var l=n.read();if(!l)throw new Error("Sidecar medium not found");return re.createElement(l,Ju({},i))};vS.isSideCarExport=!0;function WD(e,n){return e.useMedium(n),vS}var _S=$D(),s1=function(){},Py=re.forwardRef(function(e,n){var i=re.useRef(null),l=re.useState({onScrollCapture:s1,onWheelCapture:s1,onTouchMoveCapture:s1}),h=l[0],d=l[1],m=e.forwardProps,o=e.children,x=e.className,E=e.removeScrollBar,I=e.enabled,D=e.shards,O=e.sideCar,P=e.noRelative,W=e.noIsolation,z=e.inert,H=e.allowPinchZoom,Z=e.as,ie=Z===void 0?"div":Z,ce=e.gapMode,he=yS(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),Ie=O,Ve=GD([i,n]),Me=Ju(Ju({},he),h);return re.createElement(re.Fragment,null,I&&re.createElement(Ie,{sideCar:_S,removeScrollBar:E,shards:D,noRelative:P,noIsolation:W,inert:z,setCallbacks:d,allowPinchZoom:!!H,lockRef:i,gapMode:ce}),m?re.cloneElement(re.Children.only(o),Ju(Ju({},Me),{ref:Ve})):re.createElement(ie,Ju({},Me,{className:x,ref:Ve}),o))});Py.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Py.classNames={fullWidth:M0,zeroRight:L0};var ZD=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function XD(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var n=ZD();return n&&e.setAttribute("nonce",n),e}function YD(e,n){e.styleSheet?e.styleSheet.cssText=n:e.appendChild(document.createTextNode(n))}function JD(e){var n=document.head||document.getElementsByTagName("head")[0];n.appendChild(e)}var eR=function(){var e=0,n=null;return{add:function(i){e==0&&(n=XD())&&(YD(n,i),JD(n)),e++},remove:function(){e--,!e&&n&&(n.parentNode&&n.parentNode.removeChild(n),n=null)}}},tR=function(){var e=eR();return function(n,i){re.useEffect(function(){return e.add(n),function(){e.remove()}},[n&&i])}},wS=function(){var e=tR(),n=function(i){var l=i.styles,h=i.dynamic;return e(l,h),null};return n},rR={left:0,top:0,right:0,gap:0},o1=function(e){return parseInt(e||"",10)||0},nR=function(e){var n=window.getComputedStyle(document.body),i=n[e==="padding"?"paddingLeft":"marginLeft"],l=n[e==="padding"?"paddingTop":"marginTop"],h=n[e==="padding"?"paddingRight":"marginRight"];return[o1(i),o1(l),o1(h)]},iR=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return rR;var n=nR(e),i=document.documentElement.clientWidth,l=window.innerWidth;return{left:n[0],top:n[1],right:n[2],gap:Math.max(0,l-i+n[2]-n[0])}},sR=wS(),Ap="data-scroll-locked",oR=function(e,n,i,l){var h=e.left,d=e.top,m=e.right,o=e.gap;return i===void 0&&(i="margin"),`
  .`.concat(zD,` {
   overflow: hidden `).concat(l,`;
   padding-right: `).concat(o,"px ").concat(l,`;
  }
  body[`).concat(Ap,`] {
    overflow: hidden `).concat(l,`;
    overscroll-behavior: contain;
    `).concat([n&&"position: relative ".concat(l,";"),i==="margin"&&`
    padding-left: `.concat(h,`px;
    padding-top: `).concat(d,`px;
    padding-right: `).concat(m,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(o,"px ").concat(l,`;
    `),i==="padding"&&"padding-right: ".concat(o,"px ").concat(l,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(L0,` {
    right: `).concat(o,"px ").concat(l,`;
  }
  
  .`).concat(M0,` {
    margin-right: `).concat(o,"px ").concat(l,`;
  }
  
  .`).concat(L0," .").concat(L0,` {
    right: 0 `).concat(l,`;
  }
  
  .`).concat(M0," .").concat(M0,` {
    margin-right: 0 `).concat(l,`;
  }
  
  body[`).concat(Ap,`] {
    `).concat(HD,": ").concat(o,`px;
  }
`)},D2=function(){var e=parseInt(document.body.getAttribute(Ap)||"0",10);return isFinite(e)?e:0},aR=function(){re.useEffect(function(){return document.body.setAttribute(Ap,(D2()+1).toString()),function(){var e=D2()-1;e<=0?document.body.removeAttribute(Ap):document.body.setAttribute(Ap,e.toString())}},[])},lR=function(e){var n=e.noRelative,i=e.noImportant,l=e.gapMode,h=l===void 0?"margin":l;aR();var d=re.useMemo(function(){return iR(h)},[h]);return re.createElement(sR,{styles:oR(d,!n,h,i?"":"!important")})},E_=!1;if(typeof window<"u")try{var qg=Object.defineProperty({},"passive",{get:function(){return E_=!0,!0}});window.addEventListener("test",qg,qg),window.removeEventListener("test",qg,qg)}catch{E_=!1}var Of=E_?{passive:!1}:!1,cR=function(e){return e.tagName==="TEXTAREA"},xS=function(e,n){if(!(e instanceof Element))return!1;var i=window.getComputedStyle(e);return i[n]!=="hidden"&&!(i.overflowY===i.overflowX&&!cR(e)&&i[n]==="visible")},AR=function(e){return xS(e,"overflowY")},uR=function(e){return xS(e,"overflowX")},R2=function(e,n){var i=n.ownerDocument,l=n;do{typeof ShadowRoot<"u"&&l instanceof ShadowRoot&&(l=l.host);var h=bS(e,l);if(h){var d=BS(e,l),m=d[1],o=d[2];if(m>o)return!0}l=l.parentNode}while(l&&l!==i.body);return!1},hR=function(e){var n=e.scrollTop,i=e.scrollHeight,l=e.clientHeight;return[n,i,l]},dR=function(e){var n=e.scrollLeft,i=e.scrollWidth,l=e.clientWidth;return[n,i,l]},bS=function(e,n){return e==="v"?AR(n):uR(n)},BS=function(e,n){return e==="v"?hR(n):dR(n)},fR=function(e,n){return e==="h"&&n==="rtl"?-1:1},pR=function(e,n,i,l,h){var d=fR(e,window.getComputedStyle(n).direction),m=d*l,o=i.target,x=n.contains(o),E=!1,I=m>0,D=0,O=0;do{if(!o)break;var P=BS(e,o),W=P[0],z=P[1],H=P[2],Z=z-H-d*W;(W||Z)&&bS(e,o)&&(D+=Z,O+=W);var ie=o.parentNode;o=ie&&ie.nodeType===Node.DOCUMENT_FRAGMENT_NODE?ie.host:ie}while(!x&&o!==document.body||x&&(n.contains(o)||n===o));return(I&&Math.abs(D)<1||!I&&Math.abs(O)<1)&&(E=!0),E},$g=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},N2=function(e){return[e.deltaX,e.deltaY]},Q2=function(e){return e&&"current"in e?e.current:e},mR=function(e,n){return e[0]===n[0]&&e[1]===n[1]},gR=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},yR=0,zf=[];function vR(e){var n=re.useRef([]),i=re.useRef([0,0]),l=re.useRef(),h=re.useState(yR++)[0],d=re.useState(wS)[0],m=re.useRef(e);re.useEffect(function(){m.current=e},[e]),re.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(h));var z=OD([e.lockRef.current],(e.shards||[]).map(Q2),!0).filter(Boolean);return z.forEach(function(H){return H.classList.add("allow-interactivity-".concat(h))}),function(){document.body.classList.remove("block-interactivity-".concat(h)),z.forEach(function(H){return H.classList.remove("allow-interactivity-".concat(h))})}}},[e.inert,e.lockRef.current,e.shards]);var o=re.useCallback(function(z,H){if("touches"in z&&z.touches.length===2||z.type==="wheel"&&z.ctrlKey)return!m.current.allowPinchZoom;var Z=$g(z),ie=i.current,ce="deltaX"in z?z.deltaX:ie[0]-Z[0],he="deltaY"in z?z.deltaY:ie[1]-Z[1],Ie,Ve=z.target,Me=Math.abs(ce)>Math.abs(he)?"h":"v";if("touches"in z&&Me==="h"&&Ve.type==="range")return!1;var Pe=window.getSelection(),xe=Pe&&Pe.anchorNode,nt=xe?xe===Ve||xe.contains(Ve):!1;if(nt)return!1;var pe=R2(Me,Ve);if(!pe)return!0;if(pe?Ie=Me:(Ie=Me==="v"?"h":"v",pe=R2(Me,Ve)),!pe)return!1;if(!l.current&&"changedTouches"in z&&(ce||he)&&(l.current=Ie),!Ie)return!0;var _e=l.current||Ie;return pR(_e,H,z,_e==="h"?ce:he)},[]),x=re.useCallback(function(z){var H=z;if(!(!zf.length||zf[zf.length-1]!==d)){var Z="deltaY"in H?N2(H):$g(H),ie=n.current.filter(function(Ie){return Ie.name===H.type&&(Ie.target===H.target||H.target===Ie.shadowParent)&&mR(Ie.delta,Z)})[0];if(ie&&ie.should){H.cancelable&&H.preventDefault();return}if(!ie){var ce=(m.current.shards||[]).map(Q2).filter(Boolean).filter(function(Ie){return Ie.contains(H.target)}),he=ce.length>0?o(H,ce[0]):!m.current.noIsolation;he&&H.cancelable&&H.preventDefault()}}},[]),E=re.useCallback(function(z,H,Z,ie){var ce={name:z,delta:H,target:Z,should:ie,shadowParent:_R(Z)};n.current.push(ce),setTimeout(function(){n.current=n.current.filter(function(he){return he!==ce})},1)},[]),I=re.useCallback(function(z){i.current=$g(z),l.current=void 0},[]),D=re.useCallback(function(z){E(z.type,N2(z),z.target,o(z,e.lockRef.current))},[]),O=re.useCallback(function(z){E(z.type,$g(z),z.target,o(z,e.lockRef.current))},[]);re.useEffect(function(){return zf.push(d),e.setCallbacks({onScrollCapture:D,onWheelCapture:D,onTouchMoveCapture:O}),document.addEventListener("wheel",x,Of),document.addEventListener("touchmove",x,Of),document.addEventListener("touchstart",I,Of),function(){zf=zf.filter(function(z){return z!==d}),document.removeEventListener("wheel",x,Of),document.removeEventListener("touchmove",x,Of),document.removeEventListener("touchstart",I,Of)}},[]);var P=e.removeScrollBar,W=e.inert;return re.createElement(re.Fragment,null,W?re.createElement(d,{styles:gR(h)}):null,P?re.createElement(lR,{noRelative:e.noRelative,gapMode:e.gapMode}):null)}function _R(e){for(var n=null;e!==null;)e instanceof ShadowRoot&&(n=e.host,e=e.host),e=e.parentNode;return n}const wR=WD(_S,vR);var CS=re.forwardRef(function(e,n){return re.createElement(Py,Ju({},e,{ref:n,sideCar:wR}))});CS.classNames=Py.classNames;var xR=[" ","Enter","ArrowUp","ArrowDown"],bR=[" ","Enter"],nf="Select",[Ly,My,BR]=gw(nf),[Cp]=Hh(nf,[BR,By]),ky=By(),[CR,Cd]=Cp(nf),[ER,SR]=Cp(nf),ES=e=>{const{__scopeSelect:n,children:i,open:l,defaultOpen:h,onOpenChange:d,value:m,defaultValue:o,onValueChange:x,dir:E,name:I,autoComplete:D,disabled:O,required:P,form:W}=e,z=ky(n),[H,Z]=re.useState(null),[ie,ce]=re.useState(null),[he,Ie]=re.useState(!1),Ve=Qw(E),[Me,Pe]=mp({prop:l,defaultProp:h??!1,onChange:d,caller:nf}),[xe,nt]=mp({prop:m,defaultProp:o,onChange:x,caller:nf}),pe=re.useRef(null),_e=H?W||!!H.closest("form"):!0,[Ue,Fe]=re.useState(new Set),pt=Array.from(Ue).map(ht=>ht.props.value).join(";");return ae.jsx(NM,{...z,children:ae.jsxs(CR,{required:P,scope:n,trigger:H,onTriggerChange:Z,valueNode:ie,onValueNodeChange:ce,valueNodeHasChildren:he,onValueNodeHasChildrenChange:Ie,contentId:vy(),value:xe,onValueChange:nt,open:Me,onOpenChange:Pe,dir:Ve,triggerPointerDownPosRef:pe,disabled:O,children:[ae.jsx(Ly.Provider,{scope:n,children:ae.jsx(ER,{scope:e.__scopeSelect,onNativeOptionAdd:re.useCallback(ht=>{Fe(Je=>new Set(Je).add(ht))},[]),onNativeOptionRemove:re.useCallback(ht=>{Fe(Je=>{const ze=new Set(Je);return ze.delete(ht),ze})},[]),children:i})}),_e?ae.jsxs(ZS,{"aria-hidden":!0,required:P,tabIndex:-1,name:I,autoComplete:D,value:xe,onChange:ht=>nt(ht.target.value),disabled:O,form:W,children:[xe===void 0?ae.jsx("option",{value:""}):null,Array.from(Ue)]},pt):null]})})};ES.displayName=nf;var SS="SelectTrigger",FS=re.forwardRef((e,n)=>{const{__scopeSelect:i,disabled:l=!1,...h}=e,d=ky(i),m=Cd(SS,i),o=m.disabled||l,x=ds(n,m.onTriggerChange),E=My(i),I=re.useRef("touch"),[D,O,P]=YS(z=>{const H=E().filter(ce=>!ce.disabled),Z=H.find(ce=>ce.value===m.value),ie=JS(H,z,Z);ie!==void 0&&m.onValueChange(ie.value)}),W=z=>{o||(m.onOpenChange(!0),P()),z&&(m.triggerPointerDownPosRef.current={x:Math.round(z.pageX),y:Math.round(z.pageY)})};return ae.jsx(gE,{asChild:!0,...d,children:ae.jsx(oi.button,{type:"button",role:"combobox","aria-controls":m.contentId,"aria-expanded":m.open,"aria-required":m.required,"aria-autocomplete":"none",dir:m.dir,"data-state":m.open?"open":"closed",disabled:o,"data-disabled":o?"":void 0,"data-placeholder":XS(m.value)?"":void 0,...h,ref:x,onClick:Un(h.onClick,z=>{z.currentTarget.focus(),I.current!=="mouse"&&W(z)}),onPointerDown:Un(h.onPointerDown,z=>{I.current=z.pointerType;const H=z.target;H.hasPointerCapture(z.pointerId)&&H.releasePointerCapture(z.pointerId),z.button===0&&z.ctrlKey===!1&&z.pointerType==="mouse"&&(W(z),z.preventDefault())}),onKeyDown:Un(h.onKeyDown,z=>{const H=D.current!=="";!(z.ctrlKey||z.altKey||z.metaKey)&&z.key.length===1&&O(z.key),!(H&&z.key===" ")&&xR.includes(z.key)&&(W(),z.preventDefault())})})})});FS.displayName=SS;var IS="SelectValue",TS=re.forwardRef((e,n)=>{const{__scopeSelect:i,className:l,style:h,children:d,placeholder:m="",...o}=e,x=Cd(IS,i),{onValueNodeHasChildrenChange:E}=x,I=d!==void 0,D=ds(n,x.onValueNodeChange);return Cl(()=>{E(I)},[E,I]),ae.jsx(oi.span,{...o,ref:D,style:{pointerEvents:"none"},children:XS(x.value)?ae.jsx(ae.Fragment,{children:m}):d})});TS.displayName=IS;var FR="SelectIcon",PS=re.forwardRef((e,n)=>{const{__scopeSelect:i,children:l,...h}=e;return ae.jsx(oi.span,{"aria-hidden":!0,...h,ref:n,children:l||""})});PS.displayName=FR;var IR="SelectPortal",LS=e=>ae.jsx(yw,{asChild:!0,...e});LS.displayName=IR;var sf="SelectContent",MS=re.forwardRef((e,n)=>{const i=Cd(sf,e.__scopeSelect),[l,h]=re.useState();if(Cl(()=>{h(new DocumentFragment)},[]),!i.open){const d=l;return d?_p.createPortal(ae.jsx(kS,{scope:e.__scopeSelect,children:ae.jsx(Ly.Slot,{scope:e.__scopeSelect,children:ae.jsx("div",{children:e.children})})}),d):null}return ae.jsx(US,{...e,ref:n})});MS.displayName=sf;var Fu=10,[kS,Ed]=Cp(sf),TR="SelectContentImpl",PR=TD("SelectContent.RemoveScroll"),US=re.forwardRef((e,n)=>{const{__scopeSelect:i,position:l="item-aligned",onCloseAutoFocus:h,onEscapeKeyDown:d,onPointerDownOutside:m,side:o,sideOffset:x,align:E,alignOffset:I,arrowPadding:D,collisionBoundary:O,collisionPadding:P,sticky:W,hideWhenDetached:z,avoidCollisions:H,...Z}=e,ie=Cd(sf,i),[ce,he]=re.useState(null),[Ie,Ve]=re.useState(null),Me=ds(n,rt=>he(rt)),[Pe,xe]=re.useState(null),[nt,pe]=re.useState(null),_e=My(i),[Ue,Fe]=re.useState(!1),pt=re.useRef(!1);re.useEffect(()=>{if(ce)return QD(ce)},[ce]),xD();const ht=re.useCallback(rt=>{const[vt,...St]=_e().map(ar=>ar.ref.current),[Lt]=St.slice(-1),Wt=document.activeElement;for(const ar of rt)if(ar===Wt||(ar?.scrollIntoView({block:"nearest"}),ar===vt&&Ie&&(Ie.scrollTop=0),ar===Lt&&Ie&&(Ie.scrollTop=Ie.scrollHeight),ar?.focus(),document.activeElement!==Wt))return},[_e,Ie]),Je=re.useCallback(()=>ht([Pe,ce]),[ht,Pe,ce]);re.useEffect(()=>{Ue&&Je()},[Ue,Je]);const{onOpenChange:ze,triggerPointerDownPosRef:je}=ie;re.useEffect(()=>{if(ce){let rt={x:0,y:0};const vt=Lt=>{rt={x:Math.abs(Math.round(Lt.pageX)-(je.current?.x??0)),y:Math.abs(Math.round(Lt.pageY)-(je.current?.y??0))}},St=Lt=>{rt.x<=10&&rt.y<=10?Lt.preventDefault():ce.contains(Lt.target)||ze(!1),document.removeEventListener("pointermove",vt),je.current=null};return je.current!==null&&(document.addEventListener("pointermove",vt),document.addEventListener("pointerup",St,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",vt),document.removeEventListener("pointerup",St,{capture:!0})}}},[ce,ze,je]),re.useEffect(()=>{const rt=()=>ze(!1);return window.addEventListener("blur",rt),window.addEventListener("resize",rt),()=>{window.removeEventListener("blur",rt),window.removeEventListener("resize",rt)}},[ze]);const[xt,Re]=YS(rt=>{const vt=_e().filter(Wt=>!Wt.disabled),St=vt.find(Wt=>Wt.ref.current===document.activeElement),Lt=JS(vt,rt,St);Lt&&setTimeout(()=>Lt.ref.current.focus())}),oe=re.useCallback((rt,vt,St)=>{const Lt=!pt.current&&!St;(ie.value!==void 0&&ie.value===vt||Lt)&&(xe(rt),Lt&&(pt.current=!0))},[ie.value]),Se=re.useCallback(()=>ce?.focus(),[ce]),Ne=re.useCallback((rt,vt,St)=>{const Lt=!pt.current&&!St;(ie.value!==void 0&&ie.value===vt||Lt)&&pe(rt)},[ie.value]),Ye=l==="popper"?S_:DS,lt=Ye===S_?{side:o,sideOffset:x,align:E,alignOffset:I,arrowPadding:D,collisionBoundary:O,collisionPadding:P,sticky:W,hideWhenDetached:z,avoidCollisions:H}:{};return ae.jsx(kS,{scope:i,content:ce,viewport:Ie,onViewportChange:Ve,itemRefCallback:oe,selectedItem:Pe,onItemLeave:Se,itemTextRefCallback:Ne,focusSelectedItem:Je,selectedItemText:nt,position:l,isPositioned:Ue,searchRef:xt,children:ae.jsx(CS,{as:PR,allowPinchZoom:!0,children:ae.jsx(pS,{asChild:!0,trapped:ie.open,onMountAutoFocus:rt=>{rt.preventDefault()},onUnmountAutoFocus:Un(h,rt=>{ie.trigger?.focus({preventScroll:!0}),rt.preventDefault()}),children:ae.jsx(py,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:d,onPointerDownOutside:m,onFocusOutside:rt=>rt.preventDefault(),onDismiss:()=>ie.onOpenChange(!1),children:ae.jsx(Ye,{role:"listbox",id:ie.contentId,"data-state":ie.open?"open":"closed",dir:ie.dir,onContextMenu:rt=>rt.preventDefault(),...Z,...lt,onPlaced:()=>Fe(!0),ref:Me,style:{display:"flex",flexDirection:"column",outline:"none",...Z.style},onKeyDown:Un(Z.onKeyDown,rt=>{const vt=rt.ctrlKey||rt.altKey||rt.metaKey;if(rt.key==="Tab"&&rt.preventDefault(),!vt&&rt.key.length===1&&Re(rt.key),["ArrowUp","ArrowDown","Home","End"].includes(rt.key)){let Lt=_e().filter(Wt=>!Wt.disabled).map(Wt=>Wt.ref.current);if(["ArrowUp","End"].includes(rt.key)&&(Lt=Lt.slice().reverse()),["ArrowUp","ArrowDown"].includes(rt.key)){const Wt=rt.target,ar=Lt.indexOf(Wt);Lt=Lt.slice(ar+1)}setTimeout(()=>ht(Lt)),rt.preventDefault()}})})})})})})});US.displayName=TR;var LR="SelectItemAlignedPosition",DS=re.forwardRef((e,n)=>{const{__scopeSelect:i,onPlaced:l,...h}=e,d=Cd(sf,i),m=Ed(sf,i),[o,x]=re.useState(null),[E,I]=re.useState(null),D=ds(n,Me=>I(Me)),O=My(i),P=re.useRef(!1),W=re.useRef(!0),{viewport:z,selectedItem:H,selectedItemText:Z,focusSelectedItem:ie}=m,ce=re.useCallback(()=>{if(d.trigger&&d.valueNode&&o&&E&&z&&H&&Z){const Me=d.trigger.getBoundingClientRect(),Pe=E.getBoundingClientRect(),xe=d.valueNode.getBoundingClientRect(),nt=Z.getBoundingClientRect();if(d.dir!=="rtl"){const Wt=nt.left-Pe.left,ar=xe.left-Wt,hr=Me.left-ar,Cr=Me.width+hr,He=Math.max(Cr,Pe.width),vr=window.innerWidth-Fu,Ur=I2(ar,[Fu,Math.max(Fu,vr-He)]);o.style.minWidth=Cr+"px",o.style.left=Ur+"px"}else{const Wt=Pe.right-nt.right,ar=window.innerWidth-xe.right-Wt,hr=window.innerWidth-Me.right-ar,Cr=Me.width+hr,He=Math.max(Cr,Pe.width),vr=window.innerWidth-Fu,Ur=I2(ar,[Fu,Math.max(Fu,vr-He)]);o.style.minWidth=Cr+"px",o.style.right=Ur+"px"}const pe=O(),_e=window.innerHeight-Fu*2,Ue=z.scrollHeight,Fe=window.getComputedStyle(E),pt=parseInt(Fe.borderTopWidth,10),ht=parseInt(Fe.paddingTop,10),Je=parseInt(Fe.borderBottomWidth,10),ze=parseInt(Fe.paddingBottom,10),je=pt+ht+Ue+ze+Je,xt=Math.min(H.offsetHeight*5,je),Re=window.getComputedStyle(z),oe=parseInt(Re.paddingTop,10),Se=parseInt(Re.paddingBottom,10),Ne=Me.top+Me.height/2-Fu,Ye=_e-Ne,lt=H.offsetHeight/2,rt=H.offsetTop+lt,vt=pt+ht+rt,St=je-vt;if(vt<=Ne){const Wt=pe.length>0&&H===pe[pe.length-1].ref.current;o.style.bottom="0px";const ar=E.clientHeight-z.offsetTop-z.offsetHeight,hr=Math.max(Ye,lt+(Wt?Se:0)+ar+Je),Cr=vt+hr;o.style.height=Cr+"px"}else{const Wt=pe.length>0&&H===pe[0].ref.current;o.style.top="0px";const hr=Math.max(Ne,pt+z.offsetTop+(Wt?oe:0)+lt)+St;o.style.height=hr+"px",z.scrollTop=vt-Ne+z.offsetTop}o.style.margin=`${Fu}px 0`,o.style.minHeight=xt+"px",o.style.maxHeight=_e+"px",l?.(),requestAnimationFrame(()=>P.current=!0)}},[O,d.trigger,d.valueNode,o,E,z,H,Z,d.dir,l]);Cl(()=>ce(),[ce]);const[he,Ie]=re.useState();Cl(()=>{E&&Ie(window.getComputedStyle(E).zIndex)},[E]);const Ve=re.useCallback(Me=>{Me&&W.current===!0&&(ce(),ie?.(),W.current=!1)},[ce,ie]);return ae.jsx(kR,{scope:i,contentWrapper:o,shouldExpandOnScrollRef:P,onScrollButtonChange:Ve,children:ae.jsx("div",{ref:x,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:he},children:ae.jsx(oi.div,{...h,ref:D,style:{boxSizing:"border-box",maxHeight:"100%",...h.style}})})})});DS.displayName=LR;var MR="SelectPopperPosition",S_=re.forwardRef((e,n)=>{const{__scopeSelect:i,align:l="start",collisionPadding:h=Fu,...d}=e,m=ky(i);return ae.jsx(yE,{...m,...d,ref:n,align:l,collisionPadding:h,style:{boxSizing:"border-box",...d.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});S_.displayName=MR;var[kR,Hw]=Cp(sf,{}),F_="SelectViewport",RS=re.forwardRef((e,n)=>{const{__scopeSelect:i,nonce:l,...h}=e,d=Ed(F_,i),m=Hw(F_,i),o=ds(n,d.onViewportChange),x=re.useRef(0);return ae.jsxs(ae.Fragment,{children:[ae.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:l}),ae.jsx(Ly.Slot,{scope:i,children:ae.jsx(oi.div,{"data-radix-select-viewport":"",role:"presentation",...h,ref:o,style:{position:"relative",flex:1,overflow:"hidden auto",...h.style},onScroll:Un(h.onScroll,E=>{const I=E.currentTarget,{contentWrapper:D,shouldExpandOnScrollRef:O}=m;if(O?.current&&D){const P=Math.abs(x.current-I.scrollTop);if(P>0){const W=window.innerHeight-Fu*2,z=parseFloat(D.style.minHeight),H=parseFloat(D.style.height),Z=Math.max(z,H);if(Z<W){const ie=Z+P,ce=Math.min(W,ie),he=ie-ce;D.style.height=ce+"px",D.style.bottom==="0px"&&(I.scrollTop=he>0?he:0,D.style.justifyContent="flex-end")}}}x.current=I.scrollTop})})})]})});RS.displayName=F_;var NS="SelectGroup",[UR,DR]=Cp(NS),RR=re.forwardRef((e,n)=>{const{__scopeSelect:i,...l}=e,h=vy();return ae.jsx(UR,{scope:i,id:h,children:ae.jsx(oi.div,{role:"group","aria-labelledby":h,...l,ref:n})})});RR.displayName=NS;var QS="SelectLabel",OS=re.forwardRef((e,n)=>{const{__scopeSelect:i,...l}=e,h=DR(QS,i);return ae.jsx(oi.div,{id:h.id,...l,ref:n})});OS.displayName=QS;var Y0="SelectItem",[NR,zS]=Cp(Y0),HS=re.forwardRef((e,n)=>{const{__scopeSelect:i,value:l,disabled:h=!1,textValue:d,...m}=e,o=Cd(Y0,i),x=Ed(Y0,i),E=o.value===l,[I,D]=re.useState(d??""),[O,P]=re.useState(!1),W=ds(n,ie=>x.itemRefCallback?.(ie,l,h)),z=vy(),H=re.useRef("touch"),Z=()=>{h||(o.onValueChange(l),o.onOpenChange(!1))};if(l==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return ae.jsx(NR,{scope:i,value:l,disabled:h,textId:z,isSelected:E,onItemTextChange:re.useCallback(ie=>{D(ce=>ce||(ie?.textContent??"").trim())},[]),children:ae.jsx(Ly.ItemSlot,{scope:i,value:l,disabled:h,textValue:I,children:ae.jsx(oi.div,{role:"option","aria-labelledby":z,"data-highlighted":O?"":void 0,"aria-selected":E&&O,"data-state":E?"checked":"unchecked","aria-disabled":h||void 0,"data-disabled":h?"":void 0,tabIndex:h?void 0:-1,...m,ref:W,onFocus:Un(m.onFocus,()=>P(!0)),onBlur:Un(m.onBlur,()=>P(!1)),onClick:Un(m.onClick,()=>{H.current!=="mouse"&&Z()}),onPointerUp:Un(m.onPointerUp,()=>{H.current==="mouse"&&Z()}),onPointerDown:Un(m.onPointerDown,ie=>{H.current=ie.pointerType}),onPointerMove:Un(m.onPointerMove,ie=>{H.current=ie.pointerType,h?x.onItemLeave?.():H.current==="mouse"&&ie.currentTarget.focus({preventScroll:!0})}),onPointerLeave:Un(m.onPointerLeave,ie=>{ie.currentTarget===document.activeElement&&x.onItemLeave?.()}),onKeyDown:Un(m.onKeyDown,ie=>{x.searchRef?.current!==""&&ie.key===" "||(bR.includes(ie.key)&&Z(),ie.key===" "&&ie.preventDefault())})})})})});HS.displayName=Y0;var pm="SelectItemText",jS=re.forwardRef((e,n)=>{const{__scopeSelect:i,className:l,style:h,...d}=e,m=Cd(pm,i),o=Ed(pm,i),x=zS(pm,i),E=SR(pm,i),[I,D]=re.useState(null),O=ds(n,Z=>D(Z),x.onItemTextChange,Z=>o.itemTextRefCallback?.(Z,x.value,x.disabled)),P=I?.textContent,W=re.useMemo(()=>ae.jsx("option",{value:x.value,disabled:x.disabled,children:P},x.value),[x.disabled,x.value,P]),{onNativeOptionAdd:z,onNativeOptionRemove:H}=E;return Cl(()=>(z(W),()=>H(W)),[z,H,W]),ae.jsxs(ae.Fragment,{children:[ae.jsx(oi.span,{id:x.textId,...d,ref:O}),x.isSelected&&m.valueNode&&!m.valueNodeHasChildren?_p.createPortal(d.children,m.valueNode):null]})});jS.displayName=pm;var VS="SelectItemIndicator",GS=re.forwardRef((e,n)=>{const{__scopeSelect:i,...l}=e;return zS(VS,i).isSelected?ae.jsx(oi.span,{"aria-hidden":!0,...l,ref:n}):null});GS.displayName=VS;var I_="SelectScrollUpButton",KS=re.forwardRef((e,n)=>{const i=Ed(I_,e.__scopeSelect),l=Hw(I_,e.__scopeSelect),[h,d]=re.useState(!1),m=ds(n,l.onScrollButtonChange);return Cl(()=>{if(i.viewport&&i.isPositioned){let o=function(){const E=x.scrollTop>0;d(E)};const x=i.viewport;return o(),x.addEventListener("scroll",o),()=>x.removeEventListener("scroll",o)}},[i.viewport,i.isPositioned]),h?ae.jsx($S,{...e,ref:m,onAutoScroll:()=>{const{viewport:o,selectedItem:x}=i;o&&x&&(o.scrollTop=o.scrollTop-x.offsetHeight)}}):null});KS.displayName=I_;var T_="SelectScrollDownButton",qS=re.forwardRef((e,n)=>{const i=Ed(T_,e.__scopeSelect),l=Hw(T_,e.__scopeSelect),[h,d]=re.useState(!1),m=ds(n,l.onScrollButtonChange);return Cl(()=>{if(i.viewport&&i.isPositioned){let o=function(){const E=x.scrollHeight-x.clientHeight,I=Math.ceil(x.scrollTop)<E;d(I)};const x=i.viewport;return o(),x.addEventListener("scroll",o),()=>x.removeEventListener("scroll",o)}},[i.viewport,i.isPositioned]),h?ae.jsx($S,{...e,ref:m,onAutoScroll:()=>{const{viewport:o,selectedItem:x}=i;o&&x&&(o.scrollTop=o.scrollTop+x.offsetHeight)}}):null});qS.displayName=T_;var $S=re.forwardRef((e,n)=>{const{__scopeSelect:i,onAutoScroll:l,...h}=e,d=Ed("SelectScrollButton",i),m=re.useRef(null),o=My(i),x=re.useCallback(()=>{m.current!==null&&(window.clearInterval(m.current),m.current=null)},[]);return re.useEffect(()=>()=>x(),[x]),Cl(()=>{o().find(I=>I.ref.current===document.activeElement)?.ref.current?.scrollIntoView({block:"nearest"})},[o]),ae.jsx(oi.div,{"aria-hidden":!0,...h,ref:n,style:{flexShrink:0,...h.style},onPointerDown:Un(h.onPointerDown,()=>{m.current===null&&(m.current=window.setInterval(l,50))}),onPointerMove:Un(h.onPointerMove,()=>{d.onItemLeave?.(),m.current===null&&(m.current=window.setInterval(l,50))}),onPointerLeave:Un(h.onPointerLeave,()=>{x()})})}),QR="SelectSeparator",WS=re.forwardRef((e,n)=>{const{__scopeSelect:i,...l}=e;return ae.jsx(oi.div,{"aria-hidden":!0,...l,ref:n})});WS.displayName=QR;var P_="SelectArrow",OR=re.forwardRef((e,n)=>{const{__scopeSelect:i,...l}=e,h=ky(i),d=Cd(P_,i),m=Ed(P_,i);return d.open&&m.position==="popper"?ae.jsx(vE,{...h,...l,ref:n}):null});OR.displayName=P_;var zR="SelectBubbleInput",ZS=re.forwardRef(({__scopeSelect:e,value:n,...i},l)=>{const h=re.useRef(null),d=ds(l,h),m=Ow(n);return re.useEffect(()=>{const o=h.current;if(!o)return;const x=window.HTMLSelectElement.prototype,I=Object.getOwnPropertyDescriptor(x,"value").set;if(m!==n&&I){const D=new Event("change",{bubbles:!0});I.call(o,n),o.dispatchEvent(D)}},[m,n]),ae.jsx(oi.select,{...i,style:{...f5,...i.style},ref:d,defaultValue:n})});ZS.displayName=zR;function XS(e){return e===""||e===void 0}function YS(e){const n=iu(e),i=re.useRef(""),l=re.useRef(0),h=re.useCallback(m=>{const o=i.current+m;n(o),(function x(E){i.current=E,window.clearTimeout(l.current),E!==""&&(l.current=window.setTimeout(()=>x(""),1e3))})(o)},[n]),d=re.useCallback(()=>{i.current="",window.clearTimeout(l.current)},[]);return re.useEffect(()=>()=>window.clearTimeout(l.current),[]),[i,h,d]}function JS(e,n,i){const h=n.length>1&&Array.from(n).every(E=>E===n[0])?n[0]:n,d=i?e.indexOf(i):-1;let m=HR(e,Math.max(d,0));h.length===1&&(m=m.filter(E=>E!==i));const x=m.find(E=>E.textValue.toLowerCase().startsWith(h.toLowerCase()));return x!==i?x:void 0}function HR(e,n){return e.map((i,l)=>e[(n+l)%e.length])}var jR=ES,eF=FS,VR=TS,GR=PS,KR=LS,tF=MS,qR=RS,rF=OS,nF=HS,$R=jS,WR=GS,iF=KS,sF=qS,oF=WS;const aF=jR,lF=VR,jw=re.forwardRef(({className:e,children:n,...i},l)=>ae.jsxs(eF,{ref:l,className:Li("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",e),...i,children:[n,ae.jsx(GR,{asChild:!0,children:ae.jsx(N5,{className:"h-4 w-4 opacity-50"})})]}));jw.displayName=eF.displayName;const cF=re.forwardRef(({className:e,...n},i)=>ae.jsx(iF,{ref:i,className:Li("flex cursor-default items-center justify-center py-1",e),...n,children:ae.jsx(X3,{className:"h-4 w-4"})}));cF.displayName=iF.displayName;const AF=re.forwardRef(({className:e,...n},i)=>ae.jsx(sF,{ref:i,className:Li("flex cursor-default items-center justify-center py-1",e),...n,children:ae.jsx(N5,{className:"h-4 w-4"})}));AF.displayName=sF.displayName;const Vw=re.forwardRef(({className:e,children:n,position:i="popper",...l},h)=>ae.jsx(KR,{children:ae.jsxs(tF,{ref:h,className:Li("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",i==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:i,...l,children:[ae.jsx(cF,{}),ae.jsx(qR,{className:Li("p-1",i==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:n}),ae.jsx(AF,{})]})}));Vw.displayName=tF.displayName;const ZR=re.forwardRef(({className:e,...n},i)=>ae.jsx(rF,{ref:i,className:Li("py-1.5 pl-8 pr-2 text-sm font-semibold",e),...n}));ZR.displayName=rF.displayName;const Gw=re.forwardRef(({className:e,children:n,...i},l)=>ae.jsxs(nF,{ref:l,className:Li("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...i,children:[ae.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:ae.jsx(WR,{children:ae.jsx(R5,{className:"h-4 w-4"})})}),ae.jsx($R,{children:n})]}));Gw.displayName=nF.displayName;const XR=re.forwardRef(({className:e,...n},i)=>ae.jsx(oF,{ref:i,className:Li("-mx-1 my-1 h-px bg-muted",e),...n}));XR.displayName=oF.displayName;var Uy="Checkbox",[YR]=Hh(Uy),[JR,Kw]=YR(Uy);function e6(e){const{__scopeCheckbox:n,checked:i,children:l,defaultChecked:h,disabled:d,form:m,name:o,onCheckedChange:x,required:E,value:I="on",internal_do_not_use_render:D}=e,[O,P]=mp({prop:i,defaultProp:h??!1,onChange:x,caller:Uy}),[W,z]=re.useState(null),[H,Z]=re.useState(null),ie=re.useRef(!1),ce=W?!!m||!!W.closest("form"):!0,he={checked:O,disabled:d,setChecked:P,control:W,setControl:z,name:o,form:m,value:I,hasConsumerStoppedPropagationRef:ie,required:E,defaultChecked:gd(h)?!1:h,isFormControl:ce,bubbleInput:H,setBubbleInput:Z};return ae.jsx(JR,{scope:n,...he,children:t6(D)?D(he):l})}var uF="CheckboxTrigger",hF=re.forwardRef(({__scopeCheckbox:e,onKeyDown:n,onClick:i,...l},h)=>{const{control:d,value:m,disabled:o,checked:x,required:E,setControl:I,setChecked:D,hasConsumerStoppedPropagationRef:O,isFormControl:P,bubbleInput:W}=Kw(uF,e),z=ds(h,I),H=re.useRef(x);return re.useEffect(()=>{const Z=d?.form;if(Z){const ie=()=>D(H.current);return Z.addEventListener("reset",ie),()=>Z.removeEventListener("reset",ie)}},[d,D]),ae.jsx(oi.button,{type:"button",role:"checkbox","aria-checked":gd(x)?"mixed":x,"aria-required":E,"data-state":gF(x),"data-disabled":o?"":void 0,disabled:o,value:m,...l,ref:z,onKeyDown:Un(n,Z=>{Z.key==="Enter"&&Z.preventDefault()}),onClick:Un(i,Z=>{D(ie=>gd(ie)?!0:!ie),W&&P&&(O.current=Z.isPropagationStopped(),O.current||Z.stopPropagation())})})});hF.displayName=uF;var qw=re.forwardRef((e,n)=>{const{__scopeCheckbox:i,name:l,checked:h,defaultChecked:d,required:m,disabled:o,value:x,onCheckedChange:E,form:I,...D}=e;return ae.jsx(e6,{__scopeCheckbox:i,checked:h,defaultChecked:d,disabled:o,required:m,onCheckedChange:E,name:l,form:I,value:x,internal_do_not_use_render:({isFormControl:O})=>ae.jsxs(ae.Fragment,{children:[ae.jsx(hF,{...D,ref:n,__scopeCheckbox:i}),O&&ae.jsx(mF,{__scopeCheckbox:i})]})})});qw.displayName=Uy;var dF="CheckboxIndicator",fF=re.forwardRef((e,n)=>{const{__scopeCheckbox:i,forceMount:l,...h}=e,d=Kw(dF,i);return ae.jsx(Km,{present:l||gd(d.checked)||d.checked===!0,children:ae.jsx(oi.span,{"data-state":gF(d.checked),"data-disabled":d.disabled?"":void 0,...h,ref:n,style:{pointerEvents:"none",...e.style}})})});fF.displayName=dF;var pF="CheckboxBubbleInput",mF=re.forwardRef(({__scopeCheckbox:e,...n},i)=>{const{control:l,hasConsumerStoppedPropagationRef:h,checked:d,defaultChecked:m,required:o,disabled:x,name:E,value:I,form:D,bubbleInput:O,setBubbleInput:P}=Kw(pF,e),W=ds(i,P),z=Ow(d),H=Tw(l);re.useEffect(()=>{const ie=O;if(!ie)return;const ce=window.HTMLInputElement.prototype,Ie=Object.getOwnPropertyDescriptor(ce,"checked").set,Ve=!h.current;if(z!==d&&Ie){const Me=new Event("click",{bubbles:Ve});ie.indeterminate=gd(d),Ie.call(ie,gd(d)?!1:d),ie.dispatchEvent(Me)}},[O,z,d,h]);const Z=re.useRef(gd(d)?!1:d);return ae.jsx(oi.input,{type:"checkbox","aria-hidden":!0,defaultChecked:m??Z.current,required:o,disabled:x,name:E,value:I,form:D,...n,tabIndex:-1,ref:W,style:{...n.style,...H,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});mF.displayName=pF;function t6(e){return typeof e=="function"}function gd(e){return e==="indeterminate"}function gF(e){return gd(e)?"indeterminate":e?"checked":"unchecked"}const L_=re.forwardRef(({className:e,...n},i)=>ae.jsx(qw,{ref:i,className:Li("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",e),...n,children:ae.jsx(fF,{className:Li("flex items-center justify-center text-current"),children:ae.jsx(R5,{className:"h-4 w-4"})})}));L_.displayName=qw.displayName;const Dy=re.forwardRef(({className:e,type:n,...i},l)=>ae.jsx("input",{type:n,className:Li("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),ref:l,...i}));Dy.displayName="Input";var k0={exports:{}};var r6=k0.exports,O2;function n6(){return O2||(O2=1,(function(e,n){(function(i,l){e.exports=l()})(r6,(function(){var i={},l={};function h(m,o,x){if(l[m]=x,m==="index"){var E="var sharedModule = {}; ("+l.shared+")(sharedModule); ("+l.worker+")(sharedModule);",I={};return l.shared(I),l.index(i,I),typeof window<"u"&&i.setWorkerUrl(window.URL.createObjectURL(new Blob([E],{type:"text/javascript"}))),i}}h("shared",["exports"],(function(m){function o(a,t,s,A){return new(s||(s=Promise))((function(p,v){function _(U){try{F(A.next(U))}catch(Q){v(Q)}}function B(U){try{F(A.throw(U))}catch(Q){v(Q)}}function F(U){var Q;U.done?p(U.value):(Q=U.value,Q instanceof s?Q:new s((function(K){K(Q)}))).then(_,B)}F((A=A.apply(a,t||[])).next())}))}function x(a,t){this.x=a,this.y=t}function E(a){return a&&a.__esModule&&Object.prototype.hasOwnProperty.call(a,"default")?a.default:a}var I,D;typeof SuppressedError=="function"&&SuppressedError,x.prototype={clone(){return new x(this.x,this.y)},add(a){return this.clone()._add(a)},sub(a){return this.clone()._sub(a)},multByPoint(a){return this.clone()._multByPoint(a)},divByPoint(a){return this.clone()._divByPoint(a)},mult(a){return this.clone()._mult(a)},div(a){return this.clone()._div(a)},rotate(a){return this.clone()._rotate(a)},rotateAround(a,t){return this.clone()._rotateAround(a,t)},matMult(a){return this.clone()._matMult(a)},unit(){return this.clone()._unit()},perp(){return this.clone()._perp()},round(){return this.clone()._round()},mag(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals(a){return this.x===a.x&&this.y===a.y},dist(a){return Math.sqrt(this.distSqr(a))},distSqr(a){const t=a.x-this.x,s=a.y-this.y;return t*t+s*s},angle(){return Math.atan2(this.y,this.x)},angleTo(a){return Math.atan2(this.y-a.y,this.x-a.x)},angleWith(a){return this.angleWithSep(a.x,a.y)},angleWithSep(a,t){return Math.atan2(this.x*t-this.y*a,this.x*a+this.y*t)},_matMult(a){const t=a[2]*this.x+a[3]*this.y;return this.x=a[0]*this.x+a[1]*this.y,this.y=t,this},_add(a){return this.x+=a.x,this.y+=a.y,this},_sub(a){return this.x-=a.x,this.y-=a.y,this},_mult(a){return this.x*=a,this.y*=a,this},_div(a){return this.x/=a,this.y/=a,this},_multByPoint(a){return this.x*=a.x,this.y*=a.y,this},_divByPoint(a){return this.x/=a.x,this.y/=a.y,this},_unit(){return this._div(this.mag()),this},_perp(){const a=this.y;return this.y=this.x,this.x=-a,this},_rotate(a){const t=Math.cos(a),s=Math.sin(a),A=s*this.x+t*this.y;return this.x=t*this.x-s*this.y,this.y=A,this},_rotateAround(a,t){const s=Math.cos(a),A=Math.sin(a),p=t.y+A*(this.x-t.x)+s*(this.y-t.y);return this.x=t.x+s*(this.x-t.x)-A*(this.y-t.y),this.y=p,this},_round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},constructor:x},x.convert=function(a){if(a instanceof x)return a;if(Array.isArray(a))return new x(+a[0],+a[1]);if(a.x!==void 0&&a.y!==void 0)return new x(+a.x,+a.y);throw new Error("Expected [x, y] or {x, y} point format")};var O=(function(){if(D)return I;function a(t,s,A,p){this.cx=3*t,this.bx=3*(A-t)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*s,this.by=3*(p-s)-this.cy,this.ay=1-this.cy-this.by,this.p1x=t,this.p1y=s,this.p2x=A,this.p2y=p}return D=1,I=a,a.prototype={sampleCurveX:function(t){return((this.ax*t+this.bx)*t+this.cx)*t},sampleCurveY:function(t){return((this.ay*t+this.by)*t+this.cy)*t},sampleCurveDerivativeX:function(t){return(3*this.ax*t+2*this.bx)*t+this.cx},solveCurveX:function(t,s){if(s===void 0&&(s=1e-6),t<0)return 0;if(t>1)return 1;for(var A=t,p=0;p<8;p++){var v=this.sampleCurveX(A)-t;if(Math.abs(v)<s)return A;var _=this.sampleCurveDerivativeX(A);if(Math.abs(_)<1e-6)break;A-=v/_}var B=0,F=1;for(A=t,p=0;p<20&&(v=this.sampleCurveX(A),!(Math.abs(v-t)<s));p++)t>v?B=A:F=A,A=.5*(F-B)+B;return A},solve:function(t,s){return this.sampleCurveY(this.solveCurveX(t,s))}},I})(),P=E(O);let W,z;function H(){return W==null&&(W=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")&&typeof createImageBitmap=="function"),W}function Z(){if(z==null&&(z=!1,H())){const t=new OffscreenCanvas(5,5).getContext("2d",{willReadFrequently:!0});if(t){for(let A=0;A<25;A++){const p=4*A;t.fillStyle=`rgb(${p},${p+1},${p+2})`,t.fillRect(A%5,Math.floor(A/5),1,1)}const s=t.getImageData(0,0,5,5).data;for(let A=0;A<100;A++)if(A%4!=3&&s[A]!==A){z=!0;break}}}return z||!1}var ie=1e-6,ce=typeof Float32Array<"u"?Float32Array:Array;function he(){var a=new ce(9);return ce!=Float32Array&&(a[1]=0,a[2]=0,a[3]=0,a[5]=0,a[6]=0,a[7]=0),a[0]=1,a[4]=1,a[8]=1,a}function Ie(a){return a[0]=1,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=1,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=1,a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,a}function Ve(){var a=new ce(3);return ce!=Float32Array&&(a[0]=0,a[1]=0,a[2]=0),a}function Me(a){var t=a[0],s=a[1],A=a[2];return Math.sqrt(t*t+s*s+A*A)}function Pe(a,t,s){var A=new ce(3);return A[0]=a,A[1]=t,A[2]=s,A}function xe(a,t,s){return a[0]=t[0]+s[0],a[1]=t[1]+s[1],a[2]=t[2]+s[2],a}function nt(a,t,s){return a[0]=t[0]*s,a[1]=t[1]*s,a[2]=t[2]*s,a}function pe(a,t,s){var A=t[0],p=t[1],v=t[2],_=s[0],B=s[1],F=s[2];return a[0]=p*F-v*B,a[1]=v*_-A*F,a[2]=A*B-p*_,a}var _e,Ue=Me;function Fe(a,t,s){var A=t[0],p=t[1],v=t[2],_=t[3];return a[0]=s[0]*A+s[4]*p+s[8]*v+s[12]*_,a[1]=s[1]*A+s[5]*p+s[9]*v+s[13]*_,a[2]=s[2]*A+s[6]*p+s[10]*v+s[14]*_,a[3]=s[3]*A+s[7]*p+s[11]*v+s[15]*_,a}function pt(){var a=new ce(4);return ce!=Float32Array&&(a[0]=0,a[1]=0,a[2]=0),a[3]=1,a}function ht(a,t,s,A){var p=arguments.length>4&&arguments[4]!==void 0?arguments[4]:"zyx",v=Math.PI/360;t*=v,A*=v,s*=v;var _=Math.sin(t),B=Math.cos(t),F=Math.sin(s),U=Math.cos(s),Q=Math.sin(A),K=Math.cos(A);switch(p){case"xyz":a[0]=_*U*K+B*F*Q,a[1]=B*F*K-_*U*Q,a[2]=B*U*Q+_*F*K,a[3]=B*U*K-_*F*Q;break;case"xzy":a[0]=_*U*K-B*F*Q,a[1]=B*F*K-_*U*Q,a[2]=B*U*Q+_*F*K,a[3]=B*U*K+_*F*Q;break;case"yxz":a[0]=_*U*K+B*F*Q,a[1]=B*F*K-_*U*Q,a[2]=B*U*Q-_*F*K,a[3]=B*U*K+_*F*Q;break;case"yzx":a[0]=_*U*K+B*F*Q,a[1]=B*F*K+_*U*Q,a[2]=B*U*Q-_*F*K,a[3]=B*U*K-_*F*Q;break;case"zxy":a[0]=_*U*K-B*F*Q,a[1]=B*F*K+_*U*Q,a[2]=B*U*Q+_*F*K,a[3]=B*U*K-_*F*Q;break;case"zyx":a[0]=_*U*K-B*F*Q,a[1]=B*F*K+_*U*Q,a[2]=B*U*Q-_*F*K,a[3]=B*U*K+_*F*Q;break;default:throw new Error("Unknown angle order "+p)}return a}function Je(){var a=new ce(2);return ce!=Float32Array&&(a[0]=0,a[1]=0),a}function ze(a,t){var s=new ce(2);return s[0]=a,s[1]=t,s}Ve(),_e=new ce(4),ce!=Float32Array&&(_e[0]=0,_e[1]=0,_e[2]=0,_e[3]=0),Ve(),Pe(1,0,0),Pe(0,1,0),pt(),pt(),he(),Je();const je=8192;function xt(a,t,s){return t*(je/(a.tileSize*Math.pow(2,s-a.tileID.overscaledZ)))}function Re(a,t){return(a%t+t)%t}function oe(a,t,s){return a*(1-s)+t*s}function Se(a){if(a<=0)return 0;if(a>=1)return 1;const t=a*a,s=t*a;return 4*(a<.5?s:3*(a-t)+s-.75)}function Ne(a,t,s,A){const p=new P(a,t,s,A);return v=>p.solve(v)}const Ye=Ne(.25,.1,.25,1);function lt(a,t,s){return Math.min(s,Math.max(t,a))}function rt(a,t,s){const A=s-t,p=((a-t)%A+A)%A+t;return p===t?s:p}function vt(a,...t){for(const s of t)for(const A in s)a[A]=s[A];return a}let St=1;function Lt(a,t,s){const A={};for(const p in a)A[p]=t.call(this,a[p],p,a);return A}function Wt(a,t,s){const A={};for(const p in a)t.call(this,a[p],p,a)&&(A[p]=a[p]);return A}function ar(a){return Array.isArray(a)?a.map(ar):typeof a=="object"&&a?Lt(a,ar):a}const hr={};function Cr(a){hr[a]||(typeof console<"u"&&console.warn(a),hr[a]=!0)}function He(a,t,s){return(s.y-a.y)*(t.x-a.x)>(t.y-a.y)*(s.x-a.x)}function vr(a){return typeof WorkerGlobalScope<"u"&&a!==void 0&&a instanceof WorkerGlobalScope}let Ur=null;function $r(a){return typeof ImageBitmap<"u"&&a instanceof ImageBitmap}const lr="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";function Wr(a,t,s,A,p){return o(this,void 0,void 0,(function*(){if(typeof VideoFrame>"u")throw new Error("VideoFrame not supported");const v=new VideoFrame(a,{timestamp:0});try{const _=v?.format;if(!_||!_.startsWith("BGR")&&!_.startsWith("RGB"))throw new Error(`Unrecognized format ${_}`);const B=_.startsWith("BGR"),F=new Uint8ClampedArray(A*p*4);if(yield v.copyTo(F,(function(U,Q,K,X,J){const se=4*Math.max(-Q,0),le=(Math.max(0,K)-K)*X*4+se,ue=4*X,Be=Math.max(0,Q),tt=Math.max(0,K);return{rect:{x:Be,y:tt,width:Math.min(U.width,Q+X)-Be,height:Math.min(U.height,K+J)-tt},layout:[{offset:le,stride:ue}]}})(a,t,s,A,p)),B)for(let U=0;U<F.length;U+=4){const Q=F[U];F[U]=F[U+2],F[U+2]=Q}return F}finally{v.close()}}))}let Sr,Or;function Rr(a,t,s,A){return a.addEventListener(t,s,A),{unsubscribe:()=>{a.removeEventListener(t,s,A)}}}function On(a){return a*Math.PI/180}function hn(a){return a/Math.PI*180}const ft={touchstart:!0,touchmove:!0,touchmoveWindow:!0,touchend:!0,touchcancel:!0},de={dblclick:!0,click:!0,mouseover:!0,mouseout:!0,mousedown:!0,mousemove:!0,mousemoveWindow:!0,mouseup:!0,mouseupWindow:!0,contextmenu:!0,wheel:!0},fe="AbortError";class ye extends Error{constructor(t=fe){super(t instanceof Error?t.message:t),this.name=fe,t instanceof Error&&t.stack&&(this.stack=t.stack)}}function qe(a){return a.name===fe}const We={MAX_PARALLEL_IMAGE_REQUESTS:16,MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:8,MAX_TILE_CACHE_ZOOM_LEVELS:5,REGISTERED_PROTOCOLS:{},WORKER_URL:""};function Ct(a){return We.REGISTERED_PROTOCOLS[a.substring(0,a.indexOf("://"))]}const yt="global-dispatcher";class at extends Error{constructor(t,s,A,p){super(`AJAXError: ${s} (${t}): ${A}`),this.status=t,this.statusText=s,this.url=A,this.body=p}}const bt=()=>vr(self)?self.worker&&self.worker.referrer:(window.location.protocol==="blob:"?window.parent:window).location.href,Ht=function(a,t){if(/:\/\//.test(a.url)&&!/^https?:|^file:/.test(a.url)){const A=Ct(a.url);if(A)return A(a,t);if(vr(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:a,targetMapId:yt},t)}if(!(/^file:/.test(s=a.url)||/^file:/.test(bt())&&!/^\w+:/.test(s))){if(fetch&&Request&&AbortController&&Object.prototype.hasOwnProperty.call(Request.prototype,"signal"))return(function(A,p){return o(this,void 0,void 0,(function*(){const v=new Request(A.url,{method:A.method||"GET",body:A.body,credentials:A.credentials,headers:A.headers,cache:A.cache,referrer:bt(),signal:p.signal});let _,B;A.type!=="json"||v.headers.has("Accept")||v.headers.set("Accept","application/json");try{_=yield fetch(v)}catch(U){throw qe(U)?U:new at(0,U.message,A.url,new Blob)}if(!_.ok){const U=yield _.blob();throw new at(_.status,_.statusText,A.url,U)}B=A.type==="arrayBuffer"||A.type==="image"?_.arrayBuffer():A.type==="json"?_.json():_.text();const F=yield B;return p.signal.throwIfAborted(),{data:F,cacheControl:_.headers.get("Cache-Control"),expires:_.headers.get("Expires")}}))})(a,t);if(vr(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:a,mustQueue:!0,targetMapId:yt},t)}var s;return(function(A,p){return new Promise(((v,_)=>{var B;const F=new XMLHttpRequest;F.open(A.method||"GET",A.url,!0),A.type!=="arrayBuffer"&&A.type!=="image"||(F.responseType="arraybuffer");for(const U in A.headers)F.setRequestHeader(U,A.headers[U]);A.type==="json"&&(F.responseType="text",!((B=A.headers)===null||B===void 0)&&B.Accept||F.setRequestHeader("Accept","application/json")),F.withCredentials=A.credentials==="include",F.onerror=()=>{_(new Error(F.statusText))},F.onload=()=>{if(!p.signal.aborted)if((F.status>=200&&F.status<300||F.status===0)&&F.response!==null){let U=F.response;if(A.type==="json")try{U=JSON.parse(F.response)}catch(Q){return void _(Q)}v({data:U,cacheControl:F.getResponseHeader("Cache-Control"),expires:F.getResponseHeader("Expires")})}else{const U=new Blob([F.response],{type:F.getResponseHeader("Content-Type")});_(new at(F.status,F.statusText,A.url,U))}},p.signal.addEventListener("abort",(()=>{F.abort(),_(new ye(p.signal.reason))})),F.send(A.body)}))})(a,t)};function Ft(a){if(!a||a.indexOf("://")<=0||a.indexOf("data:image/")===0||a.indexOf("blob:")===0)return!0;const t=new URL(a),s=window.location;return t.protocol===s.protocol&&t.host===s.host}function cr(a,t,s){s[a]&&s[a].indexOf(t)!==-1||(s[a]=s[a]||[],s[a].push(t))}function Jt(a,t,s){if(s&&s[a]){const A=s[a].indexOf(t);A!==-1&&s[a].splice(A,1)}}class fr{constructor(t,s={}){vt(this,s),this.type=t}}class rn extends fr{constructor(t,s={}){super("error",vt({error:t},s))}}class Tr{on(t,s){return this._listeners=this._listeners||{},cr(t,s,this._listeners),{unsubscribe:()=>{this.off(t,s)}}}off(t,s){return Jt(t,s,this._listeners),Jt(t,s,this._oneTimeListeners),this}once(t,s){return s?(this._oneTimeListeners=this._oneTimeListeners||{},cr(t,s,this._oneTimeListeners),this):new Promise((A=>this.once(t,A)))}fire(t,s){typeof t=="string"&&(t=new fr(t,s||{}));const A=t.type;if(this.listens(A)){t.target=this;const p=this._listeners&&this._listeners[A]?this._listeners[A].slice():[];for(const B of p)B.call(this,t);const v=this._oneTimeListeners&&this._oneTimeListeners[A]?this._oneTimeListeners[A].slice():[];for(const B of v)Jt(A,B,this._oneTimeListeners),B.call(this,t);const _=this._eventedParent;_&&(vt(t,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),_.fire(t))}else t instanceof rn&&console.error(t.error);return this}listens(t){return this._listeners&&this._listeners[t]&&this._listeners[t].length>0||this._oneTimeListeners&&this._oneTimeListeners[t]&&this._oneTimeListeners[t].length>0||this._eventedParent&&this._eventedParent.listens(t)}setEventedParent(t,s){return this._eventedParent=t,this._eventedParentData=s,this}}var mt={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},centerAltitude:{type:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},roll:{type:"number",default:0,units:"degrees"},state:{type:"state",default:{}},light:{type:"light"},sky:{type:"sky"},projection:{type:"projection"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"sprite"},glyphs:{type:"string"},"font-faces":{type:"array",value:"fontFaces"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},encoding:{type:"enum",values:{mvt:{},mlt:{}},default:"mvt"},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{},custom:{}},default:"mapbox"},redFactor:{type:"number",default:1},blueFactor:{type:"number",default:1},greenFactor:{type:"number",default:1},baseShift:{type:"number",default:0},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{required:!0,type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},"color-relief":{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_color-relief","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-variable-anchor-offset":{type:"variableAnchorOffsetCollection",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_color-relief":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},sky:{"sky-color":{type:"color","property-type":"data-constant",default:"#88C6FC",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-ground-blend":{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-fog-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"sky-horizon-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"atmosphere-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1}},projection:{type:{type:"projectionDefinition",default:"mercator","property-type":"data-constant",transition:!1,expression:{interpolated:!0,parameters:["zoom"]}}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_color-relief","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"numberArray",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-altitude":{type:"numberArray",default:45,minimum:0,maximum:90,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"colorArray",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"colorArray",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-method":{type:"enum",values:{standard:{},basic:{},combined:{},igor:{},multidirectional:{}},default:"standard",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},"paint_color-relief":{"color-relief-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"color-relief-color":{type:"color",transition:!1,expression:{interpolated:!0,parameters:["elevation"]},"property-type":"color-ramp"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};const tn=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function Nr(a,t){const s={};for(const A in a)A!=="ref"&&(s[A]=a[A]);return tn.forEach((A=>{A in t&&(s[A]=t[A])})),s}function mr(a,t){if(Array.isArray(a)){if(!Array.isArray(t)||a.length!==t.length)return!1;for(let s=0;s<a.length;s++)if(!mr(a[s],t[s]))return!1;return!0}if(typeof a=="object"&&a!==null&&t!==null){if(typeof t!="object"||Object.keys(a).length!==Object.keys(t).length)return!1;for(const s in a)if(!mr(a[s],t[s]))return!1;return!0}return a===t}function Kr(a,t){a.push(t)}function Dn(a,t,s){Kr(s,{command:"addSource",args:[a,t[a]]})}function wr(a,t,s){Kr(t,{command:"removeSource",args:[a]}),s[a]=!0}function Tn(a,t,s,A){wr(a,s,A),Dn(a,t,s)}function Bn(a,t,s){let A;for(A in a[s])if(Object.prototype.hasOwnProperty.call(a[s],A)&&A!=="data"&&!mr(a[s][A],t[s][A]))return!1;for(A in t[s])if(Object.prototype.hasOwnProperty.call(t[s],A)&&A!=="data"&&!mr(a[s][A],t[s][A]))return!1;return!0}function xn(a,t,s,A,p,v){a=a||{},t=t||{};for(const _ in a)Object.prototype.hasOwnProperty.call(a,_)&&(mr(a[_],t[_])||s.push({command:v,args:[A,_,t[_],p]}));for(const _ in t)Object.prototype.hasOwnProperty.call(t,_)&&!Object.prototype.hasOwnProperty.call(a,_)&&(mr(a[_],t[_])||s.push({command:v,args:[A,_,t[_],p]}))}function Di(a){return a.id}function ai(a,t){return a[t.id]=t,a}class Yt{constructor(t,s,A,p){this.message=(t?`${t}: `:"")+A,p&&(this.identifier=p),s!=null&&s.__line__&&(this.line=s.__line__)}}function Zn(a,...t){for(const s of t)for(const A in s)a[A]=s[A];return a}class $i extends Error{constructor(t,s){super(s),this.message=s,this.key=t}}class sl{constructor(t,s=[]){this.parent=t,this.bindings={};for(const[A,p]of s)this.bindings[A]=p}concat(t){return new sl(this,t)}get(t){if(this.bindings[t])return this.bindings[t];if(this.parent)return this.parent.get(t);throw new Error(`${t} not found in scope.`)}has(t){return!!this.bindings[t]||!!this.parent&&this.parent.has(t)}}const ns={kind:"null"},pr={kind:"number"},nn={kind:"string"},un={kind:"boolean"},Ri={kind:"color"},El={kind:"projectionDefinition"},ks={kind:"object"},dn={kind:"value"},ol={kind:"collator"},al={kind:"formatted"},ec={kind:"padding"},Ec={kind:"colorArray"},fi={kind:"numberArray"},tc={kind:"resolvedImage"},Sl={kind:"variableAnchorOffsetCollection"};function Ci(a,t){return{kind:"array",itemType:a,N:t}}function jn(a){if(a.kind==="array"){const t=jn(a.itemType);return typeof a.N=="number"?`array<${t}, ${a.N}>`:a.itemType.kind==="value"?"array":`array<${t}>`}return a.kind}const rA=[ns,pr,nn,un,Ri,El,al,ks,Ci(dn),ec,fi,Ec,tc,Sl];function ll(a,t){if(t.kind==="error")return null;if(a.kind==="array"){if(t.kind==="array"&&(t.N===0&&t.itemType.kind==="value"||!ll(a.itemType,t.itemType))&&(typeof a.N!="number"||a.N===t.N))return null}else{if(a.kind===t.kind)return null;if(a.kind==="value"){for(const s of rA)if(!ll(s,t))return null}}return`Expected ${jn(a)} but found ${jn(t)} instead.`}function cl(a,t){return t.some((s=>s.kind===a.kind))}function Us(a,t){return t.some((s=>s==="null"?a===null:s==="array"?Array.isArray(a):s==="object"?a&&!Array.isArray(a)&&typeof a=="object":s===typeof a))}function Ro(a,t){return a.kind==="array"&&t.kind==="array"?a.itemType.kind===t.itemType.kind&&typeof a.N=="number":a.kind===t.kind}const fs=.96422,Ba=.82521,IA=4/29,Mn=6/29,Sc=3*Mn*Mn,No=Mn*Mn*Mn,Qo=Math.PI/180,Fc=180/Math.PI;function la(a){return(a%=360)<0&&(a+=360),a}function ys([a,t,s,A]){let p,v;const _=nA((.2225045*(a=Oo(a))+.7168786*(t=Oo(t))+.0606169*(s=Oo(s)))/1);a===t&&t===s?p=v=_:(p=nA((.4360747*a+.3850649*t+.1430804*s)/fs),v=nA((.0139322*a+.0971045*t+.7141733*s)/Ba));const B=116*_-16;return[B<0?0:B,500*(p-_),200*(_-v),A]}function Oo(a){return a<=.04045?a/12.92:Math.pow((a+.055)/1.055,2.4)}function nA(a){return a>No?Math.pow(a,1/3):a/Sc+IA}function iA([a,t,s,A]){let p=(a+16)/116,v=isNaN(t)?p:p+t/500,_=isNaN(s)?p:p-s/200;return p=1*Ca(p),v=fs*Ca(v),_=Ba*Ca(_),[rc(3.1338561*v-1.6168667*p-.4906146*_),rc(-.9787684*v+1.9161415*p+.033454*_),rc(.0719453*v-.2289914*p+1.4052427*_),A]}function rc(a){return(a=a<=.00304?12.92*a:1.055*Math.pow(a,1/2.4)-.055)<0?0:a>1?1:a}function Ca(a){return a>Mn?a*a*a:Sc*(a-IA)}const TA=Object.hasOwn||function(a,t){return Object.prototype.hasOwnProperty.call(a,t)};function Kn(a,t){return TA(a,t)?a[t]:void 0}function Fl(a){return parseInt(a.padEnd(2,a),16)/255}function nc(a,t){return Il(t?a/100:a,0,1)}function Il(a,t,s){return Math.min(Math.max(t,a),s)}function PA(a){return!a.some(Number.isNaN)}const Ic={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};function ca(a,t,s){return a+s*(t-a)}function Al(a,t,s){return a.map(((A,p)=>ca(A,t[p],s)))}class an{constructor(t,s,A,p=1,v=!0){this.r=t,this.g=s,this.b=A,this.a=p,v||(this.r*=p,this.g*=p,this.b*=p,p||this.overwriteGetter("rgb",[t,s,A,p]))}static parse(t){if(t instanceof an)return t;if(typeof t!="string")return;const s=(function(A){if((A=A.toLowerCase().trim())==="transparent")return[0,0,0,0];const p=Kn(Ic,A);if(p){const[_,B,F]=p;return[_/255,B/255,F/255,1]}if(A.startsWith("#")&&/^#(?:[0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/.test(A)){const _=A.length<6?1:2;let B=1;return[Fl(A.slice(B,B+=_)),Fl(A.slice(B,B+=_)),Fl(A.slice(B,B+=_)),Fl(A.slice(B,B+_)||"ff")]}if(A.startsWith("rgb")){const _=A.match(/^rgba?\(\s*([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(_){const[B,F,U,Q,K,X,J,se,le,ue,Be,tt]=_,Ee=[Q||" ",J||" ",ue].join("");if(Ee==="  "||Ee==="  /"||Ee===",,"||Ee===",,,"){const Le=[U,X,le].join(""),st=Le==="%%%"?100:Le===""?255:0;if(st){const ut=[Il(+F/st,0,1),Il(+K/st,0,1),Il(+se/st,0,1),Be?nc(+Be,tt):1];if(PA(ut))return ut}}return}}const v=A.match(/^hsla?\(\s*([\de.+-]+)(?:deg)?(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(v){const[_,B,F,U,Q,K,X,J,se]=v,le=[F||" ",Q||" ",X].join("");if(le==="  "||le==="  /"||le===",,"||le===",,,"){const ue=[+B,Il(+U,0,100),Il(+K,0,100),J?nc(+J,se):1];if(PA(ue))return(function([Be,tt,Ee,Le]){function st(ut){const Mt=(ut+Be/30)%12,Xt=tt*Math.min(Ee,1-Ee);return Ee-Xt*Math.max(-1,Math.min(Mt-3,9-Mt,1))}return Be=la(Be),tt/=100,Ee/=100,[st(0),st(8),st(4),Le]})(ue)}}})(t);return s?new an(...s,!1):void 0}get rgb(){const{r:t,g:s,b:A,a:p}=this,v=p||1/0;return this.overwriteGetter("rgb",[t/v,s/v,A/v,p])}get hcl(){return this.overwriteGetter("hcl",(function(t){const[s,A,p,v]=ys(t),_=Math.sqrt(A*A+p*p);return[Math.round(1e4*_)?la(Math.atan2(p,A)*Fc):NaN,_,s,v]})(this.rgb))}get lab(){return this.overwriteGetter("lab",ys(this.rgb))}overwriteGetter(t,s){return Object.defineProperty(this,t,{value:s}),s}toString(){const[t,s,A,p]=this.rgb;return`rgba(${[t,s,A].map((v=>Math.round(255*v))).join(",")},${p})`}static interpolate(t,s,A,p="rgb"){switch(p){case"rgb":{const[v,_,B,F]=Al(t.rgb,s.rgb,A);return new an(v,_,B,F,!1)}case"hcl":{const[v,_,B,F]=t.hcl,[U,Q,K,X]=s.hcl;let J,se;if(isNaN(v)||isNaN(U))isNaN(v)?isNaN(U)?J=NaN:(J=U,B!==1&&B!==0||(se=Q)):(J=v,K!==1&&K!==0||(se=_));else{let Ee=U-v;U>v&&Ee>180?Ee-=360:U<v&&v-U>180&&(Ee+=360),J=v+A*Ee}const[le,ue,Be,tt]=(function([Ee,Le,st,ut]){return Ee=isNaN(Ee)?0:Ee*Qo,iA([st,Math.cos(Ee)*Le,Math.sin(Ee)*Le,ut])})([J,se??ca(_,Q,A),ca(B,K,A),ca(F,X,A)]);return new an(le,ue,Be,tt,!1)}case"lab":{const[v,_,B,F]=iA(Al(t.lab,s.lab,A));return new an(v,_,B,F,!1)}}}}an.black=new an(0,0,0,1),an.white=new an(1,1,1,1),an.transparent=new an(0,0,0,0),an.red=new an(1,0,0,1);class Ea{constructor(t,s,A){this.sensitivity=t?s?"variant":"case":s?"accent":"base",this.locale=A,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(t,s){return this.collator.compare(t,s)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}const zo=["bottom","center","top"];class Ho{constructor(t,s,A,p,v,_){this.text=t,this.image=s,this.scale=A,this.fontStack=p,this.textColor=v,this.verticalAlign=_}}class vs{constructor(t){this.sections=t}static fromString(t){return new vs([new Ho(t,null,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some((t=>t.text.length!==0||t.image&&t.image.name.length!==0))}static factory(t){return t instanceof vs?t:vs.fromString(t)}toString(){return this.sections.length===0?"":this.sections.map((t=>t.text)).join("")}}class qr{constructor(t){this.values=t.slice()}static parse(t){if(t instanceof qr)return t;if(typeof t=="number")return new qr([t,t,t,t]);if(Array.isArray(t)&&!(t.length<1||t.length>4)){for(const s of t)if(typeof s!="number")return;switch(t.length){case 1:t=[t[0],t[0],t[0],t[0]];break;case 2:t=[t[0],t[1],t[0],t[1]];break;case 3:t=[t[0],t[1],t[2],t[1]]}return new qr(t)}}toString(){return JSON.stringify(this.values)}static interpolate(t,s,A){return new qr(Al(t.values,s.values,A))}}class Jn{constructor(t){this.values=t.slice()}static parse(t){if(t instanceof Jn)return t;if(typeof t=="number")return new Jn([t]);if(Array.isArray(t)){for(const s of t)if(typeof s!="number")return;return new Jn(t)}}toString(){return JSON.stringify(this.values)}static interpolate(t,s,A){return new Jn(Al(t.values,s.values,A))}}class cn{constructor(t){this.values=t.slice()}static parse(t){if(t instanceof cn)return t;if(typeof t=="string"){const A=an.parse(t);return A?new cn([A]):void 0}if(!Array.isArray(t))return;const s=[];for(const A of t){if(typeof A!="string")return;const p=an.parse(A);if(!p)return;s.push(p)}return new cn(s)}toString(){return JSON.stringify(this.values)}static interpolate(t,s,A,p="rgb"){const v=[];if(t.values.length!=s.values.length)throw new Error(`colorArray: Arrays have mismatched length (${t.values.length} vs. ${s.values.length}), cannot interpolate.`);for(let _=0;_<t.values.length;_++)v.push(an.interpolate(t.values[_],s.values[_],A,p));return new cn(v)}}class ii extends Error{constructor(t){super(t),this.name="RuntimeError"}toJSON(){return this.message}}const _s=new Set(["center","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"]);class Wi{constructor(t){this.values=t.slice()}static parse(t){if(t instanceof Wi)return t;if(Array.isArray(t)&&!(t.length<1)&&t.length%2==0){for(let s=0;s<t.length;s+=2){const A=t[s],p=t[s+1];if(typeof A!="string"||!_s.has(A)||!Array.isArray(p)||p.length!==2||typeof p[0]!="number"||typeof p[1]!="number")return}return new Wi(t)}}toString(){return JSON.stringify(this.values)}static interpolate(t,s,A){const p=t.values,v=s.values;if(p.length!==v.length)throw new ii(`Cannot interpolate values of different length. from: ${t.toString()}, to: ${s.toString()}`);const _=[];for(let B=0;B<p.length;B+=2){if(p[B]!==v[B])throw new ii(`Cannot interpolate values containing mismatched anchors. from[${B}]: ${p[B]}, to[${B}]: ${v[B]}`);_.push(p[B]);const[F,U]=p[B+1],[Q,K]=v[B+1];_.push([ca(F,Q,A),ca(U,K,A)])}return new Wi(_)}}class uo{constructor(t){this.name=t.name,this.available=t.available}toString(){return this.name}static fromString(t){return t?new uo({name:t,available:!1}):null}}class ws{constructor(t,s,A){this.from=t,this.to=s,this.transition=A}static interpolate(t,s,A){return new ws(t,s,A)}static parse(t){return t instanceof ws?t:Array.isArray(t)&&t.length===3&&typeof t[0]=="string"&&typeof t[1]=="string"&&typeof t[2]=="number"?new ws(t[0],t[1],t[2]):typeof t=="object"&&typeof t.from=="string"&&typeof t.to=="string"&&typeof t.transition=="number"?new ws(t.from,t.to,t.transition):typeof t=="string"?new ws(t,t,1):void 0}}function Sa(a,t,s,A){return typeof a=="number"&&a>=0&&a<=255&&typeof t=="number"&&t>=0&&t<=255&&typeof s=="number"&&s>=0&&s<=255?A===void 0||typeof A=="number"&&A>=0&&A<=1?null:`Invalid rgba value [${[a,t,s,A].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof A=="number"?[a,t,s,A]:[a,t,s]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function Fa(a){if(a===null||typeof a=="string"||typeof a=="boolean"||typeof a=="number"||a instanceof ws||a instanceof an||a instanceof Ea||a instanceof vs||a instanceof qr||a instanceof Jn||a instanceof cn||a instanceof Wi||a instanceof uo)return!0;if(Array.isArray(a)){for(const t of a)if(!Fa(t))return!1;return!0}if(typeof a=="object"){for(const t in a)if(!Fa(a[t]))return!1;return!0}return!1}function ti(a){if(a===null)return ns;if(typeof a=="string")return nn;if(typeof a=="boolean")return un;if(typeof a=="number")return pr;if(a instanceof an)return Ri;if(a instanceof ws)return El;if(a instanceof Ea)return ol;if(a instanceof vs)return al;if(a instanceof qr)return ec;if(a instanceof Jn)return fi;if(a instanceof cn)return Ec;if(a instanceof Wi)return Sl;if(a instanceof uo)return tc;if(Array.isArray(a)){const t=a.length;let s;for(const A of a){const p=ti(A);if(s){if(s===p)continue;s=dn;break}s=p}return Ci(s||dn,t)}return ks}function Aa(a){const t=typeof a;return a===null?"":t==="string"||t==="number"||t==="boolean"?String(a):a instanceof an||a instanceof ws||a instanceof vs||a instanceof qr||a instanceof Jn||a instanceof cn||a instanceof Wi||a instanceof uo?a.toString():JSON.stringify(a)}class Zi{constructor(t,s){this.type=t,this.value=s}static parse(t,s){if(t.length!==2)return s.error(`'literal' expression requires exactly one argument, but found ${t.length-1} instead.`);if(!Fa(t[1]))return s.error("invalid value");const A=t[1];let p=ti(A);const v=s.expectedType;return p.kind!=="array"||p.N!==0||!v||v.kind!=="array"||typeof v.N=="number"&&v.N!==0||(p=v),new Zi(p,A)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}}const ic={string:nn,number:pr,boolean:un,object:ks};class qs{constructor(t,s){this.type=t,this.args=s}static parse(t,s){if(t.length<2)return s.error("Expected at least one argument.");let A,p=1;const v=t[0];if(v==="array"){let B,F;if(t.length>2){const U=t[1];if(typeof U!="string"||!(U in ic)||U==="object")return s.error('The item type argument of "array" must be one of string, number, boolean',1);B=ic[U],p++}else B=dn;if(t.length>3){if(t[2]!==null&&(typeof t[2]!="number"||t[2]<0||t[2]!==Math.floor(t[2])))return s.error('The length argument to "array" must be a positive integer literal',2);F=t[2],p++}A=Ci(B,F)}else{if(!ic[v])throw new Error(`Types doesn't contain name = ${v}`);A=ic[v]}const _=[];for(;p<t.length;p++){const B=s.parse(t[p],p,dn);if(!B)return null;_.push(B)}return new qs(A,_)}evaluate(t){for(let s=0;s<this.args.length;s++){const A=this.args[s].evaluate(t);if(!ll(this.type,ti(A)))return A;if(s===this.args.length-1)throw new ii(`Expected value to be of type ${jn(this.type)}, but found ${jn(ti(A))} instead.`)}throw new Error}eachChild(t){this.args.forEach(t)}outputDefined(){return this.args.every((t=>t.outputDefined()))}}const ul={"to-boolean":un,"to-color":Ri,"to-number":pr,"to-string":nn};class jo{constructor(t,s){this.type=t,this.args=s}static parse(t,s){if(t.length<2)return s.error("Expected at least one argument.");const A=t[0];if(!ul[A])throw new Error(`Can't parse ${A} as it is not part of the known types`);if((A==="to-boolean"||A==="to-string")&&t.length!==2)return s.error("Expected one argument.");const p=ul[A],v=[];for(let _=1;_<t.length;_++){const B=s.parse(t[_],_,dn);if(!B)return null;v.push(B)}return new jo(p,v)}evaluate(t){switch(this.type.kind){case"boolean":return!!this.args[0].evaluate(t);case"color":{let s,A;for(const p of this.args){if(s=p.evaluate(t),A=null,s instanceof an)return s;if(typeof s=="string"){const v=t.parseColor(s);if(v)return v}else if(Array.isArray(s)&&(A=s.length<3||s.length>4?`Invalid rgba value ${JSON.stringify(s)}: expected an array containing either three or four numeric values.`:Sa(s[0],s[1],s[2],s[3]),!A))return new an(s[0]/255,s[1]/255,s[2]/255,s[3])}throw new ii(A||`Could not parse color from value '${typeof s=="string"?s:JSON.stringify(s)}'`)}case"padding":{let s;for(const A of this.args){s=A.evaluate(t);const p=qr.parse(s);if(p)return p}throw new ii(`Could not parse padding from value '${typeof s=="string"?s:JSON.stringify(s)}'`)}case"numberArray":{let s;for(const A of this.args){s=A.evaluate(t);const p=Jn.parse(s);if(p)return p}throw new ii(`Could not parse numberArray from value '${typeof s=="string"?s:JSON.stringify(s)}'`)}case"colorArray":{let s;for(const A of this.args){s=A.evaluate(t);const p=cn.parse(s);if(p)return p}throw new ii(`Could not parse colorArray from value '${typeof s=="string"?s:JSON.stringify(s)}'`)}case"variableAnchorOffsetCollection":{let s;for(const A of this.args){s=A.evaluate(t);const p=Wi.parse(s);if(p)return p}throw new ii(`Could not parse variableAnchorOffsetCollection from value '${typeof s=="string"?s:JSON.stringify(s)}'`)}case"number":{let s=null;for(const A of this.args){if(s=A.evaluate(t),s===null)return 0;const p=Number(s);if(!isNaN(p))return p}throw new ii(`Could not convert ${JSON.stringify(s)} to number.`)}case"formatted":return vs.fromString(Aa(this.args[0].evaluate(t)));case"resolvedImage":return uo.fromString(Aa(this.args[0].evaluate(t)));case"projectionDefinition":return this.args[0].evaluate(t);default:return Aa(this.args[0].evaluate(t))}}eachChild(t){this.args.forEach(t)}outputDefined(){return this.args.every((t=>t.outputDefined()))}}const ua=["Unknown","Point","LineString","Polygon"];class sc{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache=new Map,this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?ua[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(t){let s=this._parseColorCache.get(t);return s||(s=an.parse(t),this._parseColorCache.set(t,s)),s}}class ha{constructor(t,s,A=[],p,v=new sl,_=[]){this.registry=t,this.path=A,this.key=A.map((B=>`[${B}]`)).join(""),this.scope=v,this.errors=_,this.expectedType=p,this._isConstant=s}parse(t,s,A,p,v={}){return s?this.concat(s,A,p)._parse(t,v):this._parse(t,v)}_parse(t,s){function A(p,v,_){return _==="assert"?new qs(v,[p]):_==="coerce"?new jo(v,[p]):p}if(t!==null&&typeof t!="string"&&typeof t!="boolean"&&typeof t!="number"||(t=["literal",t]),Array.isArray(t)){if(t.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const p=t[0];if(typeof p!="string")return this.error(`Expression name must be a string, but found ${typeof p} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const v=this.registry[p];if(v){let _=v.parse(t,this);if(!_)return null;if(this.expectedType){const B=this.expectedType,F=_.type;if(B.kind!=="string"&&B.kind!=="number"&&B.kind!=="boolean"&&B.kind!=="object"&&B.kind!=="array"||F.kind!=="value"){if(B.kind==="projectionDefinition"&&["string","array"].includes(F.kind)||["color","formatted","resolvedImage"].includes(B.kind)&&["value","string"].includes(F.kind)||["padding","numberArray"].includes(B.kind)&&["value","number","array"].includes(F.kind)||B.kind==="colorArray"&&["value","string","array"].includes(F.kind)||B.kind==="variableAnchorOffsetCollection"&&["value","array"].includes(F.kind))_=A(_,B,s.typeAnnotation||"coerce");else if(this.checkSubtype(B,F))return null}else _=A(_,B,s.typeAnnotation||"assert")}if(!(_ instanceof Zi)&&_.type.kind!=="resolvedImage"&&this._isConstant(_)){const B=new sc;try{_=new Zi(_.type,_.evaluate(B))}catch(F){return this.error(F.message),null}}return _}return this.error(`Unknown expression "${p}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(t===void 0?"'undefined' value invalid. Use null instead.":typeof t=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof t} instead.`)}concat(t,s,A){const p=typeof t=="number"?this.path.concat(t):this.path,v=A?this.scope.concat(A):this.scope;return new ha(this.registry,this._isConstant,p,s||null,v,this.errors)}error(t,...s){const A=`${this.key}${s.map((p=>`[${p}]`)).join("")}`;this.errors.push(new $i(A,t))}checkSubtype(t,s){const A=ll(t,s);return A&&this.error(A),A}}class Nn{constructor(t,s){this.type=s.type,this.bindings=[].concat(t),this.result=s}evaluate(t){return this.result.evaluate(t)}eachChild(t){for(const s of this.bindings)t(s[1]);t(this.result)}static parse(t,s){if(t.length<4)return s.error(`Expected at least 3 arguments, but found ${t.length-1} instead.`);const A=[];for(let v=1;v<t.length-1;v+=2){const _=t[v];if(typeof _!="string")return s.error(`Expected string, but found ${typeof _} instead.`,v);if(/[^a-zA-Z0-9_]/.test(_))return s.error("Variable names must contain only alphanumeric characters or '_'.",v);const B=s.parse(t[v+1],v+1);if(!B)return null;A.push([_,B])}const p=s.parse(t[t.length-1],t.length-1,s.expectedType,A);return p?new Nn(A,p):null}outputDefined(){return this.result.outputDefined()}}class Vo{constructor(t,s){this.type=s.type,this.name=t,this.boundExpression=s}static parse(t,s){if(t.length!==2||typeof t[1]!="string")return s.error("'var' expression requires exactly one string literal argument.");const A=t[1];return s.scope.has(A)?new Vo(A,s.scope.get(A)):s.error(`Unknown variable "${A}". Make sure "${A}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(t){return this.boundExpression.evaluate(t)}eachChild(){}outputDefined(){return!1}}class En{constructor(t,s,A){this.type=t,this.index=s,this.input=A}static parse(t,s){if(t.length!==3)return s.error(`Expected 2 arguments, but found ${t.length-1} instead.`);const A=s.parse(t[1],1,pr),p=s.parse(t[2],2,Ci(s.expectedType||dn));return A&&p?new En(p.type.itemType,A,p):null}evaluate(t){const s=this.index.evaluate(t),A=this.input.evaluate(t);if(s<0)throw new ii(`Array index out of bounds: ${s} < 0.`);if(s>=A.length)throw new ii(`Array index out of bounds: ${s} > ${A.length-1}.`);if(s!==Math.floor(s))throw new ii(`Array index must be an integer, but found ${s} instead.`);return A[s]}eachChild(t){t(this.index),t(this.input)}outputDefined(){return!1}}class mn{constructor(t,s){this.type=un,this.needle=t,this.haystack=s}static parse(t,s){if(t.length!==3)return s.error(`Expected 2 arguments, but found ${t.length-1} instead.`);const A=s.parse(t[1],1,dn),p=s.parse(t[2],2,dn);return A&&p?cl(A.type,[un,nn,pr,ns,dn])?new mn(A,p):s.error(`Expected first argument to be of type boolean, string, number or null, but found ${jn(A.type)} instead`):null}evaluate(t){const s=this.needle.evaluate(t),A=this.haystack.evaluate(t);if(!A)return!1;if(!Us(s,["boolean","string","number","null"]))throw new ii(`Expected first argument to be of type boolean, string, number or null, but found ${jn(ti(s))} instead.`);if(!Us(A,["string","array"]))throw new ii(`Expected second argument to be of type array or string, but found ${jn(ti(A))} instead.`);return A.indexOf(s)>=0}eachChild(t){t(this.needle),t(this.haystack)}outputDefined(){return!0}}class Ia{constructor(t,s,A){this.type=pr,this.needle=t,this.haystack=s,this.fromIndex=A}static parse(t,s){if(t.length<=2||t.length>=5)return s.error(`Expected 2 or 3 arguments, but found ${t.length-1} instead.`);const A=s.parse(t[1],1,dn),p=s.parse(t[2],2,dn);if(!A||!p)return null;if(!cl(A.type,[un,nn,pr,ns,dn]))return s.error(`Expected first argument to be of type boolean, string, number or null, but found ${jn(A.type)} instead`);if(t.length===4){const v=s.parse(t[3],3,pr);return v?new Ia(A,p,v):null}return new Ia(A,p)}evaluate(t){const s=this.needle.evaluate(t),A=this.haystack.evaluate(t);if(!Us(s,["boolean","string","number","null"]))throw new ii(`Expected first argument to be of type boolean, string, number or null, but found ${jn(ti(s))} instead.`);let p;if(this.fromIndex&&(p=this.fromIndex.evaluate(t)),Us(A,["string"])){const v=A.indexOf(s,p);return v===-1?-1:[...A.slice(0,v)].length}if(Us(A,["array"]))return A.indexOf(s,p);throw new ii(`Expected second argument to be of type array or string, but found ${jn(ti(A))} instead.`)}eachChild(t){t(this.needle),t(this.haystack),this.fromIndex&&t(this.fromIndex)}outputDefined(){return!1}}class bn{constructor(t,s,A,p,v,_){this.inputType=t,this.type=s,this.input=A,this.cases=p,this.outputs=v,this.otherwise=_}static parse(t,s){if(t.length<5)return s.error(`Expected at least 4 arguments, but found only ${t.length-1}.`);if(t.length%2!=1)return s.error("Expected an even number of arguments.");let A,p;s.expectedType&&s.expectedType.kind!=="value"&&(p=s.expectedType);const v={},_=[];for(let U=2;U<t.length-1;U+=2){let Q=t[U];const K=t[U+1];Array.isArray(Q)||(Q=[Q]);const X=s.concat(U);if(Q.length===0)return X.error("Expected at least one branch label.");for(const se of Q){if(typeof se!="number"&&typeof se!="string")return X.error("Branch labels must be numbers or strings.");if(typeof se=="number"&&Math.abs(se)>Number.MAX_SAFE_INTEGER)return X.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof se=="number"&&Math.floor(se)!==se)return X.error("Numeric branch labels must be integer values.");if(A){if(X.checkSubtype(A,ti(se)))return null}else A=ti(se);if(v[String(se)]!==void 0)return X.error("Branch labels must be unique.");v[String(se)]=_.length}const J=s.parse(K,U,p);if(!J)return null;p=p||J.type,_.push(J)}const B=s.parse(t[1],1,dn);if(!B)return null;const F=s.parse(t[t.length-1],t.length-1,p);return F?B.type.kind!=="value"&&s.concat(1).checkSubtype(A,B.type)?null:new bn(A,p,B,v,_,F):null}evaluate(t){const s=this.input.evaluate(t);return(ti(s)===this.inputType&&this.outputs[this.cases[s]]||this.otherwise).evaluate(t)}eachChild(t){t(this.input),this.outputs.forEach(t),t(this.otherwise)}outputDefined(){return this.outputs.every((t=>t.outputDefined()))&&this.otherwise.outputDefined()}}class Go{constructor(t,s,A){this.type=t,this.branches=s,this.otherwise=A}static parse(t,s){if(t.length<4)return s.error(`Expected at least 3 arguments, but found only ${t.length-1}.`);if(t.length%2!=0)return s.error("Expected an odd number of arguments.");let A;s.expectedType&&s.expectedType.kind!=="value"&&(A=s.expectedType);const p=[];for(let _=1;_<t.length-1;_+=2){const B=s.parse(t[_],_,un);if(!B)return null;const F=s.parse(t[_+1],_+1,A);if(!F)return null;p.push([B,F]),A=A||F.type}const v=s.parse(t[t.length-1],t.length-1,A);if(!v)return null;if(!A)throw new Error("Can't infer output type");return new Go(A,p,v)}evaluate(t){for(const[s,A]of this.branches)if(s.evaluate(t))return A.evaluate(t);return this.otherwise.evaluate(t)}eachChild(t){for(const[s,A]of this.branches)t(s),t(A);t(this.otherwise)}outputDefined(){return this.branches.every((([t,s])=>s.outputDefined()))&&this.otherwise.outputDefined()}}class Ei{constructor(t,s,A,p){this.type=t,this.input=s,this.beginIndex=A,this.endIndex=p}static parse(t,s){if(t.length<=2||t.length>=5)return s.error(`Expected 2 or 3 arguments, but found ${t.length-1} instead.`);const A=s.parse(t[1],1,dn),p=s.parse(t[2],2,pr);if(!A||!p)return null;if(!cl(A.type,[Ci(dn),nn,dn]))return s.error(`Expected first argument to be of type array or string, but found ${jn(A.type)} instead`);if(t.length===4){const v=s.parse(t[3],3,pr);return v?new Ei(A.type,A,p,v):null}return new Ei(A.type,A,p)}evaluate(t){const s=this.input.evaluate(t),A=this.beginIndex.evaluate(t);let p;if(this.endIndex&&(p=this.endIndex.evaluate(t)),Us(s,["string"]))return[...s].slice(A,p).join("");if(Us(s,["array"]))return s.slice(A,p);throw new ii(`Expected first argument to be of type array or string, but found ${jn(ti(s))} instead.`)}eachChild(t){t(this.input),t(this.beginIndex),this.endIndex&&t(this.endIndex)}outputDefined(){return!1}}function ao(a,t){const s=a.length-1;let A,p,v=0,_=s,B=0;for(;v<=_;)if(B=Math.floor((v+_)/2),A=a[B],p=a[B+1],A<=t){if(B===s||t<p)return B;v=B+1}else{if(!(A>t))throw new ii("Input is not a number.");_=B-1}return 0}class da{constructor(t,s,A){this.type=t,this.input=s,this.labels=[],this.outputs=[];for(const[p,v]of A)this.labels.push(p),this.outputs.push(v)}static parse(t,s){if(t.length-1<4)return s.error(`Expected at least 4 arguments, but found only ${t.length-1}.`);if((t.length-1)%2!=0)return s.error("Expected an even number of arguments.");const A=s.parse(t[1],1,pr);if(!A)return null;const p=[];let v=null;s.expectedType&&s.expectedType.kind!=="value"&&(v=s.expectedType);for(let _=1;_<t.length;_+=2){const B=_===1?-1/0:t[_],F=t[_+1],U=_,Q=_+1;if(typeof B!="number")return s.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',U);if(p.length&&p[p.length-1][0]>=B)return s.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',U);const K=s.parse(F,Q,v);if(!K)return null;v=v||K.type,p.push([B,K])}return new da(v,A,p)}evaluate(t){const s=this.labels,A=this.outputs;if(s.length===1)return A[0].evaluate(t);const p=this.input.evaluate(t);if(p<=s[0])return A[0].evaluate(t);const v=s.length;return p>=s[v-1]?A[v-1].evaluate(t):A[ao(s,p)].evaluate(t)}eachChild(t){t(this.input);for(const s of this.outputs)t(s)}outputDefined(){return this.outputs.every((t=>t.outputDefined()))}}function V(a){return a&&a.__esModule&&Object.prototype.hasOwnProperty.call(a,"default")?a.default:a}var ge,et,gt=(function(){if(et)return ge;function a(t,s,A,p){this.cx=3*t,this.bx=3*(A-t)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*s,this.by=3*(p-s)-this.cy,this.ay=1-this.cy-this.by,this.p1x=t,this.p1y=s,this.p2x=A,this.p2y=p}return et=1,ge=a,a.prototype={sampleCurveX:function(t){return((this.ax*t+this.bx)*t+this.cx)*t},sampleCurveY:function(t){return((this.ay*t+this.by)*t+this.cy)*t},sampleCurveDerivativeX:function(t){return(3*this.ax*t+2*this.bx)*t+this.cx},solveCurveX:function(t,s){if(s===void 0&&(s=1e-6),t<0)return 0;if(t>1)return 1;for(var A=t,p=0;p<8;p++){var v=this.sampleCurveX(A)-t;if(Math.abs(v)<s)return A;var _=this.sampleCurveDerivativeX(A);if(Math.abs(_)<1e-6)break;A-=v/_}var B=0,F=1;for(A=t,p=0;p<20&&(v=this.sampleCurveX(A),!(Math.abs(v-t)<s));p++)t>v?B=A:F=A,A=.5*(F-B)+B;return A},solve:function(t,s){return this.sampleCurveY(this.solveCurveX(t,s))}},ge})(),It=V(gt);class Gt{constructor(t,s,A,p,v){this.type=t,this.operator=s,this.interpolation=A,this.input=p,this.labels=[],this.outputs=[];for(const[_,B]of v)this.labels.push(_),this.outputs.push(B)}static interpolationFactor(t,s,A,p){let v=0;if(t.name==="exponential")v=sr(s,t.base,A,p);else if(t.name==="linear")v=sr(s,1,A,p);else if(t.name==="cubic-bezier"){const _=t.controlPoints;v=new It(_[0],_[1],_[2],_[3]).solve(sr(s,1,A,p))}return v}static parse(t,s){let[A,p,v,..._]=t;if(!Array.isArray(p)||p.length===0)return s.error("Expected an interpolation type expression.",1);if(p[0]==="linear")p={name:"linear"};else if(p[0]==="exponential"){const U=p[1];if(typeof U!="number")return s.error("Exponential interpolation requires a numeric base.",1,1);p={name:"exponential",base:U}}else{if(p[0]!=="cubic-bezier")return s.error(`Unknown interpolation type ${String(p[0])}`,1,0);{const U=p.slice(1);if(U.length!==4||U.some((Q=>typeof Q!="number"||Q<0||Q>1)))return s.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);p={name:"cubic-bezier",controlPoints:U}}}if(t.length-1<4)return s.error(`Expected at least 4 arguments, but found only ${t.length-1}.`);if((t.length-1)%2!=0)return s.error("Expected an even number of arguments.");if(v=s.parse(v,2,pr),!v)return null;const B=[];let F=null;A!=="interpolate-hcl"&&A!=="interpolate-lab"||s.expectedType==Ec?s.expectedType&&s.expectedType.kind!=="value"&&(F=s.expectedType):F=Ri;for(let U=0;U<_.length;U+=2){const Q=_[U],K=_[U+1],X=U+3,J=U+4;if(typeof Q!="number")return s.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',X);if(B.length&&B[B.length-1][0]>=Q)return s.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',X);const se=s.parse(K,J,F);if(!se)return null;F=F||se.type,B.push([Q,se])}return Ro(F,pr)||Ro(F,El)||Ro(F,Ri)||Ro(F,ec)||Ro(F,fi)||Ro(F,Ec)||Ro(F,Sl)||Ro(F,Ci(pr))?new Gt(F,A,p,v,B):s.error(`Type ${jn(F)} is not interpolatable.`)}evaluate(t){const s=this.labels,A=this.outputs;if(s.length===1)return A[0].evaluate(t);const p=this.input.evaluate(t);if(p<=s[0])return A[0].evaluate(t);const v=s.length;if(p>=s[v-1])return A[v-1].evaluate(t);const _=ao(s,p),B=Gt.interpolationFactor(this.interpolation,p,s[_],s[_+1]),F=A[_].evaluate(t),U=A[_+1].evaluate(t);switch(this.operator){case"interpolate":switch(this.type.kind){case"number":return ca(F,U,B);case"color":return an.interpolate(F,U,B);case"padding":return qr.interpolate(F,U,B);case"colorArray":return cn.interpolate(F,U,B);case"numberArray":return Jn.interpolate(F,U,B);case"variableAnchorOffsetCollection":return Wi.interpolate(F,U,B);case"array":return Al(F,U,B);case"projectionDefinition":return ws.interpolate(F,U,B)}case"interpolate-hcl":switch(this.type.kind){case"color":return an.interpolate(F,U,B,"hcl");case"colorArray":return cn.interpolate(F,U,B,"hcl")}case"interpolate-lab":switch(this.type.kind){case"color":return an.interpolate(F,U,B,"lab");case"colorArray":return cn.interpolate(F,U,B,"lab")}}}eachChild(t){t(this.input);for(const s of this.outputs)t(s)}outputDefined(){return this.outputs.every((t=>t.outputDefined()))}}function sr(a,t,s,A){const p=A-s,v=a-s;return p===0?0:t===1?v/p:(Math.pow(t,v)-1)/(Math.pow(t,p)-1)}const br={color:an.interpolate,number:ca,padding:qr.interpolate,numberArray:Jn.interpolate,colorArray:cn.interpolate,variableAnchorOffsetCollection:Wi.interpolate,array:Al};class Vr{constructor(t,s){this.type=t,this.args=s}static parse(t,s){if(t.length<2)return s.error("Expected at least one argument.");let A=null;const p=s.expectedType;p&&p.kind!=="value"&&(A=p);const v=[];for(const B of t.slice(1)){const F=s.parse(B,1+v.length,A,void 0,{typeAnnotation:"omit"});if(!F)return null;A=A||F.type,v.push(F)}if(!A)throw new Error("No output type");const _=p&&v.some((B=>ll(p,B.type)));return new Vr(_?dn:A,v)}evaluate(t){let s,A=null,p=0;for(const v of this.args)if(p++,A=v.evaluate(t),A&&A instanceof uo&&!A.available&&(s||(s=A.name),A=null,p===this.args.length&&(A=s)),A!==null)break;return A}eachChild(t){this.args.forEach(t)}outputDefined(){return this.args.every((t=>t.outputDefined()))}}function gn(a,t){return a==="=="||a==="!="?t.kind==="boolean"||t.kind==="string"||t.kind==="number"||t.kind==="null"||t.kind==="value":t.kind==="string"||t.kind==="number"||t.kind==="value"}function yn(a,t,s,A){return A.compare(t,s)===0}function An(a,t,s){const A=a!=="=="&&a!=="!=";return class yF{constructor(v,_,B){this.type=un,this.lhs=v,this.rhs=_,this.collator=B,this.hasUntypedArgument=v.type.kind==="value"||_.type.kind==="value"}static parse(v,_){if(v.length!==3&&v.length!==4)return _.error("Expected two or three arguments.");const B=v[0];let F=_.parse(v[1],1,dn);if(!F)return null;if(!gn(B,F.type))return _.concat(1).error(`"${B}" comparisons are not supported for type '${jn(F.type)}'.`);let U=_.parse(v[2],2,dn);if(!U)return null;if(!gn(B,U.type))return _.concat(2).error(`"${B}" comparisons are not supported for type '${jn(U.type)}'.`);if(F.type.kind!==U.type.kind&&F.type.kind!=="value"&&U.type.kind!=="value")return _.error(`Cannot compare types '${jn(F.type)}' and '${jn(U.type)}'.`);A&&(F.type.kind==="value"&&U.type.kind!=="value"?F=new qs(U.type,[F]):F.type.kind!=="value"&&U.type.kind==="value"&&(U=new qs(F.type,[U])));let Q=null;if(v.length===4){if(F.type.kind!=="string"&&U.type.kind!=="string"&&F.type.kind!=="value"&&U.type.kind!=="value")return _.error("Cannot use collator to compare non-string types.");if(Q=_.parse(v[3],3,ol),!Q)return null}return new yF(F,U,Q)}evaluate(v){const _=this.lhs.evaluate(v),B=this.rhs.evaluate(v);if(A&&this.hasUntypedArgument){const F=ti(_),U=ti(B);if(F.kind!==U.kind||F.kind!=="string"&&F.kind!=="number")throw new ii(`Expected arguments for "${a}" to be (string, string) or (number, number), but found (${F.kind}, ${U.kind}) instead.`)}if(this.collator&&!A&&this.hasUntypedArgument){const F=ti(_),U=ti(B);if(F.kind!=="string"||U.kind!=="string")return t(v,_,B)}return this.collator?s(v,_,B,this.collator.evaluate(v)):t(v,_,B)}eachChild(v){v(this.lhs),v(this.rhs),this.collator&&v(this.collator)}outputDefined(){return!0}}}const ji=An("==",(function(a,t,s){return t===s}),yn),is=An("!=",(function(a,t,s){return t!==s}),(function(a,t,s,A){return!yn(0,t,s,A)})),Si=An("<",(function(a,t,s){return t<s}),(function(a,t,s,A){return A.compare(t,s)<0})),Ds=An(">",(function(a,t,s){return t>s}),(function(a,t,s,A){return A.compare(t,s)>0})),Mi=An("<=",(function(a,t,s){return t<=s}),(function(a,t,s,A){return A.compare(t,s)<=0})),xs=An(">=",(function(a,t,s){return t>=s}),(function(a,t,s,A){return A.compare(t,s)>=0}));class Ko{constructor(t,s,A){this.type=ol,this.locale=A,this.caseSensitive=t,this.diacriticSensitive=s}static parse(t,s){if(t.length!==2)return s.error("Expected one argument.");const A=t[1];if(typeof A!="object"||Array.isArray(A))return s.error("Collator options argument must be an object.");const p=s.parse(A["case-sensitive"]!==void 0&&A["case-sensitive"],1,un);if(!p)return null;const v=s.parse(A["diacritic-sensitive"]!==void 0&&A["diacritic-sensitive"],1,un);if(!v)return null;let _=null;return A.locale&&(_=s.parse(A.locale,1,nn),!_)?null:new Ko(p,v,_)}evaluate(t){return new Ea(this.caseSensitive.evaluate(t),this.diacriticSensitive.evaluate(t),this.locale?this.locale.evaluate(t):null)}eachChild(t){t(this.caseSensitive),t(this.diacriticSensitive),this.locale&&t(this.locale)}outputDefined(){return!1}}class fa{constructor(t,s,A,p,v){this.type=nn,this.number=t,this.locale=s,this.currency=A,this.minFractionDigits=p,this.maxFractionDigits=v}static parse(t,s){if(t.length!==3)return s.error("Expected two arguments.");const A=s.parse(t[1],1,pr);if(!A)return null;const p=t[2];if(typeof p!="object"||Array.isArray(p))return s.error("NumberFormat options argument must be an object.");let v=null;if(p.locale&&(v=s.parse(p.locale,1,nn),!v))return null;let _=null;if(p.currency&&(_=s.parse(p.currency,1,nn),!_))return null;let B=null;if(p["min-fraction-digits"]&&(B=s.parse(p["min-fraction-digits"],1,pr),!B))return null;let F=null;return p["max-fraction-digits"]&&(F=s.parse(p["max-fraction-digits"],1,pr),!F)?null:new fa(A,v,_,B,F)}evaluate(t){return new Intl.NumberFormat(this.locale?this.locale.evaluate(t):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(t):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(t):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(t):void 0}).format(this.number.evaluate(t))}eachChild(t){t(this.number),this.locale&&t(this.locale),this.currency&&t(this.currency),this.minFractionDigits&&t(this.minFractionDigits),this.maxFractionDigits&&t(this.maxFractionDigits)}outputDefined(){return!1}}class pa{constructor(t){this.type=al,this.sections=t}static parse(t,s){if(t.length<2)return s.error("Expected at least one argument.");const A=t[1];if(!Array.isArray(A)&&typeof A=="object")return s.error("First argument must be an image or text section.");const p=[];let v=!1;for(let _=1;_<=t.length-1;++_){const B=t[_];if(v&&typeof B=="object"&&!Array.isArray(B)){v=!1;let F=null;if(B["font-scale"]&&(F=s.parse(B["font-scale"],1,pr),!F))return null;let U=null;if(B["text-font"]&&(U=s.parse(B["text-font"],1,Ci(nn)),!U))return null;let Q=null;if(B["text-color"]&&(Q=s.parse(B["text-color"],1,Ri),!Q))return null;let K=null;if(B["vertical-align"]){if(typeof B["vertical-align"]=="string"&&!zo.includes(B["vertical-align"]))return s.error(`'vertical-align' must be one of: 'bottom', 'center', 'top' but found '${B["vertical-align"]}' instead.`);if(K=s.parse(B["vertical-align"],1,nn),!K)return null}const X=p[p.length-1];X.scale=F,X.font=U,X.textColor=Q,X.verticalAlign=K}else{const F=s.parse(t[_],1,dn);if(!F)return null;const U=F.type.kind;if(U!=="string"&&U!=="value"&&U!=="null"&&U!=="resolvedImage")return s.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");v=!0,p.push({content:F,scale:null,font:null,textColor:null,verticalAlign:null})}}return new pa(p)}evaluate(t){return new vs(this.sections.map((s=>{const A=s.content.evaluate(t);return ti(A)===tc?new Ho("",A,null,null,null,s.verticalAlign?s.verticalAlign.evaluate(t):null):new Ho(Aa(A),null,s.scale?s.scale.evaluate(t):null,s.font?s.font.evaluate(t).join(","):null,s.textColor?s.textColor.evaluate(t):null,s.verticalAlign?s.verticalAlign.evaluate(t):null)})))}eachChild(t){for(const s of this.sections)t(s.content),s.scale&&t(s.scale),s.font&&t(s.font),s.textColor&&t(s.textColor),s.verticalAlign&&t(s.verticalAlign)}outputDefined(){return!1}}class Ta{constructor(t){this.type=tc,this.input=t}static parse(t,s){if(t.length!==2)return s.error("Expected two arguments.");const A=s.parse(t[1],1,nn);return A?new Ta(A):s.error("No image name provided.")}evaluate(t){const s=this.input.evaluate(t),A=uo.fromString(s);return A&&t.availableImages&&(A.available=t.availableImages.indexOf(s)>-1),A}eachChild(t){t(this.input)}outputDefined(){return!1}}class hl{constructor(t){this.type=pr,this.input=t}static parse(t,s){if(t.length!==2)return s.error(`Expected 1 argument, but found ${t.length-1} instead.`);const A=s.parse(t[1],1);return A?A.type.kind!=="array"&&A.type.kind!=="string"&&A.type.kind!=="value"?s.error(`Expected argument of type string or array, but found ${jn(A.type)} instead.`):new hl(A):null}evaluate(t){const s=this.input.evaluate(t);if(typeof s=="string")return[...s].length;if(Array.isArray(s))return s.length;throw new ii(`Expected value to be of type string or array, but found ${jn(ti(s))} instead.`)}eachChild(t){t(this.input)}outputDefined(){return!1}}const Fi=8192;function Tc(a,t){const s=(180+a[0])/360,A=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+a[1]*Math.PI/360)))/360,p=Math.pow(2,t.z);return[Math.round(s*p*Fi),Math.round(A*p*Fi)]}function ma(a,t){const s=Math.pow(2,t.z);return[(p=(a[0]/Fi+t.x)/s,360*p-180),(A=(a[1]/Fi+t.y)/s,360/Math.PI*Math.atan(Math.exp((180-360*A)*Math.PI/180))-90)];var A,p}function Pa(a,t){a[0]=Math.min(a[0],t[0]),a[1]=Math.min(a[1],t[1]),a[2]=Math.max(a[2],t[0]),a[3]=Math.max(a[3],t[1])}function Xi(a,t){return!(a[0]<=t[0]||a[2]>=t[2]||a[1]<=t[1]||a[3]>=t[3])}function sA(a,t,s){const A=a[0]-t[0],p=a[1]-t[1],v=a[0]-s[0],_=a[1]-s[1];return A*_-v*p==0&&A*v<=0&&p*_<=0}function Tl(a,t,s,A){return(p=[A[0]-s[0],A[1]-s[1]])[0]*(v=[t[0]-a[0],t[1]-a[1]])[1]-p[1]*v[0]!=0&&!(!LA(a,t,s,A)||!LA(s,A,a,t));var p,v}function ou(a,t,s){for(const A of s)for(let p=0;p<A.length-1;++p)if(Tl(a,t,A[p],A[p+1]))return!0;return!1}function Pl(a,t,s=!1){let A=!1;for(const B of t)for(let F=0;F<B.length-1;F++){if(sA(a,B[F],B[F+1]))return s;(v=B[F])[1]>(p=a)[1]!=(_=B[F+1])[1]>p[1]&&p[0]<(_[0]-v[0])*(p[1]-v[1])/(_[1]-v[1])+v[0]&&(A=!A)}var p,v,_;return A}function $s(a,t){for(const s of t)if(Pl(a,s))return!0;return!1}function La(a,t){for(const s of a)if(!Pl(s,t))return!1;for(let s=0;s<a.length-1;++s)if(ou(a[s],a[s+1],t))return!1;return!0}function dl(a,t){for(const s of t)if(La(a,s))return!0;return!1}function LA(a,t,s,A){const p=A[0]-s[0],v=A[1]-s[1],_=(a[0]-s[0])*v-p*(a[1]-s[1]),B=(t[0]-s[0])*v-p*(t[1]-s[1]);return _>0&&B<0||_<0&&B>0}function Bo(a,t,s){const A=[];for(let p=0;p<a.length;p++){const v=[];for(let _=0;_<a[p].length;_++){const B=Tc(a[p][_],s);Pa(t,B),v.push(B)}A.push(v)}return A}function Ll(a,t,s){const A=[];for(let p=0;p<a.length;p++){const v=Bo(a[p],t,s);A.push(v)}return A}function oA(a,t,s,A){if(a[0]<s[0]||a[0]>s[2]){const p=.5*A;let v=a[0]-s[0]>p?-A:s[0]-a[0]>p?A:0;v===0&&(v=a[0]-s[2]>p?-A:s[2]-a[0]>p?A:0),a[0]+=v}Pa(t,a)}function aA(a,t,s,A){const p=Math.pow(2,A.z)*Fi,v=[A.x*Fi,A.y*Fi],_=[];for(const B of a)for(const F of B){const U=[F.x+v[0],F.y+v[1]];oA(U,t,s,p),_.push(U)}return _}function Ml(a,t,s,A){const p=Math.pow(2,A.z)*Fi,v=[A.x*Fi,A.y*Fi],_=[];for(const F of a){const U=[];for(const Q of F){const K=[Q.x+v[0],Q.y+v[1]];Pa(t,K),U.push(K)}_.push(U)}if(t[2]-t[0]<=p/2){(B=t)[0]=B[1]=1/0,B[2]=B[3]=-1/0;for(const F of _)for(const U of F)oA(U,t,s,p)}var B;return _}class Ws{constructor(t,s){this.type=un,this.geojson=t,this.geometries=s}static parse(t,s){if(t.length!==2)return s.error(`'within' expression requires exactly one argument, but found ${t.length-1} instead.`);if(Fa(t[1])){const A=t[1];if(A.type==="FeatureCollection"){const p=[];for(const v of A.features){const{type:_,coordinates:B}=v.geometry;_==="Polygon"&&p.push(B),_==="MultiPolygon"&&p.push(...B)}if(p.length)return new Ws(A,{type:"MultiPolygon",coordinates:p})}else if(A.type==="Feature"){const p=A.geometry.type;if(p==="Polygon"||p==="MultiPolygon")return new Ws(A,A.geometry)}else if(A.type==="Polygon"||A.type==="MultiPolygon")return new Ws(A,A)}return s.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(t){if(t.geometry()!=null&&t.canonicalID()!=null){if(t.geometryType()==="Point")return(function(s,A){const p=[1/0,1/0,-1/0,-1/0],v=[1/0,1/0,-1/0,-1/0],_=s.canonicalID();if(A.type==="Polygon"){const B=Bo(A.coordinates,v,_),F=aA(s.geometry(),p,v,_);if(!Xi(p,v))return!1;for(const U of F)if(!Pl(U,B))return!1}if(A.type==="MultiPolygon"){const B=Ll(A.coordinates,v,_),F=aA(s.geometry(),p,v,_);if(!Xi(p,v))return!1;for(const U of F)if(!$s(U,B))return!1}return!0})(t,this.geometries);if(t.geometryType()==="LineString")return(function(s,A){const p=[1/0,1/0,-1/0,-1/0],v=[1/0,1/0,-1/0,-1/0],_=s.canonicalID();if(A.type==="Polygon"){const B=Bo(A.coordinates,v,_),F=Ml(s.geometry(),p,v,_);if(!Xi(p,v))return!1;for(const U of F)if(!La(U,B))return!1}if(A.type==="MultiPolygon"){const B=Ll(A.coordinates,v,_),F=Ml(s.geometry(),p,v,_);if(!Xi(p,v))return!1;for(const U of F)if(!dl(U,B))return!1}return!0})(t,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}}let qo=class{constructor(a=[],t=(s,A)=>s<A?-1:s>A?1:0){if(this.data=a,this.length=this.data.length,this.compare=t,this.length>0)for(let s=(this.length>>1)-1;s>=0;s--)this._down(s)}push(a){this.data.push(a),this._up(this.length++)}pop(){if(this.length===0)return;const a=this.data[0],t=this.data.pop();return--this.length>0&&(this.data[0]=t,this._down(0)),a}peek(){return this.data[0]}_up(a){const{data:t,compare:s}=this,A=t[a];for(;a>0;){const p=a-1>>1,v=t[p];if(s(A,v)>=0)break;t[a]=v,a=p}t[a]=A}_down(a){const{data:t,compare:s}=this,A=this.length>>1,p=t[a];for(;a<A;){let v=1+(a<<1);const _=v+1;if(_<this.length&&s(t[_],t[v])<0&&(v=_),s(t[v],p)>=0)break;t[a]=t[v],a=v}t[a]=p}};function Co(a,t,s=0,A=a.length-1,p=fl){for(;A>s;){if(A-s>600){const F=A-s+1,U=t-s+1,Q=Math.log(F),K=.5*Math.exp(2*Q/3),X=.5*Math.sqrt(Q*K*(F-K)/F)*(U-F/2<0?-1:1);Co(a,t,Math.max(s,Math.floor(t-U*K/F+X)),Math.min(A,Math.floor(t+(F-U)*K/F+X)),p)}const v=a[t];let _=s,B=A;for(ga(a,s,t),p(a[A],v)>0&&ga(a,s,A);_<B;){for(ga(a,_,B),_++,B--;p(a[_],v)<0;)_++;for(;p(a[B],v)>0;)B--}p(a[s],v)===0?ga(a,s,B):(B++,ga(a,B,A)),B<=t&&(s=B+1),t<=B&&(A=B-1)}}function ga(a,t,s){const A=a[t];a[t]=a[s],a[s]=A}function fl(a,t){return a<t?-1:a>t?1:0}function Ma(a,t){if(a.length<=1)return[a];const s=[];let A,p;for(const v of a){const _=kl(v);_!==0&&(v.area=Math.abs(_),p===void 0&&(p=_<0),p===_<0?(A&&s.push(A),A=[v]):A.push(v))}if(A&&s.push(A),t>1)for(let v=0;v<s.length;v++)s[v].length<=t||(Co(s[v],t,1,s[v].length-1,oc),s[v]=s[v].slice(0,t));return s}function oc(a,t){return t.area-a.area}function kl(a){let t=0;for(let s,A,p=0,v=a.length,_=v-1;p<v;_=p++)s=a[p],A=a[_],t+=(A.x-s.x)*(s.y+A.y);return t}const ss=1/298.257223563,pl=ss*(2-ss),ml=Math.PI/180;class ya{constructor(t){const s=6378.137*ml*1e3,A=Math.cos(t*ml),p=1/(1-pl*(1-A*A)),v=Math.sqrt(p);this.kx=s*v*A,this.ky=s*v*p*(1-pl)}distance(t,s){const A=this.wrap(t[0]-s[0])*this.kx,p=(t[1]-s[1])*this.ky;return Math.sqrt(A*A+p*p)}pointOnLine(t,s){let A,p,v,_,B=1/0;for(let F=0;F<t.length-1;F++){let U=t[F][0],Q=t[F][1],K=this.wrap(t[F+1][0]-U)*this.kx,X=(t[F+1][1]-Q)*this.ky,J=0;K===0&&X===0||(J=(this.wrap(s[0]-U)*this.kx*K+(s[1]-Q)*this.ky*X)/(K*K+X*X),J>1?(U=t[F+1][0],Q=t[F+1][1]):J>0&&(U+=K/this.kx*J,Q+=X/this.ky*J)),K=this.wrap(s[0]-U)*this.kx,X=(s[1]-Q)*this.ky;const se=K*K+X*X;se<B&&(B=se,A=U,p=Q,v=F,_=J)}return{point:[A,p],index:v,t:Math.max(0,Math.min(1,_))}}wrap(t){for(;t<-180;)t+=360;for(;t>180;)t-=360;return t}}function Pc(a,t){return t[0]-a[0]}function Ul(a){return a[1]-a[0]+1}function ho(a,t){return a[1]>=a[0]&&a[1]<t}function ac(a,t){if(a[0]>a[1])return[null,null];const s=Ul(a);if(t){if(s===2)return[a,null];const p=Math.floor(s/2);return[[a[0],a[0]+p],[a[0]+p,a[1]]]}if(s===1)return[a,null];const A=Math.floor(s/2)-1;return[[a[0],a[0]+A],[a[0]+A+1,a[1]]]}function gl(a,t){if(!ho(t,a.length))return[1/0,1/0,-1/0,-1/0];const s=[1/0,1/0,-1/0,-1/0];for(let A=t[0];A<=t[1];++A)Pa(s,a[A]);return s}function Dl(a){const t=[1/0,1/0,-1/0,-1/0];for(const s of a)for(const A of s)Pa(t,A);return t}function Rl(a){return a[0]!==-1/0&&a[1]!==-1/0&&a[2]!==1/0&&a[3]!==1/0}function Nl(a,t,s){if(!Rl(a)||!Rl(t))return NaN;let A=0,p=0;return a[2]<t[0]&&(A=t[0]-a[2]),a[0]>t[2]&&(A=a[0]-t[2]),a[1]>t[3]&&(p=a[1]-t[3]),a[3]<t[1]&&(p=t[1]-a[3]),s.distance([0,0],[A,p])}function $o(a,t,s){const A=s.pointOnLine(t,a);return s.distance(a,A.point)}function lc(a,t,s,A,p){const v=Math.min($o(a,[s,A],p),$o(t,[s,A],p)),_=Math.min($o(s,[a,t],p),$o(A,[a,t],p));return Math.min(v,_)}function os(a,t,s,A,p){if(!ho(t,a.length)||!ho(A,s.length))return 1/0;let v=1/0;for(let _=t[0];_<t[1];++_){const B=a[_],F=a[_+1];for(let U=A[0];U<A[1];++U){const Q=s[U],K=s[U+1];if(Tl(B,F,Q,K))return 0;v=Math.min(v,lc(B,F,Q,K,p))}}return v}function Eo(a,t,s,A,p){if(!ho(t,a.length)||!ho(A,s.length))return NaN;let v=1/0;for(let _=t[0];_<=t[1];++_)for(let B=A[0];B<=A[1];++B)if(v=Math.min(v,p.distance(a[_],s[B])),v===0)return v;return v}function si(a,t,s){if(Pl(a,t,!0))return 0;let A=1/0;for(const p of t){const v=p[0],_=p[p.length-1];if(v!==_&&(A=Math.min(A,$o(a,[_,v],s)),A===0))return A;const B=s.pointOnLine(p,a);if(A=Math.min(A,s.distance(a,B.point)),A===0)return A}return A}function _i(a,t,s,A){if(!ho(t,a.length))return NaN;for(let v=t[0];v<=t[1];++v)if(Pl(a[v],s,!0))return 0;let p=1/0;for(let v=t[0];v<t[1];++v){const _=a[v],B=a[v+1];for(const F of s)for(let U=0,Q=F.length,K=Q-1;U<Q;K=U++){const X=F[K],J=F[U];if(Tl(_,B,X,J))return 0;p=Math.min(p,lc(_,B,X,J,A))}}return p}function Yi(a,t){for(const s of a)for(const A of s)if(Pl(A,t,!0))return!0;return!1}function bs(a,t,s,A=1/0){const p=Dl(a),v=Dl(t);if(A!==1/0&&Nl(p,v,s)>=A)return A;if(Xi(p,v)){if(Yi(a,t))return 0}else if(Yi(t,a))return 0;let _=1/0;for(const B of a)for(let F=0,U=B.length,Q=U-1;F<U;Q=F++){const K=B[Q],X=B[F];for(const J of t)for(let se=0,le=J.length,ue=le-1;se<le;ue=se++){const Be=J[ue],tt=J[se];if(Tl(K,X,Be,tt))return 0;_=Math.min(_,lc(K,X,Be,tt,s))}}return _}function Pn(a,t,s,A,p,v){if(!v)return;const _=Nl(gl(A,v),p,s);_<t&&a.push([_,v,[0,0]])}function Lc(a,t,s,A,p,v,_){if(!v||!_)return;const B=Nl(gl(A,v),gl(p,_),s);B<t&&a.push([B,v,_])}function cc(a,t,s,A,p=1/0){let v=Math.min(A.distance(a[0],s[0][0]),p);if(v===0)return v;const _=new qo([[0,[0,a.length-1],[0,0]]],Pc),B=Dl(s);for(;_.length>0;){const F=_.pop();if(F[0]>=v)continue;const U=F[1],Q=t?50:100;if(Ul(U)<=Q){if(!ho(U,a.length))return NaN;if(t){const K=_i(a,U,s,A);if(isNaN(K)||K===0)return K;v=Math.min(v,K)}else for(let K=U[0];K<=U[1];++K){const X=si(a[K],s,A);if(v=Math.min(v,X),v===0)return 0}}else{const K=ac(U,t);Pn(_,v,A,a,B,K[0]),Pn(_,v,A,a,B,K[1])}}return v}function ka(a,t,s,A,p,v=1/0){let _=Math.min(v,p.distance(a[0],s[0]));if(_===0)return _;const B=new qo([[0,[0,a.length-1],[0,s.length-1]]],Pc);for(;B.length>0;){const F=B.pop();if(F[0]>=_)continue;const U=F[1],Q=F[2],K=t?50:100,X=A?50:100;if(Ul(U)<=K&&Ul(Q)<=X){if(!ho(U,a.length)&&ho(Q,s.length))return NaN;let J;if(t&&A)J=os(a,U,s,Q,p),_=Math.min(_,J);else if(t&&!A){const se=a.slice(U[0],U[1]+1);for(let le=Q[0];le<=Q[1];++le)if(J=$o(s[le],se,p),_=Math.min(_,J),_===0)return _}else if(!t&&A){const se=s.slice(Q[0],Q[1]+1);for(let le=U[0];le<=U[1];++le)if(J=$o(a[le],se,p),_=Math.min(_,J),_===0)return _}else J=Eo(a,U,s,Q,p),_=Math.min(_,J)}else{const J=ac(U,t),se=ac(Q,A);Lc(B,_,p,a,s,J[0],se[0]),Lc(B,_,p,a,s,J[0],se[1]),Lc(B,_,p,a,s,J[1],se[0]),Lc(B,_,p,a,s,J[1],se[1])}}return _}function MA(a){return a.type==="MultiPolygon"?a.coordinates.map((t=>({type:"Polygon",coordinates:t}))):a.type==="MultiLineString"?a.coordinates.map((t=>({type:"LineString",coordinates:t}))):a.type==="MultiPoint"?a.coordinates.map((t=>({type:"Point",coordinates:t}))):[a]}class Ua{constructor(t,s){this.type=pr,this.geojson=t,this.geometries=s}static parse(t,s){if(t.length!==2)return s.error(`'distance' expression requires exactly one argument, but found ${t.length-1} instead.`);if(Fa(t[1])){const A=t[1];if(A.type==="FeatureCollection")return new Ua(A,A.features.map((p=>MA(p.geometry))).flat());if(A.type==="Feature")return new Ua(A,MA(A.geometry));if("type"in A&&"coordinates"in A)return new Ua(A,MA(A))}return s.error("'distance' expression requires valid geojson object that contains polygon geometry type.")}evaluate(t){if(t.geometry()!=null&&t.canonicalID()!=null){if(t.geometryType()==="Point")return(function(s,A){const p=s.geometry(),v=p.flat().map((F=>ma([F.x,F.y],s.canonical)));if(p.length===0)return NaN;const _=new ya(v[0][1]);let B=1/0;for(const F of A){switch(F.type){case"Point":B=Math.min(B,ka(v,!1,[F.coordinates],!1,_,B));break;case"LineString":B=Math.min(B,ka(v,!1,F.coordinates,!0,_,B));break;case"Polygon":B=Math.min(B,cc(v,!1,F.coordinates,_,B))}if(B===0)return B}return B})(t,this.geometries);if(t.geometryType()==="LineString")return(function(s,A){const p=s.geometry(),v=p.flat().map((F=>ma([F.x,F.y],s.canonical)));if(p.length===0)return NaN;const _=new ya(v[0][1]);let B=1/0;for(const F of A){switch(F.type){case"Point":B=Math.min(B,ka(v,!0,[F.coordinates],!1,_,B));break;case"LineString":B=Math.min(B,ka(v,!0,F.coordinates,!0,_,B));break;case"Polygon":B=Math.min(B,cc(v,!0,F.coordinates,_,B))}if(B===0)return B}return B})(t,this.geometries);if(t.geometryType()==="Polygon")return(function(s,A){const p=s.geometry();if(p.length===0||p[0].length===0)return NaN;const v=Ma(p,0).map((F=>F.map((U=>U.map((Q=>ma([Q.x,Q.y],s.canonical))))))),_=new ya(v[0][0][0][1]);let B=1/0;for(const F of A)for(const U of v){switch(F.type){case"Point":B=Math.min(B,cc([F.coordinates],!1,U,_,B));break;case"LineString":B=Math.min(B,cc(F.coordinates,!0,U,_,B));break;case"Polygon":B=Math.min(B,bs(U,F.coordinates,_,B))}if(B===0)return B}return B})(t,this.geometries)}return NaN}eachChild(){}outputDefined(){return!0}}class Mc{constructor(t){this.type=dn,this.key=t}static parse(t,s){if(t.length!==2)return s.error(`Expected 1 argument, but found ${t.length-1} instead.`);const A=t[1];return A==null?s.error("Global state property must be defined."):typeof A!="string"?s.error(`Global state property must be string, but found ${typeof t[1]} instead.`):new Mc(A)}evaluate(t){var s;const A=(s=t.globals)===null||s===void 0?void 0:s.globalState;return A&&Object.keys(A).length!==0?Kn(A,this.key):null}eachChild(){}outputDefined(){return!1}}const kc={"==":ji,"!=":is,">":Ds,"<":Si,">=":xs,"<=":Mi,array:qs,at:En,boolean:qs,case:Go,coalesce:Vr,collator:Ko,format:pa,image:Ta,in:mn,"index-of":Ia,interpolate:Gt,"interpolate-hcl":Gt,"interpolate-lab":Gt,length:hl,let:Nn,literal:Zi,match:bn,number:qs,"number-format":fa,object:qs,slice:Ei,step:da,string:qs,"to-boolean":jo,"to-color":jo,"to-number":jo,"to-string":jo,var:Vo,within:Ws,distance:Ua,"global-state":Mc};class fo{constructor(t,s,A,p){this.name=t,this.type=s,this._evaluate=A,this.args=p}evaluate(t){return this._evaluate(t,this.args)}eachChild(t){this.args.forEach(t)}outputDefined(){return!1}static parse(t,s){const A=t[0],p=fo.definitions[A];if(!p)return s.error(`Unknown expression "${A}". If you wanted a literal array, use ["literal", [...]].`,0);const v=Array.isArray(p)?p[0]:p.type,_=Array.isArray(p)?[[p[1],p[2]]]:p.overloads,B=_.filter((([U])=>!Array.isArray(U)||U.length===t.length-1));let F=null;for(const[U,Q]of B){F=new ha(s.registry,kA,s.path,null,s.scope);const K=[];let X=!1;for(let J=1;J<t.length;J++){const se=t[J],le=Array.isArray(U)?U[J-1]:U.type,ue=F.parse(se,1+K.length,le);if(!ue){X=!0;break}K.push(ue)}if(!X)if(Array.isArray(U)&&U.length!==K.length)F.error(`Expected ${U.length} arguments, but found ${K.length} instead.`);else{for(let J=0;J<K.length;J++){const se=Array.isArray(U)?U[J]:U.type,le=K[J];F.concat(J+1).checkSubtype(se,le.type)}if(F.errors.length===0)return new fo(A,v,Q,K)}}if(B.length===1)s.errors.push(...F.errors);else{const U=(B.length?B:_).map((([K])=>{return X=K,Array.isArray(X)?`(${X.map(jn).join(", ")})`:`(${jn(X.type)}...)`;var X})).join(" | "),Q=[];for(let K=1;K<t.length;K++){const X=s.parse(t[K],1+Q.length);if(!X)return null;Q.push(jn(X.type))}s.error(`Expected arguments of type ${U}, but found (${Q.join(", ")}) instead.`)}return null}static register(t,s){fo.definitions=s;for(const A in s)t[A]=fo}}function Uc(a,[t,s,A,p]){t=t.evaluate(a),s=s.evaluate(a),A=A.evaluate(a);const v=p?p.evaluate(a):1,_=Sa(t,s,A,v);if(_)throw new ii(_);return new an(t/255,s/255,A/255,v,!1)}function Dc(a,t){return a in t}function au(a,t){const s=t[a];return s===void 0?null:s}function yl(a){return{type:a}}function kA(a){if(a instanceof Vo)return kA(a.boundExpression);if(a instanceof fo&&a.name==="error"||a instanceof Ko||a instanceof Ws||a instanceof Ua||a instanceof Mc)return!1;const t=a instanceof jo||a instanceof qs;let s=!0;return a.eachChild((A=>{s=t?s&&kA(A):s&&A instanceof Zi})),!!s&&UA(a)&&DA(a,["zoom","heatmap-density","elevation","line-progress","accumulated","is-supported-script"])}function UA(a){if(a instanceof fo&&(a.name==="get"&&a.args.length===1||a.name==="feature-state"||a.name==="has"&&a.args.length===1||a.name==="properties"||a.name==="geometry-type"||a.name==="id"||/^filter-/.test(a.name))||a instanceof Ws||a instanceof Ua)return!1;let t=!0;return a.eachChild((s=>{t&&!UA(s)&&(t=!1)})),t}function lA(a){if(a instanceof fo&&a.name==="feature-state")return!1;let t=!0;return a.eachChild((s=>{t&&!lA(s)&&(t=!1)})),t}function DA(a,t){if(a instanceof fo&&t.indexOf(a.name)>=0)return!1;let s=!0;return a.eachChild((A=>{s&&!DA(A,t)&&(s=!1)})),s}function Uu(a){return{result:"success",value:a}}function Rc(a){return{result:"error",value:a}}function So(a){return a["property-type"]==="data-driven"||a["property-type"]==="cross-faded-data-driven"}function cA(a){return!!a.expression&&a.expression.parameters.indexOf("zoom")>-1}function lo(a){return!!a.expression&&a.expression.interpolated}function pn(a){return a instanceof Number?"number":a instanceof String?"string":a instanceof Boolean?"boolean":Array.isArray(a)?"array":a===null?"null":typeof a}function AA(a){return typeof a=="object"&&a!==null&&!Array.isArray(a)&&ti(a)===ks}function Nc(a){return a}function ch(a,t){const s=a.stops&&typeof a.stops[0][0]=="object",A=s||!(s||a.property!==void 0),p=a.type||(lo(t)?"exponential":"interval"),v=(function(Q){switch(Q.type){case"color":return an.parse;case"padding":return qr.parse;case"numberArray":return Jn.parse;case"colorArray":return cn.parse;default:return null}})(t);if(v&&((a=Zn({},a)).stops&&(a.stops=a.stops.map((Q=>[Q[0],v(Q[1])]))),a.default=v(a.default?a.default:t.default)),a.colorSpace&&(_=a.colorSpace)!=="rgb"&&_!=="hcl"&&_!=="lab")throw new Error(`Unknown color space: "${a.colorSpace}"`);var _;const B=(function(Q){switch(Q){case"exponential":return cu;case"interval":return Ii;case"categorical":return lu;case"identity":return RA;default:throw new Error(`Unknown function type "${Q}"`)}})(p);let F,U;if(p==="categorical"){F=Object.create(null);for(const Q of a.stops)F[Q[0]]=Q[1];U=typeof a.stops[0][0]}if(s){const Q={},K=[];for(let se=0;se<a.stops.length;se++){const le=a.stops[se],ue=le[0].zoom;Q[ue]===void 0&&(Q[ue]={zoom:ue,type:a.type,property:a.property,default:a.default,stops:[]},K.push(ue)),Q[ue].stops.push([le[0].value,le[1]])}const X=[];for(const se of K)X.push([Q[se].zoom,ch(Q[se],t)]);const J={name:"linear"};return{kind:"composite",interpolationType:J,interpolationFactor:Gt.interpolationFactor.bind(void 0,J),zoomStops:X.map((se=>se[0])),evaluate:({zoom:se},le)=>cu({stops:X,base:a.base},t,se).evaluate(se,le)}}if(A){const Q=p==="exponential"?{name:"exponential",base:a.base!==void 0?a.base:1}:null;return{kind:"camera",interpolationType:Q,interpolationFactor:Gt.interpolationFactor.bind(void 0,Q),zoomStops:a.stops.map((K=>K[0])),evaluate:({zoom:K})=>B(a,t,K,F,U)}}return{kind:"source",evaluate(Q,K){const X=K&&K.properties?K.properties[a.property]:void 0;return X===void 0?Ac(a.default,t.default):B(a,t,X,F,U)}}}function Ac(a,t,s){return a!==void 0?a:t!==void 0?t:s!==void 0?s:void 0}function lu(a,t,s,A,p){return Ac(typeof s===p?A[s]:void 0,a.default,t.default)}function Ii(a,t,s){if(pn(s)!=="number")return Ac(a.default,t.default);const A=a.stops.length;if(A===1||s<=a.stops[0][0])return a.stops[0][1];if(s>=a.stops[A-1][0])return a.stops[A-1][1];const p=ao(a.stops.map((v=>v[0])),s);return a.stops[p][1]}function cu(a,t,s){const A=a.base!==void 0?a.base:1;if(pn(s)!=="number")return Ac(a.default,t.default);const p=a.stops.length;if(p===1||s<=a.stops[0][0])return a.stops[0][1];if(s>=a.stops[p-1][0])return a.stops[p-1][1];const v=ao(a.stops.map((Q=>Q[0])),s),_=(function(Q,K,X,J){const se=J-X,le=Q-X;return se===0?0:K===1?le/se:(Math.pow(K,le)-1)/(Math.pow(K,se)-1)})(s,A,a.stops[v][0],a.stops[v+1][0]),B=a.stops[v][1],F=a.stops[v+1][1],U=br[t.type]||Nc;return typeof B.evaluate=="function"?{evaluate(...Q){const K=B.evaluate.apply(void 0,Q),X=F.evaluate.apply(void 0,Q);if(K!==void 0&&X!==void 0)return U(K,X,_,a.colorSpace)}}:U(B,F,_,a.colorSpace)}function RA(a,t,s){switch(t.type){case"color":s=an.parse(s);break;case"formatted":s=vs.fromString(s.toString());break;case"resolvedImage":s=uo.fromString(s.toString());break;case"padding":s=qr.parse(s);break;case"colorArray":s=cn.parse(s);break;case"numberArray":s=Jn.parse(s);break;default:pn(s)===t.type||t.type==="enum"&&t.values[s]||(s=void 0)}return Ac(s,a.default,t.default)}fo.register(kc,{error:[{kind:"error"},[nn],(a,[t])=>{throw new ii(t.evaluate(a))}],typeof:[nn,[dn],(a,[t])=>jn(ti(t.evaluate(a)))],"to-rgba":[Ci(pr,4),[Ri],(a,[t])=>{const[s,A,p,v]=t.evaluate(a).rgb;return[255*s,255*A,255*p,v]}],rgb:[Ri,[pr,pr,pr],Uc],rgba:[Ri,[pr,pr,pr,pr],Uc],has:{type:un,overloads:[[[nn],(a,[t])=>Dc(t.evaluate(a),a.properties())],[[nn,ks],(a,[t,s])=>Dc(t.evaluate(a),s.evaluate(a))]]},get:{type:dn,overloads:[[[nn],(a,[t])=>au(t.evaluate(a),a.properties())],[[nn,ks],(a,[t,s])=>au(t.evaluate(a),s.evaluate(a))]]},"feature-state":[dn,[nn],(a,[t])=>au(t.evaluate(a),a.featureState||{})],properties:[ks,[],a=>a.properties()],"geometry-type":[nn,[],a=>a.geometryType()],id:[dn,[],a=>a.id()],zoom:[pr,[],a=>a.globals.zoom],"heatmap-density":[pr,[],a=>a.globals.heatmapDensity||0],elevation:[pr,[],a=>a.globals.elevation||0],"line-progress":[pr,[],a=>a.globals.lineProgress||0],accumulated:[dn,[],a=>a.globals.accumulated===void 0?null:a.globals.accumulated],"+":[pr,yl(pr),(a,t)=>{let s=0;for(const A of t)s+=A.evaluate(a);return s}],"*":[pr,yl(pr),(a,t)=>{let s=1;for(const A of t)s*=A.evaluate(a);return s}],"-":{type:pr,overloads:[[[pr,pr],(a,[t,s])=>t.evaluate(a)-s.evaluate(a)],[[pr],(a,[t])=>-t.evaluate(a)]]},"/":[pr,[pr,pr],(a,[t,s])=>t.evaluate(a)/s.evaluate(a)],"%":[pr,[pr,pr],(a,[t,s])=>t.evaluate(a)%s.evaluate(a)],ln2:[pr,[],()=>Math.LN2],pi:[pr,[],()=>Math.PI],e:[pr,[],()=>Math.E],"^":[pr,[pr,pr],(a,[t,s])=>Math.pow(t.evaluate(a),s.evaluate(a))],sqrt:[pr,[pr],(a,[t])=>Math.sqrt(t.evaluate(a))],log10:[pr,[pr],(a,[t])=>Math.log(t.evaluate(a))/Math.LN10],ln:[pr,[pr],(a,[t])=>Math.log(t.evaluate(a))],log2:[pr,[pr],(a,[t])=>Math.log(t.evaluate(a))/Math.LN2],sin:[pr,[pr],(a,[t])=>Math.sin(t.evaluate(a))],cos:[pr,[pr],(a,[t])=>Math.cos(t.evaluate(a))],tan:[pr,[pr],(a,[t])=>Math.tan(t.evaluate(a))],asin:[pr,[pr],(a,[t])=>Math.asin(t.evaluate(a))],acos:[pr,[pr],(a,[t])=>Math.acos(t.evaluate(a))],atan:[pr,[pr],(a,[t])=>Math.atan(t.evaluate(a))],min:[pr,yl(pr),(a,t)=>Math.min(...t.map((s=>s.evaluate(a))))],max:[pr,yl(pr),(a,t)=>Math.max(...t.map((s=>s.evaluate(a))))],abs:[pr,[pr],(a,[t])=>Math.abs(t.evaluate(a))],round:[pr,[pr],(a,[t])=>{const s=t.evaluate(a);return s<0?-Math.round(-s):Math.round(s)}],floor:[pr,[pr],(a,[t])=>Math.floor(t.evaluate(a))],ceil:[pr,[pr],(a,[t])=>Math.ceil(t.evaluate(a))],"filter-==":[un,[nn,dn],(a,[t,s])=>a.properties()[t.value]===s.value],"filter-id-==":[un,[dn],(a,[t])=>a.id()===t.value],"filter-type-==":[un,[nn],(a,[t])=>a.geometryType()===t.value],"filter-<":[un,[nn,dn],(a,[t,s])=>{const A=a.properties()[t.value],p=s.value;return typeof A==typeof p&&A<p}],"filter-id-<":[un,[dn],(a,[t])=>{const s=a.id(),A=t.value;return typeof s==typeof A&&s<A}],"filter->":[un,[nn,dn],(a,[t,s])=>{const A=a.properties()[t.value],p=s.value;return typeof A==typeof p&&A>p}],"filter-id->":[un,[dn],(a,[t])=>{const s=a.id(),A=t.value;return typeof s==typeof A&&s>A}],"filter-<=":[un,[nn,dn],(a,[t,s])=>{const A=a.properties()[t.value],p=s.value;return typeof A==typeof p&&A<=p}],"filter-id-<=":[un,[dn],(a,[t])=>{const s=a.id(),A=t.value;return typeof s==typeof A&&s<=A}],"filter->=":[un,[nn,dn],(a,[t,s])=>{const A=a.properties()[t.value],p=s.value;return typeof A==typeof p&&A>=p}],"filter-id->=":[un,[dn],(a,[t])=>{const s=a.id(),A=t.value;return typeof s==typeof A&&s>=A}],"filter-has":[un,[dn],(a,[t])=>t.value in a.properties()],"filter-has-id":[un,[],a=>a.id()!==null&&a.id()!==void 0],"filter-type-in":[un,[Ci(nn)],(a,[t])=>t.value.indexOf(a.geometryType())>=0],"filter-id-in":[un,[Ci(dn)],(a,[t])=>t.value.indexOf(a.id())>=0],"filter-in-small":[un,[nn,Ci(dn)],(a,[t,s])=>s.value.indexOf(a.properties()[t.value])>=0],"filter-in-large":[un,[nn,Ci(dn)],(a,[t,s])=>(function(A,p,v,_){for(;v<=_;){const B=v+_>>1;if(p[B]===A)return!0;p[B]>A?_=B-1:v=B+1}return!1})(a.properties()[t.value],s.value,0,s.value.length-1)],all:{type:un,overloads:[[[un,un],(a,[t,s])=>t.evaluate(a)&&s.evaluate(a)],[yl(un),(a,t)=>{for(const s of t)if(!s.evaluate(a))return!1;return!0}]]},any:{type:un,overloads:[[[un,un],(a,[t,s])=>t.evaluate(a)||s.evaluate(a)],[yl(un),(a,t)=>{for(const s of t)if(s.evaluate(a))return!0;return!1}]]},"!":[un,[un],(a,[t])=>!t.evaluate(a)],"is-supported-script":[un,[nn],(a,[t])=>{const s=a.globals&&a.globals.isSupportedScript;return!s||s(t.evaluate(a))}],upcase:[nn,[nn],(a,[t])=>t.evaluate(a).toUpperCase()],downcase:[nn,[nn],(a,[t])=>t.evaluate(a).toLowerCase()],concat:[nn,yl(dn),(a,t)=>t.map((s=>Aa(s.evaluate(a)))).join("")],"resolved-locale":[nn,[ol],(a,[t])=>t.evaluate(a).resolvedLocale()]});class uc{constructor(t,s,A){this.expression=t,this._warningHistory={},this._evaluator=new sc,this._defaultValue=s?(function(p){if(p.type==="color"&&AA(p.default))return new an(0,0,0,0);switch(p.type){case"color":return an.parse(p.default)||null;case"padding":return qr.parse(p.default)||null;case"numberArray":return Jn.parse(p.default)||null;case"colorArray":return cn.parse(p.default)||null;case"variableAnchorOffsetCollection":return Wi.parse(p.default)||null;case"projectionDefinition":return ws.parse(p.default)||null;default:return p.default===void 0?null:p.default}})(s):null,this._enumValues=s&&s.type==="enum"?s.values:null,this._globalState=A}evaluateWithoutErrorHandling(t,s,A,p,v,_){return this._globalState&&(t=zc(t,this._globalState)),this._evaluator.globals=t,this._evaluator.feature=s,this._evaluator.featureState=A,this._evaluator.canonical=p,this._evaluator.availableImages=v||null,this._evaluator.formattedSection=_,this.expression.evaluate(this._evaluator)}evaluate(t,s,A,p,v,_){this._globalState&&(t=zc(t,this._globalState)),this._evaluator.globals=t,this._evaluator.feature=s||null,this._evaluator.featureState=A||null,this._evaluator.canonical=p,this._evaluator.availableImages=v||null,this._evaluator.formattedSection=_||null;try{const B=this.expression.evaluate(this._evaluator);if(B==null||typeof B=="number"&&B!=B)return this._defaultValue;if(this._enumValues&&!(B in this._enumValues))throw new ii(`Expected value to be one of ${Object.keys(this._enumValues).map((F=>JSON.stringify(F))).join(", ")}, but found ${JSON.stringify(B)} instead.`);return B}catch(B){return this._warningHistory[B.message]||(this._warningHistory[B.message]=!0,typeof console<"u"&&console.warn(B.message)),this._defaultValue}}}function Ql(a){return Array.isArray(a)&&a.length>0&&typeof a[0]=="string"&&a[0]in kc}function Qc(a,t,s){const A=new ha(kc,kA,[],t?(function(v){const _={color:Ri,string:nn,number:pr,enum:nn,boolean:un,formatted:al,padding:ec,numberArray:fi,colorArray:Ec,projectionDefinition:El,resolvedImage:tc,variableAnchorOffsetCollection:Sl};return v.type==="array"?Ci(_[v.value]||dn,v.length):_[v.type]})(t):void 0),p=A.parse(a,void 0,void 0,void 0,t&&t.type==="string"?{typeAnnotation:"coerce"}:void 0);return p?Uu(new uc(p,t,s)):Rc(A.errors)}class Oc{constructor(t,s,A){this.kind=t,this._styleExpression=s,this.isStateDependent=t!=="constant"&&!lA(s.expression),this.globalStateRefs=uA(s.expression),this._globalState=A}evaluateWithoutErrorHandling(t,s,A,p,v,_){return this._globalState&&(t=zc(t,this._globalState)),this._styleExpression.evaluateWithoutErrorHandling(t,s,A,p,v,_)}evaluate(t,s,A,p,v,_){return this._globalState&&(t=zc(t,this._globalState)),this._styleExpression.evaluate(t,s,A,p,v,_)}}class NA{constructor(t,s,A,p,v){this.kind=t,this.zoomStops=A,this._styleExpression=s,this.isStateDependent=t!=="camera"&&!lA(s.expression),this.globalStateRefs=uA(s.expression),this.interpolationType=p,this._globalState=v}evaluateWithoutErrorHandling(t,s,A,p,v,_){return this._globalState&&(t=zc(t,this._globalState)),this._styleExpression.evaluateWithoutErrorHandling(t,s,A,p,v,_)}evaluate(t,s,A,p,v,_){return this._globalState&&(t=zc(t,this._globalState)),this._styleExpression.evaluate(t,s,A,p,v,_)}interpolationFactor(t,s,A){return this.interpolationType?Gt.interpolationFactor(this.interpolationType,t,s,A):0}}function hc(a,t,s){const A=Qc(a,t,s);if(A.result==="error")return A;const p=A.value.expression,v=UA(p);if(!v&&!So(t))return Rc([new $i("","data expressions not supported")]);const _=DA(p,["zoom"]);if(!_&&!cA(t))return Rc([new $i("","zoom expressions not supported")]);const B=Du(p);return B||_?B instanceof $i?Rc([B]):B instanceof Gt&&!lo(t)?Rc([new $i("",'"interpolate" expressions cannot be used with this property')]):Uu(B?new NA(v?"camera":"composite",A.value,B.labels,B instanceof Gt?B.interpolation:void 0,s):new Oc(v?"constant":"source",A.value,s)):Rc([new $i("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class Au{constructor(t,s){this._parameters=t,this._specification=s,Zn(this,ch(this._parameters,this._specification))}static deserialize(t){return new Au(t._parameters,t._specification)}static serialize(t){return{_parameters:t._parameters,_specification:t._specification}}}function Du(a){let t=null;if(a instanceof Nn)t=Du(a.result);else if(a instanceof Vr){for(const s of a.args)if(t=Du(s),t)break}else(a instanceof da||a instanceof Gt)&&a.input instanceof fo&&a.input.name==="zoom"&&(t=a);return t instanceof $i||a.eachChild((s=>{const A=Du(s);A instanceof $i?t=A:!t&&A?t=new $i("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):t&&A&&t!==A&&(t=new $i("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))})),t}function uA(a,t=new Set){return a instanceof Mc&&t.add(a.key),a.eachChild((s=>{uA(s,t)})),t}function zc(a,t){const{zoom:s,heatmapDensity:A,elevation:p,lineProgress:v,isSupportedScript:_,accumulated:B}=a??{};return{zoom:s,heatmapDensity:A,elevation:p,lineProgress:v,isSupportedScript:_,accumulated:B,globalState:t}}function QA(a){if(a===!0||a===!1)return!0;if(!Array.isArray(a)||a.length===0)return!1;switch(a[0]){case"has":return a.length>=2&&a[1]!=="$id"&&a[1]!=="$type";case"in":return a.length>=3&&(typeof a[1]!="string"||Array.isArray(a[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return a.length!==3||Array.isArray(a[1])||Array.isArray(a[2]);case"any":case"all":for(const t of a.slice(1))if(!QA(t)&&typeof t!="boolean")return!1;return!0;default:return!0}}const OA={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function dc(a,t){if(a==null)return{filter:()=>!0,needGeometry:!1,getGlobalStateRefs:()=>new Set};QA(a)||(a=dA(a));const s=Qc(a,OA,t);if(s.result==="error")throw new Error(s.value.map((A=>`${A.key}: ${A.message}`)).join(", "));return{filter:(A,p,v)=>s.value.evaluate(A,p,{},v),needGeometry:Ru(a),getGlobalStateRefs:()=>uA(s.value.expression)}}function hA(a,t){return a<t?-1:a>t?1:0}function Ru(a){if(!Array.isArray(a))return!1;if(a[0]==="within"||a[0]==="distance")return!0;for(let t=1;t<a.length;t++)if(Ru(a[t]))return!0;return!1}function dA(a){if(!a)return!0;const t=a[0];return a.length<=1?t!=="any":t==="=="?uu(a[1],a[2],"=="):t==="!="?hu(uu(a[1],a[2],"==")):t==="<"||t===">"||t==="<="||t===">="?uu(a[1],a[2],t):t==="any"?(s=a.slice(1),["any"].concat(s.map(dA))):t==="all"?["all"].concat(a.slice(1).map(dA)):t==="none"?["all"].concat(a.slice(1).map(dA).map(hu)):t==="in"?Ah(a[1],a.slice(2)):t==="!in"?hu(Ah(a[1],a.slice(2))):t==="has"?jh(a[1]):t!=="!has"||hu(jh(a[1]));var s}function uu(a,t,s){switch(a){case"$type":return[`filter-type-${s}`,t];case"$id":return[`filter-id-${s}`,t];default:return[`filter-${s}`,a,t]}}function Ah(a,t){if(t.length===0)return!1;switch(a){case"$type":return["filter-type-in",["literal",t]];case"$id":return["filter-id-in",["literal",t]];default:return t.length>200&&!t.some((s=>typeof s!=typeof t[0]))?["filter-in-large",a,["literal",t.sort(hA)]]:["filter-in-small",a,["literal",t]]}}function jh(a){switch(a){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",a]}}function hu(a){return["!",a]}function zA(a){const t=typeof a;if(t==="number"||t==="boolean"||t==="string"||a==null)return JSON.stringify(a);if(Array.isArray(a)){let p="[";for(const v of a)p+=`${zA(v)},`;return`${p}]`}const s=Object.keys(a).sort();let A="{";for(let p=0;p<s.length;p++)A+=`${JSON.stringify(s[p])}:${zA(a[s[p]])},`;return`${A}}`}function po(a){let t="";for(const s of tn)t+=`/${zA(a[s])}`;return t}function va(a){const t=a.value;return t?[new Yt(a.key,t,"constants have been deprecated as of v8")]:[]}function $n(a){return a instanceof Number||a instanceof String||a instanceof Boolean?a.valueOf():a}function mo(a){if(Array.isArray(a))return a.map(mo);if(a instanceof Object&&!(a instanceof Number||a instanceof String||a instanceof Boolean)){const t={};for(const s in a)t[s]=mo(a[s]);return t}return $n(a)}function co(a){const t=a.key,s=a.value,A=a.valueSpec||{},p=a.objectElementValidators||{},v=a.style,_=a.styleSpec,B=a.validateSpec;let F=[];const U=pn(s);if(U!=="object")return[new Yt(t,s,`object expected, ${U} found`)];for(const Q in s){const K=Q.split(".")[0],X=Kn(A,K)||A["*"];let J;if(Kn(p,K))J=p[K];else if(Kn(A,K))J=B;else if(p["*"])J=p["*"];else{if(!A["*"]){F.push(new Yt(t,s[Q],`unknown property "${Q}"`));continue}J=B}F=F.concat(J({key:(t&&`${t}.`)+Q,value:s[Q],valueSpec:X,style:v,styleSpec:_,object:s,objectKey:Q,validateSpec:B},s))}for(const Q in A)p[Q]||A[Q].required&&A[Q].default===void 0&&s[Q]===void 0&&F.push(new Yt(t,s,`missing required property "${Q}"`));return F}function Rs(a){const t=a.value,s=a.valueSpec,A=a.style,p=a.styleSpec,v=a.key,_=a.arrayElementValidator||a.validateSpec;if(pn(t)!=="array")return[new Yt(v,t,`array expected, ${pn(t)} found`)];if(s.length&&t.length!==s.length)return[new Yt(v,t,`array length ${s.length} expected, length ${t.length} found`)];if(s["min-length"]&&t.length<s["min-length"])return[new Yt(v,t,`array length at least ${s["min-length"]} expected, length ${t.length} found`)];let B={type:s.value,values:s.values};p.$version<7&&(B.function=s.function),pn(s.value)==="object"&&(B=s.value);let F=[];for(let U=0;U<t.length;U++)F=F.concat(_({array:t,arrayIndex:U,value:t[U],valueSpec:B,validateSpec:a.validateSpec,style:A,styleSpec:p,key:`${v}[${U}]`}));return F}function Zs(a){const t=a.key,s=a.value,A=a.valueSpec;let p=pn(s);return p==="number"&&s!=s&&(p="NaN"),p!=="number"?[new Yt(t,s,`number expected, ${p} found`)]:"minimum"in A&&s<A.minimum?[new Yt(t,s,`${s} is less than the minimum value ${A.minimum}`)]:"maximum"in A&&s>A.maximum?[new Yt(t,s,`${s} is greater than the maximum value ${A.maximum}`)]:[]}function Nu(a){const t=a.valueSpec,s=$n(a.value.type);let A,p,v,_={};const B=s!=="categorical"&&a.value.property===void 0,F=!B,U=pn(a.value.stops)==="array"&&pn(a.value.stops[0])==="array"&&pn(a.value.stops[0][0])==="object",Q=co({key:a.key,value:a.value,valueSpec:a.styleSpec.function,validateSpec:a.validateSpec,style:a.style,styleSpec:a.styleSpec,objectElementValidators:{stops:function(J){if(s==="identity")return[new Yt(J.key,J.value,'identity function may not have a "stops" property')];let se=[];const le=J.value;return se=se.concat(Rs({key:J.key,value:le,valueSpec:J.valueSpec,validateSpec:J.validateSpec,style:J.style,styleSpec:J.styleSpec,arrayElementValidator:K})),pn(le)==="array"&&le.length===0&&se.push(new Yt(J.key,le,"array must have at least one stop")),se},default:function(J){return J.validateSpec({key:J.key,value:J.value,valueSpec:t,validateSpec:J.validateSpec,style:J.style,styleSpec:J.styleSpec})}}});return s==="identity"&&B&&Q.push(new Yt(a.key,a.value,'missing required property "property"')),s==="identity"||a.value.stops||Q.push(new Yt(a.key,a.value,'missing required property "stops"')),s==="exponential"&&a.valueSpec.expression&&!lo(a.valueSpec)&&Q.push(new Yt(a.key,a.value,"exponential functions not supported")),a.styleSpec.$version>=8&&(F&&!So(a.valueSpec)?Q.push(new Yt(a.key,a.value,"property functions not supported")):B&&!cA(a.valueSpec)&&Q.push(new Yt(a.key,a.value,"zoom functions not supported"))),s!=="categorical"&&!U||a.value.property!==void 0||Q.push(new Yt(a.key,a.value,'"property" property is required')),Q;function K(J){let se=[];const le=J.value,ue=J.key;if(pn(le)!=="array")return[new Yt(ue,le,`array expected, ${pn(le)} found`)];if(le.length!==2)return[new Yt(ue,le,`array length 2 expected, length ${le.length} found`)];if(U){if(pn(le[0])!=="object")return[new Yt(ue,le,`object expected, ${pn(le[0])} found`)];if(le[0].zoom===void 0)return[new Yt(ue,le,"object stop key must have zoom")];if(le[0].value===void 0)return[new Yt(ue,le,"object stop key must have value")];if(v&&v>$n(le[0].zoom))return[new Yt(ue,le[0].zoom,"stop zoom values must appear in ascending order")];$n(le[0].zoom)!==v&&(v=$n(le[0].zoom),p=void 0,_={}),se=se.concat(co({key:`${ue}[0]`,value:le[0],valueSpec:{zoom:{}},validateSpec:J.validateSpec,style:J.style,styleSpec:J.styleSpec,objectElementValidators:{zoom:Zs,value:X}}))}else se=se.concat(X({key:`${ue}[0]`,value:le[0],validateSpec:J.validateSpec,style:J.style,styleSpec:J.styleSpec},le));return Ql(mo(le[1]))?se.concat([new Yt(`${ue}[1]`,le[1],"expressions are not allowed in function stops.")]):se.concat(J.validateSpec({key:`${ue}[1]`,value:le[1],valueSpec:t,validateSpec:J.validateSpec,style:J.style,styleSpec:J.styleSpec}))}function X(J,se){const le=pn(J.value),ue=$n(J.value),Be=J.value!==null?J.value:se;if(A){if(le!==A)return[new Yt(J.key,Be,`${le} stop domain type must match previous stop domain type ${A}`)]}else A=le;if(le!=="number"&&le!=="string"&&le!=="boolean")return[new Yt(J.key,Be,"stop domain value must be a number, string, or boolean")];if(le!=="number"&&s!=="categorical"){let tt=`number expected, ${le} found`;return So(t)&&s===void 0&&(tt+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new Yt(J.key,Be,tt)]}return s!=="categorical"||le!=="number"||isFinite(ue)&&Math.floor(ue)===ue?s!=="categorical"&&le==="number"&&p!==void 0&&ue<p?[new Yt(J.key,Be,"stop domain values must appear in ascending order")]:(p=ue,s==="categorical"&&ue in _?[new Yt(J.key,Be,"stop domain values must be unique")]:(_[ue]=!0,[])):[new Yt(J.key,Be,`integer expected, found ${ue}`)]}}function Hc(a){const t=(a.expressionContext==="property"?hc:Qc)(mo(a.value),a.valueSpec);if(t.result==="error")return t.value.map((A=>new Yt(`${a.key}${A.key}`,a.value,A.message)));const s=t.value.expression||t.value._styleExpression.expression;if(a.expressionContext==="property"&&a.propertyKey==="text-font"&&!s.outputDefined())return[new Yt(a.key,a.value,`Invalid data expression for "${a.propertyKey}". Output values must be contained as literals within the expression.`)];if(a.expressionContext==="property"&&a.propertyType==="layout"&&!lA(s))return[new Yt(a.key,a.value,'"feature-state" data expressions are not supported with layout properties.')];if(a.expressionContext==="filter"&&!lA(s))return[new Yt(a.key,a.value,'"feature-state" data expressions are not supported with filters.')];if(a.expressionContext&&a.expressionContext.indexOf("cluster")===0){if(!DA(s,["zoom","feature-state"]))return[new Yt(a.key,a.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(a.expressionContext==="cluster-initial"&&!UA(s))return[new Yt(a.key,a.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function Da(a){const t=a.key,s=a.value,A=pn(s);return A!=="string"?[new Yt(t,s,`color expected, ${A} found`)]:an.parse(String(s))?[]:[new Yt(t,s,`color expected, "${s}" found`)]}function Ra(a){const t=a.key,s=a.value,A=a.valueSpec,p=[];return Array.isArray(A.values)?A.values.indexOf($n(s))===-1&&p.push(new Yt(t,s,`expected one of [${A.values.join(", ")}], ${JSON.stringify(s)} found`)):Object.keys(A.values).indexOf($n(s))===-1&&p.push(new Yt(t,s,`expected one of [${Object.keys(A.values).join(", ")}], ${JSON.stringify(s)} found`)),p}function Na(a){return QA(mo(a.value))?Hc(Zn({},a,{expressionContext:"filter",valueSpec:{value:"boolean"}})):HA(a)}function HA(a){const t=a.value,s=a.key;if(pn(t)!=="array")return[new Yt(s,t,`array expected, ${pn(t)} found`)];const A=a.styleSpec;let p,v=[];if(t.length<1)return[new Yt(s,t,"filter array must have at least 1 element")];switch(v=v.concat(Ra({key:`${s}[0]`,value:t[0],valueSpec:A.filter_operator,style:a.style,styleSpec:a.styleSpec})),$n(t[0])){case"<":case"<=":case">":case">=":t.length>=2&&$n(t[1])==="$type"&&v.push(new Yt(s,t,`"$type" cannot be use with operator "${t[0]}"`));case"==":case"!=":t.length!==3&&v.push(new Yt(s,t,`filter array for operator "${t[0]}" must have 3 elements`));case"in":case"!in":t.length>=2&&(p=pn(t[1]),p!=="string"&&v.push(new Yt(`${s}[1]`,t[1],`string expected, ${p} found`)));for(let _=2;_<t.length;_++)p=pn(t[_]),$n(t[1])==="$type"?v=v.concat(Ra({key:`${s}[${_}]`,value:t[_],valueSpec:A.geometry_type,style:a.style,styleSpec:a.styleSpec})):p!=="string"&&p!=="number"&&p!=="boolean"&&v.push(new Yt(`${s}[${_}]`,t[_],`string, number, or boolean expected, ${p} found`));break;case"any":case"all":case"none":for(let _=1;_<t.length;_++)v=v.concat(HA({key:`${s}[${_}]`,value:t[_],style:a.style,styleSpec:a.styleSpec}));break;case"has":case"!has":p=pn(t[1]),t.length!==2?v.push(new Yt(s,t,`filter array for "${t[0]}" operator must have 2 elements`)):p!=="string"&&v.push(new Yt(`${s}[1]`,t[1],`string expected, ${p} found`))}return v}function Qu(a,t){const s=a.key,A=a.validateSpec,p=a.style,v=a.styleSpec,_=a.value,B=a.objectKey,F=v[`${t}_${a.layerType}`];if(!F)return[];const U=B.match(/^(.*)-transition$/);if(t==="paint"&&U&&F[U[1]]&&F[U[1]].transition)return A({key:s,value:_,valueSpec:v.transition,style:p,styleSpec:v});const Q=a.valueSpec||F[B];if(!Q)return[new Yt(s,_,`unknown property "${B}"`)];let K;if(pn(_)==="string"&&So(Q)&&!Q.tokens&&(K=/^{([^}]+)}$/.exec(_)))return[new Yt(s,_,`"${B}" does not support interpolation syntax
Use an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(K[1])} }\`.`)];const X=[];return a.layerType==="symbol"&&B==="text-font"&&AA(mo(_))&&$n(_.type)==="identity"&&X.push(new Yt(s,_,'"text-font" does not support identity functions')),X.concat(A({key:a.key,value:_,valueSpec:Q,style:p,styleSpec:v,expressionContext:"property",propertyType:t,propertyKey:B}))}function Ol(a){return Qu(a,"paint")}function Qa(a){return Qu(a,"layout")}function li(a){let t=[];const s=a.value,A=a.key,p=a.style,v=a.styleSpec;if(pn(s)!=="object")return[new Yt(A,s,`object expected, ${pn(s)} found`)];s.type||s.ref||t.push(new Yt(A,s,'either "type" or "ref" is required'));let _=$n(s.type);const B=$n(s.ref);if(s.id){const F=$n(s.id);for(let U=0;U<a.arrayIndex;U++){const Q=p.layers[U];$n(Q.id)===F&&t.push(new Yt(A,s.id,`duplicate layer id "${s.id}", previously used at line ${Q.id.__line__}`))}}if("ref"in s){let F;["type","source","source-layer","filter","layout"].forEach((U=>{U in s&&t.push(new Yt(A,s[U],`"${U}" is prohibited for ref layers`))})),p.layers.forEach((U=>{$n(U.id)===B&&(F=U)})),F?F.ref?t.push(new Yt(A,s.ref,"ref cannot reference another ref layer")):_=$n(F.type):t.push(new Yt(A,s.ref,`ref layer "${B}" not found`))}else if(_!=="background")if(s.source){const F=p.sources&&p.sources[s.source],U=F&&$n(F.type);F?U==="vector"&&_==="raster"?t.push(new Yt(A,s.source,`layer "${s.id}" requires a raster source`)):U!=="raster-dem"&&_==="hillshade"||U!=="raster-dem"&&_==="color-relief"?t.push(new Yt(A,s.source,`layer "${s.id}" requires a raster-dem source`)):U==="raster"&&_!=="raster"?t.push(new Yt(A,s.source,`layer "${s.id}" requires a vector source`)):U!=="vector"||s["source-layer"]?U==="raster-dem"&&_!=="hillshade"&&_!=="color-relief"?t.push(new Yt(A,s.source,"raster-dem source can only be used with layer type 'hillshade' or 'color-relief'.")):_!=="line"||!s.paint||!s.paint["line-gradient"]||U==="geojson"&&F.lineMetrics||t.push(new Yt(A,s,`layer "${s.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):t.push(new Yt(A,s,`layer "${s.id}" must specify a "source-layer"`)):t.push(new Yt(A,s.source,`source "${s.source}" not found`))}else t.push(new Yt(A,s,'missing required property "source"'));return t=t.concat(co({key:A,value:s,valueSpec:v.layer,style:a.style,styleSpec:a.styleSpec,validateSpec:a.validateSpec,objectElementValidators:{"*":()=>[],type:()=>a.validateSpec({key:`${A}.type`,value:s.type,valueSpec:v.layer.type,style:a.style,styleSpec:a.styleSpec,validateSpec:a.validateSpec,object:s,objectKey:"type"}),filter:Na,layout:F=>co({layer:s,key:F.key,value:F.value,style:F.style,styleSpec:F.styleSpec,validateSpec:F.validateSpec,objectElementValidators:{"*":U=>Qa(Zn({layerType:_},U))}}),paint:F=>co({layer:s,key:F.key,value:F.value,style:F.style,styleSpec:F.styleSpec,validateSpec:F.validateSpec,objectElementValidators:{"*":U=>Ol(Zn({layerType:_},U))}})}})),t}function Xn(a){const t=a.value,s=a.key,A=pn(t);return A!=="string"?[new Yt(s,t,`string expected, ${A} found`)]:[]}const zl={promoteId:function({key:a,value:t}){if(pn(t)==="string")return Xn({key:a,value:t});{const s=[];for(const A in t)s.push(...Xn({key:`${a}.${A}`,value:t[A]}));return s}}};function Ns(a){const t=a.value,s=a.key,A=a.styleSpec,p=a.style,v=a.validateSpec;if(!t.type)return[new Yt(s,t,'"type" is required')];const _=$n(t.type);let B;switch(_){case"vector":case"raster":return B=co({key:s,value:t,valueSpec:A[`source_${_.replace("-","_")}`],style:a.style,styleSpec:A,objectElementValidators:zl,validateSpec:v}),B;case"raster-dem":return B=(function(F){var U;const Q=(U=F.sourceName)!==null&&U!==void 0?U:"",K=F.value,X=F.styleSpec,J=X.source_raster_dem,se=F.style;let le=[];const ue=pn(K);if(K===void 0)return le;if(ue!=="object")return le.push(new Yt("source_raster_dem",K,`object expected, ${ue} found`)),le;const Be=$n(K.encoding)==="custom",tt=["redFactor","greenFactor","blueFactor","baseShift"],Ee=F.value.encoding?`"${F.value.encoding}"`:"Default";for(const Le in K)!Be&&tt.includes(Le)?le.push(new Yt(Le,K[Le],`In "${Q}": "${Le}" is only valid when "encoding" is set to "custom". ${Ee} encoding found`)):J[Le]?le=le.concat(F.validateSpec({key:Le,value:K[Le],valueSpec:J[Le],validateSpec:F.validateSpec,style:se,styleSpec:X})):le.push(new Yt(Le,K[Le],`unknown property "${Le}"`));return le})({sourceName:s,value:t,style:a.style,styleSpec:A,validateSpec:v}),B;case"geojson":if(B=co({key:s,value:t,valueSpec:A.source_geojson,style:p,styleSpec:A,validateSpec:v,objectElementValidators:zl}),t.cluster)for(const F in t.clusterProperties){const[U,Q]=t.clusterProperties[F],K=typeof U=="string"?[U,["accumulated"],["get",F]]:U;B.push(...Hc({key:`${s}.${F}.map`,value:Q,expressionContext:"cluster-map"})),B.push(...Hc({key:`${s}.${F}.reduce`,value:K,expressionContext:"cluster-reduce"}))}return B;case"video":return co({key:s,value:t,valueSpec:A.source_video,style:p,validateSpec:v,styleSpec:A});case"image":return co({key:s,value:t,valueSpec:A.source_image,style:p,validateSpec:v,styleSpec:A});case"canvas":return[new Yt(s,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return Ra({key:`${s}.type`,value:t.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]}})}}function Xs(a){const t=a.value,s=a.styleSpec,A=s.light,p=a.style;let v=[];const _=pn(t);if(t===void 0)return v;if(_!=="object")return v=v.concat([new Yt("light",t,`object expected, ${_} found`)]),v;for(const B in t){const F=B.match(/^(.*)-transition$/);v=v.concat(F&&A[F[1]]&&A[F[1]].transition?a.validateSpec({key:B,value:t[B],valueSpec:s.transition,validateSpec:a.validateSpec,style:p,styleSpec:s}):A[B]?a.validateSpec({key:B,value:t[B],valueSpec:A[B],validateSpec:a.validateSpec,style:p,styleSpec:s}):[new Yt(B,t[B],`unknown property "${B}"`)])}return v}function jc(a){const t=a.value,s=a.styleSpec,A=s.sky,p=a.style,v=pn(t);if(t===void 0)return[];if(v!=="object")return[new Yt("sky",t,`object expected, ${v} found`)];let _=[];for(const B in t)_=_.concat(A[B]?a.validateSpec({key:B,value:t[B],valueSpec:A[B],style:p,styleSpec:s}):[new Yt(B,t[B],`unknown property "${B}"`)]);return _}function Vc(a){const t=a.value,s=a.styleSpec,A=s.terrain,p=a.style;let v=[];const _=pn(t);if(t===void 0)return v;if(_!=="object")return v=v.concat([new Yt("terrain",t,`object expected, ${_} found`)]),v;for(const B in t)v=v.concat(A[B]?a.validateSpec({key:B,value:t[B],valueSpec:A[B],validateSpec:a.validateSpec,style:p,styleSpec:s}):[new Yt(B,t[B],`unknown property "${B}"`)]);return v}function go(a){let t=[];const s=a.value,A=a.key;if(Array.isArray(s)){const p=[],v=[];for(const _ in s)s[_].id&&p.includes(s[_].id)&&t.push(new Yt(A,s,`all the sprites' ids must be unique, but ${s[_].id} is duplicated`)),p.push(s[_].id),s[_].url&&v.includes(s[_].url)&&t.push(new Yt(A,s,`all the sprites' URLs must be unique, but ${s[_].url} is duplicated`)),v.push(s[_].url),t=t.concat(co({key:`${A}[${_}]`,value:s[_],valueSpec:{id:{type:"string",required:!0},url:{type:"string",required:!0}},validateSpec:a.validateSpec}));return t}return Xn({key:A,value:s})}function du(a){return t=a.value,t&&t.constructor===Object?[]:[new Yt(a.key,a.value,`object expected, ${pn(a.value)} found`)];var t}const Ou={"*":()=>[],array:Rs,boolean:function(a){const t=a.value,s=a.key,A=pn(t);return A!=="boolean"?[new Yt(s,t,`boolean expected, ${A} found`)]:[]},number:Zs,color:Da,constants:va,enum:Ra,filter:Na,function:Nu,layer:li,object:co,source:Ns,light:Xs,sky:jc,terrain:Vc,projection:function(a){const t=a.value,s=a.styleSpec,A=s.projection,p=a.style,v=pn(t);if(t===void 0)return[];if(v!=="object")return[new Yt("projection",t,`object expected, ${v} found`)];let _=[];for(const B in t)_=_.concat(A[B]?a.validateSpec({key:B,value:t[B],valueSpec:A[B],style:p,styleSpec:s}):[new Yt(B,t[B],`unknown property "${B}"`)]);return _},projectionDefinition:function(a){const t=a.key;let s=a.value;s=s instanceof String?s.valueOf():s;const A=pn(s);return A!=="array"||(function(p){return Array.isArray(p)&&p.length===3&&typeof p[0]=="string"&&typeof p[1]=="string"&&typeof p[2]=="number"})(s)||(function(p){return!!["interpolate","step","literal"].includes(p[0])})(s)?["array","string"].includes(A)?[]:[new Yt(t,s,`projection expected, invalid type "${A}" found`)]:[new Yt(t,s,`projection expected, invalid array ${JSON.stringify(s)} found`)]},string:Xn,formatted:function(a){return Xn(a).length===0?[]:Hc(a)},resolvedImage:function(a){return Xn(a).length===0?[]:Hc(a)},padding:function(a){const t=a.key,s=a.value;if(pn(s)==="array"){if(s.length<1||s.length>4)return[new Yt(t,s,`padding requires 1 to 4 values; ${s.length} values found`)];const A={type:"number"};let p=[];for(let v=0;v<s.length;v++)p=p.concat(a.validateSpec({key:`${t}[${v}]`,value:s[v],validateSpec:a.validateSpec,valueSpec:A}));return p}return Zs({key:t,value:s,valueSpec:{}})},numberArray:function(a){const t=a.key,s=a.value;if(pn(s)==="array"){const A={type:"number"};if(s.length<1)return[new Yt(t,s,"array length at least 1 expected, length 0 found")];let p=[];for(let v=0;v<s.length;v++)p=p.concat(a.validateSpec({key:`${t}[${v}]`,value:s[v],validateSpec:a.validateSpec,valueSpec:A}));return p}return Zs({key:t,value:s,valueSpec:{}})},colorArray:function(a){const t=a.key,s=a.value;if(pn(s)==="array"){if(s.length<1)return[new Yt(t,s,"array length at least 1 expected, length 0 found")];let A=[];for(let p=0;p<s.length;p++)A=A.concat(Da({key:`${t}[${p}]`,value:s[p]}));return A}return Da({key:t,value:s})},variableAnchorOffsetCollection:function(a){const t=a.key,s=a.value,A=pn(s),p=a.styleSpec;if(A!=="array"||s.length<1||s.length%2!=0)return[new Yt(t,s,"variableAnchorOffsetCollection requires a non-empty array of even length")];let v=[];for(let _=0;_<s.length;_+=2)v=v.concat(Ra({key:`${t}[${_}]`,value:s[_],valueSpec:p.layout_symbol["text-anchor"]})),v=v.concat(Rs({key:`${t}[${_+1}]`,value:s[_+1],valueSpec:{length:2,value:"number"},validateSpec:a.validateSpec,style:a.style,styleSpec:p}));return v},sprite:go,state:du};function fA(a){const t=a.value,s=a.valueSpec,A=a.styleSpec;return a.validateSpec=fA,s.expression&&AA($n(t))?Nu(a):s.expression&&Ql(mo(t))?Hc(a):s.type&&Ou[s.type]?Ou[s.type](a):co(Zn({},a,{valueSpec:s.type?A[s.type]:s}))}function Oa(a){const t=a.value,s=a.key,A=Xn(a);return A.length||(t.indexOf("{fontstack}")===-1&&A.push(new Yt(s,t,'"glyphs" url must include a "{fontstack}" token')),t.indexOf("{range}")===-1&&A.push(new Yt(s,t,'"glyphs" url must include a "{range}" token'))),A}function _a(a,t=mt){let s=[];return s=s.concat(fA({key:"",value:a,valueSpec:t.$root,styleSpec:t,style:a,validateSpec:fA,objectElementValidators:{glyphs:Oa,"*":()=>[]}})),a.constants&&(s=s.concat(va({key:"constants",value:a.constants}))),jA(s)}function Qs(a){return function(t){return a(Object.assign({},t,{validateSpec:fA}))}}function jA(a){return[].concat(a).sort(((t,s)=>t.line-s.line))}function T(a){return function(...t){return jA(a.apply(this,t))}}_a.source=T(Qs(Ns)),_a.sprite=T(Qs(go)),_a.glyphs=T(Qs(Oa)),_a.light=T(Qs(Xs)),_a.sky=T(Qs(jc)),_a.terrain=T(Qs(Vc)),_a.state=T(Qs(du)),_a.layer=T(Qs(li)),_a.filter=T(Qs(Na)),_a.paintProperty=T(Qs(Ol)),_a.layoutProperty=T(Qs(Qa));const R=mt,$=_a,te=$.light,me=$.sky,we=$.paintProperty,Ce=$.layoutProperty;function Te(a,t){let s=!1;if(t&&t.length)for(const A of t)a.fire(new rn(new Error(A.message))),s=!0;return s}class De{constructor(t,s,A){const p=this.cells=[];if(t instanceof ArrayBuffer){this.arrayBuffer=t;const _=new Int32Array(this.arrayBuffer);t=_[0],this.d=(s=_[1])+2*(A=_[2]);for(let F=0;F<this.d*this.d;F++){const U=_[3+F],Q=_[3+F+1];p.push(U===Q?null:_.subarray(U,Q))}const B=_[3+p.length+1];this.keys=_.subarray(_[3+p.length],B),this.bboxes=_.subarray(B),this.insert=this._insertReadonly}else{this.d=s+2*A;for(let _=0;_<this.d*this.d;_++)p.push([]);this.keys=[],this.bboxes=[]}this.n=s,this.extent=t,this.padding=A,this.scale=s/t,this.uid=0;const v=A/s*t;this.min=-v,this.max=t+v}insert(t,s,A,p,v){this._forEachCell(s,A,p,v,this._insertCell,this.uid++,void 0,void 0),this.keys.push(t),this.bboxes.push(s),this.bboxes.push(A),this.bboxes.push(p),this.bboxes.push(v)}_insertReadonly(){throw new Error("Cannot insert into a GridIndex created from an ArrayBuffer.")}_insertCell(t,s,A,p,v,_){this.cells[v].push(_)}query(t,s,A,p,v){const _=this.min,B=this.max;if(t<=_&&s<=_&&B<=A&&B<=p&&!v)return Array.prototype.slice.call(this.keys);{const F=[];return this._forEachCell(t,s,A,p,this._queryCell,F,{},v),F}}_queryCell(t,s,A,p,v,_,B,F){const U=this.cells[v];if(U!==null){const Q=this.keys,K=this.bboxes;for(let X=0;X<U.length;X++){const J=U[X];if(B[J]===void 0){const se=4*J;(F?F(K[se+0],K[se+1],K[se+2],K[se+3]):t<=K[se+2]&&s<=K[se+3]&&A>=K[se+0]&&p>=K[se+1])?(B[J]=!0,_.push(Q[J])):B[J]=!1}}}}_forEachCell(t,s,A,p,v,_,B,F){const U=this._convertToCellCoord(t),Q=this._convertToCellCoord(s),K=this._convertToCellCoord(A),X=this._convertToCellCoord(p);for(let J=U;J<=K;J++)for(let se=Q;se<=X;se++){const le=this.d*se+J;if((!F||F(this._convertFromCellCoord(J),this._convertFromCellCoord(se),this._convertFromCellCoord(J+1),this._convertFromCellCoord(se+1)))&&v.call(this,t,s,A,p,le,_,B,F))return}}_convertFromCellCoord(t){return(t-this.padding)/this.scale}_convertToCellCoord(t){return Math.max(0,Math.min(this.d-1,Math.floor(t*this.scale)+this.padding))}toArrayBuffer(){if(this.arrayBuffer)return this.arrayBuffer;const t=this.cells,s=3+this.cells.length+1+1;let A=0;for(let _=0;_<this.cells.length;_++)A+=this.cells[_].length;const p=new Int32Array(s+A+this.keys.length+this.bboxes.length);p[0]=this.extent,p[1]=this.n,p[2]=this.padding;let v=s;for(let _=0;_<t.length;_++){const B=t[_];p[3+_]=v,p.set(B,v),v+=B.length}return p[3+t.length]=v,p.set(this.keys,v),v+=this.keys.length,p[3+t.length+1]=v,p.set(this.bboxes,v),v+=this.bboxes.length,p.buffer}static serialize(t,s){const A=t.toArrayBuffer();return s&&s.push(A),{buffer:A}}static deserialize(t){return new De(t.buffer)}}const Ke={};function $e(a,t,s={}){if(Ke[a])throw new Error(`${a} is already registered.`);Object.defineProperty(t,"_classRegistryKey",{value:a,writeable:!1}),Ke[a]={klass:t,omit:s.omit||[],shallow:s.shallow||[]}}$e("Object",Object),$e("Set",Set),$e("TransferableGridIndex",De),$e("Color",an),$e("Error",Error),$e("AJAXError",at),$e("ResolvedImage",uo),$e("StylePropertyFunction",Au),$e("StyleExpression",uc,{omit:["_evaluator"]}),$e("ZoomDependentExpression",NA),$e("ZoomConstantExpression",Oc),$e("CompoundExpression",fo,{omit:["_evaluate"]});for(const a in kc)kc[a]._classRegistryKey||$e(`Expression_${a}`,kc[a]);function kt(a){return a&&typeof ArrayBuffer<"u"&&(a instanceof ArrayBuffer||a.constructor&&a.constructor.name==="ArrayBuffer")}function Xe(a){return a.$name||a.constructor._classRegistryKey}function Bt(a){return!(function(t){if(t===null||typeof t!="object")return!1;const s=Xe(t);return!(!s||s==="Object")})(a)&&(a==null||typeof a=="boolean"||typeof a=="number"||typeof a=="string"||a instanceof Boolean||a instanceof Number||a instanceof String||a instanceof Date||a instanceof RegExp||a instanceof Blob||a instanceof Error||kt(a)||$r(a)||ArrayBuffer.isView(a)||a instanceof ImageData)}function Tt(a,t){if(Bt(a))return(kt(a)||$r(a))&&t&&t.push(a),ArrayBuffer.isView(a)&&t&&t.push(a.buffer),a instanceof ImageData&&t&&t.push(a.data.buffer),a;if(Array.isArray(a)){const v=[];for(const _ of a)v.push(Tt(_,t));return v}if(typeof a!="object")throw new Error("can't serialize object of type "+typeof a);const s=Xe(a);if(!s)throw new Error(`can't serialize object of unregistered class ${a.constructor.name}`);if(!Ke[s])throw new Error(`${s} is not registered.`);const{klass:A}=Ke[s],p=A.serialize?A.serialize(a,t):{};if(A.serialize){if(t&&p===t[t.length-1])throw new Error("statically serialized object won't survive transfer of $name property")}else{for(const v in a){if(!a.hasOwnProperty(v)||Ke[s].omit.indexOf(v)>=0)continue;const _=a[v];p[v]=Ke[s].shallow.indexOf(v)>=0?_:Tt(_,t)}a instanceof Error&&(p.message=a.message)}if(p.$name)throw new Error("$name property is reserved for worker serialization logic.");return s!=="Object"&&(p.$name=s),p}function Zt(a){if(Bt(a))return a;if(Array.isArray(a))return a.map(Zt);if(typeof a!="object")throw new Error("can't deserialize object of type "+typeof a);const t=Xe(a)||"Object";if(!Ke[t])throw new Error(`can't deserialize unregistered class ${t}`);const{klass:s}=Ke[t];if(!s)throw new Error(`can't deserialize unregistered class ${t}`);if(s.deserialize)return s.deserialize(a);const A=Object.create(s.prototype);for(const p of Object.keys(a)){if(p==="$name")continue;const v=a[p];A[p]=Ke[t].shallow.indexOf(p)>=0?v:Zt(v)}return A}class Ut{constructor(){this.first=!0}update(t,s){const A=Math.floor(t);return this.first?(this.first=!1,this.lastIntegerZoom=A,this.lastIntegerZoomTime=0,this.lastZoom=t,this.lastFloorZoom=A,!0):(this.lastFloorZoom>A?(this.lastIntegerZoom=A+1,this.lastIntegerZoomTime=s):this.lastFloorZoom<A&&(this.lastIntegerZoom=A,this.lastIntegerZoomTime=s),t!==this.lastZoom&&(this.lastZoom=t,this.lastFloorZoom=A,!0))}}function Kt(a){return/[\u02EA\u02EB\u2E80-\u2FDF\u2FF0-\u303F\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FD-\u30FF\u3105-\u312F\u31A0-\u4DBF\u4E00-\uA48C\uA490-\uA4C6\uF900-\uFA6D\uFA70-\uFAD9\uFE10-\uFE1F\uFE30-\uFE4F\uFF00-\uFFEF]|\uD81B[\uDFE0-\uDFFF]|[\uD81C-\uD822\uD840-\uD868\uD86A-\uD86D\uD86F-\uD872\uD874-\uD879\uD880-\uD883\uD885-\uD88C][\uDC00-\uDFFF]|\uD823[\uDC00-\uDCD5\uDCFF-\uDD1E\uDD80-\uDDF2]|\uD82B[\uDFF0-\uDFFF]|\uD82C[\uDC00-\uDEFB]|\uD83C[\uDE00-\uDEFF]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEAD\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0\uDFF0-\uDFFF]|\uD87B[\uDC00-\uDE5D]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A\uDF50-\uDFFF]|\uD88D[\uDC00-\uDC79]/gim.test(String.fromCodePoint(a))}function $t(a){return/[\u02EA\u02EB\u1100-\u11FF\u1400-\u167F\u18B0-\u18F5\u2E80-\u2E99\u2E9B-\u2EF3\u2F00-\u2FD5\u2FF0-\u3007\u3012\u3013\u3020-\u302F\u3031-\u303F\u3041-\u3096\u309D-\u30FB\u30FD-\u30FF\u3105-\u312F\u3131-\u318E\u3190-\uA48C\uA490-\uA4C6\uA960-\uA97C\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFE10-\uFE1F\uFE30-\uFE48\uFE50-\uFE57\uFE5F-\uFE62\uFE67-\uFE6F\uFF00-\uFF07\uFF0A-\uFF0C\uFF0E-\uFF19\uFF1F-\uFF3A\uFF3C\uFF3E\uFF40-\uFF5A\uFFE0-\uFFE2\uFFE4-\uFFE7]|\uD802[\uDD80-\uDD9F]|\uD805[\uDD80-\uDDFF]|\uD806[\uDE00-\uDEBF]|\uD811[\uDC00-\uDE7F]|\uD81B[\uDFE0-\uDFE4\uDFF0-\uDFF6]|[\uD81C-\uD822\uD83D\uD840-\uD868\uD86A-\uD86D\uD86F-\uD872\uD874-\uD879\uD880-\uD883\uD885-\uD88C][\uDC00-\uDFFF]|\uD823[\uDC00-\uDCD5\uDCFF-\uDD1E\uDD80-\uDDF2]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD30-\uDEFB]|\uD833[\uDEC0-\uDFCF]|\uD834[\uDC00-\uDDFF\uDEE0-\uDF7F]|\uD836[\uDC00-\uDEAF]|\uD83C[\uDC00-\uDE00\uDF00-\uDFFF]|\uD83E[\uDD00-\uDEFF]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEAD\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0\uDFF0-\uDFFF]|\uD87B[\uDC00-\uDE5D]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A\uDF50-\uDFFF]|\uD88D[\uDC00-\uDC79]/gim.test(String.fromCodePoint(a))}function tr(a){return/\s/u.test(String.fromCodePoint(a))}function er(a){for(const t of a)if($t(t.codePointAt(0)))return!0;return!1}function sn(a){for(const t of a)if(!Zr(t.codePointAt(0)))return!1;return!0}function zr(a){const t=a.map((s=>{try{return new RegExp(`\\p{sc=${s}}`,"u").source}catch{return null}})).filter((s=>s));return new RegExp(t.join("|"),"u")}const Cn=zr(["Arab","Dupl","Mong","Ougr","Syrc"]);function Zr(a){return!Cn.test(String.fromCodePoint(a))}function Qn(a){return!($t(a)||(t=a,/[\xA7\xA9\xAE\xB1\xBC-\xBE\xD7\xF7\u2016\u2020\u2021\u2030\u2031\u203B\u203C\u2042\u2047-\u2049\u2051\u2100-\u218F\u221E\u2234\u2235\u2300-\u2307\u230C-\u231F\u2324-\u2328\u232B\u237D-\u239A\u23BE-\u23CD\u23CF\u23D1-\u23DB\u23E2-\u2422\u2424-\u24FF\u25A0-\u2619\u2620-\u2767\u2776-\u2793\u2B12-\u2B2F\u2B50-\u2B59\u2BB8-\u2BEB\u3000-\u303F\u30A0-\u30FF\uE000-\uF8FF\uFE30-\uFE6F\uFF00-\uFFEF\uFFFC\uFFFD]|[\uDB80-\uDBFF][\uDC00-\uDFFF]/gim.test(String.fromCodePoint(t))));var t}const Ni=zr(["Adlm","Arab","Armi","Avst","Chrs","Cprt","Egyp","Elym","Gara","Hatr","Hebr","Hung","Khar","Lydi","Mand","Mani","Mend","Merc","Mero","Narb","Nbat","Nkoo","Orkh","Palm","Phli","Phlp","Phnx","Prti","Rohg","Samr","Sarb","Sogo","Syrc","Thaa","Todr","Yezi"]);function Sn(a){return Ni.test(String.fromCodePoint(a))}function Hr(a,t){return!(!t&&Sn(a)||/[\u0900-\u0DFF\u0F00-\u109F\u1780-\u17FF]/gim.test(String.fromCodePoint(a)))}function Fr(a){for(const t of a)if(Sn(t.codePointAt(0)))return!0;return!1}const pi=new class{constructor(){this.TIMEOUT=5e3,this.applyArabicShaping=null,this.processBidirectionalText=null,this.processStyledBidirectionalText=null,this.pluginStatus="unavailable",this.pluginURL=null,this.loadScriptResolve=()=>{}}setState(a){this.pluginStatus=a.pluginStatus,this.pluginURL=a.pluginURL}getState(){return{pluginStatus:this.pluginStatus,pluginURL:this.pluginURL}}setMethods(a){if(pi.isParsed())throw new Error("RTL text plugin already registered.");this.applyArabicShaping=a.applyArabicShaping,this.processBidirectionalText=a.processBidirectionalText,this.processStyledBidirectionalText=a.processStyledBidirectionalText,this.loadScriptResolve()}isParsed(){return this.applyArabicShaping!=null&&this.processBidirectionalText!=null&&this.processStyledBidirectionalText!=null}getRTLTextPluginStatus(){return this.pluginStatus}syncState(a,t){return o(this,void 0,void 0,(function*(){if(this.isParsed())return this.getState();if(a.pluginStatus!=="loading")return this.setState(a),a;const s=a.pluginURL,A=new Promise((v=>{this.loadScriptResolve=v}));t(s);const p=new Promise((v=>setTimeout((()=>v()),this.TIMEOUT)));if(yield Promise.race([A,p]),this.isParsed()){const v={pluginStatus:"loaded",pluginURL:s};return this.setState(v),v}throw this.setState({pluginStatus:"error",pluginURL:""}),new Error(`RTL Text Plugin failed to import scripts from ${s}`)}))}};class Mr{constructor(t,s){this.isSupportedScript=zn,this.zoom=t,s?(this.now=s.now||0,this.fadeDuration=s.fadeDuration||0,this.zoomHistory=s.zoomHistory||new Ut,this.transition=s.transition||{}):(this.now=0,this.fadeDuration=0,this.zoomHistory=new Ut,this.transition={})}crossFadingFactor(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){const t=this.zoom,s=t-Math.floor(t),A=this.crossFadingFactor();return t>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:s+(1-s)*A}:{fromScale:.5,toScale:1,t:1-(1-A)*s}}}function zn(a){return(function(t,s){for(const A of t)if(!Hr(A.codePointAt(0),s))return!1;return!0})(a,pi.getRTLTextPluginStatus()==="loaded")}const mi="-transition";class as{constructor(t,s,A){this.property=t,this.value=s,this.expression=(function(p,v,_){if(AA(p))return new Au(p,v);if(Ql(p)){const B=hc(p,v,_);if(B.result==="error")throw new Error(B.value.map((F=>`${F.key}: ${F.message}`)).join(", "));return B.value}{let B=p;return v.type==="color"&&typeof p=="string"?B=an.parse(p):v.type!=="padding"||typeof p!="number"&&!Array.isArray(p)?v.type!=="numberArray"||typeof p!="number"&&!Array.isArray(p)?v.type!=="colorArray"||typeof p!="string"&&!Array.isArray(p)?v.type==="variableAnchorOffsetCollection"&&Array.isArray(p)?B=Wi.parse(p):v.type==="projectionDefinition"&&typeof p=="string"&&(B=ws.parse(p)):B=cn.parse(p):B=Jn.parse(p):B=qr.parse(p),{globalStateRefs:new Set,_globalState:null,kind:"constant",evaluate:()=>B}}})(s===void 0?t.specification.default:s,t.specification,A)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}getGlobalStateRefs(){return this.expression.globalStateRefs||new Set}possiblyEvaluate(t,s,A){return this.property.possiblyEvaluate(this,t,s,A)}}class ls{constructor(t,s){this.property=t,this.value=new as(t,void 0,s)}transitioned(t,s){return new Bs(this.property,this.value,s,vt({},t.transition,this.transition),t.now)}untransitioned(){return new Bs(this.property,this.value,null,{},0)}}class Qi{constructor(t,s){this._properties=t,this._values=Object.create(t.defaultTransitionablePropertyValues),this._globalState=s}getValue(t){return ar(this._values[t].value.value)}setValue(t,s){Object.prototype.hasOwnProperty.call(this._values,t)||(this._values[t]=new ls(this._values[t].property,this._globalState)),this._values[t].value=new as(this._values[t].property,s===null?void 0:ar(s),this._globalState)}getTransition(t){return ar(this._values[t].transition)}setTransition(t,s){Object.prototype.hasOwnProperty.call(this._values,t)||(this._values[t]=new ls(this._values[t].property,this._globalState)),this._values[t].transition=ar(s)||void 0}serialize(){const t={};for(const s of Object.keys(this._values)){const A=this.getValue(s);A!==void 0&&(t[s]=A);const p=this.getTransition(s);p!==void 0&&(t[`${s}${mi}`]=p)}return t}transitioned(t,s){const A=new Cs(this._properties);for(const p of Object.keys(this._values))A._values[p]=this._values[p].transitioned(t,s._values[p]);return A}untransitioned(){const t=new Cs(this._properties);for(const s of Object.keys(this._values))t._values[s]=this._values[s].untransitioned();return t}}class Bs{constructor(t,s,A,p,v){this.property=t,this.value=s,this.begin=v+p.delay||0,this.end=this.begin+p.duration||0,t.specification.transition&&(p.delay||p.duration)&&(this.prior=A)}possiblyEvaluate(t,s,A){const p=t.now||0,v=this.value.possiblyEvaluate(t,s,A),_=this.prior;if(_){if(p>this.end)return this.prior=null,v;if(this.value.isDataDriven())return this.prior=null,v;if(p<this.begin)return _.possiblyEvaluate(t,s,A);{const B=(p-this.begin)/(this.end-this.begin);return this.property.interpolate(_.possiblyEvaluate(t,s,A),v,Se(B))}}return v}}class Cs{constructor(t){this._properties=t,this._values=Object.create(t.defaultTransitioningPropertyValues)}possiblyEvaluate(t,s,A){const p=new Yn(this._properties);for(const v of Object.keys(this._values))p._values[v]=this._values[v].possiblyEvaluate(t,s,A);return p}hasTransition(){for(const t of Object.keys(this._values))if(this._values[t].prior)return!0;return!1}}class Oi{constructor(t,s){this._properties=t,this._values=Object.create(t.defaultPropertyValues),this._globalState=s}hasValue(t){return this._values[t].value!==void 0}getValue(t){return ar(this._values[t].value)}setValue(t,s){this._values[t]=new as(this._values[t].property,s===null?void 0:ar(s),this._globalState)}serialize(){const t={};for(const s of Object.keys(this._values)){const A=this.getValue(s);A!==void 0&&(t[s]=A)}return t}possiblyEvaluate(t,s,A){const p=new Yn(this._properties);for(const v of Object.keys(this._values))p._values[v]=this._values[v].possiblyEvaluate(t,s,A);return p}}class Fn{constructor(t,s,A){this.property=t,this.value=s,this.parameters=A}isConstant(){return this.value.kind==="constant"}constantOr(t){return this.value.kind==="constant"?this.value.value:t}evaluate(t,s,A,p){return this.property.evaluate(this.value,this.parameters,t,s,A,p)}}class Yn{constructor(t){this._properties=t,this._values=Object.create(t.defaultPossiblyEvaluatedValues)}get(t){return this._values[t]}}class gr{constructor(t){this.specification=t}possiblyEvaluate(t,s){if(t.isDataDriven())throw new Error("Value should not be data driven");return t.expression.evaluate(s)}interpolate(t,s,A){const p=br[this.specification.type];return p?p(t,s,A):t}}class xr{constructor(t,s){this.specification=t,this.overrides=s}possiblyEvaluate(t,s,A,p){return new Fn(this,t.expression.kind==="constant"||t.expression.kind==="camera"?{kind:"constant",value:t.expression.evaluate(s,null,{},A,p)}:t.expression,s)}interpolate(t,s,A){if(t.value.kind!=="constant"||s.value.kind!=="constant")return t;if(t.value.value===void 0||s.value.value===void 0)return new Fn(this,{kind:"constant",value:void 0},t.parameters);const p=br[this.specification.type];if(p){const v=p(t.value.value,s.value.value,A);return new Fn(this,{kind:"constant",value:v},t.parameters)}return t}evaluate(t,s,A,p,v,_){return t.kind==="constant"?t.value:t.evaluate(s,A,p,v,_)}}class Ti extends xr{possiblyEvaluate(t,s,A,p){if(t.value===void 0)return new Fn(this,{kind:"constant",value:void 0},s);if(t.expression.kind==="constant"){const v=t.expression.evaluate(s,null,{},A,p),_=t.property.specification.type==="resolvedImage"&&typeof v!="string"?v.name:v,B=this._calculate(_,_,_,s);return new Fn(this,{kind:"constant",value:B},s)}if(t.expression.kind==="camera"){const v=this._calculate(t.expression.evaluate({zoom:s.zoom-1}),t.expression.evaluate({zoom:s.zoom}),t.expression.evaluate({zoom:s.zoom+1}),s);return new Fn(this,{kind:"constant",value:v},s)}return new Fn(this,t.expression,s)}evaluate(t,s,A,p,v,_){if(t.kind==="source"){const B=t.evaluate(s,A,p,v,_);return this._calculate(B,B,B,s)}return t.kind==="composite"?this._calculate(t.evaluate({zoom:Math.floor(s.zoom)-1},A,p),t.evaluate({zoom:Math.floor(s.zoom)},A,p),t.evaluate({zoom:Math.floor(s.zoom)+1},A,p),s):t.value}_calculate(t,s,A,p){return p.zoom>p.zoomHistory.lastIntegerZoom?{from:t,to:s}:{from:A,to:s}}interpolate(t){return t}}class Vi{constructor(t){this.specification=t}possiblyEvaluate(t,s,A,p){if(t.value!==void 0){if(t.expression.kind==="constant"){const v=t.expression.evaluate(s,null,{},A,p);return this._calculate(v,v,v,s)}return this._calculate(t.expression.evaluate(new Mr(Math.floor(s.zoom-1),s)),t.expression.evaluate(new Mr(Math.floor(s.zoom),s)),t.expression.evaluate(new Mr(Math.floor(s.zoom+1),s)),s)}}_calculate(t,s,A,p){return p.zoom>p.zoomHistory.lastIntegerZoom?{from:t,to:s}:{from:A,to:s}}interpolate(t){return t}}class ei{constructor(t){this.specification=t}possiblyEvaluate(t,s,A,p){return!!t.expression.evaluate(s,null,{},A,p)}interpolate(){return!1}}class ci{constructor(t){this.properties=t,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(const s in t){const A=t[s];A.specification.overridable&&this.overridableProperties.push(s);const p=this.defaultPropertyValues[s]=new as(A,void 0,void 0),v=this.defaultTransitionablePropertyValues[s]=new ls(A,void 0);this.defaultTransitioningPropertyValues[s]=v.untransitioned(),this.defaultPossiblyEvaluatedValues[s]=p.possiblyEvaluate({})}}}$e("DataDrivenProperty",xr),$e("DataConstantProperty",gr),$e("CrossFadedDataDrivenProperty",Ti),$e("CrossFadedProperty",Vi),$e("ColorRampProperty",ei);class Rn extends Tr{constructor(t,s,A){if(super(),this.id=t.id,this.type=t.type,this._globalState=A,this._featureFilter={filter:()=>!0,needGeometry:!1,getGlobalStateRefs:()=>new Set},t.type!=="custom"&&(this.metadata=t.metadata,this.minzoom=t.minzoom,this.maxzoom=t.maxzoom,t.type!=="background"&&(this.source=t.source,this.sourceLayer=t["source-layer"],this.filter=t.filter,this._featureFilter=dc(t.filter,A)),s.layout&&(this._unevaluatedLayout=new Oi(s.layout,A)),s.paint)){this._transitionablePaint=new Qi(s.paint,A);for(const p in t.paint)this.setPaintProperty(p,t.paint[p],{validate:!1});for(const p in t.layout)this.setLayoutProperty(p,t.layout[p],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new Yn(s.paint)}}setFilter(t){this.filter=t,this._featureFilter=dc(t,this._globalState)}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(t){return t==="visibility"?this.visibility:this._unevaluatedLayout.getValue(t)}getLayoutAffectingGlobalStateRefs(){const t=new Set;if(this._unevaluatedLayout)for(const s in this._unevaluatedLayout._values){const A=this._unevaluatedLayout._values[s];for(const p of A.getGlobalStateRefs())t.add(p)}for(const s of this._featureFilter.getGlobalStateRefs())t.add(s);return t}getPaintAffectingGlobalStateRefs(){var t;const s=new globalThis.Map;if(this._transitionablePaint)for(const A in this._transitionablePaint._values){const p=this._transitionablePaint._values[A].value;for(const v of p.getGlobalStateRefs()){const _=(t=s.get(v))!==null&&t!==void 0?t:[];_.push({name:A,value:p.value}),s.set(v,_)}}return s}setLayoutProperty(t,s,A={}){s!=null&&this._validate(Ce,`layers.${this.id}.layout.${t}`,t,s,A)||(t!=="visibility"?this._unevaluatedLayout.setValue(t,s):this.visibility=s)}getPaintProperty(t){return t.endsWith(mi)?this._transitionablePaint.getTransition(t.slice(0,-11)):this._transitionablePaint.getValue(t)}setPaintProperty(t,s,A={}){if(s!=null&&this._validate(we,`layers.${this.id}.paint.${t}`,t,s,A))return!1;if(t.endsWith(mi))return this._transitionablePaint.setTransition(t.slice(0,-11),s||void 0),!1;{const p=this._transitionablePaint._values[t],v=p.property.specification["property-type"]==="cross-faded-data-driven",_=p.value.isDataDriven(),B=p.value;this._transitionablePaint.setValue(t,s),this._handleSpecialPaintPropertyUpdate(t);const F=this._transitionablePaint._values[t].value;return F.isDataDriven()||_||v||this._handleOverridablePaintPropertyUpdate(t,B,F)}}_handleSpecialPaintPropertyUpdate(t){}_handleOverridablePaintPropertyUpdate(t,s,A){return!1}isHidden(t,s=!1){return!!(this.minzoom&&t<(s?Math.floor(this.minzoom):this.minzoom))||!!(this.maxzoom&&t>=this.maxzoom)||this.visibility==="none"}updateTransitions(t){this._transitioningPaint=this._transitionablePaint.transitioned(t,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(t,s){t.getCrossfadeParameters&&(this._crossfadeParameters=t.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(t,void 0,s)),this.paint=this._transitioningPaint.possiblyEvaluate(t,void 0,s)}serialize(){const t={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(t.layout=t.layout||{},t.layout.visibility=this.visibility),Wt(t,((s,A)=>!(s===void 0||A==="layout"&&!Object.keys(s).length||A==="paint"&&!Object.keys(s).length)))}_validate(t,s,A,p,v={}){return(!v||v.validate!==!1)&&Te(this,t.call($,{key:s,layerType:this.type,objectKey:A,value:p,styleSpec:mt,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const t in this.paint._values){const s=this.paint.get(t);if(s instanceof Fn&&So(s.property.specification)&&(s.value.kind==="source"||s.value.kind==="composite")&&s.value.isStateDependent)return!0}return!1}}let wi;var Es={get paint(){return wi=wi||new ci({"raster-opacity":new gr(mt.paint_raster["raster-opacity"]),"raster-hue-rotate":new gr(mt.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new gr(mt.paint_raster["raster-brightness-min"]),"raster-brightness-max":new gr(mt.paint_raster["raster-brightness-max"]),"raster-saturation":new gr(mt.paint_raster["raster-saturation"]),"raster-contrast":new gr(mt.paint_raster["raster-contrast"]),"raster-resampling":new gr(mt.paint_raster["raster-resampling"]),"raster-fade-duration":new gr(mt.paint_raster["raster-fade-duration"])})}};class Ys extends Rn{constructor(t,s){super(t,Es,s)}}const Fo={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class ki{constructor(t,s){this._structArray=t,this._pos1=s*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class In{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(t,s){return t._trim(),s&&(t.isTransferred=!0,s.push(t.arrayBuffer)),{length:t.length,arrayBuffer:t.arrayBuffer}}static deserialize(t){const s=Object.create(this.prototype);return s.arrayBuffer=t.arrayBuffer,s.length=t.length,s.capacity=t.arrayBuffer.byteLength/s.bytesPerElement,s._refreshViews(),s}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(t){this.reserve(t),this.length=t}reserve(t){if(t>this.capacity){this.capacity=Math.max(t,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const s=this.uint8;this._refreshViews(),s&&this.uint8.set(s)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}}function Vn(a,t=1){let s=0,A=0;return{members:a.map((p=>{const v=Fo[p.type].BYTES_PER_ELEMENT,_=s=xi(s,Math.max(t,v)),B=p.components||1;return A=Math.max(A,v),s+=v*B,{name:p.name,type:p.type,components:B,offset:_}})),size:xi(s,Math.max(A,t)),alignment:t}}function xi(a,t){return Math.ceil(a/t)*t}class Ss extends In{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,s){const A=this.length;return this.resize(A+1),this.emplace(A,t,s)}emplace(t,s,A){const p=2*t;return this.int16[p+0]=s,this.int16[p+1]=A,t}}Ss.prototype.bytesPerElement=4,$e("StructArrayLayout2i4",Ss);class Io extends In{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,s,A){const p=this.length;return this.resize(p+1),this.emplace(p,t,s,A)}emplace(t,s,A,p){const v=3*t;return this.int16[v+0]=s,this.int16[v+1]=A,this.int16[v+2]=p,t}}Io.prototype.bytesPerElement=6,$e("StructArrayLayout3i6",Io);class Js extends In{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,s,A,p){const v=this.length;return this.resize(v+1),this.emplace(v,t,s,A,p)}emplace(t,s,A,p,v){const _=4*t;return this.int16[_+0]=s,this.int16[_+1]=A,this.int16[_+2]=p,this.int16[_+3]=v,t}}Js.prototype.bytesPerElement=8,$e("StructArrayLayout4i8",Js);class Fs extends In{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,s,A,p,v,_){const B=this.length;return this.resize(B+1),this.emplace(B,t,s,A,p,v,_)}emplace(t,s,A,p,v,_,B){const F=6*t;return this.int16[F+0]=s,this.int16[F+1]=A,this.int16[F+2]=p,this.int16[F+3]=v,this.int16[F+4]=_,this.int16[F+5]=B,t}}Fs.prototype.bytesPerElement=12,$e("StructArrayLayout2i4i12",Fs);class Ji extends In{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,s,A,p,v,_){const B=this.length;return this.resize(B+1),this.emplace(B,t,s,A,p,v,_)}emplace(t,s,A,p,v,_,B){const F=4*t,U=8*t;return this.int16[F+0]=s,this.int16[F+1]=A,this.uint8[U+4]=p,this.uint8[U+5]=v,this.uint8[U+6]=_,this.uint8[U+7]=B,t}}Ji.prototype.bytesPerElement=8,$e("StructArrayLayout2i4ub8",Ji);class za extends In{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,s){const A=this.length;return this.resize(A+1),this.emplace(A,t,s)}emplace(t,s,A){const p=2*t;return this.float32[p+0]=s,this.float32[p+1]=A,t}}za.prototype.bytesPerElement=8,$e("StructArrayLayout2f8",za);class Ha extends In{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,s,A,p,v,_,B,F,U,Q){const K=this.length;return this.resize(K+1),this.emplace(K,t,s,A,p,v,_,B,F,U,Q)}emplace(t,s,A,p,v,_,B,F,U,Q,K){const X=10*t;return this.uint16[X+0]=s,this.uint16[X+1]=A,this.uint16[X+2]=p,this.uint16[X+3]=v,this.uint16[X+4]=_,this.uint16[X+5]=B,this.uint16[X+6]=F,this.uint16[X+7]=U,this.uint16[X+8]=Q,this.uint16[X+9]=K,t}}Ha.prototype.bytesPerElement=20,$e("StructArrayLayout10ui20",Ha);class Gc extends In{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,s,A,p,v,_,B,F){const U=this.length;return this.resize(U+1),this.emplace(U,t,s,A,p,v,_,B,F)}emplace(t,s,A,p,v,_,B,F,U){const Q=8*t;return this.uint16[Q+0]=s,this.uint16[Q+1]=A,this.uint16[Q+2]=p,this.uint16[Q+3]=v,this.uint16[Q+4]=_,this.uint16[Q+5]=B,this.uint16[Q+6]=F,this.uint16[Q+7]=U,t}}Gc.prototype.bytesPerElement=16,$e("StructArrayLayout8ui16",Gc);class ja extends In{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,s,A,p,v,_,B,F,U,Q,K,X){const J=this.length;return this.resize(J+1),this.emplace(J,t,s,A,p,v,_,B,F,U,Q,K,X)}emplace(t,s,A,p,v,_,B,F,U,Q,K,X,J){const se=12*t;return this.int16[se+0]=s,this.int16[se+1]=A,this.int16[se+2]=p,this.int16[se+3]=v,this.uint16[se+4]=_,this.uint16[se+5]=B,this.uint16[se+6]=F,this.uint16[se+7]=U,this.int16[se+8]=Q,this.int16[se+9]=K,this.int16[se+10]=X,this.int16[se+11]=J,t}}ja.prototype.bytesPerElement=24,$e("StructArrayLayout4i4ui4i24",ja);class Hl extends In{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,s,A){const p=this.length;return this.resize(p+1),this.emplace(p,t,s,A)}emplace(t,s,A,p){const v=3*t;return this.float32[v+0]=s,this.float32[v+1]=A,this.float32[v+2]=p,t}}Hl.prototype.bytesPerElement=12,$e("StructArrayLayout3f12",Hl);class VA extends In{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(t){const s=this.length;return this.resize(s+1),this.emplace(s,t)}emplace(t,s){return this.uint32[1*t+0]=s,t}}VA.prototype.bytesPerElement=4,$e("StructArrayLayout1ul4",VA);class gi extends In{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,s,A,p,v,_,B,F,U){const Q=this.length;return this.resize(Q+1),this.emplace(Q,t,s,A,p,v,_,B,F,U)}emplace(t,s,A,p,v,_,B,F,U,Q){const K=10*t,X=5*t;return this.int16[K+0]=s,this.int16[K+1]=A,this.int16[K+2]=p,this.int16[K+3]=v,this.int16[K+4]=_,this.int16[K+5]=B,this.uint32[X+3]=F,this.uint16[K+8]=U,this.uint16[K+9]=Q,t}}gi.prototype.bytesPerElement=20,$e("StructArrayLayout6i1ul2ui20",gi);class Wo extends In{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,s,A,p,v,_){const B=this.length;return this.resize(B+1),this.emplace(B,t,s,A,p,v,_)}emplace(t,s,A,p,v,_,B){const F=6*t;return this.int16[F+0]=s,this.int16[F+1]=A,this.int16[F+2]=p,this.int16[F+3]=v,this.int16[F+4]=_,this.int16[F+5]=B,t}}Wo.prototype.bytesPerElement=12,$e("StructArrayLayout2i2i2i12",Wo);class pA extends In{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,s,A,p,v){const _=this.length;return this.resize(_+1),this.emplace(_,t,s,A,p,v)}emplace(t,s,A,p,v,_){const B=4*t,F=8*t;return this.float32[B+0]=s,this.float32[B+1]=A,this.float32[B+2]=p,this.int16[F+6]=v,this.int16[F+7]=_,t}}pA.prototype.bytesPerElement=16,$e("StructArrayLayout2f1f2i16",pA);class fu extends In{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,s,A,p,v,_){const B=this.length;return this.resize(B+1),this.emplace(B,t,s,A,p,v,_)}emplace(t,s,A,p,v,_,B){const F=16*t,U=4*t,Q=8*t;return this.uint8[F+0]=s,this.uint8[F+1]=A,this.float32[U+1]=p,this.float32[U+2]=v,this.int16[Q+6]=_,this.int16[Q+7]=B,t}}fu.prototype.bytesPerElement=16,$e("StructArrayLayout2ub2f2i16",fu);class jl extends In{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,s,A){const p=this.length;return this.resize(p+1),this.emplace(p,t,s,A)}emplace(t,s,A,p){const v=3*t;return this.uint16[v+0]=s,this.uint16[v+1]=A,this.uint16[v+2]=p,t}}jl.prototype.bytesPerElement=6,$e("StructArrayLayout3ui6",jl);class Vl extends In{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,s,A,p,v,_,B,F,U,Q,K,X,J,se,le,ue,Be){const tt=this.length;return this.resize(tt+1),this.emplace(tt,t,s,A,p,v,_,B,F,U,Q,K,X,J,se,le,ue,Be)}emplace(t,s,A,p,v,_,B,F,U,Q,K,X,J,se,le,ue,Be,tt){const Ee=24*t,Le=12*t,st=48*t;return this.int16[Ee+0]=s,this.int16[Ee+1]=A,this.uint16[Ee+2]=p,this.uint16[Ee+3]=v,this.uint32[Le+2]=_,this.uint32[Le+3]=B,this.uint32[Le+4]=F,this.uint16[Ee+10]=U,this.uint16[Ee+11]=Q,this.uint16[Ee+12]=K,this.float32[Le+7]=X,this.float32[Le+8]=J,this.uint8[st+36]=se,this.uint8[st+37]=le,this.uint8[st+38]=ue,this.uint32[Le+10]=Be,this.int16[Ee+22]=tt,t}}Vl.prototype.bytesPerElement=48,$e("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",Vl);class Va extends In{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,s,A,p,v,_,B,F,U,Q,K,X,J,se,le,ue,Be,tt,Ee,Le,st,ut,Mt,Xt,Vt,ir,_r,or){const qt=this.length;return this.resize(qt+1),this.emplace(qt,t,s,A,p,v,_,B,F,U,Q,K,X,J,se,le,ue,Be,tt,Ee,Le,st,ut,Mt,Xt,Vt,ir,_r,or)}emplace(t,s,A,p,v,_,B,F,U,Q,K,X,J,se,le,ue,Be,tt,Ee,Le,st,ut,Mt,Xt,Vt,ir,_r,or,qt){const Ot=32*t,Lr=16*t;return this.int16[Ot+0]=s,this.int16[Ot+1]=A,this.int16[Ot+2]=p,this.int16[Ot+3]=v,this.int16[Ot+4]=_,this.int16[Ot+5]=B,this.int16[Ot+6]=F,this.int16[Ot+7]=U,this.uint16[Ot+8]=Q,this.uint16[Ot+9]=K,this.uint16[Ot+10]=X,this.uint16[Ot+11]=J,this.uint16[Ot+12]=se,this.uint16[Ot+13]=le,this.uint16[Ot+14]=ue,this.uint16[Ot+15]=Be,this.uint16[Ot+16]=tt,this.uint16[Ot+17]=Ee,this.uint16[Ot+18]=Le,this.uint16[Ot+19]=st,this.uint16[Ot+20]=ut,this.uint16[Ot+21]=Mt,this.uint16[Ot+22]=Xt,this.uint32[Lr+12]=Vt,this.float32[Lr+13]=ir,this.float32[Lr+14]=_r,this.uint16[Ot+30]=or,this.uint16[Ot+31]=qt,t}}Va.prototype.bytesPerElement=64,$e("StructArrayLayout8i15ui1ul2f2ui64",Va);class bi extends In{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t){const s=this.length;return this.resize(s+1),this.emplace(s,t)}emplace(t,s){return this.float32[1*t+0]=s,t}}bi.prototype.bytesPerElement=4,$e("StructArrayLayout1f4",bi);class Ui extends In{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,s,A){const p=this.length;return this.resize(p+1),this.emplace(p,t,s,A)}emplace(t,s,A,p){const v=3*t;return this.uint16[6*t+0]=s,this.float32[v+1]=A,this.float32[v+2]=p,t}}Ui.prototype.bytesPerElement=12,$e("StructArrayLayout1ui2f12",Ui);class es extends In{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,s,A){const p=this.length;return this.resize(p+1),this.emplace(p,t,s,A)}emplace(t,s,A,p){const v=4*t;return this.uint32[2*t+0]=s,this.uint16[v+2]=A,this.uint16[v+3]=p,t}}es.prototype.bytesPerElement=8,$e("StructArrayLayout1ul2ui8",es);class Kc extends In{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,s){const A=this.length;return this.resize(A+1),this.emplace(A,t,s)}emplace(t,s,A){const p=2*t;return this.uint16[p+0]=s,this.uint16[p+1]=A,t}}Kc.prototype.bytesPerElement=4,$e("StructArrayLayout2ui4",Kc);class Ga extends In{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t){const s=this.length;return this.resize(s+1),this.emplace(s,t)}emplace(t,s){return this.uint16[1*t+0]=s,t}}Ga.prototype.bytesPerElement=2,$e("StructArrayLayout1ui2",Ga);class qc extends In{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,s,A,p){const v=this.length;return this.resize(v+1),this.emplace(v,t,s,A,p)}emplace(t,s,A,p,v){const _=4*t;return this.float32[_+0]=s,this.float32[_+1]=A,this.float32[_+2]=p,this.float32[_+3]=v,t}}qc.prototype.bytesPerElement=16,$e("StructArrayLayout4f16",qc);class w extends ki{get anchorPointX(){return this._structArray.int16[this._pos2+0]}get anchorPointY(){return this._structArray.int16[this._pos2+1]}get x1(){return this._structArray.int16[this._pos2+2]}get y1(){return this._structArray.int16[this._pos2+3]}get x2(){return this._structArray.int16[this._pos2+4]}get y2(){return this._structArray.int16[this._pos2+5]}get featureIndex(){return this._structArray.uint32[this._pos4+3]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+8]}get bucketIndex(){return this._structArray.uint16[this._pos2+9]}get anchorPoint(){return new x(this.anchorPointX,this.anchorPointY)}}w.prototype.size=20;class r extends gi{get(t){return new w(this,t)}}$e("CollisionBoxArray",r);class c extends ki{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+2]}get numGlyphs(){return this._structArray.uint16[this._pos2+3]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+2]}get lineStartIndex(){return this._structArray.uint32[this._pos4+3]}get lineLength(){return this._structArray.uint32[this._pos4+4]}get segment(){return this._structArray.uint16[this._pos2+10]}get lowerSize(){return this._structArray.uint16[this._pos2+11]}get upperSize(){return this._structArray.uint16[this._pos2+12]}get lineOffsetX(){return this._structArray.float32[this._pos4+7]}get lineOffsetY(){return this._structArray.float32[this._pos4+8]}get writingMode(){return this._structArray.uint8[this._pos1+36]}get placedOrientation(){return this._structArray.uint8[this._pos1+37]}set placedOrientation(t){this._structArray.uint8[this._pos1+37]=t}get hidden(){return this._structArray.uint8[this._pos1+38]}set hidden(t){this._structArray.uint8[this._pos1+38]=t}get crossTileID(){return this._structArray.uint32[this._pos4+10]}set crossTileID(t){this._structArray.uint32[this._pos4+10]=t}get associatedIconIndex(){return this._structArray.int16[this._pos2+22]}}c.prototype.size=48;class f extends Vl{get(t){return new c(this,t)}}$e("PlacedSymbolArray",f);class y extends ki{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+2]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+3]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+4]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+5]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+6]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+7]}get key(){return this._structArray.uint16[this._pos2+8]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+9]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+10]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+11]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+12]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+13]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+14]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get featureIndex(){return this._structArray.uint16[this._pos2+17]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+18]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+19]}get numIconVertices(){return this._structArray.uint16[this._pos2+20]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+21]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+22]}get crossTileID(){return this._structArray.uint32[this._pos4+12]}set crossTileID(t){this._structArray.uint32[this._pos4+12]=t}get textBoxScale(){return this._structArray.float32[this._pos4+13]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+14]}get textAnchorOffsetStartIndex(){return this._structArray.uint16[this._pos2+30]}get textAnchorOffsetEndIndex(){return this._structArray.uint16[this._pos2+31]}}y.prototype.size=64;class b extends Va{get(t){return new y(this,t)}}$e("SymbolInstanceArray",b);class S extends bi{getoffsetX(t){return this.float32[1*t+0]}}$e("GlyphOffsetArray",S);class M extends Io{getx(t){return this.int16[3*t+0]}gety(t){return this.int16[3*t+1]}gettileUnitDistanceFromAnchor(t){return this.int16[3*t+2]}}$e("SymbolLineVertexArray",M);class N extends ki{get textAnchor(){return this._structArray.uint16[this._pos2+0]}get textOffset0(){return this._structArray.float32[this._pos4+1]}get textOffset1(){return this._structArray.float32[this._pos4+2]}}N.prototype.size=12;class j extends Ui{get(t){return new N(this,t)}}$e("TextAnchorOffsetArray",j);class q extends ki{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}}q.prototype.size=8;class ne extends es{get(t){return new q(this,t)}}$e("FeatureIndexArray",ne);class ee extends Ss{}class Ae extends Ss{}class ve extends Ss{}class ke extends Fs{}class Oe extends Ji{}class Qe extends za{}class Ge extends Ha{}class ot extends Gc{}class Ze extends ja{}class ct extends Hl{}class dt extends VA{}class it extends Wo{}class _t extends fu{}class Dt extends jl{}class Pt extends Kc{}const Rt=Vn([{name:"a_pos",components:2,type:"Int16"}],4),{members:Qt}=Rt;class nr{constructor(t=[]){this._forceNewSegmentOnNextPrepare=!1,this.segments=t}prepareSegment(t,s,A,p){const v=this.segments[this.segments.length-1];return t>nr.MAX_VERTEX_ARRAY_LENGTH&&Cr(`Max vertices per segment is ${nr.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${t}. Consider using the \`fillLargeMeshArrays\` function if you require meshes with more than ${nr.MAX_VERTEX_ARRAY_LENGTH} vertices.`),this._forceNewSegmentOnNextPrepare||!v||v.vertexLength+t>nr.MAX_VERTEX_ARRAY_LENGTH||v.sortKey!==p?this.createNewSegment(s,A,p):v}createNewSegment(t,s,A){const p={vertexOffset:t.length,primitiveOffset:s.length,vertexLength:0,primitiveLength:0,vaos:{}};return A!==void 0&&(p.sortKey=A),this._forceNewSegmentOnNextPrepare=!1,this.segments.push(p),p}getOrCreateLatestSegment(t,s,A){return this.prepareSegment(0,t,s,A)}forceNewSegmentOnNextPrepare(){this._forceNewSegmentOnNextPrepare=!0}get(){return this.segments}destroy(){for(const t of this.segments)for(const s in t.vaos)t.vaos[s].destroy()}static simpleSegment(t,s,A,p){return new nr([{vertexOffset:t,primitiveOffset:s,vertexLength:A,primitiveLength:p,vaos:{},sortKey:0}])}}function Ar(a,t){return 256*(a=lt(Math.floor(a),0,255))+lt(Math.floor(t),0,255)}nr.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,$e("SegmentVector",nr);const rr=Vn([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]),Dr=Vn([{name:"a_dasharray_from",components:4,type:"Uint16"},{name:"a_dasharray_to",components:4,type:"Uint16"}]);var vn,Ai,zi,ui={exports:{}},Gi={exports:{}},Pi={exports:{}},Is=(function(){if(zi)return ui.exports;zi=1;var a=(vn||(vn=1,Gi.exports=function(s,A){var p,v,_,B,F,U,Q,K;for(v=s.length-(p=3&s.length),_=A,F=3432918353,U=461845907,K=0;K<v;)Q=255&s.charCodeAt(K)|(255&s.charCodeAt(++K))<<8|(255&s.charCodeAt(++K))<<16|(255&s.charCodeAt(++K))<<24,++K,_=27492+(65535&(B=5*(65535&(_=(_^=Q=(65535&(Q=(Q=(65535&Q)*F+(((Q>>>16)*F&65535)<<16)&4294967295)<<15|Q>>>17))*U+(((Q>>>16)*U&65535)<<16)&4294967295)<<13|_>>>19))+((5*(_>>>16)&65535)<<16)&4294967295))+((58964+(B>>>16)&65535)<<16);switch(Q=0,p){case 3:Q^=(255&s.charCodeAt(K+2))<<16;case 2:Q^=(255&s.charCodeAt(K+1))<<8;case 1:_^=Q=(65535&(Q=(Q=(65535&(Q^=255&s.charCodeAt(K)))*F+(((Q>>>16)*F&65535)<<16)&4294967295)<<15|Q>>>17))*U+(((Q>>>16)*U&65535)<<16)&4294967295}return _^=s.length,_=2246822507*(65535&(_^=_>>>16))+((2246822507*(_>>>16)&65535)<<16)&4294967295,_=3266489909*(65535&(_^=_>>>13))+((3266489909*(_>>>16)&65535)<<16)&4294967295,(_^=_>>>16)>>>0}),Gi.exports),t=(Ai||(Ai=1,Pi.exports=function(s,A){for(var p,v=s.length,_=A^v,B=0;v>=4;)p=1540483477*(65535&(p=255&s.charCodeAt(B)|(255&s.charCodeAt(++B))<<8|(255&s.charCodeAt(++B))<<16|(255&s.charCodeAt(++B))<<24))+((1540483477*(p>>>16)&65535)<<16),_=1540483477*(65535&_)+((1540483477*(_>>>16)&65535)<<16)^(p=1540483477*(65535&(p^=p>>>24))+((1540483477*(p>>>16)&65535)<<16)),v-=4,++B;switch(v){case 3:_^=(255&s.charCodeAt(B+2))<<16;case 2:_^=(255&s.charCodeAt(B+1))<<8;case 1:_=1540483477*(65535&(_^=255&s.charCodeAt(B)))+((1540483477*(_>>>16)&65535)<<16)}return _=1540483477*(65535&(_^=_>>>13))+((1540483477*(_>>>16)&65535)<<16),(_^=_>>>15)>>>0}),Pi.exports);return ui.exports=a,ui.exports.murmur3=a,ui.exports.murmur2=t,ui.exports})(),Ki=E(Is);class eo{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(t,s,A,p){this.ids.push(Ts(t)),this.positions.push(s,A,p)}getPositions(t){if(!this.indexed)throw new Error("Trying to get index, but feature positions are not indexed");const s=Ts(t);let A=0,p=this.ids.length-1;for(;A<p;){const _=A+p>>1;this.ids[_]>=s?p=_:A=_+1}const v=[];for(;this.ids[A]===s;)v.push({index:this.positions[3*A],start:this.positions[3*A+1],end:this.positions[3*A+2]}),A++;return v}static serialize(t,s){const A=new Float64Array(t.ids),p=new Uint32Array(t.positions);return hi(A,p,0,A.length-1),s&&s.push(A.buffer,p.buffer),{ids:A,positions:p}}static deserialize(t){const s=new eo;return s.ids=t.ids,s.positions=t.positions,s.indexed=!0,s}}function Ts(a){const t=+a;return!isNaN(t)&&t<=Number.MAX_SAFE_INTEGER?t:Ki(String(a))}function hi(a,t,s,A){for(;s<A;){const p=a[s+A>>1];let v=s-1,_=A+1;for(;;){do v++;while(a[v]<p);do _--;while(a[_]>p);if(v>=_)break;Ao(a,v,_),Ao(t,3*v,3*_),Ao(t,3*v+1,3*_+1),Ao(t,3*v+2,3*_+2)}_-s<A-_?(hi(a,t,s,_),s=_+1):(hi(a,t,_+1,A),A=_)}}function Ao(a,t,s){const A=a[t];a[t]=a[s],a[s]=A}$e("FeaturePositionMap",eo);class yo{constructor(t,s){this.gl=t.gl,this.location=s}}class fc extends yo{constructor(t,s){super(t,s),this.current=0}set(t){this.current!==t&&(this.current=t,this.gl.uniform1f(this.location,t))}}class mA extends yo{constructor(t,s){super(t,s),this.current=[0,0,0,0]}set(t){t[0]===this.current[0]&&t[1]===this.current[1]&&t[2]===this.current[2]&&t[3]===this.current[3]||(this.current=t,this.gl.uniform4f(this.location,t[0],t[1],t[2],t[3]))}}class GA extends yo{constructor(t,s){super(t,s),this.current=an.transparent}set(t){t.r===this.current.r&&t.g===this.current.g&&t.b===this.current.b&&t.a===this.current.a||(this.current=t,this.gl.uniform4f(this.location,t.r,t.g,t.b,t.a))}}const zu=new Float32Array(16);function pc(a){return[Ar(255*a.r,255*a.g),Ar(255*a.b,255*a.a)]}class Gl{constructor(t,s,A){this.value=t,this.uniformNames=s.map((p=>`u_${p}`)),this.type=A}setUniform(t,s,A){t.set(A.constantOr(this.value))}getBinding(t,s,A){return this.type==="color"?new GA(t,s):new fc(t,s)}}class to{constructor(t,s){this.uniformNames=s.map((A=>`u_${A}`)),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(t,s){this.pixelRatioFrom=s.pixelRatio,this.pixelRatioTo=t.pixelRatio,this.patternFrom=s.tlbr,this.patternTo=t.tlbr}setConstantDashPositions(t,s){this.dashTo=[0,t.y,t.height,t.width],this.dashFrom=[0,s.y,s.height,s.width]}setUniform(t,s,A,p){let v=null;p==="u_pattern_to"?v=this.patternTo:p==="u_pattern_from"?v=this.patternFrom:p==="u_dasharray_to"?v=this.dashTo:p==="u_dasharray_from"?v=this.dashFrom:p==="u_pixel_ratio_to"?v=this.pixelRatioTo:p==="u_pixel_ratio_from"&&(v=this.pixelRatioFrom),v!==null&&t.set(v)}getBinding(t,s,A){return A.substr(0,9)==="u_pattern"||A.substr(0,12)==="u_dasharray_"?new mA(t,s):new fc(t,s)}}class Zo{constructor(t,s,A,p){this.expression=t,this.type=A,this.maxValue=0,this.paintVertexAttributes=s.map((v=>({name:`a_${v}`,type:"Float32",components:A==="color"?2:1,offset:0}))),this.paintVertexArray=new p}populatePaintArray(t,s,A){const p=this.paintVertexArray.length,v=this.expression.evaluate(new Mr(0,A),s,{},A.canonical,[],A.formattedSection);this.paintVertexArray.resize(t),this._setPaintValue(p,t,v)}updatePaintArray(t,s,A,p,v){const _=this.expression.evaluate(new Mr(0,v),A,p);this._setPaintValue(t,s,_)}_setPaintValue(t,s,A){if(this.type==="color"){const p=pc(A);for(let v=t;v<s;v++)this.paintVertexArray.emplace(v,p[0],p[1])}else{for(let p=t;p<s;p++)this.paintVertexArray.emplace(p,A);this.maxValue=Math.max(this.maxValue,Math.abs(A))}}upload(t){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=t.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class vo{constructor(t,s,A,p,v,_){this.expression=t,this.uniformNames=s.map((B=>`u_${B}_t`)),this.type=A,this.useIntegerZoom=p,this.zoom=v,this.maxValue=0,this.paintVertexAttributes=s.map((B=>({name:`a_${B}`,type:"Float32",components:A==="color"?4:2,offset:0}))),this.paintVertexArray=new _}populatePaintArray(t,s,A){const p=this.expression.evaluate(new Mr(this.zoom,A),s,{},A.canonical,[],A.formattedSection),v=this.expression.evaluate(new Mr(this.zoom+1,A),s,{},A.canonical,[],A.formattedSection),_=this.paintVertexArray.length;this.paintVertexArray.resize(t),this._setPaintValue(_,t,p,v)}updatePaintArray(t,s,A,p,v){const _=this.expression.evaluate(new Mr(this.zoom,v),A,p),B=this.expression.evaluate(new Mr(this.zoom+1,v),A,p);this._setPaintValue(t,s,_,B)}_setPaintValue(t,s,A,p){if(this.type==="color"){const v=pc(A),_=pc(p);for(let B=t;B<s;B++)this.paintVertexArray.emplace(B,v[0],v[1],_[0],_[1])}else{for(let v=t;v<s;v++)this.paintVertexArray.emplace(v,A,p);this.maxValue=Math.max(this.maxValue,Math.abs(A),Math.abs(p))}}upload(t){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=t.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(t,s){const A=this.useIntegerZoom?Math.floor(s.zoom):s.zoom,p=lt(this.expression.interpolationFactor(A,this.zoom,this.zoom+1),0,1);t.set(p)}getBinding(t,s,A){return new fc(t,s)}}class vl{constructor(t,s,A,p,v,_){this.expression=t,this.type=s,this.useIntegerZoom=A,this.zoom=p,this.layerId=_,this.zoomInPaintVertexArray=new v,this.zoomOutPaintVertexArray=new v}populatePaintArray(t,s,A){const p=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(t),this.zoomOutPaintVertexArray.resize(t),this._setPaintValues(p,t,this.getPositionIds(s),A)}updatePaintArray(t,s,A,p,v){this._setPaintValues(t,s,this.getPositionIds(A),v)}_setPaintValues(t,s,A,p){const v=this.getPositions(p);if(!v||!A)return;const _=v[A.min],B=v[A.mid],F=v[A.max];if(_&&B&&F)for(let U=t;U<s;U++)this.emplace(this.zoomInPaintVertexArray,U,B,_),this.emplace(this.zoomOutPaintVertexArray,U,B,F)}upload(t){if(this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer){const s=this.getVertexAttributes();this.zoomInPaintVertexBuffer=t.createVertexBuffer(this.zoomInPaintVertexArray,s,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=t.createVertexBuffer(this.zoomOutPaintVertexArray,s,this.expression.isStateDependent)}}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class Os extends vl{getPositions(t){return t.imagePositions}getPositionIds(t){return t.patterns&&t.patterns[this.layerId]}getVertexAttributes(){return rr.members}emplace(t,s,A,p){t.emplace(s,A.tlbr[0],A.tlbr[1],A.tlbr[2],A.tlbr[3],p.tlbr[0],p.tlbr[1],p.tlbr[2],p.tlbr[3],A.pixelRatio,p.pixelRatio)}}class ro extends vl{getPositions(t){return t.dashPositions}getPositionIds(t){return t.dashes&&t.dashes[this.layerId]}getVertexAttributes(){return Dr.members}emplace(t,s,A,p){t.emplace(s,0,A.y,A.height,A.width,0,p.y,p.height,p.width)}}class Ka{constructor(t,s,A){this.binders={},this._buffers=[];const p=[];for(const v in t.paint._values){if(!A(v))continue;const _=t.paint.get(v);if(!(_ instanceof Fn&&So(_.property.specification)))continue;const B=qa(v,t.type),F=_.value,U=_.property.specification.type,Q=_.property.useIntegerZoom,K=_.property.specification["property-type"],X=K==="cross-faded"||K==="cross-faded-data-driven";if(F.kind==="constant")this.binders[v]=X?new to(F.value,B):new Gl(F.value,B,U),p.push(`/u_${v}`);else if(F.kind==="source"||X){const J=Xo(v,U,"source");this.binders[v]=X?v==="line-dasharray"?new ro(F,U,Q,s,J,t.id):new Os(F,U,Q,s,J,t.id):new Zo(F,B,U,J),p.push(`/a_${v}`)}else{const J=Xo(v,U,"composite");this.binders[v]=new vo(F,B,U,Q,s,J),p.push(`/z_${v}`)}}this.cacheKey=p.sort().join("")}getMaxValue(t){const s=this.binders[t];return s instanceof Zo||s instanceof vo?s.maxValue:0}populatePaintArrays(t,s,A){for(const p in this.binders){const v=this.binders[p];(v instanceof Zo||v instanceof vo||v instanceof vl)&&v.populatePaintArray(t,s,A)}}setConstantPatternPositions(t,s){for(const A in this.binders){const p=this.binders[A];p instanceof to&&p.setConstantPatternPositions(t,s)}}setConstantDashPositions(t,s){for(const A in this.binders){const p=this.binders[A];p instanceof to&&p.setConstantDashPositions(t,s)}}updatePaintArrays(t,s,A,p,v){let _=!1;for(const B in t){const F=s.getPositions(B);for(const U of F){const Q=A.feature(U.index);for(const K in this.binders){const X=this.binders[K];if((X instanceof Zo||X instanceof vo||X instanceof vl)&&X.expression.isStateDependent===!0){const J=p.paint.get(K);X.expression=J.value,X.updatePaintArray(U.start,U.end,Q,t[B],v),_=!0}}}}return _}defines(){const t=[];for(const s in this.binders){const A=this.binders[s];(A instanceof Gl||A instanceof to)&&t.push(...A.uniformNames.map((p=>`#define HAS_UNIFORM_${p}`)))}return t}getBinderAttributes(){const t=[];for(const s in this.binders){const A=this.binders[s];if(A instanceof Zo||A instanceof vo)for(let p=0;p<A.paintVertexAttributes.length;p++)t.push(A.paintVertexAttributes[p].name);else if(A instanceof vl){const p=A.getVertexAttributes();for(const v of p)t.push(v.name)}}return t}getBinderUniforms(){const t=[];for(const s in this.binders){const A=this.binders[s];if(A instanceof Gl||A instanceof to||A instanceof vo)for(const p of A.uniformNames)t.push(p)}return t}getPaintVertexBuffers(){return this._buffers}getUniforms(t,s){const A=[];for(const p in this.binders){const v=this.binders[p];if(v instanceof Gl||v instanceof to||v instanceof vo){for(const _ of v.uniformNames)if(s[_]){const B=v.getBinding(t,s[_],_);A.push({name:_,property:p,binding:B})}}}return A}setUniforms(t,s,A,p){for(const{name:v,property:_,binding:B}of s)this.binders[_].setUniform(B,p,A.get(_),v)}updatePaintBuffers(t){this._buffers=[];for(const s in this.binders){const A=this.binders[s];if(t&&A instanceof vl){const p=t.fromScale===2?A.zoomInPaintVertexBuffer:A.zoomOutPaintVertexBuffer;p&&this._buffers.push(p)}else(A instanceof Zo||A instanceof vo)&&A.paintVertexBuffer&&this._buffers.push(A.paintVertexBuffer)}}upload(t){for(const s in this.binders){const A=this.binders[s];(A instanceof Zo||A instanceof vo||A instanceof vl)&&A.upload(t)}this.updatePaintBuffers()}destroy(){for(const t in this.binders){const s=this.binders[t];(s instanceof Zo||s instanceof vo||s instanceof vl)&&s.destroy()}}}class cs{constructor(t,s,A=()=>!0){this.programConfigurations={};for(const p of t)this.programConfigurations[p.id]=new Ka(p,s,A);this.needsUpload=!1,this._featureMap=new eo,this._bufferOffset=0}populatePaintArrays(t,s,A,p){for(const v in this.programConfigurations)this.programConfigurations[v].populatePaintArrays(t,s,p);s.id!==void 0&&this._featureMap.add(s.id,A,this._bufferOffset,t),this._bufferOffset=t,this.needsUpload=!0}updatePaintArrays(t,s,A,p){for(const v of A)this.needsUpload=this.programConfigurations[v.id].updatePaintArrays(t,this._featureMap,s,v,p)||this.needsUpload}get(t){return this.programConfigurations[t]}upload(t){if(this.needsUpload){for(const s in this.programConfigurations)this.programConfigurations[s].upload(t);this.needsUpload=!1}}destroy(){for(const t in this.programConfigurations)this.programConfigurations[t].destroy()}}function qa(a,t){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-dasharray":["dasharray_to","dasharray_from"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[a]||[a.replace(`${t}-`,"").replace(/-/g,"_")]}function Xo(a,t,s){const A={color:{source:za,composite:qc},number:{source:bi,composite:za}},p=(function(v){return{"line-pattern":{source:Ge,composite:Ge},"fill-pattern":{source:Ge,composite:Ge},"fill-extrusion-pattern":{source:Ge,composite:Ge},"line-dasharray":{source:ot,composite:ot}}[v]})(a);return p&&p[s]||A[t][s]}$e("ConstantBinder",Gl),$e("CrossFadedConstantBinder",to),$e("SourceExpressionBinder",Zo),$e("CrossFadedPatternBinder",Os),$e("CrossFadedDasharrayBinder",ro),$e("CompositeExpressionBinder",vo),$e("ProgramConfiguration",Ka,{omit:["_buffers"]}),$e("ProgramConfigurationSet",cs);const Vh=Math.pow(2,14)-1,Sd=-Vh-1;function KA(a){const t=je/a.extent,s=a.loadGeometry();for(let A=0;A<s.length;A++){const p=s[A];for(let v=0;v<p.length;v++){const _=p[v],B=Math.round(_.x*t),F=Math.round(_.y*t);_.x=lt(B,Sd,Vh),_.y=lt(F,Sd,Vh),(B<_.x||B>_.x+1||F<_.y||F>_.y+1)&&Cr("Geometry exceeds allowed extent, reduce your vector tile buffer size")}}return s}function qA(a,t){return{type:a.type,id:a.id,properties:a.properties,geometry:t?KA(a):[]}}const gA=-32768;function Gh(a,t,s,A,p){a.emplaceBack(gA+8*t+A,gA+8*s+p)}class uh{constructor(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map((s=>s.id)),this.index=t.index,this.hasDependencies=!1,this.layoutVertexArray=new Ae,this.indexArray=new Dt,this.segments=new nr,this.programConfigurations=new cs(t.layers,t.zoom),this.stateDependentLayerIds=this.layers.filter((s=>s.isStateDependent())).map((s=>s.id))}populate(t,s,A){const p=this.layers[0],v=[];let _=null,B=!1,F=p.type==="heatmap";if(p.type==="circle"){const Q=p;_=Q.layout.get("circle-sort-key"),B=!_.isConstant(),F=F||Q.paint.get("circle-pitch-alignment")==="map"}const U=F?s.subdivisionGranularity.circle:1;for(const{feature:Q,id:K,index:X,sourceLayerIndex:J}of t){const se=this.layers[0]._featureFilter.needGeometry,le=qA(Q,se);if(!this.layers[0]._featureFilter.filter(new Mr(this.zoom),le,A))continue;const ue=B?_.evaluate(le,{},A):void 0,Be={id:K,properties:Q.properties,type:Q.type,sourceLayerIndex:J,index:X,geometry:se?le.geometry:KA(Q),patterns:{},sortKey:ue};v.push(Be)}B&&v.sort(((Q,K)=>Q.sortKey-K.sortKey));for(const Q of v){const{geometry:K,index:X,sourceLayerIndex:J}=Q,se=t[X].feature;this.addFeature(Q,K,X,A,U),s.featureIndex.insert(se,K,X,J,this.index)}}update(t,s,A){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,s,this.stateDependentLayers,{imagePositions:A})}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,Qt),this.indexBuffer=t.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(t),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(t,s,A,p,v=1){let _;switch(v){case 1:_=[0,7];break;case 3:_=[0,2,5,7];break;case 5:_=[0,1,3,4,6,7];break;case 7:_=[0,1,2,3,4,5,6,7];break;default:throw new Error(`Invalid circle bucket granularity: ${v}; valid values are 1, 3, 5, 7.`)}const B=_.length;for(const F of s)for(const U of F){const Q=U.x,K=U.y;if(Q<0||Q>=je||K<0||K>=je)continue;const X=this.segments.prepareSegment(B*B,this.layoutVertexArray,this.indexArray,t.sortKey),J=X.vertexLength;for(let se=0;se<B;se++)for(let le=0;le<B;le++)Gh(this.layoutVertexArray,Q,K,_[le],_[se]);for(let se=0;se<B-1;se++)for(let le=0;le<B-1;le++){const ue=J+se*B+le,Be=J+(se+1)*B+le;this.indexArray.emplaceBack(ue,Be+1,ue+1),this.indexArray.emplaceBack(ue,Be,Be+1)}X.vertexLength+=B*B,X.primitiveLength+=(B-1)*(B-1)*2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,A,{imagePositions:{},canonical:p})}}function hh(a,t){for(let s=0;s<a.length;s++)if(fh(t,a[s]))return!0;for(let s=0;s<t.length;s++)if(fh(a,t[s]))return!0;return!!Fd(a,t)}function pu(a,t,s){return!!fh(a,t)||!!Id(t,a,s)}function Kh(a,t){if(a.length===1)return ng(t,a[0]);for(let s=0;s<t.length;s++){const A=t[s];for(let p=0;p<A.length;p++)if(fh(a,A[p]))return!0}for(let s=0;s<a.length;s++)if(ng(t,a[s]))return!0;for(let s=0;s<t.length;s++)if(Fd(a,t[s]))return!0;return!1}function dh(a,t,s){if(a.length>1){if(Fd(a,t))return!0;for(let A=0;A<t.length;A++)if(Id(t[A],a,s))return!0}for(let A=0;A<a.length;A++)if(Id(a[A],t,s))return!0;return!1}function Fd(a,t){if(a.length===0||t.length===0)return!1;for(let s=0;s<a.length-1;s++){const A=a[s],p=a[s+1];for(let v=0;v<t.length-1;v++)if(rg(A,p,t[v],t[v+1]))return!0}return!1}function rg(a,t,s,A){return He(a,s,A)!==He(t,s,A)&&He(a,t,s)!==He(a,t,A)}function Id(a,t,s){const A=s*s;if(t.length===1)return a.distSqr(t[0])<A;for(let p=1;p<t.length;p++)if(Td(a,t[p-1],t[p])<A)return!0;return!1}function Td(a,t,s){const A=t.distSqr(s);if(A===0)return a.distSqr(t);const p=((a.x-t.x)*(s.x-t.x)+(a.y-t.y)*(s.y-t.y))/A;return a.distSqr(p<0?t:p>1?s:s.sub(t)._mult(p)._add(t))}function ng(a,t){let s,A,p,v=!1;for(let _=0;_<a.length;_++){s=a[_];for(let B=0,F=s.length-1;B<s.length;F=B++)A=s[B],p=s[F],A.y>t.y!=p.y>t.y&&t.x<(p.x-A.x)*(t.y-A.y)/(p.y-A.y)+A.x&&(v=!v)}return v}function fh(a,t){let s=!1;for(let A=0,p=a.length-1;A<a.length;p=A++){const v=a[A],_=a[p];v.y>t.y!=_.y>t.y&&t.x<(_.x-v.x)*(t.y-v.y)/(_.y-v.y)+v.x&&(s=!s)}return s}function Fp(a,t,s){const A=s[0],p=s[2];if(a.x<A.x&&t.x<A.x||a.x>p.x&&t.x>p.x||a.y<A.y&&t.y<A.y||a.y>p.y&&t.y>p.y)return!1;const v=He(a,t,s[0]);return v!==He(a,t,s[1])||v!==He(a,t,s[2])||v!==He(a,t,s[3])}function ph(a,t,s){const A=t.paint.get(a).value;return A.kind==="constant"?A.value:s.programConfigurations.get(t.id).getMaxValue(a)}function mh(a){return Math.sqrt(a[0]*a[0]+a[1]*a[1])}function $c(a,t,s,A,p){if(!t[0]&&!t[1])return a;const v=x.convert(t)._mult(p);s==="viewport"&&v._rotate(-A);const _=[];for(let B=0;B<a.length;B++)_.push(a[B].sub(v));return _}function Yy(a){const t=[];for(let s=0;s<a.length;s++){const A=a[s],p=t.at(-1);(s===0||p&&!A.equals(p))&&t.push(A)}return t}function ig({queryGeometry:a,size:t},s){return pu(a,s,t)}function Ip({queryGeometry:a,size:t,transform:s,unwrappedTileID:A,getElevation:p},v){return pu(a,v,t*(s.projectTileCoordinates(v.x,v.y,A,p).signedDistanceFromCamera/s.cameraToCenterDistance))}function sg({queryGeometry:a,size:t,transform:s,unwrappedTileID:A,getElevation:p},v){const _=s.projectTileCoordinates(v.x,v.y,A,p).signedDistanceFromCamera,B=t*(s.cameraToCenterDistance/_);return pu(a,Yo(v,s,A,p),B)}function og({queryGeometry:a,size:t,transform:s,unwrappedTileID:A,getElevation:p},v){return pu(a,Yo(v,s,A,p),t)}function qh({queryGeometry:a,size:t,transform:s,unwrappedTileID:A,getElevation:p,pitchAlignment:v="map",pitchScale:_="map"},B){const F=v==="map"?_==="map"?ig:Ip:_==="map"?sg:og,U={queryGeometry:a,size:t,transform:s,unwrappedTileID:A,getElevation:p};for(const Q of B)for(const K of Q)if(F(U,K))return!0;return!1}function Yo(a,t,s,A){const p=t.projectTileCoordinates(a.x,a.y,s,A).point;return new x((.5*p.x+.5)*t.width,(.5*-p.y+.5)*t.height)}let ag,lg;$e("CircleBucket",uh,{omit:["layers"]});var uf={get paint(){return lg=lg||new ci({"circle-radius":new xr(mt.paint_circle["circle-radius"]),"circle-color":new xr(mt.paint_circle["circle-color"]),"circle-blur":new xr(mt.paint_circle["circle-blur"]),"circle-opacity":new xr(mt.paint_circle["circle-opacity"]),"circle-translate":new gr(mt.paint_circle["circle-translate"]),"circle-translate-anchor":new gr(mt.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new gr(mt.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new gr(mt.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new xr(mt.paint_circle["circle-stroke-width"]),"circle-stroke-color":new xr(mt.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new xr(mt.paint_circle["circle-stroke-opacity"])})},get layout(){return ag=ag||new ci({"circle-sort-key":new xr(mt.layout_circle["circle-sort-key"])})}};class $a extends Rn{constructor(t,s){super(t,uf,s)}createBucket(t){return new uh(t)}queryRadius(t){const s=t;return ph("circle-radius",this,s)+ph("circle-stroke-width",this,s)+mh(this.paint.get("circle-translate"))}queryIntersectsFeature({queryGeometry:t,feature:s,featureState:A,geometry:p,transform:v,pixelsToTileUnits:_,unwrappedTileID:B,getElevation:F}){const U=$c(t,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),-v.bearingInRadians,_),Q=this.paint.get("circle-radius").evaluate(s,A)+this.paint.get("circle-stroke-width").evaluate(s,A),K=this.paint.get("circle-pitch-scale"),X=this.paint.get("circle-pitch-alignment");let J,se;return X==="map"?(J=U,se=Q*_):(J=(function(le,ue,Be,tt){return le.map((Ee=>Yo(Ee,ue,Be,tt)))})(U,v,B,F),se=Q),qh({queryGeometry:J,size:se,transform:v,unwrappedTileID:B,getElevation:F,pitchAlignment:X,pitchScale:K},p)}}class cg extends uh{}let Xr;$e("HeatmapBucket",cg,{omit:["layers"]});var $h={get paint(){return Xr=Xr||new ci({"heatmap-radius":new xr(mt.paint_heatmap["heatmap-radius"]),"heatmap-weight":new xr(mt.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new gr(mt.paint_heatmap["heatmap-intensity"]),"heatmap-color":new ei(mt.paint_heatmap["heatmap-color"]),"heatmap-opacity":new gr(mt.paint_heatmap["heatmap-opacity"])})}};function Pd(a,{width:t,height:s},A,p){if(p){if(p instanceof Uint8ClampedArray)p=new Uint8Array(p.buffer);else if(p.length!==t*s*A)throw new RangeError(`mismatched image size. expected: ${p.length} but got: ${t*s*A}`)}else p=new Uint8Array(t*s*A);return a.width=t,a.height=s,a.data=p,a}function Tp(a,{width:t,height:s},A){if(t===a.width&&s===a.height)return;const p=Pd({},{width:t,height:s},A);Pp(a,p,{x:0,y:0},{x:0,y:0},{width:Math.min(a.width,t),height:Math.min(a.height,s)},A),a.width=t,a.height=s,a.data=p.data}function Pp(a,t,s,A,p,v){if(p.width===0||p.height===0)return t;if(p.width>a.width||p.height>a.height||s.x>a.width-p.width||s.y>a.height-p.height)throw new RangeError("out of range source coordinates for image copy");if(p.width>t.width||p.height>t.height||A.x>t.width-p.width||A.y>t.height-p.height)throw new RangeError("out of range destination coordinates for image copy");const _=a.data,B=t.data;if(_===B)throw new Error("srcData equals dstData, so image is already copied");for(let F=0;F<p.height;F++){const U=((s.y+F)*a.width+s.x)*v,Q=((A.y+F)*t.width+A.x)*v;for(let K=0;K<p.width*v;K++)B[Q+K]=_[U+K]}return t}class mu{constructor(t,s){Pd(this,t,1,s)}resize(t){Tp(this,t,1)}clone(){return new mu({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(t,s,A,p,v){Pp(t,s,A,p,v,1)}}class Jo{constructor(t,s){Pd(this,t,4,s)}resize(t){Tp(this,t,4)}replace(t,s){s?this.data.set(t):this.data=t instanceof Uint8ClampedArray?new Uint8Array(t.buffer):t}clone(){return new Jo({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(t,s,A,p,v){Pp(t,s,A,p,v,4)}setPixel(t,s,A){const p=4*(t*this.width+s);this.data[p+0]=Math.round(255*A.r/A.a),this.data[p+1]=Math.round(255*A.g/A.a),this.data[p+2]=Math.round(255*A.b/A.a),this.data[p+3]=Math.round(255*A.a)}}function hf(a){const t={},s=a.resolution||256,A=a.clips?a.clips.length:1,p=a.image||new Jo({width:s,height:A});if(Math.log(s)/Math.LN2%1!=0)throw new Error(`width is not a power of 2 - ${s}`);const v=(_,B,F)=>{t[a.evaluationKey]=F;const U=a.expression.evaluate(t);p.setPixel(_/4/s,B/4,U)};if(a.clips)for(let _=0,B=0;_<A;++_,B+=4*s)for(let F=0,U=0;F<s;F++,U+=4){const Q=F/(s-1),{start:K,end:X}=a.clips[_];v(B,U,K*(1-Q)+X*Q)}else for(let _=0,B=0;_<s;_++,B+=4)v(0,B,_/(s-1));return p}$e("AlphaImage",mu),$e("RGBAImage",Jo);const df="big-fb";class Ag extends Rn{createBucket(t){return new cg(t)}constructor(t,s){super(t,$h,s),this.heatmapFbos=new Map,this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(t){t==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=hf({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbos.has(df)&&this.heatmapFbos.delete(df)}queryRadius(t){return ph("heatmap-radius",this,t)}queryIntersectsFeature({queryGeometry:t,feature:s,featureState:A,geometry:p,transform:v,pixelsToTileUnits:_,unwrappedTileID:B,getElevation:F}){return qh({queryGeometry:t,size:this.paint.get("heatmap-radius").evaluate(s,A)*_,transform:v,unwrappedTileID:B,getElevation:F},p)}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}}let Lp;var Mp={get paint(){return Lp=Lp||new ci({"hillshade-illumination-direction":new gr(mt.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-altitude":new gr(mt.paint_hillshade["hillshade-illumination-altitude"]),"hillshade-illumination-anchor":new gr(mt.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new gr(mt.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new gr(mt.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new gr(mt.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new gr(mt.paint_hillshade["hillshade-accent-color"]),"hillshade-method":new gr(mt.paint_hillshade["hillshade-method"])})}};class kp extends Rn{constructor(t,s){super(t,Mp,s),this.recalculate({zoom:0,zoomHistory:{}},void 0)}getIlluminationProperties(){let t=this.paint.get("hillshade-illumination-direction").values,s=this.paint.get("hillshade-illumination-altitude").values,A=this.paint.get("hillshade-highlight-color").values,p=this.paint.get("hillshade-shadow-color").values;const v=Math.max(t.length,s.length,A.length,p.length);t=t.concat(Array(v-t.length).fill(t.at(-1))),s=s.concat(Array(v-s.length).fill(s.at(-1))),A=A.concat(Array(v-A.length).fill(A.at(-1))),p=p.concat(Array(v-p.length).fill(p.at(-1)));const _=s.map(On);return{directionRadians:t.map(On),altitudeRadians:_,shadowColor:p,highlightColor:A}}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}}let ea;var yA={get paint(){return ea=ea||new ci({"color-relief-opacity":new gr(mt["paint_color-relief"]["color-relief-opacity"]),"color-relief-color":new ei(mt["paint_color-relief"]["color-relief-color"])})}};class $A{constructor(t,s,A,p){this.context=t,this.format=A,this.texture=t.gl.createTexture(),this.update(s,p)}update(t,s,A){const{width:p,height:v}=t,_=!(this.size&&this.size[0]===p&&this.size[1]===v||A),{context:B}=this,{gl:F}=B;if(this.useMipmap=!!(s&&s.useMipmap),F.bindTexture(F.TEXTURE_2D,this.texture),B.pixelStoreUnpackFlipY.set(!1),B.pixelStoreUnpack.set(1),B.pixelStoreUnpackPremultiplyAlpha.set(this.format===F.RGBA&&(!s||s.premultiply!==!1)),_)this.size=[p,v],t instanceof HTMLImageElement||t instanceof HTMLCanvasElement||t instanceof HTMLVideoElement||t instanceof ImageData||$r(t)?F.texImage2D(F.TEXTURE_2D,0,this.format,this.format,F.UNSIGNED_BYTE,t):F.texImage2D(F.TEXTURE_2D,0,this.format,p,v,0,this.format,F.UNSIGNED_BYTE,t.data);else{const{x:U,y:Q}=A||{x:0,y:0};t instanceof HTMLImageElement||t instanceof HTMLCanvasElement||t instanceof HTMLVideoElement||t instanceof ImageData||$r(t)?F.texSubImage2D(F.TEXTURE_2D,0,U,Q,F.RGBA,F.UNSIGNED_BYTE,t):F.texSubImage2D(F.TEXTURE_2D,0,U,Q,p,v,F.RGBA,F.UNSIGNED_BYTE,t.data)}this.useMipmap&&this.isSizePowerOfTwo()&&F.generateMipmap(F.TEXTURE_2D),B.pixelStoreUnpackFlipY.setDefault(),B.pixelStoreUnpack.setDefault(),B.pixelStoreUnpackPremultiplyAlpha.setDefault()}bind(t,s,A){const{context:p}=this,{gl:v}=p;v.bindTexture(v.TEXTURE_2D,this.texture),A!==v.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(A=v.LINEAR),t!==this.filter&&(v.texParameteri(v.TEXTURE_2D,v.TEXTURE_MAG_FILTER,t),v.texParameteri(v.TEXTURE_2D,v.TEXTURE_MIN_FILTER,A||t),this.filter=t),s!==this.wrap&&(v.texParameteri(v.TEXTURE_2D,v.TEXTURE_WRAP_S,s),v.texParameteri(v.TEXTURE_2D,v.TEXTURE_WRAP_T,s),this.wrap=s)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:t}=this.context;t.deleteTexture(this.texture),this.texture=null}}class Up{constructor(t,s,A,p=1,v=1,_=1,B=0){if(this.uid=t,s.height!==s.width)throw new RangeError("DEM tiles must be square");if(A&&!["mapbox","terrarium","custom"].includes(A))return void Cr(`"${A}" is not a valid encoding type. Valid types include "mapbox", "terrarium" and "custom".`);this.stride=s.height;const F=this.dim=s.height-2;switch(this.data=new Uint32Array(s.data.buffer),A){case"terrarium":this.redFactor=256,this.greenFactor=1,this.blueFactor=1/256,this.baseShift=32768;break;case"custom":this.redFactor=p,this.greenFactor=v,this.blueFactor=_,this.baseShift=B;break;default:this.redFactor=6553.6,this.greenFactor=25.6,this.blueFactor=.1,this.baseShift=1e4}for(let U=0;U<F;U++)this.data[this._idx(-1,U)]=this.data[this._idx(0,U)],this.data[this._idx(F,U)]=this.data[this._idx(F-1,U)],this.data[this._idx(U,-1)]=this.data[this._idx(U,0)],this.data[this._idx(U,F)]=this.data[this._idx(U,F-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(F,-1)]=this.data[this._idx(F-1,0)],this.data[this._idx(-1,F)]=this.data[this._idx(0,F-1)],this.data[this._idx(F,F)]=this.data[this._idx(F-1,F-1)],this.min=Number.MAX_SAFE_INTEGER,this.max=Number.MIN_SAFE_INTEGER;for(let U=0;U<F;U++)for(let Q=0;Q<F;Q++){const K=this.get(U,Q);K>this.max&&(this.max=K),K<this.min&&(this.min=K)}}get(t,s){const A=new Uint8Array(this.data.buffer),p=4*this._idx(t,s);return this.unpack(A[p],A[p+1],A[p+2])}getUnpackVector(){return[this.redFactor,this.greenFactor,this.blueFactor,this.baseShift]}_idx(t,s){if(t<-1||t>=this.dim+1||s<-1||s>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(s+1)*this.stride+(t+1)}unpack(t,s,A){return t*this.redFactor+s*this.greenFactor+A*this.blueFactor-this.baseShift}pack(t){return Dp(t,this.getUnpackVector())}getPixels(){return new Jo({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}backfillBorder(t,s,A){if(this.dim!==t.dim)throw new Error("dem dimension mismatch");let p=s*this.dim,v=s*this.dim+this.dim,_=A*this.dim,B=A*this.dim+this.dim;switch(s){case-1:p=v-1;break;case 1:v=p+1}switch(A){case-1:_=B-1;break;case 1:B=_+1}const F=-s*this.dim,U=-A*this.dim;for(let Q=_;Q<B;Q++)for(let K=p;K<v;K++)this.data[this._idx(K,Q)]=t.data[this._idx(K+F,Q+U)]}}function Dp(a,t){const s=t[0],A=t[1],p=t[2],v=t[3],_=Math.min(s,A,p),B=Math.round((a+v)/_);return{r:Math.floor(B*_/s)%256,g:Math.floor(B*_/A)%256,b:Math.floor(B*_/p)%256}}$e("DEMData",Up);class vA extends Rn{constructor(t,s){super(t,yA,s)}_createColorRamp(t){const s={elevationStops:[],colorStops:[]},A=this._transitionablePaint._values["color-relief-color"].value.expression;if(A instanceof Oc&&A._styleExpression.expression instanceof Gt){this.colorRampExpression=A;const _=A._styleExpression.expression;s.elevationStops=_.labels,s.colorStops=[];for(const B of s.elevationStops)s.colorStops.push(_.evaluate({globals:{elevation:B}}))}if(s.elevationStops.length<1&&(s.elevationStops=[0],s.colorStops=[an.transparent]),s.elevationStops.length<2&&(s.elevationStops.push(s.elevationStops[0]+1),s.colorStops.push(s.colorStops[0])),s.elevationStops.length<=t)return s;const p={elevationStops:[],colorStops:[]},v=(s.elevationStops.length-1)/(t-1);for(let _=0;_<s.elevationStops.length-.5;_+=v)p.elevationStops.push(s.elevationStops[Math.round(_)]),p.colorStops.push(s.colorStops[Math.round(_)]);return Cr(`Too many colors in specification of ${this.id} color-relief layer, may not render properly. Max possible colors: ${t}, provided: ${s.elevationStops.length}`),p}_colorRampChanged(){return this.colorRampExpression!=this._transitionablePaint._values["color-relief-color"].value.expression}getColorRampTextures(t,s,A){if(this.colorRampTextures&&!this._colorRampChanged())return this.colorRampTextures;const p=this._createColorRamp(s),v=new Jo({width:p.colorStops.length,height:1}),_=new Jo({width:p.colorStops.length,height:1});for(let B=0;B<p.elevationStops.length;B++){const F=Dp(p.elevationStops[B],A);_.setPixel(0,B,new an(F.r/255,F.g/255,F.b/255,1)),v.setPixel(0,B,p.colorStops[B])}return this.colorRampTextures={elevationTexture:new $A(t,_,t.gl.RGBA),colorTexture:new $A(t,v,t.gl.RGBA)},this.colorRampTextures}hasOffscreenPass(){return this.visibility!=="none"&&!!this.colorRampTextures}}const ug=Vn([{name:"a_pos",components:2,type:"Int16"}],4),{members:WA}=ug;function ff(a,t,s){const A=s.patternDependencies;let p=!1;for(const v of t){const _=v.paint.get(`${a}-pattern`);_.isConstant()||(p=!0);const B=_.constantOr(null);B&&(p=!0,A[B.to]=!0,A[B.from]=!0)}return p}function pf(a,t,s,A,p){const{zoom:v}=A,_=p.patternDependencies;for(const B of t){const F=B.paint.get(`${a}-pattern`).value;if(F.kind!=="constant"){let U=F.evaluate({zoom:v-1},s,{},p.availableImages),Q=F.evaluate({zoom:v},s,{},p.availableImages),K=F.evaluate({zoom:v+1},s,{},p.availableImages);U=U&&U.name?U.name:U,Q=Q&&Q.name?Q.name:Q,K=K&&K.name?K.name:K,_[U]=!0,_[Q]=!0,_[K]=!0,s.patterns[B.id]={min:U,mid:Q,max:K}}}return s}function Rp(a,t,s,A,p){let v;if(p===(function(_,B,F,U){let Q=0;for(let K=B,X=F-U;K<F;K+=U)Q+=(_[X]-_[K])*(_[K+1]+_[X+1]),X=K;return Q})(a,t,s,A)>0)for(let _=t;_<s;_+=A)v=ZA(_/A|0,a[_],a[_+1],v);else for(let _=s-A;_>=t;_-=A)v=ZA(_/A|0,a[_],a[_+1],v);return v&&gu(v,v.next)&&(Vu(v),v=v.next),v}function Hu(a,t){if(!a)return a;t||(t=a);let s,A=a;do if(s=!1,A.steiner||!gu(A,A.next)&&Hi(A.prev,A,A.next)!==0)A=A.next;else{if(Vu(A),A=t=A.prev,A===A.next)break;s=!0}while(s||A!==t);return t}function Wh(a,t,s,A,p,v,_){if(!a)return;!_&&v&&(function(F,U,Q,K){let X=F;do X.z===0&&(X.z=To(X.x,X.y,U,Q,K)),X.prevZ=X.prev,X.nextZ=X.next,X=X.next;while(X!==F);X.prevZ.nextZ=null,X.prevZ=null,(function(J){let se,le=1;do{let ue,Be=J;J=null;let tt=null;for(se=0;Be;){se++;let Ee=Be,Le=0;for(let ut=0;ut<le&&(Le++,Ee=Ee.nextZ,Ee);ut++);let st=le;for(;Le>0||st>0&&Ee;)Le!==0&&(st===0||!Ee||Be.z<=Ee.z)?(ue=Be,Be=Be.nextZ,Le--):(ue=Ee,Ee=Ee.nextZ,st--),tt?tt.nextZ=ue:J=ue,ue.prevZ=tt,tt=ue;Be=Ee}tt.nextZ=null,le*=2}while(se>1)})(X)})(a,A,p,v);let B=a;for(;a.prev!==a.next;){const F=a.prev,U=a.next;if(v?mf(a,A,p,v):Jy(a))t.push(F.i,a.i,U.i),Vu(a),a=U.next,B=U.next;else if((a=U)===B){_?_===1?Wh(a=Np(Hu(a),t),t,s,A,p,v,2):_===2&&Wc(a,t,s,A,p,v):Wh(Hu(a),t,s,A,p,v,1);break}}}function Jy(a){const t=a.prev,s=a,A=a.next;if(Hi(t,s,A)>=0)return!1;const p=t.x,v=s.x,_=A.x,B=t.y,F=s.y,U=A.y,Q=Math.min(p,v,_),K=Math.min(B,F,U),X=Math.max(p,v,_),J=Math.max(B,F,U);let se=A.next;for(;se!==t;){if(se.x>=Q&&se.x<=X&&se.y>=K&&se.y<=J&&zs(p,B,v,F,_,U,se.x,se.y)&&Hi(se.prev,se,se.next)>=0)return!1;se=se.next}return!0}function mf(a,t,s,A){const p=a.prev,v=a,_=a.next;if(Hi(p,v,_)>=0)return!1;const B=p.x,F=v.x,U=_.x,Q=p.y,K=v.y,X=_.y,J=Math.min(B,F,U),se=Math.min(Q,K,X),le=Math.max(B,F,U),ue=Math.max(Q,K,X),Be=To(J,se,t,s,A),tt=To(le,ue,t,s,A);let Ee=a.prevZ,Le=a.nextZ;for(;Ee&&Ee.z>=Be&&Le&&Le.z<=tt;){if(Ee.x>=J&&Ee.x<=le&&Ee.y>=se&&Ee.y<=ue&&Ee!==p&&Ee!==_&&zs(B,Q,F,K,U,X,Ee.x,Ee.y)&&Hi(Ee.prev,Ee,Ee.next)>=0||(Ee=Ee.prevZ,Le.x>=J&&Le.x<=le&&Le.y>=se&&Le.y<=ue&&Le!==p&&Le!==_&&zs(B,Q,F,K,U,X,Le.x,Le.y)&&Hi(Le.prev,Le,Le.next)>=0))return!1;Le=Le.nextZ}for(;Ee&&Ee.z>=Be;){if(Ee.x>=J&&Ee.x<=le&&Ee.y>=se&&Ee.y<=ue&&Ee!==p&&Ee!==_&&zs(B,Q,F,K,U,X,Ee.x,Ee.y)&&Hi(Ee.prev,Ee,Ee.next)>=0)return!1;Ee=Ee.prevZ}for(;Le&&Le.z<=tt;){if(Le.x>=J&&Le.x<=le&&Le.y>=se&&Le.y<=ue&&Le!==p&&Le!==_&&zs(B,Q,F,K,U,X,Le.x,Le.y)&&Hi(Le.prev,Le,Le.next)>=0)return!1;Le=Le.nextZ}return!0}function Np(a,t){let s=a;do{const A=s.prev,p=s.next.next;!gu(A,p)&&gf(A,s,s.next,p)&&yh(A,p)&&yh(p,A)&&(t.push(A.i,s.i,p.i),Vu(s),Vu(s.next),s=a=p),s=s.next}while(s!==a);return Hu(s)}function Wc(a,t,s,A,p,v){let _=a;do{let B=_.next.next;for(;B!==_.prev;){if(_.i!==B.i&&Ld(_,B)){let F=vh(_,B);return _=Hu(_,_.next),F=Hu(F,F.next),Wh(_,t,s,A,p,v,0),void Wh(F,t,s,A,p,v,0)}B=B.next}_=_.next}while(_!==a)}function yi(a,t){let s=a.x-t.x;return s===0&&(s=a.y-t.y,s===0)&&(s=(a.next.y-a.y)/(a.next.x-a.x)-(t.next.y-t.y)/(t.next.x-t.x)),s}function ta(a,t){const s=(function(p,v){let _=v;const B=p.x,F=p.y;let U,Q=-1/0;if(gu(p,_))return _;do{if(gu(p,_.next))return _.next;if(F<=_.y&&F>=_.next.y&&_.next.y!==_.y){const le=_.x+(F-_.y)*(_.next.x-_.x)/(_.next.y-_.y);if(le<=B&&le>Q&&(Q=le,U=_.x<_.next.x?_:_.next,le===B))return U}_=_.next}while(_!==v);if(!U)return null;const K=U,X=U.x,J=U.y;let se=1/0;_=U;do{if(B>=_.x&&_.x>=X&&B!==_.x&&gh(F<J?B:Q,F,X,J,F<J?Q:B,F,_.x,_.y)){const le=Math.abs(F-_.y)/(B-_.x);yh(_,p)&&(le<se||le===se&&(_.x>U.x||_.x===U.x&&_o(U,_)))&&(U=_,se=le)}_=_.next}while(_!==K);return U})(a,t);if(!s)return t;const A=vh(s,a);return Hu(A,A.next),Hu(s,s.next)}function _o(a,t){return Hi(a.prev,a,t.prev)<0&&Hi(t.next,a,a.next)<0}function To(a,t,s,A,p){return(a=1431655765&((a=858993459&((a=252645135&((a=16711935&((a=(a-s)*p|0)|a<<8))|a<<4))|a<<2))|a<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=(t-A)*p|0)|t<<8))|t<<4))|t<<2))|t<<1))<<1}function mc(a){let t=a,s=a;do(t.x<s.x||t.x===s.x&&t.y<s.y)&&(s=t),t=t.next;while(t!==a);return s}function gh(a,t,s,A,p,v,_,B){return(p-_)*(t-B)>=(a-_)*(v-B)&&(a-_)*(A-B)>=(s-_)*(t-B)&&(s-_)*(v-B)>=(p-_)*(A-B)}function zs(a,t,s,A,p,v,_,B){return!(a===_&&t===B)&&gh(a,t,s,A,p,v,_,B)}function Ld(a,t){return a.next.i!==t.i&&a.prev.i!==t.i&&!(function(s,A){let p=s;do{if(p.i!==s.i&&p.next.i!==s.i&&p.i!==A.i&&p.next.i!==A.i&&gf(p,p.next,s,A))return!0;p=p.next}while(p!==s);return!1})(a,t)&&(yh(a,t)&&yh(t,a)&&(function(s,A){let p=s,v=!1;const _=(s.x+A.x)/2,B=(s.y+A.y)/2;do p.y>B!=p.next.y>B&&p.next.y!==p.y&&_<(p.next.x-p.x)*(B-p.y)/(p.next.y-p.y)+p.x&&(v=!v),p=p.next;while(p!==s);return v})(a,t)&&(Hi(a.prev,a,t.prev)||Hi(a,t.prev,t))||gu(a,t)&&Hi(a.prev,a,a.next)>0&&Hi(t.prev,t,t.next)>0)}function Hi(a,t,s){return(t.y-a.y)*(s.x-t.x)-(t.x-a.x)*(s.y-t.y)}function gu(a,t){return a.x===t.x&&a.y===t.y}function gf(a,t,s,A){const p=wa(Hi(a,t,s)),v=wa(Hi(a,t,A)),_=wa(Hi(s,A,a)),B=wa(Hi(s,A,t));return p!==v&&_!==B||!(p!==0||!ju(a,s,t))||!(v!==0||!ju(a,A,t))||!(_!==0||!ju(s,a,A))||!(B!==0||!ju(s,t,A))}function ju(a,t,s){return t.x<=Math.max(a.x,s.x)&&t.x>=Math.min(a.x,s.x)&&t.y<=Math.max(a.y,s.y)&&t.y>=Math.min(a.y,s.y)}function wa(a){return a>0?1:a<0?-1:0}function yh(a,t){return Hi(a.prev,a,a.next)<0?Hi(a,t,a.next)>=0&&Hi(a,a.prev,t)>=0:Hi(a,t,a.prev)<0||Hi(a,a.next,t)<0}function vh(a,t){const s=Md(a.i,a.x,a.y),A=Md(t.i,t.x,t.y),p=a.next,v=t.prev;return a.next=t,t.prev=a,s.next=p,p.prev=s,A.next=s,s.prev=A,v.next=A,A.prev=v,A}function ZA(a,t,s,A){const p=Md(a,t,s);return A?(p.next=A.next,p.prev=A,A.next.prev=p,A.next=p):(p.prev=p,p.next=p),p}function Vu(a){a.next.prev=a.prev,a.prev.next=a.next,a.prevZ&&(a.prevZ.nextZ=a.nextZ),a.nextZ&&(a.nextZ.prevZ=a.prevZ)}function Md(a,t,s){return{i:a,x:t,y:s,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}class gc{constructor(t,s){if(s>t)throw new Error("Min granularity must not be greater than base granularity.");this._baseZoomGranularity=t,this._minGranularity=s}getGranularityForZoomLevel(t){return Math.max(Math.floor(this._baseZoomGranularity/(1<<t)),this._minGranularity,1)}}class _h{constructor(t){this.fill=t.fill,this.line=t.line,this.tile=t.tile,this.stencil=t.stencil,this.circle=t.circle}}_h.noSubdivision=new _h({fill:new gc(0,0),line:new gc(0,0),tile:new gc(0,0),stencil:new gc(0,0),circle:1}),$e("SubdivisionGranularityExpression",gc),$e("SubdivisionGranularitySetting",_h);const yc=-32768,Gu=32767;class kd{constructor(t,s){this._vertexBuffer=[],this._vertexDictionary=new Map,this._used=!1,this._granularity=t,this._granularityCellSize=je/t,this._canonical=s}_getKey(t,s){return(t+=32768)<<16|s+32768}_vertexToIndex(t,s){if(t<-32768||s<-32768||t>32767||s>32767)throw new Error("Vertex coordinates are out of signed 16 bit integer range.");const A=0|Math.round(t),p=0|Math.round(s),v=this._getKey(A,p);if(this._vertexDictionary.has(v))return this._vertexDictionary.get(v);const _=this._vertexBuffer.length/2;return this._vertexDictionary.set(v,_),this._vertexBuffer.push(A,p),_}_subdivideTrianglesScanline(t){if(this._granularity<2)return(function(p,v){const _=[];for(let B=0;B<v.length;B+=3){const F=v[B],U=v[B+1],Q=v[B+2],K=p[2*F],X=p[2*F+1];(p[2*U]-K)*(p[2*Q+1]-X)-(p[2*U+1]-X)*(p[2*Q]-K)>0?(_.push(F),_.push(Q),_.push(U)):(_.push(F),_.push(U),_.push(Q))}return _})(this._vertexBuffer,t);const s=[],A=t.length;for(let p=0;p<A;p+=3){const v=[t[p+0],t[p+1],t[p+2]],_=[this._vertexBuffer[2*t[p+0]+0],this._vertexBuffer[2*t[p+0]+1],this._vertexBuffer[2*t[p+1]+0],this._vertexBuffer[2*t[p+1]+1],this._vertexBuffer[2*t[p+2]+0],this._vertexBuffer[2*t[p+2]+1]];let B=1/0,F=1/0,U=-1/0,Q=-1/0;for(let le=0;le<3;le++){const ue=_[2*le],Be=_[2*le+1];B=Math.min(B,ue),U=Math.max(U,ue),F=Math.min(F,Be),Q=Math.max(Q,Be)}if(B===U||F===Q)continue;const K=Math.floor(B/this._granularityCellSize),X=Math.ceil(U/this._granularityCellSize),J=Math.floor(F/this._granularityCellSize),se=Math.ceil(Q/this._granularityCellSize);if(K!==X||J!==se)for(let le=J;le<se;le++){const ue=this._scanlineGenerateVertexRingForCellRow(le,_,v);vf(this._vertexBuffer,ue,s)}else s.push(...v)}return s}_scanlineGenerateVertexRingForCellRow(t,s,A){const p=t*this._granularityCellSize,v=p+this._granularityCellSize,_=[];for(let B=0;B<3;B++){const F=s[2*B],U=s[2*B+1],Q=s[2*(B+1)%6],K=s[(2*(B+1)+1)%6],X=s[2*(B+2)%6],J=s[(2*(B+2)+1)%6],se=Q-F,le=K-U,ue=se===0,Be=le===0,tt=(p-U)/le,Ee=(v-U)/le,Le=Math.min(tt,Ee),st=Math.max(tt,Ee);if(!Be&&(Le>=1||st<=0)||Be&&(U<p||U>v)){K>=p&&K<=v&&_.push(A[(B+1)%3]);continue}!Be&&Le>0&&_.push(this._vertexToIndex(F+se*Le,U+le*Le));const ut=F+se*Math.max(Le,0),Mt=F+se*Math.min(st,1);ue||this._generateIntraEdgeVertices(_,F,U,Q,K,ut,Mt),!Be&&st<1&&_.push(this._vertexToIndex(F+se*st,U+le*st)),(Be||K>=p&&K<=v)&&_.push(A[(B+1)%3]),!Be&&(K<=p||K>=v)&&this._generateInterEdgeVertices(_,F,U,Q,K,X,J,Mt,p,v)}return _}_generateIntraEdgeVertices(t,s,A,p,v,_,B){const F=p-s,U=v-A,Q=U===0,K=Q?Math.min(s,p):Math.min(_,B),X=Q?Math.max(s,p):Math.max(_,B),J=Math.floor(K/this._granularityCellSize)+1,se=Math.ceil(X/this._granularityCellSize)-1;if(Q?s<p:_<B)for(let le=J;le<=se;le++){const ue=le*this._granularityCellSize;t.push(this._vertexToIndex(ue,A+U*(ue-s)/F))}else for(let le=se;le>=J;le--){const ue=le*this._granularityCellSize;t.push(this._vertexToIndex(ue,A+U*(ue-s)/F))}}_generateInterEdgeVertices(t,s,A,p,v,_,B,F,U,Q){const K=v-A,X=_-p,J=B-v,se=(U-v)/J,le=(Q-v)/J,ue=Math.min(se,le),Be=Math.max(se,le),tt=p+X*ue;let Ee=Math.floor(Math.min(tt,F)/this._granularityCellSize)+1,Le=Math.ceil(Math.max(tt,F)/this._granularityCellSize)-1,st=F<tt;const ut=J===0;if(ut&&(B===U||B===Q))return;if(ut||ue>=1||Be<=0){const Xt=A-B,Vt=_+(s-_)*Math.min((U-B)/Xt,(Q-B)/Xt);Ee=Math.floor(Math.min(Vt,F)/this._granularityCellSize)+1,Le=Math.ceil(Math.max(Vt,F)/this._granularityCellSize)-1,st=F<Vt}const Mt=K>0?Q:U;if(st)for(let Xt=Ee;Xt<=Le;Xt++)t.push(this._vertexToIndex(Xt*this._granularityCellSize,Mt));else for(let Xt=Le;Xt>=Ee;Xt--)t.push(this._vertexToIndex(Xt*this._granularityCellSize,Mt))}_generateOutline(t){const s=[];for(const A of t){const p=XA(A,this._granularity,!0),v=this._pointArrayToIndices(p),_=[];for(let B=1;B<v.length;B++)_.push(v[B-1]),_.push(v[B]);s.push(_)}return s}_handlePoles(t){let s=!1,A=!1;this._canonical&&(this._canonical.y===0&&(s=!0),this._canonical.y===(1<<this._canonical.z)-1&&(A=!0)),(s||A)&&this._fillPoles(t,s,A)}_ensureNoPoleVertices(){const t=this._vertexBuffer;for(let s=0;s<t.length;s+=2){const A=t[s+1];A===yc&&(t[s+1]=-32767),A===Gu&&(t[s+1]=32766)}}_generatePoleQuad(t,s,A,p,v,_){p>v!=(_===yc)?(t.push(s),t.push(A),t.push(this._vertexToIndex(p,_)),t.push(A),t.push(this._vertexToIndex(v,_)),t.push(this._vertexToIndex(p,_))):(t.push(A),t.push(s),t.push(this._vertexToIndex(p,_)),t.push(this._vertexToIndex(v,_)),t.push(A),t.push(this._vertexToIndex(p,_)))}_fillPoles(t,s,A){const p=this._vertexBuffer,v=je,_=t.length;for(let B=2;B<_;B+=3){const F=t[B-2],U=t[B-1],Q=t[B],K=p[2*F],X=p[2*F+1],J=p[2*U],se=p[2*U+1],le=p[2*Q],ue=p[2*Q+1];s&&(X===0&&se===0&&this._generatePoleQuad(t,F,U,K,J,yc),se===0&&ue===0&&this._generatePoleQuad(t,U,Q,J,le,yc),ue===0&&X===0&&this._generatePoleQuad(t,Q,F,le,K,yc)),A&&(X===v&&se===v&&this._generatePoleQuad(t,F,U,K,J,Gu),se===v&&ue===v&&this._generatePoleQuad(t,U,Q,J,le,Gu),ue===v&&X===v&&this._generatePoleQuad(t,Q,F,le,K,Gu))}}_initializeVertices(t){for(let s=0;s<t.length;s+=2)this._vertexToIndex(t[s],t[s+1])}subdividePolygonInternal(t,s){if(this._used)throw new Error("Subdivision: multiple use not allowed.");this._used=!0;const{flattened:A,holeIndices:p}=(function(B){const F=[],U=[];for(const Q of B)if(Q.length!==0){Q!==B[0]&&F.push(U.length/2);for(let K=0;K<Q.length;K++)U.push(Q[K].x),U.push(Q[K].y)}return{flattened:U,holeIndices:F}})(t);let v;this._initializeVertices(A);try{const B=(function(U,Q,K=2){const X=Q&&Q.length,J=X?Q[0]*K:U.length;let se=Rp(U,0,J,K,!0);const le=[];if(!se||se.next===se.prev)return le;let ue,Be,tt;if(X&&(se=(function(Ee,Le,st,ut){const Mt=[];for(let Xt=0,Vt=Le.length;Xt<Vt;Xt++){const ir=Rp(Ee,Le[Xt]*ut,Xt<Vt-1?Le[Xt+1]*ut:Ee.length,ut,!1);ir===ir.next&&(ir.steiner=!0),Mt.push(mc(ir))}Mt.sort(yi);for(let Xt=0;Xt<Mt.length;Xt++)st=ta(Mt[Xt],st);return st})(U,Q,se,K)),U.length>80*K){ue=U[0],Be=U[1];let Ee=ue,Le=Be;for(let st=K;st<J;st+=K){const ut=U[st],Mt=U[st+1];ut<ue&&(ue=ut),Mt<Be&&(Be=Mt),ut>Ee&&(Ee=ut),Mt>Le&&(Le=Mt)}tt=Math.max(Ee-ue,Le-Be),tt=tt!==0?32767/tt:0}return Wh(se,le,K,ue,Be,tt,0),le})(A,p),F=this._convertIndices(A,B);v=this._subdivideTrianglesScanline(F)}catch(B){console.error(B)}let _=[];return s&&(_=this._generateOutline(t)),this._ensureNoPoleVertices(),this._handlePoles(v),{verticesFlattened:this._vertexBuffer,indicesTriangles:v,indicesLineList:_}}_convertIndices(t,s){const A=[];for(let p=0;p<s.length;p++)A.push(this._vertexToIndex(t[2*s[p]],t[2*s[p]+1]));return A}_pointArrayToIndices(t){const s=[];for(let A=0;A<t.length;A++){const p=t[A];s.push(this._vertexToIndex(p.x,p.y))}return s}}function yf(a,t,s,A=!0){return new kd(s,t).subdividePolygonInternal(a,A)}function XA(a,t,s=!1){if(!a||a.length<1)return[];if(a.length<2)return[];const A=a[0],p=a[a.length-1],v=s&&(A.x!==p.x||A.y!==p.y);if(t<2)return v?[...a,a[0]]:[...a];const _=Math.floor(je/t),B=[];B.push(new x(a[0].x,a[0].y));const F=a.length,U=v?F:F-1;for(let Q=0;Q<U;Q++){const K=a[Q],X=Q<F-1?a[Q+1]:a[0],J=K.x,se=K.y,le=X.x,ue=X.y,Be=J!==le,tt=se!==ue;if(!Be&&!tt)continue;const Ee=le-J,Le=ue-se,st=Math.abs(Ee),ut=Math.abs(Le);let Mt=J,Xt=se;for(;;){const ir=Ee>0?(Math.floor(Mt/_)+1)*_:(Math.ceil(Mt/_)-1)*_,_r=Le>0?(Math.floor(Xt/_)+1)*_:(Math.ceil(Xt/_)-1)*_,or=Math.abs(Mt-ir),qt=Math.abs(Xt-_r),Ot=Math.abs(Mt-le),Lr=Math.abs(Xt-ue),Ir=Be?or/st:Number.POSITIVE_INFINITY,kr=tt?qt/ut:Number.POSITIVE_INFINITY;if((Ot<=or||!Be)&&(Lr<=qt||!tt))break;if(Ir<kr&&Be||!tt){Mt=ir,Xt+=Le*Ir;const Er=new x(Mt,Math.round(Xt));B[B.length-1].x===Er.x&&B[B.length-1].y===Er.y||B.push(Er)}else{Mt+=Ee*kr,Xt=_r;const Er=new x(Math.round(Mt),Xt);B[B.length-1].x===Er.x&&B[B.length-1].y===Er.y||B.push(Er)}}const Vt=new x(le,ue);B[B.length-1].x===Vt.x&&B[B.length-1].y===Vt.y||B.push(Vt)}return B}function vf(a,t,s){if(t.length===0)throw new Error("Subdivision vertex ring is empty.");let A=0,p=a[2*t[0]];for(let F=1;F<t.length;F++){const U=a[2*t[F]];U<p&&(p=U,A=F)}const v=t.length;let _=A,B=(_+1)%v;for(;;){const F=_-1>=0?_-1:v-1,U=(B+1)%v,Q=a[2*t[F]],K=a[2*t[U]],X=a[2*t[_]],J=a[2*t[_]+1],se=a[2*t[B]+1];let le=!1;if(Q<K)le=!0;else if(Q>K)le=!1;else{const ue=se-J,Be=-(a[2*t[B]]-X),tt=J<se?1:-1;((Q-X)*ue+(a[2*t[F]+1]-J)*Be)*tt>((K-X)*ue+(a[2*t[U]+1]-J)*Be)*tt&&(le=!0)}if(le){const ue=t[F],Be=t[_],tt=t[B];ue!==Be&&ue!==tt&&Be!==tt&&s.push(tt,Be,ue),_--,_<0&&(_=v-1)}else{const ue=t[U],Be=t[_],tt=t[B];ue!==Be&&ue!==tt&&Be!==tt&&s.push(tt,Be,ue),B++,B>=v&&(B=0)}if(F===U)break}}function Wa(a,t,s,A,p,v,_,B,F){const U=p.length/2,Q=_&&B&&F;if(U<nr.MAX_VERTEX_ARRAY_LENGTH){const K=t.prepareSegment(U,s,A),X=K.vertexLength;for(let le=0;le<v.length;le+=3)A.emplaceBack(X+v[le],X+v[le+1],X+v[le+2]);let J,se;K.vertexLength+=U,K.primitiveLength+=v.length/3,Q&&(se=_.prepareSegment(U,s,B),J=se.vertexLength,se.vertexLength+=U);for(let le=0;le<p.length;le+=2)a(p[le],p[le+1]);if(Q)for(let le=0;le<F.length;le++){const ue=F[le];for(let Be=1;Be<ue.length;Be+=2)B.emplaceBack(J+ue[Be-1],J+ue[Be]);se.primitiveLength+=ue.length/2}}else(function(K,X,J,se,le,ue){const Be=[];for(let ut=0;ut<se.length/2;ut++)Be.push(-1);const tt={count:0};let Ee=0,Le=K.getOrCreateLatestSegment(X,J),st=Le.vertexLength;for(let ut=2;ut<le.length;ut+=3){const Mt=le[ut-2],Xt=le[ut-1],Vt=le[ut];let ir=Be[Mt]<Ee,_r=Be[Xt]<Ee,or=Be[Vt]<Ee;Le.vertexLength+((ir?1:0)+(_r?1:0)+(or?1:0))>nr.MAX_VERTEX_ARRAY_LENGTH&&(Le=K.createNewSegment(X,J),Ee=tt.count,ir=!0,_r=!0,or=!0,st=0);const qt=Zc(Be,se,ue,tt,Mt,ir,Le),Ot=Zc(Be,se,ue,tt,Xt,_r,Le),Lr=Zc(Be,se,ue,tt,Vt,or,Le);J.emplaceBack(st+qt-Ee,st+Ot-Ee,st+Lr-Ee),Le.primitiveLength++}})(t,s,A,p,v,a),Q&&(function(K,X,J,se,le,ue){const Be=[];for(let ut=0;ut<se.length/2;ut++)Be.push(-1);const tt={count:0};let Ee=0,Le=K.getOrCreateLatestSegment(X,J),st=Le.vertexLength;for(let ut=0;ut<le.length;ut++){const Mt=le[ut];for(let Xt=1;Xt<le[ut].length;Xt+=2){const Vt=Mt[Xt-1],ir=Mt[Xt];let _r=Be[Vt]<Ee,or=Be[ir]<Ee;Le.vertexLength+((_r?1:0)+(or?1:0))>nr.MAX_VERTEX_ARRAY_LENGTH&&(Le=K.createNewSegment(X,J),Ee=tt.count,_r=!0,or=!0,st=0);const qt=Zc(Be,se,ue,tt,Vt,_r,Le),Ot=Zc(Be,se,ue,tt,ir,or,Le);J.emplaceBack(st+qt-Ee,st+Ot-Ee),Le.primitiveLength++}}})(_,s,B,p,F,a),t.forceNewSegmentOnNextPrepare(),_?.forceNewSegmentOnNextPrepare()}function Zc(a,t,s,A,p,v,_){if(v){const B=A.count;return s(t[2*p],t[2*p+1]),a[p]=A.count,A.count++,_.vertexLength++,B}return a[p]}class vc{constructor(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map((s=>s.id)),this.index=t.index,this.hasDependencies=!1,this.patternFeatures=[],this.layoutVertexArray=new ve,this.indexArray=new Dt,this.indexArray2=new Pt,this.programConfigurations=new cs(t.layers,t.zoom),this.segments=new nr,this.segments2=new nr,this.stateDependentLayerIds=this.layers.filter((s=>s.isStateDependent())).map((s=>s.id))}populate(t,s,A){this.hasDependencies=ff("fill",this.layers,s);const p=this.layers[0].layout.get("fill-sort-key"),v=!p.isConstant(),_=[];for(const{feature:B,id:F,index:U,sourceLayerIndex:Q}of t){const K=this.layers[0]._featureFilter.needGeometry,X=qA(B,K);if(!this.layers[0]._featureFilter.filter(new Mr(this.zoom),X,A))continue;const J=v?p.evaluate(X,{},A,s.availableImages):void 0,se={id:F,properties:B.properties,type:B.type,sourceLayerIndex:Q,index:U,geometry:K?X.geometry:KA(B),patterns:{},sortKey:J};_.push(se)}v&&_.sort(((B,F)=>B.sortKey-F.sortKey));for(const B of _){const{geometry:F,index:U,sourceLayerIndex:Q}=B;if(this.hasDependencies){const K=pf("fill",this.layers,B,{zoom:this.zoom},s);this.patternFeatures.push(K)}else this.addFeature(B,F,U,A,{},s.subdivisionGranularity);s.featureIndex.insert(t[U].feature,F,U,Q,this.index)}}update(t,s,A){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,s,this.stateDependentLayers,{imagePositions:A})}addFeatures(t,s,A){for(const p of this.patternFeatures)this.addFeature(p,p.geometry,p.index,s,A,t.subdivisionGranularity)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,WA),this.indexBuffer=t.createIndexBuffer(this.indexArray),this.indexBuffer2=t.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(t),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(t,s,A,p,v,_){for(const B of Ma(s,500)){const F=yf(B,p,_.fill.getGranularityForZoomLevel(p.z)),U=this.layoutVertexArray;Wa(((Q,K)=>{U.emplaceBack(Q,K)}),this.segments,this.layoutVertexArray,this.indexArray,F.verticesFlattened,F.indicesTriangles,this.segments2,this.indexArray2,F.indicesLineList)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,A,{imagePositions:v,canonical:p})}}let _l,Qp;$e("FillBucket",vc,{omit:["layers","patternFeatures"]});var Op={get paint(){return Qp=Qp||new ci({"fill-antialias":new gr(mt.paint_fill["fill-antialias"]),"fill-opacity":new xr(mt.paint_fill["fill-opacity"]),"fill-color":new xr(mt.paint_fill["fill-color"]),"fill-outline-color":new xr(mt.paint_fill["fill-outline-color"]),"fill-translate":new gr(mt.paint_fill["fill-translate"]),"fill-translate-anchor":new gr(mt.paint_fill["fill-translate-anchor"]),"fill-pattern":new Ti(mt.paint_fill["fill-pattern"])})},get layout(){return _l=_l||new ci({"fill-sort-key":new xr(mt.layout_fill["fill-sort-key"])})}};class zp extends Rn{constructor(t,s){super(t,Op,s)}recalculate(t,s){super.recalculate(t,s);const A=this.paint._values["fill-outline-color"];A.value.kind==="constant"&&A.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(t){return new vc(t)}queryRadius(){return mh(this.paint.get("fill-translate"))}queryIntersectsFeature({queryGeometry:t,geometry:s,transform:A,pixelsToTileUnits:p}){return Kh($c(t,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),-A.bearingInRadians,p),s)}isTileClipped(){return!0}}const ev=Vn([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),Ku=Vn([{name:"a_centroid",components:2,type:"Int16"}],4),{members:hg}=ev;class wh{constructor(t,s,A,p,v){this.properties={},this.extent=A,this.type=0,this.id=void 0,this._pbf=t,this._geometry=-1,this._keys=p,this._values=v,t.readFields(xh,this,s)}loadGeometry(){const t=this._pbf;t.pos=this._geometry;const s=t.readVarint()+t.pos,A=[];let p,v=1,_=0,B=0,F=0;for(;t.pos<s;){if(_<=0){const U=t.readVarint();v=7&U,_=U>>3}if(_--,v===1||v===2)B+=t.readSVarint(),F+=t.readSVarint(),v===1&&(p&&A.push(p),p=[]),p&&p.push(new x(B,F));else{if(v!==7)throw new Error(`unknown command ${v}`);p&&p.push(p[0].clone())}}return p&&A.push(p),A}bbox(){const t=this._pbf;t.pos=this._geometry;const s=t.readVarint()+t.pos;let A=1,p=0,v=0,_=0,B=1/0,F=-1/0,U=1/0,Q=-1/0;for(;t.pos<s;){if(p<=0){const K=t.readVarint();A=7&K,p=K>>3}if(p--,A===1||A===2)v+=t.readSVarint(),_+=t.readSVarint(),v<B&&(B=v),v>F&&(F=v),_<U&&(U=_),_>Q&&(Q=_);else if(A!==7)throw new Error(`unknown command ${A}`)}return[B,U,F,Q]}toGeoJSON(t,s,A){const p=this.extent*Math.pow(2,A),v=this.extent*t,_=this.extent*s,B=this.loadGeometry();function F(X){return[360*(X.x+v)/p-180,360/Math.PI*Math.atan(Math.exp((1-2*(X.y+_)/p)*Math.PI))-90]}function U(X){return X.map(F)}let Q;if(this.type===1){const X=[];for(const se of B)X.push(se[0]);const J=U(X);Q=X.length===1?{type:"Point",coordinates:J[0]}:{type:"MultiPoint",coordinates:J}}else if(this.type===2){const X=B.map(U);Q=X.length===1?{type:"LineString",coordinates:X[0]}:{type:"MultiLineString",coordinates:X}}else{if(this.type!==3)throw new Error("unknown feature type");{const X=_f(B),J=[];for(const se of X)J.push(se.map(U));Q=J.length===1?{type:"Polygon",coordinates:J[0]}:{type:"MultiPolygon",coordinates:J}}}const K={type:"Feature",geometry:Q,properties:this.properties};return this.id!=null&&(K.id=this.id),K}}function xh(a,t,s){a===1?t.id=s.readVarint():a===2?(function(A,p){const v=A.readVarint()+A.pos;for(;A.pos<v;){const _=p._keys[A.readVarint()],B=p._values[A.readVarint()];p.properties[_]=B}})(s,t):a===3?t.type=s.readVarint():a===4&&(t._geometry=s.pos)}function _f(a){const t=a.length;if(t<=1)return[a];const s=[];let A,p;for(let v=0;v<t;v++){const _=bh(a[v]);_!==0&&(p===void 0&&(p=_<0),p===_<0?(A&&s.push(A),A=[a[v]]):A&&A.push(a[v]))}return A&&s.push(A),s}function bh(a){let t=0;for(let s,A,p=0,v=a.length,_=v-1;p<v;_=p++)s=a[p],A=a[_],t+=(A.x-s.x)*(s.y+A.y);return t}wh.types=["Unknown","Point","LineString","Polygon"];class dg{constructor(t,s){this.version=1,this.name="",this.extent=4096,this.length=0,this._pbf=t,this._keys=[],this._values=[],this._features=[],t.readFields(fg,this,s),this.length=this._features.length}feature(t){if(t<0||t>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[t];const s=this._pbf.readVarint()+this._pbf.pos;return new wh(this._pbf,s,this.extent,this._keys,this._values)}}function fg(a,t,s){a===15?t.version=s.readVarint():a===1?t.name=s.readString():a===5?t.extent=s.readVarint():a===2?t._features.push(s.pos):a===3?t._keys.push(s.readString()):a===4&&t._values.push((function(A){let p=null;const v=A.readVarint()+A.pos;for(;A.pos<v;){const _=A.readVarint()>>3;p=_===1?A.readString():_===2?A.readFloat():_===3?A.readDouble():_===4?A.readVarint64():_===5?A.readVarint():_===6?A.readSVarint():_===7?A.readBoolean():null}if(p==null)throw new Error("unknown feature value");return p})(s))}class wf{constructor(t,s){this.layers=t.readFields(xf,{},s)}}function xf(a,t,s){if(a===3){const A=new dg(s,s.readVarint()+s.pos);A.length&&(t[A.name]=A)}}const Hp=Math.pow(2,13);function Ud(a,t,s,A,p,v,_,B){a.emplaceBack(t,s,2*Math.floor(A*Hp)+_,p*Hp*2,v*Hp*2,Math.round(B))}class bf{constructor(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map((s=>s.id)),this.index=t.index,this.hasDependencies=!1,this.layoutVertexArray=new ke,this.centroidVertexArray=new ee,this.indexArray=new Dt,this.programConfigurations=new cs(t.layers,t.zoom),this.segments=new nr,this.stateDependentLayerIds=this.layers.filter((s=>s.isStateDependent())).map((s=>s.id))}populate(t,s,A){this.features=[],this.hasDependencies=ff("fill-extrusion",this.layers,s);for(const{feature:p,id:v,index:_,sourceLayerIndex:B}of t){const F=this.layers[0]._featureFilter.needGeometry,U=qA(p,F);if(!this.layers[0]._featureFilter.filter(new Mr(this.zoom),U,A))continue;const Q={id:v,sourceLayerIndex:B,index:_,geometry:F?U.geometry:KA(p),properties:p.properties,type:p.type,patterns:{}};this.hasDependencies?this.features.push(pf("fill-extrusion",this.layers,Q,{zoom:this.zoom},s)):this.addFeature(Q,Q.geometry,_,A,{},s.subdivisionGranularity),s.featureIndex.insert(p,Q.geometry,_,B,this.index,!0)}}addFeatures(t,s,A){for(const p of this.features){const{geometry:v}=p;this.addFeature(p,v,p.index,s,A,t.subdivisionGranularity)}}update(t,s,A){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,s,this.stateDependentLayers,{imagePositions:A})}isEmpty(){return this.layoutVertexArray.length===0&&this.centroidVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,hg),this.centroidVertexBuffer=t.createVertexBuffer(this.centroidVertexArray,Ku.members,!0),this.indexBuffer=t.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(t),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.centroidVertexBuffer.destroy())}addFeature(t,s,A,p,v,_){for(const B of Ma(s,500)){const F={x:0,y:0,sampleCount:0},U=this.layoutVertexArray.length;this.processPolygon(F,p,t,B,_);const Q=this.layoutVertexArray.length-U,K=Math.floor(F.x/F.sampleCount),X=Math.floor(F.y/F.sampleCount);for(let J=0;J<Q;J++)this.centroidVertexArray.emplaceBack(K,X)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,A,{imagePositions:v,canonical:p})}processPolygon(t,s,A,p,v){if(p.length<1||mg(p[0]))return;for(const K of p)K.length!==0&&pg(t,K);const _={segment:this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray)},B=v.fill.getGranularityForZoomLevel(s.z),F=wh.types[A.type]==="Polygon";for(const K of p){if(K.length===0||mg(K))continue;const X=XA(K,B,F);this._generateSideFaces(X,_)}if(!F)return;const U=yf(p,s,B,!1),Q=this.layoutVertexArray;Wa(((K,X)=>{Ud(Q,K,X,0,0,1,1,0)}),this.segments,this.layoutVertexArray,this.indexArray,U.verticesFlattened,U.indicesTriangles)}_generateSideFaces(t,s){let A=0;for(let p=1;p<t.length;p++){const v=t[p],_=t[p-1];if(Bh(v,_))continue;s.segment.vertexLength+4>nr.MAX_VERTEX_ARRAY_LENGTH&&(s.segment=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));const B=v.sub(_)._perp()._unit(),F=_.dist(v);A+F>32768&&(A=0),Ud(this.layoutVertexArray,v.x,v.y,B.x,B.y,0,0,A),Ud(this.layoutVertexArray,v.x,v.y,B.x,B.y,0,1,A),A+=F,Ud(this.layoutVertexArray,_.x,_.y,B.x,B.y,0,0,A),Ud(this.layoutVertexArray,_.x,_.y,B.x,B.y,0,1,A);const U=s.segment.vertexLength;this.indexArray.emplaceBack(U,U+2,U+1),this.indexArray.emplaceBack(U+1,U+2,U+3),s.segment.vertexLength+=4,s.segment.primitiveLength+=2}}}function pg(a,t){for(let s=0;s<t.length;s++){const A=t[s];s===t.length-1&&t[0].x===A.x&&t[0].y===A.y||(a.x+=A.x,a.y+=A.y,a.sampleCount++)}}function Bh(a,t){return a.x===t.x&&(a.x<0||a.x>je)||a.y===t.y&&(a.y<0||a.y>je)}function mg(a){return a.every((t=>t.x<0))||a.every((t=>t.x>je))||a.every((t=>t.y<0))||a.every((t=>t.y>je))}let Ch;$e("FillExtrusionBucket",bf,{omit:["layers","features"]});var gg={get paint(){return Ch=Ch||new ci({"fill-extrusion-opacity":new gr(mt["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new xr(mt["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new gr(mt["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new gr(mt["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new Ti(mt["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new xr(mt["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new xr(mt["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new gr(mt["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})}};class no extends Rn{constructor(t,s){super(t,gg,s)}createBucket(t){return new bf(t)}queryRadius(){return mh(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}queryIntersectsFeature({queryGeometry:t,feature:s,featureState:A,geometry:p,transform:v,pixelsToTileUnits:_,pixelPosMatrix:B}){const F=$c(t,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),-v.bearingInRadians,_),U=this.paint.get("fill-extrusion-height").evaluate(s,A),Q=this.paint.get("fill-extrusion-base").evaluate(s,A),K=(function(J,se){const le=[];for(const ue of J){const Be=[ue.x,ue.y,0,1];Fe(Be,Be,se),le.push(new x(Be[0]/Be[3],Be[1]/Be[3]))}return le})(F,B),X=(function(J,se,le,ue){const Be=[],tt=[],Ee=ue[8]*se,Le=ue[9]*se,st=ue[10]*se,ut=ue[11]*se,Mt=ue[8]*le,Xt=ue[9]*le,Vt=ue[10]*le,ir=ue[11]*le;for(const _r of J){const or=[],qt=[];for(const Ot of _r){const Lr=Ot.x,Ir=Ot.y,kr=ue[0]*Lr+ue[4]*Ir+ue[12],Er=ue[1]*Lr+ue[5]*Ir+ue[13],Jr=ue[2]*Lr+ue[6]*Ir+ue[14],ri=ue[3]*Lr+ue[7]*Ir+ue[15],Gn=Jr+st,ps=ri+ut,Ja=kr+Mt,wo=Er+Xt,ms=Jr+Vt,As=ri+ir,Bi=new x((kr+Ee)/ps,(Er+Le)/ps);Bi.z=Gn/ps,or.push(Bi);const js=new x(Ja/As,wo/As);js.z=ms/As,qt.push(js)}Be.push(or),tt.push(qt)}return[Be,tt]})(p,Q,U,B);return(function(J,se,le){let ue=1/0;Kh(le,se)&&(ue=jp(le,se[0]));for(let Be=0;Be<se.length;Be++){const tt=se[Be],Ee=J[Be];for(let Le=0;Le<tt.length-1;Le++){const st=tt[Le],ut=[st,tt[Le+1],Ee[Le+1],Ee[Le],st];hh(le,ut)&&(ue=Math.min(ue,jp(le,ut)))}}return ue!==1/0&&ue})(X[0],X[1],K)}}function Dd(a,t){return a.x*t.x+a.y*t.y}function jp(a,t){if(a.length===1){let s=0;const A=t[s++];let p;for(;!p||A.equals(p);)if(p=t[s++],!p)return 1/0;for(;s<t.length;s++){const v=t[s],_=a[0],B=p.sub(A),F=v.sub(A),U=_.sub(A),Q=Dd(B,B),K=Dd(B,F),X=Dd(F,F),J=Dd(U,B),se=Dd(U,F),le=Q*X-K*K,ue=(X*J-K*se)/le,Be=(Q*se-K*J)/le,tt=A.z*(1-ue-Be)+p.z*ue+v.z*Be;if(isFinite(tt))return tt}return 1/0}{let s=1/0;for(const A of t)s=Math.min(s,A.z);return s}}const tv=Vn([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),{members:rv}=tv,yg=Vn([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]),{members:vg}=yg,nv=Math.cos(Math.PI/180*37.5),_c=Math.pow(2,14)/.5;class Rd{constructor(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map((s=>s.id)),this.index=t.index,this.hasDependencies=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach((s=>{this.gradients[s.id]={}})),this.layoutVertexArray=new Oe,this.layoutVertexArray2=new Qe,this.indexArray=new Dt,this.programConfigurations=new cs(t.layers,t.zoom),this.segments=new nr,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter((s=>s.isStateDependent())).map((s=>s.id))}populate(t,s,A){this.hasDependencies=ff("line",this.layers,s)||this.hasLineDasharray(this.layers);const p=this.layers[0].layout.get("line-sort-key"),v=!p.isConstant(),_=[];for(const{feature:B,id:F,index:U,sourceLayerIndex:Q}of t){const K=this.layers[0]._featureFilter.needGeometry,X=qA(B,K);if(!this.layers[0]._featureFilter.filter(new Mr(this.zoom),X,A))continue;const J=v?p.evaluate(X,{},A):void 0,se={id:F,properties:B.properties,type:B.type,sourceLayerIndex:Q,index:U,geometry:K?X.geometry:KA(B),patterns:{},dashes:{},sortKey:J};_.push(se)}v&&_.sort(((B,F)=>B.sortKey-F.sortKey));for(const B of _){const{geometry:F,index:U,sourceLayerIndex:Q}=B;this.hasDependencies?(ff("line",this.layers,s)?pf("line",this.layers,B,{zoom:this.zoom},s):this.hasLineDasharray(this.layers)&&this.addLineDashDependencies(this.layers,B,this.zoom,s),this.patternFeatures.push(B)):this.addFeature(B,F,U,A,{},{},s.subdivisionGranularity),s.featureIndex.insert(t[U].feature,F,U,Q,this.index)}}update(t,s,A,p){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,s,this.stateDependentLayers,{imagePositions:A,dashPositions:p})}addFeatures(t,s,A,p){for(const v of this.patternFeatures)this.addFeature(v,v.geometry,v.index,s,A,p,t.subdivisionGranularity)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(t){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=t.createVertexBuffer(this.layoutVertexArray2,vg)),this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,rv),this.indexBuffer=t.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(t),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(t){if(t.properties&&Object.prototype.hasOwnProperty.call(t.properties,"mapbox_clip_start")&&Object.prototype.hasOwnProperty.call(t.properties,"mapbox_clip_end"))return{start:+t.properties.mapbox_clip_start,end:+t.properties.mapbox_clip_end}}addFeature(t,s,A,p,v,_,B){const F=this.layers[0].layout,U=F.get("line-join").evaluate(t,{}),Q=F.get("line-cap"),K=F.get("line-miter-limit"),X=F.get("line-round-limit");this.lineClips=this.lineFeatureClips(t);for(const J of s)this.addLine(J,t,U,Q,K,X,p,B);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,A,{imagePositions:v,dashPositions:_,canonical:p})}addLine(t,s,A,p,v,_,B,F){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,t=XA(t,B?F.line.getGranularityForZoomLevel(B.z):1),this.lineClips){this.lineClipsArray.push(this.lineClips);for(let Ee=0;Ee<t.length-1;Ee++)this.totalDistance+=t[Ee].dist(t[Ee+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const U=wh.types[s.type]==="Polygon";let Q=t.length;for(;Q>=2&&t[Q-1].equals(t[Q-2]);)Q--;let K=0;for(;K<Q-1&&t[K].equals(t[K+1]);)K++;if(Q<(U?3:2))return;A==="bevel"&&(v=1.05);const X=this.overscaling<=16?122880/(512*this.overscaling):0,J=this.segments.prepareSegment(10*Q,this.layoutVertexArray,this.indexArray);let se,le,ue,Be,tt;this.e1=this.e2=-1,U&&(se=t[Q-2],tt=t[K].sub(se)._unit()._perp());for(let Ee=K;Ee<Q;Ee++){if(ue=Ee===Q-1?U?t[K+1]:void 0:t[Ee+1],ue&&t[Ee].equals(ue))continue;tt&&(Be=tt),se&&(le=se),se=t[Ee],tt=ue?ue.sub(se)._unit()._perp():Be,Be=Be||tt;let Le=Be.add(tt);Le.x===0&&Le.y===0||Le._unit();const st=Be.x*tt.x+Be.y*tt.y,ut=Le.x*tt.x+Le.y*tt.y,Mt=ut!==0?1/ut:1/0,Xt=2*Math.sqrt(2-2*ut),Vt=ut<nv&&le&&ue,ir=Be.x*tt.y-Be.y*tt.x>0;if(Vt&&Ee>K){const qt=se.dist(le);if(qt>2*X){const Ot=se.sub(se.sub(le)._mult(X/qt)._round());this.updateDistance(le,Ot),this.addCurrentVertex(Ot,Be,0,0,J),le=Ot}}const _r=le&&ue;let or=_r?A:U?"butt":p;if(_r&&or==="round"&&(Mt<_?or="miter":Mt<=2&&(or="fakeround")),or==="miter"&&Mt>v&&(or="bevel"),or==="bevel"&&(Mt>2&&(or="flipbevel"),Mt<v&&(or="miter")),le&&this.updateDistance(le,se),or==="miter")Le._mult(Mt),this.addCurrentVertex(se,Le,0,0,J);else if(or==="flipbevel"){if(Mt>100)Le=tt.mult(-1);else{const qt=Mt*Be.add(tt).mag()/Be.sub(tt).mag();Le._perp()._mult(qt*(ir?-1:1))}this.addCurrentVertex(se,Le,0,0,J),this.addCurrentVertex(se,Le.mult(-1),0,0,J)}else if(or==="bevel"||or==="fakeround"){const qt=-Math.sqrt(Mt*Mt-1),Ot=ir?qt:0,Lr=ir?0:qt;if(le&&this.addCurrentVertex(se,Be,Ot,Lr,J),or==="fakeround"){const Ir=Math.round(180*Xt/Math.PI/20);for(let kr=1;kr<Ir;kr++){let Er=kr/Ir;if(Er!==.5){const ri=Er-.5;Er+=Er*ri*(Er-1)*((1.0904+st*(st*(3.55645-1.43519*st)-3.2452))*ri*ri+(.848013+st*(.215638*st-1.06021)))}const Jr=tt.sub(Be)._mult(Er)._add(Be)._unit()._mult(ir?-1:1);this.addHalfVertex(se,Jr.x,Jr.y,!1,ir,0,J)}}ue&&this.addCurrentVertex(se,tt,-Ot,-Lr,J)}else if(or==="butt")this.addCurrentVertex(se,Le,0,0,J);else if(or==="square"){const qt=le?1:-1;this.addCurrentVertex(se,Le,qt,qt,J)}else or==="round"&&(le&&(this.addCurrentVertex(se,Be,0,0,J),this.addCurrentVertex(se,Be,1,1,J,!0)),ue&&(this.addCurrentVertex(se,tt,-1,-1,J,!0),this.addCurrentVertex(se,tt,0,0,J)));if(Vt&&Ee<Q-1){const qt=se.dist(ue);if(qt>2*X){const Ot=se.add(ue.sub(se)._mult(X/qt)._round());this.updateDistance(se,Ot),this.addCurrentVertex(Ot,tt,0,0,J),se=Ot}}}}addCurrentVertex(t,s,A,p,v,_=!1){const B=s.y*p-s.x,F=-s.y-s.x*p;this.addHalfVertex(t,s.x+s.y*A,s.y-s.x*A,_,!1,A,v),this.addHalfVertex(t,B,F,_,!0,-p,v),this.distance>_c/2&&this.totalDistance===0&&(this.distance=0,this.updateScaledDistance(),this.addCurrentVertex(t,s,A,p,v,_))}addHalfVertex({x:t,y:s},A,p,v,_,B,F){const U=.5*(this.lineClips?this.scaledDistance*(_c-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((t<<1)+(v?1:0),(s<<1)+(_?1:0),Math.round(63*A)+128,Math.round(63*p)+128,1+(B===0?0:B<0?-1:1)|(63&U)<<2,U>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);const Q=F.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,Q,this.e2),F.primitiveLength++),_?this.e2=Q:this.e1=Q}updateScaledDistance(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance}updateDistance(t,s){this.distance+=t.dist(s),this.updateScaledDistance()}hasLineDasharray(t){for(const s of t){const A=s.paint.get("line-dasharray");if(A&&!A.isConstant())return!0}return!1}addLineDashDependencies(t,s,A,p){for(const v of t){const _=v.paint.get("line-dasharray");if(!_||_.value.kind==="constant")continue;const B=v.layout.get("line-cap")==="round",F={dasharray:_.value.evaluate({zoom:A-1},s,{}),round:B},U={dasharray:_.value.evaluate({zoom:A},s,{}),round:B},Q={dasharray:_.value.evaluate({zoom:A+1},s,{}),round:B},K=`${F.dasharray.join(",")},${F.round}`,X=`${U.dasharray.join(",")},${U.round}`,J=`${Q.dasharray.join(",")},${Q.round}`;p.dashDependencies[K]=F,p.dashDependencies[X]=U,p.dashDependencies[J]=Q,s.dashes[v.id]={min:K,mid:X,max:J}}}}let _g,yu;$e("LineBucket",Rd,{omit:["layers","patternFeatures"]});var Nd={get paint(){return yu=yu||new ci({"line-opacity":new xr(mt.paint_line["line-opacity"]),"line-color":new xr(mt.paint_line["line-color"]),"line-translate":new gr(mt.paint_line["line-translate"]),"line-translate-anchor":new gr(mt.paint_line["line-translate-anchor"]),"line-width":new xr(mt.paint_line["line-width"]),"line-gap-width":new xr(mt.paint_line["line-gap-width"]),"line-offset":new xr(mt.paint_line["line-offset"]),"line-blur":new xr(mt.paint_line["line-blur"]),"line-dasharray":new Ti(mt.paint_line["line-dasharray"]),"line-pattern":new Ti(mt.paint_line["line-pattern"]),"line-gradient":new ei(mt.paint_line["line-gradient"])})},get layout(){return _g=_g||new ci({"line-cap":new gr(mt.layout_line["line-cap"]),"line-join":new xr(mt.layout_line["line-join"]),"line-miter-limit":new gr(mt.layout_line["line-miter-limit"]),"line-round-limit":new gr(mt.layout_line["line-round-limit"]),"line-sort-key":new xr(mt.layout_line["line-sort-key"])})}};class Eh extends xr{possiblyEvaluate(t,s){return s=new Mr(Math.floor(s.zoom),{now:s.now,fadeDuration:s.fadeDuration,zoomHistory:s.zoomHistory,transition:s.transition}),super.possiblyEvaluate(t,s)}evaluate(t,s,A,p){return s=vt({},s,{zoom:Math.floor(s.zoom)}),super.evaluate(t,s,A,p)}}let Sh;class Vp extends Rn{constructor(t,s){super(t,Nd,s),this.gradientVersion=0,Sh||(Sh=new Eh(Nd.paint.properties["line-width"].specification),Sh.useIntegerZoom=!0)}_handleSpecialPaintPropertyUpdate(t){if(t==="line-gradient"){const s=this.gradientExpression();this.stepInterpolant=!!(function(A){return A._styleExpression!==void 0})(s)&&s._styleExpression.expression instanceof da,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(t,s){super.recalculate(t,s),this.paint._values["line-floorwidth"]=Sh.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,t)}createBucket(t){return new Rd(t)}queryRadius(t){const s=t,A=Bf(ph("line-width",this,s),ph("line-gap-width",this,s)),p=ph("line-offset",this,s);return A/2+Math.abs(p)+mh(this.paint.get("line-translate"))}queryIntersectsFeature({queryGeometry:t,feature:s,featureState:A,geometry:p,transform:v,pixelsToTileUnits:_}){const B=$c(t,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),-v.bearingInRadians,_),F=_/2*Bf(this.paint.get("line-width").evaluate(s,A),this.paint.get("line-gap-width").evaluate(s,A)),U=this.paint.get("line-offset").evaluate(s,A);return U&&(p=(function(Q,K){const X=[];for(let J=0;J<Q.length;J++){const se=Yy(Q[J]),le=[];for(let ue=0;ue<se.length;ue++){const Be=se[ue],tt=se[ue-1],Ee=se[ue+1],Le=ue===0?new x(0,0):Be.sub(tt)._unit()._perp(),st=ue===se.length-1?new x(0,0):Ee.sub(Be)._unit()._perp(),ut=Le._add(st)._unit(),Mt=ut.x*st.x+ut.y*st.y;Mt!==0&&ut._mult(1/Mt),le.push(ut._mult(K)._add(Be))}X.push(le)}return X})(p,U*_)),(function(Q,K,X){for(let J=0;J<K.length;J++){const se=K[J];if(Q.length>=3){for(let le=0;le<se.length;le++)if(fh(Q,se[le]))return!0}if(dh(Q,se,X))return!0}return!1})(B,p,F)}isTileClipped(){return!0}}function Bf(a,t){return t>0?t+2*a:a}const iv=Vn([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),Gp=Vn([{name:"a_projected_pos",components:3,type:"Float32"}],4);Vn([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const sv=Vn([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"},{name:"a_box_real",components:2,type:"Int16"}]);Vn([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const Kp=Vn([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),wg=Vn([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function Cf(a,t,s){return a.sections.forEach((A=>{A.text=(function(p,v,_){const B=v.layout.get("text-transform").evaluate(_,{});return B==="uppercase"?p=p.toLocaleUpperCase():B==="lowercase"&&(p=p.toLocaleLowerCase()),pi.applyArabicShaping&&(p=pi.applyArabicShaping(p)),p})(A.text,t,s)})),a}Vn([{name:"triangle",components:3,type:"Uint16"}]),Vn([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),Vn([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",name:"collisionCircleDiameter"},{type:"Uint16",name:"textAnchorOffsetStartIndex"},{type:"Uint16",name:"textAnchorOffsetEndIndex"}]),Vn([{type:"Float32",name:"offsetX"}]),Vn([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]),Vn([{type:"Uint16",name:"textAnchor"},{type:"Float32",components:2,name:"textOffset"}]);var Hs=24;const Zh={"!":"","#":"",$:"","%":"","&":"","(":"",")":"","*":"","+":"",",":"","-":"",".":"","/":"",":":"",";":"","<":"","=":"",">":"","?":"","@":"","[":"","\\":"","]":"","^":"",_:"","`":"","{":"","|":"","}":"","~":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":""},qp={10:!0,32:!0,38:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0},ov={40:!0};function $p(a,t,s,A,p,v){if("fontStack"in t){const _=s[t.fontStack],B=_&&_[a];return B?B.metrics.advance*t.scale+p:0}{const _=A[t.imageName];return _?_.displaySize[0]*t.scale*Hs/v+p:0}}function Ef(a,t,s,A){const p=Math.pow(a-t,2);return A?a<t?p/2:2*p:p+Math.abs(s)*s}function Sf(a,t,s){let A=0;return a===10&&(A-=1e4),s&&(A+=150),a!==40&&a!==65288||(A+=50),t!==41&&t!==65289||(A+=50),A}function Ff(a,t,s,A,p,v){let _=null,B=Ef(t,s,p,v);for(const F of A){const U=Ef(t-F.x,s,p,v)+F.badness;U<=B&&(_=F,B=U)}return{index:a,x:t,priorBreak:_,badness:B}}function Qd(a){return a?Qd(a.priorBreak).concat(a.index):[]}class Fh{constructor(t="",s=[],A=[]){this.text=t,this.sections=s,this.sectionIndex=A,this.imageSectionID=null}static fromFeature(t,s){const A=new Fh;for(let p=0;p<t.sections.length;p++){const v=t.sections[p];v.image?A.addImageSection(v):A.addTextSection(v,s)}return A}length(){return[...this.text].length}getSection(t){return this.sections[this.sectionIndex[t]]}getSectionIndex(t){return this.sectionIndex[t]}verticalizePunctuation(){this.text=(function(t){let s="",A={premature:!0,value:void 0};const p=t[Symbol.iterator]();let v=p.next();const _=t[Symbol.iterator]();_.next();let B=_.next();for(;!v.done;)s+=!B.done&&Qn(B.value.codePointAt(0))&&!Zh[B.value]||!A.premature&&Qn(A.value.codePointAt(0))&&!Zh[A.value]||!Zh[v.value]?v.value:Zh[v.value],A={value:v.value,premature:!1},v=p.next(),B=_.next();return s})(this.text)}hasZeroWidthSpaces(){return this.text.includes("")}trim(){const t=this.text.match(/^\s*/),s=t?t[0].length:0,A=this.text.match(/\S\s*$/),p=A?A[0].length-1:0;this.text=this.text.substring(s,this.text.length-p),this.sectionIndex=this.sectionIndex.slice(s,this.sectionIndex.length-p)}substring(t,s){const A=[...this.text].slice(t,s).join(""),p=this.sectionIndex.slice(t,s);return new Fh(A,this.sections,p)}toCodeUnitIndex(t){return[...this.text].slice(0,t).join("").length}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce(((t,s)=>Math.max(t,this.sections[s].scale)),0)}getMaxImageSize(t){let s=0,A=0;for(let p=0;p<this.length();p++){const v=this.getSection(p);if("imageName"in v){const _=t[v.imageName];if(!_)continue;const B=_.displaySize;s=Math.max(s,B[0]),A=Math.max(A,B[1])}}return{maxImageWidth:s,maxImageHeight:A}}addTextSection(t,s){this.text+=t.text,this.sections.push({scale:t.scale||1,verticalAlign:t.verticalAlign||"bottom",fontStack:t.fontStack||s});const A=this.sections.length-1;this.sectionIndex.push(...[...t.text].map((()=>A)))}addImageSection(t){const s=t.image?t.image.name:"";if(s.length===0)return void Cr("Can't add FormattedSection with an empty image.");const A=this.getNextImageSectionCharCode();A?(this.text+=String.fromCharCode(A),this.sections.push({scale:1,verticalAlign:t.verticalAlign||"bottom",imageName:s}),this.sectionIndex.push(this.sections.length-1)):Cr("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}determineLineBreaks(t,s,A,p,v){const _=[],B=this.determineAverageLineWidth(t,s,A,p,v),F=this.hasZeroWidthSpaces();let U=0,Q=0;const K=this.text[Symbol.iterator]();let X=K.next();const J=this.text[Symbol.iterator]();J.next();let se=J.next();const le=this.text[Symbol.iterator]();le.next(),le.next();let ue=le.next();for(;!X.done;){const Be=this.getSection(Q),tt=X.value.codePointAt(0);if(tr(tt)||(U+=$p(tt,Be,A,p,t,v)),!se.done){const Ee=Kt(tt),Le=se.value.codePointAt(0);(qp[tt]||Ee||"imageName"in Be||!ue.done&&ov[Le])&&_.push(Ff(Q+1,U,B,_,Sf(tt,Le,Ee&&F),!1))}Q++,X=K.next(),se=J.next(),ue=le.next()}return Qd(Ff(this.length(),U,B,_,0,!0))}determineAverageLineWidth(t,s,A,p,v){let _=0,B=0;for(const F of this.text){const U=this.getSection(B);_+=$p(F.codePointAt(0),U,A,p,t,v),B++}return _/Math.max(1,Math.ceil(_/s))}}const Wp=4294967296,Od=1/Wp,xg=typeof TextDecoder>"u"?null:new TextDecoder("utf-8");class qu{constructor(t=new Uint8Array(16)){this.buf=ArrayBuffer.isView(t)?t:new Uint8Array(t),this.dataView=new DataView(this.buf.buffer),this.pos=0,this.type=0,this.length=this.buf.length}readFields(t,s,A=this.length){for(;this.pos<A;){const p=this.readVarint(),v=p>>3,_=this.pos;this.type=7&p,t(v,s,this),this.pos===_&&this.skip(p)}return s}readMessage(t,s){return this.readFields(t,s,this.readVarint()+this.pos)}readFixed32(){const t=this.dataView.getUint32(this.pos,!0);return this.pos+=4,t}readSFixed32(){const t=this.dataView.getInt32(this.pos,!0);return this.pos+=4,t}readFixed64(){const t=this.dataView.getUint32(this.pos,!0)+this.dataView.getUint32(this.pos+4,!0)*Wp;return this.pos+=8,t}readSFixed64(){const t=this.dataView.getUint32(this.pos,!0)+this.dataView.getInt32(this.pos+4,!0)*Wp;return this.pos+=8,t}readFloat(){const t=this.dataView.getFloat32(this.pos,!0);return this.pos+=4,t}readDouble(){const t=this.dataView.getFloat64(this.pos,!0);return this.pos+=8,t}readVarint(t){const s=this.buf;let A,p;return p=s[this.pos++],A=127&p,p<128?A:(p=s[this.pos++],A|=(127&p)<<7,p<128?A:(p=s[this.pos++],A|=(127&p)<<14,p<128?A:(p=s[this.pos++],A|=(127&p)<<21,p<128?A:(p=s[this.pos],A|=(15&p)<<28,(function(v,_,B){const F=B.buf;let U,Q;if(Q=F[B.pos++],U=(112&Q)>>4,Q<128||(Q=F[B.pos++],U|=(127&Q)<<3,Q<128)||(Q=F[B.pos++],U|=(127&Q)<<10,Q<128)||(Q=F[B.pos++],U|=(127&Q)<<17,Q<128)||(Q=F[B.pos++],U|=(127&Q)<<24,Q<128)||(Q=F[B.pos++],U|=(1&Q)<<31,Q<128))return Xh(v,U,_);throw new Error("Expected varint not more than 10 bytes")})(A,t,this)))))}readVarint64(){return this.readVarint(!0)}readSVarint(){const t=this.readVarint();return t%2==1?(t+1)/-2:t/2}readBoolean(){return!!this.readVarint()}readString(){const t=this.readVarint()+this.pos,s=this.pos;return this.pos=t,t-s>=12&&xg?xg.decode(this.buf.subarray(s,t)):(function(A,p,v){let _="",B=p;for(;B<v;){const F=A[B];let U,Q,K,X=null,J=F>239?4:F>223?3:F>191?2:1;if(B+J>v)break;J===1?F<128&&(X=F):J===2?(U=A[B+1],(192&U)==128&&(X=(31&F)<<6|63&U,X<=127&&(X=null))):J===3?(U=A[B+1],Q=A[B+2],(192&U)==128&&(192&Q)==128&&(X=(15&F)<<12|(63&U)<<6|63&Q,(X<=2047||X>=55296&&X<=57343)&&(X=null))):J===4&&(U=A[B+1],Q=A[B+2],K=A[B+3],(192&U)==128&&(192&Q)==128&&(192&K)==128&&(X=(15&F)<<18|(63&U)<<12|(63&Q)<<6|63&K,(X<=65535||X>=1114112)&&(X=null))),X===null?(X=65533,J=1):X>65535&&(X-=65536,_+=String.fromCharCode(X>>>10&1023|55296),X=56320|1023&X),_+=String.fromCharCode(X),B+=J}return _})(this.buf,s,t)}readBytes(){const t=this.readVarint()+this.pos,s=this.buf.subarray(this.pos,t);return this.pos=t,s}readPackedVarint(t=[],s){const A=this.readPackedEnd();for(;this.pos<A;)t.push(this.readVarint(s));return t}readPackedSVarint(t=[]){const s=this.readPackedEnd();for(;this.pos<s;)t.push(this.readSVarint());return t}readPackedBoolean(t=[]){const s=this.readPackedEnd();for(;this.pos<s;)t.push(this.readBoolean());return t}readPackedFloat(t=[]){const s=this.readPackedEnd();for(;this.pos<s;)t.push(this.readFloat());return t}readPackedDouble(t=[]){const s=this.readPackedEnd();for(;this.pos<s;)t.push(this.readDouble());return t}readPackedFixed32(t=[]){const s=this.readPackedEnd();for(;this.pos<s;)t.push(this.readFixed32());return t}readPackedSFixed32(t=[]){const s=this.readPackedEnd();for(;this.pos<s;)t.push(this.readSFixed32());return t}readPackedFixed64(t=[]){const s=this.readPackedEnd();for(;this.pos<s;)t.push(this.readFixed64());return t}readPackedSFixed64(t=[]){const s=this.readPackedEnd();for(;this.pos<s;)t.push(this.readSFixed64());return t}readPackedEnd(){return this.type===2?this.readVarint()+this.pos:this.pos+1}skip(t){const s=7&t;if(s===0)for(;this.buf[this.pos++]>127;);else if(s===2)this.pos=this.readVarint()+this.pos;else if(s===5)this.pos+=4;else{if(s!==1)throw new Error(`Unimplemented type: ${s}`);this.pos+=8}}writeTag(t,s){this.writeVarint(t<<3|s)}realloc(t){let s=this.length||16;for(;s<this.pos+t;)s*=2;if(s!==this.length){const A=new Uint8Array(s);A.set(this.buf),this.buf=A,this.dataView=new DataView(A.buffer),this.length=s}}finish(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)}writeFixed32(t){this.realloc(4),this.dataView.setInt32(this.pos,t,!0),this.pos+=4}writeSFixed32(t){this.realloc(4),this.dataView.setInt32(this.pos,t,!0),this.pos+=4}writeFixed64(t){this.realloc(8),this.dataView.setInt32(this.pos,-1&t,!0),this.dataView.setInt32(this.pos+4,Math.floor(t*Od),!0),this.pos+=8}writeSFixed64(t){this.realloc(8),this.dataView.setInt32(this.pos,-1&t,!0),this.dataView.setInt32(this.pos+4,Math.floor(t*Od),!0),this.pos+=8}writeVarint(t){(t=+t||0)>268435455||t<0?(function(s,A){let p,v;if(s>=0?(p=s%4294967296|0,v=s/4294967296|0):(p=~(-s%4294967296),v=~(-s/4294967296),4294967295^p?p=p+1|0:(p=0,v=v+1|0)),s>=18446744073709552e3||s<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");A.realloc(10),(function(_,B,F){F.buf[F.pos++]=127&_|128,_>>>=7,F.buf[F.pos++]=127&_|128,_>>>=7,F.buf[F.pos++]=127&_|128,_>>>=7,F.buf[F.pos++]=127&_|128,F.buf[F.pos]=127&(_>>>=7)})(p,0,A),(function(_,B){const F=(7&_)<<4;B.buf[B.pos++]|=F|((_>>>=3)?128:0),_&&(B.buf[B.pos++]=127&_|((_>>>=7)?128:0),_&&(B.buf[B.pos++]=127&_|((_>>>=7)?128:0),_&&(B.buf[B.pos++]=127&_|((_>>>=7)?128:0),_&&(B.buf[B.pos++]=127&_|((_>>>=7)?128:0),_&&(B.buf[B.pos++]=127&_)))))})(v,A)})(t,this):(this.realloc(4),this.buf[this.pos++]=127&t|(t>127?128:0),t<=127||(this.buf[this.pos++]=127&(t>>>=7)|(t>127?128:0),t<=127||(this.buf[this.pos++]=127&(t>>>=7)|(t>127?128:0),t<=127||(this.buf[this.pos++]=t>>>7&127))))}writeSVarint(t){this.writeVarint(t<0?2*-t-1:2*t)}writeBoolean(t){this.writeVarint(+t)}writeString(t){t=String(t),this.realloc(4*t.length),this.pos++;const s=this.pos;this.pos=(function(p,v,_){for(let B,F,U=0;U<v.length;U++){if(B=v.charCodeAt(U),B>55295&&B<57344){if(!F){B>56319||U+1===v.length?(p[_++]=239,p[_++]=191,p[_++]=189):F=B;continue}if(B<56320){p[_++]=239,p[_++]=191,p[_++]=189,F=B;continue}B=F-55296<<10|B-56320|65536,F=null}else F&&(p[_++]=239,p[_++]=191,p[_++]=189,F=null);B<128?p[_++]=B:(B<2048?p[_++]=B>>6|192:(B<65536?p[_++]=B>>12|224:(p[_++]=B>>18|240,p[_++]=B>>12&63|128),p[_++]=B>>6&63|128),p[_++]=63&B|128)}return _})(this.buf,t,this.pos);const A=this.pos-s;A>=128&&zd(s,A,this),this.pos=s-1,this.writeVarint(A),this.pos+=A}writeFloat(t){this.realloc(4),this.dataView.setFloat32(this.pos,t,!0),this.pos+=4}writeDouble(t){this.realloc(8),this.dataView.setFloat64(this.pos,t,!0),this.pos+=8}writeBytes(t){const s=t.length;this.writeVarint(s),this.realloc(s);for(let A=0;A<s;A++)this.buf[this.pos++]=t[A]}writeRawMessage(t,s){this.pos++;const A=this.pos;t(s,this);const p=this.pos-A;p>=128&&zd(A,p,this),this.pos=A-1,this.writeVarint(p),this.pos+=p}writeMessage(t,s,A){this.writeTag(t,2),this.writeRawMessage(s,A)}writePackedVarint(t,s){s.length&&this.writeMessage(t,u,s)}writePackedSVarint(t,s){s.length&&this.writeMessage(t,g,s)}writePackedBoolean(t,s){s.length&&this.writeMessage(t,G,s)}writePackedFloat(t,s){s.length&&this.writeMessage(t,C,s)}writePackedDouble(t,s){s.length&&this.writeMessage(t,k,s)}writePackedFixed32(t,s){s.length&&this.writeMessage(t,Y,s)}writePackedSFixed32(t,s){s.length&&this.writeMessage(t,be,s)}writePackedFixed64(t,s){s.length&&this.writeMessage(t,At,s)}writePackedSFixed64(t,s){s.length&&this.writeMessage(t,wt,s)}writeBytesField(t,s){this.writeTag(t,2),this.writeBytes(s)}writeFixed32Field(t,s){this.writeTag(t,5),this.writeFixed32(s)}writeSFixed32Field(t,s){this.writeTag(t,5),this.writeSFixed32(s)}writeFixed64Field(t,s){this.writeTag(t,1),this.writeFixed64(s)}writeSFixed64Field(t,s){this.writeTag(t,1),this.writeSFixed64(s)}writeVarintField(t,s){this.writeTag(t,0),this.writeVarint(s)}writeSVarintField(t,s){this.writeTag(t,0),this.writeSVarint(s)}writeStringField(t,s){this.writeTag(t,2),this.writeString(s)}writeFloatField(t,s){this.writeTag(t,5),this.writeFloat(s)}writeDoubleField(t,s){this.writeTag(t,1),this.writeDouble(s)}writeBooleanField(t,s){this.writeVarintField(t,+s)}}function Xh(a,t,s){return s?4294967296*t+(a>>>0):4294967296*(t>>>0)+(a>>>0)}function zd(a,t,s){const A=t<=16383?1:t<=2097151?2:t<=268435455?3:Math.floor(Math.log(t)/(7*Math.LN2));s.realloc(A);for(let p=s.pos-1;p>=a;p--)s.buf[p+A]=s.buf[p]}function u(a,t){for(let s=0;s<a.length;s++)t.writeVarint(a[s])}function g(a,t){for(let s=0;s<a.length;s++)t.writeSVarint(a[s])}function C(a,t){for(let s=0;s<a.length;s++)t.writeFloat(a[s])}function k(a,t){for(let s=0;s<a.length;s++)t.writeDouble(a[s])}function G(a,t){for(let s=0;s<a.length;s++)t.writeBoolean(a[s])}function Y(a,t){for(let s=0;s<a.length;s++)t.writeFixed32(a[s])}function be(a,t){for(let s=0;s<a.length;s++)t.writeSFixed32(a[s])}function At(a,t){for(let s=0;s<a.length;s++)t.writeFixed64(a[s])}function wt(a,t){for(let s=0;s<a.length;s++)t.writeSFixed64(a[s])}function jt(a,t,s){a===1&&s.readMessage(dr,t)}function dr(a,t,s){if(a===3){const{id:A,bitmap:p,width:v,height:_,left:B,top:F,advance:U}=s.readMessage(yr,{});t.push({id:A,bitmap:new mu({width:v+6,height:_+6},p),metrics:{width:v,height:_,left:B,top:F,advance:U}})}}function yr(a,t,s){a===1?t.id=s.readVarint():a===2?t.bitmap=s.readBytes():a===3?t.width=s.readVarint():a===4?t.height=s.readVarint():a===5?t.left=s.readSVarint():a===6?t.top=s.readSVarint():a===7&&(t.advance=s.readVarint())}function ur(a){let t=0,s=0;for(const _ of a)t+=_.w*_.h,s=Math.max(s,_.w);a.sort(((_,B)=>B.h-_.h));const A=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(t/.95)),s),h:1/0}];let p=0,v=0;for(const _ of a)for(let B=A.length-1;B>=0;B--){const F=A[B];if(!(_.w>F.w||_.h>F.h)){if(_.x=F.x,_.y=F.y,v=Math.max(v,_.y+_.h),p=Math.max(p,_.x+_.w),_.w===F.w&&_.h===F.h){const U=A.pop();U&&B<A.length&&(A[B]=U)}else _.h===F.h?(F.x+=_.w,F.w-=_.w):_.w===F.w?(F.y+=_.h,F.h-=_.h):(A.push({x:F.x+_.w,y:F.y,w:F.w-_.w,h:_.h}),F.y+=_.h,F.h-=_.h);break}}return{w:p,h:v,fill:t/(p*v)||0}}class Qr{constructor(t,{pixelRatio:s,version:A,stretchX:p,stretchY:v,content:_,textFitWidth:B,textFitHeight:F}){this.paddedRect=t,this.pixelRatio=s,this.stretchX=p,this.stretchY=v,this.content=_,this.version=A,this.textFitWidth=B,this.textFitHeight=F}get tl(){return[this.paddedRect.x+1,this.paddedRect.y+1]}get br(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]}get tlbr(){return this.tl.concat(this.br)}get displaySize(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]}}class en{constructor(t,s){const A={},p={};this.haveRenderCallbacks=[];const v=[];this.addImages(t,A,v),this.addImages(s,p,v);const{w:_,h:B}=ur(v),F=new Jo({width:_||1,height:B||1});for(const U in t){const Q=t[U],K=A[U].paddedRect;Jo.copy(Q.data,F,{x:0,y:0},{x:K.x+1,y:K.y+1},Q.data)}for(const U in s){const Q=s[U],K=p[U].paddedRect,X=K.x+1,J=K.y+1,se=Q.data.width,le=Q.data.height;Jo.copy(Q.data,F,{x:0,y:0},{x:X,y:J},Q.data),Jo.copy(Q.data,F,{x:0,y:le-1},{x:X,y:J-1},{width:se,height:1}),Jo.copy(Q.data,F,{x:0,y:0},{x:X,y:J+le},{width:se,height:1}),Jo.copy(Q.data,F,{x:se-1,y:0},{x:X-1,y:J},{width:1,height:le}),Jo.copy(Q.data,F,{x:0,y:0},{x:X+se,y:J},{width:1,height:le})}this.image=F,this.iconPositions=A,this.patternPositions=p}addImages(t,s,A){for(const p in t){const v=t[p],_={x:0,y:0,w:v.data.width+2,h:v.data.height+2};A.push(_),s[p]=new Qr(_,v),v.hasRenderCallback&&this.haveRenderCallbacks.push(p)}}patchUpdatedImages(t,s){t.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const A in t.updatedImages)this.patchUpdatedImage(this.iconPositions[A],t.getImage(A),s),this.patchUpdatedImage(this.patternPositions[A],t.getImage(A),s)}patchUpdatedImage(t,s,A){if(!t||!s||t.version===s.version)return;t.version=s.version;const[p,v]=t.tl;A.update(s.data,void 0,{x:p,y:v})}}var Gr;function Ps(a,t,s,A,p,v,_,B,F,U,Q,K,X,J,se){const le=Fh.fromFeature(a,p);let ue;K===m.aA.vertical&&le.verticalizePunctuation();let Be=le.determineLineBreaks(U,v,t,A,J);const{processBidirectionalText:tt,processStyledBidirectionalText:Ee}=pi;if(tt&&le.sections.length===1){ue=[],Be=Be.map((Mt=>le.toCodeUnitIndex(Mt)));const ut=tt(le.toString(),Be);for(const Mt of ut){const Xt=[...Mt].map((()=>0));ue.push(new Fh(Mt,le.sections,Xt))}}else if(Ee){ue=[],Be=Be.map((Vt=>le.toCodeUnitIndex(Vt)));let ut=0;const Mt=[];for(const Vt of le.text)Mt.push(...Array(Vt.length).fill(le.sectionIndex[ut])),ut++;const Xt=Ee(le.text,Mt,Be);for(const Vt of Xt){const ir=[];let _r="";for(const or of Vt[0])ir.push(Vt[1][_r.length]),_r+=or;ue.push(new Fh(Vt[0],le.sections,ir))}}else ue=(function(ut,Mt){const Xt=[];let Vt=0;for(const ir of Mt)Xt.push(ut.substring(Vt,ir)),Vt=ir;return Vt<ut.length()&&Xt.push(ut.substring(Vt,ut.length())),Xt})(le,Be);const Le=[],st={positionedLines:Le,text:le.toString(),top:Q[1],bottom:Q[1],left:Q[0],right:Q[0],writingMode:K,iconsInText:!1,verticalizable:!1};return(function(ut,Mt,Xt,Vt,ir,_r,or,qt,Ot,Lr,Ir,kr){let Er=0,Jr=0,ri=0,Gn=0;const ps=qt==="right"?1:qt==="left"?0:.5,Ja=Hs/kr;let wo=0;for(const Bi of ir){Bi.trim();const js=Bi.getMaxScale(),io={positionedGlyphs:[],lineOffset:0};ut.positionedLines[wo]=io;const ts=io.positionedGlyphs;let wc=0;if(!Bi.length()){Jr+=_r,++wo;continue}const el=Et(Vt,Bi,Ja);let xc=0;for(const ia of Bi.text){const Ls=Bi.getSection(xc),xo=ia.codePointAt(0),Vs=Br(Ot,Ir,xo),sa={glyph:xo,imageName:null,x:Er,y:Jr+-17,vertical:Vs,scale:1,fontStack:"",sectionIndex:Bi.getSectionIndex(xc),metrics:null,rect:null};let Th;if("fontStack"in Ls){if(Th=ln(Ls,xo,Vs,el,Mt,Xt),!Th)continue;sa.fontStack=Ls.fontStack}else{if(ut.iconsInText=!0,Ls.scale*=Ja,Th=_n(Ls,Vs,js,el,Vt),!Th)continue;wc=Math.max(wc,Th.imageOffset),sa.imageName=Ls.imageName}const{rect:wu,metrics:nm,baselineOffset:td}=Th;sa.y+=td,sa.scale=Ls.scale,sa.metrics=nm,sa.rect=wu,ts.push(sa),Vs?(ut.verticalizable=!0,Er+=("imageName"in Ls?nm.advance:Hs)*Ls.scale+Lr):Er+=nm.advance*Ls.scale+Lr,xc++}ts.length!==0&&(ri=Math.max(Er-Lr,ri),wn(ts,0,ts.length-1,ps)),Er=0,io.lineOffset=Math.max(wc,(js-1)*Hs);const YA=_r*js+wc;Jr+=YA,Gn=Math.max(YA,Gn),++wo}const{horizontalAlign:ms,verticalAlign:As}=Nt(or);(function(Bi,js,io,ts,wc,el,xc,YA,ia){const Ls=(js-io)*wc;let xo=0;xo=el!==xc?-YA*ts- -17:-ts*ia*xc+.5*xc;for(const Vs of Bi)for(const sa of Vs.positionedGlyphs)sa.x+=Ls,sa.y+=xo})(ut.positionedLines,ps,ms,As,ri,Gn,_r,Jr,ir.length),ut.top+=-As*Jr,ut.bottom=ut.top+Jr,ut.left+=-ms*ri,ut.right=ut.left+ri})(st,t,s,A,ue,_,B,F,K,U,X,se),!(function(ut){for(const Mt of ut)if(Mt.positionedGlyphs.length!==0)return!1;return!0})(Le)&&st}function Nt(a){let t=.5,s=.5;switch(a){case"right":case"top-right":case"bottom-right":t=1;break;case"left":case"top-left":case"bottom-left":t=0}switch(a){case"bottom":case"bottom-right":case"bottom-left":s=1;break;case"top":case"top-right":case"top-left":s=0}return{horizontalAlign:t,verticalAlign:s}}function Et(a,t,s){const A=t.getMaxScale()*Hs,{maxImageWidth:p,maxImageHeight:v}=t.getMaxImageSize(a),_=Math.max(A,v*s);return{verticalLineContentWidth:Math.max(A,p*s),horizontalLineContentHeight:_}}function zt(a){switch(a){case"top":return 0;case"center":return .5;default:return 1}}function Br(a,t,s){return!(a===m.aA.horizontal||!t&&!$t(s)||t&&(tr(s)||(A=s,new RegExp("\\p{sc=Arab}","u").test(String.fromCodePoint(A)))));var A}function ln(a,t,s,A,p,v){const _=v[a.fontStack],B=(function(U,Q,K,X){if(U&&U.rect)return U;const J=Q[K.fontStack],se=J&&J[X];return se?{rect:null,metrics:se.metrics}:null})(_&&_[t],p,a,t);if(B===null)return null;let F;if(s)F=A.verticalLineContentWidth-a.scale*Hs;else{const U=zt(a.verticalAlign);F=(A.horizontalLineContentHeight-a.scale*Hs)*U}return{rect:B.rect,metrics:B.metrics,baselineOffset:F}}function _n(a,t,s,A,p){const v=p[a.imageName];if(!v)return null;const _=v.paddedRect,B=v.displaySize,F={width:B[0],height:B[1],left:1,top:-3,advance:t?B[1]:B[0]};let U;if(t)U=A.verticalLineContentWidth-B[1]*a.scale;else{const Q=zt(a.verticalAlign);U=(A.horizontalLineContentHeight-B[1]*a.scale)*Q}return{rect:_,metrics:F,baselineOffset:U,imageOffset:(t?B[0]:B[1])*a.scale-Hs*s}}function wn(a,t,s,A){if(A===0)return;const p=a[s],v=(a[s].x+p.metrics.advance*p.scale)*A;for(let _=t;_<=s;_++)a[_].x-=v}function Ln(a,t,s){const{horizontalAlign:A,verticalAlign:p}=Nt(s),v=t[0]-a.displaySize[0]*A,_=t[1]-a.displaySize[1]*p;return{image:a,top:_,bottom:_+a.displaySize[1],left:v,right:v+a.displaySize[0]}}function Po(a){var t,s;let A=a.left,p=a.top,v=a.right-A,_=a.bottom-p;const B=(t=a.image.textFitWidth)!==null&&t!==void 0?t:"stretchOrShrink",F=(s=a.image.textFitHeight)!==null&&s!==void 0?s:"stretchOrShrink",U=(a.image.content[2]-a.image.content[0])/(a.image.content[3]-a.image.content[1]);if(F==="proportional"){if(B==="stretchOnly"&&v/_<U||B==="proportional"){const Q=Math.ceil(_*U);A*=Q/v,v=Q}}else if(B==="proportional"&&F==="stretchOnly"&&U!==0&&v/_>U){const Q=Math.ceil(v/U);p*=Q/_,_=Q}return{x1:A,y1:p,x2:A+v,y2:p+_}}function vi(a,t,s,A,p,v){const _=a.image;let B;if(_.content){const ue=_.content,Be=_.pixelRatio||1;B=[ue[0]/Be,ue[1]/Be,_.displaySize[0]-ue[2]/Be,_.displaySize[1]-ue[3]/Be]}const F=t.left*v,U=t.right*v;let Q,K,X,J;s==="width"||s==="both"?(J=p[0]+F-A[3],K=p[0]+U+A[1]):(J=p[0]+(F+U-_.displaySize[0])/2,K=J+_.displaySize[0]);const se=t.top*v,le=t.bottom*v;return s==="height"||s==="both"?(Q=p[1]+se-A[0],X=p[1]+le+A[2]):(Q=p[1]+(se+le-_.displaySize[1])/2,X=Q+_.displaySize[1]),{image:_,top:Q,right:K,bottom:X,left:J,collisionPadding:B}}$e("ImagePosition",Qr),$e("ImageAtlas",en),m.aA=void 0,(Gr=m.aA||(m.aA={}))[Gr.none=0]="none",Gr[Gr.horizontal=1]="horizontal",Gr[Gr.vertical=2]="vertical",Gr[Gr.horizontalOnly=3]="horizontalOnly";const Za=128,$u=32640;function ux(a,t){const{expression:s}=t;if(s.kind==="constant")return{kind:"constant",layoutSize:s.evaluate(new Mr(a+1))};if(s.kind==="source")return{kind:"source"};{const{zoomStops:A,interpolationType:p}=s;let v=0;for(;v<A.length&&A[v]<=a;)v++;v=Math.max(0,v-1);let _=v;for(;_<A.length&&A[_]<a+1;)_++;_=Math.min(A.length-1,_);const B=A[v],F=A[_];return s.kind==="composite"?{kind:"composite",minZoom:B,maxZoom:F,interpolationType:p}:{kind:"camera",minZoom:B,maxZoom:F,minSize:s.evaluate(new Mr(B)),maxSize:s.evaluate(new Mr(F)),interpolationType:p}}}function av(a,t,s){let A="never";const p=a.get(t);return p?A=p:a.get(s)&&(A="always"),A}const k4=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function bg(a,t,s,A,p,v,_,B,F,U,Q,K,X){const J=B?Math.min($u,Math.round(B[0])):0,se=B?Math.min($u,Math.round(B[1])):0;a.emplaceBack(t,s,Math.round(32*A),Math.round(32*p),v,_,(J<<1)+(F?1:0),se,16*U,16*Q,256*K,256*X)}function lv(a,t,s){a.emplaceBack(t.x,t.y,s),a.emplaceBack(t.x,t.y,s),a.emplaceBack(t.x,t.y,s),a.emplaceBack(t.x,t.y,s)}function U4(a){for(const t of a.sections)if(Fr(t.text))return!0;return!1}class cv{constructor(t){this.layoutVertexArray=new Ze,this.indexArray=new Dt,this.programConfigurations=t,this.segments=new nr,this.dynamicLayoutVertexArray=new ct,this.opacityVertexArray=new dt,this.hasVisibleVertices=!1,this.placedSymbolArray=new f}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0}upload(t,s,A,p){this.isEmpty()||(A&&(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,iv.members),this.indexBuffer=t.createIndexBuffer(this.indexArray,s),this.dynamicLayoutVertexBuffer=t.createVertexBuffer(this.dynamicLayoutVertexArray,Gp.members,!0),this.opacityVertexBuffer=t.createVertexBuffer(this.opacityVertexArray,k4,!0),this.opacityVertexBuffer.itemSize=1),(A||p)&&this.programConfigurations.upload(t))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}$e("SymbolBuffers",cv);class Av{constructor(t,s,A){this.layoutVertexArray=new t,this.layoutAttributes=s,this.indexArray=new A,this.segments=new nr,this.collisionVertexArray=new _t}upload(t){this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=t.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=t.createVertexBuffer(this.collisionVertexArray,sv.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())}}$e("CollisionBuffers",Av);class If{constructor(t){this.collisionBoxArray=t.collisionBoxArray,this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map((_=>_.id)),this.index=t.index,this.pixelRatio=t.pixelRatio,this.sourceLayerIndex=t.sourceLayerIndex,this.hasDependencies=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[];const s=this.layers[0]._unevaluatedLayout._values;this.textSizeData=ux(this.zoom,s["text-size"]),this.iconSizeData=ux(this.zoom,s["icon-size"]);const A=this.layers[0].layout,p=A.get("symbol-sort-key"),v=A.get("symbol-z-order");this.canOverlap=av(A,"text-overlap","text-allow-overlap")!=="never"||av(A,"icon-overlap","icon-allow-overlap")!=="never"||A.get("text-ignore-placement")||A.get("icon-ignore-placement"),this.sortFeaturesByKey=v!=="viewport-y"&&!p.isConstant(),this.sortFeaturesByY=(v==="viewport-y"||v==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,A.get("symbol-placement")==="point"&&(this.writingModes=A.get("text-writing-mode").map((_=>m.aA[_]))),this.stateDependentLayerIds=this.layers.filter((_=>_.isStateDependent())).map((_=>_.id)),this.sourceID=t.sourceID}createArrays(){this.text=new cv(new cs(this.layers,this.zoom,(t=>/^text/.test(t)))),this.icon=new cv(new cs(this.layers,this.zoom,(t=>/^icon/.test(t)))),this.glyphOffsetArray=new S,this.lineVertexArray=new M,this.symbolInstances=new b,this.textAnchorOffsets=new j}calculateGlyphDependencies(t,s,A,p,v){for(const _ of t)if(s[_.codePointAt(0)]=!0,(A||p)&&v){const B=Zh[_];B&&(s[B.codePointAt(0)]=!0)}}populate(t,s,A){const p=this.layers[0],v=p.layout,_=v.get("text-font"),B=v.get("text-field"),F=v.get("icon-image"),U=(B.value.kind!=="constant"||B.value.value instanceof vs&&!B.value.value.isEmpty()||B.value.value.toString().length>0)&&(_.value.kind!=="constant"||_.value.value.length>0),Q=F.value.kind!=="constant"||!!F.value.value||Object.keys(F.parameters).length>0,K=v.get("symbol-sort-key");if(this.features=[],!U&&!Q)return;const X=s.iconDependencies,J=s.glyphDependencies,se=s.availableImages,le=new Mr(this.zoom);for(const{feature:ue,id:Be,index:tt,sourceLayerIndex:Ee}of t){const Le=p._featureFilter.needGeometry,st=qA(ue,Le);if(!p._featureFilter.filter(le,st,A))continue;let ut,Mt;if(Le||(st.geometry=KA(ue)),U){const Vt=p.getValueAndResolveTokens("text-field",st,A,se),ir=vs.factory(Vt),_r=this.hasRTLText=this.hasRTLText||U4(ir);(!_r||pi.getRTLTextPluginStatus()==="unavailable"||_r&&pi.isParsed())&&(ut=Cf(ir,p,st))}if(Q){const Vt=p.getValueAndResolveTokens("icon-image",st,A,se);Mt=Vt instanceof uo?Vt:uo.fromString(Vt)}if(!ut&&!Mt)continue;const Xt=this.sortFeaturesByKey?K.evaluate(st,{},A):void 0;if(this.features.push({id:Be,text:ut,icon:Mt,index:tt,sourceLayerIndex:Ee,geometry:st.geometry,properties:ue.properties,type:wh.types[ue.type],sortKey:Xt}),Mt&&(X[Mt.name]=!0),ut){const Vt=_.evaluate(st,{},A).join(","),ir=v.get("text-rotation-alignment")!=="viewport"&&v.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(m.aA.vertical)>=0;for(const _r of ut.sections)if(_r.image)X[_r.image.name]=!0;else{const or=er(ut.toString()),qt=_r.fontStack||Vt,Ot=J[qt]=J[qt]||{};this.calculateGlyphDependencies(_r.text,Ot,ir,this.allowVerticalPlacement,or)}}}v.get("symbol-placement")==="line"&&(this.features=(function(ue){const Be={},tt={},Ee=[];let Le=0;function st(Vt){Ee.push(ue[Vt]),Le++}function ut(Vt,ir,_r){const or=tt[Vt];return delete tt[Vt],tt[ir]=or,Ee[or].geometry[0].pop(),Ee[or].geometry[0]=Ee[or].geometry[0].concat(_r[0]),or}function Mt(Vt,ir,_r){const or=Be[ir];return delete Be[ir],Be[Vt]=or,Ee[or].geometry[0].shift(),Ee[or].geometry[0]=_r[0].concat(Ee[or].geometry[0]),or}function Xt(Vt,ir,_r){const or=_r?ir[0][ir[0].length-1]:ir[0][0];return`${Vt}:${or.x}:${or.y}`}for(let Vt=0;Vt<ue.length;Vt++){const ir=ue[Vt],_r=ir.geometry,or=ir.text?ir.text.toString():null;if(!or){st(Vt);continue}const qt=Xt(or,_r),Ot=Xt(or,_r,!0);if(qt in tt&&Ot in Be&&tt[qt]!==Be[Ot]){const Lr=Mt(qt,Ot,_r),Ir=ut(qt,Ot,Ee[Lr].geometry);delete Be[qt],delete tt[Ot],tt[Xt(or,Ee[Ir].geometry,!0)]=Ir,Ee[Lr].geometry=null}else qt in tt?ut(qt,Ot,_r):Ot in Be?Mt(qt,Ot,_r):(st(Vt),Be[qt]=Le-1,tt[Ot]=Le-1)}return Ee.filter((Vt=>Vt.geometry))})(this.features)),this.sortFeaturesByKey&&this.features.sort(((ue,Be)=>ue.sortKey-Be.sortKey))}update(t,s,A){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(t,s,this.layers,{imagePositions:A}),this.icon.programConfigurations.updatePaintArrays(t,s,this.layers,{imagePositions:A}))}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(t){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(t),this.iconCollisionBox.upload(t)),this.text.upload(t,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(t,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(t,s){const A=this.lineVertexArray.length;if(t.segment!==void 0){let p=t.dist(s[t.segment+1]),v=t.dist(s[t.segment]);const _={};for(let B=t.segment+1;B<s.length;B++)_[B]={x:s[B].x,y:s[B].y,tileUnitDistanceFromAnchor:p},B<s.length-1&&(p+=s[B+1].dist(s[B]));for(let B=t.segment||0;B>=0;B--)_[B]={x:s[B].x,y:s[B].y,tileUnitDistanceFromAnchor:v},B>0&&(v+=s[B-1].dist(s[B]));for(let B=0;B<s.length;B++){const F=_[B];this.lineVertexArray.emplaceBack(F.x,F.y,F.tileUnitDistanceFromAnchor)}}return{lineStartIndex:A,lineLength:this.lineVertexArray.length-A}}addSymbols(t,s,A,p,v,_,B,F,U,Q,K,X){const J=t.indexArray,se=t.layoutVertexArray,le=t.segments.prepareSegment(4*s.length,se,J,this.canOverlap?_.sortKey:void 0),ue=this.glyphOffsetArray.length,Be=le.vertexLength,tt=this.allowVerticalPlacement&&B===m.aA.vertical?Math.PI/2:0,Ee=_.text&&_.text.sections;for(let Le=0;Le<s.length;Le++){const{tl:st,tr:ut,bl:Mt,br:Xt,tex:Vt,pixelOffsetTL:ir,pixelOffsetBR:_r,minFontScaleX:or,minFontScaleY:qt,glyphOffset:Ot,isSDF:Lr,sectionIndex:Ir}=s[Le],kr=le.vertexLength,Er=Ot[1];bg(se,F.x,F.y,st.x,Er+st.y,Vt.x,Vt.y,A,Lr,ir.x,ir.y,or,qt),bg(se,F.x,F.y,ut.x,Er+ut.y,Vt.x+Vt.w,Vt.y,A,Lr,_r.x,ir.y,or,qt),bg(se,F.x,F.y,Mt.x,Er+Mt.y,Vt.x,Vt.y+Vt.h,A,Lr,ir.x,_r.y,or,qt),bg(se,F.x,F.y,Xt.x,Er+Xt.y,Vt.x+Vt.w,Vt.y+Vt.h,A,Lr,_r.x,_r.y,or,qt),lv(t.dynamicLayoutVertexArray,F,tt),J.emplaceBack(kr,kr+2,kr+1),J.emplaceBack(kr+1,kr+2,kr+3),le.vertexLength+=4,le.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(Ot[0]),Le!==s.length-1&&Ir===s[Le+1].sectionIndex||t.programConfigurations.populatePaintArrays(se.length,_,_.index,{imagePositions:{},canonical:X,formattedSection:Ee&&Ee[Ir]})}t.placedSymbolArray.emplaceBack(F.x,F.y,ue,this.glyphOffsetArray.length-ue,Be,U,Q,F.segment,A?A[0]:0,A?A[1]:0,p[0],p[1],B,0,!1,0,K)}_addCollisionDebugVertex(t,s,A,p,v,_){return s.emplaceBack(0,0),t.emplaceBack(A.x,A.y,p,v,Math.round(_.x),Math.round(_.y))}addCollisionDebugVertices(t,s,A,p,v,_,B){const F=v.segments.prepareSegment(4,v.layoutVertexArray,v.indexArray),U=F.vertexLength,Q=v.layoutVertexArray,K=v.collisionVertexArray,X=B.anchorX,J=B.anchorY;this._addCollisionDebugVertex(Q,K,_,X,J,new x(t,s)),this._addCollisionDebugVertex(Q,K,_,X,J,new x(A,s)),this._addCollisionDebugVertex(Q,K,_,X,J,new x(A,p)),this._addCollisionDebugVertex(Q,K,_,X,J,new x(t,p)),F.vertexLength+=4;const se=v.indexArray;se.emplaceBack(U,U+1),se.emplaceBack(U+1,U+2),se.emplaceBack(U+2,U+3),se.emplaceBack(U+3,U),F.primitiveLength+=4}addDebugCollisionBoxes(t,s,A,p){for(let v=t;v<s;v++){const _=this.collisionBoxArray.get(v);this.addCollisionDebugVertices(_.x1,_.y1,_.x2,_.y2,p?this.textCollisionBox:this.iconCollisionBox,_.anchorPoint,A)}}generateCollisionDebugBuffers(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new Av(it,Kp.members,Pt),this.iconCollisionBox=new Av(it,Kp.members,Pt);for(let t=0;t<this.symbolInstances.length;t++){const s=this.symbolInstances.get(t);this.addDebugCollisionBoxes(s.textBoxStartIndex,s.textBoxEndIndex,s,!0),this.addDebugCollisionBoxes(s.verticalTextBoxStartIndex,s.verticalTextBoxEndIndex,s,!0),this.addDebugCollisionBoxes(s.iconBoxStartIndex,s.iconBoxEndIndex,s,!1),this.addDebugCollisionBoxes(s.verticalIconBoxStartIndex,s.verticalIconBoxEndIndex,s,!1)}}_deserializeCollisionBoxesForSymbol(t,s,A,p,v,_,B,F,U){const Q={};for(let K=s;K<A;K++){const X=t.get(K);Q.textBox={x1:X.x1,y1:X.y1,x2:X.x2,y2:X.y2,anchorPointX:X.anchorPointX,anchorPointY:X.anchorPointY},Q.textFeatureIndex=X.featureIndex;break}for(let K=p;K<v;K++){const X=t.get(K);Q.verticalTextBox={x1:X.x1,y1:X.y1,x2:X.x2,y2:X.y2,anchorPointX:X.anchorPointX,anchorPointY:X.anchorPointY},Q.verticalTextFeatureIndex=X.featureIndex;break}for(let K=_;K<B;K++){const X=t.get(K);Q.iconBox={x1:X.x1,y1:X.y1,x2:X.x2,y2:X.y2,anchorPointX:X.anchorPointX,anchorPointY:X.anchorPointY},Q.iconFeatureIndex=X.featureIndex;break}for(let K=F;K<U;K++){const X=t.get(K);Q.verticalIconBox={x1:X.x1,y1:X.y1,x2:X.x2,y2:X.y2,anchorPointX:X.anchorPointX,anchorPointY:X.anchorPointY},Q.verticalIconFeatureIndex=X.featureIndex;break}return Q}deserializeCollisionBoxes(t){this.collisionArrays=[];for(let s=0;s<this.symbolInstances.length;s++){const A=this.symbolInstances.get(s);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(t,A.textBoxStartIndex,A.textBoxEndIndex,A.verticalTextBoxStartIndex,A.verticalTextBoxEndIndex,A.iconBoxStartIndex,A.iconBoxEndIndex,A.verticalIconBoxStartIndex,A.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(t,s){const A=t.placedSymbolArray.get(s),p=A.vertexStartIndex+4*A.numGlyphs;for(let v=A.vertexStartIndex;v<p;v+=4)t.indexArray.emplaceBack(v,v+2,v+1),t.indexArray.emplaceBack(v+1,v+2,v+3)}getSortedSymbolIndexes(t){if(this.sortedAngle===t&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;const s=Math.sin(t),A=Math.cos(t),p=[],v=[],_=[];for(let B=0;B<this.symbolInstances.length;++B){_.push(B);const F=this.symbolInstances.get(B);p.push(0|Math.round(s*F.anchorX+A*F.anchorY)),v.push(F.featureIndex)}return _.sort(((B,F)=>p[B]-p[F]||v[F]-v[B])),_}addToSortKeyRanges(t,s){const A=this.sortKeyRanges[this.sortKeyRanges.length-1];A&&A.sortKey===s?A.symbolInstanceEnd=t+1:this.sortKeyRanges.push({sortKey:s,symbolInstanceStart:t,symbolInstanceEnd:t+1})}sortFeatures(t){if(this.sortFeaturesByY&&this.sortedAngle!==t&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(t),this.sortedAngle=t,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const s of this.symbolInstanceIndexes){const A=this.symbolInstances.get(s);this.featureSortOrder.push(A.featureIndex),[A.rightJustifiedTextSymbolIndex,A.centerJustifiedTextSymbolIndex,A.leftJustifiedTextSymbolIndex].forEach(((p,v,_)=>{p>=0&&_.indexOf(p)===v&&this.addIndicesForPlacedSymbol(this.text,p)})),A.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,A.verticalPlacedTextSymbolIndex),A.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,A.placedIconSymbolIndex),A.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,A.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}let hx,dx;$e("SymbolBucket",If,{omit:["layers","collisionBoxArray","features","compareText"]}),If.MAX_GLYPHS=65535,If.addDynamicAttributes=lv;var uv={get paint(){return dx=dx||new ci({"icon-opacity":new xr(mt.paint_symbol["icon-opacity"]),"icon-color":new xr(mt.paint_symbol["icon-color"]),"icon-halo-color":new xr(mt.paint_symbol["icon-halo-color"]),"icon-halo-width":new xr(mt.paint_symbol["icon-halo-width"]),"icon-halo-blur":new xr(mt.paint_symbol["icon-halo-blur"]),"icon-translate":new gr(mt.paint_symbol["icon-translate"]),"icon-translate-anchor":new gr(mt.paint_symbol["icon-translate-anchor"]),"text-opacity":new xr(mt.paint_symbol["text-opacity"]),"text-color":new xr(mt.paint_symbol["text-color"],{runtimeType:Ri,getOverride:a=>a.textColor,hasOverride:a=>!!a.textColor}),"text-halo-color":new xr(mt.paint_symbol["text-halo-color"]),"text-halo-width":new xr(mt.paint_symbol["text-halo-width"]),"text-halo-blur":new xr(mt.paint_symbol["text-halo-blur"]),"text-translate":new gr(mt.paint_symbol["text-translate"]),"text-translate-anchor":new gr(mt.paint_symbol["text-translate-anchor"])})},get layout(){return hx=hx||new ci({"symbol-placement":new gr(mt.layout_symbol["symbol-placement"]),"symbol-spacing":new gr(mt.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new gr(mt.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new xr(mt.layout_symbol["symbol-sort-key"]),"symbol-z-order":new gr(mt.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new gr(mt.layout_symbol["icon-allow-overlap"]),"icon-overlap":new gr(mt.layout_symbol["icon-overlap"]),"icon-ignore-placement":new gr(mt.layout_symbol["icon-ignore-placement"]),"icon-optional":new gr(mt.layout_symbol["icon-optional"]),"icon-rotation-alignment":new gr(mt.layout_symbol["icon-rotation-alignment"]),"icon-size":new xr(mt.layout_symbol["icon-size"]),"icon-text-fit":new gr(mt.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new gr(mt.layout_symbol["icon-text-fit-padding"]),"icon-image":new xr(mt.layout_symbol["icon-image"]),"icon-rotate":new xr(mt.layout_symbol["icon-rotate"]),"icon-padding":new xr(mt.layout_symbol["icon-padding"]),"icon-keep-upright":new gr(mt.layout_symbol["icon-keep-upright"]),"icon-offset":new xr(mt.layout_symbol["icon-offset"]),"icon-anchor":new xr(mt.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new gr(mt.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new gr(mt.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new gr(mt.layout_symbol["text-rotation-alignment"]),"text-field":new xr(mt.layout_symbol["text-field"]),"text-font":new xr(mt.layout_symbol["text-font"]),"text-size":new xr(mt.layout_symbol["text-size"]),"text-max-width":new xr(mt.layout_symbol["text-max-width"]),"text-line-height":new gr(mt.layout_symbol["text-line-height"]),"text-letter-spacing":new xr(mt.layout_symbol["text-letter-spacing"]),"text-justify":new xr(mt.layout_symbol["text-justify"]),"text-radial-offset":new xr(mt.layout_symbol["text-radial-offset"]),"text-variable-anchor":new gr(mt.layout_symbol["text-variable-anchor"]),"text-variable-anchor-offset":new xr(mt.layout_symbol["text-variable-anchor-offset"]),"text-anchor":new xr(mt.layout_symbol["text-anchor"]),"text-max-angle":new gr(mt.layout_symbol["text-max-angle"]),"text-writing-mode":new gr(mt.layout_symbol["text-writing-mode"]),"text-rotate":new xr(mt.layout_symbol["text-rotate"]),"text-padding":new gr(mt.layout_symbol["text-padding"]),"text-keep-upright":new gr(mt.layout_symbol["text-keep-upright"]),"text-transform":new xr(mt.layout_symbol["text-transform"]),"text-offset":new xr(mt.layout_symbol["text-offset"]),"text-allow-overlap":new gr(mt.layout_symbol["text-allow-overlap"]),"text-overlap":new gr(mt.layout_symbol["text-overlap"]),"text-ignore-placement":new gr(mt.layout_symbol["text-ignore-placement"]),"text-optional":new gr(mt.layout_symbol["text-optional"])})}};class fx{constructor(t){if(t.property.overrides===void 0)throw new Error("overrides must be provided to instantiate FormatSectionOverride class");this.type=t.property.overrides?t.property.overrides.runtimeType:ns,this.defaultValue=t}evaluate(t){if(t.formattedSection){const s=this.defaultValue.property.overrides;if(s&&s.hasOverride(t.formattedSection))return s.getOverride(t.formattedSection)}return t.feature&&t.featureState?this.defaultValue.evaluate(t.feature,t.featureState):this.defaultValue.property.specification.default}eachChild(t){this.defaultValue.isConstant()||t(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}$e("FormatSectionOverride",fx,{omit:["defaultValue"]});class Bg extends Rn{constructor(t,s){super(t,uv,s)}recalculate(t,s){if(super.recalculate(t,s),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")==="map"?"map":"viewport"),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){const A=this.layout.get("text-writing-mode");if(A){const p=[];for(const v of A)p.indexOf(v)<0&&p.push(v);this.layout._values["text-writing-mode"]=p}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()}getValueAndResolveTokens(t,s,A,p){const v=this.layout.get(t).evaluate(s,{},A,p),_=this._unevaluatedLayout._values[t];return _.isDataDriven()||Ql(_.value)||!v?v:(function(B,F){return F.replace(/{([^{}]+)}/g,((U,Q)=>B&&Q in B?String(B[Q]):""))})(s.properties,v)}createBucket(t){return new If(t)}queryRadius(){return 0}queryIntersectsFeature(){throw new Error("Should take a different path in FeatureIndex")}_setPaintOverrides(){for(const t of uv.paint.overridableProperties){if(!Bg.hasPaintOverride(this.layout,t))continue;const s=this.paint.get(t),A=new fx(s),p=new uc(A,s.property.specification);let v=null;v=s.value.kind==="constant"||s.value.kind==="source"?new Oc("source",p):new NA("composite",p,s.value.zoomStops),this.paint._values[t]=new Fn(s.property,v,s.parameters)}}_handleOverridablePaintPropertyUpdate(t,s,A){return!(!this.layout||s.isDataDriven()||A.isDataDriven())&&Bg.hasPaintOverride(this.layout,t)}static hasPaintOverride(t,s){const A=t.get("text-field"),p=uv.paint.properties[s];let v=!1;const _=B=>{for(const F of B)if(p.overrides&&p.overrides.hasOverride(F))return void(v=!0)};if(A.value.kind==="constant"&&A.value.value instanceof vs)_(A.value.value.sections);else if(A.value.kind==="source"||A.value.kind==="composite"){const B=U=>{v||(U instanceof Zi&&ti(U.value)===al?_(U.value.sections):U instanceof pa?_(U.sections):U.eachChild(B))},F=A.value;F._styleExpression&&B(F._styleExpression.expression)}return v}}let px;var D4={get paint(){return px=px||new ci({"background-color":new gr(mt.paint_background["background-color"]),"background-pattern":new Vi(mt.paint_background["background-pattern"]),"background-opacity":new gr(mt.paint_background["background-opacity"])})}};class R4 extends Rn{constructor(t,s){super(t,D4,s)}}class N4 extends Rn{constructor(t,s){super(t,{},s),this.onAdd=A=>{this.implementation.onAdd&&this.implementation.onAdd(A,A.painter.context.gl)},this.onRemove=A=>{this.implementation.onRemove&&this.implementation.onRemove(A,A.painter.context.gl)},this.implementation=t}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){throw new Error("Custom layers cannot be serialized")}}class Q4{constructor(t){this._methodToThrottle=t,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._methodToThrottle()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout((()=>{this._triggered=!1,this._methodToThrottle()}),0))}remove(){delete this._channel,this._methodToThrottle=()=>{}}}const O4={once:!0},hv=63710088e-1;class Yh{constructor(t,s){if(isNaN(t)||isNaN(s))throw new Error(`Invalid LngLat object: (${t}, ${s})`);if(this.lng=+t,this.lat=+s,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new Yh(rt(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(t){const s=Math.PI/180,A=this.lat*s,p=t.lat*s,v=Math.sin(A)*Math.sin(p)+Math.cos(A)*Math.cos(p)*Math.cos((t.lng-this.lng)*s);return hv*Math.acos(Math.min(v,1))}static convert(t){if(t instanceof Yh)return t;if(Array.isArray(t)&&(t.length===2||t.length===3))return new Yh(Number(t[0]),Number(t[1]));if(!Array.isArray(t)&&typeof t=="object"&&t!==null)return new Yh(Number("lng"in t?t.lng:t.lon),Number(t.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}const mx=2*Math.PI*hv;function gx(a){return mx*Math.cos(a*Math.PI/180)}function yx(a){return(180+a)/360}function vx(a){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+a*Math.PI/360)))/360}function _x(a,t){return a/gx(t)}function wx(a){return 360*a-180}function Cg(a){return 360/Math.PI*Math.atan(Math.exp((180-360*a)*Math.PI/180))-90}function xx(a,t){return a*gx(Cg(t))}class Zp{constructor(t,s,A=0){this.x=+t,this.y=+s,this.z=+A}static fromLngLat(t,s=0){const A=Yh.convert(t);return new Zp(yx(A.lng),vx(A.lat),_x(s,A.lat))}toLngLat(){return new Yh(wx(this.x),Cg(this.y))}toAltitude(){return xx(this.z,this.y)}meterInMercatorCoordinateUnits(){return 1/mx*(t=Cg(this.y),1/Math.cos(t*Math.PI/180));var t}}function bx(a,t,s){var A=2*Math.PI*6378137/256/Math.pow(2,s);return[a*A-2*Math.PI*6378137/2,t*A-2*Math.PI*6378137/2]}class dv{constructor(t,s,A){if(!(function(p,v,_){return!(p<0||p>25||_<0||_>=Math.pow(2,p)||v<0||v>=Math.pow(2,p))})(t,s,A))throw new Error(`x=${s}, y=${A}, z=${t} outside of bounds. 0<=x<${Math.pow(2,t)}, 0<=y<${Math.pow(2,t)} 0<=z<=25 `);this.z=t,this.x=s,this.y=A,this.key=Tf(0,t,t,s,A)}equals(t){return this.z===t.z&&this.x===t.x&&this.y===t.y}url(t,s,A){const p=(function(_,B,F){var U=bx(256*_,256*(B=Math.pow(2,F)-B-1),F),Q=bx(256*(_+1),256*(B+1),F);return U[0]+","+U[1]+","+Q[0]+","+Q[1]})(this.x,this.y,this.z),v=(function(_,B,F){let U,Q="";for(let K=_;K>0;K--)U=1<<K-1,Q+=(B&U?1:0)+(F&U?2:0);return Q})(this.z,this.x,this.y);return t[(this.x+this.y)%t.length].replace(/{prefix}/g,(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(A==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace(/{ratio}/g,s>1?"@2x":"").replace(/{quadkey}/g,v).replace(/{bbox-epsg-3857}/g,p)}isChildOf(t){const s=this.z-t.z;return s>0&&t.x===this.x>>s&&t.y===this.y>>s}getTilePoint(t){const s=Math.pow(2,this.z);return new x((t.x*s-this.x)*je,(t.y*s-this.y)*je)}toString(){return`${this.z}/${this.x}/${this.y}`}}class Bx{constructor(t,s){this.wrap=t,this.canonical=s,this.key=Tf(t,s.z,s.z,s.x,s.y)}}class _A{constructor(t,s,A,p,v){if(this.terrainRttPosMatrix32f=null,t<A)throw new Error(`overscaledZ should be >= z; overscaledZ = ${t}; z = ${A}`);this.overscaledZ=t,this.wrap=s,this.canonical=new dv(A,+p,+v),this.key=Tf(s,t,A,p,v)}clone(){return new _A(this.overscaledZ,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)}equals(t){return this.overscaledZ===t.overscaledZ&&this.wrap===t.wrap&&this.canonical.equals(t.canonical)}scaledTo(t){if(t>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${t}; overscaledZ = ${this.overscaledZ}`);const s=this.canonical.z-t;return t>this.canonical.z?new _A(t,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new _A(t,this.wrap,t,this.canonical.x>>s,this.canonical.y>>s)}isOverscaled(){return this.overscaledZ>this.canonical.z}calculateScaledKey(t,s){if(t>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${t}; overscaledZ = ${this.overscaledZ}`);const A=this.canonical.z-t;return t>this.canonical.z?Tf(this.wrap*+s,t,this.canonical.z,this.canonical.x,this.canonical.y):Tf(this.wrap*+s,t,t,this.canonical.x>>A,this.canonical.y>>A)}isChildOf(t){if(t.wrap!==this.wrap||this.overscaledZ-t.overscaledZ<=0)return!1;if(t.overscaledZ===0)return this.overscaledZ>0;const s=this.canonical.z-t.canonical.z;return!(s<0)&&t.canonical.x===this.canonical.x>>s&&t.canonical.y===this.canonical.y>>s}children(t){if(this.overscaledZ>=t)return[new _A(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const s=this.canonical.z+1,A=2*this.canonical.x,p=2*this.canonical.y;return[new _A(s,this.wrap,s,A,p),new _A(s,this.wrap,s,A+1,p),new _A(s,this.wrap,s,A,p+1),new _A(s,this.wrap,s,A+1,p+1)]}isLessThan(t){return this.wrap<t.wrap||!(this.wrap>t.wrap)&&(this.overscaledZ<t.overscaledZ||!(this.overscaledZ>t.overscaledZ)&&(this.canonical.x<t.canonical.x||!(this.canonical.x>t.canonical.x)&&this.canonical.y<t.canonical.y))}wrapped(){return new _A(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(t){return new _A(this.overscaledZ,t,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new Bx(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}getTilePoint(t){return this.canonical.getTilePoint(new Zp(t.x-this.wrap,t.y))}}function Tf(a,t,s,A,p){(a*=2)<0&&(a=-1*a-1);const v=1<<s;return(v*v*a+v*p+A).toString(36)+s.toString(36)+t.toString(36)}function Xp(a,t){return t?a.properties[t]:a.id}function z4(a,t){const s={id:a.id};if(t.removeAllProperties&&(delete a.removeProperties,delete a.addOrUpdateProperties,delete t.removeProperties),t.removeProperties)for(const A of t.removeProperties){const p=a.addOrUpdateProperties.findIndex((v=>v.key===A));p>-1&&a.addOrUpdateProperties.splice(p,1)}return(a.removeAllProperties||t.removeAllProperties)&&(s.removeAllProperties=!0),(a.removeProperties||t.removeProperties)&&(s.removeProperties=[...a.removeProperties||[],...t.removeProperties||[]]),(a.addOrUpdateProperties||t.addOrUpdateProperties)&&(s.addOrUpdateProperties=[...a.addOrUpdateProperties||[],...t.addOrUpdateProperties||[]]),(a.newGeometry||t.newGeometry)&&(s.newGeometry=t.newGeometry||a.newGeometry),s}function Cx(a){var t,s;if(!a)return{};const A={};return A.removeAll=a.removeAll,A.remove=new Set(a.remove||[]),A.add=new Map((t=a.add)===null||t===void 0?void 0:t.map((p=>[p.id,p]))),A.update=new Map((s=a.update)===null||s===void 0?void 0:s.map((p=>[p.id,p]))),A}$e("CanonicalTileID",dv),$e("OverscaledTileID",_A,{omit:["terrainRttPosMatrix32f"]});class Ex{constructor(t){this._stringToNumber={},this._numberToString=[];for(let s=0;s<t.length;s++){const A=t[s];this._stringToNumber[A]=s,this._numberToString[s]=A}}encode(t){return this._stringToNumber[t]}decode(t){if(t>=this._numberToString.length)throw new Error(`Out of bounds. Index requested n=${t} can't be >= this._numberToString.length ${this._numberToString.length}`);return this._numberToString[t]}}class Sx{constructor(t,s,A,p,v){this.type="Feature",this._vectorTileFeature=t,this._x=A,this._y=p,this._z=s,this.properties=t.properties,this.id=v}projectPoint(t,s,A,p){return[360*(t.x+s)/p-180,360/Math.PI*Math.atan(Math.exp((1-2*(t.y+A)/p)*Math.PI))-90]}projectLine(t,s,A,p){return t.map((v=>this.projectPoint(v,s,A,p)))}get geometry(){if(this._geometry)return this._geometry;const t=this._vectorTileFeature,s=t.extent*Math.pow(2,this._z),A=t.extent*this._x,p=t.extent*this._y,v=t.loadGeometry();switch(t.type){case 1:{const _=[];for(const F of v)_.push(F[0]);const B=this.projectLine(_,A,p,s);this._geometry=_.length===1?{type:"Point",coordinates:B[0]}:{type:"MultiPoint",coordinates:B};break}case 2:{const _=v.map((B=>this.projectLine(B,A,p,s)));this._geometry=_.length===1?{type:"LineString",coordinates:_[0]}:{type:"MultiLineString",coordinates:_};break}case 3:{const _=_f(v),B=[];for(const F of _)B.push(F.map((U=>this.projectLine(U,A,p,s))));this._geometry=B.length===1?{type:"Polygon",coordinates:B[0]}:{type:"MultiPolygon",coordinates:B};break}default:throw new Error(`unknown feature type: ${t.type}`)}return this._geometry}set geometry(t){this._geometry=t}toJSON(){const t={geometry:this.geometry};for(const s in this)s!=="_geometry"&&s!=="_vectorTileFeature"&&s!=="_x"&&s!=="_y"&&s!=="_z"&&(t[s]=this[s]);return t}}class Pf{_name;dataBuffer;nullabilityBuffer;_size;constructor(t,s,A){this._name=t,this.dataBuffer=s,typeof A=="number"?this._size=A:(this.nullabilityBuffer=A,this._size=A.size())}getValue(t){return this.nullabilityBuffer&&!this.nullabilityBuffer.get(t)?null:this.getValueFromBuffer(t)}has(t){return this.nullabilityBuffer&&this.nullabilityBuffer.get(t)||!this.nullabilityBuffer}get name(){return this._name}get size(){return this._size}}class Eg extends Pf{}class fv extends Eg{getValueFromBuffer(t){return this.dataBuffer[t]}}class pv extends Eg{getValueFromBuffer(t){return this.dataBuffer[t]}}class Fx extends Pf{delta;constructor(t,s,A,p){super(t,s,p),this.delta=A}}class mv extends Fx{constructor(t,s,A,p){super(t,Int32Array.of(s),A,p)}getValueFromBuffer(t){return this.dataBuffer[0]+t*this.delta}}class gv extends Pf{constructor(t,s,A){super(t,Int32Array.of(s),A)}getValueFromBuffer(t){return this.dataBuffer[0]}}class H4{_name;_geometryVector;_idVector;_propertyVectors;_extent;propertyVectorsMap;constructor(t,s,A,p,v=4096){this._name=t,this._geometryVector=s,this._idVector=A,this._propertyVectors=p,this._extent=v}get name(){return this._name}get idVector(){return this._idVector}get geometryVector(){return this._geometryVector}get propertyVectors(){return this._propertyVectors}getPropertyVector(t){return this.propertyVectorsMap||(this.propertyVectorsMap=new Map(this._propertyVectors.map((s=>[s.name,s])))),this.propertyVectorsMap.get(t)}*[Symbol.iterator](){const t=this.geometryVector[Symbol.iterator]();let s=0;for(;s<this.numFeatures;){let A;this.idVector&&(A=this.containsMaxSaveIntegerValues(this.idVector)?Number(this.idVector.getValue(s)):this.idVector.getValue(s));const p=t?.next().value,v={};for(const _ of this.propertyVectors){if(!_)continue;const B=_.name,F=_.getValue(s);F!==null&&(v[B]=F)}s++,yield{id:A,geometry:p,properties:v}}}get numFeatures(){return this.geometryVector.numGeometries}get extent(){return this._extent}getFeatures(){const t=[],s=this.geometryVector.getGeometries();for(let A=0;A<this.numFeatures;A++){let p;this.idVector&&(p=this.containsMaxSaveIntegerValues(this.idVector)?Number(this.idVector.getValue(A)):this.idVector.getValue(A));const v={coordinates:s[A],type:this.geometryVector.geometryType(A)},_={};for(const B of this.propertyVectors){if(!B)continue;const F=B.name,U=B.getValue(A);U!==null&&(_[F]=U)}t.push({id:p,geometry:v,properties:_})}return t}containsMaxSaveIntegerValues(t){return t instanceof fv||t instanceof gv&&t instanceof mv||t instanceof pv}}class j4{value;constructor(t){this.value=t}get(){return this.value}set(t){this.value=t}increment(){return this.value++}add(t){this.value+=t}}var qn,Ih,Xa,vu,Hd,Xc,ra,na,Ix,wA;function xa(a,t,s){const A=new Int32Array(s);let p=0,v=t.get();for(let _=0;_<A.length;_++){let B=a[v++],F=127&B;B<128||(B=a[v++],F|=(127&B)<<7,B<128||(B=a[v++],F|=(127&B)<<14,B<128||(B=a[v++],F|=(127&B)<<21,B<128||(B=a[v++],F|=(15&B)<<28)))),A[p++]=F}return t.set(v),A}function Sg(a,t,s){const A=new BigInt64Array(s);for(let p=0;p<A.length;p++)A[p]=G4(a,t);return A}function V4(a,t){let s,A;return A=a[t.get()],t.increment(),s=127&A,A<128?s:(A=a[t.get()],t.increment(),s|=(127&A)<<7,A<128?s:(A=a[t.get()],t.increment(),s|=(127&A)<<14,A<128?s:(A=a[t.get()],t.increment(),s|=(127&A)<<21,A<128?s:(A=a[t.get()],s|=(15&A)<<28,(function(p,v,_){let B,F;if(F=v[_.get()],_.increment(),B=(112&F)>>4,F<128||(F=v[_.get()],_.increment(),B|=(127&F)<<3,F<128)||(F=v[_.get()],_.increment(),B|=(127&F)<<10,F<128)||(F=v[_.get()],_.increment(),B|=(127&F)<<17,F<128)||(F=v[_.get()],_.increment(),B|=(127&F)<<24,F<128)||(F=v[_.get()],_.increment(),B|=(1&F)<<31,F<128))return 4294967296*B+(p>>>0);throw new Error("Expected varint not more than 10 bytes")})(s,a,t)))))}function Tx(a,t,s,A){throw new Error("FastPFor is not implemented yet.")}function jd(a){return a>>>1^-(1&a)}function Lf(a){return a>>1n^-(1n&a)}function G4(a,t){let s=0n,A=0,p=t.get();for(;p<a.length;){const v=a[p++];if(s|=BigInt(127&v)<<BigInt(A),!(128&v))break;if(A+=7,A>=64)throw new Error("Varint too long")}return t.set(p),s}function Px(a,t,s){const A=new Int32Array(s);let p=0;for(let v=0;v<t;v++){const _=a[v];A.fill(a[v+t],p,p+_),p+=_}return A}function Lx(a,t,s){const A=new BigInt64Array(s);let p=0;for(let v=0;v<t;v++){const _=Number(a[v]);A.fill(a[v+t],p,p+_),p+=_}return A}function Mx(a,t,s){const A=new Float64Array(s);let p=0;for(let v=0;v<t;v++){const _=a[v];A.fill(a[v+t],p,p+_),p+=_}return A}function yv(a){const t=a.length/4*4;let s=1;if(t>=4)for(let A=a[0];s<t-4;s+=4)A=a[s]+=A,A=a[s+1]+=A,A=a[s+2]+=A,A=a[s+3]+=A;for(;s!=a.length;)a[s]+=a[s-1],++s}function kx(a){a[0]=a[0]>>>1^-(1&a[0]),a[1]=a[1]>>>1^-(1&a[1]);const t=a.length/4*4;let s=2;if(t>=4)for(;s<t-4;s+=4){const A=a[s],p=a[s+1],v=a[s+2],_=a[s+3];a[s]=(A>>>1^-(1&A))+a[s-2],a[s+1]=(p>>>1^-(1&p))+a[s-1],a[s+2]=(v>>>1^-(1&v))+a[s],a[s+3]=(_>>>1^-(1&_))+a[s+1]}for(;s!=a.length;s+=2)a[s]=(a[s]>>>1^-(1&a[s]))+a[s-2],a[s+1]=(a[s+1]>>>1^-(1&a[s+1]))+a[s-1]}(function(a){a.NONE="NONE",a.DELTA="DELTA",a.COMPONENTWISE_DELTA="COMPONENTWISE_DELTA",a.RLE="RLE",a.MORTON="MORTON",a.PDE="PDE"})(qn||(qn={})),(function(a){a.NONE="NONE",a.FAST_PFOR="FAST_PFOR",a.VARINT="VARINT",a.ALP="ALP"})(Ih||(Ih={})),(function(a){a.PRESENT="PRESENT",a.DATA="DATA",a.OFFSET="OFFSET",a.LENGTH="LENGTH"})(Xa||(Xa={}));class vv{_dictionaryType;_offsetType;_lengthType;constructor(t,s,A){this._dictionaryType=t,this._offsetType=s,this._lengthType=A}get dictionaryType(){return this._dictionaryType}get offsetType(){return this._offsetType}get lengthType(){return this._lengthType}}function Kl(a,t){const s=(function(A,p){const v=A[p.get()],_=Object.values(Xa)[v>>4];let B=null;switch(_){case Xa.DATA:B=new vv(Object.values(vu)[15&v]);break;case Xa.OFFSET:B=new vv(null,Object.values(Hd)[15&v]);break;case Xa.LENGTH:B=new vv(null,null,Object.values(Xc)[15&v])}p.increment();const F=A[p.get()],U=Object.values(qn)[F>>5],Q=Object.values(qn)[F>>2&7],K=Object.values(Ih)[3&F];p.increment();const X=xa(A,p,2),J=X[0];return{physicalStreamType:_,logicalStreamType:B,logicalLevelTechnique1:U,logicalLevelTechnique2:Q,physicalLevelTechnique:K,numValues:J,byteLength:X[1],decompressedCount:J}})(a,t);return s.logicalLevelTechnique1===qn.MORTON?(function(A,p,v){const _=xa(p,v,2);return{physicalStreamType:A.physicalStreamType,logicalStreamType:A.logicalStreamType,logicalLevelTechnique1:A.logicalLevelTechnique1,logicalLevelTechnique2:A.logicalLevelTechnique2,physicalLevelTechnique:A.physicalLevelTechnique,numValues:A.numValues,byteLength:A.byteLength,decompressedCount:A.decompressedCount,numBits:_[0],coordinateShift:_[1]}})(s,a,t):qn.RLE!==s.logicalLevelTechnique1&&qn.RLE!==s.logicalLevelTechnique2||Ih.NONE===s.physicalLevelTechnique?s:(function(A,p,v){const _=xa(p,v,2);return{physicalStreamType:A.physicalStreamType,logicalStreamType:A.logicalStreamType,logicalLevelTechnique1:A.logicalLevelTechnique1,logicalLevelTechnique2:A.logicalLevelTechnique2,physicalLevelTechnique:A.physicalLevelTechnique,numValues:A.numValues,byteLength:A.byteLength,decompressedCount:_[1],runs:_[0],numRleValues:_[1]}})(s,a,t)}(function(a){a.NONE="NONE",a.SINGLE="SINGLE",a.SHARED="SHARED",a.VERTEX="VERTEX",a.MORTON="MORTON",a.FSST="FSST"})(vu||(vu={})),(function(a){a.VERTEX="VERTEX",a.INDEX="INDEX",a.STRING="STRING",a.KEY="KEY"})(Hd||(Hd={})),(function(a){a.VAR_BINARY="VAR_BINARY",a.GEOMETRIES="GEOMETRIES",a.PARTS="PARTS",a.RINGS="RINGS",a.TRIANGLES="TRIANGLES",a.SYMBOL="SYMBOL",a.DICTIONARY="DICTIONARY"})(Xc||(Xc={})),(function(a){a[a.FLAT=0]="FLAT",a[a.CONST=1]="CONST",a[a.SEQUENCE=2]="SEQUENCE",a[a.DICTIONARY=3]="DICTIONARY",a[a.FSST_DICTIONARY=4]="FSST_DICTIONARY"})(ra||(ra={}));class _u{values;_size;constructor(t,s){this.values=t,this._size=s}get(t){const s=Math.floor(t/8);return(this.values[s]>>t%8&1)==1}set(t,s){const A=Math.floor(t/8);this.values[A]=this.values[A]|(s?1:0)<<t%8}getInt(t){const s=Math.floor(t/8);return this.values[s]>>t%8&1}size(){return this._size}getBuffer(){return this.values}}function ql(a,t,s,A,p){return(function(v,_,B){switch(_.logicalLevelTechnique1){case qn.DELTA:return _.logicalLevelTechnique2===qn.RLE?(function(F,U,Q){const K=new Int32Array(Q);let X=0,J=0;for(let se=0;se<U;se++){const le=F[se],ue=jd(F[se+U]);for(let Be=0;Be<le;Be++)J+=ue,K[X++]=J}return K})(v,_.runs,_.numRleValues):((function(F){F[0]=F[0]>>>1^-(1&F[0]);const U=F.length/4*4;let Q=1;if(U>=4)for(;Q<U-4;Q+=4){const K=F[Q],X=F[Q+1],J=F[Q+2],se=F[Q+3];F[Q]=(K>>>1^-(1&K))+F[Q-1],F[Q+1]=(X>>>1^-(1&X))+F[Q],F[Q+2]=(J>>>1^-(1&J))+F[Q+1],F[Q+3]=(se>>>1^-(1&se))+F[Q+2]}for(;Q!=F.length;++Q)F[Q]=(F[Q]>>>1^-(1&F[Q]))+F[Q-1]})(v),v);case qn.RLE:return(function(F,U,Q){return Q?(function(K,X,J){const se=new Int32Array(J);let le=0;for(let ue=0;ue<X;ue++){const Be=K[ue];let tt=K[ue+X];tt=tt>>>1^-(1&tt),se.fill(tt,le,le+Be),le+=Be}return se})(F,U.runs,U.numRleValues):Px(F,U.runs,U.numRleValues)})(v,_,B);case qn.MORTON:return yv(v),v;case qn.COMPONENTWISE_DELTA:return kx(v),v;case qn.NONE:return B&&(function(F){for(let U=0;U<F.length;U++){const Q=F[U];F[U]=Q>>>1^-(1&Q)}})(v),v;default:throw new Error(`The specified Logical level technique is not supported: ${_.logicalLevelTechnique1}`)}})(Fg(a,t,s),s,A)}function Jh(a,t,s){return(function(A,p){if(p.logicalLevelTechnique1===qn.DELTA&&p.logicalLevelTechnique2===qn.NONE)return(function(_){const B=new Int32Array(_.length+1);B[0]=0,B[1]=jd(_[0]);let F=B[1],U=2;for(;U!=B.length;++U){const Q=_[U-1];F+=Q>>>1^-(1&Q),B[U]=B[U-1]+F}return B})(A);if(p.logicalLevelTechnique1===qn.RLE&&p.logicalLevelTechnique2===qn.NONE)return(function(_,B,F){const U=new Int32Array(F+1);U[0]=0;let Q=1,K=U[0];for(let X=0;X<B;X++){const J=_[X],se=_[X+B];for(let le=Q;le<Q+J;le++)U[le]=se+K,K=U[le];Q+=J}return U})(A,p.runs,p.numRleValues);if(p.logicalLevelTechnique1===qn.NONE&&p.logicalLevelTechnique2===qn.NONE){(function(_){let B=0;for(let F=0;F<_.length;F++)_[F]+=B,B=_[F]})(A);const v=new Int32Array(p.numValues+1);return v[0]=0,v.set(A,1),v}if(p.logicalLevelTechnique1===qn.DELTA&&p.logicalLevelTechnique2===qn.RLE){const v=(function(_,B,F){const U=new Int32Array(F+1);U[0]=0;let Q=1,K=U[0];for(let X=0;X<B;X++){const J=_[X];let se=_[X+B];se=se>>>1^-(1&se);for(let le=Q;le<Q+J;le++)U[le]=se+K,K=U[le];Q+=J}return U})(A,p.runs,p.numRleValues);return yv(v),v}throw new Error("Only delta encoding is supported for transforming length to offset streams yet.")})(Fg(a,t,s),s)}function Fg(a,t,s){const A=s.physicalLevelTechnique;if(A===Ih.FAST_PFOR)return Tx();if(A===Ih.VARINT)return xa(a,t,s.numValues);if(A===Ih.NONE){const p=t.get();t.add(s.byteLength);const v=a.subarray(p,t.get());return new Int32Array(v)}throw new Error("Specified physicalLevelTechnique is not supported (yet).")}function _v(a,t,s,A){const p=Fg(a,t,s);if(p.length===1){const v=p[0];return A?jd(v):v}return A?(function(v){return jd(v[1])})(p):(function(v){return v[1]})(p)}function Ux(a,t,s){return(function(A){if(A.length==2){const p=jd(A[1]);return[p,p]}return[jd(A[2]),jd(A[3])]})(Fg(a,t,s))}function Dx(a,t,s){return(function(A){if(A.length==2){const p=Lf(A[1]);return[p,p]}return[Lf(A[2]),Lf(A[3])]})(Sg(a,t,s.numValues))}function Rx(a,t,s,A){return(function(p,v,_){switch(v.logicalLevelTechnique1){case qn.DELTA:return v.logicalLevelTechnique2===qn.RLE?(function(B,F,U){const Q=new BigInt64Array(U);let K=0,X=0n;for(let J=0;J<F;J++){const se=Number(B[J]),le=Lf(B[J+F]);for(let ue=0;ue<se;ue++)X+=le,Q[K++]=X}return Q})(p,v.runs,v.numRleValues):((function(B){B[0]=B[0]>>1n^-(1n&B[0]);const F=B.length/4*4;let U=1;if(F>=4)for(;U<F-4;U+=4){const Q=B[U],K=B[U+1],X=B[U+2],J=B[U+3];B[U]=(Q>>1n^-(1n&Q))+B[U-1],B[U+1]=(K>>1n^-(1n&K))+B[U],B[U+2]=(X>>1n^-(1n&X))+B[U+1],B[U+3]=(J>>1n^-(1n&J))+B[U+2]}for(;U!=B.length;++U)B[U]=(B[U]>>1n^-(1n&B[U]))+B[U-1]})(p),p);case qn.RLE:return(function(B,F,U){return U?(function(Q,K,X){const J=new BigInt64Array(X);let se=0;for(let le=0;le<K;le++){const ue=Number(Q[le]);let Be=Q[le+K];Be=Be>>1n^-(1n&Be),J.fill(Be,se,se+ue),se+=ue}return J})(B,F.runs,F.numRleValues):Lx(B,F.runs,F.numRleValues)})(p,v,_);case qn.NONE:return _&&(function(B){for(let F=0;F<B.length;F++){const U=B[F];B[F]=U>>1n^-(1n&U)}})(p),p;default:throw new Error(`The specified Logical level technique is not supported: ${v.logicalLevelTechnique1}`)}})(Sg(a,t,s.numValues),s,A)}function Nx(a,t,s,A){const p=Sg(a,t,s.numValues);if(p.length===1){const v=p[0];return A?Lf(v):v}return A?(function(v){return Lf(v[1])})(p):(function(v){return v[1]})(p)}function wv(a,t,s,A,p){return(function(v,_,B,F){switch(_.logicalLevelTechnique1){case qn.DELTA:return _.logicalLevelTechnique2===qn.RLE&&(v=Px(v,_.runs,_.numRleValues)),(function(U,Q){const K=new Int32Array(U.size());let X=0;U.get(0)?(K[0]=U.get(0)?Q[0]>>>1^-(1&Q[0]):0,X=1):K[0]=0;let J=1;for(;J!=K.length;++J)K[J]=U.get(J)?K[J-1]+(Q[X]>>>1^-(1&Q[X++])):K[J-1];return K})(F,v);case qn.RLE:return(function(U,Q,K,X){const J=Q;return K?(function(se,le,ue){const Be=new Int32Array(se.size());let tt=0;for(let Ee=0;Ee<ue;Ee++){const Le=le[Ee];let st=le[Ee+ue];st=st>>>1^-(1&st);for(let ut=tt;ut<tt+Le;ut++)se.get(ut)?Be[ut]=st:(Be[ut]=0,tt++);tt+=Le}return Be})(X,U,J.runs):(function(se,le,ue){const Be=new Int32Array(se.size());let tt=0;for(let Ee=0;Ee<ue;Ee++){const Le=le[Ee],st=le[Ee+ue];for(let ut=tt;ut<tt+Le;ut++)se.get(ut)?Be[ut]=st:(Be[ut]=0,tt++);tt+=Le}return Be})(X,U,J.runs)})(v,_,B,F);case qn.MORTON:return yv(v),v;case qn.COMPONENTWISE_DELTA:return kx(v),v;case qn.NONE:return v=B?(function(U,Q){const K=new Int32Array(U.size());let X=0,J=0;for(;J!=K.length;++J)if(U.get(J)){const se=Q[X++];K[J]=se>>>1^-(1&se)}else K[J]=0;return K})(F,v):(function(U,Q){const K=new Int32Array(U.size());let X=0,J=0;for(;J!=K.length;++J)K[J]=U.get(J)?Q[X++]:0;return K})(F,v),v;default:throw new Error("The specified Logical level technique is not supported")}})(s.physicalLevelTechnique===Ih.FAST_PFOR?Tx():xa(a,t,s.numValues),s,A,p)}function Ig(a,t,s,A){const p=a.logicalLevelTechnique1;if(p===qn.RLE)return a.runs===1?ra.CONST:ra.FLAT;const v=t instanceof _u?t.size():t;if(p===qn.DELTA&&a.logicalLevelTechnique2===qn.RLE){const _=a.runs,B=2;if(a.numRleValues!==v)return ra.FLAT;if(_===1)return ra.SEQUENCE;if(_===2){const F=A.get();let U;if(a.physicalLevelTechnique===Ih.VARINT)U=xa(s,A,4);else{const Q=A.get();U=new Int32Array(s.buffer,s.byteOffset+Q,4)}if(A.set(F),U[2]===B&&U[3]===B)return ra.SEQUENCE}}return a.numValues===1?ra.CONST:ra.FLAT}class Qx extends Eg{getValueFromBuffer(t){return this.dataBuffer[t]}}class Ox extends Fx{constructor(t,s,A,p){super(t,BigInt64Array.of(s),A,p)}getValueFromBuffer(t){return this.dataBuffer[0]+BigInt(t)*this.delta}}class Mf{_geometryOffsets;_partOffsets;_ringOffsets;constructor(t,s,A){this._geometryOffsets=t,this._partOffsets=s,this._ringOffsets=A}get geometryOffsets(){return this._geometryOffsets}get partOffsets(){return this._partOffsets}get ringOffsets(){return this._ringOffsets}}function xv(a,t,s){return{x:zx(a,t)-s,y:zx(a>>1,t)-s}}function zx(a,t){let s=0;for(let A=0;A<t;A++)s|=(a&1<<2*A)>>A;return s}(function(a){a[a.POINT=0]="POINT",a[a.LINESTRING=1]="LINESTRING",a[a.POLYGON=2]="POLYGON",a[a.MULTIPOINT=3]="MULTIPOINT",a[a.MULTILINESTRING=4]="MULTILINESTRING",a[a.MULTIPOLYGON=5]="MULTIPOLYGON"})(na||(na={})),(function(a){a[a.POINT=0]="POINT",a[a.LINESTRING=1]="LINESTRING",a[a.POLYGON=2]="POLYGON"})(Ix||(Ix={})),(function(a){a[a.MORTON=0]="MORTON",a[a.VEC_2=1]="VEC_2",a[a.VEC_3=2]="VEC_3"})(wA||(wA={}));class K4{createPoint(t){return[[t]]}createMultiPoint(t){return t.map((s=>[s]))}createLineString(t){return[t]}createMultiLineString(t){return t}createPolygon(t,s){return[t].concat(s)}createMultiPolygon(t){return t.flat()}}function Hx(a){const t=new Array(a.numGeometries);let s=1,A=1,p=1,v=0;const _=new K4;let B=0,F=0;const U=a.mortonSettings,Q=a.topologyVector,K=Q.geometryOffsets,X=Q.partOffsets,J=Q.ringOffsets,se=a.vertexOffsets,le=a.containsPolygonGeometry(),ue=a.vertexBuffer;for(let Be=0;Be<a.numGeometries;Be++){const tt=a.geometryType(Be);if(tt===na.POINT){if(se&&se.length!==0)if(a.vertexBufferType===wA.VEC_2){const Ee=2*se[F++],Le=new x(ue[Ee],ue[Ee+1]);t[v++]=_.createPoint(Le)}else{const Ee=xv(ue[se[F++]],U.numBits,U.coordinateShift),Le=new x(Ee.x,Ee.y);t[v++]=_.createPoint(Le)}else{const Ee=new x(ue[B++],ue[B++]);t[v++]=_.createPoint(Ee)}K&&p++,X&&s++,J&&A++}else if(tt===na.MULTIPOINT){const Ee=K[p]-K[p-1];p++;const Le=new Array(Ee);if(se&&se.length!==0){for(let st=0;st<Ee;st++){const ut=2*se[F++];Le[st]=new x(ue[ut],ue[ut+1])}t[v++]=_.createMultiPoint(Le)}else{for(let st=0;st<Ee;st++){const ut=ue[B++],Mt=ue[B++];Le[st]=new x(ut,Mt)}t[v++]=_.createMultiPoint(Le)}}else if(tt===na.LINESTRING){let Ee,Le=0;le?(Le=J[A]-J[A-1],A++):Le=X[s]-X[s-1],s++,se&&se.length!==0?(Ee=a.vertexBufferType===wA.VEC_2?Bv(ue,se,F,Le,!1):Cv(ue,se,F,Le,!1,U),F+=Le):(Ee=bv(ue,B,Le,!1),B+=2*Le),t[v++]=_.createLineString(Ee),K&&p++}else if(tt===na.POLYGON){const Ee=X[s]-X[s-1];s++;const Le=new Array(Ee-1);let st=J[A]-J[A-1];if(A++,se&&se.length!==0){const ut=a.vertexBufferType===wA.VEC_2?Pg(ue,se,F,st):Lg(ue,se,F,st,0,U);F+=st;for(let Mt=0;Mt<Le.length;Mt++)st=J[A]-J[A-1],A++,Le[Mt]=a.vertexBufferType===wA.VEC_2?Pg(ue,se,F,st):Lg(ue,se,F,st,0,U),F+=st;t[v++]=_.createPolygon(ut,Le)}else{const ut=Tg(ue,B,st);B+=2*st;for(let Mt=0;Mt<Le.length;Mt++)st=J[A]-J[A-1],A++,Le[Mt]=Tg(ue,B,st),B+=2*st;t[v++]=_.createPolygon(ut,Le)}K&&p++}else if(tt===na.MULTILINESTRING){const Ee=K[p]-K[p-1];p++;const Le=new Array(Ee);if(se&&se.length!==0){for(let st=0;st<Ee;st++){let ut=0;le?(ut=J[A]-J[A-1],A++):ut=X[s]-X[s-1],s++;const Mt=a.vertexBufferType===wA.VEC_2?Bv(ue,se,F,ut,!1):Cv(ue,se,F,ut,!1,U);Le[st]=Mt,F+=ut}t[v++]=_.createMultiLineString(Le)}else{for(let st=0;st<Ee;st++){let ut=0;le?(ut=J[A]-J[A-1],A++):ut=X[s]-X[s-1],s++,Le[st]=bv(ue,B,ut,!1),B+=2*ut}t[v++]=_.createMultiLineString(Le)}}else{if(tt!==na.MULTIPOLYGON)throw new Error("The specified geometry type is currently not supported.");{const Ee=K[p]-K[p-1];p++;const Le=new Array(Ee);let st=0;if(se&&se.length!==0){for(let ut=0;ut<Ee;ut++){const Mt=X[s]-X[s-1];s++;const Xt=new Array(Mt-1);st=J[A]-J[A-1],A++;const Vt=a.vertexBufferType===wA.VEC_2?Pg(ue,se,F,st):Lg(ue,se,F,st,0,U);F+=st;for(let ir=0;ir<Xt.length;ir++)st=J[A]-J[A-1],A++,Xt[ir]=a.vertexBufferType===wA.VEC_2?Pg(ue,se,F,st):Lg(ue,se,F,st,0,U),F+=st;Le[ut]=_.createPolygon(Vt,Xt)}t[v++]=_.createMultiPolygon(Le)}else{for(let ut=0;ut<Ee;ut++){const Mt=X[s]-X[s-1];s++;const Xt=new Array(Mt-1);st=J[A]-J[A-1],A++;const Vt=Tg(ue,B,st);B+=2*st;for(let ir=0;ir<Xt.length;ir++){const _r=J[A]-J[A-1];A++,Xt[ir]=Tg(ue,B,_r),B+=2*_r}Le[ut]=_.createPolygon(Vt,Xt)}t[v++]=_.createMultiPolygon(Le)}}}}return t}function Tg(a,t,s){return bv(a,t,s,!0)}function Pg(a,t,s,A){return Bv(a,t,s,A,!0)}function Lg(a,t,s,A,p,v){return Cv(a,t,s,A,!0,v)}function bv(a,t,s,A){const p=new Array(A?s+1:s);for(let v=0;v<2*s;v+=2)p[v/2]=new x(a[t+v],a[t+v+1]);return A&&(p[p.length-1]=p[0]),p}function Bv(a,t,s,A,p){const v=new Array(p?A+1:A);for(let _=0;_<2*A;_+=2){const B=2*t[s+_/2];v[_/2]=new x(a[B],a[B+1])}return p&&(v[v.length-1]=v[0]),v}function Cv(a,t,s,A,p,v){const _=new Array(p?A+1:A);for(let B=0;B<A;B++){const F=xv(a[t[s+B]],v.numBits,v.coordinateShift);_[B]=new x(F.x,F.y)}return p&&(_[_.length-1]=_[0]),_}class jx{_vertexBufferType;_topologyVector;_vertexOffsets;_vertexBuffer;_mortonSettings;constructor(t,s,A,p,v){this._vertexBufferType=t,this._topologyVector=s,this._vertexOffsets=A,this._vertexBuffer=p,this._mortonSettings=v}get vertexBufferType(){return this._vertexBufferType}get topologyVector(){return this._topologyVector}get vertexOffsets(){return this._vertexOffsets}get vertexBuffer(){return this._vertexBuffer}*[Symbol.iterator](){const t=Hx(this);let s=0;for(;s<this.numGeometries;)yield{coordinates:t[s],type:this.geometryType(s)},s++}getSimpleEncodedVertex(t){const s=this.vertexOffsets?2*this.vertexOffsets[t]:2*t;return[this.vertexBuffer[s],this.vertexBuffer[s+1]]}getVertex(t){if(this.vertexOffsets&&this.mortonSettings){const A=xv(this.vertexBuffer[this.vertexOffsets[t]],this.mortonSettings.numBits,this.mortonSettings.coordinateShift);return[A.x,A.y]}const s=this.vertexOffsets?2*this.vertexOffsets[t]:2*t;return[this.vertexBuffer[s],this.vertexBuffer[s+1]]}getGeometries(){return Hx(this)}get mortonSettings(){return this._mortonSettings}}class Vx extends jx{_numGeometries;_geometryType;constructor(t,s,A,p,v,_,B){super(A,p,v,_,B),this._numGeometries=t,this._geometryType=s}geometryType(t){return this._geometryType}get numGeometries(){return this._numGeometries}containsPolygonGeometry(){return this._geometryType===na.POLYGON||this._geometryType===na.MULTIPOLYGON}containsSingleGeometryType(){return!0}}class Gx extends jx{_geometryTypes;constructor(t,s,A,p,v,_){super(t,A,p,v,_),this._geometryTypes=s}geometryType(t){return this._geometryTypes[t]}get numGeometries(){return this._geometryTypes.length}containsPolygonGeometry(){for(let t=0;t<this.numGeometries;t++)if(this.geometryType(t)===na.POLYGON||this.geometryType(t)===na.MULTIPOLYGON)return!0;return!1}containsSingleGeometryType(){return!1}}class Kx{_triangleOffsets;_indexBuffer;_vertexBuffer;_topologyVector;constructor(t,s,A,p){this._triangleOffsets=t,this._indexBuffer=s,this._vertexBuffer=A,this._topologyVector=p}get triangleOffsets(){return this._triangleOffsets}get indexBuffer(){return this._indexBuffer}get vertexBuffer(){return this._vertexBuffer}get topologyVector(){return this._topologyVector}getGeometries(){if(!this._topologyVector)throw new Error("Cannot convert GpuVector to coordinates without topology information");const t=new Array(this.numGeometries),s=this._topologyVector,A=s.partOffsets,p=s.ringOffsets,v=s.geometryOffsets;let _=0,B=1,F=1,U=1;for(let Q=0;Q<this.numGeometries;Q++)switch(this.geometryType(Q)){case na.POLYGON:{const K=A[B]-A[B-1];B++;const X=[];for(let J=0;J<K;J++){const se=p[F]-p[F-1];F++;const le=[];for(let ue=0;ue<se;ue++){const Be=this._vertexBuffer[_++],tt=this._vertexBuffer[_++];le.push(new x(Be,tt))}le.length>0&&le.push(le[0]),X.push(le)}t[Q]=X,v&&U++}break;case na.MULTIPOLYGON:{const K=v[U]-v[U-1];U++;const X=[];for(let J=0;J<K;J++){const se=A[B]-A[B-1];B++;for(let le=0;le<se;le++){const ue=p[F]-p[F-1];F++;const Be=[];for(let tt=0;tt<ue;tt++){const Ee=this._vertexBuffer[_++],Le=this._vertexBuffer[_++];Be.push(new x(Ee,Le))}Be.length>0&&Be.push(Be[0]),X.push(Be)}}t[Q]=X}}return t}[Symbol.iterator](){return null}}function qx(a,t,s,A,p,v){return new q4(a,t,s,A,p,v)}class q4 extends Kx{_numGeometries;_geometryType;constructor(t,s,A,p,v,_){super(A,p,v,_),this._numGeometries=t,this._geometryType=s}geometryType(t){return this._geometryType}get numGeometries(){return this._numGeometries}containsSingleGeometryType(){return!0}}function $x(a,t,s,A,p){return new $4(a,t,s,A,p)}class $4 extends Kx{_geometryTypes;constructor(t,s,A,p,v){super(s,A,p,v),this._geometryTypes=t}geometryType(t){return this._geometryTypes[t]}get numGeometries(){return this._geometryTypes.length}containsSingleGeometryType(){return!1}}function W4(a,t,s,A,p){const v=Kl(a,s);let _=null,B=null,F=null,U=null,Q=null,K=null,X=null,J=null;if(Ig(v,A,a,s)===ra.CONST){const le=_v(a,s,v,!1);for(let ue=0;ue<t-1;ue++){const Be=Kl(a,s);switch(Be.physicalStreamType){case Xa.LENGTH:switch(Be.logicalStreamType.lengthType){case Xc.GEOMETRIES:_=Jh(a,s,Be);break;case Xc.PARTS:B=Jh(a,s,Be);break;case Xc.RINGS:F=Jh(a,s,Be);break;case Xc.TRIANGLES:X=Jh(a,s,Be)}break;case Xa.OFFSET:switch(Be.logicalStreamType.offsetType){case Hd.VERTEX:U=ql(a,s,Be,!1);break;case Hd.INDEX:J=ql(a,s,Be,!1)}break;case Xa.DATA:vu.VERTEX===Be.logicalStreamType.dictionaryType?Q=ql(a,s,Be,!0):(K={numBits:Be.numBits,coordinateShift:Be.coordinateShift},Q=ql(a,s,Be,!1))}}return J!==null?_!=null||B!=null?qx(A,le,X,J,Q,new Mf(_,B,F)):qx(A,le,X,J,Q):K===null?(function(ue,Be,tt,Ee,Le){return new Vx(ue,Be,wA.VEC_2,tt,Ee,Le)})(A,le,new Mf(_,B,F),U,Q):(function(ue,Be,tt,Ee,Le,st){return new Vx(ue,Be,wA.MORTON,tt,Ee,Le,st)})(A,le,new Mf(_,B,F),U,Q,K)}const se=ql(a,s,v,!1);for(let le=0;le<t-1;le++){const ue=Kl(a,s);switch(ue.physicalStreamType){case Xa.LENGTH:switch(ue.logicalStreamType.lengthType){case Xc.GEOMETRIES:_=ql(a,s,ue,!1);break;case Xc.PARTS:B=ql(a,s,ue,!1);break;case Xc.RINGS:F=ql(a,s,ue,!1);break;case Xc.TRIANGLES:X=Jh(a,s,ue)}break;case Xa.OFFSET:switch(ue.logicalStreamType.offsetType){case Hd.VERTEX:U=ql(a,s,ue,!1);break;case Hd.INDEX:J=ql(a,s,ue,!1)}break;case Xa.DATA:vu.VERTEX===ue.logicalStreamType.dictionaryType?Q=ql(a,s,ue,!0):(K={numBits:ue.numBits,coordinateShift:ue.coordinateShift},Q=ql(a,s,ue,!1))}}return J!==null&&B===null?$x(se,X,J,Q):(_!==null?(_=Ev(se,_,2),B!==null&&F!==null?(B=Wx(se,_,B,!1),F=(function(le,ue,Be,tt){const Ee=new Int32Array(Be[Be.length-1]+1);let Le=0;Ee[0]=Le;let st=1,ut=1,Mt=0;for(let Xt=0;Xt<le.length;Xt++){const Vt=le[Xt],ir=ue[Xt+1]-ue[Xt];if(Vt!==0&&Vt!==3)for(let _r=0;_r<ir;_r++){const or=Be[st]-Be[st-1];st++;for(let qt=0;qt<or;qt++)Le=Ee[ut++]=Le+tt[Mt++]}else for(let _r=0;_r<ir;_r++)Ee[ut++]=++Le,st++}return Ee})(se,_,B,F)):B!==null&&(B=(function(le,ue,Be){const tt=new Int32Array(ue[ue.length-1]+1);let Ee=0;tt[0]=Ee;let Le=1,st=0;for(let ut=0;ut<le.length;ut++){const Mt=le[ut],Xt=ue[ut+1]-ue[ut];if(Mt===4||Mt===1)for(let Vt=0;Vt<Xt;Vt++)Ee=tt[Le++]=Ee+Be[st++];else for(let Vt=0;Vt<Xt;Vt++)tt[Le++]=++Ee}return tt})(se,_,B))):B!==null&&F!==null?(B=Ev(se,B,1),F=Wx(se,B,F,!0)):B!==null&&(B=Ev(se,B,0)),J!==null?$x(se,X,J,Q,new Mf(_,B,F)):K===null?(function(le,ue,Be,tt){return new Gx(wA.VEC_2,le,ue,Be,tt)})(se,new Mf(_,B,F),U,Q):(function(le,ue,Be,tt,Ee){return new Gx(wA.MORTON,le,ue,Be,tt,Ee)})(se,new Mf(_,B,F),U,Q,K))}function Ev(a,t,s){const A=new Int32Array(a.length+1);let p=0;A[0]=p;let v=0;for(let _=0;_<a.length;_++)p=A[_+1]=p+(a[_]>s?t[v++]:1);return A}function Wx(a,t,s,A){const p=new Int32Array(t[t.length-1]+1);let v=0;p[0]=v;let _=1,B=0;for(let F=0;F<a.length;F++){const U=a[F],Q=t[F+1]-t[F];if(U===5||U===2||A&&(U===4||U===1))for(let K=0;K<Q;K++)v=p[_++]=v+s[B++];else for(let K=0;K<Q;K++)p[_++]=++v}return p}class Z4 extends Pf{dataVector;constructor(t,s,A){super(t,s.getBuffer(),A),this.dataVector=s}getValueFromBuffer(t){return this.dataVector.get(t)}}class X4 extends Eg{getValueFromBuffer(t){return this.dataBuffer[t]}}class Zx extends Pf{constructor(t,s,A){super(t,BigInt64Array.of(s),A)}getValueFromBuffer(t){return this.dataBuffer[0]}}function Yp(a,t,s){return Xx(a,Math.ceil(t/8),s)}function Xx(a,t,s){const A=new Uint8Array(t);let p=0;for(;p<t;){const v=a[s.increment()];if(v<=127){const _=v+3,B=a[s.increment()],F=p+_;A.fill(B,p,F),p=F}else{const _=256-v;for(let B=0;B<_;B++)A[p++]=a[s.increment()]}}return A}const Y4=new TextDecoder;function Sv(a,t,s){return s-t>=12?Y4.decode(a.subarray(t,s)):(function(A,p,v){let _="",B=p;for(;B<v;){const F=A[B];let U,Q,K,X=null,J=F>239?4:F>223?3:F>191?2:1;if(B+J>v)break;J===1?F<128&&(X=F):J===2?(U=A[B+1],(192&U)==128&&(X=(31&F)<<6|63&U,X<=127&&(X=null))):J===3?(U=A[B+1],Q=A[B+2],(192&U)==128&&(192&Q)==128&&(X=(15&F)<<12|(63&U)<<6|63&Q,(X<=2047||X>=55296&&X<=57343)&&(X=null))):J===4&&(U=A[B+1],Q=A[B+2],K=A[B+3],(192&U)==128&&(192&Q)==128&&(192&K)==128&&(X=(15&F)<<18|(63&U)<<12|(63&Q)<<6|63&K,(X<=65535||X>=1114112)&&(X=null))),X===null?(X=65533,J=1):X>65535&&(X-=65536,_+=String.fromCharCode(X>>>10&1023|55296),X=56320|1023&X),_+=String.fromCharCode(X),B+=J}return _})(a,t,s)}class Fv extends Pf{offsetBuffer;constructor(t,s,A,p){super(t,A,p),this.offsetBuffer=s}}class Yx extends Fv{textEncoder;constructor(t,s,A,p){super(t,s,A,p??s.length-1),this.textEncoder=new TextEncoder}getValueFromBuffer(t){return Sv(this.dataBuffer,this.offsetBuffer[t],this.offsetBuffer[t+1])}}class kf extends Fv{indexBuffer;textEncoder;constructor(t,s,A,p,v){super(t,A,p,v??s.length),this.indexBuffer=s,this.indexBuffer=s,this.textEncoder=new TextEncoder}getValueFromBuffer(t){const s=this.indexBuffer[t];return Sv(this.dataBuffer,this.offsetBuffer[s],this.offsetBuffer[s+1])}}class Jx extends Fv{indexBuffer;symbolOffsetBuffer;symbolTableBuffer;textEncoder;symbolLengthBuffer;lengthBuffer;decodedDictionary;constructor(t,s,A,p,v,_,B){super(t,A,p,B),this.indexBuffer=s,this.symbolOffsetBuffer=v,this.symbolTableBuffer=_,this.textEncoder=new TextEncoder}getValueFromBuffer(t){this.decodedDictionary==null&&(this.symbolLengthBuffer==null&&(this.symbolLengthBuffer=this.offsetToLengthBuffer(this.symbolOffsetBuffer),this.lengthBuffer=this.offsetToLengthBuffer(this.offsetBuffer)),this.decodedDictionary=(function(A,p,v){const _=[],B=new Array(p.length).fill(0);for(let F=1;F<p.length;F++)B[F]=B[F-1]+p[F-1];for(let F=0;F<v.length;F++)if(v[F]===255)_.push(v[++F]);else{const U=p[v[F]],Q=B[v[F]];for(let K=0;K<U;K++)_.push(A[Q+K])}return new Uint8Array(_)})(this.symbolTableBuffer,this.symbolLengthBuffer,this.dataBuffer));const s=this.indexBuffer[t];return Sv(this.decodedDictionary,this.offsetBuffer[s],this.offsetBuffer[s+1])}offsetToLengthBuffer(t){const s=new Uint32Array(t.length-1);let A=t[0];for(let p=1;p<t.length;p++){const v=t[p];s[p-1]=v-A,A=v}return s}}function J4(a,t,s,A,p,v){return s.type==="scalarType"?(function(_,B,F,U,Q,K){let X=null,J=0;if(_===0)return null;if(K.nullable){const le=Kl(B,F);J=le.numValues;const ue=F.get(),Be=Yp(B,J,F);F.set(ue+le.byteLength),X=new _u(Be,le.numValues)}const se=X??U;switch(Q.physicalType){case 4:case 3:return(function(le,ue,Be,tt,Ee){const Le=Kl(le,ue),st=Ig(Le,Ee,le,ue),ut=tt.physicalType===3;if(st===ra.FLAT){const Mt=Jp(Ee)?wv(le,ue,Le,ut,Ee):ql(le,ue,Le,ut);return new fv(Be.name,Mt,Ee)}if(st===ra.SEQUENCE){const Mt=Ux(le,ue,Le);return new mv(Be.name,Mt[0],Mt[1],Le.numRleValues)}{const Mt=_v(le,ue,Le,ut);return new gv(Be.name,Mt,Ee)}})(B,F,K,Q,se);case 9:return(function(le,ue,Be,tt,Ee){let Le=null,st=null,ut=null,Mt=null,Xt=null,Vt=null,ir=null,_r=null;for(let or=0;or<tt;or++){const qt=Kl(ue,Be);if(qt.byteLength!==0)switch(qt.physicalStreamType){case Xa.PRESENT:{const Ot=Yp(ue,qt.numValues,Be);Vt=new _u(Ot,qt.numValues);break}case Xa.OFFSET:st=Ee!=null||Vt!=null?wv(ue,Be,qt,!1,Ee??Vt):ql(ue,Be,qt,!1);break;case Xa.LENGTH:{const Ot=Jh(ue,Be,qt);Xc.DICTIONARY===qt.logicalStreamType.lengthType?Le=Ot:Xc.SYMBOL===qt.logicalStreamType.lengthType?Mt=Ot:ir=Ot;break}case Xa.DATA:{const Ot=ue.subarray(Be.get(),Be.get()+qt.byteLength);Be.add(qt.byteLength);const Lr=qt.logicalStreamType.dictionaryType;vu.FSST===Lr?Xt=Ot:vu.SINGLE===Lr||vu.SHARED===Lr?ut=Ot:vu.NONE===Lr&&(_r=Ot);break}}}return(function(or,qt,Ot,Lr,Ir,kr,Er){return qt?new Jx(or,Ot,Lr,Ir,kr,qt,Er):null})(le,Xt,st,Le,ut,Mt,Ee??Vt)??(function(or,qt,Ot,Lr,Ir){return qt?Ir?new kf(or,Ot,Lr,qt,Ir):new kf(or,Ot,Lr,qt):null})(le,ut,st,Le,Ee??Vt)??(function(or,qt,Ot,Lr,Ir){if(!qt||!Ot)return null;if(Lr)return Ir?new kf(or,Lr,qt,Ot,Ir):new kf(or,Lr,qt,Ot);if(Ir&&Ir.size()!==qt.length-1){const kr=new Int32Array(Ir.size());let Er=0;for(let Jr=0;Jr<Ir.size();Jr++)kr[Jr]=Ir.get(Jr)?Er++:0;return new kf(or,kr,qt,Ot,Ir)}return Ir?new Yx(or,qt,Ot,Ir):new Yx(or,qt,Ot)})(le,ir,_r,st,Ee??Vt)})(K.name,B,F,K.nullable?_-1:_,X);case 0:return(function(le,ue,Be,tt,Ee){const Le=Kl(le,ue),st=Le.numValues,ut=ue.get(),Mt=Jp(Ee)?(function(Vt,ir,_r,or){const qt=Xx(Vt,Math.ceil(ir/8),_r),Ot=new _u(qt,ir),Lr=or.size(),Ir=new _u(new Uint8Array(Lr),Lr);let kr=0;for(let Er=0;Er<or.size();Er++){const Jr=!!or.get(Er)&&Ot.get(kr++);Ir.set(Er,Jr)}return Ir.getBuffer()})(le,st,ue,Ee):Yp(le,st,ue);ue.set(ut+Le.byteLength);const Xt=new _u(Mt,st);return new Z4(Be.name,Xt,Ee)})(B,F,K,0,se);case 6:case 5:return(function(le,ue,Be,tt,Ee){const Le=Kl(le,ue),st=Ig(Le,tt,le,ue),ut=Ee.physicalType===5;if(st===ra.FLAT){const Mt=Jp(tt)?(function(Xt,Vt,ir,_r,or){return(function(qt,Ot,Lr,Ir){switch(Ot.logicalLevelTechnique1){case qn.DELTA:return Ot.logicalLevelTechnique2===qn.RLE&&(qt=Lx(qt,Ot.runs,Ot.numRleValues)),(function(kr,Er){const Jr=new BigInt64Array(kr.size());let ri=0;kr.get(0)?(Jr[0]=kr.get(0)?Er[0]>>1n^-(1n&Er[0]):0n,ri=1):Jr[0]=0n;let Gn=1;for(;Gn!=Jr.length;++Gn)Jr[Gn]=kr.get(Gn)?Jr[Gn-1]+(Er[ri]>>1n^-(1n&Er[ri++])):Jr[Gn-1];return Jr})(Ir,qt);case qn.RLE:return(function(kr,Er,Jr,ri){const Gn=Er;return Jr?(function(ps,Ja,wo){const ms=new BigInt64Array(ps.size());let As=0;for(let Bi=0;Bi<wo;Bi++){const js=Number(Ja[Bi]);let io=Ja[Bi+wo];io=io>>1n^-(1n&io);for(let ts=As;ts<As+js;ts++)ps.get(ts)?ms[ts]=io:(ms[ts]=0n,As++);As+=js}return ms})(ri,kr,Gn.runs):(function(ps,Ja,wo){const ms=new BigInt64Array(ps.size());let As=0;for(let Bi=0;Bi<wo;Bi++){const js=Number(Ja[Bi]),io=Ja[Bi+wo];for(let ts=As;ts<As+js;ts++)ps.get(ts)?ms[ts]=io:(ms[ts]=0n,As++);As+=js}return ms})(ri,kr,Gn.runs)})(qt,Ot,Lr,Ir);case qn.NONE:return qt=Lr?(function(kr,Er){const Jr=new BigInt64Array(kr.size());let ri=0,Gn=0;for(;Gn!=Jr.length;++Gn)if(kr.get(Gn)){const ps=Er[ri++];Jr[Gn]=ps>>1n^-(1n&ps)}else Jr[Gn]=0n;return Jr})(Ir,qt):(function(kr,Er){const Jr=new BigInt64Array(kr.size());let ri=0,Gn=0;for(;Gn!=Jr.length;++Gn)Jr[Gn]=kr.get(Gn)?Er[ri++]:0n;return Jr})(Ir,qt),qt;default:throw new Error("The specified Logical level technique is not supported")}})(Sg(Xt,Vt,ir.numValues),ir,_r,or)})(le,ue,Le,ut,tt):Rx(le,ue,Le,ut);return new Qx(Be.name,Mt,tt)}if(st===ra.SEQUENCE){const Mt=Dx(le,ue,Le);return new Ox(Be.name,Mt[0],Mt[1],Le.numRleValues)}{const Mt=Nx(le,ue,Le,ut);return new Zx(Be.name,Mt,tt)}})(B,F,K,se,Q);case 7:return(function(le,ue,Be,tt){const Ee=Kl(le,ue),Le=Jp(tt)?(function(st,ut,Mt,Xt){const Vt=ut.get(),ir=Vt+Xt*Float32Array.BYTES_PER_ELEMENT,_r=new Uint8Array(st.subarray(Vt,ir)).buffer,or=new Float32Array(_r);ut.set(ir);const qt=Mt.size(),Ot=new Float32Array(qt);let Lr=0;for(let Ir=0;Ir<qt;Ir++)Ot[Ir]=Mt.get(Ir)?or[Lr++]:0;return Ot})(le,ue,tt,Ee.numValues):(function(st,ut,Mt){const Xt=ut.get(),Vt=Xt+Mt*Float32Array.BYTES_PER_ELEMENT,ir=new Uint8Array(st.subarray(Xt,Vt)).buffer,_r=new Float32Array(ir);return ut.set(Vt),_r})(le,ue,Ee.numValues);return new X4(Be.name,Le,tt)})(B,F,K,se);case 8:return(function(le,ue,Be,tt){const Ee=Kl(le,ue),Le=Jp(tt)?(function(st,ut,Mt,Xt){const Vt=ut.get(),ir=Vt+Xt*Float64Array.BYTES_PER_ELEMENT,_r=new Uint8Array(st.subarray(Vt,ir)).buffer,or=new Float64Array(_r);ut.set(ir);const qt=Mt.size(),Ot=new Float64Array(qt);let Lr=0;for(let Ir=0;Ir<qt;Ir++)Ot[Ir]=Mt.get(Ir)?or[Lr++]:0;return Ot})(le,ue,tt,Ee.numValues):(function(st,ut,Mt){const Xt=ut.get(),Vt=Xt+Mt*Float64Array.BYTES_PER_ELEMENT,ir=new Uint8Array(st.subarray(Xt,Vt)).buffer,_r=new Float64Array(ir);return ut.set(Vt),_r})(le,ue,Ee.numValues);return new pv(Be.name,Le,tt)})(B,F,K,se);default:throw new Error(`The specified data type for the field is currently not supported: ${Q}`)}})(A,a,t,p,s.scalarType,s):A!=1?null:(function(_,B,F,U){let Q=null,K=null,X=null,J=null,se=!1;for(;!se;){const tt=Kl(_,B);switch(tt.physicalStreamType){case Xa.LENGTH:Xc.DICTIONARY===tt.logicalStreamType.lengthType?Q=Jh(_,B,tt):X=Jh(_,B,tt);break;case Xa.DATA:vu.SINGLE===tt.logicalStreamType.dictionaryType||vu.SHARED===tt.logicalStreamType.dictionaryType?(K=_.subarray(B.get(),B.get()+tt.byteLength),se=!0):J=_.subarray(B.get(),B.get()+tt.byteLength),B.add(tt.byteLength)}}const le=F.complexType.children,ue=[];let Be=0;for(const tt of le){const Ee=xa(_,B,1)[0];if(Ee==0)continue;const Le=`${F.name}${tt.name==="default"?"":":"+tt.name}`;if(Ee!==2||tt.type!=="scalarField"||tt.scalarField.physicalType!==9)throw new Error("Currently only optional string fields are implemented for a struct.");const st=Kl(_,B),ut=Yp(_,st.numValues,B),Mt=Kl(_,B),Xt=Mt.decompressedCount!==U?wv(_,B,Mt,!1,new _u(ut,st.numValues)):ql(_,B,Mt,!1);ue[Be++]=J?new Jx(Le,Xt,Q,K,X,J,new _u(ut,st.numValues)):new kf(Le,Xt,Q,K,new _u(ut,st.numValues))}return ue})(a,t,s,p)}function Jp(a){return a instanceof _u}function eT(a){if(a.name==="id")return!1;if(a.type==="scalarType"){const t=a.scalarType;if(t.type==="physicalType")switch(t.physicalType){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:default:return!1;case 9:return!0}else if(t.type==="logicalType")return!1}else if(a.type==="complexType"){const t=a.complexType;if(t.type==="physicalType")switch(t.physicalType){case 0:case 1:return!0;default:return!1}}return console.warn("Unexpected column type in hasStreamCount",a),!1}const tT=new TextDecoder;function eb(a,t){const s=xa(a,t,1)[0];if(s===0)return"";const A=t.get(),p=a.subarray(A,A+s);return t.add(s),tT.decode(p)}function tb(a,t){const s=xa(a,t,1)[0]>>>0,A=!!(4&s),p=!!(2&s),v=xa(a,t,1)[0]>>>0,_={};if(1&s&&(_.nullable=!0),p){const B={};if(A?(B.type="logicalType",B.logicalType=v):(B.type="physicalType",B.physicalType=v),8&s){const F=xa(a,t,1)[0]>>>0;B.children=new Array(F);for(let U=0;U<F;U++)B.children[U]=tb(a,t)}_.type="complexField",_.complexField=B}else{const B={};A?(B.type="logicalType",B.logicalType=v):(B.type="physicalType",B.physicalType=v),_.type="scalarField",_.scalarField=B}return _}function rT(a,t){const s=xa(a,t,1)[0]>>>0,A=(function(p){switch(p){case 0:case 1:case 2:case 3:{const v={};v.nullable=!!(1&p),v.columnScope=0;const _={};return _.physicalType=p>1?6:4,_.type="physicalType",v.scalarType=_,v.type="scalarType",v}case 4:{const v={nullable:!1,columnScope:0},_={type:"physicalType",physicalType:0};return v.type="complexType",v.complexType=_,v}case 30:{const v={nullable:!1,columnScope:0},_={type:"physicalType",physicalType:1};return v.type="complexType",v.complexType=_,v}default:return(function(v){let _=null;switch(v){case 10:case 11:_=0;break;case 12:case 13:_=1;break;case 14:case 15:_=2;break;case 16:case 17:_=3;break;case 18:case 19:_=4;break;case 20:case 21:_=5;break;case 22:case 23:_=6;break;case 24:case 25:_=7;break;case 26:case 27:_=8;break;case 28:case 29:_=9;break;default:return null}const B={};B.nullable=!!(1&v),B.columnScope=0;const F={type:"physicalType"};return F.physicalType=_,B.type="scalarType",B.scalarType=F,B})(p)}})(s);if(!A)throw new Error(`Unsupported column type code: ${s}`);if((function(p){return p>=10})(s)?A.name=eb(a,t):s>=0&&s<=3?A.name="id":s===4&&(A.name="geometry"),(function(p){return p===30})(s)){const p=xa(a,t,1)[0]>>>0,v=A.complexType;v.children=new Array(p);for(let _=0;_<p;_++)v.children[_]=tb(a,t)}return A}function nT(a,t){const s={featureTables:[]},A={};A.name=eb(a,t);const p=xa(a,t,1)[0]>>>0,v=xa(a,t,1)[0]>>>0;A.columns=new Array(v);for(let _=0;_<v;_++)A.columns[_]=rT(a,t);return s.featureTables.push(A),[s,p]}function iT(a,t,s,A,p,v,_=!1){const B=t.scalarType.physicalType,F=Ig(p,v,a,s);if(B===4)switch(F){case ra.FLAT:{const U=ql(a,s,p,!1);return new fv(A,U,v)}case ra.SEQUENCE:{const U=Ux(a,s,p);return new mv(A,U[0],U[1],p.numRleValues)}case ra.CONST:{const U=_v(a,s,p,!1);return new gv(A,U,v)}}else switch(F){case ra.FLAT:{if(_){const Q=(function(K,X,J,se){const le=(function(ue,Be,tt){const Ee=new Float64Array(Be);for(let Le=0;Le<Be;Le++)Ee[Le]=V4(ue,tt);return Ee})(K,J.numValues,X);return(function(ue,Be,tt){switch(Be.logicalLevelTechnique1){case qn.DELTA:return Be.logicalLevelTechnique2===qn.RLE&&(ue=Mx(ue,Be.runs,Be.numRleValues)),(function(Ee){Ee[0]=Ee[0]%2==1?(Ee[0]+1)/-2:Ee[0]/2;const Le=Ee.length/4*4;let st=1;if(Le>=4)for(;st<Le-4;st+=4){const ut=Ee[st],Mt=Ee[st+1],Xt=Ee[st+2],Vt=Ee[st+3];Ee[st]=(ut%2==1?(ut+1)/-2:ut/2)+Ee[st-1],Ee[st+1]=(Mt%2==1?(Mt+1)/-2:Mt/2)+Ee[st],Ee[st+2]=(Xt%2==1?(Xt+1)/-2:Xt/2)+Ee[st+1],Ee[st+3]=(Vt%2==1?(Vt+1)/-2:Vt/2)+Ee[st+2]}for(;st!=Ee.length;++st)Ee[st]=(Ee[st]%2==1?(Ee[st]+1)/-2:Ee[st]/2)+Ee[st-1]})(ue),ue;case qn.RLE:return(function(Ee,Le,st){return Mx(Ee,Le.runs,Le.numRleValues)})(ue,Be);case qn.NONE:return ue;default:throw new Error(`The specified Logical level technique is not supported: ${Be.logicalLevelTechnique1}`)}})(le,J)})(a,s,p);return new pv(A,Q,v)}const U=Rx(a,s,p,!1);return new Qx(A,U,v)}case ra.SEQUENCE:{const U=Dx(a,s,p);return new Ox(A,U[0],U[1],p.numRleValues)}case ra.CONST:{const U=Nx(a,s,p,!1);return new Zx(A,U,v)}}throw new Error("Vector type not supported for id column.")}class sT{constructor(t,s){var A;switch(this._featureData=t,this.properties=this._featureData.properties||{},(A=this._featureData.geometry)===null||A===void 0?void 0:A.type){case na.POINT:case na.MULTIPOINT:this.type=1;break;case na.LINESTRING:case na.MULTILINESTRING:this.type=2;break;case na.POLYGON:case na.MULTIPOLYGON:this.type=3;break;default:this.type=0}this.extent=s,this.id=Number(this._featureData.id)}loadGeometry(){const t=[];for(const s of this._featureData.geometry.coordinates){const A=[];for(const p of s)A.push(new x(p.x,p.y));t.push(A)}return t}}class oT{constructor(t){this.features=[],this.featureTable=t,this.name=t.name,this.extent=t.extent,this.version=2,this.features=t.getFeatures(),this.length=this.features.length}feature(t){return new sT(this.features[t],this.extent)}}class rb{constructor(t){this.layers={};const s=(function(A,p,v=!0){const _=new j4(0),B=[];for(;_.get()<A.length;){const F=xa(A,_,1)[0]>>>0,U=_.get()+F;if(U>A.length)throw new Error(`Block overruns tile: ${U} > ${A.length}`);if(xa(A,_,1)[0]>>>0!=1){_.set(U);continue}const Q=nT(A,_),K=Q[1],X=Q[0].featureTables[0];let J=null,se=null;const le=[];let ue=0;for(const tt of X.columns){const Ee=tt.name;if(Ee==="id"){let Le=null;if(tt.nullable){const ut=Kl(A,_),Mt=_.get(),Xt=Yp(A,ut.numValues,_);_.set(Mt+ut.byteLength),Le=new _u(Xt,ut.numValues)}const st=Kl(A,_);ue=st.decompressedCount,J=iT(A,tt,_,Ee,st,Le??ue,v)}else if(Ee==="geometry"){const Le=xa(A,_,1)[0];if(ue===0){const st=_.get();ue=Kl(A,_).decompressedCount,_.set(st)}se=W4(A,Le,_,ue)}else{const Le=eT(tt)?xa(A,_,1)[0]:1;if(Le===0&&tt.type==="scalarType")continue;const st=J4(A,_,tt,Le,ue);if(st)if(Array.isArray(st))for(const ut of st)le.push(ut);else le.push(st)}}const Be=new H4(X.name,se,J,le,K);B.push(Be),_.set(U)}return B})(new Uint8Array(t));this.layers=s.reduce(((A,p)=>Object.assign(Object.assign({},A),{[p.name]:new oT(p)})),{})}}class Vd{constructor(){this.minX=1/0,this.maxX=-1/0,this.minY=1/0,this.maxY=-1/0}extend(t){return this.minX=Math.min(this.minX,t.x),this.minY=Math.min(this.minY,t.y),this.maxX=Math.max(this.maxX,t.x),this.maxY=Math.max(this.maxY,t.y),this}expandBy(t){return this.minX-=t,this.minY-=t,this.maxX+=t,this.maxY+=t,(this.minX>this.maxX||this.minY>this.maxY)&&(this.minX=1/0,this.maxX=-1/0,this.minY=1/0,this.maxY=-1/0),this}shrinkBy(t){return this.expandBy(-t)}map(t){const s=new Vd;return s.extend(t(new x(this.minX,this.minY))),s.extend(t(new x(this.maxX,this.minY))),s.extend(t(new x(this.minX,this.maxY))),s.extend(t(new x(this.maxX,this.maxY))),s}static fromPoints(t){const s=new Vd;for(const A of t)s.extend(A);return s}contains(t){return t.x>=this.minX&&t.x<=this.maxX&&t.y>=this.minY&&t.y<=this.maxY}empty(){return this.minX>this.maxX}width(){return this.maxX-this.minX}height(){return this.maxY-this.minY}covers(t){return!this.empty()&&!t.empty()&&t.minX>=this.minX&&t.maxX<=this.maxX&&t.minY>=this.minY&&t.maxY<=this.maxY}intersects(t){return!this.empty()&&!t.empty()&&t.minX<=this.maxX&&t.maxX>=this.minX&&t.minY<=this.maxY&&t.maxY>=this.minY}}class aT{constructor(t,s){this.feature=t,this.type=t.type,this.properties=t.tags?t.tags:{},this.extent=s,"id"in t&&(typeof t.id=="string"?this.id=parseInt(t.id,10):typeof t.id!="number"||isNaN(t.id)||(this.id=t.id))}loadGeometry(){const t=[],s=this.feature.type===1?[this.feature.geometry]:this.feature.geometry;for(const A of s){const p=[];for(const v of A)p.push(new x(v[0],v[1]));t.push(p)}return t}}const em="_geojsonTileLayer";function lT(a,t){t.writeVarintField(15,a.version||1),t.writeStringField(1,a.name||""),t.writeVarintField(5,a.extent||4096);const s={keys:[],values:[],keycache:{},valuecache:{}};for(let v=0;v<a.length;v++)s.feature=a.feature(v),t.writeMessage(2,cT,s);const A=s.keys;for(const v of A)t.writeStringField(3,v);const p=s.values;for(const v of p)t.writeMessage(4,hT,v)}function cT(a,t){if(!a.feature)return;const s=a.feature;s.id!==void 0&&t.writeVarintField(1,s.id),t.writeMessage(2,AT,a),t.writeVarintField(3,s.type),t.writeMessage(4,uT,s)}function AT(a,t){for(const s in a.feature?.properties){let A=a.feature.properties[s],p=a.keycache[s];if(A===null)continue;p===void 0&&(a.keys.push(s),p=a.keys.length-1,a.keycache[s]=p),t.writeVarint(p),typeof A!="string"&&typeof A!="boolean"&&typeof A!="number"&&(A=JSON.stringify(A));const v=typeof A+":"+A;let _=a.valuecache[v];_===void 0&&(a.values.push(A),_=a.values.length-1,a.valuecache[v]=_),t.writeVarint(_)}}function Iv(a,t){return(t<<3)+(7&a)}function nb(a){return a<<1^a>>31}function uT(a,t){const s=a.loadGeometry(),A=a.type;let p=0,v=0;for(const _ of s){let B=1;A===1&&(B=_.length),t.writeVarint(Iv(1,B));const F=A===3?_.length-1:_.length;for(let U=0;U<F;U++){U===1&&A!==1&&t.writeVarint(Iv(2,F-1));const Q=_[U].x-p,K=_[U].y-v;t.writeVarint(nb(Q)),t.writeVarint(nb(K)),p+=Q,v+=K}a.type===3&&t.writeVarint(Iv(7,1))}}function hT(a,t){const s=typeof a;s==="string"?t.writeStringField(1,a):s==="boolean"?t.writeBooleanField(7,a):s==="number"&&(a%1!=0?t.writeDoubleField(3,a):a<0?t.writeSVarintField(6,a):t.writeVarintField(5,a))}class ib{constructor(t,s){this.tileID=t,this.x=t.canonical.x,this.y=t.canonical.y,this.z=t.canonical.z,this.grid=new De(je,16,0),this.grid3D=new De(je,16,0),this.featureIndexArray=new ne,this.promoteId=s}insert(t,s,A,p,v,_){const B=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(A,p,v);const F=_?this.grid3D:this.grid;for(let U=0;U<s.length;U++){const Q=s[U],K=[1/0,1/0,-1/0,-1/0];for(let X=0;X<Q.length;X++){const J=Q[X];K[0]=Math.min(K[0],J.x),K[1]=Math.min(K[1],J.y),K[2]=Math.max(K[2],J.x),K[3]=Math.max(K[3],J.y)}K[0]<je&&K[1]<je&&K[2]>=0&&K[3]>=0&&F.insert(B,K[0],K[1],K[2],K[3])}}loadVTLayers(){return this.vtLayers||(this.vtLayers=this.encoding!=="mlt"?new wf(new qu(this.rawTileData)).layers:new rb(this.rawTileData).layers,this.sourceLayerCoder=new Ex(this.vtLayers?Object.keys(this.vtLayers).sort():[em])),this.vtLayers}query(t,s,A,p){this.loadVTLayers();const v=t.params,_=je/t.tileSize/t.scale,B=dc(v.filter,v.globalState),F=t.queryGeometry,U=t.queryPadding*_,Q=Vd.fromPoints(F),K=this.grid.query(Q.minX-U,Q.minY-U,Q.maxX+U,Q.maxY+U),X=Vd.fromPoints(t.cameraQueryGeometry).expandBy(U),J=this.grid3D.query(X.minX,X.minY,X.maxX,X.maxY,((ue,Be,tt,Ee)=>(function(Le,st,ut,Mt,Xt){for(const ir of Le)if(st<=ir.x&&ut<=ir.y&&Mt>=ir.x&&Xt>=ir.y)return!0;const Vt=[new x(st,ut),new x(st,Xt),new x(Mt,Xt),new x(Mt,ut)];if(Le.length>2){for(const ir of Vt)if(fh(Le,ir))return!0}for(let ir=0;ir<Le.length-1;ir++)if(Fp(Le[ir],Le[ir+1],Vt))return!0;return!1})(t.cameraQueryGeometry,ue-U,Be-U,tt+U,Ee+U)));for(const ue of J)K.push(ue);K.sort(dT);const se={};let le;for(let ue=0;ue<K.length;ue++){const Be=K[ue];if(Be===le)continue;le=Be;const tt=this.featureIndexArray.get(Be);let Ee=null;this.loadMatchingFeature(se,tt.bucketIndex,tt.sourceLayerIndex,tt.featureIndex,B,v.layers,v.availableImages,s,A,p,((Le,st,ut)=>(Ee||(Ee=KA(Le)),st.queryIntersectsFeature({queryGeometry:F,feature:Le,featureState:ut,geometry:Ee,zoom:this.z,transform:t.transform,pixelsToTileUnits:_,pixelPosMatrix:t.pixelPosMatrix,unwrappedTileID:this.tileID.toUnwrapped(),getElevation:t.getElevation}))))}return se}loadMatchingFeature(t,s,A,p,v,_,B,F,U,Q,K){const X=this.bucketLayerIDs[s];if(_&&!X.some((ue=>_.has(ue))))return;const J=this.sourceLayerCoder.decode(A),se=this.vtLayers[J].feature(p);if(v.needGeometry){const ue=qA(se,!0);if(!v.filter(new Mr(this.tileID.overscaledZ),ue,this.tileID.canonical))return}else if(!v.filter(new Mr(this.tileID.overscaledZ),se))return;const le=this.getId(se,J);for(let ue=0;ue<X.length;ue++){const Be=X[ue];if(_&&!_.has(Be))continue;const tt=F[Be];if(!tt)continue;let Ee={};le&&Q&&(Ee=Q.getState(tt.sourceLayer||em,le));const Le=vt({},U[Be]);Le.paint=sb(Le.paint,tt.paint,se,Ee,B),Le.layout=sb(Le.layout,tt.layout,se,Ee,B);const st=!K||K(se,tt,Ee);if(!st)continue;const ut=new Sx(se,this.z,this.x,this.y,le);ut.layer=Le;let Mt=t[Be];Mt===void 0&&(Mt=t[Be]=[]),Mt.push({featureIndex:p,feature:ut,intersectionZ:st})}}lookupSymbolFeatures(t,s,A,p,v,_,B,F){const U={};this.loadVTLayers();const Q=dc(v.filterSpec,v.globalState);for(const K of t)this.loadMatchingFeature(U,A,p,K,Q,_,B,F,s);return U}hasLayer(t){for(const s of this.bucketLayerIDs)for(const A of s)if(t===A)return!0;return!1}getId(t,s){var A;let p=t.id;return this.promoteId&&(p=t.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[s]],typeof p=="boolean"&&(p=Number(p)),p===void 0&&(!((A=t.properties)===null||A===void 0)&&A.cluster)&&this.promoteId&&(p=Number(t.properties.cluster_id))),p}}function sb(a,t,s,A,p){return Lt(a,((v,_)=>{const B=t instanceof Yn?t.get(_):null;return B&&B.evaluate?B.evaluate(s,A,p):B}))}function dT(a,t){return t-a}function ob(a,t,s,A,p){const v=[];for(let _=0;_<a.length;_++){const B=a[_];let F;for(let U=0;U<B.length-1;U++){let Q=B[U],K=B[U+1];Q.x<t&&K.x<t||(Q.x<t?Q=new x(t,Q.y+(t-Q.x)/(K.x-Q.x)*(K.y-Q.y))._round():K.x<t&&(K=new x(t,Q.y+(t-Q.x)/(K.x-Q.x)*(K.y-Q.y))._round()),Q.y<s&&K.y<s||(Q.y<s?Q=new x(Q.x+(s-Q.y)/(K.y-Q.y)*(K.x-Q.x),s)._round():K.y<s&&(K=new x(Q.x+(s-Q.y)/(K.y-Q.y)*(K.x-Q.x),s)._round()),Q.x>=A&&K.x>=A||(Q.x>=A?Q=new x(A,Q.y+(A-Q.x)/(K.x-Q.x)*(K.y-Q.y))._round():K.x>=A&&(K=new x(A,Q.y+(A-Q.x)/(K.x-Q.x)*(K.y-Q.y))._round()),Q.y>=p&&K.y>=p||(Q.y>=p?Q=new x(Q.x+(p-Q.y)/(K.y-Q.y)*(K.x-Q.x),p)._round():K.y>=p&&(K=new x(Q.x+(p-Q.y)/(K.y-Q.y)*(K.x-Q.x),p)._round()),F&&Q.equals(F[F.length-1])||(F=[Q],v.push(F)),F.push(K)))))}}return v}function ab(a,t,s,A,p){switch(t){case 1:return(function(v,_,B,F){const U=[];for(const Q of v)for(const K of Q){const X=F===0?K.x:K.y;X>=_&&X<=B&&U.push([K])}return U})(a,s,A,p);case 2:return lb(a,s,A,p,!1);case 3:return lb(a,s,A,p,!0)}return[]}function fT(a,t,s,A,p){const v=A===0?pT:mT;let _=[];const B=[];for(let Q=0;Q<a.length-1;Q++){const K=a[Q],X=a[Q+1],J=A===0?K.x:K.y,se=A===0?X.x:X.y;let le=!1;J<t?se>t&&_.push(v(K,X,t)):J>s?se<s&&_.push(v(K,X,s)):_.push(K),se<t&&J>=t&&(_.push(v(K,X,t)),le=!0),se>s&&J<=s&&(_.push(v(K,X,s)),le=!0),!p&&le&&(B.push(_),_=[])}const F=a.length-1,U=A===0?a[F].x:a[F].y;return U>=t&&U<=s&&_.push(a[F]),p&&_.length>0&&!_[0].equals(_[_.length-1])&&_.push(new x(_[0].x,_[0].y)),_.length>0&&B.push(_),B}function lb(a,t,s,A,p){const v=[];for(const _ of a){const B=fT(_,t,s,A,p);B.length>0&&v.push(...B)}return v}function pT(a,t,s){return new x(s,a.y+(s-a.x)/(t.x-a.x)*(t.y-a.y))}function mT(a,t,s){return new x(a.x+(s-a.y)/(t.y-a.y)*(t.x-a.x),s)}$e("FeatureIndex",ib,{omit:["rawTileData","sourceLayerCoder"]});class ed extends x{constructor(t,s,A,p){super(t,s),this.angle=A,p!==void 0&&(this.segment=p)}clone(){return new ed(this.x,this.y,this.angle,this.segment)}}function cb(a,t,s,A,p){if(t.segment===void 0||s===0)return!0;let v=t,_=t.segment+1,B=0;for(;B>-s/2;){if(_--,_<0)return!1;B-=a[_].dist(v),v=a[_]}B+=a[_].dist(a[_+1]),_++;const F=[];let U=0;for(;B<s/2;){const Q=a[_],K=a[_+1];if(!K)return!1;let X=a[_-1].angleTo(Q)-Q.angleTo(K);for(X=Math.abs((X+3*Math.PI)%(2*Math.PI)-Math.PI),F.push({distance:B,angleDelta:X}),U+=X;B-F[0].distance>A;)U-=F.shift().angleDelta;if(U>p)return!1;_++,B+=Q.dist(K)}return!0}function Ab(a){let t=0;for(let s=0;s<a.length-1;s++)t+=a[s].dist(a[s+1]);return t}function ub(a,t,s){return a?.6*t*s:0}function hb(a,t){return Math.max(a?a.right-a.left:0,t?t.right-t.left:0)}function gT(a,t,s,A,p,v){const _=ub(s,p,v),B=hb(s,A)*v;let F=0;const U=Ab(a)/2;for(let Q=0;Q<a.length-1;Q++){const K=a[Q],X=a[Q+1],J=K.dist(X);if(F+J>U){const se=(U-F)/J,le=br.number(K.x,X.x,se),ue=br.number(K.y,X.y,se),Be=new ed(le,ue,X.angleTo(K),Q);return Be._round(),!_||cb(a,Be,B,_,t)?Be:void 0}F+=J}}function yT(a,t,s,A,p,v,_,B,F){const U=ub(A,v,_),Q=hb(A,p),K=Q*_,X=a[0].x===0||a[0].x===F||a[0].y===0||a[0].y===F;return t-K<t/4&&(t=K+t/4),db(a,X?t/2*B%t:(Q/2+2*v)*_*B%t,t,U,s,K,X,!1,F)}function db(a,t,s,A,p,v,_,B,F){const U=v/2,Q=Ab(a);let K=0,X=t-s,J=[];for(let se=0;se<a.length-1;se++){const le=a[se],ue=a[se+1],Be=le.dist(ue),tt=ue.angleTo(le);for(;X+s<K+Be;){X+=s;const Ee=(X-K)/Be,Le=br.number(le.x,ue.x,Ee),st=br.number(le.y,ue.y,Ee);if(Le>=0&&Le<F&&st>=0&&st<F&&X-U>=0&&X+U<=Q){const ut=new ed(Le,st,tt,se);ut._round(),A&&!cb(a,ut,v,A,p)||J.push(ut)}}K+=Be}return B||J.length||_||(J=db(a,K/2,s,A,p,v,_,!0,F)),J}function fb(a,t,s,A){const p=[],v=a.image,_=v.pixelRatio,B=v.paddedRect.w-2,F=v.paddedRect.h-2;let U={x1:a.left,y1:a.top,x2:a.right,y2:a.bottom};const Q=v.stretchX||[[0,B]],K=v.stretchY||[[0,F]],X=(Ot,Lr)=>Ot+Lr[1]-Lr[0],J=Q.reduce(X,0),se=K.reduce(X,0),le=B-J,ue=F-se;let Be=0,tt=J,Ee=0,Le=se,st=0,ut=le,Mt=0,Xt=ue;if(v.content&&A){const Ot=v.content,Lr=Ot[2]-Ot[0],Ir=Ot[3]-Ot[1];(v.textFitWidth||v.textFitHeight)&&(U=Po(a)),Be=Mg(Q,0,Ot[0]),Ee=Mg(K,0,Ot[1]),tt=Mg(Q,Ot[0],Ot[2]),Le=Mg(K,Ot[1],Ot[3]),st=Ot[0]-Be,Mt=Ot[1]-Ee,ut=Lr-tt,Xt=Ir-Le}const Vt=U.x1,ir=U.y1,_r=U.x2-Vt,or=U.y2-ir,qt=(Ot,Lr,Ir,kr)=>{const Er=kg(Ot.stretch-Be,tt,_r,Vt),Jr=Ug(Ot.fixed-st,ut,Ot.stretch,J),ri=kg(Lr.stretch-Ee,Le,or,ir),Gn=Ug(Lr.fixed-Mt,Xt,Lr.stretch,se),ps=kg(Ir.stretch-Be,tt,_r,Vt),Ja=Ug(Ir.fixed-st,ut,Ir.stretch,J),wo=kg(kr.stretch-Ee,Le,or,ir),ms=Ug(kr.fixed-Mt,Xt,kr.stretch,se),As=new x(Er,ri),Bi=new x(ps,ri),js=new x(ps,wo),io=new x(Er,wo),ts=new x(Jr/_,Gn/_),wc=new x(Ja/_,ms/_),el=t*Math.PI/180;if(el){const ia=Math.sin(el),Ls=Math.cos(el),xo=[Ls,-ia,ia,Ls];As._matMult(xo),Bi._matMult(xo),io._matMult(xo),js._matMult(xo)}const xc=Ot.stretch+Ot.fixed,YA=Lr.stretch+Lr.fixed;return{tl:As,tr:Bi,bl:io,br:js,tex:{x:v.paddedRect.x+1+xc,y:v.paddedRect.y+1+YA,w:Ir.stretch+Ir.fixed-xc,h:kr.stretch+kr.fixed-YA},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:ts,pixelOffsetBR:wc,minFontScaleX:ut/_/_r,minFontScaleY:Xt/_/or,isSDF:s}};if(A&&(v.stretchX||v.stretchY)){const Ot=pb(Q,le,J),Lr=pb(K,ue,se);for(let Ir=0;Ir<Ot.length-1;Ir++){const kr=Ot[Ir],Er=Ot[Ir+1];for(let Jr=0;Jr<Lr.length-1;Jr++)p.push(qt(kr,Lr[Jr],Er,Lr[Jr+1]))}}else p.push(qt({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:B+1},{fixed:0,stretch:F+1}));return p}function Mg(a,t,s){let A=0;for(const p of a)A+=Math.max(t,Math.min(s,p[1]))-Math.max(t,Math.min(s,p[0]));return A}function pb(a,t,s){const A=[{fixed:-1,stretch:0}];for(const[p,v]of a){const _=A[A.length-1];A.push({fixed:p-_.stretch,stretch:_.stretch}),A.push({fixed:p-_.stretch,stretch:_.stretch+(v-p)})}return A.push({fixed:t+1,stretch:s}),A}function kg(a,t,s,A){return a/t*s+A}function Ug(a,t,s,A){return a-t*s/A}$e("Anchor",ed);class Dg{constructor(t,s,A,p,v,_,B,F,U,Q){var K;if(this.boxStartIndex=t.length,U){let X=_.top,J=_.bottom;const se=_.collisionPadding;se&&(X-=se[1],J+=se[3]);let le=J-X;le>0&&(le=Math.max(10,le),this.circleDiameter=le)}else{const X=!((K=_.image)===null||K===void 0)&&K.content&&(_.image.textFitWidth||_.image.textFitHeight)?Po(_):{x1:_.left,y1:_.top,x2:_.right,y2:_.bottom};X.y1=X.y1*B-F[0],X.y2=X.y2*B+F[2],X.x1=X.x1*B-F[3],X.x2=X.x2*B+F[1];const J=_.collisionPadding;if(J&&(X.x1-=J[0]*B,X.y1-=J[1]*B,X.x2+=J[2]*B,X.y2+=J[3]*B),Q){const se=new x(X.x1,X.y1),le=new x(X.x2,X.y1),ue=new x(X.x1,X.y2),Be=new x(X.x2,X.y2),tt=Q*Math.PI/180;se._rotate(tt),le._rotate(tt),ue._rotate(tt),Be._rotate(tt),X.x1=Math.min(se.x,le.x,ue.x,Be.x),X.x2=Math.max(se.x,le.x,ue.x,Be.x),X.y1=Math.min(se.y,le.y,ue.y,Be.y),X.y2=Math.max(se.y,le.y,ue.y,Be.y)}t.emplaceBack(s.x,s.y,X.x1,X.y1,X.x2,X.y2,A,p,v)}this.boxEndIndex=t.length}}class vT{constructor(t=[],s=(A,p)=>A<p?-1:A>p?1:0){if(this.data=t,this.length=this.data.length,this.compare=s,this.length>0)for(let A=(this.length>>1)-1;A>=0;A--)this._down(A)}push(t){this.data.push(t),this._up(this.length++)}pop(){if(this.length===0)return;const t=this.data[0],s=this.data.pop();return--this.length>0&&(this.data[0]=s,this._down(0)),t}peek(){return this.data[0]}_up(t){const{data:s,compare:A}=this,p=s[t];for(;t>0;){const v=t-1>>1,_=s[v];if(A(p,_)>=0)break;s[t]=_,t=v}s[t]=p}_down(t){const{data:s,compare:A}=this,p=this.length>>1,v=s[t];for(;t<p;){let _=1+(t<<1);const B=_+1;if(B<this.length&&A(s[B],s[_])<0&&(_=B),A(s[_],v)>=0)break;s[t]=s[_],t=_}s[t]=v}}function _T(a,t=1,s=!1){const A=Vd.fromPoints(a[0]),p=Math.min(A.width(),A.height());let v=p/2;const _=new vT([],wT),{minX:B,minY:F,maxX:U,maxY:Q}=A;if(p===0)return new x(B,F);for(let J=B;J<U;J+=p)for(let se=F;se<Q;se+=p)_.push(new Uf(J+v,se+v,v,a));let K=(function(J){let se=0,le=0,ue=0;const Be=J[0];for(let tt=0,Ee=Be.length,Le=Ee-1;tt<Ee;Le=tt++){const st=Be[tt],ut=Be[Le],Mt=st.x*ut.y-ut.x*st.y;le+=(st.x+ut.x)*Mt,ue+=(st.y+ut.y)*Mt,se+=3*Mt}return new Uf(le/se,ue/se,0,J)})(a),X=_.length;for(;_.length;){const J=_.pop();(J.d>K.d||!K.d)&&(K=J,s&&console.log("found best %d after %d probes",Math.round(1e4*J.d)/1e4,X)),J.max-K.d<=t||(v=J.h/2,_.push(new Uf(J.p.x-v,J.p.y-v,v,a)),_.push(new Uf(J.p.x+v,J.p.y-v,v,a)),_.push(new Uf(J.p.x-v,J.p.y+v,v,a)),_.push(new Uf(J.p.x+v,J.p.y+v,v,a)),X+=4)}return s&&(console.log(`num probes: ${X}`),console.log(`best distance: ${K.d}`)),K.p}function wT(a,t){return t.max-a.max}function Uf(a,t,s,A){this.p=new x(a,t),this.h=s,this.d=(function(p,v){let _=!1,B=1/0;for(let F=0;F<v.length;F++){const U=v[F];for(let Q=0,K=U.length,X=K-1;Q<K;X=Q++){const J=U[Q],se=U[X];J.y>p.y!=se.y>p.y&&p.x<(se.x-J.x)*(p.y-J.y)/(se.y-J.y)+J.x&&(_=!_),B=Math.min(B,Td(p,J,se))}}return(_?1:-1)*Math.sqrt(B)})(this.p,A),this.max=this.d+this.h*Math.SQRT2}var Ya;m.aQ=void 0,(Ya=m.aQ||(m.aQ={}))[Ya.center=1]="center",Ya[Ya.left=2]="left",Ya[Ya.right=3]="right",Ya[Ya.top=4]="top",Ya[Ya.bottom=5]="bottom",Ya[Ya["top-left"]=6]="top-left",Ya[Ya["top-right"]=7]="top-right",Ya[Ya["bottom-left"]=8]="bottom-left",Ya[Ya["bottom-right"]=9]="bottom-right";const Tv=Number.POSITIVE_INFINITY;function mb(a,t){return t[1]!==Tv?(function(s,A,p){let v=0,_=0;switch(A=Math.abs(A),p=Math.abs(p),s){case"top-right":case"top-left":case"top":_=p-7;break;case"bottom-right":case"bottom-left":case"bottom":_=7-p}switch(s){case"top-right":case"bottom-right":case"right":v=-A;break;case"top-left":case"bottom-left":case"left":v=A}return[v,_]})(a,t[0],t[1]):(function(s,A){let p=0,v=0;A<0&&(A=0);const _=A/Math.SQRT2;switch(s){case"top-right":case"top-left":v=_-7;break;case"bottom-right":case"bottom-left":v=7-_;break;case"bottom":v=7-A;break;case"top":v=A-7}switch(s){case"top-right":case"bottom-right":p=-_;break;case"top-left":case"bottom-left":p=_;break;case"left":p=A;break;case"right":p=-A}return[p,v]})(a,t[0])}function gb(a,t,s){var A;const p=a.layout,v=(A=p.get("text-variable-anchor-offset"))===null||A===void 0?void 0:A.evaluate(t,{},s);if(v){const B=v.values,F=[];for(let U=0;U<B.length;U+=2){const Q=F[U]=B[U],K=B[U+1].map((X=>X*Hs));Q.startsWith("top")?K[1]-=7:Q.startsWith("bottom")&&(K[1]+=7),F[U+1]=K}return new Wi(F)}const _=p.get("text-variable-anchor");if(_){let B;B=a._unevaluatedLayout.getValue("text-radial-offset")!==void 0?[p.get("text-radial-offset").evaluate(t,{},s)*Hs,Tv]:p.get("text-offset").evaluate(t,{},s).map((U=>U*Hs));const F=[];for(const U of _)F.push(U,mb(U,B));return new Wi(F)}return null}function Pv(a){switch(a){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function xT(a,t,s,A,p,v,_,B,F,U,Q,K){let X=v.textMaxSize.evaluate(t,{});X===void 0&&(X=_);const J=a.layers[0].layout,se=J.get("icon-offset").evaluate(t,{},Q),le=vb(s.horizontal),ue=_/24,Be=a.tilePixelRatio*ue,tt=a.tilePixelRatio*X/24,Ee=a.tilePixelRatio*B,Le=a.tilePixelRatio*J.get("symbol-spacing"),st=J.get("text-padding")*a.tilePixelRatio,ut=(function(Ir,kr,Er,Jr=1){const ri=Ir.get("icon-padding").evaluate(kr,{},Er),Gn=ri&&ri.values;return[Gn[0]*Jr,Gn[1]*Jr,Gn[2]*Jr,Gn[3]*Jr]})(J,t,Q,a.tilePixelRatio),Mt=J.get("text-max-angle")/180*Math.PI,Xt=J.get("text-rotation-alignment")!=="viewport"&&J.get("symbol-placement")!=="point",Vt=J.get("icon-rotation-alignment")==="map"&&J.get("symbol-placement")!=="point",ir=J.get("symbol-placement"),_r=Le/2,or=J.get("icon-text-fit");let qt;A&&or!=="none"&&(a.allowVerticalPlacement&&s.vertical&&(qt=vi(A,s.vertical,or,J.get("icon-text-fit-padding"),se,ue)),le&&(A=vi(A,le,or,J.get("icon-text-fit-padding"),se,ue)));const Ot=Q?K.line.getGranularityForZoomLevel(Q.z):1,Lr=(Ir,kr)=>{kr.x<0||kr.x>=je||kr.y<0||kr.y>=je||(function(Er,Jr,ri,Gn,ps,Ja,wo,ms,As,Bi,js,io,ts,wc,el,xc,YA,ia,Ls,xo,Vs,sa,Th,wu,nm){const td=Er.addToLineVertexArray(Jr,ri);let Gd,Df,Rf,Nf,bb=0,Bb=0,Cb=0,Eb=0,Qv=-1,Ov=-1;const Ph={};let Sb=Ki("");if(Er.allowVerticalPlacement&&Gn.vertical){const wl=ms.layout.get("text-rotate").evaluate(Vs,{},wu)+90;Rf=new Dg(As,Jr,Bi,js,io,Gn.vertical,ts,wc,el,wl),wo&&(Nf=new Dg(As,Jr,Bi,js,io,wo,YA,ia,el,wl))}if(ps){const wl=ms.layout.get("icon-rotate").evaluate(Vs,{}),xA=ms.layout.get("icon-text-fit")!=="none",Kd=fb(ps,wl,Th,xA),bu=wo?fb(wo,wl,Th,xA):void 0;Df=new Dg(As,Jr,Bi,js,io,ps,YA,ia,!1,wl),bb=4*Kd.length;const qd=Er.iconSizeData;let Wu=null;qd.kind==="source"?(Wu=[Za*ms.layout.get("icon-size").evaluate(Vs,{})],Wu[0]>$u&&Cr(`${Er.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)):qd.kind==="composite"&&(Wu=[Za*sa.compositeIconSizes[0].evaluate(Vs,{},wu),Za*sa.compositeIconSizes[1].evaluate(Vs,{},wu)],(Wu[0]>$u||Wu[1]>$u)&&Cr(`${Er.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)),Er.addSymbols(Er.icon,Kd,Wu,xo,Ls,Vs,m.aA.none,Jr,td.lineStartIndex,td.lineLength,-1,wu),Qv=Er.icon.placedSymbolArray.length-1,bu&&(Bb=4*bu.length,Er.addSymbols(Er.icon,bu,Wu,xo,Ls,Vs,m.aA.vertical,Jr,td.lineStartIndex,td.lineLength,-1,wu),Ov=Er.icon.placedSymbolArray.length-1)}const Fb=Object.keys(Gn.horizontal);for(const wl of Fb){const xA=Gn.horizontal[wl];if(!Gd){Sb=Ki(xA.text);const bu=ms.layout.get("text-rotate").evaluate(Vs,{},wu);Gd=new Dg(As,Jr,Bi,js,io,xA,ts,wc,el,bu)}const Kd=xA.positionedLines.length===1;if(Cb+=yb(Er,Jr,xA,Ja,ms,el,Vs,xc,td,Gn.vertical?m.aA.horizontal:m.aA.horizontalOnly,Kd?Fb:[wl],Ph,Qv,sa,wu),Kd)break}Gn.vertical&&(Eb+=yb(Er,Jr,Gn.vertical,Ja,ms,el,Vs,xc,td,m.aA.vertical,["vertical"],Ph,Ov,sa,wu));const CT=Gd?Gd.boxStartIndex:Er.collisionBoxArray.length,ET=Gd?Gd.boxEndIndex:Er.collisionBoxArray.length,ST=Rf?Rf.boxStartIndex:Er.collisionBoxArray.length,FT=Rf?Rf.boxEndIndex:Er.collisionBoxArray.length,IT=Df?Df.boxStartIndex:Er.collisionBoxArray.length,TT=Df?Df.boxEndIndex:Er.collisionBoxArray.length,PT=Nf?Nf.boxStartIndex:Er.collisionBoxArray.length,LT=Nf?Nf.boxEndIndex:Er.collisionBoxArray.length;let xu=-1;const Ng=(wl,xA)=>wl&&wl.circleDiameter?Math.max(wl.circleDiameter,xA):xA;xu=Ng(Gd,xu),xu=Ng(Rf,xu),xu=Ng(Df,xu),xu=Ng(Nf,xu);const Ib=xu>-1?1:0;Ib&&(xu*=nm/Hs),Er.glyphOffsetArray.length>=If.MAX_GLYPHS&&Cr("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),Vs.sortKey!==void 0&&Er.addToSortKeyRanges(Er.symbolInstances.length,Vs.sortKey);const MT=gb(ms,Vs,wu),[kT,UT]=(function(wl,xA){const Kd=wl.length,bu=xA?.values;if(bu?.length>0)for(let qd=0;qd<bu.length;qd+=2){const Wu=bu[qd+1];wl.emplaceBack(m.aQ[bu[qd]],Wu[0],Wu[1])}return[Kd,wl.length]})(Er.textAnchorOffsets,MT);Er.symbolInstances.emplaceBack(Jr.x,Jr.y,Ph.right>=0?Ph.right:-1,Ph.center>=0?Ph.center:-1,Ph.left>=0?Ph.left:-1,Ph.vertical||-1,Qv,Ov,Sb,CT,ET,ST,FT,IT,TT,PT,LT,Bi,Cb,Eb,bb,Bb,Ib,0,ts,xu,kT,UT)})(a,kr,Ir,s,A,p,qt,a.layers[0],a.collisionBoxArray,t.index,t.sourceLayerIndex,a.index,Be,[st,st,st,st],Xt,F,Ee,ut,Vt,se,t,v,U,Q,_)};if(ir==="line")for(const Ir of ob(t.geometry,0,0,je,je)){const kr=XA(Ir,Ot),Er=yT(kr,Le,Mt,s.vertical||le,A,24,tt,a.overscaling,je);for(const Jr of Er)le&&bT(a,le.text,_r,Jr)||Lr(kr,Jr)}else if(ir==="line-center"){for(const Ir of t.geometry)if(Ir.length>1){const kr=XA(Ir,Ot),Er=gT(kr,Mt,s.vertical||le,A,24,tt);Er&&Lr(kr,Er)}}else if(t.type==="Polygon")for(const Ir of Ma(t.geometry,0)){const kr=_T(Ir,16);Lr(XA(Ir[0],Ot,!0),new ed(kr.x,kr.y,0))}else if(t.type==="LineString")for(const Ir of t.geometry){const kr=XA(Ir,Ot);Lr(kr,new ed(kr[0].x,kr[0].y,0))}else if(t.type==="Point")for(const Ir of t.geometry)for(const kr of Ir)Lr([kr],new ed(kr.x,kr.y,0))}function yb(a,t,s,A,p,v,_,B,F,U,Q,K,X,J,se){const le=(function(tt,Ee,Le,st,ut,Mt,Xt,Vt){const ir=st.layout.get("text-rotate").evaluate(Mt,{})*Math.PI/180,_r=[];for(const or of Ee.positionedLines)for(const qt of or.positionedGlyphs){if(!qt.rect)continue;const Ot=qt.rect||{};let Lr=4,Ir=!0,kr=1,Er=0;const Jr=(ut||Vt)&&qt.vertical,ri=qt.metrics.advance*qt.scale/2;if(Vt&&Ee.verticalizable&&(Er=or.lineOffset/2-(qt.imageName?-(Hs-qt.metrics.width*qt.scale)/2:(qt.scale-1)*Hs)),qt.imageName){const ia=Xt[qt.imageName];Ir=ia.sdf,kr=ia.pixelRatio,Lr=1/kr}const Gn=ut?[qt.x+ri,qt.y]:[0,0];let ps=ut?[0,0]:[qt.x+ri+Le[0],qt.y+Le[1]-Er],Ja=[0,0];Jr&&(Ja=ps,ps=[0,0]);const wo=qt.metrics.isDoubleResolution?2:1,ms=(qt.metrics.left-Lr)*qt.scale-ri+ps[0],As=(-qt.metrics.top-Lr)*qt.scale+ps[1],Bi=ms+Ot.w/wo*qt.scale/kr,js=As+Ot.h/wo*qt.scale/kr,io=new x(ms,As),ts=new x(Bi,As),wc=new x(ms,js),el=new x(Bi,js);if(Jr){const ia=new x(-ri,ri- -17),Ls=-Math.PI/2,xo=12-ri,Vs=new x(22-xo,-(qt.imageName?xo:0)),sa=new x(...Ja);io._rotateAround(Ls,ia)._add(Vs)._add(sa),ts._rotateAround(Ls,ia)._add(Vs)._add(sa),wc._rotateAround(Ls,ia)._add(Vs)._add(sa),el._rotateAround(Ls,ia)._add(Vs)._add(sa)}if(ir){const ia=Math.sin(ir),Ls=Math.cos(ir),xo=[Ls,-ia,ia,Ls];io._matMult(xo),ts._matMult(xo),wc._matMult(xo),el._matMult(xo)}const xc=new x(0,0),YA=new x(0,0);_r.push({tl:io,tr:ts,bl:wc,br:el,tex:Ot,writingMode:Ee.writingMode,glyphOffset:Gn,sectionIndex:qt.sectionIndex,isSDF:Ir,pixelOffsetTL:xc,pixelOffsetBR:YA,minFontScaleX:0,minFontScaleY:0})}return _r})(0,s,B,p,v,_,A,a.allowVerticalPlacement),ue=a.textSizeData;let Be=null;ue.kind==="source"?(Be=[Za*p.layout.get("text-size").evaluate(_,{})],Be[0]>$u&&Cr(`${a.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)):ue.kind==="composite"&&(Be=[Za*J.compositeTextSizes[0].evaluate(_,{},se),Za*J.compositeTextSizes[1].evaluate(_,{},se)],(Be[0]>$u||Be[1]>$u)&&Cr(`${a.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)),a.addSymbols(a.text,le,Be,B,v,_,U,t,F.lineStartIndex,F.lineLength,X,se);for(const tt of Q)K[tt]=a.text.placedSymbolArray.length-1;return 4*le.length}function vb(a){for(const t in a)return a[t];return null}function bT(a,t,s,A){const p=a.compareText;if(t in p){const v=p[t];for(let _=v.length-1;_>=0;_--)if(A.dist(v[_])<s)return!0}else p[t]=[];return p[t].push(A),!1}const _b=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class Lv{static from(t){if(!(t instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[s,A]=new Uint8Array(t,0,2);if(s!==219)throw new Error("Data does not appear to be in a KDBush format.");const p=A>>4;if(p!==1)throw new Error(`Got v${p} data when expected v1.`);const v=_b[15&A];if(!v)throw new Error("Unrecognized array type.");const[_]=new Uint16Array(t,2,1),[B]=new Uint32Array(t,4,1);return new Lv(B,_,v,t)}constructor(t,s=64,A=Float64Array,p){if(isNaN(t)||t<0)throw new Error(`Unpexpected numItems value: ${t}.`);this.numItems=+t,this.nodeSize=Math.min(Math.max(+s,2),65535),this.ArrayType=A,this.IndexArrayType=t<65536?Uint16Array:Uint32Array;const v=_b.indexOf(this.ArrayType),_=2*t*this.ArrayType.BYTES_PER_ELEMENT,B=t*this.IndexArrayType.BYTES_PER_ELEMENT,F=(8-B%8)%8;if(v<0)throw new Error(`Unexpected typed array class: ${A}.`);p&&p instanceof ArrayBuffer?(this.data=p,this.ids=new this.IndexArrayType(this.data,8,t),this.coords=new this.ArrayType(this.data,8+B+F,2*t),this._pos=2*t,this._finished=!0):(this.data=new ArrayBuffer(8+_+B+F),this.ids=new this.IndexArrayType(this.data,8,t),this.coords=new this.ArrayType(this.data,8+B+F,2*t),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+v]),new Uint16Array(this.data,2,1)[0]=s,new Uint32Array(this.data,4,1)[0]=t)}add(t,s){const A=this._pos>>1;return this.ids[A]=A,this.coords[this._pos++]=t,this.coords[this._pos++]=s,A}finish(){const t=this._pos>>1;if(t!==this.numItems)throw new Error(`Added ${t} items when expected ${this.numItems}.`);return Mv(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(t,s,A,p){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:v,coords:_,nodeSize:B}=this,F=[0,v.length-1,0],U=[];for(;F.length;){const Q=F.pop()||0,K=F.pop()||0,X=F.pop()||0;if(K-X<=B){for(let ue=X;ue<=K;ue++){const Be=_[2*ue],tt=_[2*ue+1];Be>=t&&Be<=A&&tt>=s&&tt<=p&&U.push(v[ue])}continue}const J=X+K>>1,se=_[2*J],le=_[2*J+1];se>=t&&se<=A&&le>=s&&le<=p&&U.push(v[J]),(Q===0?t<=se:s<=le)&&(F.push(X),F.push(J-1),F.push(1-Q)),(Q===0?A>=se:p>=le)&&(F.push(J+1),F.push(K),F.push(1-Q))}return U}within(t,s,A){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:p,coords:v,nodeSize:_}=this,B=[0,p.length-1,0],F=[],U=A*A;for(;B.length;){const Q=B.pop()||0,K=B.pop()||0,X=B.pop()||0;if(K-X<=_){for(let ue=X;ue<=K;ue++)xb(v[2*ue],v[2*ue+1],t,s)<=U&&F.push(p[ue]);continue}const J=X+K>>1,se=v[2*J],le=v[2*J+1];xb(se,le,t,s)<=U&&F.push(p[J]),(Q===0?t-A<=se:s-A<=le)&&(B.push(X),B.push(J-1),B.push(1-Q)),(Q===0?t+A>=se:s+A>=le)&&(B.push(J+1),B.push(K),B.push(1-Q))}return F}}function Mv(a,t,s,A,p,v){if(p-A<=s)return;const _=A+p>>1;wb(a,t,_,A,p,v),Mv(a,t,s,A,_-1,1-v),Mv(a,t,s,_+1,p,1-v)}function wb(a,t,s,A,p,v){for(;p>A;){if(p-A>600){const U=p-A+1,Q=s-A+1,K=Math.log(U),X=.5*Math.exp(2*K/3),J=.5*Math.sqrt(K*X*(U-X)/U)*(Q-U/2<0?-1:1);wb(a,t,s,Math.max(A,Math.floor(s-Q*X/U+J)),Math.min(p,Math.floor(s+(U-Q)*X/U+J)),v)}const _=t[2*s+v];let B=A,F=p;for(tm(a,t,A,s),t[2*p+v]>_&&tm(a,t,A,p);B<F;){for(tm(a,t,B,F),B++,F--;t[2*B+v]<_;)B++;for(;t[2*F+v]>_;)F--}t[2*A+v]===_?tm(a,t,A,F):(F++,tm(a,t,F,p)),F<=s&&(A=F+1),s<=F&&(p=F-1)}}function tm(a,t,s,A){kv(a,s,A),kv(t,2*s,2*A),kv(t,2*s+1,2*A+1)}function kv(a,t,s){const A=a[t];a[t]=a[s],a[s]=A}function xb(a,t,s,A){const p=a-s,v=t-A;return p*p+v*v}var Uv;m.cI=void 0,(Uv=m.cI||(m.cI={})).create="create",Uv.load="load",Uv.fullLoad="fullLoad";let Rg=null,rm=[];const Dv=1e3/60,Rv="loadTime",Nv="fullLoadTime",BT={mark(a){performance.mark(a)},frame(a){const t=a;Rg!=null&&rm.push(t-Rg),Rg=t},clearMetrics(){Rg=null,rm=[],performance.clearMeasures(Rv),performance.clearMeasures(Nv);for(const a in m.cI)performance.clearMarks(m.cI[a])},getPerformanceMetrics(){performance.measure(Rv,m.cI.create,m.cI.load),performance.measure(Nv,m.cI.create,m.cI.fullLoad);const a=performance.getEntriesByName(Rv)[0].duration,t=performance.getEntriesByName(Nv)[0].duration,s=rm.length,A=1/(rm.reduce(((v,_)=>v+_),0)/s/1e3),p=rm.filter((v=>v>Dv)).reduce(((v,_)=>v+(_-Dv)/Dv),0);return{loadTime:a,fullLoadTime:t,fps:A,percentDroppedFrames:p/(s+p)*100,totalFrames:s}}};m.$=H,m.A=ce,m.B=Te,m.C=$,m.D=gr,m.E=Tr,m.F=function([a,t,s]){return t+=90,t*=Math.PI/180,s*=Math.PI/180,{x:a*Math.cos(t)*Math.sin(s),y:a*Math.sin(t)*Math.sin(s),z:a*Math.cos(s)}},m.G=br,m.H=Mr,m.I=Qr,m.J=me,m.K=function(a){if(Ur==null){const t=a.navigator?a.navigator.userAgent:null;Ur=!!a.safari||!(!t||!(/\b(iPad|iPhone|iPod)\b/.test(t)||t.match("Safari")&&!t.match("Chrome")))}return Ur},m.L=class{constructor(a,t){this.target=a,this.mapId=t,this.resolveRejects={},this.tasks={},this.taskQueue=[],this.abortControllers={},this.messageHandlers={},this.invoker=new Q4((()=>this.process())),this.subscription=Rr(this.target,"message",(s=>this.receive(s)),!1),this.globalScope=vr(self)?a:window}registerMessageHandler(a,t){this.messageHandlers[a]=t}unregisterMessageHandler(a){delete this.messageHandlers[a]}sendAsync(a,t){return new Promise(((s,A)=>{const p=Math.round(1e18*Math.random()).toString(36).substring(0,10),v=t?Rr(t.signal,"abort",(()=>{v?.unsubscribe(),delete this.resolveRejects[p];const F={id:p,type:"<cancel>",origin:location.origin,targetMapId:a.targetMapId,sourceMapId:this.mapId};this.target.postMessage(F)}),O4):null;this.resolveRejects[p]={resolve:F=>{v?.unsubscribe(),s(F)},reject:F=>{v?.unsubscribe(),A(F)}};const _=[],B=Object.assign(Object.assign({},a),{id:p,sourceMapId:this.mapId,origin:location.origin,data:Tt(a.data,_)});this.target.postMessage(B,{transfer:_})}))}receive(a){const t=a.data,s=t.id;if(!(t.origin!=="file://"&&location.origin!=="file://"&&t.origin!=="resource://android"&&location.origin!=="resource://android"&&t.origin!==location.origin||t.targetMapId&&this.mapId!==t.targetMapId)){if(t.type==="<cancel>"){delete this.tasks[s];const A=this.abortControllers[s];return delete this.abortControllers[s],void(A&&A.abort())}if(vr(self)||t.mustQueue)return this.tasks[s]=t,this.taskQueue.push(s),void this.invoker.trigger();this.processTask(s,t)}}process(){if(this.taskQueue.length===0)return;const a=this.taskQueue.shift(),t=this.tasks[a];delete this.tasks[a],this.taskQueue.length>0&&this.invoker.trigger(),t&&this.processTask(a,t)}processTask(a,t){return o(this,void 0,void 0,(function*(){if(t.type==="<response>"){const p=this.resolveRejects[a];return delete this.resolveRejects[a],p?void(t.error?p.reject(Zt(t.error)):p.resolve(Zt(t.data))):void 0}if(!this.messageHandlers[t.type])return void this.completeTask(a,new Error(`Could not find a registered handler for ${t.type}, map ID: ${this.mapId}, available handlers: ${Object.keys(this.messageHandlers).join(", ")}`));const s=Zt(t.data),A=new AbortController;this.abortControllers[a]=A;try{const p=yield this.messageHandlers[t.type](t.sourceMapId,s,A);this.completeTask(a,null,p)}catch(p){this.completeTask(a,p)}}))}completeTask(a,t,s){const A=[];delete this.abortControllers[a];const p={id:a,type:"<response>",sourceMapId:this.mapId,origin:location.origin,error:t?Tt(t):null,data:Tt(s,A)};this.target.postMessage(p,{transfer:A})}remove(){this.invoker.remove(),this.subscription.unsubscribe()}},m.M=yt,m.N=function(){var a=new ce(16);return ce!=Float32Array&&(a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[11]=0,a[12]=0,a[13]=0,a[14]=0),a[0]=1,a[5]=1,a[10]=1,a[15]=1,a},m.O=function(a,t,s){var A,p,v,_,B,F,U,Q,K,X,J,se,le=s[0],ue=s[1],Be=s[2];return t===a?(a[12]=t[0]*le+t[4]*ue+t[8]*Be+t[12],a[13]=t[1]*le+t[5]*ue+t[9]*Be+t[13],a[14]=t[2]*le+t[6]*ue+t[10]*Be+t[14],a[15]=t[3]*le+t[7]*ue+t[11]*Be+t[15]):(p=t[1],v=t[2],_=t[3],B=t[4],F=t[5],U=t[6],Q=t[7],K=t[8],X=t[9],J=t[10],se=t[11],a[0]=A=t[0],a[1]=p,a[2]=v,a[3]=_,a[4]=B,a[5]=F,a[6]=U,a[7]=Q,a[8]=K,a[9]=X,a[10]=J,a[11]=se,a[12]=A*le+B*ue+K*Be+t[12],a[13]=p*le+F*ue+X*Be+t[13],a[14]=v*le+U*ue+J*Be+t[14],a[15]=_*le+Q*ue+se*Be+t[15]),a},m.P=x,m.Q=function(a,t,s){var A=s[0],p=s[1],v=s[2];return a[0]=t[0]*A,a[1]=t[1]*A,a[2]=t[2]*A,a[3]=t[3]*A,a[4]=t[4]*p,a[5]=t[5]*p,a[6]=t[6]*p,a[7]=t[7]*p,a[8]=t[8]*v,a[9]=t[9]*v,a[10]=t[10]*v,a[11]=t[11]*v,a[12]=t[12],a[13]=t[13],a[14]=t[14],a[15]=t[15],a},m.R=Jo,m.S=function(a,t,s){var A=t[0],p=t[1],v=t[2],_=t[3],B=t[4],F=t[5],U=t[6],Q=t[7],K=t[8],X=t[9],J=t[10],se=t[11],le=t[12],ue=t[13],Be=t[14],tt=t[15],Ee=s[0],Le=s[1],st=s[2],ut=s[3];return a[0]=Ee*A+Le*B+st*K+ut*le,a[1]=Ee*p+Le*F+st*X+ut*ue,a[2]=Ee*v+Le*U+st*J+ut*Be,a[3]=Ee*_+Le*Q+st*se+ut*tt,a[4]=(Ee=s[4])*A+(Le=s[5])*B+(st=s[6])*K+(ut=s[7])*le,a[5]=Ee*p+Le*F+st*X+ut*ue,a[6]=Ee*v+Le*U+st*J+ut*Be,a[7]=Ee*_+Le*Q+st*se+ut*tt,a[8]=(Ee=s[8])*A+(Le=s[9])*B+(st=s[10])*K+(ut=s[11])*le,a[9]=Ee*p+Le*F+st*X+ut*ue,a[10]=Ee*v+Le*U+st*J+ut*Be,a[11]=Ee*_+Le*Q+st*se+ut*tt,a[12]=(Ee=s[12])*A+(Le=s[13])*B+(st=s[14])*K+(ut=s[15])*le,a[13]=Ee*p+Le*F+st*X+ut*ue,a[14]=Ee*v+Le*U+st*J+ut*Be,a[15]=Ee*_+Le*Q+st*se+ut*tt,a},m.T=$A,m.U=function(a,t){const s={};for(let A=0;A<t.length;A++){const p=t[A];p in a&&(s[p]=a[p])}return s},m.V=Yh,m.W=rt,m.X=vx,m.Y=yx,m.Z=qe,m._=o,m.a=ye,m.a$=xx,m.a0=Z,m.a1=Wr,m.a2=_A,m.a3=wx,m.a4=Cg,m.a5=je,m.a6=function(a,t,s){if(!a)return t||{};if(!t)return a||{};const A=Cx(a),p=Cx(t);(function(_,B){B.removeAll&&(_.add.clear(),_.update.clear(),_.remove.clear(),B.remove.clear());for(const F of B.remove)_.add.delete(F),_.update.delete(F);for(const[F,U]of B.update){const Q=_.update.get(F);Q&&(B.update.set(F,z4(Q,U)),_.update.delete(F))}})(A,p);const v={};if((A.removeAll||p.removeAll)&&(v.removeAll=!0),v.remove=new Set([...A.remove,...p.remove]),v.add=new Map([...A.add,...p.add]),v.update=new Map([...A.update,...p.update]),v.remove.size&&v.add.size)for(const _ of v.add.keys())v.remove.delete(_);return(function(_){const B={};return _.removeAll&&(B.removeAll=_.removeAll),_.remove&&(B.remove=Array.from(_.remove)),_.add&&(B.add=Array.from(_.add.values())),_.update&&(B.update=Array.from(_.update.values())),B})(v)},m.a7=function(a,t){if(a==null||a.type==null)return!0;if(a.type==="Feature")return Xp(a,t)!=null;if(a.type==="FeatureCollection"){const s=new Set;for(const A of a.features){const p=Xp(A,t);if(p==null||s.has(p))return!1;s.add(p)}return!0}return!1},m.a8=function(a,t){const s=new Map;if(!(a==null||a.type==null))if(a.type==="Feature")s.set(Xp(a,t),a);else for(const A of a.features)s.set(Xp(A,t),A);return s},m.a9=function(a,t,s){var A,p;if(t.removeAll)a.clear();else if(t.remove)for(const v of t.remove)a.delete(v);if(t.add)for(const v of t.add){const _=Xp(v,s);_!=null&&a.set(_,v)}if(t.update)for(const v of t.update){let _=a.get(v.id);if(!_)continue;const B=!!v.newGeometry,F=v.removeAllProperties||((A=v.removeProperties)===null||A===void 0?void 0:A.length)>0||((p=v.addOrUpdateProperties)===null||p===void 0?void 0:p.length)>0;if((B||F)&&(_=Object.assign({},_),a.set(v.id,_),B&&(_.geometry=v.newGeometry),F)){if(_.properties=v.removeAllProperties?{}:Object.assign({},_.properties||{}),v.removeProperties)for(const U of v.removeProperties)delete _.properties[U];if(v.addOrUpdateProperties)for(const{key:U,value:Q}of v.addOrUpdateProperties)_.properties[U]=Q}}},m.aB=function(a,{uSize:t,uSizeT:s},{lowerSize:A,upperSize:p}){return a.kind==="source"?A/Za:a.kind==="composite"?br.number(A/Za,p/Za,s):t},m.aC=function(a,t){var s=t[0],A=t[1],p=t[2],v=t[3],_=t[4],B=t[5],F=t[6],U=t[7],Q=t[8],K=t[9],X=t[10],J=t[11],se=t[12],le=t[13],ue=t[14],Be=t[15],tt=s*B-A*_,Ee=s*F-p*_,Le=s*U-v*_,st=A*F-p*B,ut=A*U-v*B,Mt=p*U-v*F,Xt=Q*le-K*se,Vt=Q*ue-X*se,ir=Q*Be-J*se,_r=K*ue-X*le,or=K*Be-J*le,qt=X*Be-J*ue,Ot=tt*qt-Ee*or+Le*_r+st*ir-ut*Vt+Mt*Xt;return Ot?(a[0]=(B*qt-F*or+U*_r)*(Ot=1/Ot),a[1]=(p*or-A*qt-v*_r)*Ot,a[2]=(le*Mt-ue*ut+Be*st)*Ot,a[3]=(X*ut-K*Mt-J*st)*Ot,a[4]=(F*ir-_*qt-U*Vt)*Ot,a[5]=(s*qt-p*ir+v*Vt)*Ot,a[6]=(ue*Le-se*Mt-Be*Ee)*Ot,a[7]=(Q*Mt-X*Le+J*Ee)*Ot,a[8]=(_*or-B*ir+U*Xt)*Ot,a[9]=(A*ir-s*or-v*Xt)*Ot,a[10]=(se*ut-le*Le+Be*tt)*Ot,a[11]=(K*Le-Q*ut-J*tt)*Ot,a[12]=(B*Vt-_*_r-F*Xt)*Ot,a[13]=(s*_r-A*Vt+p*Xt)*Ot,a[14]=(le*Ee-se*st-ue*tt)*Ot,a[15]=(Q*st-K*Ee+X*tt)*Ot,a):null},m.aD=Je,m.aE=function(a){var t=a[0],s=a[1];return Math.sqrt(t*t+s*s)},m.aF=function(a){return a[0]=0,a[1]=0,a},m.aG=function(a,t,s){return a[0]=t[0]*s,a[1]=t[1]*s,a},m.aH=lv,m.aI=Fe,m.aJ=function(a,t,s,A){const p=t.y-a.y,v=t.x-a.x,_=A.y-s.y,B=A.x-s.x,F=_*v-B*p;if(F===0)return null;const U=(B*(a.y-s.y)-_*(a.x-s.x))/F;return new x(a.x+U*v,a.y+U*p)},m.aK=ob,m.aL=hh,m.aM=function(a){let t=1/0,s=1/0,A=-1/0,p=-1/0;for(const v of a)t=Math.min(t,v.x),s=Math.min(s,v.y),A=Math.max(A,v.x),p=Math.max(p,v.y);return[t,s,A,p]},m.aN=Hs,m.aO=xt,m.aP=function(a,t,s,A,p=!1){if(!s[0]&&!s[1])return[0,0];const v=p?A==="map"?-a.bearingInRadians:0:A==="viewport"?a.bearingInRadians:0;if(v){const _=Math.sin(v),B=Math.cos(v);s=[s[0]*B-s[1]*_,s[0]*_+s[1]*B]}return[p?s[0]:xt(t,s[0],a.zoom),p?s[1]:xt(t,s[1],a.zoom)]},m.aR=av,m.aS=Pv,m.aT=Nt,m.aU=Lv,m.aV=Vn,m.aW=_h,m.aX=ee,m.aY=nr,m.aZ=Dt,m.a_=hn,m.aa=em,m.ab=Zp,m.ac=Vd,m.ad=25,m.ae=dv,m.af=a=>{const t=window.document.createElement("video");return t.muted=!0,new Promise((s=>{t.onloadstart=()=>{s(t)};for(const A of a){const p=window.document.createElement("source");Ft(A)||(t.crossOrigin="Anonymous"),p.src=A,t.appendChild(p)}}))},m.ag=Yt,m.ah=function(){return St++},m.ai=r,m.aj=If,m.ak=dc,m.al=qA,m.am=Sx,m.an=function(a){const t={};if(a.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,((s,A,p,v)=>{const _=p||v;return t[A]=!_||_.toLowerCase(),""})),t["max-age"]){const s=parseInt(t["max-age"],10);isNaN(s)?delete t["max-age"]:t["max-age"]=s}return t},m.ao=lt,m.ap=85.051129,m.aq=On,m.ar=function(a){return Math.pow(2,a)},m.as=Ie,m.at=_x,m.au=function(a){return Math.log(a)/Math.LN2},m.av=function(a){var t=a[0],s=a[1];return t*t+s*s},m.aw=function(a){if(!a.length)return new Set;const t=Math.max(...a.map((F=>F.canonical.z)));let s=1/0,A=-1/0,p=1/0,v=-1/0;const _=[];for(const F of a){const{x:U,y:Q,z:K}=F.canonical,X=Math.pow(2,t-K),J=U*X,se=Q*X;_.push({id:F,x:J,y:se}),J<s&&(s=J),J>A&&(A=J),se<p&&(p=se),se>v&&(v=se)}const B=new Set;for(const F of _)F.x!==s&&F.x!==A&&F.y!==p&&F.y!==v||B.add(F.id);return B},m.ax=function(a,t){const s=Math.abs(2*a.wrap)-+(a.wrap<0),A=Math.abs(2*t.wrap)-+(t.wrap<0);return a.overscaledZ-t.overscaledZ||A-s||t.canonical.y-a.canonical.y||t.canonical.x-a.canonical.x},m.ay=class{constructor(a,t){this.max=a,this.onRemove=t,this.reset()}reset(){for(const a in this.data)for(const t of this.data[a])t.timeout&&clearTimeout(t.timeout),this.onRemove(t.value);return this.data={},this.order=[],this}add(a,t,s){const A=a.wrapped().key;this.data[A]===void 0&&(this.data[A]=[]);const p={value:t,timeout:void 0};if(s!==void 0&&(p.timeout=setTimeout((()=>{this.remove(a,p)}),s)),this.data[A].push(p),this.order.push(A),this.order.length>this.max){const v=this._getAndRemoveByKey(this.order[0]);v&&this.onRemove(v)}return this}has(a){return a.wrapped().key in this.data}getAndRemove(a){return this.has(a)?this._getAndRemoveByKey(a.wrapped().key):null}_getAndRemoveByKey(a){const t=this.data[a].shift();return t.timeout&&clearTimeout(t.timeout),this.data[a].length===0&&delete this.data[a],this.order.splice(this.order.indexOf(a),1),t.value}getByKey(a){const t=this.data[a];return t?t[0].value:null}get(a){return this.has(a)?this.data[a.wrapped().key][0].value:null}remove(a,t){if(!this.has(a))return this;const s=a.wrapped().key,A=t===void 0?0:this.data[s].indexOf(t),p=this.data[s][A];return this.data[s].splice(A,1),p.timeout&&clearTimeout(p.timeout),this.data[s].length===0&&delete this.data[s],this.onRemove(p.value),this.order.splice(this.order.indexOf(s),1),this}setMaxSize(a){for(this.max=a;this.order.length>this.max;){const t=this._getAndRemoveByKey(this.order[0]);t&&this.onRemove(t)}return this}filter(a){const t=[];for(const s in this.data)for(const A of this.data[s])a(A.value)||t.push(A);for(const s of t)this.remove(s.value.tileID,s)}},m.az=function(a,t){let s=0,A=0;if(a.kind==="constant")A=a.layoutSize;else if(a.kind!=="source"){const{interpolationType:p,minZoom:v,maxZoom:_}=a,B=p?lt(Gt.interpolationFactor(p,t,v,_),0,1):0;a.kind==="camera"?A=br.number(a.minSize,a.maxSize,B):s=B}return{uSizeT:s,uSize:A}},m.b=$r,m.b$=class extends yo{constructor(a,t){super(a,t),this.current=0}set(a){this.current!==a&&(this.current=a,this.gl.uniform1i(this.location,a))}},m.b0=nt,m.b1=xe,m.b2=function(a){var t=new ce(3);return t[0]=a[0],t[1]=a[1],t[2]=a[2],t},m.b3=function(a,t,s){return a[0]=t[0]-s[0],a[1]=t[1]-s[1],a[2]=t[2]-s[2],a},m.b4=function(a,t){var s=t[0],A=t[1],p=t[2],v=s*s+A*A+p*p;return v>0&&(v=1/Math.sqrt(v)),a[0]=t[0]*v,a[1]=t[1]*v,a[2]=t[2]*v,a},m.b5=pe,m.b6=function(a,t){return a[0]*t[0]+a[1]*t[1]+a[2]*t[2]},m.b7=function(a,t,s){return a[0]=t[0]*s[0],a[1]=t[1]*s[1],a[2]=t[2]*s[2],a[3]=t[3]*s[3],a},m.b8=Me,m.b9=function(a,t,s){const A=t[0]*s[0]+t[1]*s[1]+t[2]*s[2];return A===0?null:(-(a[0]*s[0]+a[1]*s[1]+a[2]*s[2])-s[3])/A},m.bA=function(){return new Float64Array(3)},m.bB=function(a,t,s,A){return a[0]=t[0]+s[0]*A,a[1]=t[1]+s[1]*A,a[2]=t[2]+s[2]*A,a},m.bC=ht,m.bD=function(a,t,s){var A=s[0],p=s[1],v=s[2],_=s[3],B=t[0],F=t[1],U=t[2],Q=p*U-v*F,K=v*B-A*U,X=A*F-p*B;return a[0]=B+_*(Q+=Q)+p*(X+=X)-v*(K+=K),a[1]=F+_*K+v*Q-A*X,a[2]=U+_*X+A*K-p*Q,a},m.bE=function(a,t,s){const A=(function(F){var U=F[3],Q=F[4],K=F[5],X=F[6],J=F[7],se=F[8];return F[0]*(se*Q-K*J)+F[1]*(-se*U+K*X)+F[2]*(J*U-Q*X)})([a[0],a[1],a[2],t[0],t[1],t[2],s[0],s[1],s[2]]);if(A===0)return null;const p=pe([],[t[0],t[1],t[2]],[s[0],s[1],s[2]]),v=pe([],[s[0],s[1],s[2]],[a[0],a[1],a[2]]),_=pe([],[a[0],a[1],a[2]],[t[0],t[1],t[2]]),B=nt([],p,-a[3]);return xe(B,B,nt([],v,-t[3])),xe(B,B,nt([],_,-s[3])),nt(B,B,1/A),B},m.bF=hv,m.bG=function(){return new Float64Array(4)},m.bH=function(a,t,s,A){var p=[],v=[];return p[0]=t[0]-s[0],p[1]=t[1]-s[1],p[2]=t[2]-s[2],v[0]=p[0]*Math.cos(A)-p[1]*Math.sin(A),v[1]=p[0]*Math.sin(A)+p[1]*Math.cos(A),v[2]=p[2],a[0]=v[0]+s[0],a[1]=v[1]+s[1],a[2]=v[2]+s[2],a},m.bI=function(a,t,s,A){var p=[],v=[];return p[0]=t[0]-s[0],p[1]=t[1]-s[1],p[2]=t[2]-s[2],v[0]=p[0],v[1]=p[1]*Math.cos(A)-p[2]*Math.sin(A),v[2]=p[1]*Math.sin(A)+p[2]*Math.cos(A),a[0]=v[0]+s[0],a[1]=v[1]+s[1],a[2]=v[2]+s[2],a},m.bJ=function(a,t,s,A){var p=[],v=[];return p[0]=t[0]-s[0],p[1]=t[1]-s[1],p[2]=t[2]-s[2],v[0]=p[2]*Math.sin(A)+p[0]*Math.cos(A),v[1]=p[1],v[2]=p[2]*Math.cos(A)-p[0]*Math.sin(A),a[0]=v[0]+s[0],a[1]=v[1]+s[1],a[2]=v[2]+s[2],a},m.bK=function(a,t,s){var A=Math.sin(s),p=Math.cos(s),v=t[0],_=t[1],B=t[2],F=t[3],U=t[8],Q=t[9],K=t[10],X=t[11];return t!==a&&(a[4]=t[4],a[5]=t[5],a[6]=t[6],a[7]=t[7],a[12]=t[12],a[13]=t[13],a[14]=t[14],a[15]=t[15]),a[0]=v*p-U*A,a[1]=_*p-Q*A,a[2]=B*p-K*A,a[3]=F*p-X*A,a[8]=v*A+U*p,a[9]=_*A+Q*p,a[10]=B*A+K*p,a[11]=F*A+X*p,a},m.bL=function(a,t){const s=Re(a,360),A=Re(t,360),p=A-s,v=A>s?p-360:p+360;return Math.abs(p)<Math.abs(v)?p:v},m.bM=function(a){return a[0]=0,a[1]=0,a[2]=0,a},m.bN=function(a,t,s,A){const p=Math.sqrt(a*a+t*t),v=Math.sqrt(s*s+A*A);a/=p,t/=p,s/=v,A/=v;const _=Math.acos(a*s+t*A);return-t*s+a*A>0?_:-_},m.bO=function(a,t){const s=Re(a,2*Math.PI),A=Re(t,2*Math.PI);return Math.min(Math.abs(s-A),Math.abs(s-A+2*Math.PI),Math.abs(s-A-2*Math.PI))},m.bP=function(){const a={},t=mt.$version;for(const s in mt.$root){const A=mt.$root[s];if(A.required){let p=null;p=s==="version"?t:A.type==="array"?[]:{},p!=null&&(a[s]=p)}}return a},m.bQ=bt,m.bR=Ut,m.bS=function a(t,s){if(Array.isArray(t)){if(!Array.isArray(s)||t.length!==s.length)return!1;for(let A=0;A<t.length;A++)if(!a(t[A],s[A]))return!1;return!0}if(typeof t=="object"&&t!==null&&s!==null){if(typeof s!="object"||Object.keys(t).length!==Object.keys(s).length)return!1;for(const A in t)if(!a(t[A],s[A]))return!1;return!0}return t===s},m.bT=function(a){a=a.slice();const t=Object.create(null);for(let s=0;s<a.length;s++)t[a[s].id]=a[s];for(let s=0;s<a.length;s++)"ref"in a[s]&&(a[s]=Nr(a[s],t[a[s].ref]));return a},m.bU=function(a,t){if(a.type==="custom")return new N4(a,t);switch(a.type){case"background":return new R4(a,t);case"circle":return new $a(a,t);case"color-relief":return new vA(a,t);case"fill":return new zp(a,t);case"fill-extrusion":return new no(a,t);case"heatmap":return new Ag(a,t);case"hillshade":return new kp(a,t);case"line":return new Vp(a,t);case"raster":return new Ys(a,t);case"symbol":return new Bg(a,t)}},m.bV=a=>a.type==="raster",m.bW=ar,m.bX=function(a,t){if(!a)return[{command:"setStyle",args:[t]}];let s=[];try{if(!mr(a.version,t.version))return[{command:"setStyle",args:[t]}];mr(a.center,t.center)||s.push({command:"setCenter",args:[t.center]}),mr(a.state,t.state)||s.push({command:"setGlobalState",args:[t.state]}),mr(a.centerAltitude,t.centerAltitude)||s.push({command:"setCenterAltitude",args:[t.centerAltitude]}),mr(a.zoom,t.zoom)||s.push({command:"setZoom",args:[t.zoom]}),mr(a.bearing,t.bearing)||s.push({command:"setBearing",args:[t.bearing]}),mr(a.pitch,t.pitch)||s.push({command:"setPitch",args:[t.pitch]}),mr(a.roll,t.roll)||s.push({command:"setRoll",args:[t.roll]}),mr(a.sprite,t.sprite)||s.push({command:"setSprite",args:[t.sprite]}),mr(a.glyphs,t.glyphs)||s.push({command:"setGlyphs",args:[t.glyphs]}),mr(a.transition,t.transition)||s.push({command:"setTransition",args:[t.transition]}),mr(a.light,t.light)||s.push({command:"setLight",args:[t.light]}),mr(a.terrain,t.terrain)||s.push({command:"setTerrain",args:[t.terrain]}),mr(a.sky,t.sky)||s.push({command:"setSky",args:[t.sky]}),mr(a.projection,t.projection)||s.push({command:"setProjection",args:[t.projection]});const A={},p=[];(function(_,B,F,U){let Q;for(Q in B=B||{},_=_||{})Object.prototype.hasOwnProperty.call(_,Q)&&(Object.prototype.hasOwnProperty.call(B,Q)||wr(Q,F,U));for(Q in B)Object.prototype.hasOwnProperty.call(B,Q)&&(Object.prototype.hasOwnProperty.call(_,Q)?mr(_[Q],B[Q])||(_[Q].type==="geojson"&&B[Q].type==="geojson"&&Bn(_,B,Q)?Kr(F,{command:"setGeoJSONSourceData",args:[Q,B[Q].data]}):Tn(Q,B,F,U)):Dn(Q,B,F))})(a.sources,t.sources,p,A);const v=[];a.layers&&a.layers.forEach((_=>{"source"in _&&A[_.source]?s.push({command:"removeLayer",args:[_.id]}):v.push(_)})),s=s.concat(p),(function(_,B,F){B=B||[];const U=(_=_||[]).map(Di),Q=B.map(Di),K=_.reduce(ai,{}),X=B.reduce(ai,{}),J=U.slice(),se=Object.create(null);let le,ue,Be,tt,Ee;for(let Le=0,st=0;Le<U.length;Le++)le=U[Le],Object.prototype.hasOwnProperty.call(X,le)?st++:(Kr(F,{command:"removeLayer",args:[le]}),J.splice(J.indexOf(le,st),1));for(let Le=0,st=0;Le<Q.length;Le++)le=Q[Q.length-1-Le],J[J.length-1-Le]!==le&&(Object.prototype.hasOwnProperty.call(K,le)?(Kr(F,{command:"removeLayer",args:[le]}),J.splice(J.lastIndexOf(le,J.length-st),1)):st++,tt=J[J.length-Le],Kr(F,{command:"addLayer",args:[X[le],tt]}),J.splice(J.length-Le,0,le),se[le]=!0);for(let Le=0;Le<Q.length;Le++)if(le=Q[Le],ue=K[le],Be=X[le],!se[le]&&!mr(ue,Be))if(mr(ue.source,Be.source)&&mr(ue["source-layer"],Be["source-layer"])&&mr(ue.type,Be.type)){for(Ee in xn(ue.layout,Be.layout,F,le,null,"setLayoutProperty"),xn(ue.paint,Be.paint,F,le,null,"setPaintProperty"),mr(ue.filter,Be.filter)||Kr(F,{command:"setFilter",args:[le,Be.filter]}),mr(ue.minzoom,Be.minzoom)&&mr(ue.maxzoom,Be.maxzoom)||Kr(F,{command:"setLayerZoomRange",args:[le,Be.minzoom,Be.maxzoom]}),ue)Object.prototype.hasOwnProperty.call(ue,Ee)&&Ee!=="layout"&&Ee!=="paint"&&Ee!=="filter"&&Ee!=="metadata"&&Ee!=="minzoom"&&Ee!=="maxzoom"&&(Ee.indexOf("paint.")===0?xn(ue[Ee],Be[Ee],F,le,Ee.slice(6),"setPaintProperty"):mr(ue[Ee],Be[Ee])||Kr(F,{command:"setLayerProperty",args:[le,Ee,Be[Ee]]}));for(Ee in Be)Object.prototype.hasOwnProperty.call(Be,Ee)&&!Object.prototype.hasOwnProperty.call(ue,Ee)&&Ee!=="layout"&&Ee!=="paint"&&Ee!=="filter"&&Ee!=="metadata"&&Ee!=="minzoom"&&Ee!=="maxzoom"&&(Ee.indexOf("paint.")===0?xn(ue[Ee],Be[Ee],F,le,Ee.slice(6),"setPaintProperty"):mr(ue[Ee],Be[Ee])||Kr(F,{command:"setLayerProperty",args:[le,Ee,Be[Ee]]}))}else Kr(F,{command:"removeLayer",args:[le]}),tt=J[J.lastIndexOf(le)+1],Kr(F,{command:"addLayer",args:[Be,tt]})})(v,t.layers,s)}catch(A){console.warn("Unable to compute style diff:",A),s=[{command:"setStyle",args:[t]}]}return s},m.bY=function(a){const t=[],s=a.id;return s===void 0&&t.push({message:`layers.${s}: missing required property "id"`}),a.render===void 0&&t.push({message:`layers.${s}: missing required method "render"`}),a.renderingMode&&a.renderingMode!=="2d"&&a.renderingMode!=="3d"&&t.push({message:`layers.${s}: property "renderingMode" must be either "2d" or "3d"`}),t},m.bZ=Lt,m.b_=Wt,m.ba=Ue,m.bb=function(a,t,s){return a[0]=t[0]*s,a[1]=t[1]*s,a[2]=t[2]*s,a[3]=t[3]*s,a},m.bc=function(a,t){return a[0]*t[0]+a[1]*t[1]+a[2]*t[2]+a[3]},m.bd=Bx,m.be=Tf,m.bf=function(a,t,s,A,p){var v=1/Math.tan(t/2);if(a[0]=v/s,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=v,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[11]=-1,a[12]=0,a[13]=0,a[15]=0,p!=null&&p!==1/0){var _=1/(A-p);a[10]=(p+A)*_,a[14]=2*p*A*_}else a[10]=-1,a[14]=-2*A;return a},m.bg=function(a){var t=new ce(16);return t[0]=a[0],t[1]=a[1],t[2]=a[2],t[3]=a[3],t[4]=a[4],t[5]=a[5],t[6]=a[6],t[7]=a[7],t[8]=a[8],t[9]=a[9],t[10]=a[10],t[11]=a[11],t[12]=a[12],t[13]=a[13],t[14]=a[14],t[15]=a[15],t},m.bh=function(a,t,s){var A=Math.sin(s),p=Math.cos(s),v=t[0],_=t[1],B=t[2],F=t[3],U=t[4],Q=t[5],K=t[6],X=t[7];return t!==a&&(a[8]=t[8],a[9]=t[9],a[10]=t[10],a[11]=t[11],a[12]=t[12],a[13]=t[13],a[14]=t[14],a[15]=t[15]),a[0]=v*p+U*A,a[1]=_*p+Q*A,a[2]=B*p+K*A,a[3]=F*p+X*A,a[4]=U*p-v*A,a[5]=Q*p-_*A,a[6]=K*p-B*A,a[7]=X*p-F*A,a},m.bi=function(a,t,s){var A=Math.sin(s),p=Math.cos(s),v=t[4],_=t[5],B=t[6],F=t[7],U=t[8],Q=t[9],K=t[10],X=t[11];return t!==a&&(a[0]=t[0],a[1]=t[1],a[2]=t[2],a[3]=t[3],a[12]=t[12],a[13]=t[13],a[14]=t[14],a[15]=t[15]),a[4]=v*p+U*A,a[5]=_*p+Q*A,a[6]=B*p+K*A,a[7]=F*p+X*A,a[8]=U*p-v*A,a[9]=Q*p-_*A,a[10]=K*p-B*A,a[11]=X*p-F*A,a},m.bj=function(){const a=new Float32Array(16);return Ie(a),a},m.bk=function(){const a=new Float64Array(16);return Ie(a),a},m.bl=function(){return new Float64Array(16)},m.bm=function(a,t,s){const A=new Float64Array(4);return ht(A,a,t-90,s),A},m.bn=function(a,t,s,A){var p,v,_,B,F,U=t[0],Q=t[1],K=t[2],X=t[3],J=s[0],se=s[1],le=s[2],ue=s[3];return(v=U*J+Q*se+K*le+X*ue)<0&&(v=-v,J=-J,se=-se,le=-le,ue=-ue),1-v>ie?(p=Math.acos(v),_=Math.sin(p),B=Math.sin((1-A)*p)/_,F=Math.sin(A*p)/_):(B=1-A,F=A),a[0]=B*U+F*J,a[1]=B*Q+F*se,a[2]=B*K+F*le,a[3]=B*X+F*ue,a},m.bo=function(a){const t=new Float64Array(9);(function(v,_){var B=_[0],F=_[1],U=_[2],Q=_[3],K=B+B,X=F+F,J=U+U,se=B*K,le=F*K,ue=F*X,Be=U*K,tt=U*X,Ee=U*J,Le=Q*K,st=Q*X,ut=Q*J;v[0]=1-ue-Ee,v[3]=le-ut,v[6]=Be+st,v[1]=le+ut,v[4]=1-se-Ee,v[7]=tt-Le,v[2]=Be-st,v[5]=tt+Le,v[8]=1-se-ue})(t,a);const s=hn(-Math.asin(lt(t[2],-1,1)));let A,p;return Math.hypot(t[5],t[8])<.001?(A=0,p=-hn(Math.atan2(t[3],t[4]))):(A=hn(t[5]===0&&t[8]===0?0:Math.atan2(t[5],t[8])),p=hn(t[1]===0&&t[0]===0?0:Math.atan2(t[1],t[0]))),{roll:A,pitch:s+90,bearing:p}},m.bp=function(a,t){return a.roll==t.roll&&a.pitch==t.pitch&&a.bearing==t.bearing},m.bq=an,m.br=fc,m.bs=yc,m.bt=Gu,m.bu=gc,m.bv=oe,m.bw=Se,m.bx=ws,m.by=function(a,t,s,A,p){return oe(A,p,lt((a-t)/(s-t),0,1))},m.bz=Re,m.c=We,m.c$=class{constructor(a){this._marks={start:[a.url,"start"].join("#"),end:[a.url,"end"].join("#"),measure:a.url.toString()},performance.mark(this._marks.start)}finish(){performance.mark(this._marks.end);let a=performance.getEntriesByName(this._marks.measure);return a.length===0&&(performance.measure(this._marks.measure,this._marks.start,this._marks.end),a=performance.getEntriesByName(this._marks.measure),performance.clearMarks(this._marks.start),performance.clearMarks(this._marks.end),performance.clearMeasures(this._marks.measure)),a}},m.c0=GA,m.c1=class extends yo{constructor(a,t){super(a,t),this.current=zu}set(a){if(a[12]!==this.current[12]||a[0]!==this.current[0])return this.current=a,void this.gl.uniformMatrix4fv(this.location,!1,a);for(let t=1;t<16;t++)if(a[t]!==this.current[t]){this.current=a,this.gl.uniformMatrix4fv(this.location,!1,a);break}}},m.c2=mA,m.c3=class extends yo{constructor(a,t){super(a,t),this.current=[0,0,0]}set(a){a[0]===this.current[0]&&a[1]===this.current[1]&&a[2]===this.current[2]||(this.current=a,this.gl.uniform3f(this.location,a[0],a[1],a[2]))}},m.c4=class extends yo{constructor(a,t){super(a,t),this.current=[0,0]}set(a){a[0]===this.current[0]&&a[1]===this.current[1]||(this.current=a,this.gl.uniform2f(this.location,a[0],a[1]))}},m.c5=he,m.c6=function(a,t){var s=Math.sin(t),A=Math.cos(t);return a[0]=A,a[1]=s,a[2]=0,a[3]=-s,a[4]=A,a[5]=0,a[6]=0,a[7]=0,a[8]=1,a},m.c7=function(a,t,s){var A=t[0],p=t[1],v=t[2];return a[0]=A*s[0]+p*s[3]+v*s[6],a[1]=A*s[1]+p*s[4]+v*s[7],a[2]=A*s[2]+p*s[5]+v*s[8],a},m.c8=function(a,t,s,A,p,v,_){var B=1/(t-s),F=1/(A-p),U=1/(v-_);return a[0]=-2*B,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=-2*F,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=2*U,a[11]=0,a[12]=(t+s)*B,a[13]=(p+A)*F,a[14]=(_+v)*U,a[15]=1,a},m.c9=class extends yo{constructor(a,t){super(a,t),this.current=new Array}set(a){if(a!=this.current){this.current=a;const t=new Float32Array(4*a.length);for(let s=0;s<a.length;s++)t[4*s]=a[s].r,t[4*s+1]=a[s].g,t[4*s+2]=a[s].b,t[4*s+3]=a[s].a;this.gl.uniform4fv(this.location,t)}}},m.cA=function(a,t){return de[t]&&(a instanceof MouseEvent||a instanceof WheelEvent)},m.cB=function(a,t){return ft[t]&&"touches"in a},m.cC=function(a){return ft[a]||de[a]},m.cD=function(a,t,s){var A=t[0],p=t[1];return a[0]=s[0]*A+s[4]*p+s[12],a[1]=s[1]*A+s[5]*p+s[13],a},m.cE=function(a,t){const{x:s,y:A}=Zp.fromLngLat(t);return!(a<0||a>25||A<0||A>=1||s<0||s>=1)},m.cF=function(a,t){return a[0]=t[0],a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=t[1],a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=t[2],a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,a},m.cG=class extends Io{},m.cH=BT,m.cJ=at,m.cK=function(a,t){We.REGISTERED_PROTOCOLS[a]=t},m.cL=function(a){delete We.REGISTERED_PROTOCOLS[a]},m.cM=function(a,t){const s={};for(let p=0;p<a.length;p++){const v=t&&t[a[p].id]||po(a[p]);t&&(t[a[p].id]=v);let _=s[v];_||(_=s[v]=[]),_.push(a[p])}const A=[];for(const p in s)A.push(s[p]);return A},m.cN=$e,m.cO=Ex,m.cP=ib,m.cQ=en,m.cR=function(a){a.bucket.createArrays(),a.bucket.tilePixelRatio=je/(512*a.bucket.overscaling),a.bucket.compareText={},a.bucket.iconsNeedLinear=!1;const t=a.bucket.layers[0],s=t.layout,A=t._unevaluatedLayout._values,p={layoutIconSize:A["icon-size"].possiblyEvaluate(new Mr(a.bucket.zoom+1),a.canonical),layoutTextSize:A["text-size"].possiblyEvaluate(new Mr(a.bucket.zoom+1),a.canonical),textMaxSize:A["text-size"].possiblyEvaluate(new Mr(18))};if(a.bucket.textSizeData.kind==="composite"){const{minZoom:U,maxZoom:Q}=a.bucket.textSizeData;p.compositeTextSizes=[A["text-size"].possiblyEvaluate(new Mr(U),a.canonical),A["text-size"].possiblyEvaluate(new Mr(Q),a.canonical)]}if(a.bucket.iconSizeData.kind==="composite"){const{minZoom:U,maxZoom:Q}=a.bucket.iconSizeData;p.compositeIconSizes=[A["icon-size"].possiblyEvaluate(new Mr(U),a.canonical),A["icon-size"].possiblyEvaluate(new Mr(Q),a.canonical)]}const v=s.get("text-line-height")*Hs,_=s.get("text-rotation-alignment")!=="viewport"&&s.get("symbol-placement")!=="point",B=s.get("text-keep-upright"),F=s.get("text-size");for(const U of a.bucket.features){const Q=s.get("text-font").evaluate(U,{},a.canonical).join(","),K=F.evaluate(U,{},a.canonical),X=p.layoutTextSize.evaluate(U,{},a.canonical),J=p.layoutIconSize.evaluate(U,{},a.canonical),se={horizontal:{},vertical:void 0},le=U.text;let ue,Be=[0,0];if(le){const Le=le.toString(),st=s.get("text-letter-spacing").evaluate(U,{},a.canonical)*Hs,ut=sn(Le)?st:0,Mt=s.get("text-anchor").evaluate(U,{},a.canonical),Xt=gb(t,U,a.canonical);if(!Xt){const or=s.get("text-radial-offset").evaluate(U,{},a.canonical);Be=or?mb(Mt,[or*Hs,Tv]):s.get("text-offset").evaluate(U,{},a.canonical).map((qt=>qt*Hs))}let Vt=_?"center":s.get("text-justify").evaluate(U,{},a.canonical);const ir=s.get("symbol-placement")==="point"?s.get("text-max-width").evaluate(U,{},a.canonical)*Hs:1/0,_r=()=>{a.bucket.allowVerticalPlacement&&er(Le)&&(se.vertical=Ps(le,a.glyphMap,a.glyphPositions,a.imagePositions,Q,ir,v,Mt,"left",ut,Be,m.aA.vertical,!0,X,K))};if(!_&&Xt){const or=new Set;if(Vt==="auto")for(let Ot=0;Ot<Xt.values.length;Ot+=2)or.add(Pv(Xt.values[Ot]));else or.add(Vt);let qt=!1;for(const Ot of or)if(!se.horizontal[Ot])if(qt)se.horizontal[Ot]=se.horizontal[0];else{const Lr=Ps(le,a.glyphMap,a.glyphPositions,a.imagePositions,Q,ir,v,"center",Ot,ut,Be,m.aA.horizontal,!1,X,K);Lr&&(se.horizontal[Ot]=Lr,qt=Lr.positionedLines.length===1)}_r()}else{Vt==="auto"&&(Vt=Pv(Mt));const or=Ps(le,a.glyphMap,a.glyphPositions,a.imagePositions,Q,ir,v,Mt,Vt,ut,Be,m.aA.horizontal,!1,X,K);or&&(se.horizontal[Vt]=or),_r(),er(Le)&&_&&B&&(se.vertical=Ps(le,a.glyphMap,a.glyphPositions,a.imagePositions,Q,ir,v,Mt,Vt,ut,Be,m.aA.vertical,!1,X,K))}}let tt=!1;if(U.icon&&U.icon.name){const Le=a.imageMap[U.icon.name];Le&&(ue=Ln(a.imagePositions[U.icon.name],s.get("icon-offset").evaluate(U,{},a.canonical),s.get("icon-anchor").evaluate(U,{},a.canonical)),tt=!!Le.sdf,a.bucket.sdfIcons===void 0?a.bucket.sdfIcons=tt:a.bucket.sdfIcons!==tt&&Cr("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(Le.pixelRatio!==a.bucket.pixelRatio||s.get("icon-rotate").constantOr(1)!==0)&&(a.bucket.iconsNeedLinear=!0))}const Ee=vb(se.horizontal)||se.vertical;a.bucket.iconsInText=!!Ee&&Ee.iconsInText,(Ee||ue)&&xT(a.bucket,U,se,ue,a.imageMap,p,X,J,Be,tt,a.canonical,a.subdivisionGranularity)}a.showCollisionBoxes&&a.bucket.generateCollisionDebugBuffers()},m.cS=vc,m.cT=bf,m.cU=Rd,m.cV=function(a){const t=new qu;return(function(s,A){for(const p in s.layers)A.writeMessage(3,lT,s.layers[p])})(a,t),t.finish()},m.cW=function(a,t,s,A,p,v){let _=ab(a,t,s,p,0);return _=ab(_,t,A,v,1),_},m.cX=class{constructor(a){this.maxEntries=a,this.map=new Map}get(a){const t=this.map.get(a);return t!==void 0&&(this.map.delete(a),this.map.set(a,t)),t}set(a,t){if(this.map.has(a))this.map.delete(a);else if(this.map.size>=this.maxEntries){const s=this.map.keys().next().value;this.map.delete(s)}this.map.set(a,t)}clear(){this.map.clear()}},m.cY=wf,m.cZ=qu,m.c_=rb,m.ca=class extends yo{constructor(a,t){super(a,t),this.current=new Array}set(a){if(a!=this.current){this.current=a;const t=new Float32Array(a);this.gl.uniform1fv(this.location,t)}}},m.cb=class extends pA{},m.cc=wg,m.cd=class extends jl{},m.ce=df,m.cf=function(a){return a<=1?1:Math.pow(2,Math.ceil(Math.log(a)/Math.LN2))},m.cg=hf,m.ch=function(a,t,s){var A=t[0],p=t[1],v=t[2],_=s[3]*A+s[7]*p+s[11]*v+s[15];return a[0]=(s[0]*A+s[4]*p+s[8]*v+s[12])/(_=_||1),a[1]=(s[1]*A+s[5]*p+s[9]*v+s[13])/_,a[2]=(s[2]*A+s[6]*p+s[10]*v+s[14])/_,a},m.ci=class extends Js{},m.cj=class extends Ga{},m.ck=function(a,t){return a[0]===t[0]&&a[1]===t[1]&&a[2]===t[2]&&a[3]===t[3]&&a[4]===t[4]&&a[5]===t[5]&&a[6]===t[6]&&a[7]===t[7]&&a[8]===t[8]&&a[9]===t[9]&&a[10]===t[10]&&a[11]===t[11]&&a[12]===t[12]&&a[13]===t[13]&&a[14]===t[14]&&a[15]===t[15]},m.cl=function(a,t){var s=a[0],A=a[1],p=a[2],v=a[3],_=a[4],B=a[5],F=a[6],U=a[7],Q=a[8],K=a[9],X=a[10],J=a[11],se=a[12],le=a[13],ue=a[14],Be=a[15],tt=t[0],Ee=t[1],Le=t[2],st=t[3],ut=t[4],Mt=t[5],Xt=t[6],Vt=t[7],ir=t[8],_r=t[9],or=t[10],qt=t[11],Ot=t[12],Lr=t[13],Ir=t[14],kr=t[15];return Math.abs(s-tt)<=ie*Math.max(1,Math.abs(s),Math.abs(tt))&&Math.abs(A-Ee)<=ie*Math.max(1,Math.abs(A),Math.abs(Ee))&&Math.abs(p-Le)<=ie*Math.max(1,Math.abs(p),Math.abs(Le))&&Math.abs(v-st)<=ie*Math.max(1,Math.abs(v),Math.abs(st))&&Math.abs(_-ut)<=ie*Math.max(1,Math.abs(_),Math.abs(ut))&&Math.abs(B-Mt)<=ie*Math.max(1,Math.abs(B),Math.abs(Mt))&&Math.abs(F-Xt)<=ie*Math.max(1,Math.abs(F),Math.abs(Xt))&&Math.abs(U-Vt)<=ie*Math.max(1,Math.abs(U),Math.abs(Vt))&&Math.abs(Q-ir)<=ie*Math.max(1,Math.abs(Q),Math.abs(ir))&&Math.abs(K-_r)<=ie*Math.max(1,Math.abs(K),Math.abs(_r))&&Math.abs(X-or)<=ie*Math.max(1,Math.abs(X),Math.abs(or))&&Math.abs(J-qt)<=ie*Math.max(1,Math.abs(J),Math.abs(qt))&&Math.abs(se-Ot)<=ie*Math.max(1,Math.abs(se),Math.abs(Ot))&&Math.abs(le-Lr)<=ie*Math.max(1,Math.abs(le),Math.abs(Lr))&&Math.abs(ue-Ir)<=ie*Math.max(1,Math.abs(ue),Math.abs(Ir))&&Math.abs(Be-kr)<=ie*Math.max(1,Math.abs(Be),Math.abs(kr))},m.cm=function(a,t){return a[0]=t[0],a[1]=t[1],a[2]=t[2],a[3]=t[3],a[4]=t[4],a[5]=t[5],a[6]=t[6],a[7]=t[7],a[8]=t[8],a[9]=t[9],a[10]=t[10],a[11]=t[11],a[12]=t[12],a[13]=t[13],a[14]=t[14],a[15]=t[15],a},m.cn=a=>a.type==="symbol",m.co=a=>a.type==="circle",m.cp=a=>a.type==="heatmap",m.cq=a=>a.type==="line",m.cr=a=>a.type==="fill",m.cs=a=>a.type==="fill-extrusion",m.ct=a=>a.type==="hillshade",m.cu=a=>a.type==="color-relief",m.cv=a=>a.type==="background",m.cw=a=>a.type==="custom",m.cx=Ne,m.cy=function(a,t,s){const A=ze(t.x-s.x,t.y-s.y),p=ze(a.x-s.x,a.y-s.y),v=Math.atan2(A[0]*p[1]-A[1]*p[0],(function(_,B){return _[0]*B[0]+_[1]*B[1]})(A,p));return hn(v)},m.cz=Ye,m.d=Ft,m.d0=function(a,t,s,A,p){return o(this,void 0,void 0,(function*(){if(Z())try{return yield Wr(a,t,s,A,p)}catch{}return(function(v,_,B,F,U){const Q=v.width,K=v.height;Sr&&Or||(Sr=new OffscreenCanvas(Q,K),Or=Sr.getContext("2d",{willReadFrequently:!0})),Sr.width=Q,Sr.height=K,Or.drawImage(v,0,0,Q,K);const X=Or.getImageData(_,B,F,U);return Or.clearRect(0,0,Q,K),X.data})(a,t,s,A,p)}))},m.d1=Up,m.d2=E,m.d3=class{constructor(a,t){this.layers={[em]:this},this.name=em,this.version=t?t.version:1,this.extent=t?t.extent:4096,this.length=a.length,this.features=a}feature(a){return new aT(this.features[a],this.extent)}},m.d4=Qc,m.d5=pi,m.e=vt,m.f=a=>o(void 0,void 0,void 0,(function*(){if(a.byteLength===0)return createImageBitmap(new ImageData(1,1));const t=new Blob([new Uint8Array(a)],{type:"image/png"});try{return createImageBitmap(t)}catch(s){throw new Error(`Could not load image because of ${s.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`)}})),m.g=Ct,m.h=a=>new Promise(((t,s)=>{const A=new Image;A.onload=()=>{t(A),URL.revokeObjectURL(A.src),A.onload=null,window.requestAnimationFrame((()=>{A.src=lr}))},A.onerror=()=>s(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const p=new Blob([new Uint8Array(a)],{type:"image/png"});A.src=a.byteLength?URL.createObjectURL(p):lr})),m.i=vr,m.j=(a,t)=>Ht(vt(a,{type:"json"}),t),m.k=rn,m.l=fr,m.m=Ht,m.n=(a,t)=>Ht(vt(a,{type:"arrayBuffer"}),t),m.o=function(a){return new qu(a).readFields(jt,[])},m.p=ur,m.q=function(a){return/[\u02EA\u02EB\u1100-\u11FF\u2E80-\u2FDF\u3000-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u4DBF\u4E00-\uA48C\uA490-\uA4C6\uA960-\uA97C\uAC00-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFE10-\uFE1F\uFE30-\uFE4F\uFF00-\uFFEF]|\uD81B[\uDFE0-\uDFFF]|[\uD81C-\uD822\uD840-\uD868\uD86A-\uD86D\uD86F-\uD872\uD874-\uD879\uD880-\uD883\uD885-\uD88C][\uDC00-\uDFFF]|\uD823[\uDC00-\uDCD5\uDCFF-\uDD1E\uDD80-\uDDF2]|\uD82B[\uDFF0-\uDFFF]|\uD82C[\uDC00-\uDEFB]|\uD83C[\uDE00-\uDEFF]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEAD\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0\uDFF0-\uDFFF]|\uD87B[\uDC00-\uDE5D]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A\uDF50-\uDFFF]|\uD88D[\uDC00-\uDC79]/gim.test(String.fromCodePoint(a))},m.r=mu,m.s=Rr,m.t=ci,m.u=mt,m.v=R,m.w=Cr,m.x=Qi,m.y=te,m.z=mi})),h("worker",["./shared"],(function(m){class o{constructor(de,fe){this.keyCache={},de&&this.replace(de,fe)}replace(de,fe){this._layerConfigs={},this._layers={},this.update(de,[],fe)}update(de,fe,ye){for(const We of de){this._layerConfigs[We.id]=We;const Ct=this._layers[We.id]=m.bU(We,ye);Ct._featureFilter=m.ak(Ct.filter,ye),this.keyCache[We.id]&&delete this.keyCache[We.id]}for(const We of fe)delete this.keyCache[We],delete this._layerConfigs[We],delete this._layers[We];this.familiesBySource={};const qe=m.cM(Object.values(this._layerConfigs),this.keyCache);for(const We of qe){const Ct=We.map((cr=>this._layers[cr.id])),yt=Ct[0];if(yt.visibility==="none")continue;const at=yt.source||"";let bt=this.familiesBySource[at];bt||(bt=this.familiesBySource[at]={});const Ht=yt.sourceLayer||m.aa;let Ft=bt[Ht];Ft||(Ft=bt[Ht]=[]),Ft.push(Ct)}}}class x{constructor(de){const fe={},ye=[];for(const yt in de){const at=de[yt],bt=fe[yt]={};for(const Ht in at){const Ft=at[+Ht];if(!Ft||Ft.bitmap.width===0||Ft.bitmap.height===0)continue;const cr={x:0,y:0,w:Ft.bitmap.width+2,h:Ft.bitmap.height+2};ye.push(cr),bt[Ht]={rect:cr,metrics:Ft.metrics}}}const{w:qe,h:We}=m.p(ye),Ct=new m.r({width:qe||1,height:We||1});for(const yt in de){const at=de[yt];for(const bt in at){const Ht=at[+bt];if(!Ht||Ht.bitmap.width===0||Ht.bitmap.height===0)continue;const Ft=fe[yt][bt].rect;m.r.copy(Ht.bitmap,Ct,{x:0,y:0},{x:Ft.x+1,y:Ft.y+1},Ht.bitmap)}}this.image=Ct,this.positions=fe}}m.cN("GlyphAtlas",x);class E{constructor(de){this.tileID=new m.a2(de.tileID.overscaledZ,de.tileID.wrap,de.tileID.canonical.z,de.tileID.canonical.x,de.tileID.canonical.y),this.uid=de.uid,this.zoom=de.zoom,this.pixelRatio=de.pixelRatio,this.tileSize=de.tileSize,this.source=de.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=de.showCollisionBoxes,this.collectResourceTiming=!!de.collectResourceTiming,this.returnDependencies=!!de.returnDependencies,this.promoteId=de.promoteId,this.inFlightDependencies=[]}parse(de,fe,ye,qe,We){return m._(this,void 0,void 0,(function*(){this.status="parsing",this.data=de,this.collisionBoxArray=new m.ai;const Ct=new m.cO(Object.keys(de.layers).sort()),yt=new m.cP(this.tileID,this.promoteId);yt.bucketLayerIDs=[];const at={},bt={featureIndex:yt,iconDependencies:{},patternDependencies:{},glyphDependencies:{},dashDependencies:{},availableImages:ye,subdivisionGranularity:We},Ht=fe.familiesBySource[this.source];for(const Bn in Ht){const xn=de.layers[Bn];if(!xn)continue;xn.version===1&&m.w(`Vector tile source "${this.source}" layer "${Bn}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const Di=Ct.encode(Bn),ai=[];for(let Yt=0;Yt<xn.length;Yt++){const Zn=xn.feature(Yt),$i=yt.getId(Zn,Bn);ai.push({feature:Zn,id:$i,index:Yt,sourceLayerIndex:Di})}for(const Yt of Ht[Bn]){const Zn=Yt[0];Zn.source!==this.source&&m.w(`layer.source = ${Zn.source} does not equal this.source = ${this.source}`),Zn.isHidden(this.zoom,!0)||(I(Yt,this.zoom,ye),(at[Zn.id]=Zn.createBucket({index:yt.bucketLayerIDs.length,layers:Yt,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:Di,sourceID:this.source})).populate(ai,bt,this.tileID.canonical),yt.bucketLayerIDs.push(Yt.map(($i=>$i.id))))}}const Ft=m.bZ(bt.glyphDependencies,(Bn=>Object.keys(Bn).map(Number)));this.inFlightDependencies.forEach((Bn=>Bn?.abort())),this.inFlightDependencies=[];let cr=Promise.resolve({});if(Object.keys(Ft).length){const Bn=new AbortController;this.inFlightDependencies.push(Bn),cr=qe.sendAsync({type:"GG",data:{stacks:Ft,source:this.source,tileID:this.tileID,type:"glyphs"}},Bn)}const Jt=Object.keys(bt.iconDependencies);let fr=Promise.resolve({});if(Jt.length){const Bn=new AbortController;this.inFlightDependencies.push(Bn),fr=qe.sendAsync({type:"GI",data:{icons:Jt,source:this.source,tileID:this.tileID,type:"icons"}},Bn)}const rn=Object.keys(bt.patternDependencies);let Tr=Promise.resolve({});if(rn.length){const Bn=new AbortController;this.inFlightDependencies.push(Bn),Tr=qe.sendAsync({type:"GI",data:{icons:rn,source:this.source,tileID:this.tileID,type:"patterns"}},Bn)}const mt=bt.dashDependencies;let tn=Promise.resolve({});if(Object.keys(mt).length){const Bn=new AbortController;this.inFlightDependencies.push(Bn),tn=qe.sendAsync({type:"GDA",data:{dashes:mt}},Bn)}const[Nr,mr,Kr,Dn]=yield Promise.all([cr,fr,Tr,tn]),wr=new x(Nr),Tn=new m.cQ(mr,Kr);for(const Bn in at){const xn=at[Bn];xn instanceof m.aj?(I(xn.layers,this.zoom,ye),m.cR({bucket:xn,glyphMap:Nr,glyphPositions:wr.positions,imageMap:mr,imagePositions:Tn.iconPositions,showCollisionBoxes:this.showCollisionBoxes,canonical:this.tileID.canonical,subdivisionGranularity:bt.subdivisionGranularity})):xn.hasDependencies&&(xn instanceof m.cS||xn instanceof m.cT||xn instanceof m.cU)&&(I(xn.layers,this.zoom,ye),xn.addFeatures(bt,this.tileID.canonical,Tn.patternPositions,Dn))}return this.status="done",{buckets:Object.values(at).filter((Bn=>!Bn.isEmpty())),featureIndex:yt,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:wr.image,imageAtlas:Tn,dashPositions:Dn,glyphMap:this.returnDependencies?Nr:null,iconMap:this.returnDependencies?mr:null,glyphPositions:this.returnDependencies?wr.positions:null}}))}}function I(ft,de,fe){const ye=new m.H(de);for(const qe of ft)qe.recalculate(ye,fe)}class D{constructor(de,fe,ye,qe,We){this.type=de,this.properties=ye||{},this.extent=We,this.pointsArray=fe,this.id=qe}loadGeometry(){return this.pointsArray.map((de=>de.map((fe=>new m.P(fe.x,fe.y)))))}}class O{constructor(de,fe,ye){this.version=2,this._myFeatures=de,this.name=fe,this.length=de.length,this.extent=ye}feature(de){return this._myFeatures[de]}}class P{constructor(){this.layers={}}addLayer(de){this.layers[de.name]=de}}function W(ft){let de=m.cV(ft);return de.byteOffset===0&&de.byteLength===de.buffer.byteLength||(de=new Uint8Array(de)),{vectorTile:ft,rawData:de.buffer}}function z(ft,de,fe){const{extent:ye}=ft,qe=Math.pow(2,fe.z-de.z),We=(fe.x-de.x*qe)*ye,Ct=(fe.y-de.y*qe)*ye,yt=[];for(let at=0;at<ft.length;at++){const bt=ft.feature(at);let Ht=bt.loadGeometry();for(const cr of Ht)for(const Jt of cr)Jt.x=Jt.x*qe-We,Jt.y=Jt.y*qe-Ct;const Ft=128;Ht=m.cW(Ht,bt.type,-Ft,-Ft,ye+Ft,ye+Ft),Ht.length!==0&&yt.push(new D(bt.type,Ht,bt.properties,bt.id,ye))}return new O(yt,ft.name,ye)}class H{constructor(de,fe,ye){this.actor=de,this.layerIndex=fe,this.availableImages=ye,this.fetching={},this.loading={},this.loaded={},this.overzoomedTileResultCache=new m.cX(1e3)}loadVectorTile(de,fe){return m._(this,void 0,void 0,(function*(){const ye=yield m.n(de.request,fe);try{return{vectorTile:de.encoding!=="mlt"?new m.cY(new m.cZ(ye.data)):new m.c_(ye.data),rawData:ye.data,cacheControl:ye.cacheControl,expires:ye.expires}}catch(qe){const We=new Uint8Array(ye.data);let Ct=`Unable to parse the tile at ${de.request.url}, `;throw Ct+=We[0]===31&&We[1]===139?"please make sure the data is not gzipped and that you have configured the relevant header in the server":`got error: ${qe.message}`,new Error(Ct)}}))}loadTile(de){return m._(this,void 0,void 0,(function*(){const{uid:fe,overzoomParameters:ye}=de;ye&&(de.request=ye.overzoomRequest);const qe=!!(de&&de.request&&de.request.collectResourceTiming)&&new m.c$(de.request),We=new E(de);this.loading[fe]=We;const Ct=new AbortController;We.abort=Ct;try{const yt=yield this.loadVectorTile(de,Ct);if(delete this.loading[fe],!yt)return null;if(ye){const cr=this._getOverzoomTile(de,yt.vectorTile);yt.rawData=cr.rawData,yt.vectorTile=cr.vectorTile}const at=yt.rawData,bt={};yt.expires&&(bt.expires=yt.expires),yt.cacheControl&&(bt.cacheControl=yt.cacheControl);const Ht={};if(qe){const cr=qe.finish();cr&&(Ht.resourceTiming=JSON.parse(JSON.stringify(cr)))}We.vectorTile=yt.vectorTile;const Ft=We.parse(yt.vectorTile,this.layerIndex,this.availableImages,this.actor,de.subdivisionGranularity);this.loaded[fe]=We,this.fetching[fe]={rawTileData:at,cacheControl:bt,resourceTiming:Ht};try{const cr=yield Ft;return m.e({rawTileData:at.slice(0),encoding:de.encoding},cr,bt,Ht)}finally{delete this.fetching[fe]}}catch(yt){throw delete this.loading[fe],We.status="done",this.loaded[fe]=We,yt}}))}_getOverzoomTile(de,fe){const{tileID:ye,source:qe,overzoomParameters:We}=de,{maxZoomTileID:Ct}=We,yt=`${Ct.key}_${ye.key}`,at=this.overzoomedTileResultCache.get(yt);if(at)return at;const bt=new P,Ht=this.layerIndex.familiesBySource[qe];for(const cr in Ht){const Jt=fe.layers[cr];if(!Jt)continue;const fr=z(Jt,Ct,ye.canonical);fr.length>0&&bt.addLayer(fr)}const Ft=W(bt);return this.overzoomedTileResultCache.set(yt,Ft),Ft}reloadTile(de){return m._(this,void 0,void 0,(function*(){const fe=de.uid;if(!this.loaded||!this.loaded[fe])throw new Error("Should not be trying to reload a tile that was never loaded or has been removed");const ye=this.loaded[fe];if(ye.showCollisionBoxes=de.showCollisionBoxes,ye.status==="parsing"){const qe=yield ye.parse(ye.vectorTile,this.layerIndex,this.availableImages,this.actor,de.subdivisionGranularity);let We;if(this.fetching[fe]){const{rawTileData:Ct,cacheControl:yt,resourceTiming:at}=this.fetching[fe];delete this.fetching[fe],We=m.e({rawTileData:Ct.slice(0),encoding:de.encoding},qe,yt,at)}else We=qe;return We}if(ye.status==="done"&&ye.vectorTile)return ye.parse(ye.vectorTile,this.layerIndex,this.availableImages,this.actor,de.subdivisionGranularity)}))}abortTile(de){return m._(this,void 0,void 0,(function*(){const fe=this.loading,ye=de.uid;fe&&fe[ye]&&fe[ye].abort&&(fe[ye].abort.abort(),delete fe[ye])}))}removeTile(de){return m._(this,void 0,void 0,(function*(){this.loaded&&this.loaded[de.uid]&&delete this.loaded[de.uid]}))}}class Z{constructor(){this.loaded={}}loadTile(de){return m._(this,void 0,void 0,(function*(){const{uid:fe,encoding:ye,rawImageData:qe,redFactor:We,greenFactor:Ct,blueFactor:yt,baseShift:at}=de,bt=qe.width+2,Ht=qe.height+2,Ft=m.b(qe)?new m.R({width:bt,height:Ht},yield m.d0(qe,-1,-1,bt,Ht)):qe,cr=new m.d1(fe,Ft,ye,We,Ct,yt,at);return this.loaded=this.loaded||{},this.loaded[fe]=cr,cr}))}removeTile(de){const fe=this.loaded,ye=de.uid;fe&&fe[ye]&&delete fe[ye]}}var ie,ce,he=(function(){if(ce)return ie;function ft(fe,ye){if(fe.length!==0){de(fe[0],ye);for(var qe=1;qe<fe.length;qe++)de(fe[qe],!ye)}}function de(fe,ye){for(var qe=0,We=0,Ct=0,yt=fe.length,at=yt-1;Ct<yt;at=Ct++){var bt=(fe[Ct][0]-fe[at][0])*(fe[at][1]+fe[Ct][1]),Ht=qe+bt;We+=Math.abs(qe)>=Math.abs(bt)?qe-Ht+bt:bt-Ht+qe,qe=Ht}qe+We>=0!=!!ye&&fe.reverse()}return ce=1,ie=function fe(ye,qe){var We,Ct=ye&&ye.type;if(Ct==="FeatureCollection")for(We=0;We<ye.features.length;We++)fe(ye.features[We],qe);else if(Ct==="GeometryCollection")for(We=0;We<ye.geometries.length;We++)fe(ye.geometries[We],qe);else if(Ct==="Feature")fe(ye.geometry,qe);else if(Ct==="Polygon")ft(ye.coordinates,qe);else if(Ct==="MultiPolygon")for(We=0;We<ye.coordinates.length;We++)ft(ye.coordinates[We],qe);return ye}})(),Ie=m.d2(he);const Ve={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:ft=>ft},Me=Math.fround||(Pe=new Float32Array(1),ft=>(Pe[0]=+ft,Pe[0]));var Pe;class xe{constructor(de){this.options=Object.assign(Object.create(Ve),de),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(de){const{log:fe,minZoom:ye,maxZoom:qe}=this.options;fe&&console.time("total time");const We=`prepare ${de.length} points`;fe&&console.time(We),this.points=de;const Ct=[];for(let at=0;at<de.length;at++){const bt=de[at];if(!bt.geometry)continue;const[Ht,Ft]=bt.geometry.coordinates,cr=Me(_e(Ht)),Jt=Me(Ue(Ft));Ct.push(cr,Jt,1/0,at,-1,1),this.options.reduce&&Ct.push(0)}let yt=this.trees[qe+1]=this._createTree(Ct);fe&&console.timeEnd(We);for(let at=qe;at>=ye;at--){const bt=+Date.now();yt=this.trees[at]=this._createTree(this._cluster(yt,at)),fe&&console.log("z%d: %d clusters in %dms",at,yt.numItems,+Date.now()-bt)}return fe&&console.timeEnd("total time"),this}getClusters(de,fe){let ye=((de[0]+180)%360+360)%360-180;const qe=Math.max(-90,Math.min(90,de[1]));let We=de[2]===180?180:((de[2]+180)%360+360)%360-180;const Ct=Math.max(-90,Math.min(90,de[3]));if(de[2]-de[0]>=360)ye=-180,We=180;else if(ye>We){const Ft=this.getClusters([ye,qe,180,Ct],fe),cr=this.getClusters([-180,qe,We,Ct],fe);return Ft.concat(cr)}const yt=this.trees[this._limitZoom(fe)],at=yt.range(_e(ye),Ue(Ct),_e(We),Ue(qe)),bt=yt.data,Ht=[];for(const Ft of at){const cr=this.stride*Ft;Ht.push(bt[cr+5]>1?nt(bt,cr,this.clusterProps):this.points[bt[cr+3]])}return Ht}getChildren(de){const fe=this._getOriginId(de),ye=this._getOriginZoom(de),qe="No cluster with the specified id.",We=this.trees[ye];if(!We)throw new Error(qe);const Ct=We.data;if(fe*this.stride>=Ct.length)throw new Error(qe);const yt=this.options.radius/(this.options.extent*Math.pow(2,ye-1)),at=We.within(Ct[fe*this.stride],Ct[fe*this.stride+1],yt),bt=[];for(const Ht of at){const Ft=Ht*this.stride;Ct[Ft+4]===de&&bt.push(Ct[Ft+5]>1?nt(Ct,Ft,this.clusterProps):this.points[Ct[Ft+3]])}if(bt.length===0)throw new Error(qe);return bt}getLeaves(de,fe,ye){const qe=[];return this._appendLeaves(qe,de,fe=fe||10,ye=ye||0,0),qe}getTile(de,fe,ye){const qe=this.trees[this._limitZoom(de)],We=Math.pow(2,de),{extent:Ct,radius:yt}=this.options,at=yt/Ct,bt=(ye-at)/We,Ht=(ye+1+at)/We,Ft={features:[]};return this._addTileFeatures(qe.range((fe-at)/We,bt,(fe+1+at)/We,Ht),qe.data,fe,ye,We,Ft),fe===0&&this._addTileFeatures(qe.range(1-at/We,bt,1,Ht),qe.data,We,ye,We,Ft),fe===We-1&&this._addTileFeatures(qe.range(0,bt,at/We,Ht),qe.data,-1,ye,We,Ft),Ft.features.length?Ft:null}getClusterExpansionZoom(de){let fe=this._getOriginZoom(de)-1;for(;fe<=this.options.maxZoom;){const ye=this.getChildren(de);if(fe++,ye.length!==1)break;de=ye[0].properties.cluster_id}return fe}_appendLeaves(de,fe,ye,qe,We){const Ct=this.getChildren(fe);for(const yt of Ct){const at=yt.properties;if(at&&at.cluster?We+at.point_count<=qe?We+=at.point_count:We=this._appendLeaves(de,at.cluster_id,ye,qe,We):We<qe?We++:de.push(yt),de.length===ye)break}return We}_createTree(de){const fe=new m.aU(de.length/this.stride|0,this.options.nodeSize,Float32Array);for(let ye=0;ye<de.length;ye+=this.stride)fe.add(de[ye],de[ye+1]);return fe.finish(),fe.data=de,fe}_addTileFeatures(de,fe,ye,qe,We,Ct){for(const yt of de){const at=yt*this.stride,bt=fe[at+5]>1;let Ht,Ft,cr;if(bt)Ht=pe(fe,at,this.clusterProps),Ft=fe[at],cr=fe[at+1];else{const rn=this.points[fe[at+3]];Ht=rn.properties;const[Tr,mt]=rn.geometry.coordinates;Ft=_e(Tr),cr=Ue(mt)}const Jt={type:1,geometry:[[Math.round(this.options.extent*(Ft*We-ye)),Math.round(this.options.extent*(cr*We-qe))]],tags:Ht};let fr;fr=bt||this.options.generateId?fe[at+3]:this.points[fe[at+3]].id,fr!==void 0&&(Jt.id=fr),Ct.features.push(Jt)}}_limitZoom(de){return Math.max(this.options.minZoom,Math.min(Math.floor(+de),this.options.maxZoom+1))}_cluster(de,fe){const{radius:ye,extent:qe,reduce:We,minPoints:Ct}=this.options,yt=ye/(qe*Math.pow(2,fe)),at=de.data,bt=[],Ht=this.stride;for(let Ft=0;Ft<at.length;Ft+=Ht){if(at[Ft+2]<=fe)continue;at[Ft+2]=fe;const cr=at[Ft],Jt=at[Ft+1],fr=de.within(at[Ft],at[Ft+1],yt),rn=at[Ft+5];let Tr=rn;for(const mt of fr){const tn=mt*Ht;at[tn+2]>fe&&(Tr+=at[tn+5])}if(Tr>rn&&Tr>=Ct){let mt,tn=cr*rn,Nr=Jt*rn,mr=-1;const Kr=(Ft/Ht<<5)+(fe+1)+this.points.length;for(const Dn of fr){const wr=Dn*Ht;if(at[wr+2]<=fe)continue;at[wr+2]=fe;const Tn=at[wr+5];tn+=at[wr]*Tn,Nr+=at[wr+1]*Tn,at[wr+4]=Kr,We&&(mt||(mt=this._map(at,Ft,!0),mr=this.clusterProps.length,this.clusterProps.push(mt)),We(mt,this._map(at,wr)))}at[Ft+4]=Kr,bt.push(tn/Tr,Nr/Tr,1/0,Kr,-1,Tr),We&&bt.push(mr)}else{for(let mt=0;mt<Ht;mt++)bt.push(at[Ft+mt]);if(Tr>1)for(const mt of fr){const tn=mt*Ht;if(!(at[tn+2]<=fe)){at[tn+2]=fe;for(let Nr=0;Nr<Ht;Nr++)bt.push(at[tn+Nr])}}}}return bt}_getOriginId(de){return de-this.points.length>>5}_getOriginZoom(de){return(de-this.points.length)%32}_map(de,fe,ye){if(de[fe+5]>1){const Ct=this.clusterProps[de[fe+6]];return ye?Object.assign({},Ct):Ct}const qe=this.points[de[fe+3]].properties,We=this.options.map(qe);return ye&&We===qe?Object.assign({},We):We}}function nt(ft,de,fe){return{type:"Feature",id:ft[de+3],properties:pe(ft,de,fe),geometry:{type:"Point",coordinates:[(ye=ft[de],360*(ye-.5)),Fe(ft[de+1])]}};var ye}function pe(ft,de,fe){const ye=ft[de+5],qe=ye>=1e4?`${Math.round(ye/1e3)}k`:ye>=1e3?Math.round(ye/100)/10+"k":ye,We=ft[de+6],Ct=We===-1?{}:Object.assign({},fe[We]);return Object.assign(Ct,{cluster:!0,cluster_id:ft[de+3],point_count:ye,point_count_abbreviated:qe})}function _e(ft){return ft/360+.5}function Ue(ft){const de=Math.sin(ft*Math.PI/180),fe=.5-.25*Math.log((1+de)/(1-de))/Math.PI;return fe<0?0:fe>1?1:fe}function Fe(ft){const de=(180-360*ft)*Math.PI/180;return 360*Math.atan(Math.exp(de))/Math.PI-90}function pt(ft,de,fe,ye){let qe=ye;const We=de+(fe-de>>1);let Ct,yt=fe-de;const at=ft[de],bt=ft[de+1],Ht=ft[fe],Ft=ft[fe+1];for(let cr=de+3;cr<fe;cr+=3){const Jt=ht(ft[cr],ft[cr+1],at,bt,Ht,Ft);if(Jt>qe)Ct=cr,qe=Jt;else if(Jt===qe){const fr=Math.abs(cr-We);fr<yt&&(Ct=cr,yt=fr)}}qe>ye&&(Ct-de>3&&pt(ft,de,Ct,ye),ft[Ct+2]=qe,fe-Ct>3&&pt(ft,Ct,fe,ye))}function ht(ft,de,fe,ye,qe,We){let Ct=qe-fe,yt=We-ye;if(Ct!==0||yt!==0){const at=((ft-fe)*Ct+(de-ye)*yt)/(Ct*Ct+yt*yt);at>1?(fe=qe,ye=We):at>0&&(fe+=Ct*at,ye+=yt*at)}return Ct=ft-fe,yt=de-ye,Ct*Ct+yt*yt}function Je(ft,de,fe,ye){const qe={id:ft??null,type:de,geometry:fe,tags:ye,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};if(de==="Point"||de==="MultiPoint"||de==="LineString")ze(qe,fe);else if(de==="Polygon")ze(qe,fe[0]);else if(de==="MultiLineString")for(const We of fe)ze(qe,We);else if(de==="MultiPolygon")for(const We of fe)ze(qe,We[0]);return qe}function ze(ft,de){for(let fe=0;fe<de.length;fe+=3)ft.minX=Math.min(ft.minX,de[fe]),ft.minY=Math.min(ft.minY,de[fe+1]),ft.maxX=Math.max(ft.maxX,de[fe]),ft.maxY=Math.max(ft.maxY,de[fe+1])}function je(ft,de,fe,ye){if(!de.geometry)return;const qe=de.geometry.coordinates;if(qe&&qe.length===0)return;const We=de.geometry.type,Ct=Math.pow(fe.tolerance/((1<<fe.maxZoom)*fe.extent),2);let yt=[],at=de.id;if(fe.promoteId?at=de.properties[fe.promoteId]:fe.generateId&&(at=ye||0),We==="Point")xt(qe,yt);else if(We==="MultiPoint")for(const bt of qe)xt(bt,yt);else if(We==="LineString")Re(qe,yt,Ct,!1);else if(We==="MultiLineString"){if(fe.lineMetrics){for(const bt of qe)yt=[],Re(bt,yt,Ct,!1),ft.push(Je(at,"LineString",yt,de.properties));return}oe(qe,yt,Ct,!1)}else if(We==="Polygon")oe(qe,yt,Ct,!0);else{if(We!=="MultiPolygon"){if(We==="GeometryCollection"){for(const bt of de.geometry.geometries)je(ft,{id:at,geometry:bt,properties:de.properties},fe,ye);return}throw new Error("Input data is not a valid GeoJSON object.")}for(const bt of qe){const Ht=[];oe(bt,Ht,Ct,!0),yt.push(Ht)}}ft.push(Je(at,We,yt,de.properties))}function xt(ft,de){de.push(Se(ft[0]),Ne(ft[1]),0)}function Re(ft,de,fe,ye){let qe,We,Ct=0;for(let at=0;at<ft.length;at++){const bt=Se(ft[at][0]),Ht=Ne(ft[at][1]);de.push(bt,Ht,0),at>0&&(Ct+=ye?(qe*Ht-bt*We)/2:Math.sqrt(Math.pow(bt-qe,2)+Math.pow(Ht-We,2))),qe=bt,We=Ht}const yt=de.length-3;de[2]=1,pt(de,0,yt,fe),de[yt+2]=1,de.size=Math.abs(Ct),de.start=0,de.end=de.size}function oe(ft,de,fe,ye){for(let qe=0;qe<ft.length;qe++){const We=[];Re(ft[qe],We,fe,ye),de.push(We)}}function Se(ft){return ft/360+.5}function Ne(ft){const de=Math.sin(ft*Math.PI/180),fe=.5-.25*Math.log((1+de)/(1-de))/Math.PI;return fe<0?0:fe>1?1:fe}function Ye(ft,de,fe,ye,qe,We,Ct,yt){if(ye/=de,We>=(fe/=de)&&Ct<ye)return ft;if(Ct<fe||We>=ye)return null;const at=[];for(const bt of ft){const Ht=bt.geometry;let Ft=bt.type;const cr=qe===0?bt.minX:bt.minY,Jt=qe===0?bt.maxX:bt.maxY;if(cr>=fe&&Jt<ye){at.push(bt);continue}if(Jt<fe||cr>=ye)continue;let fr=[];if(Ft==="Point"||Ft==="MultiPoint")lt(Ht,fr,fe,ye,qe);else if(Ft==="LineString")rt(Ht,fr,fe,ye,qe,!1,yt.lineMetrics);else if(Ft==="MultiLineString")St(Ht,fr,fe,ye,qe,!1);else if(Ft==="Polygon")St(Ht,fr,fe,ye,qe,!0);else if(Ft==="MultiPolygon")for(const rn of Ht){const Tr=[];St(rn,Tr,fe,ye,qe,!0),Tr.length&&fr.push(Tr)}if(fr.length){if(yt.lineMetrics&&Ft==="LineString"){for(const rn of fr)at.push(Je(bt.id,Ft,rn,bt.tags));continue}Ft!=="LineString"&&Ft!=="MultiLineString"||(fr.length===1?(Ft="LineString",fr=fr[0]):Ft="MultiLineString"),Ft!=="Point"&&Ft!=="MultiPoint"||(Ft=fr.length===3?"Point":"MultiPoint"),at.push(Je(bt.id,Ft,fr,bt.tags))}}return at.length?at:null}function lt(ft,de,fe,ye,qe){for(let We=0;We<ft.length;We+=3){const Ct=ft[We+qe];Ct>=fe&&Ct<=ye&&Lt(de,ft[We],ft[We+1],ft[We+2])}}function rt(ft,de,fe,ye,qe,We,Ct){let yt=vt(ft);const at=qe===0?Wt:ar;let bt,Ht,Ft=ft.start;for(let Tr=0;Tr<ft.length-3;Tr+=3){const mt=ft[Tr],tn=ft[Tr+1],Nr=ft[Tr+2],mr=ft[Tr+3],Kr=ft[Tr+4],Dn=qe===0?mt:tn,wr=qe===0?mr:Kr;let Tn=!1;Ct&&(bt=Math.sqrt(Math.pow(mt-mr,2)+Math.pow(tn-Kr,2))),Dn<fe?wr>fe&&(Ht=at(yt,mt,tn,mr,Kr,fe),Ct&&(yt.start=Ft+bt*Ht)):Dn>ye?wr<ye&&(Ht=at(yt,mt,tn,mr,Kr,ye),Ct&&(yt.start=Ft+bt*Ht)):Lt(yt,mt,tn,Nr),wr<fe&&Dn>=fe&&(Ht=at(yt,mt,tn,mr,Kr,fe),Tn=!0),wr>ye&&Dn<=ye&&(Ht=at(yt,mt,tn,mr,Kr,ye),Tn=!0),!We&&Tn&&(Ct&&(yt.end=Ft+bt*Ht),de.push(yt),yt=vt(ft)),Ct&&(Ft+=bt)}let cr=ft.length-3;const Jt=ft[cr],fr=ft[cr+1],rn=qe===0?Jt:fr;rn>=fe&&rn<=ye&&Lt(yt,Jt,fr,ft[cr+2]),cr=yt.length-3,We&&cr>=3&&(yt[cr]!==yt[0]||yt[cr+1]!==yt[1])&&Lt(yt,yt[0],yt[1],yt[2]),yt.length&&de.push(yt)}function vt(ft){const de=[];return de.size=ft.size,de.start=ft.start,de.end=ft.end,de}function St(ft,de,fe,ye,qe,We){for(const Ct of ft)rt(Ct,de,fe,ye,qe,We,!1)}function Lt(ft,de,fe,ye){ft.push(de,fe,ye)}function Wt(ft,de,fe,ye,qe,We){const Ct=(We-de)/(ye-de);return Lt(ft,We,fe+(qe-fe)*Ct,1),Ct}function ar(ft,de,fe,ye,qe,We){const Ct=(We-fe)/(qe-fe);return Lt(ft,de+(ye-de)*Ct,We,1),Ct}function hr(ft,de){const fe=[];for(let ye=0;ye<ft.length;ye++){const qe=ft[ye],We=qe.type;let Ct;if(We==="Point"||We==="MultiPoint"||We==="LineString")Ct=Cr(qe.geometry,de);else if(We==="MultiLineString"||We==="Polygon"){Ct=[];for(const yt of qe.geometry)Ct.push(Cr(yt,de))}else if(We==="MultiPolygon"){Ct=[];for(const yt of qe.geometry){const at=[];for(const bt of yt)at.push(Cr(bt,de));Ct.push(at)}}fe.push(Je(qe.id,We,Ct,qe.tags))}return fe}function Cr(ft,de){const fe=[];fe.size=ft.size,ft.start!==void 0&&(fe.start=ft.start,fe.end=ft.end);for(let ye=0;ye<ft.length;ye+=3)fe.push(ft[ye]+de,ft[ye+1],ft[ye+2]);return fe}function He(ft,de){if(ft.transformed)return ft;const fe=1<<ft.z,ye=ft.x,qe=ft.y;for(const We of ft.features){const Ct=We.geometry,yt=We.type;if(We.geometry=[],yt===1)for(let at=0;at<Ct.length;at+=2)We.geometry.push(vr(Ct[at],Ct[at+1],de,fe,ye,qe));else for(let at=0;at<Ct.length;at++){const bt=[];for(let Ht=0;Ht<Ct[at].length;Ht+=2)bt.push(vr(Ct[at][Ht],Ct[at][Ht+1],de,fe,ye,qe));We.geometry.push(bt)}}return ft.transformed=!0,ft}function vr(ft,de,fe,ye,qe,We){return[Math.round(fe*(ft*ye-qe)),Math.round(fe*(de*ye-We))]}function Ur(ft,de,fe,ye,qe){const We=de===qe.maxZoom?0:qe.tolerance/((1<<de)*qe.extent),Ct={features:[],numPoints:0,numSimplified:0,numFeatures:ft.length,source:null,x:fe,y:ye,z:de,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0};for(const yt of ft)$r(Ct,yt,We,qe);return Ct}function $r(ft,de,fe,ye){const qe=de.geometry,We=de.type,Ct=[];if(ft.minX=Math.min(ft.minX,de.minX),ft.minY=Math.min(ft.minY,de.minY),ft.maxX=Math.max(ft.maxX,de.maxX),ft.maxY=Math.max(ft.maxY,de.maxY),We==="Point"||We==="MultiPoint")for(let yt=0;yt<qe.length;yt+=3)Ct.push(qe[yt],qe[yt+1]),ft.numPoints++,ft.numSimplified++;else if(We==="LineString")lr(Ct,qe,ft,fe,!1,!1);else if(We==="MultiLineString"||We==="Polygon")for(let yt=0;yt<qe.length;yt++)lr(Ct,qe[yt],ft,fe,We==="Polygon",yt===0);else if(We==="MultiPolygon")for(let yt=0;yt<qe.length;yt++){const at=qe[yt];for(let bt=0;bt<at.length;bt++)lr(Ct,at[bt],ft,fe,!0,bt===0)}if(Ct.length){let yt=de.tags||null;if(We==="LineString"&&ye.lineMetrics){yt={};for(const bt in de.tags)yt[bt]=de.tags[bt];yt.mapbox_clip_start=qe.start/qe.size,yt.mapbox_clip_end=qe.end/qe.size}const at={geometry:Ct,type:We==="Polygon"||We==="MultiPolygon"?3:We==="LineString"||We==="MultiLineString"?2:1,tags:yt};de.id!==null&&(at.id=de.id),ft.features.push(at)}}function lr(ft,de,fe,ye,qe,We){const Ct=ye*ye;if(ye>0&&de.size<(qe?Ct:ye))return void(fe.numPoints+=de.length/3);const yt=[];for(let at=0;at<de.length;at+=3)(ye===0||de[at+2]>Ct)&&(fe.numSimplified++,yt.push(de[at],de[at+1])),fe.numPoints++;qe&&(function(at,bt){let Ht=0;for(let Ft=0,cr=at.length,Jt=cr-2;Ft<cr;Jt=Ft,Ft+=2)Ht+=(at[Ft]-at[Jt])*(at[Ft+1]+at[Jt+1]);if(Ht>0===bt)for(let Ft=0,cr=at.length;Ft<cr/2;Ft+=2){const Jt=at[Ft],fr=at[Ft+1];at[Ft]=at[cr-2-Ft],at[Ft+1]=at[cr-1-Ft],at[cr-2-Ft]=Jt,at[cr-1-Ft]=fr}})(yt,We),ft.push(yt)}const Wr={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0};class Sr{constructor(de,fe){const ye=(fe=this.options=(function(We,Ct){for(const yt in Ct)We[yt]=Ct[yt];return We})(Object.create(Wr),fe)).debug;if(ye&&console.time("preprocess data"),fe.maxZoom<0||fe.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(fe.promoteId&&fe.generateId)throw new Error("promoteId and generateId cannot be used together.");let qe=(function(We,Ct){const yt=[];if(We.type==="FeatureCollection")for(let at=0;at<We.features.length;at++)je(yt,We.features[at],Ct,at);else je(yt,We.type==="Feature"?We:{geometry:We},Ct);return yt})(de,fe);this.tiles={},this.tileCoords=[],ye&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",fe.indexMaxZoom,fe.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),qe=(function(We,Ct){const yt=Ct.buffer/Ct.extent;let at=We;const bt=Ye(We,1,-1-yt,yt,0,-1,2,Ct),Ht=Ye(We,1,1-yt,2+yt,0,-1,2,Ct);return(bt||Ht)&&(at=Ye(We,1,-yt,1+yt,0,-1,2,Ct)||[],bt&&(at=hr(bt,1).concat(at)),Ht&&(at=at.concat(hr(Ht,-1)))),at})(qe,fe),qe.length&&this.splitTile(qe,0,0,0),ye&&(qe.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}splitTile(de,fe,ye,qe,We,Ct,yt){const at=[de,fe,ye,qe],bt=this.options,Ht=bt.debug;for(;at.length;){qe=at.pop(),ye=at.pop(),fe=at.pop(),de=at.pop();const Ft=1<<fe,cr=Or(fe,ye,qe);let Jt=this.tiles[cr];if(!Jt&&(Ht>1&&console.time("creation"),Jt=this.tiles[cr]=Ur(de,fe,ye,qe,bt),this.tileCoords.push({z:fe,x:ye,y:qe}),Ht)){Ht>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",fe,ye,qe,Jt.numFeatures,Jt.numPoints,Jt.numSimplified),console.timeEnd("creation"));const Tn=`z${fe}`;this.stats[Tn]=(this.stats[Tn]||0)+1,this.total++}if(Jt.source=de,We==null){if(fe===bt.indexMaxZoom||Jt.numPoints<=bt.indexMaxPoints)continue}else{if(fe===bt.maxZoom||fe===We)continue;if(We!=null){const Tn=We-fe;if(ye!==Ct>>Tn||qe!==yt>>Tn)continue}}if(Jt.source=null,de.length===0)continue;Ht>1&&console.time("clipping");const fr=.5*bt.buffer/bt.extent,rn=.5-fr,Tr=.5+fr,mt=1+fr;let tn=null,Nr=null,mr=null,Kr=null,Dn=Ye(de,Ft,ye-fr,ye+Tr,0,Jt.minX,Jt.maxX,bt),wr=Ye(de,Ft,ye+rn,ye+mt,0,Jt.minX,Jt.maxX,bt);de=null,Dn&&(tn=Ye(Dn,Ft,qe-fr,qe+Tr,1,Jt.minY,Jt.maxY,bt),Nr=Ye(Dn,Ft,qe+rn,qe+mt,1,Jt.minY,Jt.maxY,bt),Dn=null),wr&&(mr=Ye(wr,Ft,qe-fr,qe+Tr,1,Jt.minY,Jt.maxY,bt),Kr=Ye(wr,Ft,qe+rn,qe+mt,1,Jt.minY,Jt.maxY,bt),wr=null),Ht>1&&console.timeEnd("clipping"),at.push(tn||[],fe+1,2*ye,2*qe),at.push(Nr||[],fe+1,2*ye,2*qe+1),at.push(mr||[],fe+1,2*ye+1,2*qe),at.push(Kr||[],fe+1,2*ye+1,2*qe+1)}}getTile(de,fe,ye){de=+de,fe=+fe,ye=+ye;const qe=this.options,{extent:We,debug:Ct}=qe;if(de<0||de>24)return null;const yt=1<<de,at=Or(de,fe=fe+yt&yt-1,ye);if(this.tiles[at])return He(this.tiles[at],We);Ct>1&&console.log("drilling down to z%d-%d-%d",de,fe,ye);let bt,Ht=de,Ft=fe,cr=ye;for(;!bt&&Ht>0;)Ht--,Ft>>=1,cr>>=1,bt=this.tiles[Or(Ht,Ft,cr)];return bt&&bt.source?(Ct>1&&(console.log("found parent tile z%d-%d-%d",Ht,Ft,cr),console.time("drilling down")),this.splitTile(bt.source,Ht,Ft,cr,de,fe,ye),Ct>1&&console.timeEnd("drilling down"),this.tiles[at]?He(this.tiles[at],We):null):null}}function Or(ft,de,fe){return 32*((1<<ft)*fe+de)+ft}class Rr extends H{constructor(de,fe,ye,qe=On){super(de,fe,ye),this._dataUpdateable=new Map,this._createGeoJSONIndex=qe}loadVectorTile(de,fe){return m._(this,void 0,void 0,(function*(){const ye=de.tileID.canonical;if(!this._geoJSONIndex)throw new Error("Unable to parse the data into a cluster or geojson");const qe=this._geoJSONIndex.getTile(ye.z,ye.x,ye.y);return qe?W(new m.d3(qe.features,{version:2,extent:m.a5})):null}))}loadData(de){return m._(this,void 0,void 0,(function*(){var fe;(fe=this._pendingRequest)===null||fe===void 0||fe.abort();const ye=this._startPerformance(de);this._pendingRequest=new AbortController;try{(!this._pendingData||de.request||de.data||de.dataDiff)&&(this._pendingData=this.loadAndProcessGeoJSON(de,this._pendingRequest));const qe=yield this._pendingData;this._geoJSONIndex=this._createGeoJSONIndex(qe,de),this.loaded={};const We={};return this._finishPerformance(ye,de,We),We}catch(qe){if(delete this._pendingRequest,m.Z(qe))return{abandoned:!0};throw qe}}))}_startPerformance(de){var fe;if(!((fe=de?.request)===null||fe===void 0)&&fe.collectResourceTiming)return new m.c$(de.request)}_finishPerformance(de,fe,ye){if(!de)return;const qe=de.finish();qe&&(ye.resourceTiming={},ye.resourceTiming[fe.source]=JSON.parse(JSON.stringify(qe)))}getData(){return m._(this,void 0,void 0,(function*(){return this._pendingData}))}reloadTile(de){const fe=this.loaded;return fe&&fe[de.uid]?super.reloadTile(de):this.loadTile(de)}loadAndProcessGeoJSON(de,fe){return m._(this,void 0,void 0,(function*(){let ye;if(de.request?ye=yield this.loadGeoJSONFromUrl(de.request,de.promoteId,fe):de.data?ye=this._loadGeoJSONFromObject(de.data,de.promoteId):de.dataDiff&&(ye=this._loadGeoJSONFromDiff(de.dataDiff,de.promoteId,de.source)),delete this._pendingRequest,typeof ye!="object")throw new Error(`Input data given to '${de.source}' is not a valid GeoJSON object.`);return Ie(ye,!0),de.filter&&(ye=this._filterGeoJSON(ye,de.filter)),ye}))}loadGeoJSONFromUrl(de,fe,ye){return m._(this,void 0,void 0,(function*(){const qe=yield m.j(de,ye);return this._dataUpdateable=m.a7(qe.data,fe)?m.a8(qe.data,fe):void 0,qe.data}))}_loadGeoJSONFromObject(de,fe){return this._dataUpdateable=m.a7(de,fe)?m.a8(de,fe):void 0,de}_loadGeoJSONFromDiff(de,fe,ye){if(!this._dataUpdateable)throw new Error(`Cannot update existing geojson data in ${ye}`);m.a9(this._dataUpdateable,de,fe);const qe=Array.from(this._dataUpdateable.values());return this._toFeatureCollection(qe)}_filterGeoJSON(de,fe){const ye=m.d4(fe,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(ye.result==="error")throw new Error(ye.value.map((We=>`${We.key}: ${We.message}`)).join(", "));const qe=de.features.filter((We=>ye.value.evaluate({zoom:0},We)));return this._toFeatureCollection(qe)}_toFeatureCollection(de){return{type:"FeatureCollection",features:de}}removeSource(de){return m._(this,void 0,void 0,(function*(){this._pendingRequest&&this._pendingRequest.abort()}))}getClusterExpansionZoom(de){return this._geoJSONIndex.getClusterExpansionZoom(de.clusterId)}getClusterChildren(de){return this._geoJSONIndex.getChildren(de.clusterId)}getClusterLeaves(de){return this._geoJSONIndex.getLeaves(de.clusterId,de.limit,de.offset)}}function On(ft,de){return de.cluster?new xe((function({superclusterOptions:fe,clusterProperties:ye}){if(!ye||!fe)return fe;const qe={},We={},Ct={accumulated:null,zoom:0},yt={properties:null},at=Object.keys(ye);for(const bt of at){const[Ht,Ft]=ye[bt],cr=m.d4(Ft),Jt=m.d4(typeof Ht=="string"?[Ht,["accumulated"],["get",bt]]:Ht);qe[bt]=cr.value,We[bt]=Jt.value}return fe.map=bt=>{yt.properties=bt;const Ht={};for(const Ft of at)Ht[Ft]=qe[Ft].evaluate(Ct,yt);return Ht},fe.reduce=(bt,Ht)=>{yt.properties=Ht;for(const Ft of at)Ct.accumulated=bt[Ft],bt[Ft]=We[Ft].evaluate(Ct,yt)},fe})(de)).load(ft.features):(function(fe,ye){return new Sr(fe,ye)})(ft,de.geojsonVtOptions)}class hn{constructor(de){this.self=de,this.actor=new m.L(de),this.layerIndexes={},this.availableImages={},this.workerSources={},this.demWorkerSources={},this.externalWorkerSourceTypes={},this.globalStates=new Map,this.self.registerWorkerSource=(fe,ye)=>{if(this.externalWorkerSourceTypes[fe])throw new Error(`Worker source with name "${fe}" already registered.`);this.externalWorkerSourceTypes[fe]=ye},this.self.addProtocol=m.cK,this.self.removeProtocol=m.cL,this.self.registerRTLTextPlugin=fe=>{m.d5.setMethods(fe)},this.actor.registerMessageHandler("LDT",((fe,ye)=>this._getDEMWorkerSource(fe,ye.source).loadTile(ye))),this.actor.registerMessageHandler("RDT",((fe,ye)=>m._(this,void 0,void 0,(function*(){this._getDEMWorkerSource(fe,ye.source).removeTile(ye)})))),this.actor.registerMessageHandler("GCEZ",((fe,ye)=>m._(this,void 0,void 0,(function*(){return this._getWorkerSource(fe,ye.type,ye.source).getClusterExpansionZoom(ye)})))),this.actor.registerMessageHandler("GCC",((fe,ye)=>m._(this,void 0,void 0,(function*(){return this._getWorkerSource(fe,ye.type,ye.source).getClusterChildren(ye)})))),this.actor.registerMessageHandler("GCL",((fe,ye)=>m._(this,void 0,void 0,(function*(){return this._getWorkerSource(fe,ye.type,ye.source).getClusterLeaves(ye)})))),this.actor.registerMessageHandler("LD",((fe,ye)=>this._getWorkerSource(fe,ye.type,ye.source).loadData(ye))),this.actor.registerMessageHandler("GD",((fe,ye)=>this._getWorkerSource(fe,ye.type,ye.source).getData())),this.actor.registerMessageHandler("LT",((fe,ye)=>this._getWorkerSource(fe,ye.type,ye.source).loadTile(ye))),this.actor.registerMessageHandler("RT",((fe,ye)=>this._getWorkerSource(fe,ye.type,ye.source).reloadTile(ye))),this.actor.registerMessageHandler("AT",((fe,ye)=>this._getWorkerSource(fe,ye.type,ye.source).abortTile(ye))),this.actor.registerMessageHandler("RMT",((fe,ye)=>this._getWorkerSource(fe,ye.type,ye.source).removeTile(ye))),this.actor.registerMessageHandler("RS",((fe,ye)=>m._(this,void 0,void 0,(function*(){if(!this.workerSources[fe]||!this.workerSources[fe][ye.type]||!this.workerSources[fe][ye.type][ye.source])return;const qe=this.workerSources[fe][ye.type][ye.source];delete this.workerSources[fe][ye.type][ye.source],qe.removeSource!==void 0&&qe.removeSource(ye)})))),this.actor.registerMessageHandler("RM",(fe=>m._(this,void 0,void 0,(function*(){delete this.layerIndexes[fe],delete this.availableImages[fe],delete this.workerSources[fe],delete this.demWorkerSources[fe],this.globalStates.delete(fe)})))),this.actor.registerMessageHandler("SR",((fe,ye)=>m._(this,void 0,void 0,(function*(){this.referrer=ye})))),this.actor.registerMessageHandler("SRPS",((fe,ye)=>this._syncRTLPluginState(fe,ye))),this.actor.registerMessageHandler("IS",((fe,ye)=>m._(this,void 0,void 0,(function*(){this.self.importScripts(ye)})))),this.actor.registerMessageHandler("SI",((fe,ye)=>this._setImages(fe,ye))),this.actor.registerMessageHandler("UL",((fe,ye)=>m._(this,void 0,void 0,(function*(){this._getLayerIndex(fe).update(ye.layers,ye.removedIds,this._getGlobalState(fe))})))),this.actor.registerMessageHandler("UGS",((fe,ye)=>m._(this,void 0,void 0,(function*(){const qe=this._getGlobalState(fe);for(const We in ye)qe[We]=ye[We]})))),this.actor.registerMessageHandler("SL",((fe,ye)=>m._(this,void 0,void 0,(function*(){this._getLayerIndex(fe).replace(ye,this._getGlobalState(fe))}))))}_getGlobalState(de){let fe=this.globalStates.get(de);return fe||(fe={},this.globalStates.set(de,fe)),fe}_setImages(de,fe){return m._(this,void 0,void 0,(function*(){this.availableImages[de]=fe;for(const ye in this.workerSources[de]){const qe=this.workerSources[de][ye];for(const We in qe)qe[We].availableImages=fe}}))}_syncRTLPluginState(de,fe){return m._(this,void 0,void 0,(function*(){return yield m.d5.syncState(fe,this.self.importScripts)}))}_getAvailableImages(de){let fe=this.availableImages[de];return fe||(fe=[]),fe}_getLayerIndex(de){let fe=this.layerIndexes[de];return fe||(fe=this.layerIndexes[de]=new o),fe}_getWorkerSource(de,fe,ye){if(this.workerSources[de]||(this.workerSources[de]={}),this.workerSources[de][fe]||(this.workerSources[de][fe]={}),!this.workerSources[de][fe][ye]){const qe={sendAsync:(We,Ct)=>(We.targetMapId=de,this.actor.sendAsync(We,Ct))};switch(fe){case"vector":this.workerSources[de][fe][ye]=new H(qe,this._getLayerIndex(de),this._getAvailableImages(de));break;case"geojson":this.workerSources[de][fe][ye]=new Rr(qe,this._getLayerIndex(de),this._getAvailableImages(de));break;default:this.workerSources[de][fe][ye]=new this.externalWorkerSourceTypes[fe](qe,this._getLayerIndex(de),this._getAvailableImages(de))}}return this.workerSources[de][fe][ye]}_getDEMWorkerSource(de,fe){return this.demWorkerSources[de]||(this.demWorkerSources[de]={}),this.demWorkerSources[de][fe]||(this.demWorkerSources[de][fe]=new Z),this.demWorkerSources[de][fe]}}return m.i(self)&&(self.worker=new hn(self)),hn})),h("index",["exports","./shared"],(function(m,o){var x="5.14.0";function E(){var w=new o.A(4);return o.A!=Float32Array&&(w[1]=0,w[2]=0),w[0]=1,w[3]=1,w}let I,D,O;const P={frame(w,r,c){const f=requestAnimationFrame((b=>{y(),r(b)})),{unsubscribe:y}=o.s(w.signal,"abort",(()=>{y(),cancelAnimationFrame(f),c(new o.a(w.signal.reason))}),!1)},frameAsync(w){return new Promise(((r,c)=>{this.frame(w,r,c)}))},getImageData(w,r=0){return this.getImageCanvasContext(w).getImageData(-r,-r,w.width+2*r,w.height+2*r)},getImageCanvasContext(w){const r=window.document.createElement("canvas"),c=r.getContext("2d",{willReadFrequently:!0});if(!c)throw new Error("failed to create canvas 2d context");return r.width=w.width,r.height=w.height,c.drawImage(w,0,0,w.width,w.height),c},resolveURL:w=>(I||(I=document.createElement("a")),I.href=w,I.href),hardwareConcurrency:typeof navigator<"u"&&navigator.hardwareConcurrency||4,get prefersReducedMotion(){return O!==void 0?O:!!matchMedia&&(D==null&&(D=matchMedia("(prefers-reduced-motion: reduce)")),D.matches)},set prefersReducedMotion(w){O=w}},W=new class{constructor(){this._realTime=typeof performance<"u"&&performance&&performance.now?performance.now.bind(performance):Date.now.bind(Date),this._frozenAt=null}getCurrentTime(){return this._frozenAt!==null?this._frozenAt:this._realTime()}setNow(w){this._frozenAt=w}restoreNow(){this._frozenAt=null}isFrozen(){return this._frozenAt!==null}};function z(){return W.getCurrentTime()}class H{static testProp(r){if(!H.docStyle)return r[0];for(let c=0;c<r.length;c++)if(r[c]in H.docStyle)return r[c];return r[0]}static create(r,c,f){const y=window.document.createElement(r);return c!==void 0&&(y.className=c),f&&f.appendChild(y),y}static createNS(r,c){return window.document.createElementNS(r,c)}static disableDrag(){H.docStyle&&H.selectProp&&(H.userSelect=H.docStyle[H.selectProp],H.docStyle[H.selectProp]="none")}static enableDrag(){H.docStyle&&H.selectProp&&(H.docStyle[H.selectProp]=H.userSelect)}static setTransform(r,c){r.style[H.transformProp]=c}static addEventListener(r,c,f,y={}){r.addEventListener(c,f,"passive"in y?y:y.capture)}static removeEventListener(r,c,f,y={}){r.removeEventListener(c,f,"passive"in y?y:y.capture)}static suppressClickInternal(r){r.preventDefault(),r.stopPropagation(),window.removeEventListener("click",H.suppressClickInternal,!0)}static suppressClick(){window.addEventListener("click",H.suppressClickInternal,!0),window.setTimeout((()=>{window.removeEventListener("click",H.suppressClickInternal,!0)}),0)}static getScale(r){const c=r.getBoundingClientRect();return{x:c.width/r.offsetWidth||1,y:c.height/r.offsetHeight||1,boundingClientRect:c}}static getPoint(r,c,f){const y=c.boundingClientRect;return new o.P((f.clientX-y.left)/c.x-r.clientLeft,(f.clientY-y.top)/c.y-r.clientTop)}static mousePos(r,c){const f=H.getScale(r);return H.getPoint(r,f,c)}static touchPos(r,c){const f=[],y=H.getScale(r);for(let b=0;b<c.length;b++)f.push(H.getPoint(r,y,c[b]));return f}static mouseButton(r){return r.button}static remove(r){r.parentNode&&r.parentNode.removeChild(r)}static sanitize(r){const c=new DOMParser().parseFromString(r,"text/html").body||document.createElement("body"),f=c.querySelectorAll("script");for(const y of f)y.remove();return H.clean(c),c.innerHTML}static isPossiblyDangerous(r,c){const f=c.replace(/\s+/g,"").toLowerCase();return!(!["src","href","xlink:href"].includes(r)||!f.includes("javascript:")&&!f.includes("data:"))||!!r.startsWith("on")||void 0}static clean(r){const c=r.children;for(const f of c)H.removeAttributes(f),H.clean(f)}static removeAttributes(r){for(const{name:c,value:f}of r.attributes)H.isPossiblyDangerous(c,f)&&r.removeAttribute(c)}}H.docStyle=typeof window<"u"&&window.document&&window.document.documentElement.style,H.selectProp=H.testProp(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),H.transformProp=H.testProp(["transform","WebkitTransform"]);const Z={supported:!1,testSupport:function(w){!he&&ce&&(Ie?Ve(w):ie=w)}};let ie,ce,he=!1,Ie=!1;function Ve(w){const r=w.createTexture();w.bindTexture(w.TEXTURE_2D,r);try{if(w.texImage2D(w.TEXTURE_2D,0,w.RGBA,w.RGBA,w.UNSIGNED_BYTE,ce),w.isContextLost())return;Z.supported=!0}catch{}w.deleteTexture(r),he=!0}var Me;typeof document<"u"&&(ce=document.createElement("img"),ce.onload=()=>{ie&&Ve(ie),ie=null,Ie=!0},ce.onerror=()=>{he=!0,ie=null},ce.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA="),(function(w){let r,c,f,y;w.resetRequestQueue=()=>{r=[],c=0,f=0,y={}},w.addThrottleControl=N=>{const j=f++;return y[j]=N,j},w.removeThrottleControl=N=>{delete y[N],S()},w.getImage=(N,j,q=!0)=>new Promise(((ne,ee)=>{Z.supported&&(N.headers||(N.headers={}),N.headers.accept="image/webp,*/*"),o.e(N,{type:"image"}),r.push({abortController:j,requestParameters:N,supportImageRefresh:q,state:"queued",onError:Ae=>{ee(Ae)},onSuccess:Ae=>{ne(Ae)}}),S()}));const b=N=>o._(this,void 0,void 0,(function*(){N.state="running";const{requestParameters:j,supportImageRefresh:q,onError:ne,onSuccess:ee,abortController:Ae}=N,ve=q===!1&&!o.i(self)&&!o.g(j.url)&&(!j.headers||Object.keys(j.headers).reduce(((Qe,Ge)=>Qe&&Ge==="accept"),!0));c++;const ke=ve?M(j,Ae):o.m(j,Ae);try{const Qe=yield ke;delete N.abortController,N.state="completed",Qe.data instanceof HTMLImageElement||o.b(Qe.data)?ee(Qe):Qe.data&&ee({data:yield(Oe=Qe.data,typeof createImageBitmap=="function"?o.f(Oe):o.h(Oe)),cacheControl:Qe.cacheControl,expires:Qe.expires})}catch(Qe){delete N.abortController,ne(Qe)}finally{c--,S()}var Oe})),S=()=>{const N=(()=>{for(const j of Object.keys(y))if(y[j]())return!0;return!1})()?o.c.MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:o.c.MAX_PARALLEL_IMAGE_REQUESTS;for(let j=c;j<N&&r.length>0;j++){const q=r.shift();q.abortController.signal.aborted?j--:b(q)}},M=(N,j)=>new Promise(((q,ne)=>{const ee=new Image,Ae=N.url,ve=N.credentials;ve&&ve==="include"?ee.crossOrigin="use-credentials":(ve&&ve==="same-origin"||!o.d(Ae))&&(ee.crossOrigin="anonymous"),j.signal.addEventListener("abort",(()=>{ee.src="",ne(new o.a(j.signal.reason))})),ee.fetchPriority="high",ee.onload=()=>{ee.onerror=ee.onload=null,q({data:ee})},ee.onerror=()=>{ee.onerror=ee.onload=null,j.signal.aborted||ne(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))},ee.src=Ae}))})(Me||(Me={})),Me.resetRequestQueue();class Pe{constructor(r){this._transformRequestFn=r??null}transformRequest(r,c){return this._transformRequestFn&&this._transformRequestFn(r,c)||{url:r}}setTransformRequest(r){this._transformRequestFn=r}}function xe(w){const r=[];if(typeof w=="string")r.push({id:"default",url:w});else if(w&&w.length>0){const c=[];for(const{id:f,url:y}of w){const b=`${f}${y}`;c.indexOf(b)===-1&&(c.push(b),r.push({id:f,url:y}))}}return r}function nt(w,r,c){try{const f=new URL(w);return f.pathname+=`${r}${c}`,f.toString()}catch{throw new Error(`Invalid sprite URL "${w}", must be absolute. Modify style specification directly or use TransformStyleFunction to correct the issue dynamically`)}}function pe(w){const{userImage:r}=w;return!!(r&&r.render&&r.render())&&(w.data.replace(new Uint8Array(r.data.buffer)),!0)}class _e extends o.E{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new o.R({width:1,height:1}),this.dirty=!0}destroy(){this.atlasTexture&&(this.atlasTexture.destroy(),this.atlasTexture=null);for(const r of Object.keys(this.images))this.removeImage(r);this.patterns={},this.atlasImage=new o.R({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(r){if(this.loaded!==r&&(this.loaded=r,r)){for(const{ids:c,promiseResolve:f}of this.requestors)f(this._getImagesForIds(c));this.requestors=[]}}getImage(r){const c=this.images[r];if(c&&!c.data&&c.spriteData){const f=c.spriteData;c.data=new o.R({width:f.width,height:f.height},f.context.getImageData(f.x,f.y,f.width,f.height).data),c.spriteData=null}return c}addImage(r,c){if(this.images[r])throw new Error(`Image id ${r} already exist, use updateImage instead`);this._validate(r,c)&&(this.images[r]=c)}_validate(r,c){let f=!0;const y=c.data||c.spriteData;return this._validateStretch(c.stretchX,y&&y.width)||(this.fire(new o.k(new Error(`Image "${r}" has invalid "stretchX" value`))),f=!1),this._validateStretch(c.stretchY,y&&y.height)||(this.fire(new o.k(new Error(`Image "${r}" has invalid "stretchY" value`))),f=!1),this._validateContent(c.content,c)||(this.fire(new o.k(new Error(`Image "${r}" has invalid "content" value`))),f=!1),f}_validateStretch(r,c){if(!r)return!0;let f=0;for(const y of r){if(y[0]<f||y[1]<y[0]||c<y[1])return!1;f=y[1]}return!0}_validateContent(r,c){if(!r)return!0;if(r.length!==4)return!1;const f=c.spriteData,y=f&&f.width||c.data.width,b=f&&f.height||c.data.height;return!(r[0]<0||y<r[0]||r[1]<0||b<r[1]||r[2]<0||y<r[2]||r[3]<0||b<r[3]||r[2]<r[0]||r[3]<r[1])}updateImage(r,c,f=!0){const y=this.getImage(r);if(f&&(y.data.width!==c.data.width||y.data.height!==c.data.height))throw new Error(`size mismatch between old image (${y.data.width}x${y.data.height}) and new image (${c.data.width}x${c.data.height}).`);c.version=y.version+1,this.images[r]=c,this.updatedImages[r]=!0}removeImage(r){const c=this.images[r];delete this.images[r],delete this.patterns[r],c.userImage&&c.userImage.onRemove&&c.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(r){return new Promise(((c,f)=>{let y=!0;if(!this.isLoaded())for(const b of r)this.images[b]||(y=!1);this.isLoaded()||y?c(this._getImagesForIds(r)):this.requestors.push({ids:r,promiseResolve:c})}))}_getImagesForIds(r){const c={};for(const f of r){let y=this.getImage(f);y||(this.fire(new o.l("styleimagemissing",{id:f})),y=this.getImage(f)),y?c[f]={data:y.data.clone(),pixelRatio:y.pixelRatio,sdf:y.sdf,version:y.version,stretchX:y.stretchX,stretchY:y.stretchY,content:y.content,textFitWidth:y.textFitWidth,textFitHeight:y.textFitHeight,hasRenderCallback:!!(y.userImage&&y.userImage.render)}:o.w(`Image "${f}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}return c}getPixelSize(){const{width:r,height:c}=this.atlasImage;return{width:r,height:c}}getPattern(r){const c=this.patterns[r],f=this.getImage(r);if(!f)return null;if(c&&c.position.version===f.version)return c.position;if(c)c.position.version=f.version;else{const y={w:f.data.width+2,h:f.data.height+2,x:0,y:0},b=new o.I(y,f);this.patterns[r]={bin:y,position:b}}return this._updatePatternAtlas(),this.patterns[r].position}bind(r){const c=r.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new o.T(r,this.atlasImage,c.RGBA),this.atlasTexture.bind(c.LINEAR,c.CLAMP_TO_EDGE)}_updatePatternAtlas(){const r=[];for(const b in this.patterns)r.push(this.patterns[b].bin);const{w:c,h:f}=o.p(r),y=this.atlasImage;y.resize({width:c||1,height:f||1});for(const b in this.patterns){const{bin:S}=this.patterns[b],M=S.x+1,N=S.y+1,j=this.getImage(b).data,q=j.width,ne=j.height;o.R.copy(j,y,{x:0,y:0},{x:M,y:N},{width:q,height:ne}),o.R.copy(j,y,{x:0,y:ne-1},{x:M,y:N-1},{width:q,height:1}),o.R.copy(j,y,{x:0,y:0},{x:M,y:N+ne},{width:q,height:1}),o.R.copy(j,y,{x:q-1,y:0},{x:M-1,y:N},{width:1,height:ne}),o.R.copy(j,y,{x:0,y:0},{x:M+q,y:N},{width:1,height:ne})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(r){for(const c of r){if(this.callbackDispatchedThisFrame[c])continue;this.callbackDispatchedThisFrame[c]=!0;const f=this.getImage(c);f||o.w(`Image with ID: "${c}" was not found`),pe(f)&&this.updateImage(c,f)}}cloneImages(){const r={};for(const c in this.images){const f=this.images[c];r[c]=Object.assign(Object.assign({},f),{data:f.data?f.data.clone():null})}return r}}const Ue=1e20;function Fe(w,r,c,f,y,b,S,M,N){for(let j=r;j<r+f;j++)pt(w,c*b+j,b,y,S,M,N);for(let j=c;j<c+y;j++)pt(w,j*b+r,1,f,S,M,N)}function pt(w,r,c,f,y,b,S){b[0]=0,S[0]=-Ue,S[1]=Ue,y[0]=w[r];for(let M=1,N=0,j=0;M<f;M++){y[M]=w[r+M*c];const q=M*M;do{const ne=b[N];j=(y[M]-y[ne]+q-ne*ne)/(M-ne)/2}while(j<=S[N]&&--N>-1);N++,b[N]=M,S[N]=j,S[N+1]=Ue}for(let M=0,N=0;M<f;M++){for(;S[N+1]<M;)N++;const j=b[N],q=M-j;w[r+M*c]=y[j]+q*q}}const ht=o.v.layout_symbol["text-font"].default.join(",");class Je{constructor(r,c,f){this.requestManager=r,this.localIdeographFontFamily=c,this.entries={},this.lang=f}setURL(r){this.url=r}getGlyphs(r){return o._(this,void 0,void 0,(function*(){const c=[];for(const b in r)for(const S of r[b])c.push(this._getAndCacheGlyphsPromise(b,S));const f=yield Promise.all(c),y={};for(const{stack:b,id:S,glyph:M}of f)y[b]||(y[b]={}),y[b][S]=M&&{id:M.id,bitmap:M.bitmap.clone(),metrics:M.metrics};return y}))}_getAndCacheGlyphsPromise(r,c){return o._(this,void 0,void 0,(function*(){let f=this.entries[r];f||(f=this.entries[r]={glyphs:{},requests:{},ranges:{}});let y=f.glyphs[c];return y!==void 0?{stack:r,id:c,glyph:y}:!this.url||this._charUsesLocalIdeographFontFamily(c)?(y=f.glyphs[c]=this._drawGlyph(f,r,c),{stack:r,id:c,glyph:y}):yield this._downloadAndCacheRangePromise(r,c)}))}_downloadAndCacheRangePromise(r,c){return o._(this,void 0,void 0,(function*(){const f=this.entries[r],y=Math.floor(c/256);if(f.ranges[y])return{stack:r,id:c,glyph:null};if(!f.requests[y]){const b=Je.loadGlyphRange(r,y,this.url,this.requestManager);f.requests[y]=b}try{const b=yield f.requests[y];for(const S in b)f.glyphs[+S]=b[+S];return f.ranges[y]=!0,{stack:r,id:c,glyph:b[c]||null}}catch(b){const S=f.glyphs[c]=this._drawGlyph(f,r,c);return this._warnOnMissingGlyphRange(S,y,c,b),{stack:r,id:c,glyph:S}}}))}_warnOnMissingGlyphRange(r,c,f,y){const b=256*c,S=b+255,M=f.toString(16).padStart(4,"0").toUpperCase();o.w(`Unable to load glyph range ${c}, ${b}-${S}. Rendering codepoint U+${M} locally instead. ${y}`)}_charUsesLocalIdeographFontFamily(r){return!!this.localIdeographFontFamily&&o.q(r)}_drawGlyph(r,c,f){const y=c===ht&&this.localIdeographFontFamily!==""&&this._charUsesLocalIdeographFontFamily(f),b=y?"ideographTinySDF":"tinySDF";r[b]||(r[b]=this._createTinySDF(y?this.localIdeographFontFamily:c));const S=r[b].draw(String.fromCodePoint(f));return{id:f,bitmap:new o.r({width:S.width||60,height:S.height||60},S.data),metrics:{width:S.glyphWidth/2||24,height:S.glyphHeight/2||24,left:S.glyphLeft/2+.5||0,top:S.glyphTop/2-27.5||-8,advance:S.glyphAdvance/2||24,isDoubleResolution:!0}}}_createTinySDF(r){const c=r?r.split(","):[];c.push("sans-serif");const f=c.map((y=>/[-\w]+/.test(y)?y:`'${CSS.escape(y)}'`)).join(",");return new Je.TinySDF({fontSize:48,buffer:6,radius:16,cutoff:.25,fontFamily:f,fontWeight:this._fontWeight(c[0]),fontStyle:this._fontStyle(c[0]),lang:this.lang})}_fontStyle(r){return/italic/i.test(r)?"italic":/oblique/i.test(r)?"oblique":"normal"}_fontWeight(r){const c={thin:100,hairline:100,"extra light":200,"ultra light":200,light:300,normal:400,regular:400,medium:500,semibold:600,demibold:600,bold:700,"extra bold":800,"ultra bold":800,black:900,heavy:900,"extra black":950,"ultra black":950};let f;for(const[y,b]of Object.entries(c))new RegExp(`\\b${y}\\b`,"i").test(r)&&(f=`${b}`);return f}destroy(){for(const r in this.entries){const c=this.entries[r];c.tinySDF&&(c.tinySDF=null),c.ideographTinySDF&&(c.ideographTinySDF=null),c.glyphs={},c.requests={},c.ranges={}}this.entries={}}}Je.loadGlyphRange=function(w,r,c,f){return o._(this,void 0,void 0,(function*(){const y=256*r,b=y+255,S=f.transformRequest(c.replace("{fontstack}",w).replace("{range}",`${y}-${b}`),"Glyphs"),M=yield o.n(S,new AbortController);if(!M||!M.data)throw new Error(`Could not load glyph range. range: ${r}, ${y}-${b}`);const N={};for(const j of o.o(M.data))N[j.id]=j;return N}))},Je.TinySDF=class{constructor({fontSize:w=24,buffer:r=3,radius:c=8,cutoff:f=.25,fontFamily:y="sans-serif",fontWeight:b="normal",fontStyle:S="normal",lang:M=null}={}){this.buffer=r,this.cutoff=f,this.radius=c,this.lang=M;const N=this.size=w+4*r,j=this._createCanvas(N),q=this.ctx=j.getContext("2d",{willReadFrequently:!0});q.font=`${S} ${b} ${w}px ${y}`,q.textBaseline="alphabetic",q.textAlign="left",q.fillStyle="black",this.gridOuter=new Float64Array(N*N),this.gridInner=new Float64Array(N*N),this.f=new Float64Array(N),this.z=new Float64Array(N+1),this.v=new Uint16Array(N)}_createCanvas(w){const r=document.createElement("canvas");return r.width=r.height=w,r}draw(w){const{width:r,actualBoundingBoxAscent:c,actualBoundingBoxDescent:f,actualBoundingBoxLeft:y,actualBoundingBoxRight:b}=this.ctx.measureText(w),S=Math.ceil(c),M=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(b-y))),N=Math.min(this.size-this.buffer,S+Math.ceil(f)),j=M+2*this.buffer,q=N+2*this.buffer,ne=Math.max(j*q,0),ee=new Uint8ClampedArray(ne),Ae={data:ee,width:j,height:q,glyphWidth:M,glyphHeight:N,glyphTop:S,glyphLeft:0,glyphAdvance:r};if(M===0||N===0)return Ae;const{ctx:ve,buffer:ke,gridInner:Oe,gridOuter:Qe}=this;this.lang&&(ve.lang=this.lang),ve.clearRect(ke,ke,M,N),ve.fillText(w,ke,ke+S);const Ge=ve.getImageData(ke,ke,M,N);Qe.fill(Ue,0,ne),Oe.fill(0,0,ne);for(let ot=0;ot<N;ot++)for(let Ze=0;Ze<M;Ze++){const ct=Ge.data[4*(ot*M+Ze)+3]/255;if(ct===0)continue;const dt=(ot+ke)*j+Ze+ke;if(ct===1)Qe[dt]=0,Oe[dt]=Ue;else{const it=.5-ct;Qe[dt]=it>0?it*it:0,Oe[dt]=it<0?it*it:0}}Fe(Qe,0,0,j,q,j,this.f,this.v,this.z),Fe(Oe,ke,ke,M,N,j,this.f,this.v,this.z);for(let ot=0;ot<ne;ot++){const Ze=Math.sqrt(Qe[ot])-Math.sqrt(Oe[ot]);ee[ot]=Math.round(255-255*(Ze/this.radius+this.cutoff))}return Ae}};class ze{constructor(){this.specification=o.u.light.position}possiblyEvaluate(r,c){return o.F(r.expression.evaluate(c))}interpolate(r,c,f){return{x:o.G.number(r.x,c.x,f),y:o.G.number(r.y,c.y,f),z:o.G.number(r.z,c.z,f)}}}let je;class xt extends o.E{constructor(r){super(),je=je||new o.t({anchor:new o.D(o.u.light.anchor),position:new ze,color:new o.D(o.u.light.color),intensity:new o.D(o.u.light.intensity)}),this._transitionable=new o.x(je,void 0),this.setLight(r),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(r,c={}){if(!this._validate(o.y,r,c))for(const f in r){const y=r[f];f.endsWith(o.z)?this._transitionable.setTransition(f.slice(0,-o.z.length),y):this._transitionable.setValue(f,y)}}updateTransitions(r){this._transitioning=this._transitionable.transitioned(r,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(r){this.properties=this._transitioning.possiblyEvaluate(r)}_validate(r,c,f){return(!f||f.validate!==!1)&&o.B(this,r.call(o.C,{value:c,style:{glyphs:!0,sprite:!0},styleSpec:o.u}))}}const Re=new o.t({"sky-color":new o.D(o.u.sky["sky-color"]),"horizon-color":new o.D(o.u.sky["horizon-color"]),"fog-color":new o.D(o.u.sky["fog-color"]),"fog-ground-blend":new o.D(o.u.sky["fog-ground-blend"]),"horizon-fog-blend":new o.D(o.u.sky["horizon-fog-blend"]),"sky-horizon-blend":new o.D(o.u.sky["sky-horizon-blend"]),"atmosphere-blend":new o.D(o.u.sky["atmosphere-blend"])});class oe extends o.E{constructor(r){super(),this._transitionable=new o.x(Re,void 0),this.setSky(r),this._transitioning=this._transitionable.untransitioned(),this.recalculate(new o.H(0))}setSky(r,c={}){if(!this._validate(o.J,r,c)){r||(r={"sky-color":"transparent","horizon-color":"transparent","fog-color":"transparent","fog-ground-blend":1,"atmosphere-blend":0});for(const f in r){const y=r[f];f.endsWith(o.z)?this._transitionable.setTransition(f.slice(0,-o.z.length),y):this._transitionable.setValue(f,y)}}}getSky(){return this._transitionable.serialize()}updateTransitions(r){this._transitioning=this._transitionable.transitioned(r,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(r){this.properties=this._transitioning.possiblyEvaluate(r)}_validate(r,c,f={}){return f?.validate!==!1&&o.B(this,r.call(o.C,o.e({value:c,style:{glyphs:!0,sprite:!0},styleSpec:o.u})))}calculateFogBlendOpacity(r){return r<60?0:r<70?(r-60)/10:1}}class Se{constructor(r,c){this.width=r,this.height=c,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}}getDash(r,c){const f=r.join(",")+String(c);return this.dashEntry[f]||(this.dashEntry[f]=this.addDash(r,c)),this.dashEntry[f]}getDashRanges(r,c,f){const y=[];let b=r.length%2==1?-r[r.length-1]*f:0,S=r[0]*f,M=!0;y.push({left:b,right:S,isDash:M,zeroLength:r[0]===0});let N=r[0];for(let j=1;j<r.length;j++){M=!M;const q=r[j];b=N*f,N+=q,S=N*f,y.push({left:b,right:S,isDash:M,zeroLength:q===0})}return y}addRoundDash(r,c,f){const y=c/2;for(let b=-f;b<=f;b++){const S=this.width*(this.nextRow+f+b);let M=0,N=r[M];for(let j=0;j<this.width;j++){j/N.right>1&&(N=r[++M]);const q=Math.abs(j-N.left),ne=Math.abs(j-N.right),ee=Math.min(q,ne);let Ae;const ve=b/f*(y+1);if(N.isDash){const ke=y-Math.abs(ve);Ae=Math.sqrt(ee*ee+ke*ke)}else Ae=y-Math.sqrt(ee*ee+ve*ve);this.data[S+j]=Math.max(0,Math.min(255,Ae+128))}}}addRegularDash(r){for(let M=r.length-1;M>=0;--M){const N=r[M],j=r[M+1];N.zeroLength?r.splice(M,1):j&&j.isDash===N.isDash&&(j.left=N.left,r.splice(M,1))}const c=r[0],f=r[r.length-1];c.isDash===f.isDash&&(c.left=f.left-this.width,f.right=c.right+this.width);const y=this.width*this.nextRow;let b=0,S=r[b];for(let M=0;M<this.width;M++){M/S.right>1&&(S=r[++b]);const N=Math.abs(M-S.left),j=Math.abs(M-S.right),q=Math.min(N,j);this.data[y+M]=Math.max(0,Math.min(255,(S.isDash?q:-q)+128))}}addDash(r,c){const f=c?7:0,y=2*f+1;if(this.nextRow+y>this.height)return o.w("LineAtlas out of space"),null;let b=0;for(let M=0;M<r.length;M++)b+=r[M];if(b!==0){const M=this.width/b,N=this.getDashRanges(r,this.width,M);c?this.addRoundDash(N,M,f):this.addRegularDash(N)}const S={y:this.nextRow+f,height:2*f,width:b};return this.nextRow+=y,this.dirty=!0,S}bind(r){const c=r.gl;this.texture?(c.bindTexture(c.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,c.texSubImage2D(c.TEXTURE_2D,0,0,0,this.width,this.height,c.ALPHA,c.UNSIGNED_BYTE,this.data))):(this.texture=c.createTexture(),c.bindTexture(c.TEXTURE_2D,this.texture),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_S,c.REPEAT),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_T,c.REPEAT),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MIN_FILTER,c.LINEAR),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MAG_FILTER,c.LINEAR),c.texImage2D(c.TEXTURE_2D,0,c.ALPHA,this.width,this.height,0,c.ALPHA,c.UNSIGNED_BYTE,this.data))}}const Ne="maplibre_preloaded_worker_pool";class Ye{constructor(){this.active={}}acquire(r){if(!this.workers)for(this.workers=[];this.workers.length<Ye.workerCount;)this.workers.push(new Worker(o.c.WORKER_URL));return this.active[r]=!0,this.workers.slice()}release(r){delete this.active[r],this.numActive()===0&&(this.workers.forEach((c=>{c.terminate()})),this.workers=null)}isPreloaded(){return!!this.active[Ne]}numActive(){return Object.keys(this.active).length}}const lt=Math.floor(P.hardwareConcurrency/2);let rt,vt;function St(){return rt||(rt=new Ye),rt}Ye.workerCount=o.K(globalThis)?Math.max(Math.min(lt,3),1):1;class Lt{constructor(r,c){this.workerPool=r,this.actors=[],this.currentActor=0,this.id=c;const f=this.workerPool.acquire(c);for(let y=0;y<f.length;y++){const b=new o.L(f[y],c);b.name=`Worker ${y}`,this.actors.push(b)}if(!this.actors.length)throw new Error("No actors found")}broadcast(r,c){const f=[];for(const y of this.actors)f.push(y.sendAsync({type:r,data:c}));return Promise.all(f)}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(r=!0){this.actors.forEach((c=>{c.remove()})),this.actors=[],r&&this.workerPool.release(this.id)}registerMessageHandler(r,c){for(const f of this.actors)f.registerMessageHandler(r,c)}unregisterMessageHandler(r){for(const c of this.actors)c.unregisterMessageHandler(r)}}function Wt(){return vt||(vt=new Lt(St(),o.M),vt.registerMessageHandler("GR",((w,r,c)=>o.m(r,c)))),vt}function ar(w,r){const c=o.N();return o.O(c,c,[1,1,0]),o.Q(c,c,[.5*w.width,.5*w.height,1]),w.calculatePosMatrix?o.S(c,c,w.calculatePosMatrix(r.toUnwrapped())):c}function hr(w,r,c,f,y,b,S){var M;const N=(function(ee,Ae,ve){if(ee)for(const ke of ee){const Oe=Ae[ke];if(Oe&&Oe.source===ve&&Oe.type==="fill-extrusion")return!0}else for(const ke in Ae){const Oe=Ae[ke];if(Oe.source===ve&&Oe.type==="fill-extrusion")return!0}return!1})((M=y?.layers)!==null&&M!==void 0?M:null,r,w.id),j=b.maxPitchScaleFactor(),q=w.tilesIn(f,j,N);q.sort(Cr);const ne=[];for(const ee of q)ne.push({wrappedTileID:ee.tileID.wrapped().key,queryResults:ee.tile.queryRenderedFeatures(r,c,w.getState(),ee.queryGeometry,ee.cameraQueryGeometry,ee.scale,y,b,j,ar(b,ee.tileID),S?(Ae,ve)=>S(ee.tileID,Ae,ve):void 0)});return(function(ee,Ae){for(const ve in ee)for(const ke of ee[ve])He(ke,Ae);return ee})((function(ee){const Ae={},ve={};for(const ke of ee){const Oe=ke.queryResults,Qe=ke.wrappedTileID,Ge=ve[Qe]=ve[Qe]||{};for(const ot in Oe){const Ze=Oe[ot],ct=Ge[ot]=Ge[ot]||{},dt=Ae[ot]=Ae[ot]||[];for(const it of Ze)ct[it.featureIndex]||(ct[it.featureIndex]=!0,dt.push(it))}}return Ae})(ne),w)}function Cr(w,r){const c=w.tileID,f=r.tileID;return c.overscaledZ-f.overscaledZ||c.canonical.y-f.canonical.y||c.wrap-f.wrap||c.canonical.x-f.canonical.x}function He(w,r){const c=w.feature,f=r.getFeatureState(c.layer["source-layer"],c.id);c.source=c.layer.source,c.layer["source-layer"]&&(c.sourceLayer=c.layer["source-layer"]),c.state=f}function vr(w,r,c){return o._(this,void 0,void 0,(function*(){let f=w;if(w.url?f=(yield o.j(r.transformRequest(w.url,"Source"),c)).data:yield P.frameAsync(c),!f)return null;const y=o.U(o.e(f,w),["tiles","minzoom","maxzoom","attribution","bounds","scheme","tileSize","encoding"]);return"vector_layers"in f&&f.vector_layers&&(y.vectorLayerIds=f.vector_layers.map((b=>b.id))),y}))}class Ur{constructor(r,c){r&&(c?this.setSouthWest(r).setNorthEast(c):Array.isArray(r)&&(r.length===4?this.setSouthWest([r[0],r[1]]).setNorthEast([r[2],r[3]]):this.setSouthWest(r[0]).setNorthEast(r[1])))}setNorthEast(r){return this._ne=r instanceof o.V?new o.V(r.lng,r.lat):o.V.convert(r),this}setSouthWest(r){return this._sw=r instanceof o.V?new o.V(r.lng,r.lat):o.V.convert(r),this}extend(r){const c=this._sw,f=this._ne;let y,b;if(r instanceof o.V)y=r,b=r;else{if(!(r instanceof Ur))return Array.isArray(r)?r.length===4||r.every(Array.isArray)?this.extend(Ur.convert(r)):this.extend(o.V.convert(r)):r&&("lng"in r||"lon"in r)&&"lat"in r?this.extend(o.V.convert(r)):this;if(y=r._sw,b=r._ne,!y||!b)return this}return c||f?(c.lng=Math.min(y.lng,c.lng),c.lat=Math.min(y.lat,c.lat),f.lng=Math.max(b.lng,f.lng),f.lat=Math.max(b.lat,f.lat)):(this._sw=new o.V(y.lng,y.lat),this._ne=new o.V(b.lng,b.lat)),this}getCenter(){return new o.V((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new o.V(this.getWest(),this.getNorth())}getSouthEast(){return new o.V(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(r){const{lng:c,lat:f}=o.V.convert(r);let y=this._sw.lng<=c&&c<=this._ne.lng;return this._sw.lng>this._ne.lng&&(y=this._sw.lng>=c&&c>=this._ne.lng),this._sw.lat<=f&&f<=this._ne.lat&&y}intersects(r){if(!((r=Ur.convert(r)).getNorth()>=this.getSouth()&&r.getSouth()<=this.getNorth()))return!1;const c=o.W(this.getWest(),-180,180),f=o.W(this.getEast(),-180,180),y=o.W(r.getWest(),-180,180),b=o.W(r.getEast(),-180,180),S=c>=f,M=y>=b;return!(!S||!M)||(S?b>=c||y<=f:M?f>=y||c<=b:y<=f&&b>=c)}static convert(r){return r instanceof Ur?r:r&&new Ur(r)}static fromLngLat(r,c=0){const f=360*c/40075017,y=f/Math.cos(Math.PI/180*r.lat);return new Ur(new o.V(r.lng-y,r.lat-f),new o.V(r.lng+y,r.lat+f))}adjustAntiMeridian(){const r=new o.V(this._sw.lng,this._sw.lat),c=new o.V(this._ne.lng,this._ne.lat);return new Ur(r,r.lng>c.lng?new o.V(c.lng+360,c.lat):c)}}class $r{constructor(r,c,f){this.bounds=Ur.convert(this.validateBounds(r)),this.minzoom=c||0,this.maxzoom=f||24}validateBounds(r){return Array.isArray(r)&&r.length===4?[Math.max(-180,r[0]),Math.max(-90,r[1]),Math.min(180,r[2]),Math.min(90,r[3])]:[-180,-90,180,90]}contains(r){const c=Math.pow(2,r.z),f=Math.floor(o.Y(this.bounds.getWest())*c),y=Math.floor(o.X(this.bounds.getNorth())*c),b=Math.ceil(o.Y(this.bounds.getEast())*c),S=Math.ceil(o.X(this.bounds.getSouth())*c);return r.x>=f&&r.x<b&&r.y>=y&&r.y<S}}class lr extends o.E{constructor(r,c,f,y){if(super(),this.id=r,this.dispatcher=f,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,o.e(this,o.U(c,["url","scheme","tileSize","promoteId","encoding"])),this._options=o.e({type:"vector"},c),this._collectResourceTiming=c.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(y)}load(){return o._(this,void 0,void 0,(function*(){this._loaded=!1,this.fire(new o.l("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{const r=yield vr(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,this.map.style.tileManagers[this.id].clearTiles(),r&&(o.e(this,r),r.bounds&&(this.tileBounds=new $r(r.bounds,this.minzoom,this.maxzoom)),this.fire(new o.l("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new o.l("data",{dataType:"source",sourceDataType:"content"})))}catch(r){this._tileJSONRequest=null,this._loaded=!0,o.Z(r)||this.fire(new o.k(r))}}))}loaded(){return this._loaded}hasTile(r){return!this.tileBounds||this.tileBounds.contains(r.canonical)}onAdd(r){this.map=r,this.load()}setSourceProperty(r){this._tileJSONRequest&&this._tileJSONRequest.abort(),r(),this.load()}setTiles(r){return this.setSourceProperty((()=>{this._options.tiles=r})),this}setUrl(r){return this.setSourceProperty((()=>{this.url=r,this._options.url=r})),this}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}serialize(){return o.e({},this._options)}loadTile(r){return o._(this,void 0,void 0,(function*(){const c=r.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),f={request:this.map._requestManager.transformRequest(c,"Tile"),uid:r.uid,tileID:r.tileID,zoom:r.tileID.overscaledZ,tileSize:this.tileSize*r.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,subdivisionGranularity:this.map.style.projection.subdivisionGranularity,encoding:this.encoding,overzoomParameters:this._getOverzoomParameters(r)};f.request.collectResourceTiming=this._collectResourceTiming;let y="RT";if(r.actor&&r.state!=="expired"){if(r.state==="loading")return new Promise(((b,S)=>{r.reloadPromise={resolve:b,reject:S}}))}else r.actor=this.dispatcher.getActor(),y="LT";r.abortController=new AbortController;try{const b=yield r.actor.sendAsync({type:y,data:f},r.abortController);if(delete r.abortController,r.aborted)return;this._afterTileLoadWorkerResponse(r,b)}catch(b){if(delete r.abortController,r.aborted)return;if(b&&b.status!==404)throw b;this._afterTileLoadWorkerResponse(r,null)}}))}_getOverzoomParameters(r){if(r.tileID.canonical.z<=this.maxzoom||this.map._zoomLevelsToOverscale===void 0)return;const c=r.tileID.scaledTo(this.maxzoom).canonical,f=c.url(this.tiles,this.map.getPixelRatio(),this.scheme);return{maxZoomTileID:c,overzoomRequest:this.map._requestManager.transformRequest(f,"Tile")}}_afterTileLoadWorkerResponse(r,c){if(c&&c.resourceTiming&&(r.resourceTiming=c.resourceTiming),c&&this.map._refreshExpiredTiles&&r.setExpiryData(c),r.loadVectorData(c,this.map.painter),r.reloadPromise){const f=r.reloadPromise;r.reloadPromise=null,this.loadTile(r).then(f.resolve).catch(f.reject)}}abortTile(r){return o._(this,void 0,void 0,(function*(){r.abortController&&(r.abortController.abort(),delete r.abortController),r.actor&&(yield r.actor.sendAsync({type:"AT",data:{uid:r.uid,type:this.type,source:this.id}}))}))}unloadTile(r){return o._(this,void 0,void 0,(function*(){r.unloadVectorData(),r.actor&&(yield r.actor.sendAsync({type:"RMT",data:{uid:r.uid,type:this.type,source:this.id}}))}))}hasTransition(){return!1}}class Wr extends o.E{constructor(r,c,f,y){super(),this.id=r,this.dispatcher=f,this.setEventedParent(y),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=o.e({type:"raster"},c),o.e(this,o.U(c,["url","scheme","tileSize"]))}load(){return o._(this,arguments,void 0,(function*(r=!1){this._loaded=!1,this.fire(new o.l("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{const c=yield vr(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,c&&(o.e(this,c),c.bounds&&(this.tileBounds=new $r(c.bounds,this.minzoom,this.maxzoom)),this.fire(new o.l("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new o.l("data",{dataType:"source",sourceDataType:"content",sourceDataChanged:r})))}catch(c){this._tileJSONRequest=null,this._loaded=!0,o.Z(c)||this.fire(new o.k(c))}}))}loaded(){return this._loaded}onAdd(r){this.map=r,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}setSourceProperty(r){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null),r(),this.load(!0)}setTiles(r){return this.setSourceProperty((()=>{this._options.tiles=r})),this}setUrl(r){return this.setSourceProperty((()=>{this.url=r,this._options.url=r})),this}serialize(){return o.e({},this._options)}hasTile(r){return!this.tileBounds||this.tileBounds.contains(r.canonical)}loadTile(r){return o._(this,void 0,void 0,(function*(){const c=r.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);r.abortController=new AbortController;try{const f=yield Me.getImage(this.map._requestManager.transformRequest(c,"Tile"),r.abortController,this.map._refreshExpiredTiles);if(delete r.abortController,r.aborted)return void(r.state="unloaded");if(f&&f.data){this.map._refreshExpiredTiles&&(f.cacheControl||f.expires)&&r.setExpiryData({cacheControl:f.cacheControl,expires:f.expires});const y=this.map.painter.context,b=y.gl,S=f.data;r.texture=this.map.painter.getTileTexture(S.width),r.texture?r.texture.update(S,{useMipmap:!0}):(r.texture=new o.T(y,S,b.RGBA,{useMipmap:!0}),r.texture.bind(b.LINEAR,b.CLAMP_TO_EDGE,b.LINEAR_MIPMAP_NEAREST)),r.state="loaded"}}catch(f){if(delete r.abortController,r.aborted)r.state="unloaded";else if(f)throw r.state="errored",f}}))}abortTile(r){return o._(this,void 0,void 0,(function*(){r.abortController&&(r.abortController.abort(),delete r.abortController)}))}unloadTile(r){return o._(this,void 0,void 0,(function*(){r.texture&&this.map.painter.saveTileTexture(r.texture)}))}hasTransition(){return!1}}class Sr extends Wr{constructor(r,c,f,y){super(r,c,f,y),this.type="raster-dem",this.maxzoom=22,this._options=o.e({type:"raster-dem"},c),this.encoding=c.encoding||"mapbox",this.redFactor=c.redFactor,this.greenFactor=c.greenFactor,this.blueFactor=c.blueFactor,this.baseShift=c.baseShift}loadTile(r){return o._(this,void 0,void 0,(function*(){const c=r.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),f=this.map._requestManager.transformRequest(c,"Tile");r.neighboringTiles=this._getNeighboringTiles(r.tileID),r.abortController=new AbortController;try{const y=yield Me.getImage(f,r.abortController,this.map._refreshExpiredTiles);if(delete r.abortController,r.aborted)return void(r.state="unloaded");if(y&&y.data){const b=y.data;this.map._refreshExpiredTiles&&(y.cacheControl||y.expires)&&r.setExpiryData({cacheControl:y.cacheControl,expires:y.expires});const S=o.b(b)&&o.$()?b:yield this.readImageNow(b),M={type:this.type,uid:r.uid,source:this.id,rawImageData:S,encoding:this.encoding,redFactor:this.redFactor,greenFactor:this.greenFactor,blueFactor:this.blueFactor,baseShift:this.baseShift};if(!r.actor||r.state==="expired"){r.actor=this.dispatcher.getActor();const N=yield r.actor.sendAsync({type:"LDT",data:M});r.dem=N,r.needsHillshadePrepare=!0,r.needsTerrainPrepare=!0,r.state="loaded"}}}catch(y){if(delete r.abortController,r.aborted)r.state="unloaded";else if(y)throw r.state="errored",y}}))}readImageNow(r){return o._(this,void 0,void 0,(function*(){if(typeof VideoFrame<"u"&&o.a0()){const c=r.width+2,f=r.height+2;try{return new o.R({width:c,height:f},yield o.a1(r,-1,-1,c,f))}catch{}}return P.getImageData(r,1)}))}_getNeighboringTiles(r){const c=r.canonical,f=Math.pow(2,c.z),y=(c.x-1+f)%f,b=c.x===0?r.wrap-1:r.wrap,S=(c.x+1+f)%f,M=c.x+1===f?r.wrap+1:r.wrap,N={};return N[new o.a2(r.overscaledZ,b,c.z,y,c.y).key]={backfilled:!1},N[new o.a2(r.overscaledZ,M,c.z,S,c.y).key]={backfilled:!1},c.y>0&&(N[new o.a2(r.overscaledZ,b,c.z,y,c.y-1).key]={backfilled:!1},N[new o.a2(r.overscaledZ,r.wrap,c.z,c.x,c.y-1).key]={backfilled:!1},N[new o.a2(r.overscaledZ,M,c.z,S,c.y-1).key]={backfilled:!1}),c.y+1<f&&(N[new o.a2(r.overscaledZ,b,c.z,y,c.y+1).key]={backfilled:!1},N[new o.a2(r.overscaledZ,r.wrap,c.z,c.x,c.y+1).key]={backfilled:!1},N[new o.a2(r.overscaledZ,M,c.z,S,c.y+1).key]={backfilled:!1}),N}unloadTile(r){return o._(this,void 0,void 0,(function*(){r.demTexture&&this.map.painter.saveTileTexture(r.demTexture),r.fbo&&(r.fbo.destroy(),delete r.fbo),r.dem&&delete r.dem,delete r.neighboringTiles,r.state="unloaded",r.actor&&(yield r.actor.sendAsync({type:"RDT",data:{type:this.type,uid:r.uid,source:this.id}}))}))}}function Or(w){return w.type==="GeometryCollection"?w.geometries.map((r=>r.coordinates)).flat(1/0):w.coordinates.flat(1/0)}function Rr(w){const r=new Ur;let c;switch(w.type){case"FeatureCollection":c=w.features.map((f=>Or(f.geometry))).flat(1/0);break;case"Feature":c=Or(w.geometry);break;default:c=Or(w)}if(c.length==0)return r;for(let f=0;f<c.length-1;f+=2)r.extend([c[f],c[f+1]]);return r}class On extends o.E{constructor(r,c,f,y){super(),this.id=r,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._isUpdatingWorker=!1,this._pendingWorkerUpdate={data:c.data},this.actor=f.getActor(),this.setEventedParent(y),this._data=typeof c.data=="string"?{url:c.data}:{geojson:c.data},this._options=o.e({},c),this._collectResourceTiming=c.collectResourceTiming,c.maxzoom!==void 0&&(this.maxzoom=c.maxzoom),c.type&&(this.type=c.type),c.attribution&&(this.attribution=c.attribution),this.promoteId=c.promoteId,c.clusterMaxZoom!==void 0&&this.maxzoom<=c.clusterMaxZoom&&o.w(`The maxzoom value "${this.maxzoom}" is expected to be greater than the clusterMaxZoom value "${c.clusterMaxZoom}".`),this.workerOptions=o.e({source:this.id,cluster:c.cluster||!1,geojsonVtOptions:{buffer:this._pixelsToTileUnits(c.buffer!==void 0?c.buffer:128),tolerance:this._pixelsToTileUnits(c.tolerance!==void 0?c.tolerance:.375),extent:o.a5,maxZoom:this.maxzoom,lineMetrics:c.lineMetrics||!1,generateId:c.generateId||!1},superclusterOptions:{maxZoom:this._getClusterMaxZoom(c.clusterMaxZoom),minPoints:Math.max(2,c.clusterMinPoints||2),extent:o.a5,radius:this._pixelsToTileUnits(c.clusterRadius||50),log:!1,generateId:c.generateId||!1},clusterProperties:c.clusterProperties,filter:c.filter},c.workerOptions),typeof this.promoteId=="string"&&(this.workerOptions.promoteId=this.promoteId)}_hasPendingWorkerUpdate(){return this._pendingWorkerUpdate.data!==void 0||this._pendingWorkerUpdate.diff!==void 0||this._pendingWorkerUpdate.optionsChanged}_pixelsToTileUnits(r){return r*(o.a5/this.tileSize)}_getClusterMaxZoom(r){const c=r?Math.round(r):this.maxzoom-1;return Number.isInteger(r)||r===void 0||o.w(`Integer expected for option 'clusterMaxZoom': provided value "${r}" rounded to "${c}"`),c}load(){return o._(this,void 0,void 0,(function*(){yield this._updateWorkerData()}))}onAdd(r){this.map=r,this.load()}setData(r,c){this._data=typeof r=="string"?{url:r}:{geojson:r},this._pendingWorkerUpdate={data:r};const f=this._updateWorkerData();return c?f:this}updateData(r,c){this._pendingWorkerUpdate.diff=o.a6(this._pendingWorkerUpdate.diff,r);const f=this._updateWorkerData();return c?f:this}getData(){return o._(this,void 0,void 0,(function*(){const r=o.e({type:this.type},this.workerOptions);return this.actor.sendAsync({type:"GD",data:r})}))}getBounds(){return o._(this,void 0,void 0,(function*(){return Rr(yield this.getData())}))}setClusterOptions(r){return this.workerOptions.cluster=r.cluster,r.clusterRadius!==void 0&&(this.workerOptions.superclusterOptions.radius=this._pixelsToTileUnits(r.clusterRadius)),r.clusterMaxZoom!==void 0&&(this.workerOptions.superclusterOptions.maxZoom=this._getClusterMaxZoom(r.clusterMaxZoom)),this._pendingWorkerUpdate.optionsChanged=!0,this._updateWorkerData(),this}getClusterExpansionZoom(r){return this.actor.sendAsync({type:"GCEZ",data:{type:this.type,clusterId:r,source:this.id}})}getClusterChildren(r){return this.actor.sendAsync({type:"GCC",data:{type:this.type,clusterId:r,source:this.id}})}getClusterLeaves(r,c,f){return this.actor.sendAsync({type:"GCL",data:{type:this.type,source:this.id,clusterId:r,limit:c,offset:f}})}_updateWorkerData(){return o._(this,void 0,void 0,(function*(){if(this._isUpdatingWorker)return;if(!this._hasPendingWorkerUpdate())return void o.w(`No pending worker updates for GeoJSONSource ${this.id}.`);const{data:r,diff:c}=this._pendingWorkerUpdate,f=o.e({type:this.type},this.workerOptions);r!==void 0?(typeof r=="string"?(f.request=this.map._requestManager.transformRequest(P.resolveURL(r),"Source"),f.request.collectResourceTiming=this._collectResourceTiming):f.data=r,this._pendingWorkerUpdate.data=void 0):c&&(f.dataDiff=c,this._pendingWorkerUpdate.diff=void 0),this._pendingWorkerUpdate.optionsChanged=void 0,this._isUpdatingWorker=!0,this.fire(new o.l("dataloading",{dataType:"source"}));try{const y=yield this.actor.sendAsync({type:"LD",data:f});if(this._isUpdatingWorker=!1,this._removed||y.abandoned)return void this.fire(new o.l("dataabort",{dataType:"source"}));c&&this._applyDiff(c);let b=null;y.resourceTiming&&y.resourceTiming[this.id]&&(b=y.resourceTiming[this.id].slice(0));const S={dataType:"source"};this._collectResourceTiming&&b&&b.length>0&&o.e(S,{resourceTiming:b}),this.fire(new o.l("data",Object.assign(Object.assign({},S),{sourceDataType:"metadata"}))),this.fire(new o.l("data",Object.assign(Object.assign({},S),{sourceDataType:"content",shouldReloadTileOptions:this._getShouldReloadTileOptions(c)})))}catch(y){if(this._isUpdatingWorker=!1,this._removed)return void this.fire(new o.l("dataabort",{dataType:"source"}));this.fire(new o.k(y))}finally{this._hasPendingWorkerUpdate()&&this._updateWorkerData()}}))}_applyDiff(r){const c=typeof this.promoteId=="string"?this.promoteId:void 0;if(!this._data.url&&!this._data.updateable){if(!o.a7(this._data.geojson,c))throw new Error(`GeoJSONSource "${this.id}": GeoJSON data is not compatible with updateData`);this._data={updateable:o.a8(this._data.geojson,c)}}this._data.updateable&&o.a9(this._data.updateable,r,c)}_getShouldReloadTileOptions(r){if(this._options.cluster||!r||r.removeAll)return;const{add:c=[],update:f=[],remove:y=[]}=r||{},b=new Set([...f.map((S=>S.id)),...y]);for(const S of b.values())if(typeof S!="number"&&this.promoteId==null)return void o.w(`GeoJSONSource "${this.id}": updateData is slower when using string GeoJSON feature IDs. Consider using promoteId or numeric IDs for better performance.`);return{nextBounds:[...f.map((S=>S.newGeometry)),...c.map((S=>S.geometry))].filter(Boolean).map((S=>Rr(S))),prevIds:b}}shouldReloadTile(r,{nextBounds:c,prevIds:f}){if(!r.latestFeatureIndex)return r.state!=="unloaded";const y=r.latestFeatureIndex.loadVTLayers();for(let N=0;N<r.latestFeatureIndex.featureIndexArray.length;N++){const j=r.latestFeatureIndex.featureIndexArray.get(N),q=y[o.aa].feature(j.featureIndex),ne=r.latestFeatureIndex.getId(q,o.aa);if(f.has(ne))return!0}const{buffer:b,extent:S}=this.workerOptions.geojsonVtOptions,M=(function({x:N,y:j,z:q},ne=0){const ee=o.a3((N-ne)/Math.pow(2,q)),Ae=o.a4((j+1+ne)/Math.pow(2,q)),ve=o.a3((N+1+ne)/Math.pow(2,q)),ke=o.a4((j-ne)/Math.pow(2,q));return new Ur([ee,Ae],[ve,ke])})(r.tileID.canonical,b/S);for(const N of c)if(M.intersects(N))return!0;return!1}loaded(){return!this._isUpdatingWorker&&!this._hasPendingWorkerUpdate()}loadTile(r){return o._(this,void 0,void 0,(function*(){const c=r.actor?"RT":"LT";r.actor=this.actor;const f={type:this.type,uid:r.uid,tileID:r.tileID,zoom:r.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,subdivisionGranularity:this.map.style.projection.subdivisionGranularity};r.abortController=new AbortController;const y=yield this.actor.sendAsync({type:c,data:f},r.abortController);delete r.abortController,r.unloadVectorData(),r.aborted||r.loadVectorData(y,this.map.painter,c==="RT")}))}abortTile(r){return o._(this,void 0,void 0,(function*(){r.abortController&&(r.abortController.abort(),delete r.abortController),r.aborted=!0}))}unloadTile(r){return o._(this,void 0,void 0,(function*(){r.unloadVectorData(),yield this.actor.sendAsync({type:"RMT",data:{uid:r.uid,type:this.type,source:this.id}})}))}onRemove(){this._removed=!0,this.actor.sendAsync({type:"RS",data:{type:this.type,source:this.id}})}serialize(){return o.e({},this._options,{type:this.type,data:this._data.updateable?{type:"FeatureCollection",features:Array.from(this._data.updateable.values())}:this._data.url||this._data.geojson})}hasTransition(){return!1}}class hn extends o.E{constructor(r,c,f,y){super(),this.flippedWindingOrder=!1,this.id=r,this.dispatcher=f,this.coordinates=c.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(y),this.options=c}load(r){return o._(this,void 0,void 0,(function*(){this._loaded=!1,this.fire(new o.l("dataloading",{dataType:"source"})),this.url=this.options.url,this._request=new AbortController;try{const c=yield Me.getImage(this.map._requestManager.transformRequest(this.url,"Image"),this._request);this._request=null,this._loaded=!0,c&&c.data&&(this.image=c.data,r&&(this.coordinates=r),this._finishLoading())}catch(c){this._request=null,this._loaded=!0,o.Z(c)||this.fire(new o.k(c))}}))}loaded(){return this._loaded}updateImage(r){return r.url?(this._request&&(this._request.abort(),this._request=null),this.options.url=r.url,this.load(r.coordinates).finally((()=>{this.texture=null})),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new o.l("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(r){this.map=r,this.load()}onRemove(){this._request&&(this._request.abort(),this._request=null)}setCoordinates(r){this.coordinates=r;const c=r.map(o.ab.fromLngLat);var f;return this.tileID=(function(y){const b=o.ac.fromPoints(y),S=b.width(),M=b.height(),N=Math.max(S,M),j=Math.max(0,Math.floor(-Math.log(N)/Math.LN2)),q=Math.pow(2,j);return new o.ae(j,Math.floor((b.minX+b.maxX)/2*q),Math.floor((b.minY+b.maxY)/2*q))})(c),this.terrainTileRanges=this._getOverlappingTileRanges(c),this.minzoom=this.maxzoom=this.tileID.z,this.tileCoords=c.map((y=>this.tileID.getTilePoint(y)._round())),this.flippedWindingOrder=((f=this.tileCoords)[1].x-f[0].x)*(f[2].y-f[0].y)-(f[1].y-f[0].y)*(f[2].x-f[0].x)<0,this.fire(new o.l("data",{dataType:"source",sourceDataType:"content"})),this}prepare(){if(Object.keys(this.tiles).length===0||!this.image)return;const r=this.map.painter.context,c=r.gl;this.texture||(this.texture=new o.T(r,this.image,c.RGBA),this.texture.bind(c.LINEAR,c.CLAMP_TO_EDGE));let f=!1;for(const y in this.tiles){const b=this.tiles[y];b.state!=="loaded"&&(b.state="loaded",b.texture=this.texture,f=!0)}f&&this.fire(new o.l("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}loadTile(r){return o._(this,void 0,void 0,(function*(){this.tileID&&this.tileID.equals(r.tileID.canonical)?(this.tiles[String(r.tileID.wrap)]=r,r.buckets={}):r.state="errored"}))}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}_getOverlappingTileRanges(r){const{minX:c,minY:f,maxX:y,maxY:b}=o.ac.fromPoints(r),S={};for(let M=0;M<=o.ad;M++){const N=Math.pow(2,M),j=Math.floor(c*N),q=Math.floor(f*N),ne=Math.floor(y*N),ee=Math.floor(b*N);S[M]={minTileX:j,minTileY:q,maxTileX:ne,maxTileY:ee}}return S}}class ft extends hn{constructor(r,c,f,y){super(r,c,f,y),this.roundZoom=!0,this.type="video",this.options=c}load(){return o._(this,void 0,void 0,(function*(){this._loaded=!1;const r=this.options;this.urls=[];for(const c of r.urls)this.urls.push(this.map._requestManager.transformRequest(c,"Source").url);try{const c=yield o.af(this.urls);if(this._loaded=!0,!c)return;this.video=c,this.video.loop=!0,this.video.addEventListener("playing",(()=>{this.map.triggerRepaint()})),this.map&&this.video.play(),this._finishLoading()}catch(c){this.fire(new o.k(c))}}))}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(r){if(this.video){const c=this.video.seekable;r<c.start(0)||r>c.end(0)?this.fire(new o.k(new o.ag(`sources.${this.id}`,null,`Playback for this video can be set only between the ${c.start(0)} and ${c.end(0)}-second mark.`))):this.video.currentTime=r}}getVideo(){return this.video}onAdd(r){this.map||(this.map=r,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;const r=this.map.painter.context,c=r.gl;this.texture?this.video.paused||(this.texture.bind(c.LINEAR,c.CLAMP_TO_EDGE),c.texSubImage2D(c.TEXTURE_2D,0,0,0,c.RGBA,c.UNSIGNED_BYTE,this.video)):(this.texture=new o.T(r,this.video,c.RGBA),this.texture.bind(c.LINEAR,c.CLAMP_TO_EDGE));let f=!1;for(const y in this.tiles){const b=this.tiles[y];b.state!=="loaded"&&(b.state="loaded",b.texture=this.texture,f=!0)}f&&this.fire(new o.l("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}}class de extends hn{constructor(r,c,f,y){super(r,c,f,y),c.coordinates?Array.isArray(c.coordinates)&&c.coordinates.length===4&&!c.coordinates.some((b=>!Array.isArray(b)||b.length!==2||b.some((S=>typeof S!="number"))))||this.fire(new o.k(new o.ag(`sources.${r}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new o.k(new o.ag(`sources.${r}`,null,'missing required property "coordinates"'))),c.animate&&typeof c.animate!="boolean"&&this.fire(new o.k(new o.ag(`sources.${r}`,null,'optional "animate" property must be a boolean value'))),c.canvas?typeof c.canvas=="string"||c.canvas instanceof HTMLCanvasElement||this.fire(new o.k(new o.ag(`sources.${r}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new o.k(new o.ag(`sources.${r}`,null,'missing required property "canvas"'))),this.options=c,this.animate=c.animate===void 0||c.animate}load(){return o._(this,void 0,void 0,(function*(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new o.k(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())}))}getCanvas(){return this.canvas}onAdd(r){this.map=r,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let r=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,r=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,r=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;const c=this.map.painter.context,f=c.gl;this.texture?(r||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):(this.texture=new o.T(c,this.canvas,f.RGBA,{premultiply:!0}),this.texture.bind(f.LINEAR,f.CLAMP_TO_EDGE));let y=!1;for(const b in this.tiles){const S=this.tiles[b];S.state!=="loaded"&&(S.state="loaded",S.texture=this.texture,y=!0)}y&&this.fire(new o.l("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"canvas",animate:this.animate,canvas:this.options.canvas,coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const r of[this.canvas.width,this.canvas.height])if(isNaN(r)||r<=0)return!0;return!1}}const fe={},ye=w=>{switch(w){case"geojson":return On;case"image":return hn;case"raster":return Wr;case"raster-dem":return Sr;case"vector":return lr;case"video":return ft;case"canvas":return de}return fe[w]},qe="RTLPluginLoaded";class We extends o.E{constructor(){super(...arguments),this.status="unavailable",this.url=null,this.dispatcher=Wt()}_syncState(r){return this.status=r,this.dispatcher.broadcast("SRPS",{pluginStatus:r,pluginURL:this.url}).catch((c=>{throw this.status="error",c}))}getRTLTextPluginStatus(){return this.status}clearRTLTextPlugin(){this.status="unavailable",this.url=null}setRTLTextPlugin(r){return o._(this,arguments,void 0,(function*(c,f=!1){if(this.url)throw new Error("setRTLTextPlugin cannot be called multiple times.");if(this.url=P.resolveURL(c),!this.url)throw new Error(`requested url ${c} is invalid`);if(this.status==="unavailable"){if(!f)return this._requestImport();this.status="deferred",this._syncState(this.status)}else if(this.status==="requested")return this._requestImport()}))}_requestImport(){return o._(this,void 0,void 0,(function*(){yield this._syncState("loading"),this.status="loaded",this.fire(new o.l(qe))}))}lazyLoad(){this.status==="unavailable"?this.status="requested":this.status==="deferred"&&this._requestImport()}}let Ct=null;function yt(){return Ct||(Ct=new We),Ct}var at,bt;(function(w){w[w.Base=0]="Base",w[w.Parent=1]="Parent"})(at||(at={})),(function(w){w[w.Departing=0]="Departing",w[w.Incoming=1]="Incoming"})(bt||(bt={}));class Ht{constructor(r,c){this.timeAdded=0,this.fadeEndTime=0,this.fadeOpacity=1,this.tileID=r,this.uid=o.ah(),this.uses=0,this.tileSize=c,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.rtt=[],this.rttCoords={},this.expiredRequestCount=0,this.state="loading"}isRenderable(r){return this.hasData()&&(!this.fadeEndTime||this.fadeOpacity>0)&&(r||!this.holdingForSymbolFade())}setCrossFadeLogic({fadingRole:r,fadingDirection:c,fadingParentID:f,fadeEndTime:y}){this.resetFadeLogic(),this.fadingRole=r,this.fadingDirection=c,this.fadingParentID=f,this.fadeEndTime=y}setSelfFadeLogic(r){this.resetFadeLogic(),this.selfFading=!0,this.fadeEndTime=r}resetFadeLogic(){this.fadingRole=null,this.fadingDirection=null,this.fadingParentID=null,this.selfFading=!1,this.timeAdded=z(),this.fadeEndTime=0,this.fadeOpacity=1}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}clearTextures(r){this.demTexture&&r.saveTileTexture(this.demTexture),this.demTexture=null}loadVectorData(r,c,f){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",r){r.featureIndex&&(this.latestFeatureIndex=r.featureIndex,r.rawTileData?(this.latestRawTileData=r.rawTileData,this.latestFeatureIndex.rawTileData=r.rawTileData,this.latestFeatureIndex.encoding=r.encoding):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData,this.latestFeatureIndex.encoding=this.latestEncoding)),this.collisionBoxArray=r.collisionBoxArray,this.buckets=(function(y,b){const S={};if(!b)return S;for(const M of y){const N=M.layerIds.map((j=>b.getLayer(j))).filter(Boolean);if(N.length!==0){M.layers=N,M.stateDependentLayerIds&&(M.stateDependentLayers=M.stateDependentLayerIds.map((j=>N.filter((q=>q.id===j))[0])));for(const j of N)S[j.id]=M}}return S})(r.buckets,c?.style),this.hasSymbolBuckets=!1;for(const y in this.buckets){const b=this.buckets[y];if(b instanceof o.aj){if(this.hasSymbolBuckets=!0,!f)break;b.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const y in this.buckets){const b=this.buckets[y];if(b instanceof o.aj&&b.hasRTLText){this.hasRTLText=!0,yt().lazyLoad();break}}this.queryPadding=0;for(const y in this.buckets){const b=this.buckets[y];this.queryPadding=Math.max(this.queryPadding,c.style.getLayer(y).queryRadius(b))}r.imageAtlas&&(this.imageAtlas=r.imageAtlas),r.glyphAtlasImage&&(this.glyphAtlasImage=r.glyphAtlasImage),this.dashPositions=r.dashPositions}else this.collisionBoxArray=new o.ai}unloadVectorData(){for(const r in this.buckets)this.buckets[r].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.dashPositions&&(this.dashPositions=null),this.latestFeatureIndex=null,this.state="unloaded"}getBucket(r){return this.buckets[r.id]}upload(r){for(const f in this.buckets){const y=this.buckets[f];y.uploadPending()&&y.upload(r)}const c=r.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new o.T(r,this.imageAtlas.image,c.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new o.T(r,this.glyphAtlasImage,c.ALPHA),this.glyphAtlasImage=null)}prepare(r){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(r,this.imageAtlasTexture)}queryRenderedFeatures(r,c,f,y,b,S,M,N,j,q,ne){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:y,cameraQueryGeometry:b,scale:S,tileSize:this.tileSize,pixelPosMatrix:q,transform:N,params:M,queryPadding:this.queryPadding*j,getElevation:ne},r,c,f):{}}querySourceFeatures(r,c){const f=this.latestFeatureIndex;if(!f||!f.rawTileData)return;const y=f.loadVTLayers(),b=c&&c.sourceLayer?c.sourceLayer:"",S=y[o.aa]||y[b];if(!S)return;const M=o.ak(c?.filter,c?.globalState),{z:N,x:j,y:q}=this.tileID.canonical,ne={z:N,x:j,y:q};for(let ee=0;ee<S.length;ee++){const Ae=S.feature(ee);if(M.needGeometry){const Oe=o.al(Ae,!0);if(!M.filter(new o.H(this.tileID.overscaledZ),Oe,this.tileID.canonical))continue}else if(!M.filter(new o.H(this.tileID.overscaledZ),Ae))continue;const ve=f.getId(Ae,b),ke=new o.am(Ae,N,j,q,ve);ke.tile=ne,r.push(ke)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(r){const c=this.expirationTime;if(r.cacheControl){const f=o.an(r.cacheControl);f["max-age"]&&(this.expirationTime=Date.now()+1e3*f["max-age"])}else r.expires&&(this.expirationTime=new Date(r.expires).getTime());if(this.expirationTime){const f=Date.now();let y=!1;if(this.expirationTime>f)y=!1;else if(c)if(this.expirationTime<c)y=!0;else{const b=this.expirationTime-c;b?this.expirationTime=f+Math.max(b,3e4):y=!0}else y=!0;y?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(r,c){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(r).length===0)return;const f=this.latestFeatureIndex.loadVTLayers();for(const y in this.buckets){if(!c.style.hasLayer(y))continue;const b=this.buckets[y],S=b.layers[0].sourceLayer||o.aa,M=f[S],N=r[S];if(!M||!N||Object.keys(N).length===0)continue;b.update(N,M,this.imageAtlas&&this.imageAtlas.patternPositions||{},this.dashPositions||{});const j=c&&c.style&&c.style.getLayer(y);j&&(this.queryPadding=Math.max(this.queryPadding,j.queryRadius(b)))}}holdingForSymbolFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<z()}clearSymbolFadeHold(){this.symbolFadeHoldUntil=void 0}setSymbolHoldDuration(r){this.symbolFadeHoldUntil=z()+r}setDependencies(r,c){const f={};for(const y of c)f[y]=!0;this.dependencies[r]=f}hasDependency(r,c){for(const f of r){const y=this.dependencies[f];if(y){for(const b of c)if(y[b])return!0}}return!1}}class Ft{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(r,c,f){const y=String(c);if(this.stateChanges[r]=this.stateChanges[r]||{},this.stateChanges[r][y]=this.stateChanges[r][y]||{},o.e(this.stateChanges[r][y],f),this.deletedStates[r]===null){this.deletedStates[r]={};for(const b in this.state[r])b!==y&&(this.deletedStates[r][b]=null)}else if(this.deletedStates[r]&&this.deletedStates[r][y]===null){this.deletedStates[r][y]={};for(const b in this.state[r][y])f[b]||(this.deletedStates[r][y][b]=null)}else for(const b in f)this.deletedStates[r]&&this.deletedStates[r][y]&&this.deletedStates[r][y][b]===null&&delete this.deletedStates[r][y][b]}removeFeatureState(r,c,f){if(this.deletedStates[r]===null)return;const y=String(c);if(this.deletedStates[r]=this.deletedStates[r]||{},f&&c!==void 0)this.deletedStates[r][y]!==null&&(this.deletedStates[r][y]=this.deletedStates[r][y]||{},this.deletedStates[r][y][f]=null);else if(c!==void 0)if(this.stateChanges[r]&&this.stateChanges[r][y])for(f in this.deletedStates[r][y]={},this.stateChanges[r][y])this.deletedStates[r][y][f]=null;else this.deletedStates[r][y]=null;else this.deletedStates[r]=null}getState(r,c){const f=String(c),y=o.e({},(this.state[r]||{})[f],(this.stateChanges[r]||{})[f]);if(this.deletedStates[r]===null)return{};if(this.deletedStates[r]){const b=this.deletedStates[r][c];if(b===null)return{};for(const S in b)delete y[S]}return y}initializeTileState(r,c){r.setFeatureState(this.state,c)}coalesceChanges(r,c){const f={};for(const y in this.stateChanges){this.state[y]=this.state[y]||{};const b={};for(const S in this.stateChanges[y])this.state[y][S]||(this.state[y][S]={}),o.e(this.state[y][S],this.stateChanges[y][S]),b[S]=this.state[y][S];f[y]=b}for(const y in this.deletedStates){this.state[y]=this.state[y]||{};const b={};if(this.deletedStates[y]===null)for(const S in this.state[y])b[S]={},this.state[y][S]={};else for(const S in this.deletedStates[y]){if(this.deletedStates[y][S]===null)this.state[y][S]={};else for(const M of Object.keys(this.deletedStates[y][S]))delete this.state[y][S][M];b[S]=this.state[y][S]}f[y]=f[y]||{},o.e(f[y],b)}this.stateChanges={},this.deletedStates={},Object.keys(f).length!==0&&r.setFeatureState(f,c)}}const cr=89.25;function Jt(w,r){const c=o.ao(r.lat,-o.ap,o.ap);return new o.P(o.Y(r.lng)*w,o.X(c)*w)}function fr(w,r){return new o.ab(r.x/w,r.y/w).toLngLat()}function rn(w){return w.cameraToCenterDistance*Math.min(.85*Math.tan(o.aq(90-w.pitch)),Math.tan(o.aq(cr-w.pitch)))}function Tr(w,r){const c=w.canonical,f=r/o.ar(c.z),y=c.x+Math.pow(2,c.z)*w.wrap,b=o.as(new Float64Array(16));return o.O(b,b,[y*f,c.y*f,0]),o.Q(b,b,[f/o.a5,f/o.a5,1]),b}function mt(w,r,c,f,y){const b=o.ab.fromLngLat(w,r),S=y*o.at(1,w.lat),{x:M,y:N,z:j}=tn(c,f);return new o.ab(b.x+S*-M,b.y+S*-N,b.z+S*-j)}function tn(w,r){const c=o.aq(w),f=o.aq(r),y=Math.cos(-c),b=Math.sin(c);return{x:b*Math.sin(f),y:-b*Math.cos(f),z:y}}function Nr(w,r,c){const f=r.intersectsFrustum(w);if(!c||f===0)return f;const y=r.intersectsPlane(c);return y===0?0:f===2&&y===2?2:1}function mr(w,r,c){let f=0;const y=(c-r)/10;for(let b=0;b<10;b++)f+=y*Math.pow(Math.cos(r+(b+.5)/10*(c-r)),w);return f}function Kr(w,r){return function(c,f,y,b,S){const M=2*((w-1)/o.au(Math.cos(o.aq(cr-S))/Math.cos(o.aq(cr)))-1),N=Math.acos(y/b),j=2*mr(M-1,0,o.aq(S/2)),q=Math.min(o.aq(cr),N+o.aq(S/2)),ne=mr(M-1,Math.min(q,N-o.aq(S/2)),q),ee=Math.atan(f/y),Ae=Math.hypot(f,y);let ve=c;return ve+=o.au(b/Ae/Math.max(.5,Math.cos(o.aq(S/2)))),ve+=M*o.au(Math.cos(ee))/2,ve-=o.au(Math.max(1,ne/j/r))/2,ve}}const Dn=Kr(9.314,3);function wr(w,r){const c=(r.roundZoom?Math.round:Math.floor)(w.zoom+o.au(w.tileSize/r.tileSize));return Math.max(0,c)}function Tn(w,r){const c=w.getCameraFrustum(),f=w.getClippingPlane(),y=w.screenPointToMercatorCoordinate(w.getCameraPoint()),b=o.ab.fromLngLat(w.center,w.elevation);y.z=b.z+Math.cos(w.pitchInRadians)*w.cameraToCenterDistance/w.worldSize;const S=w.getCoveringTilesDetailsProvider(),M=S.allowVariableZoom(w,r),N=wr(w,r),j=r.minzoom||0,q=r.maxzoom!==void 0?r.maxzoom:w.maxZoom,ne=Math.min(Math.max(0,N),q),ee=Math.pow(2,ne),Ae=[ee*y.x,ee*y.y,0],ve=[ee*b.x,ee*b.y,0],ke=Math.hypot(b.x-y.x,b.y-y.y),Oe=Math.abs(b.z-y.z),Qe=Math.hypot(ke,Oe),Ge=ct=>({zoom:0,x:0,y:0,wrap:ct,fullyVisible:!1}),ot=[],Ze=[];if(w.renderWorldCopies&&S.allowWorldCopies())for(let ct=1;ct<=3;ct++)ot.push(Ge(-ct)),ot.push(Ge(ct));for(ot.push(Ge(0));ot.length>0;){const ct=ot.pop(),dt=ct.x,it=ct.y;let _t=ct.fullyVisible;const Dt={x:dt,y:it,z:ct.zoom},Pt=S.getTileBoundingVolume(Dt,ct.wrap,w.elevation,r);if(!_t){const Ar=Nr(c,Pt,f);if(Ar===0)continue;_t=Ar===2}const Rt=S.distanceToTile2d(y.x,y.y,Dt,Pt);let Qt=N;M&&(Qt=(r.calculateTileZoom||Dn)(w.zoom+o.au(w.tileSize/r.tileSize),Rt,Oe,Qe,w.fov)),Qt=(r.roundZoom?Math.round:Math.floor)(Qt),Qt=Math.max(0,Qt);const nr=Math.min(Qt,q);if(ct.wrap=S.getWrap(b,Dt,ct.wrap),ct.zoom>=nr){if(ct.zoom<j)continue;const Ar=ne-ct.zoom,rr=Ae[0]-.5-(dt<<Ar),Dr=Ae[1]-.5-(it<<Ar),vn=r.reparseOverscaled?Math.max(ct.zoom,Qt):ct.zoom;Ze.push({tileID:new o.a2(ct.zoom===q?vn:ct.zoom,ct.wrap,ct.zoom,dt,it),distanceSq:o.av([ve[0]-.5-dt,ve[1]-.5-it]),tileDistanceToCamera:Math.sqrt(rr*rr+Dr*Dr)})}else for(let Ar=0;Ar<4;Ar++)ot.push({zoom:ct.zoom+1,x:(dt<<1)+Ar%2,y:(it<<1)+(Ar>>1),wrap:ct.wrap,fullyVisible:_t})}return Ze.sort(((ct,dt)=>ct.distanceSq-dt.distanceSq)).map((ct=>ct.tileID))}const Bn=o.ac.fromPoints([new o.P(0,0),new o.P(o.a5,o.a5)]);function xn(w){return w==="raster"||w==="image"||w==="video"}function Di(w,r,c,f,y,b,S){if(!r.hasData())return!1;const{tileID:M,fadingRole:N,fadingDirection:j,fadingParentID:q}=r;if(N===at.Base&&j===bt.Incoming&&q)return c[q.key]=q,!0;const ne=Math.max(M.overscaledZ-y,b);for(let ee=M.overscaledZ-1;ee>=ne;ee--){const Ae=M.scaledTo(ee),ve=w.getLoadedTile(Ae);if(ve)return r.setCrossFadeLogic({fadingRole:at.Base,fadingDirection:bt.Incoming,fadingParentID:ve.tileID,fadeEndTime:f+S}),ve.setCrossFadeLogic({fadingRole:at.Parent,fadingDirection:bt.Departing,fadeEndTime:f+S}),c[Ae.key]=Ae,!0}return!1}function ai(w,r,c,f,y,b){if(!r.hasData())return!1;const S=r.tileID.children(y);let M=Yt(w,r,S,c,f,y,b);if(M)return!0;for(const N of S)Yt(w,r,N.children(y),c,f,y,b)&&(M=!0);return M}function Yt(w,r,c,f,y,b,S){if(c[0].overscaledZ>=b)return!1;let M=!1;for(const N of c){const j=w.getLoadedTile(N);if(!j)continue;const{fadingRole:q,fadingDirection:ne,fadingParentID:ee}=j;q===at.Base&&ne===bt.Departing&&ee||(j.setCrossFadeLogic({fadingRole:at.Base,fadingDirection:bt.Departing,fadingParentID:r.tileID,fadeEndTime:y+S}),r.setCrossFadeLogic({fadingRole:at.Parent,fadingDirection:bt.Incoming,fadeEndTime:y+S})),f[N.key]=N,M=!0}return M}function Zn(w,r,c,f){const y=w.tileID;return!!w.selfFading||!w.hasData()&&!!r.has(y)&&(w.setSelfFadeLogic(c+f),!0)}function $i(w,r){var c;w.needsHillshadePrepare=!0,w.needsTerrainPrepare=!0;let f=r.tileID.canonical.x-w.tileID.canonical.x;const y=r.tileID.canonical.y-w.tileID.canonical.y,b=Math.pow(2,w.tileID.canonical.z),S=r.tileID.key;f===0&&y===0||Math.abs(y)>1||(Math.abs(f)>1&&(Math.abs(f+b)===1?f+=b:Math.abs(f-b)===1&&(f-=b)),r.dem&&w.dem&&(w.dem.backfillBorder(r.dem,f,y),!((c=w.neighboringTiles)===null||c===void 0)&&c[S]&&(w.neighboringTiles[S].backfilled=!0)))}class sl{constructor(){this._tiles={}}handleWrapJump(r){const c={};for(const f in this._tiles){const y=this._tiles[f];y.tileID=y.tileID.unwrapTo(y.tileID.wrap+r),c[y.tileID.key]=y}this._tiles=c}setFeatureState(r,c){for(const f in this._tiles)this._tiles[f].setFeatureState(r,c)}getAllTiles(){return Object.values(this._tiles)}getAllIds(r=!1){return r?Object.values(this._tiles).map((c=>c.tileID)).sort(o.ax).map((c=>c.key)):Object.keys(this._tiles)}getTileById(r){return this._tiles[r]}setTile(r,c){this._tiles[r]=c}deleteTileById(r){delete this._tiles[r]}getLoadedTile(r){const c=this.getTileById(r.key);return c?.hasData()?c:null}isIdRenderable(r,c=!1){var f;return(f=this.getTileById(r))===null||f===void 0?void 0:f.isRenderable(c)}getRenderableIds(r=0,c){const f=[];for(const y of this.getAllIds())this.isIdRenderable(y,c)&&f.push(this.getTileById(y));return c?f.sort(((y,b)=>{const S=y.tileID,M=b.tileID,N=new o.P(S.canonical.x,S.canonical.y)._rotate(-r),j=new o.P(M.canonical.x,M.canonical.y)._rotate(-r);return S.overscaledZ-M.overscaledZ||j.y-N.y||j.x-N.x})).map((y=>y.tileID.key)):f.map((y=>y.tileID)).sort(o.ax).map((y=>y.key))}}class ns extends o.E{constructor(r,c,f){super(),this.id=r,this.dispatcher=f,this.on("data",(y=>this._dataHandler(y))),this.on("dataloading",(()=>{this._sourceErrored=!1})),this.on("error",(()=>{this._sourceErrored=this._source.loaded()})),this._source=((y,b,S,M)=>{const N=new(ye(b.type))(y,b,S,M);if(N.id!==y)throw new Error(`Expected Source id to be ${y} instead of ${N.id}`);return N})(r,c,f,this),this._inViewTiles=new sl,this._outOfViewCache=new o.ay(0,(y=>this._unloadTile(y))),this._timers={},this._maxTileCacheSize=null,this._maxTileCacheZoomLevels=null,this._rasterFadeDuration=0,this._maxFadingAncestorLevels=5,this._state=new Ft,this._didEmitContent=!1,this._updated=!1}onAdd(r){this.map=r,this._maxTileCacheSize=r?r._maxTileCacheSize:null,this._maxTileCacheZoomLevels=r?r._maxTileCacheZoomLevels:null,this._source&&this._source.onAdd&&this._source.onAdd(r)}onRemove(r){for(const c of this._inViewTiles.getAllTiles())c.unloadVectorData();this.clearTiles(),this._source&&this._source.onRemove&&this._source.onRemove(r),this._inViewTiles=new sl}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;if(!(this.used===void 0&&this.usedForTerrain===void 0||this.used||this.usedForTerrain))return!0;if(!this._updated)return!1;for(const r of this._inViewTiles.getAllTiles())if(r.state!=="loaded"&&r.state!=="errored")return!1;return!0}getSource(){return this._source}getState(){return this._state}pause(){this._paused=!0}resume(){if(!this._paused)return;const r=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,r&&this.reload(),this.transform&&this.update(this.transform,this.terrain)}_loadTile(r,c,f){return o._(this,void 0,void 0,(function*(){try{yield this._source.loadTile(r),this._tileLoaded(r,c,f)}catch(y){r.state="errored",y.status!==404?this._source.fire(new o.k(y,{tile:r})):this.update(this.transform,this.terrain)}}))}_unloadTile(r){this._source.unloadTile&&this._source.unloadTile(r)}_abortTile(r){this._source.abortTile&&this._source.abortTile(r),this._source.fire(new o.l("dataabort",{tile:r,coord:r.tileID,dataType:"source"}))}serialize(){return this._source.serialize()}prepare(r){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._inViewTiles,this.map?this.map.painter:null);for(const c of this._inViewTiles.getAllTiles())c.upload(r),c.prepare(this.map.style.imageManager)}getIds(){return this._inViewTiles.getAllIds(!0)}getRenderableIds(r){var c;return this._inViewTiles.getRenderableIds((c=this.transform)===null||c===void 0?void 0:c.bearingInRadians,r)}hasRenderableParent(r){const c=r.overscaledZ-1;if(c>=this._source.minzoom){const f=this.getLoadedTile(r.scaledTo(c));if(f)return this._inViewTiles.isIdRenderable(f.tileID.key)}return!1}reload(r,c=void 0){if(this._paused)this._shouldReloadOnResume=!0;else{this._outOfViewCache.reset();for(const f of this._inViewTiles.getAllIds()){const y=this._inViewTiles.getTileById(f);c&&!this._source.shouldReloadTile(y,c)||(r?this._reloadTile(f,"expired"):y.state!=="errored"&&this._reloadTile(f,"reloading"))}}}_reloadTile(r,c){return o._(this,void 0,void 0,(function*(){const f=this._inViewTiles.getTileById(r);f&&(f.state!=="loading"&&(f.state=c),yield this._loadTile(f,r,c))}))}_tileLoaded(r,c,f){r.timeAdded=z(),r.selfFading&&(r.fadeEndTime=r.timeAdded+this._rasterFadeDuration),f==="expired"&&(r.refreshedUponExpiration=!0),this._setTileReloadTimer(c,r),this.getSource().type==="raster-dem"&&r.dem&&(function(y,b){var S,M;const N=b.getRenderableIds();for(const j of N){if(!y.neighboringTiles||!y.neighboringTiles[j])continue;const q=b.getTileById(j);y.neighboringTiles[j].backfilled||$i(y,q),!((M=(S=q.neighboringTiles)===null||S===void 0?void 0:S[y.tileID.key])===null||M===void 0)&&M.backfilled||$i(q,y)}})(r,this._inViewTiles),this._state.initializeTileState(r,this.map?this.map.painter:null),r.aborted||this._source.fire(new o.l("data",{dataType:"source",tile:r,coord:r.tileID}))}getTile(r){return this.getTileByID(r.key)}getTileByID(r){return this._inViewTiles.getTileById(r)}_retainLoadedChildren(r,c){const f=this._getLoadedDescendents(c),y=new Set;for(const b of c){const S=f[b.key];if(!S?.length){y.add(b);continue}const M=b.overscaledZ+ns.maxOverzooming,N=S.filter((ne=>ne.tileID.overscaledZ<=M));if(!N.length){y.add(b);continue}const j=Math.min(...N.map((ne=>ne.tileID.overscaledZ))),q=N.filter((ne=>ne.tileID.overscaledZ===j)).map((ne=>ne.tileID));for(const ne of q)r[ne.key]=ne;this._areDescendentsComplete(q,j,b.overscaledZ)||y.add(b)}return y}_getLoadedDescendents(r){var c;const f={};for(const y of this._inViewTiles.getAllTiles().filter((b=>b.hasData())))for(const b of r)y.tileID.isChildOf(b)&&(f[c=b.key]||(f[c]=[])).push(y);return f}_areDescendentsComplete(r,c,f){return r.length===1&&r[0].isOverscaled()?r[0].overscaledZ===c:Math.pow(4,c-f)===r.length}getLoadedTile(r){return this._inViewTiles.getLoadedTile(r)}updateCacheSize(r){const c=Math.ceil(r.width/this._source.tileSize)+1,f=Math.ceil(r.height/this._source.tileSize)+1,y=Math.floor(c*f*(this._maxTileCacheZoomLevels===null?o.c.MAX_TILE_CACHE_ZOOM_LEVELS:this._maxTileCacheZoomLevels)),b=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,y):y;this._outOfViewCache.setMaxSize(b)}handleWrapJump(r){const c=Math.round((r-(this._prevLng===void 0?r:this._prevLng))/360);this._prevLng=r,c&&(this._inViewTiles.handleWrapJump(c),this._resetTileReloadTimers())}update(r,c){if(!this._sourceLoaded||this._paused)return;let f;this.transform=r,this.terrain=c,this.updateCacheSize(r),this.handleWrapJump(this.transform.center.lng),this.used||this.usedForTerrain?this._source.tileID?f=r.getVisibleUnwrappedCoordinates(this._source.tileID).map((N=>new o.a2(N.canonical.z,N.wrap,N.canonical.z,N.canonical.x,N.canonical.y))):(f=Tn(r,{tileSize:this.usedForTerrain?this.tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.type==="vector"&&this.map._zoomLevelsToOverscale!==void 0?r.maxZoom-this.map._zoomLevelsToOverscale:this._source.maxzoom,roundZoom:!this.usedForTerrain&&this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled,terrain:c,calculateTileZoom:this._source.calculateTileZoom}),this._source.hasTile&&(f=f.filter((N=>this._source.hasTile(N))))):f=[],this.usedForTerrain&&(f=this._addTerrainIdealTiles(f));const y=f.length===0&&!this._updated&&this._didEmitContent;this._updated=!0,y&&this.fire(new o.l("data",{sourceDataType:"idle",dataType:"source",sourceId:this.id}));const b=wr(r,this._source),S=this._updateRetainedTiles(f,b),M=xn(this._source.type);M&&this._rasterFadeDuration>0&&!c&&(function(N,j,q,ne,ee,Ae,ve){const ke=z(),Oe=o.aw(j);for(const Qe of j){const Ge=N.getTileById(Qe.key);Ge.fadingDirection!==bt.Departing&&Ge.fadeOpacity!==0||Ge.resetFadeLogic(),Di(N,Ge,q,ke,ne,ee,ve)||ai(N,Ge,q,ke,Ae,ve)||Zn(Ge,Oe,ke,ve)||Ge.resetFadeLogic()}})(this._inViewTiles,f,S,this._maxFadingAncestorLevels,this._source.minzoom,this._source.maxzoom,this._rasterFadeDuration),M?this._cleanUpRasterTiles(S):this._cleanUpVectorTiles(S)}_cleanUpRasterTiles(r){for(const c of this._inViewTiles.getAllIds())r[c]||this._removeTile(c)}_cleanUpVectorTiles(r){for(const c of this._inViewTiles.getAllIds()){const f=this._inViewTiles.getTileById(c);r[c]?f.clearSymbolFadeHold():f.hasSymbolBuckets?f.holdingForSymbolFade()?f.symbolFadeFinished()&&this._removeTile(c):f.setSymbolHoldDuration(this.map._fadeDuration):this._removeTile(c)}}_addTerrainIdealTiles(r){const c=[];for(const f of r)if(f.canonical.z>this._source.minzoom){const y=f.scaledTo(f.canonical.z-1);c.push(y);const b=f.scaledTo(Math.max(this._source.minzoom,Math.min(f.canonical.z,5)));c.push(b)}return r.concat(c)}releaseSymbolFadeTiles(){for(const r of this._inViewTiles.getAllIds())this._inViewTiles.getTileById(r).holdingForSymbolFade()&&this._removeTile(r)}_updateRetainedTiles(r,c){var f;const y=new Set;for(const j of r)this._addTile(j).hasData()||y.add(j);const b=r.reduce(((j,q)=>(j[q.key]=q,j)),{}),S=this._retainLoadedChildren(b,y),M={},N=Math.max(c-ns.maxUnderzooming,this._source.minzoom);for(const j of S){let q=this._inViewTiles.getTileById(j.key),ne=q?.wasRequested();for(let ee=j.overscaledZ-1;ee>=N;--ee){const Ae=j.scaledTo(ee);if(M[Ae.key])break;if(M[Ae.key]=!0,q=this.getTile(Ae),!q&&ne&&(q=this._addTile(Ae)),q){const ve=q.hasData();if((ve||!(!((f=this.map)===null||f===void 0)&&f.cancelPendingTileRequestsWhileZooming)||ne)&&(b[Ae.key]=Ae),ne=q.wasRequested(),ve)break}}}return b}_addTile(r){let c=this._inViewTiles.getTileById(r.key);if(c)return c;c=this._outOfViewCache.getAndRemove(r),c&&(c.resetFadeLogic(),this._setTileReloadTimer(r.key,c),c.tileID=r,this._state.initializeTileState(c,this.map?this.map.painter:null));const f=c;return c||(c=new Ht(r,this._source.tileSize*r.overscaleFactor()),this._loadTile(c,r.key,c.state)),c.uses++,this._inViewTiles.setTile(r.key,c),f||this._source.fire(new o.l("dataloading",{tile:c,coord:c.tileID,dataType:"source"})),c}_setTileReloadTimer(r,c){this._clearTileReloadTimer(r);const f=c.getExpiryTimeout();f&&(this._timers[r]=setTimeout((()=>{this._reloadTile(r,"expired"),delete this._timers[r]}),f))}_clearTileReloadTimer(r){const c=this._timers[r];c&&(clearTimeout(c),delete this._timers[r])}_resetTileReloadTimers(){for(const r in this._timers)clearTimeout(this._timers[r]),delete this._timers[r];for(const r of this._inViewTiles.getAllIds()){const c=this._inViewTiles.getTileById(r);this._setTileReloadTimer(r,c)}}refreshTiles(r){for(const c of this._inViewTiles.getAllIds()){const f=this._inViewTiles.getTileById(c);(this._inViewTiles.isIdRenderable(c)||f.state=="errored")&&r.some((y=>y.equals(f.tileID.canonical)))&&this._reloadTile(c,"expired")}}_removeTile(r){const c=this._inViewTiles.getTileById(r);c&&(c.uses--,this._inViewTiles.deleteTileById(r),this._clearTileReloadTimer(r),c.uses>0||(c.hasData()&&c.state!=="reloading"?this._outOfViewCache.add(c.tileID,c,c.getExpiryTimeout()):(c.aborted=!0,this._abortTile(c),this._unloadTile(c))))}_dataHandler(r){r.dataType==="source"&&(r.sourceDataType!=="metadata"?r.sourceDataType==="content"&&this._sourceLoaded&&!this._paused&&(this.reload(r.sourceDataChanged,r.shouldReloadTileOptions),this.transform&&this.update(this.transform,this.terrain),this._didEmitContent=!0):this._sourceLoaded=!0)}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const r of this._inViewTiles.getAllIds())this._removeTile(r);this._outOfViewCache.reset()}tilesIn(r,c,f){const y=[],b=this.transform;if(!b)return y;const S=b.getCoveringTilesDetailsProvider().allowWorldCopies(),M=f?b.getCameraQueryGeometry(r):r,N=Ae=>b.screenPointToMercatorCoordinate(Ae,this.terrain),j=this.transformBbox(r,N,!S),q=this.transformBbox(M,N,!S),ne=this.getIds(),ee=o.ac.fromPoints(q);for(let Ae=0;Ae<ne.length;Ae++){const ve=this._inViewTiles.getTileById(ne[Ae]);if(ve.holdingForSymbolFade())continue;const ke=S?[ve.tileID]:[ve.tileID.unwrapTo(-1),ve.tileID.unwrapTo(0)],Oe=Math.pow(2,b.zoom-ve.tileID.overscaledZ),Qe=c*ve.queryPadding*o.a5/ve.tileSize/Oe;for(const Ge of ke){const ot=ee.map((Ze=>Ge.getTilePoint(new o.ab(Ze.x,Ze.y))));if(ot.expandBy(Qe),ot.intersects(Bn)){const Ze=j.map((dt=>Ge.getTilePoint(dt))),ct=q.map((dt=>Ge.getTilePoint(dt)));y.push({tile:ve,tileID:S?Ge:Ge.unwrapTo(0),queryGeometry:Ze,cameraQueryGeometry:ct,scale:Oe})}}}return y}transformBbox(r,c,f){let y=r.map(c);if(f){const b=o.ac.fromPoints(r);b.shrinkBy(.001*Math.min(b.width(),b.height()));const S=b.map(c);o.ac.fromPoints(y).covers(S)||(y=y.map((M=>M.x>.5?new o.ab(M.x-1,M.y,M.z):M)))}return y}getVisibleCoordinates(r){const c=this.getRenderableIds(r).map((f=>this._inViewTiles.getTileById(f).tileID));return this.transform&&this.transform.populateCache(c),c}hasTransition(){return!!this._source.hasTransition()||!(!xn(this._source.type)||!(function(r,c){if(c<=0)return!1;const f=z();for(const y of r.getAllTiles())if(y.fadeEndTime>=f)return!0;return!1})(this._inViewTiles,this._rasterFadeDuration))}setRasterFadeDuration(r){this._rasterFadeDuration=r}setFeatureState(r,c,f){this._state.updateState(r=r||o.aa,c,f)}removeFeatureState(r,c,f){this._state.removeFeatureState(r=r||o.aa,c,f)}getFeatureState(r,c){return this._state.getState(r=r||o.aa,c)}setDependencies(r,c,f){const y=this._inViewTiles.getTileById(r);y&&y.setDependencies(c,f)}reloadTilesForDependencies(r,c){for(const f of this._inViewTiles.getAllIds())this._inViewTiles.getTileById(f).hasDependency(r,c)&&this._reloadTile(f,"reloading");this._outOfViewCache.filter((f=>!f.hasDependency(r,c)))}areTilesLoaded(){for(const r of this._inViewTiles.getAllTiles())if(r.state!=="loaded"&&r.state!=="errored")return!1;return!0}}ns.maxUnderzooming=10,ns.maxOverzooming=3;class pr{constructor(r,c){this.reset(r,c)}reset(r,c){this.points=r||[],this._distances=[0];for(let f=1;f<this.points.length;f++)this._distances[f]=this._distances[f-1]+this.points[f].dist(this.points[f-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(c||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(r){if(this.points.length===1)return this.points[0];r=o.ao(r,0,1);let c=1,f=this._distances[c];const y=r*this.paddedLength+this.padding;for(;f<y&&c<this._distances.length;)f=this._distances[++c];const b=c-1,S=this._distances[b],M=f-S,N=M>0?(y-S)/M:0;return this.points[b].mult(1-N).add(this.points[c].mult(N))}}function nn(w,r){let c=!0;return w==="always"||w!=="never"&&r!=="never"||(c=!1),c}class un{constructor(r,c,f){const y=this.boxCells=[],b=this.circleCells=[];this.xCellCount=Math.ceil(r/f),this.yCellCount=Math.ceil(c/f);for(let S=0;S<this.xCellCount*this.yCellCount;S++)y.push([]),b.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=r,this.height=c,this.xScale=this.xCellCount/r,this.yScale=this.yCellCount/c,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(r,c,f,y,b){this._forEachCell(c,f,y,b,this._insertBoxCell,this.boxUid++),this.boxKeys.push(r),this.bboxes.push(c),this.bboxes.push(f),this.bboxes.push(y),this.bboxes.push(b)}insertCircle(r,c,f,y){this._forEachCell(c-y,f-y,c+y,f+y,this._insertCircleCell,this.circleUid++),this.circleKeys.push(r),this.circles.push(c),this.circles.push(f),this.circles.push(y)}_insertBoxCell(r,c,f,y,b,S){this.boxCells[b].push(S)}_insertCircleCell(r,c,f,y,b,S){this.circleCells[b].push(S)}_query(r,c,f,y,b,S,M){if(f<0||r>this.width||y<0||c>this.height)return[];const N=[];if(r<=0&&c<=0&&this.width<=f&&this.height<=y){if(b)return[{key:null,x1:r,y1:c,x2:f,y2:y}];for(let j=0;j<this.boxKeys.length;j++)N.push({key:this.boxKeys[j],x1:this.bboxes[4*j],y1:this.bboxes[4*j+1],x2:this.bboxes[4*j+2],y2:this.bboxes[4*j+3]});for(let j=0;j<this.circleKeys.length;j++){const q=this.circles[3*j],ne=this.circles[3*j+1],ee=this.circles[3*j+2];N.push({key:this.circleKeys[j],x1:q-ee,y1:ne-ee,x2:q+ee,y2:ne+ee})}}else this._forEachCell(r,c,f,y,this._queryCell,N,{hitTest:b,overlapMode:S,seenUids:{box:{},circle:{}}},M);return N}query(r,c,f,y){return this._query(r,c,f,y,!1,null)}hitTest(r,c,f,y,b,S){return this._query(r,c,f,y,!0,b,S).length>0}hitTestCircle(r,c,f,y,b){const S=r-f,M=r+f,N=c-f,j=c+f;if(M<0||S>this.width||j<0||N>this.height)return!1;const q=[];return this._forEachCell(S,N,M,j,this._queryCellCircle,q,{hitTest:!0,overlapMode:y,circle:{x:r,y:c,radius:f},seenUids:{box:{},circle:{}}},b),q.length>0}_queryCell(r,c,f,y,b,S,M,N){const{seenUids:j,hitTest:q,overlapMode:ne}=M,ee=this.boxCells[b];if(ee!==null){const ve=this.bboxes;for(const ke of ee)if(!j.box[ke]){j.box[ke]=!0;const Oe=4*ke,Qe=this.boxKeys[ke];if(r<=ve[Oe+2]&&c<=ve[Oe+3]&&f>=ve[Oe+0]&&y>=ve[Oe+1]&&(!N||N(Qe))&&(!q||!nn(ne,Qe.overlapMode))&&(S.push({key:Qe,x1:ve[Oe],y1:ve[Oe+1],x2:ve[Oe+2],y2:ve[Oe+3]}),q))return!0}}const Ae=this.circleCells[b];if(Ae!==null){const ve=this.circles;for(const ke of Ae)if(!j.circle[ke]){j.circle[ke]=!0;const Oe=3*ke,Qe=this.circleKeys[ke];if(this._circleAndRectCollide(ve[Oe],ve[Oe+1],ve[Oe+2],r,c,f,y)&&(!N||N(Qe))&&(!q||!nn(ne,Qe.overlapMode))){const Ge=ve[Oe],ot=ve[Oe+1],Ze=ve[Oe+2];if(S.push({key:Qe,x1:Ge-Ze,y1:ot-Ze,x2:Ge+Ze,y2:ot+Ze}),q)return!0}}}return!1}_queryCellCircle(r,c,f,y,b,S,M,N){const{circle:j,seenUids:q,overlapMode:ne}=M,ee=this.boxCells[b];if(ee!==null){const ve=this.bboxes;for(const ke of ee)if(!q.box[ke]){q.box[ke]=!0;const Oe=4*ke,Qe=this.boxKeys[ke];if(this._circleAndRectCollide(j.x,j.y,j.radius,ve[Oe+0],ve[Oe+1],ve[Oe+2],ve[Oe+3])&&(!N||N(Qe))&&!nn(ne,Qe.overlapMode))return S.push(!0),!0}}const Ae=this.circleCells[b];if(Ae!==null){const ve=this.circles;for(const ke of Ae)if(!q.circle[ke]){q.circle[ke]=!0;const Oe=3*ke,Qe=this.circleKeys[ke];if(this._circlesCollide(ve[Oe],ve[Oe+1],ve[Oe+2],j.x,j.y,j.radius)&&(!N||N(Qe))&&!nn(ne,Qe.overlapMode))return S.push(!0),!0}}}_forEachCell(r,c,f,y,b,S,M,N){const j=this._convertToXCellCoord(r),q=this._convertToYCellCoord(c),ne=this._convertToXCellCoord(f),ee=this._convertToYCellCoord(y);for(let Ae=j;Ae<=ne;Ae++)for(let ve=q;ve<=ee;ve++)if(b.call(this,r,c,f,y,this.xCellCount*ve+Ae,S,M,N))return}_convertToXCellCoord(r){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(r*this.xScale)))}_convertToYCellCoord(r){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(r*this.yScale)))}_circlesCollide(r,c,f,y,b,S){const M=y-r,N=b-c,j=f+S;return j*j>M*M+N*N}_circleAndRectCollide(r,c,f,y,b,S,M){const N=(S-y)/2,j=Math.abs(r-(y+N));if(j>N+f)return!1;const q=(M-b)/2,ne=Math.abs(c-(b+q));if(ne>q+f)return!1;if(j<=N||ne<=q)return!0;const ee=j-N,Ae=ne-q;return ee*ee+Ae*Ae<=f*f}}function Ri(w,r,c){const f=o.N();if(!w){const{vecSouth:ne,vecEast:ee}=ks(r),Ae=E();Ae[0]=ee[0],Ae[1]=ee[1],Ae[2]=ne[0],Ae[3]=ne[1],y=Ae,(q=(S=(b=Ae)[0])*(j=b[3])-(N=b[2])*(M=b[1]))&&(y[0]=j*(q=1/q),y[1]=-M*q,y[2]=-N*q,y[3]=S*q),f[0]=Ae[0],f[1]=Ae[1],f[4]=Ae[2],f[5]=Ae[3]}var y,b,S,M,N,j,q;return o.Q(f,f,[1/c,1/c,1]),f}function El(w,r,c,f){if(w){const y=o.N();if(!r){const{vecSouth:b,vecEast:S}=ks(c);y[0]=S[0],y[1]=S[1],y[4]=b[0],y[5]=b[1]}return o.Q(y,y,[f,f,1]),y}return c.pixelsToClipSpaceMatrix}function ks(w){const r=Math.cos(w.rollInRadians),c=Math.sin(w.rollInRadians),f=Math.cos(w.pitchInRadians),y=Math.cos(w.bearingInRadians),b=Math.sin(w.bearingInRadians),S=o.aD();S[0]=-y*f*c-b*r,S[1]=-b*f*c+y*r;const M=o.aE(S);M<1e-9?o.aF(S):o.aG(S,S,1/M);const N=o.aD();N[0]=y*f*r-b*c,N[1]=b*f*r+y*c;const j=o.aE(N);return j<1e-9?o.aF(N):o.aG(N,N,1/j),{vecEast:N,vecSouth:S}}function dn(w,r,c,f){let y;f?(y=[w,r,f(w,r),1],o.aI(y,y,c)):(y=[w,r,0,1],IA(y,y,c));const b=y[3];return{point:new o.P(y[0]/b,y[1]/b),signedDistanceFromCamera:b,isOccluded:!1}}function ol(w,r){return .5+w/r*.5}function al(w,r){return w.x>=-r[0]&&w.x<=r[0]&&w.y>=-r[1]&&w.y<=r[1]}function ec(w,r,c,f,y,b,S,M,N,j,q,ne,ee){const Ae=c?w.textSizeData:w.iconSizeData,ve=o.az(Ae,r.transform.zoom),ke=[256/r.width*2+1,256/r.height*2+1],Oe=c?w.text.dynamicLayoutVertexArray:w.icon.dynamicLayoutVertexArray;Oe.clear();const Qe=w.lineVertexArray,Ge=c?w.text.placedSymbolArray:w.icon.placedSymbolArray,ot=r.transform.width/r.transform.height;let Ze=!1;for(let ct=0;ct<Ge.length;ct++){const dt=Ge.get(ct);if(dt.hidden||dt.writingMode===o.aA.vertical&&!Ze){Ba(dt.numGlyphs,Oe);continue}Ze=!1;const it=new o.P(dt.anchorX,dt.anchorY),_t={getElevation:ee,pitchedLabelPlaneMatrix:f,lineVertexArray:Qe,pitchWithMap:b,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},transform:r.transform,tileAnchorPoint:it,unwrappedTileID:N,width:j,height:q,translation:ne},Dt=ll(dt.anchorX,dt.anchorY,_t);if(!al(Dt.point,ke)){Ba(dt.numGlyphs,Oe);continue}const Pt=ol(r.transform.cameraToCenterDistance,Dt.signedDistanceFromCamera),Rt=o.aB(Ae,ve,dt),Qt=b?Rt*r.transform.getPitchedTextCorrection(dt.anchorX,dt.anchorY,N)/Pt:Rt*Pt,nr=tc({projectionContext:_t,pitchedLabelPlaneMatrixInverse:y,symbol:dt,fontSize:Qt,flip:!1,keepUpright:S,glyphOffsetArray:w.glyphOffsetArray,dynamicLayoutVertexArray:Oe,aspectRatio:ot,rotateToLine:M});Ze=nr.useVertical,(nr.notEnoughRoom||Ze||nr.needsFlipping&&tc({projectionContext:_t,pitchedLabelPlaneMatrixInverse:y,symbol:dt,fontSize:Qt,flip:!0,keepUpright:S,glyphOffsetArray:w.glyphOffsetArray,dynamicLayoutVertexArray:Oe,aspectRatio:ot,rotateToLine:M}).notEnoughRoom)&&Ba(dt.numGlyphs,Oe)}c?w.text.dynamicLayoutVertexBuffer.updateData(Oe):w.icon.dynamicLayoutVertexBuffer.updateData(Oe)}function Ec(w,r,c,f,y,b,S,M){const N=b.glyphStartIndex+b.numGlyphs,j=b.lineStartIndex,q=b.lineStartIndex+b.lineLength,ne=r.getoffsetX(b.glyphStartIndex),ee=r.getoffsetX(N-1),Ae=Ro(w*ne,c,f,y,b.segment,j,q,M,S);if(!Ae)return null;const ve=Ro(w*ee,c,f,y,b.segment,j,q,M,S);return ve?M.projectionCache.anyProjectionOccluded?null:{first:Ae,last:ve}:null}function fi(w,r,c,f){return w===o.aA.horizontal&&Math.abs(c.y-r.y)>Math.abs(c.x-r.x)*f?{useVertical:!0}:(w===o.aA.vertical?r.y<c.y:r.x>c.x)?{needsFlipping:!0}:null}function tc(w){const{projectionContext:r,pitchedLabelPlaneMatrixInverse:c,symbol:f,fontSize:y,flip:b,keepUpright:S,glyphOffsetArray:M,dynamicLayoutVertexArray:N,aspectRatio:j,rotateToLine:q}=w,ne=y/24,ee=f.lineOffsetX*ne,Ae=f.lineOffsetY*ne;let ve;if(f.numGlyphs>1){const ke=f.glyphStartIndex+f.numGlyphs,Oe=f.lineStartIndex,Qe=f.lineStartIndex+f.lineLength,Ge=Ec(ne,M,ee,Ae,b,f,q,r);if(!Ge)return{notEnoughRoom:!0};const ot=rA(Ge.first.point.x,Ge.first.point.y,r,c),Ze=rA(Ge.last.point.x,Ge.last.point.y,r,c);if(S&&!b){const ct=fi(f.writingMode,ot,Ze,j);if(ct)return ct}ve=[Ge.first];for(let ct=f.glyphStartIndex+1;ct<ke-1;ct++){const dt=Ro(ne*M.getoffsetX(ct),ee,Ae,b,f.segment,Oe,Qe,r,q);if(!dt)return{notEnoughRoom:!0};ve.push(dt)}ve.push(Ge.last)}else{if(S&&!b){const Oe=jn(r.tileAnchorPoint.x,r.tileAnchorPoint.y,r).point,Qe=f.lineStartIndex+f.segment+1,Ge=new o.P(r.lineVertexArray.getx(Qe),r.lineVertexArray.gety(Qe)),ot=jn(Ge.x,Ge.y,r),Ze=ot.signedDistanceFromCamera>0?ot.point:Sl(r.tileAnchorPoint,Ge,Oe,1,r),ct=rA(Oe.x,Oe.y,r,c),dt=rA(Ze.x,Ze.y,r,c),it=fi(f.writingMode,ct,dt,j);if(it)return it}const ke=Ro(ne*M.getoffsetX(f.glyphStartIndex),ee,Ae,b,f.segment,f.lineStartIndex,f.lineStartIndex+f.lineLength,r,q);if(!ke||r.projectionCache.anyProjectionOccluded)return{notEnoughRoom:!0};ve=[ke]}for(const ke of ve)o.aH(N,ke.point,ke.angle);return{}}function Sl(w,r,c,f,y){const b=w.add(w.sub(r)._unit()),S=jn(b.x,b.y,y).point,M=c.sub(S);return c.add(M._mult(f/M.mag()))}function Ci(w,r,c){const f=r.projectionCache;if(f.projections[w])return f.projections[w];const y=new o.P(r.lineVertexArray.getx(w),r.lineVertexArray.gety(w)),b=jn(y.x,y.y,r);if(b.signedDistanceFromCamera>0)return f.projections[w]=b.point,f.anyProjectionOccluded=f.anyProjectionOccluded||b.isOccluded,b.point;const S=w-c.direction;return Sl(c.distanceFromAnchor===0?r.tileAnchorPoint:new o.P(r.lineVertexArray.getx(S),r.lineVertexArray.gety(S)),y,c.previousVertex,c.absOffsetX-c.distanceFromAnchor+1,r)}function jn(w,r,c){const f=w+c.translation[0],y=r+c.translation[1];let b;return c.pitchWithMap?(b=dn(f,y,c.pitchedLabelPlaneMatrix,c.getElevation),b.isOccluded=!1):(b=c.transform.projectTileCoordinates(f,y,c.unwrappedTileID,c.getElevation),b.point.x=(.5*b.point.x+.5)*c.width,b.point.y=(.5*-b.point.y+.5)*c.height),b}function rA(w,r,c,f){if(c.pitchWithMap){const y=[w,r,0,1];return o.aI(y,y,f),c.transform.projectTileCoordinates(y[0]/y[3],y[1]/y[3],c.unwrappedTileID,c.getElevation).point}return{x:w/c.width*2-1,y:1-r/c.height*2}}function ll(w,r,c){return c.transform.projectTileCoordinates(w,r,c.unwrappedTileID,c.getElevation)}function cl(w,r,c){return w._unit()._perp()._mult(r*c)}function Us(w,r,c,f,y,b,S,M,N){if(M.projectionCache.offsets[w])return M.projectionCache.offsets[w];const j=c.add(r);if(w+N.direction<f||w+N.direction>=y)return M.projectionCache.offsets[w]=j,j;const q=Ci(w+N.direction,M,N),ne=cl(q.sub(c),S,N.direction),ee=c.add(ne),Ae=q.add(ne);return M.projectionCache.offsets[w]=o.aJ(b,j,ee,Ae)||j,M.projectionCache.offsets[w]}function Ro(w,r,c,f,y,b,S,M,N){const j=f?w-r:w+r;let q=j>0?1:-1,ne=0;f&&(q*=-1,ne=Math.PI),q<0&&(ne+=Math.PI);let ee,Ae=q>0?b+y:b+y+1;M.projectionCache.cachedAnchorPoint?ee=M.projectionCache.cachedAnchorPoint:(ee=jn(M.tileAnchorPoint.x,M.tileAnchorPoint.y,M).point,M.projectionCache.cachedAnchorPoint=ee);let ve,ke,Oe=ee,Qe=ee,Ge=0,ot=0;const Ze=Math.abs(j),ct=[];let dt;for(;Ge+ot<=Ze;){if(Ae+=q,Ae<b||Ae>=S)return null;Ge+=ot,Qe=Oe,ke=ve;const Dt={absOffsetX:Ze,direction:q,distanceFromAnchor:Ge,previousVertex:Qe};if(Oe=Ci(Ae,M,Dt),c===0)ct.push(Qe),dt=Oe.sub(Qe);else{let Pt;const Rt=Oe.sub(Qe);Pt=Rt.mag()===0?cl(Ci(Ae+q,M,Dt).sub(Oe),c,q):cl(Rt,c,q),ke||(ke=Qe.add(Pt)),ve=Us(Ae,Pt,Oe,b,S,ke,c,M,Dt),ct.push(ke),dt=ve.sub(ke)}ot=dt.mag()}const it=dt._mult((Ze-Ge)/ot)._add(ke||Qe),_t=ne+Math.atan2(Oe.y-Qe.y,Oe.x-Qe.x);return ct.push(it),{point:it,angle:N?_t:0,path:ct}}const fs=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function Ba(w,r){for(let c=0;c<w;c++){const f=r.length;r.resize(f+4),r.float32.set(fs,3*f)}}function IA(w,r,c){const f=r[0],y=r[1];return w[0]=c[0]*f+c[4]*y+c[12],w[1]=c[1]*f+c[5]*y+c[13],w[3]=c[3]*f+c[7]*y+c[15],w}const Mn=100;class Sc{constructor(r,c=new un(r.width+200,r.height+200,25),f=new un(r.width+200,r.height+200,25)){this.transform=r,this.grid=c,this.ignoredGrid=f,this.pitchFactor=Math.cos(r.pitch*Math.PI/180)*r.cameraToCenterDistance,this.screenRightBoundary=r.width+Mn,this.screenBottomBoundary=r.height+Mn,this.gridRightBoundary=r.width+200,this.gridBottomBoundary=r.height+200,this.perspectiveRatioCutoff=.6}placeCollisionBox(r,c,f,y,b,S,M,N,j,q,ne,ee){const Ae=this.projectAndGetPerspectiveRatio(r.anchorPointX+N[0],r.anchorPointY+N[1],b,q,ee),ve=f*Ae.perspectiveRatio;let ke;if(S||M)ke=this._projectCollisionBox(r,ve,y,b,S,M,N,Ae,q,ne,ee);else{const dt=Ae.x+(ne?ne.x*ve:0),it=Ae.y+(ne?ne.y*ve:0);ke={allPointsOccluded:!1,box:[dt+r.x1*ve,it+r.y1*ve,dt+r.x2*ve,it+r.y2*ve]}}const[Oe,Qe,Ge,ot]=ke.box,Ze=S?ke.allPointsOccluded:Ae.isOccluded;let ct=Ze;return ct||(ct=Ae.perspectiveRatio<this.perspectiveRatioCutoff),ct||(ct=!this.isInsideGrid(Oe,Qe,Ge,ot)),ct||c!=="always"&&this.grid.hitTest(Oe,Qe,Ge,ot,c,j)?{box:[Oe,Qe,Ge,ot],placeable:!1,offscreen:!1,occluded:Ze}:{box:[Oe,Qe,Ge,ot],placeable:!0,offscreen:this.isOffscreen(Oe,Qe,Ge,ot),occluded:Ze}}placeCollisionCircles(r,c,f,y,b,S,M,N,j,q,ne,ee,Ae,ve){const ke=[],Oe=new o.P(c.anchorX,c.anchorY),Qe=this.getPerspectiveRatio(Oe.x,Oe.y,S,ve),Ge=(j?b*this.transform.getPitchedTextCorrection(c.anchorX,c.anchorY,S)/Qe:b*Qe)/o.aN,ot={getElevation:ve,pitchedLabelPlaneMatrix:M,lineVertexArray:f,pitchWithMap:j,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},transform:this.transform,tileAnchorPoint:Oe,unwrappedTileID:S,width:this.transform.width,height:this.transform.height,translation:Ae},Ze=Ec(Ge,y,c.lineOffsetX*Ge,c.lineOffsetY*Ge,!1,c,!1,ot);let ct=!1,dt=!1,it=!0;if(Ze){const _t=.5*ne*Qe+ee,Dt=new o.P(-100,-100),Pt=new o.P(this.screenRightBoundary,this.screenBottomBoundary),Rt=new pr,Qt=Ze.first,nr=Ze.last;let Ar=[];for(let vn=Qt.path.length-1;vn>=1;vn--)Ar.push(Qt.path[vn]);for(let vn=1;vn<nr.path.length;vn++)Ar.push(nr.path[vn]);const rr=2.5*_t;if(j){const vn=this.projectPathToScreenSpace(Ar,ot);Ar=vn.some((Ai=>Ai.signedDistanceFromCamera<=0))?[]:vn.map((Ai=>Ai.point))}let Dr=[];if(Ar.length>0){const vn=Ar[0].clone(),Ai=Ar[0].clone();for(let zi=1;zi<Ar.length;zi++)vn.x=Math.min(vn.x,Ar[zi].x),vn.y=Math.min(vn.y,Ar[zi].y),Ai.x=Math.max(Ai.x,Ar[zi].x),Ai.y=Math.max(Ai.y,Ar[zi].y);Dr=vn.x>=Dt.x&&Ai.x<=Pt.x&&vn.y>=Dt.y&&Ai.y<=Pt.y?[Ar]:Ai.x<Dt.x||vn.x>Pt.x||Ai.y<Dt.y||vn.y>Pt.y?[]:o.aK([Ar],Dt.x,Dt.y,Pt.x,Pt.y)}for(const vn of Dr){Rt.reset(vn,.25*_t);let Ai=0;Ai=Rt.length<=.5*_t?1:Math.ceil(Rt.paddedLength/rr)+1;for(let zi=0;zi<Ai;zi++){const ui=zi/Math.max(Ai-1,1),Gi=Rt.lerp(ui),Pi=Gi.x+Mn,Is=Gi.y+Mn;ke.push(Pi,Is,_t,0);const Ki=Pi-_t,eo=Is-_t,Ts=Pi+_t,hi=Is+_t;if(it=it&&this.isOffscreen(Ki,eo,Ts,hi),dt=dt||this.isInsideGrid(Ki,eo,Ts,hi),r!=="always"&&this.grid.hitTestCircle(Pi,Is,_t,r,q)&&(ct=!0,!N))return{circles:[],offscreen:!1,collisionDetected:ct}}}}return{circles:!N&&ct||!dt||Qe<this.perspectiveRatioCutoff?[]:ke,offscreen:it,collisionDetected:ct}}projectPathToScreenSpace(r,c){const f=(function(y,b){const S=o.N();return o.aC(S,b.pitchedLabelPlaneMatrix),y.map((M=>{const N=dn(M.x,M.y,S,b.getElevation),j=b.transform.projectTileCoordinates(N.point.x,N.point.y,b.unwrappedTileID,b.getElevation);return j.point.x=(.5*j.point.x+.5)*b.width,j.point.y=(.5*-j.point.y+.5)*b.height,j}))})(r,c);return(function(y){let b=0,S=0,M=0,N=0;for(let j=0;j<y.length;j++)y[j].isOccluded?(M=j+1,N=0):(N++,N>S&&(S=N,b=M));return y.slice(b,b+S)})(f)}queryRenderedSymbols(r){if(r.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};const c=[],f=new o.ac;for(const ne of r){const ee=new o.P(ne.x+Mn,ne.y+Mn);f.extend(ee),c.push(ee)}const{minX:y,minY:b,maxX:S,maxY:M}=f,N=this.grid.query(y,b,S,M).concat(this.ignoredGrid.query(y,b,S,M)),j={},q={};for(const ne of N){const ee=ne.key;if(j[ee.bucketInstanceId]===void 0&&(j[ee.bucketInstanceId]={}),j[ee.bucketInstanceId][ee.featureIndex])continue;const Ae=[new o.P(ne.x1,ne.y1),new o.P(ne.x2,ne.y1),new o.P(ne.x2,ne.y2),new o.P(ne.x1,ne.y2)];o.aL(c,Ae)&&(j[ee.bucketInstanceId][ee.featureIndex]=!0,q[ee.bucketInstanceId]===void 0&&(q[ee.bucketInstanceId]=[]),q[ee.bucketInstanceId].push(ee.featureIndex))}return q}insertCollisionBox(r,c,f,y,b,S){(f?this.ignoredGrid:this.grid).insert({bucketInstanceId:y,featureIndex:b,collisionGroupID:S,overlapMode:c},r[0],r[1],r[2],r[3])}insertCollisionCircles(r,c,f,y,b,S){const M=f?this.ignoredGrid:this.grid,N={bucketInstanceId:y,featureIndex:b,collisionGroupID:S,overlapMode:c};for(let j=0;j<r.length;j+=4)M.insertCircle(N,r[j],r[j+1],r[j+2])}projectAndGetPerspectiveRatio(r,c,f,y,b){if(b){let S;y?(S=[r,c,y(r,c),1],o.aI(S,S,b)):(S=[r,c,0,1],IA(S,S,b));const M=S[3];return{x:(S[0]/M+1)/2*this.transform.width+Mn,y:(-S[1]/M+1)/2*this.transform.height+Mn,perspectiveRatio:.5+this.transform.cameraToCenterDistance/M*.5,isOccluded:!1,signedDistanceFromCamera:M}}{const S=this.transform.projectTileCoordinates(r,c,f,y);return{x:(S.point.x+1)/2*this.transform.width+Mn,y:(1-S.point.y)/2*this.transform.height+Mn,perspectiveRatio:.5+this.transform.cameraToCenterDistance/S.signedDistanceFromCamera*.5,isOccluded:S.isOccluded,signedDistanceFromCamera:S.signedDistanceFromCamera}}}getPerspectiveRatio(r,c,f,y){const b=this.transform.projectTileCoordinates(r,c,f,y);return .5+this.transform.cameraToCenterDistance/b.signedDistanceFromCamera*.5}isOffscreen(r,c,f,y){return f<Mn||r>=this.screenRightBoundary||y<Mn||c>this.screenBottomBoundary}isInsideGrid(r,c,f,y){return f>=0&&r<this.gridRightBoundary&&y>=0&&c<this.gridBottomBoundary}getViewportMatrix(){const r=o.as([]);return o.O(r,r,[-100,-100,0]),r}_projectCollisionBox(r,c,f,y,b,S,M,N,j,q,ne){let ee=1,Ae=0,ve=0,ke=1;const Oe=r.anchorPointX+M[0],Qe=r.anchorPointY+M[1];if(S&&!b){const Ar=this.projectAndGetPerspectiveRatio(Oe+1,Qe,y,j,ne),rr=Ar.x-N.x,Dr=Math.atan((Ar.y-N.y)/rr)+(rr<0?Math.PI:0),vn=Math.sin(Dr),Ai=Math.cos(Dr);ee=Ai,Ae=vn,ve=-vn,ke=Ai}else if(!S&&b){const Ar=ks(this.transform);ee=Ar.vecEast[0],Ae=Ar.vecEast[1],ve=Ar.vecSouth[0],ke=Ar.vecSouth[1]}let Ge=N.x,ot=N.y,Ze=c;b&&(Ge=Oe,ot=Qe,Ze=Math.pow(2,-(this.transform.zoom-f.overscaledZ)),Ze*=this.transform.getPitchedTextCorrection(Oe,Qe,y),q||(Ze*=o.ao(.5+N.signedDistanceFromCamera/this.transform.cameraToCenterDistance*.5,0,4))),q&&(Ge+=ee*q.x*Ze+ve*q.y*Ze,ot+=Ae*q.x*Ze+ke*q.y*Ze);const ct=r.x1*Ze,dt=r.x2*Ze,it=(ct+dt)/2,_t=r.y1*Ze,Dt=r.y2*Ze,Pt=(_t+Dt)/2,Rt=[{offsetX:ct,offsetY:_t},{offsetX:it,offsetY:_t},{offsetX:dt,offsetY:_t},{offsetX:dt,offsetY:Pt},{offsetX:dt,offsetY:Dt},{offsetX:it,offsetY:Dt},{offsetX:ct,offsetY:Dt},{offsetX:ct,offsetY:Pt}];let Qt=[];for(const{offsetX:Ar,offsetY:rr}of Rt)Qt.push(new o.P(Ge+ee*Ar+ve*rr,ot+Ae*Ar+ke*rr));let nr=!1;if(b){const Ar=Qt.map((rr=>this.projectAndGetPerspectiveRatio(rr.x,rr.y,y,j,ne)));nr=Ar.some((rr=>!rr.isOccluded)),Qt=Ar.map((rr=>new o.P(rr.x,rr.y)))}else nr=!0;return{box:o.aM(Qt),allPointsOccluded:!nr}}}class No{constructor(r,c,f,y){this.opacity=r?Math.max(0,Math.min(1,r.opacity+(r.placed?c:-c))):y&&f?1:0,this.placed=f}isHidden(){return this.opacity===0&&!this.placed}}class Qo{constructor(r,c,f,y,b){this.text=new No(r?r.text:null,c,f,b),this.icon=new No(r?r.icon:null,c,y,b)}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class Fc{constructor(r,c,f){this.text=r,this.icon=c,this.skipFade=f}}class la{constructor(r,c,f,y,b){this.bucketInstanceId=r,this.featureIndex=c,this.sourceLayerIndex=f,this.bucketIndex=y,this.tileID=b}}class ys{constructor(r){this.crossSourceCollisions=r,this.maxGroupID=0,this.collisionGroups={}}get(r){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[r]){const c=++this.maxGroupID;this.collisionGroups[r]={ID:c,predicate:f=>f.collisionGroupID===c}}return this.collisionGroups[r]}}function Oo(w,r,c,f,y){const{horizontalAlign:b,verticalAlign:S}=o.aT(w);return new o.P(-(b-.5)*r+f[0]*y,-(S-.5)*c+f[1]*y)}class nA{constructor(r,c,f,y,b){this.transform=r.clone(),this.terrain=c,this.collisionIndex=new Sc(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=f,this.retainedQueryData={},this.collisionGroups=new ys(y),this.collisionCircleArrays={},this.collisionBoxArrays=new Map,this.prevPlacement=b,b&&(b.prevPlacement=void 0),this.placedOrientations={}}_getTerrainElevationFunc(r){const c=this.terrain;return c?(f,y)=>c.getElevation(r,f,y):null}getBucketParts(r,c,f,y){const b=f.getBucket(c),S=f.latestFeatureIndex;if(!b||!S||c.id!==b.layerIds[0])return;const M=f.collisionBoxArray,N=b.layers[0].layout,j=b.layers[0].paint,q=Math.pow(2,this.transform.zoom-f.tileID.overscaledZ),ne=f.tileSize/o.a5,ee=f.tileID.toUnwrapped(),Ae=N.get("text-rotation-alignment")==="map",ve=o.aO(f,1,this.transform.zoom),ke=o.aP(this.collisionIndex.transform,f,j.get("text-translate"),j.get("text-translate-anchor")),Oe=o.aP(this.collisionIndex.transform,f,j.get("icon-translate"),j.get("icon-translate-anchor")),Qe=Ri(Ae,this.transform,ve);this.retainedQueryData[b.bucketInstanceId]=new la(b.bucketInstanceId,S,b.sourceLayerIndex,b.index,f.tileID);const Ge={bucket:b,layout:N,translationText:ke,translationIcon:Oe,unwrappedTileID:ee,pitchedLabelPlaneMatrix:Qe,scale:q,textPixelRatio:ne,holdingForFade:f.holdingForSymbolFade(),collisionBoxArray:M,partiallyEvaluatedTextSize:o.az(b.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(b.sourceID)};if(y)for(const ot of b.sortKeyRanges){const{sortKey:Ze,symbolInstanceStart:ct,symbolInstanceEnd:dt}=ot;r.push({sortKey:Ze,symbolInstanceStart:ct,symbolInstanceEnd:dt,parameters:Ge})}else r.push({symbolInstanceStart:0,symbolInstanceEnd:b.symbolInstances.length,parameters:Ge})}attemptAnchorPlacement(r,c,f,y,b,S,M,N,j,q,ne,ee,Ae,ve,ke,Oe,Qe,Ge,ot,Ze){const ct=o.aQ[r.textAnchor],dt=[r.textOffset0,r.textOffset1],it=Oo(ct,f,y,dt,b),_t=this.collisionIndex.placeCollisionBox(c,ee,N,j,q,M,S,Oe,ne.predicate,ot,it,Ze);if((!Ge||this.collisionIndex.placeCollisionBox(Ge,ee,N,j,q,M,S,Qe,ne.predicate,ot,it,Ze).placeable)&&_t.placeable){let Dt;if(this.prevPlacement&&this.prevPlacement.variableOffsets[Ae.crossTileID]&&this.prevPlacement.placements[Ae.crossTileID]&&this.prevPlacement.placements[Ae.crossTileID].text&&(Dt=this.prevPlacement.variableOffsets[Ae.crossTileID].anchor),Ae.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");return this.variableOffsets[Ae.crossTileID]={textOffset:dt,width:f,height:y,anchor:ct,textBoxScale:b,prevAnchor:Dt},this.markUsedJustification(ve,ct,Ae,ke),ve.allowVerticalPlacement&&(this.markUsedOrientation(ve,ke,Ae),this.placedOrientations[Ae.crossTileID]=ke),{shift:it,placedGlyphBoxes:_t}}}placeLayerBucketPart(r,c,f){const{bucket:y,layout:b,translationText:S,translationIcon:M,unwrappedTileID:N,pitchedLabelPlaneMatrix:j,textPixelRatio:q,holdingForFade:ne,collisionBoxArray:ee,partiallyEvaluatedTextSize:Ae,collisionGroup:ve}=r.parameters,ke=b.get("text-optional"),Oe=b.get("icon-optional"),Qe=o.aR(b,"text-overlap","text-allow-overlap"),Ge=Qe==="always",ot=o.aR(b,"icon-overlap","icon-allow-overlap"),Ze=ot==="always",ct=b.get("text-rotation-alignment")==="map",dt=b.get("text-pitch-alignment")==="map",it=b.get("icon-text-fit")!=="none",_t=b.get("symbol-z-order")==="viewport-y",Dt=Ge&&(Ze||!y.hasIconData()||Oe),Pt=Ze&&(Ge||!y.hasTextData()||ke);!y.collisionArrays&&ee&&y.deserializeCollisionBoxes(ee);const Rt=this.retainedQueryData[y.bucketInstanceId].tileID,Qt=this._getTerrainElevationFunc(Rt),nr=this.transform.getFastPathSimpleProjectionMatrix(Rt),Ar=(rr,Dr,vn)=>{var Ai,zi;if(c[rr.crossTileID])return;if(ne)return void(this.placements[rr.crossTileID]=new Fc(!1,!1,!1));let ui=!1,Gi=!1,Pi=!0,Is=null,Ki={box:null,placeable:!1,offscreen:null,occluded:!1},eo={placeable:!1},Ts=null,hi=null,Ao=null,yo=0,fc=0,mA=0;Dr.textFeatureIndex?yo=Dr.textFeatureIndex:rr.useRuntimeCollisionCircles&&(yo=rr.featureIndex),Dr.verticalTextFeatureIndex&&(fc=Dr.verticalTextFeatureIndex);const GA=Dr.textBox;if(GA){const to=Os=>{let ro=o.aA.horizontal;if(y.allowVerticalPlacement&&!Os&&this.prevPlacement){const Ka=this.prevPlacement.placedOrientations[rr.crossTileID];Ka&&(this.placedOrientations[rr.crossTileID]=Ka,ro=Ka,this.markUsedOrientation(y,ro,rr))}return ro},Zo=(Os,ro)=>{if(y.allowVerticalPlacement&&rr.numVerticalGlyphVertices>0&&Dr.verticalTextBox){for(const Ka of y.writingModes)if(Ka===o.aA.vertical?(Ki=ro(),eo=Ki):Ki=Os(),Ki&&Ki.placeable)break}else Ki=Os()},vo=rr.textAnchorOffsetStartIndex,vl=rr.textAnchorOffsetEndIndex;if(vl===vo){const Os=(ro,Ka)=>{const cs=this.collisionIndex.placeCollisionBox(ro,Qe,q,Rt,N,dt,ct,S,ve.predicate,Qt,void 0,nr);return cs&&cs.placeable&&(this.markUsedOrientation(y,Ka,rr),this.placedOrientations[rr.crossTileID]=Ka),cs};Zo((()=>Os(GA,o.aA.horizontal)),(()=>{const ro=Dr.verticalTextBox;return y.allowVerticalPlacement&&rr.numVerticalGlyphVertices>0&&ro?Os(ro,o.aA.vertical):{box:null,offscreen:null}})),to(Ki&&Ki.placeable)}else{let Os=o.aQ[(zi=(Ai=this.prevPlacement)===null||Ai===void 0?void 0:Ai.variableOffsets[rr.crossTileID])===null||zi===void 0?void 0:zi.anchor];const ro=(cs,qa,Xo)=>{const Vh=cs.x2-cs.x1,Sd=cs.y2-cs.y1,KA=rr.textBoxScale,qA=it&&ot==="never"?qa:null;let gA=null,Gh=Qe==="never"?1:2,uh="never";Os&&Gh++;for(let hh=0;hh<Gh;hh++){for(let pu=vo;pu<vl;pu++){const Kh=y.textAnchorOffsets.get(pu);if(Os&&Kh.textAnchor!==Os)continue;const dh=this.attemptAnchorPlacement(Kh,cs,Vh,Sd,KA,ct,dt,q,Rt,N,ve,uh,rr,y,Xo,S,M,qA,Qt);if(dh&&(gA=dh.placedGlyphBoxes,gA&&gA.placeable))return ui=!0,Is=dh.shift,gA}Os?Os=null:uh=Qe}return f&&!gA&&(gA={box:this.collisionIndex.placeCollisionBox(GA,"always",q,Rt,N,dt,ct,S,ve.predicate,Qt,void 0,nr).box,offscreen:!1,placeable:!1,occluded:!1}),gA};Zo((()=>ro(GA,Dr.iconBox,o.aA.horizontal)),(()=>{const cs=Dr.verticalTextBox;return y.allowVerticalPlacement&&(!Ki||!Ki.placeable)&&rr.numVerticalGlyphVertices>0&&cs?ro(cs,Dr.verticalIconBox,o.aA.vertical):{box:null,occluded:!0,offscreen:null}})),Ki&&(ui=Ki.placeable,Pi=Ki.offscreen);const Ka=to(Ki&&Ki.placeable);if(!ui&&this.prevPlacement){const cs=this.prevPlacement.variableOffsets[rr.crossTileID];cs&&(this.variableOffsets[rr.crossTileID]=cs,this.markUsedJustification(y,cs.anchor,rr,Ka))}}}if(Ts=Ki,ui=Ts&&Ts.placeable,Pi=Ts&&Ts.offscreen,rr.useRuntimeCollisionCircles&&rr.centerJustifiedTextSymbolIndex>=0){const to=y.text.placedSymbolArray.get(rr.centerJustifiedTextSymbolIndex),Zo=o.aB(y.textSizeData,Ae,to),vo=b.get("text-padding");hi=this.collisionIndex.placeCollisionCircles(Qe,to,y.lineVertexArray,y.glyphOffsetArray,Zo,N,j,f,dt,ve.predicate,rr.collisionCircleDiameter,vo,S,Qt),hi.circles.length&&hi.collisionDetected&&!f&&o.w("Collisions detected, but collision boxes are not shown"),ui=Ge||hi.circles.length>0&&!hi.collisionDetected,Pi=Pi&&hi.offscreen}if(Dr.iconFeatureIndex&&(mA=Dr.iconFeatureIndex),Dr.iconBox){const to=Zo=>this.collisionIndex.placeCollisionBox(Zo,ot,q,Rt,N,dt,ct,M,ve.predicate,Qt,it&&Is?Is:void 0,nr);eo&&eo.placeable&&Dr.verticalIconBox?(Ao=to(Dr.verticalIconBox),Gi=Ao.placeable):(Ao=to(Dr.iconBox),Gi=Ao.placeable),Pi=Pi&&Ao.offscreen}const zu=ke||rr.numHorizontalGlyphVertices===0&&rr.numVerticalGlyphVertices===0,pc=Oe||rr.numIconVertices===0;zu||pc?pc?zu||(Gi=Gi&&ui):ui=Gi&&ui:Gi=ui=Gi&&ui;const Gl=Gi&&Ao.placeable;if(ui&&Ts.placeable&&this.collisionIndex.insertCollisionBox(Ts.box,Qe,b.get("text-ignore-placement"),y.bucketInstanceId,eo&&eo.placeable&&fc?fc:yo,ve.ID),Gl&&this.collisionIndex.insertCollisionBox(Ao.box,ot,b.get("icon-ignore-placement"),y.bucketInstanceId,mA,ve.ID),hi&&ui&&this.collisionIndex.insertCollisionCircles(hi.circles,Qe,b.get("text-ignore-placement"),y.bucketInstanceId,yo,ve.ID),f&&this.storeCollisionData(y.bucketInstanceId,vn,Dr,Ts,Ao,hi),rr.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");if(y.bucketInstanceId===0)throw new Error("bucket.bucketInstanceId can't be 0");this.placements[rr.crossTileID]=new Fc((ui||Dt)&&!Ts?.occluded,(Gi||Pt)&&!Ao?.occluded,Pi||y.justReloaded),c[rr.crossTileID]=!0};if(_t){if(r.symbolInstanceStart!==0)throw new Error("bucket.bucketInstanceId should be 0");const rr=y.getSortedSymbolIndexes(-this.transform.bearingInRadians);for(let Dr=rr.length-1;Dr>=0;--Dr){const vn=rr[Dr];Ar(y.symbolInstances.get(vn),y.collisionArrays[vn],vn)}}else for(let rr=r.symbolInstanceStart;rr<r.symbolInstanceEnd;rr++)Ar(y.symbolInstances.get(rr),y.collisionArrays[rr],rr);y.justReloaded=!1}storeCollisionData(r,c,f,y,b,S){if(f.textBox||f.iconBox){let M,N;this.collisionBoxArrays.has(r)?M=this.collisionBoxArrays.get(r):(M=new Map,this.collisionBoxArrays.set(r,M)),M.has(c)?N=M.get(c):(N={text:null,icon:null},M.set(c,N)),f.textBox&&(N.text=y.box),f.iconBox&&(N.icon=b.box)}if(S){let M=this.collisionCircleArrays[r];M===void 0&&(M=this.collisionCircleArrays[r]=[]);for(let N=0;N<S.circles.length;N+=4)M.push(S.circles[N+0]-Mn),M.push(S.circles[N+1]-Mn),M.push(S.circles[N+2]),M.push(S.collisionDetected?1:0)}}markUsedJustification(r,c,f,y){let b;b=y===o.aA.vertical?f.verticalPlacedTextSymbolIndex:{left:f.leftJustifiedTextSymbolIndex,center:f.centerJustifiedTextSymbolIndex,right:f.rightJustifiedTextSymbolIndex}[o.aS(c)];const S=[f.leftJustifiedTextSymbolIndex,f.centerJustifiedTextSymbolIndex,f.rightJustifiedTextSymbolIndex,f.verticalPlacedTextSymbolIndex];for(const M of S)M>=0&&(r.text.placedSymbolArray.get(M).crossTileID=b>=0&&M!==b?0:f.crossTileID)}markUsedOrientation(r,c,f){const y=c===o.aA.horizontal||c===o.aA.horizontalOnly?c:0,b=c===o.aA.vertical?c:0,S=[f.leftJustifiedTextSymbolIndex,f.centerJustifiedTextSymbolIndex,f.rightJustifiedTextSymbolIndex];for(const M of S)r.text.placedSymbolArray.get(M).placedOrientation=y;f.verticalPlacedTextSymbolIndex&&(r.text.placedSymbolArray.get(f.verticalPlacedTextSymbolIndex).placedOrientation=b)}commit(r){this.commitTime=r,this.zoomAtLastRecencyCheck=this.transform.zoom;const c=this.prevPlacement;let f=!1;this.prevZoomAdjustment=c?c.zoomAdjustment(this.transform.zoom):0;const y=c?c.symbolFadeChange(r):1,b=c?c.opacities:{},S=c?c.variableOffsets:{},M=c?c.placedOrientations:{};for(const N in this.placements){const j=this.placements[N],q=b[N];q?(this.opacities[N]=new Qo(q,y,j.text,j.icon),f=f||j.text!==q.text.placed||j.icon!==q.icon.placed):(this.opacities[N]=new Qo(null,y,j.text,j.icon,j.skipFade),f=f||j.text||j.icon)}for(const N in b){const j=b[N];if(!this.opacities[N]){const q=new Qo(j,y,!1,!1);q.isHidden()||(this.opacities[N]=q,f=f||j.text.placed||j.icon.placed)}}for(const N in S)this.variableOffsets[N]||!this.opacities[N]||this.opacities[N].isHidden()||(this.variableOffsets[N]=S[N]);for(const N in M)this.placedOrientations[N]||!this.opacities[N]||this.opacities[N].isHidden()||(this.placedOrientations[N]=M[N]);if(c&&c.lastPlacementChangeTime===void 0)throw new Error("Last placement time for previous placement is not defined");f?this.lastPlacementChangeTime=r:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=c?c.lastPlacementChangeTime:r)}updateLayerOpacities(r,c){const f={};for(const y of c){const b=y.getBucket(r);b&&y.latestFeatureIndex&&r.id===b.layerIds[0]&&this.updateBucketOpacities(b,y.tileID,f,y.collisionBoxArray)}}updateBucketOpacities(r,c,f,y){r.hasTextData()&&(r.text.opacityVertexArray.clear(),r.text.hasVisibleVertices=!1),r.hasIconData()&&(r.icon.opacityVertexArray.clear(),r.icon.hasVisibleVertices=!1),r.hasIconCollisionBoxData()&&r.iconCollisionBox.collisionVertexArray.clear(),r.hasTextCollisionBoxData()&&r.textCollisionBox.collisionVertexArray.clear();const b=r.layers[0],S=b.layout,M=new Qo(null,0,!1,!1,!0),N=S.get("text-allow-overlap"),j=S.get("icon-allow-overlap"),q=b._unevaluatedLayout.hasValue("text-variable-anchor")||b._unevaluatedLayout.hasValue("text-variable-anchor-offset"),ne=S.get("text-rotation-alignment")==="map",ee=S.get("text-pitch-alignment")==="map",Ae=S.get("icon-text-fit")!=="none",ve=new Qo(null,0,N&&(j||!r.hasIconData()||S.get("icon-optional")),j&&(N||!r.hasTextData()||S.get("text-optional")),!0);!r.collisionArrays&&y&&(r.hasIconCollisionBoxData()||r.hasTextCollisionBoxData())&&r.deserializeCollisionBoxes(y);const ke=(Qe,Ge,ot)=>{for(let Ze=0;Ze<Ge/4;Ze++)Qe.opacityVertexArray.emplaceBack(ot);Qe.hasVisibleVertices=Qe.hasVisibleVertices||ot!==Ic},Oe=this.collisionBoxArrays.get(r.bucketInstanceId);for(let Qe=0;Qe<r.symbolInstances.length;Qe++){const Ge=r.symbolInstances.get(Qe),{numHorizontalGlyphVertices:ot,numVerticalGlyphVertices:Ze,crossTileID:ct}=Ge;let dt=this.opacities[ct];f[ct]?dt=M:dt||(dt=ve,this.opacities[ct]=dt),f[ct]=!0;const it=Ge.numIconVertices>0,_t=this.placedOrientations[Ge.crossTileID],Dt=_t===o.aA.vertical,Pt=_t===o.aA.horizontal||_t===o.aA.horizontalOnly;if(ot>0||Ze>0){const Qt=PA(dt.text);ke(r.text,ot,Dt?Ic:Qt),ke(r.text,Ze,Pt?Ic:Qt);const nr=dt.text.isHidden();[Ge.rightJustifiedTextSymbolIndex,Ge.centerJustifiedTextSymbolIndex,Ge.leftJustifiedTextSymbolIndex].forEach((Dr=>{Dr>=0&&(r.text.placedSymbolArray.get(Dr).hidden=nr||Dt?1:0)})),Ge.verticalPlacedTextSymbolIndex>=0&&(r.text.placedSymbolArray.get(Ge.verticalPlacedTextSymbolIndex).hidden=nr||Pt?1:0);const Ar=this.variableOffsets[Ge.crossTileID];Ar&&this.markUsedJustification(r,Ar.anchor,Ge,_t);const rr=this.placedOrientations[Ge.crossTileID];rr&&(this.markUsedJustification(r,"left",Ge,rr),this.markUsedOrientation(r,rr,Ge))}if(it){const Qt=PA(dt.icon),nr=!(Ae&&Ge.verticalPlacedIconSymbolIndex&&Dt);Ge.placedIconSymbolIndex>=0&&(ke(r.icon,Ge.numIconVertices,nr?Qt:Ic),r.icon.placedSymbolArray.get(Ge.placedIconSymbolIndex).hidden=dt.icon.isHidden()),Ge.verticalPlacedIconSymbolIndex>=0&&(ke(r.icon,Ge.numVerticalIconVertices,nr?Ic:Qt),r.icon.placedSymbolArray.get(Ge.verticalPlacedIconSymbolIndex).hidden=dt.icon.isHidden())}const Rt=Oe&&Oe.has(Qe)?Oe.get(Qe):{text:null,icon:null};if(r.hasIconCollisionBoxData()||r.hasTextCollisionBoxData()){const Qt=r.collisionArrays[Qe];if(Qt){let nr=new o.P(0,0);if(Qt.textBox||Qt.verticalTextBox){let Ar=!0;if(q){const rr=this.variableOffsets[ct];rr?(nr=Oo(rr.anchor,rr.width,rr.height,rr.textOffset,rr.textBoxScale),ne&&nr._rotate(ee?-this.transform.bearingInRadians:this.transform.bearingInRadians)):Ar=!1}if(Qt.textBox||Qt.verticalTextBox){let rr;Qt.textBox&&(rr=Dt),Qt.verticalTextBox&&(rr=Pt),iA(r.textCollisionBox.collisionVertexArray,dt.text.placed,!Ar||rr,Rt.text,nr.x,nr.y)}}if(Qt.iconBox||Qt.verticalIconBox){const Ar=!!(!Pt&&Qt.verticalIconBox);let rr;Qt.iconBox&&(rr=Ar),Qt.verticalIconBox&&(rr=!Ar),iA(r.iconCollisionBox.collisionVertexArray,dt.icon.placed,rr,Rt.icon,Ae?nr.x:0,Ae?nr.y:0)}}}}if(r.sortFeatures(-this.transform.bearingInRadians),this.retainedQueryData[r.bucketInstanceId]&&(this.retainedQueryData[r.bucketInstanceId].featureSortOrder=r.featureSortOrder),r.hasTextData()&&r.text.opacityVertexBuffer&&r.text.opacityVertexBuffer.updateData(r.text.opacityVertexArray),r.hasIconData()&&r.icon.opacityVertexBuffer&&r.icon.opacityVertexBuffer.updateData(r.icon.opacityVertexArray),r.hasIconCollisionBoxData()&&r.iconCollisionBox.collisionVertexBuffer&&r.iconCollisionBox.collisionVertexBuffer.updateData(r.iconCollisionBox.collisionVertexArray),r.hasTextCollisionBoxData()&&r.textCollisionBox.collisionVertexBuffer&&r.textCollisionBox.collisionVertexBuffer.updateData(r.textCollisionBox.collisionVertexArray),r.text.opacityVertexArray.length!==r.text.layoutVertexArray.length/4)throw new Error(`bucket.text.opacityVertexArray.length (= ${r.text.opacityVertexArray.length}) !== bucket.text.layoutVertexArray.length (= ${r.text.layoutVertexArray.length}) / 4`);if(r.icon.opacityVertexArray.length!==r.icon.layoutVertexArray.length/4)throw new Error(`bucket.icon.opacityVertexArray.length (= ${r.icon.opacityVertexArray.length}) !== bucket.icon.layoutVertexArray.length (= ${r.icon.layoutVertexArray.length}) / 4`);r.bucketInstanceId in this.collisionCircleArrays&&(r.collisionCircleArray=this.collisionCircleArrays[r.bucketInstanceId],delete this.collisionCircleArrays[r.bucketInstanceId])}symbolFadeChange(r){return this.fadeDuration===0?1:(r-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(r){return Math.max(0,(this.transform.zoom-r)/1.5)}hasTransitions(r){return this.stale||r-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(r,c){const f=this.zoomAtLastRecencyCheck===c?1-this.zoomAdjustment(c):1;return this.zoomAtLastRecencyCheck=c,this.commitTime+this.fadeDuration*f>r}setStale(){this.stale=!0}}function iA(w,r,c,f,y,b){f&&f.length!==0||(f=[0,0,0,0]);const S=f[0]-Mn,M=f[1]-Mn,N=f[2]-Mn,j=f[3]-Mn;w.emplaceBack(r?1:0,c?1:0,y||0,b||0,S,M),w.emplaceBack(r?1:0,c?1:0,y||0,b||0,N,M),w.emplaceBack(r?1:0,c?1:0,y||0,b||0,N,j),w.emplaceBack(r?1:0,c?1:0,y||0,b||0,S,j)}const rc=Math.pow(2,25),Ca=Math.pow(2,24),TA=Math.pow(2,17),Kn=Math.pow(2,16),Fl=Math.pow(2,9),nc=Math.pow(2,8),Il=Math.pow(2,1);function PA(w){if(w.opacity===0&&!w.placed)return 0;if(w.opacity===1&&w.placed)return 4294967295;const r=w.placed?1:0,c=Math.floor(127*w.opacity);return c*rc+r*Ca+c*TA+r*Kn+c*Fl+r*nc+c*Il+r}const Ic=0;class ca{constructor(r){this._sortAcrossTiles=r.layout.get("symbol-z-order")!=="viewport-y"&&!r.layout.get("symbol-sort-key").isConstant(),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(r,c,f,y,b){const S=this._bucketParts;for(;this._currentTileIndex<r.length;)if(c.getBucketParts(S,y,r[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,b())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,S.sort(((M,N)=>M.sortKey-N.sortKey)));this._currentPartIndex<S.length;)if(c.placeLayerBucketPart(S[this._currentPartIndex],this._seenCrossTileIDs,f),this._currentPartIndex++,b())return!0;return!1}}class Al{constructor(r,c,f,y,b,S,M,N){this.placement=new nA(r,c,S,M,N),this._currentPlacementIndex=f.length-1,this._forceFullPlacement=y,this._showCollisionBoxes=b,this._done=!1}isDone(){return this._done}continuePlacement(r,c,f){const y=z(),b=()=>!this._forceFullPlacement&&z()-y>2;for(;this._currentPlacementIndex>=0;){const S=c[r[this._currentPlacementIndex]],M=this.placement.collisionIndex.transform.zoom;if(S.type==="symbol"&&(!S.minzoom||S.minzoom<=M)&&(!S.maxzoom||S.maxzoom>M)){if(this._inProgressLayer||(this._inProgressLayer=new ca(S)),this._inProgressLayer.continuePlacement(f[S.source],this.placement,this._showCollisionBoxes,S,b))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(r){return this.placement.commit(r),this.placement}}const an=512/o.a5/2;class Ea{constructor(r,c,f){this.tileID=r,this.bucketInstanceId=f,this._symbolsByKey={};const y=new Map;for(let b=0;b<c.length;b++){const S=c.get(b),M=S.key,N=y.get(M);N?N.push(S):y.set(M,[S])}for(const[b,S]of y){const M={positions:S.map((N=>({x:Math.floor(N.anchorX*an),y:Math.floor(N.anchorY*an)}))),crossTileIDs:S.map((N=>N.crossTileID))};if(M.positions.length>128){const N=new o.aU(M.positions.length,16,Uint16Array);for(const{x:j,y:q}of M.positions)N.add(j,q);N.finish(),delete M.positions,M.index=N}this._symbolsByKey[b]=M}}getScaledCoordinates(r,c){const{x:f,y,z:b}=this.tileID.canonical,{x:S,y:M,z:N}=c.canonical,j=an/Math.pow(2,N-b),q=(M*o.a5+r.anchorY)*j,ne=y*o.a5*an;return{x:Math.floor((S*o.a5+r.anchorX)*j-f*o.a5*an),y:Math.floor(q-ne)}}findMatches(r,c,f){const y=this.tileID.canonical.z<c.canonical.z?1:Math.pow(2,this.tileID.canonical.z-c.canonical.z);for(let b=0;b<r.length;b++){const S=r.get(b);if(S.crossTileID)continue;const M=this._symbolsByKey[S.key];if(!M)continue;const N=this.getScaledCoordinates(S,c);if(M.index){const j=M.index.range(N.x-y,N.y-y,N.x+y,N.y+y).sort();for(const q of j){const ne=M.crossTileIDs[q];if(!f[ne]){f[ne]=!0,S.crossTileID=ne;break}}}else if(M.positions)for(let j=0;j<M.positions.length;j++){const q=M.positions[j],ne=M.crossTileIDs[j];if(Math.abs(q.x-N.x)<=y&&Math.abs(q.y-N.y)<=y&&!f[ne]){f[ne]=!0,S.crossTileID=ne;break}}}}getCrossTileIDsLists(){return Object.values(this._symbolsByKey).map((({crossTileIDs:r})=>r))}}class zo{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class Ho{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(r){const c=Math.round((r-this.lng)/360);if(c!==0)for(const f in this.indexes){const y=this.indexes[f],b={};for(const S in y){const M=y[S];M.tileID=M.tileID.unwrapTo(M.tileID.wrap+c),b[M.tileID.key]=M}this.indexes[f]=b}this.lng=r}addBucket(r,c,f){if(this.indexes[r.overscaledZ]&&this.indexes[r.overscaledZ][r.key]){if(this.indexes[r.overscaledZ][r.key].bucketInstanceId===c.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(r.overscaledZ,this.indexes[r.overscaledZ][r.key])}for(let b=0;b<c.symbolInstances.length;b++)c.symbolInstances.get(b).crossTileID=0;this.usedCrossTileIDs[r.overscaledZ]||(this.usedCrossTileIDs[r.overscaledZ]={});const y=this.usedCrossTileIDs[r.overscaledZ];for(const b in this.indexes){const S=this.indexes[b];if(Number(b)>r.overscaledZ)for(const M in S){const N=S[M];N.tileID.isChildOf(r)&&N.findMatches(c.symbolInstances,r,y)}else{const M=S[r.scaledTo(Number(b)).key];M&&M.findMatches(c.symbolInstances,r,y)}}for(let b=0;b<c.symbolInstances.length;b++){const S=c.symbolInstances.get(b);S.crossTileID||(S.crossTileID=f.generate(),y[S.crossTileID]=!0)}return this.indexes[r.overscaledZ]===void 0&&(this.indexes[r.overscaledZ]={}),this.indexes[r.overscaledZ][r.key]=new Ea(r,c.symbolInstances,c.bucketInstanceId),!0}removeBucketCrossTileIDs(r,c){for(const f of c.getCrossTileIDsLists())for(const y of f)delete this.usedCrossTileIDs[r][y]}removeStaleBuckets(r){let c=!1;for(const f in this.indexes){const y=this.indexes[f];for(const b in y)r[y[b].bucketInstanceId]||(this.removeBucketCrossTileIDs(f,y[b]),delete y[b],c=!0)}return c}}class vs{constructor(){this.layerIndexes={},this.crossTileIDs=new zo,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(r,c,f){let y=this.layerIndexes[r.id];y===void 0&&(y=this.layerIndexes[r.id]=new Ho);let b=!1;const S={};y.handleWrapJump(f);for(const M of c){const N=M.getBucket(r);N&&r.id===N.layerIds[0]&&(N.bucketInstanceId||(N.bucketInstanceId=++this.maxBucketInstanceId),y.addBucket(M.tileID,N,this.crossTileIDs)&&(b=!0),S[N.bucketInstanceId]=!0)}return y.removeStaleBuckets(S)&&(b=!0),b}pruneUnusedLayers(r){const c={};r.forEach((f=>{c[f]=!0}));for(const f in this.layerIndexes)c[f]||delete this.layerIndexes[f]}}var qr="void main() {fragColor=vec4(1.0);}";const Jn={prelude:cn(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
out highp vec4 fragColor;`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}mat3 rotationMatrixFromAxisAngle(vec3 u,float angle) {float c=cos(angle);float s=sin(angle);float c2=1.0-c;return mat3(u.x*u.x*c2+      c,u.x*u.y*c2-u.z*s,u.x*u.z*c2+u.y*s,u.y*u.x*c2+u.z*s,u.y*u.y*c2+    c,u.y*u.z*c2-u.x*s,u.z*u.x*c2-u.y*s,u.z*u.y*c2+u.x*s,u.z*u.z*c2+    c
);}
#ifdef TERRAIN3D
uniform sampler2D u_terrain;uniform float u_terrain_dim;uniform mat4 u_terrain_matrix;uniform vec4 u_terrain_unpack;uniform float u_terrain_exaggeration;uniform highp sampler2D u_depth;
#endif
const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitShifts=vec4(1.)/bitSh;highp float unpack(highp vec4 color) {return dot(color,bitShifts);}highp float depthOpacity(vec3 frag) {
#ifdef TERRAIN3D
highp float d=unpack(texture(u_depth,frag.xy*0.5+0.5))+0.0001-frag.z;return 1.0-max(0.0,min(1.0,-d*500.0));
#else
return 1.0;
#endif
}float calculate_visibility(vec4 pos) {
#ifdef TERRAIN3D
vec3 frag=pos.xyz/pos.w;highp float d=depthOpacity(frag);if (d > 0.95) return 1.0;return (d+depthOpacity(frag+vec3(0.0,0.01,0.0)))/2.0;
#else
return 1.0;
#endif
}float ele(vec2 pos) {
#ifdef TERRAIN3D
vec4 rgb=(texture(u_terrain,pos)*255.0)*u_terrain_unpack;return rgb.r+rgb.g+rgb.b-u_terrain_unpack.a;
#else
return 0.0;
#endif
}float get_elevation(vec2 pos) {
#ifdef TERRAIN3D
#ifdef GLOBE
if ((pos.y <-32767.5) || (pos.y > 32766.5)) {return 0.0;}
#endif
vec2 coord=(u_terrain_matrix*vec4(pos,0.0,1.0)).xy*u_terrain_dim+1.0;vec2 f=fract(coord);vec2 c=(floor(coord)+0.5)/(u_terrain_dim+2.0);float d=1.0/(u_terrain_dim+2.0);float tl=ele(c);float tr=ele(c+vec2(d,0.0));float bl=ele(c+vec2(0.0,d));float br=ele(c+vec2(d,d));float elevation=mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);return elevation*u_terrain_exaggeration;
#else
return 0.0;
#endif
}const float PI=3.141592653589793;uniform mat4 u_projection_matrix;`),projectionMercator:cn("","float projectLineThickness(float tileY) {return 1.0;}float projectCircleRadius(float tileY) {return 1.0;}vec4 projectTile(vec2 p) {vec4 result=u_projection_matrix*vec4(p,0.0,1.0);return result;}vec4 projectTile(vec2 p,vec2 rawPos) {vec4 result=u_projection_matrix*vec4(p,0.0,1.0);if (rawPos.y <-32767.5 || rawPos.y > 32766.5) {result.z=-10000000.0;}return result;}vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_projection_matrix*vec4(posInTile,elevation,1.0);}vec4 projectTileFor3D(vec2 posInTile,float elevation) {return projectTileWithElevation(posInTile,elevation);}"),projectionGlobe:cn("",`#define GLOBE_RADIUS 6371008.8
uniform highp vec4 u_projection_tile_mercator_coords;uniform highp vec4 u_projection_clipping_plane;uniform highp float u_projection_transition;uniform mat4 u_projection_fallback_matrix;vec3 globeRotateVector(vec3 vec,vec2 angles) {vec3 axisRight=vec3(vec.z,0.0,-vec.x);vec3 axisUp=cross(axisRight,vec);axisRight=normalize(axisRight);axisUp=normalize(axisUp);vec2 t=tan(angles);return normalize(vec+axisRight*t.x+axisUp*t.y);}mat3 globeGetRotationMatrix(vec3 spherePos) {vec3 axisRight=vec3(spherePos.z,0.0,-spherePos.x);vec3 axisDown=cross(axisRight,spherePos);axisRight=normalize(axisRight);axisDown=normalize(axisDown);return mat3(axisRight,axisDown,spherePos
);}float circumferenceRatioAtTileY(float tileY) {float mercator_pos_y=u_projection_tile_mercator_coords.y+u_projection_tile_mercator_coords.w*tileY;float spherical_y=2.0*atan(exp(PI-(mercator_pos_y*PI*2.0)))-PI*0.5;return cos(spherical_y);}float projectLineThickness(float tileY) {float thickness=1.0/circumferenceRatioAtTileY(tileY); 
if (u_projection_transition < 0.999) {return mix(1.0,thickness,u_projection_transition);} else {return thickness;}}vec3 projectToSphere(vec2 translatedPos,vec2 rawPos) {vec2 mercator_pos=u_projection_tile_mercator_coords.xy+u_projection_tile_mercator_coords.zw*translatedPos;vec2 spherical;spherical.x=mercator_pos.x*PI*2.0+PI;spherical.y=2.0*atan(exp(PI-(mercator_pos.y*PI*2.0)))-PI*0.5;float len=cos(spherical.y);vec3 pos=vec3(sin(spherical.x)*len,sin(spherical.y),cos(spherical.x)*len
);if (rawPos.y <-32767.5) {pos=vec3(0.0,1.0,0.0);}if (rawPos.y > 32766.5) {pos=vec3(0.0,-1.0,0.0);}return pos;}vec3 projectToSphere(vec2 posInTile) {return projectToSphere(posInTile,vec2(0.0,0.0));}float globeComputeClippingZ(vec3 spherePos) {return (1.0-(dot(spherePos,u_projection_clipping_plane.xyz)+u_projection_clipping_plane.w));}vec4 interpolateProjection(vec2 posInTile,vec3 spherePos,float elevation) {vec3 elevatedPos=spherePos*(1.0+elevation/GLOBE_RADIUS);vec4 globePosition=u_projection_matrix*vec4(elevatedPos,1.0);globePosition.z=globeComputeClippingZ(elevatedPos)*globePosition.w;if (u_projection_transition > 0.999) {return globePosition;}vec4 flatPosition=u_projection_fallback_matrix*vec4(posInTile,elevation,1.0);const float z_globeness_threshold=0.2;vec4 result=globePosition;result.z=mix(0.0,globePosition.z,clamp((u_projection_transition-z_globeness_threshold)/(1.0-z_globeness_threshold),0.0,1.0));result.xyw=mix(flatPosition.xyw,globePosition.xyw,u_projection_transition);if ((posInTile.y <-32767.5) || (posInTile.y > 32766.5)) {result=globePosition;const float poles_hidden_anim_percentage=0.02;result.z=mix(globePosition.z,100.0,pow(max((1.0-u_projection_transition)/poles_hidden_anim_percentage,0.0),8.0));}return result;}vec4 interpolateProjectionFor3D(vec2 posInTile,vec3 spherePos,float elevation) {vec3 elevatedPos=spherePos*(1.0+elevation/GLOBE_RADIUS);vec4 globePosition=u_projection_matrix*vec4(elevatedPos,1.0);if (u_projection_transition > 0.999) {return globePosition;}vec4 fallbackPosition=u_projection_fallback_matrix*vec4(posInTile,elevation,1.0);return mix(fallbackPosition,globePosition,u_projection_transition);}vec4 projectTile(vec2 posInTile) {return interpolateProjection(posInTile,projectToSphere(posInTile),0.0);}vec4 projectTile(vec2 posInTile,vec2 rawPos) {return interpolateProjection(posInTile,projectToSphere(posInTile,rawPos),0.0);}vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return interpolateProjection(posInTile,projectToSphere(posInTile),elevation);}vec4 projectTileFor3D(vec2 posInTile,float elevation) {vec3 spherePos=projectToSphere(posInTile,posInTile);return interpolateProjectionFor3D(posInTile,spherePos,elevation);}`),background:cn(`uniform vec4 u_color;uniform float u_opacity;void main() {fragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"in vec2 a_pos;void main() {gl_Position=projectTile(a_pos);}"),backgroundPattern:cn(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;in vec2 v_pos_a;in vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);fragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;in vec2 a_pos;out vec2 v_pos_a;out vec2 v_pos_b;void main() {gl_Position=projectTile(a_pos);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),circle:cn(`in vec3 v_data;in float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);float antialiased_blur=v_data.z;float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));fragColor=v_visibility*opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);const float epsilon=0.5/255.0;if (fragColor.r < epsilon && fragColor.g < epsilon && fragColor.b < epsilon && fragColor.a < epsilon) {discard;}
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform highp float u_globe_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;uniform vec2 u_translate;in vec2 a_pos;out vec3 v_data;out float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 pos_raw=a_pos+32768.0;vec2 extrude=vec2(mod(pos_raw,8.0)/7.0*2.0-1.0);vec2 circle_center=floor(pos_raw/8.0)+u_translate;float ele=get_elevation(circle_center);v_visibility=calculate_visibility(projectTileWithElevation(circle_center,ele));if (u_pitch_with_map) {
#ifdef GLOBE
vec3 center_vector=projectToSphere(circle_center);
#endif
float angle_scale=u_globe_extrude_scale;vec2 corner_position=circle_center;if (u_scale_with_map) {angle_scale*=(radius+stroke_width);corner_position+=extrude*u_extrude_scale*(radius+stroke_width);} else {
#ifdef GLOBE
vec4 projected_center=interpolateProjection(circle_center,center_vector,ele);
#else
vec4 projected_center=projectTileWithElevation(circle_center,ele);
#endif
corner_position+=extrude*u_extrude_scale*(radius+stroke_width)*(projected_center.w/u_camera_to_center_distance);angle_scale*=(radius+stroke_width)*(projected_center.w/u_camera_to_center_distance);}
#ifdef GLOBE
vec2 angles=extrude*angle_scale;vec3 corner_vector=globeRotateVector(center_vector,angles);gl_Position=interpolateProjection(corner_position,corner_vector,ele);
#else
gl_Position=projectTileWithElevation(corner_position,ele);
#endif
} else {gl_Position=projectTileWithElevation(circle_center,ele);if (gl_Position.z/gl_Position.w > 1.0) {gl_Position.xy=vec2(10000.0);}if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}float antialiasblur=-max(1.0/u_device_pixel_ratio/(radius+stroke_width),blur);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),clippingMask:cn(qr,"in vec2 a_pos;void main() {gl_Position=projectTile(a_pos);}"),heatmap:cn(`uniform highp float u_intensity;in vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);fragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;uniform highp float u_globe_extrude_scale;in vec2 a_pos;out vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 pos_raw=a_pos+32768.0;vec2 unscaled_extrude=vec2(mod(pos_raw,8.0)/7.0*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec2 circle_center=floor(pos_raw/8.0);
#ifdef GLOBE
vec2 angles=v_extrude*radius*u_globe_extrude_scale;vec3 center_vector=projectToSphere(circle_center);vec3 corner_vector=globeRotateVector(center_vector,angles);gl_Position=interpolateProjection(circle_center+extrude,corner_vector,0.0);
#else
gl_Position=projectTileFor3D(circle_center+extrude,get_elevation(circle_center));
#endif
}`),heatmapTexture:cn(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;in vec2 v_pos;void main() {float t=texture(u_image,v_pos).r;vec4 color=texture(u_color_ramp,vec2(t,0.5));fragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),collisionBox:cn("in float v_placed;in float v_notUsed;void main() {float alpha=0.5;fragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {fragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {fragColor*=.1;}}","in vec2 a_anchor_pos;in vec2 a_placed;in vec2 a_box_real;uniform vec2 u_pixel_extrude_scale;out float v_placed;out float v_notUsed;void main() {gl_Position=projectTileWithElevation(a_anchor_pos,get_elevation(a_anchor_pos));gl_Position.xy=((a_box_real+0.5)*u_pixel_extrude_scale*2.0-1.0)*vec2(1.0,-1.0)*gl_Position.w;if (gl_Position.z/gl_Position.w < 1.1) {gl_Position.z=0.5;}v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:cn("in float v_radius;in vec2 v_extrude;in float v_collision;void main() {float alpha=0.5;float stroke_radius=0.9;float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);fragColor=color*alpha*opacity_t;}","in vec2 a_pos;in float a_radius;in vec2 a_flags;uniform vec2 u_viewport_size;out float v_radius;out vec2 v_extrude;out float v_collision;void main() {float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_collision=collision;gl_Position=vec4((a_pos/u_viewport_size*2.0-1.0)*vec2(1.0,-1.0),0.0,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),colorRelief:cn(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;uniform vec4 u_unpack;uniform sampler2D u_elevation_stops;uniform sampler2D u_color_stops;uniform int u_color_ramp_size;uniform float u_opacity;in vec2 v_pos;float getElevation(vec2 coord) {vec4 data=texture(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack);}float getElevationStop(int stop) {float x=(float(stop)+0.5)/float(u_color_ramp_size);vec4 data=texture(u_elevation_stops,vec2(x,0))*255.0;data.a=-1.0;return dot(data,u_unpack);}void main() {float el=getElevation(v_pos);int r=(u_color_ramp_size-1);int l=0;float el_l=getElevationStop(l);float el_r=getElevationStop(r);while(r-l > 1){int m=(r+l)/2;float el_m=getElevationStop(m);if(el < el_m){r=m;el_r=el_m;}else
{l=m;el_l=el_m;}}float x=(float(l)+(el-el_l)/(el_r-el_l)+0.5)/float(u_color_ramp_size);fragColor=u_opacity*texture(u_color_stops,vec2(x,0));
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform vec2 u_dimension;in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=projectTile(a_pos,a_pos);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_pos/8192.0)*scale+epsilon;if (a_pos.y <-32767.5) {v_pos.y=0.0;}if (a_pos.y > 32766.5) {v_pos.y=1.0;}}"),debug:cn("uniform highp vec4 u_color;uniform sampler2D u_overlay;in vec2 v_uv;void main() {vec4 overlay_color=texture(u_overlay,v_uv);fragColor=mix(u_color,overlay_color,overlay_color.a);}","in vec2 a_pos;out vec2 v_uv;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=projectTileWithElevation(a_pos*u_overlay_scale,get_elevation(a_pos));}"),depth:cn(qr,`in vec2 a_pos;void main() {
#ifdef GLOBE
gl_Position=projectTileFor3D(a_pos,0.0);
#else
gl_Position=u_projection_matrix*vec4(a_pos,0.0,1.0);
#endif
}`),fill:cn(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
fragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_fill_translate;in vec2 a_pos;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=projectTile(a_pos+u_fill_translate,a_pos);}`),fillOutline:cn(`in vec2 v_pos;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);fragColor=outline_color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_world;uniform vec2 u_fill_translate;in vec2 a_pos;out vec2 v_pos;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=projectTile(a_pos+u_fill_translate,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
}`),fillOutlinePattern:cn(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;in vec2 v_pos_a;in vec2 v_pos_b;in vec2 v_pos;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);fragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;uniform vec2 u_fill_translate;in vec2 a_pos;out vec2 v_pos_a;out vec2 v_pos_b;out vec2 v_pos;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=projectTile(a_pos+u_fill_translate,a_pos);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
}`),fillPattern:cn(`#ifdef GL_ES
precision highp float;
#endif
uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;in vec2 v_pos_a;in vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);fragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;uniform vec2 u_fill_translate;in vec2 a_pos;out vec2 v_pos_a;out vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=projectTile(a_pos+u_fill_translate,a_pos);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),fillExtrusion:cn(`in vec4 v_color;void main() {fragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp vec3 u_lightpos_globe;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec2 u_fill_translate;in vec2 a_pos;in vec4 a_normal_ed;
#ifdef TERRAIN3D
in vec2 a_centroid;
#endif
out vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float elevation=t > 0.0 ? height : base;vec2 posInTile=a_pos+u_fill_translate;
#ifdef GLOBE
vec3 spherePos=projectToSphere(posInTile,a_pos);gl_Position=interpolateProjectionFor3D(posInTile,spherePos,elevation);
#else
gl_Position=u_projection_matrix*vec4(posInTile,elevation,1.0);
#endif
float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;vec3 normalForLighting=normal/16384.0;float directional=clamp(dot(normalForLighting,u_lightpos),0.0,1.0);
#ifdef GLOBE
mat3 rotMatrix=globeGetRotationMatrix(spherePos);normalForLighting=rotMatrix*normalForLighting;directional=mix(directional,clamp(dot(normalForLighting,u_lightpos_globe),0.0,1.0),u_projection_transition);
#endif
directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),fillExtrusionPattern:cn(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;in vec2 v_pos_a;in vec2 v_pos_b;in vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);fragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec2 u_fill_translate;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp vec3 u_lightpos_globe;uniform lowp float u_lightintensity;in vec2 a_pos;in vec4 a_normal_ed;
#ifdef TERRAIN3D
in vec2 a_centroid;
#endif
#ifdef GLOBE
out vec3 v_sphere_pos;
#endif
out vec2 v_pos_a;out vec2 v_pos_b;out vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float elevation=t > 0.0 ? height : base;vec2 posInTile=a_pos+u_fill_translate;
#ifdef GLOBE
vec3 spherePos=projectToSphere(posInTile,a_pos);vec3 elevatedPos=spherePos*(1.0+elevation/GLOBE_RADIUS);v_sphere_pos=elevatedPos;gl_Position=interpolateProjectionFor3D(posInTile,spherePos,elevation);
#else
gl_Position=u_projection_matrix*vec4(posInTile,elevation,1.0);
#endif
vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,elevation*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),hillshadePrepare:cn(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;in vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack);}void main() {vec2 epsilon=1.0/u_dimension;float tileSize=u_dimension.x-2.0;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))*tileSize/pow(2.0,exaggeration+(28.2562-u_zoom));fragColor=clamp(vec4(deriv.x/8.0+0.5,deriv.y/8.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;in vec2 a_pos;in vec2 a_texture_pos;out vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:cn(`uniform sampler2D u_image;in vec2 v_pos;uniform vec2 u_latrange;uniform float u_exaggeration;uniform vec4 u_accent;uniform int u_method;uniform float u_altitudes[NUM_ILLUMINATION_SOURCES];uniform float u_azimuths[NUM_ILLUMINATION_SOURCES];uniform vec4 u_shadows[NUM_ILLUMINATION_SOURCES];uniform vec4 u_highlights[NUM_ILLUMINATION_SOURCES];
#define PI 3.141592653589793
#define STANDARD 0
#define COMBINED 1
#define IGOR 2
#define MULTIDIRECTIONAL 3
#define BASIC 4
float get_aspect(vec2 deriv){return deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);}void igor_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;float aspect=get_aspect(deriv);float azimuth=u_azimuths[0]+PI;float slope_stength=atan(length(deriv))*2.0/PI;float aspect_strength=1.0-abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);float shadow_strength=slope_stength*aspect_strength;float highlight_strength=slope_stength*(1.0-aspect_strength);fragColor=u_shadows[0]*shadow_strength+u_highlights[0]*highlight_strength;}void standard_hillshade(vec2 deriv){float azimuth=u_azimuths[0]+PI;float slope=atan(0.625*length(deriv));float aspect=get_aspect(deriv);float intensity=u_exaggeration;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadows[0],u_highlights[0],shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);fragColor=accent_color*(1.0-shade_color.a)+shade_color;}void basic_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;float azimuth=u_azimuths[0]+PI;float cos_az=cos(azimuth);float sin_az=sin(azimuth);float cos_alt=cos(u_altitudes[0]);float sin_alt=sin(u_altitudes[0]);float cang=(sin_alt-(deriv.y*cos_az*cos_alt-deriv.x*sin_az*cos_alt))/sqrt(1.0+dot(deriv,deriv));float shade=clamp(cang,0.0,1.0);if(shade > 0.5){fragColor=u_highlights[0]*(2.0*shade-1.0);}else
{fragColor=u_shadows[0]*(1.0-2.0*shade);}}void multidirectional_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;fragColor=vec4(0,0,0,0);for(int i=0; i < NUM_ILLUMINATION_SOURCES; i++){float cos_alt=cos(u_altitudes[i]);float sin_alt=sin(u_altitudes[i]);float cos_az=-cos(u_azimuths[i]);float sin_az=-sin(u_azimuths[i]);float cang=(sin_alt-(deriv.y*cos_az*cos_alt-deriv.x*sin_az*cos_alt))/sqrt(1.0+dot(deriv,deriv));float shade=clamp(cang,0.0,1.0);if(shade > 0.5){fragColor+=u_highlights[i]*(2.0*shade-1.0)/float(NUM_ILLUMINATION_SOURCES);}else
{fragColor+=u_shadows[i]*(1.0-2.0*shade)/float(NUM_ILLUMINATION_SOURCES);}}}void combined_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;float azimuth=u_azimuths[0]+PI;float cos_az=cos(azimuth);float sin_az=sin(azimuth);float cos_alt=cos(u_altitudes[0]);float sin_alt=sin(u_altitudes[0]);float cang=acos((sin_alt-(deriv.y*cos_az*cos_alt-deriv.x*sin_az*cos_alt))/sqrt(1.0+dot(deriv,deriv)));cang=clamp(cang,0.0,PI/2.0);float shade=cang*atan(length(deriv))*4.0/PI/PI;float highlight=(PI/2.0-cang)*atan(length(deriv))*4.0/PI/PI;fragColor=u_shadows[0]*shade+u_highlights[0]*highlight;}void main() {vec4 pixel=texture(u_image,v_pos);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));vec2 deriv=((pixel.rg*8.0)-4.0)/scaleFactor;if (u_method==BASIC) {basic_hillshade(deriv);} else if (u_method==COMBINED) {combined_hillshade(deriv);} else if (u_method==IGOR) {igor_hillshade(deriv);} else if (u_method==MULTIDIRECTIONAL) {multidirectional_hillshade(deriv);} else if (u_method==STANDARD) {standard_hillshade(deriv);} else {standard_hillshade(deriv);}
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=projectTile(a_pos,a_pos);v_pos=a_pos/8192.0;if (a_pos.y <-32767.5) {v_pos.y=0.0;}if (a_pos.y > 32766.5) {v_pos.y=1.0;}}"),line:cn(`uniform lowp float u_device_pixel_ratio;in vec2 v_width2;in vec2 v_normal;in float v_gamma_scale;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);fragColor=color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
in vec2 a_pos_normal;in vec4 a_data;uniform vec2 u_translation;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;out vec2 v_normal;out vec2 v_width2;out float v_gamma_scale;out highp float v_linesofar;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),lineGradient:cn(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;in vec2 v_width2;in vec2 v_normal;in float v_gamma_scale;in highp vec2 v_uv;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture(u_image,v_uv);fragColor=color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
in vec2 a_pos_normal;in vec4 a_data;in float a_uv_x;in float a_split_index;uniform vec2 u_translation;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;out vec2 v_normal;out vec2 v_width2;out float v_gamma_scale;out highp vec2 v_uv;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),linePattern:cn(`#ifdef GL_ES
precision highp float;
#endif
uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;in vec2 v_normal;in vec2 v_width2;in float v_linesofar;in float v_gamma_scale;in float v_width;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture(u_image,pos_a),texture(u_image,pos_b),u_fade);fragColor=color*alpha*opacity;
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
in vec2 a_pos_normal;in vec4 a_data;uniform vec2 u_translation;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;out vec2 v_normal;out vec2 v_width2;out float v_linesofar;out float v_gamma_scale;out float v_width;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),lineSDF:cn(`uniform lowp float u_device_pixel_ratio;uniform lowp float u_lineatlas_width;uniform sampler2D u_image;uniform float u_mix;in vec2 v_normal;in vec2 v_width2;in vec2 v_tex_a;in vec2 v_tex_b;in float v_gamma_scale;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define mediump vec4 dasharray_from
#pragma mapbox: define mediump vec4 dasharray_to
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 dasharray_from
#pragma mapbox: initialize mediump vec4 dasharray_to
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture(u_image,v_tex_a).a;float sdfdist_b=texture(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);float sdfgamma=(u_lineatlas_width/256.0/u_device_pixel_ratio)/min(dasharray_from.w,dasharray_to.w);alpha*=smoothstep(0.5-sdfgamma/floorwidth,0.5+sdfgamma/floorwidth,sdfdist);fragColor=color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
in vec2 a_pos_normal;in vec4 a_data;uniform vec2 u_translation;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_tileratio;uniform float u_crossfade_from;uniform float u_crossfade_to;uniform float u_lineatlas_height;out vec2 v_normal;out vec2 v_width2;out vec2 v_tex_a;out vec2 v_tex_b;out float v_gamma_scale;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define mediump vec4 dasharray_from
#pragma mapbox: define mediump vec4 dasharray_to
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 dasharray_from
#pragma mapbox: initialize mediump vec4 dasharray_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
float u_patternscale_a_x=u_tileratio/dasharray_from.w/u_crossfade_from;float u_patternscale_a_y=-dasharray_from.z/2.0/u_lineatlas_height;float u_patternscale_b_x=u_tileratio/dasharray_to.w/u_crossfade_to;float u_patternscale_b_y=-dasharray_to.z/2.0/u_lineatlas_height;v_tex_a=vec2(a_linesofar*u_patternscale_a_x/floorwidth,normal.y*u_patternscale_a_y+(float(dasharray_from.y)+0.5)/u_lineatlas_height);v_tex_b=vec2(a_linesofar*u_patternscale_b_x/floorwidth,normal.y*u_patternscale_b_y+(float(dasharray_to.y)+0.5)/u_lineatlas_height);v_width2=vec2(outset,inset);}`),lineGradientSDF:cn(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform sampler2D u_image_dash;uniform float u_mix;uniform lowp float u_lineatlas_width;in vec2 v_normal;in vec2 v_width2;in vec2 v_tex_a;in vec2 v_tex_b;in float v_gamma_scale;in highp vec2 v_uv;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define mediump vec4 dasharray_from
#pragma mapbox: define mediump vec4 dasharray_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 dasharray_from
#pragma mapbox: initialize mediump vec4 dasharray_to
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture(u_image,v_uv);float sdfdist_a=texture(u_image_dash,v_tex_a).a;float sdfdist_b=texture(u_image_dash,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);float sdfgamma=(u_lineatlas_width/256.0)/min(dasharray_from.w,dasharray_to.w);float dash_alpha=smoothstep(0.5-sdfgamma/floorwidth,0.5+sdfgamma/floorwidth,sdfdist);fragColor=color*(alpha*dash_alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
in vec2 a_pos_normal;in vec4 a_data;in float a_uv_x;in float a_split_index;uniform vec2 u_translation;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;uniform float u_tileratio;uniform float u_crossfade_from;uniform float u_crossfade_to;uniform float u_lineatlas_height;out vec2 v_normal;out vec2 v_width2;out float v_gamma_scale;out highp vec2 v_uv;out vec2 v_tex_a;out vec2 v_tex_b;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define mediump vec4 dasharray_from
#pragma mapbox: define mediump vec4 dasharray_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 dasharray_from
#pragma mapbox: initialize mediump vec4 dasharray_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;float texel_height=1.0/u_image_height;float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
float u_patternscale_a_x=u_tileratio/dasharray_from.w/u_crossfade_from;float u_patternscale_a_y=-dasharray_from.z/2.0/u_lineatlas_height;float u_patternscale_b_x=u_tileratio/dasharray_to.w/u_crossfade_to;float u_patternscale_b_y=-dasharray_to.z/2.0/u_lineatlas_height;v_tex_a=vec2(a_linesofar*u_patternscale_a_x/floorwidth,normal.y*u_patternscale_a_y+(float(dasharray_from.y)+0.5)/u_lineatlas_height);v_tex_b=vec2(a_linesofar*u_patternscale_b_x/floorwidth,normal.y*u_patternscale_b_y+(float(dasharray_to.y)+0.5)/u_lineatlas_height);v_width2=vec2(outset,inset);}`),raster:cn(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;in vec2 v_pos0;in vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture(u_image0,v_pos0);vec4 color1=texture(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);fragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;uniform vec4 u_coords_top;uniform vec4 u_coords_bottom;in vec2 a_pos;out vec2 v_pos0;out vec2 v_pos1;void main() {vec2 fractionalPos=a_pos/8192.0;vec2 position=mix(mix(u_coords_top.xy,u_coords_top.zw,fractionalPos.x),mix(u_coords_bottom.xy,u_coords_bottom.zw,fractionalPos.x),fractionalPos.y);gl_Position=projectTile(position,position);v_pos0=((fractionalPos-0.5)/u_buffer_scale)+0.5;
#ifdef GLOBE
if (a_pos.y <-32767.5) {v_pos0.y=0.0;}if (a_pos.y > 32766.5) {v_pos0.y=1.0;}
#endif
v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}`),symbolIcon:cn(`uniform sampler2D u_texture;in vec2 v_tex;in float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;fragColor=texture(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`in vec4 a_pos_offset;in vec4 a_data;in vec4 a_pixeloffset;in vec3 a_projected_pos;in float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;out vec2 v_tex;out float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;
#ifdef GLOBE
if(u_pitch_with_map) {float anchor_pos_tile_y=(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w,z,1.0)).y;projectionScaling=mix(projectionScaling,1.0/circumferenceRatioAtTileY(anchor_pos_tile_y)*u_pitched_scale,u_projection_transition);}
#endif
vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}gl_Position=finalPos;v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float visibility=calculate_visibility(projectedPoint);v_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));}`),symbolSDF:cn(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;in vec2 v_data0;in vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float inner_edge=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);inner_edge=inner_edge+gamma*gamma_scale;}lowp float dist=texture(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(inner_edge-gamma_scaled,inner_edge+gamma_scaled,dist);if (u_is_halo) {lowp float halo_edge=(6.0-halo_width/fontScale)/SDF_PX;alpha=min(smoothstep(halo_edge-gamma_scaled,halo_edge+gamma_scaled,dist),1.0-alpha);}fragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`in vec4 a_pos_offset;in vec4 a_data;in vec4 a_pixeloffset;in vec3 a_projected_pos;in float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_translation;uniform float u_pitched_scale;out vec2 v_data0;out vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;
#ifdef GLOBE
if(u_pitch_with_map) {float anchor_pos_tile_y=(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w,z,1.0)).y;projectionScaling=mix(projectionScaling,1.0/circumferenceRatioAtTileY(anchor_pos_tile_y)*u_pitched_scale,u_projection_transition);}
#endif
vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),symbolTextAndIcon:cn(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;in vec4 v_data0;in vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;fragColor=texture(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);fragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`in vec4 a_pos_offset;in vec4 a_data;in vec3 a_projected_pos;in float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;out vec4 v_data0;out vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;
#ifdef GLOBE
if(u_pitch_with_map && !u_is_along_line) {float anchor_pos_tile_y=(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w,z,1.0)).y;projectionScaling=mix(projectionScaling,1.0/circumferenceRatioAtTileY(anchor_pos_tile_y)*u_pitched_scale,u_projection_transition);}
#endif
vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`),terrain:cn("uniform sampler2D u_texture;uniform vec4 u_fog_color;uniform vec4 u_horizon_color;uniform float u_fog_ground_blend;uniform float u_fog_ground_blend_opacity;uniform float u_horizon_fog_blend;uniform bool u_is_globe_mode;in vec2 v_texture_pos;in float v_fog_depth;const float gamma=2.2;vec4 gammaToLinear(vec4 color) {return pow(color,vec4(gamma));}vec4 linearToGamma(vec4 color) {return pow(color,vec4(1.0/gamma));}void main() {vec4 surface_color=texture(u_texture,vec2(v_texture_pos.x,1.0-v_texture_pos.y));if (!u_is_globe_mode && v_fog_depth > u_fog_ground_blend) {vec4 surface_color_linear=gammaToLinear(surface_color);float blend_color=smoothstep(0.0,1.0,max((v_fog_depth-u_horizon_fog_blend)/(1.0-u_horizon_fog_blend),0.0));vec4 fog_horizon_color_linear=mix(gammaToLinear(u_fog_color),gammaToLinear(u_horizon_color),blend_color);float factor_fog=max(v_fog_depth-u_fog_ground_blend,0.0)/(1.0-u_fog_ground_blend);fragColor=linearToGamma(mix(surface_color_linear,fog_horizon_color_linear,pow(factor_fog,2.0)*u_fog_ground_blend_opacity));} else {fragColor=surface_color;}}","in vec3 a_pos3d;uniform mat4 u_fog_matrix;uniform float u_ele_delta;out vec2 v_texture_pos;out float v_fog_depth;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/8192.0;gl_Position=projectTileFor3D(a_pos3d.xy,get_elevation(a_pos3d.xy)-ele_delta);vec4 pos=u_fog_matrix*vec4(a_pos3d.xy,ele,1.0);v_fog_depth=pos.z/pos.w*0.5+0.5;}"),terrainDepth:cn("in float v_depth;const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitMsk=vec4(0.,vec3(1./256.0));highp vec4 pack(highp float value) {highp vec4 comp=fract(value*bitSh);comp-=comp.xxyz*bitMsk;return comp;}void main() {fragColor=pack(v_depth);}","in vec3 a_pos3d;uniform float u_ele_delta;out float v_depth;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;gl_Position=projectTileFor3D(a_pos3d.xy,ele-ele_delta);v_depth=gl_Position.z/gl_Position.w;}"),terrainCoords:cn("precision mediump float;uniform sampler2D u_texture;uniform float u_terrain_coords_id;in vec2 v_texture_pos;void main() {vec4 rgba=texture(u_texture,v_texture_pos);fragColor=vec4(rgba.r,rgba.g,rgba.b,u_terrain_coords_id);}","in vec3 a_pos3d;uniform float u_ele_delta;out vec2 v_texture_pos;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/8192.0;gl_Position=projectTileFor3D(a_pos3d.xy,ele-ele_delta);}"),projectionErrorMeasurement:cn("in vec4 v_output_error_encoded;void main() {fragColor=v_output_error_encoded;}","in vec2 a_pos;uniform highp float u_input;uniform highp float u_output_expected;out vec4 v_output_error_encoded;void main() {float real_output=2.0*atan(exp(PI-(u_input*PI*2.0)))-PI*0.5;float error=real_output-u_output_expected;float abs_error=abs(error)*128.0;v_output_error_encoded.x=min(floor(abs_error*256.0),255.0)/255.0;abs_error-=v_output_error_encoded.x;v_output_error_encoded.y=min(floor(abs_error*65536.0),255.0)/255.0;abs_error-=v_output_error_encoded.x/255.0;v_output_error_encoded.z=min(floor(abs_error*16777216.0),255.0)/255.0;v_output_error_encoded.w=error >=0.0 ? 1.0 : 0.0;gl_Position=vec4(a_pos,0.0,1.0);}"),atmosphere:cn(`in vec3 view_direction;uniform vec3 u_sun_pos;uniform vec3 u_globe_position;uniform float u_globe_radius;uniform float u_atmosphere_blend;/**Shader use from https:*Made some change to adapt to MapLibre Globe geometry*/const float PI=3.141592653589793;const int iSteps=5;const int jSteps=3;/*radius of the planet*/const float EARTH_RADIUS=6371e3;/*radius of the atmosphere*/const float ATMOS_RADIUS=6471e3;vec2 rsi(vec3 r0,vec3 rd,float sr) {float a=dot(rd,rd);float b=2.0*dot(rd,r0);float c=dot(r0,r0)-(sr*sr);float d=(b*b)-4.0*a*c;if (d < 0.0) return vec2(1e5,-1e5);return vec2((-b-sqrt(d))/(2.0*a),(-b+sqrt(d))/(2.0*a));}vec4 atmosphere(vec3 r,vec3 r0,vec3 pSun,float iSun,float rPlanet,float rAtmos,vec3 kRlh,float kMie,float shRlh,float shMie,float g) {pSun=normalize(pSun);r=normalize(r);vec2 p=rsi(r0,r,rAtmos);if (p.x > p.y) {return vec4(0.0,0.0,0.0,1.0);}if (p.x < 0.0) {p.x=0.0;}vec3 pos=r0+r*p.x;vec2 p2=rsi(r0,r,rPlanet);if (p2.x <=p2.y && p2.x > 0.0) {p.y=min(p.y,p2.x);}float iStepSize=(p.y-p.x)/float(iSteps);float iTime=p.x+iStepSize*0.5;vec3 totalRlh=vec3(0,0,0);vec3 totalMie=vec3(0,0,0);float iOdRlh=0.0;float iOdMie=0.0;float mu=dot(r,pSun);float mumu=mu*mu;float gg=g*g;float pRlh=3.0/(16.0*PI)*(1.0+mumu);float pMie=3.0/(8.0*PI)*((1.0-gg)*(mumu+1.0))/(pow(1.0+gg-2.0*mu*g,1.5)*(2.0+gg));for (int i=0; i < iSteps; i++) {vec3 iPos=r0+r*iTime;float iHeight=length(iPos)-rPlanet;float odStepRlh=exp(-iHeight/shRlh)*iStepSize;float odStepMie=exp(-iHeight/shMie)*iStepSize;iOdRlh+=odStepRlh;iOdMie+=odStepMie;float jStepSize=rsi(iPos,pSun,rAtmos).y/float(jSteps);float jTime=jStepSize*0.5;float jOdRlh=0.0;float jOdMie=0.0;for (int j=0; j < jSteps; j++) {vec3 jPos=iPos+pSun*jTime;float jHeight=length(jPos)-rPlanet;jOdRlh+=exp(-jHeight/shRlh)*jStepSize;jOdMie+=exp(-jHeight/shMie)*jStepSize;jTime+=jStepSize;}vec3 attn=exp(-(kMie*(iOdMie+jOdMie)+kRlh*(iOdRlh+jOdRlh)));totalRlh+=odStepRlh*attn;totalMie+=odStepMie*attn;iTime+=iStepSize;}float opacity=exp(-(length(kRlh)*length(totalRlh)+kMie*length(totalMie)));vec3 color=iSun*(pRlh*kRlh*totalRlh+pMie*kMie*totalMie);return vec4(color,opacity);}void main() {vec3 scale_camera_pos=-u_globe_position*EARTH_RADIUS/u_globe_radius;vec4 color=atmosphere(normalize(view_direction),scale_camera_pos,u_sun_pos,22.0,EARTH_RADIUS,ATMOS_RADIUS,vec3(5.5e-6,13.0e-6,22.4e-6),21e-6,8e3,1.2e3,0.758
);color.rgb=1.0-exp(-1.0*color.rgb);color=pow(color,vec4(1.0/2.2));fragColor=vec4(color.rgb,1.0-color.a)*u_atmosphere_blend;}`,"in vec2 a_pos;uniform mat4 u_inv_proj_matrix;out vec3 view_direction;void main() {view_direction=(u_inv_proj_matrix*vec4(a_pos,0.0,1.0)).xyz;gl_Position=vec4(a_pos,0.0,1.0);}"),sky:cn("uniform vec4 u_sky_color;uniform vec4 u_horizon_color;uniform vec2 u_horizon;uniform vec2 u_horizon_normal;uniform float u_sky_horizon_blend;uniform float u_sky_blend;void main() {float x=gl_FragCoord.x;float y=gl_FragCoord.y;float blend=(y-u_horizon.y)*u_horizon_normal.y+(x-u_horizon.x)*u_horizon_normal.x;if (blend > 0.0) {if (blend < u_sky_horizon_blend) {fragColor=mix(u_sky_color,u_horizon_color,pow(1.0-blend/u_sky_horizon_blend,2.0));} else {fragColor=u_sky_color;}}fragColor=mix(fragColor,vec4(vec3(0.0),0.0),u_sky_blend);}","in vec2 a_pos;void main() {gl_Position=vec4(a_pos,1.0,1.0);}")};function cn(w,r){const c=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,f=r.match(/in ([\w]+) ([\w]+)/g),y=w.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),b=r.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),S=b?b.concat(y):y,M={};return{fragmentSource:w=w.replace(c,((N,j,q,ne,ee)=>(M[ee]=!0,j==="define"?`
#ifndef HAS_UNIFORM_u_${ee}
in ${q} ${ne} ${ee};
#else
uniform ${q} ${ne} u_${ee};
#endif
`:`
#ifdef HAS_UNIFORM_u_${ee}
    ${q} ${ne} ${ee} = u_${ee};
#endif
`))),vertexSource:r=r.replace(c,((N,j,q,ne,ee)=>{const Ae=ne==="float"?"vec2":"vec4",ve=ee.match(/color/)?"color":Ae;return M[ee]?j==="define"?`
#ifndef HAS_UNIFORM_u_${ee}
uniform lowp float u_${ee}_t;
in ${q} ${Ae} a_${ee};
out ${q} ${ne} ${ee};
#else
uniform ${q} ${ne} u_${ee};
#endif
`:ve==="vec4"?`
#ifndef HAS_UNIFORM_u_${ee}
    ${ee} = a_${ee};
#else
    ${q} ${ne} ${ee} = u_${ee};
#endif
`:`
#ifndef HAS_UNIFORM_u_${ee}
    ${ee} = unpack_mix_${ve}(a_${ee}, u_${ee}_t);
#else
    ${q} ${ne} ${ee} = u_${ee};
#endif
`:j==="define"?`
#ifndef HAS_UNIFORM_u_${ee}
uniform lowp float u_${ee}_t;
in ${q} ${Ae} a_${ee};
#else
uniform ${q} ${ne} u_${ee};
#endif
`:ve==="vec4"?`
#ifndef HAS_UNIFORM_u_${ee}
    ${q} ${ne} ${ee} = a_${ee};
#else
    ${q} ${ne} ${ee} = u_${ee};
#endif
`:`
#ifndef HAS_UNIFORM_u_${ee}
    ${q} ${ne} ${ee} = unpack_mix_${ve}(a_${ee}, u_${ee}_t);
#else
    ${q} ${ne} ${ee} = u_${ee};
#endif
`})),staticAttributes:f,staticUniforms:S}}class ii{constructor(r,c,f){this.vertexBuffer=r,this.indexBuffer=c,this.segments=f}destroy(){this.vertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.vertexBuffer=null,this.indexBuffer=null,this.segments=null}}var _s=o.aV([{name:"a_pos",type:"Int16",components:2}]);const Wi="#define PROJECTION_MERCATOR",uo="mercator";class ws{constructor(){this._cachedMesh=null}get name(){return"mercator"}get useSubdivision(){return!1}get shaderVariantName(){return uo}get shaderDefine(){return Wi}get shaderPreludeCode(){return Jn.projectionMercator}get vertexShaderPreludeCode(){return Jn.projectionMercator.vertexSource}get subdivisionGranularity(){return o.aW.noSubdivision}get useGlobeControls(){return!1}get transitionState(){return 0}get latitudeErrorCorrectionRadians(){return 0}destroy(){}updateGPUdependent(r){}getMeshFromTileID(r,c,f,y,b){if(this._cachedMesh)return this._cachedMesh;const S=new o.aX;S.emplaceBack(0,0),S.emplaceBack(o.a5,0),S.emplaceBack(0,o.a5),S.emplaceBack(o.a5,o.a5);const M=r.createVertexBuffer(S,_s.members),N=o.aY.simpleSegment(0,0,4,2),j=new o.aZ;j.emplaceBack(1,0,2),j.emplaceBack(1,2,3);const q=r.createIndexBuffer(j);return this._cachedMesh=new ii(M,q,N),this._cachedMesh}recalculate(){}hasTransition(){return!1}setErrorQueryLatitudeDegrees(r){}}class Sa{constructor(r=0,c=0,f=0,y=0){if(isNaN(r)||r<0||isNaN(c)||c<0||isNaN(f)||f<0||isNaN(y)||y<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=r,this.bottom=c,this.left=f,this.right=y}interpolate(r,c,f){return c.top!=null&&r.top!=null&&(this.top=o.G.number(r.top,c.top,f)),c.bottom!=null&&r.bottom!=null&&(this.bottom=o.G.number(r.bottom,c.bottom,f)),c.left!=null&&r.left!=null&&(this.left=o.G.number(r.left,c.left,f)),c.right!=null&&r.right!=null&&(this.right=o.G.number(r.right,c.right,f)),this}getCenter(r,c){const f=o.ao((this.left+r-this.right)/2,0,r),y=o.ao((this.top+c-this.bottom)/2,0,c);return new o.P(f,y)}equals(r){return this.top===r.top&&this.bottom===r.bottom&&this.left===r.left&&this.right===r.right}clone(){return new Sa(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}function Fa(w,r){if(!w.renderWorldCopies||w.lngRange)return;const c=r.lng-w.center.lng;r.lng+=c>180?-360:c<-180?360:0}function ti(w){return Math.max(0,Math.floor(w))}class Aa{constructor(r,c){var f;this.applyConstrain=(y,b)=>this._constrainOverride!==null?this._constrainOverride(y,b):this._callbacks.defaultConstrain(y,b),this._callbacks=r,this._tileSize=512,this._renderWorldCopies=c?.renderWorldCopies===void 0||!!c?.renderWorldCopies,this._minZoom=c?.minZoom||0,this._maxZoom=c?.maxZoom||22,this._minPitch=c?.minPitch==null?0:c?.minPitch,this._maxPitch=c?.maxPitch==null?60:c?.maxPitch,this._constrainOverride=(f=c?.constrainOverride)!==null&&f!==void 0?f:null,this.setMaxBounds(),this._width=0,this._height=0,this._center=new o.V(0,0),this._elevation=0,this._zoom=0,this._tileZoom=ti(this._zoom),this._scale=o.ar(this._zoom),this._bearingInRadians=0,this._fovInRadians=.6435011087932844,this._pitchInRadians=0,this._rollInRadians=0,this._unmodified=!0,this._edgeInsets=new Sa,this._minElevationForCurrentTile=0,this._autoCalculateNearFarZ=!0}apply(r,c,f){this._constrainOverride=r.constrainOverride,this._latRange=r.latRange,this._lngRange=r.lngRange,this._width=r.width,this._height=r.height,this._center=r.center,this._elevation=r.elevation,this._minElevationForCurrentTile=r.minElevationForCurrentTile,this._zoom=r.zoom,this._tileZoom=ti(this._zoom),this._scale=o.ar(this._zoom),this._bearingInRadians=r.bearingInRadians,this._fovInRadians=r.fovInRadians,this._pitchInRadians=r.pitchInRadians,this._rollInRadians=r.rollInRadians,this._unmodified=r.unmodified,this._edgeInsets=new Sa(r.padding.top,r.padding.bottom,r.padding.left,r.padding.right),this._minZoom=r.minZoom,this._maxZoom=r.maxZoom,this._minPitch=r.minPitch,this._maxPitch=r.maxPitch,this._renderWorldCopies=r.renderWorldCopies,this._cameraToCenterDistance=r.cameraToCenterDistance,this._nearZ=r.nearZ,this._farZ=r.farZ,this._autoCalculateNearFarZ=!f&&r.autoCalculateNearFarZ,c&&this.constrainInternal(),this._calcMatrices()}get pixelsToClipSpaceMatrix(){return this._pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._clipSpaceToPixelsMatrix}get minElevationForCurrentTile(){return this._minElevationForCurrentTile}setMinElevationForCurrentTile(r){this._minElevationForCurrentTile=r}get tileSize(){return this._tileSize}get tileZoom(){return this._tileZoom}get scale(){return this._scale}get width(){return this._width}get height(){return this._height}get bearingInRadians(){return this._bearingInRadians}get lngRange(){return this._lngRange}get latRange(){return this._latRange}get pixelsToGLUnits(){return this._pixelsToGLUnits}get minZoom(){return this._minZoom}setMinZoom(r){this._minZoom!==r&&(this._minZoom=r,this.setZoom(this.applyConstrain(this._center,this.zoom).zoom))}get maxZoom(){return this._maxZoom}setMaxZoom(r){this._maxZoom!==r&&(this._maxZoom=r,this.setZoom(this.applyConstrain(this._center,this.zoom).zoom))}get minPitch(){return this._minPitch}setMinPitch(r){this._minPitch!==r&&(this._minPitch=r,this.setPitch(Math.max(this.pitch,r)))}get maxPitch(){return this._maxPitch}setMaxPitch(r){this._maxPitch!==r&&(this._maxPitch=r,this.setPitch(Math.min(this.pitch,r)))}get renderWorldCopies(){return this._renderWorldCopies}setRenderWorldCopies(r){r===void 0?r=!0:r===null&&(r=!1),this._renderWorldCopies=r}get constrainOverride(){return this._constrainOverride}setConstrainOverride(r){r===void 0&&(r=null),this._constrainOverride!==r&&(this._constrainOverride=r,this.constrainInternal(),this._calcMatrices())}get worldSize(){return this._tileSize*this._scale}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new o.P(this._width,this._height)}get bearing(){return this._bearingInRadians/Math.PI*180}setBearing(r){const c=o.W(r,-180,180)*Math.PI/180;var f,y,b,S,M,N,j,q,ne;this._bearingInRadians!==c&&(this._unmodified=!1,this._bearingInRadians=c,this._calcMatrices(),this._rotationMatrix=E(),f=this._rotationMatrix,b=-this._bearingInRadians,S=(y=this._rotationMatrix)[0],M=y[1],N=y[2],j=y[3],q=Math.sin(b),ne=Math.cos(b),f[0]=S*ne+N*q,f[1]=M*ne+j*q,f[2]=S*-q+N*ne,f[3]=M*-q+j*ne)}get rotationMatrix(){return this._rotationMatrix}get pitchInRadians(){return this._pitchInRadians}get pitch(){return this._pitchInRadians/Math.PI*180}setPitch(r){const c=o.ao(r,this.minPitch,this.maxPitch)/180*Math.PI;this._pitchInRadians!==c&&(this._unmodified=!1,this._pitchInRadians=c,this._calcMatrices())}get rollInRadians(){return this._rollInRadians}get roll(){return this._rollInRadians/Math.PI*180}setRoll(r){const c=r/180*Math.PI;this._rollInRadians!==c&&(this._unmodified=!1,this._rollInRadians=c,this._calcMatrices())}get fovInRadians(){return this._fovInRadians}get fov(){return o.a_(this._fovInRadians)}setFov(r){r=o.ao(r,.1,150),this.fov!==r&&(this._unmodified=!1,this._fovInRadians=o.aq(r),this._calcMatrices())}get zoom(){return this._zoom}setZoom(r){const c=this.applyConstrain(this._center,r).zoom;this._zoom!==c&&(this._unmodified=!1,this._zoom=c,this._tileZoom=Math.max(0,Math.floor(c)),this._scale=o.ar(c),this.constrainInternal(),this._calcMatrices())}get center(){return this._center}setCenter(r){r.lat===this._center.lat&&r.lng===this._center.lng||(this._unmodified=!1,this._center=r,this.constrainInternal(),this._calcMatrices())}get elevation(){return this._elevation}setElevation(r){r!==this._elevation&&(this._elevation=r,this.constrainInternal(),this._calcMatrices())}get padding(){return this._edgeInsets.toJSON()}setPadding(r){this._edgeInsets.equals(r)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,r,1),this._calcMatrices())}get centerPoint(){return this._edgeInsets.getCenter(this._width,this._height)}get pixelsPerMeter(){return this._pixelPerMeter}get unmodified(){return this._unmodified}get cameraToCenterDistance(){return this._cameraToCenterDistance}get nearZ(){return this._nearZ}get farZ(){return this._farZ}get autoCalculateNearFarZ(){return this._autoCalculateNearFarZ}overrideNearFarZ(r,c){this._autoCalculateNearFarZ=!1,this._nearZ=r,this._farZ=c,this._calcMatrices()}clearNearFarZOverride(){this._autoCalculateNearFarZ=!0,this._calcMatrices()}isPaddingEqual(r){return this._edgeInsets.equals(r)}interpolatePadding(r,c,f){this._unmodified=!1,this._edgeInsets.interpolate(r,c,f),this.constrainInternal(),this._calcMatrices()}resize(r,c,f=!0){this._width=r,this._height=c,f&&this.constrainInternal(),this._calcMatrices()}getMaxBounds(){return this._latRange&&this._latRange.length===2&&this._lngRange&&this._lngRange.length===2?new Ur([this._lngRange[0],this._latRange[0]],[this._lngRange[1],this._latRange[1]]):null}setMaxBounds(r){r?(this._lngRange=[r.getWest(),r.getEast()],this._latRange=[r.getSouth(),r.getNorth()],this.constrainInternal()):(this._lngRange=null,this._latRange=[-o.ap,o.ap])}getCameraQueryGeometry(r,c){if(c.length===1)return[c[0],r];{const{minX:f,minY:y,maxX:b,maxY:S}=o.ac.fromPoints(c).extend(r);return[new o.P(f,y),new o.P(b,y),new o.P(b,S),new o.P(f,S),new o.P(f,y)]}}constrainInternal(){if(!this.center||!this._width||!this._height||this._constraining)return;this._constraining=!0;const r=this._unmodified,{center:c,zoom:f}=this.applyConstrain(this.center,this.zoom);this.setCenter(c),this.setZoom(f),this._unmodified=r,this._constraining=!1}_calcMatrices(){if(this._width&&this._height){this._pixelsToGLUnits=[2/this._width,-2/this._height];let r=o.as(new Float64Array(16));o.Q(r,r,[this._width/2,-this._height/2,1]),o.O(r,r,[1,-1,0]),this._clipSpaceToPixelsMatrix=r,r=o.as(new Float64Array(16)),o.Q(r,r,[1,-1,1]),o.O(r,r,[-1,-1,0]),o.Q(r,r,[2/this._width,2/this._height,1]),this._pixelsToClipSpaceMatrix=r,this._cameraToCenterDistance=.5/Math.tan(this.fovInRadians/2)*this._height}this._callbacks.calcMatrices()}calculateCenterFromCameraLngLatAlt(r,c,f,y){const b=f!==void 0?f:this.bearing,S=y=y!==void 0?y:this.pitch,{distanceToCenter:M,clampedElevation:N}=this._distanceToCenterFromAltElevationPitch(c,this.elevation,S),{x:j,y:q}=tn(S,b),ne=o.ab.fromLngLat(r,c);let ee,Ae,ve=o.a$(1,ne.y),ke=0;do{if(ke+=1,ke>10)break;Ae=M/ve,ee=new o.ab(ne.x+j*Ae,ne.y+q*Ae),ve=1/ee.meterInMercatorCoordinateUnits()}while(Math.abs(M-Ae*ve)>1e-12);return{center:ee.toLngLat(),elevation:N,zoom:o.au(this.height/2/Math.tan(this.fovInRadians/2)/Ae/this.tileSize)}}recalculateZoomAndCenter(r){if(this.elevation-r==0)return;const c=1/this.worldSize,f=o.at(1,this.center.lat)*this.worldSize,y=o.ab.fromLngLat(this.center,this.elevation),b=y.x/c,S=y.y/c,M=y.z/c,N=this.pitch,j=this.bearing,{x:q,y:ne,z:ee}=tn(N,j),Ae=this.cameraToCenterDistance,ve=b+Ae*-q,ke=S+Ae*-ne,Oe=M+Ae*ee,{distanceToCenter:Qe,clampedElevation:Ge}=this._distanceToCenterFromAltElevationPitch(Oe/f,r,N),ot=Qe*f,Ze=new o.ab((ve+q*ot)*c,(ke+ne*ot)*c,0).toLngLat(),ct=o.at(1,Ze.lat),dt=o.au(this.height/2/Math.tan(this.fovInRadians/2)/Qe/ct/this.tileSize);this._elevation=Ge,this._center=Ze,this.setZoom(dt)}_distanceToCenterFromAltElevationPitch(r,c,f){const y=-Math.cos(o.aq(f)),b=r-c;let S,M=c;return y*b>=0||Math.abs(y)<.1?(S=1e4,M=r+S*y):S=-b/y,{distanceToCenter:S,clampedElevation:M}}getCameraPoint(){const r=Math.tan(this.pitchInRadians)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new o.P(r*Math.sin(this.rollInRadians),r*Math.cos(this.rollInRadians)))}getCameraAltitude(){return Math.cos(this.pitchInRadians)*this._cameraToCenterDistance/this._pixelPerMeter+this.elevation}getCameraLngLat(){const r=o.at(1,this.center.lat)*this.worldSize;return mt(this.center,this.elevation,this.pitch,this.bearing,this.cameraToCenterDistance/r).toLngLat()}getMercatorTileCoordinates(r){if(!r)return[0,0,1,1];const c=r.canonical.z>=0?1<<r.canonical.z:Math.pow(2,r.canonical.z);return[r.canonical.x/c,r.canonical.y/c,1/c/o.a5,1/c/o.a5]}}class Zi{constructor(r,c){this.min=r,this.max=c,this.center=o.b0([],o.b1([],this.min,this.max),.5)}quadrant(r){const c=[r%2==0,r<2],f=o.b2(this.min),y=o.b2(this.max);for(let b=0;b<c.length;b++)f[b]=c[b]?this.min[b]:this.center[b],y[b]=c[b]?this.center[b]:this.max[b];return y[2]=this.max[2],new Zi(f,y)}distanceX(r){return Math.max(Math.min(this.max[0],r[0]),this.min[0])-r[0]}distanceY(r){return Math.max(Math.min(this.max[1],r[1]),this.min[1])-r[1]}intersectsFrustum(r){let c=!0;for(let f=0;f<r.planes.length;f++){const y=this.intersectsPlane(r.planes[f]);if(y===0)return 0;y===1&&(c=!1)}return c?2:r.aabb.min[0]>this.max[0]||r.aabb.min[1]>this.max[1]||r.aabb.min[2]>this.max[2]||r.aabb.max[0]<this.min[0]||r.aabb.max[1]<this.min[1]||r.aabb.max[2]<this.min[2]?0:1}intersectsPlane(r){let c=r[3],f=r[3];for(let y=0;y<3;y++)r[y]>0?(c+=r[y]*this.min[y],f+=r[y]*this.max[y]):(f+=r[y]*this.min[y],c+=r[y]*this.max[y]);return c>=0?2:f<0?0:1}}class ic{distanceToTile2d(r,c,f,y){const b=y.distanceX([r,c]),S=y.distanceY([r,c]);return Math.hypot(b,S)}getWrap(r,c,f){return f}getTileBoundingVolume(r,c,f,y){var b,S;let M=0,N=0;if(y?.terrain){const q=new o.a2(r.z,c,r.z,r.x,r.y),ne=y.terrain.getMinMaxElevation(q);M=(b=ne.minElevation)!==null&&b!==void 0?b:Math.min(0,f),N=(S=ne.maxElevation)!==null&&S!==void 0?S:Math.max(0,f)}const j=1<<r.z;return new Zi([c+r.x/j,r.y/j,M],[c+(r.x+1)/j,(r.y+1)/j,N])}allowVariableZoom(r,c){const f=r.fov*(Math.abs(Math.cos(r.rollInRadians))*r.height+Math.abs(Math.sin(r.rollInRadians))*r.width)/r.height,y=o.ao(78.5-f/2,0,60);return!!c.terrain||r.pitch>y}allowWorldCopies(){return!0}prepareNextFrame(){}}class qs{constructor(r,c,f){this.points=r,this.planes=c,this.aabb=f}static fromInvProjectionMatrix(r,c=1,f=0,y,b){const S=b?[[6,5,4],[0,1,2],[0,3,7],[2,1,5],[3,2,6],[0,4,5]]:[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]],M=Math.pow(2,f),N=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map((ee=>(function(Ae,ve,ke,Oe){const Qe=o.aI([],Ae,ve),Ge=1/Qe[3]/ke*Oe;return o.b7(Qe,Qe,[Ge,Ge,1/Qe[3],Ge])})(ee,r,c,M)));y&&(function(ee,Ae,ve,ke){const Oe=ke?4:0,Qe=ke?0:4;let Ge=0;const ot=[],Ze=[];for(let it=0;it<4;it++){const _t=o.b3([],ee[it+Qe],ee[it+Oe]),Dt=o.b8(_t);o.b0(_t,_t,1/Dt),ot.push(Dt),Ze.push(_t)}for(let it=0;it<4;it++){const _t=o.b9(ee[it+Oe],Ze[it],ve);Ge=_t!==null&&_t>=0?Math.max(Ge,_t):Math.max(Ge,ot[it])}const ct=(function(it,_t){const Dt=o.b3([],it[_t[0]],it[_t[1]]),Pt=o.b3([],it[_t[2]],it[_t[1]]),Rt=[0,0,0,0];return o.b4(Rt,o.b5([],Dt,Pt)),Rt[3]=-o.b6(Rt,it[_t[0]]),Rt})(ee,Ae),dt=(function(it,_t){const Dt=o.ba(it),Pt=o.bb([],it,1/Dt),Rt=o.b3([],_t,o.b0([],Pt,o.b6(_t,Pt))),Qt=o.ba(Rt);if(Qt>0){const nr=Math.sqrt(1-Pt[3]*Pt[3]),Ar=o.b0([],Pt,-Pt[3]),rr=o.b1([],Ar,o.b0([],Rt,nr/Qt));return o.bc(_t,rr)}return null})(ve,ct);if(dt!==null){const it=dt/o.b6(Ze[0],ct);Ge=Math.min(Ge,it)}for(let it=0;it<4;it++){const _t=Math.min(Ge,ot[it]);ee[it+Qe]=[ee[it+Oe][0]+Ze[it][0]*_t,ee[it+Oe][1]+Ze[it][1]*_t,ee[it+Oe][2]+Ze[it][2]*_t,1]}})(N,S[0],y,b);const j=S.map((ee=>{const Ae=o.b3([],N[ee[0]],N[ee[1]]),ve=o.b3([],N[ee[2]],N[ee[1]]),ke=o.b4([],o.b5([],Ae,ve)),Oe=-o.b6(ke,N[ee[1]]);return ke.concat(Oe)})),q=[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY],ne=[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY];for(const ee of N)for(let Ae=0;Ae<3;Ae++)q[Ae]=Math.min(q[Ae],ee[Ae]),ne[Ae]=Math.max(ne[Ae],ee[Ae]);return new qs(N,j,new Zi(q,ne))}}class ul{get pixelsToClipSpaceMatrix(){return this._helper.pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._helper.clipSpaceToPixelsMatrix}get pixelsToGLUnits(){return this._helper.pixelsToGLUnits}get centerOffset(){return this._helper.centerOffset}get size(){return this._helper.size}get rotationMatrix(){return this._helper.rotationMatrix}get centerPoint(){return this._helper.centerPoint}get pixelsPerMeter(){return this._helper.pixelsPerMeter}setMinZoom(r){this._helper.setMinZoom(r)}setMaxZoom(r){this._helper.setMaxZoom(r)}setMinPitch(r){this._helper.setMinPitch(r)}setMaxPitch(r){this._helper.setMaxPitch(r)}setRenderWorldCopies(r){this._helper.setRenderWorldCopies(r)}setBearing(r){this._helper.setBearing(r)}setPitch(r){this._helper.setPitch(r)}setRoll(r){this._helper.setRoll(r)}setFov(r){this._helper.setFov(r)}setZoom(r){this._helper.setZoom(r)}setCenter(r){this._helper.setCenter(r)}setElevation(r){this._helper.setElevation(r)}setMinElevationForCurrentTile(r){this._helper.setMinElevationForCurrentTile(r)}setPadding(r){this._helper.setPadding(r)}interpolatePadding(r,c,f){return this._helper.interpolatePadding(r,c,f)}isPaddingEqual(r){return this._helper.isPaddingEqual(r)}resize(r,c,f=!0){this._helper.resize(r,c,f)}getMaxBounds(){return this._helper.getMaxBounds()}setMaxBounds(r){this._helper.setMaxBounds(r)}setConstrainOverride(r){this._helper.setConstrainOverride(r)}overrideNearFarZ(r,c){this._helper.overrideNearFarZ(r,c)}clearNearFarZOverride(){this._helper.clearNearFarZOverride()}getCameraQueryGeometry(r){return this._helper.getCameraQueryGeometry(this.getCameraPoint(),r)}get tileSize(){return this._helper.tileSize}get tileZoom(){return this._helper.tileZoom}get scale(){return this._helper.scale}get worldSize(){return this._helper.worldSize}get width(){return this._helper.width}get height(){return this._helper.height}get lngRange(){return this._helper.lngRange}get latRange(){return this._helper.latRange}get minZoom(){return this._helper.minZoom}get maxZoom(){return this._helper.maxZoom}get zoom(){return this._helper.zoom}get center(){return this._helper.center}get minPitch(){return this._helper.minPitch}get maxPitch(){return this._helper.maxPitch}get pitch(){return this._helper.pitch}get pitchInRadians(){return this._helper.pitchInRadians}get roll(){return this._helper.roll}get rollInRadians(){return this._helper.rollInRadians}get bearing(){return this._helper.bearing}get bearingInRadians(){return this._helper.bearingInRadians}get fov(){return this._helper.fov}get fovInRadians(){return this._helper.fovInRadians}get elevation(){return this._helper.elevation}get minElevationForCurrentTile(){return this._helper.minElevationForCurrentTile}get padding(){return this._helper.padding}get unmodified(){return this._helper.unmodified}get renderWorldCopies(){return this._helper.renderWorldCopies}get cameraToCenterDistance(){return this._helper.cameraToCenterDistance}get constrainOverride(){return this._helper.constrainOverride}get nearZ(){return this._helper.nearZ}get farZ(){return this._helper.farZ}get autoCalculateNearFarZ(){return this._helper.autoCalculateNearFarZ}setTransitionState(r,c){}constructor(r){this._posMatrixCache=new Map,this._alignedPosMatrixCache=new Map,this._fogMatrixCacheF32=new Map,this.defaultConstrain=(c,f)=>{f=o.ao(+f,this.minZoom,this.maxZoom);const y={center:new o.V(c.lng,c.lat),zoom:f};let b=this._helper._lngRange;if(!this._helper._renderWorldCopies&&b===null){const Ze=179.9999999999;b=[-Ze,Ze]}const S=this.tileSize*o.ar(y.zoom);let M=0,N=S,j=0,q=S,ne=0,ee=0;const{x:Ae,y:ve}=this.size;if(this._helper._latRange){const Ze=this._helper._latRange;M=o.X(Ze[1])*S,N=o.X(Ze[0])*S,N-M<ve&&(ne=ve/(N-M))}b&&(j=o.W(o.Y(b[0])*S,0,S),q=o.W(o.Y(b[1])*S,0,S),q<j&&(q+=S),q-j<Ae&&(ee=Ae/(q-j)));const{x:ke,y:Oe}=Jt(S,c);let Qe,Ge;const ot=Math.max(ee||0,ne||0);if(ot){const Ze=new o.P(ee?(q+j)/2:ke,ne?(N+M)/2:Oe);return y.center=fr(S,Ze).wrap(),y.zoom+=o.au(ot),y}if(this._helper._latRange){const Ze=ve/2;Oe-Ze<M&&(Ge=M+Ze),Oe+Ze>N&&(Ge=N-Ze)}if(b){const Ze=(j+q)/2;let ct=ke;this._helper._renderWorldCopies&&(ct=o.W(ke,Ze-S/2,Ze+S/2));const dt=Ae/2;ct-dt<j&&(Qe=j+dt),ct+dt>q&&(Qe=q-dt)}if(Qe!==void 0||Ge!==void 0){const Ze=new o.P(Qe??ke,Ge??Oe);y.center=fr(S,Ze).wrap()}return y},this.applyConstrain=(c,f)=>this._helper.applyConstrain(c,f),this._helper=new Aa({calcMatrices:()=>{this._calcMatrices()},defaultConstrain:(c,f)=>this.defaultConstrain(c,f)},r),this._coveringTilesDetailsProvider=new ic}clone(){const r=new ul;return r.apply(this),r}apply(r,c,f){this._helper.apply(r,c,f)}get cameraPosition(){return this._cameraPosition}get projectionMatrix(){return this._projectionMatrix}get modelViewProjectionMatrix(){return this._viewProjMatrix}get inverseProjectionMatrix(){return this._invProjMatrix}get mercatorMatrix(){return this._mercatorMatrix}getVisibleUnwrappedCoordinates(r){const c=[new o.bd(0,r)];if(this._helper._renderWorldCopies){const f=this.screenPointToMercatorCoordinate(new o.P(0,0)),y=this.screenPointToMercatorCoordinate(new o.P(this._helper._width,0)),b=this.screenPointToMercatorCoordinate(new o.P(this._helper._width,this._helper._height)),S=this.screenPointToMercatorCoordinate(new o.P(0,this._helper._height)),M=Math.floor(Math.min(f.x,y.x,b.x,S.x)),N=Math.floor(Math.max(f.x,y.x,b.x,S.x)),j=1;for(let q=M-j;q<=N+j;q++)q!==0&&c.push(new o.bd(q,r))}return c}getCameraFrustum(){return qs.fromInvProjectionMatrix(this._invViewProjMatrix,this.worldSize)}getClippingPlane(){return null}getCoveringTilesDetailsProvider(){return this._coveringTilesDetailsProvider}recalculateZoomAndCenter(r){const c=this.screenPointToLocation(this.centerPoint,r),f=r?r.getElevationForLngLatZoom(c,this._helper._tileZoom):0;this._helper.recalculateZoomAndCenter(f)}setLocationAtPoint(r,c){const f=o.at(this.elevation,this.center.lat),y=this.screenPointToMercatorCoordinateAtZ(c,f),b=this.screenPointToMercatorCoordinateAtZ(this.centerPoint,f),S=o.ab.fromLngLat(r),M=new o.ab(S.x-(y.x-b.x),S.y-(y.y-b.y));this.setCenter(M?.toLngLat()),this._helper._renderWorldCopies&&this.setCenter(this.center.wrap())}locationToScreenPoint(r,c){return c?this.coordinatePoint(o.ab.fromLngLat(r),c.getElevationForLngLat(r),this._pixelMatrix3D):this.coordinatePoint(o.ab.fromLngLat(r))}screenPointToLocation(r,c){var f;return(f=this.screenPointToMercatorCoordinate(r,c))===null||f===void 0?void 0:f.toLngLat()}screenPointToMercatorCoordinate(r,c){if(c){const f=c.pointCoordinate(r);if(f!=null)return f}return this.screenPointToMercatorCoordinateAtZ(r)}screenPointToMercatorCoordinateAtZ(r,c){const f=c||0,y=[r.x,r.y,0,1],b=[r.x,r.y,1,1];o.aI(y,y,this._pixelMatrixInverse),o.aI(b,b,this._pixelMatrixInverse);const S=y[3],M=b[3],N=y[1]/S,j=b[1]/M,q=y[2]/S,ne=b[2]/M,ee=q===ne?0:(f-q)/(ne-q);return new o.ab(o.G.number(y[0]/S,b[0]/M,ee)/this.worldSize,o.G.number(N,j,ee)/this.worldSize,f)}coordinatePoint(r,c=0,f=this._pixelMatrix){const y=[r.x*this.worldSize,r.y*this.worldSize,c,1];return o.aI(y,y,f),new o.P(y[0]/y[3],y[1]/y[3])}getBounds(){const r=Math.max(0,this._helper._height/2-rn(this));return new Ur().extend(this.screenPointToLocation(new o.P(0,r))).extend(this.screenPointToLocation(new o.P(this._helper._width,r))).extend(this.screenPointToLocation(new o.P(this._helper._width,this._helper._height))).extend(this.screenPointToLocation(new o.P(0,this._helper._height)))}isPointOnMapSurface(r,c){return c?c.pointCoordinate(r)!=null:r.y>this.height/2-rn(this)}calculatePosMatrix(r,c=!1,f){var y;const b=(y=r.key)!==null&&y!==void 0?y:o.be(r.wrap,r.canonical.z,r.canonical.z,r.canonical.x,r.canonical.y),S=c?this._alignedPosMatrixCache:this._posMatrixCache;if(S.has(b)){const j=S.get(b);return f?j.f32:j.f64}const M=Tr(r,this.worldSize);o.S(M,c?this._alignedProjMatrix:this._viewProjMatrix,M);const N={f64:M,f32:new Float32Array(M)};return S.set(b,N),f?N.f32:N.f64}calculateFogMatrix(r){const c=r.key,f=this._fogMatrixCacheF32;if(f.has(c))return f.get(c);const y=Tr(r,this.worldSize);return o.S(y,this._fogMatrix,y),f.set(c,new Float32Array(y)),f.get(c)}calculateCenterFromCameraLngLatAlt(r,c,f,y){return this._helper.calculateCenterFromCameraLngLatAlt(r,c,f,y)}_calculateNearFarZIfNeeded(r,c,f){if(!this._helper.autoCalculateNearFarZ)return;const y=Math.min(this.elevation,this.minElevationForCurrentTile,this.getCameraAltitude()-100),b=r-y*this._helper._pixelPerMeter/Math.cos(c),S=y<0?b:r,M=Math.PI/2+this.pitchInRadians,N=o.aq(this.fov)*(Math.abs(Math.cos(o.aq(this.roll)))*this.height+Math.abs(Math.sin(o.aq(this.roll)))*this.width)/this.height*(.5+f.y/this.height),j=Math.sin(N)*S/Math.sin(o.ao(Math.PI-M-N,.01,Math.PI-.01)),q=rn(this),ne=Math.atan(q/this._helper.cameraToCenterDistance),ee=o.aq(.75),Ae=ne>ee?2*ne*(.5+f.y/(2*q)):ee,ve=Math.sin(Ae)*S/Math.sin(o.ao(Math.PI-M-Ae,.01,Math.PI-.01)),ke=Math.min(j,ve);this._helper._farZ=1.01*(Math.cos(Math.PI/2-c)*ke+S),this._helper._nearZ=this._helper._height/50}_calcMatrices(){if(!this._helper._height)return;const r=this.centerOffset,c=Jt(this.worldSize,this.center),f=c.x,y=c.y;this._helper._pixelPerMeter=o.at(1,this.center.lat)*this.worldSize;const b=o.aq(Math.min(this.pitch,cr)),S=Math.max(this._helper.cameraToCenterDistance/2,this._helper.cameraToCenterDistance+this._helper._elevation*this._helper._pixelPerMeter/Math.cos(b));let M;this._calculateNearFarZIfNeeded(S,b,r),M=new Float64Array(16),o.bf(M,this.fovInRadians,this._helper._width/this._helper._height,this._helper._nearZ,this._helper._farZ),this._invProjMatrix=new Float64Array(16),o.aC(this._invProjMatrix,M),M[8]=2*-r.x/this._helper._width,M[9]=2*r.y/this._helper._height,this._projectionMatrix=o.bg(M),o.Q(M,M,[1,-1,1]),o.O(M,M,[0,0,-this._helper.cameraToCenterDistance]),o.bh(M,M,-this.rollInRadians),o.bi(M,M,this.pitchInRadians),o.bh(M,M,-this.bearingInRadians),o.O(M,M,[-f,-y,0]),this._mercatorMatrix=o.Q([],M,[this.worldSize,this.worldSize,this.worldSize]),o.Q(M,M,[1,1,this._helper._pixelPerMeter]),this._pixelMatrix=o.S(new Float64Array(16),this.clipSpaceToPixelsMatrix,M),o.O(M,M,[0,0,-this.elevation]),this._viewProjMatrix=M,this._invViewProjMatrix=o.aC([],M);const N=[0,0,-1,1];o.aI(N,N,this._invViewProjMatrix),this._cameraPosition=[N[0]/N[3],N[1]/N[3],N[2]/N[3]],this._fogMatrix=new Float64Array(16),o.bf(this._fogMatrix,this.fovInRadians,this.width/this.height,S,this._helper._farZ),this._fogMatrix[8]=2*-r.x/this.width,this._fogMatrix[9]=2*r.y/this.height,o.Q(this._fogMatrix,this._fogMatrix,[1,-1,1]),o.O(this._fogMatrix,this._fogMatrix,[0,0,-this.cameraToCenterDistance]),o.bh(this._fogMatrix,this._fogMatrix,-this.rollInRadians),o.bi(this._fogMatrix,this._fogMatrix,this.pitchInRadians),o.bh(this._fogMatrix,this._fogMatrix,-this.bearingInRadians),o.O(this._fogMatrix,this._fogMatrix,[-f,-y,0]),o.Q(this._fogMatrix,this._fogMatrix,[1,1,this._helper._pixelPerMeter]),o.O(this._fogMatrix,this._fogMatrix,[0,0,-this.elevation]),this._pixelMatrix3D=o.S(new Float64Array(16),this.clipSpaceToPixelsMatrix,M);const j=this._helper._width%2/2,q=this._helper._height%2/2,ne=Math.cos(this.bearingInRadians),ee=Math.sin(-this.bearingInRadians),Ae=f-Math.round(f)+ne*j+ee*q,ve=y-Math.round(y)+ne*q+ee*j,ke=new Float64Array(M);if(o.O(ke,ke,[Ae>.5?Ae-1:Ae,ve>.5?ve-1:ve,0]),this._alignedProjMatrix=ke,M=o.aC(new Float64Array(16),this._pixelMatrix),!M)throw new Error("failed to invert matrix");this._pixelMatrixInverse=M,this._clearMatrixCaches()}_clearMatrixCaches(){this._posMatrixCache.clear(),this._alignedPosMatrixCache.clear(),this._fogMatrixCacheF32.clear()}maxPitchScaleFactor(){if(!this._pixelMatrixInverse)return 1;const r=this.screenPointToMercatorCoordinate(new o.P(0,0)),c=[r.x*this.worldSize,r.y*this.worldSize,0,1];return o.aI(c,c,this._pixelMatrix)[3]/this._helper.cameraToCenterDistance}getCameraPoint(){return this._helper.getCameraPoint()}getCameraAltitude(){return this._helper.getCameraAltitude()}getCameraLngLat(){const r=o.at(1,this.center.lat)*this.worldSize;return mt(this.center,this.elevation,this.pitch,this.bearing,this._helper.cameraToCenterDistance/r).toLngLat()}lngLatToCameraDepth(r,c){const f=o.ab.fromLngLat(r),y=[f.x*this.worldSize,f.y*this.worldSize,c,1];return o.aI(y,y,this._viewProjMatrix),y[2]/y[3]}getProjectionData(r){const{overscaledTileID:c,aligned:f,applyTerrainMatrix:y}=r,b=this._helper.getMercatorTileCoordinates(c),S=c?this.calculatePosMatrix(c,f,!0):null;let M;return M=c&&c.terrainRttPosMatrix32f&&y?c.terrainRttPosMatrix32f:S||o.bj(),{mainMatrix:M,tileMercatorCoords:b,clippingPlane:[0,0,0,0],projectionTransition:0,fallbackMatrix:M}}isLocationOccluded(r){return!1}getPixelScale(){return 1}getCircleRadiusCorrection(){return 1}getPitchedTextCorrection(r,c,f){return 1}transformLightDirection(r){return o.b2(r)}getRayDirectionFromPixel(r){throw new Error("Not implemented.")}projectTileCoordinates(r,c,f,y){const b=this.calculatePosMatrix(f);let S;y?(S=[r,c,y(r,c),1],o.aI(S,S,b)):(S=[r,c,0,1],IA(S,S,b));const M=S[3];return{point:new o.P(S[0]/M,S[1]/M),signedDistanceFromCamera:M,isOccluded:!1}}populateCache(r){for(const c of r)this.calculatePosMatrix(c)}getMatrixForModel(r,c){const f=o.ab.fromLngLat(r,c),y=f.meterInMercatorCoordinateUnits(),b=o.bk();return o.O(b,b,[f.x,f.y,f.z]),o.bh(b,b,Math.PI),o.bi(b,b,Math.PI/2),o.Q(b,b,[-y,y,y]),b}getProjectionDataForCustomLayer(r=!0){const c=new o.a2(0,0,0,0,0),f=this.getProjectionData({overscaledTileID:c,applyGlobeMatrix:r}),y=Tr(c,this.worldSize);o.S(y,this._viewProjMatrix,y),f.tileMercatorCoords=[0,0,1,1];const b=[o.a5,o.a5,this.worldSize/this._helper.pixelsPerMeter],S=o.bl();return o.Q(S,y,b),f.fallbackMatrix=S,f.mainMatrix=S,f}getFastPathSimpleProjectionMatrix(r){return this.calculatePosMatrix(r)}}function jo(){o.w("Map cannot fit within canvas with the given bounds, padding, and/or offset.")}function ua(w){if(w.useSlerp)if(w.k<1){const r=o.bm(w.startEulerAngles.roll,w.startEulerAngles.pitch,w.startEulerAngles.bearing),c=o.bm(w.endEulerAngles.roll,w.endEulerAngles.pitch,w.endEulerAngles.bearing),f=new Float64Array(4);o.bn(f,r,c,w.k);const y=o.bo(f);w.tr.setRoll(y.roll),w.tr.setPitch(y.pitch),w.tr.setBearing(y.bearing)}else w.tr.setRoll(w.endEulerAngles.roll),w.tr.setPitch(w.endEulerAngles.pitch),w.tr.setBearing(w.endEulerAngles.bearing);else w.tr.setRoll(o.G.number(w.startEulerAngles.roll,w.endEulerAngles.roll,w.k)),w.tr.setPitch(o.G.number(w.startEulerAngles.pitch,w.endEulerAngles.pitch,w.k)),w.tr.setBearing(o.G.number(w.startEulerAngles.bearing,w.endEulerAngles.bearing,w.k))}function sc(w,r,c,f,y){const b=y.padding,S=Jt(y.worldSize,c.getNorthWest()),M=Jt(y.worldSize,c.getNorthEast()),N=Jt(y.worldSize,c.getSouthEast()),j=Jt(y.worldSize,c.getSouthWest()),q=o.aq(-f),ne=S.rotate(q),ee=M.rotate(q),Ae=N.rotate(q),ve=j.rotate(q),ke=new o.P(Math.max(ne.x,ee.x,ve.x,Ae.x),Math.max(ne.y,ee.y,ve.y,Ae.y)),Oe=new o.P(Math.min(ne.x,ee.x,ve.x,Ae.x),Math.min(ne.y,ee.y,ve.y,Ae.y)),Qe=ke.sub(Oe),Ge=(y.width-(b.left+b.right+r.left+r.right))/Qe.x,ot=(y.height-(b.top+b.bottom+r.top+r.bottom))/Qe.y;if(ot<0||Ge<0)return void jo();const Ze=Math.min(o.au(y.scale*Math.min(Ge,ot)),w.maxZoom),ct=o.P.convert(w.offset),dt=new o.P((r.left-r.right)/2,(r.top-r.bottom)/2).rotate(o.aq(f)),it=ct.add(dt).mult(y.scale/o.ar(Ze));return{center:fr(y.worldSize,S.add(N).div(2).sub(it)),zoom:Ze,bearing:f}}class ha{get useGlobeControls(){return!1}handlePanInertia(r,c){const f=r.mag(),y=Math.abs(rn(c));return{easingOffset:r.mult(Math.min(.75*y/f,1)),easingCenter:c.center}}handleMapControlsRollPitchBearingZoom(r,c){r.bearingDelta&&c.setBearing(c.bearing+r.bearingDelta),r.pitchDelta&&c.setPitch(c.pitch+r.pitchDelta),r.rollDelta&&c.setRoll(c.roll+r.rollDelta),r.zoomDelta&&c.setZoom(c.zoom+r.zoomDelta)}handleMapControlsPan(r,c,f){r.around.distSqr(c.centerPoint)<.01||c.setLocationAtPoint(f,r.around)}cameraForBoxAndBearing(r,c,f,y,b){return sc(r,c,f,y,b)}handleJumpToCenterZoom(r,c){r.zoom!==(c.zoom!==void 0?+c.zoom:r.zoom)&&r.setZoom(+c.zoom),c.center!==void 0&&r.setCenter(o.V.convert(c.center))}handleEaseTo(r,c){const f=r.zoom,y=r.padding,b={roll:r.roll,pitch:r.pitch,bearing:r.bearing},S={roll:c.roll===void 0?r.roll:c.roll,pitch:c.pitch===void 0?r.pitch:c.pitch,bearing:c.bearing===void 0?r.bearing:c.bearing},M=c.zoom!==void 0,N=!r.isPaddingEqual(c.padding);let j=!1;const q=M?+c.zoom:r.zoom;let ne=r.centerPoint.add(c.offsetAsPoint);const ee=r.screenPointToLocation(ne),{center:Ae,zoom:ve}=r.applyConstrain(o.V.convert(c.center||ee),q??f);Fa(r,Ae);const ke=Jt(r.worldSize,ee),Oe=Jt(r.worldSize,Ae).sub(ke),Qe=o.ar(ve-f);return j=ve!==f,{easeFunc:Ge=>{if(j&&r.setZoom(o.G.number(f,ve,Ge)),o.bp(b,S)||ua({startEulerAngles:b,endEulerAngles:S,tr:r,k:Ge,useSlerp:b.roll!=S.roll}),N&&(r.interpolatePadding(y,c.padding,Ge),ne=r.centerPoint.add(c.offsetAsPoint)),c.around)r.setLocationAtPoint(c.around,c.aroundPoint);else{const ot=o.ar(r.zoom-f),Ze=ve>f?Math.min(2,Qe):Math.max(.5,Qe),ct=Math.pow(Ze,1-Ge),dt=fr(r.worldSize,ke.add(Oe.mult(Ge*ct)).mult(ot));r.setLocationAtPoint(r.renderWorldCopies?dt.wrap():dt,ne)}},isZooming:j,elevationCenter:Ae}}handleFlyTo(r,c){const f=c.zoom!==void 0,y=r.zoom,b=r.applyConstrain(o.V.convert(c.center||c.locationAtOffset),f?+c.zoom:y),S=b.center,M=b.zoom;Fa(r,S);const N=Jt(r.worldSize,c.locationAtOffset),j=Jt(r.worldSize,S).sub(N),q=j.mag(),ne=o.ar(M-y);let ee;if(c.minZoom!==void 0){const Ae=Math.min(+c.minZoom,y,M),ve=r.applyConstrain(S,Ae).zoom;ee=o.ar(ve-y)}return{easeFunc:(Ae,ve,ke,Oe)=>{r.setZoom(Ae===1?M:y+o.au(ve));const Qe=Ae===1?S:fr(r.worldSize,N.add(j.mult(ke)).mult(ve));r.setLocationAtPoint(r.renderWorldCopies?Qe.wrap():Qe,Oe)},scaleOfZoom:ne,targetCenter:S,scaleOfMinZoom:ee,pixelPathLength:q}}}class Nn{constructor(r,c,f){this.blendFunction=r,this.blendColor=c,this.mask=f}}Nn.Replace=[1,0],Nn.disabled=new Nn(Nn.Replace,o.bq.transparent,[!1,!1,!1,!1]),Nn.unblended=new Nn(Nn.Replace,o.bq.transparent,[!0,!0,!0,!0]),Nn.alphaBlended=new Nn([1,771],o.bq.transparent,[!0,!0,!0,!0]);const Vo=2305;class En{constructor(r,c,f){this.enable=r,this.mode=c,this.frontFace=f}}En.disabled=new En(!1,1029,Vo),En.backCCW=new En(!0,1029,Vo),En.frontCCW=new En(!0,1028,Vo);class mn{constructor(r,c,f){this.func=r,this.mask=c,this.range=f}}mn.ReadOnly=!1,mn.ReadWrite=!0,mn.disabled=new mn(519,mn.ReadOnly,[0,1]);const Ia=7680;class bn{constructor(r,c,f,y,b,S){this.test=r,this.ref=c,this.mask=f,this.fail=y,this.depthFail=b,this.pass=S}}bn.disabled=new bn({func:519,mask:0},0,0,Ia,Ia,Ia);const Go=new WeakMap;function Ei(w){var r;if(Go.has(w))return Go.get(w);{const c=(r=w.getParameter(w.VERSION))===null||r===void 0?void 0:r.startsWith("WebGL 2.0");return Go.set(w,c),c}}class ao{get awaitingQuery(){return!!this._readbackQueue}constructor(r){this._readbackWaitFrames=4,this._measureWaitFrames=6,this._texWidth=1,this._texHeight=1,this._measuredError=0,this._updateCount=0,this._lastReadbackFrame=-1e3,this._readbackQueue=null,this._cachedRenderContext=r;const c=r.context,f=c.gl;this._texFormat=f.RGBA,this._texType=f.UNSIGNED_BYTE;const y=new o.aX;y.emplaceBack(-1,-1),y.emplaceBack(2,-1),y.emplaceBack(-1,2);const b=new o.aZ;b.emplaceBack(0,1,2),this._fullscreenTriangle=new ii(c.createVertexBuffer(y,_s.members),c.createIndexBuffer(b),o.aY.simpleSegment(0,0,y.length,b.length)),this._resultBuffer=new Uint8Array(4),c.activeTexture.set(f.TEXTURE1);const S=f.createTexture();f.bindTexture(f.TEXTURE_2D,S),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_WRAP_S,f.CLAMP_TO_EDGE),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_WRAP_T,f.CLAMP_TO_EDGE),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MIN_FILTER,f.NEAREST),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MAG_FILTER,f.NEAREST),f.texImage2D(f.TEXTURE_2D,0,this._texFormat,this._texWidth,this._texHeight,0,this._texFormat,this._texType,null),this._fbo=c.createFramebuffer(this._texWidth,this._texHeight,!1,!1),this._fbo.colorAttachment.set(S),Ei(f)&&(this._pbo=f.createBuffer(),f.bindBuffer(f.PIXEL_PACK_BUFFER,this._pbo),f.bufferData(f.PIXEL_PACK_BUFFER,4,f.STREAM_READ),f.bindBuffer(f.PIXEL_PACK_BUFFER,null))}destroy(){const r=this._cachedRenderContext.context.gl;this._fullscreenTriangle.destroy(),this._fbo.destroy(),r.deleteBuffer(this._pbo),this._fullscreenTriangle=null,this._fbo=null,this._pbo=null,this._resultBuffer=null}updateErrorLoop(r,c){const f=this._updateCount;return this._readbackQueue?f>=this._readbackQueue.frameNumberIssued+this._readbackWaitFrames&&this._tryReadback():f>=this._lastReadbackFrame+this._measureWaitFrames&&this._renderErrorTexture(r,c),this._updateCount++,this._measuredError}_bindFramebuffer(){const r=this._cachedRenderContext.context,c=r.gl;r.activeTexture.set(c.TEXTURE1),c.bindTexture(c.TEXTURE_2D,this._fbo.colorAttachment.get()),r.bindFramebuffer.set(this._fbo.framebuffer)}_renderErrorTexture(r,c){const f=this._cachedRenderContext.context,y=f.gl;if(this._bindFramebuffer(),f.viewport.set([0,0,this._texWidth,this._texHeight]),f.clear({color:o.bq.transparent}),this._cachedRenderContext.useProgram("projectionErrorMeasurement").draw(f,y.TRIANGLES,mn.disabled,bn.disabled,Nn.unblended,En.disabled,((b,S)=>({u_input:b,u_output_expected:S}))(r,c),null,null,"$clipping",this._fullscreenTriangle.vertexBuffer,this._fullscreenTriangle.indexBuffer,this._fullscreenTriangle.segments),this._pbo&&Ei(y)){y.bindBuffer(y.PIXEL_PACK_BUFFER,this._pbo),y.readBuffer(y.COLOR_ATTACHMENT0),y.readPixels(0,0,this._texWidth,this._texHeight,this._texFormat,this._texType,0),y.bindBuffer(y.PIXEL_PACK_BUFFER,null);const b=y.fenceSync(y.SYNC_GPU_COMMANDS_COMPLETE,0);y.flush(),this._readbackQueue={frameNumberIssued:this._updateCount,sync:b}}else this._readbackQueue={frameNumberIssued:this._updateCount,sync:null}}_tryReadback(){const r=this._cachedRenderContext.context.gl;if(this._pbo&&this._readbackQueue&&Ei(r)){const c=r.clientWaitSync(this._readbackQueue.sync,0,0);if(c===r.WAIT_FAILED)return o.w("WebGL2 clientWaitSync failed."),this._readbackQueue=null,void(this._lastReadbackFrame=this._updateCount);if(c===r.TIMEOUT_EXPIRED)return;r.bindBuffer(r.PIXEL_PACK_BUFFER,this._pbo),r.getBufferSubData(r.PIXEL_PACK_BUFFER,0,this._resultBuffer,0,4),r.bindBuffer(r.PIXEL_PACK_BUFFER,null)}else this._bindFramebuffer(),r.readPixels(0,0,this._texWidth,this._texHeight,this._texFormat,this._texType,this._resultBuffer);this._readbackQueue=null,this._measuredError=ao._parseRGBA8float(this._resultBuffer),this._lastReadbackFrame=this._updateCount}static _parseRGBA8float(r){let c=0;return c+=r[0]/256,c+=r[1]/65536,c+=r[2]/16777216,r[3]<127&&(c=-c),c/128}}const da=o.a5/128;function V(w,r){const c=w.granularity!==void 0?Math.max(w.granularity,1):1,f=c+(w.generateBorders?2:0),y=c+(w.extendToNorthPole||w.generateBorders?1:0)+(w.extendToSouthPole||w.generateBorders?1:0),b=f+1,S=y+1,M=w.generateBorders?-1:0,N=w.generateBorders||w.extendToNorthPole?-1:0,j=c+(w.generateBorders?1:0),q=c+(w.generateBorders||w.extendToSouthPole?1:0),ne=b*S,ee=f*y*6,Ae=b*S>65536;if(Ae&&r==="16bit")throw new Error("Granularity is too large and meshes would not fit inside 16 bit vertex indices.");const ve=Ae||r==="32bit",ke=new Int16Array(2*ne);let Oe=0;for(let ot=N;ot<=q;ot++)for(let Ze=M;Ze<=j;Ze++){let ct=Ze/c*o.a5;Ze===-1&&(ct=-da),Ze===c+1&&(ct=o.a5+da);let dt=ot/c*o.a5;ot===-1&&(dt=w.extendToNorthPole?o.bs:-da),ot===c+1&&(dt=w.extendToSouthPole?o.bt:o.a5+da),ke[Oe++]=ct,ke[Oe++]=dt}const Qe=ve?new Uint32Array(ee):new Uint16Array(ee);let Ge=0;for(let ot=0;ot<y;ot++)for(let Ze=0;Ze<f;Ze++){const ct=Ze+1+ot*b,dt=Ze+(ot+1)*b,it=Ze+1+(ot+1)*b;Qe[Ge++]=Ze+ot*b,Qe[Ge++]=dt,Qe[Ge++]=ct,Qe[Ge++]=ct,Qe[Ge++]=dt,Qe[Ge++]=it}return{vertices:ke.buffer.slice(0),indices:Qe.buffer.slice(0),uses32bitIndices:ve}}const ge=new o.aW({fill:new o.bu(128,2),line:new o.bu(512,0),tile:new o.bu(128,32),stencil:new o.bu(128,1),circle:3});class et{constructor(){this._tileMeshCache={},this._errorCorrectionUsable=0,this._errorMeasurementLastValue=0,this._errorCorrectionPreviousValue=0,this._errorMeasurementLastChangeTime=-1e3}get name(){return"vertical-perspective"}get transitionState(){return 1}get useSubdivision(){return!0}get shaderVariantName(){return"globe"}get shaderDefine(){return"#define GLOBE"}get shaderPreludeCode(){return Jn.projectionGlobe}get vertexShaderPreludeCode(){return Jn.projectionMercator.vertexSource}get subdivisionGranularity(){return ge}get useGlobeControls(){return!0}get latitudeErrorCorrectionRadians(){return this._errorCorrectionUsable}destroy(){this._errorMeasurement&&this._errorMeasurement.destroy()}updateGPUdependent(r){this._errorMeasurement||(this._errorMeasurement=new ao(r));const c=o.X(this._errorQueryLatitudeDegrees),f=2*Math.atan(Math.exp(Math.PI-c*Math.PI*2))-.5*Math.PI,y=this._errorMeasurement.updateErrorLoop(c,f),b=z();y!==this._errorMeasurementLastValue&&(this._errorCorrectionPreviousValue=this._errorCorrectionUsable,this._errorMeasurementLastValue=y,this._errorMeasurementLastChangeTime=b);const S=Math.min(Math.max((b-this._errorMeasurementLastChangeTime)/1e3/.5,0),1);this._errorCorrectionUsable=o.bv(this._errorCorrectionPreviousValue,-this._errorMeasurementLastValue,o.bw(S))}_getMeshKey(r){return`${r.granularity.toString(36)}_${r.generateBorders?"b":""}${r.extendToNorthPole?"n":""}${r.extendToSouthPole?"s":""}`}getMeshFromTileID(r,c,f,y,b){const S=(b==="stencil"?ge.stencil:ge.tile).getGranularityForZoomLevel(c.z);return this._getMesh(r,{granularity:S,generateBorders:f,extendToNorthPole:c.y===0&&y,extendToSouthPole:c.y===(1<<c.z)-1&&y})}_getMesh(r,c){const f=this._getMeshKey(c);if(f in this._tileMeshCache)return this._tileMeshCache[f];const y=(function(b,S){const M=V(S,"16bit"),N=o.aX.deserialize({arrayBuffer:M.vertices,length:M.vertices.byteLength/2/2}),j=o.aZ.deserialize({arrayBuffer:M.indices,length:M.indices.byteLength/2/3});return new ii(b.createVertexBuffer(N,_s.members),b.createIndexBuffer(j),o.aY.simpleSegment(0,0,N.length,j.length))})(r,c);return this._tileMeshCache[f]=y,y}recalculate(r){}hasTransition(){const r=z();let c=!1;return c=c||(r-this._errorMeasurementLastChangeTime)/1e3<.7,c=c||this._errorMeasurement&&this._errorMeasurement.awaitingQuery,c}setErrorQueryLatitudeDegrees(r){this._errorQueryLatitudeDegrees=r}}const gt=new o.t({type:new o.D(o.u.projection.type)});class It extends o.E{constructor(r){super(),this._transitionable=new o.x(gt,void 0),this.setProjection(r),this._transitioning=this._transitionable.untransitioned(),this.recalculate(new o.H(0)),this._mercatorProjection=new ws,this._verticalPerspectiveProjection=new et}get transitionState(){const r=this.properties.get("type");if(typeof r=="string"&&r==="mercator")return 0;if(typeof r=="string"&&r==="vertical-perspective")return 1;if(r instanceof o.bx){if(r.from==="vertical-perspective"&&r.to==="mercator")return 1-r.transition;if(r.from==="mercator"&&r.to==="vertical-perspective")return r.transition}return 1}get useGlobeRendering(){return this.transitionState>0}get latitudeErrorCorrectionRadians(){return this._verticalPerspectiveProjection.latitudeErrorCorrectionRadians}get currentProjection(){return this.useGlobeRendering?this._verticalPerspectiveProjection:this._mercatorProjection}get name(){return"globe"}get useSubdivision(){return this.currentProjection.useSubdivision}get shaderVariantName(){return this.currentProjection.shaderVariantName}get shaderDefine(){return this.currentProjection.shaderDefine}get shaderPreludeCode(){return this.currentProjection.shaderPreludeCode}get vertexShaderPreludeCode(){return this.currentProjection.vertexShaderPreludeCode}get subdivisionGranularity(){return this.currentProjection.subdivisionGranularity}get useGlobeControls(){return this.transitionState>0}destroy(){this._mercatorProjection.destroy(),this._verticalPerspectiveProjection.destroy()}updateGPUdependent(r){this._mercatorProjection.updateGPUdependent(r),this._verticalPerspectiveProjection.updateGPUdependent(r)}getMeshFromTileID(r,c,f,y,b){return this.currentProjection.getMeshFromTileID(r,c,f,y,b)}setProjection(r){this._transitionable.setValue("type",r?.type||"mercator")}updateTransitions(r){this._transitioning=this._transitionable.transitioned(r,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()||this.currentProjection.hasTransition()}recalculate(r){this.properties=this._transitioning.possiblyEvaluate(r)}setErrorQueryLatitudeDegrees(r){this._verticalPerspectiveProjection.setErrorQueryLatitudeDegrees(r),this._mercatorProjection.setErrorQueryLatitudeDegrees(r)}}function Gt(w){const r=Vr(w.worldSize,w.center.lat);return 2*Math.PI*r}function sr(w,r,c,f,y){const b=1/(1<<y),S=r/o.a5*b+f*b,M=o.bz((w/o.a5*b+c*b)*Math.PI*2+Math.PI,2*Math.PI),N=2*Math.atan(Math.exp(Math.PI-S*Math.PI*2))-.5*Math.PI,j=Math.cos(N),q=new Float64Array(3);return q[0]=Math.sin(M)*j,q[1]=Math.sin(N),q[2]=Math.cos(M)*j,q}function br(w){return(function(r,c){const f=Math.cos(c),y=new Float64Array(3);return y[0]=Math.sin(r)*f,y[1]=Math.sin(c),y[2]=Math.cos(r)*f,y})(w.lng*Math.PI/180,w.lat*Math.PI/180)}function Vr(w,r){return w/(2*Math.PI)/Math.cos(r*Math.PI/180)}function gn(w){const r=Math.asin(w[1])/Math.PI*180,c=Math.sqrt(w[0]*w[0]+w[2]*w[2]);if(c>1e-6){const f=w[0]/c,y=Math.acos(w[2]/c),b=(f>0?y:-y)/Math.PI*180;return new o.V(o.W(b,-180,180),r)}return new o.V(0,r)}function yn(w){return Math.cos(w*Math.PI/180)}function An(w,r){const c=yn(w),f=yn(r);return o.au(f/c)}function ji(w,r){const c=w.rotate(r.bearingInRadians),f=r.zoom+An(r.center.lat,0),y=o.bv(1/yn(r.center.lat),1/yn(Math.min(Math.abs(r.center.lat),60)),o.by(f,7,3,0,1)),b=360/Gt({worldSize:r.worldSize,center:{lat:r.center.lat}});return new o.V(r.center.lng-c.x*b*y,o.ao(r.center.lat+c.y*b,-o.ap,o.ap))}function is(w){const r=.5*w,c=Math.sin(r),f=Math.cos(r);return Math.log(c+f)-Math.log(f-c)}function Si(w,r,c,f){const y=w.lat+c*f;if(Math.abs(c)>1){const b=(Math.sign(w.lat+c)!==Math.sign(w.lat)?-Math.abs(w.lat):Math.abs(w.lat))*Math.PI/180,S=Math.abs(w.lat+c)*Math.PI/180,M=is(b+f*(S-b)),N=is(b),j=is(S);return new o.V(w.lng+r*((M-N)/(j-N)),y)}return new o.V(w.lng+r*f,y)}class Ds{constructor(r){this._cachePrevious=new Map,this._cache=new Map,this._hadAnyChanges=!1,this._boundingVolumeFactory=r}swapBuffers(){if(!this._hadAnyChanges)return;const r=this._cachePrevious;this._cachePrevious=this._cache,this._cache=r,this._cache.clear(),this._hadAnyChanges=!1}getTileBoundingVolume(r,c,f,y){const b=`${r.z}_${r.x}_${r.y}_${y?.terrain?"t":""}`,S=this._cache.get(b);if(S)return S;const M=this._cachePrevious.get(b);if(M)return this._cache.set(b,M),M;const N=this._boundingVolumeFactory(r,c,f,y);return this._cache.set(b,N),this._hadAnyChanges=!0,N}}class Mi{constructor(r,c,f,y){this.min=f,this.max=y,this.points=r,this.planes=c}static fromAabb(r,c){const f=[];for(let y=0;y<8;y++)f.push([1&~y?r[0]:c[0],(y>>1&1)==1?c[1]:r[1],(y>>2&1)==1?c[2]:r[2]]);return new Mi(f,[[-1,0,0,c[0]],[1,0,0,-r[0]],[0,-1,0,c[1]],[0,1,0,-r[1]],[0,0,-1,c[2]],[0,0,1,-r[2]]],r,c)}static fromCenterSizeAngles(r,c,f){const y=o.bC([],f[0],f[1],f[2]),b=o.bD([],[c[0],0,0],y),S=o.bD([],[0,c[1],0],y),M=o.bD([],[0,0,c[2]],y),N=[...r],j=[...r];for(let ne=0;ne<8;ne++)for(let ee=0;ee<3;ee++){const Ae=r[ee]+b[ee]*(1&~ne?-1:1)+S[ee]*((ne>>1&1)==1?1:-1)+M[ee]*((ne>>2&1)==1?1:-1);N[ee]=Math.min(N[ee],Ae),j[ee]=Math.max(j[ee],Ae)}const q=[];for(let ne=0;ne<8;ne++){const ee=[...r];o.b1(ee,ee,o.b0([],b,1&~ne?-1:1)),o.b1(ee,ee,o.b0([],S,(ne>>1&1)==1?1:-1)),o.b1(ee,ee,o.b0([],M,(ne>>2&1)==1?1:-1)),q.push(ee)}return new Mi(q,[[...b,-o.b6(b,q[0])],[...S,-o.b6(S,q[0])],[...M,-o.b6(M,q[0])],[-b[0],-b[1],-b[2],-o.b6(b,q[7])],[-S[0],-S[1],-S[2],-o.b6(S,q[7])],[-M[0],-M[1],-M[2],-o.b6(M,q[7])]],N,j)}intersectsFrustum(r){let c=!0;const f=this.points.length,y=this.planes.length,b=r.planes.length,S=r.points.length;for(let M=0;M<b;M++){const N=r.planes[M];let j=0;for(let q=0;q<f;q++){const ne=this.points[q];N[0]*ne[0]+N[1]*ne[1]+N[2]*ne[2]+N[3]>=0&&j++}if(j===0)return 0;j<f&&(c=!1)}if(c)return 2;for(let M=0;M<y;M++){const N=this.planes[M];let j=0;for(let q=0;q<S;q++){const ne=r.points[q];N[0]*ne[0]+N[1]*ne[1]+N[2]*ne[2]+N[3]>=0&&j++}if(j===0)return 0}return 1}intersectsPlane(r){const c=this.points.length;let f=0;for(let y=0;y<c;y++){const b=this.points[y];r[0]*b[0]+r[1]*b[1]+r[2]*b[2]+r[3]>=0&&f++}return f===c?2:f===0?0:1}}function xs(w,r,c){const f=w-r;return f<0?-f:Math.max(0,f-c)}function Ko(w,r,c,f,y){const b=w-c;let S;return S=b<0?Math.min(-b,1+b-y):b>1?Math.min(Math.max(b-y,0),1-b):0,Math.max(S,xs(r,f,y))}class fa{constructor(){this._boundingVolumeCache=new Ds(this._computeTileBoundingVolume)}prepareNextFrame(){this._boundingVolumeCache.swapBuffers()}distanceToTile2d(r,c,f,y){const b=1<<f.z,S=1/b,M=f.x/b,N=f.y/b;let j=2;return j=Math.min(j,Ko(r,c,M,N,S)),j=Math.min(j,Ko(r,c,M+.5,-N-S,S)),j=Math.min(j,Ko(r,c,M+.5,2-N-S,S)),j}getWrap(r,c,f){const y=1<<c.z,b=1/y,S=c.x/y,M=xs(r.x,S,b),N=xs(r.x,S-1,b),j=xs(r.x,S+1,b),q=Math.min(M,N,j);return q===j?1:q===N?-1:0}allowVariableZoom(r,c){return wr(r,c)>4}allowWorldCopies(){return!1}getTileBoundingVolume(r,c,f,y){return this._boundingVolumeCache.getTileBoundingVolume(r,c,f,y)}_computeTileBoundingVolume(r,c,f,y){var b,S;let M=0,N=0;if(y?.terrain){const j=new o.a2(r.z,c,r.z,r.x,r.y),q=y.terrain.getMinMaxElevation(j);M=(b=q.minElevation)!==null&&b!==void 0?b:Math.min(0,f),N=(S=q.maxElevation)!==null&&S!==void 0?S:Math.max(0,f)}if(M/=o.bF,N/=o.bF,M+=1,N+=1,r.z<=0)return Mi.fromAabb([-N,-N,-N],[N,N,N]);if(r.z===1)return Mi.fromAabb([r.x===0?-N:0,r.y===0?0:-N,-N],[r.x===0?0:N,r.y===0?N:0,N]);{const j=[sr(0,0,r.x,r.y,r.z),sr(o.a5,0,r.x,r.y,r.z),sr(o.a5,o.a5,r.x,r.y,r.z),sr(0,o.a5,r.x,r.y,r.z)],q=[];for(const Rt of j)q.push(o.b0([],Rt,N));if(N!==M)for(const Rt of j)q.push(o.b0([],Rt,M));r.y===0&&q.push([0,1,0]),r.y===(1<<r.z)-1&&q.push([0,-1,0]);const ne=[1,1,1],ee=[-1,-1,-1];for(const Rt of q)for(let Qt=0;Qt<3;Qt++)ne[Qt]=Math.min(ne[Qt],Rt[Qt]),ee[Qt]=Math.max(ee[Qt],Rt[Qt]);const Ae=sr(o.a5/2,o.a5/2,r.x,r.y,r.z),ve=o.b5([],[0,1,0],Ae);o.b4(ve,ve);const ke=o.b5([],Ae,ve);o.b4(ke,ke);const Oe=o.b5([],j[2],j[1]);o.b4(Oe,Oe);const Qe=o.b5([],j[0],j[3]);o.b4(Qe,Qe),q.push(o.b0([],Ae,N)),r.y>=(1<<r.z)/2&&q.push(o.b0([],sr(o.a5/2,0,r.x,r.y,r.z),N)),r.y<(1<<r.z)/2&&q.push(o.b0([],sr(o.a5/2,o.a5,r.x,r.y,r.z),N));const Ge=pa(Ae,q),ot=pa(ke,q),Ze=[-Ae[0],-Ae[1],-Ae[2],Ge.max],ct=[Ae[0],Ae[1],Ae[2],-Ge.min],dt=[-ke[0],-ke[1],-ke[2],ot.max],it=[ke[0],ke[1],ke[2],-ot.min],_t=[...Oe,0],Dt=[...Qe,0],Pt=[];return r.y===0?Pt.push(o.bE(Dt,_t,Ze),o.bE(Dt,_t,ct)):Pt.push(o.bE(dt,_t,Ze),o.bE(dt,_t,ct),o.bE(dt,Dt,Ze),o.bE(dt,Dt,ct)),r.y===(1<<r.z)-1?Pt.push(o.bE(Dt,_t,Ze),o.bE(Dt,_t,ct)):Pt.push(o.bE(it,_t,Ze),o.bE(it,_t,ct),o.bE(it,Dt,Ze),o.bE(it,Dt,ct)),new Mi(Pt,[Ze,ct,dt,it,_t,Dt],ne,ee)}}}function pa(w,r){let c=1/0,f=-1/0;for(const y of r){const b=o.b6(w,y);c=Math.min(c,b),f=Math.max(f,b)}return{min:c,max:f}}class Ta{get pixelsToClipSpaceMatrix(){return this._helper.pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._helper.clipSpaceToPixelsMatrix}get pixelsToGLUnits(){return this._helper.pixelsToGLUnits}get centerOffset(){return this._helper.centerOffset}get size(){return this._helper.size}get rotationMatrix(){return this._helper.rotationMatrix}get centerPoint(){return this._helper.centerPoint}get pixelsPerMeter(){return this._helper.pixelsPerMeter}setMinZoom(r){this._helper.setMinZoom(r)}setMaxZoom(r){this._helper.setMaxZoom(r)}setMinPitch(r){this._helper.setMinPitch(r)}setMaxPitch(r){this._helper.setMaxPitch(r)}setRenderWorldCopies(r){this._helper.setRenderWorldCopies(r)}setBearing(r){this._helper.setBearing(r)}setPitch(r){this._helper.setPitch(r)}setRoll(r){this._helper.setRoll(r)}setFov(r){this._helper.setFov(r)}setZoom(r){this._helper.setZoom(r)}setCenter(r){this._helper.setCenter(r)}setElevation(r){this._helper.setElevation(r)}setMinElevationForCurrentTile(r){this._helper.setMinElevationForCurrentTile(r)}setPadding(r){this._helper.setPadding(r)}interpolatePadding(r,c,f){return this._helper.interpolatePadding(r,c,f)}isPaddingEqual(r){return this._helper.isPaddingEqual(r)}resize(r,c){this._helper.resize(r,c)}getMaxBounds(){return this._helper.getMaxBounds()}setMaxBounds(r){this._helper.setMaxBounds(r)}setConstrainOverride(r){this._helper.setConstrainOverride(r)}overrideNearFarZ(r,c){this._helper.overrideNearFarZ(r,c)}clearNearFarZOverride(){this._helper.clearNearFarZOverride()}getCameraQueryGeometry(r){return this._helper.getCameraQueryGeometry(this.getCameraPoint(),r)}get tileSize(){return this._helper.tileSize}get tileZoom(){return this._helper.tileZoom}get scale(){return this._helper.scale}get worldSize(){return this._helper.worldSize}get width(){return this._helper.width}get height(){return this._helper.height}get lngRange(){return this._helper.lngRange}get latRange(){return this._helper.latRange}get minZoom(){return this._helper.minZoom}get maxZoom(){return this._helper.maxZoom}get zoom(){return this._helper.zoom}get center(){return this._helper.center}get minPitch(){return this._helper.minPitch}get maxPitch(){return this._helper.maxPitch}get pitch(){return this._helper.pitch}get pitchInRadians(){return this._helper.pitchInRadians}get roll(){return this._helper.roll}get rollInRadians(){return this._helper.rollInRadians}get bearing(){return this._helper.bearing}get bearingInRadians(){return this._helper.bearingInRadians}get fov(){return this._helper.fov}get fovInRadians(){return this._helper.fovInRadians}get elevation(){return this._helper.elevation}get minElevationForCurrentTile(){return this._helper.minElevationForCurrentTile}get padding(){return this._helper.padding}get unmodified(){return this._helper.unmodified}get renderWorldCopies(){return this._helper.renderWorldCopies}get constrainOverride(){return this._helper.constrainOverride}get nearZ(){return this._helper.nearZ}get farZ(){return this._helper.farZ}get autoCalculateNearFarZ(){return this._helper.autoCalculateNearFarZ}setTransitionState(r){}constructor(r){this._cachedClippingPlane=o.bG(),this._projectionMatrix=o.bk(),this._globeViewProjMatrix32f=o.bj(),this._globeViewProjMatrixNoCorrection=o.bk(),this._globeViewProjMatrixNoCorrectionInverted=o.bk(),this._globeProjMatrixInverted=o.bk(),this._cameraPosition=o.bA(),this._globeLatitudeErrorCorrectionRadians=0,this.defaultConstrain=(c,f)=>{const y=o.ao(c.lat,-o.ap,o.ap),b=o.ao(+f,this.minZoom+An(0,y),this.maxZoom);return{center:new o.V(c.lng,y),zoom:b}},this.applyConstrain=(c,f)=>this._helper.applyConstrain(c,f),this._helper=new Aa({calcMatrices:()=>{this._calcMatrices()},defaultConstrain:(c,f)=>this.defaultConstrain(c,f)},r),this._coveringTilesDetailsProvider=new fa}clone(){const r=new Ta;return r.apply(this),r}apply(r,c){this._globeLatitudeErrorCorrectionRadians=c||0,this._helper.apply(r)}get projectionMatrix(){return this._projectionMatrix}get modelViewProjectionMatrix(){return this._globeViewProjMatrixNoCorrection}get inverseProjectionMatrix(){return this._globeProjMatrixInverted}get cameraPosition(){const r=o.bA();return r[0]=this._cameraPosition[0],r[1]=this._cameraPosition[1],r[2]=this._cameraPosition[2],r}get cameraToCenterDistance(){return this._helper.cameraToCenterDistance}getProjectionData(r){const{overscaledTileID:c,applyGlobeMatrix:f}=r,y=this._helper.getMercatorTileCoordinates(c);return{mainMatrix:this._globeViewProjMatrix32f,tileMercatorCoords:y,clippingPlane:this._cachedClippingPlane,projectionTransition:f?1:0,fallbackMatrix:this._globeViewProjMatrix32f}}_computeClippingPlane(r){const c=this.pitchInRadians,f=this.cameraToCenterDistance/r,y=Math.sin(c)*f,b=Math.cos(c)*f+1,S=1/Math.sqrt(y*y+b*b)*1;let M=-y,N=b;const j=Math.sqrt(M*M+N*N);M/=j,N/=j;const q=[0,M,N];o.bH(q,q,[0,0,0],-this.bearingInRadians),o.bI(q,q,[0,0,0],-1*this.center.lat*Math.PI/180),o.bJ(q,q,[0,0,0],this.center.lng*Math.PI/180);const ne=1/o.b8(q);return o.b0(q,q,ne),[...q,-S*ne]}isLocationOccluded(r){return!this.isSurfacePointVisible(br(r))}transformLightDirection(r){const c=this._helper._center.lng*Math.PI/180,f=this._helper._center.lat*Math.PI/180,y=Math.cos(f),b=[Math.sin(c)*y,Math.sin(f),Math.cos(c)*y],S=[b[2],0,-b[0]],M=[0,0,0];o.b5(M,S,b),o.b4(S,S),o.b4(M,M);const N=[0,0,0];return o.b4(N,[S[0]*r[0]+M[0]*r[1]+b[0]*r[2],S[1]*r[0]+M[1]*r[1]+b[1]*r[2],S[2]*r[0]+M[2]*r[1]+b[2]*r[2]]),N}getPixelScale(){return 1/Math.cos(this._helper._center.lat*Math.PI/180)}getCircleRadiusCorrection(){return Math.cos(this._helper._center.lat*Math.PI/180)}getPitchedTextCorrection(r,c,f){const y=(function(M,N,j){const q=1/(1<<j.z);return new o.ab(M/o.a5*q+j.x*q,N/o.a5*q+j.y*q)})(r,c,f.canonical),b=(S=y.y,[o.bz(y.x*Math.PI*2+Math.PI,2*Math.PI),2*Math.atan(Math.exp(Math.PI-S*Math.PI*2))-.5*Math.PI]);var S;return this.getCircleRadiusCorrection()/Math.cos(b[1])}projectTileCoordinates(r,c,f,y){const b=f.canonical,S=sr(r,c,b.x,b.y,b.z),M=1+(y?y(r,c):0)/o.bF,N=[S[0]*M,S[1]*M,S[2]*M,1];o.aI(N,N,this._globeViewProjMatrixNoCorrection);const j=this._cachedClippingPlane,q=j[0]*S[0]+j[1]*S[1]+j[2]*S[2]+j[3]<0;return{point:new o.P(N[0]/N[3],N[1]/N[3]),signedDistanceFromCamera:N[3],isOccluded:q}}_calcMatrices(){if(!this._helper._width||!this._helper._height)return;const r=Vr(this.worldSize,this.center.lat),c=o.bl(),f=o.bl();this._helper.autoCalculateNearFarZ&&(this._helper._nearZ=.5,this._helper._farZ=this.cameraToCenterDistance+2*r),o.bf(c,this.fovInRadians,this.width/this.height,this._helper._nearZ,this._helper._farZ);const y=this.centerOffset;c[8]=2*-y.x/this._helper._width,c[9]=2*y.y/this._helper._height,this._projectionMatrix=o.bg(c),this._globeProjMatrixInverted=o.bl(),o.aC(this._globeProjMatrixInverted,c),o.O(c,c,[0,0,-this.cameraToCenterDistance]),o.bh(c,c,this.rollInRadians),o.bi(c,c,-this.pitchInRadians),o.bh(c,c,this.bearingInRadians),o.O(c,c,[0,0,-r]);const b=o.bA();b[0]=r,b[1]=r,b[2]=r,o.bi(f,c,this.center.lat*Math.PI/180),o.bK(f,f,-this.center.lng*Math.PI/180),o.Q(f,f,b),this._globeViewProjMatrixNoCorrection=f,o.bi(c,c,this.center.lat*Math.PI/180-this._globeLatitudeErrorCorrectionRadians),o.bK(c,c,-this.center.lng*Math.PI/180),o.Q(c,c,b),this._globeViewProjMatrix32f=new Float32Array(c),this._globeViewProjMatrixNoCorrectionInverted=o.bl(),o.aC(this._globeViewProjMatrixNoCorrectionInverted,f);const S=o.bA();this._cameraPosition=o.bA(),this._cameraPosition[2]=this.cameraToCenterDistance/r,o.bH(this._cameraPosition,this._cameraPosition,S,-this.rollInRadians),o.bI(this._cameraPosition,this._cameraPosition,S,this.pitchInRadians),o.bH(this._cameraPosition,this._cameraPosition,S,-this.bearingInRadians),o.b1(this._cameraPosition,this._cameraPosition,[0,0,1]),o.bI(this._cameraPosition,this._cameraPosition,S,-this.center.lat*Math.PI/180),o.bJ(this._cameraPosition,this._cameraPosition,S,this.center.lng*Math.PI/180),this._cachedClippingPlane=this._computeClippingPlane(r);const M=o.bg(this._globeViewProjMatrixNoCorrectionInverted);o.Q(M,M,[1,1,-1]),this._cachedFrustum=qs.fromInvProjectionMatrix(M,1,0,this._cachedClippingPlane,!0)}calculateFogMatrix(r){o.w("calculateFogMatrix is not supported on globe projection.");const c=o.bl();return o.as(c),c}getVisibleUnwrappedCoordinates(r){return[new o.bd(0,r)]}getCameraFrustum(){return this._cachedFrustum}getClippingPlane(){return this._cachedClippingPlane}getCoveringTilesDetailsProvider(){return this._coveringTilesDetailsProvider}recalculateZoomAndCenter(r){r&&o.w("terrain is not fully supported on vertical perspective projection."),this._helper.recalculateZoomAndCenter(0)}maxPitchScaleFactor(){return 1}getCameraPoint(){return this._helper.getCameraPoint()}getCameraAltitude(){return this._helper.getCameraAltitude()}getCameraLngLat(){return this._helper.getCameraLngLat()}lngLatToCameraDepth(r,c){if(!this._globeViewProjMatrixNoCorrection)return 1;const f=br(r);o.b0(f,f,1+c/o.bF);const y=o.bG();return o.aI(y,[f[0],f[1],f[2],1],this._globeViewProjMatrixNoCorrection),y[2]/y[3]}populateCache(r){}getBounds(){const r=.5*this.width,c=.5*this.height,f=[new o.P(0,0),new o.P(r,0),new o.P(this.width,0),new o.P(this.width,c),new o.P(this.width,this.height),new o.P(r,this.height),new o.P(0,this.height),new o.P(0,c)],y=[];for(const ne of f)y.push(this.unprojectScreenPoint(ne));let b=0,S=0,M=0,N=0;const j=this.center;for(const ne of y){const ee=o.bL(j.lng,ne.lng),Ae=o.bL(j.lat,ne.lat);ee<S&&(S=ee),ee>b&&(b=ee),Ae<N&&(N=Ae),Ae>M&&(M=Ae)}const q=[j.lng+S,j.lat+N,j.lng+b,j.lat+M];return this.isSurfacePointOnScreen([0,1,0])&&(q[3]=90,q[0]=-180,q[2]=180),this.isSurfacePointOnScreen([0,-1,0])&&(q[1]=-90,q[0]=-180,q[2]=180),new Ur(q)}calculateCenterFromCameraLngLatAlt(r,c,f,y){return this._helper.calculateCenterFromCameraLngLatAlt(r,c,f,y)}setLocationAtPoint(r,c){const f=br(this.unprojectScreenPoint(c)),y=br(r),b=o.bA();o.bM(b);const S=o.bA();o.bJ(S,f,b,-this.center.lng*Math.PI/180),o.bI(S,S,b,this.center.lat*Math.PI/180);const M=y[0]*y[0]+y[2]*y[2],N=S[0]*S[0];if(M<N)return;const j=Math.sqrt(M-N),q=-j,ne=o.bN(y[0],y[2],S[0],j),ee=o.bN(y[0],y[2],S[0],q),Ae=o.bA();o.bJ(Ae,y,b,-ne);const ve=o.bN(Ae[1],Ae[2],S[1],S[2]),ke=o.bA();o.bJ(ke,y,b,-ee);const Oe=o.bN(ke[1],ke[2],S[1],S[2]),Qe=.5*Math.PI,Ge=ve>=-Qe&&ve<=Qe,ot=Oe>=-Qe&&Oe<=Qe;let Ze,ct;if(Ge&&ot){const Dt=this.center.lng*Math.PI/180,Pt=this.center.lat*Math.PI/180;o.bO(ne,Dt)+o.bO(ve,Pt)<o.bO(ee,Dt)+o.bO(Oe,Pt)?(Ze=ne,ct=ve):(Ze=ee,ct=Oe)}else if(Ge)Ze=ne,ct=ve;else{if(!ot)return;Ze=ee,ct=Oe}const dt=Ze/Math.PI*180,it=ct/Math.PI*180,_t=this.center.lat;this.setCenter(new o.V(dt,o.ao(it,-90,90))),this.setZoom(this.zoom+An(_t,this.center.lat))}locationToScreenPoint(r,c){const f=br(r);if(c){const y=c.getElevationForLngLatZoom(r,this._helper._tileZoom);o.b0(f,f,1+y/o.bF)}return this._projectSurfacePointToScreen(f)}_projectSurfacePointToScreen(r){const c=o.bG();return o.aI(c,[...r,1],this._globeViewProjMatrixNoCorrection),c[0]/=c[3],c[1]/=c[3],new o.P((.5*c[0]+.5)*this.width,(.5*-c[1]+.5)*this.height)}screenPointToMercatorCoordinate(r,c){if(c){const f=c.pointCoordinate(r);if(f)return f}return o.ab.fromLngLat(this.unprojectScreenPoint(r))}screenPointToLocation(r,c){var f;return(f=this.screenPointToMercatorCoordinate(r,c))===null||f===void 0?void 0:f.toLngLat()}isPointOnMapSurface(r,c){const f=this._cameraPosition,y=this.getRayDirectionFromPixel(r);return!!this.rayPlanetIntersection(f,y)}getRayDirectionFromPixel(r){const c=o.bG();c[0]=r.x/this.width*2-1,c[1]=-1*(r.y/this.height*2-1),c[2]=1,c[3]=1,o.aI(c,c,this._globeViewProjMatrixNoCorrectionInverted),c[0]/=c[3],c[1]/=c[3],c[2]/=c[3];const f=o.bA();f[0]=c[0]-this._cameraPosition[0],f[1]=c[1]-this._cameraPosition[1],f[2]=c[2]-this._cameraPosition[2];const y=o.bA();return o.b4(y,f),y}isSurfacePointVisible(r){const c=this._cachedClippingPlane;return c[0]*r[0]+c[1]*r[1]+c[2]*r[2]+c[3]>=0}isSurfacePointOnScreen(r){if(!this.isSurfacePointVisible(r))return!1;const c=o.bG();return o.aI(c,[...r,1],this._globeViewProjMatrixNoCorrection),c[0]/=c[3],c[1]/=c[3],c[2]/=c[3],c[0]>-1&&c[0]<1&&c[1]>-1&&c[1]<1&&c[2]>-1&&c[2]<1}rayPlanetIntersection(r,c){const f=o.b6(r,c),y=o.bA(),b=o.bA();o.b0(b,c,f),o.b3(y,r,b);const S=1-o.b6(y,y);if(S<0)return null;const M=o.b6(r,r)-1,N=-f+(f<0?1:-1)*Math.sqrt(S),j=M/N,q=N;return{tMin:Math.min(j,q),tMax:Math.max(j,q)}}unprojectScreenPoint(r){const c=this._cameraPosition,f=this.getRayDirectionFromPixel(r),y=this.rayPlanetIntersection(c,f);if(y){const q=o.bA();o.b1(q,c,[f[0]*y.tMin,f[1]*y.tMin,f[2]*y.tMin]);const ne=o.bA();return o.b4(ne,q),gn(ne)}const b=this._cachedClippingPlane,S=b[0]*f[0]+b[1]*f[1]+b[2]*f[2],M=-o.bc(b,c)/S,N=o.bA();if(M>0)o.b1(N,c,[f[0]*M,f[1]*M,f[2]*M]);else{const q=o.bA();o.b1(q,c,[2*f[0],2*f[1],2*f[2]]);const ne=o.bc(this._cachedClippingPlane,q);o.b3(N,q,[this._cachedClippingPlane[0]*ne,this._cachedClippingPlane[1]*ne,this._cachedClippingPlane[2]*ne])}const j=(function(q){const ne=o.bA();return ne[0]=q[0]*-q[3],ne[1]=q[1]*-q[3],ne[2]=q[2]*-q[3],{center:ne,radius:Math.sqrt(1-q[3]*q[3])}})(b);return gn((function(q,ne,ee){const Ae=o.bA();o.b3(Ae,ee,q);const ve=o.bA();return o.bB(ve,q,Ae,ne/o.ba(Ae)),ve})(j.center,j.radius,N))}getMatrixForModel(r,c){const f=o.V.convert(r),y=1/o.bF,b=o.bk();return o.bK(b,b,f.lng/180*Math.PI),o.bi(b,b,-f.lat/180*Math.PI),o.O(b,b,[0,0,1+c/o.bF]),o.bi(b,b,.5*Math.PI),o.Q(b,b,[y,y,y]),b}getProjectionDataForCustomLayer(r=!0){const c=this.getProjectionData({overscaledTileID:new o.a2(0,0,0,0,0),applyGlobeMatrix:r});return c.tileMercatorCoords=[0,0,1,1],c}getFastPathSimpleProjectionMatrix(r){}}class hl{get pixelsToClipSpaceMatrix(){return this._helper.pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._helper.clipSpaceToPixelsMatrix}get pixelsToGLUnits(){return this._helper.pixelsToGLUnits}get centerOffset(){return this._helper.centerOffset}get size(){return this._helper.size}get rotationMatrix(){return this._helper.rotationMatrix}get centerPoint(){return this._helper.centerPoint}get pixelsPerMeter(){return this._helper.pixelsPerMeter}setMinZoom(r){this._helper.setMinZoom(r)}setMaxZoom(r){this._helper.setMaxZoom(r)}setMinPitch(r){this._helper.setMinPitch(r)}setMaxPitch(r){this._helper.setMaxPitch(r)}setRenderWorldCopies(r){this._helper.setRenderWorldCopies(r)}setBearing(r){this._helper.setBearing(r)}setPitch(r){this._helper.setPitch(r)}setRoll(r){this._helper.setRoll(r)}setFov(r){this._helper.setFov(r)}setZoom(r){this._helper.setZoom(r)}setCenter(r){this._helper.setCenter(r)}setElevation(r){this._helper.setElevation(r)}setMinElevationForCurrentTile(r){this._helper.setMinElevationForCurrentTile(r)}setPadding(r){this._helper.setPadding(r)}interpolatePadding(r,c,f){return this._helper.interpolatePadding(r,c,f)}isPaddingEqual(r){return this._helper.isPaddingEqual(r)}resize(r,c,f=!0){this._helper.resize(r,c,f)}getMaxBounds(){return this._helper.getMaxBounds()}setMaxBounds(r){this._helper.setMaxBounds(r)}setConstrainOverride(r){this._helper.setConstrainOverride(r)}overrideNearFarZ(r,c){this._helper.overrideNearFarZ(r,c)}clearNearFarZOverride(){this._helper.clearNearFarZOverride()}getCameraQueryGeometry(r){return this._helper.getCameraQueryGeometry(this.getCameraPoint(),r)}get tileSize(){return this._helper.tileSize}get tileZoom(){return this._helper.tileZoom}get scale(){return this._helper.scale}get worldSize(){return this._helper.worldSize}get width(){return this._helper.width}get height(){return this._helper.height}get lngRange(){return this._helper.lngRange}get latRange(){return this._helper.latRange}get minZoom(){return this._helper.minZoom}get maxZoom(){return this._helper.maxZoom}get zoom(){return this._helper.zoom}get center(){return this._helper.center}get minPitch(){return this._helper.minPitch}get maxPitch(){return this._helper.maxPitch}get pitch(){return this._helper.pitch}get pitchInRadians(){return this._helper.pitchInRadians}get roll(){return this._helper.roll}get rollInRadians(){return this._helper.rollInRadians}get bearing(){return this._helper.bearing}get bearingInRadians(){return this._helper.bearingInRadians}get fov(){return this._helper.fov}get fovInRadians(){return this._helper.fovInRadians}get elevation(){return this._helper.elevation}get minElevationForCurrentTile(){return this._helper.minElevationForCurrentTile}get padding(){return this._helper.padding}get unmodified(){return this._helper.unmodified}get renderWorldCopies(){return this._helper.renderWorldCopies}get cameraToCenterDistance(){return this._helper.cameraToCenterDistance}get constrainOverride(){return this._helper.constrainOverride}get nearZ(){return this._helper.nearZ}get farZ(){return this._helper.farZ}get autoCalculateNearFarZ(){return this._helper.autoCalculateNearFarZ}get isGlobeRendering(){return this._globeness>0}setTransitionState(r,c){this._globeness=r,this._globeLatitudeErrorCorrectionRadians=c,this._calcMatrices(),this._verticalPerspectiveTransform.getCoveringTilesDetailsProvider().prepareNextFrame(),this._mercatorTransform.getCoveringTilesDetailsProvider().prepareNextFrame()}get currentTransform(){return this.isGlobeRendering?this._verticalPerspectiveTransform:this._mercatorTransform}constructor(r){this._globeLatitudeErrorCorrectionRadians=0,this._globeness=1,this.defaultConstrain=(c,f)=>this.currentTransform.defaultConstrain(c,f),this.applyConstrain=(c,f)=>this._helper.applyConstrain(c,f),this._helper=new Aa({calcMatrices:()=>{this._calcMatrices()},defaultConstrain:(c,f)=>this.defaultConstrain(c,f)},r),this._globeness=1,this._mercatorTransform=new ul,this._verticalPerspectiveTransform=new Ta}clone(){const r=new hl;return r._globeness=this._globeness,r._globeLatitudeErrorCorrectionRadians=this._globeLatitudeErrorCorrectionRadians,r.apply(this),r}apply(r){this._helper.apply(r),this._mercatorTransform.apply(this),this._verticalPerspectiveTransform.apply(this,this._globeLatitudeErrorCorrectionRadians)}get projectionMatrix(){return this.currentTransform.projectionMatrix}get modelViewProjectionMatrix(){return this.currentTransform.modelViewProjectionMatrix}get inverseProjectionMatrix(){return this.currentTransform.inverseProjectionMatrix}get cameraPosition(){return this.currentTransform.cameraPosition}getProjectionData(r){const c=this._mercatorTransform.getProjectionData(r),f=this._verticalPerspectiveTransform.getProjectionData(r);return{mainMatrix:this.isGlobeRendering?f.mainMatrix:c.mainMatrix,clippingPlane:f.clippingPlane,tileMercatorCoords:f.tileMercatorCoords,projectionTransition:r.applyGlobeMatrix?this._globeness:0,fallbackMatrix:c.fallbackMatrix}}isLocationOccluded(r){return this.currentTransform.isLocationOccluded(r)}transformLightDirection(r){return this.currentTransform.transformLightDirection(r)}getPixelScale(){return o.bv(this._mercatorTransform.getPixelScale(),this._verticalPerspectiveTransform.getPixelScale(),this._globeness)}getCircleRadiusCorrection(){return o.bv(this._mercatorTransform.getCircleRadiusCorrection(),this._verticalPerspectiveTransform.getCircleRadiusCorrection(),this._globeness)}getPitchedTextCorrection(r,c,f){const y=this._mercatorTransform.getPitchedTextCorrection(r,c,f),b=this._verticalPerspectiveTransform.getPitchedTextCorrection(r,c,f);return o.bv(y,b,this._globeness)}projectTileCoordinates(r,c,f,y){return this.currentTransform.projectTileCoordinates(r,c,f,y)}_calcMatrices(){this._helper._width&&this._helper._height&&(this._verticalPerspectiveTransform.apply(this,this._globeLatitudeErrorCorrectionRadians),this._helper._nearZ=this._verticalPerspectiveTransform.nearZ,this._helper._farZ=this._verticalPerspectiveTransform.farZ,this._mercatorTransform.apply(this,!0,this.isGlobeRendering),this._helper._nearZ=this._mercatorTransform.nearZ,this._helper._farZ=this._mercatorTransform.farZ)}calculateFogMatrix(r){return this.currentTransform.calculateFogMatrix(r)}getVisibleUnwrappedCoordinates(r){return this.currentTransform.getVisibleUnwrappedCoordinates(r)}getCameraFrustum(){return this.currentTransform.getCameraFrustum()}getClippingPlane(){return this.currentTransform.getClippingPlane()}getCoveringTilesDetailsProvider(){return this.currentTransform.getCoveringTilesDetailsProvider()}recalculateZoomAndCenter(r){this._mercatorTransform.recalculateZoomAndCenter(r),this._verticalPerspectiveTransform.recalculateZoomAndCenter(r)}maxPitchScaleFactor(){return this._mercatorTransform.maxPitchScaleFactor()}getCameraPoint(){return this._helper.getCameraPoint()}getCameraAltitude(){return this._helper.getCameraAltitude()}getCameraLngLat(){return this._helper.getCameraLngLat()}lngLatToCameraDepth(r,c){return this.currentTransform.lngLatToCameraDepth(r,c)}populateCache(r){this._mercatorTransform.populateCache(r),this._verticalPerspectiveTransform.populateCache(r)}getBounds(){return this.currentTransform.getBounds()}calculateCenterFromCameraLngLatAlt(r,c,f,y){return this._helper.calculateCenterFromCameraLngLatAlt(r,c,f,y)}setLocationAtPoint(r,c){if(!this.isGlobeRendering)return this._mercatorTransform.setLocationAtPoint(r,c),void this.apply(this._mercatorTransform);this._verticalPerspectiveTransform.setLocationAtPoint(r,c),this.apply(this._verticalPerspectiveTransform)}locationToScreenPoint(r,c){return this.currentTransform.locationToScreenPoint(r,c)}screenPointToMercatorCoordinate(r,c){return this.currentTransform.screenPointToMercatorCoordinate(r,c)}screenPointToLocation(r,c){return this.currentTransform.screenPointToLocation(r,c)}isPointOnMapSurface(r,c){return this.currentTransform.isPointOnMapSurface(r,c)}getRayDirectionFromPixel(r){return this._verticalPerspectiveTransform.getRayDirectionFromPixel(r)}getMatrixForModel(r,c){return this.currentTransform.getMatrixForModel(r,c)}getProjectionDataForCustomLayer(r=!0){const c=this._mercatorTransform.getProjectionDataForCustomLayer(r);if(!this.isGlobeRendering)return c;const f=this._verticalPerspectiveTransform.getProjectionDataForCustomLayer(r);return f.fallbackMatrix=c.mainMatrix,f}getFastPathSimpleProjectionMatrix(r){return this.currentTransform.getFastPathSimpleProjectionMatrix(r)}}class Fi{get useGlobeControls(){return!0}handlePanInertia(r,c){const f=ji(r,c);return Math.abs(f.lng-c.center.lng)>180&&(f.lng=c.center.lng+179.5*Math.sign(f.lng-c.center.lng)),{easingCenter:f,easingOffset:new o.P(0,0)}}handleMapControlsRollPitchBearingZoom(r,c){const f=r.around,y=c.screenPointToLocation(f);r.bearingDelta&&c.setBearing(c.bearing+r.bearingDelta),r.pitchDelta&&c.setPitch(c.pitch+r.pitchDelta),r.rollDelta&&c.setRoll(c.roll+r.rollDelta);const b=c.zoom;r.zoomDelta&&c.setZoom(c.zoom+r.zoomDelta);const S=c.zoom-b;if(S===0)return;const M=o.bL(c.center.lng,y.lng),N=M/(Math.abs(M/180)+1),j=o.bL(c.center.lat,y.lat),q=c.getRayDirectionFromPixel(f),ne=c.cameraPosition,ee=-1*o.b6(ne,q),Ae=o.bA();o.b1(Ae,ne,[q[0]*ee,q[1]*ee,q[2]*ee]);const ve=o.b8(Ae)-1,ke=Math.exp(.5*-Math.max(ve-.3,0)),Oe=Vr(c.worldSize,c.center.lat)/Math.min(c.width,c.height),Qe=o.by(Oe,.9,.5,1,.25),Ge=(1-o.ar(-S))*Math.min(ke,Qe),ot=c.center.lat,Ze=c.zoom,ct=new o.V(c.center.lng+N*Ge,o.ao(c.center.lat+j*Ge,-o.ap,o.ap));c.setLocationAtPoint(y,f);const dt=c.center,it=o.by(Math.abs(M),45,85,0,1),_t=o.by(Oe,.75,.35,0,1),Dt=Math.pow(Math.max(it,_t),.25),Pt=o.bL(dt.lng,ct.lng),Rt=o.bL(dt.lat,ct.lat);c.setCenter(new o.V(dt.lng+Pt*Dt,dt.lat+Rt*Dt).wrap()),c.setZoom(Ze+An(ot,c.center.lat))}handleMapControlsPan(r,c,f){if(!r.panDelta)return;const y=c.center.lat,b=c.zoom;c.setCenter(ji(r.panDelta,c).wrap()),c.setZoom(b+An(y,c.center.lat))}cameraForBoxAndBearing(r,c,f,y,b){const S=sc(r,c,f,y,b),M=c.left/b.width*2-1,N=(b.width-c.right)/b.width*2-1,j=c.top/b.height*-2+1,q=(b.height-c.bottom)/b.height*-2+1,ne=o.bL(f.getWest(),f.getEast())<0,ee=ne?f.getEast():f.getWest(),Ae=ne?f.getWest():f.getEast(),ve=Math.max(f.getNorth(),f.getSouth()),ke=Math.min(f.getNorth(),f.getSouth()),Oe=ee+.5*o.bL(ee,Ae),Qe=ve+.5*o.bL(ve,ke),Ge=b.clone();Ge.setCenter(S.center),Ge.setBearing(S.bearing),Ge.setPitch(0),Ge.setRoll(0),Ge.setZoom(S.zoom);const ot=Ge.modelViewProjectionMatrix,Ze=[br(f.getNorthWest()),br(f.getNorthEast()),br(f.getSouthWest()),br(f.getSouthEast()),br(new o.V(Ae,Qe)),br(new o.V(ee,Qe)),br(new o.V(Oe,ve)),br(new o.V(Oe,ke))],ct=br(S.center);let dt=Number.POSITIVE_INFINITY;for(const it of Ze)M<0&&(dt=Fi.getLesserNonNegativeNonNull(dt,Fi.solveVectorScale(it,ct,ot,"x",M))),N>0&&(dt=Fi.getLesserNonNegativeNonNull(dt,Fi.solveVectorScale(it,ct,ot,"x",N))),j>0&&(dt=Fi.getLesserNonNegativeNonNull(dt,Fi.solveVectorScale(it,ct,ot,"y",j))),q<0&&(dt=Fi.getLesserNonNegativeNonNull(dt,Fi.solveVectorScale(it,ct,ot,"y",q)));if(Number.isFinite(dt)&&dt!==0)return S.zoom=Ge.zoom+o.au(dt),S;jo()}handleJumpToCenterZoom(r,c){const f=r.center.lat,y=r.applyConstrain(c.center?o.V.convert(c.center):r.center,r.zoom).center;r.setCenter(y.wrap());const b=c.zoom!==void 0?+c.zoom:r.zoom+An(f,y.lat);r.zoom!==b&&r.setZoom(b)}handleEaseTo(r,c){const f=r.zoom,y=r.center,b=r.padding,S={roll:r.roll,pitch:r.pitch,bearing:r.bearing},M={roll:c.roll===void 0?r.roll:c.roll,pitch:c.pitch===void 0?r.pitch:c.pitch,bearing:c.bearing===void 0?r.bearing:c.bearing},N=c.zoom!==void 0,j=!r.isPaddingEqual(c.padding);let q=!1;const ne=c.center?o.V.convert(c.center):y,ee=r.applyConstrain(ne,f).center;Fa(r,ee);const Ae=r.clone();Ae.setCenter(ee),Ae.setZoom(N?+c.zoom:f+An(y.lat,ne.lat)),Ae.setBearing(c.bearing);const ve=new o.P(o.ao(r.centerPoint.x+c.offsetAsPoint.x,0,r.width),o.ao(r.centerPoint.y+c.offsetAsPoint.y,0,r.height));Ae.setLocationAtPoint(ee,ve);const ke=(c.offset&&c.offsetAsPoint.mag())>0?Ae.center:ee,Oe=N?+c.zoom:f+An(y.lat,ke.lat),Qe=f+An(y.lat,0),Ge=Oe+An(ke.lat,0),ot=o.bL(y.lng,ke.lng),Ze=o.bL(y.lat,ke.lat),ct=o.ar(Ge-Qe);return q=Oe!==f,{easeFunc:dt=>{if(o.bp(S,M)||ua({startEulerAngles:S,endEulerAngles:M,tr:r,k:dt,useSlerp:S.roll!=M.roll}),j&&r.interpolatePadding(b,c.padding,dt),c.around)o.w("Easing around a point is not supported under globe projection."),r.setLocationAtPoint(c.around,c.aroundPoint);else{const it=Ge>Qe?Math.min(2,ct):Math.max(.5,ct),_t=Math.pow(it,1-dt),Dt=Si(y,ot,Ze,dt*_t);r.setCenter(Dt.wrap())}if(q){const it=o.G.number(Qe,Ge,dt)+An(0,r.center.lat);r.setZoom(it)}},isZooming:q,elevationCenter:ke}}handleFlyTo(r,c){const f=c.zoom!==void 0,y=r.center,b=r.zoom,S=r.padding,M=!r.isPaddingEqual(c.padding),N=r.applyConstrain(o.V.convert(c.center||c.locationAtOffset),b).center,j=f?+c.zoom:r.zoom+An(r.center.lat,N.lat),q=r.clone();q.setCenter(N),q.setZoom(j),q.setBearing(c.bearing);const ne=new o.P(o.ao(r.centerPoint.x+c.offsetAsPoint.x,0,r.width),o.ao(r.centerPoint.y+c.offsetAsPoint.y,0,r.height));q.setLocationAtPoint(N,ne);const ee=q.center;Fa(r,ee);const Ae=(function(Ze,ct,dt){const it=br(ct),_t=br(dt),Dt=o.b6(it,_t),Pt=Math.acos(Dt),Rt=Gt(Ze);return Pt/(2*Math.PI)*Rt})(r,y,ee),ve=b+An(y.lat,0),ke=j+An(ee.lat,0),Oe=o.ar(ke-ve);let Qe;if(typeof c.minZoom=="number"){const Ze=+c.minZoom+An(ee.lat,0),ct=Math.min(Ze,ve,ke)+An(0,ee.lat),dt=r.applyConstrain(ee,ct).zoom+An(ee.lat,0);Qe=o.ar(dt-ve)}const Ge=o.bL(y.lng,ee.lng),ot=o.bL(y.lat,ee.lat);return{easeFunc:(Ze,ct,dt,it)=>{const _t=Si(y,Ge,ot,dt);M&&r.interpolatePadding(S,c.padding,Ze);const Dt=Ze===1?ee:_t;r.setCenter(Dt.wrap());const Pt=ve+o.au(ct);r.setZoom(Ze===1?j:Pt+An(0,Dt.lat))},scaleOfZoom:Oe,targetCenter:ee,scaleOfMinZoom:Qe,pixelPathLength:Ae}}static solveVectorScale(r,c,f,y,b){const S=y==="x"?[f[0],f[4],f[8],f[12]]:[f[1],f[5],f[9],f[13]],M=[f[3],f[7],f[11],f[15]],N=r[0]*S[0]+r[1]*S[1]+r[2]*S[2],j=r[0]*M[0]+r[1]*M[1]+r[2]*M[2],q=c[0]*S[0]+c[1]*S[1]+c[2]*S[2],ne=c[0]*M[0]+c[1]*M[1]+c[2]*M[2];return q+b*j===N+b*ne||M[3]*(N-q)+S[3]*(ne-j)+N*ne==q*j?null:(q+S[3]-b*ne-b*M[3])/(q-N-b*ne+b*j)}static getLesserNonNegativeNonNull(r,c){return c!==null&&c>=0&&c<r?c:r}}class Tc{constructor(r){this._globe=r,this._mercatorCameraHelper=new ha,this._verticalPerspectiveCameraHelper=new Fi}get useGlobeControls(){return this._globe.useGlobeRendering}get currentHelper(){return this.useGlobeControls?this._verticalPerspectiveCameraHelper:this._mercatorCameraHelper}handlePanInertia(r,c){return this.currentHelper.handlePanInertia(r,c)}handleMapControlsRollPitchBearingZoom(r,c){return this.currentHelper.handleMapControlsRollPitchBearingZoom(r,c)}handleMapControlsPan(r,c,f){this.currentHelper.handleMapControlsPan(r,c,f)}cameraForBoxAndBearing(r,c,f,y,b){return this.currentHelper.cameraForBoxAndBearing(r,c,f,y,b)}handleJumpToCenterZoom(r,c){this.currentHelper.handleJumpToCenterZoom(r,c)}handleEaseTo(r,c){return this.currentHelper.handleEaseTo(r,c)}handleFlyTo(r,c){return this.currentHelper.handleFlyTo(r,c)}}const ma=(w,r)=>o.B(w,r&&r.filter((c=>c.identifier!=="source.canvas"))),Pa=o.bP();class Xi extends o.E{constructor(r,c={}){var f,y;super(),this._rtlPluginLoaded=()=>{for(const S in this.tileManagers){const M=this.tileManagers[S].getSource().type;M!=="vector"&&M!=="geojson"||this.tileManagers[S].reload()}},this.map=r,this.dispatcher=new Lt(St(),r._getMapId()),this.dispatcher.registerMessageHandler("GG",((S,M)=>this.getGlyphs(S,M))),this.dispatcher.registerMessageHandler("GI",((S,M)=>this.getImages(S,M))),this.dispatcher.registerMessageHandler("GDA",((S,M)=>this.getDashes(S,M))),this.imageManager=new _e,this.imageManager.setEventedParent(this);const b=((f=r._container)===null||f===void 0?void 0:f.lang)||typeof document<"u"&&((y=document.documentElement)===null||y===void 0?void 0:y.lang)||void 0;this.glyphManager=new Je(r._requestManager,c.localIdeographFontFamily,b),this.lineAtlas=new Se(256,512),this.crossTileSymbolIndex=new vs,this._setInitialValues(),this._resetUpdates(),this.dispatcher.broadcast("SR",o.bQ()),yt().on(qe,this._rtlPluginLoaded),this.on("data",(S=>{if(S.dataType!=="source"||S.sourceDataType!=="metadata")return;const M=this.tileManagers[S.sourceId];if(!M)return;const N=M.getSource();if(N&&N.vectorLayerIds)for(const j in this._layers){const q=this._layers[j];q.source===N.id&&this._validateLayer(q)}}))}_setInitialValues(){var r;this._spritesImagesIds={},this._layers={},this._order=[],this.tileManagers={},this.zoomHistory=new o.bR,this._availableImages=[],this._globalState={},this._serializedLayers={},this.stylesheet=null,this.light=null,this.sky=null,this.projection&&(this.projection.destroy(),delete this.projection),this._loaded=!1,this._changed=!1,this._updatedLayers={},this._updatedSources={},this._changedImages={},this._glyphsDidChange=!1,this._updatedPaintProps={},this._layerOrderChanged=!1,this.crossTileSymbolIndex=new(((r=this.crossTileSymbolIndex)===null||r===void 0?void 0:r.constructor)||Object),this.pauseablePlacement=void 0,this.placement=void 0,this.z=0}setGlobalStateProperty(r,c){var f,y,b;this._checkLoaded();const S=c===null?(b=(y=(f=this.stylesheet.state)===null||f===void 0?void 0:f[r])===null||y===void 0?void 0:y.default)!==null&&b!==void 0?b:null:c;if(o.bS(S,this._globalState[r]))return this;this._globalState[r]=S,this._applyGlobalStateChanges([r])}getGlobalState(){return this._globalState}setGlobalState(r){this._checkLoaded();const c=[];for(const f in r)!o.bS(this._globalState[f],r[f].default)&&(c.push(f),this._globalState[f]=r[f].default);this._applyGlobalStateChanges(c)}_applyGlobalStateChanges(r){if(r.length===0)return;const c=new Set,f={};for(const y of r){f[y]=this._globalState[y];for(const b in this._layers){const S=this._layers[b],M=S.getLayoutAffectingGlobalStateRefs(),N=S.getPaintAffectingGlobalStateRefs();if(M.has(y)&&c.add(S.source),N.has(y))for(const{name:j,value:q}of N.get(y))this._updatePaintProperty(S,j,q)}}this.dispatcher.broadcast("UGS",f);for(const y in this.tileManagers)c.has(y)&&(this._reloadSource(y),this._changed=!0)}loadURL(r,c={},f){this.fire(new o.l("dataloading",{dataType:"style"})),c.validate=typeof c.validate!="boolean"||c.validate;const y=this.map._requestManager.transformRequest(r,"Style");this._loadStyleRequest=new AbortController;const b=this._loadStyleRequest;o.j(y,this._loadStyleRequest).then((S=>{this._loadStyleRequest=null,this._load(S.data,c,f)})).catch((S=>{this._loadStyleRequest=null,S&&!b.signal.aborted&&this.fire(new o.k(S))}))}loadJSON(r,c={},f){this.fire(new o.l("dataloading",{dataType:"style"})),this._frameRequest=new AbortController,P.frameAsync(this._frameRequest).then((()=>{this._frameRequest=null,c.validate=c.validate!==!1,this._load(r,c,f)})).catch((()=>{}))}loadEmpty(){this.fire(new o.l("dataloading",{dataType:"style"})),this._load(Pa,{validate:!1})}_load(r,c,f){var y,b;let S=c.transformStyle?c.transformStyle(f,r):r;if(!c.validate||!ma(this,o.C(S))){S=Object.assign({},S),this._loaded=!0,this.stylesheet=S;for(const M in S.sources)this.addSource(M,S.sources[M],{validate:!1});S.sprite?this._loadSprite(S.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(S.glyphs),this._createLayers(),this.light=new xt(this.stylesheet.light),this._setProjectionInternal(((y=this.stylesheet.projection)===null||y===void 0?void 0:y.type)||"mercator"),this.sky=new oe(this.stylesheet.sky),this.map.setTerrain((b=this.stylesheet.terrain)!==null&&b!==void 0?b:null),this.fire(new o.l("data",{dataType:"style"})),this.fire(new o.l("style.load"))}}_createLayers(){var r,c,f;const y=o.bT(this.stylesheet.layers);this.setGlobalState((r=this.stylesheet.state)!==null&&r!==void 0?r:null),this.dispatcher.broadcast("SL",y),this._order=y.map((b=>b.id)),this._layers={},this._serializedLayers=null;for(const b of y){const S=o.bU(b,this._globalState);if(S.setEventedParent(this,{layer:{id:b.id}}),this._layers[b.id]=S,o.bV(S)&&this.tileManagers[S.source]){const M=(f=(c=b.paint)===null||c===void 0?void 0:c["raster-fade-duration"])!==null&&f!==void 0?f:S.paint.get("raster-fade-duration");this.tileManagers[S.source].setRasterFadeDuration(M)}}}_loadSprite(r,c=!1,f=void 0){this.imageManager.setLoaded(!1);const y=new AbortController;let b;this._spriteRequest=y,(function(S,M,N,j){return o._(this,void 0,void 0,(function*(){const q=xe(S),ne=N>1?"@2x":"",ee={},Ae={};for(const{id:ve,url:ke}of q){const Oe=M.transformRequest(nt(ke,ne,".json"),"SpriteJSON");ee[ve]=o.j(Oe,j);const Qe=M.transformRequest(nt(ke,ne,".png"),"SpriteImage");Ae[ve]=Me.getImage(Qe,j)}return yield Promise.all([...Object.values(ee),...Object.values(Ae)]),(function(ve,ke){return o._(this,void 0,void 0,(function*(){const Oe={};for(const Qe in ve){Oe[Qe]={};const Ge=P.getImageCanvasContext((yield ke[Qe]).data),ot=(yield ve[Qe]).data;for(const Ze in ot){const{width:ct,height:dt,x:it,y:_t,sdf:Dt,pixelRatio:Pt,stretchX:Rt,stretchY:Qt,content:nr,textFitWidth:Ar,textFitHeight:rr}=ot[Ze];Oe[Qe][Ze]={data:null,pixelRatio:Pt,sdf:Dt,stretchX:Rt,stretchY:Qt,content:nr,textFitWidth:Ar,textFitHeight:rr,spriteData:{width:ct,height:dt,x:it,y:_t,context:Ge}}}}return Oe}))})(ee,Ae)}))})(r,this.map._requestManager,this.map.getPixelRatio(),this._spriteRequest).then((S=>{if(this._spriteRequest=null,S)for(const M in S){this._spritesImagesIds[M]=[];const N=this._spritesImagesIds[M]?this._spritesImagesIds[M].filter((j=>!(j in S))):[];for(const j of N)this.imageManager.removeImage(j),this._changedImages[j]=!0;for(const j in S[M]){const q=M==="default"?j:`${M}:${j}`;this._spritesImagesIds[M].push(q),q in this.imageManager.images?this.imageManager.updateImage(q,S[M][j],!1):this.imageManager.addImage(q,S[M][j]),c&&(this._changedImages[q]=!0)}}})).catch((S=>{this._spriteRequest=null,b=S,y.signal.aborted||this.fire(new o.k(b))})).finally((()=>{this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),c&&(this._changed=!0),this.dispatcher.broadcast("SI",this._availableImages),this.fire(new o.l("data",{dataType:"style"})),f&&f(b)}))}_unloadSprite(){for(const r of Object.values(this._spritesImagesIds).flat())this.imageManager.removeImage(r),this._changedImages[r]=!0;this._spritesImagesIds={},this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new o.l("data",{dataType:"style"}))}_validateLayer(r){const c=this.tileManagers[r.source];if(!c)return;const f=r.sourceLayer;if(!f)return;const y=c.getSource();(y.type==="geojson"||y.vectorLayerIds&&y.vectorLayerIds.indexOf(f)===-1)&&this.fire(new o.k(new Error(`Source layer "${f}" does not exist on source "${y.id}" as specified by style layer "${r.id}".`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(const r in this.tileManagers)if(!this.tileManagers[r].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeByIds(r,c=!1){const f=this._serializedAllLayers();if(!r||r.length===0)return Object.values(c?o.bW(f):f);const y=[];for(const b of r)if(f[b]){const S=c?o.bW(f[b]):f[b];y.push(S)}return y}_serializedAllLayers(){let r=this._serializedLayers;if(r)return r;r=this._serializedLayers={};const c=Object.keys(this._layers);for(const f of c){const y=this._layers[f];y.type!=="custom"&&(r[f]=y.serialize())}return r}hasTransitions(){var r,c,f;if(!((r=this.light)===null||r===void 0)&&r.hasTransition()||!((c=this.sky)===null||c===void 0)&&c.hasTransition()||!((f=this.projection)===null||f===void 0)&&f.hasTransition())return!0;for(const y in this.tileManagers)if(this.tileManagers[y].hasTransition())return!0;for(const y in this._layers)if(this._layers[y].hasTransition())return!0;return!1}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading.")}update(r){if(!this._loaded)return;const c=this._changed;if(c){const y=Object.keys(this._updatedLayers),b=Object.keys(this._removedLayers);(y.length||b.length)&&this._updateWorkerLayers(y,b);for(const S in this._updatedSources){const M=this._updatedSources[S];if(M==="reload")this._reloadSource(S);else{if(M!=="clear")throw new Error(`Invalid action ${M}`);this._clearSource(S)}}this._updateTilesForChangedImages(),this._updateTilesForChangedGlyphs();for(const S in this._updatedPaintProps)this._layers[S].updateTransitions(r);this.light.updateTransitions(r),this.sky.updateTransitions(r),this._resetUpdates()}const f={};for(const y in this.tileManagers){const b=this.tileManagers[y];f[y]=b.used,b.used=!1}for(const y of this._order){const b=this._layers[y];b.recalculate(r,this._availableImages),!b.isHidden(r.zoom)&&b.source&&(this.tileManagers[b.source].used=!0)}for(const y in f){const b=this.tileManagers[y];!!f[y]!=!!b.used&&b.fire(new o.l("data",{sourceDataType:"visibility",dataType:"source",sourceId:y}))}this.light.recalculate(r),this.sky.recalculate(r),this.projection.recalculate(r),this.z=r.zoom,c&&this.fire(new o.l("data",{dataType:"style"}))}_updateTilesForChangedImages(){const r=Object.keys(this._changedImages);if(r.length){for(const c in this.tileManagers)this.tileManagers[c].reloadTilesForDependencies(["icons","patterns"],r);this._changedImages={}}}_updateTilesForChangedGlyphs(){if(this._glyphsDidChange){for(const r in this.tileManagers)this.tileManagers[r].reloadTilesForDependencies(["glyphs"],[""]);this._glyphsDidChange=!1}}_updateWorkerLayers(r,c){this.dispatcher.broadcast("UL",{layers:this._serializeByIds(r,!1),removedIds:c})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={},this._glyphsDidChange=!1}setState(r,c={}){var f;this._checkLoaded();const y=this.serialize();if(r=c.transformStyle?c.transformStyle(y,r):r,((f=c.validate)===null||f===void 0||f)&&ma(this,o.C(r)))return!1;(r=o.bW(r)).layers=o.bT(r.layers);const b=o.bX(y,r),S=this._getOperationsToPerform(b);if(S.unimplemented.length>0)throw new Error(`Unimplemented: ${S.unimplemented.join(", ")}.`);if(S.operations.length===0)return!1;for(const M of S.operations)M();return this.stylesheet=r,this._serializedLayers=null,!0}_getOperationsToPerform(r){const c=[],f=[];for(const y of r)switch(y.command){case"setCenter":case"setZoom":case"setBearing":case"setPitch":case"setRoll":continue;case"addLayer":c.push((()=>this.addLayer.apply(this,y.args)));break;case"removeLayer":c.push((()=>this.removeLayer.apply(this,y.args)));break;case"setPaintProperty":c.push((()=>this.setPaintProperty.apply(this,y.args)));break;case"setLayoutProperty":c.push((()=>this.setLayoutProperty.apply(this,y.args)));break;case"setFilter":c.push((()=>this.setFilter.apply(this,y.args)));break;case"addSource":c.push((()=>this.addSource.apply(this,y.args)));break;case"removeSource":c.push((()=>this.removeSource.apply(this,y.args)));break;case"setLayerZoomRange":c.push((()=>this.setLayerZoomRange.apply(this,y.args)));break;case"setLight":c.push((()=>this.setLight.apply(this,y.args)));break;case"setGeoJSONSourceData":c.push((()=>this.setGeoJSONSourceData.apply(this,y.args)));break;case"setGlyphs":c.push((()=>this.setGlyphs.apply(this,y.args)));break;case"setSprite":c.push((()=>this.setSprite.apply(this,y.args)));break;case"setTerrain":c.push((()=>this.map.setTerrain.apply(this,y.args)));break;case"setSky":c.push((()=>this.setSky.apply(this,y.args)));break;case"setProjection":this.setProjection.apply(this,y.args);break;case"setGlobalState":c.push((()=>this.setGlobalState.apply(this,y.args)));break;case"setTransition":c.push((()=>{}));break;default:f.push(y.command)}return{operations:c,unimplemented:f}}addImage(r,c){if(this.getImage(r))return this.fire(new o.k(new Error(`An image named "${r}" already exists.`)));this.imageManager.addImage(r,c),this._afterImageUpdated(r)}updateImage(r,c){this.imageManager.updateImage(r,c)}getImage(r){return this.imageManager.getImage(r)}removeImage(r){if(!this.getImage(r))return this.fire(new o.k(new Error(`An image named "${r}" does not exist.`)));this.imageManager.removeImage(r),this._afterImageUpdated(r)}_afterImageUpdated(r){this._availableImages=this.imageManager.listImages(),this._changedImages[r]=!0,this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new o.l("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this.imageManager.listImages()}addSource(r,c,f={}){if(this._checkLoaded(),this.tileManagers[r]!==void 0)throw new Error(`Source "${r}" already exists.`);if(!c.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(c).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(c.type)>=0&&this._validate(o.C.source,`sources.${r}`,c,null,f))return;this.map&&this.map._collectResourceTiming&&(c.collectResourceTiming=!0);const y=this.tileManagers[r]=new ns(r,c,this.dispatcher);y.style=this,y.setEventedParent(this,(()=>({isSourceLoaded:y.loaded(),source:y.serialize(),sourceId:r}))),y.onAdd(this.map),this._changed=!0}removeSource(r){if(this._checkLoaded(),this.tileManagers[r]===void 0)throw new Error("There is no source with this ID");for(const f in this._layers)if(this._layers[f].source===r)return this.fire(new o.k(new Error(`Source "${r}" cannot be removed while layer "${f}" is using it.`)));const c=this.tileManagers[r];delete this.tileManagers[r],delete this._updatedSources[r],c.fire(new o.l("data",{sourceDataType:"metadata",dataType:"source",sourceId:r})),c.setEventedParent(null),c.onRemove(this.map),this._changed=!0}setGeoJSONSourceData(r,c){if(this._checkLoaded(),this.tileManagers[r]===void 0)throw new Error(`There is no source with this ID=${r}`);const f=this.tileManagers[r].getSource();if(f.type!=="geojson")throw new Error(`geojsonSource.type is ${f.type}, which is !== 'geojson`);f.setData(c),this._changed=!0}getSource(r){return this.tileManagers[r]&&this.tileManagers[r].getSource()}addLayer(r,c,f={}){this._checkLoaded();const y=r.id;if(this.getLayer(y))return void this.fire(new o.k(new Error(`Layer "${y}" already exists on this map.`)));let b;if(r.type==="custom"){if(ma(this,o.bY(r)))return;b=o.bU(r,this._globalState)}else{if("source"in r&&typeof r.source=="object"&&(this.addSource(y,r.source),r=o.bW(r),r=o.e(r,{source:y})),this._validate(o.C.layer,`layers.${y}`,r,{arrayIndex:-1},f))return;b=o.bU(r,this._globalState),this._validateLayer(b),b.setEventedParent(this,{layer:{id:y}})}const S=c?this._order.indexOf(c):this._order.length;if(c&&S===-1)this.fire(new o.k(new Error(`Cannot add layer "${y}" before non-existing layer "${c}".`)));else{if(this._order.splice(S,0,y),this._layerOrderChanged=!0,this._layers[y]=b,this._removedLayers[y]&&b.source&&b.type!=="custom"){const M=this._removedLayers[y];delete this._removedLayers[y],M.type!==b.type?this._updatedSources[b.source]="clear":(this._updatedSources[b.source]="reload",this.tileManagers[b.source].pause())}this._updateLayer(b),b.onAdd&&b.onAdd(this.map)}}moveLayer(r,c){if(this._checkLoaded(),this._changed=!0,!this._layers[r])return void this.fire(new o.k(new Error(`The layer '${r}' does not exist in the map's style and cannot be moved.`)));if(r===c)return;const f=this._order.indexOf(r);this._order.splice(f,1);const y=c?this._order.indexOf(c):this._order.length;c&&y===-1?this.fire(new o.k(new Error(`Cannot move layer "${r}" before non-existing layer "${c}".`))):(this._order.splice(y,0,r),this._layerOrderChanged=!0)}removeLayer(r){this._checkLoaded();const c=this._layers[r];if(!c)return void this.fire(new o.k(new Error(`Cannot remove non-existing layer "${r}".`)));c.setEventedParent(null);const f=this._order.indexOf(r);this._order.splice(f,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[r]=c,delete this._layers[r],this._serializedLayers&&delete this._serializedLayers[r],delete this._updatedLayers[r],delete this._updatedPaintProps[r],c.onRemove&&c.onRemove(this.map)}getLayer(r){return this._layers[r]}getLayersOrder(){return[...this._order]}hasLayer(r){return r in this._layers}setLayerZoomRange(r,c,f){this._checkLoaded();const y=this.getLayer(r);y?y.minzoom===c&&y.maxzoom===f||(c!=null&&(y.minzoom=c),f!=null&&(y.maxzoom=f),this._updateLayer(y)):this.fire(new o.k(new Error(`Cannot set the zoom range of non-existing layer "${r}".`)))}setFilter(r,c,f={}){this._checkLoaded();const y=this.getLayer(r);if(y){if(!o.bS(y.filter,c))return c==null?(y.setFilter(void 0),void this._updateLayer(y)):void(this._validate(o.C.filter,`layers.${y.id}.filter`,c,null,f)||(y.setFilter(o.bW(c)),this._updateLayer(y)))}else this.fire(new o.k(new Error(`Cannot filter non-existing layer "${r}".`)))}getFilter(r){return o.bW(this.getLayer(r).filter)}setLayoutProperty(r,c,f,y={}){this._checkLoaded();const b=this.getLayer(r);b?o.bS(b.getLayoutProperty(c),f)||(b.setLayoutProperty(c,f,y),this._updateLayer(b)):this.fire(new o.k(new Error(`Cannot style non-existing layer "${r}".`)))}getLayoutProperty(r,c){const f=this.getLayer(r);if(f)return f.getLayoutProperty(c);this.fire(new o.k(new Error(`Cannot get style of non-existing layer "${r}".`)))}setPaintProperty(r,c,f,y={}){this._checkLoaded();const b=this.getLayer(r);b?o.bS(b.getPaintProperty(c),f)||this._updatePaintProperty(b,c,f,y):this.fire(new o.k(new Error(`Cannot style non-existing layer "${r}".`)))}_updatePaintProperty(r,c,f,y={}){r.setPaintProperty(c,f,y)&&this._updateLayer(r),o.bV(r)&&c==="raster-fade-duration"&&this.tileManagers[r.source].setRasterFadeDuration(f),this._changed=!0,this._updatedPaintProps[r.id]=!0,this._serializedLayers=null}getPaintProperty(r,c){return this.getLayer(r).getPaintProperty(c)}setFeatureState(r,c){this._checkLoaded();const f=r.source,y=r.sourceLayer,b=this.tileManagers[f];if(b===void 0)return void this.fire(new o.k(new Error(`The source '${f}' does not exist in the map's style.`)));const S=b.getSource().type;S==="geojson"&&y?this.fire(new o.k(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):S!=="vector"||y?(r.id===void 0&&this.fire(new o.k(new Error("The feature id parameter must be provided."))),b.setFeatureState(y,r.id,c)):this.fire(new o.k(new Error("The sourceLayer parameter must be provided for vector source types.")))}removeFeatureState(r,c){this._checkLoaded();const f=r.source,y=this.tileManagers[f];if(y===void 0)return void this.fire(new o.k(new Error(`The source '${f}' does not exist in the map's style.`)));const b=y.getSource().type,S=b==="vector"?r.sourceLayer:void 0;b!=="vector"||S?c&&typeof r.id!="string"&&typeof r.id!="number"?this.fire(new o.k(new Error("A feature id is required to remove its specific state property."))):y.removeFeatureState(S,r.id,c):this.fire(new o.k(new Error("The sourceLayer parameter must be provided for vector source types.")))}getFeatureState(r){this._checkLoaded();const c=r.source,f=r.sourceLayer,y=this.tileManagers[c];if(y!==void 0)return y.getSource().type!=="vector"||f?(r.id===void 0&&this.fire(new o.k(new Error("The feature id parameter must be provided."))),y.getFeatureState(f,r.id)):void this.fire(new o.k(new Error("The sourceLayer parameter must be provided for vector source types.")));this.fire(new o.k(new Error(`The source '${c}' does not exist in the map's style.`)))}getTransition(){return o.e({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){if(!this._loaded)return;const r=o.bZ(this.tileManagers,(b=>b.serialize())),c=this._serializeByIds(this._order,!0),f=this.map.getTerrain()||void 0,y=this.stylesheet;return o.b_({version:y.version,name:y.name,metadata:y.metadata,light:y.light,sky:y.sky,center:y.center,zoom:y.zoom,bearing:y.bearing,pitch:y.pitch,sprite:y.sprite,glyphs:y.glyphs,transition:y.transition,projection:y.projection,sources:r,layers:c,terrain:f},(b=>b!==void 0))}_updateLayer(r){this._updatedLayers[r.id]=!0,r.source&&!this._updatedSources[r.source]&&this.tileManagers[r.source].getSource().type!=="raster"&&(this._updatedSources[r.source]="reload",this.tileManagers[r.source].pause()),this._serializedLayers=null,this._changed=!0}_flattenAndSortRenderedFeatures(r){const c=S=>this._layers[S].type==="fill-extrusion",f={},y=[];for(let S=this._order.length-1;S>=0;S--){const M=this._order[S];if(c(M)){f[M]=S;for(const N of r){const j=N[M];if(j)for(const q of j)y.push(q)}}}y.sort(((S,M)=>M.intersectionZ-S.intersectionZ));const b=[];for(let S=this._order.length-1;S>=0;S--){const M=this._order[S];if(c(M))for(let N=y.length-1;N>=0;N--){const j=y[N].feature;if(f[j.layer.id]<S)break;b.push(j),y.pop()}else for(const N of r){const j=N[M];if(j)for(const q of j)b.push(q.feature)}}return b}queryRenderedFeatures(r,c,f){c&&c.filter&&this._validate(o.C.filter,"queryRenderedFeatures.filter",c.filter,null,c);const y={};if(c&&c.layers){if(!(Array.isArray(c.layers)||c.layers instanceof Set))return this.fire(new o.k(new Error("parameters.layers must be an Array or a Set of strings"))),[];for(const j of c.layers){const q=this._layers[j];if(!q)return this.fire(new o.k(new Error(`The layer '${j}' does not exist in the map's style and cannot be queried for features.`))),[];y[q.source]=!0}}const b=[];c.availableImages=this._availableImages;const S=this._serializedAllLayers(),M=c.layers instanceof Set?c.layers:Array.isArray(c.layers)?new Set(c.layers):null,N=Object.assign(Object.assign({},c),{layers:M,globalState:this._globalState});for(const j in this.tileManagers)c.layers&&!y[j]||b.push(hr(this.tileManagers[j],this._layers,S,r,N,f,this.map.terrain?(q,ne,ee)=>this.map.terrain.getElevation(q,ne,ee):void 0));return this.placement&&b.push((function(j,q,ne,ee,Ae,ve,ke){const Oe={},Qe=ve.queryRenderedSymbols(ee),Ge=[];for(const ot of Object.keys(Qe).map(Number))Ge.push(ke[ot]);Ge.sort(Cr);for(const ot of Ge){const Ze=ot.featureIndex.lookupSymbolFeatures(Qe[ot.bucketInstanceId],q,ot.bucketIndex,ot.sourceLayerIndex,{filterSpec:Ae.filter,globalState:Ae.globalState},Ae.layers,Ae.availableImages,j);for(const ct in Ze){const dt=Oe[ct]=Oe[ct]||[],it=Ze[ct];it.sort(((_t,Dt)=>{const Pt=ot.featureSortOrder;if(Pt){const Rt=Pt.indexOf(_t.featureIndex);return Pt.indexOf(Dt.featureIndex)-Rt}return Dt.featureIndex-_t.featureIndex}));for(const _t of it)dt.push(_t)}}return(function(ot,Ze,ct){for(const dt in ot)for(const it of ot[dt])He(it,ct[Ze[dt].source]);return ot})(Oe,j,ne)})(this._layers,S,this.tileManagers,r,N,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(b)}querySourceFeatures(r,c){c?.filter&&this._validate(o.C.filter,"querySourceFeatures.filter",c.filter,null,c);const f=this.tileManagers[r];return f?(function(y,b){const S=y.getRenderableIds().map((j=>y.getTileByID(j))),M=[],N={};for(let j=0;j<S.length;j++){const q=S[j],ne=q.tileID.canonical.key;N[ne]||(N[ne]=!0,q.querySourceFeatures(M,b))}return M})(f,c?Object.assign(Object.assign({},c),{globalState:this._globalState}):{globalState:this._globalState}):[]}getLight(){return this.light.getLight()}setLight(r,c={}){this._checkLoaded();const f=this.light.getLight();let y=!1;for(const S in r)if(!o.bS(r[S],f[S])){y=!0;break}if(!y)return;const b={now:z(),transition:o.e({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(r,c),this.light.updateTransitions(b)}getProjection(){var r;return(r=this.stylesheet)===null||r===void 0?void 0:r.projection}setProjection(r){if(this._checkLoaded(),this.projection){if(this.projection.name===r.type)return;this.projection.destroy(),delete this.projection}this.stylesheet.projection=r,this._setProjectionInternal(r.type)}getSky(){var r;return(r=this.stylesheet)===null||r===void 0?void 0:r.sky}setSky(r,c={}){this._checkLoaded();const f=this.getSky();let y=!1;if(!r&&!f)return;if(r&&!f)y=!0;else if(!r&&f)y=!0;else for(const S in r)if(!o.bS(r[S],f[S])){y=!0;break}if(!y)return;const b={now:z(),transition:o.e({duration:300,delay:0},this.stylesheet.transition)};this.stylesheet.sky=r,this.sky.setSky(r,c),this.sky.updateTransitions(b)}_setProjectionInternal(r){const c=(function(f,y){const b={constrainOverride:y};if(Array.isArray(f)){const S=new It({type:f});return{projection:S,transform:new hl(b),cameraHelper:new Tc(S)}}switch(f){case"mercator":return{projection:new ws,transform:new ul(b),cameraHelper:new ha};case"globe":{const S=new It({type:["interpolate",["linear"],["zoom"],11,"vertical-perspective",12,"mercator"]});return{projection:S,transform:new hl(b),cameraHelper:new Tc(S)}}case"vertical-perspective":return{projection:new et,transform:new Ta(b),cameraHelper:new Fi};default:return o.w(`Unknown projection name: ${f}. Falling back to mercator projection.`),{projection:new ws,transform:new ul(b),cameraHelper:new ha}}})(r,this.map.transformConstrain);this.projection=c.projection,this.map.migrateProjection(c.transform,c.cameraHelper);for(const f in this.tileManagers)this.tileManagers[f].reload()}_validate(r,c,f,y,b={}){return(!b||b.validate!==!1)&&ma(this,r.call(o.C,o.e({key:c,style:this.serialize(),value:f,styleSpec:o.u},y)))}_remove(r=!0){this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._loadStyleRequest&&(this._loadStyleRequest.abort(),this._loadStyleRequest=null),this._spriteRequest&&(this._spriteRequest.abort(),this._spriteRequest=null),yt().off(qe,this._rtlPluginLoaded);for(const c in this._layers)this._layers[c].setEventedParent(null);for(const c in this.tileManagers){const f=this.tileManagers[c];f.setEventedParent(null),f.onRemove(this.map)}this.imageManager.setEventedParent(null),this.setEventedParent(null),r&&this.dispatcher.broadcast("RM",void 0),this.dispatcher.remove(r)}_clearSource(r){this.tileManagers[r].clearTiles()}_reloadSource(r){this.tileManagers[r].resume(),this.tileManagers[r].reload()}_updateSources(r){for(const c in this.tileManagers)this.tileManagers[c].update(r,this.map.terrain)}_generateCollisionBoxes(){for(const r in this.tileManagers)this._reloadSource(r)}_updatePlacement(r,c,f,y,b=!1){let S=!1,M=!1;const N={};for(const j of this._order){const q=this._layers[j];if(q.type!=="symbol")continue;if(!N[q.source]){const ee=this.tileManagers[q.source];N[q.source]=ee.getRenderableIds(!0).map((Ae=>ee.getTileByID(Ae))).sort(((Ae,ve)=>ve.tileID.overscaledZ-Ae.tileID.overscaledZ||(Ae.tileID.isLessThan(ve.tileID)?-1:1)))}const ne=this.crossTileSymbolIndex.addLayer(q,N[q.source],r.center.lng);S=S||ne}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((b=b||this._layerOrderChanged||f===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(z(),r.zoom))&&(this.pauseablePlacement=new Al(r,this.map.terrain,this._order,b,c,f,y,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,N),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(z()),M=!0),S&&this.pauseablePlacement.placement.setStale()),M||S)for(const j of this._order){const q=this._layers[j];q.type==="symbol"&&this.placement.updateLayerOpacities(q,N[q.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(z())}_releaseSymbolFadeTiles(){for(const r in this.tileManagers)this.tileManagers[r].releaseSymbolFadeTiles()}getImages(r,c){return o._(this,void 0,void 0,(function*(){const f=yield this.imageManager.getImages(c.icons);this._updateTilesForChangedImages();const y=this.tileManagers[c.source];return y&&y.setDependencies(c.tileID.key,c.type,c.icons),f}))}getGlyphs(r,c){return o._(this,void 0,void 0,(function*(){const f=yield this.glyphManager.getGlyphs(c.stacks),y=this.tileManagers[c.source];return y&&y.setDependencies(c.tileID.key,c.type,[""]),f}))}getGlyphsUrl(){return this.stylesheet.glyphs||null}setGlyphs(r,c={}){this._checkLoaded(),r&&this._validate(o.C.glyphs,"glyphs",r,null,c)||(this._glyphsDidChange=!0,this.stylesheet.glyphs=r,this.glyphManager.entries={},this.glyphManager.setURL(r))}getDashes(r,c){return o._(this,void 0,void 0,(function*(){const f={};for(const[y,b]of Object.entries(c.dashes))f[y]=this.lineAtlas.getDash(b.dasharray,b.round);return f}))}addSprite(r,c,f={},y){this._checkLoaded();const b=[{id:r,url:c}],S=[...xe(this.stylesheet.sprite),...b];this._validate(o.C.sprite,"sprite",S,null,f)||(this.stylesheet.sprite=S,this._loadSprite(b,!0,y))}removeSprite(r){this._checkLoaded();const c=xe(this.stylesheet.sprite);if(c.find((f=>f.id===r))){if(this._spritesImagesIds[r])for(const f of this._spritesImagesIds[r])this.imageManager.removeImage(f),this._changedImages[f]=!0;c.splice(c.findIndex((f=>f.id===r)),1),this.stylesheet.sprite=c.length>0?c:void 0,delete this._spritesImagesIds[r],this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new o.l("data",{dataType:"style"}))}else this.fire(new o.k(new Error(`Sprite "${r}" doesn't exists on this map.`)))}getSprite(){return xe(this.stylesheet.sprite)}setSprite(r,c={},f){this._checkLoaded(),r&&this._validate(o.C.sprite,"sprite",r,null,c)||(this.stylesheet.sprite=r,r?this._loadSprite(r,!0,f):(this._unloadSprite(),f&&f(null)))}destroy(){this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._loadStyleRequest&&(this._loadStyleRequest.abort(),this._loadStyleRequest=null),this._spriteRequest&&(this._spriteRequest.abort(),this._spriteRequest=null);for(const r in this.tileManagers){const c=this.tileManagers[r];c.setEventedParent(null),c.onRemove(this.map)}this.tileManagers={},this.imageManager&&(this.imageManager.setEventedParent(null),this.imageManager.destroy(),this._availableImages=[],this._spritesImagesIds={}),this.glyphManager&&this.glyphManager.destroy();for(const r in this._layers){const c=this._layers[r];c.setEventedParent(null),c.onRemove&&c.onRemove(this.map)}this._setInitialValues(),this.setEventedParent(null),this.dispatcher.unregisterMessageHandler("GG"),this.dispatcher.unregisterMessageHandler("GI"),this.dispatcher.unregisterMessageHandler("GDA"),this.dispatcher.remove(!0),this._listeners={},this._oneTimeListeners={}}}var sA=o.aV([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);class Tl{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}bind(r,c,f,y,b,S,M,N,j){this.context=r;let q=this.boundPaintVertexBuffers.length!==y.length;for(let ne=0;!q&&ne<y.length;ne++)this.boundPaintVertexBuffers[ne]!==y[ne]&&(q=!0);!this.vao||this.boundProgram!==c||this.boundLayoutVertexBuffer!==f||q||this.boundIndexBuffer!==b||this.boundVertexOffset!==S||this.boundDynamicVertexBuffer!==M||this.boundDynamicVertexBuffer2!==N||this.boundDynamicVertexBuffer3!==j?this.freshBind(c,f,y,b,S,M,N,j):(r.bindVertexArray.set(this.vao),M&&M.bind(),b&&b.dynamicDraw&&b.bind(),N&&N.bind(),j&&j.bind())}freshBind(r,c,f,y,b,S,M,N){const j=r.numAttributes,q=this.context,ne=q.gl;this.vao&&this.destroy(),this.vao=q.createVertexArray(),q.bindVertexArray.set(this.vao),this.boundProgram=r,this.boundLayoutVertexBuffer=c,this.boundPaintVertexBuffers=f,this.boundIndexBuffer=y,this.boundVertexOffset=b,this.boundDynamicVertexBuffer=S,this.boundDynamicVertexBuffer2=M,this.boundDynamicVertexBuffer3=N,c.enableAttributes(ne,r);for(const ee of f)ee.enableAttributes(ne,r);S&&S.enableAttributes(ne,r),M&&M.enableAttributes(ne,r),N&&N.enableAttributes(ne,r),c.bind(),c.setVertexAttribPointers(ne,r,b);for(const ee of f)ee.bind(),ee.setVertexAttribPointers(ne,r,b);S&&(S.bind(),S.setVertexAttribPointers(ne,r,b)),y&&y.bind(),M&&(M.bind(),M.setVertexAttribPointers(ne,r,b)),N&&(N.bind(),N.setVertexAttribPointers(ne,r,b)),q.currentNumAttributes=j}destroy(){this.vao&&(this.context.deleteVertexArray(this.vao),this.vao=null)}}const ou=(w,r,c,f,y)=>({u_texture:0,u_ele_delta:w,u_fog_matrix:r,u_fog_color:c?c.properties.get("fog-color"):o.bq.white,u_fog_ground_blend:c?c.properties.get("fog-ground-blend"):1,u_fog_ground_blend_opacity:y?0:c?c.calculateFogBlendOpacity(f):0,u_horizon_color:c?c.properties.get("horizon-color"):o.bq.white,u_horizon_fog_blend:c?c.properties.get("horizon-fog-blend"):1,u_is_globe_mode:y?1:0}),Pl={mainMatrix:"u_projection_matrix",tileMercatorCoords:"u_projection_tile_mercator_coords",clippingPlane:"u_projection_clipping_plane",projectionTransition:"u_projection_transition",fallbackMatrix:"u_projection_fallback_matrix"};function $s(w){const r=[];for(let c=0;c<w.length;c++){if(w[c]===null)continue;const f=w[c].split(" ");r.push(f.pop())}return r}class La{constructor(r,c,f,y,b,S,M,N,j=[]){const q=r.gl;this.program=q.createProgram();const ne=$s(c.staticAttributes),ee=f?f.getBinderAttributes():[],Ae=ne.concat(ee),ve=Jn.prelude.staticUniforms?$s(Jn.prelude.staticUniforms):[],ke=M.staticUniforms?$s(M.staticUniforms):[],Oe=c.staticUniforms?$s(c.staticUniforms):[],Qe=f?f.getBinderUniforms():[],Ge=ve.concat(ke).concat(Oe).concat(Qe),ot=[];for(const Pt of Ge)ot.indexOf(Pt)<0&&ot.push(Pt);const Ze=f?f.defines():[];Ei(q)&&Ze.unshift("#version 300 es"),b&&Ze.push("#define OVERDRAW_INSPECTOR;"),S&&Ze.push("#define TERRAIN3D;"),N&&Ze.push(N),j&&Ze.push(...j);let ct=Ze.concat(Jn.prelude.fragmentSource,M.fragmentSource,c.fragmentSource).join(`
`),dt=Ze.concat(Jn.prelude.vertexSource,M.vertexSource,c.vertexSource).join(`
`);Ei(q)||(ct=(function(Pt){return Pt.replace(/\bin\s/g,"varying ").replace("out highp vec4 fragColor;","").replace(/fragColor/g,"gl_FragColor").replace(/texture\(/g,"texture2D(")})(ct),dt=(function(Pt){return Pt.replace(/\bin\s/g,"attribute ").replace(/\bout\s/g,"varying ").replace(/texture\(/g,"texture2D(")})(dt));const it=q.createShader(q.FRAGMENT_SHADER);if(q.isContextLost())return void(this.failedToCreate=!0);if(q.shaderSource(it,ct),q.compileShader(it),!q.getShaderParameter(it,q.COMPILE_STATUS))throw new Error(`Could not compile fragment shader: ${q.getShaderInfoLog(it)}`);q.attachShader(this.program,it);const _t=q.createShader(q.VERTEX_SHADER);if(q.isContextLost())return void(this.failedToCreate=!0);if(q.shaderSource(_t,dt),q.compileShader(_t),!q.getShaderParameter(_t,q.COMPILE_STATUS))throw new Error(`Could not compile vertex shader: ${q.getShaderInfoLog(_t)}`);q.attachShader(this.program,_t),this.attributes={};const Dt={};this.numAttributes=Ae.length;for(let Pt=0;Pt<this.numAttributes;Pt++)Ae[Pt]&&(q.bindAttribLocation(this.program,Pt,Ae[Pt]),this.attributes[Ae[Pt]]=Pt);if(q.linkProgram(this.program),!q.getProgramParameter(this.program,q.LINK_STATUS))throw new Error(`Program failed to link: ${q.getProgramInfoLog(this.program)}`);q.deleteShader(_t),q.deleteShader(it);for(let Pt=0;Pt<ot.length;Pt++){const Rt=ot[Pt];if(Rt&&!Dt[Rt]){const Qt=q.getUniformLocation(this.program,Rt);Qt&&(Dt[Rt]=Qt)}}this.fixedUniforms=y(r,Dt),this.terrainUniforms=((Pt,Rt)=>({u_depth:new o.b$(Pt,Rt.u_depth),u_terrain:new o.b$(Pt,Rt.u_terrain),u_terrain_dim:new o.br(Pt,Rt.u_terrain_dim),u_terrain_matrix:new o.c1(Pt,Rt.u_terrain_matrix),u_terrain_unpack:new o.c2(Pt,Rt.u_terrain_unpack),u_terrain_exaggeration:new o.br(Pt,Rt.u_terrain_exaggeration)}))(r,Dt),this.projectionUniforms=((Pt,Rt)=>({u_projection_matrix:new o.c1(Pt,Rt.u_projection_matrix),u_projection_tile_mercator_coords:new o.c2(Pt,Rt.u_projection_tile_mercator_coords),u_projection_clipping_plane:new o.c2(Pt,Rt.u_projection_clipping_plane),u_projection_transition:new o.br(Pt,Rt.u_projection_transition),u_projection_fallback_matrix:new o.c1(Pt,Rt.u_projection_fallback_matrix)}))(r,Dt),this.binderUniforms=f?f.getUniforms(r,Dt):[]}draw(r,c,f,y,b,S,M,N,j,q,ne,ee,Ae,ve,ke,Oe,Qe,Ge,ot){const Ze=r.gl;if(this.failedToCreate)return;if(r.program.set(this.program),r.setDepthMode(f),r.setStencilMode(y),r.setColorMode(b),r.setCullFace(S),N){r.activeTexture.set(Ze.TEXTURE2),Ze.bindTexture(Ze.TEXTURE_2D,N.depthTexture),r.activeTexture.set(Ze.TEXTURE3),Ze.bindTexture(Ze.TEXTURE_2D,N.texture);for(const dt in this.terrainUniforms)this.terrainUniforms[dt].set(N[dt])}if(j)for(const dt in j)this.projectionUniforms[Pl[dt]].set(j[dt]);if(M)for(const dt in this.fixedUniforms)this.fixedUniforms[dt].set(M[dt]);Oe&&Oe.setUniforms(r,this.binderUniforms,ve,{zoom:ke});let ct=0;switch(c){case Ze.LINES:ct=2;break;case Ze.TRIANGLES:ct=3;break;case Ze.LINE_STRIP:ct=1}for(const dt of Ae.get()){const it=dt.vaos||(dt.vaos={});(it[q]||(it[q]=new Tl)).bind(r,this,ne,Oe?Oe.getPaintVertexBuffers():[],ee,dt.vertexOffset,Qe,Ge,ot),Ze.drawElements(c,dt.primitiveLength*ct,Ze.UNSIGNED_SHORT,dt.primitiveOffset*ct*2)}}}function dl(w,r,c){const f=1/o.aO(c,1,r.transform.tileZoom),y=Math.pow(2,c.tileID.overscaledZ),b=c.tileSize*Math.pow(2,r.transform.tileZoom)/y,S=b*(c.tileID.canonical.x+c.tileID.wrap*y),M=b*c.tileID.canonical.y;return{u_image:0,u_texsize:c.imageAtlasTexture.size,u_scale:[f,w.fromScale,w.toScale],u_fade:w.t,u_pixel_coord_upper:[S>>16,M>>16],u_pixel_coord_lower:[65535&S,65535&M]}}const LA=(w,r,c,f)=>{const y=w.style.light,b=y.properties.get("position"),S=[b.x,b.y,b.z],M=o.c5();y.properties.get("anchor")==="viewport"&&o.c6(M,w.transform.bearingInRadians),o.c7(S,S,M);const N=w.transform.transformLightDirection(S),j=y.properties.get("color");return{u_lightpos:S,u_lightpos_globe:N,u_lightintensity:y.properties.get("intensity"),u_lightcolor:[j.r,j.g,j.b],u_vertical_gradient:+r,u_opacity:c,u_fill_translate:f}},Bo=(w,r,c,f,y,b,S)=>o.e(LA(w,r,c,f),dl(b,w,S),{u_height_factor:-Math.pow(2,y.overscaledZ)/S.tileSize/8}),Ll=(w,r,c,f)=>o.e(dl(r,w,c),{u_fill_translate:f}),oA=(w,r)=>({u_world:w,u_fill_translate:r}),aA=(w,r,c,f,y)=>o.e(Ll(w,r,c,y),{u_world:f}),Ml=(w,r,c,f,y)=>{const b=w.transform;let S,M,N=0;if(c.paint.get("circle-pitch-alignment")==="map"){const j=o.aO(r,1,b.zoom);S=!0,M=[j,j],N=j/(o.a5*Math.pow(2,r.tileID.overscaledZ))*2*Math.PI*y}else S=!1,M=b.pixelsToGLUnits;return{u_camera_to_center_distance:b.cameraToCenterDistance,u_scale_with_map:+(c.paint.get("circle-pitch-scale")==="map"),u_pitch_with_map:+S,u_device_pixel_ratio:w.pixelRatio,u_extrude_scale:M,u_globe_extrude_scale:N,u_translate:f}},Ws=w=>({u_pixel_extrude_scale:[1/w.width,1/w.height]}),qo=w=>({u_viewport_size:[w.width,w.height]}),Co=(w,r=1)=>({u_color:w,u_overlay:0,u_overlay_scale:r}),ga=(w,r,c,f)=>{const y=o.aO(w,1,r)/(o.a5*Math.pow(2,w.tileID.overscaledZ))*2*Math.PI*f;return{u_extrude_scale:o.aO(w,1,r),u_intensity:c,u_globe_extrude_scale:y}},fl=(w,r,c,f)=>{const y=o.N();o.c8(y,0,w.width,w.height,0,0,1);const b=w.context.gl;return{u_matrix:y,u_world:[b.drawingBufferWidth,b.drawingBufferHeight],u_image:c,u_color_ramp:f,u_opacity:r.paint.get("heatmap-opacity")}},Ma=(w,r,c)=>{const f=c.paint.get("hillshade-accent-color");let y;switch(c.paint.get("hillshade-method")){case"basic":y=4;break;case"combined":y=1;break;case"igor":y=2;break;case"multidirectional":y=3;break;default:y=0}const b=c.getIlluminationProperties();for(let S=0;S<b.directionRadians.length;S++)c.paint.get("hillshade-illumination-anchor")==="viewport"&&(b.directionRadians[S]+=w.transform.bearingInRadians);return{u_image:0,u_latrange:kl(0,r.tileID),u_exaggeration:c.paint.get("hillshade-exaggeration"),u_altitudes:b.altitudeRadians,u_azimuths:b.directionRadians,u_accent:f,u_method:y,u_highlights:b.highlightColor,u_shadows:b.shadowColor}},oc=(w,r)=>{const c=r.stride,f=o.N();return o.c8(f,0,o.a5,-o.a5,0,0,1),o.O(f,f,[0,-o.a5,0]),{u_matrix:f,u_image:1,u_dimension:[c,c],u_zoom:w.overscaledZ,u_unpack:r.getUnpackVector()}};function kl(w,r){const c=Math.pow(2,r.canonical.z),f=r.canonical.y;return[new o.ab(0,f/c).toLngLat().lat,new o.ab(0,(f+1)/c).toLngLat().lat]}const ss=(w,r,c=0)=>({u_image:0,u_unpack:r.getUnpackVector(),u_dimension:[r.stride,r.stride],u_elevation_stops:1,u_color_stops:4,u_color_ramp_size:c,u_opacity:w.paint.get("color-relief-opacity")}),pl=(w,r,c,f)=>{const y=w.transform;return{u_translation:ac(w,r,c),u_ratio:f/o.aO(r,1,y.zoom),u_device_pixel_ratio:w.pixelRatio,u_units_to_pixels:[1/y.pixelsToGLUnits[0],1/y.pixelsToGLUnits[1]]}},ml=(w,r,c,f,y)=>o.e(pl(w,r,c,f),{u_image:0,u_image_height:y}),ya=(w,r,c,f,y)=>{const b=w.transform,S=ho(r,b);return{u_translation:ac(w,r,c),u_texsize:r.imageAtlasTexture.size,u_ratio:f/o.aO(r,1,b.zoom),u_device_pixel_ratio:w.pixelRatio,u_image:0,u_scale:[S,y.fromScale,y.toScale],u_fade:y.t,u_units_to_pixels:[1/b.pixelsToGLUnits[0],1/b.pixelsToGLUnits[1]]}},Pc=(w,r,c,f,y)=>{const b=ho(r,w.transform);return o.e(pl(w,r,c,f),{u_tileratio:b,u_crossfade_from:y.fromScale,u_crossfade_to:y.toScale,u_image:0,u_mix:y.t,u_lineatlas_width:w.lineAtlas.width,u_lineatlas_height:w.lineAtlas.height})},Ul=(w,r,c,f,y,b)=>{const S=ho(r,w.transform);return o.e(pl(w,r,c,f),{u_image:0,u_image_height:b,u_tileratio:S,u_crossfade_from:y.fromScale,u_crossfade_to:y.toScale,u_image_dash:1,u_mix:y.t,u_lineatlas_width:w.lineAtlas.width,u_lineatlas_height:w.lineAtlas.height})};function ho(w,r){return 1/o.aO(w,1,r.tileZoom)}function ac(w,r,c){return o.aP(w.transform,r,c.paint.get("line-translate"),c.paint.get("line-translate-anchor"))}const gl=(w,r,c,f,y)=>{return{u_tl_parent:w,u_scale_parent:r,u_buffer_scale:1,u_fade_t:c.mix,u_opacity:c.opacity*f.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:f.paint.get("raster-brightness-min"),u_brightness_high:f.paint.get("raster-brightness-max"),u_saturation_factor:(S=f.paint.get("raster-saturation"),S>0?1-1/(1.001-S):-S),u_contrast_factor:(b=f.paint.get("raster-contrast"),b>0?1/(1-b):1+b),u_spin_weights:Dl(f.paint.get("raster-hue-rotate")),u_coords_top:[y[0].x,y[0].y,y[1].x,y[1].y],u_coords_bottom:[y[3].x,y[3].y,y[2].x,y[2].y]};var b,S};function Dl(w){w*=Math.PI/180;const r=Math.sin(w),c=Math.cos(w);return[(2*c+1)/3,(-Math.sqrt(3)*r-c+1)/3,(Math.sqrt(3)*r-c+1)/3]}const Rl=(w,r,c,f,y,b,S,M,N,j,q,ne,ee)=>{const Ae=S.transform;return{u_is_size_zoom_constant:+(w==="constant"||w==="source"),u_is_size_feature_constant:+(w==="constant"||w==="camera"),u_size_t:r?r.uSizeT:0,u_size:r?r.uSize:0,u_camera_to_center_distance:Ae.cameraToCenterDistance,u_pitch:Ae.pitch/360*2*Math.PI,u_rotate_symbol:+c,u_aspect_ratio:Ae.width/Ae.height,u_fade_change:S.options.fadeDuration?S.symbolFadeChange:1,u_label_plane_matrix:M,u_coord_matrix:N,u_is_text:+q,u_pitch_with_map:+f,u_is_along_line:y,u_is_variable_anchor:b,u_texsize:ne,u_texture:0,u_translation:j,u_pitched_scale:ee}},Nl=(w,r,c,f,y,b,S,M,N,j,q,ne,ee,Ae)=>{const ve=S.transform;return o.e(Rl(w,r,c,f,y,b,S,M,N,j,q,ne,Ae),{u_gamma_scale:f?Math.cos(ve.pitch*Math.PI/180)*ve.cameraToCenterDistance:1,u_device_pixel_ratio:S.pixelRatio,u_is_halo:1})},$o=(w,r,c,f,y,b,S,M,N,j,q,ne,ee)=>o.e(Nl(w,r,c,f,y,b,S,M,N,j,!0,q,0,ee),{u_texsize_icon:ne,u_texture_icon:1}),lc=(w,r)=>({u_opacity:w,u_color:r}),os=(w,r,c,f,y)=>o.e((function(b,S,M,N){const j=M.imageManager.getPattern(b.from.toString()),q=M.imageManager.getPattern(b.to.toString()),{width:ne,height:ee}=M.imageManager.getPixelSize(),Ae=Math.pow(2,N.tileID.overscaledZ),ve=N.tileSize*Math.pow(2,M.transform.tileZoom)/Ae,ke=ve*(N.tileID.canonical.x+N.tileID.wrap*Ae),Oe=ve*N.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:j.tl,u_pattern_br_a:j.br,u_pattern_tl_b:q.tl,u_pattern_br_b:q.br,u_texsize:[ne,ee],u_mix:S.t,u_pattern_size_a:j.displaySize,u_pattern_size_b:q.displaySize,u_scale_a:S.fromScale,u_scale_b:S.toScale,u_tile_units_to_pixels:1/o.aO(N,1,M.transform.tileZoom),u_pixel_coord_upper:[ke>>16,Oe>>16],u_pixel_coord_lower:[65535&ke,65535&Oe]}})(c,y,r,f),{u_opacity:w}),Eo=(w,r)=>{},si={fillExtrusion:(w,r)=>({u_lightpos:new o.c3(w,r.u_lightpos),u_lightpos_globe:new o.c3(w,r.u_lightpos_globe),u_lightintensity:new o.br(w,r.u_lightintensity),u_lightcolor:new o.c3(w,r.u_lightcolor),u_vertical_gradient:new o.br(w,r.u_vertical_gradient),u_opacity:new o.br(w,r.u_opacity),u_fill_translate:new o.c4(w,r.u_fill_translate)}),fillExtrusionPattern:(w,r)=>({u_lightpos:new o.c3(w,r.u_lightpos),u_lightpos_globe:new o.c3(w,r.u_lightpos_globe),u_lightintensity:new o.br(w,r.u_lightintensity),u_lightcolor:new o.c3(w,r.u_lightcolor),u_vertical_gradient:new o.br(w,r.u_vertical_gradient),u_height_factor:new o.br(w,r.u_height_factor),u_opacity:new o.br(w,r.u_opacity),u_fill_translate:new o.c4(w,r.u_fill_translate),u_image:new o.b$(w,r.u_image),u_texsize:new o.c4(w,r.u_texsize),u_pixel_coord_upper:new o.c4(w,r.u_pixel_coord_upper),u_pixel_coord_lower:new o.c4(w,r.u_pixel_coord_lower),u_scale:new o.c3(w,r.u_scale),u_fade:new o.br(w,r.u_fade)}),fill:(w,r)=>({u_fill_translate:new o.c4(w,r.u_fill_translate)}),fillPattern:(w,r)=>({u_image:new o.b$(w,r.u_image),u_texsize:new o.c4(w,r.u_texsize),u_pixel_coord_upper:new o.c4(w,r.u_pixel_coord_upper),u_pixel_coord_lower:new o.c4(w,r.u_pixel_coord_lower),u_scale:new o.c3(w,r.u_scale),u_fade:new o.br(w,r.u_fade),u_fill_translate:new o.c4(w,r.u_fill_translate)}),fillOutline:(w,r)=>({u_world:new o.c4(w,r.u_world),u_fill_translate:new o.c4(w,r.u_fill_translate)}),fillOutlinePattern:(w,r)=>({u_world:new o.c4(w,r.u_world),u_image:new o.b$(w,r.u_image),u_texsize:new o.c4(w,r.u_texsize),u_pixel_coord_upper:new o.c4(w,r.u_pixel_coord_upper),u_pixel_coord_lower:new o.c4(w,r.u_pixel_coord_lower),u_scale:new o.c3(w,r.u_scale),u_fade:new o.br(w,r.u_fade),u_fill_translate:new o.c4(w,r.u_fill_translate)}),circle:(w,r)=>({u_camera_to_center_distance:new o.br(w,r.u_camera_to_center_distance),u_scale_with_map:new o.b$(w,r.u_scale_with_map),u_pitch_with_map:new o.b$(w,r.u_pitch_with_map),u_extrude_scale:new o.c4(w,r.u_extrude_scale),u_device_pixel_ratio:new o.br(w,r.u_device_pixel_ratio),u_globe_extrude_scale:new o.br(w,r.u_globe_extrude_scale),u_translate:new o.c4(w,r.u_translate)}),collisionBox:(w,r)=>({u_pixel_extrude_scale:new o.c4(w,r.u_pixel_extrude_scale)}),collisionCircle:(w,r)=>({u_viewport_size:new o.c4(w,r.u_viewport_size)}),debug:(w,r)=>({u_color:new o.c0(w,r.u_color),u_overlay:new o.b$(w,r.u_overlay),u_overlay_scale:new o.br(w,r.u_overlay_scale)}),depth:Eo,clippingMask:Eo,heatmap:(w,r)=>({u_extrude_scale:new o.br(w,r.u_extrude_scale),u_intensity:new o.br(w,r.u_intensity),u_globe_extrude_scale:new o.br(w,r.u_globe_extrude_scale)}),heatmapTexture:(w,r)=>({u_matrix:new o.c1(w,r.u_matrix),u_world:new o.c4(w,r.u_world),u_image:new o.b$(w,r.u_image),u_color_ramp:new o.b$(w,r.u_color_ramp),u_opacity:new o.br(w,r.u_opacity)}),hillshade:(w,r)=>({u_image:new o.b$(w,r.u_image),u_latrange:new o.c4(w,r.u_latrange),u_exaggeration:new o.br(w,r.u_exaggeration),u_altitudes:new o.ca(w,r.u_altitudes),u_azimuths:new o.ca(w,r.u_azimuths),u_accent:new o.c0(w,r.u_accent),u_method:new o.b$(w,r.u_method),u_shadows:new o.c9(w,r.u_shadows),u_highlights:new o.c9(w,r.u_highlights)}),hillshadePrepare:(w,r)=>({u_matrix:new o.c1(w,r.u_matrix),u_image:new o.b$(w,r.u_image),u_dimension:new o.c4(w,r.u_dimension),u_zoom:new o.br(w,r.u_zoom),u_unpack:new o.c2(w,r.u_unpack)}),colorRelief:(w,r)=>({u_image:new o.b$(w,r.u_image),u_unpack:new o.c2(w,r.u_unpack),u_dimension:new o.c4(w,r.u_dimension),u_elevation_stops:new o.b$(w,r.u_elevation_stops),u_color_stops:new o.b$(w,r.u_color_stops),u_color_ramp_size:new o.b$(w,r.u_color_ramp_size),u_opacity:new o.br(w,r.u_opacity)}),line:(w,r)=>({u_translation:new o.c4(w,r.u_translation),u_ratio:new o.br(w,r.u_ratio),u_device_pixel_ratio:new o.br(w,r.u_device_pixel_ratio),u_units_to_pixels:new o.c4(w,r.u_units_to_pixels)}),lineGradient:(w,r)=>({u_translation:new o.c4(w,r.u_translation),u_ratio:new o.br(w,r.u_ratio),u_device_pixel_ratio:new o.br(w,r.u_device_pixel_ratio),u_units_to_pixels:new o.c4(w,r.u_units_to_pixels),u_image:new o.b$(w,r.u_image),u_image_height:new o.br(w,r.u_image_height)}),linePattern:(w,r)=>({u_translation:new o.c4(w,r.u_translation),u_texsize:new o.c4(w,r.u_texsize),u_ratio:new o.br(w,r.u_ratio),u_device_pixel_ratio:new o.br(w,r.u_device_pixel_ratio),u_image:new o.b$(w,r.u_image),u_units_to_pixels:new o.c4(w,r.u_units_to_pixels),u_scale:new o.c3(w,r.u_scale),u_fade:new o.br(w,r.u_fade)}),lineSDF:(w,r)=>({u_translation:new o.c4(w,r.u_translation),u_ratio:new o.br(w,r.u_ratio),u_device_pixel_ratio:new o.br(w,r.u_device_pixel_ratio),u_units_to_pixels:new o.c4(w,r.u_units_to_pixels),u_image:new o.b$(w,r.u_image),u_mix:new o.br(w,r.u_mix),u_tileratio:new o.br(w,r.u_tileratio),u_crossfade_from:new o.br(w,r.u_crossfade_from),u_crossfade_to:new o.br(w,r.u_crossfade_to),u_lineatlas_width:new o.br(w,r.u_lineatlas_width),u_lineatlas_height:new o.br(w,r.u_lineatlas_height)}),lineGradientSDF:(w,r)=>({u_translation:new o.c4(w,r.u_translation),u_ratio:new o.br(w,r.u_ratio),u_device_pixel_ratio:new o.br(w,r.u_device_pixel_ratio),u_units_to_pixels:new o.c4(w,r.u_units_to_pixels),u_image:new o.b$(w,r.u_image),u_image_height:new o.br(w,r.u_image_height),u_tileratio:new o.br(w,r.u_tileratio),u_crossfade_from:new o.br(w,r.u_crossfade_from),u_crossfade_to:new o.br(w,r.u_crossfade_to),u_image_dash:new o.b$(w,r.u_image_dash),u_mix:new o.br(w,r.u_mix),u_lineatlas_width:new o.br(w,r.u_lineatlas_width),u_lineatlas_height:new o.br(w,r.u_lineatlas_height)}),raster:(w,r)=>({u_tl_parent:new o.c4(w,r.u_tl_parent),u_scale_parent:new o.br(w,r.u_scale_parent),u_buffer_scale:new o.br(w,r.u_buffer_scale),u_fade_t:new o.br(w,r.u_fade_t),u_opacity:new o.br(w,r.u_opacity),u_image0:new o.b$(w,r.u_image0),u_image1:new o.b$(w,r.u_image1),u_brightness_low:new o.br(w,r.u_brightness_low),u_brightness_high:new o.br(w,r.u_brightness_high),u_saturation_factor:new o.br(w,r.u_saturation_factor),u_contrast_factor:new o.br(w,r.u_contrast_factor),u_spin_weights:new o.c3(w,r.u_spin_weights),u_coords_top:new o.c2(w,r.u_coords_top),u_coords_bottom:new o.c2(w,r.u_coords_bottom)}),symbolIcon:(w,r)=>({u_is_size_zoom_constant:new o.b$(w,r.u_is_size_zoom_constant),u_is_size_feature_constant:new o.b$(w,r.u_is_size_feature_constant),u_size_t:new o.br(w,r.u_size_t),u_size:new o.br(w,r.u_size),u_camera_to_center_distance:new o.br(w,r.u_camera_to_center_distance),u_pitch:new o.br(w,r.u_pitch),u_rotate_symbol:new o.b$(w,r.u_rotate_symbol),u_aspect_ratio:new o.br(w,r.u_aspect_ratio),u_fade_change:new o.br(w,r.u_fade_change),u_label_plane_matrix:new o.c1(w,r.u_label_plane_matrix),u_coord_matrix:new o.c1(w,r.u_coord_matrix),u_is_text:new o.b$(w,r.u_is_text),u_pitch_with_map:new o.b$(w,r.u_pitch_with_map),u_is_along_line:new o.b$(w,r.u_is_along_line),u_is_variable_anchor:new o.b$(w,r.u_is_variable_anchor),u_texsize:new o.c4(w,r.u_texsize),u_texture:new o.b$(w,r.u_texture),u_translation:new o.c4(w,r.u_translation),u_pitched_scale:new o.br(w,r.u_pitched_scale)}),symbolSDF:(w,r)=>({u_is_size_zoom_constant:new o.b$(w,r.u_is_size_zoom_constant),u_is_size_feature_constant:new o.b$(w,r.u_is_size_feature_constant),u_size_t:new o.br(w,r.u_size_t),u_size:new o.br(w,r.u_size),u_camera_to_center_distance:new o.br(w,r.u_camera_to_center_distance),u_pitch:new o.br(w,r.u_pitch),u_rotate_symbol:new o.b$(w,r.u_rotate_symbol),u_aspect_ratio:new o.br(w,r.u_aspect_ratio),u_fade_change:new o.br(w,r.u_fade_change),u_label_plane_matrix:new o.c1(w,r.u_label_plane_matrix),u_coord_matrix:new o.c1(w,r.u_coord_matrix),u_is_text:new o.b$(w,r.u_is_text),u_pitch_with_map:new o.b$(w,r.u_pitch_with_map),u_is_along_line:new o.b$(w,r.u_is_along_line),u_is_variable_anchor:new o.b$(w,r.u_is_variable_anchor),u_texsize:new o.c4(w,r.u_texsize),u_texture:new o.b$(w,r.u_texture),u_gamma_scale:new o.br(w,r.u_gamma_scale),u_device_pixel_ratio:new o.br(w,r.u_device_pixel_ratio),u_is_halo:new o.b$(w,r.u_is_halo),u_translation:new o.c4(w,r.u_translation),u_pitched_scale:new o.br(w,r.u_pitched_scale)}),symbolTextAndIcon:(w,r)=>({u_is_size_zoom_constant:new o.b$(w,r.u_is_size_zoom_constant),u_is_size_feature_constant:new o.b$(w,r.u_is_size_feature_constant),u_size_t:new o.br(w,r.u_size_t),u_size:new o.br(w,r.u_size),u_camera_to_center_distance:new o.br(w,r.u_camera_to_center_distance),u_pitch:new o.br(w,r.u_pitch),u_rotate_symbol:new o.b$(w,r.u_rotate_symbol),u_aspect_ratio:new o.br(w,r.u_aspect_ratio),u_fade_change:new o.br(w,r.u_fade_change),u_label_plane_matrix:new o.c1(w,r.u_label_plane_matrix),u_coord_matrix:new o.c1(w,r.u_coord_matrix),u_is_text:new o.b$(w,r.u_is_text),u_pitch_with_map:new o.b$(w,r.u_pitch_with_map),u_is_along_line:new o.b$(w,r.u_is_along_line),u_is_variable_anchor:new o.b$(w,r.u_is_variable_anchor),u_texsize:new o.c4(w,r.u_texsize),u_texsize_icon:new o.c4(w,r.u_texsize_icon),u_texture:new o.b$(w,r.u_texture),u_texture_icon:new o.b$(w,r.u_texture_icon),u_gamma_scale:new o.br(w,r.u_gamma_scale),u_device_pixel_ratio:new o.br(w,r.u_device_pixel_ratio),u_is_halo:new o.b$(w,r.u_is_halo),u_translation:new o.c4(w,r.u_translation),u_pitched_scale:new o.br(w,r.u_pitched_scale)}),background:(w,r)=>({u_opacity:new o.br(w,r.u_opacity),u_color:new o.c0(w,r.u_color)}),backgroundPattern:(w,r)=>({u_opacity:new o.br(w,r.u_opacity),u_image:new o.b$(w,r.u_image),u_pattern_tl_a:new o.c4(w,r.u_pattern_tl_a),u_pattern_br_a:new o.c4(w,r.u_pattern_br_a),u_pattern_tl_b:new o.c4(w,r.u_pattern_tl_b),u_pattern_br_b:new o.c4(w,r.u_pattern_br_b),u_texsize:new o.c4(w,r.u_texsize),u_mix:new o.br(w,r.u_mix),u_pattern_size_a:new o.c4(w,r.u_pattern_size_a),u_pattern_size_b:new o.c4(w,r.u_pattern_size_b),u_scale_a:new o.br(w,r.u_scale_a),u_scale_b:new o.br(w,r.u_scale_b),u_pixel_coord_upper:new o.c4(w,r.u_pixel_coord_upper),u_pixel_coord_lower:new o.c4(w,r.u_pixel_coord_lower),u_tile_units_to_pixels:new o.br(w,r.u_tile_units_to_pixels)}),terrain:(w,r)=>({u_texture:new o.b$(w,r.u_texture),u_ele_delta:new o.br(w,r.u_ele_delta),u_fog_matrix:new o.c1(w,r.u_fog_matrix),u_fog_color:new o.c0(w,r.u_fog_color),u_fog_ground_blend:new o.br(w,r.u_fog_ground_blend),u_fog_ground_blend_opacity:new o.br(w,r.u_fog_ground_blend_opacity),u_horizon_color:new o.c0(w,r.u_horizon_color),u_horizon_fog_blend:new o.br(w,r.u_horizon_fog_blend),u_is_globe_mode:new o.br(w,r.u_is_globe_mode)}),terrainDepth:(w,r)=>({u_ele_delta:new o.br(w,r.u_ele_delta)}),terrainCoords:(w,r)=>({u_texture:new o.b$(w,r.u_texture),u_terrain_coords_id:new o.br(w,r.u_terrain_coords_id),u_ele_delta:new o.br(w,r.u_ele_delta)}),projectionErrorMeasurement:(w,r)=>({u_input:new o.br(w,r.u_input),u_output_expected:new o.br(w,r.u_output_expected)}),atmosphere:(w,r)=>({u_sun_pos:new o.c3(w,r.u_sun_pos),u_atmosphere_blend:new o.br(w,r.u_atmosphere_blend),u_globe_position:new o.c3(w,r.u_globe_position),u_globe_radius:new o.br(w,r.u_globe_radius),u_inv_proj_matrix:new o.c1(w,r.u_inv_proj_matrix)}),sky:(w,r)=>({u_sky_color:new o.c0(w,r.u_sky_color),u_horizon_color:new o.c0(w,r.u_horizon_color),u_horizon:new o.c4(w,r.u_horizon),u_horizon_normal:new o.c4(w,r.u_horizon_normal),u_sky_horizon_blend:new o.br(w,r.u_sky_horizon_blend),u_sky_blend:new o.br(w,r.u_sky_blend)})};class _i{constructor(r,c,f){this.context=r;const y=r.gl;this.buffer=y.createBuffer(),this.dynamicDraw=!!f,this.context.unbindVAO(),r.bindElementBuffer.set(this.buffer),y.bufferData(y.ELEMENT_ARRAY_BUFFER,c.arrayBuffer,this.dynamicDraw?y.DYNAMIC_DRAW:y.STATIC_DRAW),this.dynamicDraw||delete c.arrayBuffer}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(r){const c=this.context.gl;if(!this.dynamicDraw)throw new Error("Attempted to update data while not in dynamic mode.");this.context.unbindVAO(),this.bind(),c.bufferSubData(c.ELEMENT_ARRAY_BUFFER,0,r.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const Yi={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class bs{constructor(r,c,f,y){this.length=c.length,this.attributes=f,this.itemSize=c.bytesPerElement,this.dynamicDraw=y,this.context=r;const b=r.gl;this.buffer=b.createBuffer(),r.bindVertexBuffer.set(this.buffer),b.bufferData(b.ARRAY_BUFFER,c.arrayBuffer,this.dynamicDraw?b.DYNAMIC_DRAW:b.STATIC_DRAW),this.dynamicDraw||delete c.arrayBuffer}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(r){if(r.length!==this.length)throw new Error(`Length of new data is ${r.length}, which doesn't match current length of ${this.length}`);const c=this.context.gl;this.bind(),c.bufferSubData(c.ARRAY_BUFFER,0,r.arrayBuffer)}enableAttributes(r,c){for(let f=0;f<this.attributes.length;f++){const y=c.attributes[this.attributes[f].name];y!==void 0&&r.enableVertexAttribArray(y)}}setVertexAttribPointers(r,c,f){for(let y=0;y<this.attributes.length;y++){const b=this.attributes[y],S=c.attributes[b.name];S!==void 0&&r.vertexAttribPointer(S,b.components,r[Yi[b.type]],!1,this.itemSize,b.offset+this.itemSize*(f||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}class Pn{constructor(r){this.gl=r.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(r){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class Lc extends Pn{getDefault(){return o.bq.transparent}set(r){const c=this.current;(r.r!==c.r||r.g!==c.g||r.b!==c.b||r.a!==c.a||this.dirty)&&(this.gl.clearColor(r.r,r.g,r.b,r.a),this.current=r,this.dirty=!1)}}class cc extends Pn{getDefault(){return 1}set(r){(r!==this.current||this.dirty)&&(this.gl.clearDepth(r),this.current=r,this.dirty=!1)}}class ka extends Pn{getDefault(){return 0}set(r){(r!==this.current||this.dirty)&&(this.gl.clearStencil(r),this.current=r,this.dirty=!1)}}class MA extends Pn{getDefault(){return[!0,!0,!0,!0]}set(r){const c=this.current;(r[0]!==c[0]||r[1]!==c[1]||r[2]!==c[2]||r[3]!==c[3]||this.dirty)&&(this.gl.colorMask(r[0],r[1],r[2],r[3]),this.current=r,this.dirty=!1)}}class Ua extends Pn{getDefault(){return!0}set(r){(r!==this.current||this.dirty)&&(this.gl.depthMask(r),this.current=r,this.dirty=!1)}}class Mc extends Pn{getDefault(){return 255}set(r){(r!==this.current||this.dirty)&&(this.gl.stencilMask(r),this.current=r,this.dirty=!1)}}class kc extends Pn{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(r){const c=this.current;(r.func!==c.func||r.ref!==c.ref||r.mask!==c.mask||this.dirty)&&(this.gl.stencilFunc(r.func,r.ref,r.mask),this.current=r,this.dirty=!1)}}class fo extends Pn{getDefault(){const r=this.gl;return[r.KEEP,r.KEEP,r.KEEP]}set(r){const c=this.current;(r[0]!==c[0]||r[1]!==c[1]||r[2]!==c[2]||this.dirty)&&(this.gl.stencilOp(r[0],r[1],r[2]),this.current=r,this.dirty=!1)}}class Uc extends Pn{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;const c=this.gl;r?c.enable(c.STENCIL_TEST):c.disable(c.STENCIL_TEST),this.current=r,this.dirty=!1}}class Dc extends Pn{getDefault(){return[0,1]}set(r){const c=this.current;(r[0]!==c[0]||r[1]!==c[1]||this.dirty)&&(this.gl.depthRange(r[0],r[1]),this.current=r,this.dirty=!1)}}class au extends Pn{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;const c=this.gl;r?c.enable(c.DEPTH_TEST):c.disable(c.DEPTH_TEST),this.current=r,this.dirty=!1}}class yl extends Pn{getDefault(){return this.gl.LESS}set(r){(r!==this.current||this.dirty)&&(this.gl.depthFunc(r),this.current=r,this.dirty=!1)}}class kA extends Pn{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;const c=this.gl;r?c.enable(c.BLEND):c.disable(c.BLEND),this.current=r,this.dirty=!1}}class UA extends Pn{getDefault(){const r=this.gl;return[r.ONE,r.ZERO]}set(r){const c=this.current;(r[0]!==c[0]||r[1]!==c[1]||this.dirty)&&(this.gl.blendFunc(r[0],r[1]),this.current=r,this.dirty=!1)}}class lA extends Pn{getDefault(){return o.bq.transparent}set(r){const c=this.current;(r.r!==c.r||r.g!==c.g||r.b!==c.b||r.a!==c.a||this.dirty)&&(this.gl.blendColor(r.r,r.g,r.b,r.a),this.current=r,this.dirty=!1)}}class DA extends Pn{getDefault(){return this.gl.FUNC_ADD}set(r){(r!==this.current||this.dirty)&&(this.gl.blendEquation(r),this.current=r,this.dirty=!1)}}class Uu extends Pn{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;const c=this.gl;r?c.enable(c.CULL_FACE):c.disable(c.CULL_FACE),this.current=r,this.dirty=!1}}class Rc extends Pn{getDefault(){return this.gl.BACK}set(r){(r!==this.current||this.dirty)&&(this.gl.cullFace(r),this.current=r,this.dirty=!1)}}class So extends Pn{getDefault(){return this.gl.CCW}set(r){(r!==this.current||this.dirty)&&(this.gl.frontFace(r),this.current=r,this.dirty=!1)}}class cA extends Pn{getDefault(){return null}set(r){(r!==this.current||this.dirty)&&(this.gl.useProgram(r),this.current=r,this.dirty=!1)}}class lo extends Pn{getDefault(){return this.gl.TEXTURE0}set(r){(r!==this.current||this.dirty)&&(this.gl.activeTexture(r),this.current=r,this.dirty=!1)}}class pn extends Pn{getDefault(){const r=this.gl;return[0,0,r.drawingBufferWidth,r.drawingBufferHeight]}set(r){const c=this.current;(r[0]!==c[0]||r[1]!==c[1]||r[2]!==c[2]||r[3]!==c[3]||this.dirty)&&(this.gl.viewport(r[0],r[1],r[2],r[3]),this.current=r,this.dirty=!1)}}class AA extends Pn{getDefault(){return null}set(r){if(r===this.current&&!this.dirty)return;const c=this.gl;c.bindFramebuffer(c.FRAMEBUFFER,r),this.current=r,this.dirty=!1}}class Nc extends Pn{getDefault(){return null}set(r){if(r===this.current&&!this.dirty)return;const c=this.gl;c.bindRenderbuffer(c.RENDERBUFFER,r),this.current=r,this.dirty=!1}}class ch extends Pn{getDefault(){return null}set(r){if(r===this.current&&!this.dirty)return;const c=this.gl;c.bindTexture(c.TEXTURE_2D,r),this.current=r,this.dirty=!1}}class Ac extends Pn{getDefault(){return null}set(r){if(r===this.current&&!this.dirty)return;const c=this.gl;c.bindBuffer(c.ARRAY_BUFFER,r),this.current=r,this.dirty=!1}}class lu extends Pn{getDefault(){return null}set(r){const c=this.gl;c.bindBuffer(c.ELEMENT_ARRAY_BUFFER,r),this.current=r,this.dirty=!1}}class Ii extends Pn{getDefault(){return null}set(r){var c;if(r===this.current&&!this.dirty)return;const f=this.gl;Ei(f)?f.bindVertexArray(r):(c=f.getExtension("OES_vertex_array_object"))===null||c===void 0||c.bindVertexArrayOES(r),this.current=r,this.dirty=!1}}class cu extends Pn{getDefault(){return 4}set(r){if(r===this.current&&!this.dirty)return;const c=this.gl;c.pixelStorei(c.UNPACK_ALIGNMENT,r),this.current=r,this.dirty=!1}}class RA extends Pn{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;const c=this.gl;c.pixelStorei(c.UNPACK_PREMULTIPLY_ALPHA_WEBGL,r),this.current=r,this.dirty=!1}}class uc extends Pn{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;const c=this.gl;c.pixelStorei(c.UNPACK_FLIP_Y_WEBGL,r),this.current=r,this.dirty=!1}}class Ql extends Pn{constructor(r,c){super(r),this.context=r,this.parent=c}getDefault(){return null}}class Qc extends Ql{setDirty(){this.dirty=!0}set(r){if(r===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const c=this.gl;c.framebufferTexture2D(c.FRAMEBUFFER,c.COLOR_ATTACHMENT0,c.TEXTURE_2D,r,0),this.current=r,this.dirty=!1}}class Oc extends Ql{set(r){if(r===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const c=this.gl;c.framebufferRenderbuffer(c.FRAMEBUFFER,c.DEPTH_ATTACHMENT,c.RENDERBUFFER,r),this.current=r,this.dirty=!1}}class NA extends Ql{set(r){if(r===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const c=this.gl;c.framebufferRenderbuffer(c.FRAMEBUFFER,c.DEPTH_STENCIL_ATTACHMENT,c.RENDERBUFFER,r),this.current=r,this.dirty=!1}}const hc="Framebuffer is not complete";class Au{constructor(r,c,f,y,b){this.context=r,this.width=c,this.height=f;const S=r.gl,M=this.framebuffer=S.createFramebuffer();if(this.colorAttachment=new Qc(r,M),y)this.depthAttachment=b?new NA(r,M):new Oc(r,M);else if(b)throw new Error("Stencil cannot be set without depth");if(S.checkFramebufferStatus(S.FRAMEBUFFER)!==S.FRAMEBUFFER_COMPLETE)throw new Error(hc)}destroy(){const r=this.context.gl,c=this.colorAttachment.get();if(c&&r.deleteTexture(c),this.depthAttachment){const f=this.depthAttachment.get();f&&r.deleteRenderbuffer(f)}r.deleteFramebuffer(this.framebuffer)}}class Du{constructor(r){var c,f;if(this.gl=r,this.clearColor=new Lc(this),this.clearDepth=new cc(this),this.clearStencil=new ka(this),this.colorMask=new MA(this),this.depthMask=new Ua(this),this.stencilMask=new Mc(this),this.stencilFunc=new kc(this),this.stencilOp=new fo(this),this.stencilTest=new Uc(this),this.depthRange=new Dc(this),this.depthTest=new au(this),this.depthFunc=new yl(this),this.blend=new kA(this),this.blendFunc=new UA(this),this.blendColor=new lA(this),this.blendEquation=new DA(this),this.cullFace=new Uu(this),this.cullFaceSide=new Rc(this),this.frontFace=new So(this),this.program=new cA(this),this.activeTexture=new lo(this),this.viewport=new pn(this),this.bindFramebuffer=new AA(this),this.bindRenderbuffer=new Nc(this),this.bindTexture=new ch(this),this.bindVertexBuffer=new Ac(this),this.bindElementBuffer=new lu(this),this.bindVertexArray=new Ii(this),this.pixelStoreUnpack=new cu(this),this.pixelStoreUnpackPremultiplyAlpha=new RA(this),this.pixelStoreUnpackFlipY=new uc(this),this.extTextureFilterAnisotropic=r.getExtension("EXT_texture_filter_anisotropic")||r.getExtension("MOZ_EXT_texture_filter_anisotropic")||r.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=r.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.maxTextureSize=r.getParameter(r.MAX_TEXTURE_SIZE),Ei(r)){this.HALF_FLOAT=r.HALF_FLOAT;const y=r.getExtension("EXT_color_buffer_half_float");this.RGBA16F=(c=r.RGBA16F)!==null&&c!==void 0?c:y?.RGBA16F_EXT,this.RGB16F=(f=r.RGB16F)!==null&&f!==void 0?f:y?.RGB16F_EXT,r.getExtension("EXT_color_buffer_float")}else{r.getExtension("EXT_color_buffer_half_float"),r.getExtension("OES_texture_half_float_linear");const y=r.getExtension("OES_texture_half_float");this.HALF_FLOAT=y?.HALF_FLOAT_OES}}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.bindVertexArray.dirty=!0,this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(r,c){return new _i(this,r,c)}createVertexBuffer(r,c,f){return new bs(this,r,c,f)}createRenderbuffer(r,c,f){const y=this.gl,b=y.createRenderbuffer();return this.bindRenderbuffer.set(b),y.renderbufferStorage(y.RENDERBUFFER,r,c,f),this.bindRenderbuffer.set(null),b}createFramebuffer(r,c,f,y){return new Au(this,r,c,f,y)}clear({color:r,depth:c,stencil:f}){const y=this.gl;let b=0;r&&(b|=y.COLOR_BUFFER_BIT,this.clearColor.set(r),this.colorMask.set([!0,!0,!0,!0])),c!==void 0&&(b|=y.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(c),this.depthMask.set(!0)),f!==void 0&&(b|=y.STENCIL_BUFFER_BIT,this.clearStencil.set(f),this.stencilMask.set(255)),y.clear(b)}setCullFace(r){r.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(r.mode),this.frontFace.set(r.frontFace))}setDepthMode(r){r.func!==this.gl.ALWAYS||r.mask?(this.depthTest.set(!0),this.depthFunc.set(r.func),this.depthMask.set(r.mask),this.depthRange.set(r.range)):this.depthTest.set(!1)}setStencilMode(r){r.test.func!==this.gl.ALWAYS||r.mask?(this.stencilTest.set(!0),this.stencilMask.set(r.mask),this.stencilOp.set([r.fail,r.depthFail,r.pass]),this.stencilFunc.set({func:r.test.func,ref:r.ref,mask:r.test.mask})):this.stencilTest.set(!1)}setColorMode(r){o.bS(r.blendFunction,Nn.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(r.blendFunction),this.blendColor.set(r.blendColor)),this.colorMask.set(r.mask)}createVertexArray(){var r;return Ei(this.gl)?this.gl.createVertexArray():(r=this.gl.getExtension("OES_vertex_array_object"))===null||r===void 0?void 0:r.createVertexArrayOES()}deleteVertexArray(r){var c;return Ei(this.gl)?this.gl.deleteVertexArray(r):(c=this.gl.getExtension("OES_vertex_array_object"))===null||c===void 0?void 0:c.deleteVertexArrayOES(r)}unbindVAO(){this.bindVertexArray.set(null)}}let uA;function zc(w,r,c,f,y){const b=w.context,S=w.transform,M=b.gl,N=w.useProgram("collisionBox"),j=[];let q=0,ne=0;for(let Qe=0;Qe<f.length;Qe++){const Ge=f[Qe],ot=r.getTile(Ge).getBucket(c);if(!ot)continue;const Ze=y?ot.textCollisionBox:ot.iconCollisionBox,ct=ot.collisionCircleArray;ct.length>0&&(j.push({circleArray:ct,circleOffset:ne,coord:Ge}),q+=ct.length/4,ne=q),Ze&&N.draw(b,M.LINES,mn.disabled,bn.disabled,w.colorModeForRenderPass(),En.disabled,Ws(w.transform),w.style.map.terrain&&w.style.map.terrain.getTerrainData(Ge),S.getProjectionData({overscaledTileID:Ge,applyGlobeMatrix:!0,applyTerrainMatrix:!0}),c.id,Ze.layoutVertexBuffer,Ze.indexBuffer,Ze.segments,null,w.transform.zoom,null,null,Ze.collisionVertexBuffer)}if(!y||!j.length)return;const ee=w.useProgram("collisionCircle"),Ae=new o.cb;Ae.resize(4*q),Ae._trim();let ve=0;for(const Qe of j)for(let Ge=0;Ge<Qe.circleArray.length/4;Ge++){const ot=4*Ge,Ze=Qe.circleArray[ot+0],ct=Qe.circleArray[ot+1],dt=Qe.circleArray[ot+2],it=Qe.circleArray[ot+3];Ae.emplace(ve++,Ze,ct,dt,it,0),Ae.emplace(ve++,Ze,ct,dt,it,1),Ae.emplace(ve++,Ze,ct,dt,it,2),Ae.emplace(ve++,Ze,ct,dt,it,3)}(!uA||uA.length<2*q)&&(uA=(function(Qe){const Ge=2*Qe,ot=new o.cd;ot.resize(Ge),ot._trim();for(let Ze=0;Ze<Ge;Ze++){const ct=6*Ze;ot.uint16[ct+0]=4*Ze+0,ot.uint16[ct+1]=4*Ze+1,ot.uint16[ct+2]=4*Ze+2,ot.uint16[ct+3]=4*Ze+2,ot.uint16[ct+4]=4*Ze+3,ot.uint16[ct+5]=4*Ze+0}return ot})(q));const ke=b.createIndexBuffer(uA,!0),Oe=b.createVertexBuffer(Ae,o.cc.members,!0);for(const Qe of j){const Ge=qo(w.transform);ee.draw(b,M.TRIANGLES,mn.disabled,bn.disabled,w.colorModeForRenderPass(),En.disabled,Ge,w.style.map.terrain&&w.style.map.terrain.getTerrainData(Qe.coord),null,c.id,Oe,ke,o.aY.simpleSegment(0,2*Qe.circleOffset,Qe.circleArray.length,Qe.circleArray.length/2),null,w.transform.zoom,null,null,null)}Oe.destroy(),ke.destroy()}const QA=o.as(new Float32Array(16));function OA(w,r,c,f,y,b){const{horizontalAlign:S,verticalAlign:M}=o.aT(w);return new o.P((-(S-.5)*r/y+f[0])*b,(-(M-.5)*c/y+f[1])*b)}function dc(w,r,c,f,y,b){const S=r.tileAnchorPoint.add(new o.P(r.translation[0],r.translation[1]));if(r.pitchWithMap){let M=f.mult(b);c||(M=M.rotate(-y));const N=S.add(M);return dn(N.x,N.y,r.pitchedLabelPlaneMatrix,r.getElevation).point}if(c){const M=jn(r.tileAnchorPoint.x+1,r.tileAnchorPoint.y,r).point.sub(w),N=Math.atan(M.y/M.x)+(M.x<0?Math.PI:0);return w.add(f.rotate(N))}return w.add(f)}function hA(w,r,c,f,y,b,S,M,N,j,q,ne){const ee=w.text.placedSymbolArray,Ae=w.text.dynamicLayoutVertexArray,ve=w.icon.dynamicLayoutVertexArray,ke={};Ae.clear();for(let Oe=0;Oe<ee.length;Oe++){const Qe=ee.get(Oe),Ge=Qe.hidden||!Qe.crossTileID||w.allowVerticalPlacement&&!Qe.placedOrientation?null:f[Qe.crossTileID];if(Ge){const ot=new o.P(Qe.anchorX,Qe.anchorY),Ze={getElevation:ne,width:y.width,height:y.height,pitchedLabelPlaneMatrix:b,pitchWithMap:c,transform:y,tileAnchorPoint:ot,translation:j,unwrappedTileID:q},ct=c?ll(ot.x,ot.y,Ze):jn(ot.x,ot.y,Ze),dt=ol(y.cameraToCenterDistance,ct.signedDistanceFromCamera);let it=o.aB(w.textSizeData,M,Qe)*dt/o.aN;c&&(it*=w.tilePixelRatio/S);const{width:_t,height:Dt,anchor:Pt,textOffset:Rt,textBoxScale:Qt}=Ge,nr=OA(Pt,_t,Dt,Rt,Qt,it),Ar=y.getPitchedTextCorrection(ot.x+j[0],ot.y+j[1],q),rr=dc(ct.point,Ze,r,nr,-y.bearingInRadians,Ar),Dr=w.allowVerticalPlacement&&Qe.placedOrientation===o.aA.vertical?Math.PI/2:0;for(let vn=0;vn<Qe.numGlyphs;vn++)o.aH(Ae,rr,Dr);N&&Qe.associatedIconIndex>=0&&(ke[Qe.associatedIconIndex]={shiftedAnchor:rr,angle:Dr})}else Ba(Qe.numGlyphs,Ae)}if(N){ve.clear();const Oe=w.icon.placedSymbolArray;for(let Qe=0;Qe<Oe.length;Qe++){const Ge=Oe.get(Qe);if(Ge.hidden)Ba(Ge.numGlyphs,ve);else{const ot=ke[Qe];if(ot)for(let Ze=0;Ze<Ge.numGlyphs;Ze++)o.aH(ve,ot.shiftedAnchor,ot.angle);else Ba(Ge.numGlyphs,ve)}}w.icon.dynamicLayoutVertexBuffer.updateData(ve)}w.text.dynamicLayoutVertexBuffer.updateData(Ae)}function Ru(w,r,c){return c.iconsInText&&r?"symbolTextAndIcon":w?"symbolSDF":"symbolIcon"}function dA(w,r,c,f,y,b,S,M,N,j,q,ne,ee){const Ae=w.context,ve=Ae.gl,ke=w.transform,Oe=M==="map",Qe=N==="map",Ge=M!=="viewport"&&c.layout.get("symbol-placement")!=="point",ot=Oe&&!Qe&&!Ge,Ze=!c.layout.get("symbol-sort-key").isConstant();let ct=!1;const dt=w.getDepthModeForSublayer(0,mn.ReadOnly),it=c._unevaluatedLayout.hasValue("text-variable-anchor")||c._unevaluatedLayout.hasValue("text-variable-anchor-offset"),_t=[],Dt=ke.getCircleRadiusCorrection();for(const Pt of f){const Rt=r.getTile(Pt),Qt=Rt.getBucket(c);if(!Qt)continue;const nr=y?Qt.text:Qt.icon;if(!nr||!nr.segments.get().length||!nr.hasVisibleVertices)continue;const Ar=nr.programConfigurations.get(c.id),rr=y||Qt.sdfIcons,Dr=y?Qt.textSizeData:Qt.iconSizeData,vn=Qe||ke.pitch!==0,Ai=w.useProgram(Ru(rr,y,Qt),Ar),zi=o.az(Dr,ke.zoom),ui=w.style.map.terrain&&w.style.map.terrain.getTerrainData(Pt);let Gi,Pi,Is,Ki,eo=[0,0],Ts=null;if(y)Pi=Rt.glyphAtlasTexture,Is=ve.LINEAR,Gi=Rt.glyphAtlasTexture.size,Qt.iconsInText&&(eo=Rt.imageAtlasTexture.size,Ts=Rt.imageAtlasTexture,Ki=vn||w.options.rotating||w.options.zooming||Dr.kind==="composite"||Dr.kind==="camera"?ve.LINEAR:ve.NEAREST);else{const Os=c.layout.get("icon-size").constantOr(0)!==1||Qt.iconsNeedLinear;Pi=Rt.imageAtlasTexture,Is=rr||w.options.rotating||w.options.zooming||Os||vn?ve.LINEAR:ve.NEAREST,Gi=Rt.imageAtlasTexture.size}const hi=o.aO(Rt,1,w.transform.zoom),Ao=Ri(Oe,w.transform,hi),yo=o.N();o.aC(yo,Ao);const fc=El(Qe,Oe,w.transform,hi),mA=o.aP(ke,Rt,b,S),GA=ke.getProjectionData({overscaledTileID:Pt,applyGlobeMatrix:!ee,applyTerrainMatrix:!0}),zu=it&&Qt.hasTextData(),pc=c.layout.get("icon-text-fit")!=="none"&&zu&&Qt.hasIconData();if(Ge){const Os=w.style.map.terrain?(Ka,cs)=>w.style.map.terrain.getElevation(Pt,Ka,cs):null,ro=c.layout.get("text-rotation-alignment")==="map";ec(Qt,w,y,Ao,yo,Qe,j,ro,Pt.toUnwrapped(),ke.width,ke.height,mA,Os)}const Gl=y&&it||pc,to=Ge||Gl?QA:Qe?Ao:w.transform.clipSpaceToPixelsMatrix,Zo=rr&&c.paint.get(y?"text-halo-width":"icon-halo-width").constantOr(1)!==0;let vo;vo=rr?Qt.iconsInText?$o(Dr.kind,zi,ot,Qe,Ge,Gl,w,to,fc,mA,Gi,eo,Dt):Nl(Dr.kind,zi,ot,Qe,Ge,Gl,w,to,fc,mA,y,Gi,0,Dt):Rl(Dr.kind,zi,ot,Qe,Ge,Gl,w,to,fc,mA,y,Gi,Dt);const vl={program:Ai,buffers:nr,uniformValues:vo,projectionData:GA,atlasTexture:Pi,atlasTextureIcon:Ts,atlasInterpolation:Is,atlasInterpolationIcon:Ki,isSDF:rr,hasHalo:Zo};if(Ze&&Qt.canOverlap){ct=!0;const Os=nr.segments.get();for(const ro of Os)_t.push({segments:new o.aY([ro]),sortKey:ro.sortKey,state:vl,terrainData:ui})}else _t.push({segments:nr.segments,sortKey:0,state:vl,terrainData:ui})}ct&&_t.sort(((Pt,Rt)=>Pt.sortKey-Rt.sortKey));for(const Pt of _t){const Rt=Pt.state;if(Ae.activeTexture.set(ve.TEXTURE0),Rt.atlasTexture.bind(Rt.atlasInterpolation,ve.CLAMP_TO_EDGE),Rt.atlasTextureIcon&&(Ae.activeTexture.set(ve.TEXTURE1),Rt.atlasTextureIcon&&Rt.atlasTextureIcon.bind(Rt.atlasInterpolationIcon,ve.CLAMP_TO_EDGE)),Rt.isSDF){const Qt=Rt.uniformValues;Rt.hasHalo&&(Qt.u_is_halo=1,uu(Rt.buffers,Pt.segments,c,w,Rt.program,dt,q,ne,Qt,Rt.projectionData,Pt.terrainData)),Qt.u_is_halo=0}uu(Rt.buffers,Pt.segments,c,w,Rt.program,dt,q,ne,Rt.uniformValues,Rt.projectionData,Pt.terrainData)}}function uu(w,r,c,f,y,b,S,M,N,j,q){const ne=f.context;y.draw(ne,ne.gl.TRIANGLES,b,S,M,En.backCCW,N,q,j,c.id,w.layoutVertexBuffer,w.indexBuffer,r,c.paint,f.transform.zoom,w.programConfigurations.get(c.id),w.dynamicLayoutVertexBuffer,w.opacityVertexBuffer)}function Ah(w,r,c,f,y){const b=w.context,S=b.gl,M=bn.disabled,N=new Nn([S.ONE,S.ONE],o.bq.transparent,[!0,!0,!0,!0]),j=r.getBucket(c);if(!j)return;const q=f.key;let ne=c.heatmapFbos.get(q);ne||(ne=hu(b,r.tileSize,r.tileSize),c.heatmapFbos.set(q,ne)),b.bindFramebuffer.set(ne.framebuffer),b.viewport.set([0,0,r.tileSize,r.tileSize]),b.clear({color:o.bq.transparent});const ee=j.programConfigurations.get(c.id),Ae=w.useProgram("heatmap",ee,!y),ve=w.transform.getProjectionData({overscaledTileID:r.tileID,applyGlobeMatrix:!0,applyTerrainMatrix:!0}),ke=w.style.map.terrain.getTerrainData(f);Ae.draw(b,S.TRIANGLES,mn.disabled,M,N,En.disabled,ga(r,w.transform.zoom,c.paint.get("heatmap-intensity"),1),ke,ve,c.id,j.layoutVertexBuffer,j.indexBuffer,j.segments,c.paint,w.transform.zoom,ee)}function jh(w,r,c,f,y){const b=w.context,S=b.gl,M=w.transform;b.setColorMode(w.colorModeForRenderPass());const N=zA(b,r),j=c.key,q=r.heatmapFbos.get(j);if(!q)return;b.activeTexture.set(S.TEXTURE0),S.bindTexture(S.TEXTURE_2D,q.colorAttachment.get()),b.activeTexture.set(S.TEXTURE1),N.bind(S.LINEAR,S.CLAMP_TO_EDGE);const ne=M.getProjectionData({overscaledTileID:c,applyTerrainMatrix:y,applyGlobeMatrix:!f});w.useProgram("heatmapTexture").draw(b,S.TRIANGLES,mn.disabled,bn.disabled,w.colorModeForRenderPass(),En.disabled,fl(w,r,0,1),null,ne,r.id,w.rasterBoundsBuffer,w.quadTriangleIndexBuffer,w.rasterBoundsSegments,r.paint,M.zoom),q.destroy(),r.heatmapFbos.delete(j)}function hu(w,r,c){var f,y;const b=w.gl,S=b.createTexture();b.bindTexture(b.TEXTURE_2D,S),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_S,b.CLAMP_TO_EDGE),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_T,b.CLAMP_TO_EDGE),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MIN_FILTER,b.LINEAR),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MAG_FILTER,b.LINEAR);const M=(f=w.HALF_FLOAT)!==null&&f!==void 0?f:b.UNSIGNED_BYTE,N=(y=w.RGBA16F)!==null&&y!==void 0?y:b.RGBA;b.texImage2D(b.TEXTURE_2D,0,N,r,c,0,b.RGBA,M,null);const j=w.createFramebuffer(r,c,!1,!1);return j.colorAttachment.set(S),j}function zA(w,r){return r.colorRampTexture||(r.colorRampTexture=new o.T(w,r.colorRamp,w.gl.RGBA)),r.colorRampTexture}function po(w,r,c,f,y,b,S,M){let N=256;if(y.stepInterpolant){const j=r.getSource().maxzoom,q=S.canonical.z===j?Math.ceil(1<<w.transform.maxZoom-S.canonical.z):1;N=o.ao(o.cf(b.maxLineLength/o.a5*1024*q),256,c.maxTextureSize)}return M.gradient=o.cg({expression:y.gradientExpression(),evaluationKey:"lineProgress",resolution:N,image:M.gradient||void 0,clips:b.lineClipsArray}),M.texture?M.texture.update(M.gradient):M.texture=new o.T(c,M.gradient,f.RGBA),M.version=y.gradientVersion,M.texture}function va(w,r,c,f,y){w.activeTexture.set(r.TEXTURE0),c.imageAtlasTexture.bind(r.LINEAR,r.CLAMP_TO_EDGE),f.updatePaintBuffers(y)}function $n(w,r,c,f,y,b){(y||w.lineAtlas.dirty)&&(r.activeTexture.set(c.TEXTURE0),w.lineAtlas.bind(r)),f.updatePaintBuffers(b)}function mo(w,r,c,f,y,b,S){const M=b.gradients[y.id];let N=M.texture;y.gradientVersion!==M.version&&(N=po(w,r,c,f,y,b,S,M)),c.activeTexture.set(f.TEXTURE0),N.bind(y.stepInterpolant?f.NEAREST:f.LINEAR,f.CLAMP_TO_EDGE)}function co(w,r,c,f,y,b,S,M,N){const j=b.gradients[y.id];let q=j.texture;y.gradientVersion!==j.version&&(q=po(w,r,c,f,y,b,S,j)),c.activeTexture.set(f.TEXTURE0),q.bind(y.stepInterpolant?f.NEAREST:f.LINEAR,f.CLAMP_TO_EDGE),c.activeTexture.set(f.TEXTURE1),w.lineAtlas.bind(c),M.updatePaintBuffers(N)}function Rs(w,r,c,f,y){if(!c||!f||!f.imageAtlas)return;const b=f.imageAtlas.patternPositions;let S=b[c.to.toString()],M=b[c.from.toString()];if(!S&&M&&(S=M),!M&&S&&(M=S),!S||!M){const N=y.getPaintProperty(r);S=b[N],M=b[N]}S&&M&&w.setConstantPatternPositions(S,M)}function Zs(w,r,c,f,y,b,S,M){const N=w.context.gl,j="fill-pattern",q=c.paint.get(j),ne=q&&q.constantOr(1),ee=c.getCrossfadeParameters();let Ae,ve,ke,Oe,Qe;const Ge=w.transform,ot=c.paint.get("fill-translate"),Ze=c.paint.get("fill-translate-anchor");S?(ve=ne&&!c.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",Ae=N.LINES):(ve=ne?"fillPattern":"fill",Ae=N.TRIANGLES);const ct=q.constantOr(null);for(const dt of f){const it=r.getTile(dt);if(ne&&!it.patternsLoaded())continue;const _t=it.getBucket(c);if(!_t)continue;const Dt=_t.programConfigurations.get(c.id),Pt=w.useProgram(ve,Dt),Rt=w.style.map.terrain&&w.style.map.terrain.getTerrainData(dt);ne&&(w.context.activeTexture.set(N.TEXTURE0),it.imageAtlasTexture.bind(N.LINEAR,N.CLAMP_TO_EDGE),Dt.updatePaintBuffers(ee)),Rs(Dt,j,ct,it,c);const Qt=Ge.getProjectionData({overscaledTileID:dt,applyGlobeMatrix:!M,applyTerrainMatrix:!0}),nr=o.aP(Ge,it,ot,Ze);if(S){Oe=_t.indexBuffer2,Qe=_t.segments2;const rr=[N.drawingBufferWidth,N.drawingBufferHeight];ke=ve==="fillOutlinePattern"&&ne?aA(w,ee,it,rr,nr):oA(rr,nr)}else Oe=_t.indexBuffer,Qe=_t.segments,ke=ne?Ll(w,ee,it,nr):{u_fill_translate:nr};const Ar=w.stencilModeForClipping(dt);Pt.draw(w.context,Ae,y,Ar,b,En.backCCW,ke,Rt,Qt,c.id,_t.layoutVertexBuffer,Oe,Qe,c.paint,w.transform.zoom,Dt)}}function Nu(w,r,c,f,y,b,S,M){const N=w.context,j=N.gl,q="fill-extrusion-pattern",ne=c.paint.get(q),ee=ne.constantOr(1),Ae=c.getCrossfadeParameters(),ve=c.paint.get("fill-extrusion-opacity"),ke=ne.constantOr(null),Oe=w.transform;for(const Qe of f){const Ge=r.getTile(Qe),ot=Ge.getBucket(c);if(!ot)continue;const Ze=w.style.map.terrain&&w.style.map.terrain.getTerrainData(Qe),ct=ot.programConfigurations.get(c.id),dt=w.useProgram(ee?"fillExtrusionPattern":"fillExtrusion",ct);ee&&(w.context.activeTexture.set(j.TEXTURE0),Ge.imageAtlasTexture.bind(j.LINEAR,j.CLAMP_TO_EDGE),ct.updatePaintBuffers(Ae));const it=Oe.getProjectionData({overscaledTileID:Qe,applyGlobeMatrix:!M,applyTerrainMatrix:!0});Rs(ct,q,ke,Ge,c);const _t=o.aP(Oe,Ge,c.paint.get("fill-extrusion-translate"),c.paint.get("fill-extrusion-translate-anchor")),Dt=c.paint.get("fill-extrusion-vertical-gradient"),Pt=ee?Bo(w,Dt,ve,_t,Qe,Ae,Ge):LA(w,Dt,ve,_t);dt.draw(N,N.gl.TRIANGLES,y,b,S,En.backCCW,Pt,Ze,it,c.id,ot.layoutVertexBuffer,ot.indexBuffer,ot.segments,c.paint,w.transform.zoom,ct,w.style.map.terrain&&ot.centroidVertexBuffer)}}function Hc(w,r,c,f,y,b,S,M,N){var j;const q=w.style.projection,ne=w.context,ee=w.transform,Ae=ne.gl,ve=[`#define NUM_ILLUMINATION_SOURCES ${c.paint.get("hillshade-highlight-color").values.length}`],ke=w.useProgram("hillshade",null,!1,ve),Oe=!w.options.moving;for(const Qe of f){const Ge=r.getTile(Qe),ot=Ge.fbo;if(!ot)continue;const Ze=q.getMeshFromTileID(ne,Qe.canonical,M,!0,"raster"),ct=(j=w.style.map.terrain)===null||j===void 0?void 0:j.getTerrainData(Qe);ne.activeTexture.set(Ae.TEXTURE0),Ae.bindTexture(Ae.TEXTURE_2D,ot.colorAttachment.get());const dt=ee.getProjectionData({overscaledTileID:Qe,aligned:Oe,applyGlobeMatrix:!N,applyTerrainMatrix:!0});ke.draw(ne,Ae.TRIANGLES,b,y[Qe.overscaledZ],S,En.backCCW,Ma(w,Ge,c),ct,dt,c.id,Ze.vertexBuffer,Ze.indexBuffer,Ze.segments)}}function Da(w,r,c,f,y,b,S,M,N){var j;const q=w.style.projection,ne=w.context,ee=w.transform,Ae=ne.gl,ve=w.useProgram("colorRelief"),ke=!w.options.moving;let Oe=!0,Qe=0;for(const Ge of f){const ot=r.getTile(Ge),Ze=ot.dem;if(Oe){const Pt=Ae.getParameter(Ae.MAX_TEXTURE_SIZE),{elevationTexture:Rt,colorTexture:Qt}=c.getColorRampTextures(ne,Pt,Ze.getUnpackVector());ne.activeTexture.set(Ae.TEXTURE1),Rt.bind(Ae.NEAREST,Ae.CLAMP_TO_EDGE),ne.activeTexture.set(Ae.TEXTURE4),Qt.bind(Ae.LINEAR,Ae.CLAMP_TO_EDGE),Oe=!1,Qe=Rt.size[0]}if(!Ze||!Ze.data)continue;const ct=Ze.stride,dt=Ze.getPixels();if(ne.activeTexture.set(Ae.TEXTURE0),ne.pixelStoreUnpackPremultiplyAlpha.set(!1),ot.demTexture=ot.demTexture||w.getTileTexture(ct),ot.demTexture){const Pt=ot.demTexture;Pt.update(dt,{premultiply:!1}),Pt.bind(Ae.LINEAR,Ae.CLAMP_TO_EDGE)}else ot.demTexture=new o.T(ne,dt,Ae.RGBA,{premultiply:!1}),ot.demTexture.bind(Ae.LINEAR,Ae.CLAMP_TO_EDGE);const it=q.getMeshFromTileID(ne,Ge.canonical,M,!0,"raster"),_t=(j=w.style.map.terrain)===null||j===void 0?void 0:j.getTerrainData(Ge),Dt=ee.getProjectionData({overscaledTileID:Ge,aligned:ke,applyGlobeMatrix:!N,applyTerrainMatrix:!0});ve.draw(ne,Ae.TRIANGLES,b,y[Ge.overscaledZ],S,En.backCCW,ss(c,ot.dem,Qe),_t,Dt,c.id,it.vertexBuffer,it.indexBuffer,it.segments)}}const Ra=[new o.P(0,0),new o.P(o.a5,0),new o.P(o.a5,o.a5),new o.P(0,o.a5)];function Na(w,r,c,f,y,b,S,M,N=!1,j=!1){const q=f[f.length-1].overscaledZ,ne=w.context,ee=ne.gl,Ae=w.useProgram("raster"),ve=w.transform,ke=w.style.projection,Oe=w.colorModeForRenderPass(),Qe=!w.options.moving,Ge=c.paint.get("raster-opacity"),ot=c.paint.get("raster-resampling"),Ze=c.paint.get("raster-fade-duration"),ct=!!w.style.map.terrain;for(const dt of f){const it=w.getDepthModeForSublayer(dt.overscaledZ-q,Ge===1?mn.ReadWrite:mn.ReadOnly,ee.LESS),_t=r.getTile(dt),Dt=ot==="nearest"?ee.NEAREST:ee.LINEAR;ne.activeTexture.set(ee.TEXTURE0),_t.texture.bind(Dt,ee.CLAMP_TO_EDGE,ee.LINEAR_MIPMAP_NEAREST),ne.activeTexture.set(ee.TEXTURE1);const{parentTile:Pt,parentScaleBy:Rt,parentTopLeft:Qt,fadeValues:nr}=HA(_t,r,Ze,ct);_t.fadeOpacity=nr.tileOpacity,Pt?(Pt.fadeOpacity=nr.parentTileOpacity,Pt.texture.bind(Dt,ee.CLAMP_TO_EDGE,ee.LINEAR_MIPMAP_NEAREST)):_t.texture.bind(Dt,ee.CLAMP_TO_EDGE,ee.LINEAR_MIPMAP_NEAREST),_t.texture.useMipmap&&ne.extTextureFilterAnisotropic&&w.transform.pitch>20&&ee.texParameterf(ee.TEXTURE_2D,ne.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,ne.extTextureFilterAnisotropicMax);const Ar=w.style.map.terrain&&w.style.map.terrain.getTerrainData(dt),rr=ve.getProjectionData({overscaledTileID:dt,aligned:Qe,applyGlobeMatrix:!j,applyTerrainMatrix:!0}),Dr=gl(Qt,Rt,nr.fadeMix,c,M),vn=ke.getMeshFromTileID(ne,dt.canonical,b,S,"raster");Ae.draw(ne,ee.TRIANGLES,it,y?y[dt.overscaledZ]:bn.disabled,Oe,N?En.frontCCW:En.backCCW,Dr,Ar,rr,c.id,vn.vertexBuffer,vn.indexBuffer,vn.segments)}}function HA(w,r,c,f){const y={parentTile:null,parentScaleBy:1,parentTopLeft:[0,0],fadeValues:{tileOpacity:1,parentTileOpacity:1,fadeMix:{opacity:1,mix:0}}};if(c===0||f)return y;if(w.fadingParentID){const b=r.getLoadedTile(w.fadingParentID);if(!b)return y;const S=Math.pow(2,b.tileID.overscaledZ-w.tileID.overscaledZ),M=[w.tileID.canonical.x*S%1,w.tileID.canonical.y*S%1],N=(function(j,q,ne){const ee=z(),Ae=(ee-q.timeAdded)/ne,ve=j.fadingDirection===bt.Incoming,ke=o.ao((ee-j.timeAdded)/ne,0,1),Oe=o.ao(1-Ae,0,1),Qe=ve?ke:Oe;return{tileOpacity:Qe,parentTileOpacity:ve?Oe:ke,fadeMix:{opacity:1,mix:1-Qe}}})(w,b,c);return{parentTile:b,parentScaleBy:S,parentTopLeft:M,fadeValues:N}}if(w.selfFading){const b=(function(S,M){const N=(z()-S.timeAdded)/M,j=o.ao(N,0,1);return{tileOpacity:j,fadeMix:{opacity:j,mix:0}}})(w,c);return{parentTile:null,parentScaleBy:1,parentTopLeft:[0,0],fadeValues:b}}return y}const Qu=new o.bq(1,0,0,1),Ol=new o.bq(0,1,0,1),Qa=new o.bq(0,0,1,1),li=new o.bq(1,0,1,1),Xn=new o.bq(0,1,1,1);function zl(w,r,c,f){Xs(w,0,r+c/2,w.transform.width,c,f)}function Ns(w,r,c,f){Xs(w,r-c/2,0,c,w.transform.height,f)}function Xs(w,r,c,f,y,b){const S=w.context,M=S.gl;M.enable(M.SCISSOR_TEST),M.scissor(r*w.pixelRatio,c*w.pixelRatio,f*w.pixelRatio,y*w.pixelRatio),S.clear({color:b}),M.disable(M.SCISSOR_TEST)}function jc(w,r,c){const f=w.context,y=f.gl,b=w.useProgram("debug"),S=mn.disabled,M=bn.disabled,N=w.colorModeForRenderPass(),j="$debug",q=w.style.map.terrain&&w.style.map.terrain.getTerrainData(c);f.activeTexture.set(y.TEXTURE0);const ne=r.getTileByID(c.key).latestRawTileData,ee=Math.floor((ne&&ne.byteLength||0)/1024),Ae=r.getTile(c).tileSize,ve=512/Math.min(Ae,512)*(c.overscaledZ/w.transform.zoom)*.5;let ke=c.canonical.toString();c.overscaledZ!==c.canonical.z&&(ke+=` => ${c.overscaledZ}`),(function(Qe,Ge){Qe.initDebugOverlayCanvas();const ot=Qe.debugOverlayCanvas,Ze=Qe.context.gl,ct=Qe.debugOverlayCanvas.getContext("2d");ct.clearRect(0,0,ot.width,ot.height),ct.shadowColor="white",ct.shadowBlur=2,ct.lineWidth=1.5,ct.strokeStyle="white",ct.textBaseline="top",ct.font="bold 36px Open Sans, sans-serif",ct.fillText(Ge,5,5),ct.strokeText(Ge,5,5),Qe.debugOverlayTexture.update(ot),Qe.debugOverlayTexture.bind(Ze.LINEAR,Ze.CLAMP_TO_EDGE)})(w,`${ke} ${ee}kB`);const Oe=w.transform.getProjectionData({overscaledTileID:c,applyGlobeMatrix:!0,applyTerrainMatrix:!0});b.draw(f,y.TRIANGLES,S,M,Nn.alphaBlended,En.disabled,Co(o.bq.transparent,ve),null,Oe,j,w.debugBuffer,w.quadTriangleIndexBuffer,w.debugSegments),b.draw(f,y.LINE_STRIP,S,M,N,En.disabled,Co(o.bq.red),q,Oe,j,w.debugBuffer,w.tileBorderIndexBuffer,w.debugSegments)}function Vc(w,r,c,f){const{isRenderingGlobe:y}=f,b=w.context,S=b.gl,M=w.transform,N=w.colorModeForRenderPass(),j=w.getDepthModeFor3D(),q=w.useProgram("terrain");b.bindFramebuffer.set(null),b.viewport.set([0,0,w.width,w.height]);for(const ne of c){const ee=r.getTerrainMesh(ne.tileID),Ae=w.renderToTexture.getTexture(ne),ve=r.getTerrainData(ne.tileID);b.activeTexture.set(S.TEXTURE0),S.bindTexture(S.TEXTURE_2D,Ae.texture);const ke=r.getMeshFrameDelta(M.zoom),Oe=M.calculateFogMatrix(ne.tileID.toUnwrapped()),Qe=ou(ke,Oe,w.style.sky,M.pitch,y),Ge=M.getProjectionData({overscaledTileID:ne.tileID,applyTerrainMatrix:!1,applyGlobeMatrix:!0});q.draw(b,S.TRIANGLES,j,bn.disabled,N,En.backCCW,Qe,ve,Ge,"terrain",ee.vertexBuffer,ee.indexBuffer,ee.segments)}}function go(w,r){if(!r.mesh){const c=new o.aX;c.emplaceBack(-1,-1),c.emplaceBack(1,-1),c.emplaceBack(1,1),c.emplaceBack(-1,1);const f=new o.aZ;f.emplaceBack(0,1,2),f.emplaceBack(0,2,3),r.mesh=new ii(w.createVertexBuffer(c,_s.members),w.createIndexBuffer(f),o.aY.simpleSegment(0,0,c.length,f.length))}return r.mesh}class du{constructor(r,c){this.context=new Du(r),this.transform=c,this._tileTextures={},this.terrainFacilitator={dirty:!0,matrix:o.as(new Float64Array(16)),renderTime:0},this.setup(),this.numSublayers=ns.maxOverzooming+ns.maxUnderzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new vs}resize(r,c,f){if(this.width=Math.floor(r*f),this.height=Math.floor(c*f),this.pixelRatio=f,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const y of this.style._order)this.style._layers[y].resize()}setup(){const r=this.context,c=new o.aX;c.emplaceBack(0,0),c.emplaceBack(o.a5,0),c.emplaceBack(0,o.a5),c.emplaceBack(o.a5,o.a5),this.tileExtentBuffer=r.createVertexBuffer(c,_s.members),this.tileExtentSegments=o.aY.simpleSegment(0,0,4,2);const f=new o.aX;f.emplaceBack(0,0),f.emplaceBack(o.a5,0),f.emplaceBack(0,o.a5),f.emplaceBack(o.a5,o.a5),this.debugBuffer=r.createVertexBuffer(f,_s.members),this.debugSegments=o.aY.simpleSegment(0,0,4,5);const y=new o.ci;y.emplaceBack(0,0,0,0),y.emplaceBack(o.a5,0,o.a5,0),y.emplaceBack(0,o.a5,0,o.a5),y.emplaceBack(o.a5,o.a5,o.a5,o.a5),this.rasterBoundsBuffer=r.createVertexBuffer(y,sA.members),this.rasterBoundsSegments=o.aY.simpleSegment(0,0,4,2);const b=new o.aX;b.emplaceBack(0,0),b.emplaceBack(o.a5,0),b.emplaceBack(0,o.a5),b.emplaceBack(o.a5,o.a5),this.rasterBoundsBufferPosOnly=r.createVertexBuffer(b,_s.members),this.rasterBoundsSegmentsPosOnly=o.aY.simpleSegment(0,0,4,5);const S=new o.aX;S.emplaceBack(0,0),S.emplaceBack(1,0),S.emplaceBack(0,1),S.emplaceBack(1,1),this.viewportBuffer=r.createVertexBuffer(S,_s.members),this.viewportSegments=o.aY.simpleSegment(0,0,4,2);const M=new o.cj;M.emplaceBack(0),M.emplaceBack(1),M.emplaceBack(3),M.emplaceBack(2),M.emplaceBack(0),this.tileBorderIndexBuffer=r.createIndexBuffer(M);const N=new o.aZ;N.emplaceBack(1,0,2),N.emplaceBack(1,2,3),this.quadTriangleIndexBuffer=r.createIndexBuffer(N);const j=this.context.gl;this.stencilClearMode=new bn({func:j.ALWAYS,mask:0},0,255,j.ZERO,j.ZERO,j.ZERO),this.tileExtentMesh=new ii(this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}clearStencil(){const r=this.context,c=r.gl;this.nextStencilID=1,this.currentStencilSource=void 0;const f=o.N();o.c8(f,0,this.width,this.height,0,0,1),o.Q(f,f,[c.drawingBufferWidth,c.drawingBufferHeight,0]);const y={mainMatrix:f,tileMercatorCoords:[0,0,1,1],clippingPlane:[0,0,0,0],projectionTransition:0,fallbackMatrix:f};this.useProgram("clippingMask",null,!0).draw(r,c.TRIANGLES,mn.disabled,this.stencilClearMode,Nn.disabled,En.disabled,null,null,y,"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}_renderTileClippingMasks(r,c,f){if(this.currentStencilSource===r.source||!r.isTileClipped()||!c||!c.length)return;this.currentStencilSource=r.source,this.nextStencilID+c.length>256&&this.clearStencil();const y=this.context;y.setColorMode(Nn.disabled),y.setDepthMode(mn.disabled);const b={};for(const S of c)b[S.key]=this.nextStencilID++;this._renderTileMasks(b,c,f,!0),this._renderTileMasks(b,c,f,!1),this._tileClippingMaskIDs=b}_renderTileMasks(r,c,f,y){const b=this.context,S=b.gl,M=this.style.projection,N=this.transform,j=this.useProgram("clippingMask");for(const q of c){const ne=r[q.key],ee=this.style.map.terrain&&this.style.map.terrain.getTerrainData(q),Ae=M.getMeshFromTileID(this.context,q.canonical,y,!0,"stencil"),ve=N.getProjectionData({overscaledTileID:q,applyGlobeMatrix:!f,applyTerrainMatrix:!0});j.draw(b,S.TRIANGLES,mn.disabled,new bn({func:S.ALWAYS,mask:0},ne,255,S.KEEP,S.KEEP,S.REPLACE),Nn.disabled,f?En.disabled:En.backCCW,null,ee,ve,"$clipping",Ae.vertexBuffer,Ae.indexBuffer,Ae.segments)}}_renderTilesDepthBuffer(){const r=this.context,c=r.gl,f=this.style.projection,y=this.transform,b=this.useProgram("depth"),S=this.getDepthModeFor3D(),M=Tn(y,{tileSize:y.tileSize});for(const N of M){const j=this.style.map.terrain&&this.style.map.terrain.getTerrainData(N),q=f.getMeshFromTileID(this.context,N.canonical,!0,!0,"raster"),ne=y.getProjectionData({overscaledTileID:N,applyGlobeMatrix:!0,applyTerrainMatrix:!0});b.draw(r,c.TRIANGLES,S,bn.disabled,Nn.disabled,En.backCCW,null,j,ne,"$clipping",q.vertexBuffer,q.indexBuffer,q.segments)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const r=this.nextStencilID++,c=this.context.gl;return new bn({func:c.NOTEQUAL,mask:255},r,255,c.KEEP,c.KEEP,c.REPLACE)}stencilModeForClipping(r){const c=this.context.gl;return new bn({func:c.EQUAL,mask:255},this._tileClippingMaskIDs[r.key],0,c.KEEP,c.KEEP,c.REPLACE)}getStencilConfigForOverlapAndUpdateStencilID(r){const c=this.context.gl,f=r.sort(((S,M)=>M.overscaledZ-S.overscaledZ)),y=f[f.length-1].overscaledZ,b=f[0].overscaledZ-y+1;if(b>1){this.currentStencilSource=void 0,this.nextStencilID+b>256&&this.clearStencil();const S={};for(let M=0;M<b;M++)S[M+y]=new bn({func:c.GEQUAL,mask:255},M+this.nextStencilID,255,c.KEEP,c.KEEP,c.REPLACE);return this.nextStencilID+=b,[S,f]}return[{[y]:bn.disabled},f]}stencilConfigForOverlapTwoPass(r){const c=this.context.gl,f=r.sort(((S,M)=>M.overscaledZ-S.overscaledZ)),y=f[f.length-1].overscaledZ,b=f[0].overscaledZ-y+1;if(this.clearStencil(),b>1){const S={},M={};for(let N=0;N<b;N++)S[N+y]=new bn({func:c.GREATER,mask:255},b+1+N,255,c.KEEP,c.KEEP,c.REPLACE),M[N+y]=new bn({func:c.GREATER,mask:255},1+N,255,c.KEEP,c.KEEP,c.REPLACE);return this.nextStencilID=2*b+1,[S,M,f]}return this.nextStencilID=3,[{[y]:new bn({func:c.GREATER,mask:255},2,255,c.KEEP,c.KEEP,c.REPLACE)},{[y]:new bn({func:c.GREATER,mask:255},1,255,c.KEEP,c.KEEP,c.REPLACE)},f]}colorModeForRenderPass(){const r=this.context.gl;return this._showOverdrawInspector?new Nn([r.CONSTANT_COLOR,r.ONE],new o.bq(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?Nn.unblended:Nn.alphaBlended}getDepthModeForSublayer(r,c,f){if(!this.opaquePassEnabledForLayer())return mn.disabled;const y=1-((1+this.currentLayer)*this.numSublayers+r)*this.depthEpsilon;return new mn(f||this.context.gl.LEQUAL,c,[y,y])}getDepthModeFor3D(){return new mn(this.context.gl.LEQUAL,mn.ReadWrite,this.depthRangeFor3D)}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(r,c){var f,y;this.style=r,this.options=c,this.lineAtlas=r.lineAtlas,this.imageManager=r.imageManager,this.glyphManager=r.glyphManager,this.symbolFadeChange=r.placement.symbolFadeChange(z()),this.imageManager.beginFrame();const b=this.style._order,S=this.style.tileManagers,M={},N={},j={},q={isRenderingToTexture:!1,isRenderingGlobe:((f=r.projection)===null||f===void 0?void 0:f.transitionState)>0};for(const ee in S){const Ae=S[ee];Ae.used&&Ae.prepare(this.context),M[ee]=Ae.getVisibleCoordinates(!1),N[ee]=M[ee].slice().reverse(),j[ee]=Ae.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let ee=0;ee<b.length;ee++)if(this.style._layers[b[ee]].is3D()){this.opaquePassCutoff=ee;break}this.maybeDrawDepthAndCoords(!1),this.renderToTexture&&(this.renderToTexture.prepareForRender(this.style,this.transform.zoom),this.opaquePassCutoff=0),this.renderPass="offscreen";for(const ee of b){const Ae=this.style._layers[ee];if(!Ae.hasOffscreenPass()||Ae.isHidden(this.transform.zoom))continue;const ve=N[Ae.source];(Ae.type==="custom"||ve.length)&&this.renderLayer(this,S[Ae.source],Ae,ve,q)}if((y=this.style.projection)===null||y===void 0||y.updateGPUdependent({context:this.context,useProgram:ee=>this.useProgram(ee)}),this.context.viewport.set([0,0,this.width,this.height]),this.context.bindFramebuffer.set(null),this.context.clear({color:c.showOverdrawInspector?o.bq.black:o.bq.transparent,depth:1}),this.clearStencil(),this.style.sky&&(function(ee,Ae){const ve=ee.context,ke=ve.gl,Oe=((dt,it,_t)=>{const Dt=Math.cos(it.rollInRadians),Pt=Math.sin(it.rollInRadians),Rt=rn(it),Qt=it.getProjectionData({overscaledTileID:null,applyGlobeMatrix:!0,applyTerrainMatrix:!0}).projectionTransition;return{u_sky_color:dt.properties.get("sky-color"),u_horizon_color:dt.properties.get("horizon-color"),u_horizon:[(it.width/2-Rt*Pt)*_t,(it.height/2+Rt*Dt)*_t],u_horizon_normal:[-Pt,Dt],u_sky_horizon_blend:dt.properties.get("sky-horizon-blend")*it.height/2*_t,u_sky_blend:Qt}})(Ae,ee.style.map.transform,ee.pixelRatio),Qe=new mn(ke.LEQUAL,mn.ReadWrite,[0,1]),Ge=bn.disabled,ot=ee.colorModeForRenderPass(),Ze=ee.useProgram("sky"),ct=go(ve,Ae);Ze.draw(ve,ke.TRIANGLES,Qe,Ge,ot,En.disabled,Oe,null,void 0,"sky",ct.vertexBuffer,ct.indexBuffer,ct.segments)})(this,this.style.sky),this._showOverdrawInspector=c.showOverdrawInspector,this.depthRangeFor3D=[0,1-(r._order.length+2)*this.numSublayers*this.depthEpsilon],!this.renderToTexture)for(this.renderPass="opaque",this.currentLayer=b.length-1;this.currentLayer>=0;this.currentLayer--){const ee=this.style._layers[b[this.currentLayer]],Ae=S[ee.source],ve=M[ee.source];this._renderTileClippingMasks(ee,ve,!1),this.renderLayer(this,Ae,ee,ve,q)}this.renderPass="translucent";let ne=!1;for(this.currentLayer=0;this.currentLayer<b.length;this.currentLayer++){const ee=this.style._layers[b[this.currentLayer]],Ae=S[ee.source];if(this.renderToTexture&&this.renderToTexture.renderLayer(ee,q))continue;this.opaquePassEnabledForLayer()||ne||(ne=!0,q.isRenderingGlobe&&!this.style.map.terrain&&this._renderTilesDepthBuffer());const ve=(ee.type==="symbol"?j:N)[ee.source];this._renderTileClippingMasks(ee,M[ee.source],!!this.renderToTexture),this.renderLayer(this,Ae,ee,ve,q)}if(q.isRenderingGlobe&&(function(ee,Ae,ve){const ke=ee.context,Oe=ke.gl,Qe=ee.useProgram("atmosphere"),Ge=new mn(Oe.LEQUAL,mn.ReadOnly,[0,1]),ot=ee.transform,Ze=(function(Qt,nr){const Ar=Qt.properties.get("position"),rr=[-Ar.x,-Ar.y,-Ar.z],Dr=o.as(new Float64Array(16));return Qt.properties.get("anchor")==="map"&&(o.bh(Dr,Dr,nr.rollInRadians),o.bi(Dr,Dr,-nr.pitchInRadians),o.bh(Dr,Dr,nr.bearingInRadians),o.bi(Dr,Dr,nr.center.lat*Math.PI/180),o.bK(Dr,Dr,-nr.center.lng*Math.PI/180)),o.ch(rr,rr,Dr),rr})(ve,ee.transform),ct=ot.getProjectionData({overscaledTileID:null,applyGlobeMatrix:!0,applyTerrainMatrix:!0}),dt=Ae.properties.get("atmosphere-blend")*ct.projectionTransition;if(dt===0)return;const it=Vr(ot.worldSize,ot.center.lat),_t=ot.inverseProjectionMatrix,Dt=new Float64Array(4);Dt[3]=1,o.aI(Dt,Dt,ot.modelViewProjectionMatrix),Dt[0]/=Dt[3],Dt[1]/=Dt[3],Dt[2]/=Dt[3],Dt[3]=1,o.aI(Dt,Dt,_t),Dt[0]/=Dt[3],Dt[1]/=Dt[3],Dt[2]/=Dt[3],Dt[3]=1;const Pt=((Qt,nr,Ar,rr,Dr)=>({u_sun_pos:Qt,u_atmosphere_blend:nr,u_globe_position:Ar,u_globe_radius:rr,u_inv_proj_matrix:Dr}))(Ze,dt,[Dt[0],Dt[1],Dt[2]],it,_t),Rt=go(ke,Ae);Qe.draw(ke,Oe.TRIANGLES,Ge,bn.disabled,Nn.alphaBlended,En.disabled,Pt,null,null,"atmosphere",Rt.vertexBuffer,Rt.indexBuffer,Rt.segments)})(this,this.style.sky,this.style.light),this.options.showTileBoundaries){const ee=(function(Ae,ve){let ke=null;const Oe=Object.values(Ae._layers).flatMap((Ze=>Ze.source&&!Ze.isHidden(ve)?[Ae.tileManagers[Ze.source]]:[])),Qe=Oe.filter((Ze=>Ze.getSource().type==="vector")),Ge=Oe.filter((Ze=>Ze.getSource().type!=="vector")),ot=Ze=>{(!ke||ke.getSource().maxzoom<Ze.getSource().maxzoom)&&(ke=Ze)};return Qe.forEach((Ze=>ot(Ze))),ke||Ge.forEach((Ze=>ot(Ze))),ke})(this.style,this.transform.zoom);ee&&(function(Ae,ve,ke){for(let Oe=0;Oe<ke.length;Oe++)jc(Ae,ve,ke[Oe])})(this,ee,ee.getVisibleCoordinates())}this.options.showPadding&&(function(ee){const Ae=ee.transform.padding;zl(ee,ee.transform.height-(Ae.top||0),3,Qu),zl(ee,Ae.bottom||0,3,Ol),Ns(ee,Ae.left||0,3,Qa),Ns(ee,ee.transform.width-(Ae.right||0),3,li);const ve=ee.transform.centerPoint;(function(ke,Oe,Qe,Ge){Xs(ke,Oe-1,Qe-10,2,20,Ge),Xs(ke,Oe-10,Qe-1,20,2,Ge)})(ee,ve.x,ee.transform.height-ve.y,Xn)})(this),this.context.setDefault()}maybeDrawDepthAndCoords(r){if(!this.style||!this.style.map||!this.style.map.terrain)return;const c=this.terrainFacilitator.matrix,f=this.transform.modelViewProjectionMatrix;let y=this.terrainFacilitator.dirty;y||(y=r?!o.ck(c,f):!o.cl(c,f)),y||(y=this.style.map.terrain.tileManager.anyTilesAfterTime(this.terrainFacilitator.renderTime)),y&&(o.cm(c,f),this.terrainFacilitator.renderTime=Date.now(),this.terrainFacilitator.dirty=!1,(function(b,S){const M=b.context,N=M.gl,j=b.transform,q=Nn.unblended,ne=new mn(N.LEQUAL,mn.ReadWrite,[0,1]),ee=S.tileManager.getRenderableTiles(),Ae=b.useProgram("terrainDepth");M.bindFramebuffer.set(S.getFramebuffer("depth").framebuffer),M.viewport.set([0,0,b.width/devicePixelRatio,b.height/devicePixelRatio]),M.clear({color:o.bq.transparent,depth:1});for(const ve of ee){const ke=S.getTerrainMesh(ve.tileID),Oe=S.getTerrainData(ve.tileID),Qe=j.getProjectionData({overscaledTileID:ve.tileID,applyTerrainMatrix:!1,applyGlobeMatrix:!0}),Ge={u_ele_delta:S.getMeshFrameDelta(j.zoom)};Ae.draw(M,N.TRIANGLES,ne,bn.disabled,q,En.backCCW,Ge,Oe,Qe,"terrain",ke.vertexBuffer,ke.indexBuffer,ke.segments)}M.bindFramebuffer.set(null),M.viewport.set([0,0,b.width,b.height])})(this,this.style.map.terrain),(function(b,S){const M=b.context,N=M.gl,j=b.transform,q=Nn.unblended,ne=new mn(N.LEQUAL,mn.ReadWrite,[0,1]),ee=S.getCoordsTexture(),Ae=S.tileManager.getRenderableTiles(),ve=b.useProgram("terrainCoords");M.bindFramebuffer.set(S.getFramebuffer("coords").framebuffer),M.viewport.set([0,0,b.width/devicePixelRatio,b.height/devicePixelRatio]),M.clear({color:o.bq.transparent,depth:1}),S.coordsIndex=[];for(const ke of Ae){const Oe=S.getTerrainMesh(ke.tileID),Qe=S.getTerrainData(ke.tileID);M.activeTexture.set(N.TEXTURE0),N.bindTexture(N.TEXTURE_2D,ee.texture);const Ge={u_terrain_coords_id:(255-S.coordsIndex.length)/255,u_texture:0,u_ele_delta:S.getMeshFrameDelta(j.zoom)},ot=j.getProjectionData({overscaledTileID:ke.tileID,applyTerrainMatrix:!1,applyGlobeMatrix:!0});ve.draw(M,N.TRIANGLES,ne,bn.disabled,q,En.backCCW,Ge,Qe,ot,"terrain",Oe.vertexBuffer,Oe.indexBuffer,Oe.segments),S.coordsIndex.push(ke.tileID.key)}M.bindFramebuffer.set(null),M.viewport.set([0,0,b.width,b.height])})(this,this.style.map.terrain))}renderLayer(r,c,f,y,b){f.isHidden(this.transform.zoom)||(f.type==="background"||f.type==="custom"||(y||[]).length)&&(this.id=f.id,o.cn(f)?(function(S,M,N,j,q,ne){if(S.renderPass!=="translucent")return;const{isRenderingToTexture:ee}=ne,Ae=bn.disabled,ve=S.colorModeForRenderPass();(N._unevaluatedLayout.hasValue("text-variable-anchor")||N._unevaluatedLayout.hasValue("text-variable-anchor-offset"))&&(function(ke,Oe,Qe,Ge,ot,Ze,ct,dt,it){const _t=Oe.transform,Dt=Oe.style.map.terrain,Pt=ot==="map",Rt=Ze==="map";for(const Qt of ke){const nr=Ge.getTile(Qt),Ar=nr.getBucket(Qe);if(!Ar||!Ar.text||!Ar.text.segments.get().length)continue;const rr=o.az(Ar.textSizeData,_t.zoom),Dr=o.aO(nr,1,Oe.transform.zoom),vn=Ri(Pt,Oe.transform,Dr),Ai=Qe.layout.get("icon-text-fit")!=="none"&&Ar.hasIconData();if(rr){const zi=Math.pow(2,_t.zoom-nr.tileID.overscaledZ),ui=Dt?(Gi,Pi)=>Dt.getElevation(Qt,Gi,Pi):null;hA(Ar,Pt,Rt,it,_t,vn,zi,rr,Ai,o.aP(_t,nr,ct,dt),Qt.toUnwrapped(),ui)}}})(j,S,N,M,N.layout.get("text-rotation-alignment"),N.layout.get("text-pitch-alignment"),N.paint.get("text-translate"),N.paint.get("text-translate-anchor"),q),N.paint.get("icon-opacity").constantOr(1)!==0&&dA(S,M,N,j,!1,N.paint.get("icon-translate"),N.paint.get("icon-translate-anchor"),N.layout.get("icon-rotation-alignment"),N.layout.get("icon-pitch-alignment"),N.layout.get("icon-keep-upright"),Ae,ve,ee),N.paint.get("text-opacity").constantOr(1)!==0&&dA(S,M,N,j,!0,N.paint.get("text-translate"),N.paint.get("text-translate-anchor"),N.layout.get("text-rotation-alignment"),N.layout.get("text-pitch-alignment"),N.layout.get("text-keep-upright"),Ae,ve,ee),M.map.showCollisionBoxes&&(zc(S,M,N,j,!0),zc(S,M,N,j,!1))})(r,c,f,y,this.style.placement.variableOffsets,b):o.co(f)?(function(S,M,N,j,q){if(S.renderPass!=="translucent")return;const{isRenderingToTexture:ne}=q,ee=N.paint.get("circle-opacity"),Ae=N.paint.get("circle-stroke-width"),ve=N.paint.get("circle-stroke-opacity"),ke=!N.layout.get("circle-sort-key").isConstant();if(ee.constantOr(1)===0&&(Ae.constantOr(1)===0||ve.constantOr(1)===0))return;const Oe=S.context,Qe=Oe.gl,Ge=S.transform,ot=S.getDepthModeForSublayer(0,mn.ReadOnly),Ze=bn.disabled,ct=S.colorModeForRenderPass(),dt=[],it=Ge.getCircleRadiusCorrection();for(let _t=0;_t<j.length;_t++){const Dt=j[_t],Pt=M.getTile(Dt),Rt=Pt.getBucket(N);if(!Rt)continue;const Qt=N.paint.get("circle-translate"),nr=N.paint.get("circle-translate-anchor"),Ar=o.aP(Ge,Pt,Qt,nr),rr=Rt.programConfigurations.get(N.id),Dr=S.useProgram("circle",rr),vn=Rt.layoutVertexBuffer,Ai=Rt.indexBuffer,zi=S.style.map.terrain&&S.style.map.terrain.getTerrainData(Dt),ui={programConfiguration:rr,program:Dr,layoutVertexBuffer:vn,indexBuffer:Ai,uniformValues:Ml(S,Pt,N,Ar,it),terrainData:zi,projectionData:Ge.getProjectionData({overscaledTileID:Dt,applyGlobeMatrix:!ne,applyTerrainMatrix:!0})};if(ke){const Gi=Rt.segments.get();for(const Pi of Gi)dt.push({segments:new o.aY([Pi]),sortKey:Pi.sortKey,state:ui})}else dt.push({segments:Rt.segments,sortKey:0,state:ui})}ke&&dt.sort(((_t,Dt)=>_t.sortKey-Dt.sortKey));for(const _t of dt){const{programConfiguration:Dt,program:Pt,layoutVertexBuffer:Rt,indexBuffer:Qt,uniformValues:nr,terrainData:Ar,projectionData:rr}=_t.state;Pt.draw(Oe,Qe.TRIANGLES,ot,Ze,ct,En.backCCW,nr,Ar,rr,N.id,Rt,Qt,_t.segments,N.paint,S.transform.zoom,Dt)}})(r,c,f,y,b):o.cp(f)?(function(S,M,N,j,q){if(N.paint.get("heatmap-opacity")===0)return;const ne=S.context,{isRenderingToTexture:ee,isRenderingGlobe:Ae}=q;if(S.style.map.terrain){for(const ve of j){const ke=M.getTile(ve);M.hasRenderableParent(ve)||(S.renderPass==="offscreen"?Ah(S,ke,N,ve,Ae):S.renderPass==="translucent"&&jh(S,N,ve,ee,Ae))}ne.viewport.set([0,0,S.width,S.height])}else S.renderPass==="offscreen"?(function(ve,ke,Oe,Qe){const Ge=ve.context,ot=Ge.gl,Ze=ve.transform,ct=bn.disabled,dt=new Nn([ot.ONE,ot.ONE],o.bq.transparent,[!0,!0,!0,!0]);(function(it,_t,Dt){const Pt=it.gl;it.activeTexture.set(Pt.TEXTURE1),it.viewport.set([0,0,_t.width/4,_t.height/4]);let Rt=Dt.heatmapFbos.get(o.ce);Rt?(Pt.bindTexture(Pt.TEXTURE_2D,Rt.colorAttachment.get()),it.bindFramebuffer.set(Rt.framebuffer)):(Rt=hu(it,_t.width/4,_t.height/4),Dt.heatmapFbos.set(o.ce,Rt))})(Ge,ve,Oe),Ge.clear({color:o.bq.transparent});for(let it=0;it<Qe.length;it++){const _t=Qe[it];if(ke.hasRenderableParent(_t))continue;const Dt=ke.getTile(_t),Pt=Dt.getBucket(Oe);if(!Pt)continue;const Rt=Pt.programConfigurations.get(Oe.id),Qt=ve.useProgram("heatmap",Rt),nr=Ze.getProjectionData({overscaledTileID:_t,applyGlobeMatrix:!0,applyTerrainMatrix:!1}),Ar=Ze.getCircleRadiusCorrection();Qt.draw(Ge,ot.TRIANGLES,mn.disabled,ct,dt,En.backCCW,ga(Dt,Ze.zoom,Oe.paint.get("heatmap-intensity"),Ar),null,nr,Oe.id,Pt.layoutVertexBuffer,Pt.indexBuffer,Pt.segments,Oe.paint,Ze.zoom,Rt)}Ge.viewport.set([0,0,ve.width,ve.height])})(S,M,N,j):S.renderPass==="translucent"&&(function(ve,ke){const Oe=ve.context,Qe=Oe.gl;Oe.setColorMode(ve.colorModeForRenderPass());const Ge=ke.heatmapFbos.get(o.ce);Ge&&(Oe.activeTexture.set(Qe.TEXTURE0),Qe.bindTexture(Qe.TEXTURE_2D,Ge.colorAttachment.get()),Oe.activeTexture.set(Qe.TEXTURE1),zA(Oe,ke).bind(Qe.LINEAR,Qe.CLAMP_TO_EDGE),ve.useProgram("heatmapTexture").draw(Oe,Qe.TRIANGLES,mn.disabled,bn.disabled,ve.colorModeForRenderPass(),En.disabled,fl(ve,ke,0,1),null,null,ke.id,ve.viewportBuffer,ve.quadTriangleIndexBuffer,ve.viewportSegments,ke.paint,ve.transform.zoom))})(S,N)})(r,c,f,y,b):o.cq(f)?(function(S,M,N,j,q){if(S.renderPass!=="translucent")return;const{isRenderingToTexture:ne}=q,ee=N.paint.get("line-opacity"),Ae=N.paint.get("line-width");if(ee.constantOr(1)===0||Ae.constantOr(1)===0)return;const ve=S.getDepthModeForSublayer(0,mn.ReadOnly),ke=S.colorModeForRenderPass(),Oe=N.paint.get("line-dasharray"),Qe=Oe.constantOr(1),Ge=N.paint.get("line-pattern"),ot=Ge.constantOr(1),Ze=N.paint.get("line-gradient"),ct=N.getCrossfadeParameters();let dt;dt=ot?"linePattern":Qe&&Ze?"lineGradientSDF":Qe?"lineSDF":Ze?"lineGradient":"line";const it=S.context,_t=it.gl,Dt=S.transform;let Pt=!0;for(const Rt of j){const Qt=M.getTile(Rt);if(ot&&!Qt.patternsLoaded())continue;const nr=Qt.getBucket(N);if(!nr)continue;const Ar=nr.programConfigurations.get(N.id),rr=S.context.program.get(),Dr=S.useProgram(dt,Ar),vn=Pt||Dr.program!==rr,Ai=S.style.map.terrain&&S.style.map.terrain.getTerrainData(Rt),zi=Ge.constantOr(null),ui=Oe&&Oe.constantOr(null);if(zi&&Qt.imageAtlas){const eo=Qt.imageAtlas,Ts=eo.patternPositions[zi.to.toString()],hi=eo.patternPositions[zi.from.toString()];Ts&&hi&&Ar.setConstantPatternPositions(Ts,hi)}else if(ui){const eo=N.layout.get("line-cap")==="round",Ts=S.lineAtlas.getDash(ui.to,eo),hi=S.lineAtlas.getDash(ui.from,eo);Ar.setConstantDashPositions(Ts,hi)}const Gi=Dt.getProjectionData({overscaledTileID:Rt,applyGlobeMatrix:!ne,applyTerrainMatrix:!0}),Pi=Dt.getPixelScale();let Is;ot?(Is=ya(S,Qt,N,Pi,ct),va(it,_t,Qt,Ar,ct)):Qe&&Ze?(Is=Ul(S,Qt,N,Pi,ct,nr.lineClipsArray.length),co(S,M,it,_t,N,nr,Rt,Ar,ct)):Qe?(Is=Pc(S,Qt,N,Pi,ct),$n(S,it,_t,Ar,vn,ct)):Ze?(Is=ml(S,Qt,N,Pi,nr.lineClipsArray.length),mo(S,M,it,_t,N,nr,Rt)):Is=pl(S,Qt,N,Pi);const Ki=S.stencilModeForClipping(Rt);Dr.draw(it,_t.TRIANGLES,ve,Ki,ke,En.disabled,Is,Ai,Gi,N.id,nr.layoutVertexBuffer,nr.indexBuffer,nr.segments,N.paint,S.transform.zoom,Ar,nr.layoutVertexBuffer2),Pt=!1}})(r,c,f,y,b):o.cr(f)?(function(S,M,N,j,q){const ne=N.paint.get("fill-color"),ee=N.paint.get("fill-opacity");if(ee.constantOr(1)===0)return;const{isRenderingToTexture:Ae}=q,ve=S.colorModeForRenderPass(),ke=N.paint.get("fill-pattern"),Oe=S.opaquePassEnabledForLayer()&&!ke.constantOr(1)&&ne.constantOr(o.bq.transparent).a===1&&ee.constantOr(0)===1?"opaque":"translucent";if(S.renderPass===Oe){const Qe=S.getDepthModeForSublayer(1,S.renderPass==="opaque"?mn.ReadWrite:mn.ReadOnly);Zs(S,M,N,j,Qe,ve,!1,Ae)}if(S.renderPass==="translucent"&&N.paint.get("fill-antialias")){const Qe=S.getDepthModeForSublayer(N.getPaintProperty("fill-outline-color")?2:0,mn.ReadOnly);Zs(S,M,N,j,Qe,ve,!0,Ae)}})(r,c,f,y,b):o.cs(f)?(function(S,M,N,j,q){const ne=N.paint.get("fill-extrusion-opacity");if(ne===0)return;const{isRenderingToTexture:ee}=q;if(S.renderPass==="translucent"){const Ae=new mn(S.context.gl.LEQUAL,mn.ReadWrite,S.depthRangeFor3D);if(ne!==1||N.paint.get("fill-extrusion-pattern").constantOr(1))Nu(S,M,N,j,Ae,bn.disabled,Nn.disabled,ee),Nu(S,M,N,j,Ae,S.stencilModeFor3D(),S.colorModeForRenderPass(),ee);else{const ve=S.colorModeForRenderPass();Nu(S,M,N,j,Ae,bn.disabled,ve,ee)}}})(r,c,f,y,b):o.ct(f)?(function(S,M,N,j,q){if(S.renderPass!=="offscreen"&&S.renderPass!=="translucent")return;const{isRenderingToTexture:ne}=q,ee=S.context,Ae=S.style.projection.useSubdivision,ve=S.getDepthModeForSublayer(0,mn.ReadOnly),ke=S.colorModeForRenderPass();if(S.renderPass==="offscreen")(function(Oe,Qe,Ge,ot,Ze,ct,dt){const it=Oe.context,_t=it.gl;for(const Dt of Ge){const Pt=Qe.getTile(Dt),Rt=Pt.dem;if(!Rt||!Rt.data||!Pt.needsHillshadePrepare)continue;const Qt=Rt.dim,nr=Rt.stride,Ar=Rt.getPixels();if(it.activeTexture.set(_t.TEXTURE1),it.pixelStoreUnpackPremultiplyAlpha.set(!1),Pt.demTexture=Pt.demTexture||Oe.getTileTexture(nr),Pt.demTexture){const Dr=Pt.demTexture;Dr.update(Ar,{premultiply:!1}),Dr.bind(_t.NEAREST,_t.CLAMP_TO_EDGE)}else Pt.demTexture=new o.T(it,Ar,_t.RGBA,{premultiply:!1}),Pt.demTexture.bind(_t.NEAREST,_t.CLAMP_TO_EDGE);it.activeTexture.set(_t.TEXTURE0);let rr=Pt.fbo;if(!rr){const Dr=new o.T(it,{width:Qt,height:Qt,data:null},_t.RGBA);Dr.bind(_t.LINEAR,_t.CLAMP_TO_EDGE),rr=Pt.fbo=it.createFramebuffer(Qt,Qt,!0,!1),rr.colorAttachment.set(Dr.texture)}it.bindFramebuffer.set(rr.framebuffer),it.viewport.set([0,0,Qt,Qt]),Oe.useProgram("hillshadePrepare").draw(it,_t.TRIANGLES,Ze,ct,dt,En.disabled,oc(Pt.tileID,Rt),null,null,ot.id,Oe.rasterBoundsBuffer,Oe.quadTriangleIndexBuffer,Oe.rasterBoundsSegments),Pt.needsHillshadePrepare=!1}})(S,M,j,N,ve,bn.disabled,ke),ee.viewport.set([0,0,S.width,S.height]);else if(S.renderPass==="translucent")if(Ae){const[Oe,Qe,Ge]=S.stencilConfigForOverlapTwoPass(j);Hc(S,M,N,Ge,Oe,ve,ke,!1,ne),Hc(S,M,N,Ge,Qe,ve,ke,!0,ne)}else{const[Oe,Qe]=S.getStencilConfigForOverlapAndUpdateStencilID(j);Hc(S,M,N,Qe,Oe,ve,ke,!1,ne)}})(r,c,f,y,b):o.cu(f)?(function(S,M,N,j,q){if(S.renderPass!=="translucent"||!j.length)return;const{isRenderingToTexture:ne}=q,ee=S.style.projection.useSubdivision,Ae=S.getDepthModeForSublayer(0,mn.ReadOnly),ve=S.colorModeForRenderPass();if(ee){const[ke,Oe,Qe]=S.stencilConfigForOverlapTwoPass(j);Da(S,M,N,Qe,ke,Ae,ve,!1,ne),Da(S,M,N,Qe,Oe,Ae,ve,!0,ne)}else{const[ke,Oe]=S.getStencilConfigForOverlapAndUpdateStencilID(j);Da(S,M,N,Oe,ke,Ae,ve,!1,ne)}})(r,c,f,y,b):o.bV(f)?(function(S,M,N,j,q){if(S.renderPass!=="translucent"||N.paint.get("raster-opacity")===0||!j.length)return;const{isRenderingToTexture:ne}=q,ee=M.getSource(),Ae=S.style.projection.useSubdivision;if(ee instanceof hn)Na(S,M,N,j,null,!1,!1,ee.tileCoords,ee.flippedWindingOrder,ne);else if(Ae){const[ve,ke,Oe]=S.stencilConfigForOverlapTwoPass(j);Na(S,M,N,Oe,ve,!1,!0,Ra,!1,ne),Na(S,M,N,Oe,ke,!0,!0,Ra,!1,ne)}else{const[ve,ke]=S.getStencilConfigForOverlapAndUpdateStencilID(j);Na(S,M,N,ke,ve,!1,!0,Ra,!1,ne)}})(r,c,f,y,b):o.cv(f)?(function(S,M,N,j,q){const ne=N.paint.get("background-color"),ee=N.paint.get("background-opacity");if(ee===0)return;const{isRenderingToTexture:Ae}=q,ve=S.context,ke=ve.gl,Oe=S.style.projection,Qe=S.transform,Ge=Qe.tileSize,ot=N.paint.get("background-pattern");if(S.isPatternMissing(ot))return;const Ze=!ot&&ne.a===1&&ee===1&&S.opaquePassEnabledForLayer()?"opaque":"translucent";if(S.renderPass!==Ze)return;const ct=bn.disabled,dt=S.getDepthModeForSublayer(0,Ze==="opaque"?mn.ReadWrite:mn.ReadOnly),it=S.colorModeForRenderPass(),_t=S.useProgram(ot?"backgroundPattern":"background"),Dt=j||Tn(Qe,{tileSize:Ge,terrain:S.style.map.terrain});ot&&(ve.activeTexture.set(ke.TEXTURE0),S.imageManager.bind(S.context));const Pt=N.getCrossfadeParameters();for(const Rt of Dt){const Qt=Qe.getProjectionData({overscaledTileID:Rt,applyGlobeMatrix:!Ae,applyTerrainMatrix:!0}),nr=ot?os(ee,S,ot,{tileID:Rt,tileSize:Ge},Pt):lc(ee,ne),Ar=S.style.map.terrain&&S.style.map.terrain.getTerrainData(Rt),rr=Oe.getMeshFromTileID(ve,Rt.canonical,!1,!0,"raster");_t.draw(ve,ke.TRIANGLES,dt,ct,it,En.backCCW,nr,Ar,Qt,N.id,rr.vertexBuffer,rr.indexBuffer,rr.segments)}})(r,0,f,y,b):o.cw(f)&&(function(S,M,N,j){const{isRenderingGlobe:q}=j,ne=S.context,ee=N.implementation,Ae=S.style.projection,ve=S.transform,ke=ve.getProjectionDataForCustomLayer(q),Oe={farZ:ve.farZ,nearZ:ve.nearZ,fov:ve.fov*Math.PI/180,modelViewProjectionMatrix:ve.modelViewProjectionMatrix,projectionMatrix:ve.projectionMatrix,shaderData:{variantName:Ae.shaderVariantName,vertexShaderPrelude:`const float PI = 3.141592653589793;
uniform mat4 u_projection_matrix;
${Ae.shaderPreludeCode.vertexSource}`,define:Ae.shaderDefine},defaultProjectionData:ke},Qe=ee.renderingMode?ee.renderingMode:"2d";if(S.renderPass==="offscreen"){const Ge=ee.prerender;Ge&&(S.setCustomLayerDefaults(),ne.setColorMode(S.colorModeForRenderPass()),Ge.call(ee,ne.gl,Oe),ne.setDirty(),S.setBaseState())}else if(S.renderPass==="translucent"){S.setCustomLayerDefaults(),ne.setColorMode(S.colorModeForRenderPass()),ne.setStencilMode(bn.disabled);const Ge=Qe==="3d"?S.getDepthModeFor3D():S.getDepthModeForSublayer(0,mn.ReadOnly);ne.setDepthMode(Ge),ee.render(ne.gl,Oe),ne.setDirty(),S.setBaseState(),ne.bindFramebuffer.set(null)}})(r,0,f,b))}saveTileTexture(r){const c=this._tileTextures[r.size[0]];c?c.push(r):this._tileTextures[r.size[0]]=[r]}getTileTexture(r){const c=this._tileTextures[r];return c&&c.length>0?c.pop():null}isPatternMissing(r){if(!r)return!1;if(!r.from||!r.to)return!0;const c=this.imageManager.getPattern(r.from.toString()),f=this.imageManager.getPattern(r.to.toString());return!c||!f}useProgram(r,c,f=!1,y=[]){this.cache=this.cache||{};const b=!!this.style.map.terrain,S=this.style.projection,M=f?Jn.projectionMercator:S.shaderPreludeCode,N=f?Wi:S.shaderDefine,j=r+(c?c.cacheKey:"")+`/${f?uo:S.shaderVariantName}`+(this._showOverdrawInspector?"/overdraw":"")+(b?"/terrain":"")+(y?`/${y.join("/")}`:"");return this.cache[j]||(this.cache[j]=new La(this.context,Jn[r],c,si[r],this._showOverdrawInspector,b,M,N,y)),this.cache[j]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const r=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(r.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new o.T(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){var r,c;if(this._tileTextures){for(const f in this._tileTextures){const y=this._tileTextures[f];if(y)for(const b of y)b.destroy()}this._tileTextures={}}if(this.tileExtentBuffer&&this.tileExtentBuffer.destroy(),this.debugBuffer&&this.debugBuffer.destroy(),this.rasterBoundsBuffer&&this.rasterBoundsBuffer.destroy(),this.rasterBoundsBufferPosOnly&&this.rasterBoundsBufferPosOnly.destroy(),this.viewportBuffer&&this.viewportBuffer.destroy(),this.tileBorderIndexBuffer&&this.tileBorderIndexBuffer.destroy(),this.quadTriangleIndexBuffer&&this.quadTriangleIndexBuffer.destroy(),this.tileExtentMesh&&((r=this.tileExtentMesh.vertexBuffer)===null||r===void 0||r.destroy()),this.tileExtentMesh&&((c=this.tileExtentMesh.indexBuffer)===null||c===void 0||c.destroy()),this.debugOverlayTexture&&this.debugOverlayTexture.destroy(),this.cache){for(const f in this.cache){const y=this.cache[f];y&&y.program&&this.context.gl.deleteProgram(y.program)}this.cache={}}this.context&&this.context.setDefault()}overLimit(){const{drawingBufferWidth:r,drawingBufferHeight:c}=this.context.gl;return this.width!==r||this.height!==c}}function Ou(w,r){let c,f=!1,y=null,b=null;const S=()=>{y=null,f&&(w.apply(b,c),y=setTimeout(S,r),f=!1)};return(...M)=>(f=!0,b=this,c=M,y||S(),y)}class fA{constructor(r){this._getCurrentHash=()=>{const c=window.location.hash.replace("#","");if(this._hashName){let f;return c.split("&").map((y=>y.split("="))).forEach((y=>{y[0]===this._hashName&&(f=y)})),(f&&f[1]||"").split("/")}return c.split("/")},this._onHashChange=()=>{const c=this._getCurrentHash();if(!this._isValidHash(c))return!1;const f=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(c[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+c[2],+c[1]],zoom:+c[0],bearing:f,pitch:+(c[4]||0)}),!0},this._updateHashUnthrottled=()=>{const c=window.location.href.replace(/(#.*)?$/,this.getHashString());window.history.replaceState(window.history.state,null,c)},this._removeHash=()=>{const c=this._getCurrentHash();if(c.length===0)return;const f=c.join("/");let y=f;y.split("&").length>0&&(y=y.split("&")[0]),this._hashName&&(y=`${this._hashName}=${f}`);let b=window.location.hash.replace(y,"");b.startsWith("#&")?b=b.slice(0,1)+b.slice(2):b==="#"&&(b="");let S=window.location.href.replace(/(#.+)?$/,b);S=S.replace("&&","&"),window.history.replaceState(window.history.state,null,S)},this._updateHash=Ou(this._updateHashUnthrottled,300),this._hashName=r&&encodeURIComponent(r)}addTo(r){return this._map=r,addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this}remove(){return removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),this._removeHash(),delete this._map,this}getHashString(r){const c=this._map.getCenter(),f=Math.round(100*this._map.getZoom())/100,y=Math.ceil((f*Math.LN2+Math.log(512/360/.5))/Math.LN10),b=Math.pow(10,y),S=Math.round(c.lng*b)/b,M=Math.round(c.lat*b)/b,N=this._map.getBearing(),j=this._map.getPitch();let q="";if(q+=r?`/${S}/${M}/${f}`:`${f}/${M}/${S}`,(N||j)&&(q+="/"+Math.round(10*N)/10),j&&(q+=`/${Math.round(j)}`),this._hashName){const ne=this._hashName;let ee=!1;const Ae=window.location.hash.slice(1).split("&").map((ve=>{const ke=ve.split("=")[0];return ke===ne?(ee=!0,`${ke}=${q}`):ve})).filter((ve=>ve));return ee||Ae.push(`${ne}=${q}`),`#${Ae.join("&")}`}return`#${q}`}_isValidHash(r){if(r.length<3||r.some(isNaN))return!1;try{new o.V(+r[2],+r[1])}catch{return!1}const c=+r[0],f=+(r[3]||0),y=+(r[4]||0);return c>=this._map.getMinZoom()&&c<=this._map.getMaxZoom()&&f>=-180&&f<=180&&y>=this._map.getMinPitch()&&y<=this._map.getMaxPitch()}}const Oa={linearity:.3,easing:o.cx(0,0,.3,1)},_a=o.e({deceleration:2500,maxSpeed:1400},Oa),Qs=o.e({deceleration:20,maxSpeed:1400},Oa),jA=o.e({deceleration:1e3,maxSpeed:360},Oa),T=o.e({deceleration:1e3,maxSpeed:90},Oa),R=o.e({deceleration:1e3,maxSpeed:360},Oa);class ${constructor(r){this._map=r,this.clear()}clear(){this._inertiaBuffer=[]}record(r){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:z(),settings:r})}_drainInertiaBuffer(){const r=this._inertiaBuffer,c=z();for(;r.length>0&&c-r[0].time>160;)r.shift()}_onMoveEnd(r){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;const c={zoom:0,bearing:0,pitch:0,roll:0,pan:new o.P(0,0),pinchAround:void 0,around:void 0};for(const{settings:b}of this._inertiaBuffer)c.zoom+=b.zoomDelta||0,c.bearing+=b.bearingDelta||0,c.pitch+=b.pitchDelta||0,c.roll+=b.rollDelta||0,b.panDelta&&c.pan._add(b.panDelta),b.around&&(c.around=b.around),b.pinchAround&&(c.pinchAround=b.pinchAround);const f=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,y={};if(c.pan.mag()){const b=me(c.pan.mag(),f,o.e({},_a,r||{})),S=c.pan.mult(b.amount/c.pan.mag()),M=this._map.cameraHelper.handlePanInertia(S,this._map.transform);y.center=M.easingCenter,y.offset=M.easingOffset,te(y,b)}if(c.zoom){const b=me(c.zoom,f,Qs);y.zoom=this._map.transform.zoom+b.amount,te(y,b)}if(c.bearing){const b=me(c.bearing,f,jA);y.bearing=this._map.transform.bearing+o.ao(b.amount,-179,179),te(y,b)}if(c.pitch){const b=me(c.pitch,f,T);y.pitch=this._map.transform.pitch+b.amount,te(y,b)}if(c.roll){const b=me(c.roll,f,R);y.roll=this._map.transform.roll+o.ao(b.amount,-179,179),te(y,b)}if(y.zoom||y.bearing){const b=c.pinchAround===void 0?c.around:c.pinchAround;y.around=b?this._map.unproject(b):this._map.getCenter()}return this.clear(),o.e(y,{noMoveStart:!0})}}function te(w,r){(!w.duration||w.duration<r.duration)&&(w.duration=r.duration,w.easing=r.easing)}function me(w,r,c){const{maxSpeed:f,linearity:y,deceleration:b}=c,S=o.ao(w*y/(r/1e3),-f,f),M=Math.abs(S)/(b*y);return{easing:c.easing,duration:1e3*M,amount:S*(M/2)}}class we extends o.l{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(r,c,f,y={}){f=f instanceof MouseEvent?f:new MouseEvent(r,f);const b=H.mousePos(c.getCanvas(),f),S=c.unproject(b);super(r,o.e({point:b,lngLat:S,originalEvent:f},y)),this._defaultPrevented=!1,this.target=c}}class Ce extends o.l{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(r,c,f){const y=r==="touchend"?f.changedTouches:f.touches,b=H.touchPos(c.getCanvasContainer(),y),S=b.map((N=>c.unproject(N))),M=b.reduce(((N,j,q,ne)=>N.add(j.div(ne.length))),new o.P(0,0));super(r,{points:b,point:M,lngLats:S,lngLat:c.unproject(M),originalEvent:f}),this._defaultPrevented=!1}}class Te extends o.l{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(r,c,f){super(r,{originalEvent:f}),this._defaultPrevented=!1}}class De{constructor(r,c){this._map=r,this._clickTolerance=c.clickTolerance}reset(){delete this._mousedownPos}wheel(r){return this._firePreventable(new Te(r.type,this._map,r))}mousedown(r,c){return this._mousedownPos=c,this._firePreventable(new we(r.type,this._map,r))}mouseup(r){this._map.fire(new we(r.type,this._map,r))}click(r,c){this._mousedownPos&&this._mousedownPos.dist(c)>=this._clickTolerance||this._map.fire(new we(r.type,this._map,r))}dblclick(r){return this._firePreventable(new we(r.type,this._map,r))}mouseover(r){this._map.fire(new we(r.type,this._map,r))}mouseout(r){this._map.fire(new we(r.type,this._map,r))}touchstart(r){return this._firePreventable(new Ce(r.type,this._map,r))}touchmove(r){this._map.fire(new Ce(r.type,this._map,r))}touchend(r){this._map.fire(new Ce(r.type,this._map,r))}touchcancel(r){this._map.fire(new Ce(r.type,this._map,r))}_firePreventable(r){if(this._map.fire(r),r.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Ke{constructor(r){this._map=r}reset(){this._delayContextMenu=!1,this._ignoreContextMenu=!0,delete this._contextMenuEvent}mousemove(r){this._map.fire(new we(r.type,this._map,r))}mousedown(){this._delayContextMenu=!0,this._ignoreContextMenu=!1}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new we("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(r){this._delayContextMenu?this._contextMenuEvent=r:this._ignoreContextMenu||this._map.fire(new we(r.type,this._map,r)),this._map.listens("contextmenu")&&r.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class $e{constructor(r){this._map=r}get transform(){return this._map._requestedCameraState||this._map.transform}get center(){return{lng:this.transform.center.lng,lat:this.transform.center.lat}}get zoom(){return this.transform.zoom}get pitch(){return this.transform.pitch}get bearing(){return this.transform.bearing}unproject(r){return this.transform.screenPointToLocation(o.P.convert(r),this._map.terrain)}}class kt{constructor(r,c){this._map=r,this._tr=new $e(r),this._el=r.getCanvasContainer(),this._container=r.getContainer(),this._clickTolerance=c.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(r,c){this.isEnabled()&&r.shiftKey&&r.button===0&&(H.disableDrag(),this._startPos=this._lastPos=c,this._active=!0)}mousemoveWindow(r,c){if(!this._active)return;const f=c;if(this._lastPos.equals(f)||!this._box&&f.dist(this._startPos)<this._clickTolerance)return;const y=this._startPos;this._lastPos=f,this._box||(this._box=H.create("div","maplibregl-boxzoom",this._container),this._container.classList.add("maplibregl-crosshair"),this._fireEvent("boxzoomstart",r));const b=Math.min(y.x,f.x),S=Math.max(y.x,f.x),M=Math.min(y.y,f.y),N=Math.max(y.y,f.y);H.setTransform(this._box,`translate(${b}px,${M}px)`),this._box.style.width=S-b+"px",this._box.style.height=N-M+"px"}mouseupWindow(r,c){if(!this._active||r.button!==0)return;const f=this._startPos,y=c;if(this.reset(),H.suppressClick(),f.x!==y.x||f.y!==y.y)return this._map.fire(new o.l("boxzoomend",{originalEvent:r})),{cameraAnimation:b=>b.fitScreenCoordinates(f,y,this._tr.bearing,{linear:!0})};this._fireEvent("boxzoomcancel",r)}keydown(r){this._active&&r.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",r))}reset(){this._active=!1,this._container.classList.remove("maplibregl-crosshair"),this._box&&(H.remove(this._box),this._box=null),H.enableDrag(),delete this._startPos,delete this._lastPos}_fireEvent(r,c){return this._map.fire(new o.l(r,{originalEvent:c}))}}function Xe(w,r){if(w.length!==r.length)throw new Error(`The number of touches and points are not equal - touches ${w.length}, points ${r.length}`);const c={};for(let f=0;f<w.length;f++)c[w[f].identifier]=r[f];return c}class Bt{constructor(r){this.reset(),this.numTouches=r.numTouches}reset(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}touchstart(r,c,f){(this.centroid||f.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=r.timeStamp),f.length===this.numTouches&&(this.centroid=(function(y){const b=new o.P(0,0);for(const S of y)b._add(S);return b.div(y.length)})(c),this.touches=Xe(f,c)))}touchmove(r,c,f){if(this.aborted||!this.centroid)return;const y=Xe(f,c);for(const b in this.touches){const S=y[b];(!S||S.dist(this.touches[b])>30)&&(this.aborted=!0)}}touchend(r,c,f){if((!this.centroid||r.timeStamp-this.startTime>500)&&(this.aborted=!0),f.length===0){const y=!this.aborted&&this.centroid;if(this.reset(),y)return y}}}class Tt{constructor(r){this.singleTap=new Bt(r),this.numTaps=r.numTaps,this.reset()}reset(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}touchstart(r,c,f){this.singleTap.touchstart(r,c,f)}touchmove(r,c,f){this.singleTap.touchmove(r,c,f)}touchend(r,c,f){const y=this.singleTap.touchend(r,c,f);if(y){const b=r.timeStamp-this.lastTime<500,S=!this.lastTap||this.lastTap.dist(y)<30;if(b&&S||this.reset(),this.count++,this.lastTime=r.timeStamp,this.lastTap=y,this.count===this.numTaps)return this.reset(),y}}}class Zt{constructor(r){this._tr=new $e(r),this._zoomIn=new Tt({numTouches:1,numTaps:2}),this._zoomOut=new Tt({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(r,c,f){this._zoomIn.touchstart(r,c,f),this._zoomOut.touchstart(r,c,f)}touchmove(r,c,f){this._zoomIn.touchmove(r,c,f),this._zoomOut.touchmove(r,c,f)}touchend(r,c,f){const y=this._zoomIn.touchend(r,c,f),b=this._zoomOut.touchend(r,c,f),S=this._tr;return y?(this._active=!0,r.preventDefault(),setTimeout((()=>this.reset()),0),{cameraAnimation:M=>M.easeTo({duration:300,zoom:S.zoom+1,around:S.unproject(y)},{originalEvent:r})}):b?(this._active=!0,r.preventDefault(),setTimeout((()=>this.reset()),0),{cameraAnimation:M=>M.easeTo({duration:300,zoom:S.zoom-1,around:S.unproject(b)},{originalEvent:r})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Ut{constructor(r){this._enabled=!!r.enable,this._moveStateManager=r.moveStateManager,this._clickTolerance=r.clickTolerance||1,this._moveFunction=r.move,this._activateOnStart=!!r.activateOnStart,r.assignEvents(this),this.reset()}reset(r){this._active=!1,this._moved=!1,delete this._lastPoint,this._moveStateManager.endMove(r)}_move(...r){const c=this._moveFunction(...r);if(c.bearingDelta||c.pitchDelta||c.rollDelta||c.around||c.panDelta)return this._active=!0,c}dragStart(r,c){this.isEnabled()&&!this._lastPoint&&this._moveStateManager.isValidStartEvent(r)&&(this._moveStateManager.startMove(r),this._lastPoint=Array.isArray(c)?c[0]:c,this._activateOnStart&&this._lastPoint&&(this._active=!0))}dragMove(r,c){if(!this.isEnabled())return;const f=this._lastPoint;if(!f)return;if(r.preventDefault(),!this._moveStateManager.isValidMoveEvent(r))return void this.reset(r);const y=Array.isArray(c)?c[0]:c;return!this._moved&&y.dist(f)<this._clickTolerance?void 0:(this._moved=!0,this._lastPoint=y,this._move(f,y))}dragEnd(r){this.isEnabled()&&this._lastPoint&&this._moveStateManager.isValidEndEvent(r)&&(this._moved&&H.suppressClick(),this.reset(r))}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}getClickTolerance(){return this._clickTolerance}}const Kt=0,$t=2,tr={[Kt]:1,[$t]:2};class er{constructor(r){this._correctEvent=r.checkCorrectEvent}startMove(r){const c=H.mouseButton(r);this._eventButton=c}endMove(r){delete this._eventButton}isValidStartEvent(r){return this._correctEvent(r)}isValidMoveEvent(r){return!(function(c,f){const y=tr[f];return c.buttons===void 0||(c.buttons&y)!==y})(r,this._eventButton)}isValidEndEvent(r){return H.mouseButton(r)===this._eventButton}}class sn{constructor(){this._firstTouch=void 0}_isOneFingerTouch(r){return r.targetTouches.length===1}_isSameTouchEvent(r){return r.targetTouches[0].identifier===this._firstTouch}startMove(r){this._firstTouch=r.targetTouches[0].identifier}endMove(r){delete this._firstTouch}isValidStartEvent(r){return this._isOneFingerTouch(r)}isValidMoveEvent(r){return this._isOneFingerTouch(r)&&this._isSameTouchEvent(r)}isValidEndEvent(r){return this._isOneFingerTouch(r)&&this._isSameTouchEvent(r)}}class zr{constructor(r=new er({checkCorrectEvent:()=>!0}),c=new sn){this.mouseMoveStateManager=r,this.oneFingerTouchMoveStateManager=c}_executeRelevantHandler(r,c,f){return r instanceof MouseEvent?c(r):typeof TouchEvent<"u"&&r instanceof TouchEvent?f(r):void 0}startMove(r){this._executeRelevantHandler(r,(c=>this.mouseMoveStateManager.startMove(c)),(c=>this.oneFingerTouchMoveStateManager.startMove(c)))}endMove(r){this._executeRelevantHandler(r,(c=>this.mouseMoveStateManager.endMove(c)),(c=>this.oneFingerTouchMoveStateManager.endMove(c)))}isValidStartEvent(r){return this._executeRelevantHandler(r,(c=>this.mouseMoveStateManager.isValidStartEvent(c)),(c=>this.oneFingerTouchMoveStateManager.isValidStartEvent(c)))}isValidMoveEvent(r){return this._executeRelevantHandler(r,(c=>this.mouseMoveStateManager.isValidMoveEvent(c)),(c=>this.oneFingerTouchMoveStateManager.isValidMoveEvent(c)))}isValidEndEvent(r){return this._executeRelevantHandler(r,(c=>this.mouseMoveStateManager.isValidEndEvent(c)),(c=>this.oneFingerTouchMoveStateManager.isValidEndEvent(c)))}}const Cn=w=>{w.mousedown=w.dragStart,w.mousemoveWindow=w.dragMove,w.mouseup=w.dragEnd,w.contextmenu=r=>{r.preventDefault()}};class Zr{constructor(r,c){this._clickTolerance=r.clickTolerance||1,this._map=c,this.reset()}reset(){this._active=!1,this._touches={},this._sum=new o.P(0,0)}_shouldBePrevented(r){return r<(this._map.cooperativeGestures.isEnabled()?2:1)}touchstart(r,c,f){return this._calculateTransform(r,c,f)}touchmove(r,c,f){if(this._active){if(!this._shouldBePrevented(f.length))return r.preventDefault(),this._calculateTransform(r,c,f);this._map.cooperativeGestures.notifyGestureBlocked("touch_pan",r)}}touchend(r,c,f){this._calculateTransform(r,c,f),this._active&&this._shouldBePrevented(f.length)&&this.reset()}touchcancel(){this.reset()}_calculateTransform(r,c,f){f.length>0&&(this._active=!0);const y=Xe(f,c),b=new o.P(0,0),S=new o.P(0,0);let M=0;for(const j in y){const q=y[j],ne=this._touches[j];ne&&(b._add(q),S._add(q.sub(ne)),M++,y[j]=q)}if(this._touches=y,this._shouldBePrevented(M)||!S.mag())return;const N=S.div(M);return this._sum._add(N),this._sum.mag()<this._clickTolerance?void 0:{around:b.div(M),panDelta:N}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Qn{constructor(){this.reset()}reset(){this._active=!1,delete this._firstTwoTouches}touchstart(r,c,f){this._firstTwoTouches||f.length<2||(this._firstTwoTouches=[f[0].identifier,f[1].identifier],this._start([c[0],c[1]]))}touchmove(r,c,f){if(!this._firstTwoTouches)return;r.preventDefault();const[y,b]=this._firstTwoTouches,S=Ni(f,c,y),M=Ni(f,c,b);if(!S||!M)return;const N=this._aroundCenter?null:S.add(M).div(2);return this._move([S,M],N,r)}touchend(r,c,f){if(!this._firstTwoTouches)return;const[y,b]=this._firstTwoTouches,S=Ni(f,c,y),M=Ni(f,c,b);S&&M||(this._active&&H.suppressClick(),this.reset())}touchcancel(){this.reset()}enable(r){this._enabled=!0,this._aroundCenter=!!r&&r.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return!!this._enabled}isActive(){return!!this._active}}function Ni(w,r,c){for(let f=0;f<w.length;f++)if(w[f].identifier===c)return r[f]}function Sn(w,r){return Math.log(w/r)/Math.LN2}class Hr extends Qn{reset(){super.reset(),delete this._distance,delete this._startDistance}_start(r){this._startDistance=this._distance=r[0].dist(r[1])}_move(r,c){const f=this._distance;if(this._distance=r[0].dist(r[1]),this._active||!(Math.abs(Sn(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:Sn(this._distance,f),pinchAround:c}}}function Fr(w,r){return 180*w.angleWith(r)/Math.PI}class pi extends Qn{reset(){super.reset(),delete this._minDiameter,delete this._startVector,delete this._vector}_start(r){this._startVector=this._vector=r[0].sub(r[1]),this._minDiameter=r[0].dist(r[1])}_move(r,c,f){const y=this._vector;if(this._vector=r[0].sub(r[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:Fr(this._vector,y),pinchAround:c}}_isBelowThreshold(r){this._minDiameter=Math.min(this._minDiameter,r.mag());const c=25/(Math.PI*this._minDiameter)*360,f=Fr(r,this._startVector);return Math.abs(f)<c}}function Mr(w){return Math.abs(w.y)>Math.abs(w.x)}class zn extends Qn{constructor(r){super(),this._currentTouchCount=0,this._map=r}reset(){super.reset(),this._valid=void 0,delete this._firstMove,delete this._lastPoints}touchstart(r,c,f){super.touchstart(r,c,f),this._currentTouchCount=f.length}_start(r){this._lastPoints=r,Mr(r[0].sub(r[1]))&&(this._valid=!1)}_move(r,c,f){if(this._map.cooperativeGestures.isEnabled()&&this._currentTouchCount<3)return;const y=r[0].sub(this._lastPoints[0]),b=r[1].sub(this._lastPoints[1]);return this._valid=this.gestureBeginsVertically(y,b,f.timeStamp),this._valid?(this._lastPoints=r,this._active=!0,{pitchDelta:(y.y+b.y)/2*-.5}):void 0}gestureBeginsVertically(r,c,f){if(this._valid!==void 0)return this._valid;const y=r.mag()>=2,b=c.mag()>=2;if(!y&&!b)return;if(!y||!b)return this._firstMove===void 0&&(this._firstMove=f),f-this._firstMove<100&&void 0;const S=r.y>0==c.y>0;return Mr(r)&&Mr(c)&&S}}const mi={panStep:100,bearingStep:15,pitchStep:10};class as{constructor(r){this._tr=new $e(r);const c=mi;this._panStep=c.panStep,this._bearingStep=c.bearingStep,this._pitchStep=c.pitchStep,this._rotationDisabled=!1}reset(){this._active=!1}keydown(r){if(r.altKey||r.ctrlKey||r.metaKey)return;let c=0,f=0,y=0,b=0,S=0;switch(r.keyCode){case 61:case 107:case 171:case 187:c=1;break;case 189:case 109:case 173:c=-1;break;case 37:r.shiftKey?f=-1:(r.preventDefault(),b=-1);break;case 39:r.shiftKey?f=1:(r.preventDefault(),b=1);break;case 38:r.shiftKey?y=1:(r.preventDefault(),S=-1);break;case 40:r.shiftKey?y=-1:(r.preventDefault(),S=1);break;default:return}return this._rotationDisabled&&(f=0,y=0),{cameraAnimation:M=>{const N=this._tr;M.easeTo({duration:300,easeId:"keyboardHandler",easing:ls,zoom:c?Math.round(N.zoom)+c*(r.shiftKey?2:1):N.zoom,bearing:N.bearing+f*this._bearingStep,pitch:N.pitch+y*this._pitchStep,offset:[-b*this._panStep,-S*this._panStep],center:N.center},{originalEvent:r})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function ls(w){return w*(2-w)}const Qi=4.000244140625,Bs=1/450;class Cs{constructor(r,c){this._onTimeout=f=>{this._type="wheel",this._delta-=this._lastValue,this._active||this._start(f)},this._map=r,this._tr=new $e(r),this._triggerRenderFrame=c,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=Bs}setZoomRate(r){this._defaultZoomRate=r}setWheelZoomRate(r){this._wheelZoomRate=r}isEnabled(){return!!this._enabled}isActive(){return!!this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(r){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!r&&r.around==="center")}disable(){this.isEnabled()&&(this._enabled=!1)}_shouldBePrevented(r){return!!this._map.cooperativeGestures.isEnabled()&&!(r.ctrlKey||this._map.cooperativeGestures.isBypassed(r))}wheel(r){if(!this.isEnabled())return;if(this._shouldBePrevented(r))return void this._map.cooperativeGestures.notifyGestureBlocked("wheel_zoom",r);let c=r.deltaMode===WheelEvent.DOM_DELTA_LINE?40*r.deltaY:r.deltaY;const f=z(),y=f-(this._lastWheelEventTime||0);this._lastWheelEventTime=f,c!==0&&c%Qi==0?this._type="wheel":c!==0&&Math.abs(c)<4?this._type="trackpad":y>400?(this._type=null,this._lastValue=c,this._timeout=setTimeout(this._onTimeout,40,r)):this._type||(this._type=Math.abs(y*c)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,c+=this._lastValue)),r.shiftKey&&c&&(c/=4),this._type&&(this._lastWheelEvent=r,this._delta-=c,this._active||this._start(r)),r.preventDefault()}_start(r){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const c=H.mousePos(this._map.getCanvas(),r),f=this._tr;this._aroundPoint=this._aroundCenter?f.transform.locationToScreenPoint(o.V.convert(f.center)):c,this._frameId||(this._frameId=!0,this._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const r=this._tr.transform;if(typeof this._lastExpectedZoom=="number"){const M=r.zoom-this._lastExpectedZoom;typeof this._startZoom=="number"&&(this._startZoom+=M),typeof this._targetZoom=="number"&&(this._targetZoom+=M)}if(this._delta!==0){const M=this._type==="wheel"&&Math.abs(this._delta)>Qi?this._wheelZoomRate:this._defaultZoomRate;let N=2/(1+Math.exp(-Math.abs(this._delta*M)));this._delta<0&&N!==0&&(N=1/N);const j=typeof this._targetZoom!="number"?r.scale:o.ar(this._targetZoom);this._targetZoom=r.applyConstrain(r.getCameraLngLat(),o.au(j*N)).zoom,this._type==="wheel"&&(this._startZoom=r.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}const c=typeof this._targetZoom!="number"?r.zoom:this._targetZoom,f=this._startZoom,y=this._easing;let b,S=!1;if(this._type==="wheel"&&f&&y){const M=z()-this._lastWheelEventTime,N=Math.min((M+5)/200,1),j=y(N);b=o.G.number(f,c,j),N<1?this._frameId||(this._frameId=!0):S=!0}else b=c,S=!0;return this._active=!0,S&&(this._active=!1,this._finishTimeout=setTimeout((()=>{this._zooming=!1,this._triggerRenderFrame(),delete this._targetZoom,delete this._lastExpectedZoom,delete this._finishTimeout}),200)),this._lastExpectedZoom=b,{noInertia:!0,needsRenderFrame:!S,zoomDelta:b-r.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}_smoothOutEasing(r){let c=o.cz;if(this._prevEase){const f=this._prevEase,y=(z()-f.start)/f.duration,b=f.easing(y+.01)-f.easing(y),S=.27/Math.sqrt(b*b+1e-4)*.01,M=Math.sqrt(.0729-S*S);c=o.cx(S,M,.25,1)}return this._prevEase={start:z(),duration:r,easing:c},c}reset(){this._active=!1,this._zooming=!1,delete this._targetZoom,delete this._lastExpectedZoom,this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout)}}class Oi{constructor(r,c){this._clickZoom=r,this._tapZoom=c}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class Fn{constructor(r){this._tr=new $e(r),this.reset()}reset(){this._active=!1}dblclick(r,c){return r.preventDefault(),{cameraAnimation:f=>{f.easeTo({duration:300,zoom:this._tr.zoom+(r.shiftKey?-1:1),around:this._tr.unproject(c)},{originalEvent:r})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Yn{constructor(){this._tap=new Tt({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,delete this._tapPoint,this._tap.reset()}touchstart(r,c,f){if(!this._swipePoint)if(this._tapTime){const y=c[0],b=r.timeStamp-this._tapTime<500,S=this._tapPoint.dist(y)<30;b&&S?f.length>0&&(this._swipePoint=y,this._swipeTouch=f[0].identifier):this.reset()}else this._tap.touchstart(r,c,f)}touchmove(r,c,f){if(this._tapTime){if(this._swipePoint){if(f[0].identifier!==this._swipeTouch)return;const y=c[0],b=y.y-this._swipePoint.y;return this._swipePoint=y,r.preventDefault(),this._active=!0,{zoomDelta:b/128}}}else this._tap.touchmove(r,c,f)}touchend(r,c,f){if(this._tapTime)this._swipePoint&&f.length===0&&this.reset();else{const y=this._tap.touchend(r,c,f);y&&(this._tapTime=r.timeStamp,this._tapPoint=y)}}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class gr{constructor(r,c,f){this._el=r,this._mousePan=c,this._touchPan=f}enable(r){this._inertiaOptions=r||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("maplibregl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("maplibregl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class xr{constructor(r,c,f,y){this._pitchWithRotate=r.pitchWithRotate,this._rollEnabled=r.rollEnabled,this._mouseRotate=c,this._mousePitch=f,this._mouseRoll=y}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable(),this._rollEnabled&&this._mouseRoll.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable(),this._mouseRoll.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())&&(!this._rollEnabled||this._mouseRoll.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()||this._mouseRoll.isActive()}}class Ti{constructor(r,c,f,y){this._el=r,this._touchZoom=c,this._touchRotate=f,this._tapDragZoom=y,this._rotationDisabled=!1,this._enabled=!0}enable(r){this._touchZoom.enable(r),this._rotationDisabled||this._touchRotate.enable(r),this._tapDragZoom.enable(),this._el.classList.add("maplibregl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("maplibregl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}class Vi{constructor(r,c){this._bypassKey=navigator.userAgent.indexOf("Mac")!==-1?"metaKey":"ctrlKey",this._map=r,this._options=c,this._enabled=!1}isActive(){return!1}reset(){}_setupUI(){if(this._container)return;const r=this._map.getCanvasContainer();r.classList.add("maplibregl-cooperative-gestures"),this._container=H.create("div","maplibregl-cooperative-gesture-screen",r);let c=this._map._getUIString("CooperativeGesturesHandler.WindowsHelpText");this._bypassKey==="metaKey"&&(c=this._map._getUIString("CooperativeGesturesHandler.MacHelpText"));const f=this._map._getUIString("CooperativeGesturesHandler.MobileHelpText"),y=document.createElement("div");y.className="maplibregl-desktop-message",y.textContent=c,this._container.appendChild(y);const b=document.createElement("div");b.className="maplibregl-mobile-message",b.textContent=f,this._container.appendChild(b),this._container.setAttribute("aria-hidden","true")}_destroyUI(){this._container&&(H.remove(this._container),this._map.getCanvasContainer().classList.remove("maplibregl-cooperative-gestures")),delete this._container}enable(){this._setupUI(),this._enabled=!0}disable(){this._enabled=!1,this._destroyUI()}isEnabled(){return this._enabled}isBypassed(r){return r[this._bypassKey]}notifyGestureBlocked(r,c){this._enabled&&(this._map.fire(new o.l("cooperativegestureprevented",{gestureType:r,originalEvent:c})),this._container.classList.add("maplibregl-show"),setTimeout((()=>{this._container.classList.remove("maplibregl-show")}),100))}}const ei=w=>w.zoom||w.drag||w.roll||w.pitch||w.rotate;class ci extends o.l{}function Rn(w){return w.panDelta&&w.panDelta.mag()||w.zoomDelta||w.bearingDelta||w.pitchDelta||w.rollDelta}class wi{constructor(r,c){this.handleWindowEvent=y=>{this.handleEvent(y,`${y.type}Window`)},this.handleEvent=(y,b)=>{if(y.type==="blur")return void this.stop(!0);this._updatingCamera=!0;const S=y.type==="renderFrame"?void 0:y,M={needsRenderFrame:!1},N={},j={};for(const{handlerName:ee,handler:Ae,allowed:ve}of this._handlers){if(!Ae.isEnabled())continue;let ke;if(this._blockedByActive(j,ve,ee))Ae.reset();else if(Ae[b||y.type]){if(o.cA(y,b||y.type)){const Oe=H.mousePos(this._map.getCanvas(),y);ke=Ae[b||y.type](y,Oe)}else if(o.cB(y,b||y.type)){const Oe=this._getMapTouches(y.touches),Qe=H.touchPos(this._map.getCanvas(),Oe);ke=Ae[b||y.type](y,Qe,Oe)}else o.cC(b||y.type)||(ke=Ae[b||y.type](y));this.mergeHandlerResult(M,N,ke,ee,S),ke&&ke.needsRenderFrame&&this._triggerRenderFrame()}(ke||Ae.isActive())&&(j[ee]=Ae)}const q={};for(const ee in this._previousActiveHandlers)j[ee]||(q[ee]=S);this._previousActiveHandlers=j,(Object.keys(q).length||Rn(M))&&(this._changes.push([M,N,q]),this._triggerRenderFrame()),(Object.keys(j).length||Rn(M))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:ne}=M;ne&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],ne(this._map))},this._map=r,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new $(r),this._bearingSnap=c.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(c);const f=this._el;this._listeners=[[f,"touchstart",{passive:!0}],[f,"touchmove",{passive:!1}],[f,"touchend",void 0],[f,"touchcancel",void 0],[f,"mousedown",void 0],[f,"mousemove",void 0],[f,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[f,"mouseover",void 0],[f,"mouseout",void 0],[f,"dblclick",void 0],[f,"click",void 0],[f,"keydown",{capture:!1}],[f,"keyup",void 0],[f,"wheel",{passive:!1}],[f,"contextmenu",void 0],[window,"blur",void 0]];for(const[y,b,S]of this._listeners)H.addEventListener(y,b,y===document?this.handleWindowEvent:this.handleEvent,S)}destroy(){for(const[r,c,f]of this._listeners)H.removeEventListener(r,c,r===document?this.handleWindowEvent:this.handleEvent,f)}_addDefaultHandlers(r){const c=this._map,f=c.getCanvasContainer();this._add("mapEvent",new De(c,r));const y=c.boxZoom=new kt(c,r);this._add("boxZoom",y),r.interactive&&r.boxZoom&&y.enable();const b=c.cooperativeGestures=new Vi(c,r.cooperativeGestures);this._add("cooperativeGestures",b),r.cooperativeGestures&&b.enable();const S=new Zt(c),M=new Fn(c);c.doubleClickZoom=new Oi(M,S),this._add("tapZoom",S),this._add("clickZoom",M),r.interactive&&r.doubleClickZoom&&c.doubleClickZoom.enable();const N=new Yn;this._add("tapDragZoom",N);const j=c.touchPitch=new zn(c);this._add("touchPitch",j),r.interactive&&r.touchPitch&&c.touchPitch.enable(r.touchPitch);const q=()=>c.project(c.getCenter()),ne=(function({enable:Ze,clickTolerance:ct,aroundCenter:dt=!0,minPixelCenterThreshold:it=100,rotateDegreesPerPixelMoved:_t=.8},Dt){const Pt=new er({checkCorrectEvent:Rt=>H.mouseButton(Rt)===0&&Rt.ctrlKey||H.mouseButton(Rt)===2&&!Rt.ctrlKey});return new Ut({clickTolerance:ct,move:(Rt,Qt)=>{const nr=Dt();if(dt&&Math.abs(nr.y-Rt.y)>it)return{bearingDelta:o.cy(new o.P(Rt.x,Qt.y),Qt,nr)};let Ar=(Qt.x-Rt.x)*_t;return dt&&Qt.y<nr.y&&(Ar=-Ar),{bearingDelta:Ar}},moveStateManager:Pt,enable:Ze,assignEvents:Cn})})(r,q),ee=(function({enable:Ze,clickTolerance:ct,pitchDegreesPerPixelMoved:dt=-.5}){const it=new er({checkCorrectEvent:_t=>H.mouseButton(_t)===0&&_t.ctrlKey||H.mouseButton(_t)===2});return new Ut({clickTolerance:ct,move:(_t,Dt)=>({pitchDelta:(Dt.y-_t.y)*dt}),moveStateManager:it,enable:Ze,assignEvents:Cn})})(r),Ae=(function({enable:Ze,clickTolerance:ct,rollDegreesPerPixelMoved:dt=.3},it){const _t=new er({checkCorrectEvent:Dt=>H.mouseButton(Dt)===2&&Dt.ctrlKey});return new Ut({clickTolerance:ct,move:(Dt,Pt)=>{const Rt=it();let Qt=(Pt.x-Dt.x)*dt;return Pt.y<Rt.y&&(Qt=-Qt),{rollDelta:Qt}},moveStateManager:_t,enable:Ze,assignEvents:Cn})})(r,q);c.dragRotate=new xr(r,ne,ee,Ae),this._add("mouseRotate",ne,["mousePitch"]),this._add("mousePitch",ee,["mouseRotate","mouseRoll"]),this._add("mouseRoll",Ae,["mousePitch"]),r.interactive&&r.dragRotate&&c.dragRotate.enable();const ve=(function({enable:Ze,clickTolerance:ct}){const dt=new er({checkCorrectEvent:it=>H.mouseButton(it)===0&&!it.ctrlKey});return new Ut({clickTolerance:ct,move:(it,_t)=>({around:_t,panDelta:_t.sub(it)}),activateOnStart:!0,moveStateManager:dt,enable:Ze,assignEvents:Cn})})(r),ke=new Zr(r,c);c.dragPan=new gr(f,ve,ke),this._add("mousePan",ve),this._add("touchPan",ke,["touchZoom","touchRotate"]),r.interactive&&r.dragPan&&c.dragPan.enable(r.dragPan);const Oe=new pi,Qe=new Hr;c.touchZoomRotate=new Ti(f,Qe,Oe,N),this._add("touchRotate",Oe,["touchPan","touchZoom"]),this._add("touchZoom",Qe,["touchPan","touchRotate"]),r.interactive&&r.touchZoomRotate&&c.touchZoomRotate.enable(r.touchZoomRotate),this._add("blockableMapEvent",new Ke(c));const Ge=c.scrollZoom=new Cs(c,(()=>this._triggerRenderFrame()));this._add("scrollZoom",Ge,["mousePan"]),r.interactive&&r.scrollZoom&&c.scrollZoom.enable(r.scrollZoom);const ot=c.keyboard=new as(c);this._add("keyboard",ot),r.interactive&&r.keyboard&&c.keyboard.enable()}_add(r,c,f){this._handlers.push({handlerName:r,handler:c,allowed:f}),this._handlersById[r]=c}stop(r){if(!this._updatingCamera){for(const{handler:c}of this._handlers)c.reset();this._inertia.clear(),this._fireEvents({},{},r),this._changes=[]}}isActive(){for(const{handler:r}of this._handlers)if(r.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!ei(this._eventsInProgress)||this.isZooming()}_blockedByActive(r,c,f){for(const y in r)if(y!==f&&(!c||c.indexOf(y)<0))return!0;return!1}_getMapTouches(r){const c=[];for(const f of r)this._el.contains(f.target)&&c.push(f);return c}mergeHandlerResult(r,c,f,y,b){if(!f)return;o.e(r,f);const S={handlerName:y,originalEvent:f.originalEvent||b};f.zoomDelta!==void 0&&(c.zoom=S),f.panDelta!==void 0&&(c.drag=S),f.rollDelta!==void 0&&(c.roll=S),f.pitchDelta!==void 0&&(c.pitch=S),f.bearingDelta!==void 0&&(c.rotate=S)}_applyChanges(){const r={},c={},f={};for(const[y,b,S]of this._changes)y.panDelta&&(r.panDelta=(r.panDelta||new o.P(0,0))._add(y.panDelta)),y.zoomDelta&&(r.zoomDelta=(r.zoomDelta||0)+y.zoomDelta),y.bearingDelta&&(r.bearingDelta=(r.bearingDelta||0)+y.bearingDelta),y.pitchDelta&&(r.pitchDelta=(r.pitchDelta||0)+y.pitchDelta),y.rollDelta&&(r.rollDelta=(r.rollDelta||0)+y.rollDelta),y.around!==void 0&&(r.around=y.around),y.pinchAround!==void 0&&(r.pinchAround=y.pinchAround),y.noInertia&&(r.noInertia=y.noInertia),o.e(c,b),o.e(f,S);this._updateMapTransform(r,c,f),this._changes=[]}_updateMapTransform(r,c,f){const y=this._map,b=y._getTransformForUpdate(),S=y.terrain;if(!(Rn(r)||S&&this._terrainMovement))return this._fireEvents(c,f,!0);y._stop(!0);let{panDelta:M,zoomDelta:N,bearingDelta:j,pitchDelta:q,rollDelta:ne,around:ee,pinchAround:Ae}=r;Ae!==void 0&&(ee=Ae),ee=ee||y.transform.centerPoint,S&&!b.isPointOnMapSurface(ee)&&(ee=b.centerPoint);const ve={panDelta:M,zoomDelta:N,rollDelta:ne,pitchDelta:q,bearingDelta:j,around:ee};this._map.cameraHelper.useGlobeControls&&!b.isPointOnMapSurface(ee)&&(ee=b.centerPoint);const ke=ee.distSqr(b.centerPoint)<.01?b.center:b.screenPointToLocation(M?ee.sub(M):ee);this._handleMapControls({terrain:S,tr:b,deltasForHelper:ve,preZoomAroundLoc:ke,combinedEventsInProgress:c,panDelta:M}),y._applyUpdatedTransform(b),this._map._update(),r.noInertia||this._inertia.record(r),this._fireEvents(c,f,!0)}_handleMapControls({terrain:r,tr:c,deltasForHelper:f,preZoomAroundLoc:y,combinedEventsInProgress:b,panDelta:S}){const M=this._map.cameraHelper;if(M.handleMapControlsRollPitchBearingZoom(f,c),r)return M.useGlobeControls?(this._terrainMovement||!b.drag&&!b.zoom||(this._terrainMovement=!0,this._map._elevationFreeze=!0),void M.handleMapControlsPan(f,c,y)):this._terrainMovement||!b.drag&&!b.zoom?void(b.drag&&this._terrainMovement&&S?c.setCenter(c.screenPointToLocation(c.centerPoint.sub(S))):M.handleMapControlsPan(f,c,y)):(this._terrainMovement=!0,this._map._elevationFreeze=!0,void M.handleMapControlsPan(f,c,y));M.handleMapControlsPan(f,c,y)}_fireEvents(r,c,f){const y=ei(this._eventsInProgress),b=ei(r),S={};for(const ne in r){const{originalEvent:ee}=r[ne];this._eventsInProgress[ne]||(S[`${ne}start`]=ee),this._eventsInProgress[ne]=r[ne]}!y&&b&&this._fireEvent("movestart",b.originalEvent);for(const ne in S)this._fireEvent(ne,S[ne]);b&&this._fireEvent("move",b.originalEvent);for(const ne in r){const{originalEvent:ee}=r[ne];this._fireEvent(ne,ee)}const M={};let N;for(const ne in this._eventsInProgress){const{handlerName:ee,originalEvent:Ae}=this._eventsInProgress[ne];this._handlersById[ee].isActive()||(delete this._eventsInProgress[ne],N=c[ee]||Ae,M[`${ne}end`]=N)}for(const ne in M)this._fireEvent(ne,M[ne]);const j=ei(this._eventsInProgress),q=(y||b)&&!j;if(q&&this._terrainMovement){this._map._elevationFreeze=!1,this._terrainMovement=!1;const ne=this._map._getTransformForUpdate();this._map.getCenterClampedToGround()&&ne.recalculateZoomAndCenter(this._map.terrain),this._map._applyUpdatedTransform(ne)}if(f&&q){this._updatingCamera=!0;const ne=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),ee=Ae=>Ae!==0&&-this._bearingSnap<Ae&&Ae<this._bearingSnap;!ne||!ne.essential&&P.prefersReducedMotion?(this._map.fire(new o.l("moveend",{originalEvent:N})),ee(this._map.getBearing())&&this._map.resetNorth()):(ee(ne.bearing||this._map.getBearing())&&(ne.bearing=0),ne.freezeElevation=!0,this._map.easeTo(ne,{originalEvent:N})),this._updatingCamera=!1}}_fireEvent(r,c){this._map.fire(new o.l(r,c?{originalEvent:c}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add((r=>{delete this._frameId,this.handleEvent(new ci("renderFrame",{timeStamp:r})),this._applyChanges()}))}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}class Es extends o.E{constructor(r,c,f){super(),this._renderFrameCallback=()=>{const y=Math.min((z()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(y)),y<1&&this._easeFrameId?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},this._moving=!1,this._zooming=!1,this.transform=r,this._bearingSnap=f.bearingSnap,this.cameraHelper=c,this.on("moveend",(()=>{delete this._requestedCameraState}))}migrateProjection(r,c){r.apply(this.transform),this.transform=r,this.cameraHelper=c}getCenter(){return new o.V(this.transform.center.lng,this.transform.center.lat)}setCenter(r,c){return this.jumpTo({center:r},c)}getCenterElevation(){return this.transform.elevation}setCenterElevation(r,c){return this.jumpTo({elevation:r},c),this}getCenterClampedToGround(){return this._centerClampedToGround}setCenterClampedToGround(r){this._centerClampedToGround=r}panBy(r,c,f){return r=o.P.convert(r).mult(-1),this.panTo(this.transform.center,o.e({offset:r},c),f)}panTo(r,c,f){return this.easeTo(o.e({center:r},c),f)}getZoom(){return this.transform.zoom}setZoom(r,c){return this.jumpTo({zoom:r},c),this}zoomTo(r,c,f){return this.easeTo(o.e({zoom:r},c),f)}zoomIn(r,c){return this.zoomTo(this.getZoom()+1,r,c),this}zoomOut(r,c){return this.zoomTo(this.getZoom()-1,r,c),this}getVerticalFieldOfView(){return this.transform.fov}setVerticalFieldOfView(r,c){return r!=this.transform.fov&&(this.transform.setFov(r),this.fire(new o.l("movestart",c)).fire(new o.l("move",c)).fire(new o.l("moveend",c))),this}getBearing(){return this.transform.bearing}setBearing(r,c){return this.jumpTo({bearing:r},c),this}getPadding(){return this.transform.padding}setPadding(r,c){return this.jumpTo({padding:r},c),this}rotateTo(r,c,f){return this.easeTo(o.e({bearing:r},c),f)}resetNorth(r,c){return this.rotateTo(0,o.e({duration:1e3},r),c),this}resetNorthPitch(r,c){return this.easeTo(o.e({bearing:0,pitch:0,roll:0,duration:1e3},r),c),this}snapToNorth(r,c){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(r,c):this}getPitch(){return this.transform.pitch}setPitch(r,c){return this.jumpTo({pitch:r},c),this}getRoll(){return this.transform.roll}setRoll(r,c){return this.jumpTo({roll:r},c),this}cameraForBounds(r,c){r=Ur.convert(r).adjustAntiMeridian();const f=c&&c.bearing||0;return this._cameraForBoxAndBearing(r.getNorthWest(),r.getSouthEast(),f,c)}_cameraForBoxAndBearing(r,c,f,y){const b={top:0,bottom:0,right:0,left:0};if(typeof(y=o.e({padding:b,offset:[0,0],maxZoom:this.transform.maxZoom},y)).padding=="number"){const j=y.padding;y.padding={top:j,bottom:j,right:j,left:j}}const S=o.e(b,y.padding);y.padding=S;const M=this.transform,N=new Ur(r,c);return this.cameraHelper.cameraForBoxAndBearing(y,S,N,f,M)}fitBounds(r,c,f){return this._fitInternal(this.cameraForBounds(r,c),c,f)}fitScreenCoordinates(r,c,f,y,b){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.screenPointToLocation(o.P.convert(r)),this.transform.screenPointToLocation(o.P.convert(c)),f,y),y,b)}_fitInternal(r,c,f){return r?(delete(c=o.e(r,c)).padding,c.linear?this.easeTo(c,f):this.flyTo(c,f)):this}jumpTo(r,c){this.stop();const f=this._getTransformForUpdate();let y=!1,b=!1,S=!1;const M=f.zoom;this.cameraHelper.handleJumpToCenterZoom(f,r);const N=f.zoom!==M;return"elevation"in r&&f.elevation!==+r.elevation&&f.setElevation(+r.elevation),"bearing"in r&&f.bearing!==+r.bearing&&(y=!0,f.setBearing(+r.bearing)),"pitch"in r&&f.pitch!==+r.pitch&&(b=!0,f.setPitch(+r.pitch)),"roll"in r&&f.roll!==+r.roll&&(S=!0,f.setRoll(+r.roll)),r.padding==null||f.isPaddingEqual(r.padding)||f.setPadding(r.padding),this._applyUpdatedTransform(f),this.fire(new o.l("movestart",c)).fire(new o.l("move",c)),N&&this.fire(new o.l("zoomstart",c)).fire(new o.l("zoom",c)).fire(new o.l("zoomend",c)),y&&this.fire(new o.l("rotatestart",c)).fire(new o.l("rotate",c)).fire(new o.l("rotateend",c)),b&&this.fire(new o.l("pitchstart",c)).fire(new o.l("pitch",c)).fire(new o.l("pitchend",c)),S&&this.fire(new o.l("rollstart",c)).fire(new o.l("roll",c)).fire(new o.l("rollend",c)),this.fire(new o.l("moveend",c))}calculateCameraOptionsFromTo(r,c,f,y=0){const b=o.ab.fromLngLat(r,c),S=o.ab.fromLngLat(f,y),M=S.x-b.x,N=S.y-b.y,j=S.z-b.z,q=Math.hypot(M,N,j);if(q===0)throw new Error("Can't calculate camera options with same From and To");const ne=Math.hypot(M,N),ee=o.au(this.transform.cameraToCenterDistance/q/this.transform.tileSize),Ae=180*Math.atan2(M,-N)/Math.PI;let ve=180*Math.acos(ne/q)/Math.PI;return ve=j<0?90-ve:90+ve,{center:S.toLngLat(),elevation:y,zoom:ee,pitch:ve,bearing:Ae}}calculateCameraOptionsFromCameraLngLatAltRotation(r,c,f,y,b){const S=this.transform.calculateCenterFromCameraLngLatAlt(r,c,f,y);return{center:S.center,elevation:S.elevation,zoom:S.zoom,bearing:f,pitch:y,roll:b}}easeTo(r,c){this._stop(!1,r.easeId),((r=o.e({offset:[0,0],duration:500,easing:o.cz},r)).animate===!1||!r.essential&&P.prefersReducedMotion)&&(r.duration=0);const f=this._getTransformForUpdate(),y=this.getBearing(),b=f.pitch,S=f.roll,M="bearing"in r?this._normalizeBearing(r.bearing,y):y,N="pitch"in r?+r.pitch:b,j="roll"in r?this._normalizeBearing(r.roll,S):S,q="padding"in r?r.padding:f.padding,ne=o.P.convert(r.offset);let ee,Ae;r.around&&(ee=o.V.convert(r.around),Ae=f.locationToScreenPoint(ee));const ve={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching,rolling:this._rolling},ke=this.cameraHelper.handleEaseTo(f,{bearing:M,pitch:N,roll:j,padding:q,around:ee,aroundPoint:Ae,offsetAsPoint:ne,offset:r.offset,zoom:r.zoom,center:r.center});return this._rotating=this._rotating||y!==M,this._pitching=this._pitching||N!==b,this._rolling=this._rolling||j!==S,this._padding=!f.isPaddingEqual(q),this._zooming=this._zooming||ke.isZooming,this._easeId=r.easeId,this._prepareEase(c,r.noMoveStart,ve),this.terrain&&this._prepareElevation(ke.elevationCenter),this._ease((Oe=>{ke.easeFunc(Oe),this.terrain&&!r.freezeElevation&&this._updateElevation(Oe),this._applyUpdatedTransform(f),this._fireMoveEvents(c)}),(Oe=>{this.terrain&&r.freezeElevation&&this._finalizeElevation(),this._afterEase(c,Oe)}),r),this}_prepareEase(r,c,f={}){this._moving=!0,c||f.moving||this.fire(new o.l("movestart",r)),this._zooming&&!f.zooming&&this.fire(new o.l("zoomstart",r)),this._rotating&&!f.rotating&&this.fire(new o.l("rotatestart",r)),this._pitching&&!f.pitching&&this.fire(new o.l("pitchstart",r)),this._rolling&&!f.rolling&&this.fire(new o.l("rollstart",r))}_prepareElevation(r){this._elevationCenter=r,this._elevationStart=this.transform.elevation,this._elevationTarget=this.terrain.getElevationForLngLatZoom(r,this.transform.tileZoom),this._elevationFreeze=!0}_updateElevation(r){this._elevationStart!==void 0&&this._elevationCenter!==void 0||this._prepareElevation(this.transform.center),this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom));const c=this.terrain.getElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);if(r<1&&c!==this._elevationTarget){const f=this._elevationTarget-this._elevationStart;this._elevationStart+=r*(f-(c-(f*r+this._elevationStart))/(1-r)),this._elevationTarget=c}this.transform.setElevation(o.G.number(this._elevationStart,this._elevationTarget,r))}_finalizeElevation(){this._elevationFreeze=!1,this.getCenterClampedToGround()&&this.transform.recalculateZoomAndCenter(this.terrain)}_getTransformForUpdate(){return this.transformCameraUpdate||this.terrain?(this._requestedCameraState||(this._requestedCameraState=this.transform.clone()),this._requestedCameraState):this.transform}_elevateCameraIfInsideTerrain(r){if(!this.terrain&&r.elevation>=0&&r.pitch<=90)return{};const c=r.getCameraLngLat(),f=r.getCameraAltitude(),y=this.terrain?this.terrain.getElevationForLngLatZoom(c,r.zoom):0;if(f<y){const b=this.calculateCameraOptionsFromTo(c,y,r.center,r.elevation);return{pitch:b.pitch,zoom:b.zoom}}return{}}_applyUpdatedTransform(r){const c=[];if(c.push((y=>this._elevateCameraIfInsideTerrain(y))),this.transformCameraUpdate&&c.push((y=>this.transformCameraUpdate(y))),!c.length)return;const f=r.clone();for(const y of c){const b=f.clone(),{center:S,zoom:M,roll:N,pitch:j,bearing:q,elevation:ne}=y(b);S&&b.setCenter(S),ne!==void 0&&b.setElevation(ne),M!==void 0&&b.setZoom(M),N!==void 0&&b.setRoll(N),j!==void 0&&b.setPitch(j),q!==void 0&&b.setBearing(q),f.apply(b)}this.transform.apply(f)}_fireMoveEvents(r){this.fire(new o.l("move",r)),this._zooming&&this.fire(new o.l("zoom",r)),this._rotating&&this.fire(new o.l("rotate",r)),this._pitching&&this.fire(new o.l("pitch",r)),this._rolling&&this.fire(new o.l("roll",r))}_afterEase(r,c){if(this._easeId&&c&&this._easeId===c)return;delete this._easeId;const f=this._zooming,y=this._rotating,b=this._pitching,S=this._rolling;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._rolling=!1,this._padding=!1,f&&this.fire(new o.l("zoomend",r)),y&&this.fire(new o.l("rotateend",r)),b&&this.fire(new o.l("pitchend",r)),S&&this.fire(new o.l("rollend",r)),this.fire(new o.l("moveend",r))}flyTo(r,c){if(!r.essential&&P.prefersReducedMotion){const Qt=o.U(r,["center","zoom","bearing","pitch","roll","elevation","padding"]);return this.jumpTo(Qt,c)}this.stop(),r=o.e({offset:[0,0],speed:1.2,curve:1.42,easing:o.cz},r);const f=this._getTransformForUpdate(),y=f.bearing,b=f.pitch,S=f.roll,M=f.padding,N="bearing"in r?this._normalizeBearing(r.bearing,y):y,j="pitch"in r?+r.pitch:b,q="roll"in r?this._normalizeBearing(r.roll,S):S,ne="padding"in r?r.padding:f.padding,ee=o.P.convert(r.offset);let Ae=f.centerPoint.add(ee);const ve=f.screenPointToLocation(Ae),ke=this.cameraHelper.handleFlyTo(f,{bearing:N,pitch:j,roll:q,padding:ne,locationAtOffset:ve,offsetAsPoint:ee,center:r.center,minZoom:r.minZoom,zoom:r.zoom});let Oe=r.curve;const Qe=Math.max(f.width,f.height),Ge=Qe/ke.scaleOfZoom,ot=ke.pixelPathLength;typeof ke.scaleOfMinZoom=="number"&&(Oe=Math.sqrt(Qe/ke.scaleOfMinZoom/ot*2));const Ze=Oe*Oe;function ct(Qt){const nr=(Ge*Ge-Qe*Qe+(Qt?-1:1)*Ze*Ze*ot*ot)/(2*(Qt?Ge:Qe)*Ze*ot);return Math.log(Math.sqrt(nr*nr+1)-nr)}function dt(Qt){return(Math.exp(Qt)-Math.exp(-Qt))/2}function it(Qt){return(Math.exp(Qt)+Math.exp(-Qt))/2}const _t=ct(!1);let Dt=function(Qt){return it(_t)/it(_t+Oe*Qt)},Pt=function(Qt){return Qe*((it(_t)*(dt(nr=_t+Oe*Qt)/it(nr))-dt(_t))/Ze)/ot;var nr},Rt=(ct(!0)-_t)/Oe;if(Math.abs(ot)<2e-6||!isFinite(Rt)){if(Math.abs(Qe-Ge)<1e-6)return this.easeTo(r,c);const Qt=Ge<Qe?-1:1;Rt=Math.abs(Math.log(Ge/Qe))/Oe,Pt=()=>0,Dt=nr=>Math.exp(Qt*Oe*nr)}return r.duration="duration"in r?+r.duration:1e3*Rt/("screenSpeed"in r?+r.screenSpeed/Oe:+r.speed),r.maxDuration&&r.duration>r.maxDuration&&(r.duration=0),this._zooming=!0,this._rotating=y!==N,this._pitching=j!==b,this._rolling=q!==S,this._padding=!f.isPaddingEqual(ne),this._prepareEase(c,!1),this.terrain&&this._prepareElevation(ke.targetCenter),this._ease((Qt=>{const nr=Qt*Rt,Ar=1/Dt(nr),rr=Pt(nr);this._rotating&&f.setBearing(o.G.number(y,N,Qt)),this._pitching&&f.setPitch(o.G.number(b,j,Qt)),this._rolling&&f.setRoll(o.G.number(S,q,Qt)),this._padding&&(f.interpolatePadding(M,ne,Qt),Ae=f.centerPoint.add(ee)),ke.easeFunc(Qt,Ar,rr,Ae),this.terrain&&!r.freezeElevation&&this._updateElevation(Qt),this._applyUpdatedTransform(f),this._fireMoveEvents(c)}),(()=>{this.terrain&&r.freezeElevation&&this._finalizeElevation(),this._afterEase(c)}),r),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(r,c){var f;if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){const y=this._onEaseEnd;delete this._onEaseEnd,y.call(this,c)}return r||(f=this.handlers)===null||f===void 0||f.stop(!1),this}_ease(r,c,f){f.animate===!1||f.duration===0?(r(1),c()):(this._easeStart=z(),this._easeOptions=f,this._onEaseFrame=r,this._onEaseEnd=c,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_normalizeBearing(r,c){r=o.W(r,-180,180);const f=Math.abs(r-c);return Math.abs(r-360-c)<f&&(r-=360),Math.abs(r+360-c)<f&&(r+=360),r}queryTerrainElevation(r){return this.terrain?this.terrain.getElevationForLngLat(o.V.convert(r)):null}}const Ys={compact:!0,customAttribution:'<a href="https://maplibre.org/" target="_blank">MapLibre</a>'};class Fo{constructor(r=Ys){this._toggleAttribution=()=>{this._container.classList.contains("maplibregl-compact")&&(this._container.classList.contains("maplibregl-compact-show")?(this._container.setAttribute("open",""),this._container.classList.remove("maplibregl-compact-show")):(this._container.classList.add("maplibregl-compact-show"),this._container.removeAttribute("open")))},this._updateData=c=>{!c||c.sourceDataType!=="metadata"&&c.sourceDataType!=="visibility"&&c.dataType!=="style"&&c.type!=="terrain"||this._updateAttributions()},this._updateCompact=()=>{this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact===!1?this._container.setAttribute("open",""):this._container.classList.contains("maplibregl-compact")||this._container.classList.contains("maplibregl-attrib-empty")||(this._container.setAttribute("open",""),this._container.classList.add("maplibregl-compact","maplibregl-compact-show")):(this._container.setAttribute("open",""),this._container.classList.contains("maplibregl-compact")&&this._container.classList.remove("maplibregl-compact","maplibregl-compact-show"))},this._updateCompactMinimize=()=>{this._container.classList.contains("maplibregl-compact")&&this._container.classList.contains("maplibregl-compact-show")&&this._container.classList.remove("maplibregl-compact-show")},this.options=r}getDefaultPosition(){return"bottom-right"}onAdd(r){return this._map=r,this._compact=this.options.compact,this._container=H.create("details","maplibregl-ctrl maplibregl-ctrl-attrib"),this._compactButton=H.create("summary","maplibregl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=H.create("div","maplibregl-ctrl-attrib-inner",this._container),this._updateAttributions(),this._updateCompact(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("terrain",this._updateData),this._map.on("resize",this._updateCompact),this._map.on("drag",this._updateCompactMinimize),this._container}onRemove(){H.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("terrain",this._updateData),this._map.off("resize",this._updateCompact),this._map.off("drag",this._updateCompactMinimize),this._map=void 0,this._compact=void 0,this._attribHTML=void 0}_setElementTitle(r,c){const f=this._map._getUIString(`AttributionControl.${c}`);r.title=f,r.setAttribute("aria-label",f)}_updateAttributions(){if(!this._map.style)return;let r=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?r=r.concat(this.options.customAttribution.map((y=>typeof y!="string"?"":y))):typeof this.options.customAttribution=="string"&&r.push(this.options.customAttribution)),this._map.style.stylesheet){const y=this._map.style.stylesheet;this.styleOwner=y.owner,this.styleId=y.id}const c=this._map.style.tileManagers;for(const y in c){const b=c[y];if(b.used||b.usedForTerrain){const S=b.getSource();S.attribution&&r.indexOf(S.attribution)<0&&r.push(S.attribution)}}r=r.filter((y=>String(y).trim())),r.sort(((y,b)=>y.length-b.length)),r=r.filter(((y,b)=>{for(let S=b+1;S<r.length;S++)if(r[S].indexOf(y)>=0)return!1;return!0}));const f=r.join(" | ");f!==this._attribHTML&&(this._attribHTML=f,r.length?(this._innerContainer.innerHTML=H.sanitize(f),this._container.classList.remove("maplibregl-attrib-empty")):this._container.classList.add("maplibregl-attrib-empty"),this._updateCompact(),this._editLink=null)}}class ki{constructor(r={}){this._updateCompact=()=>{const c=this._container.children;if(c.length){const f=c[0];this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact!==!1&&f.classList.add("maplibregl-compact"):f.classList.remove("maplibregl-compact")}},this.options=r}getDefaultPosition(){return"bottom-left"}onAdd(r){this._map=r,this._compact=this.options&&this.options.compact,this._container=H.create("div","maplibregl-ctrl");const c=H.create("a","maplibregl-ctrl-logo");return c.target="_blank",c.rel="noopener nofollow",c.href="https://maplibre.org/",c.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),c.setAttribute("rel","noopener nofollow"),this._container.appendChild(c),this._container.style.display="block",this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){H.remove(this._container),this._map.off("resize",this._updateCompact),this._map=void 0,this._compact=void 0}}class In{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(r){const c=++this._id;return this._queue.push({callback:r,id:c,cancelled:!1}),c}remove(r){const c=this._currentlyRunning,f=c?this._queue.concat(c):this._queue;for(const y of f)if(y.id===r)return void(y.cancelled=!0)}run(r=0){if(this._currentlyRunning)throw new Error("Attempting to run(), but is already running.");const c=this._currentlyRunning=this._queue;this._queue=[];for(const f of c)if(!f.cancelled&&(f.callback(r),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}var Vn=o.aV([{name:"a_pos3d",type:"Int16",components:3}]);class xi extends o.E{constructor(r){super(),this._lastTilesetChange=z(),this.tileManager=r,this._tiles={},this._renderableTilesKeys=[],this._sourceTileCache={},this.minzoom=0,this.maxzoom=22,this.deltaZoom=1,this.tileSize=r._source.tileSize*2**this.deltaZoom,r.usedForTerrain=!0,r.tileSize=this.tileSize}destruct(){this.tileManager.usedForTerrain=!1,this.tileManager.tileSize=null}getSource(){return this.tileManager._source}update(r,c){this.tileManager.update(r,c),this._renderableTilesKeys=[];const f={};for(const y of Tn(r,{tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,reparseOverscaled:!1,terrain:c,calculateTileZoom:this.tileManager._source.calculateTileZoom}))f[y.key]=!0,this._renderableTilesKeys.push(y.key),this._tiles[y.key]||(y.terrainRttPosMatrix32f=new Float64Array(16),o.c8(y.terrainRttPosMatrix32f,0,o.a5,o.a5,0,0,1),this._tiles[y.key]=new Ht(y,this.tileSize),this._lastTilesetChange=z());for(const y in this._tiles)f[y]||delete this._tiles[y]}freeRtt(r){for(const c in this._tiles){const f=this._tiles[c];(!r||f.tileID.equals(r)||f.tileID.isChildOf(r)||r.isChildOf(f.tileID))&&(f.rtt=[])}}getRenderableTiles(){return this._renderableTilesKeys.map((r=>this.getTileByID(r)))}getTileByID(r){return this._tiles[r]}getTerrainCoords(r,c){return c?this._getTerrainCoordsForTileRanges(r,c):this._getTerrainCoordsForRegularTile(r)}_getTerrainCoordsForRegularTile(r){const c={};for(const f of this._renderableTilesKeys){const y=this._tiles[f].tileID,b=r.clone(),S=o.bl();if(y.canonical.equals(r.canonical))o.c8(S,0,o.a5,o.a5,0,0,1);else if(y.canonical.isChildOf(r.canonical)){const M=y.canonical.z-r.canonical.z,N=y.canonical.x-(y.canonical.x>>M<<M),j=y.canonical.y-(y.canonical.y>>M<<M),q=o.a5>>M;o.c8(S,0,q,q,0,0,1),o.O(S,S,[-N*q,-j*q,0])}else{if(!r.canonical.isChildOf(y.canonical))continue;{const M=r.canonical.z-y.canonical.z,N=r.canonical.x-(r.canonical.x>>M<<M),j=r.canonical.y-(r.canonical.y>>M<<M),q=o.a5>>M;o.c8(S,0,o.a5,o.a5,0,0,1),o.O(S,S,[N*q,j*q,0]),o.Q(S,S,[1/2**M,1/2**M,0])}}b.terrainRttPosMatrix32f=new Float32Array(S),c[f]=b}return c}_getTerrainCoordsForTileRanges(r,c){const f={};for(const y of this._renderableTilesKeys){const b=this._tiles[y].tileID;if(!this._isWithinTileRanges(b,c))continue;const S=r.clone(),M=o.bl();if(b.canonical.z===r.canonical.z){const N=r.canonical.x-b.canonical.x,j=r.canonical.y-b.canonical.y;o.c8(M,0,o.a5,o.a5,0,0,1),o.O(M,M,[N*o.a5,j*o.a5,0])}else if(b.canonical.z>r.canonical.z){const N=b.canonical.z-r.canonical.z,j=b.canonical.x-(b.canonical.x>>N<<N),q=b.canonical.y-(b.canonical.y>>N<<N),ne=r.canonical.x-(b.canonical.x>>N),ee=r.canonical.y-(b.canonical.y>>N),Ae=o.a5>>N;o.c8(M,0,Ae,Ae,0,0,1),o.O(M,M,[-j*Ae+ne*o.a5,-q*Ae+ee*o.a5,0])}else{const N=r.canonical.z-b.canonical.z,j=r.canonical.x-(r.canonical.x>>N<<N),q=r.canonical.y-(r.canonical.y>>N<<N),ne=(r.canonical.x>>N)-b.canonical.x,ee=(r.canonical.y>>N)-b.canonical.y,Ae=o.a5<<N;o.c8(M,0,Ae,Ae,0,0,1),o.O(M,M,[j*o.a5+ne*Ae,q*o.a5+ee*Ae,0])}S.terrainRttPosMatrix32f=new Float32Array(M),f[y]=S}return f}getSourceTile(r,c){const f=this.tileManager._source;let y=r.overscaledZ-this.deltaZoom;if(y>f.maxzoom&&(y=f.maxzoom),y<f.minzoom)return;this._sourceTileCache[r.key]||(this._sourceTileCache[r.key]=r.scaledTo(y).key);let b=this.findTileInCaches(this._sourceTileCache[r.key]);if(!b?.dem&&c)for(;y>=f.minzoom&&!b?.dem;)b=this.findTileInCaches(r.scaledTo(y--).key);return b}findTileInCaches(r){let c=this.tileManager.getTileByID(r);return c||(c=this.tileManager._outOfViewCache.getByKey(r),c)}anyTilesAfterTime(r=Date.now()){return this._lastTilesetChange>=r}_isWithinTileRanges(r,c){return c[r.canonical.z]&&r.canonical.x>=c[r.canonical.z].minTileX&&r.canonical.x<=c[r.canonical.z].maxTileX&&r.canonical.y>=c[r.canonical.z].minTileY&&r.canonical.y<=c[r.canonical.z].maxTileY}}class Ss{constructor(r,c,f){this._meshCache={},this.painter=r,this.tileManager=new xi(c),this.options=f,this.exaggeration=typeof f.exaggeration=="number"?f.exaggeration:1,this.qualityFactor=2,this.meshSize=128,this._demMatrixCache={},this.coordsIndex=[],this._coordsTextureSize=1024}getDEMElevation(r,c,f,y=o.a5){var b;if(!(c>=0&&c<y&&f>=0&&f<y))return 0;const S=this.getTerrainData(r),M=(b=S.tile)===null||b===void 0?void 0:b.dem;if(!M)return 0;const N=o.cD([],[c/y*o.a5,f/y*o.a5],S.u_terrain_matrix),j=[N[0]*M.dim,N[1]*M.dim],q=Math.floor(j[0]),ne=Math.floor(j[1]),ee=j[0]-q,Ae=j[1]-ne;return M.get(q,ne)*(1-ee)*(1-Ae)+M.get(q+1,ne)*ee*(1-Ae)+M.get(q,ne+1)*(1-ee)*Ae+M.get(q+1,ne+1)*ee*Ae}getElevationForLngLatZoom(r,c){if(!o.cE(c,r.wrap()))return 0;const{tileID:f,mercatorX:y,mercatorY:b}=this._getOverscaledTileIDFromLngLatZoom(r,c);return this.getElevation(f,y%o.a5,b%o.a5,o.a5)}getElevationForLngLat(r){return this.getElevationForLngLatZoom(r,this.tileManager.maxzoom)}getElevation(r,c,f,y=o.a5){return this.getDEMElevation(r,c,f,y)*this.exaggeration}getTerrainData(r){if(!this._emptyDemTexture){const y=this.painter.context,b=new o.R({width:1,height:1},new Uint8Array(4));this._emptyDepthTexture=new o.T(y,b,y.gl.RGBA,{premultiply:!1}),this._emptyDemUnpack=[0,0,0,0],this._emptyDemTexture=new o.T(y,new o.R({width:1,height:1}),y.gl.RGBA,{premultiply:!1}),this._emptyDemTexture.bind(y.gl.NEAREST,y.gl.CLAMP_TO_EDGE),this._emptyDemMatrix=o.as([])}const c=this.tileManager.getSourceTile(r,!0);if(c&&c.dem&&(!c.demTexture||c.needsTerrainPrepare)){const y=this.painter.context;c.demTexture=this.painter.getTileTexture(c.dem.stride),c.demTexture?c.demTexture.update(c.dem.getPixels(),{premultiply:!1}):c.demTexture=new o.T(y,c.dem.getPixels(),y.gl.RGBA,{premultiply:!1}),c.demTexture.bind(y.gl.NEAREST,y.gl.CLAMP_TO_EDGE),c.needsTerrainPrepare=!1}const f=c&&c+c.tileID.key+r.key;if(f&&!this._demMatrixCache[f]){const y=this.tileManager.getSource().maxzoom;let b=r.canonical.z-c.tileID.canonical.z;r.overscaledZ>r.canonical.z&&(r.canonical.z>=y?b=r.canonical.z-y:o.w("cannot calculate elevation if elevation maxzoom > source.maxzoom"));const S=r.canonical.x-(r.canonical.x>>b<<b),M=r.canonical.y-(r.canonical.y>>b<<b),N=o.cF(new Float64Array(16),[1/(o.a5<<b),1/(o.a5<<b),0]);o.O(N,N,[S*o.a5,M*o.a5,0]),this._demMatrixCache[r.key]={matrix:N,coord:r}}return{u_depth:2,u_terrain:3,u_terrain_dim:c&&c.dem&&c.dem.dim||1,u_terrain_matrix:f?this._demMatrixCache[r.key].matrix:this._emptyDemMatrix,u_terrain_unpack:c&&c.dem&&c.dem.getUnpackVector()||this._emptyDemUnpack,u_terrain_exaggeration:this.exaggeration,texture:(c&&c.demTexture||this._emptyDemTexture).texture,depthTexture:(this._fboDepthTexture||this._emptyDepthTexture).texture,tile:c}}getFramebuffer(r){const c=this.painter,f=c.width/devicePixelRatio,y=c.height/devicePixelRatio;return!this._fbo||this._fbo.width===f&&this._fbo.height===y||(this._fbo.destroy(),this._fboCoordsTexture.destroy(),this._fboDepthTexture.destroy(),delete this._fbo,delete this._fboDepthTexture,delete this._fboCoordsTexture),this._fboCoordsTexture||(this._fboCoordsTexture=new o.T(c.context,{width:f,height:y,data:null},c.context.gl.RGBA,{premultiply:!1}),this._fboCoordsTexture.bind(c.context.gl.NEAREST,c.context.gl.CLAMP_TO_EDGE)),this._fboDepthTexture||(this._fboDepthTexture=new o.T(c.context,{width:f,height:y,data:null},c.context.gl.RGBA,{premultiply:!1}),this._fboDepthTexture.bind(c.context.gl.NEAREST,c.context.gl.CLAMP_TO_EDGE)),this._fbo||(this._fbo=c.context.createFramebuffer(f,y,!0,!1),this._fbo.depthAttachment.set(c.context.createRenderbuffer(c.context.gl.DEPTH_COMPONENT16,f,y))),this._fbo.colorAttachment.set(r==="coords"?this._fboCoordsTexture.texture:this._fboDepthTexture.texture),this._fbo}getCoordsTexture(){const r=this.painter.context;if(this._coordsTexture)return this._coordsTexture;const c=new Uint8Array(this._coordsTextureSize*this._coordsTextureSize*4);for(let b=0,S=0;b<this._coordsTextureSize;b++)for(let M=0;M<this._coordsTextureSize;M++,S+=4)c[S+0]=255&M,c[S+1]=255&b,c[S+2]=M>>8<<4|b>>8,c[S+3]=0;const f=new o.R({width:this._coordsTextureSize,height:this._coordsTextureSize},new Uint8Array(c.buffer)),y=new o.T(r,f,r.gl.RGBA,{premultiply:!1});return y.bind(r.gl.NEAREST,r.gl.CLAMP_TO_EDGE),this._coordsTexture=y,y}pointCoordinate(r){this.painter.maybeDrawDepthAndCoords(!0);const c=new Uint8Array(4),f=this.painter.context,y=f.gl,b=Math.round(r.x*this.painter.pixelRatio/devicePixelRatio),S=Math.round(r.y*this.painter.pixelRatio/devicePixelRatio),M=Math.round(this.painter.height/devicePixelRatio);f.bindFramebuffer.set(this.getFramebuffer("coords").framebuffer),y.readPixels(b,M-S-1,1,1,y.RGBA,y.UNSIGNED_BYTE,c),f.bindFramebuffer.set(null);const N=c[0]+(c[2]>>4<<8),j=c[1]+((15&c[2])<<8),q=this.coordsIndex[255-c[3]],ne=q&&this.tileManager.getTileByID(q);if(!ne)return null;const ee=this._coordsTextureSize,Ae=(1<<ne.tileID.canonical.z)*ee;return new o.ab((ne.tileID.canonical.x*ee+N)/Ae+ne.tileID.wrap,(ne.tileID.canonical.y*ee+j)/Ae,this.getElevation(ne.tileID,N,j,ee))}depthAtPoint(r){const c=new Uint8Array(4),f=this.painter.context,y=f.gl;return f.bindFramebuffer.set(this.getFramebuffer("depth").framebuffer),y.readPixels(r.x,this.painter.height/devicePixelRatio-r.y-1,1,1,y.RGBA,y.UNSIGNED_BYTE,c),f.bindFramebuffer.set(null),(c[0]/16777216+c[1]/65536+c[2]/256+c[3])/256}getTerrainMesh(r){var c;const f=((c=this.painter.style.projection)===null||c===void 0?void 0:c.transitionState)>0,y=f&&r.canonical.y===0,b=f&&r.canonical.y===(1<<r.canonical.z)-1,S=`m_${y?"n":""}_${b?"s":""}`;if(this._meshCache[S])return this._meshCache[S];const M=this.painter.context,N=new o.cG,j=new o.aZ,q=this.meshSize,ne=o.a5/q,ee=q*q;for(let it=0;it<=q;it++)for(let _t=0;_t<=q;_t++)N.emplaceBack(_t*ne,it*ne,0);for(let it=0;it<ee;it+=q+1)for(let _t=0;_t<q;_t++)j.emplaceBack(_t+it,q+_t+it+1,q+_t+it+2),j.emplaceBack(_t+it,q+_t+it+2,_t+it+1);const Ae=N.length,ve=Ae+(q+1),ke=(q+1)*q,Oe=y?o.bs:0,Qe=y?0:1,Ge=b?o.bt:o.a5,ot=b?0:1;for(let it=0;it<=q;it++)N.emplaceBack(it*ne,Oe,Qe);for(let it=0;it<=q;it++)N.emplaceBack(it*ne,Ge,ot);for(let it=0;it<q;it++)j.emplaceBack(ke+it,ve+it,ve+it+1),j.emplaceBack(ke+it,ve+it+1,ke+it+1),j.emplaceBack(0+it,Ae+it+1,Ae+it),j.emplaceBack(0+it,0+it+1,Ae+it+1);const Ze=N.length,ct=Ze+2*(q+1);for(const it of[0,1])for(let _t=0;_t<=q;_t++)for(const Dt of[0,1])N.emplaceBack(it*o.a5,_t*ne,Dt);for(let it=0;it<2*q;it+=2)j.emplaceBack(Ze+it,Ze+it+1,Ze+it+3),j.emplaceBack(Ze+it,Ze+it+3,Ze+it+2),j.emplaceBack(ct+it,ct+it+3,ct+it+1),j.emplaceBack(ct+it,ct+it+2,ct+it+3);const dt=new ii(M.createVertexBuffer(N,Vn.members),M.createIndexBuffer(j),o.aY.simpleSegment(0,0,N.length,j.length));return this._meshCache[S]=dt,dt}getMeshFrameDelta(r){return 2*Math.PI*o.bF/Math.pow(2,Math.max(r,0))/5}getMinTileElevationForLngLatZoom(r,c){var f;if(!o.cE(c,r.wrap()))return 0;const{tileID:y}=this._getOverscaledTileIDFromLngLatZoom(r,c);return(f=this.getMinMaxElevation(y).minElevation)!==null&&f!==void 0?f:0}getMinMaxElevation(r){const c=this.getTerrainData(r).tile,f={minElevation:null,maxElevation:null};return c&&c.dem&&(f.minElevation=c.dem.min*this.exaggeration,f.maxElevation=c.dem.max*this.exaggeration),f}_getOverscaledTileIDFromLngLatZoom(r,c){const f=o.ab.fromLngLat(r.wrap()),y=(1<<c)*o.a5,b=f.x*y,S=f.y*y,M=Math.floor(b/o.a5),N=Math.floor(S/o.a5);return{tileID:new o.a2(c,0,c,M,N),mercatorX:b,mercatorY:S}}}class Io{constructor(r,c,f){this._context=r,this._size=c,this._tileSize=f,this._objects=[],this._recentlyUsed=[],this._stamp=0}destruct(){for(const r of this._objects)r.texture.destroy(),r.fbo.destroy()}_createObject(r){const c=this._context.createFramebuffer(this._tileSize,this._tileSize,!0,!0),f=new o.T(this._context,{width:this._tileSize,height:this._tileSize,data:null},this._context.gl.RGBA);return f.bind(this._context.gl.LINEAR,this._context.gl.CLAMP_TO_EDGE),this._context.extTextureFilterAnisotropic&&this._context.gl.texParameterf(this._context.gl.TEXTURE_2D,this._context.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,this._context.extTextureFilterAnisotropicMax),c.depthAttachment.set(this._context.createRenderbuffer(this._context.gl.DEPTH_STENCIL,this._tileSize,this._tileSize)),c.colorAttachment.set(f.texture),{id:r,fbo:c,texture:f,stamp:-1,inUse:!1}}getObjectForId(r){return this._objects[r]}useObject(r){r.inUse=!0,this._recentlyUsed=this._recentlyUsed.filter((c=>r.id!==c)),this._recentlyUsed.push(r.id)}stampObject(r){r.stamp=++this._stamp}getOrCreateFreeObject(){for(const c of this._recentlyUsed)if(!this._objects[c].inUse)return this._objects[c];if(this._objects.length>=this._size)throw new Error("No free RenderPool available, call freeAllObjects() required!");const r=this._createObject(this._objects.length);return this._objects.push(r),r}freeObject(r){r.inUse=!1}freeAllObjects(){for(const r of this._objects)this.freeObject(r)}isFull(){return!(this._objects.length<this._size)&&this._objects.some((r=>!r.inUse))===!1}}const Js={background:!0,fill:!0,line:!0,raster:!0,hillshade:!0,"color-relief":!0};class Fs{constructor(r,c){this.painter=r,this.terrain=c,this.pool=new Io(r.context,30,c.tileManager.tileSize*c.qualityFactor)}destruct(){this.pool.destruct()}getTexture(r){return this.pool.getObjectForId(r.rtt[this._stacks.length-1].id).texture}prepareForRender(r,c){this._stacks=[],this._prevType=null,this._rttTiles=[],this._renderableTiles=this.terrain.tileManager.getRenderableTiles(),this._renderableLayerIds=r._order.filter((f=>!r._layers[f].isHidden(c))),this._coordsAscending={};for(const f in r.tileManagers){this._coordsAscending[f]={};const y=r.tileManagers[f].getVisibleCoordinates(),b=r.tileManagers[f].getSource(),S=b instanceof hn?b.terrainTileRanges:null;for(const M of y){const N=this.terrain.tileManager.getTerrainCoords(M,S);for(const j in N)this._coordsAscending[f][j]||(this._coordsAscending[f][j]=[]),this._coordsAscending[f][j].push(N[j])}}this._coordsAscendingStr={};for(const f of r._order){const y=r._layers[f],b=y.source;if(Js[y.type]&&!this._coordsAscendingStr[b]){this._coordsAscendingStr[b]={};for(const S in this._coordsAscending[b])this._coordsAscendingStr[b][S]=this._coordsAscending[b][S].map((M=>M.key)).sort().join()}}for(const f of this._renderableTiles)for(const y in this._coordsAscendingStr){const b=this._coordsAscendingStr[y][f.tileID.key];b&&b!==f.rttCoords[y]&&(f.rtt=[])}}renderLayer(r,c){if(r.isHidden(this.painter.transform.zoom))return!1;const f=Object.assign(Object.assign({},c),{isRenderingToTexture:!0}),y=r.type,b=this.painter,S=this._renderableLayerIds[this._renderableLayerIds.length-1]===r.id;if(Js[y]&&(this._prevType&&Js[this._prevType]||this._stacks.push([]),this._prevType=y,this._stacks[this._stacks.length-1].push(r.id),!S))return!0;if(Js[this._prevType]||Js[y]&&S){this._prevType=y;const M=this._stacks.length-1,N=this._stacks[M]||[];for(const j of this._renderableTiles){if(this.pool.isFull()&&(Vc(this.painter,this.terrain,this._rttTiles,f),this._rttTiles=[],this.pool.freeAllObjects()),this._rttTiles.push(j),j.rtt[M]){const ne=this.pool.getObjectForId(j.rtt[M].id);if(ne.stamp===j.rtt[M].stamp){this.pool.useObject(ne);continue}}const q=this.pool.getOrCreateFreeObject();this.pool.useObject(q),this.pool.stampObject(q),j.rtt[M]={id:q.id,stamp:q.stamp},b.context.bindFramebuffer.set(q.fbo.framebuffer),b.context.clear({color:o.bq.transparent,stencil:0}),b.currentStencilSource=void 0;for(let ne=0;ne<N.length;ne++){const ee=b.style._layers[N[ne]],Ae=ee.source?this._coordsAscending[ee.source][j.tileID.key]:[j.tileID];b.context.viewport.set([0,0,q.fbo.width,q.fbo.height]),b._renderTileClippingMasks(ee,Ae,!0),b.renderLayer(b,b.style.tileManagers[ee.source],ee,Ae,f),ee.source&&(j.rttCoords[ee.source]=this._coordsAscendingStr[ee.source][j.tileID.key])}}return Vc(this.painter,this.terrain,this._rttTiles,f),this._rttTiles=[],this.pool.freeAllObjects(),Js[y]}return!1}}const Ji={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"MapLibre logo","Map.Title":"Map","Marker.Title":"Map marker","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","Popup.Close":"Close popup","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm","GlobeControl.Enable":"Enable globe","GlobeControl.Disable":"Disable globe","TerrainControl.Enable":"Enable terrain","TerrainControl.Disable":"Disable terrain","CooperativeGesturesHandler.WindowsHelpText":"Use Ctrl + scroll to zoom the map","CooperativeGesturesHandler.MacHelpText":"Use  + scroll to zoom the map","CooperativeGesturesHandler.MobileHelpText":"Use two fingers to move the map"},za=x,Ha={hash:!1,interactive:!0,bearingSnap:7,attributionControl:Ys,maplibreLogo:!1,refreshExpiredTiles:!0,canvasContextAttributes:{antialias:!1,preserveDrawingBuffer:!1,powerPreference:"high-performance",failIfMajorPerformanceCaveat:!1,desynchronized:!1,contextType:void 0},scrollZoom:!0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:!1,trackResize:!0,center:[0,0],elevation:0,zoom:0,bearing:0,pitch:0,roll:0,renderWorldCopies:!0,maxTileCacheSize:null,maxTileCacheZoomLevels:o.c.MAX_TILE_CACHE_ZOOM_LEVELS,transformRequest:null,transformCameraUpdate:null,transformConstrain:null,fadeDuration:300,crossSourceCollisions:!0,clickTolerance:3,localIdeographFontFamily:"sans-serif",pitchWithRotate:!0,rollEnabled:!1,reduceMotion:void 0,validateStyle:!0,maxCanvasSize:[4096,4096],cancelPendingTileRequestsWhileZooming:!0,centerClampedToGround:!0,experimentalZoomLevelsToOverscale:void 0},Gc={showCompass:!0,showZoom:!0,visualizePitch:!1,visualizeRoll:!0};class ja{constructor(r,c,f=!1){this.mousedown=b=>{this.startMove(b,H.mousePos(this.element,b)),H.addEventListener(window,"mousemove",this.mousemove),H.addEventListener(window,"mouseup",this.mouseup)},this.mousemove=b=>{this.move(b,H.mousePos(this.element,b))},this.mouseup=b=>{this._rotatePitchHandler.dragEnd(b),this.offTemp()},this.touchstart=b=>{b.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=H.touchPos(this.element,b.targetTouches)[0],this.startMove(b,this._startPos),H.addEventListener(window,"touchmove",this.touchmove,{passive:!1}),H.addEventListener(window,"touchend",this.touchend))},this.touchmove=b=>{b.targetTouches.length!==1?this.reset():(this._lastPos=H.touchPos(this.element,b.targetTouches)[0],this.move(b,this._lastPos))},this.touchend=b=>{b.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),delete this._startPos,delete this._lastPos,this.offTemp()},this.reset=()=>{this._rotatePitchHandler.reset(),delete this._startPos,delete this._lastPos,this.offTemp()},this._clickTolerance=10,this.element=c;const y=new zr;this._rotatePitchHandler=new Ut({clickTolerance:3,move:(b,S)=>{const M=c.getBoundingClientRect(),N=new o.P((M.bottom-M.top)/2,(M.right-M.left)/2);return{bearingDelta:o.cy(new o.P(b.x,S.y),S,N),pitchDelta:f?-.5*(S.y-b.y):void 0}},moveStateManager:y,enable:!0,assignEvents:()=>{}}),this.map=r,H.addEventListener(c,"mousedown",this.mousedown),H.addEventListener(c,"touchstart",this.touchstart,{passive:!1}),H.addEventListener(c,"touchcancel",this.reset)}startMove(r,c){this._rotatePitchHandler.dragStart(r,c),H.disableDrag()}move(r,c){const f=this.map,{bearingDelta:y,pitchDelta:b}=this._rotatePitchHandler.dragMove(r,c)||{};y&&f.setBearing(f.getBearing()+y),b&&f.setPitch(f.getPitch()+b)}off(){const r=this.element;H.removeEventListener(r,"mousedown",this.mousedown),H.removeEventListener(r,"touchstart",this.touchstart,{passive:!1}),H.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),H.removeEventListener(window,"touchend",this.touchend),H.removeEventListener(r,"touchcancel",this.reset),this.offTemp()}offTemp(){H.enableDrag(),H.removeEventListener(window,"mousemove",this.mousemove),H.removeEventListener(window,"mouseup",this.mouseup),H.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),H.removeEventListener(window,"touchend",this.touchend)}}let Hl;function VA(w,r,c,f=!1){if(f||!c.getCoveringTilesDetailsProvider().allowWorldCopies())return w?.wrap();const y=new o.V(w.lng,w.lat);if(w=new o.V(w.lng,w.lat),r){const b=new o.V(w.lng-360,w.lat),S=new o.V(w.lng+360,w.lat),M=c.locationToScreenPoint(w).distSqr(r);c.locationToScreenPoint(b).distSqr(r)<M?w=b:c.locationToScreenPoint(S).distSqr(r)<M&&(w=S)}for(;Math.abs(w.lng-c.center.lng)>180;){const b=c.locationToScreenPoint(w);if(b.x>=0&&b.y>=0&&b.x<=c.width&&b.y<=c.height)break;w.lng>c.center.lng?w.lng-=360:w.lng+=360}return w.lng!==y.lng&&c.isPointOnMapSurface(c.locationToScreenPoint(w))?w:y}const gi={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function Wo(w,r,c){const f=w.classList;for(const y in gi)f.remove(`maplibregl-${c}-anchor-${y}`);f.add(`maplibregl-${c}-anchor-${r}`)}class pA extends o.E{constructor(r){if(super(),this._onKeyPress=c=>{const f=c.code,y=c.charCode||c.keyCode;f!=="Space"&&f!=="Enter"&&y!==32&&y!==13||this.togglePopup()},this._onMapClick=c=>{const f=c.originalEvent.target,y=this._element;this._popup&&(f===y||y.contains(f))&&this.togglePopup()},this._update=c=>{if(!this._map)return;const f=this._map.loaded()&&!this._map.isMoving();(c?.type==="terrain"||c?.type==="render"&&!f)&&this._map.once("render",this._update),this._lngLat=VA(this._lngLat,this._flatPos,this._map.transform),this._flatPos=this._pos=this._map.project(this._lngLat)._add(this._offset),this._map.terrain&&(this._flatPos=this._map.transform.locationToScreenPoint(this._lngLat)._add(this._offset));let y="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?y=`rotateZ(${this._rotation}deg)`:this._rotationAlignment==="map"&&(y=`rotateZ(${this._rotation-this._map.getBearing()}deg)`);let b="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?b="rotateX(0deg)":this._pitchAlignment==="map"&&(b=`rotateX(${this._map.getPitch()}deg)`),this._subpixelPositioning||c&&c.type!=="moveend"||(this._pos=this._pos.round()),H.setTransform(this._element,`${gi[this._anchor]} translate(${this._pos.x}px, ${this._pos.y}px) ${b} ${y}`),P.frameAsync(new AbortController).then((()=>{this._updateOpacity(c&&c.type==="moveend")})).catch((()=>{}))},this._onMove=c=>{if(!this._isDragging){const f=this._clickTolerance||this._map._clickTolerance;this._isDragging=c.point.dist(this._pointerdownPos)>=f}this._isDragging&&(this._pos=c.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new o.l("dragstart"))),this.fire(new o.l("drag")))},this._onUp=()=>{this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new o.l("dragend")),this._state="inactive"},this._addDragHandler=c=>{this._element.contains(c.originalEvent.target)&&(c.preventDefault(),this._positionDelta=c.point.sub(this._pos).add(this._offset),this._pointerdownPos=c.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},this._anchor=r&&r.anchor||"center",this._color=r&&r.color||"#3FB1CE",this._scale=r&&r.scale||1,this._draggable=r&&r.draggable||!1,this._clickTolerance=r&&r.clickTolerance||0,this._subpixelPositioning=r&&r.subpixelPositioning||!1,this._isDragging=!1,this._state="inactive",this._rotation=r&&r.rotation||0,this._rotationAlignment=r&&r.rotationAlignment||"auto",this._pitchAlignment=r&&r.pitchAlignment&&r.pitchAlignment!=="auto"?r.pitchAlignment:this._rotationAlignment,this.setOpacity(r?.opacity,r?.opacityWhenCovered),r&&r.element)this._element=r.element,this._offset=o.P.convert(r&&r.offset||[0,0]);else{this._defaultMarker=!0,this._element=H.create("div");const c=H.createNS("http://www.w3.org/2000/svg","svg"),f=41,y=27;c.setAttributeNS(null,"display","block"),c.setAttributeNS(null,"height",`${f}px`),c.setAttributeNS(null,"width",`${y}px`),c.setAttributeNS(null,"viewBox",`0 0 ${y} ${f}`);const b=H.createNS("http://www.w3.org/2000/svg","g");b.setAttributeNS(null,"stroke","none"),b.setAttributeNS(null,"stroke-width","1"),b.setAttributeNS(null,"fill","none"),b.setAttributeNS(null,"fill-rule","evenodd");const S=H.createNS("http://www.w3.org/2000/svg","g");S.setAttributeNS(null,"fill-rule","nonzero");const M=H.createNS("http://www.w3.org/2000/svg","g");M.setAttributeNS(null,"transform","translate(3.0, 29.0)"),M.setAttributeNS(null,"fill","#000000");const N=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];for(const Qe of N){const Ge=H.createNS("http://www.w3.org/2000/svg","ellipse");Ge.setAttributeNS(null,"opacity","0.04"),Ge.setAttributeNS(null,"cx","10.5"),Ge.setAttributeNS(null,"cy","5.80029008"),Ge.setAttributeNS(null,"rx",Qe.rx),Ge.setAttributeNS(null,"ry",Qe.ry),M.appendChild(Ge)}const j=H.createNS("http://www.w3.org/2000/svg","g");j.setAttributeNS(null,"fill",this._color);const q=H.createNS("http://www.w3.org/2000/svg","path");q.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),j.appendChild(q);const ne=H.createNS("http://www.w3.org/2000/svg","g");ne.setAttributeNS(null,"opacity","0.25"),ne.setAttributeNS(null,"fill","#000000");const ee=H.createNS("http://www.w3.org/2000/svg","path");ee.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),ne.appendChild(ee);const Ae=H.createNS("http://www.w3.org/2000/svg","g");Ae.setAttributeNS(null,"transform","translate(6.0, 7.0)"),Ae.setAttributeNS(null,"fill","#FFFFFF");const ve=H.createNS("http://www.w3.org/2000/svg","g");ve.setAttributeNS(null,"transform","translate(8.0, 8.0)");const ke=H.createNS("http://www.w3.org/2000/svg","circle");ke.setAttributeNS(null,"fill","#000000"),ke.setAttributeNS(null,"opacity","0.25"),ke.setAttributeNS(null,"cx","5.5"),ke.setAttributeNS(null,"cy","5.5"),ke.setAttributeNS(null,"r","5.4999962");const Oe=H.createNS("http://www.w3.org/2000/svg","circle");Oe.setAttributeNS(null,"fill","#FFFFFF"),Oe.setAttributeNS(null,"cx","5.5"),Oe.setAttributeNS(null,"cy","5.5"),Oe.setAttributeNS(null,"r","5.4999962"),ve.appendChild(ke),ve.appendChild(Oe),S.appendChild(M),S.appendChild(j),S.appendChild(ne),S.appendChild(Ae),S.appendChild(ve),c.appendChild(S),c.setAttributeNS(null,"height",f*this._scale+"px"),c.setAttributeNS(null,"width",y*this._scale+"px"),this._element.appendChild(c),this._offset=o.P.convert(r&&r.offset||[0,-14])}if(this._element.classList.add("maplibregl-marker"),this._element.addEventListener("dragstart",(c=>{c.preventDefault()})),this._element.addEventListener("mousedown",(c=>{c.preventDefault()})),Wo(this._element,this._anchor,"marker"),r&&r.className)for(const c of r.className.split(" "))this._element.classList.add(c);this._popup=null}addTo(r){return this.remove(),this._map=r,this._element.hasAttribute("aria-label")||this._element.setAttribute("aria-label",r._getUIString("Marker.Title")),this._element.hasAttribute("role")||this._element.setAttribute("role","button"),r.getCanvasContainer().appendChild(this._element),r.on("move",this._update),r.on("moveend",this._update),r.on("terrain",this._update),r.on("projectiontransition",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this}remove(){return this._opacityTimeout&&(clearTimeout(this._opacityTimeout),delete this._opacityTimeout),this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("terrain",this._update),this._map.off("projectiontransition",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),H.remove(this._element),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(r){return this._lngLat=o.V.convert(r),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this}getElement(){return this._element}setPopup(r){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),r){if(!("offset"in r.options)){const y=Math.abs(13.5)/Math.SQRT2;r.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[y,-1*(38.1-13.5+y)],"bottom-right":[-y,-1*(38.1-13.5+y)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=r,this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this}setSubpixelPositioning(r){return this._subpixelPositioning=r,this}getPopup(){return this._popup}togglePopup(){const r=this._popup;return this._element.style.opacity===this._opacityWhenCovered?this:r?(r.isOpen()?r.remove():(r.setLngLat(this._lngLat),r.addTo(this._map)),this):this}_updateOpacity(r=!1){var c,f;const y=(c=this._map)===null||c===void 0?void 0:c.terrain,b=this._map.transform.isLocationOccluded(this._lngLat);if(!y||b){const Ae=b?this._opacityWhenCovered:this._opacity;return void(this._element.style.opacity!==Ae&&(this._element.style.opacity=Ae))}if(r)this._opacityTimeout=null;else{if(this._opacityTimeout)return;this._opacityTimeout=setTimeout((()=>{this._opacityTimeout=null}),100)}const S=this._map,M=S.terrain.depthAtPoint(this._pos),N=S.terrain.getElevationForLngLat(this._lngLat);if(S.transform.lngLatToCameraDepth(this._lngLat,N)-M<.006)return void(this._element.style.opacity=this._opacity);const j=-this._offset.y/S.transform.pixelsPerMeter,q=Math.sin(S.getPitch()*Math.PI/180)*j,ne=S.terrain.depthAtPoint(new o.P(this._pos.x,this._pos.y-this._offset.y)),ee=S.transform.lngLatToCameraDepth(this._lngLat,N+q)-ne>.006;!((f=this._popup)===null||f===void 0)&&f.isOpen()&&ee&&this._popup.remove(),this._element.style.opacity=ee?this._opacityWhenCovered:this._opacity}getOffset(){return this._offset}setOffset(r){return this._offset=o.P.convert(r),this._update(),this}addClassName(r){this._element.classList.add(r)}removeClassName(r){this._element.classList.remove(r)}toggleClassName(r){return this._element.classList.toggle(r)}setDraggable(r){return this._draggable=!!r,this._map&&(r?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(r){return this._rotation=r||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(r){return this._rotationAlignment=r||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment}setPitchAlignment(r){return this._pitchAlignment=r&&r!=="auto"?r:this._rotationAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment}setOpacity(r,c){return(this._opacity===void 0||r===void 0&&c===void 0)&&(this._opacity="1",this._opacityWhenCovered="0.2"),r!==void 0&&(this._opacity=r),c!==void 0&&(this._opacityWhenCovered=c),this._map&&this._updateOpacity(!0),this}}const fu={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0};let jl=0,Vl=!1;const Va={maxWidth:100,unit:"metric"};function bi(w,r,c){const f=c&&c.maxWidth||100,y=w._container.clientHeight/2,b=w._container.clientWidth/2,S=w.unproject([b-f/2,y]),M=w.unproject([b+f/2,y]),N=Math.round(w.project(M).x-w.project(S).x),j=Math.min(f,N,w._container.clientWidth),q=S.distanceTo(M);if(c&&c.unit==="imperial"){const ne=3.2808*q;ne>5280?Ui(r,j,ne/5280,w._getUIString("ScaleControl.Miles")):Ui(r,j,ne,w._getUIString("ScaleControl.Feet"))}else c&&c.unit==="nautical"?Ui(r,j,q/1852,w._getUIString("ScaleControl.NauticalMiles")):q>=1e3?Ui(r,j,q/1e3,w._getUIString("ScaleControl.Kilometers")):Ui(r,j,q,w._getUIString("ScaleControl.Meters"))}function Ui(w,r,c,f){const y=(function(b){const S=Math.pow(10,`${Math.floor(b)}`.length-1);let M=b/S;return M=M>=10?10:M>=5?5:M>=3?3:M>=2?2:M>=1?1:(function(N){const j=Math.pow(10,Math.ceil(-Math.log(N)/Math.LN10));return Math.round(N*j)/j})(M),S*M})(c);w.style.width=r*(y/c)+"px",w.innerHTML=`${y}&nbsp;${f}`}const es={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px",subpixelPositioning:!1,locationOccludedOpacity:void 0},Kc=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function Ga(w){if(w){if(typeof w=="number"){const r=Math.round(Math.abs(w)/Math.SQRT2);return{center:new o.P(0,0),top:new o.P(0,w),"top-left":new o.P(r,r),"top-right":new o.P(-r,r),bottom:new o.P(0,-w),"bottom-left":new o.P(r,-r),"bottom-right":new o.P(-r,-r),left:new o.P(w,0),right:new o.P(-w,0)}}if(w instanceof o.P||Array.isArray(w)){const r=o.P.convert(w);return{center:r,top:r,"top-left":r,"top-right":r,bottom:r,"bottom-left":r,"bottom-right":r,left:r,right:r}}return{center:o.P.convert(w.center||[0,0]),top:o.P.convert(w.top||[0,0]),"top-left":o.P.convert(w["top-left"]||[0,0]),"top-right":o.P.convert(w["top-right"]||[0,0]),bottom:o.P.convert(w.bottom||[0,0]),"bottom-left":o.P.convert(w["bottom-left"]||[0,0]),"bottom-right":o.P.convert(w["bottom-right"]||[0,0]),left:o.P.convert(w.left||[0,0]),right:o.P.convert(w.right||[0,0])}}return Ga(new o.P(0,0))}const qc=x;m.AJAXError=o.cJ,m.Event=o.l,m.Evented=o.E,m.LngLat=o.V,m.MercatorCoordinate=o.ab,m.Point=o.P,m.addProtocol=o.cK,m.config=o.c,m.removeProtocol=o.cL,m.AttributionControl=Fo,m.BoxZoomHandler=kt,m.CanvasSource=de,m.CooperativeGesturesHandler=Vi,m.DoubleClickZoomHandler=Oi,m.DragPanHandler=gr,m.DragRotateHandler=xr,m.EdgeInsets=Sa,m.FullscreenControl=class extends o.E{constructor(w={}){super(),this._onFullscreenChange=()=>{var r;let c=window.document.fullscreenElement||window.document.mozFullScreenElement||window.document.webkitFullscreenElement||window.document.msFullscreenElement;for(;!((r=c?.shadowRoot)===null||r===void 0)&&r.fullscreenElement;)c=c.shadowRoot.fullscreenElement;c===this._container!==this._fullscreen&&this._handleFullscreenChange()},this._onClickFullscreen=()=>{this._isFullscreen()?this._exitFullscreen():this._requestFullscreen()},this._fullscreen=!1,w&&w.container&&(w.container instanceof HTMLElement?this._container=w.container:o.w("Full screen control 'container' must be a DOM element.")),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in document&&(this._fullscreenchange="MSFullscreenChange")}onAdd(w){return this._map=w,this._container||(this._container=this._map.getContainer()),this._controlContainer=H.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),this._controlContainer}onRemove(){H.remove(this._controlContainer),this._map=null,window.document.removeEventListener(this._fullscreenchange,this._onFullscreenChange)}_setupUI(){const w=this._fullscreenButton=H.create("button","maplibregl-ctrl-fullscreen",this._controlContainer);H.create("span","maplibregl-ctrl-icon",w).setAttribute("aria-hidden","true"),w.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),window.document.addEventListener(this._fullscreenchange,this._onFullscreenChange)}_updateTitle(){const w=this._getTitle();this._fullscreenButton.setAttribute("aria-label",w),this._fullscreenButton.title=w}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_handleFullscreenChange(){this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("maplibregl-ctrl-shrink"),this._fullscreenButton.classList.toggle("maplibregl-ctrl-fullscreen"),this._updateTitle(),this._fullscreen?(this.fire(new o.l("fullscreenstart")),this._prevCooperativeGesturesEnabled=this._map.cooperativeGestures.isEnabled(),this._map.cooperativeGestures.disable()):(this.fire(new o.l("fullscreenend")),this._prevCooperativeGesturesEnabled&&this._map.cooperativeGestures.enable())}_exitFullscreen(){window.document.exitFullscreen?window.document.exitFullscreen():window.document.mozCancelFullScreen?window.document.mozCancelFullScreen():window.document.msExitFullscreen?window.document.msExitFullscreen():window.document.webkitCancelFullScreen?window.document.webkitCancelFullScreen():this._togglePseudoFullScreen()}_requestFullscreen(){this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen?this._container.webkitRequestFullscreen():this._togglePseudoFullScreen()}_togglePseudoFullScreen(){this._container.classList.toggle("maplibregl-pseudo-fullscreen"),this._handleFullscreenChange(),this._map.resize()}},m.GeoJSONSource=On,m.GeolocateControl=class extends o.E{constructor(w){super(),this._onSuccess=r=>{if(this._map){if(this._isOutOfMapMaxBounds(r))return this._setErrorState(),this.fire(new o.l("outofmaxbounds",r)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=r,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background");break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(r),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(r),this.options.showUserLocation&&this._dotElement.classList.remove("maplibregl-user-location-dot-stale"),this.fire(new o.l("geolocate",r)),this._finish()}},this._updateCamera=r=>{const c=new o.V(r.coords.longitude,r.coords.latitude),f=r.coords.accuracy,y=this._map.getBearing(),b=o.e({bearing:y},this.options.fitBoundsOptions),S=Ur.fromLngLat(c,f);this._map.fitBounds(S,b,{geolocateSource:!0})},this._updateMarker=r=>{if(r){const c=new o.V(r.coords.longitude,r.coords.latitude);this._accuracyCircleMarker.setLngLat(c).addTo(this._map),this._userLocationDotMarker.setLngLat(c).addTo(this._map),this._accuracy=r.coords.accuracy,this._updateCircleRadiusIfNeeded()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},this._onUpdate=()=>{this._updateCircleRadiusIfNeeded()},this._onError=r=>{if(this._map){if(r.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const c=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=c,this._geolocateButton.setAttribute("aria-label",c),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(r.code===3&&Vl)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("maplibregl-user-location-dot-stale"),this.fire(new o.l("error",r)),this._finish()}},this._finish=()=>{this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},this._setupUI=()=>{this._map&&(this._container.addEventListener("contextmenu",(r=>r.preventDefault())),this._geolocateButton=H.create("button","maplibregl-ctrl-geolocate",this._container),H.create("span","maplibregl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",this._geolocateButton.disabled=!0)},this._finishSetupUI=r=>{if(this._map){if(r===!1){o.w("Geolocation support is not available so the GeolocateControl will be disabled.");const c=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=c,this._geolocateButton.setAttribute("aria-label",c)}else{const c=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.disabled=!1,this._geolocateButton.title=c,this._geolocateButton.setAttribute("aria-label",c)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=H.create("div","maplibregl-user-location-dot"),this._userLocationDotMarker=new pA({element:this._dotElement}),this._circleElement=H.create("div","maplibregl-user-location-accuracy-circle"),this._accuracyCircleMarker=new pA({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onUpdate),this._map.on("move",this._onUpdate),this._map.on("rotate",this._onUpdate),this._map.on("pitch",this._onUpdate)),this._geolocateButton.addEventListener("click",(()=>this.trigger())),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",(c=>{const f=c?.[0]instanceof ResizeObserverEntry;c.geolocateSource||this._watchState!=="ACTIVE_LOCK"||f||this._map.isZooming()||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this.fire(new o.l("trackuserlocationend")),this.fire(new o.l("userlocationlostfocus")))}))}},this.options=o.e({},fu,w)}onAdd(w){return this._map=w,this._container=H.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),(function(){return o._(this,arguments,void 0,(function*(r=!1){if(Hl!==void 0&&!r)return Hl;if(window.navigator.permissions===void 0)return Hl=!!window.navigator.geolocation,Hl;try{Hl=(yield window.navigator.permissions.query({name:"geolocation"})).state!=="denied"}catch{Hl=!!window.navigator.geolocation}return Hl}))})().then((r=>this._finishSetupUI(r))),this._container}onRemove(){this._geolocationWatchID!==void 0&&(window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),H.remove(this._container),this._map.off("zoom",this._onUpdate),this._map.off("move",this._onUpdate),this._map.off("rotate",this._onUpdate),this._map.off("pitch",this._onUpdate),this._map=void 0,jl=0,Vl=!1}_isOutOfMapMaxBounds(w){const r=this._map.getMaxBounds(),c=w.coords;return r&&(c.longitude<r.getWest()||c.longitude>r.getEast()||c.latitude<r.getSouth()||c.latitude>r.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"ACTIVE_ERROR":case"BACKGROUND_ERROR":case"OFF":case void 0:break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}}_updateCircleRadiusIfNeeded(){const w=this._userLocationDotMarker.getLngLat();if(!(this.options.showUserLocation&&this.options.showAccuracyCircle&&this._accuracy&&w))return;const r=this._map.project(w),c=this._map.unproject([r.x+100,r.y]),f=w.distanceTo(c)/100,y=2*this._accuracy/f;this._circleElement.style.width=`${y.toFixed(2)}px`,this._circleElement.style.height=`${y.toFixed(2)}px`}trigger(){if(!this._setup)return o.w("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new o.l("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":jl--,Vl=!1,this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this.fire(new o.l("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new o.l("trackuserlocationstart")),this.fire(new o.l("userlocationfocus"));break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"OFF":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let w;this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),jl++,jl>1?(w={maximumAge:6e5,timeout:0},Vl=!0):(w=this.options.positionOptions,Vl=!1),this._geolocationWatchID=window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,w)}}else window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_clearWatch(){window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},m.GlobeControl=class{constructor(){this._toggleProjection=()=>{var w;const r=(w=this._map.getProjection())===null||w===void 0?void 0:w.type;this._map.setProjection(r!=="mercator"&&r?{type:"mercator"}:{type:"globe"}),this._updateGlobeIcon()},this._updateGlobeIcon=()=>{var w;this._globeButton.classList.remove("maplibregl-ctrl-globe"),this._globeButton.classList.remove("maplibregl-ctrl-globe-enabled"),((w=this._map.getProjection())===null||w===void 0?void 0:w.type)==="globe"?(this._globeButton.classList.add("maplibregl-ctrl-globe-enabled"),this._globeButton.title=this._map._getUIString("GlobeControl.Disable")):(this._globeButton.classList.add("maplibregl-ctrl-globe"),this._globeButton.title=this._map._getUIString("GlobeControl.Enable"))}}onAdd(w){return this._map=w,this._container=H.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._globeButton=H.create("button","maplibregl-ctrl-globe",this._container),H.create("span","maplibregl-ctrl-icon",this._globeButton).setAttribute("aria-hidden","true"),this._globeButton.type="button",this._globeButton.addEventListener("click",this._toggleProjection),this._updateGlobeIcon(),this._map.on("styledata",this._updateGlobeIcon),this._container}onRemove(){H.remove(this._container),this._map.off("styledata",this._updateGlobeIcon),this._globeButton.removeEventListener("click",this._toggleProjection),this._map=void 0}},m.Hash=fA,m.ImageSource=hn,m.KeyboardHandler=as,m.LngLatBounds=Ur,m.LogoControl=ki,m.Map=class extends Es{constructor(w){var r,c;o.cH.mark(o.cI.create);const f=Object.assign(Object.assign(Object.assign({},Ha),w),{canvasContextAttributes:Object.assign(Object.assign({},Ha.canvasContextAttributes),w.canvasContextAttributes)});if(f.minZoom!=null&&f.maxZoom!=null&&f.minZoom>f.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(f.minPitch!=null&&f.maxPitch!=null&&f.minPitch>f.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(f.minPitch!=null&&f.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(f.maxPitch!=null&&f.maxPitch>180)throw new Error("maxPitch must be less than or equal to 180");const y=new ul,b=new ha;if(f.minZoom!==void 0&&y.setMinZoom(f.minZoom),f.maxZoom!==void 0&&y.setMaxZoom(f.maxZoom),f.minPitch!==void 0&&y.setMinPitch(f.minPitch),f.maxPitch!==void 0&&y.setMaxPitch(f.maxPitch),f.renderWorldCopies!==void 0&&y.setRenderWorldCopies(f.renderWorldCopies),f.transformConstrain!==null&&y.setConstrainOverride(f.transformConstrain),super(y,b,{bearingSnap:f.bearingSnap}),this._idleTriggered=!1,this._crossFadingFactor=1,this._renderTaskQueue=new In,this._controls=[],this._mapId=o.ah(),this._lostContextStyle={style:null,images:null},this._contextLost=M=>{M.preventDefault(),this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this.painter.destroy();for(const N of Object.values(this.style._layers))if(N.type==="custom"&&console.warn(`Custom layer with id '${N.id}' cannot be restored after WebGL context loss. You will need to re-add it manually after context restoration.`),N._listeners)for(const[j]of Object.entries(N._listeners))console.warn(`Custom layer with id '${N.id}' had event listeners for event '${j}' which cannot be restored after WebGL context loss. You will need to re-add them manually after context restoration.`);this._lostContextStyle=this._getStyleAndImages(),this.style.destroy(),this.style=null,this.fire(new o.l("webglcontextlost",{originalEvent:M}))},this._contextRestored=M=>{this._lostContextStyle.style&&this.setStyle(this._lostContextStyle.style,{diff:!1}),this._lostContextStyle.images&&(this.style.imageManager.images=this._lostContextStyle.images),this._setupPainter(),this.resize(),this._update(),this.fire(new o.l("webglcontextrestored",{originalEvent:M}))},this._onMapScroll=M=>{if(M.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},this._onWindowOnline=()=>{this._update()},this._interactive=f.interactive,this._maxTileCacheSize=f.maxTileCacheSize,this._maxTileCacheZoomLevels=f.maxTileCacheZoomLevels,this._canvasContextAttributes=Object.assign({},f.canvasContextAttributes),this._trackResize=f.trackResize===!0,this._bearingSnap=f.bearingSnap,this._centerClampedToGround=f.centerClampedToGround,this._refreshExpiredTiles=f.refreshExpiredTiles===!0,this._fadeDuration=f.fadeDuration,this._crossSourceCollisions=f.crossSourceCollisions===!0,this._collectResourceTiming=f.collectResourceTiming===!0,this._locale=Object.assign(Object.assign({},Ji),f.locale),this._clickTolerance=f.clickTolerance,this._overridePixelRatio=f.pixelRatio,this._maxCanvasSize=f.maxCanvasSize,this._zoomLevelsToOverscale=f.experimentalZoomLevelsToOverscale,this.transformCameraUpdate=f.transformCameraUpdate,this.transformConstrain=f.transformConstrain,this.cancelPendingTileRequestsWhileZooming=f.cancelPendingTileRequestsWhileZooming===!0,f.reduceMotion!==void 0&&(P.prefersReducedMotion=f.reduceMotion),this._imageQueueHandle=Me.addThrottleControl((()=>this.isMoving())),this._requestManager=new Pe(f.transformRequest),typeof f.container=="string"){if(this._container=document.getElementById(f.container),!this._container)throw new Error(`Container '${f.container}' not found.`)}else{if(!(f.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=f.container}if(f.maxBounds&&this.setMaxBounds(f.maxBounds),this._setupContainer(),this._setupPainter(),this.on("move",(()=>this._update(!1))),this.on("moveend",(()=>this._update(!1))),this.on("zoom",(()=>this._update(!0))),this.on("terrain",(()=>{this.painter.terrainFacilitator.dirty=!0,this._update(!0)})),this.once("idle",(()=>{this._idleTriggered=!0})),typeof window<"u"){addEventListener("online",this._onWindowOnline,!1);let M=!1;const N=Ou((j=>{this._trackResize&&!this._removed&&(this.resize(j),this.redraw())}),50);this._resizeObserver=new ResizeObserver((j=>{M?N(j):M=!0})),this._resizeObserver.observe(this._container)}this.handlers=new wi(this,f),this._hash=f.hash&&new fA(typeof f.hash=="string"&&f.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:f.center,elevation:f.elevation,zoom:f.zoom,bearing:f.bearing,pitch:f.pitch,roll:f.roll}),f.bounds&&(this.resize(),this.fitBounds(f.bounds,o.e({},f.fitBoundsOptions,{duration:0}))));const S=typeof f.style=="string"||((c=(r=f.style)===null||r===void 0?void 0:r.projection)===null||c===void 0?void 0:c.type)!=="globe";this.resize(null,S),this._localIdeographFontFamily=f.localIdeographFontFamily,this._validateStyle=f.validateStyle,f.style&&this.setStyle(f.style,{localIdeographFontFamily:f.localIdeographFontFamily}),f.attributionControl&&this.addControl(new Fo(typeof f.attributionControl=="boolean"?void 0:f.attributionControl)),f.maplibreLogo&&this.addControl(new ki,f.logoPosition),this.on("style.load",(()=>{if(S||this._resizeTransform(),this.transform.unmodified){const M=o.U(this.style.stylesheet,["center","zoom","bearing","pitch","roll"]);this.jumpTo(M)}})),this.on("data",(M=>{this._update(M.dataType==="style"),this.fire(new o.l(`${M.dataType}data`,M))})),this.on("dataloading",(M=>{this.fire(new o.l(`${M.dataType}dataloading`,M))})),this.on("dataabort",(M=>{this.fire(new o.l("sourcedataabort",M))}))}_getMapId(){return this._mapId}setGlobalStateProperty(w,r){return this.style.setGlobalStateProperty(w,r),this._update(!0)}getGlobalState(){return this.style.getGlobalState()}addControl(w,r){if(r===void 0&&(r=w.getDefaultPosition?w.getDefaultPosition():"top-right"),!w||!w.onAdd)return this.fire(new o.k(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const c=w.onAdd(this);this._controls.push(w);const f=this._controlPositions[r];return r.indexOf("bottom")!==-1?f.insertBefore(c,f.firstChild):f.appendChild(c),this}removeControl(w){if(!w||!w.onRemove)return this.fire(new o.k(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const r=this._controls.indexOf(w);return r>-1&&this._controls.splice(r,1),w.onRemove(this),this}hasControl(w){return this._controls.indexOf(w)>-1}coveringTiles(w){return Tn(this.transform,w)}calculateCameraOptionsFromTo(w,r,c,f){return f==null&&this.terrain&&(f=this.terrain.getElevationForLngLat(c)),super.calculateCameraOptionsFromTo(w,r,c,f)}resize(w,r=!0){const[c,f]=this._containerDimensions(),y=this._getClampedPixelRatio(c,f);if(this._resizeCanvas(c,f,y),this.painter.resize(c,f,y),this.painter.overLimit()){const S=this.painter.context.gl;this._maxCanvasSize=[S.drawingBufferWidth,S.drawingBufferHeight];const M=this._getClampedPixelRatio(c,f);this._resizeCanvas(c,f,M),this.painter.resize(c,f,M)}this._resizeTransform(r);const b=!this._moving;return b&&(this.stop(),this.fire(new o.l("movestart",w)).fire(new o.l("move",w))),this.fire(new o.l("resize",w)),b&&this.fire(new o.l("moveend",w)),this}_resizeTransform(w=!0){var r;const[c,f]=this._containerDimensions();this.transform.resize(c,f,w),(r=this._requestedCameraState)===null||r===void 0||r.resize(c,f,w)}_getClampedPixelRatio(w,r){const{0:c,1:f}=this._maxCanvasSize,y=this.getPixelRatio(),b=w*y,S=r*y;return Math.min(b>c?c/b:1,S>f?f/S:1)*y}getPixelRatio(){var w;return(w=this._overridePixelRatio)!==null&&w!==void 0?w:devicePixelRatio}setPixelRatio(w){this._overridePixelRatio=w,this.resize()}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()}setMaxBounds(w){return this.transform.setMaxBounds(Ur.convert(w)),this._update()}setMinZoom(w){if((w=w??-2)>=-2&&w<=this.transform.maxZoom)return this.transform.setMinZoom(w),this._update(),this.getZoom()<w&&this.setZoom(w),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(w){if((w=w??22)>=this.transform.minZoom)return this.transform.setMaxZoom(w),this._update(),this.getZoom()>w&&this.setZoom(w),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(w){if((w=w??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(w>=0&&w<=this.transform.maxPitch)return this.transform.setMinPitch(w),this._update(),this.getPitch()<w&&this.setPitch(w),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(w){if((w=w??60)>180)throw new Error("maxPitch must be less than or equal to 180");if(w>=this.transform.minPitch)return this.transform.setMaxPitch(w),this._update(),this.getPitch()>w&&this.setPitch(w),this;throw new Error("maxPitch must be greater than the current minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(w){return this.transform.setRenderWorldCopies(w),this._update()}setTransformConstrain(w){return this.transform.setConstrainOverride(w),this._update()}project(w){return this.transform.locationToScreenPoint(o.V.convert(w),this.style&&this.terrain)}unproject(w){return this.transform.screenPointToLocation(o.P.convert(w),this.terrain)}isMoving(){var w;return this._moving||((w=this.handlers)===null||w===void 0?void 0:w.isMoving())}isZooming(){var w;return this._zooming||((w=this.handlers)===null||w===void 0?void 0:w.isZooming())}isRotating(){var w;return this._rotating||((w=this.handlers)===null||w===void 0?void 0:w.isRotating())}_createDelegatedListener(w,r,c){if(w==="mouseenter"||w==="mouseover"){let f=!1;return{layers:r,listener:c,delegates:{mousemove:b=>{const S=r.filter((N=>this.getLayer(N))),M=S.length!==0?this.queryRenderedFeatures(b.point,{layers:S}):[];M.length?f||(f=!0,c.call(this,new we(w,this,b.originalEvent,{features:M}))):f=!1},mouseout:()=>{f=!1}}}}if(w==="mouseleave"||w==="mouseout"){let f=!1;return{layers:r,listener:c,delegates:{mousemove:S=>{const M=r.filter((N=>this.getLayer(N)));(M.length!==0?this.queryRenderedFeatures(S.point,{layers:M}):[]).length?f=!0:f&&(f=!1,c.call(this,new we(w,this,S.originalEvent)))},mouseout:S=>{f&&(f=!1,c.call(this,new we(w,this,S.originalEvent)))}}}}{const f=y=>{const b=r.filter((M=>this.getLayer(M))),S=b.length!==0?this.queryRenderedFeatures(y.point,{layers:b}):[];S.length&&(y.features=S,c.call(this,y),delete y.features)};return{layers:r,listener:c,delegates:{[w]:f}}}}_saveDelegatedListener(w,r){this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[w]=this._delegatedListeners[w]||[],this._delegatedListeners[w].push(r)}_removeDelegatedListener(w,r,c){if(!this._delegatedListeners||!this._delegatedListeners[w])return;const f=this._delegatedListeners[w];for(let y=0;y<f.length;y++){const b=f[y];if(b.listener===c&&b.layers.length===r.length&&b.layers.every((S=>r.includes(S)))){for(const S in b.delegates)this.off(S,b.delegates[S]);return void f.splice(y,1)}}}on(w,r,c){if(c===void 0)return super.on(w,r);const f=typeof r=="string"?[r]:r,y=this._createDelegatedListener(w,f,c);this._saveDelegatedListener(w,y);for(const b in y.delegates)this.on(b,y.delegates[b]);return{unsubscribe:()=>{this._removeDelegatedListener(w,f,c)}}}once(w,r,c){if(c===void 0)return super.once(w,r);const f=typeof r=="string"?[r]:r,y=this._createDelegatedListener(w,f,c);for(const b in y.delegates){const S=y.delegates[b];y.delegates[b]=(...M)=>{this._removeDelegatedListener(w,f,c),S(...M)}}this._saveDelegatedListener(w,y);for(const b in y.delegates)this.once(b,y.delegates[b]);return this}off(w,r,c){return c===void 0?super.off(w,r):(this._removeDelegatedListener(w,typeof r=="string"?[r]:r,c),this)}queryRenderedFeatures(w,r){if(!this.style)return[];let c;const f=w instanceof o.P||Array.isArray(w),y=f?w:[[0,0],[this.transform.width,this.transform.height]];if(r=r||(f?{}:w)||{},y instanceof o.P||typeof y[0]=="number")c=[o.P.convert(y)];else{const b=o.P.convert(y[0]),S=o.P.convert(y[1]);c=[b,new o.P(S.x,b.y),S,new o.P(b.x,S.y),b]}return this.style.queryRenderedFeatures(c,r,this.transform)}querySourceFeatures(w,r){return this.style.querySourceFeatures(w,r)}setStyle(w,r){return(r=o.e({},{localIdeographFontFamily:this._localIdeographFontFamily,validate:this._validateStyle},r)).diff!==!1&&r.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&w?(this._diffStyle(w,r),this):(this._localIdeographFontFamily=r.localIdeographFontFamily,this._updateStyle(w,r))}setTransformRequest(w){return this._requestManager.setTransformRequest(w),this}_getUIString(w){const r=this._locale[w];if(r==null)throw new Error(`Missing UI string '${w}'`);return r}_updateStyle(w,r){var c,f;if(r.transformStyle&&this.style&&!this.style._loaded)return void this.style.once("style.load",(()=>this._updateStyle(w,r)));const y=this.style&&r.transformStyle?this.style.serialize():void 0;return this.style&&(this.style.setEventedParent(null),this.style._remove(!w)),w?(this.style=new Xi(this,r||{}),this.style.setEventedParent(this,{style:this.style}),typeof w=="string"?this.style.loadURL(w,r,y):this.style.loadJSON(w,r,y),this):((f=(c=this.style)===null||c===void 0?void 0:c.projection)===null||f===void 0||f.destroy(),delete this.style,this)}_lazyInitEmptyStyle(){this.style||(this.style=new Xi(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(w,r){if(typeof w=="string"){const c=this._requestManager.transformRequest(w,"Style");o.j(c,new AbortController).then((f=>{this._updateDiff(f.data,r)})).catch((f=>{f&&this.fire(new o.k(f))}))}else typeof w=="object"&&this._updateDiff(w,r)}_updateDiff(w,r){try{this.style.setState(w,r)&&this._update(!0)}catch(c){o.w(`Unable to perform style diff: ${c.message||c.error||c}.  Rebuilding the style from scratch.`),this._updateStyle(w,r)}}getStyle(){if(this.style)return this.style.serialize()}_getStyleAndImages(){return this.style?{style:this.style.serialize(),images:this.style.imageManager.cloneImages()}:{style:null,images:{}}}isStyleLoaded(){return this.style?this.style.loaded():o.w("There is no style added to the map.")}addSource(w,r){return this._lazyInitEmptyStyle(),this.style.addSource(w,r),this._update(!0)}isSourceLoaded(w){const r=this.style&&this.style.tileManagers[w];if(r!==void 0)return r.loaded();this.fire(new o.k(new Error(`There is no tile manager with ID '${w}'`)))}setTerrain(w){if(this.style._checkLoaded(),this._terrainDataCallback&&this.style.off("data",this._terrainDataCallback),w){const r=this.style.tileManagers[w.source];if(!r)throw new Error(`cannot load terrain, because there exists no source with ID: ${w.source}`);this.terrain===null&&r.reload();for(const c in this.style._layers){const f=this.style._layers[c];f.type==="hillshade"&&f.source===w.source&&o.w("You are using the same source for a hillshade layer and for 3D terrain. Please consider using two separate sources to improve rendering quality."),f.type==="color-relief"&&f.source===w.source&&o.w("You are using the same source for a color-relief layer and for 3D terrain. Please consider using two separate sources to improve rendering quality.")}this.terrain=new Ss(this.painter,r,w),this.painter.renderToTexture=new Fs(this.painter,this.terrain),this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this.transform.setElevation(this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this._terrainDataCallback=c=>{var f;c.dataType==="style"?this.terrain.tileManager.freeRtt():c.dataType==="source"&&c.tile&&(c.sourceId!==w.source||this._elevationFreeze||(this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this._centerClampedToGround&&this.transform.setElevation(this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))),((f=c.source)===null||f===void 0?void 0:f.type)==="image"?this.terrain.tileManager.freeRtt():this.terrain.tileManager.freeRtt(c.tile.tileID))},this.style.on("data",this._terrainDataCallback)}else this.terrain&&this.terrain.tileManager.destruct(),this.terrain=null,this.painter.renderToTexture&&this.painter.renderToTexture.destruct(),this.painter.renderToTexture=null,this.transform.setMinElevationForCurrentTile(0),this._centerClampedToGround&&this.transform.setElevation(0);return this.fire(new o.l("terrain",{terrain:w})),this}getTerrain(){var w,r;return(r=(w=this.terrain)===null||w===void 0?void 0:w.options)!==null&&r!==void 0?r:null}areTilesLoaded(){const w=this.style&&this.style.tileManagers;for(const r of Object.values(w))if(!r.areTilesLoaded())return!1;return!0}removeSource(w){return this.style.removeSource(w),this._update(!0)}getSource(w){return this.style.getSource(w)}setSourceTileLodParams(w,r,c){if(c){const f=this.getSource(c);if(!f)throw new Error(`There is no source with ID "${c}", cannot set LOD parameters`);f.calculateTileZoom=Kr(Math.max(1,w),Math.max(1,r))}else for(const f in this.style.tileManagers)this.style.tileManagers[f].getSource().calculateTileZoom=Kr(Math.max(1,w),Math.max(1,r));return this._update(!0),this}refreshTiles(w,r){const c=this.style.tileManagers[w];if(!c)throw new Error(`There is no tile manager with ID "${w}", cannot refresh tile`);r===void 0?c.reload(!0):c.refreshTiles(r.map((f=>new o.ae(f.z,f.x,f.y))))}addImage(w,r,c={}){const{pixelRatio:f=1,sdf:y=!1,stretchX:b,stretchY:S,content:M,textFitWidth:N,textFitHeight:j}=c;if(this._lazyInitEmptyStyle(),!(r instanceof HTMLImageElement||o.b(r))){if(r.width===void 0||r.height===void 0)return this.fire(new o.k(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));{const{width:q,height:ne,data:ee}=r,Ae=r;return this.style.addImage(w,{data:new o.R({width:q,height:ne},new Uint8Array(ee)),pixelRatio:f,stretchX:b,stretchY:S,content:M,textFitWidth:N,textFitHeight:j,sdf:y,version:0,userImage:Ae}),Ae.onAdd&&Ae.onAdd(this,w),this}}{const{width:q,height:ne,data:ee}=P.getImageData(r);this.style.addImage(w,{data:new o.R({width:q,height:ne},ee),pixelRatio:f,stretchX:b,stretchY:S,content:M,textFitWidth:N,textFitHeight:j,sdf:y,version:0})}}updateImage(w,r){const c=this.style.getImage(w);if(!c)return this.fire(new o.k(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const f=r instanceof HTMLImageElement||o.b(r)?P.getImageData(r):r,{width:y,height:b,data:S}=f;if(y===void 0||b===void 0)return this.fire(new o.k(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(y!==c.data.width||b!==c.data.height)return this.fire(new o.k(new Error("The width and height of the updated image must be that same as the previous version of the image")));const M=!(r instanceof HTMLImageElement||o.b(r));return c.data.replace(S,M),this.style.updateImage(w,c),this}getImage(w){return this.style.getImage(w)}hasImage(w){return w?!!this.style.getImage(w):(this.fire(new o.k(new Error("Missing required image id"))),!1)}removeImage(w){this.style.removeImage(w)}loadImage(w){return Me.getImage(this._requestManager.transformRequest(w,"Image"),new AbortController)}listImages(){return this.style.listImages()}addLayer(w,r){return this._lazyInitEmptyStyle(),this.style.addLayer(w,r),this._update(!0)}moveLayer(w,r){return this.style.moveLayer(w,r),this._update(!0)}removeLayer(w){return this.style.removeLayer(w),this._update(!0)}getLayer(w){return this.style.getLayer(w)}getLayersOrder(){return this.style.getLayersOrder()}setLayerZoomRange(w,r,c){return this.style.setLayerZoomRange(w,r,c),this._update(!0)}setFilter(w,r,c={}){return this.style.setFilter(w,r,c),this._update(!0)}getFilter(w){return this.style.getFilter(w)}setPaintProperty(w,r,c,f={}){return this.style.setPaintProperty(w,r,c,f),this._update(!0)}getPaintProperty(w,r){return this.style.getPaintProperty(w,r)}setLayoutProperty(w,r,c,f={}){return this.style.setLayoutProperty(w,r,c,f),this._update(!0)}getLayoutProperty(w,r){return this.style.getLayoutProperty(w,r)}setGlyphs(w,r={}){return this._lazyInitEmptyStyle(),this.style.setGlyphs(w,r),this._update(!0)}getGlyphs(){return this.style.getGlyphsUrl()}addSprite(w,r,c={}){return this._lazyInitEmptyStyle(),this.style.addSprite(w,r,c,(f=>{f||this._update(!0)})),this}removeSprite(w){return this._lazyInitEmptyStyle(),this.style.removeSprite(w),this._update(!0)}getSprite(){return this.style.getSprite()}setSprite(w,r={}){return this._lazyInitEmptyStyle(),this.style.setSprite(w,r,(c=>{c||this._update(!0)})),this}setLight(w,r={}){return this._lazyInitEmptyStyle(),this.style.setLight(w,r),this._update(!0)}getLight(){return this.style.getLight()}setSky(w,r={}){return this._lazyInitEmptyStyle(),this.style.setSky(w,r),this._update(!0)}getSky(){return this.style.getSky()}setFeatureState(w,r){return this.style.setFeatureState(w,r),this._update()}removeFeatureState(w,r){return this.style.removeFeatureState(w,r),this._update()}getFeatureState(w){return this.style.getFeatureState(w)}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}_containerDimensions(){let w=0,r=0;return this._container&&(w=this._container.clientWidth||400,r=this._container.clientHeight||300),[w,r]}_setupContainer(){const w=this._container;w.classList.add("maplibregl-map");const r=this._canvasContainer=H.create("div","maplibregl-canvas-container",w);this._interactive&&r.classList.add("maplibregl-interactive"),this._canvas=H.create("canvas","maplibregl-canvas",r),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex",this._interactive?"0":"-1"),this._canvas.setAttribute("aria-label",this._getUIString("Map.Title")),this._canvas.setAttribute("role","region");const c=this._containerDimensions(),f=this._getClampedPixelRatio(c[0],c[1]);this._resizeCanvas(c[0],c[1],f);const y=this._controlContainer=H.create("div","maplibregl-control-container",w),b=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach((S=>{b[S]=H.create("div",`maplibregl-ctrl-${S} `,y)})),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas(w,r,c){this._canvas.width=Math.floor(c*w),this._canvas.height=Math.floor(c*r),this._canvas.style.width=`${w}px`,this._canvas.style.height=`${r}px`}_setupPainter(){const w=Object.assign(Object.assign({},this._canvasContextAttributes),{alpha:!0,depth:!0,stencil:!0,premultipliedAlpha:!0});let r=null;this._canvas.addEventListener("webglcontextcreationerror",(f=>{r={requestedAttributes:w},f&&(r.statusMessage=f.statusMessage,r.type=f.type)}),{once:!0});let c=null;if(c=this._canvasContextAttributes.contextType?this._canvas.getContext(this._canvasContextAttributes.contextType,w):this._canvas.getContext("webgl2",w)||this._canvas.getContext("webgl",w),!c){const f="Failed to initialize WebGL";throw r?(r.message=f,new Error(JSON.stringify(r))):new Error(f)}this.painter=new du(c,this.transform),Z.testSupport(c)}migrateProjection(w,r){super.migrateProjection(w,r),this.painter.transform=w,this.fire(new o.l("projectiontransition",{newProjection:this.style.projection.name}))}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(w){return this.style&&this.style._loaded?(this._styleDirty=this._styleDirty||w,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(w){return this._update(),this._renderTaskQueue.add(w)}_cancelRenderFrame(w){this._renderTaskQueue.remove(w)}_render(w){var r,c,f,y,b;const S=this._idleTriggered?this._fadeDuration:0,M=((r=this.style.projection)===null||r===void 0?void 0:r.transitionState)>0;if(this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(w),this._removed)return;let N=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;const ne=this.transform.zoom,ee=z();this.style.zoomHistory.update(ne,ee);const Ae=new o.H(ne,{now:ee,fadeDuration:S,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),ve=Ae.crossFadingFactor();ve===1&&ve===this._crossFadingFactor||(N=!0,this._crossFadingFactor=ve),this.style.update(Ae)}const j=((c=this.style.projection)===null||c===void 0?void 0:c.transitionState)>0!==M;(f=this.style.projection)===null||f===void 0||f.setErrorQueryLatitudeDegrees(this.transform.center.lat),this.transform.setTransitionState((y=this.style.projection)===null||y===void 0?void 0:y.transitionState,(b=this.style.projection)===null||b===void 0?void 0:b.latitudeErrorCorrectionRadians),this.style&&(this._sourcesDirty||j)&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this.terrain?(this.terrain.tileManager.update(this.transform,this.terrain),this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),!this._elevationFreeze&&this._centerClampedToGround&&this.transform.setElevation(this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))):(this.transform.setMinElevationForCurrentTile(0),this._centerClampedToGround&&this.transform.setElevation(0)),this._placementDirty=this.style&&this.style._updatePlacement(this.transform,this.showCollisionBoxes,S,this._crossSourceCollisions,j),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:S,showPadding:this.showPadding}),this.fire(new o.l("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,o.cH.mark(o.cI.load),this.fire(new o.l("load"))),this.style&&(this.style.hasTransitions()||N)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles();const q=this._sourcesDirty||this._styleDirty||this._placementDirty;return q||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new o.l("idle")),!this._loaded||this._fullyLoaded||q||(this._fullyLoaded=!0,o.cH.mark(o.cI.fullLoad)),this}redraw(){return this.style&&(this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._render(0)),this}remove(){var w;this._hash&&this._hash.remove();for(const c of this._controls)c.onRemove(this);this._controls=[],this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),typeof window<"u"&&removeEventListener("online",this._onWindowOnline,!1),Me.removeThrottleControl(this._imageQueueHandle),(w=this._resizeObserver)===null||w===void 0||w.disconnect();const r=this.painter.context.gl.getExtension("WEBGL_lose_context");r?.loseContext&&r.loseContext(),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),H.remove(this._canvasContainer),H.remove(this._controlContainer),this._container.removeEventListener("scroll",this._onMapScroll,!1),this._container.classList.remove("maplibregl-map"),o.cH.clearMetrics(),this._removed=!0,this.fire(new o.l("remove"))}triggerRepaint(){this.style&&!this._frameRequest&&(this._frameRequest=new AbortController,P.frame(this._frameRequest,(w=>{o.cH.frame(w),this._frameRequest=null;try{this._render(w)}catch(r){if(!o.Z(r)&&!(function(c){return c.message===hc})(r))throw r}}),(()=>{})))}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(w){this._showTileBoundaries!==w&&(this._showTileBoundaries=w,this._update())}get showPadding(){return!!this._showPadding}set showPadding(w){this._showPadding!==w&&(this._showPadding=w,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(w){this._showCollisionBoxes!==w&&(this._showCollisionBoxes=w,w?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(w){this._showOverdrawInspector!==w&&(this._showOverdrawInspector=w,this._update())}get repaint(){return!!this._repaint}set repaint(w){this._repaint!==w&&(this._repaint=w,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(w){this._vertices=w,this._update()}get version(){return za}getCameraTargetElevation(){return this.transform.elevation}getProjection(){return this.style.getProjection()}setProjection(w){return this._lazyInitEmptyStyle(),this.style.setProjection(w),this._update(!0)}},m.MapMouseEvent=we,m.MapTouchEvent=Ce,m.MapWheelEvent=Te,m.Marker=pA,m.NavigationControl=class{constructor(w){this._updateZoomButtons=()=>{const r=this._map.getZoom(),c=r===this._map.getMaxZoom(),f=r===this._map.getMinZoom();this._zoomInButton.disabled=c,this._zoomOutButton.disabled=f,this._zoomInButton.setAttribute("aria-disabled",c.toString()),this._zoomOutButton.setAttribute("aria-disabled",f.toString())},this._rotateCompassArrow=()=>{this._compassIcon.style.transform=this.options.visualizePitch&&this.options.visualizeRoll?`scale(${1/Math.pow(Math.cos(this._map.transform.pitchInRadians),.5)}) rotateZ(${-this._map.transform.roll}deg) rotateX(${this._map.transform.pitch}deg) rotateZ(${-this._map.transform.bearing}deg)`:this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(this._map.transform.pitchInRadians),.5)}) rotateX(${this._map.transform.pitch}deg) rotateZ(${-this._map.transform.bearing}deg)`:this.options.visualizeRoll?`rotate(${-this._map.transform.bearing-this._map.transform.roll}deg)`:`rotate(${-this._map.transform.bearing}deg)`},this._setButtonTitle=(r,c)=>{const f=this._map._getUIString(`NavigationControl.${c}`);r.title=f,r.setAttribute("aria-label",f)},this.options=o.e({},Gc,w),this._container=H.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._container.addEventListener("contextmenu",(r=>r.preventDefault())),this.options.showZoom&&(this._zoomInButton=this._createButton("maplibregl-ctrl-zoom-in",(r=>this._map.zoomIn({},{originalEvent:r}))),H.create("span","maplibregl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("maplibregl-ctrl-zoom-out",(r=>this._map.zoomOut({},{originalEvent:r}))),H.create("span","maplibregl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(this._compass=this._createButton("maplibregl-ctrl-compass",(r=>{this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:r}):this._map.resetNorth({},{originalEvent:r})})),this._compassIcon=H.create("span","maplibregl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}onAdd(w){return this._map=w,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this.options.visualizeRoll&&this._map.on("roll",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new ja(this._map,this._compass,this.options.visualizePitch)),this._container}onRemove(){H.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this.options.visualizeRoll&&this._map.off("roll",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map}_createButton(w,r){const c=H.create("button",w,this._container);return c.type="button",c.addEventListener("click",r),c}},m.Popup=class extends o.E{constructor(w){super(),this._updateOpacity=()=>{this.options.locationOccludedOpacity!==void 0&&(this._container.style.opacity=this._map.transform.isLocationOccluded(this.getLngLat())?`${this.options.locationOccludedOpacity}`:"")},this.remove=()=>(this._content&&H.remove(this._content),this._container&&(H.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),this._map._canvasContainer.classList.remove("maplibregl-track-pointer"),delete this._map,this.fire(new o.l("close"))),this),this._onMouseUp=r=>{this._update(r.point)},this._onMouseMove=r=>{this._update(r.point)},this._onDrag=r=>{this._update(r.point)},this._update=r=>{if(!this._map||!this._lngLat&&!this._trackPointer||!this._content)return;if(!this._container){if(this._container=H.create("div","maplibregl-popup",this._map.getContainer()),this._tip=H.create("div","maplibregl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className)for(const S of this.options.className.split(" "))this._container.classList.add(S);this._closeButton&&this._closeButton.setAttribute("aria-label",this._map._getUIString("Popup.Close")),this._trackPointer&&this._container.classList.add("maplibregl-popup-track-pointer")}if(this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._lngLat=VA(this._lngLat,this._flatPos,this._map.transform,this._trackPointer),this._trackPointer&&!r)return;const c=this._flatPos=this._pos=this._trackPointer&&r?r:this._map.project(this._lngLat);this._map.terrain&&(this._flatPos=this._trackPointer&&r?r:this._map.transform.locationToScreenPoint(this._lngLat));let f=this.options.anchor;const y=Ga(this.options.offset);if(!f){const S=this._container.offsetWidth,M=this._container.offsetHeight;let N;N=c.y+y.bottom.y<M?["top"]:c.y>this._map.transform.height-M?["bottom"]:[],c.x<S/2?N.push("left"):c.x>this._map.transform.width-S/2&&N.push("right"),f=N.length===0?"bottom":N.join("-")}let b=c.add(y[f]);this.options.subpixelPositioning||(b=b.round()),H.setTransform(this._container,`${gi[f]} translate(${b.x}px,${b.y}px)`),Wo(this._container,f,"popup"),this._updateOpacity()},this._onClose=()=>{this.remove()},this.options=o.e(Object.create(es),w)}addTo(w){return this._map&&this.remove(),this._map=w,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")):this._map.on("move",this._update),this.fire(new o.l("open")),this}isOpen(){return!!this._map}getLngLat(){return this._lngLat}setLngLat(w){return this._lngLat=o.V.convert(w),this._pos=null,this._flatPos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.remove("maplibregl-track-pointer")),this}trackPointer(){return this._trackPointer=!0,this._pos=null,this._flatPos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")),this}getElement(){return this._container}setText(w){return this.setDOMContent(document.createTextNode(w))}setHTML(w){const r=document.createDocumentFragment(),c=document.createElement("body");let f;for(c.innerHTML=w;f=c.firstChild,f;)r.appendChild(f);return this.setDOMContent(r)}getMaxWidth(){var w;return(w=this._container)===null||w===void 0?void 0:w.style.maxWidth}setMaxWidth(w){return this.options.maxWidth=w,this._update(),this}setDOMContent(w){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=H.create("div","maplibregl-popup-content",this._container);return this._content.appendChild(w),this._createCloseButton(),this._update(),this._focusFirstElement(),this}addClassName(w){return this._container&&this._container.classList.add(w),this}removeClassName(w){return this._container&&this._container.classList.remove(w),this}setOffset(w){return this.options.offset=w,this._update(),this}toggleClassName(w){if(this._container)return this._container.classList.toggle(w)}setSubpixelPositioning(w){this.options.subpixelPositioning=w}_createCloseButton(){this.options.closeButton&&(this._closeButton=H.create("button","maplibregl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const w=this._container.querySelector(Kc);w&&w.focus()}},m.RasterDEMTileSource=Sr,m.RasterTileSource=Wr,m.ScaleControl=class{constructor(w){this._onMove=()=>{bi(this._map,this._container,this.options)},this.setUnit=r=>{this.options.unit=r,bi(this._map,this._container,this.options)},this.options=Object.assign(Object.assign({},Va),w)}getDefaultPosition(){return"bottom-left"}onAdd(w){return this._map=w,this._container=H.create("div","maplibregl-ctrl maplibregl-ctrl-scale",w.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}onRemove(){H.remove(this._container),this._map.off("move",this._onMove),this._map=void 0}},m.ScrollZoomHandler=Cs,m.Style=Xi,m.TerrainControl=class{constructor(w){this._toggleTerrain=()=>{this._map.getTerrain()?this._map.setTerrain(null):this._map.setTerrain(this.options),this._updateTerrainIcon()},this._updateTerrainIcon=()=>{this._terrainButton.classList.remove("maplibregl-ctrl-terrain"),this._terrainButton.classList.remove("maplibregl-ctrl-terrain-enabled"),this._map.terrain?(this._terrainButton.classList.add("maplibregl-ctrl-terrain-enabled"),this._terrainButton.title=this._map._getUIString("TerrainControl.Disable")):(this._terrainButton.classList.add("maplibregl-ctrl-terrain"),this._terrainButton.title=this._map._getUIString("TerrainControl.Enable"))},this.options=w}onAdd(w){return this._map=w,this._container=H.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._terrainButton=H.create("button","maplibregl-ctrl-terrain",this._container),H.create("span","maplibregl-ctrl-icon",this._terrainButton).setAttribute("aria-hidden","true"),this._terrainButton.type="button",this._terrainButton.addEventListener("click",this._toggleTerrain),this._updateTerrainIcon(),this._map.on("terrain",this._updateTerrainIcon),this._container}onRemove(){H.remove(this._container),this._map.off("terrain",this._updateTerrainIcon),this._map=void 0}},m.TwoFingersTouchPitchHandler=zn,m.TwoFingersTouchRotateHandler=pi,m.TwoFingersTouchZoomHandler=Hr,m.TwoFingersTouchZoomRotateHandler=Ti,m.VectorTileSource=lr,m.VideoSource=ft,m.addSourceType=(w,r)=>o._(void 0,void 0,void 0,(function*(){if(ye(w))throw new Error(`A source type called "${w}" already exists.`);((c,f)=>{fe[c]=f})(w,r)})),m.clearPrewarmedResources=function(){const w=rt;w&&(w.isPreloaded()&&w.numActive()===1?(w.release(Ne),rt=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},m.createTileMesh=V,m.getMaxParallelImageRequests=function(){return o.c.MAX_PARALLEL_IMAGE_REQUESTS},m.getRTLTextPluginStatus=function(){return yt().getRTLTextPluginStatus()},m.getVersion=function(){return qc},m.getWorkerCount=function(){return Ye.workerCount},m.getWorkerUrl=function(){return o.c.WORKER_URL},m.importScriptInWorkers=function(w){return Wt().broadcast("IS",w)},m.isTimeFrozen=function(){return W.isFrozen()},m.now=z,m.prewarm=function(){St().acquire(Ne)},m.restoreNow=function(){W.restoreNow()},m.setMaxParallelImageRequests=function(w){o.c.MAX_PARALLEL_IMAGE_REQUESTS=w},m.setNow=function(w){W.setNow(w)},m.setRTLTextPlugin=function(w,r){return yt().setRTLTextPlugin(w,r)},m.setWorkerCount=function(w){Ye.workerCount=w},m.setWorkerUrl=function(w){o.c.WORKER_URL=w}}));var d=i;return d}))})(k0)),k0.exports}var i6=n6();const sp=pw(i6);var bl=Uint8Array,SA=Uint16Array,$w=Int32Array,Ry=new bl([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),Ny=new bl([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),M_=new bl([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),vF=function(e,n){for(var i=new SA(31),l=0;l<31;++l)i[l]=n+=1<<e[l-1];for(var h=new $w(i[30]),l=1;l<30;++l)for(var d=i[l];d<i[l+1];++d)h[d]=d-i[l]<<5|l;return{b:i,r:h}},_F=vF(Ry,2),wF=_F.b,k_=_F.r;wF[28]=258,k_[258]=28;var xF=vF(Ny,0),s6=xF.b,z2=xF.r,U_=new SA(32768);for(var Ks=0;Ks<32768;++Ks){var id=(Ks&43690)>>1|(Ks&21845)<<1;id=(id&52428)>>2|(id&13107)<<2,id=(id&61680)>>4|(id&3855)<<4,U_[Ks]=((id&65280)>>8|(id&255)<<8)>>1}var nh=(function(e,n,i){for(var l=e.length,h=0,d=new SA(n);h<l;++h)e[h]&&++d[e[h]-1];var m=new SA(n);for(h=1;h<n;++h)m[h]=m[h-1]+d[h-1]<<1;var o;if(i){o=new SA(1<<n);var x=15-n;for(h=0;h<l;++h)if(e[h])for(var E=h<<4|e[h],I=n-e[h],D=m[e[h]-1]++<<I,O=D|(1<<I)-1;D<=O;++D)o[U_[D]>>x]=E}else for(o=new SA(l),h=0;h<l;++h)e[h]&&(o[h]=U_[m[e[h]-1]++]>>15-e[h]);return o}),xd=new bl(288);for(var Ks=0;Ks<144;++Ks)xd[Ks]=8;for(var Ks=144;Ks<256;++Ks)xd[Ks]=9;for(var Ks=256;Ks<280;++Ks)xd[Ks]=7;for(var Ks=280;Ks<288;++Ks)xd[Ks]=8;var Qm=new bl(32);for(var Ks=0;Ks<32;++Ks)Qm[Ks]=5;var o6=nh(xd,9,0),a6=nh(xd,9,1),l6=nh(Qm,5,0),c6=nh(Qm,5,1),a1=function(e){for(var n=e[0],i=1;i<e.length;++i)e[i]>n&&(n=e[i]);return n},Cu=function(e,n,i){var l=n/8|0;return(e[l]|e[l+1]<<8)>>(n&7)&i},l1=function(e,n){var i=n/8|0;return(e[i]|e[i+1]<<8|e[i+2]<<16)>>(n&7)},Ww=function(e){return(e+7)/8|0},bF=function(e,n,i){return(i==null||i>e.length)&&(i=e.length),new bl(e.subarray(n,i))},A6=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],CA=function(e,n,i){var l=new Error(n||A6[e]);if(l.code=e,Error.captureStackTrace&&Error.captureStackTrace(l,CA),!i)throw l;return l},Zw=function(e,n,i,l){var h=e.length,d=0;if(!h||n.f&&!n.l)return i||new bl(0);var m=!i,o=m||n.i!=2,x=n.i;m&&(i=new bl(h*3));var E=function(Wt){var ar=i.length;if(Wt>ar){var hr=new bl(Math.max(ar*2,Wt));hr.set(i),i=hr}},I=n.f||0,D=n.p||0,O=n.b||0,P=n.l,W=n.d,z=n.m,H=n.n,Z=h*8;do{if(!P){I=Cu(e,D,1);var ie=Cu(e,D+1,3);if(D+=3,ie)if(ie==1)P=a6,W=c6,z=9,H=5;else if(ie==2){var Ve=Cu(e,D,31)+257,Me=Cu(e,D+10,15)+4,Pe=Ve+Cu(e,D+5,31)+1;D+=14;for(var xe=new bl(Pe),nt=new bl(19),pe=0;pe<Me;++pe)nt[M_[pe]]=Cu(e,D+pe*3,7);D+=Me*3;for(var _e=a1(nt),Ue=(1<<_e)-1,Fe=nh(nt,_e,1),pe=0;pe<Pe;){var pt=Fe[Cu(e,D,Ue)];D+=pt&15;var ce=pt>>4;if(ce<16)xe[pe++]=ce;else{var ht=0,Je=0;for(ce==16?(Je=3+Cu(e,D,3),D+=2,ht=xe[pe-1]):ce==17?(Je=3+Cu(e,D,7),D+=3):ce==18&&(Je=11+Cu(e,D,127),D+=7);Je--;)xe[pe++]=ht}}var ze=xe.subarray(0,Ve),je=xe.subarray(Ve);z=a1(ze),H=a1(je),P=nh(ze,z,1),W=nh(je,H,1)}else CA(1);else{var ce=Ww(D)+4,he=e[ce-4]|e[ce-3]<<8,Ie=ce+he;if(Ie>h){x&&CA(0);break}o&&E(O+he),i.set(e.subarray(ce,Ie),O),n.b=O+=he,n.p=D=Ie*8,n.f=I;continue}if(D>Z){x&&CA(0);break}}o&&E(O+131072);for(var xt=(1<<z)-1,Re=(1<<H)-1,oe=D;;oe=D){var ht=P[l1(e,D)&xt],Se=ht>>4;if(D+=ht&15,D>Z){x&&CA(0);break}if(ht||CA(2),Se<256)i[O++]=Se;else if(Se==256){oe=D,P=null;break}else{var Ne=Se-254;if(Se>264){var pe=Se-257,Ye=Ry[pe];Ne=Cu(e,D,(1<<Ye)-1)+wF[pe],D+=Ye}var lt=W[l1(e,D)&Re],rt=lt>>4;lt||CA(3),D+=lt&15;var je=s6[rt];if(rt>3){var Ye=Ny[rt];je+=l1(e,D)&(1<<Ye)-1,D+=Ye}if(D>Z){x&&CA(0);break}o&&E(O+131072);var vt=O+Ne;if(O<je){var St=d-je,Lt=Math.min(je,vt);for(St+O<0&&CA(3);O<Lt;++O)i[O]=l[St+O]}for(;O<vt;++O)i[O]=i[O-je]}}n.l=P,n.p=oe,n.b=O,n.f=I,P&&(I=1,n.m=z,n.d=W,n.n=H)}while(!I);return O!=i.length&&m?bF(i,0,O):i.subarray(0,O)},Mh=function(e,n,i){i<<=n&7;var l=n/8|0;e[l]|=i,e[l+1]|=i>>8},am=function(e,n,i){i<<=n&7;var l=n/8|0;e[l]|=i,e[l+1]|=i>>8,e[l+2]|=i>>16},c1=function(e,n){for(var i=[],l=0;l<e.length;++l)e[l]&&i.push({s:l,f:e[l]});var h=i.length,d=i.slice();if(!h)return{t:CF,l:0};if(h==1){var m=new bl(i[0].s+1);return m[i[0].s]=1,{t:m,l:1}}i.sort(function(Ie,Ve){return Ie.f-Ve.f}),i.push({s:-1,f:25001});var o=i[0],x=i[1],E=0,I=1,D=2;for(i[0]={s:-1,f:o.f+x.f,l:o,r:x};I!=h-1;)o=i[i[E].f<i[D].f?E++:D++],x=i[E!=I&&i[E].f<i[D].f?E++:D++],i[I++]={s:-1,f:o.f+x.f,l:o,r:x};for(var O=d[0].s,l=1;l<h;++l)d[l].s>O&&(O=d[l].s);var P=new SA(O+1),W=D_(i[I-1],P,0);if(W>n){var l=0,z=0,H=W-n,Z=1<<H;for(d.sort(function(Ve,Me){return P[Me.s]-P[Ve.s]||Ve.f-Me.f});l<h;++l){var ie=d[l].s;if(P[ie]>n)z+=Z-(1<<W-P[ie]),P[ie]=n;else break}for(z>>=H;z>0;){var ce=d[l].s;P[ce]<n?z-=1<<n-P[ce]++-1:++l}for(;l>=0&&z;--l){var he=d[l].s;P[he]==n&&(--P[he],++z)}W=n}return{t:new bl(P),l:W}},D_=function(e,n,i){return e.s==-1?Math.max(D_(e.l,n,i+1),D_(e.r,n,i+1)):n[e.s]=i},H2=function(e){for(var n=e.length;n&&!e[--n];);for(var i=new SA(++n),l=0,h=e[0],d=1,m=function(x){i[l++]=x},o=1;o<=n;++o)if(e[o]==h&&o!=n)++d;else{if(!h&&d>2){for(;d>138;d-=138)m(32754);d>2&&(m(d>10?d-11<<5|28690:d-3<<5|12305),d=0)}else if(d>3){for(m(h),--d;d>6;d-=6)m(8304);d>2&&(m(d-3<<5|8208),d=0)}for(;d--;)m(h);d=1,h=e[o]}return{c:i.subarray(0,l),n}},lm=function(e,n){for(var i=0,l=0;l<n.length;++l)i+=e[l]*n[l];return i},BF=function(e,n,i){var l=i.length,h=Ww(n+2);e[h]=l&255,e[h+1]=l>>8,e[h+2]=e[h]^255,e[h+3]=e[h+1]^255;for(var d=0;d<l;++d)e[h+d+4]=i[d];return(h+4+l)*8},j2=function(e,n,i,l,h,d,m,o,x,E,I){Mh(n,I++,i),++h[256];for(var D=c1(h,15),O=D.t,P=D.l,W=c1(d,15),z=W.t,H=W.l,Z=H2(O),ie=Z.c,ce=Z.n,he=H2(z),Ie=he.c,Ve=he.n,Me=new SA(19),Pe=0;Pe<ie.length;++Pe)++Me[ie[Pe]&31];for(var Pe=0;Pe<Ie.length;++Pe)++Me[Ie[Pe]&31];for(var xe=c1(Me,7),nt=xe.t,pe=xe.l,_e=19;_e>4&&!nt[M_[_e-1]];--_e);var Ue=E+5<<3,Fe=lm(h,xd)+lm(d,Qm)+m,pt=lm(h,O)+lm(d,z)+m+14+3*_e+lm(Me,nt)+2*Me[16]+3*Me[17]+7*Me[18];if(x>=0&&Ue<=Fe&&Ue<=pt)return BF(n,I,e.subarray(x,x+E));var ht,Je,ze,je;if(Mh(n,I,1+(pt<Fe)),I+=2,pt<Fe){ht=nh(O,P,0),Je=O,ze=nh(z,H,0),je=z;var xt=nh(nt,pe,0);Mh(n,I,ce-257),Mh(n,I+5,Ve-1),Mh(n,I+10,_e-4),I+=14;for(var Pe=0;Pe<_e;++Pe)Mh(n,I+3*Pe,nt[M_[Pe]]);I+=3*_e;for(var Re=[ie,Ie],oe=0;oe<2;++oe)for(var Se=Re[oe],Pe=0;Pe<Se.length;++Pe){var Ne=Se[Pe]&31;Mh(n,I,xt[Ne]),I+=nt[Ne],Ne>15&&(Mh(n,I,Se[Pe]>>5&127),I+=Se[Pe]>>12)}}else ht=o6,Je=xd,ze=l6,je=Qm;for(var Pe=0;Pe<o;++Pe){var Ye=l[Pe];if(Ye>255){var Ne=Ye>>18&31;am(n,I,ht[Ne+257]),I+=Je[Ne+257],Ne>7&&(Mh(n,I,Ye>>23&31),I+=Ry[Ne]);var lt=Ye&31;am(n,I,ze[lt]),I+=je[lt],lt>3&&(am(n,I,Ye>>5&8191),I+=Ny[lt])}else am(n,I,ht[Ye]),I+=Je[Ye]}return am(n,I,ht[256]),I+Je[256]},u6=new $w([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),CF=new bl(0),h6=function(e,n,i,l,h,d){var m=d.z||e.length,o=new bl(l+m+5*(1+Math.ceil(m/7e3))+h),x=o.subarray(l,o.length-h),E=d.l,I=(d.r||0)&7;if(n){I&&(x[0]=d.r>>3);for(var D=u6[n-1],O=D>>13,P=D&8191,W=(1<<i)-1,z=d.p||new SA(32768),H=d.h||new SA(W+1),Z=Math.ceil(i/3),ie=2*Z,ce=function(Cr){return(e[Cr]^e[Cr+1]<<Z^e[Cr+2]<<ie)&W},he=new $w(25e3),Ie=new SA(288),Ve=new SA(32),Me=0,Pe=0,xe=d.i||0,nt=0,pe=d.w||0,_e=0;xe+2<m;++xe){var Ue=ce(xe),Fe=xe&32767,pt=H[Ue];if(z[Fe]=pt,H[Ue]=Fe,pe<=xe){var ht=m-xe;if((Me>7e3||nt>24576)&&(ht>423||!E)){I=j2(e,x,0,he,Ie,Ve,Pe,nt,_e,xe-_e,I),nt=Me=Pe=0,_e=xe;for(var Je=0;Je<286;++Je)Ie[Je]=0;for(var Je=0;Je<30;++Je)Ve[Je]=0}var ze=2,je=0,xt=P,Re=Fe-pt&32767;if(ht>2&&Ue==ce(xe-Re))for(var oe=Math.min(O,ht)-1,Se=Math.min(32767,xe),Ne=Math.min(258,ht);Re<=Se&&--xt&&Fe!=pt;){if(e[xe+ze]==e[xe+ze-Re]){for(var Ye=0;Ye<Ne&&e[xe+Ye]==e[xe+Ye-Re];++Ye);if(Ye>ze){if(ze=Ye,je=Re,Ye>oe)break;for(var lt=Math.min(Re,Ye-2),rt=0,Je=0;Je<lt;++Je){var vt=xe-Re+Je&32767,St=z[vt],Lt=vt-St&32767;Lt>rt&&(rt=Lt,pt=vt)}}}Fe=pt,pt=z[Fe],Re+=Fe-pt&32767}if(je){he[nt++]=268435456|k_[ze]<<18|z2[je];var Wt=k_[ze]&31,ar=z2[je]&31;Pe+=Ry[Wt]+Ny[ar],++Ie[257+Wt],++Ve[ar],pe=xe+ze,++Me}else he[nt++]=e[xe],++Ie[e[xe]]}}for(xe=Math.max(xe,pe);xe<m;++xe)he[nt++]=e[xe],++Ie[e[xe]];I=j2(e,x,E,he,Ie,Ve,Pe,nt,_e,xe-_e,I),E||(d.r=I&7|x[I/8|0]<<3,I-=7,d.h=H,d.p=z,d.i=xe,d.w=pe)}else{for(var xe=d.w||0;xe<m+E;xe+=65535){var hr=xe+65535;hr>=m&&(x[I/8|0]=E,hr=m),I=BF(x,I+1,e.subarray(xe,hr))}d.i=m}return bF(o,0,l+Ww(I)+h)},EF=function(){var e=1,n=0;return{p:function(i){for(var l=e,h=n,d=i.length|0,m=0;m!=d;){for(var o=Math.min(m+2655,d);m<o;++m)h+=l+=i[m];l=(l&65535)+15*(l>>16),h=(h&65535)+15*(h>>16)}e=l,n=h},d:function(){return e%=65521,n%=65521,(e&255)<<24|(e&65280)<<8|(n&255)<<8|n>>8}}},d6=function(e,n,i,l,h){if(!h&&(h={l:1},n.dictionary)){var d=n.dictionary.subarray(-32768),m=new bl(d.length+e.length);m.set(d),m.set(e,d.length),e=m,h.w=d.length}return h6(e,n.level==null?6:n.level,n.mem==null?h.l?Math.ceil(Math.max(8,Math.min(13,Math.log(e.length)))*1.5):20:12+n.mem,i,l,h)},SF=function(e,n,i){for(;i;++n)e[n]=i,i>>>=8},f6=function(e){(e[0]!=31||e[1]!=139||e[2]!=8)&&CA(6,"invalid gzip data");var n=e[3],i=10;n&4&&(i+=(e[10]|e[11]<<8)+2);for(var l=(n>>3&1)+(n>>4&1);l>0;l-=!e[i++]);return i+(n&2)},p6=function(e){var n=e.length;return(e[n-4]|e[n-3]<<8|e[n-2]<<16|e[n-1]<<24)>>>0},m6=function(e,n){var i=n.level,l=i==0?0:i<6?1:i==9?3:2;if(e[0]=120,e[1]=l<<6|(n.dictionary&&32),e[1]|=31-(e[0]<<8|e[1])%31,n.dictionary){var h=EF();h.p(n.dictionary),SF(e,2,h.d())}},g6=function(e,n){return((e[0]&15)!=8||e[0]>>4>7||(e[0]<<8|e[1])%31)&&CA(6,"invalid zlib data"),(e[1]>>5&1)==1&&CA(6,"invalid zlib data: "+(e[1]&32?"need":"unexpected")+" dictionary"),(e[1]>>3&4)+2};function y6(e,n){return Zw(e,{i:2},n,n)}function v6(e,n){var i=f6(e);return i+8>e.length&&CA(6,"invalid gzip data"),Zw(e.subarray(i,-8),{i:2},new bl(p6(e)),n)}function R_(e,n){n||(n={});var i=EF();i.p(e);var l=d6(e,n,n.dictionary?6:2,4);return m6(l,n),SF(l,l.length-4,i.d()),l}function _6(e,n){return Zw(e.subarray(g6(e),-4),{i:2},n,n)}function w6(e,n){return e[0]==31&&e[1]==139&&e[2]==8?v6(e,n):(e[0]&15)!=8||e[0]>>4>7||(e[0]<<8|e[1])%31?y6(e,n):_6(e,n)}var x6=typeof TextDecoder<"u"&&new TextDecoder,b6=0;try{x6.decode(CF,{stream:!0}),b6=1}catch{}var B6=Object.defineProperty,Em=Math.pow,hs=(e,n)=>B6(e,"name",{value:n,configurable:!0}),nl=(e,n,i)=>new Promise((l,h)=>{var d=x=>{try{o(i.next(x))}catch(E){h(E)}},m=x=>{try{o(i.throw(x))}catch(E){h(E)}},o=x=>x.done?l(x.value):Promise.resolve(x.value).then(d,m);o((i=i.apply(e,n)).next())});hs((e,n)=>{let i=!1,l="",h=L.GridLayer.extend({createTile:hs((d,m)=>{let o=document.createElement("img"),x=new AbortController,E=x.signal;return o.cancel=()=>{x.abort()},i||(e.getHeader().then(I=>{I.tileType===1?console.error("Error: archive contains MVT vector tiles, but leafletRasterLayer is for displaying raster tiles. See https://github.com/protomaps/PMTiles/tree/main/js for details."):I.tileType===2?l="image/png":I.tileType===3?l="image/jpeg":I.tileType===4?l="image/webp":I.tileType===5&&(l="image/avif")}),i=!0),e.getZxy(d.z,d.x,d.y,E).then(I=>{if(I){let D=new Blob([I.data],{type:l}),O=window.URL.createObjectURL(D);o.src=O,o.cancel=void 0,m(void 0,o)}}).catch(I=>{if(I.name!=="AbortError")throw I}),o},"createTile"),_removeTile:hs(function(d){let m=this._tiles[d];m&&(m.el.cancel&&m.el.cancel(),m.el.width=0,m.el.height=0,m.el.deleted=!0,L.DomUtil.remove(m.el),delete this._tiles[d],this.fire("tileunload",{tile:m.el,coords:this._keyToTileCoords(d)}))},"_removeTile")});return new h(n)},"leafletRasterLayer");var C6=hs(e=>(n,i)=>{if(i instanceof AbortController)return e(n,i);let l=new AbortController;return e(n,l).then(h=>i(void 0,h.data,h.cacheControl||"",h.expires||""),h=>i(h)).catch(h=>i(h)),{cancel:hs(()=>l.abort(),"cancel")}},"v3compat"),FF=class{constructor(n){this.tilev4=hs((i,l)=>nl(this,null,function*(){if(i.type==="json"){let P=i.url.substr(10),W=this.tiles.get(P);if(W||(W=new V2(P),this.tiles.set(P,W)),this.metadata)return{data:yield W.getTileJson(i.url)};let z=yield W.getHeader();return(z.minLon>=z.maxLon||z.minLat>=z.maxLat)&&console.error(`Bounds of PMTiles archive ${z.minLon},${z.minLat},${z.maxLon},${z.maxLat} are not valid.`),{data:{tiles:[`${i.url}/{z}/{x}/{y}`],minzoom:z.minZoom,maxzoom:z.maxZoom,bounds:[z.minLon,z.minLat,z.maxLon,z.maxLat]}}}let h=new RegExp(/pmtiles:\/\/(.+)\/(\d+)\/(\d+)\/(\d+)/),d=i.url.match(h);if(!d)throw new Error("Invalid PMTiles protocol URL");let m=d[1],o=this.tiles.get(m);o||(o=new V2(m),this.tiles.set(m,o));let x=d[2],E=d[3],I=d[4],D=yield o.getHeader(),O=yield o?.getZxy(+x,+E,+I,l.signal);if(O)return{data:new Uint8Array(O.data),cacheControl:O.cacheControl,expires:O.expires};if(D.tileType===1){if(this.errorOnMissingTile)throw new Error("Tile not found.");return{data:new Uint8Array}}return{data:null}}),"tilev4"),this.tile=C6(this.tilev4),this.tiles=new Map,this.metadata=n?.metadata||!1,this.errorOnMissingTile=n?.errorOnMissingTile||!1}add(n){this.tiles.set(n.source.getKey(),n)}get(n){return this.tiles.get(n)}};hs(FF,"Protocol");var E6=FF;function IF(e,n){return(n>>>0)*4294967296+(e>>>0)}hs(IF,"toNum");function TF(e,n){let i=n.buf,l=i[n.pos++],h=(l&112)>>4;if(l<128||(l=i[n.pos++],h|=(l&127)<<3,l<128)||(l=i[n.pos++],h|=(l&127)<<10,l<128)||(l=i[n.pos++],h|=(l&127)<<17,l<128)||(l=i[n.pos++],h|=(l&127)<<24,l<128)||(l=i[n.pos++],h|=(l&1)<<31,l<128))return IF(e,h);throw new Error("Expected varint not more than 10 bytes")}hs(TF,"readVarintRemainder");function Jf(e){let n=e.buf,i=n[e.pos++],l=i&127;return i<128||(i=n[e.pos++],l|=(i&127)<<7,i<128)||(i=n[e.pos++],l|=(i&127)<<14,i<128)||(i=n[e.pos++],l|=(i&127)<<21,i<128)?l:(i=n[e.pos],l|=(i&15)<<28,TF(l,e))}hs(Jf,"readVarint");function Xw(e,n,i,l){if(l===0){i===1&&(n[0]=e-1-n[0],n[1]=e-1-n[1]);let h=n[0];n[0]=n[1],n[1]=h}}hs(Xw,"rotate");function PF(e,n){let i=Em(2,e),l=n,h=n,d=n,m=[0,0],o=1;for(;o<i;)l=1&d/2,h=1&(d^l),Xw(o,m,l,h),m[0]+=o*l,m[1]+=o*h,d=d/4,o*=2;return[e,m[0],m[1]]}hs(PF,"idOnLevel");var S6=[0,1,5,21,85,341,1365,5461,21845,87381,349525,1398101,5592405,22369621,89478485,357913941,1431655765,5726623061,22906492245,91625968981,366503875925,1466015503701,5864062014805,23456248059221,93824992236885,375299968947541,0x5555555555555];function LF(e,n,i){if(e>26)throw new Error("Tile zoom level exceeds max safe number limit (26)");if(n>Em(2,e)-1||i>Em(2,e)-1)throw new Error("tile x/y outside zoom level bounds");let l=S6[e],h=Em(2,e),d=0,m=0,o=0,x=[n,i],E=h/2;for(;E>0;)d=(x[0]&E)>0?1:0,m=(x[1]&E)>0?1:0,o+=E*E*(3*d^m),Xw(E,x,d,m),E=E/2;return l+o}hs(LF,"zxyToTileId");function F6(e){let n=0;for(let i=0;i<27;i++){let l=(1<<i)*(1<<i);if(n+l>e)return PF(i,e-n);n+=l}throw new Error("Tile zoom level exceeds max safe number limit (26)")}hs(F6,"tileIdToZxy");var I6=(e=>(e[e.Unknown=0]="Unknown",e[e.None=1]="None",e[e.Gzip=2]="Gzip",e[e.Brotli=3]="Brotli",e[e.Zstd=4]="Zstd",e))(I6||{});function Qy(e,n){return nl(this,null,function*(){if(n===1||n===0)return e;if(n===2){if(typeof globalThis.DecompressionStream>"u")return w6(new Uint8Array(e));let i=new Response(e).body;if(!i)throw new Error("Failed to read response stream");let l=i.pipeThrough(new globalThis.DecompressionStream("gzip"));return new Response(l).arrayBuffer()}throw new Error("Compression method not supported")})}hs(Qy,"defaultDecompress");var T6=(e=>(e[e.Unknown=0]="Unknown",e[e.Mvt=1]="Mvt",e[e.Png=2]="Png",e[e.Jpeg=3]="Jpeg",e[e.Webp=4]="Webp",e[e.Avif=5]="Avif",e))(T6||{});function MF(e){return e===1?".mvt":e===2?".png":e===3?".jpg":e===4?".webp":e===5?".avif":""}hs(MF,"tileTypeExt");var P6=127;function kF(e,n){let i=0,l=e.length-1;for(;i<=l;){let h=l+i>>1,d=n-e[h].tileId;if(d>0)i=h+1;else if(d<0)l=h-1;else return e[h]}return l>=0&&(e[l].runLength===0||n-e[l].tileId<e[l].runLength)?e[l]:null}hs(kF,"findTile");var L6=class{constructor(n){this.file=n}getKey(){return this.file.name}getBytes(n,i){return nl(this,null,function*(){return{data:yield this.file.slice(n,n+i).arrayBuffer()}})}};hs(L6,"FileSource");var UF=class{constructor(n,i=new Headers){this.url=n,this.customHeaders=i,this.mustReload=!1;let l="";"navigator"in globalThis&&(l=globalThis.navigator.userAgent||"");let h=l.indexOf("Windows")>-1,d=/Chrome|Chromium|Edg|OPR|Brave/.test(l);this.chromeWindowsNoCache=!1,h&&d&&(this.chromeWindowsNoCache=!0)}getKey(){return this.url}setHeaders(n){this.customHeaders=n}getBytes(n,i,l,h){return nl(this,null,function*(){let d,m;l?m=l:(d=new AbortController,m=d.signal);let o=new Headers(this.customHeaders);o.set("range",`bytes=${n}-${n+i-1}`);let x;this.mustReload?x="reload":this.chromeWindowsNoCache&&(x="no-store");let E=yield fetch(this.url,{signal:m,cache:x,headers:o});if(n===0&&E.status===416){let O=E.headers.get("Content-Range");if(!O||!O.startsWith("bytes */"))throw new Error("Missing content-length on 416 response");let P=+O.substr(8);E=yield fetch(this.url,{signal:m,cache:"reload",headers:{range:`bytes=0-${P-1}`}})}let I=E.headers.get("Etag");if(I!=null&&I.startsWith("W/")&&(I=null),E.status===416||h&&I&&I!==h)throw this.mustReload=!0,new N_(`Server returned non-matching ETag ${h} after one retry. Check browser extensions and servers for issues that may affect correct ETag headers.`);if(E.status>=300)throw new Error(`Bad response code: ${E.status}`);let D=E.headers.get("Content-Length");if(E.status===200&&(!D||+D>i))throw d&&d.abort(),new Error("Server returned no content-length header or content-length exceeding request. Check that your storage backend supports HTTP Byte Serving.");return{data:yield E.arrayBuffer(),etag:I||void 0,cacheControl:E.headers.get("Cache-Control")||void 0,expires:E.headers.get("Expires")||void 0}})}};hs(UF,"FetchSource");var M6=UF;function JA(e,n){let i=e.getUint32(n+4,!0),l=e.getUint32(n+0,!0);return i*Em(2,32)+l}hs(JA,"getUint64");function DF(e,n){let i=new DataView(e),l=i.getUint8(7);if(l>3)throw new Error(`Archive is spec version ${l} but this library supports up to spec version 3`);return{specVersion:l,rootDirectoryOffset:JA(i,8),rootDirectoryLength:JA(i,16),jsonMetadataOffset:JA(i,24),jsonMetadataLength:JA(i,32),leafDirectoryOffset:JA(i,40),leafDirectoryLength:JA(i,48),tileDataOffset:JA(i,56),tileDataLength:JA(i,64),numAddressedTiles:JA(i,72),numTileEntries:JA(i,80),numTileContents:JA(i,88),clustered:i.getUint8(96)===1,internalCompression:i.getUint8(97),tileCompression:i.getUint8(98),tileType:i.getUint8(99),minZoom:i.getUint8(100),maxZoom:i.getUint8(101),minLon:i.getInt32(102,!0)/1e7,minLat:i.getInt32(106,!0)/1e7,maxLon:i.getInt32(110,!0)/1e7,maxLat:i.getInt32(114,!0)/1e7,centerZoom:i.getUint8(118),centerLon:i.getInt32(119,!0)/1e7,centerLat:i.getInt32(123,!0)/1e7,etag:n}}hs(DF,"bytesToHeader");function Yw(e){let n={buf:new Uint8Array(e),pos:0},i=Jf(n),l=[],h=0;for(let d=0;d<i;d++){let m=Jf(n);l.push({tileId:h+m,offset:0,length:0,runLength:1}),h+=m}for(let d=0;d<i;d++)l[d].runLength=Jf(n);for(let d=0;d<i;d++)l[d].length=Jf(n);for(let d=0;d<i;d++){let m=Jf(n);m===0&&d>0?l[d].offset=l[d-1].offset+l[d-1].length:l[d].offset=m-1}return l}hs(Yw,"deserializeIndex");var RF=class extends Error{};hs(RF,"EtagMismatch");var N_=RF;function Jw(e,n){return nl(this,null,function*(){let i=yield e.getBytes(0,16384);if(new DataView(i.data).getUint16(0,!0)!==19792)throw new Error("Wrong magic number for PMTiles archive");let l=i.data.slice(0,P6),h=DF(l,i.etag),d=i.data.slice(h.rootDirectoryOffset,h.rootDirectoryOffset+h.rootDirectoryLength),m=`${e.getKey()}|${h.etag||""}|${h.rootDirectoryOffset}|${h.rootDirectoryLength}`,o=Yw(yield n(d,h.internalCompression));return[h,[m,o.length,o]]})}hs(Jw,"getHeaderAndRoot");function ex(e,n,i,l,h){return nl(this,null,function*(){let d=yield e.getBytes(i,l,void 0,h.etag),m=yield n(d.data,h.internalCompression),o=Yw(m);if(o.length===0)throw new Error("Empty directory is invalid");return o})}hs(ex,"getDirectory");var k6=class{constructor(n=100,i=!0,l=Qy){this.cache=new Map,this.maxCacheEntries=n,this.counter=1,this.decompress=l}getHeader(n){return nl(this,null,function*(){let i=n.getKey(),l=this.cache.get(i);if(l)return l.lastUsed=this.counter++,l.data;let h=yield Jw(n,this.decompress);return h[1]&&this.cache.set(h[1][0],{lastUsed:this.counter++,data:h[1][2]}),this.cache.set(i,{lastUsed:this.counter++,data:h[0]}),this.prune(),h[0]})}getDirectory(n,i,l,h){return nl(this,null,function*(){let d=`${n.getKey()}|${h.etag||""}|${i}|${l}`,m=this.cache.get(d);if(m)return m.lastUsed=this.counter++,m.data;let o=yield ex(n,this.decompress,i,l,h);return this.cache.set(d,{lastUsed:this.counter++,data:o}),this.prune(),o})}prune(){if(this.cache.size>this.maxCacheEntries){let n=1/0,i;this.cache.forEach((l,h)=>{l.lastUsed<n&&(n=l.lastUsed,i=h)}),i&&this.cache.delete(i)}}invalidate(n){return nl(this,null,function*(){this.cache.delete(n.getKey())})}};hs(k6,"ResolvedValueCache");var NF=class{constructor(n=100,i=!0,l=Qy){this.cache=new Map,this.invalidations=new Map,this.maxCacheEntries=n,this.counter=1,this.decompress=l}getHeader(n){return nl(this,null,function*(){let i=n.getKey(),l=this.cache.get(i);if(l)return l.lastUsed=this.counter++,yield l.data;let h=new Promise((d,m)=>{Jw(n,this.decompress).then(o=>{o[1]&&this.cache.set(o[1][0],{lastUsed:this.counter++,data:Promise.resolve(o[1][2])}),d(o[0]),this.prune()}).catch(o=>{m(o)})});return this.cache.set(i,{lastUsed:this.counter++,data:h}),h})}getDirectory(n,i,l,h){return nl(this,null,function*(){let d=`${n.getKey()}|${h.etag||""}|${i}|${l}`,m=this.cache.get(d);if(m)return m.lastUsed=this.counter++,yield m.data;let o=new Promise((x,E)=>{ex(n,this.decompress,i,l,h).then(I=>{x(I),this.prune()}).catch(I=>{E(I)})});return this.cache.set(d,{lastUsed:this.counter++,data:o}),o})}prune(){if(this.cache.size>=this.maxCacheEntries){let n=1/0,i;this.cache.forEach((l,h)=>{l.lastUsed<n&&(n=l.lastUsed,i=h)}),i&&this.cache.delete(i)}}invalidate(n){return nl(this,null,function*(){let i=n.getKey();if(this.invalidations.get(i))return yield this.invalidations.get(i);this.cache.delete(n.getKey());let l=new Promise((h,d)=>{this.getHeader(n).then(m=>{h(),this.invalidations.delete(i)}).catch(m=>{d(m)})});this.invalidations.set(i,l)})}};hs(NF,"SharedPromiseCache");var U6=NF,QF=class{constructor(n,i,l){typeof n=="string"?this.source=new M6(n):this.source=n,l?this.decompress=l:this.decompress=Qy,i?this.cache=i:this.cache=new U6}getHeader(){return nl(this,null,function*(){return yield this.cache.getHeader(this.source)})}getZxyAttempt(n,i,l,h){return nl(this,null,function*(){let d=LF(n,i,l),m=yield this.cache.getHeader(this.source);if(n<m.minZoom||n>m.maxZoom)return;let o=m.rootDirectoryOffset,x=m.rootDirectoryLength;for(let E=0;E<=3;E++){let I=yield this.cache.getDirectory(this.source,o,x,m),D=kF(I,d);if(D){if(D.runLength>0){let O=yield this.source.getBytes(m.tileDataOffset+D.offset,D.length,h,m.etag);return{data:yield this.decompress(O.data,m.tileCompression),cacheControl:O.cacheControl,expires:O.expires}}o=m.leafDirectoryOffset+D.offset,x=D.length}else return}throw new Error("Maximum directory depth exceeded")})}getZxy(n,i,l,h){return nl(this,null,function*(){try{return yield this.getZxyAttempt(n,i,l,h)}catch(d){if(d instanceof N_)return this.cache.invalidate(this.source),yield this.getZxyAttempt(n,i,l,h);throw d}})}getMetadataAttempt(){return nl(this,null,function*(){let n=yield this.cache.getHeader(this.source),i=yield this.source.getBytes(n.jsonMetadataOffset,n.jsonMetadataLength,void 0,n.etag),l=yield this.decompress(i.data,n.internalCompression),h=new TextDecoder("utf-8");return JSON.parse(h.decode(l))})}getMetadata(){return nl(this,null,function*(){try{return yield this.getMetadataAttempt()}catch(n){if(n instanceof N_)return this.cache.invalidate(this.source),yield this.getMetadataAttempt();throw n}})}getTileJson(n){return nl(this,null,function*(){let i=yield this.getHeader(),l=yield this.getMetadata(),h=MF(i.tileType);return{tilejson:"3.0.0",scheme:"xyz",tiles:[`${n}/{z}/{x}/{y}${h}`],vector_layers:l.vector_layers,attribution:l.attribution,description:l.description,name:l.name,version:l.version,bounds:[i.minLon,i.minLat,i.maxLon,i.maxLat],center:[i.centerLon,i.centerLat,i.centerZoom],minzoom:i.minZoom,maxzoom:i.maxZoom}})}};hs(QF,"PMTiles");var V2=QF;let G2=!1;function OF(){if(G2)return;const e=new E6;sp.addProtocol("pmtiles",e.tile),G2=!0,console.log("[PMTiles] Protocol registered")}const D6="/Domapus/",A1=["#FFF9B0","#FFEB84","#FFD166","#FF9A56","#E84C61","#C13584","#7B2E8D","#2E0B59"];function K2(e,n){if(!e)return 0;const i=e[n];return typeof i=="number"&&isFinite(i)?i:0}function R6(e,n=8){const i=[...e].filter(x=>x>0).sort((x,E)=>x-E);if(i.length===0)return[];const l=i[0],h=i[i.length-1];if(l===h)return[l];const d=[],m=(h-l)*1e-6||1e-6,o=x=>i[Math.floor(x*(i.length-1))];for(let x=1;x<n;x++){let E=o(x/n);d.length&&E<=d[d.length-1]&&(E=d[d.length-1]+m),d.push(E)}return d}function zF({filteredData:e,selectedMetric:n,regionScope:i,onRenderComplete:l}){const h=re.useRef(null),d=re.useRef(null),m=re.useRef(null),o=re.useRef({}),x=re.useMemo(()=>{const W={};return e.forEach(z=>{W[z.zipCode]=z}),W},[e]),E=re.useMemo(()=>{const W=e.map(z=>K2(z,n));return R6(W)},[e,n]),{center:I,zoom:D}=re.useMemo(()=>{if(i==="national")return{center:[-98.5,39.8],zoom:3.5};const W=e.filter(xe=>xe.latitude&&xe.longitude);if(W.length===0)return{center:[-98.5,39.8],zoom:3.5};const z=W.map(xe=>xe.longitude),H=W.map(xe=>xe.latitude),Z=Math.min(...z),ie=Math.max(...z),ce=Math.min(...H),he=Math.max(...H),Ie=(Z+ie)/2,Ve=(ce+he)/2,Me=Math.max(ie-Z,he-ce);let Pe=4;return Me<2?Pe=8:Me<5?Pe=6:Me<10&&(Pe=5),{center:[Ie,Ve],zoom:Pe}},[e,i]),{alaskaZips:O,hawaiiZips:P}=re.useMemo(()=>{if(i!=="national")return{alaskaZips:new Set,hawaiiZips:new Set};const W=new Set,z=new Set;return e.forEach(H=>{H.state==="Alaska"?W.add(H.zipCode):H.state==="Hawaii"&&z.add(H.zipCode)}),{alaskaZips:W,hawaiiZips:z}},[e,i]);return re.useEffect(()=>{OF(),Object.keys(o.current).forEach(ce=>{o.current[ce]&&(o.current[ce].remove(),o.current[ce]=null)});const W=new URL(`${D6}data/us_zip_codes.pmtiles`,window.location.origin).href,z=[{key:"main",ref:h,center:I,zoom:D},...i==="national"&&O.size>0?[{key:"alaska",ref:d,center:[-152,64],zoom:2.5,filterSet:O}]:[],...i==="national"&&P.size>0?[{key:"hawaii",ref:m,center:[-157,21],zoom:5,filterSet:P}]:[]];let H=0;const Z=z.filter(ce=>ce.ref.current).length,ie=()=>{H++,H===Z&&l&&l()};return z.forEach(({key:ce,ref:he,center:Ie,zoom:Ve})=>{if(!he.current)return;const Me=new sp.Map({container:he.current,style:{version:8,sources:{},layers:[{id:"background",type:"background",paint:{"background-color":"#f8f9fa"}}]},center:Ie,zoom:Ve,interactive:!1,attributionControl:!1,canvasContextAttributes:{preserveDrawingBuffer:!0}});o.current[ce]=Me,Me.on("load",()=>{Me.addSource("zips",{type:"vector",url:`pmtiles://${W}`,promoteId:"ZCTA5CE20"});const Pe=["step",["coalesce",["feature-state","metricValue"],0],"transparent",.001,A1[0],...E.flatMap((xe,nt)=>[xe,A1[Math.min(nt+1,A1.length-1)]])];Me.addLayer({id:"zips-fill",type:"fill",source:"zips","source-layer":"us_zip_codes",paint:{"fill-color":Pe,"fill-opacity":.8,"fill-outline-color":"rgba(0,0,0,0.1)"}}),Me.once("idle",()=>{Object.entries(x).forEach(([xe,nt])=>{const pe=K2(nt,n);Me.setFeatureState({source:"zips",sourceLayer:"us_zip_codes",id:xe},{metricValue:pe})}),Me.triggerRepaint(),setTimeout(ie,100)})})}),()=>{Object.keys(o.current).forEach(ce=>{o.current[ce]&&(o.current[ce].remove(),o.current[ce]=null)})}},[I,D,i,O,P,E,x,n,l]),ae.jsxs("div",{className:"relative w-full h-full bg-gray-50",children:[ae.jsx("div",{ref:h,className:"w-full h-full"}),i==="national"&&ae.jsxs("div",{className:"absolute bottom-6 left-6 flex gap-3",children:[O.size>0&&ae.jsx("div",{className:"w-44 h-36 border-2 border-gray-400 rounded shadow-lg bg-white overflow-hidden",children:ae.jsx("div",{ref:d,className:"w-full h-full"})}),P.size>0&&ae.jsx("div",{className:"w-36 h-28 border-2 border-gray-400 rounded shadow-lg bg-white overflow-hidden",children:ae.jsx("div",{ref:m,className:"w-full h-full"})})]})]})}function u1(e,n){const i=n.toLowerCase();return i.includes("price")?`$${(e/1e3).toFixed(0)}k`:i.includes("ratio")||i.includes("above")?`${(e*100).toFixed(0)}%`:i.includes("dom")?`${Math.round(e)}`:e.toLocaleString()}function N6(e,n){if(!e||e.length===0)return n.map(()=>0);const i=[...e].sort((l,h)=>l-h);return n.map(l=>{const h=(i.length-1)*l,d=Math.floor(h),m=Math.ceil(h),o=h-d;return i[d]*(1-o)+i[m]*o})}function tx({selectedMetric:e,metricValues:n,isExport:i=!1}){const l=re.useMemo(()=>{if(!n||n.length===0)return{min:"N/A",mid:"N/A",max:"N/A"};const[d,m,o]=N6(n,[.05,.5,.95]);return{min:u1(d,e),mid:u1(m,e),max:u1(o,e)}},[n,e]),h=d=>{const m=d.replace(/-/g,"_");return{median_sale_price:"Median Sale Price",median_ppsf:"Median Price per Sq Ft",sale_to_list_ratio:"Sale-to-List Ratio",avg_sale_to_list_ratio:"Sale-to-List Ratio",median_dom:"Median Days on Market"}[m]||m.split("_").map(x=>x.charAt(0).toUpperCase()+x.slice(1)).join(" ")};return ae.jsxs("div",{className:`
      border border-gray-300 rounded-lg p-4 w-full max-w-xs
      ${i?"bg-white shadow-none":"bg-white/95 backdrop-blur-sm shadow-xl"}
    `,children:[ae.jsx("h3",{className:"text-sm font-bold mb-3 text-gray-900",children:h(e)}),ae.jsxs("div",{className:"space-y-2",children:[ae.jsx("div",{className:"h-4 rounded-md border border-gray-200",style:{background:"linear-gradient(to right, #FFF9B0, #FFEB84, #FFD166, #FF9A56, #E84C61, #C13584, #7B2E8D, #2E0B59)"}}),ae.jsxs("div",{className:"flex justify-between text-xs text-gray-700 font-bold",children:[ae.jsx("span",{children:l.min}),ae.jsx("span",{children:l.mid}),ae.jsx("span",{children:l.max})]})]}),!i&&ae.jsx("div",{className:"mt-1 pt-1 border-gray-200",children:ae.jsx("p",{className:"text-[10px] text-gray-500 text-center",children:"Click ZIP code to view more info"})})]})}function Q6({allZipData:e,selectedMetric:n,isExporting:i,onExport:l,onCancel:h}){const[d,m]=re.useState("national"),[o,x]=re.useState(""),[E,I]=re.useState(""),[D,O]=re.useState(""),[P,W]=re.useState(""),[z,H]=re.useState(!1),Z=re.useRef(null),[ie,ce]=re.useState("png"),[he,Ie]=re.useState(!0),[Ve,Me]=re.useState(!0);re.useEffect(()=>{const Je=setTimeout(()=>{W(D)},150);return()=>clearTimeout(Je)},[D]),re.useEffect(()=>{function Je(ze){Z.current&&!Z.current.contains(ze.target)&&H(!1)}return document.addEventListener("mousedown",Je),()=>document.removeEventListener("mousedown",Je)},[]);const{availableStates:Pe,filteredMetros:xe}=re.useMemo(()=>{if(Object.keys(e).length===0)return{availableStates:[],filteredMetros:[]};const Je=new Set,ze=new Set;for(const Re of Object.values(e))Re.state&&Je.add(Re.state),Re.parent_metro&&ze.add(Re.parent_metro);const je=Array.from(ze).sort(),xt=P?je.filter(Re=>Re.toLowerCase().includes(P.toLowerCase())):je;return{availableStates:Array.from(Je).sort(),filteredMetros:xt}},[e,P]),nt=re.useMemo(()=>Object.keys(e).length===0?[]:Object.values(e).filter(Je=>d==="state"&&o?Je.state===o:d==="metro"&&E?Je.parent_metro===E:!0),[e,d,o,E]),pe=()=>{l({regionScope:d,selectedState:o,selectedMetro:E,fileFormat:ie,includeLegend:he,includeTitle:Ve})},_e=()=>!!(i||d==="state"&&!o||d==="metro"&&!E),Ue=Je=>{m(Je),Je!=="metro"&&H(!1)},Fe=Je=>ce(Je),pt=Je=>{I(Je),O(Je),H(!1)},ht=()=>{I(""),O(""),W(""),H(!0)};return ae.jsxs("div",{className:"fixed inset-0 bg-background z-50 flex",children:[ae.jsxs("div",{className:"w-80 bg-background border-r h-full shadow-xl flex flex-col",children:[ae.jsxs("div",{className:"p-4 space-y-4 flex-1 overflow-y-auto",children:[ae.jsxs("div",{className:"flex items-center gap-2 pb-2 border-b",children:[ae.jsx(nP,{className:"h-4 w-4 text-primary"}),ae.jsx("h2",{className:"text-base font-semibold",children:"Export Map"})]}),ae.jsxs("div",{className:"space-y-3",children:[ae.jsxs("div",{className:"flex items-center gap-2 text-sm font-medium",children:[ae.jsx(rP,{className:"h-3.5 w-3.5"}),ae.jsx("span",{children:"Region Scope"})]}),ae.jsxs(C_,{value:d,onValueChange:Ue,className:"space-y-2",children:[ae.jsxs("div",{className:"flex items-center space-x-2",children:[ae.jsx(Yf,{value:"national",id:"r-national"}),ae.jsx(od,{htmlFor:"r-national",className:"text-sm",children:"National"})]}),ae.jsxs("div",{className:"flex items-center space-x-2",children:[ae.jsx(Yf,{value:"state",id:"r-state"}),ae.jsx(od,{htmlFor:"r-state",className:"text-sm",children:"State"})]}),ae.jsxs("div",{className:"flex items-center space-x-2",children:[ae.jsx(Yf,{value:"metro",id:"r-metro"}),ae.jsx(od,{htmlFor:"r-metro",className:"text-sm",children:"Metro Area"})]})]}),d==="state"&&ae.jsxs(aF,{value:o,onValueChange:x,children:[ae.jsx(jw,{className:"h-9",children:ae.jsx(lF,{placeholder:"Select a state"})}),ae.jsx(Vw,{children:Pe.map(Je=>ae.jsx(Gw,{value:Je,children:Je},Je))})]}),d==="metro"&&ae.jsxs("div",{className:"space-y-2 relative",ref:Z,children:[ae.jsxs("div",{className:"relative",children:[ae.jsx(xw,{className:"absolute left-2 top-2.5 h-4 w-4 text-muted-foreground"}),ae.jsx(Dy,{placeholder:"Type to search metros...",value:D,onChange:Je=>{O(Je.target.value),H(!0),E&&Je.target.value!==E&&I("")},onFocus:()=>H(!0),className:"pl-8 h-9 pr-8"}),D&&ae.jsx("button",{onClick:ht,className:"absolute right-2 top-2.5 text-muted-foreground hover:text-foreground",children:ae.jsx($m,{className:"h-4 w-4"})})]}),z&&ae.jsx("div",{className:"absolute z-10 w-full mt-1 bg-popover text-popover-foreground border rounded-md shadow-md max-h-[250px] overflow-y-auto",children:xe.length>0?ae.jsx("div",{className:"p-1",children:xe.map(Je=>ae.jsx("div",{onClick:()=>pt(Je),className:Li("relative flex w-full cursor-pointer select-none items-center rounded-sm py-1.5 px-2 text-sm outline-none hover:bg-accent hover:text-accent-foreground",E===Je&&"bg-accent text-accent-foreground font-medium"),children:Je},Je))}):ae.jsx("div",{className:"py-6 text-center text-sm text-muted-foreground",children:"No metro areas found."})})]})]}),ae.jsxs("div",{className:"space-y-3 pt-2",children:[ae.jsxs("div",{className:"flex items-center gap-2 text-sm font-medium",children:[ae.jsx(J3,{className:"h-3.5 w-3.5"}),ae.jsx("span",{children:"File Format"})]}),ae.jsxs(C_,{value:ie,onValueChange:Fe,className:"space-y-2",children:[ae.jsxs("div",{className:"flex items-center space-x-2",children:[ae.jsx(Yf,{value:"png",id:"r-png"}),ae.jsx(od,{htmlFor:"r-png",className:"text-sm",children:"PNG (Image)"})]}),ae.jsxs("div",{className:"flex items-center space-x-2",children:[ae.jsx(Yf,{value:"pdf",id:"r-pdf"}),ae.jsx(od,{htmlFor:"r-pdf",className:"text-sm",children:"PDF (Document)"})]})]})]}),ae.jsxs("div",{className:"space-y-2 pt-2",children:[ae.jsx("div",{className:"text-sm font-medium",children:"Customization"}),ae.jsxs("div",{className:"space-y-2",children:[ae.jsxs("div",{className:"flex items-center space-x-2",children:[ae.jsx(L_,{id:"c-title",checked:Ve,onCheckedChange:Je=>Me(Je===!0)}),ae.jsx(od,{htmlFor:"c-title",className:"text-sm",children:"Include Title"})]}),ae.jsxs("div",{className:"flex items-center space-x-2",children:[ae.jsx(L_,{id:"c-legend",checked:he,onCheckedChange:Je=>Ie(Je===!0)}),ae.jsx(od,{htmlFor:"c-legend",className:"text-sm",children:"Include Legend"})]})]})]})]}),ae.jsxs("div",{className:"p-4 space-y-2 border-t bg-background",children:[ae.jsxs(Cc,{onClick:pe,disabled:_e(),className:"w-full",size:"default",children:[ae.jsx(Q5,{className:"h-4 w-4 mr-2"}),"Export ",ie.toUpperCase()]}),ae.jsx(Cc,{onClick:h,variant:"outline",className:"w-full",disabled:i,children:"Cancel"})]})]}),ae.jsxs("div",{className:"flex-1 p-6 overflow-hidden flex flex-col bg-gray-50",children:[ae.jsxs("div",{className:"mb-4",children:[ae.jsx("h3",{className:"text-lg font-semibold",children:"Preview"}),ae.jsxs("p",{className:"text-sm text-muted-foreground",children:[nt.length.toLocaleString()," ZIP codes  ",d==="national"?"United States":d==="state"?o||"Select a state":E||"Select a metro area"]})]}),ae.jsxs("div",{className:"flex-1 bg-white border rounded-lg overflow-hidden shadow-sm p-8 flex flex-col",children:[Ve&&ae.jsxs("header",{className:"text-center mb-4",children:[ae.jsxs("h1",{className:"text-2xl font-bold text-gray-900 mb-1",children:[n.split("_").map(Je=>Je.charAt(0).toUpperCase()+Je.slice(1)).join(" ")," by ZIP Code"]}),ae.jsxs("p",{className:"text-sm text-gray-600",children:[d==="national"?"United States":d==="state"?o||"State":E||"Metro Area","  ",new Date().toLocaleDateString("en-US",{month:"long",year:"numeric"})]})]}),ae.jsx("div",{className:"flex-1 border border-gray-200 rounded-lg overflow-hidden bg-gray-50 relative",children:nt.length>0?ae.jsxs(ae.Fragment,{children:[ae.jsx(zF,{filteredData:nt,selectedMetric:n,regionScope:d}),he&&ae.jsx("div",{className:"absolute bottom-4 right-4 w-64",children:ae.jsx(tx,{selectedMetric:n,metricValues:nt.map(Je=>Je[n]).filter(Je=>typeof Je=="number"&&Je>0),isExport:!0})})]}):ae.jsxs("div",{className:"flex items-center justify-center h-full text-gray-500",children:[d==="state"&&!o&&"Select a state",d==="metro"&&!E&&"Select a metro area",nt.length===0&&"No data available"]})})]})]})]})}function O6({className:e,showText:n=!0,size:i="md"}){const l={sm:"w-6 h-6",md:"w-8 h-8",lg:"w-12 h-12"},h={sm:"text-sm",md:"text-base",lg:"text-xl"};return ae.jsxs("div",{className:Li("flex items-center space-x-2",e),children:[ae.jsx("div",{className:Li("relative",l[i]),children:ae.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"60 48 922 918",className:"w-full h-full",shapeRendering:"geometricPrecision",textRendering:"geometricPrecision",imageRendering:"optimizeQuality",fillRule:"evenodd",clipRule:"evenodd",children:[ae.jsx("path",{style:{opacity:1},fill:"currentColor",d:"M599.5 969.5a47946 47946 0 0 0-438-1q-3.972-.357-5.5-4-.75-265.5-.5-531-1.76-3.006-5-4.5l-90-1q-2.844-2.712-1.5-6.5A85.4 85.4 0 0 1 70.5 411q-.342-.598-1-.5A210908 210908 0 0 0 502.5 50q9.211-5.049 18 1a60358 60358 0 0 0 320 265Q985.322 445.534 961 639.5 937.402 826.092 774.5 918q-81.922 44.606-175 51.5m273-427q-12.547-109.86-97-180.5a40179 40179 0 0 1-262-215q-2-1-4 0a29527 29527 0 0 0-271 226.5 76 76 0 0 0-6.5 8 3480 3480 0 0 0 0 118l2.5 2.5c71.999.667 143.999.5 216 .5h17a282 282 0 0 1 72 7.5Q679.637 546.536 695 690.5q8.445 111.188-67 192-2.234 6.5 4.5 7 16.65-3.08 33-7.5Q781.86 847.5 840 741.5q39.05-82.066 33.5-173-.357-13.007-1-26m-617 38q106-.25 212 .5 48.318.069 88 27 41.687 35.418 46.5 90.5 5.764 54.94-21 103-32.8 48.235-90.5 59.5a277 277 0 0 1-29 4q-103 .75-206 .5a10.5 10.5 0 0 0-2.5-3q-1-139.5 0-279a10.5 10.5 0 0 0 2.5-3"}),ae.jsx("path",{fill:"currentColor",style:{opacity:1},d:"M427.5 290h68v68h-68zm96 0h68v68h-68zm-96 96h68v68h-68zm96 0h68v68h-68z"})]})}),n&&ae.jsx("span",{className:Li("font-bold text-gray-800",h[i]),children:"Domapus"})]})}var Q_=function(e,n){return Q_=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,l){i.__proto__=l}||function(i,l){for(var h in l)Object.prototype.hasOwnProperty.call(l,h)&&(i[h]=l[h])},Q_(e,n)};function Lu(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");Q_(e,n);function i(){this.constructor=e}e.prototype=n===null?Object.create(n):(i.prototype=n.prototype,new i)}var O_=function(){return O_=Object.assign||function(n){for(var i,l=1,h=arguments.length;l<h;l++){i=arguments[l];for(var d in i)Object.prototype.hasOwnProperty.call(i,d)&&(n[d]=i[d])}return n},O_.apply(this,arguments)};function bc(e,n,i,l){function h(d){return d instanceof i?d:new i(function(m){m(d)})}return new(i||(i=Promise))(function(d,m){function o(I){try{E(l.next(I))}catch(D){m(D)}}function x(I){try{E(l.throw(I))}catch(D){m(D)}}function E(I){I.done?d(I.value):h(I.value).then(o,x)}E((l=l.apply(e,[])).next())})}function Yl(e,n){var i={label:0,sent:function(){if(d[0]&1)throw d[1];return d[1]},trys:[],ops:[]},l,h,d,m;return m={next:o(0),throw:o(1),return:o(2)},typeof Symbol=="function"&&(m[Symbol.iterator]=function(){return this}),m;function o(E){return function(I){return x([E,I])}}function x(E){if(l)throw new TypeError("Generator is already executing.");for(;i;)try{if(l=1,h&&(d=E[0]&2?h.return:E[0]?h.throw||((d=h.return)&&d.call(h),0):h.next)&&!(d=d.call(h,E[1])).done)return d;switch(h=0,d&&(E=[E[0]&2,d.value]),E[0]){case 0:case 1:d=E;break;case 4:return i.label++,{value:E[1],done:!1};case 5:i.label++,h=E[1],E=[0];continue;case 7:E=i.ops.pop(),i.trys.pop();continue;default:if(d=i.trys,!(d=d.length>0&&d[d.length-1])&&(E[0]===6||E[0]===2)){i=0;continue}if(E[0]===3&&(!d||E[1]>d[0]&&E[1]<d[3])){i.label=E[1];break}if(E[0]===6&&i.label<d[1]){i.label=d[1],d=E;break}if(d&&i.label<d[2]){i.label=d[2],i.ops.push(E);break}d[2]&&i.ops.pop(),i.trys.pop();continue}E=n.call(e,i)}catch(I){E=[6,I],h=0}finally{l=d=0}if(E[0]&5)throw E[1];return{value:E[0]?E[1]:void 0,done:!0}}}function Wg(e,n,i){if(arguments.length===2)for(var l=0,h=n.length,d;l<h;l++)(d||!(l in n))&&(d||(d=Array.prototype.slice.call(n,0,l)),d[l]=n[l]);return e.concat(d||n)}var zh=(function(){function e(n,i,l,h){this.left=n,this.top=i,this.width=l,this.height=h}return e.prototype.add=function(n,i,l,h){return new e(this.left+n,this.top+i,this.width+l,this.height+h)},e.fromClientRect=function(n,i){return new e(i.left+n.windowBounds.left,i.top+n.windowBounds.top,i.width,i.height)},e.fromDOMRectList=function(n,i){var l=Array.from(i).find(function(h){return h.width!==0});return l?new e(l.left+n.windowBounds.left,l.top+n.windowBounds.top,l.width,l.height):e.EMPTY},e.EMPTY=new e(0,0,0,0),e})(),Oy=function(e,n){return zh.fromClientRect(e,n.getBoundingClientRect())},z6=function(e){var n=e.body,i=e.documentElement;if(!n||!i)throw new Error("Unable to get document size");var l=Math.max(Math.max(n.scrollWidth,i.scrollWidth),Math.max(n.offsetWidth,i.offsetWidth),Math.max(n.clientWidth,i.clientWidth)),h=Math.max(Math.max(n.scrollHeight,i.scrollHeight),Math.max(n.offsetHeight,i.offsetHeight),Math.max(n.clientHeight,i.clientHeight));return new zh(0,0,l,h)},zy=function(e){for(var n=[],i=0,l=e.length;i<l;){var h=e.charCodeAt(i++);if(h>=55296&&h<=56319&&i<l){var d=e.charCodeAt(i++);(d&64512)===56320?n.push(((h&1023)<<10)+(d&1023)+65536):(n.push(h),i--)}else n.push(h)}return n},Mo=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];if(String.fromCodePoint)return String.fromCodePoint.apply(String,e);var i=e.length;if(!i)return"";for(var l=[],h=-1,d="";++h<i;){var m=e[h];m<=65535?l.push(m):(m-=65536,l.push((m>>10)+55296,m%1024+56320)),(h+1===i||l.length>16384)&&(d+=String.fromCharCode.apply(String,l),l.length=0)}return d},q2="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",H6=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var Zg=0;Zg<q2.length;Zg++)H6[q2.charCodeAt(Zg)]=Zg;var $2="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",mm=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var Xg=0;Xg<$2.length;Xg++)mm[$2.charCodeAt(Xg)]=Xg;var j6=function(e){var n=e.length*.75,i=e.length,l,h=0,d,m,o,x;e[e.length-1]==="="&&(n--,e[e.length-2]==="="&&n--);var E=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(n):new Array(n),I=Array.isArray(E)?E:new Uint8Array(E);for(l=0;l<i;l+=4)d=mm[e.charCodeAt(l)],m=mm[e.charCodeAt(l+1)],o=mm[e.charCodeAt(l+2)],x=mm[e.charCodeAt(l+3)],I[h++]=d<<2|m>>4,I[h++]=(m&15)<<4|o>>2,I[h++]=(o&3)<<6|x&63;return E},V6=function(e){for(var n=e.length,i=[],l=0;l<n;l+=2)i.push(e[l+1]<<8|e[l]);return i},G6=function(e){for(var n=e.length,i=[],l=0;l<n;l+=4)i.push(e[l+3]<<24|e[l+2]<<16|e[l+1]<<8|e[l]);return i},Jd=5,rx=11,h1=2,K6=rx-Jd,HF=65536>>Jd,q6=1<<Jd,d1=q6-1,$6=1024>>Jd,W6=HF+$6,Z6=W6,X6=32,Y6=Z6+X6,J6=65536>>rx,eN=1<<K6,tN=eN-1,W2=function(e,n,i){return e.slice?e.slice(n,i):new Uint16Array(Array.prototype.slice.call(e,n,i))},rN=function(e,n,i){return e.slice?e.slice(n,i):new Uint32Array(Array.prototype.slice.call(e,n,i))},nN=function(e,n){var i=j6(e),l=Array.isArray(i)?G6(i):new Uint32Array(i),h=Array.isArray(i)?V6(i):new Uint16Array(i),d=24,m=W2(h,d/2,l[4]/2),o=l[5]===2?W2(h,(d+l[4])/2):rN(l,Math.ceil((d+l[4])/4));return new iN(l[0],l[1],l[2],l[3],m,o)},iN=(function(){function e(n,i,l,h,d,m){this.initialValue=n,this.errorValue=i,this.highStart=l,this.highValueIndex=h,this.index=d,this.data=m}return e.prototype.get=function(n){var i;if(n>=0){if(n<55296||n>56319&&n<=65535)return i=this.index[n>>Jd],i=(i<<h1)+(n&d1),this.data[i];if(n<=65535)return i=this.index[HF+(n-55296>>Jd)],i=(i<<h1)+(n&d1),this.data[i];if(n<this.highStart)return i=Y6-J6+(n>>rx),i=this.index[i],i+=n>>Jd&tN,i=this.index[i],i=(i<<h1)+(n&d1),this.data[i];if(n<=1114111)return this.data[this.highValueIndex]}return this.errorValue},e})(),Z2="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",sN=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var Yg=0;Yg<Z2.length;Yg++)sN[Z2.charCodeAt(Yg)]=Yg;var oN="KwAAAAAAAAAACA4AUD0AADAgAAACAAAAAAAIABAAGABAAEgAUABYAGAAaABgAGgAYgBqAF8AZwBgAGgAcQB5AHUAfQCFAI0AlQCdAKIAqgCyALoAYABoAGAAaABgAGgAwgDKAGAAaADGAM4A0wDbAOEA6QDxAPkAAQEJAQ8BFwF1AH0AHAEkASwBNAE6AUIBQQFJAVEBWQFhAWgBcAF4ATAAgAGGAY4BlQGXAZ8BpwGvAbUBvQHFAc0B0wHbAeMB6wHxAfkBAQIJAvEBEQIZAiECKQIxAjgCQAJGAk4CVgJeAmQCbAJ0AnwCgQKJApECmQKgAqgCsAK4ArwCxAIwAMwC0wLbAjAA4wLrAvMC+AIAAwcDDwMwABcDHQMlAy0DNQN1AD0DQQNJA0kDSQNRA1EDVwNZA1kDdQB1AGEDdQBpA20DdQN1AHsDdQCBA4kDkQN1AHUAmQOhA3UAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AKYDrgN1AHUAtgO+A8YDzgPWAxcD3gPjA+sD8wN1AHUA+wMDBAkEdQANBBUEHQQlBCoEFwMyBDgEYABABBcDSARQBFgEYARoBDAAcAQzAXgEgASIBJAEdQCXBHUAnwSnBK4EtgS6BMIEyAR1AHUAdQB1AHUAdQCVANAEYABgAGAAYABgAGAAYABgANgEYADcBOQEYADsBPQE/AQEBQwFFAUcBSQFLAU0BWQEPAVEBUsFUwVbBWAAYgVgAGoFcgV6BYIFigWRBWAAmQWfBaYFYABgAGAAYABgAKoFYACxBbAFuQW6BcEFwQXHBcEFwQXPBdMF2wXjBeoF8gX6BQIGCgYSBhoGIgYqBjIGOgZgAD4GRgZMBmAAUwZaBmAAYABgAGAAYABgAGAAYABgAGAAYABgAGIGYABpBnAGYABgAGAAYABgAGAAYABgAGAAYAB4Bn8GhQZgAGAAYAB1AHcDFQSLBmAAYABgAJMGdQA9A3UAmwajBqsGqwaVALMGuwbDBjAAywbSBtIG1QbSBtIG0gbSBtIG0gbdBuMG6wbzBvsGAwcLBxMHAwcbByMHJwcsBywHMQcsB9IGOAdAB0gHTgfSBkgHVgfSBtIG0gbSBtIG0gbSBtIG0gbSBiwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdgAGAALAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdbB2MHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB2kH0gZwB64EdQB1AHUAdQB1AHUAdQB1AHUHfQdgAIUHjQd1AHUAlQedB2AAYAClB6sHYACzB7YHvgfGB3UAzgfWBzMB3gfmB1EB7gf1B/0HlQENAQUIDQh1ABUIHQglCBcDLQg1CD0IRQhNCEEDUwh1AHUAdQBbCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIcAh3CHoIMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIgggwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAALAcsBywHLAcsBywHLAcsBywHLAcsB4oILAcsB44I0gaWCJ4Ipgh1AHUAqgiyCHUAdQB1AHUAdQB1AHUAdQB1AHUAtwh8AXUAvwh1AMUIyQjRCNkI4AjoCHUAdQB1AO4I9gj+CAYJDgkTCS0HGwkjCYIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiAAIAAAAFAAYABgAGIAXwBgAHEAdQBFAJUAogCyAKAAYABgAEIA4ABGANMA4QDxAMEBDwE1AFwBLAE6AQEBUQF4QkhCmEKoQrhCgAHIQsAB0MLAAcABwAHAAeDC6ABoAHDCwMMAAcABwAHAAdDDGMMAAcAB6MM4wwjDWMNow3jDaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAEjDqABWw6bDqABpg6gAaABoAHcDvwOPA+gAaABfA/8DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DpcPAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcAB9cPKwkyCToJMAB1AHUAdQBCCUoJTQl1AFUJXAljCWcJawkwADAAMAAwAHMJdQB2CX4JdQCECYoJjgmWCXUAngkwAGAAYABxAHUApgn3A64JtAl1ALkJdQDACTAAMAAwADAAdQB1AHUAdQB1AHUAdQB1AHUAowYNBMUIMAAwADAAMADICcsJ0wnZCRUE4QkwAOkJ8An4CTAAMAB1AAAKvwh1AAgKDwoXCh8KdQAwACcKLgp1ADYKqAmICT4KRgowADAAdQB1AE4KMAB1AFYKdQBeCnUAZQowADAAMAAwADAAMAAwADAAMAAVBHUAbQowADAAdQC5CXUKMAAwAHwBxAijBogEMgF9CoQKiASMCpQKmgqIBKIKqgquCogEDQG2Cr4KxgrLCjAAMADTCtsKCgHjCusK8Qr5CgELMAAwADAAMAB1AIsECQsRC3UANAEZCzAAMAAwADAAMAB1ACELKQswAHUANAExCzkLdQBBC0kLMABRC1kLMAAwADAAMAAwADAAdQBhCzAAMAAwAGAAYABpC3ELdwt/CzAAMACHC4sLkwubC58Lpwt1AK4Ltgt1APsDMAAwADAAMAAwADAAMAAwAL4LwwvLC9IL1wvdCzAAMADlC+kL8Qv5C/8LSQswADAAMAAwADAAMAAwADAAMAAHDDAAMAAwADAAMAAODBYMHgx1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1ACYMMAAwADAAdQB1AHUALgx1AHUAdQB1AHUAdQA2DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AD4MdQBGDHUAdQB1AHUAdQB1AEkMdQB1AHUAdQB1AFAMMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQBYDHUAdQB1AF8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUA+wMVBGcMMAAwAHwBbwx1AHcMfwyHDI8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAYABgAJcMMAAwADAAdQB1AJ8MlQClDDAAMACtDCwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB7UMLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AA0EMAC9DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAsBywHLAcsBywHLAcsBywHLQcwAMEMyAwsBywHLAcsBywHLAcsBywHLAcsBywHzAwwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1ANQM2QzhDDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMABgAGAAYABgAGAAYABgAOkMYADxDGAA+AwADQYNYABhCWAAYAAODTAAMAAwADAAFg1gAGAAHg37AzAAMAAwADAAYABgACYNYAAsDTQNPA1gAEMNPg1LDWAAYABgAGAAYABgAGAAYABgAGAAUg1aDYsGVglhDV0NcQBnDW0NdQ15DWAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAlQCBDZUAiA2PDZcNMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAnw2nDTAAMAAwADAAMAAwAHUArw23DTAAMAAwADAAMAAwADAAMAAwADAAMAB1AL8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQDHDTAAYABgAM8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA1w11ANwNMAAwAD0B5A0wADAAMAAwADAAMADsDfQN/A0EDgwOFA4wABsOMAAwADAAMAAwADAAMAAwANIG0gbSBtIG0gbSBtIG0gYjDigOwQUuDsEFMw7SBjoO0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGQg5KDlIOVg7SBtIGXg5lDm0OdQ7SBtIGfQ6EDooOjQ6UDtIGmg6hDtIG0gaoDqwO0ga0DrwO0gZgAGAAYADEDmAAYAAkBtIGzA5gANIOYADaDokO0gbSBt8O5w7SBu8O0gb1DvwO0gZgAGAAxA7SBtIG0gbSBtIGYABgAGAAYAAED2AAsAUMD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHJA8sBywHLAcsBywHLAccDywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywPLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAc0D9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHPA/SBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gYUD0QPlQCVAJUAMAAwADAAMACVAJUAlQCVAJUAlQCVAEwPMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA//8EAAQABAAEAAQABAAEAAQABAANAAMAAQABAAIABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQACgATABcAHgAbABoAHgAXABYAEgAeABsAGAAPABgAHABLAEsASwBLAEsASwBLAEsASwBLABgAGAAeAB4AHgATAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABYAGwASAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWAA0AEQAeAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAFAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJABYAGgAbABsAGwAeAB0AHQAeAE8AFwAeAA0AHgAeABoAGwBPAE8ADgBQAB0AHQAdAE8ATwAXAE8ATwBPABYAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAFAATwBAAE8ATwBPAEAATwBQAFAATwBQAB4AHgAeAB4AHgAeAB0AHQAdAB0AHgAdAB4ADgBQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgBQAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAkACQAJAAkACQAJAAkABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAFAAHgAeAB4AKwArAFAAUABQAFAAGABQACsAKwArACsAHgAeAFAAHgBQAFAAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUAAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAYAA0AKwArAB4AHgAbACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAB4ABAAEAB4ABAAEABMABAArACsAKwArACsAKwArACsAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAKwArACsAKwBWAFYAVgBWAB4AHgArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AGgAaABoAGAAYAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQAEwAEACsAEwATAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABLAEsASwBLAEsASwBLAEsASwBLABoAGQAZAB4AUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABMAUAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABABQAFAABAAEAB4ABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUAAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAFAABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQAUABQAB4AHgAYABMAUAArACsABAAbABsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAFAABAAEAAQABAAEAFAABAAEAAQAUAAEAAQABAAEAAQAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArACsAHgArAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAUAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEAA0ADQBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUAArACsAKwBQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABABQACsAKwArACsAKwArACsAKwAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUAAaABoAUABQAFAAUABQAEwAHgAbAFAAHgAEACsAKwAEAAQABAArAFAAUABQAFAAUABQACsAKwArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQACsAUABQACsAKwAEACsABAAEAAQABAAEACsAKwArACsABAAEACsAKwAEAAQABAArACsAKwAEACsAKwArACsAKwArACsAUABQAFAAUAArAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLAAQABABQAFAAUAAEAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAArACsAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AGwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAKwArACsAKwArAAQABAAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAAQAUAArAFAAUABQAFAAUABQACsAKwArAFAAUABQACsAUABQAFAAUAArACsAKwBQAFAAKwBQACsAUABQACsAKwArAFAAUAArACsAKwBQAFAAUAArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArAAQABAAEAAQABAArACsAKwAEAAQABAArAAQABAAEAAQAKwArAFAAKwArACsAKwArACsABAArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAHgAeAB4AHgAeAB4AGwAeACsAKwArACsAKwAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAUABQAFAAKwArACsAKwArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwAOAFAAUABQAFAAUABQAFAAHgBQAAQABAAEAA4AUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAKwArAAQAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAKwArACsAKwArACsAUAArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAFAABAAEAAQABAAEAAQABAArAAQABAAEACsABAAEAAQABABQAB4AKwArACsAKwBQAFAAUAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQABoAUABQAFAAUABQAFAAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQACsAUAArACsAUABQAFAAUABQAFAAUAArACsAKwAEACsAKwArACsABAAEAAQABAAEAAQAKwAEACsABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArAAQABAAeACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAXAAqACoAKgAqACoAKgAqACsAKwArACsAGwBcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAeAEsASwBLAEsASwBLAEsASwBLAEsADQANACsAKwArACsAKwBcAFwAKwBcACsAXABcAFwAXABcACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAXAArAFwAXABcAFwAXABcAFwAXABcAFwAKgBcAFwAKgAqACoAKgAqACoAKgAqACoAXAArACsAXABcAFwAXABcACsAXAArACoAKgAqACoAKgAqACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwBcAFwAXABcAFAADgAOAA4ADgAeAA4ADgAJAA4ADgANAAkAEwATABMAEwATAAkAHgATAB4AHgAeAAQABAAeAB4AHgAeAB4AHgBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQAFAADQAEAB4ABAAeAAQAFgARABYAEQAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAAQABAAEAAQADQAEAAQAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAA0ADQAeAB4AHgAeAB4AHgAEAB4AHgAeAB4AHgAeACsAHgAeAA4ADgANAA4AHgAeAB4AHgAeAAkACQArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgBcAEsASwBLAEsASwBLAEsASwBLAEsADQANAB4AHgAeAB4AXABcAFwAXABcAFwAKgAqACoAKgBcAFwAXABcACoAKgAqAFwAKgAqACoAXABcACoAKgAqACoAKgAqACoAXABcAFwAKgAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqAFwAKgBLAEsASwBLAEsASwBLAEsASwBLACoAKgAqACoAKgAqAFAAUABQAFAAUABQACsAUAArACsAKwArACsAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAKwBQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsABAAEAAQAHgANAB4AHgAeAB4AHgAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUAArACsADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWABEAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQANAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAANAA0AKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUAArAAQABAArACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqAA0ADQAVAFwADQAeAA0AGwBcACoAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwAeAB4AEwATAA0ADQAOAB4AEwATAB4ABAAEAAQACQArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAHgArACsAKwATABMASwBLAEsASwBLAEsASwBLAEsASwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAXABcAFwAXABcACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAXAArACsAKwAqACoAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsAHgAeAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKwAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKwArAAQASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACoAKgAqACoAKgAqACoAXAAqACoAKgAqACoAKgArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABABQAFAAUABQAFAAUABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwANAA0AHgANAA0ADQANAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwAeAB4AHgAeAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArAA0ADQANAA0ADQBLAEsASwBLAEsASwBLAEsASwBLACsAKwArAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUAAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAAQAUABQAFAAUABQAFAABABQAFAABAAEAAQAUAArACsAKwArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQACsAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAFAAUABQACsAHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQACsAKwAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQACsAHgAeAB4AHgAeAB4AHgAOAB4AKwANAA0ADQANAA0ADQANAAkADQANAA0ACAAEAAsABAAEAA0ACQANAA0ADAAdAB0AHgAXABcAFgAXABcAFwAWABcAHQAdAB4AHgAUABQAFAANAAEAAQAEAAQABAAEAAQACQAaABoAGgAaABoAGgAaABoAHgAXABcAHQAVABUAHgAeAB4AHgAeAB4AGAAWABEAFQAVABUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ADQAeAA0ADQANAA0AHgANAA0ADQAHAB4AHgAeAB4AKwAEAAQABAAEAAQABAAEAAQABAAEAFAAUAArACsATwBQAFAAUABQAFAAHgAeAB4AFgARAE8AUABPAE8ATwBPAFAAUABQAFAAUAAeAB4AHgAWABEAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArABsAGwAbABsAGwAbABsAGgAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGgAbABsAGwAbABoAGwAbABoAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAHgAeAFAAGgAeAB0AHgBQAB4AGgAeAB4AHgAeAB4AHgAeAB4AHgBPAB4AUAAbAB4AHgBQAFAAUABQAFAAHgAeAB4AHQAdAB4AUAAeAFAAHgBQAB4AUABPAFAAUAAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgBQAFAAUABQAE8ATwBQAFAAUABQAFAATwBQAFAATwBQAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAUABQAFAATwBPAE8ATwBPAE8ATwBPAE8ATwBQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABPAB4AHgArACsAKwArAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHQAdAB4AHgAeAB0AHQAeAB4AHQAeAB4AHgAdAB4AHQAbABsAHgAdAB4AHgAeAB4AHQAeAB4AHQAdAB0AHQAeAB4AHQAeAB0AHgAdAB0AHQAdAB0AHQAeAB0AHgAeAB4AHgAeAB0AHQAdAB0AHgAeAB4AHgAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHgAeAB0AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAeAB0AHQAdAB0AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAdAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAWABEAHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAWABEAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AHQAdAB0AHgAeAB0AHgAeAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlAB4AHQAdAB4AHgAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AJQAlAB0AHQAlAB4AJQAlACUAIAAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAdAB0AHQAeAB0AJQAdAB0AHgAdAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAdAB0AHQAdACUAHgAlACUAJQAdACUAJQAdAB0AHQAlACUAHQAdACUAHQAdACUAJQAlAB4AHQAeAB4AHgAeAB0AHQAlAB0AHQAdAB0AHQAdACUAJQAlACUAJQAdACUAJQAgACUAHQAdACUAJQAlACUAJQAlACUAJQAeAB4AHgAlACUAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AFwAXABcAFwAXABcAHgATABMAJQAeAB4AHgAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARABYAEQAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAEAAQABAAeAB4AKwArACsAKwArABMADQANAA0AUAATAA0AUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUAANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAA0ADQANAA0ADQANAA0ADQAeAA0AFgANAB4AHgAXABcAHgAeABcAFwAWABEAFgARABYAEQAWABEADQANAA0ADQATAFAADQANAB4ADQANAB4AHgAeAB4AHgAMAAwADQANAA0AHgANAA0AFgANAA0ADQANAA0ADQANAA0AHgANAB4ADQANAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArAA0AEQARACUAJQBHAFcAVwAWABEAFgARABYAEQAWABEAFgARACUAJQAWABEAFgARABYAEQAWABEAFQAWABEAEQAlAFcAVwBXAFcAVwBXAFcAVwBXAAQABAAEAAQABAAEACUAVwBXAFcAVwA2ACUAJQBXAFcAVwBHAEcAJQAlACUAKwBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBRAFcAUQBXAFEAVwBXAFcAVwBXAFcAUQBXAFcAVwBXAFcAVwBRAFEAKwArAAQABAAVABUARwBHAFcAFQBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBRAFcAVwBXAFcAVwBXAFEAUQBXAFcAVwBXABUAUQBHAEcAVwArACsAKwArACsAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwAlACUAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACsAKwArACsAKwArACsAKwArACsAKwArAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBPAE8ATwBPAE8ATwBPAE8AJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADQATAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABLAEsASwBLAEsASwBLAEsASwBLAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAABAAEAAQABAAeAAQABAAEAAQABAAEAAQABAAEAAQAHgBQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAeAA0ADQANAA0ADQArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAAQAUABQAFAABABQAFAAUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAeAB4AHgAeAAQAKwArACsAUABQAFAAUABQAFAAHgAeABoAHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADgAOABMAEwArACsAKwArACsAKwArACsABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwANAA0ASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUAAeAB4AHgBQAA4AUABQAAQAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArAB4AWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYACsAKwArAAQAHgAeAB4AHgAeAB4ADQANAA0AHgAeAB4AHgArAFAASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArAB4AHgBcAFwAXABcAFwAKgBcAFwAXABcAFwAXABcAFwAXABcAEsASwBLAEsASwBLAEsASwBLAEsAXABcAFwAXABcACsAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAFAAUABQAAQAUABQAFAAUABQAFAAUABQAAQABAArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAHgANAA0ADQBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAXAAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAKgAqACoAXABcACoAKgBcAFwAXABcAFwAKgAqAFwAKgBcACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcACoAKgBQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAA0ADQBQAFAAUAAEAAQAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQADQAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAVABVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBUAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVACsAKwArACsAKwArACsAKwArACsAKwArAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAKwArACsAKwBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAKwArACsAKwAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAKwArACsAKwArAFYABABWAFYAVgBWAFYAVgBWAFYAVgBWAB4AVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgArAFYAVgBWAFYAVgArAFYAKwBWAFYAKwBWAFYAKwBWAFYAVgBWAFYAVgBWAFYAVgBWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAEQAWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAaAB4AKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAGAARABEAGAAYABMAEwAWABEAFAArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACUAJQAlACUAJQAWABEAFgARABYAEQAWABEAFgARABYAEQAlACUAFgARACUAJQAlACUAJQAlACUAEQAlABEAKwAVABUAEwATACUAFgARABYAEQAWABEAJQAlACUAJQAlACUAJQAlACsAJQAbABoAJQArACsAKwArAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAcAKwATACUAJQAbABoAJQAlABYAEQAlACUAEQAlABEAJQBXAFcAVwBXAFcAVwBXAFcAVwBXABUAFQAlACUAJQATACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXABYAJQARACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAWACUAEQAlABYAEQARABYAEQARABUAVwBRAFEAUQBRAFEAUQBRAFEAUQBRAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcARwArACsAVwBXAFcAVwBXAFcAKwArAFcAVwBXAFcAVwBXACsAKwBXAFcAVwBXAFcAVwArACsAVwBXAFcAKwArACsAGgAbACUAJQAlABsAGwArAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAAQAB0AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsADQANAA0AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAA0AUABQAFAAUAArACsAKwArAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwArAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwBQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAUABQAFAAUABQAAQABAAEACsABAAEACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAKwBQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAA0ADQANAA0ADQANAA0ADQAeACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAArACsAKwArAFAAUABQAFAAUAANAA0ADQANAA0ADQAUACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsADQANAA0ADQANAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArAAQABAANACsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAB4AHgAeAB4AHgArACsAKwArACsAKwAEAAQABAAEAAQABAAEAA0ADQAeAB4AHgAeAB4AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsASwBLAEsASwBLAEsASwBLAEsASwANAA0ADQANAFAABAAEAFAAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAeAA4AUAArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAADQANAB4ADQAEAAQABAAEAB4ABAAEAEsASwBLAEsASwBLAEsASwBLAEsAUAAOAFAADQANAA0AKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAANAA0AHgANAA0AHgAEACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAA0AKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsABAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsABAAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAUAArACsAKwArACsAKwAEACsAKwArACsAKwBQAFAAUABQAFAABAAEACsAKwAEAAQABAAEAAQABAAEACsAKwArAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAAQABABQAFAAUABQAA0ADQANAA0AHgBLAEsASwBLAEsASwBLAEsASwBLAA0ADQArAB4ABABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUAAeAFAAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABAAEAAQADgANAA0AEwATAB4AHgAeAA0ADQANAA0ADQANAA0ADQANAA0ADQANAA0ADQANAFAAUABQAFAABAAEACsAKwAEAA0ADQAeAFAAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKwArACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBcAFwADQANAA0AKgBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAKwArAFAAKwArAFAAUABQAFAAUABQAFAAUAArAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQAKwAEAAQAKwArAAQABAAEAAQAUAAEAFAABAAEAA0ADQANACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABABQAA4AUAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAFAABAAEAAQABAAOAB4ADQANAA0ADQAOAB4ABAArACsAKwArACsAKwArACsAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAA0ADQANAFAADgAOAA4ADQANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAAQABAAEAFAADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAOABMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAArACsAKwAEACsABAAEACsABAAEAAQABAAEAAQABABQAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAaABoAGgAaAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABIAEgAQwBDAEMAUABQAFAAUABDAFAAUABQAEgAQwBIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABDAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAJAAkACQAJAAkACQAJABYAEQArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwANAA0AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAANACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAA0ADQANAB4AHgAeAB4AHgAeAFAAUABQAFAADQAeACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAA0AHgAeACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAARwBHABUARwAJACsAKwArACsAKwArACsAKwArACsAKwAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUQBRAFEAKwArACsAKwArACsAKwArACsAKwArACsAKwBRAFEAUQBRACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAHgAEAAQADQAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQABAAEAAQABAAeAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQAHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAKwArAFAAKwArAFAAUAArACsAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUAArAFAAUABQAFAAUABQAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAHgAeAFAAUABQAFAAUAArAFAAKwArACsAUABQAFAAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeACsAKwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4ABAAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAHgAeAA0ADQANAA0AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArAAQABAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwBQAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArABsAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAB4AHgAeAB4ABAAEAAQABAAEAAQABABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArABYAFgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAGgBQAFAAUAAaAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUAArACsAKwArACsAKwBQACsAKwArACsAUAArAFAAKwBQACsAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUAArAFAAKwBQACsAUAArAFAAUAArAFAAKwArAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAKwBQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8AJQAlACUAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB4AHgAeACUAJQAlAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAlACUAJQAlACUAHgAlACUAJQAlACUAIAAgACAAJQAlACAAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACEAIQAhACEAIQAlACUAIAAgACUAJQAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAIAAlACUAJQAlACAAIAAgACUAIAAgACAAJQAlACUAJQAlACUAJQAgACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAlAB4AJQAeACUAJQAlACUAJQAgACUAJQAlACUAHgAlAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACAAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABcAFwAXABUAFQAVAB4AHgAeAB4AJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAgACUAJQAgACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAIAAgACUAJQAgACAAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACAAIAAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACAAIAAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAA==",X2=50,aN=1,jF=2,VF=3,lN=4,cN=5,Y2=7,GF=8,J2=9,hd=10,z_=11,eB=12,H_=13,AN=14,gm=15,j_=16,Jg=17,cm=18,uN=19,tB=20,V_=21,Am=22,f1=23,Hf=24,BA=25,ym=26,vm=27,jf=28,hN=29,Zd=30,dN=31,e0=32,t0=33,G_=34,K_=35,q_=36,Om=37,$_=38,U0=39,D0=40,p1=41,KF=42,fN=43,pN=[9001,65288],qF="!",di="",r0="",W_=nN(oN),kh=[Zd,q_],Z_=[aN,jF,VF,cN],$F=[hd,GF],rB=[vm,ym],mN=Z_.concat($F),nB=[$_,U0,D0,G_,K_],gN=[gm,H_],yN=function(e,n){n===void 0&&(n="strict");var i=[],l=[],h=[];return e.forEach(function(d,m){var o=W_.get(d);if(o>X2?(h.push(!0),o-=X2):h.push(!1),["normal","auto","loose"].indexOf(n)!==-1&&[8208,8211,12316,12448].indexOf(d)!==-1)return l.push(m),i.push(j_);if(o===lN||o===z_){if(m===0)return l.push(m),i.push(Zd);var x=i[m-1];return mN.indexOf(x)===-1?(l.push(l[m-1]),i.push(x)):(l.push(m),i.push(Zd))}if(l.push(m),o===dN)return i.push(n==="strict"?V_:Om);if(o===KF||o===hN)return i.push(Zd);if(o===fN)return d>=131072&&d<=196605||d>=196608&&d<=262141?i.push(Om):i.push(Zd);i.push(o)}),[l,i,h]},m1=function(e,n,i,l){var h=l[i];if(Array.isArray(e)?e.indexOf(h)!==-1:e===h)for(var d=i;d<=l.length;){d++;var m=l[d];if(m===n)return!0;if(m!==hd)break}if(h===hd)for(var d=i;d>0;){d--;var o=l[d];if(Array.isArray(e)?e.indexOf(o)!==-1:e===o)for(var x=i;x<=l.length;){x++;var m=l[x];if(m===n)return!0;if(m!==hd)break}if(o!==hd)break}return!1},iB=function(e,n){for(var i=e;i>=0;){var l=n[i];if(l===hd)i--;else return l}return 0},vN=function(e,n,i,l,h){if(i[l]===0)return di;var d=l-1;if(Array.isArray(h)&&h[d]===!0)return di;var m=d-1,o=d+1,x=n[d],E=m>=0?n[m]:0,I=n[o];if(x===jF&&I===VF)return di;if(Z_.indexOf(x)!==-1)return qF;if(Z_.indexOf(I)!==-1||$F.indexOf(I)!==-1)return di;if(iB(d,n)===GF)return r0;if(W_.get(e[d])===z_||(x===e0||x===t0)&&W_.get(e[o])===z_||x===Y2||I===Y2||x===J2||[hd,H_,gm].indexOf(x)===-1&&I===J2||[Jg,cm,uN,Hf,jf].indexOf(I)!==-1||iB(d,n)===Am||m1(f1,Am,d,n)||m1([Jg,cm],V_,d,n)||m1(eB,eB,d,n))return di;if(x===hd)return r0;if(x===f1||I===f1)return di;if(I===j_||x===j_)return r0;if([H_,gm,V_].indexOf(I)!==-1||x===AN||E===q_&&gN.indexOf(x)!==-1||x===jf&&I===q_||I===tB||kh.indexOf(I)!==-1&&x===BA||kh.indexOf(x)!==-1&&I===BA||x===vm&&[Om,e0,t0].indexOf(I)!==-1||[Om,e0,t0].indexOf(x)!==-1&&I===ym||kh.indexOf(x)!==-1&&rB.indexOf(I)!==-1||rB.indexOf(x)!==-1&&kh.indexOf(I)!==-1||[vm,ym].indexOf(x)!==-1&&(I===BA||[Am,gm].indexOf(I)!==-1&&n[o+1]===BA)||[Am,gm].indexOf(x)!==-1&&I===BA||x===BA&&[BA,jf,Hf].indexOf(I)!==-1)return di;if([BA,jf,Hf,Jg,cm].indexOf(I)!==-1)for(var D=d;D>=0;){var O=n[D];if(O===BA)return di;if([jf,Hf].indexOf(O)!==-1)D--;else break}if([vm,ym].indexOf(I)!==-1)for(var D=[Jg,cm].indexOf(x)!==-1?m:d;D>=0;){var O=n[D];if(O===BA)return di;if([jf,Hf].indexOf(O)!==-1)D--;else break}if($_===x&&[$_,U0,G_,K_].indexOf(I)!==-1||[U0,G_].indexOf(x)!==-1&&[U0,D0].indexOf(I)!==-1||[D0,K_].indexOf(x)!==-1&&I===D0||nB.indexOf(x)!==-1&&[tB,ym].indexOf(I)!==-1||nB.indexOf(I)!==-1&&x===vm||kh.indexOf(x)!==-1&&kh.indexOf(I)!==-1||x===Hf&&kh.indexOf(I)!==-1||kh.concat(BA).indexOf(x)!==-1&&I===Am&&pN.indexOf(e[o])===-1||kh.concat(BA).indexOf(I)!==-1&&x===cm)return di;if(x===p1&&I===p1){for(var P=i[d],W=1;P>0&&(P--,n[P]===p1);)W++;if(W%2!==0)return di}return x===e0&&I===t0?di:r0},_N=function(e,n){n||(n={lineBreak:"normal",wordBreak:"normal"});var i=yN(e,n.lineBreak),l=i[0],h=i[1],d=i[2];(n.wordBreak==="break-all"||n.wordBreak==="break-word")&&(h=h.map(function(o){return[BA,Zd,KF].indexOf(o)!==-1?Om:o}));var m=n.wordBreak==="keep-all"?d.map(function(o,x){return o&&e[x]>=19968&&e[x]<=40959}):void 0;return[l,h,m]},wN=(function(){function e(n,i,l,h){this.codePoints=n,this.required=i===qF,this.start=l,this.end=h}return e.prototype.slice=function(){return Mo.apply(void 0,this.codePoints.slice(this.start,this.end))},e})(),xN=function(e,n){var i=zy(e),l=_N(i,n),h=l[0],d=l[1],m=l[2],o=i.length,x=0,E=0;return{next:function(){if(E>=o)return{done:!0,value:null};for(var I=di;E<o&&(I=vN(i,d,h,++E,m))===di;);if(I!==di||E===o){var D=new wN(i,I,x,E);return x=E,{value:D,done:!1}}return{done:!0,value:null}}}},bN=1,BN=2,Jm=4,sB=8,J0=10,oB=47,Sm=92,CN=9,EN=32,n0=34,um=61,SN=35,FN=36,IN=37,i0=39,s0=40,hm=41,TN=95,eA=45,PN=33,LN=60,MN=62,kN=64,UN=91,DN=93,RN=61,NN=123,o0=63,QN=125,aB=124,ON=126,zN=128,lB=65533,g1=42,Yd=43,HN=44,jN=58,VN=59,zm=46,GN=0,KN=8,qN=11,$N=14,WN=31,ZN=127,Zu=-1,WF=48,ZF=97,XF=101,XN=102,YN=117,JN=122,YF=65,JF=69,eI=70,eQ=85,tQ=90,Jl=function(e){return e>=WF&&e<=57},rQ=function(e){return e>=55296&&e<=57343},Vf=function(e){return Jl(e)||e>=YF&&e<=eI||e>=ZF&&e<=XN},nQ=function(e){return e>=ZF&&e<=JN},iQ=function(e){return e>=YF&&e<=tQ},sQ=function(e){return nQ(e)||iQ(e)},oQ=function(e){return e>=zN},a0=function(e){return e===J0||e===CN||e===EN},ey=function(e){return sQ(e)||oQ(e)||e===TN},cB=function(e){return ey(e)||Jl(e)||e===eA},aQ=function(e){return e>=GN&&e<=KN||e===qN||e>=$N&&e<=WN||e===ZN},Ad=function(e,n){return e!==Sm?!1:n!==J0},l0=function(e,n,i){return e===eA?ey(n)||Ad(n,i):ey(e)?!0:!!(e===Sm&&Ad(e,n))},y1=function(e,n,i){return e===Yd||e===eA?Jl(n)?!0:n===zm&&Jl(i):Jl(e===zm?n:e)},lQ=function(e){var n=0,i=1;(e[n]===Yd||e[n]===eA)&&(e[n]===eA&&(i=-1),n++);for(var l=[];Jl(e[n]);)l.push(e[n++]);var h=l.length?parseInt(Mo.apply(void 0,l),10):0;e[n]===zm&&n++;for(var d=[];Jl(e[n]);)d.push(e[n++]);var m=d.length,o=m?parseInt(Mo.apply(void 0,d),10):0;(e[n]===JF||e[n]===XF)&&n++;var x=1;(e[n]===Yd||e[n]===eA)&&(e[n]===eA&&(x=-1),n++);for(var E=[];Jl(e[n]);)E.push(e[n++]);var I=E.length?parseInt(Mo.apply(void 0,E),10):0;return i*(h+o*Math.pow(10,-m))*Math.pow(10,x*I)},cQ={type:2},AQ={type:3},uQ={type:4},hQ={type:13},dQ={type:8},fQ={type:21},pQ={type:9},mQ={type:10},gQ={type:11},yQ={type:12},vQ={type:14},c0={type:23},_Q={type:1},wQ={type:25},xQ={type:24},bQ={type:26},BQ={type:27},CQ={type:28},EQ={type:29},SQ={type:31},X_={type:32},tI=(function(){function e(){this._value=[]}return e.prototype.write=function(n){this._value=this._value.concat(zy(n))},e.prototype.read=function(){for(var n=[],i=this.consumeToken();i!==X_;)n.push(i),i=this.consumeToken();return n},e.prototype.consumeToken=function(){var n=this.consumeCodePoint();switch(n){case n0:return this.consumeStringToken(n0);case SN:var i=this.peekCodePoint(0),l=this.peekCodePoint(1),h=this.peekCodePoint(2);if(cB(i)||Ad(l,h)){var d=l0(i,l,h)?BN:bN,m=this.consumeName();return{type:5,value:m,flags:d}}break;case FN:if(this.peekCodePoint(0)===um)return this.consumeCodePoint(),hQ;break;case i0:return this.consumeStringToken(i0);case s0:return cQ;case hm:return AQ;case g1:if(this.peekCodePoint(0)===um)return this.consumeCodePoint(),vQ;break;case Yd:if(y1(n,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(n),this.consumeNumericToken();break;case HN:return uQ;case eA:var o=n,x=this.peekCodePoint(0),E=this.peekCodePoint(1);if(y1(o,x,E))return this.reconsumeCodePoint(n),this.consumeNumericToken();if(l0(o,x,E))return this.reconsumeCodePoint(n),this.consumeIdentLikeToken();if(x===eA&&E===MN)return this.consumeCodePoint(),this.consumeCodePoint(),xQ;break;case zm:if(y1(n,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(n),this.consumeNumericToken();break;case oB:if(this.peekCodePoint(0)===g1)for(this.consumeCodePoint();;){var I=this.consumeCodePoint();if(I===g1&&(I=this.consumeCodePoint(),I===oB))return this.consumeToken();if(I===Zu)return this.consumeToken()}break;case jN:return bQ;case VN:return BQ;case LN:if(this.peekCodePoint(0)===PN&&this.peekCodePoint(1)===eA&&this.peekCodePoint(2)===eA)return this.consumeCodePoint(),this.consumeCodePoint(),wQ;break;case kN:var D=this.peekCodePoint(0),O=this.peekCodePoint(1),P=this.peekCodePoint(2);if(l0(D,O,P)){var m=this.consumeName();return{type:7,value:m}}break;case UN:return CQ;case Sm:if(Ad(n,this.peekCodePoint(0)))return this.reconsumeCodePoint(n),this.consumeIdentLikeToken();break;case DN:return EQ;case RN:if(this.peekCodePoint(0)===um)return this.consumeCodePoint(),dQ;break;case NN:return gQ;case QN:return yQ;case YN:case eQ:var W=this.peekCodePoint(0),z=this.peekCodePoint(1);return W===Yd&&(Vf(z)||z===o0)&&(this.consumeCodePoint(),this.consumeUnicodeRangeToken()),this.reconsumeCodePoint(n),this.consumeIdentLikeToken();case aB:if(this.peekCodePoint(0)===um)return this.consumeCodePoint(),pQ;if(this.peekCodePoint(0)===aB)return this.consumeCodePoint(),fQ;break;case ON:if(this.peekCodePoint(0)===um)return this.consumeCodePoint(),mQ;break;case Zu:return X_}return a0(n)?(this.consumeWhiteSpace(),SQ):Jl(n)?(this.reconsumeCodePoint(n),this.consumeNumericToken()):ey(n)?(this.reconsumeCodePoint(n),this.consumeIdentLikeToken()):{type:6,value:Mo(n)}},e.prototype.consumeCodePoint=function(){var n=this._value.shift();return typeof n>"u"?-1:n},e.prototype.reconsumeCodePoint=function(n){this._value.unshift(n)},e.prototype.peekCodePoint=function(n){return n>=this._value.length?-1:this._value[n]},e.prototype.consumeUnicodeRangeToken=function(){for(var n=[],i=this.consumeCodePoint();Vf(i)&&n.length<6;)n.push(i),i=this.consumeCodePoint();for(var l=!1;i===o0&&n.length<6;)n.push(i),i=this.consumeCodePoint(),l=!0;if(l){var h=parseInt(Mo.apply(void 0,n.map(function(x){return x===o0?WF:x})),16),d=parseInt(Mo.apply(void 0,n.map(function(x){return x===o0?eI:x})),16);return{type:30,start:h,end:d}}var m=parseInt(Mo.apply(void 0,n),16);if(this.peekCodePoint(0)===eA&&Vf(this.peekCodePoint(1))){this.consumeCodePoint(),i=this.consumeCodePoint();for(var o=[];Vf(i)&&o.length<6;)o.push(i),i=this.consumeCodePoint();var d=parseInt(Mo.apply(void 0,o),16);return{type:30,start:m,end:d}}else return{type:30,start:m,end:m}},e.prototype.consumeIdentLikeToken=function(){var n=this.consumeName();return n.toLowerCase()==="url"&&this.peekCodePoint(0)===s0?(this.consumeCodePoint(),this.consumeUrlToken()):this.peekCodePoint(0)===s0?(this.consumeCodePoint(),{type:19,value:n}):{type:20,value:n}},e.prototype.consumeUrlToken=function(){var n=[];if(this.consumeWhiteSpace(),this.peekCodePoint(0)===Zu)return{type:22,value:""};var i=this.peekCodePoint(0);if(i===i0||i===n0){var l=this.consumeStringToken(this.consumeCodePoint());return l.type===0&&(this.consumeWhiteSpace(),this.peekCodePoint(0)===Zu||this.peekCodePoint(0)===hm)?(this.consumeCodePoint(),{type:22,value:l.value}):(this.consumeBadUrlRemnants(),c0)}for(;;){var h=this.consumeCodePoint();if(h===Zu||h===hm)return{type:22,value:Mo.apply(void 0,n)};if(a0(h))return this.consumeWhiteSpace(),this.peekCodePoint(0)===Zu||this.peekCodePoint(0)===hm?(this.consumeCodePoint(),{type:22,value:Mo.apply(void 0,n)}):(this.consumeBadUrlRemnants(),c0);if(h===n0||h===i0||h===s0||aQ(h))return this.consumeBadUrlRemnants(),c0;if(h===Sm)if(Ad(h,this.peekCodePoint(0)))n.push(this.consumeEscapedCodePoint());else return this.consumeBadUrlRemnants(),c0;else n.push(h)}},e.prototype.consumeWhiteSpace=function(){for(;a0(this.peekCodePoint(0));)this.consumeCodePoint()},e.prototype.consumeBadUrlRemnants=function(){for(;;){var n=this.consumeCodePoint();if(n===hm||n===Zu)return;Ad(n,this.peekCodePoint(0))&&this.consumeEscapedCodePoint()}},e.prototype.consumeStringSlice=function(n){for(var i=5e4,l="";n>0;){var h=Math.min(i,n);l+=Mo.apply(void 0,this._value.splice(0,h)),n-=h}return this._value.shift(),l},e.prototype.consumeStringToken=function(n){var i="",l=0;do{var h=this._value[l];if(h===Zu||h===void 0||h===n)return i+=this.consumeStringSlice(l),{type:0,value:i};if(h===J0)return this._value.splice(0,l),_Q;if(h===Sm){var d=this._value[l+1];d!==Zu&&d!==void 0&&(d===J0?(i+=this.consumeStringSlice(l),l=-1,this._value.shift()):Ad(h,d)&&(i+=this.consumeStringSlice(l),i+=Mo(this.consumeEscapedCodePoint()),l=-1))}l++}while(!0)},e.prototype.consumeNumber=function(){var n=[],i=Jm,l=this.peekCodePoint(0);for((l===Yd||l===eA)&&n.push(this.consumeCodePoint());Jl(this.peekCodePoint(0));)n.push(this.consumeCodePoint());l=this.peekCodePoint(0);var h=this.peekCodePoint(1);if(l===zm&&Jl(h))for(n.push(this.consumeCodePoint(),this.consumeCodePoint()),i=sB;Jl(this.peekCodePoint(0));)n.push(this.consumeCodePoint());l=this.peekCodePoint(0),h=this.peekCodePoint(1);var d=this.peekCodePoint(2);if((l===JF||l===XF)&&((h===Yd||h===eA)&&Jl(d)||Jl(h)))for(n.push(this.consumeCodePoint(),this.consumeCodePoint()),i=sB;Jl(this.peekCodePoint(0));)n.push(this.consumeCodePoint());return[lQ(n),i]},e.prototype.consumeNumericToken=function(){var n=this.consumeNumber(),i=n[0],l=n[1],h=this.peekCodePoint(0),d=this.peekCodePoint(1),m=this.peekCodePoint(2);if(l0(h,d,m)){var o=this.consumeName();return{type:15,number:i,flags:l,unit:o}}return h===IN?(this.consumeCodePoint(),{type:16,number:i,flags:l}):{type:17,number:i,flags:l}},e.prototype.consumeEscapedCodePoint=function(){var n=this.consumeCodePoint();if(Vf(n)){for(var i=Mo(n);Vf(this.peekCodePoint(0))&&i.length<6;)i+=Mo(this.consumeCodePoint());a0(this.peekCodePoint(0))&&this.consumeCodePoint();var l=parseInt(i,16);return l===0||rQ(l)||l>1114111?lB:l}return n===Zu?lB:n},e.prototype.consumeName=function(){for(var n="";;){var i=this.consumeCodePoint();if(cB(i))n+=Mo(i);else if(Ad(i,this.peekCodePoint(0)))n+=Mo(this.consumeEscapedCodePoint());else return this.reconsumeCodePoint(i),n}},e})(),rI=(function(){function e(n){this._tokens=n}return e.create=function(n){var i=new tI;return i.write(n),new e(i.read())},e.parseValue=function(n){return e.create(n).parseComponentValue()},e.parseValues=function(n){return e.create(n).parseComponentValues()},e.prototype.parseComponentValue=function(){for(var n=this.consumeToken();n.type===31;)n=this.consumeToken();if(n.type===32)throw new SyntaxError("Error parsing CSS component value, unexpected EOF");this.reconsumeToken(n);var i=this.consumeComponentValue();do n=this.consumeToken();while(n.type===31);if(n.type===32)return i;throw new SyntaxError("Error parsing CSS component value, multiple values found when expecting only one")},e.prototype.parseComponentValues=function(){for(var n=[];;){var i=this.consumeComponentValue();if(i.type===32)return n;n.push(i),n.push()}},e.prototype.consumeComponentValue=function(){var n=this.consumeToken();switch(n.type){case 11:case 28:case 2:return this.consumeSimpleBlock(n.type);case 19:return this.consumeFunction(n)}return n},e.prototype.consumeSimpleBlock=function(n){for(var i={type:n,values:[]},l=this.consumeToken();;){if(l.type===32||IQ(l,n))return i;this.reconsumeToken(l),i.values.push(this.consumeComponentValue()),l=this.consumeToken()}},e.prototype.consumeFunction=function(n){for(var i={name:n.value,values:[],type:18};;){var l=this.consumeToken();if(l.type===32||l.type===3)return i;this.reconsumeToken(l),i.values.push(this.consumeComponentValue())}},e.prototype.consumeToken=function(){var n=this._tokens.shift();return typeof n>"u"?X_:n},e.prototype.reconsumeToken=function(n){this._tokens.unshift(n)},e})(),eg=function(e){return e.type===15},Ep=function(e){return e.type===17},us=function(e){return e.type===20},FQ=function(e){return e.type===0},Y_=function(e,n){return us(e)&&e.value===n},nI=function(e){return e.type!==31},vp=function(e){return e.type!==31&&e.type!==4},oh=function(e){var n=[],i=[];return e.forEach(function(l){if(l.type===4){if(i.length===0)throw new Error("Error parsing function args, zero tokens for arg");n.push(i),i=[];return}l.type!==31&&i.push(l)}),i.length&&n.push(i),n},IQ=function(e,n){return n===11&&e.type===12||n===28&&e.type===29?!0:n===2&&e.type===3},bd=function(e){return e.type===17||e.type===15},oa=function(e){return e.type===16||bd(e)},iI=function(e){return e.length>1?[e[0],e[1]]:[e[0]]},Bl={type:17,number:0,flags:Jm},nx={type:16,number:50,flags:Jm},dd={type:16,number:100,flags:Jm},_m=function(e,n,i){var l=e[0],h=e[1];return[Ms(l,n),Ms(typeof h<"u"?h:l,i)]},Ms=function(e,n){if(e.type===16)return e.number/100*n;if(eg(e))switch(e.unit){case"rem":case"em":return 16*e.number;case"px":default:return e.number}return e.number},sI="deg",oI="grad",aI="rad",lI="turn",Hy={name:"angle",parse:function(e,n){if(n.type===15)switch(n.unit){case sI:return Math.PI*n.number/180;case oI:return Math.PI/200*n.number;case aI:return n.number;case lI:return Math.PI*2*n.number}throw new Error("Unsupported angle type")}},cI=function(e){return e.type===15&&(e.unit===sI||e.unit===oI||e.unit===aI||e.unit===lI)},AI=function(e){var n=e.filter(us).map(function(i){return i.value}).join(" ");switch(n){case"to bottom right":case"to right bottom":case"left top":case"top left":return[Bl,Bl];case"to top":case"bottom":return ru(0);case"to bottom left":case"to left bottom":case"right top":case"top right":return[Bl,dd];case"to right":case"left":return ru(90);case"to top left":case"to left top":case"right bottom":case"bottom right":return[dd,dd];case"to bottom":case"top":return ru(180);case"to top right":case"to right top":case"left bottom":case"bottom left":return[dd,Bl];case"to left":case"right":return ru(270)}return 0},ru=function(e){return Math.PI*e/180},yd={name:"color",parse:function(e,n){if(n.type===18){var i=TQ[n.name];if(typeof i>"u")throw new Error('Attempting to parse an unsupported color function "'+n.name+'"');return i(e,n.values)}if(n.type===5){if(n.value.length===3){var l=n.value.substring(0,1),h=n.value.substring(1,2),d=n.value.substring(2,3);return fd(parseInt(l+l,16),parseInt(h+h,16),parseInt(d+d,16),1)}if(n.value.length===4){var l=n.value.substring(0,1),h=n.value.substring(1,2),d=n.value.substring(2,3),m=n.value.substring(3,4);return fd(parseInt(l+l,16),parseInt(h+h,16),parseInt(d+d,16),parseInt(m+m,16)/255)}if(n.value.length===6){var l=n.value.substring(0,2),h=n.value.substring(2,4),d=n.value.substring(4,6);return fd(parseInt(l,16),parseInt(h,16),parseInt(d,16),1)}if(n.value.length===8){var l=n.value.substring(0,2),h=n.value.substring(2,4),d=n.value.substring(4,6),m=n.value.substring(6,8);return fd(parseInt(l,16),parseInt(h,16),parseInt(d,16),parseInt(m,16)/255)}}if(n.type===20){var o=Nh[n.value.toUpperCase()];if(typeof o<"u")return o}return Nh.TRANSPARENT}},vd=function(e){return(255&e)===0},tl=function(e){var n=255&e,i=255&e>>8,l=255&e>>16,h=255&e>>24;return n<255?"rgba("+h+","+l+","+i+","+n/255+")":"rgb("+h+","+l+","+i+")"},fd=function(e,n,i,l){return(e<<24|n<<16|i<<8|Math.round(l*255)<<0)>>>0},AB=function(e,n){if(e.type===17)return e.number;if(e.type===16){var i=n===3?1:255;return n===3?e.number/100*i:Math.round(e.number/100*i)}return 0},uB=function(e,n){var i=n.filter(vp);if(i.length===3){var l=i.map(AB),h=l[0],d=l[1],m=l[2];return fd(h,d,m,1)}if(i.length===4){var o=i.map(AB),h=o[0],d=o[1],m=o[2],x=o[3];return fd(h,d,m,x)}return 0};function v1(e,n,i){return i<0&&(i+=1),i>=1&&(i-=1),i<1/6?(n-e)*i*6+e:i<1/2?n:i<2/3?(n-e)*6*(2/3-i)+e:e}var hB=function(e,n){var i=n.filter(vp),l=i[0],h=i[1],d=i[2],m=i[3],o=(l.type===17?ru(l.number):Hy.parse(e,l))/(Math.PI*2),x=oa(h)?h.number/100:0,E=oa(d)?d.number/100:0,I=typeof m<"u"&&oa(m)?Ms(m,1):1;if(x===0)return fd(E*255,E*255,E*255,1);var D=E<=.5?E*(x+1):E+x-E*x,O=E*2-D,P=v1(O,D,o+1/3),W=v1(O,D,o),z=v1(O,D,o-1/3);return fd(P*255,W*255,z*255,I)},TQ={hsl:hB,hsla:hB,rgb:uB,rgba:uB},Fm=function(e,n){return yd.parse(e,rI.create(n).parseComponentValue())},Nh={ALICEBLUE:4042850303,ANTIQUEWHITE:4209760255,AQUA:16777215,AQUAMARINE:2147472639,AZURE:4043309055,BEIGE:4126530815,BISQUE:4293182719,BLACK:255,BLANCHEDALMOND:4293643775,BLUE:65535,BLUEVIOLET:2318131967,BROWN:2771004159,BURLYWOOD:3736635391,CADETBLUE:1604231423,CHARTREUSE:2147418367,CHOCOLATE:3530104575,CORAL:4286533887,CORNFLOWERBLUE:1687547391,CORNSILK:4294499583,CRIMSON:3692313855,CYAN:16777215,DARKBLUE:35839,DARKCYAN:9145343,DARKGOLDENROD:3095837695,DARKGRAY:2846468607,DARKGREEN:6553855,DARKGREY:2846468607,DARKKHAKI:3182914559,DARKMAGENTA:2332068863,DARKOLIVEGREEN:1433087999,DARKORANGE:4287365375,DARKORCHID:2570243327,DARKRED:2332033279,DARKSALMON:3918953215,DARKSEAGREEN:2411499519,DARKSLATEBLUE:1211993087,DARKSLATEGRAY:793726975,DARKSLATEGREY:793726975,DARKTURQUOISE:13554175,DARKVIOLET:2483082239,DEEPPINK:4279538687,DEEPSKYBLUE:12582911,DIMGRAY:1768516095,DIMGREY:1768516095,DODGERBLUE:512819199,FIREBRICK:2988581631,FLORALWHITE:4294635775,FORESTGREEN:579543807,FUCHSIA:4278255615,GAINSBORO:3705462015,GHOSTWHITE:4177068031,GOLD:4292280575,GOLDENROD:3668254975,GRAY:2155905279,GREEN:8388863,GREENYELLOW:2919182335,GREY:2155905279,HONEYDEW:4043305215,HOTPINK:4285117695,INDIANRED:3445382399,INDIGO:1258324735,IVORY:4294963455,KHAKI:4041641215,LAVENDER:3873897215,LAVENDERBLUSH:4293981695,LAWNGREEN:2096890111,LEMONCHIFFON:4294626815,LIGHTBLUE:2916673279,LIGHTCORAL:4034953471,LIGHTCYAN:3774873599,LIGHTGOLDENRODYELLOW:4210742015,LIGHTGRAY:3553874943,LIGHTGREEN:2431553791,LIGHTGREY:3553874943,LIGHTPINK:4290167295,LIGHTSALMON:4288707327,LIGHTSEAGREEN:548580095,LIGHTSKYBLUE:2278488831,LIGHTSLATEGRAY:2005441023,LIGHTSLATEGREY:2005441023,LIGHTSTEELBLUE:2965692159,LIGHTYELLOW:4294959359,LIME:16711935,LIMEGREEN:852308735,LINEN:4210091775,MAGENTA:4278255615,MAROON:2147483903,MEDIUMAQUAMARINE:1724754687,MEDIUMBLUE:52735,MEDIUMORCHID:3126187007,MEDIUMPURPLE:2473647103,MEDIUMSEAGREEN:1018393087,MEDIUMSLATEBLUE:2070474495,MEDIUMSPRINGGREEN:16423679,MEDIUMTURQUOISE:1221709055,MEDIUMVIOLETRED:3340076543,MIDNIGHTBLUE:421097727,MINTCREAM:4127193855,MISTYROSE:4293190143,MOCCASIN:4293178879,NAVAJOWHITE:4292783615,NAVY:33023,OLDLACE:4260751103,OLIVE:2155872511,OLIVEDRAB:1804477439,ORANGE:4289003775,ORANGERED:4282712319,ORCHID:3664828159,PALEGOLDENROD:4008225535,PALEGREEN:2566625535,PALETURQUOISE:2951671551,PALEVIOLETRED:3681588223,PAPAYAWHIP:4293907967,PEACHPUFF:4292524543,PERU:3448061951,PINK:4290825215,PLUM:3718307327,POWDERBLUE:2967529215,PURPLE:2147516671,REBECCAPURPLE:1714657791,RED:4278190335,ROSYBROWN:3163525119,ROYALBLUE:1097458175,SADDLEBROWN:2336560127,SALMON:4202722047,SANDYBROWN:4104413439,SEAGREEN:780883967,SEASHELL:4294307583,SIENNA:2689740287,SILVER:3233857791,SKYBLUE:2278484991,SLATEBLUE:1784335871,SLATEGRAY:1887473919,SLATEGREY:1887473919,SNOW:4294638335,SPRINGGREEN:16744447,STEELBLUE:1182971135,TAN:3535047935,TEAL:8421631,THISTLE:3636451583,TOMATO:4284696575,TRANSPARENT:0,TURQUOISE:1088475391,VIOLET:4001558271,WHEAT:4125012991,WHITE:4294967295,WHITESMOKE:4126537215,YELLOW:4294902015,YELLOWGREEN:2597139199},PQ={name:"background-clip",initialValue:"border-box",prefix:!1,type:1,parse:function(e,n){return n.map(function(i){if(us(i))switch(i.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},LQ={name:"background-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},jy=function(e,n){var i=yd.parse(e,n[0]),l=n[1];return l&&oa(l)?{color:i,stop:l}:{color:i,stop:null}},dB=function(e,n){var i=e[0],l=e[e.length-1];i.stop===null&&(i.stop=Bl),l.stop===null&&(l.stop=dd);for(var h=[],d=0,m=0;m<e.length;m++){var o=e[m].stop;if(o!==null){var x=Ms(o,n);x>d?h.push(x):h.push(d),d=x}else h.push(null)}for(var E=null,m=0;m<h.length;m++){var I=h[m];if(I===null)E===null&&(E=m);else if(E!==null){for(var D=m-E,O=h[E-1],P=(I-O)/(D+1),W=1;W<=D;W++)h[E+W-1]=P*W;E=null}}return e.map(function(z,H){var Z=z.color;return{color:Z,stop:Math.max(Math.min(1,h[H]/n),0)}})},MQ=function(e,n,i){var l=n/2,h=i/2,d=Ms(e[0],n)-l,m=h-Ms(e[1],i);return(Math.atan2(m,d)+Math.PI*2)%(Math.PI*2)},kQ=function(e,n,i){var l=typeof e=="number"?e:MQ(e,n,i),h=Math.abs(n*Math.sin(l))+Math.abs(i*Math.cos(l)),d=n/2,m=i/2,o=h/2,x=Math.sin(l-Math.PI/2)*o,E=Math.cos(l-Math.PI/2)*o;return[h,d-E,d+E,m-x,m+x]},Su=function(e,n){return Math.sqrt(e*e+n*n)},fB=function(e,n,i,l,h){var d=[[0,0],[0,n],[e,0],[e,n]];return d.reduce(function(m,o){var x=o[0],E=o[1],I=Su(i-x,l-E);return(h?I<m.optimumDistance:I>m.optimumDistance)?{optimumCorner:o,optimumDistance:I}:m},{optimumDistance:h?1/0:-1/0,optimumCorner:null}).optimumCorner},UQ=function(e,n,i,l,h){var d=0,m=0;switch(e.size){case 0:e.shape===0?d=m=Math.min(Math.abs(n),Math.abs(n-l),Math.abs(i),Math.abs(i-h)):e.shape===1&&(d=Math.min(Math.abs(n),Math.abs(n-l)),m=Math.min(Math.abs(i),Math.abs(i-h)));break;case 2:if(e.shape===0)d=m=Math.min(Su(n,i),Su(n,i-h),Su(n-l,i),Su(n-l,i-h));else if(e.shape===1){var o=Math.min(Math.abs(i),Math.abs(i-h))/Math.min(Math.abs(n),Math.abs(n-l)),x=fB(l,h,n,i,!0),E=x[0],I=x[1];d=Su(E-n,(I-i)/o),m=o*d}break;case 1:e.shape===0?d=m=Math.max(Math.abs(n),Math.abs(n-l),Math.abs(i),Math.abs(i-h)):e.shape===1&&(d=Math.max(Math.abs(n),Math.abs(n-l)),m=Math.max(Math.abs(i),Math.abs(i-h)));break;case 3:if(e.shape===0)d=m=Math.max(Su(n,i),Su(n,i-h),Su(n-l,i),Su(n-l,i-h));else if(e.shape===1){var o=Math.max(Math.abs(i),Math.abs(i-h))/Math.max(Math.abs(n),Math.abs(n-l)),D=fB(l,h,n,i,!1),E=D[0],I=D[1];d=Su(E-n,(I-i)/o),m=o*d}break}return Array.isArray(e.size)&&(d=Ms(e.size[0],l),m=e.size.length===2?Ms(e.size[1],h):d),[d,m]},DQ=function(e,n){var i=ru(180),l=[];return oh(n).forEach(function(h,d){if(d===0){var m=h[0];if(m.type===20&&m.value==="to"){i=AI(h);return}else if(cI(m)){i=Hy.parse(e,m);return}}var o=jy(e,h);l.push(o)}),{angle:i,stops:l,type:1}},A0=function(e,n){var i=ru(180),l=[];return oh(n).forEach(function(h,d){if(d===0){var m=h[0];if(m.type===20&&["top","left","right","bottom"].indexOf(m.value)!==-1){i=AI(h);return}else if(cI(m)){i=(Hy.parse(e,m)+ru(270))%ru(360);return}}var o=jy(e,h);l.push(o)}),{angle:i,stops:l,type:1}},RQ=function(e,n){var i=ru(180),l=[],h=1,d=0,m=3,o=[];return oh(n).forEach(function(x,E){var I=x[0];if(E===0){if(us(I)&&I.value==="linear"){h=1;return}else if(us(I)&&I.value==="radial"){h=2;return}}if(I.type===18){if(I.name==="from"){var D=yd.parse(e,I.values[0]);l.push({stop:Bl,color:D})}else if(I.name==="to"){var D=yd.parse(e,I.values[0]);l.push({stop:dd,color:D})}else if(I.name==="color-stop"){var O=I.values.filter(vp);if(O.length===2){var D=yd.parse(e,O[1]),P=O[0];Ep(P)&&l.push({stop:{type:16,number:P.number*100,flags:P.flags},color:D})}}}}),h===1?{angle:(i+ru(180))%ru(360),stops:l,type:h}:{size:m,shape:d,stops:l,position:o,type:h}},uI="closest-side",hI="farthest-side",dI="closest-corner",fI="farthest-corner",pI="circle",mI="ellipse",gI="cover",yI="contain",NQ=function(e,n){var i=0,l=3,h=[],d=[];return oh(n).forEach(function(m,o){var x=!0;if(o===0){var E=!1;x=m.reduce(function(D,O){if(E)if(us(O))switch(O.value){case"center":return d.push(nx),D;case"top":case"left":return d.push(Bl),D;case"right":case"bottom":return d.push(dd),D}else(oa(O)||bd(O))&&d.push(O);else if(us(O))switch(O.value){case pI:return i=0,!1;case mI:return i=1,!1;case"at":return E=!0,!1;case uI:return l=0,!1;case gI:case hI:return l=1,!1;case yI:case dI:return l=2,!1;case fI:return l=3,!1}else if(bd(O)||oa(O))return Array.isArray(l)||(l=[]),l.push(O),!1;return D},x)}if(x){var I=jy(e,m);h.push(I)}}),{size:l,shape:i,stops:h,position:d,type:2}},u0=function(e,n){var i=0,l=3,h=[],d=[];return oh(n).forEach(function(m,o){var x=!0;if(o===0?x=m.reduce(function(I,D){if(us(D))switch(D.value){case"center":return d.push(nx),!1;case"top":case"left":return d.push(Bl),!1;case"right":case"bottom":return d.push(dd),!1}else if(oa(D)||bd(D))return d.push(D),!1;return I},x):o===1&&(x=m.reduce(function(I,D){if(us(D))switch(D.value){case pI:return i=0,!1;case mI:return i=1,!1;case yI:case uI:return l=0,!1;case hI:return l=1,!1;case dI:return l=2,!1;case gI:case fI:return l=3,!1}else if(bd(D)||oa(D))return Array.isArray(l)||(l=[]),l.push(D),!1;return I},x)),x){var E=jy(e,m);h.push(E)}}),{size:l,shape:i,stops:h,position:d,type:2}},QQ=function(e){return e.type===1},OQ=function(e){return e.type===2},ix={name:"image",parse:function(e,n){if(n.type===22){var i={url:n.value,type:0};return e.cache.addImage(n.value),i}if(n.type===18){var l=vI[n.name];if(typeof l>"u")throw new Error('Attempting to parse an unsupported image function "'+n.name+'"');return l(e,n.values)}throw new Error("Unsupported image type "+n.type)}};function zQ(e){return!(e.type===20&&e.value==="none")&&(e.type!==18||!!vI[e.name])}var vI={"linear-gradient":DQ,"-moz-linear-gradient":A0,"-ms-linear-gradient":A0,"-o-linear-gradient":A0,"-webkit-linear-gradient":A0,"radial-gradient":NQ,"-moz-radial-gradient":u0,"-ms-radial-gradient":u0,"-o-radial-gradient":u0,"-webkit-radial-gradient":u0,"-webkit-gradient":RQ},HQ={name:"background-image",initialValue:"none",type:1,prefix:!1,parse:function(e,n){if(n.length===0)return[];var i=n[0];return i.type===20&&i.value==="none"?[]:n.filter(function(l){return vp(l)&&zQ(l)}).map(function(l){return ix.parse(e,l)})}},jQ={name:"background-origin",initialValue:"border-box",prefix:!1,type:1,parse:function(e,n){return n.map(function(i){if(us(i))switch(i.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},VQ={name:"background-position",initialValue:"0% 0%",type:1,prefix:!1,parse:function(e,n){return oh(n).map(function(i){return i.filter(oa)}).map(iI)}},GQ={name:"background-repeat",initialValue:"repeat",prefix:!1,type:1,parse:function(e,n){return oh(n).map(function(i){return i.filter(us).map(function(l){return l.value}).join(" ")}).map(KQ)}},KQ=function(e){switch(e){case"no-repeat":return 1;case"repeat-x":case"repeat no-repeat":return 2;case"repeat-y":case"no-repeat repeat":return 3;case"repeat":default:return 0}},up;(function(e){e.AUTO="auto",e.CONTAIN="contain",e.COVER="cover"})(up||(up={}));var qQ={name:"background-size",initialValue:"0",prefix:!1,type:1,parse:function(e,n){return oh(n).map(function(i){return i.filter($Q)})}},$Q=function(e){return us(e)||oa(e)},Vy=function(e){return{name:"border-"+e+"-color",initialValue:"transparent",prefix:!1,type:3,format:"color"}},WQ=Vy("top"),ZQ=Vy("right"),XQ=Vy("bottom"),YQ=Vy("left"),Gy=function(e){return{name:"border-radius-"+e,initialValue:"0 0",prefix:!1,type:1,parse:function(n,i){return iI(i.filter(oa))}}},JQ=Gy("top-left"),eO=Gy("top-right"),tO=Gy("bottom-right"),rO=Gy("bottom-left"),Ky=function(e){return{name:"border-"+e+"-style",initialValue:"solid",prefix:!1,type:2,parse:function(n,i){switch(i){case"none":return 0;case"dashed":return 2;case"dotted":return 3;case"double":return 4}return 1}}},nO=Ky("top"),iO=Ky("right"),sO=Ky("bottom"),oO=Ky("left"),qy=function(e){return{name:"border-"+e+"-width",initialValue:"0",type:0,prefix:!1,parse:function(n,i){return eg(i)?i.number:0}}},aO=qy("top"),lO=qy("right"),cO=qy("bottom"),AO=qy("left"),uO={name:"color",initialValue:"transparent",prefix:!1,type:3,format:"color"},hO={name:"direction",initialValue:"ltr",prefix:!1,type:2,parse:function(e,n){switch(n){case"rtl":return 1;case"ltr":default:return 0}}},dO={name:"display",initialValue:"inline-block",prefix:!1,type:1,parse:function(e,n){return n.filter(us).reduce(function(i,l){return i|fO(l.value)},0)}},fO=function(e){switch(e){case"block":case"-webkit-box":return 2;case"inline":return 4;case"run-in":return 8;case"flow":return 16;case"flow-root":return 32;case"table":return 64;case"flex":case"-webkit-flex":return 128;case"grid":case"-ms-grid":return 256;case"ruby":return 512;case"subgrid":return 1024;case"list-item":return 2048;case"table-row-group":return 4096;case"table-header-group":return 8192;case"table-footer-group":return 16384;case"table-row":return 32768;case"table-cell":return 65536;case"table-column-group":return 131072;case"table-column":return 262144;case"table-caption":return 524288;case"ruby-base":return 1048576;case"ruby-text":return 2097152;case"ruby-base-container":return 4194304;case"ruby-text-container":return 8388608;case"contents":return 16777216;case"inline-block":return 33554432;case"inline-list-item":return 67108864;case"inline-table":return 134217728;case"inline-flex":return 268435456;case"inline-grid":return 536870912}return 0},pO={name:"float",initialValue:"none",prefix:!1,type:2,parse:function(e,n){switch(n){case"left":return 1;case"right":return 2;case"inline-start":return 3;case"inline-end":return 4}return 0}},mO={name:"letter-spacing",initialValue:"0",prefix:!1,type:0,parse:function(e,n){return n.type===20&&n.value==="normal"?0:n.type===17||n.type===15?n.number:0}},ty;(function(e){e.NORMAL="normal",e.STRICT="strict"})(ty||(ty={}));var gO={name:"line-break",initialValue:"normal",prefix:!1,type:2,parse:function(e,n){switch(n){case"strict":return ty.STRICT;case"normal":default:return ty.NORMAL}}},yO={name:"line-height",initialValue:"normal",prefix:!1,type:4},pB=function(e,n){return us(e)&&e.value==="normal"?1.2*n:e.type===17?n*e.number:oa(e)?Ms(e,n):n},vO={name:"list-style-image",initialValue:"none",type:0,prefix:!1,parse:function(e,n){return n.type===20&&n.value==="none"?null:ix.parse(e,n)}},_O={name:"list-style-position",initialValue:"outside",prefix:!1,type:2,parse:function(e,n){switch(n){case"inside":return 0;case"outside":default:return 1}}},J_={name:"list-style-type",initialValue:"none",prefix:!1,type:2,parse:function(e,n){switch(n){case"disc":return 0;case"circle":return 1;case"square":return 2;case"decimal":return 3;case"cjk-decimal":return 4;case"decimal-leading-zero":return 5;case"lower-roman":return 6;case"upper-roman":return 7;case"lower-greek":return 8;case"lower-alpha":return 9;case"upper-alpha":return 10;case"arabic-indic":return 11;case"armenian":return 12;case"bengali":return 13;case"cambodian":return 14;case"cjk-earthly-branch":return 15;case"cjk-heavenly-stem":return 16;case"cjk-ideographic":return 17;case"devanagari":return 18;case"ethiopic-numeric":return 19;case"georgian":return 20;case"gujarati":return 21;case"gurmukhi":return 22;case"hebrew":return 22;case"hiragana":return 23;case"hiragana-iroha":return 24;case"japanese-formal":return 25;case"japanese-informal":return 26;case"kannada":return 27;case"katakana":return 28;case"katakana-iroha":return 29;case"khmer":return 30;case"korean-hangul-formal":return 31;case"korean-hanja-formal":return 32;case"korean-hanja-informal":return 33;case"lao":return 34;case"lower-armenian":return 35;case"malayalam":return 36;case"mongolian":return 37;case"myanmar":return 38;case"oriya":return 39;case"persian":return 40;case"simp-chinese-formal":return 41;case"simp-chinese-informal":return 42;case"tamil":return 43;case"telugu":return 44;case"thai":return 45;case"tibetan":return 46;case"trad-chinese-formal":return 47;case"trad-chinese-informal":return 48;case"upper-armenian":return 49;case"disclosure-open":return 50;case"disclosure-closed":return 51;case"none":default:return-1}}},$y=function(e){return{name:"margin-"+e,initialValue:"0",prefix:!1,type:4}},wO=$y("top"),xO=$y("right"),bO=$y("bottom"),BO=$y("left"),CO={name:"overflow",initialValue:"visible",prefix:!1,type:1,parse:function(e,n){return n.filter(us).map(function(i){switch(i.value){case"hidden":return 1;case"scroll":return 2;case"clip":return 3;case"auto":return 4;case"visible":default:return 0}})}},EO={name:"overflow-wrap",initialValue:"normal",prefix:!1,type:2,parse:function(e,n){switch(n){case"break-word":return"break-word";case"normal":default:return"normal"}}},Wy=function(e){return{name:"padding-"+e,initialValue:"0",prefix:!1,type:3,format:"length-percentage"}},SO=Wy("top"),FO=Wy("right"),IO=Wy("bottom"),TO=Wy("left"),PO={name:"text-align",initialValue:"left",prefix:!1,type:2,parse:function(e,n){switch(n){case"right":return 2;case"center":case"justify":return 1;case"left":default:return 0}}},LO={name:"position",initialValue:"static",prefix:!1,type:2,parse:function(e,n){switch(n){case"relative":return 1;case"absolute":return 2;case"fixed":return 3;case"sticky":return 4}return 0}},MO={name:"text-shadow",initialValue:"none",type:1,prefix:!1,parse:function(e,n){return n.length===1&&Y_(n[0],"none")?[]:oh(n).map(function(i){for(var l={color:Nh.TRANSPARENT,offsetX:Bl,offsetY:Bl,blur:Bl},h=0,d=0;d<i.length;d++){var m=i[d];bd(m)?(h===0?l.offsetX=m:h===1?l.offsetY=m:l.blur=m,h++):l.color=yd.parse(e,m)}return l})}},kO={name:"text-transform",initialValue:"none",prefix:!1,type:2,parse:function(e,n){switch(n){case"uppercase":return 2;case"lowercase":return 1;case"capitalize":return 3}return 0}},UO={name:"transform",initialValue:"none",prefix:!0,type:0,parse:function(e,n){if(n.type===20&&n.value==="none")return null;if(n.type===18){var i=NO[n.name];if(typeof i>"u")throw new Error('Attempting to parse an unsupported transform function "'+n.name+'"');return i(n.values)}return null}},DO=function(e){var n=e.filter(function(i){return i.type===17}).map(function(i){return i.number});return n.length===6?n:null},RO=function(e){var n=e.filter(function(x){return x.type===17}).map(function(x){return x.number}),i=n[0],l=n[1];n[2],n[3];var h=n[4],d=n[5];n[6],n[7],n[8],n[9],n[10],n[11];var m=n[12],o=n[13];return n[14],n[15],n.length===16?[i,l,h,d,m,o]:null},NO={matrix:DO,matrix3d:RO},mB={type:16,number:50,flags:Jm},QO=[mB,mB],OO={name:"transform-origin",initialValue:"50% 50%",prefix:!0,type:1,parse:function(e,n){var i=n.filter(oa);return i.length!==2?QO:[i[0],i[1]]}},zO={name:"visible",initialValue:"none",prefix:!1,type:2,parse:function(e,n){switch(n){case"hidden":return 1;case"collapse":return 2;case"visible":default:return 0}}},Im;(function(e){e.NORMAL="normal",e.BREAK_ALL="break-all",e.KEEP_ALL="keep-all"})(Im||(Im={}));var HO={name:"word-break",initialValue:"normal",prefix:!1,type:2,parse:function(e,n){switch(n){case"break-all":return Im.BREAK_ALL;case"keep-all":return Im.KEEP_ALL;case"normal":default:return Im.NORMAL}}},jO={name:"z-index",initialValue:"auto",prefix:!1,type:0,parse:function(e,n){if(n.type===20)return{auto:!0,order:0};if(Ep(n))return{auto:!1,order:n.number};throw new Error("Invalid z-index number parsed")}},_I={name:"time",parse:function(e,n){if(n.type===15)switch(n.unit.toLowerCase()){case"s":return 1e3*n.number;case"ms":return n.number}throw new Error("Unsupported time type")}},VO={name:"opacity",initialValue:"1",type:0,prefix:!1,parse:function(e,n){return Ep(n)?n.number:1}},GO={name:"text-decoration-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},KO={name:"text-decoration-line",initialValue:"none",prefix:!1,type:1,parse:function(e,n){return n.filter(us).map(function(i){switch(i.value){case"underline":return 1;case"overline":return 2;case"line-through":return 3;case"none":return 4}return 0}).filter(function(i){return i!==0})}},qO={name:"font-family",initialValue:"",prefix:!1,type:1,parse:function(e,n){var i=[],l=[];return n.forEach(function(h){switch(h.type){case 20:case 0:i.push(h.value);break;case 17:i.push(h.number.toString());break;case 4:l.push(i.join(" ")),i.length=0;break}}),i.length&&l.push(i.join(" ")),l.map(function(h){return h.indexOf(" ")===-1?h:"'"+h+"'"})}},$O={name:"font-size",initialValue:"0",prefix:!1,type:3,format:"length"},WO={name:"font-weight",initialValue:"normal",type:0,prefix:!1,parse:function(e,n){if(Ep(n))return n.number;if(us(n))switch(n.value){case"bold":return 700;case"normal":default:return 400}return 400}},ZO={name:"font-variant",initialValue:"none",type:1,prefix:!1,parse:function(e,n){return n.filter(us).map(function(i){return i.value})}},XO={name:"font-style",initialValue:"normal",prefix:!1,type:2,parse:function(e,n){switch(n){case"oblique":return"oblique";case"italic":return"italic";case"normal":default:return"normal"}}},ba=function(e,n){return(e&n)!==0},YO={name:"content",initialValue:"none",type:1,prefix:!1,parse:function(e,n){if(n.length===0)return[];var i=n[0];return i.type===20&&i.value==="none"?[]:n}},JO={name:"counter-increment",initialValue:"none",prefix:!0,type:1,parse:function(e,n){if(n.length===0)return null;var i=n[0];if(i.type===20&&i.value==="none")return null;for(var l=[],h=n.filter(nI),d=0;d<h.length;d++){var m=h[d],o=h[d+1];if(m.type===20){var x=o&&Ep(o)?o.number:1;l.push({counter:m.value,increment:x})}}return l}},e8={name:"counter-reset",initialValue:"none",prefix:!0,type:1,parse:function(e,n){if(n.length===0)return[];for(var i=[],l=n.filter(nI),h=0;h<l.length;h++){var d=l[h],m=l[h+1];if(us(d)&&d.value!=="none"){var o=m&&Ep(m)?m.number:0;i.push({counter:d.value,reset:o})}}return i}},t8={name:"duration",initialValue:"0s",prefix:!1,type:1,parse:function(e,n){return n.filter(eg).map(function(i){return _I.parse(e,i)})}},r8={name:"quotes",initialValue:"none",prefix:!0,type:1,parse:function(e,n){if(n.length===0)return null;var i=n[0];if(i.type===20&&i.value==="none")return null;var l=[],h=n.filter(FQ);if(h.length%2!==0)return null;for(var d=0;d<h.length;d+=2){var m=h[d].value,o=h[d+1].value;l.push({open:m,close:o})}return l}},gB=function(e,n,i){if(!e)return"";var l=e[Math.min(n,e.length-1)];return l?i?l.open:l.close:""},n8={name:"box-shadow",initialValue:"none",type:1,prefix:!1,parse:function(e,n){return n.length===1&&Y_(n[0],"none")?[]:oh(n).map(function(i){for(var l={color:255,offsetX:Bl,offsetY:Bl,blur:Bl,spread:Bl,inset:!1},h=0,d=0;d<i.length;d++){var m=i[d];Y_(m,"inset")?l.inset=!0:bd(m)?(h===0?l.offsetX=m:h===1?l.offsetY=m:h===2?l.blur=m:l.spread=m,h++):l.color=yd.parse(e,m)}return l})}},i8={name:"paint-order",initialValue:"normal",prefix:!1,type:1,parse:function(e,n){var i=[0,1,2],l=[];return n.filter(us).forEach(function(h){switch(h.value){case"stroke":l.push(1);break;case"fill":l.push(0);break;case"markers":l.push(2);break}}),i.forEach(function(h){l.indexOf(h)===-1&&l.push(h)}),l}},s8={name:"-webkit-text-stroke-color",initialValue:"currentcolor",prefix:!1,type:3,format:"color"},o8={name:"-webkit-text-stroke-width",initialValue:"0",type:0,prefix:!1,parse:function(e,n){return eg(n)?n.number:0}},a8=(function(){function e(n,i){var l,h;this.animationDuration=Yr(n,t8,i.animationDuration),this.backgroundClip=Yr(n,PQ,i.backgroundClip),this.backgroundColor=Yr(n,LQ,i.backgroundColor),this.backgroundImage=Yr(n,HQ,i.backgroundImage),this.backgroundOrigin=Yr(n,jQ,i.backgroundOrigin),this.backgroundPosition=Yr(n,VQ,i.backgroundPosition),this.backgroundRepeat=Yr(n,GQ,i.backgroundRepeat),this.backgroundSize=Yr(n,qQ,i.backgroundSize),this.borderTopColor=Yr(n,WQ,i.borderTopColor),this.borderRightColor=Yr(n,ZQ,i.borderRightColor),this.borderBottomColor=Yr(n,XQ,i.borderBottomColor),this.borderLeftColor=Yr(n,YQ,i.borderLeftColor),this.borderTopLeftRadius=Yr(n,JQ,i.borderTopLeftRadius),this.borderTopRightRadius=Yr(n,eO,i.borderTopRightRadius),this.borderBottomRightRadius=Yr(n,tO,i.borderBottomRightRadius),this.borderBottomLeftRadius=Yr(n,rO,i.borderBottomLeftRadius),this.borderTopStyle=Yr(n,nO,i.borderTopStyle),this.borderRightStyle=Yr(n,iO,i.borderRightStyle),this.borderBottomStyle=Yr(n,sO,i.borderBottomStyle),this.borderLeftStyle=Yr(n,oO,i.borderLeftStyle),this.borderTopWidth=Yr(n,aO,i.borderTopWidth),this.borderRightWidth=Yr(n,lO,i.borderRightWidth),this.borderBottomWidth=Yr(n,cO,i.borderBottomWidth),this.borderLeftWidth=Yr(n,AO,i.borderLeftWidth),this.boxShadow=Yr(n,n8,i.boxShadow),this.color=Yr(n,uO,i.color),this.direction=Yr(n,hO,i.direction),this.display=Yr(n,dO,i.display),this.float=Yr(n,pO,i.cssFloat),this.fontFamily=Yr(n,qO,i.fontFamily),this.fontSize=Yr(n,$O,i.fontSize),this.fontStyle=Yr(n,XO,i.fontStyle),this.fontVariant=Yr(n,ZO,i.fontVariant),this.fontWeight=Yr(n,WO,i.fontWeight),this.letterSpacing=Yr(n,mO,i.letterSpacing),this.lineBreak=Yr(n,gO,i.lineBreak),this.lineHeight=Yr(n,yO,i.lineHeight),this.listStyleImage=Yr(n,vO,i.listStyleImage),this.listStylePosition=Yr(n,_O,i.listStylePosition),this.listStyleType=Yr(n,J_,i.listStyleType),this.marginTop=Yr(n,wO,i.marginTop),this.marginRight=Yr(n,xO,i.marginRight),this.marginBottom=Yr(n,bO,i.marginBottom),this.marginLeft=Yr(n,BO,i.marginLeft),this.opacity=Yr(n,VO,i.opacity);var d=Yr(n,CO,i.overflow);this.overflowX=d[0],this.overflowY=d[d.length>1?1:0],this.overflowWrap=Yr(n,EO,i.overflowWrap),this.paddingTop=Yr(n,SO,i.paddingTop),this.paddingRight=Yr(n,FO,i.paddingRight),this.paddingBottom=Yr(n,IO,i.paddingBottom),this.paddingLeft=Yr(n,TO,i.paddingLeft),this.paintOrder=Yr(n,i8,i.paintOrder),this.position=Yr(n,LO,i.position),this.textAlign=Yr(n,PO,i.textAlign),this.textDecorationColor=Yr(n,GO,(l=i.textDecorationColor)!==null&&l!==void 0?l:i.color),this.textDecorationLine=Yr(n,KO,(h=i.textDecorationLine)!==null&&h!==void 0?h:i.textDecoration),this.textShadow=Yr(n,MO,i.textShadow),this.textTransform=Yr(n,kO,i.textTransform),this.transform=Yr(n,UO,i.transform),this.transformOrigin=Yr(n,OO,i.transformOrigin),this.visibility=Yr(n,zO,i.visibility),this.webkitTextStrokeColor=Yr(n,s8,i.webkitTextStrokeColor),this.webkitTextStrokeWidth=Yr(n,o8,i.webkitTextStrokeWidth),this.wordBreak=Yr(n,HO,i.wordBreak),this.zIndex=Yr(n,jO,i.zIndex)}return e.prototype.isVisible=function(){return this.display>0&&this.opacity>0&&this.visibility===0},e.prototype.isTransparent=function(){return vd(this.backgroundColor)},e.prototype.isTransformed=function(){return this.transform!==null},e.prototype.isPositioned=function(){return this.position!==0},e.prototype.isPositionedWithZIndex=function(){return this.isPositioned()&&!this.zIndex.auto},e.prototype.isFloating=function(){return this.float!==0},e.prototype.isInlineLevel=function(){return ba(this.display,4)||ba(this.display,33554432)||ba(this.display,268435456)||ba(this.display,536870912)||ba(this.display,67108864)||ba(this.display,134217728)},e})(),l8=(function(){function e(n,i){this.content=Yr(n,YO,i.content),this.quotes=Yr(n,r8,i.quotes)}return e})(),yB=(function(){function e(n,i){this.counterIncrement=Yr(n,JO,i.counterIncrement),this.counterReset=Yr(n,e8,i.counterReset)}return e})(),Yr=function(e,n,i){var l=new tI,h=i!==null&&typeof i<"u"?i.toString():n.initialValue;l.write(h);var d=new rI(l.read());switch(n.type){case 2:var m=d.parseComponentValue();return n.parse(e,us(m)?m.value:n.initialValue);case 0:return n.parse(e,d.parseComponentValue());case 1:return n.parse(e,d.parseComponentValues());case 4:return d.parseComponentValue();case 3:switch(n.format){case"angle":return Hy.parse(e,d.parseComponentValue());case"color":return yd.parse(e,d.parseComponentValue());case"image":return ix.parse(e,d.parseComponentValue());case"length":var o=d.parseComponentValue();return bd(o)?o:Bl;case"length-percentage":var x=d.parseComponentValue();return oa(x)?x:Bl;case"time":return _I.parse(e,d.parseComponentValue())}break}},c8="data-html2canvas-debug",A8=function(e){var n=e.getAttribute(c8);switch(n){case"all":return 1;case"clone":return 2;case"parse":return 3;case"render":return 4;default:return 0}},ew=function(e,n){var i=A8(e);return i===1||n===i},ah=(function(){function e(n,i){if(this.context=n,this.textNodes=[],this.elements=[],this.flags=0,ew(i,3))debugger;this.styles=new a8(n,window.getComputedStyle(i,null)),nw(i)&&(this.styles.animationDuration.some(function(l){return l>0})&&(i.style.animationDuration="0s"),this.styles.transform!==null&&(i.style.transform="none")),this.bounds=Oy(this.context,i),ew(i,4)&&(this.flags|=16)}return e})(),u8="AAAAAAAAAAAAEA4AGBkAAFAaAAACAAAAAAAIABAAGAAwADgACAAQAAgAEAAIABAACAAQAAgAEAAIABAACAAQAAgAEAAIABAAQABIAEQATAAIABAACAAQAAgAEAAIABAAVABcAAgAEAAIABAACAAQAGAAaABwAHgAgACIAI4AlgAIABAAmwCjAKgAsAC2AL4AvQDFAMoA0gBPAVYBWgEIAAgACACMANoAYgFkAWwBdAF8AX0BhQGNAZUBlgGeAaMBlQGWAasBswF8AbsBwwF0AcsBYwHTAQgA2wG/AOMBdAF8AekB8QF0AfkB+wHiAHQBfAEIAAMC5gQIAAsCEgIIAAgAFgIeAggAIgIpAggAMQI5AkACygEIAAgASAJQAlgCYAIIAAgACAAKBQoFCgUTBRMFGQUrBSsFCAAIAAgACAAIAAgACAAIAAgACABdAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABoAmgCrwGvAQgAbgJ2AggAHgEIAAgACADnAXsCCAAIAAgAgwIIAAgACAAIAAgACACKAggAkQKZAggAPADJAAgAoQKkAqwCsgK6AsICCADJAggA0AIIAAgACAAIANYC3gIIAAgACAAIAAgACABAAOYCCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAkASoB+QIEAAgACAA8AEMCCABCBQgACABJBVAFCAAIAAgACAAIAAgACAAIAAgACABTBVoFCAAIAFoFCABfBWUFCAAIAAgACAAIAAgAbQUIAAgACAAIAAgACABzBXsFfQWFBYoFigWKBZEFigWKBYoFmAWfBaYFrgWxBbkFCAAIAAgACAAIAAgACAAIAAgACAAIAMEFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAMgFCADQBQgACAAIAAgACAAIAAgACAAIAAgACAAIAO4CCAAIAAgAiQAIAAgACABAAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAD0AggACAD8AggACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIANYFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAMDvwAIAAgAJAIIAAgACAAIAAgACAAIAAgACwMTAwgACAB9BOsEGwMjAwgAKwMyAwsFYgE3A/MEPwMIAEUDTQNRAwgAWQOsAGEDCAAIAAgACAAIAAgACABpAzQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFIQUoBSwFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABtAwgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABMAEwACAAIAAgACAAIABgACAAIAAgACAC/AAgACAAyAQgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACAAIAAwAAgACAAIAAgACAAIAAgACAAIAAAARABIAAgACAAIABQASAAIAAgAIABwAEAAjgCIABsAqAC2AL0AigDQAtwC+IJIQqVAZUBWQqVAZUBlQGVAZUBlQGrC5UBlQGVAZUBlQGVAZUBlQGVAXsKlQGVAbAK6wsrDGUMpQzlDJUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAfAKAAuZA64AtwCJALoC6ADwAAgAuACgA/oEpgO6AqsD+AAIAAgAswMIAAgACAAIAIkAuwP5AfsBwwPLAwgACAAIAAgACADRA9kDCAAIAOED6QMIAAgACAAIAAgACADuA/YDCAAIAP4DyQAIAAgABgQIAAgAXQAOBAgACAAIAAgACAAIABMECAAIAAgACAAIAAgACAD8AAQBCAAIAAgAGgQiBCoECAExBAgAEAEIAAgACAAIAAgACAAIAAgACAAIAAgACAA4BAgACABABEYECAAIAAgATAQYAQgAVAQIAAgACAAIAAgACAAIAAgACAAIAFoECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAOQEIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAB+BAcACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAEABhgSMBAgACAAIAAgAlAQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAwAEAAQABAADAAMAAwADAAQABAAEAAQABAAEAAQABHATAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAdQMIAAgACAAIAAgACAAIAMkACAAIAAgAfQMIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACFA4kDCAAIAAgACAAIAOcBCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAIcDCAAIAAgACAAIAAgACAAIAAgACAAIAJEDCAAIAAgACADFAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABgBAgAZgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAbAQCBXIECAAIAHkECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABAAJwEQACjBKoEsgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAC6BMIECAAIAAgACAAIAAgACABmBAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAxwQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAGYECAAIAAgAzgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBd0FXwUIAOIF6gXxBYoF3gT5BQAGCAaKBYoFigWKBYoFigWKBYoFigWKBYoFigXWBIoFigWKBYoFigWKBYoFigWKBYsFEAaKBYoFigWKBYoFigWKBRQGCACKBYoFigWKBQgACAAIANEECAAIABgGigUgBggAJgYIAC4GMwaKBYoF0wQ3Bj4GigWKBYoFigWKBYoFigWKBYoFigWKBYoFigUIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWLBf///////wQABAAEAAQABAAEAAQABAAEAAQAAwAEAAQAAgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAQADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUAAAAFAAUAAAAFAAUAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAQAAAAUABQAFAAUABQAFAAAAAAAFAAUAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAFAAUAAQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAAABwAHAAcAAAAHAAcABwAFAAEAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAcABwAFAAUAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAQABAAAAAAAAAAAAAAAFAAUABQAFAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAHAAcAAAAHAAcAAAAAAAUABQAHAAUAAQAHAAEABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwABAAUABQAFAAUAAAAAAAAAAAAAAAEAAQABAAEAAQABAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABQANAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAABQAHAAUABQAFAAAAAAAAAAcABQAFAAUABQAFAAQABAAEAAQABAAEAAQABAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUAAAAFAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAUAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAcABwAFAAcABwAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUABwAHAAUABQAFAAUAAAAAAAcABwAAAAAABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAAAAAAAAAAABQAFAAAAAAAFAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAFAAUABQAFAAUAAAAFAAUABwAAAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABwAFAAUABQAFAAAAAAAHAAcAAAAAAAcABwAFAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAAAAAAAAAHAAcABwAAAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAUABQAFAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAHAAcABQAHAAcAAAAFAAcABwAAAAcABwAFAAUAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAFAAcABwAFAAUABQAAAAUAAAAHAAcABwAHAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAHAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUAAAAFAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAUAAAAFAAUAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABwAFAAUABQAFAAUABQAAAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABQAFAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAFAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAHAAUABQAFAAUABQAFAAUABwAHAAcABwAHAAcABwAHAAUABwAHAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABwAHAAcABwAFAAUABwAHAAcAAAAAAAAAAAAHAAcABQAHAAcABwAHAAcABwAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAUABQAFAAUABQAFAAUAAAAFAAAABQAAAAAABQAFAAUABQAFAAUABQAFAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAUABQAFAAUABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABwAFAAcABwAHAAcABwAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAUABQAFAAUABwAHAAUABQAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABQAFAAcABwAHAAUABwAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAcABQAFAAUABQAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAAAAAABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAAAAAAAAAFAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAUABQAHAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAFAAUABQAFAAcABwAFAAUABwAHAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAcABwAFAAUABwAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABQAAAAAABQAFAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAcABwAAAAAAAAAAAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAcABwAFAAcABwAAAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAFAAUABQAAAAUABQAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABwAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAHAAcABQAHAAUABQAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAAABwAHAAAAAAAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAFAAUABwAFAAcABwAFAAcABQAFAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAAAAAABwAHAAcABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAFAAcABwAFAAUABQAFAAUABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAUABQAFAAcABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABQAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAAAAAAFAAUABwAHAAcABwAFAAAAAAAAAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAHAAUABQAFAAUABQAFAAUABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAABQAAAAUABQAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAHAAcAAAAFAAUAAAAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABQAFAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAABQAFAAUABQAFAAUABQAAAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAFAAUABQAFAAUADgAOAA4ADgAOAA4ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAMAAwADAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkAAAAAAAAAAAAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAAAAAAAAAAAAsADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwACwAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAADgAOAA4AAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAAAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4AAAAOAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAAAAAAAAAAAA4AAAAOAAAAAAAAAAAADgAOAA4AAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAA=",vB="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",wm=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var h0=0;h0<vB.length;h0++)wm[vB.charCodeAt(h0)]=h0;var h8=function(e){var n=e.length*.75,i=e.length,l,h=0,d,m,o,x;e[e.length-1]==="="&&(n--,e[e.length-2]==="="&&n--);var E=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(n):new Array(n),I=Array.isArray(E)?E:new Uint8Array(E);for(l=0;l<i;l+=4)d=wm[e.charCodeAt(l)],m=wm[e.charCodeAt(l+1)],o=wm[e.charCodeAt(l+2)],x=wm[e.charCodeAt(l+3)],I[h++]=d<<2|m>>4,I[h++]=(m&15)<<4|o>>2,I[h++]=(o&3)<<6|x&63;return E},d8=function(e){for(var n=e.length,i=[],l=0;l<n;l+=2)i.push(e[l+1]<<8|e[l]);return i},f8=function(e){for(var n=e.length,i=[],l=0;l<n;l+=4)i.push(e[l+3]<<24|e[l+2]<<16|e[l+1]<<8|e[l]);return i},ef=5,sx=11,_1=2,p8=sx-ef,wI=65536>>ef,m8=1<<ef,w1=m8-1,g8=1024>>ef,y8=wI+g8,v8=y8,_8=32,w8=v8+_8,x8=65536>>sx,b8=1<<p8,B8=b8-1,_B=function(e,n,i){return e.slice?e.slice(n,i):new Uint16Array(Array.prototype.slice.call(e,n,i))},C8=function(e,n,i){return e.slice?e.slice(n,i):new Uint32Array(Array.prototype.slice.call(e,n,i))},E8=function(e,n){var i=h8(e),l=Array.isArray(i)?f8(i):new Uint32Array(i),h=Array.isArray(i)?d8(i):new Uint16Array(i),d=24,m=_B(h,d/2,l[4]/2),o=l[5]===2?_B(h,(d+l[4])/2):C8(l,Math.ceil((d+l[4])/4));return new S8(l[0],l[1],l[2],l[3],m,o)},S8=(function(){function e(n,i,l,h,d,m){this.initialValue=n,this.errorValue=i,this.highStart=l,this.highValueIndex=h,this.index=d,this.data=m}return e.prototype.get=function(n){var i;if(n>=0){if(n<55296||n>56319&&n<=65535)return i=this.index[n>>ef],i=(i<<_1)+(n&w1),this.data[i];if(n<=65535)return i=this.index[wI+(n-55296>>ef)],i=(i<<_1)+(n&w1),this.data[i];if(n<this.highStart)return i=w8-x8+(n>>sx),i=this.index[i],i+=n>>ef&B8,i=this.index[i],i=(i<<_1)+(n&w1),this.data[i];if(n<=1114111)return this.data[this.highValueIndex]}return this.errorValue},e})(),wB="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",F8=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var d0=0;d0<wB.length;d0++)F8[wB.charCodeAt(d0)]=d0;var I8=1,x1=2,b1=3,xB=4,bB=5,T8=7,BB=8,B1=9,C1=10,CB=11,EB=12,SB=13,FB=14,E1=15,P8=function(e){for(var n=[],i=0,l=e.length;i<l;){var h=e.charCodeAt(i++);if(h>=55296&&h<=56319&&i<l){var d=e.charCodeAt(i++);(d&64512)===56320?n.push(((h&1023)<<10)+(d&1023)+65536):(n.push(h),i--)}else n.push(h)}return n},L8=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];if(String.fromCodePoint)return String.fromCodePoint.apply(String,e);var i=e.length;if(!i)return"";for(var l=[],h=-1,d="";++h<i;){var m=e[h];m<=65535?l.push(m):(m-=65536,l.push((m>>10)+55296,m%1024+56320)),(h+1===i||l.length>16384)&&(d+=String.fromCharCode.apply(String,l),l.length=0)}return d},M8=E8(u8),eu="",S1="",k8=function(e){return M8.get(e)},U8=function(e,n,i){var l=i-2,h=n[l],d=n[i-1],m=n[i];if(d===x1&&m===b1)return eu;if(d===x1||d===b1||d===xB||m===x1||m===b1||m===xB)return S1;if(d===BB&&[BB,B1,CB,EB].indexOf(m)!==-1||(d===CB||d===B1)&&(m===B1||m===C1)||(d===EB||d===C1)&&m===C1||m===SB||m===bB||m===T8||d===I8)return eu;if(d===SB&&m===FB){for(;h===bB;)h=n[--l];if(h===FB)return eu}if(d===E1&&m===E1){for(var o=0;h===E1;)o++,h=n[--l];if(o%2===0)return eu}return S1},D8=function(e){var n=P8(e),i=n.length,l=0,h=0,d=n.map(k8);return{next:function(){if(l>=i)return{done:!0,value:null};for(var m=eu;l<i&&(m=U8(n,d,++l))===eu;);if(m!==eu||l===i){var o=L8.apply(null,n.slice(h,l));return h=l,{value:o,done:!1}}return{done:!0,value:null}}}},R8=function(e){for(var n=D8(e),i=[],l;!(l=n.next()).done;)l.value&&i.push(l.value.slice());return i},N8=function(e){var n=123;if(e.createRange){var i=e.createRange();if(i.getBoundingClientRect){var l=e.createElement("boundtest");l.style.height=n+"px",l.style.display="block",e.body.appendChild(l),i.selectNode(l);var h=i.getBoundingClientRect(),d=Math.round(h.height);if(e.body.removeChild(l),d===n)return!0}}return!1},Q8=function(e){var n=e.createElement("boundtest");n.style.width="50px",n.style.display="block",n.style.fontSize="12px",n.style.letterSpacing="0px",n.style.wordSpacing="0px",e.body.appendChild(n);var i=e.createRange();n.innerHTML=typeof"".repeat=="function"?"&#128104;".repeat(10):"";var l=n.firstChild,h=zy(l.data).map(function(x){return Mo(x)}),d=0,m={},o=h.every(function(x,E){i.setStart(l,d),i.setEnd(l,d+x.length);var I=i.getBoundingClientRect();d+=x.length;var D=I.x>m.x||I.y>m.y;return m=I,E===0?!0:D});return e.body.removeChild(n),o},O8=function(){return typeof new Image().crossOrigin<"u"},z8=function(){return typeof new XMLHttpRequest().responseType=="string"},H8=function(e){var n=new Image,i=e.createElement("canvas"),l=i.getContext("2d");if(!l)return!1;n.src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'></svg>";try{l.drawImage(n,0,0),i.toDataURL()}catch{return!1}return!0},IB=function(e){return e[0]===0&&e[1]===255&&e[2]===0&&e[3]===255},j8=function(e){var n=e.createElement("canvas"),i=100;n.width=i,n.height=i;var l=n.getContext("2d");if(!l)return Promise.reject(!1);l.fillStyle="rgb(0, 255, 0)",l.fillRect(0,0,i,i);var h=new Image,d=n.toDataURL();h.src=d;var m=tw(i,i,0,0,h);return l.fillStyle="red",l.fillRect(0,0,i,i),TB(m).then(function(o){l.drawImage(o,0,0);var x=l.getImageData(0,0,i,i).data;l.fillStyle="red",l.fillRect(0,0,i,i);var E=e.createElement("div");return E.style.backgroundImage="url("+d+")",E.style.height=i+"px",IB(x)?TB(tw(i,i,0,0,E)):Promise.reject(!1)}).then(function(o){return l.drawImage(o,0,0),IB(l.getImageData(0,0,i,i).data)}).catch(function(){return!1})},tw=function(e,n,i,l,h){var d="http://www.w3.org/2000/svg",m=document.createElementNS(d,"svg"),o=document.createElementNS(d,"foreignObject");return m.setAttributeNS(null,"width",e.toString()),m.setAttributeNS(null,"height",n.toString()),o.setAttributeNS(null,"width","100%"),o.setAttributeNS(null,"height","100%"),o.setAttributeNS(null,"x",i.toString()),o.setAttributeNS(null,"y",l.toString()),o.setAttributeNS(null,"externalResourcesRequired","true"),m.appendChild(o),o.appendChild(h),m},TB=function(e){return new Promise(function(n,i){var l=new Image;l.onload=function(){return n(l)},l.onerror=i,l.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(e))})},xl={get SUPPORT_RANGE_BOUNDS(){var e=N8(document);return Object.defineProperty(xl,"SUPPORT_RANGE_BOUNDS",{value:e}),e},get SUPPORT_WORD_BREAKING(){var e=xl.SUPPORT_RANGE_BOUNDS&&Q8(document);return Object.defineProperty(xl,"SUPPORT_WORD_BREAKING",{value:e}),e},get SUPPORT_SVG_DRAWING(){var e=H8(document);return Object.defineProperty(xl,"SUPPORT_SVG_DRAWING",{value:e}),e},get SUPPORT_FOREIGNOBJECT_DRAWING(){var e=typeof Array.from=="function"&&typeof window.fetch=="function"?j8(document):Promise.resolve(!1);return Object.defineProperty(xl,"SUPPORT_FOREIGNOBJECT_DRAWING",{value:e}),e},get SUPPORT_CORS_IMAGES(){var e=O8();return Object.defineProperty(xl,"SUPPORT_CORS_IMAGES",{value:e}),e},get SUPPORT_RESPONSE_TYPE(){var e=z8();return Object.defineProperty(xl,"SUPPORT_RESPONSE_TYPE",{value:e}),e},get SUPPORT_CORS_XHR(){var e="withCredentials"in new XMLHttpRequest;return Object.defineProperty(xl,"SUPPORT_CORS_XHR",{value:e}),e},get SUPPORT_NATIVE_TEXT_SEGMENTATION(){var e=!!(typeof Intl<"u"&&Intl.Segmenter);return Object.defineProperty(xl,"SUPPORT_NATIVE_TEXT_SEGMENTATION",{value:e}),e}},Tm=(function(){function e(n,i){this.text=n,this.bounds=i}return e})(),V8=function(e,n,i,l){var h=q8(n,i),d=[],m=0;return h.forEach(function(o){if(i.textDecorationLine.length||o.trim().length>0)if(xl.SUPPORT_RANGE_BOUNDS){var x=PB(l,m,o.length).getClientRects();if(x.length>1){var E=ox(o),I=0;E.forEach(function(O){d.push(new Tm(O,zh.fromDOMRectList(e,PB(l,I+m,O.length).getClientRects()))),I+=O.length})}else d.push(new Tm(o,zh.fromDOMRectList(e,x)))}else{var D=l.splitText(o.length);d.push(new Tm(o,G8(e,l))),l=D}else xl.SUPPORT_RANGE_BOUNDS||(l=l.splitText(o.length));m+=o.length}),d},G8=function(e,n){var i=n.ownerDocument;if(i){var l=i.createElement("html2canvaswrapper");l.appendChild(n.cloneNode(!0));var h=n.parentNode;if(h){h.replaceChild(l,n);var d=Oy(e,l);return l.firstChild&&h.replaceChild(l.firstChild,l),d}}return zh.EMPTY},PB=function(e,n,i){var l=e.ownerDocument;if(!l)throw new Error("Node has no owner document");var h=l.createRange();return h.setStart(e,n),h.setEnd(e,n+i),h},ox=function(e){if(xl.SUPPORT_NATIVE_TEXT_SEGMENTATION){var n=new Intl.Segmenter(void 0,{granularity:"grapheme"});return Array.from(n.segment(e)).map(function(i){return i.segment})}return R8(e)},K8=function(e,n){if(xl.SUPPORT_NATIVE_TEXT_SEGMENTATION){var i=new Intl.Segmenter(void 0,{granularity:"word"});return Array.from(i.segment(e)).map(function(l){return l.segment})}return W8(e,n)},q8=function(e,n){return n.letterSpacing!==0?ox(e):K8(e,n)},$8=[32,160,4961,65792,65793,4153,4241],W8=function(e,n){for(var i=xN(e,{lineBreak:n.lineBreak,wordBreak:n.overflowWrap==="break-word"?"break-word":n.wordBreak}),l=[],h,d=function(){if(h.value){var m=h.value.slice(),o=zy(m),x="";o.forEach(function(E){$8.indexOf(E)===-1?x+=Mo(E):(x.length&&l.push(x),l.push(Mo(E)),x="")}),x.length&&l.push(x)}};!(h=i.next()).done;)d();return l},Z8=(function(){function e(n,i,l){this.text=X8(i.data,l.textTransform),this.textBounds=V8(n,this.text,l,i)}return e})(),X8=function(e,n){switch(n){case 1:return e.toLowerCase();case 3:return e.replace(Y8,J8);case 2:return e.toUpperCase();default:return e}},Y8=/(^|\s|:|-|\(|\))([a-z])/g,J8=function(e,n,i){return e.length>0?n+i.toUpperCase():e},xI=(function(e){Lu(n,e);function n(i,l){var h=e.call(this,i,l)||this;return h.src=l.currentSrc||l.src,h.intrinsicWidth=l.naturalWidth,h.intrinsicHeight=l.naturalHeight,h.context.cache.addImage(h.src),h}return n})(ah),bI=(function(e){Lu(n,e);function n(i,l){var h=e.call(this,i,l)||this;return h.canvas=l,h.intrinsicWidth=l.width,h.intrinsicHeight=l.height,h}return n})(ah),BI=(function(e){Lu(n,e);function n(i,l){var h=e.call(this,i,l)||this,d=new XMLSerializer,m=Oy(i,l);return l.setAttribute("width",m.width+"px"),l.setAttribute("height",m.height+"px"),h.svg="data:image/svg+xml,"+encodeURIComponent(d.serializeToString(l)),h.intrinsicWidth=l.width.baseVal.value,h.intrinsicHeight=l.height.baseVal.value,h.context.cache.addImage(h.svg),h}return n})(ah),CI=(function(e){Lu(n,e);function n(i,l){var h=e.call(this,i,l)||this;return h.value=l.value,h}return n})(ah),rw=(function(e){Lu(n,e);function n(i,l){var h=e.call(this,i,l)||this;return h.start=l.start,h.reversed=typeof l.reversed=="boolean"&&l.reversed===!0,h}return n})(ah),ez=[{type:15,flags:0,unit:"px",number:3}],tz=[{type:16,flags:0,number:50}],rz=function(e){return e.width>e.height?new zh(e.left+(e.width-e.height)/2,e.top,e.height,e.height):e.width<e.height?new zh(e.left,e.top+(e.height-e.width)/2,e.width,e.width):e},nz=function(e){var n=e.type===iz?new Array(e.value.length+1).join(""):e.value;return n.length===0?e.placeholder||"":n},ry="checkbox",ny="radio",iz="password",LB=707406591,ax=(function(e){Lu(n,e);function n(i,l){var h=e.call(this,i,l)||this;switch(h.type=l.type.toLowerCase(),h.checked=l.checked,h.value=nz(l),(h.type===ry||h.type===ny)&&(h.styles.backgroundColor=3739148031,h.styles.borderTopColor=h.styles.borderRightColor=h.styles.borderBottomColor=h.styles.borderLeftColor=2779096575,h.styles.borderTopWidth=h.styles.borderRightWidth=h.styles.borderBottomWidth=h.styles.borderLeftWidth=1,h.styles.borderTopStyle=h.styles.borderRightStyle=h.styles.borderBottomStyle=h.styles.borderLeftStyle=1,h.styles.backgroundClip=[0],h.styles.backgroundOrigin=[0],h.bounds=rz(h.bounds)),h.type){case ry:h.styles.borderTopRightRadius=h.styles.borderTopLeftRadius=h.styles.borderBottomRightRadius=h.styles.borderBottomLeftRadius=ez;break;case ny:h.styles.borderTopRightRadius=h.styles.borderTopLeftRadius=h.styles.borderBottomRightRadius=h.styles.borderBottomLeftRadius=tz;break}return h}return n})(ah),EI=(function(e){Lu(n,e);function n(i,l){var h=e.call(this,i,l)||this,d=l.options[l.selectedIndex||0];return h.value=d&&d.text||"",h}return n})(ah),SI=(function(e){Lu(n,e);function n(i,l){var h=e.call(this,i,l)||this;return h.value=l.value,h}return n})(ah),FI=(function(e){Lu(n,e);function n(i,l){var h=e.call(this,i,l)||this;h.src=l.src,h.width=parseInt(l.width,10)||0,h.height=parseInt(l.height,10)||0,h.backgroundColor=h.styles.backgroundColor;try{if(l.contentWindow&&l.contentWindow.document&&l.contentWindow.document.documentElement){h.tree=TI(i,l.contentWindow.document.documentElement);var d=l.contentWindow.document.documentElement?Fm(i,getComputedStyle(l.contentWindow.document.documentElement).backgroundColor):Nh.TRANSPARENT,m=l.contentWindow.document.body?Fm(i,getComputedStyle(l.contentWindow.document.body).backgroundColor):Nh.TRANSPARENT;h.backgroundColor=vd(d)?vd(m)?h.styles.backgroundColor:m:d}}catch{}return h}return n})(ah),sz=["OL","UL","MENU"],R0=function(e,n,i,l){for(var h=n.firstChild,d=void 0;h;h=d)if(d=h.nextSibling,PI(h)&&h.data.trim().length>0)i.textNodes.push(new Z8(e,h,i.styles));else if(op(h))if(UI(h)&&h.assignedNodes)h.assignedNodes().forEach(function(o){return R0(e,o,i,l)});else{var m=II(e,h);m.styles.isVisible()&&(oz(h,m,l)?m.flags|=4:az(m.styles)&&(m.flags|=2),sz.indexOf(h.tagName)!==-1&&(m.flags|=8),i.elements.push(m),h.slot,h.shadowRoot?R0(e,h.shadowRoot,m,l):!iy(h)&&!LI(h)&&!sy(h)&&R0(e,h,m,l))}},II=function(e,n){return iw(n)?new xI(e,n):MI(n)?new bI(e,n):LI(n)?new BI(e,n):lz(n)?new CI(e,n):cz(n)?new rw(e,n):Az(n)?new ax(e,n):sy(n)?new EI(e,n):iy(n)?new SI(e,n):kI(n)?new FI(e,n):new ah(e,n)},TI=function(e,n){var i=II(e,n);return i.flags|=4,R0(e,n,i,i),i},oz=function(e,n,i){return n.styles.isPositionedWithZIndex()||n.styles.opacity<1||n.styles.isTransformed()||lx(e)&&i.styles.isTransparent()},az=function(e){return e.isPositioned()||e.isFloating()},PI=function(e){return e.nodeType===Node.TEXT_NODE},op=function(e){return e.nodeType===Node.ELEMENT_NODE},nw=function(e){return op(e)&&typeof e.style<"u"&&!N0(e)},N0=function(e){return typeof e.className=="object"},lz=function(e){return e.tagName==="LI"},cz=function(e){return e.tagName==="OL"},Az=function(e){return e.tagName==="INPUT"},uz=function(e){return e.tagName==="HTML"},LI=function(e){return e.tagName==="svg"},lx=function(e){return e.tagName==="BODY"},MI=function(e){return e.tagName==="CANVAS"},MB=function(e){return e.tagName==="VIDEO"},iw=function(e){return e.tagName==="IMG"},kI=function(e){return e.tagName==="IFRAME"},kB=function(e){return e.tagName==="STYLE"},hz=function(e){return e.tagName==="SCRIPT"},iy=function(e){return e.tagName==="TEXTAREA"},sy=function(e){return e.tagName==="SELECT"},UI=function(e){return e.tagName==="SLOT"},UB=function(e){return e.tagName.indexOf("-")>0},dz=(function(){function e(){this.counters={}}return e.prototype.getCounterValue=function(n){var i=this.counters[n];return i&&i.length?i[i.length-1]:1},e.prototype.getCounterValues=function(n){var i=this.counters[n];return i||[]},e.prototype.pop=function(n){var i=this;n.forEach(function(l){return i.counters[l].pop()})},e.prototype.parse=function(n){var i=this,l=n.counterIncrement,h=n.counterReset,d=!0;l!==null&&l.forEach(function(o){var x=i.counters[o.counter];x&&o.increment!==0&&(d=!1,x.length||x.push(1),x[Math.max(0,x.length-1)]+=o.increment)});var m=[];return d&&h.forEach(function(o){var x=i.counters[o.counter];m.push(o.counter),x||(x=i.counters[o.counter]=[]),x.push(o.reset)}),m},e})(),DB={integers:[1e3,900,500,400,100,90,50,40,10,9,5,4,1],values:["M","CM","D","CD","C","XC","L","XL","X","IX","V","IV","I"]},RB={integers:[9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},fz={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,400,300,200,100,90,80,70,60,50,40,30,20,19,18,17,16,15,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},pz={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},Gf=function(e,n,i,l,h,d){return e<n||e>i?Hm(e,h,d.length>0):l.integers.reduce(function(m,o,x){for(;e>=o;)e-=o,m+=l.values[x];return m},"")+d},DI=function(e,n,i,l){var h="";do i||e--,h=l(e)+h,e/=n;while(e*n>=n);return h},Lo=function(e,n,i,l,h){var d=i-n+1;return(e<0?"-":"")+(DI(Math.abs(e),d,l,function(m){return Mo(Math.floor(m%d)+n)})+h)},$d=function(e,n,i){i===void 0&&(i=". ");var l=n.length;return DI(Math.abs(e),l,!1,function(h){return n[Math.floor(h%l)]})+i},ep=1,ld=2,cd=4,xm=8,Uh=function(e,n,i,l,h,d){if(e<-9999||e>9999)return Hm(e,4,h.length>0);var m=Math.abs(e),o=h;if(m===0)return n[0]+o;for(var x=0;m>0&&x<=4;x++){var E=m%10;E===0&&ba(d,ep)&&o!==""?o=n[E]+o:E>1||E===1&&x===0||E===1&&x===1&&ba(d,ld)||E===1&&x===1&&ba(d,cd)&&e>100||E===1&&x>1&&ba(d,xm)?o=n[E]+(x>0?i[x-1]:"")+o:E===1&&x>0&&(o=i[x-1]+o),m=Math.floor(m/10)}return(e<0?l:"")+o},NB="",QB="",OB="",F1="",Hm=function(e,n,i){var l=i?". ":"",h=i?"":"",d=i?", ":"",m=i?" ":"";switch(n){case 0:return""+m;case 1:return""+m;case 2:return""+m;case 5:var o=Lo(e,48,57,!0,l);return o.length<4?"0"+o:o;case 4:return $d(e,"",h);case 6:return Gf(e,1,3999,DB,3,l).toLowerCase();case 7:return Gf(e,1,3999,DB,3,l);case 8:return Lo(e,945,969,!1,l);case 9:return Lo(e,97,122,!1,l);case 10:return Lo(e,65,90,!1,l);case 11:return Lo(e,1632,1641,!0,l);case 12:case 49:return Gf(e,1,9999,RB,3,l);case 35:return Gf(e,1,9999,RB,3,l).toLowerCase();case 13:return Lo(e,2534,2543,!0,l);case 14:case 30:return Lo(e,6112,6121,!0,l);case 15:return $d(e,"",h);case 16:return $d(e,"",h);case 17:case 48:return Uh(e,"",NB,"",h,ld|cd|xm);case 47:return Uh(e,"",QB,"",h,ep|ld|cd|xm);case 42:return Uh(e,"",NB,"",h,ld|cd|xm);case 41:return Uh(e,"",QB,"",h,ep|ld|cd|xm);case 26:return Uh(e,"","",OB,h,0);case 25:return Uh(e,"","",OB,h,ep|ld|cd);case 31:return Uh(e,"","",F1,d,ep|ld|cd);case 33:return Uh(e,"","",F1,d,0);case 32:return Uh(e,"","",F1,d,ep|ld|cd);case 18:return Lo(e,2406,2415,!0,l);case 20:return Gf(e,1,19999,pz,3,l);case 21:return Lo(e,2790,2799,!0,l);case 22:return Lo(e,2662,2671,!0,l);case 22:return Gf(e,1,10999,fz,3,l);case 23:return $d(e,"");case 24:return $d(e,"");case 27:return Lo(e,3302,3311,!0,l);case 28:return $d(e,"",h);case 29:return $d(e,"",h);case 34:return Lo(e,3792,3801,!0,l);case 37:return Lo(e,6160,6169,!0,l);case 38:return Lo(e,4160,4169,!0,l);case 39:return Lo(e,2918,2927,!0,l);case 40:return Lo(e,1776,1785,!0,l);case 43:return Lo(e,3046,3055,!0,l);case 44:return Lo(e,3174,3183,!0,l);case 45:return Lo(e,3664,3673,!0,l);case 46:return Lo(e,3872,3881,!0,l);case 3:default:return Lo(e,48,57,!0,l)}},RI="data-html2canvas-ignore",zB=(function(){function e(n,i,l){if(this.context=n,this.options=l,this.scrolledElements=[],this.referenceElement=i,this.counters=new dz,this.quoteDepth=0,!i.ownerDocument)throw new Error("Cloned element does not have an owner document");this.documentElement=this.cloneNode(i.ownerDocument.documentElement,!1)}return e.prototype.toIFrame=function(n,i){var l=this,h=mz(n,i);if(!h.contentWindow)return Promise.reject("Unable to find iframe window");var d=n.defaultView.pageXOffset,m=n.defaultView.pageYOffset,o=h.contentWindow,x=o.document,E=vz(h).then(function(){return bc(l,void 0,void 0,function(){var I,D;return Yl(this,function(O){switch(O.label){case 0:return this.scrolledElements.forEach(bz),o&&(o.scrollTo(i.left,i.top),/(iPad|iPhone|iPod)/g.test(navigator.userAgent)&&(o.scrollY!==i.top||o.scrollX!==i.left)&&(this.context.logger.warn("Unable to restore scroll position for cloned document"),this.context.windowBounds=this.context.windowBounds.add(o.scrollX-i.left,o.scrollY-i.top,0,0))),I=this.options.onclone,D=this.clonedReferenceElement,typeof D>"u"?[2,Promise.reject("Error finding the "+this.referenceElement.nodeName+" in the cloned document")]:x.fonts&&x.fonts.ready?[4,x.fonts.ready]:[3,2];case 1:O.sent(),O.label=2;case 2:return/(AppleWebKit)/g.test(navigator.userAgent)?[4,yz(x)]:[3,4];case 3:O.sent(),O.label=4;case 4:return typeof I=="function"?[2,Promise.resolve().then(function(){return I(x,D)}).then(function(){return h})]:[2,h]}})})});return x.open(),x.write(wz(document.doctype)+"<html></html>"),xz(this.referenceElement.ownerDocument,d,m),x.replaceChild(x.adoptNode(this.documentElement),x.documentElement),x.close(),E},e.prototype.createElementClone=function(n){if(ew(n,2))debugger;if(MI(n))return this.createCanvasClone(n);if(MB(n))return this.createVideoClone(n);if(kB(n))return this.createStyleClone(n);var i=n.cloneNode(!1);return iw(i)&&(iw(n)&&n.currentSrc&&n.currentSrc!==n.src&&(i.src=n.currentSrc,i.srcset=""),i.loading==="lazy"&&(i.loading="eager")),UB(i)?this.createCustomElementClone(i):i},e.prototype.createCustomElementClone=function(n){var i=document.createElement("html2canvascustomelement");return I1(n.style,i),i},e.prototype.createStyleClone=function(n){try{var i=n.sheet;if(i&&i.cssRules){var l=[].slice.call(i.cssRules,0).reduce(function(d,m){return m&&typeof m.cssText=="string"?d+m.cssText:d},""),h=n.cloneNode(!1);return h.textContent=l,h}}catch(d){if(this.context.logger.error("Unable to access cssRules property",d),d.name!=="SecurityError")throw d}return n.cloneNode(!1)},e.prototype.createCanvasClone=function(n){var i;if(this.options.inlineImages&&n.ownerDocument){var l=n.ownerDocument.createElement("img");try{return l.src=n.toDataURL(),l}catch{this.context.logger.info("Unable to inline canvas contents, canvas is tainted",n)}}var h=n.cloneNode(!1);try{h.width=n.width,h.height=n.height;var d=n.getContext("2d"),m=h.getContext("2d");if(m)if(!this.options.allowTaint&&d)m.putImageData(d.getImageData(0,0,n.width,n.height),0,0);else{var o=(i=n.getContext("webgl2"))!==null&&i!==void 0?i:n.getContext("webgl");if(o){var x=o.getContextAttributes();x?.preserveDrawingBuffer===!1&&this.context.logger.warn("Unable to clone WebGL context as it has preserveDrawingBuffer=false",n)}m.drawImage(n,0,0)}return h}catch{this.context.logger.info("Unable to clone canvas as it is tainted",n)}return h},e.prototype.createVideoClone=function(n){var i=n.ownerDocument.createElement("canvas");i.width=n.offsetWidth,i.height=n.offsetHeight;var l=i.getContext("2d");try{return l&&(l.drawImage(n,0,0,i.width,i.height),this.options.allowTaint||l.getImageData(0,0,i.width,i.height)),i}catch{this.context.logger.info("Unable to clone video as it is tainted",n)}var h=n.ownerDocument.createElement("canvas");return h.width=n.offsetWidth,h.height=n.offsetHeight,h},e.prototype.appendChildNode=function(n,i,l){(!op(i)||!hz(i)&&!i.hasAttribute(RI)&&(typeof this.options.ignoreElements!="function"||!this.options.ignoreElements(i)))&&(!this.options.copyStyles||!op(i)||!kB(i))&&n.appendChild(this.cloneNode(i,l))},e.prototype.cloneChildNodes=function(n,i,l){for(var h=this,d=n.shadowRoot?n.shadowRoot.firstChild:n.firstChild;d;d=d.nextSibling)if(op(d)&&UI(d)&&typeof d.assignedNodes=="function"){var m=d.assignedNodes();m.length&&m.forEach(function(o){return h.appendChildNode(i,o,l)})}else this.appendChildNode(i,d,l)},e.prototype.cloneNode=function(n,i){if(PI(n))return document.createTextNode(n.data);if(!n.ownerDocument)return n.cloneNode(!1);var l=n.ownerDocument.defaultView;if(l&&op(n)&&(nw(n)||N0(n))){var h=this.createElementClone(n);h.style.transitionProperty="none";var d=l.getComputedStyle(n),m=l.getComputedStyle(n,":before"),o=l.getComputedStyle(n,":after");this.referenceElement===n&&nw(h)&&(this.clonedReferenceElement=h),lx(h)&&Ez(h);var x=this.counters.parse(new yB(this.context,d)),E=this.resolvePseudoContent(n,h,m,Pm.BEFORE);UB(n)&&(i=!0),MB(n)||this.cloneChildNodes(n,h,i),E&&h.insertBefore(E,h.firstChild);var I=this.resolvePseudoContent(n,h,o,Pm.AFTER);return I&&h.appendChild(I),this.counters.pop(x),(d&&(this.options.copyStyles||N0(n))&&!kI(n)||i)&&I1(d,h),(n.scrollTop!==0||n.scrollLeft!==0)&&this.scrolledElements.push([h,n.scrollLeft,n.scrollTop]),(iy(n)||sy(n))&&(iy(h)||sy(h))&&(h.value=n.value),h}return n.cloneNode(!1)},e.prototype.resolvePseudoContent=function(n,i,l,h){var d=this;if(l){var m=l.content,o=i.ownerDocument;if(!(!o||!m||m==="none"||m==="-moz-alt-content"||l.display==="none")){this.counters.parse(new yB(this.context,l));var x=new l8(this.context,l),E=o.createElement("html2canvaspseudoelement");I1(l,E),x.content.forEach(function(D){if(D.type===0)E.appendChild(o.createTextNode(D.value));else if(D.type===22){var O=o.createElement("img");O.src=D.value,O.style.opacity="1",E.appendChild(O)}else if(D.type===18){if(D.name==="attr"){var P=D.values.filter(us);P.length&&E.appendChild(o.createTextNode(n.getAttribute(P[0].value)||""))}else if(D.name==="counter"){var W=D.values.filter(vp),z=W[0],H=W[1];if(z&&us(z)){var Z=d.counters.getCounterValue(z.value),ie=H&&us(H)?J_.parse(d.context,H.value):3;E.appendChild(o.createTextNode(Hm(Z,ie,!1)))}}else if(D.name==="counters"){var ce=D.values.filter(vp),z=ce[0],he=ce[1],H=ce[2];if(z&&us(z)){var Ie=d.counters.getCounterValues(z.value),Ve=H&&us(H)?J_.parse(d.context,H.value):3,Me=he&&he.type===0?he.value:"",Pe=Ie.map(function(pe){return Hm(pe,Ve,!1)}).join(Me);E.appendChild(o.createTextNode(Pe))}}}else if(D.type===20)switch(D.value){case"open-quote":E.appendChild(o.createTextNode(gB(x.quotes,d.quoteDepth++,!0)));break;case"close-quote":E.appendChild(o.createTextNode(gB(x.quotes,--d.quoteDepth,!1)));break;default:E.appendChild(o.createTextNode(D.value))}}),E.className=sw+" "+ow;var I=h===Pm.BEFORE?" "+sw:" "+ow;return N0(i)?i.className.baseValue+=I:i.className+=I,E}}},e.destroy=function(n){return n.parentNode?(n.parentNode.removeChild(n),!0):!1},e})(),Pm;(function(e){e[e.BEFORE=0]="BEFORE",e[e.AFTER=1]="AFTER"})(Pm||(Pm={}));var mz=function(e,n){var i=e.createElement("iframe");return i.className="html2canvas-container",i.style.visibility="hidden",i.style.position="fixed",i.style.left="-10000px",i.style.top="0px",i.style.border="0",i.width=n.width.toString(),i.height=n.height.toString(),i.scrolling="no",i.setAttribute(RI,"true"),e.body.appendChild(i),i},gz=function(e){return new Promise(function(n){if(e.complete){n();return}if(!e.src){n();return}e.onload=n,e.onerror=n})},yz=function(e){return Promise.all([].slice.call(e.images,0).map(gz))},vz=function(e){return new Promise(function(n,i){var l=e.contentWindow;if(!l)return i("No window assigned for iframe");var h=l.document;l.onload=e.onload=function(){l.onload=e.onload=null;var d=setInterval(function(){h.body.childNodes.length>0&&h.readyState==="complete"&&(clearInterval(d),n(e))},50)}})},_z=["all","d","content"],I1=function(e,n){for(var i=e.length-1;i>=0;i--){var l=e.item(i);_z.indexOf(l)===-1&&n.style.setProperty(l,e.getPropertyValue(l))}return n},wz=function(e){var n="";return e&&(n+="<!DOCTYPE ",e.name&&(n+=e.name),e.internalSubset&&(n+=e.internalSubset),e.publicId&&(n+='"'+e.publicId+'"'),e.systemId&&(n+='"'+e.systemId+'"'),n+=">"),n},xz=function(e,n,i){e&&e.defaultView&&(n!==e.defaultView.pageXOffset||i!==e.defaultView.pageYOffset)&&e.defaultView.scrollTo(n,i)},bz=function(e){var n=e[0],i=e[1],l=e[2];n.scrollLeft=i,n.scrollTop=l},Bz=":before",Cz=":after",sw="___html2canvas___pseudoelement_before",ow="___html2canvas___pseudoelement_after",HB=`{
    content: "" !important;
    display: none !important;
}`,Ez=function(e){Sz(e,"."+sw+Bz+HB+`
         .`+ow+Cz+HB)},Sz=function(e,n){var i=e.ownerDocument;if(i){var l=i.createElement("style");l.textContent=n,e.appendChild(l)}},NI=(function(){function e(){}return e.getOrigin=function(n){var i=e._link;return i?(i.href=n,i.href=i.href,i.protocol+i.hostname+i.port):"about:blank"},e.isSameOrigin=function(n){return e.getOrigin(n)===e._origin},e.setContext=function(n){e._link=n.document.createElement("a"),e._origin=e.getOrigin(n.location.href)},e._origin="about:blank",e})(),Fz=(function(){function e(n,i){this.context=n,this._options=i,this._cache={}}return e.prototype.addImage=function(n){var i=Promise.resolve();return this.has(n)||(P1(n)||Lz(n))&&(this._cache[n]=this.loadImage(n)).catch(function(){}),i},e.prototype.match=function(n){return this._cache[n]},e.prototype.loadImage=function(n){return bc(this,void 0,void 0,function(){var i,l,h,d,m=this;return Yl(this,function(o){switch(o.label){case 0:return i=NI.isSameOrigin(n),l=!T1(n)&&this._options.useCORS===!0&&xl.SUPPORT_CORS_IMAGES&&!i,h=!T1(n)&&!i&&!P1(n)&&typeof this._options.proxy=="string"&&xl.SUPPORT_CORS_XHR&&!l,!i&&this._options.allowTaint===!1&&!T1(n)&&!P1(n)&&!h&&!l?[2]:(d=n,h?[4,this.proxy(d)]:[3,2]);case 1:d=o.sent(),o.label=2;case 2:return this.context.logger.debug("Added image "+n.substring(0,256)),[4,new Promise(function(x,E){var I=new Image;I.onload=function(){return x(I)},I.onerror=E,(Mz(d)||l)&&(I.crossOrigin="anonymous"),I.src=d,I.complete===!0&&setTimeout(function(){return x(I)},500),m._options.imageTimeout>0&&setTimeout(function(){return E("Timed out ("+m._options.imageTimeout+"ms) loading image")},m._options.imageTimeout)})];case 3:return[2,o.sent()]}})})},e.prototype.has=function(n){return typeof this._cache[n]<"u"},e.prototype.keys=function(){return Promise.resolve(Object.keys(this._cache))},e.prototype.proxy=function(n){var i=this,l=this._options.proxy;if(!l)throw new Error("No proxy defined");var h=n.substring(0,256);return new Promise(function(d,m){var o=xl.SUPPORT_RESPONSE_TYPE?"blob":"text",x=new XMLHttpRequest;x.onload=function(){if(x.status===200)if(o==="text")d(x.response);else{var D=new FileReader;D.addEventListener("load",function(){return d(D.result)},!1),D.addEventListener("error",function(O){return m(O)},!1),D.readAsDataURL(x.response)}else m("Failed to proxy resource "+h+" with status code "+x.status)},x.onerror=m;var E=l.indexOf("?")>-1?"&":"?";if(x.open("GET",""+l+E+"url="+encodeURIComponent(n)+"&responseType="+o),o!=="text"&&x instanceof XMLHttpRequest&&(x.responseType=o),i._options.imageTimeout){var I=i._options.imageTimeout;x.timeout=I,x.ontimeout=function(){return m("Timed out ("+I+"ms) proxying "+h)}}x.send()})},e})(),Iz=/^data:image\/svg\+xml/i,Tz=/^data:image\/.*;base64,/i,Pz=/^data:image\/.*/i,Lz=function(e){return xl.SUPPORT_SVG_DRAWING||!kz(e)},T1=function(e){return Pz.test(e)},Mz=function(e){return Tz.test(e)},P1=function(e){return e.substr(0,4)==="blob"},kz=function(e){return e.substr(-3).toLowerCase()==="svg"||Iz.test(e)},jr=(function(){function e(n,i){this.type=0,this.x=n,this.y=i}return e.prototype.add=function(n,i){return new e(this.x+n,this.y+i)},e})(),Kf=function(e,n,i){return new jr(e.x+(n.x-e.x)*i,e.y+(n.y-e.y)*i)},f0=(function(){function e(n,i,l,h){this.type=1,this.start=n,this.startControl=i,this.endControl=l,this.end=h}return e.prototype.subdivide=function(n,i){var l=Kf(this.start,this.startControl,n),h=Kf(this.startControl,this.endControl,n),d=Kf(this.endControl,this.end,n),m=Kf(l,h,n),o=Kf(h,d,n),x=Kf(m,o,n);return i?new e(this.start,l,m,x):new e(x,o,d,this.end)},e.prototype.add=function(n,i){return new e(this.start.add(n,i),this.startControl.add(n,i),this.endControl.add(n,i),this.end.add(n,i))},e.prototype.reverse=function(){return new e(this.end,this.endControl,this.startControl,this.start)},e})(),tu=function(e){return e.type===1},Uz=(function(){function e(n){var i=n.styles,l=n.bounds,h=_m(i.borderTopLeftRadius,l.width,l.height),d=h[0],m=h[1],o=_m(i.borderTopRightRadius,l.width,l.height),x=o[0],E=o[1],I=_m(i.borderBottomRightRadius,l.width,l.height),D=I[0],O=I[1],P=_m(i.borderBottomLeftRadius,l.width,l.height),W=P[0],z=P[1],H=[];H.push((d+x)/l.width),H.push((W+D)/l.width),H.push((m+z)/l.height),H.push((E+O)/l.height);var Z=Math.max.apply(Math,H);Z>1&&(d/=Z,m/=Z,x/=Z,E/=Z,D/=Z,O/=Z,W/=Z,z/=Z);var ie=l.width-x,ce=l.height-O,he=l.width-D,Ie=l.height-z,Ve=i.borderTopWidth,Me=i.borderRightWidth,Pe=i.borderBottomWidth,xe=i.borderLeftWidth,nt=Ms(i.paddingTop,n.bounds.width),pe=Ms(i.paddingRight,n.bounds.width),_e=Ms(i.paddingBottom,n.bounds.width),Ue=Ms(i.paddingLeft,n.bounds.width);this.topLeftBorderDoubleOuterBox=d>0||m>0?so(l.left+xe/3,l.top+Ve/3,d-xe/3,m-Ve/3,qi.TOP_LEFT):new jr(l.left+xe/3,l.top+Ve/3),this.topRightBorderDoubleOuterBox=d>0||m>0?so(l.left+ie,l.top+Ve/3,x-Me/3,E-Ve/3,qi.TOP_RIGHT):new jr(l.left+l.width-Me/3,l.top+Ve/3),this.bottomRightBorderDoubleOuterBox=D>0||O>0?so(l.left+he,l.top+ce,D-Me/3,O-Pe/3,qi.BOTTOM_RIGHT):new jr(l.left+l.width-Me/3,l.top+l.height-Pe/3),this.bottomLeftBorderDoubleOuterBox=W>0||z>0?so(l.left+xe/3,l.top+Ie,W-xe/3,z-Pe/3,qi.BOTTOM_LEFT):new jr(l.left+xe/3,l.top+l.height-Pe/3),this.topLeftBorderDoubleInnerBox=d>0||m>0?so(l.left+xe*2/3,l.top+Ve*2/3,d-xe*2/3,m-Ve*2/3,qi.TOP_LEFT):new jr(l.left+xe*2/3,l.top+Ve*2/3),this.topRightBorderDoubleInnerBox=d>0||m>0?so(l.left+ie,l.top+Ve*2/3,x-Me*2/3,E-Ve*2/3,qi.TOP_RIGHT):new jr(l.left+l.width-Me*2/3,l.top+Ve*2/3),this.bottomRightBorderDoubleInnerBox=D>0||O>0?so(l.left+he,l.top+ce,D-Me*2/3,O-Pe*2/3,qi.BOTTOM_RIGHT):new jr(l.left+l.width-Me*2/3,l.top+l.height-Pe*2/3),this.bottomLeftBorderDoubleInnerBox=W>0||z>0?so(l.left+xe*2/3,l.top+Ie,W-xe*2/3,z-Pe*2/3,qi.BOTTOM_LEFT):new jr(l.left+xe*2/3,l.top+l.height-Pe*2/3),this.topLeftBorderStroke=d>0||m>0?so(l.left+xe/2,l.top+Ve/2,d-xe/2,m-Ve/2,qi.TOP_LEFT):new jr(l.left+xe/2,l.top+Ve/2),this.topRightBorderStroke=d>0||m>0?so(l.left+ie,l.top+Ve/2,x-Me/2,E-Ve/2,qi.TOP_RIGHT):new jr(l.left+l.width-Me/2,l.top+Ve/2),this.bottomRightBorderStroke=D>0||O>0?so(l.left+he,l.top+ce,D-Me/2,O-Pe/2,qi.BOTTOM_RIGHT):new jr(l.left+l.width-Me/2,l.top+l.height-Pe/2),this.bottomLeftBorderStroke=W>0||z>0?so(l.left+xe/2,l.top+Ie,W-xe/2,z-Pe/2,qi.BOTTOM_LEFT):new jr(l.left+xe/2,l.top+l.height-Pe/2),this.topLeftBorderBox=d>0||m>0?so(l.left,l.top,d,m,qi.TOP_LEFT):new jr(l.left,l.top),this.topRightBorderBox=x>0||E>0?so(l.left+ie,l.top,x,E,qi.TOP_RIGHT):new jr(l.left+l.width,l.top),this.bottomRightBorderBox=D>0||O>0?so(l.left+he,l.top+ce,D,O,qi.BOTTOM_RIGHT):new jr(l.left+l.width,l.top+l.height),this.bottomLeftBorderBox=W>0||z>0?so(l.left,l.top+Ie,W,z,qi.BOTTOM_LEFT):new jr(l.left,l.top+l.height),this.topLeftPaddingBox=d>0||m>0?so(l.left+xe,l.top+Ve,Math.max(0,d-xe),Math.max(0,m-Ve),qi.TOP_LEFT):new jr(l.left+xe,l.top+Ve),this.topRightPaddingBox=x>0||E>0?so(l.left+Math.min(ie,l.width-Me),l.top+Ve,ie>l.width+Me?0:Math.max(0,x-Me),Math.max(0,E-Ve),qi.TOP_RIGHT):new jr(l.left+l.width-Me,l.top+Ve),this.bottomRightPaddingBox=D>0||O>0?so(l.left+Math.min(he,l.width-xe),l.top+Math.min(ce,l.height-Pe),Math.max(0,D-Me),Math.max(0,O-Pe),qi.BOTTOM_RIGHT):new jr(l.left+l.width-Me,l.top+l.height-Pe),this.bottomLeftPaddingBox=W>0||z>0?so(l.left+xe,l.top+Math.min(Ie,l.height-Pe),Math.max(0,W-xe),Math.max(0,z-Pe),qi.BOTTOM_LEFT):new jr(l.left+xe,l.top+l.height-Pe),this.topLeftContentBox=d>0||m>0?so(l.left+xe+Ue,l.top+Ve+nt,Math.max(0,d-(xe+Ue)),Math.max(0,m-(Ve+nt)),qi.TOP_LEFT):new jr(l.left+xe+Ue,l.top+Ve+nt),this.topRightContentBox=x>0||E>0?so(l.left+Math.min(ie,l.width+xe+Ue),l.top+Ve+nt,ie>l.width+xe+Ue?0:x-xe+Ue,E-(Ve+nt),qi.TOP_RIGHT):new jr(l.left+l.width-(Me+pe),l.top+Ve+nt),this.bottomRightContentBox=D>0||O>0?so(l.left+Math.min(he,l.width-(xe+Ue)),l.top+Math.min(ce,l.height+Ve+nt),Math.max(0,D-(Me+pe)),O-(Pe+_e),qi.BOTTOM_RIGHT):new jr(l.left+l.width-(Me+pe),l.top+l.height-(Pe+_e)),this.bottomLeftContentBox=W>0||z>0?so(l.left+xe+Ue,l.top+Ie,Math.max(0,W-(xe+Ue)),z-(Pe+_e),qi.BOTTOM_LEFT):new jr(l.left+xe+Ue,l.top+l.height-(Pe+_e))}return e})(),qi;(function(e){e[e.TOP_LEFT=0]="TOP_LEFT",e[e.TOP_RIGHT=1]="TOP_RIGHT",e[e.BOTTOM_RIGHT=2]="BOTTOM_RIGHT",e[e.BOTTOM_LEFT=3]="BOTTOM_LEFT"})(qi||(qi={}));var so=function(e,n,i,l,h){var d=4*((Math.sqrt(2)-1)/3),m=i*d,o=l*d,x=e+i,E=n+l;switch(h){case qi.TOP_LEFT:return new f0(new jr(e,E),new jr(e,E-o),new jr(x-m,n),new jr(x,n));case qi.TOP_RIGHT:return new f0(new jr(e,n),new jr(e+m,n),new jr(x,E-o),new jr(x,E));case qi.BOTTOM_RIGHT:return new f0(new jr(x,n),new jr(x,n+o),new jr(e+m,E),new jr(e,E));case qi.BOTTOM_LEFT:default:return new f0(new jr(x,E),new jr(x-m,E),new jr(e,n+o),new jr(e,n))}},oy=function(e){return[e.topLeftBorderBox,e.topRightBorderBox,e.bottomRightBorderBox,e.bottomLeftBorderBox]},Dz=function(e){return[e.topLeftContentBox,e.topRightContentBox,e.bottomRightContentBox,e.bottomLeftContentBox]},ay=function(e){return[e.topLeftPaddingBox,e.topRightPaddingBox,e.bottomRightPaddingBox,e.bottomLeftPaddingBox]},Rz=(function(){function e(n,i,l){this.offsetX=n,this.offsetY=i,this.matrix=l,this.type=0,this.target=6}return e})(),p0=(function(){function e(n,i){this.path=n,this.target=i,this.type=1}return e})(),Nz=(function(){function e(n){this.opacity=n,this.type=2,this.target=6}return e})(),Qz=function(e){return e.type===0},QI=function(e){return e.type===1},Oz=function(e){return e.type===2},jB=function(e,n){return e.length===n.length?e.some(function(i,l){return i===n[l]}):!1},zz=function(e,n,i,l,h){return e.map(function(d,m){switch(m){case 0:return d.add(n,i);case 1:return d.add(n+l,i);case 2:return d.add(n+l,i+h);case 3:return d.add(n,i+h)}return d})},OI=(function(){function e(n){this.element=n,this.inlineLevel=[],this.nonInlineLevel=[],this.negativeZIndex=[],this.zeroOrAutoZIndexOrTransformedOrOpacity=[],this.positiveZIndex=[],this.nonPositionedFloats=[],this.nonPositionedInlineLevel=[]}return e})(),zI=(function(){function e(n,i){if(this.container=n,this.parent=i,this.effects=[],this.curves=new Uz(this.container),this.container.styles.opacity<1&&this.effects.push(new Nz(this.container.styles.opacity)),this.container.styles.transform!==null){var l=this.container.bounds.left+this.container.styles.transformOrigin[0].number,h=this.container.bounds.top+this.container.styles.transformOrigin[1].number,d=this.container.styles.transform;this.effects.push(new Rz(l,h,d))}if(this.container.styles.overflowX!==0){var m=oy(this.curves),o=ay(this.curves);jB(m,o)?this.effects.push(new p0(m,6)):(this.effects.push(new p0(m,2)),this.effects.push(new p0(o,4)))}}return e.prototype.getEffects=function(n){for(var i=[2,3].indexOf(this.container.styles.position)===-1,l=this.parent,h=this.effects.slice(0);l;){var d=l.effects.filter(function(x){return!QI(x)});if(i||l.container.styles.position!==0||!l.parent){if(h.unshift.apply(h,d),i=[2,3].indexOf(l.container.styles.position)===-1,l.container.styles.overflowX!==0){var m=oy(l.curves),o=ay(l.curves);jB(m,o)||h.unshift(new p0(o,6))}}else h.unshift.apply(h,d);l=l.parent}return h.filter(function(x){return ba(x.target,n)})},e})(),aw=function(e,n,i,l){e.container.elements.forEach(function(h){var d=ba(h.flags,4),m=ba(h.flags,2),o=new zI(h,e);ba(h.styles.display,2048)&&l.push(o);var x=ba(h.flags,8)?[]:l;if(d||m){var E=d||h.styles.isPositioned()?i:n,I=new OI(o);if(h.styles.isPositioned()||h.styles.opacity<1||h.styles.isTransformed()){var D=h.styles.zIndex.order;if(D<0){var O=0;E.negativeZIndex.some(function(W,z){return D>W.element.container.styles.zIndex.order?(O=z,!1):O>0}),E.negativeZIndex.splice(O,0,I)}else if(D>0){var P=0;E.positiveZIndex.some(function(W,z){return D>=W.element.container.styles.zIndex.order?(P=z+1,!1):P>0}),E.positiveZIndex.splice(P,0,I)}else E.zeroOrAutoZIndexOrTransformedOrOpacity.push(I)}else h.styles.isFloating()?E.nonPositionedFloats.push(I):E.nonPositionedInlineLevel.push(I);aw(o,I,d?I:i,x)}else h.styles.isInlineLevel()?n.inlineLevel.push(o):n.nonInlineLevel.push(o),aw(o,n,i,x);ba(h.flags,8)&&HI(h,x)})},HI=function(e,n){for(var i=e instanceof rw?e.start:1,l=e instanceof rw?e.reversed:!1,h=0;h<n.length;h++){var d=n[h];d.container instanceof CI&&typeof d.container.value=="number"&&d.container.value!==0&&(i=d.container.value),d.listValue=Hm(i,d.container.styles.listStyleType,!0),i+=l?-1:1}},Hz=function(e){var n=new zI(e,null),i=new OI(n),l=[];return aw(n,i,i,l),HI(n.container,l),i},VB=function(e,n){switch(n){case 0:return nu(e.topLeftBorderBox,e.topLeftPaddingBox,e.topRightBorderBox,e.topRightPaddingBox);case 1:return nu(e.topRightBorderBox,e.topRightPaddingBox,e.bottomRightBorderBox,e.bottomRightPaddingBox);case 2:return nu(e.bottomRightBorderBox,e.bottomRightPaddingBox,e.bottomLeftBorderBox,e.bottomLeftPaddingBox);case 3:default:return nu(e.bottomLeftBorderBox,e.bottomLeftPaddingBox,e.topLeftBorderBox,e.topLeftPaddingBox)}},jz=function(e,n){switch(n){case 0:return nu(e.topLeftBorderBox,e.topLeftBorderDoubleOuterBox,e.topRightBorderBox,e.topRightBorderDoubleOuterBox);case 1:return nu(e.topRightBorderBox,e.topRightBorderDoubleOuterBox,e.bottomRightBorderBox,e.bottomRightBorderDoubleOuterBox);case 2:return nu(e.bottomRightBorderBox,e.bottomRightBorderDoubleOuterBox,e.bottomLeftBorderBox,e.bottomLeftBorderDoubleOuterBox);case 3:default:return nu(e.bottomLeftBorderBox,e.bottomLeftBorderDoubleOuterBox,e.topLeftBorderBox,e.topLeftBorderDoubleOuterBox)}},Vz=function(e,n){switch(n){case 0:return nu(e.topLeftBorderDoubleInnerBox,e.topLeftPaddingBox,e.topRightBorderDoubleInnerBox,e.topRightPaddingBox);case 1:return nu(e.topRightBorderDoubleInnerBox,e.topRightPaddingBox,e.bottomRightBorderDoubleInnerBox,e.bottomRightPaddingBox);case 2:return nu(e.bottomRightBorderDoubleInnerBox,e.bottomRightPaddingBox,e.bottomLeftBorderDoubleInnerBox,e.bottomLeftPaddingBox);case 3:default:return nu(e.bottomLeftBorderDoubleInnerBox,e.bottomLeftPaddingBox,e.topLeftBorderDoubleInnerBox,e.topLeftPaddingBox)}},Gz=function(e,n){switch(n){case 0:return m0(e.topLeftBorderStroke,e.topRightBorderStroke);case 1:return m0(e.topRightBorderStroke,e.bottomRightBorderStroke);case 2:return m0(e.bottomRightBorderStroke,e.bottomLeftBorderStroke);case 3:default:return m0(e.bottomLeftBorderStroke,e.topLeftBorderStroke)}},m0=function(e,n){var i=[];return tu(e)?i.push(e.subdivide(.5,!1)):i.push(e),tu(n)?i.push(n.subdivide(.5,!0)):i.push(n),i},nu=function(e,n,i,l){var h=[];return tu(e)?h.push(e.subdivide(.5,!1)):h.push(e),tu(i)?h.push(i.subdivide(.5,!0)):h.push(i),tu(l)?h.push(l.subdivide(.5,!0).reverse()):h.push(l),tu(n)?h.push(n.subdivide(.5,!1).reverse()):h.push(n),h},jI=function(e){var n=e.bounds,i=e.styles;return n.add(i.borderLeftWidth,i.borderTopWidth,-(i.borderRightWidth+i.borderLeftWidth),-(i.borderTopWidth+i.borderBottomWidth))},ly=function(e){var n=e.styles,i=e.bounds,l=Ms(n.paddingLeft,i.width),h=Ms(n.paddingRight,i.width),d=Ms(n.paddingTop,i.width),m=Ms(n.paddingBottom,i.width);return i.add(l+n.borderLeftWidth,d+n.borderTopWidth,-(n.borderRightWidth+n.borderLeftWidth+l+h),-(n.borderTopWidth+n.borderBottomWidth+d+m))},Kz=function(e,n){return e===0?n.bounds:e===2?ly(n):jI(n)},qz=function(e,n){return e===0?n.bounds:e===2?ly(n):jI(n)},L1=function(e,n,i){var l=Kz(tp(e.styles.backgroundOrigin,n),e),h=qz(tp(e.styles.backgroundClip,n),e),d=$z(tp(e.styles.backgroundSize,n),i,l),m=d[0],o=d[1],x=_m(tp(e.styles.backgroundPosition,n),l.width-m,l.height-o),E=Wz(tp(e.styles.backgroundRepeat,n),x,d,l,h),I=Math.round(l.left+x[0]),D=Math.round(l.top+x[1]);return[E,I,D,m,o]},qf=function(e){return us(e)&&e.value===up.AUTO},g0=function(e){return typeof e=="number"},$z=function(e,n,i){var l=n[0],h=n[1],d=n[2],m=e[0],o=e[1];if(!m)return[0,0];if(oa(m)&&o&&oa(o))return[Ms(m,i.width),Ms(o,i.height)];var x=g0(d);if(us(m)&&(m.value===up.CONTAIN||m.value===up.COVER)){if(g0(d)){var E=i.width/i.height;return E<d!=(m.value===up.COVER)?[i.width,i.width/d]:[i.height*d,i.height]}return[i.width,i.height]}var I=g0(l),D=g0(h),O=I||D;if(qf(m)&&(!o||qf(o))){if(I&&D)return[l,h];if(!x&&!O)return[i.width,i.height];if(O&&x){var P=I?l:h*d,W=D?h:l/d;return[P,W]}var z=I?l:i.width,H=D?h:i.height;return[z,H]}if(x){var Z=0,ie=0;return oa(m)?Z=Ms(m,i.width):oa(o)&&(ie=Ms(o,i.height)),qf(m)?Z=ie*d:(!o||qf(o))&&(ie=Z/d),[Z,ie]}var ce=null,he=null;if(oa(m)?ce=Ms(m,i.width):o&&oa(o)&&(he=Ms(o,i.height)),ce!==null&&(!o||qf(o))&&(he=I&&D?ce/l*h:i.height),he!==null&&qf(m)&&(ce=I&&D?he/h*l:i.width),ce!==null&&he!==null)return[ce,he];throw new Error("Unable to calculate background-size for element")},tp=function(e,n){var i=e[n];return typeof i>"u"?e[0]:i},Wz=function(e,n,i,l,h){var d=n[0],m=n[1],o=i[0],x=i[1];switch(e){case 2:return[new jr(Math.round(l.left),Math.round(l.top+m)),new jr(Math.round(l.left+l.width),Math.round(l.top+m)),new jr(Math.round(l.left+l.width),Math.round(x+l.top+m)),new jr(Math.round(l.left),Math.round(x+l.top+m))];case 3:return[new jr(Math.round(l.left+d),Math.round(l.top)),new jr(Math.round(l.left+d+o),Math.round(l.top)),new jr(Math.round(l.left+d+o),Math.round(l.height+l.top)),new jr(Math.round(l.left+d),Math.round(l.height+l.top))];case 1:return[new jr(Math.round(l.left+d),Math.round(l.top+m)),new jr(Math.round(l.left+d+o),Math.round(l.top+m)),new jr(Math.round(l.left+d+o),Math.round(l.top+m+x)),new jr(Math.round(l.left+d),Math.round(l.top+m+x))];default:return[new jr(Math.round(h.left),Math.round(h.top)),new jr(Math.round(h.left+h.width),Math.round(h.top)),new jr(Math.round(h.left+h.width),Math.round(h.height+h.top)),new jr(Math.round(h.left),Math.round(h.height+h.top))]}},Zz="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",GB="Hidden Text",Xz=(function(){function e(n){this._data={},this._document=n}return e.prototype.parseMetrics=function(n,i){var l=this._document.createElement("div"),h=this._document.createElement("img"),d=this._document.createElement("span"),m=this._document.body;l.style.visibility="hidden",l.style.fontFamily=n,l.style.fontSize=i,l.style.margin="0",l.style.padding="0",l.style.whiteSpace="nowrap",m.appendChild(l),h.src=Zz,h.width=1,h.height=1,h.style.margin="0",h.style.padding="0",h.style.verticalAlign="baseline",d.style.fontFamily=n,d.style.fontSize=i,d.style.margin="0",d.style.padding="0",d.appendChild(this._document.createTextNode(GB)),l.appendChild(d),l.appendChild(h);var o=h.offsetTop-d.offsetTop+2;l.removeChild(d),l.appendChild(this._document.createTextNode(GB)),l.style.lineHeight="normal",h.style.verticalAlign="super";var x=h.offsetTop-l.offsetTop+2;return m.removeChild(l),{baseline:o,middle:x}},e.prototype.getMetrics=function(n,i){var l=n+" "+i;return typeof this._data[l]>"u"&&(this._data[l]=this.parseMetrics(n,i)),this._data[l]},e})(),VI=(function(){function e(n,i){this.context=n,this.options=i}return e})(),Yz=1e4,Jz=(function(e){Lu(n,e);function n(i,l){var h=e.call(this,i,l)||this;return h._activeEffects=[],h.canvas=l.canvas?l.canvas:document.createElement("canvas"),h.ctx=h.canvas.getContext("2d"),l.canvas||(h.canvas.width=Math.floor(l.width*l.scale),h.canvas.height=Math.floor(l.height*l.scale),h.canvas.style.width=l.width+"px",h.canvas.style.height=l.height+"px"),h.fontMetrics=new Xz(document),h.ctx.scale(h.options.scale,h.options.scale),h.ctx.translate(-l.x,-l.y),h.ctx.textBaseline="bottom",h._activeEffects=[],h.context.logger.debug("Canvas renderer initialized ("+l.width+"x"+l.height+") with scale "+l.scale),h}return n.prototype.applyEffects=function(i){for(var l=this;this._activeEffects.length;)this.popEffect();i.forEach(function(h){return l.applyEffect(h)})},n.prototype.applyEffect=function(i){this.ctx.save(),Oz(i)&&(this.ctx.globalAlpha=i.opacity),Qz(i)&&(this.ctx.translate(i.offsetX,i.offsetY),this.ctx.transform(i.matrix[0],i.matrix[1],i.matrix[2],i.matrix[3],i.matrix[4],i.matrix[5]),this.ctx.translate(-i.offsetX,-i.offsetY)),QI(i)&&(this.path(i.path),this.ctx.clip()),this._activeEffects.push(i)},n.prototype.popEffect=function(){this._activeEffects.pop(),this.ctx.restore()},n.prototype.renderStack=function(i){return bc(this,void 0,void 0,function(){var l;return Yl(this,function(h){switch(h.label){case 0:return l=i.element.container.styles,l.isVisible()?[4,this.renderStackContent(i)]:[3,2];case 1:h.sent(),h.label=2;case 2:return[2]}})})},n.prototype.renderNode=function(i){return bc(this,void 0,void 0,function(){return Yl(this,function(l){switch(l.label){case 0:if(ba(i.container.flags,16))debugger;return i.container.styles.isVisible()?[4,this.renderNodeBackgroundAndBorders(i)]:[3,3];case 1:return l.sent(),[4,this.renderNodeContent(i)];case 2:l.sent(),l.label=3;case 3:return[2]}})})},n.prototype.renderTextWithLetterSpacing=function(i,l,h){var d=this;if(l===0)this.ctx.fillText(i.text,i.bounds.left,i.bounds.top+h);else{var m=ox(i.text);m.reduce(function(o,x){return d.ctx.fillText(x,o,i.bounds.top+h),o+d.ctx.measureText(x).width},i.bounds.left)}},n.prototype.createFontStyle=function(i){var l=i.fontVariant.filter(function(m){return m==="normal"||m==="small-caps"}).join(""),h=i7(i.fontFamily).join(", "),d=eg(i.fontSize)?""+i.fontSize.number+i.fontSize.unit:i.fontSize.number+"px";return[[i.fontStyle,l,i.fontWeight,d,h].join(" "),h,d]},n.prototype.renderTextNode=function(i,l){return bc(this,void 0,void 0,function(){var h,d,m,o,x,E,I,D,O=this;return Yl(this,function(P){return h=this.createFontStyle(l),d=h[0],m=h[1],o=h[2],this.ctx.font=d,this.ctx.direction=l.direction===1?"rtl":"ltr",this.ctx.textAlign="left",this.ctx.textBaseline="alphabetic",x=this.fontMetrics.getMetrics(m,o),E=x.baseline,I=x.middle,D=l.paintOrder,i.textBounds.forEach(function(W){D.forEach(function(z){switch(z){case 0:O.ctx.fillStyle=tl(l.color),O.renderTextWithLetterSpacing(W,l.letterSpacing,E);var H=l.textShadow;H.length&&W.text.trim().length&&(H.slice(0).reverse().forEach(function(Z){O.ctx.shadowColor=tl(Z.color),O.ctx.shadowOffsetX=Z.offsetX.number*O.options.scale,O.ctx.shadowOffsetY=Z.offsetY.number*O.options.scale,O.ctx.shadowBlur=Z.blur.number,O.renderTextWithLetterSpacing(W,l.letterSpacing,E)}),O.ctx.shadowColor="",O.ctx.shadowOffsetX=0,O.ctx.shadowOffsetY=0,O.ctx.shadowBlur=0),l.textDecorationLine.length&&(O.ctx.fillStyle=tl(l.textDecorationColor||l.color),l.textDecorationLine.forEach(function(Z){switch(Z){case 1:O.ctx.fillRect(W.bounds.left,Math.round(W.bounds.top+E),W.bounds.width,1);break;case 2:O.ctx.fillRect(W.bounds.left,Math.round(W.bounds.top),W.bounds.width,1);break;case 3:O.ctx.fillRect(W.bounds.left,Math.ceil(W.bounds.top+I),W.bounds.width,1);break}}));break;case 1:l.webkitTextStrokeWidth&&W.text.trim().length&&(O.ctx.strokeStyle=tl(l.webkitTextStrokeColor),O.ctx.lineWidth=l.webkitTextStrokeWidth,O.ctx.lineJoin=window.chrome?"miter":"round",O.ctx.strokeText(W.text,W.bounds.left,W.bounds.top+E)),O.ctx.strokeStyle="",O.ctx.lineWidth=0,O.ctx.lineJoin="miter";break}})}),[2]})})},n.prototype.renderReplacedElement=function(i,l,h){if(h&&i.intrinsicWidth>0&&i.intrinsicHeight>0){var d=ly(i),m=ay(l);this.path(m),this.ctx.save(),this.ctx.clip(),this.ctx.drawImage(h,0,0,i.intrinsicWidth,i.intrinsicHeight,d.left,d.top,d.width,d.height),this.ctx.restore()}},n.prototype.renderNodeContent=function(i){return bc(this,void 0,void 0,function(){var l,h,d,m,o,x,ie,ie,E,I,D,O,he,P,W,Ie,z,H,Z,ie,ce,he,Ie;return Yl(this,function(Ve){switch(Ve.label){case 0:this.applyEffects(i.getEffects(4)),l=i.container,h=i.curves,d=l.styles,m=0,o=l.textNodes,Ve.label=1;case 1:return m<o.length?(x=o[m],[4,this.renderTextNode(x,d)]):[3,4];case 2:Ve.sent(),Ve.label=3;case 3:return m++,[3,1];case 4:if(!(l instanceof xI))return[3,8];Ve.label=5;case 5:return Ve.trys.push([5,7,,8]),[4,this.context.cache.match(l.src)];case 6:return ie=Ve.sent(),this.renderReplacedElement(l,h,ie),[3,8];case 7:return Ve.sent(),this.context.logger.error("Error loading image "+l.src),[3,8];case 8:if(l instanceof bI&&this.renderReplacedElement(l,h,l.canvas),!(l instanceof BI))return[3,12];Ve.label=9;case 9:return Ve.trys.push([9,11,,12]),[4,this.context.cache.match(l.svg)];case 10:return ie=Ve.sent(),this.renderReplacedElement(l,h,ie),[3,12];case 11:return Ve.sent(),this.context.logger.error("Error loading svg "+l.svg.substring(0,255)),[3,12];case 12:return l instanceof FI&&l.tree?(E=new n(this.context,{scale:this.options.scale,backgroundColor:l.backgroundColor,x:0,y:0,width:l.width,height:l.height}),[4,E.render(l.tree)]):[3,14];case 13:I=Ve.sent(),l.width&&l.height&&this.ctx.drawImage(I,0,0,l.width,l.height,l.bounds.left,l.bounds.top,l.bounds.width,l.bounds.height),Ve.label=14;case 14:if(l instanceof ax&&(D=Math.min(l.bounds.width,l.bounds.height),l.type===ry?l.checked&&(this.ctx.save(),this.path([new jr(l.bounds.left+D*.39363,l.bounds.top+D*.79),new jr(l.bounds.left+D*.16,l.bounds.top+D*.5549),new jr(l.bounds.left+D*.27347,l.bounds.top+D*.44071),new jr(l.bounds.left+D*.39694,l.bounds.top+D*.5649),new jr(l.bounds.left+D*.72983,l.bounds.top+D*.23),new jr(l.bounds.left+D*.84,l.bounds.top+D*.34085),new jr(l.bounds.left+D*.39363,l.bounds.top+D*.79)]),this.ctx.fillStyle=tl(LB),this.ctx.fill(),this.ctx.restore()):l.type===ny&&l.checked&&(this.ctx.save(),this.ctx.beginPath(),this.ctx.arc(l.bounds.left+D/2,l.bounds.top+D/2,D/4,0,Math.PI*2,!0),this.ctx.fillStyle=tl(LB),this.ctx.fill(),this.ctx.restore())),e7(l)&&l.value.length){switch(O=this.createFontStyle(d),he=O[0],P=O[1],W=this.fontMetrics.getMetrics(he,P).baseline,this.ctx.font=he,this.ctx.fillStyle=tl(d.color),this.ctx.textBaseline="alphabetic",this.ctx.textAlign=r7(l.styles.textAlign),Ie=ly(l),z=0,l.styles.textAlign){case 1:z+=Ie.width/2;break;case 2:z+=Ie.width;break}H=Ie.add(z,0,0,-Ie.height/2+1),this.ctx.save(),this.path([new jr(Ie.left,Ie.top),new jr(Ie.left+Ie.width,Ie.top),new jr(Ie.left+Ie.width,Ie.top+Ie.height),new jr(Ie.left,Ie.top+Ie.height)]),this.ctx.clip(),this.renderTextWithLetterSpacing(new Tm(l.value,H),d.letterSpacing,W),this.ctx.restore(),this.ctx.textBaseline="alphabetic",this.ctx.textAlign="left"}if(!ba(l.styles.display,2048))return[3,20];if(l.styles.listStyleImage===null)return[3,19];if(Z=l.styles.listStyleImage,Z.type!==0)return[3,18];ie=void 0,ce=Z.url,Ve.label=15;case 15:return Ve.trys.push([15,17,,18]),[4,this.context.cache.match(ce)];case 16:return ie=Ve.sent(),this.ctx.drawImage(ie,l.bounds.left-(ie.width+10),l.bounds.top),[3,18];case 17:return Ve.sent(),this.context.logger.error("Error loading list-style-image "+ce),[3,18];case 18:return[3,20];case 19:i.listValue&&l.styles.listStyleType!==-1&&(he=this.createFontStyle(d)[0],this.ctx.font=he,this.ctx.fillStyle=tl(d.color),this.ctx.textBaseline="middle",this.ctx.textAlign="right",Ie=new zh(l.bounds.left,l.bounds.top+Ms(l.styles.paddingTop,l.bounds.width),l.bounds.width,pB(d.lineHeight,d.fontSize.number)/2+1),this.renderTextWithLetterSpacing(new Tm(i.listValue,Ie),d.letterSpacing,pB(d.lineHeight,d.fontSize.number)/2+2),this.ctx.textBaseline="bottom",this.ctx.textAlign="left"),Ve.label=20;case 20:return[2]}})})},n.prototype.renderStackContent=function(i){return bc(this,void 0,void 0,function(){var l,h,Z,d,m,Z,o,x,Z,E,I,Z,D,O,Z,P,W,Z,z,H,Z;return Yl(this,function(ie){switch(ie.label){case 0:if(ba(i.element.container.flags,16))debugger;return[4,this.renderNodeBackgroundAndBorders(i.element)];case 1:ie.sent(),l=0,h=i.negativeZIndex,ie.label=2;case 2:return l<h.length?(Z=h[l],[4,this.renderStack(Z)]):[3,5];case 3:ie.sent(),ie.label=4;case 4:return l++,[3,2];case 5:return[4,this.renderNodeContent(i.element)];case 6:ie.sent(),d=0,m=i.nonInlineLevel,ie.label=7;case 7:return d<m.length?(Z=m[d],[4,this.renderNode(Z)]):[3,10];case 8:ie.sent(),ie.label=9;case 9:return d++,[3,7];case 10:o=0,x=i.nonPositionedFloats,ie.label=11;case 11:return o<x.length?(Z=x[o],[4,this.renderStack(Z)]):[3,14];case 12:ie.sent(),ie.label=13;case 13:return o++,[3,11];case 14:E=0,I=i.nonPositionedInlineLevel,ie.label=15;case 15:return E<I.length?(Z=I[E],[4,this.renderStack(Z)]):[3,18];case 16:ie.sent(),ie.label=17;case 17:return E++,[3,15];case 18:D=0,O=i.inlineLevel,ie.label=19;case 19:return D<O.length?(Z=O[D],[4,this.renderNode(Z)]):[3,22];case 20:ie.sent(),ie.label=21;case 21:return D++,[3,19];case 22:P=0,W=i.zeroOrAutoZIndexOrTransformedOrOpacity,ie.label=23;case 23:return P<W.length?(Z=W[P],[4,this.renderStack(Z)]):[3,26];case 24:ie.sent(),ie.label=25;case 25:return P++,[3,23];case 26:z=0,H=i.positiveZIndex,ie.label=27;case 27:return z<H.length?(Z=H[z],[4,this.renderStack(Z)]):[3,30];case 28:ie.sent(),ie.label=29;case 29:return z++,[3,27];case 30:return[2]}})})},n.prototype.mask=function(i){this.ctx.beginPath(),this.ctx.moveTo(0,0),this.ctx.lineTo(this.canvas.width,0),this.ctx.lineTo(this.canvas.width,this.canvas.height),this.ctx.lineTo(0,this.canvas.height),this.ctx.lineTo(0,0),this.formatPath(i.slice(0).reverse()),this.ctx.closePath()},n.prototype.path=function(i){this.ctx.beginPath(),this.formatPath(i),this.ctx.closePath()},n.prototype.formatPath=function(i){var l=this;i.forEach(function(h,d){var m=tu(h)?h.start:h;d===0?l.ctx.moveTo(m.x,m.y):l.ctx.lineTo(m.x,m.y),tu(h)&&l.ctx.bezierCurveTo(h.startControl.x,h.startControl.y,h.endControl.x,h.endControl.y,h.end.x,h.end.y)})},n.prototype.renderRepeat=function(i,l,h,d){this.path(i),this.ctx.fillStyle=l,this.ctx.translate(h,d),this.ctx.fill(),this.ctx.translate(-h,-d)},n.prototype.resizeImage=function(i,l,h){var d;if(i.width===l&&i.height===h)return i;var m=(d=this.canvas.ownerDocument)!==null&&d!==void 0?d:document,o=m.createElement("canvas");o.width=Math.max(1,l),o.height=Math.max(1,h);var x=o.getContext("2d");return x.drawImage(i,0,0,i.width,i.height,0,0,l,h),o},n.prototype.renderBackgroundImage=function(i){return bc(this,void 0,void 0,function(){var l,h,d,m,o,x;return Yl(this,function(E){switch(E.label){case 0:l=i.styles.backgroundImage.length-1,h=function(I){var D,O,P,nt,ht,Je,Ue,Fe,Pe,W,nt,ht,Je,Ue,Fe,z,H,Z,ie,ce,he,Ie,Ve,Me,Pe,xe,nt,pe,_e,Ue,Fe,pt,ht,Je,ze,je,xt,Re,oe,Se,Ne,Ye;return Yl(this,function(lt){switch(lt.label){case 0:if(I.type!==0)return[3,5];D=void 0,O=I.url,lt.label=1;case 1:return lt.trys.push([1,3,,4]),[4,d.context.cache.match(O)];case 2:return D=lt.sent(),[3,4];case 3:return lt.sent(),d.context.logger.error("Error loading background-image "+O),[3,4];case 4:return D&&(P=L1(i,l,[D.width,D.height,D.width/D.height]),nt=P[0],ht=P[1],Je=P[2],Ue=P[3],Fe=P[4],Pe=d.ctx.createPattern(d.resizeImage(D,Ue,Fe),"repeat"),d.renderRepeat(nt,Pe,ht,Je)),[3,6];case 5:QQ(I)?(W=L1(i,l,[null,null,null]),nt=W[0],ht=W[1],Je=W[2],Ue=W[3],Fe=W[4],z=kQ(I.angle,Ue,Fe),H=z[0],Z=z[1],ie=z[2],ce=z[3],he=z[4],Ie=document.createElement("canvas"),Ie.width=Ue,Ie.height=Fe,Ve=Ie.getContext("2d"),Me=Ve.createLinearGradient(Z,ce,ie,he),dB(I.stops,H).forEach(function(rt){return Me.addColorStop(rt.stop,tl(rt.color))}),Ve.fillStyle=Me,Ve.fillRect(0,0,Ue,Fe),Ue>0&&Fe>0&&(Pe=d.ctx.createPattern(Ie,"repeat"),d.renderRepeat(nt,Pe,ht,Je))):OQ(I)&&(xe=L1(i,l,[null,null,null]),nt=xe[0],pe=xe[1],_e=xe[2],Ue=xe[3],Fe=xe[4],pt=I.position.length===0?[nx]:I.position,ht=Ms(pt[0],Ue),Je=Ms(pt[pt.length-1],Fe),ze=UQ(I,ht,Je,Ue,Fe),je=ze[0],xt=ze[1],je>0&&xt>0&&(Re=d.ctx.createRadialGradient(pe+ht,_e+Je,0,pe+ht,_e+Je,je),dB(I.stops,je*2).forEach(function(rt){return Re.addColorStop(rt.stop,tl(rt.color))}),d.path(nt),d.ctx.fillStyle=Re,je!==xt?(oe=i.bounds.left+.5*i.bounds.width,Se=i.bounds.top+.5*i.bounds.height,Ne=xt/je,Ye=1/Ne,d.ctx.save(),d.ctx.translate(oe,Se),d.ctx.transform(1,0,0,Ne,0,0),d.ctx.translate(-oe,-Se),d.ctx.fillRect(pe,Ye*(_e-Se)+Se,Ue,Fe*Ye),d.ctx.restore()):d.ctx.fill())),lt.label=6;case 6:return l--,[2]}})},d=this,m=0,o=i.styles.backgroundImage.slice(0).reverse(),E.label=1;case 1:return m<o.length?(x=o[m],[5,h(x)]):[3,4];case 2:E.sent(),E.label=3;case 3:return m++,[3,1];case 4:return[2]}})})},n.prototype.renderSolidBorder=function(i,l,h){return bc(this,void 0,void 0,function(){return Yl(this,function(d){return this.path(VB(h,l)),this.ctx.fillStyle=tl(i),this.ctx.fill(),[2]})})},n.prototype.renderDoubleBorder=function(i,l,h,d){return bc(this,void 0,void 0,function(){var m,o;return Yl(this,function(x){switch(x.label){case 0:return l<3?[4,this.renderSolidBorder(i,h,d)]:[3,2];case 1:return x.sent(),[2];case 2:return m=jz(d,h),this.path(m),this.ctx.fillStyle=tl(i),this.ctx.fill(),o=Vz(d,h),this.path(o),this.ctx.fill(),[2]}})})},n.prototype.renderNodeBackgroundAndBorders=function(i){return bc(this,void 0,void 0,function(){var l,h,d,m,o,x,E,I,D=this;return Yl(this,function(O){switch(O.label){case 0:return this.applyEffects(i.getEffects(2)),l=i.container.styles,h=!vd(l.backgroundColor)||l.backgroundImage.length,d=[{style:l.borderTopStyle,color:l.borderTopColor,width:l.borderTopWidth},{style:l.borderRightStyle,color:l.borderRightColor,width:l.borderRightWidth},{style:l.borderBottomStyle,color:l.borderBottomColor,width:l.borderBottomWidth},{style:l.borderLeftStyle,color:l.borderLeftColor,width:l.borderLeftWidth}],m=t7(tp(l.backgroundClip,0),i.curves),h||l.boxShadow.length?(this.ctx.save(),this.path(m),this.ctx.clip(),vd(l.backgroundColor)||(this.ctx.fillStyle=tl(l.backgroundColor),this.ctx.fill()),[4,this.renderBackgroundImage(i.container)]):[3,2];case 1:O.sent(),this.ctx.restore(),l.boxShadow.slice(0).reverse().forEach(function(P){D.ctx.save();var W=oy(i.curves),z=P.inset?0:Yz,H=zz(W,-z+(P.inset?1:-1)*P.spread.number,(P.inset?1:-1)*P.spread.number,P.spread.number*(P.inset?-2:2),P.spread.number*(P.inset?-2:2));P.inset?(D.path(W),D.ctx.clip(),D.mask(H)):(D.mask(W),D.ctx.clip(),D.path(H)),D.ctx.shadowOffsetX=P.offsetX.number+z,D.ctx.shadowOffsetY=P.offsetY.number,D.ctx.shadowColor=tl(P.color),D.ctx.shadowBlur=P.blur.number,D.ctx.fillStyle=P.inset?tl(P.color):"rgba(0,0,0,1)",D.ctx.fill(),D.ctx.restore()}),O.label=2;case 2:o=0,x=0,E=d,O.label=3;case 3:return x<E.length?(I=E[x],I.style!==0&&!vd(I.color)&&I.width>0?I.style!==2?[3,5]:[4,this.renderDashedDottedBorder(I.color,I.width,o,i.curves,2)]:[3,11]):[3,13];case 4:return O.sent(),[3,11];case 5:return I.style!==3?[3,7]:[4,this.renderDashedDottedBorder(I.color,I.width,o,i.curves,3)];case 6:return O.sent(),[3,11];case 7:return I.style!==4?[3,9]:[4,this.renderDoubleBorder(I.color,I.width,o,i.curves)];case 8:return O.sent(),[3,11];case 9:return[4,this.renderSolidBorder(I.color,o,i.curves)];case 10:O.sent(),O.label=11;case 11:o++,O.label=12;case 12:return x++,[3,3];case 13:return[2]}})})},n.prototype.renderDashedDottedBorder=function(i,l,h,d,m){return bc(this,void 0,void 0,function(){var o,x,E,I,D,O,P,W,z,H,Z,ie,ce,he,Ie,Ve,Ie,Ve;return Yl(this,function(Me){return this.ctx.save(),o=Gz(d,h),x=VB(d,h),m===2&&(this.path(x),this.ctx.clip()),tu(x[0])?(E=x[0].start.x,I=x[0].start.y):(E=x[0].x,I=x[0].y),tu(x[1])?(D=x[1].end.x,O=x[1].end.y):(D=x[1].x,O=x[1].y),h===0||h===2?P=Math.abs(E-D):P=Math.abs(I-O),this.ctx.beginPath(),m===3?this.formatPath(o):this.formatPath(x.slice(0,2)),W=l<3?l*3:l*2,z=l<3?l*2:l,m===3&&(W=l,z=l),H=!0,P<=W*2?H=!1:P<=W*2+z?(Z=P/(2*W+z),W*=Z,z*=Z):(ie=Math.floor((P+z)/(W+z)),ce=(P-ie*W)/(ie-1),he=(P-(ie+1)*W)/ie,z=he<=0||Math.abs(z-ce)<Math.abs(z-he)?ce:he),H&&(m===3?this.ctx.setLineDash([0,W+z]):this.ctx.setLineDash([W,z])),m===3?(this.ctx.lineCap="round",this.ctx.lineWidth=l):this.ctx.lineWidth=l*2+1.1,this.ctx.strokeStyle=tl(i),this.ctx.stroke(),this.ctx.setLineDash([]),m===2&&(tu(x[0])&&(Ie=x[3],Ve=x[0],this.ctx.beginPath(),this.formatPath([new jr(Ie.end.x,Ie.end.y),new jr(Ve.start.x,Ve.start.y)]),this.ctx.stroke()),tu(x[1])&&(Ie=x[1],Ve=x[2],this.ctx.beginPath(),this.formatPath([new jr(Ie.end.x,Ie.end.y),new jr(Ve.start.x,Ve.start.y)]),this.ctx.stroke())),this.ctx.restore(),[2]})})},n.prototype.render=function(i){return bc(this,void 0,void 0,function(){var l;return Yl(this,function(h){switch(h.label){case 0:return this.options.backgroundColor&&(this.ctx.fillStyle=tl(this.options.backgroundColor),this.ctx.fillRect(this.options.x,this.options.y,this.options.width,this.options.height)),l=Hz(i),[4,this.renderStack(l)];case 1:return h.sent(),this.applyEffects([]),[2,this.canvas]}})})},n})(VI),e7=function(e){return e instanceof SI||e instanceof EI?!0:e instanceof ax&&e.type!==ny&&e.type!==ry},t7=function(e,n){switch(e){case 0:return oy(n);case 2:return Dz(n);case 1:default:return ay(n)}},r7=function(e){switch(e){case 1:return"center";case 2:return"right";case 0:default:return"left"}},n7=["-apple-system","system-ui"],i7=function(e){return/iPhone OS 15_(0|1)/.test(window.navigator.userAgent)?e.filter(function(n){return n7.indexOf(n)===-1}):e},s7=(function(e){Lu(n,e);function n(i,l){var h=e.call(this,i,l)||this;return h.canvas=l.canvas?l.canvas:document.createElement("canvas"),h.ctx=h.canvas.getContext("2d"),h.options=l,h.canvas.width=Math.floor(l.width*l.scale),h.canvas.height=Math.floor(l.height*l.scale),h.canvas.style.width=l.width+"px",h.canvas.style.height=l.height+"px",h.ctx.scale(h.options.scale,h.options.scale),h.ctx.translate(-l.x,-l.y),h.context.logger.debug("EXPERIMENTAL ForeignObject renderer initialized ("+l.width+"x"+l.height+" at "+l.x+","+l.y+") with scale "+l.scale),h}return n.prototype.render=function(i){return bc(this,void 0,void 0,function(){var l,h;return Yl(this,function(d){switch(d.label){case 0:return l=tw(this.options.width*this.options.scale,this.options.height*this.options.scale,this.options.scale,this.options.scale,i),[4,o7(l)];case 1:return h=d.sent(),this.options.backgroundColor&&(this.ctx.fillStyle=tl(this.options.backgroundColor),this.ctx.fillRect(0,0,this.options.width*this.options.scale,this.options.height*this.options.scale)),this.ctx.drawImage(h,-this.options.x*this.options.scale,-this.options.y*this.options.scale),[2,this.canvas]}})})},n})(VI),o7=function(e){return new Promise(function(n,i){var l=new Image;l.onload=function(){n(l)},l.onerror=i,l.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(e))})},a7=(function(){function e(n){var i=n.id,l=n.enabled;this.id=i,this.enabled=l,this.start=Date.now()}return e.prototype.debug=function(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];this.enabled&&(typeof window<"u"&&window.console&&typeof console.debug=="function"?console.debug.apply(console,Wg([this.id,this.getTime()+"ms"],n)):this.info.apply(this,n))},e.prototype.getTime=function(){return Date.now()-this.start},e.prototype.info=function(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];this.enabled&&typeof window<"u"&&window.console&&typeof console.info=="function"&&console.info.apply(console,Wg([this.id,this.getTime()+"ms"],n))},e.prototype.warn=function(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];this.enabled&&(typeof window<"u"&&window.console&&typeof console.warn=="function"?console.warn.apply(console,Wg([this.id,this.getTime()+"ms"],n)):this.info.apply(this,n))},e.prototype.error=function(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];this.enabled&&(typeof window<"u"&&window.console&&typeof console.error=="function"?console.error.apply(console,Wg([this.id,this.getTime()+"ms"],n)):this.info.apply(this,n))},e.instances={},e})(),l7=(function(){function e(n,i){var l;this.windowBounds=i,this.instanceName="#"+e.instanceCount++,this.logger=new a7({id:this.instanceName,enabled:n.logging}),this.cache=(l=n.cache)!==null&&l!==void 0?l:new Fz(this,n)}return e.instanceCount=1,e})(),GI=function(e,n){return n===void 0&&(n={}),c7(e,n)};typeof window<"u"&&NI.setContext(window);var c7=function(e,n){return bc(void 0,void 0,void 0,function(){var i,l,h,d,m,o,x,E,I,D,O,P,W,z,H,Z,ie,ce,he,Ie,Me,Ve,Me,Pe,xe,nt,pe,_e,Ue,Fe,pt,ht,Je,ze,je,xt,Re,oe,Se,Ne;return Yl(this,function(Ye){switch(Ye.label){case 0:if(!e||typeof e!="object")return[2,Promise.reject("Invalid element provided as first argument")];if(i=e.ownerDocument,!i)throw new Error("Element is not attached to a Document");if(l=i.defaultView,!l)throw new Error("Document is not attached to a Window");return h={allowTaint:(Pe=n.allowTaint)!==null&&Pe!==void 0?Pe:!1,imageTimeout:(xe=n.imageTimeout)!==null&&xe!==void 0?xe:15e3,proxy:n.proxy,useCORS:(nt=n.useCORS)!==null&&nt!==void 0?nt:!1},d=O_({logging:(pe=n.logging)!==null&&pe!==void 0?pe:!0,cache:n.cache},h),m={windowWidth:(_e=n.windowWidth)!==null&&_e!==void 0?_e:l.innerWidth,windowHeight:(Ue=n.windowHeight)!==null&&Ue!==void 0?Ue:l.innerHeight,scrollX:(Fe=n.scrollX)!==null&&Fe!==void 0?Fe:l.pageXOffset,scrollY:(pt=n.scrollY)!==null&&pt!==void 0?pt:l.pageYOffset},o=new zh(m.scrollX,m.scrollY,m.windowWidth,m.windowHeight),x=new l7(d,o),E=(ht=n.foreignObjectRendering)!==null&&ht!==void 0?ht:!1,I={allowTaint:(Je=n.allowTaint)!==null&&Je!==void 0?Je:!1,onclone:n.onclone,ignoreElements:n.ignoreElements,inlineImages:E,copyStyles:E},x.logger.debug("Starting document clone with size "+o.width+"x"+o.height+" scrolled to "+-o.left+","+-o.top),D=new zB(x,e,I),O=D.clonedReferenceElement,O?[4,D.toIFrame(i,o)]:[2,Promise.reject("Unable to find element in cloned iframe")];case 1:return P=Ye.sent(),W=lx(O)||uz(O)?z6(O.ownerDocument):Oy(x,O),z=W.width,H=W.height,Z=W.left,ie=W.top,ce=A7(x,O,n.backgroundColor),he={canvas:n.canvas,backgroundColor:ce,scale:(je=(ze=n.scale)!==null&&ze!==void 0?ze:l.devicePixelRatio)!==null&&je!==void 0?je:1,x:((xt=n.x)!==null&&xt!==void 0?xt:0)+Z,y:((Re=n.y)!==null&&Re!==void 0?Re:0)+ie,width:(oe=n.width)!==null&&oe!==void 0?oe:Math.ceil(z),height:(Se=n.height)!==null&&Se!==void 0?Se:Math.ceil(H)},E?(x.logger.debug("Document cloned, using foreign object rendering"),Me=new s7(x,he),[4,Me.render(O)]):[3,3];case 2:return Ie=Ye.sent(),[3,5];case 3:return x.logger.debug("Document cloned, element located at "+Z+","+ie+" with size "+z+"x"+H+" using computed rendering"),x.logger.debug("Starting DOM parsing"),Ve=TI(x,O),ce===Ve.styles.backgroundColor&&(Ve.styles.backgroundColor=Nh.TRANSPARENT),x.logger.debug("Starting renderer for element at "+he.x+","+he.y+" with size "+he.width+"x"+he.height),Me=new Jz(x,he),[4,Me.render(Ve)];case 4:Ie=Ye.sent(),Ye.label=5;case 5:return(!((Ne=n.removeContainer)!==null&&Ne!==void 0)||Ne)&&(zB.destroy(P)||x.logger.error("Cannot detach cloned iframe as it is not in the DOM anymore")),x.logger.debug("Finished rendering"),[2,Ie]}})})},A7=function(e,n,i){var l=n.ownerDocument,h=l.documentElement?Fm(e,getComputedStyle(l.documentElement).backgroundColor):Nh.TRANSPARENT,d=l.body?Fm(e,getComputedStyle(l.body).backgroundColor):Nh.TRANSPARENT,m=typeof i=="string"?Fm(e,i):i===null?Nh.TRANSPARENT:4294967295;return n===l.documentElement?vd(h)?vd(d)?m:d:h:m};const u7=Object.freeze(Object.defineProperty({__proto__:null,default:GI},Symbol.toStringTag,{value:"Module"})),h7="modulepreload",d7=function(e){return"/Domapus/"+e},KB={},M1=function(n,i,l){let h=Promise.resolve();if(i&&i.length>0){let x=function(E){return Promise.all(E.map(I=>Promise.resolve(I).then(D=>({status:"fulfilled",value:D}),D=>({status:"rejected",reason:D}))))};document.getElementsByTagName("link");const m=document.querySelector("meta[property=csp-nonce]"),o=m?.nonce||m?.getAttribute("nonce");h=x(i.map(E=>{if(E=d7(E),E in KB)return;KB[E]=!0;const I=E.endsWith(".css"),D=I?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${E}"]${D}`))return;const O=document.createElement("link");if(O.rel=I?"stylesheet":h7,I||(O.as="script"),O.crossOrigin="",O.href=E,o&&O.setAttribute("nonce",o),document.head.appendChild(O),I)return new Promise((P,W)=>{O.addEventListener("load",P),O.addEventListener("error",()=>W(new Error(`Unable to preload CSS for ${E}`)))})}))}function d(m){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=m,window.dispatchEvent(o),!o.defaultPrevented)throw m}return h.then(m=>{for(const o of m||[])o.status==="rejected"&&d(o.reason);return n().catch(d)})};function rs(e){"@babel/helpers - typeof";return rs=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},rs(e)}function f7(e){if(Array.isArray(e))return e}function p7(e,n){var i=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(i!=null){var l,h,d,m,o=[],x=!0,E=!1;try{if(d=(i=i.call(e)).next,n!==0)for(;!(x=(l=d.call(i)).done)&&(o.push(l.value),o.length!==n);x=!0);}catch(I){E=!0,h=I}finally{try{if(!x&&i.return!=null&&(m=i.return(),Object(m)!==m))return}finally{if(E)throw h}}return o}}function qB(e,n){(n==null||n>e.length)&&(n=e.length);for(var i=0,l=Array(n);i<n;i++)l[i]=e[i];return l}function m7(e,n){if(e){if(typeof e=="string")return qB(e,n);var i={}.toString.call(e).slice(8,-1);return i==="Object"&&e.constructor&&(i=e.constructor.name),i==="Map"||i==="Set"?Array.from(e):i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?qB(e,n):void 0}}function g7(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function $B(e,n){return f7(e)||p7(e,n)||m7(e,n)||g7()}function WB(e,n="utf8"){return new TextDecoder(n).decode(e)}const y7=new TextEncoder;function v7(e){return y7.encode(e)}const _7=1024*8,w7=(()=>{const e=new Uint8Array(4),n=new Uint32Array(e.buffer);return!((n[0]=1)&e[0])})(),k1={int8:globalThis.Int8Array,uint8:globalThis.Uint8Array,int16:globalThis.Int16Array,uint16:globalThis.Uint16Array,int32:globalThis.Int32Array,uint32:globalThis.Uint32Array,uint64:globalThis.BigUint64Array,int64:globalThis.BigInt64Array,float32:globalThis.Float32Array,float64:globalThis.Float64Array};class cx{buffer;byteLength;byteOffset;length;offset;lastWrittenByte;littleEndian;_data;_mark;_marks;constructor(n=_7,i={}){let l=!1;typeof n=="number"?n=new ArrayBuffer(n):(l=!0,this.lastWrittenByte=n.byteLength);const h=i.offset?i.offset>>>0:0,d=n.byteLength-h;let m=h;(ArrayBuffer.isView(n)||n instanceof cx)&&(n.byteLength!==n.buffer.byteLength&&(m=n.byteOffset+h),n=n.buffer),l?this.lastWrittenByte=d:this.lastWrittenByte=0,this.buffer=n,this.length=d,this.byteLength=d,this.byteOffset=m,this.offset=0,this.littleEndian=!0,this._data=new DataView(this.buffer,m,d),this._mark=0,this._marks=[]}available(n=1){return this.offset+n<=this.length}isLittleEndian(){return this.littleEndian}setLittleEndian(){return this.littleEndian=!0,this}isBigEndian(){return!this.littleEndian}setBigEndian(){return this.littleEndian=!1,this}skip(n=1){return this.offset+=n,this}back(n=1){return this.offset-=n,this}seek(n){return this.offset=n,this}mark(){return this._mark=this.offset,this}reset(){return this.offset=this._mark,this}pushMark(){return this._marks.push(this.offset),this}popMark(){const n=this._marks.pop();if(n===void 0)throw new Error("Mark stack empty");return this.seek(n),this}rewind(){return this.offset=0,this}ensureAvailable(n=1){if(!this.available(n)){const l=(this.offset+n)*2,h=new Uint8Array(l);h.set(new Uint8Array(this.buffer)),this.buffer=h.buffer,this.length=l,this.byteLength=l,this._data=new DataView(this.buffer)}return this}readBoolean(){return this.readUint8()!==0}readInt8(){return this._data.getInt8(this.offset++)}readUint8(){return this._data.getUint8(this.offset++)}readByte(){return this.readUint8()}readBytes(n=1){return this.readArray(n,"uint8")}readArray(n,i){const l=k1[i].BYTES_PER_ELEMENT*n,h=this.byteOffset+this.offset,d=this.buffer.slice(h,h+l);if(this.littleEndian===w7&&i!=="uint8"&&i!=="int8"){const o=new Uint8Array(this.buffer.slice(h,h+l));o.reverse();const x=new k1[i](o.buffer);return this.offset+=l,x.reverse(),x}const m=new k1[i](d);return this.offset+=l,m}readInt16(){const n=this._data.getInt16(this.offset,this.littleEndian);return this.offset+=2,n}readUint16(){const n=this._data.getUint16(this.offset,this.littleEndian);return this.offset+=2,n}readInt32(){const n=this._data.getInt32(this.offset,this.littleEndian);return this.offset+=4,n}readUint32(){const n=this._data.getUint32(this.offset,this.littleEndian);return this.offset+=4,n}readFloat32(){const n=this._data.getFloat32(this.offset,this.littleEndian);return this.offset+=4,n}readFloat64(){const n=this._data.getFloat64(this.offset,this.littleEndian);return this.offset+=8,n}readBigInt64(){const n=this._data.getBigInt64(this.offset,this.littleEndian);return this.offset+=8,n}readBigUint64(){const n=this._data.getBigUint64(this.offset,this.littleEndian);return this.offset+=8,n}readChar(){return String.fromCharCode(this.readInt8())}readChars(n=1){let i="";for(let l=0;l<n;l++)i+=this.readChar();return i}readUtf8(n=1){return WB(this.readBytes(n))}decodeText(n=1,i="utf8"){return WB(this.readBytes(n),i)}writeBoolean(n){return this.writeUint8(n?255:0),this}writeInt8(n){return this.ensureAvailable(1),this._data.setInt8(this.offset++,n),this._updateLastWrittenByte(),this}writeUint8(n){return this.ensureAvailable(1),this._data.setUint8(this.offset++,n),this._updateLastWrittenByte(),this}writeByte(n){return this.writeUint8(n)}writeBytes(n){this.ensureAvailable(n.length);for(let i=0;i<n.length;i++)this._data.setUint8(this.offset++,n[i]);return this._updateLastWrittenByte(),this}writeInt16(n){return this.ensureAvailable(2),this._data.setInt16(this.offset,n,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeUint16(n){return this.ensureAvailable(2),this._data.setUint16(this.offset,n,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeInt32(n){return this.ensureAvailable(4),this._data.setInt32(this.offset,n,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeUint32(n){return this.ensureAvailable(4),this._data.setUint32(this.offset,n,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat32(n){return this.ensureAvailable(4),this._data.setFloat32(this.offset,n,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat64(n){return this.ensureAvailable(8),this._data.setFloat64(this.offset,n,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigInt64(n){return this.ensureAvailable(8),this._data.setBigInt64(this.offset,n,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigUint64(n){return this.ensureAvailable(8),this._data.setBigUint64(this.offset,n,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeChar(n){return this.writeUint8(n.charCodeAt(0))}writeChars(n){for(let i=0;i<n.length;i++)this.writeUint8(n.charCodeAt(i));return this}writeUtf8(n){return this.writeBytes(v7(n))}toArray(){return new Uint8Array(this.buffer,this.byteOffset,this.lastWrittenByte)}getWrittenByteLength(){return this.lastWrittenByte-this.byteOffset}_updateLastWrittenByte(){this.offset>this.lastWrittenByte&&(this.lastWrittenByte=this.offset)}}function Sp(e){let n=e.length;for(;--n>=0;)e[n]=0}const x7=3,b7=258,KI=29,B7=256,C7=B7+1+KI,qI=30,E7=512,S7=new Array((C7+2)*2);Sp(S7);const F7=new Array(qI*2);Sp(F7);const I7=new Array(E7);Sp(I7);const T7=new Array(b7-x7+1);Sp(T7);const P7=new Array(KI);Sp(P7);const L7=new Array(qI);Sp(L7);const M7=(e,n,i,l)=>{let h=e&65535|0,d=e>>>16&65535|0,m=0;for(;i!==0;){m=i>2e3?2e3:i,i-=m;do h=h+n[l++]|0,d=d+h|0;while(--m);h%=65521,d%=65521}return h|d<<16|0};var lw=M7;const k7=()=>{let e,n=[];for(var i=0;i<256;i++){e=i;for(var l=0;l<8;l++)e=e&1?3988292384^e>>>1:e>>>1;n[i]=e}return n},U7=new Uint32Array(k7()),D7=(e,n,i,l)=>{const h=U7,d=l+i;e^=-1;for(let m=l;m<d;m++)e=e>>>8^h[(e^n[m])&255];return e^-1};var Xu=D7,cw={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},$I={Z_NO_FLUSH:0,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_DEFLATED:8};const R7=(e,n)=>Object.prototype.hasOwnProperty.call(e,n);var N7=function(e){const n=Array.prototype.slice.call(arguments,1);for(;n.length;){const i=n.shift();if(i){if(typeof i!="object")throw new TypeError(i+"must be non-object");for(const l in i)R7(i,l)&&(e[l]=i[l])}}return e},Q7=e=>{let n=0;for(let l=0,h=e.length;l<h;l++)n+=e[l].length;const i=new Uint8Array(n);for(let l=0,h=0,d=e.length;l<d;l++){let m=e[l];i.set(m,h),h+=m.length}return i},WI={assign:N7,flattenChunks:Q7};let ZI=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{ZI=!1}const jm=new Uint8Array(256);for(let e=0;e<256;e++)jm[e]=e>=252?6:e>=248?5:e>=240?4:e>=224?3:e>=192?2:1;jm[254]=jm[254]=1;var O7=e=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(e);let n,i,l,h,d,m=e.length,o=0;for(h=0;h<m;h++)i=e.charCodeAt(h),(i&64512)===55296&&h+1<m&&(l=e.charCodeAt(h+1),(l&64512)===56320&&(i=65536+(i-55296<<10)+(l-56320),h++)),o+=i<128?1:i<2048?2:i<65536?3:4;for(n=new Uint8Array(o),d=0,h=0;d<o;h++)i=e.charCodeAt(h),(i&64512)===55296&&h+1<m&&(l=e.charCodeAt(h+1),(l&64512)===56320&&(i=65536+(i-55296<<10)+(l-56320),h++)),i<128?n[d++]=i:i<2048?(n[d++]=192|i>>>6,n[d++]=128|i&63):i<65536?(n[d++]=224|i>>>12,n[d++]=128|i>>>6&63,n[d++]=128|i&63):(n[d++]=240|i>>>18,n[d++]=128|i>>>12&63,n[d++]=128|i>>>6&63,n[d++]=128|i&63);return n};const z7=(e,n)=>{if(n<65534&&e.subarray&&ZI)return String.fromCharCode.apply(null,e.length===n?e:e.subarray(0,n));let i="";for(let l=0;l<n;l++)i+=String.fromCharCode(e[l]);return i};var H7=(e,n)=>{const i=n||e.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(e.subarray(0,n));let l,h;const d=new Array(i*2);for(h=0,l=0;l<i;){let m=e[l++];if(m<128){d[h++]=m;continue}let o=jm[m];if(o>4){d[h++]=65533,l+=o-1;continue}for(m&=o===2?31:o===3?15:7;o>1&&l<i;)m=m<<6|e[l++]&63,o--;if(o>1){d[h++]=65533;continue}m<65536?d[h++]=m:(m-=65536,d[h++]=55296|m>>10&1023,d[h++]=56320|m&1023)}return z7(d,h)},j7=(e,n)=>{n=n||e.length,n>e.length&&(n=e.length);let i=n-1;for(;i>=0&&(e[i]&192)===128;)i--;return i<0||i===0?n:i+jm[e[i]]>n?i:n},Aw={string2buf:O7,buf2string:H7,utf8border:j7};function V7(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var G7=V7;const y0=16209,K7=16191;var q7=function(n,i){let l,h,d,m,o,x,E,I,D,O,P,W,z,H,Z,ie,ce,he,Ie,Ve,Me,Pe,xe,nt;const pe=n.state;l=n.next_in,xe=n.input,h=l+(n.avail_in-5),d=n.next_out,nt=n.output,m=d-(i-n.avail_out),o=d+(n.avail_out-257),x=pe.dmax,E=pe.wsize,I=pe.whave,D=pe.wnext,O=pe.window,P=pe.hold,W=pe.bits,z=pe.lencode,H=pe.distcode,Z=(1<<pe.lenbits)-1,ie=(1<<pe.distbits)-1;e:do{W<15&&(P+=xe[l++]<<W,W+=8,P+=xe[l++]<<W,W+=8),ce=z[P&Z];t:for(;;){if(he=ce>>>24,P>>>=he,W-=he,he=ce>>>16&255,he===0)nt[d++]=ce&65535;else if(he&16){Ie=ce&65535,he&=15,he&&(W<he&&(P+=xe[l++]<<W,W+=8),Ie+=P&(1<<he)-1,P>>>=he,W-=he),W<15&&(P+=xe[l++]<<W,W+=8,P+=xe[l++]<<W,W+=8),ce=H[P&ie];r:for(;;){if(he=ce>>>24,P>>>=he,W-=he,he=ce>>>16&255,he&16){if(Ve=ce&65535,he&=15,W<he&&(P+=xe[l++]<<W,W+=8,W<he&&(P+=xe[l++]<<W,W+=8)),Ve+=P&(1<<he)-1,Ve>x){n.msg="invalid distance too far back",pe.mode=y0;break e}if(P>>>=he,W-=he,he=d-m,Ve>he){if(he=Ve-he,he>I&&pe.sane){n.msg="invalid distance too far back",pe.mode=y0;break e}if(Me=0,Pe=O,D===0){if(Me+=E-he,he<Ie){Ie-=he;do nt[d++]=O[Me++];while(--he);Me=d-Ve,Pe=nt}}else if(D<he){if(Me+=E+D-he,he-=D,he<Ie){Ie-=he;do nt[d++]=O[Me++];while(--he);if(Me=0,D<Ie){he=D,Ie-=he;do nt[d++]=O[Me++];while(--he);Me=d-Ve,Pe=nt}}}else if(Me+=D-he,he<Ie){Ie-=he;do nt[d++]=O[Me++];while(--he);Me=d-Ve,Pe=nt}for(;Ie>2;)nt[d++]=Pe[Me++],nt[d++]=Pe[Me++],nt[d++]=Pe[Me++],Ie-=3;Ie&&(nt[d++]=Pe[Me++],Ie>1&&(nt[d++]=Pe[Me++]))}else{Me=d-Ve;do nt[d++]=nt[Me++],nt[d++]=nt[Me++],nt[d++]=nt[Me++],Ie-=3;while(Ie>2);Ie&&(nt[d++]=nt[Me++],Ie>1&&(nt[d++]=nt[Me++]))}}else if((he&64)===0){ce=H[(ce&65535)+(P&(1<<he)-1)];continue r}else{n.msg="invalid distance code",pe.mode=y0;break e}break}}else if((he&64)===0){ce=z[(ce&65535)+(P&(1<<he)-1)];continue t}else if(he&32){pe.mode=K7;break e}else{n.msg="invalid literal/length code",pe.mode=y0;break e}break}}while(l<h&&d<o);Ie=W>>3,l-=Ie,W-=Ie<<3,P&=(1<<W)-1,n.next_in=l,n.next_out=d,n.avail_in=l<h?5+(h-l):5-(l-h),n.avail_out=d<o?257+(o-d):257-(d-o),pe.hold=P,pe.bits=W};const $f=15,ZB=852,XB=592,YB=0,U1=1,JB=2,$7=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),W7=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),Z7=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),X7=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),Y7=(e,n,i,l,h,d,m,o)=>{const x=o.bits;let E=0,I=0,D=0,O=0,P=0,W=0,z=0,H=0,Z=0,ie=0,ce,he,Ie,Ve,Me,Pe=null,xe;const nt=new Uint16Array($f+1),pe=new Uint16Array($f+1);let _e=null,Ue,Fe,pt;for(E=0;E<=$f;E++)nt[E]=0;for(I=0;I<l;I++)nt[n[i+I]]++;for(P=x,O=$f;O>=1&&nt[O]===0;O--);if(P>O&&(P=O),O===0)return h[d++]=1<<24|64<<16|0,h[d++]=1<<24|64<<16|0,o.bits=1,0;for(D=1;D<O&&nt[D]===0;D++);for(P<D&&(P=D),H=1,E=1;E<=$f;E++)if(H<<=1,H-=nt[E],H<0)return-1;if(H>0&&(e===YB||O!==1))return-1;for(pe[1]=0,E=1;E<$f;E++)pe[E+1]=pe[E]+nt[E];for(I=0;I<l;I++)n[i+I]!==0&&(m[pe[n[i+I]]++]=I);if(e===YB?(Pe=_e=m,xe=20):e===U1?(Pe=$7,_e=W7,xe=257):(Pe=Z7,_e=X7,xe=0),ie=0,I=0,E=D,Me=d,W=P,z=0,Ie=-1,Z=1<<P,Ve=Z-1,e===U1&&Z>ZB||e===JB&&Z>XB)return 1;for(;;){Ue=E-z,m[I]+1<xe?(Fe=0,pt=m[I]):m[I]>=xe?(Fe=_e[m[I]-xe],pt=Pe[m[I]-xe]):(Fe=96,pt=0),ce=1<<E-z,he=1<<W,D=he;do he-=ce,h[Me+(ie>>z)+he]=Ue<<24|Fe<<16|pt|0;while(he!==0);for(ce=1<<E-1;ie&ce;)ce>>=1;if(ce!==0?(ie&=ce-1,ie+=ce):ie=0,I++,--nt[E]===0){if(E===O)break;E=n[i+m[I]]}if(E>P&&(ie&Ve)!==Ie){for(z===0&&(z=P),Me+=D,W=E-z,H=1<<W;W+z<O&&(H-=nt[W+z],!(H<=0));)W++,H<<=1;if(Z+=1<<W,e===U1&&Z>ZB||e===JB&&Z>XB)return 1;Ie=ie&Ve,h[Ie]=P<<24|W<<16|Me-d|0}}return ie!==0&&(h[Me+ie]=E-z<<24|64<<16|0),o.bits=P,0};var Lm=Y7;const J7=0,XI=1,YI=2,{Z_FINISH:eC,Z_BLOCK:eH,Z_TREES:v0,Z_OK:of,Z_STREAM_END:tH,Z_NEED_DICT:rH,Z_STREAM_ERROR:su,Z_DATA_ERROR:JI,Z_MEM_ERROR:e4,Z_BUF_ERROR:nH,Z_DEFLATED:tC}=$I,Zy=16180,rC=16181,nC=16182,iC=16183,sC=16184,oC=16185,aC=16186,lC=16187,cC=16188,AC=16189,cy=16190,Dh=16191,D1=16192,uC=16193,R1=16194,hC=16195,dC=16196,fC=16197,pC=16198,_0=16199,w0=16200,mC=16201,gC=16202,yC=16203,vC=16204,_C=16205,N1=16206,wC=16207,xC=16208,oo=16209,t4=16210,r4=16211,iH=852,sH=592,oH=15,aH=oH,bC=e=>(e>>>24&255)+(e>>>8&65280)+((e&65280)<<8)+((e&255)<<24);function lH(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const cf=e=>{if(!e)return 1;const n=e.state;return!n||n.strm!==e||n.mode<Zy||n.mode>r4?1:0},n4=e=>{if(cf(e))return su;const n=e.state;return e.total_in=e.total_out=n.total=0,e.msg="",n.wrap&&(e.adler=n.wrap&1),n.mode=Zy,n.last=0,n.havedict=0,n.flags=-1,n.dmax=32768,n.head=null,n.hold=0,n.bits=0,n.lencode=n.lendyn=new Int32Array(iH),n.distcode=n.distdyn=new Int32Array(sH),n.sane=1,n.back=-1,of},i4=e=>{if(cf(e))return su;const n=e.state;return n.wsize=0,n.whave=0,n.wnext=0,n4(e)},s4=(e,n)=>{let i;if(cf(e))return su;const l=e.state;return n<0?(i=0,n=-n):(i=(n>>4)+5,n<48&&(n&=15)),n&&(n<8||n>15)?su:(l.window!==null&&l.wbits!==n&&(l.window=null),l.wrap=i,l.wbits=n,i4(e))},o4=(e,n)=>{if(!e)return su;const i=new lH;e.state=i,i.strm=e,i.window=null,i.mode=Zy;const l=s4(e,n);return l!==of&&(e.state=null),l},cH=e=>o4(e,aH);let BC=!0,Q1,O1;const AH=e=>{if(BC){Q1=new Int32Array(512),O1=new Int32Array(32);let n=0;for(;n<144;)e.lens[n++]=8;for(;n<256;)e.lens[n++]=9;for(;n<280;)e.lens[n++]=7;for(;n<288;)e.lens[n++]=8;for(Lm(XI,e.lens,0,288,Q1,0,e.work,{bits:9}),n=0;n<32;)e.lens[n++]=5;Lm(YI,e.lens,0,32,O1,0,e.work,{bits:5}),BC=!1}e.lencode=Q1,e.lenbits=9,e.distcode=O1,e.distbits=5},a4=(e,n,i,l)=>{let h;const d=e.state;return d.window===null&&(d.wsize=1<<d.wbits,d.wnext=0,d.whave=0,d.window=new Uint8Array(d.wsize)),l>=d.wsize?(d.window.set(n.subarray(i-d.wsize,i),0),d.wnext=0,d.whave=d.wsize):(h=d.wsize-d.wnext,h>l&&(h=l),d.window.set(n.subarray(i-l,i-l+h),d.wnext),l-=h,l?(d.window.set(n.subarray(i-l,i),0),d.wnext=l,d.whave=d.wsize):(d.wnext+=h,d.wnext===d.wsize&&(d.wnext=0),d.whave<d.wsize&&(d.whave+=h))),0},uH=(e,n)=>{let i,l,h,d,m,o,x,E,I,D,O,P,W,z,H=0,Z,ie,ce,he,Ie,Ve,Me,Pe;const xe=new Uint8Array(4);let nt,pe;const _e=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(cf(e)||!e.output||!e.input&&e.avail_in!==0)return su;i=e.state,i.mode===Dh&&(i.mode=D1),m=e.next_out,h=e.output,x=e.avail_out,d=e.next_in,l=e.input,o=e.avail_in,E=i.hold,I=i.bits,D=o,O=x,Pe=of;e:for(;;)switch(i.mode){case Zy:if(i.wrap===0){i.mode=D1;break}for(;I<16;){if(o===0)break e;o--,E+=l[d++]<<I,I+=8}if(i.wrap&2&&E===35615){i.wbits===0&&(i.wbits=15),i.check=0,xe[0]=E&255,xe[1]=E>>>8&255,i.check=Xu(i.check,xe,2,0),E=0,I=0,i.mode=rC;break}if(i.head&&(i.head.done=!1),!(i.wrap&1)||(((E&255)<<8)+(E>>8))%31){e.msg="incorrect header check",i.mode=oo;break}if((E&15)!==tC){e.msg="unknown compression method",i.mode=oo;break}if(E>>>=4,I-=4,Me=(E&15)+8,i.wbits===0&&(i.wbits=Me),Me>15||Me>i.wbits){e.msg="invalid window size",i.mode=oo;break}i.dmax=1<<i.wbits,i.flags=0,e.adler=i.check=1,i.mode=E&512?AC:Dh,E=0,I=0;break;case rC:for(;I<16;){if(o===0)break e;o--,E+=l[d++]<<I,I+=8}if(i.flags=E,(i.flags&255)!==tC){e.msg="unknown compression method",i.mode=oo;break}if(i.flags&57344){e.msg="unknown header flags set",i.mode=oo;break}i.head&&(i.head.text=E>>8&1),i.flags&512&&i.wrap&4&&(xe[0]=E&255,xe[1]=E>>>8&255,i.check=Xu(i.check,xe,2,0)),E=0,I=0,i.mode=nC;case nC:for(;I<32;){if(o===0)break e;o--,E+=l[d++]<<I,I+=8}i.head&&(i.head.time=E),i.flags&512&&i.wrap&4&&(xe[0]=E&255,xe[1]=E>>>8&255,xe[2]=E>>>16&255,xe[3]=E>>>24&255,i.check=Xu(i.check,xe,4,0)),E=0,I=0,i.mode=iC;case iC:for(;I<16;){if(o===0)break e;o--,E+=l[d++]<<I,I+=8}i.head&&(i.head.xflags=E&255,i.head.os=E>>8),i.flags&512&&i.wrap&4&&(xe[0]=E&255,xe[1]=E>>>8&255,i.check=Xu(i.check,xe,2,0)),E=0,I=0,i.mode=sC;case sC:if(i.flags&1024){for(;I<16;){if(o===0)break e;o--,E+=l[d++]<<I,I+=8}i.length=E,i.head&&(i.head.extra_len=E),i.flags&512&&i.wrap&4&&(xe[0]=E&255,xe[1]=E>>>8&255,i.check=Xu(i.check,xe,2,0)),E=0,I=0}else i.head&&(i.head.extra=null);i.mode=oC;case oC:if(i.flags&1024&&(P=i.length,P>o&&(P=o),P&&(i.head&&(Me=i.head.extra_len-i.length,i.head.extra||(i.head.extra=new Uint8Array(i.head.extra_len)),i.head.extra.set(l.subarray(d,d+P),Me)),i.flags&512&&i.wrap&4&&(i.check=Xu(i.check,l,P,d)),o-=P,d+=P,i.length-=P),i.length))break e;i.length=0,i.mode=aC;case aC:if(i.flags&2048){if(o===0)break e;P=0;do Me=l[d+P++],i.head&&Me&&i.length<65536&&(i.head.name+=String.fromCharCode(Me));while(Me&&P<o);if(i.flags&512&&i.wrap&4&&(i.check=Xu(i.check,l,P,d)),o-=P,d+=P,Me)break e}else i.head&&(i.head.name=null);i.length=0,i.mode=lC;case lC:if(i.flags&4096){if(o===0)break e;P=0;do Me=l[d+P++],i.head&&Me&&i.length<65536&&(i.head.comment+=String.fromCharCode(Me));while(Me&&P<o);if(i.flags&512&&i.wrap&4&&(i.check=Xu(i.check,l,P,d)),o-=P,d+=P,Me)break e}else i.head&&(i.head.comment=null);i.mode=cC;case cC:if(i.flags&512){for(;I<16;){if(o===0)break e;o--,E+=l[d++]<<I,I+=8}if(i.wrap&4&&E!==(i.check&65535)){e.msg="header crc mismatch",i.mode=oo;break}E=0,I=0}i.head&&(i.head.hcrc=i.flags>>9&1,i.head.done=!0),e.adler=i.check=0,i.mode=Dh;break;case AC:for(;I<32;){if(o===0)break e;o--,E+=l[d++]<<I,I+=8}e.adler=i.check=bC(E),E=0,I=0,i.mode=cy;case cy:if(i.havedict===0)return e.next_out=m,e.avail_out=x,e.next_in=d,e.avail_in=o,i.hold=E,i.bits=I,rH;e.adler=i.check=1,i.mode=Dh;case Dh:if(n===eH||n===v0)break e;case D1:if(i.last){E>>>=I&7,I-=I&7,i.mode=N1;break}for(;I<3;){if(o===0)break e;o--,E+=l[d++]<<I,I+=8}switch(i.last=E&1,E>>>=1,I-=1,E&3){case 0:i.mode=uC;break;case 1:if(AH(i),i.mode=_0,n===v0){E>>>=2,I-=2;break e}break;case 2:i.mode=dC;break;case 3:e.msg="invalid block type",i.mode=oo}E>>>=2,I-=2;break;case uC:for(E>>>=I&7,I-=I&7;I<32;){if(o===0)break e;o--,E+=l[d++]<<I,I+=8}if((E&65535)!==(E>>>16^65535)){e.msg="invalid stored block lengths",i.mode=oo;break}if(i.length=E&65535,E=0,I=0,i.mode=R1,n===v0)break e;case R1:i.mode=hC;case hC:if(P=i.length,P){if(P>o&&(P=o),P>x&&(P=x),P===0)break e;h.set(l.subarray(d,d+P),m),o-=P,d+=P,x-=P,m+=P,i.length-=P;break}i.mode=Dh;break;case dC:for(;I<14;){if(o===0)break e;o--,E+=l[d++]<<I,I+=8}if(i.nlen=(E&31)+257,E>>>=5,I-=5,i.ndist=(E&31)+1,E>>>=5,I-=5,i.ncode=(E&15)+4,E>>>=4,I-=4,i.nlen>286||i.ndist>30){e.msg="too many length or distance symbols",i.mode=oo;break}i.have=0,i.mode=fC;case fC:for(;i.have<i.ncode;){for(;I<3;){if(o===0)break e;o--,E+=l[d++]<<I,I+=8}i.lens[_e[i.have++]]=E&7,E>>>=3,I-=3}for(;i.have<19;)i.lens[_e[i.have++]]=0;if(i.lencode=i.lendyn,i.lenbits=7,nt={bits:i.lenbits},Pe=Lm(J7,i.lens,0,19,i.lencode,0,i.work,nt),i.lenbits=nt.bits,Pe){e.msg="invalid code lengths set",i.mode=oo;break}i.have=0,i.mode=pC;case pC:for(;i.have<i.nlen+i.ndist;){for(;H=i.lencode[E&(1<<i.lenbits)-1],Z=H>>>24,ie=H>>>16&255,ce=H&65535,!(Z<=I);){if(o===0)break e;o--,E+=l[d++]<<I,I+=8}if(ce<16)E>>>=Z,I-=Z,i.lens[i.have++]=ce;else{if(ce===16){for(pe=Z+2;I<pe;){if(o===0)break e;o--,E+=l[d++]<<I,I+=8}if(E>>>=Z,I-=Z,i.have===0){e.msg="invalid bit length repeat",i.mode=oo;break}Me=i.lens[i.have-1],P=3+(E&3),E>>>=2,I-=2}else if(ce===17){for(pe=Z+3;I<pe;){if(o===0)break e;o--,E+=l[d++]<<I,I+=8}E>>>=Z,I-=Z,Me=0,P=3+(E&7),E>>>=3,I-=3}else{for(pe=Z+7;I<pe;){if(o===0)break e;o--,E+=l[d++]<<I,I+=8}E>>>=Z,I-=Z,Me=0,P=11+(E&127),E>>>=7,I-=7}if(i.have+P>i.nlen+i.ndist){e.msg="invalid bit length repeat",i.mode=oo;break}for(;P--;)i.lens[i.have++]=Me}}if(i.mode===oo)break;if(i.lens[256]===0){e.msg="invalid code -- missing end-of-block",i.mode=oo;break}if(i.lenbits=9,nt={bits:i.lenbits},Pe=Lm(XI,i.lens,0,i.nlen,i.lencode,0,i.work,nt),i.lenbits=nt.bits,Pe){e.msg="invalid literal/lengths set",i.mode=oo;break}if(i.distbits=6,i.distcode=i.distdyn,nt={bits:i.distbits},Pe=Lm(YI,i.lens,i.nlen,i.ndist,i.distcode,0,i.work,nt),i.distbits=nt.bits,Pe){e.msg="invalid distances set",i.mode=oo;break}if(i.mode=_0,n===v0)break e;case _0:i.mode=w0;case w0:if(o>=6&&x>=258){e.next_out=m,e.avail_out=x,e.next_in=d,e.avail_in=o,i.hold=E,i.bits=I,q7(e,O),m=e.next_out,h=e.output,x=e.avail_out,d=e.next_in,l=e.input,o=e.avail_in,E=i.hold,I=i.bits,i.mode===Dh&&(i.back=-1);break}for(i.back=0;H=i.lencode[E&(1<<i.lenbits)-1],Z=H>>>24,ie=H>>>16&255,ce=H&65535,!(Z<=I);){if(o===0)break e;o--,E+=l[d++]<<I,I+=8}if(ie&&(ie&240)===0){for(he=Z,Ie=ie,Ve=ce;H=i.lencode[Ve+((E&(1<<he+Ie)-1)>>he)],Z=H>>>24,ie=H>>>16&255,ce=H&65535,!(he+Z<=I);){if(o===0)break e;o--,E+=l[d++]<<I,I+=8}E>>>=he,I-=he,i.back+=he}if(E>>>=Z,I-=Z,i.back+=Z,i.length=ce,ie===0){i.mode=_C;break}if(ie&32){i.back=-1,i.mode=Dh;break}if(ie&64){e.msg="invalid literal/length code",i.mode=oo;break}i.extra=ie&15,i.mode=mC;case mC:if(i.extra){for(pe=i.extra;I<pe;){if(o===0)break e;o--,E+=l[d++]<<I,I+=8}i.length+=E&(1<<i.extra)-1,E>>>=i.extra,I-=i.extra,i.back+=i.extra}i.was=i.length,i.mode=gC;case gC:for(;H=i.distcode[E&(1<<i.distbits)-1],Z=H>>>24,ie=H>>>16&255,ce=H&65535,!(Z<=I);){if(o===0)break e;o--,E+=l[d++]<<I,I+=8}if((ie&240)===0){for(he=Z,Ie=ie,Ve=ce;H=i.distcode[Ve+((E&(1<<he+Ie)-1)>>he)],Z=H>>>24,ie=H>>>16&255,ce=H&65535,!(he+Z<=I);){if(o===0)break e;o--,E+=l[d++]<<I,I+=8}E>>>=he,I-=he,i.back+=he}if(E>>>=Z,I-=Z,i.back+=Z,ie&64){e.msg="invalid distance code",i.mode=oo;break}i.offset=ce,i.extra=ie&15,i.mode=yC;case yC:if(i.extra){for(pe=i.extra;I<pe;){if(o===0)break e;o--,E+=l[d++]<<I,I+=8}i.offset+=E&(1<<i.extra)-1,E>>>=i.extra,I-=i.extra,i.back+=i.extra}if(i.offset>i.dmax){e.msg="invalid distance too far back",i.mode=oo;break}i.mode=vC;case vC:if(x===0)break e;if(P=O-x,i.offset>P){if(P=i.offset-P,P>i.whave&&i.sane){e.msg="invalid distance too far back",i.mode=oo;break}P>i.wnext?(P-=i.wnext,W=i.wsize-P):W=i.wnext-P,P>i.length&&(P=i.length),z=i.window}else z=h,W=m-i.offset,P=i.length;P>x&&(P=x),x-=P,i.length-=P;do h[m++]=z[W++];while(--P);i.length===0&&(i.mode=w0);break;case _C:if(x===0)break e;h[m++]=i.length,x--,i.mode=w0;break;case N1:if(i.wrap){for(;I<32;){if(o===0)break e;o--,E|=l[d++]<<I,I+=8}if(O-=x,e.total_out+=O,i.total+=O,i.wrap&4&&O&&(e.adler=i.check=i.flags?Xu(i.check,h,O,m-O):lw(i.check,h,O,m-O)),O=x,i.wrap&4&&(i.flags?E:bC(E))!==i.check){e.msg="incorrect data check",i.mode=oo;break}E=0,I=0}i.mode=wC;case wC:if(i.wrap&&i.flags){for(;I<32;){if(o===0)break e;o--,E+=l[d++]<<I,I+=8}if(i.wrap&4&&E!==(i.total&4294967295)){e.msg="incorrect length check",i.mode=oo;break}E=0,I=0}i.mode=xC;case xC:Pe=tH;break e;case oo:Pe=JI;break e;case t4:return e4;case r4:default:return su}return e.next_out=m,e.avail_out=x,e.next_in=d,e.avail_in=o,i.hold=E,i.bits=I,(i.wsize||O!==e.avail_out&&i.mode<oo&&(i.mode<N1||n!==eC))&&a4(e,e.output,e.next_out,O-e.avail_out),D-=e.avail_in,O-=e.avail_out,e.total_in+=D,e.total_out+=O,i.total+=O,i.wrap&4&&O&&(e.adler=i.check=i.flags?Xu(i.check,h,O,e.next_out-O):lw(i.check,h,O,e.next_out-O)),e.data_type=i.bits+(i.last?64:0)+(i.mode===Dh?128:0)+(i.mode===_0||i.mode===R1?256:0),(D===0&&O===0||n===eC)&&Pe===of&&(Pe=nH),Pe},hH=e=>{if(cf(e))return su;let n=e.state;return n.window&&(n.window=null),e.state=null,of},dH=(e,n)=>{if(cf(e))return su;const i=e.state;return(i.wrap&2)===0?su:(i.head=n,n.done=!1,of)},fH=(e,n)=>{const i=n.length;let l,h,d;return cf(e)||(l=e.state,l.wrap!==0&&l.mode!==cy)?su:l.mode===cy&&(h=1,h=lw(h,n,i,0),h!==l.check)?JI:(d=a4(e,n,i,i),d?(l.mode=t4,e4):(l.havedict=1,of))};var pH=i4,mH=s4,gH=n4,yH=cH,vH=o4,_H=uH,wH=hH,xH=dH,bH=fH,BH="pako inflate (from Nodeca project)",Rh={inflateReset:pH,inflateReset2:mH,inflateResetKeep:gH,inflateInit:yH,inflateInit2:vH,inflate:_H,inflateEnd:wH,inflateGetHeader:xH,inflateSetDictionary:bH,inflateInfo:BH};function CH(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var EH=CH;const l4=Object.prototype.toString,{Z_NO_FLUSH:SH,Z_FINISH:FH,Z_OK:Vm,Z_STREAM_END:z1,Z_NEED_DICT:H1,Z_STREAM_ERROR:IH,Z_DATA_ERROR:CC,Z_MEM_ERROR:TH}=$I;function tg(e){this.options=WI.assign({chunkSize:1024*64,windowBits:15,to:""},e||{});const n=this.options;n.raw&&n.windowBits>=0&&n.windowBits<16&&(n.windowBits=-n.windowBits,n.windowBits===0&&(n.windowBits=-15)),n.windowBits>=0&&n.windowBits<16&&!(e&&e.windowBits)&&(n.windowBits+=32),n.windowBits>15&&n.windowBits<48&&(n.windowBits&15)===0&&(n.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new G7,this.strm.avail_out=0;let i=Rh.inflateInit2(this.strm,n.windowBits);if(i!==Vm)throw new Error(cw[i]);if(this.header=new EH,Rh.inflateGetHeader(this.strm,this.header),n.dictionary&&(typeof n.dictionary=="string"?n.dictionary=Aw.string2buf(n.dictionary):l4.call(n.dictionary)==="[object ArrayBuffer]"&&(n.dictionary=new Uint8Array(n.dictionary)),n.raw&&(i=Rh.inflateSetDictionary(this.strm,n.dictionary),i!==Vm)))throw new Error(cw[i])}tg.prototype.push=function(e,n){const i=this.strm,l=this.options.chunkSize,h=this.options.dictionary;let d,m,o;if(this.ended)return!1;for(n===~~n?m=n:m=n===!0?FH:SH,l4.call(e)==="[object ArrayBuffer]"?i.input=new Uint8Array(e):i.input=e,i.next_in=0,i.avail_in=i.input.length;;){for(i.avail_out===0&&(i.output=new Uint8Array(l),i.next_out=0,i.avail_out=l),d=Rh.inflate(i,m),d===H1&&h&&(d=Rh.inflateSetDictionary(i,h),d===Vm?d=Rh.inflate(i,m):d===CC&&(d=H1));i.avail_in>0&&d===z1&&i.state.wrap>0&&e[i.next_in]!==0;)Rh.inflateReset(i),d=Rh.inflate(i,m);switch(d){case IH:case CC:case H1:case TH:return this.onEnd(d),this.ended=!0,!1}if(o=i.avail_out,i.next_out&&(i.avail_out===0||d===z1))if(this.options.to==="string"){let x=Aw.utf8border(i.output,i.next_out),E=i.next_out-x,I=Aw.buf2string(i.output,x);i.next_out=E,i.avail_out=l-E,E&&i.output.set(i.output.subarray(x,x+E),0),this.onData(I)}else this.onData(i.output.length===i.next_out?i.output:i.output.subarray(0,i.next_out));if(!(d===Vm&&o===0)){if(d===z1)return d=Rh.inflateEnd(this.strm),this.onEnd(d),this.ended=!0,!0;if(i.avail_in===0)break}}return!0};tg.prototype.onData=function(e){this.chunks.push(e)};tg.prototype.onEnd=function(e){e===Vm&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=WI.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};function PH(e,n){const i=new tg(n);if(i.push(e),i.err)throw i.msg||cw[i.err];return i.result}var LH=tg,MH=PH,kH={Inflate:LH,inflate:MH};const{Inflate:UH,inflate:DH}=kH;var EC=UH,RH=DH;const c4=[];for(let e=0;e<256;e++){let n=e;for(let i=0;i<8;i++)n&1?n=3988292384^n>>>1:n=n>>>1;c4[e]=n}const SC=4294967295;function NH(e,n,i){let l=e;for(let h=0;h<i;h++)l=c4[(l^n[h])&255]^l>>>8;return l}function QH(e,n){return(NH(SC,e,n)^SC)>>>0}function FC(e,n,i){const l=e.readUint32(),h=QH(new Uint8Array(e.buffer,e.byteOffset+e.offset-n-4,n),n);if(h!==l)throw new Error(`CRC mismatch for chunk ${i}. Expected ${l}, found ${h}`)}function A4(e,n,i){for(let l=0;l<i;l++)n[l]=e[l]}function u4(e,n,i,l){let h=0;for(;h<l;h++)n[h]=e[h];for(;h<i;h++)n[h]=e[h]+n[h-l]&255}function h4(e,n,i,l){let h=0;if(i.length===0)for(;h<l;h++)n[h]=e[h];else for(;h<l;h++)n[h]=e[h]+i[h]&255}function d4(e,n,i,l,h){let d=0;if(i.length===0){for(;d<h;d++)n[d]=e[d];for(;d<l;d++)n[d]=e[d]+(n[d-h]>>1)&255}else{for(;d<h;d++)n[d]=e[d]+(i[d]>>1)&255;for(;d<l;d++)n[d]=e[d]+(n[d-h]+i[d]>>1)&255}}function f4(e,n,i,l,h){let d=0;if(i.length===0){for(;d<h;d++)n[d]=e[d];for(;d<l;d++)n[d]=e[d]+n[d-h]&255}else{for(;d<h;d++)n[d]=e[d]+i[d]&255;for(;d<l;d++)n[d]=e[d]+OH(n[d-h],i[d],i[d-h])&255}}function OH(e,n,i){const l=e+n-i,h=Math.abs(l-e),d=Math.abs(l-n),m=Math.abs(l-i);return h<=d&&h<=m?e:d<=m?n:i}function zH(e,n,i,l,h,d){switch(e){case 0:A4(n,i,h);break;case 1:u4(n,i,h,d);break;case 2:h4(n,i,l,h);break;case 3:d4(n,i,l,h,d);break;case 4:f4(n,i,l,h,d);break;default:throw new Error(`Unsupported filter: ${e}`)}}const HH=new Uint16Array([255]),jH=new Uint8Array(HH.buffer),VH=jH[0]===255;function GH(e){const{data:n,width:i,height:l,channels:h,depth:d}=e,m=[{x:0,y:0,xStep:8,yStep:8},{x:4,y:0,xStep:8,yStep:8},{x:0,y:4,xStep:4,yStep:8},{x:2,y:0,xStep:4,yStep:4},{x:0,y:2,xStep:2,yStep:4},{x:1,y:0,xStep:2,yStep:2},{x:0,y:1,xStep:1,yStep:2}],o=Math.ceil(d/8)*h,x=new Uint8Array(l*i*o);let E=0;for(let I=0;I<7;I++){const D=m[I],O=Math.ceil((i-D.x)/D.xStep),P=Math.ceil((l-D.y)/D.yStep);if(O<=0||P<=0)continue;const W=O*o,z=new Uint8Array(W);for(let H=0;H<P;H++){const Z=n[E++],ie=n.subarray(E,E+W);E+=W;const ce=new Uint8Array(W);zH(Z,ie,ce,z,W,o),z.set(ce);for(let he=0;he<O;he++){const Ie=D.x+he*D.xStep,Ve=D.y+H*D.yStep;if(!(Ie>=i||Ve>=l))for(let Me=0;Me<o;Me++)x[(Ve*i+Ie)*o+Me]=ce[he*o+Me]}}}if(d===16){const I=new Uint16Array(x.buffer);if(VH)for(let D=0;D<I.length;D++)I[D]=KH(I[D]);return I}else return x}function KH(e){return(e&255)<<8|e>>8&255}const qH=new Uint16Array([255]),$H=new Uint8Array(qH.buffer),WH=$H[0]===255,ZH=new Uint8Array(0);function IC(e){const{data:n,width:i,height:l,channels:h,depth:d}=e,m=Math.ceil(d/8)*h,o=Math.ceil(d/8*h*i),x=new Uint8Array(l*o);let E=ZH,I=0,D,O;for(let P=0;P<l;P++){switch(D=n.subarray(I+1,I+1+o),O=x.subarray(P*o,(P+1)*o),n[I]){case 0:A4(D,O,o);break;case 1:u4(D,O,o,m);break;case 2:h4(D,O,E,o);break;case 3:d4(D,O,E,o,m);break;case 4:f4(D,O,E,o,m);break;default:throw new Error(`Unsupported filter: ${n[I]}`)}E=O,I+=o+1}if(d===16){const P=new Uint16Array(x.buffer);if(WH)for(let W=0;W<P.length;W++)P[W]=XH(P[W]);return P}else return x}function XH(e){return(e&255)<<8|e>>8&255}const Q0=Uint8Array.of(137,80,78,71,13,10,26,10);function TC(e){if(!YH(e.readBytes(Q0.length)))throw new Error("wrong PNG signature")}function YH(e){if(e.length<Q0.length)return!1;for(let n=0;n<Q0.length;n++)if(e[n]!==Q0[n])return!1;return!0}const JH="tEXt",ej=0,p4=new TextDecoder("latin1");function tj(e){if(nj(e),e.length===0||e.length>79)throw new Error("keyword length must be between 1 and 79")}const rj=/^[\u0000-\u00FF]*$/;function nj(e){if(!rj.test(e))throw new Error("invalid latin1 text")}function ij(e,n,i){const l=m4(n);e[l]=sj(n,i-l.length-1)}function m4(e){for(e.mark();e.readByte()!==ej;);const n=e.offset;e.reset();const i=p4.decode(e.readBytes(n-e.offset-1));return e.skip(1),tj(i),i}function sj(e,n){return p4.decode(e.readBytes(n))}const bA={UNKNOWN:-1,GREYSCALE:0,TRUECOLOUR:2,INDEXED_COLOUR:3,GREYSCALE_ALPHA:4,TRUECOLOUR_ALPHA:6},j1={UNKNOWN:-1,DEFLATE:0},PC={UNKNOWN:-1,ADAPTIVE:0},V1={UNKNOWN:-1,NO_INTERLACE:0,ADAM7:1},x0={NONE:0,BACKGROUND:1,PREVIOUS:2},G1={SOURCE:0,OVER:1};class oj extends cx{_checkCrc;_inflator;_png;_apng;_end;_hasPalette;_palette;_hasTransparency;_transparency;_compressionMethod;_filterMethod;_interlaceMethod;_colorType;_isAnimated;_numberOfFrames;_numberOfPlays;_frames;_writingDataChunks;constructor(n,i={}){super(n);const{checkCrc:l=!1}=i;this._checkCrc=l,this._inflator=new EC,this._png={width:-1,height:-1,channels:-1,data:new Uint8Array(0),depth:1,text:{}},this._apng={width:-1,height:-1,channels:-1,depth:1,numberOfFrames:1,numberOfPlays:0,text:{},frames:[]},this._end=!1,this._hasPalette=!1,this._palette=[],this._hasTransparency=!1,this._transparency=new Uint16Array(0),this._compressionMethod=j1.UNKNOWN,this._filterMethod=PC.UNKNOWN,this._interlaceMethod=V1.UNKNOWN,this._colorType=bA.UNKNOWN,this._isAnimated=!1,this._numberOfFrames=1,this._numberOfPlays=0,this._frames=[],this._writingDataChunks=!1,this.setBigEndian()}decode(){for(TC(this);!this._end;){const n=this.readUint32(),i=this.readChars(4);this.decodeChunk(n,i)}return this.decodeImage(),this._png}decodeApng(){for(TC(this);!this._end;){const n=this.readUint32(),i=this.readChars(4);this.decodeApngChunk(n,i)}return this.decodeApngImage(),this._apng}decodeChunk(n,i){const l=this.offset;switch(i){case"IHDR":this.decodeIHDR();break;case"PLTE":this.decodePLTE(n);break;case"IDAT":this.decodeIDAT(n);break;case"IEND":this._end=!0;break;case"tRNS":this.decodetRNS(n);break;case"iCCP":this.decodeiCCP(n);break;case JH:ij(this._png.text,this,n);break;case"pHYs":this.decodepHYs();break;default:this.skip(n);break}if(this.offset-l!==n)throw new Error(`Length mismatch while decoding chunk ${i}`);this._checkCrc?FC(this,n+4,i):this.skip(4)}decodeApngChunk(n,i){const l=this.offset;switch(i!=="fdAT"&&i!=="IDAT"&&this._writingDataChunks&&this.pushDataToFrame(),i){case"acTL":this.decodeACTL();break;case"fcTL":this.decodeFCTL();break;case"fdAT":this.decodeFDAT(n);break;default:this.decodeChunk(n,i),this.offset=l+n;break}if(this.offset-l!==n)throw new Error(`Length mismatch while decoding chunk ${i}`);this._checkCrc?FC(this,n+4,i):this.skip(4)}decodeIHDR(){const n=this._png;n.width=this.readUint32(),n.height=this.readUint32(),n.depth=aj(this.readUint8());const i=this.readUint8();this._colorType=i;let l;switch(i){case bA.GREYSCALE:l=1;break;case bA.TRUECOLOUR:l=3;break;case bA.INDEXED_COLOUR:l=1;break;case bA.GREYSCALE_ALPHA:l=2;break;case bA.TRUECOLOUR_ALPHA:l=4;break;case bA.UNKNOWN:default:throw new Error(`Unknown color type: ${i}`)}if(this._png.channels=l,this._compressionMethod=this.readUint8(),this._compressionMethod!==j1.DEFLATE)throw new Error(`Unsupported compression method: ${this._compressionMethod}`);this._filterMethod=this.readUint8(),this._interlaceMethod=this.readUint8()}decodeACTL(){this._numberOfFrames=this.readUint32(),this._numberOfPlays=this.readUint32(),this._isAnimated=!0}decodeFCTL(){const n={sequenceNumber:this.readUint32(),width:this.readUint32(),height:this.readUint32(),xOffset:this.readUint32(),yOffset:this.readUint32(),delayNumber:this.readUint16(),delayDenominator:this.readUint16(),disposeOp:this.readUint8(),blendOp:this.readUint8(),data:new Uint8Array(0)};this._frames.push(n)}decodePLTE(n){if(n%3!==0)throw new RangeError(`PLTE field length must be a multiple of 3. Got ${n}`);const i=n/3;this._hasPalette=!0;const l=[];this._palette=l;for(let h=0;h<i;h++)l.push([this.readUint8(),this.readUint8(),this.readUint8()])}decodeIDAT(n){this._writingDataChunks=!0;const i=n,l=this.offset+this.byteOffset;if(this._inflator.push(new Uint8Array(this.buffer,l,i)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(n)}decodeFDAT(n){this._writingDataChunks=!0;let i=n,l=this.offset+this.byteOffset;if(l+=4,i-=4,this._inflator.push(new Uint8Array(this.buffer,l,i)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(n)}decodetRNS(n){switch(this._colorType){case bA.GREYSCALE:case bA.TRUECOLOUR:{if(n%2!==0)throw new RangeError(`tRNS chunk length must be a multiple of 2. Got ${n}`);if(n/2>this._png.width*this._png.height)throw new Error(`tRNS chunk contains more alpha values than there are pixels (${n/2} vs ${this._png.width*this._png.height})`);this._hasTransparency=!0,this._transparency=new Uint16Array(n/2);for(let i=0;i<n/2;i++)this._transparency[i]=this.readUint16();break}case bA.INDEXED_COLOUR:{if(n>this._palette.length)throw new Error(`tRNS chunk contains more alpha values than there are palette colors (${n} vs ${this._palette.length})`);let i=0;for(;i<n;i++){const l=this.readByte();this._palette[i].push(l)}for(;i<this._palette.length;i++)this._palette[i].push(255);break}case bA.UNKNOWN:case bA.GREYSCALE_ALPHA:case bA.TRUECOLOUR_ALPHA:default:throw new Error(`tRNS chunk is not supported for color type ${this._colorType}`)}}decodeiCCP(n){const i=m4(this),l=this.readUint8();if(l!==j1.DEFLATE)throw new Error(`Unsupported iCCP compression method: ${l}`);const h=this.readBytes(n-i.length-2);this._png.iccEmbeddedProfile={name:i,profile:RH(h)}}decodepHYs(){const n=this.readUint32(),i=this.readUint32(),l=this.readByte();this._png.resolution={x:n,y:i,unit:l}}decodeApngImage(){this._apng.width=this._png.width,this._apng.height=this._png.height,this._apng.channels=this._png.channels,this._apng.depth=this._png.depth,this._apng.numberOfFrames=this._numberOfFrames,this._apng.numberOfPlays=this._numberOfPlays,this._apng.text=this._png.text,this._apng.resolution=this._png.resolution;for(let n=0;n<this._numberOfFrames;n++){const i={sequenceNumber:this._frames[n].sequenceNumber,delayNumber:this._frames[n].delayNumber,delayDenominator:this._frames[n].delayDenominator,data:this._apng.depth===8?new Uint8Array(this._apng.width*this._apng.height*this._apng.channels):new Uint16Array(this._apng.width*this._apng.height*this._apng.channels)},l=this._frames.at(n);if(l){if(l.data=IC({data:l.data,width:l.width,height:l.height,channels:this._apng.channels,depth:this._apng.depth}),this._hasPalette&&(this._apng.palette=this._palette),this._hasTransparency&&(this._apng.transparency=this._transparency),n===0||l.xOffset===0&&l.yOffset===0&&l.width===this._png.width&&l.height===this._png.height)i.data=l.data;else{const h=this._apng.frames.at(n-1);this.disposeFrame(l,h,i),this.addFrameDataToCanvas(i,l)}this._apng.frames.push(i)}}return this._apng}disposeFrame(n,i,l){switch(n.disposeOp){case x0.NONE:break;case x0.BACKGROUND:for(let h=0;h<this._png.height;h++)for(let d=0;d<this._png.width;d++){const m=(h*n.width+d)*this._png.channels;for(let o=0;o<this._png.channels;o++)l.data[m+o]=0}break;case x0.PREVIOUS:l.data.set(i.data);break;default:throw new Error("Unknown disposeOp")}}addFrameDataToCanvas(n,i){const l=1<<this._png.depth,h=(d,m)=>{const o=((d+i.yOffset)*this._png.width+i.xOffset+m)*this._png.channels,x=(d*i.width+m)*this._png.channels;return{index:o,frameIndex:x}};switch(i.blendOp){case G1.SOURCE:for(let d=0;d<i.height;d++)for(let m=0;m<i.width;m++){const{index:o,frameIndex:x}=h(d,m);for(let E=0;E<this._png.channels;E++)n.data[o+E]=i.data[x+E]}break;case G1.OVER:for(let d=0;d<i.height;d++)for(let m=0;m<i.width;m++){const{index:o,frameIndex:x}=h(d,m);for(let E=0;E<this._png.channels;E++){const I=i.data[x+this._png.channels-1]/l,D=E%(this._png.channels-1)===0?1:i.data[x+E],O=Math.floor(I*D+(1-I)*n.data[o+E]);n.data[o+E]+=O}}break;default:throw new Error("Unknown blendOp")}}decodeImage(){if(this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);const n=this._isAnimated?(this._frames?.at(0)).data:this._inflator.result;if(this._filterMethod!==PC.ADAPTIVE)throw new Error(`Filter method ${this._filterMethod} not supported`);if(this._interlaceMethod===V1.NO_INTERLACE)this._png.data=IC({data:n,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else if(this._interlaceMethod===V1.ADAM7)this._png.data=GH({data:n,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else throw new Error(`Interlace method ${this._interlaceMethod} not supported`);this._hasPalette&&(this._png.palette=this._palette),this._hasTransparency&&(this._png.transparency=this._transparency)}pushDataToFrame(){const n=this._inflator.result,i=this._frames.at(-1);i?i.data=n:this._frames.push({sequenceNumber:0,width:this._png.width,height:this._png.height,xOffset:0,yOffset:0,delayNumber:0,delayDenominator:0,disposeOp:x0.NONE,blendOp:G1.SOURCE,data:n}),this._inflator=new EC,this._writingDataChunks=!1}}function aj(e){if(e!==1&&e!==2&&e!==4&&e!==8&&e!==16)throw new Error(`invalid bit depth: ${e}`);return e}var LC;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.METRE=1]="METRE"})(LC||(LC={}));function lj(e,n){return new oj(e,n).decode()}var kn=(function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this})();function K1(){kn.console&&typeof kn.console.log=="function"&&kn.console.log.apply(kn.console,arguments)}var gs={log:K1,warn:function(e){kn.console&&(typeof kn.console.warn=="function"?kn.console.warn.apply(kn.console,arguments):K1.call(null,arguments))},error:function(e){kn.console&&(typeof kn.console.error=="function"?kn.console.error.apply(kn.console,arguments):K1(e))}};function q1(e,n,i){var l=new XMLHttpRequest;l.open("GET",e),l.responseType="blob",l.onload=function(){Wd(l.response,n,i)},l.onerror=function(){gs.error("could not download file")},l.send()}function MC(e){var n=new XMLHttpRequest;n.open("HEAD",e,!1);try{n.send()}catch{}return n.status>=200&&n.status<=299}function b0(e){try{e.dispatchEvent(new MouseEvent("click"))}catch{var n=document.createEvent("MouseEvents");n.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(n)}}var Wd=kn.saveAs||((typeof window>"u"?"undefined":rs(window))!=="object"||window!==kn?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(e,n,i){var l=kn.URL||kn.webkitURL,h=document.createElement("a");n=n||e.name||"download",h.download=n,h.rel="noopener",typeof e=="string"?(h.href=e,h.origin!==location.origin?MC(h.href)?q1(e,n,i):b0(h,h.target="_blank"):b0(h)):(h.href=l.createObjectURL(e),setTimeout(function(){l.revokeObjectURL(h.href)},4e4),setTimeout(function(){b0(h)},0))}:"msSaveOrOpenBlob"in navigator?function(e,n,i){if(n=n||e.name||"download",typeof e=="string")if(MC(e))q1(e,n,i);else{var l=document.createElement("a");l.href=e,l.target="_blank",setTimeout(function(){b0(l)})}else navigator.msSaveOrOpenBlob((function(h,d){return d===void 0?d={autoBom:!1}:rs(d)!=="object"&&(gs.warn("Deprecated: Expected third argument to be a object"),d={autoBom:!d}),d.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(h.type)?new Blob(["\uFEFF",h],{type:h.type}):h})(e,i),n)}:function(e,n,i,l){if((l=l||open("","_blank"))&&(l.document.title=l.document.body.innerText="downloading..."),typeof e=="string")return q1(e,n,i);var h=e.type==="application/octet-stream",d=/constructor/i.test(kn.HTMLElement)||kn.safari,m=/CriOS\/[\d]+/.test(navigator.userAgent);if((m||h&&d)&&(typeof FileReader>"u"?"undefined":rs(FileReader))==="object"){var o=new FileReader;o.onloadend=function(){var I=o.result;I=m?I:I.replace(/^data:[^;]*;/,"data:attachment/file;"),l?l.location.href=I:location=I,l=null},o.readAsDataURL(e)}else{var x=kn.URL||kn.webkitURL,E=x.createObjectURL(e);l?l.location=E:location.href=E,l=null,setTimeout(function(){x.revokeObjectURL(E)},4e4)}});function g4(e){var n;e=e||"",this.ok=!1,e.charAt(0)=="#"&&(e=e.substr(1,6)),e={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[e=(e=e.replace(/ /g,"")).toLowerCase()]||e;for(var i=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(o){return[parseInt(o[1]),parseInt(o[2]),parseInt(o[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(o){return[parseInt(o[1],16),parseInt(o[2],16),parseInt(o[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(o){return[parseInt(o[1]+o[1],16),parseInt(o[2]+o[2],16),parseInt(o[3]+o[3],16)]}}],l=0;l<i.length;l++){var h=i[l].re,d=i[l].process,m=h.exec(e);m&&(n=d(m),this.r=n[0],this.g=n[1],this.b=n[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var o=this.r.toString(16),x=this.g.toString(16),E=this.b.toString(16);return o.length==1&&(o="0"+o),x.length==1&&(x="0"+x),E.length==1&&(E="0"+E),"#"+o+x+E}}var O0=kn.atob.bind(kn),kC=kn.btoa.bind(kn);function $1(e,n){var i=e[0],l=e[1],h=e[2],d=e[3];i=$l(i,l,h,d,n[0],7,-680876936),d=$l(d,i,l,h,n[1],12,-389564586),h=$l(h,d,i,l,n[2],17,606105819),l=$l(l,h,d,i,n[3],22,-1044525330),i=$l(i,l,h,d,n[4],7,-176418897),d=$l(d,i,l,h,n[5],12,1200080426),h=$l(h,d,i,l,n[6],17,-1473231341),l=$l(l,h,d,i,n[7],22,-45705983),i=$l(i,l,h,d,n[8],7,1770035416),d=$l(d,i,l,h,n[9],12,-1958414417),h=$l(h,d,i,l,n[10],17,-42063),l=$l(l,h,d,i,n[11],22,-1990404162),i=$l(i,l,h,d,n[12],7,1804603682),d=$l(d,i,l,h,n[13],12,-40341101),h=$l(h,d,i,l,n[14],17,-1502002290),i=Wl(i,l=$l(l,h,d,i,n[15],22,1236535329),h,d,n[1],5,-165796510),d=Wl(d,i,l,h,n[6],9,-1069501632),h=Wl(h,d,i,l,n[11],14,643717713),l=Wl(l,h,d,i,n[0],20,-373897302),i=Wl(i,l,h,d,n[5],5,-701558691),d=Wl(d,i,l,h,n[10],9,38016083),h=Wl(h,d,i,l,n[15],14,-660478335),l=Wl(l,h,d,i,n[4],20,-405537848),i=Wl(i,l,h,d,n[9],5,568446438),d=Wl(d,i,l,h,n[14],9,-1019803690),h=Wl(h,d,i,l,n[3],14,-187363961),l=Wl(l,h,d,i,n[8],20,1163531501),i=Wl(i,l,h,d,n[13],5,-1444681467),d=Wl(d,i,l,h,n[2],9,-51403784),h=Wl(h,d,i,l,n[7],14,1735328473),i=Zl(i,l=Wl(l,h,d,i,n[12],20,-1926607734),h,d,n[5],4,-378558),d=Zl(d,i,l,h,n[8],11,-2022574463),h=Zl(h,d,i,l,n[11],16,1839030562),l=Zl(l,h,d,i,n[14],23,-35309556),i=Zl(i,l,h,d,n[1],4,-1530992060),d=Zl(d,i,l,h,n[4],11,1272893353),h=Zl(h,d,i,l,n[7],16,-155497632),l=Zl(l,h,d,i,n[10],23,-1094730640),i=Zl(i,l,h,d,n[13],4,681279174),d=Zl(d,i,l,h,n[0],11,-358537222),h=Zl(h,d,i,l,n[3],16,-722521979),l=Zl(l,h,d,i,n[6],23,76029189),i=Zl(i,l,h,d,n[9],4,-640364487),d=Zl(d,i,l,h,n[12],11,-421815835),h=Zl(h,d,i,l,n[15],16,530742520),i=Xl(i,l=Zl(l,h,d,i,n[2],23,-995338651),h,d,n[0],6,-198630844),d=Xl(d,i,l,h,n[7],10,1126891415),h=Xl(h,d,i,l,n[14],15,-1416354905),l=Xl(l,h,d,i,n[5],21,-57434055),i=Xl(i,l,h,d,n[12],6,1700485571),d=Xl(d,i,l,h,n[3],10,-1894986606),h=Xl(h,d,i,l,n[10],15,-1051523),l=Xl(l,h,d,i,n[1],21,-2054922799),i=Xl(i,l,h,d,n[8],6,1873313359),d=Xl(d,i,l,h,n[15],10,-30611744),h=Xl(h,d,i,l,n[6],15,-1560198380),l=Xl(l,h,d,i,n[13],21,1309151649),i=Xl(i,l,h,d,n[4],6,-145523070),d=Xl(d,i,l,h,n[11],10,-1120210379),h=Xl(h,d,i,l,n[2],15,718787259),l=Xl(l,h,d,i,n[9],21,-343485551),e[0]=pd(i,e[0]),e[1]=pd(l,e[1]),e[2]=pd(h,e[2]),e[3]=pd(d,e[3])}function Xy(e,n,i,l,h,d){return n=pd(pd(n,e),pd(l,d)),pd(n<<h|n>>>32-h,i)}function $l(e,n,i,l,h,d,m){return Xy(n&i|~n&l,e,n,h,d,m)}function Wl(e,n,i,l,h,d,m){return Xy(n&l|i&~l,e,n,h,d,m)}function Zl(e,n,i,l,h,d,m){return Xy(n^i^l,e,n,h,d,m)}function Xl(e,n,i,l,h,d,m){return Xy(i^(n|~l),e,n,h,d,m)}function y4(e){var n,i=e.length,l=[1732584193,-271733879,-1732584194,271733878];for(n=64;n<=e.length;n+=64)$1(l,cj(e.substring(n-64,n)));e=e.substring(n-64);var h=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(n=0;n<e.length;n++)h[n>>2]|=e.charCodeAt(n)<<(n%4<<3);if(h[n>>2]|=128<<(n%4<<3),n>55)for($1(l,h),n=0;n<16;n++)h[n]=0;return h[14]=8*i,$1(l,h),l}function cj(e){var n,i=[];for(n=0;n<64;n+=4)i[n>>2]=e.charCodeAt(n)+(e.charCodeAt(n+1)<<8)+(e.charCodeAt(n+2)<<16)+(e.charCodeAt(n+3)<<24);return i}var UC="0123456789abcdef".split("");function Aj(e){for(var n="",i=0;i<4;i++)n+=UC[e>>8*i+4&15]+UC[e>>8*i&15];return n}function uj(e){return String.fromCharCode(255&e,(65280&e)>>8,(16711680&e)>>16,(4278190080&e)>>24)}function uw(e){return y4(e).map(uj).join("")}var hj=(function(e){for(var n=0;n<e.length;n++)e[n]=Aj(e[n]);return e.join("")})(y4("hello"))!="5d41402abc4b2a76b9719d911017c592";function pd(e,n){if(hj){var i=(65535&e)+(65535&n);return(e>>16)+(n>>16)+(i>>16)<<16|65535&i}return e+n&4294967295}function hw(e,n){var i,l,h,d;if(e!==i){for(var m=(h=e,d=1+(256/e.length|0),new Array(d+1).join(h)),o=[],x=0;x<256;x++)o[x]=x;var E=0;for(x=0;x<256;x++){var I=o[x];E=(E+I+m.charCodeAt(x))%256,o[x]=o[E],o[E]=I}i=e,l=o}else o=l;var D=n.length,O=0,P=0,W="";for(x=0;x<D;x++)P=(P+(I=o[O=(O+1)%256]))%256,o[O]=o[P],o[P]=I,m=o[(o[O]+o[P])%256],W+=String.fromCharCode(n.charCodeAt(x)^m);return W}var DC={print:4,modify:8,copy:16,"annot-forms":32};function rp(e,n,i,l){this.v=1,this.r=2;var h=192;e.forEach(function(o){if(DC.perm!==void 0)throw new Error("Invalid permission: "+o);h+=DC[o]}),this.padding="(N^NuAd\0NV\b..\0h>/\fdSiz";var d=(n+this.padding).substr(0,32),m=(i+this.padding).substr(0,32);this.O=this.processOwnerPassword(d,m),this.P=-(1+(255^h)),this.encryptionKey=uw(d+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(l)).substr(0,5),this.U=hw(this.encryptionKey,this.padding)}function np(e){if(/[^\u0000-\u00ff]/.test(e))throw new Error("Invalid PDF Name Object: "+e+", Only accept ASCII characters.");for(var n="",i=e.length,l=0;l<i;l++){var h=e.charCodeAt(l);n+=h<33||h===35||h===37||h===40||h===41||h===47||h===60||h===62||h===91||h===93||h===123||h===125||h>126?"#"+("0"+h.toString(16)).slice(-2):e[l]}return n}function RC(e){if(rs(e)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var n={};this.subscribe=function(i,l,h){if(h=h||!1,typeof i!="string"||typeof l!="function"||typeof h!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");n.hasOwnProperty(i)||(n[i]={});var d=Math.random().toString(35);return n[i][d]=[l,!!h],d},this.unsubscribe=function(i){for(var l in n)if(n[l][i])return delete n[l][i],Object.keys(n[l]).length===0&&delete n[l],!0;return!1},this.publish=function(i){if(n.hasOwnProperty(i)){var l=Array.prototype.slice.call(arguments,1),h=[];for(var d in n[i]){var m=n[i][d];try{m[0].apply(e,l)}catch(o){kn.console&&gs.error("jsPDF PubSub Error",o.message,o)}m[1]&&h.push(d)}h.length&&h.forEach(this.unsubscribe)}},this.getTopics=function(){return n}}function Ay(e){if(!(this instanceof Ay))return new Ay(e);var n="opacity,stroke-opacity".split(",");for(var i in e)e.hasOwnProperty(i)&&n.indexOf(i)>=0&&(this[i]=e[i]);this.id="",this.objectNumber=-1}function v4(e,n){this.gState=e,this.matrix=n,this.id="",this.objectNumber=-1}function Xd(e,n,i,l,h){if(!(this instanceof Xd))return new Xd(e,n,i,l,h);this.type=e==="axial"?2:3,this.coords=n,this.colors=i,v4.call(this,l,h)}function ap(e,n,i,l,h){if(!(this instanceof ap))return new ap(e,n,i,l,h);this.boundingBox=e,this.xStep=n,this.yStep=i,this.stream="",this.cloneIndex=0,v4.call(this,l,h)}function fn(e){var n,i=typeof arguments[0]=="string"?arguments[0]:"p",l=arguments[1],h=arguments[2],d=arguments[3],m=[],o=1,x=16,E="S",I=null;rs(e=e||{})==="object"&&(i=e.orientation,l=e.unit||l,h=e.format||h,d=e.compress||e.compressPdf||d,(I=e.encryption||null)!==null&&(I.userPassword=I.userPassword||"",I.ownerPassword=I.ownerPassword||"",I.userPermissions=I.userPermissions||[]),o=typeof e.userUnit=="number"?Math.abs(e.userUnit):1,e.precision!==void 0&&(n=e.precision),e.floatPrecision!==void 0&&(x=e.floatPrecision),E=e.defaultPathOperation||"S"),m=e.filters||(d===!0?["FlateEncode"]:m),l=l||"mm",i=(""+(i||"P")).toLowerCase();var D=e.putOnlyUsedFonts||!1,O={},P={internal:{},__private__:{}};P.__private__.PubSub=RC;var W="1.3",z=P.__private__.getPdfVersion=function(){return W};P.__private__.setPdfVersion=function(V){W=V};var H={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};P.__private__.getPageFormats=function(){return H};var Z=P.__private__.getPageFormat=function(V){return H[V]};h=h||"a4";var ie="compat",ce="advanced",he=ie;function Ie(){this.saveGraphicsState(),He(new wr(qe,0,0,-qe,0,ao()*qe).toString()+" cm"),this.setFontSize(this.getFontSize()/qe),E="n",he=ce}function Ve(){this.restoreGraphicsState(),E="S",he=ie}var Me=P.__private__.combineFontStyleAndFontWeight=function(V,ge){if(V=="bold"&&ge=="normal"||V=="bold"&&ge==400||V=="normal"&&ge=="italic"||V=="bold"&&ge=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return ge&&(V=ge==400||ge==="normal"?V==="italic"?"italic":"normal":ge!=700&&ge!=="bold"||V!=="normal"?(ge==700?"bold":ge)+""+V:"bold"),V};P.advancedAPI=function(V){var ge=he===ie;return ge&&Ie.call(this),typeof V!="function"||(V(this),ge&&Ve.call(this)),this},P.compatAPI=function(V){var ge=he===ce;return ge&&Ve.call(this),typeof V!="function"||(V(this),ge&&Ie.call(this)),this},P.isAdvancedAPI=function(){return he===ce};var Pe,xe=function(V){if(he!==ce)throw new Error(V+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},nt=P.roundToPrecision=P.__private__.roundToPrecision=function(V,ge){var et=n||ge;if(isNaN(V)||isNaN(et))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return V.toFixed(et).replace(/0+$/,"")};Pe=P.hpf=P.__private__.hpf=typeof x=="number"?function(V){if(isNaN(V))throw new Error("Invalid argument passed to jsPDF.hpf");return nt(V,x)}:x==="smart"?function(V){if(isNaN(V))throw new Error("Invalid argument passed to jsPDF.hpf");return nt(V,V>-1&&V<1?16:5)}:function(V){if(isNaN(V))throw new Error("Invalid argument passed to jsPDF.hpf");return nt(V,16)};var pe=P.f2=P.__private__.f2=function(V){if(isNaN(V))throw new Error("Invalid argument passed to jsPDF.f2");return nt(V,2)},_e=P.__private__.f3=function(V){if(isNaN(V))throw new Error("Invalid argument passed to jsPDF.f3");return nt(V,3)},Ue=P.scale=P.__private__.scale=function(V){if(isNaN(V))throw new Error("Invalid argument passed to jsPDF.scale");return he===ie?V*qe:he===ce?V:void 0},Fe=function(V){return Ue((function(ge){return he===ie?ao()-ge:he===ce?ge:void 0})(V))};P.__private__.setPrecision=P.setPrecision=function(V){typeof parseInt(V,10)=="number"&&(n=parseInt(V,10))};var pt,ht="00000000000000000000000000000000",Je=P.__private__.getFileId=function(){return ht},ze=P.__private__.setFileId=function(V){return ht=V!==void 0&&/^[a-fA-F0-9]{32}$/.test(V)?V.toUpperCase():ht.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),I!==null&&(ys=new rp(I.userPermissions,I.userPassword,I.ownerPassword,ht)),ht};P.setFileId=function(V){return ze(V),this},P.getFileId=function(){return Je()};var je=P.__private__.convertDateToPDFDate=function(V){var ge=V.getTimezoneOffset(),et=ge<0?"+":"-",gt=Math.floor(Math.abs(ge/60)),It=Math.abs(ge%60),Gt=[et,Ne(gt),"'",Ne(It),"'"].join("");return["D:",V.getFullYear(),Ne(V.getMonth()+1),Ne(V.getDate()),Ne(V.getHours()),Ne(V.getMinutes()),Ne(V.getSeconds()),Gt].join("")},xt=P.__private__.convertPDFDateToDate=function(V){var ge=parseInt(V.substr(2,4),10),et=parseInt(V.substr(6,2),10)-1,gt=parseInt(V.substr(8,2),10),It=parseInt(V.substr(10,2),10),Gt=parseInt(V.substr(12,2),10),sr=parseInt(V.substr(14,2),10);return new Date(ge,et,gt,It,Gt,sr,0)},Re=P.__private__.setCreationDate=function(V){var ge;if(V===void 0&&(V=new Date),V instanceof Date)ge=je(V);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(V))throw new Error("Invalid argument passed to jsPDF.setCreationDate");ge=V}return pt=ge},oe=P.__private__.getCreationDate=function(V){var ge=pt;return V==="jsDate"&&(ge=xt(pt)),ge};P.setCreationDate=function(V){return Re(V),this},P.getCreationDate=function(V){return oe(V)};var Se,Ne=P.__private__.padd2=function(V){return("0"+parseInt(V)).slice(-2)},Ye=P.__private__.padd2Hex=function(V){return("00"+(V=V.toString())).substr(V.length)},lt=0,rt=[],vt=[],St=0,Lt=[],Wt=[],ar=!1,hr=vt;P.__private__.setCustomOutputDestination=function(V){ar=!0,hr=V};var Cr=function(V){ar||(hr=V)};P.__private__.resetCustomOutputDestination=function(){ar=!1,hr=vt};var He=P.__private__.out=function(V){return V=V.toString(),St+=V.length+1,hr.push(V),hr},vr=P.__private__.write=function(V){return He(arguments.length===1?V.toString():Array.prototype.join.call(arguments," "))},Ur=P.__private__.getArrayBuffer=function(V){for(var ge=V.length,et=new ArrayBuffer(ge),gt=new Uint8Array(et);ge--;)gt[ge]=V.charCodeAt(ge);return et},$r=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];P.__private__.getStandardFonts=function(){return $r};var lr=e.fontSize||16;P.__private__.setFontSize=P.setFontSize=function(V){return lr=he===ce?V/qe:V,this};var Wr,Sr=P.__private__.getFontSize=P.getFontSize=function(){return he===ie?lr:lr*qe},Or=e.R2L||!1;P.__private__.setR2L=P.setR2L=function(V){return Or=V,this},P.__private__.getR2L=P.getR2L=function(){return Or};var Rr,On=P.__private__.setZoomMode=function(V){if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(V))Wr=V;else if(isNaN(V)){if([void 0,null,"fullwidth","fullheight","fullpage","original"].indexOf(V)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+V+'" is not recognized.');Wr=V}else Wr=parseInt(V,10)};P.__private__.getZoomMode=function(){return Wr};var hn,ft=P.__private__.setPageMode=function(V){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(V)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+V+'" is not recognized.');Rr=V};P.__private__.getPageMode=function(){return Rr};var de=P.__private__.setLayoutMode=function(V){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(V)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+V+'" is not recognized.');hn=V};P.__private__.getLayoutMode=function(){return hn},P.__private__.setDisplayMode=P.setDisplayMode=function(V,ge,et){return On(V),de(ge),ft(et),this};var fe={title:"",subject:"",author:"",keywords:"",creator:""};P.__private__.getDocumentProperty=function(V){if(Object.keys(fe).indexOf(V)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return fe[V]},P.__private__.getDocumentProperties=function(){return fe},P.__private__.setDocumentProperties=P.setProperties=P.setDocumentProperties=function(V){for(var ge in fe)fe.hasOwnProperty(ge)&&V[ge]&&(fe[ge]=V[ge]);return this},P.__private__.setDocumentProperty=function(V,ge){if(Object.keys(fe).indexOf(V)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return fe[V]=ge};var ye,qe,We,Ct,yt,at={},bt={},Ht=[],Ft={},cr={},Jt={},fr={},rn=null,Tr=0,mt=[],tn=new RC(P),Nr=e.hotfixes||[],mr={},Kr={},Dn=[],wr=function V(ge,et,gt,It,Gt,sr){if(!(this instanceof V))return new V(ge,et,gt,It,Gt,sr);isNaN(ge)&&(ge=1),isNaN(et)&&(et=0),isNaN(gt)&&(gt=0),isNaN(It)&&(It=1),isNaN(Gt)&&(Gt=0),isNaN(sr)&&(sr=0),this._matrix=[ge,et,gt,It,Gt,sr]};Object.defineProperty(wr.prototype,"sx",{get:function(){return this._matrix[0]},set:function(V){this._matrix[0]=V}}),Object.defineProperty(wr.prototype,"shy",{get:function(){return this._matrix[1]},set:function(V){this._matrix[1]=V}}),Object.defineProperty(wr.prototype,"shx",{get:function(){return this._matrix[2]},set:function(V){this._matrix[2]=V}}),Object.defineProperty(wr.prototype,"sy",{get:function(){return this._matrix[3]},set:function(V){this._matrix[3]=V}}),Object.defineProperty(wr.prototype,"tx",{get:function(){return this._matrix[4]},set:function(V){this._matrix[4]=V}}),Object.defineProperty(wr.prototype,"ty",{get:function(){return this._matrix[5]},set:function(V){this._matrix[5]=V}}),Object.defineProperty(wr.prototype,"a",{get:function(){return this._matrix[0]},set:function(V){this._matrix[0]=V}}),Object.defineProperty(wr.prototype,"b",{get:function(){return this._matrix[1]},set:function(V){this._matrix[1]=V}}),Object.defineProperty(wr.prototype,"c",{get:function(){return this._matrix[2]},set:function(V){this._matrix[2]=V}}),Object.defineProperty(wr.prototype,"d",{get:function(){return this._matrix[3]},set:function(V){this._matrix[3]=V}}),Object.defineProperty(wr.prototype,"e",{get:function(){return this._matrix[4]},set:function(V){this._matrix[4]=V}}),Object.defineProperty(wr.prototype,"f",{get:function(){return this._matrix[5]},set:function(V){this._matrix[5]=V}}),Object.defineProperty(wr.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(wr.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(wr.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(wr.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),wr.prototype.join=function(V){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(Pe).join(V)},wr.prototype.multiply=function(V){var ge=V.sx*this.sx+V.shy*this.shx,et=V.sx*this.shy+V.shy*this.sy,gt=V.shx*this.sx+V.sy*this.shx,It=V.shx*this.shy+V.sy*this.sy,Gt=V.tx*this.sx+V.ty*this.shx+this.tx,sr=V.tx*this.shy+V.ty*this.sy+this.ty;return new wr(ge,et,gt,It,Gt,sr)},wr.prototype.decompose=function(){var V=this.sx,ge=this.shy,et=this.shx,gt=this.sy,It=this.tx,Gt=this.ty,sr=Math.sqrt(V*V+ge*ge),br=(V/=sr)*et+(ge/=sr)*gt;et-=V*br,gt-=ge*br;var Vr=Math.sqrt(et*et+gt*gt);return br/=Vr,V*(gt/=Vr)<ge*(et/=Vr)&&(V=-V,ge=-ge,br=-br,sr=-sr),{scale:new wr(sr,0,0,Vr,0,0),translate:new wr(1,0,0,1,It,Gt),rotate:new wr(V,ge,-ge,V,0,0),skew:new wr(1,0,br,1,0,0)}},wr.prototype.toString=function(V){return this.join(" ")},wr.prototype.inversed=function(){var V=this.sx,ge=this.shy,et=this.shx,gt=this.sy,It=this.tx,Gt=this.ty,sr=1/(V*gt-ge*et),br=gt*sr,Vr=-ge*sr,gn=-et*sr,yn=V*sr;return new wr(br,Vr,gn,yn,-br*It-gn*Gt,-Vr*It-yn*Gt)},wr.prototype.applyToPoint=function(V){var ge=V.x*this.sx+V.y*this.shx+this.tx,et=V.x*this.shy+V.y*this.sy+this.ty;return new ua(ge,et)},wr.prototype.applyToRectangle=function(V){var ge=this.applyToPoint(V),et=this.applyToPoint(new ua(V.x+V.w,V.y+V.h));return new sc(ge.x,ge.y,et.x-ge.x,et.y-ge.y)},wr.prototype.clone=function(){var V=this.sx,ge=this.shy,et=this.shx,gt=this.sy,It=this.tx,Gt=this.ty;return new wr(V,ge,et,gt,It,Gt)},P.Matrix=wr;var Tn=P.matrixMult=function(V,ge){return ge.multiply(V)},Bn=new wr(1,0,0,1,0,0);P.unitMatrix=P.identityMatrix=Bn;var xn=function(V,ge){if(!cr[V]){var et=(ge instanceof Xd?"Sh":"P")+(Object.keys(Ft).length+1).toString(10);ge.id=et,cr[V]=et,Ft[et]=ge,tn.publish("addPattern",ge)}};P.ShadingPattern=Xd,P.TilingPattern=ap,P.addShadingPattern=function(V,ge){return xe("addShadingPattern()"),xn(V,ge),this},P.beginTilingPattern=function(V){xe("beginTilingPattern()"),Nn(V.boundingBox[0],V.boundingBox[1],V.boundingBox[2]-V.boundingBox[0],V.boundingBox[3]-V.boundingBox[1],V.matrix)},P.endTilingPattern=function(V,ge){xe("endTilingPattern()"),ge.stream=Wt[Se].join(`
`),xn(V,ge),tn.publish("endTilingPattern",ge),Dn.pop().restore()};var Di,ai=P.__private__.newObject=function(){var V=Yt();return Zn(V,!0),V},Yt=P.__private__.newObjectDeferred=function(){return lt++,rt[lt]=function(){return St},lt},Zn=function(V,ge){return ge=typeof ge=="boolean"&&ge,rt[V]=St,ge&&He(V+" 0 obj"),V},$i=P.__private__.newAdditionalObject=function(){var V={objId:Yt(),content:""};return Lt.push(V),V},sl=Yt(),ns=Yt(),pr=P.__private__.decodeColorString=function(V){var ge=V.split(" ");if(ge.length!==2||ge[1]!=="g"&&ge[1]!=="G")ge.length!==5||ge[4]!=="k"&&ge[4]!=="K"||(ge=[(1-ge[0])*(1-ge[3]),(1-ge[1])*(1-ge[3]),(1-ge[2])*(1-ge[3]),"r"]);else{var et=parseFloat(ge[0]);ge=[et,et,et,"r"]}for(var gt="#",It=0;It<3;It++)gt+=("0"+Math.floor(255*parseFloat(ge[It])).toString(16)).slice(-2);return gt},nn=P.__private__.encodeColorString=function(V){var ge;typeof V=="string"&&(V={ch1:V});var et=V.ch1,gt=V.ch2,It=V.ch3,Gt=V.ch4,sr=V.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof et=="string"&&et.charAt(0)!=="#"){var br=new g4(et);if(br.ok)et=br.toHex();else if(!/^\d*\.?\d*$/.test(et))throw new Error('Invalid color "'+et+'" passed to jsPDF.encodeColorString.')}if(typeof et=="string"&&/^#[0-9A-Fa-f]{3}$/.test(et)&&(et="#"+et[1]+et[1]+et[2]+et[2]+et[3]+et[3]),typeof et=="string"&&/^#[0-9A-Fa-f]{6}$/.test(et)){var Vr=parseInt(et.substr(1),16);et=Vr>>16&255,gt=Vr>>8&255,It=255&Vr}if(gt===void 0||Gt===void 0&&et===gt&&gt===It)ge=typeof et=="string"?et+" "+sr[0]:V.precision===2?pe(et/255)+" "+sr[0]:_e(et/255)+" "+sr[0];else if(Gt===void 0||rs(Gt)==="object"){if(Gt&&!isNaN(Gt.a)&&Gt.a===0)return["1.","1.","1.",sr[1]].join(" ");ge=typeof et=="string"?[et,gt,It,sr[1]].join(" "):V.precision===2?[pe(et/255),pe(gt/255),pe(It/255),sr[1]].join(" "):[_e(et/255),_e(gt/255),_e(It/255),sr[1]].join(" ")}else ge=typeof et=="string"?[et,gt,It,Gt,sr[2]].join(" "):V.precision===2?[pe(et),pe(gt),pe(It),pe(Gt),sr[2]].join(" "):[_e(et),_e(gt),_e(It),_e(Gt),sr[2]].join(" ");return ge},un=P.__private__.getFilters=function(){return m},Ri=P.__private__.putStream=function(V){var ge=(V=V||{}).data||"",et=V.filters||un(),gt=V.alreadyAppliedFilters||[],It=V.addLength1||!1,Gt=ge.length,sr=V.objectId,br=function(Ds){return Ds};if(I!==null&&sr===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");I!==null&&(br=ys.encryptor(sr,0));var Vr={};et===!0&&(et=["FlateEncode"]);var gn=V.additionalKeyValues||[],yn=(Vr=fn.API.processDataByFilters!==void 0?fn.API.processDataByFilters(ge,et):{data:ge,reverseChain:[]}).reverseChain+(Array.isArray(gt)?gt.join(" "):gt.toString());if(Vr.data.length!==0&&(gn.push({key:"Length",value:Vr.data.length}),It===!0&&gn.push({key:"Length1",value:Gt})),yn.length!=0)if(yn.split("/").length-1==1)gn.push({key:"Filter",value:yn});else{gn.push({key:"Filter",value:"["+yn+"]"});for(var An=0;An<gn.length;An+=1)if(gn[An].key==="DecodeParms"){for(var ji=[],is=0;is<Vr.reverseChain.split("/").length-1;is+=1)ji.push("null");ji.push(gn[An].value),gn[An].value="["+ji.join(" ")+"]"}}He("<<");for(var Si=0;Si<gn.length;Si++)He("/"+gn[Si].key+" "+gn[Si].value);He(">>"),Vr.data.length!==0&&(He("stream"),He(br(Vr.data)),He("endstream"))},El=P.__private__.putPage=function(V){var ge=V.number,et=V.data,gt=V.objId,It=V.contentsObjId;Zn(gt,!0),He("<</Type /Page"),He("/Parent "+V.rootDictionaryObjId+" 0 R"),He("/Resources "+V.resourceDictionaryObjId+" 0 R"),He("/MediaBox ["+parseFloat(Pe(V.mediaBox.bottomLeftX))+" "+parseFloat(Pe(V.mediaBox.bottomLeftY))+" "+Pe(V.mediaBox.topRightX)+" "+Pe(V.mediaBox.topRightY)+"]"),V.cropBox!==null&&He("/CropBox ["+Pe(V.cropBox.bottomLeftX)+" "+Pe(V.cropBox.bottomLeftY)+" "+Pe(V.cropBox.topRightX)+" "+Pe(V.cropBox.topRightY)+"]"),V.bleedBox!==null&&He("/BleedBox ["+Pe(V.bleedBox.bottomLeftX)+" "+Pe(V.bleedBox.bottomLeftY)+" "+Pe(V.bleedBox.topRightX)+" "+Pe(V.bleedBox.topRightY)+"]"),V.trimBox!==null&&He("/TrimBox ["+Pe(V.trimBox.bottomLeftX)+" "+Pe(V.trimBox.bottomLeftY)+" "+Pe(V.trimBox.topRightX)+" "+Pe(V.trimBox.topRightY)+"]"),V.artBox!==null&&He("/ArtBox ["+Pe(V.artBox.bottomLeftX)+" "+Pe(V.artBox.bottomLeftY)+" "+Pe(V.artBox.topRightX)+" "+Pe(V.artBox.topRightY)+"]"),typeof V.userUnit=="number"&&V.userUnit!==1&&He("/UserUnit "+V.userUnit),tn.publish("putPage",{objId:gt,pageContext:mt[ge],pageNumber:ge,page:et}),He("/Contents "+It+" 0 R"),He(">>"),He("endobj");var Gt=et.join(`
`);return he===ce&&(Gt+=`
Q`),Zn(It,!0),Ri({data:Gt,filters:un(),objectId:It}),He("endobj"),gt},ks=P.__private__.putPages=function(){var V,ge,et=[];for(V=1;V<=Tr;V++)mt[V].objId=Yt(),mt[V].contentsObjId=Yt();for(V=1;V<=Tr;V++)et.push(El({number:V,data:Wt[V],objId:mt[V].objId,contentsObjId:mt[V].contentsObjId,mediaBox:mt[V].mediaBox,cropBox:mt[V].cropBox,bleedBox:mt[V].bleedBox,trimBox:mt[V].trimBox,artBox:mt[V].artBox,userUnit:mt[V].userUnit,rootDictionaryObjId:sl,resourceDictionaryObjId:ns}));Zn(sl,!0),He("<</Type /Pages");var gt="/Kids [";for(ge=0;ge<Tr;ge++)gt+=et[ge]+" 0 R ";He(gt+"]"),He("/Count "+Tr),He(">>"),He("endobj"),tn.publish("postPutPages")},dn=function(V){tn.publish("putFont",{font:V,out:He,newObject:ai,putStream:Ri}),V.isAlreadyPutted!==!0&&(V.objectNumber=ai(),He("<<"),He("/Type /Font"),He("/BaseFont /"+np(V.postScriptName)),He("/Subtype /Type1"),typeof V.encoding=="string"&&He("/Encoding /"+V.encoding),He("/FirstChar 32"),He("/LastChar 255"),He(">>"),He("endobj"))},ol=function(V){V.objectNumber=ai();var ge=[];ge.push({key:"Type",value:"/XObject"}),ge.push({key:"Subtype",value:"/Form"}),ge.push({key:"BBox",value:"["+[Pe(V.x),Pe(V.y),Pe(V.x+V.width),Pe(V.y+V.height)].join(" ")+"]"}),ge.push({key:"Matrix",value:"["+V.matrix.toString()+"]"});var et=V.pages[1].join(`
`);Ri({data:et,additionalKeyValues:ge,objectId:V.objectNumber}),He("endobj")},al=function(V,ge){ge||(ge=21);var et=ai(),gt=(function(sr,br){var Vr,gn=[],yn=1/(br-1);for(Vr=0;Vr<1;Vr+=yn)gn.push(Vr);if(gn.push(1),sr[0].offset!=0){var An={offset:0,color:sr[0].color};sr.unshift(An)}if(sr[sr.length-1].offset!=1){var ji={offset:1,color:sr[sr.length-1].color};sr.push(ji)}for(var is="",Si=0,Ds=0;Ds<gn.length;Ds++){for(Vr=gn[Ds];Vr>sr[Si+1].offset;)Si++;var Mi=sr[Si].offset,xs=(Vr-Mi)/(sr[Si+1].offset-Mi),Ko=sr[Si].color,fa=sr[Si+1].color;is+=Ye(Math.round((1-xs)*Ko[0]+xs*fa[0]).toString(16))+Ye(Math.round((1-xs)*Ko[1]+xs*fa[1]).toString(16))+Ye(Math.round((1-xs)*Ko[2]+xs*fa[2]).toString(16))}return is.trim()})(V.colors,ge),It=[];It.push({key:"FunctionType",value:"0"}),It.push({key:"Domain",value:"[0.0 1.0]"}),It.push({key:"Size",value:"["+ge+"]"}),It.push({key:"BitsPerSample",value:"8"}),It.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),It.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Ri({data:gt,additionalKeyValues:It,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:et}),He("endobj"),V.objectNumber=ai(),He("<< /ShadingType "+V.type),He("/ColorSpace /DeviceRGB");var Gt="/Coords ["+Pe(parseFloat(V.coords[0]))+" "+Pe(parseFloat(V.coords[1]))+" ";V.type===2?Gt+=Pe(parseFloat(V.coords[2]))+" "+Pe(parseFloat(V.coords[3])):Gt+=Pe(parseFloat(V.coords[2]))+" "+Pe(parseFloat(V.coords[3]))+" "+Pe(parseFloat(V.coords[4]))+" "+Pe(parseFloat(V.coords[5])),He(Gt+="]"),V.matrix&&He("/Matrix ["+V.matrix.toString()+"]"),He("/Function "+et+" 0 R"),He("/Extend [true true]"),He(">>"),He("endobj")},ec=function(V,ge){var et=Yt(),gt=ai();ge.push({resourcesOid:et,objectOid:gt}),V.objectNumber=gt;var It=[];It.push({key:"Type",value:"/Pattern"}),It.push({key:"PatternType",value:"1"}),It.push({key:"PaintType",value:"1"}),It.push({key:"TilingType",value:"1"}),It.push({key:"BBox",value:"["+V.boundingBox.map(Pe).join(" ")+"]"}),It.push({key:"XStep",value:Pe(V.xStep)}),It.push({key:"YStep",value:Pe(V.yStep)}),It.push({key:"Resources",value:et+" 0 R"}),V.matrix&&It.push({key:"Matrix",value:"["+V.matrix.toString()+"]"}),Ri({data:V.stream,additionalKeyValues:It,objectId:V.objectNumber}),He("endobj")},Ec=function(V){for(var ge in V.objectNumber=ai(),He("<<"),V)switch(ge){case"opacity":He("/ca "+pe(V[ge]));break;case"stroke-opacity":He("/CA "+pe(V[ge]))}He(">>"),He("endobj")},fi=function(V){Zn(V.resourcesOid,!0),He("<<"),He("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),(function(){for(var ge in He("/Font <<"),at)at.hasOwnProperty(ge)&&(D===!1||D===!0&&O.hasOwnProperty(ge))&&He("/"+ge+" "+at[ge].objectNumber+" 0 R");He(">>")})(),(function(){if(Object.keys(Ft).length>0){for(var ge in He("/Shading <<"),Ft)Ft.hasOwnProperty(ge)&&Ft[ge]instanceof Xd&&Ft[ge].objectNumber>=0&&He("/"+ge+" "+Ft[ge].objectNumber+" 0 R");tn.publish("putShadingPatternDict"),He(">>")}})(),(function(ge){if(Object.keys(Ft).length>0){for(var et in He("/Pattern <<"),Ft)Ft.hasOwnProperty(et)&&Ft[et]instanceof P.TilingPattern&&Ft[et].objectNumber>=0&&Ft[et].objectNumber<ge&&He("/"+et+" "+Ft[et].objectNumber+" 0 R");tn.publish("putTilingPatternDict"),He(">>")}})(V.objectOid),(function(){if(Object.keys(Jt).length>0){var ge;for(ge in He("/ExtGState <<"),Jt)Jt.hasOwnProperty(ge)&&Jt[ge].objectNumber>=0&&He("/"+ge+" "+Jt[ge].objectNumber+" 0 R");tn.publish("putGStateDict"),He(">>")}})(),(function(){for(var ge in He("/XObject <<"),mr)mr.hasOwnProperty(ge)&&mr[ge].objectNumber>=0&&He("/"+ge+" "+mr[ge].objectNumber+" 0 R");tn.publish("putXobjectDict"),He(">>")})(),He(">>"),He("endobj")},tc=function(V){bt[V.fontName]=bt[V.fontName]||{},bt[V.fontName][V.fontStyle]=V.id},Sl=function(V,ge,et,gt,It){var Gt={id:"F"+(Object.keys(at).length+1).toString(10),postScriptName:V,fontName:ge,fontStyle:et,encoding:gt,isStandardFont:It||!1,metadata:{}};return tn.publish("addFont",{font:Gt,instance:this}),at[Gt.id]=Gt,tc(Gt),Gt.id},Ci=P.__private__.pdfEscape=P.pdfEscape=function(V,ge){return(function(et,gt){var It,Gt,sr,br,Vr,gn,yn,An,ji;if(sr=(gt=gt||{}).sourceEncoding||"Unicode",Vr=gt.outputEncoding,(gt.autoencode||Vr)&&at[ye].metadata&&at[ye].metadata[sr]&&at[ye].metadata[sr].encoding&&(br=at[ye].metadata[sr].encoding,!Vr&&at[ye].encoding&&(Vr=at[ye].encoding),!Vr&&br.codePages&&(Vr=br.codePages[0]),typeof Vr=="string"&&(Vr=br[Vr]),Vr)){for(yn=!1,gn=[],It=0,Gt=et.length;It<Gt;It++)(An=Vr[et.charCodeAt(It)])?gn.push(String.fromCharCode(An)):gn.push(et[It]),gn[It].charCodeAt(0)>>8&&(yn=!0);et=gn.join("")}for(It=et.length;yn===void 0&&It!==0;)et.charCodeAt(It-1)>>8&&(yn=!0),It--;if(!yn)return et;for(gn=gt.noBOM?[]:[254,255],It=0,Gt=et.length;It<Gt;It++){if((ji=(An=et.charCodeAt(It))>>8)>>8)throw new Error("Character at position "+It+" of string '"+et+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");gn.push(ji),gn.push(An-(ji<<8))}return String.fromCharCode.apply(void 0,gn)})(V,ge).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},jn=P.__private__.beginPage=function(V){Wt[++Tr]=[],mt[Tr]={objId:0,contentsObjId:0,userUnit:Number(o),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(V[0]),topRightY:Number(V[1])}},cl(Tr),Cr(Wt[Se])},rA=function(V,ge){var et,gt,It;switch(i=ge||i,typeof V=="string"&&(et=Z(V.toLowerCase()),Array.isArray(et)&&(gt=et[0],It=et[1])),Array.isArray(V)&&(gt=V[0]*qe,It=V[1]*qe),isNaN(gt)&&(gt=h[0],It=h[1]),(gt>14400||It>14400)&&(gs.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),gt=Math.min(14400,gt),It=Math.min(14400,It)),h=[gt,It],i.substr(0,1)){case"l":It>gt&&(h=[It,gt]);break;case"p":gt>It&&(h=[It,gt])}jn(h),qr(Ho),He(Sa),qs!==0&&He(qs+" J"),ul!==0&&He(ul+" j"),tn.publish("addPage",{pageNumber:Tr})},ll=function(V){V>0&&V<=Tr&&(Wt.splice(V,1),mt.splice(V,1),Tr--,Se>Tr&&(Se=Tr),this.setPage(Se))},cl=function(V){V>0&&V<=Tr&&(Se=V)},Us=P.__private__.getNumberOfPages=P.getNumberOfPages=function(){return Wt.length-1},Ro=function(V,ge,et){var gt,It=void 0;return et=et||{},V=V!==void 0?V:at[ye].fontName,ge=ge!==void 0?ge:at[ye].fontStyle,gt=V.toLowerCase(),bt[gt]!==void 0&&bt[gt][ge]!==void 0?It=bt[gt][ge]:bt[V]!==void 0&&bt[V][ge]!==void 0?It=bt[V][ge]:et.disableWarning===!1&&gs.warn("Unable to look up font label for font '"+V+"', '"+ge+"'. Refer to getFontList() for available fonts."),It||et.noFallback||(It=bt.times[ge])==null&&(It=bt.times.normal),It},fs=P.__private__.putInfo=function(){var V=ai(),ge=function(gt){return gt};for(var et in I!==null&&(ge=ys.encryptor(V,0)),He("<<"),He("/Producer ("+Ci(ge("jsPDF "+fn.version))+")"),fe)fe.hasOwnProperty(et)&&fe[et]&&He("/"+et.substr(0,1).toUpperCase()+et.substr(1)+" ("+Ci(ge(fe[et]))+")");He("/CreationDate ("+Ci(ge(pt))+")"),He(">>"),He("endobj")},Ba=P.__private__.putCatalog=function(V){var ge=(V=V||{}).rootDictionaryObjId||sl;switch(ai(),He("<<"),He("/Type /Catalog"),He("/Pages "+ge+" 0 R"),Wr||(Wr="fullwidth"),Wr){case"fullwidth":He("/OpenAction [3 0 R /FitH null]");break;case"fullheight":He("/OpenAction [3 0 R /FitV null]");break;case"fullpage":He("/OpenAction [3 0 R /Fit]");break;case"original":He("/OpenAction [3 0 R /XYZ null null 1]");break;default:var et=""+Wr;et.substr(et.length-1)==="%"&&(Wr=parseInt(Wr)/100),typeof Wr=="number"&&He("/OpenAction [3 0 R /XYZ null null "+pe(Wr)+"]")}switch(hn||(hn="continuous"),hn){case"continuous":He("/PageLayout /OneColumn");break;case"single":He("/PageLayout /SinglePage");break;case"two":case"twoleft":He("/PageLayout /TwoColumnLeft");break;case"tworight":He("/PageLayout /TwoColumnRight")}Rr&&He("/PageMode /"+Rr),tn.publish("putCatalog"),He(">>"),He("endobj")},IA=P.__private__.putTrailer=function(){He("trailer"),He("<<"),He("/Size "+(lt+1)),He("/Root "+lt+" 0 R"),He("/Info "+(lt-1)+" 0 R"),I!==null&&He("/Encrypt "+ys.oid+" 0 R"),He("/ID [ <"+ht+"> <"+ht+"> ]"),He(">>")},Mn=P.__private__.putHeader=function(){He("%PDF-"+W),He("%")},Sc=P.__private__.putXRef=function(){var V="0000000000";He("xref"),He("0 "+(lt+1)),He("0000000000 65535 f ");for(var ge=1;ge<=lt;ge++)typeof rt[ge]=="function"?He((V+rt[ge]()).slice(-10)+" 00000 n "):rt[ge]!==void 0?He((V+rt[ge]).slice(-10)+" 00000 n "):He("0000000000 00000 n ")},No=P.__private__.buildDocument=function(){var V;lt=0,St=0,vt=[],rt=[],Lt=[],sl=Yt(),ns=Yt(),Cr(vt),tn.publish("buildDocument"),Mn(),ks(),(function(){tn.publish("putAdditionalObjects");for(var et=0;et<Lt.length;et++){var gt=Lt[et];Zn(gt.objId,!0),He(gt.content),He("endobj")}tn.publish("postPutAdditionalObjects")})(),V=[],(function(){for(var et in at)at.hasOwnProperty(et)&&(D===!1||D===!0&&O.hasOwnProperty(et))&&dn(at[et])})(),(function(){var et;for(et in Jt)Jt.hasOwnProperty(et)&&Ec(Jt[et])})(),(function(){for(var et in mr)mr.hasOwnProperty(et)&&ol(mr[et])})(),(function(et){var gt;for(gt in Ft)Ft.hasOwnProperty(gt)&&(Ft[gt]instanceof Xd?al(Ft[gt]):Ft[gt]instanceof ap&&ec(Ft[gt],et))})(V),tn.publish("putResources"),V.forEach(fi),fi({resourcesOid:ns,objectOid:Number.MAX_SAFE_INTEGER}),tn.publish("postPutResources"),I!==null&&(ys.oid=ai(),He("<<"),He("/Filter /Standard"),He("/V "+ys.v),He("/R "+ys.r),He("/U <"+ys.toHexString(ys.U)+">"),He("/O <"+ys.toHexString(ys.O)+">"),He("/P "+ys.P),He(">>"),He("endobj")),fs(),Ba();var ge=St;return Sc(),IA(),He("startxref"),He(""+ge),He("%%EOF"),Cr(Wt[Se]),vt.join(`
`)},Qo=P.__private__.getBlob=function(V){return new Blob([Ur(V)],{type:"application/pdf"})},Fc=P.output=P.__private__.output=(Di=function(V,ge){switch(typeof(ge=ge||{})=="string"?ge={filename:ge}:ge.filename=ge.filename||"generated.pdf",V){case void 0:return No();case"save":P.save(ge.filename);break;case"arraybuffer":return Ur(No());case"blob":return Qo(No());case"bloburi":case"bloburl":if(kn.URL!==void 0&&typeof kn.URL.createObjectURL=="function")return kn.URL&&kn.URL.createObjectURL(Qo(No()))||void 0;gs.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var et="",gt=No();try{et=kC(gt)}catch{et=kC(unescape(encodeURIComponent(gt)))}return"data:application/pdf;filename="+ge.filename+";base64,"+et;case"pdfobjectnewwindow":if(Object.prototype.toString.call(kn)==="[object Window]"){var It="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",Gt=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';ge.pdfObjectUrl&&(It=ge.pdfObjectUrl,Gt="");var sr='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+It+'"'+Gt+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(ge)+");<\/script></body></html>",br=kn.open();return br!==null&&br.document.write(sr),br}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(kn)==="[object Window]"){var Vr='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(ge.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+ge.filename+'" width="500px" height="400px" /></body></html>',gn=kn.open();if(gn!==null){gn.document.write(Vr);var yn=this;gn.document.documentElement.querySelector("#pdfViewer").onload=function(){gn.document.title=ge.filename,gn.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(yn.output("bloburl"))}}return gn}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(kn)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var An='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",ge)+'"></iframe></body></html>',ji=kn.open();if(ji!==null&&(ji.document.write(An),ji.document.title=ge.filename),ji||typeof safari>"u")return ji;break;case"datauri":case"dataurl":return kn.document.location.href=this.output("datauristring",ge);default:return null}},Di.foo=function(){try{return Di.apply(this,arguments)}catch(et){var V=et.stack||"";~V.indexOf(" at ")&&(V=V.split(" at ")[1]);var ge="Error in function "+V.split(`
`)[0].split("<")[0]+": "+et.message;if(!kn.console)throw new Error(ge);kn.console.error(ge,et),kn.alert&&alert(ge)}},Di.foo.bar=Di,Di.foo),la=function(V){return Array.isArray(Nr)===!0&&Nr.indexOf(V)>-1};switch(l){case"pt":qe=1;break;case"mm":qe=72/25.4;break;case"cm":qe=72/2.54;break;case"in":qe=72;break;case"px":qe=la("px_scaling")==1?.75:96/72;break;case"pc":case"em":qe=12;break;case"ex":qe=6;break;default:if(typeof l!="number")throw new Error("Invalid unit: "+l);qe=l}var ys=null;Re(),ze();var Oo=P.__private__.getPageInfo=P.getPageInfo=function(V){if(isNaN(V)||V%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:mt[V].objId,pageNumber:V,pageContext:mt[V]}},nA=P.__private__.getPageInfoByObjId=function(V){if(isNaN(V)||V%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var ge in mt)if(mt[ge].objId===V)break;return Oo(ge)},iA=P.__private__.getCurrentPageInfo=P.getCurrentPageInfo=function(){return{objId:mt[Se].objId,pageNumber:Se,pageContext:mt[Se]}};P.addPage=function(){return rA.apply(this,arguments),this},P.setPage=function(){return cl.apply(this,arguments),Cr.call(this,Wt[Se]),this},P.insertPage=function(V){return this.addPage(),this.movePage(Se,V),this},P.movePage=function(V,ge){var et,gt;if(V>ge){et=Wt[V],gt=mt[V];for(var It=V;It>ge;It--)Wt[It]=Wt[It-1],mt[It]=mt[It-1];Wt[ge]=et,mt[ge]=gt,this.setPage(ge)}else if(V<ge){et=Wt[V],gt=mt[V];for(var Gt=V;Gt<ge;Gt++)Wt[Gt]=Wt[Gt+1],mt[Gt]=mt[Gt+1];Wt[ge]=et,mt[ge]=gt,this.setPage(ge)}return this},P.deletePage=function(){return ll.apply(this,arguments),this},P.__private__.text=P.text=function(V,ge,et,gt,It){var Gt,sr,br,Vr,gn,yn,An,ji,is,Si=(gt=gt||{}).scope||this;if(typeof V=="number"&&typeof ge=="number"&&(typeof et=="string"||Array.isArray(et))){var Ds=et;et=ge,ge=V,V=Ds}if(arguments[3]instanceof wr==0?(br=arguments[4],Vr=arguments[5],rs(An=arguments[3])==="object"&&An!==null||(typeof br=="string"&&(Vr=br,br=null),typeof An=="string"&&(Vr=An,An=null),typeof An=="number"&&(br=An,An=null),gt={flags:An,angle:br,align:Vr})):(xe("The transform parameter of text() with a Matrix value"),is=It),isNaN(ge)||isNaN(et)||V==null)throw new Error("Invalid arguments passed to jsPDF.text");if(V.length===0)return Si;var Mi,xs="",Ko=typeof gt.lineHeightFactor=="number"?gt.lineHeightFactor:zo,fa=Si.internal.scaleFactor;function pa(si){return si=si.split("	").join(Array(gt.TabLen||9).join(" ")),Ci(si,An)}function Ta(si){for(var _i,Yi=si.concat(),bs=[],Pn=Yi.length;Pn--;)typeof(_i=Yi.shift())=="string"?bs.push(_i):Array.isArray(si)&&(_i.length===1||_i[1]===void 0&&_i[2]===void 0)?bs.push(_i[0]):bs.push([_i[0],_i[1],_i[2]]);return bs}function hl(si,_i){var Yi;if(typeof si=="string")Yi=_i(si)[0];else if(Array.isArray(si)){for(var bs,Pn,Lc=si.concat(),cc=[],ka=Lc.length;ka--;)typeof(bs=Lc.shift())=="string"?cc.push(_i(bs)[0]):Array.isArray(bs)&&typeof bs[0]=="string"&&(Pn=_i(bs[0],bs[1],bs[2]),cc.push([Pn[0],Pn[1],Pn[2]]));Yi=cc}return Yi}var Fi=!1,Tc=!0;if(typeof V=="string")Fi=!0;else if(Array.isArray(V)){var ma=V.concat();sr=[];for(var Pa,Xi=ma.length;Xi--;)(typeof(Pa=ma.shift())!="string"||Array.isArray(Pa)&&typeof Pa[0]!="string")&&(Tc=!1);Fi=Tc}if(Fi===!1)throw new Error('Type of text must be string or Array. "'+V+'" is not recognized.');typeof V=="string"&&(V=V.match(/[\r?\n]/)?V.split(/\r\n|\r|\n/g):[V]);var sA=lr/Si.internal.scaleFactor,Tl=sA*(Ko-1);switch(gt.baseline){case"bottom":et-=Tl;break;case"top":et+=sA-Tl;break;case"hanging":et+=sA-2*Tl;break;case"middle":et+=sA/2-Tl}if((yn=gt.maxWidth||0)>0&&(typeof V=="string"?V=Si.splitTextToSize(V,yn):Object.prototype.toString.call(V)==="[object Array]"&&(V=V.reduce(function(si,_i){return si.concat(Si.splitTextToSize(_i,yn))},[]))),Gt={text:V,x:ge,y:et,options:gt,mutex:{pdfEscape:Ci,activeFontKey:ye,fonts:at,activeFontSize:lr}},tn.publish("preProcessText",Gt),V=Gt.text,br=(gt=Gt.options).angle,is instanceof wr==0&&br&&typeof br=="number"){br*=Math.PI/180,gt.rotationDirection===0&&(br=-br),he===ce&&(br=-br);var ou=Math.cos(br),Pl=Math.sin(br);is=new wr(ou,Pl,-Pl,ou,0,0)}else br&&br instanceof wr&&(is=br);he!==ce||is||(is=Bn),(gn=gt.charSpace||Zi)!==void 0&&(xs+=Pe(Ue(gn))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(ji=gt.horizontalScale)!==void 0&&(xs+=Pe(100*ji)+` Tz
`),gt.lang;var $s=-1,La=gt.renderingMode!==void 0?gt.renderingMode:gt.stroke,dl=Si.internal.getCurrentPageInfo().pageContext;switch(La){case 0:case!1:case"fill":$s=0;break;case 1:case!0:case"stroke":$s=1;break;case 2:case"fillThenStroke":$s=2;break;case 3:case"invisible":$s=3;break;case 4:case"fillAndAddForClipping":$s=4;break;case 5:case"strokeAndAddPathForClipping":$s=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":$s=6;break;case 7:case"addToPathForClipping":$s=7}var LA=dl.usedRenderingMode!==void 0?dl.usedRenderingMode:-1;$s!==-1?xs+=$s+` Tr
`:LA!==-1&&(xs+=`0 Tr
`),$s!==-1&&(dl.usedRenderingMode=$s),Vr=gt.align||"left";var Bo,Ll=lr*Ko,oA=Si.internal.pageSize.getWidth(),aA=at[ye];gn=gt.charSpace||Zi,yn=gt.maxWidth||0,An=Object.assign({autoencode:!0,noBOM:!0},gt.flags);var Ml=[],Ws=function(si){return Si.getStringUnitWidth(si,{font:aA,charSpace:gn,fontSize:lr,doKerning:!1})*lr/fa};if(Object.prototype.toString.call(V)==="[object Array]"){var qo;sr=Ta(V),Vr!=="left"&&(Bo=sr.map(Ws));var Co,ga=0;if(Vr==="right"){ge-=Bo[0],V=[],Xi=sr.length;for(var fl=0;fl<Xi;fl++)fl===0?(Co=_s(ge),qo=Wi(et)):(Co=Ue(ga-Bo[fl]),qo=-Ll),V.push([sr[fl],Co,qo]),ga=Bo[fl]}else if(Vr==="center"){ge-=Bo[0]/2,V=[],Xi=sr.length;for(var Ma=0;Ma<Xi;Ma++)Ma===0?(Co=_s(ge),qo=Wi(et)):(Co=Ue((ga-Bo[Ma])/2),qo=-Ll),V.push([sr[Ma],Co,qo]),ga=Bo[Ma]}else if(Vr==="left"){V=[],Xi=sr.length;for(var oc=0;oc<Xi;oc++)V.push(sr[oc])}else if(Vr==="justify"&&aA.encoding==="Identity-H"){V=[],Xi=sr.length,yn=yn!==0?yn:oA;for(var kl=0,ss=0;ss<Xi;ss++)if(qo=ss===0?Wi(et):-Ll,Co=ss===0?_s(ge):kl,ss<Xi-1){var pl=Ue((yn-Bo[ss])/(sr[ss].split(" ").length-1)),ml=sr[ss].split(" ");V.push([ml[0]+" ",Co,qo]),kl=0;for(var ya=1;ya<ml.length;ya++){var Pc=(Ws(ml[ya-1]+" "+ml[ya])-Ws(ml[ya]))*fa+pl;ya==ml.length-1?V.push([ml[ya],Pc,0]):V.push([ml[ya]+" ",Pc,0]),kl-=Pc}}else V.push([sr[ss],Co,qo]);V.push(["",kl,0])}else{if(Vr!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(V=[],Xi=sr.length,yn=yn!==0?yn:oA,ss=0;ss<Xi;ss++){qo=ss===0?Wi(et):-Ll,Co=ss===0?_s(ge):0;var Ul=sr[ss].split(" ").length-1,ho=Ul>0?(yn-Bo[ss])/Ul:0;ss<Xi-1?Ml.push(Pe(Ue(ho))):Ml.push(0),V.push([sr[ss],Co,qo])}}}(typeof gt.R2L=="boolean"?gt.R2L:Or)===!0&&(V=hl(V,function(si,_i,Yi){return[si.split("").reverse().join(""),_i,Yi]})),Gt={text:V,x:ge,y:et,options:gt,mutex:{pdfEscape:Ci,activeFontKey:ye,fonts:at,activeFontSize:lr}},tn.publish("postProcessText",Gt),V=Gt.text,Mi=Gt.mutex.isHex||!1;var ac=at[ye].encoding;ac!=="WinAnsiEncoding"&&ac!=="StandardEncoding"||(V=hl(V,function(si,_i,Yi){return[pa(si),_i,Yi]})),sr=Ta(V),V=[];for(var gl,Dl,Rl,Nl=Array.isArray(sr[0])?1:0,$o="",lc=function(si,_i,Yi){var bs="";return Yi instanceof wr?(Yi=typeof gt.angle=="number"?Tn(Yi,new wr(1,0,0,1,si,_i)):Tn(new wr(1,0,0,1,si,_i),Yi),he===ce&&(Yi=Tn(new wr(1,0,0,-1,0,0),Yi)),bs=Yi.join(" ")+` Tm
`):bs=Pe(si)+" "+Pe(_i)+` Td
`,bs},os=0;os<sr.length;os++){switch($o="",Nl){case 1:Rl=(Mi?"<":"(")+sr[os][0]+(Mi?">":")"),gl=parseFloat(sr[os][1]),Dl=parseFloat(sr[os][2]);break;case 0:Rl=(Mi?"<":"(")+sr[os]+(Mi?">":")"),gl=_s(ge),Dl=Wi(et)}Ml!==void 0&&Ml[os]!==void 0&&($o=Ml[os]+` Tw
`),os===0?V.push($o+lc(gl,Dl,is)+Rl):Nl===0?V.push($o+Rl):Nl===1&&V.push($o+lc(gl,Dl,is)+Rl)}V=Nl===0?V.join(` Tj
T* `):V.join(` Tj
`),V+=` Tj
`;var Eo=`BT
/`;return Eo+=ye+" "+lr+` Tf
`,Eo+=Pe(lr*Ko)+` TL
`,Eo+=ti+`
`,Eo+=xs,Eo+=V,He(Eo+="ET"),O[ye]=!0,Si};var rc=P.__private__.clip=P.clip=function(V){return He(V==="evenodd"?"W*":"W"),this};P.clipEvenOdd=function(){return rc("evenodd")},P.__private__.discardPath=P.discardPath=function(){return He("n"),this};var Ca=P.__private__.isValidStyle=function(V){var ge=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(V)!==-1&&(ge=!0),ge};P.__private__.setDefaultPathOperation=P.setDefaultPathOperation=function(V){return Ca(V)&&(E=V),this};var TA=P.__private__.getStyle=P.getStyle=function(V){var ge=E;switch(V){case"D":case"S":ge="S";break;case"F":ge="f";break;case"FD":case"DF":ge="B";break;case"f":case"f*":case"B":case"B*":ge=V}return ge},Kn=P.close=function(){return He("h"),this};P.stroke=function(){return He("S"),this},P.fill=function(V){return Fl("f",V),this},P.fillEvenOdd=function(V){return Fl("f*",V),this},P.fillStroke=function(V){return Fl("B",V),this},P.fillStrokeEvenOdd=function(V){return Fl("B*",V),this};var Fl=function(V,ge){rs(ge)==="object"?PA(ge,V):He(V)},nc=function(V){V===null||he===ce&&V===void 0||(V=TA(V),He(V))};function Il(V,ge,et,gt,It){var Gt=new ap(ge||this.boundingBox,et||this.xStep,gt||this.yStep,this.gState,It||this.matrix);Gt.stream=this.stream;var sr=V+"$$"+this.cloneIndex+++"$$";return xn(sr,Gt),Gt}var PA=function(V,ge){var et=cr[V.key],gt=Ft[et];if(gt instanceof Xd)He("q"),He(Ic(ge)),gt.gState&&P.setGState(gt.gState),He(V.matrix.toString()+" cm"),He("/"+et+" sh"),He("Q");else if(gt instanceof ap){var It=new wr(1,0,0,-1,0,ao());V.matrix&&(It=It.multiply(V.matrix||Bn),et=Il.call(gt,V.key,V.boundingBox,V.xStep,V.yStep,It).id),He("q"),He("/Pattern cs"),He("/"+et+" scn"),gt.gState&&P.setGState(gt.gState),He(ge),He("Q")}},Ic=function(V){switch(V){case"f":case"F":case"n":return"W n";case"f*":return"W* n";case"B":case"S":return"W S";case"B*":return"W* S"}},ca=P.moveTo=function(V,ge){return He(Pe(Ue(V))+" "+Pe(Fe(ge))+" m"),this},Al=P.lineTo=function(V,ge){return He(Pe(Ue(V))+" "+Pe(Fe(ge))+" l"),this},an=P.curveTo=function(V,ge,et,gt,It,Gt){return He([Pe(Ue(V)),Pe(Fe(ge)),Pe(Ue(et)),Pe(Fe(gt)),Pe(Ue(It)),Pe(Fe(Gt)),"c"].join(" ")),this};P.__private__.line=P.line=function(V,ge,et,gt,It){if(isNaN(V)||isNaN(ge)||isNaN(et)||isNaN(gt)||!Ca(It))throw new Error("Invalid arguments passed to jsPDF.line");return he===ie?this.lines([[et-V,gt-ge]],V,ge,[1,1],It||"S"):this.lines([[et-V,gt-ge]],V,ge,[1,1]).stroke()},P.__private__.lines=P.lines=function(V,ge,et,gt,It,Gt){var sr,br,Vr,gn,yn,An,ji,is,Si,Ds,Mi,xs;if(typeof V=="number"&&(xs=et,et=ge,ge=V,V=xs),gt=gt||[1,1],Gt=Gt||!1,isNaN(ge)||isNaN(et)||!Array.isArray(V)||!Array.isArray(gt)||!Ca(It)||typeof Gt!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(ca(ge,et),sr=gt[0],br=gt[1],gn=V.length,Ds=ge,Mi=et,Vr=0;Vr<gn;Vr++)(yn=V[Vr]).length===2?(Ds=yn[0]*sr+Ds,Mi=yn[1]*br+Mi,Al(Ds,Mi)):(An=yn[0]*sr+Ds,ji=yn[1]*br+Mi,is=yn[2]*sr+Ds,Si=yn[3]*br+Mi,Ds=yn[4]*sr+Ds,Mi=yn[5]*br+Mi,an(An,ji,is,Si,Ds,Mi));return Gt&&Kn(),nc(It),this},P.path=function(V){for(var ge=0;ge<V.length;ge++){var et=V[ge],gt=et.c;switch(et.op){case"m":ca(gt[0],gt[1]);break;case"l":Al(gt[0],gt[1]);break;case"c":an.apply(this,gt);break;case"h":Kn()}}return this},P.__private__.rect=P.rect=function(V,ge,et,gt,It){if(isNaN(V)||isNaN(ge)||isNaN(et)||isNaN(gt)||!Ca(It))throw new Error("Invalid arguments passed to jsPDF.rect");return he===ie&&(gt=-gt),He([Pe(Ue(V)),Pe(Fe(ge)),Pe(Ue(et)),Pe(Ue(gt)),"re"].join(" ")),nc(It),this},P.__private__.triangle=P.triangle=function(V,ge,et,gt,It,Gt,sr){if(isNaN(V)||isNaN(ge)||isNaN(et)||isNaN(gt)||isNaN(It)||isNaN(Gt)||!Ca(sr))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[et-V,gt-ge],[It-et,Gt-gt],[V-It,ge-Gt]],V,ge,[1,1],sr,!0),this},P.__private__.roundedRect=P.roundedRect=function(V,ge,et,gt,It,Gt,sr){if(isNaN(V)||isNaN(ge)||isNaN(et)||isNaN(gt)||isNaN(It)||isNaN(Gt)||!Ca(sr))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var br=4/3*(Math.SQRT2-1);return It=Math.min(It,.5*et),Gt=Math.min(Gt,.5*gt),this.lines([[et-2*It,0],[It*br,0,It,Gt-Gt*br,It,Gt],[0,gt-2*Gt],[0,Gt*br,-It*br,Gt,-It,Gt],[2*It-et,0],[-It*br,0,-It,-Gt*br,-It,-Gt],[0,2*Gt-gt],[0,-Gt*br,It*br,-Gt,It,-Gt]],V+It,ge,[1,1],sr,!0),this},P.__private__.ellipse=P.ellipse=function(V,ge,et,gt,It){if(isNaN(V)||isNaN(ge)||isNaN(et)||isNaN(gt)||!Ca(It))throw new Error("Invalid arguments passed to jsPDF.ellipse");var Gt=4/3*(Math.SQRT2-1)*et,sr=4/3*(Math.SQRT2-1)*gt;return ca(V+et,ge),an(V+et,ge-sr,V+Gt,ge-gt,V,ge-gt),an(V-Gt,ge-gt,V-et,ge-sr,V-et,ge),an(V-et,ge+sr,V-Gt,ge+gt,V,ge+gt),an(V+Gt,ge+gt,V+et,ge+sr,V+et,ge),nc(It),this},P.__private__.circle=P.circle=function(V,ge,et,gt){if(isNaN(V)||isNaN(ge)||isNaN(et)||!Ca(gt))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(V,ge,et,et,gt)},P.setFont=function(V,ge,et){return et&&(ge=Me(ge,et)),ye=Ro(V,ge,{disableWarning:!1}),this};var Ea=P.__private__.getFont=P.getFont=function(){return at[Ro.apply(P,arguments)]};P.__private__.getFontList=P.getFontList=function(){var V,ge,et={};for(V in bt)if(bt.hasOwnProperty(V))for(ge in et[V]=[],bt[V])bt[V].hasOwnProperty(ge)&&et[V].push(ge);return et},P.addFont=function(V,ge,et,gt,It){var Gt=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&Gt.indexOf(arguments[3])!==-1?It=arguments[3]:arguments[3]&&Gt.indexOf(arguments[3])==-1&&(et=Me(et,gt)),Sl.call(this,V,ge,et,It=It||"Identity-H")};var zo,Ho=e.lineWidth||.200025,vs=P.__private__.getLineWidth=P.getLineWidth=function(){return Ho},qr=P.__private__.setLineWidth=P.setLineWidth=function(V){return Ho=V,He(Pe(Ue(V))+" w"),this};P.__private__.setLineDash=fn.API.setLineDash=fn.API.setLineDashPattern=function(V,ge){if(V=V||[],ge=ge||0,isNaN(ge)||!Array.isArray(V))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return V=V.map(function(et){return Pe(Ue(et))}).join(" "),ge=Pe(Ue(ge)),He("["+V+"] "+ge+" d"),this};var Jn=P.__private__.getLineHeight=P.getLineHeight=function(){return lr*zo};P.__private__.getLineHeight=P.getLineHeight=function(){return lr*zo};var cn=P.__private__.setLineHeightFactor=P.setLineHeightFactor=function(V){return typeof(V=V||1.15)=="number"&&(zo=V),this},ii=P.__private__.getLineHeightFactor=P.getLineHeightFactor=function(){return zo};cn(e.lineHeight);var _s=P.__private__.getHorizontalCoordinate=function(V){return Ue(V)},Wi=P.__private__.getVerticalCoordinate=function(V){return he===ce?V:mt[Se].mediaBox.topRightY-mt[Se].mediaBox.bottomLeftY-Ue(V)},uo=P.__private__.getHorizontalCoordinateString=P.getHorizontalCoordinateString=function(V){return Pe(_s(V))},ws=P.__private__.getVerticalCoordinateString=P.getVerticalCoordinateString=function(V){return Pe(Wi(V))},Sa=e.strokeColor||"0 G";P.__private__.getStrokeColor=P.getDrawColor=function(){return pr(Sa)},P.__private__.setStrokeColor=P.setDrawColor=function(V,ge,et,gt){return Sa=nn({ch1:V,ch2:ge,ch3:et,ch4:gt,pdfColorType:"draw",precision:2}),He(Sa),this};var Fa=e.fillColor||"0 g";P.__private__.getFillColor=P.getFillColor=function(){return pr(Fa)},P.__private__.setFillColor=P.setFillColor=function(V,ge,et,gt){return Fa=nn({ch1:V,ch2:ge,ch3:et,ch4:gt,pdfColorType:"fill",precision:2}),He(Fa),this};var ti=e.textColor||"0 g",Aa=P.__private__.getTextColor=P.getTextColor=function(){return pr(ti)};P.__private__.setTextColor=P.setTextColor=function(V,ge,et,gt){return ti=nn({ch1:V,ch2:ge,ch3:et,ch4:gt,pdfColorType:"text",precision:3}),this};var Zi=e.charSpace,ic=P.__private__.getCharSpace=P.getCharSpace=function(){return parseFloat(Zi||0)};P.__private__.setCharSpace=P.setCharSpace=function(V){if(isNaN(V))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return Zi=V,this};var qs=0;P.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},P.__private__.setLineCap=P.setLineCap=function(V){var ge=P.CapJoinStyles[V];if(ge===void 0)throw new Error("Line cap style of '"+V+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return qs=ge,He(ge+" J"),this};var ul=0;P.__private__.setLineJoin=P.setLineJoin=function(V){var ge=P.CapJoinStyles[V];if(ge===void 0)throw new Error("Line join style of '"+V+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return ul=ge,He(ge+" j"),this},P.__private__.setLineMiterLimit=P.__private__.setMiterLimit=P.setLineMiterLimit=P.setMiterLimit=function(V){if(V=V||0,isNaN(V))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return He(Pe(Ue(V))+" M"),this},P.GState=Ay,P.setGState=function(V){(V=typeof V=="string"?Jt[fr[V]]:jo(null,V)).equals(rn)||(He("/"+V.id+" gs"),rn=V)};var jo=function(V,ge){if(!V||!fr[V]){var et=!1;for(var gt in Jt)if(Jt.hasOwnProperty(gt)&&Jt[gt].equals(ge)){et=!0;break}if(et)ge=Jt[gt];else{var It="GS"+(Object.keys(Jt).length+1).toString(10);Jt[It]=ge,ge.id=It}return V&&(fr[V]=ge.id),tn.publish("addGState",ge),ge}};P.addGState=function(V,ge){return jo(V,ge),this},P.saveGraphicsState=function(){return He("q"),Ht.push({key:ye,size:lr,color:ti}),this},P.restoreGraphicsState=function(){He("Q");var V=Ht.pop();return ye=V.key,lr=V.size,ti=V.color,rn=null,this},P.setCurrentTransformationMatrix=function(V){return He(V.toString()+" cm"),this},P.comment=function(V){return He("#"+V),this};var ua=function(V,ge){var et=V||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return et},set:function(Gt){isNaN(Gt)||(et=parseFloat(Gt))}});var gt=ge||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return gt},set:function(Gt){isNaN(Gt)||(gt=parseFloat(Gt))}});var It="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return It},set:function(Gt){It=Gt.toString()}}),this},sc=function(V,ge,et,gt){ua.call(this,V,ge),this.type="rect";var It=et||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return It},set:function(sr){isNaN(sr)||(It=parseFloat(sr))}});var Gt=gt||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return Gt},set:function(sr){isNaN(sr)||(Gt=parseFloat(sr))}}),this},ha=function(){this.page=Tr,this.currentPage=Se,this.pages=Wt.slice(0),this.pagesContext=mt.slice(0),this.x=We,this.y=Ct,this.matrix=yt,this.width=En(Se),this.height=Ia(Se),this.outputDestination=hr,this.id="",this.objectNumber=-1};ha.prototype.restore=function(){Tr=this.page,Se=this.currentPage,mt=this.pagesContext,Wt=this.pages,We=this.x,Ct=this.y,yt=this.matrix,mn(Se,this.width),bn(Se,this.height),hr=this.outputDestination};var Nn=function(V,ge,et,gt,It){Dn.push(new ha),Tr=Se=0,Wt=[],We=V,Ct=ge,yt=It,jn([et,gt])};for(var Vo in P.beginFormObject=function(V,ge,et,gt,It){return Nn(V,ge,et,gt,It),this},P.endFormObject=function(V){return(function(ge){if(Kr[ge])Dn.pop().restore();else{var et=new ha,gt="Xo"+(Object.keys(mr).length+1).toString(10);et.id=gt,Kr[ge]=gt,mr[gt]=et,tn.publish("addFormObject",et),Dn.pop().restore()}})(V),this},P.doFormObject=function(V,ge){var et=mr[Kr[V]];return He("q"),He(ge.toString()+" cm"),He("/"+et.id+" Do"),He("Q"),this},P.getFormObject=function(V){var ge=mr[Kr[V]];return{x:ge.x,y:ge.y,width:ge.width,height:ge.height,matrix:ge.matrix}},P.save=function(V,ge){return V=V||"generated.pdf",(ge=ge||{}).returnPromise=ge.returnPromise||!1,ge.returnPromise===!1?(Wd(Qo(No()),V),typeof Wd.unload=="function"&&kn.setTimeout&&setTimeout(Wd.unload,911),this):new Promise(function(et,gt){try{var It=Wd(Qo(No()),V);typeof Wd.unload=="function"&&kn.setTimeout&&setTimeout(Wd.unload,911),et(It)}catch(Gt){gt(Gt.message)}})},fn.API)fn.API.hasOwnProperty(Vo)&&(Vo==="events"&&fn.API.events.length?(function(V,ge){var et,gt,It;for(It=ge.length-1;It!==-1;It--)et=ge[It][0],gt=ge[It][1],V.subscribe.apply(V,[et].concat(typeof gt=="function"?[gt]:gt))})(tn,fn.API.events):P[Vo]=fn.API[Vo]);function En(V){return mt[V].mediaBox.topRightX-mt[V].mediaBox.bottomLeftX}function mn(V,ge){mt[V].mediaBox.topRightX=ge+mt[V].mediaBox.bottomLeftX}function Ia(V){return mt[V].mediaBox.topRightY-mt[V].mediaBox.bottomLeftY}function bn(V,ge){mt[V].mediaBox.topRightY=ge+mt[V].mediaBox.bottomLeftY}var Go=P.getPageWidth=function(V){return En(V=V||Se)/qe},Ei=P.setPageWidth=function(V,ge){mn(V,ge*qe)},ao=P.getPageHeight=function(V){return Ia(V=V||Se)/qe},da=P.setPageHeight=function(V,ge){bn(V,ge*qe)};return P.internal={pdfEscape:Ci,getStyle:TA,getFont:Ea,getFontSize:Sr,getCharSpace:ic,getTextColor:Aa,getLineHeight:Jn,getLineHeightFactor:ii,getLineWidth:vs,write:vr,getHorizontalCoordinate:_s,getVerticalCoordinate:Wi,getCoordinateString:uo,getVerticalCoordinateString:ws,collections:{},newObject:ai,newAdditionalObject:$i,newObjectDeferred:Yt,newObjectDeferredBegin:Zn,getFilters:un,putStream:Ri,events:tn,scaleFactor:qe,pageSize:{getWidth:function(){return Go(Se)},setWidth:function(V){Ei(Se,V)},getHeight:function(){return ao(Se)},setHeight:function(V){da(Se,V)}},encryptionOptions:I,encryption:ys,getEncryptor:function(V){return I!==null?ys.encryptor(V,0):function(ge){return ge}},output:Fc,getNumberOfPages:Us,get pages(){return Wt},out:He,f2:pe,f3:_e,getPageInfo:Oo,getPageInfoByObjId:nA,getCurrentPageInfo:iA,getPDFVersion:z,Point:ua,Rectangle:sc,Matrix:wr,hasHotfix:la},Object.defineProperty(P.internal.pageSize,"width",{get:function(){return Go(Se)},set:function(V){Ei(Se,V)},enumerable:!0,configurable:!0}),Object.defineProperty(P.internal.pageSize,"height",{get:function(){return ao(Se)},set:function(V){da(Se,V)},enumerable:!0,configurable:!0}),(function(V){for(var ge=0,et=$r.length;ge<et;ge++){var gt=Sl.call(this,V[ge][0],V[ge][1],V[ge][2],$r[ge][3],!0);D===!1&&(O[gt]=!0);var It=V[ge][0].split("-");tc({id:gt,fontName:It[0],fontStyle:It[1]||""})}tn.publish("addFonts",{fonts:at,dictionary:bt})}).call(P,$r),ye="F1",rA(h,i),tn.publish("initialized"),P}rp.prototype.lsbFirstWord=function(e){return String.fromCharCode(255&e,e>>8&255,e>>16&255,e>>24&255)},rp.prototype.toHexString=function(e){return e.split("").map(function(n){return("0"+(255&n.charCodeAt(0)).toString(16)).slice(-2)}).join("")},rp.prototype.hexToBytes=function(e){for(var n=[],i=0;i<e.length;i+=2)n.push(String.fromCharCode(parseInt(e.substr(i,2),16)));return n.join("")},rp.prototype.processOwnerPassword=function(e,n){return hw(uw(n).substr(0,5),e)},rp.prototype.encryptor=function(e,n){var i=uw(this.encryptionKey+String.fromCharCode(255&e,e>>8&255,e>>16&255,255&n,n>>8&255)).substr(0,10);return function(l){return hw(i,l)}},Ay.prototype.equals=function(e){var n,i="id,objectNumber,equals";if(!e||rs(e)!==rs(this))return!1;var l=0;for(n in this)if(!(i.indexOf(n)>=0)){if(this.hasOwnProperty(n)&&!e.hasOwnProperty(n)||this[n]!==e[n])return!1;l++}for(n in e)e.hasOwnProperty(n)&&i.indexOf(n)<0&&l--;return l===0},fn.API={events:[]},fn.version="3.0.4";var bo=fn.API,Ax=1,Af=function(e){return e.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Wf=function(e){return e.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},Hn=function(e){return e.toFixed(2)},sd=function(e){return e.toFixed(5)};bo.__acroform__={};var tA=function(e,n){e.prototype=Object.create(n.prototype),e.prototype.constructor=e},NC=function(e){return e*Ax},Yu=function(e){var n=new w4,i=on.internal.getHeight(e)||0,l=on.internal.getWidth(e)||0;return n.BBox=[0,0,Number(Hn(l)),Number(Hn(i))],n},dj=bo.__acroform__.setBit=function(e,n){if(e=e||0,n=n||0,isNaN(e)||isNaN(n))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return e|1<<n},fj=bo.__acroform__.clearBit=function(e,n){if(e=e||0,n=n||0,isNaN(e)||isNaN(n))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return e&~(1<<n)},pj=bo.__acroform__.getBit=function(e,n){if(isNaN(e)||isNaN(n))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return e&1<<n?1:0},ko=bo.__acroform__.getBitForPdf=function(e,n){if(isNaN(e)||isNaN(n))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return pj(e,n-1)},Uo=bo.__acroform__.setBitForPdf=function(e,n){if(isNaN(e)||isNaN(n))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return dj(e,n-1)},Do=bo.__acroform__.clearBitForPdf=function(e,n){if(isNaN(e)||isNaN(n))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return fj(e,n-1)},mj=bo.__acroform__.calculateCoordinates=function(e,n){var i=n.internal.getHorizontalCoordinate,l=n.internal.getVerticalCoordinate,h=e[0],d=e[1],m=e[2],o=e[3],x={};return x.lowerLeft_X=i(h)||0,x.lowerLeft_Y=l(d+o)||0,x.upperRight_X=i(h+m)||0,x.upperRight_Y=l(d)||0,[Number(Hn(x.lowerLeft_X)),Number(Hn(x.lowerLeft_Y)),Number(Hn(x.upperRight_X)),Number(Hn(x.upperRight_Y))]},gj=function(e){if(e.appearanceStreamContent)return e.appearanceStreamContent;if(e.V||e.DV){var n=[],i=e._V||e.DV,l=dw(e,i),h=e.scope.internal.getFont(e.fontName,e.fontStyle).id;n.push("/Tx BMC"),n.push("q"),n.push("BT"),n.push(e.scope.__private__.encodeColorString(e.color)),n.push("/"+h+" "+Hn(l.fontSize)+" Tf"),n.push("1 0 0 1 0 0 Tm"),n.push(l.text),n.push("ET"),n.push("Q"),n.push("EMC");var d=Yu(e);return d.scope=e.scope,d.stream=n.join(`
`),d}},dw=function(e,n){var i=e.fontSize===0?e.maxFontSize:e.fontSize,l={text:"",fontSize:""},h=(n=(n=n.substr(0,1)=="("?n.substr(1):n).substr(n.length-1)==")"?n.substr(0,n.length-1):n).split(" ");h=e.multiline?h.map(function(pe){return pe.split(`
`)}):h.map(function(pe){return[pe]});var d=i,m=on.internal.getHeight(e)||0;m=m<0?-m:m;var o=on.internal.getWidth(e)||0;o=o<0?-o:o;var x=function(pe,_e,Ue){if(pe+1<h.length){var Fe=_e+" "+h[pe+1][0];return B0(Fe,e,Ue).width<=o-4}return!1};d++;e:for(;d>0;){n="",d--;var E,I,D=B0("3",e,d).height,O=e.multiline?m-d:(m-D)/2,P=O+=2,W=0,z=0,H=0;if(d<=0){n=`(...) Tj
`,n+="% Width of Text: "+B0(n,e,d=12).width+", FieldWidth:"+o+`
`;break}for(var Z="",ie=0,ce=0;ce<h.length;ce++)if(h.hasOwnProperty(ce)){var he=!1;if(h[ce].length!==1&&H!==h[ce].length-1){if((D+2)*(ie+2)+2>m)continue e;Z+=h[ce][H],he=!0,z=ce,ce--}else{Z=(Z+=h[ce][H]+" ").substr(Z.length-1)==" "?Z.substr(0,Z.length-1):Z;var Ie=parseInt(ce),Ve=x(Ie,Z,d),Me=ce>=h.length-1;if(Ve&&!Me){Z+=" ",H=0;continue}if(Ve||Me){if(Me)z=Ie;else if(e.multiline&&(D+2)*(ie+2)+2>m)continue e}else{if(!e.multiline||(D+2)*(ie+2)+2>m)continue e;z=Ie}}for(var Pe="",xe=W;xe<=z;xe++){var nt=h[xe];if(e.multiline){if(xe===z){Pe+=nt[H]+" ",H=(H+1)%nt.length;continue}if(xe===W){Pe+=nt[nt.length-1]+" ";continue}}Pe+=nt[0]+" "}switch(Pe=Pe.substr(Pe.length-1)==" "?Pe.substr(0,Pe.length-1):Pe,I=B0(Pe,e,d).width,e.textAlign){case"right":E=o-I-2;break;case"center":E=(o-I)/2;break;default:E=2}n+=Hn(E)+" "+Hn(P)+` Td
`,n+="("+Af(Pe)+`) Tj
`,n+=-Hn(E)+` 0 Td
`,P=-(d+2),I=0,W=he?z:z+1,ie++,Z=""}break}return l.text=n,l.fontSize=d,l},B0=function(e,n,i){var l=n.scope.internal.getFont(n.fontName,n.fontStyle),h=n.scope.getStringUnitWidth(e,{font:l,fontSize:parseFloat(i),charSpace:0})*parseFloat(i);return{height:n.scope.getStringUnitWidth("3",{font:l,fontSize:parseFloat(i),charSpace:0})*parseFloat(i)*1.5,width:h}},yj={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},vj=function(e,n){var i={type:"reference",object:e};n.internal.getPageInfo(e.page).pageContext.annotations.find(function(l){return l.type===i.type&&l.object===i.object})===void 0&&n.internal.getPageInfo(e.page).pageContext.annotations.push(i)},_j=function(e,n){if(n.scope=e,e.internal!==void 0&&(e.internal.acroformPlugin===void 0||e.internal.acroformPlugin.isInitialized===!1)){if(Mu.FieldNum=0,e.internal.acroformPlugin=JSON.parse(JSON.stringify(yj)),e.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");Ax=e.internal.scaleFactor,e.internal.acroformPlugin.acroFormDictionaryRoot=new x4,e.internal.acroformPlugin.acroFormDictionaryRoot.scope=e,e.internal.acroformPlugin.acroFormDictionaryRoot._eventID=e.internal.events.subscribe("postPutResources",function(){(function(i){i.internal.events.unsubscribe(i.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete i.internal.acroformPlugin.acroFormDictionaryRoot._eventID,i.internal.acroformPlugin.printedOut=!0})(e)}),e.internal.events.subscribe("buildDocument",function(){(function(i){i.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var l=i.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var h in l)if(l.hasOwnProperty(h)){var d=l[h];d.objId=void 0,d.hasAnnotation&&vj(d,i)}})(e)}),e.internal.events.subscribe("putCatalog",function(){(function(i){if(i.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");i.internal.write("/AcroForm "+i.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(e)}),e.internal.events.subscribe("postPutPages",function(i){(function(l,h){var d=!l;for(var m in l||(h.internal.newObjectDeferredBegin(h.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),h.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),l=l||h.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(l.hasOwnProperty(m)){var o=l[m],x=[],E=o.Rect;if(o.Rect&&(o.Rect=mj(o.Rect,h)),h.internal.newObjectDeferredBegin(o.objId,!0),o.DA=on.createDefaultAppearanceStream(o),rs(o)==="object"&&typeof o.getKeyValueListForStream=="function"&&(x=o.getKeyValueListForStream()),o.Rect=E,o.hasAppearanceStream&&!o.appearanceStreamContent){var I=gj(o);x.push({key:"AP",value:"<</N "+I+">>"}),h.internal.acroformPlugin.xForms.push(I)}if(o.appearanceStreamContent){var D="";for(var O in o.appearanceStreamContent)if(o.appearanceStreamContent.hasOwnProperty(O)){var P=o.appearanceStreamContent[O];if(D+="/"+O+" ",D+="<<",Object.keys(P).length>=1||Array.isArray(P)){for(var m in P)if(P.hasOwnProperty(m)){var W=P[m];typeof W=="function"&&(W=W.call(h,o)),D+="/"+m+" "+W+" ",h.internal.acroformPlugin.xForms.indexOf(W)>=0||h.internal.acroformPlugin.xForms.push(W)}}else typeof(W=P)=="function"&&(W=W.call(h,o)),D+="/"+m+" "+W,h.internal.acroformPlugin.xForms.indexOf(W)>=0||h.internal.acroformPlugin.xForms.push(W);D+=">>"}x.push({key:"AP",value:`<<
`+D+">>"})}h.internal.putStream({additionalKeyValues:x,objectId:o.objId}),h.internal.out("endobj")}d&&(function(z,H){for(var Z in z)if(z.hasOwnProperty(Z)){var ie=Z,ce=z[Z];H.internal.newObjectDeferredBegin(ce.objId,!0),rs(ce)==="object"&&typeof ce.putStream=="function"&&ce.putStream(),delete z[ie]}})(h.internal.acroformPlugin.xForms,h)})(i,e)}),e.internal.acroformPlugin.isInitialized=!0}},_4=bo.__acroform__.arrayToPdfArray=function(e,n,i){var l=function(m){return m};if(Array.isArray(e)){for(var h="[",d=0;d<e.length;d++)switch(d!==0&&(h+=" "),rs(e[d])){case"boolean":case"number":case"object":h+=e[d].toString();break;case"string":e[d].substr(0,1)!=="/"?(n!==void 0&&i&&(l=i.internal.getEncryptor(n)),h+="("+Af(l(e[d].toString()))+")"):h+=e[d].toString()}return h+"]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},W1=function(e,n,i){var l=function(h){return h};return n!==void 0&&i&&(l=i.internal.getEncryptor(n)),(e=e||"").toString(),"("+Af(l(e))+")"},th=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(e){this._objId=e}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};th.prototype.toString=function(){return this.objId+" 0 R"},th.prototype.putStream=function(){var e=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:e,objectId:this.objId}),this.scope.internal.out("endobj")},th.prototype.getKeyValueListForStream=function(){var e=[],n=Object.getOwnPropertyNames(this).filter(function(d){return d!="content"&&d!="appearanceStreamContent"&&d!="scope"&&d!="objId"&&d.substring(0,1)!="_"});for(var i in n)if(Object.getOwnPropertyDescriptor(this,n[i]).configurable===!1){var l=n[i],h=this[l];h&&(Array.isArray(h)?e.push({key:l,value:_4(h,this.objId,this.scope)}):h instanceof th?(h.scope=this.scope,e.push({key:l,value:h.objId+" 0 R"})):typeof h!="function"&&e.push({key:l,value:h}))}return e};var w4=function(){th.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var e,n=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return n},set:function(i){n=i}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(i){e=i.trim()},get:function(){return e||null}})};tA(w4,th);var x4=function(){th.call(this);var e,n=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return n.length>0?n:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return n}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(e){var i=function(l){return l};return this.scope&&(i=this.scope.internal.getEncryptor(this.objId)),"("+Af(i(e))+")"}},set:function(i){e=i}})};tA(x4,th);var Mu=function e(){th.call(this);var n=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return n},set:function(Z){if(isNaN(Z))throw new Error('Invalid value "'+Z+'" for attribute F supplied.');n=Z}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!ko(n,3)},set:function(Z){Z?this.F=Uo(n,3):this.F=Do(n,3)}});var i=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return i},set:function(Z){if(isNaN(Z))throw new Error('Invalid value "'+Z+'" for attribute Ff supplied.');i=Z}});var l=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(l.length!==0)return l},set:function(Z){l=Z!==void 0?Z:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!l||isNaN(l[0])?0:l[0]},set:function(Z){l[0]=Z}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!l||isNaN(l[1])?0:l[1]},set:function(Z){l[1]=Z}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!l||isNaN(l[2])?0:l[2]},set:function(Z){l[2]=Z}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!l||isNaN(l[3])?0:l[3]},set:function(Z){l[3]=Z}});var h="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return h},set:function(Z){switch(Z){case"/Btn":case"/Tx":case"/Ch":case"/Sig":h=Z;break;default:throw new Error('Invalid value "'+Z+'" for attribute FT supplied.')}}});var d=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!d||d.length<1){if(this instanceof uy)return;d="FieldObject"+e.FieldNum++}var Z=function(ie){return ie};return this.scope&&(Z=this.scope.internal.getEncryptor(this.objId)),"("+Af(Z(d))+")"},set:function(Z){d=Z.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return d},set:function(Z){d=Z}});var m="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return m},set:function(Z){m=Z}});var o="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return o},set:function(Z){o=Z}});var x=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return x},set:function(Z){x=Z}});var E=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return E===void 0?50/Ax:E},set:function(Z){E=Z}});var I="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return I},set:function(Z){I=Z}});var D="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!D||this instanceof uy||this instanceof tf))return W1(D,this.objId,this.scope)},set:function(Z){Z=Z.toString(),D=Z}});var O=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(O)return this instanceof rl==0?W1(O,this.objId,this.scope):O},set:function(Z){Z=Z.toString(),O=this instanceof rl==0?Z.substr(0,1)==="("?Wf(Z.substr(1,Z.length-2)):Wf(Z):Z}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof rl==1?Wf(O.substr(1,O.length-1)):O},set:function(Z){Z=Z.toString(),O=this instanceof rl==1?"/"+Z:Z}});var P=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(P)return P},set:function(Z){this.V=Z}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(P)return this instanceof rl==0?W1(P,this.objId,this.scope):P},set:function(Z){Z=Z.toString(),P=this instanceof rl==0?Z.substr(0,1)==="("?Wf(Z.substr(1,Z.length-2)):Wf(Z):Z}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof rl==1?Wf(P.substr(1,P.length-1)):P},set:function(Z){Z=Z.toString(),P=this instanceof rl==1?"/"+Z:Z}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var W,z=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return z},set:function(Z){Z=!!Z,z=Z}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(W)return W},set:function(Z){W=Z}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!ko(this.Ff,1)},set:function(Z){Z?this.Ff=Uo(this.Ff,1):this.Ff=Do(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!ko(this.Ff,2)},set:function(Z){Z?this.Ff=Uo(this.Ff,2):this.Ff=Do(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!ko(this.Ff,3)},set:function(Z){Z?this.Ff=Uo(this.Ff,3):this.Ff=Do(this.Ff,3)}});var H=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(H!==null)return H},set:function(Z){if([0,1,2].indexOf(Z)===-1)throw new Error('Invalid value "'+Z+'" for attribute Q supplied.');H=Z}}),Object.defineProperty(this,"textAlign",{get:function(){var Z;switch(H){case 0:default:Z="left";break;case 1:Z="center";break;case 2:Z="right"}return Z},configurable:!0,enumerable:!0,set:function(Z){switch(Z){case"right":case 2:H=2;break;case"center":case 1:H=1;break;default:H=0}}})};tA(Mu,th);var hp=function(){Mu.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var e=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return e},set:function(i){e=i}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return e},set:function(i){e=i}});var n=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return _4(n,this.objId,this.scope)},set:function(i){var l,h;h=[],typeof(l=i)=="string"&&(h=(function(d,m,o){o||(o=1);for(var x,E=[];x=m.exec(d);)E.push(x[o]);return E})(l,/\((.*?)\)/g)),n=h}}),this.getOptions=function(){return n},this.setOptions=function(i){n=i,this.sort&&n.sort()},this.addOption=function(i){i=(i=i||"").toString(),n.push(i),this.sort&&n.sort()},this.removeOption=function(i,l){for(l=l||!1,i=(i=i||"").toString();n.indexOf(i)!==-1&&(n.splice(n.indexOf(i),1),l!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!ko(this.Ff,18)},set:function(i){i?this.Ff=Uo(this.Ff,18):this.Ff=Do(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!ko(this.Ff,19)},set:function(i){this.combo===!0&&(i?this.Ff=Uo(this.Ff,19):this.Ff=Do(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!ko(this.Ff,20)},set:function(i){i?(this.Ff=Uo(this.Ff,20),n.sort()):this.Ff=Do(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!ko(this.Ff,22)},set:function(i){i?this.Ff=Uo(this.Ff,22):this.Ff=Do(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!ko(this.Ff,23)},set:function(i){i?this.Ff=Uo(this.Ff,23):this.Ff=Do(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!ko(this.Ff,27)},set:function(i){i?this.Ff=Uo(this.Ff,27):this.Ff=Do(this.Ff,27)}}),this.hasAppearanceStream=!1};tA(hp,Mu);var dp=function(){hp.call(this),this.fontName="helvetica",this.combo=!1};tA(dp,hp);var fp=function(){dp.call(this),this.combo=!0};tA(fp,dp);var z0=function(){fp.call(this),this.edit=!0};tA(z0,fp);var rl=function(){Mu.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!ko(this.Ff,15)},set:function(i){i?this.Ff=Uo(this.Ff,15):this.Ff=Do(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!ko(this.Ff,16)},set:function(i){i?this.Ff=Uo(this.Ff,16):this.Ff=Do(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!ko(this.Ff,17)},set:function(i){i?this.Ff=Uo(this.Ff,17):this.Ff=Do(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!ko(this.Ff,26)},set:function(i){i?this.Ff=Uo(this.Ff,26):this.Ff=Do(this.Ff,26)}});var e,n={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var i=function(d){return d};if(this.scope&&(i=this.scope.internal.getEncryptor(this.objId)),Object.keys(n).length!==0){var l,h=[];for(l in h.push("<<"),n)h.push("/"+l+" ("+Af(i(n[l]))+")");return h.push(">>"),h.join(`
`)}},set:function(i){rs(i)==="object"&&(n=i)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return n.CA||""},set:function(i){typeof i=="string"&&(n.CA=i)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return e},set:function(i){e=i}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return e.substr(1,e.length-1)},set:function(i){e="/"+i}})};tA(rl,Mu);var H0=function(){rl.call(this),this.pushButton=!0};tA(H0,rl);var pp=function(){rl.call(this),this.radio=!0,this.pushButton=!1;var e=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return e},set:function(n){e=n!==void 0?n:[]}})};tA(pp,rl);var uy=function(){var e,n;Mu.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return e},set:function(h){e=h}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return n},set:function(h){n=h}});var i,l={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var h=function(o){return o};this.scope&&(h=this.scope.internal.getEncryptor(this.objId));var d,m=[];for(d in m.push("<<"),l)m.push("/"+d+" ("+Af(h(l[d]))+")");return m.push(">>"),m.join(`
`)},set:function(h){rs(h)==="object"&&(l=h)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return l.CA||""},set:function(h){typeof h=="string"&&(l.CA=h)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return i},set:function(h){i=h}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return i.substr(1,i.length-1)},set:function(h){i="/"+h}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=on.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};tA(uy,Mu),pp.prototype.setAppearance=function(e){if(!("createAppearanceStream"in e)||!("getCA"in e))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var n in this.Kids)if(this.Kids.hasOwnProperty(n)){var i=this.Kids[n];i.appearanceStreamContent=e.createAppearanceStream(i.optionName),i.caption=e.getCA()}},pp.prototype.createOption=function(e){var n=new uy;return n.Parent=this,n.optionName=e,this.Kids.push(n),wj.call(this.scope,n),n};var j0=function(){rl.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=on.CheckBox.createAppearanceStream()};tA(j0,rl);var tf=function(){Mu.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!ko(this.Ff,13)},set:function(n){n?this.Ff=Uo(this.Ff,13):this.Ff=Do(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!ko(this.Ff,21)},set:function(n){n?this.Ff=Uo(this.Ff,21):this.Ff=Do(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!ko(this.Ff,23)},set:function(n){n?this.Ff=Uo(this.Ff,23):this.Ff=Do(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!ko(this.Ff,24)},set:function(n){n?this.Ff=Uo(this.Ff,24):this.Ff=Do(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!ko(this.Ff,25)},set:function(n){n?this.Ff=Uo(this.Ff,25):this.Ff=Do(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!ko(this.Ff,26)},set:function(n){n?this.Ff=Uo(this.Ff,26):this.Ff=Do(this.Ff,26)}});var e=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return e},set:function(n){e=n}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return e},set:function(n){Number.isInteger(n)&&(e=n)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};tA(tf,Mu);var V0=function(){tf.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!ko(this.Ff,14)},set:function(e){e?this.Ff=Uo(this.Ff,14):this.Ff=Do(this.Ff,14)}}),this.password=!0};tA(V0,tf);var on={CheckBox:{createAppearanceStream:function(){return{N:{On:on.CheckBox.YesNormal},D:{On:on.CheckBox.YesPushDown,Off:on.CheckBox.OffPushDown}}},YesPushDown:function(e){var n=Yu(e);n.scope=e.scope;var i=[],l=e.scope.internal.getFont(e.fontName,e.fontStyle).id,h=e.scope.__private__.encodeColorString(e.color),d=dw(e,e.caption);return i.push("0.749023 g"),i.push("0 0 "+Hn(on.internal.getWidth(e))+" "+Hn(on.internal.getHeight(e))+" re"),i.push("f"),i.push("BMC"),i.push("q"),i.push("0 0 1 rg"),i.push("/"+l+" "+Hn(d.fontSize)+" Tf "+h),i.push("BT"),i.push(d.text),i.push("ET"),i.push("Q"),i.push("EMC"),n.stream=i.join(`
`),n},YesNormal:function(e){var n=Yu(e);n.scope=e.scope;var i=e.scope.internal.getFont(e.fontName,e.fontStyle).id,l=e.scope.__private__.encodeColorString(e.color),h=[],d=on.internal.getHeight(e),m=on.internal.getWidth(e),o=dw(e,e.caption);return h.push("1 g"),h.push("0 0 "+Hn(m)+" "+Hn(d)+" re"),h.push("f"),h.push("q"),h.push("0 0 1 rg"),h.push("0 0 "+Hn(m-1)+" "+Hn(d-1)+" re"),h.push("W"),h.push("n"),h.push("0 g"),h.push("BT"),h.push("/"+i+" "+Hn(o.fontSize)+" Tf "+l),h.push(o.text),h.push("ET"),h.push("Q"),n.stream=h.join(`
`),n},OffPushDown:function(e){var n=Yu(e);n.scope=e.scope;var i=[];return i.push("0.749023 g"),i.push("0 0 "+Hn(on.internal.getWidth(e))+" "+Hn(on.internal.getHeight(e))+" re"),i.push("f"),n.stream=i.join(`
`),n}},RadioButton:{Circle:{createAppearanceStream:function(e){var n={D:{Off:on.RadioButton.Circle.OffPushDown},N:{}};return n.N[e]=on.RadioButton.Circle.YesNormal,n.D[e]=on.RadioButton.Circle.YesPushDown,n},getCA:function(){return"l"},YesNormal:function(e){var n=Yu(e);n.scope=e.scope;var i=[],l=on.internal.getWidth(e)<=on.internal.getHeight(e)?on.internal.getWidth(e)/4:on.internal.getHeight(e)/4;l=Number((.9*l).toFixed(5));var h=on.internal.Bezier_C,d=Number((l*h).toFixed(5));return i.push("q"),i.push("1 0 0 1 "+sd(on.internal.getWidth(e)/2)+" "+sd(on.internal.getHeight(e)/2)+" cm"),i.push(l+" 0 m"),i.push(l+" "+d+" "+d+" "+l+" 0 "+l+" c"),i.push("-"+d+" "+l+" -"+l+" "+d+" -"+l+" 0 c"),i.push("-"+l+" -"+d+" -"+d+" -"+l+" 0 -"+l+" c"),i.push(d+" -"+l+" "+l+" -"+d+" "+l+" 0 c"),i.push("f"),i.push("Q"),n.stream=i.join(`
`),n},YesPushDown:function(e){var n=Yu(e);n.scope=e.scope;var i=[],l=on.internal.getWidth(e)<=on.internal.getHeight(e)?on.internal.getWidth(e)/4:on.internal.getHeight(e)/4;l=Number((.9*l).toFixed(5));var h=Number((2*l).toFixed(5)),d=Number((h*on.internal.Bezier_C).toFixed(5)),m=Number((l*on.internal.Bezier_C).toFixed(5));return i.push("0.749023 g"),i.push("q"),i.push("1 0 0 1 "+sd(on.internal.getWidth(e)/2)+" "+sd(on.internal.getHeight(e)/2)+" cm"),i.push(h+" 0 m"),i.push(h+" "+d+" "+d+" "+h+" 0 "+h+" c"),i.push("-"+d+" "+h+" -"+h+" "+d+" -"+h+" 0 c"),i.push("-"+h+" -"+d+" -"+d+" -"+h+" 0 -"+h+" c"),i.push(d+" -"+h+" "+h+" -"+d+" "+h+" 0 c"),i.push("f"),i.push("Q"),i.push("0 g"),i.push("q"),i.push("1 0 0 1 "+sd(on.internal.getWidth(e)/2)+" "+sd(on.internal.getHeight(e)/2)+" cm"),i.push(l+" 0 m"),i.push(l+" "+m+" "+m+" "+l+" 0 "+l+" c"),i.push("-"+m+" "+l+" -"+l+" "+m+" -"+l+" 0 c"),i.push("-"+l+" -"+m+" -"+m+" -"+l+" 0 -"+l+" c"),i.push(m+" -"+l+" "+l+" -"+m+" "+l+" 0 c"),i.push("f"),i.push("Q"),n.stream=i.join(`
`),n},OffPushDown:function(e){var n=Yu(e);n.scope=e.scope;var i=[],l=on.internal.getWidth(e)<=on.internal.getHeight(e)?on.internal.getWidth(e)/4:on.internal.getHeight(e)/4;l=Number((.9*l).toFixed(5));var h=Number((2*l).toFixed(5)),d=Number((h*on.internal.Bezier_C).toFixed(5));return i.push("0.749023 g"),i.push("q"),i.push("1 0 0 1 "+sd(on.internal.getWidth(e)/2)+" "+sd(on.internal.getHeight(e)/2)+" cm"),i.push(h+" 0 m"),i.push(h+" "+d+" "+d+" "+h+" 0 "+h+" c"),i.push("-"+d+" "+h+" -"+h+" "+d+" -"+h+" 0 c"),i.push("-"+h+" -"+d+" -"+d+" -"+h+" 0 -"+h+" c"),i.push(d+" -"+h+" "+h+" -"+d+" "+h+" 0 c"),i.push("f"),i.push("Q"),n.stream=i.join(`
`),n}},Cross:{createAppearanceStream:function(e){var n={D:{Off:on.RadioButton.Cross.OffPushDown},N:{}};return n.N[e]=on.RadioButton.Cross.YesNormal,n.D[e]=on.RadioButton.Cross.YesPushDown,n},getCA:function(){return"8"},YesNormal:function(e){var n=Yu(e);n.scope=e.scope;var i=[],l=on.internal.calculateCross(e);return i.push("q"),i.push("1 1 "+Hn(on.internal.getWidth(e)-2)+" "+Hn(on.internal.getHeight(e)-2)+" re"),i.push("W"),i.push("n"),i.push(Hn(l.x1.x)+" "+Hn(l.x1.y)+" m"),i.push(Hn(l.x2.x)+" "+Hn(l.x2.y)+" l"),i.push(Hn(l.x4.x)+" "+Hn(l.x4.y)+" m"),i.push(Hn(l.x3.x)+" "+Hn(l.x3.y)+" l"),i.push("s"),i.push("Q"),n.stream=i.join(`
`),n},YesPushDown:function(e){var n=Yu(e);n.scope=e.scope;var i=on.internal.calculateCross(e),l=[];return l.push("0.749023 g"),l.push("0 0 "+Hn(on.internal.getWidth(e))+" "+Hn(on.internal.getHeight(e))+" re"),l.push("f"),l.push("q"),l.push("1 1 "+Hn(on.internal.getWidth(e)-2)+" "+Hn(on.internal.getHeight(e)-2)+" re"),l.push("W"),l.push("n"),l.push(Hn(i.x1.x)+" "+Hn(i.x1.y)+" m"),l.push(Hn(i.x2.x)+" "+Hn(i.x2.y)+" l"),l.push(Hn(i.x4.x)+" "+Hn(i.x4.y)+" m"),l.push(Hn(i.x3.x)+" "+Hn(i.x3.y)+" l"),l.push("s"),l.push("Q"),n.stream=l.join(`
`),n},OffPushDown:function(e){var n=Yu(e);n.scope=e.scope;var i=[];return i.push("0.749023 g"),i.push("0 0 "+Hn(on.internal.getWidth(e))+" "+Hn(on.internal.getHeight(e))+" re"),i.push("f"),n.stream=i.join(`
`),n}}},createDefaultAppearanceStream:function(e){var n=e.scope.internal.getFont(e.fontName,e.fontStyle).id,i=e.scope.__private__.encodeColorString(e.color);return"/"+n+" "+e.fontSize+" Tf "+i}};on.internal={Bezier_C:.551915024494,calculateCross:function(e){var n=on.internal.getWidth(e),i=on.internal.getHeight(e),l=Math.min(n,i);return{x1:{x:(n-l)/2,y:(i-l)/2+l},x2:{x:(n-l)/2+l,y:(i-l)/2},x3:{x:(n-l)/2,y:(i-l)/2},x4:{x:(n-l)/2+l,y:(i-l)/2+l}}}},on.internal.getWidth=function(e){var n=0;return rs(e)==="object"&&(n=NC(e.Rect[2])),n},on.internal.getHeight=function(e){var n=0;return rs(e)==="object"&&(n=NC(e.Rect[3])),n};var wj=bo.addField=function(e){if(_j(this,e),!(e instanceof Mu))throw new Error("Invalid argument passed to jsPDF.addField.");var n;return(n=e).scope.internal.acroformPlugin.printedOut&&(n.scope.internal.acroformPlugin.printedOut=!1,n.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),n.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(n),e.page=e.scope.internal.getCurrentPageInfo().pageNumber,this};bo.AcroFormChoiceField=hp,bo.AcroFormListBox=dp,bo.AcroFormComboBox=fp,bo.AcroFormEditBox=z0,bo.AcroFormButton=rl,bo.AcroFormPushButton=H0,bo.AcroFormRadioButton=pp,bo.AcroFormCheckBox=j0,bo.AcroFormTextField=tf,bo.AcroFormPasswordField=V0,bo.AcroFormAppearance=on,bo.AcroForm={ChoiceField:hp,ListBox:dp,ComboBox:fp,EditBox:z0,Button:rl,PushButton:H0,RadioButton:pp,CheckBox:j0,TextField:tf,PasswordField:V0,Appearance:on},fn.AcroForm={ChoiceField:hp,ListBox:dp,ComboBox:fp,EditBox:z0,Button:rl,PushButton:H0,RadioButton:pp,CheckBox:j0,TextField:tf,PasswordField:V0,Appearance:on};fn.AcroForm;function b4(e){return e.reduce(function(n,i,l){return n[i]=l,n},{})}(function(e){var n="addImage_";e.__addimage__={};var i="UNKNOWN",l={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},h=e.__addimage__.getImageFileTypeByImageData=function(pe,_e){var Ue,Fe,pt,ht,Je,ze=i;if((_e=_e||i)==="RGBA"||pe.data!==void 0&&pe.data instanceof Uint8ClampedArray&&"height"in pe&&"width"in pe)return"RGBA";if(Ve(pe))for(Je in l)for(pt=l[Je],Ue=0;Ue<pt.length;Ue+=1){for(ht=!0,Fe=0;Fe<pt[Ue].length;Fe+=1)if(pt[Ue][Fe]!==void 0&&pt[Ue][Fe]!==pe[Fe]){ht=!1;break}if(ht===!0){ze=Je;break}}else for(Je in l)for(pt=l[Je],Ue=0;Ue<pt.length;Ue+=1){for(ht=!0,Fe=0;Fe<pt[Ue].length;Fe+=1)if(pt[Ue][Fe]!==void 0&&pt[Ue][Fe]!==pe.charCodeAt(Fe)){ht=!1;break}if(ht===!0){ze=Je;break}}return ze===i&&_e!==i&&(ze=_e),ze},d=function pe(_e){for(var Ue=this.internal.write,Fe=this.internal.putStream,pt=(0,this.internal.getFilters)();pt.indexOf("FlateEncode")!==-1;)pt.splice(pt.indexOf("FlateEncode"),1);_e.objectId=this.internal.newObject();var ht=[];if(ht.push({key:"Type",value:"/XObject"}),ht.push({key:"Subtype",value:"/Image"}),ht.push({key:"Width",value:_e.width}),ht.push({key:"Height",value:_e.height}),_e.colorSpace===Z.INDEXED?ht.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(_e.palette.length/3-1)+" "+("sMask"in _e&&_e.sMask!==void 0?_e.objectId+2:_e.objectId+1)+" 0 R]"}):(ht.push({key:"ColorSpace",value:"/"+_e.colorSpace}),_e.colorSpace===Z.DEVICE_CMYK&&ht.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),ht.push({key:"BitsPerComponent",value:_e.bitsPerComponent}),"decodeParameters"in _e&&_e.decodeParameters!==void 0&&ht.push({key:"DecodeParms",value:"<<"+_e.decodeParameters+">>"}),"transparency"in _e&&Array.isArray(_e.transparency)&&_e.transparency.length>0){for(var Je="",ze=0,je=_e.transparency.length;ze<je;ze++)Je+=_e.transparency[ze]+" "+_e.transparency[ze]+" ";ht.push({key:"Mask",value:"["+Je+"]"})}_e.sMask!==void 0&&ht.push({key:"SMask",value:_e.objectId+1+" 0 R"});var xt=_e.filter!==void 0?["/"+_e.filter]:void 0;if(Fe({data:_e.data,additionalKeyValues:ht,alreadyAppliedFilters:xt,objectId:_e.objectId}),Ue("endobj"),"sMask"in _e&&_e.sMask!==void 0){var Re,oe=(Re=_e.sMaskBitsPerComponent)!==null&&Re!==void 0?Re:_e.bitsPerComponent,Se={width:_e.width,height:_e.height,colorSpace:"DeviceGray",bitsPerComponent:oe,data:_e.sMask};"filter"in _e&&(Se.decodeParameters="/Predictor ".concat(_e.predictor," /Colors 1 /BitsPerComponent ").concat(oe," /Columns ").concat(_e.width),Se.filter=_e.filter),pe.call(this,Se)}if(_e.colorSpace===Z.INDEXED){var Ne=this.internal.newObject();Fe({data:Pe(new Uint8Array(_e.palette)),objectId:Ne}),Ue("endobj")}},m=function(){var pe=this.internal.collections[n+"images"];for(var _e in pe)d.call(this,pe[_e])},o=function(){var pe,_e=this.internal.collections[n+"images"],Ue=this.internal.write;for(var Fe in _e)Ue("/I"+(pe=_e[Fe]).index,pe.objectId,"0","R")},x=function(){this.internal.collections[n+"images"]||(this.internal.collections[n+"images"]={},this.internal.events.subscribe("putResources",m),this.internal.events.subscribe("putXobjectDict",o))},E=function(){var pe=this.internal.collections[n+"images"];return x.call(this),pe},I=function(){return Object.keys(this.internal.collections[n+"images"]).length},D=function(pe){return typeof e["process"+pe.toUpperCase()]=="function"},O=function(pe){return rs(pe)==="object"&&pe.nodeType===1},P=function(pe,_e){if(pe.nodeName==="IMG"&&pe.hasAttribute("src")){var Ue=""+pe.getAttribute("src");if(Ue.indexOf("data:image/")===0)return O0(unescape(Ue).split("base64,").pop());var Fe=e.loadFile(Ue,!0);if(Fe!==void 0)return Fe}if(pe.nodeName==="CANVAS"){if(pe.width===0||pe.height===0)throw new Error("Given canvas must have data. Canvas width: "+pe.width+", height: "+pe.height);var pt;switch(_e){case"PNG":pt="image/png";break;case"WEBP":pt="image/webp";break;default:pt="image/jpeg"}return O0(pe.toDataURL(pt,1).split("base64,").pop())}},W=function(pe){var _e=this.internal.collections[n+"images"];if(_e){for(var Ue in _e)if(pe===_e[Ue].alias)return _e[Ue]}},z=function(pe,_e,Ue){return pe||_e||(pe=-96,_e=-96),pe<0&&(pe=-1*Ue.width*72/pe/this.internal.scaleFactor),_e<0&&(_e=-1*Ue.height*72/_e/this.internal.scaleFactor),pe===0&&(pe=_e*Ue.width/Ue.height),_e===0&&(_e=pe*Ue.height/Ue.width),[pe,_e]},H=function(pe,_e,Ue,Fe,pt,ht){var Je=z.call(this,Ue,Fe,pt),ze=this.internal.getCoordinateString,je=this.internal.getVerticalCoordinateString,xt=E.call(this);if(Ue=Je[0],Fe=Je[1],xt[pt.index]=pt,ht){ht*=Math.PI/180;var Re=Math.cos(ht),oe=Math.sin(ht),Se=function(Ye){return Ye.toFixed(4)},Ne=[Se(Re),Se(oe),Se(-1*oe),Se(Re),0,0,"cm"]}this.internal.write("q"),ht?(this.internal.write([1,"0","0",1,ze(pe),je(_e+Fe),"cm"].join(" ")),this.internal.write(Ne.join(" ")),this.internal.write([ze(Ue),"0","0",ze(Fe),"0","0","cm"].join(" "))):this.internal.write([ze(Ue),"0","0",ze(Fe),ze(pe),je(_e+Fe),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+pt.index+" Do"),this.internal.write("Q")},Z=e.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};e.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var ie=e.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},ce=e.__addimage__.sHashCode=function(pe){var _e,Ue,Fe=0;if(typeof pe=="string")for(Ue=pe.length,_e=0;_e<Ue;_e++)Fe=(Fe<<5)-Fe+pe.charCodeAt(_e),Fe|=0;else if(Ve(pe))for(Ue=pe.byteLength/2,_e=0;_e<Ue;_e++)Fe=(Fe<<5)-Fe+pe[_e],Fe|=0;return Fe},he=e.__addimage__.validateStringAsBase64=function(pe){(pe=pe||"").toString().trim();var _e=!0;return pe.length===0&&(_e=!1),pe.length%4!=0&&(_e=!1),/^[A-Za-z0-9+/]+$/.test(pe.substr(0,pe.length-2))===!1&&(_e=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(pe.substr(-2))===!1&&(_e=!1),_e},Ie=e.__addimage__.extractImageFromDataUrl=function(pe){if(pe==null||!(pe=pe.trim()).startsWith("data:"))return null;var _e=pe.indexOf(",");return _e<0?null:pe.substring(0,_e).trim().endsWith("base64")?pe.substring(_e+1):null};e.__addimage__.isArrayBuffer=function(pe){return pe instanceof ArrayBuffer};var Ve=e.__addimage__.isArrayBufferView=function(pe){return pe instanceof Int8Array||pe instanceof Uint8Array||pe instanceof Uint8ClampedArray||pe instanceof Int16Array||pe instanceof Uint16Array||pe instanceof Int32Array||pe instanceof Uint32Array||pe instanceof Float32Array||pe instanceof Float64Array},Me=e.__addimage__.binaryStringToUint8Array=function(pe){for(var _e=pe.length,Ue=new Uint8Array(_e),Fe=0;Fe<_e;Fe++)Ue[Fe]=pe.charCodeAt(Fe);return Ue},Pe=e.__addimage__.arrayBufferToBinaryString=function(pe){for(var _e="",Ue=Ve(pe)?pe:new Uint8Array(pe),Fe=0;Fe<Ue.length;Fe+=8192)_e+=String.fromCharCode.apply(null,Ue.subarray(Fe,Fe+8192));return _e};e.addImage=function(){var pe,_e,Ue,Fe,pt,ht,Je,ze,je;if(typeof arguments[1]=="number"?(_e=i,Ue=arguments[1],Fe=arguments[2],pt=arguments[3],ht=arguments[4],Je=arguments[5],ze=arguments[6],je=arguments[7]):(_e=arguments[1],Ue=arguments[2],Fe=arguments[3],pt=arguments[4],ht=arguments[5],Je=arguments[6],ze=arguments[7],je=arguments[8]),rs(pe=arguments[0])==="object"&&!O(pe)&&"imageData"in pe){var xt=pe;pe=xt.imageData,_e=xt.format||_e||i,Ue=xt.x||Ue||0,Fe=xt.y||Fe||0,pt=xt.w||xt.width||pt,ht=xt.h||xt.height||ht,Je=xt.alias||Je,ze=xt.compression||ze,je=xt.rotation||xt.angle||je}var Re=this.internal.getFilters();if(ze===void 0&&Re.indexOf("FlateEncode")!==-1&&(ze="SLOW"),isNaN(Ue)||isNaN(Fe))throw new Error("Invalid coordinates passed to jsPDF.addImage");x.call(this);var oe=xe.call(this,pe,_e,Je,ze);return H.call(this,Ue,Fe,pt,ht,oe,je),this};var xe=function(pe,_e,Ue,Fe){var pt,ht,Je;if(typeof pe=="string"&&h(pe)===i){pe=unescape(pe);var ze=nt(pe,!1);(ze!==""||(ze=e.loadFile(pe,!0))!==void 0)&&(pe=ze)}if(O(pe)&&(pe=P(pe,_e)),_e=h(pe,_e),!D(_e))throw new Error("addImage does not support files of type '"+_e+"', please ensure that a plugin for '"+_e+"' support is added.");if(((Je=Ue)==null||Je.length===0)&&(Ue=(function(je){return typeof je=="string"||Ve(je)?ce(je):Ve(je.data)?ce(je.data):null})(pe)),(pt=W.call(this,Ue))||(pe instanceof Uint8Array||_e==="RGBA"||(ht=pe,pe=Me(pe)),pt=this["process"+_e.toUpperCase()](pe,I.call(this),Ue,(function(je){return je&&typeof je=="string"&&(je=je.toUpperCase()),je in e.image_compression?je:ie.NONE})(Fe),ht)),!pt)throw new Error("An unknown error occurred whilst processing the image.");return pt},nt=e.__addimage__.convertBase64ToBinaryString=function(pe,_e){_e=typeof _e!="boolean"||_e;var Ue,Fe="";if(typeof pe=="string"){var pt;Ue=(pt=Ie(pe))!==null&&pt!==void 0?pt:pe;try{Fe=O0(Ue)}catch(ht){if(_e)throw he(Ue)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+ht.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return Fe};e.getImageProperties=function(pe){var _e,Ue,Fe="";if(O(pe)&&(pe=P(pe)),typeof pe=="string"&&h(pe)===i&&((Fe=nt(pe,!1))===""&&(Fe=e.loadFile(pe)||""),pe=Fe),Ue=h(pe),!D(Ue))throw new Error("addImage does not support files of type '"+Ue+"', please ensure that a plugin for '"+Ue+"' support is added.");if(pe instanceof Uint8Array||(pe=Me(pe)),!(_e=this["process"+Ue.toUpperCase()](pe)))throw new Error("An unknown error occurred whilst processing the image");return _e.fileType=Ue,_e}})(fn.API),(function(e){var n=function(i){if(i!==void 0&&i!="")return!0};fn.API.events.push(["addPage",function(i){this.internal.getPageInfo(i.pageNumber).pageContext.annotations=[]}]),e.events.push(["putPage",function(i){for(var l,h,d,m=this.internal.getCoordinateString,o=this.internal.getVerticalCoordinateString,x=this.internal.getPageInfoByObjId(i.objId),E=i.pageContext.annotations,I=!1,D=0;D<E.length&&!I;D++)switch((l=E[D]).type){case"link":(n(l.options.url)||n(l.options.pageNumber))&&(I=!0);break;case"reference":case"text":case"freetext":I=!0}if(I!=0){this.internal.write("/Annots [");for(var O=0;O<E.length;O++){l=E[O];var P=this.internal.pdfEscape,W=this.internal.getEncryptor(i.objId);switch(l.type){case"reference":this.internal.write(" "+l.object.objId+" 0 R ");break;case"text":var z=this.internal.newAdditionalObject(),H=this.internal.newAdditionalObject(),Z=this.internal.getEncryptor(z.objId),ie=l.title||"Note";d="<</Type /Annot /Subtype /Text "+(h="/Rect ["+m(l.bounds.x)+" "+o(l.bounds.y+l.bounds.h)+" "+m(l.bounds.x+l.bounds.w)+" "+o(l.bounds.y)+"] ")+"/Contents ("+P(Z(l.contents))+")",d+=" /Popup "+H.objId+" 0 R",d+=" /P "+x.objId+" 0 R",d+=" /T ("+P(Z(ie))+") >>",z.content=d;var ce=z.objId+" 0 R";d="<</Type /Annot /Subtype /Popup "+(h="/Rect ["+m(l.bounds.x+30)+" "+o(l.bounds.y+l.bounds.h)+" "+m(l.bounds.x+l.bounds.w+30)+" "+o(l.bounds.y)+"] ")+" /Parent "+ce,l.open&&(d+=" /Open true"),d+=" >>",H.content=d,this.internal.write(z.objId,"0 R",H.objId,"0 R");break;case"freetext":h="/Rect ["+m(l.bounds.x)+" "+o(l.bounds.y)+" "+m(l.bounds.x+l.bounds.w)+" "+o(l.bounds.y+l.bounds.h)+"] ";var he=l.color||"#000000";d="<</Type /Annot /Subtype /FreeText "+h+"/Contents ("+P(W(l.contents))+")",d+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+he+")",d+=" /Border [0 0 0]",d+=" >>",this.internal.write(d);break;case"link":if(l.options.name){var Ie=this.annotations._nameMap[l.options.name];l.options.pageNumber=Ie.page,l.options.top=Ie.y}else l.options.top||(l.options.top=0);if(h="/Rect ["+l.finalBounds.x+" "+l.finalBounds.y+" "+l.finalBounds.w+" "+l.finalBounds.h+"] ",d="",l.options.url)d="<</Type /Annot /Subtype /Link "+h+"/Border [0 0 0] /A <</S /URI /URI ("+P(W(l.options.url))+") >>";else if(l.options.pageNumber)switch(d="<</Type /Annot /Subtype /Link "+h+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(l.options.pageNumber).objId+" 0 R",l.options.magFactor=l.options.magFactor||"XYZ",l.options.magFactor){case"Fit":d+=" /Fit]";break;case"FitH":d+=" /FitH "+l.options.top+"]";break;case"FitV":l.options.left=l.options.left||0,d+=" /FitV "+l.options.left+"]";break;default:var Ve=o(l.options.top);l.options.left=l.options.left||0,l.options.zoom===void 0&&(l.options.zoom=0),d+=" /XYZ "+l.options.left+" "+Ve+" "+l.options.zoom+"]"}d!=""&&(d+=" >>",this.internal.write(d))}}this.internal.write("]")}}]),e.createAnnotation=function(i){var l=this.internal.getCurrentPageInfo();switch(i.type){case"link":this.link(i.bounds.x,i.bounds.y,i.bounds.w,i.bounds.h,i);break;case"text":case"freetext":l.pageContext.annotations.push(i)}},e.link=function(i,l,h,d,m){var o=this.internal.getCurrentPageInfo(),x=this.internal.getCoordinateString,E=this.internal.getVerticalCoordinateString;o.pageContext.annotations.push({finalBounds:{x:x(i),y:E(l),w:x(i+h),h:E(l+d)},options:m,type:"link"})},e.textWithLink=function(i,l,h,d){var m,o,x=this.getTextWidth(i),E=this.internal.getLineHeight()/this.internal.scaleFactor;if(d.maxWidth!==void 0){o=d.maxWidth;var I=this.splitTextToSize(i,o).length;m=Math.ceil(E*I)}else o=x,m=E;return this.text(i,l,h,d),h+=.2*E,d.align==="center"&&(l-=x/2),d.align==="right"&&(l-=x),this.link(l,h-E,o,m,d),x},e.getTextWidth=function(i){var l=this.internal.getFontSize();return this.getStringUnitWidth(i)*l/this.internal.scaleFactor}})(fn.API),(function(e){var n={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},i={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},l={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},h=[1570,1571,1573,1575];e.__arabicParser__={};var d=e.__arabicParser__.isInArabicSubstitutionA=function(z){return n[z.charCodeAt(0)]!==void 0},m=e.__arabicParser__.isArabicLetter=function(z){return typeof z=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(z)},o=e.__arabicParser__.isArabicEndLetter=function(z){return m(z)&&d(z)&&n[z.charCodeAt(0)].length<=2},x=e.__arabicParser__.isArabicAlfLetter=function(z){return m(z)&&h.indexOf(z.charCodeAt(0))>=0};e.__arabicParser__.arabicLetterHasIsolatedForm=function(z){return m(z)&&d(z)&&n[z.charCodeAt(0)].length>=1};var E=e.__arabicParser__.arabicLetterHasFinalForm=function(z){return m(z)&&d(z)&&n[z.charCodeAt(0)].length>=2};e.__arabicParser__.arabicLetterHasInitialForm=function(z){return m(z)&&d(z)&&n[z.charCodeAt(0)].length>=3};var I=e.__arabicParser__.arabicLetterHasMedialForm=function(z){return m(z)&&d(z)&&n[z.charCodeAt(0)].length==4},D=e.__arabicParser__.resolveLigatures=function(z){var H=0,Z=i,ie="",ce=0;for(H=0;H<z.length;H+=1)Z[z.charCodeAt(H)]!==void 0?(ce++,typeof(Z=Z[z.charCodeAt(H)])=="number"&&(ie+=String.fromCharCode(Z),Z=i,ce=0),H===z.length-1&&(Z=i,ie+=z.charAt(H-(ce-1)),H-=ce-1,ce=0)):(Z=i,ie+=z.charAt(H-ce),H-=ce,ce=0);return ie};e.__arabicParser__.isArabicDiacritic=function(z){return z!==void 0&&l[z.charCodeAt(0)]!==void 0};var O=e.__arabicParser__.getCorrectForm=function(z,H,Z){return m(z)?d(z)===!1?-1:!E(z)||!m(H)&&!m(Z)||!m(Z)&&o(H)||o(z)&&!m(H)||o(z)&&x(H)||o(z)&&o(H)?0:I(z)&&m(H)&&!o(H)&&m(Z)&&E(Z)?3:o(z)||!m(Z)?1:2:-1},P=function(z){var H=0,Z=0,ie=0,ce="",he="",Ie="",Ve=(z=z||"").split("\\s+"),Me=[];for(H=0;H<Ve.length;H+=1){for(Me.push(""),Z=0;Z<Ve[H].length;Z+=1)ce=Ve[H][Z],he=Ve[H][Z-1],Ie=Ve[H][Z+1],m(ce)?(ie=O(ce,he,Ie),Me[H]+=ie!==-1?String.fromCharCode(n[ce.charCodeAt(0)][ie]):ce):Me[H]+=ce;Me[H]=D(Me[H])}return Me.join(" ")},W=e.__arabicParser__.processArabic=e.processArabic=function(){var z,H=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,Z=[];if(Array.isArray(H)){var ie=0;for(Z=[],ie=0;ie<H.length;ie+=1)Array.isArray(H[ie])?Z.push([P(H[ie][0]),H[ie][1],H[ie][2]]):Z.push([P(H[ie])]);z=Z}else z=P(H);return typeof arguments[0]=="string"?z:(arguments[0].text=z,arguments[0])};e.events.push(["preProcessText",W])})(fn.API),fn.API.autoPrint=function(e){var n;return(e=e||{}).variant=e.variant||"non-conform",e.variant==="javascript"?this.addJS("print({});"):(this.internal.events.subscribe("postPutResources",function(){n=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+n+" 0 R")})),this},(function(e){var n=function(){var i=void 0;Object.defineProperty(this,"pdf",{get:function(){return i},set:function(o){i=o}});var l=150;Object.defineProperty(this,"width",{get:function(){return l},set:function(o){l=isNaN(o)||Number.isInteger(o)===!1||o<0?150:o,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=l+1)}});var h=300;Object.defineProperty(this,"height",{get:function(){return h},set:function(o){h=isNaN(o)||Number.isInteger(o)===!1||o<0?300:o,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=h+1)}});var d=[];Object.defineProperty(this,"childNodes",{get:function(){return d},set:function(o){d=o}});var m={};Object.defineProperty(this,"style",{get:function(){return m},set:function(o){m=o}}),Object.defineProperty(this,"parentNode",{})};n.prototype.getContext=function(i,l){var h;if((i=i||"2d")!=="2d")return null;for(h in l)this.pdf.context2d.hasOwnProperty(h)&&(this.pdf.context2d[h]=l[h]);return this.pdf.context2d._canvas=this,this.pdf.context2d},n.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},e.events.push(["initialized",function(){this.canvas=new n,this.canvas.pdf=this}])})(fn.API),(function(e){var n={left:0,top:0,bottom:0,right:0},i=!1,l=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},n),this.internal.__cell__.margins.width=this.getPageWidth(),h.call(this))},h=function(){this.internal.__cell__.lastCell=new d,this.internal.__cell__.pages=1},d=function(){var x=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return x},set:function(z){x=z}});var E=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return E},set:function(z){E=z}});var I=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return I},set:function(z){I=z}});var D=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return D},set:function(z){D=z}});var O=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return O},set:function(z){O=z}});var P=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return P},set:function(z){P=z}});var W=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return W},set:function(z){W=z}}),this};d.prototype.clone=function(){return new d(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},d.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},e.setHeaderFunction=function(x){return l.call(this),this.internal.__cell__.headerFunction=typeof x=="function"?x:void 0,this},e.getTextDimensions=function(x,E){l.call(this);var I=(E=E||{}).fontSize||this.getFontSize(),D=E.font||this.getFont(),O=E.scaleFactor||this.internal.scaleFactor,P=0,W=0,z=0,H=this;if(!Array.isArray(x)&&typeof x!="string"){if(typeof x!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");x=String(x)}var Z=E.maxWidth;Z>0?typeof x=="string"?x=this.splitTextToSize(x,Z):Object.prototype.toString.call(x)==="[object Array]"&&(x=x.reduce(function(ce,he){return ce.concat(H.splitTextToSize(he,Z))},[])):x=Array.isArray(x)?x:[x];for(var ie=0;ie<x.length;ie++)P<(z=this.getStringUnitWidth(x[ie],{font:D})*I)&&(P=z);return P!==0&&(W=x.length),{w:P/=O,h:Math.max((W*I*this.getLineHeightFactor()-I*(this.getLineHeightFactor()-1))/O,0)}},e.cellAddPage=function(){l.call(this),this.addPage();var x=this.internal.__cell__.margins||n;return this.internal.__cell__.lastCell=new d(x.left,x.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var m=e.cell=function(){var x;x=arguments[0]instanceof d?arguments[0]:new d(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6]),l.call(this);var E=this.internal.__cell__.lastCell,I=this.internal.__cell__.padding,D=this.internal.__cell__.margins||n,O=this.internal.__cell__.tableHeaderRow,P=this.internal.__cell__.printHeaders;return E.lineNumber!==void 0&&(E.lineNumber===x.lineNumber?(x.x=(E.x||0)+(E.width||0),x.y=E.y||0):E.y+E.height+x.height+D.bottom>this.getPageHeight()?(this.cellAddPage(),x.y=D.top,P&&O&&(this.printHeaderRow(x.lineNumber,!0),x.y+=O[0].height)):x.y=E.y+E.height||x.y),x.text[0]!==void 0&&(this.rect(x.x,x.y,x.width,x.height,i===!0?"FD":void 0),x.align==="right"?this.text(x.text,x.x+x.width-I,x.y+I,{align:"right",baseline:"top"}):x.align==="center"?this.text(x.text,x.x+x.width/2,x.y+I,{align:"center",baseline:"top",maxWidth:x.width-I-I}):this.text(x.text,x.x+I,x.y+I,{align:"left",baseline:"top",maxWidth:x.width-I-I})),this.internal.__cell__.lastCell=x,this};e.table=function(x,E,I,D,O){if(l.call(this),!I)throw new Error("No data for PDF table.");var P,W,z,H,Z=[],ie=[],ce=[],he={},Ie={},Ve=[],Me=[],Pe=(O=O||{}).autoSize||!1,xe=O.printHeaders!==!1,nt=O.css&&O.css["font-size"]!==void 0?16*O.css["font-size"]:O.fontSize||12,pe=O.margins||Object.assign({width:this.getPageWidth()},n),_e=typeof O.padding=="number"?O.padding:3,Ue=O.headerBackgroundColor||"#c8c8c8",Fe=O.headerTextColor||"#000";if(h.call(this),this.internal.__cell__.printHeaders=xe,this.internal.__cell__.margins=pe,this.internal.__cell__.table_font_size=nt,this.internal.__cell__.padding=_e,this.internal.__cell__.headerBackgroundColor=Ue,this.internal.__cell__.headerTextColor=Fe,this.setFontSize(nt),D==null)ie=Z=Object.keys(I[0]),ce=Z.map(function(){return"left"});else if(Array.isArray(D)&&rs(D[0])==="object")for(Z=D.map(function(xt){return xt.name}),ie=D.map(function(xt){return xt.prompt||xt.name||""}),ce=D.map(function(xt){return xt.align||"left"}),P=0;P<D.length;P+=1)Ie[D[P].name]=.7499990551181103*D[P].width;else Array.isArray(D)&&typeof D[0]=="string"&&(ie=Z=D,ce=Z.map(function(){return"left"}));if(Pe||Array.isArray(D)&&typeof D[0]=="string")for(P=0;P<Z.length;P+=1){for(he[H=Z[P]]=I.map(function(xt){return xt[H]}),this.setFont(void 0,"bold"),Ve.push(this.getTextDimensions(ie[P],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),W=he[H],this.setFont(void 0,"normal"),z=0;z<W.length;z+=1)Ve.push(this.getTextDimensions(W[z],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);Ie[H]=Math.max.apply(null,Ve)+_e+_e,Ve=[]}if(xe){var pt={};for(P=0;P<Z.length;P+=1)pt[Z[P]]={},pt[Z[P]].text=ie[P],pt[Z[P]].align=ce[P];var ht=o.call(this,pt,Ie);Me=Z.map(function(xt){return new d(x,E,Ie[xt],ht,pt[xt].text,void 0,pt[xt].align)}),this.setTableHeaderRow(Me),this.printHeaderRow(1,!1)}var Je=D.reduce(function(xt,Re){return xt[Re.name]=Re.align,xt},{});for(P=0;P<I.length;P+=1){"rowStart"in O&&O.rowStart instanceof Function&&O.rowStart({row:P,data:I[P]},this);var ze=o.call(this,I[P],Ie);for(z=0;z<Z.length;z+=1){var je=I[P][Z[z]];"cellStart"in O&&O.cellStart instanceof Function&&O.cellStart({row:P,col:z,data:je},this),m.call(this,new d(x,E,Ie[Z[z]],ze,je,P+2,Je[Z[z]]))}}return this.internal.__cell__.table_x=x,this.internal.__cell__.table_y=E,this};var o=function(x,E){var I=this.internal.__cell__.padding,D=this.internal.__cell__.table_font_size,O=this.internal.scaleFactor;return Object.keys(x).map(function(P){var W=x[P];return this.splitTextToSize(W.hasOwnProperty("text")?W.text:W,E[P]-I-I)},this).map(function(P){return this.getLineHeightFactor()*P.length*D/O+I+I},this).reduce(function(P,W){return Math.max(P,W)},0)};e.setTableHeaderRow=function(x){l.call(this),this.internal.__cell__.tableHeaderRow=x},e.printHeaderRow=function(x,E){if(l.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var I;if(i=!0,typeof this.internal.__cell__.headerFunction=="function"){var D=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new d(D[0],D[1],D[2],D[3],void 0,-1)}this.setFont(void 0,"bold");for(var O=[],P=0;P<this.internal.__cell__.tableHeaderRow.length;P+=1){I=this.internal.__cell__.tableHeaderRow[P].clone(),E&&(I.y=this.internal.__cell__.margins.top||0,O.push(I)),I.lineNumber=x;var W=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),m.call(this,I),this.setTextColor(W)}O.length>0&&this.setTableHeaderRow(O),this.setFont(void 0,"normal"),i=!1}})(fn.API);var B4={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},C4=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],fw=b4(C4),E4=[100,200,300,400,500,600,700,800,900],xj=b4(E4);function Z1(e){var n=e.family.replace(/"|'/g,"").toLowerCase(),i=(function(d){return B4[d=d||"normal"]?d:"normal"})(e.style),l=(function(d){return d?typeof d=="number"?d>=100&&d<=900&&d%100==0?d:400:/^\d00$/.test(d)?parseInt(d):d==="bold"?700:400:400})(e.weight),h=(function(d){return typeof fw[d=d||"normal"]=="number"?d:"normal"})(e.stretch);return{family:n,style:i,weight:l,stretch:h,src:e.src||[],ref:e.ref||{name:n,style:[h,i,l].join(" ")}}}function QC(e,n,i,l){var h;for(h=i;h>=0&&h<n.length;h+=l)if(e[n[h]])return e[n[h]];for(h=i;h>=0&&h<n.length;h-=l)if(e[n[h]])return e[n[h]]}var bj={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},OC={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function zC(e){return[e.stretch,e.style,e.weight,e.family].join(" ")}function HC(e){return e.trimLeft()}function Bj(e,n){for(var i=0;i<e.length;){if(e.charAt(i)===n)return[e.substring(0,i),e.substring(i+1)];i+=1}return null}function Cj(e){var n=e.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return n===null?null:[n[0],e.substring(n[0].length)]}var C0,jC,VC,Zf,E0,GC,KC,qC,X1=["times"];function $C(e,n,i,l,h){var d=4,m=ZC;switch(h){case fn.API.image_compression.FAST:d=1,m=WC;break;case fn.API.image_compression.MEDIUM:d=6,m=XC;break;case fn.API.image_compression.SLOW:d=9,m=YC}e=(function(x,E,I,D){for(var O,P=x.length/E,W=new Uint8Array(x.length+P),z=[Ej,WC,ZC,XC,YC],H=0;H<P;H+=1){var Z=H*E,ie=x.subarray(Z,Z+E);if(D)W.set(D(ie,I,O),Z+H);else{for(var ce=z.length,he=[],Ie=0;Ie<ce;Ie+=1)he[Ie]=z[Ie](ie,I,O);var Ve=Fj(he.concat());W.set(he[Ve],Z+H)}O=ie}return W})(e,n,Math.ceil(i*l/8),m);var o=R_(e,{level:d});return fn.API.__addimage__.arrayBufferToBinaryString(o)}function Ej(e){var n=Array.apply([],e);return n.unshift(0),n}function WC(e,n){var i=e.length,l=[];l[0]=1;for(var h=0;h<i;h+=1){var d=e[h-n]||0;l[h+1]=e[h]-d+256&255}return l}function ZC(e,n,i){var l=e.length,h=[];h[0]=2;for(var d=0;d<l;d+=1){var m=i&&i[d]||0;h[d+1]=e[d]-m+256&255}return h}function XC(e,n,i){var l=e.length,h=[];h[0]=3;for(var d=0;d<l;d+=1){var m=e[d-n]||0,o=i&&i[d]||0;h[d+1]=e[d]+256-(m+o>>>1)&255}return h}function YC(e,n,i){var l=e.length,h=[];h[0]=4;for(var d=0;d<l;d+=1){var m=Sj(e[d-n]||0,i&&i[d]||0,i&&i[d-n]||0);h[d+1]=e[d]-m+256&255}return h}function Sj(e,n,i){if(e===n&&n===i)return e;var l=Math.abs(n-i),h=Math.abs(e-i),d=Math.abs(e+n-i-i);return l<=h&&l<=d?e:h<=d?n:i}function Fj(e){var n=e.map(function(i){return i.reduce(function(l,h){return l+Math.abs(h)},0)});return n.indexOf(Math.min.apply(null,n))}function Y1(e,n,i){var l=n*i,h=Math.floor(l/8),d=16-(l-8*h+i),m=(1<<i)-1;return S4(e,h)>>d&m}function JC(e,n,i,l){var h=i*l,d=Math.floor(h/8),m=16-(h-8*d+l),o=(1<<l)-1,x=(n&o)<<m;(function(E,I,D){if(I+1<E.byteLength)E.setUint16(I,D,!1);else{var O=D>>8&255;E.setUint8(I,O)}})(e,d,S4(e,d)&~(o<<m)&65535|x)}function S4(e,n){return n+1<e.byteLength?e.getUint16(n,!1):e.getUint8(n)<<8}function Ij(e){var n=0;if(e[n++]!==71||e[n++]!==73||e[n++]!==70||e[n++]!==56||(e[n++]+1&253)!=56||e[n++]!==97)throw new Error("Invalid GIF 87a/89a header.");var i=e[n++]|e[n++]<<8,l=e[n++]|e[n++]<<8,h=e[n++],d=h>>7,m=1<<1+(7&h);e[n++],e[n++];var o=null,x=null;d&&(o=n,x=m,n+=3*m);var E=!0,I=[],D=0,O=null,P=0,W=null;for(this.width=i,this.height=l;E&&n<e.length;)switch(e[n++]){case 33:switch(e[n++]){case 255:if(e[n]!==11||e[n+1]==78&&e[n+2]==69&&e[n+3]==84&&e[n+4]==83&&e[n+5]==67&&e[n+6]==65&&e[n+7]==80&&e[n+8]==69&&e[n+9]==50&&e[n+10]==46&&e[n+11]==48&&e[n+12]==3&&e[n+13]==1&&e[n+16]==0)n+=14,W=e[n++]|e[n++]<<8,n++;else for(n+=12;;){if(!((pe=e[n++])>=0))throw Error("Invalid block size");if(pe===0)break;n+=pe}break;case 249:if(e[n++]!==4||e[n+4]!==0)throw new Error("Invalid graphics extension block.");var z=e[n++];D=e[n++]|e[n++]<<8,O=e[n++],1&z||(O=null),P=z>>2&7,n++;break;case 254:for(;;){if(!((pe=e[n++])>=0))throw Error("Invalid block size");if(pe===0)break;n+=pe}break;default:throw new Error("Unknown graphic control label: 0x"+e[n-1].toString(16))}break;case 44:var H=e[n++]|e[n++]<<8,Z=e[n++]|e[n++]<<8,ie=e[n++]|e[n++]<<8,ce=e[n++]|e[n++]<<8,he=e[n++],Ie=he>>6&1,Ve=1<<1+(7&he),Me=o,Pe=x,xe=!1;he>>7&&(xe=!0,Me=n,Pe=Ve,n+=3*Ve);var nt=n;for(n++;;){var pe;if(!((pe=e[n++])>=0))throw Error("Invalid block size");if(pe===0)break;n+=pe}I.push({x:H,y:Z,width:ie,height:ce,has_local_palette:xe,palette_offset:Me,palette_size:Pe,data_offset:nt,data_length:n-nt,transparent_index:O,interlaced:!!Ie,delay:D,disposal:P});break;case 59:E=!1;break;default:throw new Error("Unknown gif block: 0x"+e[n-1].toString(16))}this.numFrames=function(){return I.length},this.loopCount=function(){return W},this.frameInfo=function(_e){if(_e<0||_e>=I.length)throw new Error("Frame index out of range.");return I[_e]},this.decodeAndBlitFrameBGRA=function(_e,Ue){var Fe=this.frameInfo(_e),pt=Fe.width*Fe.height,ht=new Uint8Array(pt);e5(e,Fe.data_offset,ht,pt);var Je=Fe.palette_offset,ze=Fe.transparent_index;ze===null&&(ze=256);var je=Fe.width,xt=i-je,Re=je,oe=4*(Fe.y*i+Fe.x),Se=4*((Fe.y+Fe.height)*i+Fe.x),Ne=oe,Ye=4*xt;Fe.interlaced===!0&&(Ye+=4*i*7);for(var lt=8,rt=0,vt=ht.length;rt<vt;++rt){var St=ht[rt];if(Re===0&&(Re=je,(Ne+=Ye)>=Se&&(Ye=4*xt+4*i*(lt-1),Ne=oe+(je+xt)*(lt<<1),lt>>=1)),St===ze)Ne+=4;else{var Lt=e[Je+3*St],Wt=e[Je+3*St+1],ar=e[Je+3*St+2];Ue[Ne++]=ar,Ue[Ne++]=Wt,Ue[Ne++]=Lt,Ue[Ne++]=255}--Re}},this.decodeAndBlitFrameRGBA=function(_e,Ue){var Fe=this.frameInfo(_e),pt=Fe.width*Fe.height,ht=new Uint8Array(pt);e5(e,Fe.data_offset,ht,pt);var Je=Fe.palette_offset,ze=Fe.transparent_index;ze===null&&(ze=256);var je=Fe.width,xt=i-je,Re=je,oe=4*(Fe.y*i+Fe.x),Se=4*((Fe.y+Fe.height)*i+Fe.x),Ne=oe,Ye=4*xt;Fe.interlaced===!0&&(Ye+=4*i*7);for(var lt=8,rt=0,vt=ht.length;rt<vt;++rt){var St=ht[rt];if(Re===0&&(Re=je,(Ne+=Ye)>=Se&&(Ye=4*xt+4*i*(lt-1),Ne=oe+(je+xt)*(lt<<1),lt>>=1)),St===ze)Ne+=4;else{var Lt=e[Je+3*St],Wt=e[Je+3*St+1],ar=e[Je+3*St+2];Ue[Ne++]=Lt,Ue[Ne++]=Wt,Ue[Ne++]=ar,Ue[Ne++]=255}--Re}}}function e5(e,n,i,l){for(var h=e[n++],d=1<<h,m=d+1,o=m+1,x=h+1,E=(1<<x)-1,I=0,D=0,O=0,P=e[n++],W=new Int32Array(4096),z=null;;){for(;I<16&&P!==0;)D|=e[n++]<<I,I+=8,P===1?P=e[n++]:--P;if(I<x)break;var H=D&E;if(D>>=x,I-=x,H!==d){if(H===m)break;for(var Z=H<o?H:z,ie=0,ce=Z;ce>d;)ce=W[ce]>>8,++ie;var he=ce;if(O+ie+(Z!==H?1:0)>l)return void gs.log("Warning, gif stream longer than expected.");i[O++]=he;var Ie=O+=ie;for(Z!==H&&(i[O++]=he),ce=Z;ie--;)ce=W[ce],i[--Ie]=255&ce,ce>>=8;z!==null&&o<4096&&(W[o++]=z<<8|he,o>=E+1&&x<12&&(++x,E=E<<1|1)),z=H}else o=m+1,E=(1<<(x=h+1))-1,z=null}return O!==l&&gs.log("Warning, gif stream shorter than expected."),i}function J1(e){var n,i,l,h,d,m=Math.floor,o=new Array(64),x=new Array(64),E=new Array(64),I=new Array(64),D=new Array(65535),O=new Array(65535),P=new Array(64),W=new Array(64),z=[],H=0,Z=7,ie=new Array(64),ce=new Array(64),he=new Array(64),Ie=new Array(256),Ve=new Array(2048),Me=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],Pe=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],xe=[0,1,2,3,4,5,6,7,8,9,10,11],nt=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],pe=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],_e=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],Ue=[0,1,2,3,4,5,6,7,8,9,10,11],Fe=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],pt=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function ht(oe,Se){for(var Ne=0,Ye=0,lt=new Array,rt=1;rt<=16;rt++){for(var vt=1;vt<=oe[rt];vt++)lt[Se[Ye]]=[],lt[Se[Ye]][0]=Ne,lt[Se[Ye]][1]=rt,Ye++,Ne++;Ne*=2}return lt}function Je(oe){for(var Se=oe[0],Ne=oe[1]-1;Ne>=0;)Se&1<<Ne&&(H|=1<<Z),Ne--,--Z<0&&(H==255?(ze(255),ze(0)):ze(H),Z=7,H=0)}function ze(oe){z.push(oe)}function je(oe){ze(oe>>8&255),ze(255&oe)}function xt(oe,Se,Ne,Ye,lt){for(var rt,vt=lt[0],St=lt[240],Lt=(function(lr,Wr){var Sr,Or,Rr,On,hn,ft,de,fe,ye,qe,We=0;for(ye=0;ye<8;++ye){Sr=lr[We],Or=lr[We+1],Rr=lr[We+2],On=lr[We+3],hn=lr[We+4],ft=lr[We+5],de=lr[We+6];var Ct=Sr+(fe=lr[We+7]),yt=Sr-fe,at=Or+de,bt=Or-de,Ht=Rr+ft,Ft=Rr-ft,cr=On+hn,Jt=On-hn,fr=Ct+cr,rn=Ct-cr,Tr=at+Ht,mt=at-Ht;lr[We]=fr+Tr,lr[We+4]=fr-Tr;var tn=.707106781*(mt+rn);lr[We+2]=rn+tn,lr[We+6]=rn-tn;var Nr=.382683433*((fr=Jt+Ft)-(mt=bt+yt)),mr=.5411961*fr+Nr,Kr=1.306562965*mt+Nr,Dn=.707106781*(Tr=Ft+bt),wr=yt+Dn,Tn=yt-Dn;lr[We+5]=Tn+mr,lr[We+3]=Tn-mr,lr[We+1]=wr+Kr,lr[We+7]=wr-Kr,We+=8}for(We=0,ye=0;ye<8;++ye){Sr=lr[We],Or=lr[We+8],Rr=lr[We+16],On=lr[We+24],hn=lr[We+32],ft=lr[We+40],de=lr[We+48];var Bn=Sr+(fe=lr[We+56]),xn=Sr-fe,Di=Or+de,ai=Or-de,Yt=Rr+ft,Zn=Rr-ft,$i=On+hn,sl=On-hn,ns=Bn+$i,pr=Bn-$i,nn=Di+Yt,un=Di-Yt;lr[We]=ns+nn,lr[We+32]=ns-nn;var Ri=.707106781*(un+pr);lr[We+16]=pr+Ri,lr[We+48]=pr-Ri;var El=.382683433*((ns=sl+Zn)-(un=ai+xn)),ks=.5411961*ns+El,dn=1.306562965*un+El,ol=.707106781*(nn=Zn+ai),al=xn+ol,ec=xn-ol;lr[We+40]=ec+ks,lr[We+24]=ec-ks,lr[We+8]=al+dn,lr[We+56]=al-dn,We++}for(ye=0;ye<64;++ye)qe=lr[ye]*Wr[ye],P[ye]=qe>0?qe+.5|0:qe-.5|0;return P})(oe,Se),Wt=0;Wt<64;++Wt)W[Me[Wt]]=Lt[Wt];var ar=W[0]-Ne;Ne=W[0],ar==0?Je(Ye[0]):(Je(Ye[O[rt=32767+ar]]),Je(D[rt]));for(var hr=63;hr>0&&W[hr]==0;)hr--;if(hr==0)return Je(vt),Ne;for(var Cr,He=1;He<=hr;){for(var vr=He;W[He]==0&&He<=hr;)++He;var Ur=He-vr;if(Ur>=16){Cr=Ur>>4;for(var $r=1;$r<=Cr;++$r)Je(St);Ur&=15}rt=32767+W[He],Je(lt[(Ur<<4)+O[rt]]),Je(D[rt]),He++}return hr!=63&&Je(vt),Ne}function Re(oe){oe=Math.min(Math.max(oe,1),100),d!=oe&&((function(Se){for(var Ne=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],Ye=0;Ye<64;Ye++){var lt=m((Ne[Ye]*Se+50)/100);lt=Math.min(Math.max(lt,1),255),o[Me[Ye]]=lt}for(var rt=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],vt=0;vt<64;vt++){var St=m((rt[vt]*Se+50)/100);St=Math.min(Math.max(St,1),255),x[Me[vt]]=St}for(var Lt=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],Wt=0,ar=0;ar<8;ar++)for(var hr=0;hr<8;hr++)E[Wt]=1/(o[Me[Wt]]*Lt[ar]*Lt[hr]*8),I[Wt]=1/(x[Me[Wt]]*Lt[ar]*Lt[hr]*8),Wt++})(oe<50?Math.floor(5e3/oe):Math.floor(200-2*oe)),d=oe)}this.encode=function(oe,Se){Se&&Re(Se),z=new Array,H=0,Z=7,je(65496),je(65504),je(16),ze(74),ze(70),ze(73),ze(70),ze(0),ze(1),ze(1),ze(0),je(1),je(1),ze(0),ze(0),(function(){je(65499),je(132),ze(0);for(var Or=0;Or<64;Or++)ze(o[Or]);ze(1);for(var Rr=0;Rr<64;Rr++)ze(x[Rr])})(),(function(Or,Rr){je(65472),je(17),ze(8),je(Rr),je(Or),ze(3),ze(1),ze(17),ze(0),ze(2),ze(17),ze(1),ze(3),ze(17),ze(1)})(oe.width,oe.height),(function(){je(65476),je(418),ze(0);for(var Or=0;Or<16;Or++)ze(Pe[Or+1]);for(var Rr=0;Rr<=11;Rr++)ze(xe[Rr]);ze(16);for(var On=0;On<16;On++)ze(nt[On+1]);for(var hn=0;hn<=161;hn++)ze(pe[hn]);ze(1);for(var ft=0;ft<16;ft++)ze(_e[ft+1]);for(var de=0;de<=11;de++)ze(Ue[de]);ze(17);for(var fe=0;fe<16;fe++)ze(Fe[fe+1]);for(var ye=0;ye<=161;ye++)ze(pt[ye])})(),je(65498),je(12),ze(3),ze(1),ze(0),ze(2),ze(17),ze(3),ze(17),ze(0),ze(63),ze(0);var Ne=0,Ye=0,lt=0;H=0,Z=7,this.encode.displayName="_encode_";for(var rt,vt,St,Lt,Wt,ar,hr,Cr,He,vr=oe.data,Ur=oe.width,$r=oe.height,lr=4*Ur,Wr=0;Wr<$r;){for(rt=0;rt<lr;){for(Wt=lr*Wr+rt,hr=-1,Cr=0,He=0;He<64;He++)ar=Wt+(Cr=He>>3)*lr+(hr=4*(7&He)),Wr+Cr>=$r&&(ar-=lr*(Wr+1+Cr-$r)),rt+hr>=lr&&(ar-=rt+hr-lr+4),vt=vr[ar++],St=vr[ar++],Lt=vr[ar++],ie[He]=(Ve[vt]+Ve[St+256|0]+Ve[Lt+512|0]>>16)-128,ce[He]=(Ve[vt+768|0]+Ve[St+1024|0]+Ve[Lt+1280|0]>>16)-128,he[He]=(Ve[vt+1280|0]+Ve[St+1536|0]+Ve[Lt+1792|0]>>16)-128;Ne=xt(ie,E,Ne,n,l),Ye=xt(ce,I,Ye,i,h),lt=xt(he,I,lt,i,h),rt+=32}Wr+=8}if(Z>=0){var Sr=[];Sr[1]=Z+1,Sr[0]=(1<<Z+1)-1,Je(Sr)}return je(65497),new Uint8Array(z)},e=e||50,(function(){for(var oe=String.fromCharCode,Se=0;Se<256;Se++)Ie[Se]=oe(Se)})(),n=ht(Pe,xe),i=ht(_e,Ue),l=ht(nt,pe),h=ht(Fe,pt),(function(){for(var oe=1,Se=2,Ne=1;Ne<=15;Ne++){for(var Ye=oe;Ye<Se;Ye++)O[32767+Ye]=Ne,D[32767+Ye]=[],D[32767+Ye][1]=Ne,D[32767+Ye][0]=Ye;for(var lt=-(Se-1);lt<=-oe;lt++)O[32767+lt]=Ne,D[32767+lt]=[],D[32767+lt][1]=Ne,D[32767+lt][0]=Se-1+lt;oe<<=1,Se<<=1}})(),(function(){for(var oe=0;oe<256;oe++)Ve[oe]=19595*oe,Ve[oe+256|0]=38470*oe,Ve[oe+512|0]=7471*oe+32768,Ve[oe+768|0]=-11059*oe,Ve[oe+1024|0]=-21709*oe,Ve[oe+1280|0]=32768*oe+8421375,Ve[oe+1536|0]=-27439*oe,Ve[oe+1792|0]=-5329*oe})(),Re(e)}function Eu(e,n){if(this.pos=0,this.buffer=e,this.datav=new DataView(e.buffer),this.is_with_alpha=!!n,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function t5(e){function n(xe){if(!xe)throw Error("assert :P")}function i(xe,nt,pe){for(var _e=0;4>_e;_e++)if(xe[nt+_e]!=pe.charCodeAt(_e))return!0;return!1}function l(xe,nt,pe,_e,Ue){for(var Fe=0;Fe<Ue;Fe++)xe[nt+Fe]=pe[_e+Fe]}function h(xe,nt,pe,_e){for(var Ue=0;Ue<_e;Ue++)xe[nt+Ue]=pe}function d(xe){return new Int32Array(xe)}function m(xe,nt){for(var pe=[],_e=0;_e<xe;_e++)pe.push(new nt);return pe}function o(xe,nt){var pe=[];return(function _e(Ue,Fe,pt){for(var ht=pt[Fe],Je=0;Je<ht&&(Ue.push(pt.length>Fe+1?[]:new nt),!(pt.length<Fe+1));Je++)_e(Ue[Je],Fe+1,pt)})(pe,0,xe),pe}var x=function(){var xe=this;function nt(T,R){for(var $=1<<R-1>>>0;T&$;)$>>>=1;return $?(T&$-1)+$:T}function pe(T,R,$,te,me){n(!(te%$));do T[R+(te-=$)]=me;while(0<te)}function _e(T,R,$,te,me){if(n(2328>=me),512>=me)var we=d(512);else if((we=d(me))==null)return 0;return(function(Ce,Te,De,Ke,$e,kt){var Xe,Bt,Tt=Te,Zt=1<<De,Ut=d(16),Kt=d(16);for(n($e!=0),n(Ke!=null),n(Ce!=null),n(0<De),Bt=0;Bt<$e;++Bt){if(15<Ke[Bt])return 0;++Ut[Ke[Bt]]}if(Ut[0]==$e)return 0;for(Kt[1]=0,Xe=1;15>Xe;++Xe){if(Ut[Xe]>1<<Xe)return 0;Kt[Xe+1]=Kt[Xe]+Ut[Xe]}for(Bt=0;Bt<$e;++Bt)Xe=Ke[Bt],0<Ke[Bt]&&(kt[Kt[Xe]++]=Bt);if(Kt[15]==1)return(Ke=new Ue).g=0,Ke.value=kt[0],pe(Ce,Tt,1,Zt,Ke),Zt;var $t,tr=-1,er=Zt-1,sn=0,zr=1,Cn=1,Zr=1<<De;for(Bt=0,Xe=1,$e=2;Xe<=De;++Xe,$e<<=1){if(zr+=Cn<<=1,0>(Cn-=Ut[Xe]))return 0;for(;0<Ut[Xe];--Ut[Xe])(Ke=new Ue).g=Xe,Ke.value=kt[Bt++],pe(Ce,Tt+sn,$e,Zr,Ke),sn=nt(sn,Xe)}for(Xe=De+1,$e=2;15>=Xe;++Xe,$e<<=1){if(zr+=Cn<<=1,0>(Cn-=Ut[Xe]))return 0;for(;0<Ut[Xe];--Ut[Xe]){if(Ke=new Ue,(sn&er)!=tr){for(Tt+=Zr,$t=1<<(tr=Xe)-De;15>tr&&!(0>=($t-=Ut[tr]));)++tr,$t<<=1;Zt+=Zr=1<<($t=tr-De),Ce[Te+(tr=sn&er)].g=$t+De,Ce[Te+tr].value=Tt-Te-tr}Ke.g=Xe-De,Ke.value=kt[Bt++],pe(Ce,Tt+(sn>>De),$e,Zr,Ke),sn=nt(sn,Xe)}}return zr!=2*Kt[15]-1?0:Zt})(T,R,$,te,me,we)}function Ue(){this.value=this.g=0}function Fe(){this.value=this.g=0}function pt(){this.G=m(5,Ue),this.H=d(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=m(Ws,Fe)}function ht(T,R,$,te){n(T!=null),n(R!=null),n(2147483648>te),T.Ca=254,T.I=0,T.b=-8,T.Ka=0,T.oa=R,T.pa=$,T.Jd=R,T.Yc=$+te,T.Zc=4<=te?$+te-4+1:$,vt(T)}function Je(T,R){for(var $=0;0<R--;)$|=Lt(T,128)<<R;return $}function ze(T,R){var $=Je(T,R);return St(T)?-$:$}function je(T,R,$,te){var me,we=0;for(n(T!=null),n(R!=null),n(4294967288>te),T.Sb=te,T.Ra=0,T.u=0,T.h=0,4<te&&(te=4),me=0;me<te;++me)we+=R[$+me]<<8*me;T.Ra=we,T.bb=te,T.oa=R,T.pa=$}function xt(T){for(;8<=T.u&&T.bb<T.Sb;)T.Ra>>>=8,T.Ra+=T.oa[T.pa+T.bb]<<ga-8>>>0,++T.bb,T.u-=8;Ye(T)&&(T.h=1,T.u=0)}function Re(T,R){if(n(0<=R),!T.h&&R<=Co){var $=Ne(T)&qo[R];return T.u+=R,xt(T),$}return T.h=1,T.u=0}function oe(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function Se(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function Ne(T){return T.Ra>>>(T.u&ga-1)>>>0}function Ye(T){return n(T.bb<=T.Sb),T.h||T.bb==T.Sb&&T.u>ga}function lt(T,R){T.u=R,T.h=Ye(T)}function rt(T){T.u>=fl&&(n(T.u>=fl),xt(T))}function vt(T){n(T!=null&&T.oa!=null),T.pa<T.Zc?(T.I=(T.oa[T.pa++]|T.I<<8)>>>0,T.b+=8):(n(T!=null&&T.oa!=null),T.pa<T.Yc?(T.b+=8,T.I=T.oa[T.pa++]|T.I<<8):T.Ka?T.b=0:(T.I<<=8,T.b+=8,T.Ka=1))}function St(T){return Je(T,1)}function Lt(T,R){var $=T.Ca;0>T.b&&vt(T);var te=T.b,me=$*R>>>8,we=(T.I>>>te>me)+0;for(we?($-=me,T.I-=me+1<<te>>>0):$=me+1,te=$,me=0;256<=te;)me+=8,te>>=8;return te=7^me+Ma[te],T.b-=te,T.Ca=($<<te)-1,we}function Wt(T,R,$){T[R+0]=$>>24&255,T[R+1]=$>>16&255,T[R+2]=$>>8&255,T[R+3]=255&$}function ar(T,R){return T[R+0]|T[R+1]<<8}function hr(T,R){return ar(T,R)|T[R+2]<<16}function Cr(T,R){return ar(T,R)|ar(T,R+2)<<16}function He(T,R){var $=1<<R;return n(T!=null),n(0<R),T.X=d($),T.X==null?0:(T.Mb=32-R,T.Xa=R,1)}function vr(T,R){n(T!=null),n(R!=null),n(T.Xa==R.Xa),l(R.X,0,T.X,0,1<<R.Xa)}function Ur(){this.X=[],this.Xa=this.Mb=0}function $r(T,R,$,te){n($!=null),n(te!=null);var me=$[0],we=te[0];return me==0&&(me=(T*we+R/2)/R),we==0&&(we=(R*me+T/2)/T),0>=me||0>=we?0:($[0]=me,te[0]=we,1)}function lr(T,R){return T+(1<<R)-1>>>R}function Wr(T,R){return((4278255360&T)+(4278255360&R)>>>0&4278255360)+((16711935&T)+(16711935&R)>>>0&16711935)>>>0}function Sr(T,R){xe[R]=function($,te,me,we,Ce,Te,De){var Ke;for(Ke=0;Ke<Ce;++Ke){var $e=xe[T](Te[De+Ke-1],me,we+Ke);Te[De+Ke]=Wr($[te+Ke],$e)}}}function Or(){this.ud=this.hd=this.jd=0}function Rr(T,R){return((4278124286&(T^R))>>>1)+(T&R)>>>0}function On(T){return 0<=T&&256>T?T:0>T?0:255<T?255:void 0}function hn(T,R){return On(T+(T-R+.5>>1))}function ft(T,R,$){return Math.abs(R-$)-Math.abs(T-$)}function de(T,R,$,te,me,we,Ce){for(te=we[Ce-1],$=0;$<me;++$)we[Ce+$]=te=Wr(T[R+$],te)}function fe(T,R,$,te,me){var we;for(we=0;we<$;++we){var Ce=T[R+we],Te=Ce>>8&255,De=16711935&(De=(De=16711935&Ce)+((Te<<16)+Te));te[me+we]=(4278255360&Ce)+De>>>0}}function ye(T,R){R.jd=255&T,R.hd=T>>8&255,R.ud=T>>16&255}function qe(T,R,$,te,me,we){var Ce;for(Ce=0;Ce<te;++Ce){var Te=R[$+Ce],De=Te>>>8,Ke=Te,$e=255&($e=($e=Te>>>16)+((T.jd<<24>>24)*(De<<24>>24)>>>5));Ke=255&(Ke=(Ke+=(T.hd<<24>>24)*(De<<24>>24)>>>5)+((T.ud<<24>>24)*($e<<24>>24)>>>5)),me[we+Ce]=(4278255360&Te)+($e<<16)+Ke}}function We(T,R,$,te,me){xe[R]=function(we,Ce,Te,De,Ke,$e,kt,Xe,Bt){for(De=kt;De<Xe;++De)for(kt=0;kt<Bt;++kt)Ke[$e++]=me(Te[te(we[Ce++])])},xe[T]=function(we,Ce,Te,De,Ke,$e,kt){var Xe=8>>we.b,Bt=we.Ea,Tt=we.K[0],Zt=we.w;if(8>Xe)for(we=(1<<we.b)-1,Zt=(1<<Xe)-1;Ce<Te;++Ce){var Ut,Kt=0;for(Ut=0;Ut<Bt;++Ut)Ut&we||(Kt=te(De[Ke++])),$e[kt++]=me(Tt[Kt&Zt]),Kt>>=Xe}else xe["VP8LMapColor"+$](De,Ke,Tt,Zt,$e,kt,Ce,Te,Bt)}}function Ct(T,R,$,te,me){for($=R+$;R<$;){var we=T[R++];te[me++]=we>>16&255,te[me++]=we>>8&255,te[me++]=255&we}}function yt(T,R,$,te,me){for($=R+$;R<$;){var we=T[R++];te[me++]=we>>16&255,te[me++]=we>>8&255,te[me++]=255&we,te[me++]=we>>24&255}}function at(T,R,$,te,me){for($=R+$;R<$;){var we=(Ce=T[R++])>>16&240|Ce>>12&15,Ce=240&Ce|Ce>>28&15;te[me++]=we,te[me++]=Ce}}function bt(T,R,$,te,me){for($=R+$;R<$;){var we=(Ce=T[R++])>>16&248|Ce>>13&7,Ce=Ce>>5&224|Ce>>3&31;te[me++]=we,te[me++]=Ce}}function Ht(T,R,$,te,me){for($=R+$;R<$;){var we=T[R++];te[me++]=255&we,te[me++]=we>>8&255,te[me++]=we>>16&255}}function Ft(T,R,$,te,me,we){if(we==0)for($=R+$;R<$;)Wt(te,((we=T[R++])[0]>>24|we[1]>>8&65280|we[2]<<8&16711680|we[3]<<24)>>>0),me+=32;else l(te,me,T,R,$)}function cr(T,R){xe[R][0]=xe[T+"0"],xe[R][1]=xe[T+"1"],xe[R][2]=xe[T+"2"],xe[R][3]=xe[T+"3"],xe[R][4]=xe[T+"4"],xe[R][5]=xe[T+"5"],xe[R][6]=xe[T+"6"],xe[R][7]=xe[T+"7"],xe[R][8]=xe[T+"8"],xe[R][9]=xe[T+"9"],xe[R][10]=xe[T+"10"],xe[R][11]=xe[T+"11"],xe[R][12]=xe[T+"12"],xe[R][13]=xe[T+"13"],xe[R][14]=xe[T+"0"],xe[R][15]=xe[T+"0"]}function Jt(T){return T==RA||T==uc||T==Ql||T==Qc}function fr(){this.eb=[],this.size=this.A=this.fb=0}function rn(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function Tr(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new fr,this.f.kb=new rn,this.sd=null}function mt(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function tn(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function Nr(T){return alert("todo:WebPSamplerProcessPlane"),T.T}function mr(T,R){var $=T.T,te=R.ba.f.RGBA,me=te.eb,we=te.fb+T.ka*te.A,Ce=Zs[R.ba.S],Te=T.y,De=T.O,Ke=T.f,$e=T.N,kt=T.ea,Xe=T.W,Bt=R.cc,Tt=R.dc,Zt=R.Mc,Ut=R.Nc,Kt=T.ka,$t=T.ka+T.T,tr=T.U,er=tr+1>>1;for(Kt==0?Ce(Te,De,null,null,Ke,$e,kt,Xe,Ke,$e,kt,Xe,me,we,null,null,tr):(Ce(R.ec,R.fc,Te,De,Bt,Tt,Zt,Ut,Ke,$e,kt,Xe,me,we-te.A,me,we,tr),++$);Kt+2<$t;Kt+=2)Bt=Ke,Tt=$e,Zt=kt,Ut=Xe,$e+=T.Rc,Xe+=T.Rc,we+=2*te.A,Ce(Te,(De+=2*T.fa)-T.fa,Te,De,Bt,Tt,Zt,Ut,Ke,$e,kt,Xe,me,we-te.A,me,we,tr);return De+=T.fa,T.j+$t<T.o?(l(R.ec,R.fc,Te,De,tr),l(R.cc,R.dc,Ke,$e,er),l(R.Mc,R.Nc,kt,Xe,er),$--):1&$t||Ce(Te,De,null,null,Ke,$e,kt,Xe,Ke,$e,kt,Xe,me,we+te.A,null,null,tr),$}function Kr(T,R,$){var te=T.F,me=[T.J];if(te!=null){var we=T.U,Ce=R.ba.S,Te=Ce==lu||Ce==Ql;R=R.ba.f.RGBA;var De=[0],Ke=T.ka;De[0]=T.T,T.Kb&&(Ke==0?--De[0]:(--Ke,me[0]-=T.width),T.j+T.ka+T.T==T.o&&(De[0]=T.o-T.j-Ke));var $e=R.eb;Ke=R.fb+Ke*R.A,T=yl(te,me[0],T.width,we,De,$e,Ke+(Te?0:3),R.A),n($==De),T&&Jt(Ce)&&Dc($e,Ke,Te,we,De,R.A)}return 0}function Dn(T){var R=T.ma,$=R.ba.S,te=11>$,me=$==Nc||$==Ac||$==lu||$==Ii||$==12||Jt($);if(R.memory=null,R.Ib=null,R.Jb=null,R.Nd=null,!oA(R.Oa,T,me?11:12))return 0;if(me&&Jt($)&&Ta(),T.da)alert("todo:use_scaling");else{if(te){if(R.Ib=Nr,T.Kb){if($=T.U+1>>1,R.memory=d(T.U+2*$),R.memory==null)return 0;R.ec=R.memory,R.fc=0,R.cc=R.ec,R.dc=R.fc+T.U,R.Mc=R.cc,R.Nc=R.dc+$,R.Ib=mr,Ta()}}else alert("todo:EmitYUV");me&&(R.Jb=Kr,te&&fa())}if(te&&!Ns){for(T=0;256>T;++T)Xs[T]=89858*(T-128)+Qa>>Ol,go[T]=-22014*(T-128)+Qa,Vc[T]=-45773*(T-128),jc[T]=113618*(T-128)+Qa>>Ol;for(T=li;T<Xn;++T)R=76283*(T-16)+Qa>>Ol,du[T-li]=fs(R,255),Ou[T-li]=fs(R+8>>4,15);Ns=1}return 1}function wr(T){var R=T.ma,$=T.U,te=T.T;return n(!(1&T.ka)),0>=$||0>=te?0:($=R.Ib(T,R),R.Jb!=null&&R.Jb(T,R,$),R.Dc+=$,1)}function Tn(T){T.ma.memory=null}function Bn(T,R,$,te){return Re(T,8)!=47?0:(R[0]=Re(T,14)+1,$[0]=Re(T,14)+1,te[0]=Re(T,1),Re(T,3)!=0?0:!T.h)}function xn(T,R){if(4>T)return T+1;var $=T-2>>1;return(2+(1&T)<<$)+Re(R,$)+1}function Di(T,R){return 120<R?R-120:1<=($=(($=uA[R-1])>>4)*T+(8-(15&$)))?$:1;var $}function ai(T,R,$){var te=Ne($),me=T[R+=255&te].g-8;return 0<me&&(lt($,$.u+8),te=Ne($),R+=T[R].value,R+=te&(1<<me)-1),lt($,$.u+T[R].g),T[R].value}function Yt(T,R,$){return $.g+=T.g,$.value+=T.value<<R>>>0,n(8>=$.g),T.g}function Zn(T,R,$){var te=T.xc;return n((R=te==0?0:T.vc[T.md*($>>te)+(R>>te)])<T.Wb),T.Ya[R]}function $i(T,R,$,te){var me=T.ab,we=T.c*R,Ce=T.C;R=Ce+R;var Te=$,De=te;for(te=T.Ta,$=T.Ua;0<me--;){var Ke=T.gc[me],$e=Ce,kt=R,Xe=Te,Bt=De,Tt=(De=te,Te=$,Ke.Ea);switch(n($e<kt),n(kt<=Ke.nc),Ke.hc){case 2:ss(Xe,Bt,(kt-$e)*Tt,De,Te);break;case 0:var Zt=$e,Ut=kt,Kt=De,$t=Te,tr=(Zr=Ke).Ea;Zt==0&&(oc(Xe,Bt,null,null,1,Kt,$t),de(Xe,Bt+1,0,0,tr-1,Kt,$t+1),Bt+=tr,$t+=tr,++Zt);for(var er=1<<Zr.b,sn=er-1,zr=lr(tr,Zr.b),Cn=Zr.K,Zr=Zr.w+(Zt>>Zr.b)*zr;Zt<Ut;){var Qn=Cn,Ni=Zr,Sn=1;for(kl(Xe,Bt,Kt,$t-tr,1,Kt,$t);Sn<tr;){var Hr=(Sn&~sn)+er;Hr>tr&&(Hr=tr),(0,Ul[Qn[Ni++]>>8&15])(Xe,Bt+ +Sn,Kt,$t+Sn-tr,Hr-Sn,Kt,$t+Sn),Sn=Hr}Bt+=tr,$t+=tr,++Zt&sn||(Zr+=zr)}kt!=Ke.nc&&l(De,Te-Tt,De,Te+(kt-$e-1)*Tt,Tt);break;case 1:for(Tt=Xe,Ut=Bt,tr=(Xe=Ke.Ea)-($t=Xe&~(Kt=(Bt=1<<Ke.b)-1)),Zt=lr(Xe,Ke.b),er=Ke.K,Ke=Ke.w+($e>>Ke.b)*Zt;$e<kt;){for(sn=er,zr=Ke,Cn=new Or,Zr=Ut+$t,Qn=Ut+Xe;Ut<Zr;)ye(sn[zr++],Cn),ho(Cn,Tt,Ut,Bt,De,Te),Ut+=Bt,Te+=Bt;Ut<Qn&&(ye(sn[zr++],Cn),ho(Cn,Tt,Ut,tr,De,Te),Ut+=tr,Te+=tr),++$e&Kt||(Ke+=Zt)}break;case 3:if(Xe==De&&Bt==Te&&0<Ke.b){for(Ut=De,Xe=Tt=Te+(kt-$e)*Tt-($t=(kt-$e)*lr(Ke.Ea,Ke.b)),Bt=De,Kt=Te,Zt=[],$t=(tr=$t)-1;0<=$t;--$t)Zt[$t]=Bt[Kt+$t];for($t=tr-1;0<=$t;--$t)Ut[Xe+$t]=Zt[$t];pl(Ke,$e,kt,De,Tt,De,Te)}else pl(Ke,$e,kt,Xe,Bt,De,Te)}Te=te,De=$}De!=$&&l(te,$,Te,De,we)}function sl(T,R){var $=T.V,te=T.Ba+T.c*T.C,me=R-T.C;if(n(R<=T.l.o),n(16>=me),0<me){var we=T.l,Ce=T.Ta,Te=T.Ua,De=we.width;if($i(T,me,$,te),me=Te=[Te],n(($=T.C)<(te=R)),n(we.v<we.va),te>we.o&&(te=we.o),$<we.j){var Ke=we.j-$;$=we.j,me[0]+=Ke*De}if($>=te?$=0:(me[0]+=4*we.v,we.ka=$-we.j,we.U=we.va-we.v,we.T=te-$,$=1),$){if(Te=Te[0],11>($=T.ca).S){var $e=$.f.RGBA,kt=(te=$.S,me=we.U,we=we.T,Ke=$e.eb,$e.A),Xe=we;for($e=$e.fb+T.Ma*$e.A;0<Xe--;){var Bt=Ce,Tt=Te,Zt=me,Ut=Ke,Kt=$e;switch(te){case AA:ac(Bt,Tt,Zt,Ut,Kt);break;case Nc:gl(Bt,Tt,Zt,Ut,Kt);break;case RA:gl(Bt,Tt,Zt,Ut,Kt),Dc(Ut,Kt,0,Zt,1,0);break;case ch:Nl(Bt,Tt,Zt,Ut,Kt);break;case Ac:Ft(Bt,Tt,Zt,Ut,Kt,1);break;case uc:Ft(Bt,Tt,Zt,Ut,Kt,1),Dc(Ut,Kt,0,Zt,1,0);break;case lu:Ft(Bt,Tt,Zt,Ut,Kt,0);break;case Ql:Ft(Bt,Tt,Zt,Ut,Kt,0),Dc(Ut,Kt,1,Zt,1,0);break;case Ii:Dl(Bt,Tt,Zt,Ut,Kt);break;case Qc:Dl(Bt,Tt,Zt,Ut,Kt),au(Ut,Kt,Zt,1,0);break;case cu:Rl(Bt,Tt,Zt,Ut,Kt);break;default:n(0)}Te+=De,$e+=kt}T.Ma+=we}else alert("todo:EmitRescaledRowsYUVA");n(T.Ma<=$.height)}}T.C=R,n(T.C<=T.i)}function ns(T){var R;if(0<T.ua)return 0;for(R=0;R<T.Wb;++R){var $=T.Ya[R].G,te=T.Ya[R].H;if(0<$[1][te[1]+0].g||0<$[2][te[2]+0].g||0<$[3][te[3]+0].g)return 0}return 1}function pr(T,R,$,te,me,we){if(T.Z!=0){var Ce=T.qd,Te=T.rd;for(n(Rs[T.Z]!=null);R<$;++R)Rs[T.Z](Ce,Te,te,me,te,me,we),Ce=te,Te=me,me+=we;T.qd=Ce,T.rd=Te}}function nn(T,R){var $=T.l.ma,te=$.Z==0||$.Z==1?T.l.j:T.C;if(te=T.C<te?te:T.C,n(R<=T.l.o),R>te){var me=T.l.width,we=$.ca,Ce=$.tb+me*te,Te=T.V,De=T.Ba+T.c*te,Ke=T.gc;n(T.ab==1),n(Ke[0].hc==3),ya(Ke[0],te,R,Te,De,we,Ce),pr($,te,R,we,Ce,me)}T.C=T.Ma=R}function un(T,R,$,te,me,we,Ce){var Te=T.$/te,De=T.$%te,Ke=T.m,$e=T.s,kt=$+T.$,Xe=kt;me=$+te*me;var Bt=$+te*we,Tt=280+$e.ua,Zt=T.Pb?Te:16777216,Ut=0<$e.ua?$e.Wa:null,Kt=$e.wc,$t=kt<Bt?Zn($e,De,Te):null;n(T.C<we),n(Bt<=me);var tr=!1;e:for(;;){for(;tr||kt<Bt;){var er=0;if(Te>=Zt){var sn=kt-$;n((Zt=T).Pb),Zt.wd=Zt.m,Zt.xd=sn,0<Zt.s.ua&&vr(Zt.s.Wa,Zt.s.vb),Zt=Te+QA}if(De&Kt||($t=Zn($e,De,Te)),n($t!=null),$t.Qb&&(R[kt]=$t.qb,tr=!0),!tr)if(rt(Ke),$t.jc){er=Ke,sn=R;var zr=kt,Cn=$t.pd[Ne(er)&Ws-1];n($t.jc),256>Cn.g?(lt(er,er.u+Cn.g),sn[zr]=Cn.value,er=0):(lt(er,er.u+Cn.g-256),n(256<=Cn.value),er=Cn.value),er==0&&(tr=!0)}else er=ai($t.G[0],$t.H[0],Ke);if(Ke.h)break;if(tr||256>er){if(!tr)if($t.nd)R[kt]=($t.qb|er<<8)>>>0;else{if(rt(Ke),tr=ai($t.G[1],$t.H[1],Ke),rt(Ke),sn=ai($t.G[2],$t.H[2],Ke),zr=ai($t.G[3],$t.H[3],Ke),Ke.h)break;R[kt]=(zr<<24|tr<<16|er<<8|sn)>>>0}if(tr=!1,++kt,++De>=te&&(De=0,++Te,Ce!=null&&Te<=we&&!(Te%16)&&Ce(T,Te),Ut!=null))for(;Xe<kt;)er=R[Xe++],Ut.X[(506832829*er&4294967295)>>>Ut.Mb]=er}else if(280>er){if(er=xn(er-256,Ke),sn=ai($t.G[4],$t.H[4],Ke),rt(Ke),sn=Di(te,sn=xn(sn,Ke)),Ke.h)break;if(kt-$<sn||me-kt<er)break e;for(zr=0;zr<er;++zr)R[kt+zr]=R[kt+zr-sn];for(kt+=er,De+=er;De>=te;)De-=te,++Te,Ce!=null&&Te<=we&&!(Te%16)&&Ce(T,Te);if(n(kt<=me),De&Kt&&($t=Zn($e,De,Te)),Ut!=null)for(;Xe<kt;)er=R[Xe++],Ut.X[(506832829*er&4294967295)>>>Ut.Mb]=er}else{if(!(er<Tt))break e;for(tr=er-280,n(Ut!=null);Xe<kt;)er=R[Xe++],Ut.X[(506832829*er&4294967295)>>>Ut.Mb]=er;er=kt,n(!(tr>>>(sn=Ut).Xa)),R[er]=sn.X[tr],tr=!0}tr||n(Ke.h==Ye(Ke))}if(T.Pb&&Ke.h&&kt<me)n(T.m.h),T.a=5,T.m=T.wd,T.$=T.xd,0<T.s.ua&&vr(T.s.vb,T.s.Wa);else{if(Ke.h)break e;Ce?.(T,Te>we?we:Te),T.a=0,T.$=kt-$}return 1}return T.a=3,0}function Ri(T){n(T!=null),T.vc=null,T.yc=null,T.Ya=null;var R=T.Wa;R!=null&&(R.X=null),T.vb=null,n(T!=null)}function El(){var T=new gn;return T==null?null:(T.a=0,T.xb=co,cr("Predictor","VP8LPredictors"),cr("Predictor","VP8LPredictors_C"),cr("PredictorAdd","VP8LPredictorsAdd"),cr("PredictorAdd","VP8LPredictorsAdd_C"),ss=fe,ho=qe,ac=Ct,gl=yt,Dl=at,Rl=bt,Nl=Ht,xe.VP8LMapColor32b=ml,xe.VP8LMapColor8b=Pc,T)}function ks(T,R,$,te,me){var we=1,Ce=[T],Te=[R],De=te.m,Ke=te.s,$e=null,kt=0;e:for(;;){if($)for(;we&&Re(De,1);){var Xe=Ce,Bt=Te,Tt=te,Zt=1,Ut=Tt.m,Kt=Tt.gc[Tt.ab],$t=Re(Ut,2);if(Tt.Oc&1<<$t)we=0;else{switch(Tt.Oc|=1<<$t,Kt.hc=$t,Kt.Ea=Xe[0],Kt.nc=Bt[0],Kt.K=[null],++Tt.ab,n(4>=Tt.ab),$t){case 0:case 1:Kt.b=Re(Ut,3)+2,Zt=ks(lr(Kt.Ea,Kt.b),lr(Kt.nc,Kt.b),0,Tt,Kt.K),Kt.K=Kt.K[0];break;case 3:var tr,er=Re(Ut,8)+1,sn=16<er?0:4<er?1:2<er?2:3;if(Xe[0]=lr(Kt.Ea,sn),Kt.b=sn,tr=Zt=ks(er,1,0,Tt,Kt.K)){var zr,Cn=er,Zr=Kt,Qn=1<<(8>>Zr.b),Ni=d(Qn);if(Ni==null)tr=0;else{var Sn=Zr.K[0],Hr=Zr.w;for(Ni[0]=Zr.K[0][0],zr=1;zr<1*Cn;++zr)Ni[zr]=Wr(Sn[Hr+zr],Ni[zr-1]);for(;zr<4*Qn;++zr)Ni[zr]=0;Zr.K[0]=null,Zr.K[0]=Ni,tr=1}}Zt=tr;break;case 2:break;default:n(0)}we=Zt}}if(Ce=Ce[0],Te=Te[0],we&&Re(De,1)&&!(we=1<=(kt=Re(De,4))&&11>=kt)){te.a=3;break e}var Fr;if(Fr=we)t:{var pi,Mr,zn,mi=te,as=Ce,ls=Te,Qi=kt,Bs=$,Cs=mi.m,Oi=mi.s,Fn=[null],Yn=1,gr=0,xr=zc[Qi];r:for(;;){if(Bs&&Re(Cs,1)){var Ti=Re(Cs,3)+2,Vi=lr(as,Ti),ei=lr(ls,Ti),ci=Vi*ei;if(!ks(Vi,ei,0,mi,Fn))break r;for(Fn=Fn[0],Oi.xc=Ti,pi=0;pi<ci;++pi){var Rn=Fn[pi]>>8&65535;Fn[pi]=Rn,Rn>=Yn&&(Yn=Rn+1)}}if(Cs.h)break r;for(Mr=0;5>Mr;++Mr){var wi=hc[Mr];!Mr&&0<Qi&&(wi+=1<<Qi),gr<wi&&(gr=wi)}var Es=m(Yn*xr,Ue),Ys=Yn,Fo=m(Ys,pt);if(Fo==null)var ki=null;else n(65536>=Ys),ki=Fo;var In=d(gr);if(ki==null||In==null||Es==null){mi.a=1;break r}var Vn=Es;for(pi=zn=0;pi<Yn;++pi){var xi=ki[pi],Ss=xi.G,Io=xi.H,Js=0,Fs=1,Ji=0;for(Mr=0;5>Mr;++Mr){wi=hc[Mr],Ss[Mr]=Vn,Io[Mr]=zn,!Mr&&0<Qi&&(wi+=1<<Qi);i:{var za,Ha=wi,Gc=mi,ja=In,Hl=Vn,VA=zn,gi=0,Wo=Gc.m,pA=Re(Wo,1);if(h(ja,0,0,Ha),pA){var fu=Re(Wo,1)+1,jl=Re(Wo,1),Vl=Re(Wo,jl==0?1:8);ja[Vl]=1,fu==2&&(ja[Vl=Re(Wo,8)]=1);var Va=1}else{var bi=d(19),Ui=Re(Wo,4)+4;if(19<Ui){Gc.a=3;var es=0;break i}for(za=0;za<Ui;++za)bi[Du[za]]=Re(Wo,3);var Kc=void 0,Ga=void 0,qc=Gc,w=bi,r=Ha,c=ja,f=0,y=qc.m,b=8,S=m(128,Ue);n:for(;_e(S,0,7,w,19);){if(Re(y,1)){var M=2+2*Re(y,3);if((Kc=2+Re(y,M))>r)break n}else Kc=r;for(Ga=0;Ga<r&&Kc--;){rt(y);var N=S[0+(127&Ne(y))];lt(y,y.u+N.g);var j=N.value;if(16>j)c[Ga++]=j,j!=0&&(b=j);else{var q=j==16,ne=j-16,ee=NA[ne],Ae=Re(y,Oc[ne])+ee;if(Ga+Ae>r)break n;for(var ve=q?b:0;0<Ae--;)c[Ga++]=ve}}f=1;break n}f||(qc.a=3),Va=f}(Va=Va&&!Wo.h)&&(gi=_e(Hl,VA,8,ja,Ha)),Va&&gi!=0?es=gi:(Gc.a=3,es=0)}if(es==0)break r;if(Fs&&Au[Mr]==1&&(Fs=Vn[zn].g==0),Js+=Vn[zn].g,zn+=es,3>=Mr){var ke,Oe=In[0];for(ke=1;ke<wi;++ke)In[ke]>Oe&&(Oe=In[ke]);Ji+=Oe}}if(xi.nd=Fs,xi.Qb=0,Fs&&(xi.qb=(Ss[3][Io[3]+0].value<<24|Ss[1][Io[1]+0].value<<16|Ss[2][Io[2]+0].value)>>>0,Js==0&&256>Ss[0][Io[0]+0].value&&(xi.Qb=1,xi.qb+=Ss[0][Io[0]+0].value<<8)),xi.jc=!xi.Qb&&6>Ji,xi.jc){var Qe,Ge=xi;for(Qe=0;Qe<Ws;++Qe){var ot=Qe,Ze=Ge.pd[ot],ct=Ge.G[0][Ge.H[0]+ot];256<=ct.value?(Ze.g=ct.g+256,Ze.value=ct.value):(Ze.g=0,Ze.value=0,ot>>=Yt(ct,8,Ze),ot>>=Yt(Ge.G[1][Ge.H[1]+ot],16,Ze),ot>>=Yt(Ge.G[2][Ge.H[2]+ot],0,Ze),Yt(Ge.G[3][Ge.H[3]+ot],24,Ze))}}}Oi.vc=Fn,Oi.Wb=Yn,Oi.Ya=ki,Oi.yc=Es,Fr=1;break t}Fr=0}if(!(we=Fr)){te.a=3;break e}if(0<kt){if(Ke.ua=1<<kt,!He(Ke.Wa,kt)){te.a=1,we=0;break e}}else Ke.ua=0;var dt=te,it=Ce,_t=Te,Dt=dt.s,Pt=Dt.xc;if(dt.c=it,dt.i=_t,Dt.md=lr(it,Pt),Dt.wc=Pt==0?-1:(1<<Pt)-1,$){te.xb=mo;break e}if(($e=d(Ce*Te))==null){te.a=1,we=0;break e}we=(we=un(te,$e,0,Ce,Te,Te,null))&&!De.h;break e}return we?(me!=null?me[0]=$e:(n($e==null),n($)),te.$=0,$||Ri(Ke)):Ri(Ke),we}function dn(T,R){var $=T.c*T.i,te=$+R+16*R;return n(T.c<=R),T.V=d(te),T.V==null?(T.Ta=null,T.Ua=0,T.a=1,0):(T.Ta=T.V,T.Ua=T.Ba+$+R,1)}function ol(T,R){var $=T.C,te=R-$,me=T.V,we=T.Ba+T.c*$;for(n(R<=T.l.o);0<te;){var Ce=16<te?16:te,Te=T.l.ma,De=T.l.width,Ke=De*Ce,$e=Te.ca,kt=Te.tb+De*$,Xe=T.Ta,Bt=T.Ua;$i(T,Ce,me,we),kA(Xe,Bt,$e,kt,Ke),pr(Te,$,$+Ce,$e,kt,De),te-=Ce,me+=Ce*T.c,$+=Ce}n($==R),T.C=T.Ma=R}function al(){this.ub=this.yd=this.td=this.Rb=0}function ec(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function Ec(){this.Fb=this.Bb=this.Cb=0,this.Zb=d(4),this.Lb=d(4)}function fi(){this.Yb=(function(){var T=[];return(function R($,te,me){for(var we=me[te],Ce=0;Ce<we&&($.push(me.length>te+1?[]:0),!(me.length<te+1));Ce++)R($[Ce],te+1,me)})(T,0,[3,11]),T})()}function tc(){this.jb=d(3),this.Wc=o([4,8],fi),this.Xc=o([4,17],fi)}function Sl(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new d(4),this.od=new d(4)}function Ci(){this.ld=this.La=this.dd=this.tc=0}function jn(){this.Na=this.la=0}function rA(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function ll(){this.ad=d(384),this.Za=0,this.Ob=d(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function cl(){this.uc=this.M=this.Nb=0,this.wa=Array(new Ci),this.Y=0,this.ya=Array(new ll),this.aa=0,this.l=new Ba}function Us(){this.y=d(16),this.f=d(8),this.ea=d(8)}function Ro(){this.cb=this.a=0,this.sc="",this.m=new oe,this.Od=new al,this.Kc=new ec,this.ed=new Sl,this.Qa=new Ec,this.Ic=this.$c=this.Aa=0,this.D=new cl,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=m(8,oe),this.ia=0,this.pb=m(4,rA),this.Pa=new tc,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new Us),this.Hd=0,this.rb=Array(new jn),this.sb=0,this.wa=Array(new Ci),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new ll),this.L=this.aa=0,this.gd=o([4,2],Ci),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function fs(T,R){return 0>T?0:T>R?R:T}function Ba(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function IA(){var T=new Ro;return T!=null&&(T.a=0,T.sc="OK",T.cb=0,T.Xb=0,hA||(hA=Qo)),T}function Mn(T,R,$){return T.a==0&&(T.a=R,T.sc=$,T.cb=0),0}function Sc(T,R,$){return 3<=$&&T[R+0]==157&&T[R+1]==1&&T[R+2]==42}function No(T,R){if(T==null)return 0;if(T.a=0,T.sc="OK",R==null)return Mn(T,2,"null VP8Io passed to VP8GetHeaders()");var $=R.data,te=R.w,me=R.ha;if(4>me)return Mn(T,7,"Truncated header.");var we=$[te+0]|$[te+1]<<8|$[te+2]<<16,Ce=T.Od;if(Ce.Rb=!(1&we),Ce.td=we>>1&7,Ce.yd=we>>4&1,Ce.ub=we>>5,3<Ce.td)return Mn(T,3,"Incorrect keyframe parameters.");if(!Ce.yd)return Mn(T,4,"Frame not displayable.");te+=3,me-=3;var Te=T.Kc;if(Ce.Rb){if(7>me)return Mn(T,7,"cannot parse picture header");if(!Sc($,te,me))return Mn(T,3,"Bad code word");Te.c=16383&($[te+4]<<8|$[te+3]),Te.Td=$[te+4]>>6,Te.i=16383&($[te+6]<<8|$[te+5]),Te.Ud=$[te+6]>>6,te+=7,me-=7,T.za=Te.c+15>>4,T.Ub=Te.i+15>>4,R.width=Te.c,R.height=Te.i,R.Da=0,R.j=0,R.v=0,R.va=R.width,R.o=R.height,R.da=0,R.ib=R.width,R.hb=R.height,R.U=R.width,R.T=R.height,h((we=T.Pa).jb,0,255,we.jb.length),n((we=T.Qa)!=null),we.Cb=0,we.Bb=0,we.Fb=1,h(we.Zb,0,0,we.Zb.length),h(we.Lb,0,0,we.Lb)}if(Ce.ub>me)return Mn(T,7,"bad partition length");ht(we=T.m,$,te,Ce.ub),te+=Ce.ub,me-=Ce.ub,Ce.Rb&&(Te.Ld=St(we),Te.Kd=St(we)),Te=T.Qa;var De,Ke=T.Pa;if(n(we!=null),n(Te!=null),Te.Cb=St(we),Te.Cb){if(Te.Bb=St(we),St(we)){for(Te.Fb=St(we),De=0;4>De;++De)Te.Zb[De]=St(we)?ze(we,7):0;for(De=0;4>De;++De)Te.Lb[De]=St(we)?ze(we,6):0}if(Te.Bb)for(De=0;3>De;++De)Ke.jb[De]=St(we)?Je(we,8):255}else Te.Bb=0;if(we.Ka)return Mn(T,3,"cannot parse segment header");if((Te=T.ed).zd=St(we),Te.Tb=Je(we,6),Te.wb=Je(we,3),Te.Pc=St(we),Te.Pc&&St(we)){for(Ke=0;4>Ke;++Ke)St(we)&&(Te.vd[Ke]=ze(we,6));for(Ke=0;4>Ke;++Ke)St(we)&&(Te.od[Ke]=ze(we,6))}if(T.L=Te.Tb==0?0:Te.zd?1:2,we.Ka)return Mn(T,3,"cannot parse filter header");var $e=me;if(me=De=te,te=De+$e,Te=$e,T.Xb=(1<<Je(T.m,2))-1,$e<3*(Ke=T.Xb))$=7;else{for(De+=3*Ke,Te-=3*Ke,$e=0;$e<Ke;++$e){var kt=$[me+0]|$[me+1]<<8|$[me+2]<<16;kt>Te&&(kt=Te),ht(T.Jc[+$e],$,De,kt),De+=kt,Te-=kt,me+=3}ht(T.Jc[+Ke],$,De,Te),$=De<te?0:5}if($!=0)return Mn(T,$,"cannot parse partitions");for($=Je(De=T.m,7),me=St(De)?ze(De,4):0,te=St(De)?ze(De,4):0,Te=St(De)?ze(De,4):0,Ke=St(De)?ze(De,4):0,De=St(De)?ze(De,4):0,$e=T.Qa,kt=0;4>kt;++kt){if($e.Cb){var Xe=$e.Zb[kt];$e.Fb||(Xe+=$)}else{if(0<kt){T.pb[kt]=T.pb[0];continue}Xe=$}var Bt=T.pb[kt];Bt.Sc[0]=OA[fs(Xe+me,127)],Bt.Sc[1]=dc[fs(Xe+0,127)],Bt.Eb[0]=2*OA[fs(Xe+te,127)],Bt.Eb[1]=101581*dc[fs(Xe+Te,127)]>>16,8>Bt.Eb[1]&&(Bt.Eb[1]=8),Bt.Qc[0]=OA[fs(Xe+Ke,117)],Bt.Qc[1]=dc[fs(Xe+De,127)],Bt.lc=Xe+De}if(!Ce.Rb)return Mn(T,4,"Not a key frame.");for(St(we),Ce=T.Pa,$=0;4>$;++$){for(me=0;8>me;++me)for(te=0;3>te;++te)for(Te=0;11>Te;++Te)Ke=Lt(we,hu[$][me][te][Te])?Je(we,8):Ah[$][me][te][Te],Ce.Wc[$][me].Yb[te][Te]=Ke;for(me=0;17>me;++me)Ce.Xc[$][me]=Ce.Wc[$][zA[me]]}return T.kc=St(we),T.kc&&(T.Bd=Je(we,8)),T.cb=1}function Qo(T,R,$,te,me,we,Ce){var Te=R[me].Yb[$];for($=0;16>me;++me){if(!Lt(T,Te[$+0]))return me;for(;!Lt(T,Te[$+1]);)if(Te=R[++me].Yb[0],$=0,me==16)return 16;var De=R[me+1].Yb;if(Lt(T,Te[$+2])){var Ke=T,$e=0;if(Lt(Ke,(Xe=Te)[(kt=$)+3]))if(Lt(Ke,Xe[kt+6])){for(Te=0,kt=2*($e=Lt(Ke,Xe[kt+8]))+(Xe=Lt(Ke,Xe[kt+9+$e])),$e=0,Xe=Ru[kt];Xe[Te];++Te)$e+=$e+Lt(Ke,Xe[Te]);$e+=3+(8<<kt)}else Lt(Ke,Xe[kt+7])?($e=7+2*Lt(Ke,165),$e+=Lt(Ke,145)):$e=5+Lt(Ke,159);else $e=Lt(Ke,Xe[kt+4])?3+Lt(Ke,Xe[kt+5]):2;Te=De[2]}else $e=1,Te=De[1];De=Ce+dA[me],0>(Ke=T).b&&vt(Ke);var kt,Xe=Ke.b,Bt=(kt=Ke.Ca>>1)-(Ke.I>>Xe)>>31;--Ke.b,Ke.Ca+=Bt,Ke.Ca|=1,Ke.I-=(kt+1&Bt)<<Xe,we[De]=(($e^Bt)-Bt)*te[(0<me)+0]}return 16}function Fc(T){var R=T.rb[T.sb-1];R.la=0,R.Na=0,h(T.zc,0,0,T.zc.length),T.ja=0}function la(T,R,$,te,me){me=T[R+$+32*te]+(me>>3),T[R+$+32*te]=-256&me?0>me?0:255:me}function ys(T,R,$,te,me,we){la(T,R,0,$,te+me),la(T,R,1,$,te+we),la(T,R,2,$,te-we),la(T,R,3,$,te-me)}function Oo(T){return(20091*T>>16)+T}function nA(T,R,$,te){var me,we=0,Ce=d(16);for(me=0;4>me;++me){var Te=T[R+0]+T[R+8],De=T[R+0]-T[R+8],Ke=(35468*T[R+4]>>16)-Oo(T[R+12]),$e=Oo(T[R+4])+(35468*T[R+12]>>16);Ce[we+0]=Te+$e,Ce[we+1]=De+Ke,Ce[we+2]=De-Ke,Ce[we+3]=Te-$e,we+=4,R++}for(me=we=0;4>me;++me)Te=(T=Ce[we+0]+4)+Ce[we+8],De=T-Ce[we+8],Ke=(35468*Ce[we+4]>>16)-Oo(Ce[we+12]),la($,te,0,0,Te+($e=Oo(Ce[we+4])+(35468*Ce[we+12]>>16))),la($,te,1,0,De+Ke),la($,te,2,0,De-Ke),la($,te,3,0,Te-$e),we++,te+=32}function iA(T,R,$,te){var me=T[R+0]+4,we=35468*T[R+4]>>16,Ce=Oo(T[R+4]),Te=35468*T[R+1]>>16;ys($,te,0,me+Ce,T=Oo(T[R+1]),Te),ys($,te,1,me+we,T,Te),ys($,te,2,me-we,T,Te),ys($,te,3,me-Ce,T,Te)}function rc(T,R,$,te,me){nA(T,R,$,te),me&&nA(T,R+16,$,te+4)}function Ca(T,R,$,te){lc(T,R+0,$,te,1),lc(T,R+32,$,te+128,1)}function TA(T,R,$,te){var me;for(T=T[R+0]+4,me=0;4>me;++me)for(R=0;4>R;++R)la($,te,R,me,T)}function Kn(T,R,$,te){T[R+0]&&si(T,R+0,$,te),T[R+16]&&si(T,R+16,$,te+4),T[R+32]&&si(T,R+32,$,te+128),T[R+48]&&si(T,R+48,$,te+128+4)}function Fl(T,R,$,te){var me,we=d(16);for(me=0;4>me;++me){var Ce=T[R+0+me]+T[R+12+me],Te=T[R+4+me]+T[R+8+me],De=T[R+4+me]-T[R+8+me],Ke=T[R+0+me]-T[R+12+me];we[0+me]=Ce+Te,we[8+me]=Ce-Te,we[4+me]=Ke+De,we[12+me]=Ke-De}for(me=0;4>me;++me)Ce=(T=we[0+4*me]+3)+we[3+4*me],Te=we[1+4*me]+we[2+4*me],De=we[1+4*me]-we[2+4*me],Ke=T-we[3+4*me],$[te+0]=Ce+Te>>3,$[te+16]=Ke+De>>3,$[te+32]=Ce-Te>>3,$[te+48]=Ke-De>>3,te+=64}function nc(T,R,$){var te,me=R-32,we=lo,Ce=255-T[me-1];for(te=0;te<$;++te){var Te,De=we,Ke=Ce+T[R-1];for(Te=0;Te<$;++Te)T[R+Te]=De[Ke+T[me+Te]];R+=32}}function Il(T,R){nc(T,R,4)}function PA(T,R){nc(T,R,8)}function Ic(T,R){nc(T,R,16)}function ca(T,R){var $;for($=0;16>$;++$)l(T,R+32*$,T,R-32,16)}function Al(T,R){var $;for($=16;0<$;--$)h(T,R,T[R-1],16),R+=32}function an(T,R,$){var te;for(te=0;16>te;++te)h(R,$+32*te,T,16)}function Ea(T,R){var $,te=16;for($=0;16>$;++$)te+=T[R-1+32*$]+T[R+$-32];an(te>>5,T,R)}function zo(T,R){var $,te=8;for($=0;16>$;++$)te+=T[R-1+32*$];an(te>>4,T,R)}function Ho(T,R){var $,te=8;for($=0;16>$;++$)te+=T[R+$-32];an(te>>4,T,R)}function vs(T,R){an(128,T,R)}function qr(T,R,$){return T+2*R+$+2>>2}function Jn(T,R){var $,te=R-32;for(te=new Uint8Array([qr(T[te-1],T[te+0],T[te+1]),qr(T[te+0],T[te+1],T[te+2]),qr(T[te+1],T[te+2],T[te+3]),qr(T[te+2],T[te+3],T[te+4])]),$=0;4>$;++$)l(T,R+32*$,te,0,te.length)}function cn(T,R){var $=T[R-1],te=T[R-1+32],me=T[R-1+64],we=T[R-1+96];Wt(T,R+0,16843009*qr(T[R-1-32],$,te)),Wt(T,R+32,16843009*qr($,te,me)),Wt(T,R+64,16843009*qr(te,me,we)),Wt(T,R+96,16843009*qr(me,we,we))}function ii(T,R){var $,te=4;for($=0;4>$;++$)te+=T[R+$-32]+T[R-1+32*$];for(te>>=3,$=0;4>$;++$)h(T,R+32*$,te,4)}function _s(T,R){var $=T[R-1+0],te=T[R-1+32],me=T[R-1+64],we=T[R-1-32],Ce=T[R+0-32],Te=T[R+1-32],De=T[R+2-32],Ke=T[R+3-32];T[R+0+96]=qr(te,me,T[R-1+96]),T[R+1+96]=T[R+0+64]=qr($,te,me),T[R+2+96]=T[R+1+64]=T[R+0+32]=qr(we,$,te),T[R+3+96]=T[R+2+64]=T[R+1+32]=T[R+0+0]=qr(Ce,we,$),T[R+3+64]=T[R+2+32]=T[R+1+0]=qr(Te,Ce,we),T[R+3+32]=T[R+2+0]=qr(De,Te,Ce),T[R+3+0]=qr(Ke,De,Te)}function Wi(T,R){var $=T[R+1-32],te=T[R+2-32],me=T[R+3-32],we=T[R+4-32],Ce=T[R+5-32],Te=T[R+6-32],De=T[R+7-32];T[R+0+0]=qr(T[R+0-32],$,te),T[R+1+0]=T[R+0+32]=qr($,te,me),T[R+2+0]=T[R+1+32]=T[R+0+64]=qr(te,me,we),T[R+3+0]=T[R+2+32]=T[R+1+64]=T[R+0+96]=qr(me,we,Ce),T[R+3+32]=T[R+2+64]=T[R+1+96]=qr(we,Ce,Te),T[R+3+64]=T[R+2+96]=qr(Ce,Te,De),T[R+3+96]=qr(Te,De,De)}function uo(T,R){var $=T[R-1+0],te=T[R-1+32],me=T[R-1+64],we=T[R-1-32],Ce=T[R+0-32],Te=T[R+1-32],De=T[R+2-32],Ke=T[R+3-32];T[R+0+0]=T[R+1+64]=we+Ce+1>>1,T[R+1+0]=T[R+2+64]=Ce+Te+1>>1,T[R+2+0]=T[R+3+64]=Te+De+1>>1,T[R+3+0]=De+Ke+1>>1,T[R+0+96]=qr(me,te,$),T[R+0+64]=qr(te,$,we),T[R+0+32]=T[R+1+96]=qr($,we,Ce),T[R+1+32]=T[R+2+96]=qr(we,Ce,Te),T[R+2+32]=T[R+3+96]=qr(Ce,Te,De),T[R+3+32]=qr(Te,De,Ke)}function ws(T,R){var $=T[R+0-32],te=T[R+1-32],me=T[R+2-32],we=T[R+3-32],Ce=T[R+4-32],Te=T[R+5-32],De=T[R+6-32],Ke=T[R+7-32];T[R+0+0]=$+te+1>>1,T[R+1+0]=T[R+0+64]=te+me+1>>1,T[R+2+0]=T[R+1+64]=me+we+1>>1,T[R+3+0]=T[R+2+64]=we+Ce+1>>1,T[R+0+32]=qr($,te,me),T[R+1+32]=T[R+0+96]=qr(te,me,we),T[R+2+32]=T[R+1+96]=qr(me,we,Ce),T[R+3+32]=T[R+2+96]=qr(we,Ce,Te),T[R+3+64]=qr(Ce,Te,De),T[R+3+96]=qr(Te,De,Ke)}function Sa(T,R){var $=T[R-1+0],te=T[R-1+32],me=T[R-1+64],we=T[R-1+96];T[R+0+0]=$+te+1>>1,T[R+2+0]=T[R+0+32]=te+me+1>>1,T[R+2+32]=T[R+0+64]=me+we+1>>1,T[R+1+0]=qr($,te,me),T[R+3+0]=T[R+1+32]=qr(te,me,we),T[R+3+32]=T[R+1+64]=qr(me,we,we),T[R+3+64]=T[R+2+64]=T[R+0+96]=T[R+1+96]=T[R+2+96]=T[R+3+96]=we}function Fa(T,R){var $=T[R-1+0],te=T[R-1+32],me=T[R-1+64],we=T[R-1+96],Ce=T[R-1-32],Te=T[R+0-32],De=T[R+1-32],Ke=T[R+2-32];T[R+0+0]=T[R+2+32]=$+Ce+1>>1,T[R+0+32]=T[R+2+64]=te+$+1>>1,T[R+0+64]=T[R+2+96]=me+te+1>>1,T[R+0+96]=we+me+1>>1,T[R+3+0]=qr(Te,De,Ke),T[R+2+0]=qr(Ce,Te,De),T[R+1+0]=T[R+3+32]=qr($,Ce,Te),T[R+1+32]=T[R+3+64]=qr(te,$,Ce),T[R+1+64]=T[R+3+96]=qr(me,te,$),T[R+1+96]=qr(we,me,te)}function ti(T,R){var $;for($=0;8>$;++$)l(T,R+32*$,T,R-32,8)}function Aa(T,R){var $;for($=0;8>$;++$)h(T,R,T[R-1],8),R+=32}function Zi(T,R,$){var te;for(te=0;8>te;++te)h(R,$+32*te,T,8)}function ic(T,R){var $,te=8;for($=0;8>$;++$)te+=T[R+$-32]+T[R-1+32*$];Zi(te>>4,T,R)}function qs(T,R){var $,te=4;for($=0;8>$;++$)te+=T[R+$-32];Zi(te>>3,T,R)}function ul(T,R){var $,te=4;for($=0;8>$;++$)te+=T[R-1+32*$];Zi(te>>3,T,R)}function jo(T,R){Zi(128,T,R)}function ua(T,R,$){var te=T[R-$],me=T[R+0],we=3*(me-te)+So[1020+T[R-2*$]-T[R+$]],Ce=cA[112+(we+4>>3)];T[R-$]=lo[255+te+cA[112+(we+3>>3)]],T[R+0]=lo[255+me-Ce]}function sc(T,R,$,te){var me=T[R+0],we=T[R+$];return pn[255+T[R-2*$]-T[R-$]]>te||pn[255+we-me]>te}function ha(T,R,$,te){return 4*pn[255+T[R-$]-T[R+0]]+pn[255+T[R-2*$]-T[R+$]]<=te}function Nn(T,R,$,te,me){var we=T[R-3*$],Ce=T[R-2*$],Te=T[R-$],De=T[R+0],Ke=T[R+$],$e=T[R+2*$],kt=T[R+3*$];return 4*pn[255+Te-De]+pn[255+Ce-Ke]>te?0:pn[255+T[R-4*$]-we]<=me&&pn[255+we-Ce]<=me&&pn[255+Ce-Te]<=me&&pn[255+kt-$e]<=me&&pn[255+$e-Ke]<=me&&pn[255+Ke-De]<=me}function Vo(T,R,$,te){var me=2*te+1;for(te=0;16>te;++te)ha(T,R+te,$,me)&&ua(T,R+te,$)}function En(T,R,$,te){var me=2*te+1;for(te=0;16>te;++te)ha(T,R+te*$,1,me)&&ua(T,R+te*$,1)}function mn(T,R,$,te){var me;for(me=3;0<me;--me)Vo(T,R+=4*$,$,te)}function Ia(T,R,$,te){var me;for(me=3;0<me;--me)En(T,R+=4,$,te)}function bn(T,R,$,te,me,we,Ce,Te){for(we=2*we+1;0<me--;){if(Nn(T,R,$,we,Ce))if(sc(T,R,$,Te))ua(T,R,$);else{var De=T,Ke=R,$e=$,kt=De[Ke-2*$e],Xe=De[Ke-$e],Bt=De[Ke+0],Tt=De[Ke+$e],Zt=De[Ke+2*$e],Ut=27*($t=So[1020+3*(Bt-Xe)+So[1020+kt-Tt]])+63>>7,Kt=18*$t+63>>7,$t=9*$t+63>>7;De[Ke-3*$e]=lo[255+De[Ke-3*$e]+$t],De[Ke-2*$e]=lo[255+kt+Kt],De[Ke-$e]=lo[255+Xe+Ut],De[Ke+0]=lo[255+Bt-Ut],De[Ke+$e]=lo[255+Tt-Kt],De[Ke+2*$e]=lo[255+Zt-$t]}R+=te}}function Go(T,R,$,te,me,we,Ce,Te){for(we=2*we+1;0<me--;){if(Nn(T,R,$,we,Ce))if(sc(T,R,$,Te))ua(T,R,$);else{var De=T,Ke=R,$e=$,kt=De[Ke-$e],Xe=De[Ke+0],Bt=De[Ke+$e],Tt=cA[112+(4+(Zt=3*(Xe-kt))>>3)],Zt=cA[112+(Zt+3>>3)],Ut=Tt+1>>1;De[Ke-2*$e]=lo[255+De[Ke-2*$e]+Ut],De[Ke-$e]=lo[255+kt+Zt],De[Ke+0]=lo[255+Xe-Tt],De[Ke+$e]=lo[255+Bt-Ut]}R+=te}}function Ei(T,R,$,te,me,we){bn(T,R,$,1,16,te,me,we)}function ao(T,R,$,te,me,we){bn(T,R,1,$,16,te,me,we)}function da(T,R,$,te,me,we){var Ce;for(Ce=3;0<Ce;--Ce)Go(T,R+=4*$,$,1,16,te,me,we)}function V(T,R,$,te,me,we){var Ce;for(Ce=3;0<Ce;--Ce)Go(T,R+=4,1,$,16,te,me,we)}function ge(T,R,$,te,me,we,Ce,Te){bn(T,R,me,1,8,we,Ce,Te),bn($,te,me,1,8,we,Ce,Te)}function et(T,R,$,te,me,we,Ce,Te){bn(T,R,1,me,8,we,Ce,Te),bn($,te,1,me,8,we,Ce,Te)}function gt(T,R,$,te,me,we,Ce,Te){Go(T,R+4*me,me,1,8,we,Ce,Te),Go($,te+4*me,me,1,8,we,Ce,Te)}function It(T,R,$,te,me,we,Ce,Te){Go(T,R+4,1,me,8,we,Ce,Te),Go($,te+4,1,me,8,we,Ce,Te)}function Gt(){this.ba=new Tr,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new tn,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function sr(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function br(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function Vr(){this.ua=0,this.Wa=new Ur,this.vb=new Ur,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new pt,this.yc=new Ue}function gn(){this.xb=this.a=0,this.l=new Ba,this.ca=new Tr,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new Se,this.Pb=0,this.wd=new Se,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new Vr,this.ab=0,this.gc=m(4,br),this.Oc=0}function yn(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new Ba,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function An(T,R,$,te,me,we,Ce){for(T=T==null?0:T[R+0],R=0;R<Ce;++R)me[we+R]=T+$[te+R]&255,T=me[we+R]}function ji(T,R,$,te,me,we,Ce){var Te;if(T==null)An(null,null,$,te,me,we,Ce);else for(Te=0;Te<Ce;++Te)me[we+Te]=T[R+Te]+$[te+Te]&255}function is(T,R,$,te,me,we,Ce){if(T==null)An(null,null,$,te,me,we,Ce);else{var Te,De=T[R+0],Ke=De,$e=De;for(Te=0;Te<Ce;++Te)Ke=$e+(De=T[R+Te])-Ke,$e=$[te+Te]+(-256&Ke?0>Ke?0:255:Ke)&255,Ke=De,me[we+Te]=$e}}function Si(T,R,$,te){var me=R.width,we=R.o;if(n(T!=null&&R!=null),0>$||0>=te||$+te>we)return null;if(!T.Cc){if(T.ga==null){var Ce;if(T.ga=new yn,(Ce=T.ga==null)||(Ce=R.width*R.o,n(T.Gb.length==0),T.Gb=d(Ce),T.Uc=0,T.Gb==null?Ce=0:(T.mb=T.Gb,T.nb=T.Uc,T.rc=null,Ce=1),Ce=!Ce),!Ce){Ce=T.ga;var Te=T.Fa,De=T.P,Ke=T.qc,$e=T.mb,kt=T.nb,Xe=De+1,Bt=Ke-1,Tt=Ce.l;if(n(Te!=null&&$e!=null&&R!=null),Rs[0]=null,Rs[1]=An,Rs[2]=ji,Rs[3]=is,Ce.ca=$e,Ce.tb=kt,Ce.c=R.width,Ce.i=R.height,n(0<Ce.c&&0<Ce.i),1>=Ke)R=0;else if(Ce.$a=3&Te[De+0],Ce.Z=Te[De+0]>>2&3,Ce.Lc=Te[De+0]>>4&3,De=Te[De+0]>>6&3,0>Ce.$a||1<Ce.$a||4<=Ce.Z||1<Ce.Lc||De)R=0;else if(Tt.put=wr,Tt.ac=Dn,Tt.bc=Tn,Tt.ma=Ce,Tt.width=R.width,Tt.height=R.height,Tt.Da=R.Da,Tt.v=R.v,Tt.va=R.va,Tt.j=R.j,Tt.o=R.o,Ce.$a)e:{n(Ce.$a==1),R=El();t:for(;;){if(R==null){R=0;break e}if(n(Ce!=null),Ce.mc=R,R.c=Ce.c,R.i=Ce.i,R.l=Ce.l,R.l.ma=Ce,R.l.width=Ce.c,R.l.height=Ce.i,R.a=0,je(R.m,Te,Xe,Bt),!ks(Ce.c,Ce.i,1,R,null)||(R.ab==1&&R.gc[0].hc==3&&ns(R.s)?(Ce.ic=1,Te=R.c*R.i,R.Ta=null,R.Ua=0,R.V=d(Te),R.Ba=0,R.V==null?(R.a=1,R=0):R=1):(Ce.ic=0,R=dn(R,Ce.c)),!R))break t;R=1;break e}Ce.mc=null,R=0}else R=Bt>=Ce.c*Ce.i;Ce=!R}if(Ce)return null;T.ga.Lc!=1?T.Ga=0:te=we-$}n(T.ga!=null),n($+te<=we);e:{if(R=(Te=T.ga).c,we=Te.l.o,Te.$a==0){if(Xe=T.rc,Bt=T.Vc,Tt=T.Fa,De=T.P+1+$*R,Ke=T.mb,$e=T.nb+$*R,n(De<=T.P+T.qc),Te.Z!=0)for(n(Rs[Te.Z]!=null),Ce=0;Ce<te;++Ce)Rs[Te.Z](Xe,Bt,Tt,De,Ke,$e,R),Xe=Ke,Bt=$e,$e+=R,De+=R;else for(Ce=0;Ce<te;++Ce)l(Ke,$e,Tt,De,R),Xe=Ke,Bt=$e,$e+=R,De+=R;T.rc=Xe,T.Vc=Bt}else{if(n(Te.mc!=null),R=$+te,n((Ce=Te.mc)!=null),n(R<=Ce.i),Ce.C>=R)R=1;else if(Te.ic||fa(),Te.ic){Te=Ce.V,Xe=Ce.Ba,Bt=Ce.c;var Zt=Ce.i,Ut=(Tt=1,De=Ce.$/Bt,Ke=Ce.$%Bt,$e=Ce.m,kt=Ce.s,Ce.$),Kt=Bt*Zt,$t=Bt*R,tr=kt.wc,er=Ut<$t?Zn(kt,Ke,De):null;n(Ut<=Kt),n(R<=Zt),n(ns(kt));t:for(;;){for(;!$e.h&&Ut<$t;){if(Ke&tr||(er=Zn(kt,Ke,De)),n(er!=null),rt($e),256>(Zt=ai(er.G[0],er.H[0],$e)))Te[Xe+Ut]=Zt,++Ut,++Ke>=Bt&&(Ke=0,++De<=R&&!(De%16)&&nn(Ce,De));else{if(!(280>Zt)){Tt=0;break t}Zt=xn(Zt-256,$e);var sn,zr=ai(er.G[4],er.H[4],$e);if(rt($e),!(Ut>=(zr=Di(Bt,zr=xn(zr,$e)))&&Kt-Ut>=Zt)){Tt=0;break t}for(sn=0;sn<Zt;++sn)Te[Xe+Ut+sn]=Te[Xe+Ut+sn-zr];for(Ut+=Zt,Ke+=Zt;Ke>=Bt;)Ke-=Bt,++De<=R&&!(De%16)&&nn(Ce,De);Ut<$t&&Ke&tr&&(er=Zn(kt,Ke,De))}n($e.h==Ye($e))}nn(Ce,De>R?R:De);break t}!Tt||$e.h&&Ut<Kt?(Tt=0,Ce.a=$e.h?5:3):Ce.$=Ut,R=Tt}else R=un(Ce,Ce.V,Ce.Ba,Ce.c,Ce.i,R,ol);if(!R){te=0;break e}}$+te>=we&&(T.Cc=1),te=1}if(!te)return null;if(T.Cc&&((te=T.ga)!=null&&(te.mc=null),T.ga=null,0<T.Ga))return alert("todo:WebPDequantizeLevels"),null}return T.nb+$*me}function Ds(T,R,$,te,me,we){for(;0<me--;){var Ce,Te=T,De=R+($?1:0),Ke=T,$e=R+($?0:3);for(Ce=0;Ce<te;++Ce){var kt=Ke[$e+4*Ce];kt!=255&&(kt*=32897,Te[De+4*Ce+0]=Te[De+4*Ce+0]*kt>>23,Te[De+4*Ce+1]=Te[De+4*Ce+1]*kt>>23,Te[De+4*Ce+2]=Te[De+4*Ce+2]*kt>>23)}R+=we}}function Mi(T,R,$,te,me){for(;0<te--;){var we;for(we=0;we<$;++we){var Ce=T[R+2*we+0],Te=15&(Ke=T[R+2*we+1]),De=4369*Te,Ke=(240&Ke|Ke>>4)*De>>16;T[R+2*we+0]=(240&Ce|Ce>>4)*De>>16&240|(15&Ce|Ce<<4)*De>>16>>4&15,T[R+2*we+1]=240&Ke|Te}R+=me}}function xs(T,R,$,te,me,we,Ce,Te){var De,Ke,$e=255;for(Ke=0;Ke<me;++Ke){for(De=0;De<te;++De){var kt=T[R+De];we[Ce+4*De]=kt,$e&=kt}R+=$,Ce+=Te}return $e!=255}function Ko(T,R,$,te,me){var we;for(we=0;we<me;++we)$[te+we]=T[R+we]>>8}function fa(){Dc=Ds,au=Mi,yl=xs,kA=Ko}function pa(T,R,$){xe[T]=function(te,me,we,Ce,Te,De,Ke,$e,kt,Xe,Bt,Tt,Zt,Ut,Kt,$t,tr){var er,sn=tr-1>>1,zr=Te[De+0]|Ke[$e+0]<<16,Cn=kt[Xe+0]|Bt[Tt+0]<<16;n(te!=null);var Zr=3*zr+Cn+131074>>2;for(R(te[me+0],255&Zr,Zr>>16,Zt,Ut),we!=null&&(Zr=3*Cn+zr+131074>>2,R(we[Ce+0],255&Zr,Zr>>16,Kt,$t)),er=1;er<=sn;++er){var Qn=Te[De+er]|Ke[$e+er]<<16,Ni=kt[Xe+er]|Bt[Tt+er]<<16,Sn=zr+Qn+Cn+Ni+524296,Hr=Sn+2*(Qn+Cn)>>3;Zr=Hr+zr>>1,zr=(Sn=Sn+2*(zr+Ni)>>3)+Qn>>1,R(te[me+2*er-1],255&Zr,Zr>>16,Zt,Ut+(2*er-1)*$),R(te[me+2*er-0],255&zr,zr>>16,Zt,Ut+(2*er-0)*$),we!=null&&(Zr=Sn+Cn>>1,zr=Hr+Ni>>1,R(we[Ce+2*er-1],255&Zr,Zr>>16,Kt,$t+(2*er-1)*$),R(we[Ce+2*er+0],255&zr,zr>>16,Kt,$t+(2*er+0)*$)),zr=Qn,Cn=Ni}1&tr||(Zr=3*zr+Cn+131074>>2,R(te[me+tr-1],255&Zr,Zr>>16,Zt,Ut+(tr-1)*$),we!=null&&(Zr=3*Cn+zr+131074>>2,R(we[Ce+tr-1],255&Zr,Zr>>16,Kt,$t+(tr-1)*$)))}}function Ta(){Zs[AA]=Nu,Zs[Nc]=Da,Zs[ch]=Hc,Zs[Ac]=Ra,Zs[lu]=Na,Zs[Ii]=HA,Zs[cu]=Qu,Zs[RA]=Da,Zs[uc]=Ra,Zs[Ql]=Na,Zs[Qc]=HA}function hl(T){return T&-16384?0>T?0:255:T>>zl}function Fi(T,R){return hl((19077*T>>8)+(26149*R>>8)-14234)}function Tc(T,R,$){return hl((19077*T>>8)-(6419*R>>8)-(13320*$>>8)+8708)}function ma(T,R){return hl((19077*T>>8)+(33050*R>>8)-17685)}function Pa(T,R,$,te,me){te[me+0]=Fi(T,$),te[me+1]=Tc(T,R,$),te[me+2]=ma(T,R)}function Xi(T,R,$,te,me){te[me+0]=ma(T,R),te[me+1]=Tc(T,R,$),te[me+2]=Fi(T,$)}function sA(T,R,$,te,me){var we=Tc(T,R,$);R=we<<3&224|ma(T,R)>>3,te[me+0]=248&Fi(T,$)|we>>5,te[me+1]=R}function Tl(T,R,$,te,me){var we=240&ma(T,R)|15;te[me+0]=240&Fi(T,$)|Tc(T,R,$)>>4,te[me+1]=we}function ou(T,R,$,te,me){te[me+0]=255,Pa(T,R,$,te,me+1)}function Pl(T,R,$,te,me){Xi(T,R,$,te,me),te[me+3]=255}function $s(T,R,$,te,me){Pa(T,R,$,te,me),te[me+3]=255}function La(T,R,$){xe[T]=function(te,me,we,Ce,Te,De,Ke,$e,kt){for(var Xe=$e+(-2&kt)*$;$e!=Xe;)R(te[me+0],we[Ce+0],Te[De+0],Ke,$e),R(te[me+1],we[Ce+0],Te[De+0],Ke,$e+$),me+=2,++Ce,++De,$e+=2*$;1&kt&&R(te[me+0],we[Ce+0],Te[De+0],Ke,$e)}}function dl(T,R,$){return $==0?T==0?R==0?6:5:R==0?4:0:$}function LA(T,R,$,te,me){switch(T>>>30){case 3:lc(R,$,te,me,0);break;case 2:os(R,$,te,me);break;case 1:si(R,$,te,me)}}function Bo(T,R){var $,te,me=R.M,we=R.Nb,Ce=T.oc,Te=T.pc+40,De=T.oc,Ke=T.pc+584,$e=T.oc,kt=T.pc+600;for($=0;16>$;++$)Ce[Te+32*$-1]=129;for($=0;8>$;++$)De[Ke+32*$-1]=129,$e[kt+32*$-1]=129;for(0<me?Ce[Te-1-32]=De[Ke-1-32]=$e[kt-1-32]=129:(h(Ce,Te-32-1,127,21),h(De,Ke-32-1,127,9),h($e,kt-32-1,127,9)),te=0;te<T.za;++te){var Xe=R.ya[R.aa+te];if(0<te){for($=-1;16>$;++$)l(Ce,Te+32*$-4,Ce,Te+32*$+12,4);for($=-1;8>$;++$)l(De,Ke+32*$-4,De,Ke+32*$+4,4),l($e,kt+32*$-4,$e,kt+32*$+4,4)}var Bt=T.Gd,Tt=T.Hd+te,Zt=Xe.ad,Ut=Xe.Hc;if(0<me&&(l(Ce,Te-32,Bt[Tt].y,0,16),l(De,Ke-32,Bt[Tt].f,0,8),l($e,kt-32,Bt[Tt].ea,0,8)),Xe.Za){var Kt=Ce,$t=Te-32+16;for(0<me&&(te>=T.za-1?h(Kt,$t,Bt[Tt].y[15],4):l(Kt,$t,Bt[Tt+1].y,0,4)),$=0;4>$;$++)Kt[$t+128+$]=Kt[$t+256+$]=Kt[$t+384+$]=Kt[$t+0+$];for($=0;16>$;++$,Ut<<=2)Kt=Ce,$t=Te+fA[$],va[Xe.Ob[$]](Kt,$t),LA(Ut,Zt,16*+$,Kt,$t)}else if(Kt=dl(te,me,Xe.Ob[0]),po[Kt](Ce,Te),Ut!=0)for($=0;16>$;++$,Ut<<=2)LA(Ut,Zt,16*+$,Ce,Te+fA[$]);for($=Xe.Gc,Kt=dl(te,me,Xe.Dd),$n[Kt](De,Ke),$n[Kt]($e,kt),Ut=Zt,Kt=De,$t=Ke,255&(Xe=0|$)&&(170&Xe?Eo(Ut,256,Kt,$t):_i(Ut,256,Kt,$t)),Xe=$e,Ut=kt,255&($>>=8)&&(170&$?Eo(Zt,320,Xe,Ut):_i(Zt,320,Xe,Ut)),me<T.Ub-1&&(l(Bt[Tt].y,0,Ce,Te+480,16),l(Bt[Tt].f,0,De,Ke+224,8),l(Bt[Tt].ea,0,$e,kt+224,8)),$=8*we*T.B,Bt=T.sa,Tt=T.ta+16*te+16*we*T.R,Zt=T.qa,Xe=T.ra+8*te+$,Ut=T.Ha,Kt=T.Ia+8*te+$,$=0;16>$;++$)l(Bt,Tt+$*T.R,Ce,Te+32*$,16);for($=0;8>$;++$)l(Zt,Xe+$*T.B,De,Ke+32*$,8),l(Ut,Kt+$*T.B,$e,kt+32*$,8)}}function Ll(T,R,$,te,me,we,Ce,Te,De){var Ke=[0],$e=[0],kt=0,Xe=De!=null?De.kd:0,Bt=De??new sr;if(T==null||12>$)return 7;Bt.data=T,Bt.w=R,Bt.ha=$,R=[R],$=[$],Bt.gb=[Bt.gb];e:{var Tt=R,Zt=$,Ut=Bt.gb;if(n(T!=null),n(Zt!=null),n(Ut!=null),Ut[0]=0,12<=Zt[0]&&!i(T,Tt[0],"RIFF")){if(i(T,Tt[0]+8,"WEBP")){Ut=3;break e}var Kt=Cr(T,Tt[0]+4);if(12>Kt||4294967286<Kt){Ut=3;break e}if(Xe&&Kt>Zt[0]-8){Ut=7;break e}Ut[0]=Kt,Tt[0]+=12,Zt[0]-=12}Ut=0}if(Ut!=0)return Ut;for(Kt=0<Bt.gb[0],$=$[0];;){e:{var $t=T;Zt=R,Ut=$;var tr=Ke,er=$e,sn=Tt=[0];if((Zr=kt=[kt])[0]=0,8>Ut[0])Ut=7;else{if(!i($t,Zt[0],"VP8X")){if(Cr($t,Zt[0]+4)!=10){Ut=3;break e}if(18>Ut[0]){Ut=7;break e}var zr=Cr($t,Zt[0]+8),Cn=1+hr($t,Zt[0]+12);if(2147483648<=Cn*($t=1+hr($t,Zt[0]+15))){Ut=3;break e}sn!=null&&(sn[0]=zr),tr!=null&&(tr[0]=Cn),er!=null&&(er[0]=$t),Zt[0]+=18,Ut[0]-=18,Zr[0]=1}Ut=0}}if(kt=kt[0],Tt=Tt[0],Ut!=0)return Ut;if(Zt=!!(2&Tt),!Kt&&kt)return 3;if(we!=null&&(we[0]=!!(16&Tt)),Ce!=null&&(Ce[0]=Zt),Te!=null&&(Te[0]=0),Ce=Ke[0],Tt=$e[0],kt&&Zt&&De==null){Ut=0;break}if(4>$){Ut=7;break}if(Kt&&kt||!Kt&&!kt&&!i(T,R[0],"ALPH")){$=[$],Bt.na=[Bt.na],Bt.P=[Bt.P],Bt.Sa=[Bt.Sa];e:{zr=T,Ut=R,Kt=$;var Zr=Bt.gb;tr=Bt.na,er=Bt.P,sn=Bt.Sa,Cn=22,n(zr!=null),n(Kt!=null),$t=Ut[0];var Qn=Kt[0];for(n(tr!=null),n(sn!=null),tr[0]=null,er[0]=null,sn[0]=0;;){if(Ut[0]=$t,Kt[0]=Qn,8>Qn){Ut=7;break e}var Ni=Cr(zr,$t+4);if(4294967286<Ni){Ut=3;break e}var Sn=8+Ni+1&-2;if(Cn+=Sn,0<Zr&&Cn>Zr){Ut=3;break e}if(!i(zr,$t,"VP8 ")||!i(zr,$t,"VP8L")){Ut=0;break e}if(Qn[0]<Sn){Ut=7;break e}i(zr,$t,"ALPH")||(tr[0]=zr,er[0]=$t+8,sn[0]=Ni),$t+=Sn,Qn-=Sn}}if($=$[0],Bt.na=Bt.na[0],Bt.P=Bt.P[0],Bt.Sa=Bt.Sa[0],Ut!=0)break}$=[$],Bt.Ja=[Bt.Ja],Bt.xa=[Bt.xa];e:if(Zr=T,Ut=R,Kt=$,tr=Bt.gb[0],er=Bt.Ja,sn=Bt.xa,zr=Ut[0],$t=!i(Zr,zr,"VP8 "),Cn=!i(Zr,zr,"VP8L"),n(Zr!=null),n(Kt!=null),n(er!=null),n(sn!=null),8>Kt[0])Ut=7;else{if($t||Cn){if(Zr=Cr(Zr,zr+4),12<=tr&&Zr>tr-12){Ut=3;break e}if(Xe&&Zr>Kt[0]-8){Ut=7;break e}er[0]=Zr,Ut[0]+=8,Kt[0]-=8,sn[0]=Cn}else sn[0]=5<=Kt[0]&&Zr[zr+0]==47&&!(Zr[zr+4]>>5),er[0]=Kt[0];Ut=0}if($=$[0],Bt.Ja=Bt.Ja[0],Bt.xa=Bt.xa[0],R=R[0],Ut!=0)break;if(4294967286<Bt.Ja)return 3;if(Te==null||Zt||(Te[0]=Bt.xa?2:1),Ce=[Ce],Tt=[Tt],Bt.xa){if(5>$){Ut=7;break}Te=Ce,Xe=Tt,Zt=we,T==null||5>$?T=0:5<=$&&T[R+0]==47&&!(T[R+4]>>5)?(Kt=[0],Zr=[0],tr=[0],je(er=new Se,T,R,$),Bn(er,Kt,Zr,tr)?(Te!=null&&(Te[0]=Kt[0]),Xe!=null&&(Xe[0]=Zr[0]),Zt!=null&&(Zt[0]=tr[0]),T=1):T=0):T=0}else{if(10>$){Ut=7;break}Te=Tt,T==null||10>$||!Sc(T,R+3,$-3)?T=0:(Xe=T[R+0]|T[R+1]<<8|T[R+2]<<16,Zt=16383&(T[R+7]<<8|T[R+6]),T=16383&(T[R+9]<<8|T[R+8]),1&Xe||3<(Xe>>1&7)||!(Xe>>4&1)||Xe>>5>=Bt.Ja||!Zt||!T?T=0:(Ce&&(Ce[0]=Zt),Te&&(Te[0]=T),T=1))}if(!T||(Ce=Ce[0],Tt=Tt[0],kt&&(Ke[0]!=Ce||$e[0]!=Tt)))return 3;De!=null&&(De[0]=Bt,De.offset=R-De.w,n(4294967286>R-De.w),n(De.offset==De.ha-$));break}return Ut==0||Ut==7&&kt&&De==null?(we!=null&&(we[0]|=Bt.na!=null&&0<Bt.na.length),te!=null&&(te[0]=Ce),me!=null&&(me[0]=Tt),0):Ut}function oA(T,R,$){var te=R.width,me=R.height,we=0,Ce=0,Te=te,De=me;if(R.Da=T!=null&&0<T.Da,R.Da&&(Te=T.cd,De=T.bd,we=T.v,Ce=T.j,11>$||(we&=-2,Ce&=-2),0>we||0>Ce||0>=Te||0>=De||we+Te>te||Ce+De>me))return 0;if(R.v=we,R.j=Ce,R.va=we+Te,R.o=Ce+De,R.U=Te,R.T=De,R.da=T!=null&&0<T.da,R.da){if(!$r(Te,De,$=[T.ib],we=[T.hb]))return 0;R.ib=$[0],R.hb=we[0]}return R.ob=T!=null&&T.ob,R.Kb=T==null||!T.Sd,R.da&&(R.ob=R.ib<3*te/4&&R.hb<3*me/4,R.Kb=0),1}function aA(T){if(T==null)return 2;if(11>T.S){var R=T.f.RGBA;R.fb+=(T.height-1)*R.A,R.A=-R.A}else R=T.f.kb,T=T.height,R.O+=(T-1)*R.fa,R.fa=-R.fa,R.N+=(T-1>>1)*R.Ab,R.Ab=-R.Ab,R.W+=(T-1>>1)*R.Db,R.Db=-R.Db,R.F!=null&&(R.J+=(T-1)*R.lb,R.lb=-R.lb);return 0}function Ml(T,R,$,te){if(te==null||0>=T||0>=R)return 2;if($!=null){if($.Da){var me=$.cd,we=$.bd,Ce=-2&$.v,Te=-2&$.j;if(0>Ce||0>Te||0>=me||0>=we||Ce+me>T||Te+we>R)return 2;T=me,R=we}if($.da){if(!$r(T,R,me=[$.ib],we=[$.hb]))return 2;T=me[0],R=we[0]}}te.width=T,te.height=R;e:{var De=te.width,Ke=te.height;if(T=te.S,0>=De||0>=Ke||!(T>=AA&&13>T))T=2;else{if(0>=te.Rd&&te.sd==null){Ce=we=me=R=0;var $e=(Te=De*jA[T])*Ke;if(11>T||(we=(Ke+1)/2*(R=(De+1)/2),T==12&&(Ce=(me=De)*Ke)),(Ke=d($e+2*we+Ce))==null){T=1;break e}te.sd=Ke,11>T?((De=te.f.RGBA).eb=Ke,De.fb=0,De.A=Te,De.size=$e):((De=te.f.kb).y=Ke,De.O=0,De.fa=Te,De.Fd=$e,De.f=Ke,De.N=0+$e,De.Ab=R,De.Cd=we,De.ea=Ke,De.W=0+$e+we,De.Db=R,De.Ed=we,T==12&&(De.F=Ke,De.J=0+$e+2*we),De.Tc=Ce,De.lb=me)}if(R=1,me=te.S,we=te.width,Ce=te.height,me>=AA&&13>me)if(11>me)T=te.f.RGBA,R&=(Te=Math.abs(T.A))*(Ce-1)+we<=T.size,R&=Te>=we*jA[me],R&=T.eb!=null;else{T=te.f.kb,Te=(we+1)/2,$e=(Ce+1)/2,De=Math.abs(T.fa),Ke=Math.abs(T.Ab);var kt=Math.abs(T.Db),Xe=Math.abs(T.lb),Bt=Xe*(Ce-1)+we;R&=De*(Ce-1)+we<=T.Fd,R&=Ke*($e-1)+Te<=T.Cd,R=(R&=kt*($e-1)+Te<=T.Ed)&De>=we&Ke>=Te&kt>=Te,R&=T.y!=null,R&=T.f!=null,R&=T.ea!=null,me==12&&(R&=Xe>=we,R&=Bt<=T.Tc,R&=T.F!=null)}else R=0;T=R?0:2}}return T!=0||$!=null&&$.fd&&(T=aA(te)),T}var Ws=64,qo=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],Co=24,ga=32,fl=8,Ma=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];Sr("Predictor0","PredictorAdd0"),xe.Predictor0=function(){return 4278190080},xe.Predictor1=function(T){return T},xe.Predictor2=function(T,R,$){return R[$+0]},xe.Predictor3=function(T,R,$){return R[$+1]},xe.Predictor4=function(T,R,$){return R[$-1]},xe.Predictor5=function(T,R,$){return Rr(Rr(T,R[$+1]),R[$+0])},xe.Predictor6=function(T,R,$){return Rr(T,R[$-1])},xe.Predictor7=function(T,R,$){return Rr(T,R[$+0])},xe.Predictor8=function(T,R,$){return Rr(R[$-1],R[$+0])},xe.Predictor9=function(T,R,$){return Rr(R[$+0],R[$+1])},xe.Predictor10=function(T,R,$){return Rr(Rr(T,R[$-1]),Rr(R[$+0],R[$+1]))},xe.Predictor11=function(T,R,$){var te=R[$+0];return 0>=ft(te>>24&255,T>>24&255,(R=R[$-1])>>24&255)+ft(te>>16&255,T>>16&255,R>>16&255)+ft(te>>8&255,T>>8&255,R>>8&255)+ft(255&te,255&T,255&R)?te:T},xe.Predictor12=function(T,R,$){var te=R[$+0];return(On((T>>24&255)+(te>>24&255)-((R=R[$-1])>>24&255))<<24|On((T>>16&255)+(te>>16&255)-(R>>16&255))<<16|On((T>>8&255)+(te>>8&255)-(R>>8&255))<<8|On((255&T)+(255&te)-(255&R)))>>>0},xe.Predictor13=function(T,R,$){var te=R[$-1];return(hn((T=Rr(T,R[$+0]))>>24&255,te>>24&255)<<24|hn(T>>16&255,te>>16&255)<<16|hn(T>>8&255,te>>8&255)<<8|hn(255&T,255&te))>>>0};var oc=xe.PredictorAdd0;xe.PredictorAdd1=de,Sr("Predictor2","PredictorAdd2"),Sr("Predictor3","PredictorAdd3"),Sr("Predictor4","PredictorAdd4"),Sr("Predictor5","PredictorAdd5"),Sr("Predictor6","PredictorAdd6"),Sr("Predictor7","PredictorAdd7"),Sr("Predictor8","PredictorAdd8"),Sr("Predictor9","PredictorAdd9"),Sr("Predictor10","PredictorAdd10"),Sr("Predictor11","PredictorAdd11"),Sr("Predictor12","PredictorAdd12"),Sr("Predictor13","PredictorAdd13");var kl=xe.PredictorAdd2;We("ColorIndexInverseTransform","MapARGB","32b",function(T){return T>>8&255},function(T){return T}),We("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(T){return T},function(T){return T>>8&255});var ss,pl=xe.ColorIndexInverseTransform,ml=xe.MapARGB,ya=xe.VP8LColorIndexInverseTransformAlpha,Pc=xe.MapAlpha,Ul=xe.VP8LPredictorsAdd=[];Ul.length=16,(xe.VP8LPredictors=[]).length=16,(xe.VP8LPredictorsAdd_C=[]).length=16,(xe.VP8LPredictors_C=[]).length=16;var ho,ac,gl,Dl,Rl,Nl,$o,lc,os,Eo,si,_i,Yi,bs,Pn,Lc,cc,ka,MA,Ua,Mc,kc,fo,Uc,Dc,au,yl,kA,UA=d(511),lA=d(2041),DA=d(225),Uu=d(767),Rc=0,So=lA,cA=DA,lo=Uu,pn=UA,AA=0,Nc=1,ch=2,Ac=3,lu=4,Ii=5,cu=6,RA=7,uc=8,Ql=9,Qc=10,Oc=[2,3,7],NA=[3,3,11],hc=[280,256,256,256,40],Au=[0,1,1,1,0],Du=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],uA=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],zc=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],QA=8,OA=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],dc=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],hA=null,Ru=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],dA=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],uu=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],Ah=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],jh=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],hu=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],zA=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],po=[],va=[],$n=[],mo=1,co=2,Rs=[],Zs=[];pa("UpsampleRgbLinePair",Pa,3),pa("UpsampleBgrLinePair",Xi,3),pa("UpsampleRgbaLinePair",$s,4),pa("UpsampleBgraLinePair",Pl,4),pa("UpsampleArgbLinePair",ou,4),pa("UpsampleRgba4444LinePair",Tl,2),pa("UpsampleRgb565LinePair",sA,2);var Nu=xe.UpsampleRgbLinePair,Hc=xe.UpsampleBgrLinePair,Da=xe.UpsampleRgbaLinePair,Ra=xe.UpsampleBgraLinePair,Na=xe.UpsampleArgbLinePair,HA=xe.UpsampleRgba4444LinePair,Qu=xe.UpsampleRgb565LinePair,Ol=16,Qa=1<<Ol-1,li=-227,Xn=482,zl=6,Ns=0,Xs=d(256),jc=d(256),Vc=d(256),go=d(256),du=d(Xn-li),Ou=d(Xn-li);La("YuvToRgbRow",Pa,3),La("YuvToBgrRow",Xi,3),La("YuvToRgbaRow",$s,4),La("YuvToBgraRow",Pl,4),La("YuvToArgbRow",ou,4),La("YuvToRgba4444Row",Tl,2),La("YuvToRgb565Row",sA,2);var fA=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],Oa=[0,2,8],_a=[8,7,6,4,4,2,2,2,1,1,1,1],Qs=1;this.WebPDecodeRGBA=function(T,R,$,te,me){var we=Nc,Ce=new Gt,Te=new Tr;Ce.ba=Te,Te.S=we,Te.width=[Te.width],Te.height=[Te.height];var De=Te.width,Ke=Te.height,$e=new mt;if($e==null||T==null)var kt=2;else n($e!=null),kt=Ll(T,R,$,$e.width,$e.height,$e.Pd,$e.Qd,$e.format,null);if(kt!=0?De=0:(De!=null&&(De[0]=$e.width[0]),Ke!=null&&(Ke[0]=$e.height[0]),De=1),De){Te.width=Te.width[0],Te.height=Te.height[0],te!=null&&(te[0]=Te.width),me!=null&&(me[0]=Te.height);e:{if(te=new Ba,(me=new sr).data=T,me.w=R,me.ha=$,me.kd=1,R=[0],n(me!=null),((T=Ll(me.data,me.w,me.ha,null,null,null,R,null,me))==0||T==7)&&R[0]&&(T=4),(R=T)==0){if(n(Ce!=null),te.data=me.data,te.w=me.w+me.offset,te.ha=me.ha-me.offset,te.put=wr,te.ac=Dn,te.bc=Tn,te.ma=Ce,me.xa){if((T=El())==null){Ce=1;break e}if((function(Xe,Bt){var Tt=[0],Zt=[0],Ut=[0];t:for(;;){if(Xe==null)return 0;if(Bt==null)return Xe.a=2,0;if(Xe.l=Bt,Xe.a=0,je(Xe.m,Bt.data,Bt.w,Bt.ha),!Bn(Xe.m,Tt,Zt,Ut)){Xe.a=3;break t}if(Xe.xb=co,Bt.width=Tt[0],Bt.height=Zt[0],!ks(Tt[0],Zt[0],1,Xe,null))break t;return 1}return n(Xe.a!=0),0})(T,te)){if(te=(R=Ml(te.width,te.height,Ce.Oa,Ce.ba))==0){t:{te=T;r:for(;;){if(te==null){te=0;break t}if(n(te.s.yc!=null),n(te.s.Ya!=null),n(0<te.s.Wb),n(($=te.l)!=null),n((me=$.ma)!=null),te.xb!=0){if(te.ca=me.ba,te.tb=me.tb,n(te.ca!=null),!oA(me.Oa,$,Ac)){te.a=2;break r}if(!dn(te,$.width)||$.da)break r;if(($.da||Jt(te.ca.S))&&fa(),11>te.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),te.ca.f.kb.F!=null&&fa()),te.Pb&&0<te.s.ua&&te.s.vb.X==null&&!He(te.s.vb,te.s.Wa.Xa)){te.a=1;break r}te.xb=0}if(!un(te,te.V,te.Ba,te.c,te.i,$.o,sl))break r;me.Dc=te.Ma,te=1;break t}n(te.a!=0),te=0}te=!te}te&&(R=T.a)}else R=T.a}else{if((T=new IA)==null){Ce=1;break e}if(T.Fa=me.na,T.P=me.P,T.qc=me.Sa,No(T,te)){if((R=Ml(te.width,te.height,Ce.Oa,Ce.ba))==0){if(T.Aa=0,$=Ce.Oa,n((me=T)!=null),$!=null){if(0<(De=0>(De=$.Md)?0:100<De?255:255*De/100)){for(Ke=$e=0;4>Ke;++Ke)12>(kt=me.pb[Ke]).lc&&(kt.ia=De*_a[0>kt.lc?0:kt.lc]>>3),$e|=kt.ia;$e&&(alert("todo:VP8InitRandom"),me.ia=1)}me.Ga=$.Id,100<me.Ga?me.Ga=100:0>me.Ga&&(me.Ga=0)}(function(Xe,Bt){if(Xe==null)return 0;if(Bt==null)return Mn(Xe,2,"NULL VP8Io parameter in VP8Decode().");if(!Xe.cb&&!No(Xe,Bt))return 0;if(n(Xe.cb),Bt.ac==null||Bt.ac(Bt)){Bt.ob&&(Xe.L=0);var Tt=Oa[Xe.L];if(Xe.L==2?(Xe.yb=0,Xe.zb=0):(Xe.yb=Bt.v-Tt>>4,Xe.zb=Bt.j-Tt>>4,0>Xe.yb&&(Xe.yb=0),0>Xe.zb&&(Xe.zb=0)),Xe.Va=Bt.o+15+Tt>>4,Xe.Hb=Bt.va+15+Tt>>4,Xe.Hb>Xe.za&&(Xe.Hb=Xe.za),Xe.Va>Xe.Ub&&(Xe.Va=Xe.Ub),0<Xe.L){var Zt=Xe.ed;for(Tt=0;4>Tt;++Tt){var Ut;if(Xe.Qa.Cb){var Kt=Xe.Qa.Lb[Tt];Xe.Qa.Fb||(Kt+=Zt.Tb)}else Kt=Zt.Tb;for(Ut=0;1>=Ut;++Ut){var $t=Xe.gd[Tt][Ut],tr=Kt;if(Zt.Pc&&(tr+=Zt.vd[0],Ut&&(tr+=Zt.od[0])),0<(tr=0>tr?0:63<tr?63:tr)){var er=tr;0<Zt.wb&&(er=4<Zt.wb?er>>2:er>>1)>9-Zt.wb&&(er=9-Zt.wb),1>er&&(er=1),$t.dd=er,$t.tc=2*tr+er,$t.ld=40<=tr?2:15<=tr?1:0}else $t.tc=0;$t.La=Ut}}}Tt=0}else Mn(Xe,6,"Frame setup failed"),Tt=Xe.a;if(Tt=Tt==0){if(Tt){Xe.$c=0,0<Xe.Aa||(Xe.Ic=Qs);t:{Tt=Xe.Ic,Zt=4*(er=Xe.za);var sn=32*er,zr=er+1,Cn=0<Xe.L?er*(0<Xe.Aa?2:1):0,Zr=(Xe.Aa==2?2:1)*er;if(($t=Zt+832+(Ut=3*(16*Tt+Oa[Xe.L])/2*sn)+(Kt=Xe.Fa!=null&&0<Xe.Fa.length?Xe.Kc.c*Xe.Kc.i:0))!=$t)Tt=0;else{if($t>Xe.Vb){if(Xe.Vb=0,Xe.Ec=d($t),Xe.Fc=0,Xe.Ec==null){Tt=Mn(Xe,1,"no memory during frame initialization.");break t}Xe.Vb=$t}$t=Xe.Ec,tr=Xe.Fc,Xe.Ac=$t,Xe.Bc=tr,tr+=Zt,Xe.Gd=m(sn,Us),Xe.Hd=0,Xe.rb=m(zr+1,jn),Xe.sb=1,Xe.wa=Cn?m(Cn,Ci):null,Xe.Y=0,Xe.D.Nb=0,Xe.D.wa=Xe.wa,Xe.D.Y=Xe.Y,0<Xe.Aa&&(Xe.D.Y+=er),n(!0),Xe.oc=$t,Xe.pc=tr,tr+=832,Xe.ya=m(Zr,ll),Xe.aa=0,Xe.D.ya=Xe.ya,Xe.D.aa=Xe.aa,Xe.Aa==2&&(Xe.D.aa+=er),Xe.R=16*er,Xe.B=8*er,er=(sn=Oa[Xe.L])*Xe.R,sn=sn/2*Xe.B,Xe.sa=$t,Xe.ta=tr+er,Xe.qa=Xe.sa,Xe.ra=Xe.ta+16*Tt*Xe.R+sn,Xe.Ha=Xe.qa,Xe.Ia=Xe.ra+8*Tt*Xe.B+sn,Xe.$c=0,tr+=Ut,Xe.mb=Kt?$t:null,Xe.nb=Kt?tr:null,n(tr+Kt<=Xe.Fc+Xe.Vb),Fc(Xe),h(Xe.Ac,Xe.Bc,0,Zt),Tt=1}}if(Tt){if(Bt.ka=0,Bt.y=Xe.sa,Bt.O=Xe.ta,Bt.f=Xe.qa,Bt.N=Xe.ra,Bt.ea=Xe.Ha,Bt.Vd=Xe.Ia,Bt.fa=Xe.R,Bt.Rc=Xe.B,Bt.F=null,Bt.J=0,!Rc){for(Tt=-255;255>=Tt;++Tt)UA[255+Tt]=0>Tt?-Tt:Tt;for(Tt=-1020;1020>=Tt;++Tt)lA[1020+Tt]=-128>Tt?-128:127<Tt?127:Tt;for(Tt=-112;112>=Tt;++Tt)DA[112+Tt]=-16>Tt?-16:15<Tt?15:Tt;for(Tt=-255;510>=Tt;++Tt)Uu[255+Tt]=0>Tt?0:255<Tt?255:Tt;Rc=1}$o=Fl,lc=rc,Eo=Ca,si=TA,_i=Kn,os=iA,Yi=Ei,bs=ao,Pn=ge,Lc=et,cc=da,ka=V,MA=gt,Ua=It,Mc=Vo,kc=En,fo=mn,Uc=Ia,va[0]=ii,va[1]=Il,va[2]=Jn,va[3]=cn,va[4]=_s,va[5]=uo,va[6]=Wi,va[7]=ws,va[8]=Fa,va[9]=Sa,po[0]=Ea,po[1]=Ic,po[2]=ca,po[3]=Al,po[4]=zo,po[5]=Ho,po[6]=vs,$n[0]=ic,$n[1]=PA,$n[2]=ti,$n[3]=Aa,$n[4]=ul,$n[5]=qs,$n[6]=jo,Tt=1}else Tt=0}Tt&&(Tt=(function(Qn,Ni){for(Qn.M=0;Qn.M<Qn.Va;++Qn.M){var Sn,Hr=Qn.Jc[Qn.M&Qn.Xb],Fr=Qn.m,pi=Qn;for(Sn=0;Sn<pi.za;++Sn){var Mr=Fr,zn=pi,mi=zn.Ac,as=zn.Bc+4*Sn,ls=zn.zc,Qi=zn.ya[zn.aa+Sn];if(zn.Qa.Bb?Qi.$b=Lt(Mr,zn.Pa.jb[0])?2+Lt(Mr,zn.Pa.jb[2]):Lt(Mr,zn.Pa.jb[1]):Qi.$b=0,zn.kc&&(Qi.Ad=Lt(Mr,zn.Bd)),Qi.Za=!Lt(Mr,145)+0,Qi.Za){var Bs=Qi.Ob,Cs=0;for(zn=0;4>zn;++zn){var Oi,Fn=ls[0+zn];for(Oi=0;4>Oi;++Oi){Fn=jh[mi[as+Oi]][Fn];for(var Yn=uu[Lt(Mr,Fn[0])];0<Yn;)Yn=uu[2*Yn+Lt(Mr,Fn[Yn])];Fn=-Yn,mi[as+Oi]=Fn}l(Bs,Cs,mi,as,4),Cs+=4,ls[0+zn]=Fn}}else Fn=Lt(Mr,156)?Lt(Mr,128)?1:3:Lt(Mr,163)?2:0,Qi.Ob[0]=Fn,h(mi,as,Fn,4),h(ls,0,Fn,4);Qi.Dd=Lt(Mr,142)?Lt(Mr,114)?Lt(Mr,183)?1:3:2:0}if(pi.m.Ka)return Mn(Qn,7,"Premature end-of-partition0 encountered.");for(;Qn.ja<Qn.za;++Qn.ja){if(pi=Hr,Mr=(Fr=Qn).rb[Fr.sb-1],mi=Fr.rb[Fr.sb+Fr.ja],Sn=Fr.ya[Fr.aa+Fr.ja],as=Fr.kc?Sn.Ad:0)Mr.la=mi.la=0,Sn.Za||(Mr.Na=mi.Na=0),Sn.Hc=0,Sn.Gc=0,Sn.ia=0;else{var gr,xr;if(Mr=mi,mi=pi,as=Fr.Pa.Xc,ls=Fr.ya[Fr.aa+Fr.ja],Qi=Fr.pb[ls.$b],zn=ls.ad,Bs=0,Cs=Fr.rb[Fr.sb-1],Fn=Oi=0,h(zn,Bs,0,384),ls.Za)var Ti=0,Vi=as[3];else{Yn=d(16);var ei=Mr.Na+Cs.Na;if(ei=hA(mi,as[1],ei,Qi.Eb,0,Yn,0),Mr.Na=Cs.Na=(0<ei)+0,1<ei)$o(Yn,0,zn,Bs);else{var ci=Yn[0]+3>>3;for(Yn=0;256>Yn;Yn+=16)zn[Bs+Yn]=ci}Ti=1,Vi=as[0]}var Rn=15&Mr.la,wi=15&Cs.la;for(Yn=0;4>Yn;++Yn){var Es=1&wi;for(ci=xr=0;4>ci;++ci)Rn=Rn>>1|(Es=(ei=hA(mi,Vi,ei=Es+(1&Rn),Qi.Sc,Ti,zn,Bs))>Ti)<<7,xr=xr<<2|(3<ei?3:1<ei?2:zn[Bs+0]!=0),Bs+=16;Rn>>=4,wi=wi>>1|Es<<7,Oi=(Oi<<8|xr)>>>0}for(Vi=Rn,Ti=wi>>4,gr=0;4>gr;gr+=2){for(xr=0,Rn=Mr.la>>4+gr,wi=Cs.la>>4+gr,Yn=0;2>Yn;++Yn){for(Es=1&wi,ci=0;2>ci;++ci)ei=Es+(1&Rn),Rn=Rn>>1|(Es=0<(ei=hA(mi,as[2],ei,Qi.Qc,0,zn,Bs)))<<3,xr=xr<<2|(3<ei?3:1<ei?2:zn[Bs+0]!=0),Bs+=16;Rn>>=2,wi=wi>>1|Es<<5}Fn|=xr<<4*gr,Vi|=Rn<<4<<gr,Ti|=(240&wi)<<gr}Mr.la=Vi,Cs.la=Ti,ls.Hc=Oi,ls.Gc=Fn,ls.ia=43690&Fn?0:Qi.ia,as=!(Oi|Fn)}if(0<Fr.L&&(Fr.wa[Fr.Y+Fr.ja]=Fr.gd[Sn.$b][Sn.Za],Fr.wa[Fr.Y+Fr.ja].La|=!as),pi.Ka)return Mn(Qn,7,"Premature end-of-file encountered.")}if(Fc(Qn),Fr=Ni,pi=1,Sn=(Hr=Qn).D,Mr=0<Hr.L&&Hr.M>=Hr.zb&&Hr.M<=Hr.Va,Hr.Aa==0)t:{if(Sn.M=Hr.M,Sn.uc=Mr,Bo(Hr,Sn),pi=1,Sn=(xr=Hr.D).Nb,Mr=(Fn=Oa[Hr.L])*Hr.R,mi=Fn/2*Hr.B,Yn=16*Sn*Hr.R,ci=8*Sn*Hr.B,as=Hr.sa,ls=Hr.ta-Mr+Yn,Qi=Hr.qa,zn=Hr.ra-mi+ci,Bs=Hr.Ha,Cs=Hr.Ia-mi+ci,wi=(Rn=xr.M)==0,Oi=Rn>=Hr.Va-1,Hr.Aa==2&&Bo(Hr,xr),xr.uc)for(Es=(ei=Hr).D.M,n(ei.D.uc),xr=ei.yb;xr<ei.Hb;++xr){Ti=xr,Vi=Es;var Ys=(Fo=(Ji=ei).D).Nb;gr=Ji.R;var Fo=Fo.wa[Fo.Y+Ti],ki=Ji.sa,In=Ji.ta+16*Ys*gr+16*Ti,Vn=Fo.dd,xi=Fo.tc;if(xi!=0)if(n(3<=xi),Ji.L==1)0<Ti&&kc(ki,In,gr,xi+4),Fo.La&&Uc(ki,In,gr,xi),0<Vi&&Mc(ki,In,gr,xi+4),Fo.La&&fo(ki,In,gr,xi);else{var Ss=Ji.B,Io=Ji.qa,Js=Ji.ra+8*Ys*Ss+8*Ti,Fs=Ji.Ha,Ji=Ji.Ia+8*Ys*Ss+8*Ti;Ys=Fo.ld,0<Ti&&(bs(ki,In,gr,xi+4,Vn,Ys),Lc(Io,Js,Fs,Ji,Ss,xi+4,Vn,Ys)),Fo.La&&(ka(ki,In,gr,xi,Vn,Ys),Ua(Io,Js,Fs,Ji,Ss,xi,Vn,Ys)),0<Vi&&(Yi(ki,In,gr,xi+4,Vn,Ys),Pn(Io,Js,Fs,Ji,Ss,xi+4,Vn,Ys)),Fo.La&&(cc(ki,In,gr,xi,Vn,Ys),MA(Io,Js,Fs,Ji,Ss,xi,Vn,Ys))}}if(Hr.ia&&alert("todo:DitherRow"),Fr.put!=null){if(xr=16*Rn,Rn=16*(Rn+1),wi?(Fr.y=Hr.sa,Fr.O=Hr.ta+Yn,Fr.f=Hr.qa,Fr.N=Hr.ra+ci,Fr.ea=Hr.Ha,Fr.W=Hr.Ia+ci):(xr-=Fn,Fr.y=as,Fr.O=ls,Fr.f=Qi,Fr.N=zn,Fr.ea=Bs,Fr.W=Cs),Oi||(Rn-=Fn),Rn>Fr.o&&(Rn=Fr.o),Fr.F=null,Fr.J=null,Hr.Fa!=null&&0<Hr.Fa.length&&xr<Rn&&(Fr.J=Si(Hr,Fr,xr,Rn-xr),Fr.F=Hr.mb,Fr.F==null&&Fr.F.length==0)){pi=Mn(Hr,3,"Could not decode alpha data.");break t}xr<Fr.j&&(Fn=Fr.j-xr,xr=Fr.j,n(!(1&Fn)),Fr.O+=Hr.R*Fn,Fr.N+=Hr.B*(Fn>>1),Fr.W+=Hr.B*(Fn>>1),Fr.F!=null&&(Fr.J+=Fr.width*Fn)),xr<Rn&&(Fr.O+=Fr.v,Fr.N+=Fr.v>>1,Fr.W+=Fr.v>>1,Fr.F!=null&&(Fr.J+=Fr.v),Fr.ka=xr-Fr.j,Fr.U=Fr.va-Fr.v,Fr.T=Rn-xr,pi=Fr.put(Fr))}Sn+1!=Hr.Ic||Oi||(l(Hr.sa,Hr.ta-Mr,as,ls+16*Hr.R,Mr),l(Hr.qa,Hr.ra-mi,Qi,zn+8*Hr.B,mi),l(Hr.Ha,Hr.Ia-mi,Bs,Cs+8*Hr.B,mi))}if(!pi)return Mn(Qn,6,"Output aborted.")}return 1})(Xe,Bt)),Bt.bc!=null&&Bt.bc(Bt),Tt&=1}return Tt?(Xe.cb=0,Tt):0})(T,te)||(R=T.a)}}else R=T.a}R==0&&Ce.Oa!=null&&Ce.Oa.fd&&(R=aA(Ce.ba))}Ce=R}we=Ce!=0?null:11>we?Te.f.RGBA.eb:Te.f.kb.y}else we=null;return we};var jA=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function E(xe,nt){for(var pe="",_e=0;_e<4;_e++)pe+=String.fromCharCode(xe[nt++]);return pe}function I(xe,nt){return xe[nt+0]|xe[nt+1]<<8}function D(xe,nt){return(xe[nt+0]|xe[nt+1]<<8|xe[nt+2]<<16)>>>0}function O(xe,nt){return(xe[nt+0]|xe[nt+1]<<8|xe[nt+2]<<16|xe[nt+3]<<24)>>>0}new x;var P=[0],W=[0],z=[],H=new x,Z=e,ie=(function(xe,nt){var pe={},_e=0,Ue=!1,Fe=0,pt=0;if(pe.frames=[],!(function(oe,Se){for(var Ne=0;Ne<4;Ne++)if(oe[Se+Ne]!="RIFF".charCodeAt(Ne))return!0;return!1})(xe,nt)){for(O(xe,nt+=4),nt+=8;nt<xe.length;){var ht=E(xe,nt),Je=O(xe,nt+=4);nt+=4;var ze=Je+(1&Je);switch(ht){case"VP8 ":case"VP8L":pe.frames[_e]===void 0&&(pe.frames[_e]={}),(Re=pe.frames[_e]).src_off=Ue?pt:nt-8,Re.src_size=Fe+Je+8,_e++,Ue&&(Ue=!1,Fe=0,pt=0);break;case"VP8X":(Re=pe.header={}).feature_flags=xe[nt];var je=nt+4;Re.canvas_width=1+D(xe,je),je+=3,Re.canvas_height=1+D(xe,je),je+=3;break;case"ALPH":Ue=!0,Fe=ze+8,pt=nt-8;break;case"ANIM":(Re=pe.header).bgcolor=O(xe,nt),je=nt+4,Re.loop_count=I(xe,je),je+=2;break;case"ANMF":var xt,Re;(Re=pe.frames[_e]={}).offset_x=2*D(xe,nt),nt+=3,Re.offset_y=2*D(xe,nt),nt+=3,Re.width=1+D(xe,nt),nt+=3,Re.height=1+D(xe,nt),nt+=3,Re.duration=D(xe,nt),nt+=3,xt=xe[nt++],Re.dispose=1&xt,Re.blend=xt>>1&1}ht!="ANMF"&&(nt+=ze)}return pe}})(Z,0);ie.response=Z,ie.rgbaoutput=!0,ie.dataurl=!1;var ce=ie.header?ie.header:null,he=ie.frames?ie.frames:null;if(ce){ce.loop_counter=ce.loop_count,P=[ce.canvas_height],W=[ce.canvas_width];for(var Ie=0;Ie<he.length&&he[Ie].blend!=0;Ie++);}var Ve=he[0],Me=H.WebPDecodeRGBA(Z,Ve.src_off,Ve.src_size,W,P);Ve.rgba=Me,Ve.imgwidth=W[0],Ve.imgheight=P[0];for(var Pe=0;Pe<W[0]*P[0]*4;Pe++)z[Pe]=Me[Pe];return this.width=W,this.height=P,this.data=z,this}(function(e){var n,i,l,h,d,m,o,x,E,I=function(oe){return oe=oe||{},this.isStrokeTransparent=oe.isStrokeTransparent||!1,this.strokeOpacity=oe.strokeOpacity||1,this.strokeStyle=oe.strokeStyle||"#000000",this.fillStyle=oe.fillStyle||"#000000",this.isFillTransparent=oe.isFillTransparent||!1,this.fillOpacity=oe.fillOpacity||1,this.font=oe.font||"10px sans-serif",this.textBaseline=oe.textBaseline||"alphabetic",this.textAlign=oe.textAlign||"left",this.lineWidth=oe.lineWidth||1,this.lineJoin=oe.lineJoin||"miter",this.lineCap=oe.lineCap||"butt",this.path=oe.path||[],this.transform=oe.transform!==void 0?oe.transform.clone():new x,this.globalCompositeOperation=oe.globalCompositeOperation||"normal",this.globalAlpha=oe.globalAlpha||1,this.clip_path=oe.clip_path||[],this.currentPoint=oe.currentPoint||new m,this.miterLimit=oe.miterLimit||10,this.lastPoint=oe.lastPoint||new m,this.lineDashOffset=oe.lineDashOffset||0,this.lineDash=oe.lineDash||[],this.margin=oe.margin||[0,0,0,0],this.prevPageLastElemOffset=oe.prevPageLastElemOffset||0,this.ignoreClearRect=typeof oe.ignoreClearRect!="boolean"||oe.ignoreClearRect,this};e.events.push(["initialized",function(){this.context2d=new D(this),n=this.internal.f2,i=this.internal.getCoordinateString,l=this.internal.getVerticalCoordinateString,h=this.internal.getHorizontalCoordinate,d=this.internal.getVerticalCoordinate,m=this.internal.Point,o=this.internal.Rectangle,x=this.internal.Matrix,E=new I}]);var D=function(oe){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var Se=oe;Object.defineProperty(this,"pdf",{get:function(){return Se}});var Ne=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return Ne},set:function(He){Ne=!!He}});var Ye=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return Ye},set:function(He){Ye=!!He}});var lt=0;Object.defineProperty(this,"posX",{get:function(){return lt},set:function(He){isNaN(He)||(lt=He)}});var rt=0;Object.defineProperty(this,"posY",{get:function(){return rt},set:function(He){isNaN(He)||(rt=He)}}),Object.defineProperty(this,"margin",{get:function(){return E.margin},set:function(He){var vr;typeof He=="number"?vr=[He,He,He,He]:((vr=new Array(4))[0]=He[0],vr[1]=He.length>=2?He[1]:vr[0],vr[2]=He.length>=3?He[2]:vr[0],vr[3]=He.length>=4?He[3]:vr[1]),E.margin=vr}});var vt=!1;Object.defineProperty(this,"autoPaging",{get:function(){return vt},set:function(He){vt=He}});var St=0;Object.defineProperty(this,"lastBreak",{get:function(){return St},set:function(He){St=He}});var Lt=[];Object.defineProperty(this,"pageBreaks",{get:function(){return Lt},set:function(He){Lt=He}}),Object.defineProperty(this,"ctx",{get:function(){return E},set:function(He){He instanceof I&&(E=He)}}),Object.defineProperty(this,"path",{get:function(){return E.path},set:function(He){E.path=He}});var Wt=[];Object.defineProperty(this,"ctxStack",{get:function(){return Wt},set:function(He){Wt=He}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(He){var vr;vr=O(He),this.ctx.fillStyle=vr.style,this.ctx.isFillTransparent=vr.a===0,this.ctx.fillOpacity=vr.a,this.pdf.setFillColor(vr.r,vr.g,vr.b,{a:vr.a}),this.pdf.setTextColor(vr.r,vr.g,vr.b,{a:vr.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(He){var vr=O(He);this.ctx.strokeStyle=vr.style,this.ctx.isStrokeTransparent=vr.a===0,this.ctx.strokeOpacity=vr.a,vr.a===0?this.pdf.setDrawColor(255,255,255):(vr.a,this.pdf.setDrawColor(vr.r,vr.g,vr.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(He){["butt","round","square"].indexOf(He)!==-1&&(this.ctx.lineCap=He,this.pdf.setLineCap(He))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(He){isNaN(He)||(this.ctx.lineWidth=He,this.pdf.setLineWidth(He))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(He){["bevel","round","miter"].indexOf(He)!==-1&&(this.ctx.lineJoin=He,this.pdf.setLineJoin(He))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(He){isNaN(He)||(this.ctx.miterLimit=He,this.pdf.setMiterLimit(He))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(He){this.ctx.textBaseline=He}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(He){["right","end","center","left","start"].indexOf(He)!==-1&&(this.ctx.textAlign=He)}});var ar=null,hr=null,Cr=null;Object.defineProperty(this,"fontFaces",{get:function(){return Cr},set:function(He){ar=null,hr=null,Cr=He}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(He){var vr;if(this.ctx.font=He,(vr=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z0-9]+?)\s*$/i.exec(He))!==null){var Ur=vr[1];vr[2];var $r=vr[3],lr=vr[4];vr[5];var Wr=vr[6],Sr=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(lr)[2];lr=Math.floor(Sr==="px"?parseFloat(lr)*this.pdf.internal.scaleFactor:Sr==="em"?parseFloat(lr)*this.pdf.getFontSize():parseFloat(lr)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(lr);var Or=(function(We){var Ct,yt,at=[],bt=We.trim();if(bt==="")return X1;if(bt in OC)return[OC[bt]];for(;bt!=="";){switch(yt=null,Ct=(bt=HC(bt)).charAt(0)){case'"':case"'":yt=Bj(bt.substring(1),Ct);break;default:yt=Cj(bt)}if(yt===null||(at.push(yt[0]),(bt=HC(yt[1]))!==""&&bt.charAt(0)!==","))return X1;bt=bt.replace(/^,/,"")}return at})(Wr);if(this.fontFaces){var Rr=(function(We,Ct){var yt=We.getFontList(),at=JSON.stringify(yt);if(ar===null||hr!==at){var bt=(function(Ht){var Ft=[];return Object.keys(Ht).forEach(function(cr){Ht[cr].forEach(function(Jt){var fr=null;switch(Jt){case"bold":fr={family:cr,weight:"bold"};break;case"italic":fr={family:cr,style:"italic"};break;case"bolditalic":fr={family:cr,weight:"bold",style:"italic"};break;case"":case"normal":fr={family:cr}}fr!==null&&(fr.ref={name:cr,style:Jt},Ft.push(fr))})}),Ft})(yt);ar=(function(Ht){for(var Ft={},cr=0;cr<Ht.length;++cr){var Jt=Z1(Ht[cr]),fr=Jt.family,rn=Jt.stretch,Tr=Jt.style,mt=Jt.weight;Ft[fr]=Ft[fr]||{},Ft[fr][rn]=Ft[fr][rn]||{},Ft[fr][rn][Tr]=Ft[fr][rn][Tr]||{},Ft[fr][rn][Tr][mt]=Jt}return Ft})(bt.concat(Ct)),hr=at}return ar})(this.pdf,this.fontFaces),On=Or.map(function(We){return{family:We,stretch:"normal",weight:$r,style:Ur}}),hn=(function(We,Ct,yt){for(var at=(yt=yt||{}).defaultFontFamily||"times",bt=Object.assign({},bj,yt.genericFontFamilies||{}),Ht=null,Ft=null,cr=0;cr<Ct.length;++cr)if(bt[(Ht=Z1(Ct[cr])).family]&&(Ht.family=bt[Ht.family]),We.hasOwnProperty(Ht.family)){Ft=We[Ht.family];break}if(!(Ft=Ft||We[at]))throw new Error("Could not find a font-family for the rule '"+zC(Ht)+"' and default family '"+at+"'.");if(Ft=(function(Jt,fr){if(fr[Jt])return fr[Jt];var rn=fw[Jt],Tr=rn<=fw.normal?-1:1,mt=QC(fr,C4,rn,Tr);if(!mt)throw new Error("Could not find a matching font-stretch value for "+Jt);return mt})(Ht.stretch,Ft),Ft=(function(Jt,fr){if(fr[Jt])return fr[Jt];for(var rn=B4[Jt],Tr=0;Tr<rn.length;++Tr)if(fr[rn[Tr]])return fr[rn[Tr]];throw new Error("Could not find a matching font-style for "+Jt)})(Ht.style,Ft),!(Ft=(function(Jt,fr){if(fr[Jt])return fr[Jt];if(Jt===400&&fr[500])return fr[500];if(Jt===500&&fr[400])return fr[400];var rn=xj[Jt],Tr=QC(fr,E4,rn,Jt<400?-1:1);if(!Tr)throw new Error("Could not find a matching font-weight for value "+Jt);return Tr})(Ht.weight,Ft)))throw new Error("Failed to resolve a font for the rule '"+zC(Ht)+"'.");return Ft})(Rr,On);this.pdf.setFont(hn.ref.name,hn.ref.style)}else{var ft="";($r==="bold"||parseInt($r,10)>=700||Ur==="bold")&&(ft="bold"),Ur==="italic"&&(ft+="italic"),ft.length===0&&(ft="normal");for(var de="",fe={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},ye=0;ye<Or.length;ye++){if(this.pdf.internal.getFont(Or[ye],ft,{noFallback:!0,disableWarning:!0})!==void 0){de=Or[ye];break}if(ft==="bolditalic"&&this.pdf.internal.getFont(Or[ye],"bold",{noFallback:!0,disableWarning:!0})!==void 0)de=Or[ye],ft="bold";else if(this.pdf.internal.getFont(Or[ye],"normal",{noFallback:!0,disableWarning:!0})!==void 0){de=Or[ye],ft="normal";break}}if(de===""){for(var qe=0;qe<Or.length;qe++)if(fe[Or[qe]]){de=fe[Or[qe]];break}}de=de===""?"Times":de,this.pdf.setFont(de,ft)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(He){this.ctx.globalCompositeOperation=He}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(He){this.ctx.globalAlpha=He}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(He){this.ctx.lineDashOffset=He,Re.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(He){this.ctx.lineDash=He,Re.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(He){this.ctx.ignoreClearRect=!!He}})};D.prototype.setLineDash=function(oe){this.lineDash=oe},D.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},D.prototype.fill=function(){he.call(this,"fill",!1)},D.prototype.stroke=function(){he.call(this,"stroke",!1)},D.prototype.beginPath=function(){this.path=[{type:"begin"}]},D.prototype.moveTo=function(oe,Se){if(isNaN(oe)||isNaN(Se))throw gs.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var Ne=this.ctx.transform.applyToPoint(new m(oe,Se));this.path.push({type:"mt",x:Ne.x,y:Ne.y}),this.ctx.lastPoint=new m(oe,Se)},D.prototype.closePath=function(){var oe=new m(0,0),Se=0;for(Se=this.path.length-1;Se!==-1;Se--)if(this.path[Se].type==="begin"&&rs(this.path[Se+1])==="object"&&typeof this.path[Se+1].x=="number"){oe=new m(this.path[Se+1].x,this.path[Se+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new m(oe.x,oe.y)},D.prototype.lineTo=function(oe,Se){if(isNaN(oe)||isNaN(Se))throw gs.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var Ne=this.ctx.transform.applyToPoint(new m(oe,Se));this.path.push({type:"lt",x:Ne.x,y:Ne.y}),this.ctx.lastPoint=new m(Ne.x,Ne.y)},D.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),he.call(this,null,!0)},D.prototype.quadraticCurveTo=function(oe,Se,Ne,Ye){if(isNaN(Ne)||isNaN(Ye)||isNaN(oe)||isNaN(Se))throw gs.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var lt=this.ctx.transform.applyToPoint(new m(Ne,Ye)),rt=this.ctx.transform.applyToPoint(new m(oe,Se));this.path.push({type:"qct",x1:rt.x,y1:rt.y,x:lt.x,y:lt.y}),this.ctx.lastPoint=new m(lt.x,lt.y)},D.prototype.bezierCurveTo=function(oe,Se,Ne,Ye,lt,rt){if(isNaN(lt)||isNaN(rt)||isNaN(oe)||isNaN(Se)||isNaN(Ne)||isNaN(Ye))throw gs.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var vt=this.ctx.transform.applyToPoint(new m(lt,rt)),St=this.ctx.transform.applyToPoint(new m(oe,Se)),Lt=this.ctx.transform.applyToPoint(new m(Ne,Ye));this.path.push({type:"bct",x1:St.x,y1:St.y,x2:Lt.x,y2:Lt.y,x:vt.x,y:vt.y}),this.ctx.lastPoint=new m(vt.x,vt.y)},D.prototype.arc=function(oe,Se,Ne,Ye,lt,rt){if(isNaN(oe)||isNaN(Se)||isNaN(Ne)||isNaN(Ye)||isNaN(lt))throw gs.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(rt=!!rt,!this.ctx.transform.isIdentity){var vt=this.ctx.transform.applyToPoint(new m(oe,Se));oe=vt.x,Se=vt.y;var St=this.ctx.transform.applyToPoint(new m(0,Ne)),Lt=this.ctx.transform.applyToPoint(new m(0,0));Ne=Math.sqrt(Math.pow(St.x-Lt.x,2)+Math.pow(St.y-Lt.y,2))}Math.abs(lt-Ye)>=2*Math.PI&&(Ye=0,lt=2*Math.PI),this.path.push({type:"arc",x:oe,y:Se,radius:Ne,startAngle:Ye,endAngle:lt,counterclockwise:rt})},D.prototype.arcTo=function(oe,Se,Ne,Ye,lt){throw new Error("arcTo not implemented.")},D.prototype.rect=function(oe,Se,Ne,Ye){if(isNaN(oe)||isNaN(Se)||isNaN(Ne)||isNaN(Ye))throw gs.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(oe,Se),this.lineTo(oe+Ne,Se),this.lineTo(oe+Ne,Se+Ye),this.lineTo(oe,Se+Ye),this.lineTo(oe,Se),this.lineTo(oe+Ne,Se),this.lineTo(oe,Se)},D.prototype.fillRect=function(oe,Se,Ne,Ye){if(isNaN(oe)||isNaN(Se)||isNaN(Ne)||isNaN(Ye))throw gs.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!P.call(this)){var lt={};this.lineCap!=="butt"&&(lt.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(lt.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(oe,Se,Ne,Ye),this.fill(),lt.hasOwnProperty("lineCap")&&(this.lineCap=lt.lineCap),lt.hasOwnProperty("lineJoin")&&(this.lineJoin=lt.lineJoin)}},D.prototype.strokeRect=function(oe,Se,Ne,Ye){if(isNaN(oe)||isNaN(Se)||isNaN(Ne)||isNaN(Ye))throw gs.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");W.call(this)||(this.beginPath(),this.rect(oe,Se,Ne,Ye),this.stroke())},D.prototype.clearRect=function(oe,Se,Ne,Ye){if(isNaN(oe)||isNaN(Se)||isNaN(Ne)||isNaN(Ye))throw gs.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(oe,Se,Ne,Ye))},D.prototype.save=function(oe){oe=typeof oe!="boolean"||oe;for(var Se=this.pdf.internal.getCurrentPageInfo().pageNumber,Ne=0;Ne<this.pdf.internal.getNumberOfPages();Ne++)this.pdf.setPage(Ne+1),this.pdf.internal.out("q");if(this.pdf.setPage(Se),oe){this.ctx.fontSize=this.pdf.internal.getFontSize();var Ye=new I(this.ctx);this.ctxStack.push(this.ctx),this.ctx=Ye}},D.prototype.restore=function(oe){oe=typeof oe!="boolean"||oe;for(var Se=this.pdf.internal.getCurrentPageInfo().pageNumber,Ne=0;Ne<this.pdf.internal.getNumberOfPages();Ne++)this.pdf.setPage(Ne+1),this.pdf.internal.out("Q");this.pdf.setPage(Se),oe&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},D.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var O=function(oe){var Se,Ne,Ye,lt;if(oe.isCanvasGradient===!0&&(oe=oe.getColor()),!oe)return{r:0,g:0,b:0,a:0,style:oe};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(oe))Se=0,Ne=0,Ye=0,lt=0;else{var rt=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(oe);if(rt!==null)Se=parseInt(rt[1]),Ne=parseInt(rt[2]),Ye=parseInt(rt[3]),lt=1;else if((rt=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(oe))!==null)Se=parseInt(rt[1]),Ne=parseInt(rt[2]),Ye=parseInt(rt[3]),lt=parseFloat(rt[4]);else{if(lt=1,typeof oe=="string"&&oe.charAt(0)!=="#"){var vt=new g4(oe);oe=vt.ok?vt.toHex():"#000000"}oe.length===4?(Se=oe.substring(1,2),Se+=Se,Ne=oe.substring(2,3),Ne+=Ne,Ye=oe.substring(3,4),Ye+=Ye):(Se=oe.substring(1,3),Ne=oe.substring(3,5),Ye=oe.substring(5,7)),Se=parseInt(Se,16),Ne=parseInt(Ne,16),Ye=parseInt(Ye,16)}}return{r:Se,g:Ne,b:Ye,a:lt,style:oe}},P=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},W=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};D.prototype.fillText=function(oe,Se,Ne,Ye){if(isNaN(Se)||isNaN(Ne)||typeof oe!="string")throw gs.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(Ye=isNaN(Ye)?void 0:Ye,!P.call(this)){var lt=ze(this.ctx.transform.rotation),rt=this.ctx.transform.scaleX;_e.call(this,{text:oe,x:Se,y:Ne,scale:rt,angle:lt,align:this.textAlign,maxWidth:Ye})}},D.prototype.strokeText=function(oe,Se,Ne,Ye){if(isNaN(Se)||isNaN(Ne)||typeof oe!="string")throw gs.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!W.call(this)){Ye=isNaN(Ye)?void 0:Ye;var lt=ze(this.ctx.transform.rotation),rt=this.ctx.transform.scaleX;_e.call(this,{text:oe,x:Se,y:Ne,scale:rt,renderingMode:"stroke",angle:lt,align:this.textAlign,maxWidth:Ye})}},D.prototype.measureText=function(oe){if(typeof oe!="string")throw gs.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var Se=this.pdf,Ne=this.pdf.internal.scaleFactor,Ye=Se.internal.getFontSize(),lt=Se.getStringUnitWidth(oe)*Ye/Se.internal.scaleFactor;return new function(rt){var vt=(rt=rt||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return vt}}),this}({width:lt*=Math.round(96*Ne/72*1e4)/1e4})},D.prototype.scale=function(oe,Se){if(isNaN(oe)||isNaN(Se))throw gs.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var Ne=new x(oe,0,0,Se,0,0);this.ctx.transform=this.ctx.transform.multiply(Ne)},D.prototype.rotate=function(oe){if(isNaN(oe))throw gs.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var Se=new x(Math.cos(oe),Math.sin(oe),-Math.sin(oe),Math.cos(oe),0,0);this.ctx.transform=this.ctx.transform.multiply(Se)},D.prototype.translate=function(oe,Se){if(isNaN(oe)||isNaN(Se))throw gs.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var Ne=new x(1,0,0,1,oe,Se);this.ctx.transform=this.ctx.transform.multiply(Ne)},D.prototype.transform=function(oe,Se,Ne,Ye,lt,rt){if(isNaN(oe)||isNaN(Se)||isNaN(Ne)||isNaN(Ye)||isNaN(lt)||isNaN(rt))throw gs.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var vt=new x(oe,Se,Ne,Ye,lt,rt);this.ctx.transform=this.ctx.transform.multiply(vt)},D.prototype.setTransform=function(oe,Se,Ne,Ye,lt,rt){oe=isNaN(oe)?1:oe,Se=isNaN(Se)?0:Se,Ne=isNaN(Ne)?0:Ne,Ye=isNaN(Ye)?1:Ye,lt=isNaN(lt)?0:lt,rt=isNaN(rt)?0:rt,this.ctx.transform=new x(oe,Se,Ne,Ye,lt,rt)};var z=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};D.prototype.drawImage=function(oe,Se,Ne,Ye,lt,rt,vt,St,Lt){var Wt=this.pdf.getImageProperties(oe),ar=1,hr=1,Cr=1,He=1;Ye!==void 0&&St!==void 0&&(Cr=St/Ye,He=Lt/lt,ar=Wt.width/Ye*St/Ye,hr=Wt.height/lt*Lt/lt),rt===void 0&&(rt=Se,vt=Ne,Se=0,Ne=0),Ye!==void 0&&St===void 0&&(St=Ye,Lt=lt),Ye===void 0&&St===void 0&&(St=Wt.width,Lt=Wt.height);var vr=this.ctx.transform.decompose(),Ur=ze(vr.rotate.shx),$r=new x,lr=($r=($r=($r=$r.multiply(vr.translate)).multiply(vr.skew)).multiply(vr.scale)).applyToRectangle(new o(rt-Se*Cr,vt-Ne*He,Ye*ar,lt*hr));if(this.autoPaging){for(var Wr,Sr=H.call(this,lr),Or=[],Rr=0;Rr<Sr.length;Rr+=1)Or.indexOf(Sr[Rr])===-1&&Or.push(Sr[Rr]);ce(Or);for(var On=Or[0],hn=Or[Or.length-1],ft=On;ft<hn+1;ft++){this.pdf.setPage(ft);var de=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],fe=ft===1?this.posY+this.margin[0]:this.margin[0],ye=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],qe=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],We=ft===1?0:ye+(ft-2)*qe;if(this.ctx.clip_path.length!==0){var Ct=this.path;Wr=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=ie(Wr,this.posX+this.margin[3],-We+fe+this.ctx.prevPageLastElemOffset),Ie.call(this,"fill",!0),this.path=Ct}var yt=JSON.parse(JSON.stringify(lr));yt=ie([yt],this.posX+this.margin[3],-We+fe+this.ctx.prevPageLastElemOffset)[0];var at=(ft>On||ft<hn)&&z.call(this);at&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],de,qe,null).clip().discardPath()),this.pdf.addImage(oe,"JPEG",yt.x,yt.y,yt.w,yt.h,null,null,Ur),at&&this.pdf.restoreGraphicsState()}}else this.pdf.addImage(oe,"JPEG",lr.x,lr.y,lr.w,lr.h,null,null,Ur)};var H=function(oe,Se,Ne){var Ye=[];Se=Se||this.pdf.internal.pageSize.width,Ne=Ne||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var lt=this.posY+this.ctx.prevPageLastElemOffset;switch(oe.type){default:case"mt":case"lt":Ye.push(Math.floor((oe.y+lt)/Ne)+1);break;case"arc":Ye.push(Math.floor((oe.y+lt-oe.radius)/Ne)+1),Ye.push(Math.floor((oe.y+lt+oe.radius)/Ne)+1);break;case"qct":var rt=je(this.ctx.lastPoint.x,this.ctx.lastPoint.y,oe.x1,oe.y1,oe.x,oe.y);Ye.push(Math.floor((rt.y+lt)/Ne)+1),Ye.push(Math.floor((rt.y+rt.h+lt)/Ne)+1);break;case"bct":var vt=xt(this.ctx.lastPoint.x,this.ctx.lastPoint.y,oe.x1,oe.y1,oe.x2,oe.y2,oe.x,oe.y);Ye.push(Math.floor((vt.y+lt)/Ne)+1),Ye.push(Math.floor((vt.y+vt.h+lt)/Ne)+1);break;case"rect":Ye.push(Math.floor((oe.y+lt)/Ne)+1),Ye.push(Math.floor((oe.y+oe.h+lt)/Ne)+1)}for(var St=0;St<Ye.length;St+=1)for(;this.pdf.internal.getNumberOfPages()<Ye[St];)Z.call(this);return Ye},Z=function(){var oe=this.fillStyle,Se=this.strokeStyle,Ne=this.font,Ye=this.lineCap,lt=this.lineWidth,rt=this.lineJoin;this.pdf.addPage(),this.fillStyle=oe,this.strokeStyle=Se,this.font=Ne,this.lineCap=Ye,this.lineWidth=lt,this.lineJoin=rt},ie=function(oe,Se,Ne){for(var Ye=0;Ye<oe.length;Ye++)switch(oe[Ye].type){case"bct":oe[Ye].x2+=Se,oe[Ye].y2+=Ne;case"qct":oe[Ye].x1+=Se,oe[Ye].y1+=Ne;default:oe[Ye].x+=Se,oe[Ye].y+=Ne}return oe},ce=function(oe){return oe.sort(function(Se,Ne){return Se-Ne})},he=function(oe,Se){var Ne=this.fillStyle,Ye=this.strokeStyle,lt=this.lineCap,rt=this.lineWidth,vt=Math.abs(rt*this.ctx.transform.scaleX),St=this.lineJoin;if(this.autoPaging){for(var Lt,Wt,ar=JSON.parse(JSON.stringify(this.path)),hr=JSON.parse(JSON.stringify(this.path)),Cr=[],He=0;He<hr.length;He++)if(hr[He].x!==void 0)for(var vr=H.call(this,hr[He]),Ur=0;Ur<vr.length;Ur+=1)Cr.indexOf(vr[Ur])===-1&&Cr.push(vr[Ur]);for(var $r=0;$r<Cr.length;$r++)for(;this.pdf.internal.getNumberOfPages()<Cr[$r];)Z.call(this);ce(Cr);for(var lr=Cr[0],Wr=Cr[Cr.length-1],Sr=lr;Sr<Wr+1;Sr++){this.pdf.setPage(Sr),this.fillStyle=Ne,this.strokeStyle=Ye,this.lineCap=lt,this.lineWidth=vt,this.lineJoin=St;var Or=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Rr=Sr===1?this.posY+this.margin[0]:this.margin[0],On=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],hn=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],ft=Sr===1?0:On+(Sr-2)*hn;if(this.ctx.clip_path.length!==0){var de=this.path;Lt=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=ie(Lt,this.posX+this.margin[3],-ft+Rr+this.ctx.prevPageLastElemOffset),Ie.call(this,oe,!0),this.path=de}if(Wt=JSON.parse(JSON.stringify(ar)),this.path=ie(Wt,this.posX+this.margin[3],-ft+Rr+this.ctx.prevPageLastElemOffset),Se===!1||Sr===0){var fe=(Sr>lr||Sr<Wr)&&z.call(this);fe&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Or,hn,null).clip().discardPath()),Ie.call(this,oe,Se),fe&&this.pdf.restoreGraphicsState()}this.lineWidth=rt}this.path=ar}else this.lineWidth=vt,Ie.call(this,oe,Se),this.lineWidth=rt},Ie=function(oe,Se){if((oe!=="stroke"||Se||!W.call(this))&&(oe==="stroke"||Se||!P.call(this))){for(var Ne,Ye,lt=[],rt=this.path,vt=0;vt<rt.length;vt++){var St=rt[vt];switch(St.type){case"begin":lt.push({begin:!0});break;case"close":lt.push({close:!0});break;case"mt":lt.push({start:St,deltas:[],abs:[]});break;case"lt":var Lt=lt.length;if(rt[vt-1]&&!isNaN(rt[vt-1].x)&&(Ne=[St.x-rt[vt-1].x,St.y-rt[vt-1].y],Lt>0)){for(;Lt>=0;Lt--)if(lt[Lt-1].close!==!0&&lt[Lt-1].begin!==!0){lt[Lt-1].deltas.push(Ne),lt[Lt-1].abs.push(St);break}}break;case"bct":Ne=[St.x1-rt[vt-1].x,St.y1-rt[vt-1].y,St.x2-rt[vt-1].x,St.y2-rt[vt-1].y,St.x-rt[vt-1].x,St.y-rt[vt-1].y],lt[lt.length-1].deltas.push(Ne);break;case"qct":var Wt=rt[vt-1].x+2/3*(St.x1-rt[vt-1].x),ar=rt[vt-1].y+2/3*(St.y1-rt[vt-1].y),hr=St.x+2/3*(St.x1-St.x),Cr=St.y+2/3*(St.y1-St.y),He=St.x,vr=St.y;Ne=[Wt-rt[vt-1].x,ar-rt[vt-1].y,hr-rt[vt-1].x,Cr-rt[vt-1].y,He-rt[vt-1].x,vr-rt[vt-1].y],lt[lt.length-1].deltas.push(Ne);break;case"arc":lt.push({deltas:[],abs:[],arc:!0}),Array.isArray(lt[lt.length-1].abs)&&lt[lt.length-1].abs.push(St)}}Ye=Se?null:oe==="stroke"?"stroke":"fill";for(var Ur=!1,$r=0;$r<lt.length;$r++)if(lt[$r].arc)for(var lr=lt[$r].abs,Wr=0;Wr<lr.length;Wr++){var Sr=lr[Wr];Sr.type==="arc"?Pe.call(this,Sr.x,Sr.y,Sr.radius,Sr.startAngle,Sr.endAngle,Sr.counterclockwise,void 0,Se,!Ur):Ue.call(this,Sr.x,Sr.y),Ur=!0}else if(lt[$r].close===!0)this.pdf.internal.out("h"),Ur=!1;else if(lt[$r].begin!==!0){var Or=lt[$r].start.x,Rr=lt[$r].start.y;Fe.call(this,lt[$r].deltas,Or,Rr),Ur=!0}Ye&&xe.call(this,Ye),Se&&nt.call(this)}},Ve=function(oe){var Se=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,Ne=Se*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return oe-Ne;case"top":return oe+Se-Ne;case"hanging":return oe+Se-2*Ne;case"middle":return oe+Se/2-Ne;default:return oe}},Me=function(oe){return oe+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};D.prototype.createLinearGradient=function(){var oe=function(){};return oe.colorStops=[],oe.addColorStop=function(Se,Ne){this.colorStops.push([Se,Ne])},oe.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},oe.isCanvasGradient=!0,oe},D.prototype.createPattern=function(){return this.createLinearGradient()},D.prototype.createRadialGradient=function(){return this.createLinearGradient()};var Pe=function(oe,Se,Ne,Ye,lt,rt,vt,St,Lt){for(var Wt=ht.call(this,Ne,Ye,lt,rt),ar=0;ar<Wt.length;ar++){var hr=Wt[ar];ar===0&&(Lt?pe.call(this,hr.x1+oe,hr.y1+Se):Ue.call(this,hr.x1+oe,hr.y1+Se)),pt.call(this,oe,Se,hr.x2,hr.y2,hr.x3,hr.y3,hr.x4,hr.y4)}St?nt.call(this):xe.call(this,vt)},xe=function(oe){switch(oe){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},nt=function(){this.pdf.clip(),this.pdf.discardPath()},pe=function(oe,Se){this.pdf.internal.out(i(oe)+" "+l(Se)+" m")},_e=function(oe){var Se;switch(oe.align){case"right":case"end":Se="right";break;case"center":Se="center";break;default:Se="left"}var Ne,Ye,lt,rt=this.pdf.getTextDimensions(oe.text),vt=Ve.call(this,oe.y),St=Me.call(this,vt)-rt.h,Lt=this.ctx.transform.applyToPoint(new m(oe.x,vt));if(this.autoPaging){var Wt=this.ctx.transform.decompose(),ar=new x;ar=(ar=(ar=ar.multiply(Wt.translate)).multiply(Wt.skew)).multiply(Wt.scale);for(var hr=this.ctx.transform.applyToRectangle(new o(oe.x,vt,rt.w,rt.h)),Cr=ar.applyToRectangle(new o(oe.x,St,rt.w,rt.h)),He=H.call(this,Cr),vr=[],Ur=0;Ur<He.length;Ur+=1)vr.indexOf(He[Ur])===-1&&vr.push(He[Ur]);ce(vr);for(var $r=vr[0],lr=vr[vr.length-1],Wr=$r;Wr<lr+1;Wr++){this.pdf.setPage(Wr);var Sr=Wr===1?this.posY+this.margin[0]:this.margin[0],Or=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Rr=this.pdf.internal.pageSize.height-this.margin[2],On=Rr-this.margin[0],hn=this.pdf.internal.pageSize.width-this.margin[1],ft=hn-this.margin[3],de=Wr===1?0:Or+(Wr-2)*On;if(this.ctx.clip_path.length!==0){var fe=this.path;Ne=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=ie(Ne,this.posX+this.margin[3],-1*de+Sr),Ie.call(this,"fill",!0),this.path=fe}var ye=ie([JSON.parse(JSON.stringify(Cr))],this.posX+this.margin[3],-de+Sr+this.ctx.prevPageLastElemOffset)[0];oe.scale>=.01&&(Ye=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Ye*oe.scale),lt=this.lineWidth,this.lineWidth=lt*oe.scale);var qe=this.autoPaging!=="text";if(qe||ye.y+ye.h<=Rr){if(qe||ye.y>=Sr&&ye.x<=hn){var We=qe?oe.text:this.pdf.splitTextToSize(oe.text,oe.maxWidth||hn-ye.x)[0],Ct=ie([JSON.parse(JSON.stringify(hr))],this.posX+this.margin[3],-de+Sr+this.ctx.prevPageLastElemOffset)[0],yt=qe&&(Wr>$r||Wr<lr)&&z.call(this);yt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],ft,On,null).clip().discardPath()),this.pdf.text(We,Ct.x,Ct.y,{angle:oe.angle,align:Se,renderingMode:oe.renderingMode}),yt&&this.pdf.restoreGraphicsState()}}else ye.y<Rr&&(this.ctx.prevPageLastElemOffset+=Rr-ye.y);oe.scale>=.01&&(this.pdf.setFontSize(Ye),this.lineWidth=lt)}}else oe.scale>=.01&&(Ye=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Ye*oe.scale),lt=this.lineWidth,this.lineWidth=lt*oe.scale),this.pdf.text(oe.text,Lt.x+this.posX,Lt.y+this.posY,{angle:oe.angle,align:Se,renderingMode:oe.renderingMode,maxWidth:oe.maxWidth}),oe.scale>=.01&&(this.pdf.setFontSize(Ye),this.lineWidth=lt)},Ue=function(oe,Se,Ne,Ye){Ne=Ne||0,Ye=Ye||0,this.pdf.internal.out(i(oe+Ne)+" "+l(Se+Ye)+" l")},Fe=function(oe,Se,Ne){return this.pdf.lines(oe,Se,Ne,null,null)},pt=function(oe,Se,Ne,Ye,lt,rt,vt,St){this.pdf.internal.out([n(h(Ne+oe)),n(d(Ye+Se)),n(h(lt+oe)),n(d(rt+Se)),n(h(vt+oe)),n(d(St+Se)),"c"].join(" "))},ht=function(oe,Se,Ne,Ye){for(var lt=2*Math.PI,rt=Math.PI/2;Se>Ne;)Se-=lt;var vt=Math.abs(Ne-Se);vt<lt&&Ye&&(vt=lt-vt);for(var St=[],Lt=Ye?-1:1,Wt=Se;vt>1e-5;){var ar=Wt+Lt*Math.min(vt,rt);St.push(Je.call(this,oe,Wt,ar)),vt-=Math.abs(ar-Wt),Wt=ar}return St},Je=function(oe,Se,Ne){var Ye=(Ne-Se)/2,lt=oe*Math.cos(Ye),rt=oe*Math.sin(Ye),vt=lt,St=-rt,Lt=vt*vt+St*St,Wt=Lt+vt*lt+St*rt,ar=4/3*(Math.sqrt(2*Lt*Wt)-Wt)/(vt*rt-St*lt),hr=vt-ar*St,Cr=St+ar*vt,He=hr,vr=-Cr,Ur=Ye+Se,$r=Math.cos(Ur),lr=Math.sin(Ur);return{x1:oe*Math.cos(Se),y1:oe*Math.sin(Se),x2:hr*$r-Cr*lr,y2:hr*lr+Cr*$r,x3:He*$r-vr*lr,y3:He*lr+vr*$r,x4:oe*Math.cos(Ne),y4:oe*Math.sin(Ne)}},ze=function(oe){return 180*oe/Math.PI},je=function(oe,Se,Ne,Ye,lt,rt){var vt=oe+.5*(Ne-oe),St=Se+.5*(Ye-Se),Lt=lt+.5*(Ne-lt),Wt=rt+.5*(Ye-rt),ar=Math.min(oe,lt,vt,Lt),hr=Math.max(oe,lt,vt,Lt),Cr=Math.min(Se,rt,St,Wt),He=Math.max(Se,rt,St,Wt);return new o(ar,Cr,hr-ar,He-Cr)},xt=function(oe,Se,Ne,Ye,lt,rt,vt,St){var Lt,Wt,ar,hr,Cr,He,vr,Ur,$r,lr,Wr,Sr,Or,Rr,On=Ne-oe,hn=Ye-Se,ft=lt-Ne,de=rt-Ye,fe=vt-lt,ye=St-rt;for(Wt=0;Wt<41;Wt++)$r=(vr=(ar=oe+(Lt=Wt/40)*On)+Lt*((Cr=Ne+Lt*ft)-ar))+Lt*(Cr+Lt*(lt+Lt*fe-Cr)-vr),lr=(Ur=(hr=Se+Lt*hn)+Lt*((He=Ye+Lt*de)-hr))+Lt*(He+Lt*(rt+Lt*ye-He)-Ur),Wt==0?(Wr=$r,Sr=lr,Or=$r,Rr=lr):(Wr=Math.min(Wr,$r),Sr=Math.min(Sr,lr),Or=Math.max(Or,$r),Rr=Math.max(Rr,lr));return new o(Math.round(Wr),Math.round(Sr),Math.round(Or-Wr),Math.round(Rr-Sr))},Re=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var oe,Se,Ne=(oe=this.ctx.lineDash,Se=this.ctx.lineDashOffset,JSON.stringify({lineDash:oe,lineDashOffset:Se}));this.prevLineDash!==Ne&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=Ne)}}})(fn.API),(function(e){var n=function(m){var o,x,E,I,D,O,P,W,z,H;for(x=[],E=0,I=(m+=o="\0\0\0\0".slice(m.length%4||4)).length;I>E;E+=4)(D=(m.charCodeAt(E)<<24)+(m.charCodeAt(E+1)<<16)+(m.charCodeAt(E+2)<<8)+m.charCodeAt(E+3))!==0?(O=(D=((D=((D=((D=(D-(H=D%85))/85)-(z=D%85))/85)-(W=D%85))/85)-(P=D%85))/85)%85,x.push(O+33,P+33,W+33,z+33,H+33)):x.push(122);return(function(Z,ie){for(var ce=ie;ce>0;ce--)Z.pop()})(x,o.length),String.fromCharCode.apply(String,x)+"~>"},i=function(m){var o,x,E,I,D,O=String,P="length",W=255,z="charCodeAt",H="slice",Z="replace";for(m[H](-2),m=m[H](0,-2)[Z](/\s/g,"")[Z]("z","!!!!!"),E=[],I=0,D=(m+=o="uuuuu"[H](m[P]%5||5))[P];D>I;I+=5)x=52200625*(m[z](I)-33)+614125*(m[z](I+1)-33)+7225*(m[z](I+2)-33)+85*(m[z](I+3)-33)+(m[z](I+4)-33),E.push(W&x>>24,W&x>>16,W&x>>8,W&x);return(function(ie,ce){for(var he=ce;he>0;he--)ie.pop()})(E,o[P]),O.fromCharCode.apply(O,E)},l=function(m){return m.split("").map(function(o){return("0"+o.charCodeAt().toString(16)).slice(-2)}).join("")+">"},h=function(m){var o=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((m=m.replace(/\s/g,"")).indexOf(">")!==-1&&(m=m.substr(0,m.indexOf(">"))),m.length%2&&(m+="0"),o.test(m)===!1)return"";for(var x="",E=0;E<m.length;E+=2)x+=String.fromCharCode("0x"+(m[E]+m[E+1]));return x},d=function(m){for(var o=new Uint8Array(m.length),x=m.length;x--;)o[x]=m.charCodeAt(x);return(o=R_(o)).reduce(function(E,I){return E+String.fromCharCode(I)},"")};e.processDataByFilters=function(m,o){var x=0,E=m||"",I=[];for(typeof(o=o||[])=="string"&&(o=[o]),x=0;x<o.length;x+=1)switch(o[x]){case"ASCII85Decode":case"/ASCII85Decode":E=i(E),I.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":E=n(E),I.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":E=h(E),I.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":E=l(E),I.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":E=d(E),I.push("/FlateDecode");break;default:throw new Error('The filter: "'+o[x]+'" is not implemented')}return{data:E,reverseChain:I.reverse().join(" ")}}})(fn.API),(function(e){e.loadFile=function(n,i,l){return(function(h,d,m){d=d!==!1,m=typeof m=="function"?m:function(){};var o=void 0;try{o=(function(x,E,I){var D=new XMLHttpRequest,O=0,P=function(W){var z=W.length,H=[],Z=String.fromCharCode;for(O=0;O<z;O+=1)H.push(Z(255&W.charCodeAt(O)));return H.join("")};if(D.open("GET",x,!E),D.overrideMimeType("text/plain; charset=x-user-defined"),E===!1&&(D.onload=function(){D.status===200?I(P(this.responseText)):I(void 0)}),D.send(null),E&&D.status===200)return P(D.responseText)})(h,d,m)}catch{}return o})(n,i,l)},e.loadImageFile=e.loadFile})(fn.API),(function(e){function n(){return(kn.html2canvas?Promise.resolve(kn.html2canvas):M1(()=>Promise.resolve().then(()=>u7),void 0)).catch(function(o){return Promise.reject(new Error("Could not load html2canvas: "+o))}).then(function(o){return o.default?o.default:o})}function i(){return(kn.DOMPurify?Promise.resolve(kn.DOMPurify):M1(()=>import("./purify.es-C65SP4u9.js"),[])).catch(function(o){return Promise.reject(new Error("Could not load dompurify: "+o))}).then(function(o){return o.default?o.default:o})}var l=function(o){var x=rs(o);return x==="undefined"?"undefined":x==="string"||o instanceof String?"string":x==="number"||o instanceof Number?"number":x==="function"||o instanceof Function?"function":o&&o.constructor===Array?"array":o&&o.nodeType===1?"element":x==="object"?"object":"unknown"},h=function(o,x){var E=document.createElement(o);for(var I in x.className&&(E.className=x.className),x.innerHTML&&x.dompurify&&(E.innerHTML=x.dompurify.sanitize(x.innerHTML)),x.style)E.style[I]=x.style[I];return E},d=function o(x,E){for(var I=x.nodeType===3?document.createTextNode(x.nodeValue):x.cloneNode(!1),D=x.firstChild;D;D=D.nextSibling)E!==!0&&D.nodeType===1&&D.nodeName==="SCRIPT"||I.appendChild(o(D,E));return x.nodeType===1&&(x.nodeName==="CANVAS"?(I.width=x.width,I.height=x.height,I.getContext("2d").drawImage(x,0,0)):x.nodeName!=="TEXTAREA"&&x.nodeName!=="SELECT"||(I.value=x.value),I.addEventListener("load",function(){I.scrollTop=x.scrollTop,I.scrollLeft=x.scrollLeft},!0)),I},m=function o(x){var E=Object.assign(o.convert(Promise.resolve()),JSON.parse(JSON.stringify(o.template))),I=o.convert(Promise.resolve(),E);return(I=I.setProgress(1,o,1,[o])).set(x)};(m.prototype=Object.create(Promise.prototype)).constructor=m,m.convert=function(o,x){return o.__proto__=x||m.prototype,o},m.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},m.prototype.from=function(o,x){return this.then(function(){switch(x=x||(function(E){switch(l(E)){case"string":return"string";case"element":return E.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}})(o),x){case"string":return this.then(i).then(function(E){return this.set({src:h("div",{innerHTML:o,dompurify:E})})});case"element":return this.set({src:o});case"canvas":return this.set({canvas:o});case"img":return this.set({img:o});default:return this.error("Unknown source type.")}})},m.prototype.to=function(o){switch(o){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},m.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var o={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},x=d(this.prop.src,this.opt.html2canvas.javascriptEnabled);x.tagName==="BODY"&&(o.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=h("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=h("div",{className:"html2pdf__container",style:o}),this.prop.container.appendChild(x),this.prop.container.firstChild.appendChild(h("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},m.prototype.toCanvas=function(){var o=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(o).then(n).then(function(x){var E=Object.assign({},this.opt.html2canvas);return delete E.onrendered,x(this.prop.container,E)}).then(function(x){(this.opt.html2canvas.onrendered||function(){})(x),this.prop.canvas=x,document.body.removeChild(this.prop.overlay)})},m.prototype.toContext2d=function(){var o=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(o).then(n).then(function(x){var E=this.opt.jsPDF,I=this.opt.fontFaces,D=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,O=Object.assign({async:!0,allowTaint:!0,scale:D,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete O.onrendered,E.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,E.context2d.posX=this.opt.x,E.context2d.posY=this.opt.y,E.context2d.margin=this.opt.margin,E.context2d.fontFaces=I,I)for(var P=0;P<I.length;++P){var W=I[P],z=W.src.find(function(H){return H.format==="truetype"});z&&E.addFont(z.url,W.ref.name,W.ref.style)}return O.windowHeight=O.windowHeight||0,O.windowHeight=O.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):O.windowHeight,E.context2d.save(!0),x(this.prop.container,O)}).then(function(x){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(x),this.prop.canvas=x,document.body.removeChild(this.prop.overlay)})},m.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var o=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=o})},m.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},m.prototype.output=function(o,x,E){return(E=E||"pdf").toLowerCase()==="img"||E.toLowerCase()==="image"?this.outputImg(o,x):this.outputPdf(o,x)},m.prototype.outputPdf=function(o,x){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(o,x)})},m.prototype.outputImg=function(o){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(o){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+o+'" is not supported.'}})},m.prototype.save=function(o){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(o?{filename:o}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},m.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},m.prototype.set=function(o){if(l(o)!=="object")return this;var x=Object.keys(o||{}).map(function(E){if(E in m.template.prop)return function(){this.prop[E]=o[E]};switch(E){case"margin":return this.setMargin.bind(this,o.margin);case"jsPDF":return function(){return this.opt.jsPDF=o.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,o.pageSize);default:return function(){this.opt[E]=o[E]}}},this);return this.then(function(){return this.thenList(x)})},m.prototype.get=function(o,x){return this.then(function(){var E=o in m.template.prop?this.prop[o]:this.opt[o];return x?x(E):E})},m.prototype.setMargin=function(o){return this.then(function(){switch(l(o)){case"number":o=[o,o,o,o];case"array":if(o.length===2&&(o=[o[0],o[1],o[0],o[1]]),o.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=o}).then(this.setPageSize)},m.prototype.setPageSize=function(o){function x(E,I){return Math.floor(E*I/72*96)}return this.then(function(){(o=o||fn.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(o.inner={width:o.width-this.opt.margin[1]-this.opt.margin[3],height:o.height-this.opt.margin[0]-this.opt.margin[2]},o.inner.px={width:x(o.inner.width,o.k),height:x(o.inner.height,o.k)},o.inner.ratio=o.inner.height/o.inner.width),this.prop.pageSize=o})},m.prototype.setProgress=function(o,x,E,I){return o!=null&&(this.progress.val=o),x!=null&&(this.progress.state=x),E!=null&&(this.progress.n=E),I!=null&&(this.progress.stack=I),this.progress.ratio=this.progress.val/this.progress.state,this},m.prototype.updateProgress=function(o,x,E,I){return this.setProgress(o?this.progress.val+o:null,x||null,E?this.progress.n+E:null,I?this.progress.stack.concat(I):null)},m.prototype.then=function(o,x){var E=this;return this.thenCore(o,x,function(I,D){return E.updateProgress(null,null,1,[I]),Promise.prototype.then.call(this,function(O){return E.updateProgress(null,I),O}).then(I,D).then(function(O){return E.updateProgress(1),O})})},m.prototype.thenCore=function(o,x,E){E=E||Promise.prototype.then;var I=this;o&&(o=o.bind(I)),x&&(x=x.bind(I));var D=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?I:m.convert(Object.assign({},I),Promise.prototype),O=E.call(D,o,x);return m.convert(O,I.__proto__)},m.prototype.thenExternal=function(o,x){return Promise.prototype.then.call(this,o,x)},m.prototype.thenList=function(o){var x=this;return o.forEach(function(E){x=x.thenCore(E)}),x},m.prototype.catch=function(o){o&&(o=o.bind(this));var x=Promise.prototype.catch.call(this,o);return m.convert(x,this)},m.prototype.catchExternal=function(o){return Promise.prototype.catch.call(this,o)},m.prototype.error=function(o){return this.then(function(){throw new Error(o)})},m.prototype.using=m.prototype.set,m.prototype.saveAs=m.prototype.save,m.prototype.export=m.prototype.output,m.prototype.run=m.prototype.then,fn.getPageSize=function(o,x,E){if(rs(o)==="object"){var I=o;o=I.orientation,x=I.unit||x,E=I.format||E}x=x||"mm",E=E||"a4",o=(""+(o||"P")).toLowerCase();var D,O=(""+E).toLowerCase(),P={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(x){case"pt":D=1;break;case"mm":D=72/25.4;break;case"cm":D=72/2.54;break;case"in":D=72;break;case"px":D=.75;break;case"pc":case"em":D=12;break;case"ex":D=6;break;default:throw"Invalid unit: "+x}var W,z=0,H=0;if(P.hasOwnProperty(O))z=P[O][1]/D,H=P[O][0]/D;else try{z=E[1],H=E[0]}catch{throw new Error("Invalid format: "+E)}if(o==="p"||o==="portrait")o="p",H>z&&(W=H,H=z,z=W);else{if(o!=="l"&&o!=="landscape")throw"Invalid orientation: "+o;o="l",z>H&&(W=H,H=z,z=W)}return{width:H,height:z,unit:x,k:D,orientation:o}},e.html=function(o,x){(x=x||{}).callback=x.callback||function(){},x.html2canvas=x.html2canvas||{},x.html2canvas.canvas=x.html2canvas.canvas||this.canvas,x.jsPDF=x.jsPDF||this,x.fontFaces=x.fontFaces?x.fontFaces.map(Z1):null;var E=new m(x);return x.worker?E:E.from(o).doCallback()}})(fn.API),fn.API.addJS=function(e){return VC=e,this.internal.events.subscribe("postPutResources",function(){C0=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(C0+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),jC=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+VC+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){C0!==void 0&&jC!==void 0&&this.internal.out("/Names <</JavaScript "+C0+" 0 R>>")}),this},(function(e){var n;e.events.push(["postPutResources",function(){var i=this,l=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var h=i.outline.render().split(/\r\n/),d=0;d<h.length;d++){var m=h[d],o=l.exec(m);if(o!=null){var x=o[1];i.internal.newObjectDeferredBegin(x,!1)}i.internal.write(m)}if(this.outline.createNamedDestinations){var E=this.internal.pages.length,I=[];for(d=0;d<E;d++){var D=i.internal.newObject();I.push(D);var O=i.internal.getPageInfo(d+1);i.internal.write("<< /D["+O.objId+" 0 R /XYZ null null null]>> endobj")}var P=i.internal.newObject();for(i.internal.write("<< /Names [ "),d=0;d<I.length;d++)i.internal.write("(page_"+(d+1)+")"+I[d]+" 0 R");i.internal.write(" ] >>","endobj"),n=i.internal.newObject(),i.internal.write("<< /Dests "+P+" 0 R"),i.internal.write(">>","endobj")}}]),e.events.push(["putCatalog",function(){var i=this;i.outline.root.children.length>0&&(i.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&i.internal.write("/Names "+n+" 0 R"))}]),e.events.push(["initialized",function(){var i=this;i.outline={createNamedDestinations:!1,root:{children:[]}},i.outline.add=function(l,h,d){var m={title:h,options:d,children:[]};return l==null&&(l=this.root),l.children.push(m),m},i.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=i,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},i.outline.genIds_r=function(l){l.id=i.internal.newObjectDeferred();for(var h=0;h<l.children.length;h++)this.genIds_r(l.children[h])},i.outline.renderRoot=function(l){this.objStart(l),this.line("/Type /Outlines"),l.children.length>0&&(this.line("/First "+this.makeRef(l.children[0])),this.line("/Last "+this.makeRef(l.children[l.children.length-1]))),this.line("/Count "+this.count_r({count:0},l)),this.objEnd()},i.outline.renderItems=function(l){for(var h=this.ctx.pdf.internal.getVerticalCoordinateString,d=0;d<l.children.length;d++){var m=l.children[d];this.objStart(m),this.line("/Title "+this.makeString(m.title)),this.line("/Parent "+this.makeRef(l)),d>0&&this.line("/Prev "+this.makeRef(l.children[d-1])),d<l.children.length-1&&this.line("/Next "+this.makeRef(l.children[d+1])),m.children.length>0&&(this.line("/First "+this.makeRef(m.children[0])),this.line("/Last "+this.makeRef(m.children[m.children.length-1])));var o=this.count=this.count_r({count:0},m);if(o>0&&this.line("/Count "+o),m.options&&m.options.pageNumber){var x=i.internal.getPageInfo(m.options.pageNumber);this.line("/Dest ["+x.objId+" 0 R /XYZ 0 "+h(0)+" 0]")}this.objEnd()}for(var E=0;E<l.children.length;E++)this.renderItems(l.children[E])},i.outline.line=function(l){this.ctx.val+=l+`\r
`},i.outline.makeRef=function(l){return l.id+" 0 R"},i.outline.makeString=function(l){return"("+i.internal.pdfEscape(l)+")"},i.outline.objStart=function(l){this.ctx.val+=`\r
`+l.id+` 0 obj\r
<<\r
`},i.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},i.outline.count_r=function(l,h){for(var d=0;d<h.children.length;d++)l.count++,this.count_r(l,h.children[d]);return l.count}}])})(fn.API),(function(e){var n=[192,193,194,195,196,197,198,199];e.processJPEG=function(i,l,h,d,m,o){var x,E=this.decode.DCT_DECODE,I=null;if(typeof i=="string"||this.__addimage__.isArrayBuffer(i)||this.__addimage__.isArrayBufferView(i)){switch(i=m||i,i=this.__addimage__.isArrayBuffer(i)?new Uint8Array(i):i,x=(function(D){for(var O,P=256*D.charCodeAt(4)+D.charCodeAt(5),W=D.length,z={width:0,height:0,numcomponents:1},H=4;H<W;H+=2){if(H+=P,n.indexOf(D.charCodeAt(H+1))!==-1){O=256*D.charCodeAt(H+5)+D.charCodeAt(H+6),z={width:256*D.charCodeAt(H+7)+D.charCodeAt(H+8),height:O,numcomponents:D.charCodeAt(H+9)};break}P=256*D.charCodeAt(H+2)+D.charCodeAt(H+3)}return z})(i=this.__addimage__.isArrayBufferView(i)?this.__addimage__.arrayBufferToBinaryString(i):i),x.numcomponents){case 1:o=this.color_spaces.DEVICE_GRAY;break;case 4:o=this.color_spaces.DEVICE_CMYK;break;case 3:o=this.color_spaces.DEVICE_RGB}I={data:i,width:x.width,height:x.height,colorSpace:o,bitsPerComponent:8,filter:E,index:l,alias:h}}return I}})(fn.API),fn.API.processPNG=function(e,n,i,l){if(this.__addimage__.isArrayBuffer(e)&&(e=new Uint8Array(e)),this.__addimage__.isArrayBufferView(e)){var h,d=lj(e,{checkCrc:!0}),m=d.width,o=d.height,x=d.channels,E=d.palette,I=d.depth;h=E&&x===1?(function(Pe){for(var xe=Pe.width,nt=Pe.height,pe=Pe.data,_e=Pe.palette,Ue=Pe.depth,Fe=!1,pt=[],ht=[],Je=void 0,ze=!1,je=0,xt=0;xt<_e.length;xt++){var Re=$B(_e[xt],4),oe=Re[0],Se=Re[1],Ne=Re[2],Ye=Re[3];pt.push(oe,Se,Ne),Ye!=null&&(Ye===0?(je++,ht.length<1&&ht.push(xt)):Ye<255&&(ze=!0))}if(ze||je>1){Fe=!0,ht=void 0;var lt=xe*nt;Je=new Uint8Array(lt);for(var rt=new DataView(pe.buffer),vt=0;vt<lt;vt++){var St=Y1(rt,vt,Ue),Lt=$B(_e[St],4)[3];Je[vt]=Lt}}else je===0&&(ht=void 0);return{colorSpace:"Indexed",colorsPerPixel:1,sMaskBitsPerComponent:Fe?8:void 0,colorBytes:pe,alphaBytes:Je,needSMask:Fe,palette:pt,mask:ht}})(d):x===2||x===4?(function(Pe){for(var xe=Pe.data,nt=Pe.width,pe=Pe.height,_e=Pe.channels,Ue=Pe.depth,Fe=_e===2?"DeviceGray":"DeviceRGB",pt=_e-1,ht=nt*pe,Je=pt,ze=ht*Je,je=1*ht,xt=Math.ceil(ze*Ue/8),Re=Math.ceil(je*Ue/8),oe=new Uint8Array(xt),Se=new Uint8Array(Re),Ne=new DataView(xe.buffer),Ye=new DataView(oe.buffer),lt=new DataView(Se.buffer),rt=!1,vt=0;vt<ht;vt++){for(var St=vt*_e,Lt=0;Lt<Je;Lt++)JC(Ye,Y1(Ne,St+Lt,Ue),vt*Je+Lt,Ue);var Wt=Y1(Ne,St+Je,Ue);Wt<(1<<Ue)-1&&(rt=!0),JC(lt,Wt,1*vt,Ue)}return{colorSpace:Fe,colorsPerPixel:pt,sMaskBitsPerComponent:rt?Ue:void 0,colorBytes:oe,alphaBytes:Se,needSMask:rt}})(d):(function(Pe){var xe=Pe.data,nt=Pe.channels===1?"DeviceGray":"DeviceRGB";return{colorSpace:nt,colorsPerPixel:nt==="DeviceGray"?1:3,colorBytes:xe instanceof Uint16Array?(function(pe){for(var _e=pe.length,Ue=new Uint8Array(2*_e),Fe=new DataView(Ue.buffer,Ue.byteOffset,Ue.byteLength),pt=0;pt<_e;pt++)Fe.setUint16(2*pt,pe[pt],!1);return Ue})(xe):xe,needSMask:!1}})(d);var D,O,P,W=h,z=W.colorSpace,H=W.colorsPerPixel,Z=W.sMaskBitsPerComponent,ie=W.colorBytes,ce=W.alphaBytes,he=W.needSMask,Ie=W.palette,Ve=W.mask,Me=null;return l!==fn.API.image_compression.NONE&&typeof R_=="function"?(Me=(function(Pe){var xe;switch(Pe){case fn.API.image_compression.FAST:xe=11;break;case fn.API.image_compression.MEDIUM:xe=13;break;case fn.API.image_compression.SLOW:xe=14;break;default:xe=12}return xe})(l),D=this.decode.FLATE_DECODE,O="/Predictor ".concat(Me," /Colors ").concat(H," /BitsPerComponent ").concat(I," /Columns ").concat(m),e=$C(ie,Math.ceil(m*H*I/8),H,I,l),he&&(P=$C(ce,Math.ceil(m*Z/8),1,Z,l))):(D=void 0,O=void 0,e=ie,he&&(P=ce)),(this.__addimage__.isArrayBuffer(e)||this.__addimage__.isArrayBufferView(e))&&(e=this.__addimage__.arrayBufferToBinaryString(e)),(P&&this.__addimage__.isArrayBuffer(P)||this.__addimage__.isArrayBufferView(P))&&(P=this.__addimage__.arrayBufferToBinaryString(P)),{alias:i,data:e,index:n,filter:D,decodeParameters:O,transparency:Ve,palette:Ie,sMask:P,predictor:Me,width:m,height:o,bitsPerComponent:I,sMaskBitsPerComponent:Z,colorSpace:z}}},(function(e){e.processGIF89A=function(n,i,l,h){var d=new Ij(n),m=d.width,o=d.height,x=[];d.decodeAndBlitFrameRGBA(0,x);var E={data:x,width:m,height:o},I=new J1(100).encode(E,100);return e.processJPEG.call(this,I,i,l,h)},e.processGIF87A=e.processGIF89A})(fn.API),Eu.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var e=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(e);for(var n=0;n<e;n++){var i=this.datav.getUint8(this.pos++,!0),l=this.datav.getUint8(this.pos++,!0),h=this.datav.getUint8(this.pos++,!0),d=this.datav.getUint8(this.pos++,!0);this.palette[n]={red:h,green:l,blue:i,quad:d}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},Eu.prototype.parseBGR=function(){this.pos=this.offset;try{var e="bit"+this.bitPP,n=this.width*this.height*4;this.data=new Uint8Array(n),this[e]()}catch(i){gs.log("bit decode error:"+i)}},Eu.prototype.bit1=function(){var e,n=Math.ceil(this.width/8),i=n%4;for(e=this.height-1;e>=0;e--){for(var l=this.bottom_up?e:this.height-1-e,h=0;h<n;h++)for(var d=this.datav.getUint8(this.pos++,!0),m=l*this.width*4+8*h*4,o=0;o<8&&8*h+o<this.width;o++){var x=this.palette[d>>7-o&1];this.data[m+4*o]=x.blue,this.data[m+4*o+1]=x.green,this.data[m+4*o+2]=x.red,this.data[m+4*o+3]=255}i!==0&&(this.pos+=4-i)}},Eu.prototype.bit4=function(){for(var e=Math.ceil(this.width/2),n=e%4,i=this.height-1;i>=0;i--){for(var l=this.bottom_up?i:this.height-1-i,h=0;h<e;h++){var d=this.datav.getUint8(this.pos++,!0),m=l*this.width*4+2*h*4,o=d>>4,x=15&d,E=this.palette[o];if(this.data[m]=E.blue,this.data[m+1]=E.green,this.data[m+2]=E.red,this.data[m+3]=255,2*h+1>=this.width)break;E=this.palette[x],this.data[m+4]=E.blue,this.data[m+4+1]=E.green,this.data[m+4+2]=E.red,this.data[m+4+3]=255}n!==0&&(this.pos+=4-n)}},Eu.prototype.bit8=function(){for(var e=this.width%4,n=this.height-1;n>=0;n--){for(var i=this.bottom_up?n:this.height-1-n,l=0;l<this.width;l++){var h=this.datav.getUint8(this.pos++,!0),d=i*this.width*4+4*l;if(h<this.palette.length){var m=this.palette[h];this.data[d]=m.red,this.data[d+1]=m.green,this.data[d+2]=m.blue,this.data[d+3]=255}else this.data[d]=255,this.data[d+1]=255,this.data[d+2]=255,this.data[d+3]=255}e!==0&&(this.pos+=4-e)}},Eu.prototype.bit15=function(){for(var e=this.width%3,n=parseInt("11111",2),i=this.height-1;i>=0;i--){for(var l=this.bottom_up?i:this.height-1-i,h=0;h<this.width;h++){var d=this.datav.getUint16(this.pos,!0);this.pos+=2;var m=(d&n)/n*255|0,o=(d>>5&n)/n*255|0,x=(d>>10&n)/n*255|0,E=d>>15?255:0,I=l*this.width*4+4*h;this.data[I]=x,this.data[I+1]=o,this.data[I+2]=m,this.data[I+3]=E}this.pos+=e}},Eu.prototype.bit16=function(){for(var e=this.width%3,n=parseInt("11111",2),i=parseInt("111111",2),l=this.height-1;l>=0;l--){for(var h=this.bottom_up?l:this.height-1-l,d=0;d<this.width;d++){var m=this.datav.getUint16(this.pos,!0);this.pos+=2;var o=(m&n)/n*255|0,x=(m>>5&i)/i*255|0,E=(m>>11)/n*255|0,I=h*this.width*4+4*d;this.data[I]=E,this.data[I+1]=x,this.data[I+2]=o,this.data[I+3]=255}this.pos+=e}},Eu.prototype.bit24=function(){for(var e=this.height-1;e>=0;e--){for(var n=this.bottom_up?e:this.height-1-e,i=0;i<this.width;i++){var l=this.datav.getUint8(this.pos++,!0),h=this.datav.getUint8(this.pos++,!0),d=this.datav.getUint8(this.pos++,!0),m=n*this.width*4+4*i;this.data[m]=d,this.data[m+1]=h,this.data[m+2]=l,this.data[m+3]=255}this.pos+=this.width%4}},Eu.prototype.bit32=function(){for(var e=this.height-1;e>=0;e--)for(var n=this.bottom_up?e:this.height-1-e,i=0;i<this.width;i++){var l=this.datav.getUint8(this.pos++,!0),h=this.datav.getUint8(this.pos++,!0),d=this.datav.getUint8(this.pos++,!0),m=this.datav.getUint8(this.pos++,!0),o=n*this.width*4+4*i;this.data[o]=d,this.data[o+1]=h,this.data[o+2]=l,this.data[o+3]=m}},Eu.prototype.getData=function(){return this.data},(function(e){e.processBMP=function(n,i,l,h){var d=new Eu(n,!1),m=d.width,o=d.height,x={data:d.getData(),width:m,height:o},E=new J1(100).encode(x,100);return e.processJPEG.call(this,E,i,l,h)}})(fn.API),t5.prototype.getData=function(){return this.data},(function(e){e.processWEBP=function(n,i,l,h){var d=new t5(n),m=d.width,o=d.height,x={data:d.getData(),width:m,height:o},E=new J1(100).encode(x,100);return e.processJPEG.call(this,E,i,l,h)}})(fn.API),fn.API.processRGBA=function(e,n,i){for(var l=e.data,h=l.length,d=new Uint8Array(h/4*3),m=new Uint8Array(h/4),o=0,x=0,E=0;E<h;E+=4){var I=l[E],D=l[E+1],O=l[E+2],P=l[E+3];d[o++]=I,d[o++]=D,d[o++]=O,m[x++]=P}var W=this.__addimage__.arrayBufferToBinaryString(d);return{alpha:this.__addimage__.arrayBufferToBinaryString(m),data:W,index:n,alias:i,colorSpace:"DeviceRGB",bitsPerComponent:8,width:e.width,height:e.height}},fn.API.setLanguage=function(e){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[e]!==void 0&&(this.internal.languageSettings.languageCode=e,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},Zf=fn.API,E0=Zf.getCharWidthsArray=function(e,n){var i,l,h=(n=n||{}).font||this.internal.getFont(),d=n.fontSize||this.internal.getFontSize(),m=n.charSpace||this.internal.getCharSpace(),o=n.widths?n.widths:h.metadata.Unicode.widths,x=o.fof?o.fof:1,E=n.kerning?n.kerning:h.metadata.Unicode.kerning,I=E.fof?E.fof:1,D=n.doKerning!==!1,O=0,P=e.length,W=0,z=o[0]||x,H=[];for(i=0;i<P;i++)l=e.charCodeAt(i),typeof h.metadata.widthOfString=="function"?H.push((h.metadata.widthOfGlyph(h.metadata.characterToGlyph(l))+m*(1e3/d)||0)/1e3):(O=D&&rs(E[l])==="object"&&!isNaN(parseInt(E[l][W],10))?E[l][W]/I:0,H.push((o[l]||z)/x+O)),W=l;return H},GC=Zf.getStringUnitWidth=function(e,n){var i=(n=n||{}).fontSize||this.internal.getFontSize(),l=n.font||this.internal.getFont(),h=n.charSpace||this.internal.getCharSpace();return Zf.processArabic&&(e=Zf.processArabic(e)),typeof l.metadata.widthOfString=="function"?l.metadata.widthOfString(e,i,h)/i:E0.apply(this,arguments).reduce(function(d,m){return d+m},0)},KC=function(e,n,i,l){for(var h=[],d=0,m=e.length,o=0;d!==m&&o+n[d]<i;)o+=n[d],d++;h.push(e.slice(0,d));var x=d;for(o=0;d!==m;)o+n[d]>l&&(h.push(e.slice(x,d)),o=0,x=d),o+=n[d],d++;return x!==d&&h.push(e.slice(x,d)),h},qC=function(e,n,i){i||(i={});var l,h,d,m,o,x,E,I=[],D=[I],O=i.textIndent||0,P=0,W=0,z=e.split(" "),H=E0.apply(this,[" ",i])[0];if(x=i.lineIndent===-1?z[0].length+2:i.lineIndent||0){var Z=Array(x).join(" "),ie=[];z.map(function(he){(he=he.split(/\s*\n/)).length>1?ie=ie.concat(he.map(function(Ie,Ve){return(Ve&&Ie.length?`
`:"")+Ie})):ie.push(he[0])}),z=ie,x=GC.apply(this,[Z,i])}for(d=0,m=z.length;d<m;d++){var ce=0;if(l=z[d],x&&l[0]==`
`&&(l=l.substr(1),ce=1),O+P+(W=(h=E0.apply(this,[l,i])).reduce(function(he,Ie){return he+Ie},0))>n||ce){if(W>n){for(o=KC.apply(this,[l,h,n-(O+P),n]),I.push(o.shift()),I=[o.pop()];o.length;)D.push([o.shift()]);W=h.slice(l.length-(I[0]?I[0].length:0)).reduce(function(he,Ie){return he+Ie},0)}else I=[l];D.push(I),O=W+x,P=H}else I.push(l),O+=P+W,P=H}return E=x?function(he,Ie){return(Ie?Z:"")+he.join(" ")}:function(he){return he.join(" ")},D.map(E)},Zf.splitTextToSize=function(e,n,i){var l,h=(i=i||{}).fontSize||this.internal.getFontSize(),d=(function(I){if(I.widths&&I.kerning)return{widths:I.widths,kerning:I.kerning};var D=this.internal.getFont(I.fontName,I.fontStyle),O="Unicode";return D.metadata[O]?{widths:D.metadata[O].widths||{0:1},kerning:D.metadata[O].kerning||{}}:{font:D.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,i);l=Array.isArray(e)?e:String(e).split(/\r?\n/);var m=1*this.internal.scaleFactor*n/h;d.textIndent=i.textIndent?1*i.textIndent*this.internal.scaleFactor/h:0,d.lineIndent=i.lineIndent;var o,x,E=[];for(o=0,x=l.length;o<x;o++)E=E.concat(qC.apply(this,[l[o],m,d]));return E},(function(e){e.__fontmetrics__=e.__fontmetrics__||{};for(var n="0123456789abcdef",i="klmnopqrstuvwxyz",l={},h={},d=0;d<16;d++)l[i[d]]=n[d],h[n[d]]=i[d];var m=function(O){return"0x"+parseInt(O,10).toString(16)},o=e.__fontmetrics__.compress=function(O){var P,W,z,H,Z=["{"];for(var ie in O){if(P=O[ie],isNaN(parseInt(ie,10))?W="'"+ie+"'":(ie=parseInt(ie,10),W=(W=m(ie).slice(2)).slice(0,-1)+h[W.slice(-1)]),typeof P=="number")P<0?(z=m(P).slice(3),H="-"):(z=m(P).slice(2),H=""),z=H+z.slice(0,-1)+h[z.slice(-1)];else{if(rs(P)!=="object")throw new Error("Don't know what to do with value type "+rs(P)+".");z=o(P)}Z.push(W+z)}return Z.push("}"),Z.join("")},x=e.__fontmetrics__.uncompress=function(O){if(typeof O!="string")throw new Error("Invalid argument passed to uncompress.");for(var P,W,z,H,Z={},ie=1,ce=Z,he=[],Ie="",Ve="",Me=O.length-1,Pe=1;Pe<Me;Pe+=1)(H=O[Pe])=="'"?P?(z=P.join(""),P=void 0):P=[]:P?P.push(H):H=="{"?(he.push([ce,z]),ce={},z=void 0):H=="}"?((W=he.pop())[0][W[1]]=ce,z=void 0,ce=W[0]):H=="-"?ie=-1:z===void 0?l.hasOwnProperty(H)?(Ie+=l[H],z=parseInt(Ie,16)*ie,ie=1,Ie=""):Ie+=H:l.hasOwnProperty(H)?(Ve+=l[H],ce[z]=parseInt(Ve,16)*ie,ie=1,z=void 0,Ve=""):Ve+=H;return Z},E={codePages:["WinAnsiEncoding"],WinAnsiEncoding:x("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},I={Unicode:{Courier:E,"Courier-Bold":E,"Courier-BoldOblique":E,"Courier-Oblique":E,Helvetica:E,"Helvetica-Bold":E,"Helvetica-BoldOblique":E,"Helvetica-Oblique":E,"Times-Roman":E,"Times-Bold":E,"Times-BoldItalic":E,"Times-Italic":E}},D={Unicode:{"Courier-Oblique":x("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":x("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":x("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:x("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":x("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":x("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:x("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:x("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":x("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:x("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":x("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":x("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":x("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":x("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};e.events.push(["addFont",function(O){var P=O.font,W=D.Unicode[P.postScriptName];W&&(P.metadata.Unicode={},P.metadata.Unicode.widths=W.widths,P.metadata.Unicode.kerning=W.kerning);var z=I.Unicode[P.postScriptName];z&&(P.metadata.Unicode.encoding=z,P.encoding=z.codePages[0])}])})(fn.API),(function(e){var n=function(i){for(var l=i.length,h=new Uint8Array(l),d=0;d<l;d++)h[d]=i.charCodeAt(d);return h};e.API.events.push(["addFont",function(i){var l=void 0,h=i.font,d=i.instance;if(!h.isStandardFont){if(d===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+h.postScriptName+"').");if(typeof(l=d.existsFileInVFS(h.postScriptName)===!1?d.loadFile(h.postScriptName):d.getFileFromVFS(h.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+h.postScriptName+"').");(function(m,o){o=/^\x00\x01\x00\x00/.test(o)?n(o):n(O0(o)),m.metadata=e.API.TTFFont.open(o),m.metadata.Unicode=m.metadata.Unicode||{encoding:{},kerning:{},widths:[]},m.metadata.glyIdsUsed=[0]})(h,l)}}])})(fn),fn.API.addSvgAsImage=function(e,n,i,l,h,d,m,o){if(isNaN(n)||isNaN(i))throw gs.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(l)||isNaN(h))throw gs.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var x=document.createElement("canvas");x.width=l,x.height=h;var E=x.getContext("2d");E.fillStyle="#fff",E.fillRect(0,0,x.width,x.height);var I={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},D=this;return(kn.canvg?Promise.resolve(kn.canvg):M1(()=>import("./index.es-Ctpooe0H.js"),[])).catch(function(O){return Promise.reject(new Error("Could not load canvg: "+O))}).then(function(O){return O.default?O.default:O}).then(function(O){return O.fromString(E,e,I)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(O){return O.render(I)}).then(function(){D.addImage(x.toDataURL("image/jpeg",1),n,i,l,h,m,o)})},fn.API.putTotalPages=function(e){var n,i=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(n=new RegExp(e,"g"),i=this.internal.getNumberOfPages()):(n=new RegExp(this.pdfEscape16(e,this.internal.getFont()),"g"),i=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var l=1;l<=this.internal.getNumberOfPages();l++)for(var h=0;h<this.internal.pages[l].length;h++)this.internal.pages[l][h]=this.internal.pages[l][h].replace(n,i);return this},fn.API.viewerPreferences=function(e,n){var i;e=e||{},n=n||!1;var l,h,d,m={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},o=Object.keys(m),x=[],E=0,I=0,D=0;function O(W,z){var H,Z=!1;for(H=0;H<W.length;H+=1)W[H]===z&&(Z=!0);return Z}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(m)),this.internal.viewerpreferences.isSubscribed=!1),i=this.internal.viewerpreferences.configuration,e==="reset"||n===!0){var P=o.length;for(D=0;D<P;D+=1)i[o[D]].value=i[o[D]].defaultValue,i[o[D]].explicitSet=!1}if(rs(e)==="object"){for(h in e)if(d=e[h],O(o,h)&&d!==void 0){if(i[h].type==="boolean"&&typeof d=="boolean")i[h].value=d;else if(i[h].type==="name"&&O(i[h].valueSet,d))i[h].value=d;else if(i[h].type==="integer"&&Number.isInteger(d))i[h].value=d;else if(i[h].type==="array"){for(E=0;E<d.length;E+=1)if(l=!0,d[E].length===1&&typeof d[E][0]=="number")x.push(String(d[E]-1));else if(d[E].length>1){for(I=0;I<d[E].length;I+=1)typeof d[E][I]!="number"&&(l=!1);l===!0&&x.push([d[E][0]-1,d[E][1]-1].join(" "))}i[h].value="["+x.join(" ")+"]"}else i[h].value=i[h].defaultValue;i[h].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var W,z=[];for(W in i)i[W].explicitSet===!0&&(i[W].type==="name"?z.push("/"+W+" /"+i[W].value):z.push("/"+W+" "+i[W].value));z.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+z.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=i,this},(function(e){var n=function(){var l='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',h=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),d=unescape(encodeURIComponent(l)),m=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),o=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),x=unescape(encodeURIComponent("</x:xmpmeta>")),E=d.length+m.length+o.length+h.length+x.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+E+" >>"),this.internal.write("stream"),this.internal.write(h+d+m+o+x),this.internal.write("endstream"),this.internal.write("endobj")},i=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};e.addMetadata=function(l,h){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:l,namespaceuri:h||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",i),this.internal.events.subscribe("postPutResources",n)),this}})(fn.API),(function(e){var n=e.API,i=n.pdfEscape16=function(d,m){for(var o,x=m.metadata.Unicode.widths,E=["","0","00","000","0000"],I=[""],D=0,O=d.length;D<O;++D){if(o=m.metadata.characterToGlyph(d.charCodeAt(D)),m.metadata.glyIdsUsed.push(o),m.metadata.toUnicode[o]=d.charCodeAt(D),x.indexOf(o)==-1&&(x.push(o),x.push([parseInt(m.metadata.widthOfGlyph(o),10)])),o=="0")return I.join("");o=o.toString(16),I.push(E[4-o.length],o)}return I.join("")},l=function(d){var m,o,x,E,I,D,O;for(I=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,x=[],D=0,O=(o=Object.keys(d).sort(function(P,W){return P-W})).length;D<O;D++)m=o[D],x.length>=100&&(I+=`
`+x.length+` beginbfchar
`+x.join(`
`)+`
endbfchar`,x=[]),d[m]!==void 0&&d[m]!==null&&typeof d[m].toString=="function"&&(E=("0000"+d[m].toString(16)).slice(-4),m=("0000"+(+m).toString(16)).slice(-4),x.push("<"+m+"><"+E+">"));return x.length&&(I+=`
`+x.length+` beginbfchar
`+x.join(`
`)+`
endbfchar
`),I+`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};n.events.push(["putFont",function(d){(function(m){var o=m.font,x=m.out,E=m.newObject,I=m.putStream;if(o.metadata instanceof e.API.TTFFont&&o.encoding==="Identity-H"){for(var D=o.metadata.Unicode.widths,O=o.metadata.subset.encode(o.metadata.glyIdsUsed,1),P="",W=0;W<O.length;W++)P+=String.fromCharCode(O[W]);var z=E();I({data:P,addLength1:!0,objectId:z}),x("endobj");var H=E();I({data:l(o.metadata.toUnicode),addLength1:!0,objectId:H}),x("endobj");var Z=E();x("<<"),x("/Type /FontDescriptor"),x("/FontName /"+np(o.fontName)),x("/FontFile2 "+z+" 0 R"),x("/FontBBox "+e.API.PDFObject.convert(o.metadata.bbox)),x("/Flags "+o.metadata.flags),x("/StemV "+o.metadata.stemV),x("/ItalicAngle "+o.metadata.italicAngle),x("/Ascent "+o.metadata.ascender),x("/Descent "+o.metadata.decender),x("/CapHeight "+o.metadata.capHeight),x(">>"),x("endobj");var ie=E();x("<<"),x("/Type /Font"),x("/BaseFont /"+np(o.fontName)),x("/FontDescriptor "+Z+" 0 R"),x("/W "+e.API.PDFObject.convert(D)),x("/CIDToGIDMap /Identity"),x("/DW 1000"),x("/Subtype /CIDFontType2"),x("/CIDSystemInfo"),x("<<"),x("/Supplement 0"),x("/Registry (Adobe)"),x("/Ordering ("+o.encoding+")"),x(">>"),x(">>"),x("endobj"),o.objectNumber=E(),x("<<"),x("/Type /Font"),x("/Subtype /Type0"),x("/ToUnicode "+H+" 0 R"),x("/BaseFont /"+np(o.fontName)),x("/Encoding /"+o.encoding),x("/DescendantFonts ["+ie+" 0 R]"),x(">>"),x("endobj"),o.isAlreadyPutted=!0}})(d)}]),n.events.push(["putFont",function(d){(function(m){var o=m.font,x=m.out,E=m.newObject,I=m.putStream;if(o.metadata instanceof e.API.TTFFont&&o.encoding==="WinAnsiEncoding"){for(var D=o.metadata.rawData,O="",P=0;P<D.length;P++)O+=String.fromCharCode(D[P]);var W=E();I({data:O,addLength1:!0,objectId:W}),x("endobj");var z=E();I({data:l(o.metadata.toUnicode),addLength1:!0,objectId:z}),x("endobj");var H=E();x("<<"),x("/Descent "+o.metadata.decender),x("/CapHeight "+o.metadata.capHeight),x("/StemV "+o.metadata.stemV),x("/Type /FontDescriptor"),x("/FontFile2 "+W+" 0 R"),x("/Flags 96"),x("/FontBBox "+e.API.PDFObject.convert(o.metadata.bbox)),x("/FontName /"+np(o.fontName)),x("/ItalicAngle "+o.metadata.italicAngle),x("/Ascent "+o.metadata.ascender),x(">>"),x("endobj"),o.objectNumber=E();for(var Z=0;Z<o.metadata.hmtx.widths.length;Z++)o.metadata.hmtx.widths[Z]=parseInt(o.metadata.hmtx.widths[Z]*(1e3/o.metadata.head.unitsPerEm));x("<</Subtype/TrueType/Type/Font/ToUnicode "+z+" 0 R/BaseFont/"+np(o.fontName)+"/FontDescriptor "+H+" 0 R/Encoding/"+o.encoding+" /FirstChar 29 /LastChar 255 /Widths "+e.API.PDFObject.convert(o.metadata.hmtx.widths)+">>"),x("endobj"),o.isAlreadyPutted=!0}})(d)}]);var h=function(d){var m,o=d.text||"",x=d.x,E=d.y,I=d.options||{},D=d.mutex||{},O=D.pdfEscape,P=D.activeFontKey,W=D.fonts,z=P,H="",Z=0,ie="",ce=W[z].encoding;if(W[z].encoding!=="Identity-H")return{text:o,x,y:E,options:I,mutex:D};for(ie=o,z=P,Array.isArray(o)&&(ie=o[0]),Z=0;Z<ie.length;Z+=1)W[z].metadata.hasOwnProperty("cmap")&&(m=W[z].metadata.cmap.unicode.codeMap[ie[Z].charCodeAt(0)]),m||ie[Z].charCodeAt(0)<256&&W[z].metadata.hasOwnProperty("Unicode")?H+=ie[Z]:H+="";var he="";return parseInt(z.slice(1))<14||ce==="WinAnsiEncoding"?he=O(H,z).split("").map(function(Ie){return Ie.charCodeAt(0).toString(16)}).join(""):ce==="Identity-H"&&(he=i(H,W[z])),D.isHex=!0,{text:he,x,y:E,options:I,mutex:D}};n.events.push(["postProcessText",function(d){var m=d.text||"",o=[],x={text:m,x:d.x,y:d.y,options:d.options,mutex:d.mutex};if(Array.isArray(m)){var E=0;for(E=0;E<m.length;E+=1)Array.isArray(m[E])&&m[E].length===3?o.push([h(Object.assign({},x,{text:m[E][0]})).text,m[E][1],m[E][2]]):o.push(h(Object.assign({},x,{text:m[E]})).text);d.text=o}else d.text=h(Object.assign({},x,{text:m})).text}])})(fn),(function(e){var n=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};e.existsFileInVFS=function(i){return n.call(this),this.internal.vFS[i]!==void 0},e.addFileToVFS=function(i,l){return n.call(this),this.internal.vFS[i]=l,this},e.getFileFromVFS=function(i){return n.call(this),this.internal.vFS[i]!==void 0?this.internal.vFS[i]:null}})(fn.API),(function(e){e.__bidiEngine__=e.prototype.__bidiEngine__=function(l){var h,d,m,o,x,E,I,D=n,O=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],P=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],W={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},z={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},H=["(",")","(","<",">","<","[","]","[","{","}","{","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],Z=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),ie=!1,ce=0;this.__bidiEngine__={};var he=function(pe){var _e=pe.charCodeAt(),Ue=_e>>8,Fe=z[Ue];return Fe!==void 0?D[256*Fe+(255&_e)]:Ue===252||Ue===253?"AL":Z.test(Ue)?"L":Ue===8?"R":"N"},Ie=function(pe){for(var _e,Ue=0;Ue<pe.length;Ue++){if((_e=he(pe.charAt(Ue)))==="L")return!1;if(_e==="R")return!0}return!1},Ve=function(pe,_e,Ue,Fe){var pt,ht,Je,ze,je=_e[Fe];switch(je){case"L":case"R":case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":ie=!1;break;case"N":case"AN":break;case"EN":ie&&(je="AN");break;case"AL":ie=!0,je="R";break;case"WS":case"BN":je="N";break;case"CS":Fe<1||Fe+1>=_e.length||(pt=Ue[Fe-1])!=="EN"&&pt!=="AN"||(ht=_e[Fe+1])!=="EN"&&ht!=="AN"?je="N":ie&&(ht="AN"),je=ht===pt?ht:"N";break;case"ES":je=(pt=Fe>0?Ue[Fe-1]:"B")==="EN"&&Fe+1<_e.length&&_e[Fe+1]==="EN"?"EN":"N";break;case"ET":if(Fe>0&&Ue[Fe-1]==="EN"){je="EN";break}if(ie){je="N";break}for(Je=Fe+1,ze=_e.length;Je<ze&&_e[Je]==="ET";)Je++;je=Je<ze&&_e[Je]==="EN"?"EN":"N";break;case"NSM":if(m&&!o){for(ze=_e.length,Je=Fe+1;Je<ze&&_e[Je]==="NSM";)Je++;if(Je<ze){var xt=pe[Fe],Re=xt>=1425&&xt<=2303||xt===64286;if(pt=_e[Je],Re&&(pt==="R"||pt==="AL")){je="R";break}}}je=Fe<1||(pt=_e[Fe-1])==="B"?"N":Ue[Fe-1];break;case"B":ie=!1,h=!0,je=ce;break;case"S":d=!0,je="N"}return je},Me=function(pe,_e,Ue){var Fe=pe.split("");return Ue&&Pe(Fe,Ue,{hiLevel:ce}),Fe.reverse(),_e&&_e.reverse(),Fe.join("")},Pe=function(pe,_e,Ue){var Fe,pt,ht,Je,ze,je=-1,xt=pe.length,Re=0,oe=[],Se=ce?P:O,Ne=[];for(ie=!1,h=!1,d=!1,pt=0;pt<xt;pt++)Ne[pt]=he(pe[pt]);for(ht=0;ht<xt;ht++){if(ze=Re,oe[ht]=Ve(pe,Ne,oe,ht),Fe=240&(Re=Se[ze][W[oe[ht]]]),Re&=15,_e[ht]=Je=Se[Re][5],Fe>0)if(Fe===16){for(pt=je;pt<ht;pt++)_e[pt]=1;je=-1}else je=-1;if(Se[Re][6])je===-1&&(je=ht);else if(je>-1){for(pt=je;pt<ht;pt++)_e[pt]=Je;je=-1}Ne[ht]==="B"&&(_e[ht]=0),Ue.hiLevel|=Je}d&&(function(Ye,lt,rt){for(var vt=0;vt<rt;vt++)if(Ye[vt]==="S"){lt[vt]=ce;for(var St=vt-1;St>=0&&Ye[St]==="WS";St--)lt[St]=ce}})(Ne,_e,xt)},xe=function(pe,_e,Ue,Fe,pt){if(!(pt.hiLevel<pe)){if(pe===1&&ce===1&&!h)return _e.reverse(),void(Ue&&Ue.reverse());for(var ht,Je,ze,je,xt=_e.length,Re=0;Re<xt;){if(Fe[Re]>=pe){for(ze=Re+1;ze<xt&&Fe[ze]>=pe;)ze++;for(je=Re,Je=ze-1;je<Je;je++,Je--)ht=_e[je],_e[je]=_e[Je],_e[Je]=ht,Ue&&(ht=Ue[je],Ue[je]=Ue[Je],Ue[Je]=ht);Re=ze}Re++}}},nt=function(pe,_e,Ue){var Fe=pe.split(""),pt={hiLevel:ce};return Ue||(Ue=[]),Pe(Fe,Ue,pt),(function(ht,Je,ze){if(ze.hiLevel!==0&&I)for(var je,xt=0;xt<ht.length;xt++)Je[xt]===1&&(je=H.indexOf(ht[xt]))>=0&&(ht[xt]=H[je+1])})(Fe,Ue,pt),xe(2,Fe,_e,Ue,pt),xe(1,Fe,_e,Ue,pt),Fe.join("")};return this.__bidiEngine__.doBidiReorder=function(pe,_e,Ue){if((function(pt,ht){if(ht)for(var Je=0;Je<pt.length;Je++)ht[Je]=Je;o===void 0&&(o=Ie(pt)),E===void 0&&(E=Ie(pt))})(pe,_e),m||!x||E)if(m&&x&&o^E)ce=o?1:0,pe=Me(pe,_e,Ue);else if(!m&&x&&E)ce=o?1:0,pe=nt(pe,_e,Ue),pe=Me(pe,_e);else if(!m||o||x||E){if(m&&!x&&o^E)pe=Me(pe,_e),o?(ce=0,pe=nt(pe,_e,Ue)):(ce=1,pe=nt(pe,_e,Ue),pe=Me(pe,_e));else if(m&&o&&!x&&E)ce=1,pe=nt(pe,_e,Ue),pe=Me(pe,_e);else if(!m&&!x&&o^E){var Fe=I;o?(ce=1,pe=nt(pe,_e,Ue),ce=0,I=!1,pe=nt(pe,_e,Ue),I=Fe):(ce=0,pe=nt(pe,_e,Ue),pe=Me(pe,_e),ce=1,I=!1,pe=nt(pe,_e,Ue),I=Fe,pe=Me(pe,_e))}}else ce=0,pe=nt(pe,_e,Ue);else ce=o?1:0,pe=nt(pe,_e,Ue);return pe},this.__bidiEngine__.setOptions=function(pe){pe&&(m=pe.isInputVisual,x=pe.isOutputVisual,o=pe.isInputRtl,E=pe.isOutputRtl,I=pe.isSymmetricSwapping)},this.__bidiEngine__.setOptions(l),this.__bidiEngine__};var n=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],i=new e.__bidiEngine__({isInputVisual:!0});e.API.events.push(["postProcessText",function(l){var h=l.text;l.x,l.y;var d=l.options||{};l.mutex,d.lang;var m=[];if(d.isInputVisual=typeof d.isInputVisual!="boolean"||d.isInputVisual,i.setOptions(d),Object.prototype.toString.call(h)==="[object Array]"){var o=0;for(m=[],o=0;o<h.length;o+=1)Object.prototype.toString.call(h[o])==="[object Array]"?m.push([i.doBidiReorder(h[o][0]),h[o][1],h[o][2]]):m.push([i.doBidiReorder(h[o])]);l.text=m}else l.text=i.doBidiReorder(h);i.setOptions({isInputVisual:!0})}])})(fn),fn.API.TTFFont=(function(){function e(n){var i;if(this.rawData=n,i=this.contents=new Bd(n),this.contents.pos=4,i.readString(4)==="ttcf")throw new Error("TTCF not supported.");i.pos=0,this.parse(),this.subset=new Vj(this),this.registerTTF()}return e.open=function(n){return new e(n)},e.prototype.parse=function(){return this.directory=new Tj(this.contents),this.head=new Lj(this),this.name=new Rj(this),this.cmap=new F4(this),this.toUnicode={},this.hhea=new Mj(this),this.maxp=new Nj(this),this.hmtx=new Qj(this),this.post=new Uj(this),this.os2=new kj(this),this.loca=new jj(this),this.glyf=new Oj(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},e.prototype.registerTTF=function(){var n,i,l,h,d;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var m,o,x,E;for(E=[],m=0,o=(x=this.bbox).length;m<o;m++)n=x[m],E.push(Math.round(n*this.scaleFactor));return E}).call(this),this.stemV=0,this.post.exists?(l=255&(h=this.post.italic_angle),32768&(i=h>>16)&&(i=-(1+(65535^i))),this.italicAngle=+(i+"."+l)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(d=this.familyClass)===1||d===2||d===3||d===4||d===5||d===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},e.prototype.characterToGlyph=function(n){var i;return((i=this.cmap.unicode)!=null?i.codeMap[n]:void 0)||0},e.prototype.widthOfGlyph=function(n){var i;return i=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(n).advance*i},e.prototype.widthOfString=function(n,i,l){var h,d,m,o;for(m=0,d=0,o=(n=""+n).length;0<=o?d<o:d>o;d=0<=o?++d:--d)h=n.charCodeAt(d),m+=this.widthOfGlyph(this.characterToGlyph(h))+l*(1e3/i)||0;return m*(i/1e3)},e.prototype.lineHeight=function(n,i){var l;return i==null&&(i=!1),l=i?this.lineGap:0,(this.ascender+l-this.decender)/1e3*n},e})();var ku,Bd=(function(){function e(n){this.data=n??[],this.pos=0,this.length=this.data.length}return e.prototype.readByte=function(){return this.data[this.pos++]},e.prototype.writeByte=function(n){return this.data[this.pos++]=n},e.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},e.prototype.writeUInt32=function(n){return this.writeByte(n>>>24&255),this.writeByte(n>>16&255),this.writeByte(n>>8&255),this.writeByte(255&n)},e.prototype.readInt32=function(){var n;return(n=this.readUInt32())>=2147483648?n-4294967296:n},e.prototype.writeInt32=function(n){return n<0&&(n+=4294967296),this.writeUInt32(n)},e.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},e.prototype.writeUInt16=function(n){return this.writeByte(n>>8&255),this.writeByte(255&n)},e.prototype.readInt16=function(){var n;return(n=this.readUInt16())>=32768?n-65536:n},e.prototype.writeInt16=function(n){return n<0&&(n+=65536),this.writeUInt16(n)},e.prototype.readString=function(n){var i,l;for(l=[],i=0;0<=n?i<n:i>n;i=0<=n?++i:--i)l[i]=String.fromCharCode(this.readByte());return l.join("")},e.prototype.writeString=function(n){var i,l,h;for(h=[],i=0,l=n.length;0<=l?i<l:i>l;i=0<=l?++i:--i)h.push(this.writeByte(n.charCodeAt(i)));return h},e.prototype.readShort=function(){return this.readInt16()},e.prototype.writeShort=function(n){return this.writeInt16(n)},e.prototype.readLongLong=function(){var n,i,l,h,d,m,o,x;return n=this.readByte(),i=this.readByte(),l=this.readByte(),h=this.readByte(),d=this.readByte(),m=this.readByte(),o=this.readByte(),x=this.readByte(),128&n?-1*(72057594037927940*(255^n)+281474976710656*(255^i)+1099511627776*(255^l)+4294967296*(255^h)+16777216*(255^d)+65536*(255^m)+256*(255^o)+(255^x)+1):72057594037927940*n+281474976710656*i+1099511627776*l+4294967296*h+16777216*d+65536*m+256*o+x},e.prototype.writeLongLong=function(n){var i,l;return i=Math.floor(n/4294967296),l=4294967295&n,this.writeByte(i>>24&255),this.writeByte(i>>16&255),this.writeByte(i>>8&255),this.writeByte(255&i),this.writeByte(l>>24&255),this.writeByte(l>>16&255),this.writeByte(l>>8&255),this.writeByte(255&l)},e.prototype.readInt=function(){return this.readInt32()},e.prototype.writeInt=function(n){return this.writeInt32(n)},e.prototype.read=function(n){var i,l;for(i=[],l=0;0<=n?l<n:l>n;l=0<=n?++l:--l)i.push(this.readByte());return i},e.prototype.write=function(n){var i,l,h,d;for(d=[],l=0,h=n.length;l<h;l++)i=n[l],d.push(this.writeByte(i));return d},e})(),Tj=(function(){var e;function n(i){var l,h,d;for(this.scalarType=i.readInt(),this.tableCount=i.readShort(),this.searchRange=i.readShort(),this.entrySelector=i.readShort(),this.rangeShift=i.readShort(),this.tables={},h=0,d=this.tableCount;0<=d?h<d:h>d;h=0<=d?++h:--h)l={tag:i.readString(4),checksum:i.readInt(),offset:i.readInt(),length:i.readInt()},this.tables[l.tag]=l}return n.prototype.encode=function(i){var l,h,d,m,o,x,E,I,D,O,P,W,z;for(z in P=Object.keys(i).length,x=Math.log(2),D=16*Math.floor(Math.log(P)/x),m=Math.floor(D/x),I=16*P-D,(h=new Bd).writeInt(this.scalarType),h.writeShort(P),h.writeShort(D),h.writeShort(m),h.writeShort(I),d=16*P,E=h.pos+d,o=null,W=[],i)for(O=i[z],h.writeString(z),h.writeInt(e(O)),h.writeInt(E),h.writeInt(O.length),W=W.concat(O),z==="head"&&(o=E),E+=O.length;E%4;)W.push(0),E++;return h.write(W),l=2981146554-e(h.data),h.pos=o+8,h.writeUInt32(l),h.data},e=function(i){var l,h,d,m;for(i=I4.call(i);i.length%4;)i.push(0);for(d=new Bd(i),h=0,l=0,m=i.length;l<m;l=l+=4)h+=d.readUInt32();return 4294967295&h},n})(),Pj={}.hasOwnProperty,lh=function(e,n){for(var i in n)Pj.call(n,i)&&(e[i]=n[i]);function l(){this.constructor=e}return l.prototype=n.prototype,e.prototype=new l,e.__super__=n.prototype,e};ku=(function(){function e(n){var i;this.file=n,i=this.file.directory.tables[this.tag],this.exists=!!i,i&&(this.offset=i.offset,this.length=i.length,this.parse(this.file.contents))}return e.prototype.parse=function(){},e.prototype.encode=function(){},e.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},e})();var Lj=(function(){function e(){return e.__super__.constructor.apply(this,arguments)}return lh(e,ku),e.prototype.tag="head",e.prototype.parse=function(n){return n.pos=this.offset,this.version=n.readInt(),this.revision=n.readInt(),this.checkSumAdjustment=n.readInt(),this.magicNumber=n.readInt(),this.flags=n.readShort(),this.unitsPerEm=n.readShort(),this.created=n.readLongLong(),this.modified=n.readLongLong(),this.xMin=n.readShort(),this.yMin=n.readShort(),this.xMax=n.readShort(),this.yMax=n.readShort(),this.macStyle=n.readShort(),this.lowestRecPPEM=n.readShort(),this.fontDirectionHint=n.readShort(),this.indexToLocFormat=n.readShort(),this.glyphDataFormat=n.readShort()},e.prototype.encode=function(n){var i;return(i=new Bd).writeInt(this.version),i.writeInt(this.revision),i.writeInt(this.checkSumAdjustment),i.writeInt(this.magicNumber),i.writeShort(this.flags),i.writeShort(this.unitsPerEm),i.writeLongLong(this.created),i.writeLongLong(this.modified),i.writeShort(this.xMin),i.writeShort(this.yMin),i.writeShort(this.xMax),i.writeShort(this.yMax),i.writeShort(this.macStyle),i.writeShort(this.lowestRecPPEM),i.writeShort(this.fontDirectionHint),i.writeShort(n),i.writeShort(this.glyphDataFormat),i.data},e})(),r5=(function(){function e(n,i){var l,h,d,m,o,x,E,I,D,O,P,W,z,H,Z,ie,ce;switch(this.platformID=n.readUInt16(),this.encodingID=n.readShort(),this.offset=i+n.readInt(),D=n.pos,n.pos=this.offset,this.format=n.readUInt16(),this.length=n.readUInt16(),this.language=n.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(x=0;x<256;++x)this.codeMap[x]=n.readByte();break;case 4:for(P=n.readUInt16(),O=P/2,n.pos+=6,d=(function(){var he,Ie;for(Ie=[],x=he=0;0<=O?he<O:he>O;x=0<=O?++he:--he)Ie.push(n.readUInt16());return Ie})(),n.pos+=2,z=(function(){var he,Ie;for(Ie=[],x=he=0;0<=O?he<O:he>O;x=0<=O?++he:--he)Ie.push(n.readUInt16());return Ie})(),E=(function(){var he,Ie;for(Ie=[],x=he=0;0<=O?he<O:he>O;x=0<=O?++he:--he)Ie.push(n.readUInt16());return Ie})(),I=(function(){var he,Ie;for(Ie=[],x=he=0;0<=O?he<O:he>O;x=0<=O?++he:--he)Ie.push(n.readUInt16());return Ie})(),h=(this.length-n.pos+this.offset)/2,o=(function(){var he,Ie;for(Ie=[],x=he=0;0<=h?he<h:he>h;x=0<=h?++he:--he)Ie.push(n.readUInt16());return Ie})(),x=Z=0,ce=d.length;Z<ce;x=++Z)for(H=d[x],l=ie=W=z[x];W<=H?ie<=H:ie>=H;l=W<=H?++ie:--ie)I[x]===0?m=l+E[x]:(m=o[I[x]/2+(l-W)-(O-x)]||0)!==0&&(m+=E[x]),this.codeMap[l]=65535&m}n.pos=D}return e.encode=function(n,i){var l,h,d,m,o,x,E,I,D,O,P,W,z,H,Z,ie,ce,he,Ie,Ve,Me,Pe,xe,nt,pe,_e,Ue,Fe,pt,ht,Je,ze,je,xt,Re,oe,Se,Ne,Ye,lt,rt,vt,St,Lt,Wt,ar;switch(Fe=new Bd,m=Object.keys(n).sort(function(hr,Cr){return hr-Cr}),i){case"macroman":for(z=0,H=(function(){var hr=[];for(W=0;W<256;++W)hr.push(0);return hr})(),ie={0:0},d={},pt=0,je=m.length;pt<je;pt++)ie[St=n[h=m[pt]]]==null&&(ie[St]=++z),d[h]={old:n[h],new:ie[n[h]]},H[h]=ie[n[h]];return Fe.writeUInt16(1),Fe.writeUInt16(0),Fe.writeUInt32(12),Fe.writeUInt16(0),Fe.writeUInt16(262),Fe.writeUInt16(0),Fe.write(H),{charMap:d,subtable:Fe.data,maxGlyphID:z+1};case"unicode":for(_e=[],D=[],ce=0,ie={},l={},Z=E=null,ht=0,xt=m.length;ht<xt;ht++)ie[Ie=n[h=m[ht]]]==null&&(ie[Ie]=++ce),l[h]={old:Ie,new:ie[Ie]},o=ie[Ie]-h,Z!=null&&o===E||(Z&&D.push(Z),_e.push(h),E=o),Z=h;for(Z&&D.push(Z),D.push(65535),_e.push(65535),nt=2*(xe=_e.length),Pe=2*Math.pow(Math.log(xe)/Math.LN2,2),O=Math.log(Pe/2)/Math.LN2,Me=2*xe-Pe,x=[],Ve=[],P=[],W=Je=0,Re=_e.length;Je<Re;W=++Je){if(pe=_e[W],I=D[W],pe===65535){x.push(0),Ve.push(0);break}if(pe-(Ue=l[pe].new)>=32768)for(x.push(0),Ve.push(2*(P.length+xe-W)),h=ze=pe;pe<=I?ze<=I:ze>=I;h=pe<=I?++ze:--ze)P.push(l[h].new);else x.push(Ue-pe),Ve.push(0)}for(Fe.writeUInt16(3),Fe.writeUInt16(1),Fe.writeUInt32(12),Fe.writeUInt16(4),Fe.writeUInt16(16+8*xe+2*P.length),Fe.writeUInt16(0),Fe.writeUInt16(nt),Fe.writeUInt16(Pe),Fe.writeUInt16(O),Fe.writeUInt16(Me),rt=0,oe=D.length;rt<oe;rt++)h=D[rt],Fe.writeUInt16(h);for(Fe.writeUInt16(0),vt=0,Se=_e.length;vt<Se;vt++)h=_e[vt],Fe.writeUInt16(h);for(Lt=0,Ne=x.length;Lt<Ne;Lt++)o=x[Lt],Fe.writeUInt16(o);for(Wt=0,Ye=Ve.length;Wt<Ye;Wt++)he=Ve[Wt],Fe.writeUInt16(he);for(ar=0,lt=P.length;ar<lt;ar++)z=P[ar],Fe.writeUInt16(z);return{charMap:l,subtable:Fe.data,maxGlyphID:ce+1}}},e})(),F4=(function(){function e(){return e.__super__.constructor.apply(this,arguments)}return lh(e,ku),e.prototype.tag="cmap",e.prototype.parse=function(n){var i,l,h;for(n.pos=this.offset,this.version=n.readUInt16(),h=n.readUInt16(),this.tables=[],this.unicode=null,l=0;0<=h?l<h:l>h;l=0<=h?++l:--l)i=new r5(n,this.offset),this.tables.push(i),i.isUnicode&&this.unicode==null&&(this.unicode=i);return!0},e.encode=function(n,i){var l,h;return i==null&&(i="macroman"),l=r5.encode(n,i),(h=new Bd).writeUInt16(0),h.writeUInt16(1),l.table=h.data.concat(l.subtable),l},e})(),Mj=(function(){function e(){return e.__super__.constructor.apply(this,arguments)}return lh(e,ku),e.prototype.tag="hhea",e.prototype.parse=function(n){return n.pos=this.offset,this.version=n.readInt(),this.ascender=n.readShort(),this.decender=n.readShort(),this.lineGap=n.readShort(),this.advanceWidthMax=n.readShort(),this.minLeftSideBearing=n.readShort(),this.minRightSideBearing=n.readShort(),this.xMaxExtent=n.readShort(),this.caretSlopeRise=n.readShort(),this.caretSlopeRun=n.readShort(),this.caretOffset=n.readShort(),n.pos+=8,this.metricDataFormat=n.readShort(),this.numberOfMetrics=n.readUInt16()},e})(),kj=(function(){function e(){return e.__super__.constructor.apply(this,arguments)}return lh(e,ku),e.prototype.tag="OS/2",e.prototype.parse=function(n){if(n.pos=this.offset,this.version=n.readUInt16(),this.averageCharWidth=n.readShort(),this.weightClass=n.readUInt16(),this.widthClass=n.readUInt16(),this.type=n.readShort(),this.ySubscriptXSize=n.readShort(),this.ySubscriptYSize=n.readShort(),this.ySubscriptXOffset=n.readShort(),this.ySubscriptYOffset=n.readShort(),this.ySuperscriptXSize=n.readShort(),this.ySuperscriptYSize=n.readShort(),this.ySuperscriptXOffset=n.readShort(),this.ySuperscriptYOffset=n.readShort(),this.yStrikeoutSize=n.readShort(),this.yStrikeoutPosition=n.readShort(),this.familyClass=n.readShort(),this.panose=(function(){var i,l;for(l=[],i=0;i<10;++i)l.push(n.readByte());return l})(),this.charRange=(function(){var i,l;for(l=[],i=0;i<4;++i)l.push(n.readInt());return l})(),this.vendorID=n.readString(4),this.selection=n.readShort(),this.firstCharIndex=n.readShort(),this.lastCharIndex=n.readShort(),this.version>0&&(this.ascent=n.readShort(),this.descent=n.readShort(),this.lineGap=n.readShort(),this.winAscent=n.readShort(),this.winDescent=n.readShort(),this.codePageRange=(function(){var i,l;for(l=[],i=0;i<2;i=++i)l.push(n.readInt());return l})(),this.version>1))return this.xHeight=n.readShort(),this.capHeight=n.readShort(),this.defaultChar=n.readShort(),this.breakChar=n.readShort(),this.maxContext=n.readShort()},e})(),Uj=(function(){function e(){return e.__super__.constructor.apply(this,arguments)}return lh(e,ku),e.prototype.tag="post",e.prototype.parse=function(n){var i,l,h;switch(n.pos=this.offset,this.format=n.readInt(),this.italicAngle=n.readInt(),this.underlinePosition=n.readShort(),this.underlineThickness=n.readShort(),this.isFixedPitch=n.readInt(),this.minMemType42=n.readInt(),this.maxMemType42=n.readInt(),this.minMemType1=n.readInt(),this.maxMemType1=n.readInt(),this.format){case 65536:case 196608:break;case 131072:var d;for(l=n.readUInt16(),this.glyphNameIndex=[],d=0;0<=l?d<l:d>l;d=0<=l?++d:--d)this.glyphNameIndex.push(n.readUInt16());for(this.names=[],h=[];n.pos<this.offset+this.length;)i=n.readByte(),h.push(this.names.push(n.readString(i)));return h;case 151552:return l=n.readUInt16(),this.offsets=n.read(l);case 262144:return this.map=(function(){var m,o,x;for(x=[],d=m=0,o=this.file.maxp.numGlyphs;0<=o?m<o:m>o;d=0<=o?++m:--m)x.push(n.readUInt32());return x}).call(this)}},e})(),Dj=function(e,n){this.raw=e,this.length=e.length,this.platformID=n.platformID,this.encodingID=n.encodingID,this.languageID=n.languageID},Rj=(function(){function e(){return e.__super__.constructor.apply(this,arguments)}return lh(e,ku),e.prototype.tag="name",e.prototype.parse=function(n){var i,l,h,d,m,o,x,E,I,D,O;for(n.pos=this.offset,n.readShort(),i=n.readShort(),o=n.readShort(),l=[],d=0;0<=i?d<i:d>i;d=0<=i?++d:--d)l.push({platformID:n.readShort(),encodingID:n.readShort(),languageID:n.readShort(),nameID:n.readShort(),length:n.readShort(),offset:this.offset+o+n.readShort()});for(x={},d=I=0,D=l.length;I<D;d=++I)h=l[d],n.pos=h.offset,E=n.readString(h.length),m=new Dj(E,h),x[O=h.nameID]==null&&(x[O]=[]),x[h.nameID].push(m);this.strings=x,this.copyright=x[0],this.fontFamily=x[1],this.fontSubfamily=x[2],this.uniqueSubfamily=x[3],this.fontName=x[4],this.version=x[5];try{this.postscriptName=x[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=x[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=x[7],this.manufacturer=x[8],this.designer=x[9],this.description=x[10],this.vendorUrl=x[11],this.designerUrl=x[12],this.license=x[13],this.licenseUrl=x[14],this.preferredFamily=x[15],this.preferredSubfamily=x[17],this.compatibleFull=x[18],this.sampleText=x[19]},e})(),Nj=(function(){function e(){return e.__super__.constructor.apply(this,arguments)}return lh(e,ku),e.prototype.tag="maxp",e.prototype.parse=function(n){return n.pos=this.offset,this.version=n.readInt(),this.numGlyphs=n.readUInt16(),this.maxPoints=n.readUInt16(),this.maxContours=n.readUInt16(),this.maxCompositePoints=n.readUInt16(),this.maxComponentContours=n.readUInt16(),this.maxZones=n.readUInt16(),this.maxTwilightPoints=n.readUInt16(),this.maxStorage=n.readUInt16(),this.maxFunctionDefs=n.readUInt16(),this.maxInstructionDefs=n.readUInt16(),this.maxStackElements=n.readUInt16(),this.maxSizeOfInstructions=n.readUInt16(),this.maxComponentElements=n.readUInt16(),this.maxComponentDepth=n.readUInt16()},e})(),Qj=(function(){function e(){return e.__super__.constructor.apply(this,arguments)}return lh(e,ku),e.prototype.tag="hmtx",e.prototype.parse=function(n){var i,l,h,d,m,o,x;for(n.pos=this.offset,this.metrics=[],i=0,o=this.file.hhea.numberOfMetrics;0<=o?i<o:i>o;i=0<=o?++i:--i)this.metrics.push({advance:n.readUInt16(),lsb:n.readInt16()});for(h=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=(function(){var E,I;for(I=[],i=E=0;0<=h?E<h:E>h;i=0<=h?++E:--E)I.push(n.readInt16());return I})(),this.widths=(function(){var E,I,D,O;for(O=[],E=0,I=(D=this.metrics).length;E<I;E++)d=D[E],O.push(d.advance);return O}).call(this),l=this.widths[this.widths.length-1],x=[],i=m=0;0<=h?m<h:m>h;i=0<=h?++m:--m)x.push(this.widths.push(l));return x},e.prototype.forGlyph=function(n){return n in this.metrics?this.metrics[n]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[n-this.metrics.length]}},e})(),I4=[].slice,Oj=(function(){function e(){return e.__super__.constructor.apply(this,arguments)}return lh(e,ku),e.prototype.tag="glyf",e.prototype.parse=function(){return this.cache={}},e.prototype.glyphFor=function(n){var i,l,h,d,m,o,x,E,I,D;return n in this.cache?this.cache[n]:(d=this.file.loca,i=this.file.contents,l=d.indexOf(n),(h=d.lengthOf(n))===0?this.cache[n]=null:(i.pos=this.offset+l,m=(o=new Bd(i.read(h))).readShort(),E=o.readShort(),D=o.readShort(),x=o.readShort(),I=o.readShort(),this.cache[n]=m===-1?new Hj(o,E,D,x,I):new zj(o,m,E,D,x,I),this.cache[n]))},e.prototype.encode=function(n,i,l){var h,d,m,o,x;for(m=[],d=[],o=0,x=i.length;o<x;o++)h=n[i[o]],d.push(m.length),h&&(m=m.concat(h.encode(l)));return d.push(m.length),{table:m,offsets:d}},e})(),zj=(function(){function e(n,i,l,h,d,m){this.raw=n,this.numberOfContours=i,this.xMin=l,this.yMin=h,this.xMax=d,this.yMax=m,this.compound=!1}return e.prototype.encode=function(){return this.raw.data},e})(),Hj=(function(){function e(n,i,l,h,d){var m,o;for(this.raw=n,this.xMin=i,this.yMin=l,this.xMax=h,this.yMax=d,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],m=this.raw;o=m.readShort(),this.glyphOffsets.push(m.pos),this.glyphIDs.push(m.readUInt16()),32&o;)m.pos+=1&o?4:2,128&o?m.pos+=8:64&o?m.pos+=4:8&o&&(m.pos+=2)}return e.prototype.encode=function(){var n,i,l;for(i=new Bd(I4.call(this.raw.data)),n=0,l=this.glyphIDs.length;n<l;++n)i.pos=this.glyphOffsets[n];return i.data},e})(),jj=(function(){function e(){return e.__super__.constructor.apply(this,arguments)}return lh(e,ku),e.prototype.tag="loca",e.prototype.parse=function(n){var i,l;return n.pos=this.offset,i=this.file.head.indexToLocFormat,this.offsets=i===0?(function(){var h,d;for(d=[],l=0,h=this.length;l<h;l+=2)d.push(2*n.readUInt16());return d}).call(this):(function(){var h,d;for(d=[],l=0,h=this.length;l<h;l+=4)d.push(n.readUInt32());return d}).call(this)},e.prototype.indexOf=function(n){return this.offsets[n]},e.prototype.lengthOf=function(n){return this.offsets[n+1]-this.offsets[n]},e.prototype.encode=function(n,i){for(var l=new Uint32Array(this.offsets.length),h=0,d=0,m=0;m<l.length;++m)if(l[m]=h,d<i.length&&i[d]==m){++d,l[m]=h;var o=this.offsets[m],x=this.offsets[m+1]-o;x>0&&(h+=x)}for(var E=new Array(4*l.length),I=0;I<l.length;++I)E[4*I+3]=255&l[I],E[4*I+2]=(65280&l[I])>>8,E[4*I+1]=(16711680&l[I])>>16,E[4*I]=(4278190080&l[I])>>24;return E},e})(),Vj=(function(){function e(n){this.font=n,this.subset={},this.unicodes={},this.next=33}return e.prototype.generateCmap=function(){var n,i,l,h,d;for(i in h=this.font.cmap.tables[0].codeMap,n={},d=this.subset)l=d[i],n[i]=h[l];return n},e.prototype.glyphsFor=function(n){var i,l,h,d,m,o,x;for(h={},m=0,o=n.length;m<o;m++)h[d=n[m]]=this.font.glyf.glyphFor(d);for(d in i=[],h)(l=h[d])!=null&&l.compound&&i.push.apply(i,l.glyphIDs);if(i.length>0)for(d in x=this.glyphsFor(i))l=x[d],h[d]=l;return h},e.prototype.encode=function(n,i){var l,h,d,m,o,x,E,I,D,O,P,W,z,H,Z;for(h in l=F4.encode(this.generateCmap(),"unicode"),m=this.glyphsFor(n),P={0:0},Z=l.charMap)P[(x=Z[h]).old]=x.new;for(W in O=l.maxGlyphID,m)W in P||(P[W]=O++);return I=(function(ie){var ce,he;for(ce in he={},ie)he[ie[ce]]=ce;return he})(P),D=Object.keys(I).sort(function(ie,ce){return ie-ce}),z=(function(){var ie,ce,he;for(he=[],ie=0,ce=D.length;ie<ce;ie++)o=D[ie],he.push(I[o]);return he})(),d=this.font.glyf.encode(m,z,P),E=this.font.loca.encode(d.offsets,z),H={cmap:this.font.cmap.raw(),glyf:d.table,loca:E,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(i)},this.font.os2.exists&&(H["OS/2"]=this.font.os2.raw()),this.font.directory.encode(H)},e})();fn.API.PDFObject=(function(){var e;function n(){}return e=function(i,l){return(Array(l+1).join("0")+i).slice(-l)},n.convert=function(i){var l,h,d,m;if(Array.isArray(i))return"["+(function(){var o,x,E;for(E=[],o=0,x=i.length;o<x;o++)l=i[o],E.push(n.convert(l));return E})().join(" ")+"]";if(typeof i=="string")return"/"+i;if(i?.isString)return"("+i+")";if(i instanceof Date)return"(D:"+e(i.getUTCFullYear(),4)+e(i.getUTCMonth(),2)+e(i.getUTCDate(),2)+e(i.getUTCHours(),2)+e(i.getUTCMinutes(),2)+e(i.getUTCSeconds(),2)+"Z)";if({}.toString.call(i)==="[object Object]"){for(h in d=["<<"],i)m=i[h],d.push("/"+h+" "+n.convert(m));return d.push(">>"),d.join(`
`)}return""+i},n})();function Gj({filteredData:e,selectedMetric:n,exportOptions:i,onExportComplete:l}){const h=re.useRef(null),[d,m]=re.useState(!1),o=re.useCallback(()=>{console.log("[ExportRenderer] Map render complete"),m(!0)},[]);re.useEffect(()=>{if(!d||!h.current)return;(async()=>{console.log("[ExportRenderer] Starting export capture"),await new Promise(P=>setTimeout(P,500));try{console.log("[ExportRenderer] Capturing canvas at 4x scale");const W=await GI(h.current,{scale:4,useCORS:!0,backgroundColor:"#ffffff",logging:!1});if(console.log(`[ExportRenderer] Canvas captured: ${W.width}x${W.height}`),i.fileFormat==="png"){console.log("[ExportRenderer] Exporting as PNG");const z=document.createElement("a");z.download=`domapus-map-${n}.png`,z.href=W.toDataURL("image/png",1),z.click()}else{console.log("[ExportRenderer] Exporting as high-DPI PDF");const z=W.toDataURL("image/png",1),H=W.width/4*.75,Z=W.height/4*.75,ie=new fn({orientation:H>Z?"landscape":"portrait",unit:"pt",format:[H,Z]});ie.addImage(z,"PNG",0,0,H,Z,void 0,"FAST"),ie.save(`domapus-map-${n}.pdf`)}}catch(P){console.error("[ExportRenderer] Export failed:",P)}finally{l()}})()},[d,i,n,l]);const x=O=>({median_sale_price:"Median Sale Price",median_ppsf:"Median Price per Sq Ft",avg_sale_to_list_ratio:"Sale-to-List Ratio",median_dom:"Median Days on Market"})[O]||O.split("_").map(W=>W.charAt(0).toUpperCase()+W.slice(1)).join(" "),E=()=>i.regionScope==="state"?i.selectedState||"State":i.regionScope==="metro"?i.selectedMetro||"Metro Area":"United States",I=()=>new Date().toLocaleDateString("en-US",{month:"long",year:"numeric"}),D=re.useMemo(()=>e.map(O=>O[n]).filter(O=>typeof O=="number"&&O>0),[e,n]);return ae.jsxs("div",{ref:h,className:"fixed top-0 left-0 w-[1200px] h-[900px] bg-white p-8 flex flex-col font-sans",style:{transform:"translateX(-9999px)"},children:[i.includeTitle&&ae.jsxs("header",{className:"text-center mb-6",children:[ae.jsxs("h1",{className:"text-4xl font-bold text-gray-900 mb-2",children:[x(n)," by ZIP Code"]}),ae.jsxs("p",{className:"text-xl text-gray-600 font-medium",children:[E(),"  ",I()]})]}),ae.jsx("main",{className:"flex-grow border border-gray-200 rounded-xl overflow-hidden bg-gray-50 relative shadow-sm",children:e.length>0?ae.jsxs(ae.Fragment,{children:[ae.jsx(zF,{filteredData:e,selectedMetric:n,regionScope:i.regionScope,onRenderComplete:o}),i.includeLegend&&ae.jsx("div",{className:"absolute bottom-6 right-6 w-72",children:ae.jsx(tx,{selectedMetric:n,metricValues:D,isExport:!0})})]}):ae.jsx("div",{className:"flex items-center justify-center h-full text-gray-500 text-xl font-medium",children:"Preparing map data..."})}),ae.jsx("footer",{className:"pt-6 flex justify-end items-end",children:ae.jsxs("div",{className:"text-right",children:[ae.jsx(O6,{size:"lg",className:"mb-2 justify-end"}),ae.jsx("p",{className:"text-sm text-gray-600 font-medium",children:"Market Analytics by Domapus"}),ae.jsx("p",{className:"text-xs text-gray-400",children:"Data sourced from Redfin"})]})})]})}const e_=768;function T4(){const[e,n]=re.useState(void 0);return re.useEffect(()=>{const i=window.matchMedia(`(max-width: ${e_-1}px)`),l=()=>{n(window.innerWidth<e_)};return i.addEventListener("change",l),n(window.innerWidth<e_),()=>i.removeEventListener("change",l)},[]),!!e}function Kj({allZipData:e,selectedMetric:n,onExportModeChange:i}){const[l,h]=re.useState(!1),[d,m]=re.useState(null),[o,x]=re.useState(!1),[E,I]=re.useState(null),D=T4(),{filteredData:O}=re.useMemo(()=>!d||Object.keys(e).length===0?{filteredData:[]}:{filteredData:Object.values(e).filter(Z=>d.regionScope==="state"&&d.selectedState?Z.state===d.selectedState:d.regionScope==="metro"&&d.selectedMetro?Z.parent_metro===d.selectedMetro:!0)},[e,d]);re.useEffect(()=>()=>{E&&clearTimeout(E)},[E]);const P=H=>{m(H),x(!0);const Z=setTimeout(()=>{o&&(x(!1),i_({title:"Export Timeout",description:"Export took too long and was cancelled. Please try again.",variant:"destructive"}))},6e4);I(Z)},W=()=>{E&&clearTimeout(E),x(!1),m(null),i_({title:"Export Complete",description:"Your map has been downloaded successfully."})},z=()=>{E&&clearTimeout(E),x(!1),m(null),h(!1),i(!1)};return re.useEffect(()=>{i(l)},[l,i]),l?ae.jsxs(ae.Fragment,{children:[ae.jsx(Q6,{allZipData:e,selectedMetric:n,isExporting:o,onExport:P,onCancel:z}),o&&ae.jsxs(ae.Fragment,{children:[ae.jsx("div",{className:"fixed inset-0 bg-black/50 z-[60] flex items-center justify-center",children:ae.jsxs("div",{className:"bg-white p-8 rounded-lg shadow-lg border text-center space-y-4",children:[ae.jsx("div",{role:"progressbar","aria-label":"Generating export",className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto"}),ae.jsxs("div",{children:[ae.jsx("h3",{className:"font-semibold text-lg",children:"Generating Your Export"}),ae.jsx("p",{className:"text-sm text-gray-600",children:"Please wait while we process your map..."})]})]})}),ae.jsx(Gj,{filteredData:O,selectedMetric:n,exportOptions:d,onExportComplete:W})]})]}):ae.jsxs(Cc,{variant:"outline",size:"sm",onClick:()=>h(!0),children:[ae.jsx(Q5,{className:"h-4 w-4 mr-2"}),!D&&ae.jsx("span",{children:"Export"})]})}function P4(e,n,i=0,l=e.length-1,h=qj){for(;l>i;){if(l-i>600){const x=l-i+1,E=n-i+1,I=Math.log(x),D=.5*Math.exp(2*I/3),O=.5*Math.sqrt(I*D*(x-D)/x)*(E-x/2<0?-1:1),P=Math.max(i,Math.floor(n-E*D/x+O)),W=Math.min(l,Math.floor(n+(x-E)*D/x+O));P4(e,n,P,W,h)}const d=e[n];let m=i,o=l;for(dm(e,i,n),h(e[l],d)>0&&dm(e,i,l);m<o;){for(dm(e,m,o),m++,o--;h(e[m],d)<0;)m++;for(;h(e[o],d)>0;)o--}h(e[i],d)===0?dm(e,i,o):(o++,dm(e,o,l)),o<=n&&(i=o+1),n<=o&&(l=o-1)}}function dm(e,n,i){const l=e[n];e[n]=e[i],e[i]=l}function qj(e,n){return e<n?-1:e>n?1:0}class $j{constructor(n=9){this._maxEntries=Math.max(4,n),this._minEntries=Math.max(2,Math.ceil(this._maxEntries*.4)),this.clear()}all(){return this._all(this.data,[])}search(n){let i=this.data;const l=[];if(!F0(n,i))return l;const h=this.toBBox,d=[];for(;i;){for(let m=0;m<i.children.length;m++){const o=i.children[m],x=i.leaf?h(o):o;F0(n,x)&&(i.leaf?l.push(o):r_(n,x)?this._all(o,l):d.push(o))}i=d.pop()}return l}collides(n){let i=this.data;if(!F0(n,i))return!1;const l=[];for(;i;){for(let h=0;h<i.children.length;h++){const d=i.children[h],m=i.leaf?this.toBBox(d):d;if(F0(n,m)){if(i.leaf||r_(n,m))return!0;l.push(d)}}i=l.pop()}return!1}load(n){if(!(n&&n.length))return this;if(n.length<this._minEntries){for(let l=0;l<n.length;l++)this.insert(n[l]);return this}let i=this._build(n.slice(),0,n.length-1,0);if(!this.data.children.length)this.data=i;else if(this.data.height===i.height)this._splitRoot(this.data,i);else{if(this.data.height<i.height){const l=this.data;this.data=i,i=l}this._insert(i,this.data.height-i.height-1,!0)}return this}insert(n){return n&&this._insert(n,this.data.height-1),this}clear(){return this.data=ip([]),this}remove(n,i){if(!n)return this;let l=this.data;const h=this.toBBox(n),d=[],m=[];let o,x,E;for(;l||d.length;){if(l||(l=d.pop(),x=d[d.length-1],o=m.pop(),E=!0),l.leaf){const I=Wj(n,l.children,i);if(I!==-1)return l.children.splice(I,1),d.push(l),this._condense(d),this}!E&&!l.leaf&&r_(l,h)?(d.push(l),m.push(o),o=0,x=l,l=l.children[0]):x?(o++,l=x.children[o],E=!1):l=null}return this}toBBox(n){return n}compareMinX(n,i){return n.minX-i.minX}compareMinY(n,i){return n.minY-i.minY}toJSON(){return this.data}fromJSON(n){return this.data=n,this}_all(n,i){const l=[];for(;n;)n.leaf?i.push(...n.children):l.push(...n.children),n=l.pop();return i}_build(n,i,l,h){const d=l-i+1;let m=this._maxEntries,o;if(d<=m)return o=ip(n.slice(i,l+1)),Xf(o,this.toBBox),o;h||(h=Math.ceil(Math.log(d)/Math.log(m)),m=Math.ceil(d/Math.pow(m,h-1))),o=ip([]),o.leaf=!1,o.height=h;const x=Math.ceil(d/m),E=x*Math.ceil(Math.sqrt(m));n5(n,i,l,E,this.compareMinX);for(let I=i;I<=l;I+=E){const D=Math.min(I+E-1,l);n5(n,I,D,x,this.compareMinY);for(let O=I;O<=D;O+=x){const P=Math.min(O+x-1,D);o.children.push(this._build(n,O,P,h-1))}}return Xf(o,this.toBBox),o}_chooseSubtree(n,i,l,h){for(;h.push(i),!(i.leaf||h.length-1===l);){let d=1/0,m=1/0,o;for(let x=0;x<i.children.length;x++){const E=i.children[x],I=t_(E),D=Yj(n,E)-I;D<m?(m=D,d=I<d?I:d,o=E):D===m&&I<d&&(d=I,o=E)}i=o||i.children[0]}return i}_insert(n,i,l){const h=l?n:this.toBBox(n),d=[],m=this._chooseSubtree(h,this.data,i,d);for(m.children.push(n),Bm(m,h);i>=0&&d[i].children.length>this._maxEntries;)this._split(d,i),i--;this._adjustParentBBoxes(h,d,i)}_split(n,i){const l=n[i],h=l.children.length,d=this._minEntries;this._chooseSplitAxis(l,d,h);const m=this._chooseSplitIndex(l,d,h),o=ip(l.children.splice(m,l.children.length-m));o.height=l.height,o.leaf=l.leaf,Xf(l,this.toBBox),Xf(o,this.toBBox),i?n[i-1].children.push(o):this._splitRoot(l,o)}_splitRoot(n,i){this.data=ip([n,i]),this.data.height=n.height+1,this.data.leaf=!1,Xf(this.data,this.toBBox)}_chooseSplitIndex(n,i,l){let h,d=1/0,m=1/0;for(let o=i;o<=l-i;o++){const x=bm(n,0,o,this.toBBox),E=bm(n,o,l,this.toBBox),I=Jj(x,E),D=t_(x)+t_(E);I<d?(d=I,h=o,m=D<m?D:m):I===d&&D<m&&(m=D,h=o)}return h||l-i}_chooseSplitAxis(n,i,l){const h=n.leaf?this.compareMinX:Zj,d=n.leaf?this.compareMinY:Xj,m=this._allDistMargin(n,i,l,h),o=this._allDistMargin(n,i,l,d);m<o&&n.children.sort(h)}_allDistMargin(n,i,l,h){n.children.sort(h);const d=this.toBBox,m=bm(n,0,i,d),o=bm(n,l-i,l,d);let x=S0(m)+S0(o);for(let E=i;E<l-i;E++){const I=n.children[E];Bm(m,n.leaf?d(I):I),x+=S0(m)}for(let E=l-i-1;E>=i;E--){const I=n.children[E];Bm(o,n.leaf?d(I):I),x+=S0(o)}return x}_adjustParentBBoxes(n,i,l){for(let h=l;h>=0;h--)Bm(i[h],n)}_condense(n){for(let i=n.length-1,l;i>=0;i--)n[i].children.length===0?i>0?(l=n[i-1].children,l.splice(l.indexOf(n[i]),1)):this.clear():Xf(n[i],this.toBBox)}}function Wj(e,n,i){if(!i)return n.indexOf(e);for(let l=0;l<n.length;l++)if(i(e,n[l]))return l;return-1}function Xf(e,n){bm(e,0,e.children.length,n,e)}function bm(e,n,i,l,h){h||(h=ip(null)),h.minX=1/0,h.minY=1/0,h.maxX=-1/0,h.maxY=-1/0;for(let d=n;d<i;d++){const m=e.children[d];Bm(h,e.leaf?l(m):m)}return h}function Bm(e,n){return e.minX=Math.min(e.minX,n.minX),e.minY=Math.min(e.minY,n.minY),e.maxX=Math.max(e.maxX,n.maxX),e.maxY=Math.max(e.maxY,n.maxY),e}function Zj(e,n){return e.minX-n.minX}function Xj(e,n){return e.minY-n.minY}function t_(e){return(e.maxX-e.minX)*(e.maxY-e.minY)}function S0(e){return e.maxX-e.minX+(e.maxY-e.minY)}function Yj(e,n){return(Math.max(n.maxX,e.maxX)-Math.min(n.minX,e.minX))*(Math.max(n.maxY,e.maxY)-Math.min(n.minY,e.minY))}function Jj(e,n){const i=Math.max(e.minX,n.minX),l=Math.max(e.minY,n.minY),h=Math.min(e.maxX,n.maxX),d=Math.min(e.maxY,n.maxY);return Math.max(0,h-i)*Math.max(0,d-l)}function r_(e,n){return e.minX<=n.minX&&e.minY<=n.minY&&n.maxX<=e.maxX&&n.maxY<=e.maxY}function F0(e,n){return n.minX<=e.maxX&&n.minY<=e.maxY&&n.maxX>=e.minX&&n.maxY>=e.minY}function ip(e){return{children:e,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function n5(e,n,i,l,h){const d=[n,i];for(;d.length;){if(i=d.pop(),n=d.pop(),i-n<=l)continue;const m=n+Math.ceil((i-n)/l/2)*l;P4(e,m,n,i,h),d.push(n,m,m,i)}}let fm=null;function eV(e){const n=[];for(const[i,l]of Object.entries(e))l.latitude&&l.longitude&&n.push({minX:l.longitude-.01,minY:l.latitude-.01,maxX:l.longitude+.01,maxY:l.latitude+.01,zipCode:i});return fm?fm.clear():fm=new $j,fm.load(n),new Set(n.map(i=>i.zipCode)),console.log(`[SpatialIndex] Built index with ${n.length} ZIP codes`),fm}const tV={median_sale_price:"Median Sale Price",median_ppsf:"Median Price per Sq Ft",avg_sale_to_list_ratio:"Sale-to-List Ratio",median_dom:"Median Days on Market"};function i5({selectedMetric:e,onMetricChange:n}){return ae.jsxs("div",{className:"flex items-center gap-2",children:[ae.jsx("label",{className:"text-xs font-medium text-dashboard-text-secondary whitespace-nowrap hidden lg:block",children:"Metric:"}),ae.jsxs(aF,{value:e,onValueChange:n,children:[ae.jsx(jw,{className:"w-48 h-8 text-sm","aria-label":"Select visualization metric",children:ae.jsx(lF,{placeholder:"Select a metric"})}),ae.jsx(Vw,{className:"z-[9999]",children:Object.entries(tV).map(([i,l])=>ae.jsx(Gw,{value:i,children:l},i))})]})]})}function s5({onSearch:e}){const[n,i]=re.useState(""),l=d=>{const m=d.target.value.replace(/\D/g,"");i(m)},h=d=>{d.preventDefault(),n.trim()&&e(n.trim())};return ae.jsxs("form",{onSubmit:h,className:"flex items-center space-x-2",children:[ae.jsxs("div",{className:"relative flex-1",children:[ae.jsx(xw,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-dashboard-text-secondary"}),ae.jsx(Dy,{type:"text",pattern:"[0-9]*",inputMode:"numeric",placeholder:"Enter ZIP code...",value:n,onChange:l,className:"pl-10 w-48",maxLength:5,"aria-label":"Search for ZIP code"})]}),ae.jsx(Cc,{type:"submit",variant:"outline",size:"sm","aria-label":"Search",children:"Search"})]})}const rV="/Domapus/";function nV({selectedMetric:e,onMetricChange:n,onSearch:i,children:l}){const h=T4(),[d,m]=re.useState(null);re.useEffect(()=>{const x=`${rV}data/last_updated.json`;(async()=>{try{const I=await fetch(x);if(!I.ok)throw new Error("Failed to fetch last_updated.json");const D=await I.json();m(D.last_updated_utc)}catch(I){console.error("Error fetching last_updated.json:",I)}})()},[]);const o=x=>{if(!x)return"N/A";try{return new Date(x).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})}catch{return"N/A"}};return ae.jsxs(ae.Fragment,{children:[ae.jsxs("header",{className:"flex items-center justify-between px-4 sm:px-6 py-2 bg-dashboard-panel border-b border-dashboard-border h-14 sm:h-16",children:[ae.jsxs("div",{className:"flex items-center gap-4 sm:gap-6 flex-1 min-w-0",children:[ae.jsxs("div",{className:"flex items-center gap-2 cursor-pointer hover:opacity-80 transition-opacity flex-shrink-0",onClick:()=>window.location.reload(),title:"Click to reload page",children:[ae.jsx("img",{src:"/Domapus/Logo.svg",alt:"Domapus Logo",width:"40",height:"40",className:"w-9 h-9 sm:w-10 sm:h-10"}),ae.jsxs("div",{className:"flex flex-col font-logo",children:[ae.jsx("h1",{className:"text-base sm:text-lg font-bold text-dashboard-text-primary leading-tight",children:"Domapus"}),ae.jsx("p",{className:"text-xs sm:text-sm text-dashboard-text-secondary leading-tight hidden sm:block",children:"Housing Market Analysis"})]})]}),!h&&ae.jsx(i5,{selectedMetric:e,onMetricChange:n})]}),ae.jsxs("div",{className:"flex items-center gap-4 flex-shrink-0",children:[!h&&ae.jsx(s5,{onSearch:i}),ae.jsxs("div",{className:"flex items-center gap-2 ml-1",children:[ae.jsxs("div",{className:"flex items-center text-dashboard-text-secondary gap-2 mr-2",children:[ae.jsx(W3,{className:"h-4 w-4 opacity-80"}),ae.jsxs("div",{className:"flex flex-col",children:[ae.jsx("span",{className:"text-xs font-medium",children:"Data Updated:"}),ae.jsx("span",{className:"text-xs font-medium whitespace-nowrap",children:o(d)})]})]}),l,ae.jsx(Cc,{variant:"outline",size:"sm",asChild:!0,children:ae.jsxs("a",{href:"https://github.com/Jasperc2024/Domapus",target:"_blank",rel:"noopener noreferrer",title:"GitHub",children:[ae.jsx(eP,{className:"h-4 w-4 mr-2"}),!h&&ae.jsx("span",{children:"GitHub"})," "]})}),ae.jsx(Cc,{variant:"outline",size:"sm",asChild:!0,className:"bg-pink-600 hover:bg-pink-700 text-white",children:ae.jsxs("a",{href:"https://buymeacoffee.com/JasperC",target:"_blank",rel:"noopener noreferrer",title:"Sponsor",children:[ae.jsx(c_,{className:"h-4 w-4 mr-2"}),!h&&ae.jsx("span",{children:"Sponsor"})," "]})})]})]})]}),h&&ae.jsx("div",{className:"fixed bottom-4 left-4 right-4 z-[1001] bg-dashboard-panel border border-dashboard-border rounded-lg p-3 shadow-lg",children:ae.jsxs("div",{className:"space-y-2.5",children:[ae.jsx(i5,{selectedMetric:e,onMetricChange:n}),ae.jsx(s5,{onSearch:i})]})})]})}function iV(e,n){if(!e||!e.zipCode)return'<div class="p-2">No data available</div>';const l={median_sale_price:{key:"median_sale_price",label:"Median Sale Price",format:"currency"},median_list_price:{key:"median_list_price",label:"Median List Price",format:"currency"},median_ppsf:{key:"median_ppsf",label:"Median Price Per Square Foot",format:"currency"},homes_sold:{key:"homes_sold",label:"Homes Sold",format:"number"},pending_sales:{key:"pending_sales",label:"Pending Sales",format:"number"},new_listings:{key:"new_listings",label:"New Listings",format:"number"},inventory:{key:"inventory",label:"Inventory",format:"number"},months_of_supply:{key:"months_of_supply",label:"Months of Supply",format:"number"},median_dom:{key:"median_dom",label:"Median Days on Market",format:"number"},avg_sale_to_list_ratio:{key:"avg_sale_to_list_ratio",label:"Sale-to-List Ratio",format:"ratio"},sold_above_list:{key:"sold_above_list",label:"% Sold Above List",format:"percent"},price_drops:{key:"price_drops",label:"% Price Drops",format:"percent"},off_market_in_two_weeks:{key:"off_market_in_two_weeks",label:"% Off Market in 2 Weeks",format:"percent"}}[n],h=l?e[l.key]:null;let d="N/A";if(typeof h=="number"&&isFinite(h))switch(l.format){case"currency":d=`$${h.toLocaleString()}`;break;case"percent":d=`${h.toFixed(1)}%`;break;case"ratio":d=`${(h*100).toFixed(1)}%`;break;case"number":d=h.toLocaleString();break}return`
      <div class="font-bold text-base">${e.zipCode}</div>
      <div class="text-sm text-gray-600">${e.city||"Unknown City"}, ${e.state}</div>
      <div class="text-sm mt-2">
        <span class="font-semibold">${l?.label||n}:</span>
        <span class="font-normal"> ${d}</span>
      </div>
  `}const sV="/Domapus/",n_=["#FFF9B0","#FFEB84","#FFD166","#FF9A56","#E84C61","#C13584","#7B2E8D","#2E0B59"];function o5(e,n){if(!e)return 0;const i=e[n];return typeof i=="number"&&isFinite(i)?i:0}function oV(e,n=8){const i=[...e].filter(x=>x>0).sort((x,E)=>x-E);if(i.length===0)return[];const l=i[0],h=i[i.length-1];if(l===h)return[l];const d=[],m=(h-l)*1e-6||1e-6,o=x=>i[Math.floor(x*(i.length-1))];for(let x=1;x<n;x++){let E=o(x/n);d.length&&E<=d[d.length-1]&&(E=d[d.length-1]+m),d.push(E)}return d}function aV({selectedMetric:e,onZipSelect:n,searchZip:i,zipData:l,isLoading:h}){console.log("[MapLibreMap] Component render");const d=re.useRef(null),m=re.useRef(null),[o,x]=re.useState(!1),[E,I]=re.useState(null),D=re.useRef(!1),[O,P]=re.useState(!1),W=re.useRef(null),z=re.useRef(null),H=re.useRef(null),Z=re.useRef(null),ie=re.useRef(""),ce=re.useRef(""),he=re.useRef({zipData:l,selectedMetric:e,onZipSelect:n});re.useEffect(()=>{he.current={zipData:l,selectedMetric:e,onZipSelect:n}},[l,e,n]);const Ie=re.useCallback(Me=>{OF();const Pe=new sp.Map({container:Me,style:"https://basemaps.cartocdn.com/gl/positron-gl-style/style.json",center:[-98.57,39.82],zoom:3.5,minZoom:3,maxZoom:12,attributionControl:!1});return Pe.addControl(new sp.AttributionControl({compact:!0}),"bottom-left"),Pe.addControl(new sp.NavigationControl,"top-right"),Pe.on("error",xe=>{console.error("[Map] Internal error:",xe?.error??xe),I("Map internal error. Try refreshing.")}),Pe.once("load",()=>{console.log("[Map] style/load fired  map is ready"),x(!0)}),Pe},[]);re.useEffect(()=>{if(!d.current||m.current)return;const Me=d.current;let Pe=!1;const xe=()=>{if(!Pe&&!(Me.clientWidth===0||Me.clientHeight===0))try{const pe=Ie(Me);m.current=pe}catch(pe){console.error("Map init failed",pe)}},nt=new ResizeObserver(()=>{xe(),m.current?.resize()});return W.current=nt,nt.observe(Me),xe(),()=>{if(Pe=!0,nt.disconnect(),W.current=null,z.current&&(cancelAnimationFrame(z.current),z.current=null),Z.current&&(Z.current.remove(),Z.current=null),m.current){try{console.log("[MapLibreMap] Removing map instance"),m.current.remove()}catch(pe){console.warn("[MapLibreMap] error removing map",pe)}m.current=null}x(!1),D.current=!1}},[Ie]);const Ve=re.useCallback(()=>{const Me=m.current;if(!Me||D.current)return;const Pe="zips-fill";console.log(`[MapLibreMap] Setting up interactions for layer: ${Pe}`);const xe=_e=>{H.current=_e,!z.current&&(z.current=requestAnimationFrame(()=>{const Ue=H.current;z.current=null;try{const Fe=Me.queryRenderedFeatures(Ue.point,{layers:[Pe]}),pt=Fe.length>0;if(Me.getCanvas().style.cursor=pt?"pointer":"",!pt){Z.current?.remove();return}const ht=Fe[0].properties??{},Je=ht.ZCTA5CE20||ht.zipCode||ht.id,{zipData:ze,selectedMetric:je}=he.current;if(!Je||!ze[Je]){Z.current?.remove();return}Z.current||(Z.current=new sp.Popup({closeButton:!1,offset:[0,-10],maxWidth:"320px"})),Z.current.setLngLat(Ue.lngLat).setHTML(iV(ze[Je],je)).addTo(Me)}catch(Fe){console.error("mousemove error",Fe)}}))},nt=_e=>{const Ue=Me.queryRenderedFeatures(_e.point,{layers:[Pe]});if(!Ue.length)return;const Fe=Ue[0].properties??{},pt=Fe.ZCTA5CE20||Fe.zipCode||Fe.id,{zipData:ht,onZipSelect:Je}=he.current;console.log(`[MapLibreMap] Clicked ZIP: ${pt}`),pt&&ht[pt]?Je(ht[pt]):console.warn(`[MapLibreMap] ZIP ${pt} found on map but missing in zipData`)},pe=()=>{Me.getCanvas().style.cursor="",Z.current?.remove()};Me.on("mousemove",xe),Me.on("click",nt),Me.on("mouseout",pe),D.current=!0},[]);return re.useEffect(()=>{if(!o||!m.current)return;const Me=m.current;if(!Me.getSource("zips"))try{Me.getStyle().layers.forEach(Ue=>{if("source-layer"in Ue){const Fe=Ue["source-layer"];(Fe==="transportation"||Fe==="transportation_name")&&Me.setLayoutProperty(Ue.id,"visibility","none")}}),console.log("[MapLibreMap] Adding PMTiles source...");const xe=new URL(`${sV}data/us_zip_codes.pmtiles`,window.location.origin).href;Me.addSource("zips",{type:"vector",url:`pmtiles://${xe}`,promoteId:"ZCTA5CE20"});const nt=Me.getStyle().layers;let pe;const _e=nt.find(Ue=>Ue.id==="watername_ocean");_e&&(pe=_e.id),Me.addLayer({id:"zips-fill",type:"fill",source:"zips","source-layer":"us_zip_codes",paint:{"fill-color":"#cccccc","fill-opacity":.75,"fill-outline-color":"rgba(0,0,0,0.08)"}},pe),Me.once("idle",()=>{console.log("[MapLibreMap] PMTiles layer loaded"),P(!0)}),Ve()}catch(Pe){console.error("Add PMTiles layer failed",Pe),I("Failed to load map data. Try refreshing.")}},[o,Ve]),re.useEffect(()=>{if(!o||!m.current||!O)return;const Me=m.current,Pe=Me.getSource("zips");if(!Pe||!Pe._loaded||!Me.getLayer("zips-fill")||Object.keys(l).length===0)return;const xe=Object.keys(l).length.toString();if(ie.current===e&&ce.current===xe)return;ie.current=e,ce.current=xe,console.log("[MapLibreMap] Updating choropleth colors...");const nt=Object.values(l).map(Ue=>o5(Ue,e)),pe=oV(nt);if(pe.length===0){console.warn("[MapLibreMap] No valid data for choropleth");return}const _e=["step",["coalesce",["feature-state","metricValue"],0],"transparent",.001,n_[0],...pe.flatMap((Ue,Fe)=>[Ue,n_[Math.min(Fe+1,n_.length-1)]])];for(const[Ue,Fe]of Object.entries(l)){const pt=o5(Fe,e);Me.setFeatureState({source:"zips",sourceLayer:"us_zip_codes",id:Ue},{metricValue:pt})}Me.setPaintProperty("zips-fill","fill-color",_e),console.log(`[MapLibreMap] Choropleth updated for ${Object.keys(l).length} ZIPs, ${pe.length} buckets`)},[o,O,l,e]),re.useEffect(()=>{if(!o||!m.current||!i||!l[i])return;const{longitude:Me,latitude:Pe}=l[i];Me&&Pe&&m.current.flyTo({center:[Me,Pe],zoom:10})},[o,i,l]),ae.jsxs("div",{className:"absolute inset-0 w-full h-full min-h-[400px]",children:[ae.jsx("div",{ref:d,className:"w-full h-full",style:{minHeight:"400px"}}),(h||!o||E)&&ae.jsx("div",{className:"absolute inset-0 flex flex-col items-center justify-center bg-white/80 z-10",children:E?ae.jsx("div",{className:"text-red-500 font-bold",children:E}):ae.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary"})})]})}function lV({onClose:e}){return re.useEffect(()=>{const n=setTimeout(e,2e4);return()=>clearTimeout(n)},[e]),ae.jsx("div",{className:"fixed top-4 left-1/2 transform -translate-x-1/2 z-50 max-w-md w-full mx-4",children:ae.jsxs("div",{className:"bg-dashboard-panel border border-dashboard-border rounded-lg shadow-lg p-4",children:[ae.jsxs("div",{className:"flex items-start justify-between",children:[ae.jsxs("div",{className:"flex items-start space-x-3",children:[ae.jsx(c_,{className:"h-5 w-5 text-pink-600 mt-0.5 flex-shrink-0"}),ae.jsxs("div",{className:"text-sm text-dashboard-text-primary",children:[ae.jsx("p",{className:"font-semibold mb-1",children:"This site is proudly ad-free and built to serve the public."}),ae.jsx("p",{className:"text-dashboard-text-secondary",children:"If you find it useful, please consider sponsoring or supporting us to keep the data flowing and the site improving."})]})]}),ae.jsx(Cc,{variant:"ghost",size:"sm",onClick:e,className:"h-6 w-6 p-0 flex-shrink-0",children:ae.jsx($m,{className:"h-4 w-4"})})]}),ae.jsxs("div",{className:"mt-3 flex space-x-2",children:[ae.jsx(Cc,{size:"sm",asChild:!0,className:"bg-pink-600 hover:bg-pink-700 text-white",children:ae.jsxs("a",{href:"https://buymeacoffee.com/jasperc",target:"_blank",rel:"noopener noreferrer",children:[ae.jsx(c_,{className:"h-4 w-4 mr-2"}),"Sponsor"]})}),ae.jsx(Cc,{variant:"outline",size:"sm",onClick:e,children:"Maybe later"})]})]})})}const hy=re.forwardRef(({className:e,...n},i)=>ae.jsx("div",{ref:i,className:Li("rounded-lg border bg-card text-card-foreground shadow-sm",e),...n}));hy.displayName="Card";const L4=re.forwardRef(({className:e,...n},i)=>ae.jsx("div",{ref:i,className:Li("flex flex-col space-y-1.5 p-6",e),...n}));L4.displayName="CardHeader";const M4=re.forwardRef(({className:e,...n},i)=>ae.jsx("h3",{ref:i,className:Li("text-2xl font-semibold leading-none tracking-tight",e),...n}));M4.displayName="CardTitle";const cV=re.forwardRef(({className:e,...n},i)=>ae.jsx("p",{ref:i,className:Li("text-sm text-muted-foreground",e),...n}));cV.displayName="CardDescription";const dy=re.forwardRef(({className:e,...n},i)=>ae.jsx("div",{ref:i,className:Li("p-6 pt-0",e),...n}));dy.displayName="CardContent";const AV=re.forwardRef(({className:e,...n},i)=>ae.jsx("div",{ref:i,className:Li("flex items-center p-6 pt-0",e),...n}));AV.displayName="CardFooter";const uV=yy("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function a5({className:e,variant:n,...i}){return ae.jsx("div",{className:Li(uV({variant:n}),e),...i})}function hV({currentZip:e,allZipData:n,onClose:i}){const[l,h]=re.useState(""),[d,m]=re.useState(null),[o,x]=re.useState(""),E=()=>{if(!l.trim())return;x("");const P=n[l.trim()];P?m(P):(x("ZIP code not found in our database."),m(null))},I=(P,W)=>{if(P==null)return"N/A";const z=Number(P);if(isNaN(z))return"N/A";switch(W){case"price":return`$${z.toLocaleString()}`;case"days":return`${z} days`;case"percentage":return`${z.toFixed(1)}%`;case"ratio":return`${(z*100).toFixed(1)}%`;default:return z.toLocaleString()}},D=(P,W)=>{const z=Number(P),H=Number(W);if(isNaN(z)||isNaN(H))return"same";const Z=z-H;return Math.abs(Z)<.01?"same":Z>0?"higher":"lower"},O=[{key:"median_sale_price",label:"Median Sale Price",type:"price"},{key:"median_list_price",label:"Median List Price",type:"price"},{key:"median_ppsf",label:"Median Price per Sq Ft",type:"price"},{key:"homes_sold",label:"Homes Sold",type:"number"},{key:"pending_sales",label:"Pending Sales",type:"number"},{key:"new_listings",label:"New Listings",type:"number"},{key:"inventory",label:"Inventory",type:"number"},{key:"months_of_supply",label:"Months of Supply",type:"number"},{key:"median_dom",label:"Median Days on Market",type:"days"},{key:"avg_sale_to_list_ratio",label:"Sale-to-List Ratio",type:"ratio"},{key:"sold_above_list",label:"% Sold Above List",type:"percentage"},{key:"price_drops",label:"% Price Drops",type:"percentage"},{key:"off_market_in_two_weeks",label:"% Off Market in 2 Weeks",type:"percentage"}];return ae.jsxs("div",{className:"space-y-4",children:[ae.jsxs("div",{className:"flex items-center justify-between",children:[ae.jsx("h3",{className:"text-lg font-semibold text-dashboard-text-primary",children:"Compare ZIP Codes"}),ae.jsx(Cc,{variant:"ghost",size:"sm",onClick:i,"aria-label":"Close comparison",children:ae.jsx($m,{className:"h-4 w-4"})})]}),ae.jsxs("div",{className:"flex space-x-2",children:[ae.jsx(Dy,{type:"text",pattern:"[0-9]*",inputMode:"numeric",maxLength:5,placeholder:"Enter ZIP code...",value:l,onChange:P=>h(P.target.value.replace(/\D/g,"")),onKeyDown:P=>{P.key==="Enter"&&E()},"aria-label":"ZIP code to compare"}),ae.jsx(Cc,{onClick:E,size:"sm","aria-label":"Search",children:ae.jsx(xw,{className:"h-4 w-4"})})]}),o&&ae.jsx("div",{className:"text-sm text-red-500 p-2 rounded bg-red-50",children:o}),d&&ae.jsxs("div",{className:"space-y-3 pt-2",children:[ae.jsxs("div",{className:"grid grid-cols-3 gap-2 mb-4 text-center",children:[ae.jsxs("div",{children:[ae.jsx(a5,{variant:"secondary",children:e.zipCode}),ae.jsx("div",{className:"text-xs text-muted-foreground mt-1",children:e.city})]}),ae.jsx("div",{className:"text-xs text-muted-foreground self-center",children:"vs"}),ae.jsxs("div",{children:[ae.jsx(a5,{variant:"secondary",children:d.zipCode}),ae.jsx("div",{className:"text-xs text-muted-foreground mt-1",children:d.city})]})]}),ae.jsx("div",{className:"space-y-2",children:O.map(P=>{const W=e[P.key],z=d[P.key],H=D(W,z),Z=!P.key.includes("dom");return ae.jsx(hy,{children:ae.jsxs(dy,{className:"p-3",children:[ae.jsx("div",{className:"text-center mb-2 text-xs font-medium text-muted-foreground",children:P.label}),ae.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[ae.jsx("div",{className:`text-center font-bold text-sm ${H==="higher"?Z?"text-green-600":"text-red-600":H==="lower"?Z?"text-red-600":"text-green-600":""}`,children:I(W,P.type)}),ae.jsx("div",{className:`text-center font-bold text-sm ${H==="lower"?Z?"text-green-600":"text-red-600":H==="higher"?Z?"text-red-600":"text-green-600":""}`,children:I(z,P.type)})]})]})},P.key)})})]})]})}function dV({isOpen:e,isCollapsed:n,zipData:i,allZipData:l,onClose:h}){const[d,m]=re.useState(!1);if(!e||!i)return null;const o=(I,D)=>{if(I==null)return"N/A";const O=Number(I);if(isNaN(O))return"N/A";switch(D){case"price":return`$${O.toLocaleString()}`;case"days":return`${O} days`;case"percentage":return`${O.toFixed(1)}%`;case"ratio":return`${(O*100).toFixed(1)}%`;case"coordinate":return O.toFixed(4);default:return O.toLocaleString()}},x=I=>{if(I==null)return{formatted:"N/A",isPositive:!1,isZero:!0};const D=Number(I);if(isNaN(D))return{formatted:"N/A",isPositive:!1,isZero:!0};const O=D>0,P=D===0;return{formatted:`${O?"+":""}${D.toFixed(1)}%`,isPositive:O,isZero:P}},E=[{key:"median_sale_price",label:"Median Sale Price",type:"price",momKey:"median_sale_price_mom_pct",yoyKey:"median_sale_price_yoy_pct"},{key:"median_list_price",label:"Median List Price",type:"price",momKey:"median_list_price_mom_pct",yoyKey:"median_list_price_yoy_pct"},{key:"median_ppsf",label:"Median Price per Sq Ft",type:"price",momKey:"median_ppsf_mom_pct",yoyKey:"median_ppsf_yoy_pct"},{key:"homes_sold",label:"Homes Sold",type:"number",momKey:"homes_sold_mom_pct",yoyKey:"homes_sold_yoy_pct"},{key:"pending_sales",label:"Pending Sales",type:"number",momKey:"pending_sales_mom_pct",yoyKey:"pending_sales_yoy_pct"},{key:"new_listings",label:"New Listings",type:"number",momKey:"new_listings_mom_pct",yoyKey:"new_listings_yoy_pct"},{key:"inventory",label:"Inventory",type:"number",momKey:"inventory_mom_pct",yoyKey:"inventory_yoy_pct"},{key:"months_of_supply",label:"Months of Supply",type:"number",momKey:"months_of_supply_mom_pct",yoyKey:"months_of_supply_yoy_pct"},{key:"median_dom",label:"Median Days on Market",type:"days",momKey:"median_dom_mom_pct",yoyKey:"median_dom_yoy_pct"},{key:"avg_sale_to_list_ratio",label:"Sale-to-List Ratio",type:"ratio",momKey:"avg_sale_to_list_ratio_mom_pct",yoyKey:"avg_sale_to_list_ratio_yoy_pct"},{key:"sold_above_list",label:"% Sold Above List",type:"percentage",momKey:"sold_above_list_mom_pct",yoyKey:"sold_above_list_yoy_pct"},{key:"price_drops",label:"% Price Drops",type:"percentage",momKey:"price_drops_mom_pct",yoyKey:"price_drops_yoy_pct"},{key:"off_market_in_two_weeks",label:"% Off Market in 2 Weeks",type:"percentage",momKey:"off_market_in_two_weeks_mom_pct",yoyKey:"off_market_in_two_weeks_yoy_pct"}].map(I=>({...I,value:i[I.key]})).filter(I=>I.value!==null&&I.value!==void 0);return ae.jsxs("div",{className:`absolute left-0 bg-dashboard-panel border-r border-dashboard-border shadow-lg z-40 transition-all duration-300 h-full flex flex-col ${n?"w-16":"w-96"}`,children:[ae.jsxs("div",{className:"flex items-center justify-between px-3 py-2 border-b border-dashboard-border",role:"banner",children:[!n&&ae.jsxs("div",{className:"flex flex-col justify-center",children:[ae.jsx("h2",{className:"text-lg font-semibold leading-tight",children:i.zipCode}),ae.jsx("p",{className:"text-sm text-muted-foreground leading-none",children:i.city})]}),ae.jsx("div",{className:"flex items-center",children:!n&&ae.jsx(Cc,{variant:"ghost",size:"icon",className:"h-8 w-8",onClick:h,"aria-label":"Close sidebar",children:ae.jsx($m,{className:"h-4 w-4"})})})]}),!n&&ae.jsxs("div",{className:"flex flex-col flex-1 overflow-hidden min-h-0",children:[d?ae.jsx("div",{className:"p-4 flex-1 overflow-y-auto",children:ae.jsx(hV,{currentZip:i,allZipData:l,onClose:()=>m(!1)})}):ae.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-3",children:[ae.jsxs(hy,{children:[ae.jsx(L4,{children:ae.jsxs(M4,{className:"text-sm flex items-center",children:[ae.jsx(tP,{className:"h-4 w-4 mr-2"}),"Location Information"]})}),ae.jsxs(dy,{className:"space-y-2 text-sm",children:[ae.jsxs("div",{className:"flex justify-between",children:[ae.jsx("span",{children:"City:"}),ae.jsx("span",{className:"font-medium",children:i.city})]}),ae.jsxs("div",{className:"flex justify-between",children:[ae.jsx("span",{children:"County:"}),ae.jsx("span",{className:"font-medium",children:i.county})]}),ae.jsxs("div",{className:"flex justify-between",children:[ae.jsx("span",{children:"Metro Area:"}),ae.jsx("span",{className:"font-medium",children:i.parent_metro})]})]})]}),ae.jsxs("h3",{className:"text-sm font-medium pt-2 flex items-center",children:[ae.jsx($3,{className:"h-4 w-4 mr-2"}),"Market Data"]}),ae.jsx("div",{className:"space-y-3",children:E.map((I,D)=>{const O=I.momKey?x(i[I.momKey]):null,P=I.yoyKey?x(i[I.yoyKey]):null;return ae.jsx(hy,{children:ae.jsx(dy,{className:"p-4",children:ae.jsxs("div",{className:"space-y-2",children:[ae.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:I.label}),ae.jsx("p",{className:"text-xl font-bold",children:o(I.value,I.type)}),ae.jsxs("div",{className:"flex flex-wrap gap-2 text-xs",children:[O&&!O.isZero&&ae.jsxs("span",{className:`flex items-center ${O.isPositive?"text-green-600":"text-red-600"}`,children:[O.isPositive?ae.jsx($b,{className:"h-3 w-3 mr-1"}):ae.jsx(qb,{className:"h-3 w-3 mr-1"}),O.formatted," vs last month"]}),P&&!P.isZero&&ae.jsxs("span",{className:`flex items-center ${P.isPositive?"text-green-600":"text-red-600"}`,children:[P.isPositive?ae.jsx($b,{className:"h-3 w-3 mr-1"}):ae.jsx(qb,{className:"h-3 w-3 mr-1"}),P.formatted," vs last year"]})]})]})})},D)})})]}),ae.jsx("div",{className:"flex-shrink-0 px-4 py-4 border-t border-dashboard-border bg-dashboard-panel",children:ae.jsxs(Cc,{variant:"outline",className:"w-full",onClick:()=>m(!d),children:[ae.jsx(Z3,{className:"h-4 w-4 mr-2"}),d?"Back to Details":"Compare ZIP Codes"]})})]})]})}const fV="/Domapus/";function pV(){const[e,n]=re.useState("median_sale_price"),[i,l]=re.useState(null),[h,d]=re.useState(""),[m,o]=re.useState({}),[x,E]=re.useState(null),[I,D]=re.useState(!1),[O]=re.useState(!1),[P,W]=re.useState(!1),{processData:z,isLoading:H}=QU();re.useEffect(()=>{let he=!0,Ie=!1;(async()=>{if(Ie)return;Ie=!0,console.log("[HousingDashboard] Starting initial data load");const Pe=new URL(`${fV}data/zip-data.json`,window.location.origin).href;console.log("[HousingDashboard] Data URL:",Pe);try{console.log("[HousingDashboard] Calling processData for ZIP data");const xe=await z({type:"LOAD_AND_PROCESS_DATA",data:{url:Pe,selectedMetric:"median_sale_price"}});if(!he){console.log("[HousingDashboard] Component unmounted, aborting");return}xe&&(console.log(`[HousingDashboard] ZIP data loaded: ${Object.keys(xe.zip_codes).length} ZIPs`),o(xe.zip_codes),E(xe.bounds),setTimeout(()=>{eV(xe.zip_codes)},100)),console.log("[HousingDashboard] Initial data load complete")}catch(xe){console.error("[HousingDashboard] Failed to load initial data:",xe)}})();const Me=setTimeout(()=>W(!0),3e4);return()=>{he=!1,clearTimeout(Me)}},[]);const Z=he=>{console.log("[HousingDashboard] ZIP selected:",he.zipCode),l(he),D(!0)},[ie,ce]=re.useState(!1);return ae.jsxs("div",{className:"w-full h-screen bg-dashboard-bg overflow-hidden flex flex-col",children:[P&&ae.jsx(lV,{onClose:()=>W(!1)}),ae.jsx(nV,{selectedMetric:e,onMetricChange:n,onSearch:d,children:ae.jsx(Kj,{allZipData:m,selectedMetric:e,onExportModeChange:ce})}),ae.jsxs("div",{className:"flex flex-1 relative h-full min-h-[400px]",children:[I&&ae.jsx(dV,{isOpen:I,isCollapsed:O,zipData:i,allZipData:m,onClose:()=>D(!1)}),ae.jsxs("div",{className:"flex-1 relative",children:[ae.jsx("div",{className:"absolute inset-0 min-h-[400px]",children:ae.jsx(aV,{selectedMetric:e,onZipSelect:Z,searchZip:h,zipData:m,colorScaleDomain:x?[x.min,x.max]:null,isLoading:H,processData:z})}),!ie&&ae.jsx("div",{className:"absolute bottom-4 right-4 w-64 z-[1000] pointer-events-auto",children:ae.jsx(tx,{selectedMetric:e,metricValues:Object.values(m).map(he=>he[e]??0).filter(he=>he>0)})})]})]})]})}const mV=()=>ae.jsx(pV,{}),gV=()=>{const e=Xm();return re.useEffect(()=>{console.error("404 Error: User attempted to access non-existent route:",e.pathname)},[e.pathname]),ae.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-100",children:ae.jsxs("div",{className:"text-center",children:[ae.jsx("h1",{className:"text-4xl font-bold mb-4",children:"404"}),ae.jsx("p",{className:"text-xl text-gray-600 mb-4",children:"Oops! Page not found"}),ae.jsx("p",{className:"text-gray-600 mb-6",children:"Are you looking for [Domapus](https://github.com/Jasperc2024/Domapus)?"}),ae.jsx(DU,{to:"/",className:"text-blue-500 hover:text-blue-700 underline",children:"Return to Home"})]})})},yV=new Pk,vV=()=>ae.jsx(Mk,{client:yV,children:ae.jsxs(ik,{children:[ae.jsx(QP,{}),ae.jsx(gL,{}),ae.jsx(MU,{basename:"/Domapus",children:ae.jsxs(EU,{children:[ae.jsx(w_,{path:"/",element:ae.jsx(mV,{})}),ae.jsx(w_,{path:"*",element:ae.jsx(gV,{})})]})})]})});class _V extends Pr.Component{constructor(n){super(n),this.state={hasError:!1}}static getDerivedStateFromError(){return{hasError:!0}}componentDidCatch(n,i){console.error("Error Boundary Caught:",n,i)}handleTryAgain=()=>{this.setState({hasError:!1})};render(){return this.state.hasError?ae.jsxs("div",{className:"flex flex-col items-center justify-center h-screen bg-gray-100 text-center p-4",children:[ae.jsx("h2",{className:"text-2xl font-bold text-red-600 mb-4",children:"Oops! Something went wrong."}),ae.jsx("p",{className:"text-gray-700 mb-6",children:"We've logged the issue and will look into it. Please try again."}),ae.jsx(Cc,{onClick:this.handleTryAgain,children:"Try Again"})]}):this.props.children}}VT.createRoot(document.getElementById("root")).render(ae.jsx(_V,{children:ae.jsx(vV,{})}));export{rs as _,wV as c,pw as g};
