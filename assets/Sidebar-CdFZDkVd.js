import{c as j,j as e,a as k,b as Me,r as c,u as Re,d as De,e as A,f as L,P as R,g as C,h as O,i as Pe,k as Ee,R as Ie,l as Te,m as Ae,F as $e,D as Fe,n as Le,X as K,B as N,C as S,o as ee,p as te,q as M,S as q,s as U,t as Y,v as X,w as $,I as Oe,x as Ke}from"./index-D3biHx6N.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ve=j("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const We=j("ChartColumn",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ze=j("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ge=j("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J=j("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const He=j("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Be=j("Map",[["path",{d:"M14.106 5.553a2 2 0 0 0 1.788 0l3.659-1.83A1 1 0 0 1 21 4.619v12.764a1 1 0 0 1-.553.894l-4.553 2.277a2 2 0 0 1-1.788 0l-4.212-2.106a2 2 0 0 0-1.788 0l-3.659 1.83A1 1 0 0 1 3 19.381V6.618a1 1 0 0 1 .553-.894l4.553-2.277a2 2 0 0 1 1.788 0z",key:"169xi5"}],["path",{d:"M15 5.764v15",key:"1pn4in"}],["path",{d:"M9 3.236v15",key:"1uimfh"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q=j("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z=j("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]),qe=Me("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function F({className:s,variant:n,...t}){return e.jsx("div",{className:k(qe({variant:n}),s),...t})}var I="Dialog",[se,ht]=De(I),[Ue,v]=se(I),ae=s=>{const{__scopeDialog:n,children:t,open:i,defaultOpen:l,onOpenChange:o,modal:m=!0}=s,x=c.useRef(null),y=c.useRef(null),[r,a]=Re({prop:i,defaultProp:l??!1,onChange:o,caller:I});return e.jsx(Ue,{scope:n,triggerRef:x,contentRef:y,contentId:A(),titleId:A(),descriptionId:A(),open:r,onOpenChange:a,onOpenToggle:c.useCallback(()=>a(p=>!p),[a]),modal:m,children:t})};ae.displayName=I;var ne="DialogTrigger",oe=c.forwardRef((s,n)=>{const{__scopeDialog:t,...i}=s,l=v(ne,t),o=L(n,l.triggerRef);return e.jsx(R.button,{type:"button","aria-haspopup":"dialog","aria-expanded":l.open,"aria-controls":l.contentId,"data-state":Z(l.open),...i,ref:o,onClick:C(s.onClick,l.onOpenToggle)})});oe.displayName=ne;var V="DialogPortal",[Ye,re]=se(V,{forceMount:void 0}),le=s=>{const{__scopeDialog:n,forceMount:t,children:i,container:l}=s,o=v(V,n);return e.jsx(Ye,{scope:n,forceMount:t,children:c.Children.map(i,m=>e.jsx(O,{present:t||o.open,children:e.jsx(Pe,{asChild:!0,container:l,children:m})}))})};le.displayName=V;var E="DialogOverlay",ie=c.forwardRef((s,n)=>{const t=re(E,s.__scopeDialog),{forceMount:i=t.forceMount,...l}=s,o=v(E,s.__scopeDialog);return o.modal?e.jsx(O,{present:i||o.open,children:e.jsx(Je,{...l,ref:n})}):null});ie.displayName=E;var Xe=Te("DialogOverlay.RemoveScroll"),Je=c.forwardRef((s,n)=>{const{__scopeDialog:t,...i}=s,l=v(E,t);return e.jsx(Ie,{as:Xe,allowPinchZoom:!0,shards:[l.contentRef],children:e.jsx(R.div,{"data-state":Z(l.open),...i,ref:n,style:{pointerEvents:"auto",...i.style}})})}),_="DialogContent",ce=c.forwardRef((s,n)=>{const t=re(_,s.__scopeDialog),{forceMount:i=t.forceMount,...l}=s,o=v(_,s.__scopeDialog);return e.jsx(O,{present:i||o.open,children:o.modal?e.jsx(Qe,{...l,ref:n}):e.jsx(ze,{...l,ref:n})})});ce.displayName=_;var Qe=c.forwardRef((s,n)=>{const t=v(_,s.__scopeDialog),i=c.useRef(null),l=L(n,t.contentRef,i);return c.useEffect(()=>{const o=i.current;if(o)return Ee(o)},[]),e.jsx(de,{...s,ref:l,trapFocus:t.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:C(s.onCloseAutoFocus,o=>{var m;o.preventDefault(),(m=t.triggerRef.current)==null||m.focus()}),onPointerDownOutside:C(s.onPointerDownOutside,o=>{const m=o.detail.originalEvent,x=m.button===0&&m.ctrlKey===!0;(m.button===2||x)&&o.preventDefault()}),onFocusOutside:C(s.onFocusOutside,o=>o.preventDefault())})}),ze=c.forwardRef((s,n)=>{const t=v(_,s.__scopeDialog),i=c.useRef(!1),l=c.useRef(!1);return e.jsx(de,{...s,ref:n,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:o=>{var m,x;(m=s.onCloseAutoFocus)==null||m.call(s,o),o.defaultPrevented||(i.current||(x=t.triggerRef.current)==null||x.focus(),o.preventDefault()),i.current=!1,l.current=!1},onInteractOutside:o=>{var y,r;(y=s.onInteractOutside)==null||y.call(s,o),o.defaultPrevented||(i.current=!0,o.detail.originalEvent.type==="pointerdown"&&(l.current=!0));const m=o.target;((r=t.triggerRef.current)==null?void 0:r.contains(m))&&o.preventDefault(),o.detail.originalEvent.type==="focusin"&&l.current&&o.preventDefault()}})}),de=c.forwardRef((s,n)=>{const{__scopeDialog:t,trapFocus:i,onOpenAutoFocus:l,onCloseAutoFocus:o,...m}=s,x=v(_,t),y=c.useRef(null),r=L(n,y);return Ae(),e.jsxs(e.Fragment,{children:[e.jsx($e,{asChild:!0,loop:!0,trapped:i,onMountAutoFocus:l,onUnmountAutoFocus:o,children:e.jsx(Fe,{role:"dialog",id:x.contentId,"aria-describedby":x.descriptionId,"aria-labelledby":x.titleId,"data-state":Z(x.open),...m,ref:r,onDismiss:()=>x.onOpenChange(!1)})}),e.jsxs(e.Fragment,{children:[e.jsx(et,{titleId:x.titleId}),e.jsx(st,{contentRef:y,descriptionId:x.descriptionId})]})]})}),W="DialogTitle",me=c.forwardRef((s,n)=>{const{__scopeDialog:t,...i}=s,l=v(W,t);return e.jsx(R.h2,{id:l.titleId,...i,ref:n})});me.displayName=W;var ue="DialogDescription",xe=c.forwardRef((s,n)=>{const{__scopeDialog:t,...i}=s,l=v(ue,t);return e.jsx(R.p,{id:l.descriptionId,...i,ref:n})});xe.displayName=ue;var he="DialogClose",fe=c.forwardRef((s,n)=>{const{__scopeDialog:t,...i}=s,l=v(he,t);return e.jsx(R.button,{type:"button",...i,ref:n,onClick:C(s.onClick,()=>l.onOpenChange(!1))})});fe.displayName=he;function Z(s){return s?"open":"closed"}var pe="DialogTitleWarning",[ft,ye]=Le(pe,{contentName:_,titleName:W,docsSlug:"dialog"}),et=({titleId:s})=>{const n=ye(pe),t=`\`${n.contentName}\` requires a \`${n.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${n.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${n.docsSlug}`;return c.useEffect(()=>{s&&(document.getElementById(s)||console.error(t))},[t,s]),null},tt="DialogDescriptionWarning",st=({contentRef:s,descriptionId:n})=>{const i=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${ye(tt).contentName}}.`;return c.useEffect(()=>{var o;const l=(o=s.current)==null?void 0:o.getAttribute("aria-describedby");n&&l&&(document.getElementById(n)||console.warn(i))},[i,s,n]),null},at=ae,nt=oe,ot=le,ge=ie,ve=ce,be=me,je=xe,rt=fe;const lt=at,it=nt,ct=ot,Ne=c.forwardRef(({className:s,...n},t)=>e.jsx(ge,{ref:t,className:k("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",s),...n}));Ne.displayName=ge.displayName;const _e=c.forwardRef(({className:s,children:n,...t},i)=>e.jsxs(ct,{children:[e.jsx(Ne,{}),e.jsxs(ve,{ref:i,className:k("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",s),...t,children:[n,e.jsxs(rt,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[e.jsx(K,{className:"h-4 w-4"}),e.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));_e.displayName=ve.displayName;const we=({className:s,...n})=>e.jsx("div",{className:k("flex flex-col space-y-1.5 text-center sm:text-left",s),...n});we.displayName="DialogHeader";const ke=c.forwardRef(({className:s,...n},t)=>e.jsx(be,{ref:t,className:k("text-lg font-semibold leading-none tracking-tight",s),...n}));ke.displayName=be.displayName;const dt=c.forwardRef(({className:s,...n},t)=>e.jsx(je,{ref:t,className:k("text-sm text-muted-foreground",s),...n}));dt.displayName=je.displayName;function mt({selectedMetric:s}){const[n,t]=c.useState("national"),[i,l]=c.useState(""),[o,m]=c.useState(!1),x=[{code:"CA",name:"California"},{code:"NY",name:"New York"},{code:"TX",name:"Texas"},{code:"FL",name:"Florida"},{code:"IL",name:"Illinois"},{code:"WA",name:"Washington"}],y=async()=>{m(!0);try{const r=document.createElement("canvas");r.width=1200,r.height=800;const a=r.getContext("2d");if(!a)throw new Error("Cannot get canvas context");a.fillStyle="#f8fafc",a.fillRect(0,0,r.width,r.height),a.fillStyle="#1e293b",a.font="bold 24px Arial",a.textAlign="center";const p=n==="national"?`U.S. Housing Market - ${s}`:`${i} Housing Market - ${s}`;a.fillText(p,r.width/2,40),a.fillStyle="#e2e8f0",a.fillRect(50,70,r.width-300,r.height-200),a.fillStyle="#64748b",a.font="16px Arial",a.textAlign="center",a.fillText("Map Visualization",r.width/2-75,r.height/2),a.fillStyle="#ffffff",a.fillRect(r.width-240,70,190,300),a.strokeStyle="#e2e8f0",a.strokeRect(r.width-240,70,190,300),a.fillStyle="#1e293b",a.font="bold 14px Arial",a.textAlign="left",a.fillText("Legend",r.width-230,95);const u=["Low","Medium-Low","Medium","Medium-High","High"],h=["#dcfce7","#bbf7d0","#fef3c7","#fed7aa","#fecaca"];u.forEach((T,P)=>{const d=120+P*25;a.fillStyle=h[P],a.fillRect(r.width-230,d-10,15,15),a.strokeStyle="#e2e8f0",a.strokeRect(r.width-230,d-10,15,15),a.fillStyle="#1e293b",a.font="12px Arial",a.fillText(T,r.width-210,d+2)}),a.fillStyle="#f1f5f9",a.fillRect(50,r.height-120,r.width-100,70),a.strokeStyle="#e2e8f0",a.strokeRect(50,r.height-120,r.width-100,70),a.fillStyle="#3b82f6",a.fillRect(70,r.height-100,30,30),a.fillStyle="#64748b",a.font="12px Arial",a.textAlign="left",a.fillText("Generated from: domapus.com",110,r.height-85),a.fillText(`Export Date: ${new Date().toLocaleDateString()}`,110,r.height-70),a.font="10px Arial",a.fillText("Data Source: Redfin Market Data",110,r.height-55);const w=document.createElement("a"),D=`housing-market-${n}-${s}-${new Date().toISOString().split("T")[0]}.png`;w.download=D,w.href=r.toDataURL("image/png"),w.click()}catch(r){console.error("Export failed:",r)}finally{m(!1)}};return e.jsxs(lt,{children:[e.jsx(it,{asChild:!0,children:e.jsxs(N,{variant:"outline",size:"sm","aria-label":"Export map as PNG",children:[e.jsx(J,{className:"h-4 w-4 mr-2","aria-hidden":"true"}),"Export Map"]})}),e.jsxs(_e,{className:"sm:max-w-md",children:[e.jsx(we,{children:e.jsxs(ke,{className:"flex items-center gap-2",children:[e.jsx(Be,{className:"h-5 w-5","aria-hidden":"true"}),"Export Map as PNG"]})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs(S,{children:[e.jsx(ee,{className:"pb-3",children:e.jsx(te,{className:"text-sm",children:"Export Type"})}),e.jsxs(M,{className:"space-y-3",children:[e.jsxs(q,{value:n,onValueChange:r=>t(r),children:[e.jsx(U,{"aria-label":"Select export type",children:e.jsx(Y,{})}),e.jsxs(X,{children:[e.jsx($,{value:"national",children:"National Map"}),e.jsx($,{value:"state",children:"State Map"})]})]}),n==="state"&&e.jsxs(q,{value:i,onValueChange:l,children:[e.jsx(U,{"aria-label":"Select state",children:e.jsx(Y,{placeholder:"Select a state"})}),e.jsx(X,{children:x.map(r=>e.jsx($,{value:r.code,children:r.name},r.code))})]})]})]}),e.jsxs("div",{className:"text-sm text-muted-foreground",children:[e.jsx("p",{children:"The exported PNG will include:"}),e.jsxs("ul",{className:"list-disc list-inside mt-1 space-y-1",children:[e.jsx("li",{children:"Map visualization with current metric"}),e.jsx("li",{children:"Legend and color scale"}),e.jsx("li",{children:"Website watermark and timestamp"}),e.jsx("li",{children:"Data source attribution"})]})]}),e.jsx(N,{onClick:y,disabled:o||n==="state"&&!i,className:"w-full","aria-label":o?"Exporting map...":"Export map as PNG",children:o?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-current mr-2"}),"Exporting..."]}):e.jsxs(e.Fragment,{children:[e.jsx(J,{className:"h-4 w-4 mr-2","aria-hidden":"true"}),"Export PNG"]})})]})]})]})}function ut({currentZip:s,onClose:n}){const[t,i]=c.useState(""),[l,o]=c.useState(null),[m,x]=c.useState({}),[y,r]=c.useState({}),[a,p]=c.useState(!1),[u,h]=c.useState("");c.useEffect(()=>{(async()=>{try{const f=await(await fetch("data/zip_data.json")).json();x(f);const Ce=await(await fetch("data/zip-city-mapping.csv")).text(),G={};Ce.split(`
`).slice(1).forEach(Se=>{const[H,B]=Se.split(",");H&&B&&(G[H.trim()]=B.trim())}),r(G)}catch(g){console.error("Error loading data:",g)}})()},[]);const w=async()=>{if(t.trim()){p(!0),h("");try{const d=m[t.trim()];if(d){const g={...d,zipCode:t.trim(),city:y[t.trim()]||d.city||"Unknown"};o(g)}else h("ZIP code not found in database"),o(null)}catch{h("Error searching for ZIP code"),o(null)}finally{p(!1)}}},D=(d,g)=>{if(d==null)return"N/A";const f=Number(d);switch(g){case"price":return`$${f.toLocaleString()}`;case"days":return`${f} days`;case"percentage":return f%1===0?`${f.toFixed(0)}%`:`${f.toFixed(1)}%`;case"ratio":const b=f*100;return b%1===0?`${b.toFixed(0)}%`:`${b.toFixed(1)}%`;default:return f%1===0?f.toFixed(0):f.toString()}},T=(d,g)=>{if(!d||!g)return"same";const f=Number(d)-Number(g);return Math.abs(f)<.01?"same":f>0?"higher":"lower"},P=[{key:"median_sale_price",label:"Median Sale Price",type:"price"},{key:"median_list_price",label:"Median List Price",type:"price"},{key:"median_dom",label:"Median Days on Market",type:"days"},{key:"inventory",label:"Inventory",type:"number"},{key:"new_listings",label:"New Listings",type:"number"},{key:"homes_sold",label:"Homes Sold",type:"number"},{key:"avg_sale_to_list_ratio",label:"Sale-to-List Ratio",type:"ratio"},{key:"sold_above_list",label:"% Sold Above List",type:"percentage"},{key:"off_market_in_two_weeks",label:"% Off Market in 2 Weeks",type:"percentage"}];return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-semibold text-dashboard-text-primary",children:"Compare ZIP Codes"}),e.jsx(N,{variant:"ghost",size:"sm",onClick:n,children:e.jsx(K,{className:"h-4 w-4"})})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(Oe,{placeholder:"Enter ZIP code to compare",value:t,onChange:d=>i(d.target.value),onKeyDown:d=>d.key==="Enter"&&w(),"aria-label":"ZIP code to compare"}),e.jsx(N,{onClick:w,disabled:a,size:"sm",children:e.jsx(Ke,{className:"h-4 w-4"})})]}),u&&e.jsx("div",{className:"text-sm text-red-500 bg-red-50 p-2 rounded",children:u}),l&&e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"grid grid-cols-3 gap-2 mb-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx(F,{variant:"outline",className:"mb-1",children:s.zipCode}),e.jsx("div",{className:"text-xs text-dashboard-text-secondary",children:s.city})]}),e.jsx("div",{className:"text-center text-xs text-dashboard-text-secondary",children:"vs"}),e.jsxs("div",{className:"text-center",children:[e.jsx(F,{variant:"outline",className:"mb-1",children:l.zipCode}),e.jsx("div",{className:"text-xs text-dashboard-text-secondary",children:l.city})]})]}),e.jsx("div",{className:"space-y-2",children:P.map(d=>{const g=s[d.key],f=l[d.key],b=T(g,f);return e.jsx(S,{className:"border-dashboard-border",children:e.jsxs(M,{className:"p-3",children:[e.jsx("div",{className:"text-center mb-2",children:e.jsx("span",{className:"text-xs text-dashboard-text-secondary font-medium",children:d.label})}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx("div",{className:"text-center",children:e.jsx("div",{className:`font-medium text-sm ${b==="higher"?"text-green-600":b==="lower"?"text-red-600":"text-dashboard-text-primary"}`,children:D(g,d.type)})}),e.jsx("div",{className:"text-center",children:e.jsx("div",{className:`font-medium text-sm ${b==="lower"?"text-green-600":b==="higher"?"text-red-600":"text-dashboard-text-primary"}`,children:D(f,d.type)})})]})]})},d.key)})})]})]})}function pt({isOpen:s,isCollapsed:n,zipData:t,onClose:i,onToggleCollapse:l}){const[o,m]=c.useState(!1);if(!s||!t)return null;const x=(a,p)=>{if(a==null)return"N/A";const u=Number(a);switch(p){case"price":return`$${u.toLocaleString()}`;case"days":return`${u} days`;case"percentage":return u%1===0?`${u.toFixed(0)}%`:`${u.toFixed(1)}%`;case"ratio":const h=u*100;return h%1===0?`${h.toFixed(0)}%`:`${h.toFixed(1)}%`;case"coordinate":return u.toFixed(4);default:return u%1===0?u.toFixed(0):u.toString()}},y=a=>{if(a==null)return{formatted:"N/A",isPositive:!1,isZero:!0};const p=Number(a),u=p>0,h=p===0;return{formatted:`${u?"+":""}${p%1===0?p.toFixed(0):p.toFixed(1)}%`,isPositive:u,isZero:h}},r=[{key:"median_sale_price",label:"Median Sale Price",type:"price",momKey:"median_sale_price_mom",yoyKey:"median_sale_price_yoy",value:t.median_sale_price||t.medianSalePrice},{key:"median_list_price",label:"Median List Price",type:"price",momKey:"median_list_price_mom",yoyKey:"median_list_price_yoy",value:t.median_list_price||t.medianListPrice},{key:"median_dom",label:"Median Days on Market",type:"days",momKey:"median_dom_mom",yoyKey:"median_dom_yoy",value:t.median_dom||t.medianDOM},{key:"inventory",label:"Inventory",type:"number",momKey:"inventory_mom",yoyKey:"inventory_yoy",value:t.inventory},{key:"new_listings",label:"New Listings",type:"number",momKey:"new_listings_mom",yoyKey:"new_listings_yoy",value:t.new_listings},{key:"homes_sold",label:"Homes Sold",type:"number",momKey:"homes_sold_mom",yoyKey:"homes_sold_yoy",value:t.homes_sold||t.homesSold},{key:"avg_sale_to_list_ratio",label:"Sale-to-List Ratio",type:"ratio",momKey:null,yoyKey:null,value:t.avg_sale_to_list_ratio||t.saleToListRatio},{key:"sold_above_list",label:"% Sold Above List",type:"percentage",momKey:null,yoyKey:null,value:t.sold_above_list||t.homesSoldAboveList},{key:"off_market_in_two_weeks",label:"% Off Market in 2 Weeks",type:"percentage",momKey:null,yoyKey:null,value:t.off_market_in_two_weeks||t.offMarket2Weeks},{key:"median_ppsf",label:"Median Price per Sq Ft",type:"price",momKey:null,yoyKey:null,value:t.median_ppsf},{key:"median_list_ppsf",label:"Median List Price per Sq Ft",type:"price",momKey:null,yoyKey:null,value:t.median_list_ppsf},{key:"pending_sales",label:"Pending Sales",type:"number",momKey:null,yoyKey:null,value:t.pending_sales},{key:"months_of_supply",label:"Months of Supply",type:"number",momKey:null,yoyKey:null,value:t.months_of_supply},{key:"price_drops",label:"Price Drops",type:"number",momKey:null,yoyKey:null,value:t.price_drops}].filter(a=>a.value!==null&&a.value!==void 0&&a.value!==0);return e.jsxs("div",{className:`fixed left-0 top-0 h-full bg-dashboard-panel border-r border-dashboard-border shadow-lg z-40 transition-all duration-300 ${n?"w-16":"w-96"}`,children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-dashboard-border",children:[!n&&e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold text-dashboard-text-primary",children:"ZIP Code Details"}),e.jsx("p",{className:"text-sm text-dashboard-text-secondary",children:t.zipCode}),t.city&&e.jsx("p",{className:"text-xs text-dashboard-text-secondary",children:t.city})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(N,{variant:"ghost",size:"sm",onClick:l,children:n?e.jsx(Ge,{className:"h-4 w-4"}):e.jsx(Ze,{className:"h-4 w-4"})}),!n&&e.jsx(N,{variant:"ghost",size:"sm",onClick:i,children:e.jsx(K,{className:"h-4 w-4"})})]})]}),!n&&e.jsxs("div",{className:"flex flex-col h-full",children:[o?e.jsx("div",{className:"p-4 flex-1 overflow-y-auto",children:e.jsx(ut,{currentZip:t,onClose:()=>m(!1)})}):e.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-3",children:[e.jsx("div",{className:"flex items-center space-x-2 mb-4",children:e.jsx(F,{variant:"outline",className:"text-lg px-3 py-1",children:t.zipCode})}),e.jsxs(S,{className:"border-dashboard-border mb-4",children:[e.jsx(ee,{className:"pb-2",children:e.jsxs(te,{className:"text-sm font-medium flex items-center",children:[e.jsx(He,{className:"h-4 w-4 mr-2"}),"Location Information"]})}),e.jsxs(M,{className:"space-y-2 text-sm",children:[t.city&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-dashboard-text-secondary",children:"City:"}),e.jsx("span",{className:"font-medium",children:t.city})]}),t.county&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-dashboard-text-secondary",children:"County:"}),e.jsx("span",{className:"font-medium",children:t.county})]}),t.parent_metro&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-dashboard-text-secondary",children:"Metro Area:"}),e.jsx("span",{className:"font-medium",children:t.parent_metro})]}),t.latitude&&t.longitude&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-dashboard-text-secondary",children:"Latitude:"}),e.jsx("span",{className:"font-medium",children:x(t.latitude,"coordinate")})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-dashboard-text-secondary",children:"Longitude:"}),e.jsx("span",{className:"font-medium",children:x(t.longitude,"coordinate")})]})]})]})]}),e.jsxs("div",{className:"flex items-center mb-3",children:[e.jsx(Ve,{className:"h-4 w-4 mr-2"}),e.jsx("h3",{className:"text-sm font-medium text-dashboard-text-primary",children:"Market Data"})]}),e.jsx("div",{className:"space-y-3",children:r.map((a,p)=>{const u=a.momKey?y(t[a.momKey]):null,h=a.yoyKey?y(t[a.yoyKey]):null;return e.jsx(S,{className:"border-dashboard-border",children:e.jsx(M,{className:"p-4",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-sm text-dashboard-text-secondary font-medium",children:a.label}),e.jsx("p",{className:"text-xl font-bold text-dashboard-text-primary",children:x(a.value,a.type)}),e.jsxs("div",{className:"flex flex-wrap gap-2 text-xs",children:[u&&!u.isZero&&e.jsxs("span",{className:`flex items-center ${u.isPositive?"text-green-600":"text-red-600"}`,children:[u.isPositive?e.jsx(z,{className:"h-3 w-3 mr-1"}):e.jsx(Q,{className:"h-3 w-3 mr-1"}),u.formatted," vs last month"]}),h&&!h.isZero&&e.jsxs("span",{className:`flex items-center ${h.isPositive?"text-green-600":"text-red-600"}`,children:[h.isPositive?e.jsx(z,{className:"h-3 w-3 mr-1"}):e.jsx(Q,{className:"h-3 w-3 mr-1"}),h.formatted," vs last year"]})]})]})})},p)})})]}),e.jsxs("div",{className:"p-4 space-y-3 border-t border-dashboard-border bg-dashboard-panel",children:[e.jsxs(N,{variant:"outline",className:"w-full",onClick:()=>m(!o),children:[e.jsx(We,{className:"h-4 w-4 mr-2"}),o?"Back to Details":"Compare ZIP Codes"]}),e.jsx(mt,{selectedMetric:"current-view"}),e.jsx(S,{className:"border-dashboard-border bg-muted/30",children:e.jsx(M,{className:"p-3",children:e.jsx("p",{className:"text-xs text-dashboard-text-secondary",children:"Data sourced from Redfin Data Center. Updated periodically from latest available data."})})})]})]})]})}export{pt as Sidebar};
